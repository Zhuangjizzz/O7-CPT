[

{
    "text": "Chapter Outline\n\n6.1 High-Frequency BJT Model ..... 566\n6.2 High-Frequency MOSFET Model ..... 574\n6.3 Frequency Response of CE/CS Amplifiers ..... 581\n6.4 Frequency Response of Differential Amplifiers ..... 592\n6.5 Bipolar Voltage and Current Buffers ..... 599\n6.6 MOS Voltage and Current Buffers ..... 606\n6.7 Open-Circuit Time-Constant (OCTC) Analysis ..... 612\n6.8 Frequency Response of Cascode Amplifiers ..... 623\n6.9 Frequency and Transient Responses of Op Amps ..... 629\n6.10 Diode Switching Transients ..... 639\n6.11 BJT Switching Transients ..... 644\n6.12 Transient Response of CMOS Gates and Voltage Comparators ..... 652\nAppendix 6A: Transfer Functions and Bode Plots ..... 665\nReferences ..... 672\nProblems ..... 672\n\nIn our exploration of electronic circuits to date, we have implicitly assumed that diodes and transistors respond to external signals instantaneously. This assumption holds true only up to certain operating frequencies, beyond which various parasitic reactances become significant, limiting the circuit's frequency response and operating speed (collectively referred to as dynamics). Since diodes and transistors operate based on charge control, their internal parasitics are predominantly capacitive, with the junction capacitance $C_{j}$ from Chapter 1 being a well-known example. However, even in the absence of electronic devices, circuits inherently exhibit reactive parasitics due to their dimensions and layout. Considering a circuit as a network of nodes and branches, we can assert that:\n\n- Each node exhibits stray capacitance towards its neighboring nodes, including the reference or ground node.\n- Each branch exhibits stray self-inductance and inductive coupling to adjacent branches.\n\nA capacitance, whether deliberate or parasitic, resists changes in the voltage across it, while an inductance resists changes in the current through it. These parasitics are typically small, meaning that at lower operating frequencies, stray capacitances act as open circuits and stray inductances act as short circuits, and can thus be disregarded. However, as the circuit's operating frequency or speed increases, the roles of capacitances and inductances reverse, with capacitances behaving more like short circuits and inductances like open circuits. In the circuits we focus on, the most severe limitations are generally due to stray capacitances. To analyze their impact on circuit dynamics, we need to enhance the small-signal transistor models used so far with appropriate capacitances.\n\nBoth BJTs and MOSFETs contain pn junctions, necessitating the inclusion of corresponding junction capacitances in their models. Additionally, the MOSFET includes capacitances formed by the gate with the channel and with the source and drain regions, which have no equivalent in the BJT. Conversely, the BJT features a capacitance related to minority charge accumulation in the base region, absent in the MOSFET. Thus, while there are similarities and differences in the parasitics of these two devices, the similarities are sufficient that mastering the high-frequency analysis of one type allows for significant adaptation to the other.\n\nCHAPTER HIGHLIGHTS\n\nThe chapter initiates with the physical basis of the parasitic capacitances in BJTs and MOSFETs, followed by the development of suitable high-frequency models for both devices.\n\nThese models are then utilized to examine the high-frequency behavior of basic single-transistor configurations (CE/CS, CC/CD, and CB/CG), as well as differential pairs, both passively and actively loaded. Given the distinctive feature of the $\\mathrm{CC} / \\mathrm{CD}$ and $\\mathrm{CB} / \\mathrm{CG}$ configurations in impedance transformation, special emphasis is placed on terminal impedances and their modeling, particularly regarding inductive impedances due to their propensity to cause ringing or even oscillations.\n\nAs circuit complexity grows, frequency analysis becomes increasingly challenging. The open-circuit time-constant (OCTC) technique, discussed next, simplifies this task by breaking it down into simpler sub-tasks, which we use to estimate the circuit's bandwidth. The OCTC technique is especially valuable in analyzing multi-transistor circuits like the cascode configuration.\n\nFrequency response reveals only certain aspects of a circuit's dynamics. To gain a complete understanding, we must also consider the transient response, its dual counterpart. Op amps exemplify the utility of knowing both perspectives concurrently.\n\nIn some scenarios, particularly in highly nonlinear applications such as switches and logic gates, only the transient response is pertinent. The chapter concludes with discussions on the switching transients of pn junctions and BJTs, the propagation delays of CMOS logic gates, and the response times of voltage comparators.\n\nEffective frequency analysis requires proficiency in manipulating transfer functions and constructing Bode plots. For ease of reference, these topics are succinctly reviewed in Appendix 6A at the chapter's end. The chapter extensively employs PSpice, both for displaying Bode plots and transient responses as a software oscilloscope, and for verifying hand calculations."
},
{
    "text": "Chapter Outline\n\n6.1 High-Frequency BJT Model ..... 566\n6.2 High-Frequency MOSFET Model ..... 574\n6.3 Frequency Response of CE/CS Amplifiers ..... 581\n6.4 Frequency Response of Differential Amplifiers ..... 592\n6.5 Bipolar Voltage and Current Buffers ..... 599\n6.6 MOS Voltage and Current Buffers ..... 606\n6.7 Open-Circuit Time-Constant (OCTC) Analysis ..... 612\n6.8 Frequency Response of Cascode Amplifiers ..... 623\n6.9 Frequency and Transient Responses of Op Amps ..... 629\n6.10 Diode Switching Transients ..... 639\n6.11 BJT Switching Transients ..... 644\n6.12 Transient Response of CMOS Gates and Voltage Comparators ..... 652\nAppendix 6A: Transfer Functions and Bode Plots ..... 665\nReferences ..... 672\nProblems ..... 672\n\nIn our exploration of electronic circuits to date, we have implicitly assumed that diodes and transistors respond to external signals instantaneously. This assumption holds true only up to certain operating frequencies, beyond which various parasitic reactances become significant, limiting the circuit's frequency response and operating speed (collectively termed dynamics). Since diodes and transistors function based on charge control, their internal parasitics are predominantly capacitive, with the junction capacitance $C_{j}$ from Chapter 1 being a well-known example. However, even in the absence of electronic devices, circuits inherently exhibit reactive parasitics due to their dimensions and layout. Considering a circuit as a network of nodes and branches, we can assert that:\n\n- Each node exhibits stray capacitance towards its neighboring nodes, including the reference or ground node.\n- Each branch exhibits stray self-inductance and inductive coupling to adjacent branches.\n\nA capacitance, whether deliberate or parasitic, resists changes in the voltage across it, while an inductance resists changes in the current through it. These parasitics are typically minor, meaning that at lower operating frequencies, stray capacitances act as open circuits and stray inductances as short circuits, and can thus be disregarded. However, as the circuit's operating frequency or speed increases, the roles of capacitances and inductances reverse, with capacitances behaving more like short circuits and inductances like open circuits. In the circuits we focus on, the most severe limitations are due to stray capacitances. To analyze their impact on circuit dynamics, we need to enhance the small-signal transistor models used so far with appropriate capacitances.\n\nBoth BJTs and MOSFETs contain pn junctions, necessitating the inclusion of corresponding junction capacitances in their models. Additionally, the MOSFET includes capacitances formed by the gate with the channel and with the source and drain regions, which have no equivalent in the BJT. Conversely, the BJT features a capacitance related to minority charge accumulation in the base region, absent in the MOSFET. Thus, while there are similarities and differences in the parasitics of these devices, the similarities are substantial enough that mastering the high-frequency analysis of one type allows for significant adaptation to the other.\n\nCHAPTER HIGHLIGHTS\n\nThis chapter initiates with the physical basis of parasitic capacitances in BJTs and MOSFETs, followed by the development of appropriate high-frequency models for both devices.\n\nThese models are then utilized to study the high-frequency behavior of basic single transistor configurations (CE/CS, CC/CD, and CB/CG), as well as differential pairs, both passively and actively loaded. Given the distinctive feature of the $\\mathrm{CC} / \\mathrm{CD}$ and $\\mathrm{CB} / \\mathrm{CG}$ configurations in impedance transformation, special emphasis is placed on terminal impedances and their modeling, particularly regarding inductive impedances due to their propensity to cause ringing or oscillations.\n\nAs circuit complexity grows, frequency analysis can become excessively challenging. The open-circuit time-constant (OCTC) technique, discussed next, simplifies this task by breaking it into simpler sub-tasks, which we use to estimate the circuit's bandwidth. The OCTC technique is especially valuable in analyzing multi-transistor circuits like the cascode configuration.\n\nFrequency response reveals only certain aspects of a circuit's dynamics. To gain a complete understanding, we must also consider the transient response, its dual counterpart. Op amps exemplify the importance of knowing both perspectives simultaneously.\n\nIn some scenarios, particularly in highly nonlinear applications like switches and logic gates, only the transient response is pertinent. The chapter concludes with discussions on the switching transients of pn junctions and BJTs, the propagation delays of CMOS logic gates, and the response times of voltage comparators.\n\nEffective frequency analysis necessitates proficiency in manipulating transfer functions and constructing Bode plots. For ease of reference, these topics are succinctly reviewed in Appendix 6A at the chapter's end. The chapter extensively employs PSpice, both for displaying Bode plots and transient responses as a software oscilloscope, and for verifying hand calculations."
},
{
    "text": "Chapter Outline\n\n6.1 High-Frequency BJT Model ..... 566\n6.2 High-Frequency MOSFET Model ..... 574\n6.3 Frequency Response of CE/CS Amplifiers ..... 581\n6.4 Frequency Response of Differential Amplifiers ..... 592\n6.5 Bipolar Voltage and Current Buffers ..... 599\n6.6 MOS Voltage and Current Buffers ..... 606\n6.7 Open-Circuit Time-Constant (OCTC) Analysis ..... 612\n6.8 Frequency Response of Cascode Amplifiers ..... 623\n6.9 Frequency and Transient Responses of Op Amps ..... 629\n6.10 Diode Switching Transients ..... 639\n6.11 BJT Switching Transients ..... 644\n6.12 Transient Response of CMOS Gates and Voltage Comparators ..... 652\nAppendix 6A: Transfer Functions and Bode Plots ..... 665\nReferences ..... 672\nProblems ..... 672\n\nIn our exploration of electronic circuits thus far, we have implicitly assumed that diodes and transistors respond to external signals instantaneously. This assumption holds true only up to certain operating frequencies, beyond which various parasitic reactances become significant, limiting the circuit's frequency response and operating speed (collectively referred to as dynamics). Since diodes and transistors operate based on charge control, their internal parasitics are predominantly capacitive, with the junction capacitance $C_{j}$ from Chapter 1 being a well-known example. However, even in the absence of electronic devices, a circuit inherently exhibits reactive parasitics due to its dimensions and layout. Considering a circuit as a network of nodes and branches, we can assert that:\n\n- Each node exhibits stray capacitance towards its neighboring nodes, including the reference or ground node.\n- Each branch exhibits stray self-inductance as well as inductive coupling to adjacent branches.\n\nA capacitance, whether intentional or parasitic, tends to resist changes in the voltage across it, while an inductance resists changes in the current through it. These parasitics are typically small, meaning that at lower operating frequencies, stray capacitances act as open circuits and stray inductances act as short circuits, and can thus be neglected. However, as the circuit's operating frequency or speed increases, the roles of capacitances and inductances reverse, with capacitances behaving more like short circuits and inductances like open circuits. In the circuits we are examining, the most severe limitations are generally due to stray capacitances. To investigate their impact on circuit dynamics, we need to enhance the small-signal transistor models used so far with appropriate capacitances.\n\nBoth BJTs and MOSFETs contain pn junctions, so their models must include the corresponding junction capacitances. Additionally, the MOSFET involves capacitances formed by the gate with the channel and with the source and drain regions, which have no counterpart in the BJT. Conversely, the BJT exhibits a capacitance related to the minority charge buildup in the base region, which is not present in the MOSFET. Thus, while there are similarities and differences in the parasitics of these two devices, the similarities are sufficient that mastering the high-frequency analysis of one type allows for a significant portion of that knowledge to be applied to the other.\n\nCHAPTER HIGHLIGHTS\n\nThe chapter commences with the physical basis of the parasitic capacitances in BJTs and MOSFETs, followed by the development of suitable high-frequency models for both devices.\n\nThese models are then utilized to study the high-frequency behavior of basic single-transistor configurations (CE/CS, CC/CD, and CB/CG), as well as differential pairs, both passively and actively loaded. Given that the $\\mathrm{CC} / \\mathrm{CD}$ and $\\mathrm{CB} / \\mathrm{CG}$ configurations are notable for their impedance transformation capabilities, special attention is devoted to terminal impedances and their modeling, particularly regarding inductive impedances due to their tendency to cause ringing or even oscillations.\n\nAs circuit complexity grows, frequency analysis can become excessively challenging. The open-circuit time-constant (OCTC) technique, discussed next, simplifies this task by breaking it down into simpler sub-tasks, which we use to estimate the circuit's bandwidth. The OCTC technique is particularly beneficial for analyzing multi-transistor circuits like the cascode configuration.\n\nFrequency response reveals only certain aspects of a circuit's dynamics. To obtain a complete understanding, we must also consider the transient response, its dual counterpart. Op amps exemplify the usefulness of knowing both perspectives simultaneously.\n\nIn some scenarios, particularly in highly nonlinear applications such as switches and logic gates, only the transient response is of interest. The chapter concludes with an examination of the switching transients of pn junctions and BJTs, the propagation delays in CMOS logic gates, and the response times of voltage comparators.\n\nFrequency analysis necessitates proficiency in manipulating transfer functions and constructing Bode plots. For convenience, these topics are succinctly reviewed in Appendix 6A at the chapter's end. The chapter extensively employs PSpice both as a software oscilloscope for displaying Bode plots and transient responses, and as a tool for verifying hand calculations."
},
{
    "text": "Chapter Outline\n\n6.1 High-Frequency BJT Model ..... 566\n6.2 High-Frequency MOSFET Model ..... 574\n6.3 Frequency Response of CE/CS Amplifiers ..... 581\n6.4 Frequency Response of Differential Amplifiers ..... 592\n6.5 Bipolar Voltage and Current Buffers ..... 599\n6.6 MOS Voltage and Current Buffers ..... 606\n6.7 Open-Circuit Time-Constant (OCTC) Analysis ..... 612\n6.8 Frequency Response of Cascode Amplifiers ..... 623\n6.9 Frequency and Transient Responses of Op Amps ..... 629\n6.10 Diode Switching Transients ..... 639\n6.11 BJT Switching Transients ..... 644\n6.12 Transient Response of CMOS Gates and Voltage Comparators ..... 652\nAppendix 6A: Transfer Functions and Bode Plots ..... 665\nReferences ..... 672\nProblems ..... 672\n\nIn our exploration of electronic circuits to date, we have implicitly assumed that diodes and transistors respond to external signals instantaneously. This assumption holds true only up to certain operating frequencies, beyond which various parasitic reactances become significant, limiting the circuit's frequency response and operating speed (collectively referred to as dynamics). Since diodes and transistors operate based on charge control, their internal parasitics are predominantly capacitive, with the junction capacitance $C_{j}$ from Chapter 1 being a well-known example. However, even in the absence of electronic devices, circuits inherently exhibit reactive parasitics due to their dimensions and layout. Considering a circuit as a network of nodes and branches, we can assert that:\n\n- Each node exhibits stray capacitance towards its neighboring nodes, including the reference or ground node.\n- Each branch exhibits stray self-inductance and inductive coupling to adjacent branches.\n\nA capacitance, whether deliberate or parasitic, tends to resist changes in the voltage across it, while an inductance resists changes in the current through it. These parasitics are typically small, meaning that at lower operating frequencies, stray capacitances act as open circuits and stray inductances as short circuits, and can thus be disregarded. However, as the circuit's operating frequency or speed increases, the roles of capacitances and inductances reverse, with capacitances behaving more like short circuits and inductances like open circuits. In the circuits we are examining, the most severe limitations are usually due to stray capacitances. To study their impact on circuit dynamics, we need to enhance the small-signal transistor models used so far with appropriate capacitances.\n\nBoth BJTs and MOSFETs contain pn junctions, so their models must include the corresponding junction capacitances. Additionally, the MOSFET involves capacitances formed by the gate with the channel and with the source and drain regions, which have no equivalent in the BJT. Conversely, the BJT features a capacitance related to minority charge accumulation in the base region, which is not present in the MOSFET. Thus, while there are similarities and differences in the physical origins of the parasitics in these two devices, the similarities are sufficient that mastering the high-frequency analysis of one type allows for significant adaptation to the other.\n\nCHAPTER HIGHLIGHTS\n\nThe chapter commences with the physical basis of parasitic capacitances in BJTs and MOSFETs, followed by the development of suitable high-frequency models for both devices.\n\nThese models are then utilized to analyze the high-frequency behavior of basic single transistor configurations (CE/CS, CC/CD, and CB/CG), as well as differential pairs, both passively and actively loaded. Given that the key feature of the $\\mathrm{CC} / \\mathrm{CD}$ and $\\mathrm{CB} / \\mathrm{CG}$ configurations is their ability to transform impedance, special emphasis is placed on terminal impedances and their modeling, particularly regarding inductive impedances due to their propensity to cause ringing or even oscillations.\n\nAs circuit complexity grows, frequency analysis can become excessively challenging. The open-circuit time-constant (OCTC) technique, discussed next, simplifies this task by breaking it down into simpler sub-tasks, which we then use to estimate the circuit's bandwidth. The OCTC technique is especially valuable in analyzing multi-transistor circuits like the cascode configuration.\n\nFrequency response reveals only certain aspects of a circuit's dynamics. To gain a complete understanding, we must also consider the transient response, its dual counterpart. Operational amplifiers provide a classic example where knowing both perspectives simultaneously is beneficial.\n\nIn some scenarios, particularly in highly nonlinear applications such as switches and logic gates, only the transient response is of interest. The chapter concludes with the examination of switching transients in pn junctions and BJTs, the propagation delays in CMOS logic gates, and the response times of voltage comparators.\n\nFrequency analysis necessitates proficiency in manipulating transfer functions and constructing Bode plots. For ease of reference, these topics are succinctly reviewed in Appendix 6A at the chapter's end. The chapter extensively employs PSpice, both as a software oscilloscope for displaying Bode plots and transient responses, and as a tool for verifying hand calculations."
},
{
    "text": "Chapter Outline\n\n6.1 High-Frequency BJT Model ..... 566\n6.2 High-Frequency MOSFET Model ..... 574\n6.3 Frequency Response of CE/CS Amplifiers ..... 581\n6.4 Frequency Response of Differential Amplifiers ..... 592\n6.5 Bipolar Voltage and Current Buffers ..... 599\n6.6 MOS Voltage and Current Buffers ..... 606\n6.7 Open-Circuit Time-Constant (OCTC) Analysis ..... 612\n6.8 Frequency Response of Cascode Amplifiers ..... 623\n6.9 Frequency and Transient Responses of Op Amps ..... 629\n6.10 Diode Switching Transients ..... 639\n6.11 BJT Switching Transients ..... 644\n6.12 Transient Response of CMOS Gates and Voltage Comparators ..... 652\nAppendix 6A: Transfer Functions and Bode Plots ..... 665\nReferences ..... 672\nProblems ..... 672\n\nIn our exploration of electronic circuits thus far, we have implicitly assumed that diodes and transistors respond to external signals instantaneously. This assumption holds true only up to certain operating frequencies, beyond which various parasitic reactances become significant, limiting the circuit's frequency response and operating speed (collectively termed dynamics). Since diodes and transistors operate based on charge control, their internal parasitics are predominantly capacitive, with the junction capacitance $C_{j}$ from Chapter 1 being a typical example. However, even in the absence of electronic devices, circuits inherently exhibit reactive parasitics due to their dimensions and layout. Considering a circuit as a network of nodes and branches, we can assert that:\n\n- Each node exhibits stray capacitance towards its neighboring nodes, including the reference or ground node.\n- Each branch exhibits stray self-inductance and inductive coupling to adjacent branches.\n\nA capacitance, whether deliberate or parasitic, resists changes in the voltage across it, while an inductance resists changes in the current through it. These parasitics are generally minor, meaning that at lower operating frequencies, stray capacitances act as open circuits and stray inductances as short circuits, and can thus be disregarded. However, as the circuit's operating frequency or speed increases, the roles of capacitances and inductances reverse, with capacitances behaving more like short circuits and inductances like open circuits. In the circuits we focus on, the most severe limitations are typically due to stray capacitances. To analyze their impact on circuit dynamics, we need to enhance the small-signal transistor models used so far with appropriate capacitances.\n\nBoth BJTs and MOSFETs contain pn junctions, necessitating the inclusion of corresponding junction capacitances in their models. Additionally, the MOSFET includes capacitances formed by the gate with the channel, as well as with the source and drain regions, which have no equivalent in the BJT. Conversely, the BJT features a capacitance related to minority charge accumulation in the base region, absent in the MOSFET. Thus, while there are similarities and differences in the parasitics of these devices, the similarities are sufficient that mastering the high-frequency analysis of one type allows for significant adaptation to the other.\n\nCHAPTER HIGHLIGHTS\n\nThe chapter commences with the physical basis of parasitic capacitances in BJTs and MOSFETs, followed by the development of appropriate high-frequency models for both devices.\n\nThese models are then utilized to study the high-frequency behavior of basic single-transistor configurations (CE/CS, CC/CD, and CB/CG), as well as differential pairs, both passively and actively loaded. Given the unique impedance transformation capabilities of the $\\mathrm{CC} / \\mathrm{CD}$ and $\\mathrm{CB} / \\mathrm{CG}$ configurations, special emphasis is placed on terminal impedances and their modeling, particularly regarding inductive impedances due to their propensity to cause ringing or even oscillations.\n\nAs circuit complexity grows, frequency analysis can become excessively challenging. The open-circuit time-constant (OCTC) technique, discussed next, simplifies this task by breaking it down into simpler sub-tasks, which we use to estimate the circuit's bandwidth. The OCTC technique is especially valuable for analyzing multi-transistor circuits like the cascode configuration.\n\nFrequency response analysis reveals only certain aspects of a circuit's dynamics. To gain a complete understanding, we must also consider the transient response, its dual counterpart. Op amps serve as a classic example where both perspectives are beneficial.\n\nIn some scenarios, particularly in highly nonlinear applications like switches and logic gates, only the transient response is of interest. The chapter concludes with an examination of the switching transients of pn junctions and BJTs, the propagation delays of CMOS logic gates, and the response times of voltage comparators.\n\nEffective frequency analysis necessitates proficiency in manipulating transfer functions and constructing Bode plots. For convenience, these topics are succinctly reviewed in Appendix 6A at the chapter's end. The chapter extensively employs PSpice, both for displaying Bode plots and transient responses as a software oscilloscope, and for verifying hand calculations."
},
{
    "text": "Chapter Outline\n\n6.1 High-Frequency BJT Model ..... 566\n6.2 High-Frequency MOSFET Model ..... 574\n6.3 Frequency Response of CE/CS Amplifiers ..... 581\n6.4 Frequency Response of Differential Amplifiers ..... 592\n6.5 Bipolar Voltage and Current Buffers ..... 599\n6.6 MOS Voltage and Current Buffers ..... 606\n6.7 Open-Circuit Time-Constant (OCTC) Analysis ..... 612\n6.8 Frequency Response of Cascode Amplifiers ..... 623\n6.9 Frequency and Transient Responses of Op Amps ..... 629\n6.10 Diode Switching Transients ..... 639\n6.11 BJT Switching Transients ..... 644\n6.12 Transient Response of CMOS Gates and Voltage Comparators ..... 652\nAppendix 6A: Transfer Functions and Bode Plots ..... 665\nReferences ..... 672\nProblems ..... 672\n\nIn our exploration of electronic circuits to date, we have implicitly assumed that diodes and transistors respond to external signals instantaneously. This assumption holds true only up to certain operating frequencies, beyond which various parasitic reactances become significant, limiting the circuit's frequency response and operating speed (collectively referred to as dynamics). Since diodes and transistors operate based on charge control, their internal parasitics are predominantly capacitive, with the junction capacitance $C_{j}$ from Chapter 1 being a well-known example. However, even in the absence of electronic devices, circuits inherently exhibit reactive parasitics due to their dimensions and layout. Considering a circuit as a network of nodes and branches, we can assert that:\n\n- Each node exhibits stray capacitance towards its neighboring nodes, including the reference or ground node.\n- Each branch exhibits stray self-inductance as well as inductive coupling to its adjacent branches.\n\nA capacitance, whether deliberate or parasitic, tends to resist changes in the voltage across it, while an inductance resists changes in the current through it. These parasitics are typically small, meaning that at lower operating frequencies, stray capacitances act as open circuits and stray inductances as short circuits, and can thus be disregarded. However, as the circuit's operating frequency or speed increases, the roles of capacitances and inductances reverse, with capacitances behaving more like short circuits and inductances like open circuits. In the circuits we focus on, the most severe limitations are usually due to stray capacitances. To analyze their impact on circuit dynamics, we need to enhance the small-signal transistor models used so far with appropriate capacitances.\n\nBoth BJTs and MOSFETs contain pn junctions, necessitating the inclusion of corresponding junction capacitances in their models. Additionally, the MOSFET includes capacitances formed by the gate with the channel and with the source and drain regions, which have no equivalent in the BJT. Conversely, the BJT features a capacitance related to minority charge accumulation in the base region, which is not present in the MOSFET. Thus, while there are similarities and differences in the parasitics of these two devices, the similarities are sufficient that mastering the high-frequency analysis of one type allows for significant adaptation to the other.\n\nCHAPTER HIGHLIGHTS\n\nThe chapter commences with the physical basis of parasitic capacitances in BJTs and MOSFETs, followed by the development of suitable high-frequency models for both devices.\n\nThese models are then utilized to study the high-frequency behavior of basic single-transistor configurations (CE/CS, CC/CD, and CB/CG), as well as differential pairs, both passively and actively loaded. Given that the $\\mathrm{CC} / \\mathrm{CD}$ and $\\mathrm{CB} / \\mathrm{CG}$ configurations are notable for their impedance transformation capabilities, special emphasis is placed on terminal impedances and their modeling, particularly regarding inductive impedances due to their propensity to cause ringing or even oscillations.\n\nAs circuit complexity grows, frequency analysis can become excessively challenging. The open-circuit time-constant (OCTC) technique, discussed next, simplifies this task by breaking it down into simpler sub-tasks, which we use to estimate the circuit's bandwidth. The OCTC technique is especially valuable in analyzing multi-transistor circuits like the cascode configuration.\n\nFrequency response reveals only certain aspects of a circuit's dynamics. To gain a complete understanding, we must also consider the transient response, its dual counterpart. Op amps exemplify the usefulness of knowing both perspectives simultaneously.\n\nIn some scenarios, particularly in highly nonlinear applications such as switches and logic gates, only the transient response is of interest. The chapter concludes with an examination of the switching transients of pn junctions and BJTs, the propagation delays of CMOS logic gates, and the response times of voltage comparators.\n\nEffective frequency analysis requires proficiency in manipulating transfer functions and constructing Bode plots. For convenience, these topics are succinctly reviewed in Appendix 6A at the chapter's end. The chapter extensively employs PSpice, both as a software oscilloscope for displaying Bode plots and transient responses, and as a tool for verifying hand calculations."
},
{
    "text": "Chapter Outline\n\n6.1 High-Frequency BJT Model ..... 566\n6.2 High-Frequency MOSFET Model ..... 574\n6.3 Frequency Response of CE/CS Amplifiers ..... 581\n6.4 Frequency Response of Differential Amplifiers ..... 592\n6.5 Bipolar Voltage and Current Buffers ..... 599\n6.6 MOS Voltage and Current Buffers ..... 606\n6.7 Open-Circuit Time-Constant (OCTC) Analysis ..... 612\n6.8 Frequency Response of Cascode Amplifiers ..... 623\n6.9 Frequency and Transient Responses of Op Amps ..... 629\n6.10 Diode Switching Transients ..... 639\n6.11 BJT Switching Transients ..... 644\n6.12 Transient Response of CMOS Gates and Voltage Comparators ..... 652\nAppendix 6A: Transfer Functions and Bode Plots ..... 665\nReferences ..... 672\nProblems ..... 672\n\nIn our examination of electronic circuits to date, we have implicitly assumed that diodes and transistors respond to external signals instantaneously. This assumption holds true only up to certain operating frequencies, beyond which various parasitic reactances become significant, limiting the circuit's frequency response and operating speed (collectively referred to as dynamics). Since diodes and transistors operate based on charge control, their internal parasitics are predominantly capacitive, with the junction capacitance $C_{j}$ from Chapter 1 being a well-known example. However, even in the absence of electronic devices, circuits inherently exhibit reactive parasitics due to their dimensions and layout. Considering a circuit as a network of nodes and branches, we can assert that:\n\n- Each node exhibits stray capacitance towards its neighboring nodes, including the reference or ground node.\n- Each branch exhibits stray self-inductance and inductive coupling to adjacent branches.\n\nA capacitance, whether deliberate or parasitic, tends to resist changes in the voltage across it, while an inductance resists changes in the current through it. These parasitics are typically small, meaning that at lower operating frequencies, stray capacitances act as open circuits and stray inductances as short circuits, and can thus be neglected. However, as the operating frequency or speed of a circuit increases, the roles of capacitances and inductances reverse, with capacitances behaving more like short circuits and inductances like open circuits. In the circuits we focus on, the most severe limitations are usually due to stray capacitances. To analyze their impact on circuit dynamics, we need to enhance the small-signal transistor models used so far with appropriate capacitances.\n\nBoth BJTs and MOSFETs contain pn junctions, necessitating the inclusion of corresponding junction capacitances in their models. Additionally, the MOSFET includes capacitances formed by the gate with the channel and with the source and drain regions, which have no equivalent in the BJT. Conversely, the BJT features a capacitance related to minority charge accumulation in the base region, absent in the MOSFET. Thus, while there are similarities and differences in the parasitics of these two devices, the similarities are substantial enough that mastering the high-frequency analysis of one type allows for significant adaptation to the other.\n\nCHAPTER HIGHLIGHTS\n\nThe chapter commences with the physical basis of the parasitic capacitances in BJTs and MOSFETs, followed by the development of suitable high-frequency models for both devices.\n\nThese models are then utilized to study the high-frequency behavior of basic single transistor configurations (CE/CS, CC/CD, and CB/CG), as well as differential pairs, both passively and actively loaded. Given the unique impedance transformation capability of the $\\mathrm{CC} / \\mathrm{CD}$ and $\\mathrm{CB} / \\mathrm{CG}$ configurations, special emphasis is placed on terminal impedances and their modeling, particularly concerning inductive impedances due to their propensity to cause ringing or even oscillations.\n\nAs circuit complexity grows, frequency analysis can become excessively challenging. The open-circuit time-constant (OCTC) technique, discussed next, simplifies this task by breaking it down into simpler sub-tasks, which we use to estimate the circuit's bandwidth. The OCTC technique is especially valuable in analyzing multi-transistor circuits like the cascode configuration.\n\nWhile frequency response reveals certain aspects of a circuit's dynamics, a complete understanding also requires knowledge of the transient response, its dual. Op amps serve as a classic example where both perspectives are beneficial.\n\nIn some scenarios, particularly in highly nonlinear applications such as switches and logic gates, only the transient response is pertinent. The chapter concludes with discussions on the switching transients of pn junctions and BJTs, the propagation delays of CMOS logic gates, and the response times of voltage comparators.\n\nEffective frequency analysis necessitates proficiency in manipulating transfer functions and constructing Bode plots. For convenience, these topics are succinctly reviewed in Appendix 6A at the chapter's end. The chapter extensively employs PSpice, both as a software oscilloscope for displaying Bode plots and transient responses, and as a tool for verifying hand calculations."
},
{
    "text": "Chapter Outline\n\n6.1 High-Frequency BJT Model ..... 566\n6.2 High-Frequency MOSFET Model ..... 574\n6.3 Frequency Response of CE/CS Amplifiers ..... 581\n6.4 Frequency Response of Differential Amplifiers ..... 592\n6.5 Bipolar Voltage and Current Buffers ..... 599\n6.6 MOS Voltage and Current Buffers ..... 606\n6.7 Open-Circuit Time-Constant (OCTC) Analysis ..... 612\n6.8 Frequency Response of Cascode Amplifiers ..... 623\n6.9 Frequency and Transient Responses of Op Amps ..... 629\n6.10 Diode Switching Transients ..... 639\n6.11 BJT Switching Transients ..... 644\n6.12 Transient Response of CMOS Gates and Voltage Comparators ..... 652\nAppendix 6A: Transfer Functions and Bode Plots ..... 665\nReferences ..... 672\nProblems ..... 672\n\nIn our examination of electronic circuits to date, we have implicitly assumed that diodes and transistors respond to external signals instantaneously. This assumption holds true only up to certain operating frequencies, beyond which various parasitic reactances become significant, limiting the circuit's frequency response and operating speed (collectively termed dynamics). Since diodes and transistors function based on charge control, their internal parasitics are predominantly capacitive, with the junction capacitance $C_{j}$ from Chapter 1 being a typical example. However, even in the absence of electronic devices, circuits inherently exhibit reactive parasitics due to their dimensions and layout. Considering a circuit as a network of nodes and branches, we can assert that:\n\n- Each node exhibits stray capacitance towards its neighboring nodes, including the reference or ground node.\n- Each branch exhibits stray self-inductance and inductive coupling to adjacent branches.\n\nA capacitance, whether deliberate or parasitic, resists changes in the voltage across it, while an inductance resists changes in the current through it. These parasitics are generally minor, meaning that at lower operating frequencies, stray capacitances act as open circuits and stray inductances as short circuits, and can thus be disregarded. However, as the circuit's operating frequency or speed increases, the roles of capacitances and inductances reverse, with capacitances behaving more like short circuits and inductances like open circuits. In the circuits we are examining, the most severe limitations are typically due to stray capacitances. To analyze their impact on circuit dynamics, we need to enhance the small-signal transistor models used so far with appropriate capacitances.\n\nBoth BJTs and MOSFETs contain pn junctions, necessitating the inclusion of corresponding junction capacitances in their models. Additionally, the MOSFET includes capacitances formed by the gate with the channel, as well as with the source and drain regions, which have no equivalent in the BJT. Conversely, the BJT features a capacitance related to minority charge accumulation in the base region, absent in the MOSFET. Thus, while there are similarities and differences in the parasitic origins of these two devices, the similarities are sufficient that mastering the high-frequency analysis of one type allows for significant application to the other.\n\nCHAPTER HIGHLIGHTS\n\nThe chapter initiates with the physical basis of parasitic capacitances in BJTs and MOSFETs, followed by the development of appropriate high-frequency models for both devices.\n\nThese models are then utilized to study the high-frequency behavior of fundamental single-transistor configurations (CE/CS, CC/CD, and CB/CG), as well as differential pairs, both passively and actively loaded. Given that the $\\mathrm{CC} / \\mathrm{CD}$ and $\\mathrm{CB} / \\mathrm{CG}$ configurations are notable for their impedance transformation capabilities, special emphasis is placed on terminal impedances and their modeling, particularly regarding inductive impedances due to their propensity to cause ringing or even oscillations.\n\nAs circuit complexity grows, frequency analysis can become excessively challenging. The open-circuit time-constant (OCTC) technique, discussed subsequently, simplifies this task by breaking it into several simpler sub-tasks, which we then use to estimate the circuit's bandwidth. The OCTC technique is especially valuable in analyzing multi-transistor circuits like the cascode configuration.\n\nFrequency response reveals only certain aspects of a circuit's dynamics. To fully understand the dynamics, the transient response, its dual, must also be considered. Operational amplifiers exemplify the utility of knowing both perspectives concurrently.\n\nIn some scenarios, particularly in highly nonlinear applications such as switches and logic gates, only the transient response is pertinent. The chapter concludes with discussions on the switching transients of pn junctions and BJTs, the propagation delays of CMOS logic gates, and the response times of voltage comparators.\n\nEffective frequency analysis necessitates proficiency in manipulating transfer functions and constructing Bode plots. For ease of reference, these topics are succinctly reviewed in Appendix 6A at the chapter's end. The chapter extensively employs PSpice, both for displaying Bode plots and transient responses as a software oscilloscope, and for verifying hand calculations."
},
{
    "text": "Remember that a BJT consists of two $p n$ junctions. In junction-isolated integrated circuits (ICs), a third junction is present to provide electrical isolation between each BJT and the surrounding components on the chip (this junction is always reverse biased). As known, each junction exhibits a voltage-dependent capacitance known as junction capacitance, whose characteristics are shown in Fig. 1.41b. For the npn BJT depicted in Fig. 6.1, the three relevant capacitances are:\n\n- The base-emitter junction capacitance $C_{j e}$,\n\n$$\n\\begin{equation*}\nC_{j e}\\left(v_{B E}\\right)=\\frac{C_{j e 0}}{\\left(1-v_{B E} / \\phi_{e}\\right)^{m_{e}}} \\tag{6.1a}\n\\end{equation*}\n$$\n\nwhere $C_{j e 0}$ is the zero-bias value of $C_{j e}$, $v_{B E}$ is the base-emitter voltage, $\\phi_{e}$ is the built-in potential of the base-emitter junction, and $m_{e}$ is the junction's grading coefficient, typically ranging from $1 / 2$ for abrupt junctions to $1 / 3$ for graded junctions. In forward-active operation, $v_{B E}$ does not vary significantly from its typical value $V_{B E(\\text { on })}(=0.7 \\mathrm{~V})$, so it is common to approximate\n\n$$\n\\begin{equation*}\nC_{j e}\\left(V_{B E(\\mathrm{on})}\\right) \\cong 2 C_{j e 0} \\tag{6.1b}\n\\end{equation*}\n$$\n\n- The base-collector junction capacitance $C_{j c}$, often denoted as $C_{\\mu}$ in analog electronics,\n\n$$\n\\begin{equation*}\nC_{\\mu}\\left(v_{B C}\\right)=\\frac{C_{\\mu 0}}{\\left(1-v_{B C} / \\phi_{c}\\right)^{m_{c}}} \\tag{6.2}\n\\end{equation*}\n$$\n\nwith similar meanings for the various parameters. In forward-active operation, $v_{B C}<0$, hence $C_{\\mu}<C_{\\mu 0}$.\nimage_name:FIGURE 6.1\ndescription:The diagram illustrates the junction capacitances of a monolithic npn Bipolar Junction Transistor (BJT). It presents a cross-sectional view highlighting the various layers and components within the transistor structure.\n\n1. **Identification of Components and Structure:**\n- The diagram shows three main terminals labeled E (Emitter), B (Base), and C (Collector).\n- The semiconductor layers include an n+ emitter region, a p base region, and an n+ collector region within an n- epitaxial layer.\n- A buried n+ layer is shown beneath the n- epitaxial layer, providing low-resistance paths for current.\n- The p- substrate forms the base of the structure, with p- isolation regions (Iso) around the active regions for electrical isolation.\n\n2. **Connections and Interactions:**\n- Capacitances are marked at various junctions: \\( C_{je} \\) (base-emitter junction capacitance), \\( C_{\\mu} \\) (base-collector junction capacitance, also known as the Miller capacitance), and \\( C_{s} \\) (collector-to-substrate junction capacitance).\n- The base-emitter junction capacitances \\( C_{je} \\) are shown across the n+ emitter and p base regions.\n- The base-collector capacitances \\( C_{\\mu} \\) are shown across the p base and n+ collector regions.\n- The collector-to-substrate capacitances \\( C_{s} \\) are shown between the n+ collector and the p- substrate.\n- The substrate (S) is connected to the most negative voltage (MNV) to keep the collector-to-substrate junction in reverse bias, preventing conduction but allowing for stray capacitance effects.\n\n3. **Labels, Annotations, and Key Features:**\n- The diagram clearly labels the different semiconductor regions and capacitances, aiding in understanding the physical layout and electrical characteristics of the BJT.\n- Annotations explain the role of each capacitance in the transistor's operation, particularly in high-frequency applications where these parasitic capacitances can impact performance.\n\nOverall, the diagram provides a detailed view of the internal structure and capacitances of a monolithic npn BJT, highlighting the key regions and electrical interactions within the device.\n\nFIGURE 6.1 The junction capacitances of a monolithic npn BJT.\n\n- The collector-to-substrate junction capacitance $C_{s}$, with a similar expression as above. To ensure isolation, this junction must always be in reverse bias, so the substrate $S$ is internally tied to the most negative voltage (MNV) in the circuit. With $v_{S C}<0$, this junction is nonconductive but presents a stray capacitance $C_{s}$ that shunts high-frequency collector signals to the ac grounded substrate.\n\nFigure 6.1 shows that all three capacitances are of the distributed type and their areas increase from $C_{j e}$ to $C_{\\mu}$ to $C_{s}$. However, the depletion-layer widths also increase in the same order due to progressively lighter doping levels from emitter to base to collector and to substrate. If we consider each capacitance as $C_{j}=\\varepsilon_{s t} A / X_{d}$ as per Fig. 1.42b, it is not surprising that the three capacitance values do not differ significantly. Depending on the transistor size, $C_{j e 0}, C_{\\mu 0}$, and $C_{s 0}$ may range from a few picofarads ( $1 \\mathrm{pF}=10^{-12} \\mathrm{~F}$ ) down to ten femtofarads ( $1 \\mathrm{fF}=10^{-15} \\mathrm{~F}$ ) or so."
},
{
    "text": "Remember that a BJT consists of two $p n$ junctions. In junction-isolated integrated circuits (ICs), a third junction is present to provide electrical isolation between each BJT and the surrounding components on the chip (this junction is always reverse biased). As is known, each junction exhibits a voltage-dependent capacitance known as junction capacitance, whose characteristics are shown in Fig. 1.41b. For the npn BJT depicted in Fig. 6.1, the three capacitances of interest are:\n\n- The base-emitter junction capacitance $C_{j e}$,\n\n$$\n\\begin{equation*}\nC_{j e}\\left(v_{B E}\\right)=\\frac{C_{j e 0}}{\\left(1-v_{B E} / \\phi_{e}\\right)^{m_{e}}} \\tag{6.1a}\n\\end{equation*}\n$$\n\nwhere $C_{j e 0}$ is the zero-bias value of $C_{j e}$, $v_{B E}$ is the base-emitter voltage, $\\phi_{e}$ is the built-in potential of the base-emitter junction, and $m_{e}$ is the junction's grading coefficient, typically ranging from $1 / 2$ for abrupt junctions to $1 / 3$ for graded junctions. In forward-active operation, $v_{B E}$ does not vary significantly from its typical value $V_{B E(\\text { on })}(=0.7 \\mathrm{~V})$, so it is common to approximate\n\n$$\n\\begin{equation*}\nC_{j e}\\left(V_{B E(\\mathrm{on})}\\right) \\cong 2 C_{j e 0} \\tag{6.1b}\n\\end{equation*}\n$$\n\n- The base-collector junction capacitance $C_{j c}$, commonly referred to as $C_{\\mu}$ in analog electronics,\n\n$$\n\\begin{equation*}\nC_{\\mu}\\left(v_{B C}\\right)=\\frac{C_{\\mu 0}}{\\left(1-v_{B C} / \\phi_{c}\\right)^{m_{c}}} \\tag{6.2}\n\\end{equation*}\n$$\n\nwith similar meanings for the various parameters. In forward-active operation, $v_{B C}<0$, hence $C_{\\mu}<C_{\\mu 0}$.\nimage_name:FIGURE 6.1\ndescription:The diagram illustrates the junction capacitances of a monolithic npn Bipolar Junction Transistor (BJT). It is a cross-sectional view highlighting the various layers and components within the transistor structure.\n\n1. **Identification of Components and Structure:**\n- The diagram shows three main terminals labeled E (Emitter), B (Base), and C (Collector).\n- The semiconductor layers include an n+ emitter region, a p base region, and an n+ collector region within an n- epitaxial layer.\n- A buried n+ layer is shown beneath the n- epitaxial layer, providing low-resistance paths for current flow.\n- The p- substrate forms the base of the structure, with p- isolation regions (Iso) surrounding the active regions for electrical isolation.\n\n2. **Connections and Interactions:**\n- Capacitances are indicated at various junctions: \\( C_{je} \\) (base-emitter junction capacitance), \\( C_{\\mu} \\) (base-collector junction capacitance, also known as the Miller capacitance), and \\( C_{s} \\) (collector-to-substrate junction capacitance).\n- The base-emitter junction capacitances \\( C_{je} \\) are shown across the n+ emitter and p base regions.\n- The base-collector capacitances \\( C_{\\mu} \\) are shown across the p base and n+ collector regions.\n- The collector-to-substrate capacitances \\( C_{s} \\) are shown between the n+ collector and the p- substrate.\n- The substrate (S) is connected to the most negative voltage (MNV) to ensure the collector-to-substrate junction remains in reverse bias, preventing conduction but allowing for stray capacitance effects.\n\n3. **Labels, Annotations, and Key Features:**\n- The diagram clearly labels the different semiconductor regions and capacitances, aiding in understanding the physical layout and electrical characteristics of the BJT.\n- Annotations explain the role of each capacitance in the transistor's operation, particularly in high-frequency applications where these parasitic capacitances can impact performance.\n\nOverall, the diagram provides a detailed view of the internal structure and capacitances of a monolithic npn BJT, highlighting the key regions and electrical interactions within the device.\n\nFIGURE 6.1 The junction capacitances of a monolithic npn BJT.\n\n- The collector-to-substrate junction capacitance $C_{s}$, with a similar expression as above. To ensure isolation, this junction must always be in reverse bias, so the substrate $S$ is internally tied to the most negative voltage (MNV) in the circuit. With $v_{S C}<0$, this junction is nonconductive but presents a stray capacitance $C_{s}$ that shunts high-frequency collector signals to the ac grounded substrate.\n\nFigure 6.1 shows that all three capacitances are of the distributed type and that their areas increase from $C_{j e}$ to $C_{\\mu}$ to $C_{s}$. However, the depletion-layer widths also increase in the same order due to progressively lighter doping levels from emitter to base to collector and to substrate. If we visualize each capacitance as $C_{j}=\\varepsilon_{s t} A / X_{d}$ as per Fig. 1.42b, it is not surprising that the three capacitance values do not differ significantly. Depending on the transistor size, $C_{j e 0}, C_{\\mu 0}$, and $C_{s 0}$ may range from a few picofarads ( $1 \\mathrm{pF}=10^{-12} \\mathrm{~F}$ ) down to ten femtofarads ( $1 \\mathrm{fF}=10^{-15} \\mathrm{~F}$ ) or so."
},
{
    "text": "Remember that a BJT consists of two $p n$ junctions. In junction-isolated integrated circuits (ICs), a third junction is present to provide electrical isolation between each BJT and the surrounding components on the chip (this junction is always reverse biased). As is known, each junction exhibits a voltage-dependent capacitance known as junction capacitance, whose characteristics are illustrated in Fig. 1.41b. For the npn BJT shown in Fig. 6.1, the three capacitances of interest are:\n\n- The base-emitter junction capacitance $C_{j e}$,\n\n$$\n\\begin{equation*}\nC_{j e}\\left(v_{B E}\\right)=\\frac{C_{j e 0}}{\\left(1-v_{B E} / \\phi_{e}\\right)^{m_{e}}} \\tag{6.1a}\n\\end{equation*}\n$$\n\nwhere $C_{j e 0}$ is the zero-bias value of $C_{j e}$, $v_{B E}$ is the base-emitter voltage, $\\phi_{e}$ is the built-in potential of the base-emitter junction, and $m_{e}$ is the junction's grading coefficient, typically ranging from $1 / 2$ for abrupt junctions to $1 / 3$ for graded junctions. In forward-active operation, $v_{B E}$ does not vary significantly from its typical value $V_{B E(\\text { on })}(=0.7 \\mathrm{~V})$, so it is common to approximate\n\n$$\n\\begin{equation*}\nC_{j e}\\left(V_{B E(\\mathrm{on})}\\right) \\cong 2 C_{j e 0} \\tag{6.1b}\n\\end{equation*}\n$$\n\n- The base-collector junction capacitance $C_{j c}$, commonly referred to as $C_{\\mu}$ in analog electronics,\n\n$$\n\\begin{equation*}\nC_{\\mu}\\left(v_{B C}\\right)=\\frac{C_{\\mu 0}}{\\left(1-v_{B C} / \\phi_{c}\\right)^{m_{c}}} \\tag{6.2}\n\\end{equation*}\n$$\n\nwith similar meanings for the various parameters. In forward-active operation, $v_{B C}<0$, hence $C_{\\mu}<C_{\\mu 0}$.\nimage_name:FIGURE 6.1\ndescription:The illustration depicts the junction capacitances of a monolithic npn Bipolar Junction Transistor (BJT). It is a cross-sectional view highlighting the different layers and components within the transistor structure.\n\n1. **Identification of Components and Structure:**\n- The diagram displays three main terminals labeled E (Emitter), B (Base), and C (Collector).\n- The semiconductor layers include an n+ emitter region, a p base region, and an n+ collector region within an n- epitaxial layer.\n- A buried n+ layer is shown beneath the n- epitaxial layer, providing low-resistance paths for current.\n- The p- substrate forms the base of the structure, with p- isolation regions (Iso) around the active areas for electrical isolation.\n\n2. **Connections and Interactions:**\n- Capacitances are marked at various junctions: \\( C_{je} \\) (base-emitter junction capacitance), \\( C_{\\mu} \\) (base-collector junction capacitance, also known as the Miller capacitance), and \\( C_{s} \\) (collector-to-substrate junction capacitance).\n- The base-emitter junction capacitances \\( C_{je} \\) are shown across the n+ emitter and p base regions.\n- The base-collector capacitances \\( C_{\\mu} \\) are shown across the p base and n+ collector regions.\n- The collector-to-substrate capacitances \\( C_{s} \\) are shown between the n+ collector and the p- substrate.\n- The substrate (S) is connected to the most negative voltage (MNV) to keep the collector-to-substrate junction in reverse bias, preventing conduction but allowing for stray capacitance effects.\n\n3. **Labels, Annotations, and Key Features:**\n- The diagram clearly labels the different semiconductor regions and capacitances, aiding in understanding the physical layout and electrical characteristics of the BJT.\n- Annotations explain the role of each capacitance in the transistor's operation, particularly in high-frequency applications where these parasitic capacitances can impact performance.\n\nOverall, the diagram offers a detailed view of the internal structure and capacitances of a monolithic npn BJT, highlighting the key regions and electrical interactions within the device.\n\nFIGURE 6.1 The junction capacitances of a monolithic npn BJT.\n\n- The collector-to-substrate junction capacitance $C_{s}$, with a similar expression as above. To maintain isolation, this junction must always be in reverse bias, so the substrate $S$ is internally connected to the most negative voltage (MNV) in the circuit. With $v_{S C}<0$, this junction is nonconductive but presents a stray capacitance $C_{s}$ that shunts high-frequency collector signals to the ac grounded substrate.\n\nFigure 6.1 shows that all three capacitances are of the distributed type and that their areas increase from $C_{j e}$ to $C_{\\mu}$ to $C_{s}$. However, the depletion-layer widths also increase in the same order due to progressively lighter doping levels from emitter to base to collector and to substrate. If we consider each capacitance as $C_{j}=\\varepsilon_{s t} A / X_{d}$ as per Fig. 1.42b, it is not surprising that the three capacitance values do not differ significantly. Depending on the transistor size, $C_{j e 0}, C_{\\mu 0}$, and $C_{s 0}$ may range from a few picofarads ( $1 \\mathrm{pF}=10^{-12} \\mathrm{~F}$ ) down to ten femtofarads ( $1 \\mathrm{fF}=10^{-15} \\mathrm{~F}$ ) or so."
},
{
    "text": "Recall that a BJT consists of two $pn$ junctions. In junction-isolated integrated circuits (ICs), a third junction is present to provide electrical isolation between each BJT and the surrounding components on the chip (this junction is always reverse biased). As known, each junction exhibits a voltage-dependent capacitance known as junction capacitance, whose characteristics are shown in Fig. 1.41b. For the npn BJT depicted in Fig. 6.1, the three capacitances of interest are:\n\n- The base-emitter junction capacitance $C_{je}$,\n\n$$\n\\begin{equation*}\nC_{je}\\left(v_{BE}\\right)=\\frac{C_{je0}}{\\left(1-v_{BE} / \\phi_{e}\\right)^{m_{e}}} \\tag{6.1a}\n\\end{equation*}\n$$\n\nwhere $C_{je0}$ is the zero-bias value of $C_{je}$, $v_{BE}$ is the base-emitter voltage, $\\phi_{e}$ is the built-in potential of the base-emitter junction, and $m_{e}$ is the junction's grading coefficient, typically ranging from $1/2$ for abrupt junctions to $1/3$ for graded junctions. In forward-active operation, $v_{BE}$ does not vary significantly from its typical value $V_{BE(\\text{on})}(=0.7 \\mathrm{~V})$, so it is common to approximate\n\n$$\n\\begin{equation*}\nC_{je}\\left(V_{BE(\\mathrm{on})}\\right) \\cong 2 C_{je0} \\tag{6.1b}\n\\end{equation*}\n$$\n\n- The base-collector junction capacitance $C_{jc}$, often referred to as $C_{\\mu}$ in analog electronics,\n\n$$\n\\begin{equation*}\nC_{\\mu}\\left(v_{BC}\\right)=\\frac{C_{\\mu0}}{\\left(1-v_{BC} / \\phi_{c}\\right)^{m_{c}}} \\tag{6.2}\n\\end{equation*}\n$$\n\nwith similar parameter meanings. In forward-active operation, $v_{BC}<0$, hence $C_{\\mu}<C_{\\mu0}$.\nimage_name:FIGURE 6.1\ndescription:The diagram depicts the junction capacitances of a monolithic npn Bipolar Junction Transistor (BJT). It is a cross-sectional view highlighting the various layers and components within the transistor structure.\n\n1. **Identification of Components and Structure:**\n- The diagram shows three main terminals labeled E (Emitter), B (Base), and C (Collector).\n- The semiconductor layers include an n+ emitter region, a p base region, and an n+ collector region within an n- epitaxial layer.\n- A buried n+ layer is shown beneath the n- epitaxial layer, providing low-resistance paths for current.\n- The p- substrate forms the base of the structure, with p- isolation regions (Iso) surrounding the active areas for electrical isolation.\n\n2. **Connections and Interactions:**\n- Capacitances are marked at various junctions: \\( C_{je} \\) (base-emitter junction capacitance), \\( C_{\\mu} \\) (base-collector junction capacitance, also known as Miller capacitance), and \\( C_{s} \\) (collector-to-substrate junction capacitance).\n- The base-emitter junction capacitances \\( C_{je} \\) are shown across the n+ emitter and p base regions.\n- The base-collector capacitances \\( C_{\\mu} \\) are shown across the p base and n+ collector regions.\n- The collector-to-substrate capacitances \\( C_{s} \\) are shown between the n+ collector and the p- substrate.\n- The substrate (S) is connected to the most negative voltage (MNV) to keep the collector-to-substrate junction in reverse bias, preventing conduction but allowing for stray capacitance effects.\n\n3. **Labels, Annotations, and Key Features:**\n- The diagram clearly labels the different semiconductor regions and capacitances, aiding in understanding the physical layout and electrical characteristics of the BJT.\n- Annotations explain the role of each capacitance in the transistor's operation, particularly in high-frequency applications where these parasitic capacitances can impact performance.\n\nOverall, the diagram provides a detailed view of the internal structure and capacitances of a monolithic npn BJT, highlighting the key regions and electrical interactions within the device.\n\nFIGURE 6.1 The junction capacitances of a monolithic npn BJT.\n\n- The collector-to-substrate junction capacitance $C_{s}$, with a similar expression as above. To ensure isolation, this junction must always be in reverse bias, so the substrate $S$ is internally connected to the most negative voltage (MNV) in the circuit. With $v_{SC}<0$, this junction is nonconductive but presents a stray capacitance $C_{s}$ that shunts high-frequency collector signals to the ac grounded substrate.\n\nFigure 6.1 shows that all three capacitances are of the distributed type and their areas increase from $C_{je}$ to $C_{\\mu}$ to $C_{s}$. However, the depletion-layer widths also increase in the same order due to progressively lighter doping levels from emitter to base to collector and to substrate. If we consider each capacitance as $C_{j}=\\varepsilon_{st} A / X_{d}$ as per Fig. 1.42b, it is not surprising that the three capacitance values do not differ significantly. Depending on the transistor size, $C_{je0}, C_{\\mu0}$, and $C_{s0}$ may range from a few picofarads ($1 \\mathrm{pF}=10^{-12} \\mathrm{~F}$) down to ten femtofarads ($1 \\mathrm{fF}=10^{-15} \\mathrm{~F}$) or so."
},
{
    "text": "Recall that a Bipolar Junction Transistor (BJT) consists of two $p n$ junctions. In junction-isolated integrated circuits (ICs), a third junction is present, providing electrical isolation between each BJT and the surrounding components on the chip (this junction is always reverse biased). As known, each junction exhibits a voltage-dependent capacitance known as junction capacitance, whose characteristics are shown in Fig. 1.41b. For the npn BJT depicted in Fig. 6.1, the three relevant capacitances are:\n\n- The base-emitter junction capacitance $C_{j e}$,\n\n$$\n\\begin{equation*}\nC_{j e}\\left(v_{B E}\\right)=\\frac{C_{j e 0}}{\\left(1-v_{B E} / \\phi_{e}\\right)^{m_{e}}} \\tag{6.1a}\n\\end{equation*}\n$$\n\nwhere $C_{j e 0}$ is the zero-bias value of $C_{j e}$, $v_{B E}$ is the base-emitter voltage, $\\phi_{e}$ is the built-in potential of the base-emitter junction, and $m_{e}$ is the junction's grading coefficient, typically ranging from $1 / 2$ for abrupt junctions to $1 / 3$ for graded junctions. In forward-active operation, $v_{B E}$ does not vary significantly from its typical value $V_{B E(\\text { on })}(=0.7 \\mathrm{~V})$, so it is common to approximate\n\n$$\n\\begin{equation*}\nC_{j e}\\left(V_{B E(\\mathrm{on})}\\right) \\cong 2 C_{j e 0} \\tag{6.1b}\n\\end{equation*}\n$$\n\n- The base-collector junction capacitance $C_{j c}$, commonly referred to as $C_{\\mu}$ in analog electronics,\n\n$$\n\\begin{equation*}\nC_{\\mu}\\left(v_{B C}\\right)=\\frac{C_{\\mu 0}}{\\left(1-v_{B C} / \\phi_{c}\\right)^{m_{c}}} \\tag{6.2}\n\\end{equation*}\n$$\n\nwith similar meanings for the parameters. In forward-active operation, $v_{B C}<0$, hence $C_{\\mu}<C_{\\mu 0}$.\nimage_name:FIGURE 6.1\ndescription:The diagram illustrates the junction capacitances of a monolithic npn Bipolar Junction Transistor (BJT). The image provides a cross-sectional view highlighting the various layers and components within the transistor structure.\n\n1. **Identification of Components and Structure:**\n- The diagram shows three main terminals labeled E (Emitter), B (Base), and C (Collector).\n- The semiconductor layers include an n+ emitter region, a p base region, and an n+ collector region within an n- epitaxial layer.\n- A buried n+ layer is shown beneath the n- epitaxial layer, providing low-resistance paths for current.\n- The p- substrate forms the base of the structure, with p- isolation regions (Iso) surrounding the active regions for electrical isolation.\n\n2. **Connections and Interactions:**\n- Capacitances are marked at various junctions: \\( C_{je} \\) (base-emitter junction capacitance), \\( C_{\\mu} \\) (base-collector junction capacitance, also known as Miller capacitance), and \\( C_{s} \\) (collector-to-substrate junction capacitance).\n- The base-emitter junction capacitances \\( C_{je} \\) are shown across the n+ emitter and p base regions.\n- The base-collector capacitances \\( C_{\\mu} \\) are shown across the p base and n+ collector regions.\n- The collector-to-substrate capacitances \\( C_{s} \\) are shown between the n+ collector and the p- substrate.\n- The substrate (S) is connected to the most negative voltage (MNV) to ensure the collector-to-substrate junction remains in reverse bias, preventing conduction but allowing for stray capacitance effects.\n\n3. **Labels, Annotations, and Key Features:**\n- The diagram clearly labels the different semiconductor regions and capacitances, aiding in understanding the physical layout and electrical characteristics of the BJT.\n- Annotations explain the role of each capacitance in the transistor's operation, particularly in high-frequency applications where these parasitic capacitances can impact performance.\n\nOverall, the diagram offers a detailed view of the internal structure and capacitances of a monolithic npn BJT, highlighting the key regions and electrical interactions within the device.\n\nFIGURE 6.1 The junction capacitances of a monolithic npn BJT.\n\n- The collector-to-substrate junction capacitance $C_{s}$, with a similar expression as above. To ensure isolation, this junction must always be in reverse bias, so the substrate $S$ is internally tied to the most negative voltage (MNV) in the circuit. With $v_{S C}<0$, this junction is nonconductive but presents a stray capacitance $C_{s}$, which shunts high-frequency collector signals to the ac grounded substrate.\n\nFigure 6.1 shows that all three capacitances are of the distributed type and that their areas increase from $C_{j e}$ to $C_{\\mu}$ to $C_{s}$. However, the depletion-layer widths also increase in the same order due to progressively lighter doping levels from emitter to base to collector and to substrate. If we visualize each capacitance as $C_{j}=\\varepsilon_{s t} A / X_{d}$ as per Fig. 1.42b, it is not surprising that the three capacitance values do not differ significantly. Depending on the transistor size, $C_{j e 0}, C_{\\mu 0}$, and $C_{s 0}$ may range from a few picofarads ( $1 \\mathrm{pF}=10^{-12} \\mathrm{~F}$ ) down to ten femtofarads ( $1 \\mathrm{fF}=10^{-15} \\mathrm{~F}$ ) or so."
},
{
    "text": "Remember that a Bipolar Junction Transistor (BJT) consists of two $p n$ junctions. In junction-isolated integrated circuits (ICs), a third junction is present to provide electrical isolation between each BJT and the surrounding components on the chip (this junction is always reverse biased). As we know, each junction exhibits a voltage-dependent capacitance known as junction capacitance, whose characteristics are shown in Fig. 1.41b. For the npn BJT depicted in Fig. 6.1, the three capacitances of interest are:\n\n- The base-emitter junction capacitance $C_{j e}$,\n\n$$\n\\begin{equation*}\nC_{j e}\\left(v_{B E}\\right)=\\frac{C_{j e 0}}{\\left(1-v_{B E} / \\phi_{e}\\right)^{m_{e}}} \\tag{6.1a}\n\\end{equation*}\n$$\n\nwhere $C_{j e 0}$ is the zero-bias value of $C_{j e}$, $v_{B E}$ is the base-emitter voltage, $\\phi_{e}$ is the built-in potential of the base-emitter junction, and $m_{e}$ is the junction's grading coefficient, typically ranging from $1 / 2$ for abrupt junctions to $1 / 3$ for graded junctions. In forward-active operation, $v_{B E}$ does not vary significantly from its typical value $V_{B E(\\text { on })}(=0.7 \\mathrm{~V})$, so it is common to approximate\n\n$$\n\\begin{equation*}\nC_{j e}\\left(V_{B E(\\mathrm{on})}\\right) \\cong 2 C_{j e 0} \\tag{6.1b}\n\\end{equation*}\n$$\n\n- The base-collector junction capacitance $C_{j c}$, often referred to as $C_{\\mu}$ in analog electronics,\n\n$$\n\\begin{equation*}\nC_{\\mu}\\left(v_{B C}\\right)=\\frac{C_{\\mu 0}}{\\left(1-v_{B C} / \\phi_{c}\\right)^{m_{c}}} \\tag{6.2}\n\\end{equation*}\n$$\n\nwith similar meanings for the various parameters. In forward-active operation, we typically have $v_{B C}<0$, implying that $C_{\\mu}<C_{\\mu 0}$.\n\n**Image Description:**\nThe diagram illustrates the junction capacitances of a monolithic npn Bipolar Junction Transistor (BJT). It is a cross-sectional view highlighting the various layers and components within the transistor structure.\n\n1. **Identification of Components and Structure:**\n- The diagram features three main terminals labeled E (Emitter), B (Base), and C (Collector).\n- The semiconductor layers include an n+ emitter region, a p base region, and an n+ collector region within an n- epitaxial layer.\n- A buried n+ layer beneath the n- epitaxial layer provides low-resistance paths for current flow.\n- The p- substrate forms the base of the structure, with p- isolation regions (Iso) surrounding the active regions for electrical isolation.\n\n2. **Connections and Interactions:**\n- Capacitances are indicated at various junctions: \\( C_{je} \\) (base-emitter junction capacitance), \\( C_{\\mu} \\) (base-collector junction capacitance, also known as the Miller capacitance), and \\( C_{s} \\) (collector-to-substrate junction capacitance).\n- The base-emitter junction capacitances \\( C_{je} \\) are shown between the n+ emitter and p base regions.\n- The base-collector capacitances \\( C_{\\mu} \\) are shown across the p base and n+ collector regions.\n- The collector-to-substrate capacitances \\( C_{s} \\) are shown between the n+ collector and the p- substrate.\n- The substrate (S) is connected to the most negative voltage (MNV) to keep the collector-to-substrate junction in reverse bias, preventing conduction but allowing for stray capacitance effects.\n\n3. **Labels, Annotations, and Key Features:**\n- The diagram clearly labels the different semiconductor regions and capacitances, aiding in understanding the physical layout and electrical characteristics of the BJT.\n- Annotations explain the role of each capacitance in the transistor's operation, particularly in high-frequency applications where these parasitic capacitances can impact performance.\n\nOverall, the diagram provides a detailed view of the internal structure and capacitances of a monolithic npn BJT, highlighting the key regions and electrical interactions within the device.\n\nFIGURE 6.1 The junction capacitances of a monolithic npn BJT.\n\n- The collector-to-substrate junction capacitance $C_{s}$, with a similar expression as above. To ensure isolation, this junction must always be in reverse bias, so the substrate $S$ is internally tied to the most negative voltage (MNV) in the circuit. With $v_{S C}<0$, this junction remains nonconductive but presents a stray capacitance $C_{s}$ that shunts high-frequency collector signals to the ac grounded substrate.\n\nFigure 6.1 shows that all three capacitances are of the distributed type, with their areas increasing from $C_{j e}$ to $C_{\\mu}$ to $C_{s}$. However, the depletion-layer widths also increase in the same order due to progressively lighter doping levels from emitter to base to collector and to substrate. If we visualize each capacitance as $C_{j}=\\varepsilon_{s t} A / X_{d}$ as per Fig. 1.42b, it is not surprising that the three capacitance values do not differ significantly from each other. Depending on the transistor size, $C_{j e 0}, C_{\\mu 0}$, and $C_{s 0}$ may range from a few picofarads ( $1 \\mathrm{pF}=10^{-12} \\mathrm{~F}$ ) down to ten femtofarads ( $1 \\mathrm{fF}=10^{-15} \\mathrm{~F}$ ) or so."
},
{
    "text": "Remember that a BJT consists of two $p n$ junctions. In junction-isolated integrated circuits (ICs), a third junction is present, providing electrical isolation between each BJT and the surrounding components on the chip (this junction is always reverse biased). As is known, each junction exhibits a voltage-dependent capacitance known as junction capacitance, whose characteristics are shown in Fig. 1.41b. For the npn BJT illustrated in Fig. 6.1, the three capacitances of interest are:\n\n- The base-emitter junction capacitance $C_{j e}$,\n\n$$\n\\begin{equation*}\nC_{j e}\\left(v_{B E}\\right)=\\frac{C_{j e 0}}{\\left(1-v_{B E} / \\phi_{e}\\right)^{m_{e}}} \\tag{6.1a}\n\\end{equation*}\n$$\n\nwhere $C_{j e 0}$ is the zero-bias value of $C_{j e}$, $v_{B E}$ is the base-emitter voltage, $\\phi_{e}$ is the built-in potential of the base-emitter junction, and $m_{e}$ is the junction's grading coefficient, typically ranging from $1 / 2$ for abrupt junctions to $1 / 3$ for graded junctions. In forward-active operation, $v_{B E}$ does not vary significantly from its typical value $V_{B E(\\text { on })}(=0.7 \\mathrm{~V})$, so it is common to approximate\n\n$$\n\\begin{equation*}\nC_{j e}\\left(V_{B E(\\mathrm{on})}\\right) \\cong 2 C_{j e 0} \\tag{6.1b}\n\\end{equation*}\n$$\n\n- The base-collector junction capacitance $C_{j c}$, often referred to as $C_{\\mu}$ in analog electronics,\n\n$$\n\\begin{equation*}\nC_{\\mu}\\left(v_{B C}\\right)=\\frac{C_{\\mu 0}}{\\left(1-v_{B C} / \\phi_{c}\\right)^{m_{c}}} \\tag{6.2}\n\\end{equation*}\n$$\n\nwith similar meanings for the various parameters. In forward-active operation, $v_{B C}<0$, thus $C_{\\mu}<C_{\\mu 0}$.\n\nimage_name:FIGURE 6.1\ndescription:The diagram depicts the junction capacitances of a monolithic npn Bipolar Junction Transistor (BJT). It provides a cross-sectional view highlighting the various layers and components within the transistor structure.\n\n1. **Identification of Components and Structure:**\n- The diagram identifies three main terminals labeled E (Emitter), B (Base), and C (Collector).\n- It shows the semiconductor layers, including an n+ emitter region, a p base region, and an n+ collector region within an n- epitaxial layer.\n- A buried n+ layer is illustrated beneath the n- epitaxial layer, offering low-resistance paths for current.\n- The p- substrate forms the base of the structure, with p- isolation regions (Iso) around the active regions for electrical isolation.\n\n2. **Connections and Interactions:**\n- Capacitances are marked at various junctions: \\( C_{je} \\) (base-emitter junction capacitance), \\( C_{\\mu} \\) (base-collector junction capacitance, also known as the Miller capacitance), and \\( C_{s} \\) (collector-to-substrate junction capacitance).\n- The base-emitter junction capacitances \\( C_{je} \\) are shown between the n+ emitter and p base regions.\n- The base-collector capacitances \\( C_{\\mu} \\) are shown across the p base and n+ collector regions.\n- The collector-to-substrate capacitances \\( C_{s} \\) are shown between the n+ collector and the p- substrate.\n- The substrate (S) is connected to the most negative voltage (MNV) to keep the collector-to-substrate junction in reverse bias, preventing conduction but allowing for stray capacitance effects.\n\n3. **Labels, Annotations, and Key Features:**\n- The diagram clearly labels the different semiconductor regions and capacitances, aiding in understanding the physical layout and electrical characteristics of the BJT.\n- Annotations explain the role of each capacitance in the transistor's operation, particularly in high-frequency applications where these parasitic capacitances can impact performance.\n\nOverall, the diagram offers a detailed view of the internal structure and capacitances of a monolithic npn BJT, highlighting the key regions and electrical interactions within the device.\n\nFIGURE 6.1 The junction capacitances of a monolithic npn BJT.\n\n- The collector-to-substrate junction capacitance $C_{s}$, with a similar expression as above. To ensure isolation, this junction must always be in reverse bias. To prevent it from turning on, the substrate $S$ is internally connected to the most negative voltage (MNV) in the circuit. With $v_{S C}<0$, this junction is nonconductive but presents a stray capacitance $C_{s}$, which shunts high-frequency collector signals to the ac grounded substrate.\n\nFigure 6.1 shows that all three capacitances are of the distributed type and that their areas increase from $C_{j e}$ to $C_{\\mu}$ to $C_{s}$. However, the depletion-layer widths also increase in the same order due to progressively lighter doping levels from emitter to base to collector and to substrate. If we consider each capacitance as $C_{j}=\\varepsilon_{s t} A / X_{d}$ as per Fig. 1.42b, it is not surprising that the three capacitance values do not differ significantly. Depending on the transistor size, $C_{j e 0}, C_{\\mu 0}$, and $C_{s 0}$ may range from a few picofarads ( $1 \\mathrm{pF}=10^{-12} \\mathrm{~F}$ ) down to ten femtofarads ( $1 \\mathrm{fF}=10^{-15} \\mathrm{~F}$ ) or so."
},
{
    "text": "Recall that a BJT consists of two $pn$ junctions. In junction-isolated integrated circuits (ICs), a third junction is present to provide electrical isolation between each BJT and the surrounding components on the chip (this junction is always reverse biased). As we know, each junction exhibits a voltage-dependent capacitance known as junction capacitance, whose characteristics are shown in Fig. 1.41b. For the npn BJT depicted in Fig. 6.1, the three capacitances of interest are:\n\n- The base-emitter junction capacitance $C_{je}$,\n\n$$\n\\begin{equation*}\nC_{je}\\left(v_{BE}\\right)=\\frac{C_{je0}}{\\left(1-v_{BE} / \\phi_{e}\\right)^{m_{e}}} \\tag{6.1a}\n\\end{equation*}\n$$\n\nwhere $C_{je0}$ is the zero-bias value of $C_{je}$, $v_{BE}$ is the base-emitter voltage, $\\phi_{e}$ is the built-in potential of the base-emitter junction, and $m_{e}$ is the junction's grading coefficient, typically ranging from $1/2$ for abrupt junctions to $1/3$ for graded junctions. In forward-active operation, $v_{BE}$ does not vary significantly from its typical value $V_{BE(\\text{on})}(=0.7 \\mathrm{~V})$, so it is common to approximate\n\n$$\n\\begin{equation*}\nC_{je}\\left(V_{BE(\\mathrm{on})}\\right) \\cong 2 C_{je0} \\tag{6.1b}\n\\end{equation*}\n$$\n\n- The base-collector junction capacitance $C_{jc}$, often referred to as $C_{\\mu}$ in analog electronics,\n\n$$\n\\begin{equation*}\nC_{\\mu}\\left(v_{BC}\\right)=\\frac{C_{\\mu0}}{\\left(1-v_{BC} / \\phi_{c}\\right)^{m_{c}}} \\tag{6.2}\n\\end{equation*}\n$$\n\nwith similar meanings for the various parameters. In forward-active operation, we usually have $v_{BC}<0$, hence $C_{\\mu}<C_{\\mu0}$.\nimage_name:FIGURE 6.1\ndescription:The diagram illustrates the junction capacitances of a monolithic npn Bipolar Junction Transistor (BJT). It provides a cross-sectional view highlighting the various layers and components within the transistor structure.\n\n1. **Identification of Components and Structure:**\n- The diagram shows three main terminals labeled E (Emitter), B (Base), and C (Collector).\n- The semiconductor layers include an n+ emitter region, a p base region, and an n+ collector region within an n- epitaxial layer.\n- A buried n+ layer is depicted beneath the n- epitaxial layer, providing low-resistance paths for current.\n- The p- substrate forms the base of the structure, with p- isolation regions (Iso) surrounding the active regions for electrical isolation.\n\n2. **Connections and Interactions:**\n- Capacitances are indicated at various junctions: \\( C_{je} \\) (base-emitter junction capacitance), \\( C_{\\mu} \\) (base-collector junction capacitance, also known as the Miller capacitance), and \\( C_{s} \\) (collector-to-substrate junction capacitance).\n- The base-emitter junction capacitances \\( C_{je} \\) are shown across the n+ emitter and p base regions.\n- The base-collector capacitances \\( C_{\\mu} \\) are shown across the p base and n+ collector regions.\n- The collector-to-substrate capacitances \\( C_{s} \\) are shown between the n+ collector and the p- substrate.\n- The substrate (S) is tied to the most negative voltage (MNV) to ensure the collector-to-substrate junction remains in reverse bias, preventing conduction but allowing for stray capacitance effects.\n\n3. **Labels, Annotations, and Key Features:**\n- The diagram clearly labels the different semiconductor regions and capacitances, aiding in understanding the physical layout and electrical characteristics of the BJT.\n- Annotations explain the role of each capacitance in the transistor's operation, particularly in high-frequency applications where these parasitic capacitances can impact performance.\n\nOverall, the diagram provides a detailed view of the internal structure and capacitances of a monolithic npn BJT, highlighting the key regions and electrical interactions within the device.\n\nFIGURE 6.1 The junction capacitances of a monolithic npn BJT.\n\n- The collector-to-substrate junction capacitance $C_{s}$, with a similar expression as above. To ensure isolation, this junction must always be in reverse bias, so the substrate $S$ is internally tied to the most negative voltage (MNV) in the circuit. With $v_{SC}<0$, this junction is nonconductive but presents a stray capacitance $C_{s}$ that shunts high-frequency collector signals to the ac grounded substrate.\n\nFigure 6.1 shows that all three capacitances are of the distributed type and that their areas increase from $C_{je}$ to $C_{\\mu}$ to $C_{s}$. However, the depletion-layer widths also increase in the same order due to progressively lighter doping levels from emitter to base to collector and to substrate. If we visualize each capacitance as $C_{j}=\\varepsilon_{st} A / X_{d}$ as per Fig. 1.42b, it is not surprising that the three capacitance values do not differ significantly. Depending on the transistor size, $C_{je0}, C_{\\mu0}$, and $C_{s0}$ may range from a few picofarads ( $1 \\mathrm{pF}=10^{-12} \\mathrm{~F}$ ) down to ten femtofarads ( $1 \\mathrm{fF}=10^{-15} \\mathrm{~F}$ ) or so."
},
{
    "text": "We aim to show that the BJT exhibits an additional capacitance $C_{b}$ due to the injection of minority charges into its base region. Recall that to operate a BJT in the forward-active (FA) region, we need to establish an excess of minority charge-carriers in its base (this charge, previously discussed in relation to Fig. 2.8, is reproduced here as Fig. 6.2 for convenience). To determine this charge, henceforth denoted as $Q_{F}$, which consists of electrons in the npn BJT and holes in the pnp BJT, we consider the charge $d Q_{F}$ within an infinitesimal slice of thickness $d x$ at a point $x$ along the horizontal axis, and then integrate $d Q_{F}$ from 0 to the base width $W_{B}$. For an npn BJT with emitter area $A_{E}$, we first multiply the volume $A_{E} d x$\nimage_name:FIGURE 6.2\ndescription:FIGURE 6.2 depicts the excess minority carrier distribution in the base region of an npn Bipolar Junction Transistor (BJT) operating in the forward-active mode. This 3D plot shows the relationship between position within the base, denoted as \\(x\\), and the excess electron density \\(n_{B}^{\\prime}(x)\\).\n\n1. **Graph Type and Function:**\n- This is a 3D plot illustrating a linear relationship between the position \\(x\\) and the excess minority carrier density \\(n_{B}^{\\prime}(x)\\).\n\n2. **Axes Labels and Units:**\n- The horizontal axis represents the position \\(x\\) within the base, ranging from 0 to \\(W_{B}\\), the base width.\n- The vertical axis represents the excess electron density \\(n_{B}^{\\prime}(x)\\).\n- No specific units are provided for these axes in the graph.\n\n3. **Overall Trends and Behavior:**\n- The graph shows a linear decrease in excess electron density from \\(n_{B}^{\\prime}(0)\\) at \\(x = 0\\) to \\(n_{B}^{\\prime}(W_{B})\\) at \\(x = W_{B}\\).\n- The graph's plane represents the integration of the charge \\(dQ_{F}\\) over an infinitesimal slice of thickness \\(dx\\) along the base.\n\n4. **Key Features and Technical Aspects:**\n- The graph is shaded to emphasize the volume under the curve, corresponding to the charge \\(Q_{F}\\) in the base region.\n- The infinitesimal slice \\(dQ_{F}\\) is shown as a small section between \\(x\\) and \\(x + dx\\), indicating the integration over the base width.\n\n5. **Annotations and Data Points:**\n- The graph includes annotations for \\(n_{B}^{\\prime}(0)\\), \\(n_{B}^{\\prime}(W_{B})\\), and \\(dQ_{F}\\), providing crucial reference points for understanding the distribution and calculation of the charge \\(Q_{F}\\).\n- The linear decrease in excess electron density is essential for comprehending the BJT's behavior in the forward-active mode.\n\nFIGURE 6.2 Excess minority carrier distribution in the base region of an npn BJT operating in the forward-active mode.\nby the local excess electron density $n_{B}^{\\prime}(x)$ to find the number of electrons in the slice, then multiply by the electron charge $-q$ to determine $d Q_{F}$, and finally integrate\n\n$$\nQ_{F}=-q A_{E} \\int_{0}^{W_{B}} n_{B}^{\\prime}(x) d x=-q A_{E} \\frac{W_{B} \\times\\left[n_{B}^{\\prime}(0)-n_{B}^{\\prime}\\left(W_{B}\\right)\\right]}{2}\n$$\n\nwhere we use the fact that the integral represents the area of a triangle with base $W_{B}$ and height $n_{B}^{\\prime}(0)-n_{B}^{\\prime}\\left(W_{B}\\right)$. We also know that the collector current $I_{C}$ is proportional to the slope of this triangle,\n\n$$\nI_{C}=A_{E} J_{n}=q A_{E} D \\frac{d n_{B}^{\\prime}(x)}{d x}=q A_{E} D_{n}\\left(-\\frac{n_{B}^{\\prime}(0)-n_{B}^{\\prime}\\left(W_{B}\\right)}{W_{B}}\\right)\n$$\n\nwhere $D_{n}$ is the electron diffusivity. By eliminating the difference $n_{B}^{\\prime}(0)-n_{B}^{\\prime}\\left(W_{B}\\right)$ and simplifying, we obtain\n\n$$\n\\begin{equation*}\nQ_{F}=\\tau_{F} I_{C} \\tag{6.3}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\n\\tau_{F}=\\frac{W_{B}^{2}}{2 D_{n}} \\tag{6.4}\n\\end{equation*}\n$$\n\nis the mean transit time for electrons in the forward direction, named as such because it represents the average time an electron takes to cross the base region. (To understand why, rewrite as $I_{C}=Q_{F} / \\tau_{F}$, and use the definition of current, $I=\\Delta Q / \\Delta t$, to view $\\tau_{F}$ as the time taken by the charge $Q_{F}$ to diffuse through the base.) For monolithic npn BJTs, $\\tau_{F}$ typically ranges from 10 to $100 \\mathrm{ps}\\left(1 \\mathrm{ps}=10^{-12} \\mathrm{~s}\\right)$. Equation (6.4) also applies to pnp BJTs, provided we replace $D_{n}$ with $D_{p}$. By Einstein's equations, $D_{p}=\\left(\\mu_{p} / \\mu_{n}\\right) D_{n}$. Since $\\mu_{p}<\\mu_{n}$, it follows that $D_{p}<D_{n}$, indicating that pnp BJTs have longer transit times than npn BJTs, a characteristic that makes npn types inherently faster and thus more suitable for high-speed applications.\n\nRecall that a change in $v_{b e}$ results in a change in $i_{c}=g_{m} v_{b e}$, and hence, by Eq. (6.3), in the change $q_{f}=\\tau_{F} i_{c}$, that is,\n\n$$\nq_{f}=\\tau_{F} g_{m} v_{b e}\n$$\n\nWhenever a voltage change leads to charge redistribution, we observe the phenomenon of capacitance, so we write $C_{b}=q_{f} / v_{b e}$, that is,\n\n$$\n\\begin{equation*}\nC_{b}=\\tau_{F} g_{m}=\\tau_{F} \\frac{I_{C}}{V_{T}} \\tag{6.5}\n\\end{equation*}\n$$\n\nwhere $C_{b}$ is the base-charging capacitance, also known as the diffusion capacitance. Note that $C_{b}$ depends on the bias current $I_{C}$, similar to $g_{m}, r_{\\pi}$, and $r_{o}$."
},
{
    "text": "We aim to illustrate that the BJT exhibits an added capacitance $C_{b}$ due to the injection of minority charges into its base region. Remember, to operate a BJT in the forward-active (FA) region, an excess of minority charge-carriers must be established in its base (this charge, previously discussed in relation to Fig. 2.8, is reiterated here as Fig. 6.2 for ease of reference). To determine this charge, henceforth referred to as $Q_{F}$, which consists of electrons in an npn BJT and holes in a pnp BJT, we examine the charge $d Q_{F}$ within an infinitesimal slice of thickness $d x$ at a point $x$ along the horizontal axis, and then integrate $d Q_{F}$ from 0 to the base width $W_{B}$. For an npn BJT with emitter area $A_{E}$, we initially multiply the volume $A_{E} d x$\nimage_name:FIGURE 6.2\ndescription:FIGURE 6.2 displays the excess minority carrier distribution in the base region of an npn Bipolar Junction Transistor (BJT) operating in the forward-active mode. This 3D plot depicts the relationship between the position within the base, denoted as \\(x\\), and the excess electron density \\(n_{B}^{\\prime}(x)\\).\n\n1. **Graph Type and Function:**\n- This 3D plot shows a linear relationship between the position \\(x\\) and the excess minority carrier density \\(n_{B}^{\\prime}(x)\\).\n\n2. **Axes Labels and Units:**\n- The horizontal axis indicates the position \\(x\\) within the base, ranging from 0 to \\(W_{B}\\), the base width.\n- The vertical axis represents the excess electron density \\(n_{B}^{\\prime}(x)\\).\n- No specific units are provided for these axes on the graph.\n\n3. **Overall Trends:**\n- The graph illustrates a linear decrease in excess electron density from \\(n_{B}^{\\prime}(0)\\) at \\(x = 0\\) to \\(n_{B}^{\\prime}(W_{B})\\) at \\(x = W_{B}\\).\n- The graph's plane represents the integration of the charge \\(dQ_{F}\\) over an infinitesimal slice of thickness \\(dx\\) along the base.\n\n4. **Key Features and Technical Aspects:**\n- The graph is shaded to emphasize the volume under the curve, corresponding to the charge \\(Q_{F}\\) in the base region.\n- The infinitesimal slice \\(dQ_{F}\\) is depicted as a small section between \\(x\\) and \\(x + dx\\), indicating integration over the base width.\n\n5. **Annotations and Data Points:**\n- The graph includes annotations for \\(n_{B}^{\\prime}(0)\\), \\(n_{B}^{\\prime}(W_{B})\\), and \\(dQ_{F}\\), providing crucial reference points for understanding the distribution and calculation of the charge \\(Q_{F}\\).\n- The linear decrease in excess electron density is essential for comprehending the BJT's behavior in the forward-active mode.\n\nFIGURE 6.2 Excess minority carrier distribution in the base region of an npn BJT operating in the forward-active mode.\nby the local excess electron density $n_{B}^{\\prime}(x)$ to find the number of electrons in the slice, then multiply by the electron charge $-q$ to determine $d Q_{F}$, and finally integrate\n\n$$\nQ_{F}=-q A_{E} \\int_{0}^{W_{B}} n_{B}^{\\prime}(x) d x=-q A_{E} \\frac{W_{B} \\times\\left[n_{B}^{\\prime}(0)-n_{B}^{\\prime}\\left(W_{B}\\right)\\right]}{2}\n$$\n\nwhere we use the fact that the integral represents the area of a triangle with base $W_{B}$ and height $n_{B}^{\\prime}(0)-n_{B}^{\\prime}\\left(W_{B}\\right)$. We also know that the collector current $I_{C}$ is proportional to the triangle's slope,\n\n$$\nI_{C}=A_{E} J_{n}=q A_{E} D \\frac{d n_{B}^{\\prime}(x)}{d x}=q A_{E} D_{n}\\left(-\\frac{n_{B}^{\\prime}(0)-n_{B}^{\\prime}\\left(W_{B}\\right)}{W_{B}}\\right)\n$$\n\nwhere $D_{n}$ is the electron diffusivity. By eliminating the difference $n_{B}^{\\prime}(0)-n_{B}^{\\prime}\\left(W_{B}\\right)$ and simplifying, we obtain\n\n$$\n\\begin{equation*}\nQ_{F}=\\tau_{F} I_{C} \\tag{6.3}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\n\\tau_{F}=\\frac{W_{B}^{2}}{2 D_{n}} \\tag{6.4}\n\\end{equation*}\n$$\n\nis the mean transit time for electrons in the forward direction, named as such because it represents the average time an electron spends crossing the base region. (To understand why, rewrite as $I_{C}=Q_{F} / \\tau_{F}$, and use the current definition, $I=\\Delta Q / \\Delta t$, to view $\\tau_{F}$ as the time taken by the charge $Q_{F}$ to diffuse through the base.) For monolithic npn BJTs, $\\tau_{F}$ typically ranges from 10 to $100 \\mathrm{ps}\\left(1 \\mathrm{ps}=10^{-12} \\mathrm{~s}\\right)$. Equation (6.4) also applies to pnp BJTs, substituting $D_{n}$ with $D_{p}$. According to Einstein's equations, $D_{p}=\\left(\\mu_{p} / \\mu_{n}\\right) D_{n}$. Since $\\mu_{p}<\\mu_{n}$, it follows that $D_{p}<D_{n}$, indicating that pnp BJTs have longer transit times than npn BJTs, a trait that makes npn types inherently faster and thus more suitable for high-speed applications.\n\nRecall that a change $v_{b e}$ leads to a change $i_{c}=g_{m} v_{b e}$, and hence, by Eq. (6.3), to a change $q_{f}=\\tau_{F} i_{c}$, that is,\n\n$$\nq_{f}=\\tau_{F} g_{m} v_{b e}\n$$\n\nWhenever a voltage change causes charge redistribution, capacitance phenomena occur, so we express $C_{b}=q_{f} / v_{b e}$, that is,\n\n$$\n\\begin{equation*}\nC_{b}=\\tau_{F} g_{m}=\\tau_{F} \\frac{I_{C}}{V_{T}} \\tag{6.5}\n\\end{equation*}\n$$\n\nwhere $C_{b}$ is the base-charging capacitance, also known as the diffusion capacitance. Note that $C_{b}$ depends on the bias current $I_{C}$, similar to $g_{m}, r_{\\pi}$, and $r_{o}$."
},
{
    "text": "We aim to show that the BJT exhibits an added capacitance $C_{b}$ due to the injection of minority charges into its base region. Remember, to operate a BJT in the forward-active (FA) region, we need to create an excess of minority charge-carriers in its base (this charge, previously discussed in relation to Fig. 2.8, is reproduced here as Fig. 6.2 for ease of reference). To determine this charge, henceforth referred to as $Q_{F}$, which consists of electrons in an npn BJT and holes in a pnp BJT, we consider the charge $d Q_{F}$ within an infinitesimal slice of thickness $d x$ at a point $x$ along the horizontal axis, and then integrate $d Q_{F}$ from 0 to the base width $W_{B}$. For an npn BJT with emitter area $A_{E}$, we initially multiply the volume $A_{E} d x$\nimage_name:FIGURE 6.2\ndescription:FIGURE 6.2 depicts the excess minority carrier distribution in the base region of an npn Bipolar Junction Transistor (BJT) operating in the forward-active mode. This 3D plot shows the relationship between the position within the base, denoted as \\(x\\), and the excess electron density \\(n_{B}^{\\prime}(x)\\).\n\n1. **Graph Type and Function:**\n- It is a 3D plot illustrating a linear relationship between position \\(x\\) and excess minority carrier density \\(n_{B}^{\\prime}(x)\\).\n\n2. **Axes Labels and Units:**\n- The horizontal axis represents the position \\(x\\) within the base, ranging from 0 to \\(W_{B}\\), the base width.\n- The vertical axis shows the excess electron density \\(n_{B}^{\\prime}(x)\\).\n- No specific units are provided for these axes.\n\n3. **General Behavior and Trends:**\n- The graph displays a linear decrease in excess electron density from \\(n_{B}^{\\prime}(0)\\) at \\(x = 0\\) to \\(n_{B}^{\\prime}(W_{B})\\) at \\(x = W_{B}\\).\n- The graph's plane represents the integration of the charge \\(dQ_{F}\\) over an infinitesimal slice of thickness \\(dx\\) along the base.\n\n4. **Key Features and Technical Aspects:**\n- The graph is shaded to emphasize the volume under the curve, corresponding to the charge \\(Q_{F}\\) in the base region.\n- The infinitesimal slice \\(dQ_{F}\\) is shown as a small section between \\(x\\) and \\(x + dx\\), indicating the integration over the base width.\n\n5. **Annotations and Specific Data Points:**\n- The graph includes annotations for \\(n_{B}^{\\prime}(0)\\), \\(n_{B}^{\\prime}(W_{B})\\), and \\(dQ_{F}\\), providing essential reference points for understanding the distribution and calculation of the charge \\(Q_{F}\\).\n- The linear decrease in excess electron density is crucial for comprehending the BJT's behavior in the forward-active mode.\n\nFIGURE 6.2 Excess minority carrier distribution in the base region of an npn BJT operating in the forward-active mode.\nby the local excess electron density $n_{B}^{\\prime}(x)$ to find the number of electrons in the slice, then multiply by the electron charge $-q$ to determine $d Q_{F}$, and finally integrate\n\n$$\nQ_{F}=-q A_{E} \\int_{0}^{W_{B}} n_{B}^{\\prime}(x) d x=-q A_{E} \\frac{W_{B} \\times\\left[n_{B}^{\\prime}(0)-n_{B}^{\\prime}\\left(W_{B}\\right)\\right]}{2}\n$$\n\nwhere we use the fact that the integral equals the area of a triangle with base $W_{B}$ and height $n_{B}^{\\prime}(0)-n_{B}^{\\prime}\\left(W_{B}\\right)$. We also know that the collector current $I_{C}$ is proportional to the slope of this triangle,\n\n$$\nI_{C}=A_{E} J_{n}=q A_{E} D \\frac{d n_{B}^{\\prime}(x)}{d x}=q A_{E} D_{n}\\left(-\\frac{n_{B}^{\\prime}(0)-n_{B}^{\\prime}\\left(W_{B}\\right)}{W_{B}}\\right)\n$$\n\nwhere $D_{n}$ is the electron diffusivity. By eliminating the difference $n_{B}^{\\prime}(0)-n_{B}^{\\prime}\\left(W_{B}\\right)$ and simplifying, we obtain\n\n$$\n\\begin{equation*}\nQ_{F}=\\tau_{F} I_{C} \\tag{6.3}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\n\\tau_{F}=\\frac{W_{B}^{2}}{2 D_{n}} \\tag{6.4}\n\\end{equation*}\n$$\n\nis the mean transit time for electrons in the forward direction, named as such because it represents the average time an electron takes to cross the base region. (To understand why, rewrite as $I_{C}=Q_{F} / \\tau_{F}$, and use the definition of current, $I=\\Delta Q / \\Delta t$, to view $\\tau_{F}$ as the time taken by the charge $Q_{F}$ to diffuse through the base.) For monolithic npn BJTs, $\\tau_{F}$ typically ranges from 10 to $100 \\mathrm{ps}\\left(1 \\mathrm{ps}=10^{-12} \\mathrm{~s}\\right)$. Equation (6.4) also applies to pnp BJTs, provided $D_{n}$ is replaced with $D_{p}$. According to Einstein's equations, $D_{p}=\\left(\\mu_{p} / \\mu_{n}\\right) D_{n}$. Since $\\mu_{p}<\\mu_{n}$, it follows that $D_{p}<D_{n}$, indicating that pnp BJTs have longer transit times than npn BJTs, a characteristic that makes npn types inherently faster and thus more suitable for high-speed applications.\n\nRecall that a change in $v_{b e}$ results in a change in $i_{c}=g_{m} v_{b e}$, and hence, by Eq. (6.3), in the change $q_{f}=\\tau_{F} i_{c}$, that is,\n\n$$\nq_{f}=\\tau_{F} g_{m} v_{b e}\n$$\n\nWhenever a voltage change leads to charge redistribution, we observe the phenomenon of capacitance, so we write $C_{b}=q_{f} / v_{b e}$, that is,\n\n$$\n\\begin{equation*}\nC_{b}=\\tau_{F} g_{m}=\\tau_{F} \\frac{I_{C}}{V_{T}} \\tag{6.5}\n\\end{equation*}\n$$\n\nwhere $C_{b}$ is the base-charging capacitance, also known as the diffusion capacitance. Note that $C_{b}$ depends on the bias current $I_{C}$, similar to how $g_{m}, r_{\\pi}$, and $r_{o}$ do."
},
{
    "text": "We aim to show that the BJT exhibits an added capacitance $C_{b}$ due to the injection of minority charges into its base region. Remember, to operate a BJT in the forward-active (FA) region, we need to create an excess of minority charge-carriers in its base (this charge, previously discussed in Fig. 2.8, is reproduced here as Fig. 6.2 for ease of reference). To determine this charge, henceforth referred to as $Q_{F}$, which consists of electrons in an npn BJT and holes in a pnp BJT, we examine the charge $d Q_{F}$ within an infinitesimal slice of thickness $d x$ at a point $x$ along the horizontal axis, and then integrate $d Q_{F}$ from 0 to the base width $W_{B}$. For an npn BJT with emitter area $A_{E}$, we first multiply the volume $A_{E} d x$\nimage_name:FIGURE 6.2\ndescription:FIGURE 6.2 depicts the excess minority carrier distribution in the base region of an npn Bipolar Junction Transistor (BJT) operating in the forward-active mode. This 3D plot shows the relationship between the position within the base, denoted as \\(x\\), and the excess electron density \\(n_{B}^{\\prime}(x)\\).\n\n1. **Graph Type and Function:**\n- A 3D plot illustrating a linear relationship between position \\(x\\) and excess minority carrier density \\(n_{B}^{\\prime}(x)\\).\n\n2. **Axes Labels and Units:**\n- The horizontal axis represents the position \\(x\\) within the base, ranging from 0 to \\(W_{B}\\), the base width.\n- The vertical axis represents the excess electron density \\(n_{B}^{\\prime}(x)\\).\n- No specific units are provided for these axes.\n\n3. **Overall Trends:**\n- The graph shows a linear decrease in excess electron density from \\(n_{B}^{\\prime}(0)\\) at \\(x = 0\\) to \\(n_{B}^{\\prime}(W_{B})\\) at \\(x = W_{B}\\).\n- The plane formed by the graph represents the integration of the charge \\(dQ_{F}\\) over an infinitesimal slice of thickness \\(dx\\) along the base.\n\n4. **Key Features and Technical Aspects:**\n- The graph is shaded to emphasize the volume under the curve, corresponding to the charge \\(Q_{F}\\) in the base region.\n- The infinitesimal slice \\(dQ_{F}\\) is shown as a small section between \\(x\\) and \\(x + dx\\), indicating the integration over the base width.\n\n5. **Annotations and Data Points:**\n- The graph includes annotations for \\(n_{B}^{\\prime}(0)\\), \\(n_{B}^{\\prime}(W_{B})\\), and \\(dQ_{F}\\), providing key reference points for understanding the distribution and calculation of the charge \\(Q_{F}\\).\n- The linear decrease in excess electron density is crucial for understanding the BJT's behavior in the forward-active mode.\n\nFIGURE 6.2 Excess minority carrier distribution in the base region of an npn BJT operating in the forward-active mode.\nby the local excess electron density $n_{B}^{\\prime}(x)$ to find the number of electrons in the slice, then multiply by the electron charge $-q$ to determine $d Q_{F}$, and finally integrate\n\n$$\nQ_{F}=-q A_{E} \\int_{0}^{W_{B}} n_{B}^{\\prime}(x) d x=-q A_{E} \\frac{W_{B} \\times\\left[n_{B}^{\\prime}(0)-n_{B}^{\\prime}\\left(W_{B}\\right)\\right]}{2}\n$$\n\nwhere we use the fact that the integral represents the area of a triangle with base $W_{B}$ and height $n_{B}^{\\prime}(0)-n_{B}^{\\prime}\\left(W_{B}\\right)$. We also know that the collector current $I_{C}$ is proportional to the slope of the triangle,\n\n$$\nI_{C}=A_{E} J_{n}=q A_{E} D \\frac{d n_{B}^{\\prime}(x)}{d x}=q A_{E} D_{n}\\left(-\\frac{n_{B}^{\\prime}(0)-n_{B}^{\\prime}\\left(W_{B}\\right)}{W_{B}}\\right)\n$$\n\nwhere $D_{n}$ is the electron diffusivity. By eliminating the difference $n_{B}^{\\prime}(0)-n_{B}^{\\prime}\\left(W_{B}\\right)$ and simplifying, we obtain\n\n$$\n\\begin{equation*}\nQ_{F}=\\tau_{F} I_{C} \\tag{6.3}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\n\\tau_{F}=\\frac{W_{B}^{2}}{2 D_{n}} \\tag{6.4}\n\\end{equation*}\n$$\n\nis the mean transit time for electrons in the forward direction, named as such because it represents the average time an electron takes to cross the base region. (To understand why, rewrite $I_{C}=Q_{F} / \\tau_{F}$, and use the definition of current, $I=\\Delta Q / \\Delta t$, to view $\\tau_{F}$ as the time taken by the charge $Q_{F}$ to diffuse through the base.) For monolithic npn BJTs, $\\tau_{F}$ typically ranges from 10 to $100 \\mathrm{ps}\\left(1 \\mathrm{ps}=10^{-12} \\mathrm{~s}\\right)$. Equation (6.4) also applies to pnp BJTs, substituting $D_{n}$ with $D_{p}$. By Einstein's equations, $D_{p}=\\left(\\mu_{p} / \\mu_{n}\\right) D_{n}$. Since $\\mu_{p}<\\mu_{n}$, it follows that $D_{p}<D_{n}$, indicating that pnp BJTs have longer transit times than npn BJTs, a characteristic that makes npn types inherently faster and thus more suitable for high-speed applications.\n\nRecall that a change $v_{b e}$ results in the change $i_{c}=g_{m} v_{b e}$, and hence, by Eq. (6.3), in the change $q_{f}=\\tau_{F} i_{c}$, that is,\n\n$$\nq_{f}=\\tau_{F} g_{m} v_{b e}\n$$\n\nWhenever a voltage change leads to charge redistribution, we observe the phenomenon of capacitance, so we write $C_{b}=q_{f} / v_{b e}$, that is,\n\n$$\n\\begin{equation*}\nC_{b}=\\tau_{F} g_{m}=\\tau_{F} \\frac{I_{C}}{V_{T}} \\tag{6.5}\n\\end{equation*}\n$$\n\nwhere $C_{b}$ is the base-charging capacitance, also known as the diffusion capacitance. Note that $C_{b}$ depends on the bias current $I_{C}$, similar to $g_{m}, r_{\\pi}$, and $r_{o}$."
},
{
    "text": "We aim to show that the BJT exhibits an extra capacitance $C_{b}$ due to the injection of minority charges into its base region. Remember, to operate a BJT in the forward-active (FA) region, we need to create an excess of minority charge-carriers in its base (this charge, previously discussed in relation to Fig. 2.8, is shown again as Fig. 6.2 for convenience). To determine this charge, henceforth referred to as $Q_{F}$, which consists of electrons in an npn BJT and holes in a pnp BJT, we consider the charge $d Q_{F}$ within an infinitesimal slice of thickness $d x$ at a point $x$ along the horizontal axis, and then integrate $d Q_{F}$ from 0 to the base width $W_{B}$. For an npn BJT with emitter area $A_{E}$, we first multiply the volume $A_{E} d x$\nimage_name:FIGURE 6.2\ndescription:FIGURE 6.2 displays the excess minority carrier distribution in the base region of an npn Bipolar Junction Transistor (BJT) in the forward-active mode. This 3D plot shows the relationship between the position within the base, denoted as \\(x\\), and the excess electron density \\(n_{B}^{\\prime}(x)\\).\n\n1. **Graph Type and Function:**\n- It is a 3D plot depicting a linear relationship between position \\(x\\) and excess minority carrier density \\(n_{B}^{\\prime}(x)\\).\n\n2. **Axes Labels and Units:**\n- The horizontal axis represents the position \\(x\\) within the base, ranging from 0 to \\(W_{B}\\), the base width.\n- The vertical axis represents the excess electron density \\(n_{B}^{\\prime}(x)\\).\n- No specific units are provided for these axes.\n\n3. **Overall Behavior and Trends:**\n- The graph shows a linear decrease in excess electron density from \\(n_{B}^{\\prime}(0)\\) at \\(x = 0\\) to \\(n_{B}^{\\prime}(W_{B})\\) at \\(x = W_{B}\\).\n- The graph's plane represents the integration of the charge \\(dQ_{F}\\) over an infinitesimal slice of thickness \\(dx\\) along the base.\n\n4. **Key Features and Technical Details:**\n- The shaded area under the curve corresponds to the charge \\(Q_{F}\\) in the base region.\n- The infinitesimal slice \\(dQ_{F}\\) is shown between \\(x\\) and \\(x + dx\\), indicating integration over the base width.\n\n5. **Annotations and Specific Data Points:**\n- The graph includes annotations for \\(n_{B}^{\\prime}(0)\\), \\(n_{B}^{\\prime}(W_{B})\\), and \\(dQ_{F}\\), providing essential reference points for understanding the charge distribution and calculation.\n- The linear decrease in excess electron density is crucial for understanding the BJT's behavior in the forward-active mode.\n\nFIGURE 6.2 Excess minority carrier distribution in the base region of an npn BJT operating in the forward-active mode.\nby the local excess electron density $n_{B}^{\\prime}(x)$ to find the number of electrons in the slice, then multiply by the electron charge $-q$ to determine $d Q_{F}$, and finally integrate\n\n$$\nQ_{F}=-q A_{E} \\int_{0}^{W_{B}} n_{B}^{\\prime}(x) d x=-q A_{E} \\frac{W_{B} \\times\\left[n_{B}^{\\prime}(0)-n_{B}^{\\prime}\\left(W_{B}\\right)\\right]}{2}\n$$\n\nwhere we use the fact that the integral represents the area of a triangle with base $W_{B}$ and height $n_{B}^{\\prime}(0)-n_{B}^{\\prime}\\left(W_{B}\\right)$. We also know that the collector current $I_{C}$ is proportional to the slope of this triangle,\n\n$$\nI_{C}=A_{E} J_{n}=q A_{E} D \\frac{d n_{B}^{\\prime}(x)}{d x}=q A_{E} D_{n}\\left(-\\frac{n_{B}^{\\prime}(0)-n_{B}^{\\prime}\\left(W_{B}\\right)}{W_{B}}\\right)\n$$\n\nwhere $D_{n}$ is the electron diffusivity. By eliminating the difference $n_{B}^{\\prime}(0)-n_{B}^{\\prime}\\left(W_{B}\\right)$ and simplifying, we obtain\n\n$$\n\\begin{equation*}\nQ_{F}=\\tau_{F} I_{C} \\tag{6.3}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\n\\tau_{F}=\\frac{W_{B}^{2}}{2 D_{n}} \\tag{6.4}\n\\end{equation*}\n$$\n\nis the mean transit time for electrons in the forward direction, named as such because it represents the average time an electron takes to cross the base region. (To understand why, rewrite as $I_{C}=Q_{F} / \\tau_{F}$, and use the current definition, $I=\\Delta Q / \\Delta t$, to see $\\tau_{F}$ as the time taken by the charge $Q_{F}$ to diffuse through the base.) For monolithic npn BJTs, $\\tau_{F}$ typically ranges from 10 to $100 \\mathrm{ps}\\left(1 \\mathrm{ps}=10^{-12} \\mathrm{~s}\\right)$. Equation (6.4) also applies to pnp BJTs, provided $D_{n}$ is replaced with $D_{p}$. According to Einstein's equations, $D_{p}=\\left(\\mu_{p} / \\mu_{n}\\right) D_{n}$. Since $\\mu_{p}<\\mu_{n}$, it follows that $D_{p}<D_{n}$, indicating that pnp BJTs have longer transit times than npn BJTs, making npn types inherently faster and thus more suitable for high-speed applications.\n\nRecall that a change $v_{b e}$ results in the change $i_{c}=g_{m} v_{b e}$, and hence, by Eq. (6.3), in the change $q_{f}=\\tau_{F} i_{c}$, that is,\n\n$$\nq_{f}=\\tau_{F} g_{m} v_{b e}\n$$\n\nWhenever a voltage change causes charge redistribution, we observe capacitance, so we write $C_{b}=q_{f} / v_{b e}$, that is,\n\n$$\n\\begin{equation*}\nC_{b}=\\tau_{F} g_{m}=\\tau_{F} \\frac{I_{C}}{V_{T}} \\tag{6.5}\n\\end{equation*}\n$$\n\nwhere $C_{b}$ is the base-charging capacitance, also known as the diffusion capacitance. Note that $C_{b}$ depends on the bias current $I_{C}$, similar to $g_{m}, r_{\\pi}$, and $r_{o}$."
},
{
    "text": "We aim to show that the BJT exhibits an additional capacitance, $C_{b}$, due to the injection of minority charges into its base region. Remember, to operate a BJT in the forward-active (FA) region, we need to create an excess of minority charge-carriers in its base (this charge, previously discussed in relation to Fig. 2.8, is also shown here as Fig. 6.2 for convenience). To determine this charge, henceforth referred to as $Q_{F}$, which consists of electrons in an npn BJT and holes in a pnp BJT, we consider the charge $d Q_{F}$ within an infinitesimal slice of thickness $d x$ at a point $x$ along the horizontal axis, and then integrate $d Q_{F}$ from 0 to the base width $W_{B}$. For an npn BJT with emitter area $A_{E}$, we first multiply the volume $A_{E} d x$\nimage_name:FIGURE 6.2\ndescription:FIGURE 6.2 depicts the excess minority carrier distribution in the base region of an npn Bipolar Junction Transistor (BJT) in the forward-active mode. This 3D plot shows the relationship between the position within the base, denoted as \\(x\\), and the excess electron density \\(n_{B}^{\\prime}(x)\\).\n\n1. **Graph Type and Function:**\n- This is a 3D plot illustrating a linear relationship between position \\(x\\) and excess minority carrier density \\(n_{B}^{\\prime}(x)\\).\n\n2. **Axes Labels and Units:**\n- The horizontal axis represents the position \\(x\\) within the base, ranging from 0 to \\(W_{B}\\), the base width.\n- The vertical axis shows the excess electron density \\(n_{B}^{\\prime}(x)\\).\n- No specific units are provided for these axes.\n\n3. **General Behavior and Trends:**\n- The graph displays a linear decrease in excess electron density from \\(n_{B}^{\\prime}(0)\\) at \\(x = 0\\) to \\(n_{B}^{\\prime}(W_{B})\\) at \\(x = W_{B}\\).\n- The graph's plane represents the integration of the charge \\(dQ_{F}\\) over an infinitesimal slice of thickness \\(dx\\) along the base.\n\n4. **Key Features and Technical Aspects:**\n- The graph is shaded to emphasize the volume under the curve, corresponding to the charge \\(Q_{F}\\) in the base region.\n- The infinitesimal slice \\(dQ_{F}\\) is shown as a small section between \\(x\\) and \\(x + dx\\), indicating integration over the base width.\n\n5. **Annotations and Specific Data Points:**\n- The graph includes annotations for \\(n_{B}^{\\prime}(0)\\), \\(n_{B}^{\\prime}(W_{B})\\), and \\(dQ_{F}\\), providing key reference points for understanding the distribution and calculation of the charge \\(Q_{F}\\).\n- The linear decrease in excess electron density is crucial for comprehending the BJT's behavior in the forward-active mode.\n\nFIGURE 6.2 Excess minority carrier distribution in the base region of an npn BJT operating in the forward-active mode.\nby the local excess electron density $n_{B}^{\\prime}(x)$ to find the number of electrons in the slice, then multiply by the electron charge $-q$ to determine $d Q_{F}$, and finally integrate\n\n$$\nQ_{F}=-q A_{E} \\int_{0}^{W_{B}} n_{B}^{\\prime}(x) d x=-q A_{E} \\frac{W_{B} \\times\\left[n_{B}^{\\prime}(0)-n_{B}^{\\prime}\\left(W_{B}\\right)\\right]}{2}\n$$\n\nwhere we use the fact that the integral represents the area of a triangle with base $W_{B}$ and height $n_{B}^{\\prime}(0)-n_{B}^{\\prime}\\left(W_{B}\\right)$. We also know that the collector current $I_{C}$ is proportional to the slope of this triangle,\n\n$$\nI_{C}=A_{E} J_{n}=q A_{E} D \\frac{d n_{B}^{\\prime}(x)}{d x}=q A_{E} D_{n}\\left(-\\frac{n_{B}^{\\prime}(0)-n_{B}^{\\prime}\\left(W_{B}\\right)}{W_{B}}\\right)\n$$\n\nwhere $D_{n}$ is the electron diffusivity. By eliminating the difference $n_{B}^{\\prime}(0)-n_{B}^{\\prime}\\left(W_{B}\\right)$ and simplifying, we obtain\n\n$$\n\\begin{equation*}\nQ_{F}=\\tau_{F} I_{C} \\tag{6.3}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\n\\tau_{F}=\\frac{W_{B}^{2}}{2 D_{n}} \\tag{6.4}\n\\end{equation*}\n$$\n\nis the mean transit time for electrons in the forward direction, named so because it represents the average time an electron takes to cross the base region. (To understand why, rewrite as $I_{C}=Q_{F} / \\tau_{F}$, and use the current definition, $I=\\Delta Q / \\Delta t$, to view $\\tau_{F}$ as the time for the charge $Q_{F}$ to diffuse through the base.) For monolithic npn BJTs, $\\tau_{F}$ typically ranges from 10 to $100 \\mathrm{ps}\\left(1 \\mathrm{ps}=10^{-12} \\mathrm{~s}\\right)$. Equation (6.4) also applies to pnp BJTs, provided $D_{n}$ is replaced with $D_{p}$. According to Einstein's equations, $D_{p}=\\left(\\mu_{p} / \\mu_{n}\\right) D_{n}$. Since $\\mu_{p}<\\mu_{n}$, it follows that $D_{p}<D_{n}$, indicating that pnp BJTs have longer transit times than npn BJTs, making npn types inherently faster and thus more suitable for high-speed applications.\n\nRecall that a change $v_{b e}$ leads to a change $i_{c}=g_{m} v_{b e}$, and hence, by Eq. (6.3), a change $q_{f}=\\tau_{F} i_{c}$, that is,\n\n$$\nq_{f}=\\tau_{F} g_{m} v_{b e}\n$$\n\nWhenever a voltage change causes charge redistribution, we observe capacitance, so we write $C_{b}=q_{f} / v_{b e}$, that is,\n\n$$\n\\begin{equation*}\nC_{b}=\\tau_{F} g_{m}=\\tau_{F} \\frac{I_{C}}{V_{T}} \\tag{6.5}\n\\end{equation*}\n$$\n\nwhere $C_{b}$ is the base-charging capacitance, also known as the diffusion capacitance. Note that $C_{b}$ depends on the bias current $I_{C}$, similar to $g_{m}, r_{\\pi}$, and $r_{o}$."
},
{
    "text": "We aim to illustrate that the BJT displays an extra capacitance $C_{b}$ due to the injection of minority charges into its base region. Remember, for a BJT to operate in the forward-active (FA) region, it's necessary to create an excess of minority charge-carriers in its base (this charge, previously discussed in relation to Fig. 2.8, is also presented here as Fig. 6.2 for ease of reference). To determine this charge, henceforth referred to as $Q_{F}$, which consists of electrons in an npn BJT and holes in a pnp BJT, we examine the charge $d Q_{F}$ within an infinitesimal slice of thickness $d x$ at a point $x$ along the horizontal axis, and then integrate $d Q_{F}$ from 0 to the base width $W_{B}$. For an npn BJT with emitter area $A_{E}$, we initially multiply the volume $A_{E} d x$\nimage_name:FIGURE 6.2\ndescription:FIGURE 6.2 displays the excess minority carrier distribution within the base region of an npn Bipolar Junction Transistor (BJT) in the forward-active mode. This 3D plot shows the relationship between the position within the base, denoted as \\(x\\), and the excess electron density \\(n_{B}^{\\prime}(x)\\).\n\n1. **Graph Type and Function:**\n- A 3D plot depicting a linear relationship between position \\(x\\) and excess minority carrier density \\(n_{B}^{\\prime}(x)\\).\n\n2. **Axes Labels and Units:**\n- The horizontal axis indicates the position \\(x\\) within the base, ranging from 0 to \\(W_{B}\\), the base width.\n- The vertical axis represents the excess electron density \\(n_{B}^{\\prime}(x)\\).\n- No specific units are provided for these axes.\n\n3. **General Behavior and Trends:**\n- The graph shows a linear decline in excess electron density from \\(n_{B}^{\\prime}(0)\\) at \\(x = 0\\) to \\(n_{B}^{\\prime}(W_{B})\\) at \\(x = W_{B}\\).\n- The graph's plane represents the integration of the charge \\(dQ_{F}\\) over an infinitesimal slice of thickness \\(dx\\) along the base.\n\n4. **Key Features and Technical Aspects:**\n- The graph is shaded to emphasize the volume under the curve, corresponding to the charge \\(Q_{F}\\) in the base region.\n- The infinitesimal slice \\(dQ_{F}\\) is depicted as a small section between \\(x\\) and \\(x + dx\\), indicating the integration across the base width.\n\n5. **Annotations and Specific Data Points:**\n- The graph includes annotations for \\(n_{B}^{\\prime}(0)\\), \\(n_{B}^{\\prime}(W_{B})\\), and \\(dQ_{F}\\), providing crucial reference points for understanding the charge \\(Q_{F}\\)'s distribution and calculation.\n- The linear decrease in excess electron density is essential for comprehending the BJT's behavior in the forward-active mode.\n\nFIGURE 6.2 Excess minority carrier distribution in the base region of an npn BJT operating in the forward-active mode.\nby the local excess electron density $n_{B}^{\\prime}(x)$ to find the number of electrons in the slice, then multiply by the electron charge $-q$ to determine $d Q_{F}$, and finally integrate\n\n$$\nQ_{F}=-q A_{E} \\int_{0}^{W_{B}} n_{B}^{\\prime}(x) d x=-q A_{E} \\frac{W_{B} \\times\\left[n_{B}^{\\prime}(0)-n_{B}^{\\prime}\\left(W_{B}\\right)\\right]}{2}\n$$\n\nwhere we've utilized the fact that the integral equals the area of a triangle with base $W_{B}$ and height $n_{B}^{\\prime}(0)-n_{B}^{\\prime}\\left(W_{B}\\right)$. We also recognize that the collector current $I_{C}$ is proportional to the triangle's slope,\n\n$$\nI_{C}=A_{E} J_{n}=q A_{E} D \\frac{d n_{B}^{\\prime}(x)}{d x}=q A_{E} D_{n}\\left(-\\frac{n_{B}^{\\prime}(0)-n_{B}^{\\prime}\\left(W_{B}\\right)}{W_{B}}\\right)\n$$\n\nwhere $D_{n}$ is the electron diffusivity. By eliminating the difference $n_{B}^{\\prime}(0)-n_{B}^{\\prime}\\left(W_{B}\\right)$ and simplifying, we derive\n\n$$\n\\begin{equation*}\nQ_{F}=\\tau_{F} I_{C} \\tag{6.3}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\n\\tau_{F}=\\frac{W_{B}^{2}}{2 D_{n}} \\tag{6.4}\n\\end{equation*}\n$$\n\nrepresents the mean transit time for electrons in the forward direction, named as such because it indicates the average time an electron takes to cross the base region. (To understand why, rewrite as $I_{C}=Q_{F} / \\tau_{F}$, and use the current definition, $I=\\Delta Q / \\Delta t$, to view $\\tau_{F}$ as the time taken by the charge $Q_{F}$ to diffuse through the base.) For monolithic npn BJTs, $\\tau_{F}$ typically ranges from 10 to $100 \\mathrm{ps}\\left(1 \\mathrm{ps}=10^{-12} \\mathrm{~s}\\right)$. Equation (6.4) also applies to pnp BJTs, substituting $D_{n}$ with $D_{p}$. According to Einstein's equations, $D_{p}=\\left(\\mu_{p} / \\mu_{n}\\right) D_{n}$. Since $\\mu_{p}<\\mu_{n}$, it follows that $D_{p}<D_{n}$, indicating that pnp BJTs have longer transit times than npn BJTs, a trait that makes npn types inherently faster and thus more suitable for high-speed applications.\n\nRecall that a variation $v_{b e}$ leads to a change $i_{c}=g_{m} v_{b e}$, and hence, by Eq. (6.3), a change $q_{f}=\\tau_{F} i_{c}$, that is,\n\n$$\nq_{f}=\\tau_{F} g_{m} v_{b e}\n$$\n\nWhenever a voltage change causes charge redistribution, capacitance phenomena occur, so we express $C_{b}=q_{f} / v_{b e}$, that is,\n\n$$\n\\begin{equation*}\nC_{b}=\\tau_{F} g_{m}=\\tau_{F} \\frac{I_{C}}{V_{T}} \\tag{6.5}\n\\end{equation*}\n$$\n\nwhere $C_{b}$ is the base-charging capacitance, also known as the diffusion capacitance. Note that $C_{b}$ depends on the bias current $I_{C}$, similar to $g_{m}, r_{\\pi}$, and $r_{o}$."
},
{
    "text": "We aim to show that the BJT exhibits an additional capacitance $C_{b}$ due to the injection of minority charges into its base region. Recall that to operate a BJT in the forward-active (FA) region, we need to establish an excess of minority charge-carriers in its base (this charge, previously discussed in connection with Fig. 2.8, is reproduced here as Fig. 6.2 for convenience). To determine this charge, henceforth denoted as $Q_{F}$ and consisting of electrons in the npn BJT and holes in the pnp BJT, we consider the charge $d Q_{F}$ within an infinitesimal slice of thickness $d x$ at a point $x$ along the horizontal axis, and then integrate $d Q_{F}$ from 0 to the base width $W_{B}$. For an $n p n$ BJT with emitter area $A_{E}$, we first multiply the volume $A_{E} d x$\nimage_name:FIGURE 6.2\ndescription:FIGURE 6.2 depicts the excess minority carrier distribution in the base region of an npn Bipolar Junction Transistor (BJT) operating in the forward-active mode. This 3D plot shows the relationship between position within the base, denoted as \\(x\\), and the excess electron density \\(n_{B}^{\\prime}(x)\\).\n\n1. **Type of Graph and Function:**\n- A 3D plot illustrating a linear relationship between position \\(x\\) and excess minority carrier density \\(n_{B}^{\\prime}(x)\\).\n\n2. **Axes Labels and Units:**\n- The horizontal axis represents the position \\(x\\) within the base, ranging from 0 to \\(W_{B}\\), the base width.\n- The vertical axis represents the excess electron density \\(n_{B}^{\\prime}(x)\\).\n- No specific units are provided for these axes.\n\n3. **Overall Behavior and Trends:**\n- The graph shows a linear decrease in excess electron density from \\(n_{B}^{\\prime}(0)\\) at \\(x = 0\\) to \\(n_{B}^{\\prime}(W_{B})\\) at \\(x = W_{B}\\).\n- The plane formed by the graph represents the integration of the charge \\(dQ_{F}\\) over an infinitesimal slice of thickness \\(dx\\) along the base.\n\n4. **Key Features and Technical Details:**\n- The graph is shaded to highlight the volume under the curve, corresponding to the charge \\(Q_{F}\\) in the base region.\n- The infinitesimal slice \\(dQ_{F}\\) is shown as a small section between \\(x\\) and \\(x + dx\\), indicating the integration over the base width.\n\n5. **Annotations and Specific Data Points:**\n- The graph includes annotations for \\(n_{B}^{\\prime}(0)\\), \\(n_{B}^{\\prime}(W_{B})\\), and \\(dQ_{F}\\), providing essential reference points for understanding the distribution and calculation of the charge \\(Q_{F}\\).\n- The linear decrease in excess electron density is crucial for understanding the BJT's behavior in the forward-active mode.\n\nFIGURE 6.2 Excess minority carrier distribution in the base region of an npn BJT operating in the forward-active mode.\nby the local excess electron density $n_{B}^{\\prime}(x)$ to find the number of electrons in the slice, then multiply by the electron charge $-q$ to find $d Q_{F}$, and finally integrate\n\n$$\nQ_{F}=-q A_{E} \\int_{0}^{W_{B}} n_{B}^{\\prime}(x) d x=-q A_{E} \\frac{W_{B} \\times\\left[n_{B}^{\\prime}(0)-n_{B}^{\\prime}\\left(W_{B}\\right)\\right]}{2}\n$$\n\nwhere we use the fact that the integral represents the area of a triangle with base $W_{B}$ and height $n_{B}^{\\prime}(0)-n_{B}^{\\prime}\\left(W_{B}\\right)$. We also know that the collector current $I_{C}$ is proportional to the slope of the triangle,\n\n$$\nI_{C}=A_{E} J_{n}=q A_{E} D \\frac{d n_{B}^{\\prime}(x)}{d x}=q A_{E} D_{n}\\left(-\\frac{n_{B}^{\\prime}(0)-n_{B}^{\\prime}\\left(W_{B}\\right)}{W_{B}}\\right)\n$$\n\nwhere $D_{n}$ is the electron diffusivity. By eliminating the difference $n_{B}^{\\prime}(0)-n_{B}^{\\prime}\\left(W_{B}\\right)$ and simplifying, we obtain\n\n$$\n\\begin{equation*}\nQ_{F}=\\tau_{F} I_{C} \\tag{6.3}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\n\\tau_{F}=\\frac{W_{B}^{2}}{2 D_{n}} \\tag{6.4}\n\\end{equation*}\n$$\n\nis the mean transit time for electrons in the forward direction, named as such because it represents the average time an electron takes to cross the base region. (To understand why, rewrite as $I_{C}=Q_{F} / \\tau_{F}$, and use the definition of current, $I=\\Delta Q / \\Delta t$, to view $\\tau_{F}$ as the time taken by the charge $Q_{F}$ to diffuse through the base.) For monolithic npn BJTs, $\\tau_{F}$ typically ranges from 10 to $100 \\mathrm{ps}\\left(1 \\mathrm{ps}=10^{-12} \\mathrm{~s}\\right)$. Equation (6.4) also applies to pnp BJTs, provided we replace $D_{n}$ with $D_{p}$. According to Einstein's equations, $D_{p}=\\left(\\mu_{p} / \\mu_{n}\\right) D_{n}$. Since $\\mu_{p}<\\mu_{n}$, it follows that $D_{p}<D_{n}$, indicating that pnp BJTs have longer transit times than npn BJTs, a characteristic that makes npn types inherently faster and thus more suitable for high-speed applications.\n\nRecall that a change $v_{b e}$ results in the change $i_{c}=g_{m} v_{b e}$, and hence, by Eq. (6.3), in the change $q_{f}=\\tau_{F} i_{c}$, that is,\n\n$$\nq_{f}=\\tau_{F} g_{m} v_{b e}\n$$\n\nWhenever a voltage change causes charge redistribution, we observe the phenomenon of capacitance, so we write $C_{b}=q_{f} / v_{b e}$, that is,\n\n$$\n\\begin{equation*}\nC_{b}=\\tau_{F} g_{m}=\\tau_{F} \\frac{I_{C}}{V_{T}} \\tag{6.5}\n\\end{equation*}\n$$\n\nwhere $C_{b}$ is the base-charging capacitance, also known as the diffusion capacitance. Note that $C_{b}$ depends on the bias current $I_{C}$, similar to $g_{m}, r_{\\pi}$, and $r_{o}$."
},
{
    "text": "We are now prepared to integrate all the aforementioned information into a small-signal BJT model, enabling us to analyze the high-frequency behavior of bipolar ICs. This is illustrated in Fig. 6.3, where the small-signal voltages and currents, now frequency-dependent, are depicted using their Laplace transforms (uppercase letters with lowercase subscripts). Moving from right to left, we make the following observations:\n\n- Initially, we encounter the substrate capacitance $C_{s}$. Since the substrate of an npn BJT is connected to the MNV, a dc potential, it acts as a signal ground in our model. (Often, $C_{s}$ is omitted to simplify calculations.)\n- Next, we identify the base-collector junction capacitance $C_{\\mu}$. This capacitance is particularly interesting because its impact can be negligible in some scenarios, allowing it to be disregarded, while in others, its role is significantly amplified due to the Miller effect, making it the dominant capacitance in the circuit.\n- In parallel with $r_{\\pi}$, there is a capacitance $C_{\\pi}$ composed of two parts,\n\n$$\n\\begin{equation*}\nC_{\\pi}=C_{j e}+C_{b} \\tag{6.6}\n\\end{equation*}\n$$\n\nspecifically, the roughly constant junction component $C_{j e}\\left(\\cong 2 C_{j e 0}\\right)$, and the bias-dependent component $C_{b}\\left(=\\tau_{F} I_{C} / V_{T}\\right)$.\n\n- Referring to Fig. 6.1, we note that as current enters the base terminal $B$ and flows through the thin base region between the emitter and collector, it encounters some distributed resistance. This is essentially the bulk resistance $r_{b}$ of the moderately-doped $p$-type base region. Typically around $10^{2} \\Omega$ in monolithic BJTs, $r_{b}$ has been overlooked thus far because the voltage drop it causes due to $i_{b}$ is usually insignificant compared to that caused by $r_{\\pi}$. However, we will see that $r_{b}$ generally cannot be ignored in high-frequency operation, as it constrains the dynamics of certain BJT configurations, especially the CE configuration.\n\nEXAMPLE 6.1 Determine the element values of the small-signal model for the BJT in Fig. $6.4 a$ using data from a typical high-voltage process: $\\beta_{0}=150, V_{A}=80 \\mathrm{~V}, r_{b}=250 \\Omega ; \\tau_{F}=$ $200 \\mathrm{ps} ; C_{j e 0}=1.0 \\mathrm{pF}, \\phi_{e}=0.8 \\mathrm{~V}, m_{e}=0.33 ; C_{\\mu 0}=0.5 \\mathrm{pF}, \\phi_{c}=0.6 \\mathrm{~V}, m_{c}=0.5$; $C_{s 0}=3.0 \\mathrm{pF}, \\phi_{s}=0.6 \\mathrm{~V}$, and $m_{s}=0.5$. Present your final circuit.\nimage_name:(a)\ndescription:\n[\nname: 20k, type: Resistor, value: 20k, ports: {N1: 5V, N2: X1}\nname: 43k, type: Resistor, value: 43k, ports: {N1: X2, N2: -5V}\nname: M1, type: NPN, ports: {C: X1, B: GND, E: X2}\n]\nextrainfo:The circuit is a common-emitter configuration with a BJT (M1) biased between +5V and -5V. Resistors 20k and 43k are used for biasing.\n\n(a)\nimage_name:(b)\ndescription:\n[\nname: R1, type: Resistor, value: 250 , ports: {N1: B, N2: X1}\nname: R2, type: Resistor, value: 39 k, ports: {N1: X1, N2: E}\nname: C1, type: Capacitor, value: 2.77 pF, ports: {Np: X1, Nn: E}\nname: C2, type: Capacitor, value: 0.2 pF, ports: {Np: X1, Nn: C}\nname: C3, type: Capacitor, value: 0.8 pF, ports: {Np: C, Nn: GND}\nname: R3, type: Resistor, value: 800 k, ports: {N1: C, N2: E}\nname: VCCS, type: VoltageControlledCurrentSource, value: V/260 , ports: {Np: C, Nn: E}\n]\nextrainfo:The circuit is a small-signal model of a BJT amplifier. It includes resistors, capacitors, and a voltage-controlled current source representing the transistor's operation. The nodes are labeled B, X1, E, and C, with the ground connected at GND. The circuit is designed for analyzing the frequency response and gain of the amplifier.\n\n(b)\n\nFIGURE 6.4 (a) Circuit of Example 6.1, and (b) the BJT's small-signal model values.\n\n#### Solution\n\nBy inspection, $I_{C} \\cong I_{E}=(5-0.7) / 43=0.1 \\mathrm{~mA}$. Following the usual procedure, we obtain $g_{m}=1 /(260 \\Omega), r_{\\pi}=39 \\mathrm{k} \\Omega$, and $r_{o}=800 \\mathrm{k} \\Omega$. Additionally,\n\n$$\n\\begin{aligned}\n& C_{b}=\\tau_{F} g_{m}=\\frac{200 \\times 10^{-12}}{260} \\cong 0.77 \\mathrm{pF} \\\\\n& C_{j e} \\cong 2 C_{j e 0}=2.0 \\mathrm{pF} \\\\\n& C_{\\pi}=C_{b}+C_{j e} \\cong 2.77 \\mathrm{pF}\n\\end{aligned}\n$$\n\nTo determine $C_{\\mu}$, we note that $V_{C}=5-20 \\times 0.1=3 \\mathrm{~V}$, thus $V_{B C}=V_{B}-V_{C}=$ $0-3=-3 \\mathrm{~V}$. For $C_{s}$, assume the substrate is connected to the MNV ( -5 V ), resulting in $V_{S C}=V_{S}-V_{C}=-5-3=-8 \\mathrm{~V}$. Consequently,\n\n$$\nC_{\\mu}=\\frac{0.5}{\\left(1-\\frac{-3}{0.6}\\right)^{0.5}} \\cong 0.2 \\mathrm{pF} \\quad C_{s}=\\frac{3}{\\left(1-\\frac{-8}{0.6}\\right)^{0.5}} \\cong 0.8 \\mathrm{pF}\n$$\n\nThe complete small-signal model is depicted in Fig. 6.4b."
},
{
    "text": "We are prepared to integrate all the preceding information into a small-signal BJT model, enabling us to analyze the high-frequency behavior of bipolar ICs. This model is depicted in Fig. 6.3, where the small-signal voltages and currents, now frequency-dependent, are expressed using their Laplace transforms (uppercase letters with lowercase subscripts). Observations from right to left include:\n\n- Initially, we encounter the substrate capacitance $C_{s}$. Since the npn BJT's substrate connects to the MNV, a dc potential, it functions as a signal ground in our model. (Often, $C_{s}$ is omitted to simplify calculations.)\n- Next, we identify the base-collector junction capacitance $C_{\\mu}$. This capacitance is particularly interesting because its impact can be negligible in some scenarios, allowing it to be disregarded, while in others, it becomes significant due to the Miller effect, emerging as the dominant capacitance in the circuit.\n- Parallel to $r_{\\pi}$, we find a capacitance $C_{\\pi}$ composed of two parts,\n\n$$\n\\begin{equation*}\nC_{\\pi}=C_{j e}+C_{b} \\tag{6.6}\n\\end{equation*}\n$$\n\nspecifically, the roughly constant junction component $C_{j e}\\left(\\cong 2 C_{j e 0}\\right)$, and the bias-dependent component $C_{b}\\left(=\\tau_{F} I_{C} / V_{T}\\right)$.\n\n- Referring to Fig. 6.1, we note that as current enters the base terminal $B$ and moves to the thin base region between the emitter and collector, it encounters distributed resistance. This resistance is the bulk resistance $r_{b}$ of the moderately-doped $p$-type base region. Typically around $10^{2} \\Omega$ in monolithic BJTs, $r_{b}$ has been overlooked so far because the voltage drop it causes due to $i_{b}$ is usually minor compared to that caused by $r_{\\pi}$. However, we will see that $r_{b}$ generally cannot be ignored at high frequencies, as it constrains the dynamics of certain BJT configurations, especially the CE configuration.\n\nEXAMPLE 6.1 Determine the element values for the small-signal model of the BJT in Fig. $6.4 a$ using data from a typical high-voltage process: $\\beta_{0}=150, V_{A}=80 \\mathrm{~V}, r_{b}=250 \\Omega ; \\tau_{F}=$ $200 \\mathrm{ps} ; C_{j e 0}=1.0 \\mathrm{pF}, \\phi_{e}=0.8 \\mathrm{~V}, m_{e}=0.33 ; C_{\\mu 0}=0.5 \\mathrm{pF}, \\phi_{c}=0.6 \\mathrm{~V}, m_{c}=0.5$; $C_{s 0}=3.0 \\mathrm{pF}, \\phi_{s}=0.6 \\mathrm{~V}$, and $m_{s}=0.5$. Present your final circuit.\nimage_name:(a)\ndescription:\n[\nname: 20k, type: Resistor, value: 20k, ports: {N1: 5V, N2: X1}\nname: 43k, type: Resistor, value: 43k, ports: {N1: X2, N2: -5V}\nname: M1, type: NPN, ports: {C: X1, B: GND, E: X2}\n]\nextrainfo:The circuit is a common-emitter configuration with a BJT (M1) biased between +5V and -5V. Resistors 20k and 43k are used for biasing.\n\n(a)\nimage_name:(b)\ndescription:\n[\nname: R1, type: Resistor, value: 250 , ports: {N1: B, N2: X1}\nname: R2, type: Resistor, value: 39 k, ports: {N1: X1, N2: E}\nname: C1, type: Capacitor, value: 2.77 pF, ports: {Np: X1, Nn: E}\nname: C2, type: Capacitor, value: 0.2 pF, ports: {Np: X1, Nn: C}\nname: C3, type: Capacitor, value: 0.8 pF, ports: {Np: C, Nn: GND}\nname: R3, type: Resistor, value: 800 k, ports: {N1: C, N2: E}\nname: VCCS, type: VoltageControlledCurrentSource, value: V/260 , ports: {Np: C, Nn: E}\n]\nextrainfo:The circuit is a small-signal model of a BJT amplifier. It includes resistors, capacitors, and a voltage-controlled current source representing the transistor's operation. The nodes are labeled B, X1, E, and C, with the ground connected at GND. The circuit is designed for analyzing the frequency response and gain of the amplifier.\n\n(b)\n\nFIGURE 6.4 (a) Circuit of Example 6.1, and (b) the BJT's small-signal model values.\n\n#### Solution\n\nBy inspection, $I_{C} \\cong I_{E}=(5-0.7) / 43=0.1 \\mathrm{~mA}$. Following the usual steps, we obtain $g_{m}=1 /(260 \\Omega), r_{\\pi}=39 \\mathrm{k} \\Omega$, and $r_{o}=800 \\mathrm{k} \\Omega$. Additionally,\n\n$$\n\\begin{aligned}\n& C_{b}=\\tau_{F} g_{m}=\\frac{200 \\times 10^{-12}}{260} \\cong 0.77 \\mathrm{pF} \\\\\n& C_{j e} \\cong 2 C_{j e 0}=2.0 \\mathrm{pF} \\\\\n& C_{\\pi}=C_{b}+C_{j e} \\cong 2.77 \\mathrm{pF}\n\\end{aligned}\n$$\n\nTo determine $C_{\\mu}$, we note that $V_{C}=5-20 \\times 0.1=3 \\mathrm{~V}$, so $V_{B C}=V_{B}-V_{C}=$ $0-3=-3 \\mathrm{~V}$. For $C_{s}$, assuming the substrate is tied to the MNV ( -5 V ), $V_{S C}=V_{S}-V_{C}=-5-3=-8 \\mathrm{~V}$. Thus,\n\n$$\nC_{\\mu}=\\frac{0.5}{\\left(1-\\frac{-3}{0.6}\\right)^{0.5}} \\cong 0.2 \\mathrm{pF} \\quad C_{s}=\\frac{3}{\\left(1-\\frac{-8}{0.6}\\right)^{0.5}} \\cong 0.8 \\mathrm{pF}\n$$\n\nThe complete small-signal model is illustrated in Fig. 6.4b."
},
{
    "text": "We are now prepared to integrate all the aforementioned information into a small-signal BJT model, enabling us to analyze the high-frequency behavior of bipolar ICs. The outcome is depicted in Fig. 6.3, where small-signal voltages and currents, now frequency-dependent, are expressed using their Laplace transforms (denoted by uppercase letters with lowercase subscripts). Moving from right to left, we make the following observations:\n\n- Initially, we encounter the substrate capacitance $C_{s}$. Since the substrate of an npn BJT is linked to the MNV, a dc potential, it functions as a signal ground in our model. (Often, $C_{s}$ is omitted to simplify calculations.)\n- Next, we identify the base-collector junction capacitance $C_{\\mu}$. This capacitance is particularly interesting because its impact can be negligible in some scenarios, allowing it to be disregarded, while in others, its role is significantly amplified due to the Miller effect, making it the predominant capacitance in the circuit.\n- In parallel with $r_{\\pi}$, there is a capacitance $C_{\\pi}$ composed of two parts,\n\n$$\n\\begin{equation*}\nC_{\\pi}=C_{j e}+C_{b} \\tag{6.6}\n\\end{equation*}\n$$\n\nspecifically, the roughly constant junction component $C_{j e}\\left(\\cong 2 C_{j e 0}\\right)$, and the bias-dependent component $C_{b}\\left(=\\tau_{F} I_{C} / V_{T}\\right)$.\n\n- Referring to Fig. 6.1, we note that as current enters the base terminal $B$ and travels to the thin base region between the emitter and collector, it encounters some distributed resistance. This is essentially the bulk resistance $r_{b}$ of the moderately-doped $p$-type base region. Typically around $10^{2} \\Omega$ in monolithic BJTs, $r_{b}$ has been overlooked thus far because the voltage drop it causes in response to $i_{b}$ is usually insignificant compared to that caused by $r_{\\pi}$. However, we will see that $r_{b}$ generally cannot be ignored in high-frequency operation, as it restricts the dynamics of certain BJT configurations, especially the CE configuration.\n\nEXAMPLE 6.1 Determine the element values of the small-signal model for the BJT shown in Fig. $6.4 a$ using data from a typical high-voltage process: $\\beta_{0}=150, V_{A}=80 \\mathrm{~V}, r_{b}=250 \\Omega ; \\tau_{F}=$ $200 \\mathrm{ps} ; C_{j e 0}=1.0 \\mathrm{pF}, \\phi_{e}=0.8 \\mathrm{~V}, m_{e}=0.33 ; C_{\\mu 0}=0.5 \\mathrm{pF}, \\phi_{c}=0.6 \\mathrm{~V}, m_{c}=0.5$; $C_{s 0}=3.0 \\mathrm{pF}, \\phi_{s}=0.6 \\mathrm{~V}$, and $m_{s}=0.5$. Present your final circuit.\nimage_name:(a)\ndescription:\n[\nname: 20k, type: Resistor, value: 20k, ports: {N1: 5V, N2: X1}\nname: 43k, type: Resistor, value: 43k, ports: {N1: X2, N2: -5V}\nname: M1, type: NPN, ports: {C: X1, B: GND, E: X2}\n]\nextrainfo:The circuit is a common-emitter configuration with a BJT (M1) biased between +5V and -5V. Resistors 20k and 43k are used for biasing.\n\n(a)\nimage_name:(b)\ndescription:\n[\nname: R1, type: Resistor, value: 250 , ports: {N1: B, N2: X1}\nname: R2, type: Resistor, value: 39 k, ports: {N1: X1, N2: E}\nname: C1, type: Capacitor, value: 2.77 pF, ports: {Np: X1, Nn: E}\nname: C2, type: Capacitor, value: 0.2 pF, ports: {Np: X1, Nn: C}\nname: C3, type: Capacitor, value: 0.8 pF, ports: {Np: C, Nn: GND}\nname: R3, type: Resistor, value: 800 k, ports: {N1: C, N2: E}\nname: VCCS, type: VoltageControlledCurrentSource, value: V/260 , ports: {Np: C, Nn: E}\n]\nextrainfo:The circuit is a small-signal model of a BJT amplifier. It includes resistors, capacitors, and a voltage-controlled current source representing the transistor's operation. The nodes are labeled B, X1, E, and C, with the ground connected at GND. The circuit is designed for analyzing the frequency response and gain of the amplifier.\n\n(b)\n\nFIGURE 6.4 (a) Circuit of Example 6.1, and (b) the BJT's small-signal model values.\n\n#### Solution\n\nBy inspection, $I_{C} \\cong I_{E}=(5-0.7) / 43=0.1 \\mathrm{~mA}$. Following the usual procedure, we obtain $g_{m}=1 /(260 \\Omega), r_{\\pi}=39 \\mathrm{k} \\Omega$, and $r_{o}=800 \\mathrm{k} \\Omega$. Additionally,\n\n$$\n\\begin{aligned}\n& C_{b}=\\tau_{F} g_{m}=\\frac{200 \\times 10^{-12}}{260} \\cong 0.77 \\mathrm{pF} \\\\\n& C_{j e} \\cong 2 C_{j e 0}=2.0 \\mathrm{pF} \\\\\n& C_{\\pi}=C_{b}+C_{j e} \\cong 2.77 \\mathrm{pF}\n\\end{aligned}\n$$\n\nTo determine $C_{\\mu}$, we note that $V_{C}=5-20 \\times 0.1=3 \\mathrm{~V}$, thus $V_{B C}=V_{B}-V_{C}=$ $0-3=-3 \\mathrm{~V}$. For $C_{s}$, assuming the substrate is connected to the MNV ( -5 V ), we have $V_{S C}=V_{S}-V_{C}=-5-3=-8 \\mathrm{~V}$. Therefore,\n\n$$\nC_{\\mu}=\\frac{0.5}{\\left(1-\\frac{-3}{0.6}\\right)^{0.5}} \\cong 0.2 \\mathrm{pF} \\quad C_{s}=\\frac{3}{\\left(1-\\frac{-8}{0.6}\\right)^{0.5}} \\cong 0.8 \\mathrm{pF}\n$$\n\nThe complete small-signal model is illustrated in Fig. 6.4b."
},
{
    "text": "We are now prepared to integrate all the aforementioned information into a small-signal BJT model, enabling us to analyze the high-frequency behavior of bipolar ICs. This model is depicted in Fig. 6.3, where the small-signal voltages and currents, now frequency-dependent, are expressed using their Laplace transforms (denoted by uppercase letters with lowercase subscripts). Moving from right to left, we make the following observations:\n\n- Initially, we encounter the substrate capacitance $C_{s}$. Since the substrate of an npn BJT is connected to the MNV, a dc potential, it appears as a signal ground in our model. (Often, $C_{s}$ is omitted to simplify calculations.)\n- Next, we identify the base-collector junction capacitance $C_{\\mu}$. This capacitance is particularly interesting because its impact can be negligible in some scenarios, allowing it to be disregarded, while in others, its role is significantly amplified due to the Miller effect, making it the dominant capacitance in the circuit.\n- In parallel with $r_{\\pi}$, there is a capacitance $C_{\\pi}$ composed of two parts,\n\n$$\n\\begin{equation*}\nC_{\\pi}=C_{j e}+C_{b} \\tag{6.6}\n\\end{equation*}\n$$\n\nspecifically, the roughly constant junction component $C_{j e}\\left(\\cong 2 C_{j e 0}\\right)$, and the bias-dependent component $C_{b}\\left(=\\tau_{F} I_{C} / V_{T}\\right)$.\n\n- Referring to Fig. 6.1, we note that as current enters the base terminal $B$ and flows through the thin base region between the emitter and collector, it encounters some distributed resistance. This resistance is the bulk resistance $r_{b}$ of the moderately-doped $p$-type base region. Typically around $10^{2} \\Omega$ in monolithic BJTs, $r_{b}$ has been overlooked thus far because the voltage drop it causes due to $i_{b}$ is usually insignificant compared to that caused by $r_{\\pi}$. However, we will see that $r_{b}$ generally cannot be ignored in high-frequency operation, as it constrains the dynamics of certain BJT configurations, especially the CE configuration.\n\nEXAMPLE 6.1 Determine the element values for the small-signal model of the BJT shown in Fig. $6.4 a$ using data from a typical high-voltage process: $\\beta_{0}=150, V_{A}=80 \\mathrm{~V}, r_{b}=250 \\Omega ; \\tau_{F}=$ $200 \\mathrm{ps} ; C_{j e 0}=1.0 \\mathrm{pF}, \\phi_{e}=0.8 \\mathrm{~V}, m_{e}=0.33 ; C_{\\mu 0}=0.5 \\mathrm{pF}, \\phi_{c}=0.6 \\mathrm{~V}, m_{c}=0.5$; $C_{s 0}=3.0 \\mathrm{pF}, \\phi_{s}=0.6 \\mathrm{~V}$, and $m_{s}=0.5$. Present your final circuit.\nimage_name:(a)\ndescription:\n[\nname: 20k, type: Resistor, value: 20k, ports: {N1: 5V, N2: X1}\nname: 43k, type: Resistor, value: 43k, ports: {N1: X2, N2: -5V}\nname: M1, type: NPN, ports: {C: X1, B: GND, E: X2}\n]\nextrainfo:The circuit is a common-emitter configuration with a BJT (M1) biased between +5V and -5V. Resistors 20k and 43k are used for biasing.\n\n(a)\nimage_name:(b)\ndescription:\n[\nname: R1, type: Resistor, value: 250 , ports: {N1: B, N2: X1}\nname: R2, type: Resistor, value: 39 k, ports: {N1: X1, N2: E}\nname: C1, type: Capacitor, value: 2.77 pF, ports: {Np: X1, Nn: E}\nname: C2, type: Capacitor, value: 0.2 pF, ports: {Np: X1, Nn: C}\nname: C3, type: Capacitor, value: 0.8 pF, ports: {Np: C, Nn: GND}\nname: R3, type: Resistor, value: 800 k, ports: {N1: C, N2: E}\nname: VCCS, type: VoltageControlledCurrentSource, value: V/260 , ports: {Np: C, Nn: E}\n]\nextrainfo:The circuit is a small-signal model of a BJT amplifier. It includes resistors, capacitors, and a voltage-controlled current source representing the transistor's operation. The nodes are labeled B, X1, E, and C, with the ground connected at GND. The circuit is designed for analyzing the frequency response and gain of the amplifier.\n\n(b)\n\nFIGURE 6.4 (a) Circuit of Example 6.1, and (b) the BJT's small-signal model values.\n\n#### Solution\n\nBy inspection, $I_{C} \\cong I_{E}=(5-0.7) / 43=0.1 \\mathrm{~mA}$. Following the usual procedure, we obtain $g_{m}=1 /(260 \\Omega), r_{\\pi}=39 \\mathrm{k} \\Omega$, and $r_{o}=800 \\mathrm{k} \\Omega$. Additionally,\n\n$$\n\\begin{aligned}\n& C_{b}=\\tau_{F} g_{m}=\\frac{200 \\times 10^{-12}}{260} \\cong 0.77 \\mathrm{pF} \\\\\n& C_{j e} \\cong 2 C_{j e 0}=2.0 \\mathrm{pF} \\\\\n& C_{\\pi}=C_{b}+C_{j e} \\cong 2.77 \\mathrm{pF}\n\\end{aligned}\n$$\n\nTo determine $C_{\\mu}$, we note that $V_{C}=5-20 \\times 0.1=3 \\mathrm{~V}$, thus $V_{B C}=V_{B}-V_{C}=$ $0-3=-3 \\mathrm{~V}$. For $C_{s}$, assuming the substrate is tied to the MNV ( -5 V ), we have $V_{S C}=V_{S}-V_{C}=-5-3=-8 \\mathrm{~V}$. Consequently,\n\n$$\nC_{\\mu}=\\frac{0.5}{\\left(1-\\frac{-3}{0.6}\\right)^{0.5}} \\cong 0.2 \\mathrm{pF} \\quad C_{s}=\\frac{3}{\\left(1-\\frac{-8}{0.6}\\right)^{0.5}} \\cong 0.8 \\mathrm{pF}\n$$\n\nThe complete small-signal model is illustrated in Fig. 6.4b."
},
{
    "text": "We are now prepared to integrate all the aforementioned information into a small-signal BJT model, enabling us to analyze the high-frequency behavior of bipolar ICs. This model is depicted in Fig. 6.3, where the small-signal voltages and currents, now frequency-dependent, are expressed using their Laplace transforms (denoted by uppercase letters with lowercase subscripts). Moving from right to left, we make the following observations:\n\n- Initially, we identify the substrate capacitance $C_{s}$. Since the substrate of an npn BJT is connected to the MNV, a dc potential, it appears as a signal ground in our model. (Often, $C_{s}$ is omitted to simplify calculations.)\n- Next, we consider the base-collector junction capacitance $C_{\\mu}$. This capacitance is particularly interesting because its impact can be negligible in some scenarios, allowing it to be disregarded, while in others, due to the Miller effect, it becomes the predominant capacitance in the circuit.\n- In parallel with $r_{\\pi}$, there is a capacitance $C_{\\pi}$ composed of two parts,\n\n$$\n\\begin{equation*}\nC_{\\pi}=C_{j e}+C_{b} \\tag{6.6}\n\\end{equation*}\n$$\n\nspecifically, the roughly constant junction component $C_{j e}\\left(\\cong 2 C_{j e 0}\\right)$, and the bias-dependent component $C_{b}\\left(=\\tau_{F} I_{C} / V_{T}\\right)$.\n\n- Referring to Fig. 6.1, we note that as current enters the base terminal $B$ and moves to the thin base region between the emitter and collector, it encounters some distributed resistance. This resistance is the bulk resistance $r_{b}$ of the moderately-doped $p$-type base region. Typically around $10^{2} \\Omega$ in monolithic BJTs, $r_{b}$ has been previously ignored because the voltage drop it causes due to $i_{b}$ is usually minor compared to that caused by $r_{\\pi}$. However, we will see that $r_{b}$ generally cannot be overlooked in high-frequency operation, as it constrains the dynamics of certain BJT configurations, especially the CE configuration.\n\nEXAMPLE 6.1 Determine the element values of the small-signal model for the BJT in Fig. $6.4 a$ using data from a typical high-voltage process: $\\beta_{0}=150, V_{A}=80 \\mathrm{~V}, r_{b}=250 \\Omega ; \\tau_{F}=$ $200 \\mathrm{ps} ; C_{j e 0}=1.0 \\mathrm{pF}, \\phi_{e}=0.8 \\mathrm{~V}, m_{e}=0.33 ; C_{\\mu 0}=0.5 \\mathrm{pF}, \\phi_{c}=0.6 \\mathrm{~V}, m_{c}=0.5$; $C_{s 0}=3.0 \\mathrm{pF}, \\phi_{s}=0.6 \\mathrm{~V}$, and $m_{s}=0.5$. Present your final circuit.\nimage_name:(a)\ndescription:\n[\nname: 20k, type: Resistor, value: 20k, ports: {N1: 5V, N2: X1}\nname: 43k, type: Resistor, value: 43k, ports: {N1: X2, N2: -5V}\nname: M1, type: NPN, ports: {C: X1, B: GND, E: X2}\n]\nextrainfo:The circuit is a common-emitter configuration with a BJT (M1) biased between +5V and -5V. Resistors 20k and 43k are used for biasing.\n\n(a)\nimage_name:(b)\ndescription:\n[\nname: R1, type: Resistor, value: 250 , ports: {N1: B, N2: X1}\nname: R2, type: Resistor, value: 39 k, ports: {N1: X1, N2: E}\nname: C1, type: Capacitor, value: 2.77 pF, ports: {Np: X1, Nn: E}\nname: C2, type: Capacitor, value: 0.2 pF, ports: {Np: X1, Nn: C}\nname: C3, type: Capacitor, value: 0.8 pF, ports: {Np: C, Nn: GND}\nname: R3, type: Resistor, value: 800 k, ports: {N1: C, N2: E}\nname: VCCS, type: VoltageControlledCurrentSource, value: V/260 , ports: {Np: C, Nn: E}\n]\nextrainfo:The circuit is a small-signal model of a BJT amplifier. It includes resistors, capacitors, and a voltage-controlled current source representing the transistor's operation. The nodes are labeled B, X1, E, and C, with the ground connected at GND. The circuit is designed for analyzing the frequency response and gain of the amplifier.\n\n(b)\n\nFIGURE 6.4 (a) Circuit of Example 6.1, and (b) the BJT's small-signal model values.\n\n#### Solution\n\nBy inspection, $I_{C} \\cong I_{E}=(5-0.7) / 43=0.1 \\mathrm{~mA}$. Following the usual procedure, we obtain $g_{m}=1 /(260 \\Omega), r_{\\pi}=39 \\mathrm{k} \\Omega$, and $r_{o}=800 \\mathrm{k} \\Omega$. We also have\n\n$$\n\\begin{aligned}\n& C_{b}=\\tau_{F} g_{m}=\\frac{200 \\times 10^{-12}}{260} \\cong 0.77 \\mathrm{pF} \\\\\n& C_{j e} \\cong 2 C_{j e 0}=2.0 \\mathrm{pF} \\\\\n& C_{\\pi}=C_{b}+C_{j e} \\cong 2.77 \\mathrm{pF}\n\\end{aligned}\n$$\n\nTo determine $C_{\\mu}$, we note that $V_{C}=5-20 \\times 0.1=3 \\mathrm{~V}$, so $V_{B C}=V_{B}-V_{C}=$ $0-3=-3 \\mathrm{~V}$. For $C_{s}$, assuming the substrate is tied to the MNV ( -5 V ), we get $V_{S C}=V_{S}-V_{C}=-5-3=-8 \\mathrm{~V}$. Then,\n\n$$\nC_{\\mu}=\\frac{0.5}{\\left(1-\\frac{-3}{0.6}\\right)^{0.5}} \\cong 0.2 \\mathrm{pF} \\quad C_{s}=\\frac{3}{\\left(1-\\frac{-8}{0.6}\\right)^{0.5}} \\cong 0.8 \\mathrm{pF}\n$$\n\nThe complete small-signal model is illustrated in Fig. 6.4b."
},
{
    "text": "We are now prepared to integrate all the preceding information into a small-signal BJT model, enabling us to analyze the high-frequency behavior of bipolar ICs. This model is depicted in Fig. 6.3, where the small-signal voltages and currents, now frequency-dependent, are expressed using their Laplace transforms (denoted by uppercase letters with lowercase subscripts). Moving from right to left, we make the following observations:\n\n- Initially, we encounter the substrate capacitance $C_{s}$. Since the substrate of an npn BJT is connected to the MNV, a dc potential, it appears as a signal ground in our model. (Often, $C_{s}$ is omitted to simplify calculations.)\n- Next, we identify the base-collector junction capacitance $C_{\\mu}$. This capacitance is particularly interesting because its impact can be negligible in some scenarios, allowing it to be disregarded, while in others, its effect is significantly amplified due to the Miller effect, making it the dominant capacitance in the circuit.\n- In parallel with $r_{\\pi}$, there is a capacitance $C_{\\pi}$ composed of two parts,\n\n$$\n\\begin{equation*}\nC_{\\pi}=C_{j e}+C_{b} \\tag{6.6}\n\\end{equation*}\n$$\n\nspecifically, the roughly constant junction component $C_{j e}\\left(\\cong 2 C_{j e 0}\\right)$, and the bias-dependent component $C_{b}\\left(=\\tau_{F} I_{C} / V_{T}\\right)$.\n\n- Referring to Fig. 6.1, we note that as current enters the base terminal $B$ and flows through the thin base region separating the emitter and collector, it encounters some distributed resistance. This resistance is the bulk resistance $r_{b}$ of the moderately-doped $p$-type base region. Typically around $10^{2} \\Omega$ in monolithic BJTs, $r_{b}$ has been overlooked so far because the voltage drop it causes due to $i_{b}$ is usually insignificant compared to that caused by $r_{\\pi}$. However, we will see that $r_{b}$ generally cannot be ignored in high-frequency operation, as it restricts the dynamics of certain BJT configurations, especially the CE configuration.\n\nEXAMPLE 6.1 Determine the element values of the small-signal model for the BJT shown in Fig. $6.4 a$ using data from a typical high-voltage process: $\\beta_{0}=150, V_{A}=80 \\mathrm{~V}, r_{b}=250 \\Omega ; \\tau_{F}=$ $200 \\mathrm{ps} ; C_{j e 0}=1.0 \\mathrm{pF}, \\phi_{e}=0.8 \\mathrm{~V}, m_{e}=0.33 ; C_{\\mu 0}=0.5 \\mathrm{pF}, \\phi_{c}=0.6 \\mathrm{~V}, m_{c}=0.5$; $C_{s 0}=3.0 \\mathrm{pF}, \\phi_{s}=0.6 \\mathrm{~V}$, and $m_{s}=0.5$. Present your final circuit.\nimage_name:(a)\ndescription:\n[\nname: 20k, type: Resistor, value: 20k, ports: {N1: 5V, N2: X1}\nname: 43k, type: Resistor, value: 43k, ports: {N1: X2, N2: -5V}\nname: M1, type: NPN, ports: {C: X1, B: GND, E: X2}\n]\nextrainfo:The circuit is a common-emitter configuration with a BJT (M1) biased between +5V and -5V. Resistors 20k and 43k are used for biasing.\n\n(a)\nimage_name:(b)\ndescription:\n[\nname: R1, type: Resistor, value: 250 , ports: {N1: B, N2: X1}\nname: R2, type: Resistor, value: 39 k, ports: {N1: X1, N2: E}\nname: C1, type: Capacitor, value: 2.77 pF, ports: {Np: X1, Nn: E}\nname: C2, type: Capacitor, value: 0.2 pF, ports: {Np: X1, Nn: C}\nname: C3, type: Capacitor, value: 0.8 pF, ports: {Np: C, Nn: GND}\nname: R3, type: Resistor, value: 800 k, ports: {N1: C, N2: E}\nname: VCCS, type: VoltageControlledCurrentSource, value: V/260 , ports: {Np: C, Nn: E}\n]\nextrainfo:The circuit is a small-signal model of a BJT amplifier. It includes resistors, capacitors, and a voltage-controlled current source representing the transistor's operation. The nodes are labeled B, X1, E, and C, with the ground connected at GND. The circuit is designed for analyzing the frequency response and gain of the amplifier.\n\n(b)\n\nFIGURE 6.4 (a) Circuit of Example 6.1, and (b) the BJT's small-signal model values.\n\n#### Solution\n\nBy inspection, $I_{C} \\cong I_{E}=(5-0.7) / 43=0.1 \\mathrm{~mA}$. Following the usual procedure, we obtain $g_{m}=1 /(260 \\Omega), r_{\\pi}=39 \\mathrm{k} \\Omega$, and $r_{o}=800 \\mathrm{k} \\Omega$. Additionally,\n\n$$\n\\begin{aligned}\n& C_{b}=\\tau_{F} g_{m}=\\frac{200 \\times 10^{-12}}{260} \\cong 0.77 \\mathrm{pF} \\\\\n& C_{j e} \\cong 2 C_{j e 0}=2.0 \\mathrm{pF} \\\\\n& C_{\\pi}=C_{b}+C_{j e} \\cong 2.77 \\mathrm{pF}\n\\end{aligned}\n$$\n\nTo determine $C_{\\mu}$, we note that $V_{C}=5-20 \\times 0.1=3 \\mathrm{~V}$, so $V_{B C}=V_{B}-V_{C}=$ $0-3=-3 \\mathrm{~V}$. For $C_{s}$, assuming the substrate is connected to the MNV ( -5 V ), we have $V_{S C}=V_{S}-V_{C}=-5-3=-8 \\mathrm{~V}$. Thus,\n\n$$\nC_{\\mu}=\\frac{0.5}{\\left(1-\\frac{-3}{0.6}\\right)^{0.5}} \\cong 0.2 \\mathrm{pF} \\quad C_{s}=\\frac{3}{\\left(1-\\frac{-8}{0.6}\\right)^{0.5}} \\cong 0.8 \\mathrm{pF}\n$$\n\nThe complete small-signal model is illustrated in Fig. 6.4b."
},
{
    "text": "We are now prepared to integrate all the preceding information into a small-signal BJT model, enabling us to analyze the high-frequency behavior of bipolar ICs. This is illustrated in Fig. 6.3, where the small-signal voltages and currents, now frequency-dependent, are depicted using their Laplace transforms (upper-case letters with lowercase subscripts). Moving from right to left, we make the following observations:\n\n- Initially, we encounter the substrate capacitance $C_{s}$. Since the substrate of an npn BJT is connected to the MNV, a dc potential, it appears as a signal ground in our model. (Often, $C_{s}$ is omitted to simplify calculations.)\n- Next, we identify the base-collector junction capacitance $C_{\\mu}$. This capacitance is particularly interesting because its impact can be negligible in some scenarios, allowing it to be disregarded, while in others, due to the Miller effect, it becomes the dominant capacitance in the circuit.\n- In parallel with $r_{\\pi}$, there is a capacitance $C_{\\pi}$ composed of two parts,\n\n$$\n\\begin{equation*}\nC_{\\pi}=C_{j e}+C_{b} \\tag{6.6}\n\\end{equation*}\n$$\n\nspecifically, the roughly constant junction component $C_{j e}\\left(\\cong 2 C_{j e 0}\\right)$, and the bias-dependent component $C_{b}\\left(=\\tau_{F} I_{C} / V_{T}\\right)$.\n\n- Referring to Fig. 6.1, we note that as current enters the base terminal $B$ and moves to the thin base region between the emitter and collector, it encounters some distributed resistance. This is the bulk resistance $r_{b}$ of the moderately-doped $p$-type base region. Typically around $10^{2} \\Omega$ in monolithic BJTs, $r_{b}$ has been overlooked thus far because the voltage drop it causes due to $i_{b}$ is usually minor compared to that caused by $r_{\\pi}$. However, we will see that $r_{b}$ generally cannot be ignored in high-frequency operation, as it restricts the dynamics of certain BJT configurations, especially the CE configuration.\n\nEXAMPLE 6.1 Determine the element values of the small-signal model for the BJT in Fig. $6.4 a$ using data from a typical high-voltage process: $\\beta_{0}=150, V_{A}=80 \\mathrm{~V}, r_{b}=250 \\Omega ; \\tau_{F}=$ $200 \\mathrm{ps} ; C_{j e 0}=1.0 \\mathrm{pF}, \\phi_{e}=0.8 \\mathrm{~V}, m_{e}=0.33 ; C_{\\mu 0}=0.5 \\mathrm{pF}, \\phi_{c}=0.6 \\mathrm{~V}, m_{c}=0.5$; $C_{s 0}=3.0 \\mathrm{pF}, \\phi_{s}=0.6 \\mathrm{~V}$, and $m_{s}=0.5$. Present your final circuit.\nimage_name:(a)\ndescription:\n[\nname: 20k, type: Resistor, value: 20k, ports: {N1: 5V, N2: X1}\nname: 43k, type: Resistor, value: 43k, ports: {N1: X2, N2: -5V}\nname: M1, type: NPN, ports: {C: X1, B: GND, E: X2}\n]\nextrainfo:The circuit is a common-emitter configuration with a BJT (M1) biased between +5V and -5V. Resistors 20k and 43k are used for biasing.\n\n(a)\nimage_name:(b)\ndescription:\n[\nname: R1, type: Resistor, value: 250 , ports: {N1: B, N2: X1}\nname: R2, type: Resistor, value: 39 k, ports: {N1: X1, N2: E}\nname: C1, type: Capacitor, value: 2.77 pF, ports: {Np: X1, Nn: E}\nname: C2, type: Capacitor, value: 0.2 pF, ports: {Np: X1, Nn: C}\nname: C3, type: Capacitor, value: 0.8 pF, ports: {Np: C, Nn: GND}\nname: R3, type: Resistor, value: 800 k, ports: {N1: C, N2: E}\nname: VCCS, type: VoltageControlledCurrentSource, value: V/260 , ports: {Np: C, Nn: E}\n]\nextrainfo:The circuit is a small-signal model of a BJT amplifier. It includes resistors, capacitors, and a voltage-controlled current source representing the transistor's operation. The nodes are labeled B, X1, E, and C, with the ground connected at GND. The circuit is designed for analyzing the frequency response and gain of the amplifier.\n\n(b)\n\nFIGURE 6.4 (a) Circuit of Example 6.1, and (b) the BJT's small-signal model values.\n\n#### Solution\n\nBy inspection, $I_{C} \\cong I_{E}=(5-0.7) / 43=0.1 \\mathrm{~mA}$. Proceeding as usual, we obtain $g_{m}=1 /(260 \\Omega), r_{\\pi}=39 \\mathrm{k} \\Omega$, and $r_{o}=800 \\mathrm{k} \\Omega$. We also have\n\n$$\n\\begin{aligned}\n& C_{b}=\\tau_{F} g_{m}=\\frac{200 \\times 10^{-12}}{260} \\cong 0.77 \\mathrm{pF} \\\\\n& C_{j e} \\cong 2 C_{j e 0}=2.0 \\mathrm{pF} \\\\\n& C_{\\pi}=C_{b}+C_{j e} \\cong 2.77 \\mathrm{pF}\n\\end{aligned}\n$$\n\nTo determine $C_{\\mu}$, we note that $V_{C}=5-20 \\times 0.1=3 \\mathrm{~V}$, so $V_{B C}=V_{B}-V_{C}=$ $0-3=-3 \\mathrm{~V}$. For $C_{s}$, assume the substrate is tied to the MNV ( -5 V ), so $V_{S C}=V_{S}-V_{C}=-5-3=-8 \\mathrm{~V}$. Then,\n\n$$\nC_{\\mu}=\\frac{0.5}{\\left(1-\\frac{-3}{0.6}\\right)^{0.5}} \\cong 0.2 \\mathrm{pF} \\quad C_{s}=\\frac{3}{\\left(1-\\frac{-8}{0.6}\\right)^{0.5}} \\cong 0.8 \\mathrm{pF}\n$$\n\nThe complete small-signal model is depicted in Fig. 6.4b."
},
{
    "text": "We are now prepared to integrate all the aforementioned information into a small-signal BJT model, enabling us to analyze the high-frequency behavior of bipolar ICs. This model is depicted in Fig. 6.3, where the small-signal voltages and currents, now frequency-dependent, are expressed using their Laplace transforms (uppercase letters with lowercase subscripts). Moving from right to left, we make the following observations:\n\n- Initially, we encounter the substrate capacitance $C_{s}$. Since the substrate of an npn BJT is connected to the MNV, a dc potential, it appears as a signal ground in our model. (Often, $C_{s}$ is omitted to simplify calculations.)\n- Next, we identify the base-collector junction capacitance $C_{\\mu}$. This capacitance is particularly interesting because its impact can be negligible in some scenarios, allowing it to be disregarded, while in others, its role is significantly amplified due to the Miller effect, making it the dominant capacitance in the circuit.\n- In parallel with $r_{\\pi}$, there is a capacitance $C_{\\pi}$ composed of two parts,\n\n$$\n\\begin{equation*}\nC_{\\pi}=C_{j e}+C_{b} \\tag{6.6}\n\\end{equation*}\n$$\n\nspecifically, the roughly constant junction component $C_{j e}\\left(\\cong 2 C_{j e 0}\\right)$, and the bias-dependent component $C_{b}\\left(=\\tau_{F} I_{C} / V_{T}\\right)$.\n\n- Referring to Fig. 6.1, we note that as current enters the base terminal $B$ and moves to the thin base region between the emitter and collector, it encounters some distributed resistance. This is simply the bulk resistance $r_{b}$ of the moderately-doped $p$-type base region. Typically around $10^{2} \\Omega$ in monolithic BJTs, $r_{b}$ has been overlooked so far because the voltage drop it causes due to $i_{b}$ is usually insignificant compared to that caused by $r_{\\pi}$. However, we will see that $r_{b}$ generally cannot be ignored in high-frequency operation, as it constrains the dynamics of certain BJT configurations, especially the CE configuration.\n\nEXAMPLE 6.1 Determine the element values of the small-signal model for the BJT in Fig. $6.4 a$ using data from a typical high-voltage process: $\\beta_{0}=150, V_{A}=80 \\mathrm{~V}, r_{b}=250 \\Omega ; \\tau_{F}=$ $200 \\mathrm{ps} ; C_{j e 0}=1.0 \\mathrm{pF}, \\phi_{e}=0.8 \\mathrm{~V}, m_{e}=0.33 ; C_{\\mu 0}=0.5 \\mathrm{pF}, \\phi_{c}=0.6 \\mathrm{~V}, m_{c}=0.5$; $C_{s 0}=3.0 \\mathrm{pF}, \\phi_{s}=0.6 \\mathrm{~V}$, and $m_{s}=0.5$. Present your final circuit.\nimage_name:(a)\ndescription:\n[\nname: 20k, type: Resistor, value: 20k, ports: {N1: 5V, N2: X1}\nname: 43k, type: Resistor, value: 43k, ports: {N1: X2, N2: -5V}\nname: M1, type: NPN, ports: {C: X1, B: GND, E: X2}\n]\nextrainfo:The circuit is a common-emitter configuration with a BJT (M1) biased between +5V and -5V. Resistors 20k and 43k are used for biasing.\n\n(a)\nimage_name:(b)\ndescription:\n[\nname: R1, type: Resistor, value: 250 , ports: {N1: B, N2: X1}\nname: R2, type: Resistor, value: 39 k, ports: {N1: X1, N2: E}\nname: C1, type: Capacitor, value: 2.77 pF, ports: {Np: X1, Nn: E}\nname: C2, type: Capacitor, value: 0.2 pF, ports: {Np: X1, Nn: C}\nname: C3, type: Capacitor, value: 0.8 pF, ports: {Np: C, Nn: GND}\nname: R3, type: Resistor, value: 800 k, ports: {N1: C, N2: E}\nname: VCCS, type: VoltageControlledCurrentSource, value: V/260 , ports: {Np: C, Nn: E}\n]\nextrainfo:The circuit is a small-signal model of a BJT amplifier. It includes resistors, capacitors, and a voltage-controlled current source representing the transistor's operation. The nodes are labeled B, X1, E, and C, with the ground connected at GND. The circuit is designed for analyzing the frequency response and gain of the amplifier.\n\n(b)\n\nFIGURE 6.4 (a) Circuit of Example 6.1, and (b) the BJT's small-signal model values.\n\n#### Solution\n\nBy inspection, $I_{C} \\cong I_{E}=(5-0.7) / 43=0.1 \\mathrm{~mA}$. Following the usual procedure, we obtain $g_{m}=1 /(260 \\Omega), r_{\\pi}=39 \\mathrm{k} \\Omega$, and $r_{o}=800 \\mathrm{k} \\Omega$. We also have\n\n$$\n\\begin{aligned}\n& C_{b}=\\tau_{F} g_{m}=\\frac{200 \\times 10^{-12}}{260} \\cong 0.77 \\mathrm{pF} \\\\\n& C_{j e} \\cong 2 C_{j e 0}=2.0 \\mathrm{pF} \\\\\n& C_{\\pi}=C_{b}+C_{j e} \\cong 2.77 \\mathrm{pF}\n\\end{aligned}\n$$\n\nTo determine $C_{\\mu}$, we note that $V_{C}=5-20 \\times 0.1=3 \\mathrm{~V}$, so $V_{B C}=V_{B}-V_{C}=$ $0-3=-3 \\mathrm{~V}$. For $C_{s}$, assume the substrate is connected to the MNV ( -5 V ), resulting in $V_{S C}=V_{S}-V_{C}=-5-3=-8 \\mathrm{~V}$. Then,\n\n$$\nC_{\\mu}=\\frac{0.5}{\\left(1-\\frac{-3}{0.6}\\right)^{0.5}} \\cong 0.2 \\mathrm{pF} \\quad C_{s}=\\frac{3}{\\left(1-\\frac{-8}{0.6}\\right)^{0.5}} \\cong 0.8 \\mathrm{pF}\n$$\n\nThe complete small-signal model is illustrated in Fig. 6.4b."
},
{
    "text": "The transition frequency \\( f_T \\) of a BJT is a measure of its high-speed operation capability, defined as the frequency at which the small-signal current gain \\( |\\beta(j f)| \\) falls to unity. It can be calculated or measured using the AC concept illustrated in Fig. 6.5. By applying a small AC current \\( i_b \\) to the base and measuring the resulting AC current \\( i_c \\) with the collector at AC ground, we can determine the current gain \\( \\beta \\) as \\( \\beta = I_c / I_b \\), where \\( I_b \\) and \\( I_c \\) are the Laplace transforms of \\( i_b \\) and \\( i_c \\), respectively. The transition frequency \\( f_T \\) is then found as the frequency at which \\( |\\beta(f_T)| = 1 \\) or 0 dB.\n\nIn the equivalent circuit of Fig. 6.5b, shorting the collector to ground makes \\( r_o \\) and \\( C_s \\) insignificant, and \\( C_\\mu \\) is placed in parallel with \\( C_\\pi \\). This allows us to apply Ohm's law and write the voltage \\( V_\\pi \\) as \\( V_\\pi = [r_\\pi || (1/(s(C_\\pi + C_\\mu)))] I_b \\), where \\( s \\) is the complex frequency. It is found that, over the frequency range of interest, the current fed forward via \\( C_\\mu \\) is negligible compared to \\( g_m V_\\pi \\), allowing us to approximate \\( I_c \\cong g_m V_\\pi \\). By letting \\( g_m r_\\pi \\rightarrow \\beta_0 \\) and solving for the ratio \\( I_c / I_b \\), we obtain \\( \\beta(s) = I_c / I_b = \\beta_0 / (1 + s r_\\pi (C_\\pi + C_\\mu)) \\).\n\nWe focus on the transistor's AC steady-state response, or frequency response, and replace \\( s \\) with \\( j\\omega \\) (or \\( j2\\pi f \\)) to get \\( \\beta(j\\omega) = \\beta_0 / (1 + j\\omega/\\omega_\\beta) \\), where \\( \\omega_\\beta = 1 / (r_\\pi (C_\\pi + C_\\mu)) \\).\n\nThe magnitude of the current gain is plotted on logarithmic scales as a Bode plot, as shown in Fig. 6.6. The plot reveals the low-frequency asymptote \\( |\\beta(j\\omega)| \\rightarrow \\beta_0 \\) and the high-frequency asymptote \\( |\\beta(j\\omega)| \\rightarrow \\beta_0 \\omega_\\beta / \\omega \\). The gain-bandwidth product (GBP) is defined as \\( \\mathrm{GBP} = |\\beta| \\times \\omega \\) and is found to be constant with frequency. The transition frequency \\( \\omega_T \\) is where \\( |\\beta(j\\omega)| \\) drops to unity, and it is related to the GBP and \\( \\omega_\\beta \\) through \\( \\omega_T = \\beta_0 \\omega_\\beta \\).\n\nThe transition frequency \\( f_T \\) can be expressed in terms of the bias current \\( I_C \\) and the junction capacitances \\( C_{je} \\) and \\( C_\\mu \\), as well as the forward transit time \\( \\tau_F \\). At low collector currents, \\( f_T \\) is dominated by \\( C_{je} + C_\\mu \\) and increases with \\( I_C \\). At high collector currents, \\( f_T \\) saturates at \\( f_{T(\\max)} = 1/(2\\pi\\tau_F) \\), indicating the ultimate limit on \\( f_T \\). The graph in Fig. 6.7 shows the relationship between \\( f_T \\) and \\( I_C \\), highlighting the transition from an increasing trend to a saturation region, followed by a decline at very high collector currents.\n\nUsing Einstein's relation, \\( f_{T(\\max)} \\) can also be expressed in terms of the electron mobility \\( \\mu_n \\), the base width \\( W_B \\), and the thermal voltage \\( V_T \\). For fast operation, a BJT should have a very narrow base and be of the npn type, as electrons are more mobile than holes."
},
{
    "text": "Rephrased Text:\n\nThe capability of a BJT to operate at high frequencies is typically quantified by the transition frequency, denoted as $f_{T}$, which is the frequency at which the small-signal current gain $|\\beta(j f)|$ falls to 1. This frequency is a measure of the BJT's performance in high-speed applications and can be determined either through calculation or measurement using the AC concept illustrated in Fig. 6.5. To do this, a small AC current $i_{b}$ is applied to the base, and the resulting AC current $i_{c}$ is measured with the collector grounded. The current gain $\\beta$ is then calculated as the ratio of $I_{c}$ to $I_{b}$, where $I_{b}$ and $I_{c}$ are the Laplace transforms of $i_{b}$ and $i_{c}$, respectively. The transition frequency $f_{T}$ is found as the frequency where $\\left|\\beta\\left(f_{T}\\right)\\right|=1$, corresponding to 0 dB.\n\nAnalyzing the equivalent circuit in Fig. $6.5 b$, we note that grounding the collector makes $r_{o}$ and $C_{s}$ insignificant, while $C_{\\mu}$ becomes parallel to $C_{\\pi}$. Using Ohm's law, we can write the voltage across the base-emitter junction as\n\n$$\nV_{\\pi}=\\left[r_{\\pi} || \\frac{1}{s\\left(C_{\\pi}+C_{\\mu}\\right)}\\right] I_{b}=\\frac{r_{\\pi} I_{b}}{1+s r_{\\pi}\\left(C_{\\pi}+C_{\\mu}\\right)}\n$$\n\nwhere $s$ is the complex frequency. It is found (as detailed in Exercise 6.1) that over the frequency range of interest, the current fed forward via $C_{\\mu}$ is insignificant compared to $g_{m} V_{\\pi}$, allowing us to approximate the collector current as\n\n$$\nI_{c} \\cong g_{m} V_{\\pi}=\\frac{g_{m} r_{\\pi}}{1+s r_{\\pi}\\left(C_{\\pi}+C_{\\mu}\\right)} I_{b}\n$$\n\nBy setting $g_{m} r_{\\pi} \\rightarrow \\beta_{0}$ and solving for the ratio $I_{c} / I_{b}$, we obtain\n\n$$\n\\beta(s)=\\frac{I_{c}}{I_{b}}=\\frac{\\beta_{0}}{1+s r_{\\pi}\\left(C_{\\pi}+C_{\\mu}\\right)}\n$$\n\nFor the AC steady-state response, also known as the frequency response, we replace $s$ with $j \\omega$ (or $s \\rightarrow j 2 \\pi f$) to get\n\n$$\n\\beta(j \\omega)=\\frac{\\beta_{0}}{1+j \\omega / \\omega_{\\beta}}\n$$\n\nwhere\n\n$$\n\\omega_{\\beta}=\\frac{1}{r_{\\pi}\\left(C_{\\pi}+C_{\\mu}\\right)}\n$$\n\nThe BJT's frequency response and the determination of the cutoff frequency $f_{T}$ are analyzed using the small-signal model depicted in Fig. 6.5 (a), which includes resistors, capacitors, and a voltage-controlled current source. The equivalent circuit in Fig. 6.5 (b) represents the small-signal model of an NPN transistor amplifier circuit, incorporating resistors, capacitors, and a voltage-controlled current source to model the transistor's AC behavior.\n\nThe Bode plot in Fig. 6.6 illustrates the magnitude of the current gain $|\\beta(j\\omega)|$ for the small-signal equivalent NPN transistor amplifier circuit. The plot is on logarithmic scales, with frequency $\\omega$ on the horizontal axis in decades and magnitude $|\\beta(j\\omega)|$ in decibels (dB) on the vertical axis.\n\nThe magnitude of the current gain is given by\n\n$$\n|\\beta(j \\omega)|=\\frac{\\beta_{0}}{\\sqrt{1+\\left(\\omega / \\omega_{\\beta}\\right)^{2}}}\n$$\n\nand is plotted on logarithmic scales with $\\omega$ in decades and magnitude in decibels. The resulting plot, known as the magnitude Bode plot, is a standard representation of the frequency response.\n\nFor frequencies much lower than $\\omega \\beta$, the current gain approaches $\\beta_{0}$, which is the frequency range of interest up to this point. For frequencies much higher than $\\omega_{\\beta}$, the current gain decreases inversely with frequency, and the gain-bandwidth product (GBP) remains constant. The frequency $\\omega_{T}$ at which the gain drops to unity, or 0 dB, is known as the transition frequency.\n\nThe transition frequency $f_{T}$ can be expressed as\n\n$$\nf_{T}=\\frac{g_{m}}{2 \\pi\\left(C_{\\pi}+C_{\\mu}\\right)}\n$$\n\nFor monolithic BJTs, $f_{T}$ typically ranges from a few hundred MHz to tens of GHz.\n\nThe graph in Fig. 6.7 shows the relationship between the transition frequency $f_{T}$ and the collector current $I_{C}$ for a BJT. The graph is plotted on a logarithmic scale for the $I_{C}$ axis, and the $f_{T}$ axis appears to be linear. At low collector current levels, $f_{T}$ increases linearly with $I_{C}$, dominated by the combined effect of the junction capacitance $C_{je}$ and the base-collector capacitance $C_\\mu$. As $I_{C}$ increases, $f_{T}$ reaches a plateau, indicating a saturation point, and then declines at very high collector current levels due to the increase in $\\tau_F$ caused by high-level injection and other effects.\n\nUsing Einstein's relation, the maximum transition frequency can be expressed as\n\n$$\nf_{T(\\max )}=\\frac{1}{\\pi} \\frac{\\mu_{n}}{W_{B}^{2}} V_{T}\n$$\n\nfor an npn BJT, where $\\mu_{n}$ is the electron mobility and $W_{B}$ is the base width. For a pnp BJT, replace $\\mu_{n}$ with $\\mu_{p}$, the hole mobility. To achieve fast operation, a BJT should be fabricated with a narrow base and should be of the npn type since electrons are more mobile than holes."
},
{
    "text": "It is standard practice to define the frequency capabilities of a BJT by the transition frequency, $f_{T}$, which signifies the frequency at which the small-signal current gain, $|\\beta(j f)|$, falls to 1. This parameter is employed as a benchmark for evaluating high-speed performance and can be derived through calculation or measurement using the AC principles illustrated in Fig. 6.5. Specifically, we introduce a small AC current, $i_{b}$, to the base, measure the AC current, $i_{c}$, with the collector grounded, and calculate the ratio $\\beta=I_{c} / I_{b}$, with $I_{b}$ and $I_{c}$ representing the Laplace transforms of $i_{b}$ and $i_{c}$. $f_{T}$ is then determined as the frequency where $\\left|\\beta\\left(f_{T}\\right)\\right|=1$, or 0 dB.\n\nAnalyzing the equivalent circuit in Fig. 6.5(b), it becomes evident that grounding the collector renders $r_{o}$ and $C_{s}$ inconsequential and places $C_{\\mu}$ in parallel with $C_{\\pi}$. Consequently, we can apply Ohm's law to express\n\n$$\nV_{\\pi}=\\left[r_{\\pi} / / \\frac{1}{s\\left(C_{\\pi}+C_{\\mu}\\right)}\\right] I_{b}=\\frac{r_{\\pi} I_{b}}{1+s r_{\\pi}\\left(C_{\\pi}+C_{\\mu}\\right)}\n$$\n\nHere, $s$ denotes the complex frequency. It is evident (as detailed in Exercise 6.1 below) that within the frequency range of interest, the current channeled through $C_{\\mu}$ is trivial compared to $g_{m} V_{\\pi}$, allowing us to approximate\n\n$$\nI_{c} \\cong g_{m} V_{\\pi}=\\frac{g_{m} r_{\\pi}}{1+s r_{\\pi}\\left(C_{\\pi}+C_{\\mu}\\right)} I_{b}\n$$\n\nUpon substituting $g_{m} r_{\\pi} \\rightarrow \\beta_{0}$ and solving for the ratio $I_{c} / I_{b}$, we obtain\n\n$$\n\\beta(s)=\\frac{I_{c}}{I_{b}}=\\frac{\\beta_{0}}{1+s r_{\\pi}\\left(C_{\\pi}+C_{\\mu}\\right)}\n$$\n\nOur primary focus is on the AC steady-state response of the transistor, also known as the frequency response. Hence, we substitute $s \\rightarrow j \\omega$ (or $s \\rightarrow j 2 \\pi f$) to derive\n\n$$\n\\begin{equation*}\n\\beta(j \\omega)=\\frac{\\beta_{0}}{1+j \\omega / \\omega_{\\beta}} \\tag{6.7}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\n\\omega_{\\beta}=\\frac{1}{r_{\\pi}\\left(C_{\\pi}+C_{\\mu}\\right)} \\tag{6.8}\n\\end{equation*}\n$$\n\nFIGURE 6.5 (a) AC circuit to find $f_{T}$, and (b) its small-signal equivalent.\n\nThe image descriptions provided for Figures 6.5 (a) and (b) illustrate the circuits used to assess the transistor's frequency response and determine the cutoff frequency $f_{T}$. These descriptions detail the components of the small-signal models, which include resistors, capacitors, and a voltage-controlled current source to analyze the AC characteristics.\n\nFIGURE 6.6 Bode plot of $|\\beta(j \\omega)|$.\n\nThe Bode plot depicted in Figure 6.6 shows the magnitude of the current gain, $|\\beta(j\\omega)|$, for a small-signal equivalent NPN transistor amplifier circuit. This plot is presented on logarithmic scales, with frequency $\\omega$ on the horizontal axis and magnitude $|\\beta(j\\omega)|$ in decibels (dB) on the vertical axis.\n\nThe plot indicates a constant magnitude $\\beta_0$ at lower frequencies, followed by a decrease in magnitude as the frequency approaches $\\omega_\\beta$. The slope of $-20 \\text{ dB/dec}$ signifies a first-order system roll-off. Key features include the initial magnitude level $\\beta_0$, the pole frequency $\\omega_\\beta$, and the transition frequency $\\omega_T$.\n\nSince the denominator of $\\beta(s)$ becomes zero at $s=-\\omega_{\\beta}$, causing $\\beta(s)$ to approach infinity, $\\omega_{\\beta}$ is termed the pole frequency (refer to Bode plots in Appendix 6A). The magnitude of the current gain is expressed as\n\n$$\n\\begin{equation*}\n|\\beta(j \\omega)|=\\frac{\\beta_{0}}{\\sqrt{1+\\left(\\omega / \\omega_{\\beta}\\right)^{2}}} \\tag{6.9}\n\\end{equation*}\n$$\n\nand is plotted on logarithmic scales, with $\\omega$ in decades (or octaves) and magnitude in decibels. The resulting plot, known as the magnitude Bode plot, is depicted in Fig. 6.6 and exhibits several notable observations:\n\n- For $\\omega \\ll \\omega \\beta$, Eq. (6.9) indicates a low-frequency asymptote of\n\n$$\n\\begin{equation*}\n|\\beta(j \\omega)| \\rightarrow \\beta_{0} \\tag{6.10}\n\\end{equation*}\n$$\n\nThis corresponds to the frequency range considered up to this point.\n\n- For $\\omega \\gg \\omega_{\\beta}$, Eq. (6.9) suggests a high-frequency asymptote of\n\n$$\n|\\beta(j \\omega)| \\rightarrow \\frac{\\beta_{0}}{\\omega / \\omega_{\\beta}}=\\frac{\\beta_{0} \\omega_{\\beta}}{\\omega}\n$$\n\nDefining the gain-bandwidth product $\\mathrm{GBP}=|\\beta| \\times \\omega$, we observe that for $\\omega \\gg \\omega_{\\beta}$, the GBP remains constant:\n\n$$\n\\begin{equation*}\n\\mathrm{GBP}=|\\beta(j \\omega)| \\times \\omega=\\beta_{0} \\omega_{\\beta} \\tag{6.11}\n\\end{equation*}\n$$\n\nThis implies that the product of $|\\beta(j \\omega)|$ and $\\omega$ remains constant across the high-frequency asymptote. Specifically, a decade increase (or decrease) in $\\omega$ results in a corresponding decade decrease (or increase) in $|\\beta(j \\omega)|$, or 20 dB. Alternatively, an octave increase (or decrease) in $\\omega$ leads to a 6-dB decrease (or increase) in $|\\beta(j \\omega)|$.\n\nThe frequency $\\omega_{T}$ at which $|\\beta(j \\omega)|$ decreases to unity, or 0 dB, is known as the transition frequency, marking the point where the BJT ceases to provide current gain and starts attenuating. According to Eq. (6.11), we have $1 \\times \\omega_{T}=$ $\\beta_{0} \\omega_{\\beta}$. Using Eq. (6.8) and $r_{\\pi}=\\beta_{0} / g_{m}$, we derive\n\n$$\n\\begin{equation*}\n\\omega_{T}=\\frac{g_{m}}{C_{\\pi}+C_{\\mu}} \\tag{6.12a}\n\\end{equation*}\n$$\n\nor, equivalently,\n\n$$\n\\begin{equation*}\nf_{T}=\\frac{g_{m}}{2 \\pi\\left(C_{\\pi}+C_{\\mu}\\right)} \\tag{6.12b}\n\\end{equation*}\n$$\n\nIn monolithic BJTs, $f_{T}$ typically ranges from a few hundred MHz to tens of GHz.\n\nAt $\\omega=\\omega_{\\beta}$, Eq. (6.9) yields $\\left|\\beta\\left(j \\omega_{\\beta}\\right)\\right|=\\beta_{0} / \\sqrt{2}=0.707 \\beta_{0}$, indicating that at $\\omega=\\omega_{\\beta}$, the magnitude $|\\beta|$ is reduced to $70.7 \\%$ of its low-frequency value $\\beta_{0}$. Since $1 / \\sqrt{2}=$ -3 dB, the pole frequency $\\omega_{\\beta}$ is also referred to as the $-3-dB$ frequency.\n\n#### Exercise 6.1\n\nThe current channeled through $C_{\\mu}$ in Fig. 6.5(b) is $I_{\\mu}=V_{\\pi} /\\left[1 /\\left(j \\omega C_{\\mu}\\right)\\right]$. Using the fact that $C_{\\mu} \\ll C_{\\pi}$, demonstrate that for frequencies up to at least $\\omega_{T}$, $\\left|I_{\\mu}\\right| \\ll\\left|g_{m} V_{\\pi}\\right|$, thereby justifying the approximation $I_{c} \\cong g_{m} V_{\\pi}$.\n\nIf a certain BJT exhibits $|\\beta|=200$ at $f=1 \\mathrm{kHz}$ and $|\\beta|=10$ at $f=500 \\mathrm{MHz}$, determine $\\beta_{0}, f_{\\beta}$, and $f_{T}$.\n\n#### Solution\n\nGiven that 1 kHz is a very low frequency, the first data point corresponds to the low-frequency asymptote, implying $\\beta_{0}=200$. The second data point, significantly lower than $\\beta_{0}$, lies on the high-frequency asymptote, where the GBP is constant. Therefore, $f_{T}=\\mathrm{GBP}=$ $10 \\times 500=5 \\mathrm{GHz}$. Consequently, $f_{\\beta}=f_{T} / \\beta_{0}=5000 / 200=25 \\mathrm{MHz}$.\n\nA closer examination of the transition frequency $f_{T}$ reveals its dependence on the bias current $I_{C}$. By combining Eqs. (6.5), (6.6), and (6.12), we can express $f_{T}$ as\n\n$$\n\\begin{equation*}\nf_{T}=\\frac{1 / 2 \\pi}{\\frac{C_{j e}+C_{\\mu}}{I_{C}} V_{T}+\\tau_{F}} \\tag{6.13}\n\\end{equation*}\n$$\n\nThis equation explicitly shows the influence of the bias current $I_{C}$. At low collector currents, $f_{T}$ is primarily determined by $C_{j e}+C_{\\mu}$ and increases with $I_{C}$. For sufficiently high $I_{C}$, $f_{T}$ saturates at\n\n$$\n\\begin{equation*}\nf_{T(\\max )}=\\frac{1}{2 \\pi \\tau_{F}} \\tag{6.14}\n\\end{equation*}\n$$\n\nindicating that $\\tau_{F}$ imposes the ultimate limit on $f_{T}$. Figure 6.7 illustrates a decrease in $f_{T}$ at high collector currents, attributed to the increase in $\\tau_{F}$ due to high-level injection and other high collector-current effects.\n\nFIGURE 6.7 Dependence of $f_{T}$ on the bias current $I_{C}$.\n\nThe graph in Figure 6.7 depicts the relationship between the transition frequency $f_{T}$ and the collector current $I_{C}$ for a bipolar junction transistor (BJT). The graph employs a logarithmic scale for the $I_{C}$ axis, while the $f_{T}$ axis appears to be linear.\n\nThe graph reveals a linear increase in $f_{T}$ with $I_{C}$ at low current levels, followed by a plateau at higher currents, marking the saturation point. This plateau corresponds to $f_{T(\\max)} = 1/(2\\pi\\tau_F)$, where $\\tau_F$ is the forward transit time. At very high $I_{C}$ levels, $f_{T}$ exhibits a decline due to the rise in $\\tau_F$ caused by high-level injection and other effects.\n\nKey features include the transition from an increasing trend to a saturation region, followed by a decline, showcasing the behavior of $f_{T}$ across different $I_{C}$ levels. The plateau at $1/(2\\pi\\tau_F)$ is a critical feature, indicating the maximum achievable $f_{T}$ due to the limitations imposed by $\\tau_F$.\n\nAnnotations and specific data points highlight the regions dominated by $C_{je} + C_\\mu$ and $\\tau_F$, emphasizing the factors influencing $f_{T}$ in different regions of $I_{C}$. The decline in $f_{T}$ at high $I_{C}$ levels is also annotated, underscoring the impact of increased $\\tau_F$ due to high-level injection.\n\nUsing Eq. (6.4) and Einstein's relation $D_{n}=\\mu_{n} V_{T}$, we can express, for an $n p n$ BJT,\n\n$$\n\\begin{equation*}\nf_{T(\\max )}=\\frac{1}{\\pi} \\frac{\\mu_{n}}{W_{B}^{2}} V_{T} \\tag{6.15}\n\\end{equation*}\n$$\n\n(For a pnp BJT, replace $\\mu_{n}$ with $\\mu_{p}$.) It is clear that for fast operation, a BJT should be fabricated with a very narrow base and should be of the npn type, as electrons are 2 to 3 times more mobile than holes.\n\nEXAMPLE 6.3 Find $f_{T}$ for the BJT of Example 6.1. How does this compare with $f_{T(\\max )}$? Which parasitic dominates $f_{T}$ in this example? Which dominates the least?\n\n#### Solution\n\nEquation (6.13) yields\n\n$$\nf_{T}=\\frac{1 / 2 \\pi}{\\frac{(2+0.2) 10^{-12}}{0.1} 26+200 \\times 10^{-12}}=\\frac{1}{2 \\pi(520+52+200) 10^{-12}}=206 \\mathrm{MHz}\n$$\n\nEquation (6.14) gives\n\n$$\nf_{T(\\max )}=\\frac{1}{2 \\pi 200 \\times 10^{-12}}=796 \\mathrm{MHz}\n$$\n\nIn this example, $C_{j e}$ is the primary factor affecting $f_{T}$. This is followed by $C_{b}$, while $C_{\\mu}$ has the least impact."
},
{
    "text": "The BJT's frequency capability is commonly quantified by the transition frequency, $f_T$, which denotes the frequency at which the small-signal current gain, $|\\beta(j f)|$, decreases to unity. This metric is crucial for assessing high-speed performance and can be determined through calculation or measurement, utilizing the AC principles depicted in Fig. 6.5. Specifically, by injecting a small-signal AC current, $i_b$, into the base and measuring the resulting AC current, $i_c$, at the collector with AC ground, the current gain $\\beta=I_c/I_b$ is calculated, where $I_b$ and $I_c$ are the Laplace transforms of $i_b$ and $i_c$. The transition frequency, $f_T$, is then identified as the frequency at which $|\\beta(f_T)|=1$, or 0 dB.\n\nReferring to the equivalent circuit in Fig. 6.5b, grounding the collector renders $r_o$ and $C_s$ insignificant and places $C_\\mu$ in parallel with $C_\\pi$. Using Ohm's law, we derive the voltage across $C_\\pi$ as\n\n$$\nV_{\\pi}=\\left[r_{\\pi} || \\frac{1}{s(C_{\\pi}+C_{\\mu})}\\right] I_b=\\frac{r_{\\pi} I_b}{1+s r_{\\pi}(C_{\\pi}+C_{\\mu})}\n$$\n\nwhere $s$ is the complex frequency. It is observed that over the relevant frequency range, the current through $C_\\mu$ is negligible compared to $g_m V_\\pi$, leading to the approximation\n\n$$\nI_c \\cong g_m V_\\pi=\\frac{g_m r_{\\pi}}{1+s r_{\\pi}(C_{\\pi}+C_{\\mu})} I_b\n$$\n\nBy setting $g_m r_{\\pi} \\rightarrow \\beta_0$ and solving for the current gain ratio $I_c/I_b$, we obtain\n\n$$\n\\beta(s)=\\frac{I_c}{I_b}=\\frac{\\beta_0}{1+s r_{\\pi}(C_{\\pi}+C_{\\mu})}\n$$\n\nThe AC steady-state response, or frequency response, of the transistor is of primary interest. By substituting $s \\rightarrow j \\omega$ (or $s \\rightarrow j 2 \\pi f$), we find\n\n$$\n\\beta(j \\omega)=\\frac{\\beta_0}{1+j \\omega / \\omega_\\beta}\n$$\n\nwhere\n\n$$\n\\omega_\\beta=\\frac{1}{r_{\\pi}(C_{\\pi}+C_{\\mu})}\n$$\n\nThese equations and the associated Bode plot (Fig. 6.6) provide insights into the frequency response characteristics of the BJT, including the low-frequency asymptote, high-frequency asymptote, and the transition frequency $f_T$. The exercise and example demonstrate the calculation of $f_T$ and its dependence on various factors such as bias current and transistor parameters."
},
{
    "text": "The transition frequency \\( f_T \\) of a BJT is typically defined as the frequency at which the small-signal current gain \\( |\\beta(j f)| \\) drops to unity. This parameter serves as a benchmark for evaluating the high-speed performance of the transistor and can be determined through either calculation or measurement, employing the AC principles illustrated in Fig. 6.5. Specifically, by injecting a small-signal AC current \\( i_b \\) into the base and measuring the resulting AC current \\( i_c \\) with the collector grounded, we calculate the current gain \\( \\beta = I_c / I_b \\), where \\( I_b \\) and \\( I_c \\) are the Laplace transforms of \\( i_b \\) and \\( i_c \\), respectively. \\( f_T \\) is then identified as the frequency at which \\( |\\beta(f_T)| = 1 \\), or 0 dB.\n\nUpon examining the equivalent circuit in Fig. 6.5b, it becomes evident that grounding the collector renders \\( r_o \\) and \\( C_s \\) inconsequential, while \\( C_\\mu \\) is placed in parallel with \\( C_\\pi \\). This allows us to apply Ohm's law and derive the expression for \\( V_\\pi \\). The forward current through \\( C_\\mu \\) is negligible compared to \\( g_m V_\\pi \\) over the frequency range of interest, enabling us to approximate \\( I_c \\) as \\( g_m V_\\pi \\). By letting \\( g_m r_\\pi \\rightarrow \\beta_0 \\) and solving for \\( I_c / I_b \\), we obtain the frequency-dependent current gain \\( \\beta(s) \\).\n\nFor analyzing the AC steady-state response, or frequency response, of the transistor, we substitute \\( s \\rightarrow j \\omega \\) (or \\( s \\rightarrow j 2 \\pi f \\)) to arrive at \\( \\beta(j \\omega) \\). The pole frequency \\( \\omega_\\beta \\) is defined as the frequency at which the denominator of \\( \\beta(s) \\) becomes zero, causing \\( \\beta(s) \\) to approach infinity. The magnitude of the current gain is plotted on logarithmic scales, as shown in Fig. 6.6.\n\nThe Bode plot reveals several key observations. At low frequencies (\\( \\omega \\ll \\omega_\\beta \\)), the current gain remains at its low-frequency value \\( \\beta_0 \\). As the frequency increases beyond \\( \\omega_\\beta \\), the gain decreases at a rate of \\( -20 \\text{ dB/dec} \\). The gain-bandwidth product (GBP) remains constant for \\( \\omega \\gg \\omega_\\beta \\), indicating that the product of \\( |\\beta(j \\omega)| \\) and \\( \\omega \\) is invariant. The transition frequency \\( \\omega_T \\) is where \\( |\\beta(j \\omega)| \\) drops to unity, marking the frequency at which the BJT transitions\nThe frequency at which a BJT's small-signal current gain drops to unity is known as the transition frequency \\( f_T \\). This metric is crucial for assessing the transistor's high-speed performance and can be determined by either calculation or measurement, utilizing the AC principles depicted in Fig. 6.5. To do so, a small-signal AC current \\( i_b \\) is injected into the base, and the resulting AC current \\( i_c \\) is measured with the collector grounded, allowing us to calculate the current gain \\( \\beta = I_c / I_b \\), where \\( I_b \\) and \\( I_c \\) are the Laplace transforms of \\( i_b \\) and \\( i_c \\), respectively. \\( f_T \\) is then identified as the frequency at which \\( |\\beta(f_T)| = 1 \\), or 0 dB.\n\nIn the equivalent circuit of Fig. 6.5b, grounding the collector renders \\( r_o \\) and \\( C_s \\) irrelevant, placing \\( C_\\mu \\) in parallel with \\( C_\\pi \\). This configuration allows us to apply Ohm's law and derive an expression for \\( V_\\pi \\). Over the frequency range of interest, the forward current through \\( C_\\mu \\) is negligible compared to \\( g_m V_\\pi \\), allowing us to approximate \\( I_c \\) as \\( g_m V_\\pi \\). By letting \\( g_m r_\\pi \\rightarrow \\beta_0 \\) and solving for \\( I_c / I_b \\), we obtain the frequency-dependent current gain \\( \\beta(s) \\).\n\nTo analyze the AC steady-state response, or frequency response, of the transistor, we substitute \\( s \\rightarrow j \\omega \\) (or \\( s \\rightarrow j 2 \\pi f \\)) to arrive at \\( \\beta(j \\omega) \\). The pole frequency \\( \\omega_\\beta \\) is defined as the frequency at which the denominator of \\( \\beta(s) \\) becomes zero, causing \\( \\beta(s) \\) to approach infinity. The magnitude of the current gain is plotted on logarithmic scales, as shown in Fig. 6.6.\n\nThe Bode plot reveals several key observations. At low frequencies (\\( \\omega \\ll \\omega_\\beta \\)), the current gain remains at its low-frequency value \\( \\beta_0 \\). As the frequency increases beyond \\( \\omega_\\beta \\), the gain decreases at a rate of \\( -20 \\text{ dB/dec} \\). The gain-bandwidth product (GBP) remains constant for \\( \\omega \\gg \\omega_\\beta \\), indicating that the product of \\( |\\beta(j \\omega)| \\) and \\( \\omega \\) is invariant. The transition frequency \\( \\omega_T \\) is where \\( |\\beta(j \\omega)| \\) drops to unity, marking the frequency at which the BJT ceases to provide current gain and starts attenuating. By solving for \\( \\omega_T \\), we find that in monolithic BJTs, \\( f_T \\) typically ranges from a few hundred MHz to tens of GHz.\n\nThe dependence of \\( f_T \\) on the bias current \\( I_C \\) is shown in Fig. 6.7. At low collector current levels, \\( f_T \\) increases linearly with \\( I_C \\), dominated by the combined effect of the junction capacitance \\( C_{je} \\) and the base-collector capacitance \\( C_\\mu \\). As \\( I_C \\) increases, \\( f_T \\) reaches a plateau, indicating a saturation point, which corresponds to \\( f_{T(\\max)} = 1/(2\\pi\\tau_F) \\), where \\( \\tau_F \\) is the forward transit time. At very high collector current levels, \\( f_T \\) begins to decline due to the increase in \\( \\tau_F \\) caused by high-level injection and other effects.\n\nUsing Einstein's relation \\( D_n = \\mu_n V_T \\), we can also express \\( f_{T(\\max)} \\) for an npn BJT. It is clear that for fast operation, a BJT should be fabricated with a very narrow base and should be of the npn type, as electrons are more mobile than holes."
},
{
    "text": "In analyzing the high-speed capabilities of bipolar junction transistors (BJTs), the transition frequency \\( f_T \\) is a crucial metric. \\( f_T \\) defines the frequency at which the small-signal current gain \\( |\\beta(j f)| \\) of the BJT drops to unity, marking the point where the BJT ceases to amplify current and starts to attenuate. This frequency is a key indicator of the transistor's performance in high-speed applications.\n\nThe transition frequency \\( f_T \\) can be determined through calculations or measurements using the small-signal model illustrated in Figure 6.5. By applying a small alternating current (ac) signal \\( i_b \\) to the base and measuring the resulting ac current \\( i_c \\) at the collector (grounded for ac purposes), the current gain \\( \\beta \\) is calculated as \\( \\beta = I_c / I_b \\), where \\( I_b \\) and \\( I_c \\) are the Laplace transforms of \\( i_b \\) and \\( i_c \\), respectively. \\( f_T \\) is then identified as the frequency where \\( |\\beta(f_T)| = 1 \\), or 0 dB.\n\nThe equivalent circuit in Figure 6.5(b) shows that when the collector is shorted to ground, the collector resistance \\( r_o \\) and the collector-to-ground capacitor \\( C_s \\) are rendered negligible, leaving the base-to-collector capacitor \\( C_\\mu \\) in parallel with the base-to-emitter capacitor \\( C_\\pi \\). Utilizing Ohm's law, the voltage across the base-to-emitter capacitor can be expressed as:\n\n$$\nV_\\pi = \\frac{r_\\pi I_b}{1 + s r_\\pi (C_\\pi + C_\\mu)}\n$$\n\nwhere \\( s \\) is the complex frequency. It is noted that, within the frequency range of interest, the current passing through \\( C_\\mu \\) is insignificant compared to \\( g_m V_\\pi \\), allowing us to approximate the collector current \\( I_c \\) as:\n\n$$\nI_c \\approx g_m V_\\pi = \\frac{g_m r_\\pi}{1 + s r_\\pi (C_\\pi + C_\\mu)} I_b\n$$\n\nBy defining \\( g_m r_\\pi \\) as \\( \\beta_0 \\), the current gain \\( \\beta(s) \\) is expressed as:\n\n$$\n\\beta(s) = \\frac{I_c}{I_b} = \\frac{\\beta_0}{1 + s r_\\pi (C_\\pi + C_\\mu)}\n$$\n\nFor the purpose of analyzing the transistor's frequency response in the steady-state, we substitute \\( s \\) with \\( j\\omega \\) (or \\( j2\\pi f \\)) to obtain:\n\n$$\n\\beta(j\\omega) = \\frac{\\beta_0}{1 + j\\omega/\\omega_\\beta}\n$$\n\nwhere \\( \\omega_\\beta \\) is the angular frequency corresponding to \\( f_T \\):\n\n$$\n\\omega_\\beta = \\frac{1}{r_\\pi (C_\\pi + C_\\mu)}\n$$\n\nThe Bode plot of \\( |\\beta(j\\omega)| \\) in Figure 6.6 reveals the magnitude of the current gain over a range of frequencies. The plot exhibits a characteristic roll-off at high frequencies, with a slope of \\( -20 \\text{ dB/dec} \\), indicating a first-order system response. The transition frequency \\( \\omega_T \\) is where \\( |\\beta(j\\omega)| \\) drops to unity, marking the end of the transistor's useful amplification range.\n\nThe dependence of \\( f_T \\) on the bias current \\( I_C \\) is shown in Figure 6.7, where \\( f_T \\) increases with \\( I_C \\) at low currents and saturates at higher currents due to the limitations imposed by the forward transit time \\( \\tau_F \\). This relationship can be expressed by:\n\n$$\nf_T = \\frac{1}{2\\pi} \\frac{1}{\\frac{C_{je} + C_\\mu}{I_C} V_T + \\tau_F}\n$$\n\nAt low collector currents, \\( f_T \\) is dominated by \\( C_{je} + C_\\mu \\), while at high currents, \\( \\tau_F \\) becomes the limiting factor. The maximum transition frequency \\( f_{T(\\max)} \\) is given by:\n\n$$\nf_{T(\\max)} = \\frac{1}{2\\pi \\tau_F}\n$$\n\nThis indicates that for high-speed operation, a BJT should have a narrow base width and be of the npn type, as electrons are more mobile than holes. The example provided demonstrates the calculation of \\( f_T \\) for a specific BJT and compares it to \\( f_{T(\\max)} \\), highlighting the dominance of different parasitic elements in determining \\( f_T \\)."
},
{
    "text": "The typical method to describe a BJT's frequency performance is through the transition frequency, $f_{T}$, which marks the point at which the small-signal current gain $|\\beta(j f)|$ falls to one. This parameter is significant for assessing high-speed functionality and can be derived through calculation or measurement, utilizing the AC concepts demonstrated in Fig. 6.5. By applying a small AC current $i_{b}$ to the base and identifying the AC current $i_{c}$ with the collector grounded, the current gain $\\beta = I_{c} / I_{b}$ is determined, where $I_{b}$ and $I_{c}$ are the Laplace transforms of $i_{b}$ and $i_{c}$. Thus, $f_{T}$ is defined as the frequency where $\\left|\\beta(f_{T})\\right| = 1$, or 0 dB.\n\nReferring to the equivalent circuit in Fig. $6.5 b$, grounding the collector makes $r_{o}$ and $C_{s}$ insignificant and puts $C_{\\mu}$ in parallel with $C_{\\pi}$. Utilizing Ohm's law yields:\n\n$$\nV_{\\pi}=\\left[r_{\\pi} || \\frac{1}{s(C_{\\pi}+C_{\\mu})}\\right] I_{b}=\\frac{r_{\\pi} I_{b}}{1+s r_{\\pi}(C_{\\pi}+C_{\\mu})}\n$$\n\nHere, $s$ represents the complex frequency. It is found (as detailed in Exercise 6.1) that within the frequency range of interest, the current via $C_{\\mu}$ is negligible compared to $g_{m} V_{\\pi}$, leading to the approximation:\n\n$$\nI_{c} \\approx g_{m} V_{\\pi}=\\frac{g_{m} r_{\\pi}}{1+s r_{\\pi}(C_{\\pi}+C_{\\mu})} I_{b}\n$$\n\nBy setting $g_{m} r_{\\pi} \\rightarrow \\beta_{0}$ and solving for the current gain ratio $I_{c} / I_{b}$, we obtain:\n\n$$\n\\beta(s)=\\frac{I_{c}}{I_{b}}=\\frac{\\beta_{0}}{1+s r_{\\pi}(C_{\\pi}+C_{\\mu})}\n$$\n\nOur focus is on the transistor's AC steady-state response, also known as the frequency response, where $s \\rightarrow j \\omega$ (or $s \\rightarrow j 2 \\pi f$), leading to:\n\n$$\n\\beta(j \\omega)=\\frac{\\beta_{0}}{1+j \\omega / \\omega_{\\beta}}\n$$\n\nwhere\n\n$$\n\\omega_{\\beta}=\\frac{1}{r_{\\pi}(C_{\\pi}+C_{\\mu})}\n$$\n\nThe denominator of $\\beta(s)$ becomes zero at $s=-\\omega_{\\beta}$, causing $\\beta(s)$ to diverge to infinity, thus $\\omega_{\\beta}$ is appropriately referred to as the pole frequency (refer to Bode plots in Appendix 6A). The magnitude of the current gain is:\n\n$$\n|\\beta(j \\omega)|=\\frac{\\beta_{0}}{\\sqrt{1+(\\omega / \\omega_{\\beta})^{2}}}\n$$\n\nThis is depicted on logarithmic scales, with $\\omega$ in decades (or octaves), and magnitude in decibels. The resulting plot, known as the magnitude Bode plot and illustrated in Fig. 6.6, reveals several key observations:\n\n- At $\\omega \\ll \\omega_{\\beta}$, the equation predicts a low-frequency asymptote $|\\beta(j \\omega)| \\rightarrow \\beta_{0}$, corresponding to the frequency range we've been considering.\n- At $\\omega \\gg \\omega_{\\beta}$, the equation predicts a high-frequency asymptote $|\\beta(j \\omega)| \\rightarrow \\frac{\\beta_{0}}{\\omega / \\omega_{\\beta}}=\\frac{\\beta_{0} \\omega_{\\beta}}{\\omega}$.\n- Defining the gain-bandwidth product (GBP) as $|\\beta| \\times \\omega$, it is observed that for $\\omega \\gg \\omega_{\\beta}$, the GBP remains constant with frequency.\n- The frequency $\\omega_{T}$ where $|\\beta(j \\omega)|$ reduces to unity, or 0 dB, is called the transition frequency because it signifies the point where the BJT ceases to amplify current and starts to attenuate.\n- For $\\omega=\\omega_{\\beta}$, the magnitude $|\\beta|$ drops to $70.7 \\%$ of its low-frequency value $\\beta_{0}$, marking the $-3-dB$ frequency.\n\nExercise 6.1 demonstrates that the current via $C_{\\mu}$ is negligible compared to $g_{m} V_{\\pi}$ for frequencies up to $\\omega_{T}$, justifying the approximation $I_{c} \\approx g_{m} V_{\\pi}$.\n\nThe transition frequency $f_{T}$ is expressed in terms of the bias current $I_{C}$ as $f_{T}=\\frac{g_{m}}{2 \\pi(C_{\\pi}+C_{\\mu})}$, with values ranging from hundreds of MHz to tens of GHz in monolithic BJTs.\n\nThe dependence of $f_{T}$ on the bias current $I_{C}$ is shown in Fig. 6.7, illustrating the increasing trend at low collector currents and the plateau at high currents due to saturation effects.\n\nEquations for $f_{T(\\max)}$ are derived, highlighting the importance of fabricating a BJT with a narrow base and using the npn type due to the higher mobility of electrons compared to holes.\n\nExample 6.3 calculates $f_{T}$ for a specific BJT and compares it with $f_{T(\\max)}$, identifying the dominant parasitic elements affecting $f_{T}$."
},
{
    "text": "It is typical to denote the frequency performance of a BJT using the transition frequency $f_{T}$, which is the frequency at which the small-signal current gain $|\\beta(j f)|$ decreases to one. This frequency serves as an indicator of the BJT's capability for high-speed operation and can be determined either through calculation or measurement, utilizing the AC concepts depicted in Fig. 6.5. To do this, a small-signal AC current $i_{b}$ is applied to the base, and the AC current $i_{c}$ is measured with the collector at AC ground, leading to the ratio $\\beta=I_{c} / I_{b}$, where $I_{b}$ and $I_{c}$ are the Laplace transforms of $i_{b}$ and $i_{c}$, respectively. The transition frequency $f_{T}$ is then determined as the frequency at which $\\left|\\beta\\left(f_{T}\\right)\\right|=1$, or 0 dB.\n\nWhen examining the equivalent circuit in Fig. 6.5b, it becomes evident\nThe transition frequency $f_T$ is commonly utilized to characterize the frequency performance of a BJT. It represents the frequency at which the small-signal current gain $|\\beta(j f)|$ falls to one. This frequency is an indicator of the BJT's suitability for high-speed applications and can be determined through calculation or measurement, based on the AC concepts illustrated in Fig. 6.5. To determine $f_T$, a small-signal AC current $i_b$ is applied to the base, and the resulting AC current $i_c$ is measured with the collector at AC ground. The current gain $\\beta$ is then calculated as the ratio $I_c / I_b$, where $I_b$ and $I_c$ are the Laplace transforms of $i_b$ and $i_c$, respectively. The transition frequency $f_T$ is defined as the frequency at which $\\left|\\beta\\left(f_T\\right)\\right|=1$, or 0 dB.\n\nUpon analyzing the equivalent circuit in Fig. 6.5b, we observe that shorting the collector to ground renders $r_o$ and $C_s$ insignificant and places $C_\\mu$ in parallel with $C_\\pi$. Consequently, we can apply Ohm's law and derive the following equation:\n\n$$\nV_\\pi = \\left[r_\\pi || \\frac{1}{s(C_\\pi + C_\\mu)}\\right] I_b = \\frac{r_\\pi I_b}{1 + s r_\\pi (C_\\pi + C_\\mu)}\n$$\n\nHere, $s$ denotes the complex frequency. It is found (as detailed in Exercise 6.1) that over the frequency range of interest, the current fed forward via $C_\\mu$ is negligible compared to $g_m V_\\pi$. Therefore, we can approximate:\n\n$$\nI_c \\cong g_m V_\\pi = \\frac{g_m r_\\pi}{1 + s r_\\pi (C_\\pi + C_\\mu)} I_b\n$$\n\nBy letting $g_m r_\\pi \\rightarrow \\beta_0$ and solving for the ratio $I_c / I_b$, we obtain:\n\n$$\n\\beta(s) = \\frac{I_c}{I_b} = \\frac{\\beta_0}{1 + s r_\\pi (C_\\pi + C_\\mu)}\n$$\n\nOur primary focus is on the transistor's AC steady-state response, also known as the frequency response. By substituting $s \\rightarrow j \\omega$ (or $s \\rightarrow j 2 \\pi f$), we arrive at:\n\n$$\n\\beta(j \\omega) = \\frac{\\beta_0}{1 + j \\omega / \\omega_\\beta} \\tag{6.7}\n$$\n\nwhere\n\n$$\n\\omega_\\beta = \\frac{1}{r_\\pi (C_\\pi + C_\\mu)} \\tag{6.8}\n$$\n\nThe circuit depicted in Figure 6.5a is designed to determine the transistor's frequency response and find the cutoff frequency $f_T$. It incorporates a small-signal model consisting of resistors, capacitors, and a voltage-controlled current source to analyze the AC characteristics.\n\nThe equivalent circuit in Figure 6.5b represents a small-signal model of an NPN transistor amplifier circuit. It includes resistors, capacitors, and a voltage-controlled current source to model the transistor's behavior, allowing for the analysis of the frequency response using the provided parameters.\n\nFigure 6.6 displays a Bode plot illustrating the magnitude of the current gain, denoted as \\(|\\beta(j\\omega)|\\), of the small-signal equivalent NPN transistor amplifier circuit. The plot is presented on logarithmic scales, with the frequency \\(\\omega\\) on the horizontal axis in decades and the magnitude \\(|\\beta(j\\omega)|\\) in decibels (dB) on the vertical axis.\n\nThe graph in Figure 6.7 depicts the relationship between the transition frequency \\( f_T \\) and the collector current \\( I_C \\) for a bipolar junction transistor (BJT). The graph is plotted on a logarithmic scale for the \\( I_C \\) axis, while the \\( f_T \\) axis appears to be linear.\n\nUsing Einstein's relation $D_n = \\mu_n V_T$, we can also express the maximum transition frequency $f_{T(\\max)}$ for an $n p n$ BJT as:\n\n$$\nf_{T(\\max)} = \\frac{1}{\\pi} \\frac{\\mu_n}{W_B^2} V_T \\tag{6.15}\n$$\n\nFor a pnp BJT, replace $\\mu_n$ with $\\mu_p$. It is evident that for fast operation, a BJT should be fabricated with a very narrow base and should be of the npn type, as electrons are 2 to 3 times more mobile than holes."
},
{
    "text": "As illustrated in Fig. 6.8, an integrated-circuit (IC) MOSFET exhibits various internal capacitances: ${ }^{1}$\n\n- The gate-channel oxide capacitance $C_{g c}$, also known as the intrinsic capacitance,\n\n$$\n\\begin{equation*}\nC_{g c}=W L C_{o x} \\tag{6.16}\n\\end{equation*}\n$$\n\nimage_name:FIGURE 6.8\ndescription:The image shows a cross-sectional view of a saturated monolithic n-channel MOSFET, highlighting the different internal capacitances associated with the device. The primary components visible in the diagram include the source, gate, and drain, which are essential parts of the MOSFET structure.\n\n1. **Identification of Components and Structure:**\n- **Source, Gate, and Drain:** These are clearly marked at the top of the diagram. The gate is depicted as a rectangular block situated between the source and drain.\n- **Substrate:** The MOSFET is constructed on a p-type substrate, indicated at the bottom of the diagram.\n- **Channel Width (W):** This represents the width of the gate region.\n- **Channel Length (L):** This is the distance between the inner edges of the source and drain diffusion regions.\n\n2. **Connections and Interactions:**\n- The diagram illustrates several capacitances crucial for the MOSFET's high-frequency performance:\n- **C_ov (Overlap Capacitance):** This capacitance exists between the gate and the source/drain due to their overlap.\n- **C_gc (Gate-Channel Capacitance):** This intrinsic capacitance is defined by the oxide layer between the gate and the channel.\n- **C_cb (Bulk Capacitance):** This capacitance is between the channel and the bulk (substrate).\n- **C_sb (Source-Bulk Capacitance):** This capacitance is between the source and the substrate.\n- **C_db (Drain-Bulk Capacitance):** This capacitance is between the drain and the substrate.\n- The diagram also notes the overlap length (L_ov) and the difference in channel length (L), which are important for understanding the device's physical dimensions and electrical characteristics.\n\n3. **Labels, Annotations, and Key Features:**\n- The diagram includes labels for each capacitance, indicating their respective positions and roles within the MOSFET.\n- The substrate is marked with a p- symbol, indicating its doping type.\n- Annotations such as L_drawn and L help in understanding the design and manufacturing considerations affecting the MOSFET's performance.\n\nOverall, this diagram provides a detailed visualization of the internal capacitances and structural elements of a high-frequency MOSFET, essential for analyzing its behavior in integrated circuits.\n\nFIGURE 6.8 The capacitances in a saturated monolithic $n$ MOSFET.\nwhere $W$ is the channel width, $L$ is the distance between the inner edges of the source and drain diffusion regions, and $C_{o x}$ is the oxide capacitance per unit area. Recall from Chapter 3 that\n\n$$\n\\begin{equation*}\nC_{o x}=\\frac{\\varepsilon_{o x}}{t_{o x}}=\\frac{34.5}{t_{o x}} \\mathrm{fF} / \\mu \\mathrm{m}^{2} \\tag{6.17}\n\\end{equation*}\n$$\n\nwhere $t_{o x}$ is the oxide thickness, in nm. For example, a process with $t_{o x}=10 \\mathrm{~nm}$ results in $C_{o x}=34.5 / 10=3.45 \\mathrm{fF} / \\mu \\mathrm{m}^{2}$. The gate length as drawn on the mask before fabrication is denoted as $L_{\\text {drawn }}$. During the fabrication of the $n^{+}$source and drain regions via ion implantation, ions diffuse laterally, leading to some overlap between the inner edges of these regions and the outer edges of the gate electrode. Denoting the amount of overlap as $L_{o v}$ (in PSpice this is denoted as Ld), we thus have\n\n$$\n\\begin{equation*}\nL=L_{d r a w n}-2 L_{o v} \\tag{6.18}\n\\end{equation*}\n$$\n\nTypically, $L_{o v}$ is around 10-20\\% of $L_{\\text {drawn }}$. (Note that when calculating the device transconductance parameter $k=k^{\\prime}(W / L)$, we must use $L$ as given above, and also include the multiplicative factor $\\left(1+\\lambda v_{D S}\\right)$ to account for the channel length modulation $\\Delta L$. When referring to a specific fabrication process, engineers use $L$ to denote what is actually $L_{\\text {drawn }}$. This is also the convention used by PSpice, where statements like $\\mathrm{L}=1$. 0u $L d=0.15 \\mathrm{u}$ imply a fabrication process with $L_{\\text {drawn }}=1.0 \\mu \\mathrm{~m}$ and $L_{o v}=0.15 \\mu \\mathrm{~m}$, and thus $L=1-2 \\times 0.15=$ $0.7 \\mu \\mathrm{~m}$. For consistency with previous chapters, we will continue using $L$ to denote the distance between the inner edges of the source and drain regions.)\n\n- The channel-body depletion capacitance $C_{c b}$. In saturation operation, which is the region of greatest interest in analog applications, this capacitance is shielded from the gate by the inversion layer and thus plays a negligible role.\n- The overlap capacitances at the source and drain edges of the gate electrode, each of which is\n\n$$\n\\begin{equation*}\nC_{o v} \\cong W L_{o v} C_{o x} \\tag{6.19}\n\\end{equation*}\n$$\n\n- The junction capacitances $C_{s b}$ and $C_{d b}$ between the $n^{+}$regions of the source and drain, and the $p^{-}$body, also called bulk or substrate. As we know, these capacitances take the forms\n\n$$\n\\begin{equation*}\nC_{s b}=\\frac{C_{s b 0}}{\\left(1+v_{S B} / \\phi_{0}\\right)^{m}} \\quad C_{d b}=\\frac{C_{d b 0}}{\\left(1+v_{D B} / \\phi_{0}\\right)^{m}} \\tag{6.20}\n\\end{equation*}\n$$\n\nThe role of each of the above capacitances varies with the operating conditions of the MOSFET. ${ }^{2}$ In analog applications, FETs are operated in saturation, where the channel assumes the familiar tapered form (see Fig. 6.8), with $\\Delta L$ being the SCL portion extending into the channel side. This asymmetry causes $(2 / 3)$ of $C_{g c}$ to be allocated to the source side, and none to the drain side. ${ }^{2}$ Based on these considerations, the complete high-frequency model of the MOSFET is as shown in Fig. 6.9. As usual, small-signal voltages and currents, now frequency-dependent, are represented in terms of their Laplace transforms (upper-case letters with lower-case subscripts). We will see that the capacitances most influential in the frequency response of a FET are $C_{g s}$ and $C_{g d}$, which take the forms\n\n$$\n\\begin{equation*}\nC_{g s} \\cong \\frac{2}{3} W L C_{o x}+W L_{o v} C_{o x} \\quad C_{g d} \\cong W L_{o v} C_{o x} \\tag{6.21}\n\\end{equation*}\n$$\n\nThe model also includes the stray capacitance $C_{g b}$, not immediately apparent from the structure of Fig. 6.8, to account for the capacitive coupling between the gate interconnections and the underlying substrate outside the active device area. In today's technology, the various capacitances appearing in a MOSFET's small-signal model are in the femtofarad range $\\left(1 \\mathrm{fF}=10^{-15} \\mathrm{~F}\\right)$.\nimage_name:FIGURE 6.9 Complete high-frequency small-signal model for the MOSFET\ndescription:\n[\nname: Cgs, type: Capacitor, value: Cgs, ports: {Np: G, Nn: S}\nname: Cgd, type: Capacitor, value: Cgd, ports: {Np: G, Nn: D}\nname: Cgb, type: Capacitor, value: Cgb, ports: {Np: G, Nn: B}\nname: Csb, type: Capacitor, value: Csb, ports: {Np: S, Nn: B}\nname: Cdb, type: Capacitor, value: Cdb, ports: {Np: D, Nn: B}\nname: gmVgs, type: VoltageControlledCurrentSource, ports: {Np: D, Nn: S}\nname: gmbVbs, type: VoltageControlledCurrentSource, ports: {Np: D, Nn: S}\nname: ro, type: Resistor, value: ro, ports: {N1: D, N2: S}\n]\nextrainfo:This is a complete high-frequency small-signal model for a MOSFET, including capacitive couplings and controlled current sources.\n\nFIGURE 6.9 Complete high-frequency small-signal model for the MOSFET.\nimage_name:FIGURE 6.9 Complete high-frequency small-signal model for the MOSFET\ndescription:\n[\nname: Cgs, type: Capacitor, value: Cgs, ports: {Np: G, Nn: S}\nname: Cgd, type: Capacitor, value: Cgd, ports: {Np: G, Nn: D}\nname: g_mVgs, type: VoltageControlledCurrentSource, value: g_mVgs, ports: {Np: D, Nn: S}\nname: ro, type: Resistor, value: ro, ports: {N1: D, N2: S}\nname: Cdb, type: Capacitor, value: Cdb, ports: {Np: D, Nn: S}\n]\nextrainfo:This is a high-frequency small-signal model for a MOSFET with capacitive couplings and a voltage-controlled current source representing transconductance. The gate (G), drain (D), and source (S) nodes are connected through various components.\n\nFIGURE 6.10 High-frequency small-signal model for a MOSFET with body and source tied together.\n\nThe model in Fig. 6.9 may seem daunting for manual calculations, though it is manageable for PSpice simulations. In cases where the body and source are connected, the model simplifies as shown in Fig. 6.10, where the expression for $C_{g s}$ in Eq. (6.21) is now modified to\n\n$$\n\\begin{equation*}\nC_{g s} \\cong \\frac{2}{3} W L C_{o x}+W L_{o v} C_{o x}+C_{g b} \\tag{6.22}\n\\end{equation*}\n$$"
},
{
    "text": "As illustrated in Fig. 6.8, an integrated-circuit (IC) MOSFET exhibits various internal capacitances: ${ }^{1}$\n\n- The gate-channel oxide capacitance $C_{g c}$, also known as the intrinsic capacitance,\n\n$$\n\\begin{equation*}\nC_{g c}=W L C_{o x} \\tag{6.16}\n\\end{equation*}\n$$\n\nimage_name:FIGURE 6.8\ndescription:The image shows a cross-sectional view of a saturated monolithic n-channel MOSFET, highlighting the different internal capacitances of the device. Key components visible in the diagram include the source, gate, and drain, which are fundamental parts of the MOSFET structure.\n\n1. **Identification of Components and Structure:**\n- **Source, Gate, and Drain:** These are clearly marked at the top of the diagram. The gate is depicted as a rectangular block situated between the source and drain.\n- **Substrate:** The MOSFET is constructed on a p-type substrate, indicated at the bottom of the diagram.\n- **Channel Width (W):** This represents the width of the gate region.\n- **Channel Length (L):** This is the distance between the inner edges of the source and drain diffusion regions.\n\n2. **Connections and Interactions:**\n- The diagram illustrates several capacitances critical to the MOSFET's high-frequency performance:\n- **C_ov (Overlap Capacitance):** This capacitance exists between the gate and the source/drain due to their overlap.\n- **C_gc (Gate-Channel Capacitance):** This intrinsic capacitance is defined by the oxide layer between the gate and the channel.\n- **C_cb (Bulk Capacitance):** This capacitance is between the channel and the bulk (substrate).\n- **C_sb (Source-Bulk Capacitance):** This capacitance is between the source and the substrate.\n- **C_db (Drain-Bulk Capacitance):** This capacitance is between the drain and the substrate.\n- The diagram also notes the overlap length (L_ov) and the difference in channel length (L), which are important for understanding the device's physical dimensions and electrical characteristics.\n\n3. **Labels, Annotations, and Key Features:**\n- The diagram includes labels for each capacitance, indicating their respective positions and roles within the MOSFET.\n- The substrate is marked with a p- symbol, indicating its doping type.\n- Annotations such as L_drawn and L help in understanding the design and manufacturing considerations affecting the MOSFET's performance.\n\nOverall, this diagram provides a detailed visualization of the internal capacitances and structural elements of a high-frequency MOSFET, essential for analyzing its behavior in integrated circuits.\n\nFIGURE 6.8 The capacitances in a saturated monolithic $n$ MOSFET.\nwhere $W$ is the channel width, $L$ is the distance between the inner edges of the source and drain diffusion regions, and $C_{o x}$ is the oxide capacitance per unit area. Recall from Chapter 3 that\n\n$$\n\\begin{equation*}\nC_{o x}=\\frac{\\varepsilon_{o x}}{t_{o x}}=\\frac{34.5}{t_{o x}} \\mathrm{fF} / \\mu \\mathrm{m}^{2} \\tag{6.17}\n\\end{equation*}\n$$\n\nwhere $t_{o x}$ is the oxide thickness, in nm. For example, a process with $t_{o x}=10 \\mathrm{~nm}$ results in $C_{o x}=34.5 / 10=3.45 \\mathrm{fF} / \\mu \\mathrm{m}^{2}$. The gate length as drawn on the mask before fabrication is denoted as $L_{\\text {drawn }}$. During the fabrication of the $n^{+}$source and drain regions via ion implantation, ions diffuse laterally, causing some overlap between the inner edges of these regions and the outer edges of the gate electrode. Denoting the amount of overlap as $L_{o v}$ (in PSpice this is denoted as Ld), we thus have\n\n$$\n\\begin{equation*}\nL=L_{d r a w n}-2 L_{o v} \\tag{6.18}\n\\end{equation*}\n$$\n\nTypically, $L_{o v}$ is around 10-20% of $L_{\\text {drawn }}$. (Note that when calculating the device transconductance parameter $k=k^{\\prime}(W / L)$, we must use $L$ as given above, and also include the multiplicative factor $\\left(1+\\lambda v_{D S}\\right)$ to account for the channel length modulation $\\Delta L$. When referring to a specific fabrication process, engineers use $L$ to denote what is actually $L_{\\text {drawn }}$. This is also the convention used by PSpice, where statements like $\\mathrm{L}=1$. 0u $L d=0.15 \\mathrm{u}$ imply a fabrication process with $L_{\\text {drawn }}=1.0 \\mu \\mathrm{~m}$ and $L_{o v}=0.15 \\mu \\mathrm{~m}$, resulting in $L=1-2 \\times 0.15=$ $0.7 \\mu \\mathrm{~m}$. For consistency with previous chapters, we will continue using $L$ to denote the distance between the inner edges of the source and drain regions.)\n\n- The channel-body depletion capacitance $C_{c b}$. In saturation operation, which is the most relevant region for analog applications, this capacitance is shielded from the gate by the inversion layer and thus plays a minimal role.\n- The overlap capacitances at the source and drain edges of the gate electrode, each of which is\n\n$$\n\\begin{equation*}\nC_{o v} \\cong W L_{o v} C_{o x} \\tag{6.19}\n\\end{equation*}\n$$\n\n- The junction capacitances $C_{s b}$ and $C_{d b}$ between the $n^{+}$regions of the source and drain, and the $p^{-}$body, also referred to as bulk or substrate. As we know, these capacitances take the forms\n\n$$\n\\begin{equation*}\nC_{s b}=\\frac{C_{s b 0}}{\\left(1+v_{S B} / \\phi_{0}\\right)^{m}} \\quad C_{d b}=\\frac{C_{d b 0}}{\\left(1+v_{D B} / \\phi_{0}\\right)^{m}} \\tag{6.20}\n\\end{equation*}\n$$\n\nThe role of each of the above capacitances varies with the operating conditions of the MOSFET. ${ }^{2}$ In analog applications, the FETs are operated in saturation, where the channel assumes the familiar tapered shape (see Fig. 6.8), with $\\Delta L$ being the SCL portion extending into the channel side. This asymmetry causes $(2 / 3)$ of $C_{g c}$ to be on the source side, and none on the drain side. ${ }^{2}$ Based on these considerations, the complete high-frequency model of the MOSFET is as shown in Fig. 6.9. As usual, small-signal voltages and currents, now frequency-dependent, are represented in terms of their Laplace transforms (upper-case letters with lower-case subscripts). We will see that the capacitances most influential in the frequency response of a FET are $C_{g s}$ and $C_{g d}$, which take the forms\n\n$$\n\\begin{equation*}\nC_{g s} \\cong \\frac{2}{3} W L C_{o x}+W L_{o v} C_{o x} \\quad C_{g d} \\cong W L_{o v} C_{o x} \\tag{6.21}\n\\end{equation*}\n$$\n\nThe model also includes the stray capacitance $C_{g b}$, not immediately evident from the structure of Fig. 6.8, to account for the capacitive coupling between the gate interconnections and the underlying substrate outside the active device area. In current technology, the various capacitances in a MOSFET's small-signal model are in the femtofarad range $\\left(1 \\mathrm{fF}=10^{-15} \\mathrm{~F}\\right)$.\nimage_name:FIGURE 6.9 Complete high-frequency small-signal model for the MOSFET\ndescription:\n[\nname: Cgs, type: Capacitor, value: Cgs, ports: {Np: G, Nn: S}\nname: Cgd, type: Capacitor, value: Cgd, ports: {Np: G, Nn: D}\nname: Cgb, type: Capacitor, value: Cgb, ports: {Np: G, Nn: B}\nname: Csb, type: Capacitor, value: Csb, ports: {Np: S, Nn: B}\nname: Cdb, type: Capacitor, value: Cdb, ports: {Np: D, Nn: B}\nname: gmVgs, type: VoltageControlledCurrentSource, ports: {Np: D, Nn: S}\nname: gmbVbs, type: VoltageControlledCurrentSource, ports: {Np: D, Nn: S}\nname: ro, type: Resistor, value: ro, ports: {N1: D, N2: S}\n]\nextrainfo:This is a complete high-frequency small-signal model for a MOSFET, including capacitive couplings and controlled current sources.\n\nFIGURE 6.9 Complete high-frequency small-signal model for the MOSFET.\nimage_name:FIGURE 6.9 Complete high-frequency small-signal model for the MOSFET\ndescription:\n[\nname: Cgs, type: Capacitor, value: Cgs, ports: {Np: G, Nn: S}\nname: Cgd, type: Capacitor, value: Cgd, ports: {Np: G, Nn: D}\nname: g_mVgs, type: VoltageControlledCurrentSource, value: g_mVgs, ports: {Np: D, Nn: S}\nname: ro, type: Resistor, value: ro, ports: {N1: D, N2: S}\nname: Cdb, type: Capacitor, value: Cdb, ports: {Np: D, Nn: S}\n]\nextrainfo:This is a high-frequency small-signal model for a MOSFET with capacitive couplings and a voltage-controlled current source representing transconductance. The gate (G), drain (D), and source (S) nodes are connected through various components.\n\nFIGURE 6.10 High-frequency small-signal model for a MOSFET with body and source tied together.\n\nThe model depicted in Fig. 6.9 may seem daunting for manual calculations, though it is manageable for PSpice simulations. In scenarios where the body and source are connected, the model simplifies as shown in Fig. 6.10, where the expression for $C_{g s}$ in Eq. (6.21) is now modified to\n\n$$\n\\begin{equation*}\nC_{g s} \\cong \\frac{2}{3} W L C_{o x}+W L_{o v} C_{o x}+C_{g b} \\tag{6.22}\n\\end{equation*}\n$$"
},
{
    "text": "As illustrated in Fig. 6.8, an integrated-circuit (IC) MOSFET exhibits several internal capacitances: ${ }^{1}$\n\n- The gate-channel oxide capacitance $C_{g c}$, also known as the intrinsic capacitance,\n\n$$\n\\begin{equation*}\nC_{g c}=W L C_{o x} \\tag{6.16}\n\\end{equation*}\n$$\n\nimage_name:FIGURE 6.8\ndescription:The image shows a cross-sectional view of a saturated monolithic n-channel MOSFET, highlighting various internal capacitances associated with the device. The key components visible in the diagram include the source, gate, and drain, which are integral parts of the MOSFET structure.\n\n1. **Identification of Components and Structure:**\n- **Source, Gate, and Drain:** These are clearly marked at the top of the diagram. The gate is depicted as a rectangular block situated between the source and drain.\n- **Substrate:** The MOSFET is constructed on a p-type substrate, indicated at the bottom of the diagram.\n- **Channel Width (W):** This represents the width of the gate region.\n- **Channel Length (L):** This is the distance between the inner edges of the source and drain diffusion regions.\n\n2. **Connections and Interactions:**\n- The diagram illustrates several capacitances crucial for the MOSFET's high-frequency performance:\n- **C_ov (Overlap Capacitance):** This capacitance exists between the gate and the source/drain due to the overlap of these regions.\n- **C_gc (Gate-Channel Capacitance):** This intrinsic capacitance is defined by the oxide layer between the gate and the channel.\n- **C_cb (Bulk Capacitance):** This capacitance is between the channel and the bulk (substrate).\n- **C_sb (Source-Bulk Capacitance):** This capacitance is between the source and the substrate.\n- **C_db (Drain-Bulk Capacitance):** This capacitance is between the drain and the substrate.\n- The diagram also notes the overlap length (L_ov) and the difference in channel length (L), which are important for understanding the device's physical dimensions and electrical characteristics.\n\n3. **Labels, Annotations, and Key Features:**\n- The diagram includes labels for each capacitance, indicating their respective positions and roles within the MOSFET.\n- The substrate is marked with a p- symbol, indicating its doping type.\n- Annotations such as L_drawn and L help in understanding the design and manufacturing considerations affecting the MOSFET's performance.\n\nOverall, this diagram provides a detailed visualization of the internal capacitances and structural elements of a high-frequency MOSFET, essential for analyzing its behavior in integrated circuits.\n\nFIGURE 6.8 The capacitances in a saturated monolithic $n$ MOSFET.\nwhere $W$ is the channel width, $L$ is the distance between the inner edges of the source and drain diffusion regions, and $C_{o x}$ is the oxide capacitance per unit area. Recall from Chapter 3 that\n\n$$\n\\begin{equation*}\nC_{o x}=\\frac{\\varepsilon_{o x}}{t_{o x}}=\\frac{34.5}{t_{o x}} \\mathrm{fF} / \\mu \\mathrm{m}^{2} \\tag{6.17}\n\\end{equation*}\n$$\n\nwhere $t_{o x}$ is the oxide thickness, in nm. For instance, a process with $t_{o x}=10 \\mathrm{~nm}$ gives $C_{o x}=34.5 / 10=3.45 \\mathrm{fF} / \\mu \\mathrm{m}^{2}$. The gate length as drawn on the mask before fabrication is denoted as $L_{\\text {drawn }}$. During fabrication of the $n^{+}$source and drain regions via ion implantation, ions diffuse laterally, resulting in some overlap between the inner edges of these regions and the outer edges of the gate electrode. Denoting the amount of overlap as $L_{o v}$ (in PSpice this is denoted as Ld), we thus have\n\n$$\n\\begin{equation*}\nL=L_{d r a w n}-2 L_{o v} \\tag{6.18}\n\\end{equation*}\n$$\n\nTypically, $L_{o v}$ is on the order of 10-20\\% of $L_{\\text {drawn }}$. (Note that when calculating the device transconductance parameter $k=k^{\\prime}(W / L)$ we must use $L$ as given above, and also use the multiplicative factor $\\left(1+\\lambda v_{D S}\\right)$ to account for the channel length modulation $\\Delta L$. When referring to a particular fabrication process, engineers use $L$ to denote what is actually $L_{\\text {drawn }}$. This is also the convention used by PSpice, where statements of the type $\\mathrm{L}=1$. 0u $L d=0.15 \\mathrm{u}$ imply a fabrication process with $L_{\\text {drawn }}=1.0 \\mu \\mathrm{~m}$ and $L_{o v}=0.15 \\mu \\mathrm{~m}$, and thus $L=1-2 \\times 0.15=$ $0.7 \\mu \\mathrm{~m}$. For consistency with previous chapters we shall continue using $L$ to denote the distance between the inner edges of the source and drain regions.)\n\n- The channel-body depletion capacitance $C_{c b}$. In saturation operation, which is the region of greatest interest in analog applications, this capacitance is shielded from the gate by the inversion layer and therefore plays a negligible role.\n- The overlap capacitances at the source and drain edges of the gate electrode, each of which is\n\n$$\n\\begin{equation*}\nC_{o v} \\cong W L_{o v} C_{o x} \\tag{6.19}\n\\end{equation*}\n$$\n\n- The junction capacitances $C_{s b}$ and $C_{d b}$ between the $n^{+}$regions of the source and drain, and the $p^{-}$body, also called bulk or substrate. As we know, these capacitances take on the forms\n\n$$\n\\begin{equation*}\nC_{s b}=\\frac{C_{s b 0}}{\\left(1+v_{S B} / \\phi_{0}\\right)^{m}} \\quad C_{d b}=\\frac{C_{d b 0}}{\\left(1+v_{D B} / \\phi_{0}\\right)^{m}} \\tag{6.20}\n\\end{equation*}\n$$\n\nThe role played by each of the above capacitances varies with the operating conditions of the MOSFET. ${ }^{2}$ In analog applications the FETs are operated in saturation, where the channel assumes the familiar tapered form (see Fig. 6.8), where $\\Delta L$ is the SCL portion extending into the channel side. This asymmetry causes $(2 / 3)$ of $C_{g c}$ to go to the source side, and none to the drain side. ${ }^{2}$ Based on these considerations, the complete high-frequency model of the MOSFET is as in Fig. 6.9. As usual, small-signal voltages and currents, now frequency-dependent, are represented in terms of their Laplace's transforms (upper-case letters with lower-case subscripts). We shall see that the capacitances playing the biggest roles in the frequency response of a FET are $C_{g s}$ and $C_{g d}$, which take on the forms\n\n$$\n\\begin{equation*}\nC_{g s} \\cong \\frac{2}{3} W L C_{o x}+W L_{o v} C_{o x} \\quad C_{g d} \\cong W L_{o v} C_{o x} \\tag{6.21}\n\\end{equation*}\n$$\n\nThe model includes also the stray capacitance $C_{g b}$, not immediately obvious from the structure of Fig. 6.8, to account for the capacitive coupling between the gate interconnections and the underlying substrate outside the active device area. In today's technology, the various capacitances appearing in a MOSFET's small-signal model are in the femtofarad range $\\left(1 \\mathrm{fF}=10^{-15} \\mathrm{~F}\\right)$.\nimage_name:FIGURE 6.9 Complete high-frequency small-signal model for the MOSFET\ndescription:\n[\nname: Cgs, type: Capacitor, value: Cgs, ports: {Np: G, Nn: S}\nname: Cgd, type: Capacitor, value: Cgd, ports: {Np: G, Nn: D}\nname: Cgb, type: Capacitor, value: Cgb, ports: {Np: G, Nn: B}\nname: Csb, type: Capacitor, value: Csb, ports: {Np: S, Nn: B}\nname: Cdb, type: Capacitor, value: Cdb, ports: {Np: D, Nn: B}\nname: gmVgs, type: VoltageControlledCurrentSource, ports: {Np: D, Nn: S}\nname: gmbVbs, type: VoltageControlledCurrentSource, ports: {Np: D, Nn: S}\nname: ro, type: Resistor, value: ro, ports: {N1: D, N2: S}\n]\nextrainfo:This is a complete high-frequency small-signal model for a MOSFET, including capacitive couplings and controlled current sources.\n\nFIGURE 6.9 Complete high-frequency small-signal model for the MOSFET.\nimage_name:FIGURE 6.9 Complete high-frequency small-signal model for the MOSFET\ndescription:\n[\nname: Cgs, type: Capacitor, value: Cgs, ports: {Np: G, Nn: S}\nname: Cgd, type: Capacitor, value: Cgd, ports: {Np: G, Nn: D}\nname: g_mVgs, type: VoltageControlledCurrentSource, value: g_mVgs, ports: {Np: D, Nn: S}\nname: ro, type: Resistor, value: ro, ports: {N1: D, N2: S}\nname: Cdb, type: Capacitor, value: Cdb, ports: {Np: D, Nn: S}\n]\nextrainfo:This is a high-frequency small-signal model for a MOSFET with capacitive couplings and a voltage-controlled current source representing transconductance. The gate (G), drain (D), and source (S) nodes are connected through various components.\n\nFIGURE 6.10 High-frequency small-signal model for a MOSFET with body and source tied together.\n\nThe model of Fig. 6.9 is certainly intimidating for hand calculationsthough not necessarily so for PSpice simulations. In cases where the body and source are tied together, the model simplifies as in Fig. 6.10, where the expression for $C_{g s}$ in Eq. (6.21) is now modified to\n\n$$\n\\begin{equation*}\nC_{g s} \\cong \\frac{2}{3} W L C_{o x}+W L_{o v} C_{o x}+C_{g b} \\tag{6.22}\n\\end{equation*}\n$$"
},
{
    "text": "As illustrated in Fig. 6.8, an integrated-circuit (IC) MOSFET exhibits various internal capacitances: ${ }^{1}$\n\n- The gate-channel oxide capacitance $C_{g c}$, also known as the intrinsic capacitance,\n\n$$\n\\begin{equation*}\nC_{g c}=W L C_{o x} \\tag{6.16}\n\\end{equation*}\n$$\n\nimage_name:FIGURE 6.8\ndescription:The image shows a cross-sectional view of a saturated monolithic n-channel MOSFET, highlighting the different internal capacitances associated with the device. The primary components visible in the diagram are the source, gate, and drain, which are crucial parts of the MOSFET structure.\n\n1. **Identification of Components and Structure:**\n- **Source, Gate, and Drain:** These are clearly marked at the top of the diagram. The gate is depicted as a rectangular block situated between the source and drain.\n- **Substrate:** The MOSFET is constructed on a p-type substrate, indicated at the bottom of the diagram.\n- **Channel Width (W):** This represents the width of the gate region.\n- **Channel Length (L):** This is the distance between the inner edges of the source and drain diffusion regions.\n\n2. **Connections and Interactions:**\n- The diagram illustrates several capacitances critical to the MOSFET's high-frequency performance:\n- **C_ov (Overlap Capacitance):** This capacitance exists between the gate and the source/drain due to their overlap.\n- **C_gc (Gate-Channel Capacitance):** This intrinsic capacitance is defined by the oxide layer between the gate and the channel.\n- **C_cb (Bulk Capacitance):** This capacitance is between the channel and the bulk (substrate).\n- **C_sb (Source-Bulk Capacitance):** This capacitance is between the source and the substrate.\n- **C_db (Drain-Bulk Capacitance):** This capacitance is between the drain and the substrate.\n- The diagram also notes the overlap length (L_ov) and the difference in channel length (L), which are important for understanding the device's physical dimensions and electrical characteristics.\n\n3. **Labels, Annotations, and Key Features:**\n- The diagram includes labels for each capacitance, indicating their respective positions and roles within the MOSFET.\n- The substrate is marked with a p- symbol, indicating its doping type.\n- Annotations such as L_drawn and L help in understanding the design and manufacturing considerations affecting the MOSFET's performance.\n\nOverall, this diagram provides a detailed visualization of the internal capacitances and structural elements of a high-frequency MOSFET, essential for analyzing its behavior in integrated circuits.\n\nFIGURE 6.8 The capacitances in a saturated monolithic $n$ MOSFET.\nwhere $W$ is the channel width, $L$ is the distance between the inner edges of the source and drain diffusion regions, and $C_{o x}$ is the oxide capacitance per unit area. Recall from Chapter 3 that\n\n$$\n\\begin{equation*}\nC_{o x}=\\frac{\\varepsilon_{o x}}{t_{o x}}=\\frac{34.5}{t_{o x}} \\mathrm{fF} / \\mu \\mathrm{m}^{2} \\tag{6.17}\n\\end{equation*}\n$$\n\nwhere $t_{o x}$ is the oxide thickness, in nm. For example, a process with $t_{o x}=10 \\mathrm{~nm}$ results in $C_{o x}=34.5 / 10=3.45 \\mathrm{fF} / \\mu \\mathrm{m}^{2}$. The gate length as drawn on the mask before fabrication is denoted as $L_{\\text {drawn }}$. During the fabrication of the $n^{+}$source and drain regions via ion implantation, ions diffuse laterally, causing some overlap between the inner edges of these regions and the outer edges of the gate electrode. Denoting the amount of overlap as $L_{o v}$ (in PSpice this is denoted as Ld), we thus have\n\n$$\n\\begin{equation*}\nL=L_{d r a w n}-2 L_{o v} \\tag{6.18}\n\\end{equation*}\n$$\n\nTypically, $L_{o v}$ is around 10-20% of $L_{\\text {drawn }}$. (Note that when calculating the device transconductance parameter $k=k^{\\prime}(W / L)$, we must use $L$ as given above, and also include the multiplicative factor $\\left(1+\\lambda v_{D S}\\right)$ to account for the channel length modulation $\\Delta L$. When referring to a specific fabrication process, engineers use $L$ to denote what is actually $L_{\\text {drawn }}$. This is also the convention used by PSpice, where statements like $\\mathrm{L}=1$. 0u $L d=0.15 \\mathrm{u}$ imply a fabrication process with $L_{\\text {drawn }}=1.0 \\mu \\mathrm{~m}$ and $L_{o v}=0.15 \\mu \\mathrm{~m}$, and thus $L=1-2 \\times 0.15=$ $0.7 \\mu \\mathrm{~m}$. For consistency with previous chapters, we will continue using $L$ to denote the distance between the inner edges of the source and drain regions.)\n\n- The channel-body depletion capacitance $C_{c b}$. In saturation operation, which is the region of primary interest in analog applications, this capacitance is shielded from the gate by the inversion layer and thus plays a negligible role.\n- The overlap capacitances at the source and drain edges of the gate electrode, each of which is\n\n$$\n\\begin{equation*}\nC_{o v} \\cong W L_{o v} C_{o x} \\tag{6.19}\n\\end{equation*}\n$$\n\n- The junction capacitances $C_{s b}$ and $C_{d b}$ between the $n^{+}$regions of the source and drain, and the $p^{-}$body, also referred to as bulk or substrate. As we know, these capacitances take the forms\n\n$$\n\\begin{equation*}\nC_{s b}=\\frac{C_{s b 0}}{\\left(1+v_{S B} / \\phi_{0}\\right)^{m}} \\quad C_{d b}=\\frac{C_{d b 0}}{\\left(1+v_{D B} / \\phi_{0}\\right)^{m}} \\tag{6.20}\n\\end{equation*}\n$$\n\nThe role of each of the above capacitances varies with the operating conditions of the MOSFET. ${ }^{2}$ In analog applications, FETs are operated in saturation, where the channel assumes the familiar tapered shape (see Fig. 6.8), with $\\Delta L$ being the SCL portion extending into the channel side. This asymmetry results in $(2 / 3)$ of $C_{g c}$ being allocated to the source side, and none to the drain side. ${ }^{2}$ Based on these considerations, the complete high-frequency model of the MOSFET is as shown in Fig. 6.9. As usual, small-signal voltages and currents, now frequency-dependent, are represented in terms of their Laplace transforms (upper-case letters with lower-case subscripts). We will see that the capacitances most influential in the frequency response of a FET are $C_{g s}$ and $C_{g d}$, which take the forms\n\n$$\n\\begin{equation*}\nC_{g s} \\cong \\frac{2}{3} W L C_{o x}+W L_{o v} C_{o x} \\quad C_{g d} \\cong W L_{o v} C_{o x} \\tag{6.21}\n\\end{equation*}\n$$\n\nThe model also includes the stray capacitance $C_{g b}$, not immediately evident from the structure of Fig. 6.8, to account for the capacitive coupling between the gate interconnections and the underlying substrate outside the active device area. In current technology, the various capacitances in a MOSFET's small-signal model are in the femtofarad range $\\left(1 \\mathrm{fF}=10^{-15} \\mathrm{~F}\\right)$.\nimage_name:FIGURE 6.9 Complete high-frequency small-signal model for the MOSFET\ndescription:\n[\nname: Cgs, type: Capacitor, value: Cgs, ports: {Np: G, Nn: S}\nname: Cgd, type: Capacitor, value: Cgd, ports: {Np: G, Nn: D}\nname: Cgb, type: Capacitor, value: Cgb, ports: {Np: G, Nn: B}\nname: Csb, type: Capacitor, value: Csb, ports: {Np: S, Nn: B}\nname: Cdb, type: Capacitor, value: Cdb, ports: {Np: D, Nn: B}\nname: gmVgs, type: VoltageControlledCurrentSource, ports: {Np: D, Nn: S}\nname: gmbVbs, type: VoltageControlledCurrentSource, ports: {Np: D, Nn: S}\nname: ro, type: Resistor, value: ro, ports: {N1: D, N2: S}\n]\nextrainfo:This is a complete high-frequency small-signal model for a MOSFET, including capacitive couplings and controlled current sources.\n\nFIGURE 6.9 Complete high-frequency small-signal model for the MOSFET.\nimage_name:FIGURE 6.9 Complete high-frequency small-signal model for the MOSFET\ndescription:\n[\nname: Cgs, type: Capacitor, value: Cgs, ports: {Np: G, Nn: S}\nname: Cgd, type: Capacitor, value: Cgd, ports: {Np: G, Nn: D}\nname: g_mVgs, type: VoltageControlledCurrentSource, value: g_mVgs, ports: {Np: D, Nn: S}\nname: ro, type: Resistor, value: ro, ports: {N1: D, N2: S}\nname: Cdb, type: Capacitor, value: Cdb, ports: {Np: D, Nn: S}\n]\nextrainfo:This is a high-frequency small-signal model for a MOSFET with capacitive couplings and a voltage-controlled current source representing transconductance. The gate (G), drain (D), and source (S) nodes are connected through various components.\n\nFIGURE 6.10 High-frequency small-signal model for a MOSFET with body and source tied together.\n\nThe model depicted in Fig. 6.9 may seem daunting for manual calculations, though it is manageable for PSpice simulations. In scenarios where the body and source are connected, the model simplifies as shown in Fig. 6.10, where the expression for $C_{g s}$ in Eq. (6.21) is now modified to\n\n$$\n\\begin{equation*}\nC_{g s} \\cong \\frac{2}{3} W L C_{o x}+W L_{o v} C_{o x}+C_{g b} \\tag{6.22}\n\\end{equation*}\n$$"
},
{
    "text": "As illustrated in Fig. 6.8, an integrated-circuit (IC) MOSFET exhibits various internal capacitances: ${ }^{1}$\n\n- The gate-channel oxide capacitance $C_{g c}$, also known as the intrinsic capacitance,\n\n$$\n\\begin{equation*}\nC_{g c}=W L C_{o x} \\tag{6.16}\n\\end{equation*}\n$$\n\nimage_name:FIGURE 6.8\ndescription:The image shows a cross-sectional view of a saturated monolithic n-channel MOSFET, highlighting the different internal capacitances associated with the device. The primary components visible in the diagram include the source, gate, and drain, which are integral parts of the MOSFET structure.\n\n1. **Identification of Components and Structure:**\n- **Source, Gate, and Drain:** These are clearly labeled at the top of the diagram. The gate is depicted as a rectangular block situated between the source and drain.\n- **Substrate:** The MOSFET is constructed on a p-type substrate, indicated at the bottom of the diagram.\n- **Channel Width (W):** This represents the width of the gate region.\n- **Channel Length (L):** This is the distance between the inner edges of the source and drain diffusion regions.\n\n2. **Connections and Interactions:**\n- The diagram illustrates several capacitances crucial for the MOSFET's high-frequency performance:\n- **C_ov (Overlap Capacitance):** This capacitance exists between the gate and the source/drain due to the overlap of these regions.\n- **C_gc (Gate-Channel Capacitance):** This intrinsic capacitance is defined by the oxide layer between the gate and the channel.\n- **C_cb (Bulk Capacitance):** This capacitance is between the channel and the bulk (substrate).\n- **C_sb (Source-Bulk Capacitance):** This capacitance is between the source and the substrate.\n- **C_db (Drain-Bulk Capacitance):** This capacitance is between the drain and the substrate.\n- The diagram also notes the overlap length (L_ov) and the difference in channel length (L), which are important for understanding the device's physical dimensions and electrical characteristics.\n\n3. **Labels, Annotations, and Key Features:**\n- The diagram includes labels for each capacitance, indicating their respective positions and roles within the MOSFET.\n- The substrate is marked with a p- symbol, indicating its doping type.\n- Annotations such as L_drawn and L help in understanding the design and manufacturing considerations affecting the MOSFET's performance.\n\nOverall, this diagram provides a detailed visualization of the internal capacitances and structural elements of a high-frequency MOSFET, essential for analyzing its behavior in integrated circuits.\n\nFIGURE 6.8 The capacitances in a saturated monolithic $n$ MOSFET.\nwhere $W$ is the channel width, $L$ is the distance between the inner edges of the source and drain diffusion regions, and $C_{o x}$ is the oxide capacitance per unit area. Recall from Chapter 3 that\n\n$$\n\\begin{equation*}\nC_{o x}=\\frac{\\varepsilon_{o x}}{t_{o x}}=\\frac{34.5}{t_{o x}} \\mathrm{fF} / \\mu \\mathrm{m}^{2} \\tag{6.17}\n\\end{equation*}\n$$\n\nwhere $t_{o x}$ is the oxide thickness, in nm. For instance, a process with $t_{o x}=10 \\mathrm{~nm}$ gives $C_{o x}=34.5 / 10=3.45 \\mathrm{fF} / \\mu \\mathrm{m}^{2}$. The gate length as drawn on the mask before fabrication is denoted as $L_{\\text {drawn }}$. During fabrication of the $n^{+}$source and drain regions via ion implantation, ions diffuse laterally, resulting in some overlap between the inner edges of these regions and the outer edges of the gate electrode. Denoting the amount of overlap as $L_{o v}$ (in PSpice this is denoted as Ld), we thus have\n\n$$\n\\begin{equation*}\nL=L_{d r a w n}-2 L_{o v} \\tag{6.18}\n\\end{equation*}\n$$\n\nTypically, $L_{o v}$ is on the order of 10-20% of $L_{\\text {drawn }}$. (Note that when calculating the device transconductance parameter $k=k^{\\prime}(W / L)$, we must use $L$ as given above, and also use the multiplicative factor $\\left(1+\\lambda v_{D S}\\right)$ to account for the channel length modulation $\\Delta L$. When referring to a particular fabrication process, engineers use $L$ to denote what is actually $L_{\\text {drawn }}$. This is also the convention used by PSpice, where statements of the type $\\mathrm{L}=1$. 0u $L d=0.15 \\mathrm{u}$ imply a fabrication process with $L_{\\text {drawn }}=1.0 \\mu \\mathrm{~m}$ and $L_{o v}=0.15 \\mu \\mathrm{~m}$, and thus $L=1-2 \\times 0.15=$ $0.7 \\mu \\mathrm{~m}$. For consistency with previous chapters, we shall continue using $L$ to denote the distance between the inner edges of the source and drain regions.)\n\n- The channel-body depletion capacitance $C_{c b}$. In saturation operation, which is the region of greatest interest in analog applications, this capacitance is shielded from the gate by the inversion layer and therefore plays a negligible role.\n- The overlap capacitances at the source and drain edges of the gate electrode, each of which is\n\n$$\n\\begin{equation*}\nC_{o v} \\cong W L_{o v} C_{o x} \\tag{6.19}\n\\end{equation*}\n$$\n\n- The junction capacitances $C_{s b}$ and $C_{d b}$ between the $n^{+}$regions of the source and drain, and the $p^{-}$body, also called bulk or substrate. As we know, these capacitances take on the forms\n\n$$\n\\begin{equation*}\nC_{s b}=\\frac{C_{s b 0}}{\\left(1+v_{S B} / \\phi_{0}\\right)^{m}} \\quad C_{d b}=\\frac{C_{d b 0}}{\\left(1+v_{D B} / \\phi_{0}\\right)^{m}} \\tag{6.20}\n\\end{equation*}\n$$\n\nThe role played by each of the above capacitances varies with the operating conditions of the MOSFET. ${ }^{2}$ In analog applications, the FETs are operated in saturation, where the channel assumes the familiar tapered form (see Fig. 6.8), where $\\Delta L$ is the SCL portion extending into the channel side. This asymmetry causes $(2 / 3)$ of $C_{g c}$ to be allocated to the source side, and none to the drain side. ${ }^{2}$ Based on these considerations, the complete high-frequency model of the MOSFET is as shown in Fig. 6.9. As usual, small-signal voltages and currents, now frequency-dependent, are represented in terms of their Laplace transforms (upper-case letters with lower-case subscripts). We shall see that the capacitances most influential in the frequency response of a FET are $C_{g s}$ and $C_{g d}$, which take on the forms\n\n$$\n\\begin{equation*}\nC_{g s} \\cong \\frac{2}{3} W L C_{o x}+W L_{o v} C_{o x} \\quad C_{g d} \\cong W L_{o v} C_{o x} \\tag{6.21}\n\\end{equation*}\n$$\n\nThe model also includes the stray capacitance $C_{g b}$, not immediately evident from the structure of Fig. 6.8, to account for the capacitive coupling between the gate interconnections and the underlying substrate outside the active device area. In today's technology, the various capacitances appearing in a MOSFET's small-signal model are in the femtofarad range $\\left(1 \\mathrm{fF}=10^{-15} \\mathrm{~F}\\right)$.\nimage_name:FIGURE 6.9 Complete high-frequency small-signal model for the MOSFET\ndescription:\n[\nname: Cgs, type: Capacitor, value: Cgs, ports: {Np: G, Nn: S}\nname: Cgd, type: Capacitor, value: Cgd, ports: {Np: G, Nn: D}\nname: Cgb, type: Capacitor, value: Cgb, ports: {Np: G, Nn: B}\nname: Csb, type: Capacitor, value: Csb, ports: {Np: S, Nn: B}\nname: Cdb, type: Capacitor, value: Cdb, ports: {Np: D, Nn: B}\nname: gmVgs, type: VoltageControlledCurrentSource, ports: {Np: D, Nn: S}\nname: gmbVbs, type: VoltageControlledCurrentSource, ports: {Np: D, Nn: S}\nname: ro, type: Resistor, value: ro, ports: {N1: D, N2: S}\n]\nextrainfo:This is a complete high-frequency small-signal model for a MOSFET, including capacitive couplings and controlled current sources.\n\nFIGURE 6.9 Complete high-frequency small-signal model for the MOSFET.\nimage_name:FIGURE 6.9 Complete high-frequency small-signal model for the MOSFET\ndescription:\n[\nname: Cgs, type: Capacitor, value: Cgs, ports: {Np: G, Nn: S}\nname: Cgd, type: Capacitor, value: Cgd, ports: {Np: G, Nn: D}\nname: g_mVgs, type: VoltageControlledCurrentSource, value: g_mVgs, ports: {Np: D, Nn: S}\nname: ro, type: Resistor, value: ro, ports: {N1: D, N2: S}\nname: Cdb, type: Capacitor, value: Cdb, ports: {Np: D, Nn: S}\n]\nextrainfo:This is a high-frequency small-signal model for a MOSFET with capacitive couplings and a voltage-controlled current source representing transconductance. The gate (G), drain (D), and source (S) nodes are connected through various components.\n\nFIGURE 6.10 High-frequency small-signal model for a MOSFET with body and source tied together.\n\nThe model of Fig. 6.9 is certainly complex for hand calculationsthough not necessarily so for PSpice simulations. In cases where the body and source are tied together, the model simplifies as shown in Fig. 6.10, where the expression for $C_{g s}$ in Eq. (6.21) is now modified to\n\n$$\n\\begin{equation*}\nC_{g s} \\cong \\frac{2}{3} W L C_{o x}+W L_{o v} C_{o x}+C_{g b} \\tag{6.22}\n\\end{equation*}\n$$"
},
{
    "text": "As illustrated in Fig. 6.8, an integrated-circuit (IC) MOSFET exhibits various internal capacitances: ${ }^{1}$\n\n- The gate-channel oxide capacitance $C_{g c}$, also known as the intrinsic capacitance,\n\n$$\n\\begin{equation*}\nC_{g c}=W L C_{o x} \\tag{6.16}\n\\end{equation*}\n$$\n\nimage_name:FIGURE 6.8\ndescription:The image shows a cross-sectional view of a saturated monolithic n-channel MOSFET, highlighting the different internal capacitances of the device. Key components in the diagram include the source, gate, and drain, which are integral parts of the MOSFET structure.\n\n1. **Identification of Components and Structure:**\n- **Source, Gate, and Drain:** These are clearly marked at the top of the diagram. The gate is depicted as a rectangular block situated between the source and drain.\n- **Substrate:** The MOSFET is constructed on a p-type substrate, indicated at the bottom of the diagram.\n- **Channel Width (W):** This represents the width of the gate region.\n- **Channel Length (L):** This is the distance between the inner edges of the source and drain diffusion regions.\n\n2. **Connections and Interactions:**\n- The diagram illustrates several capacitances critical to the MOSFET's high-frequency performance:\n- **C_ov (Overlap Capacitance):** This capacitance exists between the gate and the source/drain due to their overlap.\n- **C_gc (Gate-Channel Capacitance):** This intrinsic capacitance is defined by the oxide layer between the gate and the channel.\n- **C_cb (Bulk Capacitance):** This capacitance is between the channel and the bulk (substrate).\n- **C_sb (Source-Bulk Capacitance):** This capacitance is between the source and the substrate.\n- **C_db (Drain-Bulk Capacitance):** This capacitance is between the drain and the substrate.\n- The diagram also notes the overlap length (L_ov) and the difference in channel length (L), which are important for understanding the device's physical dimensions and electrical characteristics.\n\n3. **Labels, Annotations, and Key Features:**\n- The diagram includes labels for each capacitance, indicating their respective positions and roles within the MOSFET.\n- The substrate is marked with a p- symbol, indicating its doping type.\n- Annotations such as L_drawn and L help in understanding the design and manufacturing considerations affecting the MOSFET's performance.\n\nOverall, this diagram provides a detailed visualization of the internal capacitances and structural elements of a high-frequency MOSFET, essential for analyzing its behavior in integrated circuits.\n\nFIGURE 6.8 The capacitances in a saturated monolithic $n$ MOSFET.\nwhere $W$ is the channel width, $L$ is the distance between the inner edges of the source and drain diffusion regions, and $C_{o x}$ is the oxide capacitance per unit area. Recall from Chapter 3 that\n\n$$\n\\begin{equation*}\nC_{o x}=\\frac{\\varepsilon_{o x}}{t_{o x}}=\\frac{34.5}{t_{o x}} \\mathrm{fF} / \\mu \\mathrm{m}^{2} \\tag{6.17}\n\\end{equation*}\n$$\n\nwhere $t_{o x}$ is the oxide thickness, in nm. For example, a process with $t_{o x}=10 \\mathrm{~nm}$ results in $C_{o x}=34.5 / 10=3.45 \\mathrm{fF} / \\mu \\mathrm{m}^{2}$. The gate length as drawn on the mask before fabrication is denoted as $L_{\\text {drawn }}$. During the fabrication of the $n^{+}$ source and drain regions via ion implantation, ions diffuse laterally, causing some overlap between the inner edges of these regions and the outer edges of the gate electrode. Denoting the amount of overlap as $L_{o v}$ (in PSpice this is denoted as Ld), we thus have\n\n$$\n\\begin{equation*}\nL=L_{d r a w n}-2 L_{o v} \\tag{6.18}\n\\end{equation*}\n$$\n\nTypically, $L_{o v}$ is around 10-20% of $L_{\\text {drawn }}$. (Note that when calculating the device transconductance parameter $k=k^{\\prime}(W / L)$, we must use $L$ as given above, and also include the multiplicative factor $\\left(1+\\lambda v_{D S}\\right)$ to account for the channel length modulation $\\Delta L$. When referring to a specific fabrication process, engineers use $L$ to denote what is actually $L_{\\text {drawn }}$. This is also the convention used by PSpice, where statements like $\\mathrm{L}=1$. 0u $L d=0.15 \\mathrm{u}$ imply a fabrication process with $L_{\\text {drawn }}=1.0 \\mu \\mathrm{~m}$ and $L_{o v}=0.15 \\mu \\mathrm{~m}$, and thus $L=1-2 \\times 0.15=$ $0.7 \\mu \\mathrm{~m}$. For consistency with previous chapters, we will continue using $L$ to denote the distance between the inner edges of the source and drain regions.)\n\n- The channel-body depletion capacitance $C_{c b}$. In saturation operation, which is the most relevant region for analog applications, this capacitance is shielded from the gate by the inversion layer and thus has a negligible effect.\n- The overlap capacitances at the source and drain edges of the gate electrode, each of which is\n\n$$\n\\begin{equation*}\nC_{o v} \\cong W L_{o v} C_{o x} \\tag{6.19}\n\\end{equation*}\n$$\n\n- The junction capacitances $C_{s b}$ and $C_{d b}$ between the $n^{+}$ regions of the source and drain, and the $p^{-}$ body, also referred to as bulk or substrate. As known, these capacitances take the forms\n\n$$\n\\begin{equation*}\nC_{s b}=\\frac{C_{s b 0}}{\\left(1+v_{S B} / \\phi_{0}\\right)^{m}} \\quad C_{d b}=\\frac{C_{d b 0}}{\\left(1+v_{D B} / \\phi_{0}\\right)^{m}} \\tag{6.20}\n\\end{equation*}\n$$\n\nThe significance of each of the aforementioned capacitances varies with the operating conditions of the MOSFET. ${ }^{2}$ In analog applications, FETs are operated in saturation, where the channel assumes the familiar tapered shape (see Fig. 6.8), with $\\Delta L$ being the SCL portion extending into the channel side. This asymmetry results in $(2 / 3)$ of $C_{g c}$ being allocated to the source side, and none to the drain side. ${ }^{2}$ Based on these considerations, the complete high-frequency model of the MOSFET is as shown in Fig. 6.9. As usual, small-signal voltages and currents, now frequency-dependent, are represented in terms of their Laplace transforms (upper-case letters with lower-case subscripts). We will see that the capacitances most influential in the frequency response of a FET are $C_{g s}$ and $C_{g d}$, which are given by\n\n$$\n\\begin{equation*}\nC_{g s} \\cong \\frac{2}{3} W L C_{o x}+W L_{o v} C_{o x} \\quad C_{g d} \\cong W L_{o v} C_{o x} \\tag{6.21}\n\\end{equation*}\n$$\n\nThe model also includes the stray capacitance $C_{g b}$, not immediately evident from the structure of Fig. 6.8, to account for the capacitive coupling between the gate interconnections and the underlying substrate outside the active device area. In contemporary technology, the various capacitances in a MOSFET's small-signal model are typically in the femtofarad range $\\left(1 \\mathrm{fF}=10^{-15} \\mathrm{~F}\\right)$.\nimage_name:FIGURE 6.9 Complete high-frequency small-signal model for the MOSFET\ndescription:\n[\nname: Cgs, type: Capacitor, value: Cgs, ports: {Np: G, Nn: S}\nname: Cgd, type: Capacitor, value: Cgd, ports: {Np: G, Nn: D}\nname: Cgb, type: Capacitor, value: Cgb, ports: {Np: G, Nn: B}\nname: Csb, type: Capacitor, value: Csb, ports: {Np: S, Nn: B}\nname: Cdb, type: Capacitor, value: Cdb, ports: {Np: D, Nn: B}\nname: gmVgs, type: VoltageControlledCurrentSource, ports: {Np: D, Nn: S}\nname: gmbVbs, type: VoltageControlledCurrentSource, ports: {Np: D, Nn: S}\nname: ro, type: Resistor, value: ro, ports: {N1: D, N2: S}\n]\nextrainfo:This is a complete high-frequency small-signal model for a MOSFET, including capacitive couplings and controlled current sources.\n\nFIGURE 6.9 Complete high-frequency small-signal model for the MOSFET.\nimage_name:FIGURE 6.9 Complete high-frequency small-signal model for the MOSFET\ndescription:\n[\nname: Cgs, type: Capacitor, value: Cgs, ports: {Np: G, Nn: S}\nname: Cgd, type: Capacitor, value: Cgd, ports: {Np: G, Nn: D}\nname: g_mVgs, type: VoltageControlledCurrentSource, value: g_mVgs, ports: {Np: D, Nn: S}\nname: ro, type: Resistor, value: ro, ports: {N1: D, N2: S}\nname: Cdb, type: Capacitor, value: Cdb, ports: {Np: D, Nn: S}\n]\nextrainfo:This is a high-frequency small-signal model for a MOSFET with capacitive couplings and a voltage-controlled current source representing transconductance. The gate (G), drain (D), and source (S) nodes are connected through various components.\n\nFIGURE 6.10 High-frequency small-signal model for a MOSFET with body and source tied together.\n\nThe model depicted in Fig. 6.9 can be daunting for manual calculations, though it is manageable for PSpice simulations. In scenarios where the body and source are connected, the model simplifies as shown in Fig. 6.10, where the expression for $C_{g s}$ in Eq. (6.21) is now modified to\n\n$$\n\\begin{equation*}\nC_{g s} \\cong \\frac{2}{3} W L C_{o x}+W L_{o v} C_{o x}+C_{g b} \\tag{6.22}\n\\end{equation*}\n$$"
},
{
    "text": "As illustrated in Fig. 6.8, an integrated-circuit (IC) MOSFET exhibits various internal capacitances: ${ }^{1}$\n\n- The gate-channel oxide capacitance $C_{g c}$, also known as the intrinsic capacitance,\n\n$$\n\\begin{equation*}\nC_{g c}=W L C_{o x} \\tag{6.16}\n\\end{equation*}\n$$\n\nimage_name:FIGURE 6.8\ndescription:The image shows a cross-sectional view of a saturated monolithic n-channel MOSFET, highlighting the different internal capacitances associated with the device. Key components visible in the diagram include the source, gate, and drain, which are essential parts of the MOSFET structure.\n\n1. **Identification of Components and Structure:**\n- **Source, Gate, and Drain:** These are clearly marked at the top of the diagram. The gate is depicted as a rectangular block situated between the source and drain.\n- **Substrate:** The MOSFET is constructed on a p-type substrate, indicated at the bottom of the diagram.\n- **Channel Width (W):** This represents the width of the gate region.\n- **Channel Length (L):** This is the distance between the inner edges of the source and drain diffusion regions.\n\n2. **Connections and Interactions:**\n- The diagram shows several capacitances critical for the MOSFET's high-frequency performance:\n- **C_ov (Overlap Capacitance):** This capacitance exists between the gate and the source/drain due to their overlap.\n- **C_gc (Gate-Channel Capacitance):** This intrinsic capacitance is defined by the oxide layer between the gate and the channel.\n- **C_cb (Bulk Capacitance):** This capacitance is between the channel and the bulk (substrate).\n- **C_sb (Source-Bulk Capacitance):** This capacitance is between the source and the substrate.\n- **C_db (Drain-Bulk Capacitance):** This capacitance is between the drain and the substrate.\n- The diagram also notes the overlap length (L_ov) and the difference in channel length (L), which are important for understanding the device's physical dimensions and electrical characteristics.\n\n3. **Labels, Annotations, and Key Features:**\n- The diagram includes labels for each capacitance, indicating their respective positions and roles within the MOSFET.\n- The substrate is marked with a p- symbol, indicating its doping type.\n- Annotations such as L_drawn and L help in understanding the design and manufacturing considerations affecting the MOSFET's performance.\n\nOverall, this diagram provides a detailed visualization of the internal capacitances and structural elements of a high-frequency MOSFET, essential for analyzing its behavior in integrated circuits.\n\nFIGURE 6.8 The capacitances in a saturated monolithic $n$ MOSFET.\nwhere $W$ is the channel width, $L$ is the distance between the inner edges of the source and drain diffusion regions, and $C_{o x}$ is the oxide capacitance per unit area. Recall from Chapter 3 that\n\n$$\n\\begin{equation*}\nC_{o x}=\\frac{\\varepsilon_{o x}}{t_{o x}}=\\frac{34.5}{t_{o x}} \\mathrm{fF} / \\mu \\mathrm{m}^{2} \\tag{6.17}\n\\end{equation*}\n$$\n\nwhere $t_{o x}$ is the oxide thickness, in nm. For example, a process with $t_{o x}=10 \\mathrm{~nm}$ gives $C_{o x}=34.5 / 10=3.45 \\mathrm{fF} / \\mu \\mathrm{m}^{2}$. The gate length as drawn on the mask before fabrication is denoted as $L_{\\text {drawn }}$. During the fabrication of the $n^{+}$source and drain regions via ion implantation, ions diffuse laterally, resulting in some overlap between the inner edges of these regions and the outer edges of the gate electrode. Denoting the amount of overlap as $L_{o v}$ (in PSpice this is denoted as Ld), we thus have\n\n$$\n\\begin{equation*}\nL=L_{d r a w n}-2 L_{o v} \\tag{6.18}\n\\end{equation*}\n$$\n\nTypically, $L_{o v}$ is on the order of 10-20\\% of $L_{\\text {drawn }}$. (Note that when calculating the device transconductance parameter $k=k^{\\prime}(W / L)$, we must use $L$ as given above, and also use the multiplicative factor $\\left(1+\\lambda v_{D S}\\right)$ to account for the channel length modulation $\\Delta L$. When referring to a particular fabrication process, engineers use $L$ to denote what is actually $L_{\\text {drawn }}$. This is also the convention used by PSpice, where statements of the type $\\mathrm{L}=1$. 0u $L d=0.15 \\mathrm{u}$ imply a fabrication process with $L_{\\text {drawn }}=1.0 \\mu \\mathrm{~m}$ and $L_{o v}=0.15 \\mu \\mathrm{~m}$, and thus $L=1-2 \\times 0.15=$ $0.7 \\mu \\mathrm{~m}$. For consistency with previous chapters, we shall continue using $L$ to denote the distance between the inner edges of the source and drain regions.)\n\n- The channel-body depletion capacitance $C_{c b}$. In saturation operation, which is the region of greatest interest in analog applications, this capacitance is shielded from the gate by the inversion layer and therefore plays a negligible role.\n- The overlap capacitances at the source and drain edges of the gate electrode, each of which is\n\n$$\n\\begin{equation*}\nC_{o v} \\cong W L_{o v} C_{o x} \\tag{6.19}\n\\end{equation*}\n$$\n\n- The junction capacitances $C_{s b}$ and $C_{d b}$ between the $n^{+}$regions of the source and drain, and the $p^{-}$body, also called bulk or substrate. As we know, these capacitances take on the forms\n\n$$\n\\begin{equation*}\nC_{s b}=\\frac{C_{s b 0}}{\\left(1+v_{S B} / \\phi_{0}\\right)^{m}} \\quad C_{d b}=\\frac{C_{d b 0}}{\\left(1+v_{D B} / \\phi_{0}\\right)^{m}} \\tag{6.20}\n\\end{equation*}\n$$\n\nThe role played by each of the above capacitances varies with the operating conditions of the MOSFET. ${ }^{2}$ In analog applications, the FETs are operated in saturation, where the channel assumes the familiar tapered form (see Fig. 6.8), where $\\Delta L$ is the SCL portion extending into the channel side. This asymmetry causes $(2 / 3)$ of $C_{g c}$ to be allocated to the source side, and none to the drain side. ${ }^{2}$ Based on these considerations, the complete high-frequency model of the MOSFET is as shown in Fig. 6.9. As usual, small-signal voltages and currents, now frequency-dependent, are represented in terms of their Laplace transforms (upper-case letters with lower-case subscripts). We shall see that the capacitances playing the most significant roles in the frequency response of a FET are $C_{g s}$ and $C_{g d}$, which take on the forms\n\n$$\n\\begin{equation*}\nC_{g s} \\cong \\frac{2}{3} W L C_{o x}+W L_{o v} C_{o x} \\quad C_{g d} \\cong W L_{o v} C_{o x} \\tag{6.21}\n\\end{equation*}\n$$\n\nThe model also includes the stray capacitance $C_{g b}$, not immediately obvious from the structure of Fig. 6.8, to account for the capacitive coupling between the gate interconnections and the underlying substrate outside the active device area. In today's technology, the various capacitances appearing in a MOSFET's small-signal model are in the femtofarad range $\\left(1 \\mathrm{fF}=10^{-15} \\mathrm{~F}\\right)$.\nimage_name:FIGURE 6.9 Complete high-frequency small-signal model for the MOSFET\ndescription:\n[\nname: Cgs, type: Capacitor, value: Cgs, ports: {Np: G, Nn: S}\nname: Cgd, type: Capacitor, value: Cgd, ports: {Np: G, Nn: D}\nname: Cgb, type: Capacitor, value: Cgb, ports: {Np: G, Nn: B}\nname: Csb, type: Capacitor, value: Csb, ports: {Np: S, Nn: B}\nname: Cdb, type: Capacitor, value: Cdb, ports: {Np: D, Nn: B}\nname: gmVgs, type: VoltageControlledCurrentSource, ports: {Np: D, Nn: S}\nname: gmbVbs, type: VoltageControlledCurrentSource, ports: {Np: D, Nn: S}\nname: ro, type: Resistor, value: ro, ports: {N1: D, N2: S}\n]\nextrainfo:This is a complete high-frequency small-signal model for a MOSFET, including capacitive couplings and controlled current sources.\n\nFIGURE 6.9 Complete high-frequency small-signal model for the MOSFET.\nimage_name:FIGURE 6.9 Complete high-frequency small-signal model for the MOSFET\ndescription:\n[\nname: Cgs, type: Capacitor, value: Cgs, ports: {Np: G, Nn: S}\nname: Cgd, type: Capacitor, value: Cgd, ports: {Np: G, Nn: D}\nname: g_mVgs, type: VoltageControlledCurrentSource, value: g_mVgs, ports: {Np: D, Nn: S}\nname: ro, type: Resistor, value: ro, ports: {N1: D, N2: S}\nname: Cdb, type: Capacitor, value: Cdb, ports: {Np: D, Nn: S}\n]\nextrainfo:This is a high-frequency small-signal model for a MOSFET with capacitive couplings and a voltage-controlled current source representing transconductance. The gate (G), drain (D), and source (S) nodes are connected through various components.\n\nFIGURE 6.10 High-frequency small-signal model for a MOSFET with body and source tied together.\n\nThe model depicted in Fig. 6.9 is certainly complex for manual calculations, though not necessarily so for PSpice simulations. In cases where the body and source are tied together, the model simplifies as shown in Fig. 6.10, where the expression for $C_{g s}$ in Eq. (6.21) is now modified to\n\n$$\n\\begin{equation*}\nC_{g s} \\cong \\frac{2}{3} W L C_{o x}+W L_{o v} C_{o x}+C_{g b} \\tag{6.22}\n\\end{equation*}\n$$"
},
{
    "text": "As illustrated in Fig. 6.8, an integrated-circuit (IC) MOSFET exhibits a range of internal capacitances: ${ }^{1}$\n\n- The gate-channel oxide capacitance $C_{g c}$, also known as the intrinsic capacitance,\n\n$$\n\\begin{equation*}\nC_{g c}=W L C_{o x} \\tag{6.16}\n\\end{equation*}\n$$\n\nimage_name:FIGURE 6.8\ndescription:The image shows a cross-sectional view of a saturated monolithic n-channel MOSFET, highlighting various internal capacitances associated with the device. Key components visible in the diagram include the source, gate, and drain, which are fundamental parts of the MOSFET structure.\n\n1. **Identification of Components and Structure:**\n- **Source, Gate, and Drain:** These are clearly marked at the top of the diagram. The gate is depicted as a rectangular block situated between the source and drain.\n- **Substrate:** The MOSFET is constructed on a p-type substrate, indicated at the bottom of the diagram.\n- **Channel Width (W):** This represents the width of the gate region.\n- **Channel Length (L):** This is the distance between the inner edges of the source and drain diffusion regions.\n\n2. **Connections and Interactions:**\n- The diagram illustrates several capacitances critical to the MOSFET's high-frequency performance:\n- **C_ov (Overlap Capacitance):** This capacitance exists due to the overlap between the gate and the source/drain regions.\n- **C_gc (Gate-Channel Capacitance):** This intrinsic capacitance is defined by the oxide layer between the gate and the channel.\n- **C_cb (Bulk Capacitance):** This capacitance is between the channel and the bulk (substrate).\n- **C_sb (Source-Bulk Capacitance):** This capacitance is between the source and the substrate.\n- **C_db (Drain-Bulk Capacitance):** This capacitance is between the drain and the substrate.\n- The diagram also notes the overlap length (L_ov) and the difference in channel length (L), which are important for understanding the device's physical dimensions and electrical characteristics.\n\n3. **Labels, Annotations, and Key Features:**\n- The diagram includes labels for each capacitance, indicating their respective positions and roles within the MOSFET.\n- The substrate is marked with a p- symbol, indicating its doping type.\n- Annotations such as L_drawn and L help in understanding the design and manufacturing considerations affecting the MOSFET's performance.\n\nOverall, this diagram provides a detailed visualization of the internal capacitances and structural elements of a high-frequency MOSFET, essential for analyzing its behavior in integrated circuits.\n\nFIGURE 6.8 The capacitances in a saturated monolithic $n$ MOSFET.\nwhere $W$ is the channel width, $L$ is the distance between the inner edges of the source and drain diffusion regions, and $C_{o x}$ is the oxide capacitance per unit area. Recall from Chapter 3 that\n\n$$\n\\begin{equation*}\nC_{o x}=\\frac{\\varepsilon_{o x}}{t_{o x}}=\\frac{34.5}{t_{o x}} \\mathrm{fF} / \\mu \\mathrm{m}^{2} \\tag{6.17}\n\\end{equation*}\n$$\n\nwhere $t_{o x}$ is the oxide thickness, in nm. For example, a process with $t_{o x}=10 \\mathrm{~nm}$ results in $C_{o x}=34.5 / 10=3.45 \\mathrm{fF} / \\mu \\mathrm{m}^{2}$. The gate length as drawn on the mask before fabrication is denoted as $L_{\\text {drawn }}$. During the fabrication of the $n^{+}$source and drain regions via ion implantation, ions diffuse laterally, leading to some overlap between the inner edges of these regions and the outer edges of the gate electrode. Denoting the amount of overlap as $L_{o v}$ (in PSpice this is denoted as Ld), we thus have\n\n$$\n\\begin{equation*}\nL=L_{d r a w n}-2 L_{o v} \\tag{6.18}\n\\end{equation*}\n$$\n\nTypically, $L_{o v}$ is about 10-20% of $L_{\\text {drawn }}$. (Note that when calculating the device transconductance parameter $k=k^{\\prime}(W / L)$, we must use $L$ as given above, and also include the multiplicative factor $\\left(1+\\lambda v_{D S}\\right)$ to account for the channel length modulation $\\Delta L$. When referring to a specific fabrication process, engineers use $L$ to denote what is actually $L_{\\text {drawn }}$. This is also the convention used by PSpice, where statements like $\\mathrm{L}=1$. 0u $L d=0.15 \\mathrm{u}$ imply a fabrication process with $L_{\\text {drawn }}=1.0 \\mu \\mathrm{~m}$ and $L_{o v}=0.15 \\mu \\mathrm{~m}$, and thus $L=1-2 \\times 0.15=$ $0.7 \\mu \\mathrm{~m}$. For consistency with previous chapters, we will continue using $L$ to denote the distance between the inner edges of the source and drain regions.)\n\n- The channel-body depletion capacitance $C_{c b}$. In saturation operation, which is the region of primary interest in analog applications, this capacitance is shielded from the gate by the inversion layer and hence plays a negligible role.\n- The overlap capacitances at the source and drain edges of the gate electrode, each of which is\n\n$$\n\\begin{equation*}\nC_{o v} \\cong W L_{o v} C_{o x} \\tag{6.19}\n\\end{equation*}\n$$\n\n- The junction capacitances $C_{s b}$ and $C_{d b}$ between the $n^{+}$regions of the source and drain, and the $p^{-}$body, also referred to as bulk or substrate. As we know, these capacitances take the forms\n\n$$\n\\begin{equation*}\nC_{s b}=\\frac{C_{s b 0}}{\\left(1+v_{S B} / \\phi_{0}\\right)^{m}} \\quad C_{d b}=\\frac{C_{d b 0}}{\\left(1+v_{D B} / \\phi_{0}\\right)^{m}} \\tag{6.20}\n\\end{equation*}\n$$\n\nThe role of each of the above capacitances varies with the operating conditions of the MOSFET. ${ }^{2}$ In analog applications, FETs are operated in saturation, where the channel assumes the familiar tapered shape (see Fig. 6.8), with $\\Delta L$ being the SCL portion extending into the channel side. This asymmetry results in $(2 / 3)$ of $C_{g c}$ being allocated to the source side, and none to the drain side. ${ }^{2}$ Based on these considerations, the complete high-frequency model of the MOSFET is as shown in Fig. 6.9. As usual, small-signal voltages and currents, now frequency-dependent, are represented in terms of their Laplace transforms (upper-case letters with lower-case subscripts). We will see that the capacitances most influential in the frequency response of a FET are $C_{g s}$ and $C_{g d}$, which take the forms\n\n$$\n\\begin{equation*}\nC_{g s} \\cong \\frac{2}{3} W L C_{o x}+W L_{o v} C_{o x} \\quad C_{g d} \\cong W L_{o v} C_{o x} \\tag{6.21}\n\\end{equation*}\n$$\n\nThe model also includes the stray capacitance $C_{g b}$, not immediately apparent from the structure of Fig. 6.8, to account for the capacitive coupling between the gate interconnections and the underlying substrate outside the active device area. In current technology, the various capacitances in a MOSFET's small-signal model are in the femtofarad range $\\left(1 \\mathrm{fF}=10^{-15} \\mathrm{~F}\\right)$.\nimage_name:FIGURE 6.9 Complete high-frequency small-signal model for the MOSFET\ndescription:\n[\nname: Cgs, type: Capacitor, value: Cgs, ports: {Np: G, Nn: S}\nname: Cgd, type: Capacitor, value: Cgd, ports: {Np: G, Nn: D}\nname: Cgb, type: Capacitor, value: Cgb, ports: {Np: G, Nn: B}\nname: Csb, type: Capacitor, value: Csb, ports: {Np: S, Nn: B}\nname: Cdb, type: Capacitor, value: Cdb, ports: {Np: D, Nn: B}\nname: gmVgs, type: VoltageControlledCurrentSource, ports: {Np: D, Nn: S}\nname: gmbVbs, type: VoltageControlledCurrentSource, ports: {Np: D, Nn: S}\nname: ro, type: Resistor, value: ro, ports: {N1: D, N2: S}\n]\nextrainfo:This is a complete high-frequency small-signal model for a MOSFET, including capacitive couplings and controlled current sources.\n\nFIGURE 6.9 Complete high-frequency small-signal model for the MOSFET.\nimage_name:FIGURE 6.9 Complete high-frequency small-signal model for the MOSFET\ndescription:\n[\nname: Cgs, type: Capacitor, value: Cgs, ports: {Np: G, Nn: S}\nname: Cgd, type: Capacitor, value: Cgd, ports: {Np: G, Nn: D}\nname: g_mVgs, type: VoltageControlledCurrentSource, value: g_mVgs, ports: {Np: D, Nn: S}\nname: ro, type: Resistor, value: ro, ports: {N1: D, N2: S}\nname: Cdb, type: Capacitor, value: Cdb, ports: {Np: D, Nn: S}\n]\nextrainfo:This is a high-frequency small-signal model for a MOSFET with capacitive couplings and a voltage-controlled current source representing transconductance. The gate (G), drain (D), and source (S) nodes are connected through various components.\n\nFIGURE 6.10 High-frequency small-signal model for a MOSFET with body and source tied together.\n\nThe model depicted in Fig. 6.9 can be daunting for manual calculations, though it is manageable for PSpice simulations. In scenarios where the body and source are connected, the model simplifies as shown in Fig. 6.10, where the expression for $C_{g s}$ in Eq. (6.21) is now modified to\n\n$$\n\\begin{equation*}\nC_{g s} \\cong \\frac{2}{3} W L C_{o x}+W L_{o v} C_{o x}+C_{g b} \\tag{6.22}\n\\end{equation*}\n$$"
},
{
    "text": "Like in the BJT scenario, the MOSFET's frequency capability is quantified by the transition frequency $f_{T}$, at which its small-signal current gain drops to unity. It's known that no current flows into the gate at dc. However, as the operating frequency rises, the gate's stray capacitances draw more current, reducing the FET's current gain. The transition frequency serves as a merit figure for high-frequency performance and can be calculated or measured using the ac setup in Fig. 6.11a. Specifically, a small-signal ac current $I_{g}$ is applied to the gate, the resulting drain current $I_{d}$ is measured with the drain at ac ground, the ratio $I_{d} / I_{g}$ is taken, and the frequency $\\omega_{T}$ at which $\\left|I_{d} / I_{g}\\right|=1$ or 0 dB is determined.\n\n**Image Description (a):**\n- **Name:** M1, **Type:** NMOS, **Ports:** {S: GND, D: GND, G: V1}\n- **Name:** Ig, **Type:** CurrentSource, **Value:** Ig, **Ports:** {Np: G, Nn: GND}\n- **Extra Info:** This circuit determines the transition frequency $f_{T}$ of an NMOS transistor by applying a small-signal ac current $I_{g}$ to the gate and measuring the drain current $I_{d}$. The drain is at ac ground, making $r_{o}$ and $C_{db}$ irrelevant, and placing $C_{gd}$ in parallel with $C_{gs}$.\n\n**Image Description (b):**\n- **Name:** Ig, **Type:** CurrentSource, **Value:** Ig, **Ports:** {Np: G, Nn: GND}\n- **Name:** Cgs, **Type:** Capacitor, **Value:** Cgs, **Ports:** {Np: G, Nn: S}\n- **Name:** Cgd, **Type:** Capacitor, **Value:** Cgd, **Ports:** {Np: G, Nn: D}\n- **Name:** g_mV_gs, **Type:** VoltageControlledCurrentSource, **Value:** g_mV_gs, **Ports:** {Np: D, Nn: S}\n- **Name:** ro, **Type:** Resistor, **Value:** ro, **Ports:** {N1: D, N2: S}\n- **Name:** Cdb, **Type:** Capacitor, **Value:** Cdb, **Ports:** {Np: D, Nn: GND}\n- **Extra Info:** The circuit diagram (b) depicts a small-signal equivalent model for analyzing the transition frequency (f_T) of an NMOS transistor. The drain is shorted to ground, making $r_{o}$ and $C_{db}$ irrelevant. $C_{gd}$ is in parallel with $C_{gs}$, and the body and source are tied together, simplifying the analysis.\n\n**FIGURE 6.11:** (a) Ac circuit to find $f_{T}$, and (b) its small-signal equivalent.\n\nExamining the equivalent circuit in Fig. 6.11b, we observe that shorting the drain to ground makes $r_{o}$ and $C_{db}$ irrelevant, placing $C_{gd}$ in parallel with $C_{gs}$. With the body and source connected, $C_{gs}$ is given by Eq. (6.20). Applying the generalized Ohm's law:\n\n$$\nV_{g s}=\\frac{1}{s\\left(C_{g s}+C_{g d}\\right)} I_{g}\n$$\n\nSimilar to the BJT case, it can be verified that within our frequency range of interest, the current fed forward via $C_{gd}$ is negligible compared to the dependent source, allowing us to approximate:\n\n$$\nI_{d} \\cong g_{m} V_{g s}=\\frac{g_{m}}{s\\left(C_{g s}+C_{g d}\\right)} I_{g}\n$$\n\nTaking the ratio $I_{d} / I_{g}$ and letting $s \\rightarrow j \\omega$, we obtain:\n\n$$\n\\begin{equation*}\n\\frac{I_{d}}{I_{g}}=\\frac{1}{j \\omega / \\omega_{T}} \\tag{6.23}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\n\\omega_{T}=\\frac{g_{m}}{C_{g s}+C_{g d}} \\tag{6.24a}\n\\end{equation*}\n$$\n\nor alternatively,\n\n$$\n\\begin{equation*}\nf_{T}=\\frac{g_{m}}{2 \\pi\\left(C_{g s}+C_{g d}\\right)} \\tag{6.24b}\n\\end{equation*}\n$$\n\n(Note the formal similarity with Eq. (6.12) of the BJT.) Since $g_{m}$ depends on the bias current $I_{D}$, so does $f_{T}$. Figure 6.12 illustrates the Bode plot of the MOSFET's current gain. At low frequencies, the gain tends to infinity due to the gate drawing no dc current. However, at $f=f_{T}$, the gate current equals the drain current. In modern monolithic MOSFETs, $f_{T}$ ranges from hundreds of MHz to tens of GHz.\n\n**Image Description (Figure 6.12 Bode plot of a MOSFET's current gain):**\n- **Graph Details:** The x-axis represents frequency () on a logarithmic scale ('dec' for decades), and the y-axis shows the magnitude of the current gain, |Id/Ig|, in decibels (dB).\n- **Behavior and Trends:** The plot exhibits a linear decrease in current gain with increasing frequency. At lower frequencies, the gain is very high, theoretically approaching infinity, as indicated by the dashed line. This reflects the gate's lack of dc current, leading to a high initial gain.\n- **Key Features:** The slope is -20 dB/decade, indicating a consistent gain reduction. The transition frequency (T) is a critical point where the gain drops to a level where the gate current equals the drain current.\n- **Annotations:** The plot includes markers for the slope (-20 dB/dec) and the transition frequency (T), providing clear references.\n\n**FIGURE 6.12 Bode plot of a MOSFET's current gain.**\n\n**Exercise 6.2**\n\nThe current fed forward via $C_{gd}$ in Fig. 6.11b is $I_{gd}=V_{gs} /\\left[1 /\\left(j \\omega C_{gd}\\right)\\right]$. Given $C_{gd} \\ll C_{gs}$, show that for frequencies up to at least $\\omega_{T}$, $\\left|I_{gd}\\right| \\ll\\left|g_{m} V_{gs}\\right|$, justifying the approximation $I_{d} \\cong g_{m} V_{gs}$.\n(a) For $I_{D}=100 \\mu \\mathrm{A}$ in Fig. 6.13a, determine the small-signal model values of the MOSFET and show the final circuit. Process parameters: $k^{\\prime}=250 \\mu \\mathrm{A} / \\mathrm{V}^{2}$, $C_{ox}=4 \\mathrm{fF} / \\mu \\mathrm{m}^{2}$, $\\lambda^{\\prime}=0.02 \\mu \\mathrm{m} / \\mathrm{V}$, $\\gamma=0.5 \\mathrm{~V}^{1 / 2}$, $\\phi_{p}=-0.3 \\mathrm{~V}$, $\\phi_{0}=0.6 \\mathrm{~V}$, $m=0.5$. Device parameters: $W=10 \\mu \\mathrm{m}$, $L=1.0 \\mu \\mathrm{m}$, $L_{ov}=25 \\mathrm{nm}$, $C_{sb0}=C_{db0}=10 \\mathrm{fF}$, $C_{gb}=5 \\mathrm{fF}$.\n(b) Estimate $f_{T}$.\n\n**Image Description (a):**\n- **Name:** VGS, **Type:** VoltageSource, **Value:** VGS, **Ports:** {Np: VGS, Nn: GND}\n- **Name:** R1, **Type:** Resistor, **Value:** 10 k, **Ports:** {N1: GND, N2: GND}\n- **Name:** M1, **Type:** PMOS, **Ports:** {S: V1, D: 3V, G: VGS}\n- **Extra Info:** The circuit is a PMOS transistor configuration with a current source and various capacitors and resistors for biasing and small-signal modeling.\n\n**Image Description (b):**\n- **Name:** C1, **Type:** Capacitor, **Value:** 1fF, **Ports:** {Np: G, Nn: D}\n- **Name:** C2, **Type:** Capacitor, **Value:** 28fF, **Ports:** {Np: G, Nn: S}\n- **Name:** C3, **Type:** Capacitor, **Value:** 5fF, **Ports:** {Np: G, Nn: B}\n- **Name:** C4, **Type:** Capacitor, **Value:** 6fF, **Ports:** {Np: S, Nn: B}\n- **Name:** C5, **Type:** Capacitor, **Value:** 4fF, **Ports:** {Np: B, Nn: D}\n- **Name:** G1, **Type:** VoltageControlledCurrentSource, **Value:** Vgs/1.41k, **Ports:** {Np: D, Nn: S}\n- **Name:** G2, **Type:** VoltageControlledCurrentSource, **Value:** Vbs/7.16k, **Ports:** {Np: D, Nn: S}\n- **Name:** R2, **Type:** Resistor, **Value:** 500k, **Ports:** {N1: D, N2: S}\n- **Extra Info:** The circuit represents a PMOS small-signal model with various capacitors and controlled current sources reflecting transconductance and body effect. The PMOS transistor M1 is connected with its source at node S, drain at node D, gate at node G, and body at node B.\n\n**FIGURE 6.13:** (a) Circuit of Example 6.2, and (b) the MOSFET's small-signal model values.\n\n**Solution:**\n\n(a) The device transconductance parameter is $k=k^{\\prime}(W / L)=0.25(10 / 1)=2.5 \\mathrm{mA} / \\mathrm{V}$, and the overdrive voltage is $V_{OV}=\\sqrt{2 I_{D} / k}=\\sqrt{2 \\times 0.1 / 2.5}=0.283 \\mathrm{V}$. With $V_{S}=10 \\times 0.1=1 \\mathrm{V}$ and $V_{DS}=3-1=2 \\mathrm{V}$, $V_{DS}>V_{OV}$, indicating a saturated FET. We have:\n\n$$\n\\begin{aligned}\n\\lambda & =\\lambda^{\\prime} / L=0.02 / 1=0.02 \\mathrm{V}^{-1} \\\\\nr_{o} & =\\frac{1}{\\lambda I_{D}}=\\frac{1}{0.02 \\times 0.1}=500 \\mathrm{k} \\Omega \\\\\ng_{m} & =\\sqrt{2 k I_{D}}=\\sqrt{2 \\times 2.5 \\times 0.1}=\\frac{1}{1.41 \\mathrm{k} \\Omega} \\\\\ng_{mb} & =\\frac{\\gamma g_{m}}{2 \\sqrt{V_{SB}+2\\left|\\phi_{p}\\right|}}=\\frac{0.5 / 1.41}{2 \\sqrt{1+2 \\times 0.3}}=\\frac{1}{7.16 \\mathrm{k} \\Omega}\n\\end{aligned}\n$$\n\n**EXAMPLE 6.4**\n\n$$\n\\begin{aligned}\n& C_{sb}=\\frac{C_{sb0}}{\\left(1+V_{SB} / \\phi_{0}\\right)^{m}}=\\frac{10}{(1+1 / 0.6)^{0.5}} \\cong 6 \\mathrm{fF} \\\\\n& C_{db}=\\frac{C_{db0}}{\\left(1+V_{DB} / \\phi_{0}\\right)^{m}}=\\frac{10}{(1+3 / 0.6)^{0.5}} \\cong 4 \\mathrm{fF} \\\\\n& C_{gs} \\cong \\frac{2}{3} W L C_{ox}+W L_{ov} C_{ox}=\\frac{2}{3} 10 \\times 1 \\times 4+10 \\times 0.025 \\times 4 \\cong 27+1=28 \\mathrm{fF} \\\\\n& C_{gd}=1 \\mathrm{fF}\n\\end{aligned}\n$$\n\nThe complete small-signal model is shown in Fig. 6.13b.\n(b) Using Eq. (6.24b) with $C_{gs}=33 \\mathrm{fF}$:\n\n$$\nf_{T}=\\frac{g_{m}}{2 \\pi(33+1) 10^{-15}}=3.31 \\mathrm{GHz}\n$$\n\nAs in the BJT case, examining $f_{T}$ reveals:\n\n$$\n\\begin{equation*}\nf_{T}=\\frac{\\sqrt{2 k I_{D}}}{2 \\pi\\left(C_{gs}+C_{gd}\\right)} \\tag{6.25}\n\\end{equation*}\n$$\n\nClearly, $f_{T}$ of a MOSFET increases with the square root of the bias current $I_{D}$. In contrast, at low bias currents, the $f_{T}$ of a BJT increases directly with $I_{C}$ until it saturates at $f_{T}=1 /\\left(2 \\pi \\tau_{F}\\right)$ due to minority-charge diffusion. For MOSFETs, the current is by majority-charge drift, so the limiting factors are the stray capacitances.\n\nAmong MOSFET capacitances, the dominant one is usually the first component in Eq. (6.21). Approximating Eq. (6.24b) as $f_{T} \\cong g_{m} /\\left(2 \\pi C_{gs}\\right)$ with $C_{gs} \\cong(2 / 3) W L C_{ox}$, we get:\n\n$$\nf_{T} \\cong \\frac{g_{m}}{2 \\pi(2 / 3) W L C_{ox}}=\\frac{0.75}{\\pi} \\frac{g_{m}}{W L C_{ox}}\n$$\n\nLetting $g_{m}=k V_{OV}=\\left[(W / L) \\mu_{n} C_{ox}\\right] V_{OV}$ and simplifying, the upper limit for $f_{T}$ of an n MOSFET for a given $V_{OV}$ is:\n\n$$\n\\begin{equation*}\nf_{T(\\max )}=\\frac{0.75}{\\pi} \\frac{\\mu_{n}}{L^{2}} V_{OV} \\tag{6.26}\n\\end{equation*}\n$$\n\n(For a p MOSFET, replace $\\mu_{n}$ with $\\mu_{p}$.) For fast operation, a MOSFET should have a very short channel and be of the n type, as electrons are 2 to 3 times as mobile as holes in p-type. This is similar to the BJT limit in Eq. (6.15), except $V_{T}$ is replaced by the user-imposed $V_{OV}$: higher $V_{OV}$ means faster MOSFET operation."
},
{
    "text": "As with BJTs, the frequency capability of a MOSFET is quantified by the transition frequency $f_{T}$, at which the magnitude of its small-signal current gain drops to unity. It is known that no current flows into the gate terminal at dc. However, as the operating frequency rises, the stray capacitances associated with the gate terminal draw increasing current, thereby reducing the FET's current gain. The transition frequency serves as a figure of merit for high-frequency operation and can be either calculated or measured using the ac concept illustrated in Fig. 6.11a. Specifically, a small-signal ac current $I_{g}$ is applied to the gate terminal, the current $I_{d}$ drawn by the FET with the drain at ac ground is measured, the ratio $I_{d} / I_{g}$ is taken, and the frequency $\\omega_{T}$ at which $\\left|I_{d} / I_{g}\\right|=1$, or 0 dB, is determined.\n\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: GND, G: V1}\nname: Ig, type: CurrentSource, value: Ig, ports: {Np: G, Nn: GND}\n]\nextrainfo:The circuit is used to determine the transition frequency f_T of an NMOS transistor by applying a small-signal ac current Ig to the gate terminal and measuring the resulting drain current Id. The drain is at ac ground, making ro and Cdb irrelevant, and placing Cgd in parallel with Cgs.\n\nimage_name:(b)\ndescription:\n[\nname: Ig, type: CurrentSource, value: Ig, ports: {Np: G, Nn: GND}\nname: Cgs, type: Capacitor, value: Cgs, ports: {Np: G, Nn: S}\nname: Cgd, type: Capacitor, value: Cgd, ports: {Np: G, Nn: D}\nname: g_mV_gs, type: VoltageControlledCurrentSource, value: g_mV_gs, ports: {Np: D, Nn: S}\nname: ro, type: Resistor, value: ro, ports: {N1: D, N2: S}\nname: Cdb, type: Capacitor, value: Cdb, ports: {Np: D, Nn: GND}\n]\nextrainfo:The circuit diagram (b) represents a small-signal equivalent model for analyzing the transition frequency (f_T) of an NMOS transistor. The drain is shorted to ground, making r_o and C_db irrelevant. C_gd is in parallel with C_gs, and the body and source are tied together, simplifying the analysis.\n\nFIGURE 6.11 (a) Ac circuit to find $f_{T}$, and (b) its small-signal equivalent.\n\nReferring to the equivalent circuit in Fig. 6.11b, we observe that shorting the drain to ground makes $r_{o}$ and $C_{d b}$ irrelevant, placing $C_{g d}$ in parallel with $C_{g s}$. Additionally, with the body and source connected, $C_{g s}$ is given by Eq. (6.20). Applying the generalized Ohm's law,\n\n$$\nV_{g s}=\\frac{1}{s\\left(C_{g s}+C_{g d}\\right)} I_{g}\n$$\n\nSimilar to the BJT case, it can be verified that over the frequency range of interest, the current fed forward via $C_{g d}$ is negligible compared to that of the dependent source, allowing us to approximate\n\n$$\nI_{d} \\cong g_{m} V_{g s}=\\frac{g_{m}}{s\\left(C_{g s}+C_{g d}\\right)} I_{g}\n$$\n\nTaking the ratio $I_{d} / I_{g}$ and letting $s \\rightarrow j \\omega$, we obtain\n\n$$\n\\begin{equation*}\n\\frac{I_{d}}{I_{g}}=\\frac{1}{j \\omega / \\omega_{T}} \\tag{6.23}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\n\\omega_{T}=\\frac{g_{m}}{C_{g s}+C_{g d}} \\tag{6.24a}\n\\end{equation*}\n$$\n\nor alternatively,\n\n$$\n\\begin{equation*}\nf_{T}=\\frac{g_{m}}{2 \\pi\\left(C_{g s}+C_{g d}\\right)} \\tag{6.24b}\n\\end{equation*}\n$$\n\n(Note the formal similarity with Eq. (6.12) of the BJT.) Since $g_{m}$ depends on the bias current $I_{D}$, so does $f_{T}$. Figure 6.12 displays the Bode plot of the MOSFET's current gain. At low frequencies, the gain tends to infinity because the gate draws no dc current. However, at $f=f_{T}$, the current entering the gate equals the current drawn by the drain. In contemporary monolithic MOSFETs, $f_{T}$ ranges from hundreds of MHz to tens of GHz.\n\nimage_name:Figure 6.12 Bode plot of a MOSFET's current gain\ndescription:The graph in Figure 6.12 is a Bode plot illustrating the current gain of a MOSFET. The x-axis represents frequency () on a logarithmic scale, denoted as 'dec' for decades, while the y-axis represents the magnitude of the current gain, |Id/Ig|, measured in decibels (dB).\n\nOverall Behavior and Trends\nThe plot shows a linear decrease in the current gain with increasing frequency. At lower frequencies, the gain is very high, theoretically approaching infinity, as indicated by the dashed line extending upwards. This reflects the fact that the gate of the MOSFET draws no direct current, resulting in a high initial gain.\n\nAs the frequency increases, the gain decreases linearly at a rate of -20 dB per decade. This trend continues until the frequency reaches a specific point labeled as T, which is the transition frequency. At this point, the current entering the gate equals the current drawn by the drain, marking a significant change in behavior.\n\nKey Features and Technical Details\n- **Slope:** The linear decrease is characterized by a slope of -20 dB/decade, indicating a consistent reduction in gain with increasing frequency.\n- **Transition Frequency (T):** This is a critical point on the graph where the gain is reduced to a level where the gate current equals the drain current. It represents the frequency at which the MOSFET's gain starts to significantly diminish.\n\nAnnotations and Specific Data Points\n- The plot includes a visual marker for the slope (-20 dB/dec) and the transition frequency (T), providing a clear reference for these critical points.\n\nThis Bode plot effectively demonstrates the frequency-dependent behavior of a MOSFET's current gain, highlighting the importance of T in determining the operational bandwidth of the device.\n\nFIGURE 6.12 Bode plot of a MOSFET's current gain.\n\n#### Exercise 6.2\n\nThe current fed forward via $C_{g d}$ in Fig. $6.11 b$ is $I_{g d}=V_{g s} /\\left[1 /\\left(j \\omega C_{g d}\\right)\\right]$. By exploiting the fact that $C_{g d} \\ll C_{g s}$, show that for frequencies up to at least $\\omega_{T}$, we have $\\left|I_{g d}\\right| \\ll\\left|g_{m} V_{g s}\\right|$, thus justifying the approximation $I_{d} \\cong g_{m} V_{g s}$.\n(a) Assuming $V_{G S}$ has been adjusted for $I_{D}=100 \\mu \\mathrm{~A}$ in the circuit of Fig. 6.13a, find the element values in the small-signal model of the MOSFET, and show the final circuit. The process parameters are: $k^{\\prime}=250 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, C_{o x}=4 \\mathrm{fF} / \\mu \\mathrm{m}^{2}$, $\\lambda^{\\prime}=0.02 \\mu \\mathrm{~m} / \\mathrm{V}, \\gamma=0.5 \\mathrm{~V}^{1 / 2}, \\phi_{p}=-0.3 \\mathrm{~V}$, $\\phi_{0}=0.6 \\mathrm{~V}$, and $m=0.5$. The device parameters are $W=10 \\mu \\mathrm{~m}, L=1.0 \\mu \\mathrm{~m}, L_{o v}=25 \\mathrm{~nm}, C_{s b 0}=C_{d b 0}=10 \\mathrm{fF}$, and $C_{g b}=5 \\mathrm{fF}$.\n(b) Estimate $f_{T}$.\n\nimage_name:(a)\ndescription:\n[\nname: VGS, type: VoltageSource, value: VGS, ports: {Np: VGS, Nn: GND}\nname: R1, type: Resistor, value: 10 k, ports: {N1: GND, N2: GND}\nname: M1, type: PMOS, ports: {S: V1, D: 3V, G: VGS}\n]\nextrainfo:The circuit is a PMOS transistor configuration with a current source and various capacitors and resistors for biasing and small-signal modeling. It includes voltage-controlled current sources representing transconductance effects.\n\nimage_name:(b)\ndescription:\n[\nname: C1, type: Capacitor, value: 1fF, ports: {Np: G, Nn: D}\nname: C2, type: Capacitor, value: 28fF, ports: {Np: G, Nn: S}\nname: C3, type: Capacitor, value: 5fF, ports: {Np: G, Nn: B}\nname: C4, type: Capacitor, value: 6fF, ports: {Np: S, Nn: B}\nname: C5, type: Capacitor, value: 4fF, ports: {Np: B, Nn: D}\nname: G1, type: VoltageControlledCurrentSource, value: Vgs/1.41k, ports: {Np: D, Nn: S}\nname: G2, type: VoltageControlledCurrentSource, value: Vbs/7.16k, ports: {Np: D, Nn: S}\nname: R2, type: Resistor, value: 500k, ports: {N1: D, N2: S}\n]\nextrainfo:The circuit represents a PMOS small-signal model with various capacitors and controlled current sources reflecting the transconductance and body effect. The PMOS transistor M1 is connected with its source at node S, drain at node D, gate at node G, and body at node B. The voltage sources and capacitors are connected to these nodes as per the small-signal model configuration.\n\nFIGURE 6.13 (a) Circuit of Example 6.2, and (b) the MOSFET's small-signal model values.\n\n#### Solution\n\n(a) The device transconductance parameter is $k=k^{\\prime}(W / L)=0.25(10 / 1)=$ $2.5 \\mathrm{~mA} / \\mathrm{V}$, and the overdrive voltage is $V_{O V}=\\sqrt{2 I_{D} / k}=\\sqrt{2 \\times 0.1 / 2.5}=$ 0.283 V. Since $V_{S}=10 \\times 0.1=1 \\mathrm{~V}$ and $V_{D S}=3-1=2 \\mathrm{~V}$, it follows that $V_{D S}>V_{O V}$, indicating a saturated FET. We have\n\n$$\n\\begin{aligned}\n\\lambda & =\\lambda^{\\prime} / L=0.02 / 1=0.02 \\mathrm{~V}^{-1} \\\\\nr_{o} & =\\frac{1}{\\lambda I_{D}}=\\frac{1}{0.02 \\times 0.1}=500 \\mathrm{k} \\Omega \\\\\ng_{m} & =\\sqrt{2 k I_{D}}=\\sqrt{2 \\times 2.5 \\times 0.1}=\\frac{1}{1.41 \\mathrm{k} \\Omega} \\\\\ng_{m b} & =\\frac{\\gamma g_{m}}{2 \\sqrt{V_{S B}+2\\left|\\phi_{p}\\right|}}=\\frac{0.5 / 1.41}{2 \\sqrt{1+2 \\times 0.3}}=\\frac{1}{7.16 \\mathrm{k} \\Omega}\n\\end{aligned}\n$$\n\n#### EXAMPLE 6.4\n\n$$\n\\begin{aligned}\n& C_{s b}=\\frac{C_{s b 0}}{\\left(1+v_{S B} / \\phi_{0}\\right)^{m}}=\\frac{10}{(1+1 / 0.6)^{0.5}} \\cong 6 \\mathrm{fF} \\\\\n& C_{d b}=\\frac{C_{d b 0}}{\\left(1+v_{D B} / \\phi_{0}\\right)^{m}}=\\frac{10}{(1+3 / 0.6)^{0.5}} \\cong 4 \\mathrm{fF} \\\\\n& C_{g s} \\cong \\frac{2}{3} W L C_{o x}+W L_{o v} C_{o x}=\\frac{2}{3} 10 \\times 1 \\times 4+10 \\times 0.025 \\times 4 \\cong 27+1=28 \\mathrm{fF} \\\\\n& C_{g d}=1 \\mathrm{fF}\n\\end{aligned}\n$$\n\nThe complete small-signal model is shown in Fig. 6.13b.\n(b) To estimate $f_{T}$ using Eq. (6.24b), but with $C_{g s}$ as in Eq. (6.22), namely, $C_{g s}=27+$ $1+5=33 \\mathrm{fF}$, we get\n\n$$\nf_{T}=\\frac{g_{m}}{2 \\pi\\left(C_{g s}+C_{g d}\\right)}=\\frac{1 /\\left(1.41 \\times 10^{3}\\right)}{2 \\pi(33+1) 10^{-15}}=3.31 \\mathrm{GHz}\n$$\n\nAs in the BJT case, it is instructive to examine $f_{T}$ more closely, which we now express as\n\n$$\n\\begin{equation*}\nf_{T}=\\frac{\\sqrt{2 k I_{D}}}{2 \\pi\\left(C_{g s}+C_{g d}\\right)} \\tag{6.25}\n\\end{equation*}\n$$\n\nClearly, the $f_{T}$ of a MOSFET increases with the square root of the bias current $I_{D}$. By contrast, at sufficiently low bias currents, the $f_{T}$ of a BJT increases directly with $I_{C}$. This increase continues until it saturates at $f_{T}=1 /\\left(2 \\pi \\tau_{F}\\right)$ due to the fact that current in a BJT is the result of minority-charge diffusion. In contrast, the current of a FET is by majority-charge drift, so the limiting factors in this case are exclusively the stray capacitances.\n\nOf all the capacitances in a MOSFET, the dominant one is usually the first component in the right-hand side of Eq. (6.21). If we approximate Eq. (6.24b) as $f_{T} \\cong$ $g_{m} /\\left(2 \\pi C_{g s}\\right)$ with $C_{g s} \\cong(2 / 3) W L C_{o x}$, then\n\n$$\nf_{T} \\cong \\frac{g_{m}}{2 \\pi(2 / 3) W L C_{o x}}=\\frac{0.75}{\\pi} \\frac{g_{m}}{W L C_{o x}}\n$$\n\nLetting $g_{m}=k V_{O V}=\\left[(W / L) \\mu_{n} C_{o x}\\right] V_{O V}$ and simplifying, we can place an upper limit on the $f_{T}$ of an $n$ MOSFET for a given $V_{O V}$ by writing\n\n$$\n\\begin{equation*}\nf_{T(\\max )}=\\frac{0.75}{\\pi} \\frac{\\mu_{n}}{L^{2}} V_{O V} \\tag{6.26}\n\\end{equation*}\n$$\n\n(For a $p$ MOSFET, replace $\\mu_{n}$ with $\\mu_{p}$.) It is apparent that for fast operation, a MOSFET should have a very short channel and be of the $n$ type, as electrons are 2 to 3 times as mobile as the holes of a $p$-type. Note the striking similarity to the BJT limit of Eq. (6.15), except for the replacement of the (fixed) thermal voltage $V_{T}$ by the (user-imposed) overdrive voltage $V_{O V}$: the higher $V_{O V}$, the faster the MOSFET is likely to operate."
},
{
    "text": "As with the BJT, the MOSFET's frequency capability is quantified by the transition frequency $f_{T}$, at which its small-signal current gain drops to unity. It's known that no current flows into the gate at dc. However, as the operating frequency rises, the gate's stray capacitances draw more current, reducing the FET's current gain. The transition frequency is a key metric for high-frequency performance and can be calculated or measured using the ac setup in Fig. 6.11a. Specifically, a small-signal ac current $I_{g}$ is applied to the gate, the resulting drain current $I_{d}$ is measured with the drain at ac ground, the ratio $I_{d} / I_{g}$ is taken, and the frequency $\\omega_{T}$ at which $\\left|I_{d} / I_{g}\\right|=1$, or 0 dB, is determined.\n\n**Image Description (a):**\n- **Component Details:**\n  - **M1:** Type: NMOS, Ports: S connected to GND, D connected to GND, G connected to V1\n  - **Ig:** Type: CurrentSource, Value: Ig, Ports: Np connected to G, Nn connected to GND\n- **Additional Info:** This circuit is used to determine the transition frequency $f_{T}$ of an NMOS transistor by applying a small-signal ac current $I_{g}$ to the gate and measuring the drain current $I_{d}$. The drain is at ac ground, rendering $r_{o}$ and $C_{db}$ irrelevant, with $C_{gd}$ in parallel with $C_{gs}$.\n\n**Image Description (b):**\n- **Component Details:**\n  - **Ig:** Type: CurrentSource, Value: Ig, Ports: Np connected to G, Nn connected to GND\n  - **Cgs:** Type: Capacitor, Value: Cgs, Ports: Np connected to G, Nn connected to S\n  - **Cgd:** Type: Capacitor, Value: Cgd, Ports: Np connected to G, Nn connected to D\n  - **g_mV_gs:** Type: VoltageControlledCurrentSource, Value: g_mV_gs, Ports: Np connected to D, Nn connected to S\n  - **ro:** Type: Resistor, Value: ro, Ports: N1 connected to D, N2 connected to S\n  - **Cdb:** Type: Capacitor, Value: Cdb, Ports: Np connected to D, Nn connected to GND\n- **Additional Info:** This small-signal equivalent model (b) is for analyzing the transition frequency ($f_{T}$) of an NMOS transistor. The drain is shorted to ground, making $r_{o}$ and $C_{db}$ irrelevant. $C_{gd}$ is in parallel with $C_{gs}$, and the body and source are tied together, simplifying the analysis.\n\n**FIGURE 6.11:** (a) Ac circuit to determine $f_{T}$, and (b) its small-signal equivalent.\n\nReferring to the equivalent circuit in Fig. 6.11b, shorting the drain to ground makes $r_{o}$ and $C_{db}$ irrelevant, placing $C_{gd}$ in parallel with $C_{gs}$. With the body and source connected, $C_{gs}$ is given by Eq. (6.20). Applying the generalized Ohm's law:\n\n$$\nV_{g s}=\\frac{1}{s\\left(C_{g s}+C_{g d}\\right)} I_{g}\n$$\n\nSimilar to the BJT, it can be verified that over the frequency range of interest, the current through $C_{g d}$ is negligible compared to the dependent source, so we approximate:\n\n$$\nI_{d} \\cong g_{m} V_{g s}=\\frac{g_{m}}{s\\left(C_{g s}+C_{g d}\\right)} I_{g}\n$$\n\nTaking the ratio $I_{d} / I_{g}$ and letting $s \\rightarrow j \\omega$, we get:\n\n$$\n\\begin{equation*}\n\\frac{I_{d}}{I_{g}}=\\frac{1}{j \\omega / \\omega_{T}} \\tag{6.23}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\n\\omega_{T}=\\frac{g_{m}}{C_{g s}+C_{g d}} \\tag{6.24a}\n\\end{equation*}\n$$\n\nor alternatively,\n\n$$\n\\begin{equation*}\nf_{T}=\\frac{g_{m}}{2 \\pi\\left(C_{g s}+C_{g d}\\right)} \\tag{6.24b}\n\\end{equation*}\n$$\n\n(Note the similarity to Eq. (6.12) of the BJT.) Since $g_{m}$ depends on the bias current $I_{D}$, so does $f_{T}$. Figure 6.12 shows the Bode plot of the MOSFET's current gain. At low frequencies, the gain tends to infinity due to the gate drawing no dc current. At $f=f_{T}$, the gate current equals the drain current. In current monolithic MOSFETs, $f_{T}$ ranges from hundreds of MHz to tens of GHz.\n\n**Image Description (Figure 6.12):**\n- **Graph Details:**\n  - **X-axis:** Frequency () on a logarithmic scale, labeled 'dec' for decades\n  - **Y-axis:** Magnitude of current gain, |Id/Ig|, in decibels (dB)\n- **Behavior and Trends:**\n  - The plot shows a linear decrease in gain with increasing frequency. At lower frequencies, the gain is very high, theoretically approaching infinity, indicated by a dashed line extending upwards, reflecting the gate's lack of dc current draw.\n  - As frequency increases, the gain decreases linearly at -20 dB per decade until reaching T, where the gate current equals the drain current.\n- **Key Features:**\n  - **Slope:** -20 dB/decade, indicating consistent gain reduction with frequency.\n  - **Transition Frequency (T):** The point where gain reduces significantly, marking a critical change in behavior.\n\n**FIGURE 6.12 Bode plot of a MOSFET's current gain.**\n\n#### Exercise 6.2\n\nThe current through $C_{g d}$ in Fig. 6.11b is $I_{g d}=V_{g s} /\\left[1 /\\left(j \\omega C_{g d}\\right)\\right]$. Given $C_{g d} \\ll C_{g s}$, show that for frequencies up to at least $\\omega_{T}$, $\\left|I_{g d}\\right| \\ll\\left|g_{m} V_{g s}\\right|$, justifying the approximation $I_{d} \\cong g_{m} V_{g s}$.\n(a) For $I_{D}=100 \\mu \\mathrm{~A}$ in Fig. 6.13a, determine the small-signal model values and show the final circuit. Process parameters: $k^{\\prime}=250 \\mu \\mathrm{~A} / \\mathrm{V}^{2}$, $C_{o x}=4 \\mathrm{fF} / \\mu \\mathrm{m}^{2}$, $\\lambda^{\\prime}=0.02 \\mu \\mathrm{~m} / \\mathrm{V}$, $\\gamma=0.5 \\mathrm{~V}^{1 / 2}$, $\\phi_{p}=-0.3 \\mathrm{~V}$, $\\phi_{0}=0.6 \\mathrm{~V}$, $m=0.5$. Device parameters: $W=10 \\mu \\mathrm{~m}$, $L=1.0 \\mu \\mathrm{~m}$, $L_{o v}=25 \\mathrm{~nm}$, $C_{s b 0}=C_{d b 0}=10 \\mathrm{fF}$, $C_{g b}=5 \\mathrm{fF}$.\n(b) Estimate $f_{T}$.\n\n**Image Description (a):**\n- **Component Details:**\n  - **VGS:** Type: VoltageSource, Value: VGS, Ports: Np connected to VGS, Nn connected to GND\n  - **R1:** Type: Resistor, Value: 10 k, Ports: N1 connected to GND, N2 connected to GND\n  - **M1:** Type: PMOS, Ports: S connected to V1, D connected to 3V, G connected to VGS\n- **Additional Info:** This PMOS transistor configuration includes a current source and various capacitors and resistors for biasing and small-signal modeling, with voltage-controlled current sources representing transconductance effects.\n\n**Image Description (b):**\n- **Component Details:**\n  - **C1:** Type: Capacitor, Value: 1fF, Ports: Np connected to G, Nn connected to D\n  - **C2:** Type: Capacitor, Value: 28fF, Ports: Np connected to G, Nn connected to S\n  - **C3:** Type: Capacitor, Value: 5fF, Ports: Np connected to G, Nn connected to B\n  - **C4:** Type: Capacitor, Value: 6fF, Ports: Np connected to S, Nn connected to B\n  - **C5:** Type: Capacitor, Value: 4fF, Ports: Np connected to B, Nn connected to D\n  - **G1:** Type: VoltageControlledCurrentSource, Value: Vgs/1.41k, Ports: Np connected to D, Nn connected to S\n  - **G2:** Type: VoltageControlledCurrentSource, Value: Vbs/7.16k, Ports: Np connected to D, Nn connected to S\n  - **R2:** Type: Resistor, Value: 500k, Ports: N1 connected to D, N2 connected to S\n- **Additional Info:** This PMOS small-signal model includes various capacitors and controlled current sources reflecting transconductance and body effect. The PMOS transistor M1 is connected with its source at node S, drain at node D, gate at node G, and body at node B. Voltage sources and capacitors are connected as per the small-signal model configuration.\n\n**FIGURE 6.13:** (a) Circuit of Example 6.2, and (b) the MOSFET's small-signal model values.\n\n#### Solution\n\n(a) The device transconductance parameter is $k=k^{\\prime}(W / L)=0.25(10 / 1)=2.5 \\mathrm{~mA} / \\mathrm{V}$, and the overdrive voltage is $V_{O V}=\\sqrt{2 I_{D} / k}=\\sqrt{2 \\times 0.1 / 2.5}=0.283 \\mathrm{~V}$. With $V_{S}=10 \\times 0.1=1 \\mathrm{~V}$ and $V_{D S}=3-1=2 \\mathrm{~V}$, $V_{D S}>V_{O V}$, indicating a saturated FET. We have:\n\n$$\n\\begin{aligned}\n\\lambda & =\\lambda^{\\prime} / L=0.02 / 1=0.02 \\mathrm{~V}^{-1} \\\\\nr_{o} & =\\frac{1}{\\lambda I_{D}}=\\frac{1}{0.02 \\times 0.1}=500 \\mathrm{k} \\Omega \\\\\ng_{m} & =\\sqrt{2 k I_{D}}=\\sqrt{2 \\times 2.5 \\times 0.1}=\\frac{1}{1.41 \\mathrm{k} \\Omega} \\\\\ng_{m b} & =\\frac{\\gamma g_{m}}{2 \\sqrt{V_{S B}+2\\left|\\phi_{p}\\right|}}=\\frac{0.5 / 1.41}{2 \\sqrt{1+2 \\times 0.3}}=\\frac{1}{7.16 \\mathrm{k} \\Omega}\n\\end{aligned}\n$$\n\n#### EXAMPLE 6.4\n\n$$\n\\begin{aligned}\n& C_{s b}=\\frac{C_{s b 0}}{\\left(1+v_{S B} / \\phi_{0}\\right)^{m}}=\\frac{10}{(1+1 / 0.6)^{0.5}} \\cong 6 \\mathrm{fF} \\\\\n& C_{d b}=\\frac{C_{d b 0}}{\\left(1+v_{D B} / \\phi_{0}\\right)^{m}}=\\frac{10}{(1+3 / 0.6)^{0.5}} \\cong 4 \\mathrm{fF} \\\\\n& C_{g s} \\cong \\frac{2}{3} W L C_{o x}+W L_{o v} C_{o x}=\\frac{2}{3} 10 \\times 1 \\times 4+10 \\times 0.025 \\times 4 \\cong 27+1=28 \\mathrm{fF} \\\\\n& C_{g d}=1 \\mathrm{fF}\n\\end{aligned}\n$$\n\nThe complete small-signal model is shown in Fig. 6.13b.\n(b) Using Eq. (6.24b) with $C_{g s}=27+1+5=33 \\mathrm{fF}$:\n\n$$\nf_{T}=\\frac{g_{m}}{2 \\pi\\left(C_{g s}+C_{g d}\\right)}=\\frac{1 /\\left(1.41 \\times 10^{3}\\right)}{2 \\pi(33+1) 10^{-15}}=3.31 \\mathrm{GHz}\n$$\n\nAs with the BJT, examining $f_{T}$ reveals:\n\n$$\n\\begin{equation*}\nf_{T}=\\frac{\\sqrt{2 k I_{D}}}{2 \\pi\\left(C_{g s}+C_{g d}\\right)} \\tag{6.25}\n\\end{equation*}\n$$\n\nClearly, $f_{T}$ of a MOSFET increases with the square root of the bias current $I_{D}$. In contrast, at low bias currents, the BJT's $f_{T}$ increases directly with $I_{C}$ until it saturates at $f_{T}=1 /\\left(2 \\pi \\tau_{F}\\right)$ due to minority-charge diffusion. For MOSFETs, the current is by majority-charge drift, so the limiting factors are solely the stray capacitances.\n\nAmong MOSFET capacitances, the dominant one is usually the first component in Eq. (6.21). If we approximate Eq. (6.24b) as $f_{T} \\cong g_{m} /\\left(2 \\pi C_{g s}\\right)$ with $C_{g s} \\cong(2 / 3) W L C_{o x}$, then:\n\n$$\nf_{T} \\cong \\frac{g_{m}}{2 \\pi(2 / 3) W L C_{o x}}=\\frac{0.75}{\\pi} \\frac{g_{m}}{W L C_{o x}}\n$$\n\nLetting $g_{m}=k V_{O V}=\\left[(W / L) \\mu_{n} C_{o x}\\right] V_{O V}$ and simplifying, the upper limit for the $f_{T}$ of an $n$ MOSFET for a given $V_{O V}$ is:\n\n$$\n\\begin{equation*}\nf_{T(\\max )}=\\frac{0.75}{\\pi} \\frac{\\mu_{n}}{L^{2}} V_{O V} \\tag{6.26}\n\\end{equation*}\n$$\n\n(For a $p$ MOSFET, replace $\\mu_{n}$ with $\\mu_{p}$.) For fast operation, a MOSFET should have a very short channel and be of the $n$ type, as electrons are 2 to 3 times as mobile as holes in $p$-type. This parallels the BJT limit of Eq. (6.15), except for the replacement of the thermal voltage $V_{T}$ with the overdrive voltage $V_{O V}$: higher $V_{O V}$ means faster potential MOSFET operation."
},
{
    "text": "Like in the BJT scenario, the frequency capability of a MOSFET is quantified by the transition frequency $f_{T}$, at which the magnitude of its small-signal current gain drops to unity. It is well-known that no current flows into the gate terminal at dc. However, as the operating frequency rises, the parasitic capacitances associated with the gate terminal draw increasing current, thereby reducing the FET's current gain. The transition frequency serves as a metric for high-frequency performance and can be either calculated or measured using the ac concept depicted in Fig. 6.11a. Specifically, a small-signal ac current $I_{g}$ is applied to the gate terminal, the current $I_{d}$ drawn by the FET with the drain at ac ground is measured, the ratio $I_{d} / I_{g}$ is taken, and the frequency $\\omega_{T}$ at which $\\left|I_{d} / I_{g}\\right|=1$, or 0 dB, is determined.\n\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: GND, G: V1}\nname: Ig, type: CurrentSource, value: Ig, ports: {Np: G, Nn: GND}\n]\nextrainfo:The circuit is used to determine the transition frequency f_T of an NMOS transistor by applying a small-signal ac current Ig to the gate terminal and measuring the resulting drain current Id. The drain is at ac ground, making ro and Cdb irrelevant, and placing Cgd in parallel with Cgs.\n\nimage_name:(b)\ndescription:\n[\nname: Ig, type: CurrentSource, value: Ig, ports: {Np: G, Nn: GND}\nname: Cgs, type: Capacitor, value: Cgs, ports: {Np: G, Nn: S}\nname: Cgd, type: Capacitor, value: Cgd, ports: {Np: G, Nn: D}\nname: g_mV_gs, type: VoltageControlledCurrentSource, value: g_mV_gs, ports: {Np: D, Nn: S}\nname: ro, type: Resistor, value: ro, ports: {N1: D, N2: S}\nname: Cdb, type: Capacitor, value: Cdb, ports: {Np: D, Nn: GND}\n]\nextrainfo:The circuit diagram (b) represents a small-signal equivalent model for analyzing the transition frequency (f_T) of an NMOS transistor. The drain is shorted to ground, making r_o and C_db irrelevant. C_gd is in parallel with C_gs, and the body and source are tied together, simplifying the analysis.\n\nFIGURE 6.11 (a) Ac circuit to find $f_{T}$, and (b) its small-signal equivalent.\n\nReferring to the equivalent circuit in Fig. 6.11b, we observe that shorting the drain to ground makes $r_{o}$ and $C_{d b}$ irrelevant, placing $C_{g d}$ in parallel with $C_{g s}$. Additionally, with the body and source connected, $C_{g s}$ is given by Eq. (6.20). Applying the generalized Ohm's law,\n\n$$\nV_{g s}=\\frac{1}{s\\left(C_{g s}+C_{g d}\\right)} I_{g}\n$$\n\nSimilar to the BJT case, it can be verified that within our frequency range of interest, the current fed forward via $C_{g d}$ is negligible compared to that of the dependent source, allowing us to approximate\n\n$$\nI_{d} \\cong g_{m} V_{g s}=\\frac{g_{m}}{s\\left(C_{g s}+C_{g d}\\right)} I_{g}\n$$\n\nTaking the ratio $I_{d} / I_{g}$ and letting $s \\rightarrow j \\omega$, we obtain\n\n$$\n\\begin{equation*}\n\\frac{I_{d}}{I_{g}}=\\frac{1}{j \\omega / \\omega_{T}} \\tag{6.23}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\n\\omega_{T}=\\frac{g_{m}}{C_{g s}+C_{g d}} \\tag{6.24a}\n\\end{equation*}\n$$\n\nor alternatively,\n\n$$\n\\begin{equation*}\nf_{T}=\\frac{g_{m}}{2 \\pi\\left(C_{g s}+C_{g d}\\right)} \\tag{6.24b}\n\\end{equation*}\n$$\n\n(Note the formal similarity with Eq. (6.12) of the BJT.) Since $g_{m}$ depends on the bias current $I_{D}$, so does $f_{T}$. Figure 6.12 illustrates the Bode plot of the MOSFET's current gain. At low frequencies, this gain tends to infinity due to the absence of dc current into the gate. However, at $f=f_{T}$, the gate current equals the drain current. In contemporary monolithic MOSFETs, $f_{T}$ ranges from hundreds of MHz to tens of GHz.\n\nimage_name:Figure 6.12 Bode plot of a MOSFET's current gain\ndescription:The graph in Figure 6.12 is a Bode plot depicting the current gain of a MOSFET. The x-axis represents frequency () on a logarithmic scale, labeled as 'dec' for decades, while the y-axis shows the magnitude of the current gain, |Id/Ig|, in decibels (dB).\n\nOverall Behavior and Trends\nThe plot exhibits a linear decrease in current gain with increasing frequency. At lower frequencies, the gain is very high, theoretically approaching infinity, as indicated by the dashed line extending upwards. This reflects the fact that the MOSFET's gate draws no direct current, resulting in a high initial gain.\n\nAs the frequency increases, the gain decreases linearly at a rate of -20 dB per decade. This trend continues until the frequency reaches a specific point labeled as T, the transition frequency. At this point, the gate current equals the drain current, marking a significant change in behavior.\n\nKey Features and Technical Details\n- **Slope:** The linear decrease is characterized by a slope of -20 dB/decade, indicating a consistent reduction in gain with increasing frequency.\n- **Transition Frequency (T):** This is a critical point on the graph where the gain is reduced to a level where the gate current equals the drain current. It represents the frequency at which the MOSFET's gain starts to significantly diminish.\n\nAnnotations and Specific Data Points\n- The plot includes a visual marker for the slope (-20 dB/dec) and the transition frequency (T), providing a clear reference for these critical points.\n\nThis Bode plot effectively demonstrates the frequency-dependent behavior of a MOSFET's current gain, highlighting the importance of T in determining the operational bandwidth of the device.\n\nFIGURE 6.12 Bode plot of a MOSFET's current gain.\n\n#### Exercise 6.2\n\nThe current fed forward via $C_{g d}$ in Fig. $6.11 b$ is $I_{g d}=V_{g s} /\\left[1 /\\left(j \\omega C_{g d}\\right)\\right]$. Exploiting the fact that $C_{g d} \\ll C_{g s}$, show that for frequencies up to at least $\\omega_{T}$, we have $\\left|I_{g d}\\right| \\ll\\left|g_{m} V_{g s}\\right|$, thus justifying the approximation $I_{d} \\cong g_{m} V_{g s}$.\n(a) Assuming $V_{G S}$ has been adjusted for $I_{D}=100 \\mu \\mathrm{~A}$ in the circuit of Fig. 6.13a, find the element values in the small-signal model of the MOSFET, and show the final circuit. The process parameters are: $k^{\\prime}=250 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, C_{o x}=4 \\mathrm{fF} / \\mu \\mathrm{m}^{2}$, $\\lambda^{\\prime}=0.02 \\mu \\mathrm{~m} / \\mathrm{V}, \\gamma=0.5 \\mathrm{~V}^{1 / 2}, \\phi_{p}=-0.3 \\mathrm{~V}$, $\\phi_{0}=0.6 \\mathrm{~V}$, and $m=0.5$. The device parameters are $W=10 \\mu \\mathrm{~m}, L=1.0 \\mu \\mathrm{~m}, L_{o v}=25 \\mathrm{~nm}, C_{s b 0}=C_{d b 0}=10 \\mathrm{fF}$, and $C_{g b}=5 \\mathrm{fF}$.\n(b) Estimate $f_{T}$.\n\nimage_name:(a)\ndescription:\n[\nname: VGS, type: VoltageSource, value: VGS, ports: {Np: VGS, Nn: GND}\nname: R1, type: Resistor, value: 10 k, ports: {N1: GND, N2: GND}\nname: M1, type: PMOS, ports: {S: V1, D: 3V, G: VGS}\n]\nextrainfo:The circuit is a PMOS transistor configuration with a current source and various capacitors and resistors for biasing and small-signal modeling. It includes voltage-controlled current sources representing transconductance effects.\n\nimage_name:(b)\ndescription:\n[\nname: C1, type: Capacitor, value: 1fF, ports: {Np: G, Nn: D}\nname: C2, type: Capacitor, value: 28fF, ports: {Np: G, Nn: S}\nname: C3, type: Capacitor, value: 5fF, ports: {Np: G, Nn: B}\nname: C4, type: Capacitor, value: 6fF, ports: {Np: S, Nn: B}\nname: C5, type: Capacitor, value: 4fF, ports: {Np: B, Nn: D}\nname: G1, type: VoltageControlledCurrentSource, value: Vgs/1.41k, ports: {Np: D, Nn: S}\nname: G2, type: VoltageControlledCurrentSource, value: Vbs/7.16k, ports: {Np: D, Nn: S}\nname: R2, type: Resistor, value: 500k, ports: {N1: D, N2: S}\n]\nextrainfo:The circuit represents a PMOS small-signal model with various capacitors and controlled current sources reflecting the transconductance and body effect. The PMOS transistor M1 is connected with its source at node S, drain at node D, gate at node G, and body at node B. The voltage sources and capacitors are connected to these nodes as per the small-signal model configuration.\n\nFIGURE 6.13 (a) Circuit of Example 6.2, and (b) the MOSFET's small-signal model values.\n\n#### Solution\n\n(a) The device transconductance parameter is $k=k^{\\prime}(W / L)=0.25(10 / 1)=$ $2.5 \\mathrm{~mA} / \\mathrm{V}$, and the overdrive voltage is $V_{O V}=\\sqrt{2 I_{D} / k}=\\sqrt{2 \\times 0.1 / 2.5}=$ 0.283 V. Since $V_{S}=10 \\times 0.1=1 \\mathrm{~V}$ and $V_{D S}=3-1=2 \\mathrm{~V}$, it follows that $V_{D S}>V_{O V}$, indicating a saturated FET. We have\n\n$$\n\\begin{aligned}\n\\lambda & =\\lambda^{\\prime} / L=0.02 / 1=0.02 \\mathrm{~V}^{-1} \\\\\nr_{o} & =\\frac{1}{\\lambda I_{D}}=\\frac{1}{0.02 \\times 0.1}=500 \\mathrm{k} \\Omega \\\\\ng_{m} & =\\sqrt{2 k I_{D}}=\\sqrt{2 \\times 2.5 \\times 0.1}=\\frac{1}{1.41 \\mathrm{k} \\Omega} \\\\\ng_{m b} & =\\frac{\\gamma g_{m}}{2 \\sqrt{V_{S B}+2\\left|\\phi_{p}\\right|}}=\\frac{0.5 / 1.41}{2 \\sqrt{1+2 \\times 0.3}}=\\frac{1}{7.16 \\mathrm{k} \\Omega}\n\\end{aligned}\n$$\n\n#### EXAMPLE 6.4\n\n$$\n\\begin{aligned}\n& C_{s b}=\\frac{C_{s b 0}}{\\left(1+v_{S B} / \\phi_{0}\\right)^{m}}=\\frac{10}{(1+1 / 0.6)^{0.5}} \\cong 6 \\mathrm{fF} \\\\\n& C_{d b}=\\frac{C_{d b 0}}{\\left(1+v_{D B} / \\phi_{0}\\right)^{m}}=\\frac{10}{(1+3 / 0.6)^{0.5}} \\cong 4 \\mathrm{fF} \\\\\n& C_{g s} \\cong \\frac{2}{3} W L C_{o x}+W L_{o v} C_{o x}=\\frac{2}{3} 10 \\times 1 \\times 4+10 \\times 0.025 \\times 4 \\cong 27+1=28 \\mathrm{fF} \\\\\n& C_{g d}=1 \\mathrm{fF}\n\\end{aligned}\n$$\n\nThe complete small-signal model is depicted in Fig. 6.13b.\n(b) To estimate $f_{T}$ using Eq. (6.24b), we use $C_{g s}$ as in Eq. (6.22), namely, $C_{g s}=27+$ $1+5=33 \\mathrm{fF}$. Thus\n\n$$\nf_{T}=\\frac{g_{m}}{2 \\pi\\left(C_{g s}+C_{g d}\\right)}=\\frac{1 /\\left(1.41 \\times 10^{3}\\right)}{2 \\pi(33+1) 10^{-15}}=3.31 \\mathrm{GHz}\n$$\n\nIt is instructive to delve deeper into $f_{T}$, which we now express as\n\n$$\n\\begin{equation*}\nf_{T}=\\frac{\\sqrt{2 k I_{D}}}{2 \\pi\\left(C_{g s}+C_{g d}\\right)} \\tag{6.25}\n\\end{equation*}\n$$\n\nClearly, the $f_{T}$ of a MOSFET increases with the square root of the bias current $I_{D}$. By contrast, at sufficiently low bias currents, the $f_{T}$ of a BJT increases directly with $I_{C}$ until it saturates at $f_{T}=1 /\\left(2 \\pi \\tau_{F}\\right)$ due to minority-charge diffusion. In a FET, the current is due to majority-charge drift, so the limiting factors are solely the stray capacitances.\n\nAmong all capacitances in a MOSFET, the dominant one is usually the first component on the right-hand side of Eq. (6.21). If we approximate Eq. (6.24b) as $f_{T} \\cong$ $g_{m} /\\left(2 \\pi C_{g s}\\right)$ with $C_{g s} \\cong(2 / 3) W L C_{o x}$, then\n\n$$\nf_{T} \\cong \\frac{g_{m}}{2 \\pi(2 / 3) W L C_{o x}}=\\frac{0.75}{\\pi} \\frac{g_{m}}{W L C_{o x}}\n$$\n\nLetting $g_{m}=k V_{O V}=\\left[(W / L) \\mu_{n} C_{o x}\\right] V_{O V}$ and simplifying, we can place an upper limit on the $f_{T}$ of an $n$ MOSFET for a given $V_{O V}$ by writing\n\n$$\n\\begin{equation*}\nf_{T(\\max )}=\\frac{0.75}{\\pi} \\frac{\\mu_{n}}{L^{2}} V_{O V} \\tag{6.26}\n\\end{equation*}\n$$\n\n(For a $p$ MOSFET, replace $\\mu_{n}$ with $\\mu_{p}$.) It is evident that for fast operation, a MOSFET should have a very short channel and be of the $n$ type, as electrons are 2 to 3 times as mobile as holes in a $p$-type. Note the striking similarity to the BJT limit of Eq. (6.15), except for the replacement of the thermal voltage $V_{T}$ by the overdrive voltage $V_{O V}$: the higher $V_{O V}$, the faster the MOSFET is likely to operate."
},
{
    "text": "As with BJTs, the frequency capability of a MOSFET is quantified by the transition frequency $f_{T}$, at which the magnitude of its small-signal current gain drops to unity. It is known that no current flows into the gate terminal at dc. However, as the operating frequency rises, the stray capacitances associated with the gate terminal draw more current, thereby reducing the FET's current gain. The transition frequency serves as a figure of merit for high-frequency performance and can be either calculated or measured using the ac concept depicted in Fig. 6.11a. Specifically, a small-signal ac current $I_{g}$ is applied to the gate terminal, the resulting drain current $I_{d}$ is measured with the drain at ac ground, the ratio $I_{d} / I_{g}$ is taken, and the frequency $\\omega_{T}$ at which $\\left|I_{d} / I_{g}\\right|=1$ or 0 dB is determined.\n\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: GND, G: V1}\nname: Ig, type: CurrentSource, value: Ig, ports: {Np: G, Nn: GND}\n]\nextrainfo:The circuit is used to determine the transition frequency $f_T$ of an NMOS transistor by applying a small-signal ac current $Ig$ to the gate terminal and measuring the resulting drain current $Id$. The drain is at ac ground, making $ro$ and $Cdb$ irrelevant, and placing $Cgd$ in parallel with $Cgs$.\n\nimage_name:(b)\ndescription:\n[\nname: Ig, type: CurrentSource, value: Ig, ports: {Np: G, Nn: GND}\nname: Cgs, type: Capacitor, value: Cgs, ports: {Np: G, Nn: S}\nname: Cgd, type: Capacitor, value: Cgd, ports: {Np: G, Nn: D}\nname: g_mV_gs, type: VoltageControlledCurrentSource, value: g_mV_gs, ports: {Np: D, Nn: S}\nname: ro, type: Resistor, value: ro, ports: {N1: D, N2: S}\nname: Cdb, type: Capacitor, value: Cdb, ports: {Np: D, Nn: GND}\n]\nextrainfo:The circuit diagram (b) represents a small-signal equivalent model for analyzing the transition frequency ($f_T$) of an NMOS transistor. The drain is shorted to ground, making $r_o$ and $C_db$ irrelevant. $C_gd$ is in parallel with $C_gs$, and the body and source are tied together, simplifying the analysis.\n\nFIGURE 6.11 (a) Ac circuit to find $f_{T}$, and (b) its small-signal equivalent.\n\nReferring to the equivalent circuit in Fig. 6.11b, we observe that shorting the drain to ground makes $r_{o}$ and $C_{d b}$ irrelevant, placing $C_{g d}$ in parallel with $C_{g s}$. Additionally, with the body and source connected, $C_{g s}$ is given by Eq. (6.20). Applying the generalized Ohm's law,\n\n$$\nV_{g s}=\\frac{1}{s\\left(C_{g s}+C_{g d}\\right)} I_{g}\n$$\n\nSimilar to the BJT case, it can be verified that over the frequency range of interest, the current fed forward via $C_{g d}$ is negligible compared to that of the dependent source, allowing us to approximate\n\n$$\nI_{d} \\cong g_{m} V_{g s}=\\frac{g_{m}}{s\\left(C_{g s}+C_{g d}\\right)} I_{g}\n$$\n\nTaking the ratio $I_{d} / I_{g}$ and letting $s \\rightarrow j \\omega$, we obtain\n\n$$\n\\begin{equation*}\n\\frac{I_{d}}{I_{g}}=\\frac{1}{j \\omega / \\omega_{T}} \\tag{6.23}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\n\\omega_{T}=\\frac{g_{m}}{C_{g s}+C_{g d}} \\tag{6.24a}\n\\end{equation*}\n$$\n\nor alternatively,\n\n$$\n\\begin{equation*}\nf_{T}=\\frac{g_{m}}{2 \\pi\\left(C_{g s}+C_{g d}\\right)} \\tag{6.24b}\n\\end{equation*}\n$$\n\n(Note the formal similarity with Eq. (6.12) of the BJT.) Since $g_{m}$ depends on the bias current $I_{D}$, so does $f_{T}$. Figure 6.12 shows the Bode plot of the MOSFET's current gain. At low frequencies, the gain tends to infinity because the gate draws no dc current. However, at $f=f_{T}$, the current entering the gate equals the current drawn by the drain. In current monolithic MOSFETs, $f_{T}$ ranges from hundreds of MHz to tens of GHz.\n\nimage_name:Figure 6.12 Bode plot of a MOSFET's current gain\ndescription:The graph in Figure 6.12 is a Bode plot illustrating the current gain of a MOSFET. The x-axis represents frequency () on a logarithmic scale, denoted as 'dec' for decades, while the y-axis represents the magnitude of the current gain, |Id/Ig|, measured in decibels (dB).\n\nOverall Behavior and Trends\nThe plot shows a linear decrease in the current gain with increasing frequency. At lower frequencies, the gain is very high, theoretically approaching infinity, as indicated by the dashed line extending upwards. This reflects the fact that the gate of the MOSFET draws no direct current, leading to a high initial gain.\n\nAs the frequency increases, the gain decreases linearly at a rate of -20 dB per decade. This trend continues until the frequency reaches a specific point labeled as T, which is the transition frequency. At this point, the current entering the gate equals the current drawn by the drain, marking a significant change in behavior.\n\nKey Features and Technical Details\n- **Slope:** The linear decrease is characterized by a slope of -20 dB/decade, indicating a consistent reduction in gain with increasing frequency.\n- **Transition Frequency (T):** This is a critical point on the graph where the gain is reduced to a level where the gate current equals the drain current. It represents the frequency at which the MOSFET's gain starts to significantly diminish.\n\nAnnotations and Specific Data Points\n- The plot includes a visual marker for the slope (-20 dB/dec) and the transition frequency (T), providing a clear reference for these critical points.\n\nThis Bode plot effectively demonstrates the frequency-dependent behavior of a MOSFET's current gain, highlighting the importance of T in determining the operational bandwidth of the device.\n\nFIGURE 6.12 Bode plot of a MOSFET's current gain.\n\n#### Exercise 6.2\n\nThe current fed forward via $C_{g d}$ in Fig. $6.11 b$ is $I_{g d}=V_{g s} /\\left[1 /\\left(j \\omega C_{g d}\\right)\\right]$. By exploiting the fact that $C_{g d} \\ll C_{g s}$, show that for frequencies up to at least $\\omega_{T}$, we have $\\left|I_{g d}\\right| \\ll\\left|g_{m} V_{g s}\\right|$, thus justifying the approximation $I_{d} \\cong g_{m} V_{g s}$.\n(a) Assuming $V_{G S}$ has been adjusted for $I_{D}=100 \\mu \\mathrm{~A}$ in the circuit of Fig. 6.13a, find the element values in the small-signal model of the MOSFET, and show the final circuit. The process parameters are: $k^{\\prime}=250 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, C_{o x}=4 \\mathrm{fF} / \\mu \\mathrm{m}^{2}$, $\\lambda^{\\prime}=0.02 \\mu \\mathrm{~m} / \\mathrm{V}, \\gamma=0.5 \\mathrm{~V}^{1 / 2}, \\phi_{p}=-0.3 \\mathrm{~V}, \\phi_{0}=0.6 \\mathrm{~V}$, and $m=0.5$. The device parameters are $W=10 \\mu \\mathrm{~m}, L=1.0 \\mu \\mathrm{~m}, L_{o v}=25 \\mathrm{~nm}, C_{s b 0}=C_{d b 0}=10 \\mathrm{fF}$, and $C_{g b}=5 \\mathrm{fF}$.\n(b) Estimate $f_{T}$.\n\nimage_name:(a)\ndescription:\n[\nname: VGS, type: VoltageSource, value: VGS, ports: {Np: VGS, Nn: GND}\nname: R1, type: Resistor, value: 10 k, ports: {N1: GND, N2: GND}\nname: M1, type: PMOS, ports: {S: V1, D: 3V, G: VGS}\n]\nextrainfo:The circuit is a PMOS transistor configuration with a current source and various capacitors and resistors for biasing and small-signal modeling. It includes voltage-controlled current sources representing transconductance effects.\n\nimage_name:(b)\ndescription:\n[\nname: C1, type: Capacitor, value: 1fF, ports: {Np: G, Nn: D}\nname: C2, type: Capacitor, value: 28fF, ports: {Np: G, Nn: S}\nname: C3, type: Capacitor, value: 5fF, ports: {Np: G, Nn: B}\nname: C4, type: Capacitor, value: 6fF, ports: {Np: S, Nn: B}\nname: C5, type: Capacitor, value: 4fF, ports: {Np: B, Nn: D}\nname: G1, type: VoltageControlledCurrentSource, value: Vgs/1.41k, ports: {Np: D, Nn: S}\nname: G2, type: VoltageControlledCurrentSource, value: Vbs/7.16k, ports: {Np: D, Nn: S}\nname: R2, type: Resistor, value: 500k, ports: {N1: D, N2: S}\n]\nextrainfo:The circuit represents a PMOS small-signal model with various capacitors and controlled current sources reflecting the transconductance and body effect. The PMOS transistor M1 is connected with its source at node S, drain at node D, gate at node G, and body at node B. The voltage sources and capacitors are connected to these nodes as per the small-signal model configuration.\n\nFIGURE 6.13 (a) Circuit of Example 6.2, and (b) the MOSFET's small-signal model values.\n\n#### Solution\n\n(a) The device transconductance parameter is $k=k^{\\prime}(W / L)=0.25(10 / 1)=$ $2.5 \\mathrm{~mA} / \\mathrm{V}$, and the overdrive voltage is $V_{O V}=\\sqrt{2 I_{D} / k}=\\sqrt{2 \\times 0.1 / 2.5}=$ 0.283 V. Since $V_{S}=10 \\times 0.1=1 \\mathrm{~V}$ and $V_{D S}=3-1=2 \\mathrm{~V}$, it follows that $V_{D S}>V_{O V}$, indicating a saturated FET. We have\n\n$$\n\\begin{aligned}\n\\lambda & =\\lambda^{\\prime} / L=0.02 / 1=0.02 \\mathrm{~V}^{-1} \\\\\nr_{o} & =\\frac{1}{\\lambda I_{D}}=\\frac{1}{0.02 \\times 0.1}=500 \\mathrm{k} \\Omega \\\\\ng_{m} & =\\sqrt{2 k I_{D}}=\\sqrt{2 \\times 2.5 \\times 0.1}=\\frac{1}{1.41 \\mathrm{k} \\Omega} \\\\\ng_{m b} & =\\frac{\\gamma g_{m}}{2 \\sqrt{V_{S B}+2\\left|\\phi_{p}\\right|}}=\\frac{0.5 / 1.41}{2 \\sqrt{1+2 \\times 0.3}}=\\frac{1}{7.16 \\mathrm{k} \\Omega}\n\\end{aligned}\n$$\n\n#### EXAMPLE 6.4\n\n$$\n\\begin{aligned}\n& C_{s b}=\\frac{C_{s b 0}}{\\left(1+v_{S B} / \\phi_{0}\\right)^{m}}=\\frac{10}{(1+1 / 0.6)^{0.5}} \\cong 6 \\mathrm{fF} \\\\\n& C_{d b}=\\frac{C_{d b 0}}{\\left(1+v_{D B} / \\phi_{0}\\right)^{m}}=\\frac{10}{(1+3 / 0.6)^{0.5}} \\cong 4 \\mathrm{fF} \\\\\n& C_{g s} \\cong \\frac{2}{3} W L C_{o x}+W L_{o v} C_{o x}=\\frac{2}{3} 10 \\times 1 \\times 4+10 \\times 0.025 \\times 4 \\cong 27+1=28 \\mathrm{fF} \\\\\n& C_{g d}=1 \\mathrm{fF}\n\\end{aligned}\n$$\n\nThe complete small-signal model is shown in Fig. 6.13b.\n(b) To estimate $f_{T}$ using Eq. (6.24b), but with $C_{g s}$ as in Eq. (6.22), namely, $C_{g s}=27+$ $1+5=33 \\mathrm{fF}$, we get\n\n$$\nf_{T}=\\frac{g_{m}}{2 \\pi\\left(C_{g s}+C_{g d}\\right)}=\\frac{1 /\\left(1.41 \\times 10^{3}\\right)}{2 \\pi(33+1) 10^{-15}}=3.31 \\mathrm{GHz}\n$$\n\nAs in the BJT case, it is instructive to delve deeper into $f_{T}$, which we now express as\n\n$$\n\\begin{equation*}\nf_{T}=\\frac{\\sqrt{2 k I_{D}}}{2 \\pi\\left(C_{g s}+C_{g d}\\right)} \\tag{6.25}\n\\end{equation*}\n$$\n\nClearly, the $f_{T}$ of a MOSFET increases with the square root of the bias current $I_{D}$. By contrast, at sufficiently low bias currents, the $f_{T}$ of a BJT increases directly with $I_{C}$ until it saturates at $f_{T}=1 /\\left(2 \\pi \\tau_{F}\\right)$ due to minority-charge diffusion. In contrast, the current in a FET is due to majority-charge drift, so the limiting factors are solely the stray capacitances.\n\nOf all the capacitances in a MOSFET, the dominant one is usually the first component on the right-hand side of Eq. (6.21). If we approximate Eq. (6.24b) as $f_{T} \\cong$ $g_{m} /\\left(2 \\pi C_{g s}\\right)$ with $C_{g s} \\cong(2 / 3) W L C_{o x}$, then\n\n$$\nf_{T} \\cong \\frac{g_{m}}{2 \\pi(2 / 3) W L C_{o x}}=\\frac{0.75}{\\pi} \\frac{g_{m}}{W L C_{o x}}\n$$\n\nLetting $g_{m}=k V_{O V}=\\left[(W / L) \\mu_{n} C_{o x}\\right] V_{O V}$ and simplifying, we can place an upper limit on the $f_{T}$ of an $n$ MOSFET for a given $V_{O V}$ by writing\n\n$$\n\\begin{equation*}\nf_{T(\\max )}=\\frac{0.75}{\\pi} \\frac{\\mu_{n}}{L^{2}} V_{O V} \\tag{6.26}\n\\end{equation*}\n$$\n\n(For a $p$ MOSFET, replace $\\mu_{n}$ with $\\mu_{p}$.) It is evident that for fast operation, a MOSFET should have a very short channel and be of the $n$ type, as electrons are 2 to 3 times as mobile as holes in a $p$-type. Note the striking similarity to the BJT limit of Eq. (6.15), except for the replacement of the thermal voltage $V_{T}$ with the overdrive voltage $V_{O V}$: the higher $V_{O V}$, the faster the MOSFET is likely to operate."
},
{
    "text": "As with the BJT, the frequency capability of a MOSFET is expressed through the transition frequency $f_{T}$, at which the magnitude of its small-signal current gain drops to unity. It is known that no current flows into the gate terminal at dc. However, as the operating frequency rises, the gate terminal's stray capacitances draw increasing current, thereby reducing the FET's current gain. The transition frequency serves as a figure of merit for high-frequency operation and can be either calculated or measured using the ac concept depicted in Fig. 6.11a. Specifically, a small-signal ac current $I_{g}$ is applied to the gate terminal, the current $I_{d}$ drawn by the FET with the drain at ac ground is measured, the ratio $I_{d} / I_{g}$ is taken, and the frequency $\\omega_{T}$ at which $\\left|I_{d} / I_{g}\\right|=1$, or 0 dB, is determined.\n\n**Image Description:**\n- **(a):** The circuit includes an NMOS transistor (M1) with its source (S) and drain (D) connected to ground, and its gate (G) connected to a current source (Ig). This setup is used to determine the transition frequency $f_{T}$ by applying a small-signal ac current Ig to the gate and measuring the resulting drain current Id. The drain is at ac ground, making ro and Cdb irrelevant, and placing Cgd in parallel with Cgs.\n- **(b):** This circuit diagram represents a small-signal equivalent model for analyzing the transition frequency (f_T) of an NMOS transistor. It includes a current source (Ig), capacitors (Cgs, Cgd, Cdb), a voltage-controlled current source (g_mV_gs), and a resistor (ro). The drain is shorted to ground, rendering r_o and C_db irrelevant, and C_gd is in parallel with C_gs. The body and source are tied together, simplifying the analysis.\n\n**FIGURE 6.11:** (a) Ac circuit to determine $f_{T}$, and (b) its small-signal equivalent.\n\nReferring to the equivalent circuit in Fig. 6.11b, we observe that shorting the drain to ground makes $r_{o}$ and $C_{d b}$ irrelevant, placing $C_{g d}$ in parallel with $C_{g s}$. Additionally, with the body and source connected, $C_{g s}$ is defined by Eq. (6.20). Applying the generalized Ohm's law:\n\n$$\nV_{g s}=\\frac{1}{s\\left(C_{g s}+C_{g d}\\right)} I_{g}\n$$\n\nSimilar to the BJT case, it can be verified that, within our frequency range of interest, the current fed forward via $C_{g d}$ is negligible compared to the dependent source, allowing us to approximate:\n\n$$\nI_{d} \\cong g_{m} V_{g s}=\\frac{g_{m}}{s\\left(C_{g s}+C_{g d}\\right)} I_{g}\n$$\n\nTaking the ratio $I_{d} / I_{g}$ and letting $s \\rightarrow j \\omega$, we obtain:\n\n$$\n\\begin{equation*}\n\\frac{I_{d}}{I_{g}}=\\frac{1}{j \\omega / \\omega_{T}} \\tag{6.23}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\n\\omega_{T}=\\frac{g_{m}}{C_{g s}+C_{g d}} \\tag{6.24a}\n\\end{equation*}\n$$\n\nor alternatively,\n\n$$\n\\begin{equation*}\nf_{T}=\\frac{g_{m}}{2 \\pi\\left(C_{g s}+C_{g d}\\right)} \\tag{6.24b}\n\\end{equation*}\n$$\n\n(Note the formal similarity with Eq. (6.12) of the BJT.) Since $g_{m}$ depends on the bias current $I_{D}$, so does $f_{T}$. Figure 6.12 illustrates the Bode plot of the MOSFET's current gain. At low frequencies, the gain tends to infinity due to the gate drawing no dc current. However, at $f=f_{T}$, the gate current equals the drain current. In modern monolithic MOSFETs, $f_{T}$ ranges from hundreds of MHz to tens of GHz.\n\n**Image Description:**\n- **Figure 6.12:** This Bode plot shows the current gain of a MOSFET. The x-axis represents frequency () on a logarithmic scale, labeled 'dec' for decades, while the y-axis measures the magnitude of the current gain, |Id/Ig|, in decibels (dB). The plot exhibits a linear decrease in gain with increasing frequency. At lower frequencies, the gain is very high, theoretically approaching infinity, as indicated by the dashed line. This reflects the gate's lack of dc current, resulting in a high initial gain. As the frequency increases, the gain decreases linearly at a rate of -20 dB per decade until it reaches T, the transition frequency, where the gate current equals the drain current. The plot includes markers for the slope (-20 dB/dec) and the transition frequency (T), highlighting these critical points. This Bode plot effectively demonstrates the frequency-dependent behavior of a MOSFET's current gain, emphasizing the importance of T in determining the device's operational bandwidth.\n\n**FIGURE 6.12:** Bode plot of a MOSFET's current gain.\n\n#### Exercise 6.2\n\nThe current fed forward via $C_{g d}$ in Fig. 6.11b is $I_{g d}=V_{g s} /\\left[1 /\\left(j \\omega C_{g d}\\right)\\right]$. By exploiting the fact that $C_{g d} \\ll C_{g s}$, show that for frequencies up to at least $\\omega_{T}$, $\\left|I_{g d}\\right| \\ll\\left|g_{m} V_{g s}\\right|$, thereby justifying the approximation $I_{d} \\cong g_{m} V_{g s}$.\n(a) Assuming $V_{G S}$ has been adjusted for $I_{D}=100 \\mu \\mathrm{~A}$ in the circuit of Fig. 6.13a, determine the element values in the small-signal model of the MOSFET and show the final circuit. The process parameters are: $k^{\\prime}=250 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, C_{o x}=4 \\mathrm{fF} / \\mu \\mathrm{m}^{2}, \\lambda^{\\prime}=0.02 \\mu \\mathrm{~m} / \\mathrm{V}, \\gamma=0.5 \\mathrm{~V}^{1 / 2}, \\phi_{p}=-0.3 \\mathrm{~V}, \\phi_{0}=0.6 \\mathrm{~V}$, and $m=0.5$. The device parameters are $W=10 \\mu \\mathrm{~m}, L=1.0 \\mu \\mathrm{~m}, L_{o v}=25 \\mathrm{~nm}, C_{s b 0}=C_{d b 0}=10 \\mathrm{fF}$, and $C_{g b}=5 \\mathrm{fF}$.\n(b) Estimate $f_{T}$.\n\n**Image Description:**\n- **(a):** This circuit features a PMOS transistor (M1) with a voltage source (VGS), a resistor (R1), and various connections for biasing and small-signal modeling. The PMOS transistor is configured with its source (S) at V1, drain (D) at 3V, and gate (G) connected to VGS.\n- **(b):** The small-signal model includes capacitors (C1, C2, C3, C4, C5), voltage-controlled current sources (G1, G2), and a resistor (R2). The PMOS transistor M1 is connected with its source at node S, drain at node D, gate at node G, and body at node B. The components are arranged to reflect the transconductance and body effect in the small-signal analysis.\n\n**FIGURE 6.13:** (a) Circuit of Example 6.2, and (b) the MOSFET's small-signal model values.\n\n#### Solution\n\n(a) The device transconductance parameter is $k=k^{\\prime}(W / L)=0.25(10 / 1)=2.5 \\mathrm{~mA} / \\mathrm{V}$, and the overdrive voltage is $V_{O V}=\\sqrt{2 I_{D} / k}=\\sqrt{2 \\times 0.1 / 2.5}=0.283 \\mathrm{~V}$. Given $V_{S}=10 \\times 0.1=1 \\mathrm{~V}$ and $V_{D S}=3-1=2 \\mathrm{~V}$, it follows that $V_{D S}>V_{O V}$, indicating a saturated FET. We have:\n\n$$\n\\begin{aligned}\n\\lambda & =\\lambda^{\\prime} / L=0.02 / 1=0.02 \\mathrm{~V}^{-1} \\\\\nr_{o} & =\\frac{1}{\\lambda I_{D}}=\\frac{1}{0.02 \\times 0.1}=500 \\mathrm{k} \\Omega \\\\\ng_{m} & =\\sqrt{2 k I_{D}}=\\sqrt{2 \\times 2.5 \\times 0.1}=\\frac{1}{1.41 \\mathrm{k} \\Omega} \\\\\ng_{m b} & =\\frac{\\gamma g_{m}}{2 \\sqrt{V_{S B}+2\\left|\\phi_{p}\\right|}}=\\frac{0.5 / 1.41}{2 \\sqrt{1+2 \\times 0.3}}=\\frac{1}{7.16 \\mathrm{k} \\Omega}\n\\end{aligned}\n$$\n\n#### EXAMPLE 6.4\n\n$$\n\\begin{aligned}\n& C_{s b}=\\frac{C_{s b 0}}{\\left(1+v_{S B} / \\phi_{0}\\right)^{m}}=\\frac{10}{(1+1 / 0.6)^{0.5}} \\cong 6 \\mathrm{fF} \\\\\n& C_{d b}=\\frac{C_{d b 0}}{\\left(1+v_{D B} / \\phi_{0}\\right)^{m}}=\\frac{10}{(1+3 / 0.6)^{0.5}} \\cong 4 \\mathrm{fF} \\\\\n& C_{g s} \\cong \\frac{2}{3} W L C_{o x}+W L_{o v} C_{o x}=\\frac{2}{3} 10 \\times 1 \\times 4+10 \\times 0.025 \\times 4 \\cong 27+1=28 \\mathrm{fF} \\\\\n& C_{g d}=1 \\mathrm{fF}\n\\end{aligned}\n$$\n\nThe complete small-signal model is depicted in Fig. 6.13b.\n(b) Using Eq. (6.24b) with $C_{g s}$ as in Eq. (6.22), namely, $C_{g s}=27+1+5=33 \\mathrm{fF}$, we find:\n\n$$\nf_{T}=\\frac{g_{m}}{2 \\pi\\left(C_{g s}+C_{g d}\\right)}=\\frac{1 /\\left(1.41 \\times 10^{3}\\right)}{2 \\pi(33+1) 10^{-15}}=3.31 \\mathrm{GHz}\n$$\n\nAs in the BJT case, examining $f_{T}$ more closely, we express it as:\n\n$$\n\\begin{equation*}\nf_{T}=\\frac{\\sqrt{2 k I_{D}}}{2 \\pi\\left(C_{g s}+C_{g d}\\right)} \\tag{6.25}\n\\end{equation*}\n$$\n\nClearly, the $f_{T}$ of a MOSFET increases with the square root of the bias current $I_{D}$. In contrast, at sufficiently low bias currents, the $f_{T}$ of a BJT increases directly with $I_{C}$ until it saturates at $f_{T}=1 /\\left(2 \\pi \\tau_{F}\\right)$ due to minority-charge diffusion. For a FET, the current is due to majority-charge drift, so the limiting factors are solely the stray capacitances.\n\nAmong all capacitances in a MOSFET, the dominant one is usually the first component on the right-hand side of Eq. (6.21). If we approximate Eq. (6.24b) as $f_{T} \\cong g_{m} /\\left(2 \\pi C_{g s}\\right)$ with $C_{g s} \\cong(2 / 3) W L C_{o x}$, then:\n\n$$\nf_{T} \\cong \\frac{g_{m}}{2 \\pi(2 / 3) W L C_{o x}}=\\frac{0.75}{\\pi} \\frac{g_{m}}{W L C_{o x}}\n$$\n\nLetting $g_{m}=k V_{O V}=\\left[(W / L) \\mu_{n} C_{o x}\\right] V_{O V}$ and simplifying, we can place an upper limit on the $f_{T}$ of an $n$ MOSFET for a given $V_{O V}$ by writing:\n\n$$\n\\begin{equation*}\nf_{T(\\max )}=\\frac{0.75}{\\pi} \\frac{\\mu_{n}}{L^{2}} V_{O V} \\tag{6.26}\n\\end{equation*}\n$$\n\n(For a $p$ MOSFET, replace $\\mu_{n}$ with $\\mu_{p}$.) It is evident that for high-speed operation, a MOSFET should have a very short channel and be of the $n$ type, as electrons are 2 to 3 times more mobile than holes in $p$-type. Note the striking similarity to the BJT limit of Eq. (6.15), except for the replacement of the fixed thermal voltage $V_{T}$ by the user-imposed overdrive voltage $V_{O V}$: the higher $V_{O V}$, the faster the MOSFET is likely to operate."
},
{
    "text": "Like in the BJT scenario, the frequency capability of a MOSFET is quantified by the transition frequency $f_{T}$, at which the magnitude of its small-signal current gain falls to unity. It is known that no current flows into the gate terminal at dc. However, as the operating frequency rises, the parasitic capacitances associated with the gate terminal draw more current, thereby reducing the FET's current gain. The transition frequency serves as a metric for high-frequency performance and can be either calculated or measured using the ac setup depicted in Fig. 6.11a. Specifically, a small-signal ac current $I_{g}$ is applied to the gate terminal, the current $I_{d}$ drawn by the FET with the drain at ac ground is measured, the ratio $I_{d} / I_{g}$ is taken, and the frequency $\\omega_{T}$ at which $\\left|I_{d} / I_{g}\\right|=1$, or 0 dB, is determined.\n\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: GND, G: V1}\nname: Ig, type: CurrentSource, value: Ig, ports: {Np: G, Nn: GND}\n]\nextrainfo:The circuit is used to determine the transition frequency f_T of an NMOS transistor by applying a small-signal ac current Ig to the gate terminal and measuring the resulting drain current Id. The drain is at ac ground, making ro and Cdb irrelevant, and placing Cgd in parallel with Cgs.\n\nimage_name:(b)\ndescription:\n[\nname: Ig, type: CurrentSource, value: Ig, ports: {Np: G, Nn: GND}\nname: Cgs, type: Capacitor, value: Cgs, ports: {Np: G, Nn: S}\nname: Cgd, type: Capacitor, value: Cgd, ports: {Np: G, Nn: D}\nname: g_mV_gs, type: VoltageControlledCurrentSource, value: g_mV_gs, ports: {Np: D, Nn: S}\nname: ro, type: Resistor, value: ro, ports: {N1: D, N2: S}\nname: Cdb, type: Capacitor, value: Cdb, ports: {Np: D, Nn: GND}\n]\nextrainfo:The circuit diagram (b) represents a small-signal equivalent model for analyzing the transition frequency (f_T) of an NMOS transistor. The drain is shorted to ground, making r_o and C_db irrelevant. C_gd is in parallel with C_gs, and the body and source are tied together, simplifying the analysis.\n\nFIGURE 6.11 (a) Ac circuit to find $f_{T}$, and (b) its small-signal equivalent.\n\nReferring to the equivalent circuit of Fig. 6.11b, we observe that shorting the drain to ground makes $r_{o}$ and $C_{d b}$ negligible, placing $C_{g d}$ in parallel with $C_{g s}$. Additionally, with the body and source connected, $C_{g s}$ is given by Eq. (6.20). Applying the generalized Ohm's law,\n\n$$\nV_{g s}=\\frac{1}{s\\left(C_{g s}+C_{g d}\\right)} I_{g}\n$$\n\nSimilar to the BJT case, it can be verified that over the frequency range of interest, the current fed forward through $C_{g d}$ is negligible compared to that of the dependent source, allowing us to approximate\n\n$$\nI_{d} \\cong g_{m} V_{g s}=\\frac{g_{m}}{s\\left(C_{g s}+C_{g d}\\right)} I_{g}\n$$\n\nTaking the ratio $I_{d} / I_{g}$ and letting $s \\rightarrow j \\omega$, we obtain\n\n$$\n\\begin{equation*}\n\\frac{I_{d}}{I_{g}}=\\frac{1}{j \\omega / \\omega_{T}} \\tag{6.23}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\n\\omega_{T}=\\frac{g_{m}}{C_{g s}+C_{g d}} \\tag{6.24a}\n\\end{equation*}\n$$\n\nor, alternatively,\n\n$$\n\\begin{equation*}\nf_{T}=\\frac{g_{m}}{2 \\pi\\left(C_{g s}+C_{g d}\\right)} \\tag{6.24b}\n\\end{equation*}\n$$\n\n(Note the formal similarity with Eq. (6.12) of the BJT.) Since $g_{m}$ depends on the bias current $I_{D}$, so does $f_{T}$. Figure 6.12 displays the Bode plot of the MOSFET's current gain. At low frequencies, this gain tends to infinity due to the absence of dc current into the gate. However, at $f=f_{T}$, the gate current equals the drain current. In contemporary monolithic MOSFETs, $f_{T}$ ranges from hundreds of MHz to tens of GHz.\n\nimage_name:Figure 6.12 Bode plot of a MOSFET's current gain\ndescription:The graph in Figure 6.12 is a Bode plot illustrating the current gain of a MOSFET. The x-axis represents frequency () on a logarithmic scale, denoted as 'dec' for decades, while the y-axis represents the magnitude of the current gain, |Id/Ig|, measured in decibels (dB).\n\nOverall Behavior and Trends\nThe plot shows a linear decrease in the current gain with increasing frequency. At lower frequencies, the gain is very high, theoretically approaching infinity, as indicated by the dashed line extending upwards. This reflects the fact that the gate of the MOSFET draws no direct current, leading to a high initial gain.\n\nAs the frequency increases, the gain decreases linearly at a rate of -20 dB per decade. This trend continues until the frequency reaches a specific point labeled as T, which is the transition frequency. At this point, the current entering the gate equals the current drawn by the drain, marking a significant change in behavior.\n\nKey Features and Technical Details\n- **Slope:** The linear decrease is characterized by a slope of -20 dB/decade, indicating a consistent reduction in gain with increasing frequency.\n- **Transition Frequency (T):** This is a critical point on the graph where the gain is reduced to a level where the gate current equals the drain current. It represents the frequency at which the MOSFET's gain starts to significantly diminish.\n\nAnnotations and Specific Data Points\n- The plot includes a visual marker for the slope (-20 dB/dec) and the transition frequency (T), providing a clear reference for these critical points.\n\nThis Bode plot effectively demonstrates the frequency-dependent behavior of a MOSFET's current gain, highlighting the importance of T in determining the operational bandwidth of the device.\n\nFIGURE 6.12 Bode plot of a MOSFET's current gain.\n\n#### Exercise 6.2\n\nThe current fed forward via $C_{g d}$ in Fig. $6.11 b$ is $I_{g d}=V_{g s} /\\left[1 /\\left(j \\omega C_{g d}\\right)\\right]$. By exploiting the fact that $C_{g d} \\ll C_{g s}$, show that for frequencies up to at least $\\omega_{T}$, we have $\\left|I_{g d}\\right| \\ll\\left|g_{m} V_{g s}\\right|$, thus justifying the approximation $I_{d} \\cong g_{m} V_{g s}$.\n(a) Assuming $V_{G S}$ has been adjusted for $I_{D}=100 \\mu \\mathrm{~A}$ in the circuit of Fig. 6.13a, determine the element values in the small-signal model of the MOSFET, and present the final circuit. The process parameters are: $k^{\\prime}=250 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, C_{o x}=4 \\mathrm{fF} / \\mu \\mathrm{m}^{2}$, $\\lambda^{\\prime}=0.02 \\mu \\mathrm{~m} / \\mathrm{V}, \\gamma=0.5 \\mathrm{~V}^{1 / 2}, \\phi_{p}=-0.3 \\mathrm{~V}, \\phi_{0}=0.6 \\mathrm{~V}$, and $m=0.5$. The device parameters are $W=10 \\mu \\mathrm{~m}, L=1.0 \\mu \\mathrm{~m}, L_{o v}=25 \\mathrm{~nm}, C_{s b 0}=C_{d b 0}=10 \\mathrm{fF}$, and $C_{g b}=5 \\mathrm{fF}$.\n(b) Estimate $f_{T}$.\n\nimage_name:(a)\ndescription:\n[\nname: VGS, type: VoltageSource, value: VGS, ports: {Np: VGS, Nn: GND}\nname: R1, type: Resistor, value: 10 k, ports: {N1: GND, N2: GND}\nname: M1, type: PMOS, ports: {S: V1, D: 3V, G: VGS}\n]\nextrainfo:The circuit is a PMOS transistor configuration with a current source and various capacitors and resistors for biasing and small-signal modeling. It includes voltage-controlled current sources representing transconductance effects.\n\nimage_name:(b)\ndescription:\n[\nname: C1, type: Capacitor, value: 1fF, ports: {Np: G, Nn: D}\nname: C2, type: Capacitor, value: 28fF, ports: {Np: G, Nn: S}\nname: C3, type: Capacitor, value: 5fF, ports: {Np: G, Nn: B}\nname: C4, type: Capacitor, value: 6fF, ports: {Np: S, Nn: B}\nname: C5, type: Capacitor, value: 4fF, ports: {Np: B, Nn: D}\nname: G1, type: VoltageControlledCurrentSource, value: Vgs/1.41k, ports: {Np: D, Nn: S}\nname: G2, type: VoltageControlledCurrentSource, value: Vbs/7.16k, ports: {Np: D, Nn: S}\nname: R2, type: Resistor, value: 500k, ports: {N1: D, N2: S}\n]\nextrainfo:The circuit represents a PMOS small-signal model with various capacitors and controlled current sources reflecting the transconductance and body effect. The PMOS transistor M1 is connected with its source at node S, drain at node D, gate at node G, and body at node B. The voltage sources and capacitors are connected to these nodes as per the small-signal model configuration.\n\nFIGURE 6.13 (a) Circuit of Example 6.2, and (b) the MOSFET's small-signal model values.\n\n#### Solution\n\n(a) The device transconductance parameter is $k=k^{\\prime}(W / L)=0.25(10 / 1)=2.5 \\mathrm{~mA} / \\mathrm{V}$, and the overdrive voltage is $V_{O V}=\\sqrt{2 I_{D} / k}=\\sqrt{2 \\times 0.1 / 2.5}=0.283 \\mathrm{~V}$. Since $V_{S}=10 \\times 0.1=1 \\mathrm{~V}$ and $V_{D S}=3-1=2 \\mathrm{~V}$, it follows that $V_{D S}>V_{O V}$, indicating a saturated FET. We have\n\n$$\n\\begin{aligned}\n\\lambda & =\\lambda^{\\prime} / L=0.02 / 1=0.02 \\mathrm{~V}^{-1} \\\\\nr_{o} & =\\frac{1}{\\lambda I_{D}}=\\frac{1}{0.02 \\times 0.1}=500 \\mathrm{k} \\Omega \\\\\ng_{m} & =\\sqrt{2 k I_{D}}=\\sqrt{2 \\times 2.5 \\times 0.1}=\\frac{1}{1.41 \\mathrm{k} \\Omega} \\\\\ng_{m b} & =\\frac{\\gamma g_{m}}{2 \\sqrt{V_{S B}+2\\left|\\phi_{p}\\right|}}=\\frac{0.5 / 1.41}{2 \\sqrt{1+2 \\times 0.3}}=\\frac{1}{7.16 \\mathrm{k} \\Omega}\n\\end{aligned}\n$$\n\n#### EXAMPLE 6.4\n\n$$\n\\begin{aligned}\n& C_{s b}=\\frac{C_{s b 0}}{\\left(1+v_{S B} / \\phi_{0}\\right)^{m}}=\\frac{10}{(1+1 / 0.6)^{0.5}} \\cong 6 \\mathrm{fF} \\\\\n& C_{d b}=\\frac{C_{d b 0}}{\\left(1+v_{D B} / \\phi_{0}\\right)^{m}}=\\frac{10}{(1+3 / 0.6)^{0.5}} \\cong 4 \\mathrm{fF} \\\\\n& C_{g s} \\cong \\frac{2}{3} W L C_{o x}+W L_{o v} C_{o x}=\\frac{2}{3} 10 \\times 1 \\times 4+10 \\times 0.025 \\times 4 \\cong 27+1=28 \\mathrm{fF} \\\\\n& C_{g d}=1 \\mathrm{fF}\n\\end{aligned}\n$$\n\nThe complete small-signal model is depicted in Fig. 6.13b.\n(b) To find $f_{T}$ using Eq. (6.24b), but with $C_{g s}$ as in Eq. (6.22), namely, $C_{g s}=27+1+5=33 \\mathrm{fF}$, we get\n\n$$\nf_{T}=\\frac{g_{m}}{2 \\pi\\left(C_{g s}+C_{g d}\\right)}=\\frac{1 /\\left(1.41 \\times 10^{3}\\right)}{2 \\pi(33+1) 10^{-15}}=3.31 \\mathrm{GHz}\n$$\n\nAs in the BJT case, it is instructive to examine $f_{T}$ more closely, which we now express as\n\n$$\n\\begin{equation*}\nf_{T}=\\frac{\\sqrt{2 k I_{D}}}{2 \\pi\\left(C_{g s}+C_{g d}\\right)} \\tag{6.25}\n\\end{equation*}\n$$\n\nClearly, the $f_{T}$ of a MOSFET increases with the square root of the bias current $I_{D}$. By contrast, at sufficiently low bias currents, the $f_{T}$ of a BJT increases directly with $I_{C}$ until it saturates at $f_{T}=1 /\\left(2 \\pi \\tau_{F}\\right)$ due to minority-charge diffusion. In contrast, the current in a FET is due to majority-charge drift, so the limiting factors are solely the stray capacitances.\n\nOf all the capacitances in a MOSFET, the dominant one is usually the first component on the right-hand side of Eq. (6.21). If we approximate Eq. (6.24b) as $f_{T} \\cong g_{m} /\\left(2 \\pi C_{g s}\\right)$ with $C_{g s} \\cong(2 / 3) W L C_{o x}$, then\n\n$$\nf_{T} \\cong \\frac{g_{m}}{2 \\pi(2 / 3) W L C_{o x}}=\\frac{0.75}{\\pi} \\frac{g_{m}}{W L C_{o x}}\n$$\n\nLetting $g_{m}=k V_{O V}=\\left[(W / L) \\mu_{n} C_{o x}\\right] V_{O V}$ and simplifying, we can place an upper limit on the $f_{T}$ of an $n$ MOSFET for a given $V_{O V}$ by writing\n\n$$\n\\begin{equation*}\nf_{T(\\max )}=\\frac{0.75}{\\pi} \\frac{\\mu_{n}}{L^{2}} V_{O V} \\tag{6.26}\n\\end{equation*}\n$$\n\n(For a $p$ MOSFET, replace $\\mu_{n}$ with $\\mu_{p}$.) It is apparent that for fast operation, a MOSFET should have a very short channel and be of the $n$ type, as electrons are 2 to 3 times as mobile as the holes in a $p$-type. Note the striking similarity to the BJT limit of Eq. (6.15), except for the replacement of the (fixed) thermal voltage $V_{T}$ by the (user-imposed) overdrive voltage $V_{O V}$: the higher $V_{O V}$, the faster the MOSFET is likely to operate."
},
{
    "text": "Like in the case of BJTs, the frequency capability of a MOSFET is quantified by the transition frequency $f_{T}$, at which the magnitude of its small-signal current gain drops to unity. It is known that no current flows into the gate terminal at dc. However, as the operating frequency rises, the parasitic capacitances associated with the gate terminal draw increasing current, thereby reducing the FET's current gain. The transition frequency serves as a metric for high-frequency performance and can be either calculated or measured using the ac concept illustrated in Fig. 6.11a. Specifically, a small-signal ac current $I_{g}$ is applied to the gate terminal, the resulting drain current $I_{d}$ is measured with the drain at ac ground, the ratio $I_{d} / I_{g}$ is taken, and the frequency $\\omega_{T}$ at which $\\left|I_{d} / I_{g}\\right|=1$, or 0 dB, is determined.\n\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: GND, G: V1}\nname: Ig, type: CurrentSource, value: Ig, ports: {Np: G, Nn: GND}\n]\nextrainfo:The circuit is used to determine the transition frequency f_T of an NMOS transistor by applying a small-signal ac current Ig to the gate terminal and measuring the resulting drain current Id. The drain is at ac ground, making ro and Cdb irrelevant, and placing Cgd in parallel with Cgs.\n\nimage_name:(b)\ndescription:\n[\nname: Ig, type: CurrentSource, value: Ig, ports: {Np: G, Nn: GND}\nname: Cgs, type: Capacitor, value: Cgs, ports: {Np: G, Nn: S}\nname: Cgd, type: Capacitor, value: Cgd, ports: {Np: G, Nn: D}\nname: g_mV_gs, type: VoltageControlledCurrentSource, value: g_mV_gs, ports: {Np: D, Nn: S}\nname: ro, type: Resistor, value: ro, ports: {N1: D, N2: S}\nname: Cdb, type: Capacitor, value: Cdb, ports: {Np: D, Nn: GND}\n]\nextrainfo:The circuit diagram (b) represents a small-signal equivalent model for analyzing the transition frequency (f_T) of an NMOS transistor. The drain is shorted to ground, making r_o and C_db irrelevant. C_gd is in parallel with C_gs, and the body and source are tied together, simplifying the analysis.\n\nFIGURE 6.11 (a) Ac circuit to find $f_{T}$, and (b) its small-signal equivalent.\n\nReferring to the equivalent circuit in Fig. 6.11b, we observe that shorting the drain to ground makes $r_{o}$ and $C_{d b}$ irrelevant, placing $C_{g d}$ in parallel with $C_{g s}$. Additionally, with the body and source connected, $C_{g s}$ is given by Eq. (6.20). Applying the generalized Ohm's law,\n\n$$\nV_{g s}=\\frac{1}{s\\left(C_{g s}+C_{g d}\\right)} I_{g}\n$$\n\nSimilar to the BJT case, it can be verified that over the frequency range of interest, the current fed forward through $C_{g d}$ is negligible compared to that of the dependent source, allowing us to approximate\n\n$$\nI_{d} \\cong g_{m} V_{g s}=\\frac{g_{m}}{s\\left(C_{g s}+C_{g d}\\right)} I_{g}\n$$\n\nTaking the ratio $I_{d} / I_{g}$ and letting $s \\rightarrow j \\omega$, we obtain\n\n$$\n\\begin{equation*}\n\\frac{I_{d}}{I_{g}}=\\frac{1}{j \\omega / \\omega_{T}} \\tag{6.23}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\n\\omega_{T}=\\frac{g_{m}}{C_{g s}+C_{g d}} \\tag{6.24a}\n\\end{equation*}\n$$\n\nor alternatively,\n\n$$\n\\begin{equation*}\nf_{T}=\\frac{g_{m}}{2 \\pi\\left(C_{g s}+C_{g d}\\right)} \\tag{6.24b}\n\\end{equation*}\n$$\n\n(Note the formal similarity with Eq. (6.12) of the BJT.) Since $g_{m}$ depends on the bias current $I_{D}$, so does $f_{T}$. Figure 6.12 depicts the Bode plot of the MOSFET's current gain. At low frequencies, the gain tends towards infinity due to the absence of dc current in the gate. However, at $f=f_{T}$, the gate current equals the drain current. In contemporary monolithic MOSFETs, $f_{T}$ ranges from hundreds of MHz to tens of GHz.\n\nimage_name:Figure 6.12 Bode plot of a MOSFET's current gain\ndescription:The graph in Figure 6.12 is a Bode plot illustrating the current gain of a MOSFET. The x-axis represents frequency () on a logarithmic scale, denoted as 'dec' for decades, while the y-axis represents the magnitude of the current gain, |Id/Ig|, measured in decibels (dB).\n\nOverall Behavior and Trends\nThe plot shows a linear decrease in the current gain with increasing frequency. At lower frequencies, the gain is very high, theoretically approaching infinity, as indicated by the dashed line extending upwards. This reflects the fact that the gate of the MOSFET draws no direct current, leading to a high initial gain.\n\nAs the frequency increases, the gain decreases linearly at a rate of -20 dB per decade. This trend continues until the frequency reaches a specific point labeled as T, which is the transition frequency. At this point, the current entering the gate equals the current drawn by the drain, marking a significant change in behavior.\n\nKey Features and Technical Details\n- **Slope:** The linear decrease is characterized by a slope of -20 dB/decade, indicating a consistent reduction in gain with increasing frequency.\n- **Transition Frequency (T):** This is a critical point on the graph where the gain is reduced to a level where the gate current equals the drain current. It represents the frequency at which the MOSFET's gain starts to significantly diminish.\n\nAnnotations and Specific Data Points\n- The plot includes a visual marker for the slope (-20 dB/dec) and the transition frequency (T), providing a clear reference for these critical points.\n\nThis Bode plot effectively demonstrates the frequency-dependent behavior of a MOSFET's current gain, highlighting the importance of T in determining the operational bandwidth of the device.\n\nFIGURE 6.12 Bode plot of a MOSFET's current gain.\n\n#### Exercise 6.2\n\nThe current fed forward via $C_{g d}$ in Fig. $6.11 b$ is $I_{g d}=V_{g s} /\\left[1 /\\left(j \\omega C_{g d}\\right)\\right]$. By exploiting the fact that $C_{g d} \\ll C_{g s}$, show that for frequencies up to at least $\\omega_{T}$, we have $\\left|I_{g d}\\right| \\ll\\left|g_{m} V_{g s}\\right|$, thus justifying the approximation $I_{d} \\cong g_{m} V_{g s}$.\n(a) Assuming $V_{G S}$ has been adjusted for $I_{D}=100 \\mu \\mathrm{~A}$ in the circuit of Fig. 6.13a, determine the element values in the small-signal model of the MOSFET, and illustrate the final circuit. The process parameters are: $k^{\\prime}=250 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, C_{o x}=4 \\mathrm{fF} / \\mu \\mathrm{m}^{2}, \\lambda^{\\prime}=0.02 \\mu \\mathrm{~m} / \\mathrm{V}, \\gamma=0.5 \\mathrm{~V}^{1 / 2}, \\phi_{p}=-0.3 \\mathrm{~V}, \\phi_{0}=0.6 \\mathrm{~V}$, and $m=0.5$. The device parameters are $W=10 \\mu \\mathrm{~m}, L=1.0 \\mu \\mathrm{~m}, L_{o v}=25 \\mathrm{~nm}, C_{s b 0}=C_{d b 0}=10 \\mathrm{fF}$, and $C_{g b}=5 \\mathrm{fF}$.\n(b) Estimate $f_{T}$.\n\nimage_name:(a)\ndescription:\n[\nname: VGS, type: VoltageSource, value: VGS, ports: {Np: VGS, Nn: GND}\nname: R1, type: Resistor, value: 10 k, ports: {N1: GND, N2: GND}\nname: M1, type: PMOS, ports: {S: V1, D: 3V, G: VGS}\n]\nextrainfo:The circuit is a PMOS transistor configuration with a current source and various capacitors and resistors for biasing and small-signal modeling. It includes voltage-controlled current sources representing transconductance effects.\n\nimage_name:(b)\ndescription:\n[\nname: C1, type: Capacitor, value: 1fF, ports: {Np: G, Nn: D}\nname: C2, type: Capacitor, value: 28fF, ports: {Np: G, Nn: S}\nname: C3, type: Capacitor, value: 5fF, ports: {Np: G, Nn: B}\nname: C4, type: Capacitor, value: 6fF, ports: {Np: S, Nn: B}\nname: C5, type: Capacitor, value: 4fF, ports: {Np: B, Nn: D}\nname: G1, type: VoltageControlledCurrentSource, value: Vgs/1.41k, ports: {Np: D, Nn: S}\nname: G2, type: VoltageControlledCurrentSource, value: Vbs/7.16k, ports: {Np: D, Nn: S}\nname: R2, type: Resistor, value: 500k, ports: {N1: D, N2: S}\n]\nextrainfo:The circuit represents a PMOS small-signal model with various capacitors and controlled current sources reflecting the transconductance and body effect. The PMOS transistor M1 is connected with its source at node S, drain at node D, gate at node G, and body at node B. The voltage sources and capacitors are connected to these nodes as per the small-signal model configuration.\n\nFIGURE 6.13 (a) Circuit of Example 6.2, and (b) the MOSFET's small-signal model values.\n\n#### Solution\n\n(a) The device transconductance parameter is $k=k^{\\prime}(W / L)=0.25(10 / 1)=2.5 \\mathrm{~mA} / \\mathrm{V}$, and the overdrive voltage is $V_{O V}=\\sqrt{2 I_{D} / k}=\\sqrt{2 \\times 0.1 / 2.5}=0.283 \\mathrm{~V}$. Since $V_{S}=10 \\times 0.1=1 \\mathrm{~V}$ and $V_{D S}=3-1=2 \\mathrm{~V}$, it follows that $V_{D S}>V_{O V}$, indicating a saturated FET. We have\n\n$$\n\\begin{aligned}\n\\lambda & =\\lambda^{\\prime} / L=0.02 / 1=0.02 \\mathrm{~V}^{-1} \\\\\nr_{o} & =\\frac{1}{\\lambda I_{D}}=\\frac{1}{0.02 \\times 0.1}=500 \\mathrm{k} \\Omega \\\\\ng_{m} & =\\sqrt{2 k I_{D}}=\\sqrt{2 \\times 2.5 \\times 0.1}=\\frac{1}{1.41 \\mathrm{k} \\Omega} \\\\\ng_{m b} & =\\frac{\\gamma g_{m}}{2 \\sqrt{V_{S B}+2\\left|\\phi_{p}\\right|}}=\\frac{0.5 / 1.41}{2 \\sqrt{1+2 \\times 0.3}}=\\frac{1}{7.16 \\mathrm{k} \\Omega}\n\\end{aligned}\n$$\n\n#### EXAMPLE 6.4\n\n$$\n\\begin{aligned}\n& C_{s b}=\\frac{C_{s b 0}}{\\left(1+v_{S B} / \\phi_{0}\\right)^{m}}=\\frac{10}{(1+1 / 0.6)^{0.5}} \\cong 6 \\mathrm{fF} \\\\\n& C_{d b}=\\frac{C_{d b 0}}{\\left(1+v_{D B} / \\phi_{0}\\right)^{m}}=\\frac{10}{(1+3 / 0.6)^{0.5}} \\cong 4 \\mathrm{fF} \\\\\n& C_{g s} \\cong \\frac{2}{3} W L C_{o x}+W L_{o v} C_{o x}=\\frac{2}{3} 10 \\times 1 \\times 4+10 \\times 0.025 \\times 4 \\cong 27+1=28 \\mathrm{fF} \\\\\n& C_{g d}=1 \\mathrm{fF}\n\\end{aligned}\n$$\n\nThe complete small-signal model is depicted in Fig. 6.13b.\n(b) To find $f_{T}$ using Eq. (6.24b), but with $C_{g s}$ as in Eq. (6.22), namely, $C_{g s}=27+1+5=33 \\mathrm{fF}$, we get\n\n$$\nf_{T}=\\frac{g_{m}}{2 \\pi\\left(C_{g s}+C_{g d}\\right)}=\\frac{1 /\\left(1.41 \\times 10^{3}\\right)}{2 \\pi(33+1) 10^{-15}}=3.31 \\mathrm{GHz}\n$$\n\nAs in the BJT case, it is instructive to delve deeper into $f_{T}$, which we now express as\n\n$$\n\\begin{equation*}\nf_{T}=\\frac{\\sqrt{2 k I_{D}}}{2 \\pi\\left(C_{g s}+C_{g d}\\right)} \\tag{6.25}\n\\end{equation*}\n$$\n\nClearly, the $f_{T}$ of a MOSFET increases with the square root of the bias current $I_{D}$. By contrast, at sufficiently low bias currents, the $f_{T}$ of a BJT increases directly with $I_{C}$ until it saturates at $f_{T}=1 /\\left(2 \\pi \\tau_{F}\\right)$ due to minority-charge diffusion. In contrast, the current in a FET is due to majority-charge drift, so the limiting factors are exclusively the stray capacitances.\n\nOf all the capacitances in a MOSFET, the dominant one is usually the first component on the right-hand side of Eq. (6.21). If we approximate Eq. (6.24b) as $f_{T} \\cong g_{m} /\\left(2 \\pi C_{g s}\\right)$ with $C_{g s} \\cong(2 / 3) W L C_{o x}$, then\n\n$$\nf_{T} \\cong \\frac{g_{m}}{2 \\pi(2 / 3) W L C_{o x}}=\\frac{0.75}{\\pi} \\frac{g_{m}}{W L C_{o x}}\n$$\n\nLetting $g_{m}=k V_{O V}=\\left[(W / L) \\mu_{n} C_{o x}\\right] V_{O V}$ and simplifying, we can place an upper limit on the $f_{T}$ of an $n$ MOSFET for a given $V_{O V}$ by writing\n\n$$\n\\begin{equation*}\nf_{T(\\max )}=\\frac{0.75}{\\pi} \\frac{\\mu_{n}}{L^{2}} V_{O V} \\tag{6.26}\n\\end{equation*}\n$$\n\n(For a $p$ MOSFET, replace $\\mu_{n}$ with $\\mu_{p}$.) It is evident that for rapid operation, a MOSFET should have a very short channel and be of the $n$ type, as electrons are 2 to 3 times as mobile as holes in a $p$-type. Note the striking similarity to the BJT limit of Eq. (6.15), except for the substitution of the (fixed) thermal voltage $V_{T}$ with the (user-imposed) overdrive voltage $V_{O V}$: the higher $V_{O V}$, the faster the MOSFET is likely to operate."
},
{
    "text": "Armed with the high-frequency models, we are now keen to explore the frequency response of the most widely used transistor configurations: the common-emitter (CE) and common-source (CS) setups, which are the staples of voltage amplification. Their ac equivalents, depicted in Figs. $6.14 a$ and $6.15 a$, could correspond to any of the discrete CE implementations from Chapters 2 and 3, provided the operating frequencies ensure that the ac coupling and bypassing capacitors function as ac short circuits. Alternatively, they could represent the differential-mode half-circuits of the dc-coupled EC and SC pairs from Chapter 4. As a result, the analysis we are about to conduct is broadly applicable.\n\nBy substituting the transistors with their high-frequency small-signal models, we derive the ac circuits shown in $6.14 b$ and $6.15 b$. (For now, we are intentionally omitting the output-node parasitics, specifically, $C_{s}$ for the BJT and $C_{d b}$ for the FET, to concentrate on the two remaining capacitances and build valuable intuition. These parasitics will be addressed later in this section.) The two circuits exhibit inherent differences but also structural similarities. In fact, through straightforward circuit transformations, we can simplify them to a shared form, enabling a single analysis of this common circuit to avoid redundancy (fortunately, such opportunities will frequently arise as we progress).\n\n- Starting with the BJT equivalent in Fig. $6.14 b$, we streamline its left side using Thvenin's theorem and its right side by merging the two parallel resistances into one,\n\n$$\n\\begin{equation*}\nV_{i}=\\frac{r_{\\pi}}{R_{s i g}+r_{b}+r_{\\pi}} V_{s i g} \\quad R_{1}=\\left(R_{s i g}+r_{b}\\right) / / r_{\\pi} \\quad R_{2}=R_{C} / / r_{o} \\tag{6.27}\n\\end{equation*}\n$$\n\nFollowing this, the circuit in Fig. $6.14 b$ simplifies to that in Fig. 6.16, where the input-node capacitance $C_{1}$ takes the place of $C_{\\pi}$, the feedback capacitance $C_{f}$ assumes the role of $C_{\\mu}$, and $V_{1}$ corresponds to $V_{\\pi}$.\n\n- Similarly, for the MOS equivalent in Fig. $6.15 b$, by setting\n\n$$\n\\begin{equation*}\nV_{i}=V_{s i g} \\quad R_{1}=R_{s i g} \\quad R_{2}=R_{D} / / r_{o} \\tag{6.28}\n\\end{equation*}\n$$\n\nwe reduce it to the same equivalent in Fig. 6.16, where now the input-node capacitance $C_{1}$ represents $C_{g s}$, the feedback capacitance $C_{f}$ stands for $C_{g d}$, and $V_{1}$ is equivalent to $V_{g s}$.\n\nimage_name:FIGURE 6.14 (a)\ndescription:\n[\nname: Vsig, type: VoltageSource, value: Vsig, ports: {Np: Vsig, Nn: GND}\nname: Rsig, type: Resistor, value: Rsig, ports: {N1: Vsig, N2: V1}\nname: NPN Transistor, type: NPN, ports: {C: Vo, B: V1, E: GND}\nname: RC, type: Resistor, value: RC, ports: {N1: Vo, N2: GND}\n]\nextrainfo:This is an AC equivalent circuit of a common-emitter amplifier. The circuit includes a voltage source Vsig, resistors Rsig, rb, r, ro, and RC, capacitors C and C, and a voltage-controlled current source gmV. The NPN transistor is used for amplification.\n\nimage_name:FIGURE 6.14 (b)\ndescription:\n[\nname: Vsig, type: VoltageSource, ports: {Np: Vsig, Nn: GND}\nname: Rsig, type: Resistor, value: Rsig, ports: {N1: Vsig, N2: V1}\nname: rb, type: Resistor, value: rb, ports: {N1: V1, N2: V}\nname: r, type: Resistor, value: r, ports: {N1: V, N2: GND}\nname: C, type: Capacitor, value: C, ports: {Np: V, Nn: GND}\nname: C, type: Capacitor, value: C, ports: {Np: Vx, Nn: Vo}\nname: gmV, type: VoltageControlledCurrentSource, ports: {Np: Vo, Nn: GND}\nname: ro, type: Resistor, value: ro, ports: {N1: Vo, N2: GND}\nname: RC, type: Resistor, value: RC, ports: {N1: Vo, N2: GND}\n]\nextrainfo:This circuit is a high-frequency small-signal model of a CE amplifier. It includes a voltage source Vsig, resistors Rsig, rb, r, ro, and RC, capacitors C and C, and a voltage-controlled current source gmV. The input is Vsig, and the output is Vo.\n\nFIGURE 6.14 (a) Ac equivalent of the CE amplifier, and (b) its high-frequency small-signal model.\n\nimage_name:(a)\ndescription:\n[\nname: Vsig, type: VoltageSource, value: Vsig, ports: {Np: Vsig, Nn: GND}\nname: Rsig, type: Resistor, value: Rsig, ports: {N1: Vsig, N2: Vgs}\nname: VI, type: VoltageSource, value: VI, ports: {Np: Vgs, Nn: GND}\nname: NMOS, type: NMOS, ports: {S: GND, D: Vo, G: Vgs}\nname: RD, type: Resistor, value: RD, ports: {N1: Vo, N2: GND}\n]\nextrainfo:This is a common-source amplifier circuit with an NMOS transistor. The input is connected to Vsig, and the output is taken from Vo. The RD resistor is connected to the output, and Rsig is connected to the input. The NMOS transistor is biased with a voltage source VI.\n\nimage_name:(b)\ndescription:\n[\nname: Vsig, type: VoltageSource, value: Vsig, ports: {Np: Vsig, Nn: GND}\nname: Rsig, type: Resistor, value: Rsig, ports: {N1: Vsig, N2: Vgs}\nname: Cgs, type: Capacitor, value: Cgs, ports: {Np: Vgs, Nn: GND}\nname: Cgd, type: Capacitor, value: Cgd, ports: {Np: Vgs, Nn: Vo}\nname: gmVgs, type: VoltageControlledCurrentSource, ports: {Np: Vo, Nn: GND}\nname: ro, type: Resistor, value: ro, ports: {N1: Vo, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: Vo, N2: GND}\n]\nextrainfo:This circuit is a high-frequency small-signal model of a common-source (CS) amplifier. It includes a voltage source Vsig, resistors Rsig, ro, and RD, capacitors Cgs and Cgd, and a voltage-controlled current source gmVgs. The input is Vsig, and the output is Vo.\n\nFIGURE 6.15 (a) Ac equivalent of the CS amplifier, and (b) its high-frequency small-signal model.\n\nLet us now examine the common circuit in Fig. 6.16, and subsequently tailor our findings to the BJT and FET circuits in Figs. 6.14 and 6.15 using Eqs. (6.27) and (6.28), respectively. The analysis of this circuit is further simplified by leveraging the Miller effect, which we will discuss next. Although the results may not be perfectly accurate, they will provide significant insights, as we will discover.\n\nimage_name:Figure 6.16\ndescription:\n[\nname: Vi, type: VoltageSource, value: Vi, ports: {Np: Vi, Nn: GND}\nname: R1, type: Resistor, value: R1, ports: {N1: Vi, N2: V1}\nname: C1, type: Capacitor, value: C1, ports: {Np: V1, Nn: GND}\nname: Cf, type: Capacitor, value: Cf, ports: {Np: V1, Nn: Vo}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: Vo, Nn: GND}\nname: R2, type: Resistor, value: R2, ports: {N1: Vo, N2: GND}\n]\nextrainfo:The circuit is a high-frequency small-signal model for a common-source (CS) amplifier, demonstrating the Miller effect with feedback capacitance Cf.\n\nFIGURE 6.16 General model for the CE and CS amplifiers."
},
{
    "text": "Equipped with high-frequency models, we are now keen to explore the frequency response of the most widely used transistor configurations: the common-emitter (CE) and common-source (CS) setups, which are the backbone of voltage amplification. Their ac equivalents, depicted in Figs. $6.14 a$ and $6.15 a$, can correspond to any of the discrete CE implementations from Chapters 2 and 3, provided the operating frequencies ensure that the ac coupling and bypassing capacitors function as ac short circuits. Alternatively, they could represent the differential-mode half-circuits of the dc-coupled EC and SC pairs from Chapter 4. Thus, the analysis we are set to conduct is broadly applicable.\n\nBy substituting the transistors with their high-frequency small-signal models, we derive the ac circuits shown in $6.14 b$ and $6.15 b$. (For now, we intentionally overlook the output-node parasitics, specifically $C_{s}$ for the BJT and $C_{d b}$ for the FET, to concentrate on the two remaining capacitances and build essential intuition. These parasitics will be addressed later in this section.) These two circuits display inherent differences but also share structural similarities. In fact, through straightforward circuit transformations, we can condense them into a unified form, enabling a single analysis of this common circuit to avoid redundancy (fortunately, such opportunities will frequently arise as we progress).\n\n- Starting with the BJT equivalent in Fig. $6.14 b$, we simplify its left side using Thvenin's theorem and its right side by merging the two parallel resistances into one,\n\n$$\n\\begin{equation*}\nV_{i}=\\frac{r_{\\pi}}{R_{s i g}+r_{b}+r_{\\pi}} V_{s i g} \\quad R_{1}=\\left(R_{s i g}+r_{b}\\right) / / r_{\\pi} \\quad R_{2}=R_{C} / / r_{o} \\tag{6.27}\n\\end{equation*}\n$$\n\nFollowing this, the circuit in Fig. $6.14 b$ is reduced to that in Fig. 6.16, where the input-node capacitance $C_{1}$ assumes the role of $C_{\\pi}$, the feedback capacitance $C_{f}$ takes on that of $C_{\\mu}$, and $V_{1}$ corresponds to $V_{\\pi}$.\n\n- Similarly, for the MOS equivalent in Fig. $6.15 b$ and setting\n\n$$\n\\begin{equation*}\nV_{i}=V_{s i g} \\quad R_{1}=R_{s i g} \\quad R_{2}=R_{D} / / r_{o} \\tag{6.28}\n\\end{equation*}\n$$\n\nwe reduce it to the same equivalent circuit in Fig. 6.16, where now the input-node capacitance $C_{1}$ represents $C_{g s}$, the feedback capacitance $C_{f}$ stands for $C_{g d}$, and $V_{1}$ equates to $V_{g s}$.\nimage_name:FIGURE 6.14 (a)\ndescription:\n[\nname: Vsig, type: VoltageSource, value: Vsig, ports: {Np: Vsig, Nn: GND}\nname: Rsig, type: Resistor, value: Rsig, ports: {N1: Vsig, N2: V1}\nname: NPN Transistor, type: NPN, ports: {C: Vo, B: V1, E: GND}\nname: RC, type: Resistor, value: RC, ports: {N1: Vo, N2: GND}\n]\nextrainfo:This AC equivalent circuit represents a common-emitter amplifier. It includes a voltage source Vsig, resistors Rsig, rb, r, ro, and RC, capacitors C and C, and a voltage-controlled current source gmV. The NPN transistor is used for amplification.\nimage_name:FIGURE 6.14 (b)\ndescription:\n[\nname: Vsig, type: VoltageSource, ports: {Np: Vsig, Nn: GND}\nname: Rsig, type: Resistor, value: Rsig, ports: {N1: Vsig, N2: V1}\nname: rb, type: Resistor, value: rb, ports: {N1: V1, N2: V}\nname: r, type: Resistor, value: r, ports: {N1: V, N2: GND}\nname: C, type: Capacitor, value: C, ports: {Np: V, Nn: GND}\nname: C, type: Capacitor, value: C, ports: {Np: Vx, Nn: Vo}\nname: gmV, type: VoltageControlledCurrentSource, ports: {Np: Vo, Nn: GND}\nname: ro, type: Resistor, value: ro, ports: {N1: Vo, N2: GND}\nname: RC, type: Resistor, value: RC, ports: {N1: Vo, N2: GND}\n]\nextrainfo:This circuit is a high-frequency small-signal model of a CE amplifier. It includes a voltage source Vsig, resistors Rsig, rb, r, ro, and RC, capacitors C and C, and a voltage-controlled current source gmV. The input is Vsig, and the output is Vo.\n\nFIGURE 6.14 (a) Ac equivalent of the CE amplifier, and (b) its high-frequency small-signal model.\nimage_name:(a)\ndescription:\n[\nname: Vsig, type: VoltageSource, value: Vsig, ports: {Np: Vsig, Nn: GND}\nname: Rsig, type: Resistor, value: Rsig, ports: {N1: Vsig, N2: Vgs}\nname: VI, type: VoltageSource, value: VI, ports: {Np: Vgs, Nn: GND}\nname: NMOS, type: NMOS, ports: {S: GND, D: Vo, G: Vgs}\nname: RD, type: Resistor, value: RD, ports: {N1: Vo, N2: GND}\n]\nextrainfo:This circuit represents a common-source amplifier with an NMOS transistor. The input is connected to Vsig, and the output is taken from Vo. The RD resistor is connected to the output, and Rsig is connected to the input. The NMOS transistor is biased with a voltage source VI.\nimage_name:(b)\ndescription:\n[\nname: Vsig, type: VoltageSource, value: Vsig, ports: {Np: Vsig, Nn: GND}\nname: Rsig, type: Resistor, value: Rsig, ports: {N1: Vsig, N2: Vgs}\nname: Cgs, type: Capacitor, value: Cgs, ports: {Np: Vgs, Nn: GND}\nname: Cgd, type: Capacitor, value: Cgd, ports: {Np: Vgs, Nn: Vo}\nname: gmVgs, type: VoltageControlledCurrentSource, ports: {Np: Vo, Nn: GND}\nname: ro, type: Resistor, value: ro, ports: {N1: Vo, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: Vo, N2: GND}\n]\nextrainfo:This circuit is a high-frequency small-signal model of a common-source (CS) amplifier. It includes a voltage source Vsig, resistors Rsig, ro, and RD, capacitors Cgs and Cgd, and a voltage-controlled current source gmVgs. The input is Vsig, and the output is Vo.\n\nFIGURE 6.15 (a) Ac equivalent of the CS amplifier, and (b) its high-frequency small-signal model.\n\nLet us now examine the common circuit in Fig. 6.16, and subsequently adapt our findings to the BJT and FET circuits of Figs. 6.14 and 6.15 using Eqs. (6.27) and (6.28), respectively. The analysis of this circuit is further simplified by leveraging the Miller effect, which will be discussed shortly. The results, though not entirely precise, will provide valuable insights, as we will discover.\nimage_name:Figure 6.16\ndescription:\n[\nname: Vi, type: VoltageSource, value: Vi, ports: {Np: Vi, Nn: GND}\nname: R1, type: Resistor, value: R1, ports: {N1: Vi, N2: V1}\nname: C1, type: Capacitor, value: C1, ports: {Np: V1, Nn: GND}\nname: Cf, type: Capacitor, value: Cf, ports: {Np: V1, Nn: Vo}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: Vo, Nn: GND}\nname: R2, type: Resistor, value: R2, ports: {N1: Vo, N2: GND}\n]\nextrainfo:The circuit is a high-frequency small-signal model for a common-source (CS) amplifier, illustrating the Miller effect with feedback capacitance Cf.\n\nFIGURE 6.16 General model for the CE and CS amplifiers."
},
{
    "text": "Equipped with the high-frequency models, we are now keen to explore the frequency response of the most widely used transistor configurations: the common-emitter (CE) and common-source (CS) setups, which are the backbone of voltage amplification. Their ac equivalents, depicted in Figs. $6.14 a$ and $6.15 a$, can correspond to any of the discrete CE implementations from Chapters 2 and 3, provided the operating frequencies ensure that the ac coupling and bypassing capacitors function as ac short circuits. Alternatively, they could represent the differential-mode half-circuits of the dc-coupled EC and SC pairs from Chapter 4. As a result, the analysis we are about to conduct is broadly applicable.\n\nBy substituting the transistors with their high-frequency small-signal models, we derive the ac circuits shown in $6.14 b$ and $6.15 b$. (For now, we deliberately overlook the output-node parasitics, specifically $C_{s}$ for the BJT and $C_{d b}$ for the FET, to concentrate on the two remaining capacitances and build valuable intuition. These parasitics will be addressed later in this section.) While the two circuits exhibit inherent differences, they also share formal similarities. In fact, through straightforward circuit transformations, we can condense them into a unified form, allowing us to perform a single analysis on this common circuit to avoid redundancy (fortunately, such opportunities will frequently arise as we progress).\n\n- Focusing first on the BJT equivalent in Fig. $6.14 b$, we simplify its left side using Thvenin's theorem and its right side by merging the two parallel resistances into one,\n\n$$\n\\begin{equation*}\nV_{i}=\\frac{r_{\\pi}}{R_{s i g}+r_{b}+r_{\\pi}} V_{s i g} \\quad R_{1}=\\left(R_{s i g}+r_{b}\\right) / / r_{\\pi} \\quad R_{2}=R_{C} / / r_{o} \\tag{6.27}\n\\end{equation*}\n$$\n\nFollowing this, the circuit in Fig. $6.14 b$ simplifies to that in Fig. 6.16, where the input-node capacitance $C_{1}$ takes the role of $C_{\\pi}$, the feedback capacitance $C_{f}$ assumes that of $C_{\\mu}$, and $V_{1}$ corresponds to $V_{\\pi}$.\n\n- Similarly, for the MOS equivalent in Fig. $6.15 b$, by setting\n\n$$\n\\begin{equation*}\nV_{i}=V_{s i g} \\quad R_{1}=R_{s i g} \\quad R_{2}=R_{D} / / r_{o} \\tag{6.28}\n\\end{equation*}\n$$\n\nwe reduce it to the same equivalent circuit in Fig. 6.16, where now the input-node capacitance $C_{1}$ represents $C_{g s}$, the feedback capacitance $C_{f}$ stands for $C_{g d}$, and $V_{1}$ equates to $V_{g s}$.\n\nFIGURE 6.14 (a) Ac equivalent of the CE amplifier, and (b) its high-frequency small-signal model.\nFIGURE 6.15 (a) Ac equivalent of the CS amplifier, and (b) its high-frequency small-signal model.\n\nLet us now examine the common circuit in Fig. 6.16 and subsequently adapt our findings to the BJT and FET circuits of Figs. 6.14 and 6.15 using Eqs. (6.27) and (6.28), respectively. The analysis of this circuit is further streamlined by leveraging the Miller effect, which we will discuss next. Although the results may not be perfectly accurate, they will offer significant insights, as we will discover.\n\nFIGURE 6.16 General model for the CE and CS amplifiers."
},
{
    "text": "Equipped with the high-frequency models, we are now keen to explore the frequency response of the most widely used transistor configurations: the common-emitter (CE) and common-source (CS) setups, which are the backbone of voltage amplification. Their AC equivalents, depicted in Figs. $6.14 a$ and $6.15 a$, can represent any of the discrete CE implementations from Chapters 2 and 3, provided the operating frequencies ensure that the AC coupling and bypassing capacitors act as AC short circuits. Alternatively, they could depict the differential-mode half-circuits of the DC-coupled EC and SC pairs from Chapter 4. Thus, the analysis we are about to conduct is broadly applicable.\n\nBy substituting the transistors with their high-frequency small-signal models, we derive the AC circuits shown in $6.14 b$ and $6.15 b$. (For now, we intentionally overlook the output-node parasitics, specifically $C_{s}$ for the BJT and $C_{d b}$ for the FET, to concentrate on the two remaining capacitances and cultivate valuable insights. These parasitics will be addressed later in this section.) While the two circuits exhibit inherent differences, they also share formal similarities. In fact, through straightforward circuit transformations, we can simplify them to a unified form, enabling a single analysis to avoid redundant work (fortunately, such opportunities will frequently arise as we progress).\n\n- Focusing first on the BJT equivalent in Fig. $6.14 b$, we streamline its left side using Thvenin's theorem and its right side by merging the two parallel resistances into one,\n\n$$\n\\begin{equation*}\nV_{i}=\\frac{r_{\\pi}}{R_{s i g}+r_{b}+r_{\\pi}} V_{s i g} \\quad R_{1}=\\left(R_{s i g}+r_{b}\\right) / / r_{\\pi} \\quad R_{2}=R_{C} / / r_{o} \\tag{6.27}\n\\end{equation*}\n$$\n\nPost this, the circuit in Fig. $6.14 b$ simplifies to that in Fig. 6.16, where the input-node capacitance $C_{1}$ corresponds to $C_{\\pi}$, the feedback capacitance $C_{f}$ to $C_{\\mu}$, and $V_{1}$ to $V_{\\pi}$.\n\n- Similarly, examining the MOS equivalent in Fig. $6.15 b$ and setting\n\n$$\n\\begin{equation*}\nV_{i}=V_{s i g} \\quad R_{1}=R_{s i g} \\quad R_{2}=R_{D} / / r_{o} \\tag{6.28}\n\\end{equation*}\n$$\n\nwe reduce it to the same equivalent in Fig. 6.16, where now the input-node capacitance $C_{1}$ corresponds to $C_{g s}$, the feedback capacitance $C_{f}$ to $C_{g d}$, and $V_{1}$ to $V_{g s}$.\nimage_name:FIGURE 6.14 (a)\ndescription:\n[\nname: Vsig, type: VoltageSource, value: Vsig, ports: {Np: Vsig, Nn: GND}\nname: Rsig, type: Resistor, value: Rsig, ports: {N1: Vsig, N2: V1}\nname: NPN Transistor, type: NPN, ports: {C: Vo, B: V1, E: GND}\nname: RC, type: Resistor, value: RC, ports: {N1: Vo, N2: GND}\n]\nextrainfo:This AC equivalent circuit represents a common-emitter amplifier. It includes a voltage source Vsig, resistors Rsig, rb, r, ro, and RC, capacitors C and C, and a voltage-controlled current source gmV. The NPN transistor is used for amplification.\nimage_name:FIGURE 6.14 (b)\ndescription:\n[\nname: Vsig, type: VoltageSource, ports: {Np: Vsig, Nn: GND}\nname: Rsig, type: Resistor, value: Rsig, ports: {N1: Vsig, N2: V1}\nname: rb, type: Resistor, value: rb, ports: {N1: V1, N2: V}\nname: r, type: Resistor, value: r, ports: {N1: V, N2: GND}\nname: C, type: Capacitor, value: C, ports: {Np: V, Nn: GND}\nname: C, type: Capacitor, value: C, ports: {Np: Vx, Nn: Vo}\nname: gmV, type: VoltageControlledCurrentSource, ports: {Np: Vo, Nn: GND}\nname: ro, type: Resistor, value: ro, ports: {N1: Vo, N2: GND}\nname: RC, type: Resistor, value: RC, ports: {N1: Vo, N2: GND}\n]\nextrainfo:This circuit is a high-frequency small-signal model of a CE amplifier. It includes a voltage source Vsig, resistors Rsig, rb, r, ro, and RC, capacitors C and C, and a voltage-controlled current source gmV. The input is Vsig, and the output is Vo.\n\nFIGURE 6.14 (a) AC equivalent of the CE amplifier, and (b) its high-frequency small-signal model.\nimage_name:(a)\ndescription:\n[\nname: Vsig, type: VoltageSource, value: Vsig, ports: {Np: Vsig, Nn: GND}\nname: Rsig, type: Resistor, value: Rsig, ports: {N1: Vsig, N2: Vgs}\nname: VI, type: VoltageSource, value: VI, ports: {Np: Vgs, Nn: GND}\nname: NMOS, type: NMOS, ports: {S: GND, D: Vo, G: Vgs}\nname: RD, type: Resistor, value: RD, ports: {N1: Vo, N2: GND}\n]\nextrainfo:This is a common-source amplifier circuit featuring an NMOS transistor. The input connects to Vsig, and the output is derived from Vo. The RD resistor is linked to the output, and Rsig is connected to the input. The NMOS transistor is biased by a voltage source VI.\nimage_name:(b)\ndescription:\n[\nname: Vsig, type: VoltageSource, value: Vsig, ports: {Np: Vsig, Nn: GND}\nname: Rsig, type: Resistor, value: Rsig, ports: {N1: Vsig, N2: Vgs}\nname: Cgs, type: Capacitor, value: Cgs, ports: {Np: Vgs, Nn: GND}\nname: Cgd, type: Capacitor, value: Cgd, ports: {Np: Vgs, Nn: Vo}\nname: gmVgs, type: VoltageControlledCurrentSource, ports: {Np: Vo, Nn: GND}\nname: ro, type: Resistor, value: ro, ports: {N1: Vo, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: Vo, N2: GND}\n]\nextrainfo:This circuit is a high-frequency small-signal model of a common-source (CS) amplifier. It includes a voltage source Vsig, resistors Rsig, ro, and RD, capacitors Cgs and Cgd, and a voltage-controlled current source gmVgs. The input is Vsig, and the output is Vo.\n\nFIGURE 6.15 (a) AC equivalent of the CS amplifier, and (b) its high-frequency small-signal model.\n\nLet's analyze the common circuit in Fig. 6.16, then tailor our findings to the BJT and FET circuits in Figs. 6.14 and 6.15 using Eqs. (6.27) and (6.28), respectively. The analysis of this circuit is further simplified by leveraging the Miller effect, which we will discuss next. The results, though not entirely precise, will offer significant insights, as we will discover.\nimage_name:Figure 6.16\ndescription:\n[\nname: Vi, type: VoltageSource, value: Vi, ports: {Np: Vi, Nn: GND}\nname: R1, type: Resistor, value: R1, ports: {N1: Vi, N2: V1}\nname: C1, type: Capacitor, value: C1, ports: {Np: V1, Nn: GND}\nname: Cf, type: Capacitor, value: Cf, ports: {Np: V1, Nn: Vo}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: Vo, Nn: GND}\nname: R2, type: Resistor, value: R2, ports: {N1: Vo, N2: GND}\n]\nextrainfo:The circuit is a high-frequency small-signal model for a common-source (CS) amplifier, illustrating the Miller effect with feedback capacitance Cf.\n\nFIGURE 6.16 General model for the CE and CS amplifiers."
},
{
    "text": "Equipped with the high-frequency models, we are now keen to explore the frequency response of the most widely used transistor configurations, namely the common-emitter (CE) and common-source (CS) setups, which are the backbone of voltage amplification. Their ac equivalents, depicted in Figs. $6.14 a$ and $6.15 a$, could correspond to any of the discrete CE implementations from Chapters 2 and 3, provided the operating frequencies ensure that the ac coupling and bypassing capacitors act as ac short circuits. Alternatively, they could represent the differential-mode half-circuits of the dc-coupled EC and SC pairs discussed in Chapter 4. Thus, the analysis we are about to conduct is broadly applicable.\n\nBy substituting the transistors with their high-frequency small-signal models, we derive the ac circuits shown in $6.14 b$ and $6.15 b$. (For now, we intentionally disregard the output-node parasitics, specifically $C_{s}$ for the BJT and $C_{d b}$ for the FET, to concentrate on the two remaining capacitances and build valuable intuition. These parasitics will be addressed later in this section.) While these two circuits have inherent differences, they also share formal similarities. In fact, through straightforward circuit transformations, we can convert them into a common form, enabling a single analysis to avoid redundant work (fortunately, such opportunities will frequently arise as we progress).\n\n- Initially, focusing on the BJT equivalent in Fig. $6.14 b$, we simplify its left side using Thvenin's theorem and its right side by merging the two parallel resistances into one,\n\n$$\n\\begin{equation*}\nV_{i}=\\frac{r_{\\pi}}{R_{s i g}+r_{b}+r_{\\pi}} V_{s i g} \\quad R_{1}=\\left(R_{s i g}+r_{b}\\right) / / r_{\\pi} \\quad R_{2}=R_{C} / / r_{o} \\tag{6.27}\n\\end{equation*}\n$$\n\nPost this simplification, the circuit in Fig. $6.14 b$ transforms into that of Fig. 6.16, where the input-node capacitance $C_{1}$ takes the role of $C_{\\pi}$, the feedback capacitance $C_{f}$ assumes that of $C_{\\mu}$, and $V_{1}$ corresponds to $V_{\\pi}$.\n\n- Similarly, examining the MOS equivalent in Fig. $6.15 b$ and setting\n\n$$\n\\begin{equation*}\nV_{i}=V_{s i g} \\quad R_{1}=R_{s i g} \\quad R_{2}=R_{D} / / r_{o} \\tag{6.28}\n\\end{equation*}\n$$\n\nwe also reduce it to the same equivalent circuit in Fig. 6.16, where now the input-node capacitance $C_{1}$ represents $C_{g s}$, the feedback capacitance $C_{f}$ stands for $C_{g d}$, and $V_{1}$ equates to $V_{g s}$.\n\nFIGURE 6.14 (a) Ac equivalent of the CE amplifier, and (b) its high-frequency small-signal model.\nimage_name:FIGURE 6.14 (a)\ndescription:\n[\nname: Vsig, type: VoltageSource, value: Vsig, ports: {Np: Vsig, Nn: GND}\nname: Rsig, type: Resistor, value: Rsig, ports: {N1: Vsig, N2: V1}\nname: NPN Transistor, type: NPN, ports: {C: Vo, B: V1, E: GND}\nname: RC, type: Resistor, value: RC, ports: {N1: Vo, N2: GND}\n]\nextrainfo:This is an AC equivalent circuit of a common-emitter amplifier. The circuit includes a voltage source Vsig, resistors Rsig, rb, r, ro, and RC, capacitors C and C, and a voltage-controlled current source gmV. The NPN transistor is used for amplification.\nimage_name:FIGURE 6.14 (b)\ndescription:\n[\nname: Vsig, type: VoltageSource, ports: {Np: Vsig, Nn: GND}\nname: Rsig, type: Resistor, value: Rsig, ports: {N1: Vsig, N2: V1}\nname: rb, type: Resistor, value: rb, ports: {N1: V1, N2: V}\nname: r, type: Resistor, value: r, ports: {N1: V, N2: GND}\nname: C, type: Capacitor, value: C, ports: {Np: V, Nn: GND}\nname: C, type: Capacitor, value: C, ports: {Np: Vx, Nn: Vo}\nname: gmV, type: VoltageControlledCurrentSource, ports: {Np: Vo, Nn: GND}\nname: ro, type: Resistor, value: ro, ports: {N1: Vo, N2: GND}\nname: RC, type: Resistor, value: RC, ports: {N1: Vo, N2: GND}\n]\nextrainfo:This circuit is a high-frequency small-signal model of a CE amplifier. It includes a voltage source Vsig, resistors Rsig, rb, r, ro, and RC, capacitors C and C, and a voltage-controlled current source gmV. The input is Vsig, and the output is Vo.\n\nFIGURE 6.15 (a) Ac equivalent of the CS amplifier, and (b) its high-frequency small-signal model.\nimage_name:(a)\ndescription:\n[\nname: Vsig, type: VoltageSource, value: Vsig, ports: {Np: Vsig, Nn: GND}\nname: Rsig, type: Resistor, value: Rsig, ports: {N1: Vsig, N2: Vgs}\nname: VI, type: VoltageSource, value: VI, ports: {Np: Vgs, Nn: GND}\nname: NMOS, type: NMOS, ports: {S: GND, D: Vo, G: Vgs}\nname: RD, type: Resistor, value: RD, ports: {N1: Vo, N2: GND}\n]\nextrainfo:This is a common-source amplifier circuit with an NMOS transistor. The input is connected to Vsig, and the output is taken from Vo. The RD resistor is connected to the output, and Rsig is connected to the input. The NMOS transistor is biased with a voltage source VI.\nimage_name:(b)\ndescription:\n[\nname: Vsig, type: VoltageSource, value: Vsig, ports: {Np: Vsig, Nn: GND}\nname: Rsig, type: Resistor, value: Rsig, ports: {N1: Vsig, N2: Vgs}\nname: Cgs, type: Capacitor, value: Cgs, ports: {Np: Vgs, Nn: GND}\nname: Cgd, type: Capacitor, value: Cgd, ports: {Np: Vgs, Nn: Vo}\nname: gmVgs, type: VoltageControlledCurrentSource, ports: {Np: Vo, Nn: GND}\nname: ro, type: Resistor, value: ro, ports: {N1: Vo, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: Vo, N2: GND}\n]\nextrainfo:This circuit is a high-frequency small-signal model of a common-source (CS) amplifier. It includes a voltage source Vsig, resistors Rsig, ro, and RD, capacitors Cgs and Cgd, and a voltage-controlled current source gmVgs. The input is Vsig, and the output is Vo.\n\nLet us now analyze the common circuit in Fig. 6.16, and subsequently tailor our findings to the BJT and FET circuits of Figs. 6.14 and 6.15 using Eqs. (6.27) and (6.28), respectively. The analysis of this circuit is further streamlined if we leverage the Miller effect, which will be discussed next. Although the results may not be perfectly precise, they will nonetheless provide significant insights, as we will discover.\n\nimage_name:Figure 6.16\ndescription:\n[\nname: Vi, type: VoltageSource, value: Vi, ports: {Np: Vi, Nn: GND}\nname: R1, type: Resistor, value: R1, ports: {N1: Vi, N2: V1}\nname: C1, type: Capacitor, value: C1, ports: {Np: V1, Nn: GND}\nname: Cf, type: Capacitor, value: Cf, ports: {Np: V1, Nn: Vo}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: Vo, Nn: GND}\nname: R2, type: Resistor, value: R2, ports: {N1: Vo, N2: GND}\n]\nextrainfo:The circuit is a high-frequency small-signal model for a common-source (CS) amplifier, demonstrating the Miller effect with feedback capacitance Cf.\n\nFIGURE 6.16 General model for the CE and CS amplifiers."
},
{
    "text": "With the high-frequency models at our disposal, we are now keen to explore the frequency response of the most widely used transistor configurations. The common-emitter (CE) and common-source (CS) configurations immediately come to mind, as they are the staples of voltage amplification. Their AC equivalents, depicted in Figs. $6.14 a$ and $6.15 a$, can represent any of the discrete CE implementations from Chapters 2 and 3, provided the operating frequencies ensure that the AC coupling and bypass capacitors function as AC short circuits. Alternatively, they could depict the differential-mode half-circuits of the DC-coupled EC and SC pairs from Chapter 4. Therefore, the analysis we are about to conduct is broadly applicable.\n\nBy substituting the transistors with their high-frequency small-signal models, we obtain the AC circuits shown in $6.14 b$ and $6.15 b$. (For now, we deliberately overlook the output-node parasitics, specifically $C_{s}$ for the BJT and $C_{d b}$ for the FET, to concentrate on the two remaining capacitances and build valuable intuition. These parasitics will be addressed later in this section.) The two circuits exhibit inherent differences but also structural similarities. In fact, through straightforward circuit transformations, we can convert them into a shared format, allowing us to perform a unified analysis on this common circuit to avoid redundancy (fortunately, such opportunities will frequently arise as we progress).\n\n- Starting with the BJT equivalent in Fig. $6.14 b$, we simplify its left side using Thvenin's theorem and its right side by merging the two parallel resistances into one,\n\n$$\n\\begin{equation*}\nV_{i}=\\frac{r_{\\pi}}{R_{s i g}+r_{b}+r_{\\pi}} V_{s i g} \\quad R_{1}=\\left(R_{s i g}+r_{b}\\right) / / r_{\\pi} \\quad R_{2}=R_{C} / / r_{o} \\tag{6.27}\n\\end{equation*}\n$$\n\nFollowing this, the circuit in Fig. $6.14 b$ simplifies to that in Fig. 6.16, where the input-node capacitance $C_{1}$ corresponds to $C_{\\pi}$, the feedback capacitance $C_{f}$ to $C_{\\mu}$, and $V_{1}$ to $V_{\\pi}$.\n\n- Similarly, for the MOS equivalent in Fig. $6.15 b$ and defining\n\n$$\n\\begin{equation*}\nV_{i}=V_{s i g} \\quad R_{1}=R_{s i g} \\quad R_{2}=R_{D} / / r_{o} \\tag{6.28}\n\\end{equation*}\n$$\n\nwe reduce it to the same equivalent circuit in Fig. 6.16, where now the input-node capacitance $C_{1}$ corresponds to $C_{g s}$, the feedback capacitance $C_{f}$ to $C_{g d}$, and $V_{1}$ to $V_{g s}$.\n\nImage Description: FIGURE 6.14 (a)\n- **Components**: Voltage source Vsig, resistors Rsig, rb, r, ro, and RC, capacitors C and C, and a voltage-controlled current source gmV.\n- **Details**: AC equivalent circuit of a common-emitter amplifier with an NPN transistor for amplification.\n\nImage Description: FIGURE 6.14 (b)\n- **Components**: Voltage source Vsig, resistors Rsig, rb, r, ro, and RC, capacitors C and C, and a voltage-controlled current source gmV.\n- **Details**: High-frequency small-signal model of a CE amplifier with input Vsig and output Vo.\n\nImage Description: FIGURE 6.15 (a)\n- **Components**: Voltage source Vsig, resistor Rsig, NMOS transistor, and resistor RD.\n- **Details**: Common-source amplifier circuit with input connected to Vsig and output taken from Vo.\n\nImage Description: FIGURE 6.15 (b)\n- **Components**: Voltage source Vsig, resistors Rsig, ro, and RD, capacitors Cgs and Cgd, and a voltage-controlled current source gmVgs.\n- **Details**: High-frequency small-signal model of a CS amplifier with input Vsig and output Vo.\n\nLet us now examine the common circuit in Fig. 6.16, and subsequently tailor our findings to the BJT and FET circuits in Figs. 6.14 and 6.15 using Eqs. (6.27) and (6.28), respectively. This analysis is further streamlined by leveraging the Miller effect, which we will discuss next. The results, while not perfectly precise, will offer significant insights, as we will discover.\n\nImage Description: Figure 6.16\n- **Components**: Voltage source Vi, resistors R1 and R2, capacitors C1 and Cf, and a voltage-controlled current source gmV1.\n- **Details**: High-frequency small-signal model for a CS amplifier, illustrating the Miller effect with feedback capacitance Cf.\n\nFIGURE 6.16 General model for the CE and CS amplifiers."
},
{
    "text": "Armed with high-frequency models, we are keen to explore the frequency response of the most prevalent transistor configurations: the common-emitter (CE) and common-source (CS) setups, which are the backbone of voltage amplification. Their AC equivalents, depicted in Figs. $6.14 a$ and $6.15 a$, could correspond to any of the discrete CE implementations from Chapters 2 and 3, provided the operating frequencies ensure that AC coupling and bypass capacitors act as AC short circuits. These equivalents could also represent the differential-mode half-circuits of the DC-coupled EC and SC pairs from Chapter 4. Therefore, the analysis we are about to conduct is broadly applicable.\n\nBy substituting the transistors with their high-frequency small-signal models, we derive the AC circuits of $6.14 b$ and $6.15 b$. (For now, we intentionally overlook the output-node parasitics, specifically $C_{s}$ for the BJT and $C_{d b}$ for the FET, to concentrate on the two remaining capacitances and build valuable intuition. These parasitics will be addressed later in this section.) While these two circuits have inherent differences, they also share formal similarities. In fact, through straightforward circuit transformations, we can condense them into a common form, enabling a single analysis to avoid redundancy (fortunately, such opportunities will frequently arise as we progress).\n\n- Focusing first on the BJT equivalent in Fig. $6.14 b$, we simplify its left side using Thvenin's theorem and its right side by merging the two parallel resistances into one,\n\n$$\n\\begin{equation*}\nV_{i}=\\frac{r_{\\pi}}{R_{s i g}+r_{b}+r_{\\pi}} V_{s i g} \\quad R_{1}=\\left(R_{s i g}+r_{b}\\right) / / r_{\\pi} \\quad R_{2}=R_{C} / / r_{o} \\tag{6.27}\n\\end{equation*}\n$$\n\nPost this simplification, the circuit in Fig. $6.14 b$ transforms into that of Fig. 6.16, where the input-node capacitance $C_{1}$ assumes the role of $C_{\\pi}$, the feedback capacitance $C_{f}$ that of $C_{\\mu}$, and $V_{1}$ that of $V_{\\pi}$.\n\n- Similarly, examining the MOS equivalent in Fig. $6.15 b$ and setting\n\n$$\n\\begin{equation*}\nV_{i}=V_{s i g} \\quad R_{1}=R_{s i g} \\quad R_{2}=R_{D} / / r_{o} \\tag{6.28}\n\\end{equation*}\n$$\n\nwe reduce it to the same equivalent as Fig. 6.16, wherein the input-node capacitance $C_{1}$ now represents $C_{g s}$, the feedback capacitance $C_{f}$ stands for $C_{g d}$, and $V_{1}$ corresponds to $V_{g s}$.\n\nFIGURE 6.14 (a) AC equivalent of the CE amplifier, and (b) its high-frequency small-signal model.\nimage_name:FIGURE 6.14 (a)\ndescription:\n[\nname: Vsig, type: VoltageSource, value: Vsig, ports: {Np: Vsig, Nn: GND}\nname: Rsig, type: Resistor, value: Rsig, ports: {N1: Vsig, N2: V1}\nname: NPN Transistor, type: NPN, ports: {C: Vo, B: V1, E: GND}\nname: RC, type: Resistor, value: RC, ports: {N1: Vo, N2: GND}\n]\nextrainfo:This is an AC equivalent circuit of a common-emitter amplifier. The circuit includes a voltage source Vsig, resistors Rsig, rb, r, ro, and RC, capacitors C and C, and a voltage-controlled current source gmV. The NPN transistor is used for amplification.\nimage_name:FIGURE 6.14 (b)\ndescription:\n[\nname: Vsig, type: VoltageSource, ports: {Np: Vsig, Nn: GND}\nname: Rsig, type: Resistor, value: Rsig, ports: {N1: Vsig, N2: V1}\nname: rb, type: Resistor, value: rb, ports: {N1: V1, N2: V}\nname: r, type: Resistor, value: r, ports: {N1: V, N2: GND}\nname: C, type: Capacitor, value: C, ports: {Np: V, Nn: GND}\nname: C, type: Capacitor, value: C, ports: {Np: Vx, Nn: Vo}\nname: gmV, type: VoltageControlledCurrentSource, ports: {Np: Vo, Nn: GND}\nname: ro, type: Resistor, value: ro, ports: {N1: Vo, N2: GND}\nname: RC, type: Resistor, value: RC, ports: {N1: Vo, N2: GND}\n]\nextrainfo:This circuit is a high-frequency small-signal model of a CE amplifier. It includes a voltage source Vsig, resistors Rsig, rb, r, ro, and RC, capacitors C and C, and a voltage-controlled current source gmV. The input is Vsig, and the output is Vo.\n\nFIGURE 6.15 (a) AC equivalent of the CS amplifier, and (b) its high-frequency small-signal model.\nimage_name:(a)\ndescription:\n[\nname: Vsig, type: VoltageSource, value: Vsig, ports: {Np: Vsig, Nn: GND}\nname: Rsig, type: Resistor, value: Rsig, ports: {N1: Vsig, N2: Vgs}\nname: VI, type: VoltageSource, value: VI, ports: {Np: Vgs, Nn: GND}\nname: NMOS, type: NMOS, ports: {S: GND, D: Vo, G: Vgs}\nname: RD, type: Resistor, value: RD, ports: {N1: Vo, N2: GND}\n]\nextrainfo:This is a common-source amplifier circuit with an NMOS transistor. The input is connected to Vsig, and the output is taken from Vo. The RD resistor is connected to the output, and Rsig is connected to the input. The NMOS transistor is biased with a voltage source VI.\nimage_name:(b)\ndescription:\n[\nname: Vsig, type: VoltageSource, value: Vsig, ports: {Np: Vsig, Nn: GND}\nname: Rsig, type: Resistor, value: Rsig, ports: {N1: Vsig, N2: Vgs}\nname: Cgs, type: Capacitor, value: Cgs, ports: {Np: Vgs, Nn: GND}\nname: Cgd, type: Capacitor, value: Cgd, ports: {Np: Vgs, Nn: Vo}\nname: gmVgs, type: VoltageControlledCurrentSource, ports: {Np: Vo, Nn: GND}\nname: ro, type: Resistor, value: ro, ports: {N1: Vo, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: Vo, N2: GND}\n]\nextrainfo:This circuit is a high-frequency small-signal model of a common-source (CS) amplifier. It includes a voltage source Vsig, resistors Rsig, ro, and RD, capacitors Cgs and Cgd, and a voltage-controlled current source gmVgs. The input is Vsig, and the output is Vo.\n\nLet us now examine the common circuit of Fig. 6.16, and subsequently tailor our findings to the BJT and FET circuits of Figs. 6.14 and 6.15 using Eqs. (6.27) and (6.28), respectively. The analysis of this circuit is further simplified by leveraging the Miller effect, which we will discuss next. Although the results may not be perfectly precise, they will prove to be highly informative, as we will discover.\nimage_name:Figure 6.16\ndescription:\n[\nname: Vi, type: VoltageSource, value: Vi, ports: {Np: Vi, Nn: GND}\nname: R1, type: Resistor, value: R1, ports: {N1: Vi, N2: V1}\nname: C1, type: Capacitor, value: C1, ports: {Np: V1, Nn: GND}\nname: Cf, type: Capacitor, value: Cf, ports: {Np: V1, Nn: Vo}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: Vo, Nn: GND}\nname: R2, type: Resistor, value: R2, ports: {N1: Vo, N2: GND}\n]\nextrainfo:The circuit is a high-frequency small-signal model for a common-source (CS) amplifier, demonstrating the Miller effect with feedback capacitance Cf.\n\nFIGURE 6.16 General model for the CE and CS amplifiers."
},
{
    "text": "With the high-frequency models at our disposal, we are now keen to explore the frequency response of the most widely used transistor configurations. The common-emitter (CE) and common-source (CS) configurations immediately come to mind, as they are the primary choices for voltage amplification. Their AC equivalents, depicted in Figs. $6.14 a$ and $6.15 a$, can represent any of the discrete CE implementations from Chapters 2 and 3, provided the operating frequencies ensure that the AC coupling and bypassing capacitors function as AC short circuits. Additionally, they can depict the differential-mode half-circuits of the DC-coupled EC and SC pairs from Chapter 4. Thus, the analysis we are about to conduct is broadly applicable.\n\nBy substituting the transistors with their high-frequency small-signal models, we obtain the AC circuits shown in $6.14 b$ and $6.15 b$. (For now, we intentionally the output-node parasitics, specifically $C_{s}$ for the BJT and $C_{d b}$ for the FET, to concentrate on the remaining two capacitances and develop useful intuition. These parasitics will be addressed later in this section.) While the two circuits have inherent differences, they also share formal similarities. In fact, through simple circuit transformations, we can reduce them to a unified form, enabling a single analysis to avoid redundancy (fortunately, such opportunities will frequently arise as we progress).\n\n- Starting with the BJT equivalent in Fig. $6.14 b$, we simplify the left side using Thvenin's theorem and the right side by combining the two parallel resistances into one,\n\n$$\n\\begin{equation*}\nV_{i}=\\frac{r_{\\pi}}{R_{s i g}+r_{b}+r_{\\pi}} V_{s i g} \\quad R_{1}=\\left(R_{s i g}+r_{b}\\right) / / r_{\\pi} \\quad R_{2}=R_{C} / / r_{o} \\tag{6.27}\n\\end{equation*}\n$$\n\nFollowing this, the circuit in Fig. $6.14 b$ simplifies to that in Fig. 6.16, where the input-node capacitance $C_{1}$ corresponds to $C_{\\pi}$, the feedback capacitance $C_{f}$ to $C_{\\mu}$, and $V_{1}$ to $V_{\\pi}$.\n\n- Similarly, for the MOS equivalent in Fig. $6.15 b$, with\n\n$$\n\\begin{equation*}\nV_{i}=V_{s i g} \\quad R_{1}=R_{s i g} \\quad R_{2}=R_{D} / / r_{o} \\tag{6.28}\n\\end{equation*}\n$$\n\nwe reduce it to the same equivalent circuit in Fig. 6.16, where now the input-node capacitance $C_{1}$ corresponds to $C_{g s}$, the feedback capacitance $C_{f}$ to $C_{g d}$, and $V_{1}$ to $V_{g s}$.\n\n**FIGURE 6.14 (a)** AC equivalent of the CE amplifier, and **(b)** its high-frequency small-signal model.\n\n- **FIGURE 6.14 (a)**: This AC equivalent circuit of a common-emitter amplifier includes a voltage source Vsig, resistors Rsig, rb, r, ro, and RC, capacitors C and C, and a voltage-controlled current source gmV. The NPN transistor is used for amplification.\n\n- **FIGURE 6.14 (b)**: This circuit is a high-frequency small-signal model of a CE amplifier, featuring a voltage source Vsig, resistors Rsig, rb, r, ro, and RC, capacitors C and C, and a voltage-controlled current source gmV. The input is Vsig, and the output is Vo.\n\n**FIGURE 6.15 (a)** AC equivalent of the CS amplifier, and **(b)** its high-frequency small-signal model.\n\n- **FIGURE 6.15 (a)**: This is a common-source amplifier circuit with an NMOS transistor. The input is connected to Vsig, and the output is taken from Vo. The RD resistor is connected to the output, and Rsig is connected to the input. The NMOS transistor is biased with a voltage source VI.\n\n- **FIGURE 6.15 (b)**: This circuit is a high-frequency small-signal model of a common-source (CS) amplifier, including a voltage source Vsig, resistors Rsig, ro, and RD, capacitors Cgs and Cgd, and a voltage-controlled current source gmVgs. The input is Vsig, and the output is Vo.\n\nLet us now examine the common circuit in Fig. 6.16, and then tailor our findings to the BJT and FET circuits in Figs. 6.14 and 6.15 using Eqs. (6.27) and (6.28), respectively. The analysis of this circuit is further simplified by leveraging the Miller effect, which we will discuss next. While the results may not be exact, they will provide valuable insights, as we will discover.\n\n**FIGURE 6.16**: General model for the CE and CS amplifiers, illustrating the Miller effect with feedback capacitance Cf."
},
{
    "text": "In the absence of $C_{f}$, the circuit depicted in Fig. 6.16 yields $V_{o}=-g_{m} R_{2} V_{1}$, suggesting that the segment from $V_{1}$ to $V_{o}$ can be represented by an inverting amplifier as shown in Fig. 6.17. When $C_{f}$ is included, there will be some loading at the amplifier's output; however, subsequent examples will demonstrate that this loading is insignificant across the frequency range of interest. \n\nThe circuit exemplifies the Miller effect with feedback capacitance $C_{f}$. The operational amplifier has a gain of $-g_{m} R_{2}$, and the equivalent capacitance $C_{M}$ is computed as $C_{f}(1 + g_{m} R_{2})$.\n\nThe circuit in Fig. 6.17 illustrates the Miller effect with feedback capacitance $C_{f}$, which influences the equivalent impedance $Z_{eq}$ observed by the source $V_{1}$. The op-amp is modeled with a gain of $-g_{m} R_{2}$.\n\nFIGURE 6.17 Demonstrating the Miller effect.\n\nOur objective is to determine the equivalent impedance $Z_{eq}$ seen from the right by the $V_{1}$ source in Fig. 6.17. According to Ohm's law, the current supplied by $V_{1}$ is:\n\n$$\n\\begin{equation*}\nI_{f}=\\frac{V_{1}-V_{o}}{1 /\\left(s C_{f}\\right)} \\approx s C_{f}\\left[V_{1}-\\left(-g_{m} R_{2} V_{1}\\right)\\right]=s C_{f}\\left(1+g_{m} R_{2}\\right) V_{1}=s C_{M} V_{1} \\tag{6.29}\n\\end{equation*}\n$$\n\nWhere\n\n$$\n\\begin{equation*}\nC_{M}=C_{f}\\left(1+g_{m} R_{2}\\right) \\tag{6.30}\n\\end{equation*}\n$$\n\nBy setting $Z_{eq}=V_{1} / I_{f}=1 /\\left(s C_{M}\\right)$, we deduce that the combination of the amplifier and its feedback capacitance appears to the $V_{1}$ source as a simple equivalent capacitance $C_{M}$ to ground. This capacitance is $\\left(1+g_{m} R_{2}\\right)$ times larger than $C_{f}$. This fascinating phenomenon, termed the Miller effect after John M. Miller who first described it in 1920, involves the term $\\left(1+g_{m} R_{2}\\right)$ known as the Miller multiplier, and $C_{M}$ as the Miller capacitance. Generally, $C_{M} \\gg C_{f}$.\n\nTo deepen our understanding of the Miller effect, let's examine the process of changing the voltage across a $1-\\mathrm{pF}$ capacitor from 0 V to 1 mV, first with the capacitor grounded, and then with it in the feedback path of an amplifier with a gain of $-99 \\mathrm{~V} / \\mathrm{V}$. We will compare the two scenarios and provide insights.\n\n#### Solution\n\nReferring to Fig. $6.18a$, we observe that applying $\\Delta V=1 \\mathrm{mV}$ results in a charge transfer of $\\Delta Q=C \\Delta V=10^{-12} \\times 10^{-3}=10^{-15} \\mathrm{C}=1 \\mathrm{fC}$. Now, consider the scenario where the initially discharged capacitor is in the feedback path of the amplifier as shown in Fig. 6.18b. As we increase the left plate from 0 V to 1 mV, the amplifier decreases the right plate from 0 V to -99 mV, causing a total voltage change across the capacitor of $100 \\mathrm{mV}$. The charge transfer now becomes $\\Delta Q=C \\Delta V=10^{-12} \\times 100 \\times 10^{-3}=100 \\mathrm{fC}$. Despite the physical capacitance in Fig. $6.18b$ remaining 1 pF, the charge transfer is 100 times that of Fig. $6.18a$. Yet, the applied voltage remains 1 mV. If we rearrange the terms as $\\Delta Q=\\left(10^{-12} \\times 100\\right) \\times 10^{-3}=(100 \\mathrm{pF})(1 \\mathrm{mV})=100 \\mathrm{fC}$, it appears as though the input source is driving an effective capacitance 100 times larger, or $C_{M}=100 \\mathrm{pF}$!\n\nimage_name:(a)\ndescription:\n[\nname: V1, type: VoltageSource, value: 0-to-1 mV, ports: {Np: Vin1, Nn: GND}\nname: C1, type: Capacitor, value: 1 pF, ports: {Np: Vin1, Nn: GND}\n]\nextrainfo:The circuit illustrates the Miller effect, showing how the apparent capacitance increases due to feedback in an amplifier configuration. The effective capacitance is increased from 1 pF to 100 pF.\n\nimage_name:(b)\ndescription:\n[\nname: Voltage Source 1, type: VoltageSource, value: 0-to-1 mV, ports: {Np: Vin1, Nn: GND}\nname: C1, type: Capacitor, value: 1 pF, ports: {Np: Vin1, Nn: Out}\nname: OpAmp 1, type: OpAmp, value: -99, ports: {InP: GND, InN: Vin1, Out: Out}\n]\nextrainfo:The circuit illustrates the Miller effect, where the effective capacitance is increased due to the feedback in the op-amp configuration. The original capacitance of 1 pF appears as 100 pF due to the amplification factor of the op-amp.\n\nimage_name:Figure 6.18\ndescription:\n[\nname: V1, type: VoltageSource, value: 0-to-1 mV, ports: {Np: Vin1, Nn: GND}\nname: C1, type: Capacitor, value: 100 pF, ports: {Np: Vin1, Nn: GND}\n]\nextrainfo:This diagram illustrates the Miller effect by showing how the effective capacitance increases due to feedback in the circuit with an operational amplifier. The initial circuit has a 1 pF capacitor, and the presence of the op-amp increases the effective capacitance to 100 pF with a 100 fC charge transfer.\n\nFIGURE 6.18 Quantitative illustration of the Miller effect."
},
{
    "text": "When $C_{f}$ is absent, the circuit in Fig. 6.16 yields $V_{o}=-g_{m} R_{2} V_{1}$, suggesting that the segment from $V_{1}$ to $V_{o}$ can be modeled as an inverting amplifier, as depicted in Fig. 6.17. With $C_{f}$ present, there is some output loading in the amplifier; however, subsequent examples will show that this loading is insignificant across the frequency range of interest. \n\nThe circuit illustrates the Miller effect with feedback capacitance $C_{f}$. The op-amp has a gain of $-g_{m} R_{2}$, and the equivalent capacitance $C_{M}$ is computed as $C_{f}(1 + g_{m} R_{2})$. \n\nAnother depiction in Fig. 6.17 shows the Miller effect with feedback capacitance $C_{f}$, influencing the equivalent impedance $Z_{eq}$ seen by the source $V_{1}$. The op-amp is represented with a gain of $-g_{m} R_{2}$.\n\n**FIGURE 6.17** Demonstrating the Miller effect.\n\nWe now aim to determine the equivalent impedance $Z_{eq}$ observed by the $V_{1}$ source in Fig. 6.17. According to Ohm's law, the current supplied by $V_{1}$ is:\n\n$$\n\\begin{equation*}\nI_{f}=\\frac{V_{1}-V_{o}}{1 /\\left(s C_{f}\\right)} \\approx s C_{f}\\left[V_{1}-\\left(-g_{m} R_{2} V_{1}\\right)\\right]=s C_{f}\\left(1+g_{m} R_{2}\\right) V_{1}=s C_{M} V_{1} \\tag{6.29}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\nC_{M}=C_{f}\\left(1+g_{m} R_{2}\\right) \\tag{6.30}\n\\end{equation*}\n$$\n\nBy setting $Z_{eq}=V_{1} / I_{f}=1 /\\left(s C_{M}\\right)$, we deduce that the amplifier and its feedback capacitance collectively appear to the $V_{1}$ source as a simple equivalent capacitance $C_{M}$ to ground. This capacitance is $\\left(1+g_{m} R_{2}\\right)$ times $C_{f}$. This fascinating phenomenon, termed the Miller effect after John M. Miller who first described it in 1920, involves the term $\\left(1+g_{m} R_{2}\\right)$ known as the Miller multiplier, and $C_{M}$ as the Miller capacitance. Generally, $C_{M} \\gg C_{f}$.\n\nTo deepen our understanding of the Miller effect, let's examine the process of altering the voltage across a $1-\\mathrm{pF}$ capacitor from 0 V to 1 mV, first with the capacitor grounded, and then in the feedback path of an amplifier with a gain of $-99 \\mathrm{~V} / \\mathrm{V}$. We will compare the two scenarios and provide insights.\n\n#### Solution\n\nReferring to Fig. $6.18a$, we observe that applying $\\Delta V=1 \\mathrm{mV}$ results in a charge transfer of $\\Delta Q=C \\Delta V=10^{-12} \\times 10^{-3}=10^{-15} \\mathrm{C}=1 \\mathrm{fC}$. Now, consider the case where the initially discharged capacitor is in the feedback path of the amplifier, as shown in Fig. 6.18b. As we raise the left plate from 0 V to 1 mV, the amplifier lowers the right plate from 0 V to -99 mV, causing a total change of $100 \\mathrm{mV}$ across the capacitor. The charge transfer now becomes $\\Delta Q=C \\Delta V=10^{-2} \\times\\left(100 \\times 10^{-3}\\right)=100 \\mathrm{fC}$. Despite the physical capacitance in Fig. $6.18b$ remaining 1 pF, the charge transfer is 100 times that of Fig. $6.18a$. Yet, the applied voltage is still 1 mV. By rearranging the terms as $\\Delta Q=\\left(10^{-12} \\times 100\\right) \\times 10^{-3}=(100 \\mathrm{pF})(1 \\mathrm{mV})=100 \\mathrm{fC}$, we can assert that it behaves as if the input source were driving an effective capacitance 100 times larger, or $C_{M}=100 \\mathrm{pF}$!\n\n**FIGURE 6.18** Quantitative depiction of the Miller effect."
},
{
    "text": "In the absence of $C_{f}$, the circuit shown in Fig. 6.16 yields $V_{o}=-g_{m} R_{2} V_{1}$, suggesting that the segment from $V_{1}$ to $V_{o}$ can be represented by an inverting amplifier as depicted in Fig. 6.17. When $C_{f}$ is included, some loading occurs at the amplifier's output; however, subsequent examples will demonstrate that this loading is insignificant across the frequency range of interest. \n\nThe circuit exemplifies the Miller effect with feedback capacitance $C_{f}$. The operational amplifier has a gain of $-g_{m} R_{2}$, and the equivalent capacitance $C_{M}$ is computed as $C_{f}(1 + g_{m} R_{2})$. \n\nIn Fig. 6.17, the circuit illustrates the Miller effect with feedback capacitance $C_{f}$, influencing the equivalent impedance $Z_{eq}$ observed by the source $V_{1}$. The operational amplifier is modeled with a gain of $-g_{m} R_{2}$. \n\n**FIGURE 6.17** Illustrating the Miller effect.\n\nWe now aim to determine the equivalent impedance $Z_{eq}$ seen from the right by the $V_{1}$ source in Fig. 6.17. According to Ohm's law, the current supplied by $V_{1}$ is:\n\n$$\n\\begin{equation*}\nI_{f}=\\frac{V_{1}-V_{o}}{1 /\\left(s C_{f}\\right)} \\cong s C_{f}\\left[V_{1}-\\left(-g_{m} R_{2} V_{1}\\right)\\right]=s C_{f}\\left(1+g_{m} R_{2}\\right) V_{1}=s C_{M} V_{1} \\tag{6.29}\n\\end{equation*}\n$$\n\nWhere:\n\n$$\n\\begin{equation*}\nC_{M}=C_{f}\\left(1+g_{m} R_{2}\\right) \\tag{6.30}\n\\end{equation*}\n$$\n\nBy setting $Z_{eq}=V_{1} / I_{f}=1 /\\left(s C_{M}\\right)$, we deduce that the combination of the amplifier and its feedback capacitance appears to the $V_{1}$ source as a simple equivalent capacitance $C_{M}$ to ground. This capacitance is $\\left(1+g_{m} R_{2}\\right)$ times $C_{f}$. This fascinating phenomenon, termed the Miller effect after John M. Miller who first described it in 1920, involves the term $\\left(1+g_{m} R_{2}\\right)$ as the Miller multiplier and $C_{M}$ as the Miller capacitance. Generally, $C_{M} \\gg C_{f}$.\n\nTo deepen our understanding of the Miller effect, let's examine the process of altering the voltage across a $1-\\mathrm{pF}$ capacitor from 0 V to 1 mV, first with the capacitor grounded, then with it in the feedback path of an amplifier with a gain of $-99 \\mathrm{~V} / \\mathrm{V}$. We will compare the two scenarios and provide insights.\n\n#### Solution\n\nReferring to Fig. $6.18a$, we observe that applying $\\Delta V=1 \\mathrm{mV}$ results in a charge transfer of $\\Delta Q=C \\Delta V=10^{-12} \\times 10^{-3}=10^{-15} \\mathrm{C}=1 \\mathrm{fC}$. Now, consider the case where the initially discharged capacitor is in the feedback path of the amplifier, as shown in Fig. 6.18b. As we increase the left plate from 0 V to 1 mV, the amplifier decreases the right plate from 0 V to -99 mV, causing a total voltage change of $100 \\mathrm{mV}$ across the capacitor. The charge transfer now becomes $\\Delta Q=C \\Delta V=10^{-12} \\times 100 \\times 10^{-3}=100 \\mathrm{fC}$. Despite the physical capacitance in Fig. $6.18b$ remaining 1 pF, the charge transfer is 100 times that of Fig. $6.18a$, with the applied voltage still at 1 mV. If we rearrange the terms as $\\Delta Q=\\left(10^{-12} \\times 100\\right) \\times 10^{-3}=(100 \\mathrm{pF})(1 \\mathrm{mV})=100 \\mathrm{fC}$, it appears as though the input source is driving an effective capacitance 100 times larger, or $C_{M}=100 \\mathrm{pF}$!\n\n**FIGURE 6.18** Quantitative illustration of the Miller effect."
},
{
    "text": "When $C_{f}$ is absent, the circuit shown in Fig. 6.16 yields $V_{o}=-g_{m} R_{2} V_{1}$, suggesting that the segment from $V_{1}$ to $V_{o}$ can be represented by an inverting amplifier as depicted in Fig. 6.17. With $C_{f}$ present, there will be some loading at the amplifier's output; however, subsequent examples will demonstrate that this loading is insignificant within the frequency range of interest. \n\nimage_name: Figure 6.17\ndescription:\n[\nname: V1, type: VoltageSource, ports: {Np: V1, Nn: GND}\nname: Cf, type: Capacitor, value: Cf, ports: {Np: V1, Nn: Vo}\nname: -gmR2, type: OpAmp, value: -gmR2, ports: {InP: Vo, InN: GND, Out: Vo}\n]\nextrainfo: The circuit exemplifies the Miller effect with feedback capacitance Cf. The op-amp has a gain of -gmR2, and the equivalent capacitance CM is determined as Cf(1 + gmR2).\nimage_name: Figure 6.17\ndescription:\n[\nname: V1, type: VoltageSource, value: V1, ports: {Np: V1, Nn: GND}\nname: Cm, type: Capacitor, value: Cm, ports: {Np: V1, Nn: GND}\n]\nextrainfo: The circuit depicts the Miller effect with feedback capacitance Cf, influencing the equivalent impedance Zeq observed by the source V1. The op-amp is modeled with a gain of -gmR2.\n\nFIGURE 6.17 Demonstrating the Miller effect.\n\nWe now aim to determine the equivalent impedance $Z_{e q}$ seen by the $V_{1}$ source in Fig. 6.17 looking to the right. According to Ohm's law, the current provided by $V_{1}$ is\n\n$$\n\\begin{equation*}\nI_{f}=\\frac{V_{1}-V_{o}}{1 /\\left(s C_{f}\\right)} \\approx s C_{f}\\left[V_{1}-\\left(-g_{m} R_{2} V_{1}\\right)\\right]=s C_{f}\\left(1+g_{m} R_{2}\\right) V_{1}=s C_{M} V_{1} \\tag{6.29}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\nC_{M}=C_{f}\\left(1+g_{m} R_{2}\\right) \\tag{6.30}\n\\end{equation*}\n$$\n\nBy setting $Z_{e q}=V_{1} / I_{f}=1 /\\left(s C_{M}\\right)$, we deduce that the combination of the amplifier and its feedback capacitance appears to the $V_{1}$ source as a simple equivalent capacitance $C_{M}$ to ground. This capacitance is $\\left(1+g_{m} R_{2}\\right)$ times larger than $C_{f}$. This fascinating phenomenon, termed the Miller effect after John M. Miller who first described it in 1920, involves the term $\\left(1+g_{m} R_{2}\\right)$ known as the Miller multiplier, and $C_{M}$ as the Miller capacitance. Generally, $C_{M} \\gg C_{f}$.\n\nTo deepen our understanding of the Miller effect, let's examine the process of altering the voltage across a $1-\\mathrm{pF}$ capacitor from 0 V to 1 mV, first when the capacitor is grounded, and then when it is placed in the feedback path of an amplifier with a gain of $-99 \\mathrm{~V} / \\mathrm{V}$. We will compare the two scenarios and provide insights.\n\n#### Solution\n\nReferring to Fig. $6.18 a$, we observe that applying $\\Delta V=1 \\mathrm{mV}$ results in a charge transfer of $\\Delta Q=C \\Delta V=10^{-12} \\times 10^{-3}=10^{-15} \\mathrm{C}=1 \\mathrm{fC}$. Now, consider the scenario where the initially discharged capacitor is in the feedback path of the amplifier as shown in Fig. 6.18b. As we increase the left plate from 0 V to 1 mV, the amplifier will decrease the right plate from 0 V to -99 mV, causing a total voltage change across the capacitor of $100 \\mathrm{mV}$. The charge transfer now becomes $\\Delta Q=C \\Delta V=10^{-12} \\times 100 \\times 10^{-3}=100 \\mathrm{fC}$. Despite the physical capacitance in Fig. $6.18 b$ remaining 1 pF, the charge transfer is 100 times that of Fig. $6.18 a$. Yet, the applied voltage remains 1 mV. Rearranging the terms as $\\Delta Q=\\left(10^{-12} \\times 100\\right) \\times 10^{-3}=(100 \\mathrm{pF})(1 \\mathrm{mV})=100 \\mathrm{fC}$, we can assert that it behaves as if the input source were driving an imaginary capacitance 100 times larger, or $C_{M}=100 \\mathrm{pF}$!\n\nimage_name: (a)\ndescription:\n[\nname: V1, type: VoltageSource, value: 0-to-1 mV, ports: {Np: Vin1, Nn: GND}\nname: C1, type: Capacitor, value: 1 pF, ports: {Np: Vin1, Nn: GND}\n]\nextrainfo: The circuit illustrates the Miller effect, showing how the apparent capacitance increases due to feedback in an amplifier configuration. The effective capacitance rises from 1 pF to 100 pF.\nimage_name: (b)\ndescription:\n[\nname: Voltage Source 1, type: VoltageSource, value: 0-to-1 mV, ports: {Np: Vin1, Nn: GND}\nname: C1, type: Capacitor, value: 1 pF, ports: {Np: Vin1, Nn: Out}\nname: OpAmp 1, type: OpAmp, value: -99, ports: {InP: GND, InN: Vin1, Out: Out}\n]\nextrainfo: The circuit illustrates the Miller effect, where the effective capacitance increases due to the feedback in the op-amp configuration. The original 1 pF capacitance appears as 100 pF due to the op-amp's amplification factor.\nimage_name: Figure 6.18\ndescription:\n[\nname: V1, type: VoltageSource, value: 0-to-1 mV, ports: {Np: Vin1, Nn: GND}\nname: C1, type: Capacitor, value: 100 pF, ports: {Np: Vin1, Nn: GND}\n]\nextrainfo: This diagram illustrates the Miller effect by showing how the effective capacitance increases due to feedback in the circuit with an operational amplifier. The initial circuit has a 1 pF capacitor, and the presence of the op-amp boosts the effective capacitance to 100 pF with a 100 fC charge transfer.\n\nFIGURE 6.18 Quantitative demonstration of the Miller effect."
},
{
    "text": "When $C_{f}$ is absent, the circuit in Fig. 6.16 yields $V_{o}=-g_{m} R_{2} V_{1}$, suggesting that the segment from $V_{1}$ to $V_{o}$ can be represented by an inverting amplifier as depicted in Fig. 6.17. With $C_{f}$ present, there will be some loading at the amplifier's output; however, subsequent examples will show that this loading is insignificant across the frequency range of interest. \n\nThe circuit demonstrates the Miller effect with feedback capacitance $C_{f}$. The op-amp has a gain of $-g_{m} R_{2}$, and the equivalent capacitance $C_{M}$ is calculated as $C_{f}(1 + g_{m} R_{2})$. \n\nIn Fig. 6.17, the circuit illustrates the Miller effect with feedback capacitance $C_{f}$, which impacts the equivalent impedance $Z_{eq}$ seen by the source $V_{1}$. The op-amp is modeled with a gain of $-g_{m} R_{2}$.\n\nFIGURE 6.17 Illustrating the Miller effect.\n\nWe now aim to determine the equivalent impedance $Z_{eq}$ observed by the $V_{1}$ source in Fig. 6.17. According to Ohm's law, the current supplied by $V_{1}$ is:\n\n$$\n\\begin{equation*}\nI_{f}=\\frac{V_{1}-V_{o}}{1 /\\left(s C_{f}\\right)} \\approx s C_{f}\\left[V_{1}-\\left(-g_{m} R_{2} V_{1}\\right)\\right]=s C_{f}\\left(1+g_{m} R_{2}\\right) V_{1}=s C_{M} V_{1} \\tag{6.29}\n\\end{equation*}\n$$\n\nWhere\n\n$$\n\\begin{equation*}\nC_{M}=C_{f}\\left(1+g_{m} R_{2}\\right) \\tag{6.30}\n\\end{equation*}\n$$\n\nBy setting $Z_{eq}=V_{1} / I_{f}=1 /\\left(s C_{M}\\right)$, we deduce that the combination of the amplifier and its feedback capacitance appears to the $V_{1}$ source as a simple equivalent capacitance $C_{M}$ to ground. This capacitance is $\\left(1+g_{m} R_{2}\\right)$ times larger than $C_{f}$. This fascinating phenomenon, known as the Miller effect, was first described by John M. Miller in 1920. The term $\\left(1+g_{m} R_{2}\\right)$ is termed the Miller multiplier, and $C_{M}$ is the Miller capacitance. Generally, $C_{M} \\gg C_{f}$.\n\nTo comprehend the Miller effect more deeply, let's examine the process of altering the voltage across a $1-\\mathrm{pF}$ capacitor from 0 V to 1 mV, first when the capacitor is grounded, and then when it is placed in the feedback path of an amplifier with a gain of $-99 \\mathrm{~V} / \\mathrm{V}$. Let's compare and comment on these two scenarios.\n\n#### Solution\n\nReferring to Fig. $6.18a$, we observe that applying $\\Delta V=1 \\mathrm{mV}$ results in a charge transfer of $\\Delta Q=C \\Delta V=10^{-12} \\times 10^{-3}=10^{-15} \\mathrm{C}=1 \\mathrm{fC}$. Now, consider the case where the initially discharged capacitor is in the feedback path of the amplifier, as shown in Fig. 6.18b. As we increase the left plate from 0 V to 1 mV, the amplifier will decrease the right plate from 0 V to -99 mV, causing a total change of $100 \\mathrm{mV}$ across the capacitor. The charge transfer now becomes $\\Delta Q=C \\Delta V=10^{-12} \\times 100 \\times 10^{-3}=100 \\mathrm{fC}$. Despite the physical capacitance in Fig. $6.18b$ remaining 1 pF, the charge transfer is 100 times that of Fig. $6.18a$. Yet, the applied voltage is still 1 mV. If we rearrange the terms as $\\Delta Q=\\left(10^{-12} \\times 100\\right) \\times 10^{-3}=(100 \\mathrm{pF})(1 \\mathrm{mV})=100 \\mathrm{fC}$, it appears as though the input source is driving an imaginary capacitance 100 times larger, or $C_{M}=100 \\mathrm{pF}$!\n\nThe circuit in Fig. $6.18a$ illustrates the Miller effect, showing how the apparent capacitance increases due to feedback in an amplifier configuration. The effective capacitance rises from 1 pF to 100 pF.\n\nIn Fig. $6.18b$, the circuit demonstrates the Miller effect, where the effective capacitance increases due to the feedback in the op-amp configuration. The original 1 pF capacitance appears as 100 pF due to the amplification factor of the op-amp.\n\nFIGURE 6.18 Quantitative illustration of the Miller effect."
},
{
    "text": "In the absence of $C_{f}$, the circuit depicted in Fig. 6.16 yields $V_{o}=-g_{m} R_{2} V_{1}$, suggesting that the segment from $V_{1}$ to $V_{o}$ can be represented by an inverting amplifier as shown in Fig. 6.17. When $C_{f}$ is included, there will be some loading at the amplifier's output; however, subsequent examples will demonstrate that this loading is insignificant within the relevant frequency range.\n\n**Figure 6.17 Description:**\n- **Components:**\n  - **V1:** VoltageSource, connected between V1 and GND.\n  - **Cf:** Capacitor with value Cf, connected between V1 and Vo.\n  - **-gmR2:** OpAmp with gain -gmR2, inputs connected to Vo and GND, output to Vo.\n- **Extra Info:** The circuit exemplifies the Miller effect with feedback capacitance Cf. The op-amp has a gain of -gmR2, and the equivalent capacitance CM is computed as Cf(1 + gmR2).\n\n**Figure 6.17 Description (Alternative):**\n- **Components:**\n  - **V1:** VoltageSource with value V1, connected between V1 and GND.\n  - **Cm:** Capacitor with value Cm, connected between V1 and GND.\n- **Extra Info:** This circuit illustrates the Miller effect with feedback capacitance Cf, influencing the equivalent impedance Zeq perceived by the source V1. The op-amp is modeled with a gain of -gmR2.\n\n**FIGURE 6.17** Illustrating the Miller effect.\n\nOur objective is to determine the equivalent impedance $Z_{e q}$ observed by the $V_{1}$ source in Fig. 6.17. According to Ohm's law, the current $I_{f}$ supplied by $V_{1}$ is:\n\n$$\n\\begin{equation*}\nI_{f}=\\frac{V_{1}-V_{o}}{1 /\\left(s C_{f}\\right)} \\approx s C_{f}\\left[V_{1}-\\left(-g_{m} R_{2} V_{1}\\right)\\right]=s C_{f}\\left(1+g_{m} R_{2}\\right) V_{1}=s C_{M} V_{1} \\tag{6.29}\n\\end{equation*}\n$$\n\nWhere:\n\n$$\n\\begin{equation*}\nC_{M}=C_{f}\\left(1+g_{m} R_{2}\\right) \\tag{6.30}\n\\end{equation*}\n$$\n\nBy defining $Z_{e q}=V_{1} / I_{f}=1 /\\left(s C_{M}\\right)$, we deduce that the combination of the amplifier and its feedback capacitance appears to the $V_{1}$ source as an equivalent capacitance $C_{M}$ to ground. This capacitance is $\\left(1+g_{m} R_{2}\\right)$ times $C_{f}$. This phenomenon, known as the Miller effect, was first described by John M. Miller in 1920. The term $\\left(1+g_{m} R_{2}\\right)$ is termed the Miller multiplier, and $C_{M}$ is the Miller capacitance. Typically, $C_{M} \\gg C_{f}$.\n\nTo deepen our understanding of the Miller effect, let's examine the process of altering the voltage across a $1-\\mathrm{pF}$ capacitor from 0 V to 1 mV, first with the capacitor grounded, and then with it in the feedback path of an amplifier with a gain of $-99 \\mathrm{~V} / \\mathrm{V}$. We will compare the two scenarios and provide insights.\n\n#### Solution\n\nReferring to Fig. $6.18 a$, applying $\\Delta V=1 \\mathrm{mV}$ results in a charge transfer of $\\Delta Q=C \\Delta V=10^{-12} \\times 10^{-3}=10^{-15} \\mathrm{C}=1 \\mathrm{fC}$. Now, consider the scenario where the initially discharged capacitor is in the feedback path of the amplifier as in Fig. 6.18b. As the left plate voltage increases from 0 V to 1 mV, the amplifier drives the right plate from 0 V to -99 mV, causing a total voltage change of $100 \\mathrm{mV}$ across the capacitor. The charge transfer now is $\\Delta Q=C \\Delta V=10^{-12} \\times 100 \\times 10^{-3}=100 \\mathrm{fC}$. Despite the physical capacitance in Fig. $6.18 b$ remaining 1 pF, the charge transfer is 100 times that of Fig. $6.18 a$, even though the applied voltage is still 1 mV. Rearranging the terms as $\\Delta Q=\\left(10^{-12} \\times 100\\right) \\times 10^{-3}=(100 \\mathrm{pF})(1 \\mathrm{mV})=100 \\mathrm{fC}$, it appears as if the input source is driving an effective capacitance 100 times larger, or $C_{M}=100 \\mathrm{pF}$!\n\n**Figure (a) Description:**\n- **Components:**\n  - **V1:** VoltageSource with a range of 0-to-1 mV, connected between Vin1 and GND.\n  - **C1:** Capacitor with value 1 pF, connected between Vin1 and GND.\n- **Extra Info:** The circuit demonstrates the Miller effect, showing how the apparent capacitance increases due to feedback in an amplifier setup. The effective capacitance rises from 1 pF to 100 pF.\n\n**Figure (b) Description:**\n- **Components:**\n  - **Voltage Source 1:** VoltageSource with a range of 0-to-1 mV, connected between Vin1 and GND.\n  - **C1:** Capacitor with value 1 pF, connected between Vin1 and Out.\n  - **OpAmp 1:** OpAmp with a gain of -99, inputs connected to GND and Vin1, output to Out.\n- **Extra Info:** The circuit illustrates the Miller effect, where the effective capacitance increases due to feedback in the op-amp configuration. The original 1 pF capacitance appears as 100 pF due to the op-amp's amplification factor.\n\n**Figure 6.18 Description:**\n- **Components:**\n  - **V1:** VoltageSource with a range of 0-to-1 mV, connected between Vin1 and GND.\n  - **C1:** Capacitor with value 100 pF, connected between Vin1 and GND.\n- **Extra Info:** This diagram demonstrates the Miller effect by showing how the effective capacitance increases due to feedback in a circuit with an operational amplifier. The initial circuit has a 1 pF capacitor, and the presence of the op-amp boosts the effective capacitance to 100 pF with a 100 fC charge transfer.\n\n**FIGURE 6.18** Quantitative illustration of the Miller effect."
},
{
    "text": "Without $C_{f}$, the circuit in Fig. 6.16 yields $V_{o}=-g_{m} R_{2} V_{1}$, suggesting that the segment from $V_{1}$ to $V_{o}$ can be represented by an inverting amplifier as depicted in Fig. 6.17. When $C_{f}$ is included, there will be some loading at the amplifier's output; however, subsequent examples will show that this loading is insignificant across the frequency range of interest. \n\nimage_name:Figure 6.17\ndescription:\n[\nname: V1, type: VoltageSource, ports: {Np: V1, Nn: GND}\nname: Cf, type: Capacitor, value: Cf, ports: {Np: V1, Nn: Vo}\nname: -gmR2, type: OpAmp, value: -gmR2, ports: {InP: Vo, InN: GND, Out: Vo}\n]\nextrainfo:The circuit exemplifies the Miller effect with feedback capacitance Cf. The op-amp has a gain of -gmR2, and the equivalent capacitance CM is determined as Cf(1 + gmR2).\nimage_name:Figure 6.17\ndescription:\n[\nname: V1, type: VoltageSource, value: V1, ports: {Np: V1, Nn: GND}\nname: Cm, type: Capacitor, value: Cm, ports: {Np: V1, Nn: GND}\n]\nextrainfo:The circuit depicts the Miller effect with feedback capacitance Cf, influencing the equivalent impedance Zeq observed by the source V1. The op-amp is modeled with a gain of -gmR2.\n\nFIGURE 6.17 Demonstrating the Miller effect.\n\nOur goal now is to determine the equivalent impedance $Z_{e q}$ seen from the right by the $V_{1}$ source in Fig. 6.17. According to Ohm's law, the current provided by $V_{1}$ is\n\n$$\n\\begin{equation*}\nI_{f}=\\frac{V_{1}-V_{o}}{1 /\\left(s C_{f}\\right)} \\approx s C_{f}\\left[V_{1}-\\left(-g_{m} R_{2} V_{1}\\right)\\right]=s C_{f}\\left(1+g_{m} R_{2}\\right) V_{1}=s C_{M} V_{1} \\tag{6.29}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\nC_{M}=C_{f}\\left(1+g_{m} R_{2}\\right) \\tag{6.30}\n\\end{equation*}\n$$\n\nBy setting $Z_{e q}=V_{1} / I_{f}=1 /\\left(s C_{M}\\right)$, we deduce that the combination of the amplifier and its feedback capacitance appears to the $V_{1}$ source as a simple equivalent capacitance $C_{M}$ to ground. This capacitance is $\\left(1+g_{m} R_{2}\\right)$ times larger than $C_{f}$. This fascinating phenomenon, known as the Miller effect after John M. Miller who first described it in 1920, involves the term $\\left(1+g_{m} R_{2}\\right)$ referred to as the Miller multiplier, and $C_{M}$ as the Miller capacitance. Generally, $C_{M} \\gg C_{f}$.\n\nTo deepen our understanding of the Miller effect, let's examine the process of altering the voltage across a $1-\\mathrm{pF}$ capacitor from 0 V to 1 mV, first when the capacitor is grounded, and then when it is placed in the feedback path of an amplifier with a gain of $-99 \\mathrm{~V} / \\mathrm{V}$. We will compare the two scenarios and provide insights.\n\n#### Solution\n\nReferring to Fig. $6.18 a$, we observe that applying $\\Delta V=1 \\mathrm{mV}$ results in a charge transfer of $\\Delta Q=C \\Delta V=10^{-12} \\times 10^{-3}=10^{-15} \\mathrm{C}=1 \\mathrm{fC}$. Now, consider the scenario where the initially discharged capacitor is in the feedback path of the amplifier as shown in Fig. 6.18b. As we increase the left plate from 0 V to 1 mV, the amplifier decreases the right plate from 0 V to -99 mV, causing a total voltage change across the capacitor of $100 \\mathrm{mV}$. The charge transfer now becomes $\\Delta Q=C \\Delta V=10^{-12} \\times 100 \\times 10^{-3}=100 \\mathrm{fC}$. Despite the physical capacitance in Fig. $6.18 b$ remaining 1 pF, the charge transfer is 100 times that of Fig. $6.18a$. Yet, the applied voltage remains 1 mV. If we rearrange the terms as $\\Delta Q=\\left(10^{-12} \\times 100\\right) \\times 10^{-3}=(100 \\mathrm{pF})(1 \\mathrm{mV})=100 \\mathrm{fC}$, it appears as though the input source is driving an imaginary capacitance 100 times larger, or $C_{M}=100 \\mathrm{pF}$!\n\nimage_name:(a)\ndescription:\n[\nname: V1, type: VoltageSource, value: 0-to-1 mV, ports: {Np: Vin1, Nn: GND}\nname: C1, type: Capacitor, value: 1 pF, ports: {Np: Vin1, Nn: GND}\n]\nextrainfo:The circuit illustrates the Miller effect, showing how the apparent capacitance increases due to feedback in an amplifier setup. The effective capacitance rises from 1 pF to 100 pF.\nimage_name:(b)\ndescription:\n[\nname: Voltage Source 1, type: VoltageSource, value: 0-to-1 mV, ports: {Np: Vin1, Nn: GND}\nname: C1, type: Capacitor, value: 1 pF, ports: {Np: Vin1, Nn: Out}\nname: OpAmp 1, type: OpAmp, value: -99, ports: {InP: GND, InN: Vin1, Out: Out}\n]\nextrainfo:The circuit illustrates the Miller effect, where the effective capacitance increases due to feedback in the op-amp configuration. The original 1 pF capacitance appears as 100 pF because of the op-amp's amplification factor.\nimage_name:Figure 6.18\ndescription:\n[\nname: V1, type: VoltageSource, value: 0-to-1 mV, ports: {Np: Vin1, Nn: GND}\nname: C1, type: Capacitor, value: 100 pF, ports: {Np: Vin1, Nn: GND}\n]\nextrainfo:This diagram illustrates the Miller effect by showing how the effective capacitance increases due to feedback in the circuit with an operational amplifier. The initial circuit has a 1 pF capacitor, and the presence of the op-amp boosts the effective capacitance to 100 pF with a 100 fC charge transfer.\n\nFIGURE 6.18 Quantitative example of the Miller effect."
},
{
    "text": "In the absence of $C_{f}$, the circuit depicted in Fig. 6.16 yields $V_{o}=-g_{m} R_{2} V_{1}$, suggesting that the segment from $V_{1}$ to $V_{o}$ can be represented by an inverting amplifier as shown in Fig. 6.17. When $C_{f}$ is included, some loading occurs at the amplifier's output; however, subsequent examples will demonstrate that this loading is insignificant across the frequency range of interest. \n\nThe circuit exemplifies the Miller effect with feedback capacitance $C_{f}$. The operational amplifier has a gain of $-g_{m} R_{2}$, and the equivalent capacitance $C_{M}$ is computed as $C_{f}(1 + g_{m} R_{2})$. \n\nIn Fig. 6.17, the circuit illustrates the Miller effect with feedback capacitance $C_{f}$, influencing the equivalent impedance $Z_{eq}$ observed by the source $V_{1}$. The operational amplifier is modeled with a gain of $-g_{m} R_{2}$.\n\n**FIGURE 6.17** Illustrating the Miller effect.\n\nOur objective is to determine the equivalent impedance $Z_{eq}$ seen from the right by the $V_{1}$ source in Fig. 6.17. According to Ohm's law, the current supplied by $V_{1}$ is:\n\n$$\n\\begin{equation*}\nI_{f}=\\frac{V_{1}-V_{o}}{1 /\\left(s C_{f}\\right)} \\cong s C_{f}\\left[V_{1}-\\left(-g_{m} R_{2} V_{1}\\right)\\right]=s C_{f}\\left(1+g_{m} R_{2}\\right) V_{1}=s C_{M} V_{1} \\tag{6.29}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\nC_{M}=C_{f}\\left(1+g_{m} R_{2}\\right) \\tag{6.30}\n\\end{equation*}\n$$\n\nBy setting $Z_{eq}=V_{1} / I_{f}=1 /\\left(s C_{M}\\right)$, we deduce that the combination of the amplifier and its feedback capacitance appears to the $V_{1}$ source as a simple equivalent capacitance $C_{M}$ to ground. This capacitance is $\\left(1+g_{m} R_{2}\\right)$ times $C_{f}$. This phenomenon, known as the Miller effect after John M. Miller who first described it in 1920, involves the term $\\left(1+g_{m} R_{2}\\right)$ termed the Miller multiplier, and $C_{M}$ is the Miller capacitance. Generally, $C_{M} \\gg C_{f}$.\n\nTo deepen our understanding of the Miller effect, let's examine the process of altering the voltage across a $1-\\mathrm{pF}$ capacitor from 0 V to 1 mV, first with the capacitor grounded, then with it in the feedback path of an amplifier with a gain of $-99 \\mathrm{~V} / \\mathrm{V}$. We will compare the two scenarios and provide insights.\n\n#### Solution\n\nReferring to Fig. $6.18a$, we observe that applying $\\Delta V=1 \\mathrm{mV}$ results in a charge transfer of $\\Delta Q=C \\Delta V=10^{-12} \\times 10^{-3}=10^{-15} \\mathrm{C}=1 \\mathrm{fC}$. Now, consider the case where the initially discharged capacitor is in the feedback path of the amplifier as depicted in Fig. 6.18b. As we increase the left plate from 0 V to 1 mV, the amplifier decreases the right plate from 0 V to -99 mV, causing a total voltage change across the capacitor of $100 \\mathrm{mV}$. The charge transfer now becomes $\\Delta Q=C \\Delta V=10^{-2} \\times\\left(100 \\times 10^{-3}\\right)=100 \\mathrm{fC}$. Despite the physical capacitance in Fig. $6.18b$ remaining 1 pF, the charge transfer is 100 times that of Fig. $6.18a$. Yet, the applied voltage remains 1 mV. If we rearrange the terms as $\\Delta Q=\\left(10^{-12} \\times 100\\right) \\times 10^{-3}=(100 \\mathrm{pF})(1 \\mathrm{mV})=100 \\mathrm{fC}$, it appears as though the input source is driving an effective capacitance 100 times larger, or $C_{M}=100 \\mathrm{pF}$!\n\n**FIGURE 6.18** Quantitative illustration of the Miller effect."
},
{
    "text": "Without $C_{f}$, the circuit in Fig. 6.16 yields $V_{o}=-g_{m} R_{2} V_{1}$, suggesting that the segment from $V_{1}$ to $V_{o}$ can be modeled as an inverting amplifier, as depicted in Fig. 6.17. When $C_{f}$ is included, some loading occurs at the amplifier's output; however, subsequent examples will show that this loading is minimal across the relevant frequency range.\n\n**Figure 6.17 Description:**\n- **V1**: VoltageSource, ports: {Np: V1, Nn: GND}\n- **Cf**: Capacitor, value: Cf, ports: {Np: V1, Nn: Vo}\n- **-gmR2**: OpAmp, value: -gmR2, ports: {InP: Vo, InN: GND, Out: Vo}\n**Extra Info:** The circuit exemplifies the Miller effect with feedback capacitance Cf. The op-amp has a gain of -gmR2, and the equivalent capacitance CM is computed as Cf(1 + gmR2).\n\n**Figure 6.17 Description:**\n- **V1**: VoltageSource, value: V1, ports: {Np: V1, Nn: GND}\n- **Cm**: Capacitor, value: Cm, ports: {Np: V1, Nn: GND}\n**Extra Info:** The circuit illustrates the Miller effect with feedback capacitance Cf, influencing the equivalent impedance Zeq perceived by the source V1. The op-amp is modeled with a gain of -gmR2.\n\n**FIGURE 6.17** Illustrating the Miller effect.\n\nWe now aim to determine the equivalent impedance $Z_{e q}$ seen by the $V_{1}$ source in Fig. 6.17. According to Ohm's law, the current supplied by $V_{1}$ is:\n\n$$\n\\begin{equation*}\nI_{f}=\\frac{V_{1}-V_{o}}{1 /\\left(s C_{f}\\right)} \\approx s C_{f}\\left[V_{1}-\\left(-g_{m} R_{2} V_{1}\\right)\\right]=s C_{f}\\left(1+g_{m} R_{2}\\right) V_{1}=s C_{M} V_{1} \\tag{6.29}\n\\end{equation*}\n$$\n\nWhere:\n\n$$\n\\begin{equation*}\nC_{M}=C_{f}\\left(1+g_{m} R_{2}\\right) \\tag{6.30}\n\\end{equation*}\n$$\n\nBy setting $Z_{e q}=V_{1} / I_{f}=1 /\\left(s C_{M}\\right)$, we deduce that the amplifier and its feedback capacitance collectively appear to the $V_{1}$ source as a simple equivalent capacitance $C_{M}$ to ground. This capacitance is $\\left(1+g_{m} R_{2}\\right)$ times $C_{f}$. This fascinating phenomenon, known as the Miller effect, was first described by John M. Miller in 1920. The term $\\left(1+g_{m} R_{2}\\right)$ is termed the Miller multiplier, and $C_{M}$ is the Miller capacitance. Generally, $C_{M} \\gg C_{f}$.\n\nTo deepen our understanding of the Miller effect, let's examine the process of altering the voltage across a $1-\\mathrm{pF}$ capacitor from 0 V to 1 mV. We'll first consider the capacitor grounded, then placed in the feedback path of an amplifier with a gain of $-99 \\mathrm{~V} / \\mathrm{V}$. We will compare the two scenarios and provide insights.\n\n#### Solution\n\nReferring to Fig. $6.18 a$, we observe that applying $\\Delta V=1 \\mathrm{mV}$ results in a charge transfer of $\\Delta Q=C \\Delta V=10^{-12} \\times 10^{-3}=10^{-15} \\mathrm{C}=1 \\mathrm{fC}$. Now, consider the case where the initially discharged capacitor is in the feedback path of the amplifier, as shown in Fig. 6.18b. As we increase the left plate from 0 V to 1 mV, the amplifier decreases the right plate from 0 V to -99 mV, causing a total voltage change of $100 \\mathrm{mV}$ across the capacitor. The charge transfer now becomes $\\Delta Q=C \\Delta V=10^{-12} \\times 100 \\times 10^{-3}=100 \\mathrm{fC}$. Despite the physical capacitance in Fig. $6.18 b$ remaining 1 pF, the charge transfer is 100 times that of Fig. $6.18 a$. Yet, the applied voltage remains 1 mV. Rearranging the terms as $\\Delta Q=\\left(10^{-12} \\times 100\\right) \\times 10^{-3}=(100 \\mathrm{pF})(1 \\mathrm{mV})=100 \\mathrm{fC}$, it appears as though the input source is driving a hypothetical capacitance 100 times larger, or $C_{M}=100 \\mathrm{pF}$!\n\n**Figure (a) Description:**\n- **V1**: VoltageSource, value: 0-to-1 mV, ports: {Np: Vin1, Nn: GND}\n- **C1**: Capacitor, value: 1 pF, ports: {Np: Vin1, Nn: GND}\n**Extra Info:** The circuit demonstrates the Miller effect, showing how the apparent capacitance increases due to feedback in an amplifier setup. The effective capacitance rises from 1 pF to 100 pF.\n\n**Figure (b) Description:**\n- **Voltage Source 1**: VoltageSource, value: 0-to-1 mV, ports: {Np: Vin1, Nn: GND}\n- **C1**: Capacitor, value: 1 pF, ports: {Np: Vin1, Nn: Out}\n- **OpAmp 1**: OpAmp, value: -99, ports: {InP: GND, InN: Vin1, Out: Out}\n**Extra Info:** The circuit illustrates the Miller effect, where the effective capacitance increases due to feedback in the op-amp configuration. The original 1 pF capacitance appears as 100 pF due to the op-amp's amplification factor.\n\n**Figure 6.18 Description:**\n- **V1**: VoltageSource, value: 0-to-1 mV, ports: {Np: Vin1, Nn: GND}\n- **C1**: Capacitor, value: 100 pF, ports: {Np: Vin1, Nn: GND}\n**Extra Info:** This diagram exemplifies the Miller effect by showing how the effective capacitance increases due to feedback in a circuit with an operational amplifier. The initial circuit has a 1 pF capacitor, and the presence of the op-amp boosts the effective capacitance to 100 pF with a 100 fC charge transfer.\n\n**FIGURE 6.18** Quantitative illustration of the Miller effect."
},
{
    "text": "When $C_{f}$ is absent, the circuit in Fig. 6.16 yields $V_{o}=-g_{m} R_{2} V_{1}$, suggesting that the segment from $V_{1}$ to $V_{o}$ can be modeled using an inverting amplifier as depicted in Fig. 6.17. With $C_{f}$ present, there will be some loading at the amplifier's output; however, subsequent examples will show that this loading is insignificant across the frequency range of interest.\n\nimage_name:Figure 6.17\ndescription:\n[\nname: V1, type: VoltageSource, ports: {Np: V1, Nn: GND}\nname: Cf, type: Capacitor, value: Cf, ports: {Np: V1, Nn: Vo}\nname: -gmR2, type: OpAmp, value: -gmR2, ports: {InP: Vo, InN: GND, Out: Vo}\n]\nextrainfo:The circuit showcases the Miller effect with feedback capacitance Cf. The op-amp has a gain of -gmR2, and the equivalent capacitance CM is computed as Cf(1 + gmR2).\nimage_name:Figure 6.17\ndescription:\n[\nname: V1, type: VoltageSource, value: V1, ports: {Np: V1, Nn: GND}\nname: Cm, type: Capacitor, value: Cm, ports: {Np: V1, Nn: GND}\n]\nextrainfo:The circuit exemplifies the Miller effect with feedback capacitance Cf, influencing the equivalent impedance Zeq as seen by the source V1. The op-amp is represented with a gain of -gmR2.\n\nFIGURE 6.17 Demonstrating the Miller effect.\n\nOur goal now is to determine the equivalent impedance $Z_{e q}$ that the $V_{1}$ source in Fig. 6.17 observes to its right. Using Ohm's law, the current provided by $V_{1}$ is\n\n$$\n\\begin{equation*}\nI_{f}=\\frac{V_{1}-V_{o}}{1 /\\left(s C_{f}\\right)} \\approx s C_{f}\\left[V_{1}-\\left(-g_{m} R_{2} V_{1}\\right)\\right]=s C_{f}\\left(1+g_{m} R_{2}\\right) V_{1}=s C_{M} V_{1} \\tag{6.29}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\nC_{M}=C_{f}\\left(1+g_{m} R_{2}\\right) \\tag{6.30}\n\\end{equation*}\n$$\n\nBy setting $Z_{e q}=V_{1} / I_{f}=1 /\\left(s C_{M}\\right)$, we deduce that the combination of the amplifier and its feedback capacitance appears to the $V_{1}$ source as a simple equivalent capacitance $C_{M}$ to ground. This capacitance is $\\left(1+g_{m} R_{2}\\right)$ times larger than $C_{f}$. This fascinating phenomenon, known as the Miller effect, was first described by John M. Miller in 1920. The factor $\\left(1+g_{m} R_{2}\\right)$ is termed the Miller multiplier, and $C_{M}$ is the Miller capacitance. Generally, $C_{M}$ is much greater than $C_{f}$.\n\nTo deepen our understanding of the Miller effect, let's examine the process of altering the voltage across a $1-\\mathrm{pF}$ capacitor from 0 V to 1 mV, first with the capacitor grounded, then with it in the feedback path of an amplifier with a gain of $-99 \\mathrm{~V} / \\mathrm{V}$. Let's compare these scenarios and comment.\n\n#### Solution\n\nReferring to Fig. $6.18 a$, we observe that applying $\\Delta V=1 \\mathrm{mV}$ results in a charge transfer of $\\Delta Q=C \\Delta V=10^{-12} \\times 10^{-3}=10^{-15} \\mathrm{C}=1 \\mathrm{fC}$. Now, consider the case where the initially discharged capacitor is in the feedback path of the amplifier as shown in Fig. 6.18b. As we increase the left plate from 0 V to 1 mV, the amplifier will decrease the right plate from 0 V to -99 mV, causing a total voltage change across the capacitor of $100 \\mathrm{mV}$. The charge transfer now becomes $\\Delta Q=C \\Delta V=10^{-12} \\times 100 \\times 10^{-3}=100 \\mathrm{fC}$. Even though the physical capacitance in Fig. $6.18 b$ remains 1 pF, the charge transfer is 100 times that of Fig. $6.18 a$. Despite the applied voltage being just 1 mV, if we rearrange the terms as $\\Delta Q=\\left(10^{-12} \\times 100\\right) \\times 10^{-3}=(100 \\mathrm{pF})(1 \\mathrm{mV})=100 \\mathrm{fC}$, it appears as if the input source is driving a hypothetical capacitance 100 times larger, or $C_{M}=100 \\mathrm{pF}$!\n\nimage_name:(a)\ndescription:\n[\nname: V1, type: VoltageSource, value: 0-to-1 mV, ports: {Np: Vin1, Nn: GND}\nname: C1, type: Capacitor, value: 1 pF, ports: {Np: Vin1, Nn: GND}\n]\nextrainfo:The circuit illustrates the Miller effect, highlighting how the apparent capacitance increases due to feedback in an amplifier setup. The effective capacitance rises from 1 pF to 100 pF.\nimage_name:(b)\ndescription:\n[\nname: Voltage Source 1, type: VoltageSource, value: 0-to-1 mV, ports: {Np: Vin1, Nn: GND}\nname: C1, type: Capacitor, value: 1 pF, ports: {Np: Vin1, Nn: Out}\nname: OpAmp 1, type: OpAmp, value: -99, ports: {InP: GND, InN: Vin1, Out: Out}\n]\nextrainfo:The circuit illustrates the Miller effect, where the effective capacitance increases due to the feedback in the op-amp configuration. The original 1 pF capacitance appears as 100 pF because of the op-amp's amplification factor.\nimage_name:Figure 6.18\ndescription:\n[\nname: V1, type: VoltageSource, value: 0-to-1 mV, ports: {Np: Vin1, Nn: GND}\nname: C1, type: Capacitor, value: 100 pF, ports: {Np: Vin1, Nn: GND}\n]\nextrainfo:This diagram illustrates the Miller effect by depicting how the effective capacitance increases due to feedback in a circuit with an operational amplifier. The initial circuit has a 1 pF capacitor, and the presence of the op-amp boosts the effective capacitance to 100 pF with a 100 fC charge transfer.\n\nFIGURE 6.18 Quantitative demonstration of the Miller effect."
},
{
    "text": "When $C_{f}$ is absent, the circuit in Fig. 6.16 yields $V_{o}=-g_{m} R_{2} V_{1}$, suggesting that the segment from $V_{1}$ to $V_{o}$ can be modeled by an inverting amplifier as depicted in Fig. 6.17. With $C_{f}$ present, there will be some loading at the amplifier's output; however, subsequent examples will show that this loading is insignificant across the frequency range of interest. \n\nImage Description:\n- **Figure 6.17**: \n  - Components: \n    - **V1**: Voltage source, ports {Np: V1, Nn: GND}\n    - **Cf**: Capacitor, value Cf, ports {Np: V1, Nn: Vo}\n    - **-gmR2**: Op-amp, value -gmR2, ports {InP: Vo, InN: GND, Out: Vo}\n  - Extra Info: The circuit demonstrates the Miller effect with feedback capacitance Cf. The op-amp has a gain of -gmR2, and the equivalent capacitance CM is calculated as Cf(1 + gmR2).\n\n- **Figure 6.17**: \n  - Components: \n    - **V1**: Voltage source, value V1, ports {Np: V1, Nn: GND}\n    - **Cm**: Capacitor, value Cm, ports {Np: V1, Nn: GND}\n  - Extra Info: The circuit illustrates the Miller effect with feedback capacitance Cf, influencing the equivalent impedance Zeq seen by the source V1. The op-amp is modeled with a gain of -gmR2.\n\n**FIGURE 6.17** Illustrating the Miller effect.\n\nWe now aim to determine the equivalent impedance $Z_{e q}$ seen by the $V_{1}$ source in Fig. 6.17. According to Ohm's law, the current supplied by $V_{1}$ is:\n\n$$\n\\begin{equation*}\nI_{f}=\\frac{V_{1}-V_{o}}{1 /\\left(s C_{f}\\right)} \\approx s C_{f}\\left[V_{1}-\\left(-g_{m} R_{2} V_{1}\\right)\\right]=s C_{f}\\left(1+g_{m} R_{2}\\right) V_{1}=s C_{M} V_{1} \\tag{6.29}\n\\end{equation*}\n$$\n\nWhere:\n\n$$\n\\begin{equation*}\nC_{M}=C_{f}\\left(1+g_{m} R_{2}\\right) \\tag{6.30}\n\\end{equation*}\n$$\n\nBy setting $Z_{e q}=V_{1} / I_{f}=1 /\\left(s C_{M}\\right)$, we deduce that the amplifier and its feedback capacitance collectively appear to the $V_{1}$ source as an equivalent capacitance $C_{M}$ to ground. This capacitance is $\\left(1+g_{m} R_{2}\\right)$ times larger than $C_{f}$. This phenomenon, known as the Miller effect, was first described by John M. Miller in 1920. The term $\\left(1+g_{m} R_{2}\\right)$ is termed the Miller multiplier, and $C_{M}$ is the Miller capacitance. Generally, $C_{M} \\gg C_{f}$.\n\nTo deepen our understanding of the Miller effect, let's examine the process of altering the voltage across a $1-\\mathrm{pF}$ capacitor from 0 V to 1 mV, first with the capacitor grounded, and then with it in the feedback path of an amplifier with a gain of $-99 \\mathrm{~V} / \\mathrm{V}$. We will compare the two scenarios and provide insights.\n\n#### Solution\n\nReferring to Fig. $6.18 a$, we observe that applying $\\Delta V=1 \\mathrm{mV}$ results in a charge transfer of $\\Delta Q=C \\Delta V=10^{-12} \\times 10^{-3}=10^{-15} \\mathrm{C}=1 \\mathrm{fC}$. Now, consider the scenario where the initially discharged capacitor is in the feedback path of the amplifier, as shown in Fig. 6.18b. As we increase the left plate from 0 V to 1 mV, the amplifier decreases the right plate from 0 V to -99 mV, causing a total voltage change of $100 \\mathrm{mV}$ across the capacitor. The charge transfer now becomes $\\Delta Q=C \\Delta V=10^{-12} \\times 100 \\times 10^{-3}=100 \\mathrm{fC}$. Despite the physical capacitance in Fig. $6.18 b$ remaining 1 pF, the charge transfer is 100 times that of Fig. $6.18 a$. Yet, the applied voltage remains 1 mV. Rearranging the terms as $\\Delta Q=\\left(10^{-12} \\times 100\\right) \\times 10^{-3}=(100 \\mathrm{pF})(1 \\mathrm{mV})=100 \\mathrm{fC}$, it appears as though the input source is driving an effective capacitance 100 times larger, or $C_{M}=100 \\mathrm{pF}$!\n\nImage Descriptions:\n- **(a)**:\n  - Components:\n    - **V1**: Voltage source, value 0-to-1 mV, ports {Np: Vin1, Nn: GND}\n    - **C1**: Capacitor, value 1 pF, ports {Np: Vin1, Nn: GND}\n  - Extra Info: The circuit illustrates the Miller effect, showing how the apparent capacitance increases due to feedback in an amplifier configuration. The effective capacitance is increased from 1 pF to 100 pF.\n\n- **(b)**:\n  - Components:\n    - **Voltage Source 1**: Voltage source, value 0-to-1 mV, ports {Np: Vin1, Nn: GND}\n    - **C1**: Capacitor, value 1 pF, ports {Np: Vin1, Nn: Out}\n    - **OpAmp 1**: Op-amp, value -99, ports {InP: GND, InN: Vin1, Out: Out}\n  - Extra Info: The circuit illustrates the Miller effect, where the effective capacitance is increased due to the feedback in the op-amp configuration. The original capacitance of 1 pF appears as 100 pF due to the amplification factor of the op-amp.\n\n- **Figure 6.18**:\n  - Components:\n    - **V1**: Voltage source, value 0-to-1 mV, ports {Np: Vin1, Nn: GND}\n    - **C1**: Capacitor, value 100 pF, ports {Np: Vin1, Nn: GND}\n  - Extra Info: This diagram illustrates the Miller effect by showing how the effective capacitance increases due to feedback in the circuit with an operational amplifier. The initial circuit has a 1 pF capacitor, and the presence of the op-amp increases the effective capacitance to 100 pF with a 100 fC charge transfer.\n\n**FIGURE 6.18** Quantitative illustration of the Miller effect."
},
{
    "text": "Without $C_{f}$, the circuit in Fig. 6.16 yields $V_{o}=-g_{m} R_{2} V_{1}$, suggesting that the segment from $V_{1}$ to $V_{o}$ can be modeled as an inverting amplifier, as depicted in Fig. 6.17. When $C_{f}$ is included, there will be some loading at the amplifier's output; however, subsequent examples will show that this loading is insignificant across the frequency range of interest. \n\nThe circuit demonstrates the Miller effect with feedback capacitance $C_{f}$. The op-amp has a gain of $-g_{m} R_{2}$, and the equivalent capacitance $C_{M}$ is computed as $C_{f}(1 + g_{m} R_{2})$.\n\nThe circuit illustrates the Miller effect with feedback capacitance $C_{f}$, which impacts the equivalent impedance $Z_{eq}$ seen by the source $V_{1}$. The op-amp is modeled with a gain of $-g_{m} R_{2}$.\n\nFIGURE 6.17 Illustrating the Miller effect.\n\nWe now aim to determine the equivalent impedance $Z_{eq}$ observed by the $V_{1}$ source in Fig. 6.17. According to Ohm's law, the current supplied by $V_{1}$ is\n\n$$\n\\begin{equation*}\nI_{f}=\\frac{V_{1}-V_{o}}{1 /\\left(s C_{f}\\right)} \\cong s C_{f}\\left[V_{1}-\\left(-g_{m} R_{2} V_{1}\\right)\\right]=s C_{f}\\left(1+g_{m} R_{2}\\right) V_{1}=s C_{M} V_{1} \\tag{6.29}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\nC_{M}=C_{f}\\left(1+g_{m} R_{2}\\right) \\tag{6.30}\n\\end{equation*}\n$$\n\nBy setting $Z_{eq}=V_{1} / I_{f}=1 /\\left(s C_{M}\\right)$, we deduce that the combination of the amplifier and its feedback capacitance appears to the $V_{1}$ source as a simple equivalent capacitance $C_{M}$ to ground. This capacitance is $\\left(1+g_{m} R_{2}\\right)$ times larger than $C_{f}$. This fascinating phenomenon, known as the Miller effect after John M. Miller who first described it in 1920, involves the term $\\left(1+g_{m} R_{2}\\right)$, termed the Miller multiplier, and $C_{M}$, the Miller capacitance. Generally, $C_{M} \\gg C_{f}$.\n\nTo deepen our understanding of the Miller effect, let's examine the process of altering the voltage across a $1-\\mathrm{pF}$ capacitor from 0 V to 1 mV, first with the capacitor grounded, then with it in the feedback path of an amplifier with a gain of $-99 \\mathrm{~V} / \\mathrm{V}$. We will compare the two scenarios and provide insights.\n\n#### Solution\n\nReferring to Fig. $6.18a$, we observe that applying $\\Delta V=1 \\mathrm{mV}$ results in a charge transfer of $\\Delta Q=C \\Delta V=10^{-12} \\times 10^{-3}=10^{-15} \\mathrm{C}=1 \\mathrm{fC}$. Now, consider the scenario where the initially discharged capacitor is in the feedback path of the amplifier, as shown in Fig. 6.18b. As we increase the left plate from 0 V to 1 mV, the amplifier decreases the right plate from 0 V to -99 mV, causing a total voltage change across the capacitor of $100 \\mathrm{mV}$. The charge transfer now becomes $\\Delta Q=C \\Delta V=10^{-12} \\times 100 \\times 10^{-3}=100 \\mathrm{fC}$. Despite the physical capacitance in Fig. $6.18b$ remaining 1 pF, the charge transfer is 100 times that of Fig. $6.18a$, yet the applied voltage is still 1 mV. If we rearrange the terms as $\\Delta Q=\\left(10^{-12} \\times 100\\right) \\times 10^{-3}=(100 \\mathrm{pF})(1 \\mathrm{mV})=100 \\mathrm{fC}$, it appears as though the input source is driving an effective capacitance 100 times larger, or $C_{M}=100 \\mathrm{pF}$!\n\nimage_name:(a)\ndescription:\n[\nname: V1, type: VoltageSource, value: 0-to-1 mV, ports: {Np: Vin1, Nn: GND}\nname: C1, type: Capacitor, value: 1 pF, ports: {Np: Vin1, Nn: GND}\n]\nextrainfo:The circuit illustrates the Miller effect, showing how the apparent capacitance increases due to feedback in an amplifier configuration. The effective capacitance is increased from 1 pF to 100 pF.\n\nimage_name:(b)\ndescription:\n[\nname: Voltage Source 1, type: VoltageSource, value: 0-to-1 mV, ports: {Np: Vin1, Nn: GND}\nname: C1, type: Capacitor, value: 1 pF, ports: {Np: Vin1, Nn: Out}\nname: OpAmp 1, type: OpAmp, value: -99, ports: {InP: GND, InN: Vin1, Out: Out}\n]\nextrainfo:The circuit illustrates the Miller effect, where the effective capacitance is increased due to the feedback in the op-amp configuration. The original capacitance of 1 pF appears as 100 pF due to the amplification factor of the op-amp.\n\nimage_name:Figure 6.18\ndescription:\n[\nname: V1, type: VoltageSource, value: 0-to-1 mV, ports: {Np: Vin1, Nn: GND}\nname: C1, type: Capacitor, value: 100 pF, ports: {Np: Vin1, Nn: GND}\n]\nextrainfo:This diagram illustrates the Miller effect by showing how the effective capacitance increases due to feedback in the circuit with an operational amplifier. The initial circuit has a 1 pF capacitor, and the presence of the op-amp increases the effective capacitance to 100 pF with a 100 fC charge transfer.\n\nFIGURE 6.18 Quantitative illustration of the Miller effect."
},
{
    "text": "When $C_{f}$ is absent, the circuit in Fig. 6.16 yields $V_{o}=-g_{m} R_{2} V_{1}$, suggesting that the segment from $V_{1}$ to $V_{o}$ can be modeled by an inverting amplifier as depicted in Fig. 6.17. With $C_{f}$ present, there will be some loading at the amplifier's output; however, subsequent examples will show that this loading is insignificant across the frequency range of interest. \n\nThe circuit demonstrates the Miller effect with feedback capacitance $C_{f}$. The op-amp has a gain of $-g_{m} R_{2}$, and the equivalent capacitance $C_{M}$ is computed as $C_{f}(1 + g_{m} R_{2})$. \n\nIn Fig. 6.17, the circuit illustrates the Miller effect with feedback capacitance $C_{f}$, which impacts the equivalent impedance $Z_{eq}$ seen by the source $V_{1}$. The op-amp is modeled with a gain of $-g_{m} R_{2}$.\n\nFIGURE 6.17 Illustrating the Miller effect.\n\nWe now aim to determine the equivalent impedance $Z_{eq}$ observed by the $V_{1}$ source in Fig. 6.17. According to Ohm's law, the current supplied by $V_{1}$ is:\n\n$$\n\\begin{equation*}\nI_{f}=\\frac{V_{1}-V_{o}}{1 /\\left(s C_{f}\\right)} \\cong s C_{f}\\left[V_{1}-\\left(-g_{m} R_{2} V_{1}\\right)\\right]=s C_{f}\\left(1+g_{m} R_{2}\\right) V_{1}=s C_{M} V_{1} \\tag{6.29}\n\\end{equation*}\n$$\n\nWhere\n\n$$\n\\begin{equation*}\nC_{M}=C_{f}\\left(1+g_{m} R_{2}\\right) \\tag{6.30}\n\\end{equation*}\n$$\n\nBy setting $Z_{eq}=V_{1} / I_{f}=1 /\\left(s C_{M}\\right)$, we deduce that the amplifier and its feedback capacitance appear to the $V_{1}$ source as a simple equivalent capacitance $C_{M}$ to ground. This capacitance is $\\left(1+g_{m} R_{2}\\right)$ times larger than $C_{f}$. This fascinating phenomenon, known as the Miller effect, was first described by John M. Miller in 1920. The term $\\left(1+g_{m} R_{2}\\right)$ is termed the Miller multiplier, and $C_{M}$ is the Miller capacitance. Generally, $C_{M} \\gg C_{f}$.\n\nTo deepen our understanding of the Miller effect, let's examine the process of altering the voltage across a $1-\\mathrm{pF}$ capacitor from 0 V to 1 mV, first with the capacitor grounded, then with it in the feedback path of an amplifier with a gain of $-99 \\mathrm{~V} / \\mathrm{V}$. Let's compare and comment on these scenarios.\n\n#### Solution\n\nReferring to Fig. $6.18 a$, we observe that applying $\\Delta V=1 \\mathrm{mV}$ results in a charge transfer of $\\Delta Q=C \\Delta V=10^{-12} \\times 10^{-3}=10^{-15} \\mathrm{C}=1 \\mathrm{fC}$. Now, consider the case where the initially discharged capacitor is in the feedback path of the amplifier as shown in Fig. 6.18b. As we raise the left plate from 0 V to 1 mV, the amplifier lowers the right plate from 0 V to -99 mV, causing a total change of $100 \\mathrm{mV}$ across the capacitor. The charge transfer now becomes $\\Delta Q=C \\Delta V=10^{-2} \\times\\left(100 \\times 10^{-3}\\right)=100 \\mathrm{fC}$. Despite the physical capacitance in Fig. $6.18 b$ remaining 1 pF, the charge transfer is 100 times that of Fig. $6.18 a$. Yet, the applied voltage remains 1 mV. If we rearrange the terms as $\\Delta Q=\\left(10^{-12} \\times 100\\right) \\times 10^{-3}=(100 \\mathrm{pF})(1 \\mathrm{mV})=100 \\mathrm{fC}$, it appears as though the input source is driving an effective capacitance 100 times larger, or $C_{M}=100 \\mathrm{pF}$!\n\nThe circuit in Fig. $6.18 a$ illustrates the Miller effect, showing how the apparent capacitance increases due to feedback in an amplifier configuration. The effective capacitance rises from 1 pF to 100 pF.\n\nIn Fig. $6.18 b$, the circuit demonstrates the Miller effect, where the effective capacitance increases due to the feedback in the op-amp configuration. The original 1 pF capacitance appears as 100 pF due to the amplification factor of the op-amp.\n\nFIGURE 6.18 Quantitative illustration of the Miller effect."
},
{
    "text": "The rephrased text:\n\nDue to the Miller effect, the circuit in Fig. 6.16 can be simplified to that in Fig 6.19a. We can combine the two parallel capacitances into a single total capacitance \\( C_{t} \\):\n\n\\[ C_{t} = C_{1} + C_{M} \\]\n\nThen, we can work with the even simpler circuit in Fig. 6.19b. Using the ac voltage divider formula,\n\n\\[ V_{o} = -g_{m} V_{1} R_{2} = -g_{m} R_{2} \\frac{1 / s C_{t}}{R_{1} + 1 / s C_{t}} V_{i} = \\frac{-g_{m} R_{2}}{1 + s R_{1} C_{t}} V_{i} \\]\n\nThe voltage gain of the circuit is\n\n\\[ a(s) = \\frac{V_{o}}{V_{i}} = \\frac{-g_{m} R_{2}}{1 + s R_{1} C_{t}} \\]\n\nThe value of \\( s \\) that makes the denominator zero and causes \\( a(s) \\) to go to infinity is called a pole. This value is\n\n\\[ s = -\\frac{1}{R_{1} C_{t}} \\]\n\nindicating a real and negative pole. Replacing \\( s \\) with \\( j \\omega \\) in Eq. (6.32) gives the frequency response, which we express in the standard form of Eq. (6A.1) in Appendix 6A as\n\n\\[ a(j \\omega) = \\frac{a_{0}}{1 + j \\omega / \\omega_{p}} \\]\n\nwhere\n\n\\[ a_{0} = -g_{m} R_{2} \\]\n\nis the value of \\( a \\) in the limit \\( \\omega \\rightarrow 0 \\), aptly called the low-frequency gain, and\n\n\\[ \\omega_{p} = \\frac{1}{R_{1} C_{t}} \\]\n\nis called the pole frequency."
},
{
    "text": "Due to the Miller effect, the circuit depicted in Fig. 6.16 can be simplified to that of Fig 6.19a. We can merge the two parallel capacitances into a single total capacitance $C_{t}$,\n\n$$\n\\begin{equation*}\nC_{t}=C_{1}+C_{M} \\tag{6.31}\n\\end{equation*}\n$$\n\nand then analyze the circuit in Fig. 6.19b. Employing the ac voltage divider formula,\n\n$$\nV_{o}=-g_{m} V_{1} R_{2}=-g_{m} R_{2} \\frac{1 / s C_{t}}{R_{1}+1 / s C_{t}} V_{i}=\\frac{-g_{m} R_{2}}{1+s R_{1} C_{t}} V_{i}\n$$\n\nthe voltage gain of the circuit is found to be\n\n$$\n\\begin{equation*}\na(s)=\\frac{V_{o}}{V_{i}}=\\frac{-g_{m} R_{2}}{1+s R_{1} C_{t}} \\tag{6.32}\n\\end{equation*}\n$$\n\nThe value of $s$ that makes the denominator zero and causes $a(s)$ to increase without bound is known as a pole. This value is\n\n$$\n\\begin{equation*}\ns=-\\frac{1}{R_{1} C_{t}} \\tag{6.33}\n\\end{equation*}\n$$\n\nindicating a real and negative pole. By substituting $s \\rightarrow j \\omega$ into Eq. (6.32), we obtain the frequency response, which we express in the form of Eq. (6A.1) in Appendix 6A as\n\n$$\n\\begin{equation*}\na(j \\omega)=\\frac{a_{0}}{1+j \\omega / \\omega_{p}} \\tag{6.34}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\na_{0}=-g_{m} R_{2} \\tag{6.35a}\n\\end{equation*}\n$$\n\nis the value of $a$ at $\\omega \\rightarrow 0$, aptly named the low-frequency gain, and\n\n$$\n\\begin{equation*}\n\\omega_{p}=\\frac{1}{R_{1} C_{t}} \\tag{6.35b}\n\\end{equation*}\n$$\n\nis known as the pole frequency.\n\nThe circuit diagram (a) represents a voltage amplifier featuring a voltage-controlled current source, two capacitors, and two resistors. The input voltage source Vi is connected to a resistor R1 and capacitors C1 and CM. The output is taken across the resistor R2, which is connected to the voltage-controlled current source gmV1. Capacitor Ct is connected from V1 to ground.\n\nThe circuit in (b) is a simplified equivalent circuit using the Miller approximation. It consists of a voltage source, a resistor, a capacitor, a voltage-controlled current source, and another resistor. This configuration is utilized to analyze the frequency response and gain of the circuit.\n\nFIGURE 6.19 displays equivalent-circuit simplifications using the Miller approximation.\n\nThe graph in FIGURE 6.20 is a Bode plot depicting the magnitude gain of a circuit as a function of frequency. The plot is presented on a logarithmic scale, with the x-axis representing frequency () in decades and the y-axis representing magnitude |a(j)| in decibels (dB).\n\n- **X-axis:** Frequency () in decades.\n- **Y-axis:** Magnitude |a(j)| in decibels (dB).\n\nThe plot begins with a flat region at low frequencies where the gain remains constant at |a| dB. As the frequency increases, the plot exhibits a break point at a specific frequency, denoted as . Beyond this break point, the gain starts to decrease at a rate of -20 dB/decade, indicating a first-order low-pass filter behavior.\n\n- **Initial Gain:** The initial magnitude gain is denoted as |a|.\n- **Break Point ():** At the frequency , the gain decreases by 3 dB from its initial value, marking the cutoff frequency.\n- **Slope:** Post , the slope of the plot is -20 dB/decade, characteristic of a single-pole roll-off.\n\nThe plot includes a marker at the 3 dB point, which serves as a standard reference for identifying the cutoff frequency. A reference line is drawn to indicate the -20 dB/decade slope, emphasizing the linear decrease in gain on the logarithmic scale.\n\nFIGURE 6.20 illustrates the magnitude gain plot for the circuit of Fig. 6.19b.\n\nThe magnitude Bode plot is depicted in Fig. 6.20 (refer to Bode plots in Appendix 6A). It is instructive to rationalize this plot using physical insight. Referring to Fig. 6.19b, we observe that the frequency response is dictated by the ac voltage divider formed by $C_{t}$ with $R_{1}$, the equivalent resistance seen by $C_{t}$ itself. The impedance presented by $C_{t}$ is $Z_{t}(j \\omega)=1 /\\left(j \\omega C_{t}\\right)$, and depending on how its magnitude $\\left|Z_{t}(j \\omega)\\right|=1 /\\left(\\omega C_{t}\\right)$ compares with $R_{1}$, we have three significant cases:\n\n- At low frequencies, $\\left|Z_{t}(\\omega)\\right| \\gg R_{1}$, implying that $C_{t}$ behaves like an open circuit compared to $R_{1}$. Consequently, $V_{1} \\rightarrow V_{i}$, and thus $|a| \\rightarrow a_{0}$. This scenario is consistent with our previous discussions before embarking upon the present chapter.\n- At high frequencies, $\\left|Z_{t}(\\omega)\\right| \\ll R_{1}$, suggesting that $C_{t}$ now acts like a short circuit compared to $R_{1}$. Consequently, $V_{1} \\rightarrow 0$, and $|a|$ decreases with frequency, as depicted.\n- The transition between the two limiting cases occurs when $\\omega=\\omega_{p}$. Rearranging Eq. (6.35b) as $1 /\\left(\\omega_{p} C_{t}\\right)=R_{1}$, we see that at this frequency we have\n\n$$\n\\begin{equation*}\n\\left|Z_{t}\\left(\\omega_{p}\\right)\\right|=R_{1} \\tag{6.36}\n\\end{equation*}\n$$\n\nThis provides a physical interpretation for $\\omega_{p}$: it represents the frequency at which the capacitance's impedance matches, in magnitude, the equivalent resistance seen by the capacitance itself. In the MOS case of Fig. 6.15, this resistance is simply $R_{s i g}$, but in the bipolar case of Fig. 6.14, it is $r_{\\pi} /\\left(R_{s i g}+r_{b}\\right)$. A circuit designer will always leverage physical insight to verify the results of mathematical derivations and to gain a deeper understanding of the circuit's behavior.\n\n- Due to the frequency-dependent gain reduction, an amplifier effectively acts as a lowpass filter. This is why $\\omega_{p}$ is also known as the corner frequency, cutoff frequency, or break frequency. At $\\omega=\\omega_{p}$, $\\left|V_{1}\\right|$ drops to $1 / \\sqrt{2}(=0.707$, or $-3-\\mathrm{dB})$ of its low-frequency value, so $\\omega_{p}$ is also referred to as the $-3-d B$ frequency. Since the power of an ac signal is proportional to the square of its magnitude, another name for $\\omega_{p}$ is half-power frequency. The gain-bandwidth product is defined as\n\n$$\n\\begin{equation*}\n\\mathrm{GBP}=\\left|a_{0}\\right| \\times f_{p} \\tag{6.37}\n\\end{equation*}\n$$\n\nWe are now prepared to apply our findings to the specific circuits in Figs. 6.14 and 6.15. Considering the common-emitter (CE) case first, we combine Eqs. (6.27) and (6.35) to derive\n\n$$\n\\begin{equation*}\na_{0(\\mathrm{BJT})}=\\left.\\frac{V_{o}}{V_{s i g}}\\right|_{\\omega \\rightarrow 0}=\\frac{r_{\\pi}}{R_{s i g}+r_{b}+r_{\\pi}}\\left[-g_{m}\\left(R_{C} / / r_{o}\\right)\\right] \\tag{6.38a}\n\\end{equation*}\n$$\n\n$$\n\\begin{equation*}\n\\omega_{p(\\mathrm{BJT})}=\\frac{1}{\\left\\{r_{\\pi} / /\\left(R_{s i g}+r_{b}\\right)\\right\\} \\times\\left\\{C_{\\pi}+C_{\\mu}\\left[1+g_{m}\\left(R_{C} / / r_{o}\\right)\\right]\\right\\}} \\tag{6.38b}\n\\end{equation*}\n$$\n\nNext, turning to the common-source (CS) case, we combine Eqs. (6.28) and (6.35) to obtain\n\n$$\n\\begin{gather*}\na_{0(\\mathrm{FET})}=\\left.\\frac{V_{o}}{V_{s i g}}\\right|_{\\omega \\rightarrow 0}=-g_{m}\\left(R_{D} / / r_{o}\\right)  \\tag{6.39a}\\\\\n\\omega_{p(\\mathrm{FET})}=\\frac{1}{R_{s i g}\\left\\{C_{g s}+C_{g d}\\left[1+g_{m}\\left(R_{D} / / r_{o}\\right)\\right]\\right\\}} \\tag{6.39b}\n\\end{gather*}\n$$\n\nTo gain a better understanding, let's examine some practical examples.\n\nEXAMPLE 6.6 Consider the CE amplifier in Fig. 6.14, which utilizes a BJT with $\\beta_{0}=200, V_{A}=50 \\mathrm{~V}, r_{b}=$ $200 \\Omega$, and $C_{\\mu}=0.5 \\mathrm{pF}$. The BJT is biased at $I_{C}=1 \\mathrm{~mA}$, where it exhibits $f_{T}=$ 500 MHz . Additionally, $R_{s i g}=1 \\mathrm{k} \\Omega$ and $R_{C}=5 \\mathrm{k} \\Omega$.\n(a) Estimate the amplifier's low-frequency gain as well as its $-3-\\mathrm{dB}$ frequency. Determine the gain-bandwidth product of this amplifier.\n(b) Confirm that the loading of the output node by the feedback capacitance is negligible within the frequency range of interest $\\left(f \\leq f_{p}\\right)$, thereby validating the Miller approximation.\n\n#### Solution\n\n(a) Following the standard procedure, we find $g_{m}=1 /(26 \\Omega), r_{\\pi}=5.2 \\mathrm{k} \\Omega$, and $r_{o}=50 \\mathrm{k} \\Omega$. Moreover,\n\n$$\n\\begin{aligned}\n& R_{1}=r_{\\pi} / /\\left(R_{s i g}+r_{b}\\right)=5.2 / /(1+0.2)=0.975 \\mathrm{k} \\Omega \\\\\n& R_{2}=R_{C} / / r_{o}=5 / / 50=4.55 \\mathrm{k} \\Omega\n\\end{aligned}\n$$\n\nThe low-frequency gain is\n\n$$\n\\begin{aligned}\na_{0} & =\\frac{r_{\\pi}}{R_{s i g}+r_{b}+r_{\\pi}}\\left(-g_{m} R_{2}\\right)=\\frac{5.2}{1+0.2+5.2}(-4.55 / 0.026) \\\\\n& \\cong 0.81 \\times(-175)=-142 \\mathrm{~V} / \\mathrm{V}\n\\end{aligned}\n$$\n\nUsing Eq. (6.12b), we have\n\n$$\nC_{\\pi}=\\frac{g_{m}}{2 \\pi f_{T}}-C_{\\mu}=\\frac{1 / 26}{2 \\pi \\times 500 \\times 10^{6}}-0.5 \\times 10^{-12} \\cong 12 \\mathrm{pF}\n$$\n\nThe Miller capacitance is\n\n$$\nC_{M}=C_{\\mu}\\left[1+g_{m}\\left(R_{C} / / r_{o}\\right)\\right]=0.5 \\times 10^{-12}[1+175]=88 \\mathrm{pF}\n$$\n\nindicating a Miller multiplier of 176. The total capacitance is thus\n\n$$\nC_{t}=C_{\\pi}+C_{M}=12+88=100 \\mathrm{pF}\n$$\n\nClearly, the Miller capacitance plays a dominant role in this amplifier. Together, $R_{1}$ and $C_{t}$ create a pole frequency at\n\n$$\nf_{p}=\\frac{1}{2 \\pi R_{1} C_{t}}=\\frac{1}{2 \\pi \\times 975 \\times 100 \\times 10^{-12}}=1.63 \\mathrm{MHz}\n$$\n\nThe gain-bandwidth product is\n\n$$\n\\text { GBP }=\\left|a_{0}\\right| \\times f_{p}=142 \\times 1.63 \\cong 230 \\mathrm{MHz}\n$$\n\n(b) According to Eq. (6.29), the current fed forward via $C_{\\mu}$ is maximized at the upper edge of the frequency band of interest, where\n\n$$\nI_{f}\\left(j f_{p}\\right) \\cong j 2 \\pi f_{p} C_{M} V_{\\pi}=j 2 \\pi \\times 1.63 \\times 10^{6} \\times 88 \\times 10^{-12} V_{\\pi}=j V_{\\pi} /(1110 \\Omega)\n$$\n\nOn the other hand, the current drawn by the dependent source is\n\n$$\ng_{m} V_{\\pi}=V_{\\pi} /(26 \\Omega)\n$$\n\nThe ratio of the two currents is thus\n\n$$\n\\frac{\\left|I_{f}\\left(j f_{p}\\right)\\right|}{\\left|g_{m} V_{\\pi}\\right|}=\\frac{26}{1110} \\ll 1\n$$\n\nThis confirms the validity of the approximation $V_{o} \\cong-g_{m} R_{2} V_{\\pi}$ for the BJT.\n\nRepeat Example 6.6 for the CS amplifier in Fig. 6.15. Assume the MOSFET has $k=8 \\mathrm{~mA} / \\mathrm{V}^{2}, \\lambda=1 /(50 \\mathrm{~V})$, and $C_{g d}=0.1 \\mathrm{pF}$, and is biased at $I_{D}=1 \\mathrm{~mA}$, where it exhibits $f_{T}=500 \\mathrm{MHz}$. Additionally, $R_{s i g}=10 \\mathrm{k} \\Omega$ and $R_{D}=5 \\mathrm{k} \\Omega$.\n\n#### Solution\n\n(a) Following the standard procedure, we find $g_{m}=4 \\mathrm{~mA} / \\mathrm{V}$ and $r_{o}=50 \\mathrm{k} \\Omega$, resulting in a lowfrequency gain of\n\n$$\na_{0}=-g_{m}\\left(R_{D} / / r_{o}\\right)=-4(5 / / 50)=-4 \\times 4.55=-18.2 \\mathrm{~V} / \\mathrm{V}\n$$\n\nUsing Eq. (6.24b), we have\n\n$$\nC_{g s}=\\frac{g_{m}}{2 \\pi f_{T}}-C_{g d}=\\frac{4 \\times 10^{-3}}{2 \\pi 500 \\times 10^{6}}-0.1 \\times 10^{-12} \\cong 1.17 \\mathrm{pF}\n$$\n\nThe Miller capacitance is\n\n$$\nC_{M}=C_{g d}\\left[1+g_{m}\\left(R_{D} / / r_{o}\\right)\\right]=0.1 \\times 10^{-12}[1+18.2] \\cong 1.92 \\mathrm{pF}\n$$\n\nindicating a Miller multiplier of 19.2. (In general, this multiplier is lower in FETs than in BJTs because a FET has a notably lower $g_{m}$.) The total capacitance is thus\n\n$$\nC_{t}=C_{g s}+C_{M}=1.17+1.92=3.09 \\mathrm{pF}\n$$\n\nHence, the Miller capacitance also plays a significant role in this amplifier. The resistance seen by $C_{t}$ is now $R_{s i g}$. Together, they establish a pole frequency at\n\n$$\nf_{p}=\\frac{1}{2 \\pi R_{s i g} C_{t}}=\\frac{1}{2 \\pi \\times 10^{4} \\times 3.09 \\times 10^{-12}}=5.15 \\mathrm{MHz}\n$$\n\nThe gain-bandwidth product is\n\n$$\n\\mathrm{GBP}=\\left|a_{0}\\right| \\times f_{p}=18.2 \\times 5.2 \\cong 94 \\mathrm{MHz}\n$$\n\n(b) According to Eq. (6.29), the current fed forward via $C_{g d}$ at the upper edge of the frequency band of interest is\n\n$$\nI_{f}\\left(j f_{p}\\right) \\cong j 2 \\pi f_{p} C_{M} V_{g s}=j 2 \\pi \\times 5.2 \\times 10^{6} \\times 1.92 \\times 10^{-12} V_{g s}=j V_{g s} /(16 \\mathrm{k} \\Omega)\n$$\n\nwhere"
},
{
    "text": "Due to the Miller effect, the circuit depicted in Fig. 6.16 can be streamlined to resemble Fig 6.19a. Indeed, we can amalgamate the two parallel capacitances into a solitary aggregate capacitance, denoted as $C_{t}$,\n\n$$\n\\begin{equation*}\nC_{t}=C_{1}+C_{M} \\tag{6.31}\n\\end{equation*}\n$$\n\nthereby facilitating the analysis of the simplified circuit shown in Fig. 6.19b. Employing the alternating current (ac) voltage divider principle,\n\n$$\nV_{o}=-g_{m} V_{1} R_{2}=-g_{m} R_{2} \\frac{1 / s C_{t}}{R_{1}+1 / s C_{t}} V_{i}=\\frac{-g_{m} R_{2}}{1+s R_{1} C_{t}} V_{i}\n$$\n\nthe voltage gain of the circuit can be expressed as\n\n$$\n\\begin{equation*}\na(s)=\\frac{V_{o}}{V_{i}}=\\frac{-g_{m} R_{2}}{1+s R_{1} C_{t}} \\tag{6.32}\n\\end{equation*}\n$$\n\nThe value of $s$ that renders the denominator zero, thereby causing $a(s)$ to escalate towards infinity, is identified as a pole. This value is\n\n$$\n\\begin{equation*}\ns=-\\frac{1}{R_{1} C_{t}} \\tag{6.33}\n\\end{equation*}\n$$\n\nindicating a real and negative pole. Substituting $s \\rightarrow j \\omega$ into Eq. (6.32) yields the frequency response, which is presented in the form of Eq. (6A.1) in Appendix 6A as\n\n$$\n\\begin{equation*}\na(j \\omega)=\\frac{a_{0}}{1+j \\omega / \\omega_{p}} \\tag{6.34}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\na_{0}=-g_{m} R_{2} \\tag{6.35a}\n\\end{equation*}\n$$\n\nrepresents the gain at low frequencies, termed the low-frequency gain, and\n\n$$\n\\begin{equation*}\n\\omega_{p}=\\frac{1}{R_{1} C_{t}} \\tag{6.35b}\n\\end{equation*}\n$$\n\nis recognized as the pole frequency.\n\nThe circuit diagrams (a) and (b) illustrate voltage amplifiers with distinct configurations. Diagram (a) showcases a voltage amplifier equipped with a voltage-controlled current source, paired with two capacitors and two resistors. The input voltage source Vi is linked to resistor R1 and capacitors C1 and CM. The output is measured across resistor R2, which is connected to the voltage-controlled current source gmV1. Capacitor Ct is connected from V1 to ground. Diagram (b) represents a simplified equivalent circuit utilizing the Miller approximation, comprising a voltage source, a resistor, a capacitor, a voltage-controlled current source, and an additional resistor. This configuration is employed to examine the frequency response and gain of the circuit.\n\nFIGURE 6.19 displays the equivalent-circuit simplifications achieved through the Miller approximation.\n\nFIGURE 6.20 portrays a Bode plot, depicting the magnitude gain of a circuit as it varies with frequency. The plot is recorded on a logarithmic scale, with the x-axis representing frequency () in decades and the y-axis denoting magnitude |a(j)| in decibels (dB).\n\nThe plot commences with a constant gain at low frequencies, denoted as |a| dB. As the frequency rises, a breakpoint emerges at a particular frequency, labeled as . Beyond this breakpoint, the gain commences a decrease at a rate of -20 dB/decade, indicative of a first-order low-pass filter characteristics.\n\nKey aspects of the plot include the initial gain |a|, the breakpoint at  where the gain diminishes by 3 dB from its initial value, marking the cutoff frequency, and the slope of -20 dB/decade post , characteristic of a single-pole roll-off.\n\nAnnotations on the plot highlight the 3 dB point, a standard reference for identifying the cutoff frequency, and a reference line indicating the -20 dB/decade slope, emphasizing the linear decrease in gain on the logarithmic scale.\n\nThe Bode plot in FIGURE 6.20 (refer to Bode plots in Appendix 6A) visually represents the frequency response. Referring to FIGURE 6.19b, the frequency response is influenced by the ac voltage divider formed by $C_{t}$ and $R_{1}$, the equivalent resistance encountered by $C_{t}$. The impedance presented by $C_{t}$ is $Z_{t}(j \\omega)=1 /\\left(j \\omega C_{t}\\right)$, and depending on the magnitude $\\left|Z_{t}(j \\omega)\\right|=1 /\\left(\\omega C_{t}\\right)$ relative to $R_{1}$, we identify three pivotal scenarios:\n\n- At low frequencies, $\\left|Z_{t}(\\omega)\\right| \\gg R_{1}$, suggesting that $C_{t}$ behaves akin to an open circuit compared to $R_{1}$. Consequently, $V_{1} \\rightarrow V_{i}$, and thus $|a| \\rightarrow a_{0}$.\n- At high frequencies, $\\left|Z_{t}(\\omega)\\right| \\ll R_{1}$, indicating that $C_{t}$ now behaves like a short circuit compared to $R_{1}$. Consequently, $V_{1} \\rightarrow 0$, and $|a|$ diminishes with increasing frequency.\n- The transition between these two extremes occurs at $\\omega=\\omega_{p}$. Rearranging Eq. (6.35b) as $1 /\\left(\\omega_{p} C_{t}\\right)=R_{1}$, we observe that at this frequency\n\n$$\n\\begin{equation*}\n\\left|Z_{t}\\left(\\omega_{p}\\right)\\right|=R_{1} \\tag{6.36}\n\\end{equation*}\n$$\n\nThis interpretation of $\\omega_{p}$: it signifies the frequency where the capacitance's impedance, in magnitude, equals the resistance encountered by the capacitance. In the MOS case of Fig. 6.15, this resistance is simply $R_{s i g}$, while in the bipolar case of Fig. 6.14, it is $r_{\\pi} /\\left(R_{s i g}+r_{b}\\right)$. Circuit designers habitually leverage physical insight to verify mathematical derivations and to comprehend the circuit's behavior.\n\n- Owing to the frequency-dependent gain reduction, an amplifier effectively functions as a lowpass filter. Hence, $\\omega_{p}$ is also known as the corner frequency, cutoff frequency, or break frequency. At $\\omega=\\omega_{p}$, $\\left|V_{1}\\right|$ diminishes to $1 / \\sqrt{2}$ (or 0.707, equivalent to -3 dB) of its low-frequency value, leading to the alternate name of $\\omega_{p}$ as the -3 dB frequency. Since the power of an ac signal is proportional to the square of its magnitude, $\\omega_{p}$ is also referred to as the half-power frequency. The gain-bandwidth product is defined as\n\n$$\n\\begin{equation*}\n\\mathrm{GBP}=\\left|a_{0}\\right| \\times f_{p} \\tag{6.37}\n\\end{equation*}\n$$\n\nWith these insights, we can now apply our findings to the specific circuits depicted in Figs. 6.14 and 6.15. For the common-emitter (CE) configuration, combining Eqs. (6.27) and (6.35) yields\n\n$$\n\\begin{equation*}\na_{0(\\mathrm{BJT})}=\\left.\\frac{V_{o}}{V_{s i g}}\\right|_{\\omega \\rightarrow 0}=\\frac{r_{\\pi}}{R_{s i g}+r_{b}+r_{\\pi}}\\left[-g_{m}\\left(R_{C} / / r_{o}\\right)\\right] \\tag{6.38a}\n\\end{equation*}\n$$\n\n$$\n\\begin{equation*}\n\\omega_{p(\\mathrm{BJT})}=\\frac{1}{\\left\\{r_{\\pi} / /\\left(R_{s i g}+r_{b}\\right)\\right\\} \\times\\left\\{C_{\\pi}+C_{\\mu}\\left[1+g_{m}\\left(R_{C} / / r_{o}\\right)\\right]\\right\\}} \\tag{6.38b}\n\\end{equation*}\n$$\n\nFor the common-source (CS) configuration, combining Eqs. (6.28) and (6.35) results in\n\n$$\n\\begin{gather*}\na_{0(\\mathrm{FET})}=\\left.\\frac{V_{o}}{V_{s i g}}\\right|_{\\omega \\rightarrow 0}=-g_{m}\\left(R_{D} / / r_{o}\\right)  \\tag{6.39a}\\\\\n\\omega_{p(\\mathrm{FET})}=\\frac{1}{R_{s i g}\\left\\{C_{g s}+C_{g d}\\left[1+g_{m}\\left(R_{D} / / r_{o}\\right)\\right]\\right\\}} \\tag{6.39b}\n\\end{gather*}\n$$\n\nTo deepen our understanding, let's examine some practical examples.\n\nEXAMPLE 6.6 Consider the CE amplifier in Fig. 6.14, which utilizes a BJT with $\\beta_{0}=200, V_{A}=50 \\mathrm{~V}, r_{b}=$ $200 \\Omega$, and $C_{\\mu}=0.5 \\mathrm{pF}$. The BJT is biased at $I_{C}=1 \\mathrm{~mA}$, where it exhibits $f_{T}=$ 500 MHz. Additionally, $R_{s i g}=1 \\mathrm{k} \\Omega$ and $R_{C}=5 \\mathrm{k} \\Omega$.\n(a) Estimate the amplifier's low-frequency gain and its -3 dB frequency. Determine the gain-bandwidth product of this amplifier.\n(b) Confirm that the loading effect of the feedback capacitance on the output node is negligible within the frequency range of interest ($f \\leq f_{p}$), thereby validating the Miller approximation.\n\n#### Solution\n\n(a) Following standard procedures, we find $g_{m}=1 /(26 \\Omega), r_{\\pi}=5.2 \\mathrm{k} \\Omega$, and $r_{o}=50 \\mathrm{k} \\Omega$. Furthermore,\n\n$$\n\\begin{aligned}\n& R_{1}=r_{\\pi} / /\\left(R_{s i g}+r_{b}\\right)=5.2 / /(1+0.2)=0.975 \\mathrm{k} \\Omega \\\\\n& R_{2}=R_{C} / / r_{o}=5 / / 50=4.55 \\mathrm{k} \\Omega\n\\end{aligned}\n$$\n\nThe low-frequency gain is\n\n$$\n\\begin{aligned}\na_{0} & =\\frac{r_{\\pi}}{R_{s i g}+r_{b}+r_{\\pi}}\\left(-g_{m} R_{2}\\right)=\\frac{5.2}{1+0.2+5.2}(-4.55 / 0.026) \\\\\n& \\cong 0.81 \\times(-175)=-142 \\mathrm{~V} / \\mathrm{V}\n\\end{aligned}\n$$\n\nUsing Eq. (6.12b), we obtain\n\n$$\nC_{\\pi}=\\frac{g_{m}}{2 \\pi f_{T}}-C_{\\mu}=\\frac{1 / 26}{2 \\pi \\times 500 \\times 10^{6}}-0.5 \\times 10^{-12} \\cong 12 \\mathrm{pF}\n$$\n\nThe Miller capacitance is\n\n$$\nC_{M}=C_{\\mu}\\left[1+g_{m}\\left(R_{C} / / r_{o}\\right)\\right]=0.5 \\times 10^{-12}[1+175]=88 \\mathrm{pF}\n$$\n\nindicating a Miller multiplier of 176. The total capacitance is thus\n\n$$\nC_{t}=C_{\\pi}+C_{M}=12+88=100 \\mathrm{pF}\n$$\n\nClearly, the Miller capacitance plays a dominant role in this amplifier. The combination of $R_{1}$ and $C_{t}$ establishes a pole frequency at\n\n$$\nf_{p}=\\frac{1}{2 \\pi R_{1} C_{t}}=\\frac{1}{2 \\pi \\times 975 \\times 100 \\times 10^{-12}}=1.63 \\mathrm{MHz}\n$$\n\nThe gain-bandwidth product is\n\n$$\n\\text { GBP }=\\left|a_{0}\\right| \\times f_{p}=142 \\times 1.63 \\cong 230 \\mathrm{MHz}\n$$\n\n(b) According to Eq. (6.29), the current fed forward via $C_{\\mu}$ reaches its maximum at the upper limit of the frequency range of interest, where\n\n$$\nI_{f}\\left(j f_{p}\\right) \\cong j 2 \\pi f_{p} C_{M} V_{\\pi}=j 2 \\pi \\times 1.63 \\times 10^{6} \\times 88 \\times 10^{-12} V_{\\pi}=j V_{\\pi} /(1110 \\Omega)\n$$\n\nConversely, the current drawn by the dependent source is\n\n$$\ng_{m} V_{\\pi}=V_{\\pi} /(26 \\Omega)\n$$\n\nThe ratio of these two currents is\n\n$$\n\\frac{\\left|I_{f}\\left(j f_{p}\\right)\\right|}{\\left|g_{m} V_{\\pi}\\right|}=\\frac{26}{1110} \\ll 1\n$$\n\nThis confirms the validity of the approximation $V_{o} \\cong-g_{m} R_{2} V_{\\pi}$ for the BJT.\n\nRepeat Example 6.6 for the CS amplifier in Fig. 6.15. Assume the MOSFET has $k=8 \\mathrm{~mA} / \\mathrm{V}^{2}, \\lambda=1 /(50 \\mathrm{~V})$, and $C_{g d}=0.1 \\mathrm{pF}$, and is biased at $I_{D}=1 \\mathrm{~mA}$, where it exhibits $f_{T}=500 \\mathrm{MHz}$. Moreover, $R_{s i g}=10 \\mathrm{k} \\Omega$ and $R_{D}=5 \\mathrm{k} \\Omega$.\n\n#### Solution\n\n(a) Following standard procedures, we find $g_{m}=4 \\mathrm{~mA} / \\mathrm{V}$ and $r_{o}=50 \\mathrm{k} \\Omega$, leading to a low-frequency gain of\n\n$$\na_{0}=-g_{m}\\left(R_{D} / / r_{o}\\right)=-4(5 / / 50)=-4 \\times 4.55=-18.2 \\mathrm{~V} / \\mathrm{V}\n$$\n\nUsing Eq. (6.24b), we obtain\n\n$$\nC_{g s}=\\frac{g_{m}}{2 \\pi f_{T}}-C_{g d}=\\frac{4 \\times 10^{-3}}{2 \\pi 500 \\times 10^{6}}-0.1 \\times 10^{-12} \\cong 1.17 \\mathrm{pF}\n$$\n\nThe Miller capacitance is\n\n$$\nC_{M}=C_{g d}\\left[1+g_{m}\\left(R_{D} / / r_{o}\\right)\\right]=0.1 \\times 10^{-12}[1+18.2] \\cong 1.92 \\mathrm{pF}\n$$\n\nindicating a Miller multiplier of 19.2. The total capacitance is thus\n\n$$\nC_{t}=C_{g s}+C_{M}=1.17+1.92=3.09 \\mathrm{pF}\n$$\n\nTherefore, the Miller capacitance also plays a significant role in this amplifier. The resistance perceived by $C_{t}$ is $R_{s i g}$. Together, they establish a pole frequency at\n\n$$\nf_{p}=\\frac{1}{2 \\pi R_{s i g} C_{t}}=\\frac{1}{2 \\pi \\times 10^{4} \\times 3.09 \\times 10^{-12}}=5.15 \\mathrm{MHz}\n$$\n\nThe gain-bandwidth product is\n\n$$\n\\mathrm{GBP}=\\left|a_{0}\\right| \\times f_{p}=18.2 \\times 5.2 \\cong 94 \\mathrm{MHz}\n$$\n\n(b) According to Eq. (6.29), the current fed forward via $C_{g d}$ at the upper limit of the frequency range of interest is\n\n$$\nI_{f}\\left(j f_{p}\\right) \\cong j 2 \\pi f_{p} C_{M} V_{g s}=j 2 \\pi \\times 5.2 \\times 10^{6} \\times 1.92 \\times 10^{-12} V_{g s}=j V_{g s} /(16 \\mathrm{k} \\Omega)\n$$\n\nwhereas the current drawn by the dependent source is\n\n$$\ng_{m} V_{g s}=V_{g s} /(0.25 \\mathrm{k} \\Omega)\n$$\n\nThe ratio of these two currents is\n\n$$\n\\frac{\\left|I_{f}\\left(j f_{p}\\right)\\right|}{\\left|g_{m} V_{g s}\\right|}=\\frac{0.25}{16} \\ll 1\n$$\n\nthus confirming the validity of the approximation $V_{o} \\cong-g_{m} R_{2} V_{g s}$ for the MOSFET."
},
{
    "text": "Due to the Miller effect, the circuit depicted in Fig. 6.16 can be simplified as shown in Fig 6.19a. Indeed, the two parallel capacitances can be consolidated into a single equivalent capacitance $C_{t}$,\n\n$$\n\\begin{equation*}\nC_{t}=C_{1}+C_{M} \\tag{6.31}\n\\end{equation*}\n$$\n\nwhich allows us to work with the even simpler circuit of Fig. 6.19b. Employing the ac voltage divider formula,\n\n$$\nV_{o}=-g_{m} V_{1} R_{2}=-g_{m} R_{2} \\frac{1 / s C_{t}}{R_{1}+1 / s C_{t}} V_{i}=\\frac{-g_{m} R_{2}}{1+s R_{1} C_{t}} V_{i}\n$$\n\nthe voltage gain of the circuit is\n\n$$\n\\begin{equation*}\na(s)=\\frac{V_{o}}{V_{i}}=\\frac{-g_{m} R_{2}}{1+s R_{1} C_{t}} \\tag{6.32}\n$$\n\nThe value of $s$ that causes the denominator to zero out and thus leads to $a(s)$ tending towards infinity is known as a pole. This value is\n\n$$\n\\begin{equation*}\ns=-\\frac{1}{R_{1} C_{t}} \\tag{6.33}\n$$\n\nindicating a real and negative pole. Replacing $s$ with $j \\omega$ in Eq. (6.32) yields the frequency response, which we express in the standard form of Eq. (6A.1) from Appendix 6A as\n\n$$\n\\begin{equation*}\na(j \\omega)=\\frac{a_{0}}{1+j \\omega / \\omega_{p}} \\tag{6.34}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\na_{0}=-g_{m} R_{2} \\tag{6.35a}\n$$\n\nis the gain value at the limit $\\omega \\rightarrow 0$, appropriately termed the low-frequency gain, and\n\n$$\n\\begin{equation*}\n\\omega_{p}=\\frac{1}{R_{1} C_{t}} \\tag{6.35b}\n$$\n\nis referred to as the pole frequency.\n\nThe circuit diagram (a) illustrates a voltage amplifier featuring a voltage-controlled current source, two capacitors, and two resistors. The input voltage source Vi is linked to a resistor R1 and capacitors C1 and CM. The output is measured across the resistor R2, which is connected to the voltage-controlled current source gmV1. Capacitor Ct is connected from V1 to ground.\n\nThe circuit is a simplified equivalent circuit using the Miller approximation. It includes a voltage source, a resistor, a capacitor, a voltage-controlled current source, and another resistor. The configuration is utilized to analyze the frequency response and gain of the circuit.\n\nFIGURE 6.19 presents the equivalent-circuit simplifications using the Miller approximation.\n\nThe graph in FIGURE 6.20 is a Bode plot depicting the magnitude gain of a circuit as a function of frequency. The graph is plotted on a logarithmic scale, with the x-axis labeled as frequency () in decades and the y-axis labeled as magnitude |a(j)| in decibels (dB).\n\nAxes Labels and Units:\n- **X-axis:** Frequency () in decades.\n- **Y-axis:** Magnitude |a(j)| in decibels (dB).\n\nOverall Behavior and Trends:\n- The plot starts with a flat region at low frequencies where the gain is constant at |a| dB.\n- As frequency increases, the plot exhibits a break point at a specific frequency, denoted as .\n- Beyond this break point, the gain starts to decrease at a rate of -20 dB/decade, indicative of a first-order low-pass filter behavior.\n\nKey Features and Technical Details:\n- **Initial Gain:** The initial magnitude gain is denoted as |a|.\n- **Break Point ():** At the frequency , the gain drops by 3 dB from its initial value, marking the cutoff frequency.\n- **Slope:** After , the slope of the plot is -20 dB/decade, characteristic of a single-pole roll-off.\n\nAnnotations and Specific Data Points:\n- The plot includes a marker at the 3 dB point, which is a standard reference for identifying the cutoff frequency.\n- A reference line is drawn to indicate the -20 dB/decade slope, emphasizing the linear decrease in gain on the logarithmic scale.\n\nFIGURE 6.20 depicts the magnitude gain plot for the circuit of Fig. 6.19b.\n\nThe magnitude Bode plot is shown in Fig. 6.20 (see also Bode plots in Appendix 6A). It is instructive to justify this plot using physical insight. With reference to Fig. 6.19b, we observe that the frequency response is governed by the ac voltage divider formed by $C_{t}$ with $R_{1}$, the equivalent resistance seen by $C_{t}$ itself. The impedance presented by $C_{t}$ is $Z_{t}(j \\omega)=1 /\\left(j \\omega C_{t}\\right)$, and depending on how its magnitude $\\left|Z_{t}(j \\omega)\\right|=1 /\\left(\\omega C_{t}\\right)$ compares with $R_{1}$, we have three significant cases:\n\n- At low frequencies we have $\\left|Z_{t}(\\omega)\\right| \\gg R_{1}$, indicating that $C_{t}$ approximates an open circuit compared to $R_{1}$. Consequently, $V_{1} \\rightarrow V_{i}$, and thus $|a| \\rightarrow a_{0}$. This is the situation we have been dealing with before embarking upon the present chapter.\n- At high frequencies we have $\\left|Z_{t}(\\omega)\\right| \\ll R_{\\mathrm{l}}$, indicating that $C_{t}$ now approximates a short circuit compared to $R_{1}$. Consequently, $V_{1} \\rightarrow 0$, and $|a|$ rolls off with frequency, as shown.\n- The borderline between the two limiting cases occurs when $\\omega=\\omega_{p}$. Rewriting Eq. (6.35b) as $1 /\\left(\\omega_{p} C_{t}\\right)=R_{1}$, we see that at this frequency we have\n\n$$\n\\begin{equation*}\n\\left|Z_{t}\\left(\\omega_{p}\\right)\\right|=R_{1} \\tag{6.36}\n\\end{equation*}\n$$\n\nWe now have a physical interpretation for $\\omega_{p}$ : this is the frequency at which the capacitance's impedance equals, in magnitude, the equivalent resistance seen by the capacitance itself. In the MOS case of Fig. 6.15 this resistance is simply $R_{s i g}$, but in the bipolar case of Fig. 6.14 it is $r_{\\pi} /\\left(R_{s i g}+r_{b}\\right)$. A circuit designer will always use physical insight to check the results of mathematical derivations as well as to develop a feel for the workings of the circuit at hand.\n\n- Because of the gain roll-off with frequency, an amplifier effectively acts as a lowpass filter, this being the reason why $\\omega_{p}$ is also variously known as corner frequency, cutoff frequency, or also break frequency. At $\\omega=\\omega_{p},\\left|V_{1}\\right|$ is down to $1 / \\sqrt{2}(=0.707$, or $-3-\\mathrm{dB})$ of its low-frequency value, so $\\omega_{p}$ is also called the $-3-d B$ frequency. Since the power of an ac signal is proportional to the square of its magnitude, another name of $\\omega_{p}$ is half-power frequency. The gain-bandwidth product is\n\n$$\n\\begin{equation*}\n\\mathrm{GBP}=\\left|a_{0}\\right| \\times f_{p} \\tag{6.37}\n\\end{equation*}\n$$\n\nWe are now ready to apply our results to the specific circuits of Figs. 6.14 and 6.15. Turning first to the common-emitter (CE) case, we combine Eqs. (6.27) and (6.35) to write\n\n$$\n\\begin{equation*}\na_{0(\\mathrm{BJT})}=\\left.\\frac{V_{o}}{V_{s i g}}\\right|_{\\omega \\rightarrow 0}=\\frac{r_{\\pi}}{R_{s i g}+r_{b}+r_{\\pi}}\\left[-g_{m}\\left(R_{C} / / r_{o}\\right)\\right] \\tag{6.38a}\n\\end{equation*}\n$$\n\n$$\n\\begin{equation*}\n\\omega_{p(\\mathrm{BJT})}=\\frac{1}{\\left\\{r_{\\pi} / /\\left(R_{s i g}+r_{b}\\right)\\right\\} \\times\\left\\{C_{\\pi}+C_{\\mu}\\left[1+g_{m}\\left(R_{C} / / r_{o}\\right)\\right]\\right\\}} \\tag{6.38b}\n\\end{equation*}\n$$\n\nTurning next to the common-source (CS) case, we combine Eqs. (6.28) and (6.35) to write\n\n$$\n\\begin{gather*}\na_{0(\\mathrm{FET})}=\\left.\\frac{V_{o}}{V_{s i g}}\\right|_{\\omega \\rightarrow 0}=-g_{m}\\left(R_{D} / / r_{o}\\right)  \\tag{6.39a}\\\\\n\\omega_{p(\\mathrm{FET})}=\\frac{1}{R_{s i g}\\left\\{C_{g s}+C_{g d}\\left[1+g_{m}\\left(R_{D} / / r_{o}\\right)\\right]\\right\\}} \\tag{6.39b}\n\\end{gather*}\n$$\n\nTo develop a better understanding, let us consider some practical examples.\n\nEXAMPLE 6.6 Consider the CE amplifier of Fig. 6.14 using a BJT with $\\beta_{0}=200, V_{A}=50 \\mathrm{~V}, r_{b}=$ $200 \\Omega$, and $C_{\\mu}=0.5 \\mathrm{pF}$. The BJT is biased at $I_{C}=1 \\mathrm{~mA}$, where it exhibits $f_{T}=$ 500 MHz . Moreover, let $R_{s i g}=1 \\mathrm{k} \\Omega$ and $R_{C}=5 \\mathrm{k} \\Omega$.\n(a) Estimate the amplifier's low-frequency gain as well as its $-3-\\mathrm{dB}$ frequency. What is the gain-bandwidth product of this amplifier?\n(b) Verify that loading of the output node by the feedback capacitance is negligible over the frequency range of interest $\\left(f \\leq f_{p}\\right)$, thus validating the Miller approximation.\n\n#### Solution\n\n(a) Proceeding as usual, we find $g_{m}=1 /(26 \\Omega), r_{\\pi}=5.2 \\mathrm{k} \\Omega$, and $r_{o}=50 \\mathrm{k} \\Omega$. Moreover,\n\n$$\n\\begin{aligned}\n& R_{1}=r_{\\pi} / /\\left(R_{s i g}+r_{b}\\right)=5.2 / /(1+0.2)=0.975 \\mathrm{k} \\Omega \\\\\n& R_{2}=R_{C} / / r_{o}=5 / / 50=4.55 \\mathrm{k} \\Omega\n\\end{aligned}\n$$\n\nThe low-frequency gain is\n\n$$\n\\begin{aligned}\na_{0} & =\\frac{r_{\\pi}}{R_{s i g}+r_{b}+r_{\\pi}}\\left(-g_{m} R_{2}\\right)=\\frac{5.2}{1+0.2+5.2}(-4.55 / 0.026) \\\\\n& \\cong 0.81 \\times(-175)=-142 \\mathrm{~V} / \\mathrm{V}\n\\end{aligned}\n$$\n\nBy Eq. (6.12b) we have\n\n$$\nC_{\\pi}=\\frac{g_{m}}{2 \\pi f_{T}}-C_{\\mu}=\\frac{1 / 26}{2 \\pi \\times 500 \\times 10^{6}}-0.5 \\times 10^{-12} \\cong 12 \\mathrm{pF}\n$$\n\nThe Miller capacitance is\n\n$$\nC_{M}=C_{\\mu}\\left[1+g_{m}\\left(R_{C} / / r_{o}\\right)\\right]=0.5 \\times 10^{-12}[1+175]=88 \\mathrm{pF}\n$$\n\nindicating a Miller multiplier of 176. The total capacitance is thus\n\n$$\nC_{t}=C_{\\pi}+C_{M}=12+88=100 \\mathrm{pF}\n$$\n\nClearly, the Miller capacitance plays a dominant role in this amplifier. Together, $R_{1}$ and $C_{t}$ create a pole frequency at\n\n$$\nf_{p}=\\frac{1}{2 \\pi R_{1} C_{t}}=\\frac{1}{2 \\pi \\times 975 \\times 100 \\times 10^{-12}}=1.63 \\mathrm{MHz}\n$$\n\nThe gain-bandwidth product is\n\n$$\n\\text { GBP }=\\left|a_{0}\\right| \\times f_{p}=142 \\times 1.63 \\cong 230 \\mathrm{MHz}\n$$\n\n(b) By Eq. (6.29), the current fed forward via $C_{\\mu}$ is maximized at the upper edge of the frequency band of interest, where\n\n$$\nI_{f}\\left(j f_{p}\\right) \\cong j 2 \\pi f_{p} C_{M} V_{\\pi}=j 2 \\pi \\times 1.63 \\times 10^{6} \\times 88 \\times 10^{-12} V_{\\pi}=j V_{\\pi} /(1110 \\Omega)\n$$\n\nOn the other hand, the current drawn by the dependent source is\n\n$$\ng_{m} V_{\\pi}=V_{\\pi} /(26 \\Omega)\n$$\n\nThe ratio of the two currents is thus\n\n$$\n\\frac{\\left|I_{f}\\left(j f_{p}\\right)\\right|}{\\left|g_{m} V_{\\pi}\\right|}=\\frac{26}{1110} \\ll 1\n$$\n\nThis confirms the validity of the approximation $V_{o} \\cong-g_{m} R_{2} V_{\\pi}$ for the BJT.\n\nRepeat Example 6.6, but for the CS amplifier of Fig. 6.15. Assume the MOSFET has $k=8 \\mathrm{~mA} / \\mathrm{V}^{2}, \\lambda=1 /(50 \\mathrm{~V})$, and $C_{g d}=0.1 \\mathrm{pF}$, and is biased at $I_{D}=1 \\mathrm{~mA}$, where it exhibits $f_{T}=500 \\mathrm{MHz}$. Moreover, let $R_{s i g}=10 \\mathrm{k} \\Omega$ and $R_{D}=5 \\mathrm{k} \\Omega$.\n\n#### Solution\n\n(a) Proceeding as usual we find $g_{m}=4 \\mathrm{~mA} / \\mathrm{V}$ and $r_{o}=50 \\mathrm{k} \\Omega$, so the lowfrequency gain is\n\n$$\na_{0}=-g_{m}\\left(R_{D} / / r_{o}\\right)=-4(5 / / 50)=-4 \\times 4.55=-18.2 \\mathrm{~V} / \\mathrm{V}\n$$\n\nBy Eq. (6.24b) we have\n\n$$\nC_{g s}=\\frac{g_{m}}{2 \\pi f_{T}}-C_{g d}=\\frac{4 \\times 10^{-3}}{2 \\pi 500 \\times 10^{6}}-0.1 \\times 10^{-12} \\cong 1.17 \\mathrm{pF}\n$$\n\nEXAMPLE 6.7\n-\n\nThe Miller capacitance is\n\n$$\nC_{M}=C_{g d}\\left[1+g_{m}\\left(R_{D} / / r_{o}\\right)\\right]=0.1 \\times 10^{-12}[1+18.2] \\cong 1.92 \\mathrm{pF}\n$$\n\nindicating a Miller multiplier of 19.2. (In general, this multiplier is lower in FETs than in BJTs because a FET has notoriously a lower $g_{m}$.) The total capacitance is thus\n\n$$\nC_{t}=C_{g s}+C_{M}=1.17+1.92=3.09 \\mathrm{pF}\n$$\n\nso the Miller capacitance plays a dominant role also in this amplifier. The resistance seen by $C_{t}$ is now $R_{s i g}$. Together, they create a pole frequency at\n\n$$\nf_{p}=\\frac{1}{2 \\pi R_{s i g} C_{t}}=\\frac{1}{2 \\pi \\times 10^{4} \\times 3.09 \\times 10^{-12}}=5.15 \\mathrm{MHz}\n$$\n\nThe gain-bandwidth product is\n\n$$\n\\mathrm{GBP}=\\left|a_{0}\\right| \\times f_{p}=18.2 \\times 5.2 \\cong 94 \\mathrm{MHz}\n$$\n\n(b) By Eq. (6.29), the current fed forward via $C_{g d}$ at the upper edge of the frequency band of interest is\n\n$$\nI_{f}\\left(j f_{p}\\right) \\cong j 2 \\pi f_{p} C_{M} V_{g s}=j 2 \\pi \\times 5.2 \\times 10^{6} \\times 1.92 \\times 10^{-12} V_{g s}=j V_{g s} /(16 \\mathrm{k"
},
{
    "text": "The circuit depicted in Fig. 6.16 can be streamlined to resemble Fig 6.19a, courtesy of the Miller effect. By merging the two parallel capacitances into a single capacitance, $C_{t}$, we achieve this simplification:\n\n$$\nC_{t} = C_{1} + C_{M} \\tag{6.31}\n$$\n\nThis leads to an even more straightforward circuit representation in Fig. 6.19b. Applying the alternating current (ac) voltage divider rule yields:\n\n$$\nV_{o} = -g_{m} V_{1} R_{2} = -g_{m} R_{2} \\frac{1 / s C_{t}}{R_{1} + 1 / s C_{t}} V_{i} = \\frac{-g_{m} R_{2}}{1 + s R_{1} C_{t}} V_{i}\n$$\n\nHence, the voltage gain of the circuit is expressed as:\n\n$$\na(s) = \\frac{V_{o}}{V_{i}} = \\frac{-g_{m} R_{2}}{1 + s R_{1} C_{t}} \\tag{6.32}\n$$\n\nThe value of $s$ that results in the denominator reaching zero, thereby causing $a(s)$ to skyrocket to infinity, is termed a pole. This value is given by:\n\n$$\ns = -\\frac{1}{R_{1} C_{t}} \\tag{6.33}\n$$\n\nThis represents a real and negative pole. Substituting $s \\rightarrow j \\omega$ into Eq. (6.32) yields the frequency response, which we can express in the form of Eq. (6A.1) from Appendix 6A as:\n\n$$\na(j \\omega) = \\frac{a_{0}}{1 + j \\omega / \\omega_{p}} \\tag{6.34}\n$$\n\nHere, $a_{0}$ is defined as:\n\n$$\na_{0} = -g_{m} R_{2} \\tag{6.35a}\n$$\n\nThis is the gain at low frequencies, aptly named the low-frequency gain. Meanwhile, $\\omega_{p}$ is defined as:\n\n$$\n\\omega_{p} = \\frac{1}{R_{1} C_{t}} \\tag{6.35b}\n$$\n\nand is known as the pole frequency.\n\nThe provided images and their descriptions depict a voltage amplifier circuit with a voltage-controlled current source, capacitors, and resistors. The circuit configurations are used to analyze the frequency response and gain.\n\nFIGURE 6.19 showcases the equivalent-circuit simplifications achieved through the Miller approximation. The images describe a circuit diagram (a) and its simplified version (b) using the Miller approximation.\n\nFIGURE 6.20 presents a Bode plot illustrating the magnitude gain of a circuit as it varies with frequency. The plot is on a logarithmic scale, with frequency () on the x-axis in decades and magnitude |a(j)| on the y-axis in decibels (dB).\n\nThe Bode plot starts with a constant gain at low frequencies, denoted as |a| dB. As the frequency increases, there is a break point at a specific frequency, . Beyond this point, the gain decreases at a rate of -20 dB/decade, indicative of a first-order low-pass filter characteristic.\n\nThe initial gain is |a|, the break point () marks the cutoff frequency where the gain drops by 3 dB, and the slope after  is -20 dB/decade, characteristic of a single-pole roll-off. The plot includes a marker at the 3 dB point and a reference line indicating the -20 dB/decade slope.\n\nThe Bode plot is explained using physical insights, considering the ac voltage divider formed by $C_{t}$ with $R_{1}$. The impedance presented by $C_{t}$ is $Z_{t}(j \\omega) = 1 / (j \\omega C_{t})$, and depending on how its magnitude compares with $R_{1}$, three significant cases are observed:\n\n- At low frequencies, $C_{t}$ behaves like an open circuit compared to $R_{1}$, leading to $V_{1} \\rightarrow V_{i}$ and $|a| \\rightarrow a_{0}$.\n- At high frequencies, $C_{t}$ behaves like a short circuit compared to $R_{1}$, resulting in $V_{1} \\rightarrow 0$ and a roll-off in $|a|$ with frequency.\n- The transition between these two cases occurs at $\\omega = \\omega_{p}$, where the capacitance's impedance equals the resistance $R_{1}$.\n\nThe physical interpretation of $\\omega_{p}$ is the frequency at which the capacitance's impedance equals the resistance seen by the capacitance. This frequency is also known as the corner frequency, cutoff frequency, or break frequency. At $\\omega = \\omega_{p}$, $|V_{1}|$ is reduced to $1 / \\sqrt{2}$ of its low-frequency value, hence $\\omega_{p}$ is also called the -3 dB frequency. Since the power of an ac signal is proportional to the square of its magnitude, $\\omega_{p}$ is also referred to as the half-power frequency. The gain-bandwidth product is given by:\n\n$$\n\\text{GBP} = |a_{0}| \\times f_{p} \\tag{6.37}\n$$\n\nThe text proceeds to apply these results to specific circuits, such as the common-emitter (CE) and common-source (CS) configurations, and provides examples to illustrate the calculations and validations of the Miller approximation."
},
{
    "text": "Owing to the Miller effect, the circuit depicted in Fig. 6.16 can be streamlined as shown in Fig 6.19a. Indeed, the two parallel capacitances can be amalgamated into a solitary aggregate capacitance $C_{t}$,\n\n$$\n\\begin{equation*}\nC_{t}=C_{1}+C_{M} \\tag{6.31}\n\\end{equation*}\n$$\n\npermitting us to analyze the further simplified circuit of Fig. 6.19b. By employing the alternating current (ac) voltage divider formula,\n\n$$\nV_{o}=-g_{m} V_{1} R_{2}=-g_{m} R_{2} \\frac{1 / s C_{t}}{R_{1}+1 / s C_{t}} V_{i}=\\frac{-g_{m} R_{2}}{1+s R_{1} C_{t}} V_{i}\n$$\n\nwe deduce that the voltage gain of the circuit is\n\n$$\n\\begin{equation*}\na(s)=\\frac{V_{o}}{V_{i}}=\\frac{-g_{m} R_{2}}{1+s R_{1} C_{t}} \\tag{6.32}\n\\end{equation*}\n$$\n\nThe value of $s$ that nullifies the denominator, thereby causing $a(s)$ to escalate to infinity, is termed a pole. This value is\n\n$$\n\\begin{equation*}\ns=-\\frac{1}{R_{1} C_{t}} \\tag{6.33}\n\\end{equation*}\n$$\n\ndenoting a real and negative pole. Substituting $s \\rightarrow j \\omega$ in Eq. (6.32) yields the frequency response, expressed in the conventional form of Eq. (6A.1) in Appendix 6A as\n\n$$\n\\begin{equation*}\na(j \\omega)=\\frac{a_{0}}{1+j \\omega / \\omega_{p}} \\tag{6.34}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\na_{0}=-g_{m} R_{2} \\tag{6.35a}\n\\end{equation*}\n$$\n\nrepresents the gain at the limit $\\omega \\rightarrow 0$, aptly named the low-frequency gain, and\n\n$$\n\\begin{equation*}\n\\omega_{p}=\\frac{1}{R_{1} C_{t}} \\tag{6.35b}\n\\end{equation*}\n$$\n\nis designated as the pole frequency.\n\nThe circuit diagram (a) illustrates a voltage amplifier incorporating a voltage-controlled current source, two capacitors, and two resistors. The input voltage source Vi is linked to a resistor R1 and capacitors C1 and CM. The output is measured across resistor R2, which is connected to the voltage-controlled current source gmV1. Capacitor Ct is connected from V1 to ground.\n\nThe circuit depicted in (b) is a simplified equivalent circuit employing the Miller approximation. It encompasses a voltage source, a resistor, a capacitor, a voltage-controlled current source, and an additional resistor. This configuration is utilized to examine the frequency response and gain of the circuit.\n\nFIGURE 6.19 illustrates the equivalent-circuit simplifications using the Miller approximation.\n\nThe graph in FIGURE 6.20 is a Bode plot depicting the magnitude gain of a circuit as a function of frequency. The graph is plotted on a logarithmic scale, with the x-axis denoted as frequency () in decades and the y-axis denoted as magnitude |a(j)| in decibels (dB).\n\nAxes Labels and Units:\n- **X-axis:** Frequency () in decades.\n- **Y-axis:** Magnitude |a(j)| in decibels (dB).\n\nOverall Behavior and Trends:\n- The plot initiates with a flat segment at low frequencies where the gain remains constant at |a| dB.\n- As frequency escal\nThe Bode plot in Fig. 6.20 (refer\nApologies for the confusion. Here is the rephrased text for the Bode plot description:\n\nThe Bode plot depicted in Fig. 6.20 represents the magnitude gain of a circuit as it varies with frequency. This plot is charted on a logarithmic scale, with frequency () marked on the x-axis in decades and the magnitude |a(j)| on the y-axis in decibels (dB).\n\nAxes Labels and Units:\n- **X-axis:** Frequency () in decades.\n- **Y-axis:** Magnitude |a(j)| in decibels (dB).\n\nOverall Behavior and Trends:\n- The plot commences with a level section at low frequencies where the gain is steady at |a| dB.\n- As the frequency rises, the plot exhibits a transition point at a distinct frequency, denoted as .\n- Beyond this transition point, the gain starts to diminish at a rate of -20 dB/decade, signaling the behavior of a first-order low-pass filter.\n\nKey Features and Technical Details:\n- **Initial Gain:** The initial magnitude gain is denoted as |a|.\n- **Transition Point ():** At the frequency , the gain decreases by 3 dB from its initial value, signifying the cutoff frequency.\n- **Slope:** Post , the plot's slope is -20 dB/decade, characteristic of a single-pole attenuation.\n\nAnnotations and Specific Data Points:\n- The plot includes a marker at the 3 dB point, which serves as a standard reference for identifying the cutoff frequency.\n- A reference line is drawn to indicate the -20 dB/decade slope, highlighting the linear reduction in gain on the logarithmic scale.\n\nFIGURE 6.20 presents the magnitude gain plot for the circuit of Fig. 6.19b.\n\nThe magnitude Bode plot is depicted in Fig. 6.20 (refer also to Bode plots in Appendix 6A). It is instructive to rationalize this plot using physical insight. With reference to Fig. 6.19b, we observe that the frequency response is dictated by the ac voltage divider composed of $C_{t}$ and $R_{1}$, the equivalent resistance encountered by $C_{t}$ itself. The impedance presented by $C_{t}$ is $Z_{t}(j \\omega)=1 /\\left(j \\omega C_{t}\\right)$, and depending on how its magnitude $\\left|Z_{t}(j \\omega)\\right|=1 /\\left(\\omega C_{t}\\right)$ compares with $R_{1}$, we encounter three pivotal scenarios:\n\n- At low frequencies, $\\left|Z_{t}(\\omega)\\right| \\gg R_{1}$, suggesting that $C_{t}$ behaves akin to an open circuit relative to $R_{1}$. As a result, $V_{1} \\rightarrow V_{i}$, and thus $|a| \\rightarrow a_{0}$. This is the scenario we have dealt with prior to the current chapter.\n- At high frequencies, $\\left|Z_{t}(\\omega)\\right| \\ll R_{1}$, implying that $C_{t}$ now behaves like a short circuit in comparison to $R_{1}$. Consequently, $V_{1} \\rightarrow 0$, and $|a|$ diminishes with frequency, as depicted.\n- The boundary between the two extreme cases occurs when $\\omega=\\omega_{p}$. Rewriting Eq. (6.35b) as $1 /\\left(\\omega_{p} C_{t}\\right)=R_{1}$, we observe that at this frequency\n\n$$\n\\begin{equation*}\n\\left|Z_{t}\\left(\\omega_{p}\\right)\\right|=R_{1} \\tag{6.36}\n\\end{equation*}\n$$\n\nWe now have a physical interpretation for $\\omega_{p}$: this is the frequency at which the capacitance's impedance, in magnitude, equals the equivalent resistance faced by the capacitance itself. In the MOS case of Fig. 6.15, this resistance is simply $R_{s i g}$, but in the bipolar case of Fig. 6.14, it is $r_{\\pi} /\\left(R_{s i g}+r_{b}\\right)$. A circuit designer will consistently utilize physical insight to corroborate the outcomes of mathematical derivations as well as to foster an understanding of the circuit's operation at hand.\n\n- Due to the frequency-dependent gain reduction, an amplifier effectively acts as a lowpass filter, which is why $\\omega_{p}$ is also referred to as the corner frequency, cutoff frequency, or break frequency. At $\\omega=\\omega_{p}$, $\\left|V_{1}\\right|$ drops to $1 / \\sqrt{2}(=0.707$, or $-3-\\mathrm{dB})$ of its low-frequency value, hence $\\omega_{p}$ is also termed the $-3-d B$ frequency. Since the power of an ac signal is proportional to the square of its magnitude, another name for $\\omega_{p}$ is half-power frequency. The gain-bandwidth product is\n\n$$\n\\begin{equation*}\n\\mathrm{GBP}=\\left|a_{0}\\right| \\times f_{p} \\tag{6.37}\n\\end{equation*}\n$$\n\nWe are now prepared to apply our findings to the specific circuits of Figs. 6.14 and 6.15. Commencing with the common-emitter (CE) configuration, we merge Eqs. (6.27) and (6.35) to formulate\n\n$$\n\\begin{equation*}\na_{0(\\mathrm{BJT})}=\\left.\\frac{V_{o}}{V_{s i g}}\\right|_{\\omega \\rightarrow 0}=\\frac{r_{\\pi}}{R_{s i g}+r_{b}+r_{\\pi}}\\left[-g_{m}\\left(R_{C} / / r_{o}\\right)\\right] \\tag{6.38a}\n\\end{equation*}\n$$\n\n$$\n\\begin{equation*}\n\\omega_{p(\\mathrm{BJT})}=\\frac{1}{\\left\\{r_{\\pi} / /\\left(R_{s i g}+r_{b}\\right)\\right\\} \\times\\left\\{C_{\\pi}+C_{\\mu}\\left[1+g_{m}\\left(R_{C} / / r_{o}\\right)\\right]\\right\\}} \\tag{6.38b}\n\\end{equation*}\n$$\n\nNext, considering the common-source (CS) configuration, we combine Eqs. (6.28) and (6.35) to establish\n\n$$\n\\begin{gather*}\na_{0(\\mathrm{FET})}=\\left.\\frac{V_{o}}{V_{s i g}}\\right|_{\\omega \\rightarrow 0}=-g_{m}\\left(R_{D} / / r_{o}\\right)  \\tag{6.39a}\\\\\n\\omega_{p(\\mathrm{FET})}=\\frac{1}{R_{s i g}\\left\\{C_{g s}+C_{g d}\\left[1+g_{m}\\left(R_{D} / / r_{o}\\right)\\right]\\right\\}} \\tag{6.39b}\n\\end{gather*}\n$$\n\nTo enhance our comprehension, let us examine some practical examples.\n\nEXAMPLE 6.6 Consider the CE amplifier of Fig. 6.14, which utilizes a BJT with $\\beta_{0}=200, V_{A}=50 \\mathrm{~V}, r_{b}=$ $200 \\Omega$, and $C_{\\mu}=0.5 \\mathrm{pF}$. The BJT is biased at $I_{C}=1 \\mathrm{~mA}$, where it exhibits $f_{T}=$ 500 MHz. Additionally, let $R_{s i g}=1 \\mathrm{k} \\Omega$ and $R_{C}=5 \\mathrm{k} \\Omega$.\n(a) Estimate the amplifier's low-frequency gain as well as its $-3-\\mathrm{dB}$ frequency. Determine the gain-bandwidth product of this amplifier.\n(b) Confirm that the loading of the output node by the feedback capacitance is negligible within the frequency range of interest $\\left(f \\leq f_{p}\\right)$, thereby validating the Miller approximation.\n\n#### Solution\n\n(a) Following standard procedures, we determine $g_{m}=1 /(26 \\Omega), r_{\\pi}=5.2 \\mathrm{k} \\Omega$, and $r_{o}=50 \\mathrm{k} \\Omega$. Furthermore,\n\n$$\n\\begin{aligned}\n& R_{1}=r_{\\pi} / /\\left(R_{s i g}+r_{b}\\right)=5.2 / /(1+0.2)=0.975 \\mathrm{k} \\Omega \\\\\n& R_{2}=R_{C} / / r_{o}=5 / / 50=4.55 \\mathrm{k} \\Omega\n\\end{aligned}\n$$\n\nThe low-frequency gain is\n\n$$\n\\begin{aligned}\na_{0} & =\\frac{r_{\\pi}}{R_{s i g}+r_{b}+r_{\\pi}}\\left(-g_{m} R_{2}\\right)=\\frac{5.2}{1+0.2+5.2}(-4.55 / 0.026) \\\\\n& \\cong 0.81 \\times(-175)=-142 \\mathrm{~V} / \\mathrm{V}\n\\end{aligned}\n$$\n\nUsing Eq. (6.12b), we obtain\n\n$$\nC_{\\pi}=\\frac{g_{m}}{2 \\pi f_{T}}-C_{\\mu}=\\frac{1 / 26}{2 \\pi \\times 500 \\times 10^{6}}-0.5 \\times 10^{-12} \\cong 12 \\mathrm{pF}\n$$\n\nThe Miller capacitance is\n\n$$\nC_{M}=C_{\\mu}\\left[1+g_{m}\\left(R_{C} / / r_{o}\\right)\\right]=0.5 \\times 10^{-12}[1+175]=88 \\mathrm{pF}\n$$\n\nindicating a Miller multiplier of 176. The total capacitance is thus\n\n$$\nC_{t}=C_{\\pi}+C_{M}=12+88=100 \\mathrm{pF}\n$$\n\nClearly, the Miller capacitance plays a predominant role in this amplifier. Along with $R_{1}$, $C_{t}$ establishes a pole frequency at\n\n$$\nf_{p}=\\frac{1}{2 \\pi R_{1} C_{t}}=\\frac{1}{2 \\pi \\times 975 \\times 100 \\times 10^{-12}}=1.63 \\mathrm{MHz}\n$$\n\nThe gain-bandwidth product is\n\n$$\n\\text { GBP }=\\left|a_{0}\\right| \\times f_{p}=142 \\times 1.63 \\cong 230 \\mathrm{MHz}\n$$\n\n(b) According to Eq. (6.29), the current fed forward via $C_{\\mu}$ is maximized at the upper limit of the frequency band of interest, where\n\n$$\nI_{f}\\left(j f_{p}\\right) \\cong j 2 \\pi f_{p} C_{M} V_{\\pi}=j 2 \\pi \\times 1.63 \\times 10^{6} \\times 88 \\times 10^{-12} V_{\\pi}=j V_{\\pi} /(1110 \\Omega)\n$$\n\nConversely, the current sourced by the dependent source is\n\n$$\ng_{m} V_{\\pi}=V_{\\pi} /(26 \\Omega)\n$$\n\nThe ratio of these currents is thus\n\n$$\n\\frac{\\left|I_{f}\\left(j f_{p}\\right)\\right|}{\\left|g_{m} V_{\\pi}\\right|}=\\frac{26}{1110} \\ll 1\n$$\n\nThis verifies the validity of the approximation $V_{o} \\cong-g_{m} R_{2} V_{\\pi}$ for the BJT.\n\nRepeat Example 6.6 for the CS amplifier of Fig. 6.15. Assume the MOSFET has $k=8 \\mathrm{~mA} / \\mathrm{V}^{2}, \\lambda=1 /(50 \\mathrm{~V})$, and $C_{g d}=0.1 \\mathrm{pF}$, and is biased at $I_{D}=1 \\mathrm{~mA}$, where it exhibits $f_{T}=500 \\mathrm{MHz}$. Additionally, let $R_{s i g}=10 \\mathrm{k} \\Omega$ and $R_{D}=5 \\mathrm{k} \\Omega$.\n\n#### Solution\n\n(a) Following standard procedures, we find $g_{m}=4 \\mathrm{~mA} / \\mathrm{V}$ and $r_{o}=50 \\mathrm{k} \\Omega$, leading to a low-frequency gain of\n\n$$\na_{0}=-g_{m}\\left(R_{D} / / r_{o}\\right)=-4(5 / / 50)=-4 \\times 4.55=-18.2 \\mathrm{~V} / \\mathrm{V}\n$$\n\nUsing Eq. (6.24b), we get\n\n$$\nC_{g s}=\\frac{g_{m}}{2 \\pi f_{T}}-C_{g d}=\\frac{4 \\times 10^{-3}}{2 \\pi 500 \\times 10^{6}}-0.1 \\times 10^{-12} \\cong 1.17 \\mathrm{pF}\n$$\n\nThe Miller capacitance is\n\n$$\nC_{M}=C_{g d}\\left[1+g_{m}\\left(R_{D} / / r_{o}\\right)\\right]=0.1 \\times 10^{-12}[1+18.2] \\cong 1.92 \\mathrm{pF}\n$$\n\nindicating a Miller multiplier of 19.2. (This multiplier is generally lower in FETs than in BJTs due to the notably lower $g_{m}$ of FETs.) The total capacitance is thus\n\n$$\nC_{t}=C_{g s}+C_{M}=1.17+1.92=3.09 \\mathrm{pF}\n$$\n\nshowing that the Miller capacitance also plays a predominant role in this amplifier. The resistance perceived by $C_{t}$ is now $R_{s i g}$. Together, they determine a pole frequency at\n\n$$\nf_{p}=\\frac{1}{2 \\pi R_{s i g"
},
{
    "text": "The circuit depicted in Fig. 6.16 undergoes simplification to Fig 6.19a due to the Miller effect. We can merge the two parallel capacitances into a single equivalent capacitance, \\( C_t \\), which is given by\n\n\\[\nC_t = C_1 + C_M \\tag{6.31}\n\\]\n\nThis simplification leads to an even more straightforward circuit in Fig. 6.19b. By employing the AC voltage divider formula, we obtain the output voltage \\( V_o \\) as\n\n\\[\nV_o = -g_m V_1 R_2 = -g_m R_2 \\frac{1/s C_t}{R_1 + 1/s C_t} V_i = \\frac{-g_m R_2}{1 + s R_1 C_t} V_i\n\\]\n\nHence, the voltage gain of the circuit is expressed as\n\n\\[\na(s) = \\frac{V_o}{V_i} = \\frac{-g_m R_2}{1 + s R_1 C_t} \\tag{6.32}\n\\]\n\nThe value of \\( s \\) that causes the denominator to zero out, leading to \\( a(s) \\) increasing without bound, is known as a pole. This value is\n\n\\[\ns = -\\frac{1}{R_1 C_t} \\tag{6.33}\n\\]\n\nThis indicates a real and negative pole. Substituting \\( s \\rightarrow j \\omega \\) into Eq. (6.32) yields the frequency response, which can be expressed in the form of Eq. (6A.1) from Appendix 6A as\n\n\\[\na(j \\omega) = \\frac{a_0}{1 + j \\omega / \\omega_p} \\tag{6.34}\n\\]\n\nwhere\n\n\\[\na_0 = -g_m R_2 \\tag{6.35a}\n\\]\n\nis the gain at low frequencies, and\n\n\\[\n\\omega_p = \\frac{1}{R_1 C_t} \\tag{6.35b}\n\\]\n\nis referred to as the pole frequency.\n\nThe circuit diagrams provided describe a voltage amplifier with various components such as voltage sources, resistors, capacitors, and voltage-controlled current sources. The configurations are used to analyze the amplifier's frequency response and gain.\n\nFigure 6.20 presents a Bode plot illustrating the magnitude gain of the circuit against frequency. The plot is on a logarithmic scale, with the frequency on the x-axis and the magnitude gain in decibels on the y-axis. It shows a constant gain at low frequencies, a break point at the pole frequency \\( \\omega_p \\), and a roll-off of -20 dB/decade at higher frequencies, characteristic of a first-order low-pass filter.\n\nThe physical insight into the frequency response is gained by considering the AC voltage divider formed by \\( C_t \\) and \\( R_1 \\). The impedance of \\( C_t \\) is \\( Z_t(j \\omega) = 1/(j \\omega C_t) \\), and depending on the magnitude of \\( Z_t \\) relative to \\( R_1 \\), we can distinguish between low-frequency and high-frequency behaviors.\n\nAt low frequencies, \\( Z_t \\) is much larger than \\( R_1 \\), making \\( C_t \\) behave like an open circuit, resulting in \\( V_1 \\approx V_i \\) and \\( |a| \\approx a_0 \\). At high frequencies, \\( Z_t \\) is much smaller than \\( R_1 \\), making \\( C_t \\) behave like a short circuit, causing \\( V_1 \\rightarrow 0 \\) and \\( |a| \\) to decrease with frequency.\n\nThe pole frequency \\( \\omega_p \\) is where the impedance of \\( C_t \\) equals \\( R_1 \\). This frequency is significant as it marks the transition between the two behaviors and is also known as the corner, cutoff, or break frequency. At \\( \\omega = \\omega_p \\), the gain drops to \\( 1/\\sqrt{2} \\) of its low-frequency value, corresponding to a -3 dB point. Since the power of an AC signal is proportional to the square of its magnitude, \\( \\omega_p \\) is also called the half-power frequency. The gain-bandwidth product is given by\n\n\\[\n\\text{GBP} = |a_0| \\times f_p \\tag{6.37}\n\\]\n\nApplying these concepts to specific circuits, such as the common-emitter (CE) and common-source (CS) amplifiers, we can calculate the low-frequency gain and pole frequency. The examples provided demonstrate the calculations and validate the Miller approximation for both BJT and MOSFET amplifiers."
},
{
    "text": "Owing to the Miller effect, the circuit depicted in Fig. 6.16 can be simplified to that shown in Fig 6.19a. Specifically, the two parallel capacitances can be combined into a single equivalent capacitance $C_{t}$,\n\n$$\n\\begin{equation*}\nC_{t}=C_{1}+C_{M} \\tag{6.31}\n\\end{equation*}\n$$\n\nwhich allows us to work with the even simpler circuit of Fig. 6.19b. Utilizing the alternating current (ac) voltage divider formula,\n\n$$\nV_{o}=-g_{m} V_{1} R_{2}=-g_{m} R_{2} \\frac{1 / s C_{t}}{R_{1}+1 / s C_{t}} V_{i}=\\frac{-g_{m} R_{2}}{1+s R_{1} C_{t}} V_{i}\n$$\n\nthe voltage gain of the circuit is determined as\n\n$$\n\\begin{equation*}\na(s)=\\frac{V_{o}}{V_{i}}=\\frac{-g_{m} R_{2}}{1+s R_{1} C_{t}} \\tag{6.32}\n\\end{equation*}\n$$\n\nThe value of $s$ that causes the denominator to vanish, leading to $a(s)$ approaching infinity, is known as a pole. This value is\n\n$$\n\\begin{equation*}\ns=-\\frac{1}{R_{1} C_{t}} \\tag{6.33}\n\\end{equation*}\n$$\n\nindicating a real and negative pole. Substituting $s \\rightarrow j \\omega$ into Eq. (6.32) yields the frequency response, which we express in the standard form of Eq. (6A.1) in Appendix 6A as\n\n$$\n\\begin{equation*}\na(j \\omega)=\\frac{a_{0}}{1+j \\omega / \\omega_{p}} \\tag{6.34}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\na_{0}=-g_{m} R_{2} \\tag{6.35a}\n\\end{equation*}\n$$\n\nis the gain at low frequencies, aptly called the low-frequency gain, and\n\n$$\n\\begin{equation*}\n\\omega_{p}=\\frac{1}{R_{1} C_{t}} \\tag{6.35b}\n\\end{equation*}\n$$\n\nis referred to as the pole frequency.\n\nThe circuit diagrams (a) and (b) illustrate a voltage amplifier with a voltage-controlled current source, two capacitors, and two resistors. The input voltage source Vi is connected to a resistor R1 and capacitors C1 and CM. The output is measured across the resistor R2, which is connected to the voltage-controlled current source gmV1. In the simplified circuit (b), capacitor Ct is connected from V1 to ground.\n\nFIGURE 6.19 depicts the equivalent-circuit simplifications using the Miller approximation.\n\nThe Bode plot in FIGURE 6.20 represents the magnitude gain of a circuit as a function of frequency. The graph is plotted on a logarithmic scale, with the x-axis labeled as frequency () in decades and the y-axis labeled as magnitude |a(j)| in decibels (dB).\n\nThe plot starts with a flat region at low frequencies where the gain is constant at |a| dB. As frequency increases, the plot exhibits a break point at a specific frequency, labeled as . Beyond this break point, the gain begins to decrease at a rate of -20 dB/decade, indicating a first-order low-pass filter behavior.\n\nThe initial gain is denoted as |a|. The break point () marks the cutoff frequency, where the gain drops by 3 dB from its initial value. After , the slope of the plot is -20 dB/decade, characteristic of a single-pole roll-off.\n\nThe Bode plot in Fig. 6.20 (see also Bode plots in Appendix 6A) provides a visual representation of the frequency response. By analyzing the circuit in Fig. 6.19b, we observe that the frequency response is governed by the ac voltage divider formed by $C_{t}$ with $R_{1}$, the equivalent resistance seen by $C_{t}$ itself. The impedance presented by $C_{t}$ is $Z_{t}(j \\omega)=1 /\\left(j \\omega C_{t}\\right)$, and depending on how its magnitude $\\left|Z_{t}(j \\omega)\\right|=1 /\\left(\\omega C_{t}\\right)$ compares with $R_{1}$, we have three significant cases:\n\n- At low frequencies, $\\left|Z_{t}(\\omega)\\right| \\gg R_{1}$, indicating that $C_{t}$ approximates an open circuit compared to $R_{1}$. Consequently, $V_{1} \\rightarrow V_{i}$, and thus $|a| \\rightarrow a_{0}$. This is the situation we have been dealing with before embarking upon the present chapter.\n- At high frequencies, $\\left|Z_{t}(\\omega)\\right| \\ll R_{1}$, indicating that $C_{t}$ now approximates a short circuit compared to $R_{1}$. Consequently, $V_{1} \\rightarrow 0$, and $|a|$ rolls off with frequency, as shown.\n- The borderline between the two limiting cases occurs when $\\omega=\\omega_{p}$. Rewriting Eq. (6.35b) as $1 /\\left(\\omega_{p} C_{t}\\right)=R_{1}$, we see that at this frequency we have\n\n$$\n\\begin{equation*}\n\\left|Z_{t}\\left(\\omega_{p}\\right)\\right|=R_{1} \\tag{6.36}\n\\end{equation*}\n$$\n\nWe now have a physical interpretation for $\\omega_{p}$: this is the frequency at which the capacitance's impedance equals, in magnitude, the equivalent resistance seen by the capacitance itself. In the MOS case of Fig. 6.15 this resistance is simply $R_{sig}$, but in the bipolar case of Fig. 6.14 it is $r_{\\pi} /\\left(R_{sig}+r_{b}\\right)$. A circuit designer will always use physical insight to check the results of mathematical derivations as well as to develop a feel for the workings of the circuit at hand.\n\nBecause of the gain roll-off with frequency, an amplifier effectively acts as a lowpass filter. This is why $\\omega_{p}$ is also known as the corner frequency, cutoff frequency, or break frequency. At $\\omega=\\omega_{p}$, $\\left|V_{1}\\right|$ is reduced to $1 / \\sqrt{2}(=0.707$, or $-3-\\mathrm{dB})$ of its low-frequency value, so $\\omega_{p}$ is also called the $-3-dB$ frequency. Since the power of an ac signal is proportional to the square of its magnitude, another name for $\\omega_{p}$ is half-power frequency. The gain-bandwidth product is\n\n$$\n\\begin{equation*}\n\\mathrm{GBP}=\\left|a_{0}\\right| \\times f_{p} \\tag{6.37}\n\\end{equation*}\n$$\n\nWe are now ready to apply our results to the specific circuits of Figs. 6.14 and 6.15. Turning first to the common-emitter (CE) case, we combine Eqs. (6.27) and (6.35) to write\n\n$$\n\\begin{equation*}\na_{0(\\mathrm{BJT})}=\\left.\\frac{V_{o}}{V_{sig}}\\right|_{\\omega \\rightarrow 0}=\\frac{r_{\\pi}}{R_{sig}+r_{b}+r_{\\pi}}\\left[-g_{m}\\left(R_{C} / / r_{o}\\right)\\right] \\tag{6.38a}\n\\end{equation*}\n$$\n\n$$\n\\begin{equation*}\n\\omega_{p(\\mathrm{BJT})}=\\frac{1}{\\left\\{r_{\\pi} / /\\left(R_{sig}+r_{b}\\right)\\right\\} \\times\\left\\{C_{\\pi}+C_{\\mu}\\left[1+g_{m}\\left(R_{C} / / r_{o}\\right)\\right]\\right\\}} \\tag{6.38b}\n\\end{equation*}\n$$\n\nTurning next to the common-source (CS) case, we combine Eqs. (6.28) and (6.35) to write\n\n$$\n\\begin{gather*}\na_{0(\\mathrm{FET})}=\\left.\\frac{V_{o}}{V_{sig}}\\right|_{\\omega \\rightarrow 0}=-g_{m}\\left(R_{D} / / r_{o}\\right)  \\tag{6.39a}\\\\\n\\omega_{p(\\mathrm{FET})}=\\frac{1}{R_{sig}\\left\\{C_{g s}+C_{g d}\\left[1+g_{m}\\left(R_{D} / / r_{o}\\right)\\right]\\right\\}} \\tag{6.39b}\n\\end{gather*}\n$$\n\nTo gain a better understanding, let us consider some actual examples.\n\nEXAMPLE 6.6 Consider the CE amplifier of Fig. 6.14 using a BJT with $\\beta_{0}=200, V_{A}=50 \\mathrm{~V}, r_{b}=$ $200 \\Omega$, and $C_{\\mu}=0.5 \\mathrm{pF}$. The BJT is biased at $I_{C}=1 \\mathrm{~mA}$, where it exhibits $f_{T}=$ 500 MHz . Moreover, let $R_{sig}=1 \\mathrm{k} \\Omega$ and $R_{C}=5 \\mathrm{k} \\Omega$.\n(a) Estimate the amplifier's low-frequency gain as well as its $-3-\\mathrm{dB}$ frequency. What is the gain-bandwidth product of this amplifier?\n(b) Verify that loading of the output node by the feedback capacitance is negligible over the frequency range of interest $\\left(f \\leq f_{p}\\right)$, thus validating the Miller approximation.\n\n#### Solution\n\n(a) Proceeding as usual, we find $g_{m}=1 /(26 \\Omega), r_{\\pi}=5.2 \\mathrm{k} \\Omega$, and $r_{o}=50 \\mathrm{k} \\Omega$. Moreover,\n\n$$\n\\begin{aligned}\n& R_{1}=r_{\\pi} / /\\left(R_{sig}+r_{b}\\right)=5.2 / /(1+0.2)=0.975 \\mathrm{k} \\Omega \\\\\n& R_{2}=R_{C} / / r_{o}=5 / / 50=4.55 \\mathrm{k} \\Omega\n\\end{aligned}\n$$\n\nThe low-frequency gain is\n\n$$\n\\begin{aligned}\na_{0} & =\\frac{r_{\\pi}}{R_{sig}+r_{b}+r_{\\pi}}\\left(-g_{m} R_{2}\\right)=\\frac{5.2}{1+0.2+5.2}(-4.55 / 0.026) \\\\\n& \\cong 0.81 \\times(-175)=-142 \\mathrm{~V} / \\mathrm{V}\n\\end{aligned}\n$$\n\nBy Eq. (6.12b) we have\n\n$$\nC_{\\pi}=\\frac{g_{m}}{2 \\pi f_{T}}-C_{\\mu}=\\frac{1 / 26}{2 \\pi \\times 500 \\times 10^{6}}-0.5 \\times 10^{-12} \\cong 12 \\mathrm{pF}\n$$\n\nThe Miller capacitance is\n\n$$\nC_{M}=C_{\\mu}\\left[1+g_{m}\\left(R_{C} / / r_{o}\\right)\\right]=0.5 \\times 10^{-12}[1+175]=88 \\mathrm{pF}\n$$\n\nindicating a Miller multiplier of 176. The total capacitance is thus\n\n$$\nC_{t}=C_{\\pi}+C_{M}=12+88=100 \\mathrm{pF}\n$$\n\nClearly, the Miller capacitance plays a dominant role in this amplifier. Together, $R_{1}$ and $C_{t}$ create a pole frequency at\n\n$$\nf_{p}=\\frac{1}{2 \\pi R_{1} C_{t}}=\\frac{1}{2 \\pi \\times 975 \\times 100 \\times 10^{-12}}=1.63 \\mathrm{MHz}\n$$\n\nThe gain-bandwidth product is\n\n$$\n\\text { GBP }=\\left|a_{0}\\right| \\times f_{p}=142 \\times 1.63 \\cong 230 \\mathrm{MHz}\n$$\n\n(b) By Eq. (6.29), the current fed forward via $C_{\\mu}$ is maximized at the upper edge of the frequency band of interest, where\n\n$$\nI_{f}\\left(j f_{p}\\right) \\cong j 2 \\pi f_{p} C_{M} V_{\\pi}=j 2 \\pi \\times 1.63 \\times 10^{6} \\times 88 \\times 10^{-12} V_{\\pi}=j V_{\\pi} /(1110 \\Omega)\n$$\n\nOn the other hand, the current drawn by the dependent source is\n\n$$\ng_{m} V_{\\pi}=V_{\\pi} /(26 \\Omega)\n$$\n\nThe ratio of the two currents is thus\n\n$$\n\\frac{\\left|I_{f}\\left(j f_{p}\\right)\\right|}{\\left|g_{m} V_{\\pi}\\right|}=\\frac{26}{1110} \\ll 1\n$$\n\nThis confirms the validity of the approximation $V_{o} \\cong-g_{m} R_{2} V_{\\pi}$ for the BJT.\n\nRepeat Example 6.6, but for the CS amplifier of Fig. 6.15. Assume the MOSFET has $k=8 \\mathrm{~mA} / \\mathrm{V}^{2}, \\lambda=1 /(50 \\mathrm{~V})$, and $C_{g d}=0.1 \\mathrm{pF}$, and is biased at $I_{D}=1 \\mathrm{~mA}$, where it exhibits $f_{T}=500 \\mathrm{MHz}$. Moreover, let $R_{sig}=10 \\mathrm{k} \\Omega$ and $R_{D}=5 \\mathrm{k} \\Omega$.\n\n#### Solution\n\n(a) Proceeding as usual we find $g_{m}=4 \\mathrm{~mA} / \\mathrm{V}$ and $r_{o}=50 \\mathrm{k} \\Omega$, so the lowfrequency gain is\n\n$$\na_{0}=-g_{m}\\left(R_{D} / / r_{o}\\right)=-4(5 / / 50)=-4 \\times 4.55=-18.2 \\mathrm{~V} / \\mathrm{V}\n$$\n\nBy Eq. (6.24b) we have\n\n$$\nC_{g s}=\\frac{g_{m}}{2 \\pi f_{T}}-C_{g d}=\\frac{4 \\times 10^{-3}}{2 \\pi 500 \\times 10^{6}}-0.1 \\times 10^{-12} \\cong 1.17 \\mathrm{pF}\n$$\n\nThe Miller capacitance is\n\n$$\nC_{M}=C_{g d}\\left[1+g_{m}\\left(R_{D} / / r_{o}\\right)\\right]=0.1 \\times 10^{-12}[1+18.2] \\cong 1.92 \\mathrm{pF}\n$$\n\nindicating a Miller multiplier of 19.2. (In general, this multiplier is lower in FETs than in BJTs because a FET has notoriously a lower $g_{m}$.) The total capacitance is thus\n\n$$\nC_{t}=C_{g s}+C_{M}=1.17+1.92=3.09 \\mathrm{pF}\n$$\n\nso the Miller capacitance plays a dominant role also in this amplifier. The resistance seen by $C_{t}$ is now $R_{sig}$. Together, they create a pole frequency at\n\n$$\nf_{p}=\\frac{1}{2 \\pi R_{sig} C_{t}}=\\frac{1}{2 \\pi \\times 10^{4} \\times 3.09 \\times 10^{-12}}=5.15 \\mathrm{MHz}\n$$\n\nThe gain-bandwidth product is\n\n$$\n\\mathrm{GBP}=\\left|a_{0}\\right| \\times f_{p}=18.2 \\times 5.2 \\cong 94 \\mathrm{MHz}\n$$\n\n(b) By Eq. (6.29), the current fed forward via $C_{g d}$ at the upper edge of the frequency band of interest is\n\n$$\nI_{f}\\left(j f_{p}\\right) \\cong j 2 \\pi f_{p} C_{M} V_{g s}=j 2 \\pi \\times 5.2 \\times 10^{6} \\times 1.92 \\times 10^{-12} V_{g s}=j V_{g s} /(16 \\mathrm{k} \\Omega)\n$$\n\nwhereas the current drawn by the dependent source is\n\n$$\ng_{m} V_{g s}=V_{g s} /(0.25 \\mathrm{k} \\Omega)\n$$\n\nConsequently, the ratio of the two currents is\n\n$$\n\\frac{\\left|I_{f}\\left(j f_{p}\\right)\\right|}{\\left|g_{m} V_{g s}\\right|}=\\frac{0.25}{16} \\ll 1\n$$\n\nthus confirming the validity of the approximation $V_{o} \\cong-g_{m} R_{2} V_{g s}$ for the MOSFET."
},
{
    "text": "To evaluate the precision of the Miller approximation and gain deeper insights into the circuit's behavior, let's conduct an exact analysis of the small-signal circuit depicted in Fig. 6.16. While doing so, we'll also generalize the analysis by incorporating the output node capacitance $C_{2}$, as shown in Fig. 6.21. It is known that the collector of a monolithic BJT exhibits a collector-to-substrate capacitance $C_{s}$, and the drain of a FET exhibits a drain-to-body capacitance $C_{d b}$. Furthermore, in practical applications, the output node is often loaded by an external capacitance $C_{L}$. Therefore, generally, $C_{2}=C_{s}+C_{L}$ for BJTs and $C_{2}=C_{d b}+C_{L}$ for FETs.\n\nApplying Kirchhoff's Current Law (KCL) at the node to the left of $C_{f}$ yields\n\n$$\n\\frac{V_{i}-V_{1}}{R_{1}}=\\frac{V_{1}}{1 /\\left(s C_{1}\\right)}+\\frac{V_{1}-V_{o}}{1 /\\left(s C_{f}\\right)}\n$$\n\nimage_name:FIGURE 6.21\ndescription:\n[\nname: Vi, type: VoltageSource, value: Vi, ports: {Np: Vi, Nn: GND}\nname: R1, type: Resistor, value: R1, ports: {N1: Vi, N2: V1}\nname: C1, type: Capacitor, value: C1, ports: {Np: V1, Nn: GND}\nname: Cf, type: Capacitor, value: Cf, ports: {Np: V1, Nn: Vo}\nname: gmV1, type: VoltageControlledCurrentSource, value: gmV1, ports: {Np: Vo, Nn: GND}\nname: R2, type: Resistor, value: R2, ports: {N1: Vo, N2: GND}\nname: C2, type: Capacitor, value: C2, ports: {Np: Vo, Nn: GND}\n]\nextrainfo:The circuit is an AC small-signal model for analyzing common-emitter/common-source amplifiers with feedback capacitance Cf. It includes input voltage Vi, resistors R1 and R2, capacitors C1, Cf, and C2, and a voltage-controlled current source gmV1.\n\nFIGURE 6.21 AC circuit for a more precise analysis of CE/CS amplifiers.\n\nSimilarly, applying KCL at the node to the right of $C_{f}$ results in\n\n$$\n\\frac{V_{1}-V_{o}}{1 / s C_{f}}=g_{m} V_{1}+\\frac{V_{o}}{R_{2}}+\\frac{V_{o}}{1 / s C_{2}}\n$$\n\nBy eliminating $V_{1}$ and solving for the ratio $V_{o} / V_{i}$, we obtain, after some algebraic manipulation,\n\n$$\n\\begin{align*}\na(s) & =\\frac{V_{o}}{V_{i}} \\\\\n& =\\frac{\\left(-g_{m} R_{2}\\right) \\times\\left(1-s C_{f} / g_{m}\\right)}{1+s\\left\\{R_{1}\\left[C_{1}+C_{f}\\left(1+g_{m} R_{2}\\right)\\right]+R_{2}\\left(C_{f}+C_{2}\\right)\\right\\}+s^{2} R_{1} R_{2}\\left(C_{1} C_{f}+C_{1} C_{2}+C_{f} C_{2}\\right)} \\tag{6.40}\n\\end{align*}\n$$\n\nThe denominator is a quadratic polynomial in $s$, so $a(s)$ has two poles. Denoting the corresponding pole frequencies as $\\omega_{1}$ and $\\omega_{2}$, we express the gain more succinctly in the standard form of Eq. (6A.1) in the Appendix,\n\n$$\n\\begin{equation*}\na(s)=a_{0} \\frac{1-s / \\omega_{0}}{\\left(1+s / \\omega_{1}\\right)\\left(1+s / \\omega_{2}\\right)} \\tag{6.41}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\na_{0}=-g_{m} R_{2} \\tag{6.42}\n\\end{equation*}\n$$\n\nis the well-known low-frequency gain, and\n\n$$\n\\begin{equation*}\n\\omega_{0}=\\frac{g_{m}}{C_{f}} \\tag{6.43}\n\\end{equation*}\n$$\n\nis the zero frequency of $a(s)$. Physically, at this frequency, the current fed forward through $C_{f}$ equals the current drawn by the dependent source, resulting in zero net current through the parallel combination of $R_{2}$ and $C_{2}$. Consequently, $V_{o}$ drops to zero, implying a gain of zero at this frequency. As a physical check, when $V_{o}=0$, we have $I_{f}=\\left(V_{\\pi}-0\\right) /\\left(1 / s C_{f}\\right)=s C_{f} V_{\\pi}$, so imposing $s C_{f} V_{\\pi}=g_{m} V_{\\pi}$ yields $s=g_{m} / C_{f}$. In the $s$ plane, this zero is located on the positive real axis. Note that for $\\omega>\\omega_{0}$, the current through $C_{f}$ exceeds that of the dependent source, indicating a reversal of gain polarity. This provides a physical justification for the negative sign in the numerator of Eq. (6.41); combined with the negative sign of Eq. (6.42), it causes the gain to become positive for $\\omega>\\omega_{0}$. By Eqs. (6.12) and (6.24), $\\omega_{0} \\gg \\omega_{T}$.\n\nWe now aim to derive expressions for the pole frequencies $\\omega_{1}$ and $\\omega_{2}$. Based on the Miller approximation, we expect $\\omega_{1}$ to be close to $\\omega_{p}$, and $\\omega_{2}$ to be much higher than $\\omega_{p}$. Therefore, expanding the denominator of Eq. (6.41) and anticipating $\\omega_{2} \\gg \\omega_{1}$, we write\n\n$$\n\\begin{equation*}\na(s)=a_{0} \\frac{1-s / \\omega_{0}}{1+s\\left(1 / \\omega_{1}+1 / \\omega_{2}\\right)+s^{2} /\\left(\\omega_{1} \\omega_{2}\\right)} \\cong a_{0} \\frac{1-s / \\omega_{0}}{1+s / \\omega_{1}+s^{2} /\\left(\\omega_{1} \\omega_{2}\\right)} \\tag{6.44}\n\\end{equation*}\n$$\n\nBy equating the coefficients of $s$ in the denominators of Eqs. (6.40) and (6.44), we readily find\n\n$$\n\\begin{equation*}\n\\omega_{1}=\\frac{1}{R_{1}\\left[C_{1}+C_{f}\\left(1+g_{m} R_{2}+R_{2} / R_{1}\\right)\\right]+R_{2} C_{2}} \\tag{6.45}\n\\end{equation*}\n$$\n\nWe observe that in the limit $C_{2} \\rightarrow 0$, this expression differs from the earlier derived $\\omega_{p}$ only by the denominator term $R_{2} / R_{1}$. However, $R_{2} / R_{1} \\ll g_{m} R_{2}$, so $\\omega_{1} \\cong \\omega_{p}$, confirming the Miller approximation's accuracy, especially considering its quicker derivation. Similarly, equating the coefficients of $s^{2}$ in the denominators of Eqs. (6.40) and (6.44),\n\n$$\n\\begin{equation*}\n\\omega_{2}=\\frac{1}{R_{1} R_{2}\\left(C_{1} C_{f}+C_{1} C_{2}+C_{f} C_{2}\\right) \\omega_{1}} \\tag{6.46}\n\\end{equation*}\n$$\n\nSubsequent examples will confirm that $\\omega_{2} \\gg \\omega_{1}$, indicating that the frequency response of Fig. 6.20, though approximate, provides a good indication of the actual response over the relevant frequency range.\n\nEXAMPLE 6.8 (a) Determine $f_{0}, f_{1}$, and $f_{2}$ for the CE amplifier of Example 6.6. Compare with the example and comment.\n(b) Repeat, but include a substrate capacitance $C_{s}=1 \\mathrm{pF}$.\n(c) Verify with PSpice.\n\n#### Solution\n\n(a) For the BJT, Eq. (6.43) predicts a zero frequency at\n\n$$\nf_{0}=\\frac{g_{m}}{2 \\pi C_{\\mu}}=\\frac{1 / 2 \\pi}{26 \\times 0.5 \\times 10^{-12}} \\cong 12 \\mathrm{GHz}\n$$\n\nMoreover, with $R_{1}=975 \\Omega, R_{2}=4.55 \\mathrm{k} \\Omega$, and $C_{2}=0$, Eqs. (6.45) and (6.46) predict pole frequencies at\n\n$$\n\\begin{aligned}\nf_{1} & =\\frac{1 / 2 \\pi}{R_{1}\\left[C_{\\pi}+C_{\\mu}\\left(1+g_{m} R_{2}+R_{2} / R_{1}\\right)\\right]} \\\\\n& =\\frac{1 / 2 \\pi}{975[12+0.5(1+175+4.55 / 0.975)] 10^{-12}}=1.56 \\mathrm{MHz}\n\\end{aligned}\n$$\n\nand\n\n$$\n\\begin{aligned}\nf_{2} & =\\frac{1 /(2 \\pi)^{2}}{R_{1} R_{2} C_{\\pi} C_{\\mu} f_{1}} \\\\\n& =\\frac{1 /(2 \\pi)^{2}}{975 \\times 4.55 \\times 10^{3} \\times 12 \\times 10^{-12} \\times 0.5 \\times 10^{-12} \\times 1.56 \\times 10^{6}} \\\\\n& \\cong 600 \\mathrm{MHz}\n\\end{aligned}\n$$\n\nBoth $f_{0}$ and $f_{2}$ are well above $f_{1}$, so they are negligible in this example. The first pole frequency $\\left(f_{1}=1.56 \\mathrm{MHz}\\right)$ is slightly lower than that predicted by the Miller approximation $\\left(f_{p}=1.63 \\mathrm{MHz}\\right)$, indicating that the Miller estimate is sufficient for practical purposes.\n(b) Recalculating with $C_{2}=C_{s}=1 \\mathrm{pF}$, we get $f_{0}=12 \\mathrm{GHz}, f_{1}=1.55 \\mathrm{MHz}$, and $f_{2} \\cong 1.3 \\mathrm{GHz}$. The impact of $C_{s}$ is minimal in this example.\nimage_name:Figure 6.22\ndescription:\n[\nname: Vsig, type: VoltageSource, value: 1 Vac, 0 Vdc, ports: {Np: Vsig, Nn: GND}\nname: Rsig, type: Resistor, value: 1.0 k, ports: {N1: Vsig, N2: X1}\nname: rb, type: Resistor, value: 200 , ports: {N1: X1, N2: V2}\nname: r, type: Resistor, value: 5.2 k, ports: {N1: V2, N2: GND}\nname: C, type: Capacitor, value: 12 pF, ports: {Np: V2, Nn: GND}\nname: C, type: Capacitor, value: 0.5 pF, ports: {Np: V2, Nn: Vo}\nname: g_m, type: VoltageControlledCurrentSource, value: 38.5 mA/V, ports: {Np: V2, Nn: Vo}\nname: ro, type: Resistor, value: 50 k, ports: {N1: Vo, N2: GND}\nname: Cs, type: Capacitor, value: 1 pF, ports: {Np: Vo, Nn: GND}\nname: RC, type: Resistor, value: 5 k, ports: {N1: Vo, N2: GND}\n]\nextrainfo:The circuit is a Common Emitter (CE) amplifier with a gain of approximately 43.057 dB or 142 V/V. The -3 dB frequency is around 1.522 MHz.\n\nFIGURE 6.22 PSpice circuit to display the gain of the CE amplifier of Example 6.8.\nimage_name:Figure 6.23\ndescription:The graph in Figure 6.23 is a Bode plot representing the gain of a Common Emitter (CE) amplifier. The x-axis is labeled 'Frequency f (Hz)' and is plotted on a logarithmic scale ranging from $10^4$ to $10^9$ Hz. The y-axis is labeled 'Gain a (dB)' and spans from -20 dB to 40 dB.\n\nThe plot shows two curves representing the gain for different values of the capacitor $C_s$: one for $C_s = 0$ and another for $C_s = 1$ pF. Both curves start with a high gain of approximately 43 dB at lower frequencies.\n\nThe gain remains relatively constant up to around $10^6$ Hz, after which it begins to decrease. The -3 dB cutoff frequency, where the gain drops by 3 dB from its maximum value, is indicated at approximately 1.522 MHz (or $1.522 \\times 10^6$ Hz).\n\nFor frequencies beyond $10^6$ Hz, the gain decreases more rapidly, with the $C_s = 1$ pF curve showing a slightly faster decline compared to the $C_s = 0$ curve. This indicates the minimal role played by the capacitor $C_s$ in affecting the amplifier's gain at these frequencies.\n\nThe plot confirms the amplifier's gain of approximately 43.057 dB or 142 V/V as calculated and discussed in the context. The annotations highlight the different curves for the two capacitor values, emphasizing the slight impact of $C_s$ on the gain at higher frequencies.\n\nFIGURE 6.23 Gain plot of the circuit of Fig. 6.22.\n(c) Using the PSpice circuit of Fig. 6.22, we obtain the gain plot of Fig. 6.23. Using the cursor facility, we find $\\left|a_{0}\\right|=43.057 \\mathrm{~dB}$, or $142 \\mathrm{~V} / \\mathrm{V}$, and $f_{-3 \\mathrm{~dB}}=$ 1.522 MHz, in agreement with the calculations. The plot confirms the minimal impact of $C_{s}$ in this example.\n\nRemark: An IC designer would typically simulate an amplifier using a PSpice model for the transistor. However, for educational purposes, it is more convenient to use the simplified model depicted in Fig. 6.22.\n\n#### Exercise 6.3\n\nFind $f_{0}, f_{1}$, and $f_{2}$ for the CS amplifier of Example 6.7, if $C_{d b}=0.1 \\mathrm{pF}$. Compare with the results obtained there and comment.\nAns. $f_{0}=6.4 \\mathrm{GHz}, f_{1}=5.0 \\mathrm{MHz}$, and $f_{2} \\cong 1 \\mathrm{GHz} ; f_{p}=5.15 \\mathrm{MHz}\\left(\\cong f_{1}\\right)$."
},
{
    "text": "To evaluate the accuracy of the Miller approximation and gain deeper insight into circuit behavior, let's conduct an exact analysis of the small-signal circuit depicted in Fig. 6.16. While doing so, we'll also generalize by incorporating the output node capacitance $C_{2}$, as shown in Fig. 6.21. It is known that the collector of a monolithic BJT exhibits a collector-to-substrate capacitance $C_{s}$, and the drain of a FET exhibits a drain-to-body capacitance $C_{d b}$. Furthermore, in practical applications, the output node is often loaded by an external capacitance $C_{L}$. Therefore, generally, $C_{2}=C_{s}+C_{L}$ for BJTs and $C_{2}=C_{d b}+C_{L}$ for FETs.\n\nApplying KCL at the node to the left of $C_{f}$ yields\n\n$$\n\\frac{V_{i}-V_{1}}{R_{1}}=\\frac{V_{1}}{1 /\\left(s C_{1}\\right)}+\\frac{V_{1}-V_{o}}{1 /\\left(s C_{f}\\right)}\n$$\n\nimage_name:FIGURE 6.21\ndescription:\n[\nname: Vi, type: VoltageSource, value: Vi, ports: {Np: Vi, Nn: GND}\nname: R1, type: Resistor, value: R1, ports: {N1: Vi, N2: V1}\nname: C1, type: Capacitor, value: C1, ports: {Np: V1, Nn: GND}\nname: Cf, type: Capacitor, value: Cf, ports: {Np: V1, Nn: Vo}\nname: gmV1, type: VoltageControlledCurrentSource, value: gmV1, ports: {Np: Vo, Nn: GND}\nname: R2, type: Resistor, value: R2, ports: {N1: Vo, N2: GND}\nname: C2, type: Capacitor, value: C2, ports: {Np: Vo, Nn: GND}\n]\nextrainfo:The circuit is an AC small-signal model for analyzing common-emitter/common-source amplifiers with feedback capacitance Cf. It includes input voltage Vi, resistors R1 and R2, capacitors C1, Cf, and C2, and a voltage-controlled current source gmV1.\n\nFIGURE 6.21 Ac circuit for a more precise analysis of CE/CS amplifiers.\n\nSimilarly, KCL at the node to the right of $C_{f}$ gives\n\n$$\n\\frac{V_{1}-V_{o}}{1 / s C_{f}}=g_{m} V_{1}+\\frac{V_{o}}{R_{2}}+\\frac{V_{o}}{1 / s C_{2}}\n$$\n\nBy eliminating $V_{1}$ and solving for the ratio $V_{o} / V_{i}$, we obtain, after some algebraic manipulation,\n\n$$\n\\begin{align*}\na(s) & =\\frac{V_{o}}{V_{i}} \\\\\n& =\\frac{\\left(-g_{m} R_{2}\\right) \\times\\left(1-s C_{f} / g_{m}\\right)}{1+s\\left\\{R_{1}\\left[C_{1}+C_{f}\\left(1+g_{m} R_{2}\\right)\\right]+R_{2}\\left(C_{f}+C_{2}\\right)\\right\\}+s^{2} R_{1} R_{2}\\left(C_{1} C_{f}+C_{1} C_{2}+C_{f} C_{2}\\right)} \\tag{6.40}\n\\end{align*}\n$$\n\nThe denominator is a quadratic polynomial in $s$, so $a(s)$ has two poles. Denoting the corresponding pole frequencies as $\\omega_{1}$ and $\\omega_{2}$, we express the gain in the standard form of Eq. (6A.1) in the Appendix,\n\n$$\n\\begin{equation*}\na(s)=a_{0} \\frac{1-s / \\omega_{0}}{\\left(1+s / \\omega_{1}\\right)\\left(1+s / \\omega_{2}\\right)} \\tag{6.41}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\na_{0}=-g_{m} R_{2} \\tag{6.42}\n\\end{equation*}\n$$\n\nis the well-known low-frequency gain, and\n\n$$\n\\begin{equation*}\n\\omega_{0}=\\frac{g_{m}}{C_{f}} \\tag{6.43}\n\\end{equation*}\n$$\n\nis the zero frequency of $a(s)$. Physically, at this frequency, the current fed forward via $C_{f}$ equals the current drawn by the dependent source, resulting in zero net current through the parallel combination of $R_{2}$ and $C_{2}$. Consequently, $V_{o}$ drops to zero, implying a gain of zero at this frequency. As a physical check, when $V_{o}=0$, we have $I_{f}=\\left(V_{\\pi}-0\\right) /\\left(1 / s C_{f}\\right)=s C_{f} V_{\\pi}$, so imposing $s C_{f} V_{\\pi}=g_{m} V_{\\pi}$ yields $s=g_{m} / C_{f}$. In the $s$ plane, this zero lies on the positive real axis. Note that for $\\omega>\\omega_{0}$, the current through $C_{f}$ exceeds that of the dependent source, indicating gain-polarity reversal. This justifies the negative sign in the numerator of Eq. (6.41); combined with the negative sign of Eq. (6.42), it results in a positive gain for $\\omega>\\omega_{0}$. By Eqs. (6.12) and (6.24), $\\omega_{0} \\gg \\omega_{T}$.\n\nWe now aim to derive expressions for the pole frequencies $\\omega_{1}$ and $\\omega_{2}$. Based on the Miller approximation, we expect $\\omega_{1}$ to be near $\\omega_{p}$, and $\\omega_{2}$ to be much higher than $\\omega_{p}$. Thus, expanding the denominator of Eq. (6.41) and anticipating $\\omega_{2} \\gg \\omega_{1}$, we write\n\n$$\n\\begin{equation*}\na(s)=a_{0} \\frac{1-s / \\omega_{0}}{1+s\\left(1 / \\omega_{1}+1 / \\omega_{2}\\right)+s^{2} /\\left(\\omega_{1} \\omega_{2}\\right)} \\cong a_{0} \\frac{1-s / \\omega_{0}}{1+s / \\omega_{1}+s^{2} /\\left(\\omega_{1} \\omega_{2}\\right)} \\tag{6.44}\n\\end{equation*}\n$$\n\nEquating the coefficients of $s$ in the denominators of Eqs. (6.40) and (6.44), we find\n\n$$\n\\begin{equation*}\n\\omega_{1}=\\frac{1}{R_{1}\\left[C_{1}+C_{f}\\left(1+g_{m} R_{2}+R_{2} / R_{1}\\right)\\right]+R_{2} C_{2}} \\tag{6.45}\n\\end{equation*}\n$$\n\nWe observe that in the limit $C_{2} \\rightarrow 0$, this expression differs from the earlier-derived $\\omega_{p}$ only by the term $R_{2} / R_{1}$ in the denominator. However, $R_{2} / R_{1} \\ll g_{m} R_{2}$, so $\\omega_{1} \\cong \\omega_{p}$, confirming the Miller approximation's accuracy, especially considering its quicker derivation. Similarly, equating the coefficients of $s^{2}$ in the denominators of Eqs. (6.40) and (6.44),\n\n$$\n\\begin{equation*}\n\\omega_{2}=\\frac{1}{R_{1} R_{2}\\left(C_{1} C_{f}+C_{1} C_{2}+C_{f} C_{2}\\right) \\omega_{1}} \\tag{6.46}\n\\end{equation*}\n$$\n\nSubsequent examples will confirm that $\\omega_{2} \\gg \\omega_{1}$, indicating that the frequency response of Fig. 6.20, though approximate, provides a good indication of the actual response over the relevant frequency range.\n\nEXAMPLE 6.8 (a) Determine $f_{0}, f_{1}$, and $f_{2}$ for the CE amplifier of Example 6.6. Compare with the example and comment.\n(b) Repeat, but include a substrate capacitance $C_{s}=1 \\mathrm{pF}$.\n(c) Verify with PSpice.\n\n#### Solution\n\n(a) For the BJT, Eq. (6.43) predicts a zero frequency at\n\n$$\nf_{0}=\\frac{g_{m}}{2 \\pi C_{\\mu}}=\\frac{1 / 2 \\pi}{26 \\times 0.5 \\times 10^{-12}} \\cong 12 \\mathrm{GHz}\n$$\n\nMoreover, with $R_{1}=975 \\Omega, R_{2}=4.55 \\mathrm{k} \\Omega$, and $C_{2}=0$, Eqs. (6.45) and (6.46) predict pole frequencies at\n\n$$\n\\begin{aligned}\nf_{1} & =\\frac{1 / 2 \\pi}{R_{1}\\left[C_{\\pi}+C_{\\mu}\\left(1+g_{m} R_{2}+R_{2} / R_{1}\\right)\\right]} \\\\\n& =\\frac{1 / 2 \\pi}{975[12+0.5(1+175+4.55 / 0.975)] 10^{-12}}=1.56 \\mathrm{MHz}\n\\end{aligned}\n$$\n\nand\n\n$$\n\\begin{aligned}\nf_{2} & =\\frac{1 /(2 \\pi)^{2}}{R_{1} R_{2} C_{\\pi} C_{\\mu} f_{1}} \\\\\n& =\\frac{1 /(2 \\pi)^{2}}{975 \\times 4.55 \\times 10^{3} \\times 12 \\times 10^{-12} \\times 0.5 \\times 10^{-12} \\times 1.56 \\times 10^{6}} \\\\\n& \\cong 600 \\mathrm{MHz}\n\\end{aligned}\n$$\n\nBoth $f_{0}$ and $f_{2}$ are well above $f_{1}$, so they are negligible in this example. The first pole frequency $\\left(f_{1}=1.56 \\mathrm{MHz}\\right)$ is slightly lower than that predicted by the Miller approximation $\\left(f_{p}=1.63 \\mathrm{MHz}\\right)$, indicating that the Miller estimate is sufficient for practical purposes.\n(b) Recalculating with $C_{2}=C_{s}=1 \\mathrm{pF}$, we get $f_{0}=12 \\mathrm{GHz}, f_{1}=1.55 \\mathrm{MHz}$, and $f_{2} \\cong 1.3 \\mathrm{GHz}$. The impact of $C_{s}$ is minimal in this example.\nimage_name:Figure 6.22\ndescription:\n[\nname: Vsig, type: VoltageSource, value: 1 Vac, 0 Vdc, ports: {Np: Vsig, Nn: GND}\nname: Rsig, type: Resistor, value: 1.0 k, ports: {N1: Vsig, N2: X1}\nname: rb, type: Resistor, value: 200 , ports: {N1: X1, N2: V2}\nname: r, type: Resistor, value: 5.2 k, ports: {N1: V2, N2: GND}\nname: C, type: Capacitor, value: 12 pF, ports: {Np: V2, Nn: GND}\nname: C, type: Capacitor, value: 0.5 pF, ports: {Np: V2, Nn: Vo}\nname: g_m, type: VoltageControlledCurrentSource, value: 38.5 mA/V, ports: {Np: V2, Nn: Vo}\nname: ro, type: Resistor, value: 50 k, ports: {N1: Vo, N2: GND}\nname: Cs, type: Capacitor, value: 1 pF, ports: {Np: Vo, Nn: GND}\nname: RC, type: Resistor, value: 5 k, ports: {N1: Vo, N2: GND}\n]\nextrainfo:The circuit is a Common Emitter (CE) amplifier with a gain of approximately 43.057 dB or 142 V/V. The -3 dB frequency is around 1.522 MHz.\n\nFIGURE 6.22 PSpice circuit to display the gain of the CE amplifier of Example 6.8.\nimage_name:Figure 6.23\ndescription:The graph in Figure 6.23 is a Bode plot representing the gain of a Common Emitter (CE) amplifier. The x-axis is labeled 'Frequency f (Hz)' and is plotted on a logarithmic scale ranging from $10^4$ to $10^9$ Hz. The y-axis is labeled 'Gain a (dB)' and spans from -20 dB to 40 dB.\n\nThe plot shows two curves representing the gain for different values of the capacitor $C_s$: one for $C_s = 0$ and another for $C_s = 1$ pF. Both curves start with a high gain of approximately 43 dB at lower frequencies.\n\nThe gain remains relatively constant up to around $10^6$ Hz, after which it begins to decrease. The -3 dB cutoff frequency, where the gain drops by 3 dB from its maximum value, is indicated at approximately 1.522 MHz (or $1.522 \\times 10^6$ Hz).\n\nFor frequencies beyond $10^6$ Hz, the gain decreases more rapidly, with the $C_s = 1$ pF curve showing a slightly faster decline compared to the $C_s = 0$ curve. This indicates the minimal role played by the capacitor $C_s$ in affecting the amplifier's gain at these frequencies.\n\nThe plot confirms the amplifier's gain of approximately 43.057 dB or 142 V/V as calculated and discussed in the context. The annotations highlight the different curves for the two capacitor values, emphasizing the slight impact of $C_s$ on the gain at higher frequencies.\n\nFIGURE 6.23 Gain plot of the circuit of Fig. 6.22.\n(c) Using the PSpice circuit of Fig. 6.22, we obtain the gain plot of Fig. 6.23. Using the cursor facility, we find $\\left|a_{0}\\right|=43.057 \\mathrm{~dB}$, or $142 \\mathrm{~V} / \\mathrm{V}$, and $f_{-3 \\mathrm{~dB}}=$ 1.522 MHz, in agreement with the calculations. The plot confirms the minimal role played by $C_{s}$ in this example.\n\nRemark: An IC designer would typically simulate an amplifier using a PSpice model for the transistor. However, for educational purposes, it is more convenient to use the simplified model depicted in Fig. 6.22.\n\n#### Exercise 6.3\n\nFind $f_{0}, f_{1}$, and $f_{2}$ for the CS amplifier of Example 6.7, if $C_{d b}=0.1 \\mathrm{pF}$. Compare with the results obtained there and comment.\nAns. $f_{0}=6.4 \\mathrm{GHz}, f_{1}=5.0 \\mathrm{MHz}$, and $f_{2} \\cong 1 \\mathrm{GHz} ; f_{p}=5.15 \\mathrm{MHz}\\left(\\cong f_{1}\\right)$."
},
{
    "text": "To evaluate the precision of the Miller approximation and gain deeper insights into circuit behavior, let's conduct an exact analysis of the small-signal circuit depicted in Fig. 6.16. While doing so, we'll also generalize by incorporating the output node capacitance $C_{2}$, as shown in Fig. 6.21. It is known that the collector of a monolithic BJT exhibits a collector-to-substrate capacitance $C_{s}$, and the drain of a FET exhibits a drain-to-body capacitance $C_{d b}$. Furthermore, in practical applications, the output node is often loaded by an external capacitance $C_{L}$. Therefore, generally, $C_{2}=C_{s}+C_{L}$ for the BJT, and $C_{2}=C_{d b}+C_{L}$ for the FET.\n\nApplying KCL at the node to the left of $C_{f}$ yields\n\n$$\n\\frac{V_{i}-V_{1}}{R_{1}}=\\frac{V_{1}}{1 /\\left(s C_{1}\\right)}+\\frac{V_{1}-V_{o}}{1 /\\left(s C_{f}\\right)}\n$$\n\nimage_name:FIGURE 6.21\ndescription:\n[\nname: Vi, type: VoltageSource, value: Vi, ports: {Np: Vi, Nn: GND}\nname: R1, type: Resistor, value: R1, ports: {N1: Vi, N2: V1}\nname: C1, type: Capacitor, value: C1, ports: {Np: V1, Nn: GND}\nname: Cf, type: Capacitor, value: Cf, ports: {Np: V1, Nn: Vo}\nname: gmV1, type: VoltageControlledCurrentSource, value: gmV1, ports: {Np: Vo, Nn: GND}\nname: R2, type: Resistor, value: R2, ports: {N1: Vo, N2: GND}\nname: C2, type: Capacitor, value: C2, ports: {Np: Vo, Nn: GND}\n]\nextrainfo:The circuit is an AC small-signal model for analyzing common-emitter/common-source amplifiers with feedback capacitance Cf. It includes input voltage Vi, resistors R1 and R2, capacitors C1, Cf, and C2, and a voltage-controlled current source gmV1.\n\nFIGURE 6.21 Ac circuit for a more accurate analysis of the CE/CS amplifiers.\n\nSimilarly, KCL at the node to the right of $C_{f}$ gives\n\n$$\n\\frac{V_{1}-V_{o}}{1 / s C_{f}}=g_{m} V_{1}+\\frac{V_{o}}{R_{2}}+\\frac{V_{o}}{1 / s C_{2}}\n$$\n\nBy eliminating $V_{1}$ and solving for the ratio $V_{o} / V_{i}$, we obtain, after some algebraic manipulation,\n\n$$\n\\begin{align*}\na(s) & =\\frac{V_{o}}{V_{i}} \\\\\n& =\\frac{\\left(-g_{m} R_{2}\\right) \\times\\left(1-s C_{f} / g_{m}\\right)}{1+s\\left\\{R_{1}\\left[C_{1}+C_{f}\\left(1+g_{m} R_{2}\\right)\\right]+R_{2}\\left(C_{f}+C_{2}\\right)\\right\\}+s^{2} R_{1} R_{2}\\left(C_{1} C_{f}+C_{1} C_{2}+C_{f} C_{2}\\right)} \\tag{6.40}\n\\end{align*}\n$$\n\nThe denominator is a quadratic polynomial in $s$, so $a(s)$ has two poles. Denoting the corresponding pole frequencies as $\\omega_{1}$ and $\\omega_{2}$, we express the gain more succinctly in the standard form of Eq. (6A.1) in the Appendix,\n\n$$\n\\begin{equation*}\na(s)=a_{0} \\frac{1-s / \\omega_{0}}{\\left(1+s / \\omega_{1}\\right)\\left(1+s / \\omega_{2}\\right)} \\tag{6.41}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\na_{0}=-g_{m} R_{2} \\tag{6.42}\n\\end{equation*}\n$$\n\nis the familiar low-frequency gain, and\n\n$$\n\\begin{equation*}\n\\omega_{0}=\\frac{g_{m}}{C_{f}} \\tag{6.43}\n\\end{equation*}\n$$\n\nis the zero frequency of $a(s)$. Physically, at this frequency, the current fed forward via $C_{f}$ equals the current drawn by the dependent source, resulting in zero net current through the parallel combination of $R_{2}$ and $C_{2}$. Consequently, $V_{o}$ drops to zero, implying a gain of zero at this frequency. As a physical check, when $V_{o}=0$, we have $I_{f}=\\left(V_{\\pi}-0\\right) /\\left(1 / s C_{f}\\right)=s C_{f} V_{\\pi}$, so imposing $s C_{f} V_{\\pi}=g_{m} V_{\\pi}$ yields $s=g_{m} / C_{f}$. In the $s$ plane, this zero is located on the positive real axis. Note that for $\\omega>\\omega_{0}$, the current through $C_{f}$ exceeds that of the dependent source, indicating gain-polarity reversal. This provides a physical justification for the negative sign in the numerator of Eq. (6.41); combined with the negative sign of Eq. (6.42), it causes the gain to become positive for $\\omega>\\omega_{0}$. By Eqs. (6.12) and (6.24), $\\omega_{0} \\gg \\omega_{T}$.\n\nWe now aim to derive expressions for the pole frequencies $\\omega_{1}$ and $\\omega_{2}$. Based on the Miller approximation, we expect $\\omega_{1}$ to be close to $\\omega_{p}$, and $\\omega_{2}$ to be much higher than $\\omega_{p}$. Therefore, expanding the denominator of Eq. (6.41) and anticipating $\\omega_{2} \\gg \\omega_{1}$, we write\n\n$$\n\\begin{equation*}\na(s)=a_{0} \\frac{1-s / \\omega_{0}}{1+s\\left(1 / \\omega_{1}+1 / \\omega_{2}\\right)+s^{2} /\\left(\\omega_{1} \\omega_{2}\\right)} \\cong a_{0} \\frac{1-s / \\omega_{0}}{1+s / \\omega_{1}+s^{2} /\\left(\\omega_{1} \\omega_{2}\\right)} \\tag{6.44}\n\\end{equation*}\n$$\n\nBy equating the coefficients of $s$ in the denominators of Eqs. (6.40) and (6.44), we readily find\n\n$$\n\\begin{equation*}\n\\omega_{1}=\\frac{1}{R_{1}\\left[C_{1}+C_{f}\\left(1+g_{m} R_{2}+R_{2} / R_{1}\\right)\\right]+R_{2} C_{2}} \\tag{6.45}\n\\end{equation*}\n$$\n\nWe observe that in the limit $C_{2} \\rightarrow 0$, this expression differs from that of $\\omega_{p}$ derived earlier only in the denominator term $R_{2} / R_{1}$. However, $R_{2} / R_{1} \\ll g_{m} R_{2}$, so $\\omega_{1} \\cong \\omega_{p}$, confirming that the Miller approximation is highly accurate, especially considering its quicker derivation. Similarly, equating the coefficients of $s^{2}$ in the denominators of Eqs. (6.40) and (6.44),\n\n$$\n\\begin{equation*}\n\\omega_{2}=\\frac{1}{R_{1} R_{2}\\left(C_{1} C_{f}+C_{1} C_{2}+C_{f} C_{2}\\right) \\omega_{1}} \\tag{6.46}\n\\end{equation*}\n$$\n\nThe following examples will confirm that $\\omega_{2} \\gg \\omega_{1}$, indicating that the frequency response of Fig. 6.20, though approximate, provides a good indication of the actual response over the relevant frequency range.\n\nEXAMPLE 6.8 (a) Determine $f_{0}, f_{1}$, and $f_{2}$ for the CE amplifier of Example 6.6. Compare with the example and comment.\n(b) Repeat, but include a substrate capacitance $C_{s}=1 \\mathrm{pF}$.\n(c) Verify with PSpice.\n\n#### Solution\n\n(a) For the BJT, Eq. (6.43) predicts a zero frequency at\n\n$$\nf_{0}=\\frac{g_{m}}{2 \\pi C_{\\mu}}=\\frac{1 / 2 \\pi}{26 \\times 0.5 \\times 10^{-12}} \\cong 12 \\mathrm{GHz}\n$$\n\nMoreover, with $R_{1}=975 \\Omega, R_{2}=4.55 \\mathrm{k} \\Omega$, and $C_{2}=0$, Eqs. (6.45) and (6.46) predict pole frequencies at\n\n$$\n\\begin{aligned}\nf_{1} & =\\frac{1 / 2 \\pi}{R_{1}\\left[C_{\\pi}+C_{\\mu}\\left(1+g_{m} R_{2}+R_{2} / R_{1}\\right)\\right]} \\\\\n& =\\frac{1 / 2 \\pi}{975[12+0.5(1+175+4.55 / 0.975)] 10^{-12}}=1.56 \\mathrm{MHz}\n\\end{aligned}\n$$\n\nand\n\n$$\n\\begin{aligned}\nf_{2} & =\\frac{1 /(2 \\pi)^{2}}{R_{1} R_{2} C_{\\pi} C_{\\mu} f_{1}} \\\\\n& =\\frac{1 /(2 \\pi)^{2}}{975 \\times 4.55 \\times 10^{3} \\times 12 \\times 10^{-12} \\times 0.5 \\times 10^{-12} \\times 1.56 \\times 10^{6}} \\\\\n& \\cong 600 \\mathrm{MHz}\n\\end{aligned}\n$$\n\nBoth $f_{0}$ and $f_{2}$ are well above $f_{1}$, so they are of negligible consequence in this example and can be ignored. The first pole frequency $\\left(f_{1}=1.56 \\mathrm{MHz}\\right)$ is slightly lower than that predicted by the Miller approximation $\\left(f_{p}=1.63 \\mathrm{MHz}\\right)$, indicating that the Miller estimate is sufficient for all practical purposes.\n(b) Recalculating with $C_{2}=C_{s}=1 \\mathrm{pF}$, we get $f_{0}=12 \\mathrm{GHz}, f_{1}=1.55 \\mathrm{MHz}$, and $f_{2} \\cong 1.3 \\mathrm{GHz}$. The effect of $C_{s}$ is minimal in this example.\nimage_name:Figure 6.22\ndescription:\n[\nname: Vsig, type: VoltageSource, value: 1 Vac, 0 Vdc, ports: {Np: Vsig, Nn: GND}\nname: Rsig, type: Resistor, value: 1.0 k, ports: {N1: Vsig, N2: X1}\nname: rb, type: Resistor, value: 200 , ports: {N1: X1, N2: V2}\nname: r, type: Resistor, value: 5.2 k, ports: {N1: V2, N2: GND}\nname: C, type: Capacitor, value: 12 pF, ports: {Np: V2, Nn: GND}\nname: C, type: Capacitor, value: 0.5 pF, ports: {Np: V2, Nn: Vo}\nname: g_m, type: VoltageControlledCurrentSource, value: 38.5 mA/V, ports: {Np: V2, Nn: Vo}\nname: ro, type: Resistor, value: 50 k, ports: {N1: Vo, N2: GND}\nname: Cs, type: Capacitor, value: 1 pF, ports: {Np: Vo, Nn: GND}\nname: RC, type: Resistor, value: 5 k, ports: {N1: Vo, N2: GND}\n]\nextrainfo:The circuit is a Common Emitter (CE) amplifier with a gain of approximately 43.057 dB or 142 V/V. The -3 dB frequency is around 1.522 MHz.\n\nFIGURE 6.22 PSpice circuit to display the gain of the CE amplifier of Example 6.8.\nimage_name:Figure 6.23\ndescription:The graph in Figure 6.23 is a Bode plot representing the gain of a Common Emitter (CE) amplifier. The x-axis is labeled 'Frequency f (Hz)' and is plotted on a logarithmic scale ranging from $10^4$ to $10^9$ Hz. The y-axis is labeled 'Gain a (dB)' and spans from -20 dB to 40 dB.\n\nThe plot shows two curves representing the gain for different values of the capacitor $C_s$: one for $C_s = 0$ and another for $C_s = 1$ pF. Both curves start with a high gain of approximately 43 dB at lower frequencies.\n\nThe gain remains relatively constant up to around $10^6$ Hz, after which it begins to decrease. The -3 dB cutoff frequency, where the gain drops by 3 dB from its maximum value, is indicated at approximately 1.522 MHz (or $1.522 \\times 10^6$ Hz).\n\nFor frequencies beyond $10^6$ Hz, the gain decreases more rapidly, with the $C_s = 1$ pF curve showing a slightly faster decline compared to the $C_s = 0$ curve. This indicates the minimal role played by the capacitor $C_s$ in affecting the amplifier's gain at these frequencies.\n\nThe plot confirms the amplifier's gain of approximately 43.057 dB or 142 V/V as calculated and discussed in the context. The annotations highlight the different curves for the two capacitor values, emphasizing the slight impact of $C_s$ on the gain at higher frequencies.\n\nFIGURE 6.23 Gain plot of the circuit of Fig. 6.22.\n(c) Using the PSpice circuit of Fig. 6.22, we obtain the gain plot of Fig. 6.23. Using the cursor facility, we find $\\left|a_{0}\\right|=43.057 \\mathrm{~dB}$, or $142 \\mathrm{~V} / \\mathrm{V}$, and $f_{-3 \\mathrm{~dB}}=$ 1.522 MHz, in agreement with the calculations. The plot confirms the minimal role played by $C_{s}$ in this example.\n\nRemark: An IC designer would typically simulate an amplifier using a PSpice model for the transistor. However, for pedagogical purposes, it is more convenient to work with the simplified model depicted in Fig. 6.22.\n\n#### Exercise 6.3\n\nFind $f_{0}, f_{1}$, and $f_{2}$ for the CS amplifier of Example 6.7, if $C_{d b}=0.1 \\mathrm{pF}$. Compare with the results obtained there and comment.\nAns. $f_{0}=6.4 \\mathrm{GHz}, f_{1}=5.0 \\mathrm{MHz}$, and $f_{2} \\cong 1 \\mathrm{GHz} ; f_{p}=5.15 \\mathrm{MHz}\\left(\\cong f_{1}\\right)$."
},
{
    "text": "To evaluate the precision of the Miller approximation and gain deeper insights into the circuit's behavior, let's conduct an exact analysis of the small-signal circuit depicted in Fig. 6.16. While doing so, we'll also generalize the analysis by incorporating the output node capacitance $C_{2}$, as illustrated in Fig. 6.21. It is known that the collector of a monolithic BJT exhibits a collector-to-substrate capacitance $C_{s}$, and the drain of a FET exhibits a drain-to-body capacitance $C_{d b}$. Furthermore, in practical applications, the output node is often loaded by an external capacitance $C_{L}$. Therefore, generally, $C_{2}=C_{s}+C_{L}$ for the BJT, and $C_{2}=C_{d b}+C_{L}$ for the FET.\n\nApplying Kirchhoff's Current Law (KCL) at the node to the left of $C_{f}$ yields\n\n$$\n\\frac{V_{i}-V_{1}}{R_{1}}=\\frac{V_{1}}{1 /\\left(s C_{1}\\right)}+\\frac{V_{1}-V_{o}}{1 /\\left(s C_{f}\\right)}\n$$\n\nimage_name:FIGURE 6.21\ndescription:\n[\nname: Vi, type: VoltageSource, value: Vi, ports: {Np: Vi, Nn: GND}\nname: R1, type: Resistor, value: R1, ports: {N1: Vi, N2: V1}\nname: C1, type: Capacitor, value: C1, ports: {Np: V1, Nn: GND}\nname: Cf, type: Capacitor, value: Cf, ports: {Np: V1, Nn: Vo}\nname: gmV1, type: VoltageControlledCurrentSource, value: gmV1, ports: {Np: Vo, Nn: GND}\nname: R2, type: Resistor, value: R2, ports: {N1: Vo, N2: GND}\nname: C2, type: Capacitor, value: C2, ports: {Np: Vo, Nn: GND}\n]\nextrainfo:The circuit is an AC small-signal model for analyzing common-emitter/common-source amplifiers with feedback capacitance Cf. It includes input voltage Vi, resistors R1 and R2, capacitors C1, Cf, and C2, and a voltage-controlled current source gmV1.\n\nFIGURE 6.21 AC circuit for a more precise analysis of CE/CS amplifiers.\n\nSimilarly, applying KCL at the node to the right of $C_{f}$ results in\n\n$$\n\\frac{V_{1}-V_{o}}{1 / s C_{f}}=g_{m} V_{1}+\\frac{V_{o}}{R_{2}}+\\frac{V_{o}}{1 / s C_{2}}\n$$\n\nBy eliminating $V_{1}$ and solving for the ratio $V_{o} / V_{i}$, we obtain, after some algebraic manipulation,\n\n$$\n\\begin{align*}\na(s) & =\\frac{V_{o}}{V_{i}} \\\\\n& =\\frac{\\left(-g_{m} R_{2}\\right) \\times\\left(1-s C_{f} / g_{m}\\right)}{1+s\\left\\{R_{1}\\left[C_{1}+C_{f}\\left(1+g_{m} R_{2}\\right)\\right]+R_{2}\\left(C_{f}+C_{2}\\right)\\right\\}+s^{2} R_{1} R_{2}\\left(C_{1} C_{f}+C_{1} C_{2}+C_{f} C_{2}\\right)} \\tag{6.40}\n\\end{align*}\n$$\n\nThe denominator is a quadratic polynomial in $s$, so $a(s)$ has two poles. Denoting the corresponding pole frequencies as $\\omega_{1}$ and $\\omega_{2}$, we express the gain more succinctly in the standard form of Eq. (6A.1) in the Appendix,\n\n$$\n\\begin{equation*}\na(s)=a_{0} \\frac{1-s / \\omega_{0}}{\\left(1+s / \\omega_{1}\\right)\\left(1+s / \\omega_{2}\\right)} \\tag{6.41}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\na_{0}=-g_{m} R_{2} \\tag{6.42}\n\\end{equation*}\n$$\n\nis the well-known low-frequency gain, and\n\n$$\n\\begin{equation*}\n\\omega_{0}=\\frac{g_{m}}{C_{f}} \\tag{6.43}\n\\end{equation*}\n$$\n\nis the zero frequency of $a(s)$. Physically, at this frequency, the current fed forward through $C_{f}$ equals the current drawn by the dependent source, resulting in a net current of zero through the parallel combination of $R_{2}$ and $C_{2}$. Consequently, $V_{o}$ drops to zero, indicating a gain of zero at this frequency. As a physical check, when $V_{o}=0$, we have $I_{f}=\\left(V_{\\pi}-0\\right) /\\left(1 / s C_{f}\\right)=s C_{f} V_{\\pi}$, so imposing $s C_{f} V_{\\pi}=g_{m} V_{\\pi}$ yields $s=g_{m} / C_{f}$. In the $s$ plane, this zero lies on the positive real axis. Note that for $\\omega>\\omega_{0}$, the current through $C_{f}$ exceeds that of the dependent source, indicating a reversal of gain polarity. This provides a physical justification for the negative sign in the numerator of Eq. (6.41); combined with the negative sign of Eq. (6.42), it causes the gain to become positive for $\\omega>\\omega_{0}$. By Eqs. (6.12) and (6.24), $\\omega_{0} \\gg \\omega_{T}$.\n\nWe now aim to derive expressions for the pole frequencies $\\omega_{1}$ and $\\omega_{2}$. Based on the Miller approximation, we anticipate $\\omega_{1}$ to be close to $\\omega_{p}$, and $\\omega_{2}$ to be significantly higher than $\\omega_{p}$. Therefore, expanding the denominator of Eq. (6.41) and expecting $\\omega_{2} \\gg \\omega_{1}$, we write\n\n$$\n\\begin{equation*}\na(s)=a_{0} \\frac{1-s / \\omega_{0}}{1+s\\left(1 / \\omega_{1}+1 / \\omega_{2}\\right)+s^{2} /\\left(\\omega_{1} \\omega_{2}\\right)} \\cong a_{0} \\frac{1-s / \\omega_{0}}{1+s / \\omega_{1}+s^{2} /\\left(\\omega_{1} \\omega_{2}\\right)} \\tag{6.44}\n\\end{equation*}\n$$\n\nBy equating the coefficients of $s$ in the denominators of Eqs. (6.40) and (6.44), we readily find\n\n$$\n\\begin{equation*}\n\\omega_{1}=\\frac{1}{R_{1}\\left[C_{1}+C_{f}\\left(1+g_{m} R_{2}+R_{2} / R_{1}\\right)\\right]+R_{2} C_{2}} \\tag{6.45}\n\\end{equation*}\n$$\n\nWe observe that in the limit $C_{2} \\rightarrow 0$, this expression differs from the earlier derived $\\omega_{p}$ only by the term $R_{2} / R_{1}$ in the denominator. However, $R_{2} / R_{1} \\ll g_{m} R_{2}$, so $\\omega_{1} \\cong \\omega_{p}$, confirming the Miller approximation's high accuracy, especially considering its quicker derivation. Similarly, equating the coefficients of $s^{2}$ in the denominators of Eqs. (6.40) and (6.44),\n\n$$\n\\begin{equation*}\n\\omega_{2}=\\frac{1}{R_{1} R_{2}\\left(C_{1} C_{f}+C_{1} C_{2}+C_{f} C_{2}\\right) \\omega_{1}} \\tag{6.46}\n\\end{equation*}\n$$\n\nThe following examples will confirm that $\\omega_{2} \\gg \\omega_{1}$, indicating that the frequency response of Fig. 6.20, though approximate, provides a good indication of the actual response over the relevant frequency range.\n\nEXAMPLE 6.8 (a) Determine $f_{0}, f_{1}$, and $f_{2}$ for the CE amplifier of Example 6.6. Compare with the example and comment.\n(b) Repeat the calculation, but include a substrate capacitance $C_{s}=1 \\mathrm{pF}$.\n(c) Verify with PSpice.\n\n#### Solution\n\n(a) For the BJT, Eq. (6.43) predicts a zero frequency at\n\n$$\nf_{0}=\\frac{g_{m}}{2 \\pi C_{\\mu}}=\\frac{1 / 2 \\pi}{26 \\times 0.5 \\times 10^{-12}} \\cong 12 \\mathrm{GHz}\n$$\n\nMoreover, with $R_{1}=975 \\Omega, R_{2}=4.55 \\mathrm{k} \\Omega$, and $C_{2}=0$, Eqs. (6.45) and (6.46) predict pole frequencies at\n\n$$\n\\begin{aligned}\nf_{1} & =\\frac{1 / 2 \\pi}{R_{1}\\left[C_{\\pi}+C_{\\mu}\\left(1+g_{m} R_{2}+R_{2} / R_{1}\\right)\\right]} \\\\\n& =\\frac{1 / 2 \\pi}{975[12+0.5(1+175+4.55 / 0.975)] 10^{-12}}=1.56 \\mathrm{MHz}\n\\end{aligned}\n$$\n\nand\n\n$$\n\\begin{aligned}\nf_{2} & =\\frac{1 /(2 \\pi)^{2}}{R_{1} R_{2} C_{\\pi} C_{\\mu} f_{1}} \\\\\n& =\\frac{1 /(2 \\pi)^{2}}{975 \\times 4.55 \\times 10^{3} \\times 12 \\times 10^{-12} \\times 0.5 \\times 10^{-12} \\times 1.56 \\times 10^{6}} \\\\\n& \\cong 600 \\mathrm{MHz}\n\\end{aligned}\n$$\n\nBoth $f_{0}$ and $f_{2}$ are well above $f_{1}$, so they are negligible in this example. The first pole frequency $\\left(f_{1}=1.56 \\mathrm{MHz}\\right)$ is slightly lower than that predicted by the Miller approximation $\\left(f_{p}=1.63 \\mathrm{MHz}\\right)$, indicating that the Miller estimate is sufficient for practical purposes.\n(b) Recalculating with $C_{2}=C_{s}=1 \\mathrm{pF}$, we get $f_{0}=12 \\mathrm{GHz}, f_{1}=1.55 \\mathrm{MHz}$, and $f_{2} \\cong 1.3 \\mathrm{GHz}$. The impact of $C_{s}$ is minimal in this example.\nimage_name:Figure 6.22\ndescription:\n[\nname: Vsig, type: VoltageSource, value: 1 Vac, 0 Vdc, ports: {Np: Vsig, Nn: GND}\nname: Rsig, type: Resistor, value: 1.0 k, ports: {N1: Vsig, N2: X1}\nname: rb, type: Resistor, value: 200 , ports: {N1: X1, N2: V2}\nname: r, type: Resistor, value: 5.2 k, ports: {N1: V2, N2: GND}\nname: C, type: Capacitor, value: 12 pF, ports: {Np: V2, Nn: GND}\nname: C, type: Capacitor, value: 0.5 pF, ports: {Np: V2, Nn: Vo}\nname: g_m, type: VoltageControlledCurrentSource, value: 38.5 mA/V, ports: {Np: V2, Nn: Vo}\nname: ro, type: Resistor, value: 50 k, ports: {N1: Vo, N2: GND}\nname: Cs, type: Capacitor, value: 1 pF, ports: {Np: Vo, Nn: GND}\nname: RC, type: Resistor, value: 5 k, ports: {N1: Vo, N2: GND}\n]\nextrainfo:The circuit is a Common Emitter (CE) amplifier with a gain of approximately 43.057 dB or 142 V/V. The -3 dB frequency is around 1.522 MHz.\n\nFIGURE 6.22 PSpice circuit to display the gain of the CE amplifier of Example 6.8.\nimage_name:Figure 6.23\ndescription:The graph in Figure 6.23 is a Bode plot representing the gain of a Common Emitter (CE) amplifier. The x-axis is labeled 'Frequency f (Hz)' and is plotted on a logarithmic scale ranging from $10^4$ to $10^9$ Hz. The y-axis is labeled 'Gain a (dB)' and spans from -20 dB to 40 dB.\n\nThe plot shows two curves representing the gain for different values of the capacitor $C_s$: one for $C_s = 0$ and another for $C_s = 1$ pF. Both curves start with a high gain of approximately 43 dB at lower frequencies.\n\nThe gain remains relatively constant up to around $10^6$ Hz, after which it begins to decrease. The -3 dB cutoff frequency, where the gain drops by 3 dB from its maximum value, is indicated at approximately 1.522 MHz (or $1.522 \\times 10^6$ Hz).\n\nFor frequencies beyond $10^6$ Hz, the gain decreases more rapidly, with the $C_s = 1$ pF curve showing a slightly faster decline compared to the $C_s = 0$ curve. This indicates the minimal role played by the capacitor $C_s$ in affecting the amplifier's gain at these frequencies.\n\nThe plot confirms the amplifier's gain of approximately 43.057 dB or 142 V/V as calculated and discussed in the context. The annotations highlight the different curves for the two capacitor values, emphasizing the slight impact of $C_s$ on the gain at higher frequencies.\n\nFIGURE 6.23 Gain plot of the circuit of Fig. 6.22.\n(c) Using the PSpice circuit of Fig. 6.22, we obtain the gain plot of Fig. 6.23. Using the cursor facility, we find $\\left|a_{0}\\right|=43.057 \\mathrm{~dB}$, or $142 \\mathrm{~V} / \\mathrm{V}$, and $f_{-3 \\mathrm{~dB}}=$ 1.522 MHz, in agreement with the calculations. The plot confirms the minimal impact of $C_{s}$ in this example.\n\nRemark: An IC designer would typically simulate an amplifier using a PSpice model for the transistor. However, for pedagogical purposes, it is more convenient to use the simplified model depicted in Fig. 6.22.\n\n#### Exercise 6.3\n\nFind $f_{0}, f_{1}$, and $f_{2}$ for the CS amplifier of Example 6.7, if $C_{d b}=0.1 \\mathrm{pF}$. Compare with the results obtained there and comment.\nAns. $f_{0}=6.4 \\mathrm{GHz}, f_{1}=5.0 \\mathrm{MHz}$, and $f_{2} \\cong 1 \\mathrm{GHz} ; f_{p}=5.15 \\mathrm{MHz}\\left(\\cong f_{1}\\right)$."
},
{
    "text": "To evaluate the precision of the Miller approximation and gain deeper insights into the circuit's behavior, let's conduct an exact analysis of the small-signal circuit depicted in Fig. 6.16. While doing so, we'll also generalize the analysis by incorporating the output node capacitance $C_{2}$, as shown in Fig. 6.21. It is known that the collector of a monolithic BJT exhibits a collector-to-substrate capacitance $C_{s}$, and the drain of a FET exhibits a drain-to-body capacitance $C_{d b}$. Furthermore, in practical applications, the output node is often loaded by an external capacitance $C_{L}$. Therefore, generally, $C_{2}=C_{s}+C_{L}$ for the BJT, and $C_{2}=C_{d b}+C_{L}$ for the FET.\n\nApplying Kirchhoff's Current Law (KCL) at the node to the left of $C_{f}$ yields\n\n$$\n\\frac{V_{i}-V_{1}}{R_{1}}=\\frac{V_{1}}{1 /\\left(s C_{1}\\right)}+\\frac{V_{1}-V_{o}}{1 /\\left(s C_{f}\\right)}\n$$\n\nimage_name:FIGURE 6.21\ndescription:\n[\nname: Vi, type: VoltageSource, value: Vi, ports: {Np: Vi, Nn: GND}\nname: R1, type: Resistor, value: R1, ports: {N1: Vi, N2: V1}\nname: C1, type: Capacitor, value: C1, ports: {Np: V1, Nn: GND}\nname: Cf, type: Capacitor, value: Cf, ports: {Np: V1, Nn: Vo}\nname: gmV1, type: VoltageControlledCurrentSource, value: gmV1, ports: {Np: Vo, Nn: GND}\nname: R2, type: Resistor, value: R2, ports: {N1: Vo, N2: GND}\nname: C2, type: Capacitor, value: C2, ports: {Np: Vo, Nn: GND}\n]\nextrainfo:The circuit is an AC small-signal model for analyzing common-emitter/common-source amplifiers with feedback capacitance Cf. It includes input voltage Vi, resistors R1 and R2, capacitors C1, Cf, and C2, and a voltage-controlled current source gmV1.\n\nFIGURE 6.21 Ac circuit for a more precise analysis of CE/CS amplifiers.\n\nSimilarly, applying KCL at the node to the right of $C_{f}$ results in\n\n$$\n\\frac{V_{1}-V_{o}}{1 / s C_{f}}=g_{m} V_{1}+\\frac{V_{o}}{R_{2}}+\\frac{V_{o}}{1 / s C_{2}}\n$$\n\nBy eliminating $V_{1}$ and solving for the ratio $V_{o} / V_{i}$, we obtain, after some algebraic manipulation,\n\n$$\n\\begin{align*}\na(s) & =\\frac{V_{o}}{V_{i}} \\\\\n& =\\frac{\\left(-g_{m} R_{2}\\right) \\times\\left(1-s C_{f} / g_{m}\\right)}{1+s\\left\\{R_{1}\\left[C_{1}+C_{f}\\left(1+g_{m} R_{2}\\right)\\right]+R_{2}\\left(C_{f}+C_{2}\\right)\\right\\}+s^{2} R_{1} R_{2}\\left(C_{1} C_{f}+C_{1} C_{2}+C_{f} C_{2}\\right)} \\tag{6.40}\n\\end{align*}\n$$\n\nThe denominator is a quadratic polynomial in $s$, so $a(s)$ has two poles. Denoting the corresponding pole frequencies as $\\omega_{1}$ and $\\omega_{2}$, we express the gain more succinctly in the standard form of Eq. (6A.1) in the Appendix,\n\n$$\n\\begin{equation*}\na(s)=a_{0} \\frac{1-s / \\omega_{0}}{\\left(1+s / \\omega_{1}\\right)\\left(1+s / \\omega_{2}\\right)} \\tag{6.41}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\na_{0}=-g_{m} R_{2} \\tag{6.42}\n\\end{equation*}\n$$\n\nis the well-known low-frequency gain, and\n\n$$\n\\begin{equation*}\n\\omega_{0}=\\frac{g_{m}}{C_{f}} \\tag{6.43}\n\\end{equation*}\n$$\n\nis the zero frequency of $a(s)$. Physically, at this frequency, the current fed forward via $C_{f}$ equals the current drawn by the dependent source, resulting in zero net current through the parallel combination of $R_{2}$ and $C_{2}$. Consequently, $V_{o}$ drops to zero, implying a gain of zero at this frequency. As a physical check, when $V_{o}=0$, we have $I_{f}=\\left(V_{\\pi}-0\\right) /\\left(1 / s C_{f}\\right)=s C_{f} V_{\\pi}$, so imposing $s C_{f} V_{\\pi}=g_{m} V_{\\pi}$ yields $s=g_{m} / C_{f}$. In the $s$ plane, this zero lies on the positive real axis. Note that for $\\omega>\\omega_{0}$, the current through $C_{f}$ exceeds that of the dependent source, indicating gain-polarity reversal. This provides a physical justification for the negative sign in the numerator of Eq. (6.41); combined with the negative sign of Eq. (6.42), it causes the gain to become positive for $\\omega>\\omega_{0}$. By Eqs. (6.12) and (6.24), $\\omega_{0} \\gg \\omega_{T}$.\n\nWe now aim to derive expressions for the pole frequencies $\\omega_{1}$ and $\\omega_{2}$. Based on the Miller approximation, we expect $\\omega_{1}$ to be close to $\\omega_{p}$, and $\\omega_{2}$ to be much higher than $\\omega_{p}$. Therefore, expanding the denominator of Eq. (6.41) and anticipating $\\omega_{2} \\gg \\omega_{1}$, we write\n\n$$\n\\begin{equation*}\na(s)=a_{0} \\frac{1-s / \\omega_{0}}{1+s\\left(1 / \\omega_{1}+1 / \\omega_{2}\\right)+s^{2} /\\left(\\omega_{1} \\omega_{2}\\right)} \\cong a_{0} \\frac{1-s / \\omega_{0}}{1+s / \\omega_{1}+s^{2} /\\left(\\omega_{1} \\omega_{2}\\right)} \\tag{6.44}\n\\end{equation*}\n$$\n\nEquating the coefficients of $s$ in the denominators of Eqs. (6.40) and (6.44), we readily find\n\n$$\n\\begin{equation*}\n\\omega_{1}=\\frac{1}{R_{1}\\left[C_{1}+C_{f}\\left(1+g_{m} R_{2}+R_{2} / R_{1}\\right)\\right]+R_{2} C_{2}} \\tag{6.45}\n\\end{equation*}\n$$\n\nWe observe that in the limit $C_{2} \\rightarrow 0$, this expression differs from that of $\\omega_{p}$ derived earlier only in the denominator term $R_{2} / R_{1}$. However, $R_{2} / R_{1} \\ll g_{m} R_{2}$, so $\\omega_{1} \\cong \\omega_{p}$, confirming that the Miller approximation is quite accurate, especially considering its quicker derivation. Similarly, equating the coefficients of $s^{2}$ in the denominators of Eqs. (6.40) and (6.44),\n\n$$\n\\begin{equation*}\n\\omega_{2}=\\frac{1}{R_{1} R_{2}\\left(C_{1} C_{f}+C_{1} C_{2}+C_{f} C_{2}\\right) \\omega_{1}} \\tag{6.46}\n\\end{equation*}\n$$\n\nThe following examples will confirm that $\\omega_{2} \\gg \\omega_{1}$, indicating that the frequency response of Fig. 6.20, though approximate, provides a good indication of the actual response over the relevant frequency range.\n\nEXAMPLE 6.8 (a) Determine $f_{0}, f_{1}$, and $f_{2}$ for the CE amplifier of Example 6.6. Compare with the example and comment.\n(b) Repeat, but include a substrate capacitance $C_{s}=1 \\mathrm{pF}$.\n(c) Verify with PSpice.\n\n#### Solution\n\n(a) For the BJT, Eq. (6.43) predicts a zero frequency at\n\n$$\nf_{0}=\\frac{g_{m}}{2 \\pi C_{\\mu}}=\\frac{1 / 2 \\pi}{26 \\times 0.5 \\times 10^{-12}} \\cong 12 \\mathrm{GHz}\n$$\n\nMoreover, with $R_{1}=975 \\Omega, R_{2}=4.55 \\mathrm{k} \\Omega$, and $C_{2}=0$, Eqs. (6.45) and (6.46) predict pole frequencies at\n\n$$\n\\begin{aligned}\nf_{1} & =\\frac{1 / 2 \\pi}{R_{1}\\left[C_{\\pi}+C_{\\mu}\\left(1+g_{m} R_{2}+R_{2} / R_{1}\\right)\\right]} \\\\\n& =\\frac{1 / 2 \\pi}{975[12+0.5(1+175+4.55 / 0.975)] 10^{-12}}=1.56 \\mathrm{MHz}\n\\end{aligned}\n$$\n\nand\n\n$$\n\\begin{aligned}\nf_{2} & =\\frac{1 /(2 \\pi)^{2}}{R_{1} R_{2} C_{\\pi} C_{\\mu} f_{1}} \\\\\n& =\\frac{1 /(2 \\pi)^{2}}{975 \\times 4.55 \\times 10^{3} \\times 12 \\times 10^{-12} \\times 0.5 \\times 10^{-12} \\times 1.56 \\times 10^{6}} \\\\\n& \\cong 600 \\mathrm{MHz}\n\\end{aligned}\n$$\n\nBoth $f_{0}$ and $f_{2}$ are well above $f_{1}$, so they are negligible in this example. The first pole frequency $\\left(f_{1}=1.56 \\mathrm{MHz}\\right)$ is slightly lower than that predicted by the Miller approximation $\\left(f_{p}=1.63 \\mathrm{MHz}\\right)$, indicating that the Miller estimate is sufficient for practical purposes.\n(b) Recalculating with $C_{2}=C_{s}=1 \\mathrm{pF}$, we get $f_{0}=12 \\mathrm{GHz}, f_{1}=1.55 \\mathrm{MHz}$, and $f_{2} \\cong 1.3 \\mathrm{GHz}$. The effect of $C_{s}$ is minimal in this example.\nimage_name:Figure 6.22\ndescription:\n[\nname: Vsig, type: VoltageSource, value: 1 Vac, 0 Vdc, ports: {Np: Vsig, Nn: GND}\nname: Rsig, type: Resistor, value: 1.0 k, ports: {N1: Vsig, N2: X1}\nname: rb, type: Resistor, value: 200 , ports: {N1: X1, N2: V2}\nname: r, type: Resistor, value: 5.2 k, ports: {N1: V2, N2: GND}\nname: C, type: Capacitor, value: 12 pF, ports: {Np: V2, Nn: GND}\nname: C, type: Capacitor, value: 0.5 pF, ports: {Np: V2, Nn: Vo}\nname: g_m, type: VoltageControlledCurrentSource, value: 38.5 mA/V, ports: {Np: V2, Nn: Vo}\nname: ro, type: Resistor, value: 50 k, ports: {N1: Vo, N2: GND}\nname: Cs, type: Capacitor, value: 1 pF, ports: {Np: Vo, Nn: GND}\nname: RC, type: Resistor, value: 5 k, ports: {N1: Vo, N2: GND}\n]\nextrainfo:The circuit is a Common Emitter (CE) amplifier with a gain of approximately 43.057 dB or 142 V/V. The -3 dB frequency is around 1.522 MHz.\n\nFIGURE 6.22 PSpice circuit to display the gain of the CE amplifier of Example 6.8.\nimage_name:Figure 6.23\ndescription:The graph in Figure 6.23 is a Bode plot representing the gain of a Common Emitter (CE) amplifier. The x-axis is labeled 'Frequency f (Hz)' and is plotted on a logarithmic scale ranging from $10^4$ to $10^9$ Hz. The y-axis is labeled 'Gain a (dB)' and spans from -20 dB to 40 dB.\n\nThe plot shows two curves representing the gain for different values of the capacitor $C_s$: one for $C_s = 0$ and another for $C_s = 1$ pF. Both curves start with a high gain of approximately 43 dB at lower frequencies.\n\nThe gain remains relatively constant up to around $10^6$ Hz, after which it begins to decrease. The -3 dB cutoff frequency, where the gain drops by 3 dB from its maximum value, is indicated at approximately 1.522 MHz (or $1.522 \\times 10^6$ Hz).\n\nFor frequencies beyond $10^6$ Hz, the gain decreases more rapidly, with the $C_s = 1$ pF curve showing a slightly faster decline compared to the $C_s = 0$ curve. This indicates the minimal role played by the capacitor $C_s$ in affecting the amplifier's gain at these frequencies.\n\nThe plot confirms the amplifier's gain of approximately 43.057 dB or 142 V/V as calculated and discussed in the context. The annotations highlight the different curves for the two capacitor values, emphasizing the slight impact of $C_s$ on the gain at higher frequencies.\n\nFIGURE 6.23 Gain plot of the circuit of Fig. 6.22.\n(c) Using the PSpice circuit of Fig. 6.22, we obtain the gain plot of Fig. 6.23. Using the cursor facility, we find $\\left|a_{0}\\right|=43.057 \\mathrm{~dB}$, or $142 \\mathrm{~V} / \\mathrm{V}$, and $f_{-3 \\mathrm{~dB}}=$ 1.522 MHz, in agreement with the calculations. The plot confirms the minimal impact of $C_{s}$ in this example.\n\nRemark: An IC designer would typically simulate an amplifier using a PSpice model for the transistor. However, for educational purposes, it is more convenient to use the simplified model depicted in Fig. 6.22.\n\n#### Exercise 6.3\n\nFind $f_{0}, f_{1}$, and $f_{2}$ for the CS amplifier of Example 6.7, if $C_{d b}=0.1 \\mathrm{pF}$. Compare with the results obtained there and comment.\nAns. $f_{0}=6.4 \\mathrm{GHz}, f_{1}=5.0 \\mathrm{MHz}$, and $f_{2} \\cong 1 \\mathrm{GHz} ; f_{p}=5.15 \\mathrm{MHz}\\left(\\cong f_{1}\\right)$."
},
{
    "text": "To evaluate the precision of the Miller approximation and gain deeper insight into circuit behavior, let's conduct an exact analysis of the small-signal circuit depicted in Fig. 6.16. While doing so, we'll also generalize by incorporating the output node capacitance $C_{2}$, as shown in Fig. 6.21. It is known that the collector of a monolithic BJT exhibits a collector-to-substrate capacitance $C_{s}$, and the drain of a FET exhibits a drain-to-body capacitance $C_{d b}$. Furthermore, in practical applications, the output node is often loaded by an external capacitance $C_{L}$. Therefore, generally, $C_{2}=C_{s}+C_{L}$ for the BJT, and $C_{2}=C_{d b}+C_{L}$ for the FET.\n\nApplying KCL at the node to the left of $C_{f}$ yields\n\n$$\n\\frac{V_{i}-V_{1}}{R_{1}}=\\frac{V_{1}}{1 /\\left(s C_{1}\\right)}+\\frac{V_{1}-V_{o}}{1 /\\left(s C_{f}\\right)}\n$$\n\nimage_name:FIGURE 6.21\ndescription:\n[\nname: Vi, type: VoltageSource, value: Vi, ports: {Np: Vi, Nn: GND}\nname: R1, type: Resistor, value: R1, ports: {N1: Vi, N2: V1}\nname: C1, type: Capacitor, value: C1, ports: {Np: V1, Nn: GND}\nname: Cf, type: Capacitor, value: Cf, ports: {Np: V1, Nn: Vo}\nname: gmV1, type: VoltageControlledCurrentSource, value: gmV1, ports: {Np: Vo, Nn: GND}\nname: R2, type: Resistor, value: R2, ports: {N1: Vo, N2: GND}\nname: C2, type: Capacitor, value: C2, ports: {Np: Vo, Nn: GND}\n]\nextrainfo:The circuit is an AC small-signal model for analyzing common-emitter/common-source amplifiers with feedback capacitance Cf. It includes input voltage Vi, resistors R1 and R2, capacitors C1, Cf, and C2, and a voltage-controlled current source gmV1.\n\nFIGURE 6.21 AC circuit for a more precise analysis of CE/CS amplifiers.\n\nSimilarly, KCL at the node to the right of $C_{f}$ results in\n\n$$\n\\frac{V_{1}-V_{o}}{1 / s C_{f}}=g_{m} V_{1}+\\frac{V_{o}}{R_{2}}+\\frac{V_{o}}{1 / s C_{2}}\n$$\n\nBy eliminating $V_{1}$ and solving for the ratio $V_{o} / V_{i}$, we obtain, after some algebraic manipulation,\n\n$$\n\\begin{align*}\na(s) & =\\frac{V_{o}}{V_{i}} \\\\\n& =\\frac{\\left(-g_{m} R_{2}\\right) \\times\\left(1-s C_{f} / g_{m}\\right)}{1+s\\left\\{R_{1}\\left[C_{1}+C_{f}\\left(1+g_{m} R_{2}\\right)\\right]+R_{2}\\left(C_{f}+C_{2}\\right)\\right\\}+s^{2} R_{1} R_{2}\\left(C_{1} C_{f}+C_{1} C_{2}+C_{f} C_{2}\\right)} \\tag{6.40}\n\\end{align*}\n$$\n\nThe denominator is a quadratic polynomial in $s$, so $a(s)$ has two poles. Denoting the corresponding pole frequencies as $\\omega_{1}$ and $\\omega_{2}$, we express the gain more succinctly in the standard form of Eq. (6A.1) in the Appendix,\n\n$$\n\\begin{equation*}\na(s)=a_{0} \\frac{1-s / \\omega_{0}}{\\left(1+s / \\omega_{1}\\right)\\left(1+s / \\omega_{2}\\right)} \\tag{6.41}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\na_{0}=-g_{m} R_{2} \\tag{6.42}\n\\end{equation*}\n$$\n\nis the well-known low-frequency gain, and\n\n$$\n\\begin{equation*}\n\\omega_{0}=\\frac{g_{m}}{C_{f}} \\tag{6.43}\n\\end{equation*}\n$$\n\nis the zero frequency of $a(s)$. Physically, at this frequency, the current fed forward via $C_{f}$ equals the current drawn by the dependent source, resulting in zero net current through the parallel combination of $R_{2}$ and $C_{2}$. Consequently, $V_{o}$ drops to zero, implying a gain of zero at this frequency. As a physical check, when $V_{o}=0$, we have $I_{f}=\\left(V_{\\pi}-0\\right) /\\left(1 / s C_{f}\\right)=s C_{f} V_{\\pi}$, so imposing $s C_{f} V_{\\pi}=g_{m} V_{\\pi}$ yields $s=g_{m} / C_{f}$. In the $s$ plane, this zero lies on the positive real axis. Note that for $\\omega>\\omega_{0}$, the current through $C_{f}$ exceeds that of the dependent source, indicating gain-polarity reversal. This provides a physical justification for the negative sign in the numerator of Eq. (6.41); combined with the negative sign of Eq. (6.42), it causes the gain to become positive for $\\omega>\\omega_{0}$. By Eqs. (6.12) and (6.24), $\\omega_{0} \\gg \\omega_{T}$.\n\nWe now aim to derive expressions for the pole frequencies $\\omega_{1}$ and $\\omega_{2}$. Based on the Miller approximation, we expect $\\omega_{1}$ to be close to $\\omega_{p}$, and $\\omega_{2}$ to be much higher than $\\omega_{p}$. Therefore, expanding the denominator of Eq. (6.41) and anticipating $\\omega_{2} \\gg \\omega_{1}$, we write\n\n$$\n\\begin{equation*}\na(s)=a_{0} \\frac{1-s / \\omega_{0}}{1+s\\left(1 / \\omega_{1}+1 / \\omega_{2}\\right)+s^{2} /\\left(\\omega_{1} \\omega_{2}\\right)} \\cong a_{0} \\frac{1-s / \\omega_{0}}{1+s / \\omega_{1}+s^{2} /\\left(\\omega_{1} \\omega_{2}\\right)} \\tag{6.44}\n\\end{equation*}\n$$\n\nEquating the coefficients of $s$ in the denominators of Eqs. (6.40) and (6.44), we readily find\n\n$$\n\\begin{equation*}\n\\omega_{1}=\\frac{1}{R_{1}\\left[C_{1}+C_{f}\\left(1+g_{m} R_{2}+R_{2} / R_{1}\\right)\\right]+R_{2} C_{2}} \\tag{6.45}\n\\end{equation*}\n$$\n\nWe observe that in the limit $C_{2} \\rightarrow 0$, this expression differs from that of $\\omega_{p}$ derived earlier only in the denominator term $R_{2} / R_{1}$. However, $R_{2} / R_{1} \\ll g_{m} R_{2}$, so $\\omega_{1} \\cong \\omega_{p}$, confirming that the Miller approximation is quite accurate, especially considering its quicker derivation. Similarly, equating the coefficients of $s^{2}$ in the denominators of Eqs. (6.40) and (6.44),\n\n$$\n\\begin{equation*}\n\\omega_{2}=\\frac{1}{R_{1} R_{2}\\left(C_{1} C_{f}+C_{1} C_{2}+C_{f} C_{2}\\right) \\omega_{1}} \\tag{6.46}\n\\end{equation*}\n$$\n\nThe subsequent examples will confirm that $\\omega_{2} \\gg \\omega_{1}$, indicating that the frequency response of Fig. 6.20, though approximate, provides a good indication of the actual response over the relevant frequency range.\n\nEXAMPLE 6.8 (a) Determine $f_{0}, f_{1}$, and $f_{2}$ for the CE amplifier of Example 6.6. Compare with the example and comment.\n(b) Repeat, but include a substrate capacitance $C_{s}=1 \\mathrm{pF}$.\n(c) Verify with PSpice.\n\n#### Solution\n\n(a) For the BJT, Eq. (6.43) predicts a zero frequency at\n\n$$\nf_{0}=\\frac{g_{m}}{2 \\pi C_{\\mu}}=\\frac{1 / 2 \\pi}{26 \\times 0.5 \\times 10^{-12}} \\cong 12 \\mathrm{GHz}\n$$\n\nMoreover, with $R_{1}=975 \\Omega, R_{2}=4.55 \\mathrm{k} \\Omega$, and $C_{2}=0$, Eqs. (6.45) and (6.46) predict pole frequencies at\n\n$$\n\\begin{aligned}\nf_{1} & =\\frac{1 / 2 \\pi}{R_{1}\\left[C_{\\pi}+C_{\\mu}\\left(1+g_{m} R_{2}+R_{2} / R_{1}\\right)\\right]} \\\\\n& =\\frac{1 / 2 \\pi}{975[12+0.5(1+175+4.55 / 0.975)] 10^{-12}}=1.56 \\mathrm{MHz}\n\\end{aligned}\n$$\n\nand\n\n$$\n\\begin{aligned}\nf_{2} & =\\frac{1 /(2 \\pi)^{2}}{R_{1} R_{2} C_{\\pi} C_{\\mu} f_{1}} \\\\\n& =\\frac{1 /(2 \\pi)^{2}}{975 \\times 4.55 \\times 10^{3} \\times 12 \\times 10^{-12} \\times 0.5 \\times 10^{-12} \\times 1.56 \\times 10^{6}} \\\\\n& \\cong 600 \\mathrm{MHz}\n\\end{aligned}\n$$\n\nBoth $f_{0}$ and $f_{2}$ are well above $f_{1}$, so they are of negligible consequence in this example and can be ignored. The first pole frequency $\\left(f_{1}=1.56 \\mathrm{MHz}\\right)$ is slightly lower than that predicted by the Miller approximation $\\left(f_{p}=1.63 \\mathrm{MHz}\\right)$, indicating that the Miller estimate is sufficient for all practical purposes.\n(b) Recalculating with $C_{2}=C_{s}=1 \\mathrm{pF}$, we get $f_{0}=12 \\mathrm{GHz}, f_{1}=1.55 \\mathrm{MHz}$, and $f_{2} \\cong 1.3 \\mathrm{GHz}$. The effect of $C_{s}$ is minimal in this example.\nimage_name:Figure 6.22\ndescription:\n[\nname: Vsig, type: VoltageSource, value: 1 Vac, 0 Vdc, ports: {Np: Vsig, Nn: GND}\nname: Rsig, type: Resistor, value: 1.0 k, ports: {N1: Vsig, N2: X1}\nname: rb, type: Resistor, value: 200 , ports: {N1: X1, N2: V2}\nname: r, type: Resistor, value: 5.2 k, ports: {N1: V2, N2: GND}\nname: C, type: Capacitor, value: 12 pF, ports: {Np: V2, Nn: GND}\nname: C, type: Capacitor, value: 0.5 pF, ports: {Np: V2, Nn: Vo}\nname: g_m, type: VoltageControlledCurrentSource, value: 38.5 mA/V, ports: {Np: V2, Nn: Vo}\nname: ro, type: Resistor, value: 50 k, ports: {N1: Vo, N2: GND}\nname: Cs, type: Capacitor, value: 1 pF, ports: {Np: Vo, Nn: GND}\nname: RC, type: Resistor, value: 5 k, ports: {N1: Vo, N2: GND}\n]\nextrainfo:The circuit is a Common Emitter (CE) amplifier with a gain of approximately 43.057 dB or 142 V/V. The -3 dB frequency is around 1.522 MHz.\n\nFIGURE 6.22 PSpice circuit to display the gain of the CE amplifier of Example 6.8.\nimage_name:Figure 6.23\ndescription:The graph in Figure 6.23 is a Bode plot representing the gain of a Common Emitter (CE) amplifier. The x-axis is labeled 'Frequency f (Hz)' and is plotted on a logarithmic scale ranging from $10^4$ to $10^9$ Hz. The y-axis is labeled 'Gain a (dB)' and spans from -20 dB to 40 dB.\n\nThe plot displays two curves representing the gain for different values of the capacitor $C_s$: one for $C_s = 0$ and another for $C_s = 1$ pF. Both curves start with a high gain of approximately 43 dB at lower frequencies.\n\nThe gain remains relatively constant up to around $10^6$ Hz, after which it begins to decrease. The -3 dB cutoff frequency, where the gain drops by 3 dB from its maximum value, is indicated at approximately 1.522 MHz (or $1.522 \\times 10^6$ Hz).\n\nFor frequencies beyond $10^6$ Hz, the gain decreases more rapidly, with the $C_s = 1$ pF curve showing a slightly faster decline compared to the $C_s = 0$ curve. This indicates the minimal role played by the capacitor $C_s$ in affecting the amplifier's gain at these frequencies.\n\nThe plot confirms the amplifier's gain of approximately 43.057 dB or 142 V/V as calculated and discussed in the context. The annotations highlight the different curves for the two capacitor values, emphasizing the slight impact of $C_s$ on the gain at higher frequencies.\n\nFIGURE 6.23 Gain plot of the circuit of Fig. 6.22.\n(c) Using the PSpice circuit of Fig. 6.22, we obtain the gain plot of Fig. 6.23. Using the cursor facility, we find $\\left|a_{0}\\right|=43.057 \\mathrm{~dB}$, or $142 \\mathrm{~V} / \\mathrm{V}$, and $f_{-3 \\mathrm{~dB}}=$ 1.522 MHz, in agreement with the calculations. The plot confirms the minimal role played by $C_{s}$ in this example.\n\nRemark: An IC designer would typically simulate an amplifier using a PSpice model for the transistor. However, for pedagogical purposes, it is more convenient to use the simplified model depicted in Fig. 6.22.\n\n#### Exercise 6.3\n\nFind $f_{0}, f_{1}$, and $f_{2}$ for the CS amplifier of Example 6.7, if $C_{d b}=0.1 \\mathrm{pF}$. Compare with the results obtained there and comment.\nAns. $f_{0}=6.4 \\mathrm{GHz}, f_{1}=5.0 \\mathrm{MHz}$, and $f_{2} \\cong 1 \\mathrm{GHz} ; f_{p}=5.15 \\mathrm{MHz}\\left(\\cong f_{1}\\right)$."
},
{
    "text": "To evaluate the precision of the Miller approximation and gain deeper insights into circuit behavior, let's conduct an exact analysis of the small-signal circuit depicted in Fig. 6.16. While doing so, we'll also generalize by incorporating the output node capacitance $C_{2}$, as shown in Fig. 6.21. It is known that the collector of a monolithic BJT exhibits a collector-to-substrate capacitance $C_{s}$, and the drain of a FET exhibits a drain-to-body capacitance $C_{d b}$. Furthermore, in practical applications, the output node is often loaded by an external capacitance $C_{L}$. Therefore, generally, $C_{2}=C_{s}+C_{L}$ for BJTs and $C_{2}=C_{d b}+C_{L}$ for FETs.\n\nApplying KCL at the node to the left of $C_{f}$ yields\n\n$$\n\\frac{V_{i}-V_{1}}{R_{1}}=\\frac{V_{1}}{1 /\\left(s C_{1}\\right)}+\\frac{V_{1}-V_{o}}{1 /\\left(s C_{f}\\right)}\n$$\n\nimage_name:FIGURE 6.21\ndescription:\n[\nname: Vi, type: VoltageSource, value: Vi, ports: {Np: Vi, Nn: GND}\nname: R1, type: Resistor, value: R1, ports: {N1: Vi, N2: V1}\nname: C1, type: Capacitor, value: C1, ports: {Np: V1, Nn: GND}\nname: Cf, type: Capacitor, value: Cf, ports: {Np: V1, Nn: Vo}\nname: gmV1, type: VoltageControlledCurrentSource, value: gmV1, ports: {Np: Vo, Nn: GND}\nname: R2, type: Resistor, value: R2, ports: {N1: Vo, N2: GND}\nname: C2, type: Capacitor, value: C2, ports: {Np: Vo, Nn: GND}\n]\nextrainfo:The circuit is an AC small-signal model for analyzing common-emitter/common-source amplifiers with feedback capacitance Cf. It includes input voltage Vi, resistors R1 and R2, capacitors C1, Cf, and C2, and a voltage-controlled current source gmV1.\n\nFIGURE 6.21 Ac circuit for a more precise analysis of CE/CS amplifiers.\n\nSimilarly, KCL at the node to the right of $C_{f}$ gives\n\n$$\n\\frac{V_{1}-V_{o}}{1 / s C_{f}}=g_{m} V_{1}+\\frac{V_{o}}{R_{2}}+\\frac{V_{o}}{1 / s C_{2}}\n$$\n\nBy eliminating $V_{1}$ and solving for the ratio $V_{o} / V_{i}$, we obtain, after some algebraic manipulation,\n\n$$\n\\begin{align*}\na(s) & =\\frac{V_{o}}{V_{i}} \\\\\n& =\\frac{\\left(-g_{m} R_{2}\\right) \\times\\left(1-s C_{f} / g_{m}\\right)}{1+s\\left\\{R_{1}\\left[C_{1}+C_{f}\\left(1+g_{m} R_{2}\\right)\\right]+R_{2}\\left(C_{f}+C_{2}\\right)\\right\\}+s^{2} R_{1} R_{2}\\left(C_{1} C_{f}+C_{1} C_{2}+C_{f} C_{2}\\right)} \\tag{6.40}\n\\end{align*}\n$$\n\nThe denominator is a quadratic polynomial in $s$, so $a(s)$ has two poles. Denoting the corresponding pole frequencies as $\\omega_{1}$ and $\\omega_{2}$, we express the gain more succinctly in the standard form of Eq. (6A.1) in the Appendix,\n\n$$\n\\begin{equation*}\na(s)=a_{0} \\frac{1-s / \\omega_{0}}{\\left(1+s / \\omega_{1}\\right)\\left(1+s / \\omega_{2}\\right)} \\tag{6.41}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\na_{0}=-g_{m} R_{2} \\tag{6.42}\n\\end{equation*}\n$$\n\nis the familiar low-frequency gain, and\n\n$$\n\\begin{equation*}\n\\omega_{0}=\\frac{g_{m}}{C_{f}} \\tag{6.43}\n\\end{equation*}\n$$\n\nis the zero frequency of $a(s)$. Physically, at this frequency, the current fed forward via $C_{f}$ equals the current drawn by the dependent source, resulting in a net current of zero through the parallel combination of $R_{2}$ and $C_{2}$. Consequently, $V_{o}$ drops to zero, implying a gain of zero at this frequency. As a physical check, when $V_{o}=0$, we have $I_{f}=\\left(V_{\\pi}-0\\right) /\\left(1 / s C_{f}\\right)=s C_{f} V_{\\pi}$, so imposing $s C_{f} V_{\\pi}=g_{m} V_{\\pi}$ yields $s=g_{m} / C_{f}$. In the $s$ plane, this zero is located on the positive real axis. Note that for $\\omega>\\omega_{0}$, the current through $C_{f}$ exceeds that of the dependent source, indicating gain-polarity reversal. This provides a physical justification for the negative sign in the numerator of Eq. (6.41); combined with the negative sign of Eq. (6.42), it causes the gain to become positive for $\\omega>\\omega_{0}$. By Eqs. (6.12) and (6.24), $\\omega_{0} \\gg \\omega_{T}$.\n\nWe now aim to derive expressions for the pole frequencies $\\omega_{1}$ and $\\omega_{2}$. Based on the Miller approximation, we expect $\\omega_{1}$ to be close to $\\omega_{p}$, and $\\omega_{2}$ to be much higher than $\\omega_{p}$. Consequently, expanding the denominator of Eq. (6.41) and anticipating $\\omega_{2} \\gg \\omega_{1}$, we write\n\n$$\n\\begin{equation*}\na(s)=a_{0} \\frac{1-s / \\omega_{0}}{1+s\\left(1 / \\omega_{1}+1 / \\omega_{2}\\right)+s^{2} /\\left(\\omega_{1} \\omega_{2}\\right)} \\cong a_{0} \\frac{1-s / \\omega_{0}}{1+s / \\omega_{1}+s^{2} /\\left(\\omega_{1} \\omega_{2}\\right)} \\tag{6.44}\n\\end{equation*}\n$$\n\nEquating the coefficients of $s$ in the denominators of Eqs. (6.40) and (6.44), we readily find\n\n$$\n\\begin{equation*}\n\\omega_{1}=\\frac{1}{R_{1}\\left[C_{1}+C_{f}\\left(1+g_{m} R_{2}+R_{2} / R_{1}\\right)\\right]+R_{2} C_{2}} \\tag{6.45}\n\\end{equation*}\n$$\n\nWe observe that in the limit $C_{2} \\rightarrow 0$, this expression differs from that of $\\omega_{p}$ derived earlier only in the denominator term $R_{2} / R_{1}$. However, $R_{2} / R_{1} \\ll g_{m} R_{2}$, so $\\omega_{1} \\cong \\omega_{p}$, confirming that the Miller approximation is highly accurate, especially considering its quicker derivation. Similarly, equating the coefficients of $s^{2}$ in the denominators of Eqs. (6.40) and (6.44),\n\n$$\n\\begin{equation*}\n\\omega_{2}=\\frac{1}{R_{1} R_{2}\\left(C_{1} C_{f}+C_{1} C_{2}+C_{f} C_{2}\\right) \\omega_{1}} \\tag{6.46}\n\\end{equation*}\n$$\n\nThe following examples will confirm that $\\omega_{2} \\gg \\omega_{1}$, indicating that the frequency response of Fig. 6.20, though approximate, provides a good indication of the actual response over the relevant frequency range.\n\nEXAMPLE 6.8 (a) Determine $f_{0}, f_{1}$, and $f_{2}$ for the CE amplifier of Example 6.6. Compare with the example and comment.\n(b) Repeat, but include a substrate capacitance $C_{s}=1 \\mathrm{pF}$.\n(c) Verify with PSpice.\n\n#### Solution\n\n(a) For the BJT, Eq. (6.43) predicts a zero frequency at\n\n$$\nf_{0}=\\frac{g_{m}}{2 \\pi C_{\\mu}}=\\frac{1 / 2 \\pi}{26 \\times 0.5 \\times 10^{-12}} \\cong 12 \\mathrm{GHz}\n$$\n\nMoreover, with $R_{1}=975 \\Omega, R_{2}=4.55 \\mathrm{k} \\Omega$, and $C_{2}=0$, Eqs. (6.45) and (6.46) predict pole frequencies at\n\n$$\n\\begin{aligned}\nf_{1} & =\\frac{1 / 2 \\pi}{R_{1}\\left[C_{\\pi}+C_{\\mu}\\left(1+g_{m} R_{2}+R_{2} / R_{1}\\right)\\right]} \\\\\n& =\\frac{1 / 2 \\pi}{975[12+0.5(1+175+4.55 / 0.975)] 10^{-12}}=1.56 \\mathrm{MHz}\n\\end{aligned}\n$$\n\nand\n\n$$\n\\begin{aligned}\nf_{2} & =\\frac{1 /(2 \\pi)^{2}}{R_{1} R_{2} C_{\\pi} C_{\\mu} f_{1}} \\\\\n& =\\frac{1 /(2 \\pi)^{2}}{975 \\times 4.55 \\times 10^{3} \\times 12 \\times 10^{-12} \\times 0.5 \\times 10^{-12} \\times 1.56 \\times 10^{6}} \\\\\n& \\cong 600 \\mathrm{MHz}\n\\end{aligned}\n$$\n\nBoth $f_{0}$ and $f_{2}$ are well above $f_{1}$, so they are of negligible consequence in this example and can be ignored. The first pole frequency $\\left(f_{1}=1.56 \\mathrm{MHz}\\right)$ is slightly lower than that predicted by the Miller approximation $\\left(f_{p}=1.63 \\mathrm{MHz}\\right)$, indicating that the Miller estimate is sufficient for all practical purposes.\n(b) Recalculating with $C_{2}=C_{s}=1 \\mathrm{pF}$, we get $f_{0}=12 \\mathrm{GHz}, f_{1}=1.55 \\mathrm{MHz}$, and $f_{2} \\cong 1.3 \\mathrm{GHz}$. The effect of $C_{s}$ is minimal in this example.\nimage_name:Figure 6.22\ndescription:\n[\nname: Vsig, type: VoltageSource, value: 1 Vac, 0 Vdc, ports: {Np: Vsig, Nn: GND}\nname: Rsig, type: Resistor, value: 1.0 k, ports: {N1: Vsig, N2: X1}\nname: rb, type: Resistor, value: 200 , ports: {N1: X1, N2: V2}\nname: r, type: Resistor, value: 5.2 k, ports: {N1: V2, N2: GND}\nname: C, type: Capacitor, value: 12 pF, ports: {Np: V2, Nn: GND}\nname: C, type: Capacitor, value: 0.5 pF, ports: {Np: V2, Nn: Vo}\nname: g_m, type: VoltageControlledCurrentSource, value: 38.5 mA/V, ports: {Np: V2, Nn: Vo}\nname: ro, type: Resistor, value: 50 k, ports: {N1: Vo, N2: GND}\nname: Cs, type: Capacitor, value: 1 pF, ports: {Np: Vo, Nn: GND}\nname: RC, type: Resistor, value: 5 k, ports: {N1: Vo, N2: GND}\n]\nextrainfo:The circuit is a Common Emitter (CE) amplifier with a gain of approximately 43.057 dB or 142 V/V. The -3 dB frequency is around 1.522 MHz.\n\nFIGURE 6.22 PSpice circuit to display the gain of the CE amplifier of Example 6.8.\nimage_name:Figure 6.23\ndescription:The graph in Figure 6.23 is a Bode plot representing the gain of a Common Emitter (CE) amplifier. The x-axis is labeled 'Frequency f (Hz)' and is plotted on a logarithmic scale ranging from $10^4$ to $10^9$ Hz. The y-axis is labeled 'Gain a (dB)' and spans from -20 dB to 40 dB.\n\nThe plot displays two curves representing the gain for different values of the capacitor $C_s$: one for $C_s = 0$ and another for $C_s = 1$ pF. Both curves start with a high gain of approximately 43 dB at lower frequencies.\n\nThe gain remains relatively constant up to around $10^6$ Hz, after which it begins to decrease. The -3 dB cutoff frequency, where the gain drops by 3 dB from its maximum value, is indicated at approximately 1.522 MHz (or $1.522 \\times 10^6$ Hz).\n\nFor frequencies beyond $10^6$ Hz, the gain decreases more rapidly, with the $C_s = 1$ pF curve showing a slightly faster decline compared to the $C_s = 0$ curve. This indicates the minimal role played by the capacitor $C_s$ in affecting the amplifier's gain at these frequencies.\n\nThe plot confirms the amplifier's gain of approximately 43.057 dB or 142 V/V as calculated and discussed in the context. The annotations highlight the different curves for the two capacitor values, emphasizing the slight impact of $C_s$ on the gain at higher frequencies.\n\nFIGURE 6.23 Gain plot of the circuit of Fig. 6.22.\n(c) Using the PSpice circuit of Fig. 6.22, we obtain the gain plot of Fig. 6.23. Using the cursor facility, we find $\\left|a_{0}\\right|=43.057 \\mathrm{~dB}$, or $142 \\mathrm{~V} / \\mathrm{V}$, and $f_{-3 \\mathrm{~dB}}=$ 1.522 MHz, in agreement with the calculations. The plot confirms the minimal role played by $C_{s}$ in this example.\n\nRemark: An IC designer would typically simulate an amplifier using a PSpice model for the transistor. However, for pedagogical purposes, it is more convenient to work with the simplified model depicted in Fig. 6.22.\n\n#### Exercise 6.3\n\nFind $f_{0}, f_{1}$, and $f_{2}$ for the CS amplifier of Example 6.7, if $C_{d b}=0.1 \\mathrm{pF}$. Compare with the results obtained there and comment.\nAns. $f_{0}=6.4 \\mathrm{GHz}, f_{1}=5.0 \\mathrm{MHz}$, and $f_{2} \\cong 1 \\mathrm{GHz} ; f_{p}=5.15 \\mathrm{MHz}\\left(\\cong f_{1}\\right)$."
},
{
    "text": "To evaluate the precision of the Miller approximation and gain deeper insights into circuit behavior, let's conduct an exact analysis of the small-signal circuit depicted in Fig. 6.16. While doing so, we'll also generalize by incorporating the output node capacitance $C_{2}$, as illustrated in Fig. 6.21. It's known that the collector of a monolithic BJT exhibits a collector-to-substrate capacitance $C_{s}$, and the drain of a FET exhibits a drain-to-body capacitance $C_{d b}$. Furthermore, in practical applications, the output node is often loaded by an external capacitance $C_{L}$. Therefore, generally, $C_{2}=C_{s}+C_{L}$ for BJTs and $C_{2}=C_{d b}+C_{L}$ for FETs.\n\nApplying KCL at the node to the left of $C_{f}$ yields\n\n$$\n\\frac{V_{i}-V_{1}}{R_{1}}=\\frac{V_{1}}{1 /\\left(s C_{1}\\right)}+\\frac{V_{1}-V_{o}}{1 /\\left(s C_{f}\\right)}\n$$\n\nimage_name:FIGURE 6.21\ndescription:\n[\nname: Vi, type: VoltageSource, value: Vi, ports: {Np: Vi, Nn: GND}\nname: R1, type: Resistor, value: R1, ports: {N1: Vi, N2: V1}\nname: C1, type: Capacitor, value: C1, ports: {Np: V1, Nn: GND}\nname: Cf, type: Capacitor, value: Cf, ports: {Np: V1, Nn: Vo}\nname: gmV1, type: VoltageControlledCurrentSource, value: gmV1, ports: {Np: Vo, Nn: GND}\nname: R2, type: Resistor, value: R2, ports: {N1: Vo, N2: GND}\nname: C2, type: Capacitor, value: C2, ports: {Np: Vo, Nn: GND}\n]\nextrainfo:The circuit is an AC small-signal model for analyzing common-emitter/common-source amplifiers with feedback capacitance Cf. It includes input voltage Vi, resistors R1 and R2, capacitors C1, Cf, and C2, and a voltage-controlled current source gmV1.\n\nFIGURE 6.21 Ac circuit for a more accurate analysis of the CE/CS amplifiers.\n\nSimilarly, KCL at the node to the right of $C_{f}$ results in\n\n$$\n\\frac{V_{1}-V_{o}}{1 / s C_{f}}=g_{m} V_{1}+\\frac{V_{o}}{R_{2}}+\\frac{V_{o}}{1 / s C_{2}}\n$$\n\nBy eliminating $V_{1}$ and solving for the ratio $V_{o} / V_{i}$, we obtain, after some algebraic manipulation,\n\n$$\n\\begin{align*}\na(s) & =\\frac{V_{o}}{V_{i}} \\\\\n& =\\frac{\\left(-g_{m} R_{2}\\right) \\times\\left(1-s C_{f} / g_{m}\\right)}{1+s\\left\\{R_{1}\\left[C_{1}+C_{f}\\left(1+g_{m} R_{2}\\right)\\right]+R_{2}\\left(C_{f}+C_{2}\\right)\\right\\}+s^{2} R_{1} R_{2}\\left(C_{1} C_{f}+C_{1} C_{2}+C_{f} C_{2}\\right)} \\tag{6.40}\n\\end{align*}\n$$\n\nThe denominator is a quadratic polynomial in $s$, so $a(s)$ has two poles. Denoting the corresponding pole frequencies as $\\omega_{1}$ and $\\omega_{2}$, we express the gain more succinctly in the standard form of Eq. (6A.1) in the Appendix,\n\n$$\n\\begin{equation*}\na(s)=a_{0} \\frac{1-s / \\omega_{0}}{\\left(1+s / \\omega_{1}\\right)\\left(1+s / \\omega_{2}\\right)} \\tag{6.41}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\na_{0}=-g_{m} R_{2} \\tag{6.42}\n\\end{equation*}\n$$\n\nis the well-known low-frequency gain, and\n\n$$\n\\begin{equation*}\n\\omega_{0}=\\frac{g_{m}}{C_{f}} \\tag{6.43}\n\\end{equation*}\n$$\n\nis the zero frequency of $a(s)$. Physically, at this frequency, the current fed forward via $C_{f}$ equals the current drawn by the dependent source, resulting in zero net current through the parallel combination of $R_{2}$ and $C_{2}$. Consequently, $V_{o}$ drops to zero, implying a gain of zero at this frequency. As a physical check, when $V_{o}=0$, we have $I_{f}=\\left(V_{\\pi}-0\\right) /\\left(1 / s C_{f}\\right)=s C_{f} V_{\\pi}$, so imposing $s C_{f} V_{\\pi}=g_{m} V_{\\pi}$ yields $s=g_{m} / C_{f}$. In the $s$ plane, this zero lies on the positive real axis. Note that for $\\omega>\\omega_{0}$, the current through $C_{f}$ exceeds that of the dependent source, indicating gain-polarity reversal. This provides a physical justification for the negative sign in the numerator of Eq. (6.41); combined with the negative sign of Eq. (6.42), it causes the gain to become positive for $\\omega>\\omega_{0}$. By Eqs. (6.12) and (6.24), $\\omega_{0} \\gg \\omega_{T}$.\n\nWe now aim to derive expressions for the pole frequencies $\\omega_{1}$ and $\\omega_{2}$. Based on the Miller approximation, we expect $\\omega_{1}$ to be close to $\\omega_{p}$, and $\\omega_{2}$ to be much higher than $\\omega_{p}$. Thus, expanding the denominator of Eq. (6.41) and anticipating $\\omega_{2} \\gg \\omega_{1}$, we write\n\n$$\n\\begin{equation*}\na(s)=a_{0} \\frac{1-s / \\omega_{0}}{1+s\\left(1 / \\omega_{1}+1 / \\omega_{2}\\right)+s^{2} /\\left(\\omega_{1} \\omega_{2}\\right)} \\cong a_{0} \\frac{1-s / \\omega_{0}}{1+s / \\omega_{1}+s^{2} /\\left(\\omega_{1} \\omega_{2}\\right)} \\tag{6.44}\n\\end{equation*}\n$$\n\nEquating the coefficients of $s$ in the denominators of Eqs. (6.40) and (6.44), we readily find\n\n$$\n\\begin{equation*}\n\\omega_{1}=\\frac{1}{R_{1}\\left[C_{1}+C_{f}\\left(1+g_{m} R_{2}+R_{2} / R_{1}\\right)\\right]+R_{2} C_{2}} \\tag{6.45}\n\\end{equation*}\n$$\n\nWe observe that in the limit $C_{2} \\rightarrow 0$, this expression differs from that of $\\omega_{p}$ derived earlier only in the denominator term $R_{2} / R_{1}$. However, $R_{2} / R_{1} \\ll g_{m} R_{2}$, so $\\omega_{1} \\cong \\omega_{p}$, confirming the excellent accuracy of the Miller approximation, especially considering its quicker derivation. Similarly, equating the coefficients of $s^{2}$ in the denominators of Eqs. (6.40) and (6.44),\n\n$$\n\\begin{equation*}\n\\omega_{2}=\\frac{1}{R_{1} R_{2}\\left(C_{1} C_{f}+C_{1} C_{2}+C_{f} C_{2}\\right) \\omega_{1}} \\tag{6.46}\n\\end{equation*}\n$$\n\nThe upcoming examples will confirm that $\\omega_{2} \\gg \\omega_{1}$, indicating that the frequency response of Fig. 6.20, though approximate, provides a good indication of the actual response over the relevant frequency range.\n\nEXAMPLE 6.8 (a) Determine $f_{0}, f_{1}$, and $f_{2}$ for the CE amplifier of Example 6.6. Compare with the example and comment.\n(b) Repeat, but include a substrate capacitance $C_{s}=1 \\mathrm{pF}$.\n(c) Verify with PSpice.\n\n#### Solution\n\n(a) For the BJT, Eq. (6.43) predicts a zero frequency at\n\n$$\nf_{0}=\\frac{g_{m}}{2 \\pi C_{\\mu}}=\\frac{1 / 2 \\pi}{26 \\times 0.5 \\times 10^{-12}} \\cong 12 \\mathrm{GHz}\n$$\n\nMoreover, with $R_{1}=975 \\Omega, R_{2}=4.55 \\mathrm{k} \\Omega$, and $C_{2}=0$, Eqs. (6.45) and (6.46) predict pole frequencies at\n\n$$\n\\begin{aligned}\nf_{1} & =\\frac{1 / 2 \\pi}{R_{1}\\left[C_{\\pi}+C_{\\mu}\\left(1+g_{m} R_{2}+R_{2} / R_{1}\\right)\\right]} \\\\\n& =\\frac{1 / 2 \\pi}{975[12+0.5(1+175+4.55 / 0.975)] 10^{-12}}=1.56 \\mathrm{MHz}\n\\end{aligned}\n$$\n\nand\n\n$$\n\\begin{aligned}\nf_{2} & =\\frac{1 /(2 \\pi)^{2}}{R_{1} R_{2} C_{\\pi} C_{\\mu} f_{1}} \\\\\n& =\\frac{1 /(2 \\pi)^{2}}{975 \\times 4.55 \\times 10^{3} \\times 12 \\times 10^{-12} \\times 0.5 \\times 10^{-12} \\times 1.56 \\times 10^{6}} \\\\\n& \\cong 600 \\mathrm{MHz}\n\\end{aligned}\n$$\n\nBoth $f_{0}$ and $f_{2}$ are well above $f_{1}$, so they are of negligible consequence in this example and can be ignored. The first pole frequency $\\left(f_{1}=1.56 \\mathrm{MHz}\\right)$ is slightly lower than that predicted by the Miller approximation $\\left(f_{p}=1.63 \\mathrm{MHz}\\right)$, indicating that the Miller estimate is sufficient for all practical purposes.\n(b) Recalculating with $C_{2}=C_{s}=1 \\mathrm{pF}$, we get $f_{0}=12 \\mathrm{GHz}, f_{1}=1.55 \\mathrm{MHz}$, and $f_{2} \\cong 1.3 \\mathrm{GHz}$. The effect of $C_{s}$ is minimal in this example.\nimage_name:Figure 6.22\ndescription:\n[\nname: Vsig, type: VoltageSource, value: 1 Vac, 0 Vdc, ports: {Np: Vsig, Nn: GND}\nname: Rsig, type: Resistor, value: 1.0 k, ports: {N1: Vsig, N2: X1}\nname: rb, type: Resistor, value: 200 , ports: {N1: X1, N2: V2}\nname: r, type: Resistor, value: 5.2 k, ports: {N1: V2, N2: GND}\nname: C, type: Capacitor, value: 12 pF, ports: {Np: V2, Nn: GND}\nname: C, type: Capacitor, value: 0.5 pF, ports: {Np: V2, Nn: Vo}\nname: g_m, type: VoltageControlledCurrentSource, value: 38.5 mA/V, ports: {Np: V2, Nn: Vo}\nname: ro, type: Resistor, value: 50 k, ports: {N1: Vo, N2: GND}\nname: Cs, type: Capacitor, value: 1 pF, ports: {Np: Vo, Nn: GND}\nname: RC, type: Resistor, value: 5 k, ports: {N1: Vo, N2: GND}\n]\nextrainfo:The circuit is a Common Emitter (CE) amplifier with a gain of approximately 43.057 dB or 142 V/V. The -3 dB frequency is around 1.522 MHz.\n\nFIGURE 6.22 PSpice circuit to display the gain of the CE amplifier of Example 6.8.\nimage_name:Figure 6.23\ndescription:The graph in Figure 6.23 is a Bode plot representing the gain of a Common Emitter (CE) amplifier. The x-axis is labeled 'Frequency f (Hz)' and is plotted on a logarithmic scale ranging from $10^4$ to $10^9$ Hz. The y-axis is labeled 'Gain a (dB)' and spans from -20 dB to 40 dB.\n\nThe plot displays two curves representing the gain for different values of the capacitor $C_s$: one for $C_s = 0$ and another for $C_s = 1$ pF. Both curves start with a high gain of approximately 43 dB at lower frequencies.\n\nThe gain remains relatively constant up to around $10^6$ Hz, after which it begins to decrease. The -3 dB cutoff frequency, where the gain drops by 3 dB from its maximum value, is indicated at approximately 1.522 MHz (or $1.522 \\times 10^6$ Hz).\n\nFor frequencies beyond $10^6$ Hz, the gain decreases more rapidly, with the $C_s = 1$ pF curve showing a slightly faster decline compared to the $C_s = 0$ curve. This indicates the minimal role played by the capacitor $C_s$ in affecting the amplifier's gain at these frequencies.\n\nThe plot confirms the amplifier's gain of approximately 43.057 dB or 142 V/V as calculated and discussed in the context. The annotations highlight the different curves for the two capacitor values, emphasizing the slight impact of $C_s$ on the gain at higher frequencies.\n\nFIGURE 6.23 Gain plot of the circuit of Fig. 6.22.\n(c) Using the PSpice circuit of Fig. 6.22, we obtain the gain plot of Fig. 6.23. Using the cursor facility, we find $\\left|a_{0}\\right|=43.057 \\mathrm{~dB}$, or $142 \\mathrm{~V} / \\mathrm{V}$, and $f_{-3 \\mathrm{~dB}}=$ 1.522 MHz, in agreement with the calculations. The plot confirms the minimal impact of $C_{s}$ in this example.\n\nRemark: An IC designer would typically simulate an amplifier using a PSpice model for the transistor. However, for pedagogical purposes, it is more convenient to use the simplified model depicted in Fig. 6.22.\n\n#### Exercise 6.3\n\nFind $f_{0}, f_{1}$, and $f_{2}$ for the CS amplifier of Example 6.7, if $C_{d b}=0.1 \\mathrm{pF}$. Compare with the results obtained there and comment.\nAns. $f_{0}=6.4 \\mathrm{GHz}, f_{1}=5.0 \\mathrm{MHz}$, and $f_{2} \\cong 1 \\mathrm{GHz} ; f_{p}=5.15 \\mathrm{MHz}\\left(\\cong f_{1}\\right)$."
},
{
    "text": "Considering the critical role of the differential amplifier as a fundamental analog component, it is essential to thoroughly examine its frequency response. While analyzing the frequency characteristics of a single-transistor stage can be tedious, doing so for a transistor pair can become extremely intricate. Fortunately, employing the half-circuit concepts discussed in Chapter 4 significantly simplifies our task, offering valuable insights with minimal mathematical effort. (It is physical intuition, more so than formulas, that steers IC designers in their daily work.)\n\nAs is well-known, the function of a differential amplifier is to amplify the voltage difference between two signals, regardless of their common-mode component. The common-mode rejection ratio\n\n$$\n\\begin{equation*}\n\\mathrm{CMRR}=\\left|\\frac{a_{d m}(j f)}{a_{c m}(j f)}\\right| \\tag{6.47}\n\\end{equation*}\n$$\n\nserves as a key performance metric for the differential amplifier, ideally aiming to be as large as possible (preferably infinite). In practical scenarios, we observe that the CMRR, despite being initially high, degrades with increasing frequency, since both the differential-mode gain $a_{d m}(j f)$ and the common-mode gain $a_{c m}(j f)$ also decline with frequency."
},
{
    "text": "Considering the significance of the differential amplifier as a fundamental analog component, it is fitting that we delve deeply into its frequency response. While analyzing the frequency characteristics of a single-transistor stage can be tedious, doing so for a transistor pair can become overwhelmingly intricate. Fortunately, the application of half-circuit concepts, as outlined in Chapter 4, greatly simplifies our task and offers invaluable insights with minimal mathematical complexity. (It is physical intuition, more so than formulas, that steers IC designers in their daily tasks.)\n\nAs is well-known, the function of a differential amplifier is to amplify the voltage difference between two signals, regardless of their common-mode component. The common-mode rejection ratio\n\n$$\n\\begin{equation*}\n\\mathrm{CMRR}=\\left|\\frac{a_{d m}(j f)}{a_{c m}(j f)}\\right| \\tag{6.47}\n\\end{equation*}\n$$\n\nserves as a key performance metric for the differential amplifier, ideally aiming to be as large as possible (preferably infinite). In reality, we observe that the CMRR, despite being high initially, degrades with increasing frequency, due to the concurrent decline in both the differential-mode gain $a_{d m}(j f)$ and the common-mode gain $a_{c m}(j f)$."
},
{
    "text": "Considering the significance of the differential amplifier as a fundamental analog component, it is essential to thoroughly examine its frequency response. While analyzing the frequency characteristics of a single-transistor stage can be tedious, doing so for a transistor pair can become exceptionally intricate. Fortunately, the application of half-circuit concepts from Chapter 4 greatly simplifies our task, offering valuable insights with minimal mathematical complexity. (Practical understanding, rather than formulas, predominantly guides IC designers in their routine activities.)\n\nAs is well-known, the function of a differential amplifier is to amplify the voltage difference between two signals, regardless of their common-mode component. The common-mode rejection ratio\n\n$$\n\\begin{equation*}\n\\mathrm{CMRR}=\\left|\\frac{a_{d m}(j f)}{a_{c m}(j f)}\\right| \\tag{6.47}\n\\end{equation*}\n$$\n\nserves as a key performance metric for the differential amplifier, ideally aiming to be as large as possible (preferably infinite). In practical scenarios, we observe that the CMRR, despite being high initially, degrades with increasing frequency, primarily because both the differential-mode gain $a_{d m}(j f)$ and the common-mode gain $a_{c m}(j f)$ also diminish with frequency."
},
{
    "text": "Considering the critical role of the differential amplifier as a fundamental analog component, it is essential to delve deeply into its frequency response. While analyzing the frequency characteristics of a single-transistor stage can be tedious, examining a transistor pair escalates to considerable complexity. Fortunately, the application of half-circuit concepts from Chapter 4 significantly streamlines our analysis, offering valuable insights with minimal mathematical effort. (It is physical intuition, more so than formulas, that steers IC designers in their routine tasks.)\n\nAs is well understood, the function of a differential amplifier is to amplify the voltage disparity between two signals, disregarding their common-mode portion. The common-mode rejection ratio\n\n$$\n\\begin{equation*}\n\\mathrm{CMRR}=\\left|\\frac{a_{d m}(j f)}{a_{c m}(j f)}\\right| \\tag{6.47}\n\\end{equation*}\n$$\n\nserves as a key performance metric for the differential amplifier, ideally aiming to be as high as possible (preferably infinite). In practical scenarios, we observe that the CMRR, despite being initially high, degrades with increasing frequency, as both the differential-mode gain $a_{d m}(j f)$ and the common-mode gain $a_{c m}(j f)$ also diminish with frequency."
},
{
    "text": "Considering the significance of the differential amplifier as a fundamental analog component, it is fitting to delve deeply into its frequency response. While analyzing the frequency characteristics of a single-transistor stage can be tedious, doing so for a transistor pair can become profoundly intricate. Fortunately, the application of half-circuit concepts, as discussed in Chapter 4, greatly simplifies our task and offers valuable insights with minimal mathematical complexity. (It is physical intuition, more so than formulas, that steers IC designers in their daily work.)\n\nAs is well-known, the function of a differential amplifier is to amplify the voltage difference between two signals, regardless of their common-mode component. The common-mode rejection ratio\n\n$$\n\\begin{equation*}\n\\mathrm{CMRR}=\\left|\\frac{a_{d m}(j f)}{a_{c m}(j f)}\\right| \\tag{6.47}\n\\end{equation*}\n$$\n\nserves as a key performance metric for the differential amplifier, ideally being as large as possible (preferably infinite). In practical scenarios, we observe that the CMRR, despite being initially high, degrades with increasing frequency, since both the differential-mode gain $a_{d m}(j f)$ and the common-mode gain $a_{c m}(j f)$ also diminish with frequency."
},
{
    "text": "Considering the significance of the differential amplifier as a fundamental analog component, it is essential to thoroughly examine its frequency response. While analyzing the frequency characteristics of a single-transistor stage can be tedious, doing so for a transistor pair can become exceptionally intricate. Fortunately, employing the half-circuit concepts presented in Chapter 4 substantially simplifies our task, offering valuable insights with minimal mathematical effort. (It is physical intuition, more so than formulas, that predominantly guides IC designers in their everyday work.)\n\nAs is well known, the function of a differential amplifier is to amplify the voltage difference between two signals, regardless of their common-mode component. The common-mode rejection ratio\n\n$$\n\\begin{equation*}\n\\mathrm{CMRR}=\\left|\\frac{a_{d m}(j f)}{a_{c m}(j f)}\\right| \\tag{6.47}\n\\end{equation*}\n$$\n\nserves as a key performance metric for the differential amplifier, ideally aiming to be as large as possible (preferably infinite). In practical scenarios, we observe that the CMRR, despite being high initially, degrades with increasing frequency, as both the differential-mode gain $a_{d m}(j f)$ and the common-mode gain $a_{c m}(j f)$ also decline with frequency."
},
{
    "text": "Considering the significance of the differential amplifier as a fundamental analog component, it is essential to thoroughly examine its frequency response. While analyzing the frequency characteristics of a single-transistor stage can be tedious, doing so for a transistor pair can become overwhelmingly intricate. Fortunately, the application of half-circuit concepts presented in Chapter 4 greatly simplifies our task, offering valuable insights with minimal mathematical complexity. (Physical intuition, rather than formulas, predominantly guides IC designers in their daily work.)\n\nAs is well known, the function of a differential amplifier is to amplify the voltage difference between two signals, regardless of their common-mode component. The common-mode rejection ratio\n\n$$\n\\begin{equation*}\n\\mathrm{CMRR}=\\left|\\frac{a_{d m}(j f)}{a_{c m}(j f)}\\right| \\tag{6.47}\n\\end{equation*}\n$$\n\nserves as a key performance metric for the differential amplifier, ideally being as large as possible (preferably infinite). In practical scenarios, we observe that the CMRR, despite being initially high, degrades with increasing frequency, as both the differential-mode gain $a_{d m}(j f)$ and the common-mode gain $a_{c m}(j f)$ similarly decline."
},
{
    "text": "Considering the critical role of the differential amplifier as a fundamental analog component, it is essential to delve deeply into its frequency response. While analyzing the frequency characteristics of a single-transistor stage can be tedious, examining a transistor pair escalates to significant complexity. Fortunately, the application of half-circuit concepts from Chapter 4 greatly streamlines our analysis, offering valuable insights with minimal mathematical effort. (Physical intuition, rather than formulas, predominantly guides IC designers in their routine tasks.)\n\nAs is well understood, the function of a differential amplifier is to amplify the voltage disparity between two signals, disregarding their common-mode component. The common-mode rejection ratio\n\n$$\n\\begin{equation*}\n\\mathrm{CMRR}=\\left|\\frac{a_{d m}(j f)}{a_{c m}(j f)}\\right| \\tag{6.47}\n\\end{equation*}\n$$\n\nserves as a key performance metric for the differential amplifier, ideally aiming to be as large as possible (preferably infinite). In practical scenarios, we observe that the CMRR, despite being initially high, diminishes with increasing frequency, primarily because both the differential-mode gain $a_{d m}(j f)$ and the common-mode gain $a_{c m}(j f)$ also degrade with frequency."
},
{
    "text": "Figure 6.24 illustrates the fundamental emitter-coupled (EC) and source-coupled (SC) pairs. From Chapter 4, recall that the parameter $a_{c m}$ is inversely proportional to the equivalent resistance $R_{E E}$ (or $R_{S S}$) presented to the pair by the external biasing circuit. To enhance the CMRR, designers aim to maximize $R_{E E}$ (or $R_{S S}$). Consequently, the current sinking transistor $Q_{3}$ (or $M_{3}$), whose biasing details are omitted for clarity, is typically part of a high-output resistance topology like the Wilson or cascode types. Typically, the impedance $Z_{E E}$ (or $Z_{S S}$) presented to the EC (or SC) pair comprises a resistive component $R_{E E}$ (or $R_{S S}$) in parallel with a capacitive component $C_{E E}$ (or $C_{S S}$). As we will soon see, it is the capacitive component that causes $a_{c m}(j f)$, and thus CMRR, to decline with increasing frequency.\n\nTo examine the CMMR, we first need to determine the differential-mode and common-mode gains $a_{d m}(j f)$ and $a_{c m}(j f)$. We will do so using the differential-mode and common-mode half circuits. Although the analysis will be conducted for the\n\nimage_name:(a)\ndescription:\n[\nname: Q1, type: NPN, ports: {C: Vo+, B: V1, E: P}\nname: Q2, type: NPN, ports: {C: Vo-, B: Vi2, E: P}\nname: Q3, type: NPN, ports: {C: P, B: LOAD, E: VEE}\nname: RC1, type: Resistor, value: RC, ports: {N1: VCC, N2: Vo+}\nname: RC1, type: Resistor, value: RC, ports: {N1: VCC, N2: Vo-}\nname: RB, type: Resistor, value: RB, ports: {N1: Vi1, N2: V1}\nname: Vi1, type: VoltageSource, value: Vi1, ports: {Np: Vi1, Nn: GND}\nname: Vi2, type: VoltageSource, value: Vi2, ports: {Np: Vi2, Nn: GND}\nname: VCC, type: VoltageSource, value: VCC, ports: {Np: VCC, Nn: GND}\nname: VEE, type: VoltageSource, value: VEE, ports: {Np: VEE, Nn: GND'}\n]\nextrainfo:The circuit is a differential amplifier using NPN transistors with resistive loads. It includes a common-mode feedback mechanism through Q3 and ZEE. The input signals are Vi1 and Vi2, and the output is Vo.\nimage_name:(b)\ndescription:\n[\nname: M1, type: PMOS, ports: {S: VDD, D: Vo+, G: V1}\nname: M2, type: PMOS, ports: {S: VDD, D: Vo-, G: V2}\nname: M3, type: PMOS, ports: {S: VSS, D: P, G: LOAD}\nname: RD1, type: Resistor, value: RD, ports: {N1: VDD, N2: Vo+}\nname: RD2, type: Resistor, value: RD, ports: {N1: VDD, N2: Vo-}\nname: RG1, type: Resistor, value: RG, ports: {N1: Vi1, N2: V1}\nname: RG2, type: Resistor, value: RG, ports: {N1: Vi2, N2: V2}\nname: Vi1, type: VoltageSource, value: Vi1, ports: {Np: Vi1, Nn: GND}\nname: Vi2, type: VoltageSource, value: Vi2, ports: {Np: Vi2, Nn: GND}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\nname: VSS, type: VoltageSource, value: VSS, ports: {Np: VSS, Nn: GND}\n]\nextrainfo:This circuit diagram (b) represents a differential amplifier using PMOS transistors. The circuit includes two PMOS transistors (M1 and M2) forming the differential pair, with a third PMOS (M3) acting as a current source. The resistors RD are the load resistors, and RG are the gate resistors. The circuit is powered by VDD and VSS voltage sources, and the inputs are provided by Vi1 and Vi2.\n\nFIGURE 6.24 (a) The EC and (b) SC pairs with resistive loads.\n\nEC pair, the results are readily adapted to the SC pair as well. To find $a_{d m}(j f)$ we use the half-circuit equivalent of Fig. 6.25. This is the familiar CE configuration, whose gain contains a dominant pole due primarily to the Miller capacitance. Adapting Eq. (6.45),\n\n$$\n\\begin{equation*}\nf_{p(\\mathrm{dm})} \\cong \\frac{1 / 2 \\pi}{\\left[\\left(R_{B}+r_{b}\\right) / / r_{\\pi}\\right] \\times\\left\\{C_{\\pi}+C_{\\mu}\\left[1+g_{m}\\left(R_{C} / / r_{o}\\right)\\right]\\right\\}+\\left(R_{C} / / r_{o}\\right) \\times C_{s}} \\tag{6.48}\n\\end{equation*}\n$$\n\nTo find $a_{c m}(j f)$ we use the half-circuit equivalent of Fig. 6.26. Note that as we split the impedance $Z_{E E}$ into two identical parts, $R_{E E}$ must be doubled to give $\\left(2 R_{E E}\\right) / /\\left(2 R_{E E}\\right)=$ $R_{E E}$, whereas $C_{E E}$ must be halved to give $\\left(C_{E E} / 2\\right) / /\\left(C_{E E} / 2\\right)=C_{E E} / 2+C_{E E} / 2=C_{E E}$.\nimage_name:FIGURE 6.25 (a)\ndescription:\n[\nname: Vi, type: VoltageSource, value: Vi, ports: {Np: Vid/2, Nn: GND}\nname: RB, type: Resistor, value: RB, ports: {N1: Vid/2, N2: Vb}\nname: Q1, type: NPN, ports: {C: Vout, B: Vb, E: GND}\nname: RC, type: Resistor, value: RC, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a differential-mode half circuit with an NPN transistor Q1. It includes a voltage source Vi, resistors RB, RC, rb, r, and ro, capacitors C, C, and Cs, and a voltage-controlled current source gmV. The circuit is designed to analyze the high-frequency small-signal equivalent of a differential amplifier.\nimage_name:FIGURE 6.25 (b)\ndescription:\n[\nname: VI, type: VoltageSource, value: VI, ports: {Np: Vid/2, Nn: GND}\nname: RB, type: Resistor, value: RB, ports: {N1: Vid/2, N2: V1}\nname: rb, type: Resistor, value: rb, ports: {N1: V1, N2: V}\nname: r, type: Resistor, value: r, ports: {N1: V, N2: GND}\nname: C, type: Capacitor, value: C, ports: {Np: Vx, Nn: Vod/2}\nname: C, type: Capacitor, value: C, ports: {Np: V, Nn: GND}\nname: gmV, type: VoltageControlledCurrentSource, ports: {Np: Vod/2, Nn: GND}\nname: ro, type: Resistor, value: ro, ports: {N1: Vod/2, N2: GND}\nname: Cs, type: Capacitor, value: Cs, ports: {Np: Vod/2, Nn: GND}\nname: RC, type: Resistor, value: RC, ports: {N1: Vod/2, N2: GND'}\n]\nextrainfo:The circuit is a high-frequency small-signal equivalent of a differential-mode half circuit. It includes a voltage source, resistors, capacitors, and a voltage-controlled current source. The circuit models the behavior of a transistor in a differential amplifier configuration with feedback and parasitic capacitances.\n\nFIGURE 6.25 (a) Differential-mode half circuit, and (b) its high-frequency small-signal equivalent.\nimage_name:(a)\ndescription:\n[\nname: Q1, type: NPN, ports: {C: Voc, B: V1, E: V2}\nname: RB, type: Resistor, value: RB, ports: {N1: Vic, N2: V1}\nname: RC, type: Resistor, value: RC, ports: {N1: Voc, N2: GND}\nname: 2REE, type: Resistor, value: 2REE, ports: {N1: V2, N2: GND}\nname: CEE/2, type: Capacitor, value: CEE/2, ports: {Np: V2, Nn: GND}\n]\nextrainfo:The circuit is a high-frequency small-signal equivalent of a differential-mode half circuit. It models the behavior of a transistor in a differential amplifier configuration with feedback and parasitic capacitances. The voltage-controlled current source represents the transistor's transconductance.\nimage_name:(b)\ndescription:\n[\n'name': 'RB', 'type': 'Resistor', 'value': 'RB', 'ports': {'N1': 'Vic', 'N2': 'V1'\n'name': 'RC', 'type': 'Resistor', 'value': 'RC', 'ports': {'N1': 'Voc', 'N2': 'V2'\n'name': '2REE', 'type': 'Resistor', 'value': '2REE', 'ports': {'N1': 'V2', 'N2': 'GND'\n'name': 'CEE/2', 'type': 'Capacitor', 'value': 'CEE/2', 'ports': {'Np': 'V2', 'Nn': 'GND'\n'name': 'Vic', 'type: 'VoltageSource', 'value': 'Vic', 'ports': {'Np': 'Vic', 'Nn': 'GND'\n'name': 'rb', 'type': 'Resistor', 'value': 'rb', 'ports': {'N1': 'V1', 'N2': 'V3'\n'name': 'r', 'type': 'Resistor', 'value': 'r', 'ports': {'N1': 'V3', 'N2': 'V2'\n'name': 'C', 'type': 'Capacitor', 'value': 'C', 'ports': {'Np': 'V3', 'Nn': 'V2'\n'name': 'C', 'type': 'Capacitor', 'value': 'C', 'ports': {'Np': 'V3', 'Nn': 'Voc'\n'name': 'gmV', 'type': 'VoltageControlledCurrentSource', 'ports': {'Np': 'V3', 'Nn': 'V2'\n'name': 'ro', 'type': 'Resistor', 'value': 'ro', 'ports': {'N1': 'Voc', 'N2': 'V2'\n'name': 'CS', 'type': 'Capacitor', 'value': 'CS', 'ports': {'Np': 'Voc', 'Nn': 'V2'\n]\nextrainfo:The circuit is a high-frequency small-signal equivalent of a differential-mode half circuit. It models a transistor in a differential amplifier configuration with feedback and parasitic capacitances. It includes a voltage source, resistors, capacitors, and a voltage-controlled current source.\n\nFIGURE 6.26 (a) Common-mode half circuit, and (b) its high-frequency small-signal equivalent.\n\nThe circuit of Fig. 6.26 is the familiar CE-ED configuration, but with degeneration now provided by the impedance $2 Z_{E E}=\\left(2 R_{E E}\\right) / /\\left[1 / s\\left(C_{E E} / 2\\right)\\right]$. At sufficiently low frequencies $C_{E E} / 2$ acts as an open circuit compared to $2 R_{E E}$, so $a_{c m}(\\mathrm{ff})$ starts out low and CMRR starts out high. As the operating frequency is increased, the impedance provided by $C_{E E} / 2$ decreases, causing $Z_{E E}$ to decrease as well. This, in turn, causes $a_{c m}(j f)$ to increase and CMRR to decrease with frequency. Clearly, $a_{c m}(j f)$ exhibits a zero frequency $f_{z(\\mathrm{~cm})}$. This is the frequency at which the impedance provided by $C_{E E} / 2$ equals, in magnitude, $2 R_{E E}$. This condition yields the familiar result $f_{z(\\mathrm{~cm})}=$ $1 /\\left[2 \\pi\\left(2 R_{E E}\\right)\\left(C_{E E} / 2\\right)\\right]$, or\n\n$$\n\\begin{equation*}\nf_{z(c m)}=\\frac{1}{2 \\pi R_{E E} C_{E E}} \\tag{6.49}\n\\end{equation*}\n$$\n\nSince $R_{E E}$ is usually quite high, $f_{z(\\mathrm{~cm})}$ is usually lower than $f_{p(\\mathrm{dm})}$. We can thus state the following:\n\n- The CMRR starts out high for $f \\ll f_{z(\\mathrm{~cm})}$.\n- At $f=f_{z(\\mathrm{~mm})}$ the CMRR begins to roll off with frequency. Clearly, the zero frequency of $a_{c m}$ is a pole frequency for CMRR.\n- For $f_{z(\\mathrm{~cm})}<f<f_{p(\\mathrm{dm})}$ the CMRR rolls off with $f$ at a rate of $-20 \\mathrm{db} / \\mathrm{dec}$.\n- At $f=f_{p(\\mathrm{dm})}$ the CMRR picks up an additional roll-off rate of $-20-\\mathrm{dB} / \\mathrm{dec}$. Clearly, the first pole frequency of $a_{d m}$ is a second pole frequency for CMRR.\n- For $f>f_{p(\\mathrm{dm})}$ the CMRR rolls off with $f$ at a rate of $-40 \\mathrm{db} / \\mathrm{dec}$.\n- This roll-off with $f$ continues until higher-order poles and zeros come into play, by which point the CMRR has already deteriorated to fairly low values.\n(a) Let the EC pair of Fig. $6.24 a$ use BJTs having $\\beta_{0}=200, V_{A}=50 \\mathrm{~V}, r_{b}=$ $200 \\Omega, C_{\\pi}=25 \\mathrm{pF}, C_{\\mu}=0.3 \\mathrm{pF}$, and $C_{s}=1 \\mathrm{pF}$. Moreover, let $R_{B}=2 \\mathrm{k} \\Omega$ and $R_{C}=10 \\mathrm{k} \\Omega$, and let the emitter-biasing current sink have $I_{E E}=1 \\mathrm{~mA}, R_{E E}=$ $1 \\mathrm{M} \\Omega$, and $C_{E E}=1.5 \\mathrm{pF}$. Estimate the low-frequency value of the CMRR as well as its two principal poles.\n(b) Use PSpice to display the Bode plots of $\\left|a_{d m}\\right|,\\left|a_{c m}\\right|$, and $\\left|a_{d m} / a_{c m}\\right|$, and comment.\n\n#### Solution\n\n(a) We have $g_{m}=(200 / 201) \\times(0.5) / 26=19.1 \\mathrm{~mA} / \\mathrm{V}, r_{\\pi}=10.5 \\mathrm{k} \\Omega, r_{o}=$ $100 \\mathrm{k} \\Omega, 2 R_{E E}=2 \\mathrm{M} \\Omega$, and $C_{E E} / 2=0.75 \\mathrm{pF}$. Also, $\\left(R_{B}+r_{b}\\right) / / r_{\\pi}=1.82 \\mathrm{k} \\Omega$ and $R_{C} / / r_{o}=9.09 \\mathrm{k} \\Omega$. Then, Eqs. (6.48) and (6.49) give\n\n$$\n\\begin{aligned}\nf_{p(\\mathrm{dm})} & \\cong \\frac{1}{2 \\pi 1.82 \\times 10^{3}[25+0.3 \\times(1+19.1 \\times 9.09)+(9.09 / 1.82) \\times 1] 10^{-12}} \\\\\n& =1.06 \\mathrm{MHz}\n\\end{aligned}\n$$\n\nand\n\n$$\nf_{z(\\mathrm{~cm})} \\cong \\frac{1}{2 \\pi \\times 1 \\times 10^{6} \\times 1.5 \\times 10^{-12}}=106 \\mathrm{kHz}\n$$\n\nAt low frequencies, $\\mathrm{CMRR}=\\left|a_{d m 0} / a_{c m 0}\\right| \\cong\\left|-g_{m}\\left(R_{C}"
},
{
    "text": "Figure 6.24 displays the fundamental configurations of emitter-coupled (EC) and source-coupled (SC) pairs. It's important to remember from Chapter 4 that the parameter $a_{c m}$ is inversely proportional to the equivalent resistance $R_{E E}$ (or $R_{S S}$) that the external biasing circuit presents to the pair. To enhance the CMRR, designers aim to maximize $R_{E E}$ (or $R_{S S}$). Consequently, the current sinking transistor $Q_{3}$ (or $M_{3}$), whose biasing specifics have been excluded for clarity, is typically part of a high-output-resistance topology, such as the Wilson or cascode configurations. Generally, the impedance $Z_{E E}$ (or $Z_{S S}$) presented to the EC (or SC) pair consists of a resistive component $R_{E E}$ (or $R_{S S}$) in parallel with a capacitive component $C_{E E}$ (or $C_{S S}$). As will be discussed, it is the capacitive component that leads to the degradation of $a_{c m}(j f)$, and consequently CMRR, with increasing frequency.\n\nTo examine the CMMR, it is necessary to determine the differential-mode and common-mode gains, $a_{d m}(j f)$ and $a_{c m}(j f)$. This is achieved using the differential-mode and common-mode half circuits. Although the analysis is conducted for the EC pair, the results are easily applied to the SC pair. To calculate $a_{d m}(j f)$, the half-circuit equivalent of Fig. 6.25 is utilized. This represents the familiar CE configuration, whose gain includes a dominant pole primarily due to the Miller capacitance. By adapting Eq. (6.45), the expression for $f_{p(\\mathrm{dm})}$ is obtained.\n\nFor determining $a_{c m}(j f)$, the half-circuit equivalent of Fig. 6.26 is employed. It should be noted that when the impedance $Z_{E E}$ is divided into two identical parts, $R_{E E}$ must be doubled to maintain the same equivalent resistance, whereas $C_{E E}$ must be halved to maintain the same equivalent capacitance.\n\nThe circuit depicted in Fig. 6.26 is the well-known CE-ED configuration, now with degeneration provided by the impedance $2 Z_{E E}=\\left(2 R_{E E}\\right) / /\\left[1 / s\\left(C_{E E} / 2\\right)\\right]$. At sufficiently low frequencies, $C_{E E} / 2$ behaves as an open circuit compared to $2 R_{E E}$, resulting in a low $a_{c m}(\\mathrm{ff})$ and a high CMRR. As the frequency increases, the impedance presented by $C_{E E} / 2$ decreases, causing $Z_{E E}$ to decrease as well. This, in turn, leads to an increase in $a_{c m}(j f)$ and a decrease in CMRR with frequency. Clearly, $a_{c m}(j f)$ exhibits a zero frequency $f_{z(\\mathrm{~cm})}$. This is the frequency at which the impedance provided by $C_{E E} / 2$ is equal in magnitude to $2 R_{E E}$. This condition yields the familiar result $f_{z(\\mathrm{~cm})}=$ $1 /\\left[2 \\pi\\left(2 R_{E E}\\right)\\left(C_{E E} / 2\\right)\\right]$, or\n\n$$\n\\begin{equation*}\nf_{z(c m)}=\\frac{1}{2 \\pi R_{E E} C_{E E}} \\tag{6.49}\n\\end{equation*}\n$$\n\nSince $R_{E E}$ is usually quite high, $f_{z(\\mathrm{~cm})}$ is typically lower than $f_{p(\\mathrm{dm})}$. This leads to the following observations:\n\n- The CMRR is high for frequencies much lower than $f_{z(\\mathrm{~cm})}$.\n- At $f=f_{z(\\mathrm{~mm})}$, the CMRR begins to decrease with frequency. The zero frequency of $a_{c m}$ corresponds to a pole frequency for CMRR.\n- For $f_{z(\\mathrm{~cm})}<f<f_{p(\\mathrm{dm})}$, the CMRR decreases with frequency at a rate of $-20 \\mathrm{db} / \\mathrm{dec}$.\n- At $f=f_{p(\\mathrm{dm})}$, the CMRR experiences an additional decrease rate of $-20-\\mathrm{dB} / \\mathrm{dec}$. The first pole frequency of $a_{d m}$ corresponds to a second pole frequency for CMRR.\n- For $f>f_{p(\\mathrm{dm})}$, the CMRR decreases with frequency at a rate of $-40 \\mathrm{db} / \\mathrm{dec}$.\n- This decrease with frequency continues until higher-order poles and zeros become significant, by which time the CMRR has already decreased to relatively low values.\n\nTo estimate the low-frequency value of the CMRR and its two principal poles, a set of parameters for the EC pair is provided. The calculations for $f_{p(\\mathrm{dm})}$ and $f_{z(\\mathrm{~cm})}$ are performed, and the low-frequency value of the CMRR is determined. Additionally, Bode plots for $\\left|a_{d m}\\right|$, $\\left|a_{c m}\\right|$, and $\\left|a_{d m} / a_{c m}\\right|$ are generated using PSpice, and the results are compared with the calculated values. The Bode plots are qualitatively similar to those of Fig. 6.27, and the PSpice values are in reasonable agreement with the calculated values."
},
{
    "text": "Figure 6.24 displays the fundamental emitter-coupled (EC) and source-coupled (SC) pairs. As mentioned in Chapter 4, the parameter $a_{c m}$ is inversely proportional to the equivalent resistance $R_{E E}$ (or $R_{S S}$) presented by the external biasing circuitry to the pair. To enhance the CMRR, designers aim to maximize $R_{E E}$ (or $R_{S S}$). For this purpose, the current sinking transistor $Q_{3}$ (or $M_{3}$), whose biasing specifics have been omitted for simplicity, is likely part of a high output-resistance topology such as the Wilson or cascode types. Typically, the impedance $Z_{E E}$ (or $Z_{S S}$) presented to the EC (or SC) pair comprises a resistive component $R_{E E}$ (or $R_{S S}$) in parallel with a capacitive component $C_{E E}$ (or $C_{S S}$). As we will explore, it is the capacitive component that leads to the degradation of $a_{c m}(j f)$, and consequently CMRR, with increasing frequency.\n\nTo examine the CMMR, we must first determine the differential-mode and common-mode gains $a_{d m}(j f)$ and $a_{c m}(j f)$. We will employ the differential-mode and common-mode half circuits for this purpose. Although the analysis will be conducted for the EC pair, the findings can be readily applied to the SC pair. To calculate $a_{d m}(j f)$, we use the half-circuit equivalent depicted in Fig. 6.25. This represents the familiar CE configuration, whose gain is characterized by a dominant pole primarily due to the Miller capacitance. Utilizing Eq. (6.45), we obtain:\n\n$$\n\\begin{equation*}\nf_{p(\\mathrm{dm})} \\cong \\frac{1 / 2 \\pi}{\\left[\\left(R_{B}+r_{b}\\right) / / r_{\\pi}\\right] \\times\\left\\{C_{\\pi}+C_{\\mu}\\left[1+g_{m}\\left(R_{C} / / r_{o}\\right)\\right]\\right\\}+\\left(R_{C} / / r_{o}\\right) \\times C_{s}} \\tag{6.48}\n\\end{equation*}\n$$\n\nTo determine $a_{c m}(j f)$, we utilize the half-circuit equivalent shown in Fig. 6.26. It is important to note that when we divide the impedance $Z_{E E}$ into two identical parts, $R_{E E}$ must be doubled to yield $\\left(2 R_{E E}\\right) / /\\left(2 R_{E E}\\right)=$ $R_{E E}$, whereas $C_{E E}$ must be halved to result in $\\left(C_{E E} / 2\\right) / /\\left(C_{E E} / 2\\right)=C_{E E} / 2+C_{E E} / 2=C_{E E}$.\n\nThe circuit depicted in Fig. 6.26 corresponds to the well-known CE-ED configuration, but with degeneration provided by the impedance $2 Z_{E E}=\\left(2 R_{E E}\\right) / /\\left[1 / s\\left(C_{E E} / 2\\right)\\right]$. At sufficiently low frequencies, $C_{E E} / 2$ behaves as an open circuit compared to $2 R_{E E}$, causing $a_{c m}(\\mathrm{ff})$ to commence at a low value and CMRR to start high. As the operating frequency rises, the impedance offered by $C_{E E} / 2$ diminishes, leading to a decrease in $Z_{E E}$. Consequently, $a_{c m}(j f)$ increases, and CMRR decreases with frequency. Evidently, $a_{c m}(j f)$ exhibits a zero frequency $f_{z(\\mathrm{~cm})}$. This frequency corresponds to the point where the impedance provided by $C_{E E} / 2$ is equal in magnitude to $2 R_{E E}$. This condition yields the familiar result $f_{z(\\mathrm{~cm})}=$ $1 /\\left[2 \\pi\\left(2 R_{E E}\\right)\\left(C_{E E} / 2\\right)\\right]$, or:\n\n$$\n\\begin{equation*}\nf_{z(c m)}=\\frac{1}{2 \\pi R_{E E} C_{E E}} \\tag{6.49}\n\\end{equation*}\n$$\n\nSince $R_{E E}$ is typically quite high, $f_{z(\\mathrm{~cm})}$ is generally lower than $f_{p(\\mathrm{dm})}$. We can thus summarize the following:\n\n- CMRR begins at a high value for $f \\ll f_{z(\\mathrm{~cm})}$.\n- At $f=f_{z(\\mathrm{~mm})}$, CMRR commences to decrease with frequency.$a_{c m}$CMRR\n- For $f_{z(\\mathrm{~cm})}<f<f_{p(\\mathrm{dm})}$, CMRR decreases with $f$ at a rate of $-20 \\mathrm{db} / \\mathrm{dec}$.\n- At $f=f_{p(\\mathrm{dm})}$, CMRR experiences an additional decrease rate of $-20-\\mathrm{dB} / \\mathrm{dec}$.$a_{d m}$CMRR\n- For $f>f_{p(\\mathrm{dm})}$, CMRR decreases with $f$ at a rate of $-40 \\mathrm{db} / \\mathrm{dec}$.\n- This decrease with $f$ persists until higher-order poles and zeros become significant, by which time CMRR has already dropped to fairly low levels.\n\n(a) Consider the EC pair in Fig. $6.24 a$ using BJTs with $\\beta_{0}=200, V_{A}=50 \\mathrm{~V}, r_{b}=$ $200 \\Omega, C_{\\pi}=25 \\mathrm{pF}, C_{\\mu}=0.3 \\mathrm{pF}$, and $C_{s}=1 \\mathrm{pF}$. Additionally, let $R_{B}=2 \\mathrm{k} \\Omega$ and $R_{C}=10 \\mathrm{k} \\Omega$, and assume the emitter-biasing current sink has $I_{E E}=1 \\mathrm{~mA}, R_{E E}=$ $1 \\mathrm{M} \\Omega$, and $C_{E E}=1.5 \\mathrm{pF}$. Estimate the low-frequency value of the CMRR as well as its two principal poles.\n(b) Utilize PSpice to generate the Bode plots of $\\left|a_{d m}\\right|,\\left|a_{c m}\\right|$, and $\\left|a_{d m} / a_{c m}\\right|$, and provide commentary.\n\n#### Solution\n\n(a) We obtain $g_{m}=(200 / 201) \\times(0.5) / 26=19.1 \\mathrm{~mA} / \\mathrm{V}, r_{\\pi}=10.5 \\mathrm{k} \\Omega, r_{o}=$ $100 \\mathrm{k} \\Omega, 2 R_{E E}=2 \\mathrm{M} \\Omega$, and $C_{E E} / 2=0.75 \\mathrm{pF}$. Furthermore, $\\left(R_{B}+r_{b}\\right) / / r_{\\pi}=1.82 \\mathrm{k} \\Omega$ and $R_{C} / / r_{o}=9.09 \\mathrm{k} \\Omega$. Applying Eqs. (6.48) and (6.49), we derive:\n\n$$\n\\begin{aligned}\nf_{p(\\mathrm{dm})} & \\cong \\frac{1}{2 \\pi 1.82 \\times 10^{3}[25+0.3 \\times(1+19.1 \\times 9.09)+(9.09 / 1.82) \\times 1] 10^{-12}} \\\\\n& =1.06 \\mathrm{MHz}\n\\end{aligned}\n$$\n\nand\n\n$$\nf_{z(\\mathrm{~cm})} \\cong \\frac{1}{2 \\pi \\times 1 \\times 10^{6} \\times 1.5 \\times 10^{-12}}=106 \\mathrm{kHz}\n$$\n\nAt low frequencies, $\\mathrm{CMRR}=\\left|a_{d m 0} / a_{c m 0}\\right| \\cong\\left|-g_{m}\\left(R_{C} / / r_{o}\\right) /\\left(-R_{C} / 2 R_{E E}\\right)\\right|=$ $174 / 0.005=34,800=90.8 \\mathrm{~dB}$.\n(b) To generate the Bode plot of $\\left|a_{d m}\\right|$, we reuse the PSpice circuit of Fig. 6.22, but with the current parameter values. To generate that of $\\left|a_{d m}\\right|$, we employ the same circuit again, but after lifting the emitter terminal off ground and inserting the parallel combination of a $2-\\mathrm{M} \\Omega$ resistance and a $0.75-\\mathrm{pF}$ capacitance between emitter and ground, in accordance with Fig. 6.26. The plots of $\\left|a_{d m}\\right|$, $\\left|a_{c m}\\right|$, and $\\left|a_{d m} / a_{c m}\\right|$ are presented in Fig. 6.27. The PSpice values $\\left|a_{d m 0} / a_{c m 0}\\right|=$ $90.1 \\mathrm{~dB}, f_{p(\\mathrm{dm})}=1.05 \\mathrm{MHz}$, and $f_{z(\\mathrm{~cm})}=161 \\mathrm{kHz}$ are in reasonable agreement with the calculated values.\n\nThe results obtained for the EC pair can be easily adapted to the SC pair. The dominant pole of $a_{d m}(j f)$, which is also the second pole of CMRR, is now expressed as:\n\n$$\n\\begin{equation*}\nf_{p(\\mathrm{dm})} \\cong \\frac{1 / 2 \\pi}{R_{s i g}\\left\\{C_{g s}+C_{g d}\\left[1+g_{m}\\left(R_{D} / / r_{o}\\right)\\right]\\right\\}+\\left(R_{D} / / r_{o}\\right) C_{d b}} \\tag{6.50}\n\\end{equation*}\n$$\n\nwhile the dominant zero of $a_{c m}(j f)$, which is also the first pole of CMRR, is given by:\n\n$$\n\\begin{equation*}\nf_{z(\\mathrm{~cm})}=\\frac{1}{2 \\pi R_{S S} C_{S S}} \\tag{6.51}\n\\end{equation*}\n$$\n\nThe Bode plots exhibit qualitative similarity to those in Fig. 6.27."
},
{
    "text": "Figure 6.24 depicts the fundamental emitter-coupled (EC) and source-coupled (SC) pairs. Recollect from Chapter 4 that the parameter $a_{c m}$ varies inversely with the equivalent resistance $R_{E E}$ (or $R_{S S}$) presented by the external biasing circuit to the pair. Consequently, to enhance the CMRR, designers aim to increase $R_{E E}$ (or $R_{S S}$). For this purpose, the current-sinking transistor $Q_{3}$ (or $M_{3}$), whose biasing specifics have been omitted for clarity, is likely part of a high-output-resistance topology such as the Wilson or cascode types. Generally, the impedance $Z_{E E}$ (or $Z_{S S}$) presented to the EC (or SC) pair comprises a resistive part $R_{E E}$ (or $R_{S S}$) in parallel with a capacitive part $C_{E E}$ (or $C_{S S}$). As we are about to observe, it is the capacitive part that leads to the degradation of $a_{c m}(j f)$, and thus CMRR, with increasing frequency.\n\nTo examine the CMMR, we must first determine the differential-mode and common-mode gains $a_{d m}(j f)$ and $a_{c m}(j f)$. We will do this using the differential-mode and common-mode half circuits. Although the analysis will be conducted for the\n\nimage_name:(a)\ndescription:\n[\nname: Q1, type: NPN, ports: {C: Vo+, B: V1, E: P}\nname: Q2, type: NPN, ports: {C: Vo-, B: Vi2, E: P}\nname: Q3, type: NPN, ports: {C: P, B: LOAD, E: VEE}\nname: RC1, type: Resistor, value: RC, ports: {N1: VCC, N2: Vo+}\nname: RC1, type: Resistor, value: RC, ports: {N1: VCC, N2: Vo-}\nname: RB, type: Resistor, value: RB, ports: {N1: Vi1, N2: V1}\nname: Vi1, type: VoltageSource, value: Vi1, ports: {Np: Vi1, Nn: GND}\nname: Vi2, type: VoltageSource, value: Vi2, ports: {Np: Vi2, Nn: GND}\nname: VCC, type: VoltageSource, value: VCC, ports: {Np: VCC, Nn: GND}\nname: VEE, type: VoltageSource, value: VEE, ports: {Np: VEE, Nn: GND'}\n]\nextrainfo:The circuit is a differential amplifier using NPN transistors with resistive loads. It includes a common-mode feedback mechanism through Q3 and ZEE. The input signals are Vi1 and Vi2, and the output is Vo.\nimage_name:(b)\ndescription:\n[\nname: M1, type: PMOS, ports: {S: VDD, D: Vo+, G: V1}\nname: M2, type: PMOS, ports: {S: VDD, D: Vo-, G: V2}\nname: M3, type: PMOS, ports: {S: VSS, D: P, G: LOAD}\nname: RD1, type: Resistor, value: RD, ports: {N1: VDD, N2: Vo+}\nname: RD2, type: Resistor, value: RD, ports: {N1: VDD, N2: Vo-}\nname: RG1, type: Resistor, value: RG, ports: {N1: Vi1, N2: V1}\nname: RG2, type: Resistor, value: RG, ports: {N1: Vi2, N2: V2}\nname: Vi1, type: VoltageSource, value: Vi1, ports: {Np: Vi1, Nn: GND}\nname: Vi2, type: VoltageSource, value: Vi2, ports: {Np: Vi2, Nn: GND}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\nname: VSS, type: VoltageSource, value: VSS, ports: {Np: VSS, Nn: GND}\n]\nextrainfo:This circuit diagram (b) represents a differential amplifier using PMOS transistors. The circuit includes two PMOS transistors (M1 and M2) forming the differential pair, with a third PMOS (M3) acting as a current source. The resistors RD are the load resistors, and RG are the gate resistors. The circuit is powered by VDD and VSS voltage sources, and the inputs are provided by Vi1 and Vi2.\n\nFIGURE 6.24 (a) The EC and (b) SC pairs with resistive loads.\n\nEC pair, the findings can be readily\nFigure 6.24 illustrates the primary configurations-coupled (EC) and source-coupled (SC) pairs. Referring back to Chapter 4, the parameter $a_{c m}$ is inversely proportional to the equivalent resistance $R_{E E}$ (or $R_{S S}$) presented by the external biasing circuit to the pair. Therefore, to enhance the CMRR, designers aim to maximize $R_{E E}$ (or $R_{S S}$). For this reason, the current-sinking transistor $Q_{3}$ (or $M_{3}$), whose biasing details have been omitted for clarity\nsimplicity, is likely part of a high-output-resistance topology such as the Wilson or cascode types. Generally, the impedance $Z_{E E}$ (or $Z_{S S}$) presented to the EC (or SC) pair consists of a resistive part $R_{E E}$ (or $R_{S S}$) in parallel with a capacitive part $C_{E E}$ (or $C_{S S}$). As we will soon observe, it is the capacitive part that leads to the degradation of $a_{c m}(j f)$, and consequently\nthus CMRR, with increasing frequency.\n\nTo examine the CMMR, we must first determine the differential-mode and common-mode gains $a_{d m}(j f)$ and $a_{c m}(j f)$. We will do this using the differential-mode and common-mode half circuits. Although the analysis will be conducted for the EC pair, the results can be adapted adapted to the SC pair. To find $a_{d m}(j f)$ we use the half-circuit equivalent of Fig. 6.25. This is the familiar CE configuration, whose gain contains a dominant pole due primarily to the Miller capacitance. Adapting Eq. (6.45),\n\n$$\n\\begin{equation*}\nf_{p(\\mathrm{dm})} \\cong \\frac{1 / 2 \\pi}{\\left[\\left(R_{B}+r_{b}\\right) / / r_{\\pi}\\right] \\times\\left\\{C_{\\pi}+C_{\\mu}\\left[1+g_{m}\\left(R_{C} / / r_{o}\\right)\\right]\\right\\}+\\left(R_{C} / / r_{o}\\right) \\times C_{s}} \\tag{6.48}\n\\end{equation*}\n$$\n\nTo find $a_{c m}(j f)$ we use the half-circuit equivalent of Fig. 6.26. Note that as we split the impedance $Z_{E E}$ into two identical parts, $R_{E E}$ must be doubled to give $\\left(2 R_{E E}\\right) / /\\left(2 R_{E E}\\right)=$ $R_{E E}$, whereas $C_{E E}$ must be halved to give $\\left(C_{E E} / 2\\right) / /\\left(C_{E E} / 2\\right)=C_{E E} / 2+C_{E E} / 2=C_{E E}$.\n\nThe circuit of Fig. 6.26 is the familiar CE-ED configuration, but with degeneration now provided by the impedance $2 Z_{E E}=\\left(2 R_{E E}\\right) / /\\left[1 / s\\left(C_{E E} / 2\\right)\\right]$. At sufficiently low frequencies $C_{E E} / 2$ acts as an open circuit compared to $2 R_{E E}$, so $a_{c m}(\\mathrm{ff})$ starts out low and CMRR starts out high. As the operating frequency is increased, the impedance provided by $C_{E E} / 2$ decreases, causing $Z_{E E}$ to decrease as well. This, in turn, causes $a_{c m}(j f)$ to increase and CMRR to decrease with frequency. Clearly, $a_{c m}(j f)$ exhibits a zero frequency $f_{z(\\mathrm{~cm})}$. This is the frequency at which the impedance provided by $C_{E E} / 2$ equals, in magnitude, $2 R_{E E}$. This condition yields the familiar result $f_{z(\\mathrm{~cm})}=$ $1 /\\left[2 \\pi\\left(2 R_{E E}\\right)\\left(C_{E E} / 2\\right)\\right]$, or\n\n$$\n\\begin{equation*}\nf_{z(c m)}=\\frac{1}{2 \\pi R_{E E} C_{E E}} \\tag{6.49}\n\\end{equation*}\n$$\n\nSince $R_{E E}$ is usually quite high, $f_{z(\\mathrm{~cm})}$ is usually lower than $f_{p(\\mathrm{dm})}$. We can thus state the following:\n\n- The CMRR starts out high for $f \\ll f_{z(\\mathrm{~cm})}$.\n- At $f=f_{z(\\mathrm{~mm})}$ the CMRR begins to roll off with frequency. Clearly, the zero frequency of $a_{c m}$ is a pole frequency for CMRR.\n- For $f_{z(\\mathrm{~cm})}<f<f_{p(\\mathrm{dm})}$ the CMRR rolls off with $f$ at a rate of $-20 \\mathrm{db} / \\mathrm{dec}$.\n- At $f=f_{p(\\mathrm{dm})}$ the CMRR picks up an additional roll-off rate of $-20-\\mathrm{dB} / \\mathrm{dec}$. Clearly, the first pole frequency of $a_{d m}$ is a second pole frequency for CMRR.\n- For $f>f_{p(\\mathrm{dm})}$ the CMRR rolls off with $f$ at a rate of $-40 \\mathrm{db} / \\mathrm{dec}$.\n- This roll-off with $f$ continues until higher-order poles and zeros come into play, by which point the CMRR has already deteriorated to fairly low values.\n\n(a) Let the EC pair of Fig. $6.24 a$ use BJTs having $\\beta_{0}=200, V_{A}=50 \\mathrm{~V}, r_{b}=$ $200 \\Omega, C_{\\pi}=25 \\mathrm{pF}, C_{\\mu}=0.3 \\mathrm{pF}$, and $C_{s}=1 \\mathrm{pF}$. Moreover, let $R_{B}=2 \\mathrm{k} \\Omega$ and $R_{C}=10 \\mathrm{k} \\Omega$, and let the emitter-biasing current sink have $I_{E E}=1 \\mathrm{~mA}, R_{E E}=$ $1 \\mathrm{M} \\Omega$, and $C_{E E}=1.5 \\mathrm{pF}$. Estimate the low-frequency value of the CMRR as well as its two principal poles.\n\n(b) Use PSpice to display the Bode plots of $\\left|a_{d m}\\right|,\\left|a_{c m}\\right|$, and $\\left|a_{d m} / a_{c m}\\right|$, and comment.\n\n#### Solution\n\n(a) We have $g_{m}=(200 / 201) \\times(0.5) / 26=19.1 \\mathrm{~mA} / \\mathrm{V}, r_{\\pi}=10.5 \\mathrm{k} \\Omega, r_{o}=$ $100 \\mathrm{k} \\Omega, 2 R_{E E}=2 \\mathrm{M} \\Omega$, and $C_{E E} / 2=0.75 \\mathrm{pF}$. Also, $\\left(R_{B}+r_{b}\\right) / / r_{\\pi}=1.82 \\mathrm{k} \\Omega$ and $R_{C} / / r_{o}=9.09 \\mathrm{k} \\Omega$. Then, Eqs. (6.48) and (6.49) give\n\n$$\n\\begin{aligned}\nf_{p(\\mathrm{dm})} & \\cong \\frac{1}{2 \\pi 1.82 \\times 10^{3}[25+0.3 \\times(1+19.1 \\times 9.09)+(9.09 / 1.82) \\times 1] 10^{-12}} \\\\\n& =1.06 \\mathrm{MHz}\n\\end{aligned}\n$$\n\nand\n\n$$\nf_{z(\\mathrm{~cm})} \\cong \\frac{1}{2 \\pi \\times 1 \\times 10^{6} \\times 1.5 \\times 10^{-12}}=106 \\mathrm{kHz}\n$$\n\nAt low frequencies, $\\mathrm{CMRR}=\\left|a_{d m 0} / a_{c m 0}\\right| \\cong\\left|-g_{m}\\left(R_{C} / / r_{o}\\right) /\\left(-R_{C} / 2 R_{E E}\\right)\\right|=$ $174 / 0.005=34,800=90.8 \\mathrm{~dB}$.\n\n(b) To generate the Bode plot of $\\left|a_{d m}\\right|$ we reuse the PSpice circuit of Fig. 6.22, but with the present parameter values. To generate that of $\\left|a_{d m}\\right|$ we use again the same circuit, but after lifting the emitter terminal off ground and inserting the parallel combination of a $2-\\mathrm{M} \\Omega$ resistance and a $0.75-\\mathrm{pF}$ capacitance between emitter and ground, in accordance with Fig. 6.26. The plots of $\\left|a_{d m}\\right|$, $\\left|a_{c m}\\right|$, and $\\left|a_{d m} / a_{c m}\\right|$ are shown in Fig. 6.27. The PSpice values $\\left|a_{d m 0} / a_{c m 0}\\right|=$ $90.1 \\mathrm{~dB}, f_{p(\\mathrm{dm})}=1.05 \\mathrm{MHz}$, and $f_{z(\\mathrm{~cm})}=161 \\mathrm{kHz}$ are in fair agreement with the calculated values.\n\nFIGURE 6.27 Bode plots for the EC pair of Example 6.9.\n\nThe results obtained above for the EC pair are readily adapted to the SC pair. The dominant pole of $a_{d m}(j f)$, being also the second pole of the CMRR, is now\n\n$$\n\\begin{equation*}\nf_{p(\\mathrm{dm})} \\cong \\frac{1 / 2 \\pi}{R_{s i g}\\left\\{C_{g s}+C_{g d}\\left[1+g_{m}\\left(R_{D} / / r_{o}\\right)\\right]\\right\\}+\\left(R_{D} / / r_{o}\\right) C_{d b}} \\tag{6.50}\n\\end{equation*}\n$$\n\nwhereas the dominant zero of $a_{c m}(j f)$, being also the first pole of CMRR, is\n\n$$\n\\begin{equation*}\nf_{z(\\mathrm{~cm})}=\\frac{1}{2 \\pi R_{S S} C_{S S}} \\tag{6.51}\n\\end{equation*}\n$$\n\nThe Bode plots are qualitatively similar to those of Fig. 6.27."
}
]