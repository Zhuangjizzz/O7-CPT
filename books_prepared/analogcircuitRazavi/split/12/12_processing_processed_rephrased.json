[

{
    "text": "The challenge of designing circuits to operate at ever-higher speeds has consistently faced engineers. From the advent of radar and television systems in the 1940s to the present-day gigahertz microprocessors, the push to achieve higher frequency performance has necessitated a deep understanding of the inherent speed constraints of these circuits.\n\nIn this section, we delve into the factors that制约 the speed of transistors and circuits, pinpointing circuit topologies that are more conducive to high-frequency operation. Additionally, we cultivate the ability to derive circuit transfer functions, an essential skill for analyzing stability and frequency compensation (12). Our analysis presumes that bipolar transistors operate in the active mode and MOSFETs in the saturation region. The chapter outline is as follows:\n\nCore Concepts\n\n- Bode's Guidelines\n- Linking Poles to Nodes\n- Miller's Principle\n\nHigh-Frequency Transistor Models\n\n- Bipolar Model\n- MOS Model\n- Transition Frequency\n\nCircuit Frequency Response\n\n- CE/CS Configurations\n- CB/CG Configurations\n- Follower Stages\n- Cascode Configuration\n- Differential Pair"
},
{
    "text": "The necessity of running circuits at ever-higher speeds has consistently posed challenges for designers. From the advent of radar and television systems in the 1940s to the gigahertz-range microprocessors of today, the push to elevate circuit frequencies has necessitated a profound comprehension of their speed constraints.\n\nIn this section, we examine the factors that restrict the speed of transistors and circuits, pinpointing configurations that are more conducive to high-frequency performance. Additionally, we cultivate the ability to derive circuit transfer functions, an essential skill for analyzing stability and frequency compensation (12). We presuppose that bipolar transistors operate in the active mode and MOSFETs in the saturation region. The following outline is provided.\n\nCore Concepts\n\n- Bode's Guidelines\n- Linking Poles to Nodes\n- Miller's Principle\n\nHigh-Frequency Transistor Models\n\n- Bipolar Model\n- MOS Model\n- Transit Frequency\n\nCircuit Frequency Response\n\n- CE/CS Configurations\n- CB/CG Configurations\n- Followers\n- Cascode Configuration\n- Differential Pair"
},
{
    "text": "The necessity of running circuits at ever-greater speeds has consistently posed a challenge to designers. From the radar and television systems of the 1940s to today's gigahertz microprocessors, the push to enhance circuit frequencies has necessitated a thorough grasp of their speed constraints.\n\nIn this chapter, we examine the factors that restrict the speed of transistors and circuits, pinpointing topologies that are more conducive to high-frequency performance. We also cultivate the ability to derive circuit transfer functions, an essential skill for analyzing stability and frequency compensation (12). We presuppose that bipolar transistors operate in the active mode and MOSFETs in the saturation region. The chapter outline is presented below.\n\nCore Concepts\n\n- Bode's Guidelines\n- Linking Poles to Nodes\n- Miller's Principle\n\nHigh-Frequency Transistor Models\n\n- Bipolar Model\n- MOS Model\n- Transition Frequency\n\nCircuit Frequency Response\n\n- CE/CS Stages\n- CB/CG Stages\n- Followers\n- Cascode Stage\n- Differential Pair"
},
{
    "text": "The necessity of running circuits at progressively faster speeds has consistently posed challenges for designers. From the radar and television systems of the 1940s to today's gigahertz microprocessors, the push to elevate circuit frequencies has mandated a thorough grasp of their speed constraints.\n\nIn this section, we examine the factors that restrict the speed of transistors and circuits, pinpointing configurations that are more conducive to high-frequency performance. We also cultivate the ability to derive circuit transfer functions, an essential skill for analyzing stability and frequency compensation (12). Our analysis assumes that bipolar transistors operate in the active mode and MOSFETs in the saturation region. The following outline details our coverage.\n\nCore Principles\n\n- Bode's Guidelines\n- Linking Poles to Nodes\n- Miller's Principle\n\nHigh-Frequency Transistor Models\n\n- Bipolar Model\n- MOS Model\n- Transition Frequency\n\nCircuit Frequency Response\n\n- CE/CS Stages\n- CB/CG Stages\n- Followers\n- Cascode Stage\n- Differential Pair"
},
{
    "text": "The necessity of running circuits at ever-greater speeds has consistently posed challenges to designers. From the development of radar and television systems in the 1940s to the gigahertz-range microprocessors of today, the push to elevate circuit frequencies has necessitated a thorough grasp of their speed constraints.\n\nIn this section, we examine the factors that restrict the speed of transistors and circuits, pinpointing configurations that are more conducive to high-frequency performance. Additionally, we cultivate the ability to derive the transfer functions of circuits, an essential skill for analyzing stability and frequency compensation (12). We operate under the assumption that bipolar transistors stay in the active mode and MOSFETs remain in the saturation region. The following outline is provided.\n\nKey Concepts\n\n- Bode's Guidelines\n- Linking Poles to Nodes\n- Miller's Principle\n\nHigh-Frequency Transistor Models\n\n- Bipolar Model\n- MOS Model\n- Transition Frequency\n\nCircuit Frequency Response\n\n- CE/CS Configurations\n- CB/CG Configurations\n- Followers\n- Cascode Configuration\n- Differential Pair"
},
{
    "text": "The necessity for circuits to operate at progressively higher speeds has consistently posed a challenge to designers. From the radar and television systems of the 1940s to the gigahertz microprocessors of today, the push to elevate circuit frequencies has mandated a thorough comprehension of their speed constraints.\n\nIn this section, we examine the factors that制约 the speed of transistors and circuits, pinpointing topologies that are more conducive to high-frequency performance. Additionally, we cultivate the ability to derive circuit transfer functions, an essential skill for analyzing stability and frequency compensation (12). We presuppose that bipolar transistors operate in the active mode and MOSFETs in the saturation region. The chapter outline is presented below.\n\nCore Concepts\n\n- Bode's Guidelines\n- Linking Poles to Nodes\n- Miller's Principle\n\nHigh-Frequency Transistor Models\n\n- Bipolar Model\n- MOS Model\n- Transit Frequency\n\nCircuit Frequency Response\n\n- CE/CS Stages\n- CB/CG Stages\n- Followers\n- Cascode Stage\n- Differential Pair"
},
{
    "text": "The necessity of running circuits at ever-greater speeds has consistently posed challenges for designers. From the radar and television systems of the 1940s to today's gigahertz microprocessors, the push to elevate circuit frequencies demands a thorough grasp of their speed constraints.\n\nIn this chapter, we examine the factors that restrict the speed of transistors and circuits, pinpointing topologies more suited to high-frequency performance. Additionally, we cultivate skills for calculating the transfer functions of circuits, a pivotal aspect of studying stability and frequency compensation (12). We presuppose that bipolar transistors operate in the active mode and MOSFETs in the saturation region. The chapter outline is presented below.\n\nCore Concepts\n\n- Bode's Rules\n- Linking Poles to Nodes\n- Miller's Theorem\n\nHigh-Frequency Transistor Models\n\n- Bipolar Model\n- MOS Model\n- Transit Frequency\n\nCircuit Frequency Response\n\n- CE/CS Stages\n- CB/CG Stages\n- Followers\n- Cascode Stage\n- Differential Pair"
},
{
    "text": "The necessity of running circuits at progressively faster speeds has consistently posed challenges for designers. From the radar and television systems of the 1940s to today's gigahertz microprocessors, the drive to enhance circuit frequencies has necessitated a profound grasp of their speed constraints.\n\nIn this chapter, we examine the factors that restrict the speed of transistors and circuits, pinpointing configurations that are more conducive to high-frequency performance. Additionally, we cultivate the ability to derive circuit transfer functions, an essential skill for analyzing stability and frequency compensation (12). We presuppose that bipolar transistors operate in the active mode and MOSFETs in the saturation region. The chapter outline is presented below.\n\nCore Principles\n\n- Bode's Guidelines\n- Correlation of Poles with Nodes\n- Miller's Principle\n\nHigh-Frequency Transistor Models\n\n- Bipolar Model\n- MOS Model\n- Transit Frequency\n\nCircuit Frequency Response\n\n- CE/CS Stages\n- CB/CG Stages\n- Followers\n- Cascode Stage\n- Differential Pair"
},
{
    "text": "What do we mean by \"frequency response?\" As depicted in Fig. 11.1(a), the concept involves applying a sinusoidal signal to the input of a circuit and observing the output while varying the input frequency. Fig. 11.1(a) demonstrates that the circuit may exhibit high gain at low frequencies but a \"roll-off\" as the frequency rises. We plot the gain magnitude as shown in Fig. 11.1(b) to illustrate the circuit's behavior across all relevant frequencies. We can loosely refer to $f_{1}$ as the circuit's useful bandwidth. Before delving into the cause of this roll-off,\n\nimage_name:(a)\ndescription:Fig. 11.1(a) presents a system block diagram illustrating the concept of frequency response testing in a circuit. It comprises three main components:\n\n1. **Input Sinusoidal Signal**: Three distinct sinusoidal waveforms are depicted entering the circuit, representing varying frequencies, labeled as \\( \\text{In}(A_0) \\) to indicate the input amplitude.\n\n2. **Amplifier Block**: Each input signal passes through an amplifier block marked \\( A_0 \\), which amplifies the input signal's amplitude. This block is crucial for analyzing the circuit's response to different frequencies.\n\n3. **Output Sinusoidal Signal**: The amplifier's output is labeled \\( \\text{Out}(A_0) \\), showing the amplified sinusoidal waveforms. As the input frequency increases, the output signal's amplitude decreases, illustrating the roll-off effect.\n\nThe information flow is straightforward: the input sinusoidal signal enters the amplifier, gets amplified, and exits as an output signal. This setup helps observe how the circuit's gain changes with frequency.\n\nFig. 11.1(b) complements this by plotting the gain magnitude \\( |A_v| \\) against frequency \\( f \\). The plot reveals high gain at low frequencies, which decreases or \"rolls off\" as the frequency increases. The point \\( f_1 \\) is marked as the useful bandwidth, indicating the frequency range where the circuit maintains a relatively high gain before significant roll-off occurs.\n\nOverall, the system's primary function is to demonstrate the frequency response of a circuit, emphasizing how gain varies with input frequency and identifying the effective bandwidth.\n\nimage_name:(b)\ndescription:Fig. 11.1(b) features a Bode plot representing the frequency response of a circuit. The x-axis, labeled 'f', represents frequency in hertz (Hz), while the y-axis, labeled '|A_v|', represents the voltage gain magnitude in decibels (dB). The plot is on a logarithmic frequency scale, common in Bode plots to cover a wide frequency range effectively.\n\nThe graph shows high gain at low frequencies, remaining relatively constant until a certain frequency, labeled 'f₁'. This point, marked by a vertical dashed line, is the cutoff frequency or -3 dB point, indicating the useful bandwidth. Beyond this point, the graph shows a downward trend, indicating a gain roll-off as the frequency increases. This roll-off is typically due to reactive components like capacitors and inductors affecting the gain at higher frequencies.\n\nThe key feature is the roll-off region, where the gain decreases, highlighting the circuit's limited ability to amplify high-frequency signals. This behavior is crucial for understanding bandwidth limitations in filters and amplifiers. The roll-off slope provides insights into the filter order or dominant reactive elements.\n\nAnnotations include the 'Roll-Off' label, emphasizing the frequency-dependent nature of the circuit's gain, and the cutoff frequency 'f₁', critical for designing circuits that operate effectively within a specific frequency range.\n\nFigure 11.1 (a) Conceptual test of frequency response, (b) gain roll-off with frequency.\n\nWhy is frequency response important? The following examples illustrate this.\n\nExample: Why do people's voices sound different over the phone compared to face-to-face conversations?\n\nSolution: The human voice contains frequency components from 20 Hz to 20 kHz [Fig. 11.2(a)]. Thus, voice-processing circuits must accommodate this range. However, phone systems have limited bandwidth, as shown in Fig. 11.2(b), suppressing frequencies above 3.5 kHz. This alters each person's voice. High-quality audio systems, conversely, cover the entire frequency range.\n\nimage_name:(a)\ndescription:Fig. 11.2(a) is a frequency response graph showing the range of frequencies in the human voice. It is a filled area plot illustrating a continuous range from 20 Hz to 20 kHz on the horizontal axis (frequency, f, in Hz). The vertical axis, unlabeled, typically represents amplitude or power.\n\n1. **Graph Type and Function**: A frequency response plot, used to depict the frequency range a system or signal can handle.\n\n2. **Axes Labels and Units**: \n   - **Horizontal Axis (Frequency)**: 20 Hz to 20 kHz.\n   - **Vertical Axis**: Unlabeled, generally represents amplitude or power.\n\n3. **Overall Behavior and Trends**: The plot shows a relatively flat response across 20 Hz to 20 kHz, indicating the human voice contains components across this entire spectrum.\n\n4. **Key Features and Technical Details**: The graph illustrates the full frequency range of human voice components, from 20 Hz to 20 kHz, with no significant peaks or valleys, suggesting an even energy distribution.\n\n5. **Annotations and Specific Data Points**: The shaded area emphasizes the entire frequency range covered by the human voice, contrasting with the limited bandwidth in phone systems, as shown in graph (b).\n\nimage_name:(b)\ndescription:**Graph Type and Function**: Fig. 11.2(b) is a frequency response graph, likely a Bode plot, illustrating the bandwidth of a phone system.\n\n**Axes Labels and Units**:\n- **Horizontal Axis (Frequency, f)**: 400 Hz to 3.5 kHz.\n- **Vertical Axis**: Unlabeled, typically represents amplitude or gain in decibels (dB).\n\n**Overall Behavior and Trends**:\n- The graph shows a bandpass characteristic, allowing frequencies between approximately 400 Hz and 3.5 kHz.\n- The response rises sharply from 400 Hz, indicating the lower cutoff frequency, and levels off, maintaining a relatively constant amplitude.\n- Beyond 3.5 kHz, the response declines sharply, indicating the upper cutoff frequency.\n\n**Key Features and Technical Details**:\n- The graph exhibits a peak within the passband, suggesting a resonant frequency with maximum gain.\n- The bandwidth is limited to approximately 3.1 kHz (from 400 Hz to 3.5 kHz).\n- There is a steep roll-off beyond the upper cutoff frequency, indicating significant attenuation of higher frequencies.\n\n**Annotations and Specific Data Points**:\n- The lower cutoff frequency is marked at 400 Hz, and the upper cutoff frequency at 3.5 kHz.\n- The peak within the passband represents the frequency with maximum gain, though specific gain values are not provided.\n\nFigure 11.2\n\nExercise: Whose voice does the phone system alter more, men's or women's?\n\nExample:\n11.2\n\nSolution: During recording, your voice travels through the air to the audio recorder. When you speak and listen to your own voice simultaneously, your voice travels through both the air and your skull to your ear. Since the skull's frequency response differs from the air's (i.e., the skull passes some frequencies more easily), you hear your own voice differently than others do.\n\nExercise: Explain what happens to your voice when you have a cold.\n\nExample: Video signals typically occupy a bandwidth of about 5 MHz. For instance, a graphics card delivering a video signal to a computer display must provide at least 5 MHz of bandwidth. Explain what happens if the bandwidth is insufficient.\n\nSolution: Insufficient bandwidth results in \"sharp\" edges on a display becoming \"soft,\" leading to a fuzzy picture. This occurs because the display driver is not fast enough to abruptly change contrast, e.g., from white to black between pixels. Figures 11.3(a) and (b) illustrate this for high-bandwidth and low-bandwidth drivers, respectively. (The display is scanned left to right.)\n\nimage_name:(a)\ndescription:Fig. 11.3(a) shows a clear and sharp letter 'E', indicating the effect of a high-bandwidth driver on a display. The edges are well-defined, demonstrating precise transitions between colors or shades, contrasting with a low-bandwidth scenario where edges would be blurred.\n\nimage_name:(b)\ndescription:Fig. 11.3(b) shows the letter 'E' with blurred edges, representing the effect of insufficient bandwidth in a video system. The lack of sharpness indicates a fuzzy appearance due to the slower response time of the display driver, contrasting with the crisp edges in a high-bandwidth driver.\n\n(a)\n\nimage_name:(a)\ndescription:Fig. (a) displays a large black letter 'E' with blurred edges, illustrating the effect of insufficient bandwidth in a video system. The lack of sharpness indicates a low-bandwidth display driver's inability to render distinct transitions, resulting in a fuzzy image.\n\n(b)\n\nFigure 11.3\n\nExercise: What happens if the display is scanned top to bottom?\n\nWhat causes the gain roll-off in Fig. 11.1? Consider the low-pass filter in Fig. 11.4(a). At low frequencies, $C_{1}$ is nearly open, and the current through $R_{1}$ is minimal; thus, $V_{\\text {out }}=V_{\\text {in }}$. As frequency increases, $C_{1}$'s impedance decreases, and the voltage divider of $R_{1}$ and $C_{1}$ attenuates $V_{\\text {in }}$ more. This behavior is shown in Fig. 11.4(b).\n\nimage_name:Figure 11.4 (a)\ndescription:[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: R1, type: Resistor, value: R1, ports: {N1: Vin, N2: Vout}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:This is a simple low-pass filter circuit. The frequency response shows output voltage decreasing as frequency increases, indicating high-frequency signal attenuation.\n\nimage_name:Figure 11.4 (b)\ndescription:Fig. 11.4(b) is a Bode plot for a simple low-pass filter circuit. The x-axis represents frequency (f) on a logarithmic scale, and the y-axis represents the voltage gain magnitude (|V_out/V_in|).\n\n**Overall Behavior and Trends**:\n- The graph shows a flat response at low frequencies, with a gain of 1.0, indicating no attenuation.\n- As frequency increases, the gain decreases, demonstrating the low-pass filter's characteristic.\n\n**Key Features and Technical Details**:\n- The cutoff frequency, where the gain drops to approximately 0.707 (or -3 dB), is not explicitly marked but is a critical point.\n- The slope of the decline beyond the cutoff frequency is typically -20 dB/decade for a first-order low-pass filter.\n\n**Annotations and Specific Data Points**:\n- The plot lacks specific numerical values or annotations for the cutoff frequency or gain levels beyond the initial flat region.\n\nFigure 11.4 (a) Simple low-pass filter, (b) its frequency response.\n\nConsider the common-source stage in Fig. 11.5(a), where a load capacitance, $C_{L}$, appears at the output. At low frequencies, the signal current from $M_{1}$ prefers $R_{D}$ due to $C_{L}$'s high impedance. At high frequencies, $C_{L}$ \"steals\" some signal current, shunting it to ground, reducing the output voltage swing. From the small-signal model in Fig. 11.5(b), $R_{D}$ and $C_{L}$ are in parallel, hence:\n\n$$\n\\begin{equation*}\nV_{\\text {out }}=-g_{m} V_{\\text {in }}\\left(R_{D} \\| \\frac{1}{C_{L} S}\\right) \\tag{11.1}\n\\end{equation*}\n$$\n\nAs frequency increases, the parallel impedance decreases, lowering $V_{\\text {out }}$'s amplitude. Thus, the voltage gain drops at high frequencies.\n\nWhy use sinusoidal inputs for frequency response studies? An amplifier may process voice or video signals, seemingly unrelated to sinusoids. However, such signals can be viewed as a sum of many sinusoids with different frequencies (and phases). Responses like those in Fig. 11.5(b) are useful if the circuit remains linear, allowing superposition."
},
{
    "text": "What do we mean by \"frequency response?\" As depicted in Fig. 11.1(a), the concept involves applying a sinusoidal input to a circuit and observing the output while varying the input frequency. Fig. 11.1(a) illustrates that the circuit may exhibit high gain at low frequencies but a \"roll-off\" as the frequency rises. We plot the gain magnitude as shown in Fig. 11.1(b) to represent the circuit's behavior across all relevant frequencies. We can loosely refer to $f_{1}$ as the circuit's useful bandwidth. Before delving into the cause of this roll-off,\n\nimage_name:(a)\ndescription:Fig. 11.1(a) presents a system block diagram illustrating the concept of frequency response testing in a circuit. It comprises three main components:\n\n1. **Input Sinusoidal Signal**: Three distinct sinusoidal waveforms enter the circuit, representing varying frequencies, labeled as \\( \\text{In}(A_0) \\) to indicate the input amplitude.\n\n2. **Amplifier Block**: Each input signal passes through an amplifier block marked \\( A_0 \\), which amplifies the input signal's amplitude. This block is crucial for analyzing the circuit's response to different frequencies.\n\n3. **Output Sinusoidal Signal**: The amplifier's output is labeled \\( \\text{Out}(A_0) \\), showing the amplified sinusoidal waveforms. As the input frequency increases, the output signal's amplitude decreases, demonstrating the roll-off effect.\n\nThe information flow is straightforward: the input sinusoidal signal enters the amplifier, gets amplified, and exits as an output signal. This setup helps observe how the circuit's gain changes with frequency.\n\nFig. 11.1(b) complements this by plotting the gain magnitude \\( |A_v| \\) against frequency \\( f \\). The plot reveals high gain at low frequencies, which decreases or \"rolls off\" as the frequency increases. The point \\( f_1 \\) is marked as the useful bandwidth, indicating the frequency range where the circuit maintains relatively high gain before significant roll-off occurs.\n\nOverall, the system's primary function is to demonstrate the circuit's frequency response, highlighting how gain varies with input frequency and identifying the effective operating bandwidth.\n\nimage_name:(b)\ndescription:Fig. 11.1(b) features a Bode plot representing the frequency response of a circuit. The x-axis, labeled 'f', represents frequency in hertz (Hz), while the y-axis, labeled '|A_v|', represents the voltage gain magnitude in decibels (dB). The plot uses a logarithmic scale for frequency, common in Bode plots to cover a wide frequency range effectively.\n\nThe graph shows high gain at low frequencies, remaining relatively constant until a specific frequency, labeled 'f₁'. This point, marked by a vertical dashed line, is the cutoff frequency or -3 dB point, indicating the useful bandwidth. Beyond this point, the graph exhibits a downward trend, signifying a roll-off in gain as the frequency increases. This roll-off is typically due to reactive components like capacitors and inductors affecting gain at higher frequencies.\n\nThe key feature is the roll-off region, where gain decreases, highlighting the circuit's limited ability to amplify high-frequency signals. This behavior is crucial for understanding bandwidth limitations and is common in filters and amplifiers. The roll-off slope provides insights into the filter order or dominant reactive elements.\n\nAnnotations include the 'Roll-Off' label, emphasizing the frequency-dependent nature of the circuit's gain. The cutoff frequency 'f₁' is critical for determining the effective bandwidth and is essential for designing circuits that need to operate within a specific frequency range.\n\nFigure 11.1 (a) Conceptual test of frequency response, (b) gain roll-off with frequency.\nwe must ask: why is frequency response important? The following examples illustrate this issue.\n\nExample Explain why people's voices over the phone sound different from their voices in face-to-face conversation.\n\nSolution The human voice spans frequency components from 20 Hz to 20 kHz [Fig. 11.2(a)]. Therefore, circuits processing voice must accommodate this range. However, phone systems have limited bandwidth, as shown in Fig. 11.2(b), suppressing frequencies above 3.5 kHz. This alteration affects each person's voice. In contrast, high-quality audio systems cover the entire frequency range.\n\nimage_name:(a)\ndescription:Fig. 11.2(a) is a frequency response graph showing the range of frequencies in the human voice. It is a filled area plot illustrating a continuous range from 20 Hz to 20 kHz on the horizontal axis, representing frequency (f) in hertz (Hz). The vertical axis, though unlabeled, typically represents amplitude or relative power.\n\n1. **Graph Type and Function**:\n- The graph is a frequency response plot, commonly used to depict the frequency range a system or signal can handle.\n\n2. **Axes Labels and Units**:\n- **Horizontal Axis (Frequency)**: Ranges from 20 Hz to 20 kHz.\n- **Vertical Axis**: Not labeled, but generally represents amplitude or power.\n\n3. **Overall Behavior and Trends**:\n- The plot shows a relatively flat response across the frequency range, indicating the human voice contains components across this entire spectrum.\n- The flatness suggests an even energy distribution across the frequencies.\n\n4. **Key Features and Technical Details**:\n- The graph illustrates the full frequency range of human voice components, from 20 Hz to 20 kHz.\n- There are no significant peaks or valleys, indicating a broad and consistent frequency range.\n\n5. **Annotations and Specific Data Points**:\n- The graph is shaded to emphasize the entire frequency range covered by the human voice.\n\nThis graph demonstrates the full range of frequencies present in human speech, contrasting with the limited bandwidth in phone systems, as shown in graph (b).\n\nimage_name:(b)\ndescription:**Graph Type and Function**:\nFig. 11.2(b) is a frequency response graph, likely a Bode plot, illustrating the bandwidth of a phone system.\n\n**Axes Labels and Units**:\n- The horizontal axis is labeled 'f', representing frequency in hertz (Hz).\n- The frequency range spans from 400 Hz to 3.5 kHz.\n- The vertical axis is not explicitly labeled but typically represents amplitude or gain in decibels (dB).\n\n**Overall Behavior and Trends**:\n- The graph shows a bandpass characteristic, allowing frequencies between approximately 400 Hz and 3.5 kHz to pass.\n- The response rises sharply from 400 Hz, indicating the lower cutoff frequency, and levels off, maintaining a relatively constant amplitude.\n- Beyond 3.5 kHz, the response declines sharply, indicating the upper cutoff frequency.\n\n**Key Features and Technical Details**:\n- The graph exhibits a peak within the passband, suggesting a resonant frequency with maximum gain.\n- The bandwidth is limited to approximately 3.1 kHz (from 400 Hz to 3.5 kHz).\n- There is a steep roll-off beyond the upper cutoff frequency, indicating significant attenuation of higher frequencies.\n\n**Annotations and Specific Data Points**:\n- The lower cutoff frequency is marked at 400 Hz, and the upper cutoff frequency at 3.5 kHz.\n- The peak within the passband likely represents a frequency with maximum gain, though specific gain values are not provided.\n\nFigure 11.2\n\nExercise Whose voice does the phone system alter more, men's or women's?\n\nExample\n11.2\n\nSolution When recording, your voice travels through the air to the audio recorder. However, when you speak and listen to your own voice simultaneously, your voice travels through both the air and your skull to your ear. Since the frequency response of the skull path differs from that of the air path (i.e., your skull passes some frequencies more easily), you hear your own voice differently than others do.\n\nExercise Explain what happens to your voice when you have a cold.\n\nExample Video signals typically require a bandwidth of about 5 MHz. For instance, a graphics card delivering a video signal to a computer display must provide at least 5 MHz of bandwidth. Explain what happens if the bandwidth of a video system is insufficient.\n\nSolution Insufficient bandwidth results in \"soft\" edges on a display, producing a fuzzy picture. This occurs because the circuit driving the display is not fast enough to abruptly change contrast, e.g., from complete white to complete black between pixels. Figures 11.3(a) and (b) illustrate this effect for high-bandwidth and low-bandwidth drivers, respectively. (The display is scanned from left to right.)\n\nimage_name:(a)\ndescription:Fig. 11.3(a) shows a clear and sharp letter 'E', indicating the effect of a high-bandwidth driver on a display. The edges are well-defined, demonstrating how sufficient bandwidth allows precise transitions between colors or shades. This clarity contrasts with the low-bandwidth scenario, where edges would appear softer and more blurred.\n\nimage_name:(b)\ndescription:Fig. 11.3(b) shows the letter 'E' with blurred edges, representing the effect of insufficient bandwidth in a video system. The edges lack sharpness, indicating a lack of clarity and definition. This visual illustrates how low bandwidth results in a 'soft' or fuzzy appearance of sharp transitions, such as from black to white, due to the slower response time of the display driver. This effect contrasts with the crisp, well-defined edges produced by a high-bandwidth driver.\n\n(a)\nimage_name:(a)\ndescription:Fig. 11.3(a) displays a large black letter 'E' with blurred edges, illustrating the effect of insufficient bandwidth in a video system. The edges are not sharp, indicating a lack of clarity and definition, characteristic of a low-bandwidth display driver. The blurred or 'soft' appearance of the transitions from black to white around the edges demonstrates how slower response times result in less distinct image rendering. This visual serves as a contrast to the crisp, well-defined edges expected with a high-bandwidth driver. No additional components, connections, or annotations are visible, focusing solely on the visual impact of bandwidth limitations.\n\n(b)\n\nFigure 11.3\n\nExercise What happens if the display is scanned from top to bottom?\n\nWhat causes the gain roll-off in Fig. 11.1? Consider the simple low-pass filter in Fig. 11.4(a). At low frequencies, $C_{1}$ is nearly open, and the current through $R_{1}$ is minimal; thus, $V_{\\text {out }}=V_{\\text {in }}$. As the frequency increases, $C_{1}$'s impedance decreases, and the voltage divider formed by $R_{1}$ and $C_{1}$ attenuates $V_{\\text {in }}$ more significantly. This results in the behavior shown in Fig. 11.4(b).\n\nAs a more complex example, consider the common-source stage in Fig. 11.5(a), where a load capacitance, $C_{L}$, appears at the output. At low frequencies, the signal current from $M_{1}$ prefers to flow through $R_{D}$ due to $C_{L}$'s high impedance. At high frequencies, $C_{L}$ \"steals\" some signal current, shunting it to ground, leading to a lower voltage swing at the output. From the small-signal equivalent circuit in Fig. 11.5(b), we note that $R_{D}$ and $C_{L}$ are in parallel, hence:\n\n$$\n\\begin{equation*}\nV_{\\text {out }}=-g_{m} V_{\\text {in }}\\left(R_{D} \\| \\frac{1}{C_{L} S}\\right) \\tag{11.1}\n\\end{equation*}\n$$\n\nAs the frequency increases, the parallel impedance decreases, reducing $V_{\\text {out }}$'s amplitude. Thus, the voltage gain drops at high frequencies.\n\nWhy do we use sinusoidal inputs in studying frequency response? An amplifier may process voice or video signals that do not resemble sinusoids. Fortunately, such signals can be viewed as a sum of many sinusoids with different frequencies (and phases). Therefore, responses like those in Fig. 11.5(b) are useful as long as the circuit remains linear, allowing superposition to apply."
},
{
    "text": "What do we mean by \"frequency response?\" As depicted in Fig. 11.1(a), the concept involves applying a sinusoidal input to a circuit and observing the output as the input frequency varies. Fig. 11.1(a) exemplifies how a circuit might exhibit high gain at low frequencies but experience a \"roll-off\" as the frequency rises. We plot the gain magnitude as shown in Fig. 11.1(b) to illustrate the circuit's behavior across all relevant frequencies. We can loosely refer to $f_{1}$ as the circuit's useful bandwidth. Before delving into the cause of this roll-off,\nimage_name:(a)\ndescription:Fig. 11.1(a) presents a system block diagram illustrating the concept of frequency response testing in a circuit. The diagram comprises three main components:\n\n1. **Input Sinusoidal Signal**: Three distinct sinusoidal waveforms are depicted entering the circuit, representing various frequencies. These are labeled as \\( \\text{In}(A_0) \\), indicating the input amplitude.\n\n2. **Amplifier Block**: Each input signal passes through an amplifier block marked \\( A_0 \\). This block's role is to amplify the input signal's amplitude, which is crucial for analyzing the circuit's response to different frequencies.\n\n3. **Output Sinusoidal Signal**: The amplifier's output is labeled \\( \\text{Out}(A_0) \\), showing the amplified sinusoidal waveforms. As the input signal's frequency increases, the output signal's amplitude decreases, demonstrating the roll-off effect.\n\nThe information flow is direct: the input sinusoidal signal enters the amplifier, gets amplified, and then exits as an output signal. This setup helps observe how the circuit's gain changes with frequency.\n\nFig. 11.1(b) complements this by plotting the gain magnitude \\( |A_v| \\) against frequency \\( f \\). The plot reveals high gain at low frequencies, which decreases or \"rolls off\" as the frequency increases. The point \\( f_1 \\) is marked as the useful bandwidth, indicating the frequency range where the circuit maintains relatively high gain before significant roll-off occurs.\n\nOverall, the system's primary function is to demonstrate a circuit's frequency response, highlighting how gain varies with input frequency and identifying the effective bandwidth of the circuit.\nimage_name:(b)\ndescription:Figure 11.1(b) features a Bode plot representing a circuit's frequency response. The x-axis, labeled 'f', denotes frequency, typically in hertz (Hz), while the y-axis, labeled '|A_v|', represents the magnitude of voltage gain, usually in decibels (dB). The plot is on a logarithmic scale for frequency, a common approach in Bode plots to cover a wide frequency range effectively.\n\nThe graph's overall behavior shows high gain at low frequencies, remaining relatively constant until a specific frequency, labeled 'f₁'. This point, marked by a vertical dashed line, is the cutoff frequency or -3 dB point, indicating the circuit's useful bandwidth. Beyond this point, the graph trends downward, signifying a gain roll-off as the frequency increases. This roll-off is typically due to reactive components like capacitors and inductors affecting the gain at higher frequencies.\n\nThe key feature is the roll-off region, where gain decreases, highlighting the circuit's limited ability to amplify higher frequency signals. This behavior is crucial for understanding the circuit's bandwidth limitations and is a common characteristic in filters and amplifiers. The roll-off slope provides insights into the filter order or dominant reactive elements.\n\nAnnotations include the 'Roll-Off' label, emphasizing the frequency-dependent nature of the circuit's gain. The cutoff frequency 'f₁' is critical for determining the circuit's bandwidth and is essential for designing circuits that need to operate effectively within a specific frequency range.\n\nFigure 11.1 (a) Conceptual test of frequency response, (b) gain roll-off with frequency.\nwe must ask: why is frequency response important? The following examples illustrate this issue.\n\nExample Explain why people's voices over the phone sound different from their voices in face11.1 to-face conversation.\n\nSolution The human voice spans frequency components from 20 Hz to 20 kHz [Fig. 11.2(a)]. Thus, voice-processing circuits must accommodate this range. However, phone systems have limited bandwidth, as shown in Fig. 11.2(b). Since they suppress frequencies above 3.5 kHz, each person's voice is altered. In contrast, high-quality audio systems are designed to cover the entire frequency range.\nimage_name:(a)\ndescription:Graph (a) is a frequency response graph showing the range of frequencies in the human voice. It is a filled area plot illustrating a continuous range from 20 Hz to 20 kHz on the horizontal axis, representing frequency (f) in hertz (Hz). The vertical axis is not explicitly labeled but generally represents amplitude or relative power.\n\n1. **Graph Type and Function**:\n- It is a frequency response plot, commonly used to depict the range of frequencies a system or signal can handle.\n\n2. **Axes Labels and Units**:\n- **Horizontal Axis (Frequency)**: Ranges from 20 Hz to 20 kHz.\n- **Vertical Axis**: Not labeled, but typically represents amplitude or power.\n\n3. **Overall Behavior and Trends**:\n- The plot shows a relatively flat response across the frequency range from 20 Hz to 20 kHz, indicating the human voice contains components across this entire spectrum.\n- The flatness suggests an even energy distribution across the frequencies shown.\n\n4. **Key Features and Technical Details**:\n- The graph illustrates the full frequency range of human voice components, from the low end at 20 Hz to the high end at 20 kHz.\n- There are no significant peaks or valleys, indicating a broad and consistent frequency range.\n\n5. **Annotations and Specific Data Points**:\n- The graph is shaded to emphasize the entire frequency range covered by the human voice.\n\nThis graph demonstrates the full range of frequencies present in human speech, contrasting with the limited bandwidth in phone systems, as shown in graph (b).\nimage_name:(b)\ndescription:**Graph Type and Function**:\nThe graph in Figure 11.2(b) is a frequency response graph, likely a Bode plot, illustrating the bandwidth of a phone system.\n\n**Axes Labels and Units**:\n- The horizontal axis is labeled 'f' and represents frequency in hertz (Hz).\n- The frequency range spans from 400 Hz to 3.5 kHz.\n- The vertical axis is not explicitly labeled but typically represents amplitude or gain in decibels (dB).\n\n**Overall Behavior and Trends**:\n- The graph shows a bandpass characteristic, allowing frequencies between approximately 400 Hz and 3.5 kHz to pass.\n- The response rises sharply from 400 Hz, indicating the lower cutoff frequency, and then levels off, maintaining a relatively constant amplitude.\n- Beyond 3.5 kHz, the response declines sharply, indicating the upper cutoff frequency.\n\n**Key Features and Technical Details**:\n- The graph exhibits a peak within the passband, suggesting a resonant frequency where gain is maximized.\n- The phone system's bandwidth is limited to approximately 3.1 kHz (from 400 Hz to 3.5 kHz).\n- There is a steep roll-off beyond the upper cutoff frequency, indicating significant attenuation of frequencies above 3.5 kHz.\n\n**Annotations and Specific Data Points**:\n- The lower cutoff frequency is marked at 400 Hz, and the upper cutoff frequency at 3.5 kHz.\n- The peak within the passband likely represents a frequency where the system's gain is at its maximum, though specific gain values are not provided.\n\nFigure 11.2\n\nExercise Whose voice does the phone system alter more, men's or women's?\n\nExample\n11.2\n\nSolution During recording, your voice travels through the air to the audio recorder. When you speak and listen to your own voice simultaneously, your voice travels through both the air and your skull to your ear. Since the frequency response of the skull path differs from that of the air (i.e., your skull transmits some frequencies more easily), you hear your own voice differently than others do.\n\nExercise Explain what happens to your voice when you have a cold.\n\nExample Video signals typically require a bandwidth of about 5 MHz. For instance, a graphics\n\n11.3 card delivering video signals to a computer display must provide at least 5 MHz of bandwidth. Explain what happens if the bandwidth of a video system is insufficient.\n\nSolution With insufficient bandwidth, the \"sharp\" edges on a display become \"soft,\" resulting in a fuzzy picture. This occurs because the display driver is not fast enough to abruptly change contrast, e.g., from white to black between pixels. Figures 11.3(a) and (b) illustrate this effect for high-bandwidth and low-bandwidth drivers, respectively. (The display is scanned from left to right.)\nimage_name:(a)\ndescription:The image labeled (a) shows a clear and sharp letter 'E'. The edges of the letter are well-defined, indicating the effect of a high-bandwidth driver on a display. The contrast between the black letter and the white background is distinct, demonstrating how sufficient bandwidth allows for precise transitions between colors or shades on a screen. This clarity contrasts with the blurred edges seen in a low-bandwidth scenario.\nimage_name:(b)\ndescription:The image labeled (b) shows the letter 'E' with blurred edges, illustrating the effect of insufficient bandwidth in a video system. The edges are not sharp, indicating a lack of clarity and definition, characteristic of a low-bandwidth display driver. The blurred or 'soft' appearance of the transitions from black to white around the edges demonstrates how slower response times result in less distinct image rendering. This visual contrasts with the crisp, well-defined edges expected with a high-bandwidth driver.\n\n(a)\nimage_name:(a)\ndescription:The image labeled \"(a)\" displays a large black letter 'E' with blurred edges, illustrating the effect of insufficient bandwidth in a video system. The edges are not sharp, indicating a lack of clarity and definition, characteristic of a low-bandwidth display driver. The blurred or 'soft' appearance of the transitions from black to white around the edges demonstrates how slower response times result in less distinct image rendering. This visual serves to contrast with the crisp, well-defined edges expected with a high-bandwidth driver. No additional components, connections, or annotations are visible, as it primarily illustrates the concept of bandwidth limitations visually.\n\n(b)\n\nFigure 11.3\n\nExercise What happens if the display is scanned from top to bottom?\n\nWhat causes the gain roll-off in Fig. 11.1? Consider the simple low-pass filter in Fig. 11.4(a). At low frequencies, $C_{1}$ is nearly open, and the current through $R_{1}$ is minimal; thus, $V_{\\text {out }}=V_{\\text {in }}$. As the frequency increases, $C_{1}$'s impedance falls, and the voltage divider of $R_{1}$ and $C_{1}$ attenuates $V_{\\text {in }}$ more significantly. This behavior is depicted in Fig. 11.4(b).\n\nAs a more complex example, consider the common-source stage in Fig. 11.5(a), where a load capacitance, $C_{L}$, appears at the output. At low frequencies, the signal current from $M_{1}$ prefers $R_{D}$ due to $C_{L}$'s high impedance. At high frequencies, $C_{L}$ \"steals\" some signal current, shunting it to ground, resulting in a lower output voltage swing. From the small-signal model in Fig. 11.5(b), we note that $R_{D}$ and $C_{L}$ are in parallel, hence:\n\n$$\n\\begin{equation*}\nV_{\\text {out }}=-g_{m} V_{\\text {in }}\\left(R_{D} \\| \\frac{1}{C_{L} S}\\right) \\tag{11.1}\n\\end{equation*}\n$$\n\nAs the frequency increases, the parallel impedance decreases, and so does $V_{\\text {out }}$'s amplitude. Thus, the voltage gain drops at high frequencies.\n\nWhy do we use sinusoidal inputs in studying frequency response? An amplifier may process voice or video signals that don't resemble sinusoids. Fortunately, such signals can be viewed as a sum of many sinusoids with different frequencies (and phases). Therefore, responses like those in Fig. 11.5(b) are useful as long as the circuit remains linear, allowing superposition to apply."
},
{
    "text": "What do we mean by \"frequency response?\" As depicted in Fig. 11.1(a), the concept involves applying a sinusoidal signal to the input of a circuit and observing the output while varying the input frequency. Fig. 11.1(a) illustrates that the circuit may exhibit high gain at low frequencies but a \"roll-off\" as the frequency rises. We plot the gain magnitude as shown in Fig. 11.1(b) to represent the circuit's behavior across all relevant frequencies. We can loosely refer to $f_{1}$ as the circuit's useful bandwidth. Before delving into the cause of this roll-off,\n\nimage_name:(a)\ndescription:Fig. 11.1(a) presents a system block diagram illustrating the concept of frequency response testing in a circuit. It comprises three main components:\n\n1. **Input Sinusoidal Signal**: Three different sinusoidal waveforms enter the circuit, representing varying frequencies, labeled as \\( \\text{In}(A_0) \\) to indicate the input amplitude.\n\n2. **Amplifier Block**: Each input signal passes through an amplifier block marked \\( A_0 \\), which increases the signal's amplitude. This block is crucial for analyzing the circuit's response to different frequencies.\n\n3. **Output Sinusoidal Signal**: The amplifier's output is labeled \\( \\text{Out}(A_0) \\), showing amplified sinusoidal waveforms. As the input frequency increases, the output signal's amplitude decreases, demonstrating the roll-off effect.\n\nThe information flow is straightforward: the input sinusoidal signal enters the amplifier, gets amplified, and exits as an output signal. This setup helps observe how the circuit's gain changes with frequency.\n\nFig. 11.1(b) complements this by plotting the gain magnitude \\( |A_v| \\) against frequency \\( f \\). The plot reveals high gain at low frequencies, decreasing or \"rolling off\" as the frequency increases. The point \\( f_1 \\) is marked as the useful bandwidth, indicating the frequency range where the circuit maintains relatively high gain before significant roll-off.\n\nOverall, the system's primary function is to demonstrate a circuit's frequency response, emphasizing gain variation with input frequency and identifying the effective bandwidth.\n\nimage_name:(b)\ndescription:Fig. 11.1(b) features a Bode plot representing a circuit's frequency response. The x-axis, labeled 'f', represents frequency in hertz (Hz), while the y-axis, labeled '|A_v|', denotes the voltage gain magnitude in decibels (dB). The plot uses a logarithmic scale for frequency, common in Bode plots to cover a wide frequency range effectively.\n\nThe graph shows high gain at low frequencies, remaining relatively constant until a certain frequency, labeled 'f₁'. This point, marked by a vertical dashed line, is the cutoff frequency or -3 dB point, indicating the useful bandwidth. Beyond this point, the graph declines, showing a roll-off in gain with increasing frequency. This roll-off is typically due to reactive components like capacitors and inductors affecting gain at higher frequencies.\n\nThe key feature is the roll-off region, where gain decreases, highlighting the circuit's limited ability to amplify high-frequency signals. This behavior is crucial for understanding bandwidth limitations and is common in filters and amplifiers. The roll-off slope provides insights into the filter order or dominant reactive elements.\n\nAnnotations include the 'Roll-Off' label, emphasizing the frequency-dependent nature of the circuit's gain. The cutoff frequency 'f₁' is critical for determining the circuit's bandwidth and designing circuits for specific frequency ranges.\n\nFigure 11.1 (a) Conceptual test of frequency response, (b) gain roll-off with frequency.\n\nWhy is frequency response important? The following examples illustrate this.\n\nExample: Why do people's voices sound different over the phone compared to face-to-face conversations?\n\nSolution: The human voice spans frequency components from 20 Hz to 20 kHz [Fig. 11.2(a)]. Circuits processing voice must accommodate this range. However, phone systems have limited bandwidth, as shown in Fig. 11.2(b). Since phones suppress frequencies above 3.5 kHz, each person's voice is altered. High-quality audio systems, conversely, are designed to cover the entire frequency range.\n\nimage_name:(a)\ndescription:Fig. 11.2(a) is a frequency response graph showing the range of frequencies in the human voice. It is a filled area plot, illustrating a continuous range from 20 Hz to 20 kHz on the horizontal axis (frequency, f, in Hz). The vertical axis, unlabeled, typically represents amplitude or relative power.\n\n1. **Graph Type and Function**: A frequency response plot, used to depict the frequency range a system or signal can handle.\n\n2. **Axes Labels and Units**: \n   - **Horizontal Axis (Frequency)**: 20 Hz to 20 kHz.\n   - **Vertical Axis**: Unlabeled, but generally represents amplitude or power.\n\n3. **Overall Behavior and Trends**: The plot shows a relatively flat response across 20 Hz to 20 kHz, indicating the human voice contains components across this entire spectrum. The flatness suggests an even energy distribution.\n\n4. **Key Features and Technical Details**: Illustrates the full frequency range of human voice components, from 20 Hz to 20 kHz, with no significant peaks or valleys.\n\n5. **Annotations and Specific Data Points**: Shaded to emphasize the entire frequency range covered by the human voice. This graph contrasts with the limited bandwidth in phone systems, as shown in graph (b).\n\nimage_name:(b)\ndescription:**Graph Type and Function**: Fig. 11.2(b) is a frequency response graph, likely a Bode plot, illustrating a phone system's bandwidth.\n\n**Axes Labels and Units**:\n- **Horizontal Axis (Frequency, f)**: 400 Hz to 3.5 kHz.\n- **Vertical Axis**: Unlabeled, but typically represents amplitude or gain in decibels (dB).\n\n**Overall Behavior and Trends**:\n- Shows a bandpass characteristic, allowing frequencies between 400 Hz and 3.5 kHz.\n- Response rises sharply from 400 Hz (lower cutoff frequency) and levels off, maintaining constant amplitude.\n- Declines sharply beyond 3.5 kHz (upper cutoff frequency).\n\n**Key Features and Technical Details**:\n- Peak within the passband, suggesting a resonant frequency with maximum gain.\n- Bandwidth limited to approximately 3.1 kHz (from 400 Hz to 3.5 kHz).\n- Steep roll-off beyond the upper cutoff frequency, indicating significant attenuation of higher frequencies.\n\n**Annotations and Specific Data Points**:\n- Lower cutoff frequency at 400 Hz, upper cutoff frequency at 3.5 kHz.\n- Peak within the passband, though specific gain values are not provided.\n\nFigure 11.2\n\nExercise: Whose voice does the phone system alter more, men's or women's?\n\nExample 11.2\n\nSolution: During recording, your voice travels through the air to the audio recorder. When you speak and listen to your own voice simultaneously, it travels through both air and your skull to your ear. Since the skull's frequency response differs from air (i.e., it passes some frequencies more easily), you hear your own voice differently than others do.\n\nExercise: Explain what happens to your voice when you have a cold.\n\nExample 11.3\n\nVideo signals typically require a bandwidth of about 5 MHz. For instance, a graphics card delivering video signals to a computer display must provide at least 5 MHz of bandwidth. Explain what happens if the bandwidth is insufficient.\n\nSolution: Insufficient bandwidth results in \"sharp\" edges on a display appearing \"soft,\" leading to a fuzzy picture. This occurs because the display driver is not fast enough to abruptly change contrast, e.g., from white to black between pixels. Figures 11.3(a) and (b) illustrate this for high-bandwidth and low-bandwidth drivers, respectively. (The display is scanned from left to right.)\n\nimage_name:(a)\ndescription:Image (a) shows a clear, sharp letter 'E' with well-defined edges, representing the effect of a high-bandwidth driver. The distinct contrast between the black letter and white background demonstrates precise transitions between colors or shades on a screen, contrasting with a low-bandwidth scenario where edges would be blurred.\n\nimage_name:(b)\ndescription:Image (b) shows the letter 'E' with blurred edges, illustrating the effect of insufficient bandwidth in a video system. The lack of sharpness indicates reduced clarity and definition, typical of a low-bandwidth display driver. This visual demonstrates how low bandwidth results in a 'soft' or fuzzy appearance of sharp transitions, such as from black to white, due to slower response times.\n\n(a)\n\nimage_name:(a)\ndescription:Image (a) displays a large black letter 'E' with blurred edges, illustrating the effect of insufficient bandwidth in a video system. The edges are not sharp, indicating reduced clarity and definition, characteristic of a low-bandwidth display driver. The blurred or 'soft' appearance of transitions from black to white demonstrates how slower response times result in less distinct image rendering. This visual contrasts with the crisp, well-defined edges expected with a high-bandwidth driver. No additional components, connections, or annotations are visible, focusing solely on illustrating bandwidth limitations.\n\n(b)\n\nFigure 11.3\n\nExercise: What happens if the display is scanned from top to bottom?\n\nWhat causes the gain roll-off in Fig. 11.1? Consider the simple low-pass filter in Fig. 11.4(a). At low frequencies, $C_{1}$ is nearly open, and the current through $R_{1}$ is minimal; thus, $V_{\\text {out }}=V_{\\text {in }}$. As frequency increases, $C_{1}$'s impedance falls, and the voltage divider of $R_{1}$ and $C_{1}$ attenuates $V_{\\text {in }}$ more. This behavior is shown in Fig. 11.4(b).\n\nimage_name:Figure 11.4 (a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: R1, type: Resistor, value: R1, ports: {N1: Vin, N2: Vout}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:This simple low-pass filter circuit attenuates high-frequency signals. The frequency response shows decreasing output voltage with increasing frequency.\n\nimage_name:Figure 11.4 (b)\ndescription:Fig. 11.4(b) is a frequency response plot, specifically a Bode plot, for a simple low-pass filter circuit. The x-axis represents frequency (f) on a logarithmic scale, and the y-axis represents the magnitude of the voltage gain (|V_out/V_in|), dimensionless.\n\n**Overall Behavior and Trends**:\n- Flat response at low frequencies with a gain of 1.0, indicating no attenuation.\n- Decreasing gain as frequency increases, showing low-pass filter behavior.\n- Transition from flat to declining regions marks the cutoff frequency.\n\n**Key Features and Technical Details**:\n- Cutoff frequency (where gain drops to 0.707 or -3 dB) is not explicitly marked but is critical.\n- Slope of decline beyond cutoff frequency is typically -20 dB/decade for a first-order filter.\n\n**Annotations and Specific Data Points**:\n- No specific numerical values or annotations for cutoff frequency or gain levels beyond the flat region.\n\nFigure 11.4 (a) Simple low-pass filter, (b) its frequency response.\n\nConsider the common-source stage in Fig. 11.5(a), where a load capacitance, $C_{L}$, appears at the output. At low frequencies, the signal current from $M_{1}$ prefers $R_{D}$ due to $C_{L}$'s high impedance. At high frequencies, $C_{L}$ \"steals\" some signal current, shunting it to ground, reducing the output voltage swing. From the small-signal model in Fig. 11.5(b), $R_{D}$ and $C_{L}$ are in parallel, hence:\n\n$$\n\\begin{equation*}\nV_{\\text {out }}=-g_{m} V_{\\text {in }}\\left(R_{D} \\| \\frac{1}{C_{L} S}\\right) \\tag{11.1}\n\\end{equation*}\n$$\n\nAs frequency increases, the parallel impedance decreases, lowering $V_{\\text {out }}$'s amplitude. Thus, the voltage gain drops at high frequencies.\n\nWhy use sinusoidal inputs for frequency response studies? An amplifier may process voice or video signals, which are not purely sinusoidal. However, these signals can be viewed as a sum of many sinusoids with different frequencies (and phases). Therefore, responses like those in Fig. 11.5(b) are useful as long as the circuit remains linear, allowing superposition."
},
{
    "text": "What do we mean by \"frequency response?\" As depicted in Fig. 11.1(a), the concept involves applying a sinusoidal input to a circuit and observing the output as the input frequency varies. Fig. 11.1(a) illustrates that the circuit may exhibit high gain at low frequencies but a \"roll-off\" as the frequency rises. We plot the gain magnitude as shown in Fig. 11.1(b) to represent the circuit's behavior across all relevant frequencies. We can loosely refer to $f_{1}$ as the circuit's useful bandwidth. Before delving into the cause of this roll-off,\n\nimage_name:(a)\ndescription:Fig. 11.1(a) presents a system block diagram illustrating the concept of frequency response testing in a circuit. The diagram comprises three main components:\n\n1. **Input Sinusoidal Signal**: Three distinct sinusoidal waveforms entering the circuit represent varying frequencies, labeled as \\( \\text{In}(A_0) \\), indicating the input amplitude.\n\n2. **Amplifier Block**: Each input signal passes through an amplifier block marked \\( A_0 \\). This block's role is to amplify the input signal's amplitude, crucial for analyzing the circuit's response to different frequencies.\n\n3. **Output Sinusoidal Signal**: The amplifier's output is labeled \\( \\text{Out}(A_0) \\), showing the amplified sinusoidal waveforms. As the input frequency increases, the output signal's amplitude decreases, demonstrating the roll-off effect.\n\nThe information flow is straightforward: the input sinusoidal signal enters the amplifier, gets amplified, and exits as an output signal. This setup helps observe how the circuit's gain changes with frequency.\n\nFig. 11.1(b) complements this by plotting the gain magnitude \\( |A_v| \\) against frequency \\( f \\). The plot reveals high gain at low frequencies, decreasing or \"rolling off\" as the frequency rises. The point \\( f_1 \\) is marked as the useful bandwidth, indicating the frequency range where the circuit maintains relatively high gain before significant roll-off.\n\nOverall, the system's primary function is to demonstrate a circuit's frequency response, emphasizing gain variation with input frequency and identifying the effective operating bandwidth.\n\nimage_name:(b)\ndescription:Figure 11.1(b) features a Bode plot depicting a circuit's frequency response. The x-axis, labeled 'f', represents frequency in hertz (Hz), while the y-axis, labeled '|A_v|', denotes the voltage gain magnitude in decibels (dB). The plot uses a logarithmic scale for frequency, typical in Bode plots to cover a broad frequency range effectively.\n\nThe graph shows high gain at low frequencies, remaining relatively constant until a specific frequency, labeled 'f₁'. This point, marked by a vertical dashed line, is the cutoff frequency or -3 dB point, indicating the circuit's useful bandwidth. Beyond this point, the graph exhibits a downward trend, showing a gain roll-off as the frequency increases. This roll-off is typically due to reactive components like capacitors and inductors affecting the gain at higher frequencies.\n\nThe key feature is the roll-off region, where gain decreases, highlighting the circuit's limited ability to amplify high-frequency signals. This behavior is crucial for understanding bandwidth limitations in filters and amplifiers. The roll-off slope provides insights into the filter order or dominant reactive elements.\n\nAnnotations include the 'Roll-Off' label, emphasizing the frequency-dependent nature of the circuit's gain. The cutoff frequency 'f₁' is critical for determining the circuit's bandwidth and designing circuits for specific frequency ranges.\n\nFigure 11.1 (a) Conceptual test of frequency response, (b) gain roll-off with frequency.\nwe must ask: why is frequency response important? The following examples illustrate this issue.\n\nExample Explain why people's voices over the phone sound different from their voices in face-to-face conversation.\n\nSolution The human voice encompasses frequency components from 20 Hz to 20 kHz [Fig. 11.2(a)]. Thus, voice-processing circuits must accommodate this range. However, phone systems have limited bandwidth, as shown in Fig. 11.2(b). Since phones suppress frequencies above 3.5 kHz, each person's voice is altered. In contrast, high-quality audio systems are designed to cover the entire frequency range.\n\nimage_name:(a)\ndescription:The graph labeled (a) is a frequency response graph showing the human voice's frequency range. It is a filled area plot, illustrating a continuous range from 20 Hz to 20 kHz on the horizontal axis, representing frequency (f) in hertz (Hz). The vertical axis, though not explicitly labeled, typically represents amplitude or relative power.\n\n1. **Graph Type and Function**:\n- A frequency response plot, commonly used to depict a system's or signal's frequency range.\n\n2. **Axes Labels and Units**:\n- **Horizontal Axis (Frequency)**: Ranges from 20 Hz to 20 kHz.\n- **Vertical Axis**: Generally represents amplitude or power, though not labeled.\n\n3. **Overall Behavior and Trends**:\n- The plot shows a relatively flat response across the 20 Hz to 20 kHz range, indicating the human voice contains components across this spectrum.\n- The flatness suggests an even energy distribution across the frequencies.\n\n4. **Key Features and Technical Details**:\n- Illustrates the full frequency range of human voice components, from the low end at 20 Hz to the high end at 20 kHz.\n- No significant peaks or valleys, indicating a broad and consistent frequency range.\n\n5. **Annotations and Specific Data Points**:\n- The shaded area emphasizes the entire frequency range covered by the human voice.\n\nThis graph demonstrates the full range of frequencies in human speech, contrasting with the limited bandwidth in phone systems, as shown in graph (b).\n\nimage_name:(b)\ndescription:**Graph Type and Function**:\nThe graph in Figure 11.2(b) is a frequency response graph, likely a Bode plot, illustrating a phone system's bandwidth.\n\n**Axes Labels and Units**:\n- The horizontal axis is labeled 'f', representing frequency in hertz (Hz).\n- The frequency range spans from 400 Hz to 3.5 kHz.\n- The vertical axis, not explicitly labeled, typically represents amplitude or gain in decibels (dB).\n\n**Overall Behavior and Trends**:\n- The graph shows a bandpass characteristic, allowing frequencies between approximately 400 Hz and 3.5 kHz to pass.\n- The response rises sharply from 400 Hz, indicating the lower cutoff frequency, and levels off, maintaining a relatively constant amplitude.\n- Beyond 3.5 kHz, the response declines sharply, indicating the upper cutoff frequency.\n\n**Key Features and Technical Details**:\n- A peak within the passband suggests a resonant frequency with maximum gain.\n- The phone system's bandwidth is limited to about 3.1 kHz (from 400 Hz to 3.5 kHz).\n- A steep roll-off beyond the upper cutoff frequency indicates significant attenuation of higher frequencies.\n\n**Annotations and Specific Data Points**:\n- The lower cutoff frequency is marked at 400 Hz, and the upper cutoff frequency at 3.5 kHz.\n- The peak within the passband represents the frequency with maximum gain, though specific gain values are not provided.\n\nFigure 11.2\n\nExercise Whose voice does the phone system alter more, men's or women's?\n\nExample\n11.2\n\nSolution During recording, your voice travels through the air to the audio recorder. When you speak and listen to your own voice simultaneously, your voice travels through both the air and your skull to your ear. Since the skull's frequency response differs from that of the air (i.e., the skull passes some frequencies more easily), you hear your own voice differently from how others hear it.\n\nExercise Explain what happens to your voice when you have a cold.\n\nExample Video signals typically require a bandwidth of about 5 MHz. For instance, a graphics card delivering a video signal to a computer display must provide at least 5 MHz of bandwidth. Explain what happens if the bandwidth of a video system is insufficient.\n\nSolution Insufficient bandwidth results in \"soft\" edges on a display, producing a fuzzy picture. This occurs because the display driver cannot rapidly change contrast, e.g., from white to black between pixels. Figures 11.3(a) and (b) illustrate this effect for high-bandwidth and low-bandwidth drivers, respectively. (The display is scanned from left to right.)\n\nimage_name:(a)\ndescription:The image labeled (a) shows a clear and sharp letter 'E', indicating the effect of a high-bandwidth driver on a display. The edges are well-defined, demonstrating how sufficient bandwidth allows precise transitions between colors or shades. This clarity contrasts with a low-bandwidth scenario, where edges would appear softer and more blurred.\n\nimage_name:(b)\ndescription:The image labeled (b) shows the letter 'E' with blurred edges, representing the effect of insufficient bandwidth in a video system. The lack of sharpness indicates reduced clarity and definition, typical of a low-bandwidth display driver. This visual illustrates how low bandwidth results in a 'soft' or fuzzy appearance of sharp transitions, such as from black to white, due to slower response times.\n\n(a)\nimage_name:(a)\ndescription:The image labeled \"(a)\" displays a large black letter 'E' with blurred edges, illustrating the effect of insufficient bandwidth in a video system. The lack of sharp edges indicates reduced clarity and definition, characteristic of a low-bandwidth display driver. The blurred or 'soft' appearance of transitions from black to white demonstrates how slower response times result in less distinct image rendering. This visual contrasts with the crisp edges expected from a high-bandwidth driver.\n\n(b)\n\nFigure 11.3\n\nExercise What happens if the display is scanned from top to bottom?\n\nWhat causes the gain roll-off in Fig. 11.1? Consider the simple low-pass filter in Fig. 11.4(a). At low frequencies, $C_{1}$ is nearly open, and the current through $R_{1}$ is minimal; thus, $V_{\\text {out }}=V_{\\text {in }}$. As the frequency increases, $C_{1}$'s impedance falls, and the voltage divider formed by $R_{1}$ and $C_{1}$ attenuates $V_{\\text {in }}$ more. The circuit thus exhibits the behavior shown in Fig. 11.4(b).\n\nimage_name:Figure 11.4 (a)\ndescription:[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: R1, type: Resistor, value: R1, ports: {N1: Vin, N2: Vout}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:This is a simple low-pass filter circuit. The frequency response shows that the output voltage decreases as the frequency increases, indicating attenuation of high-frequency signals.\n\nimage_name:Figure 11.4 (b)\ndescription:The graph in Figure 11.4(b) is a frequency response plot, specifically a Bode plot, for a simple low-pass filter circuit. The x-axis represents frequency (f) on a logarithmic scale, and the y-axis represents the magnitude of the voltage gain (|V_out/V_in|), dimensionless.\n\n**Overall Behavior and Trends**:\n- The graph shows a flat response at low frequencies, with a gain of 1.0, indicating no attenuation of low-frequency signals.\n- As the frequency increases, the gain decreases, demonstrating the low-pass filter's characteristic roll-off.\n- The transition point marks the cutoff frequency, where the filter begins to significantly attenuate the input signal.\n\n**Key Features and Technical Details**:\n- The cutoff frequency, where the gain drops to approximately 0.707 (or -3 dB), is not explicitly marked but is a critical point.\n- The slope of the decline beyond the cutoff frequency is typically -20 dB/decade for a first-order low-pass filter.\n\n**Annotations and Specific Data Points**:\n- The plot lacks specific numerical values or annotations for the cutoff frequency or gain levels beyond the initial flat region.\n\nFigure 11.4 (a) Simple low-pass filter, and (b) its frequency response.\nimage_name:Figure 11.5 (a)\ndescription:[\nname: RD, type: Resistor, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: CL, type: Capacitor, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:This circuit is a common-source (CS) amplifier stage with a load capacitance (CL). The NMOS transistor M1 amplifies the input signal Vin. The resistor RD is connected to VDD and the drain of M1, setting the DC bias point and providing load resistance. The capacitor CL is connected at the output Vout, filtering high-frequency noise and stabilizing the output signal.\n\n(a)\nimage_name:Figure 11.5 (b)\ndescription:[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: gmVin, type: VoltageControlledCurrentSource, ports: {Np: Vout, Nn: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: Vout, N2: GND}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:This circuit is a small-signal model of a common-source amplifier stage with load capacitance. The voltage source Vin provides the input signal. The voltage-controlled current source gmVin represents the transconductance of the NMOS transistor. The resistor RD and capacitor CL are connected in parallel at the output node Vout, filtering high-frequency noise and stabilizing the output signal.\n\n(b)\n\nFigure 11.5 (a) CS stage with load capacitance, (b) small-signal model of the circuit.\n$C_{L}$, at low frequencies, $C_{L}$'s impedance is high, so the signal current from $M_{1}$ flows mainly through $R_{D}$. At high frequencies, $C_{L}$ \"steals\" some of the signal current, shunting it to ground, resulting in a lower voltage swing at the output. From the small-signal equivalent circuit of Fig. 11.5(b), we note that $R_{D}$ and $C_{L}$ are in parallel, hence:\n\n$$\n\\begin{equation*}\nV_{\\text {out }}=-g_{m} V_{\\text {in }}\\left(R_{D} \\| \\frac{1}{C_{L} S}\\right) \\tag{11.1}\n\\end{equation*}\n$$\n\nAs the frequency increases, the parallel impedance decreases, and so does the amplitude of $V_{\\text {out }}$. Thus, the voltage gain drops at high frequencies.\n\nThe reader may wonder why we use sinusoidal inputs in studying frequency response. After all, real signals like voice or video are not pure sinusoids. Fortunately, such signals can be viewed as a sum of many sinusoids with different frequencies (and phases). Therefore, responses like those in Fig. 11.5(b) are useful as long as the circuit remains linear, allowing superposition to apply."
},
{
    "text": "What exactly do we mean by \"frequency response?\" As depicted in Fig. 11.1(a), the concept involves applying a sinusoidal signal to the circuit's input and observing the output while varying the input frequency. Fig. 11.1(a) illustrates that the circuit may exhibit high gain at low frequencies but experience a \"roll-off\" as the frequency rises. We plot the gain magnitude as shown in Fig. 11.1(b) to represent the circuit's behavior across all relevant frequencies. We can loosely refer to $f_{1}$ as the circuit's useful bandwidth. Before delving into the cause of this roll-off,\nimage_name:(a)\ndescription:Fig. 11.1(a) presents a system block diagram illustrating the concept of frequency response testing in a circuit. The diagram comprises three main components:\n\n1. **Input Sinusoidal Signal**: Three distinct sinusoidal waveforms are depicted entering the circuit, representing varying frequencies. These are labeled as \\( \\text{In}(A_0) \\), indicating the input amplitude.\n\n2. **Amplifier Block**: Each input signal passes through an amplifier block marked \\( A_0 \\). This block's role is to amplify the input signal's amplitude, crucial for analyzing the circuit's response to different frequencies.\n\n3. **Output Sinusoidal Signal**: The amplifier's output is labeled \\( \\text{Out}(A_0) \\), showing the amplified sinusoidal waveforms. As the input signal's frequency increases, the output signal's amplitude decreases, demonstrating the roll-off effect.\n\nThe information flow is straightforward: the input sinusoidal signal enters the amplifier, gets amplified, and then exits as an output signal. This setup helps observe how the circuit's gain changes with frequency.\n\nFig. 11.1(b) complements this by plotting the gain magnitude \\( |A_v| \\) against frequency \\( f \\). The plot reveals high gain at low frequencies, which decreases or \"rolls off\" as the frequency increases. The point \\( f_1 \\) is identified as the useful bandwidth, indicating the frequency range where the circuit maintains relatively high gain before significant roll-off occurs.\n\nOverall, the system's primary role is to demonstrate a circuit's frequency response, highlighting how gain varies with input frequency and identifying the effective bandwidth.\n\nimage_name:(b)\ndescription:Fig. 11.1(b) features a Bode plot representing a circuit's frequency response. The x-axis, labeled 'f', represents frequency in hertz (Hz), while the y-axis, labeled '|A_v|', denotes the voltage gain magnitude, typically in decibels (dB). The plot uses a logarithmic scale for frequency, common in Bode plots to effectively cover a wide frequency range.\n\nThe graph shows high gain at low frequencies, remaining relatively constant until a specific frequency, labeled 'f₁'. This point, marked by a vertical dashed line, is the cutoff frequency or -3 dB point, indicating the useful bandwidth. Beyond this point, the graph shows a downward trend, signifying a gain roll-off as the frequency increases. This roll-off is typically due to reactive components like capacitors and inductors affecting gain at higher frequencies.\n\nThe key feature is the roll-off region, where gain decreases, highlighting the circuit's limited ability to amplify high-frequency signals. This behavior is crucial for understanding bandwidth limitations in filters and amplifiers. The roll-off slope provides insights into the filter order or dominant reactive elements.\n\nAnnotations include the 'Roll-Off' label, emphasizing the frequency-dependent nature of the circuit's gain. The cutoff frequency 'f₁' is critical for determining the effective bandwidth and designing circuits for specific frequency ranges.\n\nFigure 11.1 (a) Conceptual test of frequency response, (b) gain roll-off with frequency.\nwe must ask: why is frequency response important? The following examples illustrate this.\n\nExample Explain why people's voices over the phone sound different from their voices in face-to-face conversation.\n\nSolution The human voice spans frequency components from 20 Hz to 20 kHz [Fig. 11.2(a)]. Therefore, circuits processing voice must accommodate this range. Unfortunately, phone systems have limited bandwidth, exhibiting the frequency response shown in Fig. 11.2(b). Since phones suppress frequencies above 3.5 kHz, each person's voice is altered. In contrast, high-quality audio systems are designed to cover the entire frequency range.\nimage_name:(a)\ndescription:Fig. 11.2(a) is a frequency response graph showing the range of frequencies in the human voice. It is a filled area plot illustrating a continuous range from 20 Hz to 20 kHz on the horizontal axis, representing frequency (f) in hertz (Hz). The vertical axis, though not explicitly labeled, typically represents amplitude or relative power.\n\n1. **Graph Type and Function**:\n- The graph is a frequency response plot, commonly used to depict the frequency range a system or signal can handle.\n\n2. **Axes Labels and Units**:\n- **Horizontal Axis (Frequency)**: Ranges from 20 Hz to 20 kHz.\n- **Vertical Axis**: Not labeled, but generally represents amplitude or power.\n\n3. **Overall Behavior and Trends**:\n- The plot shows a relatively flat response across the frequency range, indicating the human voice contains components across this entire spectrum.\n- The flatness suggests an even energy distribution across the frequencies.\n\n4. **Key Features and Technical Details**:\n- The graph illustrates the full frequency range of human voice components, from the low end at 20 Hz to the high end at 20 kHz.\n- There are no significant peaks or valleys, indicating a broad and consistent frequency range.\n\n5. **Annotations and Specific Data Points**:\n- The graph is shaded to emphasize the entire frequency range covered by the human voice.\n\nThis graph demonstrates the full range of frequencies present in human speech, contrasting with the limited bandwidth in phone systems, as shown in graph (b).\n\nimage_name:(b)\ndescription:**Graph Type and Function**:\nFig. 11.2(b) is a frequency response graph, likely a Bode plot, illustrating the bandwidth of a phone system.\n\n**Axes Labels and Units**:\n- The horizontal axis is labeled 'f' and represents frequency in hertz (Hz).\n- The frequency range spans from 400 Hz to 3.5 kHz.\n- The vertical axis is not explicitly labeled but typically represents amplitude or gain in decibels (dB).\n\n**Overall Behavior and Trends**:\n- The graph shows a bandpass characteristic, allowing frequencies between approximately 400 Hz and 3.5 kHz to pass.\n- The response rises sharply from 400 Hz, indicating the lower cutoff frequency, and levels off, maintaining a relatively constant amplitude.\n- Beyond 3.5 kHz, the response declines sharply, indicating the upper cutoff frequency.\n\n**Key Features and Technical Details**:\n- The graph exhibits a peak within the passband, suggesting a resonant frequency with maximum gain.\n- The bandwidth of the phone system is limited to about 3.1 kHz (from 400 Hz to 3.5 kHz).\n- There is a steep roll-off beyond the upper cutoff frequency, indicating significant attenuation of higher frequencies.\n\n**Annotations and Specific Data Points**:\n- The lower cutoff frequency is marked at 400 Hz, and the upper cutoff frequency at 3.5 kHz.\n- The peak within the passband represents the frequency with maximum gain, though specific gain values are not provided.\n\nFigure 11.2\n\nExercise Whose voice does the phone system alter more, men's or women's?\n\nExample\n11.2\n\nSolution When recording, your voice travels through the air to the audio recorder. However, when you speak and listen to your own voice simultaneously, your voice travels not only through the air but also from your mouth through your skull to your ear. Since the frequency response of the skull path differs from that of the air path (i.e., your skull passes some frequencies more easily), you hear your own voice differently than others do.\n\nExercise Explain what happens to your voice when you have a cold.\n\nExample Video signals typically occupy a bandwidth of about 5 MHz. For instance, a graphics card delivering a video signal to a computer display must provide at least 5 MHz of bandwidth. Explain what happens if the bandwidth of a video system is insufficient.\n\nSolution Insufficient bandwidth causes \"sharp\" edges on a display to appear \"soft,\" resulting in a fuzzy picture. This occurs because the circuit driving the display is not fast enough to abruptly change contrast, e.g., from complete white to complete black between pixels. Figures 11.3(a) and (b) illustrate this effect for high-bandwidth and low-bandwidth drivers, respectively. (The display is scanned from left to right.)\nimage_name:(a)\ndescription:Fig. 11.3(a) shows a clear and sharp letter 'E', indicating the effect of a high-bandwidth driver on a display. The edges of the letter are well-defined, demonstrating how sufficient bandwidth allows precise transitions between colors or shades on a screen. This clarity contrasts with the blurred edges seen in a low-bandwidth scenario.\n\nimage_name:(b)\ndescription:Fig. 11.3(b) shows the letter 'E' with blurred edges, illustrating the effect of insufficient bandwidth in a video system. The lack of sharpness in the edges indicates reduced clarity and definition, characteristic of a low-bandwidth display driver. This visual demonstrates how low bandwidth results in a 'soft' or fuzzy appearance of sharp transitions, such as from black to white, due to slower response times.\n\n(a)\nimage_name:(a)\ndescription:Fig. 11.3(a) displays a large black letter 'E' with blurred edges, representing the effect of insufficient bandwidth in a video system. The edges are not sharp, indicating a lack of clarity and definition, typical of a low-bandwidth display driver. The blurred or 'soft' appearance of the transitions from black to white around the edges demonstrates how slower response times result in less distinct image rendering. This visual serves to contrast with the crisp, well-defined edges expected with a high-bandwidth driver.\n\n(b)\n\nFigure 11.3\n\nExercise What happens if the display is scanned from top to bottom?\n\nWhat causes the gain roll-off in Fig. 11.1? Consider the simple low-pass filter in Fig. 11.4(a) as an example. At low frequencies, $C_{1}$ is nearly open, and the current through $R_{1}$ is minimal; thus, $V_{\\text {out }}=V_{\\text {in }}$. As the frequency increases, $C_{1}$'s impedance decreases, and the voltage divider formed by $R_{1}$ and $C_{1}$ attenuates $V_{\\text {in }}$ more. This results in the behavior shown in Fig. 11.4(b).\n\nFor a more complex example, consider the common-source stage in Fig. 11.5(a), where a load capacitance, $C_{L}$, appears at the output. At low frequencies, the signal current from $M_{1}$ prefers to flow through $R_{D}$ due to $C_{L}$'s high impedance. At high frequencies, however, $C_{L}$ diverts some signal current to ground, reducing the output voltage swing. From the small-signal equivalent circuit in Fig. 11.5(b), we note that $R_{D}$ and $C_{L}$ are in parallel, leading to:\n\n$$\n\\begin{equation*}\nV_{\\text {out }}=-g_{m} V_{\\text {in }}\\left(R_{D} \\| \\frac{1}{C_{L} S}\\right) \\tag{11.1}\n\\end{equation*}\n$$\n\nThus, as the frequency increases, the parallel impedance decreases, and so does $V_{\\text {out }}$'s amplitude. The voltage gain therefore drops at high frequencies.\n\nWhy do we use sinusoidal inputs in studying frequency response? An amplifier may process voice or video signals that don't resemble sinusoids. Fortunately, such signals can be viewed as a sum of many sinusoids with different frequencies (and phases). Therefore, responses like those in Fig. 11.5(b) are useful as long as the circuit remains linear, allowing superposition to apply."
},
{
    "text": "What do we mean by \"frequency response?\" As depicted in Fig. 11.1(a), the concept involves applying a sinusoidal input to a circuit and observing the output while varying the input frequency. Fig. 11.1(a) illustrates that the circuit may exhibit high gain at low frequencies but a \"roll-off\" as the frequency rises. We plot the gain magnitude as shown in Fig. 11.1(b) to represent the circuit's behavior across all relevant frequencies. We can loosely refer to $f_{1}$ as the circuit's useful bandwidth. Before delving into the cause of this roll-off,\nimage_name:(a)\ndescription:Fig. 11.1(a) presents a system block diagram illustrating the concept of frequency response testing in a circuit. The diagram comprises three main components:\n\n1. **Input Sinusoidal Signal**: Three distinct sinusoidal waveforms are depicted entering the circuit, representing varying frequencies, labeled as \\( \\text{In}(A_0) \\) to indicate the input amplitude.\n\n2. **Amplifier Block**: Each input signal passes through an amplifier block marked \\( A_0 \\). This block's role is to amplify the input signal's amplitude, crucial for analyzing the circuit's response to different frequencies.\n\n3. **Output Sinusoidal Signal**: The amplifier's output is labeled \\( \\text{Out}(A_0) \\), showing the amplified sinusoidal waveforms. As the input frequency increases, the output signal's amplitude decreases, demonstrating the roll-off effect.\n\nThe information flow is straightforward: the input sinusoidal signal enters the amplifier, gets amplified, and exits as an output signal. This setup helps observe how the circuit's gain changes with frequency.\n\nFig. 11.1(b) complements this by plotting the gain magnitude \\( |A_v| \\) against frequency \\( f \\). The plot reveals high gain at low frequencies, which decreases or \"rolls off\" as the frequency increases. The point \\( f_1 \\) is marked as the useful bandwidth, indicating the frequency range where the circuit maintains a relatively high gain before significant roll-off occurs.\n\nOverall, the system's primary function is to demonstrate the circuit's frequency response, highlighting how gain varies with input frequency and identifying the effective bandwidth.\n\nimage_name:(b)\ndescription:Figure 11.1(b) features a Bode plot representing the frequency response of a circuit. The x-axis, labeled 'f', represents frequency in hertz (Hz), while the y-axis, labeled '|A_v|', denotes the magnitude of voltage gain, typically in decibels (dB). The plot uses a logarithmic scale for frequency, common in Bode plots to cover a wide frequency range effectively.\n\nThe graph shows high gain at low frequencies, remaining relatively constant until a specific frequency, labeled 'f₁'. This point, marked by a vertical dashed line, is the cutoff frequency or -3 dB point, indicating the circuit's useful bandwidth. Beyond this point, the graph exhibits a downward trend, signifying a roll-off in gain as the frequency increases. This roll-off is typically due to reactive components like capacitors and inductors affecting the gain at higher frequencies.\n\nThe key feature is the roll-off region, where gain decreases, highlighting the circuit's limited ability to amplify high-frequency signals. This behavior is crucial for understanding bandwidth limitations in filters and amplifiers. The roll-off slope provides insights into the filter order or dominant reactive elements.\n\nAnnotations include the 'Roll-Off' label, emphasizing the frequency-dependent nature of the circuit's gain. The cutoff frequency 'f₁' is critical for determining the circuit's effective bandwidth.\n\nFigure 11.1 (a) Conceptual test of frequency response, (b) gain roll-off with frequency.\nwe must ask: why is frequency response important? The following examples illustrate this.\n\nExample Explain why people's voices over the phone sound different from their voices in face-to-face conversation.\n\nSolution The human voice encompasses frequency components from 20 Hz to 20 kHz [Fig. 11.2(a)]. Therefore, circuits processing voice must accommodate this frequency range. Unfortunately, phone systems have limited bandwidth, as shown in Fig. 11.2(b). Since the phone suppresses frequencies above 3.5 kHz, each person's voice is altered. In contrast, high-quality audio systems are designed to cover the entire frequency range.\nimage_name:(a)\ndescription:The graph labeled (a) is a frequency response graph depicting the range of frequencies in the human voice. It is a filled area plot showing a continuous range from 20 Hz to 20 kHz on the horizontal axis, representing frequency (f) in hertz (Hz). The vertical axis is not explicitly labeled but generally represents amplitude or relative power.\n\n1. **Type of Graph and Function**:\n- The graph is a frequency response plot, commonly used to show the range of frequencies a system or signal can handle.\n\n2. **Axes Labels and Units**:\n- **Horizontal Axis (Frequency)**: Ranges from 20 Hz to 20 kHz.\n- **Vertical Axis**: Not labeled, but typically represents amplitude or power.\n\n3. **Overall Behavior and Trends**:\n- The plot shows a relatively flat response across the frequency range from 20 Hz to 20 kHz, indicating the human voice contains components across this entire spectrum.\n- The flatness suggests an even energy distribution across the frequencies.\n\n4. **Key Features and Technical Details**:\n- The graph illustrates the full frequency range of human voice components, from the low end at 20 Hz to the high end at 20 kHz.\n- There are no significant peaks or valleys, indicating a broad and consistent frequency range.\n\n5. **Annotations and Specific Data Points**:\n- The graph is shaded to emphasize the entire frequency range covered by the human voice.\n\nThis graph demonstrates the full range of frequencies present in human speech, contrasting with the limited bandwidth in phone systems, as shown in graph (b).\n\nimage_name:(b)\ndescription:**Type of Graph and Function**:\nThe graph in Figure 11.2(b) is a frequency response graph, likely a Bode plot, illustrating the bandwidth of a phone system.\n\n**Axes Labels and Units**:\n- The horizontal axis is labeled 'f' and represents frequency in hertz (Hz).\n- The frequency range spans from 400 Hz to 3.5 kHz.\n- The vertical axis is not explicitly labeled but typically represents amplitude or gain in decibels (dB).\n\n**Overall Behavior and Trends**:\n- The graph shows a bandpass characteristic, allowing frequencies between approximately 400 Hz and 3.5 kHz to pass.\n- The response rises sharply from 400 Hz, indicating the lower cutoff frequency, and then levels off, maintaining a relatively constant amplitude.\n- Beyond 3.5 kHz, the response declines sharply, indicating the upper cutoff frequency.\n\n**Key Features and Technical Details**:\n- The graph exhibits a peak within the passband, suggesting a resonant frequency where gain is maximized.\n- The bandwidth of the phone system is limited to about 3.1 kHz (from 400 Hz to 3.5 kHz).\n- There is a steep roll-off beyond the upper cutoff frequency, indicating significant attenuation of frequencies above 3.5 kHz.\n\n**Annotations and Specific Data Points**:\n- The lower cutoff frequency is marked at 400 Hz, and the upper cutoff frequency at 3.5 kHz.\n- The peak within the passband likely represents a frequency where the system's gain is at its maximum, though specific gain values are not provided.\n\nFigure 11.2\n\nExercise Whose voice does the phone system alter more, men's or women's?\n\nExample\n11.2\n\nSolution When recording, your voice travels through the air to reach the audio recorder. However, when you speak and listen to your own voice simultaneously, your voice travels not only through the air but also from your mouth through your skull to your ear. Since the frequency response of the path through your skull differs from that through the air (i.e., your skull passes some frequencies more easily than others), you hear your own voice differently than others do.\n\nExercise Explain what happens to your voice when you have a cold.\n\nExample Video signals typically occupy a bandwidth of about 5 MHz. For instance, the graphics card delivering the video signal to a computer display must provide at least 5 MHz of bandwidth. Explain what happens if the bandwidth of a video system is insufficient.\n\nSolution With insufficient bandwidth, the \"sharp\" edges on a display become \"soft,\" resulting in a fuzzy picture. This occurs because the circuit driving the display is not fast enough to abruptly change contrast from, e.g., complete white to complete black from one pixel to the next. Figures 11.3(a) and (b) illustrate this effect for high-bandwidth and low-bandwidth drivers, respectively. (The display is scanned from left to right.)\nimage_name:(a)\ndescription:The image labeled (a) shows a clear and sharp letter 'E'. The edges of the letter are well-defined, indicating the effect of a high-bandwidth driver on a display. The contrast between the black letter and the white background is distinct, demonstrating how sufficient bandwidth allows for precise transitions between different colors or shades on a screen. This clarity contrasts with the expected result in a low-bandwidth scenario, where the edges would appear softer and more blurred.\nimage_name:(b)\ndescription:The image labeled (b) shows the letter 'E' with blurred edges, illustrating the effect of insufficient bandwidth in a video system. The edges of the letter are not sharp, indicating a lack of clarity and definition. This visual demonstrates how low bandwidth results in a 'soft' or fuzzy appearance of sharp transitions, such as from black to white, due to the slower response time of the display driver. This effect contrasts with what would be expected with a high-bandwidth driver, where the letter 'E' would be depicted with crisp, well-defined edges.\n\n(a)\nimage_name:(a)\ndescription:The image labeled \"(a)\" displays a large black letter 'E' with blurred edges, illustrating the effect of insufficient bandwidth in a video system. The edges of the letter are not sharp, indicating a lack of clarity and definition, characteristic of a low-bandwidth display driver. The blurred or 'soft' appearance of the transitions from black to white around the edges of the letter demonstrates how slower response times in the system result in less distinct image rendering. This visual serves to contrast with what would be expected with a high-bandwidth driver, where the letter 'E' would be depicted with crisp, well-defined edges. No additional components, connections, or annotations are visible in this image, as it primarily illustrates the concept of bandwidth limitations visually.\n\n(b)\n\nFigure 11.3\n\nExercise What happens if the display is scanned from top to bottom?\n\nWhat causes the gain roll-off in Fig. 11.1? To understand this, consider the simple low-pass filter shown in Fig. 11.4(a). At low frequencies, $C_{1}$ is nearly open, and the current through $R_{1}$ is minimal; thus, $V_{\\text {out }}=V_{\\text {in }}$. As the frequency increases, the impedance of $C_{1}$ decreases, and the voltage divider formed by $R_{1}$ and $C_{1}$ attenuates $V_{\\text {in }}$ more significantly. Consequently, the circuit exhibits the behavior shown in Fig. 11.4(b).\n\nAs a more complex example, consider the common-source stage depicted in Fig. 11.5(a), where a load capacitance, $C_{L}$, appears at the output. At low frequencies, the signal current produced by $M_{1}$ prefers to flow through $R_{D}$ due to the high impedance of $C_{L}$. At high frequencies, however, $C_{L}$ \"steals\" some of the signal current and shunts it to ground, resulting in a lower voltage swing at the output. From the small-signal equivalent circuit in Fig. 11.5(b), we note that $R_{D}$ and $C_{L}$ are in parallel, leading to:\n\n$$\n\\begin{equation*}\nV_{\\text {out }}=-g_{m} V_{\\text {in }}\\left(R_{D} \\| \\frac{1}{C_{L} S}\\right) \\tag{11.1}\n\\end{equation*}\n$$\n\nThus, as the frequency increases, the parallel impedance decreases, and so does the amplitude of $V_{\\text {out }}$. The voltage gain therefore drops at high frequencies.\n\nThe reader may wonder why we use sinusoidal inputs in studying frequency response. An amplifier might sense voice or video signals that do not resemble sinusoids. Fortunately, such signals can be viewed as a summation of many sinusoids with different frequencies (and phases). Therefore, responses like those in Fig. 11.5(b) are useful as long as the circuit remains linear, allowing superposition to be applied."
},
{
    "text": "What is meant by \"frequency response?\" As depicted in Fig. 11.1(a), the concept involves applying a sinusoidal input to a circuit and observing the output while varying the input frequency. As shown in Fig. 11.1(a), the circuit may exhibit high gain at low frequencies but experience a \"roll-off\" as the frequency rises. We plot the gain magnitude as in Fig. 11.1(b) to represent the circuit's behavior across all relevant frequencies. We can loosely refer to $f_{1}$ as the circuit's useful bandwidth. Before delving into the cause of this roll-off,\n\nimage_name:(a)\ndescription:Fig. 11.1(a) illustrates the concept of frequency response testing in a circuit. The diagram comprises three main components:\n\n1. **Input Sinusoidal Signal**: Three different sinusoidal waveforms enter the circuit, representing varying frequencies, labeled as \\( \\text{In}(A_0) \\) to indicate the input amplitude.\n\n2. **Amplifier Block**: Each input signal passes through an amplifier block marked \\( A_0 \\), which increases the amplitude of the input signal, crucial for analyzing the circuit's frequency response.\n\n3. **Output Sinusoidal Signal**: The amplifier's output is labeled \\( \\text{Out}(A_0) \\), showing amplified sinusoidal waveforms. As the input frequency increases, the output amplitude decreases, demonstrating the roll-off effect.\n\nThe information flow is straightforward: the input sinusoidal signal enters the amplifier, gets amplified, and exits as an output signal, allowing observation of the circuit's gain changes with frequency.\n\nFig. 11.1(b) complements this by plotting the gain magnitude \\( |A_v| \\) against frequency \\( f \\). It shows high gain at low frequencies, decreasing or \"rolling off\" as the frequency increases. The point \\( f_1 \\) is marked as the useful bandwidth, indicating the frequency range where the circuit maintains relatively high gain before significant roll-off.\n\nOverall, the system's primary function is to demonstrate the circuit's frequency response, highlighting how gain varies with input frequency and identifying the effective operating bandwidth.\n\nimage_name:(b)\ndescription:Figure 11.1(b) presents a Bode plot depicting the frequency response of a circuit. The x-axis, labeled 'f', represents frequency in hertz (Hz), while the y-axis, labeled '|A_v|', represents the magnitude of voltage gain in decibels (dB). The plot uses a logarithmic scale for frequency, common in Bode plots to cover a wide frequency range effectively.\n\nThe graph shows high gain at low frequencies, remaining relatively constant until a certain frequency, labeled 'f₁', marked by a vertical dashed line, indicating the cutoff frequency or -3 dB point, defining the useful bandwidth. Beyond this point, the graph declines, indicating a roll-off in gain with increasing frequency, typically due to reactive components like capacitors and inductors.\n\nThe key feature is the roll-off region, where gain decreases, highlighting the circuit's limited ability to amplify high-frequency signals. This is crucial for understanding bandwidth limitations in filters and amplifiers. The roll-off slope provides insights into the filter order or dominant reactive elements.\n\nAnnotations include the 'Roll-Off' label, emphasizing the frequency-dependent nature of the circuit's gain, and the cutoff frequency 'f₁', critical for designing circuits to operate effectively within a specific frequency range.\n\nFigure 11.1 (a) Conceptual test of frequency response, (b) gain roll-off with frequency.\nwe must ask: why is frequency response important? The following examples illustrate this.\n\nExample Explain why people's voices sound different over the phone compared to face-to-face conversations.\n\nSolution The human voice spans frequency components from 20 Hz to 20 kHz [Fig. 11.2(a)]. Thus, voice-processing circuits must accommodate this range. However, phone systems have limited bandwidth, as shown in Fig. 11.2(b), suppressing frequencies above 3.5 kHz, altering each person's voice. In high-quality audio systems, circuits cover the entire frequency range.\n\nimage_name:(a)\ndescription:The graph labeled (a) is a frequency response graph showing the human voice's frequency range. It is a filled area plot from 20 Hz to 20 kHz on the horizontal axis (frequency, f, in Hz). The vertical axis, unlabeled, typically represents amplitude or power.\n\n1. **Graph Type and Function**:\n- A frequency response plot, used to depict a system's or signal's frequency range.\n\n2. **Axes Labels and Units**:\n- **Horizontal Axis (Frequency)**: 20 Hz to 20 kHz.\n- **Vertical Axis**: Unlabeled, but generally amplitude or power.\n\n3. **Overall Behavior and Trends**:\n- The plot shows a relatively flat response across 20 Hz to 20 kHz, indicating the human voice contains components across this spectrum.\n- The flatness suggests an even energy distribution.\n\n4. **Key Features and Technical Details**:\n- Illustrates the full frequency range of human voice components.\n- No significant peaks or valleys, indicating a broad, consistent frequency range.\n\n5. **Annotations and Specific Data Points**:\n- Shaded to emphasize the entire frequency range covered by the human voice.\n\nThis graph contrasts with the limited bandwidth in phone systems, as shown in graph (b).\n\nimage_name:(b)\ndescription:**Graph Type and Function**:\nThe graph in Figure 11.2(b) is a frequency response graph, likely a Bode plot, illustrating a phone system's bandwidth.\n\n**Axes Labels and Units**:\n- Horizontal axis ('f') represents frequency in Hz.\n- Range: 400 Hz to 3.5 kHz.\n- Vertical axis (unlabeled) typically represents amplitude or gain in dB.\n\n**Overall Behavior and Trends**:\n- Shows a bandpass characteristic, allowing frequencies between 400 Hz and 3.5 kHz.\n- Response rises sharply from 400 Hz (lower cutoff frequency), levels off, then declines beyond 3.5 kHz (upper cutoff frequency).\n\n**Key Features and Technical Details**:\n- Peak within the passband indicates a resonant frequency with maximum gain.\n- Bandwidth: approximately 3.1 kHz (400 Hz to 3.5 kHz).\n- Steep roll-off beyond 3.5 kHz, indicating significant attenuation of higher frequencies.\n\n**Annotations and Specific Data Points**:\n- Lower cutoff frequency at 400 Hz, upper cutoff frequency at 3.5 kHz.\n- Peak within the passband, though specific gain values are not provided.\n\nFigure 11.2\n\nExercise Does the phone system alter men's or women's voices more?\n\nExample\n11.2\n\nSolution During recording, your voice travels through the air to the audio recorder. When speaking and listening to your own voice simultaneously, it travels through both air and your skull to your ear. Since the skull's frequency response differs from air (i.e., it passes some frequencies more easily), you hear your own voice differently than others do.\n\nExercise Explain the effect of a cold on your voice.\n\nExample Video signals typically require a bandwidth of about 5 MHz. For instance, a graphics card delivering a video signal to a computer display must provide at least 5 MHz of bandwidth. Explain the impact of insufficient bandwidth in a video system.\n\nSolution Insufficient bandwidth results in \"soft\" edges on a display, creating a fuzzy picture. This occurs because the display driver cannot rapidly change contrast, e.g., from white to black between pixels. Figures 11.3(a) and (b) illustrate this for high- and low-bandwidth drivers, respectively. (The display is scanned left to right.)\n\nimage_name:(a)\ndescription:The image labeled (a) shows a clear, sharp letter 'E', indicating the effect of a high-bandwidth driver on a display. The well-defined edges and distinct contrast between the black letter and white background demonstrate precise transitions, contrasting with a low-bandwidth scenario where edges would be blurred.\n\nimage_name:(b)\ndescription:The image labeled (b) shows the letter 'E' with blurred edges, representing the effect of insufficient bandwidth in a video system. The lack of sharpness indicates a fuzzy appearance due to the display driver's slower response time, contrasting with the crisp edges of a high-bandwidth driver.\n\n(a)\nimage_name:(a)\ndescription:The image labeled \"(a)\" displays a large black letter 'E' with blurred edges, illustrating the effect of insufficient bandwidth in a video system. The blurred transitions from black to white around the edges demonstrate the slower response time of a low-bandwidth display driver, resulting in less distinct image rendering. This contrasts with the crisp edges expected from a high-bandwidth driver. The image focuses solely on illustrating bandwidth limitations, with no additional components or annotations.\n\n(b)\n\nFigure 11.3\n\nExercise What if the display is scanned top to bottom?\n\nWhat causes the gain roll-off in Fig. 11.1? Consider the simple low-pass filter in Fig. 11.4(a). At low frequencies, $C_{1}$ is nearly open, and $R_{1}$ has minimal current, so $V_{\\text {out }}=V_{\\text {in }}$. As frequency increases, $C_{1}$'s impedance falls, and the $R_{1}$-$C_{1}$ voltage divider attenuates $V_{\\text {in }}$ more. Thus, the circuit exhibits the behavior shown in Fig. 11.4(b).\n\nimage_name:Figure 11.4 (a)\ndescription:[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: R1, type: Resistor, value: R1, ports: {N1: Vin, N2: Vout}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:This is a simple low-pass filter circuit. The frequency response shows output voltage decreases with increasing frequency, indicating high-frequency signal attenuation.\n\nimage_name:Figure 11.4 (b)\ndescription:The graph in Figure 11.4(b) is a Bode plot for a simple low-pass filter circuit. The x-axis represents frequency (f) on a logarithmic scale, and the y-axis represents the magnitude of voltage gain (|V_out/V_in|).\n\n**Overall Behavior and Trends**:\n- The graph shows a flat response at low frequencies, with a gain of 1.0, indicating no attenuation.\n- As frequency increases, the gain decreases, demonstrating low-pass filter behavior.\n- The transition region marks the cutoff frequency where attenuation begins.\n\n**Key Features and Technical Details**:\n- The cutoff frequency (where gain drops to 0.707 or -3 dB) is not explicitly marked but is a critical point.\n- The slope beyond the cutoff frequency is typically -20 dB/decade for a first-order low-pass filter.\n\n**Annotations and Specific Data Points**:\n- No specific numerical values or annotations for the cutoff frequency or gain levels beyond the flat region.\n\nFigure 11.4 (a) Simple low-pass filter, (b) its frequency response.\nimage_name:Figure 11.5 (a)\ndescription:[\nname: RD, type: Resistor, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: CL, type: Capacitor, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:This circuit is a common-source (CS) amplifier stage with a load capacitance (CL). The NMOS transistor M1 amplifies the input signal Vin. The resistor RD sets the DC bias point and provides load resistance. The capacitor CL filters high-frequency noise and stabilizes the output signal.\n\n(a)\nimage_name:Figure 11.5 (b)\ndescription:[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: gmVin, type: VoltageControlledCurrentSource, ports: {Np: Vout, Nn: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: Vout, N2: GND}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:This is a small-signal model of a common-source amplifier stage with load capacitance. The voltage source Vin provides the input signal. The voltage-controlled current source gmVin represents the transconductance of the NMOS transistor. The resistor RD and capacitor CL are connected in parallel at the output node Vout, filtering high-frequency noise and stabilizing the output signal.\n\n(b)\n\nFigure 11.5 (a) CS stage with load capacitance, (b) small-signal model of the circuit.\n$C_{L}, 1 /\\left(C_{L} s\\right)$, remains high. At high frequencies, $C_{L}$ \"steals\" some signal current, shunting it to ground, resulting in a lower voltage swing at the output. From the small-signal equivalent circuit of Fig. 11.5(b), ${ }^{1}$ we note that $R_{D}$ and $C_{L}$ are in parallel, hence:\n\n$$\n\\begin{equation*}\nV_{\\text {out }}=-g_{m} V_{\\text {in }}\\left(R_{D} \\| \\frac{1}{C_{L} S}\\right) \\tag{11.1}\n\\end{equation*}\n$$\n\nAs frequency increases, the parallel impedance falls, and so does the amplitude of $V_{\\text {out }} .{ }^{2}$ Thus, the voltage gain drops at high frequencies.\n\nWhy do we use sinusoidal inputs in studying frequency response? An amplifier may sense voice or video signals that don't resemble sinusoids. Fortunately, such signals can be viewed as a sum of many sinusoids with different frequencies (and phases). Therefore, responses like Fig. 11.5(b) are useful as long as the circuit remains linear, allowing superposition to apply."
},
{
    "text": "We understand from fundamental circuit theory that the transfer function of a circuit can be expressed as\n\n$$\n\\begin{equation*}\nH(s)=A_{0} \\frac{\\left(1+\\frac{s}{\\omega_{z 1}}\\right)\\left(1+\\frac{s}{\\omega_{z 2}}\\right) \\ldots}{\\left(1+\\frac{s}{\\omega_{p 1}}\\right)\\left(1+\\frac{s}{\\omega_{p 2}}\\right) \\ldots} \\tag{11.2}\n\\end{equation*}\n$$\n\nwhere $A_{0}$ signifies the low-frequency gain because $H(s) \\rightarrow A_{0}$ as $s \\rightarrow 0$. The frequencies $\\omega_{z j}$ and $\\omega_{p j}$ correspond to the zeros and poles of the transfer function, respectively. If the circuit's input is a sinusoidal signal of the form $x(t)=A \\cos (2 \\pi f t)=A \\cos \\omega t$, then the output can be written as\n\n$$\n\\begin{equation*}\ny(t)=A|H(j \\omega)| \\cos [\\omega t+\\angle H(j \\omega)] \\tag{11.3}\n\\end{equation*}\n$$\n\n[^5]where $H(j \\omega)$ is derived by substituting $s=j \\omega$. Known as the \"magnitude\" and \"phase,\" $|H(j \\omega)|$ and $\\angle H(j \\omega)$ respectively indicate the circuit's frequency response. In this chapter, we focus primarily on the former. Note that $f$ (in Hz) and $\\omega$ (in radians per second) are related by $2 \\pi$. For instance, $\\omega=5 \\times 10^{10} \\mathrm{rad} / \\mathrm{s}=2 \\pi(7.96 \\mathrm{GHz})$.\n\nExample Determine the transfer function and frequency response for the CS stage depicted in Fig. 11.4 11.5(a).\n\nSolution From Eq. (11.1), we obtain\n\n$$\n\\begin{align*}\nH(s)=\\frac{V_{\\text {out }}}{V_{\\text {in }}}(s) & =-g_{m}\\left(R_{D} \\| \\frac{1}{C_{L} s}\\right)  \\tag{11.4}\\\\\n& =\\frac{-g_{m} R_{D}}{R_{D} C_{L} s+1} . \\tag{11.5}\n\\end{align*}\n$$\n\nFor a sinusoidal input, we substitute $s=j \\omega$ and calculate the transfer function's magnitude: ${ }^{3}$\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text {out }}}{V_{\\text {in }}}\\right|=\\frac{g_{m} R_{D}}{\\sqrt{R_{D}^{2} C_{L}^{2} \\omega^{2}+1}} \\tag{11.6}\n\\end{equation*}\n$$\n\nAs anticipated, the gain starts at $g_{m} R_{D}$ at low frequencies, decreasing as $R_{D}^{2} C_{L}^{2} \\omega^{2}$ becomes comparable to unity. At $\\omega=1 /\\left(R_{D} C_{L}\\right)$,\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text {out }}}{V_{\\text {in }}}\\right|=\\frac{g_{m} R_{D}}{\\sqrt{2}} . \\tag{11.7}\n\\end{equation*}\n$$\n\nSince $20 \\log \\sqrt{2} \\approx 3 \\mathrm{~dB}$, we conclude that the -3 dB bandwidth of the circuit is $1 /\\left(R_{D} C_{L}\\right)$ (Fig. 11.6).\nimage_name:Figure 11.6\ndescription:The graph in Figure 11.6 is a Bode plot showing the frequency response of a circuit. The horizontal axis is the angular frequency (ω) in radians per second, and the vertical axis is the magnitude of the voltage gain, \\(|V_{out}/V_{in}|\\), in decibels (dB).\n\nAxes Labels and Units:\n- **Horizontal Axis (ω):** Angular frequency in radians per second (rad/s).\n- **Vertical Axis (|V_out/V_in|):** Voltage gain magnitude, typically in decibels (dB).\n\nBehavior and Trends:\n- At low frequencies, the gain is constant at \\(g_m R_D\\).\n- As frequency increases, the gain remains steady until reaching the cutoff frequency.\n- Beyond this point, the gain decreases.\n\nKey Features:\n- **-3 dB Point:** The gain drops to \\(\\frac{g_m R_D}{\\sqrt{2}}\\) at \\(\\omega = \\frac{1}{R_D C_L}\\), corresponding to a -3 dB reduction.\n- **Bandwidth:** The bandwidth is the frequency range where the gain is within 3 dB of its maximum, marked by the \"-3 dB Bandwidth\" arrow.\n- **Rolloff:** After the -3 dB point, the gain decreases at a rate determined by the circuit's characteristics, indicated by the \"-3 dB Rolloff\" curve.\n\nAnnotations:\n- The graph includes annotations like \"-3 dB Bandwidth\" and \"-3 dB Rolloff,\" highlighting critical points.\n- A vertical dashed line marks the cutoff frequency \\(\\omega = \\frac{1}{R_D C_L}\\).\n\nThis Bode plot effectively illustrates the circuit's frequency response, showing how the gain varies with frequency and highlighting the -3 dB bandwidth and rolloff regions.\n\nFigure 11.6\nExercise Derive the above results if $\\lambda \\neq 0$.\n${ }^{3}$ The magnitude of the complex number $a+j b$ is $\\sqrt{a^{2}+b^{2}}$.\n\nExample Consider the common-emitter stage shown in Fig.11.7. Derive a relationship among the 11.5 gain, the -3 dB bandwidth, and the power consumption of the circuit. Assume $V_{A}=\\infty$.\nimage_name:Figure 11.7\ndescription:\n[\nname: Q1, type: NPN, ports: {C: Vout, B: Vin, E: GND}\nname: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a common-emitter amplifier stage with an NPN transistor (Q1). The input is connected to the base of Q1, and the output is taken from the collector. The resistor RC is connected between the collector and VCC, and the capacitor CL is connected from the output to ground. The emitter is grounded. The circuit is designed to amplify the input signal Vin.\n\nFigure 11.7\nSolution Similar to the CS topology in Fig. 11.5(a), the bandwidth is $1 /\\left(R_{C} C_{L}\\right)$, the low-frequency gain is $g_{m} R_{C}=\\left(I_{C} / V_{T}\\right) R_{C}$, and the power consumption is $I_{C} \\cdot V_{C C}$. For optimal performance, we aim to maximize both the gain and the bandwidth (and thus their product) while minimizing power dissipation. We define a \"figure of merit\" as\n\n$$\n\\begin{align*}\n\\frac{\\text { Gain } \\times \\text { Bandwidth }}{\\text { Power Consumption }} & =\\frac{\\frac{I_{C}}{V_{T}} R_{C} \\times \\frac{1}{R_{C} C_{L}}}{I_{C} \\cdot V_{C C}}  \\tag{11.8}\\\\\n& =\\frac{1}{V_{T} \\cdot V_{C C}} \\frac{1}{C_{L}} . \\tag{11.9}\n\\end{align*}\n$$\n\nThus, performance can be enhanced by reducing (a) the temperature; ${ }^{4}$ (b) $V_{C C}$, but this limits voltage swings; or (c) the load capacitance. In practice, load capacitance receives the most attention. Eq. (11.9) becomes more complex for CS stages (Problem 11.15).\n\nExercise Derive the above results if $V_{A}<\\infty$.\n\nExample Explain the relationship between the frequency response and step response of the simple 11.6 low-pass filter shown in Fig. 11.4(a).\n\nSolution To find the transfer function, we view the circuit as a voltage divider and write\n\n$$\n\\begin{align*}\nH(s)=\\frac{V_{\\text {out }}}{V_{\\text {in }}}(s) & =\\frac{\\frac{1}{C_{1} s}}{\\frac{1}{C_{1} s}+R_{1}}  \\tag{11.10}\\\\\n& =\\frac{1}{R_{1} C_{1} s+1} . \\tag{11.11}\n\\end{align*}\n$$\n\n[^6]The frequency response is obtained by replacing $s$ with $j \\omega$ and calculating the magnitude:\n\n$$\n\\begin{equation*}\n|H(s=j \\omega)|=\\frac{1}{\\sqrt{R_{1}^{2} C_{1}^{2} \\omega^{2}+1}} \\tag{11.12}\n\\end{equation*}\n$$\n\nThe -3 dB bandwidth is $1 /\\left(R_{1} C_{1}\\right)$. The circuit's response to a step input of the form $V_{0} u(t)$ is\n\n$$\n\\begin{equation*}\nV_{\\text {out }}(t)=V_{0}\\left(1-\\exp \\frac{-t}{R_{1} C_{1}}\\right) u(t) \\tag{11.13}\n\\end{equation*}\n$$\n\nThe relationship between Eqs. (11.12) and (11.13) is that as $R_{1} C_{1}$ increases, the bandwidth decreases and the step response becomes slower. Figure 11.8 illustrates this behavior, showing that a narrower bandwidth results in a slower time response. This explains the effect seen in Fig. 11.3(b): since the signal cannot quickly transition from low (white) to high (black), it lingers at intermediate levels (shades of gray), creating \"fuzzy\" edges.\nimage_name:Figure 11.8\ndescription:The graph in Figure 11.8 is a Bode plot showing the magnitude response \\(|H|\\) of a system versus frequency \\(f\\). The vertical axis is the magnitude \\(|H|\\), dimensionless, and the horizontal axis is the frequency \\(f\\), typically in hertz (Hz), using a logarithmic scale.\n\nThe plot shows how the system's frequency response changes as \\(R_1 C_1\\) increases. Initially, \\(|H|\\) is constant at 1.0, indicating no attenuation at low frequencies. As frequency increases, \\(|H|\\) decreases, exhibiting the roll-off characteristic of a low-pass filter.\n\nThree lines represent different \\(R_1 C_1\\) values. Higher \\(R_1 C_1\\) values result in a lower cutoff frequency and narrower bandwidth. The solid black line shows the steepest decline and narrowest bandwidth for the highest \\(R_1 C_1\\). The dashed black line and gray line represent lower \\(R_1 C_1\\) values, with the gray line having the widest bandwidth and least steep decline.\n\nKey features include the initial flat response at low frequencies and the subsequent decline at higher frequencies, illustrating the trade-off between bandwidth and time response. The graph highlights how increasing \\(R_1 C_1\\) affects the system's ability to respond quickly to input changes, as seen by the slower roll-off and reduced bandwidth.\n\n(a)\nimage_name:(a)\ndescription:The graph depicts a time-domain waveform of the output voltage \\( V_{out} \\) over time \\( t \\). It shows the effect of different \\( R_1 C_1 \\) values on the system's response. The horizontal axis is time \\( t \\), and the vertical axis is the output voltage \\( V_{out} \\).\n\nThree curves are shown:\n\n1. **Solid Black Line**: Represents a higher \\( R_1 C_1 \\) value, showing a slower response with a gradual rise to the final value, indicating a longer time constant.\n2. **Dashed Black Line**: Represents a moderate \\( R_1 C_1 \\) value, with a quicker response than the solid black line but slower than the gray line.\n3. **Gray Line**: Represents a lower \\( R_1 C_1 \\) value, showing the fastest rise time and quickest stabilization, indicating the widest bandwidth and least steep decline.\n\nThe graph demonstrates the trade-off between bandwidth and time response. As \\( R_1 C_1 \\) increases, the system's ability to respond quickly to input changes decreases, resulting in a slower roll-off and reduced bandwidth. The initial flat response at low frequencies transitions to a steeper decline at higher frequencies, highlighting this trade-off.\n\n(b)\n\nFigure 11.8\nExercise At what frequency does $|H|$ fall by a factor of two?\n```"
},
{
    "text": "We understand from fundamental circuit theory that a circuit's transfer function can be expressed as\n\n$$\n\\begin{equation*}\nH(s)=A_{0} \\frac{\\left(1+\\frac{s}{\\omega_{z 1}}\\right)\\left(1+\\frac{s}{\\omega_{z 2}}\\right) \\ldots}{\\left(1+\\frac{s}{\\omega_{p 1}}\\right)\\left(1+\\frac{s}{\\omega_{p 2}}\\right) \\ldots} \\tag{11.2}\n\\end{equation*}\n$$\n\nwhere $A_{0}$ signifies the low-frequency gain because $H(s) \\rightarrow A_{0}$ as $s \\rightarrow 0$. The frequencies $\\omega_{z j}$ and $\\omega_{p j}$ correspond to the zeros and poles of the transfer function, respectively. If the circuit's input is a sinusoid given by $x(t)=A \\cos (2 \\pi f t)=A \\cos \\omega t$, the output can be written as\n\n$$\n\\begin{equation*}\ny(t)=A|H(j \\omega)| \\cos [\\omega t+\\angle H(j \\omega)] \\tag{11.3}\n\\end{equation*}\n$$\n\n[^5]Here, $H(j \\omega)$ is derived by substituting $s=j \\omega$. Known as the \"magnitude\" and \"phase,\" $|H(j \\omega)|$ and $\\angle H(j \\omega)$ respectively indicate the circuit's frequency response. This chapter primarily focuses on the former. Note that $f$ (in Hz) and $\\omega$ (in radians per second) are related by $2 \\pi$. For instance, $\\omega=5 \\times 10^{10} \\mathrm{rad} / \\mathrm{s}=2 \\pi(7.96 \\mathrm{GHz})$.\n\nExample Determine the transfer function and frequency response for the CS stage depicted in Fig. 11.4 11.5(a).\n\nSolution From Eq. (11.1), we obtain\n\n$$\n\\begin{align*}\nH(s)=\\frac{V_{\\text {out }}}{V_{\\text {in }}}(s) & =-g_{m}\\left(R_{D} \\| \\frac{1}{C_{L} s}\\right)  \\tag{11.4}\\\\\n& =\\frac{-g_{m} R_{D}}{R_{D} C_{L} s+1} . \\tag{11.5}\n\\end{align*}\n$$\n\nFor a sinusoidal input, substituting $s=j \\omega$ and calculating the transfer function's magnitude yields:\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text {out }}}{V_{\\text {in }}}\\right|=\\frac{g_{m} R_{D}}{\\sqrt{R_{D}^{2} C_{L}^{2} \\omega^{2}+1}} \\tag{11.6}\n\\end{equation*}\n$$\n\nAs anticipated, the gain starts at $g_{m} R_{D}$ at low frequencies, decreasing as $R_{D}^{2} C_{L}^{2} \\omega^{2}$ becomes comparable to unity. At $\\omega=1 /\\left(R_{D} C_{L}\\right)$,\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text {out }}}{V_{\\text {in }}}\\right|=\\frac{g_{m} R_{D}}{\\sqrt{2}} . \\tag{11.7}\n\\end{equation*}\n$$\n\nSince $20 \\log \\sqrt{2} \\approx 3 \\mathrm{~dB}$, the circuit's -3 dB bandwidth equals $1 /\\left(R_{D} C_{L}\\right)$ (Fig. 11.6).\nimage_name:Figure 11.6\ndescription:Figure 11.6 presents a Bode plot illustrating a circuit's frequency response. The horizontal axis, representing angular frequency (ω), is in radians per second, while the vertical axis shows the voltage gain magnitude, \\(|V_{out}/V_{in}|\\), in decibels (dB).\n\nAxes Labels and Units:\n- **Horizontal Axis (ω):** Angular frequency in radians per second (rad/s).\n- **Vertical Axis (|V_out/V_in|):** Voltage gain magnitude, typically in decibels (dB).\n\nOverall Behavior and Trends:\n- The gain starts at a constant level, \\(g_m R_D\\), at low frequencies.\n- The gain remains constant until reaching the cutoff frequency.\n- Beyond this point, the gain decreases.\n\nKey Features and Technical Details:\n- **-3 dB Point:** The gain drops to \\(\\frac{g_m R_D}{\\sqrt{2}}\\) at \\(\\omega = \\frac{1}{R_D C_L}\\), corresponding to a -3 dB reduction.\n- **Bandwidth:** The bandwidth is the frequency range where the gain is within 3 dB of its maximum, marked by the \"-3 dB Bandwidth\" arrow.\n- **Rolloff:** After the -3 dB point, the gain decreases at a rate determined by the circuit's characteristics, indicated by the \"-3 dB Rolloff\" curve.\n\nAnnotations and Specific Data Points:\n- Annotations like \"-3 dB Bandwidth\" and \"-3 dB Rolloff\" highlight critical points.\n- A vertical dashed line marks the cutoff frequency \\(\\omega = \\frac{1}{R_D C_L}\\).\n\nThis Bode plot effectively shows the circuit's frequency response, illustrating gain behavior across different frequencies and highlighting the critical -3 dB bandwidth and rolloff regions.\n\nFigure 11.6\nExercise Derive the above results if $\\lambda \\neq 0$.\n${ }^{3}$ The magnitude of the complex number $a+j b$ is $\\sqrt{a^{2}+b^{2}}$.\n\nExample Consider the common-emitter stage in Fig.11.7. Derive a relationship among the 11.5 gain, -3 dB bandwidth, and power consumption. Assume $V_{A}=\\infty$.\nimage_name:Figure 11.7\ndescription:\n[\nname: Q1, type: NPN, ports: {C: Vout, B: Vin, E: GND}\nname: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a common-emitter amplifier with an NPN transistor (Q1). The input connects to the base, and the output is from the collector. Resistor RC connects the collector to VCC, and capacitor CL connects the output to ground. The emitter is grounded, designed to amplify the input signal Vin.\n\nFigure 11.7\nSolution Similarly to the CS topology in Fig. 11.5(a), the bandwidth is $1 /\\left(R_{C} C_{L}\\right)$, the low-frequency gain is $g_{m} R_{C}=\\left(I_{C} / V_{T}\\right) R_{C}$, and the power consumption is $I_{C} \\cdot V_{C C}$. For optimal performance, we aim to maximize both gain and bandwidth (and their product) while minimizing power dissipation. We define a \"figure of merit\" as\n\n$$\n\\begin{align*}\n\\frac{\\text { Gain } \\times \\text { Bandwidth }}{\\text { Power Consumption }} & =\\frac{\\frac{I_{C}}{V_{T}} R_{C} \\times \\frac{1}{R_{C} C_{L}}}{I_{C} \\cdot V_{C C}}  \\tag{11.8}\\\\\n& =\\frac{1}{V_{T} \\cdot V_{C C}} \\frac{1}{C_{L}} . \\tag{11.9}\n\\end{align*}\n$$\n\nThus, performance can be enhanced by reducing (a) temperature; ${ }^{4}$ (b) $V_{C C}$, but at the cost of limiting voltage swings; or (c) load capacitance. Practically, load capacitance receives the most attention. Eq. (11.9) becomes more complex for CS stages (Problem 11.15).\n\nExercise Derive the above results if $V_{A}<\\infty$.\n\nExample Explain the relationship between the frequency response and step response of the simple 11.6 low-pass filter in Fig. 11.4(a).\n\nSolution To find the transfer function, view the circuit as a voltage divider:\n\n$$\n\\begin{align*}\nH(s)=\\frac{V_{\\text {out }}}{V_{\\text {in }}}(s) & =\\frac{\\frac{1}{C_{1} s}}{\\frac{1}{C_{1} s}+R_{1}}  \\tag{11.10}\\\\\n& =\\frac{1}{R_{1} C_{1} s+1} . \\tag{11.11}\n\\end{align*}\n$$\n\n[^6]The frequency response is found by replacing $s$ with $j \\omega$ and calculating the magnitude:\n\n$$\n\\begin{equation*}\n|H(s=j \\omega)|=\\frac{1}{\\sqrt{R_{1}^{2} C_{1}^{2} \\omega^{2}+1}} \\tag{11.12}\n\\end{equation*}\n$$\n\nThe -3 dB bandwidth is $1 /\\left(R_{1} C_{1}\\right)$. The circuit's response to a step input $V_{0} u(t)$ is\n\n$$\n\\begin{equation*}\nV_{\\text {out }}(t)=V_{0}\\left(1-\\exp \\frac{-t}{R_{1} C_{1}}\\right) u(t) \\tag{11.13}\n\\end{equation*}\n$$\n\nThe relationship between Eqs. (11.12) and (11.13) is that increasing $R_{1} C_{1}$ decreases the bandwidth and slows the step response. Figure 11.8 plots this behavior, showing that a narrow bandwidth results in a slower time response. This explains the effect in Fig. 11.3(b): the signal's inability to rapidly transition from low (white) to high (black) causes intermediate levels (shades of gray), creating \"fuzzy\" edges.\nimage_name:Figure 11.8\ndescription:Figure 11.8 is a Bode plot showing the magnitude response \\(|H|\\) of a system versus frequency \\(f\\). The vertical axis is the magnitude \\(|H|\\), dimensionless, and the horizontal axis is frequency \\(f\\), typically in hertz (Hz), using a logarithmic scale.\n\nThe plot shows how the system's frequency response changes with increasing \\(R_1 C_1\\). Initially, \\(|H|\\) is constant at 1.0, indicating no attenuation at low frequencies. As frequency increases, \\(|H|\\) decreases, showing the low-pass filter's roll-off characteristic.\n\nThree lines represent different \\(R_1 C_1\\) values. Higher \\(R_1 C_1\\) results in a lower cutoff frequency and narrower bandwidth. The solid black line (highest \\(R_1 C_1\\)) shows the steepest decline and narrowest bandwidth. The dashed black and gray lines represent lower \\(R_1 C_1\\) values, with the gray line having the widest bandwidth and least steep decline.\n\nKey features include the initial flat response at low frequencies and the subsequent decline at higher frequencies, illustrating the trade-off between bandwidth and time response. The graph highlights how increasing \\(R_1 C_1\\) affects the system's ability to respond quickly to input changes, as seen by the slower roll-off and reduced bandwidth.\n\n(a)\nimage_name:(a)\ndescription:This graph depicts the time-domain waveform of the output voltage \\( V_{out} \\) over time \\( t \\), showing the effect of different \\( R_1 C_1 \\) values on the system's response. The horizontal axis is time \\( t \\), and the vertical axis is output voltage \\( V_{out} \\).\n\nThree curves are shown:\n\n1. **Solid Black Line**: Higher \\( R_1 C_1 \\) value, showing a slower response with a gradual rise to the final value, indicating a longer time constant.\n2. **Dashed Black Line**: Moderate \\( R_1 C_1 \\) value, with a quicker response than the solid black line but slower than the gray line.\n3. **Gray Line**: Lower \\( R_1 C_1 \\) value, with the fastest rise time and quickest stabilization, indicating the widest bandwidth and least steep decline.\n\nThe graph demonstrates the trade-off between bandwidth and time response. Increasing \\( R_1 C_1 \\) slows the system's response to input changes, resulting in a slower roll-off and reduced bandwidth. The initial flat response at low frequencies transitions to a steeper decline at higher frequencies, highlighting this trade-off.\n\n(b)\n\nFigure 11.8\nExercise At what frequency does $|H|$ fall by a factor of two?"
},
{
    "text": "We understand from fundamental circuit theory that the transfer function of a circuit can be expressed as\n\n$$\n\\begin{equation*}\nH(s)=A_{0} \\frac{\\left(1+\\frac{s}{\\omega_{z 1}}\\right)\\left(1+\\frac{s}{\\omega_{z 2}}\\right) \\ldots}{\\left(1+\\frac{s}{\\omega_{p 1}}\\right)\\left(1+\\frac{s}{\\omega_{p 2}}\\right) \\ldots} \\tag{11.2}\n\\end{equation*}\n$$\n\nwhere $A_{0}$ signifies the low-frequency gain because $H(s) \\rightarrow A_{0}$ as $s \\rightarrow 0$. The frequencies $\\omega_{z j}$ and $\\omega_{p j}$ correspond to the zeros and poles of the transfer function, respectively. If the circuit's input is a sinusoid of the form $x(t)=A \\cos (2 \\pi f t)=A \\cos \\omega t$, then the output can be formulated as\n\n$$\n\\begin{equation*}\ny(t)=A|H(j \\omega)| \\cos [\\omega t+\\angle H(j \\omega)] \\tag{11.3}\n\\end{equation*}\n$$\n\n[^5]where $H(j \\omega)$ is derived by substituting $s=j \\omega$. Referred to as the \"magnitude\" and the \"phase,\" $|H(j \\omega)|$ and $\\angle H(j \\omega)$ respectively indicate the circuit's frequency response. In this chapter, our primary focus is on the former. Note that $f$ (in Hz) and $\\omega$ (in radians per second) are related by a factor of $2 \\pi$. For instance, we can express $\\omega=5 \\times 10^{10} \\mathrm{rad} / \\mathrm{s}=2 \\pi(7.96 \\mathrm{GHz})$.\n\nExample Determine the transfer function and frequency response of the CS stage depicted in Fig. 11.4 11.5(a).\n\nSolution From Eq. (11.1), we obtain\n\n$$\n\\begin{align*}\nH(s)=\\frac{V_{\\text {out }}}{V_{\\text {in }}}(s) & =-g_{m}\\left(R_{D} \\| \\frac{1}{C_{L} s}\\right)  \\tag{11.4}\\\\\n& =\\frac{-g_{m} R_{D}}{R_{D} C_{L} s+1} . \\tag{11.5}\n\\end{align*}\n$$\n\nFor a sinusoidal input, we substitute $s=j \\omega$ and calculate the transfer function's magnitude: ${ }^{3}$\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text {out }}}{V_{\\text {in }}}\\right|=\\frac{g_{m} R_{D}}{\\sqrt{R_{D}^{2} C_{L}^{2} \\omega^{2}+1}} \\tag{11.6}\n\\end{equation*}\n$$\n\nAs anticipated, the gain starts at $g_{m} R_{D}$ at low frequencies, decreasing as $R_{D}^{2} C_{L}^{2} \\omega^{2}$ becomes comparable to unity. At $\\omega=1 /\\left(R_{D} C_{L}\\right)$,\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text {out }}}{V_{\\text {in }}}\\right|=\\frac{g_{m} R_{D}}{\\sqrt{2}} . \\tag{11.7}\n\\end{equation*}\n$$\n\nSince $20 \\log \\sqrt{2} \\approx 3 \\mathrm{~dB}$, we conclude that the -3 dB bandwidth of the circuit is $1 /\\left(R_{D} C_{L}\\right)$ (Fig. 11.6).\nimage_name:Figure 11.6\ndescription:The graph in Figure 11.6 is a Bode plot, depicting the frequency response of a circuit. The horizontal axis represents angular frequency (ω) in radians per second, while the vertical axis shows the magnitude of the voltage gain, \\(|V_{out}/V_{in}|\\), in decibels (dB).\n\nAxes Labels and Units:\n- **Horizontal Axis (ω):** Angular frequency in radians per second (rad/s).\n- **Vertical Axis (|V_out/V_in|):** Voltage gain magnitude, typically in decibels (dB).\n\nOverall Behavior and Trends:\n- At low frequencies, the gain is constant at \\(g_m R_D\\).\n- As frequency increases, the gain remains steady until reaching the cutoff frequency.\n- Beyond this point, the gain decreases.\n\nKey Features and Technical Details:\n- **-3 dB Point:** The gain drops to \\(\\frac{g_m R_D}{\\sqrt{2}}\\) at this point, corresponding to a -3 dB reduction. This occurs at \\(\\omega = \\frac{1}{R_D C_L}\\).\n- **Bandwidth:** Defined as the frequency range where the gain is within 3 dB of its maximum value, marked by the \"-3 dB Bandwidth\" arrow.\n- **Rolloff:** After the -3 dB point, the gain decreases at a rate determined by the circuit's characteristics, indicated by the \"-3 dB Rolloff\" curve.\n\nAnnotations and Specific Data Points:\n- The graph includes annotations like \"-3 dB Bandwidth\" and \"-3 dB Rolloff,\" highlighting critical points and regions.\n- A vertical dashed line marks the cutoff frequency \\(\\omega = \\frac{1}{R_D C_L}\\), a key value for determining the bandwidth.\n\nThis Bode plot effectively illustrates the circuit's frequency response, showing how the gain varies with frequency and highlighting the critical -3 dB bandwidth and rolloff regions.\n\nFigure 11.6\nExercise Derive the above results if $\\lambda \\neq 0$.\n${ }^{3}$ The magnitude of the complex number $a+j b$ is $\\sqrt{a^{2}+b^{2}}$.\n\nExample Consider the common-emitter stage shown in Fig.11.7. Derive a relationship among the 11.5 gain, the -3 dB bandwidth, and the power consumption of the circuit. Assume $V_{A}=\\infty$.\nimage_name:Figure 11.7\ndescription:\n[\nname: Q1, type: NPN, ports: {C: Vout, B: Vin, E: GND}\nname: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a common-emitter amplifier stage with an NPN transistor (Q1). The input is connected to the base of Q1, and the output is taken from the collector. The resistor RC is connected between the collector and VCC, and the capacitor CL is connected from the output to ground. The emitter is grounded. The circuit is designed to amplify the input signal Vin.\n\nFigure 11.7\nSolution In a manner similar to the CS topology of Fig. 11.5(a), the bandwidth is given by $1 /\\left(R_{C} C_{L}\\right)$, the low-frequency gain by $g_{m} R_{C}=\\left(I_{C} / V_{T}\\right) R_{C}$, and the power consumption by $I_{C} \\cdot V_{C C}$. For optimal performance, we aim to maximize both the gain and the bandwidth (and thus their product) while minimizing power dissipation. We define a \"figure of merit\" as\n\n$$\n\\begin{align*}\n\\frac{\\text { Gain } \\times \\text { Bandwidth }}{\\text { Power Consumption }} & =\\frac{\\frac{I_{C}}{V_{T}} R_{C} \\times \\frac{1}{R_{C} C_{L}}}{I_{C} \\cdot V_{C C}}  \\tag{11.8}\\\\\n& =\\frac{1}{V_{T} \\cdot V_{C C}} \\frac{1}{C_{L}} . \\tag{11.9}\n\\end{align*}\n$$\n\nThus, overall performance can be enhanced by reducing (a) the temperature; ${ }^{4}$ (b) $V_{C C}$, but this limits voltage swings; or (c) the load capacitance. In practice, the load capacitance receives the most attention. Equation (11.9) becomes more complex for CS stages (Problem 11.15).\n\nExercise Derive the above results if $V_{A}<\\infty$.\n\nExample Explain the relationship between the frequency response and step response of the simple 11.6 low-pass filter shown in Fig. 11.4(a).\n\nSolution To determine the transfer function, we view the circuit as a voltage divider and write\n\n$$\n\\begin{align*}\nH(s)=\\frac{V_{\\text {out }}}{V_{\\text {in }}}(s) & =\\frac{\\frac{1}{C_{1} s}}{\\frac{1}{C_{1} s}+R_{1}}  \\tag{11.10}\\\\\n& =\\frac{1}{R_{1} C_{1} s+1} . \\tag{11.11}\n\\end{align*}\n$$\n\n[^6]The frequency response is obtained by replacing $s$ with $j \\omega$ and calculating the magnitude:\n\n$$\n\\begin{equation*}\n|H(s=j \\omega)|=\\frac{1}{\\sqrt{R_{1}^{2} C_{1}^{2} \\omega^{2}+1}} \\tag{11.12}\n\\end{equation*}\n$$\n\nThe -3 dB bandwidth is $1 /\\left(R_{1} C_{1}\\right)$. The circuit's response to a step input of the form $V_{0} u(t)$ is given by\n\n$$\n\\begin{equation*}\nV_{\\text {out }}(t)=V_{0}\\left(1-\\exp \\frac{-t}{R_{1} C_{1}}\\right) u(t) \\tag{11.13}\n\\end{equation*}\n$$\n\nThe relationship between Eqs. (11.12) and (11.13) is that as $R_{1} C_{1}$ increases, the bandwidth decreases and the step response becomes slower. Figure 11.8 plots this behavior, showing that a narrow bandwidth results in a slower time response. This explains the effect seen in Fig. 11.3(b): since the signal cannot quickly transition from low (white) to high (black), it spends time at intermediate levels (shades of gray), creating \"fuzzy\" edges.\nimage_name:Figure 11.8\ndescription:The graph in Figure 11.8 is a Bode plot showing the magnitude response \\(|H|\\) of a system as a function of frequency \\(f\\). The vertical axis represents the magnitude \\(|H|\\), which is dimensionless, while the horizontal axis represents frequency \\(f\\), typically in hertz (Hz), using a logarithmic scale.\n\nThe plot illustrates the system's frequency response as the product \\(R_1 C_1\\) increases. Initially, the magnitude \\(|H|\\) is constant at 1.0, indicating no attenuation at low frequencies. As frequency increases, the magnitude decreases, showing the roll-off characteristic of a low-pass filter.\n\nThe graph includes three lines representing different \\(R_1 C_1\\) values. As \\(R_1 C_1\\) increases, the cutoff frequency decreases, resulting in a narrower bandwidth. The solid black line represents the highest \\(R_1 C_1\\) value, showing the steepest decline and narrowest bandwidth. The dashed black line and gray line represent lower \\(R_1 C_1\\) values, with the gray line having the widest bandwidth and least steep decline.\n\nKey features include the initial flat response at low frequencies and the subsequent decline at higher frequencies, illustrating the trade-off between bandwidth and time response. The graph highlights how increasing \\(R_1 C_1\\) affects the system's ability to respond quickly to input changes, as seen by the slower roll-off and reduced bandwidth.\n\n(a)\nimage_name:(a)\ndescription:The graph shows the time-domain waveform of the output voltage \\( V_{out} \\) over time \\( t \\), illustrating the effect of different \\( R_1 C_1 \\) values on the system's response. The horizontal axis is time \\( t \\), and the vertical axis is the output voltage \\( V_{out} \\).\n\nThree curves are displayed:\n\n1. **Solid Black Line**: Represents a higher \\( R_1 C_1 \\) value, showing a slower response and more gradual rise to the final value, indicating a longer time constant.\n2. **Dashed Black Line**: Represents a moderate \\( R_1 C_1 \\) value, with a quicker response than the solid black line but slower than the gray line.\n3. **Gray Line**: Represents a lower \\( R_1 C_1 \\) value, showing the fastest rise time and quickest attainment of the steady state, indicating the widest bandwidth and least steep decline.\n\nOverall, the graph demonstrates the trade-off between bandwidth and time response. As \\( R_1 C_1 \\) increases, the system's ability to respond quickly to input changes decreases, resulting in a slower roll-off and reduced bandwidth. The initial flat response at low frequencies transitions to a steeper decline at higher frequencies, highlighting this trade-off.\n\n(b)\n\nFigure 11.8\nExercise At what frequency does $|H|$ fall by a factor of two?"
},
{
    "text": "We understand from fundamental circuit theory that a circuit's transfer function can be expressed as\n\n$$\n\\begin{equation*}\nH(s)=A_{0} \\frac{\\left(1+\\frac{s}{\\omega_{z 1}}\\right)\\left(1+\\frac{s}{\\omega_{z 2}}\\right) \\ldots}{\\left(1+\\frac{s}{\\omega_{p 1}}\\right)\\left(1+\\frac{s}{\\omega_{p 2}}\\right) \\ldots} \\tag{11.2}\n\\end{equation*}\n$$\n\nwhere $A_{0}$ signifies the low-frequency gain because $H(s) \\rightarrow A_{0}$ as $s \\rightarrow 0$. The frequencies $\\omega_{z j}$ and $\\omega_{p j}$ correspond to the zeros and poles of the transfer function, respectively. If the circuit's input is a sinusoidal signal of the form $x(t)=A \\cos (2 \\pi f t)=A \\cos \\omega t$, then the output can be written as\n\n$$\n\\begin{equation*}\ny(t)=A|H(j \\omega)| \\cos [\\omega t+\\angle H(j \\omega)] \\tag{11.3}\n\\end{equation*}\n$$\n\n[^5]where $H(j \\omega)$ is derived by substituting $s=j \\omega$. Known as the \"magnitude\" and \"phase,\" $|H(j \\omega)|$ and $\\angle H(j \\omega)$ respectively indicate the circuit's frequency response. In this chapter, our primary focus is on the former. Note that $f$ (in Hz) and $\\omega$ (in radians per second) are related by $2 \\pi$. For instance, $\\omega=5 \\times 10^{10} \\mathrm{rad} / \\mathrm{s}$ can be expressed as $2 \\pi(7.96 \\mathrm{GHz})$.\n\nExample Determine the transfer function and frequency response for the CS stage depicted in Figs. 11.4 and 11.5(a).\n\nSolution From Eq. (11.1), we obtain\n\n$$\n\\begin{align*}\nH(s)=\\frac{V_{\\text {out }}}{V_{\\text {in }}}(s) & =-g_{m}\\left(R_{D} \\| \\frac{1}{C_{L} s}\\right)  \\tag{11.4}\\\\\n& =\\frac{-g_{m} R_{D}}{R_{D} C_{L} s+1} . \\tag{11.5}\n\\end{align*}\n$$\n\nFor a sinusoidal input, substituting $s=j \\omega$ allows us to compute the transfer function's magnitude: ${ }^{3}$\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text {out }}}{V_{\\text {in }}}\\right|=\\frac{g_{m} R_{D}}{\\sqrt{R_{D}^{2} C_{L}^{2} \\omega^{2}+1}} \\tag{11.6}\n\\end{equation*}\n$$\n\nAs anticipated, the gain starts at $g_{m} R_{D}$ at low frequencies, decreasing as $R_{D}^{2} C_{L}^{2} \\omega^{2}$ becomes comparable to unity. At $\\omega=1 /\\left(R_{D} C_{L}\\right)$,\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text {out }}}{V_{\\text {in }}}\\right|=\\frac{g_{m} R_{D}}{\\sqrt{2}} . \\tag{11.7}\n\\end{equation*}\n$$\n\nSince $20 \\log \\sqrt{2} \\approx 3 \\mathrm{~dB}$, the -3 dB bandwidth of the circuit is $1 /\\left(R_{D} C_{L}\\right)$ (Fig. 11.6).\nimage_name:Figure 11.6\ndescription:The Bode plot in Figure 11.6 illustrates a circuit's frequency response. The horizontal axis, representing angular frequency (ω), is in radians per second, while the vertical axis shows the voltage gain magnitude \\(|V_{out}/V_{in}|\\) in decibels (dB).\n\nAxes Labels and Units:\n- **Horizontal Axis (ω):** Angular frequency, measured in radians per second (rad/s).\n- **Vertical Axis (|V_out/V_in|):** Voltage gain magnitude, typically in decibels (dB).\n\nBehavior and Trends:\n- At low frequencies, the gain is constant at \\(g_m R_D\\).\n- The gain remains steady until reaching the cutoff frequency.\n- Beyond this point, the gain decreases.\n\nKey Features:\n- **-3 dB Point:** The gain drops to \\(\\frac{g_m R_D}{\\sqrt{2}}\\) at \\(\\omega = \\frac{1}{R_D C_L}\\), corresponding to a -3 dB reduction.\n- **Bandwidth:** Defined as the frequency range where the gain is within 3 dB of its maximum, marked by the \"-3 dB Bandwidth\" arrow.\n- **Rolloff:** After the -3 dB point, the gain decreases, indicated by the \"-3 dB Rolloff\" curve.\n\nAnnotations:\n- The graph includes \"-3 dB Bandwidth\" and \"-3 dB Rolloff\" annotations.\n- A vertical dashed line marks the cutoff frequency \\(\\omega = \\frac{1}{R_D C_L}\\).\n\nThis Bode plot effectively shows the circuit's frequency response, highlighting the -3 dB bandwidth and rolloff regions.\n\nFigure 11.6\nExercise Derive these results if $\\lambda \\neq 0$.\n${ }^{3}$ The magnitude of the complex number $a+j b$ is $\\sqrt{a^{2}+b^{2}}$.\n\nExample Consider the common-emitter stage shown in Fig. 11.7. Derive a relationship among the gain, -3 dB bandwidth, and power consumption of the circuit, assuming $V_{A}=\\infty$.\nimage_name:Figure 11.7\ndescription:\n[\nname: Q1, type: NPN, ports: {C: Vout, B: Vin, E: GND}\nname: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a common-emitter amplifier with an NPN transistor (Q1). The input connects to the base of Q1, and the output is taken from the collector. Resistor RC connects the collector to VCC, and capacitor CL connects the output to ground. The emitter is grounded, designed to amplify the input signal Vin.\n\nFigure 11.7\nSolution Similar to the CS topology in Fig. 11.5(a), the bandwidth is $1 /\\left(R_{C} C_{L}\\right)$, the low-frequency gain is $g_{m} R_{C}=\\left(I_{C} / V_{T}\\right) R_{C}$, and the power consumption is $I_{C} \\cdot V_{C C}$. For optimal performance, we aim to maximize both gain and bandwidth (and their product) while minimizing power dissipation. We define a \"figure of merit\" as\n\n$$\n\\begin{align*}\n\\frac{\\text { Gain } \\times \\text { Bandwidth }}{\\text { Power Consumption }} & =\\frac{\\frac{I_{C}}{V_{T}} R_{C} \\times \\frac{1}{R_{C} C_{L}}}{I_{C} \\cdot V_{C C}}  \\tag{11.8}\\\\\n& =\\frac{1}{V_{T} \\cdot V_{C C}} \\frac{1}{C_{L}} . \\tag{11.9}\n\\end{align*}\n$$\n\nThus, performance can be enhanced by reducing (a) the temperature; ${ }^{4}$ (b) $V_{C C}$, but this limits voltage swings; or (c) the load capacitance. In practice, load capacitance receives the most attention. Eq. (11.9) becomes more complex for CS stages (Problem 11.15).\n\nExercise Derive these results if $V_{A}<\\infty$.\n\nExample Explain the relationship between the frequency response and step response of the low-pass filter shown in Fig. 11.4(a).\n\nSolution To find the transfer function, we treat the circuit as a voltage divider and write\n\n$$\n\\begin{align*}\nH(s)=\\frac{V_{\\text {out }}}{V_{\\text {in }}}(s) & =\\frac{\\frac{1}{C_{1} s}}{\\frac{1}{C_{1} s}+R_{1}}  \\tag{11.10}\\\\\n& =\\frac{1}{R_{1} C_{1} s+1} . \\tag{11.11}\n\\end{align*}\n$$\n\n[^6]The frequency response is found by replacing $s$ with $j \\omega$ and calculating the magnitude:\n\n$$\n\\begin{equation*}\n|H(s=j \\omega)|=\\frac{1}{\\sqrt{R_{1}^{2} C_{1}^{2} \\omega^{2}+1}} \\tag{11.12}\n\\end{equation*}\n$$\n\nThe -3 dB bandwidth is $1 /\\left(R_{1} C_{1}\\right)$. The circuit's response to a step input $V_{0} u(t)$ is\n\n$$\n\\begin{equation*}\nV_{\\text {out }}(t)=V_{0}\\left(1-\\exp \\frac{-t}{R_{1} C_{1}}\\right) u(t) \\tag{11.13}\n\\end{equation*}\n$$\n\nThe relationship between Eqs. (11.12) and (11.13) is that as $R_{1} C_{1}$ increases, the bandwidth decreases and the step response slows down. Figure 11.8 plots this behavior, showing that a narrow bandwidth results in a slower time response. This explains the effect seen in Fig. 11.3(b): since the signal cannot quickly transition from low (white) to high (black), it spends time at intermediate levels (shades of gray), creating \"fuzzy\" edges.\nimage_name:Figure 11.8\ndescription:Figure 11.8 presents a Bode plot of the magnitude response \\(|H|\\) versus frequency \\(f\\). The vertical axis is dimensionless \\(|H|\\), and the horizontal axis is frequency \\(f\\) in hertz (Hz), using a logarithmic scale.\n\nThe plot shows how the system's frequency response changes with increasing \\(R_1 C_1\\). Initially, \\(|H|\\) is constant at 1.0, indicating no attenuation at low frequencies. As frequency rises, \\(|H|\\) decreases, showing the low-pass filter's roll-off.\n\nThree lines represent different \\(R_1 C_1\\) values. Higher \\(R_1 C_1\\) results in a lower cutoff frequency and narrower bandwidth. The solid black line, representing the highest \\(R_1 C_1\\), shows the steepest decline and narrowest bandwidth. The dashed black and gray lines represent lower \\(R_1 C_1\\) values, with the gray line having the widest bandwidth and least steep decline.\n\nKey features include the initial flat response at low frequencies and the subsequent decline at higher frequencies, illustrating the trade-off between bandwidth and time response. The graph highlights how increasing \\(R_1 C_1\\) affects the system's ability to respond quickly to input changes, as seen in the slower roll-off and reduced bandwidth.\n\n(a)\nimage_name:(a)\ndescription:This graph depicts the time-domain waveform of the output voltage \\( V_{out} \\) over time \\( t \\), showing the effect of different \\( R_1 C_1 \\) values on the system's response. The horizontal axis is time \\( t \\), and the vertical axis is output voltage \\( V_{out} \\).\n\nThree curves are shown:\n\n1. **Solid Black Line**: Represents a higher \\( R_1 C_1 \\) value, showing a slower response and more gradual rise to the final value, indicating a longer time constant.\n2. **Dashed Black Line**: Represents a moderate \\( R_1 C_1 \\) value, with a quicker response than the solid black line but slower than the gray line.\n3. **Gray Line**: Represents a lower \\( R_1 C_1 \\) value, showing the fastest rise time and quickest stabilization, indicating the widest bandwidth and least steep decline.\n\nOverall, the graph demonstrates the trade-off between bandwidth and time response. As \\( R_1 C_1 \\) increases, the system's response to input changes slows down, resulting in a narrower bandwidth and a slower roll-off. The initial flat response at low frequencies transitions to a steeper decline at higher frequencies, highlighting this trade-off.\n\n(b)\n\nFigure 11.8\nExercise At what frequency does $|H|$ decrease by a factor of two?"
},
{
    "text": "We understand from fundamental circuit theory that a circuit's transfer function can be expressed as\n\n$$\n\\begin{equation*}\nH(s)=A_{0} \\frac{\\left(1+\\frac{s}{\\omega_{z 1}}\\right)\\left(1+\\frac{s}{\\omega_{z 2}}\\right) \\ldots}{\\left(1+\\frac{s}{\\omega_{p 1}}\\right)\\left(1+\\frac{s}{\\omega_{p 2}}\\right) \\ldots} \\tag{11.2}\n\\end{equation*}\n$$\n\nwhere $A_{0}$ signifies the low-frequency gain because $H(s) \\rightarrow A_{0}$ as $s \\rightarrow 0$. The frequencies $\\omega_{z j}$ and $\\omega_{p j}$ correspond to the zeros and poles of the transfer function, respectively. If the circuit's input is a sinusoidal signal of the form $x(t)=A \\cos (2 \\pi f t)=A \\cos \\omega t$, then the output can be formulated as\n\n$$\n\\begin{equation*}\ny(t)=A|H(j \\omega)| \\cos [\\omega t+\\angle H(j \\omega)] \\tag{11.3}\n\\end{equation*}\n$$\n\n[^5]where $H(j \\omega)$ is derived by substituting $s=j \\omega$. Known as the \"magnitude\" and \"phase,\" $|H(j \\omega)|$ and $\\angle H(j \\omega)$ respectively indicate the circuit's frequency response. In this chapter, our primary focus is on the former. Note that $f$ (in Hz) and $\\omega$ (in radians per second) are related by a factor of $2 \\pi$. For instance, we can write $\\omega=5 \\times 10^{10} \\mathrm{rad} / \\mathrm{s}=2 \\pi(7.96 \\mathrm{GHz})$.\n\nExample Determine the transfer function and frequency response for the CS stage depicted in Fig. 11.4 11.5(a).\n\nSolution From Eq. (11.1), we obtain\n\n$$\n\\begin{align*}\nH(s)=\\frac{V_{\\text {out }}}{V_{\\text {in }}}(s) & =-g_{m}\\left(R_{D} \\| \\frac{1}{C_{L} s}\\right)  \\tag{11.4}\\\\\n& =\\frac{-g_{m} R_{D}}{R_{D} C_{L} s+1} . \\tag{11.5}\n\\end{align*}\n$$\n\nFor a sinusoidal input, we substitute $s=j \\omega$ and calculate the transfer function's magnitude: ${ }^{3}$\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text {out }}}{V_{\\text {in }}}\\right|=\\frac{g_{m} R_{D}}{\\sqrt{R_{D}^{2} C_{L}^{2} \\omega^{2}+1}} \\tag{11.6}\n\\end{equation*}\n$$\n\nAs anticipated, the gain starts at $g_{m} R_{D}$ at low frequencies, decreasing as $R_{D}^{2} C_{L}^{2} \\omega^{2}$ becomes comparable to unity. At $\\omega=1 /\\left(R_{D} C_{L}\\right)$,\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text {out }}}{V_{\\text {in }}}\\right|=\\frac{g_{m} R_{D}}{\\sqrt{2}} . \\tag{11.7}\n\\end{equation*}\n$$\n\nSince $20 \\log \\sqrt{2} \\approx 3 \\mathrm{~dB}$, we conclude that the -3 dB bandwidth of the circuit is $1 /\\left(R_{D} C_{L}\\right)$ (Fig. 11.6).\nimage_name:Figure 11.6\ndescription:The graph in Figure 11.6 is a Bode plot, depicting the frequency response of a circuit. The horizontal axis represents angular frequency (ω) in radians per second, while the vertical axis shows the magnitude of the voltage gain, \\(|V_{out}/V_{in}|\\), in decibels (dB).\n\nAxes Labels and Units:\n- **Horizontal Axis (ω):** Angular frequency in radians per second (rad/s).\n- **Vertical Axis (|V_out/V_in|):** Voltage gain magnitude, typically in decibels (dB).\n\nOverall Behavior and Trends:\n- At low frequencies, the gain is constant at \\(g_m R_D\\).\n- As frequency increases, the gain remains steady until reaching the cutoff frequency.\n- Beyond this point, the gain decreases.\n\nKey Features and Technical Details:\n- **-3 dB Point:** The gain drops to \\(\\frac{g_m R_D}{\\sqrt{2}}\\) at \\(\\omega = \\frac{1}{R_D C_L}\\), corresponding to a -3 dB reduction.\n- **Bandwidth:** The bandwidth is the frequency range where the gain is within 3 dB of its maximum, marked by the \"-3 dB Bandwidth\" arrow.\n- **Rolloff:** After the -3 dB point, the gain decreases at a rate determined by the circuit's characteristics, indicated by the \"-3 dB Rolloff\" curve.\n\nAnnotations and Specific Data Points:\n- The graph includes annotations like \"-3 dB Bandwidth\" and \"-3 dB Rolloff,\" highlighting critical points and regions.\n- A vertical dashed line marks the cutoff frequency \\(\\omega = \\frac{1}{R_D C_L}\\), a key value for bandwidth determination.\n\nThis Bode plot effectively illustrates the circuit's frequency response, showing how the gain varies with frequency and highlighting the critical -3 dB bandwidth and rolloff regions.\n\nFigure 11.6\nExercise Derive the above results if $\\lambda \\neq 0$.\n${ }^{3}$ The magnitude of the complex number $a+j b$ is $\\sqrt{a^{2}+b^{2}}$.\n\nExample Consider the common-emitter stage shown in Fig.11.7. Derive a relationship among the 11.5 gain, the -3 dB bandwidth, and the power consumption of the circuit. Assume $V_{A}=\\infty$.\nimage_name:Figure 11.7\ndescription:\n[\nname: Q1, type: NPN, ports: {C: Vout, B: Vin, E: GND}\nname: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a common-emitter amplifier stage with an NPN transistor (Q1). The input is connected to the base of Q1, and the output is taken from the collector. The resistor RC is connected between the collector and VCC, and the capacitor CL is connected from the output to ground. The emitter is grounded. The circuit is designed to amplify the input signal Vin.\n\nFigure 11.7\nSolution Similarly to the CS topology of Fig. 11.5(a), the bandwidth is given by $1 /\\left(R_{C} C_{L}\\right)$, the low-frequency gain by $g_{m} R_{C}=\\left(I_{C} / V_{T}\\right) R_{C}$, and the power consumption by $I_{C} \\cdot V_{C C}$. For optimal performance, we aim to maximize both the gain and the bandwidth (and thus their product) while minimizing power dissipation. We define a \"figure of merit\" as\n\n$$\n\\begin{align*}\n\\frac{\\text { Gain } \\times \\text { Bandwidth }}{\\text { Power Consumption }} & =\\frac{\\frac{I_{C}}{V_{T}} R_{C} \\times \\frac{1}{R_{C} C_{L}}}{I_{C} \\cdot V_{C C}}  \\tag{11.8}\\\\\n& =\\frac{1}{V_{T} \\cdot V_{C C}} \\frac{1}{C_{L}} . \\tag{11.9}\n\\end{align*}\n$$\n\nThus, overall performance can be enhanced by reducing (a) the temperature; ${ }^{4}$ (b) $V_{C C}$, but this limits voltage swings; or (c) the load capacitance. In practice, load capacitance receives the most attention. For CS stages, Eq. (11.9) becomes more complex (Problem 11.15).\n\nExercise Derive the above results if $V_{A}<\\infty$.\n\nExample Explain the relationship between the frequency response and step response of the simple 11.6 low-pass filter shown in Fig. 11.4(a).\n\nSolution To determine the transfer function, we treat the circuit as a voltage divider and write\n\n$$\n\\begin{align*}\nH(s)=\\frac{V_{\\text {out }}}{V_{\\text {in }}}(s) & =\\frac{\\frac{1}{C_{1} s}}{\\frac{1}{C_{1} s}+R_{1}}  \\tag{11.10}\\\\\n& =\\frac{1}{R_{1} C_{1} s+1} . \\tag{11.11}\n\\end{align*}\n$$\n\n[^6]The frequency response is found by substituting $s$ with $j \\omega$ and calculating the magnitude:\n\n$$\n\\begin{equation*}\n|H(s=j \\omega)|=\\frac{1}{\\sqrt{R_{1}^{2} C_{1}^{2} \\omega^{2}+1}} \\tag{11.12}\n\\end{equation*}\n$$\n\nThe -3 dB bandwidth is $1 /\\left(R_{1} C_{1}\\right)$.\nThe circuit's response to a step input of the form $V_{0} u(t)$ is\n\n$$\n\\begin{equation*}\nV_{\\text {out }}(t)=V_{0}\\left(1-\\exp \\frac{-t}{R_{1} C_{1}}\\right) u(t) \\tag{11.13}\n\\end{equation*}\n$$\n\nThe relationship between Eqs. (11.12) and (11.13) is that as $R_{1} C_{1}$ increases, the bandwidth decreases and the step response becomes slower. Figure 11.8 illustrates this behavior, showing that a narrow bandwidth results in a slower time response. This explains the effect seen in Fig. 11.3(b): since the signal cannot quickly transition from low (white) to high (black), it lingers at intermediate levels (shades of gray), creating \"fuzzy\" edges.\nimage_name:Figure 11.8\ndescription:The graph in Figure 11.8 is a Bode plot showing the magnitude response \\(|H|\\) of a system as a function of frequency \\(f\\). The vertical axis represents the magnitude \\(|H|\\), which is dimensionless, while the horizontal axis represents frequency \\(f\\), typically in hertz (Hz), using a logarithmic scale.\n\nThe plot demonstrates the system's frequency response as the product \\(R_1 C_1\\) increases. Initially, the magnitude \\(|H|\\) is constant at 1.0, indicating no attenuation at low frequencies. As frequency rises, the magnitude decreases, exhibiting the roll-off characteristic of a low-pass filter.\n\nThe graph includes three lines representing different \\(R_1 C_1\\) values. Higher \\(R_1 C_1\\) values result in a lower cutoff frequency and a narrower bandwidth. The solid black line represents the highest \\(R_1 C_1\\) value, showing the steepest decline and narrowest bandwidth. The dashed black line and gray line represent lower \\(R_1 C_1\\) values, with the gray line having the widest bandwidth and least steep decline.\n\nKey features include the initial flat response at low frequencies and the subsequent decline at higher frequencies, illustrating the trade-off between bandwidth and time response. The graph highlights how increasing \\(R_1 C_1\\) affects the system's ability to respond quickly to input changes, as seen by the slower roll-off and reduced bandwidth.\n\n(a)\nimage_name:(a)\ndescription:The graph shows the time-domain waveform of the output voltage \\( V_{out} \\) over time \\( t \\), illustrating the effect of different \\( R_1 C_1 \\) values on the system's response. The horizontal axis is time \\( t \\), and the vertical axis is the output voltage \\( V_{out} \\).\n\nThree curves are depicted:\n\n1. **Solid Black Line**: Represents a higher \\( R_1 C_1 \\) value, showing a slower response with a more gradual rise to the final value, indicating a longer time constant.\n2. **Dashed Black Line**: Represents a moderate \\( R_1 C_1 \\) value, with a quicker response than the solid black line but slower than the gray line.\n3. **Gray Line**: Represents a lower \\( R_1 C_1 \\) value, showing the fastest rise time and quickest attainment of steady state, indicating the widest bandwidth and least steep decline.\n\nThe graph demonstrates the trade-off between bandwidth and time response. As \\( R_1 C_1 \\) increases, the system's ability to respond quickly to input changes decreases, resulting in a slower roll-off and reduced bandwidth. The initial flat response at low frequencies transitions to a steeper decline at higher frequencies, highlighting this trade-off.\n\n(b)\n\nFigure 11.8\nExercise At what frequency does $|H|$ fall by a factor of two?\n```"
},
{
    "text": "We understand from fundamental circuit theory that a circuit's transfer function can be expressed as\n\n$$\n\\begin{equation*}\nH(s)=A_{0} \\frac{\\left(1+\\frac{s}{\\omega_{z 1}}\\right)\\left(1+\\frac{s}{\\omega_{z 2}}\\right) \\ldots}{\\left(1+\\frac{s}{\\omega_{p 1}}\\right)\\left(1+\\frac{s}{\\omega_{p 2}}\\right) \\ldots} \\tag{11.2}\n\\end{equation*}\n$$\n\nwhere $A_{0}$ signifies the low-frequency gain because $H(s) \\rightarrow A_{0}$ as $s \\rightarrow 0$. The frequencies $\\omega_{z j}$ and $\\omega_{p j}$ correspond to the zeros and poles of the transfer function, respectively. If the circuit's input is a sinusoidal signal of the form $x(t)=A \\cos (2 \\pi f t)=A \\cos \\omega t$, then the output can be represented as\n\n$$\n\\begin{equation*}\ny(t)=A|H(j \\omega)| \\cos [\\omega t+\\angle H(j \\omega)] \\tag{11.3}\n\\end{equation*}\n$$\n\n[^5]where $H(j \\omega)$ is derived by substituting $s=j \\omega$. Referred to as the \"magnitude\" and the \"phase,\" $|H(j \\omega)|$ and $\\angle H(j \\omega)$ respectively indicate the circuit's frequency response. In this chapter, our primary focus is on the former. Note that $f$ (in Hz) and $\\omega$ (in radians per second) are related by a factor of $2 \\pi$. For instance, we can express $\\omega=5 \\times 10^{10} \\mathrm{rad} / \\mathrm{s}=2 \\pi(7.96 \\mathrm{GHz})$.\n\nExample Determine the transfer function and frequency response of the CS stage depicted in Figs. 11.4 and 11.5(a).\n\nSolution From Eq. (11.1), we obtain\n\n$$\n\\begin{align*}\nH(s)=\\frac{V_{\\text {out }}}{V_{\\text {in }}}(s) & =-g_{m}\\left(R_{D} \\| \\frac{1}{C_{L} s}\\right)  \\tag{11.4}\\\\\n& =\\frac{-g_{m} R_{D}}{R_{D} C_{L} s+1} . \\tag{11.5}\n\\end{align*}\n$$\n\nFor a sinusoidal input, we substitute $s=j \\omega$ and calculate the transfer function's magnitude: ${ }^{3}$\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text {out }}}{V_{\\text {in }}}\\right|=\\frac{g_{m} R_{D}}{\\sqrt{R_{D}^{2} C_{L}^{2} \\omega^{2}+1}} \\tag{11.6}\n\\end{equation*}\n$$\n\nAs anticipated, the gain starts at $g_{m} R_{D}$ at low frequencies, decreasing as $R_{D}^{2} C_{L}^{2} \\omega^{2}$ becomes comparable to unity. At $\\omega=1 /\\left(R_{D} C_{L}\\right)$,\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text {out }}}{V_{\\text {in }}}\\right|=\\frac{g_{m} R_{D}}{\\sqrt{2}} . \\tag{11.7}\n\\end{equation*}\n$$\n\nSince $20 \\log \\sqrt{2} \\approx 3 \\mathrm{~dB}$, we conclude that the -3 dB bandwidth of the circuit is $1 /\\left(R_{D} C_{L}\\right)$ (Fig. 11.6).\nimage_name:Figure 11.6\ndescription:The graph in Figure 11.6 is a Bode plot depicting the frequency response of a circuit. The horizontal axis shows angular frequency (ω) in radians per second, while the vertical axis displays the voltage gain magnitude, \\(|V_{out}/V_{in}|\\), in decibels (dB).\n\nAxes Labels and Units:\n- **Horizontal Axis (ω):** Angular frequency in radians per second (rad/s).\n- **Vertical Axis (|V_out/V_in|):** Voltage gain magnitude in decibels (dB).\n\nOverall Behavior and Trends:\n- At low frequencies, the gain remains constant at \\(g_m R_D\\).\n- As frequency rises, the gain stays constant until reaching the cutoff frequency.\n- Beyond this point, the gain decreases.\n\nKey Features and Technical Details:\n- **-3 dB Point:** The gain drops to \\(\\frac{g_m R_D}{\\sqrt{2}}\\) at this point, corresponding to a -3 dB reduction. This occurs at \\(\\omega = \\frac{1}{R_D C_L}\\).\n- **Bandwidth:** Defined as the frequency range where the gain is within 3 dB of its maximum value, marked by the \"-3 dB Bandwidth\" arrow.\n- **Rolloff:** After the -3 dB point, the gain decreases at a rate determined by the circuit's characteristics, indicated by the \"-3 dB Rolloff\" curve.\n\nAnnotations and Specific Data Points:\n- The graph includes annotations like \"-3 dB Bandwidth\" and \"-3 dB Rolloff\" to highlight critical points and regions.\n- A vertical dashed line marks the cutoff frequency \\(\\omega = \\frac{1}{R_D C_L}\\), a key value for determining the bandwidth.\n\nThis Bode plot effectively illustrates the circuit's frequency response, showing how the gain varies with frequency and highlighting the critical -3 dB bandwidth and rolloff regions.\n\nFigure 11.6\nExercise Derive the above results if $\\lambda \\neq 0$.\n${ }^{3}$ The magnitude of the complex number $a+j b$ is $\\sqrt{a^{2}+b^{2}}$.\n\nExample Consider the common-emitter stage shown in Fig. 11.7. Derive a relationship among the 11.5 gain, the -3 dB bandwidth, and the power consumption of the circuit, assuming $V_{A}=\\infty$.\nimage_name:Figure 11.7\ndescription:\n[\nname: Q1, type: NPN, ports: {C: Vout, B: Vin, E: GND}\nname: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a common-emitter amplifier stage with an NPN transistor (Q1). The input is connected to the base of Q1, and the output is taken from the collector. The resistor RC is connected between the collector and VCC, and the capacitor CL is connected from the output to ground. The emitter is grounded. The circuit is designed to amplify the input signal Vin.\n\nFigure 11.7\nSolution Similar to the CS topology in Fig. 11.5(a), the bandwidth is given by $1 /\\left(R_{C} C_{L}\\right)$, the low-frequency gain by $g_{m} R_{C}=\\left(I_{C} / V_{T}\\right) R_{C}$, and the power consumption by $I_{C} \\cdot V_{C C}$. To achieve optimal performance, we aim to maximize both the gain and the bandwidth (and thus their product) while minimizing power dissipation. We define a \"figure of merit\" as\n\n$$\n\\begin{align*}\n\\frac{\\text { Gain } \\times \\text { Bandwidth }}{\\text { Power Consumption }} & =\\frac{\\frac{I_{C}}{V_{T}} R_{C} \\times \\frac{1}{R_{C} C_{L}}}{I_{C} \\cdot V_{C C}}  \\tag{11.8}\\\\\n& =\\frac{1}{V_{T} \\cdot V_{C C}} \\frac{1}{C_{L}} . \\tag{11.9}\n\\end{align*}\n$$\n\nThus, performance can be enhanced by reducing (a) the temperature; ${ }^{4}$ (b) $V_{C C}$, though this may limit voltage swings; or (c) the load capacitance. In practice, load capacitance often receives the most attention. For CS stages, Eq. (11.9) becomes more complex (Problem 11.15).\n\nExercise Derive the above results if $V_{A}<\\infty$.\n\nExample Explain the relationship between the frequency response and step response of the simple low-pass filter shown in Fig. 11.4(a).\n\nSolution To find the transfer function, we view the circuit as a voltage divider and write\n\n$$\n\\begin{align*}\nH(s)=\\frac{V_{\\text {out }}}{V_{\\text {in }}}(s) & =\\frac{\\frac{1}{C_{1} s}}{\\frac{1}{C_{1} s}+R_{1}}  \\tag{11.10}\\\\\n& =\\frac{1}{R_{1} C_{1} s+1} . \\tag{11.11}\n\\end{align*}\n$$\n\n[^6]The frequency response is determined by replacing $s$ with $j \\omega$ and calculating the magnitude:\n\n$$\n\\begin{equation*}\n|H(s=j \\omega)|=\\frac{1}{\\sqrt{R_{1}^{2} C_{1}^{2} \\omega^{2}+1}} \\tag{11.12}\n\\end{equation*}\n$$\n\nThe -3 dB bandwidth is $1 /\\left(R_{1} C_{1}\\right)$. The circuit's response to a step input of the form $V_{0} u(t)$ is\n\n$$\n\\begin{equation*}\nV_{\\text {out }}(t)=V_{0}\\left(1-\\exp \\frac{-t}{R_{1} C_{1}}\\right) u(t) \\tag{11.13}\n\\end{equation*}\n$$\n\nThe relationship between Eqs. (11.12) and (11.13) is that as $R_{1} C_{1}$ increases, the bandwidth decreases and the step response becomes slower. Figure 11.8 illustrates this behavior, showing that a narrower bandwidth results in a slower time response. This explains the effect seen in Fig. 11.3(b): since the signal cannot quickly transition from low (white) to high (black), it lingers at intermediate levels (shades of gray), creating \"fuzzy\" edges.\nimage_name:Figure 11.8\ndescription:The graph in Figure 11.8 is a Bode plot showing the magnitude response \\(|H|\\) of a system as a function of frequency \\(f\\). The vertical axis represents the magnitude \\(|H|\\), which is dimensionless, while the horizontal axis represents frequency \\(f\\) in hertz (Hz), using a logarithmic scale.\n\nThe plot displays the system's frequency response for different values of \\(R_1 C_1\\). Initially, the magnitude \\(|H|\\) is constant at 1.0, indicating no attenuation at low frequencies. As frequency increases, the magnitude decreases, showing the roll-off characteristic of a low-pass filter.\n\nThe graph includes three lines representing different \\(R_1 C_1\\) values. As \\(R_1 C_1\\) increases, the cutoff frequency decreases, resulting in a narrower bandwidth. The solid black line represents the highest \\(R_1 C_1\\) value, showing the steepest decline and narrowest bandwidth. The dashed black line and gray line represent lower \\(R_1 C_1\\) values, with the gray line having the widest bandwidth and least steep decline.\n\nKey features include the initial flat response at low frequencies and the subsequent decline at higher frequencies, illustrating the trade-off between bandwidth and time response. The graph highlights how increasing \\(R_1 C_1\\) affects the system's ability to respond quickly to input changes, as seen by the slower roll-off and reduced bandwidth.\n\n(a)\nimage_name:(a)\ndescription:The graph shows the time-domain waveform of the output voltage \\( V_{out} \\) over time \\( t \\), illustrating the effect of different \\( R_1 C_1 \\) values on the system's response. The horizontal axis is time \\( t \\), and the vertical axis is the output voltage \\( V_{out} \\).\n\nThree curves are depicted:\n\n1. **Solid Black Line**: Represents a higher \\( R_1 C_1 \\) value, showing a slower response with a more gradual rise to the final value, indicating a longer time constant.\n2. **Dashed Black Line**: Represents a moderate \\( R_1 C_1 \\) value, with a quicker response than the solid black line but slower than the gray line.\n3. **Gray Line**: Represents a lower \\( R_1 C_1 \\) value, showing the fastest rise time and quickest stabilization, indicating the widest bandwidth and least steep decline.\n\nThe graph demonstrates the trade-off between bandwidth and time response. As \\( R_1 C_1 \\) increases, the system's ability to respond quickly to input changes decreases, resulting in a slower roll-off and reduced bandwidth. The initial flat response at low frequencies transitions to a steeper decline at higher frequencies, highlighting this trade-off.\n\n(b)\n\nFigure 11.8\nExercise At what frequency does $|H|$ fall by a factor of two?\n```"
},
{
    "text": "We understand from fundamental circuit theory that a circuit's transfer function can be expressed as\n\n$$\n\\begin{equation*}\nH(s)=A_{0} \\frac{\\left(1+\\frac{s}{\\omega_{z 1}}\\right)\\left(1+\\frac{s}{\\omega_{z 2}}\\right) \\ldots}{\\left(1+\\frac{s}{\\omega_{p 1}}\\right)\\left(1+\\frac{s}{\\omega_{p 2}}\\right) \\ldots} \\tag{11.2}\n\\end{equation*}\n$$\n\nwhere $A_{0}$ signifies the low-frequency gain, given that $H(s) \\rightarrow A_{0}$ as $s \\rightarrow 0$. The frequencies $\\omega_{z j}$ and $\\omega_{p j}$ correspond to the zeros and poles of the transfer function, respectively. If the circuit's input is a sinusoidal signal of the form $x(t)=A \\cos (2 \\pi f t)=A \\cos \\omega t$, the output can be written as\n\n$$\n\\begin{equation*}\ny(t)=A|H(j \\omega)| \\cos [\\omega t+\\angle H(j \\omega)] \\tag{11.3}\n\\end{equation*}\n$$\n\n[^5]Here, $H(j \\omega)$ is derived by substituting $s=j \\omega$. Referred to as the \"magnitude\" and \"phase,\" $|H(j \\omega)|$ and $\\angle H(j \\omega)$ respectively indicate the circuit's frequency response. In this chapter, our primary focus is on the former. Note that $f$ (in Hz) and $\\omega$ (in radians per second) are related by $2 \\pi$. For instance, $\\omega=5 \\times 10^{10} \\mathrm{rad} / \\mathrm{s}$ can be written as $2 \\pi(7.96 \\mathrm{GHz})$.\n\nExample Determine the transfer function and frequency response for the CS stage illustrated in Figs. 11.4 and 11.5(a).\n\nSolution From Eq. (11.1), we obtain\n\n$$\n\\begin{align*}\nH(s)=\\frac{V_{\\text {out }}}{V_{\\text {in }}}(s) & =-g_{m}\\left(R_{D} \\| \\frac{1}{C_{L} s}\\right)  \\tag{11.4}\\\\\n& =\\frac{-g_{m} R_{D}}{R_{D} C_{L} s+1} . \\tag{11.5}\n\\end{align*}\n$$\n\nFor a sinusoidal input, substituting $s=j \\omega$ and calculating the transfer function's magnitude yields:\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text {out }}}{V_{\\text {in }}}\\right|=\\frac{g_{m} R_{D}}{\\sqrt{R_{D}^{2} C_{L}^{2} \\omega^{2}+1}} \\tag{11.6}\n\\end{equation*}\n$$\n\nAs anticipated, the gain starts at $g_{m} R_{D}$ at low frequencies and decreases as $R_{D}^{2} C_{L}^{2} \\omega^{2}$ approaches unity. At $\\omega=1 /\\left(R_{D} C_{L}\\right)$,\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text {out }}}{V_{\\text {in }}}\\right|=\\frac{g_{m} R_{D}}{\\sqrt{2}} . \\tag{11.7}\n\\end{equation*}\n$$\n\nSince $20 \\log \\sqrt{2} \\approx 3 \\mathrm{~dB}$, the -3 dB bandwidth of the circuit is $1 /\\left(R_{D} C_{L}\\right)$ (Fig. 11.6).\n\nimage_name:Figure 11.6\ndescription:The Bode plot in Figure 11.6 depicts a circuit's frequency response. The horizontal axis is the angular frequency (ω) in radians per second, while the vertical axis shows the voltage gain magnitude \\(|V_{out}/V_{in}|\\) in decibels (dB).\n\nAxes Labels and Units:\n- **Horizontal Axis (ω):** Angular frequency in radians per second (rad/s).\n- **Vertical Axis (|V_out/V_in|):** Voltage gain magnitude in decibels (dB).\n\nBehavior and Trends:\n- At low frequencies, the gain is constant at \\(g_m R_D\\).\n- The gain remains steady until reaching the cutoff frequency.\n- Beyond this point, the gain decreases.\n\nKey Features:\n- **-3 dB Point:** The gain drops to \\(\\frac{g_m R_D}{\\sqrt{2}}\\), corresponding to a -3 dB reduction, at \\(\\omega = \\frac{1}{R_D C_L}\\).\n- **Bandwidth:** Defined as the frequency range where the gain is within 3 dB of its maximum, marked by the \"-3 dB Bandwidth\" arrow.\n- **Rolloff:** After the -3 dB point, the gain decreases at a rate determined by the circuit's characteristics, indicated by the \"-3 dB Rolloff\" curve.\n\nAnnotations:\n- The graph includes annotations like \"-3 dB Bandwidth\" and \"-3 dB Rolloff,\" highlighting critical points.\n- A vertical dashed line marks the cutoff frequency \\(\\omega = \\frac{1}{R_D C_L}\\).\n\nThis Bode plot effectively illustrates the circuit's frequency response, showing gain behavior across frequencies and highlighting the -3 dB bandwidth and rolloff regions.\n\nFigure 11.6\nExercise Derive the above results if $\\lambda \\neq 0$.\n${ }^{3}$ The magnitude of the complex number $a+j b$ is $\\sqrt{a^{2}+b^{2}}$.\n\nExample Consider the common-emitter stage shown in Fig. 11.7. Derive a relationship among the gain, -3 dB bandwidth, and power consumption of the circuit, assuming $V_{A}=\\infty$.\n\nimage_name:Figure 11.7\ndescription:\n[\nname: Q1, type: NPN, ports: {C: Vout, B: Vin, E: GND}\nname: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a common-emitter amplifier stage with an NPN transistor (Q1). The input is connected to the base of Q1, and the output is taken from the collector. The resistor RC is connected between the collector and VCC, and the capacitor CL is connected from the output to ground. The emitter is grounded, designed to amplify the input signal Vin.\n\nFigure 11.7\nSolution Similarly to the CS topology in Fig. 11.5(a), the bandwidth is $1 /\\left(R_{C} C_{L}\\right)$, the low-frequency gain is $g_{m} R_{C}=\\left(I_{C} / V_{T}\\right) R_{C}$, and the power consumption is $I_{C} \\cdot V_{C C}$. For optimal performance, we aim to maximize both the gain and bandwidth (and their product) while minimizing power dissipation. We define a \"figure of merit\" as\n\n$$\n\\begin{align*}\n\\frac{\\text { Gain } \\times \\text { Bandwidth }}{\\text { Power Consumption }} & =\\frac{\\frac{I_{C}}{V_{T}} R_{C} \\times \\frac{1}{R_{C} C_{L}}}{I_{C} \\cdot V_{C C}}  \\tag{11.8}\\\\\n& =\\frac{1}{V_{T} \\cdot V_{C C}} \\frac{1}{C_{L}} . \\tag{11.9}\n\\end{align*}\n$$\n\nThus, performance can be enhanced by reducing (a) the temperature; ${ }^{4}$ (b) $V_{C C}$, but this limits voltage swings; or (c) the load capacitance. Practically, load capacitance receives the most attention. Eq. (11.9) becomes more complex for CS stages (Problem 11.15).\n\nExercise Derive the above results if $V_{A}<\\infty$.\n\nExample Explain the relationship between the frequency response and step response of the simple low-pass filter shown in Fig. 11.4(a).\n\nSolution To find the transfer function, we view the circuit as a voltage divider and write\n\n$$\n\\begin{align*}\nH(s)=\\frac{V_{\\text {out }}}{V_{\\text {in }}}(s) & =\\frac{\\frac{1}{C_{1} s}}{\\frac{1}{C_{1} s}+R_{1}}  \\tag{11.10}\\\\\n& =\\frac{1}{R_{1} C_{1} s+1} . \\tag{11.11}\n\\end{align*}\n$$\n\n[^6]The frequency response is found by replacing $s$ with $j \\omega$ and calculating the magnitude:\n\n$$\n\\begin{equation*}\n|H(s=j \\omega)|=\\frac{1}{\\sqrt{R_{1}^{2} C_{1}^{2} \\omega^{2}+1}} \\tag{11.12}\n\\end{equation*}\n$$\n\nThe -3 dB bandwidth is $1 /\\left(R_{1} C_{1}\\right)$. The circuit's response to a step input $V_{0} u(t)$ is\n\n$$\n\\begin{equation*}\nV_{\\text {out }}(t)=V_{0}\\left(1-\\exp \\frac{-t}{R_{1} C_{1}}\\right) u(t) \\tag{11.13}\n\\end{equation*}\n$$\n\nThe relationship between Eqs. (11.12) and (11.13) is that increasing $R_{1} C_{1}$ results in a lower bandwidth and a slower step response. Figure 11.8 illustrates this, showing that a narrow bandwidth leads to a slower time response. This explains the effect in Fig. 11.3(b): the signal's inability to rapidly transition from low (white) to high (black) causes intermediate levels (shades of gray), creating \"fuzzy\" edges.\n\nimage_name:Figure 11.8\ndescription:Figure 11.8 is a Bode plot showing the magnitude response \\(|H|\\) of a system versus frequency \\(f\\). The vertical axis is the magnitude \\(|H|\\), dimensionless, and the horizontal axis is the frequency \\(f\\) in hertz (Hz), using a logarithmic scale.\n\nThe plot shows how the system's frequency response changes with increasing \\(R_1 C_1\\). Initially, \\(|H|\\) is constant at 1.0, indicating no attenuation at low frequencies. As frequency rises, \\(|H|\\) decreases, characteristic of a low-pass filter.\n\nThree lines represent different \\(R_1 C_1\\) values. Higher \\(R_1 C_1\\) results in a lower cutoff frequency and narrower bandwidth. The solid black line shows the steepest decline and narrowest bandwidth for the highest \\(R_1 C_1\\). The dashed black and gray lines represent lower \\(R_1 C_1\\) values, with the gray line having the widest bandwidth and least steep decline.\n\nKey features include the initial flat response at low frequencies and the subsequent decline at higher frequencies, illustrating the trade-off between bandwidth and time response. The graph highlights how increasing \\(R_1 C_1\\) affects the system's ability to respond quickly to input changes, as seen by the slower roll-off and reduced bandwidth.\n\n(a)\nimage_name:(a)\ndescription:This graph shows the output voltage \\( V_{out} \\) over time \\( t \\), illustrating the effect of different \\( R_1 C_1 \\) values on the system's response. The horizontal axis is time \\( t \\), and the vertical axis is the output voltage \\( V_{out} \\).\n\nThree curves are present:\n\n1. **Solid Black Line**: Represents a higher \\( R_1 C_1 \\) value, showing a slower, more gradual rise to the final value, indicating a longer time constant.\n2. **Dashed Black Line**: Represents a moderate \\( R_1 C_1 \\) value, with a quicker response than the solid black line but slower than the gray line.\n3. **Gray Line**: Represents a lower \\( R_1 C_1 \\) value, showing the fastest rise time and quickest stabilization, indicating the widest bandwidth and least steep decline.\n\nThe graph demonstrates the trade-off between bandwidth and time response. As \\( R_1 C_1 \\) increases, the system's response to input changes slows, resulting in a slower roll-off and reduced bandwidth. The initial flat response at low frequencies transitions to a steeper decline at higher frequencies, highlighting this trade-off.\n\n(b)\n\nFigure 11.8\nExercise At what frequency does $|H|$ drop by a factor of two?"
},
{
    "text": "We understand from fundamental circuit theory that a circuit's transfer function can be expressed as\n\n$$\n\\begin{equation*}\nH(s)=A_{0} \\frac{\\left(1+\\frac{s}{\\omega_{z 1}}\\right)\\left(1+\\frac{s}{\\omega_{z 2}}\\right) \\ldots}{\\left(1+\\frac{s}{\\omega_{p 1}}\\right)\\left(1+\\frac{s}{\\omega_{p 2}}\\right) \\ldots} \\tag{11.2}\n\\end{equation*}\n$$\n\nwhere $A_{0}$ signifies the low-frequency gain because $H(s) \\rightarrow A_{0}$ as $s \\rightarrow 0$. The frequencies $\\omega_{z j}$ and $\\omega_{p j}$ denote the zeros and poles of the transfer function, respectively. If the circuit's input is a sinusoidal signal of the form $x(t)=A \\cos (2 \\pi f t)=A \\cos \\omega t$, then the output can be written as\n\n$$\n\\begin{equation*}\ny(t)=A|H(j \\omega)| \\cos [\\omega t+\\angle H(j \\omega)] \\tag{11.3}\n\\end{equation*}\n$$\n\n[^5]where $H(j \\omega)$ is derived by substituting $s=j \\omega$. Referred to as the \"magnitude\" and the \"phase,\" $|H(j \\omega)|$ and $\\angle H(j \\omega)$ respectively indicate the circuit's frequency response. In this chapter, our primary focus is on the former. Note that $f$ (in Hz) and $\\omega$ (in radians per second) are related by $2 \\pi$. For instance, we can express $\\omega=5 \\times 10^{10} \\mathrm{rad} / \\mathrm{s}=2 \\pi(7.96 \\mathrm{GHz})$.\n\nExample Determine the transfer function and frequency response for the CS stage illustrated in Figs. 11.4 and 11.5(a).\n\nSolution From Eq. (11.1), we obtain\n\n$$\n\\begin{align*}\nH(s)=\\frac{V_{\\text {out }}}{V_{\\text {in }}}(s) & =-g_{m}\\left(R_{D} \\| \\frac{1}{C_{L} s}\\right)  \\tag{11.4}\\\\\n& =\\frac{-g_{m} R_{D}}{R_{D} C_{L} s+1} . \\tag{11.5}\n\\end{align*}\n$$\n\nFor a sinusoidal input, substituting $s=j \\omega$ allows us to compute the transfer function's magnitude:\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text {out }}}{V_{\\text {in }}}\\right|=\\frac{g_{m} R_{D}}{\\sqrt{R_{D}^{2} C_{L}^{2} \\omega^{2}+1}} \\tag{11.6}\n\\end{equation*}\n$$\n\nAs anticipated, the gain starts at $g_{m} R_{D}$ at low frequencies, decreasing as $R_{D}^{2} C_{L}^{2} \\omega^{2}$ becomes comparable to unity. At $\\omega=1 /\\left(R_{D} C_{L}\\right)$,\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text {out }}}{V_{\\text {in }}}\\right|=\\frac{g_{m} R_{D}}{\\sqrt{2}} . \\tag{11.7}\n\\end{equation*}\n$$\n\nSince $20 \\log \\sqrt{2} \\approx 3 \\mathrm{~dB}$, we conclude that the circuit's -3 dB bandwidth is $1 /\\left(R_{D} C_{L}\\right)$ (Fig. 11.6).\nimage_name:Figure 11.6\ndescription:The Bode plot in Figure 11.6 depicts a circuit's frequency response. The horizontal axis, representing angular frequency (ω), is in radians per second, while the vertical axis shows the voltage gain magnitude, \\(|V_{out}/V_{in}|\\), in decibels (dB).\n\nAxes Labels and Units:\n- **Horizontal Axis (ω):** Angular frequency in radians per second (rad/s).\n- **Vertical Axis (|V_out/V_in|):** Voltage gain magnitude, typically in decibels (dB).\n\nBehavior and Trends:\n- At low frequencies, the gain remains constant at \\(g_m R_D\\).\n- As frequency rises, the gain stays constant until reaching the cutoff frequency.\n- Beyond this point, the gain decreases.\n\nKey Features and Technical Details:\n- **-3 dB Point:** The gain drops to \\(\\frac{g_m R_D}{\\sqrt{2}}\\) at \\(\\omega = \\frac{1}{R_D C_L}\\), corresponding to a -3 dB reduction.\n- **Bandwidth:** The bandwidth is the frequency range where the gain is within 3 dB of its maximum, marked by the \"-3 dB Bandwidth\" arrow.\n- **Rolloff:** Post the -3 dB point, the gain decreases at a rate determined by the circuit's characteristics, indicated by the \"-3 dB Rolloff\" curve.\n\nAnnotations:\n- The graph includes annotations like \"-3 dB Bandwidth\" and \"-3 dB Rolloff,\" highlighting critical points and regions.\n- A vertical dashed line marks the cutoff frequency \\(\\omega = \\frac{1}{R_D C_L}\\).\n\nThis Bode plot effectively illustrates the circuit's frequency response, showing gain behavior across different frequencies and highlighting the -3 dB bandwidth and rolloff regions.\n\nFigure 11.6\nExercise Derive these results if $\\lambda \\neq 0$.\n${ }^{3}$ The magnitude of the complex number $a+j b$ is $\\sqrt{a^{2}+b^{2}}$.\n\nExample Consider the common-emitter stage shown in Fig. 11.7. Derive a relationship among the gain, -3 dB bandwidth, and power consumption of the circuit, assuming $V_{A}=\\infty$.\nimage_name:Figure 11.7\ndescription:\n[\nname: Q1, type: NPN, ports: {C: Vout, B: Vin, E: GND}\nname: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a common-emitter amplifier stage with an NPN transistor (Q1). The input connects to Q1's base, and the output is taken from the collector. Resistor RC connects the collector to VCC, and capacitor CL connects from the output to ground. The emitter is grounded, and the circuit amplifies the input signal Vin.\n\nFigure 11.7\nSolution Similarly to the CS topology in Fig. 11.5(a), the bandwidth is $1 /\\left(R_{C} C_{L}\\right)$, the low-frequency gain is $g_{m} R_{C}=\\left(I_{C} / V_{T}\\right) R_{C}$, and the power consumption is $I_{C} \\cdot V_{C C}$. For optimal performance, we aim to maximize both gain and bandwidth (and their product) while minimizing power dissipation. We define a \"figure of merit\" as\n\n$$\n\\begin{align*}\n\\frac{\\text { Gain } \\times \\text { Bandwidth }}{\\text { Power Consumption }} & =\\frac{\\frac{I_{C}}{V_{T}} R_{C} \\times \\frac{1}{R_{C} C_{L}}}{I_{C} \\cdot V_{C C}}  \\tag{11.8}\\\\\n& =\\frac{1}{V_{T} \\cdot V_{C C}} \\frac{1}{C_{L}} . \\tag{11.9}\n\\end{align*}\n$$\n\nThus, performance can be enhanced by reducing (a) the temperature; ${ }^{4}$ (b) $V_{C C}$, albeit with limited voltage swings; or (c) the load capacitance. Practically, load capacitance receives the most attention. For CS stages, Eq. (11.9) becomes more complex (Problem 11.15).\n\nExercise Derive these results if $V_{A}<\\infty$.\n\nExample Explain the relationship between the frequency response and step response of the simple low-pass filter in Fig. 11.4(a).\n\nSolution To derive the transfer function, we treat the circuit as a voltage divider and write\n\n$$\n\\begin{align*}\nH(s)=\\frac{V_{\\text {out }}}{V_{\\text {in }}}(s) & =\\frac{\\frac{1}{C_{1} s}}{\\frac{1}{C_{1} s}+R_{1}}  \\tag{11.10}\\\\\n& =\\frac{1}{R_{1} C_{1} s+1} . \\tag{11.11}\n\\end{align*}\n$$\n\n[^6]The frequency response is determined by substituting $s$ with $j \\omega$ and calculating the magnitude:\n\n$$\n\\begin{equation*}\n|H(s=j \\omega)|=\\frac{1}{\\sqrt{R_{1}^{2} C_{1}^{2} \\omega^{2}+1}} \\tag{11.12}\n\\end{equation*}\n$$\n\nThe -3 dB bandwidth is $1 /\\left(R_{1} C_{1}\\right)$. The circuit's response to a step input $V_{0} u(t)$ is\n\n$$\n\\begin{equation*}\nV_{\\text {out }}(t)=V_{0}\\left(1-\\exp \\frac{-t}{R_{1} C_{1}}\\right) u(t) \\tag{11.13}\n\\end{equation*}\n$$\n\nThe relationship between Eqs. (11.12) and (11.13) is that as $R_{1} C_{1}$ increases, the bandwidth decreases and the step response slows down. Figure 11.8 illustrates this, showing that a narrower bandwidth results in a slower time response. This explains the effect in Fig. 11.3(b): the signal's inability to rapidly transition from low (white) to high (black) causes intermediate levels (shades of gray), creating \"fuzzy\" edges.\nimage_name:Figure 11.8\ndescription:Figure 11.8 presents a Bode plot of the magnitude response \\(|H|\\) versus frequency \\(f\\). The vertical axis is dimensionless \\(|H|\\), and the horizontal axis is frequency \\(f\\) in hertz (Hz), using a logarithmic scale.\n\nThe plot shows how the system's frequency response changes with increasing \\(R_1 C_1\\). Initially, \\(|H|\\) is constant at 1.0, indicating no attenuation at low frequencies. As frequency increases, \\(|H|\\) decreases, characteristic of a low-pass filter.\n\nThree lines represent different \\(R_1 C_1\\) values. Higher \\(R_1 C_1\\) results in a lower cutoff frequency and narrower bandwidth. The solid black line shows the steepest decline and narrowest bandwidth for the highest \\(R_1 C_1\\). The dashed black and gray lines represent lower \\(R_1 C_1\\) values, with the gray line having the widest bandwidth and least steep decline.\n\nKey features include the initial flat response at low frequencies and the subsequent decline at higher frequencies, illustrating the trade-off between bandwidth and time response. The graph highlights how increasing \\(R_1 C_1\\) affects the system's ability to respond quickly to input changes, as seen by the slower roll-off and reduced bandwidth.\n\n(a)\nimage_name:(a)\ndescription:This graph shows the time-domain waveform of the output voltage \\( V_{out} \\) over time \\( t \\), illustrating the effect of different \\( R_1 C_1 \\) values on the system's response. The horizontal axis is time \\( t \\), and the vertical axis is output voltage \\( V_{out} \\).\n\nThree curves are displayed:\n\n1. **Solid Black Line**: Represents a higher \\( R_1 C_1 \\) value, showing a slower, more gradual rise to the final value, indicating a longer time constant.\n2. **Dashed Black Line**: Represents a moderate \\( R_1 C_1 \\) value, with a quicker response than the solid black line but slower than the gray line.\n3. **Gray Line**: Represents a lower \\( R_1 C_1 \\) value, showing the fastest rise time and quickest stabilization, indicating the widest bandwidth and least steep decline.\n\nThe graph demonstrates the trade-off between bandwidth and time response. As \\( R_1 C_1 \\) increases, the system's response to input changes slows down, resulting in a slower roll-off and reduced bandwidth. The initial flat response at low frequencies transitions to a steeper decline at higher frequencies, highlighting this trade-off.\n\n(b)\n\nFigure 11.8\nExercise At what frequency does $|H|$ drop by a factor of two?"
},
{
    "text": "The process of deriving $|H(j \\omega)|$ from $H(s)$ and plotting it can be quite laborious. Consequently, we frequently employ Bode's rules (approximations) to swiftly generate $|H(j \\omega)|$. The guidelines for $|H(j \\omega)|$ according to Bode are as follows:\n\n- When $\\omega$ crosses each pole frequency, the slope of $|H(j \\omega)|$ drops by $20 \\mathrm{~dB} /$ dec. (A slope of $20 \\mathrm{~dB} /$ dec signifies a tenfold variation in $H$ for a tenfold rise in frequency);\n- As $\\omega$ surpasses each zero frequency, the slope of $|H(j \\omega)|$ rises by $20 \\mathrm{~dB} / \\mathrm{dec} .^{5}$\n\nExample\n\n11.7\n\nCreate the Bode plot of $|H(j \\omega)|$ for the CS stage shown in Fig. 11.5(a).\n\nSolution Equation (11.5) specifies a pole frequency of\n\n$$\n\\begin{equation*}\n\\left|\\omega_{p 1}\\right|=\\frac{1}{R_{D} C_{L}} \\tag{11.14}\n\\end{equation*}\n$$\n\n[^7]The magnitude starts at $g_{m} R_{D}$ at low frequencies and stays flat until $\\omega=\\left|\\omega_{p 1}\\right|$. At this juncture, the slope shifts from zero to $-20 \\mathrm{~dB} / \\mathrm{dec}$. Fig. 11.9 depicts the outcome. Unlike Fig. 11.5(b), the Bode approximation overlooks the 3 dB roll-off at the pole frequency—but significantly streamlines the calculations. As Eq. (11.6) shows, for $R_{D}^{2} C_{L}^{2} \\omega^{2} \\gg 1$, Bode's rule offers a reliable approximation.\n\nimage_name:Figure 11.9\ndescription:The graph in Fig. 11.9 presents a Bode plot depicting the magnitude response of a system. It is a logarithmic plot with the x-axis labeled 'log(ω)', representing the logarithm of frequency (ω), and the y-axis labeled '20 log |V_out/V_in|', indicating the magnitude of the output-to-input voltage ratio in decibels (dB).\n\nGeneral Behavior and Trends:\n- **Flat Section:** The plot initiates with a flat segment where the magnitude remains constant at \\( g_m R_D \\) for low frequencies.\n- **Break Point:** At the frequency \\( \\omega_{p1} \\), the plot exhibits a clear break point marking a change in behavior.\n- **Slope Alteration:** Beyond \\( \\omega_{p1} \\), the plot's slope transitions to \\(-20 \\text{ dB/decade}\\), signifying a reduction in magnitude with rising frequency.\n\nKey Characteristics and Technical Aspects:\n- **Initial Gain:** The initial flat part of the plot signifies a consistent gain equal to \\( g_m R_D \\).\n- **Pole Frequency:** The frequency \\( \\omega_{p1} \\) is highlighted on the plot as the point of slope change.\n- **Slope:** Post the pole frequency, the plot declines at a rate of \\(-20 \\text{ dB/decade}\\), typical for a single-pole system.\n\nMarkings and Specific Data Points:\n- The plot distinctly marks the transition at \\( \\omega_{p1} \\) with a dashed vertical line.\n- The slope of \\(-20 \\text{ dB/decade}\\) is noted on the plot to emphasize the magnitude decrease rate.\n\nThis Bode plot offers a simplified representation of the system's frequency response, omitting minor nuances like the 3 dB roll-off at the pole frequency, a common feature in Bode approximations.\n\nFigure 11.9\nExercise Develop the Bode plot for $g_{m}=(150 \\Omega)^{-1}, R_{D}=2 \\mathrm{k} \\Omega$, and $C_{L}=100 \\mathrm{fF}$."
},
{
    "text": "The process of deriving $|H(j \\omega)|$ from $H(s)$ and plotting it can be quite laborious. Consequently, we frequently employ Bode's rules (approximations) to swiftly create $|H(j \\omega)|$. The guidelines for $|H(j \\omega)|$ according to Bode are as follows:\n\n- When $\\omega$ crosses each pole frequency, the slope of $|H(j \\omega)|$ drops by $20 \\mathrm{~dB} /$ dec. (A slope of $20 \\mathrm{~dB} /$ dec signifies a tenfold variation in $H$ for a tenfold rise in frequency);\n- As $\\omega$ traverses each zero frequency, the slope of $|H(j \\omega)|$ rises by $20 \\mathrm{~dB} / \\mathrm{dec} .^{5}$\n\nExample\n\n11.7\n\nCreate the Bode plot of $|H(j \\omega)|$ for the CS stage shown in Fig. 11.5(a).\n\nSolution Equation (11.5) specifies a pole frequency of\n\n$$\n\\begin{equation*}\n\\left|\\omega_{p 1}\\right|=\\frac{1}{R_{D} C_{L}} \\tag{11.14}\n\\end{equation*}\n$$\n\n[^7]The magnitude starts at $g_{m} R_{D}$ at low frequencies and stays level until $\\omega=\\left|\\omega_{p 1}\\right|$. At this juncture, the slope shifts from zero to $-20 \\mathrm{~dB} / \\mathrm{dec}$. Figure 11.9 depicts the outcome. Unlike Fig. 11.5(b), the Bode approximation overlooks the 3 dB roll-off at the pole frequency—but it significantly eases the calculations. As Eq. (11.6) shows, for $R_{D}^{2} C_{L}^{2} \\omega^{2} \\gg 1$, Bode's rule offers a reliable approximation.\nimage_name:Figure 11.9\ndescription:The graph in Figure 11.9 is a Bode plot depicting the magnitude response of a system. It is a logarithmic plot with the x-axis labeled 'log(ω)', representing the logarithm of frequency (ω), and the y-axis labeled '20 log |V_out/V_in|', indicating the magnitude of the output-to-input voltage ratio in decibels (dB).\n\nGeneral Behavior and Trends:\n- **Flat Region:** The plot initiates with a flat segment where the magnitude remains steady at \\( g_m R_D \\) for low frequencies.\n- **Break Point:** At the frequency \\( \\omega_{p1} \\), the plot exhibits a clear break point marking a change in behavior.\n- **Slope Change:** Past \\( \\omega_{p1} \\), the plot's slope transitions to \\(-20 \\text{ dB/decade}\\), signifying a decline in magnitude with rising frequency.\n\nKey Characteristics and Technical Elements:\n- **Initial Magnitude:** The initial flat portion of the plot signifies that the gain is constant and equals \\( g_m R_D \\).\n- **Pole Frequency:** The frequency \\( \\omega_{p1} \\) is designated on the plot as the point of slope change.\n- **Slope:** Following the pole frequency, the plot decreases at a rate of \\(-20 \\text{ dB/decade}\\), typical for a single-pole system.\n\nMarkings and Specific Data Points:\n- The plot distinctly shows the transition at \\( \\omega_{p1} \\) with a dashed vertical line marking this frequency.\n- The slope of \\(-20 \\text{ dB/decade}\\) is noted on the plot to emphasize the rate of magnitude decrease.\n\nThis Bode plot offers a simplified representation of the system's frequency response, omitting minor aspects like the 3 dB roll-off at the pole frequency, which is common in Bode approximations.\n\nFigure 11.9\nExercise Generate the Bode plot for $g_{m}=(150 \\Omega)^{-1}, R_{D}=2 \\mathrm{k} \\Omega$, and $C_{L}=100 \\mathrm{fF}$."
},
{
    "text": "The process of deriving $|H(j \\omega)|$ from $H(s)$ and plotting it can be quite laborious. Consequently, we frequently employ Bode's rules (approximations) to swiftly generate $|H(j \\omega)|$. The guidelines for $|H(j \\omega)|$ according to Bode are as follows:\n\n- When $\\omega$ crosses each pole frequency, the slope of $|H(j \\omega)|$ drops by $20 \\mathrm{~dB} /$ dec. (A slope of $20 \\mathrm{~dB} /$ dec signifies a tenfold variation in $H$ for a tenfold rise in frequency);\n- As $\\omega$ traverses each zero frequency, the slope of $|H(j \\omega)|$ rises by $20 \\mathrm{~dB} / \\mathrm{dec} .^{5}$\n\nExample\n\n11.7\n\nCreate the Bode plot of $|H(j \\omega)|$ for the CS stage shown in Fig. 11.5(a).\n\nSolution Equation (11.5) specifies a pole frequency of\n\n$$\n\\begin{equation*}\n\\left|\\omega_{p 1}\\right|=\\frac{1}{R_{D} C_{L}} \\tag{11.14}\n\\end{equation*}\n$$\n\n[^7]The magnitude starts at $g_{m} R_{D}$ at low frequencies and stays level until $\\omega=\\left|\\omega_{p 1}\\right|$. At this juncture, the slope shifts from zero to $-20 \\mathrm{~dB} / \\mathrm{dec}$. Figure 11.9 depicts the outcome. Unlike Fig. 11.5(b), the Bode approximation overlooks the 3 dB roll-off at the pole frequency—yet it significantly streamlines the calculations. As Eq. (11.6) demonstrates, for $R_{D}^{2} C_{L}^{2} \\omega^{2} \\gg 1$, Bode's rule offers a reliable approximation.\nimage_name:Figure 11.9\ndescription:The graph in Figure 11.9 is a Bode plot depicting the magnitude response of a system. It is a logarithmic plot with the x-axis labeled 'log(ω)', representing the logarithm of frequency (ω), and the y-axis labeled '20 log |V_out/V_in|', indicating the magnitude of the output-to-input voltage ratio in decibels (dB).\n\nGeneral Behavior and Trends:\n- **Flat Section:** The plot initiates with a flat segment where the magnitude remains steady at \\( g_m R_D \\) for low frequencies.\n- **Break Point:** At the frequency \\( \\omega_{p1} \\), the plot exhibits a clear break point marking a change in behavior.\n- **Slope Alteration:** Beyond \\( \\omega_{p1} \\), the plot's slope transitions to \\(-20 \\text{ dB/decade}\\), signifying a decline in magnitude with rising frequency.\n\nKey Characteristics and Technical Aspects:\n- **Initial Gain:** The initial flat portion of the plot signifies that the gain is constant and equals \\( g_m R_D \\).\n- **Pole Frequency:** The frequency \\( \\omega_{p1} \\) is designated on the plot as the point of slope change.\n- **Slope:** Post the pole frequency, the plot decreases at a rate of \\(-20 \\text{ dB/decade}\\), typical for a single-pole system.\n\nAnnotations and Specific Data Points:\n- The plot distinctly marks the transition at \\( \\omega_{p1} \\) with a dashed vertical line.\n- The slope of \\(-20 \\text{ dB/decade}\\) is noted on the plot to emphasize the magnitude decrease rate.\n\nThis Bode plot offers a simplified representation of the system's frequency response, omitting minor nuances like the 3 dB roll-off at the pole frequency, which is characteristic of Bode approximations.\n\nFigure 11.9\nExercise Generate the Bode plot for $g_{m}=(150 \\Omega)^{-1}, R_{D}=2 \\mathrm{k} \\Omega$, and $C_{L}=100 \\mathrm{fF}$."
},
{
    "text": "The process of deriving $|H(j \\omega)|$ from $H(s)$ and plotting it can be quite laborious. Consequently, we frequently employ Bode's rules (approximations) to swiftly construct $|H(j \\omega)|$. The guidelines for $|H(j \\omega)|$ according to Bode are as follows:\n\n- When $\\omega$ crosses each pole frequency, the slope of $|H(j \\omega)|$ decreases by $20 \\mathrm{~dB} /$ dec. (A slope of $20 \\mathrm{~dB} /$ dec signifies a tenfold variation in $H$ for a tenfold rise in frequency);\n- As $\\omega$ traverses each zero frequency, the slope of $|H(j \\omega)|$ increases by $20 \\mathrm{~dB} / \\mathrm{dec} .^{5}$\n\nExample\n\n11.7\n\nCreate the Bode plot of $|H(j \\omega)|$ for the CS stage shown in Fig. 11.5(a).\n\nSolution Equation (11.5) specifies a pole frequency of\n\n$$\n\\begin{equation*}\n\\left|\\omega_{p 1}\\right|=\\frac{1}{R_{D} C_{L}} \\tag{11.14}\n\\end{equation*}\n$$\n\n[^7]The magnitude starts at $g_{m} R_{D}$ at low frequencies and stays level until $\\omega=\\left|\\omega_{p 1}\\right|$. At this juncture, the slope shifts from zero to $-20 \\mathrm{~dB} / \\mathrm{dec}$. Figure 11.9 depicts the outcome. Unlike Fig. 11.5(b), the Bode approximation overlooks the 3 dB roll-off at the pole frequency—but it significantly eases the calculations. As shown by Eq. (11.6), for $R_{D}^{2} C_{L}^{2} \\omega^{2} \\gg 1$, Bode's rule offers a reliable approximation.\nimage_name:Figure 11.9\ndescription:The graph in Figure 11.9 is a Bode plot depicting the magnitude response of a system. It is a logarithmic plot with the x-axis labeled as 'log(ω)', representing the logarithm of frequency (ω), and the y-axis labeled as '20 log |V_out/V_in|', denoting the magnitude of the output-to-input voltage ratio in decibels (dB).\n\nGeneral Behavior and Trends:\n- **Flat Section:** The plot initiates with a flat segment where the magnitude remains constant at \\( g_m R_D \\) for low frequencies.\n- **Break Point:** At the frequency \\( \\omega_{p1} \\), the plot exhibits a clear break point marking a change in behavior.\n- **Slope Alteration:** Beyond \\( \\omega_{p1} \\), the plot's slope transitions to \\(-20 \\text{ dB/decade}\\), signifying a decline in magnitude with rising frequency.\n\nKey Characteristics and Technical Aspects:\n- **Initial Magnitude:** The initial flat portion of the plot signifies that the gain is steady and equal to \\( g_m R_D \\).\n- **Pole Frequency:** The frequency \\( \\omega_{p1} \\) is designated on the plot as the point of slope change.\n- **Slope:** Post the pole frequency, the plot decreases at a rate of \\(-20 \\text{ dB/decade}\\), typical for a single-pole system.\n\nMarkings and Specific Data Points:\n- The plot distinctly marks the transition at \\( \\omega_{p1} \\) with a dashed vertical line indicating this frequency.\n- The slope of \\(-20 \\text{ dB/decade}\\) is noted on the plot to emphasize the rate of magnitude decrease.\n\nThis Bode plot offers a simplified perspective of the system's frequency response, omitting minor nuances like the 3 dB roll-off at the pole frequency, which is common in Bode approximations.\n\nFigure 11.9\nExercise Generate the Bode plot for $g_{m}=(150 \\Omega)^{-1}, R_{D}=2 \\mathrm{k} \\Omega$, and $C_{L}=100 \\mathrm{fF}$."
},
{
    "text": "The process of deriving $|H(j \\omega)|$ from $H(s)$ and plotting it can be quite laborious. Consequently, we frequently employ Bode's rules (approximations) to quickly construct $|H(j \\omega)|$. The guidelines for $|H(j \\omega)|$ according to Bode are as follows:\n\n- When $\\omega$ crosses each pole frequency, the slope of $|H(j \\omega)|$ decreases by $20 \\mathrm{~dB} /$ dec. (A slope of $20 \\mathrm{~dB} /$ dec signifies a tenfold change in $H$ for a tenfold increase in frequency);\n- As $\\omega$ surpasses each zero frequency, the slope of $|H(j \\omega)|$ increases by $20 \\mathrm{~dB} / \\mathrm{dec} .^{5}$\n\nExample\n\n11.7\n\nCreate the Bode plot of $|H(j \\omega)|$ for the CS stage shown in Fig. 11.5(a).\n\nSolution Equation (11.5) reveals a pole frequency of\n\n$$\n\\begin{equation*}\n\\left|\\omega_{p 1}\\right|=\\frac{1}{R_{D} C_{L}} \\tag{11.14}\n\\end{equation*}\n$$\n\n[^7]The magnitude starts at $g_{m} R_{D}$ at low frequencies and stays flat until $\\omega=\\left|\\omega_{p 1}\\right|$. At this juncture, the slope shifts from zero to $-20 \\mathrm{~dB} / \\mathrm{dec}$. Figure 11.9 depicts the outcome. Unlike Fig. 11.5(b), the Bode approximation overlooks the 3 dB roll-off at the pole frequency—but it significantly simplifies the calculations. As shown by Eq. (11.6), for $R_{D}^{2} C_{L}^{2} \\omega^{2} \\gg 1$, Bode's rule offers a reliable approximation.\nimage_name:Figure 11.9\ndescription:The graph in Figure 11.9 is a Bode plot illustrating the magnitude response of a system. It is a logarithmic plot with the x-axis labeled 'log(ω)', representing the logarithm of frequency (ω), and the y-axis labeled '20 log |V_out/V_in|', depicting the magnitude of the output-to-input voltage ratio in decibels (dB).\n\nOverall Behavior and Trends:\n- **Flat Region:** The plot initiates with a flat segment where the magnitude remains constant at \\( g_m R_D \\) for low frequencies.\n- **Break Point:** At the frequency \\( \\omega_{p1} \\), the plot exhibits a clear break point marking a change in behavior.\n- **Slope Change:** Beyond \\( \\omega_{p1} \\), the plot's slope transitions to \\(-20 \\text{ dB/decade}\\), signifying a decline in magnitude with rising frequency.\n\nKey Features and Technical Details:\n- **Initial Magnitude:** The initial flat portion of the plot signifies that the gain is steady and equal to \\( g_m R_D \\).\n- **Pole Frequency:** The frequency \\( \\omega_{p1} \\) is designated on the plot as the point of slope change.\n- **Slope:** Following the pole frequency, the plot decreases at a rate of \\(-20 \\text{ dB/decade}\\), typical for a single-pole system.\n\nAnnotations and Specific Data Points:\n- The plot distinctly marks the transition at \\( \\omega_{p1} \\) with a dashed vertical line.\n- The slope of \\(-20 \\text{ dB/decade}\\) is noted on the plot to emphasize the magnitude decrease rate.\n\nThis Bode plot offers a simplified depiction of the system's frequency response, omitting minor aspects like the 3 dB roll-off at the pole frequency, which is common in Bode approximations.\n\nFigure 11.9\nExercise Develop the Bode plot for $g_{m}=(150 \\Omega)^{-1}, R_{D}=2 \\mathrm{k} \\Omega$, and $C_{L}=100 \\mathrm{fF}$."
},
{
    "text": "Obtaining $|H(j \\omega)|$ from $H(s)$ and plotting it can be quite laborious. Consequently, we frequently employ Bode's rules (approximations) to quickly construct $|H(j \\omega)|$. The guidelines for $|H(j \\omega)|$ according to Bode are:\n\n- When $\\omega$ crosses each pole frequency, the slope of $|H(j \\omega)|$ drops by $20 \\mathrm{~dB} /$ dec. (A slope of $20 \\mathrm{~dB} /$ dec signifies a tenfold change in $H$ for a tenfold rise in frequency);\n- As $\\omega$ passes each zero frequency, the slope of $|H(j \\omega)|$ rises by $20 \\mathrm{~dB} / \\mathrm{dec} .^{5}$\n\nExample\n\n11.7\n\nCreate the Bode plot of $|H(j \\omega)|$ for the CS stage shown in Fig. 11.5(a).\n\nSolution Equation (11.5) specifies a pole frequency of\n\n$$\n\\begin{equation*}\n\\left|\\omega_{p 1}\\right|=\\frac{1}{R_{D} C_{L}} \\tag{11.14}\n\\end{equation*}\n$$\n\n[^7]The magnitude starts at $g_{m} R_{D}$ at low frequencies and stays flat until $\\omega=\\left|\\omega_{p 1}\\right|$. At this juncture, the slope shifts from zero to $-20 \\mathrm{~dB} / \\mathrm{dec}$. Figure 11.9 depicts the outcome. Unlike Fig. 11.5(b), the Bode approximation overlooks the 3 dB roll-off at the pole frequency—but significantly eases the calculations. As Eq. (11.6) shows, for $R_{D}^{2} C_{L}^{2} \\omega^{2} \\gg 1$, Bode's rule offers a reliable approximation.\nimage_name:Figure 11.9\ndescription:Figure 11.9 presents a Bode plot illustrating the magnitude response of a system. It is a logarithmic graph with the x-axis labeled 'log(ω)', representing the logarithm of frequency (ω), and the y-axis labeled '20 log |V_out/V_in|', depicting the magnitude of the output-to-input voltage ratio in decibels (dB).\n\nGeneral Characteristics and Trends:\n- **Flat Section:** The plot initiates with a flat segment where the magnitude remains steady at \\( g_m R_D \\) for low frequencies.\n- **Break Point:** At the frequency \\( \\omega_{p1} \\), the plot exhibits a clear break point marking a change in behavior.\n- **Slope Alteration:** Past \\( \\omega_{p1} \\), the plot's slope transitions to \\(-20 \\text{ dB/decade}\\), signifying a decline in magnitude with rising frequency.\n\nNotable Aspects and Technical Information:\n- **Initial Gain:** The initial flat portion of the plot signifies a constant gain equal to \\( g_m R_D \\).\n- **Pole Frequency:** The frequency \\( \\omega_{p1} \\) is identified on the plot as the point of slope change.\n- **Slope:** Post the pole frequency, the plot decreases at a rate of \\(-20 \\text{ dB/decade}\\), typical for a single-pole system.\n\nMarkings and Specific Data Points:\n- The plot distinctly marks the transition at \\( \\omega_{p1} \\) with a dashed vertical line.\n- The \\(-20 \\text{ dB/decade}\\) slope is annotated on the plot to emphasize the magnitude decrease rate.\n\nThis Bode plot offers a simplified depiction of the system's frequency response, omitting minor aspects like the 3 dB roll-off at the pole frequency, which is common in Bode approximations.\n\nFigure 11.9\nExercise Generate the Bode plot for $g_{m}=(150 \\Omega)^{-1}, R_{D}=2 \\mathrm{k} \\Omega$, and $C_{L}=100 \\mathrm{fF}$."
},
{
    "text": "The process of deriving $|H(j \\omega)|$ from $H(s)$ and plotting it can be quite laborious. Consequently, we frequently employ Bode's rules (approximations) to swiftly create $|H(j \\omega)|$. The Bode rules for $|H(j \\omega)|$ are outlined below:\n\n- When $\\omega$ crosses each pole frequency, the slope of $|H(j \\omega)|$ drops by $20 \\mathrm{~dB} /$ dec. (A slope of $20 \\mathrm{~dB} /$ dec signifies a tenfold variation in $H$ for a tenfold rise in frequency);\n- As $\\omega$ traverses each zero frequency, the slope of $|H(j \\omega)|$ rises by $20 \\mathrm{~dB} / \\mathrm{dec} .^{5}$\n\nExample\n\n11.7\n\nGenerate the Bode plot of $|H(j \\omega)|$ for the CS stage shown in Fig. 11.5(a).\n\nSolution Equation (11.5) specifies a pole frequency of\n\n$$\n\\begin{equation*}\n\\left|\\omega_{p 1}\\right|=\\frac{1}{R_{D} C_{L}} \\tag{11.14}\n\\end{equation*}\n$$\n\n[^7]The magnitude starts at $g_{m} R_{D}$ at low frequencies and stays level until $\\omega=\\left|\\omega_{p 1}\\right|$. At this juncture, the slope shifts from zero to $-20 \\mathrm{~dB} / \\mathrm{dec}$. Figure 11.9 depicts the outcome. Unlike Fig. 11.5(b), the Bode approximation overlooks the 3 dB roll-off at the pole frequency—but it significantly eases the calculations. As shown by Eq. (11.6), for $R_{D}^{2} C_{L}^{2} \\omega^{2} \\gg 1$, Bode's rule offers a reliable approximation.\nimage_name:Figure 11.9\ndescription:The graph in Figure 11.9 is a Bode plot depicting the magnitude response of a system. It is a logarithmic plot with the x-axis labeled as 'log(ω)', representing the logarithm of frequency (ω), and the y-axis labeled as '20 log |V_out/V_in|', showing the magnitude of the output-to-input voltage ratio in decibels (dB).\n\nGeneral Behavior and Trends:\n- **Flat Region:** The plot starts with a flat segment where the magnitude remains steady at \\( g_m R_D \\) for low frequencies.\n- **Break Point:** At the frequency \\( \\omega_{p1} \\), the plot exhibits a clear break point where the behavior alters.\n- **Slope Change:** Past \\( \\omega_{p1} \\), the plot's slope shifts to \\(-20 \\text{ dB/decade}\\), signifying a reduction in magnitude with increasing frequency.\n\nKey Characteristics and Technical Aspects:\n- **Initial Magnitude:** The initial flat part of the plot signifies that the gain is constant and equal to \\( g_m R_D \\).\n- **Pole Frequency:** The frequency \\( \\omega_{p1} \\) is denoted on the plot as the point of slope change.\n- **Slope:** Following the pole frequency, the plot declines at a rate of \\(-20 \\text{ dB/decade}\\), typical for a single-pole system.\n\nAnnotations and Specific Data Points:\n- The plot distinctly marks the transition at \\( \\omega_{p1} \\) with a dashed vertical line indicating this frequency.\n- The slope of \\(-20 \\text{ dB/decade}\\) is noted on the plot to emphasize the rate of magnitude decrease.\n\nThis Bode plot offers a simplified representation of the system's frequency response, omitting minor nuances like the 3 dB roll-off at the pole frequency, which is common in Bode approximations.\n\nFigure 11.9\nExercise Create the Bode plot for $g_{m}=(150 \\Omega)^{-1}, R_{D}=2 \\mathrm{k} \\Omega$, and $C_{L}=100 \\mathrm{fF}$."
},
{
    "text": "Obtaining $|H(j \\omega)|$ from $H(s)$ and plotting it can be quite cumbersome. Consequently, we frequently employ Bode's rules (approximations) to quickly construct $|H(j \\omega)|$. The guidelines for $|H(j \\omega)|$ according to Bode are:\n\n- When $\\omega$ crosses each pole frequency, the slope of $|H(j \\omega)|$ drops by $20 \\mathrm{~dB} /$ dec. (A slope of $20 \\mathrm{~dB} /$ dec signifies a tenfold change in $H$ for a tenfold increase in frequency);\n- As $\\omega$ traverses each zero frequency, the slope of $|H(j \\omega)|$ rises by $20 \\mathrm{~dB} / \\mathrm{dec} .^{5}$\n\nExample\n\n11.7\n\nCreate the Bode plot of $|H(j \\omega)|$ for the CS stage shown in Fig. 11.5(a).\n\nSolution Equation (11.5) specifies a pole frequency of\n\n$$\n\\begin{equation*}\n\\left|\\omega_{p 1}\\right|=\\frac{1}{R_{D} C_{L}} \\tag{11.14}\n\\end{equation*}\n$$\n\n[^7]The magnitude starts at $g_{m} R_{D}$ at low frequencies and stays flat until $\\omega=\\left|\\omega_{p 1}\\right|$. At this juncture, the slope shifts from zero to $-20 \\mathrm{~dB} / \\mathrm{dec}$. Figure 11.9 depicts the outcome. Unlike Fig. 11.5(b), the Bode approximation overlooks the 3 dB roll-off at the pole frequency—but it significantly eases the calculations. As Eq. (11.6) shows, for $R_{D}^{2} C_{L}^{2} \\omega^{2} \\gg 1$, Bode's rule offers a reliable approximation.\n\nimage_name:Figure 11.9\ndescription:The graph in Figure 11.9 is a Bode plot depicting the magnitude response of a system. It is a logarithmic plot with the x-axis labeled 'log(ω)', representing the logarithm of frequency (ω), and the y-axis labeled '20 log |V_out/V_in|', indicating the magnitude of the output-to-input voltage ratio in decibels (dB).\n\nOverall Behavior and Trends:\n- **Flat Region:** The plot starts with a flat section where the magnitude remains constant at \\( g_m R_D \\) for low frequencies.\n- **Break Point:** At the frequency \\( \\omega_{p1} \\), the plot exhibits a clear break point marking a change in behavior.\n- **Slope Change:** Beyond \\( \\omega_{p1} \\), the plot's slope transitions to \\(-20 \\text{ dB/decade}\\), signifying a decrease in magnitude with rising frequency.\n\nKey Features and Technical Details:\n- **Initial Magnitude:** The initial flat segment shows a constant gain equal to \\( g_m R_D \\).\n- **Pole Frequency:** The frequency \\( \\omega_{p1} \\) is identified on the plot as the point of slope change.\n- **Slope:** Post the pole frequency, the plot declines at a rate of \\(-20 \\text{ dB/decade}\\), typical for a single-pole system.\n\nAnnotations and Specific Data Points:\n- The plot distinctly marks the transition at \\( \\omega_{p1} \\) with a dashed vertical line.\n- The \\(-20 \\text{ dB/decade}\\) slope is annotated to emphasize the magnitude decrease rate.\n\nThis Bode plot offers a simplified depiction of the system's frequency response, omitting finer details like the 3 dB roll-off at the pole frequency, which is common in Bode approximations.\n\nFigure 11.9\nExercise Construct the Bode plot for $g_{m}=(150 \\Omega)^{-1}, R_{D}=2 \\mathrm{k} \\Omega$, and $C_{L}=100 \\mathrm{fF}$."
},
{
    "text": "The rephrased text:\n\n```\nThe poles of a circuit's transfer function are crucial for understanding its frequency response. Designers must be adept at intuitively pinpointing these poles to identify the circuit components that act as \"speed bottlenecks.\"\n\nThe CS topology examined in Example 11.4 exemplifies how to identify poles through inspection. Equation (11.5) indicates that the pole frequency is determined by the inverse of the product of the total resistance and total capacitance between the output node and ground. This principle is broadly applicable and can be summarized as: if node $j$ in the signal path has a small-signal resistance of $R_{j}$ to ground and a capacitance of $C_{j}$ to ground, it contributes a pole of magnitude $\\left(R_{j} C_{j}\\right)^{-1}$ to the transfer function.\n\nDid you know?\n\nBode's rules epitomize the adage \"necessity is the mother of invention.\" In the 1930s, while working on electronic filters and equalizers at Bell Labs, Hendrik Bode, like his contemporaries, grappled with the challenge of assessing the stability of complex circuits and systems. Lacking computers or even calculators, engineers of that period had to rely on extensive manual calculations. Bode developed his approximations for frequency response and, as detailed in Chapter 12, a straightforward method for analyzing the stability of feedback systems.\n\nDetermine the poles of the circuit depicted in Fig. 11.10, assuming $\\lambda=0$.\nimage_name:Figure 11.10\ndescription:\n[\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: g1}\nname: Cin, type: Capacitor, value: Cin, ports: {Np: g1, Nn: GND}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: g1}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\n]\nextrainfo:The circuit is a common-source amplifier featuring an NMOS transistor M1. It has an input pole governed by RS and Cin, and an output pole governed by RD and CL.\n\nFigure 11.10\n\nSolution By setting $V_{i n}$ to zero, we observe that the gate of $M_{1}$ is subject to a resistance of $R_{S}$ and a capacitance of $C_{i n}$ to ground. Consequently,\n\n$$\n\\begin{equation*}\n\\left|\\omega_{p 1}\\right|=\\frac{1}{R_{S} C_{i n}} . \\tag{11.15}\n\\end{equation*}\n$$\n\nWe can term $\\omega_{p 1}$ the \"input pole\" since it originates from the input network. Similarly, the \"output pole\" is determined by\n\n$$\n\\begin{equation*}\n\\left|\\omega_{p 2}\\right|=\\frac{1}{R_{D} C_{L}} \\tag{11.16}\n\\end{equation*}\n$$\n\nGiven that the low-frequency gain of the circuit is $-g_{m} R_{D}$, the magnitude of the transfer function can be expressed as:\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text {out }}}{V_{\\text {in }}}\\right|=\\frac{g_{m} R_{D}}{\\sqrt{\\left(1+\\omega^{2} / \\omega_{p 1}^{2}\\right)\\left(1+\\omega^{2} \\omega_{p 2}^{2}\\right)}} . \\tag{11.17}\n\\end{equation*}\n$$\n\nExercise If $\\omega_{p 1}=\\omega_{p 2}$, at what frequency does the gain decrease by 3 dB?\n\nExample Calculate the poles of the circuit shown in Fig. 11.11, assuming $\\lambda=0$.\n\n11.9\nimage_name:Figure 11.11\ndescription:\n[\nname: M1, type: NMOS, ports: {S: S1, D: Vout, G: Vb}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: S1}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\nname: Cin, type: Capacitor, value: Cin, ports: {Np: S1, Nn: GND}\n]\nextrainfo:The circuit is a common-source amplifier with an NMOS transistor M1. RD serves as the load resistor, RS as the source resistor, and CL as the load capacitor. Cin is the input coupling capacitor, and the gate of M1 is biased with Vb.\n\nFigure 11.11\nSolution With $V_{i n}=0$, the small-signal resistance at the source of $M_{1}$ is $R_{S} \\|\\left(1 / g_{m}\\right)$, resulting in a pole at\n\n$$\n\\begin{equation*}\n\\omega_{p 1}=\\frac{1}{\\left(R_{S} \\| \\frac{1}{g_{m}}\\right) C_{i n}} \\tag{11.18}\n\\end{equation*}\n$$\n\nThe output pole is given by $\\omega_{p 2}=\\left(R_{D} C_{L}\\right)^{-1}$.\n\nExercise\nHow should $R_{D}$ be chosen so that the output pole frequency is ten times the input pole frequency?\n\nReaders might question how the aforementioned technique can be applied when a node is burdened with a \"floating\" capacitor, i.e., a capacitor whose other terminal is also connected to a node in the signal path (Fig. 11.12). Generally, this technique is not feasible, and the circuit's equations must be written to derive the transfer function. However, \"Miller's theorem\" offers an approximation that can simplify the analysis in certain scenarios.\nimage_name:Figure 11.12 Circuit with floating capacitor\ndescription:\n[\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: g1}\nname: CF, type: Capacitor, ports: {Np: g1, Nn: Vout}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: g1}\n]\nextrainfo:The circuit includes a floating capacitor CF connected between the input node g1 and the output node Vout. Miller's theorem can be employed to simplify the analysis by converting CF into two grounded capacitors.\n\nFigure 11.12 Circuit with floating capacitor.\n```"
},
{
    "text": "The rephrased text:\n\n```\nThe poles of a circuit's transfer function are crucial for understanding its frequency response. Consequently, designers must be adept at intuitively pinpointing these poles to identify the circuit components that act as \"speed bottlenecks.\"\n\nThe CS topology examined in Example 11.4 exemplifies how poles can be identified through inspection. Equation (11.5) indicates that the pole frequency is determined by the inverse of the product of the total resistance and capacitance observed between the output node and ground. This principle, applicable to numerous circuits, can be generalized: if node $j$ in the signal path has a small-signal resistance of $R_{j}$ to ground and a capacitance of $C_{j}$ to ground, it contributes a pole of magnitude $\\left(R_{j} C_{j}\\right)^{-1}$ to the transfer function.\n\nDid you know?\n\nBode's rules epitomize the adage \"necessity is the mother of invention.\" In the 1930s, while working on electronic filters and equalizers at Bell Labs, Hendrik Bode, like his contemporaries, grappled with the challenge of assessing the stability of intricate circuits and systems. Lacking computers or even calculators, engineers of that period had to rely on extensive manual calculations. Bode developed his approximations for the frequency response and, as detailed in Chapter 12, a straightforward method for analyzing the stability of feedback systems.\n\nDetermine the poles of the circuit depicted in Fig. 11.10, assuming $\\lambda=0$.\nimage_name:Figure 11.10\ndescription:\n[\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: g1}\nname: Cin, type: Capacitor, value: Cin, ports: {Np: g1, Nn: GND}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: g1}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\n]\nextrainfo:The circuit is a common-source amplifier featuring an NMOS transistor M1. It possesses an input pole dictated by RS and Cin, and an output pole governed by RD and CL.\n\nFigure 11.10\n\nSolution By setting $V_{i n}$ to zero, we observe that the gate of $M_{1}$ is subject to a resistance of $R_{S}$ and a capacitance of $C_{i n}$ to ground. Thus,\n\n$$\n\\begin{equation*}\n\\left|\\omega_{p 1}\\right|=\\frac{1}{R_{S} C_{i n}} . \\tag{11.15}\n\\end{equation*}\n$$\n\nWe can refer to $\\omega_{p 1}$ as the \"input pole\" since it originates from the input network. Similarly, the \"output pole\" is determined by\n\n$$\n\\begin{equation*}\n\\left|\\omega_{p 2}\\right|=\\frac{1}{R_{D} C_{L}} \\tag{11.16}\n\\end{equation*}\n$$\n\nGiven that the low-frequency gain of the circuit is $-g_{m} R_{D}$, the magnitude of the transfer function can be expressed as:\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text {out }}}{V_{\\text {in }}}\\right|=\\frac{g_{m} R_{D}}{\\sqrt{\\left(1+\\omega^{2} / \\omega_{p 1}^{2}\\right)\\left(1+\\omega^{2} \\omega_{p 2}^{2}\\right)}} . \\tag{11.17}\n\\end{equation*}\n$$\n\nExercise If $\\omega_{p 1}=\\omega_{p 2}$, at what frequency does the gain decrease by 3 dB?\n\nExample Calculate the poles of the circuit shown in Fig. 11.11, assuming $\\lambda=0$.\n\n11.9\nimage_name:Figure 11.11\ndescription:\n[\nname: M1, type: NMOS, ports: {S: S1, D: Vout, G: Vb}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: S1}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\nname: Cin, type: Capacitor, value: Cin, ports: {Np: S1, Nn: GND}\n]\nextrainfo:The circuit is a common-source amplifier with an NMOS transistor M1. RD serves as the load resistor, RS as the source resistor, and CL as the load capacitor. Cin is the input coupling capacitor, and the gate of M1 is biased with Vb.\n\nFigure 11.11\nSolution With $V_{i n}=0$, the small-signal resistance at the source of $M_{1}$ is $R_{S} \\|\\left(1 / g_{m}\\right)$, resulting in a pole at\n\n$$\n\\begin{equation*}\n\\omega_{p 1}=\\frac{1}{\\left(R_{S} \\| \\frac{1}{g_{m}}\\right) C_{i n}} \\tag{11.18}\n\\end{equation*}\n$$\n\nThe output pole is given by $\\omega_{p 2}=\\left(R_{D} C_{L}\\right)^{-1}$.\n\nExercise\nHow should we select the value of $R_{D}$ to ensure the output pole frequency is ten times the input pole frequency?\n\nReaders might question how the aforementioned technique can be applied when a node is burdened with a \"floating\" capacitor, i.e., a capacitor whose other terminal is also connected to a node in the signal path (Fig. 11.12). Generally, this technique is not feasible, and we must\nimage_name:Figure 11.12 Circuit with floating capacitor\ndescription:\n[\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: g1}\nname: CF, type: Capacitor, ports: {Np: g1, Nn: Vout}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: g1}\n]\nextrainfo:The circuit includes a floating capacitor CF connected between the input node g1 and the output node Vout. Miller's theorem can be employed to simplify the analysis by converting CF into two grounded capacitors.\n\nFigure 11.12 Circuit with floating capacitor.\nformulate the circuit's equations to derive the transfer function. However, \"Miller's theorem\" offers an approximation that can streamline the process in certain scenarios.\n```"
},
{
    "text": "The rephrased text:\n\nThe poles of a circuit's transfer function are pivotal in determining its frequency response. Consequently, designers must intuitively pinpoint these poles to identify the circuit segments that act as \"speed bottlenecks.\"\n\nExample 11.4's CS topology exemplifies the identification of poles through inspection. Equation (11.5) indicates that the pole frequency is the reciprocal of the product of the total resistance and capacitance between the output node and ground. This principle is broadly applicable and can be generalized: if node $j$ in the signal path has a small-signal resistance of $R_{j}$ to ground and a capacitance of $C_{j}$ to ground, it contributes a pole of magnitude $\\left(R_{j} C_{j}\\right)^{-1}$ to the transfer function.\n\nDid you know?\n\nBode's rules epitomize the adage \"necessity is the mother of invention.\" In the 1930s, while working on electronic filters and equalizers at Bell Labs, Hendrik Bode, like his contemporaries, grappled with the challenge of assessing the stability of intricate circuits and systems. Lacking computers or even calculators, engineers of that period had to rely on extensive manual calculations. Bode consequently devised his approximations for frequency response and, as detailed in Chapter 12, a straightforward method for analyzing the stability of feedback systems.\n\nDetermine the poles of the circuit depicted in Fig. 11.10, assuming $\\lambda=0$.\nimage_name:Figure 11.10\ndescription:\n[\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: g1}\nname: Cin, type: Capacitor, value: Cin, ports: {Np: g1, Nn: GND}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: g1}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\n]\nextrainfo:The circuit is a common-source amplifier with an NMOS transistor M1. It features an input pole determined by RS and Cin, and an output pole determined by RD and CL.\n\nFigure 11.10\n\nSolution By setting $V_{i n}$ to zero, we observe that the gate of $M_{1}$ is subjected to a resistance of $R_{S}$ and a capacitance of $C_{i n}$ to ground. Thus,\n\n$$\n\\begin{equation*}\n\\left|\\omega_{p 1}\\right|=\\frac{1}{R_{S} C_{i n}} . \\tag{11.15}\n\\end{equation*}\n$$\n\nWe can term $\\omega_{p 1}$ the \"input pole\" since it originates in the input network. Similarly, the \"output pole\" is expressed as\n\n$$\n\\begin{equation*}\n\\left|\\omega_{p 2}\\right|=\\frac{1}{R_{D} C_{L}} \\tag{11.16}\n\\end{equation*}\n$$\n\nGiven that the low-frequency gain of the circuit equals $-g_{m} R_{D}$, the magnitude of the transfer function can be readily formulated as:\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text {out }}}{V_{\\text {in }}}\\right|=\\frac{g_{m} R_{D}}{\\sqrt{\\left(1+\\omega^{2} / \\omega_{p 1}^{2}\\right)\\left(1+\\omega^{2} \\omega_{p 2}^{2}\\right)}} . \\tag{11.17}\n\\end{equation*}\n$$\n\nExercise If $\\omega_{p 1}=\\omega_{p 2}$, at what frequency does the gain decrease by 3 dB?\n\nExample Calculate the poles of the circuit shown in Fig. 11.11, assuming $\\lambda=0$.\n\n11.9\nimage_name:Figure 11.11\ndescription:\n[\nname: M1, type: NMOS, ports: {S: S1, D: Vout, G: Vb}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: S1}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\nname: Cin, type: Capacitor, value: Cin, ports: {Np: S1, Nn: GND}\n]\nextrainfo:The circuit is a common-source amplifier with NMOS transistor M1. RD serves as the load resistor, RS as the source resistor, and CL as the load capacitor. Cin is the input coupling capacitor, and the gate of M1 is biased with Vb.\n\nFigure 11.11\nSolution With $V_{i n}=0$, the small-signal resistance at the source of $M_{1}$ is $R_{S} \\|\\left(1 / g_{m}\\right)$, resulting in a pole at\n\n$$\n\\begin{equation*}\n\\omega_{p 1}=\\frac{1}{\\left(R_{S} \\| \\frac{1}{g_{m}}\\right) C_{i n}} \\tag{11.18}\n\\end{equation*}\n$$\n\nThe output pole is given by $\\omega_{p 2}=\\left(R_{D} C_{L}\\right)^{-1}$.\n\nExercise\nHow should $R_{D}$ be selected to ensure the output pole frequency is ten times the input pole frequency?\n\nReaders might question how the aforementioned technique can be applied when a node is burdened with a \"floating\" capacitor, i.e., a capacitor whose other terminal is also connected to a node in the signal path (Fig. 11.12). Generally, this technique is not feasible, and the circuit's equations must be written to derive the transfer function. However, \"Miller's theorem\" provides an approximation that can simplify the analysis in certain scenarios.\nimage_name:Figure 11.12 Circuit with floating capacitor\ndescription:\n[\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: g1}\nname: CF, type: Capacitor, ports: {Np: g1, Nn: Vout}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: g1}\n]\nextrainfo:The circuit includes a floating capacitor CF connected between the input node g1 and the output node Vout. Miller's theorem can be applied to simplify the analysis by transforming CF into two grounded capacitors.\n\nFigure 11.12 Circuit with floating capacitor."
},
{
    "text": "The rephrased text:\n\nThe poles of a circuit's transfer function are crucial in determining its frequency response. Consequently, designers must intuitively identify these poles to pinpoint the circuit segments that act as \"speed bottlenecks.\"\n\nThe CS topology examined in Example 11.4 exemplifies the process of identifying poles through inspection. Equation (11.5) indicates that the pole frequency is calculated as the inverse of the product of the total resistance and capacitance observed between the output node and ground. This principle, applicable to numerous circuits, can be generalized: if node $j$ in the signal path exhibits a small-signal resistance of $R_{j}$ to ground and a capacitance of $C_{j}$ to ground, it contributes a pole of magnitude $\\left(R_{j} C_{j}\\right)^{-1}$ to the transfer function.\n\nDid you know?\n\nBode's rules epitomize the adage \"necessity is the mother of invention.\" In the 1930s, while working on electronic filters and equalizers at Bell Labs, Hendrik Bode, like his contemporaries, grappled with the challenge of assessing the stability of intricate circuits and systems. Lacking computers or even calculators, engineers of that period had to rely on extensive manual calculations. In response, Bode devised his approximations for the frequency response and, as detailed in Chapter 12, a straightforward method for analyzing the stability of feedback systems.\n\nDetermine the poles of the circuit depicted in Fig. 11.10, assuming $\\lambda=0$.\nimage_name:Figure 11.10\ndescription:\n[\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: g1}\nname: Cin, type: Capacitor, value: Cin, ports: {Np: g1, Nn: GND}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: g1}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\n]\nextrainfo:The circuit is a common-source amplifier featuring an NMOS transistor M1. It includes an input pole defined by RS and Cin, and an output pole defined by RD and CL.\n\nFigure 11.10\n\nSolution By setting $V_{i n}$ to zero, we observe that the gate of $M_{1}$ is associated with a resistance of $R_{S}$ and a capacitance of $C_{i n}$ to ground. Therefore,\n\n$$\n\\begin{equation*}\n\\left|\\omega_{p 1}\\right|=\\frac{1}{R_{S} C_{i n}} . \\tag{11.15}\n\\end{equation*}\n$$\n\nWe can refer to $\\omega_{p 1}$ as the \"input pole\" since it originates from the input network. Similarly, the \"output pole\" is determined by\n\n$$\n\\begin{equation*}\n\\left|\\omega_{p 2}\\right|=\\frac{1}{R_{D} C_{L}} \\tag{11.16}\n\\end{equation*}\n$$\n\nGiven that the low-frequency gain of the circuit is $-g_{m} R_{D}$, the magnitude of the transfer function can be expressed as:\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text {out }}}{V_{\\text {in }}}\\right|=\\frac{g_{m} R_{D}}{\\sqrt{\\left(1+\\omega^{2} / \\omega_{p 1}^{2}\\right)\\left(1+\\omega^{2} \\omega_{p 2}^{2}\\right)}} . \\tag{11.17}\n\\end{equation*}\n$$\n\nExercise If $\\omega_{p 1}=\\omega_{p 2}$, at what frequency does the gain decrease by 3 dB?\n\nExample Calculate the poles of the circuit shown in Fig. 11.11, assuming $\\lambda=0$.\n\n11.9\nimage_name:Figure 11.11\ndescription:\n[\nname: M1, type: NMOS, ports: {S: S1, D: Vout, G: Vb}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: S1}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\nname: Cin, type: Capacitor, value: Cin, ports: {Np: S1, Nn: GND}\n]\nextrainfo:The circuit is a common-source amplifier with NMOS transistor M1. RD serves as the load resistor, RS as the source resistor, and CL as the load capacitor. Cin is the input coupling capacitor, and the gate of M1 is biased with Vb.\n\nFigure 11.11\nSolution With $V_{i n}=0$, the small-signal resistance at the source of $M_{1}$ is $R_{S} \\|\\left(1 / g_{m}\\right)$, resulting in a pole at\n\n$$\n\\begin{equation*}\n\\omega_{p 1}=\\frac{1}{\\left(R_{S} \\| \\frac{1}{g_{m}}\\right) C_{i n}} \\tag{11.18}\n\\end{equation*}\n$$\n\nThe output pole is given by $\\omega_{p 2}=\\left(R_{D} C_{L}\\right)^{-1}$.\n\nExercise\nHow should we select the value of $R_{D}$ so that the output pole frequency is ten times the input pole frequency?\n\nReaders might question how the aforementioned technique can be applied when a node is burdened with a \"floating\" capacitor, i.e., a capacitor whose other terminal is also connected to a node in the signal path (Fig. 11.12). Generally, this technique is inapplicable, and we must derive the circuit's equations to obtain the transfer function. However, \"Miller's theorem\" provides an approximation that can simplify the analysis in certain scenarios.\nimage_name:Figure 11.12 Circuit with floating capacitor\ndescription:\n[\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: g1}\nname: CF, type: Capacitor, ports: {Np: g1, Nn: Vout}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: g1}\n]\nextrainfo:The circuit includes a floating capacitor CF connected between the input node g1 and the output node Vout. Miller's theorem can be employed to simplify the analysis by converting CF into two grounded capacitors.\n\nFigure 11.12 Circuit with floating capacitor."
},
{
    "text": "The rephrased text:\n\n```\nThe poles of a circuit's transfer function are pivotal in determining its frequency response. Consequently, designers must be adept at intuitively pinpointing these poles to identify the circuit segments that act as \"speed bottlenecks.\"\n\nThe CS topology examined in Example 11.4 exemplifies the process of identifying poles through inspection. Equation (11.5) indicates that the pole frequency is determined by the inverse of the product of the total resistance and total capacitance observed between the output node and ground. This principle, applicable to numerous circuits, can be generalized: if node $j$ in the signal path exhibits a small-signal resistance of $R_{j}$ to ground and a capacitance of $C_{j}$ to ground, it contributes a pole of magnitude $\\left(R_{j} C_{j}\\right)^{-1}$ to the transfer function.\n\nDid you know?\n\nBode's rules epitomize the adage \"necessity is the mother of invention.\" While working on electronic filters and equalizers at Bell Labs in the 1930s, Hendrik Bode, like his contemporaries, grappled with the challenge of assessing the stability of intricate circuits and systems. Lacking computers or even calculators, engineers of that period had to rely on extensive manual calculations. In response, Bode developed his approximations for frequency response and, as detailed in Chapter 12, a straightforward method for analyzing the stability of feedback systems.\n\nDetermine the poles of the circuit depicted in Fig. 11.10, assuming $\\lambda=0$.\nimage_name:Figure 11.10\ndescription:\n[\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: g1}\nname: Cin, type: Capacitor, value: Cin, ports: {Np: g1, Nn: GND}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: g1}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\n]\nextrainfo:The circuit is a common-source amplifier with an NMOS transistor M1. It features an input pole determined by RS and Cin, and an output pole determined by RD and CL.\n\nFigure 11.10\n\nSolution By setting $V_{i n}$ to zero, we observe that the gate of $M_{1}$ is subject to a resistance of $R_{S}$ and a capacitance of $C_{i n}$ to ground. Thus,\n\n$$\n\\begin{equation*}\n\\left|\\omega_{p 1}\\right|=\\frac{1}{R_{S} C_{i n}} . \\tag{11.15}\n\\end{equation*}\n$$\n\nWe can refer to $\\omega_{p 1}$ as the \"input pole\" since it originates in the input network. Similarly, the \"output pole\" is defined by\n\n$$\n\\begin{equation*}\n\\left|\\omega_{p 2}\\right|=\\frac{1}{R_{D} C_{L}} \\tag{11.16}\n\\end{equation*}\n$$\n\nGiven that the low-frequency gain of the circuit is $-g_{m} R_{D}$, the magnitude of the transfer function can be expressed as:\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text {out }}}{V_{\\text {in }}}\\right|=\\frac{g_{m} R_{D}}{\\sqrt{\\left(1+\\omega^{2} / \\omega_{p 1}^{2}\\right)\\left(1+\\omega^{2} \\omega_{p 2}^{2}\\right)}} . \\tag{11.17}\n\\end{equation*}\n$$\n\nExercise If $\\omega_{p 1}=\\omega_{p 2}$, at what frequency does the gain decrease by 3 dB?\n\nExample Calculate the poles of the circuit shown in Fig. 11.11, assuming $\\lambda=0$.\n\n11.9\nimage_name:Figure 11.11\ndescription:\n[\nname: M1, type: NMOS, ports: {S: S1, D: Vout, G: Vb}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: S1}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\nname: Cin, type: Capacitor, value: Cin, ports: {Np: S1, Nn: GND}\n]\nextrainfo:The circuit is a common-source amplifier with NMOS transistor M1. RD serves as the load resistor, RS as the source resistor, and CL as the load capacitor. Cin is the input coupling capacitor, and the gate of M1 is biased with Vb.\n\nFigure 11.11\nSolution With $V_{i n}=0$, the small-signal resistance at the source of $M_{1}$ is $R_{S} \\|\\left(1 / g_{m}\\right)$, resulting in a pole at\n\n$$\n\\begin{equation*}\n\\omega_{p 1}=\\frac{1}{\\left(R_{S} \\| \\frac{1}{g_{m}}\\right) C_{i n}} \\tag{11.18}\n\\end{equation*}\n$$\n\nThe output pole is given by $\\omega_{p 2}=\\left(R_{D} C_{L}\\right)^{-1}$.\n\nExercise\nHow should we select the value of $R_{D}$ to ensure the output pole frequency is ten times the input pole frequency?\n\nReaders might question how the aforementioned technique can be applied when a node is burdened with a \"floating\" capacitor, i.e., a capacitor whose other terminal is also connected to a node in the signal path (Fig. 11.12).\nimage_name:Figure 11.12 Circuit with floating capacitor\ndescription:\n[\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: g1}\nname: CF, type: Capacitor, ports: {Np: g1, Nn: Vout}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: g1}\n]\nextrainfo:The circuit includes a floating capacitor CF connected between the input node g1 and the output node Vout. Miller's theorem can be employed to simplify the analysis by converting CF into two grounded capacitors.\n\nFigure 11.12 Circuit with floating capacitor.\nIn such cases, we generally cannot use this technique and must derive the circuit's equations to obtain the transfer function. However, \"Miller's theorem\" provides an approximation that can simplify the process in certain scenarios.\n```"
},
{
    "text": "The rephrased text:\n\n```\nThe poles of a circuit's transfer function are pivotal in determining its frequency response. Consequently, designers must be adept at intuitively pinpointing these poles to identify the circuit segments that act as \"speed bottlenecks.\"\n\nThe CS topology examined in Example 11.4 exemplifies how poles can be identified through inspection. Equation (11.5) indicates that the pole frequency is determined by the inverse of the product of the total resistance and capacitance observed between the output node and ground. This principle, applicable to numerous circuits, can be generalized: if node $j$ in the signal path exhibits a small-signal resistance $R_{j}$ to ground and a capacitance $C_{j}$ to ground, it contributes a pole of magnitude $\\left(R_{j} C_{j}\\right)^{-1}$ to the transfer function.\n\nDid you know?\n\nBode's rules epitomize the adage \"necessity is the mother of invention.\" While working on electronic filters and equalizers at Bell Labs in the 1930s, Hendrik Bode, like his contemporaries, grappled with the challenge of assessing the stability of intricate circuits and systems. Lacking computers or even calculators, engineers of that era resorted to extensive manual calculations for this purpose. Bode's response was to devise approximations for the frequency response and, as detailed in Chapter 12, a straightforward method for analyzing the stability of feedback systems.\n\nDetermine the poles of the circuit depicted in Fig. 11.10, assuming $\\lambda=0$.\nimage_name:Figure 11.10\ndescription:\n[\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: g1}\nname: Cin, type: Capacitor, value: Cin, ports: {Np: g1, Nn: GND}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: g1}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\n]\nextrainfo:The circuit is a common-source amplifier featuring an NMOS transistor M1. It includes an input pole determined by RS and Cin, and an output pole determined by RD and CL.\n\nFigure 11.10\n\nSolution By setting $V_{i n}$ to zero, we observe that the gate of $M_{1}$ is associated with a resistance of $R_{S}$ and a capacitance of $C_{i n}$ to ground. Thus,\n\n$$\n\\begin{equation*}\n\\left|\\omega_{p 1}\\right|=\\frac{1}{R_{S} C_{i n}} . \\tag{11.15}\n\\end{equation*}\n$$\n\nWe can refer to $\\omega_{p 1}$ as the \"input pole\" since it originates in the input network. Similarly, the \"output pole\" is expressed as\n\n$$\n\\begin{equation*}\n\\left|\\omega_{p 2}\\right|=\\frac{1}{R_{D} C_{L}} \\tag{11.16}\n\\end{equation*}\n$$\n\nGiven that the low-frequency gain of the circuit is $-g_{m} R_{D}$, the magnitude of the transfer function can be readily formulated as:\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text {out }}}{V_{\\text {in }}}\\right|=\\frac{g_{m} R_{D}}{\\sqrt{\\left(1+\\omega^{2} / \\omega_{p 1}^{2}\\right)\\left(1+\\omega^{2} \\omega_{p 2}^{2}\\right)}} . \\tag{11.17}\n\\end{equation*}\n$$\n\nExercise If $\\omega_{p 1}=\\omega_{p 2}$, at what frequency does the gain decrease by 3 dB?\n\nExample Calculate the poles of the circuit shown in Fig. 11.11, assuming $\\lambda=0$.\n\n11.9\nimage_name:Figure 11.11\ndescription:\n[\nname: M1, type: NMOS, ports: {S: S1, D: Vout, G: Vb}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: S1}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\nname: Cin, type: Capacitor, value: Cin, ports: {Np: S1, Nn: GND}\n]\nextrainfo:The circuit is a common-source amplifier with an NMOS transistor M1. RD serves as the load resistor, RS as the source resistor, CL as the load capacitor, and Cin as the input coupling capacitor. The gate of M1 is biased with Vb.\n\nFigure 11.11\nSolution With $V_{i n}=0$, the small-signal resistance at the source of $M_{1}$ is $R_{S} \\|\\left(1 / g_{m}\\right)$, resulting in a pole at\n\n$$\n\\begin{equation*}\n\\omega_{p 1}=\\frac{1}{\\left(R_{S} \\| \\frac{1}{g_{m}}\\right) C_{i n}} \\tag{11.18}\n\\end{equation*}\n$$\n\nThe output pole is given by $\\omega_{p 2}=\\left(R_{D} C_{L}\\right)^{-1}$.\n\nExercise\nHow should $R_{D}$ be selected to ensure the output pole frequency is ten times the input pole frequency?\n\nReaders might question how the aforementioned technique can be applied when a node is burdened with a \"floating\" capacitor, i.e., a capacitor whose other terminal is also connected to a node in the signal path (Fig. 11.12).\nimage_name:Figure 11.12 Circuit with floating capacitor\ndescription:\n[\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: g1}\nname: CF, type: Capacitor, ports: {Np: g1, Nn: Vout}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: g1}\n]\nextrainfo:The circuit includes a floating capacitor CF connected between the input node g1 and the output node Vout. Miller's theorem can be employed to simplify the analysis by converting CF into two grounded capacitors.\n\nFigure 11.12 Circuit with floating capacitor.\nIn such cases, we generally cannot use this technique and must instead derive the circuit's equations to obtain the transfer function. However, \"Miller's theorem\" offers an approximation that can simplify the process in certain scenarios.\n```"
},
{
    "text": "The rephrased text:\n\n```\nThe poles of a circuit's transfer function are crucial in determining its frequency response. Consequently, designers must be adept at intuitively pinpointing these poles to identify the circuit segments that act as \"speed bottlenecks.\"\n\nThe CS topology examined in Example 11.4 exemplifies how poles can be identified through inspection. Equation (11.5) indicates that the pole frequency is determined by the inverse of the product of the total resistance and capacitance between the output node and ground. This principle, applicable to numerous circuits, can be generalized: if node $j$ in the signal path has a small-signal resistance of $R_{j}$ and a capacitance of $C_{j}$ to ground, it contributes a pole of magnitude $\\left(R_{j} C_{j}\\right)^{-1}$ to the transfer function.\n\nDid you know?\n\nBode's rules epitomize the adage \"necessity is the mother of invention.\" In the 1930s, while working on electronic filters and equalizers at Bell Labs, Hendrik Bode, like his contemporaries, grappled with the challenge of assessing the stability of intricate circuits and systems. Lacking computers or even calculators, engineers of that period had to rely on extensive manual calculations. Bode's response was to develop approximations for the frequency response and, as detailed in Chapter 12, a straightforward method for analyzing the stability of feedback systems.\n\nDetermine the poles of the circuit depicted in Fig. 11.10, assuming $\\lambda=0$.\nimage_name:Figure 11.10\ndescription:\n[\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: g1}\nname: Cin, type: Capacitor, value: Cin, ports: {Np: g1, Nn: GND}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: g1}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\n]\nextrainfo:The circuit is a common-source amplifier with an NMOS transistor M1. It features an input pole defined by RS and Cin, and an output pole defined by RD and CL.\n\nFigure 11.10\n\nSolution By setting $V_{i n}$ to zero, we observe that the gate of $M_{1}$ is associated with a resistance of $R_{S}$ and a capacitance of $C_{i n}$ to ground. Therefore,\n\n$$\n\\begin{equation*}\n\\left|\\omega_{p 1}\\right|=\\frac{1}{R_{S} C_{i n}} . \\tag{11.15}\n\\end{equation*}\n$$\n\nWe can refer to $\\omega_{p 1}$ as the \"input pole\" since it originates in the input network. Similarly, the \"output pole\" is expressed as\n\n$$\n\\begin{equation*}\n\\left|\\omega_{p 2}\\right|=\\frac{1}{R_{D} C_{L}} \\tag{11.16}\n\\end{equation*}\n$$\n\nGiven that the low-frequency gain of the circuit is $-g_{m} R_{D}$, the magnitude of the transfer function can be written as:\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text {out }}}{V_{\\text {in }}}\\right|=\\frac{g_{m} R_{D}}{\\sqrt{\\left(1+\\omega^{2} / \\omega_{p 1}^{2}\\right)\\left(1+\\omega^{2} \\omega_{p 2}^{2}\\right)}} . \\tag{11.17}\n\\end{equation*}\n$$\n\nExercise If $\\omega_{p 1}=\\omega_{p 2}$, at what frequency does the gain decrease by 3 dB?\n\nExample Calculate the poles of the circuit shown in Fig. 11.11, assuming $\\lambda=0$.\n\n11.9\nimage_name:Figure 11.11\ndescription:\n[\nname: M1, type: NMOS, ports: {S: S1, D: Vout, G: Vb}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: S1}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\nname: Cin, type: Capacitor, value: Cin, ports: {Np: S1, Nn: GND}\n]\nextrainfo:The circuit is a common-source amplifier with NMOS transistor M1. RD serves as the load resistor, RS as the source resistor, and CL as the load capacitor. Cin is the input coupling capacitor, and the gate of M1 is biased with Vb.\n\nFigure 11.11\nSolution With $V_{i n}=0$, the small-signal resistance at the source of $M_{1}$ is $R_{S} \\|\\left(1 / g_{m}\\right)$, resulting in a pole at\n\n$$\n\\begin{equation*}\n\\omega_{p 1}=\\frac{1}{\\left(R_{S} \\| \\frac{1}{g_{m}}\\right) C_{i n}} \\tag{11.18}\n\\end{equation*}\n$$\n\nThe output pole is given by $\\omega_{p 2}=\\left(R_{D} C_{L}\\right)^{-1}$.\n\nExercise\nHow should $R_{D}$ be chosen so that the output pole frequency is ten times the input pole frequency?\n\nReaders might question how the aforementioned technique can be applied when a node is burdened with a \"floating\" capacitor, i.e., a capacitor whose other terminal is also connected to a node in the signal path (Fig. 11.12). Generally, this technique is not feasible, and the circuit's equations must be written to derive the transfer function. However, \"Miller's theorem\" offers an approximation that can simplify the analysis in certain scenarios.\nimage_name:Figure 11.12 Circuit with floating capacitor\ndescription:\n[\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: g1}\nname: CF, type: Capacitor, ports: {Np: g1, Nn: Vout}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: g1}\n]\nextrainfo:The circuit includes a floating capacitor CF connected between the input node g1 and the output node Vout. Miller's theorem can be employed to simplify the analysis by converting CF into two grounded capacitors.\n\nFigure 11.12 Circuit with floating capacitor.\n```"
},
{
    "text": "The rephrased text:\n\nThe poles of a circuit's transfer function are pivotal in determining its frequency response. Consequently, designers must be adept at intuitively pinpointing these poles to identify the circuit segments that act as \"speed bottlenecks.\"\n\nThe CS topology examined in Example 11.4 exemplifies how poles can be identified through inspection. Equation (11.5) indicates that the pole frequency is the reciprocal of the product of the total resistance and capacitance observed between the output node and ground. This principle is broadly applicable to numerous circuits and can be generalized: if node $j$ in the signal path exhibits a small-signal resistance of $R_{j}$ to ground and a capacitance of $C_{j}$ to ground, it contributes a pole of magnitude $\\left(R_{j} C_{j}\\right)^{-1}$ to the transfer function.\n\nDid you know?\n\nBode's rules epitomize the adage \"necessity is the mother of invention.\" In the 1930s, while working on electronic filters and equalizers at Bell Labs, Hendrik Bode, like his contemporaries, grappled with the challenge of assessing the stability of intricate circuits and systems. Lacking computers or even calculators, engineers of that period had to rely on extensive manual calculations. Bode devised his approximations for the frequency response and, as detailed in Chapter 12, a straightforward method for analyzing the stability of feedback systems.\n\nDetermine the poles of the circuit depicted in Fig. 11.10, assuming $\\lambda=0$.\nimage_name:Figure 11.10\ndescription:\n[\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: g1}\nname: Cin, type: Capacitor, value: Cin, ports: {Np: g1, Nn: GND}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: g1}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\n]\nextrainfo:The circuit is a common-source amplifier featuring an NMOS transistor M1. It includes an input pole determined by RS and Cin, and an output pole determined by RD and CL.\n\nFigure 11.10\n\nSolution By setting $V_{i n}$ to zero, we observe that the gate of $M_{1}$ is associated with a resistance of $R_{S}$ and a capacitance of $C_{i n}$ to ground. Thus,\n\n$$\n\\begin{equation*}\n\\left|\\omega_{p 1}\\right|=\\frac{1}{R_{S} C_{i n}} . \\tag{11.15}\n\\end{equation*}\n$$\n\nWe can refer to $\\omega_{p 1}$ as the \"input pole\" since it originates from the input network. Similarly, the \"output pole\" is expressed as\n\n$$\n\\begin{equation*}\n\\left|\\omega_{p 2}\\right|=\\frac{1}{R_{D} C_{L}} \\tag{11.16}\n\\end{equation*}\n$$\n\nGiven that the low-frequency gain of the circuit is $-g_{m} R_{D}$, the magnitude of the transfer function can be readily formulated as:\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text {out }}}{V_{\\text {in }}}\\right|=\\frac{g_{m} R_{D}}{\\sqrt{\\left(1+\\omega^{2} / \\omega_{p 1}^{2}\\right)\\left(1+\\omega^{2} \\omega_{p 2}^{2}\\right)}} . \\tag{11.17}\n\\end{equation*}\n$$\n\nExercise If $\\omega_{p 1}=\\omega_{p 2}$, at what frequency does the gain decrease by 3 dB?\n\nExample Calculate the poles of the circuit shown in Fig. 11.11, assuming $\\lambda=0$.\n\n11.9\nimage_name:Figure 11.11\ndescription:\n[\nname: M1, type: NMOS, ports: {S: S1, D: Vout, G: Vb}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: S1}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\nname: Cin, type: Capacitor, value: Cin, ports: {Np: S1, Nn: GND}\n]\nextrainfo:The circuit is a common-source amplifier with NMOS transistor M1. RD serves as the load resistor, RS as the source resistor, and CL as the load capacitor. Cin is the input coupling capacitor, and the gate of M1 is biased with Vb.\n\nFigure 11.11\nSolution With $V_{i n}=0$, the small-signal resistance at the source of $M_{1}$ is $R_{S} \\|\\left(1 / g_{m}\\right)$, resulting in a pole at\n\n$$\n\\begin{equation*}\n\\omega_{p 1}=\\frac{1}{\\left(R_{S} \\| \\frac{1}{g_{m}}\\right) C_{i n}} \\tag{11.18}\n\\end{equation*}\n$$\n\nThe output pole is given by $\\omega_{p 2}=\\left(R_{D} C_{L}\\right)^{-1}$.\n\nExercise\nHow should $R_{D}$ be chosen so that the output pole frequency is ten times the input pole frequency?\n\nReaders might question how the aforementioned technique can be applied when a node is loaded with a \"floating\" capacitor, i.e., a capacitor whose other terminal is also connected to a node in the signal path (Fig. 11.12).\nimage_name:Figure 11.12 Circuit with floating capacitor\ndescription:\n[\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: g1}\nname: CF, type: Capacitor, ports: {Np: g1, Nn: Vout}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: g1}\n]\nextrainfo:The circuit includes a floating capacitor CF connected between the input node g1 and the output node Vout. Miller's theorem can be employed to simplify the analysis by converting CF into two grounded capacitors.\n\nFigure 11.12 Circuit with floating capacitor.\nIn such cases, we generally cannot use this technique and must derive the circuit's equations to obtain the transfer function. However, \"Miller's theorem\" offers an approximation that can streamline the process in certain scenarios."
},
{
    "text": "Our prior analysis and the illustration in Fig. 11.12 highlight the need for a method that converts a floating capacitor into two grounded capacitors, allowing each node to be associated with one pole. Miller's theorem serves this purpose. However, it was initially developed for a different reason. In the late 1910s, John Miller noticed that parasitic capacitances between an amplifier's input and output could significantly reduce the input impedance. He then proposed an analysis leading to the theorem.\n\nConsider the general circuit depicted in Fig. 11.13(a), where the floating impedance, $Z_{F}$, is positioned between nodes 1 and 2. Our goal is to transform $Z_{F}$ into two grounded impedances, as shown in Fig. 11.13(b), while ensuring all circuit currents and voltages remain unchanged. To determine $Z_{1}$ and $Z_{2}$, we make two observations: (1) the current drawn by $Z_{F}$ from node 1 in Fig. 11.13(a) must equal the current drawn by $Z_{1}$ in Fig. 11.13(b); and (2) the current injected into node 2 in Fig. 11.13(a) must match the current injected by $Z_{2}$ in Fig. 11.13(b). (These conditions ensure the circuit remains unaffected by the transformation.) Thus,\n\n$$\n\\begin{align*}\n& \\frac{V_{1}-V_{2}}{Z_{F}}=\\frac{V_{1}}{Z_{1}}  \\tag{11.19}\\\\\n& \\frac{V_{1}-V_{2}}{Z_{F}}=-\\frac{V_{2}}{Z_{2}} \\tag{11.20}\n\\end{align*}\n$$\n\nLetting $A_{v}$ denote the voltage gain from node 1 to node 2, we derive\n\n$$\n\\begin{align*}\nZ_{1} & =Z_{F} \\frac{V_{1}}{V_{1}-V_{2}}  \\tag{11.21}\\\\\n& =\\frac{Z_{F}}{1-A_{v}} \\tag{11.22}\n\\end{align*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: ZF, type: Resistor, value: ZF, ports: {N1: 1, N2: 2}\n]\nextrainfo:The circuit in diagram (a) includes a floating impedance ZF between nodes 1 and 2, with voltage sources V1 and V2 connected to ground at nodes 1 and 2 respectively.\nimage_name:(b)\ndescription:\n[\nname: Z1, type: Resistor, value: Z1, ports: {N1: 1, N2: GND}\nname: Z2, type: Resistor, value: Z2, ports: {N1: 2, N2: GND}\n]\nextrainfo:The circuit diagram (b) represents the equivalent circuit using Miller's theorem, where the floating impedance ZF is replaced by two grounded impedances Z1 and Z2. V1 and V2 are voltage sources connected to nodes 1 and 2 respectively, with both having a common ground.\n\nFigure 11.13 (a) General circuit including a floating impedance, (b) equivalent of (a) as derived from Miller's theorem.\nand\n\n$$\n\\begin{align*}\nZ_{2} & =Z_{F} \\frac{-V_{2}}{V_{1}-V_{2}}  \\tag{11.23}\\\\\n& =\\frac{Z_{F}}{1-\\frac{1}{A_{v}}} \\tag{11.24}\n\\end{align*}\n$$\n\nThese results, encapsulated in Eqs. (11.22) and (11.24) and known as Miller's theorem, are highly valuable for analysis and design. Specifically, Eq. (11.22) indicates that the floating impedance appears reduced by a factor of $1-A_{v}$ when observed at node 1.\n\nAs a significant application of Miller's theorem, assume $Z_{F}$ is a single capacitor, $C_{F}$, connected between the input and output of an inverting amplifier [Fig. 11.14(a)]. Applying Eq. (11.22), we get\n\n$$\n\\begin{align*}\nZ_{1} & =\\frac{Z_{F}}{1-A_{v}}  \\tag{11.25}\\\\\n& =\\frac{1}{\\left(1+A_{0}\\right) C_{F} S} \\tag{11.26}\n\\end{align*}\n$$\n\nwhere $A_{v}=-A_{0}$ is substituted. What type of impedance is $Z_{1}$? The $1 / s$ dependence indicates a capacitor with a value of $\\left(1+A_{0}\\right) C_{F}$, as if $C_{F}$ is \"amplified\" by a factor of $1+A_{0}$. In other words, a capacitor $C_{F}$ connected between the input and output of an inverting amplifier with a gain of $A_{0}$ increases the input capacitance to $\\left(1+A_{0}\\right) C_{F}$. This phenomenon is termed \"Miller multiplication\" of the capacitor.\n\nThe impact of $C_{F}$ at the output can be derived from Eq. (11.24):\n\n$$\n\\begin{align*}\nZ_{2} & =\\frac{Z_{F}}{1-\\frac{1}{A_{v}}}  \\tag{11.27}\\\\\n& =\\frac{1}{\\left(1+\\frac{1}{A_{0}}\\right) C_{F} S} \\tag{11.28}\n\\end{align*}\n$$\n\nwhich approximates $\\left(C_{F} s\\right)^{-1}$ if $A_{0} \\gg 1$. Figure 11.14(b) summarizes these findings.\nThe Miller multiplication of capacitors can also be understood intuitively. Suppose the input voltage in Fig. 11.14(a) increases slightly by $\\Delta V$. The output then decreases by $A_{0} \\Delta V$. Consequently, the voltage across $C_{F}$ rises by $\\left(1+A_{0}\\right) \\Delta V$, necessitating a proportional charge from the input. In contrast, if $C_{F}$ were not floating and its right plate voltage remained constant, it would only experience a voltage change of $\\Delta V$ and require less charge.\nimage_name:(a)\ndescription:\n[\nname: CF, type: Capacitor, value: CF, ports: {Np: Vout, Nn: Vin}\nname: A0, type: OpAmp, value: A0, ports: {InP: GND, InN: Vin, OutP: Vout, OutN: GND}\n]\nextrainfo:The circuit is an inverting amplifier with a floating capacitor CF connected between the output and input of the op-amp A0. The input voltage is Vin and the output voltage is Vout. The circuit demonstrates the Miller effect.\nimage_name:(b)\ndescription:\n[\nname: A0, type: OpAmp, value: A0, ports: {InP: GND, InN: Vin, Out: Vout}\nname: CF(1+1/A0), type: Capacitor, value: CF(1+1/A0), ports: {Np: Vout, Nn: GND}\nname: CF(1+A0), type: Capacitor, value: CF(1+A0), ports: {Np: Vin, Nn: GND}\n]\nextrainfo:The circuit diagram (b) is an equivalent circuit using Miller's theorem, converting a floating capacitor to a grounded capacitor. It shows an inverting amplifier configuration with an operational amplifier and a grounded capacitor CF(1+1/A0). The input voltage is Vin, and the output is Vout.\n\nFigure 11.14 (a) Inverting circuit with floating capacitor, (b) equivalent circuit as derived from Miller's theorem.\n\nThe preceding study underscores the utility of Miller's theorem for converting floating capacitors to grounded capacitors. The following example illustrates this principle.\n\nDid you know?\n\nThe Miller effect was discovered by John Miller in 1919. In his original paper, Miller observed that \"the apparent input capacity can become several times greater than the actual capacities between the tube electrodes.\" (At that time, capacitance and capacitor were referred to as \"capacity\" and \"condensor,\" respectively.) An intriguing aspect of Miller multiplication is that if the amplifier gain is positive and greater than unity, the input capacitance becomes negative, $\\left(1-A_{v}\\right) C_{F}$. Does this occur? Indeed, it does. Below is a circuit that realizes a negative capacitance. Since the gain from $V_{i n 1}$ to $V_{Y}$ (and from $V_{i n 2}$ to $V_{X}$) is positive, $C_{F}$ can be multiplied by a negative number. This technique is employed in many high-speed circuits to partially offset the effects of unwanted (positive) capacitances.\nimage_name:Circuit with negative input capacitance\ndescription:\n[\nname: M1, type: NMOS, ports: {S: P, D: X, G: Vin1}\nname: M2, type: NMOS, ports: {S: P, D: Y, G: Vin2}\nname: RD1, type: Resistor, value: RD, ports: {N1: VDD, N2: X}\nname: RD2, type: Resistor, value: RD, ports: {N1: VDD, N2: Y}\nname: CF1, type: Capacitor, value: CF, ports: {Np: Vin1, Nn: X}\nname: CF2, type: Capacitor, value: CF, ports: {Np: Vin2, Nn: Y}\nname: I1, type: CurrentSource, ports: {Np: P, Nn: GND}\n]\nextrainfo:The circuit uses NMOS transistors M1 and M2 to create a negative input capacitance effect. The resistors RD and capacitors CF are used to achieve the desired gain and capacitance cancellation. The current source provides biasing.\n\nCircuit with negative input capacitance.\n\nExample $\\quad$ Estimate the pole of the circuit shown in Fig. 11.15(a). Assume $\\lambda=0$.\nimage_name:(a)\ndescription:\n[\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: g1}\nname: CF, type: Capacitor, value: CF, ports: {Np: g1, Nn: Vout}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: g1}\n]\nextrainfo:The circuit uses NMOS transistor M1 and resistor RD to form an inverting amplifier with a gain of -gmRD. Capacitor CF is used for capacitance cancellation. The circuit exhibits a negative input capacitance effect.\n\n(a)\nimage_name:Figure 11.15(b)\ndescription:\n[\nname: Rs, type: Resistor, value: Rs, ports: {N1: Vin, N2: g1}\nname: Cin, type: Capacitor, value: Cin, ports: {Np: g1, Nn: GND}\nname: Cout, type: Capacitor, value: Cout, ports: {Np: Vout, Nn: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: g1}\n]\nextrainfo:The circuit is an inverting amplifier using an NMOS transistor with a gain of -gmRD. Capacitors Cin and Cout are used for input and output coupling, respectively. RD is connected to VDD, and the output is taken from the drain of M1.\n\n(b)\n\nFigure 11.15\n\nSolution Noting that $M_{1}$ and $R_{D}$ form an inverting amplifier with a gain of $-g_{m} R_{D}$, we apply the results from Fig. 11.14(b) to write:\n\n$$\n\\begin{align*}\nC_{i n} & =\\left(1+A_{0}\\right) C_{F}  \\tag{11.29}\\\\\n& =\\left(1+g_{m} R_{D}\\right) C_{F} \\tag{11.30}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{equation*}\nC_{\\text {out }}=\\left(1+\\frac{1}{g_{m} R_{D}}\\right) C_{F}, \\tag{11.31}\n\\end{equation*}\n$$\n\nthus arriving at the topology depicted in Fig. 11.15(b). From our analysis in Example 11.8, we have:\n\n$$\n\\begin{align*}\n\\omega_{\\text {in }} & =\\frac{1}{R_{S} C_{i n}}  \\tag{11.32}\\\\\n& =\\frac{1}{R_{S}\\left(1+g_{m} R_{D}\\right) C_{F}} \\tag{11.33}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{align*}\n\\omega_{\\text {out }} & =\\frac{1}{R_{D} C_{\\text {out }}}  \\tag{11.34}\\\\\n& =\\frac{1}{R_{D}\\left(1+\\frac{1}{g_{m} R_{D}}\\right) C_{F}} . \\tag{11.35}\n\\end{align*}\n$$\n\nWhy does the circuit in (a) have one pole while that in (b) has two? This is explained below.\nExercise Calculate $C_{i n}$ if $g_{m}=(150 \\Omega)^{-1}, R_{D}=2 \\mathrm{k} \\Omega$, and $C_{F}=80 \\mathrm{fF}$.\n\nThe reader may find the preceding example somewhat inconsistent. Miller's theorem requires that the floating impedance and the voltage gain be computed at the same frequency, whereas Example 11.10 uses the low-frequency gain, $g_{m} R_{D}$, even for determining high-frequency poles. After all, we know that the presence of $C_{F}$ reduces the voltage gain from the gate of $M_{1}$ to the output at high frequencies. Due to this inconsistency, we refer to the procedure in Example 11.10 as the \"Miller approximation.\" Without this approximation, i.e., if $A_{0}$ were expressed in terms of circuit parameters at the frequency of interest, applying Miller's theorem would be no simpler than directly solving the circuit's equations. Because of the approximation, the circuit in the example exhibits two poles.\n\nAnother artifact of the Miller approximation is that it may eliminate a zero of the transfer function. We address this issue in Section 11.4.3.\n\nThe general expression in Eq. (11.22) can be interpreted as follows: an impedance connected between the input and output of an inverting amplifier with a gain of $A_{v}$ appears reduced by a factor of $1+A_{v}$ when viewed at the input (relative to ground). This reduction of impedance (and corresponding increase in capacitance) is termed the \"Miller effect.\" For instance, we say the Miller effect increases the input capacitance of the circuit in Fig. 11.15(a) to $\\left(1+g_{m} R_{D}\\right) C_{F}$."
},
{
    "text": "Our preceding analysis and the illustration in Fig. 11.12 highlight the need for a method that converts a floating capacitor into two grounded capacitors, allowing each node to be associated with one pole. Miller's theorem serves this purpose. Originally, however, Miller's theorem was developed for a different reason. In the late 1910s, John Miller observed that parasitic capacitances between an amplifier's input and output could significantly reduce the input impedance. He then proposed an analysis that led to the formulation of the theorem.\n\nConsider the generic circuit shown in Fig. 11.13(a), where the floating impedance, $Z_{F}$, is situated between nodes 1 and 2. Our goal is to transform $Z_{F}$ into two grounded impedances, as illustrated in Fig. 11.13(b), while ensuring all circuit currents and voltages remain unchanged. To determine $Z_{1}$ and $Z_{2}$, we make two observations: (1) the current drawn by $Z_{F}$ from node 1 in Fig. 11.13(a) must match that drawn by $Z_{1}$ in Fig. 11.13(b); and (2) the current injected into node 2 in Fig. 11.13(a) must equal that injected by $Z_{2}$ in Fig. 11.13(b). (These conditions ensure the circuit is unaffected by the transformation.) Thus,\n\n$$\n\\begin{align*}\n& \\frac{V_{1}-V_{2}}{Z_{F}}=\\frac{V_{1}}{Z_{1}}  \\tag{11.19}\\\\\n& \\frac{V_{1}-V_{2}}{Z_{F}}=-\\frac{V_{2}}{Z_{2}} \\tag{11.20}\n\\end{align*}\n$$\n\nBy denoting the voltage gain from node 1 to node 2 as $A_{v}$, we derive\n\n$$\n\\begin{align*}\nZ_{1} & =Z_{F} \\frac{V_{1}}{V_{1}-V_{2}}  \\tag{11.21}\\\\\n& =\\frac{Z_{F}}{1-A_{v}} \\tag{11.22}\n\\end{align*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: ZF, type: Resistor, value: ZF, ports: {N1: 1, N2: 2}\n]\nextrainfo:The circuit in diagram (a) features a floating impedance ZF between nodes 1 and 2, with voltage sources V1 and V2 connected to ground at nodes 1 and 2 respectively.\nimage_name:(b)\ndescription:\n[\nname: Z1, type: Resistor, value: Z1, ports: {N1: 1, N2: GND}\nname: Z2, type: Resistor, value: Z2, ports: {N1: 2, N2: GND}\n]\nextrainfo:The circuit in diagram (b) shows the equivalent circuit using Miller's theorem, where the floating impedance ZF is replaced by two grounded impedances Z1 and Z2. V1 and V2 are voltage sources connected to nodes 1 and 2 respectively, both sharing a common ground.\n\nFigure 11.13 (a) General circuit with a floating impedance, (b) equivalent circuit derived from Miller's theorem.\nand\n\n$$\n\\begin{align*}\nZ_{2} & =Z_{F} \\frac{-V_{2}}{V_{1}-V_{2}}  \\tag{11.23}\\\\\n& =\\frac{Z_{F}}{1-\\frac{1}{A_{v}}} \\tag{11.24}\n\\end{align*}\n$$\n\nKnown as Miller's theorem, the results expressed by Eqs. (11.22) and (11.24) are highly useful in analysis and design. Specifically, Eq. (11.22) indicates that the floating impedance is reduced by a factor of $1-A_{v}$ when observed at node 1.\n\nAs a significant example of Miller's theorem, suppose $Z_{F}$ is a single capacitor, $C_{F}$, connected between the input and output of an inverting amplifier [Fig. 11.14(a)]. Applying Eq. (11.22), we get\n\n$$\n\\begin{align*}\nZ_{1} & =\\frac{Z_{F}}{1-A_{v}}  \\tag{11.25}\\\\\n& =\\frac{1}{\\left(1+A_{0}\\right) C_{F} S} \\tag{11.26}\n\\end{align*}\n$$\n\nwhere $A_{v}=-A_{0}$ is substituted. What type of impedance is $Z_{1}$? The $1 / s$ dependency suggests a capacitor of value $\\left(1+A_{0}\\right) C_{F}$, as if $C_{F}$ is \"amplified\" by a factor of $1+A_{0}$. In other words, a capacitor $C_{F}$ connected between the input and output of an inverting amplifier with a gain of $A_{0}$ increases the input capacitance to $\\left(1+A_{0}\\right) C_{F}$. This phenomenon is termed \"Miller multiplication\" of the capacitor.\n\nThe impact of $C_{F}$ at the output can be derived from Eq. (11.24):\n\n$$\n\\begin{align*}\nZ_{2} & =\\frac{Z_{F}}{1-\\frac{1}{A_{v}}}  \\tag{11.27}\\\\\n& =\\frac{1}{\\left(1+\\frac{1}{A_{0}}\\right) C_{F} S} \\tag{11.28}\n\\end{align*}\n$$\n\nwhich approximates $\\left(C_{F} s\\right)^{-1}$ if $A_{0} \\gg 1$. Figure 11.14(b) summarizes these findings.\nThe Miller multiplication of capacitors can also be understood intuitively. Imagine the input voltage in Fig. 11.14(a) increases slightly by $\\Delta V$. The output then decreases by $A_{0} \\Delta V$. Consequently, the voltage across $C_{F}$ rises by $\\left(1+A_{0}\\right) \\Delta V$, necessitating a proportional charge from the input. Conversely, if $C_{F}$ were not a floating capacitor and its right plate voltage remained constant, it would only experience a voltage change of $\\Delta V$ and require less charge.\nimage_name:(a)\ndescription:\n[\nname: CF, type: Capacitor, value: CF, ports: {Np: Vout, Nn: Vin}\nname: A0, type: OpAmp, value: A0, ports: {InP: GND, InN: Vin, OutP: Vout, OutN: GND}\n]\nextrainfo:The circuit depicts an inverting amplifier with a floating capacitor CF connected between the output and input of the op-amp A0. The input voltage is Vin, and the output voltage is Vout, demonstrating the Miller effect.\nimage_name:(b)\ndescription:\n[\nname: A0, type: OpAmp, value: A0, ports: {InP: GND, InN: Vin, Out: Vout}\nname: CF(1+1/A0), type: Capacitor, value: CF(1+1/A0), ports: {Np: Vout, Nn: GND}\nname: CF(1+A0), type: Capacitor, value: CF(1+A0), ports: {Np: Vin, Nn: GND}\n]\nextrainfo:The circuit in diagram (b) illustrates the equivalent circuit using Miller's theorem, converting a floating capacitor to grounded capacitors. It shows an inverting amplifier configuration with an operational amplifier and grounded capacitors CF(1+1/A0) and CF(1+A0). The input voltage is Vin, and the output is Vout.\n\nFigure 11.14 (a) Inverting circuit with floating capacitor, (b) equivalent circuit derived from Miller's theorem.\n\nThe above analysis underscores the utility of Miller's theorem for converting floating capacitors to grounded capacitors. The following example illustrates this principle.\n\nDid you know?\n\nThe Miller effect was discovered by John Miller in 1919. In his original paper, Miller noted that \"the apparent input capacity can become several times greater than the actual capacities between the tube electrodes.\" (At that time, capacitance and capacitor were referred to as \"capacity\" and \"condensor,\" respectively.) An intriguing aspect of Miller multiplication is that if the amplifier gain is positive and greater than unity, the input capacitance becomes negative, $\\left(1-A_{v}\\right) C_{F}$. Does this occur? Indeed, it does. Below is a circuit that realizes negative capacitance. Since the gain from $V_{i n 1}$ to $V_{Y}$ (and from $V_{i n 2}$ to $V_{X}$) is positive, $C_{F}$ can be multiplied by a negative number. This technique is employed in many high-speed circuits to partially offset the effects of undesired (positive) capacitances.\nimage_name:Circuit with negative input capacitance\ndescription:\n[\nname: M1, type: NMOS, ports: {S: P, D: X, G: Vin1}\nname: M2, type: NMOS, ports: {S: P, D: Y, G: Vin2}\nname: RD1, type: Resistor, value: RD, ports: {N1: VDD, N2: X}\nname: RD2, type: Resistor, value: RD, ports: {N1: VDD, N2: Y}\nname: CF1, type: Capacitor, value: CF, ports: {Np: Vin1, Nn: X}\nname: CF2, type: Capacitor, value: CF, ports: {Np: Vin2, Nn: Y}\nname: I1, type: CurrentSource, ports: {Np: P, Nn: GND}\n]\nextrainfo:The circuit utilizes NMOS transistors M1 and M2 to create a negative input capacitance effect. Resistors RD and capacitors CF are used to achieve the desired gain and capacitance cancellation. The current source provides biasing.\n\nCircuit with negative input capacitance.\n\nExample $\\quad$ Estimate the pole of the circuit shown in Fig. 11.15(a). Assume $\\lambda=0$.\nimage_name:(a)\ndescription:\n[\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: g1}\nname: CF, type: Capacitor, value: CF, ports: {Np: g1, Nn: Vout}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: g1}\n]\nextrainfo:The circuit uses NMOS transistor M1 and resistor RD to form an inverting amplifier with a gain of -gmRD. Capacitor CF is used for capacitance cancellation, exhibiting a negative input capacitance effect.\n\n(a)\nimage_name:Figure 11.15(b)\ndescription:\n[\nname: Rs, type: Resistor, value: Rs, ports: {N1: Vin, N2: g1}\nname: Cin, type: Capacitor, value: Cin, ports: {Np: g1, Nn: GND}\nname: Cout, type: Capacitor, value: Cout, ports: {Np: Vout, Nn: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: g1}\n]\nextrainfo:The circuit is an inverting amplifier using an NMOS transistor with a gain of -gmRD. Capacitors Cin and Cout are used for input and output coupling, respectively. RD is connected to VDD, and the output is taken from the drain of M1.\n\n(b)\n\nFigure 11.15\n\nSolution Noting that $M_{1}$ and $R_{D}$ form an inverting amplifier with a gain of $-g_{m} R_{D}$, we apply the results from Fig. 11.14(b) to write:\n\n$$\n\\begin{align*}\nC_{i n} & =\\left(1+A_{0}\\right) C_{F}  \\tag{11.29}\\\\\n& =\\left(1+g_{m} R_{D}\\right) C_{F} \\tag{11.30}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{equation*}\nC_{\\text {out }}=\\left(1+\\frac{1}{g_{m} R_{D}}\\right) C_{F}, \\tag{11.31}\n\\end{equation*}\n$$\n\nthus arriving at the topology shown in Fig. 11.15(b). From our analysis in Example 11.8, we have:\n\n$$\n\\begin{align*}\n\\omega_{\\text {in }} & =\\frac{1}{R_{S} C_{i n}}  \\tag{11.32}\\\\\n& =\\frac{1}{R_{S}\\left(1+g_{m} R_{D}\\right) C_{F}} \\tag{11.33}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{align*}\n\\omega_{\\text {out }} & =\\frac{1}{R_{D} C_{\\text {out }}}  \\tag{11.34}\\\\\n& =\\frac{1}{R_{D}\\left(1+\\frac{1}{g_{m} R_{D}}\\right) C_{F}} . \\tag{11.35}\n\\end{align*}\n$$\n\nWhy does the circuit in (a) have one pole while that in (b) has two? This is explained below.\nExercise Calculate $C_{i n}$ if $g_{m}=(150 \\Omega)^{-1}, R_{D}=2 \\mathrm{k} \\Omega$, and $C_{F}=80 \\mathrm{fF}$.\n\nThe reader may find the preceding example somewhat inconsistent. Miller's theorem requires that the floating impedance and the voltage gain be computed at the same frequency, whereas Example 11.10 uses the low-frequency gain, $g_{m} R_{D}$, even for determining high-frequency poles. After all, we know that the presence of $C_{F}$ reduces the voltage gain from the gate of $M_{1}$ to the output at high frequencies. Due to this inconsistency, we refer to the procedure in Example 11.10 as the \"Miller approximation.\" Without this approximation, i.e., if $A_{0}$ were expressed in terms of circuit parameters at the frequency of interest, applying Miller's theorem would be no simpler than directly solving the circuit's equations. Because of the approximation, the circuit in the example exhibits two poles.\n\nAnother consequence of the Miller approximation is that it may eliminate a zero of the transfer function. We address this issue in Section 11.4.3.\n\nThe general expression in Eq. (11.22) can be interpreted as follows: an impedance connected between the input and output of an inverting amplifier with a gain of $A_{v}$ is reduced by a factor of $1+A_{v}$ when viewed at the input (relative to ground). This reduction in impedance (and corresponding increase in capacitance) is known as the \"Miller effect.\" For instance, we say the Miller effect increases the input capacitance of the circuit in Fig. 11.15(a) to $\\left(1+g_{m} R_{D}\\right) C_{F}$."
},
{
    "text": "Our preceding analysis and the illustration in Fig. 11.12 highlight the need for a method that converts a floating capacitor into two grounded capacitors, allowing each node to be associated with one pole. Miller's theorem serves this purpose. Originally, however, Miller's theorem was developed for a different reason. In the late 1910s, John Miller observed that parasitic capacitances between the input and output of an amplifier could significantly reduce the input impedance. He then proposed an analysis that led to the theorem.\n\nConsider the general circuit depicted in Fig. 11.13(a), where the floating impedance, $Z_{F}$, is situated between nodes 1 and 2. Our goal is to transform $Z_{F}$ into two grounded impedances, as shown in Fig. 11.13(b), while ensuring that all currents and voltages in the circuit remain unchanged. To determine $Z_{1}$ and $Z_{2}$, we make two observations: (1) the current drawn by $Z_{F}$ from node 1 in Fig. 11.13(a) must equal the current drawn by $Z_{1}$ in Fig. 11.13(b); and (2) the current injected into node 2 in Fig. 11.13(a) must match the current injected by $Z_{2}$ in Fig. 11.13(b). (These conditions ensure the circuit is unaffected by the transformation.) Thus,\n\n$$\n\\begin{align*}\n& \\frac{V_{1}-V_{2}}{Z_{F}}=\\frac{V_{1}}{Z_{1}}  \\tag{11.19}\\\\\n& \\frac{V_{1}-V_{2}}{Z_{F}}=-\\frac{V_{2}}{Z_{2}} \\tag{11.20}\n\\end{align*}\n$$\n\nLetting $A_{v}$ denote the voltage gain from node 1 to node 2, we derive\n\n$$\n\\begin{align*}\nZ_{1} & =Z_{F} \\frac{V_{1}}{V_{1}-V_{2}}  \\tag{11.21}\\\\\n& =\\frac{Z_{F}}{1-A_{v}} \\tag{11.22}\n\\end{align*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: ZF, type: Resistor, value: ZF, ports: {N1: 1, N2: 2}\n]\nextrainfo:The circuit in diagram (a) features a floating impedance ZF between nodes 1 and 2, with voltage sources V1 and V2 connected to ground at nodes 1 and 2, respectively.\nimage_name:(b)\ndescription:\n[\nname: Z1, type: Resistor, value: Z1, ports: {N1: 1, N2: GND}\nname: Z2, type: Resistor, value: Z2, ports: {N1: 2, N2: GND}\n]\nextrainfo:The circuit diagram (b) illustrates the equivalent circuit using Miller's theorem, where the floating impedance ZF is replaced by two grounded impedances Z1 and Z2. Voltage sources V1 and V2 are connected to nodes 1 and 2, respectively, with a common ground.\n\nFigure 11.13 (a) General circuit with a floating impedance, (b) equivalent of (a) derived from Miller's theorem.\nand\n\n$$\n\\begin{align*}\nZ_{2} & =Z_{F} \\frac{-V_{2}}{V_{1}-V_{2}}  \\tag{11.23}\\\\\n& =\\frac{Z_{F}}{1-\\frac{1}{A_{v}}} \\tag{11.24}\n\\end{align*}\n$$\n\nKnown as Miller's theorem, the results expressed by Eqs. (11.22) and (11.24) are highly useful in analysis and design. Specifically, Eq. (11.22) indicates that the floating impedance is reduced by a factor of $1-A_{v}$ when observed at node 1.\n\nAs a significant example of Miller's theorem, assume $Z_{F}$ is a single capacitor, $C_{F}$, connected between the input and output of an inverting amplifier [Fig. 11.14(a)]. Applying Eq. (11.22), we get\n\n$$\n\\begin{align*}\nZ_{1} & =\\frac{Z_{F}}{1-A_{v}}  \\tag{11.25}\\\\\n& =\\frac{1}{\\left(1+A_{0}\\right) C_{F} S} \\tag{11.26}\n\\end{align*}\n$$\n\nwhere $A_{v}=-A_{0}$ is substituted. What type of impedance is $Z_{1}$? The $1 / s$ dependency suggests a capacitor of value $\\left(1+A_{0}\\right) C_{F}$, as if $C_{F}$ is \"amplified\" by a factor of $1+A_{0}$. In other words, a capacitor $C_{F}$ connected between the input and output of an inverting amplifier with a gain of $A_{0}$ increases the input capacitance to $\\left(1+A_{0}\\right) C_{F}$. This phenomenon is termed \"Miller multiplication\" of the capacitor.\n\nThe impact of $C_{F}$ at the output can be derived from Eq. (11.24):\n\n$$\n\\begin{align*}\nZ_{2} & =\\frac{Z_{F}}{1-\\frac{1}{A_{v}}}  \\tag{11.27}\\\\\n& =\\frac{1}{\\left(1+\\frac{1}{A_{0}}\\right) C_{F} S} \\tag{11.28}\n\\end{align*}\n$$\n\nwhich approximates $\\left(C_{F} s\\right)^{-1}$ if $A_{0} \\gg 1$. Figure 11.14(b) summarizes these findings.\nThe Miller multiplication of capacitors can also be understood intuitively. Suppose the input voltage in Fig. 11.14(a) increases slightly by $\\Delta V$. The output then decreases by $A_{0} \\Delta V$. Consequently, the voltage across $C_{F}$ increases by $\\left(1+A_{0}\\right) \\Delta V$, necessitating a proportional charge from the input. Conversely, if $C_{F}$ were not a floating capacitor and its right plate voltage remained constant, it would experience only a voltage change of $\\Delta V$ and require less charge.\nimage_name:(a)\ndescription:\n[\nname: CF, type: Capacitor, value: CF, ports: {Np: Vout, Nn: Vin}\nname: A0, type: OpAmp, value: A0, ports: {InP: GND, InN: Vin, OutP: Vout, OutN: GND}\n]\nextrainfo:The circuit consists of an inverting amplifier with a floating capacitor CF connected between the output and input of the op-amp A0. The input voltage is Vin, and the output voltage is Vout, demonstrating the Miller effect.\nimage_name:(b)\ndescription:\n[\nname: A0, type: OpAmp, value: A0, ports: {InP: GND, InN: Vin, Out: Vout}\nname: CF(1+1/A0), type: Capacitor, value: CF(1+1/A0), ports: {Np: Vout, Nn: GND}\nname: CF(1+A0), type: Capacitor, value: CF(1+A0), ports: {Np: Vin, Nn: GND}\n]\nextrainfo:The circuit diagram (b) shows the equivalent circuit using Miller's theorem, converting a floating capacitor to a grounded capacitor. It features an inverting amplifier configuration with an operational amplifier and a grounded capacitor CF(1+1/A0). The input voltage is Vin, and the output is Vout.\n\nFigure 11.14 (a) Inverting circuit with floating capacitor, (b) equivalent circuit derived from Miller's theorem.\n\nThe above study underscores the utility of Miller's theorem for converting floating capacitors to grounded capacitors. The following example illustrates this principle.\n\nDid you know?\n\nThe Miller effect was discovered by John Miller in 1919. In his original paper, Miller noted that \"the apparent input capacity can become several times greater than the actual capacities between the tube electrodes.\" (At that time, capacitance and capacitor were referred to as \"capacity\" and \"condensor,\" respectively.) An interesting aspect of Miller multiplication is that if the amplifier gain is positive and greater than unity, the resulting input capacitance becomes negative, $\\left(1-A_{v}\\right) C_{F}$. Does this occur? Indeed, it does. Below is a circuit that realizes a negative capacitance. Since the gain from $V_{i n 1}$ to $V_{Y}$ (and from $V_{i n 2}$ to $V_{X}$) is positive, $C_{F}$ can be multiplied by a negative number. This technique is employed in many high-speed circuits to partially offset the effects of unwanted (positive) capacitances.\nimage_name:Circuit with negative input capacitance\ndescription:\n[\nname: M1, type: NMOS, ports: {S: P, D: X, G: Vin1}\nname: M2, type: NMOS, ports: {S: P, D: Y, G: Vin2}\nname: RD1, type: Resistor, value: RD, ports: {N1: VDD, N2: X}\nname: RD2, type: Resistor, value: RD, ports: {N1: VDD, N2: Y}\nname: CF1, type: Capacitor, value: CF, ports: {Np: Vin1, Nn: X}\nname: CF2, type: Capacitor, value: CF, ports: {Np: Vin2, Nn: Y}\nname: I1, type: CurrentSource, ports: {Np: P, Nn: GND}\n]\nextrainfo:The circuit utilizes NMOS transistors M1 and M2 to create a negative input capacitance effect. Resistors RD and capacitors CF are used to achieve the desired gain and capacitance cancellation. The current source provides biasing.\n\nCircuit with negative input capacitance.\n\nExample $\\quad$ Estimate the pole of the circuit shown in Fig. 11.15(a). Assume $\\lambda=0$.\nimage_name:(a)\ndescription:\n[\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: g1}\nname: CF, type: Capacitor, value: CF, ports: {Np: g1, Nn: Vout}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: g1}\n]\nextrainfo:The circuit uses an NMOS transistor M1 and resistor RD to form an inverting amplifier with a gain of -gmRD. Capacitor CF is used for capacitance cancellation, exhibiting a negative input capacitance effect.\n\n(a)\nimage_name:Figure 11.15(b)\ndescription:\n[\nname: Rs, type: Resistor, value: Rs, ports: {N1: Vin, N2: g1}\nname: Cin, type: Capacitor, value: Cin, ports: {Np: g1, Nn: GND}\nname: Cout, type: Capacitor, value: Cout, ports: {Np: Vout, Nn: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: g1}\n]\nextrainfo:The circuit is an inverting amplifier using an NMOS transistor with a gain of -gmRD. Capacitors Cin and Cout are used for input and output coupling, respectively. RD is connected to VDD, and the output is taken from the drain of M1.\n\n(b)\n\nFigure 11.15\n\nSolution Noting that $M_{1}$ and $R_{D}$ form an inverting amplifier with a gain of $-g_{m} R_{D}$, we use the results from Fig. 11.14(b) to write:\n\n$$\n\\begin{align*}\nC_{i n} & =\\left(1+A_{0}\\right) C_{F}  \\tag{11.29}\\\\\n& =\\left(1+g_{m} R_{D}\\right) C_{F} \\tag{11.30}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{equation*}\nC_{\\text {out }}=\\left(1+\\frac{1}{g_{m} R_{D}}\\right) C_{F}, \\tag{11.31}\n\\end{equation*}\n$$\n\nthus arriving at the topology shown in Fig. 11.15(b). From our analysis in Example 11.8, we have:\n\n$$\n\\begin{align*}\n\\omega_{\\text {in }} & =\\frac{1}{R_{S} C_{i n}}  \\tag{11.32}\\\\\n& =\\frac{1}{R_{S}\\left(1+g_{m} R_{D}\\right) C_{F}} \\tag{11.33}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{align*}\n\\omega_{\\text {out }} & =\\frac{1}{R_{D} C_{\\text {out }}}  \\tag{11.34}\\\\\n& =\\frac{1}{R_{D}\\left(1+\\frac{1}{g_{m} R_{D}}\\right) C_{F}} . \\tag{11.35}\n\\end{align*}\n$$\n\nWhy does the circuit in (a) have one pole while that in (b) has two? This is explained below.\nExercise Calculate $C_{i n}$ if $g_{m}=(150 \\Omega)^{-1}, R_{D}=2 \\mathrm{k} \\Omega$, and $C_{F}=80 \\mathrm{fF}$.\n\nThe reader may find the preceding example somewhat inconsistent. Miller's theorem requires that the floating impedance and the voltage gain be calculated at the same frequency, whereas Example 11.10 uses the low-frequency gain, $g_{m} R_{D}$, even for determining high-frequency poles. After all, we know that the presence of $C_{F}$ reduces the voltage gain from the gate of $M_{1}$ to the output at high frequencies. Due to this inconsistency, we refer to the procedure in Example 11.10 as the \"Miller approximation.\" Without this approximation, i.e., if $A_{0}$ were expressed in terms of circuit parameters at the frequency of interest, applying Miller's theorem would be no simpler than directly solving the circuit's equations. Because of the approximation, the circuit in the example exhibits two poles.\n\nAnother consequence of the Miller approximation is that it may eliminate a zero of the transfer function. We address this issue in Section 11.4.3.\n\nThe general expression in Eq. (11.22) can be interpreted as follows: an impedance connected between the input and output of an inverting amplifier with a gain of $A_{v}$ appears to be reduced by a factor of $1+A_{v}$ when viewed at the input (relative to ground). This reduction in impedance (and corresponding increase in capacitance) is known as the \"Miller effect.\" For instance, we say the Miller effect increases the input capacitance of the circuit in Fig. 11.15(a) to $\\left(1+g_{m} R_{D}\\right) C_{F}$."
},
{
    "text": "Our prior analysis and the illustration in Fig. 11.12 highlight the desirability of a method that converts a floating capacitor into two grounded capacitors, allowing each node to be associated with one pole. Miller's theorem serves this purpose. However, it was originally devised for a different reason. In the late 1910s, John Miller observed that parasitic capacitances between the input and output of an amplifier could significantly reduce the input impedance. He then proposed an analysis that led to the formulation of the theorem.\n\nConsider the general circuit depicted in Fig. 11.13(a), where the floating impedance, $Z_{F}$, is situated between nodes 1 and 2. Our goal is to transform $Z_{F}$ into two grounded impedances, as shown in Fig. 11.13(b), while ensuring that all currents and voltages in the circuit remain unchanged. To determine $Z_{1}$ and $Z_{2}$, we make two observations: (1) the current drawn by $Z_{F}$ from node 1 in Fig. 11.13(a) must equal the current drawn by $Z_{1}$ in Fig. 11.13(b); and (2) the current injected into node 2 in Fig. 11.13(a) must match the current injected by $Z_{2}$ in Fig. 11.13(b). (These conditions ensure the circuit remains unaffected by the transformation.) Thus,\n\n$$\n\\begin{align*}\n& \\frac{V_{1}-V_{2}}{Z_{F}}=\\frac{V_{1}}{Z_{1}}  \\tag{11.19}\\\\\n& \\frac{V_{1}-V_{2}}{Z_{F}}=-\\frac{V_{2}}{Z_{2}} \\tag{11.20}\n\\end{align*}\n$$\n\nLetting $A_{v}$ denote the voltage gain from node 1 to node 2, we derive\n\n$$\n\\begin{align*}\nZ_{1} & =Z_{F} \\frac{V_{1}}{V_{1}-V_{2}}  \\tag{11.21}\\\\\n& =\\frac{Z_{F}}{1-A_{v}} \\tag{11.22}\n\\end{align*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: ZF, type: Resistor, value: ZF, ports: {N1: 1, N2: 2}\n]\nextrainfo:The circuit in diagram (a) includes a floating impedance ZF between nodes 1 and 2, with voltage sources V1 and V2 connected to ground at nodes 1 and 2 respectively.\nimage_name:(b)\ndescription:\n[\nname: Z1, type: Resistor, value: Z1, ports: {N1: 1, N2: GND}\nname: Z2, type: Resistor, value: Z2, ports: {N1: 2, N2: GND}\n]\nextrainfo:The circuit diagram (b) represents the equivalent circuit using Miller's theorem, where the floating impedance ZF is replaced by two grounded impedances Z1 and Z2. V1 and V2 are voltage sources connected to nodes 1 and 2 respectively, with both having a common ground.\n\nFigure 11.13 (a) General circuit including a floating impedance, (b) equivalent of (a) as obtained from Miller's theorem.\nand\n\n$$\n\\begin{align*}\nZ_{2} & =Z_{F} \\frac{-V_{2}}{V_{1}-V_{2}}  \\tag{11.23}\\\\\n& =\\frac{Z_{F}}{1-\\frac{1}{A_{v}}} \\tag{11.24}\n\\end{align*}\n$$\n\nKnown as Miller's theorem, the results expressed by Eqs. (11.22) and (11.24) are highly useful in analysis and design. Specifically, Eq. (11.22) indicates that the floating impedance is reduced by a factor of $1-A_{v}$ when \"seen\" at node 1.\n\nAs a significant example of Miller's theorem, suppose $Z_{F}$ is a single capacitor, $C_{F}$, connected between the input and output of an inverting amplifier [Fig. 11.14(a)]. Applying Eq. (11.22), we get\n\n$$\n\\begin{align*}\nZ_{1} & =\\frac{Z_{F}}{1-A_{v}}  \\tag{11.25}\\\\\n& =\\frac{1}{\\left(1+A_{0}\\right) C_{F} S} \\tag{11.26}\n\\end{align*}\n$$\n\nwhere $A_{v}=-A_{0}$ is substituted. What type of impedance is $Z_{1}$? The $1 / s$ dependence indicates a capacitor with a value of $\\left(1+A_{0}\\right) C_{F}$, as if $C_{F}$ is \"amplified\" by a factor of $1+A_{0}$. In other words, a capacitor $C_{F}$ connected between the input and output of an inverting amplifier with a gain of $A_{0}$ increases the input capacitance by $\\left(1+A_{0}\\right) C_{F}$. This phenomenon is referred to as \"Miller multiplication\" of the capacitor.\n\nThe impact of $C_{F}$ at the output can be derived from Eq. (11.24):\n\n$$\n\\begin{align*}\nZ_{2} & =\\frac{Z_{F}}{1-\\frac{1}{A_{v}}}  \\tag{11.27}\\\\\n& =\\frac{1}{\\left(1+\\frac{1}{A_{0}}\\right) C_{F} S} \\tag{11.28}\n\\end{align*}\n$$\n\nwhich approximates $\\left(C_{F} s\\right)^{-1}$ if $A_{0} \\gg 1$. Figure 11.14(b) summarizes these findings.\nThe Miller multiplication of capacitors can also be understood intuitively. Imagine the input voltage in Fig. 11.14(a) increases slightly by $\\Delta V$. The output then decreases by $A_{0} \\Delta V$. Consequently, the voltage across $C_{F}$ increases by $\\left(1+A_{0}\\right) \\Delta V$, necessitating a proportional charge from the input. In contrast, if $C_{F}$ were not a floating capacitor and its right plate voltage remained constant, it would only experience a voltage change of $\\Delta V$ and require less charge.\nimage_name:(a)\ndescription:\n[\nname: CF, type: Capacitor, value: CF, ports: {Np: Vout, Nn: Vin}\nname: A0, type: OpAmp, value: A0, ports: {InP: GND, InN: Vin, OutP: Vout, OutN: GND}\n]\nextrainfo:The circuit is an inverting amplifier with a floating capacitor CF connected between the output and input of the op-amp A0. The input voltage is Vin and the output voltage is Vout. The circuit demonstrates the Miller effect.\nimage_name:(b)\ndescription:\n[\nname: A0, type: OpAmp, value: A0, ports: {InP: GND, InN: Vin, Out: Vout}\nname: CF(1+1/A0), type: Capacitor, value: CF(1+1/A0), ports: {Np: Vout, Nn: GND}\nname: CF(1+A0), type: Capacitor, value: CF(1+A0), ports: {Np: Vin, Nn: GND}\n]\nextrainfo:The circuit diagram (b) is an equivalent circuit using Miller's theorem, converting a floating capacitor to a grounded capacitor. It shows an inverting amplifier configuration with an operational amplifier and a grounded capacitor CF(1+1/A0). The input voltage is Vin, and the output is Vout.\n\nFigure 11.14 (a) Inverting circuit with floating capacitor, (b) equivalent circuit as obtained from Miller's theorem.\n\nThe preceding study underscores the utility of Miller's theorem for converting floating capacitors to grounded capacitors. The following example illustrates this principle.\n\nDid you know?\n\nThe Miller effect was discovered by John Miller in 1919. In his original paper, Miller noted that \"the apparent input capacity can become a number of times greater than the actual capacities between the tube electrodes.\" (At that time, capacitance and capacitor were referred to as \"capacity\" and \"condensor,\" respectively.) A curious aspect of Miller multiplication is that if the amplifier gain is positive and greater than unity, the input capacitance becomes negative, $\\left(1-A_{v}\\right) C_{F}$. Does this occur? Indeed, it does. Below is a circuit that realizes a negative capacitance. Since the gain from $V_{i n 1}$ to $V_{Y}$ (and from $V_{i n 2}$ to $V_{X}$) is positive, $C_{F}$ can be multiplied by a negative number. This technique is employed in many high-speed circuits to partially cancel the effects of undesired (positive) capacitances.\nimage_name:Circuit with negative input capacitance\ndescription:\n[\nname: M1, type: NMOS, ports: {S: P, D: X, G: Vin1}\nname: M2, type: NMOS, ports: {S: P, D: Y, G: Vin2}\nname: RD1, type: Resistor, value: RD, ports: {N1: VDD, N2: X}\nname: RD2, type: Resistor, value: RD, ports: {N1: VDD, N2: Y}\nname: CF1, type: Capacitor, value: CF, ports: {Np: Vin1, Nn: X}\nname: CF2, type: Capacitor, value: CF, ports: {Np: Vin2, Nn: Y}\nname: I1, type: CurrentSource, ports: {Np: P, Nn: GND}\n]\nextrainfo:The circuit uses NMOS transistors M1 and M2 to create a negative input capacitance effect. The resistors RD and capacitors CF are used to achieve the desired gain and capacitance cancellation. The current source provides biasing.\n\nCircuit with negative input capacitance.\n\nExample $\\quad$ Estimate the pole of the circuit shown in Fig. 11.15(a). Assume $\\lambda=0$.\nimage_name:(a)\ndescription:\n[\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: g1}\nname: CF, type: Capacitor, value: CF, ports: {Np: g1, Nn: Vout}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: g1}\n]\nextrainfo:The circuit uses NMOS transistor M1 and resistor RD to form an inverting amplifier with a gain of -gmRD. Capacitor CF is used for capacitance cancellation. The circuit exhibits a negative input capacitance effect.\n\n(a)\nimage_name:Figure 11.15(b)\ndescription:\n[\nname: Rs, type: Resistor, value: Rs, ports: {N1: Vin, N2: g1}\nname: Cin, type: Capacitor, value: Cin, ports: {Np: g1, Nn: GND}\nname: Cout, type: Capacitor, value: Cout, ports: {Np: Vout, Nn: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: g1}\n]\nextrainfo:The circuit is an inverting amplifier using an NMOS transistor with a gain of -gmRD. Capacitors Cin and Cout are used for input and output coupling, respectively. RD is connected to VDD, and the output is taken from the drain of M1.\n\n(b)\n\nFigure 11.15\n\nSolution Noting that $M_{1}$ and $R_{D}$ form an inverting amplifier with a gain of $-g_{m} R_{D}$, we use the results from Fig. 11.14(b) to write:\n\n$$\n\\begin{align*}\nC_{i n} & =\\left(1+A_{0}\\right) C_{F}  \\tag{11.29}\\\\\n& =\\left(1+g_{m} R_{D}\\right) C_{F} \\tag{11.30}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{equation*}\nC_{\\text {out }}=\\left(1+\\frac{1}{g_{m} R_{D}}\\right) C_{F}, \\tag{11.31}\n\\end{equation*}\n$$\n\nthus arriving at the topology shown in Fig. 11.15(b). From our analysis in Example 11.8, we have:\n\n$$\n\\begin{align*}\n\\omega_{\\text {in }} & =\\frac{1}{R_{S} C_{i n}}  \\tag{11.32}\\\\\n& =\\frac{1}{R_{S}\\left(1+g_{m} R_{D}\\right) C_{F}} \\tag{11.33}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{align*}\n\\omega_{\\text {out }} & =\\frac{1}{R_{D} C_{\\text {out }}}  \\tag{11.34}\\\\\n& =\\frac{1}{R_{D}\\left(1+\\frac{1}{g_{m} R_{D}}\\right) C_{F}} . \\tag{11.35}\n\\end{align*}\n$$\n\nWhy does the circuit in (a) have one pole while that in (b) has two? This is explained below.\nExercise Calculate $C_{i n}$ if $g_{m}=(150 \\Omega)^{-1}, R_{D}=2 \\mathrm{k} \\Omega$, and $C_{F}=80 \\mathrm{fF}$.\n\nThe reader may find the preceding example somewhat inconsistent. Miller's theorem requires that the floating impedance and the voltage gain be computed at the same frequency, whereas Example 11.10 uses the low-frequency gain, $g_{m} R_{D}$, even for determining high-frequency poles. After all, we know that the presence of $C_{F}$ reduces the voltage gain from the gate of $M_{1}$ to the output at high frequencies. Due to this inconsistency, we refer to the procedure in Example 11.10 as the \"Miller approximation.\" Without this approximation, i.e., if $A_{0}$ were expressed in terms of circuit parameters at the frequency of interest, applying Miller's theorem would be no simpler than directly solving the circuit's equations. Because of the approximation, the circuit in the example exhibits two poles.\n\nAnother artifact of the Miller approximation is that it may eliminate a zero of the transfer function. We address this issue in Section 11.4.3.\n\nThe general expression in Eq. (11.22) can be interpreted as follows: an impedance connected between the input and output of an inverting amplifier with a gain of $A_{v}$ is reduced by a factor of $1+A_{v}$ when viewed at the input (relative to ground). This reduction in impedance (and hence increase in capacitance) is termed the \"Miller effect.\" For instance, we say the Miller effect increases the input capacitance of the circuit in Fig. 11.15(a) to $\\left(1+g_{m} R_{D}\\right) C_{F}$."
},
{
    "text": "Our preceding analysis and the illustration in Fig. 11.12 highlight the need for a method that converts a floating capacitor into two grounded capacitors, enabling the association of one pole with each node. Miller's theorem serves this purpose. However, Miller's theorem was initially developed for a different reason. In the late 1910s, John Miller observed that parasitic capacitances between the input and output of an amplifier could significantly reduce the input impedance. He then proposed an analysis that led to the formulation of the theorem.\n\nConsider the general circuit depicted in Fig. 11.13(a), where the floating impedance, $Z_{F}$, is situated between nodes 1 and 2. Our goal is to transform $Z_{F}$ into two grounded impedances, as shown in Fig. 11.13(b), while ensuring that all currents and voltages in the circuit remain unaltered. To determine $Z_{1}$ and $Z_{2}$, we make two observations: (1) the current drawn by $Z_{F}$ from node 1 in Fig. 11.13(a) must equal the current drawn by $Z_{1}$ in Fig. 11.13(b); and (2) the current injected into node 2 in Fig. 11.13(a) must match the current injected by $Z_{2}$ in Fig. 11.13(b). (These conditions ensure that the circuit does not \"detect\" the transformation.) Thus,\n\n$$\n\\begin{align*}\n& \\frac{V_{1}-V_{2}}{Z_{F}}=\\frac{V_{1}}{Z_{1}}  \\tag{11.19}\\\\\n& \\frac{V_{1}-V_{2}}{Z_{F}}=-\\frac{V_{2}}{Z_{2}} \\tag{11.20}\n\\end{align*}\n$$\n\nLetting $A_{v}$ denote the voltage gain from node 1 to node 2, we derive\n\n$$\n\\begin{align*}\nZ_{1} & =Z_{F} \\frac{V_{1}}{V_{1}-V_{2}}  \\tag{11.21}\\\\\n& =\\frac{Z_{F}}{1-A_{v}} \\tag{11.22}\n\\end{align*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: ZF, type: Resistor, value: ZF, ports: {N1: 1, N2: 2}\n]\nextrainfo:The circuit in diagram (a) features a floating impedance ZF between nodes 1 and 2, with voltage sources V1 and V2 connected to ground at nodes 1 and 2, respectively.\nimage_name:(b)\ndescription:\n[\nname: Z1, type: Resistor, value: Z1, ports: {N1: 1, N2: GND}\nname: Z2, type: Resistor, value: Z2, ports: {N1: 2, N2: GND}\n]\nextrainfo:The circuit diagram (b) illustrates the equivalent circuit using Miller's theorem, where the floating impedance ZF is replaced by two grounded impedances Z1 and Z2. V1 and V2 are voltage sources connected to nodes 1 and 2, respectively, with a common ground.\n\nFigure 11.13 (a) General circuit with a floating impedance, (b) equivalent of (a) derived from Miller's theorem.\nand\n\n$$\n\\begin{align*}\nZ_{2} & =Z_{F} \\frac{-V_{2}}{V_{1}-V_{2}}  \\tag{11.23}\\\\\n& =\\frac{Z_{F}}{1-\\frac{1}{A_{v}}} \\tag{11.24}\n\\end{align*}\n$$\n\nKnown as Miller's theorem, the results expressed by Eqs. (11.22) and (11.24) are highly useful in analysis and design. Specifically, Eq. (11.22) indicates that the floating impedance is reduced by a factor of $1-A_{v}$ when \"observed\" at node 1.\n\nAs a significant example of Miller's theorem, suppose $Z_{F}$ is a single capacitor, $C_{F}$, connected between the input and output of an inverting amplifier [Fig. 11.14(a)]. Applying Eq. (11.22), we get\n\n$$\n\\begin{align*}\nZ_{1} & =\\frac{Z_{F}}{1-A_{v}}  \\tag{11.25}\\\\\n& =\\frac{1}{\\left(1+A_{0}\\right) C_{F} S} \\tag{11.26}\n\\end{align*}\n$$\n\nwhere $A_{v}=-A_{0}$ is substituted. What type of impedance is $Z_{1}$? The $1 / s$ dependence indicates a capacitor of value $\\left(1+A_{0}\\right) C_{F}$, as if $C_{F}$ is \"amplified\" by a factor of $1+A_{0}$. In other words, a capacitor $C_{F}$ connected between the input and output of an inverting amplifier with a gain of $A_{0}$ increases the input capacitance to $\\left(1+A_{0}\\right) C_{F}$. This phenomenon is referred to as \"Miller multiplication\" of the capacitor.\n\nThe impact of $C_{F}$ at the output can be derived from Eq. (11.24):\n\n$$\n\\begin{align*}\nZ_{2} & =\\frac{Z_{F}}{1-\\frac{1}{A_{v}}}  \\tag{11.27}\\\\\n& =\\frac{1}{\\left(1+\\frac{1}{A_{0}}\\right) C_{F} S} \\tag{11.28}\n\\end{align*}\n$$\n\nwhich approximates $\\left(C_{F} s\\right)^{-1}$ if $A_{0} \\gg 1$. Figure 11.14(b) summarizes these findings.\nThe Miller multiplication of capacitors can also be understood intuitively. Assume the input voltage in Fig. 11.14(a) increases by a small amount $\\Delta V$. The output then decreases by $A_{0} \\Delta V$. Consequently, the voltage across $C_{F}$ rises by $\\left(1+A_{0}\\right) \\Delta V$, necessitating a proportional charge from the input. In contrast, if $C_{F}$ were not a floating capacitor and its right plate voltage remained unchanged, it would only experience a voltage change of $\\Delta V$ and require less charge.\nimage_name:(a)\ndescription:\n[\nname: CF, type: Capacitor, value: CF, ports: {Np: Vout, Nn: Vin}\nname: A0, type: OpAmp, value: A0, ports: {InP: GND, InN: Vin, OutP: Vout, OutN: GND}\n]\nextrainfo:The circuit consists of an inverting amplifier with a floating capacitor CF connected between the output and input of the op-amp A0. The input voltage is Vin, and the output voltage is Vout, demonstrating the Miller effect.\nimage_name:(b)\ndescription:\n[\nname: A0, type: OpAmp, value: A0, ports: {InP: GND, InN: Vin, Out: Vout}\nname: CF(1+1/A0), type: Capacitor, value: CF(1+1/A0), ports: {Np: Vout, Nn: GND}\nname: CF(1+A0), type: Capacitor, value: CF(1+A0), ports: {Np: Vin, Nn: GND}\n]\nextrainfo:The circuit diagram (b) shows the equivalent circuit using Miller's theorem, converting a floating capacitor to grounded capacitors. It depicts an inverting amplifier configuration with an operational amplifier and grounded capacitors CF(1+1/A0) and CF(1+A0). The input voltage is Vin, and the output is Vout.\n\nFigure 11.14 (a) Inverting circuit with floating capacitor, (b) equivalent circuit derived from Miller's theorem.\n\nThe foregoing study underscores the utility of Miller's theorem for converting floating capacitors to grounded capacitors. The following example illustrates this principle.\n\nDid you know?\n\nThe Miller effect was discovered by John Miller in 1919. In his original paper, Miller noted that \"the apparent input capacity can become several times greater than the actual capacities between the tube electrodes.\" (At that time, capacitance and capacitor were referred to as \"capacity\" and \"condensor,\" respectively.) A curious aspect of Miller multiplication is that if the amplifier gain is positive and greater than unity, the input capacitance becomes negative, $\\left(1-A_{v}\\right) C_{F}$. Does this occur? Indeed, it does. Below is a circuit that realizes a negative capacitance. Since the gain from $V_{i n 1}$ to $V_{Y}$ (and from $V_{i n 2}$ to $V_{X}$) is positive, $C_{F}$ can be multiplied by a negative number. This technique is employed in many high-speed circuits to partially offset the effects of undesirable (positive) capacitances.\nimage_name:Circuit with negative input capacitance\ndescription:\n[\nname: M1, type: NMOS, ports: {S: P, D: X, G: Vin1}\nname: M2, type: NMOS, ports: {S: P, D: Y, G: Vin2}\nname: RD1, type: Resistor, value: RD, ports: {N1: VDD, N2: X}\nname: RD2, type: Resistor, value: RD, ports: {N1: VDD, N2: Y}\nname: CF1, type: Capacitor, value: CF, ports: {Np: Vin1, Nn: X}\nname: CF2, type: Capacitor, value: CF, ports: {Np: Vin2, Nn: Y}\nname: I1, type: CurrentSource, ports: {Np: P, Nn: GND}\n]\nextrainfo:The circuit utilizes NMOS transistors M1 and M2 to create a negative input capacitance effect. Resistors RD and capacitors CF are used to achieve the desired gain and capacitance cancellation. The current source provides biasing.\n\nCircuit with negative input capacitance.\n\nExample $\\quad$ Estimate the pole of the circuit shown in Fig. 11.15(a). Assume $\\lambda=0$.\nimage_name:(a)\ndescription:\n[\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: g1}\nname: CF, type: Capacitor, value: CF, ports: {Np: g1, Nn: Vout}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: g1}\n]\nextrainfo:The circuit uses NMOS transistor M1 and resistor RD to form an inverting amplifier with a gain of -gmRD. Capacitor CF is used for capacitance cancellation. The circuit exhibits a negative input capacitance effect.\n\n(a)\nimage_name:Figure 11.15(b)\ndescription:\n[\nname: Rs, type: Resistor, value: Rs, ports: {N1: Vin, N2: g1}\nname: Cin, type: Capacitor, value: Cin, ports: {Np: g1, Nn: GND}\nname: Cout, type: Capacitor, value: Cout, ports: {Np: Vout, Nn: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: g1}\n]\nextrainfo:The circuit is an inverting amplifier using an NMOS transistor with a gain of -gmRD. Capacitors Cin and Cout are used for input and output coupling, respectively. RD is connected to VDD, and the output is taken from the drain of M1.\n\n(b)\n\nFigure 11.15\n\nSolution Noting that $M_{1}$ and $R_{D}$ form an inverting amplifier with a gain of $-g_{m} R_{D}$, we use the results from Fig. 11.14(b) to write:\n\n$$\n\\begin{align*}\nC_{i n} & =\\left(1+A_{0}\\right) C_{F}  \\tag{11.29}\\\\\n& =\\left(1+g_{m} R_{D}\\right) C_{F} \\tag{11.30}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{equation*}\nC_{\\text {out }}=\\left(1+\\frac{1}{g_{m} R_{D}}\\right) C_{F}, \\tag{11.31}\n\\end{equation*}\n$$\n\nthus arriving at the topology shown in Fig. 11.15(b). From our analysis in Example 11.8, we have:\n\n$$\n\\begin{align*}\n\\omega_{\\text {in }} & =\\frac{1}{R_{S} C_{i n}}  \\tag{11.32}\\\\\n& =\\frac{1}{R_{S}\\left(1+g_{m} R_{D}\\right) C_{F}} \\tag{11.33}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{align*}\n\\omega_{\\text {out }} & =\\frac{1}{R_{D} C_{\\text {out }}}  \\tag{11.34}\\\\\n& =\\frac{1}{R_{D}\\left(1+\\frac{1}{g_{m} R_{D}}\\right) C_{F}} . \\tag{11.35}\n\\end{align*}\n$$\n\nWhy does the circuit in (a) have one pole while that in (b) has two? This is explained below.\nExercise Calculate $C_{i n}$ if $g_{m}=(150 \\Omega)^{-1}, R_{D}=2 \\mathrm{k} \\Omega$, and $C_{F}=80 \\mathrm{fF}$.\n\nThe reader may find the preceding example somewhat inconsistent. Miller's theorem requires that the floating impedance and the voltage gain be computed at the same frequency, whereas Example 11.10 uses the low-frequency gain, $g_{m} R_{D}$, even for determining high-frequency poles. After all, we know that the presence of $C_{F}$ reduces the voltage gain from the gate of $M_{1}$ to the output at high frequencies. Due to this inconsistency, we refer to the procedure in Example 11.10 as the \"Miller approximation.\" Without this approximation, i.e., if $A_{0}$ were expressed in terms of circuit parameters at the frequency of interest, applying Miller's theorem would be no simpler than directly solving the circuit's equations. Because of the approximation, the circuit in the example exhibits two poles.\n\nAnother artifact of the Miller approximation is that it may eliminate a zero of the transfer function. We address this issue in Section 11.4.3.\n\nThe general expression in Eq. (11.22) can be interpreted as follows: an impedance connected between the input and output of an inverting amplifier with a gain of $A_{v}$ is reduced by a factor of $1+A_{v}$ when viewed at the input (relative to ground). This reduction in impedance (and corresponding increase in capacitance) is termed the \"Miller effect.\" For instance, we say the Miller effect increases the input capacitance of the circuit in Fig. 11.15(a) to $\\left(1+g_{m} R_{D}\\right) C_{F}$."
},
{
    "text": "Our preceding analysis and the illustration in Fig. 11.12 highlight the desirability of a method that converts a floating capacitor into two grounded capacitors, allowing each node to be associated with one pole. Miller's theorem serves this purpose. However, Miller's theorem was initially developed for a different reason. In the late 1910s, John Miller observed that parasitic capacitances between the input and output of an amplifier could significantly reduce the input impedance. He subsequently proposed an analysis that led to the formulation of the theorem.\n\nConsider the generic circuit depicted in Fig. 11.13(a), where the floating impedance, $Z_{F}$, is situated between nodes 1 and 2. Our goal is to transform $Z_{F}$ into two grounded impedances, as shown in Fig. 11.13(b), while ensuring that all currents and voltages in the circuit remain unaltered. To determine $Z_{1}$ and $Z_{2}$, we make two observations: (1) the current drawn by $Z_{F}$ from node 1 in Fig. 11.13(a) must equal the current drawn by $Z_{1}$ in Fig. 11.13(b); and (2) the current injected into node 2 in Fig. 11.13(a) must match the current injected by $Z_{2}$ in Fig. 11.13(b). (These conditions ensure that the circuit is unaffected by the transformation.) Thus,\n\n$$\n\\begin{align*}\n& \\frac{V_{1}-V_{2}}{Z_{F}}=\\frac{V_{1}}{Z_{1}}  \\tag{11.19}\\\\\n& \\frac{V_{1}-V_{2}}{Z_{F}}=-\\frac{V_{2}}{Z_{2}} \\tag{11.20}\n\\end{align*}\n$$\n\nLetting $A_{v}$ represent the voltage gain from node 1 to node 2, we derive\n\n$$\n\\begin{align*}\nZ_{1} & =Z_{F} \\frac{V_{1}}{V_{1}-V_{2}}  \\tag{11.21}\\\\\n& =\\frac{Z_{F}}{1-A_{v}} \\tag{11.22}\n\\end{align*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: ZF, type: Resistor, value: ZF, ports: {N1: 1, N2: 2}\n]\nextrainfo:The circuit in diagram (a) features a floating impedance ZF between nodes 1 and 2, with voltage sources V1 and V2 connected to ground at nodes 1 and 2, respectively.\nimage_name:(b)\ndescription:\n[\nname: Z1, type: Resistor, value: Z1, ports: {N1: 1, N2: GND}\nname: Z2, type: Resistor, value: Z2, ports: {N1: 2, N2: GND}\n]\nextrainfo:The circuit diagram (b) illustrates the equivalent circuit using Miller's theorem, where the floating impedance ZF is replaced by two grounded impedances Z1 and Z2. Voltage sources V1 and V2 are connected to nodes 1 and 2, respectively, with a common ground.\n\nFigure 11.13 (a) General circuit with a floating impedance, (b) equivalent of (a) derived from Miller's theorem.\nand\n\n$$\n\\begin{align*}\nZ_{2} & =Z_{F} \\frac{-V_{2}}{V_{1}-V_{2}}  \\tag{11.23}\\\\\n& =\\frac{Z_{F}}{1-\\frac{1}{A_{v}}} \\tag{11.24}\n\\end{align*}\n$$\n\nKnown as Miller's theorem, the results expressed by Eqs. (11.22) and (11.24) are highly valuable in analysis and design. Specifically, Eq. (11.22) indicates that the floating impedance is reduced by a factor of $1-A_{v}$ when observed at node 1.\n\nAs a significant example of Miller's theorem, assume $Z_{F}$ is a single capacitor, $C_{F}$, connected between the input and output of an inverting amplifier [Fig. 11.14(a)]. Applying Eq. (11.22), we get\n\n$$\n\\begin{align*}\nZ_{1} & =\\frac{Z_{F}}{1-A_{v}}  \\tag{11.25}\\\\\n& =\\frac{1}{\\left(1+A_{0}\\right) C_{F} S} \\tag{11.26}\n\\end{align*}\n$$\n\nwhere $A_{v}=-A_{0}$ is substituted. What type of impedance is $Z_{1}$? The $1 / s$ dependence indicates a capacitor of value $\\left(1+A_{0}\\right) C_{F}$, as if $C_{F}$ is \"amplified\" by a factor of $1+A_{0}$. In other words, a capacitor $C_{F}$ connected between the input and output of an inverting amplifier with a gain of $A_{0}$ increases the input capacitance to $\\left(1+A_{0}\\right) C_{F}$. This phenomenon is referred to as \"Miller multiplication\" of the capacitor.\n\nThe impact of $C_{F}$ at the output can be derived from Eq. (11.24):\n\n$$\n\\begin{align*}\nZ_{2} & =\\frac{Z_{F}}{1-\\frac{1}{A_{v}}}  \\tag{11.27}\\\\\n& =\\frac{1}{\\left(1+\\frac{1}{A_{0}}\\right) C_{F} S} \\tag{11.28}\n\\end{align*}\n$$\n\nwhich approximates $\\left(C_{F} s\\right)^{-1}$ if $A_{0} \\gg 1$. Figure 11.14(b) summarizes these findings.\nThe Miller multiplication of capacitors can also be understood intuitively. Suppose the input voltage in Fig. 11.14(a) increases by a small amount $\\Delta V$. The output then decreases by $A_{0} \\Delta V$. Consequently, the voltage across $C_{F}$ increases by $\\left(1+A_{0}\\right) \\Delta V$, necessitating a proportional charge from the input. In contrast, if $C_{F}$ were not a floating capacitor and its right plate voltage remained constant, it would experience only a voltage change of $\\Delta V$ and require less charge.\nimage_name:(a)\ndescription:\n[\nname: CF, type: Capacitor, value: CF, ports: {Np: Vout, Nn: Vin}\nname: A0, type: OpAmp, value: A0, ports: {InP: GND, InN: Vin, OutP: Vout, OutN: GND}\n]\nextrainfo:The circuit is an inverting amplifier with a floating capacitor CF connected between the output and input of the op-amp A0. The input voltage is Vin, and the output voltage is Vout, demonstrating the Miller effect.\nimage_name:(b)\ndescription:\n[\nname: A0, type: OpAmp, value: A0, ports: {InP: GND, InN: Vin, Out: Vout}\nname: CF(1+1/A0), type: Capacitor, value: CF(1+1/A0), ports: {Np: Vout, Nn: GND}\nname: CF(1+A0), type: Capacitor, value: CF(1+A0), ports: {Np: Vin, Nn: GND}\n]\nextrainfo:The circuit diagram (b) represents the equivalent circuit using Miller's theorem, converting a floating capacitor to a grounded capacitor. It shows an inverting amplifier configuration with an operational amplifier and grounded capacitors CF(1+1/A0) and CF(1+A0). The input voltage is Vin, and the output is Vout.\n\nFigure 11.14 (a) Inverting circuit with floating capacitor, (b) equivalent circuit derived from Miller's theorem.\n\nThe above analysis underscores the utility of Miller's theorem for converting floating capacitors to grounded capacitors. The following example illustrates this principle.\n\nDid you know?\n\nThe Miller effect was discovered by John Miller in 1919. In his original paper, Miller noted that \"the apparent input capacity can become several times greater than the actual capacities between the tube electrodes.\" (At that time, capacitance and capacitor were referred to as \"capacity\" and \"condensor,\" respectively.) A notable aspect of Miller multiplication is that if the amplifier gain is positive and greater than unity, a negative input capacitance, $\\left(1-A_{v}\\right) C_{F}$, results. Does this occur? Indeed, it does. Below is a circuit that realizes negative capacitance. Since the gain from $V_{i n 1}$ to $V_{Y}$ (and from $V_{i n 2}$ to $V_{X}$) is positive, $C_{F}$ can be multiplied by a negative number. This technique is employed in many high-speed circuits to partially offset the effects of unwanted (positive) capacitances.\nimage_name:Circuit with negative input capacitance\ndescription:\n[\nname: M1, type: NMOS, ports: {S: P, D: X, G: Vin1}\nname: M2, type: NMOS, ports: {S: P, D: Y, G: Vin2}\nname: RD1, type: Resistor, value: RD, ports: {N1: VDD, N2: X}\nname: RD2, type: Resistor, value: RD, ports: {N1: VDD, N2: Y}\nname: CF1, type: Capacitor, value: CF, ports: {Np: Vin1, Nn: X}\nname: CF2, type: Capacitor, value: CF, ports: {Np: Vin2, Nn: Y}\nname: I1, type: CurrentSource, ports: {Np: P, Nn: GND}\n]\nextrainfo:The circuit utilizes NMOS transistors M1 and M2 to create a negative input capacitance effect. Resistors RD and capacitors CF are used to achieve the desired gain and capacitance cancellation. The current source provides biasing.\n\nCircuit with negative input capacitance.\n\nExample $\\quad$ Estimate the pole of the circuit shown in Fig. 11.15(a). Assume $\\lambda=0$.\nimage_name:(a)\ndescription:\n[\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: g1}\nname: CF, type: Capacitor, value: CF, ports: {Np: g1, Nn: Vout}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: g1}\n]\nextrainfo:The circuit uses NMOS transistor M1 and resistor RD to form an inverting amplifier with a gain of -gmRD. Capacitor CF is used for capacitance cancellation. The circuit exhibits a negative input capacitance effect.\n\n(a)\nimage_name:Figure 11.15(b)\ndescription:\n[\nname: Rs, type: Resistor, value: Rs, ports: {N1: Vin, N2: g1}\nname: Cin, type: Capacitor, value: Cin, ports: {Np: g1, Nn: GND}\nname: Cout, type: Capacitor, value: Cout, ports: {Np: Vout, Nn: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: g1}\n]\nextrainfo:The circuit is an inverting amplifier using an NMOS transistor with a gain of -gmRD. Capacitors Cin and Cout are used for input and output coupling, respectively. RD is connected to VDD, and the output is taken from the drain of M1.\n\n(b)\n\nFigure 11.15\n\nSolution Noting that $M_{1}$ and $R_{D}$ form an inverting amplifier with a gain of $-g_{m} R_{D}$, we use the results from Fig. 11.14(b) to write:\n\n$$\n\\begin{align*}\nC_{i n} & =\\left(1+A_{0}\\right) C_{F}  \\tag{11.29}\\\\\n& =\\left(1+g_{m} R_{D}\\right) C_{F} \\tag{11.30}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{equation*}\nC_{\\text {out }}=\\left(1+\\frac{1}{g_{m} R_{D}}\\right) C_{F}, \\tag{11.31}\n\\end{equation*}\n$$\n\nthus arriving at the topology shown in Fig. 11.15(b). From our analysis in Example 11.8, we have:\n\n$$\n\\begin{align*}\n\\omega_{\\text {in }} & =\\frac{1}{R_{S} C_{i n}}  \\tag{11.32}\\\\\n& =\\frac{1}{R_{S}\\left(1+g_{m} R_{D}\\right) C_{F}} \\tag{11.33}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{align*}\n\\omega_{\\text {out }} & =\\frac{1}{R_{D} C_{\\text {out }}}  \\tag{11.34}\\\\\n& =\\frac{1}{R_{D}\\left(1+\\frac{1}{g_{m} R_{D}}\\right) C_{F}} . \\tag{11.35}\n\\end{align*}\n$$\n\nWhy does the circuit in (a) have one pole while that in (b) has two? This is explained below.\nExercise Calculate $C_{i n}$ if $g_{m}=(150 \\Omega)^{-1}, R_{D}=2 \\mathrm{k} \\Omega$, and $C_{F}=80 \\mathrm{fF}$.\n\nThe reader may find the preceding example somewhat inconsistent. Miller's theorem requires that the floating impedance and the voltage gain be computed at the same frequency, whereas Example 11.10 uses the low-frequency gain, $g_{m} R_{D}$, even for determining high-frequency poles. After all, we know that the presence of $C_{F}$ reduces the voltage gain from the gate of $M_{1}$ to the output at high frequencies. Due to this inconsistency, we refer to the procedure in Example 11.10 as the \"Miller approximation.\" Without this approximation, i.e., if $A_{0}$ were expressed in terms of circuit parameters at the frequency of interest, applying Miller's theorem would be no simpler than directly solving the circuit's equations. Because of the approximation, the circuit in the example exhibits two poles.\n\nAnother artifact of the Miller approximation is that it may eliminate a zero of the transfer function. We address this issue in Section 11.4.3.\n\nThe general expression in Eq. (11.22) can be interpreted as follows: an impedance connected between the input and output of an inverting amplifier with a gain of $A_{v}$ is reduced by a factor of $1+A_{v}$ when viewed at the input (relative to ground). This reduction of impedance (and corresponding increase in capacitance) is termed the \"Miller effect.\" For instance, we say the Miller effect increases the input capacitance of the circuit in Fig. 11.15(a) to $\\left(1+g_{m} R_{D}\\right) C_{F}$."
},
{
    "text": "Our prior analysis and the illustration in Fig. 11.12 highlight the desirability of a method that converts a floating capacitor into two grounded capacitors, allowing each node to be associated with one pole. Miller's theorem serves this purpose. Originally, however, Miller's theorem was developed for a different reason. In the late 1910s, John Miller observed that parasitic capacitances between an amplifier's input and output could significantly reduce the input impedance. He subsequently proposed an analysis that led to the formulation of the theorem.\n\nConsider the general circuit depicted in Fig. 11.13(a), where the floating impedance, $Z_{F}$, is situated between nodes 1 and 2. Our goal is to transform $Z_{F}$ into two grounded impedances, as shown in Fig. 11.13(b), while ensuring all circuit currents and voltages remain unchanged. To determine $Z_{1}$ and $Z_{2}$, we make two observations: (1) the current drawn by $Z_{F}$ from node 1 in Fig. 11.13(a) must equal the current drawn by $Z_{1}$ in Fig. 11.13(b); and (2) the current injected into node 2 in Fig. 11.13(a) must match the current injected by $Z_{2}$ in Fig. 11.13(b). (These conditions ensure the circuit remains unaffected by the transformation.) Thus,\n\n$$\n\\begin{align*}\n& \\frac{V_{1}-V_{2}}{Z_{F}}=\\frac{V_{1}}{Z_{1}}  \\tag{11.19}\\\\\n& \\frac{V_{1}-V_{2}}{Z_{F}}=-\\frac{V_{2}}{Z_{2}} \\tag{11.20}\n\\end{align*}\n$$\n\nLetting $A_{v}$ denote the voltage gain from node 1 to node 2, we derive\n\n$$\n\\begin{align*}\nZ_{1} & =Z_{F} \\frac{V_{1}}{V_{1}-V_{2}}  \\tag{11.21}\\\\\n& =\\frac{Z_{F}}{1-A_{v}} \\tag{11.22}\n\\end{align*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: ZF, type: Resistor, value: ZF, ports: {N1: 1, N2: 2}\n]\nextrainfo:The circuit in diagram (a) includes a floating impedance ZF between nodes 1 and 2, with voltage sources V1 and V2 connected to ground at nodes 1 and 2 respectively.\nimage_name:(b)\ndescription:\n[\nname: Z1, type: Resistor, value: Z1, ports: {N1: 1, N2: GND}\nname: Z2, type: Resistor, value: Z2, ports: {N1: 2, N2: GND}\n]\nextrainfo:The circuit diagram (b) represents the equivalent circuit using Miller's theorem, where the floating impedance ZF is replaced by two grounded impedances Z1 and Z2. V1 and V2 are voltage sources connected to nodes 1 and 2 respectively, with both having a common ground.\n\nFigure 11.13 (a) General circuit including a floating impedance, (b) equivalent of (a) as obtained from Miller's theorem.\nand\n\n$$\n\\begin{align*}\nZ_{2} & =Z_{F} \\frac{-V_{2}}{V_{1}-V_{2}}  \\tag{11.23}\\\\\n& =\\frac{Z_{F}}{1-\\frac{1}{A_{v}}} \\tag{11.24}\n\\end{align*}\n$$\n\nKnown as Miller's theorem, the results expressed by Eqs. (11.22) and (11.24) are highly useful in analysis and design. Specifically, Eq. (11.22) indicates that the floating impedance is reduced by a factor of $1-A_{v}$ when \"viewed\" at node 1.\n\nAs a significant example of Miller's theorem, suppose $Z_{F}$ is a single capacitor, $C_{F}$, connected between the input and output of an inverting amplifier [Fig. 11.14(a)]. Applying Eq. (11.22), we get\n\n$$\n\\begin{align*}\nZ_{1} & =\\frac{Z_{F}}{1-A_{v}}  \\tag{11.25}\\\\\n& =\\frac{1}{\\left(1+A_{0}\\right) C_{F} S} \\tag{11.26}\n\\end{align*}\n$$\n\nwhere $A_{v}=-A_{0}$ is substituted. What type of impedance is $Z_{1}$? The $1 / s$ dependence indicates a capacitor of value $\\left(1+A_{0}\\right) C_{F}$, as if $C_{F}$ is \"amplified\" by a factor of $1+A_{0}$. In other words, a capacitor $C_{F}$ connected between the input and output of an inverting amplifier with a gain of $A_{0}$ increases the input capacitance to $\\left(1+A_{0}\\right) C_{F}$. This phenomenon is termed \"Miller multiplication\" of the capacitor.\n\nThe impact of $C_{F}$ at the output can be derived from Eq. (11.24):\n\n$$\n\\begin{align*}\nZ_{2} & =\\frac{Z_{F}}{1-\\frac{1}{A_{v}}}  \\tag{11.27}\\\\\n& =\\frac{1}{\\left(1+\\frac{1}{A_{0}}\\right) C_{F} S} \\tag{11.28}\n\\end{align*}\n$$\n\nwhich approximates $\\left(C_{F} s\\right)^{-1}$ if $A_{0} \\gg 1$. Figure 11.14(b) summarizes these findings.\nThe Miller multiplication of capacitors can also be understood intuitively. Imagine the input voltage in Fig. 11.14(a) increases slightly by $\\Delta V$. The output then decreases by $A_{0} \\Delta V$. Consequently, the voltage across $C_{F}$ rises by $\\left(1+A_{0}\\right) \\Delta V$, necessitating a proportional charge from the input. In contrast, if $C_{F}$ were not a floating capacitor and its right plate voltage remained constant, it would experience only a $\\Delta V$ voltage change, requiring less charge.\nimage_name:(a)\ndescription:\n[\nname: CF, type: Capacitor, value: CF, ports: {Np: Vout, Nn: Vin}\nname: A0, type: OpAmp, value: A0, ports: {InP: GND, InN: Vin, OutP: Vout, OutN: GND}\n]\nextrainfo:The circuit is an inverting amplifier with a floating capacitor CF connected between the output and input of the op-amp A0. The input voltage is Vin and the output voltage is Vout. The circuit demonstrates the Miller effect.\nimage_name:(b)\ndescription:\n[\nname: A0, type: OpAmp, value: A0, ports: {InP: GND, InN: Vin, Out: Vout}\nname: CF(1+1/A0), type: Capacitor, value: CF(1+1/A0), ports: {Np: Vout, Nn: GND}\nname: CF(1+A0), type: Capacitor, value: CF(1+A0), ports: {Np: Vin, Nn: GND}\n]\nextrainfo:The circuit diagram (b) is an equivalent circuit using Miller's theorem, converting a floating capacitor to a grounded capacitor. It shows an inverting amplifier configuration with an operational amplifier and a grounded capacitor CF(1+1/A0). The input voltage is Vin, and the output is Vout.\n\nFigure 11.14 (a) Inverting circuit with floating capacitor, (b) equivalent circuit as obtained from Miller's theorem.\n\nThe preceding study underscores the utility of Miller's theorem for converting floating capacitors to grounded capacitors. The following example illustrates this principle.\n\nDid you know?\n\nThe Miller effect was discovered by John Miller in 1919. In his original paper, Miller noted that \"the apparent input capacity can become several times greater than the actual capacities between the tube electrodes.\" (At that time, capacitance and capacitor were referred to as \"capacity\" and \"condensor,\" respectively.) An intriguing aspect of Miller multiplication is that if the amplifier gain is positive and exceeds unity, a negative input capacitance, $\\left(1-A_{v}\\right) C_{F}$, results. Does this occur? Indeed, it does. Below is a circuit that realizes a negative capacitance. Since the gain from $V_{i n 1}$ to $V_{Y}$ (and from $V_{i n 2}$ to $V_{X}$) is positive, $C_{F}$ can be multiplied by a negative number. This technique is employed in many high-speed circuits to partially offset the effects of undesired (positive) capacitances.\nimage_name:Circuit with negative input capacitance\ndescription:\n[\nname: M1, type: NMOS, ports: {S: P, D: X, G: Vin1}\nname: M2, type: NMOS, ports: {S: P, D: Y, G: Vin2}\nname: RD1, type: Resistor, value: RD, ports: {N1: VDD, N2: X}\nname: RD2, type: Resistor, value: RD, ports: {N1: VDD, N2: Y}\nname: CF1, type: Capacitor, value: CF, ports: {Np: Vin1, Nn: X}\nname: CF2, type: Capacitor, value: CF, ports: {Np: Vin2, Nn: Y}\nname: I1, type: CurrentSource, ports: {Np: P, Nn: GND}\n]\nextrainfo:The circuit uses NMOS transistors M1 and M2 to create a negative input capacitance effect. The resistors RD and capacitors CF are used to achieve the desired gain and capacitance cancellation. The current source provides biasing.\n\nCircuit with negative input capacitance.\n\nExample $\\quad$ Estimate the pole of the circuit shown in Fig. 11.15(a). Assume $\\lambda=0$.\nimage_name:(a)\ndescription:\n[\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: g1}\nname: CF, type: Capacitor, value: CF, ports: {Np: g1, Nn: Vout}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: g1}\n]\nextrainfo:The circuit uses NMOS transistor M1 and resistor RD to form an inverting amplifier with a gain of -gmRD. Capacitor CF is used for capacitance cancellation. The circuit exhibits a negative input capacitance effect.\n\n(a)\nimage_name:Figure 11.15(b)\ndescription:\n[\nname: Rs, type: Resistor, value: Rs, ports: {N1: Vin, N2: g1}\nname: Cin, type: Capacitor, value: Cin, ports: {Np: g1, Nn: GND}\nname: Cout, type: Capacitor, value: Cout, ports: {Np: Vout, Nn: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: g1}\n]\nextrainfo:The circuit is an inverting amplifier using an NMOS transistor with a gain of -gmRD. Capacitors Cin and Cout are used for input and output coupling, respectively. RD is connected to VDD, and the output is taken from the drain of M1.\n\n(b)\n\nFigure 11.15\n\nSolution Noting that $M_{1}$ and $R_{D}$ form an inverting amplifier with a gain of $-g_{m} R_{D}$, we use the results from Fig. 11.14(b) to write:\n\n$$\n\\begin{align*}\nC_{i n} & =\\left(1+A_{0}\\right) C_{F}  \\tag{11.29}\\\\\n& =\\left(1+g_{m} R_{D}\\right) C_{F} \\tag{11.30}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{equation*}\nC_{\\text {out }}=\\left(1+\\frac{1}{g_{m} R_{D}}\\right) C_{F}, \\tag{11.31}\n\\end{equation*}\n$$\n\nthus arriving at the topology depicted in Fig. 11.15(b). From our analysis in Example 11.8, we have:\n\n$$\n\\begin{align*}\n\\omega_{\\text {in }} & =\\frac{1}{R_{S} C_{i n}}  \\tag{11.32}\\\\\n& =\\frac{1}{R_{S}\\left(1+g_{m} R_{D}\\right) C_{F}} \\tag{11.33}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{align*}\n\\omega_{\\text {out }} & =\\frac{1}{R_{D} C_{\\text {out }}}  \\tag{11.34}\\\\\n& =\\frac{1}{R_{D}\\left(1+\\frac{1}{g_{m} R_{D}}\\right) C_{F}} . \\tag{11.35}\n\\end{align*}\n$$\n\nWhy does the circuit in (a) have one pole while that in (b) has two? This is explained below.\nExercise Calculate $C_{i n}$ if $g_{m}=(150 \\Omega)^{-1}, R_{D}=2 \\mathrm{k} \\Omega$, and $C_{F}=80 \\mathrm{fF}$.\n\nThe reader may find the preceding example somewhat inconsistent. Miller's theorem requires that the floating impedance and the voltage gain be computed at the same frequency, whereas Example 11.10 uses the low-frequency gain, $g_{m} R_{D}$, even for determining high-frequency poles. After all, we know that the presence of $C_{F}$ reduces the voltage gain from the gate of $M_{1}$ to the output at high frequencies. Due to this inconsistency, we refer to the procedure in Example 11.10 as the \"Miller approximation.\" Without this approximation, i.e., if $A_{0}$ were expressed in terms of circuit parameters at the frequency of interest, applying Miller's theorem would be no simpler than directly solving the circuit's equations. Because of the approximation, the circuit in the example exhibits two poles.\n\nAnother artifact of the Miller approximation is that it may eliminate a zero of the transfer function. We address this issue in Section 11.4.3.\n\nThe general expression in Eq. (11.22) can be interpreted as follows: an impedance connected between the input and output of an inverting amplifier with a gain of $A_{v}$ appears reduced by a factor of $1+A_{v}$ when observed at the input (relative to ground). This reduction in impedance (and corresponding increase in capacitance) is known as the \"Miller effect.\" For instance, we say the Miller effect increases the input capacitance of the circuit in Fig. 11.15(a) to $\\left(1+g_{m} R_{D}\\right) C_{F}$."
},
{
    "text": "Our preceding analysis and the illustration in Fig. 11.12 highlight the desirability of a method that converts a floating capacitor into two grounded capacitors, thereby associating one pole with each node. Miller's theorem serves this purpose. However, Miller's theorem was initially developed for a different reason. In the late 1910s, John Miller observed that parasitic capacitances between the input and output of an amplifier could significantly reduce the input impedance. He then proposed an analysis that led to the formulation of the theorem.\n\nConsider the general circuit depicted in Fig. 11.13(a), where the floating impedance, $Z_{F}$, is positioned between nodes 1 and 2. Our goal is to transform $Z_{F}$ into two grounded impedances as shown in Fig. 11.13(b), while ensuring all circuit currents and voltages remain unchanged. To determine $Z_{1}$ and $Z_{2}$, we make two observations: (1) the current drawn by $Z_{F}$ from node 1 in Fig. 11.13(a) must equal the current drawn by $Z_{1}$ in Fig. 11.13(b); and (2) the current injected into node 2 in Fig. 11.13(a) must match the current injected by $Z_{2}$ in Fig. 11.13(b). (These conditions ensure the circuit is unaffected by the transformation.) Thus,\n\n$$\n\\begin{align*}\n& \\frac{V_{1}-V_{2}}{Z_{F}}=\\frac{V_{1}}{Z_{1}}  \\tag{11.19}\\\\\n& \\frac{V_{1}-V_{2}}{Z_{F}}=-\\frac{V_{2}}{Z_{2}} \\tag{11.20}\n\\end{align*}\n$$\n\nLetting $A_{v}$ denote the voltage gain from node 1 to node 2, we derive\n\n$$\n\\begin{align*}\nZ_{1} & =Z_{F} \\frac{V_{1}}{V_{1}-V_{2}}  \\tag{11.21}\\\\\n& =\\frac{Z_{F}}{1-A_{v}} \\tag{11.22}\n\\end{align*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: ZF, type: Resistor, value: ZF, ports: {N1: 1, N2: 2}\n]\nextrainfo:The circuit in diagram (a) features a floating impedance ZF between nodes 1 and 2, with voltage sources V1 and V2 connected to ground at nodes 1 and 2, respectively.\nimage_name:(b)\ndescription:\n[\nname: Z1, type: Resistor, value: Z1, ports: {N1: 1, N2: GND}\nname: Z2, type: Resistor, value: Z2, ports: {N1: 2, N2: GND}\n]\nextrainfo:The circuit diagram (b) illustrates the equivalent circuit using Miller's theorem, where the floating impedance ZF is replaced by two grounded impedances Z1 and Z2. V1 and V2 are voltage sources connected to nodes 1 and 2, respectively, with a common ground.\n\nFigure 11.13 (a) General circuit with a floating impedance, (b) equivalent of (a) derived from Miller's theorem.\nand\n\n$$\n\\begin{align*}\nZ_{2} & =Z_{F} \\frac{-V_{2}}{V_{1}-V_{2}}  \\tag{11.23}\\\\\n& =\\frac{Z_{F}}{1-\\frac{1}{A_{v}}} \\tag{11.24}\n\\end{align*}\n$$\n\nKnown as Miller's theorem, the results expressed by Eqs. (11.22) and (11.24) are highly useful in analysis and design. Specifically, Eq. (11.22) indicates that the floating impedance is reduced by a factor of $1-A_{v}$ when observed at node 1.\n\nAs a significant example of Miller's theorem, assume $Z_{F}$ is a single capacitor, $C_{F}$, connected between the input and output of an inverting amplifier [Fig. 11.14(a)]. Applying Eq. (11.22), we get\n\n$$\n\\begin{align*}\nZ_{1} & =\\frac{Z_{F}}{1-A_{v}}  \\tag{11.25}\\\\\n& =\\frac{1}{\\left(1+A_{0}\\right) C_{F} S} \\tag{11.26}\n\\end{align*}\n$$\n\nwhere $A_{v}=-A_{0}$ is substituted. What type of impedance is $Z_{1}$? The $1 / s$ dependence suggests a capacitor of value $\\left(1+A_{0}\\right) C_{F}$, as if $C_{F}$ is \"amplified\" by a factor of $1+A_{0}$. In other words, a capacitor $C_{F}$ connected between the input and output of an inverting amplifier with a gain of $A_{0}$ increases the input capacitance to $\\left(1+A_{0}\\right) C_{F}$. This phenomenon is termed \"Miller multiplication\" of the capacitor.\n\nThe impact of $C_{F}$ at the output can be derived from Eq. (11.24):\n\n$$\n\\begin{align*}\nZ_{2} & =\\frac{Z_{F}}{1-\\frac{1}{A_{v}}}  \\tag{11.27}\\\\\n& =\\frac{1}{\\left(1+\\frac{1}{A_{0}}\\right) C_{F} S} \\tag{11.28}\n\\end{align*}\n$$\n\nwhich approximates $\\left(C_{F} s\\right)^{-1}$ if $A_{0} \\gg 1$. Figure 11.14(b) summarizes these findings.\nThe Miller multiplication of capacitors can also be understood intuitively. Suppose the input voltage in Fig. 11.14(a) increases slightly by $\\Delta V$. The output then decreases by $A_{0} \\Delta V$. Consequently, the voltage across $C_{F}$ increases by $\\left(1+A_{0}\\right) \\Delta V$, necessitating a proportional charge from the input. In contrast, if $C_{F}$ were not a floating capacitor and its right plate voltage remained constant, it would experience only a voltage change of $\\Delta V$ and require less charge.\nimage_name:(a)\ndescription:\n[\nname: CF, type: Capacitor, value: CF, ports: {Np: Vout, Nn: Vin}\nname: A0, type: OpAmp, value: A0, ports: {InP: GND, InN: Vin, OutP: Vout, OutN: GND}\n]\nextrainfo:The circuit consists of an inverting amplifier with a floating capacitor CF connected between the output and input of the op-amp A0. The input voltage is Vin, and the output voltage is Vout, demonstrating the Miller effect.\nimage_name:(b)\ndescription:\n[\nname: A0, type: OpAmp, value: A0, ports: {InP: GND, InN: Vin, Out: Vout}\nname: CF(1+1/A0), type: Capacitor, value: CF(1+1/A0), ports: {Np: Vout, Nn: GND}\nname: CF(1+A0), type: Capacitor, value: CF(1+A0), ports: {Np: Vin, Nn: GND}\n]\nextrainfo:The circuit diagram (b) shows the equivalent circuit using Miller's theorem, converting a floating capacitor to grounded capacitors. It features an inverting amplifier configuration with an operational amplifier and grounded capacitors CF(1+1/A0) and CF(1+A0). The input voltage is Vin, and the output is Vout.\n\nFigure 11.14 (a) Inverting circuit with floating capacitor, (b) equivalent circuit derived from Miller's theorem.\n\nThe above study underscores the utility of Miller's theorem for converting floating capacitors to grounded capacitors. The following example illustrates this principle.\n\nDid you know?\n\nThe Miller effect was discovered by John Miller in 1919. In his original paper, Miller noted that \"the apparent input capacity can become several times greater than the actual capacities between the tube electrodes.\" (At that time, capacitance and capacitor were referred to as \"capacity\" and \"condensor,\" respectively.) A notable aspect of Miller multiplication is that if the amplifier gain is positive and greater than unity, the input capacitance becomes negative, $\\left(1-A_{v}\\right) C_{F}$. Does this occur? Indeed, it does. Below is a circuit that realizes a negative capacitance. Since the gain from $V_{i n 1}$ to $V_{Y}$ (and from $V_{i n 2}$ to $V_{X}$) is positive, $C_{F}$ can be multiplied by a negative number. This technique is employed in many high-speed circuits to partially offset the effects of unwanted (positive) capacitances.\nimage_name:Circuit with negative input capacitance\ndescription:\n[\nname: M1, type: NMOS, ports: {S: P, D: X, G: Vin1}\nname: M2, type: NMOS, ports: {S: P, D: Y, G: Vin2}\nname: RD1, type: Resistor, value: RD, ports: {N1: VDD, N2: X}\nname: RD2, type: Resistor, value: RD, ports: {N1: VDD, N2: Y}\nname: CF1, type: Capacitor, value: CF, ports: {Np: Vin1, Nn: X}\nname: CF2, type: Capacitor, value: CF, ports: {Np: Vin2, Nn: Y}\nname: I1, type: CurrentSource, ports: {Np: P, Nn: GND}\n]\nextrainfo:The circuit utilizes NMOS transistors M1 and M2 to create a negative input capacitance effect. Resistors RD and capacitors CF are used to achieve the desired gain and capacitance cancellation. The current source provides biasing.\n\nCircuit with negative input capacitance.\n\nExample $\\quad$ Estimate the pole of the circuit shown in Fig. 11.15(a). Assume $\\lambda=0$.\nimage_name:(a)\ndescription:\n[\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: g1}\nname: CF, type: Capacitor, value: CF, ports: {Np: g1, Nn: Vout}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: g1}\n]\nextrainfo:The circuit employs an NMOS transistor M1 and resistor RD to form an inverting amplifier with a gain of -gmRD. Capacitor CF is used for capacitance cancellation, demonstrating a negative input capacitance effect.\n\n(a)\nimage_name:Figure 11.15(b)\ndescription:\n[\nname: Rs, type: Resistor, value: Rs, ports: {N1: Vin, N2: g1}\nname: Cin, type: Capacitor, value: Cin, ports: {Np: g1, Nn: GND}\nname: Cout, type: Capacitor, value: Cout, ports: {Np: Vout, Nn: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: g1}\n]\nextrainfo:The circuit is an inverting amplifier using an NMOS transistor with a gain of -gmRD. Capacitors Cin and Cout are used for input and output coupling, respectively. RD is connected to VDD, and the output is taken from the drain of M1.\n\n(b)\n\nFigure 11.15\n\nSolution Noting that $M_{1}$ and $R_{D}$ form an inverting amplifier with a gain of $-g_{m} R_{D}$, we use the results from Fig. 11.14(b) to write:\n\n$$\n\\begin{align*}\nC_{i n} & =\\left(1+A_{0}\\right) C_{F}  \\tag{11.29}\\\\\n& =\\left(1+g_{m} R_{D}\\right) C_{F} \\tag{11.30}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{equation*}\nC_{\\text {out }}=\\left(1+\\frac{1}{g_{m} R_{D}}\\right) C_{F}, \\tag{11.31}\n\\end{equation*}\n$$\n\nthus arriving at the topology depicted in Fig. 11.15(b). From our analysis in Example 11.8, we have:\n\n$$\n\\begin{align*}\n\\omega_{\\text {in }} & =\\frac{1}{R_{S} C_{i n}}  \\tag{11.32}\\\\\n& =\\frac{1}{R_{S}\\left(1+g_{m} R_{D}\\right) C_{F}} \\tag{11.33}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{align*}\n\\omega_{\\text {out }} & =\\frac{1}{R_{D} C_{\\text {out }}}  \\tag{11.34}\\\\\n& =\\frac{1}{R_{D}\\left(1+\\frac{1}{g_{m} R_{D}}\\right) C_{F}} . \\tag{11.35}\n\\end{align*}\n$$\n\nWhy does the circuit in (a) have one pole while that in (b) has two? This is explained below.\nExercise Calculate $C_{i n}$ if $g_{m}=(150 \\Omega)^{-1}, R_{D}=2 \\mathrm{k} \\Omega$, and $C_{F}=80 \\mathrm{fF}$.\n\nThe reader may find the preceding example somewhat inconsistent. Miller's theorem requires that the floating impedance and the voltage gain be calculated at the same frequency, whereas Example 11.10 uses the low-frequency gain, $g_{m} R_{D}$, even for determining high-frequency poles. After all, we know that the presence of $C_{F}$ reduces the voltage gain from the gate of $M_{1}$ to the output at high frequencies. Due to this inconsistency, we refer to the procedure in Example 11.10 as the \"Miller approximation.\" Without this approximation, i.e., if $A_{0}$ were expressed in terms of circuit parameters at the frequency of interest, applying Miller's theorem would be no simpler than directly solving the circuit's equations. Because of the approximation, the circuit in the example exhibits two poles.\n\nAnother consequence of the Miller approximation is that it may eliminate a zero of the transfer function. We address this issue in Section 11.4.3.\n\nThe general expression in Eq. (11.22) can be interpreted as follows: an impedance connected between the input and output of an inverting amplifier with a gain of $A_{v}$ is reduced by a factor of $1+A_{v}$ when viewed at the input (relative to ground). This reduction of impedance (and corresponding increase in capacitance) is termed the \"Miller effect.\" For instance, we say the Miller effect increases the input capacitance of the circuit in Fig. 11.15(a) to $\\left(1+g_{m} R_{D}\\right) C_{F}$."
},
{
    "text": "Our preceding analysis and the illustration in Fig. 11.12 highlight the need for a method that converts a floating capacitor into two grounded capacitors, enabling the association of one pole with each node. Miller's theorem serves this purpose. However, it was initially developed for a different reason. In the late 1910s, John Miller observed that parasitic capacitances between the input and output of an amplifier could significantly reduce the input impedance. He then proposed an analysis that led to the formulation of the theorem.\n\nConsider the general circuit depicted in Fig. 11.13(a), where the floating impedance, $Z_{F}$, is situated between nodes 1 and 2. Our goal is to transform $Z_{F}$ into two grounded impedances, as shown in Fig. 11.13(b), while ensuring that all currents and voltages in the circuit remain unaltered. To determine $Z_{1}$ and $Z_{2}$, we make two observations: (1) the current drawn by $Z_{F}$ from node 1 in Fig. 11.13(a) must equal the current drawn by $Z_{1}$ in Fig. 11.13(b); and (2) the current injected into node 2 in Fig. 11.13(a) must match the current injected by $Z_{2}$ in Fig. 11.13(b). (These conditions ensure that the circuit does not \"detect\" the transformation.) Thus,\n\n$$\n\\begin{align*}\n& \\frac{V_{1}-V_{2}}{Z_{F}}=\\frac{V_{1}}{Z_{1}}  \\tag{11.19}\\\\\n& \\frac{V_{1}-V_{2}}{Z_{F}}=-\\frac{V_{2}}{Z_{2}} \\tag{11.20}\n\\end{align*}\n$$\n\nLetting $A_{v}$ denote the voltage gain from node 1 to node 2, we derive\n\n$$\n\\begin{align*}\nZ_{1} & =Z_{F} \\frac{V_{1}}{V_{1}-V_{2}}  \\tag{11.21}\\\\\n& =\\frac{Z_{F}}{1-A_{v}} \\tag{11.22}\n\\end{align*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: ZF, type: Resistor, value: ZF, ports: {N1: 1, N2: 2}\n]\nextrainfo:The circuit in diagram (a) includes a floating impedance ZF between nodes 1 and 2, with voltage sources V1 and V2 connected to ground at nodes 1 and 2 respectively.\nimage_name:(b)\ndescription:\n[\nname: Z1, type: Resistor, value: Z1, ports: {N1: 1, N2: GND}\nname: Z2, type: Resistor, value: Z2, ports: {N1: 2, N2: GND}\n]\nextrainfo:The circuit diagram (b) represents the equivalent circuit using Miller's theorem, where the floating impedance ZF is replaced by two grounded impedances Z1 and Z2. V1 and V2 are voltage sources connected to nodes 1 and 2 respectively, with both having a common ground.\n\nFigure 11.13 (a) General circuit including a floating impedance, (b) equivalent of (a) as obtained from Miller's theorem.\nand\n\n$$\n\\begin{align*}\nZ_{2} & =Z_{F} \\frac{-V_{2}}{V_{1}-V_{2}}  \\tag{11.23}\\\\\n& =\\frac{Z_{F}}{1-\\frac{1}{A_{v}}} \\tag{11.24}\n\\end{align*}\n$$\n\nKnown as Miller's theorem, the results expressed by Eqs. (11.22) and (11.24) are highly beneficial for analysis and design. Specifically, Eq. (11.22) indicates that the floating impedance is diminished by a factor of $1-A_{v}$ when \"observed\" at node 1.\n\nAs a significant example of Miller's theorem, suppose $Z_{F}$ is a single capacitor, $C_{F}$, connected between the input and output of an inverting amplifier [Fig. 11.14(a)]. Applying Eq. (11.22), we get\n\n$$\n\\begin{align*}\nZ_{1} & =\\frac{Z_{F}}{1-A_{v}}  \\tag{11.25}\\\\\n& =\\frac{1}{\\left(1+A_{0}\\right) C_{F} S} \\tag{11.26}\n\\end{align*}\n$$\n\nwhere we substitute $A_{v}=-A_{0}$. What type of impedance is $Z_{1}$? The $1 / s$ dependency suggests a capacitor of value $\\left(1+A_{0}\\right) C_{F}$, as if $C_{F}$ is \"amplified\" by a factor of $1+A_{0}$. In other words, a capacitor $C_{F}$ connected between the input and output of an inverting amplifier with a gain of $A_{0}$ increases the input capacitance to $\\left(1+A_{0}\\right) C_{F}$. This phenomenon is termed \"Miller multiplication\" of the capacitor.\n\nThe impact of $C_{F}$ at the output can be derived from Eq. (11.24):\n\n$$\n\\begin{align*}\nZ_{2} & =\\frac{Z_{F}}{1-\\frac{1}{A_{v}}}  \\tag{11.27}\\\\\n& =\\frac{1}{\\left(1+\\frac{1}{A_{0}}\\right) C_{F} S} \\tag{11.28}\n\\end{align*}\n$$\n\nwhich approximates $\\left(C_{F} s\\right)^{-1}$ if $A_{0} \\gg 1$. Figure 11.14(b) summarizes these findings.\nThe Miller multiplication of capacitors can also be understood intuitively. Imagine the input voltage in Fig. 11.14(a) increases by a small amount $\\Delta V$. The output then decreases by $A_{0} \\Delta V$. Consequently, the voltage across $C_{F}$ rises by $\\left(1+A_{0}\\right) \\Delta V$, necessitating a proportional charge from the input. In contrast, if $C_{F}$ were not a floating capacitor and its right plate voltage remained constant, it would only experience a voltage change of $\\Delta V$ and require less charge.\nimage_name:(a)\ndescription:\n[\nname: CF, type: Capacitor, value: CF, ports: {Np: Vout, Nn: Vin}\nname: A0, type: OpAmp, value: A0, ports: {InP: GND, InN: Vin, OutP: Vout, OutN: GND}\n]\nextrainfo:The circuit is an inverting amplifier with a floating capacitor CF connected between the output and input of the op-amp A0. The input voltage is Vin and the output voltage is Vout. The circuit demonstrates the Miller effect.\nimage_name:(b)\ndescription:\n[\nname: A0, type: OpAmp, value: A0, ports: {InP: GND, InN: Vin, Out: Vout}\nname: CF(1+1/A0), type: Capacitor, value: CF(1+1/A0), ports: {Np: Vout, Nn: GND}\nname: CF(1+A0), type: Capacitor, value: CF(1+A0), ports: {Np: Vin, Nn: GND}\n]\nextrainfo:The circuit diagram (b) is an equivalent circuit using Miller's theorem, converting a floating capacitor to a grounded capacitor. It shows an inverting amplifier configuration with an operational amplifier and a grounded capacitor CF(1+1/A0). The input voltage is Vin, and the output is Vout.\n\nFigure 11.14 (a) Inverting circuit with floating capacitor, (b) equivalent circuit as obtained from Miller's theorem.\n\nThe foregoing study underscores the utility of Miller's theorem for converting floating capacitors to grounded capacitors. The following example illustrates this principle.\n\nDid you know?\n\nThe Miller effect was discovered by John Miller in 1919. In his original paper, Miller noted that \"the apparent input capacity can become a number of times greater than the actual capacities between the tube electrodes.\" (Back then, capacitance and capacitor were referred to as \"capacity\" and \"condensor,\" respectively.) A curious aspect of Miller multiplication is that if the amplifier gain is positive and greater than unity, the input capacitance becomes negative, $\\left(1-A_{v}\\right) C_{F}$. Does this occur? Indeed, it does. Below is a circuit that realizes a negative capacitance. Since the gain from $V_{i n 1}$ to $V_{Y}$ (and from $V_{i n 2}$ to $V_{X}$) is positive, $C_{F}$ can be multiplied by a negative number. This technique is employed in many high-speed circuits to partially counteract the effects of unwanted (positive) capacitances.\nimage_name:Circuit with negative input capacitance\ndescription:\n[\nname: M1, type: NMOS, ports: {S: P, D: X, G: Vin1}\nname: M2, type: NMOS, ports: {S: P, D: Y, G: Vin2}\nname: RD1, type: Resistor, value: RD, ports: {N1: VDD, N2: X}\nname: RD2, type: Resistor, value: RD, ports: {N1: VDD, N2: Y}\nname: CF1, type: Capacitor, value: CF, ports: {Np: Vin1, Nn: X}\nname: CF2, type: Capacitor, value: CF, ports: {Np: Vin2, Nn: Y}\nname: I1, type: CurrentSource, ports: {Np: P, Nn: GND}\n]\nextrainfo:The circuit uses NMOS transistors M1 and M2 to create a negative input capacitance effect. The resistors RD and capacitors CF are used to achieve the desired gain and capacitance cancellation. The current source provides biasing.\n\nCircuit with negative input capacitance.\n\nExample $\\quad$ Estimate the pole of the circuit shown in Fig. 11.15(a). Assume $\\lambda=0$.\nimage_name:(a)\ndescription:\n[\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: g1}\nname: CF, type: Capacitor, value: CF, ports: {Np: g1, Nn: Vout}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: g1}\n]\nextrainfo:The circuit uses NMOS transistor M1 and resistor RD to form an inverting amplifier with a gain of -gmRD. Capacitor CF is used for capacitance cancellation. The circuit exhibits a negative input capacitance effect.\n\n(a)\nimage_name:Figure 11.15(b)\ndescription:\n[\nname: Rs, type: Resistor, value: Rs, ports: {N1: Vin, N2: g1}\nname: Cin, type: Capacitor, value: Cin, ports: {Np: g1, Nn: GND}\nname: Cout, type: Capacitor, value: Cout, ports: {Np: Vout, Nn: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: g1}\n]\nextrainfo:The circuit is an inverting amplifier using an NMOS transistor with a gain of -gmRD. Capacitors Cin and Cout are used for input and output coupling, respectively. RD is connected to VDD, and the output is taken from the drain of M1.\n\n(b)\n\nFigure 11.15\n\nSolution Noting that $M_{1}$ and $R_{D}$ form an inverting amplifier with a gain of $-g_{m} R_{D}$, we apply the results from Fig. 11.14(b) to write:\n\n$$\n\\begin{align*}\nC_{i n} & =\\left(1+A_{0}\\right) C_{F}  \\tag{11.29}\\\\\n& =\\left(1+g_{m} R_{D}\\right) C_{F} \\tag{11.30}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{equation*}\nC_{\\text {out }}=\\left(1+\\frac{1}{g_{m} R_{D}}\\right) C_{F}, \\tag{11.31}\n\\end{equation*}\n$$\n\nthus arriving at the topology depicted in Fig. 11.15(b). From our analysis in Example 11.8, we have:\n\n$$\n\\begin{align*}\n\\omega_{\\text {in }} & =\\frac{1}{R_{S} C_{i n}}  \\tag{11.32}\\\\\n& =\\frac{1}{R_{S}\\left(1+g_{m} R_{D}\\right) C_{F}} \\tag{11.33}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{align*}\n\\omega_{\\text {out }} & =\\frac{1}{R_{D} C_{\\text {out }}}  \\tag{11.34}\\\\\n& =\\frac{1}{R_{D}\\left(1+\\frac{1}{g_{m} R_{D}}\\right) C_{F}} . \\tag{11.35}\n\\end{align*}\n$$\n\nWhy does the circuit in (a) have one pole while that in (b) has two? This is explained below.\nExercise Calculate $C_{i n}$ if $g_{m}=(150 \\Omega)^{-1}, R_{D}=2 \\mathrm{k} \\Omega$, and $C_{F}=80 \\mathrm{fF}$.\n\nThe reader may find the preceding example somewhat inconsistent. Miller's theorem requires that the floating impedance and the voltage gain be computed at the same frequency, whereas Example 11.10 uses the low-frequency gain, $g_{m} R_{D}$, even for determining high-frequency poles. After all, we know that the presence of $C_{F}$ reduces the voltage gain from the gate of $M_{1}$ to the output at high frequencies. Due to this inconsistency, we refer to the procedure in Example 11.10 as the \"Miller approximation.\" Without this approximation, i.e., if $A_{0}$ were expressed in terms of circuit parameters at the frequency of interest, applying Miller's theorem would be no simpler than directly solving the circuit's equations. Because of the approximation, the circuit in the example exhibits two poles.\n\nAnother artifact of the Miller approximation is that it may eliminate a zero of the transfer function. We address this issue in Section 11.4.3.\n\nThe general expression in Eq. (11.22) can be interpreted as follows: an impedance connected between the input and output of an inverting amplifier with a gain of $A_{v}$ is reduced by a factor of $1+A_{v}$ when viewed at the input (with respect to ground). This reduction of impedance (and corresponding increase in capacitance) is termed the \"Miller effect.\" For instance, we say the Miller effect increases the input capacitance of the circuit in Fig. 11.15(a) to $\\left(1+g_{m} R_{D}\\right) C_{F}$."
},
{
    "text": "Our preceding analysis and the illustration in Fig. 11.12 highlight the desirability of a method that converts a floating capacitor into two grounded capacitors, thereby associating one pole with each node. Miller's theorem serves this purpose. However, Miller's theorem was initially developed for a different reason. In the late 1910s, John Miller observed that parasitic capacitances between the input and output of an amplifier could significantly reduce the input impedance. He then proposed an analysis that led to the formulation of the theorem.\n\nConsider the generic circuit depicted in Fig. 11.13(a), where the floating impedance, $Z_{F}$, is situated between nodes 1 and 2. Our goal is to transform $Z_{F}$ into two grounded impedances, as shown in Fig. 11.13(b), while ensuring that all currents and voltages in the circuit remain unaltered. To determine $Z_{1}$ and $Z_{2}$, we make two observations: (1) the current drawn by $Z_{F}$ from node 1 in Fig. 11.13(a) must equal the current drawn by $Z_{1}$ in Fig. 11.13(b); and (2) the current injected into node 2 in Fig. 11.13(a) must match the current injected by $Z_{2}$ in Fig. 11.13(b). (These conditions ensure that the circuit is unaffected by the transformation.) Thus,\n\n$$\n\\begin{align*}\n& \\frac{V_{1}-V_{2}}{Z_{F}}=\\frac{V_{1}}{Z_{1}}  \\tag{11.19}\\\\\n& \\frac{V_{1}-V_{2}}{Z_{F}}=-\\frac{V_{2}}{Z_{2}} \\tag{11.20}\n\\end{align*}\n$$\n\nLetting $A_{v}$ denote the voltage gain from node 1 to node 2, we derive\n\n$$\n\\begin{align*}\nZ_{1} & =Z_{F} \\frac{V_{1}}{V_{1}-V_{2}}  \\tag{11.21}\\\\\n& =\\frac{Z_{F}}{1-A_{v}} \\tag{11.22}\n\\end{align*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: ZF, type: Resistor, value: ZF, ports: {N1: 1, N2: 2}\n]\nextrainfo:The circuit in diagram (a) features a floating impedance ZF between nodes 1 and 2, with voltage sources V1 and V2 connected to ground at nodes 1 and 2, respectively.\nimage_name:(b)\ndescription:\n[\nname: Z1, type: Resistor, value: Z1, ports: {N1: 1, N2: GND}\nname: Z2, type: Resistor, value: Z2, ports: {N1: 2, N2: GND}\n]\nextrainfo:The circuit diagram (b) illustrates the equivalent circuit using Miller's theorem, where the floating impedance ZF is replaced by two grounded impedances Z1 and Z2. V1 and V2 are voltage sources connected to nodes 1 and 2, respectively, with a common ground.\n\nFigure 11.13 (a) General circuit with a floating impedance, (b) equivalent of (a) derived from Miller's theorem.\nand\n\n$$\n\\begin{align*}\nZ_{2} & =Z_{F} \\frac{-V_{2}}{V_{1}-V_{2}}  \\tag{11.23}\\\\\n& =\\frac{Z_{F}}{1-\\frac{1}{A_{v}}} \\tag{11.24}\n\\end{align*}\n$$\n\nThese results, encapsulated in Eqs. (11.22) and (11.24) and known as Miller's theorem, are highly beneficial for analysis and design. Specifically, Eq. (11.22) indicates that the floating impedance is reduced by a factor of $1-A_{v}$ when observed at node 1.\n\nAs a significant example of Miller's theorem, suppose $Z_{F}$ is a single capacitor, $C_{F}$, connected between the input and output of an inverting amplifier [Fig. 11.14(a)]. Applying Eq. (11.22), we get\n\n$$\n\\begin{align*}\nZ_{1} & =\\frac{Z_{F}}{1-A_{v}}  \\tag{11.25}\\\\\n& =\\frac{1}{\\left(1+A_{0}\\right) C_{F} S} \\tag{11.26}\n\\end{align*}\n$$\n\nwhere $A_{v}=-A_{0}$ is substituted. What type of impedance is $Z_{1}$? The $1 / s$ dependency suggests a capacitor of value $\\left(1+A_{0}\\right) C_{F}$, as if $C_{F}$ is \"amplified\" by a factor of $1+A_{0}$. In other words, a capacitor $C_{F}$ connected between the input and output of an inverting amplifier with a gain of $A_{0}$ increases the input capacitance to $\\left(1+A_{0}\\right) C_{F}$. This phenomenon is termed \"Miller multiplication\" of the capacitor.\n\nThe impact of $C_{F}$ at the output can be derived from Eq. (11.24):\n\n$$\n\\begin{align*}\nZ_{2} & =\\frac{Z_{F}}{1-\\frac{1}{A_{v}}}  \\tag{11.27}\\\\\n& =\\frac{1}{\\left(1+\\frac{1}{A_{0}}\\right) C_{F} S} \\tag{11.28}\n\\end{align*}\n$$\n\nwhich approximates $\\left(C_{F} s\\right)^{-1}$ if $A_{0} \\gg 1$. Figure 11.14(b) summarizes these findings.\nThe Miller multiplication of capacitors can also be understood intuitively. Imagine the input voltage in Fig. 11.14(a) increases by a small amount $\\Delta V$. The output then decreases by $A_{0} \\Delta V$. Consequently, the voltage across $C_{F}$ rises by $\\left(1+A_{0}\\right) \\Delta V$, necessitating a proportional charge from the input. In contrast, if $C_{F}$ were not a floating capacitor and its right plate voltage remained constant, it would only experience a voltage change of $\\Delta V$ and require less charge.\nimage_name:(a)\ndescription:\n[\nname: CF, type: Capacitor, value: CF, ports: {Np: Vout, Nn: Vin}\nname: A0, type: OpAmp, value: A0, ports: {InP: GND, InN: Vin, OutP: Vout, OutN: GND}\n]\nextrainfo:The circuit consists of an inverting amplifier with a floating capacitor CF connected between the output and input of the op-amp A0. The input voltage is Vin, and the output voltage is Vout, demonstrating the Miller effect.\nimage_name:(b)\ndescription:\n[\nname: A0, type: OpAmp, value: A0, ports: {InP: GND, InN: Vin, Out: Vout}\nname: CF(1+1/A0), type: Capacitor, value: CF(1+1/A0), ports: {Np: Vout, Nn: GND}\nname: CF(1+A0), type: Capacitor, value: CF(1+A0), ports: {Np: Vin, Nn: GND}\n]\nextrainfo:The circuit diagram (b) depicts an equivalent circuit using Miller's theorem, converting a floating capacitor to a grounded capacitor. It shows an inverting amplifier configuration with an operational amplifier and a grounded capacitor CF(1+1/A0). The input voltage is Vin, and the output is Vout.\n\nFigure 11.14 (a) Inverting circuit with floating capacitor, (b) equivalent circuit derived from Miller's theorem.\n\nThe foregoing study underscores the utility of Miller's theorem for converting floating capacitors to grounded capacitors. The following example illustrates this principle.\n\nDid you know?\n\nThe Miller effect was discovered by John Miller in 1919. In his original paper, Miller noted that \"the apparent input capacity can become several times greater than the actual capacities between the tube electrodes.\" (At that time, capacitance and capacitor were referred to as \"capacity\" and \"condensor,\" respectively.) An intriguing aspect of Miller multiplication is that if the amplifier gain is positive and greater than unity, the input capacitance becomes negative, $\\left(1-A_{v}\\right) C_{F}$. Does this occur? Indeed, it does. Below is a circuit that realizes a negative capacitance. Since the gain from $V_{i n 1}$ to $V_{Y}$ (and from $V_{i n 2}$ to $V_{X}$) is positive, $C_{F}$ can be multiplied by a negative number. This technique is employed in many high-speed circuits to partially offset the effects of unwanted (positive) capacitances.\nimage_name:Circuit with negative input capacitance\ndescription:\n[\nname: M1, type: NMOS, ports: {S: P, D: X, G: Vin1}\nname: M2, type: NMOS, ports: {S: P, D: Y, G: Vin2}\nname: RD1, type: Resistor, value: RD, ports: {N1: VDD, N2: X}\nname: RD2, type: Resistor, value: RD, ports: {N1: VDD, N2: Y}\nname: CF1, type: Capacitor, value: CF, ports: {Np: Vin1, Nn: X}\nname: CF2, type: Capacitor, value: CF, ports: {Np: Vin2, Nn: Y}\nname: I1, type: CurrentSource, ports: {Np: P, Nn: GND}\n]\nextrainfo:The circuit utilizes NMOS transistors M1 and M2 to create a negative input capacitance effect. Resistors RD and capacitors CF are used to achieve the desired gain and capacitance cancellation. The current source provides biasing.\n\nCircuit with negative input capacitance.\n\nExample $\\quad$ Estimate the pole of the circuit shown in Fig. 11.15(a). Assume $\\lambda=0$.\nimage_name:(a)\ndescription:\n[\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: g1}\nname: CF, type: Capacitor, value: CF, ports: {Np: g1, Nn: Vout}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: g1}\n]\nextrainfo:The circuit employs an NMOS transistor M1 and resistor RD to form an inverting amplifier with a gain of -gmRD. Capacitor CF is used for capacitance cancellation, exhibiting a negative input capacitance effect.\n\n(a)\nimage_name:Figure 11.15(b)\ndescription:\n[\nname: Rs, type: Resistor, value: Rs, ports: {N1: Vin, N2: g1}\nname: Cin, type: Capacitor, value: Cin, ports: {Np: g1, Nn: GND}\nname: Cout, type: Capacitor, value: Cout, ports: {Np: Vout, Nn: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: g1}\n]\nextrainfo:The circuit is an inverting amplifier using an NMOS transistor with a gain of -gmRD. Capacitors Cin and Cout are used for input and output coupling, respectively. RD is connected to VDD, and the output is taken from the drain of M1.\n\n(b)\n\nFigure 11.15\n\nSolution Noting that $M_{1}$ and $R_{D}$ form an inverting amplifier with a gain of $-g_{m} R_{D}$, we use the results from Fig. 11.14(b) to write:\n\n$$\n\\begin{align*}\nC_{i n} & =\\left(1+A_{0}\\right) C_{F}  \\tag{11.29}\\\\\n& =\\left(1+g_{m} R_{D}\\right) C_{F} \\tag{11.30}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{equation*}\nC_{\\text {out }}=\\left(1+\\frac{1}{g_{m} R_{D}}\\right) C_{F}, \\tag{11.31}\n\\end{equation*}\n$$\n\nthus arriving at the topology shown in Fig. 11.15(b). From our analysis in Example 11.8, we have:\n\n$$\n\\begin{align*}\n\\omega_{\\text {in }} & =\\frac{1}{R_{S} C_{i n}}  \\tag{11.32}\\\\\n& =\\frac{1}{R_{S}\\left(1+g_{m} R_{D}\\right) C_{F}} \\tag{11.33}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{align*}\n\\omega_{\\text {out }} & =\\frac{1}{R_{D} C_{\\text {out }}}  \\tag{11.34}\\\\\n& =\\frac{1}{R_{D}\\left(1+\\frac{1}{g_{m} R_{D}}\\right) C_{F}} . \\tag{11.35}\n\\end{align*}\n$$\n\nWhy does the circuit in (a) have one pole while that in (b) has two? This is explained below.\nExercise Calculate $C_{i n}$ if $g_{m}=(150 \\Omega)^{-1}, R_{D}=2 \\mathrm{k} \\Omega$, and $C_{F}=80 \\mathrm{fF}$.\n\nThe reader may find the preceding example somewhat inconsistent. Miller's theorem requires that the floating impedance and the voltage gain be calculated at the same frequency, whereas Example 11.10 uses the low-frequency gain, $g_{m} R_{D}$, even for determining high-frequency poles. After all, we know that the presence of $C_{F}$ reduces the voltage gain from the gate of $M_{1}$ to the output at high frequencies. Due to this inconsistency, we refer to the procedure in Example 11.10 as the \"Miller approximation.\" Without this approximation, i.e., if $A_{0}$ were expressed in terms of circuit parameters at the frequency of interest, applying Miller's theorem would be no simpler than directly solving the circuit's equations. Because of the approximation, the circuit in the example exhibits two poles.\n\nAnother consequence of the Miller approximation is that it may eliminate a zero of the transfer function. We address this issue in Section 11.4.3.\n\nThe general expression in Eq. (11.22) can be interpreted as follows: an impedance connected between the input and output of an inverting amplifier with a gain of $A_{v}$ is reduced by a factor of $1+A_{v}$ when viewed at the input (relative to ground). This reduction in impedance (and corresponding increase in capacitance) is known as the \"Miller effect.\" For instance, we say the Miller effect increases the input capacitance of the circuit in Fig. 11.15(a) to $\\left(1+g_{m} R_{D}\\right) C_{F}$."
},
{
    "text": "Our prior analysis and the illustration in Fig. 11.12 highlight the need for a method that converts a floating capacitor into two grounded capacitors, allowing each node to be associated with one pole. Miller's theorem serves this purpose. However, it was originally developed for a different reason. In the late 1910s, John Miller noticed that parasitic capacitances between an amplifier's input and output could significantly reduce the input impedance. He then proposed an analysis that led to the theorem.\n\nConsider the general circuit depicted in Fig. 11.13(a), where the floating impedance, $Z_{F}$, is situated between nodes 1 and 2. Our goal is to transform $Z_{F}$ into two grounded impedances, as shown in Fig. 11.13(b), while ensuring all circuit currents and voltages remain unchanged. To determine $Z_{1}$ and $Z_{2}$, we make two observations: (1) the current drawn by $Z_{F}$ from node 1 in Fig. 11.13(a) must equal the current drawn by $Z_{1}$ in Fig. 11.13(b); and (2) the current injected into node 2 in Fig. 11.13(a) must match the current injected by $Z_{2}$ in Fig. 11.13(b). (These conditions ensure the circuit is unaffected by the transformation.) Thus,\n\n$$\n\\begin{align*}\n& \\frac{V_{1}-V_{2}}{Z_{F}}=\\frac{V_{1}}{Z_{1}}  \\tag{11.19}\\\\\n& \\frac{V_{1}-V_{2}}{Z_{F}}=-\\frac{V_{2}}{Z_{2}} \\tag{11.20}\n\\end{align*}\n$$\n\nLetting $A_{v}$ denote the voltage gain from node 1 to node 2, we derive\n\n$$\n\\begin{align*}\nZ_{1} & =Z_{F} \\frac{V_{1}}{V_{1}-V_{2}}  \\tag{11.21}\\\\\n& =\\frac{Z_{F}}{1-A_{v}} \\tag{11.22}\n\\end{align*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: ZF, type: Resistor, value: ZF, ports: {N1: 1, N2: 2}\n]\nextrainfo:The circuit in diagram (a) features a floating impedance ZF between nodes 1 and 2, with voltage sources V1 and V2 connected to ground at nodes 1 and 2, respectively.\nimage_name:(b)\ndescription:\n[\nname: Z1, type: Resistor, value: Z1, ports: {N1: 1, N2: GND}\nname: Z2, type: Resistor, value: Z2, ports: {N1: 2, N2: GND}\n]\nextrainfo:The circuit in diagram (b) illustrates the equivalent circuit using Miller's theorem, where the floating impedance ZF is replaced by two grounded impedances Z1 and Z2. V1 and V2 are voltage sources connected to nodes 1 and 2, respectively, with a common ground.\n\nFigure 11.13 (a) General circuit with a floating impedance, (b) equivalent of (a) derived from Miller's theorem.\nand\n\n$$\n\\begin{align*}\nZ_{2} & =Z_{F} \\frac{-V_{2}}{V_{1}-V_{2}}  \\tag{11.23}\\\\\n& =\\frac{Z_{F}}{1-\\frac{1}{A_{v}}} \\tag{11.24}\n\\end{align*}\n$$\n\nThese results, encapsulated in Eqs. (11.22) and (11.24) and known as Miller's theorem, are highly beneficial for analysis and design. Specifically, Eq. (11.22) indicates that the floating impedance appears reduced by a factor of $1-A_{v}$ when observed at node 1.\n\nAs a significant example of Miller's theorem, suppose $Z_{F}$ is a single capacitor, $C_{F}$, connected between the input and output of an inverting amplifier [Fig. 11.14(a)]. Applying Eq. (11.22), we get\n\n$$\n\\begin{align*}\nZ_{1} & =\\frac{Z_{F}}{1-A_{v}}  \\tag{11.25}\\\\\n& =\\frac{1}{\\left(1+A_{0}\\right) C_{F} S} \\tag{11.26}\n\\end{align*}\n$$\n\nwhere $A_{v}=-A_{0}$. What type of impedance is $Z_{1}$? The $1 / s$ dependency suggests a capacitor of value $\\left(1+A_{0}\\right) C_{F}$, as if $C_{F}$ is \"amplified\" by a factor of $1+A_{0}$. In other words, a capacitor $C_{F}$ connected between the input and output of an inverting amplifier with gain $A_{0}$ increases the input capacitance to $\\left(1+A_{0}\\right) C_{F}$. This phenomenon is termed \"Miller multiplication\" of the capacitor.\n\nThe impact of $C_{F}$ at the output can be derived from Eq. (11.24):\n\n$$\n\\begin{align*}\nZ_{2} & =\\frac{Z_{F}}{1-\\frac{1}{A_{v}}}  \\tag{11.27}\\\\\n& =\\frac{1}{\\left(1+\\frac{1}{A_{0}}\\right) C_{F} S} \\tag{11.28}\n\\end{align*}\n$$\n\nwhich approximates $\\left(C_{F} s\\right)^{-1}$ if $A_{0} \\gg 1$. Figure 11.14(b) summarizes these findings.\nThe Miller multiplication of capacitors can also be understood intuitively. If the input voltage in Fig. 11.14(a) increases slightly by $\\Delta V$, the output decreases by $A_{0} \\Delta V$. Consequently, the voltage across $C_{F}$ rises by $\\left(1+A_{0}\\right) \\Delta V$, necessitating a proportional charge from the input. In contrast, if $C_{F}$ were not floating and its right plate voltage remained constant, it would only experience a voltage change of $\\Delta V$ and require less charge.\nimage_name:(a)\ndescription:\n[\nname: CF, type: Capacitor, value: CF, ports: {Np: Vout, Nn: Vin}\nname: A0, type: OpAmp, value: A0, ports: {InP: GND, InN: Vin, OutP: Vout, OutN: GND}\n]\nextrainfo:The circuit is an inverting amplifier with a floating capacitor CF connected between the output and input of the op-amp A0. The input voltage is Vin, and the output voltage is Vout, demonstrating the Miller effect.\nimage_name:(b)\ndescription:\n[\nname: A0, type: OpAmp, value: A0, ports: {InP: GND, InN: Vin, Out: Vout}\nname: CF(1+1/A0), type: Capacitor, value: CF(1+1/A0), ports: {Np: Vout, Nn: GND}\nname: CF(1+A0), type: Capacitor, value: CF(1+A0), ports: {Np: Vin, Nn: GND}\n]\nextrainfo:The circuit in diagram (b) is an equivalent circuit using Miller's theorem, converting a floating capacitor to a grounded capacitor. It shows an inverting amplifier configuration with an operational amplifier and a grounded capacitor CF(1+1/A0). The input voltage is Vin, and the output is Vout.\n\nFigure 11.14 (a) Inverting circuit with floating capacitor, (b) equivalent circuit derived from Miller's theorem.\n\nThe preceding study underscores the utility of Miller's theorem for converting floating capacitors to grounded capacitors. The following example illustrates this principle.\n\nDid you know?\n\nThe Miller effect was discovered by John Miller in 1919. In his original paper, Miller observed that \"the apparent input capacity can become several times greater than the actual capacities between the tube electrodes.\" (At that time, capacitance and capacitor were referred to as \"capacity\" and \"condensor,\" respectively.) An intriguing aspect of Miller multiplication is that if the amplifier gain is positive and greater than unity, the input capacitance becomes negative, $\\left(1-A_{v}\\right) C_{F}$. Does this occur? Indeed, it does. Below is a circuit that realizes a negative capacitance. Since the gain from $V_{i n 1}$ to $V_{Y}$ (and from $V_{i n 2}$ to $V_{X}$) is positive, $C_{F}$ can be multiplied by a negative number. This technique is employed in many high-speed circuits to partially offset the effects of unwanted (positive) capacitances.\nimage_name:Circuit with negative input capacitance\ndescription:\n[\nname: M1, type: NMOS, ports: {S: P, D: X, G: Vin1}\nname: M2, type: NMOS, ports: {S: P, D: Y, G: Vin2}\nname: RD1, type: Resistor, value: RD, ports: {N1: VDD, N2: X}\nname: RD2, type: Resistor, value: RD, ports: {N1: VDD, N2: Y}\nname: CF1, type: Capacitor, value: CF, ports: {Np: Vin1, Nn: X}\nname: CF2, type: Capacitor, value: CF, ports: {Np: Vin2, Nn: Y}\nname: I1, type: CurrentSource, ports: {Np: P, Nn: GND}\n]\nextrainfo:The circuit uses NMOS transistors M1 and M2 to create a negative input capacitance effect. Resistors RD and capacitors CF are used to achieve the desired gain and capacitance cancellation. The current source provides biasing.\n\nCircuit with negative input capacitance.\n\nExample $\\quad$ Estimate the pole of the circuit shown in Fig. 11.15(a). Assume $\\lambda=0$.\nimage_name:(a)\ndescription:\n[\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: g1}\nname: CF, type: Capacitor, value: CF, ports: {Np: g1, Nn: Vout}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: g1}\n]\nextrainfo:The circuit uses NMOS transistor M1 and resistor RD to form an inverting amplifier with a gain of -gmRD. Capacitor CF is used for capacitance cancellation. The circuit exhibits a negative input capacitance effect.\n\n(a)\nimage_name:Figure 11.15(b)\ndescription:\n[\nname: Rs, type: Resistor, value: Rs, ports: {N1: Vin, N2: g1}\nname: Cin, type: Capacitor, value: Cin, ports: {Np: g1, Nn: GND}\nname: Cout, type: Capacitor, value: Cout, ports: {Np: Vout, Nn: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: g1}\n]\nextrainfo:The circuit is an inverting amplifier using an NMOS transistor with a gain of -gmRD. Capacitors Cin and Cout are used for input and output coupling, respectively. RD is connected to VDD, and the output is taken from the drain of M1.\n\n(b)\n\nFigure 11.15\n\nSolution Noting that $M_{1}$ and $R_{D}$ form an inverting amplifier with a gain of $-g_{m} R_{D}$, we use the results from Fig. 11.14(b) to write:\n\n$$\n\\begin{align*}\nC_{i n} & =\\left(1+A_{0}\\right) C_{F}  \\tag{11.29}\\\\\n& =\\left(1+g_{m} R_{D}\\right) C_{F} \\tag{11.30}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{equation*}\nC_{\\text {out }}=\\left(1+\\frac{1}{g_{m} R_{D}}\\right) C_{F}, \\tag{11.31}\n\\end{equation*}\n$$\n\nthus arriving at the topology shown in Fig. 11.15(b). From our analysis in Example 11.8, we have:\n\n$$\n\\begin{align*}\n\\omega_{\\text {in }} & =\\frac{1}{R_{S} C_{i n}}  \\tag{11.32}\\\\\n& =\\frac{1}{R_{S}\\left(1+g_{m} R_{D}\\right) C_{F}} \\tag{11.33}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{align*}\n\\omega_{\\text {out }} & =\\frac{1}{R_{D} C_{\\text {out }}}  \\tag{11.34}\\\\\n& =\\frac{1}{R_{D}\\left(1+\\frac{1}{g_{m} R_{D}}\\right) C_{F}} . \\tag{11.35}\n\\end{align*}\n$$\n\nWhy does the circuit in (a) have one pole while that in (b) has two? This is explained below.\nExercise Calculate $C_{i n}$ if $g_{m}=(150 \\Omega)^{-1}, R_{D}=2 \\mathrm{k} \\Omega$, and $C_{F}=80 \\mathrm{fF}$.\n\nThe reader may find the preceding example somewhat inconsistent. Miller's theorem requires that the floating impedance and the voltage gain be computed at the same frequency, whereas Example 11.10 uses the low-frequency gain, $g_{m} R_{D}$, even for determining high-frequency poles. After all, we know that the presence of $C_{F}$ reduces the voltage gain from the gate of $M_{1}$ to the output at high frequencies. Due to this inconsistency, we refer to the procedure in Example 11.10 as the \"Miller approximation.\" Without this approximation, i.e., if $A_{0}$ were expressed in terms of circuit parameters at the frequency of interest, applying Miller's theorem would be no simpler than directly solving the circuit's equations. Because of the approximation, the circuit in the example exhibits two poles.\n\nAnother artifact of the Miller approximation is that it may eliminate a zero of the transfer function. We address this issue in Section 11.4.3.\n\nThe general expression in Eq. (11.22) can be interpreted as follows: an impedance connected between the input and output of an inverting amplifier with a gain of $A_{v}$ appears reduced by a factor of $1+A_{v}$ when viewed at the input (with respect to ground). This impedance reduction (and hence capacitance increase) is termed the \"Miller effect.\" For instance, we say the Miller effect increases the input capacitance of the circuit in Fig. 11.15(a) to $\\left(1+g_{m} R_{D}\\right) C_{F}$."
},
{
    "text": "Our prior analysis suggests that circuit capacitances tend to diminish voltage gain at high frequencies and may also affect gain at low frequencies. Consider, for instance, the high-pass filter depicted in Fig. 11.16(a), where the voltage configuration is as follows:\nimage_name:(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: GND}\n]\nextrainfo:This circuit is a basic high-pass filter. Its frequency response indicates that gain rises with frequency, peaking at high frequencies. The cutoff frequency is determined by the time constant R1*C1.\nimage_name:(b)\ndescription:The graph in Fig. 11.16(b) is a Bode plot depicting the frequency response of a basic high-pass filter.\n\n1. **Graph Type and Function:**\n- The graph is a magnitude Bode plot, illustrating the high-pass filter's gain as a function of frequency.\n\n2. **Axes Labels and Units:**\n- The horizontal axis represents angular frequency (\\(\\omega\\)), typically in radians per second.\n- The vertical axis shows the magnitude of the voltage gain \\(\\left|\\frac{V_{\\text{out}}}{V_{\\text{in}}}\\right|\\), which is unitless.\n- Both axes use a linear scale.\n\n3. **General Behavior and Trends:**\n- The plot reveals an increasing gain trend with frequency.\n- At low frequencies, the gain is near zero, indicating signal attenuation.\n- As frequency rises, the gain approaches a maximum of 1, suggesting minimal attenuation of high-frequency signals.\n\n4. **Key Features and Technical Aspects:**\n- The cutoff frequency, where the gain is \\(\\frac{1}{\\sqrt{2}}\\) of the maximum (about 0.707), is indicated by a vertical dashed line at \\(\\frac{1}{R_1 C_1}\\).\n- Beyond this frequency, the gain asymptotically approaches 1, indicating effective passage of high-frequency signals.\n\n5. **Annotations and Specific Points:**\n- A horizontal dashed line at a gain of 1 marks the maximum gain.\n- The point at \\(\\frac{1}{R_1 C_1}\\) is annotated, signifying the transition from low to high gain.\n\nFigure 11.16 (a) Basic high-pass filter, and (b) its frequency response.\nthe voltage division between $C_{1}$ and $R_{1}$ results in\n\n$$\n\\begin{align*}\n\\frac{V_{\\text {out }}}{V_{\\text {in }}}(s) & =\\frac{R_{1}}{R_{1}+\\frac{1}{C_{1} s}}  \\tag{11.36}\\\\\n& =\\frac{R_{1} C_{1} s}{R_{1} C_{1} s+1} \\tag{11.37}\n\\end{align*}\n$$\n\nand consequently\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text {out }}}{V_{\\text {in }}}\\right|=\\frac{R_{1} C_{1} \\omega}{\\sqrt{R_{1}^{2} C_{1}^{2} \\omega^{2}+1}} \\tag{11.38}\n\\end{equation*}\n$$\n\nAs illustrated in Fig. 11.16(b), the response shows a roll-off when the operating frequency drops below $1 /\\left(R_{1} C_{1}\\right)$. This roll-off, as per Eq. (11.37), stems from the zero of the transfer function being at the origin.\n\nThe low-frequency roll-off might be undesirable. The following example demonstrates this issue.\n\nExample\n11.11\n\nFigure 11.17 shows a source follower used in a high-fidelity audio amplifier. Here, $R_{i}$ sets the gate bias voltage for $M_{1}$ to $V_{D D}$, and $I_{1}$ determines the drain bias current. Assuming $\\lambda=0, g_{m}=1 /(200 \\Omega)$, and $R_{1}=100 \\mathrm{k} \\Omega$, determine the minimum required $C_{1}$ and the maximum acceptable $C_{L}$.\nimage_name:Figure 11.17\ndescription:\n[\nname: Ri, type: Resistor, value: Ri, ports: {N1: g1, N2: VDD}\nname: Ci, type: Capacitor, value: Ci, ports: {Np: Vin, Nn: g1}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: g1}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:This circuit is a source follower in a high-fidelity audio amplifier. It includes an NMOS transistor (M1) with gate bias set by Ri and drain bias current defined by I1. The input is Vin, and the output is Vout. Ci manages the low-frequency roll-off, and CL is the load capacitance.\n\nFigure 11.17\nSolution Similar to the high-pass filter in Fig. 11.16, the input network of $R_{i}$ and $C_{i}$ attenuates low-frequency signals. To ensure minimal attenuation for audio frequencies down to 20 Hz, we set the corner frequency $1 /\\left(R_{i} C_{i}\\right)$ to $2 \\pi \\times(20 \\mathrm{~Hz})$, yielding\n\n$$\n\\begin{equation*}\nC_{i}=79.6 \\mathrm{nF} \\tag{11.39}\n\\end{equation*}\n$$\n\nThis value is excessively large for integration on a chip. Since Eq. (11.38) indicates a 3 dB attenuation at $\\omega=1 /\\left(R_{i} C_{i}\\right)$, in practice, a larger capacitor may be needed for lower attenuation.\n\nThe load capacitance introduces a pole at the output node, reducing gain at high frequencies. Setting the pole frequency to the upper audio limit, 20 kHz, and noting that the resistance seen from the output node to ground is $1 / g_{m}$, we have\n\n$$\n\\begin{align*}\n\\omega_{p, \\text { out }} & =\\frac{g_{m}}{C_{L}}  \\tag{11.40}\\\\\n& =2 \\pi \\times(20 \\mathrm{kHz}) \\tag{11.41}\n\\end{align*}\n$$\n\nresulting in\n\n$$\n\\begin{equation*}\nC_{L}=39.8 \\mathrm{nF} \\tag{11.42}\n\\end{equation*}\n$$\n\nThis source follower can handle a substantial load capacitance for the audio band.\n\nExercise $\\quad$ Repeat the example if $I_{1}$ and the width of $M_{1}$ are halved.\n\nWhy use capacitor $C_{i}$ in this example? Without $C_{i}$, the circuit's gain would not decline at low frequencies, eliminating the need for these calculations. Known as a \"coupling\" capacitor, $C_{i}$ allows the desired signal frequencies to pass while blocking the dc component of $V_{i n}$. In other words, $C_{i}$ isolates the bias conditions of the source follower from the preceding stage. Figure 11.18(a) exemplifies this with a CS stage preceding the source follower. The coupling capacitor enables independent biasing at nodes $X$ and $Y$. For instance, $V_{Y}$ can be set relatively low (keeping $M_{2}$ near the triode region) to maximize the voltage gain of the CS stage.\nimage_name:Figure 11.18(a)\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Y}\nname: Ri, type: Resistor, value: Ri, ports: {N1: VDD, N2: X}\nname: Ci, type: Capacitor, value: Ci, ports: {Np: Y, Nn: X}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: X}\nname: M2, type: NMOS, ports: {S: GND, D: Y, G: Vin}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:This circuit is a cascade of a common-source (CS) stage and a source follower. The coupling capacitor Ci allows independent biasing of the CS stage and the source follower. RD and Ri set the bias conditions. M1 acts as a source follower, and M2 as a common-source amplifier. I1 provides biasing current to the source follower stage.\n\n(a)\nimage_name:(b)\ndescription:\n[\nname: RD, type: Resistor, ports: {N1: VDD, N2: P}\nname: M2, type: NMOS, ports: {S: GND, D: P, G: Vin}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: P}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:This circuit is a cascade of a common-source (CS) stage and a source follower. The coupling capacitor Ci allows independent biasing of the CS stage and the source follower. RD and Ri set the bias conditions. M1 acts as a source follower, and M2 as a common-source amplifier. I1 provides biasing current to the source follower stage.\n\n(b)\n\nFigure 11.18 Cascade of CS stage and source follower with (a) capacitor coupling and (b) direct coupling.\n\nTo emphasize the necessity of capacitive coupling in Fig. 11.18(a), consider the \"direct coupling\" scenario in Fig. 11.18(b). Here, to maximize voltage gain, we aim to set $V_{P}$ just above $V_{G S 2}-V_{T H 2}$, e.g., 200 mV. However, the gate of $M_{2}$ must be at least $V_{G S 1}+V_{I 1}$, where $V_{I 1}$ is the minimum voltage for $I_{1}$. Since $V_{G S 1}+V_{I 1}$ could be 600-700 mV, the two stages have incompatible bias points, necessitating capacitive coupling.\n\nCapacitive coupling, or \"ac coupling,\" is prevalent in discrete circuit design due to the large capacitor values often required (e.g., $C_{i}$ in the audio example). Nevertheless, integrated circuits also use capacitive coupling, especially at low supply voltages, if the required capacitor values are only a few picofarads.\n\nFigure 11.19 illustrates a typical frequency response and its associated terminology. We denote $\\omega_{L}$ as the lower corner or cut-off frequency and $\\omega_{H}$ as the upper corner or cut-off frequency. The band between $\\omega_{L}$ and $\\omega_{H}$, chosen to accommodate the signal frequencies of interest, is termed the \"midband range,\" and the corresponding gain is the \"midband gain.\"\nimage_name:Figure 11.19 Typical frequency response.\ndescription:The graph in Figure 11.19 is a typical frequency response plot, often used to illustrate the behavior of electronic filters or amplifiers. It is a Bode plot showing the magnitude of the transfer function, |H|, as a function of angular frequency, ω.\n\n1. **Graph Type and Function:**\n- This is a Bode magnitude plot, a logarithmic graph representing the frequency response of a system.\n\n2. **Axes Labels and Units:**\n- The vertical axis is labeled |H|, indicating the magnitude of the transfer function, typically in decibels (dB), though the unit is not shown.\n- The horizontal axis is labeled ω, representing angular frequency in radians per second.\n- The frequency axis is usually logarithmic, though not explicitly indicated.\n\n3. **General Behavior and Trends:**\n- The graph shows a rise at low frequencies, a flat midband region, and a roll-off at high frequencies.\n- The curve starts at the lower corner frequency, ω_L, where gain begins to increase.\n- It reaches a flat section called the \"midband range,\" where the gain is constant and labeled \"Midband Gain.\"\n- Beyond the midband, the gain decreases at the higher corner frequency, ω_H.\n\n4. **Key Features and Technical Details:**\n- The lower cutoff frequency, ω_L, marks the point where gain starts to rise toward the midband.\n- The upper cutoff frequency, ω_H, indicates where the gain begins to decline from the midband.\n- The constant gain level in the midband is labeled \"Midband Gain.\"\n- The bandwidth of the system is the range between ω_L and ω_H.\n\n5. **Annotations and Specific Data Points:**\n- Dashed lines at ω_L and ω_H indicate the cutoff frequencies.\n- An arrow labeled \"Midband\" marks the range of constant gain.\n\nThis graph exemplifies a bandpass filter or amplifier, allowing frequencies within a specific range to pass with minimal attenuation while attenuating frequencies outside this range.\n\nFigure 11.19 Typical frequency response."
},
{
    "text": "Our previous study reveals that circuit capacitances tend to decrease voltage gain at high frequencies. It is also plausible that capacitors diminish gain at low frequencies. For instance, consider the high-pass filter depicted in Fig. 11.16(a), where the voltage\nimage_name:(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a simple high-pass filter. The frequency response indicates that gain rises with frequency, peaking at high frequencies. The cutoff frequency is dictated by the time constant R1*C1.\nimage_name:(b)\ndescription:The graph in Fig. 11.16(b) is a Bode plot depicting the frequency response of a basic high-pass filter.\n\n1. **Graph Type and Function:**\n- The graph is a magnitude Bode plot, illustrating the gain of the high-pass filter as a function of frequency.\n\n2. **Axes Labels and Units:**\n- The horizontal axis represents angular frequency (\\(\\omega\\)), typically in radians per second.\n- The vertical axis shows the magnitude of the voltage gain \\(\\left|\\frac{V_{\\text{out}}}{V_{\\text{in}}}\\right|\\), which is unitless.\n- Both axes use a linear scale.\n\n3. **General Behavior and Trends:**\n- The plot displays an increasing gain trend with frequency.\n- At low frequencies, the gain is near zero, indicating signal attenuation.\n- As frequency rises, the gain approaches a maximum of 1, suggesting minimal attenuation of high-frequency signals.\n\n4. **Key Features and Technical Aspects:**\n- The cutoff frequency, where the gain is \\(\\frac{1}{\\sqrt{2}}\\) of the maximum (about 0.707), is indicated by a vertical dashed line at \\(\\frac{1}{R_1 C_1}\\).\n- Beyond this cutoff, the gain asymptotically reaches 1, indicating effective passage of high-frequency signals.\n\n5. **Annotations and Specific Points:**\n- A horizontal dashed line at a gain of 1 marks the maximum gain.\n- The point at \\(\\frac{1}{R_1 C_1}\\) is annotated, indicating the transition from low to high gain.\n\nFigure 11.16 (a) Basic high-pass filter, and (b) its frequency response.\ndivision between $C_{1}$ and $R_{1}$ results in\n\n$$\n\\begin{align*}\n\\frac{V_{\\text {out }}}{V_{\\text {in }}}(s) & =\\frac{R_{1}}{R_{1}+\\frac{1}{C_{1} s}}  \\tag{11.36}\\\\\n& =\\frac{R_{1} C_{1} s}{R_{1} C_{1} s+1} \\tag{11.37}\n\\end{align*}\n$$\n\nand thus\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text {out }}}{V_{\\text {in }}}\\right|=\\frac{R_{1} C_{1} \\omega}{\\sqrt{R_{1}^{2} C_{1}^{2} \\omega_{1}^{2}+1}} \\tag{11.38}\n\\end{equation*}\n$$\n\nAs shown in Fig. 11.16(b), the response exhibits a roll-off when the operating frequency drops below $1 /\\left(R_{1} C_{1}\\right)$. This roll-off, as seen from Eq. (11.37), occurs due to the zero of the transfer function being at the origin.\n\nThe low-frequency roll-off might be undesirable. The following example illustrates this issue.\n\nExample\n11.11\n\nFigure 11.17 shows a source follower used in a high-fidelity audio amplifier. Here, $R_{i}$ sets a gate bias voltage equal to $V_{D D}$ for $M_{1}$, and $I_{1}$ defines the drain bias current. Assuming $\\lambda=0, g_{m}=1 /(200 \\Omega)$, and $R_{1}=100 \\mathrm{k} \\Omega$, determine the minimum required $C_{1}$ and the maximum acceptable $C_{L}$.\nimage_name:Figure 11.17\ndescription:\n[\nname: Ri, type: Resistor, value: Ri, ports: {N1: g1, N2: VDD}\nname: Ci, type: Capacitor, value: Ci, ports: {Np: Vin, Nn: g1}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: g1}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a source follower configuration in a high-fidelity audio amplifier. It includes an NMOS transistor (M1) with gate bias set by Ri and drain bias current defined by I1. The input is Vin, and the output is Vout. Ci manages the low-frequency roll-off, and CL is the load capacitance.\n\nFigure 11.17\nSolution Similar to the high-pass filter in Fig. 11.16, the input network of $R_{i}$ and $C_{i}$ attenuates low-frequency signals. To ensure minimal attenuation for audio frequencies down to 20 Hz, we set the corner frequency $1 /\\left(R_{i} C_{i}\\right)$ to $2 \\pi \\times(20 \\mathrm{~Hz})$, resulting in\n\n$$\n\\begin{equation*}\nC_{i}=79.6 \\mathrm{nF} \\tag{11.39}\n\\end{equation*}\n$$\n\nThis value is excessively large for integration on a chip. Since Eq. (11.38) indicates a 3 dB attenuation at $\\omega=1 /\\left(R_{i} C_{i}\\right)$, in practice, a larger capacitor may be needed for lower attenuation.\n\nThe load capacitance introduces a pole at the output node, reducing gain at high frequencies. Setting the pole frequency to the upper audio limit, 20 kHz, and noting that the resistance seen from the output node to ground is $1 / g_{m}$, we get\n\n$$\n\\begin{align*}\n\\omega_{p, \\text { out }} & =\\frac{g_{m}}{C_{L}}  \\tag{11.40}\\\\\n& =2 \\pi \\times(20 \\mathrm{kHz}) \\tag{11.41}\n\\end{align*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\nC_{L}=39.8 \\mathrm{nF} \\tag{11.42}\n\\end{equation*}\n$$\n\nThe source follower, being an efficient driver, can handle a large load capacitance for the audio band.\n\nExercise $\\quad$ Repeat the above example if $I_{1}$ and the width of $M_{1}$ are halved.\n\nWhy was capacitor $C_{i}$ used in the example? Without $C_{i}$, the circuit's gain would not decline at low frequencies, eliminating the need for the above calculations. Known as a \"coupling\" capacitor, $C_{i}$ allows the desired signal frequencies to pass while blocking the dc component of $V_{i n}$. In other words, $C_{i}$ isolates the bias conditions of the source follower from those of the preceding stage. Figure 11.18(a) exemplifies this with a CS stage preceding the source follower. The coupling capacitor enables independent bias voltages at nodes $X$ and $Y$. For instance, $V_{Y}$ can be set relatively low (keeping $M_{2}$ near the triode region) to maximize the voltage gain of the CS stage (why?).\nimage_name:Figure 11.18(a)\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Y}\nname: Ri, type: Resistor, value: Ri, ports: {N1: VDD, N2: X}\nname: Ci, type: Capacitor, value: Ci, ports: {Np: Y, Nn: X}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: X}\nname: M2, type: NMOS, ports: {S: GND, D: Y, G: Vin}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a cascade of a common-source (CS) stage and a source follower. Ci allows independent biasing of the CS stage and the source follower. RD and Ri set the bias conditions. M1 acts as a source follower, and M2 as a common-source amplifier. I1 provides biasing current to the source follower stage.\n\n(a)\nimage_name:(b)\ndescription:\n[\nname: RD, type: Resistor, ports: {N1: VDD, N2: P}\nname: M2, type: NMOS, ports: {S: GND, D: P, G: Vin}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: P}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a cascade of a common-source (CS) stage and a source follower. Ci allows independent biasing of the CS stage and the source follower. RD and Ri set the bias conditions. M1 acts as a source follower, and M2 as a common-source amplifier. I1 provides biasing current to the source follower stage.\n\n(b)\n\nFigure 11.18 Cascade of CS stage and source follower with (a) capacitor coupling and (b) direct coupling.\n\nTo demonstrate the necessity of capacitive coupling in Fig. 11.18(a), we also consider the \"direct coupling\" scenario [Fig. 11.18(b)]. Here, to maximize voltage gain, we aim to set $V_{P}$ just above $V_{G S 2}-V_{T H 2}$, e.g., 200 mV. However, the gate of $M_{2}$ must be at least $V_{G S 1}+V_{I 1}$, where $V_{I 1}$ is the minimum voltage required by $I_{1}$. Since $V_{G S 1}+V_{I 1}$ could be $600-700 \\mathrm{mV}$, the two stages are incompatible in terms of bias points, necessitating capacitive coupling.\n\nCapacitive coupling, or \"ac coupling,\" is prevalent in discrete circuit design due to the large capacitor values often required (e.g., $C_{i}$ in the audio example). Nevertheless, many integrated circuits also use capacitive coupling, particularly at low supply voltages, if the required capacitor values are only a few picofarads.\n\nFigure 11.19 illustrates a typical frequency response and the associated terminology. We denote $\\omega_{L}$ as the lower corner or \"cut-off\" frequency and $\\omega_{H}$ as the upper corner or cut-off frequency. The band between $\\omega_{L}$ and $\\omega_{H}$, chosen to include the signal frequencies of interest, is termed the \"midband range,\" and the corresponding gain is the \"midband gain.\"\nimage_name:Figure 11.19 Typical frequency response.\ndescription:The graph in Figure 11.19 is a typical frequency response plot, often used to illustrate the behavior of electronic filters or amplifiers. It is a Bode plot showing the magnitude of the transfer function, |H|, as a function of angular frequency, ω.\n\n1. **Graph Type and Function:**\n- This is a Bode magnitude plot, a logarithmic graph representing the frequency response of a system.\n\n2. **Axes Labels and Units:**\n- The vertical axis is labeled |H|, indicating the magnitude of the transfer function, typically in decibels (dB), though the specific unit is not shown.\n- The horizontal axis is labeled ω, representing angular frequency in radians per second.\n- The frequency axis is usually logarithmic, though this is not explicitly indicated in the diagram.\n\n3. **General Behavior and Trends:**\n- The graph shows a low-frequency rise to a flat midband region, followed by a high-frequency roll-off.\n- The curve starts at a lower corner frequency, ω_L, where the gain begins to increase.\n- It reaches a flat region called the \"midband range,\" where the gain is constant and labeled as \"Midband Gain.\"\n- Beyond the midband, the gain decreases at a higher corner frequency, ω_H.\n\n4. **Key Features and Technical Details:**\n- The lower cutoff frequency, ω_L, marks the point where the gain starts to rise toward the midband.\n- The upper cutoff frequency, ω_H, marks the point where the gain begins to decline from the midband.\n- The constant gain level in the midband is labeled as \"Midband Gain.\"\n- The bandwidth of the system is the range between ω_L and ω_H.\n\n5. **Annotations and Specific Data Points:**\n- The graph includes dashed lines at ω_L and ω_H to indicate the cutoff frequencies.\n- An arrow labeled \"Midband\" indicates the range over which the gain remains constant.\n\nThis graph is typical of a bandpass filter or amplifier, where the system allows frequencies within a certain range to pass with minimal attenuation while attenuating frequencies outside this range.\n\nFigure 11.19 Typical frequency response."
},
{
    "text": "Our prior analysis reveals that circuit capacitances tend to decrease voltage gain at high frequencies and may also affect gain at low frequencies. Consider, for instance, the high-pass filter depicted in Fig. 11.16(a), where the voltage configuration is as follows:\nimage_name:(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a simple high-pass filter. The frequency response indicates that gain rises with frequency, peaking at high frequencies. The cutoff frequency is determined by the time constant R1*C1.\nimage_name:(b)\ndescription:The graph in Fig. 11.16(b) is a Bode plot depicting the frequency response of a simple high-pass filter.\n\n1. **Graph Type and Function:**\n- The graph is a magnitude Bode plot, illustrating the high-pass filter's gain as a function of frequency.\n\n2. **Axes Labels and Units:**\n- The horizontal axis represents angular frequency (\\(\\omega\\)), measured in radians per second.\n- The vertical axis shows the voltage gain magnitude \\(\\left|\\frac{V_{\\text{out}}}{V_{\\text{in}}}\\right|\\), which is unitless.\n- Both axes use a linear scale.\n\n3. **General Behavior and Trends:**\n- The plot displays an increasing gain trend with frequency.\n- At low frequencies, the gain is near zero, indicating signal attenuation.\n- As frequency rises, the gain approaches a maximum of 1, indicating minimal attenuation of high-frequency signals.\n\n4. **Key Features and Technical Aspects:**\n- The cutoff frequency, where gain is \\(\\frac{1}{\\sqrt{2}}\\) of the maximum (about 0.707), is indicated by a vertical dashed line at \\(\\frac{1}{R_1 C_1}\\).\n- Beyond this frequency, the gain asymptotically reaches 1, allowing high-frequency signals to pass effectively.\n\n5. **Annotations and Specific Points:**\n- A horizontal dashed line at a gain of 1 marks the maximum gain.\n- The point at \\(\\frac{1}{R_1 C_1}\\) is annotated, indicating the transition from low to high gain.\n\nFigure 11.16 (a) Simple high-pass filter, and (b) its frequency response.\nthe voltage division between $C_{1}$ and $R_{1}$ results in\n\n$$\n\\begin{align*}\n\\frac{V_{\\text {out }}}{V_{\\text {in }}}(s) & =\\frac{R_{1}}{R_{1}+\\frac{1}{C_{1} s}}  \\tag{11.36}\\\\\n& =\\frac{R_{1} C_{1} s}{R_{1} C_{1} s+1} \\tag{11.37}\n\\end{align*}\n$$\n\nand thus\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text {out }}}{V_{\\text {in }}}\\right|=\\frac{R_{1} C_{1} \\omega}{\\sqrt{R_{1}^{2} C_{1}^{2} \\omega_{1}^{2}+1}} \\tag{11.38}\n\\end{equation*}\n$$\n\nAs shown in Fig. 11.16(b), the response exhibits a roll-off when the frequency drops below $1 /\\left(R_{1} C_{1}\\right)$. This roll-off, as seen from Eq. (11.37), occurs due to the zero of the transfer function being at the origin.\n\nThe low-frequency roll-off can be problematic. The following example demonstrates this issue.\n\nExample\n11.11\n\nFigure 11.17 shows a source follower used in a high-fidelity audio amplifier. Here, $R_{i}$ sets a gate bias voltage equal to $V_{D D}$ for $M_{1}$, and $I_{1}$ defines the drain bias current. Assuming $\\lambda=0, g_{m}=1 /(200 \\Omega)$, and $R_{1}=100 \\mathrm{k} \\Omega$, determine the minimum required $C_{1}$ and the maximum acceptable $C_{L}$.\nimage_name:Figure 11.17\ndescription:\n[\nname: Ri, type: Resistor, value: Ri, ports: {N1: g1, N2: VDD}\nname: Ci, type: Capacitor, value: Ci, ports: {Np: Vin, Nn: g1}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: g1}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a source follower configuration in a high-fidelity audio amplifier. It includes an NMOS transistor (M1) with gate bias set by Ri and drain bias current defined by I1. The input is Vin, and the output is Vout. Low-frequency roll-off is managed by Ci, and the load capacitance is CL.\n\nFigure 11.17\nSolution Similar to the high-pass filter in Fig. 11.16, the input network of $R_{i}$ and $C_{i}$ attenuates low-frequency signals. To ensure minimal attenuation for audio frequencies down to 20 Hz, we set the corner frequency $1 /\\left(R_{i} C_{i}\\right)$ to $2 \\pi \\times(20 \\mathrm{~Hz})$, resulting in\n\n$$\n\\begin{equation*}\nC_{i}=79.6 \\mathrm{nF} \\tag{11.39}\n\\end{equation*}\n$$\n\nThis value is too large for integration on a chip. Since Eq. (11.38) indicates a 3 dB attenuation at $\\omega=1 /\\left(R_{i} C_{i}\\right)$, a larger capacitor is needed for lower attenuation.\n\nThe load capacitance introduces a pole at the output node, reducing gain at high frequencies. Setting the pole frequency to the upper audio limit of 20 kHz and considering the resistance seen from the output node to ground as $1 / g_{m}$, we get\n\n$$\n\\begin{align*}\n\\omega_{p, \\text { out }} & =\\frac{g_{m}}{C_{L}}  \\tag{11.40}\\\\\n& =2 \\pi \\times(20 \\mathrm{kHz}) \\tag{11.41}\n\\end{align*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\nC_{L}=39.8 \\mathrm{nF} \\tag{11.42}\n\\end{equation*}\n$$\n\nThe source follower, being an efficient driver, can handle a large load capacitance for the audio band.\n\nExercise $\\quad$ Repeat the example if $I_{1}$ and the width of $M_{1}$ are halved.\n\nWhy use capacitor $C_{i}$ in this example? Without $C_{i}$, the circuit's gain would not decrease at low frequencies, eliminating the need for these calculations. Known as a \"coupling\" capacitor, $C_{i}$ allows the desired signal frequencies to pass while blocking the dc component of $V_{i n}$. In other words, $C_{i}$ isolates the bias conditions of the source follower from the preceding stage. Figure 11.18(a) illustrates this with a CS stage preceding the source follower. The coupling capacitor enables independent biasing at nodes $X$ and $Y$. For instance, $V_{Y}$ can be set low (placing $M_{2}$ near the triode region) to maximize the voltage gain of the CS stage.\nimage_name:Figure 11.18(a)\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Y}\nname: Ri, type: Resistor, value: Ri, ports: {N1: VDD, N2: X}\nname: Ci, type: Capacitor, value: Ci, ports: {Np: Y, Nn: X}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: X}\nname: M2, type: NMOS, ports: {S: GND, D: Y, G: Vin}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a cascade of a common-source (CS) stage and a source follower. The coupling capacitor Ci allows independent biasing of the CS stage and the source follower. RD and Ri set the bias conditions. M1 acts as a source follower, and M2 as a common-source amplifier. I1 provides biasing current to the source follower stage.\n\n(a)\nimage_name:(b)\ndescription:\n[\nname: RD, type: Resistor, ports: {N1: VDD, N2: P}\nname: M2, type: NMOS, ports: {S: GND, D: P, G: Vin}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: P}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a cascade of a common-source (CS) stage and a source follower. The coupling capacitor Ci allows independent biasing of the CS stage and the source follower. RD and Ri set the bias conditions. M1 acts as a source follower, and M2 as a common-source amplifier. I1 provides biasing current to the source follower stage.\n\n(b)\n\nFigure 11.18 Cascade of CS stage and source follower with (a) capacitor coupling and (b) direct coupling.\n\nTo emphasize the necessity of capacitive coupling in Fig. 11.18(a), consider the \"direct coupling\" scenario in Fig. 11.18(b). Here, to maximize voltage gain, $V_{P}$ should be slightly above $V_{G S 2}-V_{T H 2}$, e.g., 200 mV. However, the gate of $M_{2}$ must be at least $V_{G S 1}+V_{I 1}$, where $V_{I 1}$ is the minimum voltage for $I_{1}$. Since $V_{G S 1}+V_{I 1}$ could be 600-700 mV, the stages have incompatible bias points without capacitive coupling.\n\nCapacitive coupling, or \"ac coupling,\" is prevalent in discrete circuit design due to the large capacitor values often required (e.g., $C_{i}$ in the audio example). Nevertheless, integrated circuits also use capacitive coupling, especially at low supply voltages, if the required capacitor values are only a few picofarads.\n\nFigure 11.19 illustrates a typical frequency response and its terminology. $\\omega_{L}$ is termed the lower corner or lower \"cut-off\" frequency, and $\\omega_{H}$ the upper corner or upper cut-off frequency. The band between $\\omega_{L}$ and $\\omega_{H}$, chosen to cover the signal frequencies of interest, is the \"midband range,\" and the corresponding gain is the \"midband gain.\"\nimage_name:Figure 11.19 Typical frequency response.\ndescription:The graph in Figure 11.19 is a typical frequency response plot, often used to illustrate the behavior of electronic filters or amplifiers. It is a Bode plot showing the magnitude of the transfer function, |H|, as a function of angular frequency, ω.\n\n1. **Graph Type and Function:**\n- This is a Bode magnitude plot, a logarithmic graph representing the frequency response of a system.\n\n2. **Axes Labels and Units:**\n- The vertical axis is labeled |H|, indicating the magnitude of the transfer function, typically in decibels (dB), though the specific unit is not shown.\n- The horizontal axis is labeled ω, representing angular frequency in radians per second.\n- The frequency axis is usually logarithmic, though this is not explicitly indicated in the diagram.\n\n3. **Overall Behavior and Trends:**\n- The graph shows a rise at low frequencies, a flat midband region, and a roll-off at high frequencies.\n- The curve starts at the lower corner frequency, ω_L, where gain begins to increase.\n- It reaches a constant midband range, where the gain is labeled as \"Midband Gain.\"\n- Beyond the midband, the gain decreases at the upper corner frequency, ω_H.\n\n4. **Key Features and Technical Details:**\n- The lower cutoff frequency, ω_L, marks the point where gain starts to rise toward the midband.\n- The upper cutoff frequency, ω_H, marks the point where gain begins to decline from the midband.\n- The constant gain in the midband is labeled as \"Midband Gain.\"\n- The bandwidth of the system is the range between ω_L and ω_H.\n\n5. **Annotations and Specific Data Points:**\n- Dashed lines at ω_L and ω_H indicate the cutoff frequencies.\n- An arrow labeled \"Midband\" highlights the range where the gain remains constant.\n\nThis graph is typical for a bandpass filter or amplifier, allowing frequencies within a specific range to pass with minimal attenuation while attenuating frequencies outside this range.\n\nFigure 11.19 Typical frequency response."
},
{
    "text": "Our prior study reveals that circuit capacitances tend to decrease voltage gain at high frequencies. It is also plausible that capacitors might similarly reduce gain at low frequencies. For illustration, consider the high-pass filter depicted in Fig. 11.16(a), where the voltage\nimage_name:(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a simple high-pass filter. The frequency response indicates that gain rises with frequency, peaking at high frequencies. The cutoff frequency is dictated by the time constant R1*C1.\nimage_name:(b)\ndescription:The graph in Fig. 11.16(b) is a Bode plot depicting the frequency response of a basic high-pass filter.\n\n1. **Graph Type and Function:**\n- The graph is a magnitude Bode plot, illustrating the high-pass filter's gain as a function of frequency.\n\n2. **Axes Labels and Units:**\n- The horizontal axis represents angular frequency (\\(\\omega\\)), typically in radians per second.\n- The vertical axis shows the magnitude of the voltage gain \\(\\left|\\frac{V_{\\text{out}}}{V_{\\text{in}}}\\right|\\), which is unitless.\n- Both axes use a linear scale.\n\n3. **General Behavior and Trends:**\n- The plot displays an increasing gain trend with rising frequency.\n- At low frequencies, the gain is near zero, indicating signal attenuation.\n- As frequency increases, the gain approaches a maximum of 1, indicating minimal attenuation of high-frequency signals.\n\n4. **Key Features and Technical Aspects:**\n- The cutoff frequency, where gain is \\(\\frac{1}{\\sqrt{2}}\\) of the maximum (about 0.707), is marked by a vertical dashed line at \\(\\frac{1}{R_1 C_1}\\).\n- Beyond this cutoff, the gain asymptotically reaches 1, allowing high-frequency signals to pass effectively.\n\n5. **Annotations and Specific Points:**\n- A horizontal dashed line at a gain of 1 indicates the maximum gain.\n- The point at \\(\\frac{1}{R_1 C_1}\\) is annotated, marking the transition from low to high gain.\n\nFigure 11.16 (a) Simple high-pass filter, and (b) its frequency response.\nvoltage division between $C_{1}$ and $R_{1}$ results in\n\n$$\n\\begin{align*}\n\\frac{V_{\\text {out }}}{V_{\\text {in }}}(s) & =\\frac{R_{1}}{R_{1}+\\frac{1}{C_{1} s}}  \\tag{11.36}\\\\\n& =\\frac{R_{1} C_{1} s}{R_{1} C_{1} s+1} \\tag{11.37}\n\\end{align*}\n$$\n\nand thus\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text {out }}}{V_{\\text {in }}}\\right|=\\frac{R_{1} C_{1} \\omega}{\\sqrt{R_{1}^{2} C_{1}^{2} \\omega^{2}+1}} \\tag{11.38}\n\\end{equation*}\n$$\n\nAs shown in Fig. 11.16(b), the response exhibits a roll-off when the operating frequency drops below $1 /\\left(R_{1} C_{1}\\right)$. This roll-off, as seen from Eq. (11.37), arises due to the zero of the transfer function being at the origin.\n\nThe low-frequency roll-off might be undesirable. The following example demonstrates this issue.\n\nExample\n11.11\n\nFig. 11.17 shows a source follower used in a high-fidelity audio amplifier. Here, $R_{i}$ sets a gate bias voltage equal to $V_{D D}$ for $M_{1}$, and $I_{1}$ defines the drain bias current. Assuming $\\lambda=0, g_{m}=1 /(200 \\Omega)$, and $R_{1}=100 \\mathrm{k} \\Omega$, determine the minimum required $C_{1}$ and the maximum acceptable $C_{L}$.\nimage_name:Figure 11.17\ndescription:\n[\nname: Ri, type: Resistor, value: Ri, ports: {N1: g1, N2: VDD}\nname: Ci, type: Capacitor, value: Ci, ports: {Np: Vin, Nn: g1}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: g1}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a source follower configuration in a high-fidelity audio amplifier. It includes an NMOS transistor (M1) with gate bias set by Ri and drain bias current defined by I1. The input is Vin, and the output is Vout. Ci manages the low-frequency roll-off, and CL is the load capacitance.\n\nFigure 11.17\nSolution Similar to the high-pass filter in Fig. 11.16, the input network of $R_{i}$ and $C_{i}$ attenuates low-frequency signals. To ensure minimal attenuation for audio frequencies down to 20 Hz, we set the corner frequency $1 /\\left(R_{i} C_{i}\\right)$ to $2 \\pi \\times(20 \\mathrm{~Hz})$, yielding\n\n$$\n\\begin{equation*}\nC_{i}=79.6 \\mathrm{nF} \\tag{11.39}\n\\end{equation*}\n$$\n\nThis value is too large for integration on a chip. Since Eq. (11.38) indicates a 3 dB attenuation at $\\omega=1 /\\left(R_{i} C_{i}\\right)$, a larger capacitor is needed for lower attenuation in practice.\n\nThe load capacitance creates a pole at the output node, reducing gain at high frequencies. Setting the pole frequency to the upper audio limit, 20 kHz, and noting that the resistance seen from the output node to ground is $1 / g_{m}$, we get\n\n$$\n\\begin{align*}\n\\omega_{p, \\text { out }} & =\\frac{g_{m}}{C_{L}}  \\tag{11.40}\\\\\n& =2 \\pi \\times(20 \\mathrm{kHz}) \\tag{11.41}\n\\end{align*}\n$$\n\nresulting in\n\n$$\n\\begin{equation*}\nC_{L}=39.8 \\mathrm{nF} \\tag{11.42}\n\\end{equation*}\n$$\n\nThe source follower, being an efficient driver, can handle a large load capacitance for the audio band.\n\nExercise $\\quad$ Repeat the example if $I_{1}$ and the width of $M_{1}$ are halved.\n\nWhy use capacitor $C_{i}$ in the example? Without $C_{i}$, the circuit's gain would not decline at low frequencies, eliminating the need for these calculations. Known as a \"coupling\" capacitor, $C_{i}$ allows the desired signal frequencies to pass while blocking the dc component of $V_{i n}$. In other words, $C_{i}$ isolates the bias conditions of the source follower from the preceding stage. Fig. 11.18(a) illustrates this with a CS stage preceding the source follower. The coupling capacitor enables independent biasing at nodes $X$ and $Y$. For instance, $V_{Y}$ can be set low (placing $M_{2}$ near the triode region) to maximize the voltage gain of the CS stage (why?).\nimage_name:Figure 11.18(a)\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Y}\nname: Ri, type: Resistor, value: Ri, ports: {N1: VDD, N2: X}\nname: Ci, type: Capacitor, value: Ci, ports: {Np: Y, Nn: X}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: X}\nname: M2, type: NMOS, ports: {S: GND, D: Y, G: Vin}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a cascade of a common-source (CS) stage and a source follower. The coupling capacitor Ci allows independent biasing of the CS stage and the source follower. RD and Ri set the bias conditions. M1 acts as a source follower, and M2 as a common-source amplifier. I1 provides biasing current to the source follower stage.\n\n(a)\nimage_name:(b)\ndescription:\n[\nname: RD, type: Resistor, ports: {N1: VDD, N2: P}\nname: M2, type: NMOS, ports: {S: GND, D: P, G: Vin}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: P}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a cascade of a common-source (CS) stage and a source follower. The coupling capacitor Ci allows independent biasing of the CS stage and the source follower. RD and Ri set the bias conditions. M1 acts as a source follower, and M2 as a common-source amplifier. I1 provides biasing current to the source follower stage.\n\n(b)\n\nFigure 11.18 Cascade of CS stage and source follower with (a) capacitor coupling and (b) direct coupling.\n\nTo demonstrate the necessity of capacitive coupling in Fig. 11.18(a), consider the \"direct coupling\" scenario in Fig. 11.18(b). Here, to maximize voltage gain, we aim to set $V_{P}$ just above $V_{G S 2}-V_{T H 2}$, e.g., 200 mV. However, the gate of $M_{2}$ must be at least $V_{G S 1}+V_{I 1}$, where $V_{I 1}$ is the minimum voltage for $I_{1}$. Since $V_{G S 1}+V_{I 1}$ could be 600-700 mV, the stages have incompatible bias points, necessitating capacitive coupling.\n\nCapacitive coupling (or \"ac coupling\") is common in discrete circuit design due to the large capacitor values often required (e.g., $C_{i}$ in the audio example). However, it is also used in integrated circuits, especially at low supply voltages, if the required capacitor values are only a few picofarads.\n\nFigure 11.19 illustrates a typical frequency response and its terminology. We refer to $\\omega_{L}$ as the lower corner or \"cut-off\" frequency and $\\omega_{H}$ as the upper corner or \"cut-off\" frequency. The band between $\\omega_{L}$ and $\\omega_{H}$, chosen to accommodate the signal frequencies of interest, is called the \"midband range,\" and the corresponding gain is the \"midband gain.\"\nimage_name:Figure 11.19 Typical frequency response.\ndescription:The graph in Figure 11.19 is a typical frequency response plot, often used to illustrate the behavior of electronic filters or amplifiers. It is a Bode plot showing the magnitude of the transfer function, |H|, as a function of angular frequency, ω.\n\n1. **Graph Type and Function:**\n- This is a Bode magnitude plot, a logarithmic graph representing the frequency response of a system.\n\n2. **Axes Labels and Units:**\n- The vertical axis is labeled |H|, representing the magnitude of the transfer function, typically in decibels (dB), though the unit is not shown.\n- The horizontal axis is labeled ω, representing angular frequency in radians per second.\n- The frequency axis is usually logarithmic, though not explicitly indicated.\n\n3. **General Behavior and Trends:**\n- The graph shows a low-frequency rise to a flat midband region, followed by a high-frequency roll-off.\n- The curve starts at a lower corner frequency, ω_L, where the gain begins to increase.\n- It reaches a flat region called the \"midband range,\" where the gain is constant and labeled as \"Midband Gain.\"\n- Beyond the midband, the gain decreases at a higher corner frequency, ω_H.\n\n4. **Key Features and Technical Details:**\n- The lower cutoff frequency, ω_L, marks the point where the gain starts to rise toward the midband.\n- The upper cutoff frequency, ω_H, marks the point where the gain begins to decline from the midband.\n- The constant gain level in the midband is labeled as \"Midband Gain.\"\n- The bandwidth of the system is the range between ω_L and ω_H.\n\n5. **Annotations and Specific Data Points:**\n- The graph includes dashed lines at ω_L and ω_H to indicate the cutoff frequencies.\n- An arrow labeled \"Midband\" indicates the range over which the gain remains constant.\n\nThis graph is typical of a bandpass filter or amplifier, where the system allows frequencies within a certain range to pass with minimal attenuation while attenuating frequencies outside this range.\n\nFigure 11.19 Typical frequency response."
},
{
    "text": "Our prior research indicates that capacitances in a circuit tend to reduce the voltage gain at high frequencies. It is also possible that capacitors diminish the gain at low frequencies. For instance, consider the high-pass filter depicted in Fig. 11.16(a), where the voltage\nimage_name:(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a simple high-pass filter. The frequency response indicates that the gain increases with frequency, reaching a maximum at high frequencies. The cutoff frequency is determined by the time constant R1*C1.\nimage_name:(b)\ndescription:The graph in Fig. 11.16(b) is a Bode plot depicting the frequency response of a simple high-pass filter.\n\n1. **Graph Type and Function:**\n- The graph is a magnitude Bode plot, illustrating the gain of the high-pass filter as a function of frequency.\n\n2. **Axes Labels and Units:**\n- The horizontal axis represents angular frequency (ω), typically measured in radians per second.\n- The vertical axis represents the magnitude of the voltage gain \\(\\left|\\frac{V_{\\text{out}}}{V_{\\text{in}}}\\right|\\), which is unitless.\n- Both axes use a linear scale.\n\n3. **Overall Behavior and Trends:**\n- The plot shows an increasing trend in gain with frequency.\n- At low frequencies, the gain is near zero, indicating the filter attenuates low-frequency signals.\n- As frequency increases, the gain approaches a maximum value of 1, indicating minimal attenuation of high-frequency signals.\n\n4. **Key Features and Technical Details:**\n- The cutoff frequency, where the gain is \\(\\frac{1}{\\sqrt{2}}\\) of the maximum (approximately 0.707), is marked by a vertical dashed line at \\(\\frac{1}{R_1 C_1}\\).\n- Beyond the cutoff frequency, the gain asymptotically approaches 1, indicating effective passage of high-frequency signals.\n\n5. **Annotations and Specific Data Points:**\n- The graph includes a horizontal dashed line at a gain level of 1, indicating the maximum gain.\n- The significant point at \\(\\frac{1}{R_1 C_1}\\) is annotated, marking the transition from low to high gain.\n\nFigure 11.16 (a) Simple high-pass filter, and (b) its frequency response.\ndivision between \\(C_1\\) and \\(R_1\\) yields\n\n$$\n\\begin{align*}\n\\frac{V_{\\text{out}}}{V_{\\text{in}}}(s) & = \\frac{R_1}{R_1 + \\frac{1}{C_1 s}} \\tag{11.36}\\\\\n& = \\frac{R_1 C_1 s}{R_1 C_1 s + 1} \\tag{11.37}\n\\end{align*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text{out}}}{V_{\\text{in}}}\\right| = \\frac{R_1 C_1 \\omega}{\\sqrt{R_1^2 C_1^2 \\omega^2 + 1}} \\tag{11.38}\n\\end{equation*}\n$$\n\nPlotted in Fig. 11.16(b), the response shows a roll-off as the frequency decreases below \\(1 / (R_1 C_1)\\). As seen from Eq. (11.37), this roll-off occurs because the zero of the transfer function is at the origin.\n\nThe low-frequency roll-off may be undesirable. The following example illustrates this point.\n\nExample\n11.11\n\nFigure 11.17 shows a source follower used in a high-quality audio amplifier. Here, \\(R_i\\) sets a gate bias voltage equal to \\(V_{DD}\\) for \\(M_1\\), and \\(I_1\\) defines the drain bias current. Assume \\(\\lambda = 0, g_m = 1 / (200 \\Omega)\\), and \\(R_1 = 100 \\text{k}\\Omega\\). Determine the minimum required value of \\(C_1\\) and the maximum acceptable value of \\(C_L\\).\nimage_name:Figure 11.17\ndescription:\n[\nname: Ri, type: Resistor, value: Ri, ports: {N1: g1, N2: VDD}\nname: Ci, type: Capacitor, value: Ci, ports: {Np: Vin, Nn: g1}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: g1}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a source follower configuration used in a high-quality audio amplifier. It includes an NMOS transistor (M1) with gate bias set by Ri and a drain bias current defined by I1. The input is Vin, and the output is Vout. The low-frequency roll-off is managed by Ci, and the load capacitance is CL.\n\nFigure 11.17\nSolution Similar to the high-pass filter in Fig. 11.16, the input network of \\(R_i\\) and \\(C_i\\) attenuates the signal at low frequencies. To ensure minimal attenuation of audio components as low as 20 Hz, we set the corner frequency \\(1 / (R_i C_i)\\) to \\(2\\pi \\times 20 \\text{ Hz}\\), resulting in\n\n$$\n\\begin{equation*}\nC_i = 79.6 \\text{nF} \\tag{11.39}\n\\end{equation*}\n$$\n\nThis value is too large for integration on a chip. Since Eq. (11.38) indicates a 3 dB attenuation at \\(\\omega = 1 / (R_i C_i)\\), in practice, a larger capacitor is needed for lower attenuation.\n\nThe load capacitance creates a pole at the output node, reducing the gain at high frequencies. Setting the pole frequency to the upper limit of the audio range, 20 kHz, and recognizing that the resistance seen from the output node to ground is \\(1 / g_m\\), we have\n\n$$\n\\begin{align*}\n\\omega_{p, \\text{out}} & = \\frac{g_m}{C_L} \\tag{11.40}\\\\\n& = 2\\pi \\times 20 \\text{kHz} \\tag{11.41}\n\\end{align*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\nC_L = 39.8 \\text{nF} \\tag{11.42}\n\\end{equation*}\n$$\n\nAn efficient driver, the source follower can tolerate a large load capacitance for the audio band.\n\nExercise Repeat the above example if \\(I_1\\) and the width of \\(M_1\\) are halved.\n\nWhy use capacitor \\(C_i\\) in the example? Without \\(C_i\\), the circuit's gain would not decrease at low frequencies, eliminating the need for the above calculations. Known as a \"coupling\" capacitor, \\(C_i\\) allows the desired signal frequencies to pass while blocking the DC content of \\(V_{in}\\). In other words, \\(C_i\\) isolates the bias conditions of the source follower from those of the preceding stage. Figure 11.18(a) illustrates this with a CS stage preceding the source follower. The coupling capacitor permits independent bias voltages at nodes \\(X\\) and \\(Y\\). For example, \\(V_Y\\) can be set relatively low (placing \\(M_2\\) near the triode region) to maximize the voltage drop across \\(R_D\\), thereby increasing the CS stage's voltage gain.\nimage_name:Figure 11.18(a)\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Y}\nname: Ri, type: Resistor, value: Ri, ports: {N1: VDD, N2: X}\nname: Ci, type: Capacitor, value: Ci, ports: {Np: Y, Nn: X}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: X}\nname: M2, type: NMOS, ports: {S: GND, D: Y, G: Vin}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a cascade of a common-source (CS) stage and a source follower. The coupling capacitor Ci allows independent biasing of the CS stage and the source follower. RD and Ri are used to set the bias conditions. M1 acts as a source follower, and M2 as a common-source amplifier. I1 is a current source providing biasing current to the source follower stage.\n\n(a)\nimage_name:(b)\ndescription:\n[\nname: RD, type: Resistor, ports: {N1: VDD, N2: P}\nname: M2, type: NMOS, ports: {S: GND, D: P, G: Vin}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: P}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a cascade of a common-source (CS) stage and a source follower. The coupling capacitor Ci allows independent biasing of the CS stage and the source follower. RD and Ri are used to set the bias conditions. M1 acts as a source follower, and M2 as a common-source amplifier. I1 is a current source providing biasing current to the source follower stage.\n\n(b)\n\nFigure 11.18 Cascade of CS stage and source follower with (a) capacitor coupling and (b) direct coupling.\n\nTo demonstrate the necessity of capacitive coupling in Fig. 11.18(a), consider the \"direct coupling\" case [Fig. 11.18(b)]. Here, to maximize voltage gain, we want to set \\(V_P\\) just above \\(V_{GS2} - V_{TH2}\\), e.g., 200 mV. However, the gate of \\(M_2\\) must be at least \\(V_{GS1} + V_{I1}\\), where \\(V_{I1}\\) is the minimum voltage required by \\(I_1\\). Since \\(V_{GS1} + V_{I1}\\) can reach 600-700 mV, the two stages are incompatible in terms of bias points, necessitating capacitive coupling.\n\nCapacitive coupling (or \"AC coupling\") is common in discrete circuit design due to the large capacitor values often required (e.g., \\(C_i\\) in the audio example). However, many integrated circuits also use capacitive coupling, especially at low supply voltages, if the required capacitor values are only a few picofarads.\n\nFigure 11.19 shows a typical frequency response and the associated terminology. We refer to \\(\\omega_L\\) as the lower corner or lower \"cut-off\" frequency and \\(\\omega_H\\) as the upper corner or upper cut-off frequency. The band between \\(\\omega_L\\) and \\(\\omega_H\\), chosen to accommodate the signal frequencies of interest, is called the \"midband range,\" and the corresponding gain is the \"midband gain.\"\nimage_name:Figure 11.19 Typical frequency response.\ndescription:The graph in Figure 11.19 is a typical frequency response plot, often used to illustrate the behavior of electronic filters or amplifiers. It is a Bode plot showing the magnitude of the transfer function, |H|, as a function of angular frequency, ω.\n\n1. **Graph Type and Function:**\n- This is a Bode magnitude plot, a logarithmic graph representing the frequency response of a system.\n\n2. **Axes Labels and Units:**\n- The vertical axis is labeled |H|, representing the magnitude of the transfer function, typically in decibels (dB), though the specific unit is not shown.\n- The horizontal axis is labeled ω, representing the angular frequency in radians per second.\n- The frequency axis is usually logarithmic, though this is not explicitly shown.\n\n3. **Overall Behavior and Trends:**\n- The graph shows a low-frequency rise to a flat midband region, followed by a high-frequency roll-off.\n- The curve starts at a lower corner frequency, \\(\\omega_L\\), where the gain begins to increase.\n- It reaches a flat region called the \"midband range,\" where the gain is constant and labeled as \"Midband Gain.\"\n- After the midband, the gain decreases at a higher corner frequency, \\(\\omega_H\\).\n\n4. **Key Features and Technical Details:**\n- The lower cutoff frequency, \\(\\omega_L\\), marks the point where the gain starts to rise toward the midband.\n- The upper cutoff frequency, \\(\\omega_H\\), marks the point where the gain begins to decline from the midband.\n- The constant gain level in the midband is labeled as \"Midband Gain.\"\n- The bandwidth of the system is the range between \\(\\omega_L\\) and \\(\\omega_H\\).\n\n5. **Annotations and Specific Data Points:**\n- The graph includes dashed lines at \\(\\omega_L\\) and \\(\\omega_H\\) to indicate the cutoff frequencies.\n- An arrow labeled \"Midband\" indicates the range over which the gain remains constant.\n\nThis graph is typical of a bandpass filter or amplifier, where the system allows frequencies within a certain range to pass with minimal attenuation while attenuating frequencies outside this range.\n\nFigure 11.19 Typical frequency response."
},
{
    "text": "Our prior analysis reveals that capacitances within a circuit tend to diminish the voltage gain at elevated frequencies. It is conceivable that capacitors also reduce gain at lower frequencies. To illustrate, consider the high-pass filter depicted in Fig. 11.16(a), where the voltage\nimage_name:(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a simple high-pass filter. The frequency response indicates that gain rises with frequency, peaking at high frequencies. The cutoff frequency is dictated by the time constant R1*C1.\nimage_name:(b)\ndescription:The graph in Fig. 11.16(b) is a Bode plot depicting the frequency response of a basic high-pass filter.\n\n1. **Graph Type and Function:**\n- The graph is a magnitude Bode plot, illustrating the gain of the high-pass filter as a function of frequency.\n\n2. **Axes Labels and Units:**\n- The horizontal axis denotes angular frequency (ω), usually measured in radians per second.\n- The vertical axis represents the magnitude of the voltage gain \\(\\left|\\frac{V_{\\text{out}}}{V_{\\text{in}}}\\right|\\), which is dimensionless.\n- Both axes employ a linear scale.\n\n3. **General Behavior and Trends:**\n- The plot shows a gain increase with rising frequency.\n- At low frequencies, the gain is near zero, indicating signal attenuation.\n- As frequency climbs, the gain approaches a maximum of 1, suggesting minimal attenuation of high-frequency signals.\n\n4. **Key Features and Technical Aspects:**\n- The cutoff frequency, where gain is \\(\\frac{1}{\\sqrt{2}}\\) of the maximum (about 0.707), is marked by a vertical dashed line at \\(\\frac{1}{R_1 C_1}\\).\n- Beyond this point, the gain asymptotically reaches 1, indicating effective passage of high-frequency signals.\n\n5. **Annotations and Specific Points:**\n- The graph features a horizontal dashed line at a gain of 1, indicating peak gain.\n- The point at \\(\\frac{1}{R_1 C_1}\\) is annotated, marking the transition from low to high gain.\n\nFigure 11.16 (a) Basic high-pass filter, and (b) its frequency response.\ndivision between $C_{1}$ and $R_{1}$ yields\n\n$$\n\\begin{align*}\n\\frac{V_{\\text {out }}}{V_{\\text {in }}}(s) & =\\frac{R_{1}}{R_{1}+\\frac{1}{C_{1} s}}  \\tag{11.36}\\\\\n& =\\frac{R_{1} C_{1} s}{R_{1} C_{1} s+1} \\tag{11.37}\n\\end{align*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text {out }}}{V_{\\text {in }}}\\right|=\\frac{R_{1} C_{1} \\omega}{\\sqrt{R_{1}^{2} C_{1}^{2} \\omega^{2}+1}} \\tag{11.38}\n\\end{equation*}\n$$\n\nAs shown in Fig. 11.16(b), the response displays a roll-off as the operating frequency drops below $1 /\\left(R_{1} C_{1}\\right)$. This roll-off, as per Eq. (11.37), results from the zero of the transfer function being at the origin.\n\nThe low-frequency roll-off might be undesirable. The following example demonstrates this issue.\n\nExample\n11.11\n\nFigure 11.17 shows a source follower used in a high-fidelity audio amplifier. Here, $R_{i}$ sets a gate bias voltage equal to $V_{D D}$ for $M_{1}$, and $I_{1}$ defines the drain bias current. Assuming $\\lambda=0, g_{m}=1 /(200 \\Omega)$, and $R_{1}=100 \\mathrm{k} \\Omega$, determine the minimum required $C_{1}$ and the maximum acceptable $C_{L}$.\nimage_name:Figure 11.17\ndescription:\n[\nname: Ri, type: Resistor, value: Ri, ports: {N1: g1, N2: VDD}\nname: Ci, type: Capacitor, value: Ci, ports: {Np: Vin, Nn: g1}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: g1}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a source follower configuration in a high-fidelity audio amplifier. It includes an NMOS transistor (M1) with gate bias set by Ri and drain bias current defined by I1. The input is Vin, and the output is Vout. Low-frequency roll-off is managed by Ci, and the load capacitance is CL.\n\nFigure 11.17\nSolution Similar to the high-pass filter in Fig. 11.16, the input network of $R_{i}$ and $C_{i}$ attenuates low-frequency signals. To ensure minimal attenuation for audio frequencies down to 20 Hz, we set the corner frequency $1 /\\left(R_{i} C_{i}\\right)$ to $2 \\pi \\times(20 \\mathrm{~Hz})$, resulting in\n\n$$\n\\begin{equation*}\nC_{i}=79.6 \\mathrm{nF} \\tag{11.39}\n\\end{equation*}\n$$\n\nThis value is excessively large for integration on a chip. Since Eq. (11.38) indicates a 3 dB attenuation at $\\omega=1 /\\left(R_{i} C_{i}\\right)$, a larger capacitor may be needed for lower attenuation.\n\nThe load capacitance introduces a pole at the output node, reducing gain at high frequencies. Setting the pole frequency to the upper audio limit of 20 kHz and recognizing the resistance seen from the output node to ground as $1 / g_{m}$, we get\n\n$$\n\\begin{align*}\n\\omega_{p, \\text { out }} & =\\frac{g_{m}}{C_{L}}  \\tag{11.40}\\\\\n& =2 \\pi \\times(20 \\mathrm{kHz}) \\tag{11.41}\n\\end{align*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\nC_{L}=39.8 \\mathrm{nF} \\tag{11.42}\n\\end{equation*}\n$$\n\nThe source follower, being an efficient driver, can handle a large load capacitance for the audio band.\n\nExercise $\\quad$ Repeat the above example if $I_{1}$ and the width of $M_{1}$ are halved.\n\nWhy use capacitor $C_{i}$ in the example? Without $C_{i}$, the circuit's gain would not decline at low frequencies, eliminating the need for the above calculations. Known as a \"coupling\" capacitor, $C_{i}$ allows the desired signal frequencies to pass while blocking the dc component of $V_{i n}$. In essence, $C_{i}$ isolates the bias conditions of the source follower from the preceding stage. Figure 11.18(a) exemplifies this with a CS stage preceding the source follower. The coupling capacitor enables independent bias voltages at nodes $X$ and $Y$. For instance, $V_{Y}$ can be set relatively low (keeping $M_{2}$ near the triode region) to maximize the voltage gain of the CS stage (why?).\nimage_name:Figure 11.18(a)\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Y}\nname: Ri, type: Resistor, value: Ri, ports: {N1: VDD, N2: X}\nname: Ci, type: Capacitor, value: Ci, ports: {Np: Y, Nn: X}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: X}\nname: M2, type: NMOS, ports: {S: GND, D: Y, G: Vin}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a cascade of a common-source (CS) stage and a source follower. The coupling capacitor Ci allows independent biasing of the CS stage and the source follower. RD and Ri set the bias conditions. M1 acts as a source follower, and M2 as a common-source amplifier. I1 provides biasing current to the source follower stage.\n\n(a)\nimage_name:(b)\ndescription:\n[\nname: RD, type: Resistor, ports: {N1: VDD, N2: P}\nname: M2, type: NMOS, ports: {S: GND, D: P, G: Vin}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: P}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a cascade of a common-source (CS) stage and a source follower. The coupling capacitor Ci allows independent biasing of the CS stage and the source follower. RD and Ri set the bias conditions. M1 acts as a source follower, and M2 as a common-source amplifier. I1 provides biasing current to the source follower stage.\n\n(b)\n\nFigure 11.18 Cascade of CS stage and source follower with (a) capacitor coupling and (b) direct coupling.\n\nTo demonstrate the necessity of capacitive coupling in Fig. 11.18(a), consider the \"direct coupling\" scenario [Fig. 11.18(b)]. Here, to maximize voltage gain, we aim to set $V_{P}$ just above $V_{G S 2}-V_{T H 2}$, e.g., 200 mV. Conversely, the gate of $M_{2}$ must be at least $V_{G S 1}+V_{I 1}$, where $V_{I 1}$ is the minimum voltage required by $I_{1}$. Since $V_{G S 1}+V_{I 1}$ could be $600-700 \\mathrm{mV}$, the stages have incompatible bias points, necessitating capacitive coupling.\n\nCapacitive coupling, or \"ac coupling,\" is prevalent in discrete circuit design due to the large capacitor values often required (e.g., $C_{i}$ in the audio example). However, it is also used in integrated circuits, especially at low supply voltages, if the required capacitor values are only a few picofarads.\n\nFigure 11.19 illustrates a typical frequency response and the associated terminology. We denote $\\omega_{L}$ as the lower corner or lower \"cut-off\" frequency and $\\omega_{H}$ as the upper corner or upper cut-off frequency. The band between $\\omega_{L}$ and $\\omega_{H}$, chosen to accommodate the signal frequencies of interest, is termed the \"midband range,\" and the corresponding gain is the \"midband gain.\"\nimage_name:Figure 11.19 Typical frequency response.\ndescription:The graph in Figure 11.19 is a typical frequency response plot, often used to illustrate the behavior of electronic filters or amplifiers. It is a Bode plot showing the magnitude of the transfer function, |H|, as a function of angular frequency, ω.\n\n1. **Graph Type and Function:**\n- This is a Bode magnitude plot, a logarithmic graph representing the frequency response of a system.\n\n2. **Axes Labels and Units:**\n- The vertical axis is labeled |H|, indicating the magnitude of the transfer function, typically in decibels (dB), though the specific unit is not shown.\n- The horizontal axis is labeled ω, representing angular frequency in radians per second.\n- The frequency axis is usually logarithmic, though this is not explicitly indicated in the diagram.\n\n3. **Overall Behavior and Trends:**\n- The graph shows a low-frequency rise to a flat midband region, followed by a high-frequency roll-off.\n- The curve starts at a lower corner frequency, ω_L, where the gain begins to increase.\n- It reaches a flat region called the \"midband range,\" where the gain is constant and labeled as \"Midband Gain.\"\n- Beyond the midband, the gain decreases at a higher corner frequency, ω_H.\n\n4. **Key Features and Technical Details:**\n- The lower cutoff frequency, ω_L, marks the point where the gain starts to rise toward the midband.\n- The upper cutoff frequency, ω_H, marks the point where the gain begins to decline from the midband.\n- The constant gain level in the midband is labeled as \"Midband Gain.\"\n- The bandwidth of the system is the range between ω_L and ω_H.\n\n5. **Annotations and Specific Data Points:**\n- The graph includes dashed lines at ω_L and ω_H to indicate the cutoff frequencies.\n- An arrow labeled \"Midband\" indicates the range over which the gain remains constant.\n\nThis graph is typical of a bandpass filter or amplifier, where the system allows frequencies within a certain range to pass with minimal attenuation while attenuating frequencies outside this range.\n\nFigure 11.19 Typical frequency response."
},
{
    "text": "Our previous study reveals that circuit capacitances tend to decrease voltage gain at high frequencies. It is also possible for capacitors to reduce gain at low frequencies. Consider, for instance, the high-pass filter depicted in Fig. 11.16(a), where the voltage configuration is as follows:\nimage_name:(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: GND}\n]\nextrainfo:This circuit is a basic high-pass filter. Its frequency response indicates that gain increases with frequency, peaking at high frequencies. The cutoff frequency is dictated by the time constant R1*C1.\nimage_name:(b)\ndescription:The graph in Fig. 11.16(b) is a Bode plot illustrating the frequency response of a basic high-pass filter.\n\n1. **Graph Type and Function:**\n- The graph is a magnitude Bode plot, depicting the gain of the high-pass filter as a function of frequency.\n\n2. **Axes Labels and Units:**\n- The horizontal axis represents angular frequency (ω), typically in radians per second.\n- The vertical axis shows the magnitude of the voltage gain \\( \\left|\\frac{V_{\\text{out}}}{V_{\\text{in}}}\\right| \\), which is dimensionless.\n- Both axes use a linear scale.\n\n3. **General Behavior and Trends:**\n- The plot exhibits an upward trend in gain with increasing frequency.\n- At low frequencies, the gain is near zero, indicating signal attenuation.\n- As frequency rises, the gain approaches a maximum of 1, suggesting minimal attenuation of high-frequency signals.\n\n4. **Key Features and Technical Aspects:**\n- The cutoff frequency, where the gain is \\( \\frac{1}{\\sqrt{2}} \\) of the maximum (about 0.707), is indicated by a vertical dashed line at \\( \\frac{1}{R_1 C_1} \\).\n- Beyond this cutoff, the gain asymptotically reaches 1, indicating effective passage of high-frequency signals.\n\n5. **Annotations and Specific Points:**\n- The graph includes a horizontal dashed line at a gain of 1, marking the maximum gain.\n- The significant point at \\( \\frac{1}{R_1 C_1} \\) is annotated, indicating the transition from low to high gain.\n\nFigure 11.16 (a) Basic high-pass filter, and (b) its frequency response.\nThe voltage division between C1 and R1 results in:\n\n$$\n\\begin{align*}\n\\frac{V_{\\text{out}}}{V_{\\text{in}}}(s) & = \\frac{R_1}{R_1 + \\frac{1}{C_1 s}} \\tag{11.36}\\\\\n& = \\frac{R_1 C_1 s}{R_1 C_1 s + 1} \\tag{11.37}\n\\end{align*}\n$$\n\nThus,\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text{out}}}{V_{\\text{in}}}\\right| = \\frac{R_1 C_1 \\omega}{\\sqrt{R_1^2 C_1^2 \\omega^2 + 1}} \\tag{11.38}\n\\end{equation*}\n$$\n\nAs shown in Fig. 11.16(b), the response exhibits a roll-off when the operating frequency drops below \\( \\frac{1}{R_1 C_1} \\). This roll-off, as seen from Eq. (11.37), occurs because the transfer function's zero is at the origin.\n\nThe low-frequency roll-off might be undesirable. The following example demonstrates this issue.\n\nExample\n11.11\n\nFigure 11.17 shows a source follower used in a high-fidelity audio amplifier. Here, Ri sets the gate bias voltage for M1 to VDD, and I1 defines the drain bias current. Assuming λ=0, \\( g_m = \\frac{1}{200 \\Omega} \\), and \\( R_1 = 100 \\text{k} \\Omega \\), determine the minimum required C1 and the maximum acceptable C_L.\n\nimage_name:Figure 11.17\ndescription:\n[\nname: Ri, type: Resistor, value: Ri, ports: {N1: g1, N2: VDD}\nname: Ci, type: Capacitor, value: Ci, ports: {Np: Vin, Nn: g1}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: g1}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:This circuit is a source follower in a high-quality audio amplifier. It includes an NMOS transistor (M1) with gate bias set by Ri and drain bias current defined by I1. The input is Vin, and the output is Vout. Ci manages low-frequency roll-off, and CL is the load capacitance.\n\nFigure 11.17\nSolution Similar to the high-pass filter in Fig. 11.16, the input network of Ri and Ci attenuates low-frequency signals. To ensure minimal attenuation for audio frequencies down to 20 Hz, we set the corner frequency \\( \\frac{1}{R_i C_i} \\) to \\( 2 \\pi \\times 20 \\text{Hz} \\), resulting in:\n\n$$\n\\begin{equation*}\nC_i = 79.6 \\text{nF} \\tag{11.39}\n\\end{equation*}\n$$\n\nThis value is too large for integration on a chip. Since Eq. (11.38) indicates a 3 dB attenuation at \\( \\omega = \\frac{1}{R_i C_i} \\), a larger capacitor is needed for lower attenuation in practice.\n\nThe load capacitance creates a pole at the output node, reducing gain at high frequencies. Setting the pole frequency to the upper audio limit of 20 kHz and recognizing the resistance seen from the output node to ground as \\( \\frac{1}{g_m} \\), we get:\n\n$$\n\\begin{align*}\n\\omega_{p, \\text{out}} & = \\frac{g_m}{C_L} \\tag{11.40}\\\\\n& = 2 \\pi \\times 20 \\text{kHz} \\tag{11.41}\n\\end{align*}\n$$\n\nThus,\n\n$$\n\\begin{equation*}\nC_L = 39.8 \\text{nF} \\tag{11.42}\n\\end{equation*}\n$$\n\nThis source follower can handle a large load capacitance efficiently for the audio band.\n\nExercise Repeat the above example if I1 and the width of M1 are halved.\n\nWhy use Ci in the example? Without Ci, the circuit's gain would not decline at low frequencies, eliminating the need for these calculations. Known as a \"coupling\" capacitor, Ci allows the desired signal frequencies to pass while blocking the DC component of Vin. In other words, Ci isolates the bias conditions of the source follower from the preceding stage. Figure 11.18(a) illustrates this with a CS stage preceding the source follower. The coupling capacitor enables independent biasing at nodes X and Y. For instance, Vy can be set low (keeping M2 near the triode region) to maximize the voltage gain of the CS stage (why?).\n\nimage_name:Figure 11.18(a)\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Y}\nname: Ri, type: Resistor, value: Ri, ports: {N1: VDD, N2: X}\nname: Ci, type: Capacitor, value: Ci, ports: {Np: Y, Nn: X}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: X}\nname: M2, type: NMOS, ports: {S: GND, D: Y, G: Vin}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:This circuit is a cascade of a common-source (CS) stage and a source follower. Ci allows independent biasing of the CS stage and the source follower. RD and Ri set the bias conditions. M1 acts as a source follower, and M2 as a common-source amplifier. I1 provides biasing current to the source follower stage.\n\n(a)\nimage_name:(b)\ndescription:\n[\nname: RD, type: Resistor, ports: {N1: VDD, N2: P}\nname: M2, type: NMOS, ports: {S: GND, D: P, G: Vin}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: P}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:This circuit is a cascade of a common-source (CS) stage and a source follower. Ci allows independent biasing of the CS stage and the source follower. RD and Ri set the bias conditions. M1 acts as a source follower, and M2 as a common-source amplifier. I1 provides biasing current to the source follower stage.\n\n(b)\n\nFigure 11.18 Cascade of CS stage and source follower with (a) capacitor coupling and (b) direct coupling.\n\nTo demonstrate the necessity of capacitive coupling in Fig. 11.18(a), we also consider \"direct coupling\" [Fig. 11.18(b)]. Here, to maximize voltage gain, we set VP just above \\( V_{GS2} - V_{TH2} \\), e.g., 200 mV. However, the gate of M2 must be at least \\( V_{GS1} + V_{I1} \\), where \\( V_{I1} \\) is the minimum voltage for I1. Since \\( V_{GS1} + V_{I1} \\) can reach 600-700 mV, the bias points of the two stages are incompatible, necessitating capacitive coupling.\n\nCapacitive coupling (or \"AC coupling\") is common in discrete circuit design due to the large capacitor values often required (e.g., Ci in the audio example). However, integrated circuits also use capacitive coupling, especially at low supply voltages, if the required capacitor values are only a few picofarads.\n\nFigure 11.19 illustrates a typical frequency response and its terminology. We refer to \\( \\omega_L \\) as the lower corner or cutoff frequency and \\( \\omega_H \\) as the upper corner or cutoff frequency. The band between \\( \\omega_L \\) and \\( \\omega_H \\), chosen to accommodate the signal frequencies of interest, is the \"midband range,\" and the corresponding gain is the \"midband gain.\"\n\nimage_name:Figure 11.19 Typical frequency response.\ndescription:The graph in Figure 11.19 is a typical frequency response plot, often used to illustrate the behavior of electronic filters or amplifiers. It is a Bode plot showing the magnitude of the transfer function, |H|, as a function of angular frequency, ω.\n\n1. **Graph Type and Function:**\n- This is a Bode magnitude plot, a logarithmic graph representing the frequency response of a system.\n\n2. **Axes Labels and Units:**\n- The vertical axis is labeled |H|, indicating the magnitude of the transfer function, typically in decibels (dB), though the unit is not shown.\n- The horizontal axis is labeled ω, representing angular frequency in radians per second.\n- The frequency axis is usually logarithmic, though not explicitly indicated.\n\n3. **Overall Behavior and Trends:**\n- The graph shows a low-frequency rise to a flat midband region, followed by a high-frequency roll-off.\n- The curve starts at the lower corner frequency, \\( \\omega_L \\), where the gain begins to increase.\n- It reaches a flat region called the \"midband range,\" where the gain is constant and labeled \"Midband Gain.\"\n- After the midband, the gain decreases at the higher corner frequency, \\( \\omega_H \\).\n\n4. **Key Features and Technical Details:**\n- The lower cutoff frequency, \\( \\omega_L \\), marks where the gain starts to rise toward the midband.\n- The upper cutoff frequency, \\( \\omega_H \\), marks where the gain begins to decline from the midband.\n- The constant gain in the midband is labeled \"Midband Gain.\"\n- The system's bandwidth is the range between \\( \\omega_L \\) and \\( \\omega_H \\).\n\n5. **Annotations and Specific Data Points:**\n- The graph includes dashed lines at \\( \\omega_L \\) and \\( \\omega_H \\) to indicate the cutoff frequencies.\n- An arrow labeled \"Midband\" indicates the range over which the gain remains constant.\n\nThis graph is typical of a bandpass filter or amplifier, allowing frequencies within a certain range to pass with minimal attenuation while attenuating frequencies outside this range.\n\nFigure 11.19 Typical frequency response."
},
{
    "text": "Our prior study reveals that capacitances within a circuit tend to diminish the voltage gain at high frequencies. It is also plausible that capacitors might reduce the gain at lower frequencies. For instance, consider the high-pass filter depicted in Fig. 11.16(a), where the voltage\nimage_name:(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a simple high-pass filter. The frequency response indicates that the gain rises with frequency, peaking at high frequencies. The cutoff frequency is determined by the time constant R1*C1.\nimage_name:(b)\ndescription:The graph in Fig. 11.16(b) is a Bode plot illustrating the frequency response of a simple high-pass filter.\n\n1. **Graph Type and Function:**\n- The graph is a magnitude Bode plot, depicting the gain of the high-pass filter as a function of frequency.\n\n2. **Axes Labels and Units:**\n- The horizontal axis represents angular frequency (\\(\\omega\\)), typically measured in radians per second.\n- The vertical axis shows the magnitude of the voltage gain \\(\\left|\\frac{V_{\\text{out}}}{V_{\\text{in}}}\\right|\\), which is unitless.\n- Both axes use a linear scale.\n\n3. **General Behavior and Trends:**\n- The plot exhibits an increasing gain with frequency.\n- At low frequencies, the gain is near zero, indicating attenuation of low-frequency signals.\n- As frequency rises, the gain approaches a maximum of 1, indicating minimal attenuation of high-frequency signals.\n\n4. **Key Features and Technical Aspects:**\n- The cutoff frequency, where the gain is \\(\\frac{1}{\\sqrt{2}}\\) of the maximum (approximately 0.707), is indicated by a vertical dashed line at \\(\\frac{1}{R_1 C_1}\\).\n- Beyond this cutoff, the gain asymptotically approaches 1, indicating effective passage of high-frequency signals.\n\n5. **Annotations and Specific Points:**\n- The graph includes a horizontal dashed line at a gain of 1, indicating the maximum gain.\n- The significant point at \\(\\frac{1}{R_1 C_1}\\) is annotated, marking the transition from low to high gain.\n\nFigure 11.16 (a) Simple high-pass filter, and (b) its frequency response.\ndivision between $C_{1}$ and $R_{1}$ yields\n\n$$\n\\begin{align*}\n\\frac{V_{\\text {out }}}{V_{\\text {in }}}(s) & =\\frac{R_{1}}{R_{1}+\\frac{1}{C_{1} s}}  \\tag{11.36}\\\\\n& =\\frac{R_{1} C_{1} s}{R_{1} C_{1} s+1} \\tag{11.37}\n\\end{align*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text {out }}}{V_{\\text {in }}}\\right|=\\frac{R_{1} C_{1} \\omega}{\\sqrt{R_{1}^{2} C_{1}^{2} \\omega_{1}^{2}+1}} \\tag{11.38}\n\\end{equation*}\n$$\n\nAs shown in Fig. 11.16(b), the response displays a roll-off when the operating frequency drops below $1 /\\left(R_{1} C_{1}\\right)$. This roll-off, as seen from Eq. (11.37), results from the zero of the transfer function being at the origin.\n\nThe low-frequency roll-off may be undesirable. The following example highlights this issue.\n\nExample\n11.11\n\nFigure 11.17 illustrates a source follower used in a high-fidelity audio amplifier. Here, $R_{i}$ sets the gate bias voltage for $M_{1}$ to $V_{D D}$, and $I_{1}$ defines the drain bias current. Assuming $\\lambda=0, g_{m}=1 /(200 \\Omega)$, and $R_{1}=100 \\mathrm{k} \\Omega$, determine the minimum required value of $C_{1}$ and the maximum acceptable value of $C_{L}$.\nimage_name:Figure 11.17\ndescription:\n[\nname: Ri, type: Resistor, value: Ri, ports: {N1: g1, N2: VDD}\nname: Ci, type: Capacitor, value: Ci, ports: {Np: Vin, Nn: g1}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: g1}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a source follower configuration used in a high-fidelity audio amplifier. It includes an NMOS transistor (M1) with gate bias set by Ri and a drain bias current defined by I1. The input is Vin, and the output is Vout. The low-frequency roll-off is managed by Ci, and the load capacitance is CL.\n\nFigure 11.17\nSolution Similar to the high-pass filter in Fig. 11.16, the input network of $R_{i}$ and $C_{i}$ attenuates signals at low frequencies. To ensure minimal attenuation for audio components as low as 20 Hz, we set the corner frequency $1 /\\left(R_{i} C_{i}\\right)$ to $2 \\pi \\times(20 \\mathrm{~Hz})$, resulting in\n\n$$\n\\begin{equation*}\nC_{i}=79.6 \\mathrm{nF} \\tag{11.39}\n\\end{equation*}\n$$\n\nThis value is excessively large for integration on a chip. Since Eq. (11.38) indicates a 3 dB attenuation at $\\omega=1 /\\left(R_{i} C_{i}\\right)$, in practice, a larger capacitor may be needed for lower attenuation.\n\nThe load capacitance introduces a pole at the output node, reducing the gain at high frequencies. Setting the pole frequency to the upper limit of the audio range, 20 kHz, and recognizing that the resistance seen from the output node to ground is $1 / g_{m}$, we have\n\n$$\n\\begin{align*}\n\\omega_{p, \\text { out }} & =\\frac{g_{m}}{C_{L}}  \\tag{11.40}\\\\\n& =2 \\pi \\times(20 \\mathrm{kHz}) \\tag{11.41}\n\\end{align*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\nC_{L}=39.8 \\mathrm{nF} \\tag{11.42}\n\\end{equation*}\n$$\n\nThe source follower, being an efficient driver, can tolerate a substantial load capacitance for the audio band.\n\nExercise $\\quad$ Repeat the above example if $I_{1}$ and the width of $M_{1}$ are halved.\n\nWhy was capacitor $C_{i}$ used in the example? Without $C_{i}$, the circuit's gain would not decline at low frequencies, eliminating the need for the aforementioned calculations. Known as a \"coupling\" capacitor, $C_{i}$ allows the desired signal frequencies to pass while blocking the dc component of $V_{i n}$. In other words, $C_{i}$ isolates the bias conditions of the source follower from those of the preceding stage. Figure 11.18(a) exemplifies this with a CS stage preceding the source follower. The coupling capacitor enables independent bias voltages at nodes $X$ and $Y$. For instance, $V_{Y}$ can be set relatively low (placing $M_{2}$ near the triode region) to maximize the voltage gain of the CS stage (why?).\nimage_name:Figure 11.18(a)\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Y}\nname: Ri, type: Resistor, value: Ri, ports: {N1: VDD, N2: X}\nname: Ci, type: Capacitor, value: Ci, ports: {Np: Y, Nn: X}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: X}\nname: M2, type: NMOS, ports: {S: GND, D: Y, G: Vin}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a cascade of a common-source (CS) stage and a source follower. The coupling capacitor Ci allows independent biasing of the CS stage and the source follower. RD and Ri are used to set the bias conditions. M1 acts as a source follower, and M2 as a common-source amplifier. I1 is a current source providing biasing current to the source follower stage.\n\n(a)\nimage_name:(b)\ndescription:\n[\nname: RD, type: Resistor, ports: {N1: VDD, N2: P}\nname: M2, type: NMOS, ports: {S: GND, D: P, G: Vin}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: P}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a cascade of a common-source (CS) stage and a source follower. The coupling capacitor Ci allows independent biasing of the CS stage and the source follower. RD and Ri are used to set the bias conditions. M1 acts as a source follower, and M2 as a common-source amplifier. I1 is a current source providing biasing current to the source follower stage.\n\n(b)\n\nFigure 11.18 Cascade of CS stage and source follower with (a) capacitor coupling and (b) direct coupling.\n\nTo demonstrate the necessity of capacitive coupling in Fig. 11.18(a), we also consider the \"direct coupling\" scenario [Fig. 11.18(b)]. Here, to maximize voltage gain, we aim to set $V_{P}$ just above $V_{G S 2}-V_{T H 2}$, e.g., 200 mV. However, the gate of $M_{2}$ must be at least $V_{G S 1}+V_{I 1}$, where $V_{I 1}$ is the minimum voltage required by $I_{1}$. Since $V_{G S 1}+V_{I 1}$ could be $600-700 \\mathrm{mV}$, the two stages are incompatible in terms of bias points, necessitating capacitive coupling.\n\nCapacitive coupling (or \"ac coupling\") is more prevalent in discrete circuit design due to the large capacitor values often required (e.g., $C_{i}$ in the audio example). Nevertheless, many integrated circuits also employ capacitive coupling, especially at low supply voltages, if the required capacitor values are only a few picofarads.\n\nFigure 11.19 depicts a typical frequency response and the associated terminology. We denote $\\omega_{L}$ as the lower corner or lower \"cut-off\" frequency and $\\omega_{H}$ as the upper corner or upper cut-off frequency. The band between $\\omega_{L}$ and $\\omega_{H}$, chosen to accommodate the signal frequencies of interest, is termed the \"midband range,\" and the corresponding gain is the \"midband gain.\"\nimage_name:Figure 11.19 Typical frequency response.\ndescription:The graph in Figure 11.19 is a typical frequency response plot, commonly used to illustrate the behavior of electronic filters or amplifiers. It is a Bode plot showing the magnitude of the transfer function, |H|, as a function of angular frequency, ω.\n\n1. **Graph Type and Function:**\n- This is a Bode magnitude plot, a logarithmic graph representing the frequency response of a system.\n\n2. **Axes Labels and Units:**\n- The vertical axis is labeled |H|, indicating the magnitude of the transfer function, typically in decibels (dB), though the specific unit is not shown.\n- The horizontal axis is labeled ω, representing the angular frequency in radians per second.\n- The frequency axis is usually logarithmic, though this is not explicitly indicated in the diagram.\n\n3. **General Behavior and Trends:**\n- The graph shows a low-frequency rise to a flat midband region, followed by a high-frequency roll-off.\n- The curve starts at a lower corner frequency, ω_L, where the gain begins to increase.\n- It reaches a flat region called the \"midband range,\" where the gain is constant and labeled as \"Midband Gain.\"\n- Beyond the midband, the gain decreases at a higher corner frequency, ω_H.\n\n4. **Key Features and Technical Details:**\n- The lower cutoff frequency, ω_L, marks the point where the gain starts to rise towards the midband.\n- The upper cutoff frequency, ω_H, marks the point where the gain begins to decline from the midband.\n- The constant gain level in the midband is termed \"Midband Gain.\"\n- The bandwidth of the system is the range between ω_L and ω_H.\n\n5. **Annotations and Specific Data Points:**\n- The graph includes dashed lines at ω_L and ω_H to indicate the cutoff frequencies.\n- An arrow labeled \"Midband\" indicates the range over which the gain remains constant.\n\nThis graph is typical of a bandpass filter or amplifier, where the system allows frequencies within a specific range to pass with minimal attenuation while attenuating frequencies outside this range.\n\nFigure 11.19 Typical frequency response."
},
{
    "text": "Our prior research indicates that circuit capacitances tend to decrease voltage gain at high frequencies. It is also possible that capacitors reduce gain at low frequencies. As a straightforward example, consider the high-pass filter depicted in Fig. 11.16(a), where the voltage\nimage_name:(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a simple high-pass filter. The frequency response indicates that gain increases with frequency, peaking at high frequencies. The cutoff frequency is determined by the time constant R1*C1.\nimage_name:(b)\ndescription:The graph in Fig. 11.16(b) is a Bode plot depicting the frequency response of a simple high-pass filter.\n\n1. **Graph Type and Function:**\n- The graph is a magnitude Bode plot, illustrating the gain of the high-pass filter as a function of frequency.\n\n2. **Axes Labels and Units:**\n- The horizontal axis represents angular frequency (\\(\\omega\\)), typically in radians per second.\n- The vertical axis represents the magnitude of the voltage gain \\(\\left|\\frac{V_{\\text{out}}}{V_{\\text{in}}}\\right|\\), which is unitless.\n- Both axes use a linear scale.\n\n3. **Overall Behavior and Trends:**\n- The plot shows an increasing gain trend with frequency.\n- At low frequencies, the gain is near zero, indicating attenuation of low-frequency signals.\n- As frequency rises, the gain approaches a maximum of 1, indicating minimal attenuation of high-frequency signals.\n\n4. **Key Features and Technical Details:**\n- The cutoff frequency, where the gain is \\(\\frac{1}{\\sqrt{2}}\\) of the maximum (about 0.707), is marked by a vertical dashed line at \\(\\frac{1}{R_1 C_1}\\).\n- Beyond this cutoff, the gain asymptotically approaches 1, indicating effective passage of high-frequency signals.\n\n5. **Annotations and Specific Data Points:**\n- The graph includes a horizontal dashed line at a gain of 1, indicating the maximum gain.\n- The significant point at \\(\\frac{1}{R_1 C_1}\\) is annotated, marking the transition from low to high gain.\n\nFigure 11.16 (a) Simple high-pass filter, and (b) its frequency response.\nvoltage division between $C_{1}$ and $R_{1}$ results in\n\n$$\n\\begin{align*}\n\\frac{V_{\\text {out }}}{V_{\\text {in }}}(s) & =\\frac{R_{1}}{R_{1}+\\frac{1}{C_{1} s}}  \\tag{11.36}\\\\\n& =\\frac{R_{1} C_{1} s}{R_{1} C_{1} s+1} \\tag{11.37}\n\\end{align*}\n$$\n\nand thus\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text {out }}}{V_{\\text {in }}}\\right|=\\frac{R_{1} C_{1} \\omega}{\\sqrt{R_{1}^{2} C_{1}^{2} \\omega^{2}+1}} \\tag{11.38}\n\\end{equation*}\n$$\n\nAs shown in Fig. 11.16(b), the response exhibits a roll-off as the operating frequency drops below $1 /\\left(R_{1} C_{1}\\right)$. This roll-off, as seen from Eq. (11.37), arises due to the zero of the transfer function occurring at the origin.\n\nThe low-frequency roll-off may be undesirable. The following example illustrates this point.\n\nExample\n11.11\n\nFigure 11.17 shows a source follower used in a high-quality audio amplifier. Here, $R_{i}$ sets a gate bias voltage equal to $V_{D D}$ for $M_{1}$, and $I_{1}$ defines the drain bias current. Assume $\\lambda=0, g_{m}=1 /(200 \\Omega)$, and $R_{1}=100 \\mathrm{k} \\Omega$. Determine the minimum required value of $C_{1}$ and the maximum acceptable value of $C_{L}$.\nimage_name:Figure 11.17\ndescription:\n[\nname: Ri, type: Resistor, value: Ri, ports: {N1: g1, N2: VDD}\nname: Ci, type: Capacitor, value: Ci, ports: {Np: Vin, Nn: g1}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: g1}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a source follower configuration used in a high-quality audio amplifier. It includes an NMOS transistor (M1) with gate bias set by Ri and a drain bias current defined by I1. The input is Vin, and the output is Vout. The low-frequency roll-off is managed by Ci, and the load capacitance is CL.\n\nFigure 11.17\nSolution Similar to the high-pass filter in Fig. 11.16, the input network of $R_{i}$ and $C_{i}$ attenuates signals at low frequencies. To ensure minimal attenuation of audio components down to 20 Hz, we set the corner frequency $1 /\\left(R_{i} C_{i}\\right)$ to $2 \\pi \\times(20 \\mathrm{~Hz})$, yielding\n\n$$\n\\begin{equation*}\nC_{i}=79.6 \\mathrm{nF} \\tag{11.39}\n\\end{equation*}\n$$\n\nThis value is too large for integration on a chip. Since Eq. (11.38) indicates a 3 dB attenuation at $\\omega=1 /\\left(R_{i} C_{i}\\right)$, in practice, a larger capacitor may be needed for lower attenuation.\n\nThe load capacitance creates a pole at the output node, reducing gain at high frequencies. Setting the pole frequency to the upper limit of the audio range, 20 kHz, and recognizing that the resistance seen from the output node to ground equals $1 / g_{m}$, we have\n\n$$\n\\begin{align*}\n\\omega_{p, \\text { out }} & =\\frac{g_{m}}{C_{L}}  \\tag{11.40}\\\\\n& =2 \\pi \\times(20 \\mathrm{kHz}) \\tag{11.41}\n\\end{align*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\nC_{L}=39.8 \\mathrm{nF} \\tag{11.42}\n\\end{equation*}\n$$\n\nThe source follower, being an efficient driver, can tolerate a large load capacitance for the audio band.\n\nExercise $\\quad$ Repeat the above example if $I_{1}$ and the width of $M_{1}$ are halved.\n\nWhy use capacitor $C_{i}$ in the example? Without $C_{i}$, the circuit's gain would not drop at low frequencies, eliminating the need for the above calculations. Known as a \"coupling\" capacitor, $C_{i}$ allows the desired signal frequencies to pass while blocking the dc component of $V_{i n}$. In other words, $C_{i}$ isolates the bias conditions of the source follower from those of the preceding stage. Figure 11.18(a) illustrates this with a CS stage preceding the source follower. The coupling capacitor enables independent bias voltages at nodes $X$ and $Y$. For instance, $V_{Y}$ can be set relatively low (placing $M_{2}$ near the triode region) to maximize the voltage gain of the CS stage (why?).\nimage_name:Figure 11.18(a)\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Y}\nname: Ri, type: Resistor, value: Ri, ports: {N1: VDD, N2: X}\nname: Ci, type: Capacitor, value: Ci, ports: {Np: Y, Nn: X}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: X}\nname: M2, type: NMOS, ports: {S: GND, D: Y, G: Vin}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a cascade of a common-source (CS) stage and a source follower. The coupling capacitor Ci allows independent biasing of the CS stage and the source follower. RD and Ri are used to set the bias conditions. M1 acts as a source follower, and M2 as a common-source amplifier. I1 is a current source providing biasing current to the source follower stage.\n\n(a)\nimage_name:(b)\ndescription:\n[\nname: RD, type: Resistor, ports: {N1: VDD, N2: P}\nname: M2, type: NMOS, ports: {S: GND, D: P, G: Vin}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: P}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a cascade of a common-source (CS) stage and a source follower. The coupling capacitor Ci allows independent biasing of the CS stage and the source follower. RD and Ri are used to set the bias conditions. M1 acts as a source follower, and M2 as a common-source amplifier. I1 is a current source providing biasing current to the source follower stage.\n\n(b)\n\nFigure 11.18 Cascade of CS stage and source follower with (a) capacitor coupling and (b) direct coupling.\n\nTo demonstrate the necessity of capacitive coupling in Fig. 11.18(a), we also consider the case of \"direct coupling\" [Fig. 11.18(b)]. Here, to maximize voltage gain, we aim to set $V_{P}$ just above $V_{G S 2}-V_{T H 2}$, e.g., 200 mV. However, the gate of $M_{2}$ must be at least $V_{G S 1}+V_{I 1}$, where $V_{I 1}$ is the minimum voltage required by $I_{1}$. Since $V_{G S 1}+V_{I 1}$ might be $600-700 \\mathrm{mV}$, the two stages have incompatible bias points, necessitating capacitive coupling.\n\nCapacitive coupling, or \"ac coupling,\" is more prevalent in discrete circuit design due to the large capacitor values often required (e.g., $C_{i}$ in the audio example). Nevertheless, many integrated circuits also use capacitive coupling, especially at low supply voltages, if the required capacitor values are only a few picofarads.\n\nFigure 11.19 illustrates a typical frequency response and the associated terminology. We denote $\\omega_{L}$ as the lower corner or lower \"cut-off\" frequency and $\\omega_{H}$ as the upper corner or upper cut-off frequency. The band between $\\omega_{L}$ and $\\omega_{H}$, chosen to accommodate the signal frequencies of interest, is termed the \"midband range,\" and the corresponding gain is the \"midband gain.\"\nimage_name:Figure 11.19 Typical frequency response.\ndescription:The graph in Figure 11.19 is a typical frequency response plot, often used to illustrate the behavior of electronic filters or amplifiers. It is a Bode plot showing the magnitude of the transfer function, |H|, as a function of angular frequency, ω.\n\n1. **Graph Type and Function:**\n- This is a Bode magnitude plot, a logarithmic graph representing the frequency response of a system.\n\n2. **Axes Labels and Units:**\n- The vertical axis is labeled |H|, indicating the magnitude of the transfer function, typically in decibels (dB), though the specific unit is not shown.\n- The horizontal axis is labeled ω, representing the angular frequency in radians per second.\n- The frequency axis is usually logarithmic, though this is not explicitly indicated in the diagram.\n\n3. **Overall Behavior and Trends:**\n- The graph shows a low-frequency rise to a flat midband region, followed by a high-frequency roll-off.\n- The curve starts at a lower corner frequency, ω_L, where the gain begins to increase.\n- It reaches a flat region called the \"midband range,\" where the gain is constant and labeled as \"Midband Gain.\"\n- Beyond the midband, the gain decreases at a higher corner frequency, ω_H.\n\n4. **Key Features and Technical Details:**\n- The lower cutoff frequency, ω_L, marks the point where the gain starts to rise towards the midband.\n- The upper cutoff frequency, ω_H, marks the point where the gain begins to decline from the midband.\n- The constant gain level in the midband is termed \"Midband Gain.\"\n- The bandwidth of the system is the range between ω_L and ω_H.\n\n5. **Annotations and Specific Data Points:**\n- The graph includes dashed lines at ω_L and ω_H to indicate the cutoff frequencies.\n- An arrow labeled \"Midband\" indicates the range over which the gain remains constant.\n\nThis graph is typical of a bandpass filter or amplifier, where the system allows frequencies within a certain range to pass with minimal attenuation while attenuating frequencies outside this range.\n\nFigure 11.19 Typical frequency response."
},
{
    "text": "Our previous research suggests that circuit capacitances tend to decrease voltage gain at high frequencies. It is also plausible that capacitors diminish gain at low frequencies. For instance, consider the high-pass filter illustrated in Fig. 11.16(a), where the voltage\nimage_name:(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a basic high-pass filter. Its frequency response indicates that gain rises with frequency, peaking at high frequencies. The cutoff frequency is governed by the time constant R1*C1.\nimage_name:(b)\ndescription:The graph in Fig. 11.16(b) is a Bode plot depicting the frequency response of a basic high-pass filter.\n\n1. **Graph Type and Function:**\n- The graph is a magnitude Bode plot, illustrating the high-pass filter's gain as a function of frequency.\n\n2. **Axes Labels and Units:**\n- The horizontal axis denotes angular frequency (ω), typically measured in radians per second.\n- The vertical axis represents the magnitude of the voltage gain \\(\\left|\\frac{V_{\\text{out}}}{V_{\\text{in}}}\\right|\\), which is unitless.\n- Both axes use a linear scale.\n\n3. **General Behavior and Trends:**\n- The plot displays an upward trend in gain with increasing frequency.\n- At low frequencies, the gain is near zero, indicating signal attenuation.\n- As frequency rises, the gain approaches a maximum of 1, suggesting minimal attenuation of high-frequency signals.\n\n4. **Key Features and Technical Aspects:**\n- The cutoff frequency, where the gain is \\(\\frac{1}{\\sqrt{2}}\\) of the maximum (about 0.707), is indicated by a vertical dashed line at \\(\\frac{1}{R_1 C_1}\\).\n- Beyond this cutoff, the gain asymptotically reaches 1, indicating effective passage of high-frequency signals.\n\n5. **Annotations and Specific Points:**\n- A horizontal dashed line at a gain of 1 marks the maximum gain.\n- The significant point at \\(\\frac{1}{R_1 C_1}\\) is annotated, signifying the transition from low to high gain.\n\nFigure 11.16 (a) Basic high-pass filter, and (b) its frequency response.\nvoltage division between $C_{1}$ and $R_{1}$ results in\n\n$$\n\\begin{align*}\n\\frac{V_{\\text {out }}}{V_{\\text {in }}}(s) & =\\frac{R_{1}}{R_{1}+\\frac{1}{C_{1} s}}  \\tag{11.36}\\\\\n& =\\frac{R_{1} C_{1} s}{R_{1} C_{1} s+1} \\tag{11.37}\n\\end{align*}\n$$\n\nand thus\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text {out }}}{V_{\\text {in }}}\\right|=\\frac{R_{1} C_{1} \\omega}{\\sqrt{R_{1}^{2} C_{1}^{2} \\omega^{2}+1}} \\tag{11.38}\n\\end{equation*}\n$$\n\nAs depicted in Fig. 11.16(b), the response shows a roll-off when the operating frequency drops below $1 /\\left(R_{1} C_{1}\\right)$. This roll-off, as seen from Eq. (11.37), occurs because the transfer function's zero is at the origin.\n\nThe low-frequency roll-off might be undesirable. The following example demonstrates this point.\n\nExample\n11.11\n\nFigure 11.17 shows a source follower used in a high-fidelity audio amplifier. Here, $R_{i}$ sets a gate bias voltage equal to $V_{D D}$ for $M_{1}$, and $I_{1}$ defines the drain bias current. Assume $\\lambda=0, g_{m}=1 /(200 \\Omega)$, and $R_{1}=100 \\mathrm{k} \\Omega$. Determine the minimum required value of $C_{1}$ and the maximum acceptable value of $C_{L}$.\nimage_name:Figure 11.17\ndescription:\n[\nname: Ri, type: Resistor, value: Ri, ports: {N1: g1, N2: VDD}\nname: Ci, type: Capacitor, value: Ci, ports: {Np: Vin, Nn: g1}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: g1}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a source follower configuration in a high-fidelity audio amplifier. It includes an NMOS transistor (M1) with gate bias set by Ri and drain bias current defined by I1. The input is Vin, and the output is Vout. Low-frequency roll-off is managed by Ci, and the load capacitance is CL.\n\nFigure 11.17\nSolution Similar to the high-pass filter in Fig. 11.16, the input network of $R_{i}$ and $C_{i}$ attenuates low-frequency signals. To ensure minimal attenuation for audio components down to 20 Hz, we set the corner frequency $1 /\\left(R_{i} C_{i}\\right)$ to $2 \\pi \\times(20 \\mathrm{~Hz})$, yielding\n\n$$\n\\begin{equation*}\nC_{i}=79.6 \\mathrm{nF} \\tag{11.39}\n\\end{equation*}\n$$\n\nThis value is excessively large for on-chip integration. Since Eq. (11.38) indicates a 3 dB attenuation at $\\omega=1 /\\left(R_{i} C_{i}\\right)$, in practice, a larger capacitor may be needed for lower attenuation.\n\nThe load capacitance introduces a pole at the output node, reducing gain at high frequencies. Setting the pole frequency to the upper limit of the audio range, 20 kHz, and noting that the resistance seen from the output node to ground is $1 / g_{m}$, we have\n\n$$\n\\begin{align*}\n\\omega_{p, \\text { out }} & =\\frac{g_{m}}{C_{L}}  \\tag{11.40}\\\\\n& =2 \\pi \\times(20 \\mathrm{kHz}) \\tag{11.41}\n\\end{align*}\n$$\n\nresulting in\n\n$$\n\\begin{equation*}\nC_{L}=39.8 \\mathrm{nF} \\tag{11.42}\n\\end{equation*}\n$$\n\nThe source follower, being an efficient driver, can handle a substantial load capacitance (for the audio band).\n\nExercise $\\quad$ Repeat the above example if $I_{1}$ and the width of $M_{1}$ are halved.\n\nWhy was capacitor $C_{i}$ used in the example? Without $C_{i}$, the circuit's gain would not drop at low frequencies, eliminating the need for the above calculations. Known as a \"coupling\" capacitor, $C_{i}$ allows the desired signal frequencies to pass while blocking the dc component of $V_{i n}$. In other words, $C_{i}$ isolates the bias conditions of the source follower from those of the preceding stage. Figure 11.18(a) exemplifies this with a CS stage preceding the source follower. The coupling capacitor enables independent bias voltages at nodes $X$ and $Y$. For instance, $V_{Y}$ can be set relatively low (keeping $M_{2}$ near the triode region) to maximize the voltage gain of the CS stage (why?).\nimage_name:Figure 11.18(a)\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Y}\nname: Ri, type: Resistor, value: Ri, ports: {N1: VDD, N2: X}\nname: Ci, type: Capacitor, value: Ci, ports: {Np: Y, Nn: X}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: X}\nname: M2, type: NMOS, ports: {S: GND, D: Y, G: Vin}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a cascade of a common-source (CS) stage and a source follower. The coupling capacitor Ci allows independent biasing of the CS stage and the source follower. RD and Ri set the bias conditions. M1 acts as a source follower, and M2 as a common-source amplifier. I1 provides biasing current to the source follower stage.\n\n(a)\nimage_name:(b)\ndescription:\n[\nname: RD, type: Resistor, ports: {N1: VDD, N2: P}\nname: M2, type: NMOS, ports: {S: GND, D: P, G: Vin}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: P}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a cascade of a common-source (CS) stage and a source follower. The coupling capacitor Ci allows independent biasing of the CS stage and the source follower. RD and Ri set the bias conditions. M1 acts as a source follower, and M2 as a common-source amplifier. I1 provides biasing current to the source follower stage.\n\n(b)\n\nFigure 11.18 Cascade of CS stage and source follower with (a) capacitor coupling and (b) direct coupling.\n\nTo illustrate the necessity of capacitive coupling in Fig. 11.18(a), we also consider the \"direct coupling\" scenario [Fig. 11.18(b)]. Here, to maximize voltage gain, we aim to set $V_{P}$ just above $V_{G S 2}-V_{T H 2}$, e.g., 200 mV. Conversely, the gate of $M_{2}$ must be at least $V_{G S 1}+V_{I 1}$, where $V_{I 1}$ is the minimum voltage required by $I_{1}$. Since $V_{G S 1}+V_{I 1}$ could be $600-700 \\mathrm{mV}$, the bias points of the two stages are incompatible, necessitating capacitive coupling.\n\nCapacitive coupling, or \"ac coupling,\" is more prevalent in discrete circuit design due to the large capacitor values often required (e.g., $C_{i}$ in the audio example). However, many integrated circuits also use capacitive coupling, especially at low supply voltages, if the required capacitor values are only a few picofarads.\n\nFigure 11.19 depicts a typical frequency response and the associated terminology. We refer to $\\omega_{L}$ as the lower corner or lower \"cut-off\" frequency and $\\omega_{H}$ as the upper corner or upper cut-off frequency. The band between $\\omega_{L}$ and $\\omega_{H}$, chosen to accommodate the signal frequencies of interest, is termed the \"midband range,\" and the corresponding gain is the \"midband gain.\"\nimage_name:Figure 11.19 Typical frequency response.\ndescription:The graph in Figure 11.19 is a typical frequency response plot, often used to illustrate the behavior of electronic filters or amplifiers. It is a Bode plot showing the magnitude of the transfer function, |H|, as a function of angular frequency, ω.\n\n1. **Graph Type and Function:**\n- This is a Bode magnitude plot, a logarithmic graph representing the frequency response of a system.\n\n2. **Axes Labels and Units:**\n- The vertical axis is labeled |H|, indicating the magnitude of the transfer function, typically in decibels (dB), though the specific unit is not shown.\n- The horizontal axis is labeled ω, representing angular frequency in radians per second.\n- The frequency axis is usually logarithmic, though this is not explicitly indicated in the diagram.\n\n3. **Overall Behavior and Trends:**\n- The graph shows a low-frequency rise to a flat midband region, followed by a high-frequency roll-off.\n- The curve starts at a lower corner frequency, ω_L, where the gain begins to increase.\n- It reaches a flat region called the \"midband range,\" where the gain is constant and labeled as \"Midband Gain.\"\n- The gain decreases at a higher corner frequency, ω_H.\n\n4. **Key Features and Technical Details:**\n- The lower cutoff frequency, ω_L, marks the point where the gain starts to rise toward the midband.\n- The upper cutoff frequency, ω_H, indicates where the gain begins to decline from the midband.\n- The constant gain level in the midband is termed \"Midband Gain.\"\n- The bandwidth of the system is the range between ω_L and ω_H.\n\n5. **Annotations and Specific Data Points:**\n- Dashed lines at ω_L and ω_H indicate the cutoff frequencies.\n- An arrow labeled \"Midband\" marks the range over which the gain remains constant.\n\nThis graph is typical of a bandpass filter or amplifier, where the system allows frequencies within a certain range to pass with minimal attenuation while attenuating frequencies outside this range.\n\nFigure 11.19 Typical frequency response."
},
{
    "text": "Our prior analysis reveals that circuit capacitances generally decrease the voltage gain at elevated frequencies. It is conceivable that capacitors also diminish the gain at lower frequencies. To illustrate, consider the high-pass filter depicted in Fig. 11.16(a), where the voltage\nimage_name:(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a simple high-pass filter. The frequency response demonstrates that the gain rises with increasing frequency, peaking at high frequencies. The cutoff frequency is governed by the time constant R1*C1.\nimage_name:(b)\ndescription:The graph in Fig. 11.16(b) is a Bode plot depicting the frequency response of a basic high-pass filter.\n\n1. **Graph Type and Function:**\n- The graph is a magnitude Bode plot, illustrating the gain of the high-pass filter as a function of frequency.\n\n2. **Axes Labels and Units:**\n- The horizontal axis denotes angular frequency (\\(\\omega\\)), commonly measured in radians per second.\n- The vertical axis represents the magnitude of the voltage gain \\(\\left|\\frac{V_{\\text{out}}}{V_{\\text{in}}}\\right|\\), which is dimensionless.\n- Both axes utilize a linear scale.\n\n3. **General Behavior and Trends:**\n- The plot displays an upward trend in gain with increasing frequency.\n- At low frequencies, the gain approaches zero, indicating signal attenuation by the filter.\n- As frequency rises, the gain nears a maximum of 1, signifying minimal attenuation of high-frequency signals.\n\n4. **Key Characteristics and Technical Aspects:**\n- The cutoff frequency, where the gain is \\(\\frac{1}{\\sqrt{2}}\\) of the maximum (around 0.707), is indicated by a vertical dashed line at \\(\\frac{1}{R_1 C_1}\\).\n- Beyond this cutoff, the gain asymptotically approaches 1, indicating effective passage of high-frequency signals.\n\n5. **Annotations and Specific Data Points:**\n- The graph features a horizontal dashed line at a gain of 1, representing the maximum gain.\n- The significant point at \\(\\frac{1}{R_1 C_1}\\) is marked, signifying the transition from low to high gain.\n\nFigure 11.16 (a) Basic high-pass filter, and (b) its frequency response.\nvoltage division between $C_{1}$ and $R_{1}$ results in\n\n$$\n\\begin{align*}\n\\frac{V_{\\text {out }}}{V_{\\text {in }}}(s) & =\\frac{R_{1}}{R_{1}+\\frac{1}{C_{1} s}}  \\tag{11.36}\\\\\n& =\\frac{R_{1} C_{1} s}{R_{1} C_{1} s+1} \\tag{11.37}\n\\end{align*}\n$$\n\nand thus\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text {out }}}{V_{\\text {in }}}\\right|=\\frac{R_{1} C_{1} \\omega}{\\sqrt{R_{1}^{2} C_{1}^{2} \\omega_{1}^{2}+1}} \\tag{11.38}\n\\end{equation*}\n$$\n\nAs shown in Fig. 11.16(b), the response exhibits a roll-off when the operating frequency drops below $1 /\\left(R_{1} C_{1}\\right)$. This roll-off, as seen from Eq. (11.37), is due to the zero of the transfer function being at the origin.\n\nThe low-frequency roll-off might be undesirable. The following example highlights this issue.\n\nExample\n11.11\n\nFig. 11.17 illustrates a source follower used in a high-fidelity audio amplifier. Here, $R_{i}$ sets a gate bias voltage equal to $V_{D D}$ for $M_{1}$, and $I_{1}$ determines the drain bias current. Assuming $\\lambda=0, g_{m}=1 /(200 \\Omega)$, and $R_{1}=100 \\mathrm{k} \\Omega$, calculate the minimum necessary value of $C_{1}$ and the maximum acceptable value of $C_{L}$.\nimage_name:Figure 11.17\ndescription:\n[\nname: Ri, type: Resistor, value: Ri, ports: {N1: g1, N2: VDD}\nname: Ci, type: Capacitor, value: Ci, ports: {Np: Vin, Nn: g1}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: g1}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a source follower configuration in a high-fidelity audio amplifier. It includes an NMOS transistor (M1) with gate bias set by Ri and drain bias current defined by I1. The input is Vin, and the output is Vout. Ci manages the low-frequency roll-off, and CL is the load capacitance.\n\nFigure 11.17\nSolution Similar to the high-pass filter in Fig. 11.16, the input network comprising $R_{i}$ and $C_{i}$ attenuates low-frequency signals. To ensure minimal attenuation of audio components down to 20 Hz, we set the corner frequency $1 /\\left(R_{i} C_{i}\\right)$ to $2 \\pi \\times(20 \\mathrm{~Hz})$, resulting in\n\n$$\n\\begin{equation*}\nC_{i}=79.6 \\mathrm{nF} \\tag{11.39}\n\\end{equation*}\n$$\n\nThis value is excessively large for integration on a chip. Since Eq. (11.38) indicates a 3 dB attenuation at $\\omega=1 /\\left(R_{i} C_{i}\\right)$, in practice, a larger capacitor may be needed for lower attenuation.\n\nThe load capacitance introduces a pole at the output node, reducing the gain at high frequencies. Setting the pole frequency to the upper limit of the audio range, 20 kHz, and recognizing that the resistance seen from the output node to ground is $1 / g_{m}$, we get\n\n$$\n\\begin{align*}\n\\omega_{p, \\text { out }} & =\\frac{g_{m}}{C_{L}}  \\tag{11.40}\\\\\n& =2 \\pi \\times(20 \\mathrm{kHz}) \\tag{11.41}\n\\end{align*}\n$$\n\nyielding\n\n$$\n\\begin{equation*}\nC_{L}=39.8 \\mathrm{nF} \\tag{11.42}\n\\end{equation*}\n$$\n\nThe source follower, being an efficient driver, can handle a substantial load capacitance for the audio band.\n\nExercise $\\quad$ Redo the above example if $I_{1}$ and the width of $M_{1}$ are both halved.\n\nWhy was capacitor $C_{i}$ used in the example? Without $C_{i}$, the circuit's gain would not decrease at low frequencies, eliminating the need for the above calculations. Known as a \"coupling\" capacitor, $C_{i}$ allows the desired signal frequencies to pass while blocking the dc component of $V_{i n}$. In other words, $C_{i}$ isolates the bias conditions of the source follower from those of the preceding stage. Fig. 11.18(a) shows an example where a CS stage precedes the source follower. The coupling capacitor enables independent bias voltages at nodes $X$ and $Y$. For instance, $V_{Y}$ can be set relatively low (placing $M_{2}$ near the triode region) to maximize the voltage drop across $R_{D}$, thereby enhancing the voltage gain of the CS stage (why?).\nimage_name:Figure 11.18(a)\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Y}\nname: Ri, type: Resistor, value: Ri, ports: {N1: VDD, N2: X}\nname: Ci, type: Capacitor, value: Ci, ports: {Np: Y, Nn: X}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: X}\nname: M2, type: NMOS, ports: {S: GND, D: Y, G: Vin}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a cascade of a common-source (CS) stage and a source follower. The coupling capacitor Ci allows independent biasing of the CS stage and the source follower. RD and Ri set the bias conditions. M1 acts as a source follower, and M2 as a common-source amplifier. I1 provides biasing current to the source follower stage.\n\n(a)\nimage_name:(b)\ndescription:\n[\nname: RD, type: Resistor, ports: {N1: VDD, N2: P}\nname: M2, type: NMOS, ports: {S: GND, D: P, G: Vin}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: P}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a cascade of a common-source (CS) stage and a source follower. The coupling capacitor Ci allows independent biasing of the CS stage and the source follower. RD and Ri set the bias conditions. M1 acts as a source follower, and M2 as a common-source amplifier. I1 provides biasing current to the source follower stage.\n\n(b)\n\nFigure 11.18 Cascade of CS stage and source follower with (a) capacitor coupling and (b) direct coupling.\n\nTo demonstrate the necessity of capacitive coupling in Fig. 11.18(a), we also consider the case of \"direct coupling\" [Fig. 11.18(b)]. Here, to maximize voltage gain, we aim to set $V_{P}$ just above $V_{G S 2}-V_{T H 2}$, e.g., 200 mV. However, the gate of $M_{2}$ must be at least $V_{G S 1}+V_{I 1}$, where $V_{I 1}$ is the minimum voltage required by $I_{1}$. Since $V_{G S 1}+V_{I 1}$ might be $600-700 \\mathrm{mV}$, the two stages are incompatible in terms of their bias points without capacitive coupling.\n\nCapacitive coupling, or \"ac coupling,\" is more prevalent in discrete circuit design due to the large capacitor values often required (e.g., $C_{i}$ in the audio example). Nevertheless, many integrated circuits also employ capacitive coupling, especially at low supply voltages, if the required capacitor values are only a few picofarads.\n\nFigure 11.19 depicts a typical frequency response and the associated terminology. We refer to $\\omega_{L}$ as the lower corner or lower \"cut-off\" frequency and $\\omega_{H}$ as the upper corner or upper cut-off frequency. The band between $\\omega_{L}$ and $\\omega_{H}$, chosen to accommodate the signal frequencies of interest, is termed the \"midband range,\" and the corresponding gain is the \"midband gain.\"\nimage_name:Figure 11.19 Typical frequency response.\ndescription:The graph in Figure 11.19 is a typical frequency response plot, often used to illustrate the behavior of electronic filters or amplifiers. It is a Bode plot showing the magnitude of the transfer function, |H|, as a function of angular frequency, ω.\n\n1. **Graph Type and Function:**\n- This is a Bode magnitude plot, a logarithmic graph representing the frequency response of a system.\n\n2. **Axes Labels and Units:**\n- The vertical axis is labeled |H|, indicating the magnitude of the transfer function, typically in decibels (dB), though the unit is not shown.\n- The horizontal axis is labeled ω, representing the angular frequency in radians per second.\n- The frequency axis is usually logarithmic, though this is not explicitly indicated in the diagram.\n\n3. **Overall Behavior and Trends:**\n- The graph shows a low-frequency rise to a flat midband region, followed by a high-frequency roll-off.\n- The curve starts at a lower corner frequency, ω_L, where the gain begins to increase.\n- It reaches a flat region called the \"midband range,\" where the gain is constant and labeled as \"Midband Gain.\"\n- Beyond the midband, the gain decreases at a higher corner frequency, ω_H.\n\n4. **Key Features and Technical Details:**\n- The lower cutoff frequency, ω_L, marks the point where the gain starts to rise toward the midband.\n- The upper cutoff frequency, ω_H, marks the point where the gain begins to decline from the midband.\n- The constant gain level in the midband is labeled as \"Midband Gain.\"\n- The bandwidth of the system is the range between ω_L and ω_H.\n\n5. **Annotations and Specific Data Points:**\n- The graph includes dashed lines at ω_L and ω_H to indicate the cutoff frequencies.\n- An arrow labeled \"Midband\" indicates the range over which the gain remains constant.\n\nThis graph is typical of a bandpass filter or amplifier, where the system allows frequencies within a certain range to pass with minimal attenuation while attenuating frequencies outside this range.\n\nFigure 11.19 Typical frequency response."
},
{
    "text": "Our prior analysis reveals that circuit capacitances tend to diminish voltage gain at high frequencies and may similarly affect low frequencies. Consider, for instance, the high-pass filter depicted in Fig. 11.16(a), where the voltage configuration is as follows:\nimage_name:(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: GND}\n]\nextrainfo:This circuit is a basic high-pass filter. Its frequency response indicates that gain rises with frequency, peaking at high frequencies. The cutoff frequency is governed by the time constant R1*C1.\nimage_name:(b)\ndescription:The graph in Fig. 11.16(b) is a Bode plot depicting the frequency response of a basic high-pass filter.\n\n1. **Graph Type and Function:**\n- The graph is a magnitude Bode plot, illustrating the high-pass filter's gain as a function of frequency.\n\n2. **Axis Labels and Units:**\n- The horizontal axis denotes angular frequency (\\(\\omega\\)), typically in radians per second.\n- The vertical axis represents the voltage gain magnitude \\(\\left|\\frac{V_{\\text{out}}}{V_{\\text{in}}}\\right|\\), which is dimensionless.\n- Both axes use a linear scale.\n\n3. **General Behavior and Trends:**\n- The plot shows gain increasing with frequency.\n- At low frequencies, the gain is near zero, indicating signal attenuation.\n- As frequency rises, the gain approaches a maximum of 1, suggesting minimal attenuation of high-frequency signals.\n\n4. **Key Features and Technical Aspects:**\n- The cutoff frequency, where gain is \\(\\frac{1}{\\sqrt{2}}\\) of the maximum (about 0.707), is indicated by a vertical dashed line at \\(\\frac{1}{R_1 C_1}\\).\n- Beyond this point, the gain asymptotically approaches 1, indicating effective passage of high-frequency signals.\n\n5. **Annotations and Specific Points:**\n- A horizontal dashed line at a gain of 1 marks the maximum gain.\n- The significant point at \\(\\frac{1}{R_1 C_1}\\) is annotated, indicating the transition from low to high gain.\n\nFigure 11.16 (a) Basic high-pass filter, and (b) its frequency response.\nThe voltage division between $C_{1}$ and $R_{1}$ results in:\n\n$$\n\\begin{align*}\n\\frac{V_{\\text {out }}}{V_{\\text {in }}}(s) & =\\frac{R_{1}}{R_{1}+\\frac{1}{C_{1} s}}  \\tag{11.36}\\\\\n& =\\frac{R_{1} C_{1} s}{R_{1} C_{1} s+1} \\tag{11.37}\n\\end{align*}\n$$\n\nand therefore:\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text {out }}}{V_{\\text {in }}}\\right|=\\frac{R_{1} C_{1} \\omega}{\\sqrt{R_{1}^{2} C_{1}^{2} \\omega^{2}+1}} \\tag{11.38}\n\\end{equation*}\n$$\n\nAs illustrated in Fig. 11.16(b), the response shows a roll-off when the operating frequency drops below $1 /\\left(R_{1} C_{1}\\right)$. This roll-off, as per Eq. (11.37), stems from the transfer function's zero at the origin.\n\nThe low-frequency roll-off might be undesirable. The following example highlights this issue.\n\nExample\n11.11\n\nFigure 11.17 presents a source follower in a high-fidelity audio amplifier. Here, $R_{i}$ sets a gate bias voltage equal to $V_{D D}$ for $M_{1}$, and $I_{1}$ defines the drain bias current. Assuming $\\lambda=0, g_{m}=1 /(200 \\Omega)$, and $R_{1}=100 \\mathrm{k} \\Omega$, determine the minimum $C_{1}$ and the maximum acceptable $C_{L}$.\nimage_name:Figure 11.17\ndescription:\n[\nname: Ri, type: Resistor, value: Ri, ports: {N1: g1, N2: VDD}\nname: Ci, type: Capacitor, value: Ci, ports: {Np: Vin, Nn: g1}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: g1}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:This circuit is a source follower in a high-quality audio amplifier, featuring an NMOS transistor (M1) with gate bias set by Ri and drain bias current defined by I1. The input is Vin, and the output is Vout. Ci manages low-frequency roll-off, and CL is the load capacitance.\n\nFigure 11.17\nSolution Similar to the high-pass filter in Fig. 11.16, the input network of $R_{i}$ and $C_{i}$ attenuates low-frequency signals. To ensure minimal attenuation for audio components down to 20 Hz, we set the corner frequency $1 /\\left(R_{i} C_{i}\\right)$ to $2 \\pi \\times(20 \\mathrm{~Hz})$, yielding:\n\n$$\n\\begin{equation*}\nC_{i}=79.6 \\mathrm{nF} \\tag{11.39}\n\\end{equation*}\n$$\n\nThis value is excessively large for on-chip integration. Since Eq. (11.38) indicates a 3 dB attenuation at $\\omega=1 /\\left(R_{i} C_{i}\\right)$, a larger capacitor is needed for lower attenuation.\n\nThe load capacitance introduces a pole at the output node, reducing gain at high frequencies. Setting the pole frequency to the upper audio limit, 20 kHz, and noting that the resistance from the output node to ground equals $1 / g_{m}$, we get:\n\n$$\n\\begin{align*}\n\\omega_{p, \\text { out }} & =\\frac{g_{m}}{C_{L}}  \\tag{11.40}\\\\\n& =2 \\pi \\times(20 \\mathrm{kHz}) \\tag{11.41}\n\\end{align*}\n$$\n\nthus:\n\n$$\n\\begin{equation*}\nC_{L}=39.8 \\mathrm{nF} \\tag{11.42}\n\\end{equation*}\n$$\n\nThe source follower, being an efficient driver, can handle large load capacitances for the audio band.\n\nExercise $\\quad$ Repeat the example if $I_{1}$ and the width of $M_{1}$ are halved.\n\nWhy use capacitor $C_{i}$ in this example? Without $C_{i}$, the circuit's gain would not decrease at low frequencies, eliminating the need for these calculations. Known as a \"coupling\" capacitor, $C_{i}$ allows the desired signal frequencies to pass while blocking the dc component of $V_{i n}$. Essentially, $C_{i}$ isolates the bias conditions of the source follower from the preceding stage. Figure 11.18(a) exemplifies this with a CS stage preceding the source follower. The coupling capacitor enables independent bias voltages at nodes $X$ and $Y$. For instance, $V_{Y}$ can be set relatively low (placing $M_{2}$ near the triode region) to maximize the voltage gain of the CS stage.\nimage_name:Figure 11.18(a)\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Y}\nname: Ri, type: Resistor, value: Ri, ports: {N1: VDD, N2: X}\nname: Ci, type: Capacitor, value: Ci, ports: {Np: Y, Nn: X}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: X}\nname: M2, type: NMOS, ports: {S: GND, D: Y, G: Vin}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:This circuit is a cascade of a common-source (CS) stage and a source follower. The coupling capacitor Ci allows independent biasing of the CS stage and the source follower. RD and Ri set the bias conditions. M1 acts as a source follower, and M2 as a common-source amplifier. I1 provides biasing current to the source follower stage.\n\n(a)\nimage_name:(b)\ndescription:\n[\nname: RD, type: Resistor, ports: {N1: VDD, N2: P}\nname: M2, type: NMOS, ports: {S: GND, D: P, G: Vin}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: P}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:This circuit is a cascade of a common-source (CS) stage and a source follower. The coupling capacitor Ci allows independent biasing of the CS stage and the source follower. RD and Ri set the bias conditions. M1 acts as a source follower, and M2 as a common-source amplifier. I1 provides biasing current to the source follower stage.\n\n(b)\n\nFigure 11.18 Cascade of CS stage and source follower with (a) capacitor coupling and (b) direct coupling.\n\nTo emphasize the necessity of capacitive coupling in Fig. 11.18(a), consider the \"direct coupling\" scenario [Fig. 11.18(b)]. Here, to maximize voltage gain, we aim to set $V_{P}$ just above $V_{G S 2}-V_{T H 2}$, e.g., 200 mV. However, the gate of $M_{2}$ must be at least $V_{G S 1}+V_{I 1}$, where $V_{I 1}$ is the minimum voltage for $I_{1}$. Since $V_{G S 1}+V_{I 1}$ could be 600-700 mV, the stages have incompatible bias points, necessitating capacitive coupling.\n\nCapacitive coupling, or \"ac coupling,\" is prevalent in discrete circuit design due to the large capacitor values often required (e.g., $C_{i}$ in the audio example). Nevertheless, integrated circuits also use capacitive coupling, especially at low supply voltages, if the required capacitor values are only a few picofarads.\n\nFigure 11.19 illustrates a typical frequency response and its terminology. We denote $\\omega_{L}$ as the lower corner or cut-off frequency and $\\omega_{H}$ as the upper corner or cut-off frequency. The band between $\\omega_{L}$ and $\\omega_{H}$, chosen to accommodate the signal frequencies of interest, is termed the \"midband range,\" and the corresponding gain is the \"midband gain.\"\nimage_name:Figure 11.19 Typical frequency response.\ndescription:The graph in Figure 11.19 is a typical frequency response plot, often used to illustrate the behavior of electronic filters or amplifiers. It is a Bode plot showing the magnitude of the transfer function, |H|, as a function of angular frequency, ω.\n\n1. **Graph Type and Function:**\n- This is a Bode magnitude plot, a logarithmic graph representing the frequency response of a system.\n\n2. **Axis Labels and Units:**\n- The vertical axis is labeled |H|, indicating the magnitude of the transfer function, typically in decibels (dB), though the unit is not shown.\n- The horizontal axis is labeled ω, representing angular frequency in radians per second.\n- The frequency axis is usually logarithmic, though this is not explicitly indicated.\n\n3. **General Behavior and Trends:**\n- The graph displays a low-frequency rise to a flat midband region, followed by a high-frequency roll-off.\n- The curve starts at a lower corner frequency, ω_L, where the gain begins to increase.\n- It reaches a flat region called the \"midband range,\" where the gain is constant and labeled as \"Midband Gain.\"\n- Beyond the midband, the gain decreases at a higher corner frequency, ω_H.\n\n4. **Key Features and Technical Details:**\n- The lower cutoff frequency, ω_L, marks the point where the gain starts to rise toward the midband.\n- The upper cutoff frequency, ω_H, marks the point where the gain begins to decline from the midband.\n- The constant gain level in the midband is labeled as \"Midband Gain.\"\n- The bandwidth of the system is the range between ω_L and ω_H.\n\n5. **Annotations and Specific Data Points:**\n- The graph includes dashed lines at ω_L and ω_H to indicate the cutoff frequencies.\n- An arrow labeled \"Midband\" indicates the range over which the gain remains constant.\n\nThis graph is typical of a bandpass filter or amplifier, where the system allows frequencies within a certain range to pass with minimal attenuation while attenuating frequencies outside this range.\n\nFigure 11.19 Typical frequency response."
},
{
    "text": "Our previous research suggests that circuit capacitances tend to decrease voltage gain at high frequencies. It is also plausible that capacitors might similarly reduce gain at low frequencies. For a straightforward illustration, consider the high-pass filter depicted in Fig. 11.16(a), where the voltage\nimage_name:(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a basic high-pass filter. The frequency response indicates that gain rises with frequency, peaking at high frequencies. The cutoff frequency is determined by the time constant R1*C1.\nimage_name:(b)\ndescription:The graph in Fig. 11.16(b) is a Bode plot depicting the frequency response of a basic high-pass filter.\n\n1. **Graph Type and Function:**\n- The graph is a magnitude Bode plot, illustrating the gain of the high-pass filter as a function of frequency.\n\n2. **Axes Labels and Units:**\n- The horizontal axis represents angular frequency (\\(\\omega\\)), typically measured in radians per second.\n- The vertical axis shows the magnitude of the voltage gain \\(\\left|\\frac{V_{\\text{out}}}{V_{\\text{in}}}\\right|\\), which is unitless.\n- Both axes use a linear scale.\n\n3. **General Behavior and Trends:**\n- The plot reveals an increasing gain trend with frequency.\n- At low frequencies, the gain is near zero, indicating signal attenuation.\n- As frequency rises, the gain approaches a maximum of 1, suggesting minimal attenuation of high-frequency signals.\n\n4. **Key Features and Technical Aspects:**\n- The cutoff frequency, where the gain is \\(\\frac{1}{\\sqrt{2}}\\) of the maximum (about 0.707), is indicated by a vertical dashed line at \\(\\frac{1}{R_1 C_1}\\).\n- Beyond this cutoff, the gain asymptotically reaches 1, indicating effective passage of high-frequency signals.\n\n5. **Annotations and Specific Points:**\n- A horizontal dashed line at a gain of 1 marks the maximum gain.\n- The significant point at \\(\\frac{1}{R_1 C_1}\\) is annotated, indicating the transition from low to high gain.\n\nFigure 11.16 (a) Basic high-pass filter, and (b) its frequency response.\nvoltage division between $C_{1}$ and $R_{1}$ results in\n\n$$\n\\begin{align*}\n\\frac{V_{\\text {out }}}{V_{\\text {in }}}(s) & =\\frac{R_{1}}{R_{1}+\\frac{1}{C_{1} s}}  \\tag{11.36}\\\\\n& =\\frac{R_{1} C_{1} s}{R_{1} C_{1} s+1} \\tag{11.37}\n\\end{align*}\n$$\n\nand thus\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text {out }}}{V_{\\text {in }}}\\right|=\\frac{R_{1} C_{1} \\omega}{\\sqrt{R_{1}^{2} C_{1}^{2} \\omega^{2}+1}} \\tag{11.38}\n\\end{equation*}\n$$\n\nAs shown in Fig. 11.16(b), the response displays a roll-off when the operating frequency drops below $1 /\\left(R_{1} C_{1}\\right)$. This roll-off, as seen from Eq. (11.37), occurs due to the zero of the transfer function being at the origin.\n\nThe low-frequency roll-off might be undesirable. The following example demonstrates this point.\n\nExample\n11.11\n\nFig. 11.17 shows a source follower used in a high-fidelity audio amplifier. Here, $R_{i}$ sets a gate bias voltage equal to $V_{D D}$ for $M_{1}$, and $I_{1}$ defines the drain bias current. Assuming $\\lambda=0, g_{m}=1 /(200 \\Omega)$, and $R_{1}=100 \\mathrm{k} \\Omega$, determine the minimum required $C_{1}$ and the maximum acceptable $C_{L}$.\nimage_name:Figure 11.17\ndescription:\n[\nname: Ri, type: Resistor, value: Ri, ports: {N1: g1, N2: VDD}\nname: Ci, type: Capacitor, value: Ci, ports: {Np: Vin, Nn: g1}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: g1}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a source follower configuration in a high-fidelity audio amplifier. It includes an NMOS transistor (M1) with gate bias set by Ri and drain bias current defined by I1. The input is Vin, and the output is Vout. Low-frequency roll-off is managed by Ci, and the load capacitance is CL.\n\nFigure 11.17\nSolution Similar to the high-pass filter in Fig. 11.16, the input network of $R_{i}$ and $C_{i}$ attenuates low-frequency signals. To ensure minimal attenuation for audio components down to 20 Hz, we set the corner frequency $1 /\\left(R_{i} C_{i}\\right)$ to $2 \\pi \\times(20 \\mathrm{~Hz})$, yielding\n\n$$\n\\begin{equation*}\nC_{i}=79.6 \\mathrm{nF} \\tag{11.39}\n\\end{equation*}\n$$\n\nThis value is excessively large for on-chip integration. Since Eq. (11.38) indicates a 3 dB attenuation at $\\omega=1 /\\left(R_{i} C_{i}\\right)$, a larger capacitor is often needed for lower attenuation.\n\nThe load capacitance introduces a pole at the output node, reducing gain at high frequencies. Setting the pole frequency to the upper audio limit of 20 kHz, and noting that the resistance seen from the output node to ground equals $1 / g_{m}$, we get\n\n$$\n\\begin{align*}\n\\omega_{p, \\text { out }} & =\\frac{g_{m}}{C_{L}}  \\tag{11.40}\\\\\n& =2 \\pi \\times(20 \\mathrm{kHz}) \\tag{11.41}\n\\end{align*}\n$$\n\nresulting in\n\n$$\n\\begin{equation*}\nC_{L}=39.8 \\mathrm{nF} \\tag{11.42}\n\\end{equation*}\n$$\n\nThe source follower, being an efficient driver, can handle a substantial load capacitance for the audio band.\n\nExercise $\\quad$ Repeat the above example with $I_{1}$ and the width of $M_{1}$ halved.\n\nWhy was capacitor $C_{i}$ used in the example? Without $C_{i}$, the circuit's gain would not decline at low frequencies, eliminating the need for the above calculations. Known as a \"coupling\" capacitor, $C_{i}$ allows the desired signal frequencies to pass while blocking the dc component of $V_{i n}$. In other words, $C_{i}$ isolates the bias conditions of the source follower from the preceding stage. Fig. 11.18(a) illustrates this with a CS stage preceding the source follower. The coupling capacitor enables independent bias voltages at nodes $X$ and $Y$. For instance, $V_{Y}$ can be set relatively low (keeping $M_{2}$ near the triode region) to maximize the voltage gain of the CS stage.\nimage_name:Figure 11.18(a)\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Y}\nname: Ri, type: Resistor, value: Ri, ports: {N1: VDD, N2: X}\nname: Ci, type: Capacitor, value: Ci, ports: {Np: Y, Nn: X}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: X}\nname: M2, type: NMOS, ports: {S: GND, D: Y, G: Vin}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a cascade of a common-source (CS) stage and a source follower. The coupling capacitor Ci allows independent biasing of the CS stage and the source follower. RD and Ri set the bias conditions. M1 acts as a source follower, and M2 as a common-source amplifier. I1 provides biasing current to the source follower stage.\n\n(a)\nimage_name:(b)\ndescription:\n[\nname: RD, type: Resistor, ports: {N1: VDD, N2: P}\nname: M2, type: NMOS, ports: {S: GND, D: P, G: Vin}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: P}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a cascade of a common-source (CS) stage and a source follower. The coupling capacitor Ci allows independent biasing of the CS stage and the source follower. RD and Ri set the bias conditions. M1 acts as a source follower, and M2 as a common-source amplifier. I1 provides biasing current to the source follower stage.\n\n(b)\n\nFigure 11.18 Cascade of CS stage and source follower with (a) capacitor coupling and (b) direct coupling.\n\nTo emphasize the necessity of capacitive coupling in Fig. 11.18(a), we also consider the \"direct coupling\" scenario [Fig. 11.18(b)]. Here, to maximize voltage gain, we aim to set $V_{P}$ just above $V_{G S 2}-V_{T H 2}$, e.g., 200 mV. However, the gate of $M_{2}$ must be at least $V_{G S 1}+V_{I 1}$, where $V_{I 1}$ is the minimum voltage required by $I_{1}$. Since $V_{G S 1}+V_{I 1}$ could be $600-700 \\mathrm{mV}$, the bias points of the two stages are incompatible, necessitating capacitive coupling.\n\nCapacitive coupling, or \"ac coupling,\" is more prevalent in discrete circuit design due to the large capacitor values often required (e.g., $C_{i}$ in the audio example). Nevertheless, integrated circuits also use capacitive coupling, especially at low supply voltages, if the required capacitor values are only a few picofarads.\n\nFigure 11.19 illustrates a typical frequency response and its associated terminology. We term $\\omega_{L}$ the lower corner or lower \"cut-off\" frequency and $\\omega_{H}$ the upper corner or upper cut-off frequency. The band between $\\omega_{L}$ and $\\omega_{H}$, chosen to accommodate the signal frequencies of interest, is called the \"midband range,\" and the corresponding gain is the \"midband gain.\"\nimage_name:Figure 11.19 Typical frequency response.\ndescription:The graph in Figure 11.19 is a typical frequency response plot, often used to illustrate the behavior of electronic filters or amplifiers. It is a Bode plot showing the magnitude of the transfer function, |H|, as a function of angular frequency, ω.\n\n1. **Graph Type and Function:**\n- This is a Bode magnitude plot, a logarithmic graph representing the frequency response of a system.\n\n2. **Axes Labels and Units:**\n- The vertical axis is labeled |H|, indicating the magnitude of the transfer function, typically in decibels (dB), though the specific unit is not shown.\n- The horizontal axis is labeled ω, representing the angular frequency in radians per second.\n- The frequency axis is usually logarithmic, though this is not explicitly indicated in the diagram.\n\n3. **Overall Behavior and Trends:**\n- The graph shows a low-frequency rise to a flat midband region, followed by a high-frequency roll-off.\n- The curve starts at a lower corner frequency, ω_L, where the gain begins to increase.\n- It reaches a flat region called the \"midband range,\" where the gain is constant and labeled as \"Midband Gain.\"\n- Beyond the midband, the gain decreases at a higher corner frequency, ω_H.\n\n4. **Key Features and Technical Details:**\n- The lower cutoff frequency, ω_L, marks the point where the gain starts to rise toward the midband.\n- The upper cutoff frequency, ω_H, marks the point where the gain begins to decline from the midband.\n- The constant gain level in the midband is labeled as \"Midband Gain.\"\n- The bandwidth of the system is the range between ω_L and ω_H.\n\n5. **Annotations and Specific Data Points:**\n- The graph includes dashed lines at ω_L and ω_H to indicate the cutoff frequencies.\n- An arrow labeled \"Midband\" indicates the range over which the gain remains constant.\n\nThis graph is typical of a bandpass filter or amplifier, where the system allows frequencies within a certain range to pass with minimal attenuation while attenuating frequencies outside this range.\n\nFigure 11.19 Typical frequency response."
},
{
    "text": "Our prior research indicates that circuit capacitances tend to decrease voltage gain at high frequencies. It's also possible that capacitors reduce gain at low frequencies. Consider, for instance, the high-pass filter depicted in Fig. 11.16(a), where the voltage\nimage_name:(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a simple high-pass filter. The frequency response shows that gain increases with frequency, peaking at high frequencies. The cutoff frequency is determined by the time constant R1*C1.\nimage_name:(b)\ndescription:The graph in Fig. 11.16(b) is a Bode plot representing the frequency response of a simple high-pass filter.\n\n1. **Graph Type and Function:**\n- The graph is a magnitude Bode plot, depicting the gain of the high-pass filter as a function of frequency.\n\n2. **Axes Labels and Units:**\n- The horizontal axis represents angular frequency (\\(\\omega\\)), typically in radians per second.\n- The vertical axis shows the magnitude of the voltage gain \\(\\left|\\frac{V_{\\text{out}}}{V_{\\text{in}}}\\right|\\), which is unitless.\n- Both axes use a linear scale.\n\n3. **Overall Behavior and Trends:**\n- The plot shows gain increasing with frequency.\n- At low frequencies, gain is near zero, indicating filter attenuation of low-frequency signals.\n- As frequency rises, gain approaches a maximum of 1, indicating minimal attenuation of high-frequency signals.\n\n4. **Key Features and Technical Details:**\n- The cutoff frequency, where gain is \\(\\frac{1}{\\sqrt{2}}\\) of the maximum (about 0.707), is marked by a vertical dashed line at \\(\\frac{1}{R_1 C_1}\\).\n- Beyond this cutoff, gain asymptotically approaches 1, indicating effective passage of high-frequency signals.\n\n5. **Annotations and Specific Data Points:**\n- A horizontal dashed line at a gain of 1 indicates the maximum gain.\n- The significant point at \\(\\frac{1}{R_1 C_1}\\) is annotated, marking the transition from low to high gain.\n\nFigure 11.16 (a) Simple high-pass filter, and (b) its frequency response.\ndivision between $C_{1}$ and $R_{1}$ yields\n\n$$\n\\begin{align*}\n\\frac{V_{\\text {out }}}{V_{\\text {in }}}(s) & =\\frac{R_{1}}{R_{1}+\\frac{1}{C_{1} s}}  \\tag{11.36}\\\\\n& =\\frac{R_{1} C_{1} s}{R_{1} C_{1} s+1} \\tag{11.37}\n\\end{align*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text {out }}}{V_{\\text {in }}}\\right|=\\frac{R_{1} C_{1} \\omega}{\\sqrt{R_{1}^{2} C_{1}^{2} \\omega_{1}^{2}+1}} \\tag{11.38}\n\\end{equation*}\n$$\n\nPlotted in Fig. 11.16(b), the response shows a roll-off as the frequency drops below $1 /\\left(R_{1} C_{1}\\right)$. As Eq. (11.37) indicates, this roll-off occurs because the transfer function's zero is at the origin.\n\nThe low-frequency roll-off might be undesirable. The following example illustrates this.\n\nExample\n11.11\n\nFigure 11.17 shows a source follower used in a high-fidelity audio amplifier. Here, $R_{i}$ sets a gate bias voltage equal to $V_{D D}$ for $M_{1}$, and $I_{1}$ defines the drain bias current. Assume $\\lambda=0, g_{m}=1 /(200 \\Omega)$, and $R_{1}=100 \\mathrm{k} \\Omega$. Determine the minimum required $C_{1}$ and the maximum acceptable $C_{L}$.\nimage_name:Figure 11.17\ndescription:\n[\nname: Ri, type: Resistor, value: Ri, ports: {N1: g1, N2: VDD}\nname: Ci, type: Capacitor, value: Ci, ports: {Np: Vin, Nn: g1}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: g1}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a source follower in a high-fidelity audio amplifier. It includes an NMOS transistor (M1) with gate bias set by Ri and drain bias current defined by I1. The input is Vin, and the output is Vout. Ci manages low-frequency roll-off, and CL is the load capacitance.\n\nFigure 11.17\nSolution Similar to the high-pass filter in Fig. 11.16, the input network of $R_{i}$ and $C_{i}$ attenuates low-frequency signals. To ensure minimal attenuation of audio frequencies down to 20 Hz, we set the corner frequency $1 /\\left(R_{i} C_{i}\\right)$ to $2 \\pi \\times(20 \\mathrm{~Hz})$, resulting in\n\n$$\n\\begin{equation*}\nC_{i}=79.6 \\mathrm{nF} \\tag{11.39}\n\\end{equation*}\n$$\n\nThis value is too large for on-chip integration. Since Eq. (11.38) shows a 3 dB attenuation at $\\omega=1 /\\left(R_{i} C_{i}\\right)$, a larger capacitor is needed for lower attenuation.\n\nThe load capacitance creates a pole at the output node, reducing gain at high frequencies. Setting the pole frequency to the upper audio limit, 20 kHz, and noting the resistance seen from the output node to ground is $1 / g_{m}$, we get\n\n$$\n\\begin{align*}\n\\omega_{p, \\text { out }} & =\\frac{g_{m}}{C_{L}}  \\tag{11.40}\\\\\n& =2 \\pi \\times(20 \\mathrm{kHz}) \\tag{11.41}\n\\end{align*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\nC_{L}=39.8 \\mathrm{nF} \\tag{11.42}\n\\end{equation*}\n$$\n\nThe source follower, being an efficient driver, can handle a large load capacitance for the audio band.\n\nExercise $\\quad$ Repeat the example if $I_{1}$ and the width of $M_{1}$ are halved.\n\nWhy use capacitor $C_{i}$ in the example? Without $C_{i}$, the circuit's gain wouldn't drop at low frequencies, eliminating the need for these calculations. Known as a \"coupling\" capacitor, $C_{i}$ allows desired signal frequencies to pass while blocking $V_{i n}$'s dc content. In other words, $C_{i}$ isolates the source follower's bias conditions from the preceding stage. Figure 11.18(a) shows a CS stage preceding the source follower. The coupling capacitor enables independent bias voltages at nodes $X$ and $Y$. For instance, $V_{Y}$ can be set low (placing $M_{2}$ near the triode region) to maximize the voltage gain of the CS stage (why?).\nimage_name:Figure 11.18(a)\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Y}\nname: Ri, type: Resistor, value: Ri, ports: {N1: VDD, N2: X}\nname: Ci, type: Capacitor, value: Ci, ports: {Np: Y, Nn: X}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: X}\nname: M2, type: NMOS, ports: {S: GND, D: Y, G: Vin}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a CS stage followed by a source follower. Ci allows independent biasing of the stages. RD and Ri set bias conditions. M1 is a source follower, and M2 is a common-source amplifier. I1 provides biasing current to the source follower.\n\n(a)\nimage_name:(b)\ndescription:\n[\nname: RD, type: Resistor, ports: {N1: VDD, N2: P}\nname: M2, type: NMOS, ports: {S: GND, D: P, G: Vin}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: P}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a CS stage followed by a source follower. Ci allows independent biasing of the stages. RD and Ri set bias conditions. M1 is a source follower, and M2 is a common-source amplifier. I1 provides biasing current to the source follower.\n\n(b)\n\nFigure 11.18 Cascade of CS stage and source follower with (a) capacitor coupling and (b) direct coupling.\n\nTo demonstrate the necessity of capacitive coupling in Fig. 11.18(a), consider \"direct coupling\" [Fig. 11.18(b)]. Here, to maximize voltage gain, $V_{P}$ is set just above $V_{G S 2}-V_{T H 2}$, e.g., 200 mV. However, $M_{2}$'s gate must be at least $V_{G S 1}+V_{I 1}$, where $V_{I 1}$ is the minimum voltage for $I_{1}$. Since $V_{G S 1}+V_{I 1}$ might be 600-700 mV, the stages have incompatible bias points, necessitating capacitive coupling.\n\nCapacitive coupling (or \"ac coupling\") is common in discrete circuit design due to the large capacitors often required (e.g., $C_{i}$ in the audio example). However, integrated circuits also use capacitive coupling, especially at low supply voltages, if the required capacitor values are only a few picofarads.\n\nFigure 11.19 shows a typical frequency response and its terminology. $\\omega_{L}$ is the lower corner or cut-off frequency, and $\\omega_{H}$ is the upper corner or cut-off frequency. The band between $\\omega_{L}$ and $\\omega_{H}$, chosen for the signal frequencies of interest, is the \"midband range,\" and the corresponding gain is the \"midband gain.\"\nimage_name:Figure 11.19 Typical frequency response.\ndescription:The graph in Figure 11.19 is a typical frequency response plot, often used for electronic filters or amplifiers. It is a Bode plot showing the magnitude of the transfer function, |H|, as a function of angular frequency, ω.\n\n1. **Graph Type and Function:**\n- This is a Bode magnitude plot, a logarithmic graph representing a system's frequency response.\n\n2. **Axes Labels and Units:**\n- The vertical axis is |H|, the magnitude of the transfer function, typically in decibels (dB), though not explicitly shown.\n- The horizontal axis is ω, the angular frequency in radians per second.\n- The frequency axis is usually logarithmic, though not clearly indicated.\n\n3. **Overall Behavior and Trends:**\n- The graph shows a low-frequency rise to a flat midband region, followed by a high-frequency roll-off.\n- The curve starts at a lower corner frequency, ω_L, where gain begins to increase.\n- It reaches a flat \"midband range\" where gain is constant, labeled \"Midband Gain.\"\n- Beyond the midband, gain decreases at a higher corner frequency, ω_H.\n\n4. **Key Features and Technical Details:**\n- The lower cutoff frequency, ω_L, marks where gain starts to rise toward the midband.\n- The upper cutoff frequency, ω_H, marks where gain begins to decline from the midband.\n- The constant gain in the midband is labeled \"Midband Gain.\"\n- The system's bandwidth is the range between ω_L and ω_H.\n\n5. **Annotations and Specific Data Points:**\n- Dashed lines at ω_L and ω_H indicate the cutoff frequencies.\n- An arrow labeled \"Midband\" indicates the range of constant gain.\n\nThis graph is typical for bandpass filters or amplifiers, allowing frequencies within a specific range to pass with minimal attenuation while attenuating frequencies outside this range.\n\nFigure 11.19 Typical frequency response."
},
{
    "text": "Our previous study reveals that circuit capacitances tend to decrease voltage gain at high frequencies. It is also plausible that capacitors might reduce gain at low frequencies. Consider, for instance, the high-pass filter depicted in Fig. 11.16(a), where the voltage\nimage_name:(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a simple high-pass filter. The frequency response indicates that gain increases with frequency, reaching a peak at high frequencies. The cutoff frequency is determined by the time constant R1*C1.\nimage_name:(b)\ndescription:The graph in Fig. 11.16(b) is a Bode plot depicting the frequency response of a simple high-pass filter.\n\n1. **Graph Type and Function:**\n- The graph is a magnitude Bode plot, illustrating the gain of the high-pass filter as a function of frequency.\n\n2. **Axes Labels and Units:**\n- The horizontal axis represents angular frequency (\\(\\omega\\)), typically in radians per second.\n- The vertical axis shows the magnitude of the voltage gain \\(\\left|\\frac{V_{\\text{out}}}{V_{\\text{in}}}\\right|\\), which is unitless.\n- Both axes use a linear scale.\n\n3. **General Behavior and Trends:**\n- The plot displays an increasing gain trend with frequency.\n- At low frequencies, the gain is near zero, indicating signal attenuation.\n- As frequency rises, the gain approaches a maximum of 1, indicating minimal attenuation for high-frequency signals.\n\n4. **Key Features and Technical Aspects:**\n- The cutoff frequency, where the gain is \\(\\frac{1}{\\sqrt{2}}\\) of the maximum (about 0.707), is marked by a vertical dashed line at \\(\\frac{1}{R_1 C_1}\\).\n- Beyond this frequency, the gain asymptotically approaches 1, indicating effective passage of high-frequency signals.\n\n5. **Annotations and Specific Points:**\n- A horizontal dashed line at a gain of 1 indicates the maximum gain.\n- The significant point at \\(\\frac{1}{R_1 C_1}\\) is annotated, marking the transition from low to high gain.\n\nFigure 11.16 (a) Simple high-pass filter, and (b) its frequency response.\ndivision between $C_{1}$ and $R_{1}$ yields\n\n$$\n\\begin{align*}\n\\frac{V_{\\text {out }}}{V_{\\text {in }}}(s) & =\\frac{R_{1}}{R_{1}+\\frac{1}{C_{1} s}}  \\tag{11.36}\\\\\n& =\\frac{R_{1} C_{1} s}{R_{1} C_{1} s+1} \\tag{11.37}\n\\end{align*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\n\\left|\\frac{V_{\\text {out }}}{V_{\\text {in }}}\\right|=\\frac{R_{1} C_{1} \\omega}{\\sqrt{R_{1}^{2} C_{1}^{2} \\omega_{1}^{2}+1}} \\tag{11.38}\n\\end{equation*}\n$$\n\nAs shown in Fig. 11.16(b), the response exhibits a roll-off when the frequency drops below $1 /\\left(R_{1} C_{1}\\right)$. This roll-off, as seen from Eq. (11.37), occurs because the transfer function's zero is at the origin.\n\nThe low-frequency roll-off can be undesirable. The following example illustrates this issue.\n\nExample\n11.11\n\nFigure 11.17 shows a source follower used in a high-quality audio amplifier. Here, $R_{i}$ sets the gate bias voltage equal to $V_{D D}$ for $M_{1}$, and $I_{1}$ defines the drain bias current. Assuming $\\lambda=0, g_{m}=1 /(200 \\Omega)$, and $R_{1}=100 \\mathrm{k} \\Omega$, determine the minimum required value of $C_{1}$ and the maximum acceptable value of $C_{L}$.\nimage_name:Figure 11.17\ndescription:\n[\nname: Ri, type: Resistor, value: Ri, ports: {N1: g1, N2: VDD}\nname: Ci, type: Capacitor, value: Ci, ports: {Np: Vin, Nn: g1}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: g1}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a source follower configuration in a high-quality audio amplifier. It includes an NMOS transistor (M1) with gate bias set by Ri and drain bias current defined by I1. The input is Vin, and the output is Vout. Ci manages the low-frequency roll-off, and CL is the load capacitance.\n\nFigure 11.17\nSolution Similar to the high-pass filter in Fig. 11.16, the input network of $R_{i}$ and $C_{i}$ attenuates low-frequency signals. To ensure minimal attenuation for audio components down to 20 Hz, we set the corner frequency $1 /\\left(R_{i} C_{i}\\right)$ to $2 \\pi \\times(20 \\mathrm{~Hz})$, resulting in\n\n$$\n\\begin{equation*}\nC_{i}=79.6 \\mathrm{nF} \\tag{11.39}\n\\end{equation*}\n$$\n\nThis value is too large for integration on a chip. Since Eq. (11.38) indicates a 3 dB attenuation at $\\omega=1 /\\left(R_{i} C_{i}\\right)$, a larger capacitor is needed for lower attenuation in practice.\n\nThe load capacitance creates a pole at the output node, reducing gain at high frequencies. Setting the pole frequency to the upper limit of the audio range, 20 kHz, and noting that the resistance seen from the output node to ground is $1 / g_{m}$, we get\n\n$$\n\\begin{align*}\n\\omega_{p, \\text { out }} & =\\frac{g_{m}}{C_{L}}  \\tag{11.40}\\\\\n& =2 \\pi \\times(20 \\mathrm{kHz}) \\tag{11.41}\n\\end{align*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\nC_{L}=39.8 \\mathrm{nF} \\tag{11.42}\n\\end{equation*}\n$$\n\nThe source follower, being an efficient driver, can handle a large load capacitance for the audio band.\n\nExercise $\\quad$ Repeat the above example if $I_{1}$ and the width of $M_{1}$ are halved.\n\nWhy was capacitor $C_{i}$ used in the example? Without $C_{i}$, the circuit's gain would not drop at low frequencies, eliminating the need for the above calculations. Known as a \"coupling\" capacitor, $C_{i}$ allows the desired signal frequencies to pass while blocking the dc component of $V_{i n}$. In other words, $C_{i}$ isolates the bias conditions of the source follower from those of the preceding stage. Figure 11.18(a) exemplifies this with a CS stage preceding the source follower. The coupling capacitor enables independent bias voltages at nodes $X$ and $Y$. For instance, $V_{Y}$ can be set relatively low (placing $M_{2}$ near the triode region) to maximize the voltage gain of the CS stage (why?).\nimage_name:Figure 11.18(a)\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Y}\nname: Ri, type: Resistor, value: Ri, ports: {N1: VDD, N2: X}\nname: Ci, type: Capacitor, value: Ci, ports: {Np: Y, Nn: X}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: X}\nname: M2, type: NMOS, ports: {S: GND, D: Y, G: Vin}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a cascade of a common-source (CS) stage and a source follower. The coupling capacitor Ci allows independent biasing of the CS stage and the source follower. RD and Ri set the bias conditions. M1 acts as a source follower, and M2 as a common-source amplifier. I1 provides biasing current to the source follower stage.\n\n(a)\nimage_name:(b)\ndescription:\n[\nname: RD, type: Resistor, ports: {N1: VDD, N2: P}\nname: M2, type: NMOS, ports: {S: GND, D: P, G: Vin}\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: P}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a cascade of a common-source (CS) stage and a source follower. The coupling capacitor Ci allows independent biasing of the CS stage and the source follower. RD and Ri set the bias conditions. M1 acts as a source follower, and M2 as a common-source amplifier. I1 provides biasing current to the source follower stage.\n\n(b)\n\nFigure 11.18 Cascade of CS stage and source follower with (a) capacitor coupling and (b) direct coupling.\n\nTo demonstrate the necessity of capacitive coupling in Fig. 11.18(a), we also consider \"direct coupling\" [Fig. 11.18(b)]. Here, to maximize voltage gain, we aim to set $V_{P}$ just above $V_{G S 2}-V_{T H 2}$, e.g., 200 mV. However, the gate of $M_{2}$ must be at least $V_{G S 1}+V_{I 1}$, where $V_{I 1}$ is the minimum voltage required by $I_{1}$. Since $V_{G S 1}+V_{I 1}$ could be 600-700 mV, the two stages are incompatible in terms of bias points, necessitating capacitive coupling.\n\nCapacitive coupling, or \"ac coupling,\" is more prevalent in discrete circuit design due to the large capacitor values often required (e.g., $C_{i}$ in the audio example). Nevertheless, many integrated circuits also use capacitive coupling, especially at low supply voltages, if the required capacitor values are only a few picofarads.\n\nFigure 11.19 illustrates a typical frequency response and the associated terminology. We refer to $\\omega_{L}$ as the lower corner or lower \"cut-off\" frequency and $\\omega_{H}$ as the upper corner or upper cut-off frequency. The band between $\\omega_{L}$ and $\\omega_{H}$, chosen to accommodate the signal frequencies of interest, is termed the \"midband range,\" and the corresponding gain is the \"midband gain.\"\nimage_name:Figure 11.19 Typical frequency response.\ndescription:The graph in Figure 11.19 is a typical frequency response plot, often used to illustrate the behavior of electronic filters or amplifiers. It is a Bode plot showing the magnitude of the transfer function, |H|, as a function of angular frequency, ω.\n\n1. **Graph Type and Function:**\n- This is a Bode magnitude plot, a logarithmic graph representing the frequency response of a system.\n\n2. **Axes Labels and Units:**\n- The vertical axis is labeled |H|, indicating the magnitude of the transfer function, typically in decibels (dB), though the unit is not shown.\n- The horizontal axis is labeled ω, representing the angular frequency in radians per second.\n- The frequency axis is usually logarithmic, though this is not explicitly indicated.\n\n3. **Overall Behavior and Trends:**\n- The graph shows a low-frequency rise to a flat midband region, followed by a high-frequency roll-off.\n- The curve starts at a lower corner frequency, ω_L, where the gain begins to increase.\n- It reaches a flat region called the \"midband range,\" where the gain is constant and labeled as \"Midband Gain.\"\n- Beyond the midband, the gain decreases at a higher corner frequency, ω_H.\n\n4. **Key Features and Technical Details:**\n- The lower cutoff frequency, ω_L, marks the point where the gain starts to rise toward the midband.\n- The upper cutoff frequency, ω_H, marks the point where the gain begins to decline from the midband.\n- The constant gain level in the midband is labeled as \"Midband Gain.\"\n- The bandwidth of the system is the range between ω_L and ω_H.\n\n5. **Annotations and Specific Data Points:**\n- The graph includes dashed lines at ω_L and ω_H to indicate the cutoff frequencies.\n- An arrow labeled \"Midband\" indicates the range over which the gain remains constant.\n\nThis graph is typical of a bandpass filter or amplifier, where the system allows frequencies within a certain range to pass with minimal attenuation while attenuating frequencies outside this range.\n\nFigure 11.19 Typical frequency response."
},
{
    "text": "Recall from Chapter 4 that a bipolar transistor comprises two pn junctions. The depletion regions associated with these junctions ${ }^{6}$ result in a capacitance between the base and emitter, designated as $C_{j e}$, and another between the base and collector, designated as $C_{\\mu}$ [Fig. 11.20(a)]. By incorporating these capacitances into the small-signal model, we arrive at the representation illustrated in Fig. 11.20(b).\n\nimage_name:(a)\ndescription:The image is divided into three sections labeled (a), (b), and (c), each depicting different models of a bipolar transistor.\n\n1. **Part (a) - Bipolar Transistor Structure:**\n- **Components and Structure:** This diagram provides a cross-sectional view of a bipolar transistor with two pn junctions. It features an n-type region, a p-type region, and an n+ region, representing the base (B), collector (C), and emitter (E) terminals, respectively.\n- **Connections and Interactions:** Capacitances are illustrated between the base and collector (C_μ) and between the base and emitter (C_je), originating from the depletion regions at the junctions.\n- **Labels and Annotations:** The terminals are marked as B (Base), C (Collector), and E (Emitter), with the capacitances labeled as C_μ and C_je.\n\n2. **Part (b) - Small-Signal Model with Junction Capacitances:**\n- **Components and Structure:** This section presents a small-signal equivalent circuit model of the bipolar transistor, including resistors, capacitors, and a dependent current source.\n- **Connections and Interactions:** The diagram shows capacitances C_μ and C_je connected between the respective terminals. The base-emitter junction is represented by a resistor r_π and a voltage source v_π. A dependent current source, g_m * v_π, symbolizes the transistor's transconductance, and r_o represents the output resistance.\n- **Labels and Annotations:** Components are labeled with their respective symbols and parameters, such as C_μ, C_je, r_π, v_π, g_m, and r_o.\n\n3. **Part (c) - Complete Model Considering Base Charge:**\n- **Components and Structure:** This model extends the small-signal model by incorporating additional elements to account for the base charge.\n- **Connections and Interactions:** Similar to part (b), it includes capacitances C_μ and C_π, a resistor r_π, and a dependent current source g_m * v_π. The model also introduces a voltage-controlled current source to represent the dynamics of the base charge.\n- **Labels and Annotations:** Labels include C_μ, C_π, r_π, v_π, g_m, and r_o, along with the base, collector, and emitter terminals.\n\nimage_name:(b)\ndescription:\n[\nname: C_μ, type: Capacitor, value: C_μ, ports: {Np: B, Nn: C}\nname: C_je, type: Capacitor, value: C_je, ports: {Np: B, Nn: E}\nname: r_π, type: Resistor, value: r_π, ports: {N1: B, N2: E}\nname: g_m v_π, type: CurrentSource, value: g_m v_π, ports: {Np: C, Nn: E}\nname: r_o, type: Resistor, value: r_o, ports: {N1: C, N2: E}\n]\nextrainfo:This circuit represents a high-frequency small-signal model of a bipolar transistor, incorporating junction capacitances C_μ and C_je, as well as a dependent current source g_m v_π to depict the transconductance effect.\n\nimage_name:(c)\ndescription:\n[\nname: C_μ, type: Capacitor, value: C_μ, ports: {Np: B, Nn: C}\nname: C_π, type: Capacitor, value: C_π, ports: {Np: B, Nn: E}\nname: r_π, type: Resistor, value: r_π, ports: {N1: B, N2: E}\nname: g_m v_π, type: CurrentSource, value: g_m v_π, ports: {Np: C, Nn: E}\nname: r_o, type: Resistor, value: r_o, ports: {N1: C, N2: E}\n]\nextrainfo:This high-frequency small-signal model of a bipolar transistor includes junction capacitances C_μ and C_π, along with resistances and controlled sources to accurately model transistor behavior.\n\nFigure 11.20 (a) Structure of bipolar transistor showing junction capacitances, (b) small-signal model with junction capacitances, (c) complete model accounting for base charge.\n\nHowever, this model is not fully comprehensive as it overlooks another effect in the base-emitter junction. As detailed in Chapter 4, the transistor's operation necessitates a (nonuniform) charge profile in the base region to facilitate the\n\n[^8]diffusion of carriers toward the collector. In essence, when the transistor is abruptly turned on, proper operation only commences once sufficient charge carriers enter the base region and accumulate to establish the required profile. Conversely, when the transistor is suddenly turned off, the stored charge carriers in the base must be expelled for the collector current to cease.\n\nThis phenomenon closely resembles the charging and discharging of a capacitor: altering the collector current requires modifying the base charge profile by injecting or removing electrons or holes. This effect is modeled by a second capacitor between the base and emitter, $C_{b}$, which is typically more influential than the depletion region capacitance. Since $C_{b}$ and $C_{j e}$ are in parallel, they are combined into a single capacitance denoted by $C_{\\pi}$ [Fig. 11.20(c)].\n\nIn integrated circuits, the bipolar transistor is fabricated on a grounded substrate [Fig. 11.21(a)]. The collector-substrate junction remains reverse-biased (for reasons discussed), resulting in a junction capacitance denoted as $C_{C S}$. The complete model is shown in Fig. 11.21(b). We will use this model in our subsequent analysis. In modern integrated-circuit bipolar transistors, $C_{j e}, C_{\\mu}$, and $C_{C S}$ typically measure a few femtofarads for the smallest devices.\n\nimage_name:(a)\ndescription:The image labeled as Figure 11.21(a) illustrates the cross-sectional structure of an integrated bipolar transistor. The diagram highlights the following components and features:\n\n1. **Components and Structure:**\n- **Collector (C):** Located at the top left, connected to the n-type region.\n- **Base (B):** Situated centrally, connected to the p-type region.\n- **Emitter (E):** Found at the top right, connected to the n+ region within the p-type base.\n- **Substrate:** The n-type substrate forms the bottom layer, providing a grounded foundation for the device.\n\n2. **Connections and Interactions:**\n- The collector is linked to the n-type region, which is part of the transistor's main body.\n- The base is connected to the p-type region, separating the collector and emitter regions.\n- The emitter is connected to the n+ region, a heavily doped section within the base.\n- A junction capacitance, denoted as **C_CS**, exists between the collector and substrate, indicating a reverse-biased condition.\n\n3. **Labels, Annotations, and Key Features:**\n- The diagram is marked with C, B, and E to denote the collector, base, and emitter, respectively.\n- The substrate is labeled at the bottom, signifying its role as the grounding layer.\n- The capacitance C_CS is clearly shown between the collector and substrate, emphasizing its importance in the model.\n\nThis diagram visually represents the physical structure of a bipolar transistor within an integrated circuit, focusing on the layout and connections of its components.\n\nimage_name:(b)\ndescription:\n[\nname: Cπ, type: Capacitor, value: Cπ, ports: {Np: B, Nn: E}\nname: Cμ, type: Capacitor, value: Cμ, ports: {Np: B, Nn: C}\nname: CCS, type: Capacitor, value: CCS, ports: {Np: C, Nn: GND}\nname: rπ, type: Resistor, value: rπ, ports: {N1: B, N2: E}\nname: ro, type: Resistor, value: ro, ports: {N1: C, N2: E}\nname: gmvπ, type: VoltageControlledCurrentSource, ports: {Np: C, Nn: E}\n]\nextrainfo:This circuit represents a small-signal model of an NPN transistor, including the collector-substrate capacitance. The capacitances Cπ, Cμ, and CCS are connected between the base-emitter, base-collector, and collector-ground, respectively. The voltage-controlled current source gmvπ is regulated by the voltage across rπ.\n\nimage_name:(c)\ndescription:\n[\nname: Cπ, type: Capacitor, value: Cπ, ports: {Np: B, Nn: E}\nname: Cμ, type: Capacitor, value: Cμ, ports: {Np: B, Nn: C}\nname: CCS, type: Capacitor, value: CCS, ports: {Np: C, Nn: GND}\nname: Q1, type: NPN, ports: {C: C, B: B, E: E}\n]\nextrainfo:This circuit diagram represents the small-signal model of an integrated bipolar transistor, including parasitic capacitances Cπ, Cμ, and CCS. The model is used for frequency response analysis and shows the transistor connected with its associated capacitances and resistances.\n\nFigure 11.21 (a) Structure of an integrated bipolar transistor, (b) small-signal model including collector-substrate capacitance, (c) device symbol with capacitances shown explicitly.\n\nWhen analyzing frequency response, it is beneficial to initially draw the transistor capacitances on the circuit diagram, simplify the result, and then construct the small-signal equivalent circuit. We can therefore represent the transistor as depicted in Fig. 11.21(c).\n\nIdentify all the capacitances in the circuit shown in Fig. 11.22(a).\n\nimage_name:(a)\ndescription:\n[\nname: Q1, type: NPN, ports: {C: c1e2, B: Vin, E: GND}\nname: Q2, type: NPN, ports: {C: Vout, B: Vb1, E: c1e2}\nname: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}\n]\nextrainfo:The circuit diagram represents a cascode amplifier configuration with two NPN transistors (Q1 and Q2). The circuit includes various parasitic capacitances such as Cμ1, Cμ2, Cπ1, Cπ2, CCS1, and CCS2. The resistive load is represented by RC. The output node is labeled as Vout, and the input is at Vin. The circuit is powered by VCC.\n\nimage_name:(b)\ndescription:\n[\nname: Q1, type: NPN, ports: {C: Vout, B: Vin, E: GND}\nname: Q2, type: NPN, ports: {C: Vout, B: Vb, E: Vout}\nname: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}\nname: Cπ1, type: Capacitor, value: Cπ1, ports: {Np: Vin, Nn: GND}\nname: Cμ1, type: Capacitor, value: Cμ1, ports: {Np: Vout, Nn: Vin}\nname: CCS1, type: Capacitor, value: CCS1, ports: {Np: Vout, Nn: GND}\nname: Cπ2, type: Capacitor, value: Cπ2, ports: {Np: Vb, Nn: Vin}\nname: Cμ2, type: Capacitor, value: Cμ2, ports: {Np: Vout, Nn: Vb}\nname: CCS2, type: Capacitor, value: CCS2, ports: {Np: Vout, Nn: GND}\nname: CIE2, type: Capacitor, value: CIE2, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit diagram represents a cascode amplifier with two NPN transistors, Q1 and Q2, and various capacitors indicating high-frequency behavior. The configuration includes common capacitive elements such as Cπ, Cμ, and CCS, which are crucial for modeling the transistor's frequency response. The resistive load is connected to VCC, and the output is taken at Vout. This setup is typical for improving bandwidth and stability in amplifier circuits.\n\nFigure 11.22\n\nSolution From Fig. 11.21(b), we add the three capacitances of each transistor as depicted in Fig. 11.22(b). Interestingly, $C_{C S 1}$ and $C_{\\pi 2}$ appear in parallel, as do $C_{\\mu 2}$ and $C_{C S 2}$.\n\nExercise Construct the small-signal equivalent circuit of the above cascode."
},
{
    "text": "Refer back to Chapter 4, which explains that a bipolar transistor comprises two pn junctions. The depletion regions associated with these junctions ${ }^{6}$ result in capacitances between the base and emitter, designated as $C_{j e}$, and between the base and collector, designated as $C_{\\mu}$ [Fig. 11.20(a)]. By incorporating these capacitances into the small-signal model, we arrive at the representation illustrated in Fig. 11.20(b).\n\nimage_name:(a)\ndescription:The image is divided into three sections labeled (a), (b), and (c), each depicting different models of a bipolar transistor.\n\n1. **Part (a) - Bipolar Transistor Structure:**\n- **Components and Structure:** This diagram presents a cross-sectional view of a bipolar transistor with two pn junctions. It includes an n-type region, a p-type region, and an n+ region, representing the base (B), collector (C), and emitter (E) terminals, respectively.\n- **Connections and Interactions:** Capacitances are shown between the base and collector (C_μ) and between the base and emitter (C_je), arising from the depletion regions at the junctions.\n- **Labels and Annotations:** The terminals are marked as B (Base), C (Collector), and E (Emitter), with the capacitances labeled as C_μ and C_je.\n\n2. **Part (b) - Small-Signal Model with Junction Capacitances:**\n- **Components and Structure:** This section displays a small-signal equivalent circuit model of the bipolar transistor, featuring resistors, capacitors, and a dependent current source.\n- **Connections and Interactions:** The diagram includes C_μ and C_je capacitances connected between the respective terminals. The base-emitter junction is represented by a resistor r_π and a voltage source v_π. A dependent current source, g_m * v_π, signifies the transistor's transconductance, and r_o represents the output resistance.\n- **Labels and Annotations:** The components are identified with their respective symbols and parameters, such as C_μ, C_je, r_π, v_π, g_m, and r_o.\n\n3. **Part (c) - Complete Model Accounting for Base Charge:**\n- **Components and Structure:** This model extends the small-signal model by incorporating additional elements to account for the base charge.\n- **Connections and Interactions:** Similar to part (b), it includes C_μ and C_π capacitances, a resistor r_π, and a dependent current source g_m * v_π. It also features a voltage-controlled current source to account for base charge dynamics.\n- **Labels and Annotations:** The labels include C_μ, C_π, r_π, v_π, g_m, and r_o, along with the base, collector, and emitter terminals.\nimage_name:(b)\ndescription:\n[\nname: C_μ, type: Capacitor, value: C_μ, ports: {Np: B, Nn: C}\nname: C_je, type: Capacitor, value: C_je, ports: {Np: B, Nn: E}\nname: r_π, type: Resistor, value: r_π, ports: {N1: B, N2: E}\nname: g_m v_π, type: CurrentSource, value: g_m v_π, ports: {Np: C, Nn: E}\nname: r_o, type: Resistor, value: r_o, ports: {N1: C, N2: E}\n]\nextrainfo:This circuit represents a high-frequency small-signal model of a bipolar transistor, including junction capacitances C_μ and C_je, and a dependent current source g_m v_π representing the transconductance effect.\nimage_name:(c)\ndescription:\n[\nname: C_μ, type: Capacitor, value: C_μ, ports: {Np: B, Nn: C}\nname: C_π, type: Capacitor, value: C_π, ports: {Np: B, Nn: E}\nname: r_π, type: Resistor, value: r_π, ports: {N1: B, N2: E}\nname: g_m v_π, type: CurrentSource, value: g_m v_π, ports: {Np: C, Nn: E}\nname: r_o, type: Resistor, value: r_o, ports: {N1: C, N2: E}\n]\nextrainfo:This high-frequency small-signal model of a bipolar transistor incorporates junction capacitances C_μ and C_π, as well as resistances and controlled sources to model transistor behavior.\n\nFigure 11.20 (a) Structure of bipolar transistor showing junction capacitances, (b) small-signal model with junction capacitances, (c) complete model accounting for base charge.\n\nHowever, this model is not fully comprehensive because the base-emitter junction exhibits an additional effect that must be considered. As detailed in Chapter 4, the transistor's operation requires a (nonuniform) charge profile in the base region to facilitate the\n\n[^8]diffusion of carriers toward the collector. In other words, when the transistor is abruptly turned on, proper operation commences only after sufficient charge carriers enter the base region and accumulate to establish the necessary profile. Conversely, when the transistor is suddenly turned off, the stored charge carriers in the base must be removed for the collector current to drop to zero.\n\nThis phenomenon closely resembles the charging and discharging of a capacitor: altering the collector current necessitates changing the base charge profile by injecting or removing electrons or holes. This effect is modeled by a second capacitor between the base and emitter, $C_{b}$, which is typically more significant than the depletion region capacitance. Since $C_{b}$ and $C_{j e}$ are in parallel, they are combined into a single capacitance denoted by $C_{\\pi}$ [Fig. 11.20(c)].\n\nIn integrated circuits, the bipolar transistor is fabricated on a grounded substrate [Fig. 11.21(a)]. The collector-substrate junction remains reverse-biased (for reasons explained), exhibiting a junction capacitance denoted as $C_{C S}$. The complete model is shown in Fig. 11.21(b). We will use this model for our subsequent analysis. In modern integrated-circuit bipolar transistors, $C_{j e}, C_{\\mu}$, and $C_{C S}$ are typically on the order of a few femtofarads for the smallest allowable devices.\nimage_name:(a)\ndescription:The image labeled as Figure 11.21(a) depicts the cross-sectional structure of an integrated bipolar transistor. The diagram illustrates a transistor fabricated on a grounded substrate, with key components and features including:\n\n1. **Components and Structure:**\n- **Collector (C):** Located at the top left, connected to the n-type region.\n- **Base (B):** Centrally positioned, connected to the p-type region.\n- **Emitter (E):** Situated at the top right, connected to the n+ region within the p-type base.\n- **Substrate:** The n-type substrate forms the bottom layer, providing a grounded base for the device.\n\n2. **Connections and Interactions:**\n- The collector is connected to the n-type region, which is part of the main body of the transistor.\n- The base is connected to the p-type region, separating the collector and emitter regions.\n- The emitter is connected to the n+ region, a heavily doped section within the base.\n- A junction capacitance, denoted as **C_CS**, exists between the collector and substrate, indicating a reverse-biased collector-substrate junction.\n\n3. **Labels, Annotations, and Key Features:**\n- The diagram is marked with C, B, and E to denote the collector, base, and emitter, respectively.\n- The substrate is labeled at the bottom, indicating its role as the grounding layer.\n- The capacitance C_CS is explicitly shown between the collector and substrate, highlighting its significance in the model.\n\nThis diagram provides a visual representation of the physical structure of a bipolar transistor within an integrated circuit, emphasizing the layout and connections of its components.\nimage_name:(b)\ndescription:\n[\nname: Cπ, type: Capacitor, value: Cπ, ports: {Np: B, Nn: E}\nname: Cμ, type: Capacitor, value: Cμ, ports: {Np: B, Nn: C}\nname: CCS, type: Capacitor, value: CCS, ports: {Np: C, Nn: GND}\nname: rπ, type: Resistor, value: rπ, ports: {N1: B, N2: E}\nname: ro, type: Resistor, value: ro, ports: {N1: C, N2: E}\nname: gmvπ, type: VoltageControlledCurrentSource, ports: {Np: C, Nn: E}\n]\nextrainfo:The circuit represents a small-signal model of an NPN transistor including the collector-substrate capacitance. The capacitances Cπ, Cμ, and CCS are connected between the base-emitter, base-collector, and collector-ground, respectively. The voltage-controlled current source gmvπ is controlled by the voltage across rπ.\nimage_name:(c)\ndescription:\n[\nname: Cπ, type: Capacitor, value: Cπ, ports: {Np: B, Nn: E}\nname: Cμ, type: Capacitor, value: Cμ, ports: {Np: B, Nn: C}\nname: CCS, type: Capacitor, value: CCS, ports: {Np: C, Nn: GND}\nname: Q1, type: NPN, ports: {C: C, B: B, E: E}\n]\nextrainfo:The circuit diagram represents the small-signal model of an integrated bipolar transistor, including parasitic capacitances Cπ, Cμ, and CCS. The model is used to analyze frequency response, and it shows the connection of the transistor with its associated capacitances and resistances.\n\nFigure 11.21 (a) Structure of an integrated bipolar transistor, (b) small-signal model including collector-substrate capacitance, (c) device symbol with capacitances shown explicitly.\n\nWhen analyzing frequency response, it is often beneficial to first depict the transistor capacitances on the circuit diagram, simplify the result, and then construct the small-signal equivalent circuit. We can therefore represent the transistor as shown in Fig. 11.21(c).\n\nIdentify all of the capacitances in the circuit shown in Fig. 11.22(a).\nimage_name:(a)\ndescription:\n[\nname: Q1, type: NPN, ports: {C: c1e2, B: Vin, E: GND}\nname: Q2, type: NPN, ports: {C: Vout, B: Vb1, E: c1e2}\nname: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}\n]\nextrainfo:The circuit diagram represents a cascode amplifier configuration with two NPN transistors (Q1 and Q2). The circuit includes various parasitic capacitances such as Cμ1, Cμ2, Cπ1, Cπ2, CCS1, and CCS2. The resistive load is represented by RC. The output node is labeled as Vout, and the input is at Vin. The circuit is powered by VCC.\nimage_name:(b)\ndescription:\n[\nname: Q1, type: NPN, ports: {C: Vout, B: Vin, E: GND}\nname: Q2, type: NPN, ports: {C: Vout, B: Vb, E: Vout}\nname: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}\nname: Cπ1, type: Capacitor, value: Cπ1, ports: {Np: Vin, Nn: GND}\nname: Cμ1, type: Capacitor, value: Cμ1, ports: {Np: Vout, Nn: Vin}\nname: CCS1, type: Capacitor, value: CCS1, ports: {Np: Vout, Nn: GND}\nname: Cπ2, type: Capacitor, value: Cπ2, ports: {Np: Vb, Nn: Vin}\nname: Cμ2, type: Capacitor, value: Cμ2, ports: {Np: Vout, Nn: Vb}\nname: CCS2, type: Capacitor, value: CCS2, ports: {Np: Vout, Nn: GND}\nname: CIE2, type: Capacitor, value: CIE2, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit diagram represents a cascode amplifier with two NPN transistors, Q1 and Q2, and various capacitors indicating high-frequency behavior. The configuration includes common capacitive elements such as Cπ, Cμ, and CCS, which are crucial for modeling the transistor's frequency response. The resistive load is connected to VCC, and the output is taken at Vout. This setup is typical for improving bandwidth and stability in amplifier circuits.\n\nFigure 11.22\n\nSolution From Fig. 11.21(b), we add the three capacitances of each transistor as depicted in Fig. 11.22(b). Interestingly, $C_{C S 1}$ and $C_{\\pi 2}$ appear in parallel, and so do $C_{\\mu 2}$ and $C_{C S 2}$.\n\nExercise Construct the small-signal equivalent circuit of the above cascode."
},
{
    "text": "Recall from Chapter 4 that a bipolar transistor comprises two pn junctions. The depletion regions associated with these junctions ${ }^{6}$ result in capacitances between the base and emitter, denoted as $C_{j e}$, and between the base and collector, denoted as $C_{\\mu}$ [Fig. 11.20(a)]. By incorporating these capacitances, we can enhance the small-signal model to match the representation shown in Fig. 11.20(b).\n\nimage_name:(a)\ndescription:The image is divided into three parts labeled (a), (b), and (c), each illustrating different models of a bipolar transistor.\n\n1. **Part (a) - Bipolar Transistor Structure:**\n- **Components and Structure:** This diagram presents a cross-sectional view of a bipolar transistor with two pn junctions. It includes an n-type region, a p-type region, and an n+ region, corresponding to the base (B), collector (C), and emitter (E) terminals.\n- **Connections and Interactions:** Capacitances are shown between the base and collector (C_μ) and between the base and emitter (C_je), originating from the depletion regions at the junctions.\n- **Labels and Annotations:** The terminals are marked as B (Base), C (Collector), and E (Emitter), with the capacitances indicated as C_μ and C_je.\n\n2. **Part (b) - Small-Signal Model with Junction Capacitances:**\n- **Components and Structure:** This depicts a small-signal equivalent circuit model of the bipolar transistor, featuring resistors, capacitors, and a dependent current source.\n- **Connections and Interactions:** The diagram illustrates C_μ and C_je capacitances connected across the respective terminals. The base-emitter junction is represented by a resistor r_π and a voltage source v_π. A dependent current source, g_m * v_π, symbolizes the transistor's transconductance, while r_o represents the output resistance.\n- **Labels and Annotations:** Components are labeled with their respective symbols and parameters, such as C_μ, C_je, r_π, v_π, g_m, and r_o.\n\n3. **Part (c) - Complete Model Accounting for Base Charge:**\n- **Components and Structure:** This model extends the small-signal model by incorporating additional elements to account for the base charge.\n- **Connections and Interactions:** Similar to part (b), it includes C_μ and C_π capacitances, a resistor r_π, and a dependent current source g_m * v_π. The model also introduces a voltage-controlled current source to account for base charge dynamics.\n- **Labels and Annotations:** Labels include C_μ, C_π, r_π, v_π, g_m, and r_o, along with the base, collector, and emitter terminals.\n\nimage_name:(b)\ndescription:\n[\nname: C_μ, type: Capacitor, value: C_μ, ports: {Np: B, Nn: C}\nname: C_je, type: Capacitor, value: C_je, ports: {Np: B, Nn: E}\nname: r_π, type: Resistor, value: r_π, ports: {N1: B, N2: E}\nname: g_m v_π, type: CurrentSource, value: g_m v_π, ports: {Np: C, Nn: E}\nname: r_o, type: Resistor, value: r_o, ports: {N1: C, N2: E}\n]\nextrainfo:This circuit represents a high-frequency small-signal model of a bipolar transistor, including junction capacitances C_μ and C_je, as well as a dependent current source g_m v_π representing the transconductance effect.\n\nimage_name:(c)\ndescription:\n[\nname: C_μ, type: Capacitor, value: C_μ, ports: {Np: B, Nn: C}\nname: C_π, type: Capacitor, value: C_π, ports: {Np: B, Nn: E}\nname: r_π, type: Resistor, value: r_π, ports: {N1: B, N2: E}\nname: g_m v_π, type: CurrentSource, value: g_m v_π, ports: {Np: C, Nn: E}\nname: r_o, type: Resistor, value: r_o, ports: {N1: C, N2: E}\n]\nextrainfo:This is a high-frequency small-signal model of a bipolar transistor, incorporating junction capacitances C_μ and C_π, as well as resistances and controlled sources to model transistor behavior.\n\nFigure 11.20 (a) Structure of bipolar transistor showing junction capacitances, (b) small-signal model with junction capacitances, (c) complete model accounting for base charge.\n\nHowever, this model is incomplete because the base-emitter junction exhibits an additional effect that must be considered. As discussed in Chapter 4, the transistor's operation requires a (nonuniform) charge profile in the base region to facilitate the\n\n[^8]diffusion of carriers toward the collector. In other words, when the transistor is suddenly turned on, proper operation does not commence until sufficient charge carriers enter the base region and accumulate to form the necessary profile. Similarly, when the transistor is abruptly turned off, the stored charge carriers in the base must be removed for the collector current to drop to zero.\n\nThis phenomenon resembles the charging and discharging of a capacitor: altering the collector current necessitates changing the base charge profile by injecting or removing electrons or holes. This effect is modeled by a second capacitor between the base and emitter, $C_{b}$, which is typically more significant than the depletion region capacitance. Since $C_{b}$ and $C_{j e}$ are in parallel, they are combined into a single capacitance denoted as $C_{\\pi}$ [Fig. 11.20(c)].\n\nIn integrated circuits, the bipolar transistor is fabricated on a grounded substrate [Fig. 11.21(a)]. The collector-substrate junction remains reverse-biased (for reasons explained), exhibiting a junction capacitance denoted as $C_{C S}$. The complete model is shown in Fig. 11.21(b). We will use this model in our subsequent analysis. In modern integrated-circuit bipolar transistors, $C_{j e}, C_{\\mu}$, and $C_{C S}$ are typically on the order of a few femtofarads for the smallest devices.\n\nimage_name:(a)\ndescription:The image labeled as Figure 11.21(a) illustrates the cross-sectional structure of an integrated bipolar transistor. The diagram details a transistor fabricated on a grounded substrate, highlighting key components and features:\n\n1. **Components and Structure:**\n- **Collector (C):** Located at the top left, connected to the n-type region.\n- **Base (B):** Situated centrally, connected to the p-type region.\n- **Emitter (E):** Positioned at the top right, connected to the n+ region within the p-type base.\n- **Substrate:** The n-type substrate forms the bottom layer, providing a grounded base for the device.\n\n2. **Connections and Interactions:**\n- The collector connects to the n-type region, which is part of the main body of the transistor.\n- The base connects to the p-type region, separating the collector and emitter regions.\n- The emitter connects to the n+ region, a heavily doped section within the base.\n- A junction capacitance, denoted as **C_CS**, exists between the collector and the substrate, indicating a reverse-biased collector-substrate junction.\n\n3. **Labels, Annotations, and Key Features:**\n- The diagram labels C, B, and E for the collector, base, and emitter, respectively.\n- The substrate is labeled at the bottom, indicating its role as the grounding layer.\n- The capacitance C_CS is explicitly shown between the collector and substrate, emphasizing its importance in the model.\n\nThis diagram visually represents the physical structure of a bipolar transistor within an integrated circuit, focusing on the layout and connections of its components.\n\nimage_name:(b)\ndescription:\n[\nname: Cπ, type: Capacitor, value: Cπ, ports: {Np: B, Nn: E}\nname: Cμ, type: Capacitor, value: Cμ, ports: {Np: B, Nn: C}\nname: CCS, type: Capacitor, value: CCS, ports: {Np: C, Nn: GND}\nname: rπ, type: Resistor, value: rπ, ports: {N1: B, N2: E}\nname: ro, type: Resistor, value: ro, ports: {N1: C, N2: E}\nname: gmvπ, type: VoltageControlledCurrentSource, ports: {Np: C, Nn: E}\n]\nextrainfo:The circuit represents a small-signal model of an NPN transistor including the collector-substrate capacitance. The capacitances Cπ, Cμ, and CCS are connected between the base-emitter, base-collector, and collector-ground, respectively. The voltage-controlled current source gmvπ is controlled by the voltage across rπ.\n\nimage_name:(c)\ndescription:\n[\nname: Cπ, type: Capacitor, value: Cπ, ports: {Np: B, Nn: E}\nname: Cμ, type: Capacitor, value: Cμ, ports: {Np: B, Nn: C}\nname: CCS, type: Capacitor, value: CCS, ports: {Np: C, Nn: GND}\nname: Q1, type: NPN, ports: {C: C, B: B, E: E}\n]\nextrainfo:The circuit diagram represents the small-signal model of an integrated bipolar transistor, including parasitic capacitances Cπ, Cμ, and CCS. The model is used to analyze frequency response, showing the connection of the transistor with its associated capacitances and resistances.\n\nFigure 11.21 (a) Structure of an integrated bipolar transistor, (b) small-signal model including collector-substrate capacitance, (c) device symbol with capacitances shown explicitly.\n\nWhen analyzing frequency response, it is often beneficial to first draw the transistor capacitances on the circuit diagram, simplify the result, and then construct the small-signal equivalent circuit. We can thus represent the transistor as shown in Fig. 11.21(c).\n\nIdentify all capacitances in the circuit shown in Fig. 11.22(a).\n\nimage_name:(a)\ndescription:\n[\nname: Q1, type: NPN, ports: {C: c1e2, B: Vin, E: GND}\nname: Q2, type: NPN, ports: {C: Vout, B: Vb1, E: c1e2}\nname: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}\n]\nextrainfo:The circuit diagram represents a cascode amplifier configuration with two NPN transistors (Q1 and Q2). The circuit includes various parasitic capacitances such as Cμ1, Cμ2, Cπ1, Cπ2, CCS1, and CCS2. The resistive load is represented by RC. The output node is labeled as Vout, and the input is at Vin. The circuit is powered by VCC.\n\nimage_name:(b)\ndescription:\n[\nname: Q1, type: NPN, ports: {C: Vout, B: Vin, E: GND}\nname: Q2, type: NPN, ports: {C: Vout, B: Vb, E: Vout}\nname: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}\nname: Cπ1, type: Capacitor, value: Cπ1, ports: {Np: Vin, Nn: GND}\nname: Cμ1, type: Capacitor, value: Cμ1, ports: {Np: Vout, Nn: Vin}\nname: CCS1, type: Capacitor, value: CCS1, ports: {Np: Vout, Nn: GND}\nname: Cπ2, type: Capacitor, value: Cπ2, ports: {Np: Vb, Nn: Vin}\nname: Cμ2, type: Capacitor, value: Cμ2, ports: {Np: Vout, Nn: Vb}\nname: CCS2, type: Capacitor, value: CCS2, ports: {Np: Vout, Nn: GND}\nname: CIE2, type: Capacitor, value: CIE2, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit diagram represents a cascode amplifier with two NPN transistors, Q1 and Q2, and various capacitors indicating high-frequency behavior. The configuration includes common capacitive elements such as Cπ, Cμ, and CCS, which are crucial for modeling the transistor's frequency response. The resistive load is connected to VCC, and the output is taken at Vout. This setup is typical for improving bandwidth and stability in amplifier circuits.\n\nFigure 11.22\n\nSolution From Fig. 11.21(b), we add the three capacitances of each transistor as depicted in Fig. 11.22(b). Interestingly, $C_{C S 1}$ and $C_{\\pi 2}$ appear in parallel, as do $C_{\\mu 2}$ and $C_{C S 2}$.\n\nExercise Construct the small-signal equivalent circuit of the above cascode."
},
{
    "text": "Refer to Chapter 4 for the understanding that a bipolar transistor comprises two pn junctions. The depletion regions associated with these junctions ${ }^{6}$ result in a capacitance between the base and emitter, represented as $C_{j e}$, and another between the base and collector, denoted as $C_{\\mu}$ [Fig. 11.20(a)]. By incorporating these capacitances into the small-signal model, we obtain the representation illustrated in Fig. 11.20(b).\n\nimage_name:(a)\ndescription:The image is divided into three sections labeled (a), (b), and (c), each depicting different models of a bipolar transistor.\n\n1. **Part (a) - Bipolar Transistor Structure:**\n- **Components and Structure:** This cross-sectional view of a bipolar transistor features two pn junctions, including an n-type region, a p-type region, and an n+ region, representing the base (B), collector (C), and emitter (E) terminals.\n- **Connections and Interactions:** Capacitances are shown between the base and collector (C_μ) and between the base and emitter (C_je), originating from the depletion regions at the junctions.\n- **Labels and Annotations:** The terminals are marked as B (Base), C (Collector), and E (Emitter), with the capacitances labeled C_μ and C_je.\n\n2. **Part (b) - Small-Signal Model with Junction Capacitances:**\n- **Components and Structure:** This model is a small-signal equivalent circuit of the bipolar transistor, featuring resistors, capacitors, and a dependent current source.\n- **Connections and Interactions:** The diagram includes C_μ and C_je capacitances connected between the respective terminals. The base-emitter junction is represented by a resistor r_π and a voltage source v_π. A dependent current source, g_m * v_π, symbolizes the transistor's transconductance, and r_o represents the output resistance.\n- **Labels and Annotations:** Components are labeled with their respective symbols and parameters, such as C_μ, C_je, r_π, v_π, g_m, and r_o.\n\n3. **Part (c) - Complete Model Considering Base Charge:**\n- **Components and Structure:** This model extends the small-signal model by adding elements to account for the base charge.\n- **Connections and Interactions:** Similar to part (b), it includes C_μ and C_π capacitances, a resistor r_π, and a dependent current source g_m * v_π. Additionally, a voltage-controlled current source models the base charge dynamics.\n- **Labels and Annotations:** Labels include C_μ, C_π, r_π, v_π, g_m, and r_o, along with the base, collector, and emitter terminals.\n\nimage_name:(b)\ndescription:\n[\nname: C_μ, type: Capacitor, value: C_μ, ports: {Np: B, Nn: C}\nname: C_je, type: Capacitor, value: C_je, ports: {Np: B, Nn: E}\nname: r_π, type: Resistor, value: r_π, ports: {N1: B, N2: E}\nname: g_m v_π, type: CurrentSource, value: g_m v_π, ports: {Np: C, Nn: E}\nname: r_o, type: Resistor, value: r_o, ports: {N1: C, N2: E}\n]\nextrainfo:This circuit represents a high-frequency small-signal model of a bipolar transistor, including junction capacitances C_μ and C_je, and a dependent current source g_m v_π representing the transconductance effect.\n\nimage_name:(c)\ndescription:\n[\nname: C_μ, type: Capacitor, value: C_μ, ports: {Np: B, Nn: C}\nname: C_π, type: Capacitor, value: C_π, ports: {Np: B, Nn: E}\nname: r_π, type: Resistor, value: r_π, ports: {N1: B, N2: E}\nname: g_m v_π, type: CurrentSource, value: g_m v_π, ports: {Np: C, Nn: E}\nname: r_o, type: Resistor, value: r_o, ports: {N1: C, N2: E}\n]\nextrainfo:This high-frequency small-signal model of a bipolar transistor incorporates junction capacitances C_μ and C_π, along with resistances and controlled sources to model transistor behavior.\n\nFigure 11.20 (a) Structure of bipolar transistor showing junction capacitances, (b) small-signal model with junction capacitances, (c) complete model accounting for base charge.\n\nHowever, this model is not fully comprehensive as it overlooks another effect in the base-emitter junction. As detailed in Chapter 4, the transistor's operation necessitates a (nonuniform) charge profile in the base region to facilitate the\n\n[^8]diffusion of carriers toward the collector. In essence, if the transistor is abruptly activated, it only functions correctly once sufficient charge carriers enter the base region and accumulate to form the required profile. Conversely, if the transistor is suddenly deactivated, the stored charge carriers in the base must be expelled for the collector current to cease.\n\nThis phenomenon closely resembles the charging and discharging of a capacitor: altering the collector current requires modifying the base charge profile by injecting or removing electrons or holes. This effect is represented by a second capacitor between the base and emitter, $C_{b}$, which is generally more impactful than the depletion region capacitance. Since $C_{b}$ and $C_{j e}$ are in parallel, they are combined into a single capacitance, $C_{\\pi}$ [Fig. 11.20(c)].\n\nIn integrated circuits, the bipolar transistor is fabricated on a grounded substrate [Fig. 11.21(a)]. The collector-substrate junction remains reverse-biased (for reasons explained), resulting in a junction capacitance denoted as $C_{C S}$. The comprehensive model is shown in Fig. 11.21(b). We will utilize this model in our subsequent analysis. In modern integrated-circuit bipolar transistors, $C_{j e}, C_{\\mu}$, and $C_{C S}$ typically measure a few femtofarads for the smallest devices.\n\nimage_name:(a)\ndescription:Figure 11.21(a) illustrates the cross-sectional structure of an integrated bipolar transistor. The diagram details a transistor constructed on a grounded substrate, highlighting key components and features:\n\n1. **Components and Structure:**\n- **Collector (C):** Located at the top left, connected to the n-type region.\n- **Base (B):** Centrally positioned, linked to the p-type region.\n- **Emitter (E):** Situated at the top right, connected to the n+ region within the p-type base.\n- **Substrate:** The n-type substrate forms the base layer, providing a grounded foundation for the device.\n\n2. **Connections and Interactions:**\n- The collector connects to the n-type region, integral to the transistor's main body.\n- The base links to the p-type region, separating the collector and emitter.\n- The emitter connects to the n+ region, a heavily doped segment within the base.\n- A junction capacitance, **C_CS**, exists between the collector and substrate, indicating a reverse-biased junction.\n\n3. **Labels, Annotations, and Key Features:**\n- The diagram labels C, B, and E for the collector, base, and emitter, respectively.\n- The substrate is labeled at the bottom, underscoring its grounding role.\n- The capacitance C_CS is explicitly shown between the collector and substrate, emphasizing its importance in the model.\n\nThis diagram visually represents the physical structure of a bipolar transistor within an integrated circuit, focusing on the layout and connections of its components.\n\nimage_name:(b)\ndescription:\n[\nname: Cπ, type: Capacitor, value: Cπ, ports: {Np: B, Nn: E}\nname: Cμ, type: Capacitor, value: Cμ, ports: {Np: B, Nn: C}\nname: CCS, type: Capacitor, value: CCS, ports: {Np: C, Nn: GND}\nname: rπ, type: Resistor, value: rπ, ports: {N1: B, N2: E}\nname: ro, type: Resistor, value: ro, ports: {N1: C, N2: E}\nname: gmvπ, type: VoltageControlledCurrentSource, ports: {Np: C, Nn: E}\n]\nextrainfo:This circuit represents a small-signal model of an NPN transistor, including the collector-substrate capacitance. Capacitances Cπ, Cμ, and CCS are connected between the base-emitter, base-collector, and collector-ground, respectively. The voltage-controlled current source gmvπ is controlled by the voltage across rπ.\n\nimage_name:(c)\ndescription:\n[\nname: Cπ, type: Capacitor, value: Cπ, ports: {Np: B, Nn: E}\nname: Cμ, type: Capacitor, value: Cμ, ports: {Np: B, Nn: C}\nname: CCS, type: Capacitor, value: CCS, ports: {Np: C, Nn: GND}\nname: Q1, type: NPN, ports: {C: C, B: B, E: E}\n]\nextrainfo:This circuit diagram represents the small-signal model of an integrated bipolar transistor, including parasitic capacitances Cπ, Cμ, and CCS. The model is used for frequency response analysis, showing the transistor's connection with its associated capacitances and resistances.\n\nFigure 11.21 (a) Structure of an integrated bipolar transistor, (b) small-signal model including collector-substrate capacitance, (c) device symbol with capacitances shown explicitly.\n\nWhen analyzing frequency response, it is beneficial to initially depict the transistor capacitances on the circuit diagram, simplify the configuration, and then construct the small-signal equivalent circuit. Thus, we can represent the transistor as shown in Fig. 11.21(c).\n\nIdentify all capacitances in the circuit depicted in Fig. 11.22(a).\n\nimage_name:(a)\ndescription:\n[\nname: Q1, type: NPN, ports: {C: c1e2, B: Vin, E: GND}\nname: Q2, type: NPN, ports: {C: Vout, B: Vb1, E: c1e2}\nname: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}\n]\nextrainfo:This circuit diagram represents a cascode amplifier configuration with two NPN transistors (Q1 and Q2). The circuit includes various parasitic capacitances such as Cμ1, Cμ2, Cπ1, Cπ2, CCS1, and CCS2. The resistive load is represented by RC. The output node is labeled Vout, and the input is at Vin. The circuit is powered by VCC.\n\nimage_name:(b)\ndescription:\n[\nname: Q1, type: NPN, ports: {C: Vout, B: Vin, E: GND}\nname: Q2, type: NPN, ports: {C: Vout, B: Vb, E: Vout}\nname: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}\nname: Cπ1, type: Capacitor, value: Cπ1, ports: {Np: Vin, Nn: GND}\nname: Cμ1, type: Capacitor, value: Cμ1, ports: {Np: Vout, Nn: Vin}\nname: CCS1, type: Capacitor, value: CCS1, ports: {Np: Vout, Nn: GND}\nname: Cπ2, type: Capacitor, value: Cπ2, ports: {Np: Vb, Nn: Vin}\nname: Cμ2, type: Capacitor, value: Cμ2, ports: {Np: Vout, Nn: Vb}\nname: CCS2, type: Capacitor, value: CCS2, ports: {Np: Vout, Nn: GND}\nname: CIE2, type: Capacitor, value: CIE2, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:This circuit diagram represents a cascode amplifier with two NPN transistors, Q1 and Q2, and various capacitors indicating high-frequency behavior. The configuration includes common capacitive elements such as Cπ, Cμ, and CCS, crucial for modeling the transistor's frequency response. The resistive load is connected to VCC, and the output is taken at Vout. This setup is typical for enhancing bandwidth and stability in amplifier circuits.\n\nFigure 11.22\n\nSolution From Fig. 11.21(b), we add the three capacitances of each transistor as depicted in Fig. 11.22(b). Notably, $C_{C S 1}$ and $C_{\\pi 2}$ appear in parallel, as do $C_{\\mu 2}$ and $C_{C S 2}$.\n\nExercise Construct the small-signal equivalent circuit of the above cascode."
},
{
    "text": "Refer back to Chapter 4, where it is noted that a bipolar transistor comprises two pn junctions. The depletion regions associated with these junctions ${ }^{6}$ result in a capacitance between the base and emitter, designated as $C_{j e}$, and another between the base and collector, designated as $C_{\\mu}$ [Fig. 11.20(a)]. By incorporating these capacitances into the small-signal model, we arrive at the representation illustrated in Fig. 11.20(b).\n\nimage_name:(a)\ndescription:The image is divided into three sections labeled (a), (b), and (c), each depicting different models of a bipolar transistor.\n\n1. **Part (a) - Bipolar Transistor Structure:**\n- **Components and Structure:** This cross-sectional view of a bipolar transistor features two pn junctions, an n-type region, a p-type region, and an n+ region, representing the base (B), collector (C), and emitter (E) terminals.\n- **Connections and Interactions:** Capacitances are shown between the base and collector (C_μ) and between the base and emitter (C_je), arising from the depletion regions at the junctions.\n- **Labels and Annotations:** The terminals are marked as B (Base), C (Collector), and E (Emitter), with the capacitances labeled as C_μ and C_je.\n\n2. **Part (b) - Small-Signal Model with Junction Capacitances:**\n- **Components and Structure:** This is a small-signal equivalent circuit of the bipolar transistor, featuring resistors, capacitors, and a dependent current source.\n- **Connections and Interactions:** The diagram includes C_μ and C_je capacitances connected between the terminals. The base-emitter junction is represented by a resistor r_π and a voltage source v_π. A dependent current source, g_m * v_π, symbolizes the transistor's transconductance, and r_o represents the output resistance.\n- **Labels and Annotations:** Components are labeled with their respective symbols and parameters, such as C_μ, C_je, r_π, v_π, g_m, and r_o.\n\n3. **Part (c) - Model Accounting for Base Charge:**\n- **Components and Structure:** This model extends the small-signal model by incorporating additional elements to account for the base charge.\n- **Connections and Interactions:** Similar to part (b), it includes C_μ and C_π capacitances, a resistor r_π, and a dependent current source g_m * v_π. It also features a voltage-controlled current source to model base charge dynamics.\n- **Labels and Annotations:** Labels include C_μ, C_π, r_π, v_π, g_m, and r_o, along with the base, collector, and emitter terminals.\n\nimage_name:(b)\ndescription:\n[\nname: C_μ, type: Capacitor, value: C_μ, ports: {Np: B, Nn: C}\nname: C_je, type: Capacitor, value: C_je, ports: {Np: B, Nn: E}\nname: r_π, type: Resistor, value: r_π, ports: {N1: B, N2: E}\nname: g_m v_π, type: CurrentSource, value: g_m v_π, ports: {Np: C, Nn: E}\nname: r_o, type: Resistor, value: r_o, ports: {N1: C, N2: E}\n]\nextrainfo:This high-frequency small-signal model of a bipolar transistor includes junction capacitances C_μ and C_je, as well as a dependent current source g_m v_π representing the transconductance effect.\n\nimage_name:(c)\ndescription:\n[\nname: C_μ, type: Capacitor, value: C_μ, ports: {Np: B, Nn: C}\nname: C_π, type: Capacitor, value: C_π, ports: {Np: B, Nn: E}\nname: r_π, type: Resistor, value: r_π, ports: {N1: B, N2: E}\nname: g_m v_π, type: CurrentSource, value: g_m v_π, ports: {Np: C, Nn: E}\nname: r_o, type: Resistor, value: r_o, ports: {N1: C, N2: E}\n]\nextrainfo:This high-frequency small-signal model of a bipolar transistor incorporates junction capacitances C_μ and C_π, along with resistances and controlled sources to model transistor behavior.\n\nFigure 11.20 (a) Structure of bipolar transistor showing junction capacitances, (b) small-signal model with junction capacitances, (c) complete model accounting for base charge.\n\nHowever, this model is not complete because the base-emitter junction exhibits an additional effect that must be considered. As detailed in Chapter 4, the transistor's operation requires a (nonuniform) charge profile in the base region to facilitate the\n\n[^8]diffusion of carriers toward the collector. In other words, when the transistor is suddenly activated, proper operation does not commence until sufficient charge carriers enter the base region and accumulate to create the necessary profile. Similarly, when the transistor is abruptly turned off, the stored charge carriers in the base must be removed for the collector current to drop to zero.\n\nThis phenomenon resembles the charging and discharging of a capacitor: to alter the collector current, we must change the base charge profile by injecting or removing electrons or holes. This effect is modeled by a second capacitor between the base and emitter, $C_{b}$, which is typically more significant than the depletion region capacitance. Since $C_{b}$ and $C_{j e}$ are in parallel, they are combined into a single capacitance denoted by $C_{\\pi}$ [Fig. 11.20(c)].\n\nIn integrated circuits, the bipolar transistor is fabricated on a grounded substrate [Fig. 11.21(a)]. The collector-substrate junction remains reverse-biased (why?), resulting in a junction capacitance denoted as $C_{C S}$. The complete model is shown in Fig. 11.21(b). We will use this model in our subsequent analysis. In modern integrated-circuit bipolar transistors, $C_{j e}, C_{\\mu}$, and $C_{C S}$ are typically on the order of a few femtofarads for the smallest allowable devices.\n\nimage_name:(a)\ndescription:The image labeled as Figure 11.21(a) depicts the cross-sectional structure of an integrated bipolar transistor. The diagram illustrates a transistor fabricated on a grounded substrate, with key components and features as follows:\n\n1. **Components and Structure:**\n- **Collector (C):** Located at the top left, connected to the n-type region.\n- **Base (B):** Positioned centrally, connected to the p-type region.\n- **Emitter (E):** Situated at the top right, connected to the n+ region within the p-type base.\n- **Substrate:** The n-type substrate forms the bottom layer, providing a grounded base for the device.\n\n2. **Connections and Interactions:**\n- The collector is connected to the n-type region, which is part of the transistor's main body.\n- The base is connected to the p-type region, separating the collector and emitter regions.\n- The emitter is connected to the n+ region, a heavily doped section within the base.\n- A junction capacitance, denoted as **C_CS**, exists between the collector and the substrate, indicating a reverse-biased collector-substrate junction.\n\n3. **Labels, Annotations, and Key Features:**\n- The diagram is labeled with C, B, and E to denote the collector, base, and emitter, respectively.\n- The substrate is labeled at the bottom, highlighting its role as the grounding layer.\n- The capacitance C_CS is explicitly shown between the collector and substrate, emphasizing its importance in the model.\n\nThis diagram provides a visual representation of the physical structure of a bipolar transistor within an integrated circuit, focusing on the layout and connections of its components.\n\nimage_name:(b)\ndescription:\n[\nname: Cπ, type: Capacitor, value: Cπ, ports: {Np: B, Nn: E}\nname: Cμ, type: Capacitor, value: Cμ, ports: {Np: B, Nn: C}\nname: CCS, type: Capacitor, value: CCS, ports: {Np: C, Nn: GND}\nname: rπ, type: Resistor, value: rπ, ports: {N1: B, N2: E}\nname: ro, type: Resistor, value: ro, ports: {N1: C, N2: E}\nname: gmvπ, type: VoltageControlledCurrentSource, ports: {Np: C, Nn: E}\n]\nextrainfo:This circuit represents a small-signal model of an NPN transistor, including the collector-substrate capacitance. The capacitances Cπ, Cμ, and CCS are connected between the base-emitter, base-collector, and collector-ground, respectively. The voltage-controlled current source gmvπ is controlled by the voltage across rπ.\n\nimage_name:(c)\ndescription:\n[\nname: Cπ, type: Capacitor, value: Cπ, ports: {Np: B, Nn: E}\nname: Cμ, type: Capacitor, value: Cμ, ports: {Np: B, Nn: C}\nname: CCS, type: Capacitor, value: CCS, ports: {Np: C, Nn: GND}\nname: Q1, type: NPN, ports: {C: C, B: B, E: E}\n]\nextrainfo:This circuit diagram represents the small-signal model of an integrated bipolar transistor, including parasitic capacitances Cπ, Cμ, and CCS. The model is used for frequency response analysis and shows the connection of the transistor with its associated capacitances and resistances.\n\nFigure 11.21 (a) Structure of an integrated bipolar transistor, (b) small-signal model including collector-substrate capacitance, (c) device symbol with capacitances shown explicitly.\n\nWhen analyzing frequency response, it is often beneficial to first draw the transistor capacitances on the circuit diagram, simplify the result, and then construct the small-signal equivalent circuit. We can therefore represent the transistor as shown in Fig. 11.21(c).\n\nIdentify all of the capacitances in the circuit shown in Fig. 11.22(a).\n\nimage_name:(a)\ndescription:\n[\nname: Q1, type: NPN, ports: {C: c1e2, B: Vin, E: GND}\nname: Q2, type: NPN, ports: {C: Vout, B: Vb1, E: c1e2}\nname: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}\n]\nextrainfo:The circuit diagram represents a cascode amplifier configuration with two NPN transistors (Q1 and Q2). The circuit includes various parasitic capacitances such as Cμ1, Cμ2, Cπ1, Cπ2, CCS1, and CCS2. The resistive load is represented by RC. The output node is labeled as Vout, and the input is at Vin. The circuit is powered by VCC.\n\nimage_name:(b)\ndescription:\n[\nname: Q1, type: NPN, ports: {C: Vout, B: Vin, E: GND}\nname: Q2, type: NPN, ports: {C: Vout, B: Vb, E: Vout}\nname: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}\nname: Cπ1, type: Capacitor, value: Cπ1, ports: {Np: Vin, Nn: GND}\nname: Cμ1, type: Capacitor, value: Cμ1, ports: {Np: Vout, Nn: Vin}\nname: CCS1, type: Capacitor, value: CCS1, ports: {Np: Vout, Nn: GND}\nname: Cπ2, type: Capacitor, value: Cπ2, ports: {Np: Vb, Nn: Vin}\nname: Cμ2, type: Capacitor, value: Cμ2, ports: {Np: Vout, Nn: Vb}\nname: CCS2, type: Capacitor, value: CCS2, ports: {Np: Vout, Nn: GND}\nname: CIE2, type: Capacitor, value: CIE2, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit diagram represents a cascode amplifier with two NPN transistors, Q1 and Q2, and various capacitors indicating high-frequency behavior. The configuration includes common capacitive elements such as Cπ, Cμ, and CCS, which are crucial for modeling the transistor's frequency response. The resistive load is connected to VCC, and the output is taken at Vout. This setup is typical for improving bandwidth and stability in amplifier circuits.\n\nFigure 11.22\n\nSolution From Fig. 11.21(b), we add the three capacitances of each transistor as depicted in Fig. 11.22(b). Interestingly, $C_{C S 1}$ and $C_{\\pi 2}$ appear in parallel, and so do $C_{\\mu 2}$ and $C_{C S 2}$.\n\nExercise Construct the small-signal equivalent circuit of the above cascode."
},
{
    "text": "Refer back to Chapter 4, where it is noted that a bipolar transistor comprises two pn junctions. The depletion regions associated with these junctions ${ }^{6}$ result in capacitances between the base and emitter, designated as $C_{j e}$, and between the base and collector, designated as $C_{\\mu}$ [Fig. 11.20(a)]. By incorporating these capacitances into the small-signal model, we derive the representation illustrated in Fig. 11.20(b).\n\nimage_name:(a)\ndescription:The image is divided into three sections labeled (a), (b), and (c), each depicting different models of a bipolar transistor.\n\n1. **Part (a) - Bipolar Transistor Structure:**\n- **Components and Structure:** This diagram presents a cross-sectional view of a bipolar transistor with two pn junctions. It features an n-type region, a p-type region, and an n+ region, corresponding to the base (B), collector (C), and emitter (E) terminals, respectively.\n- **Connections and Interactions:** Capacitances are shown between the base and collector (C_μ) and between the base and emitter (C_je), originating from the depletion regions at the junctions.\n- **Labels and Annotations:** The terminals are marked as B (Base), C (Collector), and E (Emitter), with the capacitances labeled as C_μ and C_je.\n\n2. **Part (b) - Small-Signal Model with Junction Capacitances:**\n- **Components and Structure:** This section displays a small-signal equivalent circuit model of the bipolar transistor, including resistors, capacitors, and a dependent current source.\n- **Connections and Interactions:** The diagram illustrates C_μ and C_je capacitances connected across the respective terminals. The base-emitter junction is represented by a resistor r_π and a voltage source v_π. A dependent current source, g_m * v_π, signifies the transistor's transconductance, and r_o represents the output resistance.\n- **Labels and Annotations:** Components are identified with their respective symbols and parameters, such as C_μ, C_je, r_π, v_π, g_m, and r_o.\n\n3. **Part (c) - Comprehensive Model Accounting for Base Charge:**\n- **Components and Structure:** This model extends the small-signal model by incorporating additional elements to account for the base charge.\n- **Connections and Interactions:** Similar to part (b), it includes C_μ and C_π capacitances, a resistor r_π, and a dependent current source g_m * v_π. It also features a voltage-controlled current source to account for base charge dynamics.\n- **Labels and Annotations:** Labels include C_μ, C_π, r_π, v_π, g_m, and r_o, along with the base, collector, and emitter terminals.\n\nimage_name:(b)\ndescription:\n[\nname: C_μ, type: Capacitor, value: C_μ, ports: {Np: B, Nn: C}\nname: C_je, type: Capacitor, value: C_je, ports: {Np: B, Nn: E}\nname: r_π, type: Resistor, value: r_π, ports: {N1: B, N2: E}\nname: g_m v_π, type: CurrentSource, value: g_m v_π, ports: {Np: C, Nn: E}\nname: r_o, type: Resistor, value: r_o, ports: {N1: C, N2: E}\n]\nextrainfo:This circuit represents a high-frequency small-signal model of a bipolar transistor, incorporating junction capacitances C_μ and C_je, along with a dependent current source g_m v_π representing the transconductance effect.\n\nimage_name:(c)\ndescription:\n[\nname: C_μ, type: Capacitor, value: C_μ, ports: {Np: B, Nn: C}\nname: C_π, type: Capacitor, value: C_π, ports: {Np: B, Nn: E}\nname: r_π, type: Resistor, value: r_π, ports: {N1: B, N2: E}\nname: g_m v_π, type: CurrentSource, value: g_m v_π, ports: {Np: C, Nn: E}\nname: r_o, type: Resistor, value: r_o, ports: {N1: C, N2: E}\n]\nextrainfo:This is a high-frequency small-signal model of a bipolar transistor, including junction capacitances C_μ and C_π, as well as resistances and controlled sources to model transistor behavior.\n\nFigure 11.20 (a) Structure of bipolar transistor showing junction capacitances, (b) small-signal model with junction capacitances, (c) complete model accounting for base charge.\n\nHowever, this model is not fully comprehensive because the base-emitter junction exhibits an additional effect that must be considered. As detailed in Chapter 4, the transistor's operation necessitates a (nonuniform) charge profile in the base region to facilitate the\n\n[^8]diffusion of carriers toward the collector. In other words, when the transistor is abruptly turned on, proper operation does not commence until sufficient charge carriers enter the base region and accumulate to establish the required profile. Similarly, when the transistor is suddenly turned off, the stored charge carriers in the base must be removed for the collector current to cease.\n\nThis phenomenon closely resembles the charging and discharging of a capacitor: to alter the collector current, we must modify the base charge profile by injecting or removing electrons or holes. This effect is modeled by a second capacitor between the base and emitter, $C_{b}$, which is typically more significant than the depletion region capacitance. Since $C_{b}$ and $C_{j e}$ are in parallel, they are combined into a single capacitance denoted by $C_{\\pi}$ [Fig. 11.20(c)].\n\nIn integrated circuits, the bipolar transistor is fabricated on a grounded substrate [Fig. 11.21(a)]. The collector-substrate junction remains reverse-biased (for reasons explained), resulting in a junction capacitance denoted by $C_{C S}$. The complete model is shown in Fig. 11.21(b). We will use this model in our subsequent analysis. In modern integrated-circuit bipolar transistors, $C_{j e}, C_{\\mu}$, and $C_{C S}$ are typically in the range of a few femtofarads for the smallest permissible devices.\n\nimage_name:(a)\ndescription:The image labeled as Figure 11.21(a) depicts the cross-sectional structure of an integrated bipolar transistor. The diagram shows a transistor fabricated on a grounded substrate, with key components and features as follows:\n\n1. **Components and Structure:**\n- **Collector (C):** Located at the top left, connected to the n-type region.\n- **Base (B):** Situated centrally, connected to the p-type region.\n- **Emitter (E):** Found at the top right, connected to the n+ region within the p-type base.\n- **Substrate:** The n-type substrate forms the bottom layer, providing a grounded base for the device.\n\n2. **Connections and Interactions:**\n- The collector is connected to the n-type region, which is part of the transistor's main body.\n- The base is connected to the p-type region, separating the collector and emitter regions.\n- The emitter is connected to the n+ region, a heavily doped section within the base.\n- A junction capacitance, denoted as **C_CS**, exists between the collector and substrate, indicating a reverse-biased collector-substrate junction.\n\n3. **Labels, Annotations, and Key Features:**\n- The diagram is marked with C, B, and E to denote the collector, base, and emitter, respectively.\n- The substrate is labeled at the bottom, indicating its role as the grounding layer.\n- The capacitance C_CS is explicitly shown between the collector and substrate, highlighting its importance in the model.\n\nThis diagram provides a visual representation of the physical structure of a bipolar transistor within an integrated circuit, emphasizing the layout and connections of its components.\n\nimage_name:(b)\ndescription:\n[\nname: Cπ, type: Capacitor, value: Cπ, ports: {Np: B, Nn: E}\nname: Cμ, type: Capacitor, value: Cμ, ports: {Np: B, Nn: C}\nname: CCS, type: Capacitor, value: CCS, ports: {Np: C, Nn: GND}\nname: rπ, type: Resistor, value: rπ, ports: {N1: B, N2: E}\nname: ro, type: Resistor, value: ro, ports: {N1: C, N2: E}\nname: gmvπ, type: VoltageControlledCurrentSource, ports: {Np: C, Nn: E}\n]\nextrainfo:This circuit represents a small-signal model of an NPN transistor, including the collector-substrate capacitance. Capacitances Cπ, Cμ, and CCS are connected between the base-emitter, base-collector, and collector-ground, respectively. The voltage-controlled current source gmvπ is controlled by the voltage across rπ.\n\nimage_name:(c)\ndescription:\n[\nname: Cπ, type: Capacitor, value: Cπ, ports: {Np: B, Nn: E}\nname: Cμ, type: Capacitor, value: Cμ, ports: {Np: B, Nn: C}\nname: CCS, type: Capacitor, value: CCS, ports: {Np: C, Nn: GND}\nname: Q1, type: NPN, ports: {C: C, B: B, E: E}\n]\nextrainfo:This circuit diagram represents the small-signal model of an integrated bipolar transistor, including parasitic capacitances Cπ, Cμ, and CCS. The model is used to analyze frequency response and shows the connection of the transistor with its associated capacitances and resistances.\n\nFigure 11.21 (a) Structure of an integrated bipolar transistor, (b) small-signal model including collector-substrate capacitance, (c) device symbol with capacitances shown explicitly.\n\nWhen analyzing frequency response, it is often beneficial to first illustrate the transistor capacitances on the circuit diagram, simplify the result, and then construct the small-signal equivalent circuit. We can thus represent the transistor as shown in Fig. 11.21(c).\n\nIdentify all the capacitances in the circuit shown in Fig. 11.22(a).\n\nimage_name:(a)\ndescription:\n[\nname: Q1, type: NPN, ports: {C: c1e2, B: Vin, E: GND}\nname: Q2, type: NPN, ports: {C: Vout, B: Vb1, E: c1e2}\nname: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}\n]\nextrainfo:The circuit diagram represents a cascode amplifier configuration with two NPN transistors (Q1 and Q2). The circuit includes various parasitic capacitances such as Cμ1, Cμ2, Cπ1, Cπ2, CCS1, and CCS2. The resistive load is represented by RC. The output node is labeled as Vout, and the input is at Vin. The circuit is powered by VCC.\n\nimage_name:(b)\ndescription:\n[\nname: Q1, type: NPN, ports: {C: Vout, B: Vin, E: GND}\nname: Q2, type: NPN, ports: {C: Vout, B: Vb, E: Vout}\nname: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}\nname: Cπ1, type: Capacitor, value: Cπ1, ports: {Np: Vin, Nn: GND}\nname: Cμ1, type: Capacitor, value: Cμ1, ports: {Np: Vout, Nn: Vin}\nname: CCS1, type: Capacitor, value: CCS1, ports: {Np: Vout, Nn: GND}\nname: Cπ2, type: Capacitor, value: Cπ2, ports: {Np: Vb, Nn: Vin}\nname: Cμ2, type: Capacitor, value: Cμ2, ports: {Np: Vout, Nn: Vb}\nname: CCS2, type: Capacitor, value: CCS2, ports: {Np: Vout, Nn: GND}\nname: CIE2, type: Capacitor, value: CIE2, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit diagram represents a cascode amplifier with two NPN transistors, Q1 and Q2, and various capacitors indicating high-frequency behavior. The configuration includes common capacitive elements such as Cπ, Cμ, and CCS, which are crucial for modeling the transistor's frequency response. The resistive load is connected to VCC, and the output is taken at Vout. This setup is typical for improving bandwidth and stability in amplifier circuits.\n\nFigure 11.22\n\nSolution From Fig. 11.21(b), we add the three capacitances of each transistor as depicted in Fig. 11.22(b). Interestingly, $C_{C S 1}$ and $C_{\\pi 2}$ appear in parallel, and so do $C_{\\mu 2}$ and $C_{C S 2}$.\n\nExercise Construct the small-signal equivalent circuit of the above cascode."
},
{
    "text": "Refer to Chapter 4 for the composition of the bipolar transistor, which comprises two pn junctions. The depletion regions associated with these junctions ${ }^{6}$ result in capacitances between the base and emitter, designated as $C_{j e}$, and between the base and collector, designated as $C_{\\mu}$ [Fig. 11.20(a)]. By incorporating these capacitances into the small-signal model, we arrive at the representation illustrated in Fig. 11.20(b).\n\nimage_name:(a)\ndescription:This image comprises three sections labeled (a), (b), and (c), each depicting different models of a bipolar transistor.\n\n1. **Section (a) - Bipolar Transistor Structure:**\n- **Components and Structure:** The diagram presents a cross-sectional view of a bipolar transistor with two pn junctions. It features an n-type region, a p-type region, and an n+ region, representing the base (B), collector (C), and emitter (E) terminals, respectively.\n- **Connections and Interactions:** Capacitances are shown between the base and collector (C_μ) and between the base and emitter (C_je), originating from the depletion regions at the junctions.\n- **Labels and Annotations:** The terminals are marked as B (Base), C (Collector), and E (Emitter), with the capacitances indicated as C_μ and C_je.\n\n2. **Section (b) - Small-Signal Model with Junction Capacitances:**\n- **Components and Structure:** This depicts a small-signal equivalent circuit model of the bipolar transistor, including resistors, capacitors, and a dependent current source.\n- **Connections and Interactions:** The diagram illustrates C_μ and C_je capacitances connected between the respective terminals. The base-emitter junction is represented by a resistor r_π and a voltage source v_π. A dependent current source, g_m * v_π, symbolizes the transistor's transconductance, and r_o represents the output resistance.\n- **Labels and Annotations:** The components are identified with their respective symbols and parameters, such as C_μ, C_je, r_π, v_π, g_m, and r_o.\n\n3. **Section (c) - Complete Model Accounting for Base Charge:**\n- **Components and Structure:** This model extends the small-signal model by incorporating additional elements to account for the base charge.\n- **Connections and Interactions:** Similar to section (b), it includes C_μ and C_π capacitances, a resistor r_π, and a dependent current source g_m * v_π. The model also introduces a voltage-controlled current source to account for base charge dynamics.\n- **Labels and Annotations:** The labels include C_μ, C_π, r_π, v_π, g_m, and r_o, along with the base, collector, and emitter terminals.\n\nimage_name:(b)\ndescription:\n[\nname: C_μ, type: Capacitor, value: C_μ, ports: {Np: B, Nn: C}\nname: C_je, type: Capacitor, value: C_je, ports: {Np: B, Nn: E}\nname: r_π, type: Resistor, value: r_π, ports: {N1: B, N2: E}\nname: g_m v_π, type: CurrentSource, value: g_m v_π, ports: {Np: C, Nn: E}\nname: r_o, type: Resistor, value: r_o, ports: {N1: C, N2: E}\n]\nextrainfo:This circuit represents a high-frequency small-signal model of a bipolar transistor, incorporating junction capacitances C_μ and C_je, as well as a dependent current source g_m v_π representing the transconductance effect.\n\nimage_name:(c)\ndescription:\n[\nname: C_μ, type: Capacitor, value: C_μ, ports: {Np: B, Nn: C}\nname: C_π, type: Capacitor, value: C_π, ports: {Np: B, Nn: E}\nname: r_π, type: Resistor, value: r_π, ports: {N1: B, N2: E}\nname: g_m v_π, type: CurrentSource, value: g_m v_π, ports: {Np: C, Nn: E}\nname: r_o, type: Resistor, value: r_o, ports: {N1: C, N2: E}\n]\nextrainfo:This is a high-frequency small-signal model of a bipolar transistor, incorporating junction capacitances C_μ and C_π, as well as resistances and controlled sources to model transistor behavior.\n\nFigure 11.20 (a) Structure of bipolar transistor showing junction capacitances, (b) small-signal model with junction capacitances, (c) complete model accounting for base charge.\n\nHowever, this model is not complete because the base-emitter junction exhibits an additional effect that must be considered. As discussed in Chapter 4, the transistor's operation requires a (nonuniform) charge profile in the base region to facilitate the\n\n[^8]diffusion of carriers toward the collector. In other words, when the transistor is abruptly turned on, proper operation does not commence until sufficient charge carriers enter the base region and accumulate to establish the necessary profile. Similarly, when the transistor is suddenly turned off, the stored charge carriers in the base must be removed for the collector current to drop to zero.\n\nThis phenomenon closely resembles the charging and discharging of a capacitor: to alter the collector current, we must modify the base charge profile by injecting or removing electrons or holes. This effect is modeled by a second capacitor between the base and emitter, $C_{b}$, which is typically more significant than the depletion region capacitance. Since $C_{b}$ and $C_{j e}$ are in parallel, they are combined into a single capacitance denoted by $C_{\\pi}$ [Fig. 11.20(c)].\n\nIn integrated circuits, the bipolar transistor is fabricated on a grounded substrate [Fig. 11.21(a)]. The collector-substrate junction remains reverse-biased (for what reason?), exhibiting a junction capacitance denoted by $C_{C S}$. The complete model is shown in Fig. 11.21(b). We will use this model in our subsequent analysis. In modern integrated-circuit bipolar transistors, $C_{j e}, C_{\\mu}$, and $C_{C S}$ are typically on the order of a few femtofarads for the smallest devices.\n\nimage_name:(a)\ndescription:This image, labeled as Figure 11.21(a), illustrates the cross-sectional structure of an integrated bipolar transistor. The diagram shows a transistor fabricated on a grounded substrate, with key components and features as follows:\n\n1. **Components and Structure:**\n- **Collector (C):** Located at the top left, connected to the n-type region.\n- **Base (B):** Positioned centrally, connected to the p-type region.\n- **Emitter (E):** Situated at the top right, connected to the n+ region within the p-type base.\n- **Substrate:** The n-type substrate forms the bottom layer, providing a grounded base for the device.\n\n2. **Connections and Interactions:**\n- The collector is connected to the n-type region, which is part of the transistor's main body.\n- The base is connected to the p-type region, separating the collector and emitter regions.\n- The emitter is connected to the n+ region, a heavily doped section within the base.\n- A junction capacitance, denoted as **C_CS**, exists between the collector and the substrate, indicating a reverse-biased collector-substrate junction.\n\n3. **Labels, Annotations, and Key Features:**\n- The diagram is marked with C, B, and E to denote the collector, base, and emitter, respectively.\n- The substrate is labeled at the bottom, indicating its role as the grounding layer.\n- The capacitance C_CS is explicitly shown between the collector and substrate, highlighting its importance in the model.\n\nThis diagram provides a visual representation of the physical structure of a bipolar transistor within an integrated circuit, emphasizing the layout and connections of its components.\n\nimage_name:(b)\ndescription:\n[\nname: Cπ, type: Capacitor, value: Cπ, ports: {Np: B, Nn: E}\nname: Cμ, type: Capacitor, value: Cμ, ports: {Np: B, Nn: C}\nname: CCS, type: Capacitor, value: CCS, ports: {Np: C, Nn: GND}\nname: rπ, type: Resistor, value: rπ, ports: {N1: B, N2: E}\nname: ro, type: Resistor, value: ro, ports: {N1: C, N2: E}\nname: gmvπ, type: VoltageControlledCurrentSource, ports: {Np: C, Nn: E}\n]\nextrainfo:This circuit represents a small-signal model of an NPN transistor including the collector-substrate capacitance. The capacitances Cπ, Cμ, and CCS are connected between the base-emitter, base-collector, and collector-ground, respectively. The voltage-controlled current source gmvπ is controlled by the voltage across rπ.\n\nimage_name:(c)\ndescription:\n[\nname: Cπ, type: Capacitor, value: Cπ, ports: {Np: B, Nn: E}\nname: Cμ, type: Capacitor, value: Cμ, ports: {Np: B, Nn: C}\nname: CCS, type: Capacitor, value: CCS, ports: {Np: C, Nn: GND}\nname: Q1, type: NPN, ports: {C: C, B: B, E: E}\n]\nextrainfo:This circuit diagram represents the small-signal model of an integrated bipolar transistor, including parasitic capacitances Cπ, Cμ, and CCS. The model is used for frequency response analysis and shows the connection of the transistor with its associated capacitances and resistances.\n\nFigure 11.21 (a) Structure of an integrated bipolar transistor, (b) small-signal model including collector-substrate capacitance, (c) device symbol with capacitances shown explicitly.\n\nWhen analyzing frequency response, it is often beneficial to first draw the transistor capacitances on the circuit diagram, simplify the result, and then construct the small-signal equivalent circuit. We can therefore represent the transistor as shown in Fig. 11.21(c).\n\nIdentify all the capacitances in the circuit shown in Fig. 11.22(a).\n\nimage_name:(a)\ndescription:\n[\nname: Q1, type: NPN, ports: {C: c1e2, B: Vin, E: GND}\nname: Q2, type: NPN, ports: {C: Vout, B: Vb1, E: c1e2}\nname: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}\n]\nextrainfo:This circuit diagram represents a cascode amplifier configuration with two NPN transistors (Q1 and Q2). The circuit includes various parasitic capacitances such as Cμ1, Cμ2, Cπ1, Cπ2, CCS1, and CCS2. The resistive load is represented by RC. The output node is labeled as Vout, and the input is at Vin. The circuit is powered by VCC.\n\nimage_name:(b)\ndescription:\n[\nname: Q1, type: NPN, ports: {C: Vout, B: Vin, E: GND}\nname: Q2, type: NPN, ports: {C: Vout, B: Vb, E: Vout}\nname: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}\nname: Cπ1, type: Capacitor, value: Cπ1, ports: {Np: Vin, Nn: GND}\nname: Cμ1, type: Capacitor, value: Cμ1, ports: {Np: Vout, Nn: Vin}\nname: CCS1, type: Capacitor, value: CCS1, ports: {Np: Vout, Nn: GND}\nname: Cπ2, type: Capacitor, value: Cπ2, ports: {Np: Vb, Nn: Vin}\nname: Cμ2, type: Capacitor, value: Cμ2, ports: {Np: Vout, Nn: Vb}\nname: CCS2, type: Capacitor, value: CCS2, ports: {Np: Vout, Nn: GND}\nname: CIE2, type: Capacitor, value: CIE2, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:This circuit diagram represents a cascode amplifier with two NPN transistors, Q1 and Q2, and various capacitors indicating high-frequency behavior. The configuration includes common capacitive elements such as Cπ, Cμ, and CCS, which are crucial for modeling the transistor's frequency response. The resistive load is connected to VCC, and the output is taken at Vout. This setup is typical for improving bandwidth and stability in amplifier circuits.\n\nFigure 11.22\n\nSolution From Fig. 11.21(b), we add the three capacitances of each transistor as depicted in Fig. 11.22(b). Interestingly, $C_{C S 1}$ and $C_{\\pi 2}$ appear in parallel, and so do $C_{\\mu 2}$ and $C_{C S 2}$.\n\nExercise Construct the small-signal equivalent circuit of the above cascode."
},
{
    "text": "Recall from Chapter 4 that the bipolar transistor comprises two pn junctions. The depletion region associated with these junctions ${ }^{6}$ results in a capacitance between the base and emitter, designated as $C_{j e}$, and another between the base and collector, designated as $C_{\\mu}$ [Fig. 11.20(a)]. We can then incorporate these capacitances into the small-signal model to achieve the representation illustrated in Fig. 11.20(b).\n\nimage_name:(a)\ndescription:The image comprises three sections labeled (a), (b), and (c), each depicting different models of a bipolar transistor.\n\n1. **Part (a) - Bipolar Transistor Structure:**\n- **Components and Structure:** This diagram presents a cross-sectional view of a bipolar transistor with two pn junctions. It features an n-type region, a p-type region, and an n+ region, representing the base (B), collector (C), and emitter (E) terminals, respectively.\n- **Connections and Interactions:** Capacitances are shown between the base and collector (C_μ) and between the base and emitter (C_je), arising from the depletion regions at the junctions.\n- **Labels and Annotations:** The terminals are marked as B (Base), C (Collector), and E (Emitter), with the capacitances labeled as C_μ and C_je.\n\n2. **Part (b) - Small-Signal Model with Junction Capacitances:**\n- **Components and Structure:** This section illustrates a small-signal equivalent circuit model of the bipolar transistor, including resistors, capacitors, and a dependent current source.\n- **Connections and Interactions:** The diagram displays C_μ and C_je capacitances connected between the respective terminals. The base-emitter junction is represented by a resistor r_π and a voltage source v_π. A dependent current source, g_m * v_π, symbolizes the transistor's transconductance, and r_o represents the output resistance.\n- **Labels and Annotations:** The components are identified with their respective symbols and parameters, such as C_μ, C_je, r_π, v_π, g_m, and r_o.\n\n3. **Part (c) - Complete Model Considering Base Charge:**\n- **Components and Structure:** This model extends the small-signal model by incorporating additional elements to account for the base charge.\n- **Connections and Interactions:** Similar to part (b), it includes C_μ and C_π capacitances, a resistor r_π, and a dependent current source g_m * v_π. The model also incorporates a voltage-controlled current source to account for base charge dynamics.\n- **Labels and Annotations:** The labels include C_μ, C_π, r_π, v_π, g_m, and r_o, along with the base, collector, and emitter terminals.\n\nimage_name:(b)\ndescription:\n[\nname: C_μ, type: Capacitor, value: C_μ, ports: {Np: B, Nn: C}\nname: C_je, type: Capacitor, value: C_je, ports: {Np: B, Nn: E}\nname: r_π, type: Resistor, value: r_π, ports: {N1: B, N2: E}\nname: g_m v_π, type: CurrentSource, value: g_m v_π, ports: {Np: C, Nn: E}\nname: r_o, type: Resistor, value: r_o, ports: {N1: C, N2: E}\n]\nextrainfo:This circuit represents a high-frequency small-signal model of a bipolar transistor, including junction capacitances C_μ and C_je, as well as a dependent current source g_m v_π representing the transconductance effect.\n\nimage_name:(c)\ndescription:\n[\nname: C_μ, type: Capacitor, value: C_μ, ports: {Np: B, Nn: C}\nname: C_π, type: Capacitor, value: C_π, ports: {Np: B, Nn: E}\nname: r_π, type: Resistor, value: r_π, ports: {N1: B, N2: E}\nname: g_m v_π, type: CurrentSource, value: g_m v_π, ports: {Np: C, Nn: E}\nname: r_o, type: Resistor, value: r_o, ports: {N1: C, N2: E}\n]\nextrainfo:This high-frequency small-signal model of a bipolar transistor incorporates junction capacitances C_μ and C_π, as well as resistances and controlled sources to model transistor behavior.\n\nFigure 11.20 (a) Structure of bipolar transistor showing junction capacitances, (b) small-signal model with junction capacitances, (c) complete model accounting for base charge.\n\nHowever, this model is incomplete because the base-emitter junction exhibits an additional effect that must be considered. As discussed in Chapter 4, the transistor's operation requires a (nonuniform) charge profile in the base region to facilitate the\n\n[^8]diffusion of carriers toward the collector. In other words, when the transistor is suddenly activated, proper operation does not commence until sufficient charge carriers enter the base region and accumulate to create the necessary profile. Similarly, when the transistor is abruptly turned off, the stored charge carriers in the base must be removed for the collector current to decrease to zero.\n\nThis phenomenon resembles the charging and discharging of a capacitor: to alter the collector current, we must modify the base charge profile by injecting or removing electrons or holes. This effect is modeled by a second capacitor between the base and emitter, $C_{b}$, which is typically more significant than the depletion region capacitance. Since $C_{b}$ and $C_{j e}$ are in parallel, they are combined into a single capacitance denoted by $C_{\\pi}$ [Fig. 11.20(c)].\n\nIn integrated circuits, the bipolar transistor is fabricated on a grounded substrate [Fig. 11.21(a)]. The collector-substrate junction remains reverse-biased (why?), resulting in a junction capacitance denoted as $C_{C S}$. The complete model is shown in Fig. 11.21(b). We will use this model in our subsequent analysis. In modern integrated-circuit bipolar transistors, $C_{j e}, C_{\\mu}$, and $C_{C S}$ are typically on the order of a few femtofarads for the smallest allowable devices.\n\nimage_name:(a)\ndescription:The image labeled as Figure 11.21(a) depicts the cross-sectional structure of an integrated bipolar transistor. The diagram illustrates a transistor fabricated on a grounded substrate, with key components and features as follows:\n\n1. **Components and Structure:**\n- **Collector (C):** Located at the top left, connected to the n-type region.\n- **Base (B):** Positioned centrally, connected to the p-type region.\n- **Emitter (E):** Situated at the top right, connected to the n+ region within the p-type base.\n- **Substrate:** The n-type substrate forms the bottom layer, providing a grounded base for the device.\n\n2. **Connections and Interactions:**\n- The collector is connected to the n-type region, which is part of the main body of the transistor.\n- The base is connected to the p-type region, separating the collector and emitter regions.\n- The emitter is connected to the n+ region, a heavily doped section within the base.\n- A junction capacitance, denoted as **C_CS**, exists between the collector and the substrate, indicating a reverse-biased collector-substrate junction.\n\n3. **Labels, Annotations, and Key Features:**\n- The diagram is marked with C, B, and E to denote the collector, base, and emitter, respectively.\n- The substrate is labeled at the bottom, indicating its role as the grounding layer.\n- The capacitance C_CS is explicitly shown between the collector and substrate, highlighting its significance in the model.\n\nThis diagram provides a visual representation of the physical structure of a bipolar transistor within an integrated circuit, emphasizing the layout and connections of its components.\n\nimage_name:(b)\ndescription:\n[\nname: Cπ, type: Capacitor, value: Cπ, ports: {Np: B, Nn: E}\nname: Cμ, type: Capacitor, value: Cμ, ports: {Np: B, Nn: C}\nname: CCS, type: Capacitor, value: CCS, ports: {Np: C, Nn: GND}\nname: rπ, type: Resistor, value: rπ, ports: {N1: B, N2: E}\nname: ro, type: Resistor, value: ro, ports: {N1: C, N2: E}\nname: gmvπ, type: VoltageControlledCurrentSource, ports: {Np: C, Nn: E}\n]\nextrainfo:This circuit represents a small-signal model of an NPN transistor including the collector-substrate capacitance. The capacitances Cπ, Cμ, and CCS are connected between the base-emitter, base-collector, and collector-ground, respectively. The voltage-controlled current source gmvπ is controlled by the voltage across rπ.\n\nimage_name:(c)\ndescription:\n[\nname: Cπ, type: Capacitor, value: Cπ, ports: {Np: B, Nn: E}\nname: Cμ, type: Capacitor, value: Cμ, ports: {Np: B, Nn: C}\nname: CCS, type: Capacitor, value: CCS, ports: {Np: C, Nn: GND}\nname: Q1, type: NPN, ports: {C: C, B: B, E: E}\n]\nextrainfo:This circuit diagram represents the small-signal model of an integrated bipolar transistor, including parasitic capacitances Cπ, Cμ, and CCS. The model is used to analyze frequency response, showing the connection of the transistor with its associated capacitances and resistances.\n\nFigure 11.21 (a) Structure of an integrated bipolar transistor, (b) small-signal model including collector-substrate capacitance, (c) device symbol with capacitances shown explicitly.\n\nIn analyzing frequency response, it is often beneficial to first draw the transistor capacitances on the circuit diagram, simplify the result, and then construct the small-signal equivalent circuit. We can thus represent the transistor as shown in Fig. 11.21(c).\n\nIdentify all of the capacitances in the circuit shown in Fig. 11.22(a).\n\nimage_name:(a)\ndescription:\n[\nname: Q1, type: NPN, ports: {C: c1e2, B: Vin, E: GND}\nname: Q2, type: NPN, ports: {C: Vout, B: Vb1, E: c1e2}\nname: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}\n]\nextrainfo:The circuit diagram represents a cascode amplifier configuration with two NPN transistors (Q1 and Q2). The circuit includes various parasitic capacitances such as Cμ1, Cμ2, Cπ1, Cπ2, CCS1, and CCS2. The resistive load is represented by RC. The output node is labeled as Vout, and the input is at Vin. The circuit is powered by VCC.\n\nimage_name:(b)\ndescription:\n[\nname: Q1, type: NPN, ports: {C: Vout, B: Vin, E: GND}\nname: Q2, type: NPN, ports: {C: Vout, B: Vb, E: Vout}\nname: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}\nname: Cπ1, type: Capacitor, value: Cπ1, ports: {Np: Vin, Nn: GND}\nname: Cμ1, type: Capacitor, value: Cμ1, ports: {Np: Vout, Nn: Vin}\nname: CCS1, type: Capacitor, value: CCS1, ports: {Np: Vout, Nn: GND}\nname: Cπ2, type: Capacitor, value: Cπ2, ports: {Np: Vb, Nn: Vin}\nname: Cμ2, type: Capacitor, value: Cμ2, ports: {Np: Vout, Nn: Vb}\nname: CCS2, type: Capacitor, value: CCS2, ports: {Np: Vout, Nn: GND}\nname: CIE2, type: Capacitor, value: CIE2, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit diagram represents a cascode amplifier with two NPN transistors, Q1 and Q2, and various capacitors indicating high-frequency behavior. The configuration includes common capacitive elements such as Cπ, Cμ, and CCS, which are crucial for modeling the transistor's frequency response. The resistive load is connected to VCC, and the output is taken at Vout. This setup is typical for improving bandwidth and stability in amplifier circuits.\n\nFigure 11.22\n\nSolution From Fig. 11.21(b), we add the three capacitances of each transistor as depicted in Fig. 11.22(b). Interestingly, $C_{C S 1}$ and $C_{\\pi 2}$ appear in parallel, and so do $C_{\\mu 2}$ and $C_{C S 2}$.\n\nExercise Construct the small-signal equivalent circuit of the above cascode."
},
{
    "text": "Our examination of the MOSFET structure in Chapter 6 highlighted several capacitive components. We now delve deeper into these capacitances within the device.\n\nAs depicted in Fig. 11.23(a), the MOSFET exhibits three main capacitances: one between the gate and the channel (referred to as the \"gate oxide capacitance\" and represented by $W L C_{o x}$), and two linked to the reverse-biased source-bulk and drain-bulk junctions. The first component poses a modeling challenge due to the absence of a \"channel\" in the transistor model. Consequently, this capacitance must be divided into two parts: one between the gate and the source, and another between the gate and the drain [Fig. 11.23(b)]. The precise division of this capacitance is beyond this book's scope, but in the saturation region, $C_{1}$ is approximately $2 / 3$ of the gate-channel capacitance, while $C_{2} \\approx 0$.\n\nimage_name:(a)\ndescription:Figure 11.23(a) illustrates the cross-sectional view of a MOS (Metal-Oxide-Semiconductor) device, emphasizing its various capacitances. Key elements in the diagram include:\n\n1. **p-substrate**: This serves as the base layer of the semiconductor device, positioned at the bottom and labeled as 'p-substrate', forming the foundation of the MOS structure.\n\n2. **n+ Regions**: Two heavily doped n-type regions, labeled 'n+', represent the source and drain of the MOSFET. These regions are embedded within the p-substrate and are vital for the device's operation.\n\n3. **Gate Structure**: A horizontal structure above the n+ regions and p-substrate comprises the gate, including a thin insulating layer (likely silicon dioxide) and a conductive gate terminal on top.\n\n4. **Capacitances**: The diagram indicates capacitance elements related to the MOS structure, depicted as small capacitor symbols connected to the n+ regions and the gate. These represent the capacitances between the gate and the source/drain regions, crucial for modeling the MOSFET's behavior.\n\nThe image provides a simplified visualization of the MOSFET, focusing on the capacitance interactions between the gate and the source/drain regions, essential for understanding the device's electrical characteristics.\n\n(a)\nimage_name:Figure 11.23 (b)\ndescription:[\nname: C1, type: Capacitor, value: C1, ports: {Np: Gate, Nn: Drain}\nname: C2, type: Capacitor, value: C2, ports: {Np: Gate, Nn: Source}\n]\nextrainfo:This diagram shows the division of gate-channel capacitance between the source and drain in a MOSFET, with C1 and C2 representing the capacitances between the gate and the drain/source regions.\n\n(b)\n\nFigure 11.23 (a) MOS device structure with various capacitances, (b) division of gate-channel capacitance between source and drain.\n\nTwo additional capacitances in the MOSFET become significant in certain circuits. As shown in Fig. 11.24, these components arise from both the physical overlap of the gate with the source/drain areas ${ }^{7}$ and the fringe field lines between the gate edge and the top of the S/D regions. Known as the gate-drain or gate-source \"overlap\" capacitance, this symmetric effect remains even when the MOSFET is off.\n\nimage_name:Figure 11.24\ndescription:This diagram illustrates the overlap capacitance between the gate and drain of a MOSFET, a critical component in high-frequency MOSFET models resulting from physical overlap and fringe field lines between the gate and drain regions.\n\nFigure 11.24 Overlap capacitance between gate and drain (or source).\n\nWe now develop the high-frequency model of the MOSFET. As shown in Fig. 11.25(a), this model includes: (1) the capacitance between the gate and source, $C_{G S}$ (including the overlap component); (2) the capacitance between the gate and drain (including the overlap component); (3) the junction capacitances between the source and bulk and the drain and bulk, $C_{S B}$ and $C_{D B}$, respectively. (The bulk is assumed to be at ac ground.)\n\n[^9]image_name:(a)\ndescription:[\nname: C_GS, type: Capacitor, value: C_GS, ports: {Np: G, Nn: S}\nname: C_GD, type: Capacitor, value: C_GD, ports: {Np: G, Nn: D}\nname: C_DB, type: Capacitor, value: C_DB, ports: {Np: D, Nn: GND}\nname: C_SB, type: Capacitor, value: C_SB, ports: {Np: S, Nn: GND}\nname: g_m V_GS, type: VoltageControlledCurrentSource, ports: {Np: D, Nn: S}\nname: r_O, type: Resistor, value: r_O, ports: {N1: D, N2: S}\n]\nextrainfo:This diagram represents the high-frequency model of a MOSFET, featuring various capacitances and a voltage-controlled current source, with the bulk assumed to be at AC ground.\n\n(a)\nimage_name:Figure 11.25(b)\ndescription:[\nname: C_GS, type: Capacitor, value: C_GS, ports: {Np: G, Nn: S}\nname: C_GD, type: Capacitor, value: C_GD, ports: {Np: G, Nn: D}\nname: C_DB, type: Capacitor, value: C_DB, ports: {Np: D, Nn: GND}\nname: C_SB, type: Capacitor, value: C_SB, ports: {Np: S, Nn: GND}\nname: NMOS, type: NMOS, ports: {S: S, D: D, G: G}\n]\nextrainfo:This diagram depicts the high-frequency model of a MOSFET, including gate-source (C_GS), gate-drain (C_GD), drain-bulk (C_DB), and source-bulk (C_SB) capacitances, with the bulk assumed to be at AC ground.\n\n(b)\n\nFigure 11.25 (a) High-frequency MOSFET model, (b) device symbol with explicit capacitances.\n\nAs discussed in Section 11.2.1, we often depict the capacitances on the transistor symbol [Fig. 11.25(b)] before constructing the small-signal model.\n\nExample: Identify all capacitances in the circuit shown in Fig. 11.26(a).\n11.13\n\nimage_name:Figure 11.26(a)\ndescription:[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vout}\n]\nextrainfo:The circuit comprises an NMOS transistor M1 and a PMOS transistor M2, forming a common-source amplifier with a diode-connected load. Various parasitic capacitances are included, reflecting a high-frequency small-signal model. M2 is diode-connected, and several capacitances are combined at the output node.\n\nimage_name:Figure 11.26(b)\ndescription:[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vout}\nname: CGS2, type: Capacitor, value: CGS2, ports: {Np: Vout, Nn: VDD}\nname: CSB2, type: Capacitor, value: CSB2, ports: {Np: S2, Nn: VDD}\nname: CDB2, type: Capacitor, value: CDB2, ports: {Np: Vout, Nn: VDD}\nname: CGD2, type: Capacitor, value: CGD2, ports: {Np: Vout, Nn: Vout}\nname: CGD1, type: Capacitor, value: CGD1, ports: {Np: Vin, Nn: Vout}\nname: CGS1, type: Capacitor, value: CGS1, ports: {Np: Vin, Nn: GND}\nname: CSB1, type: Capacitor, value: CSB1, ports: {Np: GND, Nn: GND}\nname: CDB1, type: Capacitor, value: CDB1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:This high-frequency model of a MOSFET amplifier includes M2 as a diode-connected PMOS. The capacitors represent various parasitic capacitances in the circuit. The output is at Vout, and the input is at Vin. The circuit minimizes parasitic effects by connecting certain capacitances to ground.\n\nimage_name:Figure 11.26(c)\ndescription:[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vout}\nname: CGS1, type: Capacitor, value: CGS1, ports: {Np: Vin, Nn: GND}\nname: CGD1, type: Capacitor, value: CGD1, ports: {Np: Vin, Nn: Vout}\nname: CSB1, type: Capacitor, value: CSB1, ports: {Np: GND, Nn: GND}\nname: CSB2, type: Capacitor, value: CSB2, ports: {Np: VDD, Nn: VDD}\nname: CDB1, type: Capacitor, value: CDB1, ports: {Np: Vout, Nn: GND}\nname: CDB2, type: Capacitor, value: CDB2, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:This high-frequency model of a MOSFET amplifier features M2 as a diode-connected PMOS. Capacitors CDB1, CDB2, and CGS2 are in parallel at the output node Vout. CSB1 and CSB2 are connected to AC ground, and CGD2 is shorted out.\n\nFigure 11.26\n\nSolution: By adding the four capacitances of each device from Fig. 11.25, we obtain the circuit in Fig. 11.26(b). Note that $C_{S B 1}$ and $C_{S B 2}$ are shorted to ac ground at both ends, $C_{G D 2}$ is shorted \"out,\" and $C_{D B 1}, C_{D B 2}$, and $C_{G S 2}$ appear in parallel at the output node. The circuit thus simplifies to that shown in Fig. 11.26(c).\n\nExercise:\nConsidering that $M_{2}$ is a diode-connected device, construct the small-signal equivalent circuit of the amplifier."
},
{
    "text": "Our analysis of the MOSFET structure in Chapter 6 uncovered several capacitive elements. We now delve deeper into these capacitances within the device.\n\nAs depicted in Fig. 11.23(a), the MOSFET exhibits three primary capacitances: one between the gate and the channel (referred to as the \"gate oxide capacitance\" and represented by $W L C_{o x}$), and two associated with the reverse-biased source-bulk and drain-bulk junctions. The first component poses a modeling challenge due to the absence of a \"channel\" in the transistor model. Consequently, we must split this capacitance into two parts: one between the gate and the source, and another between the gate and the drain [Fig. 11.23(b)]. The precise division of this capacitance is beyond this book's scope, but in the saturation region, $C_{1}$ is approximately $2 / 3$ of the gate-channel capacitance, while $C_{2} \\approx 0$.\nimage_name:(a)\ndescription:The image labeled as Figure 11.23(a) illustrates the cross-sectional structure of a MOS (Metal-Oxide-Semiconductor) device, highlighting its various capacitances. The main components visible in the diagram include:\n\n1. **p-substrate**: This base layer of the semiconductor device is shown at the bottom of the diagram, labeled as 'p-substrate', forming the foundation of the MOS structure.\n\n2. **n+ Regions**: Two heavily doped n-type regions, labeled as 'n+', represent the source and drain of the MOSFET. These regions are embedded within the p-substrate and are essential for the device's operation.\n\n3. **Gate Structure**: Above the n+ regions and the p-substrate, a horizontal structure signifies the gate, comprising a thin insulating layer (likely silicon dioxide) and a conductive gate terminal on top.\n\n4. **Capacitances**: The diagram indicates capacitance elements related to the MOS structure, depicted as small capacitor symbols connected to the n+ regions and the gate. These represent the capacitances between the gate and the source/drain regions, crucial for modeling the MOSFET's behavior.\n\nThe image provides a simplified view of the MOSFET, focusing on the interaction between the gate and the source/drain regions through capacitances, essential for understanding the device's electrical characteristics and behavior in circuits.\n\n(a)\nimage_name:Figure 11.23 (b)\ndescription:\n[\nname: C1, type: Capacitor, value: C1, ports: {Np: Gate, Nn: Drain}\nname: C2, type: Capacitor, value: C2, ports: {Np: Gate, Nn: Source}\n]\nextrainfo:This diagram shows the division of gate-channel capacitance between the source and drain in a MOSFET. C1 and C2 represent the capacitances between the gate and the drain/source regions.\n\n(b)\n\nFigure 11.23 (a) Structure of MOS device showing various capacitances, (b) division of gate-channel capacitance between source and drain.\n\nTwo additional capacitances in the MOSFET become significant in certain circuits. As shown in Fig. 11.24, these components arise from both the physical overlap of the gate with the source/drain areas ${ }^{7}$ and the fringe field lines between the gate edge and the top of the S/D regions. Known as the gate-drain or gate-source \"overlap\" capacitance, this symmetric effect remains even when the MOSFET is off.\nimage_name:Figure 11.24\ndescription:The diagram illustrates the overlap capacitance between the gate and drain of a MOSFET, a critical component in high-frequency MOSFET models, resulting from physical overlap and fringe field lines between the gate and drain regions.\n\nFigure 11.24 Overlap capacitance between gate and drain (or source).\n\nWe now develop the high-frequency model of the MOSFET. As shown in Fig. 11.25(a), this model comprises: (1) the capacitance between the gate and source, $C_{G S}$ (including the overlap component); (2) the capacitance between the gate and drain (including the overlap component); (3) the junction capacitances between the source and bulk and the drain and bulk, $C_{S B}$ and $C_{D B}$, respectively. (We assume the bulk is at ac ground.)\n\n[^9]image_name:(a)\ndescription:\n[\nname: C_GS, type: Capacitor, value: C_GS, ports: {Np: G, Nn: S}\nname: C_GD, type: Capacitor, value: C_GD, ports: {Np: G, Nn: D}\nname: C_DB, type: Capacitor, value: C_DB, ports: {Np: D, Nn: GND}\nname: C_SB, type: Capacitor, value: C_SB, ports: {Np: S, Nn: GND}\nname: g_m V_GS, type: VoltageControlledCurrentSource, ports: {Np: D, Nn: S}\nname: r_O, type: Resistor, value: r_O, ports: {N1: D, N2: S}\n]\nextrainfo:This diagram represents the high-frequency model of a MOSFET with various capacitances and a voltage-controlled current source, assuming the bulk is at AC ground.\n\n(a)\nimage_name:Figure 11.25(b)\ndescription:\n[\nname: C_GS, type: Capacitor, value: C_GS, ports: {Np: G, Nn: S}\nname: C_GD, type: Capacitor, value: C_GD, ports: {Np: G, Nn: D}\nname: C_DB, type: Capacitor, value: C_DB, ports: {Np: D, Nn: GND}\nname: C_SB, type: Capacitor, value: C_SB, ports: {Np: S, Nn: GND}\nname: NMOS, type: NMOS, ports: {S: S, D: D, G: G}\n]\nextrainfo:This diagram represents the high-frequency model of a MOSFET with various capacitances, including gate-source (C_GS), gate-drain (C_GD), drain-bulk (C_DB), and source-bulk (C_SB) capacitances, assuming the bulk is at AC ground.\n\n(b)\n\nFigure 11.25 (a) High-frequency model of MOSFET, (b) device symbol with capacitances shown explicitly.\n\nAs discussed in Section 11.2.1, we often depict the capacitances on the transistor symbol [Fig. 11.25(b)] before constructing the small-signal model.\n\nExample Identify all capacitances in the circuit of Fig. 11.26(a).\n11.13\nimage_name:Figure 11.26(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vout}\n]\nextrainfo:The circuit consists of an NMOS transistor M1 and a PMOS transistor M2, forming a common-source amplifier with a diode-connected load. Various parasitic capacitances are included, reflecting a high-frequency small-signal model. M2 is diode-connected, and several capacitances are combined at the output node.\nimage_name:Figure 11.26(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vout}\nname: CGS2, type: Capacitor, value: CGS2, ports: {Np: Vout, Nn: VDD}\nname: CSB2, type: Capacitor, value: CSB2, ports: {Np: S2, Nn: VDD}\nname: CDB2, type: Capacitor, value: CDB2, ports: {Np: Vout, Nn: VDD}\nname: CGD2, type: Capacitor, value: CGD2, ports: {Np: Vout, Nn: Vout}\nname: CGD1, type: Capacitor, value: CGD1, ports: {Np: Vin, Nn: Vout}\nname: CGS1, type: Capacitor, value: CGS1, ports: {Np: Vin, Nn: GND}\nname: CSB1, type: Capacitor, value: CSB1, ports: {Np: GND, Nn: GND}\nname: CDB1, type: Capacitor, value: CDB1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a high-frequency model of a MOSFET amplifier with M2 as a diode-connected PMOS. The capacitors represent various parasitic capacitances in the circuit. The output is at Vout, and the input is at Vin. The circuit reduces parasitic effects by connecting certain capacitances to ground.\nimage_name:Figure 11.26(c)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vout}\nname: CGS1, type: Capacitor, value: CGS1, ports: {Np: Vin, Nn: GND}\nname: CGD1, type: Capacitor, value: CGD1, ports: {Np: Vin, Nn: Vout}\nname: CSB1, type: Capacitor, value: CSB1, ports: {Np: GND, Nn: GND}\nname: CSB2, type: Capacitor, value: CSB2, ports: {Np: VDD, Nn: VDD}\nname: CDB1, type: Capacitor, value: CDB1, ports: {Np: Vout, Nn: GND}\nname: CDB2, type: Capacitor, value: CDB2, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a high-frequency model of a MOSFET amplifier with M2 being diode-connected. The capacitors CDB1, CDB2, and CGS2 appear in parallel at the output node Vout. CSB1 and CSB2 are shorted to AC ground. CGD2 is shorted out.\n\nFigure 11.26\n\nSolution By adding the four capacitances of each device from Fig. 11.25, we obtain the circuit in Fig. 11.26(b). Note that $C_{S B 1}$ and $C_{S B 2}$ are shorted to ac ground at both ends, $C_{G D 2}$ is shorted \"out,\" and $C_{D B 1}, C_{D B 2}$, and $C_{G S 2}$ appear in parallel at the output node. The circuit thus simplifies to that in Fig. 11.26(c).\n\nExercise\nGiven that $M_{2}$ is a diode-connected device, construct the small-signal equivalent circuit of the amplifier."
},
{
    "text": "Our analysis in Chapter 6 of the MOSFET structure uncovered several capacitive components. We now delve deeper into these capacitances within the device.\n\nAs depicted in Fig. 11.23(a), the MOSFET exhibits three primary capacitances: one between the gate and the channel (referred to as the \"gate oxide capacitance\" and denoted by $W L C_{o x}$), and two linked to the reverse-biased source-bulk and drain-bulk junctions. The first component poses a modeling challenge due to the absence of a \"channel\" in the transistor model. Consequently, this capacitance must be divided into two parts: one between the gate and the source, and another between the gate and the drain [Fig. 11.23(b)]. The precise distribution of this capacitance is outside the scope of this book, but in the saturation region, $C_{1}$ is approximately $2 / 3$ of the gate-channel capacitance, while $C_{2} \\approx 0$.\n\nimage_name:(a)\ndescription:The image labeled as Figure 11.23(a) illustrates the cross-sectional structure of a MOS (Metal-Oxide-Semiconductor) device, highlighting its associated capacitances. Key components in the diagram include:\n\n1. **p-substrate**: This serves as the base layer of the semiconductor device, positioned at the bottom of the diagram and labeled as 'p-substrate'. It forms the foundation for the MOS structure.\n\n2. **n+ Regions**: Two heavily doped n-type regions, labeled as 'n+', represent the source and drain of the MOSFET. These regions are embedded within the p-substrate and are essential for the MOS device's operation.\n\n3. **Gate Structure**: Located above the n+ regions and the p-substrate, this horizontal structure comprises a thin insulating layer (likely silicon dioxide) and a conductive gate terminal on top.\n\n4. **Capacitances**: The diagram indicates the capacitance elements related to the MOS structure, depicted as small capacitor symbols connected to the n+ regions and the gate. These capacitances are crucial for modeling the MOSFET's behavior.\n\nThe image offers a simplified view of the MOSFET, emphasizing the interaction between the gate and the source/drain regions through capacitances, which is vital for understanding the device's electrical characteristics.\n\n(a)\nimage_name:Figure 11.23 (b)\ndescription:\n[\nname: C1, type: Capacitor, value: C1, ports: {Np: Gate, Nn: Drain}\nname: C2, type: Capacitor, value: C2, ports: {Np: Gate, Nn: Source}\n]\nextrainfo:This diagram shows the division of the gate-channel capacitance between the source and drain in a MOSFET. C1 and C2 represent the capacitances between the gate and the drain/source regions.\n\n(b)\n\nFigure 11.23 (a) Structure of MOS device showing various capacitances, (b) partitioning of gate-channel capacitance between source and drain.\n\nTwo additional capacitances in the MOSFET become significant in certain circuits. As shown in Fig. 11.24, these components arise from both the physical overlap of the gate with the source/drain areas ${ }^{7}$ and the fringe field lines between the gate's edge and the top of the S/D regions. Known as the gate-drain or gate-source \"overlap\" capacitance, this symmetric effect remains even when the MOSFET is off.\n\nimage_name:Figure 11.24\ndescription:The diagram illustrates the overlap capacitance between the gate and drain of a MOSFET. This is a critical element in high-frequency MOSFET models, resulting from the physical overlap and fringe field lines between the gate and drain regions.\n\nFigure 11.24 Overlap capacitance between gate and drain (or source).\n\nWe now develop the high-frequency model of the MOSFET. As shown in Fig. 11.25(a), this model comprises: (1) the capacitance between the gate and source, $C_{G S}$ (including the overlap component); (2) the capacitance between the gate and drain (including the overlap component); (3) the junction capacitances between the source and bulk and the drain and bulk, $C_{S B}$ and $C_{D B}$, respectively. (We assume the bulk is at ac ground.)\n\n[^9]image_name:(a)\ndescription:\n[\nname: C_GS, type: Capacitor, value: C_GS, ports: {Np: G, Nn: S}\nname: C_GD, type: Capacitor, value: C_GD, ports: {Np: G, Nn: D}\nname: C_DB, type: Capacitor, value: C_DB, ports: {Np: D, Nn: GND}\nname: C_SB, type: Capacitor, value: C_SB, ports: {Np: S, Nn: GND}\nname: g_m V_GS, type: VoltageControlledCurrentSource, ports: {Np: D, Nn: S}\nname: r_O, type: Resistor, value: r_O, ports: {N1: D, N2: S}\n]\nextrainfo:This diagram represents the high-frequency model of a MOSFET, featuring various capacitances and a voltage-controlled current source. The bulk is assumed to be at AC ground.\n\n(a)\nimage_name:Figure 11.25(b)\ndescription:\n[\nname: C_GS, type: Capacitor, value: C_GS, ports: {Np: G, Nn: S}\nname: C_GD, type: Capacitor, value: C_GD, ports: {Np: G, Nn: D}\nname: C_DB, type: Capacitor, value: C_DB, ports: {Np: D, Nn: GND}\nname: C_SB, type: Capacitor, value: C_SB, ports: {Np: S, Nn: GND}\nname: NMOS, type: NMOS, ports: {S: S, D: D, G: G}\n]\nextrainfo:This diagram depicts the high-frequency model of a MOSFET, including gate-source (C_GS), gate-drain (C_GD), drain-bulk (C_DB), and source-bulk (C_SB) capacitances. The bulk is assumed to be at AC ground.\n\n(b)\n\nFigure 11.25 (a) High-frequency model of MOSFET, (b) device symbol with capacitances shown explicitly.\n\nAs discussed in Section 11.2.1, we often depict the capacitances on the transistor symbol [Fig. 11.25(b)] before constructing the small-signal model.\n\nExample: Identify all capacitances in the circuit of Fig. 11.26(a).\n11.13\n\nimage_name:Figure 11.26(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vout}\n]\nextrainfo:The circuit consists of an NMOS transistor M1 and a PMOS transistor M2, forming a common-source amplifier with a diode-connected load. Various parasitic capacitances are included, reflecting a high-frequency small-signal model. M2 is diode-connected, and several capacitances are combined at the output node.\n\nimage_name:Figure 11.26(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vout}\nname: CGS2, type: Capacitor, value: CGS2, ports: {Np: Vout, Nn: VDD}\nname: CSB2, type: Capacitor, value: CSB2, ports: {Np: S2, Nn: VDD}\nname: CDB2, type: Capacitor, value: CDB2, ports: {Np: Vout, Nn: VDD}\nname: CGD2, type: Capacitor, value: CGD2, ports: {Np: Vout, Nn: Vout}\nname: CGD1, type: Capacitor, value: CGD1, ports: {Np: Vin, Nn: Vout}\nname: CGS1, type: Capacitor, value: CGS1, ports: {Np: Vin, Nn: GND}\nname: CSB1, type: Capacitor, value: CSB1, ports: {Np: GND, Nn: GND}\nname: CDB1, type: Capacitor, value: CDB1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a high-frequency model of a MOSFET amplifier with M2 as a diode-connected PMOS. The capacitors represent various parasitic capacitances in the circuit. The output is at Vout, and the input is at Vin. The circuit reduces parasitic effects by connecting certain capacitances to ground.\n\nimage_name:Figure 11.26(c)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vout}\nname: CGS1, type: Capacitor, value: CGS1, ports: {Np: Vin, Nn: GND}\nname: CGD1, type: Capacitor, value: CGD1, ports: {Np: Vin, Nn: Vout}\nname: CSB1, type: Capacitor, value: CSB1, ports: {Np: GND, Nn: GND}\nname: CSB2, type: Capacitor, value: CSB2, ports: {Np: VDD, Nn: VDD}\nname: CDB1, type: Capacitor, value: CDB1, ports: {Np: Vout, Nn: GND}\nname: CDB2, type: Capacitor, value: CDB2, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a high-frequency model of a MOSFET amplifier with M2 being diode-connected. The capacitors CDB1, CDB2, and CGS2 appear in parallel at the output node Vout. CSB1 and CSB2 are shorted to AC ground. CGD2 is shorted out.\n\nFigure 11.26\n\nSolution: By adding the four capacitances of each device from Fig. 11.25, we arrive at the circuit in Fig. 11.26(b). Note that $C_{S B 1}$ and $C_{S B 2}$ are shorted to ac ground on both ends, $C_{G D 2}$ is shorted \"out,\" and $C_{D B 1}, C_{D B 2}$, and $C_{G S 2}$ appear in parallel at the output node. The circuit therefore simplifies to that in Fig. 11.26(c).\n\nExercise:\nConsidering that $M_{2}$ is a diode-connected device, construct the small-signal equivalent circuit of the amplifier."
},
{
    "text": "Our examination of the MOSFET structure in Chapter 6 identified several capacitive components. We now delve deeper into these capacitances within the device.\n\nAs depicted in Fig. 11.23(a), the MOSFET exhibits three primary capacitances: one between the gate and the channel (referred to as the \"gate oxide capacitance\" and represented by $W L C_{o x}$), and two associated with the reverse-biased source-bulk and drain-bulk junctions. The first component poses a modeling challenge due to the absence of a \"channel\" in the transistor model. Consequently, we must分解 this capacitance into two parts: one between the gate and the source, and another between the gate and the drain [Fig. 11.23(b)]. The precise division of this capacitance is beyond the scope of this book, but in the saturation region, $C_{1}$ is approximately $2 / 3$ of the gate-channel capacitance, while $C_{2} \\approx 0$.\nimage_name:(a)\ndescription:Figure 11.23(a) presents a cross-sectional view of a MOS (Metal-Oxide-Semiconductor) device, highlighting its various capacitances. The key elements visible in the diagram are:\n\n1. **p-substrate**: This serves as the base layer of the semiconductor device, located at the bottom of the diagram and labeled as 'p-substrate'. It forms the foundation for the MOS structure.\n\n2. **n+ Regions**: Two heavily doped n-type regions, labeled as 'n+', represent the source and drain of the MOSFET. These regions are embedded within the p-substrate and are essential for the device's operation.\n\n3. **Gate Structure**: Positioned above the n+ regions and the p-substrate, this horizontal structure comprises a thin insulating layer (typically silicon dioxide) and a conductive gate terminal on top.\n\n4. **Capacitances**: The diagram indicates the capacitance elements linked to the MOS structure, depicted as small capacitor symbols connected to the n+ regions and the gate. These represent the capacitances between the gate and the source/drain regions, crucial for modeling the MOSFET's behavior.\n\nThe image offers a simplified perspective on the MOSFET, emphasizing the interaction between the gate and the source/drain regions through capacitances, which is vital for understanding the device's electrical characteristics and behavior in circuits.\n\n(a)\nimage_name:Figure 11.23 (b)\ndescription:[\nname: C1, type: Capacitor, value: C1, ports: {Np: Gate, Nn: Drain}\nname: C2, type: Capacitor, value: C2, ports: {Np: Gate, Nn: Source}\n]\nextrainfo:This diagram illustrates the division of the gate-channel capacitance between the source and drain in a MOSFET, with C1 and C2 representing the capacitances between the gate and the drain/source regions.\n\n(b)\n\nFigure 11.23 (a) Structure of MOS device showing various capacitances, (b) partitioning of gate-channel capacitance between source and drain.\n\nTwo additional capacitances in the MOSFET become significant in certain circuits. As shown in Fig. 11.24, these components arise from both the physical overlap of the gate with the source/drain areas ${ }^{7}$ and the fringe field lines between the edge of the gate and the top of the S/D regions. Known as the gate-drain or gate-source \"overlap\" capacitance, this symmetric effect persists even when the MOSFET is off.\nimage_name:Figure 11.24\ndescription:This diagram illustrates the overlap capacitance between the gate and drain of a MOSFET, a critical component in high-frequency MOSFET models resulting from the physical overlap and fringe field lines between the gate and drain regions.\n\nFigure 11.24 Overlap capacitance between gate and drain (or source).\n\nWe now develop the high-frequency model of the MOSFET. As shown in Fig. 11.25(a), this model includes: (1) the capacitance between the gate and source, $C_{G S}$ (including the overlap component); (2) the capacitance between the gate and drain (including the overlap component); (3) the junction capacitances between the source and bulk and the drain and bulk, $C_{S B}$ and $C_{D B}$, respectively. (We assume the bulk remains at ac ground.)\n\n[^9]image_name:(a)\ndescription:[\nname: C_GS, type: Capacitor, value: C_GS, ports: {Np: G, Nn: S}\nname: C_GD, type: Capacitor, value: C_GD, ports: {Np: G, Nn: D}\nname: C_DB, type: Capacitor, value: C_DB, ports: {Np: D, Nn: GND}\nname: C_SB, type: Capacitor, value: C_SB, ports: {Np: S, Nn: GND}\nname: g_m V_GS, type: VoltageControlledCurrentSource, ports: {Np: D, Nn: S}\nname: r_O, type: Resistor, value: r_O, ports: {N1: D, N2: S}\n]\nextrainfo:This diagram represents the high-frequency model of a MOSFET, featuring various capacitances and a voltage-controlled current source. The bulk is assumed to be at AC ground.\n\n(a)\nimage_name:Figure 11.25(b)\ndescription:[\nname: C_GS, type: Capacitor, value: C_GS, ports: {Np: G, Nn: S}\nname: C_GD, type: Capacitor, value: C_GD, ports: {Np: G, Nn: D}\nname: C_DB, type: Capacitor, value: C_DB, ports: {Np: D, Nn: GND}\nname: C_SB, type: Capacitor, value: C_SB, ports: {Np: S, Nn: GND}\nname: NMOS, type: NMOS, ports: {S: S, D: D, G: G}\n]\nextrainfo:This diagram depicts the high-frequency model of a MOSFET, including gate-source (C_GS), gate-drain (C_GD), drain-bulk (C_DB), and source-bulk (C_SB) capacitances. The bulk is assumed to be at AC ground.\n\n(b)\n\nFigure 11.25 (a) High-frequency model of MOSFET, (b) device symbol with capacitances shown explicitly.\n\nAs discussed in Section 11.2.1, we often depict the capacitances on the transistor symbol [Fig. 11.25(b)] before constructing the small-signal model.\n\nExample: Identify all the capacitances in the circuit shown in Fig. 11.26(a).\n11.13\nimage_name:Figure 11.26(a)\ndescription:[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vout}\n]\nextrainfo:The circuit comprises an NMOS transistor M1 and a PMOS transistor M2, forming a common-source amplifier with a diode-connected load. Various parasitic capacitances are included, reflecting a high-frequency small-signal model. M2 is diode-connected, and several capacitances are combined at the output node.\nimage_name:Figure 11.26(b)\ndescription:[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vout}\nname: CGS2, type: Capacitor, value: CGS2, ports: {Np: Vout, Nn: VDD}\nname: CSB2, type: Capacitor, value: CSB2, ports: {Np: S2, Nn: VDD}\nname: CDB2, type: Capacitor, value: CDB2, ports: {Np: Vout, Nn: VDD}\nname: CGD2, type: Capacitor, value: CGD2, ports: {Np: Vout, Nn: Vout}\nname: CGD1, type: Capacitor, value: CGD1, ports: {Np: Vin, Nn: Vout}\nname: CGS1, type: Capacitor, value: CGS1, ports: {Np: Vin, Nn: GND}\nname: CSB1, type: Capacitor, value: CSB1, ports: {Np: GND, Nn: GND}\nname: CDB1, type: Capacitor, value: CDB1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit represents a high-frequency model of a MOSFET amplifier with M2 as a diode-connected PMOS. The capacitors denote various parasitic capacitances in the circuit. The output is at Vout, and the input is at Vin. The circuit minimizes parasitic effects by connecting certain capacitances to ground.\nimage_name:Figure 11.26(c)\ndescription:[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vout}\nname: CGS1, type: Capacitor, value: CGS1, ports: {Np: Vin, Nn: GND}\nname: CGD1, type: Capacitor, value: CGD1, ports: {Np: Vin, Nn: Vout}\nname: CSB1, type: Capacitor, value: CSB1, ports: {Np: GND, Nn: GND}\nname: CSB2, type: Capacitor, value: CSB2, ports: {Np: VDD, Nn: VDD}\nname: CDB1, type: Capacitor, value: CDB1, ports: {Np: Vout, Nn: GND}\nname: CDB2, type: Capacitor, value: CDB2, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a high-frequency model of a MOSFET amplifier with M2 being diode-connected. The capacitors CDB1, CDB2, and CGS2 appear in parallel at the output node Vout. CSB1 and CSB2 are shorted to AC ground, and CGD2 is shorted out.\n\nFigure 11.26\n\nSolution: By adding the four capacitances of each device from Fig. 11.25, we obtain the circuit in Fig. 11.26(b). Note that $C_{S B 1}$ and $C_{S B 2}$ are shorted to ac ground at both ends, $C_{G D 2}$ is shorted \"out,\" and $C_{D B 1}, C_{D B 2}$, and $C_{G S 2}$ appear in parallel at the output node. The circuit thus simplifies to that shown in Fig. 11.26(c).\n\nExercise:\nConsidering that $M_{2}$ is a diode-connected device, construct the small-signal equivalent circuit of the amplifier."
},
{
    "text": "Our examination of the MOSFET structure in Chapter 6 highlighted several capacitive elements. We now delve deeper into these capacitances within the device.\n\nAs depicted in Fig. 11.23(a), the MOSFET exhibits three primary capacitances: one between the gate and the channel (referred to as the \"gate oxide capacitance\" and denoted by $W L C_{o x}$), and two linked to the reverse-biased source-bulk and drain-bulk junctions. The first component poses a modeling challenge due to the absence of a \"channel\" in the transistor model. Consequently, we must分解 this capacitance into two parts: one between the gate and the source, and another between the gate and the drain [Fig. 11.23(b)]. The precise division of this capacitance is beyond this book's scope, but in the saturation region, $C_{1}$ is approximately $2 / 3$ of the gate-channel capacitance, while $C_{2} \\approx 0$.\nimage_name:(a)\ndescription:The image labeled as Figure 11.23(a) illustrates the cross-sectional structure of a MOS (Metal-Oxide-Semiconductor) device, emphasizing the various capacitances associated with it. The key components visible in the diagram include:\n\n1. **p-substrate**: This forms the base layer of the semiconductor device, located at the bottom of the diagram and labeled as 'p-substrate'. It serves as the foundational layer for the MOS structure.\n\n2. **n+ Regions**: Two heavily doped n-type regions are depicted, labeled as 'n+'. These regions represent the source and drain of the MOSFET, embedded within the p-substrate and essential for the device's operation.\n\n3. **Gate Structure**: Above the n+ regions and the p-substrate, a horizontal structure represents the gate, comprising a thin insulating layer (likely silicon dioxide) and a conductive gate terminal on top.\n\n4. **Capacitances**: The diagram indicates the capacitance elements related to the MOS structure, shown as small capacitor symbols connected to the n+ regions and the gate. These represent the capacitances between the gate and the source/drain regions, crucial for modeling the MOSFET's behavior.\n\nThe image provides a simplified view of the MOSFET, focusing on the interaction between the gate and the source/drain regions through capacitances, essential for understanding the device's electrical characteristics and behavior in circuits.\n\n(a)\nimage_name:Figure 11.23 (b)\ndescription:\n[\nname: C1, type: Capacitor, value: C1, ports: {Np: Gate, Nn: Drain}\nname: C2, type: Capacitor, value: C2, ports: {Np: Gate, Nn: Source}\n]\nextrainfo:This diagram illustrates the division of gate-channel capacitance between the source and drain in a MOSFET. C1 and C2 represent the capacitances between the gate and the drain/source regions.\n\n(b)\n\nFigure 11.23 (a) Structure of MOS device showing various capacitances, (b) division of gate-channel capacitance between source and drain.\n\nTwo additional capacitances in the MOSFET become significant in certain circuits. As shown in Fig. 11.24, these components arise from both the physical overlap of the gate with the source/drain areas ${ }^{7}$ and the fringe field lines between the gate's edge and the top of the S/D regions. Known as the gate-drain or gate-source \"overlap\" capacitance, this symmetric effect persists even when the MOSFET is off.\nimage_name:Figure 11.24\ndescription:The diagram shows the overlap capacitance between the gate and drain of a MOSFET, a critical component in high-frequency models of MOSFETs, resulting from the physical overlap and fringe field lines between the gate and drain regions.\n\nFigure 11.24 Overlap capacitance between gate and drain (or source).\n\nWe now develop the high-frequency model of the MOSFET. As shown in Fig. 11.25(a), this model includes: (1) the capacitance between the gate and source, $C_{G S}$ (including the overlap component); (2) the capacitance between the gate and drain (including the overlap component); (3) the junction capacitances between the source and bulk and the drain and bulk, $C_{S B}$ and $C_{D B}$, respectively. (We assume the bulk is at ac ground.)\n\n[^9]image_name:(a)\ndescription:\n[\nname: C_GS, type: Capacitor, value: C_GS, ports: {Np: G, Nn: S}\nname: C_GD, type: Capacitor, value: C_GD, ports: {Np: G, Nn: D}\nname: C_DB, type: Capacitor, value: C_DB, ports: {Np: D, Nn: GND}\nname: C_SB, type: Capacitor, value: C_SB, ports: {Np: S, Nn: GND}\nname: g_m V_GS, type: VoltageControlledCurrentSource, ports: {Np: D, Nn: S}\nname: r_O, type: Resistor, value: r_O, ports: {N1: D, N2: S}\n]\nextrainfo:This diagram represents the high-frequency model of a MOSFET with various capacitances and a voltage-controlled current source, assuming the bulk is at AC ground.\n\n(a)\nimage_name:Figure 11.25(b)\ndescription:\n[\nname: C_GS, type: Capacitor, value: C_GS, ports: {Np: G, Nn: S}\nname: C_GD, type: Capacitor, value: C_GD, ports: {Np: G, Nn: D}\nname: C_DB, type: Capacitor, value: C_DB, ports: {Np: D, Nn: GND}\nname: C_SB, type: Capacitor, value: C_SB, ports: {Np: S, Nn: GND}\nname: NMOS, type: NMOS, ports: {S: S, D: D, G: G}\n]\nextrainfo:This diagram depicts the high-frequency model of a MOSFET with various capacitances, including gate-source (C_GS), gate-drain (C_GD), drain-bulk (C_DB), and source-bulk (C_SB) capacitances, assuming the bulk is at AC ground.\n\n(b)\n\nFigure 11.25 (a) High-frequency model of MOSFET, (b) device symbol with capacitances shown explicitly.\n\nAs discussed in Section 11.2.1, we often depict the capacitances on the transistor symbol [Fig. 11.25(b)] before constructing the small-signal model.\n\nExample Identify all capacitances in the circuit of Fig. 11.26(a).\n11.13\nimage_name:Figure 11.26(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vout}\n]\nextrainfo:The circuit consists of an NMOS transistor M1 and a PMOS transistor M2, forming a common-source amplifier with a diode-connected load. Various parasitic capacitances are included, reflecting a high-frequency small-signal model. M2 is diode-connected, and several capacitances are combined at the output node.\nimage_name:Figure 11.26(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vout}\nname: CGS2, type: Capacitor, value: CGS2, ports: {Np: Vout, Nn: VDD}\nname: CSB2, type: Capacitor, value: CSB2, ports: {Np: S2, Nn: VDD}\nname: CDB2, type: Capacitor, value: CDB2, ports: {Np: Vout, Nn: VDD}\nname: CGD2, type: Capacitor, value: CGD2, ports: {Np: Vout, Nn: Vout}\nname: CGD1, type: Capacitor, value: CGD1, ports: {Np: Vin, Nn: Vout}\nname: CGS1, type: Capacitor, value: CGS1, ports: {Np: Vin, Nn: GND}\nname: CSB1, type: Capacitor, value: CSB1, ports: {Np: GND, Nn: GND}\nname: CDB1, type: Capacitor, value: CDB1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a high-frequency model of a MOSFET amplifier with M2 as a diode-connected PMOS. The capacitors represent various parasitic capacitances in the circuit. The output is at Vout, and the input is at Vin. The circuit reduces parasitic effects by connecting certain capacitances to ground.\nimage_name:Figure 11.26(c)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vout}\nname: CGS1, type: Capacitor, value: CGS1, ports: {Np: Vin, Nn: GND}\nname: CGD1, type: Capacitor, value: CGD1, ports: {Np: Vin, Nn: Vout}\nname: CSB1, type: Capacitor, value: CSB1, ports: {Np: GND, Nn: GND}\nname: CSB2, type: Capacitor, value: CSB2, ports: {Np: VDD, Nn: VDD}\nname: CDB1, type: Capacitor, value: CDB1, ports: {Np: Vout, Nn: GND}\nname: CDB2, type: Capacitor, value: CDB2, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a high-frequency model of a MOSFET amplifier with M2 being diode-connected. The capacitors CDB1, CDB2, and CGS2 appear in parallel at the output node Vout. CSB1 and CSB2 are shorted to AC ground. CGD2 is shorted out.\n\nFigure 11.26\n\nSolution By adding the four capacitances of each device from Fig. 11.25, we arrive at the circuit in Fig. 11.26(b). Note that $C_{S B 1}$ and $C_{S B 2}$ are shorted to ac ground on both ends, $C_{G D 2}$ is shorted \"out,\" and $C_{D B 1}, C_{D B 2}$, and $C_{G S 2}$ appear in parallel at the output node. The circuit therefore reduces to that in Fig. 11.26(c).\n\nExercise\nConsidering that $M_{2}$ is a diode-connected device, construct the small-signal equivalent circuit of the amplifier."
},
{
    "text": "Our examination of the MOSFET structure in Chapter 6 highlighted several capacitive components, which we now delve into in more detail.\n\nAs depicted in Fig. 11.23(a), the MOSFET exhibits three primary capacitances: one between the gate and the channel (referred to as the \"gate oxide capacitance\" and represented by $W L C_{o x}$), and two linked to the reverse-biased source-bulk and drain-bulk junctions. The first component poses a modeling challenge due to the absence of a \"channel\" in the transistor model. Consequently, this capacitance must be divided into two parts: one between the gate and the source, and another between the gate and the drain [Fig. 11.23(b)]. The precise distribution of this capacitance is beyond this book's scope, but in the saturation region, $C_{1}$ is approximately $2 / 3$ of the gate-channel capacitance, while $C_{2} \\approx 0$.\n\nimage_name:(a)\ndescription:Figure 11.23(a) illustrates the cross-sectional structure of a MOS (Metal-Oxide-Semiconductor) device, emphasizing its various capacitances. Key components in the diagram include:\n\n1. **p-substrate**: This base layer of the semiconductor device is shown at the bottom, labeled as 'p-substrate', forming the foundation of the MOS structure.\n\n2. **n+ Regions**: Two heavily doped n-type regions, labeled 'n+', represent the source and drain of the MOSFET. These regions are embedded in the p-substrate and are essential for the device's operation.\n\n3. **Gate Structure**: Above the n+ regions and p-substrate lies the gate structure, comprising a thin insulating layer (likely silicon dioxide) and a conductive gate terminal on top.\n\n4. **Capacitances**: The diagram indicates capacitance elements related to the MOS structure, depicted as small capacitor symbols connected to the n+ regions and the gate. These capacitances between the gate and the source/drain regions are vital for modeling the MOSFET's behavior.\n\nThe image provides a simplified view of the MOSFET, focusing on the interaction between the gate and the source/drain regions through capacitances, crucial for understanding the device's electrical characteristics.\n\n(a)\nimage_name:Figure 11.23 (b)\ndescription:[\nname: C1, type: Capacitor, value: C1, ports: {Np: Gate, Nn: Drain}\nname: C2, type: Capacitor, value: C2, ports: {Np: Gate, Nn: Source}\n]\nextrainfo:This diagram shows the division of gate-channel capacitance between the source and drain in a MOSFET. C1 and C2 represent the capacitances between the gate and the drain/source regions.\n\n(b)\n\nFigure 11.23 (a) Structure of MOS device showing various capacitances, (b) partitioning of gate-channel capacitance between source and drain.\n\nTwo additional capacitances in the MOSFET become significant in certain circuits. As shown in Fig. 11.24, these components arise from both the physical overlap of the gate with the source/drain areas ${ }^{7}$ and the fringe field lines between the gate edge and the top of the S/D regions. Known as the gate-drain or gate-source \"overlap\" capacitance, this symmetric effect remains even when the MOSFET is off.\n\nimage_name:Figure 11.24\ndescription:This diagram illustrates the overlap capacitance between the gate and drain of a MOSFET, a critical component in high-frequency MOSFET models, resulting from physical overlap and fringe field lines between the gate and drain regions.\n\nFigure 11.24 Overlap capacitance between gate and drain (or source).\n\nWe now develop the high-frequency model of the MOSFET. As shown in Fig. 11.25(a), this model includes: (1) the capacitance between the gate and source, $C_{G S}$ (including the overlap component); (2) the capacitance between the gate and drain (including the overlap component); (3) the junction capacitances between the source and bulk and the drain and bulk, $C_{S B}$ and $C_{D B}$, respectively. (We assume the bulk is at ac ground.)\n\n[^9]image_name:(a)\ndescription:[\nname: C_GS, type: Capacitor, value: C_GS, ports: {Np: G, Nn: S}\nname: C_GD, type: Capacitor, value: C_GD, ports: {Np: G, Nn: D}\nname: C_DB, type: Capacitor, value: C_DB, ports: {Np: D, Nn: GND}\nname: C_SB, type: Capacitor, value: C_SB, ports: {Np: S, Nn: GND}\nname: g_m V_GS, type: VoltageControlledCurrentSource, ports: {Np: D, Nn: S}\nname: r_O, type: Resistor, value: r_O, ports: {N1: D, N2: S}\n]\nextrainfo:This diagram represents the high-frequency model of a MOSFET with various capacitances and a voltage-controlled current source, assuming the bulk is at AC ground.\n\n(a)\nimage_name:Figure 11.25(b)\ndescription:[\nname: C_GS, type: Capacitor, value: C_GS, ports: {Np: G, Nn: S}\nname: C_GD, type: Capacitor, value: C_GD, ports: {Np: G, Nn: D}\nname: C_DB, type: Capacitor, value: C_DB, ports: {Np: D, Nn: GND}\nname: C_SB, type: Capacitor, value: C_SB, ports: {Np: S, Nn: GND}\nname: NMOS, type: NMOS, ports: {S: S, D: D, G: G}\n]\nextrainfo:This diagram represents the high-frequency model of a MOSFET with various capacitances, including gate-source (C_GS), gate-drain (C_GD), drain-bulk (C_DB), and source-bulk (C_SB) capacitances, assuming the bulk is at AC ground.\n\n(b)\n\nFigure 11.25 (a) High-frequency model of MOSFET, (b) device symbol with capacitances shown explicitly.\n\nAs discussed in Section 11.2.1, we often depict the capacitances on the transistor symbol [Fig. 11.25(b)] before constructing the small-signal model.\n\nExample: Identify all capacitances in the circuit of Fig. 11.26(a).\n11.13\nimage_name:Figure 11.26(a)\ndescription:[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vout}\n]\nextrainfo:The circuit consists of an NMOS transistor M1 and a PMOS transistor M2, forming a common-source amplifier with a diode-connected load. Various parasitic capacitances are included, reflecting a high-frequency small-signal model. M2 is diode-connected, and several capacitances are combined at the output node.\n\nimage_name:Figure 11.26(b)\ndescription:[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vout}\nname: CGS2, type: Capacitor, value: CGS2, ports: {Np: Vout, Nn: VDD}\nname: CSB2, type: Capacitor, value: CSB2, ports: {Np: S2, Nn: VDD}\nname: CDB2, type: Capacitor, value: CDB2, ports: {Np: Vout, Nn: VDD}\nname: CGD2, type: Capacitor, value: CGD2, ports: {Np: Vout, Nn: Vout}\nname: CGD1, type: Capacitor, value: CGD1, ports: {Np: Vin, Nn: Vout}\nname: CGS1, type: Capacitor, value: CGS1, ports: {Np: Vin, Nn: GND}\nname: CSB1, type: Capacitor, value: CSB1, ports: {Np: GND, Nn: GND}\nname: CDB1, type: Capacitor, value: CDB1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a high-frequency model of a MOSFET amplifier with M2 as a diode-connected PMOS. The capacitors represent various parasitic capacitances in the circuit. The output is at Vout, and the input is at Vin. The circuit reduces parasitic effects by connecting certain capacitances to ground.\n\nimage_name:Figure 11.26(c)\ndescription:[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vout}\nname: CGS1, type: Capacitor, value: CGS1, ports: {Np: Vin, Nn: GND}\nname: CGD1, type: Capacitor, value: CGD1, ports: {Np: Vin, Nn: Vout}\nname: CSB1, type: Capacitor, value: CSB1, ports: {Np: GND, Nn: GND}\nname: CSB2, type: Capacitor, value: CSB2, ports: {Np: VDD, Nn: VDD}\nname: CDB1, type: Capacitor, value: CDB1, ports: {Np: Vout, Nn: GND}\nname: CDB2, type: Capacitor, value: CDB2, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a high-frequency model of a MOSFET amplifier with M2 being diode-connected. The capacitors CDB1, CDB2, and CGS2 appear in parallel at the output node Vout. CSB1 and CSB2 are shorted to AC ground. CGD2 is shorted out.\n\nFigure 11.26\n\nSolution: By adding the four capacitances of each device from Fig. 11.25, we arrive at the circuit in Fig. 11.26(b). Note that $C_{S B 1}$ and $C_{S B 2}$ are shorted to ac ground on both ends, $C_{G D 2}$ is shorted \"out,\" and $C_{D B 1}, C_{D B 2}$, and $C_{G S 2}$ appear in parallel at the output node. The circuit therefore reduces to that in Fig. 11.26(c).\n\nExercise:\nConsidering that $M_{2}$ is a diode-connected device, construct the small-signal equivalent circuit of the amplifier."
},
{
    "text": "Our examination of the MOSFET structure in Chapter 6 highlighted several capacitive components. We now delve deeper into these capacitances within the device.\n\nAs depicted in Fig. 11.23(a), the MOSFET exhibits three primary capacitances: one between the gate and the channel (referred to as the \"gate oxide capacitance\" and represented by $W L C_{o x}$), and two linked to the reverse-biased source-bulk and drain-bulk junctions. The first component poses a modeling challenge due to the absence of a \"channel\" in the transistor model. Consequently, we must分解 this capacitance into two parts: one between the gate and the source, and another between the gate and the drain [Fig. 11.23(b)]. The precise division of this capacitance is beyond the scope of this book, but in the saturation region, $C_{1}$ is approximately $2 / 3$ of the gate-channel capacitance, while $C_{2} \\approx 0$.\nimage_name:(a)\ndescription:Figure 11.23(a) presents a cross-sectional view of a MOS (Metal-Oxide-Semiconductor) device, emphasizing its various capacitances. The key elements visible in the diagram are:\n\n1. **p-substrate**: This forms the base layer of the semiconductor device, positioned at the bottom of the diagram and labeled as 'p-substrate'. It serves as the foundation for the MOS structure.\n\n2. **n+ Regions**: Two heavily doped n-type regions, labeled as 'n+', represent the source and drain of the MOSFET. These regions are embedded within the p-substrate and are essential for the device's operation.\n\n3. **Gate Structure**: Located above the n+ regions and the p-substrate, this horizontal structure comprises a thin insulating layer (likely silicon dioxide) and a conductive gate terminal on top.\n\n4. **Capacitances**: The diagram indicates the capacitance elements associated with the MOS structure, depicted as small capacitor symbols connected to the n+ regions and the gate. These represent the capacitances between the gate and the source/drain regions, crucial for modeling the MOSFET's behavior.\n\nThe image offers a simplified perspective on the MOSFET, focusing on the interaction between the gate and the source/drain regions through capacitances, which is vital for understanding the device's electrical characteristics and behavior in circuits.\n\n(a)\nimage_name:Figure 11.23 (b)\ndescription:\n[\nname: C1, type: Capacitor, value: C1, ports: {Np: Gate, Nn: Drain}\nname: C2, type: Capacitor, value: C2, ports: {Np: Gate, Nn: Source}\n]\nextrainfo:This diagram illustrates the division of the gate-channel capacitance between the source and drain in a MOSFET. C1 and C2 represent the capacitances between the gate and the drain/source regions.\n\n(b)\n\nFigure 11.23 (a) Structure of MOS device showing various capacitances, (b) partitioning of gate-channel capacitance between source and drain.\n\nTwo additional capacitances in the MOSFET become significant in certain circuits. As shown in Fig. 11.24, these components arise from both the physical overlap of the gate with the source/drain areas ${ }^{7}$ and the fringe field lines between the gate's edge and the top of the S/D regions. Known as the gate-drain or gate-source \"overlap\" capacitance, this symmetric effect remains even when the MOSFET is off.\nimage_name:Figure 11.24\ndescription:The diagram illustrates the overlap capacitance between the gate and drain of a MOSFET, a critical component in high-frequency models of MOSFETs. This capacitance arises from the physical overlap and fringe field lines between the gate and drain regions.\n\nFigure 11.24 Overlap capacitance between gate and drain (or source).\n\nWe now construct the high-frequency model of the MOSFET. As shown in Fig. 11.25(a), this model includes: (1) the capacitance between the gate and source, $C_{G S}$ (including the overlap component); (2) the capacitance between the gate and drain (including the overlap component); (3) the junction capacitances between the source and bulk and the drain and bulk, $C_{S B}$ and $C_{D B}$, respectively. (We assume the bulk remains at ac ground.)\n\n[^9]image_name:(a)\ndescription:\n[\nname: C_GS, type: Capacitor, value: C_GS, ports: {Np: G, Nn: S}\nname: C_GD, type: Capacitor, value: C_GD, ports: {Np: G, Nn: D}\nname: C_DB, type: Capacitor, value: C_DB, ports: {Np: D, Nn: GND}\nname: C_SB, type: Capacitor, value: C_SB, ports: {Np: S, Nn: GND}\nname: g_m V_GS, type: VoltageControlledCurrentSource, ports: {Np: D, Nn: S}\nname: r_O, type: Resistor, value: r_O, ports: {N1: D, N2: S}\n]\nextrainfo:This diagram represents the high-frequency model of a MOSFET, featuring various capacitances and a voltage-controlled current source. The bulk is assumed to remain at AC ground.\n\n(a)\nimage_name:Figure 11.25(b)\ndescription:\n[\nname: C_GS, type: Capacitor, value: C_GS, ports: {Np: G, Nn: S}\nname: C_GD, type: Capacitor, value: C_GD, ports: {Np: G, Nn: D}\nname: C_DB, type: Capacitor, value: C_DB, ports: {Np: D, Nn: GND}\nname: C_SB, type: Capacitor, value: C_SB, ports: {Np: S, Nn: GND}\nname: NMOS, type: NMOS, ports: {S: S, D: D, G: G}\n]\nextrainfo:This diagram depicts the high-frequency model of a MOSFET, including various capacitances such as gate-source (C_GS), gate-drain (C_GD), drain-bulk (C_DB), and source-bulk (C_SB) capacitances. The bulk is assumed to remain at AC ground.\n\n(b)\n\nFigure 11.25 (a) High-frequency model of MOSFET, (b) device symbol with capacitances shown explicitly.\n\nAs discussed in Section 11.2.1, we often depict the capacitances on the transistor symbol [Fig. 11.25(b)] before constructing the small-signal model.\n\nExample: Identify all the capacitances in the circuit of Fig. 11.26(a).\n11.13\nimage_name:Figure 11.26(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vout}\n]\nextrainfo:The circuit comprises an NMOS transistor M1 and a PMOS transistor M2, forming a common-source amplifier with a diode-connected load. Various parasitic capacitances are included, reflecting a high-frequency small-signal model. M2 is diode-connected, and several capacitances are combined at the output node.\nimage_name:Figure 11.26(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vout}\nname: CGS2, type: Capacitor, value: CGS2, ports: {Np: Vout, Nn: VDD}\nname: CSB2, type: Capacitor, value: CSB2, ports: {Np: S2, Nn: VDD}\nname: CDB2, type: Capacitor, value: CDB2, ports: {Np: Vout, Nn: VDD}\nname: CGD2, type: Capacitor, value: CGD2, ports: {Np: Vout, Nn: Vout}\nname: CGD1, type: Capacitor, value: CGD1, ports: {Np: Vin, Nn: Vout}\nname: CGS1, type: Capacitor, value: CGS1, ports: {Np: Vin, Nn: GND}\nname: CSB1, type: Capacitor, value: CSB1, ports: {Np: GND, Nn: GND}\nname: CDB1, type: Capacitor, value: CDB1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a high-frequency model of a MOSFET amplifier with M2 as a diode-connected PMOS. The capacitors represent various parasitic capacitances in the circuit. The output is at Vout, and the input is at Vin. The circuit reduces parasitic effects by connecting certain capacitances to ground.\nimage_name:Figure 11.26(c)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vout}\nname: CGS1, type: Capacitor, value: CGS1, ports: {Np: Vin, Nn: GND}\nname: CGD1, type: Capacitor, value: CGD1, ports: {Np: Vin, Nn: Vout}\nname: CSB1, type: Capacitor, value: CSB1, ports: {Np: GND, Nn: GND}\nname: CSB2, type: Capacitor, value: CSB2, ports: {Np: VDD, Nn: VDD}\nname: CDB1, type: Capacitor, value: CDB1, ports: {Np: Vout, Nn: GND}\nname: CDB2, type: Capacitor, value: CDB2, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a high-frequency model of a MOSFET amplifier with M2 being diode-connected. The capacitors CDB1, CDB2, and CGS2 appear in parallel at the output node Vout. CSB1 and CSB2 are shorted to AC ground. CGD2 is shorted out.\n\nFigure 11.26\n\nSolution: By adding the four capacitances of each device from Fig. 11.25, we arrive at the circuit in Fig. 11.26(b). Note that $C_{S B 1}$ and $C_{S B 2}$ are shorted to ac ground on both ends, $C_{G D 2}$ is shorted \"out,\" and $C_{D B 1}, C_{D B 2}$, and $C_{G S 2}$ appear in parallel at the output node. The circuit therefore simplifies to that in Fig. 11.26(c).\n\nExercise:\nConsidering that $M_{2}$ is a diode-connected device, construct the small-signal equivalent circuit of the amplifier."
},
{
    "text": "Our examination of the MOSFET structure in Chapter 6 uncovered several capacitive components. We now delve deeper into these capacitances within the device.\n\nAs depicted in Fig. 11.23(a), the MOSFET exhibits three primary capacitances: one between the gate and the channel (referred to as the \"gate oxide capacitance\" and represented by $W L C_{o x}$), and two linked to the reverse-biased source-bulk and drain-bulk junctions. The first component poses a modeling challenge due to the absence of a \"channel\" in the transistor model. Consequently, we must break down this capacitance into two parts: one between the gate and the source, and another between the gate and the drain [Fig. 11.23(b)]. The precise division of this capacitance is beyond this book's scope, but in the saturation region, $C_{1}$ is approximately $2 / 3$ of the gate-channel capacitance, while $C_{2} \\approx 0$.\n\nimage_name:(a)\ndescription:Figure 11.23(a) illustrates the cross-sectional view of a MOS (Metal-Oxide-Semiconductor) device, highlighting its various capacitances. Key elements in the diagram include:\n\n1. **p-substrate**: This base layer of the semiconductor device is located at the bottom of the diagram, labeled as 'p-substrate', forming the foundation of the MOS structure.\n\n2. **n+ Regions**: Two heavily doped n-type regions, labeled 'n+', represent the source and drain of the MOSFET. These regions are embedded in the p-substrate and are vital for the device's operation.\n\n3. **Gate Structure**: Above the n+ regions and p-substrate, a horizontal structure signifies the gate, comprising a thin insulating layer (likely silicon dioxide) and a conductive gate terminal on top.\n\n4. **Capacitances**: The diagram shows capacitance elements related to the MOS structure, depicted as small capacitor symbols connected to the n+ regions and the gate. These represent the capacitances between the gate and the source/drain regions, crucial for modeling the MOSFET's behavior.\n\nThe image provides a simplified view of the MOSFET, emphasizing the interaction between the gate and the source/drain regions through capacitances, essential for understanding the device's electrical characteristics.\n\n(a)\nimage_name:Figure 11.23 (b)\ndescription:[\nname: C1, type: Capacitor, value: C1, ports: {Np: Gate, Nn: Drain}\nname: C2, type: Capacitor, value: C2, ports: {Np: Gate, Nn: Source}\n]\nextrainfo:This diagram shows the division of gate-channel capacitance between the source and drain in a MOSFET. C1 and C2 represent the capacitances between the gate and the drain/source regions.\n\n(b)\n\nFigure 11.23 (a) MOS device structure with various capacitances, (b) division of gate-channel capacitance between source and drain.\n\nTwo additional capacitances in the MOSFET become significant in certain circuits. As shown in Fig. 11.24, these components arise from both the physical overlap of the gate with the source/drain areas ${ }^{7}$ and the fringe field lines between the gate edge and the top of the S/D regions. Known as the gate-drain or gate-source \"overlap\" capacitance, this symmetric effect remains even when the MOSFET is off.\n\nimage_name:Figure 11.24\ndescription:This diagram illustrates the overlap capacitance between the gate and drain of a MOSFET, a critical component in high-frequency MOSFET models, stemming from physical overlap and fringe field lines between the gate and drain regions.\n\nFigure 11.24 Overlap capacitance between gate and drain (or source).\n\nWe now develop the high-frequency model of the MOSFET. As shown in Fig. 11.25(a), this model includes: (1) the capacitance between the gate and source, $C_{G S}$ (including the overlap component); (2) the capacitance between the gate and drain (including the overlap component); (3) the junction capacitances between the source and bulk and the drain and bulk, $C_{S B}$ and $C_{D B}$, respectively. (We assume the bulk is at ac ground.)\n\n[^9]image_name:(a)\ndescription:[\nname: C_GS, type: Capacitor, value: C_GS, ports: {Np: G, Nn: S}\nname: C_GD, type: Capacitor, value: C_GD, ports: {Np: G, Nn: D}\nname: C_DB, type: Capacitor, value: C_DB, ports: {Np: D, Nn: GND}\nname: C_SB, type: Capacitor, value: C_SB, ports: {Np: S, Nn: GND}\nname: g_m V_GS, type: VoltageControlledCurrentSource, ports: {Np: D, Nn: S}\nname: r_O, type: Resistor, value: r_O, ports: {N1: D, N2: S}\n]\nextrainfo:This diagram represents the high-frequency model of a MOSFET with various capacitances and a voltage-controlled current source, assuming the bulk is at AC ground.\n\n(a)\nimage_name:Figure 11.25(b)\ndescription:[\nname: C_GS, type: Capacitor, value: C_GS, ports: {Np: G, Nn: S}\nname: C_GD, type: Capacitor, value: C_GD, ports: {Np: G, Nn: D}\nname: C_DB, type: Capacitor, value: C_DB, ports: {Np: D, Nn: GND}\nname: C_SB, type: Capacitor, value: C_SB, ports: {Np: S, Nn: GND}\nname: NMOS, type: NMOS, ports: {S: S, D: D, G: G}\n]\nextrainfo:This diagram represents the high-frequency model of a MOSFET with various capacitances, including gate-source (C_GS), gate-drain (C_GD), drain-bulk (C_DB), and source-bulk (C_SB) capacitances, assuming the bulk is at AC ground.\n\n(b)\n\nFigure 11.25 (a) High-frequency MOSFET model, (b) device symbol with explicit capacitances.\n\nAs discussed in Section 11.2.1, we often depict the capacitances on the transistor symbol [Fig. 11.25(b)] before constructing the small-signal model.\n\nExample: Identify all capacitances in the circuit of Fig. 11.26(a).\n11.13\nimage_name:Figure 11.26(a)\ndescription:[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vout}\n]\nextrainfo:The circuit consists of an NMOS transistor M1 and a PMOS transistor M2, forming a common-source amplifier with a diode-connected load. Various parasitic capacitances are included, reflecting a high-frequency small-signal model. M2 is diode-connected, and several capacitances are combined at the output node.\n\nimage_name:Figure 11.26(b)\ndescription:[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vout}\nname: CGS2, type: Capacitor, value: CGS2, ports: {Np: Vout, Nn: VDD}\nname: CSB2, type: Capacitor, value: CSB2, ports: {Np: S2, Nn: VDD}\nname: CDB2, type: Capacitor, value: CDB2, ports: {Np: Vout, Nn: VDD}\nname: CGD2, type: Capacitor, value: CGD2, ports: {Np: Vout, Nn: Vout}\nname: CGD1, type: Capacitor, value: CGD1, ports: {Np: Vin, Nn: Vout}\nname: CGS1, type: Capacitor, value: CGS1, ports: {Np: Vin, Nn: GND}\nname: CSB1, type: Capacitor, value: CSB1, ports: {Np: GND, Nn: GND}\nname: CDB1, type: Capacitor, value: CDB1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a high-frequency model of a MOSFET amplifier with M2 as a diode-connected PMOS. The capacitors represent various parasitic capacitances in the circuit. The output is at Vout, and the input is at Vin. The circuit reduces parasitic effects by connecting certain capacitances to ground.\n\nimage_name:Figure 11.26(c)\ndescription:[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vout}\nname: CGS1, type: Capacitor, value: CGS1, ports: {Np: Vin, Nn: GND}\nname: CGD1, type: Capacitor, value: CGD1, ports: {Np: Vin, Nn: Vout}\nname: CSB1, type: Capacitor, value: CSB1, ports: {Np: GND, Nn: GND}\nname: CSB2, type: Capacitor, value: CSB2, ports: {Np: VDD, Nn: VDD}\nname: CDB1, type: Capacitor, value: CDB1, ports: {Np: Vout, Nn: GND}\nname: CDB2, type: Capacitor, value: CDB2, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a high-frequency model of a MOSFET amplifier with M2 being diode-connected. The capacitors CDB1, CDB2, and CGS2 appear in parallel at the output node Vout. CSB1 and CSB2 are shorted to AC ground. CGD2 is shorted out.\n\nFigure 11.26\n\nSolution: By adding the four capacitances of each device from Fig. 11.25, we arrive at the circuit in Fig. 11.26(b). Note that $C_{S B 1}$ and $C_{S B 2}$ are shorted to ac ground on both ends, $C_{G D 2}$ is shorted \"out,\" and $C_{D B 1}, C_{D B 2}$, and $C_{G S 2}$ appear in parallel at the output node. The circuit thus simplifies to that in Fig. 11.26(c).\n\nExercise:\nConsidering that $M_{2}$ is a diode-connected device, construct the small-signal equivalent circuit of the amplifier."
},
{
    "text": "Given the diverse capacitances around bipolar and MOS devices, can a metric be established that encapsulates the transistor's ultimate speed? Such a metric would be invaluable for comparing various transistor types or generations and for forecasting the performance of circuits that incorporate these devices.\n\nimage_name:Q_1\ndescription:\n[\nname: I_in, type: CurrentSource, value: I_in, ports: {Np: GND, Nn: Vin}\nname: Q_1, type: NPN, ports: {C: I_out, B: Vin, E: GND}\n]\nextrainfo:The circuit diagram illustrates two setups: one featuring an NPN transistor Q1 and the other an NMOS transistor M1. Both are employed to measure the transit frequency f_T by injecting a sinusoidal current I_in and observing the output current I_out.\n\nimage_name:M_1\ndescription:\n[\nname: I_in, type: CurrentSource, value: I_in, ports: {Np: GND, Nn: Vin}\nname: M1, type: NMOS, ports: {S: GND, D: GND, G: Vin}\n]\nextrainfo:The configuration includes a current source, a capacitor, and two NMOS transistors. These NMOS transistors are set up with their sources grounded and gates connected to Vin, sharing a common drain node I_out.\n\nFigure 11.27 Conceptual setup for measuring the $f_{T}$ of transistors.\nA key indicator of a transistor's intrinsic speed ${ }^{8}$ is the \"transit\" or \"cut-off\" frequency, $f_{T}$, defined as the frequency at which the small-signal current gain of the device drops to unity. As depicted in Fig. 11.27 (excluding biasing circuitry), the approach involves injecting a sinusoidal current into the base or gate and measuring the resulting collector or drain current as the input frequency, $f_{i n}$, is elevated. It is observed that as $f_{i n}$ rises, the device's input capacitance decreases the input impedance, $Z_{i n}$, thereby affecting the input voltage $V_{i n}=I_{i n} Z_{i n}$ and the output current. Here, $C_{\\mu}$ and $C_{G D}$ are disregarded (though considered in Problem 11.26). For the bipolar device in Fig. 11.27(a),\n\n$$\n\\begin{equation*}\nZ_{i n}=\\frac{1}{C_{\\pi} s} \\| r_{\\pi} \\tag{11.43}\n\\end{equation*}\n$$\n\nGiven $I_{\\text {out }}=g_{m} I_{\\text {in }} Z_{\\text {in }}$,\n\n$$\n\\begin{align*}\n\\frac{I_{\\text {out }}}{I_{\\text {in }}} & =\\frac{g_{m} r_{\\pi}}{r_{\\pi} C_{\\pi} s+1}  \\tag{11.44}\\\\\n& =\\frac{\\beta}{r_{\\pi} C_{\\pi} s+1} . \\tag{11.45}\n\\end{align*}\n$$\n\nAt the transit frequency, $\\omega_{T}\\left(=2 \\pi f_{T}\\right)$, the current gain's magnitude drops to unity:\n\n$$\n\\begin{align*}\nr_{\\pi}^{2} C_{\\pi}^{2} \\omega_{T}^{2} & =\\beta^{2}-1  \\tag{11.46}\\\\\n& \\approx \\beta^{2} . \\tag{11.47}\n\\end{align*}\n$$\n\nThus,\n\n$$\n\\begin{equation*}\n\\omega_{T} \\approx \\frac{g_{m}}{C_{\\pi}} \\tag{11.48}\n\\end{equation*}\n$$\n\nThe transit frequency for MOSFETs is derived similarly. Hence, we express:\n\n$$\n\\begin{equation*}\n2 \\pi f_{T} \\approx \\frac{g_{m}}{C_{\\pi}} \\quad \\text { or } \\quad \\frac{g_{m}}{C_{G S}} . \\tag{11.49}\n\\end{equation*}\n$$\n\nNote that the collector-substrate or drain-bulk capacitance does not influence $f_{T}$ due to the AC ground at the output.\n\nContemporary bipolar and MOS transistors achieve $f_{T}$ values exceeding 100 GHz. However, the speed of complex circuits utilizing these devices is significantly lower.\n\nThe minimum channel length of MOSFETs has shrunk from $1 \\mu \\mathrm{~m}$ in the late 1980s 11.14 to 65 nm today. Additionally, the inevitable decrease in supply voltage has reduced the gate-source overdrive voltage from approximately 400 mV to 100 mV. By what factor has the $f_{T}$ of MOSFETs increased?\n${ }^{8}$ \"Intrinsic\" speed refers to the device's performance in isolation, without any circuit-imposed limitations or enhancements.\n\nSolution It can be demonstrated (Problem 11.28) that\n\n$$\n\\begin{equation*}\n2 \\pi f_{T}=\\frac{3}{2} \\frac{\\mu_{n}}{L^{2}}\\left(V_{G S}-V_{T H}\\right) \\tag{11.50}\n\\end{equation*}\n$$\n\nConsequently, the transit frequency has risen by roughly a factor of 59. For instance, if $\\mu_{n}=400 \\mathrm{~cm}^{2} /(\\mathrm{V} \\cdot \\mathrm{s})$, then 65 nm devices with a 100 mV overdrive exhibit an $f_{T}$ of 226 GHz.\n\nExercise\nCalculate the $f_{T}$ if the channel length is reduced to 45 nm, but the mobility declines to $300 \\mathrm{~cm}^{2} /(\\mathrm{V} \\cdot \\mathrm{s})$.\n\nDid you know?\n\nIf the $f_{T}$ of 65 nm MOSFETs is around 220 GHz, can these devices operate at even higher frequencies? Indeed, they can. The trick is to employ inductors to counteract the effects of capacitors. Imagine, as shown in Fig. (a), placing inductor $L_{1}$ in parallel with $C_{G S}$. (This inductor, realized as a metal spiral on the chip, has some resistance, $R_{S \\text {.) }}$ At the resonance frequency, $\\omega_{0}=1 / \\sqrt{L_{1} C_{G S}}$, the parallel combination behaves like a single resistor, effectively negating $M_{1}$'s gate-source capacitance! Due to this, on-chip inductors are now commonplace in high-frequency design. Figure (b) displays a chip photograph of a 300 GHz oscillator designed by the author using 65 nm technology. Such high frequencies are utilized in medical imaging.\n\nimage_name:(a)\ndescription:\n[\nname: RS, type: Resistor, value: RS, ports: {N1: X1, N2: b1}\nname: L1, type: Inductor, value: L1, ports: {N1: X1, N2: GND}\nname: CGS, type: Capacitor, ports: {Np: b1, Nn: GND}\nname: M1, type: NMOS, ports: {S: GND, D: LOAD, G: b1}\n]\nextrainfo:The circuit employs resonance to neutralize transistor capacitance, with an inductor L1 and resistor RS in series connected to node X1. The NMOS transistor M1 has its gate connected to node b1, its source to ground, and its drain to the LOAD. A capacitor CGS is connected between node b1 and ground.\n\nimage_name:(b)\ndescription:The image labeled '(b)' is a chip photograph of a 300 GHz CMOS oscillator. The photograph reveals a segment of an integrated circuit, likely fabricated using 65 nm technology. The layout includes several notable features:\n\n1. **Components and Structure:**\n- The central element is a spiral inductor, a standard component in RF circuits for creating resonant circuits. This inductor consists of multiple concentric loops of metal traces on the silicon substrate.\n- Surrounding the inductor are various rectangular and polygonal metal pads or structures, potentially serving as connection points or other passive components.\n- The design is compact, typical of high-frequency integrated circuits where minimizing parasitic elements is crucial.\n\n2. **Connections and Interactions:**\n- The spiral inductor is connected to other circuit parts via metal traces extending from its ends, facilitating signal routing.\n- The surrounding metal pads might act as connections for additional components like capacitors or transistors, forming the complete oscillator circuit.\n\n3. **Labels, Annotations, and Key Features:**\n- The chip photograph lacks visible labels or annotations, common in microphotographs of integrated circuits. However, the provided context indicates this section is part of a high-frequency oscillator circuit.\n- The design's symmetry and the presence of the spiral inductor suggest optimization for RF performance, likely minimizing losses and maximizing the inductor's Q-factor.\n\n(a) Utilizing resonance to counter transistor capacitance, (b) chip photograph of a 300 GHz CMOS oscillator."
},
{
    "text": "Given the presence of various capacitances around bipolar and MOS devices, is it feasible to identify a metric that encapsulates the ultimate speed of a transistor? Such a metric would be invaluable for comparing different transistor types or generations and for forecasting the performance of circuits that incorporate these devices.\n\nimage_name:Q_1\ndescription:\n[\nname: I_in, type: CurrentSource, value: I_in, ports: {Np: GND, Nn: Vin}\nname: Q_1, type: NPN, ports: {C: I_out, B: Vin, E: GND}\n]\nextrainfo:The circuit diagram illustrates two setups: one featuring an NPN transistor Q1 and the other an NMOS transistor M1. Both are employed to measure the transit frequency f_T by injecting a sinusoidal current I_in and measuring the resulting output current I_out.\n\nimage_name:M_1\ndescription:\n[\nname: I_in, type: CurrentSource, value: I_in, ports: {Np: GND, Nn: Vin}\nname: M1, type: NMOS, ports: {S: GND, D: GND, G: Vin}\n]\nextrainfo:The circuit comprises a current source, a capacitor, and two NMOS transistors. These NMOS transistors are configured with their sources connected to ground and gates to Vin, sharing a common drain node I_out.\n\nFigure 11.27 Conceptual setup for measuring the $f_{T}$ of transistors.\nA key indicator of a transistor's intrinsic speed ${ }^{8}$ is the \"transit\" or \"cut-off\" frequency, $f_{T}$, defined as the frequency at which the small-signal current gain of the device drops to unity. As depicted in Fig. 11.27 (excluding biasing circuitry), the approach involves injecting a sinusoidal current into the base or gate and measuring the resulting collector or drain current as the input frequency, $f_{i n}$, is increased. It is observed that as $f_{i n}$ rises, the device's input capacitance decreases the input impedance, $Z_{i n}$, thereby affecting the input voltage $V_{i n}=I_{i n} Z_{i n}$ and the output current. Here, $C_{\\mu}$ and $C_{G D}$ are disregarded (but considered in Problem 11.26). For the bipolar device in Fig. 11.27(a),\n\n$$\n\\begin{equation*}\nZ_{i n}=\\frac{1}{C_{\\pi} s} \\| r_{\\pi} \\tag{11.43}\n\\end{equation*}\n$$\n\nGiven $I_{\\text {out }}=g_{m} I_{\\text {in }} Z_{\\text {in }}$,\n\n$$\n\\begin{align*}\n\\frac{I_{\\text {out }}}{I_{\\text {in }}} & =\\frac{g_{m} r_{\\pi}}{r_{\\pi} C_{\\pi} s+1}  \\tag{11.44}\\\\\n& =\\frac{\\beta}{r_{\\pi} C_{\\pi} s+1} . \\tag{11.45}\n\\end{align*}\n$$\n\nAt the transit frequency, $\\omega_{T}\\left(=2 \\pi f_{T}\\right)$, the current gain's magnitude drops to unity:\n\n$$\n\\begin{align*}\nr_{\\pi}^{2} C_{\\pi}^{2} \\omega_{T}^{2} & =\\beta^{2}-1  \\tag{11.46}\\\\\n& \\approx \\beta^{2} . \\tag{11.47}\n\\end{align*}\n$$\n\nThus,\n\n$$\n\\begin{equation*}\n\\omega_{T} \\approx \\frac{g_{m}}{C_{\\pi}} \\tag{11.48}\n\\end{equation*}\n$$\n\nThe transit frequency for MOSFETs is derived similarly. Hence, we express:\n\n$$\n\\begin{equation*}\n2 \\pi f_{T} \\approx \\frac{g_{m}}{C_{\\pi}} \\quad \\text { or } \\quad \\frac{g_{m}}{C_{G S}} . \\tag{11.49}\n\\end{equation*}\n$$\n\nNote that the collector-substrate or drain-bulk capacitance does not influence $f_{T}$ due to the AC ground at the output.\n\nModern bipolar and MOS transistors exhibit $f_{T}$ values exceeding 100 GHz. However, the speed of complex circuits using these devices is significantly lower.\n\nThe minimum channel length of MOSFETs has reduced from $1 \\mu \\mathrm{~m}$ in the late 1980s 11.14 to 65 nm today. Additionally, the inevitable decrease in supply voltage has lowered the gate-source overdrive voltage from approximately 400 mV to 100 mV. By what factor has the $f_{T}$ of MOSFETs increased?\n${ }^{8}$ \"Intrinsic\" speed refers to the device's performance in isolation, without any external circuit limitations or enhancements.\n\nSolution It can be demonstrated (Problem 11.28) that\n\n$$\n\\begin{equation*}\n2 \\pi f_{T}=\\frac{3}{2} \\frac{\\mu_{n}}{L^{2}}\\left(V_{G S}-V_{T H}\\right) \\tag{11.50}\n\\end{equation*}\n$$\n\nConsequently, the transit frequency has increased by roughly a factor of 59. For instance, if $\\mu_{n}=400 \\mathrm{~cm}^{2} /(\\mathrm{V} \\cdot \\mathrm{s})$, then 65 nm devices with a 100 mV overdrive exhibit an $f_{T}$ of 226 GHz.\n\nExercise\nCalculate the $f_{T}$ if the channel length is reduced to 45 nm but the mobility decreases to $300 \\mathrm{~cm}^{2} /(\\mathrm{V} \\cdot \\mathrm{s})$.\n\nDid you know?\n\nIf the $f_{T}$ of 65 nm MOSFETs is around 220 GHz, can these devices operate at higher frequencies? Indeed, they can. The trick is to use inductors to counteract the effects of capacitors. Suppose, as shown in Fig. (a), inductor $L_{1}$ is placed in parallel with $C_{G S}$. (This inductor, realized as a metal spiral on the chip, has some resistance, $R_{S \\text {.) }}$ At the resonance frequency, $\\omega_{0}=1 / \\sqrt{L_{1} C_{G S}}$, the parallel combination behaves like a single resistor, effectively negating $M_{1}$'s gate-source capacitance! Due to this, on-chip inductors are now prevalent in high-frequency design. Figure (b) shows a chip photograph of a 300 GHz oscillator designed by the author using 65 nm technology. Such high frequencies are utilized in medical imaging.\n\nimage_name:(a)\ndescription:\n[\nname: RS, type: Resistor, value: RS, ports: {N1: X1, N2: b1}\nname: L1, type: Inductor, value: L1, ports: {N1: X1, N2: GND}\nname: CGS, type: Capacitor, ports: {Np: b1, Nn: GND}\nname: M1, type: NMOS, ports: {S: GND, D: LOAD, G: b1}\n]\nextrainfo:The circuit employs resonance to neutralize transistor capacitance, with an inductor L1 and resistor RS in series connected to node X1. The NMOS transistor M1 has its gate connected to node b1, its source to ground, and its drain to the LOAD. A capacitor CGS is connected between node b1 and ground.\n\nimage_name:(b)\ndescription:The image labeled '(b)' is a chip photograph of a 300 GHz CMOS oscillator. The photograph displays a segment of an integrated circuit, likely fabricated using 65 nm technology. The layout includes several notable features:\n\n1. **Components and Structure:**\n- The central element is a spiral inductor, commonly used in RF circuits for creating resonant circuits. This inductor consists of multiple concentric loops of metal traces on the silicon substrate.\n- Surrounding the inductor are various rectangular and polygonal metal pads or structures, potentially serving as connection points or other passive components.\n- The design is compact, typical of high-frequency integrated circuits where minimizing parasitic elements is crucial.\n\n2. **Connections and Interactions:**\n- The spiral inductor is connected to other parts of the circuit via metal traces extending from its ends, facilitating signal routing.\n- The surrounding metal pads might function as connections for other components like capacitors or transistors, forming the complete oscillator circuit.\n\n3. **Labels, Annotations, and Key Features:**\n- The chip photograph lacks visible labels or annotations, common in microphotographs of integrated circuits. However, the context indicates this is part of a high-frequency oscillator circuit.\n- The design's symmetry and the presence of the spiral inductor suggest optimization for RF performance, likely minimizing losses and maximizing the inductor's Q-factor.\n\n(a) Utilizing resonance to counteract transistor capacitance, (b) chip photograph of a 300 GHz CMOS oscillator."
},
{
    "text": "Given the various capacitances associated with bipolar and MOS devices, can a quantity be defined that represents the ultimate speed of a transistor? Such a metric would be invaluable for comparing different transistor types or generations and for predicting the performance of circuits that incorporate these devices.\n\n**Image Description: Q_1**\n- **Components:**\n  - **I_in:** Type: CurrentSource, Value: I_in, Ports: {Np: GND, Nn: Vin}\n  - **Q_1:** Type: NPN, Ports: {C: I_out, B: Vin, E: GND}\n- **Additional Info:** The circuit diagram illustrates two setups: one with an NPN transistor Q1 and another with an NMOS transistor M1. Both are used to measure the transit frequency f_T by injecting a sinusoidal current I_in and measuring the output current I_out.\n\n**Image Description: M_1**\n- **Components:**\n  - **I_in:** Type: CurrentSource, Value: I_in, Ports: {Np: GND, Nn: Vin}\n  - **M1:** Type: NMOS, Ports: {S: GND, D: GND, G: Vin}\n- **Additional Info:** The circuit comprises a current source, a capacitor, and two NMOS transistors. The NMOS transistors are configured with their sources to ground and gates to Vin, sharing a common drain node I_out.\n\n**Figure 11.27** illustrates the conceptual setup for measuring the $f_{T}$ of transistors. A key measure of a transistor's intrinsic speed ${ }^{8}$ is the \"transit\" or \"cut-off\" frequency, $f_{T}$, defined as the frequency at which the small-signal current gain of the device drops to unity. As depicted in Fig. 11.27 (excluding biasing circuitry), the approach involves injecting a sinusoidal current into the base or gate and measuring the resulting collector or drain current as the input frequency, $f_{i n}$, is increased. It is observed that as $f_{i n}$ rises, the device's input capacitance decreases the input impedance, $Z_{i n}$, thereby affecting the input voltage $V_{i n}=I_{i n} Z_{i n}$ and the output current. Here, $C_{\\mu}$ and $C_{G D}$ are neglected (though considered in Problem 11.26). For the bipolar device in Fig. 11.27(a),\n\n$$\n\\begin{equation*}\nZ_{i n}=\\frac{1}{C_{\\pi} s} \\| r_{\\pi} \\tag{11.43}\n\\end{equation*}\n$$\n\nGiven $I_{\\text {out }}=g_{m} I_{\\text {in }} Z_{\\text {in }}$,\n\n$$\n\\begin{align*}\n\\frac{I_{\\text {out }}}{I_{\\text {in }}} & =\\frac{g_{m} r_{\\pi}}{r_{\\pi} C_{\\pi} s+1}  \\tag{11.44}\\\\\n& =\\frac{\\beta}{r_{\\pi} C_{\\pi} s+1} . \\tag{11.45}\n\\end{align*}\n$$\n\nAt the transit frequency, $\\omega_{T}\\left(=2 \\pi f_{T}\\right)$, the current gain's magnitude drops to unity:\n\n$$\n\\begin{align*}\nr_{\\pi}^{2} C_{\\pi}^{2} \\omega_{T}^{2} & =\\beta^{2}-1  \\tag{11.46}\\\\\n& \\approx \\beta^{2} . \\tag{11.47}\n\\end{align*}\n$$\n\nThus,\n\n$$\n\\begin{equation*}\n\\omega_{T} \\approx \\frac{g_{m}}{C_{\\pi}} \\tag{11.48}\n\\end{equation*}\n$$\n\nThe transit frequency for MOSFETs is derived similarly. Therefore,\n\n$$\n\\begin{equation*}\n2 \\pi f_{T} \\approx \\frac{g_{m}}{C_{\\pi}} \\quad \\text { or } \\quad \\frac{g_{m}}{C_{G S}} . \\tag{11.49}\n\\end{equation*}\n$$\n\nNote that the collector-substrate or drain-bulk capacitance does not impact $f_{T}$ due to the AC ground at the output.\n\nModern bipolar and MOS transistors achieve $f_{T}$ values exceeding 100 GHz. However, the speed of complex circuits using these devices is significantly lower.\n\nThe minimum channel length of MOSFETs has scaled from $1 \\mu \\mathrm{~m}$ in the late 1980s to 65 nm today. Concurrently, the supply voltage reduction has decreased the gate-source overdrive voltage from about 400 mV to 100 mV. By what factor has the $f_{T}$ of MOSFETs increased?\n${ }^{8}$ \"Intrinsic\" speed refers to the device's performance in isolation, without external circuit limitations or enhancements.\n\n**Solution:** It can be shown (Problem 11.28) that\n\n$$\n\\begin{equation*}\n2 \\pi f_{T}=\\frac{3}{2} \\frac{\\mu_{n}}{L^{2}}\\left(V_{G S}-V_{T H}\\right) \\tag{11.50}\n\\end{equation*}\n$$\n\nHence, the transit frequency has increased by roughly a factor of 59. For instance, with $\\mu_{n}=400 \\mathrm{~cm}^{2} /(\\mathrm{V} \\cdot \\mathrm{s})$, 65 nm devices with a 100 mV overdrive exhibit an $f_{T}$ of 226 GHz.\n\n**Exercise:**\nDetermine the $f_{T}$ if the channel length is reduced to 45 nm while the mobility decreases to $300 \\mathrm{~cm}^{2} /(\\mathrm{V} \\cdot \\mathrm{s})$.\n\n**Did You Know?**\n\nIf the $f_{T}$ of 65 nm MOSFETs is around 220 GHz, can these devices operate at higher frequencies? Yes, they can. The trick is to use inductors to counteract capacitor effects. Suppose, as shown in Fig. (a), inductor $L_{1}$ is placed in parallel with $C_{G S}$. (This inductor, realized as a metal spiral on the chip, has some resistance, $R_{S}$.) At the resonance frequency, $\\omega_{0}=1 / \\sqrt{L_{1} C_{G S}}$, the parallel combination behaves like a single resistor, effectively negating $M_{1}$'s gate-source capacitance! Consequently, on-chip inductors are now prevalent in high-frequency design. Fig. (b) shows a chip photograph of a 300 GHz oscillator designed by the author using 65 nm technology. Such high frequencies are utilized in medical imaging.\n\n**Image Description: (a)**\n- **Components:**\n  - **RS:** Type: Resistor, Value: RS, Ports: {N1: X1, N2: b1}\n  - **L1:** Type: Inductor, Value: L1, Ports: {N1: X1, N2: GND}\n  - **CGS:** Type: Capacitor, Ports: {Np: b1, Nn: GND}\n  - **M1:** Type: NMOS, Ports: {S: GND, D: LOAD, G: b1}\n- **Additional Info:** The circuit employs resonance to cancel transistor capacitance, with inductor L1 and resistor RS in series to node X1. The NMOS transistor M1 has its gate connected to node b1, source to ground, and drain to the LOAD. A capacitor CGS is connected between node b1 and ground.\n\n**Image Description: (b)**\nThe image labeled '(b)' is a chip photograph of a 300 GHz CMOS oscillator. It displays a section of an integrated circuit, likely fabricated using 65 nm technology. The layout includes several distinct features:\n\n1. **Components and Structure:**\n   - The central element is a spiral inductor, a common component in RF circuits for creating resonant circuits. This inductor consists of concentric metal trace loops on the silicon substrate.\n   - Surrounding the inductor are various rectangular and polygonal metal pads or structures, potentially serving as connection points or other passive components.\n   - The design is compact, typical of high-frequency integrated circuits where minimizing parasitic elements is crucial.\n\n2. **Connections and Interactions:**\n   - The spiral inductor is connected to other circuit parts via metal traces extending from its ends, routing signals.\n   - The surrounding metal pads may connect other components like capacitors or transistors, forming the complete oscillator circuit.\n\n3. **Labels, Annotations, and Key Features:**\n   - The chip photograph lacks visible labels or annotations, typical of microphotographs of integrated circuits. However, the context indicates it is part of a high-frequency oscillator circuit.\n   - The design's symmetry and the presence of the spiral inductor suggest optimization for RF performance, minimizing losses and maximizing the inductor's Q-factor.\n\n(a) Resonance usage to cancel transistor capacitance, (b) chip photograph of a 300 GHz CMOS oscillator."
},
{
    "text": "Given the various capacitances associated with bipolar and MOS devices, can a quantity be defined that represents the ultimate speed of a transistor? Such a metric would be invaluable for comparing different transistor types or generations and for predicting the performance of circuits that incorporate these devices.\n\nimage_name:Q_1\ndescription:\n[\nname: I_in, type: CurrentSource, value: I_in, ports: {Np: GND, Nn: Vin}\nname: Q_1, type: NPN, ports: {C: I_out, B: Vin, E: GND}\n]\nextrainfo:The circuit diagram illustrates two setups: one featuring an NPN transistor Q1 and the other an NMOS transistor M1. Both are used to measure the transit frequency f_T by injecting a sinusoidal current I_in and measuring the output current I_out.\n\nimage_name:M_1\ndescription:\n[\nname: I_in, type: CurrentSource, value: I_in, ports: {Np: GND, Nn: Vin}\nname: M1, type: NMOS, ports: {S: GND, D: GND, G: Vin}\n]\nextrainfo:The circuit comprises a current source, a capacitor, and two NMOS transistors. These NMOS transistors are configured with their sources connected to ground and gates to Vin, sharing a common drain node I_out.\n\nFigure 11.27 Conceptual setup for measuring the $f_{T}$ of transistors.\nA key measure of a transistor's intrinsic speed ${ }^{8}$ is the \"transit\" or \"cut-off\" frequency, $f_{T}$, defined as the frequency at which the small-signal current gain of the device drops to unity. As depicted in Fig. 11.27 (excluding biasing circuitry), the approach involves injecting a sinusoidal current into the base or gate and measuring the resulting collector or drain current as the input frequency, $f_{i n}$, is increased. It is observed that as $f_{i n}$ rises, the device's input capacitance decreases the input impedance, $Z_{i n}$, thereby affecting the input voltage $V_{i n}=I_{i n} Z_{i n}$ and the output current. Here, $C_{\\mu}$ and $C_{G D}$ are disregarded (though considered in Problem 11.26). For the bipolar device in Fig. 11.27(a),\n\n$$\n\\begin{equation*}\nZ_{i n}=\\frac{1}{C_{\\pi} s} \\| r_{\\pi} \\tag{11.43}\n\\end{equation*}\n$$\n\nGiven $I_{\\text {out }}=g_{m} I_{\\text {in }} Z_{\\text {in }}$,\n\n$$\n\\begin{align*}\n\\frac{I_{\\text {out }}}{I_{\\text {in }}} & =\\frac{g_{m} r_{\\pi}}{r_{\\pi} C_{\\pi} s+1}  \\tag{11.44}\\\\\n& =\\frac{\\beta}{r_{\\pi} C_{\\pi} s+1} . \\tag{11.45}\n\\end{align*}\n$$\n\nAt the transit frequency, $\\omega_{T}\\left(=2 \\pi f_{T}\\right)$, the current gain's magnitude drops to unity:\n\n$$\n\\begin{align*}\nr_{\\pi}^{2} C_{\\pi}^{2} \\omega_{T}^{2} & =\\beta^{2}-1  \\tag{11.46}\\\\\n& \\approx \\beta^{2} . \\tag{11.47}\n\\end{align*}\n$$\n\nThus,\n\n$$\n\\begin{equation*}\n\\omega_{T} \\approx \\frac{g_{m}}{C_{\\pi}} \\tag{11.48}\n\\end{equation*}\n$$\n\nThe transit frequency for MOSFETs is derived similarly. Hence, we express:\n\n$$\n\\begin{equation*}\n2 \\pi f_{T} \\approx \\frac{g_{m}}{C_{\\pi}} \\quad \\text { or } \\quad \\frac{g_{m}}{C_{G S}} . \\tag{11.49}\n\\end{equation*}\n$$\n\nNote that the collector-substrate or drain-bulk capacitance does not influence $f_{T}$ due to the AC ground at the output.\n\nModern bipolar and MOS transistors achieve $f_{T}$ values exceeding 100 GHz. However, the speed of complex circuits using these devices is significantly lower.\n\nThe minimum channel length of MOSFETs has decreased from $1 \\mu \\mathrm{~m}$ in the late 1980s 11.14 to 65 nm today. Concurrently, the reduction in supply voltage has decreased the gate-source overdrive voltage from about 400 mV to 100 mV. By what factor has the $f_{T}$ of MOSFETs increased?\n${ }^{8}$ \"Intrinsic\" speed refers to the device's performance in isolation, without any circuit-imposed limitations or enhancements.\n\nSolution It can be demonstrated (Problem 11.28) that\n\n$$\n\\begin{equation*}\n2 \\pi f_{T}=\\frac{3}{2} \\frac{\\mu_{n}}{L^{2}}\\left(V_{G S}-V_{T H}\\right) \\tag{11.50}\n\\end{equation*}\n$$\n\nConsequently, the transit frequency has increased by approximately a factor of 59. For instance, if $\\mu_{n}=400 \\mathrm{~cm}^{2} /(\\mathrm{V} \\cdot \\mathrm{s})$, then 65 nm devices with a 100 mV overdrive exhibit an $f_{T}$ of 226 GHz.\n\nExercise\nCalculate the $f_{T}$ if the channel length is reduced to 45 nm but the mobility decreases to $300 \\mathrm{~cm}^{2} /(\\mathrm{V} \\cdot \\mathrm{s})$.\n\nDid you know?\n\nIf the $f_{T}$ of 65 nm MOSFETs is around 220 GHz, can these devices operate at even higher frequencies? Indeed, they can. The trick is to use inductors to counteract the effects of capacitors. Imagine, as shown in Fig. (a), placing inductor $L_{1}$ in parallel with $C_{G S}$. (This inductor, realized as a metal spiral on the chip, has some resistance, $R_{S \\text {.) }}$ At the resonance frequency, $\\omega_{0}=1 / \\sqrt{L_{1} C_{G S}}$, the parallel combination behaves like a single resistor, effectively negating $M_{1}$'s gate-source capacitance! Due to this, on-chip inductors are now common in high-frequency design. Figure (b) shows a chip photograph of a 300 GHz oscillator designed by the author using 65 nm technology. Such high frequencies are utilized in medical imaging.\n\nimage_name:(a)\ndescription:\n[\nname: RS, type: Resistor, value: RS, ports: {N1: X1, N2: b1}\nname: L1, type: Inductor, value: L1, ports: {N1: X1, N2: GND}\nname: CGS, type: Capacitor, ports: {Np: b1, Nn: GND}\nname: M1, type: NMOS, ports: {S: GND, D: LOAD, G: b1}\n]\nextrainfo:The circuit employs resonance to neutralize transistor capacitance, with an inductor L1 and resistor RS in series connected to node X1. The NMOS transistor M1 has its gate connected to node b1, its source to ground, and its drain to the LOAD. A capacitor CGS is connected between node b1 and ground.\n\nimage_name:(b)\ndescription:The image labeled '(b)' is a chip photograph of a 300 GHz CMOS oscillator. The photograph displays a section of an integrated circuit, likely fabricated using 65 nm technology. The layout includes several notable features:\n\n1. **Components and Structure:**\n- The central element is a spiral inductor, a common component in RF circuits for creating resonant circuits. This inductor consists of a series of concentric metal trace loops on the silicon substrate.\n- Surrounding the inductor are several rectangular and polygonal metal pads or structures, potentially serving as connection points or other passive components.\n- The design is compact, typical of high-frequency integrated circuits where minimizing parasitic elements is crucial.\n\n2. **Connections and Interactions:**\n- The spiral inductor is connected to other circuit parts via metal traces extending from its ends, routing signals to and from the inductor.\n- The surrounding metal pads might function as connections for other components like capacitors or transistors, forming the complete oscillator circuit.\n\n3. **Labels, Annotations, and Key Features:**\n- The chip photograph lacks visible labels or annotations, common in microphotographs of integrated circuits. However, the provided context indicates this is part of a high-frequency oscillator circuit.\n- The design's symmetry and the presence of the spiral inductor suggest optimization for RF performance, likely minimizing losses and maximizing the inductor's Q-factor.\n\n(a) Utilizing resonance to cancel transistor capacitance, (b) chip photograph of a 300 GHz CMOS oscillator."
},
{
    "text": "Given the various capacitances around bipolar and MOS devices, can a quantity be defined that represents the ultimate speed of the transistor? Such a quantity would be valuable for comparing different transistor types or generations and for predicting the performance of circuits that incorporate these devices.\n\nImage Description: Q_1\n- Name: I_in, Type: CurrentSource, Value: I_in, Ports: {Np: GND, Nn: Vin}\n- Name: Q_1, Type: NPN, Ports: {C: I_out, B: Vin, E: GND}\n\nExtra Info: The circuit diagram illustrates two setups: one with an NPN transistor Q1 and another with an NMOS transistor M1. Both are used to measure the transit frequency f_T by injecting a sinusoidal current I_in and measuring the output current I_out.\n\nImage Description: M_1\n- Name: I_in, Type: CurrentSource, Value: I_in, Ports: {Np: GND, Nn: Vin}\n- Name: M1, Type: NMOS, Ports: {S: GND, D: GND, G: Vin}\n\nExtra Info: The circuit comprises a current source, a capacitor, and two NMOS transistors. The NMOS transistors are configured with their sources to ground and gates to Vin, sharing a common drain node I_out.\n\nFigure 11.27 illustrates the conceptual setup for measuring the $f_{T}$ of transistors. A key measure of a transistor's intrinsic speed is the \"transit\" or \"cut-off\" frequency, $f_{T}$, defined as the frequency at which the small-signal current gain drops to unity. As shown in Fig. 11.27 (excluding biasing circuitry), the method involves injecting a sinusoidal current into the base or gate and measuring the resulting collector or drain current as the input frequency, $f_{i n}$, increases. It is observed that as $f_{i n}$ rises, the device's input capacitance decreases the input impedance, $Z_{i n}$, thereby affecting the input voltage $V_{i n}=I_{i n} Z_{i n}$ and the output current. Here, $C_{\\mu}$ and $C_{G D}$ are neglected (though considered in Problem 11.26). For the bipolar device in Fig. 11.27(a),\n\n$$\n\\begin{equation*}\nZ_{i n}=\\frac{1}{C_{\\pi} s} \\| r_{\\pi} \\tag{11.43}\n\\end{equation*}\n$$\n\nSince $I_{\\text {out }}=g_{m} I_{\\text {in }} Z_{\\text {in }}$,\n\n$$\n\\begin{align*}\n\\frac{I_{\\text {out }}}{I_{\\text {in }}} & =\\frac{g_{m} r_{\\pi}}{r_{\\pi} C_{\\pi} s+1}  \\tag{11.44}\\\\\n& =\\frac{\\beta}{r_{\\pi} C_{\\pi} s+1} . \\tag{11.45}\n\\end{align*}\n$$\n\nAt the transit frequency, $\\omega_{T}\\left(=2 \\pi f_{T}\\right)$, the current gain's magnitude drops to unity:\n\n$$\n\\begin{align*}\nr_{\\pi}^{2} C_{\\pi}^{2} \\omega_{T}^{2} & =\\beta^{2}-1  \\tag{11.46}\\\\\n& \\approx \\beta^{2} . \\tag{11.47}\n\\end{align*}\n$$\n\nThus,\n\n$$\n\\begin{equation*}\n\\omega_{T} \\approx \\frac{g_{m}}{C_{\\pi}} \\tag{11.48}\n\\end{equation*}\n$$\n\nThe transit frequency for MOSFETs is derived similarly. Hence, we write:\n\n$$\n\\begin{equation*}\n2 \\pi f_{T} \\approx \\frac{g_{m}}{C_{\\pi}} \\quad \\text { or } \\quad \\frac{g_{m}}{C_{G S}} . \\tag{11.49}\n\\end{equation*}\n$$\n\nNote that the collector-substrate or drain-bulk capacitance does not influence $f_{T}$ due to the AC ground at the output.\n\nModern bipolar and MOS transistors achieve $f_{T}$ values exceeding 100 GHz. However, the speed of complex circuits using these devices is significantly lower.\n\nThe minimum channel length of MOSFETs has shrunk from $1 \\mu \\mathrm{~m}$ in the late 1980s to 65 nm today. Additionally, the inevitable decrease in supply voltage has reduced the gate-source overdrive voltage from about 400 mV to 100 mV. By what factor has the $f_{T}$ of MOSFETs increased?\n${ }^{8}$ \"Intrinsic\" speed refers to the device's performance in isolation, without external circuit limitations or enhancements.\n\nSolution: It can be demonstrated (Problem 11.28) that\n\n$$\n\\begin{equation*}\n2 \\pi f_{T}=\\frac{3}{2} \\frac{\\mu_{n}}{L^{2}}\\left(V_{G S}-V_{T H}\\right) \\tag{11.50}\n\\end{equation*}\n$$\n\nThus, the transit frequency has increased by roughly a factor of 59. For instance, if $\\mu_{n}=400 \\mathrm{~cm}^{2} /(\\mathrm{V} \\cdot \\mathrm{s})$, then 65 nm devices with a 100 mV overdrive exhibit an $f_{T}$ of 226 GHz.\n\nExercise:\nCalculate the $f_{T}$ if the channel length is reduced to 45 nm but the mobility decreases to $300 \\mathrm{~cm}^{2} /(\\mathrm{V} \\cdot \\mathrm{s})$.\n\nDid You Know?\n\nIf the $f_{T}$ of 65 nm MOSFETs is around 220 GHz, can these devices operate at higher frequencies? Indeed, they can. The key is using inductors to counteract capacitor effects. Suppose, as shown in Fig. (a), inductor $L_{1}$ is placed in parallel with $C_{G S}$. (This inductor, realized as a metal spiral on the chip, has some resistance, $R_{S}$.) At the resonance frequency, $\\omega_{0}=1 / \\sqrt{L_{1} C_{G S}}$, the parallel combination behaves like a single resistor, nearly as if $M_{1}$ had no gate-source capacitance! Consequently, on-chip inductors are now common in high-frequency design. Figure (b) shows a chip photograph of a 300 GHz oscillator designed by the author using 65 nm technology. Such high frequencies are utilized in medical imaging.\n\nImage Description: (a)\n- Name: RS, Type: Resistor, Value: RS, Ports: {N1: X1, N2: b1}\n- Name: L1, Type: Inductor, Value: L1, Ports: {N1: X1, N2: GND}\n- Name: CGS, Type: Capacitor, Ports: {Np: b1, Nn: GND}\n- Name: M1, Type: NMOS, Ports: {S: GND, D: LOAD, G: b1}\n\nExtra Info: The circuit employs resonance to neutralize transistor capacitance, with inductor L1 and resistor RS in series connected to node X1. The NMOS transistor M1 has its gate connected to node b1, its source to ground, and its drain to the LOAD. A capacitor CGS is connected between node b1 and ground.\n\nImage Description: (b)\nThe image labeled '(b)' is a chip photograph of a 300 GHz CMOS oscillator. The photograph depicts a section of an integrated circuit, likely fabricated using 65 nm technology. The layout includes several distinct features:\n\n1. **Components and Structure:**\n- The central feature is a spiral inductor, commonly used in RF circuits for creating resonant circuits. This inductor consists of concentric loops of metal traces on the silicon substrate.\n- Surrounding the inductor are various rectangular and polygonal metal pads or structures, potentially serving as connection points or other passive components.\n- The design is compact, typical of high-frequency integrated circuits where minimizing parasitic elements is crucial.\n\n2. **Connections and Interactions:**\n- The spiral inductor is connected to other circuit parts via metal traces extending from its ends, routing signals to and from the inductor.\n- The surrounding metal pads may connect other components like capacitors or transistors, forming the complete oscillator circuit.\n\n3. **Labels, Annotations, and Key Features:**\n- The chip photograph lacks visible labels or annotations, typical of microphotographs of integrated circuits. However, the context indicates it is part of a high-frequency oscillator circuit.\n- The design's symmetry and the presence of the spiral inductor suggest optimization for RF performance, likely minimizing losses and maximizing the inductor's Q-factor.\n\n(a) Resonance usage to cancel transistor capacitance, (b) chip photograph of a 300 GHz CMOS oscillator."
},
{
    "text": "Given the diverse capacitances around bipolar and MOS devices, can a metric be established that encapsulates the ultimate speed of a transistor? Such a metric would be invaluable for comparing different transistor types or generations and for forecasting the performance of circuits that incorporate these devices.\n\nimage_name:Q_1\ndescription:\n[\nname: I_in, type: CurrentSource, value: I_in, ports: {Np: GND, Nn: Vin}\nname: Q_1, type: NPN, ports: {C: I_out, B: Vin, E: GND}\n]\nextrainfo:This circuit diagram illustrates two setups: one featuring an NPN transistor Q1 and the other an NMOS transistor M1. Both are utilized to measure the transit frequency f_T by injecting a sinusoidal current I_in and observing the output current I_out.\n\nimage_name:M_1\ndescription:\n[\nname: I_in, type: CurrentSource, value: I_in, ports: {Np: GND, Nn: Vin}\nname: M1, type: NMOS, ports: {S: GND, D: GND, G: Vin}\n]\nextrainfo:The configuration comprises a current source, a capacitor, and two NMOS transistors. These NMOS transistors are set up with their sources connected to ground and gates to Vin, sharing a common drain node I_out.\n\nFigure 11.27 Conceptual setup for measuring the $f_{T}$ of transistors.\nA key indicator of a transistor's intrinsic speed ${ }^{8}$ is the \"transit\" or \"cut-off\" frequency, $f_{T}$, defined as the frequency at which the small-signal current gain of the device drops to unity. As depicted in Fig. 11.27 (excluding biasing circuitry), the approach involves injecting a sinusoidal current into the base or gate and measuring the resulting collector or drain current as the input frequency, $f_{i n}$, is incremented. It is observed that as $f_{i n}$ rises, the device's input capacitance decreases the input impedance, $Z_{i n}$, thereby affecting the input voltage $V_{i n}=I_{i n} Z_{i n}$ and the output current. Here, $C_{\\mu}$ and $C_{G D}$ are disregarded (though considered in Problem 11.26). For the bipolar device in Fig. 11.27(a),\n\n$$\n\\begin{equation*}\nZ_{i n}=\\frac{1}{C_{\\pi} s} \\| r_{\\pi} \\tag{11.43}\n\\end{equation*}\n$$\n\nGiven $I_{\\text {out }}=g_{m} I_{\\text {in }} Z_{\\text {in }}$,\n\n$$\n\\begin{align*}\n\\frac{I_{\\text {out }}}{I_{\\text {in }}} & =\\frac{g_{m} r_{\\pi}}{r_{\\pi} C_{\\pi} s+1}  \\tag{11.44}\\\\\n& =\\frac{\\beta}{r_{\\pi} C_{\\pi} s+1} . \\tag{11.45}\n\\end{align*}\n$$\n\nAt the transit frequency, $\\omega_{T}\\left(=2 \\pi f_{T}\\right)$, the current gain's magnitude drops to unity:\n\n$$\n\\begin{align*}\nr_{\\pi}^{2} C_{\\pi}^{2} \\omega_{T}^{2} & =\\beta^{2}-1  \\tag{11.46}\\\\\n& \\approx \\beta^{2} . \\tag{11.47}\n\\end{align*}\n$$\n\nThus,\n\n$$\n\\begin{equation*}\n\\omega_{T} \\approx \\frac{g_{m}}{C_{\\pi}} \\tag{11.48}\n\\end{equation*}\n$$\n\nThe transit frequency for MOSFETs is derived similarly. Hence, we express:\n\n$$\n\\begin{equation*}\n2 \\pi f_{T} \\approx \\frac{g_{m}}{C_{\\pi}} \\quad \\text { or } \\quad \\frac{g_{m}}{C_{G S}} . \\tag{11.49}\n\\end{equation*}\n$$\n\nNote that the collector-substrate or drain-bulk capacitance does not influence $f_{T}$ due to the AC ground at the output.\n\nModern bipolar and MOS transistors exhibit $f_{T}$ values exceeding 100 GHz. However, the speed of complex circuits using these devices is considerably lower.\n\nThe minimum channel length of MOSFETs has shrunk from $1 \\mu \\mathrm{~m}$ in the late 1980s 11.14 to 65 nm today. Concurrently, the inevitable decrease in supply voltage has reduced the gate-source overdrive voltage from approximately 400 mV to 100 mV. By what factor has the $f_{T}$ of MOSFETs increased?\n${ }^{8}$ \"Intrinsic\" speed refers to the device's performance in isolation, without external circuit limitations or enhancements.\n\nSolution It can be demonstrated (Problem 11.28) that\n\n$$\n\\begin{equation*}\n2 \\pi f_{T}=\\frac{3}{2} \\frac{\\mu_{n}}{L^{2}}\\left(V_{G S}-V_{T H}\\right) \\tag{11.50}\n\\end{equation*}\n$$\n\nConsequently, the transit frequency has increased by roughly a factor of 59. For instance, if $\\mu_{n}=400 \\mathrm{~cm}^{2} /(\\mathrm{V} \\cdot \\mathrm{s})$, then 65 nm devices with a 100 mV overdrive achieve an $f_{T}$ of 226 GHz.\n\nExercise\nCalculate the $f_{T}$ if the channel length is reduced to 45 nm, but the mobility decreases to $300 \\mathrm{~cm}^{2} /(\\mathrm{V} \\cdot \\mathrm{s})$.\n\nDid you know?\n\nIf the $f_{T}$ of 65 nm MOSFETs is around 220 GHz, can these devices operate at higher frequencies? Indeed, they can. The trick is to employ inductors to counteract the effects of capacitors. Suppose, as shown in Fig. (a), inductor $L_{1}$ is placed in parallel with $C_{G S}$. (This inductor, realized as a metal spiral on the chip, has some resistance, $R_{S \\text {.) }}$ At the resonance frequency, $\\omega_{0}=1 / \\sqrt{L_{1} C_{G S}}$, the parallel combination behaves like a single resistor, effectively negating $M_{1}$'s gate-source capacitance! Due to this, on-chip inductors are now prevalent in high-frequency design. Figure (b) displays a chip photograph of a 300 GHz oscillator designed by the author using 65 nm technology. Such high frequencies are utilized in medical imaging.\n\nimage_name:(a)\ndescription:\n[\nname: RS, type: Resistor, value: RS, ports: {N1: X1, N2: b1}\nname: L1, type: Inductor, value: L1, ports: {N1: X1, N2: GND}\nname: CGS, type: Capacitor, ports: {Np: b1, Nn: GND}\nname: M1, type: NMOS, ports: {S: GND, D: LOAD, G: b1}\n]\nextrainfo:This circuit employs resonance to neutralize transistor capacitance, with an inductor L1 and resistor RS in series connected to node X1. The NMOS transistor M1 has its gate connected to node b1, its source to ground, and its drain to the LOAD. A capacitor CGS is connected between node b1 and ground.\n\nimage_name:(b)\ndescription:The image labeled '(b)' is a chip photograph of a 300 GHz CMOS oscillator. The photograph showcases a segment of an integrated circuit, presumably fabricated using 65 nm technology. The layout features several notable elements:\n\n1. **Components and Structure:**\n- The central element is a spiral inductor, a common component in RF circuits for creating resonant circuits. This inductor consists of multiple concentric loops of metal traces on the silicon substrate.\n- Surrounding the inductor are various rectangular and polygonal metal pads or structures, potentially serving as connection points or other passive components.\n- The design is compact, typical of high-frequency integrated circuits where minimizing parasitic elements is crucial.\n\n2. **Connections and Interactions:**\n- The spiral inductor is likely linked to other circuit parts via metal traces extending from its ends, facilitating signal routing.\n- The surrounding metal pads might act as connections for additional components like capacitors or transistors, forming the complete oscillator circuit.\n\n3. **Labels, Annotations, and Key Features:**\n- The chip photograph lacks visible labels or annotations, common in microphotographs of integrated circuits. However, the context indicates this is part of a high-frequency oscillator circuit.\n- The design's symmetry and the presence of the spiral inductor suggest optimization for RF performance, likely minimizing losses and maximizing the inductor's Q-factor.\n\n(a) Resonance utilization to cancel transistor capacitance, (b) chip photograph of a 300 GHz CMOS oscillator."
},
{
    "text": "Given the various capacitances associated with bipolar and MOS devices, can a metric be established that quantifies the ultimate speed of a transistor? Such a metric would be invaluable for comparing different transistor types or generations and for predicting the performance of circuits that incorporate these devices.\n\nimage_name:Q_1\ndescription:\n[\nname: I_in, type: CurrentSource, value: I_in, ports: {Np: GND, Nn: Vin}\nname: Q_1, type: NPN, ports: {C: I_out, B: Vin, E: GND}\n]\nextrainfo:The circuit diagram illustrates two setups: one featuring an NPN transistor Q1 and the other an NMOS transistor M1. Both are employed to measure the transit frequency f_T by injecting a sinusoidal current I_in and measuring the resulting output current I_out.\n\nimage_name:M_1\ndescription:\n[\nname: I_in, type: CurrentSource, value: I_in, ports: {Np: GND, Nn: Vin}\nname: M1, type: NMOS, ports: {S: GND, D: GND, G: Vin}\n]\nextrainfo:The circuit comprises a current source, a capacitor, and two NMOS transistors. These NMOS transistors are configured with their sources connected to ground and gates to Vin, sharing a common drain node I_out.\n\nFigure 11.27 Conceptual setup for measuring the $f_{T}$ of transistors.\nA key indicator of a transistor's intrinsic speed ${ }^{8}$ is the \"transit\" or \"cut-off\" frequency, $f_{T}$, defined as the frequency at which the small-signal current gain of the device drops to unity. As depicted in Fig. 11.27 (excluding biasing circuitry), the approach involves injecting a sinusoidal current into the base or gate and measuring the resulting collector or drain current as the input frequency, $f_{i n}$, is increased. It is observed that as $f_{i n}$ rises, the device's input capacitance decreases the input impedance, $Z_{i n}$, thereby affecting the input voltage $V_{i n}=I_{i n} Z_{i n}$ and the output current. Here, $C_{\\mu}$ and $C_{G D}$ are disregarded (though considered in Problem 11.26). For the bipolar device in Fig. 11.27(a),\n\n$$\n\\begin{equation*}\nZ_{i n}=\\frac{1}{C_{\\pi} s} \\| r_{\\pi} \\tag{11.43}\n\\end{equation*}\n$$\n\nGiven $I_{\\text {out }}=g_{m} I_{\\text {in }} Z_{\\text {in }}$,\n\n$$\n\\begin{align*}\n\\frac{I_{\\text {out }}}{I_{\\text {in }}} & =\\frac{g_{m} r_{\\pi}}{r_{\\pi} C_{\\pi} s+1}  \\tag{11.44}\\\\\n& =\\frac{\\beta}{r_{\\pi} C_{\\pi} s+1} . \\tag{11.45}\n\\end{align*}\n$$\n\nAt the transit frequency, $\\omega_{T}\\left(=2 \\pi f_{T}\\right)$, the current gain's magnitude drops to unity:\n\n$$\n\\begin{align*}\nr_{\\pi}^{2} C_{\\pi}^{2} \\omega_{T}^{2} & =\\beta^{2}-1  \\tag{11.46}\\\\\n& \\approx \\beta^{2} . \\tag{11.47}\n\\end{align*}\n$$\n\nThus,\n\n$$\n\\begin{equation*}\n\\omega_{T} \\approx \\frac{g_{m}}{C_{\\pi}} \\tag{11.48}\n\\end{equation*}\n$$\n\nThe transit frequency for MOSFETs is derived similarly. Hence, we express:\n\n$$\n\\begin{equation*}\n2 \\pi f_{T} \\approx \\frac{g_{m}}{C_{\\pi}} \\quad \\text { or } \\quad \\frac{g_{m}}{C_{G S}} . \\tag{11.49}\n\\end{equation*}\n$$\n\nNote that the collector-substrate or drain-bulk capacitance does not influence $f_{T}$ due to the AC ground at the output.\n\nModern bipolar and MOS transistors achieve $f_{T}$ values exceeding 100 GHz. However, the speed of complex circuits using these devices is significantly lower.\n\nThe minimum channel length of MOSFETs has shrunk from $1 \\mu \\mathrm{~m}$ in the late 1980s 11.14 to 65 nm today. Concurrently, the inevitable reduction in supply voltage has decreased the gate-source overdrive voltage from approximately 400 mV to 100 mV. By what factor has the $f_{T}$ of MOSFETs increased?\n${ }^{8}$ \"Intrinsic\" speed refers to the device's performance in isolation, without any circuit-imposed limitations or enhancements.\n\nSolution It can be demonstrated (Problem 11.28) that\n\n$$\n\\begin{equation*}\n2 \\pi f_{T}=\\frac{3}{2} \\frac{\\mu_{n}}{L^{2}}\\left(V_{G S}-V_{T H}\\right) \\tag{11.50}\n\\end{equation*}\n$$\n\nConsequently, the transit frequency has increased by roughly a factor of 59. For instance, if $\\mu_{n}=400 \\mathrm{~cm}^{2} /(\\mathrm{V} \\cdot \\mathrm{s})$, then 65 nm devices with a 100 mV overdrive exhibit an $f_{T}$ of 226 GHz.\n\nExercise\nCalculate the $f_{T}$ if the channel length is reduced to 45 nm but the mobility decreases to $300 \\mathrm{~cm}^{2} /(\\mathrm{V} \\cdot \\mathrm{s})$.\n\nDid you know?\n\nIf the $f_{T}$ of 65 nm MOSFETs is around 220 GHz, can these devices operate at even higher frequencies? Indeed, they can. The trick is to use inductors to counteract the effects of capacitors. Suppose, as shown in Fig. (a), inductor $L_{1}$ is placed in parallel with $C_{G S}$. (This inductor, realized as a metal spiral on the chip, has some resistance, $R_{S \\text {.) }}$ At the resonance frequency, $\\omega_{0}=1 / \\sqrt{L_{1} C_{G S}}$, the parallel combination effectively becomes a single resistor, as if $M_{1}$ had no gate-source capacitance! Consequently, the use of on-chip inductors has become prevalent in high-frequency design. Figure (b) shows a chip photograph of a 300 GHz oscillator designed by the author using 65 nm technology. Such high frequencies are utilized in medical imaging.\n\nimage_name:(a)\ndescription:\n[\nname: RS, type: Resistor, value: RS, ports: {N1: X1, N2: b1}\nname: L1, type: Inductor, value: L1, ports: {N1: X1, N2: GND}\nname: CGS, type: Capacitor, ports: {Np: b1, Nn: GND}\nname: M1, type: NMOS, ports: {S: GND, D: LOAD, G: b1}\n]\nextrainfo:The circuit employs resonance to neutralize transistor capacitance, with an inductor L1 and resistor RS in series connected to node X1. The NMOS transistor M1 has its gate connected to node b1, its source to ground, and its drain to the LOAD. A capacitor CGS is connected between node b1 and ground.\n\nimage_name:(b)\ndescription:The image labeled '(b)' is a chip photograph of a 300 GHz CMOS oscillator. The photograph displays a segment of an integrated circuit, presumably fabricated using 65 nm technology. The layout includes several notable features:\n\n1. **Components and Structure:**\n- The central element is a spiral inductor, a common component in RF circuits for creating resonant circuits. This inductor consists of multiple concentric loops of metal traces on the silicon substrate.\n- Surrounding the inductor are several rectangular and polygonal metal pads or structures, potentially serving as connection points or other passive components.\n- The design is compact, typical of high-frequency integrated circuits where minimizing parasitic elements is crucial.\n\n2. **Connections and Interactions:**\n- The spiral inductor is likely connected to other circuit parts via metal traces extending from its ends, facilitating signal routing.\n- The surrounding metal pads might function as connections for additional components like capacitors or transistors, forming the complete oscillator circuit.\n\n3. **Labels, Annotations, and Key Features:**\n- The chip photograph lacks visible labels or annotations, common in microphotographs of integrated circuits. However, the provided context indicates this section is part of a high-frequency oscillator circuit.\n- The design's symmetry and the presence of the spiral inductor suggest optimization for RF performance, likely minimizing losses and maximizing the inductor's Q-factor.\n\n(a) Utilizing resonance to cancel transistor capacitance, (b) chip photograph of a 300 GHz CMOS oscillator."
},
{
    "text": "Given the diverse capacitances associated with bipolar and MOS devices, can a metric be established to signify the ultimate speed of a transistor? Such a metric would be invaluable for comparing various transistor types or generations and for forecasting the performance of circuits that incorporate these devices.\n\nimage_name:Q_1\ndescription:\n[\nname: I_in, type: CurrentSource, value: I_in, ports: {Np: GND, Nn: Vin}\nname: Q_1, type: NPN, ports: {C: I_out, B: Vin, E: GND}\n]\nextrainfo:The circuit diagram illustrates two setups: one featuring an NPN transistor Q1 and the other an NMOS transistor M1. Both are employed to measure the transit frequency f_T by injecting a sinusoidal current I_in and observing the output current I_out.\n\nimage_name:M_1\ndescription:\n[\nname: I_in, type: CurrentSource, value: I_in, ports: {Np: GND, Nn: Vin}\nname: M1, type: NMOS, ports: {S: GND, D: GND, G: Vin}\n]\nextrainfo:The circuit comprises a current source, a capacitor, and two NMOS transistors. These NMOS transistors are arranged with their sources connected to ground and gates to Vin, sharing a common drain node I_out.\n\nFigure 11.27 Conceptual setup for measuring the $f_{T}$ of transistors.\nA key indicator of a transistor's intrinsic speed ${ }^{8}$ is the \"transit\" or \"cut-off\" frequency, $f_{T}$, defined as the frequency at which the small-signal current gain of the device drops to unity. As depicted in Fig. 11.27 (excluding the biasing circuitry), the approach involves injecting a sinusoidal current into the base or gate and measuring the resulting collector or drain current as the input frequency, $f_{i n}$, is raised. It is observed that as $f_{i n}$ increases, the device's input capacitance decreases the input impedance, $Z_{i n}$, thereby affecting the input voltage $V_{i n}=I_{i n} Z_{i n}$ and the output current. Here, $C_{\\mu}$ and $C_{G D}$ are disregarded (though considered in Problem 11.26). For the bipolar device in Fig. 11.27(a),\n\n$$\n\\begin{equation*}\nZ_{i n}=\\frac{1}{C_{\\pi} s} \\| r_{\\pi} \\tag{11.43}\n\\end{equation*}\n$$\n\nGiven $I_{\\text {out }}=g_{m} I_{\\text {in }} Z_{\\text {in }}$,\n\n$$\n\\begin{align*}\n\\frac{I_{\\text {out }}}{I_{\\text {in }}} & =\\frac{g_{m} r_{\\pi}}{r_{\\pi} C_{\\pi} s+1}  \\tag{11.44}\\\\\n& =\\frac{\\beta}{r_{\\pi} C_{\\pi} s+1} . \\tag{11.45}\n\\end{align*}\n$$\n\nAt the transit frequency, $\\omega_{T}\\left(=2 \\pi f_{T}\\right)$, the current gain's magnitude drops to unity:\n\n$$\n\\begin{align*}\nr_{\\pi}^{2} C_{\\pi}^{2} \\omega_{T}^{2} & =\\beta^{2}-1  \\tag{11.46}\\\\\n& \\approx \\beta^{2} . \\tag{11.47}\n\\end{align*}\n$$\n\nThus,\n\n$$\n\\begin{equation*}\n\\omega_{T} \\approx \\frac{g_{m}}{C_{\\pi}} \\tag{11.48}\n\\end{equation*}\n$$\n\nThe transit frequency for MOSFETs is derived similarly. Hence, we express:\n\n$$\n\\begin{equation*}\n2 \\pi f_{T} \\approx \\frac{g_{m}}{C_{\\pi}} \\quad \\text { or } \\quad \\frac{g_{m}}{C_{G S}} . \\tag{11.49}\n\\end{equation*}\n$$\n\nNote that the collector-substrate or drain-bulk capacitance does not influence $f_{T}$ due to the AC ground at the output.\n\nContemporary bipolar and MOS transistors exhibit $f_{T}$ values exceeding 100 GHz. However, the speed of complex circuits using these devices is significantly lower.\n\nThe minimum channel length of MOSFETs has decreased from $1 \\mu \\mathrm{~m}$ in the late 1980s 11.14 to 65 nm today. Concurrently, the inevitable reduction in supply voltage has decreased the gate-source overdrive voltage from approximately 400 mV to 100 mV. By what factor has the $f_{T}$ of MOSFETs increased?\n${ }^{8}$ \"Intrinsic\" speed refers to the device's performance in isolation, without any additional constraints from or enhancements by the circuit.\n\nSolution It can be demonstrated (Problem 11.28) that\n\n$$\n\\begin{equation*}\n2 \\pi f_{T}=\\frac{3}{2} \\frac{\\mu_{n}}{L^{2}}\\left(V_{G S}-V_{T H}\\right) \\tag{11.50}\n\\end{equation*}\n$$\n\nConsequently, the transit frequency has increased by roughly a factor of 59. For instance, if $\\mu_{n}=400 \\mathrm{~cm}^{2} /(\\mathrm{V} \\cdot \\mathrm{s})$, then 65 nm devices with a 100 mV overdrive exhibit an $f_{T}$ of 226 GHz.\n\nExercise\nCalculate the $f_{T}$ if the channel length is reduced to 45 nm but the mobility decreases to $300 \\mathrm{~cm}^{2} /(\\mathrm{V} \\cdot \\mathrm{s})$.\n\nDid you know?\n\nIf the $f_{T}$ of 65 nm MOSFETs is approximately 220 GHz, can these devices operate at even higher frequencies? Indeed, they can. The trick is to use inductors to counteract the effects of capacitors. Imagine, as shown in Fig. (a), placing inductor $L_{1}$ in parallel with $C_{G S}$. (This inductor, realized as a metal spiral on the chip, has some resistance, $R_{S \\text {.) }}$ At the resonance frequency, $\\omega_{0}=1 / \\sqrt{L_{1} C_{G S}}$, the parallel combination behaves like a single resistor, effectively negating $M_{1}$'s gate-source capacitance! Due to this, on-chip inductors are now common in high-frequency designs. Figure (b) displays a chip photograph of a 300 GHz oscillator designed by the author using 65 nm technology. Such high frequencies are utilized in medical imaging.\n\nimage_name:(a)\ndescription:\n[\nname: RS, type: Resistor, value: RS, ports: {N1: X1, N2: b1}\nname: L1, type: Inductor, value: L1, ports: {N1: X1, N2: GND}\nname: CGS, type: Capacitor, ports: {Np: b1, Nn: GND}\nname: M1, type: NMOS, ports: {S: GND, D: LOAD, G: b1}\n]\nextrainfo:The circuit employs resonance to neutralize transistor capacitance, with an inductor L1 and resistor RS in series connected to node X1. The NMOS transistor M1 has its gate connected to node b1, its source to ground, and its drain to the LOAD. A capacitor CGS is linked between node b1 and ground.\n\nimage_name:(b)\ndescription:The image labeled '(b)' is a chip photograph of a 300 GHz CMOS oscillator. The photograph depicts a segment of an integrated circuit, presumably fabricated using 65 nm technology. The layout features several notable elements:\n\n1. **Components and Structure:**\n- The central element is a spiral inductor, a common component in RF circuits for creating resonant circuits. This inductor consists of multiple concentric loops of metal traces on the silicon substrate.\n- Surrounding the inductor are various rectangular and polygonal metal pads or structures, potentially serving as connection points or other passive components.\n- The design is compact, typical of high-frequency integrated circuits where minimizing parasitic elements is crucial.\n\n2. **Connections and Interactions:**\n- The spiral inductor is likely connected to other circuit parts via metal traces extending from its ends, facilitating signal routing.\n- The surrounding metal pads might act as connections for other components like capacitors or transistors, forming the complete oscillator circuit.\n\n3. **Labels, Annotations, and Key Features:**\n- The chip photograph lacks visible labels or annotations, a common trait in microphotographs of integrated circuits. However, the context indicates this is part of a high-frequency oscillator circuit.\n- The design's symmetry and the presence of the spiral inductor suggest optimization for RF performance, likely minimizing losses and maximizing the inductor's Q-factor.\n\n(a) Utilizing resonance to cancel transistor capacitance, (b) chip photograph of a 300 GHz CMOS oscillator."
},
{
    "text": "Given the various capacitances associated with bipolar and MOS devices, can a parameter be established that signifies the ultimate speed of a transistor? Such a parameter would be invaluable for comparing different transistor types or generations and for forecasting the performance of circuits that incorporate these devices.\n\nimage_name:Q_1\ndescription:\n[\nname: I_in, type: CurrentSource, value: I_in, ports: {Np: GND, Nn: Vin}\nname: Q_1, type: NPN, ports: {C: I_out, B: Vin, E: GND}\n]\nextrainfo:The circuit diagram illustrates two setups: one featuring an NPN transistor Q1 and the other an NMOS transistor M1. Both are employed to measure the transit frequency f_T by injecting a sinusoidal current I_in and measuring the resulting output current I_out.\n\nimage_name:M_1\ndescription:\n[\nname: I_in, type: CurrentSource, value: I_in, ports: {Np: GND, Nn: Vin}\nname: M1, type: NMOS, ports: {S: GND, D: GND, G: Vin}\n]\nextrainfo:The circuit comprises a current source, a capacitor, and two NMOS transistors. These NMOS transistors are configured with their sources connected to ground and gates to Vin, sharing a common drain node I_out.\n\nFigure 11.27 Conceptual setup for measuring the $f_{T}$ of transistors.\nA metric for the intrinsic speed of transistors ${ }^{8}$ is the \"transit\" or \"cut-off\" frequency, $f_{T}$, defined as the frequency at which the small-signal current gain of the device drops to unity. As depicted in Fig. 11.27 (excluding the biasing circuitry), the approach involves injecting a sinusoidal current into the base or gate and measuring the resultant collector or drain current as the input frequency, $f_{i n}$, is increased. It is observed that as $f_{i n}$ rises, the device's input capacitance decreases the input impedance, $Z_{i n}$, thereby affecting the input voltage $V_{i n}=I_{i n} Z_{i n}$ and the output current. Here, $C_{\\mu}$ and $C_{G D}$ are disregarded (though considered in Problem 11.26). For the bipolar device in Fig. 11.27(a),\n\n$$\n\\begin{equation*}\nZ_{i n}=\\frac{1}{C_{\\pi} s} \\| r_{\\pi} \\tag{11.43}\n\\end{equation*}\n$$\n\nGiven that $I_{\\text {out }}=g_{m} I_{\\text {in }} Z_{\\text {in }}$,\n\n$$\n\\begin{align*}\n\\frac{I_{\\text {out }}}{I_{\\text {in }}} & =\\frac{g_{m} r_{\\pi}}{r_{\\pi} C_{\\pi} s+1}  \\tag{11.44}\\\\\n& =\\frac{\\beta}{r_{\\pi} C_{\\pi} s+1} . \\tag{11.45}\n\\end{align*}\n$$\n\nAt the transit frequency, $\\omega_{T}\\left(=2 \\pi f_{T}\\right)$, the current gain's magnitude drops to unity:\n\n$$\n\\begin{align*}\nr_{\\pi}^{2} C_{\\pi}^{2} \\omega_{T}^{2} & =\\beta^{2}-1  \\tag{11.46}\\\\\n& \\approx \\beta^{2} . \\tag{11.47}\n\\end{align*}\n$$\n\nThus,\n\n$$\n\\begin{equation*}\n\\omega_{T} \\approx \\frac{g_{m}}{C_{\\pi}} \\tag{11.48}\n\\end{equation*}\n$$\n\nThe transit frequency for MOSFETs is derived similarly. Hence, we express:\n\n$$\n\\begin{equation*}\n2 \\pi f_{T} \\approx \\frac{g_{m}}{C_{\\pi}} \\quad \\text { or } \\quad \\frac{g_{m}}{C_{G S}} . \\tag{11.49}\n\\end{equation*}\n$$\n\nNote that the collector-substrate or drain-bulk capacitance does not influence $f_{T}$ due to the AC ground at the output.\n\nModern bipolar and MOS transistors exhibit $f_{T}$ values exceeding 100 GHz. However, the speed of complex circuits using these devices is significantly lower.\n\nThe minimum channel length of MOSFETs has decreased from $1 \\mu \\mathrm{~m}$ in the late 1980s 11.14 to 65 nm today. Additionally, the inevitable reduction in supply voltage has decreased the gate-source overdrive voltage from approximately 400 mV to 100 mV. By what factor has the $f_{T}$ of MOSFETs increased?\n${ }^{8}$ \"Intrinsic\" speed refers to the device's performance in isolation, without any circuit-imposed limitations or enhancements.\n\nSolution It can be demonstrated (Problem 11.28) that\n\n$$\n\\begin{equation*}\n2 \\pi f_{T}=\\frac{3}{2} \\frac{\\mu_{n}}{L^{2}}\\left(V_{G S}-V_{T H}\\right) \\tag{11.50}\n\\end{equation*}\n$$\n\nConsequently, the transit frequency has increased by roughly a factor of 59. For instance, if $\\mu_{n}=400 \\mathrm{~cm}^{2} /(\\mathrm{V} \\cdot \\mathrm{s})$, then 65 nm devices with a 100 mV overdrive exhibit an $f_{T}$ of 226 GHz.\n\nExercise\nCalculate the $f_{T}$ if the channel length is reduced to 45 nm but the mobility decreases to $300 \\mathrm{~cm}^{2} /(\\mathrm{V} \\cdot \\mathrm{s})$.\n\nDid you know?\n\nIf the $f_{T}$ of 65 nm MOSFETs is around 220 GHz, can such devices operate at higher frequencies? Indeed, they can. The key is employing inductors to counteract the effects of capacitors. Suppose, as shown in Fig. (a), inductor $L_{1}$ is placed in parallel with $C_{G S}$. (This inductor, realized as a metal spiral on the chip, has some resistance, $R_{S \\text {.) }}$ At the resonance frequency, $\\omega_{0}=1 / \\sqrt{L_{1} C_{G S}}$, the parallel combination behaves like a single resistor, effectively negating $M_{1}$'s gate-source capacitance! Consequently, the use of on-chip inductors has become prevalent in high-frequency design. Figure (b) shows a chip photograph of a 300 GHz oscillator designed by the author using 65 nm technology. Such high frequencies are utilized in medical imaging.\n\nimage_name:(a)\ndescription:\n[\nname: RS, type: Resistor, value: RS, ports: {N1: X1, N2: b1}\nname: L1, type: Inductor, value: L1, ports: {N1: X1, N2: GND}\nname: CGS, type: Capacitor, ports: {Np: b1, Nn: GND}\nname: M1, type: NMOS, ports: {S: GND, D: LOAD, G: b1}\n]\nextrainfo:The circuit employs resonance to neutralize transistor capacitance, with an inductor L1 and resistor RS in series connected to node X1. The NMOS transistor M1 has its gate connected to node b1, its source to ground, and its drain to the LOAD. A capacitor CGS is connected between node b1 and ground.\n\nimage_name:(b)\ndescription:The image labeled '(b)' is a chip photograph of a 300 GHz CMOS oscillator. The photograph displays a segment of an integrated circuit, likely fabricated using 65 nm technology. The layout includes several notable features:\n\n1. **Components and Structure:**\n- The central element is a spiral inductor, commonly used in RF circuits for creating resonant circuits. This inductor consists of multiple concentric loops of metal traces on the silicon substrate.\n- Surrounding the inductor are several rectangular and polygonal metal pads or structures, potentially serving as connection points or other passive components.\n- The design is compact, typical of high-frequency integrated circuits where minimizing parasitic elements is crucial.\n\n2. **Connections and Interactions:**\n- The spiral inductor is connected to other circuit parts via metal traces extending from its ends, facilitating signal routing.\n- The surrounding metal pads might act as connections for other components like capacitors or transistors, forming the complete oscillator circuit.\n\n3. **Labels, Annotations, and Key Features:**\n- The chip photograph lacks visible labels or annotations, a common trait in microphotographs of integrated circuits. However, the provided context indicates this section is part of a high-frequency oscillator circuit.\n- The design's symmetry and the presence of the spiral inductor suggest optimization for RF performance, likely minimizing losses and maximizing the inductor's Q-factor.\n\n(a) Utilization of resonance to negate transistor capacitance, (b) chip photograph of a 300 GHz CMOS oscillator."
},
{
    "text": "Given the various capacitances associated with bipolar and MOS devices, can a parameter be identified that encapsulates the ultimate speed of a transistor? Such a parameter would be invaluable for comparing different transistor types or generations and for forecasting the performance of circuits that incorporate these devices.\n\nimage_name:Q_1\ndescription:\n[\nname: I_in, type: CurrentSource, value: I_in, ports: {Np: GND, Nn: Vin}\nname: Q_1, type: NPN, ports: {C: I_out, B: Vin, E: GND}\n]\nextrainfo:The circuit diagram illustrates two setups: one featuring an NPN transistor Q1 and the other an NMOS transistor M1. Both are employed to measure the transit frequency f_T by injecting a sinusoidal current I_in and observing the output current I_out.\n\nimage_name:M_1\ndescription:\n[\nname: I_in, type: CurrentSource, value: I_in, ports: {Np: GND, Nn: Vin}\nname: M1, type: NMOS, ports: {S: GND, D: GND, G: Vin}\n]\nextrainfo:The configuration comprises a current source, a capacitor, and two NMOS transistors. These NMOS transistors are set up with their sources connected to ground and gates to Vin, sharing a common drain node I_out.\n\nFigure 11.27 Schematic for measuring the $f_{T}$ of transistors.\nA metric for the intrinsic speed of transistors ${ }^{8}$ is the \"transit\" or \"cut-off\" frequency, $f_{T}$, defined as the frequency at which the small-signal current gain of the device drops to unity. As depicted in Fig. 11.27 (excluding the biasing circuitry), the approach involves injecting a sinusoidal current into the base or gate and measuring the resulting collector or drain current as the input frequency, $f_{i n}$, is increased. It is observed that as $f_{i n}$ rises, the device's input capacitance decreases the input impedance, $Z_{i n}$, thereby affecting the input voltage $V_{i n}=I_{i n} Z_{i n}$ and the output current. Here, $C_{\\mu}$ and $C_{G D}$ are disregarded (though considered in Problem 11.26). For the bipolar device in Fig. 11.27(a),\n\n$$\n\\begin{equation*}\nZ_{i n}=\\frac{1}{C_{\\pi} s} \\| r_{\\pi} \\tag{11.43}\n\\end{equation*}\n$$\n\nGiven $I_{\\text {out }}=g_{m} I_{\\text {in }} Z_{\\text {in }}$,\n\n$$\n\\begin{align*}\n\\frac{I_{\\text {out }}}{I_{\\text {in }}} & =\\frac{g_{m} r_{\\pi}}{r_{\\pi} C_{\\pi} s+1}  \\tag{11.44}\\\\\n& =\\frac{\\beta}{r_{\\pi} C_{\\pi} s+1} . \\tag{11.45}\n\\end{align*}\n$$\n\nAt the transit frequency, $\\omega_{T}\\left(=2 \\pi f_{T}\\right)$, the current gain's magnitude drops to unity:\n\n$$\n\\begin{align*}\nr_{\\pi}^{2} C_{\\pi}^{2} \\omega_{T}^{2} & =\\beta^{2}-1  \\tag{11.46}\\\\\n& \\approx \\beta^{2} . \\tag{11.47}\n\\end{align*}\n$$\n\nThus,\n\n$$\n\\begin{equation*}\n\\omega_{T} \\approx \\frac{g_{m}}{C_{\\pi}} \\tag{11.48}\n\\end{equation*}\n$$\n\nThe transit frequency for MOSFETs is derived similarly. Hence, we express:\n\n$$\n\\begin{equation*}\n2 \\pi f_{T} \\approx \\frac{g_{m}}{C_{\\pi}} \\quad \\text { or } \\quad \\frac{g_{m}}{C_{G S}} . \\tag{11.49}\n\\end{equation*}\n$$\n\nNote that the collector-substrate or drain-bulk capacitance does not influence $f_{T}$ due to the AC ground at the output.\n\nModern bipolar and MOS transistors achieve $f_{T}$ values exceeding 100 GHz. However, the speed of complex circuits using these devices is significantly lower.\n\nThe minimum channel length of MOSFETs has decreased from $1 \\mu \\mathrm{~m}$ in the late 1980s 11.14 to 65 nm today. Additionally, the inevitable reduction in supply voltage has decreased the gate-source overdrive voltage from approximately 400 mV to 100 mV. By what factor has the $f_{T}$ of MOSFETs increased?\n${ }^{8}$ \"Intrinsic\" speed refers to the device's performance in isolation, without any external circuit limitations or enhancements.\n\nSolution It can be demonstrated (Problem 11.28) that\n\n$$\n\\begin{equation*}\n2 \\pi f_{T}=\\frac{3}{2} \\frac{\\mu_{n}}{L^{2}}\\left(V_{G S}-V_{T H}\\right) \\tag{11.50}\n\\end{equation*}\n$$\n\nConsequently, the transit frequency has increased by roughly a factor of 59. For instance, if $\\mu_{n}=400 \\mathrm{~cm}^{2} /(\\mathrm{V} \\cdot \\mathrm{s})$, then 65 nm devices with a 100 mV overdrive exhibit an $f_{T}$ of 226 GHz.\n\nExercise\nCalculate the $f_{T}$ if the channel length is reduced to 45 nm but the mobility decreases to $300 \\mathrm{~cm}^{2} /(\\mathrm{V} \\cdot \\mathrm{s})$.\n\nDid you know?\n\nIf the $f_{T}$ of 65 nm MOSFETs is around 220 GHz, can such devices operate at higher frequencies? Indeed, they can. The key lies in using inductors to counteract the effects of capacitors. Imagine, as shown in Fig. (a), placing inductor $L_{1}$ in parallel with $C_{G S}$. (This inductor, realized as a metal spiral on the chip, has some resistance, $R_{S \\text {.) }}$ At the resonance frequency, $\\omega_{0}=1 / \\sqrt{L_{1} C_{G S}}$, the parallel combination behaves like a single resistor, effectively negating $M_{1}$'s gate-source capacitance! Due to this, on-chip inductors are now prevalent in high-frequency design. Figure (b) displays a chip photograph of a 300 GHz oscillator designed by the author using 65 nm technology. Such high frequencies are utilized in medical imaging.\n\nimage_name:(a)\ndescription:\n[\nname: RS, type: Resistor, value: RS, ports: {N1: X1, N2: b1}\nname: L1, type: Inductor, value: L1, ports: {N1: X1, N2: GND}\nname: CGS, type: Capacitor, ports: {Np: b1, Nn: GND}\nname: M1, type: NMOS, ports: {S: GND, D: LOAD, G: b1}\n]\nextrainfo:The circuit employs resonance to neutralize transistor capacitance, with an inductor L1 and resistor RS in series connected to node X1. The NMOS transistor M1 has its gate connected to node b1, its source to ground, and its drain to the LOAD. A capacitor CGS is linked between node b1 and ground.\n\nimage_name:(b)\ndescription:The image labeled '(b)' is a chip photograph of a 300 GHz CMOS oscillator. The photograph reveals a segment of an integrated circuit, likely fabricated using 65 nm technology. The layout includes several notable features:\n\n1. **Components and Structure:**\n- The central element is a spiral inductor, commonly used in RF circuits for creating resonant circuits. This inductor consists of multiple concentric loops of metal traces on the silicon substrate.\n- Surrounding the inductor are various rectangular and polygonal metal pads or structures, potentially serving as connection points or other passive components.\n- The design is compact, typical of high-frequency integrated circuits where minimizing parasitic elements is crucial.\n\n2. **Connections and Interactions:**\n- The spiral inductor is connected to other circuit parts via metal traces extending from its ends, facilitating signal routing.\n- The surrounding metal pads might act as connections for additional components like capacitors or transistors, forming the complete oscillator circuit.\n\n3. **Labels, Annotations, and Key Features:**\n- The chip photograph lacks visible labels or annotations, common in microphotographs of integrated circuits. However, the provided context indicates this is part of a high-frequency oscillator circuit.\n- The design's symmetry and the presence of the spiral inductor suggest optimization for RF performance, likely minimizing losses and maximizing the inductor's Q-factor.\n\n(a) Utilizing resonance to counteract transistor capacitance, (b) chip photograph of a 300 GHz CMOS oscillator."
}
]