[

{
    "text": "Upon turning 18, John eagerly secures his driver's license, purchases a pre-owned vehicle, and starts driving. Following his parents' firm counsel, he initially adheres to the speed limit, noticing that all other vehicles on the highway surpass it. He then rationalizes that the speed limit is more like a \"suggestion\" and concludes that marginally exceeding it wouldn't be detrimental. Over the next few months, John progressively increases his speed to match other drivers, only to be greeted by flashing police lights one day. He pulls over, listens to the officer's lecture, receives a speeding ticket, and, apprehensive about his parents' response, resumes driving—now strictly within the speed limit.\n\nimage_name:Figure 12.1 General feedback system\ndescription:The diagram illustrates a general feedback system, highlighting the key components and the flow of information in a negative feedback loop.\n\n1. **Main Components:**\n- **Comparison Mechanism:** Depicted as a summing junction, it receives two inputs: the reference input \\( X \\) and the feedback signal \\( X_F \\). The difference between these signals is calculated and forwarded.\n- **Feedforward System (\\( A_1 \\)):** This is the primary system block that processes the input signal from the comparison mechanism, typically responsible for the main action or output generation.\n- **Sense Mechanism:** This component measures the output \\( Y \\) of the feedforward system and transmits it to the feedback network.\n- **Feedback Network (\\( K \\)):** This block processes the output signal \\( Y \\) to generate the feedback signal \\( X_F \\), which is then sent back to the comparison mechanism.\n\n2. **Flow of Information or Control:**\n- The reference input \\( X \\) enters the comparison mechanism, where it is compared with the feedback signal \\( X_F \\). The resulting error signal is sent to the feedforward system \\( A_1 \\).\n- The feedforward system processes this error signal and produces the output \\( Y \\).\n- The output \\( Y \\) is sensed and sent to the feedback network.\n- The feedback network processes \\( Y \\) to produce the feedback signal \\( X_F \\), which is then looped back to the comparison mechanism.\n\n3. **Labels, Annotations, and Key Indicators:**\n- The diagram is labeled with key components such as \"Comparison Mechanism,\" \"Feedforward System,\" \"Sense Mechanism,\" and \"Feedback Network.\"\n- The signals are labeled as \\( X \\) (input), \\( Y \\) (output), and \\( X_F \\) (feedback signal).\n- The feedback network is denoted by a gain \\( K \\), indicating the amplification or attenuation applied to the output signal before it is fed back.\n\n4. **Overall System Function:**\n- The primary function of this system is to regulate the output \\( Y \\) by using feedback to minimize the difference between the reference input \\( X \\) and the actual output. This is achieved through a negative feedback loop, where the feedback network modifies the output signal and feeds it back to the comparison mechanism to adjust the system's performance. This setup helps maintain stability and desired performance by correcting deviations from the set point.\n\nFigure 12.1 General feedback system.\n\nJohn's experience illustrates the \"regulatory\" or \"corrective\" function of negative feedback. Without the intervention of the police officer, John would likely have continued to drive faster, eventually posing a significant hazard on the road.\n\nAs depicted in Fig. 12.1, a negative feedback system comprises four essential components. (1) The \"feedforward\" system: ${ }^{1}$ the main system, often \"unrestrained\" and poorly controlled. John, the gas pedal, and the car constitute the feedforward system, where the input is the pressure John applies to the gas pedal and the output is the car's speed. (2) Output sense mechanism: a method for measuring the output. The police officer's radar serves this role here. (3) Feedback network: a network that generates a \"feedback signal,\" $X_{F}$, from the sensed output. The police officer acts as the feedback network by reading the radar, approaching John's car, and issuing a speeding ticket. The quantity $K=X_{F} / Y$ is termed the \"feedback factor.\" (4) Comparison or return mechanism: a method for subtracting the feedback signal from the input to obtain the \"error,\" $E=X-X_{F}$. John performs this comparison himself by reducing the pressure on the gas pedal—at least temporarily.\n\nThe feedback in Fig. 12.1 is termed \"negative\" because $X_{F}$ is subtracted from $X$. Positive feedback also has applications in circuits like oscillators and digital latches. If $K=0$, i.e., no signal is fed back, we have an \"open-loop\" system. If $K \\neq 0$, the system operates in \"closed-loop\" mode. As discussed throughout this chapter, analyzing a feedback system involves expressing the closed-loop parameters in terms of the open-loop parameters. Note that the input port of the feedback network refers to that sensing the output of the forward system.\n\nTo begin understanding the feedback system in Fig. 12.1, let's determine the closed-loop transfer function $Y / X$. Since $X_{F}=K Y$, the error produced by the subtractor is $X-K Y$, which serves as the input to the forward system:\n\n$$\n\\begin{equation*}\n(X-K Y) A_{1}=Y \\tag{12.1}\n\\end{equation*}\n$$\n\nThus,\n\n$$\n\\begin{equation*}\n\\frac{Y}{X}=\\frac{A_{1}}{1+K A_{1}} . \\tag{12.2}\n\\end{equation*}\n$$\n\nThis equation is central to our discussion of feedback, revealing that negative feedback reduces the gain from $A_{1}$ (for the open-loop system) to $A_{1} /\\left(1+K A_{1}\\right)$.\n\n[^11]The quantity $A_{1} /\\left(1+K A_{1}\\right)$ is known as the \"closed-loop gain.\" The deliberate reduction of the circuit's gain is justified, as explained in Section 12.2, by the significant benefits of negative feedback.\n\nExample 12.1\n\nAnalyze the noninverting amplifier of Fig. 12.2 from a feedback perspective.\nimage_name:Figure 12.2\ndescription:\n[\nname: A1, type: OpAmp, value: A1, ports: {InP: X, InN: XF, OutP: Y, OutN:}\nname: R1, type: Resistor, value: R1, ports: {N1: Y, N2: XF}\nname: R2, type: Resistor, value: R2, ports: {N1: XF, N2: GND}\n]\nextrainfo:The circuit is a non-inverting amplifier using an op-amp with feedback resistors R1 and R2. The feedback network provides a feedback factor K = R2 / (R1 + R2). The closed-loop gain is given by A1 / (1 + K * A1).\n\nSolution The op amp $A_{1}$ performs two functions: subtraction of $X$ and $X_{F}$ and amplification. The network $R_{1}$ and $R_{2}$ also performs two functions: sensing the output voltage and providing a feedback factor of $K=R_{2} /\\left(R_{1}+R_{2}\\right)$. Thus, Eq. (12.2) gives\n\n$$\n\\begin{equation*}\n\\frac{Y}{X}=\\frac{A_{1}}{1+\\frac{R_{2}}{R_{1}+R_{2}} A_{1}} \\tag{12.3}\n\\end{equation*}\n$$\n\nwhich matches the result obtained in Chapter 8.\n\nExercise $\\quad$ Perform the above analysis if $R_{2}=\\infty$.\n\nIt is instructive to compute the error, $E$, produced by the subtractor. Since $E=X-X_{F}$ and $X_{F}=K A_{1} E$,\n\n$$\n\\begin{equation*}\nE=\\frac{X}{1+K A_{1}} \\tag{12.4}\n\\end{equation*}\n$$\n\nindicating that the difference between the feedback signal and the input decreases as $K A_{1}$ increases. In other words, the feedback signal becomes a close \"replica\" of the input (Fig. 12.3). This observation provides significant insight into the operation of feedback systems.\nimage_name:Figure 12.3\ndescription:\n[\nname: A1, type: OpAmp, value: A1, ports: {InP: X, InN: XF, OutP: Out(A1), OutN:}\nname: R1, type: Resistor, value: R1, ports: {N1: Out(A1), N2: XF}\nname: R2, type: Resistor, value: R2, ports: {N1: XF, N2: GND}\n]\nextrainfo:The circuit is a feedback amplifier where the output is fed back to the inverting input through resistor R1 and R2. The feedback signal X_F is a close replica of the input X when the gain is high.\n\nFigure 12.3 Feedback signal as a good replica of the input.\n\nExample\n12.2 $\\begin{aligned} & \\text { Explain why in the circuit of Fig. 12.2, } Y / X \\text { approaches } 1+R_{1} / R_{2} \\text { as }\\left[R_{2} /\\left(R_{1}+R_{2}\\right)\\right] A_{1} \\\\ & \\text { becomes much greater than unity. }\\end{aligned}$\n\nSolution If $K A_{1}=\\left[R_{2} /\\left(R_{1}+R_{2}\\right)\\right] A_{1}$ is large, $X_{F}$ becomes nearly identical to $X$, i.e., $X_{F} \\approx X$. The voltage divider thus requires that\n\n$$\n\\begin{equation*}\nY \\frac{R_{2}}{R_{1}+R_{2}} \\approx X \\tag{12.5}\n\\end{equation*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\n\\frac{Y}{X} \\approx 1+\\frac{R_{1}}{R_{2}} \\tag{12.6}\n\\end{equation*}\n$$\n\nOf course, Eq. (12.3) yields the same result if $\\left[R_{2} /\\left(R_{1}+R_{2}\\right)\\right] A_{1} \\gg 1$.\nExercise $\\quad$ Repeat the above example if $R_{2}=\\infty$."
},
{
    "text": "Upon turning 18, John promptly secures his driver's license, acquires a pre-owned vehicle, and starts driving. Following his parents' stern counsel, he initially adheres to the speed limit, noticing that all other vehicles on the highway surpass it. He rationalizes that the speed limit is more like a suggestion and that marginally exceeding it wouldn't cause harm. Over the next few months, John progressively increases his speed to match other drivers, until one day he sees flashing police lights in his rear-view mirror. He pulls over, listens to the officer's lecture, receives a speeding ticket, and, apprehensive about his parents' response, resumes driving—now strictly within the speed limit.\n\nimage_name:Figure 12.1 General feedback system\ndescription:The illustration depicts a general feedback system, highlighting the key components and the information flow in a negative feedback loop.\n\n1. **Main Components:**\n- **Comparison Mechanism:** Illustrated as a summing junction, it receives two inputs: the reference input \\( X \\) and the feedback signal \\( X_F \\). The difference between these signals is calculated and forwarded.\n- **Feedforward System (\\( A_1 \\)):** This primary system block processes the input from the comparison mechanism and is typically responsible for the main action or output in the system.\n- **Sense Mechanism:** This component measures the output \\( Y \\) of the feedforward system and transmits it to the feedback network.\n- **Feedback Network (\\( K \\)):** This block processes the output signal \\( Y \\) to generate the feedback signal \\( X_F \\), which is then sent back to the comparison mechanism.\n\n2. **Flow of Information or Control:**\n- The reference input \\( X \\) enters the comparison mechanism, where it is compared with the feedback signal \\( X_F \\). The resulting error signal is sent to the feedforward system \\( A_1 \\).\n- The feedforward system processes this error signal and produces the output \\( Y \\).\n- The output \\( Y \\) is sensed and sent to the feedback network.\n- The feedback network processes \\( Y \\) to produce the feedback signal \\( X_F \\), which is then looped back to the comparison mechanism.\n\n3. **Labels, Annotations, and Key Indicators:**\n- The diagram is marked with key components such as \"Comparison Mechanism,\" \"Feedforward System,\" \"Sense Mechanism,\" and \"Feedback Network.\"\n- The signals are labeled as \\( X \\) (input), \\( Y \\) (output), and \\( X_F \\) (feedback signal).\n- The feedback network is indicated by a gain \\( K \\), showing the amplification or attenuation applied to the output signal before it is fed back.\n\n4. **Overall System Function:**\n- The main function of this system is to regulate the output \\( Y \\) using feedback to minimize the difference between the reference input \\( X \\) and the actual output. This is achieved through a negative feedback loop, where the feedback network modifies the output signal and feeds it back to the comparison mechanism to adjust the system's performance. This setup helps maintain stability and desired performance by correcting deviations from the set point.\n\nFigure 12.1 General feedback system.\n\nJohn's experience illustrates the \"regulatory\" or \"corrective\" function of negative feedback. Without the intervention of the police officer, John would likely have continued to drive faster, potentially becoming a hazard on the road.\n\nAs depicted in Fig. 12.1, a negative feedback system comprises four essential components. (1) The \"feedforward\" system: ${ }^{1}$ the main system, often \"uncontrolled\" and erratic. John, the gas pedal, and the car constitute the feedforward system, where the input is the pressure John applies to the gas pedal and the output is the car's speed. (2) Output sense mechanism: a method for measuring the output. The police officer's radar serves this role here. (3) Feedback network: a network that creates a \"feedback signal,\" $X_{F}$, from the sensed output. The police officer acts as the feedback network by reading the radar, approaching John's car, and issuing a speeding ticket. The ratio $K=X_{F} / Y$ is termed the \"feedback factor.\" (4) Comparison or return mechanism: a method for subtracting the feedback signal from the input to obtain the \"error,\" $E=X-X_{F}$. John performs this comparison himself by reducing the pressure on the gas pedal—albeit temporarily.\n\nThe feedback in Fig. 12.1 is termed \"negative\" because $X_{F}$ is subtracted from $X$. Positive feedback is also used in circuits like oscillators and digital latches. If $K=0$, i.e., no signal is fed back, we have an \"open-loop\" system. If $K \\neq 0$, the system operates in \"closed-loop\" mode. As discussed throughout this chapter, analyzing a feedback system involves expressing closed-loop parameters in terms of open-loop parameters. Note that the input port of the feedback network refers to the point sensing the output of the forward system.\n\nTo begin understanding the feedback system in Fig. 12.1, let's determine the closed-loop transfer function $Y / X$. Since $X_{F}=K Y$, the error produced by the subtractor is $X-K Y$, which serves as the input to the forward system:\n\n$$\n\\begin{equation*}\n(X-K Y) A_{1}=Y \\tag{12.1}\n\\end{equation*}\n$$\n\nThus,\n\n$$\n\\begin{equation*}\n\\frac{Y}{X}=\\frac{A_{1}}{1+K A_{1}} . \\tag{12.2}\n\\end{equation*}\n$$\n\nThis equation is central to our discussion of feedback, showing that negative feedback reduces the gain from $A_{1}$ (for the open-loop system) to $A_{1} /\\left(1+K A_{1}\\right)$.\n\n[^11]The term $A_{1} /\\left(1+K A_{1}\\right)$ is known as the \"closed-loop gain.\" The deliberate reduction of the circuit's gain is justified by the benefits of negative feedback, as explained in Section 12.2.\n\nExample 12.1\n\nAnalyze the noninverting amplifier in Fig. 12.2 from a feedback perspective.\nimage_name:Figure 12.2\ndescription:\n[\nname: A1, type: OpAmp, value: A1, ports: {InP: X, InN: XF, OutP: Y, OutN:}\nname: R1, type: Resistor, value: R1, ports: {N1: Y, N2: XF}\nname: R2, type: Resistor, value: R2, ports: {N1: XF, N2: GND}\n]\nextrainfo:The circuit is a non-inverting amplifier using an op-amp with feedback resistors R1 and R2. The feedback network provides a feedback factor K = R2 / (R1 + R2). The closed-loop gain is given by A1 / (1 + K * A1).\n\nSolution The op amp $A_{1}$ performs two functions: subtracting $X$ and $X_{F}$ and amplifying. The network $R_{1}$ and $R_{2}$ also performs two functions: sensing the output voltage and providing a feedback factor of $K=R_{2} /\\left(R_{1}+R_{2}\\right)$. Thus, Eq. (12.2) gives\n\n$$\n\\begin{equation*}\n\\frac{Y}{X}=\\frac{A_{1}}{1+\\frac{R_{2}}{R_{1}+R_{2}} A_{1}} \\tag{12.3}\n\\end{equation*}\n$$\n\nwhich matches the result from Chapter 8.\n\nExercise $\\quad$ Perform the above analysis if $R_{2}=\\infty$.\n\nIt is insightful to calculate the error, $E$, produced by the subtractor. Since $E=X-X_{F}$ and $X_{F}=K A_{1} E$,\n\n$$\n\\begin{equation*}\nE=\\frac{X}{1+K A_{1}} \\tag{12.4}\n\\end{equation*}\n$$\n\nindicating that the difference between the feedback signal and the input decreases as $K A_{1}$ increases. In other words, the feedback signal becomes a close \"replica\" of the input (Fig. 12.3). This observation provides significant insight into the operation of feedback systems.\nimage_name:Figure 12.3\ndescription:\n[\nname: A1, type: OpAmp, value: A1, ports: {InP: X, InN: XF, OutP: Out(A1), OutN:}\nname: R1, type: Resistor, value: R1, ports: {N1: Out(A1), N2: XF}\nname: R2, type: Resistor, value: R2, ports: {N1: XF, N2: GND}\n]\nextrainfo:The circuit is a feedback amplifier where the output is fed back to the inverting input through resistor R1 and R2. The feedback signal X_F is a close replica of the input X when the gain is high.\n\nFigure 12.3 Feedback signal as a good replica of the input.\n\nExample\n12.2 $\\begin{aligned} & \\text { Explain why in the circuit of Fig. 12.2, } Y / X \\text { approaches } 1+R_{1} / R_{2} \\text { as }\\left[R_{2} /\\left(R_{1}+R_{2}\\right)\\right] A_{1} \\\\ & \\text { becomes much greater than unity. }\\end{aligned}$\n\nSolution If $K A_{1}=\\left[R_{2} /\\left(R_{1}+R_{2}\\right)\\right] A_{1}$ is large, $X_{F}$ becomes nearly identical to $X$, i.e., $X_{F} \\approx X$. The voltage divider thus requires that\n\n$$\n\\begin{equation*}\nY \\frac{R_{2}}{R_{1}+R_{2}} \\approx X \\tag{12.5}\n\\end{equation*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\n\\frac{Y}{X} \\approx 1+\\frac{R_{1}}{R_{2}} \\tag{12.6}\n\\end{equation*}\n$$\n\nOf course, Eq. (12.3) yields the same result if $\\left[R_{2} /\\left(R_{1}+R_{2}\\right)\\right] A_{1} \\gg 1$.\nExercise $\\quad$ Repeat the above example if $R_{2}=\\infty$."
},
{
    "text": "Upon turning 18, John eagerly secures his driver's license, purchases a pre-owned vehicle, and starts driving. Following his parents' strict counsel, he initially adheres to the speed limit, noticing that all other cars on the highway surpass it. He rationalizes that the speed limit is more like a suggestion and that slightly exceeding it wouldn't be detrimental. Over the next few months, John gradually increases his speed to match other drivers, only to one day see flashing police lights in his rear-view mirror. He pulls over, listens to the officer's lecture, receives a speeding ticket, and, fearing his parents' response, resumes driving with strict compliance to the speed limit.\n\nimage_name: Figure 12.1 General feedback system\ndescription: The diagram illustrates a general feedback system, highlighting the key components and the flow of information in a negative feedback loop.\n\n1. **Main Components:**\n- **Comparison Mechanism:** Represented by a summing junction, this takes two inputs: the reference input \\( X \\) and the feedback signal \\( X_F \\). The difference between these signals is calculated and forwarded.\n- **Feedforward System (\\( A_1 \\)):** This is the primary system block that processes the input from the comparison mechanism, typically responsible for the main action or output.\n- **Sense Mechanism:** This component measures the output \\( Y \\) of the feedforward system and sends it to the feedback network.\n- **Feedback Network (\\( K \\)):** This block processes the output \\( Y \\) to generate the feedback signal \\( X_F \\), which is then fed back to the comparison mechanism.\n\n2. **Flow of Information or Control:**\n- The reference input \\( X \\) enters the comparison mechanism, where it is compared with the feedback signal \\( X_F \\). The resulting error signal is sent to the feedforward system \\( A_1 \\).\n- The feedforward system processes this error signal to produce the output \\( Y \\).\n- The output \\( Y \\) is sensed and transmitted to the feedback network.\n- The feedback network processes \\( Y \\) to create the feedback signal \\( X_F \\), which is looped back to the comparison mechanism.\n\n3. **Labels, Annotations, and Key Indicators:**\n- The diagram includes labels for key components such as \"Comparison Mechanism,\" \"Feedforward System,\" \"Sense Mechanism,\" and \"Feedback Network.\"\n- Signals are labeled as \\( X \\) (input), \\( Y \\) (output), and \\( X_F \\) (feedback signal).\n- The feedback network is indicated by a gain \\( K \\), showing the amplification or attenuation applied to the output signal before feedback.\n\n4. **Overall System Function:**\n- The main function of this system is to regulate the output \\( Y \\) using feedback to minimize the difference between the reference input \\( X \\) and the actual output. This is achieved through a negative feedback loop, where the feedback network modifies the output signal and feeds it back to the comparison mechanism to adjust system performance. This setup helps maintain stability and desired performance by correcting deviations from the set point.\n\nFigure 12.1 General feedback system.\n\nJohn's experience illustrates the \"regulatory\" or \"corrective\" function of negative feedback. Without the police officer's intervention, John likely would have continued to drive faster, eventually posing a significant hazard on the road.\n\nAs depicted in Fig. 12.1, a negative feedback system comprises four essential components. (1) The \"feedforward\" system: ${ }^{1}$ the main system, often \"uncontrolled\" and \"wild.\" John, the gas pedal, and the car constitute the feedforward system, where the input is the pressure John applies to the gas pedal and the output is the car's speed. (2) Output sense mechanism: a method for measuring the output. Here, the police officer's radar serves this role. (3) Feedback network: a network that creates a \"feedback signal,\" \\( X_F \\), from the sensed output. The police officer acts as this network by reading the radar, approaching John's car, and issuing a speeding ticket. The ratio \\( K = X_F / Y \\) is termed the \"feedback factor.\" (4) Comparison or return mechanism: a method for subtracting the feedback signal from the input to obtain the \"error,\" \\( E = X - X_F \\). John performs this comparison by reducing the pressure on the gas pedal, at least temporarily.\n\nThe feedback in Fig. 12.1 is termed \"negative\" because \\( X_F \\) is subtracted from \\( X \\). Positive feedback is also used in circuits like oscillators and digital latches. If \\( K = 0 \\), meaning no signal is fed back, we have an \"open-loop\" system. If \\( K \\neq 0 \\), the system operates in \"closed-loop\" mode. As discussed in this chapter, analyzing a feedback system involves expressing closed-loop parameters in terms of open-loop parameters. Note that the input port of the feedback network refers to the point sensing the output of the forward system.\n\nTo begin understanding the feedback system in Fig. 12.1, let's determine the closed-loop transfer function \\( Y / X \\). Since \\( X_F = K Y \\), the error from the subtractor is \\( X - K Y \\), which serves as the input to the forward system:\n\n$$\n\\begin{equation*}\n(X - K Y) A_1 = Y \\tag{12.1}\n\\end{equation*}\n$$\n\nThus,\n\n$$\n\\begin{equation*}\n\\frac{Y}{X} = \\frac{A_1}{1 + K A_1} \\tag{12.2}\n\\end{equation*}\n$$\n\nThis equation is central to our study of feedback, indicating that negative feedback reduces the gain from \\( A_1 \\) (for the open-loop system) to \\( A_1 / (1 + K A_1) \\).\n\n[^11]The term \\( A_1 / (1 + K A_1) \\) is known as the \"closed-loop gain.\" The deliberate reduction of circuit gain is justified by the benefits of negative feedback, as explained in Section 12.2.\n\nExample 12.1\n\nAnalyze the non-inverting amplifier in Fig. 12.2 from a feedback perspective.\nimage_name: Figure 12.2\ndescription:\n[\nname: A1, type: OpAmp, value: A1, ports: {InP: X, InN: XF, OutP: Y, OutN:}\nname: R1, type: Resistor, value: R1, ports: {N1: Y, N2: XF}\nname: R2, type: Resistor, value: R2, ports: {N1: XF, N2: GND}\n]\nextrainfo: The circuit is a non-inverting amplifier using an op-amp with feedback resistors R1 and R2. The feedback network provides a feedback factor \\( K = R2 / (R1 + R2) \\). The closed-loop gain is given by \\( A1 / (1 + K \\cdot A1) \\).\n\nSolution The op amp \\( A_1 \\) performs two functions: subtracting \\( X \\) and \\( X_F \\) and amplifying. The network \\( R_1 \\) and \\( R_2 \\) also performs two functions: sensing the output voltage and providing a feedback factor \\( K = R2 / (R1 + R2) \\). Thus, Eq. (12.2) gives\n\n$$\n\\begin{equation*}\n\\frac{Y}{X} = \\frac{A_1}{1 + \\frac{R_2}{R_1 + R_2} A_1} \\tag{12.3}\n\\end{equation*}\n$$\n\nwhich matches the result from Chapter 8.\n\nExercise Perform the above analysis if \\( R_2 = \\infty \\).\n\nIt is insightful to calculate the error \\( E \\) produced by the subtractor. Since \\( E = X - X_F \\) and \\( X_F = K A_1 E \\),\n\n$$\n\\begin{equation*}\nE = \\frac{X}{1 + K A_1} \\tag{12.4}\n\\end{equation*}\n$$\n\nThis suggests that the difference between the feedback signal and the input decreases as \\( K A_1 \\) increases. In other words, the feedback signal becomes a close \"replica\" of the input (Fig. 12.3). This observation provides significant insight into the operation of feedback systems.\nimage_name: Figure 12.3\ndescription:\n[\nname: A1, type: OpAmp, value: A1, ports: {InP: X, InN: XF, OutP: Out(A1), OutN:}\nname: R1, type: Resistor, value: R1, ports: {N1: Out(A1), N2: XF}\nname: R2, type: Resistor, value: R2, ports: {N1: XF, N2: GND}\n]\nextrainfo: The circuit is a feedback amplifier where the output is fed back to the inverting input through resistors R1 and R2. The feedback signal \\( X_F \\) is a close replica of the input \\( X \\) when the gain is high.\n\nFigure 12.3 Feedback signal as a good replica of the input.\n\nExample 12.2\nExplain why in the circuit of Fig. 12.2, \\( Y / X \\) approaches \\( 1 + R_1 / R_2 \\) as \\( [R_2 / (R_1 + R_2)] A_1 \\) becomes much greater than unity.\n\nSolution If \\( K A_1 = [R_2 / (R_1 + R_2)] A_1 \\) is large, \\( X_F \\) becomes nearly identical to \\( X \\), i.e., \\( X_F \\approx X \\). The voltage divider thus requires that\n\n$$\n\\begin{equation*}\nY \\frac{R_2}{R_1 + R_2} \\approx X \\tag{12.5}\n\\end{equation*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\n\\frac{Y}{X} \\approx 1 + \\frac{R_1}{R_2} \\tag{12.6}\n\\end{equation*}\n$$\n\nOf course, Eq. (12.3) yields the same result if \\( [R_2 / (R_1 + R_2)] A_1 \\gg 1 \\).\nExercise Repeat the above example if \\( R_2 = \\infty \\)."
},
{
    "text": "Upon turning 18, John eagerly secures his driver's license, purchases a pre-owned vehicle, and starts driving. Following his parents' stern counsel, he initially adheres to the speed limit, noticing that all other cars on the highway surpass it. He rationalizes that the speed limit is more of a guideline, believing a minor exceedance would be harmless. Over the next few months, John incrementally increases his speed to match other drivers, only to be greeted by flashing police lights one day. He pulls over, listens to the officer's lecture, receives a speeding ticket, and, apprehensive about his parents' response, resumes driving—now strictly obeying the speed limit.\n\n**Figure 12.1 General Feedback System**\n\nThis diagram illustrates a general feedback system, highlighting the key components and information flow in a negative feedback loop.\n\n1. **Main Components:**\n   - **Comparison Mechanism:** Represented by a summing junction, it accepts two inputs: the reference input \\( X \\) and the feedback signal \\( X_F \\). The difference between these signals is calculated and forwarded.\n   - **Feedforward System (\\( A_1 \\)):** The primary system block that processes the input from the comparison mechanism, typically responsible for the main action or output.\n   - **Sense Mechanism:** Measures the output \\( Y \\) of the feedforward system and sends it to the feedback network.\n   - **Feedback Network (\\( K \\)):** Processes the output \\( Y \\) to generate the feedback signal \\( X_F \\), which is returned to the comparison mechanism.\n\n2. **Flow of Information or Control:**\n   - The reference input \\( X \\) enters the comparison mechanism, where it is compared with the feedback signal \\( X_F \\). The resulting error signal is sent to the feedforward system \\( A_1 \\).\n   - The feedforward system processes this error signal, producing the output \\( Y \\).\n   - The output \\( Y \\) is sensed and directed to the feedback network.\n   - The feedback network processes \\( Y \\) to create the feedback signal \\( X_F \\), which is then looped back to the comparison mechanism.\n\n3. **Labels, Annotations, and Key Indicators:**\n   - The diagram is marked with key components like \"Comparison Mechanism,\" \"Feedforward System,\" \"Sense Mechanism,\" and \"Feedback Network.\"\n   - Signals are labeled as \\( X \\) (input), \\( Y \\) (output), and \\( X_F \\) (feedback signal).\n   - The feedback network is indicated by a gain \\( K \\), representing the amplification or attenuation applied to the output signal before feedback.\n\n4. **Overall System Function:**\n   - The system's primary role is to regulate the output \\( Y \\) using feedback to minimize the difference between the reference input \\( X \\) and the actual output. This is achieved through a negative feedback loop, where the feedback network modifies the output signal and feeds it back to the comparison mechanism to adjust performance. This setup helps maintain stability and desired performance by correcting deviations from the set point.\n\n**Figure 12.1 General Feedback System**\n\nJohn's experience illustrates the \"regulatory\" or \"corrective\" function of negative feedback. Without the police officer's intervention, John would likely have continued to drive faster, potentially becoming a hazard on the road.\n\nAs depicted in Fig. 12.1, a negative feedback system comprises four essential components: (1) The \"feedforward\" system: the main system, often \"uncontrolled\" and \"wild.\" John, the gas pedal, and the car constitute this system, where the input is the pressure John applies to the gas pedal and the output is the car's speed. (2) Output sense mechanism: a method to measure the output. Here, the police officer's radar serves this role. (3) Feedback network: a network that generates a \"feedback signal,\" \\( X_F \\), from the sensed output. The police officer acts as this network by reading the radar, approaching John's car, and issuing a ticket. The ratio \\( K = X_F / Y \\) is termed the \"feedback factor.\" (4) Comparison or return mechanism: a method to subtract the feedback signal from the input to obtain the \"error,\" \\( E = X - X_F \\). John himself performs this comparison by reducing pressure on the gas pedal, at least temporarily.\n\nThe feedback in Fig. 12.1 is termed \"negative\" because \\( X_F \\) is subtracted from \\( X \\). Positive feedback is also used in circuits like oscillators and digital latches. If \\( K = 0 \\), meaning no signal is fed back, we have an \"open-loop\" system. If \\( K \\neq 0 \\), the system operates in \"closed-loop\" mode. As discussed in this chapter, analyzing a feedback system involves expressing closed-loop parameters in terms of open-loop parameters. Note that the input port of the feedback network refers to the point sensing the output of the forward system.\n\nTo begin understanding the feedback system in Fig. 12.1, let's determine the closed-loop transfer function \\( Y / X \\). Since \\( X_F = K Y \\), the error from the subtractor is \\( X - K Y \\), which serves as the input to the forward system:\n\n$$\n\\begin{equation*}\n(X - K Y) A_1 = Y \\tag{12.1}\n\\end{equation*}\n$$\n\nThus,\n\n$$\n\\begin{equation*}\n\\frac{Y}{X} = \\frac{A_1}{1 + K A_1} \\tag{12.2}\n\\end{equation*}\n$$\n\nThis equation is central to our discussion on feedback, indicating that negative feedback reduces the gain from \\( A_1 \\) (for the open-loop system) to \\( A_1 / (1 + K A_1) \\).\n\n[^11]The term \\( A_1 / (1 + K A_1) \\) is known as the \"closed-loop gain.\" The deliberate reduction of circuit gain is justified by the benefits of negative feedback, as explained in Section 12.2.\n\n**Example 12.1**\n\nAnalyze the non-inverting amplifier in Fig. 12.2 from a feedback perspective.\n**Figure 12.2**\nDescription:\n[\nname: A1, type: OpAmp, value: A1, ports: {InP: X, InN: XF, OutP: Y, OutN:}\nname: R1, type: Resistor, value: R1, ports: {N1: Y, N2: XF}\nname: R2, type: Resistor, value: R2, ports: {N1: XF, N2: GND}\n]\nExtra Info: The circuit is a non-inverting amplifier using an op-amp with feedback resistors R1 and R2. The feedback network provides a feedback factor \\( K = R2 / (R1 + R2) \\). The closed-loop gain is given by \\( A1 / (1 + K * A1) \\).\n\n**Solution** The op amp \\( A_1 \\) performs two functions: subtracting \\( X \\) and \\( X_F \\) and amplifying. The network \\( R_1 \\) and \\( R_2 \\) also performs two functions: sensing the output voltage and providing a feedback factor \\( K = R_2 / (R_1 + R_2) \\). Thus, Eq. (12.2) gives\n\n$$\n\\begin{equation*}\n\\frac{Y}{X} = \\frac{A_1}{1 + \\frac{R_2}{R_1 + R_2} A_1} \\tag{12.3}\n\\end{equation*}\n$$\n\nThis result matches that obtained in Chapter 8.\n\n**Exercise** Perform the above analysis if \\( R_2 = \\infty \\).\n\nIt is insightful to calculate the error \\( E \\) produced by the subtractor. Since \\( E = X - X_F \\) and \\( X_F = K A_1 E \\),\n\n$$\n\\begin{equation*}\nE = \\frac{X}{1 + K A_1} \\tag{12.4}\n\\end{equation*}\n$$\n\nThis suggests that the difference between the feedback signal and the input decreases as \\( K A_1 \\) increases. In other words, the feedback signal becomes a close \"replica\" of the input (Fig. 12.3).\n**Figure 12.3**\nDescription:\n[\nname: A1, type: OpAmp, value: A1, ports: {InP: X, InN: XF, OutP: Out(A1), OutN:}\nname: R1, type: Resistor, value: R1, ports: {N1: Out(A1), N2: XF}\nname: R2, type: Resistor, value: R2, ports: {N1: XF, N2: GND}\n]\nExtra Info: The circuit is a feedback amplifier where the output is fed back to the inverting input through resistors R1 and R2. The feedback signal \\( X_F \\) is a close replica of the input \\( X \\) when the gain is high.\n\n**Figure 12.3 Feedback Signal as a Good Replica of the Input**\n\n**Example 12.2**\nExplain why in the circuit of Fig. 12.2, \\( Y / X \\) approaches \\( 1 + R_1 / R_2 \\) as \\( [R_2 / (R_1 + R_2)] A_1 \\) becomes much greater than unity.\n\n**Solution** If \\( K A_1 = [R_2 / (R_1 + R_2)] A_1 \\) is large, \\( X_F \\) becomes almost identical to \\( X \\), i.e., \\( X_F \\approx X \\). The voltage divider thus requires that\n\n$$\n\\begin{equation*}\nY \\frac{R_2}{R_1 + R_2} \\approx X \\tag{12.5}\n\\end{equation*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\n\\frac{Y}{X} \\approx 1 + \\frac{R_1}{R_2} \\tag{12.6}\n\\end{equation*}\n$$\n\nEq. (12.3) yields the same result if \\( [R_2 / (R_1 + R_2)] A_1 \\gg 1 \\).\n**Exercise** Repeat the above example if \\( R_2 = \\infty \\)."
},
{
    "text": "Upon turning 18, John promptly secures his driver's license, purchases a pre-owned vehicle, and starts driving. Following his parents' firm counsel, he initially adheres to the speed limit, noticing that all other cars on the highway surpass it. He rationalizes that the speed limit is more akin to a \"suggestion\" and decides that marginally exceeding it poses no significant risk. Over the next few months, John gradually increases his speed to match other drivers, only to one day see flashing lights in his rear-view mirror. He pulls over, listens to the police officer's lecture, receives a speeding ticket, and, apprehensive about his parents' response, resumes driving—this time strictly obeying the speed limit.\n\nimage_name:Figure 12.1 General feedback system\ndescription:The diagram illustrates a general feedback system, highlighting the key components and the flow of information in a negative feedback loop.\n\n1. **Main Components:**\n- **Comparison Mechanism:** Represented by a summing junction, this takes two inputs: the reference input \\( X \\) and the feedback signal \\( X_F \\). The difference between these signals is calculated and forwarded.\n- **Feedforward System (\\( A_1 \\)):** This is the primary system block that processes the input signal from the comparison mechanism, typically responsible for the main action or output generation.\n- **Sense Mechanism:** This component measures the output \\( Y \\) of the feedforward system and sends it to the feedback network.\n- **Feedback Network (\\( K \\)):** This block processes the output signal \\( Y \\) to generate the feedback signal \\( X_F \\), which is then fed back to the comparison mechanism.\n\n2. **Flow of Information or Control:**\n- The reference input \\( X \\) enters the comparison mechanism, where it is compared with the feedback signal \\( X_F \\). The resulting error signal is sent to the feedforward system \\( A_1 \\).\n- The feedforward system processes this error signal and produces the output \\( Y \\).\n- The output \\( Y \\) is sensed and transmitted to the feedback network.\n- The feedback network processes \\( Y \\) to produce the feedback signal \\( X_F \\), which is then looped back to the comparison mechanism.\n\n3. **Labels, Annotations, and Key Indicators:**\n- The diagram includes labels for key components such as \"Comparison Mechanism,\" \"Feedforward System,\" \"Sense Mechanism,\" and \"Feedback Network.\"\n- The signals are labeled as \\( X \\) (input), \\( Y \\) (output), and \\( X_F \\) (feedback signal).\n- The feedback network is indicated by a gain \\( K \\), showing the amplification or attenuation applied to the output signal before it is fed back.\n\n4. **Overall System Function:**\n- The main function of this system is to regulate the output \\( Y \\) by using feedback to minimize the difference between the reference input \\( X \\) and the actual output. This is achieved through a negative feedback loop, where the feedback network modifies the output signal and feeds it back to the comparison mechanism to adjust the system's performance. This setup helps maintain stability and desired performance by correcting deviations from the set point.\n\nFigure 12.1 General feedback system.\n\nJohn's experience illustrates the \"regulatory\" or \"corrective\" function of negative feedback. Without the intervention of the police officer, John would likely have continued to drive faster, potentially becoming a hazard on the road.\n\nAs depicted in Fig. 12.1, a negative feedback system comprises four essential components. (1) The \"feedforward\" system: ${ }^{1}$ the main system, often \"uncontrolled\" and erratic. In this case, John, the gas pedal, and the car constitute the feedforward system, where the input is the pressure John applies to the gas pedal and the output is the car's speed. (2) Output sense mechanism: a method for measuring the output. Here, the police officer's radar serves this role. (3) Feedback network: a network that generates a \"feedback signal,\" $X_{F}$, from the sensed output. The police officer acts as this network by reading the radar, approaching John's car, and issuing a speeding ticket. The quantity $K=X_{F} / Y$ is termed the \"feedback factor.\" (4) Comparison or return mechanism: a method for subtracting the feedback signal from the input to obtain the \"error,\" $E=X-X_{F}$. John performs this comparison by reducing the pressure on the gas pedal—albeit temporarily.\n\nThe feedback in Fig. 12.1 is termed \"negative\" because $X_{F}$ is subtracted from $X$. Positive feedback is also used in circuits like oscillators and digital latches. If $K=0$, i.e., no signal is fed back, we have an \"open-loop\" system. If $K \\neq 0$, the system operates in \"closed-loop\" mode. As detailed in this chapter, analyzing a feedback system involves expressing closed-loop parameters in terms of open-loop parameters. Note that the input port of the feedback network refers to the point sensing the output of the forward system.\n\nTo begin understanding the feedback system in Fig. 12.1, let's determine the closed-loop transfer function $Y / X$. Since $X_{F}=K Y$, the error produced by the subtractor is $X-K Y$, which serves as the input to the forward system:\n\n$$\n\\begin{equation*}\n(X-K Y) A_{1}=Y \\tag{12.1}\n\\end{equation*}\n$$\n\nThus,\n\n$$\n\\begin{equation*}\n\\frac{Y}{X}=\\frac{A_{1}}{1+K A_{1}} . \\tag{12.2}\n\\end{equation*}\n$$\n\nThis equation is central to our discussion of feedback, showing that negative feedback reduces the gain from $A_{1}$ (for the open-loop system) to $A_{1} /\\left(1+K A_{1}\\right)$.\n\n[^11]The term $A_{1} /\\left(1+K A_{1}\\right)$ is known as the \"closed-loop gain.\" The deliberate reduction of the circuit's gain is justified, as explained in Section 12.2, by the significant benefits of negative feedback.\n\nExample 12.1\n\nAnalyze the noninverting amplifier shown in Fig. 12.2 from a feedback perspective.\nimage_name:Figure 12.2\ndescription:\n[\nname: A1, type: OpAmp, value: A1, ports: {InP: X, InN: XF, OutP: Y, OutN:}\nname: R1, type: Resistor, value: R1, ports: {N1: Y, N2: XF}\nname: R2, type: Resistor, value: R2, ports: {N1: XF, N2: GND}\n]\nextrainfo:The circuit is a non-inverting amplifier using an op-amp with feedback resistors R1 and R2. The feedback network provides a feedback factor K = R2 / (R1 + R2). The closed-loop gain is given by A1 / (1 + K * A1).\n\nSolution The op amp $A_{1}$ performs two functions: subtracting $X$ and $X_{F}$ and amplifying. The network $R_{1}$ and $R_{2}$ also performs two functions: sensing the output voltage and providing a feedback factor of $K=R_{2} /\\left(R_{1}+R_{2}\\right)$. Therefore, Eq. (12.2) gives\n\n$$\n\\begin{equation*}\n\\frac{Y}{X}=\\frac{A_{1}}{1+\\frac{R_{2}}{R_{1}+R_{2}} A_{1}} \\tag{12.3}\n\\end{equation*}\n$$\n\nwhich matches the result obtained in Chapter 8.\n\nExercise $\\quad$ Perform the above analysis if $R_{2}=\\infty$.\n\nIt is insightful to calculate the error, $E$, produced by the subtractor. Given $E=X-X_{F}$ and $X_{F}=K A_{1} E$,\n\n$$\n\\begin{equation*}\nE=\\frac{X}{1+K A_{1}} \\tag{12.4}\n\\end{equation*}\n$$\n\nThis suggests that the difference between the feedback signal and the input decreases as $K A_{1}$ increases. In other words, the feedback signal becomes a close \"replica\" of the input (Fig. 12.3). This observation provides significant insight into the operation of feedback systems.\nimage_name:Figure 12.3\ndescription:\n[\nname: A1, type: OpAmp, value: A1, ports: {InP: X, InN: XF, OutP: Out(A1), OutN:}\nname: R1, type: Resistor, value: R1, ports: {N1: Out(A1), N2: XF}\nname: R2, type: Resistor, value: R2, ports: {N1: XF, N2: GND}\n]\nextrainfo:The circuit is a feedback amplifier where the output is fed back to the inverting input through resistors R1 and R2. The feedback signal X_F is a close replica of the input X when the gain is high.\n\nFigure 12.3 Feedback signal as a good replica of the input.\n\nExample\n12.2 $\\begin{aligned} & \\text { Explain why in the circuit of Fig. 12.2, } Y / X \\text { approaches } 1+R_{1} / R_{2} \\text { as }\\left[R_{2} /\\left(R_{1}+R_{2}\\right)\\right] A_{1} \\\\ & \\text { becomes much greater than unity. }\\end{aligned}$\n\nSolution If $K A_{1}=\\left[R_{2} /\\left(R_{1}+R_{2}\\right)\\right] A_{1}$ is large, $X_{F}$ becomes nearly identical to $X$, i.e., $X_{F} \\approx X$. The voltage divider thus requires that\n\n$$\n\\begin{equation*}\nY \\frac{R_{2}}{R_{1}+R_{2}} \\approx X \\tag{12.5}\n\\end{equation*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\n\\frac{Y}{X} \\approx 1+\\frac{R_{1}}{R_{2}} \\tag{12.6}\n\\end{equation*}\n$$\n\nCertainly, Eq. (12.3) yields the same result if $\\left[R_{2} /\\left(R_{1}+R_{2}\\right)\\right] A_{1} \\gg 1$.\nExercise $\\quad$ Repeat the above example if $R_{2}=\\infty$."
},
{
    "text": "Upon turning 18, John promptly secures his driver's license, purchases a pre-owned vehicle, and starts driving. Following his parents' stern warnings, he initially adheres to the speed limit, noticing that all other vehicles on the highway surpass it. He rationalizes that the speed limit is more akin to a suggestion and decides that slightly exceeding it poses no significant risk. Over the next few months, John incrementally increases his speed to match other drivers, only to be greeted by flashing police lights one day. He pulls over, listens to the officer's lecture, receives a speeding ticket, and, apprehensive about his parents' response, resumes driving with strict compliance to the speed limit.\n\nimage_name:Figure 12.1 General feedback system\ndescription:The diagram illustrates a general feedback system, highlighting the key components and the flow of information in a negative feedback loop.\n\n1. **Main Components:**\n- **Comparison Mechanism:** Represented by a summing junction, it accepts two inputs: the reference input \\( X \\) and the feedback signal \\( X_F \\). The difference between these signals is calculated and forwarded.\n- **Feedforward System (\\( A_1 \\)):** This primary system block processes the input signal from the comparison mechanism and is primarily responsible for generating the system's main action or output.\n- **Sense Mechanism:** This component measures the output \\( Y \\) of the feedforward system and transmits it to the feedback network.\n- **Feedback Network (\\( K \\)):** This block processes the output signal \\( Y \\) to generate the feedback signal \\( X_F \\), which is then fed back to the comparison mechanism.\n\n2. **Flow of Information or Control:**\n- The reference input \\( X \\) enters the comparison mechanism, where it is compared with the feedback signal \\( X_F \\). The resulting error signal is sent to the feedforward system \\( A_1 \\).\n- The feedforward system processes this error signal and produces the output \\( Y \\).\n- The output \\( Y \\) is sensed and sent to the feedback network.\n- The feedback network processes \\( Y \\) to produce the feedback signal \\( X_F \\), which is then looped back to the comparison mechanism.\n\n3. **Labels, Annotations, and Key Indicators:**\n- The diagram is labeled with key components such as \"Comparison Mechanism,\" \"Feedforward System,\" \"Sense Mechanism,\" and \"Feedback Network.\"\n- The signals are labeled as \\( X \\) (input), \\( Y \\) (output), and \\( X_F \\) (feedback signal).\n- The feedback network is indicated by a gain \\( K \\), representing the amplification or attenuation applied to the output signal before it is fed back.\n\n4. **Overall System Function:**\n- The main function of this system is to regulate the output \\( Y \\) by using feedback to minimize the difference between the reference input \\( X \\) and the actual output. This is achieved through a negative feedback loop, where the feedback network modifies the output signal and feeds it back to the comparison mechanism to adjust the system's performance. This setup helps maintain stability and desired performance by correcting deviations from the set point.\n\nFigure 12.1 General feedback system.\n\nJohn's experience illustrates the \"regulatory\" or \"corrective\" function of negative feedback. Without the intervention of the police officer, John likely would have continued to drive faster, potentially becoming a hazard on the road.\n\nAs depicted in Fig. 12.1, a negative feedback system comprises four essential components. (1) The \"feedforward\" system: ${ }^{1}$ the main system, often \"uncontrolled\" and erratic. John, the gas pedal, and the car constitute the feedforward system, where the input is the pressure John applies to the gas pedal and the output is the car's speed. (2) Output sense mechanism: a method for measuring the output. The police officer's radar serves this role. (3) Feedback network: a network that generates a \"feedback signal,\" $X_{F}$, from the sensed output. The police officer acts as the feedback network by reading the radar, approaching John's car, and issuing a speeding ticket. The quantity $K=X_{F} / Y$ is termed the \"feedback factor.\" (4) Comparison or return mechanism: a method for subtracting the feedback signal from the input to obtain the \"error,\" $E=X-X_{F}$. John performs this comparison by reducing the pressure on the gas pedal, at least temporarily.\n\nThe feedback in Fig. 12.1 is termed \"negative\" because $X_{F}$ is subtracted from $X$. Positive feedback is also used in circuits like oscillators and digital latches. If $K=0$, i.e., no signal is fed back, we have an \"open-loop\" system. If $K \\neq 0$, the system operates in \"closed-loop\" mode. As discussed in this chapter, analyzing a feedback system involves expressing closed-loop parameters in terms of open-loop parameters. Note that the input port of the feedback network refers to the point sensing the output of the forward system.\n\nTo begin understanding the feedback system in Fig. 12.1, let's determine the closed-loop transfer function $Y / X$. Since $X_{F}=K Y$, the error produced by the subtractor is $X-K Y$, which serves as the input to the forward system:\n\n$$\n\\begin{equation*}\n(X-K Y) A_{1}=Y \\tag{12.1}\n\\end{equation*}\n$$\n\nThus,\n\n$$\n\\begin{equation*}\n\\frac{Y}{X}=\\frac{A_{1}}{1+K A_{1}} . \\tag{12.2}\n\\end{equation*}\n$$\n\nThis equation is central to our discussion of feedback, indicating that negative feedback reduces the gain from $A_{1}$ (for the open-loop system) to $A_{1} /\\left(1+K A_{1}\\right)$.\n\n[^11]The quantity $A_{1} /\\left(1+K A_{1}\\right)$ is known as the \"closed-loop gain.\" The deliberate reduction of the circuit's gain is justified, as explained in Section 12.2, by the significant benefits of negative feedback.\n\nExample 12.1\n\nAnalyze the noninverting amplifier in Fig. 12.2 from a feedback perspective.\nimage_name:Figure 12.2\ndescription:\n[\nname: A1, type: OpAmp, value: A1, ports: {InP: X, InN: XF, OutP: Y, OutN:}\nname: R1, type: Resistor, value: R1, ports: {N1: Y, N2: XF}\nname: R2, type: Resistor, value: R2, ports: {N1: XF, N2: GND}\n]\nextrainfo:The circuit is a non-inverting amplifier using an op-amp with feedback resistors R1 and R2. The feedback network provides a feedback factor K = R2 / (R1 + R2). The closed-loop gain is given by A1 / (1 + K * A1).\n\nSolution The op amp $A_{1}$ performs two functions: subtracting $X$ and $X_{F}$ and amplifying. The network $R_{1}$ and $R_{2}$ also performs two functions: sensing the output voltage and providing a feedback factor of $K=R_{2} /\\left(R_{1}+R_{2}\\right)$. Thus, Eq. (12.2) gives\n\n$$\n\\begin{equation*}\n\\frac{Y}{X}=\\frac{A_{1}}{1+\\frac{R_{2}}{R_{1}+R_{2}} A_{1}} \\tag{12.3}\n\\end{equation*}\n$$\n\nwhich matches the result from Chapter 8.\n\nExercise $\\quad$ Perform the above analysis if $R_{2}=\\infty$.\n\nIt is insightful to calculate the error, $E$, produced by the subtractor. Since $E=X-X_{F}$ and $X_{F}=K A_{1} E$,\n\n$$\n\\begin{equation*}\nE=\\frac{X}{1+K A_{1}} \\tag{12.4}\n\\end{equation*}\n$$\n\nThis suggests that as $K A_{1}$ increases, the difference between the feedback signal and the input decreases. In other words, the feedback signal becomes a close \"replica\" of the input (Fig. 12.3). This observation provides significant insight into the operation of feedback systems.\nimage_name:Figure 12.3\ndescription:\n[\nname: A1, type: OpAmp, value: A1, ports: {InP: X, InN: XF, OutP: Out(A1), OutN:}\nname: R1, type: Resistor, value: R1, ports: {N1: Out(A1), N2: XF}\nname: R2, type: Resistor, value: R2, ports: {N1: XF, N2: GND}\n]\nextrainfo:The circuit is a feedback amplifier where the output is fed back to the inverting input through resistor R1 and R2. The feedback signal X_F is a close replica of the input X when the gain is high.\n\nFigure 12.3 Feedback signal as a good replica of the input.\n\nExample\n12.2 $\\begin{aligned} & \\text { Explain why in the circuit of Fig. 12.2, } Y / X \\text { approaches } 1+R_{1} / R_{2} \\text { as }\\left[R_{2} /\\left(R_{1}+R_{2}\\right)\\right] A_{1} \\\\ & \\text { becomes much greater than unity. }\\end{aligned}$\n\nSolution If $K A_{1}=\\left[R_{2} /\\left(R_{1}+R_{2}\\right)\\right] A_{1}$ is large, $X_{F}$ becomes nearly identical to $X$, i.e., $X_{F} \\approx X$. The voltage divider thus requires that\n\n$$\n\\begin{equation*}\nY \\frac{R_{2}}{R_{1}+R_{2}} \\approx X \\tag{12.5}\n\\end{equation*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\n\\frac{Y}{X} \\approx 1+\\frac{R_{1}}{R_{2}} \\tag{12.6}\n\\end{equation*}\n$$\n\nEq. (12.3) yields the same result if $\\left[R_{2} /\\left(R_{1}+R_{2}\\right)\\right] A_{1} \\gg 1$.\nExercise $\\quad$ Repeat the above example if $R_{2}=\\infty$."
},
{
    "text": "Upon turning 18, John eagerly secures his driver's license, purchases a pre-owned vehicle, and starts driving. Following his parents' stern counsel, he initially adheres to the speed limit, noticing that all other vehicles on the highway surpass it. He rationalizes that the speed limit is more like a suggestion and that slightly exceeding it wouldn't be detrimental. Over the next few months, John gradually increases his speed to match other drivers, only to be greeted by flashing police lights one day. He pulls over, listens to the officer's lecture, receives a speeding ticket, and, apprehensive about his parents' response, resumes driving with strict adherence to the speed limit.\n\n**Image Description: Figure 12.1 General Feedback System**\n\nThe diagram illustrates a general feedback system, highlighting the key components and the flow of information in a negative feedback loop.\n\n1. **Main Components:**\n   - **Comparison Mechanism:** This is depicted as a summing junction that accepts two inputs: the reference input \\( X \\) and the feedback signal \\( X_F \\). The difference between these signals is calculated and forwarded.\n   - **Feedforward System (\\( A_1 \\)):** This is the primary system block that processes the input signal from the comparison mechanism, typically responsible for the main action or output generation.\n   - **Sense Mechanism:** This component measures the output \\( Y \\) of the feedforward system and transmits it to the feedback network.\n   - **Feedback Network (\\( K \\)):** This block processes the output signal \\( Y \\) to generate the feedback signal \\( X_F \\), which is then fed back to the comparison mechanism.\n\n2. **Flow of Information or Control:**\n   - The reference input \\( X \\) enters the comparison mechanism, where it is compared with the feedback signal \\( X_F \\). The resulting error signal is sent to the feedforward system \\( A_1 \\).\n   - The feedforward system processes this error signal and produces the output \\( Y \\).\n   - The output \\( Y \\) is sensed and sent to the feedback network.\n   - The feedback network processes \\( Y \\) to produce the feedback signal \\( X_F \\), which is then looped back to the comparison mechanism.\n\n3. **Labels, Annotations, and Key Indicators:**\n   - The diagram is labeled with key components such as \"Comparison Mechanism,\" \"Feedforward System,\" \"Sense Mechanism,\" and \"Feedback Network.\"\n   - The signals are labeled as \\( X \\) (input), \\( Y \\) (output), and \\( X_F \\) (feedback signal).\n   - The feedback network is denoted by a gain \\( K \\), indicating the amplification or attenuation applied to the output signal before it is fed back.\n\n4. **Overall System Function:**\n   - The primary function of this system is to regulate the output \\( Y \\) by using feedback to minimize the difference between the reference input \\( X \\) and the actual output. This is achieved through a negative feedback loop, where the feedback network modifies the output signal and feeds it back to the comparison mechanism to adjust the system's performance. This setup helps maintain stability and desired performance by correcting deviations from the set point.\n\nFigure 12.1 General Feedback System.\n\nJohn's experience illustrates the \"regulatory\" or \"corrective\" function of negative feedback. Without the police officer's intervention, John would likely have continued to drive faster, potentially becoming a hazard on the road.\n\nAs depicted in Fig. 12.1, a negative feedback system comprises four essential components. (1) The \"feedforward\" system: the main system, often \"uncontrolled\" and erratic. John, the gas pedal, and the car constitute the feedforward system, where the input is the pressure John applies to the gas pedal and the output is the car's speed. (2) Output sense mechanism: a method to measure the output. The police officer's radar serves this role. (3) Feedback network: a network that generates a \"feedback signal,\" \\( X_F \\), from the sensed output. The police officer acts as this network by reading the radar, approaching John's car, and issuing a speeding ticket. The ratio \\( K = X_F / Y \\) is termed the \"feedback factor.\" (4) Comparison or return mechanism: a method to subtract the feedback signal from the input to obtain the \"error,\" \\( E = X - X_F \\). John himself performs this comparison by reducing the pressure on the gas pedal, at least temporarily.\n\nThe feedback in Fig. 12.1 is termed \"negative\" because \\( X_F \\) is subtracted from \\( X \\). Positive feedback is also used in circuits like oscillators and digital latches. If \\( K = 0 \\), meaning no signal is fed back, we have an \"open-loop\" system. If \\( K \\neq 0 \\), the system operates in \"closed-loop\" mode. As discussed in this chapter, analyzing a feedback system involves expressing closed-loop parameters in terms of open-loop parameters. Note that the input port of the feedback network refers to the point sensing the output of the forward system.\n\nTo begin understanding the feedback system in Fig. 12.1, let's determine the closed-loop transfer function \\( Y / X \\). Since \\( X_F = K Y \\), the error produced by the subtractor is \\( X - K Y \\), which serves as the input to the forward system:\n\n$$\n\\begin{equation*}\n(X - K Y) A_1 = Y \\tag{12.1}\n\\end{equation*}\n$$\n\nThus,\n\n$$\n\\begin{equation*}\n\\frac{Y}{X} = \\frac{A_1}{1 + K A_1} \\tag{12.2}\n\\end{equation*}\n$$\n\nThis equation is central to our discussion of feedback, showing that negative feedback reduces the gain from \\( A_1 \\) (for the open-loop system) to \\( A_1 / (1 + K A_1) \\).\n\n[^11]The term \\( A_1 / (1 + K A_1) \\) is known as the \"closed-loop gain.\" The deliberate reduction of the circuit's gain is justified, as explained in Section 12.2, by the significant benefits of negative feedback.\n\n**Example 12.1**\n\nAnalyze the noninverting amplifier in Fig. 12.2 from a feedback perspective.\n**Image Description: Figure 12.2**\n[\nname: A1, type: OpAmp, value: A1, ports: {InP: X, InN: XF, OutP: Y, OutN:}\nname: R1, type: Resistor, value: R1, ports: {N1: Y, N2: XF}\nname: R2, type: Resistor, value: R2, ports: {N1: XF, N2: GND}\n]\n**Extra Info:** The circuit is a non-inverting amplifier using an op-amp with feedback resistors R1 and R2. The feedback network provides a feedback factor \\( K = R2 / (R1 + R2) \\). The closed-loop gain is given by \\( A1 / (1 + K \\cdot A1) \\).\n\n**Solution:** The op amp \\( A_1 \\) performs two functions: subtraction of \\( X \\) and \\( X_F \\) and amplification. The network \\( R_1 \\) and \\( R_2 \\) also performs two functions: sensing the output voltage and providing a feedback factor \\( K = R_2 / (R_1 + R_2) \\). Thus, Eq. (12.2) gives\n\n$$\n\\begin{equation*}\n\\frac{Y}{X} = \\frac{A_1}{1 + \\frac{R_2}{R_1 + R_2} A_1} \\tag{12.3}\n\\end{equation*}\n$$\n\nThis result matches the one obtained in Chapter 8.\n\n**Exercise:** Perform the above analysis if \\( R_2 = \\infty \\).\n\nIt is insightful to compute the error \\( E \\) produced by the subtractor. Since \\( E = X - X_F \\) and \\( X_F = K A_1 E \\),\n\n$$\n\\begin{equation*}\nE = \\frac{X}{1 + K A_1} \\tag{12.4}\n\\end{equation*}\n$$\n\nThis suggests that the difference between the feedback signal and the input decreases as \\( K A_1 \\) increases. In other words, the feedback signal becomes a close \"replica\" of the input (Fig. 12.3).\n**Image Description: Figure 12.3**\n[\nname: A1, type: OpAmp, value: A1, ports: {InP: X, InN: XF, OutP: Out(A1), OutN:}\nname: R1, type: Resistor, value: R1, ports: {N1: Out(A1), N2: XF}\nname: R2, type: Resistor, value: R2, ports: {N1: XF, N2: GND}\n]\n**Extra Info:** The circuit is a feedback amplifier where the output is fed back to the inverting input through resistors R1 and R2. The feedback signal \\( X_F \\) is a close replica of the input \\( X \\) when the gain is high.\n\nFigure 12.3 Feedback signal as a good replica of the input.\n\n**Example 12.2**\nExplain why in the circuit of Fig. 12.2, \\( Y / X \\) approaches \\( 1 + R_1 / R_2 \\) as \\( [R_2 / (R_1 + R_2)] A_1 \\) becomes much greater than unity.\n\n**Solution:** If \\( K A_1 = [R_2 / (R_1 + R_2)] A_1 \\) is large, \\( X_F \\) becomes nearly identical to \\( X \\), i.e., \\( X_F \\approx X \\). The voltage divider thus requires that\n\n$$\n\\begin{equation*}\nY \\frac{R_2}{R_1 + R_2} \\approx X \\tag{12.5}\n\\end{equation*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\n\\frac{Y}{X} \\approx 1 + \\frac{R_1}{R_2} \\tag{12.6}\n\\end{equation*}\n$$\n\nOf course, Eq. (12.3) yields the same result if \\( [R_2 / (R_1 + R_2)] A_1 \\gg 1 \\).\n**Exercise:** Repeat the above example if \\( R_2 = \\infty \\)."
},
{
    "text": "Upon turning 18, John promptly secures his driver's license, purchases a pre-owned vehicle, and starts driving. Following his parents' firm counsel, he initially sticks to the speed limit, noticing that other cars on the highway consistently outpace him. He then rationalizes that the speed limit is more like a suggestion and that slightly exceeding it wouldn't cause harm. Over the next few months, John gradually increases his speed to match other drivers, only to one day see flashing police lights in his rear-view mirror. He pulls over, listens to the officer's lecture, receives a speeding ticket, and, fearing his parents' response, resumes driving with strict adherence to the speed limit.\n\nimage_name:Figure 12.1 General feedback system\ndescription:The diagram illustrates a general feedback system, highlighting the core components and the information flow within a negative feedback loop.\n\n1. **Main Components:**\n- **Comparison Mechanism:** Represented by a summing junction, it accepts two inputs: the reference input \\( X \\) and the feedback signal \\( X_F \\). The difference between these signals is calculated and forwarded.\n- **Feedforward System (\\( A_1 \\)):** This primary system block processes the input from the comparison mechanism and is typically responsible for the main action or output generation.\n- **Sense Mechanism:** This component measures the feedforward system's output \\( Y \\) and sends it to the feedback network.\n- **Feedback Network (\\( K \\)):** This block processes the output \\( Y \\) to generate the feedback signal \\( X_F \\), which is then returned to the comparison mechanism.\n\n2. **Flow of Information or Control:**\n- The reference input \\( X \\) enters the comparison mechanism, where it is compared with the feedback signal \\( X_F \\). The resulting error signal is sent to the feedforward system \\( A_1 \\).\n- The feedforward system processes this error signal to produce the output \\( Y \\).\n- The output \\( Y \\) is sensed and transmitted to the feedback network.\n- The feedback network processes \\( Y \\) to create the feedback signal \\( X_F \\), which is then looped back to the comparison mechanism.\n\n3. **Labels, Annotations, and Key Indicators:**\n- The diagram is marked with key components like \"Comparison Mechanism,\" \"Feedforward System,\" \"Sense Mechanism,\" and \"Feedback Network.\"\n- Signals are labeled as \\( X \\) (input), \\( Y \\) (output), and \\( X_F \\) (feedback signal).\n- The feedback network is indicated by a gain \\( K \\), showing the amplification or attenuation applied to the output signal before feedback.\n\n4. **Overall System Function:**\n- The system's main function is to regulate the output \\( Y \\) by using feedback to minimize the difference between the reference input \\( X \\) and the actual output. This is achieved through a negative feedback loop, where the feedback network modifies the output signal and feeds it back to the comparison mechanism to adjust the system's performance. This setup helps maintain stability and desired performance by correcting deviations from the set point.\n\nFigure 12.1 General feedback system.\n\nJohn's experience illustrates the \"regulatory\" or \"corrective\" function of negative feedback. Without the police officer's intervention, John would likely have continued to drive faster, eventually posing a significant risk on the road.\n\nAs depicted in Fig. 12.1, a negative feedback system comprises four key components. (1) The \"feedforward\" system: ${ }^{1}$ the main system, often \"uncontrolled\" and \"wild.\" John, the gas pedal, and the car constitute the feedforward system, where the input is the pressure John applies to the gas pedal and the output is the car's speed. (2) Output sense mechanism: a method for measuring the output. The police officer's radar serves this role here. (3) Feedback network: a network that generates a \"feedback signal,\" $X_{F}$, from the sensed output. The police officer acts as this network by reading the radar, approaching John's car, and issuing a speeding ticket. The ratio $K=X_{F} / Y$ is termed the \"feedback factor.\" (4) Comparison or return mechanism: a method for subtracting the feedback signal from the input to obtain the \"error,\" $E=X-X_{F}$. John performs this comparison by reducing the pressure on the gas pedal, at least temporarily.\n\nThe feedback in Fig. 12.1 is termed \"negative\" because $X_{F}$ is subtracted from $X$. Positive feedback is also used in circuits like oscillators and digital latches. If $K=0$, meaning no signal is fed back, we have an \"open-loop\" system. If $K \\neq 0$, the system operates in \"closed-loop\" mode. As discussed in this chapter, analyzing a feedback system involves expressing closed-loop parameters in terms of open-loop parameters. Note that the input port of the feedback network refers to the point sensing the forward system's output.\n\nTo begin understanding the feedback system in Fig. 12.1, let's determine the closed-loop transfer function $Y / X$. Given $X_{F}=K Y$, the error from the subtractor is $X-K Y$, which serves as the input to the forward system:\n\n$$\n\\begin{equation*}\n(X-K Y) A_{1}=Y \\tag{12.1}\n\\end{equation*}\n$$\n\nThus,\n\n$$\n\\begin{equation*}\n\\frac{Y}{X}=\\frac{A_{1}}{1+K A_{1}} . \\tag{12.2}\n\\end{equation*}\n$$\n\nThis equation is central to our study of feedback, showing that negative feedback reduces the gain from $A_{1}$ (for the open-loop system) to $A_{1} /\\left(1+K A_{1}\\right)$.\n\n[^11]The term $A_{1} /\\left(1+K A_{1}\\right)$ is known as the \"closed-loop gain.\" The deliberate reduction of circuit gain is justified by the benefits of negative feedback, as explained in Section 12.2.\n\nExample 12.1\n\nAnalyze the noninverting amplifier in Fig. 12.2 from a feedback perspective.\nimage_name:Figure 12.2\ndescription:\n[\nname: A1, type: OpAmp, value: A1, ports: {InP: X, InN: XF, OutP: Y, OutN:}\nname: R1, type: Resistor, value: R1, ports: {N1: Y, N2: XF}\nname: R2, type: Resistor, value: R2, ports: {N1: XF, N2: GND}\n]\nextrainfo:The circuit is a non-inverting amplifier using an op-amp with feedback resistors R1 and R2. The feedback network provides a feedback factor K = R2 / (R1 + R2). The closed-loop gain is given by A1 / (1 + K * A1).\n\nSolution The op amp $A_{1}$ performs two roles: subtracting $X$ and $X_{F}$ and amplifying. The network of $R_{1}$ and $R_{2}$ also has two functions: sensing the output voltage and providing a feedback factor of $K=R_{2} /\\left(R_{1}+R_{2}\\right)$. Therefore, Eq. (12.2) yields\n\n$$\n\\begin{equation*}\n\\frac{Y}{X}=\\frac{A_{1}}{1+\\frac{R_{2}}{R_{1}+R_{2}} A_{1}} \\tag{12.3}\n\\end{equation*}\n$$\n\nThis matches the result from Chapter 8.\n\nExercise $\\quad$ Perform the above analysis if $R_{2}=\\infty$.\n\nIt's insightful to calculate the error, $E$, produced by the subtractor. Since $E=X-X_{F}$ and $X_{F}=K A_{1} E$,\n\n$$\n\\begin{equation*}\nE=\\frac{X}{1+K A_{1}} \\tag{12.4}\n\\end{equation*}\n$$\n\nThis indicates that the difference between the feedback signal and the input decreases as $K A_{1}$ increases. In other words, the feedback signal becomes a close \"replica\" of the input (Fig. 12.3). This observation offers significant insights into the operation of feedback systems.\nimage_name:Figure 12.3\ndescription:\n[\nname: A1, type: OpAmp, value: A1, ports: {InP: X, InN: XF, OutP: Out(A1), OutN:}\nname: R1, type: Resistor, value: R1, ports: {N1: Out(A1), N2: XF}\nname: R2, type: Resistor, value: R2, ports: {N1: XF, N2: GND}\n]\nextrainfo:The circuit is a feedback amplifier where the output is fed back to the inverting input through resistors R1 and R2. The feedback signal X_F closely resembles the input X when the gain is high.\n\nFigure 12.3 Feedback signal as a good replica of the input.\n\nExample\n12.2 $\\begin{aligned} & \\text { Explain why in the circuit of Fig. 12.2, } Y / X \\text { approaches } 1+R_{1} / R_{2} \\text { as }\\left[R_{2} /\\left(R_{1}+R_{2}\\right)\\right] A_{1} \\\\ & \\text { becomes much greater than unity. }\\end{aligned}$\n\nSolution If $K A_{1}=\\left[R_{2} /\\left(R_{1}+R_{2}\\right)\\right] A_{1}$ is large, $X_{F}$ becomes nearly identical to $X$, i.e., $X_{F} \\approx X$. The voltage divider thus requires that\n\n$$\n\\begin{equation*}\nY \\frac{R_{2}}{R_{1}+R_{2}} \\approx X \\tag{12.5}\n\\end{equation*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\n\\frac{Y}{X} \\approx 1+\\frac{R_{1}}{R_{2}} \\tag{12.6}\n\\end{equation*}\n$$\n\nOf course, Eq. (12.3) provides the same result if $\\left[R_{2} /\\left(R_{1}+R_{2}\\right)\\right] A_{1} \\gg 1$.\nExercise $\\quad$ Repeat the above example if $R_{2}=\\infty$."
},
{
    "text": "In Fig. 12.1, the quantity $K A_{1}$, which equals the product of the forward system's gain and the feedback factor, influences numerous properties of the entire system. Known as the \"loop gain,\" $K A_{1}$ has a notable interpretation. By setting the input $X$ to zero and \"breaking\" the loop at any point, such as shown in Fig. 12.4(a), we can analyze this concept.\n\nimage_name:Fig. 12.4 (a)\ndescription:The block diagram labeled (a) illustrates a feedback control system comprising the following elements:\n\n1. **Main Components:**\n- **Summing Junction:** Represented by a circle with plus and minus signs, it functions as a subtractor. It accepts two inputs—one from the ground (GND) and one from the feedback path—and outputs their difference.\n- **Amplifier A1:** This block denotes the forward gain of the system, amplifying the output from the summing junction.\n- **Feedback Path with Gain K:** The output of amplifier A1 is fed back through a block marked \"K,\" indicating the feedback gain.\n\n2. **Information or Control Flow:**\n- The system's input is set to zero (grounded), and the control loop is interrupted at point M.\n- The output from amplifier A1 is directed to point N and simultaneously fed back through the feedback path.\n- The feedback path, including the gain block \"K,\" sends the signal back to the summing junction, creating a feedback loop that affects the input to amplifier A1.\n\n3. **Labels, Annotations, and Key Indicators:**\n- Points M and N are marked as key reference points for system analysis.\n- The feedback loop is indicated by the path from N through K back to the summing junction.\n- The input to amplifier A1 is labeled \"In(A1),\" and the output is labeled \"Out(K).\"\n\n4. **Overall System Function:**\n- This system primarily models a feedback control loop, a common configuration in control systems to stabilize or control system behavior. Breaking the loop at M allows for the analysis of loop gain and understanding of how feedback impacts overall system performance.\n\nimage_name:Fig. 12.4(b)\ndescription:The block diagram labeled \"(b)\" depicts a feedback loop used to calculate the loop gain in a control system. It includes the following main components:\n\n1. **Summing Junction:** Shown as a circle with plus and minus signs, it combines input signals by subtracting the feedback signal from the test signal \\( V_{\\text{test}} \\). The result is fed into amplifier \\( A_1 \\).\n\n2. **Amplifier \\( A_1 \\)**: This block represents the forward gain stage, amplifying the input from the summing junction. The output of \\( A_1 \\) is labeled \\( V_N \\), indicating the node where the feedback loop is observed.\n\n3. **Feedback Path:** The output \\( V_N \\) is fed back through a feedback network with gain \\( K \\), crucial for determining the loop gain. The feedback signal is subtracted from the test signal at the summing junction.\n\n4. **Test Signal Source:** \\( V_{\\text{test}} \\) is applied as an input to evaluate the loop gain, represented by a voltage source connected to the feedback network's input.\n\n**Information Flow:**\n- The test signal \\( V_{\\text{test}} \\) is introduced at the summing junction.\n- The summing junction subtracts the feedback signal (amplified by \\( K \\)) from \\( V_{\\text{test}} \\), passing the resultant signal to amplifier \\( A_1 \\).\n- The output from \\( A_1 \\), labeled \\( V_N \\), is then fed back through the feedback network with gain \\( K \\), completing the loop.\n\n**Labels and Annotations:**\n- The diagram includes labels such as \\( V_N \\), \\( V_{\\text{test}} \\), and \\( GND \\) for ground connections.\n- The feedback path is marked with gain \\( K \\), highlighting its role in the feedback loop.\n\n**Overall System Function:**\nThe main function of this system is to determine the loop gain by introducing a test signal and observing the feedback loop's behavior. The arrangement of the summing junction, amplifier, and feedback path allows for analyzing the system's response to loop changes, crucial for understanding stability and performance. The loop gain is a key parameter for assessing the system's ability to maintain desired performance amid disturbances or input changes.\n\nFigure 12.4 illustrates the computation of the loop gain by (a) breaking the loop and (b) applying a test signal.\nThe resulting topology can be viewed as a system with input $M$ and output $N$. As shown in Fig. 12.4(b), applying a test signal at $M$ and tracing it through the feedback network, subtractor, and forward system yields the signal at $N$. The input to $A_{1}$ equals $-K V_{\\text {test }}$, resulting in\n\n$$\n\\begin{equation*}\nV_{N}=-K V_{\\text {test }} A_{1} \\tag{12.7}\n\\end{equation*}\n$$\n\nand thus\n\n$$\n\\begin{equation*}\nK A_{1}=-\\frac{V_{N}}{V_{\\text {test }}} \\tag{12.8}\n\\end{equation*}\n$$\n\nIn essence, a signal \"going around the loop\" experiences a gain of $-K A_{1}$, hence the term \"loop gain.\" It's crucial not to confuse the closed-loop gain, $A_{1} /\\left(1+K A_{1}\\right)$, with the loop gain, $K A_{1}$.\n\n[^12]Example: Calculate the loop gain of the feedback system in Fig. 12.1 by breaking the loop at the 12.3 input of $A_{1}$.\n\nSolution: Fig. 12.5 shows the system with the test signal applied to the input of $A_{1}$. The feedback network's output equals $K A_{1} V_{\\text {test }}$, giving\n\n$$\n\\begin{equation*}\nV_{N}=-K A_{1} V_{\\text {test }} \\tag{12.9}\n\\end{equation*}\n$$\n\nand the same result as Eq. (12.8).\n\nimage_name:Figure 12.5\ndescription:Figure 12.5's block diagram represents a feedback control system with several key components and signal paths.\n\n1. **Main Components:**\n- **Subtractor:** Located at the diagram's start, it takes two inputs (one from the ground and one from the feedback path) and outputs their difference, labeled \\( V_N \\).\n- **Amplifier \\( A_1 \\)**: Positioned after the test voltage source \\( V_{\\text{test}} \\), this block amplifies the input signal.\n- **Feedback Gain Block \\( K \\)**: This block represents the feedback gain applied to the output signal, connected in the feedback loop to control system response.\n- **Test Voltage Source \\( V_{\\text{test}} \\)**: Used to apply a test signal to the system at point \\( M \\).\n\n2. **Information or Control Flow:**\n- The system begins at the subtractor, calculating the difference between the input and feedback signal to produce \\( V_N \\).\n- \\( V_N \\) is fed into the feedback path, passing through the gain block \\( K \\) for scaling.\n- After \\( K \\), the signal moves to the test voltage source \\( V_{\\text{test}} \\) at point \\( M \\), combining with the test signal.\n- This combined signal is fed into amplifier \\( A_1 \\) for amplification.\n- The amplified output is directed to the output \\( Y \\), completing the signal path.\n- The output \\( Y \\) is also fed back to the subtractor, forming a closed feedback loop.\n\n3. **Labels, Annotations, and Key Indicators:**\n- Labels such as \\( V_N \\), \\( V_{\\text{test}} \\), \\( A_1 \\), \\( K \\), and \\( Y \\) indicate various signals and components.\n- Ground symbols denote reference points for voltage levels.\n\n4. **Overall System Function:**\n- The system demonstrates a feedback control mechanism, where output feedback to the input maintains system control. Breaking the loop at the subtractor's input allows for feedback effect analysis on overall system performance. The test voltage \\( V_{\\text{test}} \\) probes the system's response to calculate the loop gain.\n\nFigure 12.5\nExercise: Compute the loop gain by breaking the loop at the subtractor's input.\n\nOne might wonder about potential ambiguities in signal flow direction during the loop gain test. For instance, can we alter Fig. 12.4(b)'s topology as shown in Fig. 12.6, applying $V_{\\text {test }}$ to $A_{1}$'s output and expecting a signal at its input and eventually at $N$? While this might yield a finite value, it doesn't reflect the circuit's actual behavior. In a feedback system, signal flow is from $A_{1}$'s input to its output and from the feedback network's input to its output.\n\nDid you know?\n\nNegative feedback is prevalent in nature. Entering a bright room prompts your brain to shrink your pupils. After listening to loud music for hours, your hearing threshold adjusts, making you temporarily hard of hearing. Attempting to write with closed eyes results in poor handwriting because the feedback loop monitoring pen strokes is disrupted.\n\nimage_name:Figure 12.6 Incorrect method of applying test signal.\ndescription:Figure 12.6, labeled 'Incorrect method of applying test signal,' shows a feedback system with several key components and signal paths.\n\n1. **Main Components:**\n- **Summing Junction (+):** Combines input signal 'X' and feedback signal, outputting their difference.\n- **Amplifier (A1):** Receives the summing junction's output, amplifying the signal (labeled 'In(A1)').\n- **Feedback Path:** The amplified signal is fed back to the summing junction, essential for system control.\n- **Test Voltage Source (Vtest):** Incorrectly placed at the amplifier's output, introducing a test voltage 'Vtest' into the circuit.\n- **Feedback Amplifier (K):** Part of the feedback loop, receiving the amplifier's output and feeding back a portion to the summing junction, with gain 'K'.\n- **Output (Out(K)):** The feedback amplifier's output, labeled 'Out(k)', fed back to the summing junction.\n\n2. **Information or Control Flow:**\n- The input signal 'X' enters the summing junction, combined with the feedback signal, and the difference is sent to amplifier 'A1'.\n- The amplified signal splits, one path leading to the test voltage source 'Vtest' and the other to the feedback amplifier 'K'.\n- The feedback amplifier processes the signal and sends it back to the summing junction, completing the feedback loop.\n\n3. **Labels, Annotations, and Key Indicators:**\n- 'In(A1)' indicates the amplifier's input.\n- 'Vtest' is the test voltage applied at the output, incorrectly placed.\n- 'Out(k)' is the feedback amplifier's output.\n- 'VN' is a reference voltage connected to ground, labeled at the feedback amplifier.\n\n4. **Overall System Function:**\n- The system aims to control output through negative feedback. However, placing the test voltage 'Vtest' at the amplifier's output disrupts the intended feedback loop, potentially leading to inaccurate results or instability.\n\nFigure 12.6 Incorrect method of applying test signal."
},
{
    "text": "In Fig. 12.1, the quantity $K A_{1}$, which equals the product of the forward system's gain and the feedback factor, influences numerous properties of the entire system. Referred to as the \"loop gain,\" $K A_{1}$ has a notable interpretation. Suppose we set the input $X$ to zero and \"break\" the loop at any point, as illustrated in Fig. 12.4(a).\n\nimage_name:Fig. 12.4 (a)\ndescription:The block diagram labeled (a) illustrates a feedback control system comprising the following elements:\n\n1. **Main Components:**\n- **Summing Junction:** Depicted as a circle with plus and minus signs, it functions as a subtractor. It accepts two inputs—one from the ground (GND) and another from the feedback path—and outputs their difference.\n- **Amplifier A1:** This block represents the system's forward gain, amplifying the output from the summing junction.\n- **Feedback Path with Gain K:** The output of amplifier A1 is fed back through a block marked \"K,\" indicating the feedback gain.\n\n2. **Information or Control Flow:**\n- The system's input is set to zero (grounded), and the control loop is interrupted at point M.\n- The output from amplifier A1 is directed to point N and simultaneously fed back through the feedback path.\n- The feedback path, including the gain block \"K,\" sends the signal back to the summing junction, creating a feedback loop that affects the input to amplifier A1.\n\n3. **Labels, Annotations, and Key Indicators:**\n- Points M and N are marked as key reference points for system analysis.\n- The feedback loop is indicated by the path from N through K back to the summing junction.\n- The input to amplifier A1 is labeled \"In(A1),\" and the output is labeled \"Out(K).\"\n\n4. **Overall System Function:**\n- The system's primary role is to model a feedback control loop, a common configuration in control systems designed to stabilize or control system behavior. Breaking the loop at M allows for the analysis of loop gain and understanding of how feedback impacts overall system performance.\n\nimage_name:Fig. 12.4(b)\ndescription:The block diagram labeled \"(b)\" depicts a feedback loop used to calculate the loop gain in a control system. It includes the following main components:\n\n1. **Summing Junction:** Represented by a circle with plus and minus signs, it combines input signals by subtracting the feedback signal from the test signal \\( V_{\\text{test}} \\). The output feeds into amplifier \\( A_1 \\).\n\n2. **Amplifier \\( A_1 \\)**: This block signifies a forward gain stage, amplifying the input from the summing junction. The output of \\( A_1 \\) is labeled \\( V_N \\), indicating the node where the feedback loop is observed.\n\n3. **Feedback Path:** The output \\( V_N \\) is fed back through a feedback network with gain \\( K \\), crucial for determining the loop gain. The feedback signal is subtracted from the test signal at the summing junction.\n\n4. **Test Signal Source:** \\( V_{\\text{test}} \\) is applied as an input to evaluate the loop gain, represented by a voltage source connected to the feedback network's input.\n\n**Information Flow:**\n- The test signal \\( V_{\\text{test}} \\) is introduced at the summing junction.\n- The summing junction subtracts the feedback signal (amplified by \\( K \\)) from \\( V_{\\text{test}} \\), passing the resultant signal to amplifier \\( A_1 \\).\n- The output from \\( A_1 \\), labeled \\( V_N \\), is then fed back through the feedback network with gain \\( K \\) to complete the loop.\n\n**Labels and Annotations:**\n- The diagram includes labels such as \\( V_N \\), \\( V_{\\text{test}} \\), and \\( GND \\) for ground connections.\n- The feedback path is marked with gain \\( K \\), indicating its role in the feedback loop.\n\n**Overall System Function:**\nThe system's main function is to determine the loop gain by introducing a test signal and observing the feedback loop's behavior. The arrangement of the summing junction, amplifier, and feedback path facilitates analysis of the system's response to loop changes, essential for understanding stability and performance. The loop gain is a critical parameter for assessing the system's ability to maintain desired performance amid disturbances or input changes.\n\nFigure 12.4 Computation of the loop gain by (a) breaking the loop and (b) applying a test signal.\nThe resulting configuration can be viewed as a system with input $M$ and output $N$. As shown in Fig. 12.4(b), applying a test signal at $M$ and tracing it through the feedback network, subtractor, and forward system yields the signal at $N$. The input to $A_{1}$ equals $-K V_{\\text {test }}$, resulting in\n\n$$\n\\begin{equation*}\nV_{N}=-K V_{\\text {test }} A_{1} \\tag{12.7}\n\\end{equation*}\n$$\n\nand thus\n\n$$\n\\begin{equation*}\nK A_{1}=-\\frac{V_{N}}{V_{\\text {test }}} \\tag{12.8}\n\\end{equation*}\n$$\n\nIn essence, a signal \"traveling around the loop\" experiences a gain of $-K A_{1}$, hence the term \"loop gain.\" It is crucial not to confuse the closed-loop gain, $A_{1} /\\left(1+K A_{1}\\right)$, with the loop gain, $K A_{1}$.\n\n[^12]Example Calculate the loop gain of the feedback system in Fig. 12.1 by breaking the loop at the 12.3 input of $A_{1}$.\n\nSolution Fig. 12.5 illustrates the system with the test signal applied to $A_{1}$'s input. The feedback network's output equals $K A_{1} V_{\\text {test }}$, leading to\n\n$$\n\\begin{equation*}\nV_{N}=-K A_{1} V_{\\text {test }} \\tag{12.9}\n\\end{equation*}\n$$\n\nand the same result as Eq. (12.8).\n\nimage_name:Figure 12.5\ndescription:Figure 12.5's block diagram represents a feedback control system with several key components and signal paths.\n\n1. **Main Components:**\n- **Subtractor:** Located at the diagram's start, it takes two inputs (one from ground and one from the feedback path) and outputs their difference, labeled \\( V_N \\).\n- **Amplifier \\( A_1 \\)**: Positioned after the test voltage source \\( V_{\\text{test}} \\), this block amplifies its input signal.\n- **Feedback Gain Block \\( K \\)**: This block applies feedback gain to the output signal, connected in the feedback loop to control system response.\n- **Test Voltage Source \\( V_{\\text{test}} \\)**: Used to apply a test signal at point \\( M \\).\n\n2. **Information or Control Flow:**\n- The system begins at the subtractor, which calculates the difference between the input and feedback signals, producing \\( V_N \\).\n- \\( V_N \\) is fed into the feedback path, passing through the gain block \\( K \\), which scales the signal.\n- After \\( K \\), the signal moves to the test voltage source \\( V_{\\text{test}} \\) at point \\( M \\), combining with the test signal.\n- This combined signal enters amplifier \\( A_1 \\), which amplifies it.\n- The amplified output is directed to the output \\( Y \\), completing the signal path.\n- The output \\( Y \\) is also fed back to the subtractor, forming a closed feedback loop.\n\n3. **Labels, Annotations, and Key Indicators:**\n- Labels include \\( V_N \\), \\( V_{\\text{test}} \\), \\( A_1 \\), \\( K \\), and \\( Y \\) to indicate various signals and components.\n- Ground symbols denote voltage reference points.\n\n4. **Overall System Function:**\n- The system demonstrates a feedback control mechanism, where output feedback to the input maintains system control. Breaking the loop at the subtractor's input allows for feedback effect analysis on overall system performance. The test voltage \\( V_{\\text{test}} \\) probes the system's response to calculate loop gain.\n\nFigure 12.5\nExercise Calculate the loop gain by breaking the loop at the subtractor's input.\n\nReaders might question the ambiguity in signal flow direction during loop gain testing. For instance, can Fig. 12.4(b)'s topology be modified as shown in Fig. 12.6? This would involve applying $V_{\\text {test }}$ to $A_{1}$'s output and expecting a signal at its input and eventually at $N$. While this might yield a finite value, it doesn't reflect the circuit's actual behavior. In a feedback system, signal flow is from $A_{1}$'s input to its output and from the feedback network's input to its output.\n\nDid you know?\n\nNegative feedback is prevalent in nature. Entering a bright room triggers your brain to缩小 your pupils. Listening to loud music for hours results in temporary hearing impairment as your ear adjusts your hearing threshold. Writing with closed eyes results in poor handwriting because the feedback loop monitoring pen strokes is disrupted.\n\nimage_name:Figure 12.6 Incorrect method of applying test signal.\ndescription:Figure 12.6, labeled 'Incorrect method of applying test signal,' shows a feedback system with several key components and signal paths.\n\n1. **Main Components:**\n- **Summing Junction (+):** Combines input signal 'X' and feedback signal, outputting their difference.\n- **Amplifier (A1):** Receives the summing junction's output, amplifying it with a gain indicated as 'In(A1)'.\n- **Feedback Path:** The amplified signal is fed back to the summing junction, essential for system control.\n- **Test Voltage Source (Vtest):** Incorrectly placed at the amplifier's output, introducing a test voltage 'Vtest' connected to ground (GND).\n- **Feedback Amplifier (K):** Part of the feedback loop, receiving amplifier 'A1''s output and feeding back a portion to the summing junction with gain 'K'.\n- **Output (Out(K)):** The feedback amplifier 'K''s output, labeled 'Out(k)', fed back to the summing junction.\n\n2. **Information or Control Flow:**\n- The input signal 'X' enters the summing junction, combined with the feedback signal, and the difference is sent to amplifier 'A1'.\n- The amplified signal splits, with one path leading to the test voltage source 'Vtest' and the other to the feedback amplifier 'K'.\n- The feedback amplifier processes the signal and sends it back to the summing junction, completing the feedback loop.\n\n3. **Labels, Annotations, and Key Indicators:**\n- 'In(A1)' indicates amplifier 'A1''s input.\n- 'Vtest' is the incorrectly placed test voltage.\n- 'Out(k)' is the feedback amplifier 'K''s output.\n- 'VN' is a reference voltage connected to ground, labeled at the feedback amplifier.\n\n4. **Overall System Function:**\n- The system aims to control output through negative feedback. However, placing the test voltage 'Vtest' at the amplifier's output disrupts the intended feedback loop, potentially leading to inaccurate results or instability despite efforts to stabilize gain.\n\nFigure 12.6 Incorrect method of applying test signal."
},
{
    "text": "In Fig. 12.1, the quantity $K A_{1}$, which equals the product of the forward system's gain and the feedback factor, influences numerous characteristics of the entire system. Referred to as the \"loop gain,\" $K A_{1}$ has a noteworthy interpretation. By setting the input $X$ to zero and \"breaking\" the loop at any arbitrary point, such as shown in Fig. 12.4(a), we can analyze this.\n\n**Image Description: Fig. 12.4 (a)**\nThis block diagram, labeled (a), illustrates a feedback control system comprising:\n\n1. **Main Components:**\n   - **Summing Junction:** Represented by a circle with plus and minus signs, it functions as a subtractor. It accepts two inputs—one from ground (GND) and one from the feedback path—and outputs their difference.\n   - **Amplifier A1:** This block signifies the system's forward gain, amplifying the output from the summing junction.\n   - **Feedback Path with Gain K:** The output of amplifier A1 is routed back through a block marked \"K,\" indicating the feedback gain.\n\n2. **Information/Control Flow:**\n   - The system's input is set to zero (grounded), and the control loop is interrupted at point M.\n   - The output from amplifier A1 is directed to point N and simultaneously fed back through the feedback path.\n   - The feedback path, including the gain block \"K,\" sends the signal back to the summing junction, creating a feedback loop that affects the input to amplifier A1.\n\n3. **Labels, Annotations, and Key Indicators:**\n   - Points M and N are marked as key reference points for system analysis.\n   - The feedback loop is indicated by the path from N through K back to the summing junction.\n   - The input to amplifier A1 is labeled \"In(A1),\" and the output is labeled \"Out(K).\"\n\n4. **System Function:**\n   - The system's primary role is to model a feedback control loop, a standard configuration in control systems for stabilizing or controlling behavior. Breaking the loop at M allows for loop gain analysis and understanding of the feedback's impact on overall system performance.\n\n**Image Description: Fig. 12.4(b)**\nThe block diagram labeled \"(b)\" depicts a feedback loop used to calculate the loop gain in a control system, featuring:\n\n1. **Summing Junction:** Shown as a circle with plus and minus signs, it combines input signals by subtracting the feedback signal from the test signal \\( V_{\\text{test}} \\). Its output feeds into amplifier \\( A_1 \\).\n\n2. **Amplifier \\( A_1 \\):** This block represents the forward gain stage, amplifying the input from the summing junction. The output, labeled \\( V_N \\), is the node where the feedback loop is observed.\n\n3. **Feedback Path:** The output \\( V_N \\) is fed back through a network with gain \\( K \\), crucial for determining the loop gain. This feedback signal is subtracted from the test signal at the summing junction.\n\n4. **Test Signal Source:** \\( V_{\\text{test}} \\) is applied as an input to evaluate the loop gain, represented by a voltage source connected to the feedback network input.\n\n**Information Flow:**\n   - The test signal \\( V_{\\text{test}} \\) enters the system at the summing junction.\n   - The summing junction subtracts the feedback signal (amplified by \\( K \\)) from \\( V_{\\text{test}} \\), passing the result to amplifier \\( A_1 \\).\n   - The output from \\( A_1 \\), \\( V_N \\), is then fed back through the gain \\( K \\) feedback network, completing the loop.\n\n**Labels and Annotations:**\n   - The diagram includes labels such as \\( V_N \\), \\( V_{\\text{test}} \\), and \\( GND \\) for ground connections.\n   - The feedback path is marked with gain \\( K \\), highlighting its role.\n\n**System Function:**\n   - The system's main function is to determine the loop gain by introducing a test signal and observing the feedback loop's behavior. The arrangement of the summing junction, amplifier, and feedback path allows for analyzing the system's response to loop changes, critical for understanding stability and performance. The loop gain is a key parameter for assessing the system's ability to maintain desired performance amid disturbances or input changes.\n\n**Figure 12.4: Computation of Loop Gain**\nThe topology can be viewed as a system with input $M$ and output $N$. As shown in Fig. 12.4(b), applying a test signal at $M$ and tracing it through the feedback network, subtractor, and forward system yields the signal at $N$. The input to $A_{1}$ equals $-K V_{\\text {test }}$, resulting in:\n\n$$\n\\begin{equation*}\nV_{N}=-K V_{\\text {test }} A_{1} \\tag{12.7}\n\\end{equation*}\n$$\n\nThus,\n\n$$\n\\begin{equation*}\nK A_{1}=-\\frac{V_{N}}{V_{\\text {test }}} \\tag{12.8}\n\\end{equation*}\n$$\n\nIn essence, a signal traversing the loop experiences a gain of $-K A_{1}$, hence the term \"loop gain.\" It's crucial not to confuse the closed-loop gain, $A_{1} /\\left(1+K A_{1}\\right)$, with the loop gain, $K A_{1}$.\n\n[^12] **Example:**\nCompute the loop gain of the Fig. 12.1 feedback system by breaking the loop at the 12.3 input of $A_{1}$.\n\n**Solution:**\nFig. 12.5 illustrates the system with the test signal applied to $A_{1}$'s input. The feedback network's output equals $K A_{1} V_{\\text {test }}$, leading to:\n\n$$\n\\begin{equation*}\nV_{N}=-K A_{1} V_{\\text {test }} \\tag{12.9}\n\\end{equation*}\n$$\n\nThis yields the same result as Eq. (12.8).\n\n**Image Description: Figure 12.5**\nThis block diagram in Figure 12.5 represents a feedback control system with key components and signal paths:\n\n1. **Main Components:**\n   - **Subtractor:** Located at the diagram's start, it takes two inputs (one from ground and one from the feedback path) and outputs their difference, labeled \\( V_N \\).\n   - **Amplifier \\( A_1 \\):** Positioned after the test voltage source \\( V_{\\text{test}} \\), it amplifies the input signal.\n   - **Feedback Gain Block \\( K \\):** This block applies feedback gain to the output signal, connected in the feedback loop to control system response.\n   - **Test Voltage Source \\( V_{\\text{test}} \\):** Used to apply a test signal at point \\( M \\).\n\n2. **Information/Control Flow:**\n   - The system starts at the subtractor, calculating the input and feedback signal difference to produce \\( V_N \\).\n   - \\( V_N \\) is fed into the feedback path, passing through the gain block \\( K \\) for scaling.\n   - After \\( K \\), the signal moves to the test voltage source \\( V_{\\text{test}} \\) at point \\( M \\), combining with the test signal.\n   - This combined signal enters amplifier \\( A_1 \\) for amplification.\n   - The amplified output is directed to output \\( Y \\), completing the signal path.\n   - Output \\( Y \\) is also fed back to the subtractor, forming a closed feedback loop.\n\n3. **Labels, Annotations, and Key Indicators:**\n   - The diagram includes labels like \\( V_N \\), \\( V_{\\text{test}} \\), \\( A_1 \\), \\( K \\), and \\( Y \\) to indicate signals and components.\n   - Ground symbols denote voltage level reference points.\n\n4. **System Function:**\n   - The system's primary function is to demonstrate a feedback control mechanism, where output feedback to the input maintains system control. Breaking the loop at the subtractor's input allows for feedback effect analysis on overall system performance. The test voltage \\( V_{\\text{test}} \\) probes the system's response and calculates the loop gain.\n\n**Figure 12.5**\n**Exercise:**\nCompute the loop gain by breaking the loop at the subtractor's input.\n\nOne might wonder about potential ambiguity in the signal flow direction during the loop gain test. For instance, can Fig. 12.4(b)'s topology be modified as shown in Fig. 12.6? This would involve applying $V_{\\text {test }}$ to $A_{1}$'s output and observing a signal at its input and eventually at $N$. While this might yield a finite value, it doesn't reflect the circuit's actual behavior. In a feedback system, signal flow is from $A_{1}$'s input to its output and from the feedback network's input to its output.\n\n**Did You Know?**\nNegative feedback is widespread in nature. Entering a bright room triggers your brain to constrict your pupils. After hours of loud music, you experience temporary hearing loss as your ear adjusts your hearing threshold. Writing with closed eyes results in poor handwriting because the feedback loop monitoring pen strokes is disrupted.\n\n**Image Description: Figure 12.6 Incorrect Test Signal Application**\nThis diagram, labeled 'Figure 12.6 Incorrect method of applying test signal,' shows a feedback system with key components and signal paths:\n\n1. **Main Components:**\n   - **Summing Junction (+):** Combines input signal 'X' and feedback signal, outputting their difference.\n   - **Amplifier (A1):** Receives the summing junction's output and amplifies it, labeled 'In(A1)'.\n   - **Feedback Path:** The amplified signal is fed back to the summing junction, crucial for system behavior control.\n   - **Test Voltage Source (Vtest):** Incorrectly placed at the amplifier's output, introducing test voltage 'Vtest' into the circuit.\n   - **Feedback Amplifier (K):** Part of the feedback loop, receiving amplifier 'A1''s output and feeding back a portion to the summing junction.\n   - **Output (Out(K)):** The feedback amplifier 'K''s output, labeled 'Out(k),' fed back to the summing junction.\n\n2. **Information/Control Flow:**\n   - Input signal 'X' enters the summing junction, combined with the feedback signal, and the difference is sent to amplifier 'A1'.\n   - The amplified signal splits, with one path leading to the test voltage source 'Vtest' and the other to the feedback amplifier 'K'.\n   - The feedback amplifier processes the signal and sends it back to the summing junction, completing the feedback loop.\n\n3. **Labels, Annotations, and Key Indicators:**\n   - 'In(A1)' indicates amplifier 'A1''s input.\n   - 'Vtest' is the test voltage applied at the output, incorrectly placed.\n   - 'Out(k)' is the feedback amplifier 'K''s output.\n   - 'VN' is a reference voltage connected to ground, labeled at the feedback amplifier.\n\n4. **System Function:**\n   - The system aims to control output through negative feedback. However, placing the test voltage 'Vtest' at the amplifier's output is incorrect, disrupting the intended feedback loop. The system aims to stabilize gain despite amplifier 'A1' variations, but the incorrect test signal application may lead to inaccurate results or instability.\n\n**Figure 12.6 Incorrect method of applying test signal.**"
},
{
    "text": "In Fig. 12.1, the quantity $K A_{1}$, which equals the product of the forward system's gain and the feedback factor, influences numerous properties of the entire system. Referred to as the \"loop gain,\" $K A_{1}$ has a notable interpretation. By setting the input $X$ to zero and \"breaking\" the loop at any point, such as illustrated in Fig. 12.4(a), we can analyze this.\n\nimage_name:Fig. 12.4 (a)\ndescription:The block diagram labeled (a) depicts a feedback control system comprising:\n\n1. **Main Components:**\n- **Summing Junction:** Represented by a circle with plus and minus signs, it functions as a subtractor. It receives two inputs—one from ground (GND) and one from the feedback path—and outputs their difference.\n- **Amplifier A1:** This block signifies the system's forward gain, amplifying the output from the summing junction.\n- **Feedback Path with Gain K:** The output of amplifier A1 is routed through a block marked \"K,\" indicating the feedback gain.\n\n2. **Information or Control Flow:**\n- The system's input is set to zero (grounded), and the control loop is interrupted at point M.\n- The output from amplifier A1 is directed to point N and simultaneously fed back through the feedback path.\n- The feedback path, including the gain block \"K,\" sends the signal back to the summing junction, creating a feedback loop that affects the input to amplifier A1.\n\n3. **Labels, Annotations, and Key Indicators:**\n- Points M and N are marked as key reference points for system analysis.\n- The feedback loop is indicated by the path from N through K back to the summing junction.\n- The input to amplifier A1 is labeled \"In(A1),\" and the output is labeled \"Out(K).\"\n\n4. **Overall System Function:**\n- This system primarily models a feedback control loop, a standard configuration in control systems to stabilize or control system behavior. Breaking the loop at M allows for loop gain analysis, helping understand how feedback impacts overall system performance.\n\nimage_name:Fig. 12.4(b)\ndescription:The block diagram labeled \"(b)\" illustrates a feedback loop used to calculate the loop gain in a control system, featuring:\n\n1. **Summing Junction:** Shown as a circle with plus and minus signs, it combines input signals by subtracting the feedback signal from the test signal \\( V_{\\text{test}} \\). The result is fed into amplifier \\( A_1 \\).\n\n2. **Amplifier \\( A_1 \\)**: This block represents the forward gain stage, amplifying the input from the summing junction. The output is labeled \\( V_N \\), indicating the node for observing the feedback loop.\n\n3. **Feedback Path:** The output \\( V_N \\) is fed back through a network with gain \\( K \\), crucial for determining the loop gain. The feedback signal is subtracted from the test signal at the summing junction.\n\n4. **Test Signal Source:** \\( V_{\\text{test}} \\) is applied as an input to evaluate the loop gain, represented by a voltage source connected to the feedback network input.\n\n**Information Flow:**\n- The test signal \\( V_{\\text{test}} \\) is introduced at the summing junction.\n- The summing junction subtracts the feedback signal (amplified by \\( K \\)) from \\( V_{\\text{test}} \\), passing the result to amplifier \\( A_1 \\).\n- The output \\( V_N \\) from \\( A_1 \\) is then fed back through the feedback network with gain \\( K \\), completing the loop.\n\n**Labels and Annotations:**\n- The diagram includes labels such as \\( V_N \\), \\( V_{\\text{test}} \\), and \\( GND \\) for ground connections.\n- The feedback path is marked with gain \\( K \\), highlighting its role in the feedback loop.\n\n**Overall System Function:**\nThe system's main function is to determine the loop gain by introducing a test signal and observing the feedback loop's behavior. The arrangement of the summing junction, amplifier, and feedback path facilitates analyzing the system's response to loop changes, essential for understanding stability and performance. The loop gain is a critical parameter for assessing the system's ability to maintain desired performance amid disturbances or input changes.\n\nFigure 12.4 Computation of the loop gain by (a) breaking the loop and (b) applying a test signal.\nThe resulting topology can be seen as a system with input $M$ and output $N$. As shown in Fig. 12.4(b), applying a test signal at $M$ and tracing it through the feedback network, subtractor, and forward system yields the signal at $N$. The input to $A_{1}$ equals $-K V_{\\text {test }}$, resulting in\n\n$$\n\\begin{equation*}\nV_{N}=-K V_{\\text {test }} A_{1} \\tag{12.7}\n\\end{equation*}\n$$\n\nand thus\n\n$$\n\\begin{equation*}\nK A_{1}=-\\frac{V_{N}}{V_{\\text {test }}} \\tag{12.8}\n\\end{equation*}\n$$\n\nIn essence, a signal \"circling the loop\" experiences a gain of $-K A_{1}$, hence the term \"loop gain.\" It's crucial not to confuse the closed-loop gain, $A_{1} /\\left(1+K A_{1}\\right)$, with the loop gain, $K A_{1}$.\n\n[^12]Example: Calculate the loop gain of the feedback system in Fig. 12.1 by breaking the loop at the 12.3 input of $A_{1}$.\n\nSolution: Fig. 12.5 illustrates the system with the test signal applied to $A_{1}$'s input. The feedback network's output equals $K A_{1} V_{\\text {test }}$, leading to\n\n$$\n\\begin{equation*}\nV_{N}=-K A_{1} V_{\\text {test }} \\tag{12.9}\n\\end{equation*}\n$$\n\nand the same result as Eq. (12.8).\n\nimage_name:Figure 12.5\ndescription:Figure 12.5's block diagram represents a feedback control system with several key components and signal paths.\n\n1. **Main Components:**\n- **Subtractor:** Located at the diagram's start, it takes two inputs (one from ground and one from the feedback path) and outputs their difference, labeled \\( V_N \\).\n- **Amplifier \\( A_1 \\)**: Positioned after the test voltage source \\( V_{\\text{test}} \\), it amplifies the received input signal.\n- **Feedback Gain Block \\( K \\)**: This block applies feedback gain to the output signal, connected in the feedback loop to control system response.\n- **Test Voltage Source \\( V_{\\text{test}} \\)**: Used to apply a test signal at point \\( M \\).\n\n2. **Information or Control Flow:**\n- The system begins at the subtractor, calculating the input and feedback signal difference to produce \\( V_N \\).\n- \\( V_N \\) is fed into the feedback path, passing through the gain block \\( K \\) for scaling.\n- After \\( K \\), the signal moves to the test voltage source \\( V_{\\text{test}} \\) at point \\( M \\), combining with the test signal.\n- This combined signal enters amplifier \\( A_1 \\) for amplification.\n- The amplified output is directed to output \\( Y \\), completing the signal path.\n- Output \\( Y \\) is also fed back to the subtractor, forming a closed feedback loop.\n\n3. **Labels, Annotations, and Key Indicators:**\n- Labels include \\( V_N \\), \\( V_{\\text{test}} \\), \\( A_1 \\), \\( K \\), and \\( Y \\) to indicate signals and components.\n- Ground symbols denote voltage level reference points.\n\n4. **Overall System Function:**\n- The system demonstrates a feedback control mechanism, where output feedback to the input maintains system control. Breaking the loop at the subtractor's input allows for feedback effect analysis on overall system performance. The test voltage \\( V_{\\text{test}} \\) probes the system's response to calculate the loop gain.\n\nFigure 12.5\nExercise: Compute the loop gain by breaking the loop at the subtractor's input.\n\nOne might wonder about potential ambiguity in the signal flow direction during the loop gain test. For instance, can we alter Fig. 12.4(b)'s topology as shown in Fig. 12.6? This would involve applying $V_{\\text {test }}$ to $A_{1}$'s output and expecting a signal at its input and eventually at $N$. While this might yield a finite value, it doesn't reflect the circuit's actual behavior. In a feedback system, the signal flows from $A_{1}$'s input to its output and from the feedback network's input to its output.\n\nDid you know?\n\nNegative feedback is widespread in nature. Entering a bright room prompts your brain to shrink your pupils. After listening to loud music for hours, you may experience temporary hearing loss as your ear adjusts your hearing threshold. Attempting to write with closed eyes results in poor handwriting because the feedback loop monitoring your pen strokes is disrupted.\n\nimage_name:Figure 12.6 Incorrect method of applying test signal.\ndescription:The diagram labeled 'Figure 12.6 Incorrect method of applying test signal' shows a feedback system with several key components and signal paths.\n\n1. **Main Components:**\n- **Summing Junction (+):** Combines input signal 'X' and feedback signal, outputting their difference.\n- **Amplifier (A1):** Receives the summing junction's output, amplifying it with a gain indicated as 'In(A1)'.\n- **Feedback Path:** After amplification, the signal is fed back to the summing junction, crucial for system control.\n- **Test Voltage Source (Vtest):** Incorrectly placed at the amplifier's output, introducing a test voltage 'Vtest' connected to ground (GND).\n- **Feedback Amplifier (K):** Part of the feedback loop, receiving amplifier 'A1''s output and feeding back a portion to the summing junction with gain 'K'.\n- **Output (Out(K)):** The feedback amplifier 'K''s output, labeled 'Out(k)', fed back to the summing junction.\n\n2. **Information or Control Flow:**\n- Input signal 'X' enters the summing junction, combined with the feedback signal, and the difference is sent to amplifier 'A1'.\n- The amplified signal splits, one path leading to the test voltage source 'Vtest' and the other to the feedback amplifier 'K'.\n- The feedback amplifier processes the signal and sends it back to the summing junction, completing the feedback loop.\n\n3. **Labels, Annotations, and Key Indicators:**\n- 'In(A1)' indicates amplifier 'A1''s input.\n- 'Vtest' is the test voltage incorrectly applied at the output.\n- 'Out(k)' is the feedback amplifier 'K''s output.\n- 'VN' is a reference voltage connected to ground, labeled at the feedback amplifier.\n\n4. **Overall System Function:**\n- The system aims to control output through negative feedback. However, the test voltage 'Vtest''s placement at the amplifier's output is incorrect, disrupting the intended feedback loop. The system seeks to stabilize gain despite amplifier 'A1' variations, but the incorrect test signal application may lead to inaccurate results or instability.\n\nFigure 12.6 Incorrect method of applying test signal."
},
{
    "text": "In Fig. 12.1, the quantity $K A_{1}$, which equals the product of the forward system's gain and the feedback factor, influences numerous properties of the entire system. Referred to as the \"loop gain,\" $K A_{1}$ has a notable interpretation. By setting the input $X$ to zero and \"breaking\" the loop at any point, such as shown in Fig. 12.4(a), we can analyze this.\n\nimage_name:Fig. 12.4 (a)\ndescription:The block diagram labeled (a) illustrates a feedback control system comprising the following elements:\n\n1. **Main Components:**\n- **Summing Junction:** Represented by a circle with plus and minus signs, it functions as a subtractor. It accepts two inputs—one from the ground (GND) and another from the feedback path—and outputs their difference.\n- **Amplifier A1:** This block signifies the forward gain of the system, amplifying the output from the summing junction.\n- **Feedback Path with Gain K:** The output of amplifier A1 is routed back through a block marked \"K,\" indicating the feedback gain.\n\n2. **Information or Control Flow:**\n- The system input is set to zero (grounded), and the control loop is interrupted at point M.\n- The output from amplifier A1 is directed to point N and simultaneously fed back through the feedback path.\n- The feedback path, including the gain block \"K,\" sends the signal back to the summing junction, creating a feedback loop that affects the input to amplifier A1.\n\n3. **Labels, Annotations, and Key Indicators:**\n- Points M and N are marked as key reference points for system analysis.\n- The feedback loop is indicated by the path from N through K back to the summing junction.\n- The input to amplifier A1 is labeled \"In(A1),\" and the output is labeled \"Out(K).\"\n\n4. **Overall System Function:**\n- The system's primary role is to model a feedback control loop, a common configuration in control systems to stabilize or control system behavior. Breaking the loop at M allows for loop gain analysis, helping to understand how feedback impacts overall system performance.\n\nimage_name:Fig. 12.4(b)\ndescription:The block diagram labeled \"(b)\" depicts a feedback loop used to calculate the loop gain in a control system. It includes the following main components:\n\n1. **Summing Junction:** Shown as a circle with plus and minus signs, it combines input signals by subtracting the feedback signal from the test signal \\( V_{\\text{test}} \\). The result is fed into amplifier \\( A_1 \\).\n\n2. **Amplifier \\( A_1 \\)**: This block represents the forward gain stage, amplifying the input from the summing junction. The output is labeled \\( V_N \\), indicating the node where the feedback loop is observed.\n\n3. **Feedback Path:** The output \\( V_N \\) is fed back through a feedback network with gain \\( K \\), crucial for determining the loop gain. The feedback signal is subtracted from the test signal at the summing junction.\n\n4. **Test Signal Source:** \\( V_{\\text{test}} \\) is applied as an input to evaluate the loop gain, represented by a voltage source connected to the feedback network input.\n\n**Information Flow:**\n- The test signal \\( V_{\\text{test}} \\) is introduced at the summing junction.\n- The summing junction subtracts the feedback signal (amplified by \\( K \\)) from \\( V_{\\text{test}} \\), passing the result to amplifier \\( A_1 \\).\n- The output from \\( A_1 \\), labeled \\( V_N \\), is then fed back through the feedback network with gain \\( K \\) to complete the loop.\n\n**Labels and Annotations:**\n- The diagram includes labels such as \\( V_N \\), \\( V_{\\text{test}} \\), and \\( GND \\) for ground connections.\n- The feedback path is marked with gain \\( K \\), highlighting its role in the feedback loop.\n\n**Overall System Function:**\nThe system's main function is to determine the loop gain by introducing a test signal and observing the feedback loop's behavior. The arrangement of the summing junction, amplifier, and feedback path facilitates analyzing the system's response to loop changes, crucial for understanding stability and performance. The loop gain is a key parameter for assessing the system's ability to maintain desired performance despite disturbances or input changes.\n\nFigure 12.4 illustrates the computation of the loop gain by (a) breaking the loop and (b) applying a test signal.\nThe resulting configuration can be viewed as a system with input $M$ and output $N$. As shown in Fig. 12.4(b), applying a test signal at $M$ and tracing it through the feedback network, subtractor, and forward system yields the signal at $N$. The input to $A_{1}$ equals $-K V_{\\text {test }}$, resulting in\n\n$$\n\\begin{equation*}\nV_{N}=-K V_{\\text {test }} A_{1} \\tag{12.7}\n\\end{equation*}\n$$\n\nand thus\n\n$$\n\\begin{equation*}\nK A_{1}=-\\frac{V_{N}}{V_{\\text {test }}} \\tag{12.8}\n\\end{equation*}\n$$\n\nIn essence, a signal \"circling the loop\" experiences a gain of $-K A_{1}$, hence the term \"loop gain.\" It's crucial not to confuse the closed-loop gain, $A_{1} /\\left(1+K A_{1}\\right)$, with the loop gain, $K A_{1}$.\n\n[^12]Example: Calculate the loop gain of the feedback system in Fig. 12.1 by breaking the loop at the input of $A_{1}$.\n\nSolution: Fig. 12.5 shows the system with the test signal applied to $A_{1}$'s input. The feedback network's output equals $K A_{1} V_{\\text {test }}$, leading to\n\n$$\n\\begin{equation*}\nV_{N}=-K A_{1} V_{\\text {test }} \\tag{12.9}\n\\end{equation*}\n$$\n\nand the same result as Eq. (12.8).\n\nimage_name:Figure 12.5\ndescription:Figure 12.5's block diagram represents a feedback control system with several key components and signal paths.\n\n1. **Main Components:**\n- **Subtractor:** Located at the diagram's start, it takes two inputs (one from the ground and one from the feedback path) and outputs their difference, labeled \\( V_N \\).\n- **Amplifier \\( A_1 \\)**: Positioned after the test voltage source \\( V_{\\text{test}} \\), this block amplifies its input signal.\n- **Feedback Gain Block \\( K \\)**: This block applies feedback gain to the output signal, connected in the feedback loop to control system response.\n- **Test Voltage Source \\( V_{\\text{test}} \\)**: Used to apply a test signal at point \\( M \\).\n\n2. **Information or Control Flow:**\n- The system begins at the subtractor, calculating the difference between the input and feedback signals to produce \\( V_N \\).\n- \\( V_N \\) is fed into the feedback path, passing through the gain block \\( K \\) for scaling.\n- After \\( K \\), the signal moves to the test voltage source \\( V_{\\text{test}} \\) at point \\( M \\), combining with the test signal.\n- This combined signal enters amplifier \\( A_1 \\) for amplification.\n- The amplified output is directed to the output \\( Y \\), completing the signal path.\n- The output \\( Y \\) is also fed back to the subtractor, forming a closed feedback loop.\n\n3. **Labels, Annotations, and Key Indicators:**\n- Labels include \\( V_N \\), \\( V_{\\text{test}} \\), \\( A_1 \\), \\( K \\), and \\( Y \\) to indicate signals and components.\n- Ground symbols denote voltage reference points.\n\n4. **Overall System Function:**\n- The system's primary function is to demonstrate a feedback control mechanism, where output feedback controls system behavior. Breaking the loop at the subtractor's input allows for feedback effect analysis on overall system performance. The test voltage \\( V_{\\text{test}} \\) probes the system's response to calculate the loop gain.\n\nFigure 12.5\nExercise: Compute the loop gain by breaking the loop at the subtractor's input.\n\nReaders might question the ambiguity in signal flow direction during loop gain testing. For instance, can we alter Fig. 12.4(b)'s topology as shown in Fig. 12.6? This would involve applying $V_{\\text {test }}$ to $A_{1}$'s output and expecting a signal at its input and eventually at $N$. While this might yield a finite value, it doesn't reflect the circuit's actual behavior. In a feedback system, signal flow is from $A_{1}$'s input to its output and from the feedback network's input to its output.\n\nDid you know?\n\nNegative feedback is widespread in nature. Entering a bright room causes your pupils to constrict. After hours of loud music, your hearing adjusts, making you temporarily hard of hearing. Writing with closed eyes results in poor handwriting because the feedback loop monitoring pen strokes is disrupted.\n\nimage_name:Figure 12.6 Incorrect method of applying test signal.\ndescription:The diagram labeled 'Figure 12.6 Incorrect method of applying test signal' shows a feedback system with several key components and signal paths.\n\n1. **Main Components:**\n- **Summing Junction (+):** Combines the input signal 'X' and the feedback signal, outputting their difference.\n- **Amplifier (A1):** Receives the summing junction's output, amplifying it with a gain indicated as 'In(A1)'.\n- **Feedback Path:** The amplified signal is fed back to the summing junction, essential for system control.\n- **Test Voltage Source (Vtest):** Incorrectly placed at the amplifier's output, introducing a test voltage 'Vtest' connected to ground (GND).\n- **Feedback Amplifier (K):** Part of the feedback loop, receiving the amplifier's output and feeding back a portion to the summing junction with gain 'K'.\n- **Output (Out(K)):** The feedback amplifier's output, labeled 'Out(k)', is fed back to the summing junction.\n\n2. **Information or Control Flow:**\n- The input signal 'X' enters the summing junction, combined with the feedback signal, and the difference is sent to amplifier 'A1'.\n- The amplified signal splits, with one path leading to the test voltage source 'Vtest' and the other to the feedback amplifier 'K'.\n- The feedback amplifier processes the signal and sends it back to the summing junction, completing the feedback loop.\n\n3. **Labels, Annotations, and Key Indicators:**\n- 'In(A1)' indicates the amplifier's input.\n- 'Vtest' is the test voltage applied at the output, incorrectly placed.\n- 'Out(k)' is the feedback amplifier's output.\n- 'VN' is a reference voltage connected to ground, labeled at the feedback amplifier.\n\n4. **Overall System Function:**\n- The system aims to control output through negative feedback. However, placing the test voltage 'Vtest' at the amplifier's output is incorrect, disrupting the intended feedback loop. The system is designed to stabilize gain despite amplifier 'A1' variations, but the incorrect test signal application may lead to inaccurate results or instability.\n\nFigure 12.6 Incorrect method of applying test signal."
},
{
    "text": "In Fig. 12.1, the quantity $K A_{1}$, which equals the product of the forward system's gain and the feedback factor, influences numerous properties of the entire system. Referred to as the \"loop gain,\" $K A_{1}$ has a noteworthy interpretation. Suppose we set the input $X$ to zero and \"break\" the loop at any point, as illustrated in Fig. 12.4(a).\n\nimage_name:Fig. 12.4 (a)\ndescription:The block diagram labeled (a) depicts a feedback control system comprising the following elements:\n\n1. **Main Components:**\n- **Summing Junction:** Represented by a circle with plus and minus signs, this acts as a subtractor. It receives two inputs—one from the ground (GND) and another from the feedback path—and outputs their difference.\n- **Amplifier A1:** This block signifies the forward gain of the system, amplifying the output from the summing junction.\n- **Feedback Path with Gain K:** The output of amplifier A1 is routed back through a block marked \"K,\" indicating the feedback gain.\n\n2. **Information or Control Flow:**\n- The system's input is set to zero (grounded), and the control loop is interrupted at point M.\n- The output from amplifier A1 is directed to point N and simultaneously fed back through the feedback path.\n- The feedback path, incorporating gain block \"K,\" sends the signal back to the summing junction, creating a feedback loop that affects the input to amplifier A1.\n\n3. **Labels, Annotations, and Key Indicators:**\n- Points M and N are designated as key reference points for system analysis.\n- The feedback loop is indicated by the path from N through K back to the summing junction.\n- The input to amplifier A1 is labeled \"In(A1),\" and the output is labeled \"Out(K).\"\n\n4. **Overall System Function:**\n- This system primarily models a feedback control loop, a common setup in control systems to stabilize or control system behavior. Breaking the loop at M allows for the analysis of loop gain and understanding of how feedback impacts overall system performance.\n\nimage_name:Fig. 12.4(b)\ndescription:The block diagram labeled \"(b)\" illustrates a feedback loop used to calculate the loop gain in a control system. It includes the following main components:\n\n1. **Summing Junction:** Depicted as a circle with plus and minus signs, it combines input signals by subtracting the feedback signal from the test signal \\( V_{\\text{test}} \\). The result is fed into amplifier \\( A_1 \\).\n\n2. **Amplifier \\( A_1 \\)**: This block represents the forward gain stage, amplifying the input from the summing junction. The output of \\( A_1 \\) is labeled \\( V_N \\), indicating the node where the feedback loop is observed.\n\n3. **Feedback Path:** The output \\( V_N \\) is fed back through a feedback network with gain \\( K \\), crucial for determining the loop gain. The feedback signal is subtracted from the test signal at the summing junction.\n\n4. **Test Signal Source:** \\( V_{\\text{test}} \\) is applied as an input to evaluate the loop gain, represented by a voltage source connected to the feedback network's input.\n\n**Information Flow:**\n- The test signal \\( V_{\\text{test}} \\) is introduced at the summing junction.\n- The summing junction subtracts the feedback signal (amplified by \\( K \\)) from \\( V_{\\text{test}} \\), passing the resultant signal to amplifier \\( A_1 \\).\n- The output from \\( A_1 \\), labeled \\( V_N \\), is then fed back through the feedback network with gain \\( K \\) to complete the loop.\n\n**Labels and Annotations:**\n- The diagram includes labels such as \\( V_N \\), \\( V_{\\text{test}} \\), and \\( GND \\) for ground connections.\n- The feedback path is marked with gain \\( K \\), highlighting its role in the feedback loop.\n\n**Overall System Function:**\nThe system's main function is to determine the loop gain by introducing a test signal and observing the feedback loop's behavior. The arrangement of the summing junction, amplifier, and feedback path facilitates the analysis of the system's response to loop changes, essential for understanding stability and performance. The loop gain is a critical parameter for assessing the system's ability to maintain desired performance amid disturbances or input changes.\n\nFigure 12.4 Computation of the loop gain by (a) breaking the loop and (b) applying a test signal.\nThe resulting configuration can be viewed as a system with input $M$ and output $N$. As shown in Fig. 12.4(b), applying a test signal at $M$ and tracing it through the feedback network, subtractor, and forward system yields the signal at $N$. The input to $A_{1}$ equals $-K V_{\\text {test }}$, resulting in\n\n$$\n\\begin{equation*}\nV_{N}=-K V_{\\text {test }} A_{1} \\tag{12.7}\n\\end{equation*}\n$$\n\nand thus\n\n$$\n\\begin{equation*}\nK A_{1}=-\\frac{V_{N}}{V_{\\text {test }}} \\tag{12.8}\n\\end{equation*}\n$$\n\nIn essence, a signal \"circling the loop\" experiences a gain of $-K A_{1}$, hence the term \"loop gain.\" It is crucial not to confuse the closed-loop gain, $A_{1} /\\left(1+K A_{1}\\right)$, with the loop gain, $K A_{1}$.\n\n[^12]Example Calculate the loop gain of the feedback system in Fig. 12.1 by breaking the loop at the 12.3 input of $A_{1}$.\n\nSolution Fig. 12.5 illustrates the system with the test signal applied to the input of $A_{1}$. The feedback network's output equals $K A_{1} V_{\\text {test }}$, leading to\n\n$$\n\\begin{equation*}\nV_{N}=-K A_{1} V_{\\text {test }} \\tag{12.9}\n\\end{equation*}\n$$\n\nand the same result as Eq. (12.8).\n\nimage_name:Figure 12.5\ndescription:Figure 12.5's block diagram represents a feedback control system with several key components and signal paths.\n\n1. **Main Components:**\n- **Subtractor:** Located at the diagram's start, it takes two inputs (one from the ground and another from the feedback path) and outputs their difference, labeled \\( V_N \\).\n- **Amplifier \\( A_1 \\)**: Positioned after the test voltage source \\( V_{\\text{test}} \\), this block amplifies the input signal.\n- **Feedback Gain Block \\( K \\)**: This block applies feedback gain to the output signal, connected in the feedback loop to control system response.\n- **Test Voltage Source \\( V_{\\text{test}} \\)**: Used to apply a test signal to the system at point \\( M \\).\n\n2. **Information or Control Flow:**\n- The system begins at the subtractor, which computes the difference between the input and feedback signals, producing \\( V_N \\).\n- \\( V_N \\) is then fed into the feedback path, passing through the gain block \\( K \\), which scales the signal.\n- After \\( K \\), the signal moves to the test voltage source \\( V_{\\text{test}} \\) at point \\( M \\), combining with the test signal.\n- This combined signal is fed into amplifier \\( A_1 \\), which amplifies it.\n- The amplified output is directed to the output \\( Y \\), completing the signal path.\n- The output \\( Y \\) is also fed back to the subtractor, forming a closed feedback loop.\n\n3. **Labels, Annotations, and Key Indicators:**\n- Labels such as \\( V_N \\), \\( V_{\\text{test}} \\), \\( A_1 \\), \\( K \\), and \\( Y \\) indicate various signals and components.\n- Ground symbols denote reference points for voltage levels.\n\n4. **Overall System Function:**\n- The system demonstrates a feedback control mechanism, where the output is fed back to the input to maintain control over behavior. Breaking the loop at the subtractor's input allows for feedback effect analysis on overall system performance. The test voltage \\( V_{\\text{test}} \\) probes the system's response and calculates the loop gain.\n\nFigure 12.5\nExercise Calculate the loop gain by breaking the loop at the subtractor's input.\n\nReaders might question the ambiguity in signal flow direction during the loop gain test. For instance, can we alter Fig. 12.4(b)'s topology as shown in Fig. 12.6? This would involve applying $V_{\\text {test }}$ to $A_{1}$'s output and expecting a signal at its input and eventually at $N$. While this might yield a finite value, it does not reflect the circuit's actual behavior. In a feedback system, the signal flows from $A_{1}$'s input to its output and from the feedback network's input to its output.\n\nDid you know?\n\nNegative feedback is prevalent in nature. Entering a bright room triggers your brain to constrict your pupils. Listening to loud music for hours results in temporary hearing impairment as your ear adjusts the hearing threshold. Writing with closed eyes yields poor handwriting because the feedback loop monitoring pen strokes is disrupted.\n\nimage_name:Figure 12.6 Incorrect method of applying test signal.\ndescription:The diagram labeled 'Figure 12.6 Incorrect method of applying test signal' shows a feedback system with several key components and signal paths.\n\n1. **Main Components:**\n- **Summing Junction (+):** Combines the input signal 'X' and the feedback signal, outputting their difference.\n- **Amplifier (A1):** Receives the summing junction's output, amplifying the signal with a gain indicated as 'In(A1)'.\n- **Feedback Path:** The amplified signal is fed back to the summing junction, essential for system control.\n- **Test Voltage Source (Vtest):** Incorrectly placed at the amplifier's output, introducing a test voltage 'Vtest' into the circuit.\n- **Feedback Amplifier (K):** Part of the feedback loop, receiving the amplifier's output and feeding back a portion to the summing junction with gain 'K'.\n- **Output (Out(K)):** The feedback amplifier's output, labeled 'Out(k)', is fed back to the summing junction.\n\n2. **Information or Control Flow:**\n- The input signal 'X' enters the summing junction, combined with the feedback signal, and the difference is sent to amplifier 'A1'.\n- The amplified signal splits, with one path leading to the test voltage source 'Vtest' and the other to the feedback amplifier 'K'.\n- The feedback amplifier processes the signal and sends it back to the summing junction, completing the feedback loop.\n\n3. **Labels, Annotations, and Key Indicators:**\n- 'In(A1)' indicates the amplifier's input.\n- 'Vtest' is the incorrectly placed test voltage.\n- 'Out(k)' is the feedback amplifier's output.\n- 'VN' is a reference voltage connected to ground, labeled at the feedback amplifier.\n\n4. **Overall System Function:**\n- The system aims to control the output through negative feedback. However, placing the test voltage 'Vtest' at the amplifier's output is incorrect, disrupting the intended feedback loop. The system intends to stabilize gain despite variations in amplifier 'A1', but the incorrect test signal placement may lead to inaccurate results or instability.\n\nFigure 12.6 Incorrect method of applying test signal."
},
{
    "text": "In Fig. 12.1, the quantity $K A_{1}$, which equals the product of the forward system's gain and the feedback factor, influences numerous properties of the entire system. Referred to as the \"loop gain,\" $K A_{1}$ has a notable interpretation. Suppose we set the input $X$ to zero and \"break\" the loop at any point, such as illustrated in Fig. 12.4(a).\n\nimage_name:Fig. 12.4 (a)\ndescription:The block diagram labeled (a) illustrates a feedback control system comprising the following elements:\n\n1. **Main Components:**\n- **Summing Junction:** Represented by a circle with plus and minus signs, it functions as a subtractor. It accepts two inputs—one from the ground (GND) and another from the feedback path—and outputs their difference.\n- **Amplifier A1:** This block denotes the forward gain of the system, amplifying the output from the summing junction.\n- **Feedback Path with Gain K:** The output of amplifier A1 is routed back through a block marked \"K,\" indicating the feedback gain.\n\n2. **Information or Control Flow:**\n- The system's input is set to zero (grounded), and the control loop is interrupted at point M.\n- The output from amplifier A1 is directed to point N and simultaneously fed back through the feedback path.\n- The feedback path, which includes the gain block \"K,\" sends the signal back to the summing junction, forming a feedback loop that affects the input to amplifier A1.\n\n3. **Labels, Annotations, and Key Indicators:**\n- Points M and N are designated as key reference points for system analysis.\n- The feedback loop is indicated by the path from N through K back to the summing junction.\n- The input to amplifier A1 is labeled \"In(A1),\" and the output is labeled \"Out(K).\"\n\n4. **Overall System Function:**\n- This system primarily models a feedback control loop, a common configuration in control systems designed to stabilize or control system behavior. By breaking the loop at M, one can analyze the loop gain and understand the impact of feedback on overall system performance.\n\nimage_name:Fig. 12.4(b)\ndescription:The block diagram labeled \"(b)\" depicts a feedback loop used to calculate the loop gain in a control system. It includes the following main components:\n\n1. **Summing Junction:** Shown as a circle with plus and minus signs, it combines input signals by subtracting the feedback signal from the test signal \\( V_{\\text{test}} \\). The result is fed into amplifier \\( A_1 \\).\n\n2. **Amplifier \\( A_1 \\)**: This block represents the forward gain stage, amplifying the input received from the summing junction. The output of \\( A_1 \\) is labeled \\( V_N \\), indicating the node where the feedback loop is observed.\n\n3. **Feedback Path:** The output \\( V_N \\) is fed back through a feedback network characterized by gain \\( K \\). This path is crucial for determining the loop gain. The feedback signal is subtracted from the test signal at the summing junction.\n\n4. **Test Signal Source:** \\( V_{\\text{test}} \\) is introduced as an input to evaluate the loop gain, represented by a voltage source connected to the feedback network's input.\n\n**Information Flow:**\n- The test signal \\( V_{\\text{test}} \\) is introduced at the summing junction.\n- The summing junction subtracts the feedback signal (amplified by \\( K \\)) from \\( V_{\\text{test}} \\), and the resulting signal is passed to amplifier \\( A_1 \\).\n- The output from \\( A_1 \\), labeled \\( V_N \\), is then fed back through the feedback network with gain \\( K \\) to complete the loop.\n\n**Labels and Annotations:**\n- The diagram includes labels such as \\( V_N \\), \\( V_{\\text{test}} \\), and \\( GND \\) for ground connections.\n- The feedback path is marked with gain \\( K \\), highlighting its role in the feedback loop.\n\n**Overall System Function:**\nThe primary function of this system is to determine the loop gain by introducing a test signal and observing the feedback loop's behavior. The arrangement of the summing junction, amplifier, and feedback path allows for analyzing the system's response to loop changes, which is essential for understanding stability and performance. The loop gain is a critical parameter for assessing the system's ability to maintain desired performance despite disturbances or input changes.\n\nFigure 12.4 Computation of the loop gain by (a) breaking the loop and (b) applying a test signal.\nThe resulting configuration can be viewed as a system with input $M$ and output $N$. As shown in Fig. 12.4(b), applying a test signal at $M$ and tracing it through the feedback network, subtractor, and forward system yields the signal at $N$. The input to $A_{1}$ equals $-K V_{\\text {test }}$, resulting in\n\n$$\n\\begin{equation*}\nV_{N}=-K V_{\\text {test }} A_{1} \\tag{12.7}\n\\end{equation*}\n$$\n\nand thus\n\n$$\n\\begin{equation*}\nK A_{1}=-\\frac{V_{N}}{V_{\\text {test }}} \\tag{12.8}\n\\end{equation*}\n$$\n\nIn essence, a signal \"circling the loop\" experiences a gain of $-K A_{1}$, hence the term \"loop gain.\" It is crucial not to confuse the closed-loop gain, $A_{1} /\\left(1+K A_{1}\\right)$, with the loop gain, $K A_{1}$.\n\n[^12]Example Calculate the loop gain of the feedback system in Fig. 12.1 by breaking the loop at the input of $A_{1}$.\n\nSolution Fig. 12.5 illustrates the system with the test signal applied to the input of $A_{1}$. The output of the feedback network equals $K A_{1} V_{\\text {test }}$, resulting in\n\n$$\n\\begin{equation*}\nV_{N}=-K A_{1} V_{\\text {test }} \\tag{12.9}\n\\end{equation*}\n$$\n\nand the same outcome as Eq. (12.8).\n\nimage_name:Figure 12.5\ndescription:Figure 12.5's block diagram represents a feedback control system with several key components and signal paths.\n\n1. **Main Components:**\n- **Subtractor:** Located at the diagram's start, it takes two inputs—one from the ground and another from the feedback path—and outputs their difference, labeled \\( V_N \\).\n- **Amplifier \\( A_1 \\)**: Positioned after the test voltage source \\( V_{\\text{test}} \\), this block amplifies the received input signal.\n- **Feedback Gain Block \\( K \\)**: This block applies feedback gain to the output signal, connected in the feedback loop to control system response.\n- **Test Voltage Source \\( V_{\\text{test}} \\)**: Used to apply a test signal to the system at point \\( M \\).\n\n2. **Information or Control Flow:**\n- The process begins at the subtractor, which computes the difference between the input and feedback signals, producing \\( V_N \\).\n- \\( V_N \\) is then fed into the feedback path, passing through the gain block \\( K \\) for scaling.\n- After \\( K \\), the signal moves to the test voltage source \\( V_{\\text{test}} \\) at point \\( M \\), combining with the test signal.\n- This combined signal is input to amplifier \\( A_1 \\) for amplification.\n- The amplified output is directed to the output \\( Y \\), completing the signal path.\n- The output \\( Y \\) is also fed back to the subtractor, forming a closed feedback loop.\n\n3. **Labels, Annotations, and Key Indicators:**\n- Labels such as \\( V_N \\), \\( V_{\\text{test}} \\), \\( A_1 \\), \\( K \\), and \\( Y \\) indicate various signals and components.\n- Ground symbols denote reference points for voltage levels.\n\n4. **Overall System Function:**\n- This system demonstrates a feedback control mechanism where the output is fed back to the input to maintain control over behavior. The loop gain is analyzed by breaking the loop at the subtractor's input, allowing for feedback effect calculation on overall system performance. The test voltage \\( V_{\\text{test}} \\) probes the system's response and aids in loop gain calculation.\n\nFigure 12.5\nExercise Calculate the loop gain by breaking the loop at the input of the subtractor.\n\nOne might question the ambiguity regarding signal flow direction in the loop gain test. For instance, can we alter the topology of Fig. 12.4(b) as shown in Fig. 12.6? This would involve applying $V_{\\text {test }}$ to the output of $A_{1}$ and expecting a signal at its input and eventually at $N$. While this might yield a finite value, it does not reflect the circuit's actual behavior. In a feedback system, the signal flows from $A_{1}$'s input to its output and from the feedback network's input to its output.\n\nDid you know?\n\nNegative feedback is a prevalent natural phenomenon. Entering a bright room triggers your brain to缩小 your pupils. After listening to loud music for hours, you experience temporary hearing loss as your ear adjusts the hearing threshold in response. Attempting to write with closed eyes results in poor handwriting because the feedback loop monitoring pen strokes is disrupted.\n\nimage_name:Figure 12.6 Incorrect method of applying test signal.\ndescription:The diagram labeled 'Figure 12.6 Incorrect method of applying test signal' shows a feedback system with several key components and signal paths.\n\n1. **Main Components:**\n- **Summing Junction (+):** Combines the input signal 'X' and the feedback signal, outputting their difference.\n- **Amplifier (A1):** Receives the summing junction's output and amplifies it, indicated as 'In(A1)'.\n- **Feedback Path:** The amplified signal is fed back to the summing junction, essential for system control.\n- **Test Voltage Source (Vtest):** Incorrectly placed at the amplifier's output, introducing a test voltage 'Vtest' into the circuit.\n- **Feedback Amplifier (K):** Part of the feedback loop, receiving the amplifier's output and feeding back a portion to the summing junction with gain 'K'.\n- **Output (Out(K)):** The feedback amplifier's output, labeled 'Out(k)', fed back to the summing junction.\n\n2. **Information or Control Flow:**\n- The input signal 'X' enters the summing junction, combined with the feedback signal, and the difference is sent to amplifier 'A1'.\n- The amplified signal splits, with one path leading to the test voltage source 'Vtest' and the other to the feedback amplifier 'K'.\n- The feedback amplifier processes the signal and sends it back to the summing junction, completing the feedback loop.\n\n3. **Labels, Annotations, and Key Indicators:**\n- 'In(A1)' indicates the amplifier's input.\n- 'Vtest' is the test voltage applied at the output, incorrectly placed.\n- 'Out(k)' is the feedback amplifier's output.\n- 'VN' is a reference voltage connected to ground, labeled at the feedback amplifier.\n\n4. **Overall System Function:**\n- This system aims to control the output through negative feedback. However, the test voltage 'Vtest' placement at the amplifier's output is incorrect, disrupting the intended feedback loop. The system aims to stabilize gain despite amplifier 'A1' variations, but the incorrect test signal application may lead to inaccurate results or instability.\n\nFigure 12.6 Incorrect method of applying test signal."
},
{
    "text": "In Fig. 12.1, the quantity $K A_{1}$, representing the product of the forward system's gain and the feedback factor, significantly influences various properties of the entire system. Known as the \"loop gain,\" $K A_{1}$ has an intriguing interpretation. Suppose we set the input $X$ to zero and \"break\" the loop at any arbitrary point, as illustrated in Fig. 12.4(a).\n\nimage_name:Fig. 12.4 (a)\ndescription:The block diagram labeled (a) depicts a feedback control system comprising the following elements:\n\n1. **Main Components:**\n- **Summing Junction:** Represented by a circle with plus and minus signs, it functions as a subtractor, taking inputs from the ground (GND) and the feedback path, and producing their difference as output.\n- **Amplifier A1:** This block signifies the system's forward gain, receiving input from the summing junction and amplifying it.\n- **Feedback Path with Gain K:** The output from amplifier A1 is routed back through a block marked \"K,\" indicating the feedback gain.\n\n2. **Information or Control Flow:**\n- The system's input is set to zero (grounded), and the control loop is interrupted at point M.\n- The output from amplifier A1 is directed to point N, while also being fed back through the feedback path.\n- The feedback path, incorporating the gain block \"K,\" sends the signal back to the summing junction, creating a feedback loop that affects the input to amplifier A1.\n\n3. **Labels, Annotations, and Key Indicators:**\n- Points M and N are designated as key reference points for system analysis.\n- The feedback loop is highlighted by the path from N through K back to the summing junction.\n- The input to amplifier A1 is labeled \"In(A1),\" and the output is labeled \"Out(K).\"\n\n4. **Overall System Function:**\n- The system primarily models a feedback control loop, a standard configuration in control systems to stabilize or control system behavior. Breaking the loop at M allows for loop gain analysis, revealing how feedback impacts overall system performance.\n\nimage_name:Fig. 12.4(b)\ndescription:The block diagram labeled \"(b)\" illustrates a feedback loop used to calculate the loop gain in a control system, featuring the following main components:\n\n1. **Summing Junction:** Depicted as a circle with plus and minus signs, it merges input signals by subtracting the feedback signal from the test signal \\( V_{\\text{test}} \\). The output is then fed into amplifier \\( A_1 \\).\n\n2. **Amplifier \\( A_1 \\)**: This block represents the forward gain stage, amplifying the input received from the summing junction. The output of \\( A_1 \\) is labeled \\( V_N \\), denoting the node where the feedback loop is observed.\n\n3. **Feedback Path:** The output \\( V_N \\) is fed back through a feedback network characterized by gain \\( K \\), crucial for determining the loop gain. This feedback signal is subtracted from the test signal at the summing junction.\n\n4. **Test Signal Source:** \\( V_{\\text{test}} \\) is introduced as an input to evaluate the loop gain, represented by a voltage source connected to the feedback network's input.\n\n**Information Flow:**\n- The test signal \\( V_{\\text{test}} \\) is introduced at the summing junction.\n- The summing junction subtracts the feedback signal (amplified by \\( K \\)) from \\( V_{\\text{test}} \\), passing the resultant signal to amplifier \\( A_1 \\).\n- The output from \\( A_1 \\), labeled \\( V_N \\), is then fed back through the feedback network with gain \\( K \\), completing the loop.\n\n**Labels and Annotations:**\n- The diagram includes labels such as \\( V_N \\), \\( V_{\\text{test}} \\), and \\( GND \\) for ground connections.\n- The feedback path is marked with gain \\( K \\), indicating its role in the feedback loop.\n\n**Overall System Function:**\nThe system's primary role is to determine the loop gain by introducing a test signal and observing the feedback loop's behavior. The arrangement of the summing junction, amplifier, and feedback path facilitates analysis of the system's response to loop changes, essential for understanding stability and performance. The loop gain is a critical parameter for assessing the system's ability to maintain desired performance despite disturbances or input changes.\n\nFigure 12.4 Computation of the loop gain by (a) breaking the loop and (b) applying a test signal.\nThe resulting topology can be viewed as a system with input $M$ and output $N$. As shown in Fig. 12.4(b), applying a test signal at $M$ and tracing it through the feedback network, subtractor, and forward system yields the signal at $N$. The input to $A_{1}$ equals $-K V_{\\text {test }}$, resulting in\n\n$$\n\\begin{equation*}\nV_{N}=-K V_{\\text {test }} A_{1} \\tag{12.7}\n\\end{equation*}\n$$\n\nand thus\n\n$$\n\\begin{equation*}\nK A_{1}=-\\frac{V_{N}}{V_{\\text {test }}} \\tag{12.8}\n\\end{equation*}\n$$\n\nIn essence, a signal traversing the loop experiences a gain of $-K A_{1}$, hence the term \"loop gain.\" It is crucial not to confuse the closed-loop gain, $A_{1} /\\left(1+K A_{1}\\right)$, with the loop gain, $K A_{1}$.\n\n[^12]Example Compute the loop gain of the feedback system in Fig. 12.1 by breaking the loop at the 12.3 input of $A_{1}$.\n\nSolution Fig. 12.5 illustrates the system with a test signal applied to the input of $A_{1}$. The feedback network's output equals $K A_{1} V_{\\text {test }}$, leading to\n\n$$\n\\begin{equation*}\nV_{N}=-K A_{1} V_{\\text {test }} \\tag{12.9}\n\\end{equation*}\n$$\n\nand the same result as Eq. (12.8).\n\nimage_name:Figure 12.5\ndescription:Figure 12.5's block diagram represents a feedback control system with several key components and signal paths.\n\n1. **Main Components:**\n- **Subtractor:** Located at the diagram's start, it takes two inputs (from the ground and feedback path) and outputs their difference, labeled \\( V_N \\).\n- **Amplifier \\( A_1 \\)**: Positioned after the test voltage source \\( V_{\\text{test}} \\), this block amplifies its input signal.\n- **Feedback Gain Block \\( K \\)**: This block applies feedback gain to the output signal, connected in the feedback loop to control system response.\n- **Test Voltage Source \\( V_{\\text{test}} \\)**: Used to apply a test signal at point \\( M \\).\n\n2. **Information or Control Flow:**\n- The system begins at the subtractor, calculating the input and feedback signal difference to produce \\( V_N \\).\n- \\( V_N \\) is then fed into the feedback path, passing through the gain block \\( K \\) for scaling.\n- After \\( K \\), the signal moves to the test voltage source \\( V_{\\text{test}} \\) at point \\( M \\), combining with the test signal.\n- This combined signal enters amplifier \\( A_1 \\) for amplification.\n- The amplified output is directed to the output \\( Y \\), completing the signal path.\n- The output \\( Y \\) is also fed back to the subtractor, forming a closed feedback loop.\n\n3. **Labels, Annotations, and Key Indicators:**\n- Labels such as \\( V_N \\), \\( V_{\\text{test}} \\), \\( A_1 \\), \\( K \\), and \\( Y \\) indicate various signals and components.\n- Ground symbols denote voltage level reference points.\n\n4. **Overall System Function:**\n- The system demonstrates a feedback control mechanism, where output feedback to the input maintains system control. Breaking the loop at the subtractor's input allows for feedback effect analysis on overall system performance. The test voltage \\( V_{\\text{test}} \\) probes the system's response to calculate the loop gain.\n\nFigure 12.5\nExercise Compute the loop gain by breaking the loop at the subtractor's input.\n\nOne might question the ambiguity in signal flow direction during the loop gain test. For instance, can the topology of Fig. 12.4(b) be modified as shown in Fig. 12.6? This would involve applying $V_{\\text {test }}$ to the output of $A_{1}$ and observing a signal at its input and eventually at $N$. While this might yield a finite value, it does not reflect the circuit's actual behavior. In a feedback system, signal flow is from $A_{1}$'s input to its output and from the feedback network's input to its output.\n\nDid you know?\n\nNegative feedback is widespread in nature. Entering a bright room prompts your brain to constrict your pupils. After listening to loud music for hours, you may experience temporary hearing loss as your ear adjusts its hearing threshold. Trying to write with your eyes closed results in poor handwriting because the feedback loop monitoring your pen strokes is disrupted.\n\nimage_name:Figure 12.6 Incorrect method of applying test signal.\ndescription:Figure 12.6, labeled 'Incorrect method of applying test signal,' shows a feedback system with several key components and signal paths.\n\n1. **Main Components:**\n- **Summing Junction (+):** Combines input signal 'X' and feedback signal, outputting their difference.\n- **Amplifier (A1):** Receives the summing junction's output, amplifying it with a gain indicated as 'In(A1)'.\n- **Feedback Path:** The amplified signal is fed back to the summing junction, crucial for system behavior control.\n- **Test Voltage Source (Vtest):** Incorrectly placed at the amplifier's output, introducing a test voltage 'Vtest' connected to ground (GND).\n- **Feedback Amplifier (K):** Part of the feedback loop, receiving the amplifier's output and feeding back a portion to the summing junction with gain 'K'.\n- **Output (Out(K)):** The feedback amplifier's output, labeled 'Out(k)', is fed back to the summing junction.\n\n2. **Information or Control Flow:**\n- The input signal 'X' enters the summing junction, combined with the feedback signal, and the difference is sent to amplifier 'A1'.\n- The amplified signal splits, with one path leading to the test voltage source 'Vtest' and the other to the feedback amplifier 'K'.\n- The feedback amplifier processes the signal and sends it back to the summing junction, completing the feedback loop.\n\n3. **Labels, Annotations, and Key Indicators:**\n- 'In(A1)' indicates the amplifier's input.\n- 'Vtest' is the test voltage applied at the output, incorrectly placed.\n- 'Out(k)' is the feedback amplifier's output.\n- 'VN' is a reference voltage connected to ground, labeled at the feedback amplifier.\n\n4. **Overall System Function:**\n- The system aims to control output through negative feedback. However, placing the test voltage 'Vtest' at the amplifier's output disrupts the intended feedback loop, potentially leading to inaccurate results or instability. The system's goal is to stabilize gain despite amplifier 'A1' variations, but the incorrect test signal application may compromise this objective.\n\nFigure 12.6 Incorrect method of applying test signal."
},
{
    "text": "Assume $A_{1}$ in Fig. 12.1 is an amplifier with poorly controlled gain. For instance, a CS stage offers a voltage gain of $g_{m} R_{D}$, where both $g_{m}$ and $R_{D}$ fluctuate with process and temperature, potentially causing the gain to vary by up to $\\pm 20 \\%$. Suppose we need a voltage gain of $4.00$. How can we achieve such precision? Equation (12.2) suggests a potential solution: if $K A_{1} \\gg 1$, we obtain\n\n$$\n\\begin{equation*}\n\\frac{Y}{X} \\approx \\frac{1}{K} \\tag{12.10}\n\\end{equation*}\n$$\n\na value不受$A_{1}$影响. From another angle, Eq. (12.4) shows that $K A_{1} \\gg 1$ results in a minimal error, making $X_{F}$ almost equal to $X$ and thus $Y$ nearly equal to $X / K$. Therefore, if $K$ can be precisely defined, $A_{1}$ has a negligible impact on $Y / X$, achieving high gain precision. The circuit in Fig. 12.2 effectively demonstrates this principle. If $A_{1} R_{2} /\\left(R_{1}+R_{2}\\right) \\gg 1$, then\n\n$$\n\\begin{align*}\n\\frac{Y}{X} & \\approx \\frac{1}{K}  \\tag{12.11}\\\\\n& \\approx 1+\\frac{R_{1}}{R_{2}} \\tag{12.12}\n\\end{align*}\n$$\n\nWhy is $R_{1} / R_{2}$ more precisely defined than $g_{m} R_{D}$? If $R_{1}$ and $R_{2}$ are made of the same material and constructed identically, their value variations due to process and temperature do not affect their ratio. For instance, for a closed-loop gain of 4.00, we select $R_{1}=3 R_{2}$ and implement $R_{1}$ as three \"unit\" resistors in series, each equal to $R_{2}$. As shown in Fig. 12.7, this ensures that $R_{1}$ and $R_{2}$ \"track\" each other; if $R_{2}$ increases by $20 \\%$, so do each unit in $R_{1}$ and thus the total $R_{1}$, still maintaining a gain of $1+1.2 R_{1} /\\left(1.2 R_{2}\\right)=4$.\n\nThe image labeled \"Figure 12.7\" depicts a resistor configuration designed for good matching in a circuit. The diagram features four rectangular resistor components. Three of these are connected in series to form $R_{1}$, while the fourth serves as $R_{2}$. Each resistor is shown as a block with two connection points, indicating current flow.\n\n**1. Component Identification and Structure:**\n- The setup comprises four resistors, each represented as a block with two terminals.\n- Three resistors are series-connected to form $R_{1}$, and the fourth is $R_{2}$.\n\n**2. Connections and Interactions:**\n- The resistors constituting $R_{1}$ are end-to-end connected, signifying a series arrangement. This ensures $R_{1}$'s total resistance is three times a single unit resistor, aligning with $R_{1} = 3R_{2}$.\n- Current flows sequentially through $R_{1}$'s resistors and separately through $R_{2}$.\n\n**3. Labels, Annotations, and Key Features:**\n- The diagram includes labels $R_{1}$ and $R_{2}$ to indicate resistor groupings.\n- The design ensures that if $R_{2}$'s value changes due to factors like temperature, $R_{1}$'s value changes proportionally, preserving the desired ratio for stable circuit performance.\n\nFigure 12.7 Construction of resistors for good matching.\n\nThe circuit in Fig. 12.2 aims for a nominal gain of 4. (a) Calculate the actual gain if $A_{1}=1000$. (b) Determine the percentage gain change if $A_{1}$ drops to 500.\n\nSolution For a nominal gain of 4, Eq. (12.12) indicates $R_{1} / R_{2}=3$. (a) The actual gain is\n\n$$\n\\begin{align*}\n\\frac{Y}{X} & =\\frac{A_{1}}{1+K A_{1}}  \\tag{12.13}\\\\\n& =3.984 . \\tag{12.14}\n\\end{align*}\n$$\n\n[^13]Note that the loop gain $K A_{1}=1000 / 4=250$. (b) If $A_{1}$ decreases to 500, then\n\n$$\n\\begin{equation*}\n\\frac{Y}{X}=3.968 \\tag{12.15}\n\\end{equation*}\n$$\n\nThus, the closed-loop gain changes by only $(3.984 / 3.968) / 3.984=0.4 \\%$ if $A_{1}$ halves.\n\nExercise Calculate the percentage gain change if $A_{1}$ falls to 200.\n\nThis example illustrates that a feedback circuit's closed-loop gain becomes relatively independent of the open-loop gain, provided the loop gain, $K A_{1}$, remains significantly above unity. This characteristic of negative feedback is termed \"gain desensitization.\"\n\nWe now understand why we accept a gain reduction by a factor of $1+K A_{1}$. We start with an amplifier having a high but poorly controlled gain and apply negative feedback to achieve a more defined, albeit lower, gain. This concept was extensively discussed in the op amp circuits of Chapter 8.\n\nThe gain desensitization property of negative feedback means that factors affecting the open-loop gain have a reduced impact on the closed-loop gain. So far, we have only considered process and temperature variations, but many other phenomena can alter the gain.\n\n- As signal frequency increases, $A_{1}$ may decrease, but $A_{1} /\\left(1+K A_{1}\\right)$ remains relatively stable. Thus, negative feedback is expected to enhance bandwidth (at the expense of gain).\n- If load resistance changes, $A_{1}$ may vary; e.g., a CS stage's gain depends on load resistance. Negative feedback, however, makes the gain less sensitive to load variations.\n- Signal amplitude affects $A_{1}$ due to the forward amplifier's nonlinearity. For example, Chapter 10's large-signal analysis of differential pairs shows that small-signal gain decreases at high input amplitudes. With negative feedback, the open-loop gain's variation due to nonlinearity has a lesser effect on the closed-loop characteristics, improving linearity.\n\nWe will now delve deeper into these properties."
},
{
    "text": "Consider $A_{1}$ in Fig. 12.1 as an amplifier with poorly controlled gain. For instance, a CS stage offers a voltage gain of $g_{m} R_{D}$, where both $g_{m}$ and $R_{D}$ fluctuate with process and temperature, potentially causing the gain to vary by up to $\\pm 20 \\%$. Suppose we need a voltage gain of $4.00$. How can such precision be achieved? Equation (12.2) suggests a possible solution: if $K A_{1} \\gg 1$, we obtain\n\n$$\n\\begin{equation*}\n\\frac{Y}{X} \\approx \\frac{1}{K} \\tag{12.10}\n\\end{equation*}\n$$\n\na value不受$A_{1}$影响. From another angle, Eq. (12.4) shows that $K A_{1} \\gg 1$ results in a minimal error, making $X_{F}$ almost equal to $X$ and thus $Y$ nearly equal to $X / K$. Therefore, if $K$ can be precisely defined, $A_{1}$ has a negligible impact on $Y / X$, achieving high gain precision. The circuit in Fig. 12.2 effectively demonstrates this principle. If $A_{1} R_{2} /\\left(R_{1}+R_{2}\\right) \\gg 1$, then\n\n$$\n\\begin{align*}\n\\frac{Y}{X} & \\approx \\frac{1}{K}  \\tag{12.11}\\\\\n& \\approx 1+\\frac{R_{1}}{R_{2}} \\tag{12.12}\n\\end{align*}\n$$\n\nWhy is $R_{1} / R_{2}$ more accurately defined than $g_{m} R_{D}$? If $R_{1}$ and $R_{2}$ are made from the same material and constructed identically, their value variations due to process and temperature do not affect their ratio. For instance, for a closed-loop gain of 4.00, we select $R_{1}=3 R_{2}$ and implement $R_{1}$ as three \"unit\" resistors in series, each equal to $R_{2}$. As depicted in Fig. 12.7, this ensures $R_{1}$ and $R_{2}$ \"track\" each other; if $R_{2}$ increases by $20 \\%$, so do each unit in $R_{1}$ and thus the total $R_{1}$, still maintaining a gain of $1+1.2 R_{1} /\\left(1.2 R_{2}\\right)=4$.\nimage_name:Figure 12.7\ndescription:Figure 12.7 illustrates a resistor configuration designed for optimal matching in a circuit. The diagram features four rectangular resistor components. Three of these are connected in series to form the resistor labeled \\( R_1 \\), while a single resistor is labeled \\( R_2 \\). Each resistor is shown as a block with two connection points, indicating the current flow.\n\n**1. Component Identification and Structure:**\n- The setup includes four resistors, each represented as a block with two terminals.\n- Three resistors are series-connected to form \\( R_1 \\), and the fourth resistor is \\( R_2 \\).\n\n**2. Connections and Interactions:**\n- The resistors constituting \\( R_1 \\) are connected end-to-end, signifying a series arrangement. This ensures the total resistance of \\( R_1 \\) is three times that of a single unit resistor, aligning with the description \\( R_1 = 3R_2 \\).\n- Current flows sequentially through the resistors in \\( R_1 \\) and independently through \\( R_2 \\).\n\n**3. Labels, Annotations, and Key Features:**\n- The diagram is labeled with \\( R_1 \\) and \\( R_2 \\) to indicate the resistor groups.\n- The configuration aims to ensure that any change in \\( R_2 \\) due to external factors like temperature is proportionally reflected in \\( R_1 \\), preserving the desired ratio for stable circuit performance.\n\nFigure 12.7 Construction of resistors for optimal matching.\n\nThe circuit in Fig. 12.2 aims for a nominal gain of 4. (a) Calculate the actual gain if $A_{1}=1000$. (b) Determine the percentage gain change if $A_{1}$ drops to 500.\n\nSolution For a nominal gain of 4, Eq. (12.12) indicates $R_{1} / R_{2}=3$. (a) The actual gain is\n\n$$\n\\begin{align*}\n\\frac{Y}{X} & =\\frac{A_{1}}{1+K A_{1}}  \\tag{12.13}\\\\\n& =3.984 . \\tag{12.14}\n\\end{align*}\n$$\n\n[^13]Note that the loop gain $K A_{1}=1000 / 4=250$. (b) If $A_{1}$ decreases to 500, then\n\n$$\n\\begin{equation*}\n\\frac{Y}{X}=3.968 \\tag{12.15}\n\\end{equation*}\n$$\n\nThus, the closed-loop gain changes by only $(3.984 / 3.968) / 3.984=0.4 \\%$ if $A_{1}$ is halved.\n\nExercise Calculate the percentage gain change if $A_{1}$ falls to 200.\n\nThis example highlights that the closed-loop gain of a feedback circuit becomes largely independent of the open-loop gain, provided the loop gain, $K A_{1}$, remains significantly above unity. This characteristic of negative feedback is termed \"gain desensitization.\"\n\nWe now understand why we accept a gain reduction by a factor of $1+K A_{1}$. We start with an amplifier having a high but poorly controlled gain and apply negative feedback to achieve a more defined, albeit lower, gain. This concept was extensively used in the op amp circuits discussed in Chapter 8.\n\nThe gain desensitization property of negative feedback means that factors affecting the open-loop gain have a reduced impact on the closed-loop gain. So far, we have only considered process and temperature variations, but many other factors also influence gain.\n\n- As signal frequency increases, $A_{1}$ may decrease, but $A_{1} /\\left(1+K A_{1}\\right)$ remains relatively stable. Thus, negative feedback is expected to enhance bandwidth (at the expense of gain).\n- If load resistance changes, $A_{1}$ may vary; for example, the gain of a CS stage depends on load resistance. Negative feedback, however, makes the gain less sensitive to load variations.\n- Signal amplitude affects $A_{1}$ due to the nonlinearity of the forward amplifier. For instance, the large-signal analysis of differential pairs in Chapter 10 shows that small-signal gain decreases at high input amplitudes. With negative feedback, the open-loop gain variation due to nonlinearity has a lesser effect on the closed-loop characteristics, thereby improving linearity.\n\nWe will now delve deeper into these properties."
},
{
    "text": "Consider $A_{1}$ in Fig. 12.1, an amplifier with poorly controlled gain. For instance, a CS stage offers a voltage gain of $g_{m} R_{D}$, where both $g_{m}$ and $R_{D}$ fluctuate with process and temperature, causing the gain to vary by up to $\\pm 20 \\%$. Suppose we need a voltage gain of $4.00$. How can such precision be achieved? Equation (12.2) suggests a potential solution: if $K A_{1} \\gg 1$, we obtain\n\n$$\n\\begin{equation*}\n\\frac{Y}{X} \\approx \\frac{1}{K} \\tag{12.10}\n\\end{equation*}\n$$\n\na value不受$A_{1}$影响. From another viewpoint, Eq. (12.4) shows that $K A_{1} \\gg 1$ results in a minor error, making $X_{F}$ almost equal to $X$ and thus $Y$ nearly equal to $X / K$. Therefore, if $K$ can be precisely defined, $A_{1}$ has a negligible impact on $Y / X$, achieving high gain precision. The circuit in Fig. 12.2 effectively demonstrates this principle. If $A_{1} R_{2} /\\left(R_{1}+R_{2}\\right) \\gg 1$, then\n\n$$\n\\begin{align*}\n\\frac{Y}{X} & \\approx \\frac{1}{K}  \\tag{12.11}\\\\\n& \\approx 1+\\frac{R_{1}}{R_{2}} \\tag{12.12}\n\\end{align*}\n$$\n\nWhy is $R_{1} / R_{2}$ more accurately defined than $g_{m} R_{D}$? If $R_{1}$ and $R_{2}$ are made from the same material and constructed identically, their value variations due to process and temperature do not affect their ratio. For instance, for a closed-loop gain of 4.00, we select $R_{1}=3 R_{2}$ and implement $R_{1}$ as a series combination of three \"unit\" resistors equal to $R_{2}$. As depicted in Fig. 12.7, the goal is to ensure $R_{1}$ and $R_{2}$ \"track\" each other; if $R_{2}$ increases by $20 \\%$, each unit in $R_{1}$ also increases by $20 \\%$, maintaining a total $R_{1}$ value and thus a gain of $1+1.2 R_{1} /\\left(1.2 R_{2}\\right)=4$.\nimage_name:Figure 12.7\ndescription:The image labeled \"Figure 12.7\" shows a resistor configuration designed for good matching in a circuit. The diagram features four rectangular resistor components. Three of these are connected in series to form the resistor labeled \\( R_1 \\), while the single resistor is labeled \\( R_2 \\). Each resistor is illustrated as a block with two connection points, indicating the current flow path.\n\n**1. Component Identification and Structure:**\n- The setup comprises four resistors, each represented as a block with two terminals.\n- Three resistors are串联 to form \\( R_1 \\), and the fourth resistor is \\( R_2 \\).\n\n**2. Connections and Interactions:**\n- The resistors constituting \\( R_1 \\) are connected end-to-end, signifying a series arrangement. This ensures the total resistance of \\( R_1 \\) is three times that of a single unit resistor, aligning with the description \\( R_1 = 3R_2 \\).\n- Current flows sequentially through the resistors in \\( R_1 \\) and independently through \\( R_2 \\).\n\n**3. Labels, Annotations, and Key Features:**\n- The diagram includes labels \\( R_1 \\) and \\( R_2 \\) to indicate the resistor groups.\n- The configuration aims to ensure that any change in \\( R_2 \\)'s value due to external factors like temperature is proportionally reflected in \\( R_1 \\), preserving the desired ratio for stable circuit performance.\n\nFigure 12.7 Construction of resistors for good matching.\n\nThe circuit in Fig. 12.2 is intended for a nominal gain of 4. (a) Calculate the actual gain if $A_{1}=1000$. (b) Determine the percentage change in the gain if $A_{1}$ decreases to 500.\n\nSolution For a nominal gain of 4, Eq. (12.12) indicates $R_{1} / R_{2}=3$. (a) The actual gain is\n\n$$\n\\begin{align*}\n\\frac{Y}{X} & =\\frac{A_{1}}{1+K A_{1}}  \\tag{12.13}\\\\\n& =3.984 . \\tag{12.14}\n\\end{align*}\n$$\n\n[^13]Note that the loop gain $K A_{1}=1000 / 4=250$. (b) If $A_{1}$ drops to 500, then\n\n$$\n\\begin{equation*}\n\\frac{Y}{X}=3.968 \\tag{12.15}\n\\end{equation*}\n$$\n\nThus, the closed-loop gain changes by only $(3.984 / 3.968) / 3.984=0.4 \\%$ if $A_{1}$ is halved.\n\nExercise Calculate the percentage change in the gain if $A_{1}$ falls to 200.\n\nThis example illustrates that the closed-loop gain of a feedback circuit becomes relatively independent of the open-loop gain, provided the loop gain, $K A_{1}$, remains significantly greater than unity. This characteristic of negative feedback is known as \"gain desensitization.\"\n\nWe now understand why we accept a reduction in gain by a factor of $1+K A_{1}$. We start with an amplifier having a high but poorly controlled gain and apply negative feedback to achieve a more defined, albeit lower, gain. This concept was extensively discussed in the op amp circuits in Chapter 8.\n\nThe gain desensitization property of negative feedback means that factors affecting the open-loop gain have a reduced impact on the closed-loop gain. So far, we have only considered process and temperature variations, but many other factors also influence the gain.\n\n- As signal frequency increases, $A_{1}$ may decrease, but $A_{1} /\\left(1+K A_{1}\\right)$ remains relatively stable. Hence, negative feedback is expected to enhance bandwidth (at the expense of gain).\n- If the load resistance changes, $A_{1}$ may vary; for example, the gain of a CS stage depends on the load resistance. Negative feedback, however, makes the gain less susceptible to load variations.\n- Signal amplitude affects $A_{1}$ due to the forward amplifier's nonlinearity. For instance, the large-signal analysis of differential pairs in Chapter 10 shows that the small-signal gain decreases at high input amplitudes. With negative feedback, the variation in open-loop gain due to nonlinearity has a lesser effect on the closed-loop characteristics, thereby improving linearity.\n\nWe will now delve deeper into these properties."
},
{
    "text": "Consider $A_{1}$ in Fig. 12.1 as an amplifier with poorly controlled gain. For instance, a CS stage offers a voltage gain of $g_{m} R_{D}$, where both $g_{m}$ and $R_{D}$ fluctuate with process and temperature variations, leading to a gain variation of up to $\\pm 20 \\%$. Suppose we need a voltage gain of $4.00$. How can such precision be achieved? Equation (12.2) suggests a potential solution: if $K A_{1} \\gg 1$, we obtain\n\n$$\n\\begin{equation*}\n\\frac{Y}{X} \\approx \\frac{1}{K} \\tag{12.10}\n\\end{equation*}\n$$\n\na value不受$A_{1}$影响. From another angle, Eq. (12.4) shows that $K A_{1} \\gg 1$ results in a minimal error, making $X_{F}$ almost equal to $X$ and thus $Y$ nearly equal to $X / K$. Therefore, if $K$ can be precisely defined, $A_{1}$ has a negligible impact on $Y / X$, achieving high gain precision. The circuit in Fig. 12.2 perfectly illustrates this concept. If $A_{1} R_{2} /\\left(R_{1}+R_{2}\\right) \\gg 1$, then\n\n$$\n\\begin{align*}\n\\frac{Y}{X} & \\approx \\frac{1}{K}  \\tag{12.11}\\\\\n& \\approx 1+\\frac{R_{1}}{R_{2}} \\tag{12.12}\n\\end{align*}\n$$\n\nWhy is $R_{1} / R_{2}$ more precisely defined than $g_{m} R_{D}$? If $R_{1}$ and $R_{2}$ are made from the same material and constructed identically, their value variations due to process and temperature do not affect their ratio. For instance, for a closed-loop gain of 4.00, we select $R_{1}=3 R_{2}$ and implement $R_{1}$ as three \"unit\" resistors in series, each equal to $R_{2}$. As depicted in Fig. 12.7, this ensures that $R_{1}$ and $R_{2}$ \"track\" each other; if $R_{2}$ increases by $20 \\%$, so do each unit in $R_{1}$ and thus the total $R_{1}$, still maintaining a gain of $1+1.2 R_{1} /\\left(1.2 R_{2}\\right)=4$.\nimage_name:Figure 12.7\ndescription:The image labeled \"Figure 12.7\" shows a resistor configuration designed for good matching in a circuit. The diagram features four rectangular resistor components. Three of these are connected in series to form the resistor labeled \\( R_1 \\), while the single resistor is labeled \\( R_2 \\). Each resistor is shown as a block with two connection points, indicating the current flow.\n\n**1. Identification of Components and Structure:**\n- The setup includes four resistors, each represented as a block with two terminals.\n- Three resistors are connected in series to create \\( R_1 \\), and the fourth serves as \\( R_2 \\).\n\n**2. Connections and Interactions:**\n- The resistors forming \\( R_1 \\) are connected end-to-end in series, ensuring the total resistance of \\( R_1 \\) is three times that of a single unit resistor, aligning with the description that \\( R_1 = 3R_2 \\).\n- Current flows sequentially through the resistors in \\( R_1 \\) and separately through \\( R_2 \\).\n\n**3. Labels, Annotations, and Key Features:**\n- The diagram is labeled with \\( R_1 \\) and \\( R_2 \\) to indicate the resistor groupings.\n- The arrangement aims to ensure that any change in \\( R_2 \\) due to external factors like temperature is proportionally reflected in \\( R_1 \\), maintaining the desired ratio for stable circuit performance.\n\nFigure 12.7 Construction of resistors for good matching.\n\nThe circuit in Fig. 12.2 is designed for a nominal gain of 4. (a) Calculate the actual gain if $A_{1}=1000$. (b) Determine the percentage change in the gain if $A_{1}$ decreases to 500.\n\nSolution For a nominal gain of 4, Eq. (12.12) indicates that $R_{1} / R_{2}=3$. (a) The actual gain is given by\n\n$$\n\\begin{align*}\n\\frac{Y}{X} & =\\frac{A_{1}}{1+K A_{1}}  \\tag{12.13}\\\\\n& =3.984 . \\tag{12.14}\n\\end{align*}\n$$\n\n[^13]Note that the loop gain $K A_{1}=1000 / 4=250$. (b) If $A_{1}$ drops to 500, then\n\n$$\n\\begin{equation*}\n\\frac{Y}{X}=3.968 \\tag{12.15}\n\\end{equation*}\n$$\n\nThus, the closed-loop gain changes by only $(3.984 / 3.968) / 3.984=0.4 \\%$ if $A_{1}$ is halved.\n\nExercise Calculate the percentage change in the gain if $A_{1}$ falls to 200.\n\nThis example demonstrates that the closed-loop gain of a feedback circuit becomes relatively independent of the open-loop gain, provided the loop gain, $K A_{1}$, remains significantly greater than unity. This characteristic of negative feedback is known as \"gain desensitization.\"\n\nWe now understand why we accept a reduction in gain by a factor of $1+K A_{1}$. We start with an amplifier having a high but poorly controlled gain and apply negative feedback to achieve a more defined, albeit lower, gain. This principle was also extensively used in the op amp circuits discussed in Chapter 8.\n\nThe gain desensitization property of negative feedback means that any factor affecting the open-loop gain has a reduced impact on the closed-loop gain. So far, we have only considered process and temperature variations, but many other factors can alter the gain.\n\n- As the signal frequency increases, $A_{1}$ may decrease, but $A_{1} /\\left(1+K A_{1}\\right)$ remains relatively stable. Hence, negative feedback is expected to enhance the bandwidth (at the expense of gain).\n- If the load resistance changes, $A_{1}$ may vary; for example, the gain of a CS stage depends on the load resistance. Negative feedback, however, makes the gain less sensitive to load variations.\n- The signal amplitude affects $A_{1}$ due to the nonlinearity of the forward amplifier. For instance, the large-signal analysis of differential pairs in Chapter 10 shows that the small-signal gain decreases at high input amplitudes. With negative feedback, the variation in open-loop gain due to nonlinearity has a lesser effect on the closed-loop characteristics, thereby improving linearity.\n\nWe will now delve deeper into these properties."
},
{
    "text": "Consider $A_{1}$ in Fig. 12.1, an amplifier with poorly controlled gain. For instance, a CS stage offers a voltage gain of $g_{m} R_{D}$, where both $g_{m}$ and $R_{D}$ fluctuate with process and temperature, causing the gain to vary by up to $\\pm 20 \\%$. Suppose we need a voltage gain of $4.00$. How can such precision be achieved? Equation (12.2) suggests a potential solution: if $K A_{1} \\gg 1$, we obtain\n\n$$\n\\begin{equation*}\n\\frac{Y}{X} \\approx \\frac{1}{K} \\tag{12.10}\n\\end{equation*}\n$$\n\na value不受$A_{1}$影响. From another angle, Eq. (12.4) shows that $K A_{1} \\gg 1$ results in minimal error, making $X_{F}$ almost equal to $X$ and thus $Y$ nearly equal to $X / K$. Therefore, if $K$ can be precisely defined, $A_{1}$ has a negligible impact on $Y / X$, achieving high gain precision. The circuit in Fig. 12.2 perfectly illustrates this concept. If $A_{1} R_{2} /\\left(R_{1}+R_{2}\\right) \\gg 1$, then\n\n$$\n\\begin{align*}\n\\frac{Y}{X} & \\approx \\frac{1}{K}  \\tag{12.11}\\\\\n& \\approx 1+\\frac{R_{1}}{R_{2}} \\tag{12.12}\n\\end{align*}\n$$\n\nWhy is $R_{1} / R_{2}$ more accurately defined than $g_{m} R_{D}$? If $R_{1}$ and $R_{2}$ are made of the same material and constructed identically, their value variations due to process and temperature do not affect their ratio. For example, for a closed-loop gain of 4.00, we select $R_{1}=3 R_{2}$ and implement $R_{1}$ as three \"unit\" resistors in series, each equal to $R_{2}$. As depicted in Fig. 12.7, this ensures $R_{1}$ and $R_{2}$ \"track\" each other; if $R_{2}$ increases by $20 \\%$, each unit in $R_{1}$ does the same, maintaining the total value of $R_{1}$ and thus a gain of $1+1.2 R_{1} /\\left(1.2 R_{2}\\right)=4$.\nimage_name:Figure 12.7\ndescription:The image labeled \"Figure 12.7\" shows a resistor configuration designed for good matching in a circuit. The diagram features four rectangular resistor components. Three of these are connected in series to form the resistor labeled \\( R_1 \\), while a single resistor is labeled \\( R_2 \\). Each resistor is shown as a block with two connection points, indicating the current flow.\n\n**1. Identification of Components and Structure:**\n- The setup includes four resistors, each represented as a block with two terminals.\n- Three resistors are connected in series to create \\( R_1 \\), and the fourth serves as \\( R_2 \\).\n\n**2. Connections and Interactions:**\n- The resistors forming \\( R_1 \\) are linked end-to-end, indicating a series connection. This setup ensures the total resistance of \\( R_1 \\) is three times that of a single unit resistor, aligning with the description that \\( R_1 = 3R_2 \\).\n- Current flows sequentially through the resistors in \\( R_1 \\) and separately through \\( R_2 \\).\n\n**3. Labels, Annotations, and Key Features:**\n- The diagram is labeled with \\( R_1 \\) and \\( R_2 \\) to indicate the resistor groups.\n- The arrangement aims to ensure that any change in \\( R_2 \\)'s value due to external factors like temperature is proportionally reflected in \\( R_1 \\), maintaining the desired ratio for stable circuit performance.\n\nFigure 12.7 Construction of resistors for good matching.\n\nThe circuit in Fig. 12.2 aims for a nominal gain of 4. (a) Calculate the actual gain if $A_{1}=1000$. (b) Determine the percentage change in gain if $A_{1}$ drops to 500.\n\nSolution For a nominal gain of 4, Eq. (12.12) indicates $R_{1} / R_{2}=3$. (a) The actual gain is\n\n$$\n\\begin{align*}\n\\frac{Y}{X} & =\\frac{A_{1}}{1+K A_{1}}  \\tag{12.13}\\\\\n& =3.984 . \\tag{12.14}\n\\end{align*}\n$$\n\n[^13]Note that the loop gain $K A_{1}=1000 / 4=250$. (b) If $A_{1}$ decreases to 500, then\n\n$$\n\\begin{equation*}\n\\frac{Y}{X}=3.968 \\tag{12.15}\n\\end{equation*}\n$$\n\nThus, the closed-loop gain changes by only $(3.984 / 3.968) / 3.984=0.4 \\%$ if $A_{1}$ is halved.\n\nExercise Calculate the percentage change in gain if $A_{1}$ falls to 200.\n\nThis example demonstrates that the closed-loop gain of a feedback circuit becomes relatively independent of the open-loop gain, provided the loop gain, $K A_{1}$, remains significantly greater than unity. This characteristic of negative feedback is known as \"gain desensitization.\"\n\nWe now understand why we accept a reduction in gain by a factor of $1+K A_{1}$. We start with an amplifier having a high but poorly controlled gain and apply negative feedback to achieve a more defined, albeit lower, gain. This principle was extensively used in the op amp circuits discussed in Chapter 8.\n\nThe gain desensitization property of negative feedback means that factors influencing the open-loop gain have a reduced effect on the closed-loop gain. So far, we have only considered process and temperature variations, but many other factors also affect the gain.\n\n- As the signal frequency increases, $A_{1}$ may decrease, but $A_{1} /\\left(1+K A_{1}\\right)$ remains relatively stable. Thus, negative feedback is expected to enhance the bandwidth (at the expense of gain).\n- If the load resistance changes, $A_{1}$ may vary; for instance, the gain of a CS stage depends on the load resistance. Negative feedback, however, makes the gain less sensitive to load variations.\n- The signal amplitude impacts $A_{1}$ due to the forward amplifier's nonlinearity. For example, the large-signal analysis of differential pairs in Chapter 10 shows that the small-signal gain decreases at high input amplitudes. With negative feedback, the variation in open-loop gain due to nonlinearity has a lesser impact on the closed-loop characteristics, improving linearity.\n\nWe will now delve deeper into these properties."
},
{
    "text": "Consider $A_{1}$ in Fig. 12.1, which is an amplifier with poorly controlled gain. For instance, a CS stage offers a voltage gain of $g_{m} R_{D}$, but both $g_{m}$ and $R_{D}$ fluctuate with process and temperature, causing the gain to vary by up to $\\pm 20 \\%$. Now, assume we need a voltage gain of $4.00$. How can such precision be achieved? Equation (12.2) suggests a possible solution: if $K A_{1} \\gg 1$, we get\n\n$$\n\\begin{equation*}\n\\frac{Y}{X} \\approx \\frac{1}{K} \\tag{12.10}\n\\end{equation*}\n$$\n\na value不受$A_{1}$影响. From another angle, Eq. (12.4) shows that $K A_{1} \\gg 1$ results in a minor error, making $X_{F}$ almost equal to $X$ and thus $Y$ nearly equal to $X / K$. Therefore, if $K$ can be precisely defined, $A_{1}$ has a negligible impact on $Y / X$, achieving high gain precision. The circuit in Fig. 12.2 perfectly illustrates this concept. If $A_{1} R_{2} /\\left(R_{1}+R_{2}\\right) \\gg 1$, then\n\n$$\n\\begin{align*}\n\\frac{Y}{X} & \\approx \\frac{1}{K}  \\tag{12.11}\\\\\n& \\approx 1+\\frac{R_{1}}{R_{2}} \\tag{12.12}\n\\end{align*}\n$$\n\nWhy is $R_{1} / R_{2}$ more accurately defined than $g_{m} R_{D}$? If $R_{1}$ and $R_{2}$ are made from the same material and constructed identically, their value variations due to process and temperature do not affect their ratio. For instance, for a closed-loop gain of 4.00, we select $R_{1}=3 R_{2}$ and implement $R_{1}$ as three \"unit\" resistors in series, each equal to $R_{2}$. As depicted in Fig. 12.7, this ensures that $R_{1}$ and $R_{2}$ \"track\" each other; if $R_{2}$ increases by $20 \\%$, so do each unit in $R_{1}$ and thus the total $R_{1}$, still maintaining a gain of $1+1.2 R_{1} /\\left(1.2 R_{2}\\right)=4$.\nimage_name:Figure 12.7\ndescription:The image labeled \"Figure 12.7\" shows a resistor configuration designed for good matching in a circuit. The diagram features four rectangular resistor components. Three of these are connected in series to form the resistor labeled \\( R_1 \\), while the single resistor is labeled \\( R_2 \\). Each resistor is shown as a block with two connection points, indicating the current flow.\n\n**1. Identification of Components and Structure:**\n- The setup includes four resistors, each represented as a block with two terminals.\n- Three resistors are串联 to form \\( R_1 \\), and the fourth is \\( R_2 \\).\n\n**2. Connections and Interactions:**\n- The resistors in \\( R_1 \\) are connected end-to-end, indicating a series connection. This ensures the total resistance of \\( R_1 \\) is three times that of a single unit resistor, aligning with the description that \\( R_1 = 3R_2 \\).\n- Current flows sequentially through the resistors in \\( R_1 \\) and separately through \\( R_2 \\).\n\n**3. Labels, Annotations, and Key Features:**\n- The diagram is labeled with \\( R_1 \\) and \\( R_2 \\) to indicate the resistor groups.\n- The arrangement ensures that if \\( R_2 \\)'s value changes due to factors like temperature, \\( R_1 \\)'s value changes proportionally, maintaining the desired ratio for stable circuit performance.\n\nFigure 12.7 Construction of resistors for good matching.\n\nThe circuit in Fig. 12.2 aims for a nominal gain of 4. (a) Calculate the actual gain for $A_{1}=1000$. (b) Determine the percentage change in gain if $A_{1}$ drops to 500.\n\nSolution For a nominal gain of 4, Eq. (12.12) indicates $R_{1} / R_{2}=3$. (a) The actual gain is\n\n$$\n\\begin{align*}\n\\frac{Y}{X} & =\\frac{A_{1}}{1+K A_{1}}  \\tag{12.13}\\\\\n& =3.984 . \\tag{12.14}\n\\end{align*}\n$$\n\n[^13]Note that the loop gain $K A_{1}=1000 / 4=250$. (b) If $A_{1}$ decreases to 500, then\n\n$$\n\\begin{equation*}\n\\frac{Y}{X}=3.968 \\tag{12.15}\n\\end{equation*}\n$$\n\nThus, the closed-loop gain changes by only $(3.984 / 3.968) / 3.984=0.4 \\%$ if $A_{1}$ drops by a factor of 2.\n\nExercise Calculate the percentage change in gain if $A_{1}$ falls to 200.\n\nThis example demonstrates that the closed-loop gain of a feedback circuit becomes relatively independent of the open-loop gain, provided the loop gain, $K A_{1}$, remains significantly greater than unity. This characteristic of negative feedback is termed \"gain desensitization.\"\n\nWe now understand why we accept a reduction in gain by a factor of $1+K A_{1}$. We start with an amplifier having a high but poorly-controlled gain and apply negative feedback to achieve a more defined, albeit lower, gain. This principle was also extensively used in the op amp circuits discussed in Chapter 8.\n\nThe gain desensitization property of negative feedback means that factors affecting the open-loop gain have a reduced impact on the closed-loop gain. So far, we have only considered process and temperature variations, but many other factors also influence the gain.\n\n- As the signal frequency increases, $A_{1}$ may decrease, but $A_{1} /\\left(1+K A_{1}\\right)$ remains relatively stable. Hence, negative feedback is expected to enhance the bandwidth (at the expense of gain).\n- If the load resistance changes, $A_{1}$ may vary; for example, the gain of a CS stage depends on the load resistance. Negative feedback, however, makes the gain less sensitive to load variations.\n- The signal amplitude affects $A_{1}$ due to the forward amplifier's nonlinearity. For instance, the large-signal analysis of differential pairs in Chapter 10 shows that the small-signal gain decreases at high input amplitudes. With negative feedback, the variation in open-loop gain due to nonlinearity has a lesser effect on the closed-loop characteristics, thereby improving linearity.\n\nWe will now delve deeper into these properties."
},
{
    "text": "Consider $A_{1}$ in Fig. 12.1, which is an amplifier with poorly controlled gain. For instance, a CS stage offers a voltage gain of $g_{m} R_{D}$, where both $g_{m}$ and $R_{D}$ fluctuate with process and temperature variations, potentially causing the gain to vary by up to $\\pm 20 \\%$. Suppose we need a voltage gain of $4.00$. How can we achieve such precision? Equation (12.2) suggests a possible solution: if $K A_{1} \\gg 1$, we obtain\n\n$$\n\\begin{equation*}\n\\frac{Y}{X} \\approx \\frac{1}{K} \\tag{12.10}\n\\end{equation*}\n$$\n\na value independent of $A_{1}$. From another viewpoint, Eq. (12.4) shows that $K A_{1} \\gg 1$ results in a minimal error, making $X_{F}$ almost equal to $X$ and thus $Y$ nearly equal to $X / K$. Therefore, if $K$ can be precisely defined, $A_{1}$ has a negligible impact on $Y / X$, achieving high gain precision. The circuit in Fig. 12.2 effectively demonstrates this principle. If $A_{1} R_{2} /\\left(R_{1}+R_{2}\\right) \\gg 1$, then\n\n$$\n\\begin{align*}\n\\frac{Y}{X} & \\approx \\frac{1}{K}  \\tag{12.11}\\\\\n& \\approx 1+\\frac{R_{1}}{R_{2}} \\tag{12.12}\n\\end{align*}\n$$\n\nWhy is $R_{1} / R_{2}$ more accurately defined than $g_{m} R_{D}$? If $R_{1}$ and $R_{2}$ are made from the same material and constructed identically, their value variations due to process and temperature do not affect their ratio. For example, for a closed-loop gain of 4.00, we select $R_{1}=3 R_{2}$ and implement $R_{1}$ as three \"unit\" resistors in series, each equal to $R_{2}$. As depicted in Fig. 12.7, this approach ensures that $R_{1}$ and $R_{2}$ \"track\" each other; if $R_{2}$ increases by $20 \\%$, each unit in $R_{1}$ also increases by $20 \\%$, maintaining the total value of $R_{1}$ and thus a gain of $1+1.2 R_{1} /\\left(1.2 R_{2}\\right)=4$.\n\nThe image labeled \"Figure 12.7\" shows a resistor configuration designed for good matching in a circuit. The diagram features four rectangular resistor components. Three of these are connected in series to form $R_{1}$, while the fourth serves as $R_{2}$. Each resistor is illustrated as a block with two connection points, indicating the current flow.\n\n**1. Component Identification and Structure:**\n- The setup comprises four resistors, each shown as a block with two terminals.\n- Three resistors are connected in series to create $R_{1}$, and the fourth is $R_{2}$.\n\n**2. Connections and Interactions:**\n- The resistors forming $R_{1}$ are connected end-to-end, signifying a series connection. This ensures that the total resistance of $R_{1}$ is three times that of a single unit resistor, aligning with the description that $R_{1} = 3R_{2}$.\n- Current flows sequentially through the resistors in $R_{1}$ and separately through $R_{2}$.\n\n**3. Labels, Annotations, and Key Features:**\n- The diagram includes labels $R_{1}$ and $R_{2}$ to indicate the resistor groups.\n- The arrangement is intended to ensure that if $R_{2}$'s value changes due to factors like temperature, $R_{1}$'s value changes proportionally, preserving the desired ratio for stable circuit performance.\n\nFigure 12.7 Construction of resistors for good matching.\n\nThe circuit in Fig. 12.2 aims for a nominal gain of 4. (a) Calculate the actual gain if $A_{1}=1000$. (b) Determine the percentage change in the gain if $A_{1}$ decreases to 500.\n\nSolution For a nominal gain of 4, Eq. (12.12) indicates that $R_{1} / R_{2}=3$. (a) The actual gain is\n\n$$\n\\begin{align*}\n\\frac{Y}{X} & =\\frac{A_{1}}{1+K A_{1}}  \\tag{12.13}\\\\\n& =3.984 . \\tag{12.14}\n\\end{align*}\n$$\n\n[^13]Note that the loop gain $K A_{1}=1000 / 4=250$. (b) If $A_{1}$ drops to 500, then\n\n$$\n\\begin{equation*}\n\\frac{Y}{X}=3.968 \\tag{12.15}\n\\end{equation*}\n$$\n\nThus, the closed-loop gain changes by only $(3.984 / 3.968) / 3.984=0.4 \\%$ if $A_{1}$ is halved.\n\nExercise Calculate the percentage change in the gain if $A_{1}$ falls to 200.\n\nThis example illustrates that the closed-loop gain of a feedback circuit becomes relatively independent of the open-loop gain, provided the loop gain, $K A_{1}$, remains significantly greater than unity. This characteristic of negative feedback is known as \"gain desensitization.\"\n\nWe now understand why we accept a reduction in gain by a factor of $1+K A_{1}$. We start with an amplifier that has a high but poorly controlled gain and apply negative feedback to achieve a more precisely defined, albeit lower, gain. This concept was extensively discussed in the op amp circuits in Chapter 8.\n\nThe gain desensitization property of negative feedback means that any factor affecting the open-loop gain has a reduced impact on the closed-loop gain. So far, we have only considered process and temperature variations, but many other factors also influence the gain.\n\n- As the signal frequency increases, $A_{1}$ may decrease, but $A_{1} /\\left(1+K A_{1}\\right)$ remains relatively stable. Hence, negative feedback is expected to enhance the bandwidth (at the expense of gain).\n- If the load resistance changes, $A_{1}$ may vary; for instance, the gain of a CS stage depends on the load resistance. Negative feedback, however, makes the gain less sensitive to load variations.\n- The signal amplitude affects $A_{1}$ due to the nonlinearity of the forward amplifier. For example, the large-signal analysis of differential pairs in Chapter 10 shows that the small-signal gain decreases at high input amplitudes. With negative feedback, the variation in the open-loop gain due to nonlinearity has a lesser effect on the closed-loop characteristics, thereby improving linearity.\n\nWe will now delve deeper into these properties."
},
{
    "text": "Assume $A_{1}$ in Fig. 12.1 is an amplifier with poorly controlled gain. For instance, a CS stage offers a voltage gain of $g_{m} R_{D}$, where both $g_{m}$ and $R_{D}$ fluctuate with process and temperature, potentially causing the gain to vary by up to $\\pm 20 \\%$. Additionally, suppose we need a voltage gain of $4.00$. How can such precision be achieved? Equation (12.2) suggests a possible solution: if $K A_{1} \\gg 1$, we obtain\n\n$$\n\\begin{equation*}\n\\frac{Y}{X} \\approx \\frac{1}{K} \\tag{12.10}\n\\end{equation*}\n$$\n\na value不受$A_{1}$影响. From another angle, Eq. (12.4) shows that $K A_{1} \\gg 1$ results in a minimal error, making $X_{F}$ almost equal to $X$ and thus $Y$ nearly equal to $X / K$. Therefore, if $K$ can be precisely defined, $A_{1}$ has a negligible impact on $Y / X$, achieving high gain precision. The circuit in Fig. 12.2 effectively demonstrates this principle. If $A_{1} R_{2} /\\left(R_{1}+R_{2}\\right) \\gg 1$, then\n\n$$\n\\begin{align*}\n\\frac{Y}{X} & \\approx \\frac{1}{K}  \\tag{12.11}\\\\\n& \\approx 1+\\frac{R_{1}}{R_{2}} \\tag{12.12}\n\\end{align*}\n$$\n\nWhy is $R_{1} / R_{2}$ more accurately defined than $g_{m} R_{D}$? If $R_{1}$ and $R_{2}$ are made from the same material and constructed identically, their value variations due to process and temperature do not affect their ratio. For instance, for a closed-loop gain of 4.00, we select $R_{1}=3 R_{2}$ and implement $R_{1}$ as three \"unit\" resistors in series, each equal to $R_{2}$. As depicted in Fig. 12.7, this ensures that $R_{1}$ and $R_{2}$ \"track\" each other; if $R_{2}$ increases by $20 \\%$, so do each unit in $R_{1}$ and thus the total $R_{1}$, still maintaining a gain of $1+1.2 R_{1} /\\left(1.2 R_{2}\\right)=4$.\nimage_name:Figure 12.7\ndescription:The image labeled \"Figure 12.7\" shows a resistor configuration designed for good matching in a circuit. The diagram features four rectangular resistor components. Three of these are connected in series to form the resistor labeled \\( R_1 \\), while a single resistor is labeled \\( R_2 \\). Each resistor is illustrated as a block with two connection points, indicating the current flow.\n\n**1. Component Identification and Structure:**\n- The setup includes four resistors, each shown as a block with two terminals.\n- Three resistors are串联 to form \\( R_1 \\), and the fourth is \\( R_2 \\).\n\n**2. Connections and Interactions:**\n- The resistors constituting \\( R_1 \\) are connected end-to-end, indicating a series arrangement. This ensures the total resistance of \\( R_1 \\) is three times that of a single unit resistor, aligning with the description that \\( R_1 = 3R_2 \\).\n- Current flows sequentially through the resistors in \\( R_1 \\) and separately through \\( R_2 \\).\n\n**3. Labels, Annotations, and Key Features:**\n- The diagram is labeled with \\( R_1 \\) and \\( R_2 \\) to indicate the resistor groups.\n- The configuration aims to ensure that if \\( R_2 \\)'s value changes due to factors like temperature, \\( R_1 \\)'s value changes proportionally, preserving the desired ratio for stable circuit performance.\n\nFigure 12.7 Construction of resistors for good matching.\n\nThe circuit in Fig. 12.2 is intended for a nominal gain of 4. (a) Calculate the actual gain if $A_{1}=1000$. (b) Determine the percentage change in the gain if $A_{1}$ decreases to 500.\n\nSolution For a nominal gain of 4, Eq. (12.12) indicates that $R_{1} / R_{2}=3$. (a) The actual gain is given by\n\n$$\n\\begin{align*}\n\\frac{Y}{X} & =\\frac{A_{1}}{1+K A_{1}}  \\tag{12.13}\\\\\n& =3.984 . \\tag{12.14}\n\\end{align*}\n$$\n\n[^13]Note that the loop gain $K A_{1}=1000 / 4=250$. (b) If $A_{1}$ drops to 500, then\n\n$$\n\\begin{equation*}\n\\frac{Y}{X}=3.968 \\tag{12.15}\n\\end{equation*}\n$$\n\nThus, the closed-loop gain changes by only $(3.984 / 3.968) / 3.984=0.4 \\%$ if $A_{1}$ is halved.\n\nExercise Determine the percentage change in the gain if $A_{1}$ falls to 200.\n\nThis example illustrates that the closed-loop gain of a feedback circuit becomes relatively independent of the open-loop gain, provided the loop gain, $K A_{1}$, remains significantly greater than unity. This characteristic of negative feedback is termed \"gain desensitization.\"\n\nWe now understand why we accept a reduction in gain by a factor of $1+K A_{1}$. We start with an amplifier having a high but poorly controlled gain and apply negative feedback to achieve a more defined, albeit lower, gain. This concept was extensively used in the op amp circuits discussed in Chapter 8.\n\nThe gain desensitization property of negative feedback means that any factor affecting the open-loop gain has a reduced impact on the closed-loop gain. So far, we have attributed this to process and temperature variations, but many other factors also influence the gain.\n\n- As signal frequency increases, $A_{1}$ may decrease, but $A_{1} /\\left(1+K A_{1}\\right)$ remains relatively stable. Thus, negative feedback is expected to enhance bandwidth (at the expense of gain).\n- If the load resistance changes, $A_{1}$ may vary; for example, the gain of a CS stage depends on the load resistance. Negative feedback, however, makes the gain less sensitive to load variations.\n- Signal amplitude affects $A_{1}$ due to the nonlinearity of the forward amplifier. For instance, the large-signal analysis of differential pairs in Chapter 10 shows that the small-signal gain decreases at high input amplitudes. With negative feedback, the variation in open-loop gain due to nonlinearity has a lesser effect on the closed-loop characteristics, thereby improving linearity.\n\nWe will now delve deeper into these properties."
},
{
    "text": "Consider a one-pole open-loop amplifier with the transfer function\n\n$$\n\\begin{equation*}\nA_{1}(s)=\\frac{A_{0}}{1+\\frac{s}{\\omega_{0}}} \\tag{12.16}\n\\end{equation*}\n$$\n\nHere, $A_{0}$ represents the low-frequency gain and $\\omega_{0}$ the -3 dB bandwidth. From Eq. (12.2), we know that negative feedback reduces the low-frequency gain by a factor of $1+K A_{1}$, and we aim to find the resulting bandwidth enhancement. The closed-loop transfer function is derived by substituting Eq. (12.16) for $A_{1}$ in Eq. (12.2):\n\n$$\n\\begin{equation*}\n\\frac{Y}{X}=\\frac{\\frac{A_{0}}{1+\\frac{s}{\\omega_{0}}}}{1+K \\frac{A_{0}}{1+\\frac{s}{\\omega_{0}}}} \\tag{12.17}\n\\end{equation*}\n$$\n\nMultiplying the numerator and denominator by $1+s / \\omega_{0}$ results in\n\n$$\n\\begin{align*}\n\\frac{Y}{X}(s) & =\\frac{A_{0}}{1+K A_{0}+\\frac{s}{\\omega_{0}}}  \\tag{12.18}\\\\\n& =\\frac{\\frac{A_{0}}{1+K A_{0}}}{1+\\frac{s}{\\left(1+K A_{0}\\right) \\omega_{0}}} \\tag{12.19}\n\\end{align*}\n$$\n\nAnalogous to Eq. (12.16), we deduce that the closed-loop system now has:\n\n$$\n\\begin{align*}\n\\text { Closed-Loop Gain } & =\\frac{A_{0}}{1+K A_{0}}  \\tag{12.20}\\\\\n\\text { Closed-Loop Bandwidth } & =\\left(1+K A_{0}\\right) \\omega_{0} \\tag{12.21}\n\\end{align*}\n$$\n\nIn essence, the gain and bandwidth are scaled by the same factor but in opposite directions, maintaining a constant product.\n\nExample Plot the closed-loop frequency response given by Eq. (12.19) for $K=0,0.1$, and 0.5. Assume $A_{0}=200$.\n\nSolution For $K=0$, the feedback is absent, and $Y / X$ reverts to $A_{1}(s)$ as in Eq. (12.16). For $K=0.1$, we get $1+K A_{0}=21$, indicating a decrease in gain and a corresponding increase in bandwidth. Similarly, for $K=0.5,1+K A_{0}=101$, leading to a proportional decrease in gain and increase in bandwidth. The results are illustrated in Fig. 12.8.\nimage_name:Figure 12.8\ndescription:**Type of Graph and Function:**\nThe graph is a Bode plot depicting the closed-loop frequency response of a system. It shows the magnitude response versus frequency for various feedback gain values, \\( K \\).\n\n**Axes Labels and Units:**\n- The vertical axis shows the gain, labeled as \\( A_0 \\), which is dimensionless.\n- The horizontal axis represents frequency, denoted by \\( \\omega \\), typically in radians per second.\n- Both axes use a linear scale.\n\n**Overall Behavior and Trends:**\nThe plot includes three curves corresponding to different \\( K \\) values: 0, 0.1, and 0.5. For \\( K = 0 \\), the gain starts at \\( A_0 \\) and remains steady over a frequency range before dropping sharply. For \\( K = 0.1 \\), the initial gain is lower, and the bandwidth is broader than for \\( K = 0 \\). For \\( K = 0.5 \\), the initial gain is even lower, and the bandwidth is the widest.\n\n**Key Features and Technical Details:**\n- For \\( K = 0 \\), the gain starts at the maximum \\( A_0 \\) and decreases sharply after a specific frequency, indicating a narrow bandwidth.\n- As \\( K \\) increases to 0.1 and 0.5, the initial gain decreases proportionally, but the bandwidth expands, illustrating the trade-off between gain and bandwidth.\n- The plot highlights the impact of feedback on the system's frequency response, with higher \\( K \\) values reducing gain but increasing bandwidth.\n\n**Annotations and Specific Data Points:**\n- The curves are labeled with their respective \\( K \\) values: \\( K = 0 \\), \\( K = 0.1 \\), and \\( K = 0.5 \\).\n- No specific numerical values for cutoff frequencies or critical points are provided on the graph, but the trend of decreasing gain and increasing bandwidth with higher \\( K \\) is evident.\n\nFigure 12.8\n\nExercise Repeat the previous example for $K=1$.\n\nExample Demonstrate that the unity-gain bandwidth of the system remains unaffected by $K$ if $1+K A_{0} \\gg 1$ and $K^{2} \\ll 1$.\n\nSolution The magnitude of Eq. (12.19) is\n\n$$\n\\begin{equation*}\n\\left|\\frac{Y}{X}(j \\omega)\\right|=\\frac{\\frac{A_{0}}{1+K A_{0}}}{\\sqrt{1+\\frac{\\omega^{2}}{\\left(1+K A_{0}\\right)^{2} \\omega_{0}^{2}}}} \\tag{12.22}\n\\end{equation*}\n$$\n\nSetting this equal to unity and squaring both sides, we obtain\n\n$$\n\\begin{equation*}\n\\left(\\frac{A_{0}}{1+K A_{0}}\\right)^{2}=1+\\frac{\\omega_{u}^{2}}{\\left(1+K A_{0}\\right)^{2} \\omega_{0}^{2}} \\tag{12.23}\n\\end{equation*}\n$$\n\nwhere $\\omega_{u}$ is the unity-gain bandwidth. This leads to\n\n$$\n\\begin{align*}\n\\omega_{u} & =\\omega_{0} \\sqrt{A_{0}^{2}-\\left(1+K A_{0}\\right)^{2}}  \\tag{12.24}\\\\\n& \\approx \\omega_{0} \\sqrt{A_{0}^{2}-K^{2} A_{0}^{2}}  \\tag{12.25}\\\\\n& \\approx \\omega_{0} A_{0} \\tag{12.26}\n\\end{align*}\n$$\n\nwhich equals the gain-bandwidth product of the open-loop system. Figure 12.9 illustrates these results.\nimage_name:Figure 12.9\ndescription:The graph in Figure 12.9 is a Bode plot showing the frequency response of an open-loop system. The vertical axis is in decibels (dB) for gain, while the horizontal axis is labeled with angular frequency (ω) and is likely on a logarithmic scale.\n\nAxes Labels and Units:\n- **Vertical Axis:** Gain in dB\n- **Horizontal Axis:** Frequency (ω), with key points marked as ω₀ and A₀ω₀.\n\nOverall Behavior and Trends:\n- The plot features two curves representing different gain responses.\n- Both curves start at a high gain, A₀, at low frequencies.\n- At the frequency ω₀, indicated by a vertical dashed line, the gain starts to decline.\n- The gain continues to fall with increasing frequency, reaching 0 dB at A₀ω₀.\n\nKey Features and Technical Details:\n- **Initial Gain Level:** Both curves begin at A₀, showing the initial gain before the roll-off.\n- **Cutoff Frequency:** The frequency ω₀ is a critical point where the gain begins to drop.\n- **Unity-Gain Bandwidth:** The point where the gain hits 0 dB is at A₀ω₀, marking the unity-gain bandwidth.\n\nAnnotations and Specific Data Points:\n- The graph emphasizes the transition from high gain to unity gain, illustrating the effect of frequency on the system's gain.\n- The dashed line at ω₀ marks the onset of gain reduction.\n\nFigure 12.9\n\nExercise If $A_{0}=1000, \\omega_{0}=2 \\pi \\times(10 \\mathrm{MHz})$, and $K=0.5$, compute the unity-gain bandwidth using Eqs. (12.24) and (12.26) and compare the results."
},
{
    "text": "Consider a single-pole open-loop amplifier with the transfer function\n\n$$\n\\begin{equation*}\nA_{1}(s)=\\frac{A_{0}}{1+\\frac{s}{\\omega_{0}}} \\tag{12.16}\n\\end{equation*}\n$$\n\nHere, $A_{0}$ represents the low-frequency gain, and $\\omega_{0}$ signifies the -3 dB bandwidth. Observing from Eq. (12.2) that negative feedback reduces the low-frequency gain by a factor of $1+K A_{1}$, we aim to ascertain the consequent bandwidth enhancement. The closed-loop transfer function is derived by substituting Eq. (12.16) for $A_{1}$ in Eq. (12.2):\n\n$$\n\\begin{equation*}\n\\frac{Y}{X}=\\frac{\\frac{A_{0}}{1+\\frac{s}{\\omega_{0}}}}{1+K \\frac{A_{0}}{1+\\frac{s}{\\omega_{0}}}} \\tag{12.17}\n\\end{equation*}\n$$\n\nMultiplying both the numerator and the denominator by $1+s / \\omega_{0}$ results in\n\n$$\n\\begin{align*}\n\\frac{Y}{X}(s) & =\\frac{A_{0}}{1+K A_{0}+\\frac{s}{\\omega_{0}}}  \\tag{12.18}\\\\\n& =\\frac{\\frac{A_{0}}{1+K A_{0}}}{1+\\frac{s}{\\left(1+K A_{0}\\right) \\omega_{0}}} \\tag{12.19}\n\\end{align*}\n$$\n\nIn comparison with Eq. (12.16), we deduce that the closed-loop system now exhibits:\n\n$$\n\\begin{align*}\n\\text { Closed-Loop Gain } & =\\frac{A_{0}}{1+K A_{0}}  \\tag{12.20}\\\\\n\\text { Closed-Loop Bandwidth } & =\\left(1+K A_{0}\\right) \\omega_{0} \\tag{12.21}\n\\end{align*}\n$$\n\nIn essence, the gain and bandwidth are scaled by the same factor but inversely, maintaining a constant product.\n\nExample Plot the closed-loop frequency response as given by Eq. (12.19) for $K=0,0.1$, and 0.5. Assume $A_{0}=200$.\n\nSolution For $K=0$, feedback is absent, and $Y / X$ reverts to $A_{1}(s)$ as per Eq. (12.16). For $K=0.1$, we have $1+K A_{0}=21$, indicating a proportional decrease in gain and increase in bandwidth. Similarly, for $K=0.5,1+K A_{0}=101$, resulting in a corresponding reduction in gain and enhancement in bandwidth. The outcomes are illustrated in Fig. 12.8.\nimage_name:Figure 12.8\ndescription:**Type of Graph and Function:**\nThe graph is a Bode plot depicting the closed-loop frequency response of a system. It illustrates the magnitude response versus frequency for various feedback gain values, \\( K \\).\n\n**Axes Labels and Units:**\n- The vertical axis shows the gain, labeled as \\( A_0 \\), which is dimensionless.\n- The horizontal axis represents frequency, denoted by \\( \\omega \\), usually in radians per second.\n- Both axes use a linear scale.\n\n**Overall Behavior and Trends:**\nThe plot features three curves corresponding to different \\( K \\) values: 0, 0.1, and 0.5. For \\( K = 0 \\), the gain starts at \\( A_0 \\) and remains steady across a range of frequencies before dropping sharply. For \\( K = 0.1 \\), the initial gain is lower, and the bandwidth is broader than for \\( K = 0 \\). For \\( K = 0.5 \\), the initial gain is even lower, and the bandwidth is the widest of the three.\n\n**Key Features and Technical Details:**\n- For \\( K = 0 \\), the gain starts at the maximum \\( A_0 \\) and drops sharply after a specific frequency, indicating a narrow bandwidth.\n- As \\( K \\) increases to 0.1 and 0.5, the initial gain decreases proportionally, but the bandwidth expands, showing a trade-off between gain and bandwidth.\n- The plot illustrates the impact of feedback on the system's frequency response, with higher \\( K \\) values reducing gain but increasing bandwidth.\n\n**Annotations and Specific Data Points:**\n- The curves are labeled with their respective \\( K \\) values: \\( K = 0 \\), \\( K = 0.1 \\), and \\( K = 0.5 \\).\n- The graph does not provide specific numerical values for cutoff frequencies or other critical points, but the trend of decreasing gain and increasing bandwidth with higher \\( K \\) is evident.\n\nFigure 12.8\n\nExercise Repeat the previous example for $K=1$.\n\nExample Demonstrate that the unity-gain bandwidth of the aforementioned system remains unaffected by $K$ if 12.6 $1+K A_{0} \\gg 1$ and $K^{2} \\ll 1$.\n\nSolution The magnitude of Eq. (12.19) is\n\n$$\n\\begin{equation*}\n\\left|\\frac{Y}{X}(j \\omega)\\right|=\\frac{\\frac{A_{0}}{1+K A_{0}}}{\\sqrt{1+\\frac{\\omega^{2}}{\\left(1+K A_{0}\\right)^{2} \\omega_{0}^{2}}}} \\tag{12.22}\n\\end{equation*}\n$$\n\nSetting this equal to unity and squaring both sides, we obtain\n\n$$\n\\begin{equation*}\n\\left(\\frac{A_{0}}{1+K A_{0}}\\right)^{2}=1+\\frac{\\omega_{u}^{2}}{\\left(1+K A_{0}\\right)^{2} \\omega_{0}^{2}} \\tag{12.23}\n\\end{equation*}\n$$\n\nwhere $\\omega_{u}$ represents the unity-gain bandwidth. It follows that\n\n$$\n\\begin{align*}\n\\omega_{u} & =\\omega_{0} \\sqrt{A_{0}^{2}-\\left(1+K A_{0}\\right)^{2}}  \\tag{12.24}\\\\\n& \\approx \\omega_{0} \\sqrt{A_{0}^{2}-K^{2} A_{0}^{2}}  \\tag{12.25}\\\\\n& \\approx \\omega_{0} A_{0} \\tag{12.26}\n\\end{align*}\n$$\n\nwhich equals the gain-bandwidth product of the open-loop system. Figure 12.9 presents the results.\nimage_name:Figure 12.9\ndescription:The graph in Figure 12.9 is a Bode plot showing the frequency response of an open-loop system. The vertical axis is in decibels (dB) for gain, while the horizontal axis is labeled with angular frequency (ω) and is likely on a logarithmic scale.\n\nAxes Labels and Units:\n- **Vertical Axis:** Gain in dB\n- **Horizontal Axis:** Frequency (ω), with key points marked as ω₀ and A₀ω₀.\n\nOverall Behavior and Trends:\n- The plot includes two curves representing different gain responses.\n- Both curves start at a high gain, A₀, at low frequencies.\n- At the frequency ω₀, indicated by a vertical dashed line, the gain starts to decline.\n- The gain continues to decrease with frequency, reaching 0 dB at A₀ω₀.\n\nKey Features and Technical Details:\n- **Initial Gain Level:** Both curves begin at A₀, showing the initial gain before the roll-off.\n- **Cutoff Frequency:** The frequency ω₀ is a pivotal point where the gain begins to drop.\n- **Unity-Gain Bandwidth:** The point where the gain reaches 0 dB is at A₀ω₀, marking the unity-gain bandwidth.\n\nAnnotations and Specific Data Points:\n- The graph highlights the transition from high gain to unity gain, demonstrating the effect of frequency on the system's gain.\n- The dashed line at ω₀ marks the onset of gain reduction.\n\nFigure 12.9\n\nExercise If $A_{0}=1000, \\omega_{0}=2 \\pi \\times(10 \\mathrm{MHz})$, and $K=0.5$, compute the unity-gain bandwidth using Eqs. (12.24) and (12.26) and compare the results."
},
{
    "text": "Consider a single-pole open-loop amplifier with the transfer function\n\n$$\n\\begin{equation*}\nA_{1}(s)=\\frac{A_{0}}{1+\\frac{s}{\\omega_{0}}} \\tag{12.16}\n\\end{equation*}\n$$\n\nHere, $A_{0}$ represents the low-frequency gain, and $\\omega_{0}$ signifies the -3 dB bandwidth. From Eq. (12.2), we observe that negative feedback reduces the low-frequency gain by a factor of $1+K A_{1}$. Our goal is to determine the resulting increase in bandwidth. The closed-loop transfer function is derived by substituting Eq. (12.16) for $A_{1}$ in Eq. (12.2):\n\n$$\n\\begin{equation*}\n\\frac{Y}{X}=\\frac{\\frac{A_{0}}{1+\\frac{s}{\\omega_{0}}}}{1+K \\frac{A_{0}}{1+\\frac{s}{\\omega_{0}}}} \\tag{12.17}\n\\end{equation*}\n$$\n\nMultiplying both the numerator and the denominator by $1+s / \\omega_{0}$ results in\n\n$$\n\\begin{align*}\n\\frac{Y}{X}(s) & =\\frac{A_{0}}{1+K A_{0}+\\frac{s}{\\omega_{0}}}  \\tag{12.18}\\\\\n& =\\frac{\\frac{A_{0}}{1+K A_{0}}}{1+\\frac{s}{\\left(1+K A_{0}\\right) \\omega_{0}}} \\tag{12.19}\n\\end{align*}\n$$\n\nAnalogous to Eq. (12.16), we deduce that the closed-loop system now exhibits:\n\n$$\n\\begin{align*}\n\\text { Closed-Loop Gain } & =\\frac{A_{0}}{1+K A_{0}}  \\tag{12.20}\\\\\n\\text { Closed-Loop Bandwidth } & =\\left(1+K A_{0}\\right) \\omega_{0} \\tag{12.21}\n\\end{align*}\n$$\n\nIn essence, the gain and bandwidth are scaled by the same factor but inversely, maintaining a constant product.\n\nExample Plot the closed-loop frequency response as given by Eq. (12.19) for $K=0,0.1$, and 0.5. Assume $A_{0}=200$.\n\nSolution For $K=0$, the feedback is absent, and $Y / X$ reverts to $A_{1}(s)$ as per Eq. (12.16). For $K=0.1$, we have $1+K A_{0}=21$, indicating a decrease in gain and a corresponding increase in bandwidth. Similarly, for $K=0.5,1+K A_{0}=101$, leading to a proportional decrease in gain and increase in bandwidth. The outcomes are illustrated in Fig. 12.8.\nimage_name:Figure 12.8\ndescription:**Type of Graph and Function:**\nThe graph is a Bode plot depicting the closed-loop frequency response of a system. It illustrates the magnitude response versus frequency for various feedback gain values, \\( K \\).\n\n**Axes Labels and Units:**\n- The vertical axis shows the gain, denoted as \\( A_0 \\), which is dimensionless.\n- The horizontal axis displays frequency, represented by \\( \\omega \\), typically in radians per second.\n- Both axes use a linear scale.\n\n**Overall Behavior and Trends:**\nThe plot features three curves, each corresponding to different \\( K \\) values: 0, 0.1, and 0.5. For \\( K = 0 \\), the gain starts at \\( A_0 \\) and remains stable across a frequency range before dropping sharply. For \\( K = 0.1 \\), the initial gain is lower, and the bandwidth is broader than for \\( K = 0 \\). For \\( K = 0.5 \\), the initial gain is even lower, and the bandwidth is the widest.\n\n**Key Features and Technical Details:**\n- For \\( K = 0 \\), the gain starts at the maximum \\( A_0 \\) and decreases sharply after a specific frequency, indicating a narrow bandwidth.\n- As \\( K \\) increases to 0.1 and 0.5, the initial gain decreases proportionally, while the bandwidth increases, showcasing a trade-off between gain and bandwidth.\n- The plot highlights the impact of feedback on the system's frequency response, with higher \\( K \\) values reducing gain but enhancing bandwidth.\n\n**Annotations and Specific Data Points:**\n- The curves are labeled with their respective \\( K \\) values: \\( K = 0 \\), \\( K = 0.1 \\), and \\( K = 0.5 \\).\n- No specific numerical values for cutoff frequencies or other critical points are provided on the graph, but the trend of decreasing gain and increasing bandwidth with higher \\( K \\) is evident.\n\nFigure 12.8\n\nExercise Repeat the preceding example for $K=1$.\n\nExample Demonstrate that the unity-gain bandwidth of the aforementioned system remains unaffected by $K$ if 12.6 $1+K A_{0} \\gg 1$ and $K^{2} \\ll 1$.\n\nSolution The magnitude of Eq. (12.19) is\n\n$$\n\\begin{equation*}\n\\left|\\frac{Y}{X}(j \\omega)\\right|=\\frac{\\frac{A_{0}}{1+K A_{0}}}{\\sqrt{1+\\frac{\\omega^{2}}{\\left(1+K A_{0}\\right)^{2} \\omega_{0}^{2}}}} \\tag{12.22}\n\\end{equation*}\n$$\n\nSetting this equal to unity and squaring both sides, we obtain\n\n$$\n\\begin{equation*}\n\\left(\\frac{A_{0}}{1+K A_{0}}\\right)^{2}=1+\\frac{\\omega_{u}^{2}}{\\left(1+K A_{0}\\right)^{2} \\omega_{0}^{2}} \\tag{12.23}\n\\end{equation*}\n$$\n\nwhere $\\omega_{u}$ represents the unity-gain bandwidth. Consequently,\n\n$$\n\\begin{align*}\n\\omega_{u} & =\\omega_{0} \\sqrt{A_{0}^{2}-\\left(1+K A_{0}\\right)^{2}}  \\tag{12.24}\\\\\n& \\approx \\omega_{0} \\sqrt{A_{0}^{2}-K^{2} A_{0}^{2}}  \\tag{12.25}\\\\\n& \\approx \\omega_{0} A_{0} \\tag{12.26}\n\\end{align*}\n$$\n\nThis equals the gain-bandwidth product of the open-loop system. Figure 12.9 illustrates these findings.\nimage_name:Figure 12.9\ndescription:The graph in Figure 12.9 is a Bode plot showing the frequency response of an open-loop system. The vertical axis is in decibels (dB) for gain, while the horizontal axis is labeled with angular frequency (ω) and is likely on a logarithmic scale.\n\nAxes Labels and Units:\n- **Vertical Axis:** Gain in dB\n- **Horizontal Axis:** Frequency (ω), with key points marked as ω₀ and A₀ω₀.\n\nOverall Behavior and Trends:\n- The plot includes two curves representing different gain responses.\n- Both curves start at a high gain, A₀, at low frequencies.\n- At the frequency ω₀, indicated by a vertical dashed line, the gain starts to decline.\n- The gain continues to fall with increasing frequency, reaching 0 dB at A₀ω₀.\n\nKey Features and Technical Details:\n- **Initial Gain Level:** Both curves initiate at A₀, showing the initial gain before roll-off.\n- **Cutoff Frequency:** The frequency ω₀ is a pivotal point where the gain begins to drop.\n- **Unity-Gain Bandwidth:** The point where the gain hits 0 dB is at A₀ω₀, marking the unity-gain bandwidth.\n\nAnnotations and Specific Data Points:\n- The graph emphasizes the transition from high gain to unity gain, illustrating the effect of frequency on the system's gain.\n- A dashed line at ω₀ marks the onset of gain decrease.\n\nFigure 12.9\n\nExercise If $A_{0}=1000, \\omega_{0}=2 \\pi \\times(10 \\mathrm{MHz})$, and $K=0.5$, compute the unity-gain bandwidth using Eqs. (12.24) and (12.26) and compare the results."
},
{
    "text": "Consider a one-pole open-loop amplifier characterized by the transfer function\n\n$$\n\\begin{equation*}\nA_{1}(s)=\\frac{A_{0}}{1+\\frac{s}{\\omega_{0}}} \\tag{12.16}\n\\end{equation*}\n$$\n\nHere, $A_{0}$ represents the low-frequency gain, and $\\omega_{0}$ signifies the -3 dB bandwidth. Observing from Eq. (12.2) that negative feedback reduces the low-frequency gain by a factor of $1+K A_{1}$, we aim to ascertain the consequent enhancement in bandwidth. The closed-loop transfer function is derived by substituting Eq. (12.16) for $A_{1}$ in Eq. (12.2):\n\n$$\n\\begin{equation*}\n\\frac{Y}{X}=\\frac{\\frac{A_{0}}{1+\\frac{s}{\\omega_{0}}}}{1+K \\frac{A_{0}}{1+\\frac{s}{\\omega_{0}}}} \\tag{12.17}\n\\end{equation*}\n$$\n\nMultiplying both the numerator and the denominator by $1+s / \\omega_{0}$ results in\n\n$$\n\\begin{align*}\n\\frac{Y}{X}(s) & =\\frac{A_{0}}{1+K A_{0}+\\frac{s}{\\omega_{0}}}  \\tag{12.18}\\\\\n& =\\frac{\\frac{A_{0}}{1+K A_{0}}}{1+\\frac{s}{\\left(1+K A_{0}\\right) \\omega_{0}}} \\tag{12.19}\n\\end{align*}\n$$\n\nDrawing an analogy with Eq. (12.16), we deduce that the closed-loop system now exhibits:\n\n$$\n\\begin{align*}\n\\text { Closed-Loop Gain } & =\\frac{A_{0}}{1+K A_{0}}  \\tag{12.20}\\\\\n\\text { Closed-Loop Bandwidth } & =\\left(1+K A_{0}\\right) \\omega_{0} \\tag{12.21}\n\\end{align*}\n$$\n\nIn essence, the gain and bandwidth are scaled by the same factor but inversely, maintaining a constant product.\n\nExample Plot the closed-loop frequency response as given by Eq. (12.19) for $K=0,0.1$, and 0.5. Assume $A_{0}=200$.\n\nSolution For $K=0$, the absence of feedback means $Y / X$ reverts to $A_{1}(s)$ as per Eq. (12.16). For $K=0.1$, we have $1+K A_{0}=21$, indicating a proportional decrease in gain and increase in bandwidth. Similarly, for $K=0.5,1+K A_{0}=101$, resulting in a corresponding reduction in gain and enhancement in bandwidth. The outcomes are illustrated in Fig. 12.8.\nimage_name:Figure 12.8\ndescription:**Type of Graph and Function:**\nThe graph is a Bode plot depicting the closed-loop frequency response of a system. It illustrates the magnitude response versus frequency for varying feedback gain values, \\( K \\).\n\n**Axes Labels and Units:**\n- The vertical axis shows the gain, labeled as \\( A_0 \\), which is dimensionless.\n- The horizontal axis represents frequency, denoted by \\( \\omega \\), usually in radians per second.\n- Both axes have a linear scale.\n\n**Overall Behavior and Trends:**\nThe plot features three curves, each corresponding to different \\( K \\) values: 0, 0.1, and 0.5. For \\( K = 0 \\), the gain starts at \\( A_0 \\) and remains steady across a range of frequencies before dropping sharply. For \\( K = 0.1 \\), the initial gain is lower, and the bandwidth is broader than for \\( K = 0 \\). For \\( K = 0.5 \\), the initial gain is even lower, and the bandwidth is the widest.\n\n**Key Features and Technical Details:**\n- For \\( K = 0 \\), the gain starts at the maximum \\( A_0 \\) and decreases sharply after a specific frequency, indicating a narrow bandwidth.\n- As \\( K \\) increases to 0.1 and 0.5, the initial gain decreases proportionally, but the bandwidth expands, illustrating the trade-off between gain and bandwidth.\n- The plot showcases the impact of feedback on the system's frequency response, with higher \\( K \\) values reducing gain but boosting bandwidth.\n\n**Annotations and Specific Data Points:**\n- The curves are labeled with their respective \\( K \\) values: \\( K = 0 \\), \\( K = 0.1 \\), and \\( K = 0.5 \\).\n- No specific numerical values for cutoff frequencies or other critical points are provided on the graph, but the trend of decreasing gain and increasing bandwidth with higher \\( K \\) is evident.\n\nFigure 12.8\n\nExercise Repeat the preceding example for $K=1$.\n\nExample Demonstrate that the unity-gain bandwidth of the aforementioned system remains unaffected by $K$ if 12.6 $1+K A_{0} \\gg 1$ and $K^{2} \\ll 1$.\n\nSolution The magnitude of Eq. (12.19) is\n\n$$\n\\begin{equation*}\n\\left|\\frac{Y}{X}(j \\omega)\\right|=\\frac{\\frac{A_{0}}{1+K A_{0}}}{\\sqrt{1+\\frac{\\omega^{2}}{\\left(1+K A_{0}\\right)^{2} \\omega_{0}^{2}}}} \\tag{12.22}\n\\end{equation*}\n$$\n\nSetting this equal to unity and squaring both sides, we obtain\n\n$$\n\\begin{equation*}\n\\left(\\frac{A_{0}}{1+K A_{0}}\\right)^{2}=1+\\frac{\\omega_{u}^{2}}{\\left(1+K A_{0}\\right)^{2} \\omega_{0}^{2}} \\tag{12.23}\n\\end{equation*}\n$$\n\nwhere $\\omega_{u}$ represents the unity-gain bandwidth. This leads to\n\n$$\n\\begin{align*}\n\\omega_{u} & =\\omega_{0} \\sqrt{A_{0}^{2}-\\left(1+K A_{0}\\right)^{2}}  \\tag{12.24}\\\\\n& \\approx \\omega_{0} \\sqrt{A_{0}^{2}-K^{2} A_{0}^{2}}  \\tag{12.25}\\\\\n& \\approx \\omega_{0} A_{0} \\tag{12.26}\n\\end{align*}\n$$\n\nwhich equals the gain-bandwidth product of the open-loop system. Figure 12.9 illustrates these findings.\nimage_name:Figure 12.9\ndescription:The graph in Figure 12.9 is a Bode plot showing the frequency response of an open-loop system. The vertical axis is in decibels (dB) for gain, and the horizontal axis is labeled with angular frequency (ω), likely on a logarithmic scale.\n\nAxes Labels and Units:\n- **Vertical Axis:** Gain in dB\n- **Horizontal Axis:** Frequency (ω), with key points marked as ω₀ and A₀ω₀.\n\nOverall Behavior and Trends:\n- The plot includes two curves representing different gain responses.\n- Both curves start at a high gain, A₀, at low frequencies.\n- At the frequency ω₀, indicated by a vertical dashed line, the gain starts to decline.\n- The gain continues to decrease with frequency, reaching 0 dB at A₀ω₀.\n\nKey Features and Technical Details:\n- **Initial Gain Level:** Both curves commence at A₀, showing the initial gain before the roll-off.\n- **Cutoff Frequency:** The frequency ω₀ is a critical point where the gain begins to fall.\n- **Unity-Gain Bandwidth:** The point where the gain hits 0 dB is at A₀ω₀, marking the unity-gain bandwidth.\n\nAnnotations and Specific Data Points:\n- The graph highlights the transition from high gain to unity gain, demonstrating the effect of frequency on the system's gain.\n- The dashed line at ω₀ marks the onset of gain reduction.\n\nFigure 12.9\n\nExercise Given $A_{0}=1000, \\omega_{0}=2 \\pi \\times(10 \\mathrm{MHz})$, and $K=0.5$, compute the unity-gain bandwidth using Eqs. (12.24) and (12.26) and compare the results."
},
{
    "text": "Let us examine a single-pole open-loop amplifier characterized by the transfer function\n\n$$\n\\begin{equation*}\nA_{1}(s)=\\frac{A_{0}}{1+\\frac{s}{\\omega_{0}}} \\tag{12.16}\n\\end{equation*}\n$$\n\nHere, $A_{0}$ represents the low-frequency gain, and $\\omega_{0}$ signifies the -3 dB bandwidth. Observing from Eq. (12.2) that negative feedback reduces the low-frequency gain by a factor of $1+K A_{1}$, we aim to ascertain the corresponding enhancement in bandwidth. The closed-loop transfer function is derived by substituting Eq. (12.16) for $A_{1}$ in Eq. (12.2):\n\n$$\n\\begin{equation*}\n\\frac{Y}{X}=\\frac{\\frac{A_{0}}{1+\\frac{s}{\\omega_{0}}}}{1+K \\frac{A_{0}}{1+\\frac{s}{\\omega_{0}}}} \\tag{12.17}\n\\end{equation*}\n$$\n\nMultiplying both the numerator and the denominator by $1+s / \\omega_{0}$ results in\n\n$$\n\\begin{align*}\n\\frac{Y}{X}(s) & =\\frac{A_{0}}{1+K A_{0}+\\frac{s}{\\omega_{0}}}  \\tag{12.18}\\\\\n& =\\frac{\\frac{A_{0}}{1+K A_{0}}}{1+\\frac{s}{\\left(1+K A_{0}\\right) \\omega_{0}}} \\tag{12.19}\n\\end{align*}\n$$\n\nDrawing an analogy with Eq. (12.16), we deduce that the closed-loop system now exhibits:\n\n$$\n\\begin{align*}\n\\text { Closed-Loop Gain } & =\\frac{A_{0}}{1+K A_{0}}  \\tag{12.20}\\\\\n\\text { Closed-Loop Bandwidth } & =\\left(1+K A_{0}\\right) \\omega_{0} \\tag{12.21}\n\\end{align*}\n$$\n\nIn essence, the gain and bandwidth are scaled by the same factor but in opposing directions, maintaining a constant product.\n\nExample Plot the closed-loop frequency response as given by Eq. (12.19) for $K=0,0.1$, and 0.5. Assume $A_{0}=200$.\n\nSolution For $K=0$, the absence of feedback means $Y / X$ reverts to $A_{1}(s)$ as per Eq. (12.16). For $K=0.1$, we find $1+K A_{0}=21$, indicating a proportional decrease in gain and increase in bandwidth. Similarly, for $K=0.5,1+K A_{0}=101$, resulting in a corresponding reduction in gain and enhancement in bandwidth. The outcomes are illustrated in Fig. 12.8.\nimage_name:Figure 12.8\ndescription:**Type of Graph and Function:**\nThis graph is a Bode plot depicting the closed-loop frequency response of a system. It illustrates the magnitude response versus frequency for varying feedback gain values, \\( K \\).\n\n**Axes Labels and Units:**\n- The vertical axis shows the gain, labeled as \\( A_0 \\), which is dimensionless.\n- The horizontal axis represents frequency, denoted by \\( \\omega \\), usually in radians per second.\n- Both axes use a linear scale.\n\n**Overall Behavior and Trends:**\nThe plot features three curves, each associated with different \\( K \\) values: 0, 0.1, and 0.5. For \\( K = 0 \\), the gain starts at \\( A_0 \\) and remains stable across a frequency range before dropping sharply. For \\( K = 0.1 \\), the initial gain is lower, and the bandwidth is broader than for \\( K = 0 \\). For \\( K = 0.5 \\), the initial gain is further reduced, and the bandwidth is the widest of the three.\n\n**Key Features and Technical Details:**\n- At \\( K = 0 \\), the gain starts at the peak value \\( A_0 \\) and decreases abruptly after a specific frequency, indicating a narrow bandwidth.\n- As \\( K \\) increases to 0.1 and 0.5, the initial gain decreases proportionally, but the bandwidth expands, illustrating the trade-off between gain and bandwidth.\n- The plot highlights the impact of feedback on the system's frequency response, with higher \\( K \\) values leading to reduced gain but increased bandwidth.\n\n**Annotations and Specific Data Points:**\n- The curves are labeled with their respective \\( K \\) values: \\( K = 0 \\), \\( K = 0.1 \\), and \\( K = 0.5 \\).\n- No specific numerical values for cutoff frequencies or other critical points are provided on the graph, but the trend of decreasing gain and increasing bandwidth with higher \\( K \\) is evident.\n\nFigure 12.8\n\nExercise Repeat the preceding example for $K=1$.\n\nExample Demonstrate that the unity-gain bandwidth of the aforementioned system remains unaffected by $K$ if 12.6 $1+K A_{0} \\gg 1$ and $K^{2} \\ll 1$.\n\nSolution The magnitude of Eq. (12.19) is\n\n$$\n\\begin{equation*}\n\\left|\\frac{Y}{X}(j \\omega)\\right|=\\frac{\\frac{A_{0}}{1+K A_{0}}}{\\sqrt{1+\\frac{\\omega^{2}}{\\left(1+K A_{0}\\right)^{2} \\omega_{0}^{2}}}} \\tag{12.22}\n\\end{equation*}\n$$\n\nSetting this equal to unity and squaring both sides, we obtain\n\n$$\n\\begin{equation*}\n\\left(\\frac{A_{0}}{1+K A_{0}}\\right)^{2}=1+\\frac{\\omega_{u}^{2}}{\\left(1+K A_{0}\\right)^{2} \\omega_{0}^{2}} \\tag{12.23}\n\\end{equation*}\n$$\n\nwhere $\\omega_{u}$ represents the unity-gain bandwidth. Consequently,\n\n$$\n\\begin{align*}\n\\omega_{u} & =\\omega_{0} \\sqrt{A_{0}^{2}-\\left(1+K A_{0}\\right)^{2}}  \\tag{12.24}\\\\\n& \\approx \\omega_{0} \\sqrt{A_{0}^{2}-K^{2} A_{0}^{2}}  \\tag{12.25}\\\\\n& \\approx \\omega_{0} A_{0} \\tag{12.26}\n\\end{align*}\n$$\n\nThis equals the gain-bandwidth product of the open-loop system. Figure 12.9 illustrates these findings.\nimage_name:Figure 12.9\ndescription:The graph in Figure 12.9 is a Bode plot showing the frequency response of an open-loop system. The vertical axis is marked in decibels (dB) for gain, while the horizontal axis is labeled with angular frequency (ω) and is presumably on a logarithmic scale.\n\nAxes Labels and Units:\n- **Vertical Axis:** Gain in dB\n- **Horizontal Axis:** Frequency (ω), with key points labeled as ω₀ and A₀ω₀.\n\nOverall Behavior and Trends:\n- The plot includes two curves representing different gain responses.\n- Both curves commence at a high gain level, A₀, at low frequencies.\n- At the frequency ω₀, indicated by a vertical dashed line, the gain starts to decline.\n- The gain continues to fall with increasing frequency, reaching 0 dB at A₀ω₀.\n\nKey Features and Technical Details:\n- **Initial Gain Level:** Both curves begin at A₀, signifying the initial gain level before roll-off.\n- **Cutoff Frequency:** The frequency ω₀ is a critical point where the gain begins to decrease.\n- **Unity-Gain Bandwidth:** The point where the gain reaches 0 dB, located at A₀ω₀, marks the unity-gain bandwidth.\n\nAnnotations and Specific Data Points:\n- The graph underscores the transition from high gain to unity gain, demonstrating the effect of frequency on the system's gain.\n- The dashed line at ω₀ serves as a marker for the onset of gain reduction.\n\nFigure 12.9\n\nExercise Given $A_{0}=1000, \\omega_{0}=2 \\pi \\times(10 \\mathrm{MHz})$, and $K=0.5$, compute the unity-gain bandwidth using Eqs. (12.24) and (12.26) and compare the results."
},
{
    "text": "Consider a single-pole open-loop amplifier with the transfer function\n\n$$\n\\begin{equation*}\nA_{1}(s)=\\frac{A_{0}}{1+\\frac{s}{\\omega_{0}}} \\tag{12.16}\n\\end{equation*}\n$$\n\nHere, $A_{0}$ represents the low-frequency gain, and $\\omega_{0}$ is the -3 dB bandwidth. From Eq. (12.2), we observe that negative feedback reduces the low-frequency gain by a factor of $1+K A_{1}$, prompting us to explore the consequent bandwidth enhancement. The closed-loop transfer function is derived by substituting Eq. (12.16) for $A_{1}$ in Eq. (12.2):\n\n$$\n\\begin{equation*}\n\\frac{Y}{X}=\\frac{\\frac{A_{0}}{1+\\frac{s}{\\omega_{0}}}}{1+K \\frac{A_{0}}{1+\\frac{s}{\\omega_{0}}}} \\tag{12.17}\n\\end{equation*}\n$$\n\nMultiplying both the numerator and the denominator by $1+s / \\omega_{0}$ results in\n\n$$\n\\begin{align*}\n\\frac{Y}{X}(s) & =\\frac{A_{0}}{1+K A_{0}+\\frac{s}{\\omega_{0}}}  \\tag{12.18}\\\\\n& =\\frac{\\frac{A_{0}}{1+K A_{0}}}{1+\\frac{s}{\\left(1+K A_{0}\\right) \\omega_{0}}} \\tag{12.19}\n\\end{align*}\n$$\n\nBy analogy with Eq. (12.16), we deduce that the closed-loop system now has:\n\n$$\n\\begin{align*}\n\\text { Closed-Loop Gain } & =\\frac{A_{0}}{1+K A_{0}}  \\tag{12.20}\\\\\n\\text { Closed-Loop Bandwidth } & =\\left(1+K A_{0}\\right) \\omega_{0} \\tag{12.21}\n\\end{align*}\n$$\n\nIn essence, the gain and bandwidth are scaled by the same factor but inversely, maintaining a constant product.\n\nExample Plot the closed-loop frequency response as per Eq. (12.19) for $K=0,0.1$, and 0.5. Assume $A_{0}=200$.\n\nSolution For $K=0$, feedback is absent, and $Y / X$ reverts to $A_{1}(s)$ as per Eq. (12.16). With $K=0.1$, we get $1+K A_{0}=21$, indicating a proportional decrease in gain and increase in bandwidth. Similarly, for $K=0.5,1+K A_{0}=101$, leading to a corresponding gain reduction and bandwidth expansion. The outcomes are illustrated in Fig. 12.8.\nimage_name:Figure 12.8\ndescription:**Type of Graph and Function:**\nThe graph is a Bode plot depicting the closed-loop frequency response of a system. It shows the magnitude response versus frequency for various feedback gain values, \\( K \\).\n\n**Axes Labels and Units:**\n- The vertical axis represents the gain, labeled as \\( A_0 \\), which is dimensionless.\n- The horizontal axis represents frequency, denoted by \\( \\omega \\), typically in radians per second.\n- Both axes use a linear scale.\n\n**Overall Behavior and Trends:**\nThe plot features three curves, each corresponding to a different feedback gain \\( K \\): 0, 0.1, and 0.5. For \\( K = 0 \\), the gain starts at \\( A_0 \\) and remains steady over a frequency range before dropping sharply. For \\( K = 0.1 \\), the initial gain is lower, and the bandwidth is broader than for \\( K = 0 \\). For \\( K = 0.5 \\), the initial gain is the lowest, and the bandwidth is the widest among the three.\n\n**Key Features and Technical Details:**\n- For \\( K = 0 \\), the gain starts at its maximum \\( A_0 \\) and decreases sharply after a specific frequency, indicating a narrow bandwidth.\n- As \\( K \\) increases to 0.1 and 0.5, the initial gain decreases, but the bandwidth expands, illustrating the trade-off between gain and bandwidth.\n- The plot highlights the impact of feedback on the system's frequency response, with higher \\( K \\) values reducing gain but increasing bandwidth.\n\n**Annotations and Specific Data Points:**\n- The curves are labeled with their respective \\( K \\) values: \\( K = 0 \\), \\( K = 0.1 \\), and \\( K = 0.5 \\).\n- No specific numerical values for cutoff frequencies or other critical points are provided on the graph, but the trend of decreasing gain and increasing bandwidth with higher \\( K \\) is evident.\n\nFigure 12.8\n\nExercise Repeat the previous example for $K=1$.\n\nExample Demonstrate that the unity-gain bandwidth of the aforementioned system remains unaffected by $K$ if 12.6 $1+K A_{0} \\gg 1$ and $K^{2} \\ll 1$.\n\nSolution The magnitude of Eq. (12.19) is given by\n\n$$\n\\begin{equation*}\n\\left|\\frac{Y}{X}(j \\omega)\\right|=\\frac{\\frac{A_{0}}{1+K A_{0}}}{\\sqrt{1+\\frac{\\omega^{2}}{\\left(1+K A_{0}\\right)^{2} \\omega_{0}^{2}}}} \\tag{12.22}\n\\end{equation*}\n$$\n\nSetting this equal to unity and squaring both sides, we obtain\n\n$$\n\\begin{equation*}\n\\left(\\frac{A_{0}}{1+K A_{0}}\\right)^{2}=1+\\frac{\\omega_{u}^{2}}{\\left(1+K A_{0}\\right)^{2} \\omega_{0}^{2}} \\tag{12.23}\n\\end{equation*}\n$$\n\nwhere $\\omega_{u}$ represents the unity-gain bandwidth. It follows that\n\n$$\n\\begin{align*}\n\\omega_{u} & =\\omega_{0} \\sqrt{A_{0}^{2}-\\left(1+K A_{0}\\right)^{2}}  \\tag{12.24}\\\\\n& \\approx \\omega_{0} \\sqrt{A_{0}^{2}-K^{2} A_{0}^{2}}  \\tag{12.25}\\\\\n& \\approx \\omega_{0} A_{0} \\tag{12.26}\n\\end{align*}\n$$\n\nThis is equivalent to the gain-bandwidth product of the open-loop system. Figure 12.9 illustrates these findings.\nimage_name:Figure 12.9\ndescription:The graph in Figure 12.9 is a Bode plot showing the frequency response of an open-loop system. The vertical axis is marked in decibels (dB) for gain, while the horizontal axis is labeled with angular frequency (ω) and is likely on a logarithmic scale.\n\nAxes Labels and Units:\n- **Vertical Axis:** Gain in dB\n- **Horizontal Axis:** Frequency (ω), with key points labeled as ω₀ and A₀ω₀.\n\nOverall Behavior and Trends:\n- The plot includes two curves representing different gain responses.\n- Both curves start at a high gain, A₀, at low frequencies.\n- At the frequency ω₀, indicated by a vertical dashed line, the gain begins to decline.\n- The gain continues to fall with increasing frequency, reaching 0 dB at A₀ω₀.\n\nKey Features and Technical Details:\n- **Initial Gain Level:** Both curves start at A₀, marking the initial gain before the roll-off.\n- **Cutoff Frequency:** The frequency ω₀ is a critical point where the gain starts to drop.\n- **Unity-Gain Bandwidth:** The point where the gain hits 0 dB is at A₀ω₀, signifying the unity-gain bandwidth.\n\nAnnotations and Specific Data Points:\n- The graph highlights the transition from high gain to unity gain, demonstrating the effect of frequency on the system's gain.\n- The dashed line at ω₀ marks the onset of gain reduction.\n\nFigure 12.9\n\nExercise If $A_{0}=1000, \\omega_{0}=2 \\pi \\times(10 \\mathrm{MHz})$, and $K=0.5$, compute the unity-gain bandwidth using Eqs. (12.24) and (12.26) and compare the results."
},
{
    "text": "Consider a single-pole open-loop amplifier with the following transfer function:\n\n$$\n\\begin{equation*}\nA_{1}(s)=\\frac{A_{0}}{1+\\frac{s}{\\omega_{0}}} \\tag{12.16}\n\\end{equation*}\n$$\n\nHere, $A_{0}$ represents the low-frequency gain, and $\\omega_{0}$ signifies the -3 dB bandwidth. Observing from Eq. (12.2) that negative feedback reduces the low-frequency gain by a factor of $1+K A_{1}$, we aim to determine the corresponding bandwidth enhancement. The closed-loop transfer function is derived by substituting Eq. (12.16) for $A_{1}$ in Eq. (12.2):\n\n$$\n\\begin{equation*}\n\\frac{Y}{X}=\\frac{\\frac{A_{0}}{1+\\frac{s}{\\omega_{0}}}}{1+K \\frac{A_{0}}{1+\\frac{s}{\\omega_{0}}}} \\tag{12.17}\n\\end{equation*}\n$$\n\nMultiplying both the numerator and the denominator by $1+s / \\omega_{0}$ results in:\n\n$$\n\\begin{align*}\n\\frac{Y}{X}(s) & =\\frac{A_{0}}{1+K A_{0}+\\frac{s}{\\omega_{0}}}  \\tag{12.18}\\\\\n& =\\frac{\\frac{A_{0}}{1+K A_{0}}}{1+\\frac{s}{\\left(1+K A_{0}\\right) \\omega_{0}}} \\tag{12.19}\n\\end{align*}\n$$\n\nDrawing an analogy with Eq. (12.16), we deduce that the closed-loop system now exhibits:\n\n$$\n\\begin{align*}\n\\text { Closed-Loop Gain } & =\\frac{A_{0}}{1+K A_{0}}  \\tag{12.20}\\\\\n\\text { Closed-Loop Bandwidth } & =\\left(1+K A_{0}\\right) \\omega_{0} \\tag{12.21}\n\\end{align*}\n$$\n\nIn essence, the gain and bandwidth are scaled by the same factor but in opposite directions, maintaining a constant product.\n\nExample: Plot the closed-loop frequency response as given by Eq. (12.19) for $K=0, 0.1$, and 0.5. Assume $A_{0}=200$.\n\nSolution: For $K=0$, the feedback is absent, and $Y / X$ reverts to $A_{1}(s)$ as per Eq. (12.16). For $K=0.1$, we have $1+K A_{0}=21$, indicating a decrease in gain and an increase in bandwidth by the same factor. Similarly, for $K=0.5, 1+K A_{0}=101$, resulting in a proportional decrease in gain and increase in bandwidth. The outcomes are illustrated in Fig. 12.8.\nimage_name:Figure 12.8\ndescription:**Type of Graph and Function:**\nThe graph is a Bode plot depicting the closed-loop frequency response of a system. It illustrates the magnitude response versus frequency for various feedback gain values, \\( K \\).\n\n**Axes Labels and Units:**\n- The vertical axis shows the gain, labeled as \\( A_0 \\), which is dimensionless.\n- The horizontal axis represents frequency, denoted by \\( \\omega \\), usually in radians per second.\n- Both axes have a linear scale.\n\n**Overall Behavior and Trends:**\nThe plot features three curves corresponding to different \\( K \\) values: 0, 0.1, and 0.5. For \\( K = 0 \\), the gain starts at \\( A_0 \\) and remains steady across a range of frequencies before dropping sharply. For \\( K = 0.1 \\), the initial gain is lower, and the bandwidth is broader than for \\( K = 0 \\). For \\( K = 0.5 \\), the initial gain is even lower, and the bandwidth is the widest of the three.\n\n**Key Features and Technical Details:**\n- For \\( K = 0 \\), the gain starts at the maximum \\( A_0 \\) and decreases sharply after a specific frequency, indicating a narrow bandwidth.\n- As \\( K \\) increases to 0.1 and 0.5, the initial gain decreases proportionally, but the bandwidth expands, showcasing a trade-off between gain and bandwidth.\n- The plot illustrates the impact of feedback on the system's frequency response, with higher \\( K \\) values reducing gain but increasing bandwidth.\n\n**Annotations and Specific Data Points:**\n- The curves are labeled with their respective \\( K \\) values: \\( K = 0 \\), \\( K = 0.1 \\), and \\( K = 0.5 \\).\n- The graph does not provide specific numerical values for cutoff frequencies or other critical points, but the trend of decreasing gain and increasing bandwidth with higher \\( K \\) is evident.\n\nFigure 12.8\n\nExercise: Repeat the previous example for $K=1$.\n\nExample: Prove that the unity-gain bandwidth of the aforementioned system remains independent of $K$ if $1+K A_{0} \\gg 1$ and $K^{2} \\ll 1$.\n\nSolution: The magnitude of Eq. (12.19) is given by\n\n$$\n\\begin{equation*}\n\\left|\\frac{Y}{X}(j \\omega)\\right|=\\frac{\\frac{A_{0}}{1+K A_{0}}}{\\sqrt{1+\\frac{\\omega^{2}}{\\left(1+K A_{0}\\right)^{2} \\omega_{0}^{2}}}} \\tag{12.22}\n\\end{equation*}\n$$\n\nSetting this equal to unity and squaring both sides, we get\n\n$$\n\\begin{equation*}\n\\left(\\frac{A_{0}}{1+K A_{0}}\\right)^{2}=1+\\frac{\\omega_{u}^{2}}{\\left(1+K A_{0}\\right)^{2} \\omega_{0}^{2}} \\tag{12.23}\n\\end{equation*}\n$$\n\nwhere $\\omega_{u}$ represents the unity-gain bandwidth. Consequently,\n\n$$\n\\begin{align*}\n\\omega_{u} & =\\omega_{0} \\sqrt{A_{0}^{2}-\\left(1+K A_{0}\\right)^{2}}  \\tag{12.24}\\\\\n& \\approx \\omega_{0} \\sqrt{A_{0}^{2}-K^{2} A_{0}^{2}}  \\tag{12.25}\\\\\n& \\approx \\omega_{0} A_{0} \\tag{12.26}\n\\end{align*}\n$$\n\nThis equals the gain-bandwidth product of the open-loop system. Figure 12.9 illustrates these findings.\nimage_name:Figure 12.9\ndescription:The graph in Figure 12.9 is a Bode plot showing the frequency response of an open-loop system. The vertical axis is in decibels (dB) and represents the gain, while the horizontal axis is labeled with angular frequency (ω) and is likely on a logarithmic scale.\n\nAxes Labels and Units:\n- **Vertical Axis:** Gain in dB\n- **Horizontal Axis:** Frequency (ω), with key points marked as ω₀ and A₀ω₀.\n\nOverall Behavior and Trends:\n- The plot includes two curves indicating different gain responses.\n- Both curves start at a high gain, A₀, at low frequencies.\n- At the frequency ω₀, marked by a vertical dashed line, the gain begins to decline.\n- The gain continues to decrease with increasing frequency, reaching 0 dB at A₀ω₀.\n\nKey Features and Technical Details:\n- **Initial Gain Level:** Both curves start at A₀, representing the initial gain before roll-off.\n- **Cutoff Frequency:** The frequency ω₀ is a critical point where the gain starts to drop.\n- **Unity-Gain Bandwidth:** The point where the gain reaches 0 dB, at A₀ω₀, indicates the unity-gain bandwidth.\n\nAnnotations and Specific Data Points:\n- The graph highlights the transition from high gain to unity gain, demonstrating the effect of frequency on the system's gain.\n- The dashed line at ω₀ marks the beginning of the gain decrease.\n\nFigure 12.9\n\nExercise: If $A_{0}=1000, \\omega_{0}=2 \\pi \\times(10 \\mathrm{MHz})$, and $K=0.5$, compute the unity-gain bandwidth using Eqs. (12.24) and (12.26) and compare the results."
},
{
    "text": "Let's examine a single-pole open-loop amplifier characterized by the transfer function\n\n$$\n\\begin{equation*}\nA_{1}(s)=\\frac{A_{0}}{1+\\frac{s}{\\omega_{0}}} \\tag{12.16}\n\\end{equation*}\n$$\n\nHere, $A_{0}$ represents the low-frequency gain, and $\\omega_{0}$ signifies the -3 dB bandwidth. Observing from Eq. (12.2) that negative feedback reduces the low-frequency gain by a factor of $1+K A_{1}$, we aim to ascertain the resultant bandwidth enhancement. The closed-loop transfer function is derived by substituting Eq. (12.16) for $A_{1}$ in Eq. (12.2):\n\n$$\n\\begin{equation*}\n\\frac{Y}{X}=\\frac{\\frac{A_{0}}{1+\\frac{s}{\\omega_{0}}}}{1+K \\frac{A_{0}}{1+\\frac{s}{\\omega_{0}}}} \\tag{12.17}\n\\end{equation*}\n$$\n\nMultiplying both the numerator and the denominator by $1+s / \\omega_{0}$ results in\n\n$$\n\\begin{align*}\n\\frac{Y}{X}(s) & =\\frac{A_{0}}{1+K A_{0}+\\frac{s}{\\omega_{0}}}  \\tag{12.18}\\\\\n& =\\frac{\\frac{A_{0}}{1+K A_{0}}}{1+\\frac{s}{\\left(1+K A_{0}\\right) \\omega_{0}}} \\tag{12.19}\n\\end{align*}\n$$\n\nDrawing an analogy with Eq. (12.16), we deduce that the closed-loop system now exhibits:\n\n$$\n\\begin{align*}\n\\text { Closed-Loop Gain } & =\\frac{A_{0}}{1+K A_{0}}  \\tag{12.20}\\\\\n\\text { Closed-Loop Bandwidth } & =\\left(1+K A_{0}\\right) \\omega_{0} \\tag{12.21}\n\\end{align*}\n$$\n\nIn essence, the gain and bandwidth are scaled by the same factor but in opposing directions, maintaining a constant product.\n\nExample Plot the closed-loop frequency response as given by Eq. (12.19) for $K=0,0.1$, and 0.5. Assume $A_{0}=200$.\n\nSolution For $K=0$, the feedback is absent, and $Y / X$ reverts to $A_{1}(s)$ as per Eq. (12.16). For $K=0.1$, we have $1+K A_{0}=21$, noting that the gain decreases and the bandwidth increases by the same factor. Similarly, for $K=0.5,1+K A_{0}=101$, resulting in a proportional decrease in gain and increase in bandwidth. The outcomes are illustrated in Fig. 12.8.\nimage_name:Figure 12.8\ndescription:**Type of Graph and Function:**\nThe graph is a Bode plot depicting the closed-loop frequency response of a system. It illustrates the magnitude response as a function of frequency for various feedback gain values, \\( K \\).\n\n**Axes Labels and Units:**\n- The vertical axis represents the gain, denoted as \\( A_0 \\), which is dimensionless.\n- The horizontal axis represents frequency, denoted by \\( \\omega \\), typically in radians per second.\n- Both axes are linearly scaled.\n\n**Overall Behavior and Trends:**\nThe plot features three curves, each corresponding to different feedback gain values \\( K \\): 0, 0.1, and 0.5. For \\( K = 0 \\), the gain starts at \\( A_0 \\) and remains constant over a frequency range before sharply declining. For \\( K = 0.1 \\), the initial gain is lower, and the bandwidth is broader than for \\( K = 0 \\). For \\( K = 0.5 \\), the initial gain is even lower, and the bandwidth is the widest among the three.\n\n**Key Features and Technical Details:**\n- For \\( K = 0 \\), the gain starts at the maximum value \\( A_0 \\) and decreases sharply after a specific frequency, indicating a narrow bandwidth.\n- As \\( K \\) increases to 0.1 and 0.5, the initial gain decreases proportionally, but the bandwidth expands, highlighting a trade-off between gain and bandwidth.\n- The plot demonstrates the impact of feedback on the system's frequency response, with higher \\( K \\) values reducing gain but increasing bandwidth.\n\n**Annotations and Specific Data Points:**\n- The curves are labeled with their respective \\( K \\) values: \\( K = 0 \\), \\( K = 0.1 \\), and \\( K = 0.5 \\).\n- No specific numerical values for cutoff frequencies or other critical points are provided in the graph, but the trend of decreasing gain and increasing bandwidth with higher \\( K \\) is evident.\n\nFigure 12.8\n\nExercise Repeat the previous example for $K=1$.\n\nExample Demonstrate that the unity-gain bandwidth of the aforementioned system remains unaffected by $K$ if 12.6 $1+K A_{0} \\gg 1$ and $K^{2} \\ll 1$.\n\nSolution The magnitude of Eq. (12.19) is\n\n$$\n\\begin{equation*}\n\\left|\\frac{Y}{X}(j \\omega)\\right|=\\frac{\\frac{A_{0}}{1+K A_{0}}}{\\sqrt{1+\\frac{\\omega^{2}}{\\left(1+K A_{0}\\right)^{2} \\omega_{0}^{2}}}} \\tag{12.22}\n\\end{equation*}\n$$\n\nSetting this equal to unity and squaring both sides, we obtain\n\n$$\n\\begin{equation*}\n\\left(\\frac{A_{0}}{1+K A_{0}}\\right)^{2}=1+\\frac{\\omega_{u}^{2}}{\\left(1+K A_{0}\\right)^{2} \\omega_{0}^{2}} \\tag{12.23}\n\\end{equation*}\n$$\n\nwhere $\\omega_{u}$ represents the unity-gain bandwidth. Consequently,\n\n$$\n\\begin{align*}\n\\omega_{u} & =\\omega_{0} \\sqrt{A_{0}^{2}-\\left(1+K A_{0}\\right)^{2}}  \\tag{12.24}\\\\\n& \\approx \\omega_{0} \\sqrt{A_{0}^{2}-K^{2} A_{0}^{2}}  \\tag{12.25}\\\\\n& \\approx \\omega_{0} A_{0} \\tag{12.26}\n\\end{align*}\n$$\n\nwhich equals the gain-bandwidth product of the open-loop system. Figure 12.9 illustrates these findings.\nimage_name:Figure 12.9\ndescription:The graph shown in Figure 12.9 is a Bode plot representing the frequency response of an open-loop system. The vertical axis is labeled in decibels (dB) and represents the gain, while the horizontal axis is labeled with angular frequency (ω) and is likely on a logarithmic scale.\n\nAxes Labels and Units:\n- **Vertical Axis:** Gain in dB\n- **Horizontal Axis:** Frequency (ω), with key points marked as ω₀ and A₀ω₀.\n\nOverall Behavior and Trends:\n- The plot includes two curves indicating different gain responses.\n- Both curves start at a high gain level, A₀, at low frequencies.\n- At the frequency ω₀, indicated by a vertical dashed line, the gain begins to decline.\n- The gain continues to decrease with frequency, reaching 0 dB at A₀ω₀.\n\nKey Features and Technical Details:\n- **Initial Gain Level:** Both curves commence at A₀, representing the initial gain level before the roll-off.\n- **Cutoff Frequency:** The frequency ω₀ is a significant point where the gain starts to drop.\n- **Unity-Gain Bandwidth:** The point where the gain reaches 0 dB is at A₀ω₀, marking the unity-gain bandwidth.\n\nAnnotations and Specific Data Points:\n- The graph highlights the transition from high gain to unity gain, illustrating the effect of frequency on the system's gain.\n- The dashed line at ω₀ serves as a marker for the initial decrease in gain.\n\nFigure 12.9\n\nExercise If $A_{0}=1000, \\omega_{0}=2 \\pi \\times(10 \\mathrm{MHz})$, and $K=0.5$, compute the unity-gain bandwidth using Eqs. (12.24) and (12.26) and compare the results."
},
{
    "text": "As previously discussed, negative feedback reduces the sensitivity of the closed-loop gain to load resistance. This effect stems from the alteration of the output impedance due to feedback, which also modifies the input impedance. We will meticulously derive these effects in the subsequent sections, but it is beneficial to examine an example at this juncture.\n\nExample\n12.7\n\nFigure 12.10 illustrates a transistor-level implementation of the feedback circuit shown in Fig. 12.2. For simplicity, assume $\\lambda=0$ and $R_{1}+R_{2} \\gg R_{D}$. (a) Identify the four components of the feedback system. (b) Calculate the open-loop and closed-loop voltage gain. (c) Determine the open-loop and closed-loop I/O impedances.\nimage_name:Figure 12.10\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vin, D: Vout, G: g1}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: g1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\n]\nextrainfo:The circuit is a feedback amplifier with NMOS transistor M1 and resistors RD, R1, and R2. Vout is the output node, and Vin is the input node. R1 and R2 form a voltage divider feedback network.\n\nFigure 12.10\nSolution\n(a) By analogy with Fig. 12.10, we infer that the forward system (the main amplifier) comprises $M_{1}$ and $R_{D}$, forming a common-gate stage. Resistors $R_{1}$ and $R_{2}$ function as both the sensing mechanism and the feedback network, feeding back a signal equivalent to $V_{\\text {out }} R_{2} /\\left(R_{1}+R_{2}\\right)$ to the subtractor. Transistor $M_{1}$ itself acts as the subtractor since the small-signal drain current is proportional to the difference between the gate and source voltages:\n\n$$\n\\begin{equation*}\ni_{D}=g_{m}\\left(v_{G}-v_{S}\\right) \\tag{12.27}\n\\end{equation*}\n$$\n\n(b) The forward system provides a voltage gain of\n\n$$\n\\begin{equation*}\nA_{0} \\approx g_{m} R_{D} \\tag{12.28}\n\\end{equation*}\n$$\n\nbecause $R_{1}+R_{2}$ is sufficiently large that its loading effect on $R_{D}$ can be ignored. The closed-loop voltage gain is thus given by\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{A_{0}}{1+K A_{0}}  \\tag{12.29}\\\\\n& =\\frac{g_{m} R_{D}}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}} \\tag{12.30}\n\\end{align*}\n$$\n\nIt should be noted that the overall gain of this stage can also be derived by directly solving the circuit's equations, even without knowledge of feedback. However, employing feedback concepts not only provides deeper insight but also simplifies the analysis as circuits become more complex.\n(c) The open-loop I/O impedances are those of the CG stage:\n\n$$\n\\begin{align*}\nR_{i n, \\text { open }} & =\\frac{1}{g_{m}}  \\tag{12.31}\\\\\nR_{\\text {out }, \\text { open }} & =R_{D} \\tag{12.32}\n\\end{align*}\n$$\n\nAt this stage, we do not know how to derive the closed-loop I/O impedances from the open-loop parameters. Therefore, we simply solve the circuit. From Fig. 12.11(a), we observe that $R_{D}$ carries a current approximately equal to $i_{X}$ due to the assumption that $R_{1}+R_{2}$ is large. The drain voltage of $M_{1}$ is thus $i_{X} R_{D}$,\nresulting in a gate voltage of $+i_{X} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$. Transistor $M_{1}$ generates a drain current proportional to $v_{G S}$ :\n\n$$\n\\begin{align*}\ni_{D} & =g_{m} v_{G S}  \\tag{12.33}\\\\\n& =g_{m}\\left(\\frac{+i_{X} R_{D} R_{2}}{R_{1}+R_{2}}-v_{X}\\right) \\tag{12.34}\n\\end{align*}\n$$\n\nSince $i_{D}=-i_{X}$, Eq. (12.34) yields\n\n$$\n\\begin{equation*}\n\\frac{v_{X}}{i_{X}}=\\frac{1}{g_{m}}\\left(1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}\\right) . \\tag{12.35}\n\\end{equation*}\n$$\n\nThis indicates that the input resistance increases from $1 / g_{m}$ by a factor of $1+$ $g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$, the same factor by which the gain decreases.\nimage_name:Figure 12.11 (a)\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: d1}\nname: R1, type: Resistor, value: R1, ports: {N1: g1, N2: d1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: M1, type: NMOS, ports: {S: Vx, D: d1, G: g1}\nname: Vx, type: VoltageSource, value: vx, ports: {Np: Vx, Nn: GND}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with resistive load RD and a voltage divider bias network R1 and R2. The input voltage is Vx and the output is taken from the drain of M1.\n\nimage_name:Figure 12.11(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vx, G: g1}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vx}\nname: R1, type: Resistor, value: R1, ports: {N1: g1, N2: Vx}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: Vx, type: VoltageSource, value: vx, ports: {Np: Vx, Nn: GND}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with a resistive load RD and a voltage divider bias network consisting of R1 and R2. The input voltage is Vx, and the output is taken from the drain of M1. The circuit also includes a voltage-controlled current source g1.\n\nTo determine the output resistance, we write from Fig. 12.11(b),\n\n$$\n\\begin{equation*}\nv_{G S}=\\frac{R_{2}}{R_{1}+R_{2}} v_{X} \\tag{12.36}\n\\end{equation*}\n$$\n\nand hence\n\n$$\n\\begin{align*}\ni_{D} & =g_{m} v_{G S}  \\tag{12.37}\\\\\n& =g_{m} \\frac{R_{2}}{R_{1}+R_{2}} v_{X} \\tag{12.38}\n\\end{align*}\n$$\n\nNoting that, if $R_{1}+R_{2} \\gg R_{D}$, then $i_{X} \\approx i_{D}+v_{X} / R_{D}$, we obtain\n\n$$\n\\begin{equation*}\ni_{X} \\approx g_{m} \\frac{R_{2}}{R_{1}+R_{2}} v_{X}+\\frac{v_{X}}{R_{D}} . \\tag{12.39}\n\\end{equation*}\n$$\n\nIt follows that\n\n$$\n\\begin{equation*}\n\\frac{v_{X}}{i_{X}}=\\frac{R_{D}}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}} \\tag{12.40}\n\\end{equation*}\n$$\n\nThus, the output resistance decreases by the \"universal\" factor $1+g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$.\n\nThe above calculations of I/O impedances can be significantly streamlined by utilizing feedback concepts. As demonstrated by Eqs. (12.35) and (12.40), the factor $1+K A_{0}=1+g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$ plays a pivotal role. Our discussion of feedback circuits in this chapter will lay the groundwork for this principle.\n\nExercise In certain applications, the input and output impedances of an amplifier must both be equal to $50 \\Omega$. What relationship ensures that the input and output impedances of the above circuit are equal?\n\nSeveral questions may arise at this point. Do the input and output impedances always scale down and up, respectively, due to feedback? Is the modification of I/O impedances by feedback advantageous? We address one example here to illustrate a point and defer more rigorous answers to later sections.\n$\\begin{array}{cl}\\text { Example } & \\begin{array}{l}\\text { The common-gate stage of Fig. } 12.10 \\text { must drive a load resistance } \\\\ \\text { does the gain change (a) without feedback, (b) with feedback? }\\end{array}\\end{array}$ does the gain change (a) without feedback, (b) with feedback?\n\nSolution (a) Without feedback [Fig. 12.12(a)], the CG gain is $g_{m}\\left(R_{D} \\| R_{L}\\right)=g_{m} R_{D} / 3$. Thus, the gain decreases by a factor of three.\nimage_name:Figure 12.12\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vin, D: Vout, G: Vb}\nname: RD, type: Resistor, value: RD, ports: {N1: Vout, N2: VDD}\nname: RL, type: Resistor, value: RD/2, ports: {N1: Vout, N2: GND}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:This is a common-gate amplifier circuit with an NMOS transistor M1. The circuit is powered by a voltage source VDD and includes load resistors RD and RL. The output voltage Vout is taken across RL.\n\n(b) With feedback, we use Eq. (12.30) but account for the reduced open-loop gain of $g_{m} R_{D} / 3$ :\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{g_{m} R_{D} / 3}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D} / 3}  \\tag{12.41}\\\\\n& =\\frac{g_{m} R_{D}}{3+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}} \\tag{12.42}\n\\end{align*}\n$$\n\nFor instance, if $g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)=10$, then this result differs from the \"unloaded\" gain expression in Eq. (12.30) by approximately $18 \\%$. Feedback thus desensitizes the gain to load variations.\n\nExercise $\\quad$ Repeat the above example for $R_{L}=R_{D}$.\nimage_name:Figure 12.13 (a)\ndescription:**Type of Graph and Function:**\nFigure 12.13 (a) shows a nonlinear open-loop characteristic of an amplifier. It is a plot of the output signal \\( y \\) versus the input signal \\( x \\).\n\n**Axes Labels and Units:**\n- **X-axis:** Represents the input signal \\( x \\).\n- **Y-axis:** Represents the output signal \\( y \\).\n\n**Overall Behavior and Trends:**\nThe graph depicts a nonlinear relationship between the input and output signals. It starts at the origin and curves upwards, indicating that the gain changes with different input levels. The curve is concave down, showing diminishing returns in output as input increases.\n\n**Key Features and Technical Details:**\n- The slope of the curve at different points represents the small-signal gain of the amplifier.\n- At \\( x_1 \\), the gain is denoted as \\( A_1 \\), and at \\( x_2 \\), the gain is \\( A_2 \\).\n- The curve indicates a decrease in gain as the input level increases from \\( x_1 \\) to \\( x_2 \\).\n\n**Annotations and Specific Data Points:**\n- Dotted lines are used to mark the points \\( x_1 \\) and \\( x_2 \\) on the x-axis and their corresponding output levels on the y-axis.\n- The gains \\( A_1 \\) and \\( A_2 \\) are shown as the slopes of the tangent lines at \\( x_1 \\) and \\( x_2 \\), respectively.\n\nThis graph illustrates the nonlinearity in the amplifier's response, which can be improved by introducing feedback, as suggested by the context and the accompanying figure (b).\nimage_name:Figure 12.13 (b)\ndescription:Figure 12.13(b) illustrates the improvement in linearity of an amplifier due to feedback. The graph is a plot of input \\(x\\) versus output \\(y\\), showing two characteristics: open-loop and closed-loop.\n\n1. **Type of Graph and Function:**\n- The graph is a characteristic curve showing the relationship between input and output of an amplifier.\n- It demonstrates how feedback affects the linearity of the amplifier's response.\n\n2. **Axes Labels and Units:**\n- The horizontal axis represents the input \\(x\\), while the vertical axis represents the output \\(y\\).\n- No specific units are given, indicating a general characteristic analysis.\n\n3. **Overall Behavior and Trends:**\n- The open-loop characteristic (shown in a lighter curve) is nonlinear, with a decreasing slope as \\(x\\) increases, indicating decreasing gain.\n- The closed-loop characteristic (shown in a darker curve) is more linear, with a reduced slope compared to the open-loop, indicating a more consistent gain across the input range.\n\n4. **Key Features and Technical Details:**\n- The open-loop gain at point \\(x_1\\) is \\(A_1\\) and at \\(x_2\\) is \\(A_2\\), showing variability in gain.\n- The closed-loop gain is reduced to \\(\\frac{A_1}{1 + KA_1}\\) at \\(x_1\\) and \\(\\frac{A_2}{1 + KA_2}\\) at \\(x_2\\), where \\(K\\) is the feedback factor. This reduction in gain variability illustrates the stabilizing effect of feedback.\n\n5. **Annotations and Specific Data Points:**\n- The graph is annotated with gain values for both open-loop and closed-loop conditions at specific input points \\(x_1\\) and \\(x_2\\).\n- The labels clearly indicate the improvement in linearity and the effect of feedback on the gain values.\n\nFigure 12.13 (a) Nonlinear open-loop characteristic of an amplifier, (b) improvement in linearity due to feedback."
},
{
    "text": "As previously discussed, negative feedback reduces the sensitivity of the closed-loop gain to load resistance. This effect primarily stems from the alteration of the output impedance due to feedback, which also modifies the input impedance. We will meticulously formulate these effects in the subsequent sections, but it is beneficial to examine an example at this juncture.\n\nExample\n12.7\n\nFigure 12.10 illustrates a transistor-level implementation of the feedback circuit shown in Fig. 12.2. For simplicity, assume $\\lambda=0$ and $R_{1}+R_{2} \\gg R_{D}$. (a) Identify the four components of the feedback system. (b) Calculate the open-loop and closed-loop voltage gain. (c) Determine the open-loop and closed-loop I/O impedances.\nimage_name:Figure 12.10\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vin, D: Vout, G: g1}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: g1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\n]\nextrainfo:The circuit is a feedback amplifier with NMOS transistor M1 and resistors RD, R1, and R2. Vout is the output node, and Vin is the input node. R1 and R2 form a voltage divider feedback network.\n\nFigure 12.10\nSolution\n(a) By analogy with Fig. 12.10, we deduce that the forward system (the main amplifier) comprises $M_{1}$ and $R_{D}$, forming a common-gate stage. Resistors $R_{1}$ and $R_{2}$ function as both the sensing mechanism and the feedback network, returning a signal equivalent to $V_{\\text {out }} R_{2} /\\left(R_{1}+R_{2}\\right)$ to the subtractor. Transistor $M_{1}$ itself acts as the subtractor since the small-signal drain current is proportional to the difference between the gate and source voltages:\n\n$$\n\\begin{equation*}\ni_{D}=g_{m}\\left(v_{G}-v_{S}\\right) \\tag{12.27}\n\\end{equation*}\n$$\n\n(b) The forward system provides a voltage gain of\n\n$$\n\\begin{equation*}\nA_{0} \\approx g_{m} R_{D} \\tag{12.28}\n\\end{equation*}\n$$\n\ndue to the assumption that $R_{1}+R_{2}$ is sufficiently large to neglect its loading effect on $R_{D}$. The closed-loop voltage gain is thus given by\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{A_{0}}{1+K A_{0}}  \\tag{12.29}\\\\\n& =\\frac{g_{m} R_{D}}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}} \\tag{12.30}\n\\end{align*}\n$$\n\nIt should be noted that the overall gain of this stage can also be derived by directly solving the circuit's equations, even without knowledge of feedback. However, employing feedback concepts not only provides deeper insight but also simplifies the analysis, especially for more complex circuits.\n(c) The open-loop I/O impedances are those of the CG stage:\n\n$$\n\\begin{align*}\nR_{i n, \\text { open }} & =\\frac{1}{g_{m}}  \\tag{12.31}\\\\\nR_{\\text {out }, \\text { open }} & =R_{D} \\tag{12.32}\n\\end{align*}\n$$\n\nAt this stage, we do not know how to derive the closed-loop I/O impedances from the open-loop parameters. Therefore, we simply solve the circuit. From Fig. 12.11(a), we observe that $R_{D}$ carries a current approximately equal to $i_{X}$, given the assumption that $R_{1}+R_{2}$ is large. The drain voltage of $M_{1}$ is thus $i_{X} R_{D}$, leading to a gate voltage of $+i_{X} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$. Transistor $M_{1}$ generates a drain current proportional to $v_{G S}$ :\n\n$$\n\\begin{align*}\ni_{D} & =g_{m} v_{G S}  \\tag{12.33}\\\\\n& =g_{m}\\left(\\frac{+i_{X} R_{D} R_{2}}{R_{1}+R_{2}}-v_{X}\\right) \\tag{12.34}\n\\end{align*}\n$$\n\nSince $i_{D}=-i_{X}$, Eq. (12.34) yields\n\n$$\n\\begin{equation*}\n\\frac{v_{X}}{i_{X}}=\\frac{1}{g_{m}}\\left(1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}\\right) . \\tag{12.35}\n\\end{equation*}\n$$\n\nThus, the input resistance increases from $1 / g_{m}$ by a factor of $1+$ $g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$, the same factor by which the gain decreases.\nimage_name:Figure 12.11 (a)\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: d1}\nname: R1, type: Resistor, value: R1, ports: {N1: g1, N2: d1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: M1, type: NMOS, ports: {S: Vx, D: d1, G: g1}\nname: Vx, type: VoltageSource, value: vx, ports: {Np: Vx, Nn: GND}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with resistive load RD and a voltage divider bias network R1 and R2. The input voltage is Vx and the output is taken from the drain of M1.\n\nimage_name:Figure 12.11(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vx, G: g1}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vx}\nname: R1, type: Resistor, value: R1, ports: {N1: g1, N2: Vx}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: Vx, type: VoltageSource, value: vx, ports: {Np: Vx, Nn: GND}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with a resistive load RD and a voltage divider bias network consisting of R1 and R2. The input voltage is Vx, and the output is taken from the drain of M1. The circuit also includes a voltage-controlled current source g1.\n\nTo determine the output resistance, we write from Fig. 12.11(b),\n\n$$\n\\begin{equation*}\nv_{G S}=\\frac{R_{2}}{R_{1}+R_{2}} v_{X} \\tag{12.36}\n\\end{equation*}\n$$\n\nand hence\n\n$$\n\\begin{align*}\ni_{D} & =g_{m} v_{G S}  \\tag{12.37}\\\\\n& =g_{m} \\frac{R_{2}}{R_{1}+R_{2}} v_{X} \\tag{12.38}\n\\end{align*}\n$$\n\nNoting that, if $R_{1}+R_{2} \\gg R_{D}$, then $i_{X} \\approx i_{D}+v_{X} / R_{D}$, we obtain\n\n$$\n\\begin{equation*}\ni_{X} \\approx g_{m} \\frac{R_{2}}{R_{1}+R_{2}} v_{X}+\\frac{v_{X}}{R_{D}} . \\tag{12.39}\n\\end{equation*}\n$$\n\nIt follows that\n\n$$\n\\begin{equation*}\n\\frac{v_{X}}{i_{X}}=\\frac{R_{D}}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}} \\tag{12.40}\n\\end{equation*}\n$$\n\nThus, the output resistance decreases by the \"universal\" factor $1+g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$.\n\nThe above calculations of I/O impedances can be significantly simplified by using feedback concepts. As demonstrated by Eqs. (12.35) and (12.40), the factor $1+K A_{0}=1+g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$ plays a crucial role. Our discussion of feedback circuits in this chapter will lay the foundation for this principle.\n\nExercise In some applications, the input and output impedances of an amplifier must both be equal to $50 \\Omega$. What relationship ensures that the input and output impedances of the above circuit are equal?\n\nSeveral questions may arise at this point. Do the input and output impedances always scale down and up, respectively, due to feedback? Is the modification of I/O impedances by feedback advantageous? We address one example here to illustrate a key point and defer more detailed answers to later sections.\n$\\begin{array}{cl}\\text { Example } & \\begin{array}{l}\\text { The common-gate stage of Fig. } 12.10 \\text { must drive a load resistance } \\\\ \\text { does the gain change (a) without feedback, (b) with feedback? }\\end{array}\\end{array}$ does the gain change (a) without feedback, (b) with feedback?\n\nSolution (a) Without feedback [Fig. 12.12(a)], the CG gain is $g_{m}\\left(R_{D} \\| R_{L}\\right)=g_{m} R_{D} / 3$. Thus, the gain decreases by a factor of three.\nimage_name:Figure 12.12\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vin, D: Vout, G: Vb}\nname: RD, type: Resistor, value: RD, ports: {N1: Vout, N2: VDD}\nname: RL, type: Resistor, value: RD/2, ports: {N1: Vout, N2: GND}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:This is a common-gate amplifier circuit with an NMOS transistor M1. The circuit is powered by a voltage source VDD and includes load resistors RD and RL. The output voltage Vout is taken across RL.\n\n(b) With feedback, we use Eq. (12.30) but account for the reduced open-loop gain of $g_{m} R_{D} / 3$ :\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{g_{m} R_{D} / 3}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D} / 3}  \\tag{12.41}\\\\\n& =\\frac{g_{m} R_{D}}{3+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}} \\tag{12.42}\n\\end{align*}\n$$\n\nFor instance, if $g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)=10$, then this result differs from the \"unloaded\" gain expression in Eq. (12.30) by approximately $18 \\%$. Feedback thus reduces the sensitivity of the gain to load variations.\n\nExercise $\\quad$ Repeat the above example for $R_{L}=R_{D}$.\nimage_name:Figure 12.13 (a)\ndescription:**Type of Graph and Function:**\nFigure 12.13 (a) displays a nonlinear open-loop characteristic of an amplifier. It is a plot of the output signal \\( y \\) versus the input signal \\( x \\).\n\n**Axes Labels and Units:**\n- **X-axis:** Represents the input signal \\( x \\).\n- **Y-axis:** Represents the output signal \\( y \\).\n\n**Overall Behavior and Trends:**\nThe graph shows a nonlinear relationship between the input and output signals. It starts at the origin and curves upwards, indicating that the gain changes with different input levels. The curve is concave down, showing diminishing returns in output as input increases.\n\n**Key Features and Technical Details:**\n- The slope of the curve at different points represents the small-signal gain of the amplifier.\n- At \\( x_1 \\), the gain is \\( A_1 \\), and at \\( x_2 \\), the gain is \\( A_2 \\).\n- The curve indicates a decrease in gain as the input level increases from \\( x_1 \\) to \\( x_2 \\).\n\n**Annotations and Specific Data Points:**\n- Dotted lines are used to mark the points \\( x_1 \\) and \\( x_2 \\) on the x-axis and their corresponding output levels on the y-axis.\n- The gains \\( A_1 \\) and \\( A_2 \\) are shown as the slopes of the tangent lines at \\( x_1 \\) and \\( x_2 \\), respectively.\n\nThis graph illustrates the nonlinearity in the amplifier's response, which can be improved by introducing feedback, as suggested by the context and the accompanying figure (b).\nimage_name:Figure 12.13 (b)\ndescription:Figure 12.13(b) shows the improvement in linearity of an amplifier due to feedback. The graph plots input \\(x\\) versus output \\(y\\), depicting two characteristics: open-loop and closed-loop.\n\n1. **Type of Graph and Function:**\n- The graph is a characteristic curve illustrating the relationship between input and output of an amplifier.\n- It demonstrates the effect of feedback on the linearity of the amplifier's response.\n\n2. **Axes Labels and Units:**\n- The horizontal axis represents the input \\(x\\), while the vertical axis represents the output \\(y\\).\n- No specific units are given, indicating a general characteristic analysis.\n\n3. **Overall Behavior and Trends:**\n- The open-loop characteristic (shown in a lighter curve) is nonlinear, with a decreasing slope as \\(x\\) increases, indicating decreasing gain.\n- The closed-loop characteristic (shown in a darker curve) is more linear, with a reduced slope compared to the open-loop, indicating a more consistent gain across the input range.\n\n4. **Key Features and Technical Details:**\n- The open-loop gain at point \\(x_1\\) is \\(A_1\\) and at \\(x_2\\) is \\(A_2\\), showing variability in gain.\n- The closed-loop gain is reduced to \\(\\frac{A_1}{1 + KA_1}\\) at \\(x_1\\) and \\(\\frac{A_2}{1 + KA_2}\\) at \\(x_2\\), where \\(K\\) is the feedback factor. This reduction in gain variability illustrates the stabilizing effect of feedback.\n\n5. **Annotations and Specific Data Points:**\n- The graph is annotated with gain values for both open-loop and closed-loop conditions at specific input points \\(x_1\\) and \\(x_2\\).\n- The labels clearly indicate the improvement in linearity and the effect of feedback on the gain values.\n\nFigure 12.13 (a) Nonlinear open-loop characteristic of an amplifier, (b) improvement in linearity due to feedback."
},
{
    "text": "As previously discussed, negative feedback reduces the sensitivity of the closed-loop gain to load resistance. This effect primarily stems from the alteration of output impedance due to feedback, which also modifies the input impedance. We will meticulously formulate these effects in the subsequent sections, but it is beneficial to examine an example at this juncture.\n\nExample 12.7\n\nFigure 12.10 illustrates a transistor-level implementation of the feedback circuit shown in Fig. 12.2. For simplicity, assume $\\lambda=0$ and $R_{1}+R_{2} \\gg R_{D}$. (a) Identify the four components of the feedback system. (b) Calculate the open-loop and closed-loop voltage gain. (c) Determine the open-loop and closed-loop I/O impedances.\nimage_name: Figure 12.10\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vin, D: Vout, G: g1}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: g1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\n]\nextrainfo: The circuit is a feedback amplifier featuring an NMOS transistor M1 and resistors RD, R1, and R2. Vout is the output node, and Vin is the input node. R1 and R2 form a voltage divider feedback network.\n\nFigure 12.10\nSolution\n(a) By analogy with Fig. 12.10, we deduce that the forward system (the main amplifier) comprises $M_{1}$ and $R_{D}$, forming a common-gate stage. Resistors $R_{1}$ and $R_{2}$ function as both the sensing mechanism and the feedback network, returning a signal equivalent to $V_{\\text {out }} R_{2} /\\left(R_{1}+R_{2}\\right)$ to the subtractor. Transistor $M_{1}$ itself acts as the subtractor because the small-signal drain current is proportional to the difference between the gate and source voltages:\n\n$$\n\\begin{equation*}\ni_{D}=g_{m}\\left(v_{G}-v_{S}\\right) \\tag{12.27}\n\\end{equation*}\n$$\n\n(b) The forward system provides a voltage gain of\n\n$$\n\\begin{equation*}\nA_{0} \\approx g_{m} R_{D} \\tag{12.28}\n\\end{equation*}\n$$\n\ndue to the assumption that $R_{1}+R_{2}$ is sufficiently large to忽略 its loading effect on $R_{D}$. The closed-loop voltage gain is therefore given by\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{A_{0}}{1+K A_{0}}  \\tag{12.29}\\\\\n& =\\frac{g_{m} R_{D}}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}} \\tag{12.30}\n\\end{align*}\n$$\n\nIt should be noted that the overall gain of this stage can also be derived by directly solving the circuit equations, even without knowledge of feedback principles. However, employing feedback concepts not only offers significant insight but also simplifies the analysis, especially as circuits become more complex.\n(c) The open-loop I/O impedances are those of the CG stage:\n\n$$\n\\begin{align*}\nR_{i n, \\text { open }} & =\\frac{1}{g_{m}}  \\tag{12.31}\\\\\nR_{\\text {out }, \\text { open }} & =R_{D} \\tag{12.32}\n\\end{align*}\n$$\n\nAt this stage, we lack the knowledge to derive the closed-loop I/O impedances from the open-loop parameters. Thus, we simply solve the circuit. From Fig. 12.11(a), we observe that $R_{D}$ carries a current approximately equal to $i_{X}$, given the assumption that $R_{1}+R_{2}$ is large. The drain voltage of $M_{1}$ is therefore $i_{X} R_{D}$, leading to a gate voltage of $+i_{X} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$. Transistor $M_{1}$ generates a drain current proportional to $v_{G S}$ :\n\n$$\n\\begin{align*}\ni_{D} & =g_{m} v_{G S}  \\tag{12.33}\\\\\n& =g_{m}\\left(\\frac{+i_{X} R_{D} R_{2}}{R_{1}+R_{2}}-v_{X}\\right) \\tag{12.34}\n\\end{align*}\n$$\n\nSince $i_{D}=-i_{X}$, Eq. (12.34) results in\n\n$$\n\\begin{equation*}\n\\frac{v_{X}}{i_{X}}=\\frac{1}{g_{m}}\\left(1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}\\right) . \\tag{12.35}\n\\end{equation*}\n$$\n\nThus, the input resistance increases from $1 / g_{m}$ by a factor of $1+$ $g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$, the same factor by which the gain decreases.\nimage_name: Figure 12.11 (a)\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: d1}\nname: R1, type: Resistor, value: R1, ports: {N1: g1, N2: d1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: M1, type: NMOS, ports: {S: Vx, D: d1, G: g1}\nname: Vx, type: VoltageSource, value: vx, ports: {Np: Vx, Nn: GND}\n]\nextrainfo: The circuit is a common-source NMOS amplifier with a resistive load RD and a voltage divider bias network consisting of R1 and R2. The input voltage is Vx, and the output is taken from the drain of M1.\n\nimage_name: Figure 12.11(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vx, G: g1}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vx}\nname: R1, type: Resistor, value: R1, ports: {N1: g1, N2: Vx}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: Vx, type: VoltageSource, value: vx, ports: {Np: Vx, Nn: GND}\n]\nextrainfo: The circuit is a common-source NMOS amplifier with a resistive load RD and a voltage divider bias network consisting of R1 and R2. The input voltage is Vx, and the output is taken from the drain of M1. The circuit also includes a voltage-controlled current source g1.\n\nTo determine the output resistance, we write from Fig. 12.11(b),\n\n$$\n\\begin{equation*}\nv_{G S}=\\frac{R_{2}}{R_{1}+R_{2}} v_{X} \\tag{12.36}\n\\end{equation*}\n$$\n\nand hence\n\n$$\n\\begin{align*}\ni_{D} & =g_{m} v_{G S}  \\tag{12.37}\\\\\n& =g_{m} \\frac{R_{2}}{R_{1}+R_{2}} v_{X} \\tag{12.38}\n\\end{align*}\n$$\n\nNoting that, if $R_{1}+R_{2} \\gg R_{D}$, then $i_{X} \\approx i_{D}+v_{X} / R_{D}$, we obtain\n\n$$\n\\begin{equation*}\ni_{X} \\approx g_{m} \\frac{R_{2}}{R_{1}+R_{2}} v_{X}+\\frac{v_{X}}{R_{D}} . \\tag{12.39}\n\\end{equation*}\n$$\n\nIt follows that\n\n$$\n\\begin{equation*}\n\\frac{v_{X}}{i_{X}}=\\frac{R_{D}}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}} \\tag{12.40}\n\\end{equation*}\n$$\n\nThus, the output resistance decreases by the \"universal\" factor $1+g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$.\n\nThe above calculations of I/O impedances can be significantly simplified by utilizing feedback concepts. As demonstrated by Eqs. (12.35) and (12.40), the factor $1+K A_{0}=1+g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$ plays a pivotal role. Our discussion of feedback circuits in this chapter will lay the foundation for this principle.\n\nExercise In certain applications, both the input and output impedances of an amplifier must be equal to $50 \\Omega$. What relationship ensures that the input and output impedances of the above circuit are equal?\n\nThe reader may now have several questions. Do the input and output impedances always scale down and up, respectively, due to feedback? Is the modification of I/O impedances by feedback advantageous? We address one example here to illustrate a point and defer more comprehensive answers to later sections.\n$\\begin{array}{cl}\\text { Example } & \\begin{array}{l}\\text { Consider the common-gate stage of Fig. } 12.10 \\text { driving a load resistance. } \\\\ \\text { How does the gain change (a) without feedback, (b) with feedback? }\\end{array}\\end{array}$\n\nSolution (a) Without feedback [Fig. 12.12(a)], the CG gain is $g_{m}\\left(R_{D} \\| R_{L}\\right)=g_{m} R_{D} / 3$. Thus, the gain decreases by a factor of three.\nimage_name: Figure 12.12\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vin, D: Vout, G: Vb}\nname: RD, type: Resistor, value: RD, ports: {N1: Vout, N2: VDD}\nname: RL, type: Resistor, value: RD/2, ports: {N1: Vout, N2: GND}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo: This is a common-gate amplifier circuit with an NMOS transistor M1. The circuit is powered by a voltage source VDD and includes load resistors RD and RL. The output voltage Vout is taken across RL.\n\n(b) With feedback, we use Eq. (12.30) but account for the reduced open-loop gain of $g_{m} R_{D} / 3$ :\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{g_{m} R_{D} / 3}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D} / 3}  \\tag{12.41}\\\\\n& =\\frac{g_{m} R_{D}}{3+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}} \\tag{12.42}\n\\end{align*}\n$$\n\nFor instance, if $g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)=10$, then this result differs from the \"unloaded\" gain expression in Eq. (12.30) by approximately $18 \\%$. Feedback thus reduces the sensitivity of the gain to load variations.\n\nExercise Repeat the above example for $R_{L}=R_{D}$.\nimage_name: Figure 12.13 (a)\ndescription:**Type of Graph and Function:**\nFigure 12.13 (a) displays a nonlinear open-loop characteristic of an amplifier. It plots the output signal \\( y \\) against the input signal \\( x \\).\n\n**Axes Labels and Units:**\n- **X-axis:** Represents the input signal \\( x \\).\n- **Y-axis:** Represents the output signal \\( y \\).\n\n**Overall Behavior and Trends:**\nThe graph shows a nonlinear relationship between the input and output signals. It starts at the origin and curves upwards, indicating that the gain changes with different input levels. The curve is concave down, showing diminishing returns in output as input increases.\n\n**Key Features and Technical Details:**\n- The slope of the curve at various points represents the small-signal gain of the amplifier.\n- At \\( x_1 \\), the gain is \\( A_1 \\), and at \\( x_2 \\), the gain is \\( A_2 \\).\n- The curve demonstrates a decrease in gain as the input level increases from \\( x_1 \\) to \\( x_2 \\).\n\n**Annotations and Specific Data Points:**\n- Dotted lines mark the points \\( x_1 \\) and \\( x_2 \\) on the x-axis and their corresponding output levels on the y-axis.\n- The gains \\( A_1 \\) and \\( A_2 \\) are shown as the slopes of the tangent lines at \\( x_1 \\) and \\( x_2 \\), respectively.\n\nThis graph illustrates the nonlinearity in the amplifier's response, which can be improved by introducing feedback, as indicated by the accompanying figure (b).\nimage_name: Figure 12.13 (b)\ndescription:Figure 12.13(b) shows the improvement in linearity of an amplifier due to feedback. The graph plots input \\(x\\) versus output \\(y\\), comparing open-loop and closed-loop characteristics.\n\n1. **Type of Graph and Function:**\n- The graph illustrates the relationship between input and output of an amplifier.\n- It demonstrates the effect of feedback on the linearity of the amplifier's response.\n\n2. **Axes Labels and Units:**\n- The horizontal axis represents the input \\(x\\), while the vertical axis represents the output \\(y\\).\n- No specific units are provided, indicating a general characteristic analysis.\n\n3. **Overall Behavior and Trends:**\n- The open-loop characteristic (shown in a lighter curve) is nonlinear, with a decreasing slope as \\(x\\) increases, indicating reduced gain.\n- The closed-loop characteristic (shown in a darker curve) is more linear, with a reduced slope compared to the open-loop, indicating a more consistent gain across the input range.\n\n4. **Key Features and Technical Details:**\n- The open-loop gain at point \\(x_1\\) is \\(A_1\\) and at \\(x_2\\) is \\(A_2\\), showing variability in gain.\n- The closed-loop gain is reduced to \\(\\frac{A_1}{1 + KA_1}\\) at \\(x_1\\) and \\(\\frac{A_2}{1 + KA_2}\\) at \\(x_2\\), where \\(K\\) is the feedback factor. This reduction in gain variability highlights the stabilizing effect of feedback.\n\n5. **Annotations and Specific Data Points:**\n- The graph is annotated with gain values for both open-loop and closed-loop conditions at specific input points \\(x_1\\) and \\(x_2\\).\n- The labels clearly indicate the improvement in linearity and the effect of feedback on the gain values.\n\nFigure 12.13 (a) Nonlinear open-loop characteristic of an amplifier, (b) improvement in linearity due to feedback."
},
{
    "text": "As previously noted, negative feedback reduces the sensitivity of the closed-loop gain to load resistance. This effect primarily stems from the alteration of the output impedance due to feedback, which also modifies the input impedance. We will meticulously formulate these effects in the subsequent sections, but it is beneficial to examine an example at this juncture.\n\nExample 12.7\n\nFigure 12.10 illustrates a transistor-level implementation of the feedback circuit shown in Fig. 12.2. For simplicity, assume $\\lambda=0$ and $R_{1}+R_{2} \\gg R_{D}$. (a) Identify the four components of the feedback system. (b) Calculate the open-loop and closed-loop voltage gain. (c) Determine the open-loop and closed-loop I/O impedances.\nimage_name: Figure 12.10\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vin, D: Vout, G: g1}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: g1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\n]\nextrainfo: The circuit is a feedback amplifier featuring an NMOS transistor M1 and resistors RD, R1, and R2. Vout is the output node, and Vin is the input node. R1 and R2 form a voltage divider feedback network.\n\nFigure 12.10\nSolution\n(a) By analogy with Fig. 12.10, we infer that the forward system (the main amplifier) comprises $M_{1}$ and $R_{D}$, forming a common-gate stage. Resistors $R_{1}$ and $R_{2}$ function as both the sensing mechanism and the feedback network, returning a signal equivalent to $V_{\\text {out }} R_{2} /\\left(R_{1}+R_{2}\\right)$ to the subtractor. Transistor $M_{1}$ itself acts as the subtractor since the small-signal drain current is proportional to the difference between the gate and source voltages:\n\n$$\n\\begin{equation*}\ni_{D}=g_{m}\\left(v_{G}-v_{S}\\right) \\tag{12.27}\n\\end{equation*}\n$$\n\n(b) The forward system provides a voltage gain of\n\n$$\n\\begin{equation*}\nA_{0} \\approx g_{m} R_{D} \\tag{12.28}\n\\end{equation*}\n$$\n\ndue to the assumption that $R_{1}+R_{2}$ is sufficiently large to ignore its loading effect on $R_{D}$. The closed-loop voltage gain is thus given by\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{A_{0}}{1+K A_{0}}  \\tag{12.29}\\\\\n& =\\frac{g_{m} R_{D}}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}} \\tag{12.30}\n\\end{align*}\n$$\n\nIt is worth noting that the overall gain of this stage can also be derived by directly solving the circuit equations, even without knowledge of feedback principles. However, employing feedback concepts not only provides deeper insight but also simplifies the analysis, especially for more complex circuits.\n(c) The open-loop I/O impedances are those of the CG stage:\n\n$$\n\\begin{align*}\nR_{i n, \\text { open }} & =\\frac{1}{g_{m}}  \\tag{12.31}\\\\\nR_{\\text {out }, \\text { open }} & =R_{D} \\tag{12.32}\n\\end{align*}\n$$\n\nAt this stage, we lack the knowledge to derive the closed-loop I/O impedances from the open-loop parameters directly. Therefore, we simply solve the circuit. From Fig. 12.11(a), we observe that $R_{D}$ carries a current approximately equal to $i_{X}$, given the assumption that $R_{1}+R_{2}$ is large. The drain voltage of $M_{1}$ is thus $i_{X} R_{D}$, leading to a gate voltage of $+i_{X} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$. Transistor $M_{1}$ generates a drain current proportional to $v_{G S}$:\n\n$$\n\\begin{align*}\ni_{D} & =g_{m} v_{G S}  \\tag{12.33}\\\\\n& =g_{m}\\left(\\frac{+i_{X} R_{D} R_{2}}{R_{1}+R_{2}}-v_{X}\\right) \\tag{12.34}\n\\end{align*}\n$$\n\nSince $i_{D}=-i_{X}$, Eq. (12.34) results in\n\n$$\n\\begin{equation*}\n\\frac{v_{X}}{i_{X}}=\\frac{1}{g_{m}}\\left(1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}\\right) . \\tag{12.35}\n\\end{equation*}\n$$\n\nThis indicates that the input resistance increases from $1 / g_{m}$ by a factor of $1+$ $g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$, the same factor by which the gain decreases.\nimage_name: Figure 12.11 (a)\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: d1}\nname: R1, type: Resistor, value: R1, ports: {N1: g1, N2: d1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: M1, type: NMOS, ports: {S: Vx, D: d1, G: g1}\nname: Vx, type: VoltageSource, value: vx, ports: {Np: Vx, Nn: GND}\n]\nextrainfo: The circuit is a common-source NMOS amplifier with a resistive load RD and a voltage divider bias network consisting of R1 and R2. The input voltage is Vx, and the output is taken from the drain of M1.\n\nimage_name: Figure 12.11(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vx, G: g1}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vx}\nname: R1, type: Resistor, value: R1, ports: {N1: g1, N2: Vx}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: Vx, type: VoltageSource, value: vx, ports: {Np: Vx, Nn: GND}\n]\nextrainfo: The circuit is a common-source NMOS amplifier with a resistive load RD and a voltage divider bias network consisting of R1 and R2. The input voltage is Vx, and the output is taken from the drain of M1. The circuit also includes a voltage-controlled current source g1.\n\nTo determine the output resistance, we write from Fig. 12.11(b):\n\n$$\n\\begin{equation*}\nv_{G S}=\\frac{R_{2}}{R_{1}+R_{2}} v_{X} \\tag{12.36}\n\\end{equation*}\n$$\n\nand hence\n\n$$\n\\begin{align*}\ni_{D} & =g_{m} v_{G S}  \\tag{12.37}\\\\\n& =g_{m} \\frac{R_{2}}{R_{1}+R_{2}} v_{X} \\tag{12.38}\n\\end{align*}\n$$\n\nNoting that, if $R_{1}+R_{2} \\gg R_{D}$, then $i_{X} \\approx i_{D}+v_{X} / R_{D}$, we obtain\n\n$$\n\\begin{equation*}\ni_{X} \\approx g_{m} \\frac{R_{2}}{R_{1}+R_{2}} v_{X}+\\frac{v_{X}}{R_{D}} . \\tag{12.39}\n\\end{equation*}\n$$\n\nIt follows that\n\n$$\n\\begin{equation*}\n\\frac{v_{X}}{i_{X}}=\\frac{R_{D}}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}} \\tag{12.40}\n\\end{equation*}\n$$\n\nThus, the output resistance decreases by the \"universal\" factor $1+g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$.\n\nThe above impedance calculations can be significantly streamlined by employing feedback concepts. As demonstrated by Eqs. (12.35) and (12.40), the factor $1+K A_{0}=1+g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$ plays a pivotal role. Our discussion of feedback circuits in this chapter will lay the groundwork for this understanding.\n\nExercise In some applications, both the input and output impedances of an amplifier must be exactly $50 \\Omega$. What condition ensures that the input and output impedances of the above circuit are equal?\n\nSeveral questions may arise at this point. Do the input and output impedances always scale down and up, respectively, due to feedback? Is the modification of I/O impedances by feedback always beneficial? We address one example here to illustrate a key point and defer more detailed answers to later sections.\n$\\begin{array}{cl}\\text { Example } & \\begin{array}{l}\\text { Consider the common-gate stage of Fig. } 12.10 \\text { driving a load resistance. } \\\\ \\text { How does the gain change (a) without feedback, (b) with feedback? }\\end{array}\\end{array}$\n\nSolution (a) Without feedback [Fig. 12.12(a)], the CG gain is $g_{m}\\left(R_{D} \\| R_{L}\\right)=g_{m} R_{D} / 3$. Thus, the gain decreases by a factor of three.\nimage_name: Figure 12.12\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vin, D: Vout, G: Vb}\nname: RD, type: Resistor, value: RD, ports: {N1: Vout, N2: VDD}\nname: RL, type: Resistor, value: RD/2, ports: {N1: Vout, N2: GND}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo: This is a common-gate amplifier circuit with an NMOS transistor M1. The circuit is powered by a voltage source VDD and includes load resistors RD and RL. The output voltage Vout is taken across RL.\n\n(b) With feedback, we use Eq. (12.30) but account for the reduced open-loop gain of $g_{m} R_{D} / 3$:\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{g_{m} R_{D} / 3}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D} / 3}  \\tag{12.41}\\\\\n& =\\frac{g_{m} R_{D}}{3+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}} \\tag{12.42}\n\\end{align*}\n$$\n\nFor instance, if $g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)=10$, then this result differs from the \"unloaded\" gain expression in Eq. (12.30) by approximately $18 \\%$. Feedback thus reduces the gain's sensitivity to load variations.\n\nExercise Repeat the above example for $R_{L}=R_{D}$.\nimage_name: Figure 12.13 (a)\ndescription:**Type of Graph and Function:**\nFigure 12.13 (a) shows a nonlinear open-loop characteristic of an amplifier. It is a plot of the output signal \\( y \\) versus the input signal \\( x \\).\n\n**Axes Labels and Units:**\n- **X-axis:** Represents the input signal \\( x \\).\n- **Y-axis:** Represents the output signal \\( y \\).\n\n**Overall Behavior and Trends:**\nThe graph illustrates a nonlinear relationship between the input and output signals. It starts at the origin and curves upwards, indicating that the gain changes with different input levels. The curve is concave down, showing diminishing returns in output as input increases.\n\n**Key Features and Technical Details:**\n- The slope of the curve at different points represents the small-signal gain of the amplifier.\n- At \\( x_1 \\), the gain is denoted as \\( A_1 \\), and at \\( x_2 \\), the gain is \\( A_2 \\).\n- The curve indicates a decrease in gain as the input level increases from \\( x_1 \\) to \\( x_2 \\).\n\n**Annotations and Specific Data Points:**\n- Dotted lines are used to mark the points \\( x_1 \\) and \\( x_2 \\) on the x-axis and their corresponding output levels on the y-axis.\n- The gains \\( A_1 \\) and \\( A_2 \\) are shown as the slopes of the tangent lines at \\( x_1 \\) and \\( x_2 \\), respectively.\n\nThis graph illustrates the nonlinearity in the amplifier's response, which can be improved by introducing feedback, as suggested by the context and the accompanying figure (b).\nimage_name: Figure 12.13 (b)\ndescription:Figure 12.13(b) illustrates the improvement in linearity of an amplifier due to feedback. The graph is a plot of input \\(x\\) versus output \\(y\\), showing two characteristics: open-loop and closed-loop.\n\n1. **Type of Graph and Function:**\n- The graph is a characteristic curve showing the relationship between input and output of an amplifier.\n- It demonstrates how feedback affects the linearity of the amplifier's response.\n\n2. **Axes Labels and Units:**\n- The horizontal axis represents the input \\(x\\), while the vertical axis represents the output \\(y\\).\n- No specific units are given, indicating a general characteristic analysis.\n\n3. **Overall Behavior and Trends:**\n- The open-loop characteristic (shown in a lighter curve) is nonlinear, with a decreasing slope as \\(x\\) increases, indicating decreasing gain.\n- The closed-loop characteristic (shown in a darker curve) is more linear, with a reduced slope compared to the open-loop, indicating a more consistent gain across the input range.\n\n4. **Key Features and Technical Details:**\n- The open-loop gain at point \\(x_1\\) is \\(A_1\\) and at \\(x_2\\) is \\(A_2\\), showing variability in gain.\n- The closed-loop gain is reduced to \\(\\frac{A_1}{1 + KA_1}\\) at \\(x_1\\) and \\(\\frac{A_2}{1 + KA_2}\\) at \\(x_2\\), where \\(K\\) is the feedback factor. This reduction in gain variability illustrates the stabilizing effect of feedback.\n\n5. **Annotations and Specific Data Points:**\n- The graph is annotated with gain values for both open-loop and closed-loop conditions at specific input points \\(x_1\\) and \\(x_2\\).\n- The labels clearly indicate the improvement in linearity and the effect of feedback on the gain values.\n\nFigure 12.13 (a) Nonlinear open-loop characteristic of an amplifier, (b) improvement in linearity due to feedback."
},
{
    "text": "As previously noted, negative feedback reduces the sensitivity of the closed-loop gain to load resistance. This effect stems from the alteration of the output impedance due to feedback, which also modifies the input impedance. We will meticulously formulate these effects in the subsequent sections, but it is beneficial to examine an example at this juncture.\n\nExample 12.7\n\nFigure 12.10 illustrates a transistor-level implementation of the feedback circuit shown in Fig. 12.2. For simplicity, assume $\\lambda=0$ and $R_{1}+R_{2} \\gg R_{D}$. (a) Identify the four components of the feedback system. (b) Determine the open-loop and closed-loop voltage gain. (c) Determine the open-loop and closed-loop I/O impedances.\nimage_name: Figure 12.10\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vin, D: Vout, G: g1}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: g1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\n]\nextrainfo: The circuit is a feedback amplifier with NMOS transistor M1 and resistors RD, R1, and R2. Vout is the output node, and Vin is the input node. R1 and R2 form a voltage divider feedback network.\n\nFigure 12.10\nSolution\n(a) By analogy with Fig. 12.10, we infer that the forward system (the main amplifier) comprises $M_{1}$ and $R_{D}$, forming a common-gate stage. Resistors $R_{1}$ and $R_{2}$ act as both the sensing mechanism and the feedback network, returning a signal proportional to $V_{\\text {out }} R_{2} /\\left(R_{1}+R_{2}\\right)$ to the subtractor. Transistor $M_{1}$ itself serves as the subtractor, as the small-signal drain current is proportional to the difference between the gate and source voltages:\n\n$$\n\\begin{equation*}\ni_{D}=g_{m}\\left(v_{G}-v_{S}\\right) \\tag{12.27}\n\\end{equation*}\n$$\n\n(b) The forward system provides a voltage gain of\n\n$$\n\\begin{equation*}\nA_{0} \\approx g_{m} R_{D} \\tag{12.28}\n\\end{equation*}\n$$\n\nsince $R_{1}+R_{2}$ is sufficiently large that its loading effect on $R_{D}$ can be ignored. The closed-loop voltage gain is thus given by\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{A_{0}}{1+K A_{0}}  \\tag{12.29}\\\\\n& =\\frac{g_{m} R_{D}}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}} \\tag{12.30}\n\\end{align*}\n$$\n\nIt should be noted that the overall gain of this stage can also be derived by directly solving the circuit equations, even without knowledge of feedback principles. However, employing feedback concepts not only provides deeper insight but also simplifies the analysis, especially for more complex circuits.\n(c) The open-loop I/O impedances are those of the CG stage:\n\n$$\n\\begin{align*}\nR_{i n, \\text { open }} & =\\frac{1}{g_{m}}  \\tag{12.31}\\\\\nR_{\\text {out }, \\text { open }} & =R_{D} \\tag{12.32}\n\\end{align*}\n$$\n\nAt this stage, we do not know how to derive the closed-loop I/O impedances from the open-loop parameters. Therefore, we simply solve the circuit. From Fig. 12.11(a), we observe that $R_{D}$ carries a current approximately equal to $i_{X}$ due to the assumption that $R_{1}+R_{2}$ is large. The drain voltage of $M_{1}$ is thus $i_{X} R_{D}$, leading to a gate voltage of $+i_{X} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$. Transistor $M_{1}$ generates a drain current proportional to $v_{G S}$:\n\n$$\n\\begin{align*}\ni_{D} & =g_{m} v_{G S}  \\tag{12.33}\\\\\n& =g_{m}\\left(\\frac{+i_{X} R_{D} R_{2}}{R_{1}+R_{2}}-v_{X}\\right) \\tag{12.34}\n\\end{align*}\n$$\n\nSince $i_{D}=-i_{X}$, Eq. (12.34) yields\n\n$$\n\\begin{equation*}\n\\frac{v_{X}}{i_{X}}=\\frac{1}{g_{m}}\\left(1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}\\right) . \\tag{12.35}\n\\end{equation*}\n$$\n\nThus, the input resistance increases from $1 / g_{m}$ by a factor of $1+$ $g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$, the same factor by which the gain decreases.\nimage_name: Figure 12.11 (a)\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: d1}\nname: R1, type: Resistor, value: R1, ports: {N1: g1, N2: d1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: M1, type: NMOS, ports: {S: Vx, D: d1, G: g1}\nname: Vx, type: VoltageSource, value: vx, ports: {Np: Vx, Nn: GND}\n]\nextrainfo: The circuit is a common-source NMOS amplifier with resistive load RD and a voltage divider bias network R1 and R2. The input voltage is Vx and the output is taken from the drain of M1.\n\nimage_name: Figure 12.11(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vx, G: g1}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vx}\nname: R1, type: Resistor, value: R1, ports: {N1: g1, N2: Vx}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: Vx, type: VoltageSource, value: vx, ports: {Np: Vx, Nn: GND}\n]\nextrainfo: The circuit is a common-source NMOS amplifier with a resistive load RD and a voltage divider bias network consisting of R1 and R2. The input voltage is Vx, and the output is taken from the drain of M1. The circuit also includes a voltage-controlled current source g1.\n\nTo determine the output resistance, we write from Fig. 12.11(b),\n\n$$\n\\begin{equation*}\nv_{G S}=\\frac{R_{2}}{R_{1}+R_{2}} v_{X} \\tag{12.36}\n\\end{equation*}\n$$\n\nand hence\n\n$$\n\\begin{align*}\ni_{D} & =g_{m} v_{G S}  \\tag{12.37}\\\\\n& =g_{m} \\frac{R_{2}}{R_{1}+R_{2}} v_{X} \\tag{12.38}\n\\end{align*}\n$$\n\nNoting that, if $R_{1}+R_{2} \\gg R_{D}$, then $i_{X} \\approx i_{D}+v_{X} / R_{D}$, we obtain\n\n$$\n\\begin{equation*}\ni_{X} \\approx g_{m} \\frac{R_{2}}{R_{1}+R_{2}} v_{X}+\\frac{v_{X}}{R_{D}} . \\tag{12.39}\n\\end{equation*}\n$$\n\nIt follows that\n\n$$\n\\begin{equation*}\n\\frac{v_{X}}{i_{X}}=\\frac{R_{D}}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}} \\tag{12.40}\n\\end{equation*}\n$$\n\nThe output resistance thus decreases by the \"universal\" factor $1+g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$.\n\nThe above calculations of I/O impedances can be significantly simplified by using feedback concepts. As demonstrated by Eqs. (12.35) and (12.40), the factor $1+K A_{0}=1+g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$ plays a crucial role. Our discussion of feedback circuits in this chapter will lay the groundwork for this principle.\n\nExercise In some applications, the input and output impedances of an amplifier must both be equal to $50 \\Omega$. What relationship ensures that the input and output impedances of the above circuit are equal?\n\nThe reader may have several questions at this point. Do the input impedance and the output impedance always scale down and up, respectively, due to feedback? Is the modification of I/O impedances by feedback always desirable? We address one example here to illustrate a key point and defer more detailed answers to later sections.\n$\\begin{array}{cl}\\text { Example } & \\begin{array}{l}\\text { The common-gate stage of Fig. } 12.10 \\text { must drive a load resistance } \\\\ \\text { does the gain change (a) without feedback, (b) with feedback? }\\end{array}\\end{array}$ does the gain change (a) without feedback, (b) with feedback?\n\nSolution (a) Without feedback [Fig. 12.12(a)], the CG gain is $g_{m}\\left(R_{D} \\| R_{L}\\right)=g_{m} R_{D} / 3$. Thus, the gain decreases by a factor of three.\nimage_name: Figure 12.12\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vin, D: Vout, G: Vb}\nname: RD, type: Resistor, value: RD, ports: {N1: Vout, N2: VDD}\nname: RL, type: Resistor, value: RD/2, ports: {N1: Vout, N2: GND}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo: This is a common-gate amplifier circuit with an NMOS transistor M1. The circuit is powered by a voltage source VDD and includes load resistors RD and RL. The output voltage Vout is taken across RL.\n\n(b) With feedback, we use Eq. (12.30) but account for the reduced open-loop gain of $g_{m} R_{D} / 3$:\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{g_{m} R_{D} / 3}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D} / 3}  \\tag{12.41}\\\\\n& =\\frac{g_{m} R_{D}}{3+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}} \\tag{12.42}\n\\end{align*}\n$$\n\nFor instance, if $g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)=10$, then this result differs from the \"unloaded\" gain expression in Eq. (12.30) by approximately $18 \\%$. Feedback thus desensitizes the gain to load variations.\n\nExercise Repeat the above example for $R_{L}=R_{D}$.\nimage_name: Figure 12.13 (a)\ndescription:**Type of Graph and Function:**\nFigure 12.13 (a) displays a nonlinear open-loop characteristic of an amplifier. It is a plot of the output signal \\( y \\) versus the input signal \\( x \\).\n\n**Axes Labels and Units:**\n- **X-axis:** Represents the input signal \\( x \\).\n- **Y-axis:** Represents the output signal \\( y \\).\n\n**Overall Behavior and Trends:**\nThe graph shows a nonlinear relationship between the input and output signals. It starts at the origin and curves upwards, indicating that the gain changes with different input levels. The curve is concave down, showing diminishing returns in output as input increases.\n\n**Key Features and Technical Details:**\n- The slope of the curve at different points represents the small-signal gain of the amplifier.\n- At \\( x_1 \\), the gain is \\( A_1 \\), and at \\( x_2 \\), the gain is \\( A_2 \\).\n- The curve indicates a decrease in gain as the input level increases from \\( x_1 \\) to \\( x_2 \\).\n\n**Annotations and Specific Data Points:**\n- Dotted lines mark the points \\( x_1 \\) and \\( x_2 \\) on the x-axis and their corresponding output levels on the y-axis.\n- The gains \\( A_1 \\) and \\( A_2 \\) are shown as the slopes of the tangent lines at \\( x_1 \\) and \\( x_2 \\), respectively.\n\nThis graph illustrates the nonlinearity in the amplifier's response, which can be improved by introducing feedback, as suggested by the context and the accompanying figure (b).\nimage_name: Figure 12.13 (b)\ndescription:Figure 12.13(b) shows the improvement in linearity of an amplifier due to feedback. The graph plots input \\(x\\) versus output \\(y\\), displaying two characteristics: open-loop and closed-loop.\n\n1. **Type of Graph and Function:**\n- The graph is a characteristic curve showing the relationship between input and output of an amplifier.\n- It demonstrates the effect of feedback on the linearity of the amplifier's response.\n\n2. **Axes Labels and Units:**\n- The horizontal axis represents the input \\(x\\), while the vertical axis represents the output \\(y\\).\n- No specific units are given, indicating a general characteristic analysis.\n\n3. **Overall Behavior and Trends:**\n- The open-loop characteristic (shown in a lighter curve) is nonlinear, with a decreasing slope as \\(x\\) increases, indicating decreasing gain.\n- The closed-loop characteristic (shown in a darker curve) is more linear, with a reduced slope compared to the open-loop, indicating a more consistent gain across the input range.\n\n4. **Key Features and Technical Details:**\n- The open-loop gain at point \\(x_1\\) is \\(A_1\\) and at \\(x_2\\) is \\(A_2\\), showing variability in gain.\n- The closed-loop gain is reduced to \\(\\frac{A_1}{1 + KA_1}\\) at \\(x_1\\) and \\(\\frac{A_2}{1 + KA_2}\\) at \\(x_2\\), where \\(K\\) is the feedback factor. This reduction in gain variability illustrates the stabilizing effect of feedback.\n\n5. **Annotations and Specific Data Points:**\n- The graph is annotated with gain values for both open-loop and closed-loop conditions at specific input points \\(x_1\\) and \\(x_2\\).\n- The labels clearly indicate the improvement in linearity and the effect of feedback on the gain values.\n\nFigure 12.13 (a) Nonlinear open-loop characteristic of an amplifier, (b) improvement in linearity due to feedback."
},
{
    "text": "As previously noted, negative feedback reduces the sensitivity of the closed-loop gain to load resistance. This effect stems from the alteration of output impedance due to feedback, which also modifies the input impedance. We will meticulously derive these effects in the following sections, but it is beneficial to examine an example at this juncture.\n\nExample\n12.7\n\nFigure 12.10 illustrates a transistor-level implementation of the feedback circuit shown in Fig. 12.2. For simplicity, assume $\\lambda=0$ and $R_{1}+R_{2} \\gg R_{D}$. (a) Identify the four components of the feedback system. (b) Calculate the open-loop and closed-loop voltage gain. (c) Determine the open-loop and closed-loop I/O impedances.\nimage_name:Figure 12.10\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vin, D: Vout, G: g1}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: g1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\n]\nextrainfo:The circuit is a feedback amplifier with NMOS transistor M1 and resistors RD, R1, and R2. Vout is the output node, and Vin is the input node. R1 and R2 form a voltage divider feedback network.\n\nFigure 12.10\nSolution\n(a) By analogy with Fig. 12.10, we deduce that the forward system (the main amplifier) comprises $M_{1}$ and $R_{D}$, forming a common-gate stage. Resistors $R_{1}$ and $R_{2}$ function as both the sensing mechanism and the feedback network, returning a signal equivalent to $V_{\\text {out }} R_{2} /\\left(R_{1}+R_{2}\\right)$ to the subtractor. Transistor $M_{1}$ itself acts as the subtractor because the small-signal drain current is proportional to the difference between the gate and source voltages:\n\n$$\n\\begin{equation*}\ni_{D}=g_{m}\\left(v_{G}-v_{S}\\right) \\tag{12.27}\n\\end{equation*}\n$$\n\n(b) The forward system provides a voltage gain of\n\n$$\n\\begin{equation*}\nA_{0} \\approx g_{m} R_{D} \\tag{12.28}\n\\end{equation*}\n$$\n\nsince $R_{1}+R_{2}$ is sufficiently large that its loading effect on $R_{D}$ can be ignored. The closed-loop voltage gain is thus given by\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{A_{0}}{1+K A_{0}}  \\tag{12.29}\\\\\n& =\\frac{g_{m} R_{D}}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}} \\tag{12.30}\n\\end{align*}\n$$\n\nIt should be noted that the overall gain of this stage can also be derived by directly solving the circuit equations, even without knowledge of feedback principles. However, employing feedback concepts not only provides deeper insight but also simplifies the analysis, especially as circuits become more complex.\n(c) The open-loop I/O impedances are those of the CG stage:\n\n$$\n\\begin{align*}\nR_{i n, \\text { open }} & =\\frac{1}{g_{m}}  \\tag{12.31}\\\\\nR_{\\text {out }, \\text { open }} & =R_{D} \\tag{12.32}\n\\end{align*}\n$$\n\nAt this stage, we lack the knowledge to derive the closed-loop I/O impedances from the open-loop parameters directly. Therefore, we simply solve the circuit. From Fig. 12.11(a), we observe that $R_{D}$ carries a current approximately equal to $i_{X}$ due to the assumption that $R_{1}+R_{2}$ is large. The drain voltage of $M_{1}$ is thus $i_{X} R_{D}$, leading to a gate voltage of $+i_{X} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$. Transistor $M_{1}$ generates a drain current proportional to $v_{G S}$ :\n\n$$\n\\begin{align*}\ni_{D} & =g_{m} v_{G S}  \\tag{12.33}\\\\\n& =g_{m}\\left(\\frac{+i_{X} R_{D} R_{2}}{R_{1}+R_{2}}-v_{X}\\right) \\tag{12.34}\n\\end{align*}\n$$\n\nSince $i_{D}=-i_{X}$, Eq. (12.34) yields\n\n$$\n\\begin{equation*}\n\\frac{v_{X}}{i_{X}}=\\frac{1}{g_{m}}\\left(1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}\\right) . \\tag{12.35}\n\\end{equation*}\n$$\n\nThus, the input resistance increases from $1 / g_{m}$ by a factor of $1+$ $g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$, the same factor by which the gain decreases.\nimage_name:Figure 12.11 (a)\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: d1}\nname: R1, type: Resistor, value: R1, ports: {N1: g1, N2: d1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: M1, type: NMOS, ports: {S: Vx, D: d1, G: g1}\nname: Vx, type: VoltageSource, value: vx, ports: {Np: Vx, Nn: GND}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with resistive load RD and a voltage divider bias network R1 and R2. The input voltage is Vx and the output is taken from the drain of M1.\n\nimage_name:Figure 12.11(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vx, G: g1}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vx}\nname: R1, type: Resistor, value: R1, ports: {N1: g1, N2: Vx}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: Vx, type: VoltageSource, value: vx, ports: {Np: Vx, Nn: GND}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with a resistive load RD and a voltage divider bias network consisting of R1 and R2. The input voltage is Vx, and the output is taken from the drain of M1. The circuit also includes a voltage-controlled current source g1.\n\nTo determine the output resistance, we write from Fig. 12.11(b),\n\n$$\n\\begin{equation*}\nv_{G S}=\\frac{R_{2}}{R_{1}+R_{2}} v_{X} \\tag{12.36}\n\\end{equation*}\n$$\n\nand hence\n\n$$\n\\begin{align*}\ni_{D} & =g_{m} v_{G S}  \\tag{12.37}\\\\\n& =g_{m} \\frac{R_{2}}{R_{1}+R_{2}} v_{X} \\tag{12.38}\n\\end{align*}\n$$\n\nNoting that, if $R_{1}+R_{2} \\gg R_{D}$, then $i_{X} \\approx i_{D}+v_{X} / R_{D}$, we obtain\n\n$$\n\\begin{equation*}\ni_{X} \\approx g_{m} \\frac{R_{2}}{R_{1}+R_{2}} v_{X}+\\frac{v_{X}}{R_{D}} . \\tag{12.39}\n\\end{equation*}\n$$\n\nIt follows that\n\n$$\n\\begin{equation*}\n\\frac{v_{X}}{i_{X}}=\\frac{R_{D}}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}} \\tag{12.40}\n\\end{equation*}\n$$\n\nThe output resistance thus decreases by the \"universal\" factor $1+g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$.\n\nThe above calculations of I/O impedances can be significantly streamlined by using feedback concepts. As demonstrated by Eqs. (12.35) and (12.40), the factor $1+K A_{0}=1+g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$ plays a pivotal role. Our discussion of feedback circuits in this chapter will lay the foundation for this principle.\n\nExercise In some applications, both the input and output impedances of an amplifier must be equal to $50 \\Omega$. What relationship ensures that the input and output impedances of the above circuit are equal?\n\nThe reader may have several questions at this point. Do the input impedance and the output impedance always scale down and up, respectively, due to feedback? Is the modification of I/O impedances by feedback always beneficial? We address one example here to illustrate a key point and defer more detailed answers to later sections.\n$\\begin{array}{cl}\\text { Example } & \\begin{array}{l}\\text { The common-gate stage of Fig. } 12.10 \\text { must drive a load resistance } \\\\ \\text { does the gain change (a) without feedback, (b) with feedback? }\\end{array}\\end{array}$ does the gain change (a) without feedback, (b) with feedback?\n\nSolution (a) Without feedback [Fig. 12.12(a)], the CG gain is $g_{m}\\left(R_{D} \\| R_{L}\\right)=g_{m} R_{D} / 3$. Thus, the gain decreases by a factor of three.\nimage_name:Figure 12.12\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vin, D: Vout, G: Vb}\nname: RD, type: Resistor, value: RD, ports: {N1: Vout, N2: VDD}\nname: RL, type: Resistor, value: RD/2, ports: {N1: Vout, N2: GND}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:This is a common-gate amplifier circuit with an NMOS transistor M1. The circuit is powered by a voltage source VDD and includes load resistors RD and RL. The output voltage Vout is taken across RL.\n\n(b) With feedback, we use Eq. (12.30) but account for the reduced open-loop gain of $g_{m} R_{D} / 3$ :\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{g_{m} R_{D} / 3}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D} / 3}  \\tag{12.41}\\\\\n& =\\frac{g_{m} R_{D}}{3+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}} \\tag{12.42}\n\\end{align*}\n$$\n\nFor instance, if $g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)=10$, then this result differs from the \"unloaded\" gain expression in Eq. (12.30) by approximately $18 \\%$. Feedback thus reduces the gain's sensitivity to load variations.\n\nExercise $\\quad$ Repeat the above example for $R_{L}=R_{D}$.\nimage_name:Figure 12.13 (a)\ndescription:**Type of Graph and Function:**\nFigure 12.13 (a) shows a nonlinear open-loop characteristic of an amplifier. It is a plot of the output signal \\( y \\) versus the input signal \\( x \\).\n\n**Axes Labels and Units:**\n- **X-axis:** Represents the input signal \\( x \\), while the **Y-axis:** Represents the output signal \\( y \\).\n\n**Overall Behavior and Trends:**\nThe graph illustrates a nonlinear relationship between the input and output signals. It starts at the origin and curves upwards, indicating that the gain changes with different input levels. The curve is concave down, showing diminishing returns in output as input increases.\n\n**Key Features and Technical Details:**\n- The slope of the curve at different points represents the small-signal gain of the amplifier.\n- At \\( x_1 \\), the gain is \\( A_1 \\), and at \\( x_2 \\), the gain is \\( A_2 \\).\n- The curve indicates a decrease in gain as the input level increases from \\( x_1 \\) to \\( x_2 \\).\n\n**Annotations and Specific Data Points:**\n- Dotted lines are used to mark the points \\( x_1 \\) and \\( x_2 \\) on the x-axis and their corresponding output levels on the y-axis.\n- The gains \\( A_1 \\) and \\( A_2 \\) are shown as the slopes of the tangent lines at \\( x_1 \\) and \\( x_2 \\), respectively.\n\nThis graph illustrates the nonlinearity in the amplifier's response, which can be improved by introducing feedback, as suggested by the context and the accompanying figure (b).\nimage_name:Figure 12.13 (b)\ndescription:Figure 12.13(b) illustrates the improvement in linearity of an amplifier due to feedback. The graph is a plot of input \\(x\\) versus output \\(y\\), showing two characteristics: open-loop and closed-loop.\n\n1. **Type of Graph and Function:**\n- The graph is a characteristic curve showing the relationship between input and output of an amplifier.\n- It demonstrates how feedback affects the linearity of the amplifier's response.\n\n2. **Axes Labels and Units:**\n- The horizontal axis represents the input \\(x\\), while the vertical axis represents the output \\(y\\).\n- No specific units are given, indicating a general characteristic analysis.\n\n3. **Overall Behavior and Trends:**\n- The open-loop characteristic (shown in a lighter curve) is nonlinear, with a decreasing slope as \\(x\\) increases, indicating decreasing gain.\n- The closed-loop characteristic (shown in a darker curve) is more linear, with a reduced slope compared to the open-loop, indicating a more consistent gain across the input range.\n\n4. **Key Features and Technical Details:**\n- The open-loop gain at point \\(x_1\\) is \\(A_1\\) and at \\(x_2\\) is \\(A_2\\), showing variability in gain.\n- The closed-loop gain is reduced to \\(\\frac{A_1}{1 + KA_1}\\) at \\(x_1\\) and \\(\\frac{A_2}{1 + KA_2}\\) at \\(x_2\\), where \\(K\\) is the feedback factor. This reduction in gain variability illustrates the stabilizing effect of feedback.\n\n5. **Annotations and Specific Data Points:**\n- The graph is annotated with gain values for both open-loop and closed-loop conditions at specific input points \\(x_1\\) and \\(x_2\\).\n- The labels clearly indicate the improvement in linearity and the effect of feedback on the gain values.\n\nFigure 12.13 (a) Nonlinear open-loop characteristic of an amplifier, (b) improvement in linearity due to feedback."
},
{
    "text": "As previously noted, negative feedback reduces the sensitivity of the closed-loop gain to load resistance. This effect stems from the alteration of output impedance due to feedback, which also affects input impedance. We will meticulously derive these effects in the following sections, but it is beneficial to examine an example at this juncture.\n\nExample\n12.7\n\nFigure 12.10 illustrates a transistor-level implementation of the feedback circuit shown in Fig. 12.2. For simplicity, assume $\\lambda=0$ and $R_{1}+R_{2} \\gg R_{D}$. (a) Identify the four components of the feedback system. (b) Calculate the open-loop and closed-loop voltage gain. (c) Determine the open-loop and closed-loop I/O impedances.\nimage_name:Figure 12.10\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vin, D: Vout, G: g1}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: g1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\n]\nextrainfo:The circuit is a feedback amplifier with NMOS transistor M1 and resistors RD, R1, and R2. Vout is the output node, and Vin is the input node. R1 and R2 form a voltage divider feedback network.\n\nFigure 12.10\nSolution\n(a) By analogy with Fig. 12.10, we infer that the forward system (the main amplifier) comprises $M_{1}$ and $R_{D}$, forming a common-gate stage. Resistors $R_{1}$ and $R_{2}$ function as both the sensing mechanism and the feedback network, returning a signal equivalent to $V_{\\text {out }} R_{2} /\\left(R_{1}+R_{2}\\right)$ to the subtractor. Transistor $M_{1}$ itself acts as the subtractor since the small-signal drain current is proportional to the difference between the gate and source voltages:\n\n$$\n\\begin{equation*}\ni_{D}=g_{m}\\left(v_{G}-v_{S}\\right) \\tag{12.27}\n\\end{equation*}\n$$\n\n(b) The forward system provides a voltage gain of\n\n$$\n\\begin{equation*}\nA_{0} \\approx g_{m} R_{D} \\tag{12.28}\n\\end{equation*}\n$$\n\ndue to the assumption that $R_{1}+R_{2}$ is sufficiently large to neglect its loading effect on $R_{D}$. The closed-loop voltage gain is therefore given by\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{A_{0}}{1+K A_{0}}  \\tag{12.29}\\\\\n& =\\frac{g_{m} R_{D}}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}} \\tag{12.30}\n\\end{align*}\n$$\n\nIt is worth noting that the overall gain of this stage can also be derived by directly solving the circuit equations, even without knowledge of feedback principles. However, employing feedback concepts not only provides deeper insight but also simplifies the analysis, especially for more complex circuits.\n(c) The open-loop I/O impedances are those of the CG stage:\n\n$$\n\\begin{align*}\nR_{i n, \\text { open }} & =\\frac{1}{g_{m}}  \\tag{12.31}\\\\\nR_{\\text {out }, \\text { open }} & =R_{D} \\tag{12.32}\n\\end{align*}\n$$\n\nAt this stage, we lack the method to derive the closed-loop I/O impedances from the open-loop parameters. Thus, we directly solve the circuit. From Fig. 12.11(a), we observe that $R_{D}$ carries a current approximately equal to $i_{X}$, given the assumption that $R_{1}+R_{2}$ is large. The drain voltage of $M_{1}$ is hence $i_{X} R_{D}$,\nresulting in a gate voltage of $+i_{X} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$. Transistor $M_{1}$ generates a drain current proportional to $v_{G S}$ :\n\n$$\n\\begin{align*}\ni_{D} & =g_{m} v_{G S}  \\tag{12.33}\\\\\n& =g_{m}\\left(\\frac{+i_{X} R_{D} R_{2}}{R_{1}+R_{2}}-v_{X}\\right) \\tag{12.34}\n\\end{align*}\n$$\n\nSince $i_{D}=-i_{X}$, Eq. (12.34) yields\n\n$$\n\\begin{equation*}\n\\frac{v_{X}}{i_{X}}=\\frac{1}{g_{m}}\\left(1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}\\right) . \\tag{12.35}\n\\end{equation*}\n$$\n\nThis indicates that the input resistance increases from $1 / g_{m}$ by a factor of $1+$ $g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$, the same factor by which the gain decreases.\nimage_name:Figure 12.11 (a)\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: d1}\nname: R1, type: Resistor, value: R1, ports: {N1: g1, N2: d1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: M1, type: NMOS, ports: {S: Vx, D: d1, G: g1}\nname: Vx, type: VoltageSource, value: vx, ports: {Np: Vx, Nn: GND}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with resistive load RD and a voltage divider bias network R1 and R2. The input voltage is Vx and the output is taken from the drain of M1.\n\nimage_name:Figure 12.11(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vx, G: g1}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vx}\nname: R1, type: Resistor, value: R1, ports: {N1: g1, N2: Vx}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: Vx, type: VoltageSource, value: vx, ports: {Np: Vx, Nn: GND}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with a resistive load RD and a voltage divider bias network consisting of R1 and R2. The input voltage is Vx, and the output is taken from the drain of M1. The circuit also includes a voltage-controlled current source g1.\n\nTo determine the output resistance, we write from Fig. 12.11(b),\n\n$$\n\\begin{equation*}\nv_{G S}=\\frac{R_{2}}{R_{1}+R_{2}} v_{X} \\tag{12.36}\n\\end{equation*}\n$$\n\nand hence\n\n$$\n\\begin{align*}\ni_{D} & =g_{m} v_{G S}  \\tag{12.37}\\\\\n& =g_{m} \\frac{R_{2}}{R_{1}+R_{2}} v_{X} \\tag{12.38}\n\\end{align*}\n$$\n\nNoting that, if $R_{1}+R_{2} \\gg R_{D}$, then $i_{X} \\approx i_{D}+v_{X} / R_{D}$, we obtain\n\n$$\n\\begin{equation*}\ni_{X} \\approx g_{m} \\frac{R_{2}}{R_{1}+R_{2}} v_{X}+\\frac{v_{X}}{R_{D}} . \\tag{12.39}\n\\end{equation*}\n$$\n\nIt follows that\n\n$$\n\\begin{equation*}\n\\frac{v_{X}}{i_{X}}=\\frac{R_{D}}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}} \\tag{12.40}\n\\end{equation*}\n$$\n\nThus, the output resistance decreases by the \"universal\" factor $1+g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$.\n\nThe above calculations of I/O impedances can be significantly streamlined by utilizing feedback concepts. As demonstrated by Eqs. (12.35) and (12.40), the factor $1+K A_{0}=1+g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$ plays a pivotal role. Our discussion of feedback circuits in this chapter will lay the groundwork for this principle.\n\nExercise In some applications, the input and output impedances of an amplifier must both be equal to $50 \\Omega$. What relationship ensures that the input and output impedances of the above circuit are equal?\n\nThe reader may have several questions at this point. Do the input impedance and the output impedance always scale down and up, respectively? Is the modification of I/O impedances by feedback beneficial? We address one example here to illustrate a point and defer more comprehensive answers to later sections.\n$\\begin{array}{cl}\\text { Example } & \\begin{array}{l}\\text { The common-gate stage of Fig. } 12.10 \\text { must drive a load resistance } \\\\ \\text { does the gain change (a) without feedback, (b) with feedback? }\\end{array}\\end{array}$ does the gain change (a) without feedback, (b) with feedback?\n\nSolution (a) Without feedback [Fig. 12.12(a)], the CG gain is $g_{m}\\left(R_{D} \\| R_{L}\\right)=g_{m} R_{D} / 3$. Thus, the gain decreases by a factor of three.\nimage_name:Figure 12.12\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vin, D: Vout, G: Vb}\nname: RD, type: Resistor, value: RD, ports: {N1: Vout, N2: VDD}\nname: RL, type: Resistor, value: RD/2, ports: {N1: Vout, N2: GND}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:This is a common-gate amplifier circuit with an NMOS transistor M1. The circuit is powered by a voltage source VDD and includes load resistors RD and RL. The output voltage Vout is taken across RL.\n\n(b) With feedback, we use Eq. (12.30) but account for the reduced open-loop gain of $g_{m} R_{D} / 3$ :\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{g_{m} R_{D} / 3}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D} / 3}  \\tag{12.41}\\\\\n& =\\frac{g_{m} R_{D}}{3+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}} \\tag{12.42}\n\\end{align*}\n$$\n\nFor instance, if $g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)=10$, then this result differs from the \"unloaded\" gain expression in Eq. (12.30) by about $18 \\%$. Feedback thus reduces the gain's sensitivity to load variations.\n\nExercise $\\quad$ Repeat the above example for $R_{L}=R_{D}$.\nimage_name:Figure 12.13 (a)\ndescription:**Type of Graph and Function:**\nFigure 12.13 (a) shows a nonlinear open-loop characteristic of an amplifier. It is a plot of the output signal \\( y \\) versus the input signal \\( x \\).\n\n**Axes Labels and Units:**\n- **X-axis:** Represents the input signal \\( x \\).\n- **Y-axis:** Represents the output signal \\( y \\).\n\n**Overall Behavior and Trends:**\nThe graph depicts a nonlinear relationship between the input and output signals. It starts at the origin and curves upwards, indicating that the gain changes with different input levels. The curve is concave down, showing diminishing returns in output as input increases.\n\n**Key Features and Technical Details:**\n- The slope of the curve at different points represents the small-signal gain of the amplifier.\n- At \\( x_1 \\), the gain is denoted as \\( A_1 \\), and at \\( x_2 \\), the gain is \\( A_2 \\).\n- The curve indicates a decrease in gain as the input level increases from \\( x_1 \\) to \\( x_2 \\).\n\n**Annotations and Specific Data Points:**\n- Dotted lines are used to mark the points \\( x_1 \\) and \\( x_2 \\) on the x-axis and their corresponding output levels on the y-axis.\n- The gains \\( A_1 \\) and \\( A_2 \\) are shown as the slopes of the tangent lines at \\( x_1 \\) and \\( x_2 \\), respectively.\n\nThis graph illustrates the nonlinearity in the amplifier's response, which can be improved by introducing feedback, as suggested by the context and the accompanying figure (b).\nimage_name:Figure 12.13 (b)\ndescription:Figure 12.13(b) illustrates the improvement in linearity of an amplifier due to feedback. The graph is a plot of input \\(x\\) versus output \\(y\\), showing two characteristics: open-loop and closed-loop.\n\n1. **Type of Graph and Function:**\n- The graph is a characteristic curve showing the relationship between input and output of an amplifier.\n- It demonstrates how feedback affects the linearity of the amplifier's response.\n\n2. **Axes Labels and Units:**\n- The horizontal axis represents the input \\(x\\), while the vertical axis represents the output \\(y\\).\n- No specific units are given, indicating a general characteristic analysis.\n\n3. **Overall Behavior and Trends:**\n- The open-loop characteristic (shown in a lighter curve) is nonlinear, with a decreasing slope as \\(x\\) increases, indicating decreasing gain.\n- The closed-loop characteristic (shown in a darker curve) is more linear, with a reduced slope compared to the open-loop, indicating a more consistent gain across the input range.\n\n4. **Key Features and Technical Details:**\n- The open-loop gain at point \\(x_1\\) is \\(A_1\\) and at \\(x_2\\) is \\(A_2\\), showing variability in gain.\n- The closed-loop gain is reduced to \\(\\frac{A_1}{1 + KA_1}\\) at \\(x_1\\) and \\(\\frac{A_2}{1 + KA_2}\\) at \\(x_2\\), where \\(K\\) is the feedback factor. This reduction in gain variability illustrates the stabilizing effect of feedback.\n\n5. **Annotations and Specific Data Points:**\n- The graph is annotated with gain values for both open-loop and closed-loop conditions at specific input points \\(x_1\\) and \\(x_2\\).\n- The labels clearly indicate the improvement in linearity and the effect of feedback on the gain values.\n\nFigure 12.13 (a) Nonlinear open-loop characteristic of an amplifier, (b) improvement in linearity due to feedback."
},
{
    "text": "As previously discussed, negative feedback reduces the sensitivity of the closed-loop gain to load resistance. This effect is fundamentally due to the alteration of the output impedance caused by feedback, which also modifies the input impedance. We will meticulously formulate these effects in the following sections, but it is beneficial to examine an example at this juncture.\n\nExample\n12.7\n\nFigure 12.10 illustrates a transistor-level implementation of the feedback circuit shown in Fig. 12.2. For simplicity, assume $\\lambda=0$ and $R_{1}+R_{2} \\gg R_{D}$. (a) Identify the four components of the feedback system. (b) Calculate the open-loop and closed-loop voltage gain. (c) Determine the open-loop and closed-loop I/O impedances.\nimage_name:Figure 12.10\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vin, D: Vout, G: g1}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: g1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\n]\nextrainfo:The circuit is a feedback amplifier with NMOS transistor M1 and resistors RD, R1, and R2. Vout is the output node, and Vin is the input node. R1 and R2 form a voltage divider feedback network.\n\nFigure 12.10\nSolution\n(a) By analogy with Fig. 12.10, we infer that the forward system (the main amplifier) comprises $M_{1}$ and $R_{D}$, forming a common-gate stage. Resistors $R_{1}$ and $R_{2}$ function as both the sensing mechanism and the feedback network, returning a signal equivalent to $V_{\\text {out }} R_{2} /\\left(R_{1}+R_{2}\\right)$ to the subtractor. Transistor $M_{1}$ itself acts as the subtractor because the small-signal drain current is proportional to the difference between the gate and source voltages:\n\n$$\n\\begin{equation*}\ni_{D}=g_{m}\\left(v_{G}-v_{S}\\right) \\tag{12.27}\n\\end{equation*}\n$$\n\n(b) The forward system provides a voltage gain of\n\n$$\n\\begin{equation*}\nA_{0} \\approx g_{m} R_{D} \\tag{12.28}\n\\end{equation*}\n$$\n\ndue to the assumption that $R_{1}+R_{2}$ is sufficiently large to忽略 its loading effect on $R_{D}$. The closed-loop voltage gain is thus expressed as\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{A_{0}}{1+K A_{0}}  \\tag{12.29}\\\\\n& =\\frac{g_{m} R_{D}}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}} \\tag{12.30}\n\\end{align*}\n$$\n\nIt should be noted that the overall gain of this stage can also be derived by directly solving the circuit's equations, even without knowledge of feedback principles. However, employing feedback concepts not only provides deeper insight but also simplifies the analysis, especially as circuits become more complex.\n(c) The open-loop I/O impedances correspond to those of the CG stage:\n\n$$\n\\begin{align*}\nR_{i n, \\text { open }} & =\\frac{1}{g_{m}}  \\tag{12.31}\\\\\nR_{\\text {out }, \\text { open }} & =R_{D} \\tag{12.32}\n\\end{align*}\n$$\n\nAt this stage, we lack the knowledge to derive the closed-loop I/O impedances from the open-loop parameters directly. Therefore, we simply analyze the circuit. From Fig. 12.11(a), we observe that $R_{D}$ carries a current approximately equal to $i_{X}$, given the assumption that $R_{1}+R_{2}$ is large. The drain voltage of $M_{1}$ is thus $i_{X} R_{D}$, resulting in a gate voltage of $+i_{X} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$. Transistor $M_{1}$ produces a drain current proportional to $v_{G S}$ :\n\n$$\n\\begin{align*}\ni_{D} & =g_{m} v_{G S}  \\tag{12.33}\\\\\n& =g_{m}\\left(\\frac{+i_{X} R_{D} R_{2}}{R_{1}+R_{2}}-v_{X}\\right) \\tag{12.34}\n\\end{align*}\n$$\n\nSince $i_{D}=-i_{X}$, Eq. (12.34) yields\n\n$$\n\\begin{equation*}\n\\frac{v_{X}}{i_{X}}=\\frac{1}{g_{m}}\\left(1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}\\right) . \\tag{12.35}\n\\end{equation*}\n$$\n\nThis indicates that the input resistance increases from $1 / g_{m}$ by a factor of $1+$ $g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$, the same factor by which the gain decreases.\nimage_name:Figure 12.11 (a)\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: d1}\nname: R1, type: Resistor, value: R1, ports: {N1: g1, N2: d1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: M1, type: NMOS, ports: {S: Vx, D: d1, G: g1}\nname: Vx, type: VoltageSource, value: vx, ports: {Np: Vx, Nn: GND}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with resistive load RD and a voltage divider bias network R1 and R2. The input voltage is Vx and the output is taken from the drain of M1.\n\nimage_name:Figure 12.11(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vx, G: g1}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vx}\nname: R1, type: Resistor, value: R1, ports: {N1: g1, N2: Vx}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: Vx, type: VoltageSource, value: vx, ports: {Np: Vx, Nn: GND}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with a resistive load RD and a voltage divider bias network consisting of R1 and R2. The input voltage is Vx, and the output is taken from the drain of M1. The circuit also includes a voltage-controlled current source g1.\n\nTo determine the output resistance, we write from Fig. 12.11(b),\n\n$$\n\\begin{equation*}\nv_{G S}=\\frac{R_{2}}{R_{1}+R_{2}} v_{X} \\tag{12.36}\n\\end{equation*}\n$$\n\nand hence\n\n$$\n\\begin{align*}\ni_{D} & =g_{m} v_{G S}  \\tag{12.37}\\\\\n& =g_{m} \\frac{R_{2}}{R_{1}+R_{2}} v_{X} \\tag{12.38}\n\\end{align*}\n$$\n\nNoting that, if $R_{1}+R_{2} \\gg R_{D}$, then $i_{X} \\approx i_{D}+v_{X} / R_{D}$, we obtain\n\n$$\n\\begin{equation*}\ni_{X} \\approx g_{m} \\frac{R_{2}}{R_{1}+R_{2}} v_{X}+\\frac{v_{X}}{R_{D}} . \\tag{12.39}\n\\end{equation*}\n$$\n\nIt follows that\n\n$$\n\\begin{equation*}\n\\frac{v_{X}}{i_{X}}=\\frac{R_{D}}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}} \\tag{12.40}\n\\end{equation*}\n$$\n\nThe output resistance thus decreases by the \"universal\" factor $1+g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$.\n\nThe computation of I/O impedances can be significantly simplified by utilizing feedback concepts. As demonstrated by Eqs. (12.35) and (12.40), the factor $1+K A_{0}=1+g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$ plays a pivotal role. Our discussion of feedback circuits in this chapter will lay the foundation for understanding this principle.\n\nExercise In certain applications, both the input and output impedances of an amplifier must be exactly $50 \\Omega$. What relationship ensures that the input and output impedances of the aforementioned circuit are equal?\n\nSeveral questions may arise at this point. Do the input and output impedances always scale down and up, respectively, due to feedback? Is the modification of I/O impedances by feedback advantageous? We address one example here to illustrate a key point and defer more comprehensive answers to later sections.\n$\\begin{array}{cl}\\text { Example } & \\begin{array}{l}\\text { The common-gate stage of Fig. } 12.10 \\text { must drive a load resistance } \\\\ \\text { does the gain change (a) without feedback, (b) with feedback? }\\end{array}\\end{array}$ does the gain change (a) without feedback, (b) with feedback?\n\nSolution (a) Without feedback [Fig. 12.12(a)], the CG gain is $g_{m}\\left(R_{D} \\| R_{L}\\right)=g_{m} R_{D} / 3$. Thus, the gain decreases by a factor of three.\nimage_name:Figure 12.12\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vin, D: Vout, G: Vb}\nname: RD, type: Resistor, value: RD, ports: {N1: Vout, N2: VDD}\nname: RL, type: Resistor, value: RD/2, ports: {N1: Vout, N2: GND}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:This is a common-gate amplifier circuit with an NMOS transistor M1. The circuit is powered by a voltage source VDD and includes load resistors RD and RL. The output voltage Vout is taken across RL.\n\n(b) With feedback, we use Eq. (12.30) but account for the reduced open-loop gain of $g_{m} R_{D} / 3$ :\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{g_{m} R_{D} / 3}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D} / 3}  \\tag{12.41}\\\\\n& =\\frac{g_{m} R_{D}}{3+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}} \\tag{12.42}\n\\end{align*}\n$$\n\nFor instance, if $g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)=10$, then this result deviates from the \"unloaded\" gain expression in Eq. (12.30) by approximately $18 \\%$. Feedback thus reduces the sensitivity of the gain to load variations.\n\nExercise $\\quad$ Repeat the above example for $R_{L}=R_{D}$.\nimage_name:Figure 12.13 (a)\ndescription:**Type of Graph and Function:**\nFigure 12.13 (a) shows a nonlinear open-loop characteristic of an amplifier. It is a plot of the output signal \\( y \\) versus the input signal \\( x \\).\n\n**Axes Labels and Units:**\n- **X-axis:** Represents the input signal \\( x \\).\n- **Y-axis:** Represents the output signal \\( y \\).\n\n**Overall Behavior and Trends:**\nThe graph displays a nonlinear relationship between the input and output signals. It starts at the origin and curves upwards, indicating that the gain changes with different input levels. The curve is concave down, showing diminishing returns in output as input increases.\n\n**Key Features and Technical Details:**\n- The slope of the curve at different points represents the small-signal gain of the amplifier.\n- At \\( x_1 \\), the gain is denoted as \\( A_1 \\), and at \\( x_2 \\), the gain is \\( A_2 \\).\n- The curve indicates a decrease in gain as the input level increases from \\( x_1 \\) to \\( x_2 \\).\n\n**Annotations and Specific Data Points:**\n- Dotted lines are used to mark the points \\( x_1 \\) and \\( x_2 \\) on the x-axis and their corresponding output levels on the y-axis.\n- The gains \\( A_1 \\) and \\( A_2 \\) are shown as the slopes of the tangent lines at \\( x_1 \\) and \\( x_2 \\), respectively.\n\nThis graph illustrates the nonlinearity in the amplifier's response, which can be improved by introducing feedback, as suggested by the context and the accompanying figure (b).\nimage_name:Figure 12.13 (b)\ndescription:Figure 12.13(b) illustrates the improvement in linearity of an amplifier due to feedback. The graph is a plot of input \\(x\\) versus output \\(y\\), showing two characteristics: open-loop and closed-loop.\n\n1. **Type of Graph and Function:**\n- The graph is a characteristic curve showing the relationship between input and output of an amplifier.\n- It demonstrates how feedback affects the linearity of the amplifier's response.\n\n2. **Axes Labels and Units:**\n- The horizontal axis represents the input \\(x\\), while the vertical axis represents the output \\(y\\).\n- No specific units are given, indicating a general characteristic analysis.\n\n3. **Overall Behavior and Trends:**\n- The open-loop characteristic (shown in a lighter curve) is nonlinear, with a decreasing slope as \\(x\\) increases, indicating decreasing gain.\n- The closed-loop characteristic (shown in a darker curve) is more linear, with a reduced slope compared to the open-loop, indicating a more consistent gain across the input range.\n\n4. **Key Features and Technical Details:**\n- The open-loop gain at point \\(x_1\\) is \\(A_1\\) and at \\(x_2\\) is \\(A_2\\), showing variability in gain.\n- The closed-loop gain is reduced to \\(\\frac{A_1}{1 + KA_1}\\) at \\(x_1\\) and \\(\\frac{A_2}{1 + KA_2}\\) at \\(x_2\\), where \\(K\\) is the feedback factor. This reduction in gain variability illustrates the stabilizing effect of feedback.\n\n5. **Annotations and Specific Data Points:**\n- The graph is annotated with gain values for both open-loop and closed-loop conditions at specific input points \\(x_1\\) and \\(x_2\\).\n- The labels clearly indicate the improvement in linearity and the effect of feedback on the gain values.\n\nFigure 12.13 (a) Nonlinear open-loop characteristic of an amplifier, (b) improvement in linearity due to feedback."
},
{
    "text": "As previously discussed, negative feedback reduces the sensitivity of the closed-loop gain to load resistance. This effect stems from the alteration of output impedance due to feedback, which also modifies the input impedance. We will meticulously formulate these effects in the subsequent sections, but it is beneficial to examine an example at this juncture.\n\nExample\n12.7\n\nFigure 12.10 illustrates a transistor-level implementation of the feedback circuit shown in Fig. 12.2. For simplicity, assume $\\lambda=0$ and $R_{1}+R_{2} \\gg R_{D}$. (a) Identify the four components of the feedback system. (b) Calculate the open-loop and closed-loop voltage gain. (c) Determine the open-loop and closed-loop I/O impedances.\nimage_name:Figure 12.10\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vin, D: Vout, G: g1}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: g1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\n]\nextrainfo:The circuit is a feedback amplifier with NMOS transistor M1 and resistors RD, R1, and R2. Vout is the output node, and Vin is the input node. R1 and R2 form a voltage divider feedback network.\n\nFigure 12.10\nSolution\n(a) By analogy with Fig. 12.10, we infer that the forward system (the main amplifier) comprises $M_{1}$ and $R_{D}$, forming a common-gate stage. Resistors $R_{1}$ and $R_{2}$ act as both the sensing mechanism and the feedback network, returning a signal equivalent to $V_{\\text {out }} R_{2} /\\left(R_{1}+R_{2}\\right)$ to the subtractor. Transistor $M_{1}$ itself functions as the subtractor since the small-signal drain current is proportional to the difference between the gate and source voltages:\n\n$$\n\\begin{equation*}\ni_{D}=g_{m}\\left(v_{G}-v_{S}\\right) \\tag{12.27}\n\\end{equation*}\n$$\n\n(b) The forward system provides a voltage gain of\n\n$$\n\\begin{equation*}\nA_{0} \\approx g_{m} R_{D} \\tag{12.28}\n\\end{equation*}\n$$\n\ndue to the assumption that $R_{1}+R_{2}$ is sufficiently large to neglect its loading effect on $R_{D}$. The closed-loop voltage gain is thus given by\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{A_{0}}{1+K A_{0}}  \\tag{12.29}\\\\\n& =\\frac{g_{m} R_{D}}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}} \\tag{12.30}\n\\end{align*}\n$$\n\nIt is worth noting that the overall gain of this stage can also be derived by directly solving the circuit's equations, even without knowledge of feedback principles. However, employing feedback concepts not only provides deeper insight but also simplifies the analysis, especially for more complex circuits.\n(c) The open-loop I/O impedances are those of the CG stage:\n\n$$\n\\begin{align*}\nR_{i n, \\text { open }} & =\\frac{1}{g_{m}}  \\tag{12.31}\\\\\nR_{\\text {out }, \\text { open }} & =R_{D} \\tag{12.32}\n\\end{align*}\n$$\n\nAt this stage, we lack the knowledge to derive the closed-loop I/O impedances from the open-loop parameters directly. Therefore, we simply solve the circuit. From Fig. 12.11(a), we observe that $R_{D}$ carries a current approximately equal to $i_{X}$, given the assumption that $R_{1}+R_{2}$ is large. The drain voltage of $M_{1}$ is thus $i_{X} R_{D}$, leading to a gate voltage of $+i_{X} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$. Transistor $M_{1}$ generates a drain current proportional to $v_{G S}$ :\n\n$$\n\\begin{align*}\ni_{D} & =g_{m} v_{G S}  \\tag{12.33}\\\\\n& =g_{m}\\left(\\frac{+i_{X} R_{D} R_{2}}{R_{1}+R_{2}}-v_{X}\\right) \\tag{12.34}\n\\end{align*}\n$$\n\nSince $i_{D}=-i_{X}$, Eq. (12.34) yields\n\n$$\n\\begin{equation*}\n\\frac{v_{X}}{i_{X}}=\\frac{1}{g_{m}}\\left(1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}\\right) . \\tag{12.35}\n\\end{equation*}\n$$\n\nThis indicates that the input resistance increases from $1 / g_{m}$ by a factor of $1+$ $g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$, the same factor by which the gain decreases.\nimage_name:Figure 12.11 (a)\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: d1}\nname: R1, type: Resistor, value: R1, ports: {N1: g1, N2: d1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: M1, type: NMOS, ports: {S: Vx, D: d1, G: g1}\nname: Vx, type: VoltageSource, value: vx, ports: {Np: Vx, Nn: GND}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with resistive load RD and a voltage divider bias network R1 and R2. The input voltage is Vx and the output is taken from the drain of M1.\n\nimage_name:Figure 12.11(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vx, G: g1}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vx}\nname: R1, type: Resistor, value: R1, ports: {N1: g1, N2: Vx}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: Vx, type: VoltageSource, value: vx, ports: {Np: Vx, Nn: GND}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with a resistive load RD and a voltage divider bias network consisting of R1 and R2. The input voltage is Vx, and the output is taken from the drain of M1. The circuit also includes a voltage-controlled current source g1.\n\nTo determine the output resistance, we write from Fig. 12.11(b),\n\n$$\n\\begin{equation*}\nv_{G S}=\\frac{R_{2}}{R_{1}+R_{2}} v_{X} \\tag{12.36}\n\\end{equation*}\n$$\n\nand hence\n\n$$\n\\begin{align*}\ni_{D} & =g_{m} v_{G S}  \\tag{12.37}\\\\\n& =g_{m} \\frac{R_{2}}{R_{1}+R_{2}} v_{X} \\tag{12.38}\n\\end{align*}\n$$\n\nNoting that, if $R_{1}+R_{2} \\gg R_{D}$, then $i_{X} \\approx i_{D}+v_{X} / R_{D}$, we obtain\n\n$$\n\\begin{equation*}\ni_{X} \\approx g_{m} \\frac{R_{2}}{R_{1}+R_{2}} v_{X}+\\frac{v_{X}}{R_{D}} . \\tag{12.39}\n\\end{equation*}\n$$\n\nIt follows that\n\n$$\n\\begin{equation*}\n\\frac{v_{X}}{i_{X}}=\\frac{R_{D}}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}} \\tag{12.40}\n\\end{equation*}\n$$\n\nThus, the output resistance decreases by the \"universal\" factor $1+g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$.\n\nThe computation of I/O impedances can be significantly simplified by using feedback concepts. As demonstrated by Eqs. (12.35) and (12.40), the factor $1+K A_{0}=1+g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$ plays a crucial role. Our discussion of feedback circuits in this chapter will lay the groundwork for this principle.\n\nExercise In some applications, the input and output impedances of an amplifier must both be equal to $50 \\Omega$. What relationship ensures that the input and output impedances of the above circuit are equal?\n\nSeveral questions may arise at this point. Do the input and output impedances always scale down and up, respectively, due to feedback? Is the modification of I/O impedances by feedback advantageous? We address one example here to illustrate a key point and defer more comprehensive answers to later sections.\n$\\begin{array}{cl}\\text { Example } & \\begin{array}{l}\\text { The common-gate stage of Fig. } 12.10 \\text { must drive a load resistance } \\\\ \\text { does the gain change (a) without feedback, (b) with feedback? }\\end{array}\\end{array}$ does the gain change (a) without feedback, (b) with feedback?\n\nSolution (a) Without feedback [Fig. 12.12(a)], the CG gain is $g_{m}\\left(R_{D} \\| R_{L}\\right)=g_{m} R_{D} / 3$. Thus, the gain decreases by a factor of three.\nimage_name:Figure 12.12\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vin, D: Vout, G: Vb}\nname: RD, type: Resistor, value: RD, ports: {N1: Vout, N2: VDD}\nname: RL, type: Resistor, value: RD/2, ports: {N1: Vout, N2: GND}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:This is a common-gate amplifier circuit with an NMOS transistor M1. The circuit is powered by a voltage source VDD and includes load resistors RD and RL. The output voltage Vout is taken across RL.\n\n(b) With feedback, we use Eq. (12.30) but account for the reduced open-loop gain of $g_{m} R_{D} / 3$ :\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{g_{m} R_{D} / 3}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D} / 3}  \\tag{12.41}\\\\\n& =\\frac{g_{m} R_{D}}{3+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}} \\tag{12.42}\n\\end{align*}\n$$\n\nFor instance, if $g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)=10$, then this result differs from the \"unloaded\" gain expression in Eq. (12.30) by about $18 \\%$. Feedback thus reduces the gain's sensitivity to load variations.\n\nExercise $\\quad$ Repeat the above example for $R_{L}=R_{D}$.\nimage_name:Figure 12.13 (a)\ndescription:**Type of Graph and Function:**\nFigure 12.13 (a) shows a nonlinear open-loop characteristic of an amplifier. It is a plot of the output signal \\( y \\) versus the input signal \\( x \\).\n\n**Axes Labels and Units:**\n- **X-axis:** Represents the input signal \\( x \\).\n- **Y-axis:** Represents the output signal \\( y \\).\n\n**Overall Behavior and Trends:**\nThe graph depicts a nonlinear relationship between the input and output signals. It starts at the origin and curves upwards, indicating that the gain changes with different input levels. The curve is concave down, showing diminishing returns in output as input increases.\n\n**Key Features and Technical Details:**\n- The slope of the curve at different points represents the small-signal gain of the amplifier.\n- At \\( x_1 \\), the gain is denoted as \\( A_1 \\), and at \\( x_2 \\), the gain is \\( A_2 \\).\n- The curve indicates a decrease in gain as the input level increases from \\( x_1 \\) to \\( x_2 \\).\n\n**Annotations and Specific Data Points:**\n- Dotted lines are used to mark the points \\( x_1 \\) and \\( x_2 \\) on the x-axis and their corresponding output levels on the y-axis.\n- The gains \\( A_1 \\) and \\( A_2 \\) are shown as the slopes of the tangent lines at \\( x_1 \\) and \\( x_2 \\), respectively.\n\nThis graph illustrates the nonlinearity in the amplifier's response, which can be improved by introducing feedback, as suggested by the context and the accompanying figure (b).\nimage_name:Figure 12.13 (b)\ndescription:Figure 12.13(b) illustrates the improvement in linearity of an amplifier due to feedback. The graph is a plot of input \\(x\\) versus output \\(y\\), showing two characteristics: open-loop and closed-loop.\n\n1. **Type of Graph and Function:**\n- The graph is a characteristic curve showing the relationship between input and output of an amplifier.\n- It demonstrates how feedback affects the linearity of the amplifier's response.\n\n2. **Axes Labels and Units:**\n- The horizontal axis represents the input \\(x\\), while the vertical axis represents the output \\(y\\).\n- No specific units are given, indicating a general characteristic analysis.\n\n3. **Overall Behavior and Trends:**\n- The open-loop characteristic (shown in a lighter curve) is nonlinear, with a decreasing slope as \\(x\\) increases, indicating decreasing gain.\n- The closed-loop characteristic (shown in a darker curve) is more linear, with a reduced slope compared to the open-loop, indicating a more consistent gain across the input range.\n\n4. **Key Features and Technical Details:**\n- The open-loop gain at point \\(x_1\\) is \\(A_1\\) and at \\(x_2\\) is \\(A_2\\), showing variability in gain.\n- The closed-loop gain is reduced to \\(\\frac{A_1}{1 + KA_1}\\) at \\(x_1\\) and \\(\\frac{A_2}{1 + KA_2}\\) at \\(x_2\\), where \\(K\\) is the feedback factor. This reduction in gain variability illustrates the stabilizing effect of feedback.\n\n5. **Annotations and Specific Data Points:**\n- The graph is annotated with gain values for both open-loop and closed-loop conditions at specific input points \\(x_1\\) and \\(x_2\\).\n- The labels clearly indicate the improvement in linearity and the effect of feedback on the gain values.\n\nFigure 12.13 (a) Nonlinear open-loop characteristic of an amplifier, (b) improvement in linearity due to feedback."
},
{
    "text": "As previously discussed, negative feedback reduces the sensitivity of the closed-loop gain to load resistance. This effect stems from the alteration of output impedance due to feedback, which also modifies the input impedance. We will meticulously derive these effects in the subsequent sections, but it is beneficial to examine an example now.\n\nExample\n12.7\n\nFigure 12.10 illustrates a transistor-level implementation of the feedback circuit shown in Fig. 12.2. For simplicity, assume $\\lambda=0$ and $R_{1}+R_{2} \\gg R_{D}$. (a) Identify the four components of the feedback system. (b) Calculate the open-loop and closed-loop voltage gain. (c) Determine the open-loop and closed-loop I/O impedances.\nimage_name:Figure 12.10\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vin, D: Vout, G: g1}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: g1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\n]\nextrainfo:The circuit is a feedback amplifier with NMOS transistor M1 and resistors RD, R1, and R2. Vout is the output node, and Vin is the input node. R1 and R2 form a voltage divider feedback network.\n\nFigure 12.10\nSolution\n(a) By analogy with Fig. 12.10, we infer that the forward system (the main amplifier) comprises $M_{1}$ and $R_{D}$, forming a common-gate stage. Resistors $R_{1}$ and $R_{2}$ act as both the sensing mechanism and the feedback network, feeding back a signal equal to $V_{\\text {out }} R_{2} /\\left(R_{1}+R_{2}\\right)$ to the subtractor. Transistor $M_{1}$ itself serves as the subtractor, as the small-signal drain current is proportional to the difference between the gate and source voltages:\n\n$$\n\\begin{equation*}\ni_{D}=g_{m}\\left(v_{G}-v_{S}\\right) \\tag{12.27}\n\\end{equation*}\n$$\n\n(b) The forward system provides a voltage gain of\n\n$$\n\\begin{equation*}\nA_{0} \\approx g_{m} R_{D} \\tag{12.28}\n\\end{equation*}\n$$\n\nsince $R_{1}+R_{2}$ is sufficiently large that its loading effect on $R_{D}$ can be ignored. The closed-loop voltage gain is thus given by\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{A_{0}}{1+K A_{0}}  \\tag{12.29}\\\\\n& =\\frac{g_{m} R_{D}}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}} \\tag{12.30}\n\\end{align*}\n$$\n\nIt is worth noting that the overall gain of this stage can also be derived by directly solving the circuit equations, even without knowledge of feedback principles. However, employing feedback concepts not only provides deeper insight but also simplifies the analysis, especially for more complex circuits.\n(c) The open-loop I/O impedances are those of the CG stage:\n\n$$\n\\begin{align*}\nR_{i n, \\text { open }} & =\\frac{1}{g_{m}}  \\tag{12.31}\\\\\nR_{\\text {out }, \\text { open }} & =R_{D} \\tag{12.32}\n\\end{align*}\n$$\n\nAt this stage, we lack the knowledge to directly derive the closed-loop I/O impedances from the open-loop parameters. Therefore, we simply analyze the circuit. From Fig. 12.11(a), we observe that $R_{D}$ carries a current approximately equal to $i_{X}$, given that $R_{1}+R_{2}$ is assumed large. The drain voltage of $M_{1}$ is thus $i_{X} R_{D}$, leading to a gate voltage of $+i_{X} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$. Transistor $M_{1}$ generates a drain current proportional to $v_{G S}$ :\n\n$$\n\\begin{align*}\ni_{D} & =g_{m} v_{G S}  \\tag{12.33}\\\\\n& =g_{m}\\left(\\frac{+i_{X} R_{D} R_{2}}{R_{1}+R_{2}}-v_{X}\\right) \\tag{12.34}\n\\end{align*}\n$$\n\nSince $i_{D}=-i_{X}$, Eq. (12.34) yields\n\n$$\n\\begin{equation*}\n\\frac{v_{X}}{i_{X}}=\\frac{1}{g_{m}}\\left(1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}\\right) . \\tag{12.35}\n\\end{equation*}\n$$\n\nThus, the input resistance increases from $1 / g_{m}$ by a factor of $1+$ $g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$, the same factor by which the gain decreases.\nimage_name:Figure 12.11 (a)\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: d1}\nname: R1, type: Resistor, value: R1, ports: {N1: g1, N2: d1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: M1, type: NMOS, ports: {S: Vx, D: d1, G: g1}\nname: Vx, type: VoltageSource, value: vx, ports: {Np: Vx, Nn: GND}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with resistive load RD and a voltage divider bias network R1 and R2. The input voltage is Vx and the output is taken from the drain of M1.\n\nimage_name:Figure 12.11(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vx, G: g1}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vx}\nname: R1, type: Resistor, value: R1, ports: {N1: g1, N2: Vx}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: Vx, type: VoltageSource, value: vx, ports: {Np: Vx, Nn: GND}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with a resistive load RD and a voltage divider bias network consisting of R1 and R2. The input voltage is Vx, and the output is taken from the drain of M1. The circuit also includes a voltage-controlled current source g1.\n\nTo determine the output resistance, we write from Fig. 12.11(b),\n\n$$\n\\begin{equation*}\nv_{G S}=\\frac{R_{2}}{R_{1}+R_{2}} v_{X} \\tag{12.36}\n\\end{equation*}\n$$\n\nand hence\n\n$$\n\\begin{align*}\ni_{D} & =g_{m} v_{G S}  \\tag{12.37}\\\\\n& =g_{m} \\frac{R_{2}}{R_{1}+R_{2}} v_{X} \\tag{12.38}\n\\end{align*}\n$$\n\nNoting that, if $R_{1}+R_{2} \\gg R_{D}$, then $i_{X} \\approx i_{D}+v_{X} / R_{D}$, we obtain\n\n$$\n\\begin{equation*}\ni_{X} \\approx g_{m} \\frac{R_{2}}{R_{1}+R_{2}} v_{X}+\\frac{v_{X}}{R_{D}} . \\tag{12.39}\n\\end{equation*}\n$$\n\nIt follows that\n\n$$\n\\begin{equation*}\n\\frac{v_{X}}{i_{X}}=\\frac{R_{D}}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}} \\tag{12.40}\n\\end{equation*}\n$$\n\nThe output resistance thus decreases by the \"universal\" factor $1+g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$.\n\nThe above calculations of I/O impedances can be significantly streamlined by using feedback concepts. As demonstrated by Eqs. (12.35) and (12.40), the factor $1+K A_{0}=1+g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$ plays a pivotal role. Our discussion of feedback circuits in this chapter will lay the groundwork for this understanding.\n\nExercise In some applications, the input and output impedances of an amplifier must both be equal to $50 \\Omega$. What relationship ensures that the input and output impedances of the above circuit are equal?\n\nThe reader may have several questions at this juncture. Do the input impedance and the output impedance always scale down and up, respectively, due to feedback? Is the modification of I/O impedances by feedback always desirable? We address one example here to illustrate a point and defer more rigorous answers to later sections.\n$\\begin{array}{cl}\\text { Example } & \\begin{array}{l}\\text { The common-gate stage of Fig. } 12.10 \\text { must drive a load resistance } \\\\ \\text { does the gain change (a) without feedback, (b) with feedback? }\\end{array}\\end{array}$ does the gain change (a) without feedback, (b) with feedback?\n\nSolution (a) Without feedback [Fig. 12.12(a)], the CG gain is $g_{m}\\left(R_{D} \\| R_{L}\\right)=g_{m} R_{D} / 3$. Thus, the gain decreases by a factor of three.\nimage_name:Figure 12.12\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vin, D: Vout, G: Vb}\nname: RD, type: Resistor, value: RD, ports: {N1: Vout, N2: VDD}\nname: RL, type: Resistor, value: RD/2, ports: {N1: Vout, N2: GND}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:This is a common-gate amplifier circuit with an NMOS transistor M1. The circuit is powered by a voltage source VDD and includes load resistors RD and RL. The output voltage Vout is taken across RL.\n\n(b) With feedback, we use Eq. (12.30) but account for the reduced open-loop gain of $g_{m} R_{D} / 3$ :\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{g_{m} R_{D} / 3}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D} / 3}  \\tag{12.41}\\\\\n& =\\frac{g_{m} R_{D}}{3+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}} \\tag{12.42}\n\\end{align*}\n$$\n\nFor instance, if $g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)=10$, then this result differs from the \"unloaded\" gain expression in Eq. (12.30) by about $18 \\%$. Feedback thus reduces the sensitivity of the gain to load variations.\n\nExercise $\\quad$ Repeat the above example for $R_{L}=R_{D}$.\nimage_name:Figure 12.13 (a)\ndescription:**Type of Graph and Function:**\nFigure 12.13 (a) shows a nonlinear open-loop characteristic of an amplifier. It is a plot of the output signal \\( y \\) versus the input signal \\( x \\).\n\n**Axes Labels and Units:**\n- **X-axis:** Represents the input signal \\( x \\).\n- **Y-axis:** Represents the output signal \\( y \\).\n\n**Overall Behavior and Trends:**\nThe graph depicts a nonlinear relationship between the input and output signals. It starts at the origin and curves upwards, indicating that the gain changes with different input levels. The curve is concave down, showing diminishing returns in output as input increases.\n\n**Key Features and Technical Details:**\n- The slope of the curve at different points represents the small-signal gain of the amplifier.\n- At \\( x_1 \\), the gain is denoted as \\( A_1 \\), and at \\( x_2 \\), the gain is \\( A_2 \\).\n- The curve indicates a decrease in gain as the input level increases from \\( x_1 \\) to \\( x_2 \\).\n\n**Annotations and Specific Data Points:**\n- Dotted lines are used to mark the points \\( x_1 \\) and \\( x_2 \\) on the x-axis and their corresponding output levels on the y-axis.\n- The gains \\( A_1 \\) and \\( A_2 \\) are shown as the slopes of the tangent lines at \\( x_1 \\) and \\( x_2 \\), respectively.\n\nThis graph illustrates the nonlinearity in the amplifier's response, which can be improved by introducing feedback, as suggested by the context and the accompanying figure (b).\nimage_name:Figure 12.13 (b)\ndescription:Figure 12.13(b) illustrates the improvement in linearity of an amplifier due to feedback. The graph is a plot of input \\(x\\) versus output \\(y\\), showing two characteristics: open-loop and closed-loop.\n\n1. **Type of Graph and Function:**\n- The graph is a characteristic curve showing the relationship between input and output of an amplifier.\n- It demonstrates how feedback affects the linearity of the amplifier's response.\n\n2. **Axes Labels and Units:**\n- The horizontal axis represents the input \\(x\\), while the vertical axis represents the output \\(y\\).\n- No specific units are given, indicating a general characteristic analysis.\n\n3. **Overall Behavior and Trends:**\n- The open-loop characteristic (shown in a lighter curve) is nonlinear, with a decreasing slope as \\(x\\) increases, indicating decreasing gain.\n- The closed-loop characteristic (shown in a darker curve) is more linear, with a reduced slope compared to the open-loop, indicating a more consistent gain across the input range.\n\n4. **Key Features and Technical Details:**\n- The open-loop gain at point \\(x_1\\) is \\(A_1\\) and at \\(x_2\\) is \\(A_2\\), showing variability in gain.\n- The closed-loop gain is reduced to \\(\\frac{A_1}{1 + KA_1}\\) at \\(x_1\\) and \\(\\frac{A_2}{1 + KA_2}\\) at \\(x_2\\), where \\(K\\) is the feedback factor. This reduction in gain variability illustrates the stabilizing effect of feedback.\n\n5. **Annotations and Specific Data Points:**\n- The graph is annotated with gain values for both open-loop and closed-loop conditions at specific input points \\(x_1\\) and \\(x_2\\).\n- The labels clearly indicate the improvement in linearity and the effect of feedback on the gain values.\n\nFigure 12.13 (a) Nonlinear open-loop characteristic of an amplifier, (b) improvement in linearity due to feedback."
},
{
    "text": "As previously discussed, negative feedback reduces the sensitivity of the closed-loop gain to load resistance. This effect primarily stems from the alteration of the output impedance due to feedback, which also affects the input impedance. We will meticulously derive these effects in the following sections, but it is beneficial to examine an example at this juncture.\n\nExample\n12.7\n\nFigure 12.10 illustrates a transistor-level implementation of the feedback circuit shown in Fig. 12.2. For simplicity, assume $\\lambda=0$ and $R_{1}+R_{2} \\gg R_{D}$. (a) Identify the four components of the feedback system. (b) Calculate the open-loop and closed-loop voltage gain. (c) Determine the open-loop and closed-loop I/O impedances.\nimage_name:Figure 12.10\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vin, D: Vout, G: g1}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: g1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\n]\nextrainfo:The circuit is a feedback amplifier with NMOS transistor M1 and resistors RD, R1, and R2. Vout is the output node, and Vin is the input node. R1 and R2 form a voltage divider feedback network.\n\nFigure 12.10\nSolution\n(a) By analogy with Fig. 12.10, we infer that the forward system (the main amplifier) comprises $M_{1}$ and $R_{D}$, forming a common-gate stage. Resistors $R_{1}$ and $R_{2}$ function as both the sensing mechanism and the feedback network, returning a signal equivalent to $V_{\\text {out }} R_{2} /\\left(R_{1}+R_{2}\\right)$ to the subtractor. Transistor $M_{1}$ itself acts as the subtractor since the small-signal drain current is proportional to the difference between the gate and source voltages:\n\n$$\n\\begin{equation*}\ni_{D}=g_{m}\\left(v_{G}-v_{S}\\right) \\tag{12.27}\n\\end{equation*}\n$$\n\n(b) The forward system provides a voltage gain of\n\n$$\n\\begin{equation*}\nA_{0} \\approx g_{m} R_{D} \\tag{12.28}\n\\end{equation*}\n$$\n\ndue to the assumption that $R_{1}+R_{2}$ is sufficiently large to忽略 its loading effect on $R_{D}$. The closed-loop voltage gain is thus given by\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{A_{0}}{1+K A_{0}}  \\tag{12.29}\\\\\n& =\\frac{g_{m} R_{D}}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}} \\tag{12.30}\n\\end{align*}\n$$\n\nIt should be noted that the overall gain of this stage can also be derived by directly solving the circuit equations, even without knowledge of feedback. However, employing feedback concepts not only provides deeper insight but also simplifies the analysis, especially for more complex circuits.\n(c) The open-loop I/O impedances are those of the CG stage:\n\n$$\n\\begin{align*}\nR_{i n, \\text { open }} & =\\frac{1}{g_{m}}  \\tag{12.31}\\\\\nR_{\\text {out }, \\text { open }} & =R_{D} \\tag{12.32}\n\\end{align*}\n$$\n\nAt this stage, we lack the knowledge to derive the closed-loop I/O impedances from the open-loop parameters directly. Therefore, we simply solve the circuit. From Fig. 12.11(a), we observe that $R_{D}$ carries a current approximately equal to $i_{X}$, given the assumption that $R_{1}+R_{2}$ is large. The drain voltage of $M_{1}$ is thus $i_{X} R_{D}$, resulting in a gate voltage of $+i_{X} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$. Transistor $M_{1}$ generates a drain current proportional to $v_{G S}$ :\n\n$$\n\\begin{align*}\ni_{D} & =g_{m} v_{G S}  \\tag{12.33}\\\\\n& =g_{m}\\left(\\frac{+i_{X} R_{D} R_{2}}{R_{1}+R_{2}}-v_{X}\\right) \\tag{12.34}\n\\end{align*}\n$$\n\nSince $i_{D}=-i_{X}$, Eq. (12.34) yields\n\n$$\n\\begin{equation*}\n\\frac{v_{X}}{i_{X}}=\\frac{1}{g_{m}}\\left(1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}\\right) . \\tag{12.35}\n\\end{equation*}\n$$\n\nThus, the input resistance increases from $1 / g_{m}$ by a factor of $1+$ $g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$, the same factor by which the gain decreases.\nimage_name:Figure 12.11 (a)\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: d1}\nname: R1, type: Resistor, value: R1, ports: {N1: g1, N2: d1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: M1, type: NMOS, ports: {S: Vx, D: d1, G: g1}\nname: Vx, type: VoltageSource, value: vx, ports: {Np: Vx, Nn: GND}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with resistive load RD and a voltage divider bias network R1 and R2. The input voltage is Vx and the output is taken from the drain of M1.\n\nimage_name:Figure 12.11(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vx, G: g1}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vx}\nname: R1, type: Resistor, value: R1, ports: {N1: g1, N2: Vx}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: Vx, type: VoltageSource, value: vx, ports: {Np: Vx, Nn: GND}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with a resistive load RD and a voltage divider bias network consisting of R1 and R2. The input voltage is Vx, and the output is taken from the drain of M1. The circuit also includes a voltage-controlled current source g1.\n\nTo determine the output resistance, we write from Fig. 12.11(b),\n\n$$\n\\begin{equation*}\nv_{G S}=\\frac{R_{2}}{R_{1}+R_{2}} v_{X} \\tag{12.36}\n\\end{equation*}\n$$\n\nand hence\n\n$$\n\\begin{align*}\ni_{D} & =g_{m} v_{G S}  \\tag{12.37}\\\\\n& =g_{m} \\frac{R_{2}}{R_{1}+R_{2}} v_{X} \\tag{12.38}\n\\end{align*}\n$$\n\nNoting that, if $R_{1}+R_{2} \\gg R_{D}$, then $i_{X} \\approx i_{D}+v_{X} / R_{D}$, we obtain\n\n$$\n\\begin{equation*}\ni_{X} \\approx g_{m} \\frac{R_{2}}{R_{1}+R_{2}} v_{X}+\\frac{v_{X}}{R_{D}} . \\tag{12.39}\n\\end{equation*}\n$$\n\nIt follows that\n\n$$\n\\begin{equation*}\n\\frac{v_{X}}{i_{X}}=\\frac{R_{D}}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}} \\tag{12.40}\n\\end{equation*}\n$$\n\nThe output resistance thus decreases by the \"universal\" factor $1+g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$.\n\nThe above calculations of I/O impedances can be significantly streamlined by utilizing feedback concepts. As demonstrated by Eqs. (12.35) and (12.40), the factor $1+K A_{0}=1+g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$ plays a pivotal role. Our discussion of feedback circuits in this chapter will lay the groundwork for this principle.\n\nExercise In certain applications, the input and output impedances of an amplifier must both be equal to $50 \\Omega$. What relationship ensures that the input and output impedances of the above circuit are equal?\n\nSeveral questions may arise at this point. Do the input and output impedances always scale down and up, respectively, due to feedback? Is the modification of I/O impedances by feedback advantageous? We address one example here to illustrate a key point and defer more detailed answers to later sections.\n$\\begin{array}{cl}\\text { Example } & \\begin{array}{l}\\text { The common-gate stage of Fig. } 12.10 \\text { must drive a load resistance } \\\\ \\text { does the gain change (a) without feedback, (b) with feedback? }\\end{array}\\end{array}$ does the gain change (a) without feedback, (b) with feedback?\n\nSolution (a) Without feedback [Fig. 12.12(a)], the CG gain is $g_{m}\\left(R_{D} \\| R_{L}\\right)=g_{m} R_{D} / 3$. Thus, the gain decreases by a factor of three.\nimage_name:Figure 12.12\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vin, D: Vout, G: Vb}\nname: RD, type: Resistor, value: RD, ports: {N1: Vout, N2: VDD}\nname: RL, type: Resistor, value: RD/2, ports: {N1: Vout, N2: GND}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:This is a common-gate amplifier circuit with an NMOS transistor M1. The circuit is powered by a voltage source VDD and includes load resistors RD and RL. The output voltage Vout is taken across RL.\n\n(b) With feedback, we use Eq. (12.30) but account for the reduced open-loop gain of $g_{m} R_{D} / 3$ :\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{g_{m} R_{D} / 3}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D} / 3}  \\tag{12.41}\\\\\n& =\\frac{g_{m} R_{D}}{3+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}} \\tag{12.42}\n\\end{align*}\n$$\n\nFor instance, if $g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)=10$, then this result differs from the \"unloaded\" gain expression in Eq. (12.30) by about $18 \\%$. Feedback thus reduces the gain's sensitivity to load variations.\n\nExercise $\\quad$ Repeat the above example for $R_{L}=R_{D}$.\nimage_name:Figure 12.13 (a)\ndescription:**Type of Graph and Function:**\nFigure 12.13 (a) shows a nonlinear open-loop characteristic of an amplifier. It is a plot of the output signal \\( y \\) versus the input signal \\( x \\).\n\n**Axes Labels and Units:**\n- **X-axis:** Represents the input signal \\( x \\).\n- **Y-axis:** Represents the output signal \\( y \\).\n\n**Overall Behavior and Trends:**\nThe graph depicts a nonlinear relationship between the input and output signals. It starts at the origin and curves upwards, indicating that the gain changes with different input levels. The curve is concave down, showing diminishing returns in output as input increases.\n\n**Key Features and Technical Details:**\n- The slope of the curve at different points represents the small-signal gain of the amplifier.\n- At \\( x_1 \\), the gain is denoted as \\( A_1 \\), and at \\( x_2 \\), the gain is \\( A_2 \\).\n- The curve indicates a decrease in gain as the input level increases from \\( x_1 \\) to \\( x_2 \\).\n\n**Annotations and Specific Data Points:**\n- Dotted lines are used to mark the points \\( x_1 \\) and \\( x_2 \\) on the x-axis and their corresponding output levels on the y-axis.\n- The gains \\( A_1 \\) and \\( A_2 \\) are shown as the slopes of the tangent lines at \\( x_1 \\) and \\( x_2 \\), respectively.\n\nThis graph illustrates the nonlinearity in the amplifier's response, which can be improved by introducing feedback, as suggested by the context and the accompanying figure (b).\nimage_name:Figure 12.13 (b)\ndescription:Figure 12.13(b) illustrates the improvement in linearity of an amplifier due to feedback. The graph is a plot of input \\(x\\) versus output \\(y\\), showing two characteristics: open-loop and closed-loop.\n\n1. **Type of Graph and Function:**\n- The graph is a characteristic curve showing the relationship between input and output of an amplifier.\n- It demonstrates how feedback affects the linearity of the amplifier's response.\n\n2. **Axes Labels and Units:**\n- The horizontal axis represents the input \\(x\\), while the vertical axis represents the output \\(y\\).\n- No specific units are given, indicating a general characteristic analysis.\n\n3. **Overall Behavior and Trends:**\n- The open-loop characteristic (shown in a lighter curve) is nonlinear, with a decreasing slope as \\(x\\) increases, indicating decreasing gain.\n- The closed-loop characteristic (shown in a darker curve) is more linear, with a reduced slope compared to the open-loop, indicating a more consistent gain across the input range.\n\n4. **Key Features and Technical Details:**\n- The open-loop gain at point \\(x_1\\) is \\(A_1\\) and at \\(x_2\\) is \\(A_2\\), showing variability in gain.\n- The closed-loop gain is reduced to \\(\\frac{A_1}{1 + KA_1}\\) at \\(x_1\\) and \\(\\frac{A_2}{1 + KA_2}\\) at \\(x_2\\), where \\(K\\) is the feedback factor. This reduction in gain variability illustrates the stabilizing effect of feedback.\n\n5. **Annotations and Specific Data Points:**\n- The graph is annotated with gain values for both open-loop and closed-loop conditions at specific input points \\(x_1\\) and \\(x_2\\).\n- The labels clearly indicate the improvement in linearity and the effect of feedback on the gain values.\n\nFigure 12.13 (a) Nonlinear open-loop characteristic of an amplifier, (b) improvement in linearity due to feedback."
},
{
    "text": "As previously noted, negative feedback reduces the sensitivity of the closed-loop gain to load resistance. This effect primarily stems from the alteration of the output impedance due to feedback. Feedback also modifies the input impedance. We will meticulously formulate these effects in the subsequent sections, but it is beneficial to examine an example at this juncture.\n\nExample 12.7\n\nFigure 12.10 illustrates a transistor-level implementation of the feedback circuit shown in Fig. 12.2. For simplicity, assume $\\lambda=0$ and $R_{1}+R_{2} \\gg R_{D}$. (a) Identify the four components of the feedback system. (b) Determine the open-loop and closed-loop voltage gain. (c) Determine the open-loop and closed-loop I/O impedances.\nimage_name: Figure 12.10\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vin, D: Vout, G: g1}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: g1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\n]\nextrainfo: The circuit is a feedback amplifier featuring an NMOS transistor M1 and resistors RD, R1, and R2. Vout is the output node, and Vin is the input node. R1 and R2 form a voltage divider feedback network.\n\nFigure 12.10\nSolution\n(a) By analogy with Fig. 12.10, we infer that the forward system (the primary amplifier) comprises $M_{1}$ and $R_{D}$, forming a common-gate stage. Resistors $R_{1}$ and $R_{2}$ function as both the sensing mechanism and the feedback network, returning a signal equivalent to $V_{\\text {out }} R_{2} /\\left(R_{1}+R_{2}\\right)$ to the subtractor. Transistor $M_{1}$ itself acts as the subtractor since the small-signal drain current is proportional to the difference between the gate and source voltages:\n\n$$\n\\begin{equation*}\ni_{D}=g_{m}\\left(v_{G}-v_{S}\\right) \\tag{12.27}\n\\end{equation*}\n$$\n\n(b) The forward system provides a voltage gain of\n\n$$\n\\begin{equation*}\nA_{0} \\approx g_{m} R_{D} \\tag{12.28}\n\\end{equation*}\n$$\n\ndue to the assumption that $R_{1}+R_{2}$ is sufficiently large to ignore its loading effect on $R_{D}$. The closed-loop voltage gain is therefore given by\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{A_{0}}{1+K A_{0}}  \\tag{12.29}\\\\\n& =\\frac{g_{m} R_{D}}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}} \\tag{12.30}\n\\end{align*}\n$$\n\nIt is worth noting that the overall gain of this stage can also be derived by directly solving the circuit equations, even without knowledge of feedback principles. However, employing feedback concepts not only offers deeper insight but also simplifies the analysis, especially as circuits become more complex.\n(c) The open-loop I/O impedances are those of the CG stage:\n\n$$\n\\begin{align*}\nR_{i n, \\text { open }} & =\\frac{1}{g_{m}}  \\tag{12.31}\\\\\nR_{\\text {out }, \\text { open }} & =R_{D} \\tag{12.32}\n\\end{align*}\n$$\n\nAt this stage, we lack the knowledge to derive the closed-loop I/O impedances from the open-loop parameters. Therefore, we simply solve the circuit. From Fig. 12.11(a), we observe that $R_{D}$ carries a current approximately equal to $i_{X}$, given the assumption that $R_{1}+R_{2}$ is large. The drain voltage of $M_{1}$ is thus $i_{X} R_{D}$, resulting in a gate voltage of $+i_{X} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$. Transistor $M_{1}$ generates a drain current proportional to $v_{G S}$ :\n\n$$\n\\begin{align*}\ni_{D} & =g_{m} v_{G S}  \\tag{12.33}\\\\\n& =g_{m}\\left(\\frac{+i_{X} R_{D} R_{2}}{R_{1}+R_{2}}-v_{X}\\right) \\tag{12.34}\n\\end{align*}\n$$\n\nSince $i_{D}=-i_{X}$, Eq. (12.34) yields\n\n$$\n\\begin{equation*}\n\\frac{v_{X}}{i_{X}}=\\frac{1}{g_{m}}\\left(1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}\\right) . \\tag{12.35}\n\\end{equation*}\n$$\n\nThis indicates that the input resistance increases from $1 / g_{m}$ by a factor of $1+$ $g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$, the same factor by which the gain decreases.\nimage_name: Figure 12.11 (a)\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: d1}\nname: R1, type: Resistor, value: R1, ports: {N1: g1, N2: d1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: M1, type: NMOS, ports: {S: Vx, D: d1, G: g1}\nname: Vx, type: VoltageSource, value: vx, ports: {Np: Vx, Nn: GND}\n]\nextrainfo: The circuit is a common-source NMOS amplifier with a resistive load RD and a voltage divider bias network consisting of R1 and R2. The input voltage is Vx, and the output is taken from the drain of M1.\n\nimage_name: Figure 12.11(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vx, G: g1}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vx}\nname: R1, type: Resistor, value: R1, ports: {N1: g1, N2: Vx}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: Vx, type: VoltageSource, value: vx, ports: {Np: Vx, Nn: GND}\n]\nextrainfo: The circuit is a common-source NMOS amplifier with a resistive load RD and a voltage divider bias network consisting of R1 and R2. The input voltage is Vx, and the output is taken from the drain of M1. The circuit also includes a voltage-controlled current source g1.\n\nTo determine the output resistance, we write from Fig. 12.11(b),\n\n$$\n\\begin{equation*}\nv_{G S}=\\frac{R_{2}}{R_{1}+R_{2}} v_{X} \\tag{12.36}\n\\end{equation*}\n$$\n\nand hence\n\n$$\n\\begin{align*}\ni_{D} & =g_{m} v_{G S}  \\tag{12.37}\\\\\n& =g_{m} \\frac{R_{2}}{R_{1}+R_{2}} v_{X} \\tag{12.38}\n\\end{align*}\n$$\n\nNoting that, if $R_{1}+R_{2} \\gg R_{D}$, then $i_{X} \\approx i_{D}+v_{X} / R_{D}$, we obtain\n\n$$\n\\begin{equation*}\ni_{X} \\approx g_{m} \\frac{R_{2}}{R_{1}+R_{2}} v_{X}+\\frac{v_{X}}{R_{D}} . \\tag{12.39}\n\\end{equation*}\n$$\n\nIt follows that\n\n$$\n\\begin{equation*}\n\\frac{v_{X}}{i_{X}}=\\frac{R_{D}}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}} \\tag{12.40}\n\\end{equation*}\n$$\n\nThus, the output resistance decreases by the \"universal\" factor $1+g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$.\n\nThe above calculations of I/O impedances can be significantly streamlined by utilizing feedback concepts. As demonstrated by Eqs. (12.35) and (12.40), the factor $1+K A_{0}=1+g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)$ plays a pivotal role. Our discussion of feedback circuits in this chapter will lay the groundwork for this principle.\n\nExercise In certain applications, both the input and output impedances of an amplifier must be precisely $50 \\Omega$. What relationship ensures that the input and output impedances of the aforementioned circuit are equal?\n\nSeveral questions may arise at this point. Do the input and output impedances always scale down and up, respectively, due to feedback? Is the modification of I/O impedances by feedback advantageous? We address one example here to illustrate a key point and defer more comprehensive answers to later sections.\n$\\begin{array}{cl}\\text { Example } & \\begin{array}{l}\\text { Consider the common-gate stage of Fig. } 12.10 \\text { driving a load resistance. } \\\\ \\text { How does the gain change (a) without feedback, (b) with feedback? }\\end{array}\\end{array}$\n\nSolution (a) Without feedback [Fig. 12.12(a)], the CG gain is $g_{m}\\left(R_{D} \\| R_{L}\\right)=g_{m} R_{D} / 3$. Thus, the gain decreases by a factor of three.\nimage_name: Figure 12.12\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vin, D: Vout, G: Vb}\nname: RD, type: Resistor, value: RD, ports: {N1: Vout, N2: VDD}\nname: RL, type: Resistor, value: RD/2, ports: {N1: Vout, N2: GND}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo: This is a common-gate amplifier circuit with an NMOS transistor M1. The circuit is powered by a voltage source VDD and includes load resistors RD and RL. The output voltage Vout is taken across RL.\n\n(b) With feedback, we use Eq. (12.30) but account for the reduced open-loop gain of $g_{m} R_{D} / 3$ :\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{g_{m} R_{D} / 3}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D} / 3}  \\tag{12.41}\\\\\n& =\\frac{g_{m} R_{D}}{3+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}} \\tag{12.42}\n\\end{align*}\n$$\n\nFor instance, if $g_{m} R_{D} R_{2} /\\left(R_{1}+R_{2}\\right)=10$, then this result deviates from the \"unloaded\" gain expression in Eq. (12.30) by approximately $18 \\%$. Feedback thereby reduces the sensitivity of the gain to load variations.\n\nExercise Repeat the above example for $R_{L}=R_{D}$.\nimage_name: Figure 12.13 (a)\ndescription:**Type of Graph and Function:**\nFigure 12.13 (a) displays a nonlinear open-loop characteristic of an amplifier. It plots the output signal \\( y \\) against the input signal \\( x \\).\n\n**Axes Labels and Units:**\n- **X-axis:** Represents the input signal \\( x \\).\n- **Y-axis:** Represents the output signal \\( y \\).\n\n**Overall Behavior and Trends:**\nThe graph shows a nonlinear relationship between the input and output signals. It starts at the origin and curves upwards, indicating that the gain varies with different input levels. The curve is concave down, showing diminishing returns in output as input increases.\n\n**Key Features and Technical Details:**\n- The slope of the curve at various points represents the small-signal gain of the amplifier.\n- At \\( x_1 \\), the gain is \\( A_1 \\), and at \\( x_2 \\), the gain is \\( A_2 \\).\n- The curve demonstrates a decrease in gain as the input level increases from \\( x_1 \\) to \\( x_2 \\).\n\n**Annotations and Specific Data Points:**\n- Dotted lines mark the points \\( x_1 \\) and \\( x_2 \\) on the x-axis and their corresponding output levels on the y-axis.\n- The gains \\( A_1 \\) and \\( A_2 \\) are shown as the slopes of the tangent lines at \\( x_1 \\) and \\( x_2 \\), respectively.\n\nThis graph illustrates the nonlinearity in the amplifier's response, which can be improved by introducing feedback, as indicated by the accompanying figure (b).\nimage_name: Figure 12.13 (b)\ndescription:Figure 12.13(b) shows the improvement in linearity of an amplifier due to feedback. The graph plots input \\(x\\) versus output \\(y\\), depicting both open-loop and closed-loop characteristics.\n\n1. **Type of Graph and Function:**\n- The graph is a characteristic curve illustrating the input-output relationship of an amplifier.\n- It demonstrates the effect of feedback on the linearity of the amplifier's response.\n\n2. **Axes Labels and Units:**\n- The horizontal axis represents the input \\(x\\), while the vertical axis represents the output \\(y\\).\n- No specific units are provided, indicating a general characteristic analysis.\n\n3. **Overall Behavior and Trends:**\n- The open-loop characteristic (shown in a lighter curve) is nonlinear, with a decreasing slope as \\(x\\) increases, indicating a reduction in gain.\n- The closed-loop characteristic (shown in a darker curve) is more linear, with a reduced but consistent slope compared to the open-loop curve.\n\n4. **Key Features and Technical Details:**\n- The open-loop gain at \\( x_1 \\) is \\( A_1 \\) and at \\( x_2 \\) is \\( A_2 \\), showing variability in gain.\n- The closed-loop gain is reduced to \\(\\frac{A_1}{1 + KA_1}\\) at \\( x_1 \\) and \\(\\frac{A_2}{1 + KA_2}\\) at \\( x_2 \\), where \\( K \\) is the feedback factor. This reduction in gain variability highlights the stabilizing effect of feedback.\n\n5. **Annotations and Specific Data Points:**\n- The graph is annotated with gain values for both open-loop and closed-loop conditions at specific input points \\( x_1 \\) and \\( x_2 \\).\n- The labels clearly indicate the improvement in linearity and the effect of feedback on the gain values.\n\nFigure 12.13 (a) Nonlinear open-loop characteristic of an amplifier, (b) improvement in linearity due to feedback."
},
{
    "text": "Consider a system with the input/output characteristic depicted in Fig. 12.13(a). The observed nonlinearity can also be interpreted as variations in the slope of the characteristic, namely, the small-signal gain. For instance, the system demonstrates a gain of $A_{1}$ near $x=x_{1}$ and $A_{2}$ near $x=x_{2}$. When incorporated into a negative-feedback loop, the system delivers a more consistent gain across various signal levels, thereby operating more linearly. Indeed, as shown in Fig. 12.13(b) for the closed-loop system, we can express\n\n$$\n\\text { Gain at } \\begin{align*}\nx_{1} & =\\frac{A_{1}}{1+K A_{1}}  \\tag{12.43}\\\\\n& \\approx \\frac{1}{K}\\left(1-\\frac{1}{K A_{1}}\\right) \\tag{12.44}\n\\end{align*}\n$$\n\nassuming $K A_{1} \\gg 1$. Similarly,\n\n$$\n\\text { Gain at } \\begin{align*}\nx_{2} & =\\frac{A_{2}}{1+K A_{2}}  \\tag{12.45}\\\\\n& \\approx \\frac{1}{K}\\left(1-\\frac{1}{K A_{2}}\\right) \\tag{12.46}\n\\end{align*}\n$$\n\nHence, as long as $K A_{1}$ and $K A_{2}$ are substantial, the variation in closed-loop gain with signal level is significantly less than that of the open-loop gain.\n\nAll these characteristics of negative feedback can also be viewed as stemming from the minimal error property illustrated in Fig. 12.3. For example, if the forward amplifier's gain varies at different signal levels,\n\nAmplifier driving a speaker (a) without, and (b) with feedback.\nthe feedback still ensures that the feedback signal closely mirrors the input, and thus, so does the output."
},
{
    "text": "Consider a system with the input/output characteristic depicted in Fig. 12.13(a). The observed nonlinearity can also be interpreted as variations in the slope of the characteristic, specifically the small-signal gain. For instance, the system shows a gain of $A_{1}$ near $x=x_{1}$ and $A_{2}$ near $x=x_{2}$. When placed in a negative-feedback loop, the system achieves a more consistent gain across different signal levels, thereby operating more linearly. As shown in Fig. 12.13(b) for the closed-loop system, we can express the gain as follows:\n\n$$\n\\text { Gain at } \\begin{align*}\nx_{1} & =\\frac{A_{1}}{1+K A_{1}}  \\tag{12.43}\\\\\n& \\approx \\frac{1}{K}\\left(1-\\frac{1}{K A_{1}}\\right) \\tag{12.44}\n\\end{align*}\n$$\n\nassuming $K A_{1} \\gg 1$. Similarly,\n\n$$\n\\text { Gain at } \\begin{align*}\nx_{2} & =\\frac{A_{2}}{1+K A_{2}}  \\tag{12.45}\\\\\n& \\approx \\frac{1}{K}\\left(1-\\frac{1}{K A_{2}}\\right) \\tag{12.46}\n\\end{align*}\n$$\n\nHence, as long as $K A_{1}$ and $K A_{2}$ are substantial, the variation in closed-loop gain with signal level is significantly less than that of the open-loop gain.\n\nAll these characteristics of negative feedback can also be attributed to the minimal error property illustrated in Fig. 12.3. For example, if the forward amplifier's gain varies at different signal levels,\n\nAmplifier driving a speaker (a) without, and (b) with feedback.\nthe feedback still ensures that the feedback signal closely resembles the input, and thus, so does the output."
},
{
    "text": "Consider a system with the input/output characteristic depicted in Fig. 12.13(a). The observed nonlinearity can also be interpreted as variations in the slope of the characteristic, namely the small-signal gain. For instance, this system displays a gain of $A_{1}$ near $x=x_{1}$ and $A_{2}$ near $x=x_{2}$. When incorporated into a negative-feedback loop, the system delivers a more consistent gain across various signal levels, thereby operating more linearly. As shown in Fig. 12.13(b) for the closed-loop system, we can express\n\n$$\n\\text { Gain at } \\begin{align*}\nx_{1} & =\\frac{A_{1}}{1+K A_{1}}  \\tag{12.43}\\\\\n& \\approx \\frac{1}{K}\\left(1-\\frac{1}{K A_{1}}\\right) \\tag{12.44}\n\\end{align*}\n$$\n\nassuming $K A_{1} \\gg 1$. Similarly,\n\n$$\n\\text { Gain at } \\begin{align*}\nx_{2} & =\\frac{A_{2}}{1+K A_{2}}  \\tag{12.45}\\\\\n& \\approx \\frac{1}{K}\\left(1-\\frac{1}{K A_{2}}\\right) \\tag{12.46}\n\\end{align*}\n$$\n\nHence, as long as $K A_{1}$ and $K A_{2}$ are substantial, the variation in the closed-loop gain with the signal level is significantly less than that of the open-loop gain.\n\nAll these characteristics of negative feedback can also be viewed as a consequence of the minimal error property demonstrated in Fig. 12.3. For example, if the forward amplifier's gain varies at different signal levels,\n\nAmplifier driving a speaker (a) without, and (b) with feedback.\nthe feedback still ensures that the feedback signal closely mirrors the input, and thus the output follows suit."
},
{
    "text": "Consider a system with the input/output characteristic depicted in Fig. 12.13(a). The observed nonlinearity can also be interpreted as a change in the characteristic's slope, namely the small-signal gain. For instance, the system displays a gain of $A_{1}$ near $x=x_{1}$ and $A_{2}$ near $x=x_{2}$. When incorporated into a negative-feedback loop, the system yields a more consistent gain across various signal levels, thereby operating more linearly. Indeed, as shown in Fig. 12.13(b) for the closed-loop system, we can express\n\n$$\n\\text { Gain at } \\begin{align*}\nx_{1} & =\\frac{A_{1}}{1+K A_{1}}  \\tag{12.43}\\\\\n& \\approx \\frac{1}{K}\\left(1-\\frac{1}{K A_{1}}\\right) \\tag{12.44}\n\\end{align*}\n$$\n\nassuming $K A_{1} \\gg 1$. Likewise,\n\n$$\n\\text { Gain at } \\begin{align*}\nx_{2} & =\\frac{A_{2}}{1+K A_{2}}  \\tag{12.45}\\\\\n& \\approx \\frac{1}{K}\\left(1-\\frac{1}{K A_{2}}\\right) \\tag{12.46}\n\\end{align*}\n$$\n\nHence, provided $K A_{1}$ and $K A_{2}$ are substantial, the fluctuation in closed-loop gain with signal level is significantly less than that of the open-loop gain.\n\nAll these characteristics of negative feedback can also be viewed as a consequence of the minimal error property illustrated in Fig. 12.3. For example, if the forward amplifier's gain varies at different signal levels,\n\nAmplifier driving a speaker (a) without, and (b) with feedback.\nthe feedback still guarantees that the feedback signal closely mirrors the input, and thus, so does the output."
},
{
    "text": "Consider a system with the input/output characteristic depicted in Fig. 12.13(a). The observed nonlinearity can also be interpreted as a variation in the characteristic's slope, namely, the small-signal gain. For instance, this system displays a gain of $A_{1}$ near $x=x_{1}$ and $A_{2}$ near $x=x_{2}$. When incorporated into a negative-feedback loop, the system delivers a more consistent gain across various signal levels, thereby operating more linearly. Indeed, as shown in Fig. 12.13(b) for the closed-loop system, we can express\n\n$$\n\\text { Gain at } \\begin{align*}\nx_{1} & =\\frac{A_{1}}{1+K A_{1}}  \\tag{12.43}\\\\\n& \\approx \\frac{1}{K}\\left(1-\\frac{1}{K A_{1}}\\right) \\tag{12.44}\n\\end{align*}\n$$\n\nassuming $K A_{1} \\gg 1$. Likewise,\n\n$$\n\\text { Gain at } \\begin{align*}\nx_{2} & =\\frac{A_{2}}{1+K A_{2}}  \\tag{12.45}\\\\\n& \\approx \\frac{1}{K}\\left(1-\\frac{1}{K A_{2}}\\right) \\tag{12.46}\n\\end{align*}\n$$\n\nHence, as long as $K A_{1}$ and $K A_{2}$ are substantial, the variation in closed-loop gain with signal level is significantly less than that of the open-loop gain.\n\nAll these characteristics of negative feedback can also be viewed as stemming from the minimal error property illustrated in Fig. 12.3. For example, if the forward amplifier's gain varies at different signal levels,\n\nAmplifier driving a speaker (a) without, and (b) with feedback.\nthe feedback still ensures that the feedback signal closely mirrors the input, and thus, so does the output."
},
{
    "text": "Consider a system with the input/output characteristic depicted in Fig. 12.13(a). The observed nonlinearity can also be interpreted as a variation in the slope of the characteristic, namely the small-signal gain. For instance, the system displays a gain of $A_{1}$ near $x=x_{1}$ and $A_{2}$ near $x=x_{2}$. When this system is incorporated into a negative-feedback loop, it yields a more consistent gain across various signal levels, thereby operating more linearly. As shown in Fig. 12.13(b) for the closed-loop system, we can express\n\n$$\n\\text { Gain at } \\begin{align*}\nx_{1} & =\\frac{A_{1}}{1+K A_{1}}  \\tag{12.43}\\\\\n& \\approx \\frac{1}{K}\\left(1-\\frac{1}{K A_{1}}\\right) \\tag{12.44}\n\\end{align*}\n$$\n\nassuming $K A_{1} \\gg 1$. Similarly,\n\n$$\n\\text { Gain at } \\begin{align*}\nx_{2} & =\\frac{A_{2}}{1+K A_{2}}  \\tag{12.45}\\\\\n& \\approx \\frac{1}{K}\\left(1-\\frac{1}{K A_{2}}\\right) \\tag{12.46}\n\\end{align*}\n$$\n\nHence, as long as $K A_{1}$ and $K A_{2}$ are substantial, the variation in the closed-loop gain with the signal level is significantly less than that of the open-loop gain.\n\nAll these benefits of negative feedback can also be attributed to the minimal error property demonstrated in Fig. 12.3. For example, if the forward amplifier's gain varies at different signal levels,\n\nAmplifier driving a speaker (a) without, and (b) with feedback.\nthe feedback still ensures that the feedback signal closely mirrors the input, and thus the output follows suit."
},
{
    "text": "Consider a system characterized by the input/output behavior depicted in Fig. 12.13(a). The observed nonlinearity can also be interpreted as variations in the slope of the characteristic, namely, the small-signal gain. For instance, the system demonstrates a gain of $A_{1}$ in the vicinity of $x=x_{1}$ and $A_{2}$ near $x=x_{2}$. When incorporated into a negative-feedback loop, the system delivers a more consistent gain across various signal levels, thereby operating in a more linear manner. As shown in Fig. 12.13(b) for the closed-loop system, we can express the gain as follows:\n\n$$\n\\text { Gain at } \\begin{align*}\nx_{1} & =\\frac{A_{1}}{1+K A_{1}}  \\tag{12.43}\\\\\n& \\approx \\frac{1}{K}\\left(1-\\frac{1}{K A_{1}}\\right) \\tag{12.44}\n\\end{align*}\n$$\n\nassuming $K A_{1} \\gg 1$. Similarly,\n\n$$\n\\text { Gain at } \\begin{align*}\nx_{2} & =\\frac{A_{2}}{1+K A_{2}}  \\tag{12.45}\\\\\n& \\approx \\frac{1}{K}\\left(1-\\frac{1}{K A_{2}}\\right) \\tag{12.46}\n\\end{align*}\n$$\n\nConsequently, as long as $K A_{1}$ and $K A_{2}$ are substantial, the fluctuation in the closed-loop gain with respect to the signal level is significantly less than that of the open-loop gain.\n\nAll these characteristics of negative feedback can also be attributed to the minimal error property exemplified in Fig. 12.3. For example, if the forward amplifier's gain varies at different signal levels,\n\nAmplifier driving a speaker (a) without, and (b) with feedback.\nthe feedback mechanism still ensures that the feedback signal closely mirrors the input, and thus, the output follows suit."
},
{
    "text": "Consider a system with the input/output characteristic depicted in Fig. 12.13(a). The observed nonlinearity can also be interpreted as a variation in the slope of the characteristic, namely, the small-signal gain. For instance, this system displays a gain of $A_{1}$ near $x=x_{1}$ and $A_{2}$ near $x=x_{2}$. When incorporated into a negative-feedback loop, the system yields a more consistent gain across various signal levels, thereby operating more linearly. Indeed, as shown in Fig. 12.13(b) for the closed-loop system, we can express\n\n$$\n\\text { Gain at } \\begin{align*}\nx_{1} & =\\frac{A_{1}}{1+K A_{1}}  \\tag{12.43}\\\\\n& \\approx \\frac{1}{K}\\left(1-\\frac{1}{K A_{1}}\\right) \\tag{12.44}\n\\end{align*}\n$$\n\nassuming $K A_{1} \\gg 1$. Likewise,\n\n$$\n\\text { Gain at } \\begin{align*}\nx_{2} & =\\frac{A_{2}}{1+K A_{2}}  \\tag{12.45}\\\\\n& \\approx \\frac{1}{K}\\left(1-\\frac{1}{K A_{2}}\\right) \\tag{12.46}\n\\end{align*}\n$$\n\nHence, provided $K A_{1}$ and $K A_{2}$ are substantial, the variation in closed-loop gain with signal level is significantly less than that of the open-loop gain.\n\nAll these characteristics of negative feedback can also be viewed as a consequence of the minimal error property illustrated in Fig. 12.3. For example, if the forward amplifier's gain varies at different signal levels,\n\nAmplifier driving a speaker (a) without, and (b) with feedback.\nthe feedback ensures that the feedback signal remains a close match to the input, and thus, the output follows suit."
},
{
    "text": "The amplifiers examined in this book so far detect and generate voltages. However, there are also other kinds of amplifiers, namely those that detect and/or generate currents. Figure 12.14 illustrates the four potential combinations along with their ideal input and output impedances. For instance, a circuit that detects current must exhibit low input impedance to function like a current meter. Likewise, a circuit that produces an output current must have high output impedance to emulate a current source. Readers are urged to verify the remaining cases. Understanding the differences between these four amplifier types is crucial for analyzing feedback circuits. It is important to note that the \"current-voltage\" and \"voltage-current\" amplifiers shown in Figs. 12.14(b) and (c) are typically referred to as \"transimpedance\" and \"transconductance\" amplifiers, respectively.\nimage_name:Figure 12.14 (a)\ndescription:Diagram (a) portrays a voltage amplifier with infinite input impedance and zero output impedance. The voltage source Vin is linked to the input of the operational amplifier A0, with the output taken at Vout. This setup ensures the amplifier does not burden the previous stage and delivers optimal voltage gain.\nimage_name:Figure 12.14 (b)\ndescription:Diagram (b) shows a transimpedance amplifier. It includes a voltage-controlled voltage source (R0) and a current source (Iin) with zero input and output resistance. The input connects to node X, and the output is at Vout.\nimage_name:Figure 12.14(c)\ndescription:Diagram (c) depicts a transconductance amplifier. It transforms an input voltage (Vin) into an output current (Iout). The input impedance is infinite, and the output impedance is zero.\nimage_name:Figure 12.14(d)\ndescription:This circuit represents a current amplifier with an input current source (Iin) and an operational amplifier (AI) producing an output current (Iout). The design features infinite output impedance (Rout = ∞) and zero input impedance (Rin = 0).\n\nFigure 12.14 (a) Voltage, (b) transimpedance, (c) transconductance, and (d) current amplifiers."
},
{
    "text": "The amplifiers examined so far in this book detect and generate voltages. However, there are also other kinds of amplifiers, namely those that detect and/or generate currents. Figure 12.14 illustrates the four possible combinations along with their ideal input and output impedances. For instance, a circuit that detects current must exhibit low input impedance to mimic a current meter. Likewise, a circuit producing an output current must have high output impedance to resemble a current source. Readers are encouraged to verify the remaining cases as well. Understanding the differences among these four amplifier types is crucial for analyzing feedback circuits. Note that the \"current-voltage\" and \"voltage-current\" amplifiers shown in Figs. 12.14(b) and (c) are typically referred to as \"transimpedance\" and \"transconductance\" amplifiers, respectively.\n\nimage_name:Figure 12.14 (a)\ndescription:The circuit diagram (a) shows a voltage amplifier with infinite input impedance and zero output impedance. The voltage source Vin is linked to the input of the operational amplifier A0, with the output taken at Vout. This setup ensures the amplifier does not burden the previous stage and delivers optimal voltage gain.\n\nimage_name:Figure 12.14 (b)\ndescription:The diagram (b) presents a transimpedance amplifier. It includes a voltage-controlled voltage source (R0) and a current source (Iin) with zero input and output resistance. The input is connected to node X, and the output is at Vout.\n\nimage_name:Figure 12.14(c)\ndescription:Diagram (c) depicts a transconductance amplifier. It transforms an input voltage (Vin) into an output current (Iout). The input impedance is infinite, and the output impedance is zero.\n\nimage_name:Figure 12.14(d)\ndescription:The circuit shows a current amplifier with an input current source (Iin) and an operational amplifier (AI) producing an output current (Iout). The design features an infinite output impedance (Rout = ∞) and zero input impedance (Rin = 0).\n\nFigure 12.14 (a) Voltage, (b) transimpedance, (c) transconductance, and (d) current amplifiers."
},
{
    "text": "The amplifiers examined so far in this book detect and generate voltages. However, less intuitively, there are also other types of amplifiers that sense and/or produce currents. Figure 12.14 illustrates the four potential combinations, along with their input and output impedances in the ideal scenario. For instance, a circuit that senses current must exhibit low input impedance to mimic a current meter. Likewise, a circuit that generates output current must have high output impedance to resemble a current source. Readers are encouraged to verify the other cases as well. Understanding the differences among these four amplifier types is crucial for analyzing feedback circuits. Note that the \"current-voltage\" and \"voltage-current\" amplifiers shown in Figs. 12.14(b) and (c) are commonly referred to as \"transimpedance\" and \"transconductance\" amplifiers, respectively.\n\n**Figure 12.14 (a) Description:**\nThe circuit diagram (a) shows a voltage amplifier with infinite input impedance and zero output impedance. The voltage source Vin is linked to the input of the operational amplifier A0, with the output taken at Vout. This setup ensures the amplifier does not load the previous stage and delivers ideal voltage gain.\n\n**Figure 12.14 (b) Description:**\nThe circuit in diagram (b) depicts a transimpedance amplifier. It includes a voltage-controlled voltage source (R0) and a current source (Iin) with zero input and output resistance. The input is connected to node X, and the output is at Vout.\n\n**Figure 12.14 (c) Description:**\nThe circuit in diagram (c) represents a transconductance amplifier. It transforms an input voltage (Vin) into an output current (Iout). The input impedance is infinite, and the output impedance is zero.\n\n**Figure 12.14 (d) Description:**\nThe circuit illustrates a current amplifier with an input current source (Iin) and an operational amplifier (AI) producing an output current (Iout). The design features an infinite output impedance (Rout = ∞) and zero input impedance (Rin = 0).\n\n**Figure 12.14 (a) Voltage, (b) transimpedance, (c) transconductance, and (d) current amplifiers.**"
},
{
    "text": "The amplifiers examined in this book thus far detect and generate voltages. However, less intuitively, there are also amplifiers that detect and/or generate currents. Figure 12.14 illustrates the four potential combinations, along with their ideal input and output impedances. For instance, a circuit that detects current must exhibit low input impedance to mimic a current meter. Likewise, a circuit producing an output current must have high output impedance to resemble a current source. Readers are encouraged to verify the other scenarios as well. The differentiation between the four amplifier types is crucial for analyzing feedback circuits. Note that the \"current-voltage\" and \"voltage-current\" amplifiers shown in Figs. 12.14(b) and (c) are typically referred to as \"transimpedance\" and \"transconductance\" amplifiers, respectively.\n\nimage_name:Figure 12.14 (a)\ndescription:The diagram (a) portrays a voltage amplifier with infinite input impedance and zero output impedance. The voltage source Vin is linked to the input of the operational amplifier A0, with the output taken at Vout. This setup ensures the amplifier does not burden the previous stage and delivers optimal voltage gain.\n\nimage_name:Figure 12.14 (b)\ndescription:Diagram (b) shows a transimpedance amplifier featuring a voltage-controlled voltage source (R0) and a current source (Iin) with zero input and output resistance. The input connects to node X, and the output is at Vout.\n\nimage_name:Figure 12.14(c)\ndescription:Diagram (c) depicts a transconductance amplifier that converts an input voltage (Vin) to an output current (Iout). It has infinite input impedance and zero output impedance.\n\nimage_name:Figure 12.14(d)\ndescription:The circuit illustrates a current amplifier with an input current source (Iin) and an operational amplifier (AI) producing an output current (Iout). It is designed with infinite output impedance (Rout = ∞) and zero input impedance (Rin = 0).\n\nFigure 12.14 (a) Voltage, (b) transimpedance, (c) transconductance, and (d) current amplifiers."
},
{
    "text": "The amplifiers discussed so far in this book detect and generate voltages. However, there are also other amplifier types, namely those that detect and/or generate currents. Figure 12.14 illustrates the four potential combinations, along with their ideal input and output impedances. For instance, a circuit that detects current must exhibit low input impedance to mimic a current meter. Likewise, a circuit producing output current must have high output impedance to resemble a current source. Readers are advised to verify the remaining cases as well. The differentiation between these four amplifier types is crucial for analyzing feedback circuits. It is noteworthy that the \"current-voltage\" and \"voltage-current\" amplifiers shown in Figs. 12.14(b) and (c) are typically referred to as \"transimpedance\" and \"transconductance\" amplifiers, respectively.\n\n**Figure 12.14 (a)**\n*Description*: The circuit diagram (a) shows a voltage amplifier with infinite input impedance and zero output impedance. The voltage source Vin is linked to the input of the operational amplifier A0, with the output taken at Vout. This setup ensures the amplifier does not burden the preceding stage and delivers optimal voltage gain.\n\n**Figure 12.14 (b)**\n*Description*: Diagram (b) depicts a transimpedance amplifier. It includes a voltage-controlled voltage source (R0) and a current source (Iin) with zero input and output resistance. The input connects to node X, and the output is at Vout.\n\n**Figure 12.14 (c)**\n*Description*: Diagram (c) portrays a transconductance amplifier. It transforms an input voltage (Vin) into an output current (Iout). The input impedance is infinite, and the output impedance is zero.\n\n**Figure 12.14 (d)**\n*Description*: This circuit represents a current amplifier with an input current source (Iin) and an operational amplifier (AI) producing an output current (Iout). The design features infinite output impedance (Rout = ∞) and zero input impedance (Rin = 0).\n\nFigure 12.14 (a) Voltage, (b) transimpedance, (c) transconductance, and (d) current amplifiers."
},
{
    "text": "The amplifiers examined so far in this book detect and generate voltages. However, there are also less intuitive amplifier types that sense and/or produce currents. Figure 12.14 illustrates the four potential combinations, along with their ideal input and output impedances. For instance, a circuit that detects current must exhibit low input impedance to mimic a current meter. Likewise, a circuit producing output current must have high output impedance to resemble a current source. Readers are encouraged to verify the remaining cases. Understanding the differences among these four amplifier types is crucial for analyzing feedback circuits. Note that the \"current-voltage\" and \"voltage-current\" amplifiers shown in Figs. 12.14(b) and (c) are typically referred to as \"transimpedance\" and \"transconductance\" amplifiers, respectively.\n\nimage_name:Figure 12.14 (a)\ndescription:The diagram (a) shows a voltage amplifier with infinite input impedance and zero output impedance. The voltage source Vin is linked to the input of the operational amplifier A0, with the output obtained at Vout. This setup ensures the amplifier does not burden the previous stage and delivers optimal voltage gain.\n\nimage_name:Figure 12.14 (b)\ndescription:Diagram (b) illustrates a transimpedance amplifier, featuring a voltage-controlled voltage source (R0) and a current source (Iin) with zero input and output resistance. The input is connected to node X, and the output is at Vout.\n\nimage_name:Figure 12.14(c)\ndescription:Diagram (c) depicts a transconductance amplifier that converts an input voltage (Vin) to an output current (Iout). It has infinite input impedance and zero output impedance.\n\nimage_name:Figure 12.14(d)\ndescription:The circuit portrays a current amplifier with an input current source (Iin) and an operational amplifier (AI) producing an output current (Iout). It is designed with infinite output impedance (Rout = ∞) and zero input impedance (Rin = 0).\n\nFigure 12.14 (a) Voltage, (b) transimpedance, (c) transconductance, and (d) current amplifiers."
},
{
    "text": "The amplifiers examined so far in this book detect and generate voltages. However, there are also less intuitive amplifier types that sense and/or produce currents. Figure 12.14 illustrates the four potential combinations, including their ideal input and output impedances. For instance, a circuit that detects current must have a low input impedance, akin to a current meter. Likewise, a circuit producing an output current must have a high output impedance, similar to a current source. Readers are advised to verify the other scenarios as well. Understanding the differences between these four amplifier types is crucial for analyzing feedback circuits. Note that the \"current-voltage\" and \"voltage-current\" amplifiers shown in Figs. 12.14(b) and (c) are typically referred to as \"transimpedance\" and \"transconductance\" amplifiers, respectively.\n\n**Figure 12.14 (a)**\nThe circuit diagram (a) shows a voltage amplifier with infinite input impedance and zero output impedance. The voltage source Vin is linked to the input of the operational amplifier A0, with the output taken at Vout. This setup ensures the amplifier does not burden the previous stage and delivers optimal voltage gain.\n\n**Figure 12.14 (b)**\nThe circuit in diagram (b) depicts a transimpedance amplifier. It includes a voltage-controlled voltage source (R0) and a current source (Iin) with zero input and output resistance. The input is connected to node X, and the output is at Vout.\n\n**Figure 12.14 (c)**\nThe circuit in diagram (c) represents a transconductance amplifier. It transforms an input voltage (Vin) into an output current (Iout). The input impedance is infinite, and the output impedance is zero.\n\n**Figure 12.14 (d)**\nThe circuit illustrates a current amplifier with an input current source (Iin) and an operational amplifier (AI) producing an output current (Iout). The design features an infinite output impedance (Rout = ∞) and zero input impedance (Rin = 0).\n\n**Figure 12.14 (a) Voltage, (b) transimpedance, (c) transconductance, and (d) current amplifiers.**"
},
{
    "text": "The amplifiers discussed so far in this book detect and generate voltages. However, less intuitively, there are also amplifiers that detect and/or generate currents. Figure 12.14 illustrates the four possible combinations, along with their ideal input and output impedances. For instance, a circuit that detects current must have a low input impedance, akin to a current meter. Likewise, a circuit that produces an output current must have a high output impedance, similar to a current source. Readers are encouraged to verify the other scenarios as well. The differences among these four amplifier types are crucial for analyzing feedback circuits. Note that the \"current-voltage\" and \"voltage-current\" amplifiers shown in Figs. 12.14(b) and (c) are commonly referred to as \"transimpedance\" and \"transconductance\" amplifiers, respectively.\n\n**Figure 12.14 (a) Description:**\nThe circuit diagram (a) shows a voltage amplifier with infinite input impedance and zero output impedance. The voltage source Vin is connected to the input of the operational amplifier A0, and the output is taken at Vout. This setup ensures the amplifier does not load the previous stage and provides ideal voltage gain.\n\n**Figure 12.14 (b) Description:**\nThe circuit in diagram (b) depicts a transimpedance amplifier. It includes a voltage-controlled voltage source (R0) and a current source (Iin) with zero input and output resistance. The input is connected to node X, and the output is at Vout.\n\n**Figure 12.14 (c) Description:**\nThe circuit in diagram (c) represents a transconductance amplifier. It converts an input voltage (Vin) to an output current (Iout). The input impedance is infinite, and the output impedance is zero.\n\n**Figure 12.14 (d) Description:**\nThe circuit illustrates a current amplifier with an input current source (Iin) and an operational amplifier (AI) delivering an output current (Iout). The design features an infinite output impedance (Rout = ∞) and zero input impedance (Rin = 0).\n\n**Figure 12.14 (a) Voltage, (b) transimpedance, (c) transconductance, and (d) current amplifiers.**"
},
{
    "text": "For our subsequent studies in this chapter, it is advantageous to create simple models for the four types of amplifiers. Shown in Fig. 12.15 are the models for the ideal scenarios. The voltage amplifier in Fig. 12.15(a) offers an infinite input impedance, allowing it to detect voltages like an ideal voltmeter, i.e., without affecting the preceding stage. Additionally, the circuit displays a\nimage_name:Figure 12.15(a)\ndescription:This circuit diagram illustrates a voltage amplifier featuring a voltage-controlled voltage source A0. The input voltage is Vin, and the output voltage is Vout. The amplifier has an infinite input impedance and is grounded at the negative terminal.\nimage_name:Figure 12.15(b)\ndescription:The circuit is a transimpedance amplifier where the input current (iin) is converted to an output voltage (Vout) by the transimpedance gain R0.\nimage_name:Figure 12.15(c)\ndescription:This circuit is a transconductance amplifier where the input voltage 'Vin' controls the output current 'i_out'. The transconductance is denoted by 'Gm'. The load is connected to the output current 'i_out'.\nimage_name:Figure 12.15(d)\ndescription:The circuit diagram (d) shows a current amplifier model where the output current (i_out) is controlled by the input current (i_in). The current-controlled current source A1 amplifies the input current i_in to produce the output current i_out. The load is connected to the output current path.\n\nFigure 12.15 Ideal models for (a) voltage, (b) transimpedance, (c) transconductance, and (d) current amplifiers.\nimage_name:Figure 12.16 (a)\ndescription:The circuit diagram illustrates a voltage amplifier model. The input voltage Vin is applied across the resistor Rin, and the amplified output voltage A0*Vin is generated across the op-amp A0, with the output Vout across the resistor Rout.\n\nimage_name:Figure 12.16(b)\ndescription:The circuit diagram shows an incorrect voltage amplifier model. The input voltage Vin is applied across the resistor Rin, and a voltage-controlled current source Gmv_in is used. The output is taken across the resistor Rout.\n\n\nimage_name:Figure 12.16 (c)\ndescription:The circuit diagram depicts a realistic model of a current amplifier. The input current i_in flows through the resistor Rin, and the voltage-controlled voltage source R0i_in is used. The output is taken across the resistor Rout.\n\nimage_name:Figure 12.16(d)\ndescription:The circuit diagram shows a realistic model of a current amplifier. The input current i_in flows through the resistor Rin, and the current-controlled current source A is used. The output is taken across the resistor Rout.\n\nFigure 12.16 (a) Realistic model of voltage amplifier, (b) incorrect voltage amplifier model, (c) realistic model of transimpedance amplifier, (d) incorrect model of transimpedance amplifier, (e) realistic model of transconductance amplifier, (f) realistic model of current amplifier.\nzero output impedance, enabling it to function as an ideal voltage source, i.e., deliver $v_{\\text {out }}=A_{0} v_{\\text {in }}$ irrespective of the load impedance.\n\nThe transimpedance amplifier in Fig. 12.15(b) features a zero input impedance, allowing it to measure currents like an ideal current meter. Like the voltage amplifier, its output impedance is also zero if it operates as an ideal voltage source. Note that the \"transimpedance gain\" of this amplifier, $R_{0}=v_{\\text {out }} / i_{\\text {in }}$, is expressed in units of resistance. For instance, a transimpedance gain of $2 \\mathrm{k} \\Omega$ means a 1-mA change in the input current results in a 2-V change at the output.\n\nThe I/O impedances of the configurations in Figs. 12.15(c) and (d) follow similar principles. It is noteworthy that the amplifier in Fig. 12.15(c) has a \"transconductance gain,\" $G_{m}=i_{\\text {out }} / v_{\\text {in }}$, which is measured in transconductance.\n\nIn practice, the ideal models in Fig. 12.15 may not be precise. Specifically, the I/O impedances may not be negligibly large or small. Figure 12.16 presents more realistic models of the four amplifier types. As shown in Fig. 12.16(a), the voltage amplifier model includes an input resistance in parallel with the input port and an output resistance in series with the output port. These selections are unique and become more apparent if we consider other combinations. For example, if we imagine the model as depicted in Fig. 12.16(b), the input and output impedances remain infinite and zero, respectively, regardless of the values of $R_{\\text {in }}$ and $R_{\\text {out }}$. (Why?) Thus, the topology of Fig. 12.16(a) is the only viable model representing finite I/O impedances.\n\nFigure 12.16(c) illustrates a nonideal transimpedance amplifier. Here, the input resistance is in series with the input. Again, if we attempt a model like that in Fig. 12.16(d), the input resistance remains zero. The other two amplifier models in Figs. 12.16(e) and (f) adhere to similar principles."
},
{
    "text": "For our subsequent studies in this chapter, it is advantageous to create simple models for the four types of amplifiers. Shown in Fig. 12.15 are the models for the ideal scenarios. The voltage amplifier in Fig. 12.15(a) features an infinite input impedance, allowing it to measure voltages like an ideal voltmeter, i.e., without affecting the preceding stage. Additionally, the circuit has a\nimage_name:Figure 12.15(a)\ndescription:A circuit diagram illustrating a voltage amplifier with a voltage-controlled voltage source A0. The input voltage is Vin, and the output voltage is Vout. The amplifier possesses infinite input impedance and is grounded at the negative terminal.\nimage_name:Figure 12.15(b)\ndescription:This circuit is a transimpedance amplifier where the input current (iin) is converted to an output voltage (Vout) through the transimpedance gain R0.\nimage_name:Figure 12.15(c)\ndescription:Represented here is a transconductance amplifier circuit where the input voltage 'Vin' controls the output current 'i_out'. The transconductance is denoted by 'Gm', and the load is connected to the output current 'i_out'.\nimage_name:Figure 12.15(d)\ndescription:The circuit diagram (d) shows a current amplifier model where the output current (i_out) is governed by the input current (i_in). The current-controlled current source A1 amplifies the input current i_in to generate the output current i_out, with the load connected to the output current path.\n\nFigure 12.15 Ideal models for (a) voltage, (b) transimpedance, (c) transconductance, and (d) current amplifiers.\nimage_name:Figure 12.16 (a)\ndescription:The circuit diagram illustrates a voltage amplifier model. The input voltage Vin is applied across the resistor Rin, and the amplified output voltage A0*Vin is produced across the op-amp A0, with the output Vout across the resistor Rout.\n\nimage_name:Figure 12.16(b)\ndescription:The circuit diagram depicts an incorrect voltage amplifier model. The input voltage Vin is applied across the resistor Rin, and a voltage-controlled current source Gmv_in is used. The output is measured across the resistor Rout.\n\n\nimage_name:Figure 12.16 (c)\ndescription:The circuit diagram shows a realistic model of a current amplifier. The input current i_in flows through the resistor Rin, and the voltage-controlled voltage source R0i_in is employed. The output is taken across the resistor Rout.\n\nimage_name:Figure 12.16(d)\ndescription:The circuit diagram represents a realistic model of a current amplifier. The input current i_in flows through the resistor Rin, and a current-controlled current source A is utilized. The output is measured across the resistor Rout.\n\nFigure 12.16 (a) Realistic model of voltage amplifier, (b) incorrect voltage amplifier model, (c) realistic model of transimpedance amplifier, (d) incorrect model of transimpedance amplifier, (e) realistic model of transconductance amplifier, (f) realistic model of current amplifier.\nzero output impedance, enabling it to act as an ideal voltage source, i.e., it delivers $v_{\\text {out }}=A_{0} v_{\\text {in }}$ irrespective of the load impedance.\n\nThe transimpedance amplifier in Fig. 12.15(b) exhibits zero input impedance, allowing it to measure currents like an ideal current meter. Like the voltage amplifier, its output impedance is also zero if it functions as an ideal voltage source. Note that the \"transimpedance gain\" of this amplifier, $R_{0}=v_{\\text {out }} / i_{\\text {in }}$, is measured in ohms. For instance, a transimpedance gain of $2 \\mathrm{k} \\Omega$ means a 1-mA change in input current results in a 2-V change at the output.\n\nThe I/O impedances of the configurations in Figs. 12.15(c) and (d) follow similar principles. It is noteworthy that the amplifier in Fig. 12.15(c) has a \"transconductance gain,\" $G_{m}=i_{\\text {out }} / v_{\\text {in }}$, with units of transconductance.\n\nIn practice, the ideal models in Fig. 12.15 may not be precise. Specifically, the I/O impedances may not be negligibly large or small. Figure 12.16 presents more realistic models of the four amplifier types. In Fig. 12.16(a), the voltage amplifier model includes an input resistance in parallel with the input port and an output resistance in series with the output port. These selections are unique and become more evident if we consider other combinations. For example, if we imagine the model as shown in Fig. 12.16(b), the input and output impedances remain infinite and zero, respectively, regardless of the values of $R_{\\text {in }}$ and $R_{\\text {out }}$. (Why?) Thus, the topology of Fig. 12.16(a) is the only viable model representing finite I/O impedances.\n\nFigure 12.16(c) illustrates a nonideal transimpedance amplifier. Here, the input resistance is in series with the input. Again, if we attempt a model like that in Fig. 12.16(d), the input resistance remains zero. The other two amplifier models in Figs. 12.16(e) and (f) adhere to similar principles."
},
{
    "text": "For our subsequent studies in this chapter, it is advantageous to construct simple models for the four types of amplifiers. Figure 12.15 illustrates the models for the ideal scenarios. The voltage amplifier in Fig. 12.15(a) features an infinite input impedance, enabling it to detect voltages like an ideal voltmeter, i.e., without affecting the preceding stage. Additionally, the circuit possesses a\nimage_name:Figure 12.15(a)\ndescription:This circuit diagram depicts a voltage amplifier with a voltage-controlled voltage source A0. The input voltage is Vin, and the output voltage is Vout. The amplifier has infinite input impedance and is grounded at the negative terminal.\nimage_name:Figure 12.15(b)\ndescription:The circuit is a transimpedance amplifier where the input current (iin) is converted to an output voltage (Vout) via the transimpedance gain R0.\nimage_name:Figure 12.15(c)\ndescription:This circuit is a transconductance amplifier where the input voltage 'Vin' controls the output current 'i_out'. The transconductance is denoted by 'Gm', and the load is connected to the output current 'i_out'.\nimage_name:Figure 12.15(d)\ndescription:The circuit diagram (d) shows a current amplifier model where the output current (i_out) is controlled by the input current (i_in). The current-controlled current source A1 amplifies the input current i_in to produce the output current i_out. The load is connected to the output current path.\n\nFigure 12.15 Ideal models for (a) voltage, (b) transimpedance, (c) transconductance, and (d) current amplifiers.\nimage_name:Figure 12.16 (a)\ndescription:The circuit diagram shows a voltage amplifier model. The input voltage Vin is applied across the resistor Rin, and the amplified output voltage A0*Vin is generated across the op-amp A0, with the output Vout across the resistor Rout.\n\nimage_name:Figure 12.16(b)\ndescription:The circuit diagram illustrates an incorrect voltage amplifier model. The input voltage Vin is applied across the resistor Rin, and a voltage-controlled current source Gmv_in is used. The output is taken across the resistor Rout.\n\n\nimage_name:Figure 12.16 (c)\ndescription:The circuit diagram shows a realistic model of a current amplifier. The input current i_in flows through the resistor Rin, and the voltage-controlled voltage source R0i_in is used. The output is taken across the resistor Rout.\n\nimage_name:Figure 12.16(d)\ndescription:The circuit diagram depicts a realistic model of a current amplifier. The input current i_in flows through the resistor Rin, and the current-controlled current source A is used. The output is taken across the resistor Rout.\n\nFigure 12.16 (a) Realistic model of voltage amplifier, (b) incorrect voltage amplifier model, (c) realistic model of transimpedance amplifier, (d) incorrect model of transimpedance amplifier, (e) realistic model of transconductance amplifier, (f) realistic model of current amplifier.\nzero output impedance, allowing it to function as an ideal voltage source, i.e., deliver $v_{\\text {out }}=A_{0} v_{\\text {in }}$ irrespective of the load impedance.\n\nThe transimpedance amplifier in Fig. 12.15(b) exhibits zero input impedance, enabling it to measure currents like an ideal current meter. Like the voltage amplifier, its output impedance is also zero if it operates as an ideal voltage source. Note that the \"transimpedance gain\" of this amplifier, $R_{0}=v_{\\text {out }} / i_{\\text {in }}$, is a measure of resistance. For instance, a transimpedance gain of $2 \\mathrm{k} \\Omega$ means a 1-mA change in the input current results in a 2-V change at the output.\n\nThe I/O impedances of the configurations in Figs. 12.15(c) and (d) follow similar principles. It is noteworthy that the amplifier in Fig. 12.15(c) has a \"transconductance gain,\" $G_{m}=i_{\\text {out }} / v_{\\text {in }}$, which is a measure of transconductance.\n\nIn practice, the ideal models in Fig. 12.15 may not be precise. Specifically, the I/O impedances may not be extremely large or small. Figure 12.16 presents more realistic models of the four amplifier types. As shown in Fig. 12.16(a), the voltage amplifier model includes an input resistance in parallel with the input port and an output resistance in series with the output port. These choices are unique and become more evident if we consider other combinations. For example, if we想象 the model as shown in Fig. 12.16(b), the input and output impedances remain infinite and zero, respectively, regardless of the values of $R_{\\text {in }}$ and $R_{\\text {out }}$. (Why?) Thus, the topology of Fig. 12.16(a) is the only viable model representing finite I/O impedances.\n\nFigure 12.16(c) illustrates a nonideal transimpedance amplifier. Here, the input resistance is in series with the input. Again, if we attempt a model like that in Fig. 12.16(d), the input resistance would be zero. The remaining two amplifier models in Figs. 12.16(e) and (f) adhere to similar principles."
},
{
    "text": "For our subsequent studies in this chapter, it is advantageous to create straightforward models for the four types of amplifiers. Shown in Fig. 12.15 are the ideal models for these amplifiers. The voltage amplifier in Fig. 12.15(a) features an infinite input impedance, allowing it to measure voltages like an ideal voltmeter, i.e., without affecting the preceding stage. Additionally, the circuit has a\nimage_name:Figure 12.15(a)\ndescription:This circuit diagram illustrates a voltage amplifier with a voltage-controlled voltage source A0. The input voltage is Vin, and the output voltage is Vout. The amplifier possesses infinite input impedance and is grounded at the negative terminal.\nimage_name:Figure 12.15(b)\ndescription:The circuit is a transimpedance amplifier where the input current (iin) is transformed into an output voltage (Vout) through the transimpedance gain R0.\nimage_name:Figure 12.15(c)\ndescription:This circuit represents a transconductance amplifier where the input voltage 'Vin' controls the output current 'i_out'. The transconductance is denoted by 'Gm', and the load is connected to the output current 'i_out'.\nimage_name:Figure 12.15(d)\ndescription:The circuit diagram (d) depicts a current amplifier model where the output current (i_out) is governed by the input current (i_in). The current-controlled current source A1 amplifies the input current i_in to produce the output current i_out, with the load connected to the output current path.\n\nFigure 12.15 Ideal models for (a) voltage, (b) transimpedance, (c) transconductance, and (d) current amplifiers.\nimage_name:Figure 12.16 (a)\ndescription:The circuit diagram shows a voltage amplifier model. The input voltage Vin is applied across the resistor Rin, and the amplified output voltage A0*Vin is produced across the op-amp A0, with the output Vout across the resistor Rout.\n\nimage_name:Figure 12.16(b)\ndescription:The circuit diagram illustrates an incorrect voltage amplifier model. The input voltage Vin is applied across the resistor Rin, and a voltage-controlled current source Gmv_in is used. The output is measured across the resistor Rout.\n\n\nimage_name:Figure 12.16 (c)\ndescription:The circuit diagram shows a realistic model of a current amplifier. The input current i_in flows through the resistor Rin, and the voltage-controlled voltage source R0i_in is employed. The output is taken across the resistor Rout.\n\nimage_name:Figure 12.16(d)\ndescription:The circuit diagram depicts a realistic model of a current amplifier. The input current i_in flows through the resistor Rin, and a current-controlled current source A is used. The output is measured across the resistor Rout.\n\nFigure 12.16 (a) Realistic model of voltage amplifier, (b) incorrect voltage amplifier model, (c) realistic model of transimpedance amplifier, (d) incorrect model of transimpedance amplifier, (e) realistic model of transconductance amplifier, (f) realistic model of current amplifier.\nzero output impedance, enabling it to act as an ideal voltage source, i.e., deliver $v_{\\text {out }}=A_{0} v_{\\text {in }}$ irrespective of the load impedance.\n\nThe transimpedance amplifier in Fig. 12.15(b) exhibits zero input impedance, allowing it to measure currents like an ideal current meter. Like the voltage amplifier, its output impedance is also zero if it functions as an ideal voltage source. The \"transimpedance gain\" of this amplifier, $R_{0}=v_{\\text {out }} / i_{\\text {in }}$, is a measure of resistance. For instance, a transimpedance gain of $2 \\mathrm{k} \\Omega$ means a 1-mA change in the input current results in a 2-V change at the output.\n\nThe input/output impedances of the topologies in Figs. 12.15(c) and (d) follow similar principles. Notably, the amplifier in Fig. 12.15(c) has a \"transconductance gain,\" $G_{m}=i_{\\text {out }} / v_{\\text {in }}$, which is a measure of transconductance.\n\nIn practical scenarios, the ideal models in Fig. 12.15 may not be precise. Specifically, the input/output impedances may not be extremely large or small. Figure 12.16 presents more realistic models of the four amplifier types. In Fig. 12.16(a), the voltage amplifier model includes an input resistance in parallel with the input port and an output resistance in series with the output port. These configurations are unique and become evident when considering other combinations. For example, if we consider the model in Fig. 12.16(b), the input and output impedances remain infinite and zero, respectively, regardless of $R_{\\text {in }}$ and $R_{\\text {out }}$ values. (Why?) Thus, the topology in Fig. 12.16(a) is the only viable model representing finite input/output impedances.\n\nFigure 12.16(c) illustrates a nonideal transimpedance amplifier. Here, the input resistance is in series with the input. If we attempt a model like that in Fig. 12.16(d), the input resistance remains zero. The remaining two amplifier models in Figs. 12.16(e) and (f) adhere to similar principles."
},
{
    "text": "For our subsequent studies in this chapter, it is advantageous to create simple models for the four types of amplifiers. Illustrated in Fig. 12.15 are the models for the ideal scenarios. The voltage amplifier in Fig. 12.15(a) features an infinite input impedance, allowing it to detect voltages like an ideal voltmeter, i.e., without impacting the preceding stage. Additionally, the circuit possesses a\nimage_name:Figure 12.15(a)\ndescription:A circuit diagram showing a voltage amplifier with a voltage-controlled voltage source A0. The input voltage is Vin, and the output voltage is Vout. The amplifier has infinite input impedance and is grounded at the negative terminal.\nimage_name:Figure 12.15(b)\ndescription:The circuit is a transimpedance amplifier where the input current (iin) is converted to an output voltage (Vout) by the transimpedance gain R0.\nimage_name:Figure 12.15(c)\ndescription:This circuit is a transconductance amplifier where the input voltage 'Vin' controls the output current 'i_out'. The transconductance is denoted by 'Gm'. The load is connected to the output current 'i_out'.\nimage_name:Figure 12.15(d)\ndescription:The circuit diagram (d) shows a current amplifier model where the output current (i_out) is controlled by the input current (i_in). The current-controlled current source A1 amplifies the input current i_in to produce the output current i_out. The load is connected to the output current path.\n\nFigure 12.15 Ideal models for (a) voltage, (b) transimpedance, (c) transconductance, and (d) current amplifiers.\nimage_name:Figure 12.16 (a)\ndescription:The circuit diagram shows a voltage amplifier model. The input voltage Vin is applied across the resistor Rin, and the amplified output voltage A0*Vin is generated across the op-amp A0, with the output Vout across the resistor Rout.\n\nimage_name:Figure 12.16(b)\ndescription:The circuit diagram shows an incorrect voltage amplifier model. The input voltage Vin is applied across the resistor Rin, and a voltage-controlled current source Gmv_in is used. The output is taken across the resistor Rout.\n\n\nimage_name:Figure 12.16 (c)\ndescription:The circuit diagram shows a realistic model of a current amplifier. The input current i_in flows through the resistor Rin, and the voltage-controlled voltage source R0i_in is used. The output is taken across the resistor Rout.\n\nimage_name:Figure 12.16(d)\ndescription:The circuit diagram shows a realistic model of a current amplifier. The input current i_in flows through the resistor Rin, and the current-controlled current source A is used. The output is taken across the resistor Rout.\n\nFigure 12.16 (a) Realistic model of voltage amplifier, (b) incorrect voltage amplifier model, (c) realistic model of transimpedance amplifier, (d) incorrect model of transimpedance amplifier, (e) realistic model of transconductance amplifier, (f) realistic model of current amplifier.\nzero output impedance, enabling it to act as an ideal voltage source, i.e., deliver $v_{\\text {out }}=A_{0} v_{\\text {in }}$ irrespective of the load impedance.\n\nThe transimpedance amplifier in Fig. 12.15(b) has a zero input impedance, allowing it to measure currents like an ideal current meter. Like the voltage amplifier, its output impedance is also zero if it functions as an ideal voltage source. Note that the \"transimpedance gain\" of this amplifier, $R_{0}=v_{\\text {out }} / i_{\\text {in }}$, is measured in ohms. For instance, a transimpedance gain of $2 \\mathrm{k} \\Omega$ means a 1-mA change in the input current results in a 2-V change at the output.\n\nThe I/O impedances of the configurations in Figs. 12.15(c) and (d) follow similar principles. It is noteworthy that the amplifier in Fig. 12.15(c) has a \"transconductance gain,\" $G_{m}=i_{\\text {out }} / v_{\\text {in }}$, measured in siemens.\n\nIn practice, the ideal models in Fig. 12.15 may not be precise. Specifically, the I/O impedances may not be extremely large or small. Figure 12.16 presents more realistic models of the four amplifier types. As shown in Fig. 12.16(a), the voltage amplifier model includes an input resistance in parallel with the input port and an output resistance in series with the output port. These selections are unique and become more apparent if we consider other combinations. For example, if we想象 the model as in Fig. 12.16(b), the input and output impedances remain infinite and zero, respectively, regardless of the values of $R_{\\text {in }}$ and $R_{\\text {out }}$. (Why?) Thus, the topology of Fig. 12.16(a) is the only viable model representing finite I/O impedances.\n\nFigure 12.16(c) shows a nonideal transimpedance amplifier. Here, the input resistance is in series with the input. Again, if we attempt a model like that in Fig. 12.16(d), the input resistance is zero. The other two amplifier models in Figs. 12.16(e) and (f) follow similar logic."
},
{
    "text": "For our subsequent studies in this chapter, it is advantageous to create straightforward models for the four types of amplifiers. Illustrated in Fig. 12.15 are the ideal models for these amplifiers. The voltage amplifier shown in Fig. 12.15(a) offers an infinite input impedance, enabling it to detect voltages like an ideal voltmeter, i.e., without impacting the preceding stage. Additionally, the circuit features a\nimage_name:Figure 12.15(a)\ndescription:A circuit diagram depicting a voltage amplifier with a voltage-controlled voltage source A0. The input voltage is Vin, and the output voltage is Vout. The amplifier has infinite input impedance and is grounded at the negative terminal.\nimage_name:Figure 12.15(b)\ndescription:This circuit is a transimpedance amplifier where the input current (iin) is converted to an output voltage (Vout) via the transimpedance gain R0.\nimage_name:Figure 12.15(c)\ndescription:Shown here is a transconductance amplifier circuit where the input voltage 'Vin' controls the output current 'i_out'. The transconductance is denoted by 'Gm', and the load is connected to the output current 'i_out'.\nimage_name:Figure 12.15(d)\ndescription:The circuit diagram (d) illustrates a current amplifier model where the output current (i_out) is governed by the input current (i_in). The current-controlled current source A1 amplifies the input current i_in to produce the output current i_out, with the load connected to the output current path.\n\nFigure 12.15 Ideal models for (a) voltage, (b) transimpedance, (c) transconductance, and (d) current amplifiers.\nimage_name:Figure 12.16 (a)\ndescription:The circuit diagram shows a voltage amplifier model. The input voltage Vin is applied across the resistor Rin, and the amplified output voltage A0*Vin is produced across the op-amp A0, with the output Vout across the resistor Rout.\n\nimage_name:Figure 12.16(b)\ndescription:The circuit diagram depicts an incorrect voltage amplifier model. The input voltage Vin is applied across the resistor Rin, and a voltage-controlled current source Gmv_in is used. The output is measured across the resistor Rout.\n\n\nimage_name:Figure 12.16 (c)\ndescription:The circuit diagram represents a realistic model of a current amplifier. The input current i_in flows through the resistor Rin, and the voltage-controlled voltage source R0i_in is employed. The output is taken across the resistor Rout.\n\nimage_name:Figure 12.16(d)\ndescription:The circuit diagram illustrates a realistic model of a current amplifier. The input current i_in flows through the resistor Rin, and a current-controlled current source A is used. The output is measured across the resistor Rout.\n\nFigure 12.16 (a) Realistic model of voltage amplifier, (b) incorrect voltage amplifier model, (c) realistic model of transimpedance amplifier, (d) incorrect model of transimpedance amplifier, (e) realistic model of transconductance amplifier, (f) realistic model of current amplifier.\nzero output impedance, allowing it to function as an ideal voltage source, i.e., it delivers $v_{\\text {out }}=A_{0} v_{\\text {in }}$ irrespective of the load impedance.\n\nThe transimpedance amplifier in Fig. 12.15(b) possesses a zero input impedance, enabling it to measure currents like an ideal current meter. Like the voltage amplifier, its output impedance is also zero if it operates as an ideal voltage source. Note that the \"transimpedance gain\" of this amplifier, $R_{0}=v_{\\text {out }} / i_{\\text {in }}$, is measured in ohms. For instance, a transimpedance gain of $2 \\mathrm{k} \\Omega$ means a 1-mA change in the input current results in a 2-V change at the output.\n\nThe input/output impedances of the configurations in Figs. 12.15(c) and (d) follow similar principles. It is noteworthy that the amplifier in Fig. 12.15(c) has a \"transconductance gain,\" $G_{m}=i_{\\text {out }} / v_{\\text {in }}$, which is measured in siemens.\n\nIn practical terms, the ideal models in Fig. 12.15 may not be precise. Specifically, the input/output impedances may not be negligibly large or small. Figure 12.16 presents more realistic models of the four amplifier types. As shown in Fig. 12.16(a), the voltage amplifier model includes an input resistance in parallel with the input port and an output resistance in series with the output port. These selections are unique and become more apparent if we consider other combinations. For example, if we imagine the model as depicted in Fig. 12.16(b), the input and output impedances remain infinite and zero, respectively, regardless of the values of $R_{\\text {in }}$ and $R_{\\text {out }}$. (Why?) Thus, the topology of Fig. 12.16(a) is the only viable model representing finite input/output impedances.\n\nFigure 12.16(c) portrays a nonideal transimpedance amplifier. Here, the input resistance is in series with the input. Again, if we attempt a model like that in Fig. 12.16(d), the input resistance remains zero. The remaining two amplifier models in Figs. 12.16(e) and (f) adhere to similar principles."
},
{
    "text": "For our subsequent studies in this chapter, it is advantageous to create straightforward models for the four types of amplifiers. Figure 12.15 illustrates the models for the ideal scenarios. The voltage amplifier in Fig. 12.15(a) features an infinite input impedance, enabling it to detect voltages like an ideal voltmeter, i.e., without impacting the preceding stage. Additionally, the circuit boasts a\nimage_name:Figure 12.15(a)\ndescription:A circuit diagram depicting a voltage amplifier with a voltage-controlled voltage source A0. The input voltage is Vin, and the output voltage is Vout. The amplifier has infinite input impedance and is grounded at the negative terminal.\nimage_name:Figure 12.15(b)\ndescription:The circuit is a transimpedance amplifier where the input current (iin) is converted to an output voltage (Vout) via the transimpedance gain R0.\nimage_name:Figure 12.15(c)\ndescription:This circuit is a transconductance amplifier where the input voltage 'Vin' controls the output current 'i_out'. The transconductance is denoted by 'Gm', and the load is connected to the output current 'i_out'.\nimage_name:Figure 12.15(d)\ndescription:The circuit diagram (d) shows a current amplifier model where the output current (i_out) is controlled by the input current (i_in). The current-controlled current source A1 amplifies the input current i_in to produce the output current i_out, with the load connected to the output current path.\n\nFigure 12.15 Ideal models for (a) voltage, (b) transimpedance, (c) transconductance, and (d) current amplifiers.\nimage_name:Figure 12.16 (a)\ndescription:The circuit diagram shows a voltage amplifier model. The input voltage Vin is applied across the resistor Rin, and the amplified output voltage A0*Vin is generated across the op-amp A0, with the output Vout across the resistor Rout.\n\nimage_name:Figure 12.16(b)\ndescription:The circuit diagram illustrates an incorrect voltage amplifier model. The input voltage Vin is applied across the resistor Rin, and a voltage-controlled current source Gmv_in is used. The output is taken across the resistor Rout.\n\n\nimage_name:Figure 12.16 (c)\ndescription:The circuit diagram shows a realistic model of a current amplifier. The input current i_in flows through the resistor Rin, and the voltage-controlled voltage source R0i_in is used. The output is taken across the resistor Rout.\n\nimage_name:Figure 12.16(d)\ndescription:The circuit diagram depicts a realistic model of a current amplifier. The input current i_in flows through the resistor Rin, and the current-controlled current source A is used. The output is taken across the resistor Rout.\n\nFigure 12.16 (a) Realistic model of voltage amplifier, (b) incorrect voltage amplifier model, (c) realistic model of transimpedance amplifier, (d) incorrect model of transimpedance amplifier, (e) realistic model of transconductance amplifier, (f) realistic model of current amplifier.\nzero output impedance, functioning as an ideal voltage source, i.e., delivering $v_{\\text {out }}=A_{0} v_{\\text {in }}$ irrespective of the load impedance.\n\nThe transimpedance amplifier in Fig. 12.15(b) possesses a zero input impedance, allowing it to measure currents like an ideal current meter. Like the voltage amplifier, its output impedance is also zero if it operates as an ideal voltage source. The \"transimpedance gain\" of this amplifier, $R_{0}=v_{\\text {out }} / i_{\\text {in }}$, is a measure of resistance. For instance, a transimpedance gain of $2 \\mathrm{k} \\Omega$ means a 1-mA change in input current results in a 2-V change at the output.\n\nThe I/O impedances of the configurations in Figs. 12.15(c) and (d) follow similar principles. Notably, the amplifier in Fig. 12.15(c) has a \"transconductance gain,\" $G_{m}=i_{\\text {out }} / v_{\\text {in }}$, measured in transconductance.\n\nIn practice, the ideal models in Fig. 12.15 may not be precise. Specifically, the I/O impedances might not be extremely high or low. Figure 12.16 presents more realistic models of the four amplifier types. In Fig. 12.16(a), the voltage amplifier model includes an input resistance in parallel with the input port and an output resistance in series with the output port. These selections are unique and become more evident when considering other combinations. For example, if we consider the model in Fig. 12.16(b), the input and output impedances remain infinite and zero, respectively, regardless of $R_{\\text {in }}$ and $R_{\\text {out }}$ values. (Why?) Thus, the topology in Fig. 12.16(a) is the only viable model for finite I/O impedances.\n\nFigure 12.16(c) shows a nonideal transimpedance amplifier. Here, the input resistance is in series with the input. If we attempt a model like that in Fig. 12.16(d), the input resistance remains zero. The models for the other two amplifiers in Figs. 12.16(e) and (f) adhere to similar principles."
},
{
    "text": "For our subsequent studies in this chapter, it is advantageous to create straightforward models for the four types of amplifiers. Figure 12.15 illustrates these models under ideal conditions. The voltage amplifier in Fig. 12.15(a) features an infinite input impedance, allowing it to detect voltages like an ideal voltmeter, i.e., without affecting the previous stage. Additionally, the circuit has a zero output impedance, functioning as an ideal voltage source, i.e., delivering $v_{\\text {out }}=A_{0} v_{\\text {in }}$ irrespective of the load impedance.\n\nThe transimpedance amplifier in Fig. 12.15(b) possesses a zero input impedance, enabling it to measure currents akin to an ideal current meter. Like the voltage amplifier, its output impedance is also zero when functioning as an ideal voltage source. The \"transimpedance gain\" of this amplifier, $R_{0}=v_{\\text {out }} / i_{\\text {in }}$, is measured in ohms. For instance, a transimpedance gain of $2 \\mathrm{k} \\Omega$ indicates that a 1-mA change in input current results in a 2-V change at the output.\n\nThe input/output impedances of the configurations in Figs. 12.15(c) and (d) adhere to similar principles. Notably, the amplifier in Fig. 12.15(c) has a \"transconductance gain,\" $G_{m}=i_{\\text {out }} / v_{\\text {in }}$, which is measured in transconductance.\n\nIn practical scenarios, the ideal models in Fig. 12.15 may not be precise. Specifically, the input/output impedances might not be extremely high or low. Figure 12.16 presents more realistic models of these four amplifier types. In Fig. 12.16(a), the voltage amplifier model includes an input resistance in parallel with the input port and an output resistance in series with the output port. These configurations are unique and become evident when considering other combinations. For example, if we consider the model in Fig. 12.16(b), the input and output impedances remain infinite and zero, respectively, regardless of $R_{\\text {in }}$ and $R_{\\text {out }}$ values. (Why?) Thus, the topology in Fig. 12.16(a) is the only viable model for representing finite input/output impedances.\n\nFigure 12.16(c) shows a nonideal transimpedance amplifier, where the input resistance is in series with the input. If we attempt a model like Fig. 12.16(d), the input resistance remains zero. The models for the other two amplifiers in Figs. 12.16(e) and (f) follow analogous principles."
},
{
    "text": "It is beneficial to examine instances of the aforementioned four types. Figure 12.17(a) presents a cascade of a CS stage and a source follower configured as a \"voltage amplifier.\" This circuit offers a high input impedance (akin to a voltmeter) and a low output impedance (similar to a voltage source). Figure 12.17(b) illustrates a cascade of a CG stage and a source follower functioning as a transimpedance amplifier. This configuration exhibits low input and output impedances, suitable for acting as a \"current sensor\" and a \"voltage generator.\" Figure 12.17(c) shows a single\nimage_name:Figure 12.17(a)\ndescription:\n[\nname: Vin, type: VoltageSource, ports: {Np: Vin, Nn: GND}\nname: M1, type: NMOS, ports: {S: GND, D: d1g2, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: d1g2}\nname: M2, type: NMOS, ports: {S: d1g2, D: Vout, G: Vout}\nname: VDD, type: VoltageSource, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a voltage amplifier with a cascade of a common-source stage and a source follower. It provides high input impedance and low output impedance.\nimage_name:Figure 12.17(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1, D: d1g2, G: Vb}\nname: M2, type: NMOS, ports: {S:Vout, D: VDD, G: d1g2}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: d1g2}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: GND, Nn: s1}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a transimpedance amplifier with low input and output impedances, serving as a current sensor and voltage generator. The small-signal output resistance is 1/gm2, and the input resistance is 1/gm1.\nimage_name:Figure 12.17(c)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: LOAD, G: Vin}\n]\nextrainfo:The circuit in diagram (c) is a transconductance amplifier using a single NMOS transistor M1. It converts an input voltage (Vin) to an output current (Iout), with high input and output impedances. The output resistance is labeled as ro.\nimage_name:Figure 12.17(d)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1, D: LOAD, G: Vb}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: GND, Nn: s1}\n]\nextrainfo:The circuit is a common-gate current amplifier providing low input impedance and high output impedance. It uses an NMOS transistor M1 with a bias voltage Vb and an input current source Iin.\n\nFigure 12.17 Examples of (a) voltage, (b) transimpedance, (c) transconductance, and (d) current amplifiers.\n\nMOSFET as a transconductance amplifier. With high input and output impedances, the circuit effectively detects voltages and produces currents. Lastly, Fig. 12.17(d) displays a common-gate transistor as a current amplifier. This setup must deliver a low input impedance and a high output impedance.\n\nLet's also compute the small-signal \"gain\" of each circuit in Fig. 12.17, assuming $\\lambda=0$ for simplicity. The voltage gain, $A_{0}$, of the cascade in Fig. 12.17(a) is $-g_{m} R_{D}$ if $\\lambda=0$. The gain of the circuit in Fig. 12.17(b) is defined as $v_{\\text {out }} / i_{\\text {in }}$, termed the \"transimpedance gain,\" denoted by $R_{T}$. Here, $i_{i n}$ flows through $M_{1}$ and $R_{D}$, creating a voltage of $i_{i n} R_{D}$ at both the drain of $M_{1}$ and the source of $M_{2}$. Thus, $v_{\\text {out }}=i_{\\text {in }} R_{D}$, making $R_{T}=R_{D}$.\n\nFor the circuit in Fig. 12.17(c), the gain is $i_{\\text {out }} / v_{\\text {in }}$, known as the \"transconductance gain,\" denoted by $G_{m}$. In this case, $G_{m}=g_{m}$. For the current amplifier in Fig. 12.17(d), the current gain, $A_{I}$, equals unity since the input current directly flows to the output.\n\nExample With a current gain of unity, the topology of Fig. 12.17(d) seems scarcely better than a 12.9 piece of wire. What is the advantage of this circuit?\n\nSolution The key advantage of this circuit lies in its input impedance. Assume the input current source has a significant parasitic capacitance, $C_{p}$. If connected directly to a resistor $R_{D}$ [Fig. 12.18(a)], the current would be dissipated\n\n[^14]image_name:Fig. 12.18(a)\ndescription:\n[\nname: I_in, type: CurrentSource, value: I_in, ports: {Np: GND, Nn: Vout}\nname: C_P, type: Capacitor, value: C_P, ports: {Np: Vout, Nn: GND}\nname: R_D, type: Resistor, value: R_D, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit consists of a current source, capacitor, and resistor all connected in parallel between the Vout node and ground.\n\nimage_name:Fig. 12.18(b)\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: S1, D: Vout, G: Vb}\nname: CP, type: Capacitor, value: CP, ports: {Np: S1, Nn: GND}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: GND, Nn: s1}\nname: I1, type: CurrentSource, value: I1, ports: {Np: S1, Nn: GND}\n]\nextrainfo:The circuit includes a resistor RD connected from VDD to Vout, an NMOS transistor M1 with the source connected to node S1, the drain to Vout, and the gate to Vb. A capacitor CP and two current sources Iin and I1 are connected in parallel between node S1 and ground.\n\nthrough $C_{p}$ at high frequencies, resulting in a -3 dB bandwidth of just $\\left(R_{D} C_{p}\\right)^{-1}$. Conversely, employing a CG stage [Fig. 12.18(b)] shifts the input pole to $g_{m} / C_{p}$, a significantly higher frequency.\n\nExercise Determine the transfer function $V_{\\text {out }} / I_{\\text {in }}$ for each of the aforementioned circuits."
},
{
    "text": "It is beneficial to examine instances of the aforementioned four types. Figure 12.17(a) presents a cascade of a CS stage and a source follower configured as a \"voltage amplifier.\" This circuit offers a high input impedance (akin to a voltmeter) and a low output impedance (similar to a voltage source). Figure 12.17(b) illustrates a cascade of a CG stage and a source follower functioning as a transimpedance amplifier. This setup exhibits low input and output impedances, making it suitable as a \"current sensor\" and a \"voltage generator.\" Figure 12.17(c) depicts a single\nimage_name:Figure 12.17(a)\ndescription:\n[\nname: Vin, type: VoltageSource, ports: {Np: Vin, Nn: GND}\nname: M1, type: NMOS, ports: {S: GND, D: d1g2, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: d1g2}\nname: M2, type: NMOS, ports: {S: d1g2, D: Vout, G: Vout}\nname: VDD, type: VoltageSource, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit functions as a voltage amplifier with a cascade of a common-source stage and a source follower, providing high input impedance and low output impedance.\nimage_name:Figure 12.17(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1, D: d1g2, G: Vb}\nname: M2, type: NMOS, ports: {S:Vout, D: VDD, G: d1g2}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: d1g2}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: GND, Nn: s1}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit serves as a transimpedance amplifier with low input and output impedances, acting as a current sensor and voltage generator. The small-signal output resistance is 1/gm2, and the input resistance is 1/gm1.\nimage_name:Figure 12.17(c)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: LOAD, G: Vin}\n]\nextrainfo:The circuit shown in diagram (c) is a transconductance amplifier utilizing a single NMOS transistor M1. It converts an input voltage (Vin) to an output current (Iout), featuring high input and output impedances. The output resistance is designated as ro.\nimage_name:Figure 12.17(d)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1, D: LOAD, G: Vb}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: GND, Nn: s1}\n]\nextrainfo:The circuit functions as a common-gate current amplifier, providing low input impedance and high output impedance. It employs an NMOS transistor M1 with a bias voltage Vb and an input current source Iin.\n\nFigure 12.17 showcases examples of (a) voltage, (b) transimpedance, (c) transconductance, and (d) current amplifiers.\n\nA MOSFET configured as a transconductance amplifier offers high input and output impedances, efficiently sensing voltages and generating currents. Lastly, Fig. 12.17(d) presents a common-gate transistor as a current amplifier, which must deliver low input impedance and high output impedance.\n\nLet's also compute the small-signal \"gain\" of each circuit in Fig. 12.17, assuming $\\lambda=0$ for simplicity. The voltage gain, $A_{0}$, of the cascade in Fig. 12.17(a) equals $-g_{m} R_{D}$ if $\\lambda=0$. The gain of the circuit in Fig. 12.17(b) is defined as $v_{\\text {out }} / i_{\\text {in }}$, termed the \"transimpedance gain,\" denoted by $R_{T}$. Here, $i_{i n}$ flows through $M_{1}$ and $R_{D}$, producing a voltage of $i_{i n} R_{D}$ at both the drain of $M_{1}$ and the source of $M_{2}$. Thus, $v_{\\text {out }}=i_{\\text {in }} R_{D}$, making $R_{T}=R_{D}$.\n\nFor the circuit in Fig. 12.17(c), the gain is defined as $i_{\\text {out }} / v_{\\text {in }}$, known as the \"transconductance gain,\" denoted by $G_{m}$. In this case, $G_{m}=g_{m}$. For the current amplifier in Fig. 12.17(d), the current gain, $A_{I}$, equals unity since the input current directly flows to the output.\n\nExample With a current gain of unity, the topology in Fig. 12.17(d) seems barely superior to a simple piece of wire (12.9). What advantage does this circuit offer?\n\nSolution The key benefit of this circuit lies in its input impedance. Assume the input current source is burdened with a significant parasitic capacitance, $C_{p}$. If directly connected to a resistor $R_{D}$ [Fig. 12.18(a)], the current would be dissipated\n\n[^14]image_name:Fig. 12.18(a)\ndescription:\n[\nname: I_in, type: CurrentSource, value: I_in, ports: {Np: GND, Nn: Vout}\nname: C_P, type: Capacitor, value: C_P, ports: {Np: Vout, Nn: GND}\nname: R_D, type: Resistor, value: R_D, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit comprises a current source, capacitor, and resistor all connected in parallel between the Vout node and ground.\n\nimage_name:Fig. 12.18(b)\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: S1, D: Vout, G: Vb}\nname: CP, type: Capacitor, value: CP, ports: {Np: S1, Nn: GND}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: GND, Nn: s1}\nname: I1, type: CurrentSource, value: I1, ports: {Np: S1, Nn: GND}\n]\nextrainfo:The circuit includes a resistor RD connected from VDD to Vout, an NMOS transistor M1 with the source connected to node S1, the drain to Vout, and the gate to Vb. A capacitor CP and two current sources Iin and I1 are connected in parallel between node S1 and ground.\n\nthrough $C_{p}$ at high frequencies, resulting in a -3 dB bandwidth of merely $\\left(R_{D} C_{p}\\right)^{-1}$. Conversely, employing a CG stage [Fig. 12.18(b)] shifts the input pole to $g_{m} / C_{p}$, a significantly higher frequency.\n\nExercise Calculate the transfer function $V_{\\text {out }} / I_{\\text {in }}$ for each of the aforementioned circuits."
},
{
    "text": "Analyzing examples of the four types is enlightening. Figure 12.17(a) presents a \"voltage amplifier\" comprising a CS stage followed by a source follower, offering high input impedance (akin to a voltmeter) and low output impedance (similar to a voltage source). Figure 12.17(b) illustrates a transimpedance amplifier, a combination of a CG stage and a source follower, characterized by low input and output impedances, functioning as a \"current sensor\" and \"voltage generator.\" Figure 12.17(c) depicts a single NMOS transistor configured as a transconductance amplifier, converting input voltage (Vin) to output current (Iout) with high input and output impedances. The output resistance is denoted as ro. Figure 12.17(d) shows a common-gate current amplifier with low input impedance and high output impedance, utilizing an NMOS transistor M1 biased by Vb and an input current source Iin.\n\nFigure 12.17 showcases examples of (a) voltage, (b) transimpedance, (c) transconductance, and (d) current amplifiers.\n\nUsing a MOSFET as a transconductance amplifier, the circuit excels in voltage sensing and current generation due to its high input and output impedances. Figure 12.17(d) demonstrates a common-gate transistor as a current amplifier, necessitating low input impedance and high output impedance.\n\nNext, we calculate the small-signal \"gain\" for each circuit in Fig. 12.17, assuming $\\lambda=0$ for simplicity. The voltage gain, $A_{0}$, of the cascade in Fig. 12.17(a) is $-g_{m} R_{D}$ if $\\lambda=0$. The gain in Fig. 12.17(b), termed \"transimpedance gain\" ($R_{T}$), is defined as $v_{\\text {out }} / i_{\\text {in }}$. Here, $i_{i n}$ flows through $M_{1}$ and $R_{D}$, producing a voltage $i_{i n} R_{D}$ at both the drain of $M_{1}$ and the source of $M_{2}$, thus $v_{\\text {out }}=i_{\\text {in }} R_{D}$ and $R_{T}=R_{D}$.\n\nFor Fig. 12.17(c), the gain, known as \"transconductance gain\" ($G_{m}$), is $i_{\\text {out }} / v_{\\text {in }}$, with $G_{m}=g_{m}$. In Fig. 12.17(d), the current gain, $A_{I}$, equals unity since the input current directly flows to the output.\n\nExample: With a current gain of unity, the topology in Fig. 12.17(d) seems scarcely better than a simple wire. What advantage does this circuit offer?\n\nSolution: The circuit's key benefit lies in its input impedance. If the input current source has a significant parasitic capacitance, $C_{p}$, directly connecting it to a resistor $R_{D}$ [Fig. 12.18(a)] would result in current loss through $C_{p}$ at high frequencies, yielding a -3 dB bandwidth of $\\left(R_{D} C_{p}\\right)^{-1}$. Conversely, employing a CG stage [Fig. 12.18(b)] shifts the input pole to $g_{m} / C_{p}$, a considerably higher frequency.\n\nExercise: Derive the transfer function $V_{\\text {out }} / I_{\\text {in }}$ for each of these circuits."
},
{
    "text": "It is beneficial to examine instances of the aforementioned four types. Figure 12.17(a) portrays a combination of a CS stage and a source follower functioning as a \"voltage amplifier.\" This configuration offers a high input impedance (reminiscent of a voltmeter) and a low output impedance (akin to a voltage source). Figure 12.17(b) illustrates a series of a CG stage and a source follower acting as a transimpedance amplifier. This setup exhibits low input and output impedances, suitable for roles as a \"current sensor\" and a \"voltage generator.\" Figure 12.17(c) presents a solitary\nimage_name:Figure 12.17(a)\ndescription:\n[\nname: Vin, type: VoltageSource, ports: {Np: Vin, Nn: GND}\nname: M1, type: NMOS, ports: {S: GND, D: d1g2, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: d1g2}\nname: M2, type: NMOS, ports: {S: d1g2, D: Vout, G: Vout}\nname: VDD, type: VoltageSource, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit functions as a voltage amplifier with a cascade of a common-source stage and a source follower, providing high input impedance and low output impedance.\nimage_name:Figure 12.17(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1, D: d1g2, G: Vb}\nname: M2, type: NMOS, ports: {S: Vout, D: VDD, G: d1g2}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: d1g2}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: GND, Nn: s1}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit serves as a transimpedance amplifier with low input and output impedances, functioning as a current sensor and voltage generator. The small-signal output resistance is 1/gm2, and the input resistance is 1/gm1.\nimage_name:Figure 12.17(c)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: LOAD, G: Vin}\n]\nextrainfo:The circuit depicted in diagram (c) is a transconductance amplifier utilizing a single NMOS transistor M1. It converts an input voltage (Vin) to an output current (Iout), featuring high input and output impedances. The output resistance is designated as ro.\nimage_name:Figure 12.17(d)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1, D: LOAD, G: Vb}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: GND, Nn: s1}\n]\nextrainfo:The circuit functions as a common-gate current amplifier, offering low input impedance and high output impedance. It employs an NMOS transistor M1 with a bias voltage Vb and an input current source Iin.\n\nFigure 12.17 showcases examples of (a) voltage, (b) transimpedance, (c) transconductance, and (d) current amplifiers.\n\nA MOSFET configured as a transconductance amplifier exhibits high input and output impedances, efficiently detecting voltages and generating currents. Lastly, Fig. 12.17(d) displays a common-gate transistor serving as a current amplifier, necessitating low input impedance and high output impedance.\n\nLet's also compute the small-signal \"gain\" for each circuit in Fig. 12.17, assuming $\\lambda=0$ for simplicity. The voltage gain, $A_{0}$, of the cascade in Fig. 12.17(a) is $-g_{m} R_{D}$ when $\\lambda=0 .{ }^{4}$. The gain of the circuit in Fig. 12.17(b), defined as $v_{\\text {out }} / i_{\\text {in }}$, is termed the \"transimpedance gain,\" denoted by $R_{T}$. Here, $i_{i n}$ flows through $M_{1}$ and $R_{D}$, producing a voltage of $i_{i n} R_{D}$ at both the drain of $M_{1}$ and the source of $M_{2}$. Thus, $v_{\\text {out }}=i_{\\text {in }} R_{D}$, making $R_{T}=R_{D}$.\n\nFor the circuit in Fig. 12.17(c), the gain, defined as $i_{\\text {out }} / v_{\\text {in }}$, is the \"transconductance gain,\" denoted by $G_{m}$. In this instance, $G_{m}=g_{m}$. For the current amplifier in Fig. 12.17(d), the current gain, $A_{I}$, equals unity, as the input current directly flows to the output.\n\nExample With a current gain of unity, the topology in Fig. 12.17(d) seems scarcely superior to a simple 12.9 piece of wire. What advantage does this circuit offer?\n\nSolution The key benefit of this circuit lies in its input impedance. Imagine the input current source is burdened with a substantial parasitic capacitance, $C_{p}$. If connected directly to a resistor $R_{D}$ [Fig. 12.18(a)], the current would be squandered\n\n[^14]image_name:Fig. 12.18(a)\ndescription:\n[\nname: I_in, type: CurrentSource, value: I_in, ports: {Np: GND, Nn: Vout}\nname: C_P, type: Capacitor, value: C_P, ports: {Np: Vout, Nn: GND}\nname: R_D, type: Resistor, value: R_D, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit comprises a current source, capacitor, and resistor all connected in parallel between the Vout node and ground.\n\nimage_name:Fig. 12.18(b)\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: S1, D: Vout, G: Vb}\nname: CP, type: Capacitor, value: CP, ports: {Np: S1, Nn: GND}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: GND, Nn: s1}\nname: I1, type: CurrentSource, value: I1, ports: {Np: S1, Nn: GND}\n]\nextrainfo:The circuit includes a resistor RD connected from VDD to Vout, an NMOS transistor M1 with the source connected to node S1, the drain to Vout, and the gate to Vb. A capacitor CP and two current sources Iin and I1 are connected in parallel between node S1 and ground.\n\nthrough $C_{p}$ at high frequencies, resulting in a -3 dB bandwidth of merely $\\left(R_{D} C_{p}\\right)^{-1}$. Conversely, employing a CG stage [Fig. 12.18(b)] shifts the input pole to $g_{m} / C_{p}$, a significantly higher frequency.\n\nExercise Determine the transfer function $V_{\\text {out }} / I_{\\text {in }}$ for each of the aforementioned circuits."
},
{
    "text": "Examining instances of the aforementioned four types is enlightening. Figure 12.17(a) presents a combination of a CS stage and a source follower as a \"voltage amplifier.\" This configuration offers a high input impedance (akin to a voltmeter) and a low output impedance (similar to a voltage source). Figure 12.17(b) showcases a CG stage and a source follower in series as a transimpedance amplifier. This setup exhibits low input and output impedances, functioning as a \"current sensor\" and a \"voltage generator.\" Figure 12.17(c) depicts a solitary NMOS transistor M1 configured as a transconductance amplifier. This circuit transforms an input voltage (Vin) into an output current (Iout), with high input and output impedances, and the output resistance is designated as ro.\n\nimage_name:Figure 12.17(a)\ndescription:\n[\nname: Vin, type: VoltageSource, ports: {Np: Vin, Nn: GND}\nname: M1, type: NMOS, ports: {S: GND, D: d1g2, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: d1g2}\nname: M2, type: NMOS, ports: {S: d1g2, D: Vout, G: Vout}\nname: VDD, type: VoltageSource, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:This voltage amplifier combines a common-source stage and a source follower, providing high input impedance and low output impedance.\n\nimage_name:Figure 12.17(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1, D: d1g2, G: Vb}\nname: M2, type: NMOS, ports: {S:Vout, D: VDD, G: d1g2}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: d1g2}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: GND, Nn: s1}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:This transimpedance amplifier features low input and output impedances, acting as a current sensor and voltage generator. The small-signal output resistance is 1/gm2, and the input resistance is 1/gm1.\n\nimage_name:Figure 12.17(c)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: LOAD, G: Vin}\n]\nextrainfo:Diagram (c) illustrates a transconductance amplifier using a single NMOS transistor M1, converting an input voltage (Vin) to an output current (Iout), with high input and output impedances. The output resistance is labeled as ro.\n\nimage_name:Figure 12.17(d)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1, D: LOAD, G: Vb}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: GND, Nn: s1}\n]\nextrainfo:This common-gate current amplifier provides low input impedance and high output impedance, utilizing an NMOS transistor M1 with a bias voltage Vb and an input current source Iin.\n\nFigure 12.17 illustrates examples of (a) voltage, (b) transimpedance, (c) transconductance, and (d) current amplifiers.\n\nUsing a MOSFET as a transconductance amplifier, the circuit benefits from high input and output impedances, effectively detecting voltages and generating currents. Lastly, Fig. 12.17(d) presents a common-gate transistor as a current amplifier, which must exhibit low input impedance and high output impedance.\n\nLet's also calculate the small-signal \"gain\" of each circuit in Fig. 12.17, assuming $\\lambda=0$ for simplicity. The voltage gain, $A_{0}$, of the cascade in Fig. 12.17(a) is $-g_{m} R_{D}$ if $\\lambda=0$. The gain of the circuit in Fig. 12.17(b) is defined as $v_{\\text {out }} / i_{\\text {in }}$, termed the \"transimpedance gain,\" denoted by $R_{T}$. Here, $i_{i n}$ flows through $M_{1}$ and $R_{D}$, producing a voltage of $i_{i n} R_{D}$ at both the drain of $M_{1}$ and the source of $M_{2}$. Thus, $v_{\\text {out }}=i_{\\text {in }} R_{D}$, making $R_{T}=R_{D}$.\n\nFor the circuit in Fig. 12.17(c), the gain is $i_{\\text {out }} / v_{\\text {in }}$, known as the \"transconductance gain,\" denoted by $G_{m}$. In this case, $G_{m}=g_{m}$. For the current amplifier in Fig. 12.17(d), the current gain, $A_{I}$, equals unity since the input current directly flows to the output.\n\nExample: With a current gain of unity, the topology in Fig. 12.17(d) seems scarcely better than a simple piece of wire. What advantage does this circuit offer?\n\nSolution: The key benefit of this circuit lies in its input impedance. Assume the input current source is affected by a significant parasitic capacitance, $C_{p}$. If directly connected to a resistor $R_{D}$ [Fig. 12.18(a)], the current would be dissipated through $C_{p}$ at high frequencies, resulting in a -3 dB bandwidth of only $\\left(R_{D} C_{p}\\right)^{-1}$. Conversely, employing a CG stage [Fig. 12.18(b)] shifts the input pole to $g_{m} / C_{p}$, a substantially higher frequency.\n\nExercise: Determine the transfer function $V_{\\text {out }} / I_{\\text {in }}$ for each of the aforementioned circuits.\n\n[^14]image_name:Fig. 12.18(a)\ndescription:\n[\nname: I_in, type: CurrentSource, value: I_in, ports: {Np: GND, Nn: Vout}\nname: C_P, type: Capacitor, value: C_P, ports: {Np: Vout, Nn: GND}\nname: R_D, type: Resistor, value: R_D, ports: {N1: Vout, N2: GND}\n]\nextrainfo:This circuit comprises a current source, capacitor, and resistor all connected in parallel between the Vout node and ground.\n\nimage_name:Fig. 12.18(b)\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: S1, D: Vout, G: Vb}\nname: CP, type: Capacitor, value: CP, ports: {Np: S1, Nn: GND}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: GND, Nn: s1}\nname: I1, type: CurrentSource, value: I1, ports: {Np: S1, Nn: GND}\n]\nextrainfo:This circuit includes a resistor RD connected from VDD to Vout, an NMOS transistor M1 with the source connected to node S1, the drain to Vout, and the gate to Vb. A capacitor CP and two current sources Iin and I1 are connected in parallel between node S1 and ground."
},
{
    "text": "It is beneficial to examine instances of the aforementioned four types. Figure 12.17(a) presents a configuration of a CS stage and a source follower functioning as a \"voltage amplifier.\" This circuit offers a high input impedance (akin to a voltmeter) and a low output impedance (similar to a voltage source). Figure 12.17(b) illustrates a combination of a CG stage and a source follower serving as a transimpedance amplifier. This setup exhibits low input and output impedances, functioning as a \"current sensor\" and a \"voltage generator.\" Figure 12.17(c) displays a single\n\nimage_name:Figure 12.17(a)\ndescription:\n[\nname: Vin, type: VoltageSource, ports: {Np: Vin, Nn: GND}\nname: M1, type: NMOS, ports: {S: GND, D: d1g2, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: d1g2}\nname: M2, type: NMOS, ports: {S: d1g2, D: Vout, G: Vout}\nname: VDD, type: VoltageSource, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit functions as a voltage amplifier with a cascade of a common-source stage and a source follower, providing high input impedance and low output impedance.\n\nimage_name:Figure 12.17(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1, D: d1g2, G: Vb}\nname: M2, type: NMOS, ports: {S: Vout, D: VDD, G: d1g2}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: d1g2}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: GND, Nn: s1}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit acts as a transimpedance amplifier with low input and output impedances, suitable for current sensing and voltage generation. The small-signal output resistance is 1/gm2, and the input resistance is 1/gm1.\n\nimage_name:Figure 12.17(c)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: LOAD, G: Vin}\n]\nextrainfo:The circuit in diagram (c) is a transconductance amplifier utilizing a single NMOS transistor M1. It converts input voltage (Vin) to output current (Iout), featuring high input and output impedances. The output resistance is denoted as ro.\n\nimage_name:Figure 12.17(d)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1, D: LOAD, G: Vb}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: GND, Nn: s1}\n]\nextrainfo:The circuit functions as a common-gate current amplifier, offering low input impedance and high output impedance. It employs an NMOS transistor M1 with a bias voltage Vb and an input current source Iin.\n\nFigure 12.17 showcases examples of (a) voltage, (b) transimpedance, (c) transconductance, and (d) current amplifiers.\n\nUsing a MOSFET as a transconductance amplifier, the circuit effectively senses voltages and generates currents with high input and output impedances. Lastly, Fig. 12.17(d) depicts a common-gate transistor as a current amplifier, necessitating low input impedance and high output impedance.\n\nLet's also calculate the small-signal \"gain\" of each circuit in Fig. 12.17, assuming $\\lambda=0$ for simplicity. The voltage gain, $A_{0}$, of the cascade in Fig. 12.17(a) equals $-g_{m} R_{D}$ if $\\lambda=0$. The gain of the circuit in Fig. 12.17(b), defined as $v_{\\text {out }} / i_{\\text {in }}$, is termed the \"transimpedance gain,\" denoted by $R_{T}$. Here, $i_{i n}$ flows through $M_{1}$ and $R_{D}$, producing a voltage of $i_{i n} R_{D}$ at both the drain of $M_{1}$ and the source of $M_{2}$. Thus, $v_{\\text {out }}=i_{\\text {in }} R_{D}$, making $R_{T}=R_{D}$.\n\nFor the circuit in Fig. 12.17(c), the gain, defined as $i_{\\text {out }} / v_{\\text {in }}$, is the \"transconductance gain,\" denoted by $G_{m}$. In this case, $G_{m}=g_{m}$. For the current amplifier in Fig. 12.17(d), the current gain, $A_{I}$, equals unity since the input current directly flows to the output.\n\nExample With a current gain of unity, the topology in Fig. 12.17(d) seems scarcely better than a 12.9 piece of wire. What is the advantage of this circuit?\n\nSolution The key advantage of this circuit lies in its input impedance. Suppose the input current source is affected by a large parasitic capacitance, $C_{p}$. If directly applied to a resistor $R_{D}$ [Fig. 12.18(a)], the current would be dissipated\n\n[^14]image_name:Fig. 12.18(a)\ndescription:\n[\nname: I_in, type: CurrentSource, value: I_in, ports: {Np: GND, Nn: Vout}\nname: C_P, type: Capacitor, value: C_P, ports: {Np: Vout, Nn: GND}\nname: R_D, type: Resistor, value: R_D, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit comprises a current source, capacitor, and resistor connected in parallel between the Vout node and ground.\n\nimage_name:Fig. 12.18(b)\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: S1, D: Vout, G: Vb}\nname: CP, type: Capacitor, value: CP, ports: {Np: S1, Nn: GND}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: GND, Nn: s1}\nname: I1, type: CurrentSource, value: I1, ports: {Np: S1, Nn: GND}\n]\nextrainfo:The circuit includes a resistor RD from VDD to Vout, an NMOS transistor M1 with the source at node S1, the drain at Vout, and the gate at Vb. A capacitor CP and two current sources Iin and I1 are connected in parallel between node S1 and ground.\n\nthrough $C_{p}$ at high frequencies, resulting in a -3 dB bandwidth of merely $\\left(R_{D} C_{p}\\right)^{-1}$. Conversely, employing a CG stage [Fig. 12.18(b)] shifts the input pole to $g_{m} / C_{p}$, a significantly higher frequency.\n\nExercise Determine the transfer function $V_{\\text {out }} / I_{\\text {in }}$ for each of the aforementioned circuits."
},
{
    "text": "Analyzing examples of the four types mentioned is insightful. Figure 12.17(a) showcases a cascade of a CS stage and a source follower as a \"voltage amplifier,\" offering high input impedance (akin to a voltmeter) and low output impedance (similar to a voltage source). Figure 12.17(b) presents a cascade of a CG stage and a source follower as a transimpedance amplifier, characterized by low input and output impedances, functioning as a \"current sensor\" and \"voltage generator.\" Figure 12.17(c) depicts a single NMOS transistor as a transconductance amplifier, which, with high input and output impedances, effectively senses voltages and generates currents. Lastly, Figure 12.17(d) illustrates a common-gate transistor as a current amplifier, designed to provide low input impedance and high output impedance.\n\nLet's also compute the small-signal \"gain\" for each circuit in Figure 12.17, assuming $\\lambda=0$ for simplicity. The voltage gain, $A_{0}$, of the cascade in Figure 12.17(a) is $-g_{m} R_{D}$ if $\\lambda=0$. The gain of the circuit in Figure 12.17(b), termed \"transimpedance gain\" and denoted by $R_{T}$, is defined as $v_{\\text {out }} / i_{\\text {in }}$. Here, $i_{i n}$ flows through $M_{1}$ and $R_{D}$, producing a voltage $i_{i n} R_{D}$ at both the drain of $M_{1}$ and the source of $M_{2}$, thus $v_{\\text {out }}=i_{\\text {in }} R_{D}$ and $R_{T}=R_{D}$.\n\nFor the circuit in Figure 12.17(c), the gain, termed \"transconductance gain\" and denoted by $G_{m}$, is $i_{\\text {out }} / v_{\\text {in }}$, with $G_{m}=g_{m}$. In the current amplifier of Figure 12.17(d), the current gain, $A_{I}$, equals unity, as the input current directly flows to the output.\n\nExample: With a current gain of unity, the topology in Figure 12.17(d) seems scarcely better than a simple wire. What advantage does this circuit offer?\n\nSolution: The key benefit lies in its input impedance. If the input current source has a large parasitic capacitance, $C_{p}$, directly applying it to a resistor $R_{D}$ [Figure 12.18(a)] would result in current loss through $C_{p}$ at high frequencies, yielding a -3 dB bandwidth of only $\\left(R_{D} C_{p}\\right)^{-1}$. Conversely, using a CG stage [Figure 12.18(b)] shifts the input pole to $g_{m} / C_{p}$, a significantly higher frequency.\n\nExercise: Determine the transfer function $V_{\\text {out }} / I_{\\text {in }}$ for each of these circuits."
},
{
    "text": "It is beneficial to examine instances of the aforementioned four types. Figure 12.17(a) portrays a combination of a CS stage and a source follower as a \"voltage amplifier.\" This configuration offers a high input impedance (akin to a voltmeter) and a low output impedance (similar to a voltage source). Figure 12.17(b) presents a cascade of a CG stage and a source follower functioning as a transimpedance amplifier. This setup exhibits low input and output impedances, suitable for roles as a \"current sensor\" and a \"voltage generator.\" Figure 12.17(c) depicts a solitary\n\nimage_name:Figure 12.17(a)\ndescription:\n[\nname: Vin, type: VoltageSource, ports: {Np: Vin, Nn: GND}\nname: M1, type: NMOS, ports: {S: GND, D: d1g2, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: d1g2}\nname: M2, type: NMOS, ports: {S: d1g2, D: Vout, G: Vout}\nname: VDD, type: VoltageSource, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a voltage amplifier with a cascade of a common-source stage and a source follower. It provides high input impedance and low output impedance.\nimage_name:Figure 12.17(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1, D: d1g2, G: Vb}\nname: M2, type: NMOS, ports: {S:Vout, D: VDD, G: d1g2}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: d1g2}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: GND, Nn: s1}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a transimpedance amplifier with low input and output impedances, serving as a current sensor and voltage generator. The small-signal output resistance is 1/gm2, and the input resistance is 1/gm1.\nimage_name:Figure 12.17(c)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: LOAD, G: Vin}\n]\nextrainfo:The circuit in diagram (c) is a transconductance amplifier using a single NMOS transistor M1. It converts an input voltage (Vin) to an output current (Iout), with high input and output impedances. The output resistance is labeled as ro.\nimage_name:Figure 12.17(d)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1, D: LOAD, G: Vb}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: GND, Nn: s1}\n]\nextrainfo:The circuit is a common-gate current amplifier providing low input impedance and high output impedance. It uses an NMOS transistor M1 with a bias voltage Vb and an input current source Iin.\n\nFigure 12.17 Examples of (a) voltage, (b) transimpedance, (c) transconductance, and (d) current amplifiers.\n\nMOSFET as a transconductance amplifier. With high input and output impedances, the circuit effectively detects voltages and produces currents. Lastly, Fig. 12.17(d) illustrates a common-gate transistor as a current amplifier. This configuration necessitates low input impedance and high output impedance.\n\nLet's also calculate the small-signal \"gain\" of each circuit in Fig. 12.17, assuming $\\lambda=0$ for simplicity. The voltage gain, $A_{0}$, of the cascade in Fig. 12.17(a) is $-g_{m} R_{D}$ when $\\lambda=0$. The gain of the circuit in Fig. 12.17(b), termed the \"transimpedance gain,\" is defined as $v_{\\text {out }} / i_{\\text {in }}$ and denoted by $R_{T}$. Here, $i_{i n}$ flows through $M_{1}$ and $R_{D}$, creating a voltage $i_{i n} R_{D}$ at both the drain of $M_{1}$ and the source of $M_{2}$. Thus, $v_{\\text {out }}=i_{\\text {in }} R_{D}$, making $R_{T}=R_{D}$.\n\nFor the circuit in Fig. 12.17(c), the gain, termed the \"transconductance gain,\" is $i_{\\text {out }} / v_{\\text {in }}$ and denoted by $G_{m}$. In this case, $G_{m}=g_{m}$. For the current amplifier in Fig. 12.17(d), the current gain, $A_{I}$, equals unity since the input current directly flows to the output.\n\nExample With a current gain of unity, the topology in Fig. 12.17(d) seems barely superior to a simple wire (12.9). What advantage does this circuit offer?\n\nSolution The key benefit of this circuit is its input impedance. Imagine the input current source is burdened with a significant parasitic capacitance, $C_{p}$. If connected directly to a resistor $R_{D}$ [Fig. 12.18(a)], the current would be largely dissipated\n\n[^14]image_name:Fig. 12.18(a)\ndescription:\n[\nname: I_in, type: CurrentSource, value: I_in, ports: {Np: GND, Nn: Vout}\nname: C_P, type: Capacitor, value: C_P, ports: {Np: Vout, Nn: GND}\nname: R_D, type: Resistor, value: R_D, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit consists of a current source, capacitor, and resistor all connected in parallel between the Vout node and ground.\n\nimage_name:Fig. 12.18(b)\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: S1, D: Vout, G: Vb}\nname: CP, type: Capacitor, value: CP, ports: {Np: S1, Nn: GND}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: GND, Nn: s1}\nname: I1, type: CurrentSource, value: I1, ports: {Np: S1, Nn: GND}\n]\nextrainfo:The circuit includes a resistor RD connected from VDD to Vout, an NMOS transistor M1 with the source connected to node S1, the drain to Vout, and the gate to Vb. A capacitor CP and two current sources Iin and I1 are connected in parallel between node S1 and ground.\n\nthrough $C_{p}$ at high frequencies, resulting in a -3 dB bandwidth of merely $\\left(R_{D} C_{p}\\right)^{-1}$. Conversely, employing a CG stage [Fig. 12.18(b)] shifts the input pole to $g_{m} / C_{p}$, a substantially higher frequency.\n\nExercise Compute the transfer function $V_{\\text {out }} / I_{\\text {in }}$ for each of the aforementioned circuits."
},
{
    "text": "Analyzing examples of the four aforementioned types is insightful. Figure 12.17(a) presents a \"voltage amplifier\" consisting of a CS stage followed by a source follower. This configuration offers high input impedance, akin to a voltmeter, and low output impedance, similar to a voltage source. Figure 12.17(b) illustrates a transimpedance amplifier formed by a CG stage and a source follower, characterized by low input and output impedances, functioning as a \"current sensor\" and \"voltage generator.\" Figure 12.17(c) showcases a single NMOS transistor as a transconductance amplifier, which converts input voltage (Vin) to output current (Iout) with high input and output impedances. Figure 12.17(d) depicts a common-gate current amplifier with low input impedance and high output impedance, utilizing an NMOS transistor with a bias voltage and an input current source.\n\nFigure 12.17 displays examples of (a) voltage, (b) transimpedance, (c) transconductance, and (d) current amplifiers.\n\nAs a transconductance amplifier, the MOSFET circuit excels in voltage sensing and current generation due to its high input and output impedances. The common-gate transistor in Fig. 12.17(d) serves as a current amplifier, necessitating low input impedance and high output impedance.\n\nTo simplify, let's assume $\\lambda=0$ when determining the small-signal \"gain\" of each circuit in Fig. 12.17. The voltage gain, $A_{0}$, of the cascade in Fig. 12.17(a) is $-g_{m} R_{D}$ if $\\lambda=0$. The gain of the circuit in Fig. 12.17(b), termed \"transimpedance gain\" ($R_{T}$), is defined as $v_{\\text {out }} / i_{\\text {in }}$. Here, $i_{i n}$ flows through $M_{1}$ and $R_{D}$, producing a voltage $i_{i n} R_{D}$ at both the drain of $M_{1}$ and the source of $M_{2}$, thus $v_{\\text {out }}=i_{\\text {in }} R_{D}$ and $R_{T}=R_{D}$.\n\nFor the circuit in Fig. 12.17(c), the \"transconductance gain\" ($G_{m}$) is $i_{\\text {out }} / v_{\\text {in }}$, with $G_{m}=g_{m}$. The current amplifier in Fig. 12.17(d) has a current gain, $A_{I}$, of unity, as the input current directly flows to the output.\n\nExample: With a current gain of unity, the topology in Fig. 12.17(d) seems no better than a simple wire. What advantage does this circuit offer?\n\nSolution: The circuit's key advantage lies in its input impedance. If a current source with significant parasitic capacitance, $C_{p}$, is connected directly to a resistor $R_{D}$ [Fig. 12.18(a)], the current would be dissipated through $C_{p}$ at high frequencies, resulting in a -3 dB bandwidth of $\\left(R_{D} C_{p}\\right)^{-1}$. Conversely, using a CG stage [Fig. 12.18(b)] shifts the input pole to $g_{m} / C_{p}$, achieving a much higher frequency.\n\nExercise: Determine the transfer function $V_{\\text {out }} / I_{\\text {in }}$ for each of the above circuits."
},
{
    "text": "Examining instances of the aforementioned four types is enlightening. Figure 12.17(a) presents a combination of a CS stage and a source follower, forming a \"voltage amplifier.\" This configuration offers a high input impedance, akin to a voltmeter, and a low output impedance, similar to a voltage source. Figure 12.17(b) illustrates a cascade of a CG stage and a source follower, functioning as a transimpedance amplifier. This setup exhibits low input and output impedances, suitable for acting as a \"current sensor\" and a \"voltage generator.\" Figure 12.17(c) depicts a solitary NMOS transistor as a transconductance amplifier. It features high input and output impedances, efficiently sensing voltages and generating currents. Lastly, Figure 12.17(d) showcases a common-gate transistor as a current amplifier, characterized by low input impedance and high output impedance.\n\nLet's also compute the small-signal \"gain\" for each circuit in Figure 12.17, assuming $\\lambda=0$ for simplicity. The voltage gain, $A_{0}$, of the cascade in Figure 12.17(a) is $-g_{m} R_{D}$ when $\\lambda=0$. The gain for the circuit in Figure 12.17(b), termed the \"transimpedance gain\" and denoted by $R_{T}$, is defined as $v_{\\text {out }} / i_{\\text {in }}$. Here, $i_{i n}$ flows through $M_{1}$ and $R_{D}$, creating a voltage $i_{i n} R_{D}$ at both the drain of $M_{1}$ and the source of $M_{2}$, thus $v_{\\text {out }}=i_{\\text {in }} R_{D}$ and $R_{T}=R_{D}$.\n\nFor the circuit in Figure 12.17(c), the gain, known as the \"transconductance gain\" and denoted by $G_{m}$, is $i_{\\text {out }} / v_{\\text {in }}$. In this case, $G_{m}=g_{m}$. The current amplifier in Figure 12.17(d) has a current gain, $A_{I}$, of unity, as the input current directly flows to the output.\n\nExample: With a current gain of unity, the topology in Figure 12.17(d) seems scarcely better than a simple wire. What advantage does this circuit offer?\n\nSolution: The key benefit of this circuit lies in its input impedance. Suppose the input current source is burdened by a significant parasitic capacitance, $C_{p}$. If directly connected to a resistor $R_{D}$ [Fig. 12.18(a)], the current would be largely dissipated through $C_{p}$ at high frequencies, resulting in a -3 dB bandwidth of merely $\\left(R_{D} C_{p}\\right)^{-1}$. Conversely, employing a CG stage [Fig. 12.18(b)] shifts the input pole to $g_{m} / C_{p}$, a considerably higher frequency.\n\nExercise: Determine the transfer function $V_{\\text {out }} / I_{\\text {in }}$ for each of these circuits."
},
{
    "text": "It is insightful to examine instances of the aforementioned four types. Figure 12.17(a) presents a cascade of a CS stage and a source follower as a \"voltage amplifier.\" This circuit offers a high input impedance (akin to a voltmeter) and a low output impedance (similar to a voltage source). Figure 12.17(b) illustrates a cascade of a CG stage and a source follower as a transimpedance amplifier. Such a configuration exhibits low input and output impedances, functioning as a \"current sensor\" and a \"voltage generator.\" Figure 12.17(c) depicts a single\n\nimage_name:Figure 12.17(a)\ndescription:\n[\nname: Vin, type: VoltageSource, ports: {Np: Vin, Nn: GND}\nname: M1, type: NMOS, ports: {S: GND, D: d1g2, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: d1g2}\nname: M2, type: NMOS, ports: {S: d1g2, D: Vout, G: Vout}\nname: VDD, type: VoltageSource, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a voltage amplifier with a cascade of a common-source stage and a source follower. It provides high input impedance and low output impedance.\nimage_name:Figure 12.17(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1, D: d1g2, G: Vb}\nname: M2, type: NMOS, ports: {S:Vout, D: VDD, G: d1g2}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: d1g2}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: GND, Nn: s1}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a transimpedance amplifier with low input and output impedances, serving as a current sensor and voltage generator. The small-signal output resistance is 1/gm2, and the input resistance is 1/gm1.\nimage_name:Figure 12.17(c)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: LOAD, G: Vin}\n]\nextrainfo:The circuit in diagram (c) is a transconductance amplifier using a single NMOS transistor M1. It converts an input voltage (Vin) to an output current (Iout), with high input and output impedances. The output resistance is labeled as ro.\nimage_name:Figure 12.17(d)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1, D: LOAD, G: Vb}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: GND, Nn: s1}\n]\nextrainfo:The circuit is a common-gate current amplifier providing low input impedance and high output impedance. It uses an NMOS transistor M1 with a bias voltage Vb and an input current source Iin.\n\nFigure 12.17 Examples of (a) voltage, (b) transimpedance, (c) transconductance, and (d) current amplifiers.\n\nMOSFET as a transconductance amplifier. With high input and output impedances, the circuit effectively senses voltages and generates currents. Lastly, Fig. 12.17(d) shows a common-gate transistor as a current amplifier. This configuration must offer a low input impedance and a high output impedance.\n\nLet's also calculate the small-signal \"gain\" of each circuit in Fig. 12.17, assuming $\\lambda=0$ for simplicity. The voltage gain, $A_{0}$, of the cascade in Fig. 12.17(a) is $-g_{m} R_{D}$ if $\\lambda=0 .{ }^{4}$ The gain of the circuit in Fig. 12.17(b) is defined as $v_{\\text {out }} / i_{\\text {in }}$, termed the \"transimpedance gain,\" denoted by $R_{T}$. Here, $i_{i n}$ flows through $M_{1}$ and $R_{D}$, producing a voltage of $i_{i n} R_{D}$ at both the drain of $M_{1}$ and the source of $M_{2}$. Thus, $v_{\\text {out }}=i_{\\text {in }} R_{D}$, making $R_{T}=R_{D}$.\n\nFor the circuit in Fig. 12.17(c), the gain is $i_{\\text {out }} / v_{\\text {in }}$, known as the \"transconductance gain,\" denoted by $G_{m}$. In this case, $G_{m}=g_{m}$. For the current amplifier in Fig. 12.17(d), the current gain, $A_{I}$, equals unity since the input current directly flows to the output.\n\nExample With a current gain of unity, the topology of Fig. 12.17(d) seems barely superior to a 12.9 piece of wire. What is the benefit of this circuit?\n\nSolution The key advantage of this circuit lies in its input impedance. Assume the input current source has a significant parasitic capacitance, $C_{p}$. If connected directly to a resistor $R_{D}$ [Fig. 12.18(a)], the current would be dissipated\n\n[^14]image_name:Fig. 12.18(a)\ndescription:\n[\nname: I_in, type: CurrentSource, value: I_in, ports: {Np: GND, Nn: Vout}\nname: C_P, type: Capacitor, value: C_P, ports: {Np: Vout, Nn: GND}\nname: R_D, type: Resistor, value: R_D, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit consists of a current source, capacitor, and resistor all connected in parallel between the Vout node and ground.\n\nimage_name:Fig. 12.18(b)\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: S1, D: Vout, G: Vb}\nname: CP, type: Capacitor, value: CP, ports: {Np: S1, Nn: GND}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: GND, Nn: s1}\nname: I1, type: CurrentSource, value: I1, ports: {Np: S1, Nn: GND}\n]\nextrainfo:The circuit includes a resistor RD connected from VDD to Vout, an NMOS transistor M1 with the source connected to node S1, the drain to Vout, and the gate to Vb. A capacitor CP and two current sources Iin and I1 are connected in parallel between node S1 and ground.\n\nthrough $C_{p}$ at high frequencies, resulting in a -3 dB bandwidth of just $\\left(R_{D} C_{p}\\right)^{-1}$. Conversely, using a CG stage [Fig. 12.18(b)] shifts the input pole to $g_{m} / C_{p}$, a significantly higher frequency.\n\nExercise Determine the transfer function $V_{\\text {out }} / I_{\\text {in }}$ for each of the aforementioned circuits."
},
{
    "text": "---[Attention]---\nImage Descriptions: All images referenced in the [Context Provided] area have been transformed into textual explanations. You are to restate the given text within [Context Provided] to preserve its original meaning and length.\n---[Task]---\nRephrase the text in the [Context Provided] section. The revised text should retain the same meaning and length as the original.\n---[Context Provided]---\nThe revised text:\n```\nRefer back to Section 12.1, where it was explained that a feedback system incorporates mechanisms for detecting the output and then \"looping\" the feedback signal back to the input. In the current section, we delve into these mechanisms to simplify their recognition within intricate feedback circuits.\n\nTo ascertain the voltage at a port, we position a voltmeter in parallel with the port and necessitate that it possesses high input impedance to ensure it does not disrupt the circuit [Fig. 12.19(a)]. Similarly, a feedback system that detects the output voltage must be connected in parallel with the output, ideally displaying infinite impedance [Fig. 12.19(b)]. An instance of this can be seen in Fig. 12.19(c), where a resistive divider comprising $R_{1}$ and $R_{2}$ monitors the output voltage and generates the feedback signal, $v_{F}$. To approximate the ideal scenario, the sum of $R_{1}$ and $R_{2}$ should be exceptionally large, rendering $A_{1}$ insensitive to the resistive divider's influence.\n\nTo measure the current passing through a wire, we interrupt the wire and insert a current meter in series with it [Fig. 12.20(a)]. The current meter, essentially containing a minute resistor, is employed to minimize circuit disruption, and it is paired with a voltmeter that gauges the voltage drop across the resistor [Fig. 12.20(b)]. Consequently, a feedback circuit that detects the output current must be串联 with the output, ideally presenting zero impedance [Fig. 12.20(c)], as illustrated in Fig. 12.20(d). In this setup, a resistor placed in series with the source of $M_{1}$ detects the output current and produces a proportional feedback voltage, $V_{F}$. Ideally, $R_{S}$ should be minimal ( $\\ll 1 / g_{m 1}$ ) to leave $M_{1}$'s operation unaffected.\n\nTo redirect a voltage or current to the input, one must implement a system for adding or subtracting these values. To concatenate two voltage sources, they are connected in series [Fig. 12.21(a)]. Therefore, a feedback network that redirects a voltage must be串联 with the input signal [Fig. 12.21(b)], ensuring\n\n$$\n\\begin{equation*}\nv_{e}=v_{i n}-v_{F} \\tag{12.47}\n\\end{equation*}\n$$\n\nFor instance, a differential pair, as shown in Fig. 12.21(c), can subtract the feedback voltage from the input. Alternatively, a single transistor can function as a voltage subtractor [Fig. 12.21(d)].\n\nTo combine two current sources, they are placed in parallel [Fig. 12.22(a)]. Hence, a feedback network that redirects a current must be connected in parallel with the input signal, as depicted in Fig. 12.22(b), resulting in\n\n$$\n\\begin{equation*}\ni_{e}=i_{i n}-i_{F} \\tag{12.48}\n\\end{equation*}\n$$\n\nFor example, a transistor can redirect a current to the input [Fig. 12.22(c)]. Similarly, a resistor can do so if it is sufficiently large to emulate a current source [Fig. 12.22(d)].\n\n[^15]image_name:Figure 12.21(a)\ndescription:The circuit combines two voltage sources V1 and V2 in series, with nodes labeled X1, X2, and X3.\nimage_name:Figure 12.21(b)\ndescription:The system block diagram labeled \"Figure 12.21(b)\" portrays a feedback control system with two core elements: a Feedforward System and a Feedback Network.\n```"
},
{
    "text": "[Attention]—\nWhen examining images referenced in Section 12.1, you will note that they have been transformed into textual descriptions. You are also required to rephrase the content within the [Context Provided] section, ensuring the rephrased text retains the original meaning and length.\n\n[Task]—\nPlease rephrase the content provided in the [Context Provided] section, maintaining the original meaning and length. Your output should be the rephrased text."
},
{
    "text": "Referring back to Section 12.1, remember that a feedback system involves detecting the output and \"feeding back\" the signal to the input. We will explore these detection methods in this section, to facilitate easy identification within complex feedback circuits.\n\nWe measure the voltage across a port by placing a voltmeter in parallel with the port. The voltmeter should have a high input impedance to avoid circuit disturbance [Fig. 12.19(a)]. Similarly, a feedback circuit that output output voltage must be in parallel with the output and ideally have infinite impedance [Fig. 12.19(b)]. An example is shown in Fig. 12.19(c), where the resistive divider formed\nI are asked re rephrasingased text, but it seems to the was cut off. Could you please provide the complete rephrased text for the entire passage provided in the [Context Provided] section?"
},
{
    "text": "Remember from Section 12.1 that a feedback system involves detecting the output and routing the feedback signal back to the input. In this section, we examine these detection methods to easily identify them within complex feedback circuits.\n\nTo measure the voltage across a port, we connect a voltmeter in parallel with the port, ensuring the voltmeter has a high input impedance to avoid disrupting the circuit [Fig. 12.19(a)]. Similarly, a feedback circuit detecting an output voltage should be in parallel with the output and ideally have infinite impedance [Fig. 12.19(b)]. Figure 12.19(c) shows an example where the resistive divider composed of $R_{1}$ and $R_{2}$ detects the output voltage and generates the feedback signal, $v_{F}$. To approximate the ideal case, $R_{1}+R_{2}$ must be very large so that $A_{1}$ is not affected by the resistive divider.\n\nTo measure the current through a wire, we cut the wire and insert a current meter in series with it [Fig. 12.20(a)]. The current meter actually consists of a small resistor, so it does not disturb the circuit, and a voltmeter measures the voltage drop across the resistor [Fig. 12.20(b)]. Thus, a feedback circuit detecting an output current should be in series with the output and ideally have zero impedance [Fig. 12.20(c)]. Figure 12.20(d) illustrates an implementation of this concept. A resistor placed in series with the source of $M_{1}$ detects the output current, generating a proportional feedback voltage, $V_{F}$. Ideally, $R_{S}$ is so small ( $\\ll 1 / g_{m 1}$ ) that the operation of $M_{1}$ remains unaffected.\n\nTo route a voltage or current back to the input, we must use a mechanism for adding or subtracting such quantities. ${ }^{5}$ To add two voltage sources, we place them in series [Fig. 12.21(a)]. Thus, a feedback network returning a voltage must be in series with the input signal [Fig. 12.21(b)], so that\n\n$$\n\\begin{equation*}\nv_{e}=v_{i n}-v_{F} \\tag{12.47}\n\\end{equation*}\n$$\n\nFor example, as shown in Fig. 12.21(c), a differential pair can subtract the feedback voltage from the input. Alternatively, as mentioned in Example 12.7, a single transistor can operate as a voltage subtractor [Fig. 12.21(d)].\n\nTo add two current sources, we place them in parallel [Fig. 12.22(a)]. Thus, a feedback network returning a current must be in parallel with the input signal, Fig. 12.22(b), so that\n\n$$\n\\begin{equation*}\ni_{e}=i_{i n}-i_{F} \\tag{12.48}\n\\end{equation*}\n$$\n\nFor example, a transistor can return a current to the input [Fig. 12.22(c)]. So can a resistor if it is large enough to approximate a current source [Fig. 12.22(d)].\n\n[^15]"
},
{
    "text": "Reflecting on the concepts from Section 12.1, we understand that a feedback system involves sensing the output and routing the feedback signal back to the input. In this section, we delve into these mechanisms to easily identify them within complex feedback circuits.\n\nTo measure the voltage across a port, a voltmeter is connected in parallel with it, necessitating a high input impedance in the voltmeter to prevent circuit disturbance [Fig. 12.19(a)]. Similarly, a feedback circuit sensing output voltage should be in parallel with the output and ideally have infinite impedance [Fig. 12.19(b)]. An example is shown in Fig. 12.19(c), where the resistive divider comprising $R_{1}$ and $R_{2}$ senses the output voltage and produces the feedback signal, $v_{F}$. To approximate the ideal scenario, $R_{1}+R_{2}$ must be very large, ensuring $A_{1}$ is unaffected by the resistive divider.\n\nFor measuring current through a wire, we interrupt the wire and insert a current meter in series [Fig. 12.20(a)]. The current meter, essentially a small resistor paired with a voltmeter measuring the voltage drop, minimizes circuit disturbance [Fig. 12.20(b)]. Hence, a feedback circuit for output current should be in series with the output and ideally have zero impedance [Fig. 12.20(c)]. Fig. 12.20(d) illustrates this principle, where a resistor in series with the source of $M_{1}$ senses the output current, generating a proportional feedback voltage, $V_{F}$. Ideally, $R_{S}$ should be very small ( $\\ll 1 / g_{m 1}$ ) to keep $M_{1}$'s operation unaffected.\n\nTo feed a voltage or current back to the input, we need a method to add or subtract these quantities. To add two voltage sources, they are connected in series [Fig. 12.21(a)]. Thus, a feedback network returning a voltage must be in series with the input signal [Fig. 12.21(b)], resulting in:\n\n$$\n\\begin{equation*}\nv_{e}=v_{i n}-v_{F} \\tag{12.47}\n\\end{equation*}\n$$\n\nFor instance, as shown in Fig. 12.21(c), a differential pair can subtract the feedback voltage from the input. Alternatively, as mentioned in Example 12.7, a single transistor can function as a voltage subtractor [Fig. 12.21(d)].\n\nTo add two current sources, they are placed in parallel [Fig. 12.22(a)]. Hence, a feedback network returning a current must be in parallel with the input signal [Fig. 12.22(b)], resulting in:\n\n$$\n\\begin{equation*}\ni_{e}=i_{i n}-i_{F} \\tag{12.48}\n\\end{equation*}\n$$\n\nFor example, a transistor can return a current to the input [Fig. 12.22(c)]. Similarly, a resistor can serve this purpose if it is large enough to approximate a current source [Fig. 12.22(d)].\n\nIn summary, an \"ideal\" feedback network should have infinite input impedance when sensing a voltage and zero input impedance when sensing a current. Additionally, it should provide zero output impedance when returning a voltage and infinite output impedance when returning a current [Fig. 12.25(a)]."
},
{
    "text": "Reflecting on Section 12.1, we know that a feedback system incorporates mechanisms to detect the output and route the feedback signal back to the input. This section delves into these mechanisms to facilitate their identification within intricate feedback circuits.\n\nTo measure the voltage across a port, we connect a voltmeter in parallel with the port, ensuring the voltmeter has a high input impedance to avoid disrupting the circuit [Fig. 12.19(a)]. Similarly, a feedback circuit detecting an output voltage should be in parallel with the output and ideally exhibit infinite impedance [Fig. 12.19(b)]. Figure 12.19(c) presents an instance where a resistive divider, composed of $R_{1}$ and $R_{2}$, detects the output voltage and produces the feedback signal, $v_{F}$. To approximate the ideal scenario, $R_{1}+R_{2}$ must be exceedingly large so that $A_{1}$ is unaffected by the resistive divider.\n\nFor measuring the current through a wire, we sever the wire and insert a current meter in series [ it [Fig. 12.20(a)]. The current meter,\nI measure the voltage across a port, we connect a voltmeter in parallel with the port, necess\nTo measure the voltage across a port, we position a voltmeter in parallel with the port, ensuring it has a high input impedance so prevent interference with the circuit ["
},
{
    "text": "Reflecting on Section 12.1, we remember that a feedback system comprises a sensing mechanism to detect the output and then \"send back\" the feedback signal to the input. In this part, we delve into these mechanisms to better identify them within intricate feedback circuits.\n\nConsider how we measure voltage across a port. We connect a voltmeter in parallel with the port, ensuring the voltmeter has a high input impedance to prevent disrupting the circuit [Fig. 12.19(a)]. Similarly, a feedback circuit that senses output voltage must be in parallel with the output and ideally have infinite impedance [Fig. 12.19(b)]. An example is shown in Fig. 12.19(c), where the resistive divider made up of $R_{1}$ and $R_{2}$ senses the output voltage and generates the feedback signal, $v_{F}$. To approximate the ideal scenario, $R_{1}+R_{2}$ must be extremely large so that $A_{1}$ remains insensitive to the resistive divider.\n\nHow do we measure current through a wire? We sever the wire and insert a current meter in series with it [Fig. 12.20(a)]. The current meter is essentially a small resistor paired with a voltmeter that measures the voltage drop across the resistor [Fig. 12.20(b)]. Thus, a feedback circuit that senses output current must be in series with the output and ideally have zero impedance [Fig. 12.20(c)]. Fig. 12.20(d) illustrates this concept. A resistor in series with the source of $M_{1}$ senses the output current, creating a proportional feedback voltage, $V_{F}$. Ideally, $R_{S}$ is very small ( $\\ll 1 / g_{m 1}$ ) so that the operation of $M_{1}$ is not affected.\n\nTo feed a voltage or current back to the input, we need a method to add or subtract these quantities. To add two voltage sources, we connect them in series [Fig. 12.21(a)]. Hence, a feedback network returning a voltage must be in series with the input signal [Fig. 12.21(b)], leading to\n\n$$\n\\begin{equation*}\nv_{e}=v_{i n}-v_{F} \\tag{12.47}\n\\end{equation*}\n$$\n\nFor instance, as shown in Fig. 12.21(c), a differential pair can subtract the feedback voltage from the input. Alternatively, as mentioned in Example 12.7, a single transistor can function as a voltage subtractor [Fig. 12.21(d)].\n\nTo add two current sources, we connect them in parallel [Fig. 12.22(a)]. Thus, a feedback network returning a current must be in parallel with the input signal [Fig. 12.22(b)], resulting in\n\n$$\n\\begin{equation*}\ni_{e}=i_{i n}-i_{F} \\tag{12.48}\n\\end{equation*}\n$$\n\nFor example, a transistor can return a current to the input [Fig. 12.22(c)]. Similarly, a resistor can act as a current source if it is large enough [Fig. 12.22(d)].\n\nThe \"ideal\" feedback network should have infinite input impedance when sensing a voltage and zero input impedance when sensing a current. Additionally, it should provide zero output impedance when returning a voltage and infinite output impedance when returning a current [Fig. 12.25(a)]."
},
{
    "text": "Remember from Section 12.1 that a feedback system involves sensing the output and \"feeding back\" the signal to the input. This section delves into these mechanisms to easily identify them within complex feedback circuits.\n\nTo measure the voltage across a port, we connect a voltmeter in parallel with the port, ensuring the voltmeter has a high input impedance to avoid disturbing the circuit [Fig. 12.19(a)]. Similarly, a feedback circuit sensing an output voltage should be in parallel with the output and ideally have infinite impedance [Fig. 12.19(b)]. Fig. 12.19(c) illustrates an example where the resistive divider composed of $R_{1}$ and $R_{2}$ senses the output voltage and generates the feedback signal, $v_{F}$. To approximate the ideal case, $R_{1}+R_{2}$ must be very large so that $A_{1}$ is not affected by the resistive divider.\n\nTo measure the current flowing through a wire, we interrupt the wire and place a current meter in series with it [Fig. 12.20(a)]. The current meter, which consists of a small resistor and a voltmeter measuring the voltage drop across the resistor [Fig. 12.20(b)], should not disturb the circuit. Therefore, a feedback circuit sensing an output current should be in series with the output and ideally have zero impedance [Fig. 12.20(c)]. Fig. 12.20(d) shows an implementation of this concept. A resistor in series with the source of $M_{1}$ senses the output current, generating a proportional feedback voltage, $V_{F}$. Ideally, $R_{S}$ is very small ( $\\ll 1 / g_{m 1}$ ) so that the operation of $M_{1}$ remains unaffected.\n\nTo feed back a voltage or current to the input, we need a mechanism to add or subtract such quantities. To add two voltage sources, we place them in series [Fig. 12.21(a)]. Hence, a feedback network returning a voltage must be in series with the input signal [Fig. 12.21(b)], so that\n\n$$\n\\begin{equation*}\nv_{e}=v_{i n}-v_{F} \\tag{12.47}\n\\end{equation*}\n$$\n\nFor instance, as shown in Fig. 12.21(c), a differential pair can subtract the feedback voltage from the input. Alternatively, as mentioned in Example 12.7, a single transistor can function as a voltage subtractor [Fig. 12.21(d)].\n\nTo add two current sources, we place them in parallel [Fig. 12.22(a)]. Thus, a feedback network returning a current must be in parallel with the input signal, Fig. 12.22(b), so that\n\n$$\n\\begin{equation*}\ni_{e}=i_{i n}-i_{F} \\tag{12.48}\n\\end{equation*}\n$$\n\nFor example, a transistor can return a current to the input [Fig. 12.22(c)]. Similarly, a resistor can serve this purpose if it is large enough to approximate a current source [Fig. 12.22(d)].\n\nLet's summarize the characteristics of an \"ideal\" feedback network. As depicted in Fig. 12.25(a), we expect such a network to have infinite input impedance when sensing a voltage and zero input impedance when sensing a current. Additionally, the network should provide zero output impedance when returning a voltage and infinite output impedance when returning a current."
},
{
    "text": "The block diagram of a feedback system, such as Fig. 12.1, clearly shows the feedback polarity, but this may not be evident in a real circuit. Determining the polarity involves three steps: (a) assume the input signal increases (or decreases); (b) trace the change through the forward amplifier and feedback network; (c) assess whether the returned value counteracts or reinforces the initial effect of the input change. A simpler method is: (a) set the input to zero; (b) open the loop; (c) introduce a test signal, $V_{\\text {test }}$, propagate it around the loop, examine the returned signal, $V_{\\text {ret }}$, and determine the polarity of $V_{\\text {ret }} / V_{\\text {test }}$.\n\nimage_name:Fig. 12.25(a)\ndescription:\nMain Components:\n1. **Amplifier (A₀):**\n   - This block denotes an ideal amplifier with a gain of A₀, responsible for amplifying the input signal.\n   - The system includes two instances of this amplifier.\n\n2. **Feedback Network (K):**\n   - This block has a gain of K and controls the feedback loop in the system.\n   - It takes the amplifier's output and feeds a portion back into the system.\n\n3. **Input and Output Ports:**\n   - **V_in:** The input voltage signal.\n   - **V_out:** The output voltage from the amplifier.\n   - **I_out:** The output current from the amplifier.\n\nFlow of Information or Control:\n   - The input voltage **V_in** is fed into amplifier A₀.\n   - The amplified output voltage **V_out** is produced.\n   - **V_out** is then processed by the feedback network K and fed back into the system.\n   - The feedback loop is closed by returning the processed signal to the amplifier input, influencing input signal processing.\n   - The output current **I_out** indicates the system can handle both voltage and current outputs.\n\nLabels, Annotations, and Key Indicators:\n   - **A₀:** Denotes the amplifier's gain.\n   - **K:** Represents the feedback network's gain.\n   - Arrows indicate signal flow direction from input to output and through the feedback loop.\n\nOverall System Function:\n   - The system amplifies the input voltage signal using a feedback loop to control and stabilize the output. The feedback network ensures output changes are fed back to maintain desired amplification and stability. This setup is common in control systems where feedback enhances performance and reduces signal processing errors.\n\nimage_name:Fig. 12.25(b)\ndescription:\nThe block diagram labeled \"(b)\" illustrates the output impedance of an ideal feedback network for producing voltage and current quantities. Key components include:\n\n1. **Input Source (V_in):**\n   - The input voltage source, \\( V_{in} \\), applied to the system.\n\n2. **Summing Junction:**\n   - Combines \\( V_{in} \\) with feedback signal \\( V_F \\), outputting their difference.\n\n3. **Forward Amplifier (A_0):**\n   - Amplifies the difference signal from the summing junction.\n\n4. **Feedback Path:**\n   - Connects the forward amplifier's output to a feedback network, including a current source and feedback amplifier (K).\n   - The feedback amplifier \\( K \\) contributes to \\( V_F \\).\n\n5. **Current Source and Ground Connection:**\n   - A current source in the feedback path influences feedback current \\( I_F \\).\n\n6. **Output Impedance Control:**\n   - The feedback network adjusts \\( I_{out} \\) based on the feedback loop.\n\n7. **Output:**\n   - The system's output is the current \\( I_{out} \\), influenced by feedback and forward amplification.\n\n**Flow of Information:**\n   - \\( V_{in} \\) is processed through the summing junction with \\( V_F \\), and the resultant signal is amplified by \\( A_0 \\).\n   - The amplified signal generates feedback current \\( I_F \\) through the feedback network.\n   - The feedback loop controls \\( I_{out} \\), ensuring stable output impedance characteristics.\n\n**Overall System Function:**\n   - The system controls output impedance via feedback mechanisms. The feedback network adjusts \\( I_{out} \\) based on \\( V_{in} \\) and \\( V_F \\), ensuring stable output characteristics.\n\nFigure 12.25 (a) Input impedance of ideal feedback networks for sensing voltage and current quantities, (b) output impedance of ideal feedback networks for producing voltage and current quantities.\n\nExample: Determine the feedback polarity in the circuit of Fig. 12.26. <br> 12.12\n\nimage_name:Figure 12.26\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1s2, D:d1d3g3 , G: Vin}\nname: M2, type: NMOS, ports: {S: s1s2, D: Vout, G: X}\nname: M3, type: PMOS, ports: {S: VDD, D: d1d3g3, G: d1d3g3}\nname: M4, type: PMOS, ports: {S: VDD, D: Vout, G: d1d3g3}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: X}\nname: R2, type: Resistor, value: R2, ports: {N1: X, N2: GND}\nname: Iss, type: CurrentSource, value: Iss, ports: {Np: s1s2, Nn: GND}\n]\nextrainfo: This differential amplifier uses NMOS and PMOS transistors, a current source for biasing, and feedback resistors for stability.\n\nSolution: If $V_{\\text {in }}$ increases, $I_{D 1}$ tends to rise and $I_{D 2}$ tends to fall. Consequently, $V_{o u t}$ and $V_{X}$ rise. The increase in $V_{X}$ boosts $I_{D 2}$ and reduces $I_{D 1}$, counteracting the $V_{i n}$ change. Thus, the feedback is negative. Readers are encouraged to apply the second method.\n\nExercise: If the top of $R_{1}$ is connected to M1's drain instead of M2's, determine the feedback polarity.\n\nimage_name:Figure 12.27\ndescription:\n[\nname: M1, type: NMOS, ports: {S: X, D: A, G: Vin}\nname: M2, type: NMOS, ports: {S: GND, D: Vout, G: A}\nname: RD1, type: Resistor, value: RD1, ports: {N1: VDD, N2: A}\nname: RD2, type: Resistor, value: RD2, ports: {N1: VDD, N2: Vout}\nname: RF1, type: Resistor, value: RF1, ports: {N1: Vout, N2: X}\nname: RF2, type: Resistor, value: RF2, ports: {N1: X, N2: GND}\n]\nextrainfo: This circuit determines feedback polarity, featuring two NMOS transistors (M1 and M2), where M1 is controlled by Vin, and M2 is in the feedback loop. Resistors RD1 and RD2 connect to VDD, and RF1 and RF2 form a feedback network connected to Vout. The feedback is negative, as an increase in Vin decreases ID1 and increases ID2, opposing the Vin change.\n\nFigure 12.27\n\nSolution: If $V_{\\text {in }}$ rises, $I_{D 1}$ increases, causing $V_{A}$ to fall and $V_{o u t}$ to rise, along with $V_{X}$. The rise in $V_{X}$ reduces $I_{D 1}$, opposing the $V_{i n}$ effect. Thus, the feedback is negative.\n\nExercise: Repeat the example if M2 is converted to a CG stage, with its source tied to A and its gate to a bias voltage.\n\nimage_name:Fig. 12.28\ndescription:\n[\nname: RD1, type: Resistor, value: RD1, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: X}\nname: M2, type: NMOS, ports: {S: GND, D: X, G: Vout}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: GND, Nn:X}\n]\nextrainfo: This circuit includes two NMOS transistors (M1 and M2), a resistor RD1 connected to VDD, and a current source Iin. The feedback is positive, as an increase in Iin raises VX, increasing ID1 and decreasing Vout.\n\nFigure 12.28\n\nSolution: If $I_{\\text {in }}$ increases, $V_{X}$ rises, increasing $I_{D 1}$. This causes $V_{\\text {out }}$ to fall and $I_{D 2}$ to decrease, allowing $V_{X}$ to rise further. Since the returned signal enhances the Iin effect, the feedback polarity is positive.\n\nExercise: Repeat the example if M2 is a PMOS device (still operating as a CS stage). What happens if $R_{D} \\rightarrow \\infty$? Is this result expected?\n\nDid You Know?\n\nWhile this book focuses on negative feedback, positive feedback also has applications. For instance, a new ice cream store with a unique recipe attracts many customers. If the store adds an extra scoop for free, it attracts even more customers (positive feedback). Conversely, if the owner reduces the ice cream size, the store loses customers (negative feedback)."
},
{
    "text": "While the block diagram of a feedback system, such as Fig. 12.1, clearly indicates the polarity of feedback, an actual circuit implementation might not. The process to determine this polarity involves three steps: (a) assume the input signal increases (or decreases); (b) trace the change through the forward amplifier and the feedback network; (c) ascertain whether the returned quantity counteracts or reinforces the initial \"effect\" caused by the input change. A more straightforward method is as follows: (a) set the input to zero; (b) open the loop; (c) introduce a test signal, $V_{\\text {test }}$, propagate it around the loop, inspect the returned signal, $V_{\\text {ret }}$, and determine the polarity of $V_{\\text {ret }} / V_{\\text {test }}$.\n\nimage_name:Fig. 12.25(a)\ndescription:Main Components:\n1. **Amplifier (A₀):**\n- This block symbolizes an ideal amplifier with a gain of A₀, responsible for amplifying the input signal.\n- The system includes two instances of this amplifier.\n\n2. **Feedback Network (K):**\n- This block represents a feedback element with a gain of K, used to manage the feedback loop in the system.\n- The feedback network takes the amplifier's output and feeds a portion back into the system.\n\n3. **Input and Output Ports:**\n- **V_in:** The input voltage signal to the system.\n- **V_out:** The output voltage from the amplifier.\n- **I_out:** The output current from the amplifier.\n\nFlow of Information or Control:\n- The input voltage signal **V_in** is directed to the amplifier A₀.\n- The amplified output voltage **V_out** is generated by the amplifier.\n- **V_out** is then processed by the feedback network K and fed back into the system.\n- The feedback loop is completed by returning the processed signal to the amplifier's input, thus influencing input signal processing.\n- The output current **I_out** is an additional output of the amplifier, indicating the system's capability to handle both voltage and current outputs.\n\nLabels, Annotations, and Key Indicators:\n- **A₀:** Denotes the gain of the amplifier.\n- **K:** Indicates the gain of the feedback network.\n- Arrows show the direction of signal flow, illustrating the path from input to output and through the feedback loop.\n\nOverall System Function:\nThe system is designed to amplify an input voltage signal while utilizing a feedback loop to control and stabilize the output. The feedback network ensures that any output changes are fed back into the system to maintain a desired amplification level and stability. This setup is typical in control systems where feedback enhances performance and reduces signal processing errors.\n\nimage_name:Fig. 12.25(b)\ndescription:The block diagram labeled \"(b)\" illustrates the output impedance of an ideal feedback network for generating voltage and current quantities. The system includes several key components:\n\n1. **Input Source (V_in):**\n- The input voltage source, represented as \\( V_{in} \\), is applied to the system.\n\n2. **Summing Junction:**\n- The input voltage \\( V_{in} \\) is directed to a summing junction, which merges it with a feedback signal \\( V_F \\). The summing junction outputs the difference between \\( V_{in} \\) and \\( V_F \\).\n\n3. **Forward Amplifier (A_0):**\n- The summing junction's output is fed into a forward amplifier \\( A_0 \\), which amplifies the difference signal.\n\n4. **Feedback Path:**\n- The forward amplifier's output connects to a feedback network, which includes a current source and a feedback amplifier (K).\n- The feedback amplifier \\( K \\) receives its input from the forward amplifier's output and contributes to the feedback signal \\( V_F \\).\n\n5. **Current Source and Ground Connection:**\n- The feedback path incorporates a current source connected to ground, influencing the feedback current \\( I_F \\).\n\n6. **Output Impedance Control:**\n- The feedback network controls the output impedance, adjusting \\( I_{out} \\) based on the feedback loop.\n\n7. **Output:**\n- The system's output is represented by the current \\( I_{out} \\), influenced by both feedback and forward amplification.\n\n**Flow of Information:**\n- The input voltage \\( V_{in} \\) is processed through the summing junction, where it combines with the feedback voltage \\( V_F \\). The resulting signal is amplified by the forward amplifier \\( A_0 \\).\n- The amplified signal then generates a feedback current \\( I_F \\) through the feedback network, which includes a current source and feedback amplifier \\( K \\).\n- The feedback loop ensures controlled output current \\( I_{out} \\), maintaining desired output impedance characteristics.\n\n**Overall System Function:**\n- The primary role of this system is to control output impedance via feedback mechanisms. The feedback network adjusts the output current based on the input voltage and feedback signal, ensuring stable and precise output characteristics.\n\nFigure 12.25 (a) Input impedance of ideal feedback networks for sensing voltage and current quantities, (b) output impedance of ideal feedback networks for producing voltage and current quantities.\n\nExample Determine the feedback polarity in the circuit of Fig. 12.26. <br> 12.12\n\nimage_name:Figure 12.26\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1s2, D:d1d3g3 , G: Vin}\nname: M2, type: NMOS, ports: {S: s1s2, D: Vout, G: X}\nname: M3, type: PMOS, ports: {S: VDD, D: d1d3g3, G: d1d3g3}\nname: M4, type: PMOS, ports: {S: VDD, D: Vout, G: d1d3g3}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: X}\nname: R2, type: Resistor, value: R2, ports: {N1: X, N2: GND}\nname: Iss, type: CurrentSource, value: Iss, ports: {Np: s1s2, Nn: GND}\n]\nextrainfo:The circuit is a differential amplifier with NMOS and PMOS transistors. It uses a current source for biasing and feedback resistors for stability.\n\nSolution If $V_{\\text {in }}$ increases, $I_{D 1}$ tends to rise and $I_{D 2}$ tends to fall. Consequently, $V_{o u t}$ and thus $V_{X}$ also tend to rise. The increase in $V_{X}$ tends to elevate $I_{D 2}$ and decrease $I_{D 1}$, counteracting the initial change in $V_{i n}$. Hence, the feedback is negative. Readers are encouraged to apply the second method.\n\nExercise $\\quad$ Suppose the top terminal of $R_{1}$ is connected to the drain of $M_{1}$ instead of $M_{2}$. Determine the feedback polarity.\n\nimage_name:Figure 12.27\ndescription:\n[\nname: M1, type: NMOS, ports: {S: X, D: A, G: Vin}\nname: M2, type: NMOS, ports: {S: GND, D: Vout, G: A}\nname: RD1, type: Resistor, value: RD1, ports: {N1: VDD, N2: A}\nname: RD2, type: Resistor, value: RD2, ports: {N1: VDD, N2: Vout}\nname: RF1, type: Resistor, value: RF1, ports: {N1: Vout, N2: X}\nname: RF2, type: Resistor, value: RF2, ports: {N1: X, N2: GND}\n]\nextrainfo:The circuit is designed to determine feedback polarity. It includes two NMOS transistors (M1 and M2), where M1 is controlled by the input voltage Vin, and M2 is part of the feedback loop. Resistors RD1 and RD2 are connected to the power supply VDD, and resistors RF1 and RF2 form a feedback network connected to the output Vout. The feedback is negative, as an increase in Vin results in a decrease in ID1 and an increase in ID2, opposing the change in Vin.\n\nFigure 12.27\n\nSolution If $V_{\\text {in }}$ increases, $I_{D 1}$ tends to rise, causing $V_{A}$ to fall, $V_{o u t}$ to rise, and $V_{X}$ to increase. The rise in $V_{X}$ tends to reduce $I_{D 1}$, thereby opposing the effect of $V_{i n}$. Thus, the feedback is negative.\n\nExercise Repeat the previous example if $M_{2}$ is converted to a CG stage, i.e., its source is tied to node $A$ and its gate to a bias voltage.\n\nimage_name:Fig. 12.28\ndescription:\n[\nname: RD1, type: Resistor, value: RD1, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: X}\nname: M2, type: NMOS, ports: {S: GND, D: X, G: Vout}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: GND, Nn:X}\n]\nextrainfo:The circuit consists of two NMOS transistors M1 and M2, a resistor RD1 connected to VDD, and a current source Iin. The feedback in the circuit is positive, as an increase in input current Iin leads to an increase in VX, which further increases ID1 and decreases Vout.\n\nFigure 12.28\n\nSolution If $I_{\\text {in }}$ increases, $V_{X}$ tends to rise, thereby increasing $I_{D 1}$. As a result, $V_{\\text {out }}$ falls and $I_{D 2}$ decreases, allowing $V_{X}$ to rise further. Since the returned signal enhances the effect of $I_{i n}$, the feedback polarity is positive.\n\nExercise Repeat the previous example if $M_{2}$ is a PMOS device (still operating as a CS stage). What occurs if $R_{D} \\rightarrow \\infty$? Is this outcome expected?\n\nDid you know?\n\nWhile this book primarily focuses on negative feedback, positive feedback also has its applications. For instance, if a new ice cream store introduces a unique recipe and attracts many customers, adding an extra scoop to each ice cream for free will attract even more customers. This is an example of positive feedback, where the store owner enhances customer response. Conversely, if the owner reduces the ice cream size due to greed, the store will lose customers, demonstrating negative feedback."
},
{
    "text": "The rephrased text:\n\n```\nAlthough the block diagram of a feedback system, such as Fig. 12.1, easily shows the feedback polarity, this may not be evident in an actual circuit. Determining the polarity involves three steps: (a) assume the input signal increases (or decreases); (b) trace the change through the forward amplifier and feedback network; (c) assess whether the returned value opposes or enhances the initial effect caused by the input change. A more straightforward method is: (a) set the input to zero; (b) open the loop; (c) introduce a test signal, $V_{\\text{test}}$, let it circulate the loop, inspect the returned signal, $V_{\\text{ret}}$, and determine the polarity of $V_{\\text{ret}} / V_{\\text{test}}$.\n\nimage_name:Fig. 12.25(a)\ndescription:Key Components:\n1. **Amplifier (A₀):**\n- This block denotes an ideal amplifier with a gain of A₀, responsible for boosting the input signal.\n- Two such amplifiers are present in the system.\n\n2. **Feedback Network (K):**\n- This block represents a feedback mechanism with a gain of K, used to manage the feedback loop.\n- It takes the amplifier's output and feeds a part of it back into the system.\n\n3. **Input and Output Ports:**\n- **V_in:** The input voltage signal to the system.\n- **V_out:** The output voltage from the amplifier.\n- **I_out:** The output current from the amplifier.\n\nInformation and Control Flow:\n- The input voltage **V_in** is directed to the amplifier A₀.\n- The amplified output voltage **V_out** is generated by the amplifier.\n- **V_out** is then routed to the feedback network K, which processes and feeds it back into the system.\n- The feedback loop is completed by returning the processed signal to the amplifier's input, influencing input signal processing.\n- The output current **I_out** indicates the system's capability to handle both voltage and current outputs.\n\nLabels, Annotations, and Key Indicators:\n- **A₀:** Denotes the amplifier's gain.\n- **K:** Indicates the feedback network's gain.\n- Arrows show the signal flow direction, from input to output and through the feedback loop.\n\nSystem Function Overview:\nThe system is designed to amplify an input voltage signal while using a feedback loop for control and stability. The feedback network ensures any output changes are fed back, maintaining desired amplification and stability. This setup is common in control systems where feedback enhances performance and reduces signal processing errors.\n\nimage_name:Fig. 12.25(b)\ndescription:The block diagram labeled \"(b)\" illustrates the output impedance of an ideal feedback network for voltage and current outputs. It includes several key components:\n\n1. **Input Source (V_in):**\n- The input voltage source, represented as \\( V_{in} \\), is applied to the system.\n\n2. **Summing Junction:**\n- \\( V_{in} \\) is input to a summing junction, combining it with feedback signal \\( V_F \\). The junction outputs the difference between \\( V_{in} \\) and \\( V_F \\).\n\n3. **Forward Amplifier (A_0):**\n- The summing junction's output feeds into the forward amplifier \\( A_0 \\), which amplifies the difference signal.\n\n4. **Feedback Path:**\n- The forward amplifier's output connects to a feedback network, including a current source and feedback amplifier (K).\n- The feedback amplifier \\( K \\) receives input from the forward amplifier, contributing to \\( V_F \\).\n\n5. **Current Source and Ground Connection:**\n- The feedback path includes a current source connected to ground, influencing feedback current \\( I_F \\).\n\n6. **Output Impedance Control:**\n- The feedback network controls output impedance, adjusting \\( I_{out} \\) based on the feedback loop.\n\n7. **Output:**\n- The system's output is represented by current \\( I_{out} \\), influenced by feedback and forward amplification.\n\nInformation Flow:\n- \\( V_{in} \\) is processed through the summing junction, combined with \\( V_F \\). The resulting signal is amplified by \\( A_0 \\).\n- The amplified signal generates feedback current \\( I_F \\) through the feedback network, including a current source and \\( K \\).\n- The feedback loop controls \\( I_{out} \\), ensuring stable output impedance characteristics.\n\nSystem Function:\n- The system primarily controls output impedance via feedback mechanisms. The feedback network adjusts \\( I_{out} \\) based on \\( V_{in} \\) and \\( V_F \\), ensuring stable and precise outputs.\n\nFigure 12.25 (a) Input impedance of ideal feedback networks for sensing voltage and current, (b) output impedance of ideal feedback networks for producing voltage and current.\n\nExample: Determine the feedback polarity in the circuit of Fig. 12.26. <br> 12.12\n\nimage_name:Figure 12.26\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1s2, D:d1d3g3, G: Vin}\nname: M2, type: NMOS, ports: {S: s1s2, D: Vout, G: X}\nname: M3, type: PMOS, ports: {S: VDD, D: d1d3g3, G: d1d3g3}\nname: M4, type: PMOS, ports: {S: VDD, D: Vout, G: d1d3g3}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: X}\nname: R2, type: Resistor, value: R2, ports: {N1: X, N2: GND}\nname: Iss, type: CurrentSource, value: Iss, ports: {Np: s1s2, Nn: GND}\n]\nextrainfo:The circuit is a differential amplifier with NMOS and PMOS transistors, using a current source for biasing and feedback resistors for stability.\n\nSolution: If $V_{\\text{in}}$ increases, $I_{D1}$ tends to rise and $I_{D2}$ tends to fall. Consequently, $V_{out}$ and $V_X$ also rise. The increase in $V_X$ tends to boost $I_{D2}$ and reduce $I_{D1}$, counteracting the $V_{in}$ change. Thus, the feedback is negative. Readers are encouraged to apply the second method.\n\nExercise: If the top of $R1$ is connected to M1's drain instead of M2's, determine the feedback polarity.\n\nimage_name:Figure 12.27\ndescription:\n[\nname: M1, type: NMOS, ports: {S: X, D: A, G: Vin}\nname: M2, type: NMOS, ports: {S: GND, D: Vout, G: A}\nname: RD1, type: Resistor, value: RD1, ports: {N1: VDD, N2: A}\nname: RD2, type: Resistor, value: RD2, ports: {N1: VDD, N2: Vout}\nname: RF1, type: Resistor, value: RF1, ports: {N1: Vout, N2: X}\nname: RF2, type: Resistor, value: RF2, ports: {N1: X, N2: GND}\n]\nextrainfo:The circuit is designed to determine feedback polarity, featuring two NMOS transistors (M1 and M2), where M1 is controlled by Vin, and M2 is part of the feedback loop. Resistors RD1 and RD2 connect to VDD, and RF1 and RF2 form a feedback network connected to Vout. The feedback is negative, as an increase in Vin decreases ID1 and increases ID2, opposing the Vin change.\n\nFigure 12.27\n\nSolution: If $V_{\\text{in}}$ rises, $I_{D1}$ increases, causing $V_A$ to fall, $V_{out}$ to rise, and $V_X$ to increase. The rise in $V_X$ tends to decrease $I_{D1}$, opposing the effect of $V_{in}$. Thus, the feedback is negative.\n\nExercise: Repeat the example if M2 is converted to a CG stage, with its source tied to A and its gate to a bias voltage.\n\nimage_name:Fig. 12.28\ndescription:\n[\nname: RD1, type: Resistor, value: RD1, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: X}\nname: M2, type: NMOS, ports: {S: GND, D: X, G: Vout}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: GND, Nn:X}\n]\nextrainfo:The circuit includes two NMOS transistors (M1 and M2), a resistor RD1 connected to VDD, and a current source Iin. The feedback is positive, as an increase in Iin raises VX, increasing ID1 and decreasing Vout.\n\nFigure 12.28\n\nSolution: If $I_{\\text{in}}$ increases, $V_X$ rises, increasing $I_{D1}$. This causes $V_{out}$ to fall and $I_{D2}$ to decrease, allowing $V_X$ to rise further. Since the returned signal enhances the Iin effect, the feedback polarity is positive.\n\nExercise: Repeat the example if M2 is a PMOS device (still a CS stage). What if $R_D \\rightarrow \\infty$? Is this result expected?\n\nDid You Know?\n\nWhile this book focuses on negative feedback, positive feedback also has applications. For instance, a new ice cream store with a unique recipe attracts many customers. If the store adds an extra scoop for free, it attracts even more customers (positive feedback). Conversely, if the owner reduces the ice cream size, the store loses customers (negative feedback).\n```"
},
{
    "text": "```\nAlthough the block diagram of a feedback system, such as Fig. 12.1, clearly indicates the polarity of feedback, this may not be as evident in an actual circuit implementation. The process to determine this polarity consists of three steps: (a) assume the input signal increases (or decreases); (b) trace the change through the forward amplifier and the feedback network; (c) ascertain whether the returned quantity counteracts or reinforces the initial effect caused by the input change. A more straightforward method involves: (a) setting the input to zero; (b) interrupting the loop; (c) introducing a test signal, $V_{\\text {test }}$, circulating it around the loop, examining the returned signal, $V_{\\text {ret }}$, and determining the polarity of $V_{\\text {ret }} / V_{\\text {test }}$.\n\nimage_name:Fig. 12.25(a)\ndescription:Key Components:\n1. **Amplifier (A₀):**\n- This block symbolizes an ideal amplifier with a gain of A₀, responsible for amplifying the input signal.\n- The system includes two instances of this amplifier.\n\n2. **Feedback Network (K):**\n- This block represents a feedback element with a gain of K, used to manage the feedback loop in the system.\n- The feedback network takes the amplifier's output and feeds a portion back into the system.\n\n3. **Input and Output Ports:**\n- **V_in:** The input voltage signal to the system.\n- **V_out:** The output voltage from the amplifier.\n- **I_out:** The output current from the amplifier.\n\nInformation or Control Flow:\n- The input voltage signal **V_in** is directed to the amplifier A₀.\n- The amplifier produces the amplified output voltage **V_out**.\n- **V_out** is then routed to the feedback network K, which processes and feeds it back into the system.\n- The feedback loop is completed by returning the processed signal to the amplifier's input, influencing the input signal processing.\n- The output current **I_out** is an additional output from the amplifier, indicating the system's capability to handle both voltage and current outputs.\n\nLabels, Annotations, and Key Indicators:\n- **A₀:** Denotes the amplifier's gain.\n- **K:** Indicates the feedback network's gain.\n- Arrows show the direction of signal flow, illustrating the path from input to output and through the feedback loop.\n\nOverall System Function:\nThe system is engineered to amplify an input voltage signal while utilizing a feedback loop to regulate and stabilize the output. The feedback network ensures that any output changes are fed back into the system to maintain the desired amplification and stability levels. This setup is common in control systems where feedback is employed to enhance performance and minimize errors in signal processing.\n\nimage_name:Fig. 12.25(b)\ndescription:The block diagram labeled \"(b)\" illustrates the output impedance of an ideal feedback network for generating voltage and current quantities. The system comprises several essential components:\n\n1. **Input Source (V_in):**\n- The input voltage source, represented as \\( V_{in} \\), is applied to the system.\n\n2. **Summing Junction:**\n- The input voltage \\( V_{in} \\) is directed to a summing junction, which merges it with a feedback signal \\( V_F \\). The summing junction outputs the difference between \\( V_{in} \\) and \\( V_F \\).\n\n3. **Forward Amplifier (A_0):**\n- The summing junction's output is fed into a forward amplifier \\( A_0 \\), which amplifies the difference signal.\n\n4. **Feedback Path:**\n- The forward amplifier's output connects to a feedback network, which includes a current source and a feedback amplifier (K).\n- The feedback amplifier \\( K \\) receives its input from the forward amplifier's output and contributes to the feedback signal \\( V_F \\).\n\n5. **Current Source and Ground Connection:**\n- The feedback path incorporates a current source connected to ground, influencing the feedback current \\( I_F \\).\n\n6. **Output Impedance Control:**\n- The feedback network controls the output impedance, adjusting \\( I_{out} \\) based on the feedback loop.\n\n7. **Output:**\n- The system's output is represented by the current \\( I_{out} \\), influenced by both feedback and forward amplification.\n\n**Information Flow:**\n- The input voltage \\( V_{in} \\) is processed through the summing junction, where it combines with the feedback voltage \\( V_F \\). The resulting signal is amplified by the forward amplifier \\( A_0 \\).\n- The amplified signal then generates a feedback current \\( I_F \\) through the feedback network, which includes a current source and feedback amplifier \\( K \\).\n- The feedback loop ensures the output current \\( I_{out} \\) is controlled, maintaining the desired output impedance characteristics.\n\n**Overall System Function:**\n- The primary role of this system is to control output impedance via feedback mechanisms. The feedback network adjusts the output current based on the input voltage and feedback signal, ensuring stable and precise output characteristics.\n\nFigure 12.25 (a) Input impedance of ideal feedback networks for sensing voltage and current quantities, (b) output impedance of ideal feedback networks for producing voltage and current quantities.\n\nExample Determine the feedback polarity in the circuit of Fig. 12.26. <br> 12.12\n\nimage_name:Figure 12.26\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1s2, D:d1d3g3 , G: Vin}\nname: M2, type: NMOS, ports: {S: s1s2, D: Vout, G: X}\nname: M3, type: PMOS, ports: {S: VDD, D: d1d3g3, G: d1d3g3}\nname: M4, type: PMOS, ports: {S: VDD, D: Vout, G: d1d3g3}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: X}\nname: R2, type: Resistor, value: R2, ports: {N1: X, N2: GND}\nname: Iss, type: CurrentSource, value: Iss, ports: {Np: s1s2, Nn: GND}\n]\nextrainfo:The circuit is a differential amplifier with NMOS and PMOS transistors. It uses a current source for biasing and feedback resistors for stability.\n\nSolution If $V_{\\text {in }}$ increases, $I_{D 1}$ tends to rise and $I_{D 2}$ tends to fall. Consequently, $V_{o u t}$ and $V_{X}$ also tend to increase. The increase in $V_{X}$ tends to elevate $I_{D 2}$ and reduce $I_{D 1}$, counteracting the initial change in $V_{i n}$. Thus, the feedback is negative. Readers are encouraged to apply the second method.\n\nExercise Suppose the top terminal of $R_{1}$ is connected to the drain of $M_{1}$ instead of $M_{2}$. Determine the feedback polarity.\nimage_name:Figure 12.27\ndescription:\n[\nname: M1, type: NMOS, ports: {S: X, D: A, G: Vin}\nname: M2, type: NMOS, ports: {S: GND, D: Vout, G: A}\nname: RD1, type: Resistor, value: RD1, ports: {N1: VDD, N2: A}\nname: RD2, type: Resistor, value: RD2, ports: {N1: VDD, N2: Vout}\nname: RF1, type: Resistor, value: RF1, ports: {N1: Vout, N2: X}\nname: RF2, type: Resistor, value: RF2, ports: {N1: X, N2: GND}\n]\nextrainfo:The circuit is designed to determine feedback polarity. It includes two NMOS transistors (M1 and M2), where M1 is controlled by the input voltage Vin, and M2 is part of the feedback loop. Resistors RD1 and RD2 are connected to the power supply VDD, and resistors RF1 and RF2 form a feedback network connected to the output Vout. The feedback is negative, as an increase in Vin leads to a decrease in ID1 and an increase in ID2, opposing the change in Vin.\n\nFigure 12.27\n\nSolution If $V_{\\text {in }}$ increases, $I_{D 1}$ tends to rise. Consequently, $V_{A}$ decreases, $V_{o u t}$ increases, and so does $V_{X}$. The increase in $V_{X}$ tends to reduce $I_{D 1}$, thereby opposing the effect of $V_{i n}$. Hence, the feedback is negative.\n\nExercise Repeat the previous example if $M_{2}$ is converted to a CG stage, i.e., its source is tied to node $A$ and its gate to a bias voltage.\nimage_name:Fig. 12.28\ndescription:\n[\nname: RD1, type: Resistor, value: RD1, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: X}\nname: M2, type: NMOS, ports: {S: GND, D: X, G: Vout}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: GND, Nn:X}\n]\nextrainfo:The circuit consists of two NMOS transistors M1 and M2, a resistor RD1 connected to VDD, and a current source Iin. The feedback in the circuit is positive, as an increase in input current Iin results in an increase in VX, which further increases ID1 and decreases Vout.\n\nFigure 12.28\n\nSolution If $I_{\\text {in }}$ increases, $V_{X}$ tends to rise, thereby increasing $I_{D 1}$. As a result, $V_{\\text {out }}$ decreases and $I_{D 2}$ reduces, allowing $V_{X}$ to rise further. Since the returned signal enhances the effect of $I_{i n}$, the feedback polarity is positive.\n\nExercise Repeat the previous example if $M_{2}$ is a PMOS device (still operating as a CS stage). What occurs if $R_{D} \\rightarrow \\infty$? Is this outcome expected?\n\nDid You Know?\n\nWhile this book primarily focuses on negative feedback, positive feedback also has its applications. For instance, if a new ice cream store introduces a unique recipe and attracts many customers, adding an extra scoop to each ice cream for free will attract even more customers. This action provides a feedback signal that enhances customer response (positive feedback). Conversely, if the owner reduces the ice cream size due to greed, the store will lose customers (negative feedback).\n```"
},
{
    "text": "While the block diagram of a feedback system, such as Fig. 12.1, easily shows the polarity of feedback, an actual circuit implementation might not. Determining this polarity involves three steps: (a) assume the input signal increases (or decreases); (b) trace the change through the forward amplifier and feedback network; (c) ascertain whether the returned quantity counteracts or reinforces the initial effect caused by the input change. A simpler method is: (a) set the input to zero; (b) open the loop; (c) introduce a test signal, $V_{\\text {test }}$, propagate it around the loop, inspect the returned signal, $V_{\\text {ret }}$, and determine the polarity of $V_{\\text {ret }} / V_{\\text {test }}$.\n\nimage_name:Fig. 12.25(a)\ndescription:Key Components:\n1. **Amplifier (A₀):**\n- This block denotes an ideal amplifier with a gain of A₀, responsible for boosting the input signal.\n- The system includes two instances of this amplifier.\n\n2. **Feedback Network (K):**\n- This block represents a feedback element with a gain of K, used to manage the feedback loop.\n- It takes the amplifier's output and feeds a portion back into the system.\n\n3. **Input and Output Ports:**\n- **V_in:** The input voltage signal.\n- **V_out:** The output voltage from the amplifier.\n- **I_out:** The output current from the amplifier.\n\nInformation Flow:\n- The input voltage **V_in** enters the amplifier A₀.\n- The amplified output voltage **V_out** is generated.\n- **V_out** is then routed to the feedback network K, which processes and feeds it back.\n- The feedback loop is completed by returning the processed signal to the amplifier's input, influencing signal processing.\n- The output current **I_out** indicates the system's capability to handle both voltage and current outputs.\n\nLabels and Indicators:\n- **A₀:** Denotes the amplifier's gain.\n- **K:** Indicates the feedback network's gain.\n- Arrows show signal flow direction from input to output and through the feedback loop.\n\nSystem Function:\nThe system aims to amplify an input voltage signal while using a feedback loop for control and stability. The feedback network ensures output changes are fed back to maintain desired amplification and stability, typical in control systems where feedback enhances performance and reduces processing errors.\n\nimage_name:Fig. 12.25(b)\ndescription:The block diagram labeled \"(b)\" illustrates the output impedance of an ideal feedback network for generating voltage and current. Key components include:\n\n1. **Input Source (V_in):**\n- The input voltage source, \\( V_{in} \\), applied to the system.\n\n2. **Summing Junction:**\n- Combines \\( V_{in} \\) with feedback signal \\( V_F \\), outputting their difference.\n\n3. **Forward Amplifier (A_0):**\n- Amplifies the difference signal from the summing junction.\n\n4. **Feedback Path:**\n- Connects the forward amplifier's output to a feedback network, including a current source and feedback amplifier (K).\n- \\( K \\) contributes to the feedback signal \\( V_F \\).\n\n5. **Current Source and Ground:**\n- The feedback path includes a current source connected to ground, influencing \\( I_F \\).\n\n6. **Output Impedance Control:**\n- The feedback network adjusts \\( I_{out} \\) based on the feedback loop.\n\n7. **Output:**\n- Represented by \\( I_{out} \\), influenced by feedback and forward amplification.\n\nInformation Flow:\n- \\( V_{in} \\) is processed through the summing junction with \\( V_F \\), then amplified by \\( A_0 \\).\n- The amplified signal generates \\( I_F \\) through the feedback network.\n- The feedback loop controls \\( I_{out} \\), ensuring stable output impedance.\n\nSystem Function:\n- The system controls output impedance via feedback, adjusting \\( I_{out} \\) based on \\( V_{in} \\) and \\( V_F \\) for stable output characteristics.\n\nFigure 12.25 (a) Input impedance of ideal feedback networks for sensing voltage and current, (b) output impedance for producing voltage and current.\n\nExample: Determine the feedback polarity in Fig. 12.26.\n\nimage_name:Figure 12.26\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1s2, D:d1d3g3 , G: Vin}\nname: M2, type: NMOS, ports: {S: s1s2, D: Vout, G: X}\nname: M3, type: PMOS, ports: {S: VDD, D: d1d3g3, G: d1d3g3}\nname: M4, type: PMOS, ports: {S: VDD, D: Vout, G: d1d3g3}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: X}\nname: R2, type: Resistor, value: R2, ports: {N1: X, N2: GND}\nname: Iss, type: CurrentSource, value: Iss, ports: {Np: s1s2, Nn: GND}\n]\nextrainfo:The circuit is a differential amplifier with NMOS and PMOS transistors, using a current source for biasing and feedback resistors for stability.\n\nSolution: If $V_{\\text {in }}$ rises, $I_{D 1}$ increases and $I_{D 2}$ decreases, causing $V_{o u t}$ and $V_{X}$ to rise. The rise in $V_{X}$ increases $I_{D 2}$ and decreases $I_{D 1}$, counteracting the $V_{i n}$ change, indicating negative feedback. Apply the second procedure for verification.\n\nExercise: If the top of $R_{1}$ connects to M1's drain instead of M2's, determine the feedback polarity.\n\nimage_name:Figure 12.27\ndescription:\n[\nname: M1, type: NMOS, ports: {S: X, D: A, G: Vin}\nname: M2, type: NMOS, ports: {S: GND, D: Vout, G: A}\nname: RD1, type: Resistor, value: RD1, ports: {N1: VDD, N2: A}\nname: RD2, type: Resistor, value: RD2, ports: {N1: VDD, N2: Vout}\nname: RF1, type: Resistor, value: RF1, ports: {N1: Vout, N2: X}\nname: RF2, type: Resistor, value: RF2, ports: {N1: X, N2: GND}\n]\nextrainfo:The circuit includes NMOS transistors M1 and M2, with M1 controlled by Vin and M2 in the feedback loop. Resistors RD1 and RD2 connect to VDD, and RF1 and RF2 form the feedback network. Feedback is negative, as a Vin increase decreases ID1 and increases ID2, opposing the change.\n\nFigure 12.27\n\nSolution: If $V_{\\text {in }}$ rises, $I_{D 1}$ increases, causing $V_{A}$ to fall, $V_{o u t}$ to rise, and $V_{X}$ to rise. The rise in $V_{X}$ reduces $I_{D 1}$, opposing the $V_{i n}$ effect, indicating negative feedback.\n\nExercise: Repeat if M2 becomes a CG stage with its source at A and gate at a bias voltage.\n\nimage_name:Fig. 12.28\ndescription:\n[\nname: RD1, type: Resistor, value: RD1, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: X}\nname: M2, type: NMOS, ports: {S: GND, D: X, G: Vout}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: GND, Nn:X}\n]\nextrainfo:The circuit has NMOS transistors M1 and M2, resistor RD1, and current source Iin. Feedback is positive, as an Iin increase raises VX, increasing ID1 and decreasing Vout.\n\nFigure 12.28\n\nSolution: If $I_{\\text {in }}$ rises, $V_{X}$ rises, increasing $I_{D 1}$, causing $V_{\\text {out }}$ to fall and $I_{D 2}$ to decrease, further raising $V_{X}$. Since the returned signal enhances the Iin effect, feedback is positive.\n\nExercise: Repeat if M2 is a PMOS (still CS stage). What if $R_{D} \\rightarrow \\infty$? Is this expected?\n\nDid You Know?\n\nWhile this book focuses on negative feedback, positive feedback also has applications. For instance, a new ice cream store with a unique recipe attracts customers. Adding an extra scoop for free draws more customers (positive feedback). Conversely, reducing the size due to greed loses customers (negative feedback)."
},
{
    "text": "Although the block diagram of a feedback system, such as Fig. 12.1, clearly indicates the polarity of feedback, this may not be as evident in an actual circuit implementation. The process to determine this polarity consists of three steps: (a) assume the input signal increases (or decreases); (b) trace the change through the forward amplifier and the feedback network; (c) ascertain whether the returned quantity counteracts or amplifies the initial \"effect\" caused by the input change. A more straightforward method involves: (a) setting the input to zero; (b) interrupting the loop; (c) introducing a test signal, $V_{\\text {test }}$, circulating it around the loop, examining the returned signal, $V_{\\text {ret }}$, and determining the polarity of $V_{\\text {ret }} / V_{\\text {test }}$.\n\nimage_name:Fig. 12.25(a)\ndescription:Key Components:\n1. **Amplifier (A₀):**\n- This block denotes an ideal amplifier with a gain of A₀, responsible for boosting the input signal.\n- The system includes two instances of this amplifier.\n\n2. **Feedback Network (K):**\n- This block has a gain of K and manages the feedback loop within the system.\n- It takes the amplifier's output and feeds a portion back into the system.\n\n3. **Input and Output Ports:**\n- **V_in:** The input voltage signal.\n- **V_out:** The output voltage from the amplifier.\n- **I_out:** The output current from the amplifier.\n\nInformation and Control Flow:\n- The input voltage **V_in** is directed to the amplifier A₀.\n- The amplifier produces the output voltage **V_out**.\n- **V_out** is then processed by the feedback network K and fed back into the system.\n- The feedback loop is completed by returning the processed signal to the amplifier's input, influencing signal processing.\n- The output current **I_out** indicates the system's capability to handle both voltage and current outputs.\n\nLabels, Annotations, and Key Indicators:\n- **A₀:** Denotes the amplifier's gain.\n- **K:** Represents the feedback network's gain.\n- Arrows indicate signal flow directions, from input to output and through the feedback loop.\n\nSystem Function Overview:\nThe system is designed to amplify input voltage signals while using a feedback loop to control and stabilize outputs. The feedback network ensures output changes are fed back to maintain desired amplification and stability levels. This setup is common in control systems where feedback enhances performance and reduces signal processing errors.\n\nimage_name:Fig. 12.25(b)\ndescription:The block diagram labeled \"(b)\" illustrates the output impedance of an ideal feedback network for generating voltage and current quantities. It includes several essential components:\n\n1. **Input Source (V_in):**\n- The input voltage source, represented as \\( V_{in} \\), is applied to the system.\n\n2. **Summing Junction:**\n- \\( V_{in} \\) is input to a summing junction, which combines it with the feedback signal \\( V_F \\). The junction outputs the difference between \\( V_{in} \\) and \\( V_F \\).\n\n3. **Forward Amplifier (A_0):**\n- The summing junction's output is amplified by the forward amplifier \\( A_0 \\).\n\n4. **Feedback Path:**\n- The forward amplifier's output connects to a feedback network, including a current source and a feedback amplifier (K).\n- The feedback amplifier \\( K \\) receives input from the forward amplifier and contributes to \\( V_F \\).\n\n5. **Current Source and Ground Connection:**\n- The feedback path includes a current source linked to ground, influencing the feedback current \\( I_F \\).\n\n6. **Output Impedance Control:**\n- The feedback network controls the output impedance, adjusting \\( I_{out} \\) based on the feedback loop.\n\n7. **Output:**\n- The system's output is the current \\( I_{out} \\), influenced by feedback and forward amplification.\n\nInformation Flow:\n- \\( V_{in} \\) is processed through the summing junction, combined with \\( V_F \\), and the result is amplified by \\( A_0 \\).\n- The amplified signal generates \\( I_F \\) through the feedback network, including a current source and \\( K \\).\n- The feedback loop controls \\( I_{out} \\), ensuring desired output impedance characteristics.\n\nSystem Function:\n- The system primarily controls output impedance via feedback mechanisms. The feedback network adjusts \\( I_{out} \\) based on \\( V_{in} \\) and \\( V_F \\), ensuring stable and precise outputs.\n\nFigure 12.25 (a) Input impedance of ideal feedback networks for sensing voltage and current quantities, (b) output impedance of ideal feedback networks for producing voltage and current quantities.\n\nExample: Determine the feedback polarity in the circuit of Fig. 12.26. <br> 12.12\n\nimage_name:Figure 12.26\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1s2, D:d1d3g3 , G: Vin}\nname: M2, type: NMOS, ports: {S: s1s2, D: Vout, G: X}\nname: M3, type: PMOS, ports: {S: VDD, D: d1d3g3, G: d1d3g3}\nname: M4, type: PMOS, ports: {S: VDD, D: Vout, G: d1d3g3}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: X}\nname: R2, type: Resistor, value: R2, ports: {N1: X, N2: GND}\nname: Iss, type: CurrentSource, value: Iss, ports: {Np: s1s2, Nn: GND}\n]\nextrainfo:The circuit is a differential amplifier with NMOS and PMOS transistors, using a current source for biasing and feedback resistors for stability.\n\nSolution: If $V_{\\text {in }}$ increases, $I_{D 1}$ tends to rise and $I_{D 2}$ tends to fall. Consequently, $V_{o u t}$ and $V_{X}$ also rise. The increase in $V_{X}$ tends to raise $I_{D 2}$ and lower $I_{D 1}$, counteracting the $V_{i n}$ change. Thus, the feedback is negative. Readers are encouraged to apply the second method.\n\nExercise: If the top terminal of $R_{1}$ is connected to M1's drain instead of M2's, determine the feedback polarity.\n\nimage_name:Figure 12.27\ndescription:\n[\nname: M1, type: NMOS, ports: {S: X, D: A, G: Vin}\nname: M2, type: NMOS, ports: {S: GND, D: Vout, G: A}\nname: RD1, type: Resistor, value: RD1, ports: {N1: VDD, N2: A}\nname: RD2, type: Resistor, value: RD2, ports: {N1: VDD, N2: Vout}\nname: RF1, type: Resistor, value: RF1, ports: {N1: Vout, N2: X}\nname: RF2, type: Resistor, value: RF2, ports: {N1: X, N2: GND}\n]\nextrainfo:The circuit is designed to determine feedback polarity, featuring two NMOS transistors (M1 and M2), where M1 is controlled by Vin, and M2 is part of the feedback loop. Resistors RD1 and RD2 connect to VDD, and RF1 and RF2 form a feedback network connected to Vout. The feedback is negative, as an increase in Vin decreases ID1 and increases ID2, opposing the Vin change.\n\nFigure 12.27\n\nSolution: If $V_{\\text {in }}$ rises, $I_{D 1}$ increases, causing $V_{A}$ to fall, $V_{o u t}$ to rise, and $V_{X}$ to increase. The rise in $V_{X}$ tends to reduce $I_{D 1}$, opposing the effect of $V_{i n}$. Hence, the feedback is negative.\n\nExercise: Repeat the example if M2 is converted to a CG stage, with its source tied to A and its gate to a bias voltage.\n\nimage_name:Fig. 12.28\ndescription:\n[\nname: RD1, type: Resistor, value: RD1, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: X}\nname: M2, type: NMOS, ports: {S: GND, D: X, G: Vout}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: GND, Nn:X}\n]\nextrainfo:The circuit includes two NMOS transistors (M1 and M2), a resistor RD1 connected to VDD, and a current source Iin. The feedback is positive, as an increase in Iin raises VX, increasing ID1 and decreasing Vout.\n\nFigure 12.28\n\nSolution: If $I_{\\text {in }}$ increases, $V_{X}$ rises, increasing $I_{D 1}$. This causes $V_{\\text {out }}$ to fall and $I_{D 2}$ to decrease, allowing $V_{X}$ to rise further. Since the returned signal enhances the effect of $I_{i n}$, the feedback polarity is positive.\n\nExercise: Repeat the example if M2 is a PMOS device (still operating as a CS stage). What happens if $R_{D} \\rightarrow \\infty$? Is this result expected?\n\nDid You Know?\n\nWhile this book focuses on negative feedback, positive feedback also has applications. For instance, if a new ice cream store introduces a unique recipe and attracts many customers, adding an extra scoop for free will attract even more customers (positive feedback). Conversely, if the owner reduces the ice cream size, the store loses customers (negative feedback)."
},
{
    "text": "While the block diagram of a feedback system, such as Fig. 12.1, clearly indicates the polarity of feedback, an actual circuit implementation might not. Determining this polarity involves a three-step process: (a) assume the input signal increases (or decreases); (b) trace the change through the forward amplifier and the feedback network; (c) assess whether the returned value counteracts or reinforces the initial effect caused by the input change. A simpler method is: (a) set the input to zero; (b) interrupt the loop; (c) introduce a test signal, $V_{\\text {test }}$, propagate it around the loop, inspect the returned signal, $V_{\\text {ret }}$, and determine the polarity of $V_{\\text {ret }} / V_{\\text {test }}$.\n\nimage_name:Fig. 12.25(a)\ndescription:\nMain Components:\n1. **Amplifier (A₀):**\n   - This block represents an ideal amplifier with gain A₀, responsible for amplifying the input signal.\n   - The system includes two instances of this amplifier.\n\n2. **Feedback Network (K):**\n   - This block has a gain of K and controls the feedback loop in the system.\n   - It takes the amplifier's output and feeds a portion back into the system.\n\n3. **Input and Output Ports:**\n   - **V_in:** The input voltage signal.\n   - **V_out:** The output voltage from the amplifier.\n   - **I_out:** The output current from the amplifier.\n\nFlow of Information or Control:\n   - The input voltage **V_in** is fed into amplifier A₀.\n   - The amplified output voltage **V_out** is produced.\n   - **V_out** is processed by the feedback network K and fed back into the system.\n   - The feedback loop closes by feeding the processed signal back to the amplifier input, influencing input signal processing.\n   - The output current **I_out** indicates the system can handle both voltage and current outputs.\n\nLabels, Annotations, and Key Indicators:\n   - **A₀:** Indicates the amplifier's gain.\n   - **K:** Represents the feedback network's gain.\n   - Arrows show signal flow direction from input to output and through the feedback loop.\n\nOverall System Function:\n   - The system amplifies an input voltage signal using a feedback loop to control and stabilize the output. The feedback network ensures output changes are fed back to maintain desired amplification and stability. This setup is typical in control systems using feedback to enhance performance and reduce signal processing errors.\n\nimage_name:Fig. 12.25(b)\ndescription:\nThe block diagram labeled \"(b)\" represents the output impedance of an ideal feedback network for producing voltage and current quantities. Key components include:\n\n1. **Input Source (V_in):**\n   - The input voltage source, \\( V_{in} \\), applied to the system.\n\n2. **Summing Junction:**\n   - Combines \\( V_{in} \\) with feedback signal \\( V_F \\), outputting their difference.\n\n3. **Forward Amplifier (A_0):**\n   - Amplifies the difference signal from the summing junction.\n\n4. **Feedback Path:**\n   - Connects the forward amplifier's output to a feedback network, including a current source and feedback amplifier (K).\n   - Feedback amplifier \\( K \\) contributes to feedback signal \\( V_F \\).\n\n5. **Current Source and Ground Connection:**\n   - The feedback path includes a current source connected to ground, influencing feedback current \\( I_F \\).\n\n6. **Output Impedance Control:**\n   - The feedback network controls output impedance by adjusting \\( I_{out} \\).\n\n7. **Output:**\n   - The system's output is current \\( I_{out} \\), influenced by feedback and forward amplification.\n\n**Flow of Information:**\n   - \\( V_{in} \\) is processed through the summing junction, combined with \\( V_F \\), and amplified by \\( A_0 \\).\n   - The amplified signal generates feedback current \\( I_F \\) through the feedback network.\n   - The feedback loop controls \\( I_{out} \\), maintaining desired output impedance characteristics.\n\n**Overall System Function:**\n   - The system controls output impedance through feedback mechanisms. The feedback network adjusts \\( I_{out} \\) based on \\( V_{in} \\) and \\( V_F \\), ensuring stable and precise output characteristics.\n\nFigure 12.25 (a) Input impedance of ideal feedback networks for sensing voltage and current quantities, (b) output impedance of ideal feedback networks for producing voltage and current quantities.\n\nExample: Determine the feedback polarity in the circuit of Fig. 12.26. <br> 12.12\n\nimage_name:Figure 12.26\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1s2, D:d1d3g3 , G: Vin}\nname: M2, type: NMOS, ports: {S: s1s2, D: Vout, G: X}\nname: M3, type: PMOS, ports: {S: VDD, D: d1d3g3, G: d1d3g3}\nname: M4, type: PMOS, ports: {S: VDD, D: Vout, G: d1d3g3}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: X}\nname: R2, type: Resistor, value: R2, ports: {N1: X, N2: GND}\nname: Iss, type: CurrentSource, value: Iss, ports: {Np: s1s2, Nn: GND}\n]\nextrainfo: This differential amplifier uses NMOS and PMOS transistors, a current source for biasing, and feedback resistors for stability.\n\nSolution: If $V_{\\text {in }}$ increases, $I_{D 1}$ tends to rise and $I_{D 2}$ tends to fall. Consequently, $V_{o u t}$ and $V_{X}$ rise. The increase in $V_{X}$ boosts $I_{D 2}$ and reduces $I_{D 1}$, counteracting the $V_{i n}$ change. Thus, the feedback is negative. Readers are encouraged to apply the second procedure.\n\nExercise: If the top of $R_{1}$ is connected to M1's drain instead of M2's, determine the feedback polarity.\n\nimage_name:Figure 12.27\ndescription:\n[\nname: M1, type: NMOS, ports: {S: X, D: A, G: Vin}\nname: M2, type: NMOS, ports: {S: GND, D: Vout, G: A}\nname: RD1, type: Resistor, value: RD1, ports: {N1: VDD, N2: A}\nname: RD2, type: Resistor, value: RD2, ports: {N1: VDD, N2: Vout}\nname: RF1, type: Resistor, value: RF1, ports: {N1: Vout, N2: X}\nname: RF2, type: Resistor, value: RF2, ports: {N1: X, N2: GND}\n]\nextrainfo: This circuit determines feedback polarity, featuring two NMOS transistors (M1 and M2), with M1 controlled by Vin and M2 in the feedback loop. Resistors RD1 and RD2 connect to VDD, and RF1 and RF2 form a feedback network. The feedback is negative, as an increase in Vin decreases ID1 and increases ID2, opposing the Vin change.\n\nFigure 12.27\n\nSolution: If $V_{\\text {in }}$ rises, $I_{D 1}$ increases, causing $V_{A}$ to fall and $V_{o u t}$ to rise, along with $V_{X}$. The rise in $V_{X}$ reduces $I_{D 1}$, opposing the $V_{i n}$ effect. Thus, the feedback is negative.\n\nExercise: Repeat the example if M2 is converted to a CG stage, with its source tied to A and its gate to a bias voltage.\n\nimage_name:Fig. 12.28\ndescription:\n[\nname: RD1, type: Resistor, value: RD1, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: X}\nname: M2, type: NMOS, ports: {S: GND, D: X, G: Vout}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: GND, Nn:X}\n]\nextrainfo: This circuit includes two NMOS transistors (M1 and M2), a resistor RD1 connected to VDD, and a current source Iin. The feedback is positive, as an increase in Iin raises VX, increasing ID1 and decreasing Vout.\n\nFigure 12.28\n\nSolution: If $I_{\\text {in }}$ increases, $V_{X}$ rises, increasing $I_{D 1}$. This causes $V_{\\text {out }}$ to fall and $I_{D 2}$ to decrease, allowing $V_{X}$ to rise further. Since the returned signal enhances the Iin effect, the feedback is positive.\n\nExercise: Repeat the example if M2 is a PMOS device (still as a CS stage). What if $R_{D} \\rightarrow \\infty$? Is this result expected?\n\nDid You Know?\n\nWhile this book focuses on negative feedback, positive feedback also has applications. For instance, a new ice cream store with a unique recipe attracts many customers. Adding an extra scoop for free draws even more customers (positive feedback). Conversely, if the owner reduces the ice cream size, the store loses customers (negative feedback)."
},
{
    "text": "While the block diagram of a feedback system, such as Fig. 12.1, easily shows the feedback polarity, this may not be evident in an actual circuit. Determining the polarity involves three steps: (a) assume the input signal increases (or decreases); (b) trace the change through the forward amplifier and feedback network; (c) assess whether the returned value opposes or enhances the initial effect caused by the input change. A simpler method is: (a) set the input to zero; (b) open the loop; (c) apply a test signal, $V_{\\text {test }}$, observe its path around the loop, examine the returned signal, $V_{\\text {ret }}$, and determine the polarity of $V_{\\text {ret }} / V_{\\text {test }}$.\n\nimage_name:Fig. 12.25(a)\ndescription:\nMain Components:\n1. **Amplifier (A₀):**\n   - This block denotes an ideal amplifier with a gain of A₀, responsible for amplifying the input signal.\n   - The system includes two instances of this amplifier.\n\n2. **Feedback Network (K):**\n   - This block has a gain of K and controls the feedback loop.\n   - It takes the amplifier's output and feeds a portion back into the system.\n\n3. **Input and Output Ports:**\n   - **V_in:** The input voltage signal.\n   - **V_out:** The output voltage from the amplifier.\n   - **I_out:** The output current from the amplifier.\n\nFlow of Information or Control:\n   - The input voltage **V_in** enters the amplifier A₀.\n   - The amplified output **V_out** is produced.\n   - **V_out** is then processed by the feedback network K and fed back into the system.\n   - The feedback loop closes by returning the processed signal to the amplifier input, influencing signal processing.\n   - The output current **I_out** indicates the system handles both voltage and current outputs.\n\nLabels, Annotations, and Key Indicators:\n   - **A₀:** Denotes the amplifier's gain.\n   - **K:** Represents the feedback network's gain.\n   - Arrows indicate signal flow directions from input to output and through the feedback loop.\n\nOverall System Function:\n   - The system amplifies the input voltage signal using a feedback loop to control and stabilize the output. The feedback network ensures output changes are fed back to maintain desired amplification and stability, typical in feedback-based control systems for enhanced performance and reduced signal processing errors.\n\nimage_name:Fig. 12.25(b)\ndescription:\nThe block diagram labeled \"(b)\" illustrates the output impedance of an ideal feedback network for voltage and current outputs. Key components include:\n\n1. **Input Source (V_in):**\n   - The input voltage source, \\( V_{in} \\), applied to the system.\n\n2. **Summing Junction:**\n   - Combines \\( V_{in} \\) with the feedback signal \\( V_F \\), outputting their difference.\n\n3. **Forward Amplifier (A_0):**\n   - Amplifies the difference signal from the summing junction.\n\n4. **Feedback Path:**\n   - Connects the forward amplifier's output to a feedback network, including a current source and feedback amplifier (K).\n   - The feedback amplifier \\( K \\) contributes to \\( V_F \\).\n\n5. **Current Source and Ground Connection:**\n   - A current source in the feedback path influences the feedback current \\( I_F \\).\n\n6. **Output Impedance Control:**\n   - The feedback network adjusts \\( I_{out} \\) based on the feedback loop.\n\n7. **Output:**\n   - The system's output is the current \\( I_{out} \\), influenced by feedback and forward amplification.\n\n**Flow of Information:**\n   - \\( V_{in} \\) is processed through the summing junction, combined with \\( V_F \\), and amplified by \\( A_0 \\).\n   - The amplified signal generates \\( I_F \\) through the feedback network, including a current source and \\( K \\).\n   - The feedback loop controls \\( I_{out} \\), ensuring stable output impedance.\n\n**Overall System Function:**\n   - The system controls output impedance via feedback mechanisms. The feedback network adjusts \\( I_{out} \\) based on \\( V_{in} \\) and \\( V_F \\), ensuring stable and precise output characteristics.\n\nFigure 12.25 (a) Input impedance of ideal feedback networks for sensing voltage and current quantities, (b) output impedance of ideal feedback networks for producing voltage and current quantities.\n\nExample: Determine the feedback polarity in the Fig. 12.26 circuit. <br> 12.12\n\nimage_name:Figure 12.26\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1s2, D:d1d3g3 , G: Vin}\nname: M2, type: NMOS, ports: {S: s1s2, D: Vout, G: X}\nname: M3, type: PMOS, ports: {S: VDD, D: d1d3g3, G: d1d3g3}\nname: M4, type: PMOS, ports: {S: VDD, D: Vout, G: d1d3g3}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: X}\nname: R2, type: Resistor, value: R2, ports: {N1: X, N2: GND}\nname: Iss, type: CurrentSource, value: Iss, ports: {Np: s1s2, Nn: GND}\n]\nextrainfo: This differential amplifier uses NMOS and PMOS transistors, a current source for biasing, and feedback resistors for stability.\n\nSolution: If $V_{\\text {in }}$ increases, $I_{D 1}$ increases and $I_{D 2}$ decreases, causing $V_{o u t}$ and $V_{X}$ to rise. The rise in $V_{X}$ increases $I_{D 2}$ and decreases $I_{D 1}$, counteracting the $V_{i n}$ change, indicating negative feedback. The reader is encouraged to apply the second procedure.\n\nExercise: If the top of $R_{1}$ is connected to M1's drain instead of M2's, determine the feedback polarity.\n\nimage_name:Figure 12.27\ndescription:\n[\nname: M1, type: NMOS, ports: {S: X, D: A, G: Vin}\nname: M2, type: NMOS, ports: {S: GND, D: Vout, G: A}\nname: RD1, type: Resistor, value: RD1, ports: {N1: VDD, N2: A}\nname: RD2, type: Resistor, value: RD2, ports: {N1: VDD, N2: Vout}\nname: RF1, type: Resistor, value: RF1, ports: {N1: Vout, N2: X}\nname: RF2, type: Resistor, value: RF2, ports: {N1: X, N2: GND}\n]\nextrainfo: This circuit determines feedback polarity, featuring two NMOS transistors (M1 and M2), with M1 controlled by Vin and M2 in the feedback loop. Resistors RD1 and RD2 connect to VDD, and RF1 and RF2 form a feedback network connected to Vout. The feedback is negative, as an increase in Vin decreases ID1 and increases ID2, opposing the Vin change.\n\nFigure 12.27\n\nSolution: If $V_{\\text {in }}$ rises, $I_{D 1}$ increases, causing $V_{A}$ to fall, $V_{o u t}$ to rise, and $V_{X}$ to rise. The rise in $V_{X}$ reduces $I_{D 1}$, opposing the effect of $V_{i n}$, indicating negative feedback.\n\nExercise: Repeat the example if M2 is converted to a CG stage, with its source tied to A and its gate to a bias voltage.\n\nimage_name:Fig. 12.28\ndescription:\n[\nname: RD1, type: Resistor, value: RD1, ports: {N1: VDD, N2: Vout}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: X}\nname: M2, type: NMOS, ports: {S: GND, D: X, G: Vout}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: GND, Nn:X}\n]\nextrainfo: This circuit includes two NMOS transistors (M1 and M2), a resistor RD1 connected to VDD, and a current source Iin. The feedback is positive, as an increase in Iin increases VX, further increasing ID1 and decreasing Vout.\n\nFigure 12.28\n\nSolution: If $I_{\\text {in }}$ increases, $V_{X}$ rises, increasing $I_{D 1}$, causing $V_{\\text {out }}$ to fall and $I_{D 2}$ to decrease, allowing $V_{X}$ to rise. Since the returned signal enhances the Iin effect, the feedback is positive.\n\nExercise: Repeat the example if M2 is a PMOS device (still as a CS stage). What if $R_{D} \\rightarrow \\infty$? Is this result expected?\n\nDid You Know?\n\nWhile this book focuses on negative feedback, positive feedback also has applications. For instance, a new ice cream store with a unique recipe attracts many customers. Adding an extra scoop for free draws even more customers (positive feedback). Conversely, if the owner reduces the ice cream size, the store loses customers (negative feedback)."
},
{
    "text": "As depicted in Fig. 12.29(a), this configuration includes a voltage amplifier that necessitates the feedback network to sense the output voltage and feed a voltage back to the subtractor. Referencing Section 12.4, such a feedback network is positioned in parallel with the output and in series with the input, ideally exhibiting infinite input impedance and zero output impedance.\n\n**Figure 12.29 Description:**\nThe circuit represents a voltage-voltage feedback topology with an ideal feedback network, comprising two operational amplifiers, A0 and K. A0 amplifies the voltage difference between nodes X3 and X2, while K provides feedback from the output node X3 to the input node X2. The input is at node X1, and the output is at node X3. The feedback network ideally has infinite input impedance and zero output impedance.\n\n**Figure 12.29 Voltage-voltage feedback.**\n\nTo begin, we calculate the closed-loop gain. Given:\n\n$$\n\\begin{align*}\nV_{1} & =V_{\\text {in }}-V_{F}  \\tag{12.50}\\\\\nV_{\\text {out }} & =A_{0} V_{1}  \\tag{12.51}\\\\\nV_{F} & =K V_{\\text {out }}, \\tag{12.52}\n\\end{align*}\n$$\n\nwe derive:\n\n$$\n\\begin{equation*}\nV_{\\text {out }}=A_{0}\\left(V_{\\text {in }}-K V_{\\text {out }}\\right) \\tag{12.53}\n\\end{equation*}\n$$\n\nand subsequently:\n\n$$\n\\begin{equation*}\n\\frac{V_{\\text {out }}}{V_{\\text {in }}}=\\frac{A_{0}}{1+K A_{0}} \\tag{12.54}\n\\end{equation*}\n$$\n\nThis is the expected result.\n\nNext, determine the closed-loop gain of the circuit in Fig. 12.30, assuming $R_{1}+R_{2}$ is very large.\n\n**Figure 12.30 Description:**\n[\nname: M1, type: NMOS, ports: {S: S1S2, D: d1d3g3, G: Vin}\nname: M2, type: NMOS, ports: {S: S1S2, D: Vout, G: VF}\nname: M3, type: PMOS, ports: {S: VDD, D: d1d3g3, G: d1d3g3}\nname: M4, type: PMOS, ports: {S: VDD, D: Vout, G: d1d3g3}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: VF}\nname: R2, type: Resistor, value: R2, ports: {N1: VF, N2: GND}\nname: I_SS, type: CurrentSource, value: I_SS, ports: {Np: S1S2, Nn: GND}\n]\nThe circuit uses a differential amplifier topology with NMOS and PMOS transistors, incorporating negative voltage-voltage feedback. The resistive network senses Vout, feeding back a voltage to the gate of M2. This configuration is known as series-shunt feedback.\n\n**Figure 12.30**\n\n${ }^{6}$ Due to this reason, this feedback type is also termed the \"series-shunt\" topology, where the first term refers to the input return mechanism and the second to the output sense mechanism.\n\n**Solution:**\nAs demonstrated in Examples 12.10 and 12.12, this topology indeed employs negative voltage-voltage feedback: the resistive network senses $V_{\\text {out }}$ with high impedance (since $R_{1}+R_{2}$ is very large), feeding back a voltage to the gate of $M_{2}$. As mentioned in Example $12.10, M_{1}$ and $M_{2}$ function as the input stage of the forward system and as a subtractor.\n\nNoting that $A_{0}$ represents the gain of the circuit comprising $M_{1}-M_{4}$, we express from Chapter 10:\n\n$$\n\\begin{equation*}\nA_{0}=g_{m N}\\left(r_{O N} \\| r_{O P}\\right) \\tag{12.55}\n\\end{equation*}\n$$\n\nwhere $N$ and $P$ subscripts denote NMOS and PMOS devices, respectively. ${ }^{7}$ With $K=R_{2} /\\left(R_{1}+R_{2}\\right)$, we obtain:\n\n$$\n\\begin{equation*}\n\\frac{V_{\\text {out }}}{V_{\\text {in }}}=\\frac{g_{m N}\\left(r_{O N} \\| r_{O P}\\right)}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m N}\\left(r_{O N} \\| r_{O P}\\right)} \\tag{12.56}\n\\end{equation*}\n$$\n\nAs anticipated, if the loop gain significantly exceeds unity, the closed-loop gain approximates $1 / K=1+R_{1} / R_{2}$.\n\n**Exercise:**\nIf $g_{m N}=1 /(100 \\Omega), r_{O N}=5 \\mathrm{k} \\Omega$, and $r_{O P}=2 \\mathrm{k} \\Omega$, determine the necessary value of $R_{2} /\\left(R_{1}+R_{2}\\right)$ for a closed-loop gain of 4. Compare this with the nominal value of $\\left(R_{2}+R_{1}\\right) / R_{2}=4$.\n\n**Figure 12.31 Description:**\nThe system block diagram titled \"Figure 12.31 Calculation of input impedance\" illustrates a feedback amplifier system with key components:\n\n1. **Main Components:**\n- **Voltage Source (V_in):** This input voltage source is grounded at one end, providing the input signal.\n- **Summing Junction (+):** Combines $V_{in}$ with the feedback voltage $V_F$, with $V_{in}$ at the positive terminal and $V_F$ at the negative terminal, resulting in $V'_{in}$.\n- **Feedforward System Block:**\n- **Amplifier (A_0):** An operational amplifier with finite input resistance $R_{in}$, amplifying $I_{in}$ to produce $Out(A_0)$.\n- **Input Resistance (R_{in}):** Connected to ground, representing the amplifier's finite input impedance.\n- **Feedback Network (K):** Takes a portion of the output and feeds it back as $V_F$.\n\n2. **Flow of Information:**\n- $V_{in}$ is applied to the summing junction, combined with $V_F$ to produce $V'_{in}$.\n- $V'_{in}$ converts to $I_{in}$ through $R_{in}$, flowing into $A_0$.\n- $A_0$ processes $I_{in}$, producing $Out(A_0)$.\n- A portion of $Out(A_0)$ is fed back through $K$ to the summing junction.\n\n3. **Labels and Annotations:**\n- Labels include $V_{in}$, $I_{in}$, $R_{in}$, $A_0$, $Out(A_0)$, and $V_F$.\n- Ground symbols indicate voltage reference points.\n\n4. **System Function:**\n- The system amplifies $V_{in}$ with feedback to control gain and input impedance, stabilizing the system.\n\n**Figure 12.31 Calculation of input impedance.**\n\nTo analyze feedback effects on I/O impedances, we assume the forward system is a nonideal voltage amplifier (with finite I/O impedances) while the feedback network remains ideal. Fig. 12.31 depicts this topology, including a finite input resistance for the forward amplifier. Without feedback, the entire input signal appears across $R_{i n}$, producing an input current of $V_{i n} / R_{i n}{ }^{8}$. With feedback, the voltage at $A_{0}$'s input equals $V_{i n}-V_{F}$ and also $I_{i n} R_{i n}$. Thus:\n\n$$\n\\begin{align*}\nI_{i n} R_{i n} & =V_{i n}-V_{F}  \\tag{12.57}\\\\\n& =V_{i n}-\\left(I_{i n} R_{i n}\\right) A_{0} K \\tag{12.58}\n\\end{align*}\n$$\n\n[^16] Consequently:\n\n$$\n\\begin{equation*}\n\\frac{V_{i n}}{I_{i n}}=R_{i n}\\left(1+K A_{0}\\right) \\tag{12.59}\n\\end{equation*}\n$$\n\nInterestingly, negative feedback around a voltage amplifier increases the input impedance by the universal factor of one plus the loop gain, bringing the circuit closer to an ideal voltage amplifier.\n\n**Example:**\nDetermine the input impedance of the stage in Fig. 12.32(a) if $R_{1}+R_{2}$ is very large.\n\n**Figure 12.32(a) Description:**\n[\nname: M1, type: NMOS, ports: {S:Vin, D: Vout, G: VF}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: VF}\nname: R2, type: Resistor, value: R2, ports: {N1: VF, N2: GND}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nThe circuit is a common-source NMOS amplifier with resistive feedback. Resistors R1 and R2 provide negative feedback to stabilize gain and increase input impedance. The output is at Vout.\n\n**Figure 12.32(b) Description:**\n[\nname: M1, type: NMOS, ports: {S: Vin, D: Vout, G: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: X}\nname: R2, type: Resistor, value: R2, ports: {N1: X, N2: GND}\n]\nThe circuit is a common-source NMOS amplifier with resistive feedback. Resistors R1 and R2 provide negative feedback to stabilize gain and increase input impedance. The output is at Vout.\n\n**Solution:**\nFirst, open the loop to calculate $R_{\\text {in }}$ in Eq. (12.59). To open the loop, break the gate of $M_{1}$ from the feedback signal and tie it to ground [Fig. 12.32(b)]:\n\n$$\n\\begin{equation*}\nR_{i n}=\\frac{1}{g_{m}} \\tag{12.60}\n\\end{equation*}\n$$\n\nThe closed-loop input impedance is then:\n\n$$\n\\begin{equation*}\n\\frac{V_{i n}}{I_{i n}}=\\frac{1}{g_{m}}\\left(1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}\\right) \\tag{12.61}\n\\end{equation*}\n$$\n\n**Exercise:**\nWhat occurs if $R_{2} \\rightarrow \\infty$? Is this result expected?\n\nThe impact of feedback on output impedance can be studied using Fig. 12.33, where the forward amplifier has an output impedance of $R_{\\text {out }}$. Expressing the input error signal of $A_{0}$ as $-V_{F}=-K V_{X}$, the output voltage of $A_{0}$ is $-K A_{0} V_{X}$, hence:\n\n$$\n\\begin{equation*}\nI_{X}=\\frac{V_{X}-\\left(-K A_{0} V_{X}\\right)}{R_{\\text {out }}} \\tag{12.62}\n\\end{equation*}\n$$\n\nNeglecting the current drawn by the feedback network, we get:\n\n$$\n\\begin{equation*}\n\\frac{V_{X}}{I_{X}}=\\frac{R_{\\text {out }}}{1+K A_{0}} \\tag{12.63}\n\\end{equation*}\n$$\n\n**Figure 12.33 Description:**\nThe circuit is a feedforward system with an operational amplifier A0, a resistor Rout, and a feedback element K. The voltage source Vx is connected to the output node Vx, which is also connected to the feedback element K.\n\n**Figure 12.33 Calculation of output impedance.**\nThis reveals that negative feedback reduces the output impedance if the topology senses the output voltage, making the circuit a better voltage amplifier, as predicted by gain desensitization analysis in Section 12.2.\n\n**Example:**\nCalculate the output impedance of the circuit in Fig. 12.34 if $R_{1}+R_{2}$ is very large.\n\n**Figure 12.34 Description:**\n[\nname: M1, type: NMOS, ports: {S: s1s2, D: d1d3g3, G: GND}\nname: M2, type: NMOS, ports: {S: s1s2, D: Vx, G: VF}\nname: M3, type: PMOS, ports: {S: VDD, D: d1d3g3, G: d1d3g3}\nname: M4, type: PMOS, ports: {S: VDD, D: Vx, G: d1d3g3}\nname: R1, type: Resistor, value: R1, ports: {N1: Vx, N2: VF}\nname: R2, type: Resistor, value: R2, ports: {N1: VF, N2: GND}\nname: Vx, type: VoltageSource, value: Vx, ports: {Np: Vx, Nn: GND}\nname: Iss, type: CurrentSource, value: Iss, ports: {Np: s1s2, Nn: GND}\n]\nThe circuit is a differential amplifier with a current source biasing. M1 and M2 form the differential pair, while M3 and M4 act as active loads. Resistors R1 and R2 provide feedback, and Vx is used for testing output impedance.\n\n**Figure 12.34**\n\n**Solution:**\nRecall from Example 12.15 that the open-loop output impedance is $r_{O N} \\| r_{O P}$ and $K A_{0}=\\left[R_{2} /\\left(R_{1}+R_{2}\\right)\\right] g_{m N}\\left(r_{O N} \\| r_{O P}\\right)$. Thus, the closed-loop output impedance, $R_{\\text {out,closed }}$, is:\n\n$$\n\\begin{equation*}\nR_{\\text {out }, \\text { closed }}=\\frac{r_{O N} \\| r_{O P}}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m N}\\left(r_{O N} \\| r_{O P}\\right)} \\tag{12.64}\n\\end{equation*}\n$$\n\nIf the loop gain is much greater than unity:\n\n$$\n\\begin{equation*}\nR_{\\text {out }, \\text { closed }} \\approx\\left(1+\\frac{R_{1}}{R_{2}}\\right) \\frac{1}{g_{m N}} \\tag{12.65}\n\\end{equation*}\n$$\n\nThis value is independent of $r_{O N}$ and $r_{O P}$. Thus, while the open-loop amplifier has a high output impedance, applying negative feedback lowers $R_{\\text {out }}$ to a multiple of $1 / g_{m N}$.\n\n**Exercise:**\nWhat happens if $R_{2} \\rightarrow \\infty$? Can you prove this result by direct analysis of the circuit?\n\nIn summary, voltage-voltage feedback decreases the gain and output impedance by $1+K A_{0}$ and increases the input impedance by the same factor."
},
{
    "text": "As depicted in Fig. 12.29(a), this configuration includes a voltage amplifier, necessitating the feedback network to detect the output voltage and feed a voltage back to the subtractor. Referencing Section 12.4, this feedback network is positioned in parallel with the output and in series with the input, ideally showcasing infinite input impedance and zero output impedance.\nimage_name:Figure 12.29\ndescription:The circuit features a voltage-voltage feedback topology with an ideal feedback network. It comprises two operational amplifiers, A0 and K, where A0 amplifies the voltage difference between nodes X3 and X2, and K provides feedback from the output node X3 to the input node X2. The input is at node X1, and the output is at node X3. The feedback network ideally possesses infinite input impedance and zero output impedance.\n\nFigure 12.29 Voltage-voltage feedback.\n\nInitially, we compute the closed-loop gain. Given\n\n$$\n\\begin{align*}\nV_{1} & =V_{\\text {in }}-V_{F}  \\tag{12.50}\\\\\nV_{\\text {out }} & =A_{0} V_{1}  \\tag{12.51}\\\\\nV_{F} & =K V_{\\text {out }}, \\tag{12.52}\n\\end{align*}\n$$\n\nwe derive\n\n$$\n\\begin{equation*}\nV_{\\text {out }}=A_{0}\\left(V_{\\text {in }}-K V_{\\text {out }}\\right) \\tag{12.53}\n\\end{equation*}\n$$\n\nand subsequently\n\n$$\n\\begin{equation*}\n\\frac{V_{\\text {out }}}{V_{\\text {in }}}=\\frac{A_{0}}{1+K A_{0}} \\tag{12.54}\n\\end{equation*}\n$$\n\nas anticipated.\n\nNext, determine the closed-loop gain of the circuit illustrated in Fig. 12.30, assuming $R_{1}+R_{2}$ is significantly large.\nimage_name:Figure 12.30\ndescription:\n[\nname: M1, type: NMOS, ports: {S: S1S2, D: d1d3g3, G: Vin}\nname: M2, type: NMOS, ports: {S: S1S2, D: Vout, G: VF}\nname: M3, type: PMOS, ports: {S: VDD, D: d1d3g3, G: d1d3g3}\nname: M4, type: PMOS, ports: {S: VDD, D: Vout, G: d1d3g3}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: VF}\nname: R2, type: Resistor, value: R2, ports: {N1: VF, N2: GND}\nname: I_SS, type: CurrentSource, value: I_SS, ports: {Np: S1S2, Nn: GND}\n]\nextrainfo:The circuit utilizes a differential amplifier topology with NMOS and PMOS transistors, incorporating negative voltage-voltage feedback. The resistive network senses Vout, feeding back a voltage to the gate of M2. This setup is known as series-shunt feedback.\n\nFigure 12.30\n${ }^{6}$ Consequently, this feedback type is also termed the \"series-shunt\" topology, where the first term denotes the return mechanism at the input and the second term the sensing mechanism at the output.\n| Solution As demonstrated in Examples 12.10 and 12.12, this topology indeed employs negative voltage-voltage feedback: the resistive network detects $V_{\\text {out }}$ with high impedance (due to $R_{1}+R_{2}$ being very large), feeding back a voltage to the gate of $M_{2}$. As mentioned in Example $12.10, M_{1}$ and $M_{2}$ function as the input stage of the forward system and as a subtractor.\n\nNoting that $A_{0}$ represents the gain of the circuit comprising $M_{1}-M_{4}$, we express from Chapter 10\n\n$$\n\\begin{equation*}\nA_{0}=g_{m N}\\left(r_{O N} \\| r_{O P}\\right) \\tag{12.55}\n\\end{equation*}\n$$\n\nwhere subscripts $N$ and $P$ correspond to NMOS and PMOS devices, respectively. ${ }^{7}$ With $K=R_{2} /\\left(R_{1}+R_{2}\\right)$, we obtain\n\n$$\n\\begin{equation*}\n\\frac{V_{\\text {out }}}{V_{\\text {in }}}=\\frac{g_{m N}\\left(r_{O N} \\| r_{O P}\\right)}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m N}\\left(r_{O N} \\| r_{O P}\\right)} \\tag{12.56}\n\\end{equation*}\n$$\n\nAs expected, if the loop gain remains substantially greater than unity, the closed-loop gain approximates $1 / K=1+R_{1} / R_{2}$.\n\nExercise If $g_{m N}=1 /(100 \\Omega), r_{O N}=5 \\mathrm{k} \\Omega$, and $r_{O P}=2 \\mathrm{k} \\Omega$, determine the necessary value of $R_{2} /\\left(R_{1}+R_{2}\\right)$ for a closed-loop gain of 4. Compare this result with the nominal value of $\\left(R_{2}+R_{1}\\right) / R_{2}=4$.\nimage_name:Figure 12.31 Calculation of input impedance\ndescription:The system block diagram titled \"Figure 12.31 Calculation of input impedance\" depicts a feedback amplifier system with several key components:\n\n1. **Main Components:**\n- **Voltage Source (V_in):** This input voltage source is grounded at one end, supplying the input signal to the system.\n- **Summing Junction (+):** This block combines the input voltage \\( V_{in} \\) with the feedback voltage \\( V_F \\). The input voltage \\( V_{in} \\) is applied to the positive terminal, and the feedback voltage \\( V_F \\) to the negative terminal, resulting in the effective input voltage \\( V'_{in} \\).\n- **Feedforward System Block:**\n- **Amplifier (A_0):** An operational amplifier with finite input resistance \\( R_{in} \\). It amplifies the input current \\( I_{in} \\) and produces an output \\( Out(A_0) \\).\n- **Input Resistance (R_{in}):** Connected to ground, it models the finite input impedance of the amplifier.\n- **Feedback Network (K):** This block takes a portion of the output and feeds it back to the summing junction as \\( V_F \\).\n\n2. **Flow of Information or Control:**\n- The input voltage \\( V_{in} \\) is applied to the summing junction, where it is combined with the feedback voltage \\( V_F \\) to produce \\( V'_{in} \\).\n- The resulting voltage \\( V'_{in} \\) is converted to a current \\( I_{in} \\) through the input resistance \\( R_{in} \\), flowing into the amplifier \\( A_{0} \\).\n- The amplifier \\( A_{0} \\) processes this current and generates an output \\( Out(A_0) \\).\n- A portion of this output is fed back through the feedback network \\( K \\) to the summing junction.\n\n3. **Labels, Annotations, and Key Indicators:**\n- The diagram includes labels such as \\( V_{in} \\), \\( I_{in} \\), \\( R_{in} \\), \\( A_0 \\), \\( Out(A_0) \\), and \\( V_F \\) to indicate various voltages, currents, and components within the system.\n- Ground symbols are present to indicate reference points for the voltages.\n\n4. **Overall System Function:**\n- The primary function of this system is to amplify the input signal \\( V_{in} \\) while incorporating feedback to control the overall gain and input impedance. The feedback network adjusts the effective input voltage \\( V'_{in} \\) by subtracting a portion of the output, thus stabilizing the system and maintaining desired gain and impedance characteristics.\n\nFigure 12.31 Calculation of input impedance.\nTo analyze the impact of feedback on the I/O impedances, we assume the forward system is a nonideal voltage amplifier (i.e., it exhibits finite I/O impedances) while the feedback network remains ideal. As shown in Fig. 12.31, the overall topology includes a finite input resistance for the forward amplifier. Without feedback, the entire input signal would appear across $R_{i n}$, producing an input current of $V_{i n} / R_{i n}{ }^{8}$. With feedback, however, the voltage at the input of $A_{0}$ equals $V_{i n}-V_{F}$ and also equals $I_{i n} R_{i n}$. Thus,\n\n$$\n\\begin{align*}\nI_{i n} R_{i n} & =V_{i n}-V_{F}  \\tag{12.57}\\\\\n& =V_{i n}-\\left(I_{i n} R_{i n}\\right) A_{0} K \\tag{12.58}\n\\end{align*}\n$$\n\n[^16]It follows that\n\n$$\n\\begin{equation*}\n\\frac{V_{i n}}{I_{i n}}=R_{i n}\\left(1+K A_{0}\\right) \\tag{12.59}\n\\end{equation*}\n$$\n\nInterestingly, negative feedback around a voltage amplifier increases the input impedance by the universal factor of one plus the loop gain. This impedance modification brings the circuit closer to an ideal voltage amplifier.\n\nExample Determine the input impedance of the stage shown in Fig. 12.32(a) if $R_{1}+R_{2}$ is very large.\nimage_name:Fig. 12.32(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S:Vin, D: Vout, G: VF}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: VF}\nname: R2, type: Resistor, value: R2, ports: {N1: VF, N2: GND}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with resistive feedback. The feedback network consists of resistors R1 and R2, providing negative feedback to stabilize the gain and increase input impedance. The output is taken at Vout.\n\nimage_name:Fig. 12.32(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vin, D: Vout, G: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: X}\nname: R2, type: Resistor, value: R2, ports: {N1: X, N2: GND}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with resistive feedback. The feedback network consists of resistors R1 and R2, providing negative feedback to stabilize the gain and increase input impedance. The output is taken at Vout.\n\nSolution To open the loop for calculating $R_{\\text {in }}$ in Eq. (12.59), we break the gate of $M_{1}$ from the feedback signal and tie it to ground [Fig. 12.32(b)]:\n\n$$\n\\begin{equation*}\nR_{i n}=\\frac{1}{g_{m}} \\tag{12.60}\n\\end{equation*}\n$$\n\nThe closed-loop input impedance is therefore given by\n\n$$\n\\begin{equation*}\n\\frac{V_{i n}}{I_{i n}}=\\frac{1}{g_{m}}\\left(1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}\\right) \\tag{12.61}\n\\end{equation*}\n$$\n\nExercise What occurs if $R_{2} \\rightarrow \\infty$? Is this result anticipated?\n\nThe effect of feedback on the output impedance can be examined using the diagram in Fig. 12.33, where the forward amplifier has an output impedance of $R_{\\text {out }}$. Expressing the error signal at the input of $A_{0}$ as $-V_{F}=-K V_{X}$, we write the output voltage of $A_{0}$ as $-K A_{0} V_{X}$ and hence\n\n$$\n\\begin{equation*}\nI_{X}=\\frac{V_{X}-\\left(-K A_{0} V_{X}\\right)}{R_{\\text {out }}} \\tag{12.62}\n\\end{equation*}\n$$\n\nwhere the current drawn by the feedback network is neglected. Thus,\n\n$$\n\\begin{equation*}\n\\frac{V_{X}}{I_{X}}=\\frac{R_{\\text {out }}}{1+K A_{0}} \\tag{12.63}\n\\end{equation*}\n$$\n\nimage_name:Figure 12.33\ndescription:The circuit is a feedforward system with an operational amplifier A0, a resistor Rout, and a feedback element K. The voltage source Vx is connected to the output node Vx, which is also connected to the feedback element K.\n\nFigure 12.33 Calculation of output impedance.\nThis reveals that negative feedback reduces the output impedance if the topology senses the output voltage. The circuit now functions as a more ideal voltage amplifier, as predicted by our gain desensitization analysis in Section 12.2.\n\nExample Calculate the output impedance of the circuit shown in Fig. 12.34 if $R_{1}+R_{2}$ is very large.\nimage_name:Figure 12.34\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1s2, D: d1d3g3, G: GND}\nname: M2, type: NMOS, ports: {S: s1s2, D: Vx, G: VF}\nname: M3, type: PMOS, ports: {S: VDD, D: d1d3g3, G: d1d3g3}\nname: M4, type: PMOS, ports: {S: VDD, D: Vx, G: d1d3g3}\nname: R1, type: Resistor, value: R1, ports: {N1: Vx, N2: VF}\nname: R2, type: Resistor, value: R2, ports: {N1: VF, N2: GND}\nname: Vx, type: VoltageSource, value: Vx, ports: {Np: Vx, Nn: GND}\nname: Iss, type: CurrentSource, value: Iss, ports: {Np: s1s2, Nn: GND}\n]\nextrainfo:The circuit is a differential amplifier with a current source biasing. M1 and M2 form the differential pair, while M3 and M4 act as active loads. The resistors R1 and R2 provide feedback, and the voltage source Vx is used for testing output impedance.\n\nFigure 12.34\n\nSolution Recall from Example 12.15 that the open-loop output impedance is equal to $r_{O N} \\| r_{O P}$ and $K A_{0}=\\left[R_{2} /\\left(R_{1}+R_{2}\\right)\\right] g_{m N}\\left(r_{O N} \\| r_{O P}\\right)$. Thus, the closed-loop output impedance, $R_{\\text {out,closed }}$, is given by\n\n$$\n\\begin{equation*}\nR_{\\text {out }, \\text { closed }}=\\frac{r_{O N} \\| r_{O P}}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m N}\\left(r_{O N} \\| r_{O P}\\right)} \\tag{12.64}\n\\end{equation*}\n$$\n\nIf the loop gain is much greater than unity,\n\n$$\n\\begin{equation*}\nR_{\\text {out }, \\text { closed }} \\approx\\left(1+\\frac{R_{1}}{R_{2}}\\right) \\frac{1}{g_{m N}} \\tag{12.65}\n\\end{equation*}\n$$\n\na value independent of $r_{O N}$ and $r_{O P}$. In other words, while the open-loop amplifier suffers from a high output impedance, the application of negative feedback lowers $R_{\\text {out }}$ to a multiple of $1 / g_{m N}$.\n\nExercise What happens if $R_{2} \\rightarrow \\infty$? Can you prove this result by direct analysis of the circuit?\n\nIn summary, voltage-voltage feedback decreases the gain and the output impedance by $1+K A_{0}$ and increases the input impedance by the same factor."
},
{
    "text": "Depicted in Fig. 12.29(a), this configuration includes a voltage amplifier, necessitating that the feedback network detects the output voltage and returns a voltage to the subtractor. As discussed in Section 12.4, such a feedback network is connected in parallel with the output and in series with the input, ${ }^{6}$ ideally exhibiting infinite input impedance and zero output impedance.\n\nimage_name:Figure 12.29\ndescription:This circuit represents a voltage-voltage feedback topology with an ideal feedback network. It comprises two operational amplifiers, A0 and K, where A0 amplifies the voltage difference between nodes X3 and X2, and K provides feedback from the output node X3 to the input node X2. The input is located at node X1, and the output is at node X3. The feedback network ideally has infinite input impedance and zero output impedance.\n\nFigure 12.29 Voltage-voltage feedback.\n\nWe begin by calculating the closed-loop gain. Given\n\n$$\n\\begin{align*}\nV_{1} & =V_{\\text {in }}-V_{F}  \\tag{12.50}\\\\\nV_{\\text {out }} & =A_{0} V_{1}  \\tag{12.51}\\\\\nV_{F} & =K V_{\\text {out }}, \\tag{12.52}\n\\end{align*}\n$$\n\nwe derive\n\n$$\n\\begin{equation*}\nV_{\\text {out }}=A_{0}\\left(V_{\\text {in }}-K V_{\\text {out }}\\right) \\tag{12.53}\n\\end{equation*}\n$$\n\nand subsequently\n\n$$\n\\begin{equation*}\n\\frac{V_{\\text {out }}}{V_{\\text {in }}}=\\frac{A_{0}}{1+K A_{0}} \\tag{12.54}\n\\end{equation*}\n$$\n\nas anticipated.\n\nNext, determine the closed-loop gain of the circuit shown in Fig. 12.30, assuming $R_{1}+R_{2}$ is very large.\n\nimage_name:Figure 12.30\ndescription:\n[\nname: M1, type: NMOS, ports: {S: S1S2, D: d1d3g3, G: Vin}\nname: M2, type: NMOS, ports: {S: S1S2, D: Vout, G: VF}\nname: M3, type: PMOS, ports: {S: VDD, D: d1d3g3, G: d1d3g3}\nname: M4, type: PMOS, ports: {S: VDD, D: Vout, G: d1d3g3}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: VF}\nname: R2, type: Resistor, value: R2, ports: {N1: VF, N2: GND}\nname: I_SS, type: CurrentSource, value: I_SS, ports: {Np: S1S2, Nn: GND}\n]\nextrainfo:This circuit uses a differential amplifier topology with NMOS and PMOS transistors, incorporating negative voltage-voltage feedback. The resistive network senses Vout, feeding back a voltage to the gate of M2. This setup is known as series-shunt feedback.\n\nFigure 12.30\n${ }^{6}$ For this reason, this feedback type is also termed the \"series-shunt\" topology, where the first term refers to the input return mechanism and the second term to the output sensing mechanism.\n\n| Solution As demonstrated in Examples 12.10 and 12.12, this topology indeed employs negative voltage-voltage feedback: the resistive network senses $V_{\\text {out }}$ with high impedance (due to $R_{1}+R_{2}$ being very large), returning a voltage to the gate of $M_{2}$. As noted in Example $12.10, M_{1}$ and $M_{2}$ function as the input stage of the forward system and as a subtractor.\n\nRecalling that $A_{0}$ represents the gain of the circuit consisting of $M_{1}-M_{4}$, we express from Chapter 10\n\n$$\n\\begin{equation*}\nA_{0}=g_{m N}\\left(r_{O N} \\| r_{O P}\\right) \\tag{12.55}\n\\end{equation*}\n$$\n\nwhere $N$ and $P$ subscripts denote NMOS and PMOS devices, respectively. ${ }^{7}$ With $K=R_{2} /\\left(R_{1}+R_{2}\\right)$, we obtain\n\n$$\n\\begin{equation*}\n\\frac{V_{\\text {out }}}{V_{\\text {in }}}=\\frac{g_{m N}\\left(r_{O N} \\| r_{O P}\\right)}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m N}\\left(r_{O N} \\| r_{O P}\\right)} \\tag{12.56}\n\\end{equation*}\n$$\n\nAs expected, if the loop gain remains significantly greater than unity, the closed-loop gain approximates $1 / K=1+R_{1} / R_{2}$.\n\nExercise If $g_{m N}=1 /(100 \\Omega), r_{O N}=5 \\mathrm{k} \\Omega$, and $r_{O P}=2 \\mathrm{k} \\Omega$, calculate the required value of $R_{2} /\\left(R_{1}+R_{2}\\right)$ for a closed-loop gain of 4. Compare this result with the nominal value of $\\left(R_{2}+R_{1}\\right) / R_{2}=4$.\n\nimage_name:Figure 12.31 Calculation of input impedance\ndescription:The system block diagram titled \"Figure 12.31 Calculation of input impedance\" illustrates a feedback amplifier system with several key components:\n\n1. **Main Components:**\n- **Voltage Source (V_in):** This input voltage source is grounded at one end, providing the input signal to the system.\n- **Summing Junction (+):** This block combines the input voltage \\( V_{in} \\) with the feedback voltage \\( V_F \\). The input voltage \\( V_{in} \\) is applied to the positive terminal, and the feedback voltage \\( V_F \\) is applied to the negative terminal, resulting in the effective input voltage \\( V'_{in} \\).\n- **Feedforward System Block:**\n- **Amplifier (A_0):** An operational amplifier with finite input resistance \\( R_{in} \\). It amplifies the input current \\( I_{in} \\) and produces an output \\( Out(A_0) \\).\n- **Input Resistance (R_{in}):** Connected to ground, it models the finite input impedance of the amplifier.\n- **Feedback Network (K):** This block takes a portion of the output and feeds it back to the summing junction as \\( V_F \\).\n\n2. **Flow of Information or Control:**\n- The input voltage \\( V_{in} \\) is applied to the summing junction, where it is combined with the feedback voltage \\( V_F \\) to produce \\( V'_{in} \\).\n- The resulting voltage \\( V'_{in} \\) is converted to a current \\( I_{in} \\) through the input resistance \\( R_{in} \\), and this current flows into the amplifier \\( A_{0} \\).\n- The amplifier \\( A_{0} \\) processes this current and produces an output \\( Out(A_0) \\).\n- A portion of this output is fed back through the feedback network \\( K \\) to the summing junction.\n\n3. **Labels, Annotations, and Key Indicators:**\n- The diagram includes labels such as \\( V_{in} \\), \\( I_{in} \\), \\( R_{in} \\), \\( A_0 \\), \\( Out(A_0) \\), and \\( V_F \\) to indicate the various voltages, currents, and components within the system.\n- Ground symbols are present to indicate reference points for the voltages.\n\n4. **Overall System Function:**\n- The primary function of this system is to amplify the input signal \\( V_{in} \\) while incorporating feedback to control the overall gain and input impedance. The feedback network adjusts the effective input voltage \\( V'_{in} \\) by subtracting a portion of the output, thus stabilizing the system and maintaining the desired gain and impedance characteristics.\n\nFigure 12.31 Calculation of input impedance.\nTo analyze the impact of feedback on the I/O impedances, we assume the forward system is a nonideal voltage amplifier (i.e., it has finite I/O impedances) while the feedback network remains ideal. As shown in Fig. 12.31, the overall topology includes a finite input resistance for the forward amplifier. Without feedback, the entire input signal would appear across $R_{i n}$, producing an input current of $V_{i n} / R_{i n}{ }^{8}$. With feedback, however, the voltage at the input of $A_{0}$ equals $V_{i n}-V_{F}$ and also equals $I_{i n} R_{i n}$. Thus,\n\n$$\n\\begin{align*}\nI_{i n} R_{i n} & =V_{i n}-V_{F}  \\tag{12.57}\\\\\n& =V_{i n}-\\left(I_{i n} R_{i n}\\right) A_{0} K \\tag{12.58}\n\\end{align*}\n$$\n\n[^16]It follows that\n\n$$\n\\begin{equation*}\n\\frac{V_{i n}}{I_{i n}}=R_{i n}\\left(1+K A_{0}\\right) \\tag{12.59}\n\\end{equation*}\n$$\n\nInterestingly, negative feedback around a voltage amplifier increases the input impedance by the universal factor of one plus the loop gain. This impedance modification brings the circuit closer to an ideal voltage amplifier.\n\nExample Determine the input impedance of the stage shown in Fig. 12.32(a) if $R_{1}+R_{2}$ is very large.\n\nimage_name:Fig. 12.32(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S:Vin, D: Vout, G: VF}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: VF}\nname: R2, type: Resistor, value: R2, ports: {N1: VF, N2: GND}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:This circuit is a common-source NMOS amplifier with resistive feedback. The feedback network consists of resistors R1 and R2, providing negative feedback to stabilize the gain and increase input impedance. The output is taken at Vout.\n\nimage_name:Fig. 12.32(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vin, D: Vout, G: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: X}\nname: R2, type: Resistor, value: R2, ports: {N1: X, N2: GND}\n]\nextrainfo:This circuit is a common-source NMOS amplifier with resistive feedback. The feedback network consists of resistors R1 and R2, providing negative feedback to stabilize the gain and increase input impedance. The output is taken at Vout.\n\nSolution To open the loop for calculating $R_{\\text {in }}$ in Eq. (12.59), we break the gate of $M_{1}$ from the feedback signal and tie it to ground [Fig. 12.32(b)]:\n\n$$\n\\begin{equation*}\nR_{i n}=\\frac{1}{g_{m}} \\tag{12.60}\n\\end{equation*}\n$$\n\nThe closed-loop input impedance is then given by\n\n$$\n\\begin{equation*}\n\\frac{V_{i n}}{I_{i n}}=\\frac{1}{g_{m}}\\left(1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}\\right) \\tag{12.61}\n\\end{equation*}\n$$\n\nExercise What occurs if $R_{2} \\rightarrow \\infty$? Is this result anticipated?\n\nThe effect of feedback on the output impedance can be studied using the diagram in Fig. 12.33, where the forward amplifier has an output impedance of $R_{\\text {out }}$. Expressing the error signal at the input of $A_{0}$ as $-V_{F}=-K V_{X}$, we write the output voltage of $A_{0}$ as $-K A_{0} V_{X}$ and hence\n\n$$\n\\begin{equation*}\nI_{X}=\\frac{V_{X}-\\left(-K A_{0} V_{X}\\right)}{R_{\\text {out }}} \\tag{12.62}\n\\end{equation*}\n$$\n\nwhere the current drawn by the feedback network is neglected. Thus,\n\n$$\n\\begin{equation*}\n\\frac{V_{X}}{I_{X}}=\\frac{R_{\\text {out }}}{1+K A_{0}} \\tag{12.63}\n\\end{equation*}\n$$\n\nimage_name:Figure 12.33\ndescription:The circuit is a feedforward system with an operational amplifier A0, a resistor Rout, and a feedback element K. The voltage source Vx is connected to the output node Vx, which is also connected to the feedback element K.\n\nFigure 12.33 Calculation of output impedance.\nThis reveals that negative feedback reduces the output impedance if the topology senses the output voltage. The circuit now functions as a more ideal voltage amplifier, as predicted by our gain desensitization analysis in Section 12.2.\n\nExample Calculate the output impedance of the circuit shown in Fig. 12.34 if $R_{1}+R_{2}$ is very large.\n\nimage_name:Figure 12.34\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1s2, D: d1d3g3, G: GND}\nname: M2, type: NMOS, ports: {S: s1s2, D: Vx, G: VF}\nname: M3, type: PMOS, ports: {S: VDD, D: d1d3g3, G: d1d3g3}\nname: M4, type: PMOS, ports: {S: VDD, D: Vx, G: d1d3g3}\nname: R1, type: Resistor, value: R1, ports: {N1: Vx, N2: VF}\nname: R2, type: Resistor, value: R2, ports: {N1: VF, N2: GND}\nname: Vx, type: VoltageSource, value: Vx, ports: {Np: Vx, Nn: GND}\nname: Iss, type: CurrentSource, value: Iss, ports: {Np: s1s2, Nn: GND}\n]\nextrainfo:The circuit is a differential amplifier with a current source biasing. M1 and M2 form the differential pair, while M3 and M4 act as active loads. The resistors R1 and R2 provide feedback, and the voltage source Vx is used for testing output impedance.\n\nFigure 12.34\n\nSolution Recall from Example 12.15 that the open-loop output impedance is equal to $r_{O N} \\| r_{O P}$ and $K A_{0}=\\left[R_{2} /\\left(R_{1}+R_{2}\\right)\\right] g_{m N}\\left(r_{O N} \\| r_{O P}\\right)$. Thus, the closed-loop output impedance, $R_{\\text {out,closed }}$, is given by\n\n$$\n\\begin{equation*}\nR_{\\text {out }, \\text { closed }}=\\frac{r_{O N} \\| r_{O P}}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m N}\\left(r_{O N} \\| r_{O P}\\right)} \\tag{12.64}\n\\end{equation*}\n$$\n\nIf the loop gain is much greater than unity,\n\n$$\n\\begin{equation*}\nR_{\\text {out }, \\text { closed }} \\approx\\left(1+\\frac{R_{1}}{R_{2}}\\right) \\frac{1}{g_{m N}} \\tag{12.65}\n\\end{equation*}\n$$\n\na value independent of $r_{O N}$ and $r_{O P}$. In other words, while the open-loop amplifier suffers from a high output impedance, the application of negative feedback lowers $R_{\\text {out }}$ to a multiple of $1 / g_{m N}$.\n\nExercise What happens if $R_{2} \\rightarrow \\infty$? Can you prove this result by direct analysis of the circuit?\n\nIn summary, voltage-voltage feedback decreases the gain and the output impedance by $1+K A_{0}$ and increases the input impedance by the same factor."
},
{
    "text": "As depicted in Fig. 12.29(a), this configuration includes a voltage amplifier that necessitates the feedback network to sense the output voltage and feed a voltage back to the subtractor. Referencing Section 12.4, this feedback network is in parallel with the output and in series with the input, ideally exhibiting infinite input impedance and zero output impedance.\nimage_name:Figure 12.29\ndescription:A voltage-voltage feedback topology with an ideal feedback network, featuring two operational amplifiers, A0 and K. A0 amplifies the voltage difference between nodes X3 and X2, while K provides feedback from the output node X3 to the input node X2. The input is at node X1, and the output is at node X3. The feedback network ideally has infinite input impedance and zero output impedance.\n\nFigure 12.29 Voltage-voltage feedback.\n\nWe begin by calculating the closed-loop gain. Given:\n\n$$\n\\begin{align*}\nV_{1} & =V_{\\text {in }}-V_{F}  \\tag{12.50}\\\\\nV_{\\text {out }} & =A_{0} V_{1}  \\tag{12.51}\\\\\nV_{F} & =K V_{\\text {out }}, \\tag{12.52}\n\\end{align*}\n$$\n\nwe derive:\n\n$$\n\\begin{equation*}\nV_{\\text {out }}=A_{0}\\left(V_{\\text {in }}-K V_{\\text {out }}\\right) \\tag{12.53}\n\\end{equation*}\n$$\n\nand subsequently:\n\n$$\n\\begin{equation*}\n\\frac{V_{\\text {out }}}{V_{\\text {in }}}=\\frac{A_{0}}{1+K A_{0}} \\tag{12.54}\n\\end{equation*}\n$$\n\nas anticipated.\n\nNext, determine the closed-loop gain of the circuit in Fig. 12.30, assuming $R_{1}+R_{2}$ is very large.\nimage_name:Figure 12.30\ndescription:\n[\nname: M1, type: NMOS, ports: {S: S1S2, D: d1d3g3, G: Vin}\nname: M2, type: NMOS, ports: {S: S1S2, D: Vout, G: VF}\nname: M3, type: PMOS, ports: {S: VDD, D: d1d3g3, G: d1d3g3}\nname: M4, type: PMOS, ports: {S: VDD, D: Vout, G: d1d3g3}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: VF}\nname: R2, type: Resistor, value: R2, ports: {N1: VF, N2: GND}\nname: I_SS, type: CurrentSource, value: I_SS, ports: {Np: S1S2, Nn: GND}\n]\nextrainfo:The circuit uses a differential amplifier topology with NMOS and PMOS transistors, incorporating negative voltage-voltage feedback. The resistive network senses Vout, feeding back a voltage to the gate of M2. This configuration is known as series-shunt feedback.\n\nFigure 12.30\n${ }^{6}$ Hence, this feedback type is also termed \"series-shunt\" topology, where the first term refers to the input return mechanism and the second to the output sensing mechanism.\n| Solution As demonstrated in Examples 12.10 and 12.12, this topology employs negative voltage-voltage feedback: the resistive network senses $V_{\\text {out }}$ with high impedance (due to $R_{1}+R_{2}$ being very large), feeding back a voltage to the gate of $M_{2}$. As noted in Example $12.10, M_{1}$ and $M_{2}$ function as the input stage of the forward system and as a subtractor.\n\nConsidering $A_{0}$ as the gain of the circuit comprising $M_{1}-M_{4}$, we express from Chapter 10:\n\n$$\n\\begin{equation*}\nA_{0}=g_{m N}\\left(r_{O N} \\| r_{O P}\\right) \\tag{12.55}\n\\end{equation*}\n$$\n\nwhere $N$ and $P$ denote NMOS and PMOS devices, respectively. ${ }^{7}$ With $K=R_{2} /\\left(R_{1}+R_{2}\\right)$, we obtain:\n\n$$\n\\begin{equation*}\n\\frac{V_{\\text {out }}}{V_{\\text {in }}}=\\frac{g_{m N}\\left(r_{O N} \\| r_{O P}\\right)}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m N}\\left(r_{O N} \\| r_{O P}\\right)} \\tag{12.56}\n\\end{equation*}\n$$\n\nAs expected, if the loop gain significantly exceeds unity, the closed-loop gain approximates $1 / K=1+R_{1} / R_{2}$.\n\nExercise If $g_{m N}=1 /(100 \\Omega), r_{O N}=5 \\mathrm{k} \\Omega$, and $r_{O P}=2 \\mathrm{k} \\Omega$, find the required $R_{2} /\\left(R_{1}+R_{2}\\right)$ for a closed-loop gain of 4. Compare this with the nominal value of $\\left(R_{2}+R_{1}\\right) / R_{2}=4$.\nimage_name:Figure 12.31 Calculation of input impedance\ndescription:The system block diagram titled \"Figure 12.31 Calculation of input impedance\" illustrates a feedback amplifier system with key components:\n\n1. **Main Components:**\n- **Voltage Source (V_in):** The input voltage source, grounded at one end, providing the input signal.\n- **Summing Junction (+):** Combines $V_{in}$ with the feedback voltage $V_F$, with $V_{in}$ at the positive terminal and $V_F$ at the negative terminal, resulting in $V'_{in}$.\n- **Feedforward System Block:**\n- **Amplifier (A_0):** An operational amplifier with finite input resistance $R_{in}$, amplifying $I_{in}$ to produce $Out(A_0)$.\n- **Input Resistance (R_{in}):** Connected to ground, representing the amplifier's finite input impedance.\n- **Feedback Network (K):** Takes a portion of the output and feeds it back as $V_F$ to the summing junction.\n\n2. **Flow of Information:**\n- $V_{in}$ is applied to the summing junction, combined with $V_F$ to form $V'_{in}$.\n- $V'_{in}$ converts to $I_{in}$ through $R_{in}$, flowing into $A_0$.\n- $A_0$ processes $I_{in}$, producing $Out(A_0)$.\n- A portion of $Out(A_0)$ is fed back through $K$ to the summing junction.\n\n3. **Labels and Annotations:**\n- Labels include $V_{in}$, $I_{in}$, $R_{in}$, $A_0$, $Out(A_0)$, and $V_F$.\n- Ground symbols indicate reference points for voltages.\n\n4. **System Function:**\n- The system amplifies $V_{in}$ with feedback to control gain and input impedance, stabilizing the system.\n\nFigure 12.31 Calculation of input impedance.\nTo analyze feedback effects on I/O impedances, we assume the forward system is a nonideal voltage amplifier (with finite I/O impedances) while the feedback network remains ideal. Fig. 12.31 shows the overall topology, including the finite input resistance of the forward amplifier. Without feedback, the entire input signal appears across $R_{i n}$, producing an input current of $V_{i n} / R_{i n}{ }^{8}$. With feedback, the voltage at $A_{0}$'s input equals $V_{i n}-V_{F}$ and also $I_{i n} R_{i n}$. Thus,\n\n$$\n\\begin{align*}\nI_{i n} R_{i n} & =V_{i n}-V_{F}  \\tag{12.57}\\\\\n& =V_{i n}-\\left(I_{i n} R_{i n}\\right) A_{0} K \\tag{12.58}\n\\end{align*}\n$$\n\n[^16]It follows that\n\n$$\n\\begin{equation*}\n\\frac{V_{i n}}{I_{i n}}=R_{i n}\\left(1+K A_{0}\\right) \\tag{12.59}\n\\end{equation*}\n$$\n\nInterestingly, negative feedback around a voltage amplifier increases the input impedance by the factor $1+K A_{0}$. This modification makes the circuit closer to an ideal voltage amplifier.\n\nExample Determine the input impedance of the stage in Fig. 12.32(a) if $R_{1}+R_{2}$ is very large.\nimage_name:Fig. 12.32(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S:Vin, D: Vout, G: VF}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: VF}\nname: R2, type: Resistor, value: R2, ports: {N1: VF, N2: GND}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with resistive feedback. Resistors R1 and R2 provide negative feedback to stabilize gain and increase input impedance. The output is at Vout.\n\nimage_name:Fig. 12.32(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vin, D: Vout, G: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: X}\nname: R2, type: Resistor, value: R2, ports: {N1: X, N2: GND}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with resistive feedback. Resistors R1 and R2 provide negative feedback to stabilize gain and increase input impedance. The output is at Vout.\n\nSolution To open the loop for calculating $R_{\\text {in }}$ in Eq. (12.59), we break the gate of $M_{1}$ from the feedback signal and tie it to ground [Fig. 12.32(b)]:\n\n$$\n\\begin{equation*}\nR_{i n}=\\frac{1}{g_{m}} \\tag{12.60}\n\\end{equation*}\n$$\n\nThe closed-loop input impedance is then:\n\n$$\n\\begin{equation*}\n\\frac{V_{i n}}{I_{i n}}=\\frac{1}{g_{m}}\\left(1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}\\right) \\tag{12.61}\n\\end{equation*}\n$$\n\nExercise What occurs if $R_{2} \\rightarrow \\infty$? Is this result anticipated?\n\nThe impact of feedback on output impedance is studied using Fig. 12.33, where the forward amplifier has an output impedance $R_{\\text {out }}$. Expressing the input error signal of $A_{0}$ as $-V_{F}=-K V_{X}$, the output voltage of $A_{0}$ is $-K A_{0} V_{X}$, hence\n\n$$\n\\begin{equation*}\nI_{X}=\\frac{V_{X}-\\left(-K A_{0} V_{X}\\right)}{R_{\\text {out }}} \\tag{12.62}\n\\end{equation*}\n$$\n\nneglecting the current drawn by the feedback network. Thus,\n\n$$\n\\begin{equation*}\n\\frac{V_{X}}{I_{X}}=\\frac{R_{\\text {out }}}{1+K A_{0}} \\tag{12.63}\n\\end{equation*}\n$$\n\nimage_name:Figure 12.33\ndescription:A feedforward system with an operational amplifier A0, resistor Rout, and feedback element K. The voltage source Vx is connected to the output node Vx, which is also connected to the feedback element K.\n\nFigure 12.33 Calculation of output impedance.\nThis reveals that negative feedback reduces the output impedance if the topology senses the output voltage, enhancing the circuit's voltage amplifier characteristics, as predicted by gain desensitization analysis in Section 12.2.\n\nExample Calculate the output impedance of the circuit in Fig. 12.34 if $R_{1}+R_{2}$ is very large.\nimage_name:Figure 12.34\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1s2, D: d1d3g3, G: GND}\nname: M2, type: NMOS, ports: {S: s1s2, D: Vx, G: VF}\nname: M3, type: PMOS, ports: {S: VDD, D: d1d3g3, G: d1d3g3}\nname: M4, type: PMOS, ports: {S: VDD, D: Vx, G: d1d3g3}\nname: R1, type: Resistor, value: R1, ports: {N1: Vx, N2: VF}\nname: R2, type: Resistor, value: R2, ports: {N1: VF, N2: GND}\nname: Vx, type: VoltageSource, value: Vx, ports: {Np: Vx, Nn: GND}\nname: Iss, type: CurrentSource, value: Iss, ports: {Np: s1s2, Nn: GND}\n]\nextrainfo:The circuit is a differential amplifier with a current source biasing. M1 and M2 form the differential pair, while M3 and M4 act as active loads. Resistors R1 and R2 provide feedback, and Vx is used for testing output impedance.\n\nFigure 12.34\n\nSolution From Example 12.15, the open-loop output impedance is $r_{O N} \\| r_{O P}$, and $K A_{0}=\\left[R_{2} /\\left(R_{1}+R_{2}\\right)\\right] g_{m N}\\left(r_{O N} \\| r_{O P}\\right)$. Thus, the closed-loop output impedance, $R_{\\text {out,closed }}$, is:\n\n$$\n\\begin{equation*}\nR_{\\text {out }, \\text { closed }}=\\frac{r_{O N} \\| r_{O P}}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m N}\\left(r_{O N} \\| r_{O P}\\right)} \\tag{12.64}\n\\end{equation*}\n$$\n\nIf the loop gain is much greater than unity,\n\n$$\n\\begin{equation*}\nR_{\\text {out }, \\text { closed }} \\approx\\left(1+\\frac{R_{1}}{R_{2}}\\right) \\frac{1}{g_{m N}} \\tag{12.65}\n\\end{equation*}\n$$\n\na value independent of $r_{O N}$ and $r_{O P}$. Thus, while the open-loop amplifier has a high output impedance, negative feedback reduces $R_{\\text {out }}$ to a multiple of $1 / g_{m N}$.\n\nExercise What happens if $R_{2} \\rightarrow \\infty$? Can you prove this result by direct analysis of the circuit?\n\nIn summary, voltage-voltage feedback decreases the gain and output impedance by $1+K A_{0}$ and increases the input impedance by the same factor."
},
{
    "text": "As depicted in Fig. 12.29(a), this configuration includes a voltage amplifier that necessitates the feedback network to detect the output voltage and feed a voltage back to the subtractor. Referencing Section 12.4, this feedback network is positioned in parallel with the output and in series with the input, ideally exhibiting infinite input impedance and zero output impedance.\n\n**Figure 12.29 Description:**\nThe circuit represents a voltage-voltage feedback topology with an ideal feedback network. It comprises two operational amplifiers, A0 and K, where A0 amplifies the voltage difference between nodes X3 and X2, and K provides feedback from the output node X3 to the input node X2. The input is at node X1, and the output is at node X3. The feedback network ideally has infinite input impedance and zero output impedance.\n\n**Figure 12.29 Voltage-voltage feedback.**\n\nWe begin by calculating the closed-loop gain. Given:\n\n$$\n\\begin{align*}\nV_{1} & =V_{\\text {in }}-V_{F}  \\tag{12.50}\\\\\nV_{\\text {out }} & =A_{0} V_{1}  \\tag{12.51}\\\\\nV_{F} & =K V_{\\text {out }}, \\tag{12.52}\n\\end{align*}\n$$\n\nwe derive:\n\n$$\n\\begin{equation*}\nV_{\\text {out }}=A_{0}\\left(V_{\\text {in }}-K V_{\\text {out }}\\right) \\tag{12.53}\n\\end{equation*}\n$$\n\nand subsequently:\n\n$$\n\\begin{equation*}\n\\frac{V_{\\text {out }}}{V_{\\text {in }}}=\\frac{A_{0}}{1+K A_{0}} \\tag{12.54}\n\\end{equation*}\n$$\n\nas anticipated.\n\nNext, determine the closed-loop gain of the circuit in Fig. 12.30, assuming $R_{1}+R_{2}$ is significantly large.\n\n**Figure 12.30 Description:**\n[\nname: M1, type: NMOS, ports: {S: S1S2, D: d1d3g3, G: Vin}\nname: M2, type: NMOS, ports: {S: S1S2, D: Vout, G: VF}\nname: M3, type: PMOS, ports: {S: VDD, D: d1d3g3, G: d1d3g3}\nname: M4, type: PMOS, ports: {S: VDD, D: Vout, G: d1d3g3}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: VF}\nname: R2, type: Resistor, value: R2, ports: {N1: VF, N2: GND}\nname: I_SS, type: CurrentSource, value: I_SS, ports: {Np: S1S2, Nn: GND}\n]\nextrainfo: The circuit uses a differential amplifier topology with NMOS and PMOS transistors, incorporating negative voltage-voltage feedback. The resistive network senses Vout, feeding back a voltage to the gate of M2. This setup is known as series-shunt feedback.\n\n**Figure 12.30**\n\n${ }^{6}$ Due to this, this feedback type is also termed the \"series-shunt\" topology, where the first term denotes the input return mechanism and the second term the output sensing mechanism.\n\n**Solution:**\nAs demonstrated in Examples 12.10 and 12.12, this topology indeed employs negative voltage-voltage feedback: the resistive network detects $V_{\\text {out }}$ with high impedance (due to $R_{1}+R_{2}$ being very large), feeding back a voltage to the gate of $M_{2}$. As stated in Example $12.10, M_{1}$ and $M_{2}$ function as the input stage of the forward system and as a subtractor.\n\nNoting that $A_{0}$ represents the gain of the circuit comprising $M_{1}-M_{4}$, we express from Chapter 10:\n\n$$\n\\begin{equation*}\nA_{0}=g_{m N}\\left(r_{O N} \\| r_{O P}\\right) \\tag{12.55}\n\\end{equation*}\n$$\n\nwhere $N$ and $P$ subscripts refer to NMOS and PMOS devices, respectively. ${ }^{7}$ With $K=R_{2} /\\left(R_{1}+R_{2}\\right)$, we obtain:\n\n$$\n\\begin{equation*}\n\\frac{V_{\\text {out }}}{V_{\\text {in }}}=\\frac{g_{m N}\\left(r_{O N} \\| r_{O P}\\right)}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m N}\\left(r_{O N} \\| r_{O P}\\right)} \\tag{12.56}\n\\end{equation*}\n$$\n\nAs expected, if the loop gain remains much greater than unity, the closed-loop gain approximates $1 / K=1+R_{1} / R_{2}$.\n\n**Exercise:**\nIf $g_{m N}=1 /(100 \\Omega), r_{O N}=5 \\mathrm{k} \\Omega$, and $r_{O P}=2 \\mathrm{k} \\Omega$, determine the necessary value of $R_{2} /\\left(R_{1}+R_{2}\\right)$ for a closed-loop gain of 4. Compare this result with the nominal value of $\\left(R_{2}+R_{1}\\right) / R_{2}=4$.\n\n**Figure 12.31 Calculation of input impedance Description:**\nThe system block diagram titled \"Figure 12.31 Calculation of input impedance\" illustrates a feedback amplifier system with several key components:\n\n1. **Main Components:**\n- **Voltage Source (V_in):** This input voltage source is grounded at one end, providing the input signal to the system.\n- **Summing Junction (+):** This block combines the input voltage \\( V_{in} \\) with the feedback voltage \\( V_F \\). The input voltage \\( V_{in} \\) is applied to the positive terminal, and the feedback voltage \\( V_F \\) to the negative terminal, resulting in the effective input voltage \\( V'_{in} \\).\n- **Feedforward System Block:**\n- **Amplifier (A_0):** An operational amplifier with finite input resistance \\( R_{in} \\). It amplifies the input current \\( I_{in} \\) and produces an output \\( Out(A_0) \\).\n- **Input Resistance (R_{in}):** Connected to ground, it models the finite input impedance of the amplifier.\n- **Feedback Network (K):** This block takes a portion of the output and feeds it back to the summing junction as \\( V_F \\).\n\n2. **Flow of Information or Control:**\n- The input voltage \\( V_{in} \\) is applied to the summing junction, combined with the feedback voltage \\( V_F \\) to produce \\( V'_{in} \\).\n- The resulting voltage \\( V'_{in} \\) is converted to a current \\( I_{in} \\) through the input resistance \\( R_{in} \\), flowing into the amplifier \\( A_0 \\).\n- The amplifier \\( A_0 \\) processes this current and produces an output \\( Out(A_0) \\).\n- A portion of this output is fed back through the feedback network \\( K \\) to the summing junction.\n\n3. **Labels, Annotations, and Key Indicators:**\n- Labels include \\( V_{in} \\), \\( I_{in} \\), \\( R_{in} \\), \\( A_0 \\), \\( Out(A_0) \\), and \\( V_F \\) to indicate various voltages, currents, and components.\n- Ground symbols indicate reference points for the voltages.\n\n4. **Overall System Function:**\n- The primary function is to amplify the input signal \\( V_{in} \\) while incorporating feedback to control overall gain and input impedance. The feedback network adjusts the effective input voltage \\( V'_{in} \\) by subtracting a portion of the output, stabilizing the system and maintaining desired gain and impedance characteristics.\n\n**Figure 12.31 Calculation of input impedance.**\n\nTo analyze feedback effects on I/O impedances, we assume the forward system is a nonideal voltage amplifier (with finite I/O impedances) while the feedback network remains ideal. As shown in Fig. 12.31, the topology includes a finite input resistance for the forward amplifier. Without feedback, the entire input signal would appear across $R_{i n}$, producing an input current of $V_{i n} / R_{i n}{ }^{8}$. With feedback, however, the voltage at the input of $A_{0}$ equals $V_{i n}-V_{F}$ and also equals $I_{i n} R_{i n}$. Thus:\n\n$$\n\\begin{align*}\nI_{i n} R_{i n} & =V_{i n}-V_{F}  \\tag{12.57}\\\\\n& =V_{i n}-\\left(I_{i n} R_{i n}\\right) A_{0} K \\tag{12.58}\n\\end{align*}\n$$\n\n[^16]It follows that:\n\n$$\n\\begin{equation*}\n\\frac{V_{i n}}{I_{i n}}=R_{i n}\\left(1+K A_{0}\\right) \\tag{12.59}\n\\end{equation*}\n$$\n\nInterestingly, negative feedback around a voltage amplifier increases the input impedance by the universal factor of one plus the loop gain. This impedance modification brings the circuit closer to an ideal voltage amplifier.\n\n**Example:**\nDetermine the input impedance of the stage in Fig. 12.32(a) if $R_{1}+R_{2}$ is very large.\n\n**Figure 12.32(a) Description:**\n[\nname: M1, type: NMOS, ports: {S:Vin, D: Vout, G: VF}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: VF}\nname: R2, type: Resistor, value: R2, ports: {N1: VF, N2: GND}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo: The circuit is a common-source NMOS amplifier with resistive feedback. The feedback network consists of resistors R1 and R2, providing negative feedback to stabilize the gain and increase input impedance. The output is taken at Vout.\n\n**Figure 12.32(b) Description:**\n[\nname: M1, type: NMOS, ports: {S: Vin, D: Vout, G: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: X}\nname: R2, type: Resistor, value: R2, ports: {N1: X, N2: GND}\n]\nextrainfo: The circuit is a common-source NMOS amplifier with resistive feedback. The feedback network consists of resistors R1 and R2, providing negative feedback to stabilize the gain and increase input impedance. The output is taken at Vout.\n\n**Solution:**\nWe first open the loop to calculate $R_{\\text {in }}$ in Eq. (12.59). To open the loop, we break the gate of $M_{1}$ from the feedback signal and tie it to ground [Fig. 12.32(b)]:\n\n$$\n\\begin{equation*}\nR_{i n}=\\frac{1}{g_{m}} \\tag{12.60}\n\\end{equation*}\n$$\n\nThe closed-loop input impedance is thus:\n\n$$\n\\begin{equation*}\n\\frac{V_{i n}}{I_{i n}}=\\frac{1}{g_{m}}\\left(1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}\\right) \\tag{12.61}\n\\end{equation*}\n$$\n\n**Exercise:**\nWhat occurs if $R_{2} \\rightarrow \\infty$? Is this result anticipated?\n\nThe impact of feedback on output impedance can be studied using the diagram in Fig. 12.33, where the forward amplifier has an output impedance of $R_{\\text {out }}$. Expressing the error signal at the input of $A_{0}$ as $-V_{F}=-K V_{X}$, we write the output voltage of $A_{0}$ as $-K A_{0} V_{X}$, hence:\n\n$$\n\\begin{equation*}\nI_{X}=\\frac{V_{X}-\\left(-K A_{0} V_{X}\\right)}{R_{\\text {out }}} \\tag{12.62}\n\\end{equation*}\n$$\n\nwhere the current drawn by the feedback network is neglected. Thus:\n\n$$\n\\begin{equation*}\n\\frac{V_{X}}{I_{X}}=\\frac{R_{\\text {out }}}{1+K A_{0}} \\tag{12.63}\n\\end{equation*}\n$$\n\n**Figure 12.33 Description:**\nThe circuit is a feedforward system with an operational amplifier A0, a resistor Rout, and a feedback element K. The voltage source Vx is connected to the output node Vx, which is also connected to the feedback element K.\n\n**Figure 12.33 Calculation of output impedance.**\n\nThis reveals that negative feedback reduces the output impedance if the topology senses the output voltage. The circuit now functions as a better voltage amplifier, as predicted by our gain desensitization analysis in Section 12.2.\n\n**Example:**\nCalculate the output impedance of the circuit in Fig. 12.34 if $R_{1}+R_{2}$ is very large.\n\n**Figure 12.34 Description:**\n[\nname: M1, type: NMOS, ports: {S: s1s2, D: d1d3g3, G: GND}\nname: M2, type: NMOS, ports: {S: s1s2, D: Vx, G: VF}\nname: M3, type: PMOS, ports: {S: VDD, D: d1d3g3, G: d1d3g3}\nname: M4, type: PMOS, ports: {S: VDD, D: Vx, G: d1d3g3}\nname: R1, type: Resistor, value: R1, ports: {N1: Vx, N2: VF}\nname: R2, type: Resistor, value: R2, ports: {N1: VF, N2: GND}\nname: Vx, type: VoltageSource, value: Vx, ports: {Np: Vx, Nn: GND}\nname: Iss, type: CurrentSource, value: Iss, ports: {Np: s1s2, Nn: GND}\n]\nextrainfo: The circuit is a differential amplifier with a current source biasing. M1 and M2 form the differential pair, while M3 and M4 act as active loads. The resistors R1 and R2 provide feedback, and the voltage source Vx is used for testing output impedance.\n\n**Figure 12.34**\n\n**Solution:**\nRecall from Example 12.15 that the open-loop output impedance equals $r_{O N} \\| r_{O P}$ and $K A_{0}=\\left[R_{2} /\\left(R_{1}+R_{2}\\right)\\right] g_{m N}\\left(r_{O N} \\| r_{O P}\\right)$. Thus, the closed-loop output impedance, $R_{\\text {out,closed }}$, is:\n\n$$\n\\begin{equation*}\nR_{\\text {out }, \\text { closed }}=\\frac{r_{O N} \\| r_{O P}}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m N}\\left(r_{O N} \\| r_{O P}\\right)} \\tag{12.64}\n\\end{equation*}\n$$\n\nIf the loop gain is much greater than unity:\n\n$$\n\\begin{equation*}\nR_{\\text {out }, \\text { closed }} \\approx\\left(1+\\frac{R_{1}}{R_{2}}\\right) \\frac{1}{g_{m N}} \\tag{12.65}\n\\end{equation*}\n$$\n\na value independent of $r_{O N}$ and $r_{O P}$. In other words, while the open-loop amplifier suffers from high output impedance, applying negative feedback lowers $R_{\\text {out }}$ to a multiple of $1 / g_{m N}$.\n\n**Exercise:**\nWhat happens if $R_{2} \\rightarrow \\infty$? Can you prove this result by direct analysis of the circuit?\n\nIn summary, voltage-voltage feedback decreases the gain and output impedance by $1+K A_{0}$ and increases the input impedance by the same factor."
},
{
    "text": "As depicted in Fig. 12.29(a), this configuration includes a voltage amplifier, necessitating the feedback network to sense the output voltage and return a voltage to the subtractor. Referencing Section 12.4, this feedback network is connected in parallel with the output and in series with the input, ${ }^{6}$ ideally exhibiting infinite input impedance and zero output impedance.\n\n**Figure Description:**\n*Figure 12.29* illustrates a voltage-voltage feedback topology with an ideal feedback network. It comprises two operational amplifiers, A0 and K, where A0 amplifies the voltage difference between nodes X3 and X2, and K provides feedback from the output node X3 to the input node X2. The input is at node X1, and the output is at node X3. The feedback network ideally has infinite input impedance and zero output impedance.\n\n**Figure 12.29 Voltage-voltage feedback.**\n\nWe begin by calculating the closed-loop gain. Given:\n\n$$\n\\begin{align*}\nV_{1} & =V_{\\text {in }}-V_{F}  \\tag{12.50}\\\\\nV_{\\text {out }} & =A_{0} V_{1}  \\tag{12.51}\\\\\nV_{F} & =K V_{\\text {out }}, \\tag{12.52}\n\\end{align*}\n$$\n\nwe derive:\n\n$$\n\\begin{equation*}\nV_{\\text {out }}=A_{0}\\left(V_{\\text {in }}-K V_{\\text {out }}\\right) \\tag{12.53}\n\\end{equation*}\n$$\n\nand consequently:\n\n$$\n\\begin{equation*}\n\\frac{V_{\\text {out }}}{V_{\\text {in }}}=\\frac{A_{0}}{1+K A_{0}} \\tag{12.54}\n\\end{equation*}\n$$\n\nThis is the expected result.\n\nNext, determine the closed-loop gain of the circuit shown in Fig. 12.30, assuming $R_{1}+R_{2}$ is very large.\n\n**Figure Description:**\n*Figure 12.30* depicts a circuit with the following components:\n- **M1:** NMOS, ports: {S: S1S2, D: d1d3g3, G: Vin}\n- **M2:** NMOS, ports: {S: S1S2, D: Vout, G: VF}\n- **M3:** PMOS, ports: {S: VDD, D: d1d3g3, G: d1d3g3}\n- **M4:** PMOS, ports: {S: VDD, D: Vout, G: d1d3g3}\n- **R1:** Resistor, value: R1, ports: {N1: Vout, N2: VF}\n- **R2:** Resistor, value: R2, ports: {N1: VF, N2: GND}\n- **I_SS:** CurrentSource, value: I_SS, ports: {Np: S1S2, Nn: GND}\n\nThe circuit uses a differential amplifier topology with NMOS and PMOS transistors and includes negative voltage-voltage feedback. The resistive network senses Vout, feeding back a voltage to the gate of M2. This configuration is known as series-shunt feedback.\n\n**Figure 12.30**\n\n${ }^{6}$ For this reason, this type of feedback is also termed the \"series-shunt\" topology, where the first term refers to the input return mechanism and the second to the output sensing mechanism.\n\n**Solution:**\nAs demonstrated in Examples 12.10 and 12.12, this topology employs negative voltage-voltage feedback: the resistive network senses $V_{\\text {out }}$ with high impedance (due to $R_{1}+R_{2}$ being very large), returning a voltage to the gate of $M_{2}$. As mentioned in Example $12.10, M_{1}$ and $M_{2}$ function as the input stage of the forward system and as a subtractor.\n\nNoting that $A_{0}$ is the gain of the circuit comprising $M_{1}-M_{4}$, we write from Chapter 10:\n\n$$\n\\begin{equation*}\nA_{0}=g_{m N}\\left(r_{O N} \\| r_{O P}\\right) \\tag{12.55}\n\\end{equation*}\n$$\n\nwhere $N$ and $P$ denote NMOS and PMOS devices, respectively. ${ }^{7}$ With $K=R_{2} /\\left(R_{1}+R_{2}\\right)$, we obtain:\n\n$$\n\\begin{equation*}\n\\frac{V_{\\text {out }}}{V_{\\text {in }}}=\\frac{g_{m N}\\left(r_{O N} \\| r_{O P}\\right)}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m N}\\left(r_{O N} \\| r_{O P}\\right)} \\tag{12.56}\n\\end{equation*}\n$$\n\nAs expected, if the loop gain significantly exceeds unity, the closed-loop gain approximates $1 / K=1+R_{1} / R_{2}$.\n\n**Exercise:**\nIf $g_{m N}=1 /(100 \\Omega), r_{O N}=5 \\mathrm{k} \\Omega$, and $r_{O P}=2 \\mathrm{k} \\Omega$, determine the required value of $R_{2} /\\left(R_{1}+R_{2}\\right)$ for a closed-loop gain of 4. Compare this result with the nominal value of $\\left(R_{2}+R_{1}\\right) / R_{2}=4$.\n\n**Figure Description:**\n*Figure 12.31 Calculation of input impedance* illustrates a feedback amplifier system with key components:\n\n1. **Main Components:**\n- **Voltage Source (V_in):** The input voltage source, grounded at one end, providing the input signal.\n- **Summing Junction (+):** Combines $V_{in}$ with $V_F$, with $V_{in}$ at the positive terminal and $V_F$ at the negative terminal, resulting in $V'_{in}$.\n- **Feedforward System Block:**\n  - **Amplifier (A_0):** An operational amplifier with finite input resistance $R_{in}$.\n  - **Input Resistance (R_{in}):** Connected to ground, representing the amplifier's input impedance.\n  - **Feedback Network (K):** Takes a portion of the output and feeds it back to the summing junction as $V_F$.\n\n2. **Flow of Information:**\n- $V_{in}$ is applied to the summing junction, combined with $V_F$ to produce $V'_{in}$.\n- $V'_{in}$ is converted to $I_{in}$ through $R_{in}$, flowing into $A_0$.\n- $A_0$ processes $I_{in}$ and produces $Out(A_0)$.\n- A portion of $Out(A_0)$ is fed back through $K$ to the summing junction.\n\n3. **Labels and Annotations:**\n- Includes labels such as $V_{in}$, $I_{in}$, $R_{in}$, $A_0$, $Out(A_0)$, and $V_F$.\n- Ground symbols indicate reference points for voltages.\n\n4. **System Function:**\n- The system amplifies $V_{in}$ with feedback to control gain and input impedance, stabilizing the system.\n\n**Figure 12.31 Calculation of input impedance.**\n\nTo analyze feedback effects on I/O impedances, we assume the forward system is a nonideal voltage amplifier (with finite I/O impedances) while the feedback network remains ideal. As shown in Fig. 12.31, the topology includes a finite input resistance for the forward amplifier. Without feedback, the entire input signal appears across $R_{i n}$, producing an input current of $V_{i n} / R_{i n}{ }^{8}$. With feedback, the voltage at $A_{0}$'s input equals $V_{i n}-V_{F}$ and also $I_{i n} R_{i n}$. Thus:\n\n$$\n\\begin{align*}\nI_{i n} R_{i n} & =V_{i n}-V_{F}  \\tag{12.57}\\\\\n& =V_{i n}-\\left(I_{i n} R_{i n}\\right) A_{0} K \\tag{12.58}\n\\end{align*}\n$$\n\n[^16]It follows that:\n\n$$\n\\begin{equation*}\n\\frac{V_{i n}}{I_{i n}}=R_{i n}\\left(1+K A_{0}\\right) \\tag{12.59}\n\\end{equation*}\n$$\n\nInterestingly, negative feedback around a voltage amplifier increases the input impedance by the factor $1+K A_{0}$. This modification makes the circuit closer to an ideal voltage amplifier.\n\n**Example:**\nDetermine the input impedance of the stage shown in Fig. 12.32(a) if $R_{1}+R_{2}$ is very large.\n\n**Figure Description:**\n*Fig. 12.32(a)* depicts a common-source NMOS amplifier with resistive feedback:\n- **M1:** NMOS, ports: {S:Vin, D: Vout, G: VF}\n- **RD:** Resistor, value: RD, ports: {N1: VDD, N2: Vout}\n- **R1:** Resistor, value: R1, ports: {N1: Vout, N2: VF}\n- **R2:** Resistor, value: R2, ports: {N1: VF, N2: GND}\n- **VDD:** VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n\nThe feedback network consists of resistors R1 and R2, providing negative feedback to stabilize gain and increase input impedance. The output is at Vout.\n\n**Figure Description:**\n*Fig. 12.32(b)* shows a common-source NMOS amplifier with resistive feedback:\n- **M1:** NMOS, ports: {S: Vin, D: Vout, G: GND}\n- **RD:** Resistor, value: RD, ports: {N1: VDD, N2: Vout}\n- **R1:** Resistor, value: R1, ports: {N1: Vout, N2: X}\n- **R2:** Resistor, value: R2, ports: {N1: X, N2: GND}\n\nThe feedback network consists of resistors R1 and R2, providing negative feedback to stabilize gain and increase input impedance. The output is at Vout.\n\n**Solution:**\nTo open the loop for calculating $R_{\\text {in }}$ in Eq. (12.59), we break the gate of $M_{1}$ from the feedback signal and tie it to ground [Fig. 12.32(b)]:\n\n$$\n\\begin{equation*}\nR_{i n}=\\frac{1}{g_{m}} \\tag{12.60}\n\\end{equation*}\n$$\n\nThe closed-loop input impedance is thus:\n\n$$\n\\begin{equation*}\n\\frac{V_{i n}}{I_{i n}}=\\frac{1}{g_{m}}\\left(1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}\\right) \\tag{12.61}\n\\end{equation*}\n$$\n\n**Exercise:**\nWhat occurs if $R_{2} \\rightarrow \\infty$? Is this result anticipated?\n\nThe impact of feedback on output impedance can be studied using Fig. 12.33, where the forward amplifier has an output impedance of $R_{\\text {out }}$. Expressing the error signal at $A_{0}$'s input as $-V_{F}=-K V_{X}$, we write the output voltage of $A_{0}$ as $-K A_{0} V_{X}$, hence:\n\n$$\n\\begin{equation*}\nI_{X}=\\frac{V_{X}-\\left(-K A_{0} V_{X}\\right)}{R_{\\text {out }}} \\tag{12.62}\n\\end{equation*}\n$$\n\nNeglecting the current drawn by the feedback network, we get:\n\n$$\n\\begin{equation*}\n\\frac{V_{X}}{I_{X}}=\\frac{R_{\\text {out }}}{1+K A_{0}} \\tag{12.63}\n\\end{equation*}\n$$\n\n**Figure Description:**\n*Figure 12.33* shows a feedforward system with an operational amplifier A0, a resistor Rout, and a feedback element K. The voltage source Vx is connected to the output node Vx, which is also connected to the feedback element K.\n\n**Figure 12.33 Calculation of output impedance.**\n\nThis reveals that negative feedback reduces the output impedance if the topology senses the output voltage, enhancing the circuit's performance as a voltage amplifier, as predicted by gain desensitization analysis in Section 12.2.\n\n**Example:**\nCalculate the output impedance of the circuit in Fig. 12.34 if $R_{1}+R_{2}$ is very large.\n\n**Figure Description:**\n*Figure 12.34* illustrates a differential amplifier with a current source biasing:\n- **M1:** NMOS, ports: {S: s1s2, D: d1d3g3, G: GND}\n- **M2:** NMOS, ports: {S: s1s2, D: Vx, G: VF}\n- **M3:** PMOS, ports: {S: VDD, D: d1d3g3, G: d1d3g3}\n- **M4:** PMOS, ports: {S: VDD, D: Vx, G: d1d3g3}\n- **R1:** Resistor, value: R1, ports: {N1: Vx, N2: VF}\n- **R2:** Resistor, value: R2, ports: {N1: VF, N2: GND}\n- **Vx:** VoltageSource, value: Vx, ports: {Np: Vx, Nn: GND}\n- **Iss:** CurrentSource, value: Iss, ports: {Np: s1s2, Nn: GND}\n\nThe circuit includes a differential pair (M1 and M2) and active loads (M3 and M4), with resistors R1 and R2 providing feedback. The voltage source Vx is used for testing output impedance.\n\n**Figure 12.34**\n\n**Solution:**\nFrom Example 12.15, the open-loop output impedance is $r_{O N} \\| r_{O P}$, and $K A_{0}=\\left[R_{2} /\\left(R_{1}+R_{2}\\right)\\right] g_{m N}\\left(r_{O N} \\| r_{O P}\\right)$. Thus, the closed-loop output impedance, $R_{\\text {out,closed }}$, is:\n\n$$\n\\begin{equation*}\nR_{\\text {out }, \\text { closed }}=\\frac{r_{O N} \\| r_{O P}}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m N}\\left(r_{O N} \\| r_{O P}\\right)} \\tag{12.64}\n\\end{equation*}\n$$\n\nIf the loop gain is much greater than unity:\n\n$$\n\\begin{equation*}\nR_{\\text {out }, \\text { closed }} \\approx\\left(1+\\frac{R_{1}}{R_{2}}\\right) \\frac{1}{g_{m N}} \\tag{12.65}\n\\end{equation*}\n$$\n\nThis value is independent of $r_{O N}$ and $r_{O P}$. Thus, while the open-loop amplifier has a high output impedance, negative feedback reduces $R_{\\text {out }}$ to a multiple of $1 / g_{m N}$.\n\n**Exercise:**\nWhat happens if $R_{2} \\rightarrow \\infty$? Can you prove this result by direct analysis of the circuit?\n\nIn summary, voltage-voltage feedback decreases the gain and output impedance by $1+K A_{0}$ and increases the input impedance by the same factor."
},
{
    "text": "As depicted in Fig. 12.29(a), this topology includes a voltage amplifier, necessitating the feedback network to detect the output voltage and feed a voltage back to the subtractor. Referencing Section 12.4, such a feedback network is positioned in parallel with the output and in series with the input, ideally exhibiting infinite input impedance and zero output impedance.\nimage_name:Figure 12.29\ndescription:The circuit features a voltage-voltage feedback topology with an ideal feedback network, comprising two operational amplifiers, A0 and K. A0 amplifies the voltage difference between nodes X3 and X2, while K provides feedback from the output node X3 to the input node X2. The input is located at node X1, and the output at node X3. The feedback network ideally has infinite input impedance and zero output impedance.\n\nFigure 12.29 Voltage-voltage feedback.\n\nWe begin by calculating the closed-loop gain. Given:\n\n$$\n\\begin{align*}\nV_{1} & =V_{\\text {in }}-V_{F}  \\tag{12.50}\\\\\nV_{\\text {out }} & =A_{0} V_{1}  \\tag{12.51}\\\\\nV_{F} & =K V_{\\text {out }}, \\tag{12.52}\n\\end{align*}\n$$\n\nwe derive:\n\n$$\n\\begin{equation*}\nV_{\\text {out }}=A_{0}\\left(V_{\\text {in }}-K V_{\\text {out }}\\right) \\tag{12.53}\n\\end{equation*}\n$$\n\nand subsequently:\n\n$$\n\\begin{equation*}\n\\frac{V_{\\text {out }}}{V_{\\text {in }}}=\\frac{A_{0}}{1+K A_{0}} \\tag{12.54}\n\\end{equation*}\n$$\n\nas anticipated.\n\nNext, determine the closed-loop gain of the circuit in Fig. 12.30, assuming $R_{1}+R_{2}$ is significantly large.\nimage_name:Figure 12.30\ndescription:\n[\nname: M1, type: NMOS, ports: {S: S1S2, D: d1d3g3, G: Vin}\nname: M2, type: NMOS, ports: {S: S1S2, D: Vout, G: VF}\nname: M3, type: PMOS, ports: {S: VDD, D: d1d3g3, G: d1d3g3}\nname: M4, type: PMOS, ports: {S: VDD, D: Vout, G: d1d3g3}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: VF}\nname: R2, type: Resistor, value: R2, ports: {N1: VF, N2: GND}\nname: I_SS, type: CurrentSource, value: I_SS, ports: {Np: S1S2, Nn: GND}\n]\nextrainfo:The circuit utilizes a differential amplifier topology with NMOS and PMOS transistors, incorporating negative voltage-voltage feedback. The resistive network senses Vout, feeding back a voltage to the gate of M2. This configuration is known as series-shunt feedback.\n\nFigure 12.30\n${ }^{6}$ Consequently, this feedback type is also termed the \"series-shunt\" topology, where the first term refers to the input return mechanism and the second to the output sensing mechanism.\n| Solution As demonstrated in Examples 12.10 and 12.12, this topology indeed employs negative voltage-voltage feedback: the resistive network senses $V_{\\text {out }}$ with high impedance (due to $R_{1}+R_{2}$ being very large), feeding back a voltage to the gate of $M_{2}$. As noted in Example $12.10, M_{1}$ and $M_{2}$ function as the input stage of the forward system and as a subtractor.\n\nRecognizing that $A_{0}$ represents the gain of the circuit comprising $M_{1}-M_{4}$, we express from Chapter 10:\n\n$$\n\\begin{equation*}\nA_{0}=g_{m N}\\left(r_{O N} \\| r_{O P}\\right) \\tag{12.55}\n\\end{equation*}\n$$\n\nwhere $N$ and $P$ subscripts denote NMOS and PMOS devices, respectively. ${ }^{7}$ With $K=R_{2} /\\left(R_{1}+R_{2}\\right)$, we obtain:\n\n$$\n\\begin{equation*}\n\\frac{V_{\\text {out }}}{V_{\\text {in }}}=\\frac{g_{m N}\\left(r_{O N} \\| r_{O P}\\right)}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m N}\\left(r_{O N} \\| r_{O P}\\right)} \\tag{12.56}\n\\end{equation*}\n$$\n\nAs expected, if the loop gain remains substantially greater than unity, the closed-loop gain approximates $1 / K=1+R_{1} / R_{2}$.\n\nExercise If $g_{m N}=1 /(100 \\Omega), r_{O N}=5 \\mathrm{k} \\Omega$, and $r_{O P}=2 \\mathrm{k} \\Omega$, compute the necessary value of $R_{2} /\\left(R_{1}+R_{2}\\right)$ for a closed-loop gain of 4. Compare this result with the nominal value of $\\left(R_{2}+R_{1}\\right) / R_{2}=4$.\nimage_name:Figure 12.31 Calculation of input impedance\ndescription:The system block diagram titled \"Figure 12.31 Calculation of input impedance\" illustrates a feedback amplifier system with several key components:\n\n1. **Main Components:**\n- **Voltage Source (V_in):** This input voltage source is grounded at one end, providing the input signal to the system.\n- **Summing Junction (+):** This block combines the input voltage \\( V_{in} \\) with the feedback voltage \\( V_F \\). The input voltage \\( V_{in} \\) is applied to the positive terminal, and the feedback voltage \\( V_F \\) to the negative terminal, resulting in the effective input voltage \\( V'_{in} \\).\n- **Feedforward System Block:**\n- **Amplifier (A_0):** An operational amplifier with finite input resistance \\( R_{in} \\). It amplifies the input current \\( I_{in} \\) and produces an output \\( Out(A_0) \\).\n- **Input Resistance (R_{in}):** Connected to ground, it models the finite input impedance of the amplifier.\n- **Feedback Network (K):** This block takes a portion of the output and feeds it back to the summing junction as \\( V_F \\).\n\n2. **Flow of Information or Control:**\n- The input voltage \\( V_{in} \\) is applied to the summing junction, where it is combined with the feedback voltage \\( V_F \\) to produce \\( V'_{in} \\).\n- The resulting voltage \\( V'_{in} \\) is converted to a current \\( I_{in} \\) through the input resistance \\( R_{in} \\), flowing into the amplifier \\( A_0 \\).\n- The amplifier \\( A_0 \\) processes this current and produces an output \\( Out(A_0) \\).\n- A portion of this output is fed back through the feedback network \\( K \\) to the summing junction.\n\n3. **Labels, Annotations, and Key Indicators:**\n- The diagram includes labels such as \\( V_{in} \\), \\( I_{in} \\), \\( R_{in} \\), \\( A_0 \\), \\( Out(A_0) \\), and \\( V_F \\) to indicate the various voltages, currents, and components within the system.\n- Ground symbols are present to indicate reference points for the voltages.\n\n4. **Overall System Function:**\n- The primary function of this system is to amplify the input signal \\( V_{in} \\) while incorporating feedback to control the overall gain and input impedance. The feedback network adjusts the effective input voltage \\( V'_{in} \\) by subtracting a portion of the output, thus stabilizing the system and maintaining the desired gain and impedance characteristics.\n\nFigure 12.31 Calculation of input impedance.\nTo analyze the impact of feedback on I/O impedances, we assume the forward system is a nonideal voltage amplifier (i.e., it has finite I/O impedances) while the feedback network remains ideal. Fig. 12.31 depicts the overall topology, including a finite input resistance for the forward amplifier. Without feedback, the entire input signal would appear across $R_{i n}$, generating an input current of $V_{i n} / R_{i n}{ }^{8}$. With feedback, however, the voltage at the input of $A_{0}$ equals $V_{i n}-V_{F}$ and also equals $I_{i n} R_{i n}$. Thus,\n\n$$\n\\begin{align*}\nI_{i n} R_{i n} & =V_{i n}-V_{F}  \\tag{12.57}\\\\\n& =V_{i n}-\\left(I_{i n} R_{i n}\\right) A_{0} K \\tag{12.58}\n\\end{align*}\n$$\n\n[^16]It follows that\n\n$$\n\\begin{equation*}\n\\frac{V_{i n}}{I_{i n}}=R_{i n}\\left(1+K A_{0}\\right) \\tag{12.59}\n\\end{equation*}\n$$\n\nInterestingly, negative feedback around a voltage amplifier increases the input impedance by the universal factor of one plus the loop gain. This impedance modification brings the circuit closer to an ideal voltage amplifier.\n\nExample Determine the input impedance of the stage shown in Fig. 12.32(a) if $R_{1}+R_{2}$ is very large.\nimage_name:Fig. 12.32(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S:Vin, D: Vout, G: VF}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: VF}\nname: R2, type: Resistor, value: R2, ports: {N1: VF, N2: GND}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with resistive feedback. The feedback network consists of resistors R1 and R2, providing negative feedback to stabilize the gain and increase input impedance. The output is taken at Vout.\n\nimage_name:Fig. 12.32(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vin, D: Vout, G: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: X}\nname: R2, type: Resistor, value: R2, ports: {N1: X, N2: GND}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with resistive feedback. The feedback network consists of resistors R1 and R2, providing negative feedback to stabilize the gain and increase input impedance. The output is taken at Vout.\n\nSolution To open the loop for calculating $R_{\\text {in }}$ in Eq. (12.59), we break the gate of $M_{1}$ from the feedback signal and tie it to ground [Fig. 12.32(b)]:\n\n$$\n\\begin{equation*}\nR_{i n}=\\frac{1}{g_{m}} \\tag{12.60}\n\\end{equation*}\n$$\n\nThe closed-loop input impedance is then given by\n\n$$\n\\begin{equation*}\n\\frac{V_{i n}}{I_{i n}}=\\frac{1}{g_{m}}\\left(1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}\\right) \\tag{12.61}\n\\end{equation*}\n$$\n\nExercise What occurs if $R_{2} \\rightarrow \\infty$ ? Is this result anticipated?\n\nThe effect of feedback on output impedance can be examined using the diagram in Fig. 12.33, where the forward amplifier has an output impedance of $R_{\\text {out }}$. Expressing the error signal at the input of $A_{0}$ as $-V_{F}=-K V_{X}$, we write the output voltage of $A_{0}$ as $-K A_{0} V_{X}$, hence\n\n$$\n\\begin{equation*}\nI_{X}=\\frac{V_{X}-\\left(-K A_{0} V_{X}\\right)}{R_{\\text {out }}} \\tag{12.62}\n\\end{equation*}\n$$\n\nwhere the current drawn by the feedback network is neglected. Thus,\n\n$$\n\\begin{equation*}\n\\frac{V_{X}}{I_{X}}=\\frac{R_{\\text {out }}}{1+K A_{0}} \\tag{12.63}\n\\end{equation*}\n$$\n\nimage_name:Figure 12.33\ndescription:The circuit is a feedforward system with an operational amplifier A0, a resistor Rout, and a feedback element K. The voltage source Vx is connected to the output node Vx, which is also connected to the feedback element K.\n\nFigure 12.33 Calculation of output impedance.\nshowing that negative feedback reduces the output impedance if the topology senses the output voltage. The circuit now functions as a better voltage amplifier, as predicted by our gain desensitization analysis in Section 12.2.\n\nExample Calculate the output impedance of the circuit in Fig. 12.34 if $R_{1}+R_{2}$ is very large.\nimage_name:Figure 12.34\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1s2, D: d1d3g3, G: GND}\nname: M2, type: NMOS, ports: {S: s1s2, D: Vx, G: VF}\nname: M3, type: PMOS, ports: {S: VDD, D: d1d3g3, G: d1d3g3}\nname: M4, type: PMOS, ports: {S: VDD, D: Vx, G: d1d3g3}\nname: R1, type: Resistor, value: R1, ports: {N1: Vx, N2: VF}\nname: R2, type: Resistor, value: R2, ports: {N1: VF, N2: GND}\nname: Vx, type: VoltageSource, value: Vx, ports: {Np: Vx, Nn: GND}\nname: Iss, type: CurrentSource, value: Iss, ports: {Np: s1s2, Nn: GND}\n]\nextrainfo:The circuit is a differential amplifier with a current source biasing. M1 and M2 form the differential pair, while M3 and M4 act as active loads. The resistors R1 and R2 provide feedback, and the voltage source Vx is used for testing output impedance.\n\nFigure 12.34\n\nSolution From Example 12.15, recall that the open-loop output impedance is $r_{O N} \\| r_{O P}$ and $K A_{0}=\\left[R_{2} /\\left(R_{1}+R_{2}\\right)\\right] g_{m N}\\left(r_{O N} \\| r_{O P}\\right)$. Thus, the closed-loop output impedance, $R_{\\text {out,closed }}$, is\n\n$$\n\\begin{equation*}\nR_{\\text {out }, \\text { closed }}=\\frac{r_{O N} \\| r_{O P}}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m N}\\left(r_{O N} \\| r_{O P}\\right)} \\tag{12.64}\n\\end{equation*}\n$$\n\nIf the loop gain is much greater than unity,\n\n$$\n\\begin{equation*}\nR_{\\text {out }, \\text { closed }} \\approx\\left(1+\\frac{R_{1}}{R_{2}}\\right) \\frac{1}{g_{m N}} \\tag{12.65}\n\\end{equation*}\n$$\n\na value independent of $r_{O N}$ and $r_{O P}$. In other words, while the open-loop amplifier suffers from high output impedance, applying negative feedback lowers $R_{\\text {out }}$ to a multiple of $1 / g_{m N}$.\n\nExercise What happens if $R_{2} \\rightarrow \\infty$ ? Can you prove this result by direct analysis of the circuit?\n\nIn summary, voltage-voltage feedback decreases the gain and output impedance by $1+K A_{0}$ and increases the input impedance by the same factor."
},
{
    "text": "Featured in Fig. 12.29(a), this configuration includes a voltage amplifier that necessitates the feedback network to sense the output voltage and feed a voltage back to the subtractor. Referencing Section 12.4, such a feedback network is positioned in parallel with the output and in series with the input, ${ }^{6}$ ideally showcasing infinite input impedance and zero output impedance.\n\nimage_name:Figure 12.29\ndescription:The circuit is a voltage-voltage feedback topology with an ideal feedback network. It comprises two operational amplifiers, A0 and K, where A0 amplifies the voltage difference between nodes X3 and X2, and K provides feedback from the output node X3 to the input node X2. The input is at node X1, and the output is at node X3. The feedback network ideally possesses infinite input impedance and zero output impedance.\n\nFigure 12.29 Voltage-voltage feedback.\n\nWe initially compute the closed-loop gain. Given\n\n$$\n\\begin{align*}\nV_{1} & =V_{\\text {in }}-V_{F}  \\tag{12.50}\\\\\nV_{\\text {out }} & =A_{0} V_{1}  \\tag{12.51}\\\\\nV_{F} & =K V_{\\text {out }}, \\tag{12.52}\n\\end{align*}\n$$\n\nwe derive\n\n$$\n\\begin{equation*}\nV_{\\text {out }}=A_{0}\\left(V_{\\text {in }}-K V_{\\text {out }}\\right) \\tag{12.53}\n\\end{equation*}\n$$\n\nand consequently\n\n$$\n\\begin{equation*}\n\\frac{V_{\\text {out }}}{V_{\\text {in }}}=\\frac{A_{0}}{1+K A_{0}} \\tag{12.54}\n\\end{equation*}\n$$\n\nas anticipated.\n\nNext, determine the closed-loop gain of the circuit depicted in Fig. 12.30, assuming $R_{1}+R_{2}$ is significantly large.\nimage_name:Figure 12.30\ndescription:\n[\nname: M1, type: NMOS, ports: {S: S1S2, D: d1d3g3, G: Vin}\nname: M2, type: NMOS, ports: {S: S1S2, D: Vout, G: VF}\nname: M3, type: PMOS, ports: {S: VDD, D: d1d3g3, G: d1d3g3}\nname: M4, type: PMOS, ports: {S: VDD, D: Vout, G: d1d3g3}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: VF}\nname: R2, type: Resistor, value: R2, ports: {N1: VF, N2: GND}\nname: I_SS, type: CurrentSource, value: I_SS, ports: {Np: S1S2, Nn: GND}\n]\nextrainfo:The circuit utilizes a differential amplifier topology with NMOS and PMOS transistors, incorporating negative voltage-voltage feedback. The resistive network senses Vout, feeding back a voltage to the gate of M2. This setup is known as series-shunt feedback.\n\nFigure 12.30\n${ }^{6}$ Due to this reason, this feedback type is also termed the \"series-shunt\" topology, where the first term refers to the input return mechanism and the second term to the output sensing mechanism.\n| Solution As demonstrated in Examples 12.10 and 12.12, this topology indeed employs negative voltage-voltage feedback: the resistive network detects $V_{\\text {out }}$ with high impedance (since $R_{1}+R_{2}$ is very large), feeding back a voltage to the gate of $M_{2}$. As noted in Example $12.10, M_{1}$ and $M_{2}$ function as the input stage of the forward system and as a subtractor.\n\nNoting that $A_{0}$ represents the gain of the circuit comprising $M_{1}-M_{4}$, we express from Chapter 10\n\n$$\n\\begin{equation*}\nA_{0}=g_{m N}\\left(r_{O N} \\| r_{O P}\\right) \\tag{12.55}\n\\end{equation*}\n$$\n\nwhere subscripts $N$ and $P$ denote NMOS and PMOS devices, respectively. ${ }^{7}$ With $K=R_{2} /\\left(R_{1}+R_{2}\\right)$, we obtain\n\n$$\n\\begin{equation*}\n\\frac{V_{\\text {out }}}{V_{\\text {in }}}=\\frac{g_{m N}\\left(r_{O N} \\| r_{O P}\\right)}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m N}\\left(r_{O N} \\| r_{O P}\\right)} \\tag{12.56}\n\\end{equation*}\n$$\n\nAs expected, if the loop gain remains substantially greater than unity, the closed-loop gain approximates $1 / K=1+R_{1} / R_{2}$.\n\nExercise If $g_{m N}=1 /(100 \\Omega), r_{O N}=5 \\mathrm{k} \\Omega$, and $r_{O P}=2 \\mathrm{k} \\Omega$, calculate the necessary value of $R_{2} /\\left(R_{1}+R_{2}\\right)$ for a closed-loop gain of 4. Compare this result with the nominal value of $\\left(R_{2}+R_{1}\\right) / R_{2}=4$.\nimage_name:Figure 12.31 Calculation of input impedance\ndescription:The system block diagram titled \"Figure 12.31 Calculation of input impedance\" illustrates a feedback amplifier system with several key components:\n\n1. **Main Components:**\n- **Voltage Source (V_in):** This input voltage source is grounded at one end, supplying the input signal to the system.\n- **Summing Junction (+):** This block combines the input voltage \\( V_{in} \\) with the feedback voltage \\( V_F \\). The input voltage \\( V_{in} \\) is applied to the positive terminal, and the feedback voltage \\( V_F \\) is applied to the negative terminal, resulting in the effective input voltage \\( V'_{in} \\).\n- **Feedforward System Block:**\n- **Amplifier (A_0):** An operational amplifier with finite input resistance \\( R_{in} \\). It amplifies the input current \\( I_{in} \\) and generates an output \\( Out(A_0) \\).\n- **Input Resistance (R_{in}):** Connected to ground, it models the finite input impedance of the amplifier.\n- **Feedback Network (K):** This block takes a portion of the output and feeds it back to the summing junction as \\( V_F \\).\n\n2. **Flow of Information or Control:**\n- The input voltage \\( V_{in} \\) is applied to the summing junction, where it is combined with the feedback voltage \\( V_F \\) to produce \\( V'_{in} \\).\n- The resulting voltage \\( V'_{in} \\) is converted to a current \\( I_{in} \\) through the input resistance \\( R_{in} \\), and this current flows into the amplifier \\( A_0 \\).\n- The amplifier \\( A_0 \\) processes this current and produces an output \\( Out(A_0) \\).\n- A portion of this output is fed back through the feedback network \\( K \\) to the summing junction.\n\n3. **Labels, Annotations, and Key Indicators:**\n- The diagram includes labels such as \\( V_{in} \\), \\( I_{in} \\), \\( R_{in} \\), \\( A_0 \\), \\( Out(A_0) \\), and \\( V_F \\) to indicate the various voltages, currents, and components within the system.\n- Ground symbols are present to indicate reference points for the voltages.\n\n4. **Overall System Function:**\n- The primary function of this system is to amplify the input signal \\( V_{in} \\) while incorporating feedback to control the overall gain and input impedance. The feedback network adjusts the effective input voltage \\( V'_{in} \\) by subtracting a portion of the output, thus stabilizing the system and maintaining the desired gain and impedance characteristics.\n\nFigure 12.31 Calculation of input impedance.\nTo analyze the impact of feedback on the I/O impedances, we assume the forward system is a nonideal voltage amplifier (i.e., it exhibits finite I/O impedances) while the feedback network remains ideal. Depicted in Fig. 12.31 is the overall topology, including a finite input resistance for the forward amplifier. Without feedback, the entire input signal would appear across $R_{i n}$, producing an input current of $V_{i n} / R_{i n}{ }^{8}$. With feedback, however, the voltage at the input of $A_{0}$ equals $V_{i n}-V_{F}$ and also equals $I_{i n} R_{i n}$. Thus,\n\n$$\n\\begin{align*}\nI_{i n} R_{i n} & =V_{i n}-V_{F}  \\tag{12.57}\\\\\n& =V_{i n}-\\left(I_{i n} R_{i n}\\right) A_{0} K \\tag{12.58}\n\\end{align*}\n$$\n\n[^16]It follows that\n\n$$\n\\begin{equation*}\n\\frac{V_{i n}}{I_{i n}}=R_{i n}\\left(1+K A_{0}\\right) \\tag{12.59}\n\\end{equation*}\n$$\n\nInterestingly, negative feedback around a voltage amplifier increases the input impedance by the universal factor of one plus the loop gain. This impedance modification brings the circuit closer to an ideal voltage amplifier.\n\nExample Determine the input impedance of the stage shown in Fig. 12.32(a) if $R_{1}+R_{2}$ is very large.\nimage_name:Fig. 12.32(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S:Vin, D: Vout, G: VF}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: VF}\nname: R2, type: Resistor, value: R2, ports: {N1: VF, N2: GND}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with resistive feedback. The feedback network consists of resistors R1 and R2, providing negative feedback to stabilize the gain and increase input impedance. The output is taken at Vout.\n\nimage_name:Fig. 12.32(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vin, D: Vout, G: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: X}\nname: R2, type: Resistor, value: R2, ports: {N1: X, N2: GND}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with resistive feedback. The feedback network consists of resistors R1 and R2, providing negative feedback to stabilize the gain and increase input impedance. The output is taken at Vout.\n\nSolution To open the loop for calculating $R_{\\text {in }}$ in Eq. (12.59), we break the gate of $M_{1}$ from the feedback signal and tie it to ground [Fig. 12.32(b)]:\n\n$$\n\\begin{equation*}\nR_{i n}=\\frac{1}{g_{m}} \\tag{12.60}\n\\end{equation*}\n$$\n\nThe closed-loop input impedance is therefore given by\n\n$$\n\\begin{equation*}\n\\frac{V_{i n}}{I_{i n}}=\\frac{1}{g_{m}}\\left(1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m} R_{D}\\right) \\tag{12.61}\n\\end{equation*}\n$$\n\nExercise What occurs if $R_{2} \\rightarrow \\infty$ ? Is this result anticipated?\n\nThe effect of feedback on the output impedance can be investigated using the diagram in Fig. 12.33, where the forward amplifier has an output impedance of $R_{\\text {out }}$. Expressing the error signal at the input of $A_{0}$ as $-V_{F}=-K V_{X}$, we write the output voltage of $A_{0}$ as $-K A_{0} V_{X}$ and hence\n\n$$\n\\begin{equation*}\nI_{X}=\\frac{V_{X}-\\left(-K A_{0} V_{X}\\right)}{R_{\\text {out }}} \\tag{12.62}\n\\end{equation*}\n$$\n\nwhere the current drawn by the feedback network is neglected. Thus,\n\n$$\n\\begin{equation*}\n\\frac{V_{X}}{I_{X}}=\\frac{R_{\\text {out }}}{1+K A_{0}} \\tag{12.63}\n\\end{equation*}\n$$\n\nimage_name:Figure 12.33\ndescription:The circuit is a feedforward system with an operational amplifier A0, a resistor Rout, and a feedback element K. The voltage source Vx is connected to the output node Vx, which is also connected to the feedback element K.\n\nFigure 12.33 Calculation of output impedance.\nrevealing that negative feedback reduces the output impedance if the topology senses the output voltage. The circuit now functions as a more ideal voltage amplifier, as predicted by our gain desensitization analysis in Section 12.2.\n\nExample $\\quad$ Calculate the output impedance of the circuit shown in Fig. 12.34 if $R_{1}+R_{2}$ is very large.\nimage_name:Figure 12.34\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1s2, D: d1d3g3, G: GND}\nname: M2, type: NMOS, ports: {S: s1s2, D: Vx, G: VF}\nname: M3, type: PMOS, ports: {S: VDD, D: d1d3g3, G: d1d3g3}\nname: M4, type: PMOS, ports: {S: VDD, D: Vx, G: d1d3g3}\nname: R1, type: Resistor, value: R1, ports: {N1: Vx, N2: VF}\nname: R2, type: Resistor, value: R2, ports: {N1: VF, N2: GND}\nname: Vx, type: VoltageSource, value: Vx, ports: {Np: Vx, Nn: GND}\nname: Iss, type: CurrentSource, value: Iss, ports: {Np: s1s2, Nn: GND}\n]\nextrainfo:The circuit is a differential amplifier with a current source biasing. M1 and M2 form the differential pair, while M3 and M4 act as active loads. The resistors R1 and R2 provide feedback, and the voltage source Vx is used for testing output impedance.\n\nFigure 12.34\n\nSolution Recall from Example 12.15 that the open-loop output impedance equals $r_{O N} \\| r_{O P}$ and $K A_{0}=\\left[R_{2} /\\left(R_{1}+R_{2}\\right)\\right] g_{m N}\\left(r_{O N} \\| r_{O P}\\right)$. Thus, the closed-loop output impedance, $R_{\\text {out,closed }}$, is given by\n\n$$\n\\begin{equation*}\nR_{\\text {out }, \\text { closed }}=\\frac{r_{O N} \\| r_{O P}}{1+\\frac{R_{2}}{R_{1}+R_{2}} g_{m N}\\left(r_{O N} \\| r_{O P}\\right)} \\tag{12.64}\n\\end{equation*}\n$$\n\nIf the loop gain is much greater than unity,\n\n$$\n\\begin{equation*}\nR_{\\text {out }, \\text { closed }} \\approx\\left(1+\\frac{R_{1}}{R_{2}}\\right) \\frac{1}{g_{m N}} \\tag{12.65}\n\\end{equation*}\n$$\n\na value independent of $r_{O N}$ and $r_{O P}$. In other words, while the open-loop amplifier suffers from a high output impedance, the application of negative feedback lowers $R_{\\text {out }}$ to a multiple of $1 / g_{m N}$.\n\nExercise What happens if $R_{2} \\rightarrow \\infty$ ? Can you prove this result by direct analysis of the circuit?\n\nIn summary, voltage-voltage feedback decreases the gain and the output impedance by $1+K A_{0}$ and raises the input impedance by the same factor."
},
{
    "text": "As illustrated in Fig. 12.35, this topology utilizes a transimpedance amplifier as the forward system, necessitating the feedback network to detect the output voltage and feed back a current to the subtractor. In our terminology, the first term in \"voltage-current feedback\" refers to the quantity measured at the output, while the second term pertains to the quantity returned to the input. (Note that this terminology is non-standard.) Additionally, recall from Section 12.4 that such a feedback network must be in parallel with both the output and the input, ${ }^{9}$ ideally providing both infinite input impedance and infinite output impedance (why?). Note that the feedback factor in this scenario has the dimension of conductance, as $K=I_{F} / V_{\\text {out }}$.\n\nimage_name:Figure 12.35 Voltage-current feedback\ndescription:The circuit employs a voltage-current feedback mechanism where the output current is sensed and fed back to the input. The feedback factor K is defined by the conductance (I_F / V_out). The closed-loop gain is derived as V_out / I_in = R_0 / (1 + K * R_0).\n\nFigure 12.35 Voltage-current feedback.\nWe initially calculate the closed-loop gain, anticipating a familiar result. Given $I_{e}=I_{\\text {in }}-I_{F}$ and $V_{\\text {out }}=I_{e} R_{0}$, we have\n\n$$\n\\begin{align*}\nV_{\\text {out }} & =\\left(I_{\\text {in }}-I_{F}\\right) R_{0}  \\tag{12.66}\\\\\n& =\\left(I_{\\text {in }}-K V_{\\text {out }}\\right) R_{0}, \\tag{12.67}\n\\end{align*}\n$$\n\ntherefore\n\n$$\n\\begin{equation*}\n\\frac{V_{\\text {out }}}{I_{\\text {in }}}=\\frac{R_{0}}{1+K R_{0}} . \\tag{12.68}\n\\end{equation*}\n$$\n\nFor the circuit depicted in Fig. 12.36(a), assuming $\\lambda=0$ and $R_{F}$ is very large, (a) demonstrate that the feedback is negative; (b) compute the open-loop gain; (c) calculate the closed-loop gain.\n\n[^17]Solution (a) If $I_{\\text {in }}$ increases, $I_{D 1}$ decreases and $V_{X}$ rises. Consequently, $V_{\\text {out }}$ falls, reducing $I_{R F}$. Since the currents injected by $I_{i n}$ and $R_{F}$ into the input node change in opposite directions, the feedback is negative.\n(b) To determine the open-loop gain, we consider the forward amplifier without the feedback network, leveraging the assumption that $R_{F}$ is very large [Fig. 12.36(b)].\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: S1, D: X, G: Vb}\nname: M2, type: NMOS, ports: {S: GND, D: Vout, G: X}\nname: RD1, type: Resistor, value: RD1, ports: {N1: VDD, N2: X}\nname: RD2, type: Resistor, value: RD2, ports: {N1: VDD, N2: Vout}\nname: RF, type: Resistor, value: RF, ports: {N1: S1, N2: Vout}\nname: iin, type: CurrentSource, value: iin, ports: {Np: GND, Nn: s1}\n]\nextrainfo:The circuit is a transimpedance amplifier with negative feedback. The feedback is provided through RF, and the amplifier consists of two NMOS transistors M1 and M2. RD1 and RD2 are the load resistors. The input current iin is converted to an output voltage Vout.\nimage_name:(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: S1, D: X, G: Vb}\nname: M2, type: NMOS, ports: {S: GND, D: Vout, G: X}\nname: RD1, type: Resistor, value: RD1, ports: {N1: VDD, N2: X}\nname: RD2, type: Resistor, value: RD2, ports: {N1: VDD, N2: Vout}\nname: iin, type: CurrentSource, value: iin, ports: {Np: GND, Nn: s1}\n]\nextrainfo:The circuit (b) is an open-loop amplifier configuration. M1 and M2 are NMOS transistors, RD1 and RD2 are the load resistors, and RF is the feedback resistor. The input current source SI is connected to the source of M1 and the feedback resistor RF. The circuit is designed to analyze the open-loop gain by considering the forward amplifier without the feedback network.\nimage_name:(c)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1, D: LOAD, G: Vb}\nname: RF, type: Resistor, value: RF, ports: {N1: s1, N2: Vout}\n]\nextrainfo:The circuit is a transimpedance amplifier with feedback. The feedback resistor RF connects the output to the input current source SI. The NMOS transistors M1 and M2 form the amplification stages, with M1's gate controlled by a bias voltage Vb and M2's gate connected to the node X. The resistors RD1 and RD2 are load resistors connected to the supply voltage VDD.\n\nFigure 12.36\nThe transimpedance gain is determined by the gain from $I_{\\text {in }}$ to $V_{X}$ (i.e., $R_{D 1}$) multiplied by the gain from $V_{X}$ to $V_{\\text {out }}$ (i.e., $-g_{m 2} R_{D 2}$):\n\n$$\n\\begin{equation*}\nR_{0}=R_{D 1}\\left(-g_{m 2} R_{D 2}\\right) \\tag{12.69}\n\\end{equation*}\n$$\n\nNote that this result assumes $R_{F} \\gg R_{D 2}$, ensuring the gain of the second stage remains $-g_{m 2} R_{D 2}$.\n(c) To find the closed-loop gain, we first note that the current returned by $R_{F}$ to the input is approximately $V_{\\text {out }} / R_{F}$ if $R_{F}$ is very large. To verify this, we consider a segment of the circuit as shown in Fig. 12.36(c) and write\n\n$$\n\\begin{equation*}\nI_{R F}=\\frac{V_{\\text {out }}}{R_{F}+\\frac{1}{g_{m 1}}} \\tag{12.70}\n\\end{equation*}\n$$\n\nThus, if $R_{F} \\gg 1 / g_{m 1}$, the returned current is approximately $V_{\\text {out }} / R_{F}$. (We say \" $R_{F}$ acts as a current source.\") That is, $K=-1 / R_{F}$, where the negative sign results from the direction of the current drawn by $R_{F}$ from the input node relative to that in Fig. 12.35. Forming $1+K R_{0}$, we express the closed-loop gain as\n\n$$\n\\begin{equation*}\n\\left.\\frac{V_{\\text {out }}}{I_{\\text {in }}}\\right|_{\\text {closed }}=\\frac{-g_{m 2} R_{D 1} R_{D 2}}{1+\\frac{g_{m 2} R_{D 1} R_{D 2}}{R_{F}}} \\tag{12.71}\n\\end{equation*}\n$$\n\nwhich simplifies to $-R_{F}$ if $g_{m 2} R_{D 1} R_{D 2} \\gg R_{F}$.\nIt is noteworthy that the assumption of a very large $R_{F}$ leads to two conditions in this example: $R_{F} \\gg R_{D 2}$ and $R_{F} \\gg 1 / g_{m 1}$. The first arises from output network calculations, and the second from input network calculations. What if one or both of these assumptions are invalid? We address this (relatively common) scenario in Section 12.7.\n\nWhat is the closed-loop gain if $R_{D 1} \\rightarrow \\infty$? How can this result be interpreted? (Hint: an infinite open-loop gain creates a virtual ground node at the source of $M_{1}$.)\nimage_name:Figure 12.37\ndescription:\n[\nname: Ix, type: CurrentSource, ports: {Np: GND, Nn: Vx}\nname: Rin, type: Resistor, value: Rin, ports: {N1: Vx, N2: In(R0)}\nname: R0, type: OpAmp, value: R0, ports: {InP: In(R0), InN: GND, Out: Out(R0)}\nname: K, type: Other, ports: {N1: Out(R0), N2: In(R0)}\n]\nextrainfo:The circuit models a transimpedance amplifier with input current Ix and output voltage at Out(R0). The feedback network includes a block labeled K, indicating additional processing or feedback control.\n\nFigure 12.37 Calculation of input impedance.\n\nWe now proceed to determine the closed-loop I/O impedances. By modeling the forward system as an ideal transimpedance amplifier with a finite input impedance $R_{\\text {in }}$ (Section 12.3), we construct the test circuit shown in Fig. 12.37. Since the current through $R_{\\text {in }}$ equals $V_{X} / R_{\\text {in }}$ (why?), the forward amplifier generates an output voltage of $\\left(V_{X} / R_{\\text {in }}\\right) R_{0}$, hence\n\n$$\n\\begin{equation*}\nI_{F}=K \\frac{V_{X}}{R_{i n}} R_{0} \\tag{12.72}\n\\end{equation*}\n$$\n\nWriting a KCL at the input node yields\n\n$$\n\\begin{equation*}\nI_{X}-K \\frac{V_{X}}{R_{i n}} R_{0}=\\frac{V_{X}}{R_{i n}} \\tag{12.73}\n\\end{equation*}\n$$\n\nthus\n\n$$\n\\begin{equation*}\n\\frac{V_{X}}{I_{X}}=\\frac{R_{i n}}{1+K R_{0}} \\tag{12.74}\n\\end{equation*}\n$$\n\nThat is, a feedback loop returning current to the input reduces the input impedance by a factor of one plus the loop gain, bringing the circuit closer to an ideal \"current sensor.\"\n\n| Example <br> 12.19 | Determine the closed-loop input impedance of the circuit analyzed in Example 12.18. |\n| :--- | :--- |\n| Solution | The open-loop amplifier depicted in Fig. 12.36(b) exhibits an input impedance $R_{\\text {in }}=1 / g_{m 1}$ <br> due to the assumption that $R_{F}$ is very large. With $1+K R_{0}$ from the denominator of <br> Eq. (12.71), we obtain |\n| $\\qquad R_{\\text {in, closed }}=\\frac{1}{g_{m 1}} \\cdot \\frac{1}{1+\\frac{g_{m 2} R_{D 1} R_{D 2}}{R_{F}}}$. |  |\n\nExercise Explain what occurs if $R_{D 1} \\rightarrow \\infty$ and why.\n\nFrom our analysis of voltage-voltage feedback in Section 12.6.1, we hypothesize that voltage-current feedback also reduces the output impedance because a feedback loop \"regulating\" the output voltage tends to stabilize it despite variations in load impedance. By drawing the circuit as shown in Fig. 12.38, where the input current source is set to zero and $R_{\\text {out }}$ models the open-loop output resistance, we observe that the feedback network produces a current $I_{F}=K V_{X}$. When this current flows through the forward amplifier, it translates to $V_{A}=-K V_{X} R_{0}$, hence\n\n$$\n\\begin{align*}\nI_{X} & =\\frac{V_{X}-V_{A}}{R_{\\text {out }}}  \\tag{12.76}\\\\\n& =\\frac{V_{X}+K V_{X} R_{0}}{R_{\\text {out }}} \\tag{12.77}\n\\end{align*}\n$$\n\nwhere the current drawn by the feedback network is neglected. Thus,\n\n$$\n\\begin{equation*}\n\\frac{V_{X}}{I_{X}}=\\frac{R_{\\text {out }}}{1+K R_{0}} \\tag{12.78}\n\\end{equation*}\n$$\n\nan expected outcome.\n\nExample Calculate the closed-loop output impedance of the circuit examined in Example 12.18.\n12.20\n\nSolution From the open-loop circuit in Fig. 12.36(b), we have $R_{\\text {out }} \\approx R_{D 2}$ due to the assumption that $R_{F}$ is very large. Using $1+K R_{0}$ from the denominator of Eq. (12.71), we get\n\n$$\n\\begin{equation*}\nR_{\\text {out }, \\text { closed }}=\\frac{R_{D 2}}{1+\\frac{g_{m 2} R_{D 1} R_{D 2}}{R_{F}}} \\tag{12.79}\n\\end{equation*}\n$$\n\nExercise Explain what happens if $R_{D 1} \\rightarrow \\infty$ and why."
},
{
    "text": "As illustrated in Fig. 12.35, this configuration utilizes a transimpedance amplifier as the forward system, necessitating the feedback network to detect the output voltage and feed back a current to the subtractor. In our terminology, the first term in \"voltage-current feedback\" pertains to the quantity measured at the output, while the second term refers to the quantity fed back to the input. (Note that this terminology is non-standard.) Additionally, recall from Section 12.4 that such a feedback network must be connected in parallel with both the output and the input, ${ }^{9}$ ideally providing both infinite input impedance and infinite output impedance (question: why?). It is important to note that the feedback factor in this scenario has the dimension of conductance, as $K=I_{F} / V_{\\text {out }}$.\n\nimage_name: Figure 12.35 Voltage-current feedback\ndescription: The circuit employs a voltage-current feedback mechanism where the output current is sensed and fed back to the input. The feedback factor K is defined by the conductance (I_F / V_out). The closed-loop gain is derived as V_out / I_in = R_0 / (1 + K * R_0).\n\nFigure 12.35 Voltage-current feedback.\nWe begin by calculating the closed-loop gain, anticipating a familiar outcome. Given $I_{e}=I_{\\text {in }}-I_{F}$ and $V_{\\text {out }}=I_{e} R_{0}$, we derive\n\n$$\n\\begin{align*}\nV_{\\text {out }} & =\\left(I_{\\text {in }}-I_{F}\\right) R_{0}  \\tag{12.66}\\\\\n& =\\left(I_{\\text {in }}-K V_{\\text {out }}\\right) R_{0}, \\tag{12.67}\n\\end{align*}\n$$\n\nwhich leads to\n\n$$\n\\begin{equation*}\n\\frac{V_{\\text {out }}}{I_{\\text {in }}}=\\frac{R_{0}}{1+K R_{0}} . \\tag{12.68}\n\\end{equation*}\n$$\n\nFor the circuit depicted in Fig. 12.36(a), assuming $\\lambda=0$ and $R_{F}$ is significantly large, (a) demonstrate that the feedback is negative; (b) compute the open-loop gain; (c) determine the closed-loop gain.\n\n[^17]Solution (a) If $I_{\\text {in }}$ increases, $I_{D 1}$ decreases, causing $V_{X}$ to rise. Consequently, $V_{\\text {out }}$ decreases, thereby reducing $I_{R F}$. Since the currents injected by $I_{i n}$ and $R_{F}$ into the input node change in opposite directions, the feedback is negative.\n(b) To determine the open-loop gain, we consider the forward amplifier without the feedback network, leveraging the assumption that $R_{F}$ is very large [Fig. 12.36(b)].\nimage_name: (a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: S1, D: X, G: Vb}\nname: M2, type: NMOS, ports: {S: GND, D: Vout, G: X}\nname: RD1, type: Resistor, value: RD1, ports: {N1: VDD, N2: X}\nname: RD2, type: Resistor, value: RD2, ports: {N1: VDD, N2: Vout}\nname: RF, type: Resistor, value: RF, ports: {N1: S1, N2: Vout}\nname: iin, type: CurrentSource, value: iin, ports: {Np: GND, Nn: s1}\n]\nextrainfo: The circuit is a transimpedance amplifier with negative feedback. The feedback is provided through RF, and the amplifier comprises two NMOS transistors, M1 and M2. RD1 and RD2 are the load resistors. The input current iin is converted to an output voltage Vout.\nimage_name: (b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: S1, D: X, G: Vb}\nname: M2, type: NMOS, ports: {S: GND, D: Vout, G: X}\nname: RD1, type: Resistor, value: RD1, ports: {N1: VDD, N2: X}\nname: RD2, type: Resistor, value: RD2, ports: {N1: VDD, N2: Vout}\nname: iin, type: CurrentSource, value: iin, ports: {Np: GND, Nn: s1}\n]\nextrainfo: The circuit (b) represents an open-loop amplifier configuration. M1 and M2 are NMOS transistors, RD1 and RD2 are the load resistors, and RF is the feedback resistor. The input current source SI is connected to the source of M1 and the feedback resistor RF. The circuit is designed to analyze the open-loop gain by excluding the feedback network.\nimage_name: (c)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1, D: LOAD, G: Vb}\nname: RF, type: Resistor, value: RF, ports: {N1: s1, N2: Vout}\n]\nextrainfo: The circuit is a transimpedance amplifier with feedback. The feedback resistor RF connects the output to the input current source SI. The NMOS transistors M1 and M2 form the amplification stages, with M1's gate controlled by a bias voltage Vb and M2's gate connected to the node X. The resistors RD1 and RD2 are load resistors connected to the supply voltage VDD.\n\nFigure 12.36\nThe transimpedance gain is calculated as the product of the gain from $I_{\\text {in }}$ to $V_{X}$ (i.e., $R_{D 1}$) and the gain from $V_{X}$ to $V_{\\text {out }}$ (i.e., $-g_{m 2} R_{D 2}$):\n\n$$\n\\begin{equation*}\nR_{0}=R_{D 1}\\left(-g_{m 2} R_{D 2}\\right) \\tag{12.69}\n\\end{equation*}\n$$\n\nNote that this result assumes $R_{F} \\gg R_{D 2}$, ensuring the gain of the second stage remains $-g_{m 2} R_{D 2}$.\n(c) To find the closed-loop gain, we first observe that the current returned by $R_{F}$ to the input is approximately $V_{\\text {out }} / R_{F}$ if $R_{F}$ is very large. To verify this, we analyze a portion of the circuit as shown in Fig. 12.36(c) and write\n\n$$\n\\begin{equation*}\nI_{R F}=\\frac{V_{\\text {out }}}{R_{F}+\\frac{1}{g_{m 1}}} \\tag{12.70}\n\\end{equation*}\n$$\n\nThus, if $R_{F} \\gg 1 / g_{m 1}$, the returned current is approximately $V_{\\text {out }} / R_{F}$. (We say \" $R_{F}$ acts as a current source.\") Hence, $K=-1 / R_{F}$, where the negative sign arises due to the direction of the current drawn by $R_{F}$ from the input node relative to Fig. 12.35. Forming $1+K R_{0}$, we express the closed-loop gain as\n\n$$\n\\begin{equation*}\n\\left.\\frac{V_{\\text {out }}}{I_{\\text {in }}}\\right|_{\\text {closed }}=\\frac{-g_{m 2} R_{D 1} R_{D 2}}{1+\\frac{g_{m 2} R_{D 1} R_{D 2}}{R_{F}}} \\tag{12.71}\n\\end{equation*}\n$$\n\nwhich simplifies to $-R_{F}$ if $g_{m 2} R_{D 1} R_{D 2} \\gg R_{F}$.\nIt is noteworthy that the assumption of a very large $R_{F}$ translates to two conditions in this example: $R_{F} \\gg R_{D 2}$ and $R_{F} \\gg 1 / g_{m 1}$. The former stems from output network calculations, while the latter from input network calculations. What if one or both of these assumptions are invalid? We address this (fairly common) scenario in Section 12.7.\n\nWhat is the closed-loop gain if $R_{D 1} \\rightarrow \\infty$? How can this result be interpreted? (Hint: the infinite open-loop gain creates a virtual ground node at the source of $M_{1}$.)\nimage_name: Figure 12.37\ndescription:\n[\nname: Ix, type: CurrentSource, ports: {Np: GND, Nn: Vx}\nname: Rin, type: Resistor, value: Rin, ports: {N1: Vx, N2: In(R0)}\nname: R0, type: OpAmp, value: R0, ports: {InP: In(R0), InN: GND, Out: Out(R0)}\nname: K, type: Other, ports: {N1: Out(R0), N2: In(R0)}\n]\nextrainfo: The circuit models a transimpedance amplifier with input current Ix and output voltage at Out(R0). The feedback network includes a block labeled K, indicating additional processing or feedback control.\n\nFigure 12.37 Calculation of input impedance.\n\nWe now proceed to determine the closed-loop I/O impedances. By modeling the forward system as an ideal transimpedance amplifier with a finite input impedance $R_{\\text {in }}$ (Section 12.3), we construct the test circuit shown in Fig. 12.37. Since the current through $R_{\\text {in }}$ equals $V_{X} / R_{\\text {in }}$ (question: why?), the forward amplifier generates an output voltage of $\\left(V_{X} / R_{\\text {in }}\\right) R_{0}$, hence\n\n$$\n\\begin{equation*}\nI_{F}=K \\frac{V_{X}}{R_{i n}} R_{0} \\tag{12.72}\n\\end{equation*}\n$$\n\nWriting a KCL at the input node yields\n\n$$\n\\begin{equation*}\nI_{X}-K \\frac{V_{X}}{R_{i n}} R_{0}=\\frac{V_{X}}{R_{i n}} \\tag{12.73}\n\\end{equation*}\n$$\n\nand thus\n\n$$\n\\begin{equation*}\n\\frac{V_{X}}{I_{X}}=\\frac{R_{i n}}{1+K R_{0}} \\tag{12.74}\n\\end{equation*}\n$$\n\nThat is, a feedback loop that returns current to the input reduces the input impedance by a factor of one plus the loop gain, bringing the circuit closer to an ideal \"current sensor.\"\n\n| Example <br> 12.19 | Determine the closed-loop input impedance of the circuit analyzed in Example 12.18. |\n| :--- | :--- |\n| Solution | The open-loop amplifier depicted in Fig. 12.36(b) exhibits an input impedance $R_{\\text {in }}=1 / g_{m 1}$ <br> due to the assumption that $R_{F}$ is very large. Using $1+K R_{0}$ from the denominator of <br> Eq. (12.71), we obtain |\n| $\\qquad R_{\\text {in, closed }}=\\frac{1}{g_{m 1}} \\cdot \\frac{1}{1+\\frac{g_{m 2} R_{D 1} R_{D 2}}{R_{F}}}$. |  |\n\nExercise Explain what occurs if $R_{D 1} \\rightarrow \\infty$ and why.\n\nFrom our analysis of voltage-voltage feedback in Section 12.6.1, we hypothesize that voltage-current feedback also reduces the output impedance because a feedback loop \"regulating\" the output voltage tends to stabilize it despite variations in load impedance. By drawing the circuit as shown in Fig. 12.38, where the input current source is set to zero and $R_{\\text {out }}$ represents the open-loop output resistance, we observe that the feedback network generates a current $I_{F}=K V_{X}$. When this current flows through the forward amplifier, it results in $V_{A}=-K V_{X} R_{0}$, hence\n\n$$\n\\begin{align*}\nI_{X} & =\\frac{V_{X}-V_{A}}{R_{\\text {out }}}  \\tag{12.76}\\\\\n& =\\frac{V_{X}+K V_{X} R_{0}}{R_{\\text {out }}} \\tag{12.77}\n\\end{align*}\n$$\n\nwhere the current drawn by the feedback network is neglected. Thus,\n\n$$\n\\begin{equation*}\n\\frac{V_{X}}{I_{X}}=\\frac{R_{\\text {out }}}{1+K R_{0}} \\tag{12.78}\n\\end{equation*}\n$$\n\nan expected outcome.\n\nExample Calculate the closed-loop output impedance of the circuit examined in Example 12.18.\n12.20\n\nSolution From the open-loop circuit in Fig. 12.36(b), we have $R_{\\text {out }} \\approx R_{D 2}$ because $R_{F}$ is assumed to be very large. Using $1+K R_{0}$ from the denominator of Eq. (12.71), we get\n\n$$\n\\begin{equation*}\nR_{\\text {out }, \\text { closed }}=\\frac{R_{D 2}}{1+\\frac{g_{m 2} R_{D 1} R_{D 2}}{R_{F}}} \\tag{12.79}\n\\end{equation*}\n$$\n\nExercise Explain what happens if $R_{D 1} \\rightarrow \\infty$ and why."
},
{
    "text": "As illustrated in Fig. 12.35, this configuration utilizes a transimpedance amplifier as the forward system, necessitating the feedback network to detect the output voltage and feed back a current to the subtractor. In our nomenclature, the initial term in \"voltage-current feedback\" pertains to the quantity measured at the output, while the second term refers to the quantity fed back to the input. (Note that this terminology is non-standard.) Additionally, recall from Section 12.4 that such a feedback network must be in parallel with both the output and input, ideally offering both infinite input and output impedances (why?). It is important to note that the feedback factor in this scenario has the dimension of conductance, as $K=I_{F} / V_{\\text {out }}$.\n\nimage_name: Figure 12.35 Voltage-current feedback\ndescription: The circuit employs a voltage-current feedback mechanism where the output current is sensed and fed back to the input. The feedback factor K is defined by the conductance (I_F / V_out). The closed-loop gain is expressed as V_out / I_in = R_0 / (1 + K * R_0).\n\nFigure 12.35 Voltage-current feedback.\nWe initially calculate the closed-loop gain, anticipating a familiar outcome. Given $I_{e}=I_{\\text {in }}-I_{F}$ and $V_{\\text {out }}=I_{e} R_{0}$, we derive\n\n$$\n\\begin{align*}\nV_{\\text {out }} & =\\left(I_{\\text {in }}-I_{F}\\right) R_{0}  \\tag{12.66}\\\\\n& =\\left(I_{\\text {in }}-K V_{\\text {out }}\\right) R_{0}, \\tag{12.67}\n\\end{align*}\n$$\n\nresulting in\n\n$$\n\\begin{equation*}\n\\frac{V_{\\text {out }}}{I_{\\text {in }}}=\\frac{R_{0}}{1+K R_{0}} . \\tag{12.68}\n\\end{equation*}\n$$\n\nFor the circuit depicted in Fig. 12.36(a), assuming $\\lambda=0$ and $R_{F}$ is extremely large, (a) demonstrate that the feedback is negative; (b) compute the open-loop gain; (c) determine the closed-loop gain.\n\n[^17]Solution (a) If $I_{\\text {in }}$ increases, $I_{D 1}$ decreases, causing $V_{X}$ to rise. Consequently, $V_{\\text {out }}$ decreases, thereby reducing $I_{R F}$. Since the currents injected by $I_{i n}$ and $R_{F}$ into the input node change in opposite directions, the feedback is negative.\n(b) To compute the open-loop gain, we consider the forward amplifier without the feedback network, leveraging the assumption that $R_{F}$ is very large [Fig. 12.36(b)].\nimage_name: (a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: S1, D: X, G: Vb}\nname: M2, type: NMOS, ports: {S: GND, D: Vout, G: X}\nname: RD1, type: Resistor, value: RD1, ports: {N1: VDD, N2: X}\nname: RD2, type: Resistor, value: RD2, ports: {N1: VDD, N2: Vout}\nname: RF, type: Resistor, value: RF, ports: {N1: S1, N2: Vout}\nname: iin, type: CurrentSource, value: iin, ports: {Np: GND, Nn: s1}\n]\nextrainfo: The circuit is a transimpedance amplifier with negative feedback. The feedback is provided through RF, and the amplifier consists of two NMOS transistors, M1 and M2. RD1 and RD2 are the load resistors. The input current iin is converted to an output voltage Vout.\nimage_name: (b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: S1, D: X, G: Vb}\nname: M2, type: NMOS, ports: {S: GND, D: Vout, G: X}\nname: RD1, type: Resistor, value: RD1, ports: {N1: VDD, N2: X}\nname: RD2, type: Resistor, value: RD2, ports: {N1: VDD, N2: Vout}\nname: iin, type: CurrentSource, value: iin, ports: {Np: GND, Nn: s1}\n]\nextrainfo: The circuit (b) represents an open-loop amplifier configuration. M1 and M2 are NMOS transistors, RD1 and RD2 are the load resistors, and RF is the feedback resistor. The input current source SI is connected to the source of M1 and the feedback resistor RF. The circuit is designed to analyze the open-loop gain by excluding the feedback network.\nimage_name: (c)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1, D: LOAD, G: Vb}\nname: RF, type: Resistor, value: RF, ports: {N1: s1, N2: Vout}\n]\nextrainfo: The circuit is a transimpedance amplifier with feedback. The feedback resistor RF connects the output to the input current source SI. The NMOS transistors M1 and M2 form the amplification stages, with M1's gate controlled by a bias voltage Vb and M2's gate connected to the node X. The resistors RD1 and RD2 are load resistors connected to the supply voltage VDD.\n\nFigure 12.36\nThe transimpedance gain is determined by the gain from $I_{\\text {in }}$ to $V_{X}$ (i.e., $R_{D 1}$) multiplied by the gain from $V_{X}$ to $V_{\\text {out }}$ (i.e., $-g_{m 2} R_{D 2}$):\n\n$$\n\\begin{equation*}\nR_{0}=R_{D 1}\\left(-g_{m 2} R_{D 2}\\right) \\tag{12.69}\n\\end{equation*}\n$$\n\nNote that this result assumes $R_{F} \\gg R_{D 2}$, ensuring the gain of the second stage remains $-g_{m 2} R_{D 2}$.\n(c) To find the closed-loop gain, we first note that the current returned by $R_{F}$ to the input is approximately $V_{\\text {out }} / R_{F}$ if $R_{F}$ is very large. To verify this, we examine a portion of the circuit as shown in Fig. 12.36(c) and write\n\n$$\n\\begin{equation*}\nI_{R F}=\\frac{V_{\\text {out }}}{R_{F}+\\frac{1}{g_{m 1}}} \\tag{12.70}\n\\end{equation*}\n$$\n\nThus, if $R_{F} \\gg 1 / g_{m 1}$, the returned current is approximately $V_{\\text {out }} / R_{F}$. (We state \" $R_{F}$ acts as a current source.\") Hence, $K=-1 / R_{F}$, where the negative sign arises due to the direction of the current drawn by $R_{F}$ from the input node relative to Fig. 12.35. Forming $1+K R_{0}$, we express the closed-loop gain as\n\n$$\n\\begin{equation*}\n\\left.\\frac{V_{\\text {out }}}{I_{\\text {in }}}\\right|_{\\text {closed }}=\\frac{-g_{m 2} R_{D 1} R_{D 2}}{1+\\frac{g_{m 2} R_{D 1} R_{D 2}}{R_{F}}} \\tag{12.71}\n\\end{equation*}\n$$\n\nwhich simplifies to $-R_{F}$ if $g_{m 2} R_{D 1} R_{D 2} \\gg R_{F}$.\nIt is noteworthy that the assumption of a very large $R_{F}$ leads to two conditions in this example: $R_{F} \\gg R_{D 2}$ and $R_{F} \\gg 1 / g_{m 1}$. The first condition stems from output network calculations, while the second from input network calculations. What occurs if either or both of these assumptions are invalid? We address this (fairly common) scenario in Section 12.7.\n\nWhat is the closed-loop gain if $R_{D 1} \\rightarrow \\infty$? How can this result be interpreted? (Hint: an infinite open-loop gain creates a virtual ground at the source of $M_{1}$.)\nimage_name: Figure 12.37\ndescription:\n[\nname: Ix, type: CurrentSource, ports: {Np: GND, Nn: Vx}\nname: Rin, type: Resistor, value: Rin, ports: {N1: Vx, N2: In(R0)}\nname: R0, type: OpAmp, value: R0, ports: {InP: In(R0), InN: GND, Out: Out(R0)}\nname: K, type: Other, ports: {N1: Out(R0), N2: In(R0)}\n]\nextrainfo: The circuit models a transimpedance amplifier with input current Ix and output voltage at Out(R0). The feedback network includes a block labeled K, indicating additional processing or feedback control.\n\nFigure 12.37 Calculation of input impedance.\n\nWe now proceed to determine the closed-loop input/output impedances. By modeling the forward system as an ideal transimpedance amplifier with a finite input impedance $R_{\\text {in }}$ (Section 12.3), we construct the test circuit shown in Fig. 12.37. Since the current through $R_{\\text {in }}$ equals $V_{X} / R_{\\text {in }}$ (why?), the forward amplifier generates an output voltage of $\\left(V_{X} / R_{\\text {in }}\\right) R_{0}$, hence\n\n$$\n\\begin{equation*}\nI_{F}=K \\frac{V_{X}}{R_{i n}} R_{0} \\tag{12.72}\n\\end{equation*}\n$$\n\nWriting a KCL at the input node yields\n\n$$\n\\begin{equation*}\nI_{X}-K \\frac{V_{X}}{R_{i n}} R_{0}=\\frac{V_{X}}{R_{i n}} \\tag{12.73}\n\\end{equation*}\n$$\n\nresulting in\n\n$$\n\\begin{equation*}\n\\frac{V_{X}}{I_{X}}=\\frac{R_{i n}}{1+K R_{0}} \\tag{12.74}\n\\end{equation*}\n$$\n\nThus, a feedback loop returning current to the input reduces the input impedance by a factor of one plus the loop gain, bringing the circuit closer to an ideal \"current sensor.\"\n\n| Example <br> 12.19 | Determine the closed-loop input impedance of the circuit analyzed in Example 12.18. |\n| :--- | :--- |\n| Solution | The open-loop amplifier depicted in Fig. 12.36(b) exhibits an input impedance $R_{\\text {in }}=1 / g_{m 1}$ <br> due to the assumption that $R_{F}$ is very large. Using $1+K R_{0}$ from the denominator of <br> Eq. (12.71), we obtain |\n| $\\qquad R_{\\text {in, closed }}=\\frac{1}{g_{m 1}} \\cdot \\frac{1}{1+\\frac{g_{m 2} R_{D 1} R_{D 2}}{R_{F}}}$. |  |\n\nExercise Explain what occurs if $R_{D 1} \\rightarrow \\infty$ and why.\n\nFrom our analysis of voltage-voltage feedback in Section 12.6.1, we hypothesize that voltage-current feedback also reduces the output impedance because a feedback loop \"regulating\" the output voltage tends to stabilize it despite variations in load impedance. By drawing the circuit as shown in Fig. 12.38, where the input current source is set to zero and $R_{\\text {out }}$ models the open-loop output resistance, we observe that the feedback network generates a current $I_{F}=K V_{X}$. When this current flows through the forward amplifier, it translates to $V_{A}=-K V_{X} R_{0}$, hence\n\n$$\n\\begin{align*}\nI_{X} & =\\frac{V_{X}-V_{A}}{R_{\\text {out }}}  \\tag{12.76}\\\\\n& =\\frac{V_{X}+K V_{X} R_{0}}{R_{\\text {out }}} \\tag{12.77}\n\\end{align*}\n$$\n\nneglecting the current drawn by the feedback network. Thus,\n\n$$\n\\begin{equation*}\n\\frac{V_{X}}{I_{X}}=\\frac{R_{\\text {out }}}{1+K R_{0}} \\tag{12.78}\n\\end{equation*}\n$$\n\nan anticipated result.\n\nExample Calculate the closed-loop output impedance of the circuit examined in Example 12.18.\n12.20\n\nSolution From the open-loop circuit in Fig. 12.36(b), we have $R_{\\text {out }} \\approx R_{D 2}$ due to the assumption that $R_{F}$ is very large. Using $1+K R_{0}$ from the denominator of Eq. (12.71), we obtain\n\n$$\n\\begin{equation*}\nR_{\\text {out }, \\text { closed }}=\\frac{R_{D 2}}{1+\\frac{g_{m 2} R_{D 1} R_{D 2}}{R_{F}}} \\tag{12.79}\n\\end{equation*}\n$$\n\nExercise Explain what happens if $R_{D 1} \\rightarrow \\infty$ and why."
},
{
    "text": "As illustrated in Fig. 12.35, this configuration utilizes a transimpedance amplifier as the forward system, necessitating the feedback network to detect the output voltage and feed back a current to the subtractor. In our terminology, the initial term in \"voltage-current feedback\" pertains to the quantity measured at the output, while the second term refers to the quantity returned to the input. (Note: This terminology is non-standard.) Additionally, recall from Section 12.4 that such a feedback network must be in parallel with both the output and input, ideally offering both infinite input and output impedances (why?). It is important to note that the feedback factor in this scenario has the dimension of conductance, given by $K=I_{F} / V_{\\text {out }}$.\n\nimage_name: Figure 12.35 Voltage-current feedback\ndescription: The circuit employs a voltage-current feedback mechanism where the output current is sensed and fed back to the input. The feedback factor K is defined by the conductance (I_F / V_out). The closed-loop gain is derived as V_out / I_in = R_0 / (1 + K * R_0).\n\nFigure 12.35 Voltage-current feedback.\nWe initially calculate the closed-loop gain, anticipating a familiar outcome. Given $I_{e}=I_{\\text {in }}-I_{F}$ and $V_{\\text {out }}=I_{e} R_{0}$, we have\n\n$$\n\\begin{align*}\nV_{\\text {out }} & =\\left(I_{\\text {in }}-I_{F}\\right) R_{0}  \\tag{12.66}\\\\\n& =\\left(I_{\\text {in }}-K V_{\\text {out }}\\right) R_{0}, \\tag{12.67}\n\\end{align*}\n$$\n\ntherefore\n\n$$\n\\begin{equation*}\n\\frac{V_{\\text {out }}}{I_{\\text {in }}}=\\frac{R_{0}}{1+K R_{0}} . \\tag{12.68}\n\\end{equation*}\n$$\n\nFor the circuit depicted in Fig. 12.36(a), assuming $\\lambda=0$ and $R_{F}$ is significantly large, (a) demonstrate that the feedback is negative; (b) compute the open-loop gain; (c) determine the closed-loop gain.\n\n[^17]Solution (a) If $I_{\\text {in }}$ increases, $I_{D 1}$ decreases, causing $V_{X}$ to rise. Consequently, $V_{\\text {out }}$ decreases, thereby reducing $I_{R F}$. Since the currents injected by $I_{i n}$ and $R_{F}$ into the input node change in opposite directions, the feedback is negative.\n(b) To determine the open-loop gain, we consider the forward amplifier without the feedback network, leveraging the assumption that $R_{F}$ is very large [Fig. 12.36(b)].\nimage_name: (a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: S1, D: X, G: Vb}\nname: M2, type: NMOS, ports: {S: GND, D: Vout, G: X}\nname: RD1, type: Resistor, value: RD1, ports: {N1: VDD, N2: X}\nname: RD2, type: Resistor, value: RD2, ports: {N1: VDD, N2: Vout}\nname: RF, type: Resistor, value: RF, ports: {N1: S1, N2: Vout}\nname: iin, type: CurrentSource, value: iin, ports: {Np: GND, Nn: s1}\n]\nextrainfo: The circuit is a transimpedance amplifier with negative feedback. The feedback is provided through RF, and the amplifier consists of two NMOS transistors, M1 and M2. RD1 and RD2 are the load resistors. The input current iin is converted to an output voltage Vout.\nimage_name: (b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: S1, D: X, G: Vb}\nname: M2, type: NMOS, ports: {S: GND, D: Vout, G: X}\nname: RD1, type: Resistor, value: RD1, ports: {N1: VDD, N2: X}\nname: RD2, type: Resistor, value: RD2, ports: {N1: VDD, N2: Vout}\nname: iin, type: CurrentSource, value: iin, ports: {Np: GND, Nn: s1}\n]\nextrainfo: The circuit (b) represents an open-loop amplifier configuration. M1 and M2 are NMOS transistors, RD1 and RD2 are the load resistors, and RF is the feedback resistor. The input current source SI is connected to the source of M1 and the feedback resistor RF. The circuit is designed to analyze the open-loop gain by excluding the feedback network.\nimage_name: (c)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1, D: LOAD, G: Vb}\nname: RF, type: Resistor, value: RF, ports: {N1: s1, N2: Vout}\n]\nextrainfo: The circuit is a transimpedance amplifier with feedback. The feedback resistor RF connects the output to the input current source SI. The NMOS transistors M1 and M2 form the amplification stages, with M1's gate controlled by a bias voltage Vb and M2's gate connected to the node X. The resistors RD1 and RD2 are load resistors connected to the supply voltage VDD.\n\nFigure 12.36\nThe transimpedance gain is determined by the gain from $I_{\\text {in }}$ to $V_{X}$ (i.e., $R_{D 1}$) multiplied by the gain from $V_{X}$ to $V_{\\text {out }}$ (i.e., $-g_{m 2} R_{D 2}$):\n\n$$\n\\begin{equation*}\nR_{0}=R_{D 1}\\left(-g_{m 2} R_{D 2}\\right) \\tag{12.69}\n\\end{equation*}\n$$\n\nNote that this result assumes $R_{F} \\gg R_{D 2}$, ensuring the gain of the second stage remains $-g_{m 2} R_{D 2}$.\n(c) To derive the closed-loop gain, we first note that the current fed back by $R_{F}$ to the input is approximately $V_{\\text {out }} / R_{F}$ if $R_{F}$ is very large. To verify this, we consider a portion of the circuit as shown in Fig. 12.36(c) and write\n\n$$\n\\begin{equation*}\nI_{R F}=\\frac{V_{\\text {out }}}{R_{F}+\\frac{1}{g_{m 1}}} \\tag{12.70}\n\\end{equation*}\n$$\n\nThus, if $R_{F} \\gg 1 / g_{m 1}$, the returned current approximates $V_{\\text {out }} / R_{F}$. (We state \" $R_{F}$ acts as a current source.\") Hence, $K=-1 / R_{F}$, where the negative sign results from the direction of the current drawn by $R_{F}$ from the input node relative to Fig. 12.35. Forming $1+K R_{0}$, we express the closed-loop gain as\n\n$$\n\\begin{equation*}\n\\left.\\frac{V_{\\text {out }}}{I_{\\text {in }}}\\right|_{\\text {closed }}=\\frac{-g_{m 2} R_{D 1} R_{D 2}}{1+\\frac{g_{m 2} R_{D 1} R_{D 2}}{R_{F}}} \\tag{12.71}\n\\end{equation*}\n$$\n\nwhich simplifies to $-R_{F}$ if $g_{m 2} R_{D 1} R_{D 2} \\gg R_{F}$.\nIt is noteworthy that the assumption of a very large $R_{F}$ leads to two conditions in this example: $R_{F} \\gg R_{D 2}$ and $R_{F} \\gg 1 / g_{m 1}$. The former stems from output network calculations, while the latter from input network calculations. What occurs if either or both of these assumptions are invalid? We address this (fairly common) scenario in Section 12.7.\n\nWhat is the closed-loop gain if $R_{D 1} \\rightarrow \\infty$? How can this result be interpreted? (Hint: An infinite open-loop gain creates a virtual ground at the source of $M_{1}$.)\nimage_name: Figure 12.37\ndescription:\n[\nname: Ix, type: CurrentSource, ports: {Np: GND, Nn: Vx}\nname: Rin, type: Resistor, value: Rin, ports: {N1: Vx, N2: In(R0)}\nname: R0, type: OpAmp, value: R0, ports: {InP: In(R0), InN: GND, Out: Out(R0)}\nname: K, type: Other, ports: {N1: Out(R0), N2: In(R0)}\n]\nextrainfo: The circuit models a transimpedance amplifier with input current Ix and output voltage at Out(R0). The feedback network includes a block labeled K, indicating additional processing or feedback control.\n\nFigure 12.37 Calculation of input impedance.\n\nWe now proceed to determine the closed-loop I/O impedances. By modeling the forward system as an ideal transimpedance amplifier with a finite input impedance $R_{\\text {in }}$ (Section 12.3), we construct the test circuit shown in Fig. 12.37. Since the current through $R_{\\text {in }}$ equals $V_{X} / R_{\\text {in }}$ (why?), the forward amplifier generates an output voltage of $\\left(V_{X} / R_{\\text {in }}\\right) R_{0}$, hence\n\n$$\n\\begin{equation*}\nI_{F}=K \\frac{V_{X}}{R_{i n}} R_{0} \\tag{12.72}\n\\end{equation*}\n$$\n\nWriting a KCL at the input node yields\n\n$$\n\\begin{equation*}\nI_{X}-K \\frac{V_{X}}{R_{i n}} R_{0}=\\frac{V_{X}}{R_{i n}} \\tag{12.73}\n\\end{equation*}\n$$\n\ntherefore\n\n$$\n\\begin{equation*}\n\\frac{V_{X}}{I_{X}}=\\frac{R_{i n}}{1+K R_{0}} \\tag{12.74}\n\\end{equation*}\n$$\n\nThat is, a feedback loop that returns current to the input reduces the input impedance by a factor of one plus the loop gain, moving the circuit closer to an ideal \"current sensor.\"\n\n| Example <br> 12.19 | Determine the closed-loop input impedance of the circuit analyzed in Example 12.18. |\n| :--- | :--- |\n| Solution | The open-loop amplifier depicted in Fig. 12.36(b) exhibits an input impedance $R_{\\text {in }}=1 / g_{m 1}$ <br> due to the assumption that $R_{F}$ is very large. With $1+K R_{0}$ from the denominator of <br> Eq. (12.71), we obtain |\n| $\\qquad R_{\\text {in, closed }}=\\frac{1}{g_{m 1}} \\cdot \\frac{1}{1+\\frac{g_{m 2} R_{D 1} R_{D 2}}{R_{F}}}$. |  |\n\nExercise Explain what occurs if $R_{D 1} \\rightarrow \\infty$ and why.\n\nFrom our analysis of voltage-voltage feedback in Section 12.6.1, we hypothesize that voltage-current feedback also reduces the output impedance because a feedback loop \"regulating\" the output voltage tends to stabilize it despite variations in load impedance. By drawing the circuit as shown in Fig. 12.38, where the input current source is set to zero and $R_{\\text {out }}$ represents the open-loop output resistance, we observe that the feedback network generates a current $I_{F}=K V_{X}$. Upon flowing through the forward amplifier, this current translates to $V_{A}=-K V_{X} R_{0}$, hence\n\n$$\n\\begin{align*}\nI_{X} & =\\frac{V_{X}-V_{A}}{R_{\\text {out }}}  \\tag{12.76}\\\\\n& =\\frac{V_{X}+K V_{X} R_{0}}{R_{\\text {out }}} \\tag{12.77}\n\\end{align*}\n$$\n\nwhere the current drawn by the feedback network is neglected. Thus,\n\n$$\n\\begin{equation*}\n\\frac{V_{X}}{I_{X}}=\\frac{R_{\\text {out }}}{1+K R_{0}} \\tag{12.78}\n\\end{equation*}\n$$\n\nan anticipated result.\n\nExample Calculate the closed-loop output impedance of the circuit examined in Example 12.18.\n12.20\n\nSolution From the open-loop circuit in Fig. 12.36(b), we have $R_{\\text {out }} \\approx R_{D 2}$ due to the assumption that $R_{F}$ is very large. Using $1+K R_{0}$ from the denominator of Eq. (12.71), we get\n\n$$\n\\begin{equation*}\nR_{\\text {out }, \\text { closed }}=\\frac{R_{D 2}}{1+\\frac{g_{m 2} R_{D 1} R_{D 2}}{R_{F}}} \\tag{12.79}\n\\end{equation*}\n$$\n\nExercise Explain what happens if $R_{D 1} \\rightarrow \\infty$ and why."
},
{
    "text": "As illustrated in Fig. 12.35, this topology utilizes a transimpedance amplifier as the forward system, necessitating the feedback network to detect the output voltage and feed back a current to the subtractor. In our nomenclature, the first term in \"voltage-current feedback\" pertains to the quantity measured at the output, while the second term refers to the quantity fed back to the input. (Note that this terminology is non-standard.) Additionally, recall from Section 12.4 that such a feedback network must be configured in parallel with both the output and the input, ${ }^{9}$ ideally offering both infinite input impedance and infinite output impedance (why?). It is important to note that the feedback factor in this scenario has the dimension of conductance, as $K=I_{F} / V_{\\text {out }}$.\n\nimage_name: Figure 12.35 Voltage-current feedback\ndescription: The circuit employs a voltage-current feedback mechanism where the output current is sensed and fed back to the input. The feedback factor K is defined by the conductance (I_F / V_out). The closed-loop gain is derived as V_out / I_in = R_0 / (1 + K * R_0).\n\nFigure 12.35 Voltage-current feedback.\nWe initially calculate the closed-loop gain, anticipating a familiar outcome. Given $I_{e}=I_{\\text {in }}-I_{F}$ and $V_{\\text {out }}=I_{e} R_{0}$, we derive\n\n$$\n\\begin{align*}\nV_{\\text {out }} & =\\left(I_{\\text {in }}-I_{F}\\right) R_{0}  \\tag{12.66}\\\\\n& =\\left(I_{\\text {in }}-K V_{\\text {out }}\\right) R_{0}, \\tag{12.67}\n\\end{align*}\n$$\n\nresulting in\n\n$$\n\\begin{equation*}\n\\frac{V_{\\text {out }}}{I_{\\text {in }}}=\\frac{R_{0}}{1+K R_{0}} . \\tag{12.68}\n\\end{equation*}\n$$\n\nFor the circuit depicted in Fig. 12.36(a), assuming $\\lambda=0$ and $R_{F}$ is significantly large, (a) demonstrate that the feedback is negative; (b) compute the open-loop gain; (c) determine the closed-loop gain.\n\n[^17]Solution (a) If $I_{\\text {in }}$ increases, $I_{D 1}$ decreases, causing $V_{X}$ to rise. Consequently, $V_{\\text {out }}$ decreases, thereby reducing $I_{R F}$. Since the currents injected by $I_{i n}$ and $R_{F}$ into the input node change in opposing directions, the feedback is negative.\n(b) To calculate the open-loop gain, we consider the forward amplifier without the feedback network, leveraging the assumption that $R_{F}$ is very large [Fig. 12.36(b)].\nimage_name: (a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: S1, D: X, G: Vb}\nname: M2, type: NMOS, ports: {S: GND, D: Vout, G: X}\nname: RD1, type: Resistor, value: RD1, ports: {N1: VDD, N2: X}\nname: RD2, type: Resistor, value: RD2, ports: {N1: VDD, N2: Vout}\nname: RF, type: Resistor, value: RF, ports: {N1: S1, N2: Vout}\nname: iin, type: CurrentSource, value: iin, ports: {Np: GND, Nn: s1}\n]\nextrainfo: The circuit is a transimpedance amplifier with negative feedback. The feedback is provided through RF, and the amplifier consists of two NMOS transistors M1 and M2. RD1 and RD2 are the load resistors. The input current iin is converted to an output voltage Vout.\nimage_name: (b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: S1, D: X, G: Vb}\nname: M2, type: NMOS, ports: {S: GND, D: Vout, G: X}\nname: RD1, type: Resistor, value: RD1, ports: {N1: VDD, N2: X}\nname: RD2, type: Resistor, value: RD2, ports: {N1: VDD, N2: Vout}\nname: iin, type: CurrentSource, value: iin, ports: {Np: GND, Nn: s1}\n]\nextrainfo: The circuit (b) is an open-loop amplifier configuration. M1 and M2 are NMOS transistors, RD1 and RD2 are the load resistors, and RF is the feedback resistor. The input current source SI is connected to the source of M1 and the feedback resistor RF. The circuit is designed to analyze the open-loop gain by considering the forward amplifier without the feedback network.\nimage_name: (c)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1, D: LOAD, G: Vb}\nname: RF, type: Resistor, value: RF, ports: {N1: s1, N2: Vout}\n]\nextrainfo: The circuit is a transimpedance amplifier with feedback. The feedback resistor RF connects the output to the input current source SI. The NMOS transistors M1 and M2 form the amplification stages, with M1's gate controlled by a bias voltage Vb and M2's gate connected to the node X. The resistors RD1 and RD2 are load resistors connected to the supply voltage VDD.\n\nFigure 12.36\nThe transimpedance gain is determined by the gain from $I_{\\text {in }}$ to $V_{X}$ (i.e., $R_{D 1}$) multiplied by the gain from $V_{X}$ to $V_{\\text {out }}$ (i.e., $-g_{m 2} R_{D 2}$):\n\n$$\n\\begin{equation*}\nR_{0}=R_{D 1}\\left(-g_{m 2} R_{D 2}\\right) \\tag{12.69}\n\\end{equation*}\n$$\n\nNote that this result assumes $R_{F} \\gg R_{D 2}$, ensuring the gain of the second stage remains $-g_{m 2} R_{D 2}$.\n(c) To find the closed-loop gain, we first note that the current returned by $R_{F}$ to the input is approximately $V_{\\text {out }} / R_{F}$ if $R_{F}$ is very large. To verify this, we consider a segment of the circuit as shown in Fig. 12.36(c) and write\n\n$$\n\\begin{equation*}\nI_{R F}=\\frac{V_{\\text {out }}}{R_{F}+\\frac{1}{g_{m 1}}} \\tag{12.70}\n\\end{equation*}\n$$\n\nThus, if $R_{F} \\gg 1 / g_{m 1}$, the returned current is approximately $V_{\\text {out }} / R_{F}$. (We say \" $R_{F}$ acts as a current source.\") Hence, $K=-1 / R_{F}$, where the negative sign arises from the direction of the current drawn by $R_{F}$ from the input node relative to that in Fig. 12.35. Forming $1+K R_{0}$, we express the closed-loop gain as\n\n$$\n\\begin{equation*}\n\\left.\\frac{V_{\\text {out }}}{I_{\\text {in }}}\\right|_{\\text {closed }}=\\frac{-g_{m 2} R_{D 1} R_{D 2}}{1+\\frac{g_{m 2} R_{D 1} R_{D 2}}{R_{F}}} \\tag{12.71}\n\\end{equation*}\n$$\n\nwhich simplifies to $-R_{F}$ if $g_{m 2} R_{D 1} R_{D 2} \\gg R_{F}$.\nIt is noteworthy that the assumption of a very large $R_{F}$ translates to two conditions in this example: $R_{F} \\gg R_{D 2}$ and $R_{F} \\gg 1 / g_{m 1}$. The former arises from output network calculations, while the latter from input network calculations. What if one or both of these assumptions are invalid? We address this (relatively common) scenario in Section 12.7.\n\nWhat is the closed-loop gain if $R_{D 1} \\rightarrow \\infty$? How can this result be interpreted? (Hint: the infinite open-loop gain creates a virtual ground node at the source of $M_{1}$.)\nimage_name: Figure 12.37\ndescription:\n[\nname: Ix, type: CurrentSource, ports: {Np: GND, Nn: Vx}\nname: Rin, type: Resistor, value: Rin, ports: {N1: Vx, N2: In(R0)}\nname: R0, type: OpAmp, value: R0, ports: {InP: In(R0), InN: GND, Out: Out(R0)}\nname: K, type: Other, ports: {N1: Out(R0), N2: In(R0)}\n]\nextrainfo: The circuit models a transimpedance amplifier with input current Ix and output voltage at Out(R0). The feedback network includes a block labeled K, indicating additional processing or feedback control.\n\nFigure 12.37 Calculation of input impedance.\n\nWe now proceed to determine the closed-loop I/O impedances. By modeling the forward system as an ideal transimpedance amplifier with a finite input impedance $R_{\\text {in }}$ (Section 12.3), we construct the test circuit shown in Fig. 12.37. Since the current through $R_{\\text {in }}$ equals $V_{X} / R_{\\text {in }}$ (why?), the forward amplifier generates an output voltage of $\\left(V_{X} / R_{\\text {in }}\\right) R_{0}$, hence\n\n$$\n\\begin{equation*}\nI_{F}=K \\frac{V_{X}}{R_{i n}} R_{0} \\tag{12.72}\n\\end{equation*}\n$$\n\nWriting a KCL at the input node yields\n\n$$\n\\begin{equation*}\nI_{X}-K \\frac{V_{X}}{R_{i n}} R_{0}=\\frac{V_{X}}{R_{i n}} \\tag{12.73}\n\\end{equation*}\n$$\n\nresulting in\n\n$$\n\\begin{equation*}\n\\frac{V_{X}}{I_{X}}=\\frac{R_{i n}}{1+K R_{0}} \\tag{12.74}\n\\end{equation*}\n$$\n\nThus, a feedback loop that returns current to the input reduces the input impedance by a factor of one plus the loop gain, bringing the circuit closer to an ideal \"current sensor.\"\n\n| Example <br> 12.19 | Determine the closed-loop input impedance of the circuit analyzed in Example 12.18. |\n| :--- | :--- |\n| Solution | The open-loop amplifier depicted in Fig. 12.36(b) exhibits an input impedance $R_{\\text {in }}=1 / g_{m 1}$ <br> due to the assumption that $R_{F}$ is very large. With $1+K R_{0}$ from the denominator of <br> Eq. (12.71), we obtain |\n| $\\qquad R_{\\text {in, closed }}=\\frac{1}{g_{m 1}} \\cdot \\frac{1}{1+\\frac{g_{m 2} R_{D 1} R_{D 2}}{R_{F}}}$. |  |\n\nExercise Explain what occurs if $R_{D 1} \\rightarrow \\infty$ and why.\n\nFrom our analysis of voltage-voltage feedback in Section 12.6.1, we hypothesize that voltage-current feedback also reduces the output impedance because a feedback loop \"regulating\" the output voltage tends to stabilize it despite variations in load impedance. By drawing the circuit as shown in Fig. 12.38, where the input current source is set to zero and $R_{\\text {out }}$ models the open-loop output resistance, we observe that the feedback network produces a current $I_{F}=K V_{X}$. When this current flows through the forward amplifier, it translates to $V_{A}=-K V_{X} R_{0}$, hence\n\n$$\n\\begin{align*}\nI_{X} & =\\frac{V_{X}-V_{A}}{R_{\\text {out }}}  \\tag{12.76}\\\\\n& =\\frac{V_{X}+K V_{X} R_{0}}{R_{\\text {out }}} \\tag{12.77}\n\\end{align*}\n$$\n\nwhere the current drawn by the feedback network is neglected. Thus,\n\n$$\n\\begin{equation*}\n\\frac{V_{X}}{I_{X}}=\\frac{R_{\\text {out }}}{1+K R_{0}} \\tag{12.78}\n\\end{equation*}\n$$\n\nan anticipated result.\n\nExample Calculate the closed-loop output impedance of the circuit examined in Example 12.18.\n12.20\n\nSolution From the open-loop circuit in Fig. 12.36(b), we have $R_{\\text {out }} \\approx R_{D 2}$ due to the assumption that $R_{F}$ is very large. Using $1+K R_{0}$ from the denominator of Eq. (12.71), we get\n\n$$\n\\begin{equation*}\nR_{\\text {out }, \\text { closed }}=\\frac{R_{D 2}}{1+\\frac{g_{m 2} R_{D 1} R_{D 2}}{R_{F}}} \\tag{12.79}\n\\end{equation*}\n$$\n\nExercise Explain the effects if $R_{D 1} \\rightarrow \\infty$ and why."
},
{
    "text": "As illustrated in Fig. 12.35, this configuration utilizes a transimpedance amplifier as the forward system, necessitating the feedback network to detect the output voltage and feed back a current to the subtractor. In our terminology, the first term in \"voltage-current feedback\" pertains to the quantity measured at the output, while the second term refers to the quantity returned to the input. (Note that this terminology is non-standard.) Additionally, recall from Section 12.4 that such a feedback network must be connected in parallel with both the output and the input, ${ }^{9}$ ideally offering both infinite input impedance and infinite output impedance (explain why?). Note that in this scenario, the feedback factor has the dimension of conductance, given by $K=I_{F} / V_{\\text {out }}$.\n\nimage_name:Figure 12.35 Voltage-current feedback\ndescription:The circuit implements a voltage-current feedback mechanism where the output current is sensed and fed back to the input. The feedback factor K is characterized by the conductance (I_F / V_out). The closed-loop gain is derived as V_out / I_in = R_0 / (1 + K * R_0).\n\nFigure 12.35 Voltage-current feedback.\nWe begin by calculating the closed-loop gain, anticipating a familiar outcome. Given $I_{e}=I_{\\text {in }}-I_{F}$ and $V_{\\text {out }}=I_{e} R_{0}$, we derive\n\n$$\n\\begin{align*}\nV_{\\text {out }} & =\\left(I_{\\text {in }}-I_{F}\\right) R_{0}  \\tag{12.66}\\\\\n& =\\left(I_{\\text {in }}-K V_{\\text {out }}\\right) R_{0}, \\tag{12.67}\n\\end{align*}\n$$\n\nresulting in\n\n$$\n\\begin{equation*}\n\\frac{V_{\\text {out }}}{I_{\\text {in }}}=\\frac{R_{0}}{1+K R_{0}} . \\tag{12.68}\n\\end{equation*}\n$$\n\nFor the circuit shown in Fig. 12.36(a), assuming $\\lambda=0$ and $R_{F}$ is extremely large, (a) demonstrate that the feedback is negative; (b) compute the open-loop gain; (c) calculate the closed-loop gain.\n\n[^17]Solution (a) If $I_{\\text {in }}$ increases, $I_{D 1}$ decreases, causing $V_{X}$ to rise. Consequently, $V_{\\text {out }}$ decreases, thereby reducing $I_{R F}$. Since the currents injected by $I_{i n}$ and $R_{F}$ into the input node change in opposite directions, the feedback is negative.\n(b) To determine the open-loop gain, we consider the forward amplifier without the feedback network, leveraging the assumption that $R_{F}$ is very large [Fig. 12.36(b)].\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: S1, D: X, G: Vb}\nname: M2, type: NMOS, ports: {S: GND, D: Vout, G: X}\nname: RD1, type: Resistor, value: RD1, ports: {N1: VDD, N2: X}\nname: RD2, type: Resistor, value: RD2, ports: {N1: VDD, N2: Vout}\nname: RF, type: Resistor, value: RF, ports: {N1: S1, N2: Vout}\nname: iin, type: CurrentSource, value: iin, ports: {Np: GND, Nn: s1}\n]\nextrainfo:The circuit is a transimpedance amplifier with negative feedback. The feedback is provided through RF, and the amplifier consists of two NMOS transistors M1 and M2. RD1 and RD2 are the load resistors. The input current iin is converted to an output voltage Vout.\nimage_name:(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: S1, D: X, G: Vb}\nname: M2, type: NMOS, ports: {S: GND, D: Vout, G: X}\nname: RD1, type: Resistor, value: RD1, ports: {N1: VDD, N2: X}\nname: RD2, type: Resistor, value: RD2, ports: {N1: VDD, N2: Vout}\nname: iin, type: CurrentSource, value: iin, ports: {Np: GND, Nn: s1}\n]\nextrainfo:The circuit (b) is an open-loop amplifier configuration. M1 and M2 are NMOS transistors, RD1 and RD2 are the load resistors, and RF is the feedback resistor. The input current source SI is connected to the source of M1 and the feedback resistor RF. The circuit is designed to analyze the open-loop gain by considering the forward amplifier without the feedback network.\nimage_name:(c)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1, D: LOAD, G: Vb}\nname: RF, type: Resistor, value: RF, ports: {N1: s1, N2: Vout}\n]\nextrainfo:The circuit is a transimpedance amplifier with feedback. The feedback resistor RF connects the output to the input current source SI. The NMOS transistors M1 and M2 form the amplification stages, with M1's gate controlled by a bias voltage Vb and M2's gate connected to the node X. The resistors RD1 and RD2 are load resistors connected to the supply voltage VDD.\n\nFigure 12.36\nThe transimpedance gain is determined by the gain from $I_{\\text {in }}$ to $V_{X}$ (i.e., $R_{D 1}$ ) multiplied by the gain from $V_{X}$ to $V_{\\text {out }}$ (i.e., $-g_{m 2} R_{D 2}$ ):\n\n$$\n\\begin{equation*}\nR_{0}=R_{D 1}\\left(-g_{m 2} R_{D 2}\\right) \\tag{12.69}\n\\end{equation*}\n$$\n\nNote that this result assumes $R_{F} \\gg R_{D 2}$, ensuring the gain of the second stage remains $-g_{m 2} R_{D 2}$.\n(c) To derive the closed-loop gain, we first note that the current returned by $R_{F}$ to the input is approximately $V_{\\text {out }} / R_{F}$ if $R_{F}$ is very large. To validate this, we examine a portion of the circuit as shown in Fig. 12.36(c) and write\n\n$$\n\\begin{equation*}\nI_{R F}=\\frac{V_{\\text {out }}}{R_{F}+\\frac{1}{g_{m 1}}} \\tag{12.70}\n\\end{equation*}\n$$\n\nThus, if $R_{F} \\gg 1 / g_{m 1}$, the returned current approximates $V_{\\text {out }} / R_{F}$. (We state \" $R_{F}$ operates as a current source.\") Hence, $K=-1 / R_{F}$, where the negative sign arises due to the direction of the current drawn by $R_{F}$ from the input node relative to Fig. 12.35. Forming $1+K R_{0}$, we express the closed-loop gain as\n\n$$\n\\begin{equation*}\n\\left.\\frac{V_{\\text {out }}}{I_{\\text {in }}}\\right|_{\\text {closed }}=\\frac{-g_{m 2} R_{D 1} R_{D 2}}{1+\\frac{g_{m 2} R_{D 1} R_{D 2}}{R_{F}}} \\tag{12.71}\n\\end{equation*}\n$$\n\nwhich simplifies to $-R_{F}$ if $g_{m 2} R_{D 1} R_{D 2} \\gg R_{F}$.\nIt is noteworthy that the assumption of a very large $R_{F}$ translates to two conditions in this example: $R_{F} \\gg R_{D 2}$ and $R_{F} \\gg 1 / g_{m 1}$. The former stems from output network calculations, while the latter from input network calculations. What occurs if either or both of these assumptions are invalid? We address this (fairly common) scenario in Section 12.7.\n\nWhat is the closed-loop gain if $R_{D 1} \\rightarrow \\infty$ ? How can this result be interpreted? (Hint: an infinite open-loop gain creates a virtual ground node at the source of $M_{1}$.)\nimage_name:Figure 12.37\ndescription:\n[\nname: Ix, type: CurrentSource, ports: {Np: GND, Nn: Vx}\nname: Rin, type: Resistor, value: Rin, ports: {N1: Vx, N2: In(R0)}\nname: R0, type: OpAmp, value: R0, ports: {InP: In(R0), InN: GND, Out: Out(R0)}\nname: K, type: Other, ports: {N1: Out(R0), N2: In(R0)}\n]\nextrainfo:The circuit models a transimpedance amplifier with input current Ix and output voltage at Out(R0). The feedback network includes a block labeled K, indicating additional processing or feedback control.\n\nFigure 12.37 Calculation of input impedance.\n\nWe now proceed to determine the closed-loop I/O impedances. By modeling the forward system as an ideal transimpedance amplifier with a finite input impedance $R_{\\text {in }}$ (Section 12.3), we construct the test circuit shown in Fig. 12.37. Since the current through $R_{\\text {in }}$ equals $V_{X} / R_{\\text {in }}$ (explain why?), the forward amplifier generates an output voltage of $\\left(V_{X} / R_{\\text {in }}\\right) R_{0}$, hence\n\n$$\n\\begin{equation*}\nI_{F}=K \\frac{V_{X}}{R_{i n}} R_{0} \\tag{12.72}\n\\end{equation*}\n$$\n\nWriting a KCL at the input node yields\n\n$$\n\\begin{equation*}\nI_{X}-K \\frac{V_{X}}{R_{i n}} R_{0}=\\frac{V_{X}}{R_{i n}} \\tag{12.73}\n\\end{equation*}\n$$\n\nresulting in\n\n$$\n\\begin{equation*}\n\\frac{V_{X}}{I_{X}}=\\frac{R_{i n}}{1+K R_{0}} \\tag{12.74}\n\\end{equation*}\n$$\n\nThat is, a feedback loop that returns current to the input reduces the input impedance by a factor of one plus the loop gain, bringing the circuit closer to an ideal \"current sensor.\"\n\n| Example <br> 12.19 | Determine the closed-loop input impedance of the circuit analyzed in Example 12.18. |\n| :--- | :--- |\n| Solution | The open-loop amplifier depicted in Fig. 12.36(b) exhibits an input impedance $R_{\\text {in }}=1 / g_{m 1}$ <br> due to the assumption that $R_{F}$ is very large. Using $1+K R_{0}$ from the denominator of <br> Eq. (12.71), we obtain |\n| $\\qquad R_{\\text {in, closed }}=\\frac{1}{g_{m 1}} \\cdot \\frac{1}{1+\\frac{g_{m 2} R_{D 1} R_{D 2}}{R_{F}}}$. |  |\n\nExercise Explain what occurs if $R_{D 1} \\rightarrow \\infty$ and why.\n\nFrom our analysis of voltage-voltage feedback in Section 12.6.1, we hypothesize that voltage-current feedback also reduces the output impedance because a feedback loop \"regulating\" the output voltage tends to stabilize it despite variations in load impedance. By drawing the circuit as shown in Fig. 12.38, where the input current source is set to zero and $R_{\\text {out }}$ represents the open-loop output resistance, we observe that the feedback network generates a current $I_{F}=K V_{X}$. When this current flows through the forward amplifier, it translates to $V_{A}=-K V_{X} R_{0}$, hence\n\n$$\n\\begin{align*}\nI_{X} & =\\frac{V_{X}-V_{A}}{R_{\\text {out }}}  \\tag{12.76}\\\\\n& =\\frac{V_{X}+K V_{X} R_{0}}{R_{\\text {out }}} \\tag{12.77}\n\\end{align*}\n$$\n\nwhere the current drawn by the feedback network is neglected. Thus,\n\n$$\n\\begin{equation*}\n\\frac{V_{X}}{I_{X}}=\\frac{R_{\\text {out }}}{1+K R_{0}} \\tag{12.78}\n\\end{equation*}\n$$\n\nan anticipated result.\n\nExample Calculate the closed-loop output impedance of the circuit examined in Example 12.18.\n12.20\n\nSolution From the open-loop circuit in Fig. 12.36(b), we have $R_{\\text {out }} \\approx R_{D 2}$ due to the assumption that $R_{F}$ is very large. Using $1+K R_{0}$ from the denominator of Eq. (12.71), we obtain\n\n$$\n\\begin{equation*}\nR_{\\text {out }, \\text { closed }}=\\frac{R_{D 2}}{1+\\frac{g_{m 2} R_{D 1} R_{D 2}}{R_{F}}} \\tag{12.79}\n\\end{equation*}\n$$\n\nExercise Explain what happens if $R_{D 1} \\rightarrow \\infty$ and why."
},
{
    "text": "As illustrated in Fig. 12.35, this configuration utilizes a transimpedance amplifier as the forward system, necessitating the feedback network to sense the output voltage and return a current to the subtractor. In our terminology, the first term in \"voltage-current feedback\" pertains to the quantity measured at the output, while the second term refers to the quantity fed back to the input. (Note that this terminology is non-standard.) Additionally, recall from Section 12.4 that such a feedback network must be connected in parallel with both the output and the input, ideally providing both infinite input impedance and infinite output impedance (explain why?). Note that in this scenario, the feedback factor has the dimension of conductance, as $K=I_{F} / V_{\\text {out }}$.\n\nimage_name: Figure 12.35 Voltage-current feedback\ndescription: The circuit employs a voltage-current feedback mechanism where the output current is sensed and fed back to the input. The feedback factor K is defined by the conductance (I_F / V_out). The closed-loop gain is derived as V_out / I_in = R_0 / (1 + K * R_0).\n\nFigure 12.35 Voltage-current feedback.\nWe initially calculate the closed-loop gain, anticipating a familiar outcome. Given $I_{e}=I_{\\text {in }}-I_{F}$ and $V_{\\text {out }}=I_{e} R_{0}$, we derive\n\n$$\n\\begin{align*}\nV_{\\text {out }} & =\\left(I_{\\text {in }}-I_{F}\\right) R_{0}  \\tag{12.66}\\\\\n& =\\left(I_{\\text {in }}-K V_{\\text {out }}\\right) R_{0}, \\tag{12.67}\n\\end{align*}\n$$\n\nresulting in\n\n$$\n\\begin{equation*}\n\\frac{V_{\\text {out }}}{I_{\\text {in }}}=\\frac{R_{0}}{1+K R_{0}} . \\tag{12.68}\n\\end{equation*}\n$$\n\nFor the circuit depicted in Fig. 12.36(a), assuming $\\lambda=0$ and $R_{F}$ is significantly large, (a) demonstrate that the feedback is negative; (b) compute the open-loop gain; (c) determine the closed-loop gain.\n\n[^17]Solution (a) If $I_{\\text {in }}$ increases, $I_{D 1}$ decreases, causing $V_{X}$ to rise. Consequently, $V_{\\text {out }}$ decreases, thereby reducing $I_{R F}$. Since the currents injected by $I_{i n}$ and $R_{F}$ into the input node change in opposite directions, the feedback is negative.\n(b) To compute the open-loop gain, we consider the forward amplifier without the feedback network, leveraging the assumption that $R_{F}$ is very large [Fig. 12.36(b)].\nimage_name: (a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: S1, D: X, G: Vb}\nname: M2, type: NMOS, ports: {S: GND, D: Vout, G: X}\nname: RD1, type: Resistor, value: RD1, ports: {N1: VDD, N2: X}\nname: RD2, type: Resistor, value: RD2, ports: {N1: VDD, N2: Vout}\nname: RF, type: Resistor, value: RF, ports: {N1: S1, N2: Vout}\nname: iin, type: CurrentSource, value: iin, ports: {Np: GND, Nn: s1}\n]\nextrainfo: The circuit is a transimpedance amplifier with negative feedback. The feedback is provided through RF, and the amplifier consists of two NMOS transistors M1 and M2. RD1 and RD2 are the load resistors. The input current iin is converted to an output voltage Vout.\nimage_name: (b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: S1, D: X, G: Vb}\nname: M2, type: NMOS, ports: {S: GND, D: Vout, G: X}\nname: RD1, type: Resistor, value: RD1, ports: {N1: VDD, N2: X}\nname: RD2, type: Resistor, value: RD2, ports: {N1: VDD, N2: Vout}\nname: iin, type: CurrentSource, value: iin, ports: {Np: GND, Nn: s1}\n]\nextrainfo: The circuit (b) is an open-loop amplifier configuration. M1 and M2 are NMOS transistors, RD1 and RD2 are the load resistors, and RF is the feedback resistor. The input current source SI is connected to the source of M1 and the feedback resistor RF. The circuit is designed to analyze the open-loop gain by considering the forward amplifier without the feedback network.\nimage_name: (c)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1, D: LOAD, G: Vb}\nname: RF, type: Resistor, value: RF, ports: {N1: s1, N2: Vout}\n]\nextrainfo: The circuit is a transimpedance amplifier with feedback. The feedback resistor RF connects the output to the input current source SI. The NMOS transistors M1 and M2 form the amplification stages, with M1's gate controlled by a bias voltage Vb and M2's gate connected to the node X. The resistors RD1 and RD2 are load resistors connected to the supply voltage VDD.\n\nFigure 12.36\nThe transimpedance gain is determined by the gain from $I_{\\text {in }}$ to $V_{X}$ (i.e., $R_{D 1}$) multiplied by the gain from $V_{X}$ to $V_{\\text {out }}$ (i.e., $-g_{m 2} R_{D 2}$):\n\n$$\n\\begin{equation*}\nR_{0}=R_{D 1}\\left(-g_{m 2} R_{D 2}\\right) \\tag{12.69}\n\\end{equation*}\n$$\n\nNote that this result assumes $R_{F} \\gg R_{D 2}$, ensuring the gain of the second stage remains $-g_{m 2} R_{D 2}$.\n(c) To derive the closed-loop gain, we first note that the current returned by $R_{F}$ to the input is approximately $V_{\\text {out }} / R_{F}$ if $R_{F}$ is very large. To validate this, we examine a portion of the circuit as shown in Fig. 12.36(c) and write\n\n$$\n\\begin{equation*}\nI_{R F}=\\frac{V_{\\text {out }}}{R_{F}+\\frac{1}{g_{m 1}}} \\tag{12.70}\n\\end{equation*}\n$$\n\nThus, if $R_{F} \\gg 1 / g_{m 1}$, the returned current approximates $V_{\\text {out }} / R_{F}$. (We assert that \" $R_{F}$ operates as a current source.\") Hence, $K=-1 / R_{F}$, where the negative sign arises from the direction of the current drawn by $R_{F}$ from the input node relative to Fig. 12.35. Forming $1+K R_{0}$, we express the closed-loop gain as\n\n$$\n\\begin{equation*}\n\\left.\\frac{V_{\\text {out }}}{I_{\\text {in }}}\\right|_{\\text {closed }}=\\frac{-g_{m 2} R_{D 1} R_{D 2}}{1+\\frac{g_{m 2} R_{D 1} R_{D 2}}{R_{F}}} \\tag{12.71}\n\\end{equation*}\n$$\n\nwhich simplifies to $-R_{F}$ if $g_{m 2} R_{D 1} R_{D 2} \\gg R_{F}$.\nIt is noteworthy that the assumption of a very large $R_{F}$ translates to two conditions in this example: $R_{F} \\gg R_{D 2}$ and $R_{F} \\gg 1 / g_{m 1}$. The former stems from output network calculations, while the latter from input network calculations. What occurs if either or both of these assumptions are invalid? We address this (common) scenario in Section 12.7.\n\nWhat is the closed-loop gain if $R_{D 1} \\rightarrow \\infty$? How can this result be interpreted? (Hint: an infinite open-loop gain creates a virtual ground at the source of $M_{1}$.)\nimage_name: Figure 12.37\ndescription:\n[\nname: Ix, type: CurrentSource, ports: {Np: GND, Nn: Vx}\nname: Rin, type: Resistor, value: Rin, ports: {N1: Vx, N2: In(R0)}\nname: R0, type: OpAmp, value: R0, ports: {InP: In(R0), InN: GND, Out: Out(R0)}\nname: K, type: Other, ports: {N1: Out(R0), N2: In(R0)}\n]\nextrainfo: The circuit models a transimpedance amplifier with input current Ix and output voltage at Out(R0). The feedback network includes a block labeled K, indicating additional processing or feedback control.\n\nFigure 12.37 Calculation of input impedance.\n\nWe now proceed to determine the closed-loop I/O impedances. By modeling the forward system as an ideal transimpedance amplifier with a finite input impedance $R_{\\text {in }}$ (Section 12.3), we construct the test circuit shown in Fig. 12.37. Since the current through $R_{\\text {in }}$ equals $V_{X} / R_{\\text {in }}$ (explain why?), the forward amplifier generates an output voltage of $\\left(V_{X} / R_{\\text {in }}\\right) R_{0}$, hence\n\n$$\n\\begin{equation*}\nI_{F}=K \\frac{V_{X}}{R_{i n}} R_{0} \\tag{12.72}\n\\end{equation*}\n$$\n\nWriting a KCL at the input node yields\n\n$$\n\\begin{equation*}\nI_{X}-K \\frac{V_{X}}{R_{i n}} R_{0}=\\frac{V_{X}}{R_{i n}} \\tag{12.73}\n\\end{equation*}\n$$\n\nresulting in\n\n$$\n\\begin{equation*}\n\\frac{V_{X}}{I_{X}}=\\frac{R_{i n}}{1+K R_{0}} \\tag{12.74}\n\\end{equation*}\n$$\n\nThus, a feedback loop that returns current to the input reduces the input impedance by a factor of one plus the loop gain, bringing the circuit closer to an ideal \"current sensor.\"\n\n| Example <br> 12.19 | Determine the closed-loop input impedance of the circuit analyzed in Example 12.18. |\n| :--- | :--- |\n| Solution | The open-loop amplifier depicted in Fig. 12.36(b) exhibits an input impedance $R_{\\text {in }}=1 / g_{m 1}$ <br> due to the assumption that $R_{F}$ is very large. With $1+K R_{0}$ from the denominator of <br> Eq. (12.71), we obtain |\n| $\\qquad R_{\\text {in, closed }}=\\frac{1}{g_{m 1}} \\cdot \\frac{1}{1+\\frac{g_{m 2} R_{D 1} R_{D 2}}{R_{F}}}$. |  |\n\nExercise Explain what occurs if $R_{D 1} \\rightarrow \\infty$ and why.\n\nFrom our examination of voltage-voltage feedback in Section 12.6.1, we hypothesize that voltage-current feedback also reduces the output impedance because a feedback loop \"regulating\" the output voltage tends to stabilize it despite variations in load impedance. By drawing the circuit as shown in Fig. 12.38, where the input current source is set to zero and $R_{\\text {out }}$ models the open-loop output resistance, we observe that the feedback network generates a current of $I_{F}=K V_{X}$. When this current flows through the forward amplifier, it translates to $V_{A}=-K V_{X} R_{0}$, hence\n\n$$\n\\begin{align*}\nI_{X} & =\\frac{V_{X}-V_{A}}{R_{\\text {out }}}  \\tag{12.76}\\\\\n& =\\frac{V_{X}+K V_{X} R_{0}}{R_{\\text {out }}} \\tag{12.77}\n\\end{align*}\n$$\n\nwhere the current drawn by the feedback network is neglected. Thus,\n\n$$\n\\begin{equation*}\n\\frac{V_{X}}{I_{X}}=\\frac{R_{\\text {out }}}{1+K R_{0}} \\tag{12.78}\n\\end{equation*}\n$$\n\nan anticipated outcome.\n\nExample Calculate the closed-loop output impedance of the circuit analyzed in Example 12.18.\n12.20\n\nSolution From the open-loop circuit in Fig. 12.36(b), we have $R_{\\text {out }} \\approx R_{D 2}$ due to the assumption that $R_{F}$ is very large. Using $1+K R_{0}$ from the denominator of Eq. (12.71), we obtain\n\n$$\n\\begin{equation*}\nR_{\\text {out }, \\text { closed }}=\\frac{R_{D 2}}{1+\\frac{g_{m 2} R_{D 1} R_{D 2}}{R_{F}}} \\tag{12.79}\n\\end{equation*}\n$$\n\nExercise Explain what happens if $R_{D 1} \\rightarrow \\infty$ and why."
}
]