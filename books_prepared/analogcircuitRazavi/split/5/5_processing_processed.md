# Bipolar Amplifiers

With the physics and operation of bipolar transistors described in Chapter 4, we now deal with amplifier circuits employing such devices. While the field of microelectronics involves much more than amplifiers, our study of cellphones and digital cameras in Chapter 1 indicates the extremely wide usage of amplification, motivating us to master the analysis and design of such building blocks. This chapter proceeds as follows.

General Concepts
- Input and Output Impedances
- Biasing
- DC and Small-Signal Analysis
Operating Point Analysis
- Simple Biasing
- Emitter Degeneration
- Self-Biasing
- Biasing of PNP Devices

Amplifier Topologies

- Common-Emitter Stage
- Common-Base Stage
- Emitter Follower

Building the foundation for the remainder of this book, this chapter is quite long. Most of the concepts introduced here are invoked again in Chapter 7 (MOS amplifiers). The reader is therefore encouraged to take frequent breaks and absorb the material in small doses.

## 5.1 GENERAL CONSIDERATIONS

Recall from Chapter 4 that a voltage-controlled current source along with a load resistor can form an amplifier. In general, an amplifier produces an output (voltage or current) that is a magnified version of the input (voltage or current). Since most electronic circuits both sense and produce voltage quantities, ${ }^{1}$ our discussion primarily centers around "voltage amplifiers" and the concept of "voltage gain," $v_{\text {out }} / v_{\text {in }}$.

What other aspects of an amplifier's performance are important? Three parameters that readily come to mind are (1) power dissipation (e.g., because it determines the battery lifetime in a cellphone or a digital camera); (2) speed (e.g., some amplifiers in a cellphone or analog-to-digital converters in a digital camera must operate at high frequencies);

[^1](3) noise (e.g., the front-end amplifier in a cellphone or a digital camera processes small signals and must introduce negligible noise of its own).

### 5.1.1 Input and Output Impedances

In addition to the above parameters, the input and output (I/O) impedances of an amplifier play a critical role in its capability to interface with preceding and following stages. To understand this concept, let us first determine the I/O impedances of an ideal voltage amplifier. At the input, the circuit must operate as a voltmeter, i.e., sense a voltage without disturbing (loading) the preceding stage. The ideal input impedance is therefore infinite. At the output, the circuit must behave as a voltage source, i.e., deliver a constant signal level to any load impedance. Thus, the ideal output impedance is equal to zero.

In reality, the I/O impedances of a voltage amplifier may considerably depart from the ideal values, requiring attention to the interface with other stages. The following example illustrates the issue.

An amplifier with a voltage gain of 10 senses a signal generated by a microphone and applies the amplified output to a speaker [Fig. 5.1(a)]. Assume the microphone can be modeled with a voltage source having a $10-\mathrm{mV}$ peak-to-peak signal and a series resistance of $200 \Omega$. Also assume the speaker can be represented by an $8-\Omega$ resistor.
image_name:(a)
description:The system block diagram (a) illustrates a simple audio system consisting of three main components: a microphone, an amplifier, and a speaker.

1. **Main Components:**
- **Microphone:** This is the input device modeled as a voltage source with a peak-to-peak signal of 10 mV and a series resistance of 200 Ω. It converts sound waves into electrical signals.
- **Amplifier:** The amplifier has a voltage gain (A_v) of 10. It boosts the signal received from the microphone to a higher voltage level before sending it to the speaker.
- **Speaker:** Represented by an 8 Ω resistor, the speaker acts as the output device, converting the amplified electrical signal back into sound waves.

2. **Flow of Information or Control:**
- The signal flow begins at the microphone, which senses sound and converts it into a 10 mV electrical signal. This signal, along with the series resistance, is fed into the amplifier.
- The amplifier increases the voltage of the signal by a factor of 10, preparing it for output to the speaker.
- The amplified signal is then directed to the speaker, which outputs the sound.

3. **Labels, Annotations, and Key Indicators:**
- The microphone's voltage source is labeled with a peak-to-peak value of 10 mV.
- The series resistance of the microphone is labeled as 200 Ω.
- The amplifier's gain is indicated as A_v = 10.
- The speaker's resistance is noted as 8 Ω.

4. **Overall System Function:**
- The primary function of this system is to capture audio signals through the microphone, amplify these signals using the amplifier, and then output the amplified signals as sound through the speaker. The arrangement of these components ensures that the initially weak signal from the microphone is sufficiently amplified to drive the speaker effectively.
image_name:(b)
description:
[
name: Vm, type: VoltageSource, value: 10mV, ports: {Np: Vm, Nn: GND}
name: Rm, type: Resistor, value: 200Ω, ports: {N1: Vm, N2: V1}
name: Rin, type: Resistor, value: Rin, ports: {N1: V1, N2: GND}
name: Amplifier, type: OpAmp, value: Av=10, ports: {InP: V1, InN: GND, Out: Vout}
]
extrainfo:The circuit in diagram (b) models the interface between a microphone and an amplifier. The microphone is represented by a voltage source (Vm) with a series resistance (Rm) of 200Ω. The amplifier has an input impedance represented by Rin. The voltage gain of the amplifier is 10.
image_name:(c)
description:
[
name: Vamp, type: VoltageSource, value: Vamp, ports: {Np: Vamp, Nn: GND}
name: Ramp, type: Resistor, value: Ramp, ports: {N1: Vamp, N2: Vout}
name: Av, type: Amplifier, value: 10, ports: {N1: Vamp, N2: Vout}
name: RL, type: Resistor, value: 8 Ω, ports: {N1: Vout, N2: GND}
]
extrainfo:The circuit in Figure 5.1(c) represents the output stage of an audio amplifier system, focusing on the connection between the amplifier and the speaker. The amplifier has a voltage gain of 10, and the speaker is modeled as an 8 Ω resistor. The amplifier's output impedance is represented by Ramp.

Figure 5.1 (a) Simple audio system, (b) signal loss due to amplifier input impedance, (c) signal loss due to amplifier output impedance.
(a) Determine the signal level sensed by the amplifier if the circuit has an input impedance of $2 \mathrm{k} \Omega$ or $500 \Omega$.
(b) Determine the signal level delivered to the speaker if the circuit has an output impedance of $10 \Omega$ or $2 \Omega$.

Solution (a) Figure 5.1(b) shows the interface between the microphone and the amplifier. The voltage sensed by the amplifier is therefore given by

$$
\begin{equation*}
v_{1}=\frac{R_{\text {in }}}{R_{\text {in }}+R_{m}} v_{m} \tag{5.1}
\end{equation*}
$$

For $R_{\text {in }}=2 \mathrm{k} \Omega$,

$$
\begin{equation*}
v_{1}=0.91 v_{m} \tag{5.2}
\end{equation*}
$$

only $9 \%$ less than the microphone signal level. On the other hand, for $R_{\text {in }}=$ $500 \Omega$,

$$
\begin{equation*}
v_{1}=0.71 v_{m} \tag{5.3}
\end{equation*}
$$

i.e., nearly $30 \%$ loss. It is therefore desirable to maximize the input impedance in this case.
(b) Drawing the interface between the amplifier and the speaker as in Fig. 5.1(c), we have

$$
\begin{equation*}
v_{\text {out }}=\frac{R_{L}}{R_{L}+R_{\text {amp }}} v_{\text {amp }} \tag{5.4}
\end{equation*}
$$

For $R_{a m p}=10 \Omega$,

$$
\begin{equation*}
v_{\text {out }}=0.44 v_{\text {amp }}, \tag{5.5}
\end{equation*}
$$

a substantial attenuation. For $R_{a m p}=2 \Omega$,

$$
\begin{equation*}
v_{\text {out }}=0.8 v_{\text {amp }} \tag{5.6}
\end{equation*}
$$

Thus, the output impedance of the amplifier must be minimized.

Exercise If the signal delivered to the speaker is equal to $0.2 v_{m}$, find the ratio of $R_{m}$ and $R_{L}$.

The importance of I/O impedances encourages us to carefully prescribe the method of measuring them. As with the impedance of two-terminal devices such as resistors and capacitors, the input (output) impedance is measured between the input (output) nodes of the circuit while all independent sources in the circuit are set to zero. ${ }^{2}$ Illustrated in Fig. 5.2, the method involves applying a voltage source to the two nodes (also called "ports") of interest, measuring the resulting current, and defining $v_{X} / i_{X}$ as the impedance. Also shown are arrows to denote "looking into" the input or output port and the corresponding impedance.

The reader may wonder why the output port in Fig. 5.2(a) is left open whereas the input port in Fig. 5.2(b) is shorted. Since a voltage amplifier is driven by a voltage source during normal operation, and since all independent sources must be set to zero, the input

[^2]image_name:(a)
description:
[
name: Vx, type: VoltageSource, value: Vx, ports: {Np: a, Nn: GND}
name: Rin, type: Resistor, value: Rin, ports: {N1: a, N2: Input}
name: Device, type: Other, ports: {N1: Input, N2: Output}
]
extrainfo:The circuit diagram (a) illustrates the measurement setup for input impedance. The voltage source Vx is connected to the input port, and the output port is left open. The input impedance is defined as the ratio of Vx to the current ix flowing into the input port.
image_name:(b)
description:
[
name: Vx, type: VoltageSource, value: Vx, ports: {Np: Vx, Nn: GND}
name: Rout, type: Resistor, value: Rout, ports: {N1: Vx, N2: Short}
]
extrainfo:The circuit diagram (b) represents the measurement of output impedance. The input is shorted, and the output is open, with a voltage source Vx connected across Rout to measure the impedance by observing the current ix.

Figure 5.2 Measurement of (a) input and (b) output impedances.
port in Fig. 5.2(b) must be shorted to represent a zero voltage source. That is, the procedure for calculating the output impedance is identical to that used for obtaining the Thevenin impedance of a circuit (Chapter 1). In Fig. 5.2(a), on the other hand, the output remains open because it is not connected to any external sources.

Determining the transfer of signals from one stage to the next, the I/O impedances are usually regarded as small-signal quantities-with the tacit assumption that the signal levels are indeed small. For example, the input impedance is obtained by applying a small change in the input voltage and measuring the resulting change in the input current. The small-signal models of semiconductor devices therefore prove crucial here.

Example
5.2

Assuming that the transistor operates in the forward active region, determine the input impedance of the circuit shown in Fig. 5.3(a).
image_name:(a)
description:
[
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: C1}
name: Q1, type: NPN, ports: {C: C1, B: Vin, E: GND}
name: VCC, type: VoltageSource, value: VCC, ports: {Np: VCC, Nn: GND}
]
extrainfo:The circuit is a simple amplifier stage with a single NPN transistor Q1. The input voltage is applied at Vin, and the output is taken across the collector resistor RC. The transistor operates in the forward active region.

(a)
image_name:Figure 5.3 (b)
description:
[
name: Vx, type: VoltageSource, value: Vx, ports: {Np: vx, Nn: GND}
name: rπ, type: Resistor, value: rπ, ports: {N1: vx, N2: vπ}
name: gmvπ, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: vπ}
name: RC, type: Resistor, value: RC, ports: {N1: X1, N2: vπ}
name: ro, type: Resistor, value: ro, ports: {N1: X1, N2: GND}
]
extrainfo:The circuit is a small-signal model of a simple amplifier stage using an NPN transistor. The input voltage is applied at node vx, and the output is taken at node X1. The resistor rπ represents the input impedance, and the current source gmvπ models the transistor's transconductance.

(b)

Figure 5.3 (a) Simple amplifier stage, (b) small-signal model.
Solution Constructing the small-signal equivalent circuit depicted in Fig. 5.3(b), we note that the input impedance is simply given by

$$
\begin{equation*}
\frac{v_{x}}{i_{x}}=r_{\pi} \tag{5.7}
\end{equation*}
$$

Since $r_{\pi}=\beta / g_{m}=\beta V_{T} / I_{C}$, we conclude that a higher $\beta$ or lower $I_{C}$ yield a higher input impedance.

Exercise What happens if $R_{C}$ is doubled?
image_name:(a)
description:The diagram named "(a)" depicts a simple amplifier stage:

1. **Main Components:**
- **Amplifier Block:** The central component is a rectangular block representing the amplifier. It is connected to ground, indicating a common reference point for the circuit.
- **Input Resistor ($R_{in}$):** Positioned at the input of the amplifier, this resistor is connected in series with the input signal, controlling the input impedance.

2. **Flow of Information or Control:**
- The input signal enters from the left, passing through the input resistor $R_{in}$ before reaching the amplifier block. This configuration indicates that the amplifier processes the input signal, amplifying it according to its gain characteristics.
- The output is taken from the right side of the amplifier block, where it connects to the next stage of the circuit or system.

3. **Labels, Annotations, and Key Indicators:**
- **$R_{in}$:** This label indicates the input resistance, which is crucial for determining the input impedance of the amplifier stage.
- **GND (Ground):** The amplifier block is connected to ground, providing a reference voltage level for the circuit.

4. **Overall System Function:**
- The primary function of this amplifier stage is to increase the amplitude of the input signal. The input resistor $R_{in}$ helps in setting the input impedance, which affects how the amplifier interacts with the preceding circuit stage. The connection to ground ensures that the amplifier has a stable reference point for operation. This setup is typical in analog signal processing, where signal amplification is necessary for further processing or transmission.
image_name:(b)
description:The diagram labeled "(b)" represents a small-signal model of a simple amplifier stage. It consists of a block diagram with key components and annotations that help describe its function.

1. **Main Components:**
- **Amplifier Block:** The central component is a rectangular block which represents the amplifier. This block is connected to the ground (GND) at the bottom, indicating its reference point.
- **Output Impedance ($R_{out}$):** To the right of the amplifier block, there is an arrow pointing towards a resistor labeled $R_{out}$, which represents the output impedance of the amplifier.

2. **Flow of Information or Control:**
- The diagram shows a "Short" connection on the left side of the amplifier block, indicating that the input side is shorted in this small-signal model. This suggests that the input is grounded or has a low impedance path to ground.
- The signal flow is from left to right, starting from the shorted input and moving through the amplifier to the output, where the output impedance $R_{out}$ is measured.

3. **Labels, Annotations, and Key Indicators:**
- **Ground (GND):** The amplifier block is connected to the ground, which is a common reference point in circuits.
- **Short:** This label on the input side indicates that the input is effectively grounded or has a negligible impedance in this model.

4. **Overall System Function:**
- The primary function of this small-signal model is to analyze the output characteristics of the amplifier when the input is shorted. This model helps in understanding how the amplifier behaves when driven by a low-impedance source, focusing on the output impedance $R_{out}$. The grounding of the amplifier and the shorted input suggest an emphasis on the output side's behavior in response to the input conditions.

Figure 5.4 Concept of impedance seen at a node.
To simplify the notations and diagrams, we often refer to the impedance seen at a node rather than between two nodes (i.e., at a port). As illustrated in Fig. 5.4, such a convention simply assumes that the other node is the ground, i.e., the test voltage source is applied between the node of interest and ground.

Example 5.3

Calculate the impedance seen looking into the collector of $Q_{1}$ in Fig. 5.5(a).
image_name:(a)
description:
[
name: Q1, type: NPN, ports: {C: C1, B: Vin, E: GND}
name: C1, type: Capacitor, value: C1, ports: {Np: C1, Nn: Rout}
name: Rout, type: Resistor, value: Rout, ports: {N1: C1, N2: GND}
]
extrainfo:The circuit is a common-emitter configuration with a capacitor C1 connected to the collector and a resistor Rout connected in parallel to the capacitor, both leading to ground.

(a)
image_name:(b)
description:
[
name: rπ, type: Resistor, value: rπ, ports: {N1: vπ, N2: GND}
name: gmvπ, type: VoltageControlledCurrentSource, ports: {Np: vπ, Nn: X1}
name: ro, type: Resistor, value: ro, ports: {N1: X1, N2: GND}
]
extrainfo:The circuit represents a small-signal model with a resistor rπ connected between vπ and ground, a voltage-controlled current source gmvπ connected from vπ to node X1, and a resistor ro connected from node X1 to ground. The output is taken across ro and Rout.

(b)

Figure 5.5 (a) Impedance seen at collector, (b) small-signal model.

Solution Setting the input voltage to zero and using the small-signal model in Fig. 5.5(b), we note that $v_{\pi}=0, g_{m} v_{\pi}=0$, and hence $R_{\text {out }}=r_{O}$.

Exercise What happens if a resistance of value $R_{1}$ is placed in series with the base?

Example Calculate the impedance seen at the emitter of $Q_{1}$ in Fig. 5.6(a). Neglect the Early effect 5.4 for simplicity.
image_name:Figure 5.6 (a)
description:
[
name: Q1, type: NPN, ports: {C: VCC, B: Vin, E: e1}
name: Rout, type: Resistor, value: Rout, ports: {N1: e1, N2: GND}
]
extrainfo:The circuit consists of an NPN transistor Q1 with the collector connected to VCC, the base connected to Vin, and the emitter connected to node e1. A resistor Rout is connected between node e1 and ground.

(a)
image_name:Figure 5.6 (b)
description:
[
name: rπ, type: Resistor, value: rπ, ports: {N1: vπ, N2: GND}
name: g_m v_π, type: CurrentControlledCurrentSource, ports: {Np: GND, Nn: vπ}
name: v_x, type: VoltageSource, value: v_x, ports: {Np: vπ, Nn: GND}
]
extrainfo:The circuit is a small-signal model showing the impedance at the emitter. It includes a resistor rπ connected between vπ and ground, a current-controlled current source gm*vπ connected from ground to vπ, and a voltage source vx connected across vπ and ground.

(b)

Figure 5.6 (a) Impedance seen at emitter, (b) small-signal model.

Solution Setting the input voltage to zero and replacing $V_{C C}$ with ac ground, we arrive at the small-signal circuit shown in Fig. 5.6(b). Interestingly, $v_{\pi}=-v_{X}$ and

$$
\begin{equation*}
g_{m} v_{\pi}+\frac{v_{\pi}}{r_{\pi}}=-i_{X} \tag{5.8}
\end{equation*}
$$

That is,

$$
\begin{equation*}
\frac{v_{X}}{i_{X}}=\frac{1}{g_{m}+\frac{1}{r_{\pi}}} \tag{5.9}
\end{equation*}
$$

Since $r_{\pi}=\beta / g_{m} \gg 1 / g_{m}$, we have $R_{\text {out }} \approx 1 / g_{m}$.
Exercise What happens if a resistance of value $R_{1}$ is placed in series with the collector?

The above three examples provide three important rules that will be used throughout this book (Fig. 5.7): Looking into the base, we see $r_{\pi}$ if the emitter is (ac) grounded. Looking into the collector, we see $r_{O}$ if the emitter is (ac) grounded. Looking into the emitter, we see $1 / g_{m}$ if the base is (ac) grounded and the Early effect is neglected. It is imperative that the reader master these rules and be able to apply them in more complex circuits. ${ }^{3}$
image_name:Looking into the base
description:
[
name: Q1, type: NPN, ports: {C: LOAD, B: b1, E: GND}
name: Q1, type: NPN, ports: {C: C1, B: GND, E: GND}
name: Q1, type: NPN, ports: {C: C1, B: GND, E: e1}
name: R, type: Resistor, value: R, ports: {N1: VCC, N2: C1}
name: C1, type: Capacitor, value: C1, ports: {Np: C1, Nn: GND}
]
extrainfo:The diagram illustrates three configurations for observing impedances at the terminals of a transistor. The first configuration shows looking into the base with a load connected to the collector. The second configuration examines the impedance at the collector with a capacitor C1 connected. The third configuration analyzes the impedance at the emitter with an infinite Early voltage assumption.
image_name:Looking into the collector
description:
[
name: Q1, type: NPN, ports: {C: LOAD, B: b1, E: GND}
name: Q1, type: NPN, ports: {C: c1, B: GND, E: GND}
name: Q1, type: NPN, ports: {C: c1, B: GND, E: e1}
name: R, type: Resistor, value: R, ports: {N1: VCC, N2: c1}
]
extrainfo:The diagram shows three configurations of an NPN transistor Q1. The first configuration shows the base connected to b1, the collector to LOAD, and the emitter grounded. The second configuration has both the base and emitter grounded, with the collector connected to c1. The third configuration includes a resistor R connected between VCC and the collector c1, with the base grounded and the emitter connected to e1.
image_name:Looking into the emitter
description:
[
name: Q1, type: NPN, ports: {C: C1, B: b1, E: GND}
name: r_π, type: Resistor, value: r_π, ports: {N1: b1, N2: GND}
name: C1, type: Capacitor, value: C1, ports: {Np: C1, Nn: GND}
name: r_o, type: Resistor, value: r_o, ports: {N1: C1, N2: GND}
name: R, type: Resistor, value: R, ports: {N1: Vcc, N2: C1}
]
extrainfo:The circuit represents a transistor amplifier configuration. The first diagram shows the input impedance looking into the base as r_π. The second diagram shows the output impedance looking into the collector as r_o. The third diagram shows the impedance looking into the emitter as 1/g_m with the base grounded.

Figure 5.7 Summary of impedances seen at terminals of a transistor.

### 5.1.2 Biasing

Recall from Chapter 4 that a bipolar transistor operates as an amplifying device if it is biased in the active mode; that is, in the absence of signals, the environment surrounding the device must ensure that the base-emitter and base-collector junctions are forward- and reverse-biased, respectively. Moreover, as explained in Section 4.4, amplification properties of the transistor such as $g_{m}, r_{\pi}$, and $r_{O}$ depend on the quiescent (bias) collector current. Thus, the surrounding circuitry must also set (define) the device bias currents properly.

### 5.1.3 DC and Small-Signal Analysis

The foregoing observations lead to a procedure for the analysis of amplifiers (and many other circuits). First, we compute the operating (quiescent) conditions (terminal voltages and currents) of each transistor in the absence of signals. Called the "dc analysis" or "bias

[^3]image_name:V_BE vs t
description:The graph titled "V_BE vs t" is a time-domain waveform that illustrates the behavior of the base-emitter voltage (V_BE) of a bipolar transistor over time. The graph consists of two parts, each showing a different parameter: V_BE and I_C (collector current), both plotted against time (t).

1. **Type of Graph and Function**: The graph is a time-domain waveform depicting sinusoidal variations superimposed on a constant bias value.

2. **Axes Labels and Units**:
- The horizontal axis represents time (t), though specific units (e.g., seconds) are not provided.
- The vertical axis for the top graph represents the base-emitter voltage (V_BE), and for the bottom graph, it represents the collector current (I_C).
- Each graph includes a dashed line indicating the bias (dc) value, around which the waveform oscillates.

3. **Overall Behavior and Trends**:
- Both V_BE and I_C show sinusoidal oscillations around their respective bias values.
- The waveforms suggest that small signal variations are occurring around a steady operating point.
- The sinusoidal nature indicates periodic behavior, likely representing an AC signal superimposed on the DC bias.

4. **Key Features and Technical Details**:
- The waveforms are centered around a bias (dc) value, which is crucial for the transistor's operation in the active region.
- The amplitude and frequency of the sinusoidal oscillations are not specified but are indicative of the small-signal analysis context.
- The waveform for V_BE may suggest a small amplitude oscillation typical for signal inputs, while I_C may reflect the resulting output current.

5. **Annotations and Specific Data Points**:
- The graph includes annotations indicating the bias (dc) value for both V_BE and I_C.
- No specific numerical values or additional markers are provided, focusing instead on the qualitative behavior of the signals.

This graph is used to illustrate the relationship between bias and signal levels in a bipolar transistor, emphasizing the importance of setting correct bias conditions for proper small-signal operation.
image_name:I_C vs t
description:The graph titled "I_C vs t" is a time-domain waveform illustrating the behavior of the collector current (I_C) of a bipolar transistor over time. The graph is divided into two parts: the top part shows the waveform for base-emitter voltage (V_BE) and the bottom part shows the waveform for collector current (I_C).

1. **Type of Graph and Function:**
- This is a time-domain waveform graph.

2. **Axes Labels and Units:**
- The x-axis is labeled 't' which represents time. The units of time are not specified, but it is typically in seconds or milliseconds.
- The y-axis for the top graph is labeled 'V_BE' representing the base-emitter voltage, while the y-axis for the bottom graph is labeled 'I_C' representing the collector current. The units for these quantities are not specified but are usually volts for V_BE and amperes for I_C.

3. **Overall Behavior and Trends:**
- Both waveforms show a sinusoidal variation around a constant "Bias (dc) Value". This indicates that both V_BE and I_C have an AC component superimposed on a DC bias level.
- The sinusoidal waveforms suggest periodic oscillations in both the voltage and current.

4. **Key Features and Technical Details:**
- The sinusoidal waveforms have peaks and valleys, indicating maximum and minimum points.
- The DC bias value serves as the central line around which the AC component oscillates.
- The amplitude of the oscillations and the frequency are not specified but are critical for determining the small-signal parameters of the transistor.

5. **Annotations and Specific Data Points:**
- The graph includes annotations for "Bias (dc) Value" indicating the level around which the AC signal oscillates.
- No specific numerical values or markers are provided in the graph, but the visual representation clearly separates the DC and AC components.

Figure 5.8 Bias and signal levels for a bipolar transistor.
analysis," this step determines both the region of operation (active or saturation) and the small-signal parameters of each device. Second, we perform "small-signal analysis," i.e., study the response of the circuit to small signals and compute quantities such as the voltage gain and I/O impedances. As an example, Fig. 5.8 illustrates the bias and signal components of a voltage and a current.

It is important to bear in mind that small-signal analysis deals with only (small) changes in voltages and currents in a circuit around their quiescent values. Thus, as mentioned in Section 4.4.4, all constant sources, i.e., voltage and current sources that do not vary with time, must be set to zero for small-signal analysis. For example, the supply voltage is constant and, while establishing proper bias points, plays no role in the response to small signals. We therefore ground all constant voltage sources ${ }^{4}$ and open all constant current sources while constructing the small-signal equivalent circuit. From another point of view, the two steps described above follow the superposition principle: first, we determine the effect of constant voltages and currents while signal sources are set to zero, and second, we analyze the response to signal sources while constant sources are set to zero. Figure 5.9 summarizes these concepts.

DC Analysis
image_name:DC Analysis
description:
[
name: Q1, type: NPN, ports: {C: c1b2, B: LOAD, E: GND}
name: Q2, type: PNP, ports: {C: LOAD, B: c1b2, E: VCC}
name: RC1, type: Resistor, value: RC1, ports: {N1: c1b2, N2: VCC}
name: IC1, type: CurrentSource, value: IC1, ports: {Np: c1b2, Nn: GND}
]
extrainfo:The circuit is a DC analysis setup involving two transistors Q1 (NPN) and Q2 (PNP). Q1 is connected with its collector at node c1b2, base at LOAD, and emitter at GND. Q2 has its collector at LOAD, base at c1b2, and emitter at VCC. A resistor RC1 connects node c1b2 to VCC, and a current source IC1 flows into c1b2 from GND.
image_name:Small-Signal Analysis
description:
[
name: Q1, type: NPN, ports: {C: LOAD, B: c1b2, E: GND}
name: Q2, type: PNP, ports: {C: LOAD, B: c1b2, E: VCC}
name: RC1, type: Resistor, value: RC1, ports: {N1: VCC, N2: c1b2}
name: VCC, type: VoltageSource, value: VCC, ports: {Np: VCC, Nn: GND}
]
extrainfo:The circuit consists of a complementary push-pull amplifier configuration with NPN and PNP transistors Q1 and Q2. The resistor RC1 provides biasing, and VCC is the supply voltage. The load is connected between the collectors of Q1 and Q2.

Small-Signal Analysis
image_name:Figure 5.9
description:
[
name: Vin, type: VoltageSource, ports: {Np: Vin, Nn: GND}
name: R1, type: Resistor, ports: {N1: Vin, N2: X1}
name: R2, type: Resistor, ports: {N1: X1, N2: GND}
name: R3, type: Resistor, ports: {N1: X1, N2: Vout}
name: X1, type: Diode, ports: {Na: Vin, Nc: X1}
name: Load, type: CurrentSource, ports: {Np: X1, Nn: Vout}
]
extrainfo:The circuit is a small-signal amplifier with a diode and resistors providing biasing. The load is connected between the diode and the output. The input is a voltage source, and the output is taken across the load.

Figure 5.9 Steps in a general circuit analysis.

We should remark that the design of amplifiers follows a similar procedure. First, the circuitry around the transistor is designed to establish proper bias conditions and hence the necessary small-signal parameters. Second, the small-signal behavior of the circuit is studied to verify the required performance. Some iteration between the two steps may often be necessary so as to converge toward the desired behavior.

How do we differentiate between small-signal and large-signal operations? In other words, under what conditions can we represent the devices with their small-signal models?

[^4]If the signal perturbs the bias point of the device only negligibly, we say the circuit operates in the small-signal regime. In Fig. 5.8, for example, the change in $I_{C}$ due to the signal must remain small. This criterion is justified because the amplifying properties of the transistor such as $g_{m}$ and $r_{\pi}$ are considered constant in small-signal analysis even though they in fact vary as the signal perturbs $I_{C}$. That is, a linear representation of the transistor holds only if the small-signal parameters themselves vary negligibly. The definition of "negligibly" depends somewhat on the circuit and the application, but as a rule of thumb, we consider $10 \%$ variation in the collector current as the upper bound for small-signal operation.

In drawing circuit diagrams hereafter, we will employ some simplified notations and symbols. Illustrated in Fig. 5.10 is an example where the battery serving as the supply voltage is replaced with a horizontal bar labeled $V_{C C} .{ }^{5}$ Also, the input voltage source is simplified to one node called $V_{i n}$, with the understanding that the other node is ground.
image_name:Figure 5.10
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}
name: Q1, type: NPN, ports: {C: Vout, B: Vin, E: GND}
name: VCC, type: VoltageSource, value: VCC, ports: {Np: VCC, Nn: GND}
]
extrainfo:The circuit is a basic NPN transistor amplifier configuration with a resistor RC connected to the collector. The input voltage source Vin is connected to the base, and the output is taken from the collector. The emitter is grounded, and the circuit is powered by VCC.

Figure 5.10 Notation for supply voltage.
In this chapter, we begin with the DC analysis and design of bipolar stages, developing skills to determine or create bias conditions. This phase of our study requires no knowledge of signals and hence the input and output ports of the circuit. Next, we introduce various amplifier topologies and examine their small-signal behavior.

## 5.2 OPERATING POINT ANALYSIS AND DESIGN

It is instructive to begin our treatment of operating points with an example.

A student familiar with bipolar devices constructs the circuit shown in Fig. 5.11 and attempts to amplify the signal produced by a microphone. If $I_{S}=6 \times 10^{-16} \mathrm{~A}$ and the peak value of the microphone signal is 20 mV , determine the peak value of the output signal.
image_name:Figure 5.11
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: RC, type: Resistor, value: 1k, ports: {N1: VCC, N2: Vout}
name: Q1, type: NPN, ports: {C: Vout, B: Vin, E: GND}
]
extrainfo:The circuit is a basic common-emitter amplifier configuration with an NPN transistor (Q1) and a collector resistor (RC). The input voltage (Vin) is applied to the base of the transistor, and the output is taken from the collector. The emitter is connected to ground. The circuit lacks a biasing network for the transistor.

Figure 5.11 Amplifier driven directly by a microphone.

[^5]Solution Unfortunately, the student has forgotten to bias the transistor. (The microphone does not produce a dc output.) If $V_{i n}\left(=V_{B E}\right)$ reaches 20 mV , then

$$
\begin{align*}
\Delta I_{C} & =I_{S} \exp \frac{\Delta V_{B E}}{V_{T}}  \tag{5.10}\\
& =1.29 \times 10^{-15} \mathrm{~A} \tag{5.11}
\end{align*}
$$

This change in the collector current yields a change in the output voltage equal to

$$
\begin{equation*}
R_{C} \Delta I_{C}=1.29 \times 10^{-12} \mathrm{~V} \tag{5.12}
\end{equation*}
$$

The circuit generates virtually no output because the bias current (in the absence of the microphone signal) is zero and so is the transconductance.

Exercise Repeat the above example if a constant voltage of 0.65 V is placed in series with the microphone.

As mentioned in Section 5.1.2, biasing seeks to fulfill two objectives: ensure operation in the forward active region, and set the collector current to the value required in the application. Let us return to the above example for a moment.

Example
5.6

Having realized the bias problem, the student in Example 5.5 modifies the circuit as shown in Fig. 5.12, connecting the base to $V_{C C}$ to allow dc biasing for the base-emitter junction. Explain why the student needs to learn more about biasing.
image_name:Figure 5.12
description:
[
name: Q1, type: NPN, ports: {C: Vout, B: b1, E: GND}
name: RC, type: Resistor, value: 1 kΩ, ports: {N1: VCC, N2: Vout}
name: VCC, type: VoltageSource, value: 2.5 V, ports: {Np: VCC, Nn: GND}
]
extrainfo:The circuit is an amplifier with the base of the NPN transistor Q1 tied to VCC, which causes the input signal to be shorted to VCC, preventing amplification.

Figure 5.12 Amplifier with base tied to $V_{C C}$.
Solution The fundamental issue here is that the signal generated by the microphone is shorted to $V_{C C}$. Acting as an ideal voltage source, $V_{C C}$ maintains the base voltage at a constant value, prohibiting any change introduced by the microphone. Since $V_{B E}$ remains constant, so does $V_{\text {out }}$, leading to no amplification.

Another important issue relates to the value of $V_{B E}$ : with $V_{B E}=V_{C C}=2.5 \mathrm{~V}$, enormous currents flow into the transistor.

Exercise Does the circuit operate better if a resistor is placed in series with the emitter of $Q_{1}$ ?

### 5.2.1 Simple Biasing

Now consider the topology shown in Fig. 5.13, where the base is tied to $V_{C C}$ through a relatively large resistor, $R_{B}$, so as to forward-bias the base-emitter junction. Our objective is to determine the terminal voltages and currents of $Q_{1}$ and obtain the
image_name:Figure 5.13
description:
[
name: RB, type: Resistor, value: RB, ports: {N1: VCC, N2: X}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Y}
name: Q1, type: NPN, ports: {C: Y, B: X, E: GND}
]
extrainfo:The circuit is a simple biasing configuration for an NPN transistor using a base resistor for the base current path. It ensures the transistor operates in the active mode.

Figure 5.13 Use of base resistance for base current path.
conditions that ensure biasing in the active mode. How do we analyze this circuit? One can replace $Q_{1}$ with its large-signal model and apply KVL and KCL, but the resulting nonlinear equation(s) yield little intuition. Instead, we recall that the baseemitter voltage in most cases falls in the range of 700 to 800 mV and can be considered relatively constant. Since the voltage drop across $R_{B}$ is equal to $R_{B} I_{B}$, we have

$$
\begin{equation*}
R_{B} I_{B}+V_{B E}=V_{C C} \tag{5.13}
\end{equation*}
$$

and hence

$$
\begin{equation*}
I_{B}=\frac{V_{C C}-V_{B E}}{R_{B}} \tag{5.14}
\end{equation*}
$$

With the base current known, we write

$$
\begin{equation*}
I_{C}=\beta \frac{V_{C C}-V_{B E}}{R_{B}} \tag{5.15}
\end{equation*}
$$

note that the voltage drop across $R_{C}$ is equal to $R_{C} I_{C}$, and hence obtain $V_{C E}$ as

$$
\begin{align*}
V_{C E} & =V_{C C}-R_{C} I_{C}  \tag{5.16}\\
& =V_{C C}-\beta \frac{V_{C C}-V_{B E}}{R_{B}} R_{C} \tag{5.17}
\end{align*}
$$

Calculation of $V_{C E}$ is necessary as it reveals whether the device operates in the active mode or not. For example, to avoid saturation completely, we require the collector voltage to remain above the base voltage:

$$
\begin{equation*}
V_{C C}-\beta \frac{V_{C C}-V_{B E}}{R_{B}} R_{C}>V_{B E} \tag{5.18}
\end{equation*}
$$

The circuit parameters can therefore be chosen so as to guarantee this condition.
In summary, using the sequence $I_{B} \rightarrow I_{C} \rightarrow V_{C E}$, we have computed the important terminal currents and voltages of $Q_{1}$. While not particularly interesting here, the emitter current is simply equal to $I_{C}+I_{B}$.

The reader may wonder about the error in the above calculations due to the assumption of a constant $V_{B E}$ in the range of 700 to 800 mV . An example clarifies this issue. sume $\beta=100$ and $I_{S}=10^{-17} \mathrm{~A}$. Verify that $Q_{1}$ operates in the forward active region.

Solution
image_name:Figure 5.14 Simple biased stage
description:
[
name: RB, type: Resistor, value: 100k, ports: {N1: VCC, N2: X}
name: RC, type: Resistor, value: 1k, ports: {N1: VCC, N2: Y}
name: Q1, type: NPN, ports: {C: Y, B: X, E: GND}
name: VCC, type: VoltageSource, value: 2.5V, ports: {Np: VCC, Nn: GND}
]
extrainfo:The circuit is a simple biased stage with an NPN transistor. The base is connected through RB to VCC, and the collector is connected through RC to VCC. The emitter is grounded. The base current IB and collector current IC are shown.

Figure 5.14 Simple biased stage.

Since $I_{S}$ is relatively small, we surmise that the base-emitter voltage required to carry typical current level is relatively large. Thus, we use $V_{B E}=800 \mathrm{mV}$ as an initial guess and write Eq. (5.14) as

$$
\begin{align*}
I_{B} & =\frac{V_{C C}-V_{B E}}{R_{B}}  \tag{5.19}\\
& \approx 17 \mu \mathrm{~A} \tag{5.20}
\end{align*}
$$

It follows that

$$
\begin{equation*}
I_{C}=1.7 \mathrm{~mA} \tag{5.21}
\end{equation*}
$$

With this result for $I_{C}$, we calculate a new value for $V_{B E}$ :

$$
\begin{align*}
V_{B E} & =V_{T} \ln \frac{I_{C}}{I_{S}}  \tag{5.22}\\
& =852 \mathrm{mV} \tag{5.23}
\end{align*}
$$

and iterate to obtain more accurate results. That is,

$$
\begin{align*}
I_{B} & =\frac{V_{C C}-V_{B E}}{R_{B}}  \tag{5.24}\\
& =16.5 \mu \mathrm{~A} \tag{5.25}
\end{align*}
$$

and hence

$$
\begin{equation*}
I_{C}=1.65 \mathrm{~mA} \tag{5.26}
\end{equation*}
$$

Since the values given by (5.21) and (5.26) are quite close, we consider $I_{C}=$ 1.65 mA accurate enough and iterate no more.

Writing (5.16), we have

$$
\begin{align*}
V_{C E} & =V_{C C}-R_{C} I_{C}  \tag{5.27}\\
& =0.85 \mathrm{~V} \tag{5.28}
\end{align*}
$$

a value nearly equal to $V_{B E}$. The transistor therefore operates near the edge of active and saturation modes.

Exercise What value of $R_{B}$ provides a reverse bias of 200 mV across the base-collector junction?

The biasing scheme of Fig. 5.13 merits a few remarks. First, the effect of $V_{B E}$ "uncertainty" becomes more pronounced at low values of $V_{C C}$ because $V_{C C}-V_{B E}$ determines the base current. Thus, in low-voltage design-an increasingly common paradigm in modern electronic systems-the bias is more sensitive to $V_{B E}$ variations among transistors or with temperature. Second, we recognize from Eq. (5.15) that $I_{C}$ heavily depends on $\beta$, a parameter that may change considerably. In the above example, if $\beta$ increases from 100 to 120 , then $I_{C}$ rises to 1.98 mA and $V_{C E}$ falls to 0.52 , driving the transistor toward heavy saturation. For these reasons, the topology of Fig. 5.13 is rarely used in practice.

### 5.2.2 Resistive Divider Biasing

In order to suppress the dependence of $I_{C}$ upon $\beta$, we return to the fundamental rela-

Did you know?

Even in the first transistor radio introduced by Regency and Texas Instruments, it was recognized that the simple biasing technique would be a poor choice for production. The four transistors in this radio would need to maintain a relatively constant bias despite manufacturing variations and extreme temperatures in different places around the globe. For this reason, each stage incorporated "emitter degeneration" to stabilize the bias point.
image_name:Simplified front end of Regency's TR1 radio
description:
[
name: L1, type: Inductor, ports: {N1: X1, N2: GND}
name: R, type: Resistor, ports: {N1: b1, N2: VCC}
name: C, type: Capacitor, ports: {Np: b1, Nn: X1}
name: Q1, type: NPN, ports: {C: VCC, B: b1, E: e1}
name: e1, type: Resistor, ports: {N1: e1, N2: GND}
name: L2, type: Inductor, ports: {N1: VCC, N2: L3}
name: L3, type: Inductor, ports: {N1: L2, N2: To Next Stage}
]
extrainfo:The circuit is a simplified front end of Regency's TR1 radio, featuring emitter degeneration for bias stabilization. L1 acts as an antenna, while L2 and L3 form a coupling to the next stage.

Simplified front end of Regency's TR1 radio. tionship $I_{C}=I_{S} \exp \left(V_{B E} / V_{T}\right)$ and postulate that $I_{C}$ must be set by applying a well-defined $V_{B E}$. Figure 5.15 depicts an example, where $R_{1}$ and $R_{2}$ act as a voltage divider, providing a base-emitter voltage equal to

$$
\begin{equation*}
V_{X}=\frac{R_{2}}{R_{1}+R_{2}} V_{C C} \tag{5.29}
\end{equation*}
$$

if the base current is negligible. Thus,

$$
\begin{equation*}
I_{C}=I_{S} \exp \left(\frac{R_{2}}{R_{1}+R_{2}} \cdot \frac{V_{C C}}{V_{T}}\right) \tag{5.30}
\end{equation*}
$$

a quantity independent of $\beta$. Nonetheless, the design must ensure that the base current remains negligible.
image_name:Figure 5.15
description:
[
name: R1, type: Resistor, value: R1, ports: {N1: VCC, N2: X}
name: R2, type: Resistor, value: R2, ports: {N1: X, N2: GND}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Y}
name: VCC, type: VoltageSource, value: VCC, ports: {Np: VCC, Nn: GND}
name: Q1, type: NPN, ports: {C: Y, B: X, E: GND}
]
extrainfo:The circuit is a biased NPN transistor stage using a resistive voltage divider (R1 and R2) to set the base-emitter voltage. The collector current IC is determined by the voltage across the base-emitter junction and is largely independent of the transistor's beta if the base current is negligible.

Figure 5.15 Use of resistive divider to define $V_{B E}$.
image_name:Figure 5.16
description:
[
name: R1, type: Resistor, value: 17kΩ, ports: {N1: VCC, N2: X}
name: R2, type: Resistor, value: 8kΩ, ports: {N1: X, N2: GND}
name: RC, type: Resistor, value: 5kΩ, ports: {N1: VCC, N2: Y}
name: Q1, type: NPN, ports: {C: Y, B: X, E: GND}
name: VCC, type: VoltageSource, value: 2.5V, ports: {Np: VCC, Nn: GND}
]
extrainfo:The circuit is a biased NPN transistor stage using a resistive voltage divider (R1 and R2) to set the base-emitter voltage. The collector current IC is determined by the voltage across the base-emitter junction and is largely independent of the transistor's beta if the base current is negligible.

Figure 5.16 Example of biased stage.
Solution Neglecting the base current of $Q_{1}$, we have

$$
\begin{align*}
V_{X} & =\frac{R_{2}}{R_{1}+R_{2}} V_{C C}  \tag{5.31}\\
& =800 \mathrm{mV} . \tag{5.32}
\end{align*}
$$

It follows that

$$
\begin{align*}
I_{C} & =I_{S} \exp \frac{V_{B E}}{V_{T}}  \tag{5.33}\\
& =231 \mu \mathrm{~A} \tag{5.34}
\end{align*}
$$

and

$$
\begin{equation*}
I_{B}=2.31 \mu \mathrm{~A} \tag{5.35}
\end{equation*}
$$

Is the base current negligible? With which quantity should this value be compared? Provided by the resistive divider, $I_{B}$ must be negligible with respect to the current flowing through $R_{1}$ and $R_{2}$ :

$$
\begin{equation*}
I_{B} \stackrel{?}{\ll} \frac{V_{C C}}{R_{1}+R_{2}} . \tag{5.36}
\end{equation*}
$$

This condition indeed holds in this example because $V_{C C} /\left(R_{1}+R_{2}\right)=$ $100 \mu \mathrm{~A} \approx 43 I_{B}$.

We also note that

$$
\begin{equation*}
V_{C E}=1.345 \mathrm{~V} \tag{5.37}
\end{equation*}
$$

and hence $Q_{1}$ operates in the active region.
Exercise What is the maximum value of $R_{C}$ if $Q_{1}$ must remain in soft saturation?

The analysis approach taken in the above example assumes a negligible base current, requiring verification at the end. But what if the end result indicates that $I_{B}$ is not negligible? We now analyze the circuit without this assumption. Let us replace the voltage divider with a Thevenin equivalent (Fig. 5.17), noting that $V_{T h e v}$ is equal to the open-circuit output voltage ( $V_{X}$ when the amplifier is disconnected):

$$
\begin{equation*}
V_{\text {Thev }}=\frac{R_{2}}{R_{1}+R_{2}} V_{C C} \tag{5.38}
\end{equation*}
$$

image_name:Figure 5.17
description:
[
name: R1, type: Resistor, value: R1, ports: {N1: VCC, N2: X}
name: R2, type: Resistor, value: R2, ports: {N1: X, N2: GND}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: C}
name: CI, type: Capacitor, value: CI, ports: {Np: C, Nn: GND}
name: Q1, type: NPN, ports: {C: C, B: X, E: GND}
name: RThev, type: Resistor, value: RThev, ports: {N1: VThev, N2: X}
name: VThev, type: VoltageSource, value: VThev, ports: {Np: VThev, Nn: GND}
]
extrainfo:The circuit uses a Thevenin equivalent to simplify the biasing network of an NPN transistor amplifier. The Thevenin voltage (VThev) and resistance (RThev) replace the voltage divider formed by R1 and R2. The transistor Q1 is biased using these equivalent values. The circuit is powered by VCC and grounded at GND. The output is taken across the collector resistor RC.

Figure 5.17 Use of Thevenin equivalent to calculate bias.

Moreover, $R_{\text {Thev }}$ is given by the output resistance of the network if $V_{C C}$ is set to zero:

$$
\begin{equation*}
R_{\text {Thev }}=R_{1} \| R_{2} \tag{5.39}
\end{equation*}
$$

The simplified circuit yields:

$$
\begin{equation*}
V_{X}=V_{\text {Thev }}-I_{B} R_{\text {Thev }} \tag{5.40}
\end{equation*}
$$

and

$$
\begin{equation*}
I_{C}=I_{S} \exp \frac{V_{\text {Thev }}-I_{B} R_{\text {Thev }}}{V_{T}} . \tag{5.41}
\end{equation*}
$$

This result along with $I_{C}=\beta I_{B}$ forms the system of equations leading to the values of $I_{C}$ and $I_{B}$. As in the previous examples, iterations prove useful here, but the exponential dependence in Eq. (5.41) gives rise to wide fluctuations in the intermediate solutions. For this reason, we rewrite Eq. (5.41) as

$$
\begin{equation*}
I_{B}=\left(V_{\text {Thev }}-V_{T} \ln \frac{I_{C}}{I_{S}}\right) \cdot \frac{1}{R_{\text {Thev }}}, \tag{5.42}
\end{equation*}
$$

and begin with a guess for $V_{B E}=V_{T} \ln \left(I_{C} / I_{S}\right)$. The iteration then follows the sequence $V_{B E} \rightarrow I_{B} \rightarrow I_{C} \rightarrow V_{B E} \rightarrow \cdots$.
image_name:Example 5.9
description:The image is a part of an example labeled 'Example 5.9' from a textbook or educational material. It provides a task related to calculating the collector current of a transistor, specifically Q1, as referenced in Fig. 5.18(a). The example specifies parameters for the calculation: a current gain (β) of 100 and a saturation current (I_S) of 10^(-17) A. The context suggests this is likely part of a circuit analysis or electronics problem, where these values are used to determine the current flowing through the collector of the transistor Q1 in the given figure.

Solution Constructing the equivalent circuit shown in Fig. 5.18(b), we note that

$$
\begin{align*}
V_{\text {Thev }} & =\frac{R_{2}}{R_{1}+R_{2}} V_{C C}  \tag{5.43}\\
& =800 \mathrm{mV} \tag{5.44}
\end{align*}
$$

and

$$
\begin{align*}
R_{\text {Thev }} & =R_{1} \| R_{2}  \tag{5.45}\\
& =54.4 \mathrm{k} \Omega . \tag{5.46}
\end{align*}
$$

We begin the iteration with an initial guess $V_{B E}=750 \mathrm{mV}$ (because we know that the voltage drop across $R_{\text {Thev }}$ makes $V_{B E}$ less than $V_{\text {Thev }}$ ), thereby arriving at the base current:
image_name:Figure 5.18 (a)
description:
[
name: R1, type: Resistor, value: 170kΩ, ports: {N1: VCC, N2: X}
name: R2, type: Resistor, value: 80kΩ, ports: {N1: X, N2: GND}
name: RC, type: Resistor, value: 5kΩ, ports: {N1: VCC, N2: Y}
name: Q1, type: NPN, ports: {C: Y, B: X, E: GND}
name: VCC, type: VoltageSource, value: 2.5V, ports: {Np: VCC, Nn: GND}
]
extrainfo:The circuit is a stage with resistive divider bias. It uses an NPN transistor Q1 biased through a voltage divider formed by R1 and R2. RC is the collector resistor, and the circuit is powered by a 2.5V supply.
image_name:Figure 5.18 (b)
description:
[
name: R1, type: Resistor, value: 170kΩ, ports: {N1: VCC, N2: X}
name: R2, type: Resistor, value: 80kΩ, ports: {N1: X, N2: GND}
name: RC, type: Resistor, value: 5kΩ, ports: {N1: VCC, N2: Y}
name: Q1, type: NPN, ports: {C: Y, B: X, E: GND}
name: VCC, type: VoltageSource, value: 2.5V, ports: {Np: VCC, Nn: GND}
name: VThev, type: VoltageSource, ports: {Np: VThev, Nn: GND}
name: RThev, type: Resistor, ports: {N1: VThev, N2: X}
name: CI, type: CurrentSource, ports: {Np: Y, Nn: GND}
]
extrainfo:The circuit is a basic transistor amplifier with a Thevenin equivalent for the biasing resistors. It utilizes a voltage divider biasing method to set the base voltage of the NPN transistor Q1. The Thevenin equivalent voltage (VThev) and resistance (RThev) are used to simplify the analysis of the biasing network. The collector current IC flows through RC to VCC, and the emitter is connected to ground.

Figure 5.18 (a) Stage with resistive divider bias, (b) stage with Thevenin equivalent for the resistive divider and $V_{C C}$.

Thus, $I_{C}=\beta I_{B}=91.9 \mu \mathrm{~A}$ and

$$
\begin{align*}
V_{B E} & =V_{T} \ln \frac{I_{C}}{I_{S}}  \tag{5.49}\\
& =776 \mathrm{mV} \tag{5.50}
\end{align*}
$$

It follows that $I_{B}=0.441 \mu \mathrm{~A}$ and hence $I_{C}=44.1 \mu \mathrm{~A}$, still a large fluctuation with respect to the first value from above. Continuing the iteration, we obtain $V_{B E}=757 \mathrm{mV}, I_{B}=0.79 \mu \mathrm{~A}$ and $I_{C}=79.0 \mu \mathrm{~A}$. After many iterations, $V_{B E} \approx$ 766 mV and $I_{C}=63 \mu \mathrm{~A}$.

Exercise How much can $R_{2}$ be increased if $Q_{1}$ must remain in soft saturation?

While proper choice of $R_{1}$ and $R_{2}$ in the topology of Fig. 5.15 makes the bias relatively insensitive to $\beta$, the exponential dependence of $I_{C}$ upon the voltage generated by the resistive divider still leads to substantial bias variations. For example, if $R_{2}$ is $1 \%$ higher than its nominal value, so is $V_{X}$, thus multiplying the collector current by $\exp \left(0.01 V_{B E} / V_{T}\right) \approx 1.36$ (for $V_{B E}=800 \mathrm{mV}$ ). In other words, a $1 \%$ error in one resistor value introduces a $36 \%$ error in the collector current. The circuit is therefore still of little practical value.

### 5.2.3 Biasing with Emitter Degeneration

A biasing configuration that alleviates the problem of sensitivity to $\beta$ and $V_{B E}$ is shown in Fig. 5.19. Here, resistor $R_{E}$ appears in series with the emitter, thereby lowering the sensitivity to $V_{B E}$. From an intuitive viewpoint, this occurs because $R_{E}$ exhibits a linear (rather than exponential) I-V relationship. Thus, an error in $V_{X}$ due to inaccuracies in $R_{1}$, $R_{2}$, or $V_{C C}$ is partly "absorbed" by $R_{E}$, introducing a smaller error in $V_{B E}$ and hence $I_{C}$. Called "emitter degeneration," the addition of $R_{E}$ in series with the emitter alters many attributes of the circuit, as described later in this chapter.

To understand the above property, let us determine the bias currents of the transistor. Neglecting the base current, we have $V_{X}=V_{C C} R_{2} /\left(R_{1}+R_{2}\right)$. Also, $V_{P}=V_{X}-V_{B E}$,
image_name:Figure 5.19
description:
[
name: R1, type: Resistor, value: R1, ports: {N1: VCC, N2: X}
name: R2, type: Resistor, value: R2, ports: {N1: X, N2: GND}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Y}
name: RE, type: Resistor, value: RE, ports: {N1: P, N2: GND}
name: Q1, type: NPN, ports: {C: Y, B: X, E: P}
]
extrainfo:The circuit is a common emitter amplifier with emitter degeneration. The emitter resistor RE provides negative feedback to stabilize the bias point against variations in transistor parameters and supply voltage.

Figure 5.19 Addition of degeneration resistor to stabilize bias point.
yielding

$$
\begin{align*}
I_{E} & =\frac{V_{P}}{R_{E}}  \tag{5.51}\\
& =\frac{1}{R_{E}}\left(V_{C C} \frac{R_{2}}{R_{1}+R_{2}}-V_{B E}\right)  \tag{5.52}\\
& \approx I_{C}, \tag{5.53}
\end{align*}
$$

if $\beta \gg 1$. How can this result be made less sensitive to $V_{X}$ or $V_{B E}$ variations? If the voltage drop across $R_{E}$, i.e., the difference between $V_{C C} R_{2} /\left(R_{1}+R_{2}\right)$ and $V_{B E}$, is large enough to absorb and swamp such variations, then $I_{E}$ and $I_{C}$ remain relatively constant. An example illustrates this point.

Calculate the bias currents in the circuit of Fig. 5.20 and verify that $Q_{1}$ operates in the forward active region. Assume $\beta=100$ and $I_{S}=5 \times 10^{-17} \mathrm{~A}$. How much does the collector current change if $R_{2}$ is $1 \%$ higher than its nominal value?
image_name:Figure 5.20
description:
[
name: R1, type: Resistor, value: 16k, ports: {N1: VCC, N2: X}
name: RC, type: Resistor, value: 1k, ports: {N1: VCC, N2: Y}
name: R2, type: Resistor, value: 9k, ports: {N1: X, N2: GND}
name: RE, type: Resistor, value: 100, ports: {N1: P, N2: GND}
name: Q1, type: NPN, ports: {C: Y, B: X, E: P}
]
extrainfo:The circuit is a biased NPN transistor stage with resistors R1, R2, RC, and RE. The supply voltage VCC is 2.5V. The NPN transistor Q1 is biased to operate in the forward active region.

Figure 5.20 Example of biased stage.
Solution We neglect the base current and write

$$
\begin{align*}
V_{X} & =V_{C C} \frac{R_{2}}{R_{1}+R_{2}}  \tag{5.54}\\
& =900 \mathrm{mV} \tag{5.55}
\end{align*}
$$

Using $V_{B E}=800 \mathrm{mV}$ as an initial guess, we have

$$
\begin{align*}
V_{P} & =V_{X}-V_{B E}  \tag{5.56}\\
& =100 \mathrm{mV} \tag{5.57}
\end{align*}
$$

and hence

$$
\begin{equation*}
I_{E} \approx I_{C} \approx 1 \mathrm{~mA} \tag{5.58}
\end{equation*}
$$

With this result, we must reexamine the assumption of $V_{B E}=800 \mathrm{mV}$. Since

$$
\begin{align*}
V_{B E} & =V_{T} \ln \frac{I_{C}}{I_{S}}  \tag{5.59}\\
& =796 \mathrm{mV} \tag{5.60}
\end{align*}
$$

we conclude that the initial guess is reasonable. Furthermore, Eq. (5.57) suggests that a 4-mV error in $V_{B E}$ leads to a $4 \%$ error in $V_{P}$ and hence $I_{E}$, indicating a good approximation.

Let us now determine if $Q_{1}$ operates in the active mode. The collector voltage is given by

$$
\begin{align*}
V_{Y} & =V_{C C}-I_{C} R_{C}  \tag{5.61}\\
& =1.5 \mathrm{~V} . \tag{5.62}
\end{align*}
$$

With the base voltage at 0.9 V , the device is indeed in the active region.
Is the assumption of negligible base current valid? With $I_{C} \approx 1 \mathrm{~mA}, I_{B} \approx$ $10 \mu \mathrm{~A}$ whereas the current flowing through $R_{1}$ and $R_{2}$ is equal to $100 \mu \mathrm{~A}$. The assumption is therefore reasonable. For greater accuracy, an iterative procedure similar to that in Example 5.9 can be followed.

If $R_{2}$ is $1.6 \%$ higher than its nominal value, then Eq. (5.54) indicates that $V_{X}$ rises to approximately 909 mV . We may assume that the $9-\mathrm{mV}$ change directly appears across $R_{E}$, raising the emitter current by $9 \mathrm{mV} / 100 \Omega=90 \mu \mathrm{~A}$. From Eq. (5.56), we note that this assumption is equivalent to considering $V_{B E}$ constant, which is reasonable because the emitter and collector currents have changed by only $9 \%$.

Exercise What value of $R_{2}$ places $Q_{1}$ at the edge of saturation?

The bias topology of Fig. 5.19 is used extensively in discrete circuits and occasionally in integrated circuits. Illustrated in Fig. 5.21, two rules are typically followed: (1) $I_{1} \gg I_{B}$ to lower sensitivity to $\beta$, and (2) $V_{R E}$ must be large enough ( 100 mV to several hundred millivolts) to suppress the effect of uncertainties in $V_{X}$ and $V_{B E}$.
image_name:Figure 5.21
description:
[
name: R1, type: Resistor, value: R1, ports: {N1: VCC, N2: X}
name: R2, type: Resistor, value: R2, ports: {N1: X, N2: GND}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Y}
name: RE, type: Resistor, value: RE, ports: {N1: E1, N2: GND}
name: Q1, type: NPN, ports: {C: Y, B: X, E: E1}
]
extrainfo:The circuit is a biasing network for an NPN transistor Q1. It uses resistors R1 and R2 to set the base voltage, and RC and RE to stabilize the collector and emitter currents, respectively. The design aims to keep Q1 out of saturation while maintaining stability against variations in Vx and VBE.

Figure 5.21 Summary of robust bias conditions.

Design Procedure It is possible to prescribe a design procedure for the bias topology of Fig. 5.21 that serves most applications: (1) decide on a collector bias current that yields proper small-signal parameters such as $g_{m}$ and $r_{\pi}$; (2) based on the expected variations of $R_{1}, R_{2}$, and $V_{B E}$, choose a value for $V_{R E} \approx I_{C} R_{E}$, e.g., 200 mV ; (3) calculate $V_{X}=V_{B E}+I_{C} R_{E}$ with $V_{B E}=V_{T} \ln \left(I_{C} / I_{S}\right)$; (4) choose $R_{1}$ and $R_{2}$ so as to provide the necessary value of $V_{X}$ and establish $I_{1} \gg I_{B}$. Determined by small-signal gain requirements, the value of $R_{C}$ is bounded by a maximum that places $Q_{1}$ at the edge of saturation. The following example illustrates these concepts.

Design the circuit of Fig. 5.21 so as to provide a transconductance of $1 /(52 \Omega)$ for $Q_{1}$. Assume $V_{C C}=2.5 \mathrm{~V}, \beta=100$, and $I_{S}=5 \times 10^{-17} \mathrm{~A}$. What is the maximum tolerable value of $R_{C}$ ?

Solution A $g_{m}$ of $(52 \Omega)^{-1}$ translates to a collector current of 0.5 mA and a $V_{B E}$ of 778 mV . Assuming $R_{E} I_{C}=200 \mathrm{mV}$, we obtain $R_{E}=400 \Omega$. To establish $V_{X}=$ $V_{B E}+R_{E} I_{C}=978 \mathrm{mV}$, we must have

$$
\begin{equation*}
\frac{R_{2}}{R_{1}+R_{2}} V_{C C}=V_{B E}+R_{E} I_{C} \tag{5.63}
\end{equation*}
$$

where the base current is neglected. For the base current $I_{B}=5 \mu \mathrm{~A}$ to be negligible,

$$
\begin{equation*}
\frac{V_{C C}}{R_{1}+R_{2}} \gg I_{B} \tag{5.64}
\end{equation*}
$$

e.g., by a factor of 10 . Thus, $R_{1}+R_{2}=50 \mathrm{k} \Omega$, which in conjunction with Eq. (5.63) yields

$$
\begin{align*}
& R_{1}=30.45 \mathrm{k} \Omega  \tag{5.65}\\
& R_{2}=19.55 \mathrm{k} \Omega \tag{5.66}
\end{align*}
$$

How large can $R_{C}$ be? Since the collector voltage is equal to $V_{C C}-R_{C} I_{C}$, we pose the following constraint to ensure active mode operation:

$$
\begin{equation*}
V_{C C}-R_{C} I_{C}>V_{X} \tag{5.67}
\end{equation*}
$$

that is,

$$
\begin{equation*}
R_{C} I_{C}<1.522 \mathrm{~V} \tag{5.68}
\end{equation*}
$$

Consequently,

$$
\begin{equation*}
R_{C}<3.044 \mathrm{k} \Omega \tag{5.69}
\end{equation*}
$$

If $R_{C}$ exceeds this value, the collector voltage falls below the base voltage. As mentioned in Chapter 4, the transistor can tolerate soft saturation, i.e., up to about 400 mV of base-collector forward bias. Thus, in low-voltage applications, we may allow $V_{Y} \approx V_{X}-400 \mathrm{mV}$ and hence a greater value for $R_{C}$.

Exercise Repeat the above example if the power budget is only 1 mW and the transconductance of $Q_{1}$ is not given.

The two rules depicted in Fig. 5.21 to lower sensitivities do impose some trade-offs. Specifically, an overly conservative design faces the following issues: (1) if we wish $I_{1}$ to be much much greater than $I_{B}$, then $R_{1}+R_{2}$ and hence $R_{1}$ and $R_{2}$ are quite small, leading to a low input impedance; (2) if we choose a very large $V_{R E}$, then $V_{X}\left(=V_{B E}+V_{R E}\right)$ must be high, thereby limiting the minimum value of the collector voltage to avoid saturation. Let us return to the above example and study these issues.

Example $\quad$ Repeat Example 5.11 but assuming $V_{R E}=500 \mathrm{mV}$ and $I_{1} \geq 100 I_{B}$.
Solution The collector current and base-emitter voltage remain unchanged. The value of $R_{E}$ is now given by $500 \mathrm{mV} / 0.5 \mathrm{~mA}=1 \mathrm{k} \Omega$. Also, $V_{X}=V_{B E}+R_{E} I_{C}=1.278 \mathrm{~V}$ and Eq. (5.63) still holds. We rewrite Eq. (5.64) as

$$
\begin{equation*}
\frac{V_{C C}}{R_{1}+R_{2}} \geq 100 I_{B}, \tag{5.70}
\end{equation*}
$$

obtaining $R_{1}+R_{2}=5 \mathrm{k} \Omega$. It follows that

$$
\begin{align*}
& R_{1}=1.45 \mathrm{k} \Omega  \tag{5.71}\\
& R_{2}=3.55 \mathrm{k} \Omega . \tag{5.72}
\end{align*}
$$

Since the base voltage has risen to 1.278 V , the collector voltage must exceed this value to avoid saturation, leading to

$$
\begin{align*}
R_{C} & <\frac{V_{C C}-V_{X}}{I_{C}}  \tag{5.73}\\
& <1.044 \mathrm{k} \Omega . \tag{5.74}
\end{align*}
$$

As seen in Section 5.3.1, the reduction in $R_{C}$ translates to a lower voltage gain. Also, the much smaller values of $R_{1}$ and $R_{2}$ here than in Example 5.11 introduce a low input impedance, loading the preceding stage. We compute the exact input impedance of this circuit in Section 5.3.1.

Exercise Repeat the above example if $V_{R E}$ is limited to 100 mV .

### 5.2.4 Self-Biased Stage

Another biasing scheme commonly used in discrete and integrated circuits is shown in Fig. 5.22. Called "self-biased" because the base current and voltage are provided from the collector, this stage exhibits many interesting and useful attributes.

Let us begin the analysis of the circuit with the observation that the base voltage is always lower than the collector voltage: $V_{X}=V_{Y}-I_{B} R_{B}$. A result of self-biasing, this important property guarantees that $Q_{1}$ operates in the active mode regardless of device and circuit parameters. For example, if $R_{C}$ increases indefinitely, $Q_{1}$ remains in the active region, a critical advantage over the circuit of Fig. 5.21.
image_name:Figure 5.22 Self-biased stage
description:
[
name: RB, type: Resistor, value: RB, ports: {N1: X, N2: Y}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Y}
name: Q1, type: NPN, ports: {C: Y, B: X, E: GND}
]
extrainfo:The circuit is a self-biased stage with an NPN transistor Q1. The base voltage is always lower than the collector voltage due to self-biasing, ensuring the transistor operates in the active mode. The collector current IC is approximately equal to the current through RC.

Figure 5.22 Self-biased stage.

We now determine the collector bias current by assuming $I_{B} \ll I_{C}$; i.e., $R_{C}$ carries a current equal to $I_{C}$, thereby yielding

$$
\begin{equation*}
V_{Y}=V_{C C}-R_{C} I_{C} . \tag{5.75}
\end{equation*}
$$

Also,

$$
\begin{align*}
V_{Y} & =R_{B} I_{B}+V_{B E}  \tag{5.76}\\
& =\frac{R_{B} I_{C}}{\beta}+V_{B E} \tag{5.77}
\end{align*}
$$

Equating the right-hand sides of Eqs. (5.75) and (5.77) gives

$$
\begin{equation*}
I_{C}=\frac{V_{C C}-V_{B E}}{R_{C}+\frac{R_{B}}{\beta}} \tag{5.78}
\end{equation*}
$$

As usual, we begin with an initial guess for $V_{B E}$, compute $I_{C}$, and utilize $V_{B E}=$ $V_{T} \ln \left(I_{C} / I_{S}\right)$ to improve the accuracy of our calculations.

Example Determine the collector current and voltage of $Q_{1}$ in Fig. 5.22 if $R_{C}=1 \mathrm{k} \Omega, R_{B}=10 \mathrm{k} \Omega$,
5.13 $V_{C C}=2.5 \mathrm{~V}, I_{S}=5 \times 10^{-17} \mathrm{~A}$, and $\beta=100$. Repeat the calculations for $R_{C}=2 \mathrm{k} \Omega$.

Solution Assuming $V_{B E}=0.8 \mathrm{~V}$, we have from Eq. (5.78):

$$
\begin{equation*}
I_{C}=1.545 \mathrm{~mA} \tag{5.79}
\end{equation*}
$$

and hence $V_{B E}=V_{T} \ln \left(I_{C} / I_{S}\right)=807.6 \mathrm{mV}$, concluding that the initial guess for $V_{B E}$ and the value of $I_{C}$ given by it are reasonably accurate. We also note that $R_{B} I_{B}=154.5 \mathrm{mV}$ and $V_{Y}=R_{B} I_{B}+V_{B E} \approx 0.955 \mathrm{~V}$.

If $R_{C}=2 \mathrm{k} \Omega$, then with $V_{B E}=0.8 \mathrm{~V}$, Eq. (5.78) gives

$$
\begin{equation*}
I_{C}=0.810 \mathrm{~mA} \tag{5.80}
\end{equation*}
$$

To check the validity of the initial guess, we write $V_{B E}=V_{T} \ln \left(I_{C} / I_{S}\right)=791 \mathrm{mV}$. Compared with $V_{C C}-V_{B E}$ in the numerator of Eq. (5.78), the $9-\mathrm{mV}$ error is negligible and the value of $I_{C}$ in Eq. (5.80) is acceptable. Since $R_{B} I_{B}=81 \mathrm{mV}, V_{Y} \approx 0.881 \mathrm{~V}$.

Exercise What happens if the base resistance is doubled?

Equation (5.78) and the preceding example suggest two important guidelines for the design of the self-biased stage: (1) $V_{C C}-V_{B E}$ must be much greater than the uncertainties
in the value of $V_{B E}$; (2) $R_{C}$ must be much greater than $R_{B} / \beta$ to lower sensitivity to $\beta$. In fact, if $R_{C} \gg R_{B} / \beta$, then

$$
\begin{equation*}
I_{C} \approx \frac{V_{C C}-V_{B E}}{R_{C}} \tag{5.81}
\end{equation*}
$$

and $V_{Y}=V_{C C}-I_{C} R_{C} \approx V_{B E}$. This result serves as a quick estimate of the transistor bias conditions.

Design Procedure Equation (5.78) together with the condition $R_{C} \gg R_{B} / \beta$ provides the basic expressions for the design of the circuit. With the required value of $I_{C}$ known from small-signal considerations, we choose $R_{C}=10 R_{B} / \beta$ and rewrite Eq. (5.78) as

$$
\begin{equation*}
I_{C}=\frac{V_{C C}-V_{B E}}{1.1 R_{C}} \tag{5.82}
\end{equation*}
$$

where $V_{B E}=V_{T} \ln \left(I_{C} / I_{S}\right)$. That is,

$$
\begin{align*}
R_{C} & =\frac{V_{C C}-V_{B E}}{1.1 I_{C}}  \tag{5.83}\\
R_{B} & =\frac{\beta R_{C}}{10} \tag{5.84}
\end{align*}
$$

The choice of $R_{B}$ also depends on small-signal requirements and may deviate from this value, but it must remain substantially lower than $\beta R_{C}$.
$\begin{array}{ll}\text { Example } & \text { Design the self-biased stage of Fig. } 5.22 \text { for } g_{m}=1 /(13 \Omega) \text { and } V_{C C}=1.8 \mathrm{~V} \text {. Assume } \\ \text { 5.14 } & I_{S}=5 \times 10^{-16} \mathrm{~A} \text { and } \beta=100 \text {. }\end{array}$ $I_{S}=5 \times 10^{-16} \mathrm{~A}$ and $\beta=100$.

Solution Since $g_{m}=I_{C} / V_{T}=1 /(13 \Omega)$, we have $I_{C}=2 \mathrm{~mA}, V_{B E}=754 \mathrm{mV}$, and

$$
\begin{align*}
R_{C} & \approx \frac{V_{C C}-V_{B E}}{1.1 I_{C}}  \tag{5.85}\\
& \approx 475 \Omega \tag{5.86}
\end{align*}
$$

Also,

$$
\begin{align*}
R_{B} & =\frac{\beta R_{C}}{10}  \tag{5.87}\\
& =4.75 \mathrm{k} \Omega \tag{5.88}
\end{align*}
$$

Note that $R_{B} I_{B}=95 \mathrm{mV}$, yielding a collector voltage of $754 \mathrm{mV}+95 \mathrm{mV}=$ 849 mV .

Exercise Repeat the above design with a supply voltage of 2.5 V .
image_name:Sensitive to β
description:
[
name: RB, type: Resistor, value: RB, ports: {N1: VDD, N2: b1}
name: RC, type: Resistor, value: RC, ports: {N1: VDD, N2: c1}
name: C1, type: Capacitor, value: C1, ports: {Np: c1, Nn: b1}
name: Q1, type: NPN, ports: {C: c1, B: b1, E: GND}
name: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: b1}
name: R2, type: Resistor, value: R2, ports: {N1: b1, N2: GND}
]
extrainfo:The circuit diagram shows two configurations of a transistor biasing circuit. The left configuration is sensitive to β (beta), while the right configuration is sensitive to resistor errors. Both configurations use an NPN transistor Q1, with different biasing resistors to stabilize the operating point.
image_name:Sensitive to Resistor Errors
description:
[
name: RB, type: Resistor, value: RB, ports: {N1: VDD, N2: b1}
name: RC, type: Resistor, value: RC, ports: {N1: VDD, N2: c1}
name: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: b1}
name: R2, type: Resistor, value: R2, ports: {N1: b1, N2: GND}
name: C1, type: Capacitor, value: C1, ports: {Np: c1, Nn: b1}
name: Q1, type: NPN, ports: {C: c1, B: b1, E: GND}
]
extrainfo:The circuit on the left is sensitive to beta variations, while the circuit on the right is sensitive to resistor errors. Both circuits utilize an NPN transistor Q1 with a common emitter configuration.

$\sqrt{2}$
image_name:Figure 5.23
description:
[
name: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: b1}
name: R2, type: Resistor, value: R2, ports: {N1: b1, N2: GND}
name: RE, type: Resistor, value: RE, ports: {N1: VRE, N2: GND}
name: RC, type: Resistor, value: RC, ports: {N1: VDD, N2: c1}
name: RB, type: Resistor, value: RB, ports: {N1: b1, N2: c1}
name: C1, type: Capacitor, value: C1, ports: {Np: c1, Nn: b1}
name: I1, type: CurrentSource, value: I1, ports: {Np: VDD, Nn: b1}
name: Q1, type: NPN, ports: {C: c1, B: b1, E: GND}
]
extrainfo:The circuit on the left is sensitive to beta variations, while the circuit on the right is sensitive to resistor errors. Both circuits utilize an NPN transistor Q1 with a common emitter configuration. The top circuit includes a current source I1 and resistors R1, R2, RE, and RC, while the bottom circuit has a resistor RB and is always in active mode.

Figure 5.23 Summary of biasing techniques.

Figure 5.23 summarizes the biasing principles studied in this section.

### 5.2.5 Biasing of PNP Transistors

The dc bias topologies studied thus far incorporate $n p n$ transistors. Circuits using pnp devices follow the same analysis and design procedures while requiring attention to voltage and current polarities. We illustrate these points with the aid of some examples.

Did you know?

The self-biased stage incorporates "negative feedback" to stabilize the bias. For example, if the collector voltage tends to increase due to a temperature change, then resistor $R_{B}$ passes this voltage increase to the base, raising the $V_{B E}$ and hence the collector current. The collector voltage thus falls back to nearly its original value.

The use of negative feedback also improves the speed of the circuit. In fact, optical communication links used in the backbone of the Internet often employ this type of amplifier topology 50 as to accommodate data rates as high as $40 \mathrm{~Gb} / \mathrm{s}$. Next time you send an email, bear in mind that your data may go through a self-biased stage.

Example Calculate the collector and voltage of $Q_{1}$ in the circuit of Fig. 5.24 and determine the 5.15 maximum allowable value of $R_{C}$ for operation in the active mode.
image_name:Figure 5.24
description:
[
name: Q1, type: PNP, ports: {C: Y, B: X, E: VCC}
name: RB, type: Resistor, value: RB, ports: {N1: X, N2: GND}
name: RC, type: Resistor, value: RC, ports: {N1: Y, N2: GND}
]
extrainfo:The circuit is a simple biasing stage for a PNP transistor. The base is connected to a resistor RB which is also connected to ground, and the collector is connected through resistor RC to ground. The emitter is connected to VCC.

Figure 5.24 Simple biasing of pnp stage.
Solution The topology is the same as that in Fig. 5.13 and we have

$$
\begin{equation*}
I_{B} R_{B}+V_{E B}=V_{C C} \tag{5.89}
\end{equation*}
$$

That is,

$$
\begin{equation*}
I_{B}=\frac{V_{C C}-V_{E B}}{R_{B}} \tag{5.90}
\end{equation*}
$$

and

$$
\begin{equation*}
I_{C}=\beta \frac{V_{C C}-V_{E B}}{R_{B}} \tag{5.91}
\end{equation*}
$$

The circuit suffers from sensitivity to $\beta$.
If $R_{C}$ is increased, $V_{Y}$ rises, thus approaching $V_{X}\left(=V_{C C}-V_{E B}\right)$ and bringing $Q_{1}$ closer to saturation. The transistor enters saturation at $V_{Y}=V_{X}$, i.e.,

$$
\begin{equation*}
I_{C} R_{C, \max }=V_{C C}-V_{E B} \tag{5.92}
\end{equation*}
$$

and hence

$$
\begin{align*}
R_{C, \max } & =\frac{V_{C C}-V_{E B}}{I_{C}}  \tag{5.93}\\
& =\frac{R_{B}}{\beta} . \tag{5.94}
\end{align*}
$$

From another perspective, since $V_{X}=I_{B} R_{B}$ and $V_{Y}=I_{C} R_{C}$, we have $I_{B} R_{B}=$ $I_{C} R_{C, \max }$ as the condition for edge of saturation, obtaining $R_{B}=\beta R_{C, \max }$.

Exercise For a given $R_{C}$, what value of $R_{B}$ places the device at the edge of saturation?
image_name:Figure 5.25 (a)
description:
[

]
extrainfo:The task is to determine the collector current and voltage of Q1 in the circuit of Fig. 5.25(a), which is a PNP stage with resistive divider biasing. The diagram is complex and does not provide device details or node annotations for a netlist generation.
image_name:Figure 5.25 (b)
description:
[

]
extrainfo:The task is to determine the collector current and voltage of Q1 in the circuit of Fig. 5.25(a). However, the circuit diagram for Fig. 5.25(a) is not provided here. The context involves analyzing a PNP stage with resistive divider biasing and its Thevenin equivalent.

image_name:Figure 5.25 (a)
description:
[
name: R1, type: Resistor, value: R1, ports: {N1: X, N2: GND}
name: R2, type: Resistor, value: R2, ports: {N1: VCC, N2: X}
name: RC, type: Resistor, value: RC, ports: {N1: Y, N2: GND}
name: Q1, type: PNP, ports: {C: Y, B: X, E: VCC}
]
extrainfo:The circuit is a PNP transistor stage with resistive divider biasing. The collector current (IC) flows through RC to ground. The base current (IB) is drawn from the voltage divider formed by R1 and R2. The emitter is connected to VCC.

(a)
image_name:Figure 5.25 (b)
description:
[
name: VThev, type: VoltageSource, value: VThev, ports: {Np: VThev, Nn: GND}
name: RThev, type: Resistor, value: RThev, ports: {N1: VThev, N2: X}
name: Q1, type: PNP, ports: {C: Y, B: X, E: VCC}
name: RC, type: Resistor, value: RC, ports: {N1: Y, N2: GND}
]
extrainfo:The circuit is a PNP transistor stage with a Thevenin equivalent voltage source and resistor. The base current (IB) is drawn from VThev through RThev. The collector current (IC) flows through RC to ground. The emitter is connected to VCC.

(b)

Figure 5.25 (a) $P N P$ stage with resistive divider biasing, (b) Thevenin equivalent of divider and $V_{C C}$.

Solution As a general case, we assume $I_{B}$ is significant and construct the Thevenin equivalent of the voltage divider as depicted in Fig. 5.25(b):

$$
\begin{align*}
V_{\text {Thev }} & =\frac{R_{1}}{R_{1}+R_{2}} V_{C C}  \tag{5.95}\\
R_{\text {Thev }} & =R_{1} \| R_{2} \tag{5.96}
\end{align*}
$$

Adding the voltage drop across $R_{\text {Thev }}$ and $V_{E B}$ to $V_{\text {Thev }}$ yields

$$
\begin{equation*}
V_{\text {Thev }}+I_{B} R_{\text {Thev }}+V_{E B}=V_{C C} \tag{5.97}
\end{equation*}
$$

that is,

$$
\begin{align*}
I_{B} & =\frac{V_{C C}-V_{T h e v}-V_{E B}}{R_{T h e v}}  \tag{5.98}\\
& =\frac{\frac{R_{2}}{R_{1}+R_{2}} V_{C C}-V_{E B}}{R_{\text {Thev }}} \tag{5.99}
\end{align*}
$$

It follows that

$$
\begin{equation*}
I_{C}=\beta \frac{\frac{R_{2}}{R_{1}+R_{2}} V_{C C}-V_{E B}}{R_{T h e v}} \tag{5.100}
\end{equation*}
$$

As in Example 5.9, some iteration between $I_{C}$ and $V_{E B}$ may be necessary.
Equation (5.100) indicates that if $I_{B}$ is significant, then the transistor bias heavily depends on $\beta$. On the other hand, if $I_{B} \ll I_{1}$, we equate the voltage drop across $R_{2}$ to $V_{E B}$, thereby obtaining the collector current:

$$
\begin{align*}
\frac{R_{2}}{R_{1}+R_{2}} V_{C C} & =V_{E B}  \tag{5.101}\\
I_{C} & =I_{S} \exp \left(\frac{R_{2}}{R_{1}+R_{2}} \frac{V_{C C}}{V_{T}}\right) \tag{5.102}
\end{align*}
$$

Note that this result is identical to Eq. (5.30).
Exercise What is the maximum value of $R_{C}$ if $Q_{1}$ must remain in soft saturation?

Example
5.17

Assuming a negligible base current, calculate the collector current and voltage of $Q_{1}$ in the circuit of Fig. 5.26. What is the maximum allowable value of $R_{C}$ for $Q_{1}$ to operate in the forward active region?
image_name:Figure 5.26
description:
[
name: R1, type: Resistor, value: R1, ports: {N1: X, N2: GND}
name: R2, type: Resistor, value: R2, ports: {N1: VCC, N2: X}
name: RE, type: Resistor, value: RE, ports: {N1: VCC, N2: E1}
name: RC, type: Resistor, value: RC, ports: {N1: Y, N2: GND}
name: Q1, type: PNP, ports: {C: Y, B: X, E: E1}
]
extrainfo:This circuit is a PNP transistor stage with a degeneration resistor RE. The circuit is powered by VCC and uses resistors R1 and R2 to set the base voltage. The collector current IC flows through RC to ground.

Figure 5.26 $P N P$ stage with degeneration resistor.

Solution
With $I_{B} \ll I_{1}$, we have $V_{X}=V_{C C} R_{1} /\left(R_{1}+R_{2}\right)$. Adding to $V_{X}$ the emitter-base voltage and the drop across $R_{E}$, we obtain

$$
\begin{equation*}
V_{X}+V_{E B}+R_{E} I_{E}=V_{C C} \tag{5.103}
\end{equation*}
$$

and hence

$$
\begin{equation*}
I_{E}=\frac{1}{R_{E}}\left(\frac{R_{2}}{R_{1}+R_{2}} V_{C C}-V_{E B}\right) \tag{5.104}
\end{equation*}
$$

Using $I_{C} \approx I_{E}$, we can compute a new value for $V_{E B}$ and iterate if necessary. Also, with $I_{B}=I_{C} / \beta$, we can verify the assumption $I_{B} \ll I_{1}$.

In arriving at Eq. (5.104), we have written a KVL from $V_{C C}$ to ground, Eq. (5.103). But a more straightforward approach is to recognize that the voltage drop across $R_{2}$ is equal to $V_{E B}+I_{E} R_{E}$, i.e.,

$$
\begin{equation*}
V_{C C} \frac{R_{2}}{R_{1}+R_{2}}=V_{E B}+I_{E} R_{E} \tag{5.105}
\end{equation*}
$$

which yields the same result as in Eq. (5.104).
The maximum allowable value of $R_{C}$ is obtained by equating the base and collector voltages:

$$
\begin{align*}
V_{C C} \frac{R_{1}}{R_{1}+R_{2}} & =R_{C, \max } I_{C}  \tag{5.106}\\
& \approx \frac{R_{C, \max }}{R_{E}}\left(\frac{R_{2}}{R_{1}+R_{2}} V_{C C}-V_{E B}\right) \tag{5.107}
\end{align*}
$$

It follows that

$$
\begin{equation*}
R_{C, \max }=R_{E} V_{C C} \frac{R_{1}}{R_{1}+R_{2}} \cdot \frac{1}{\frac{R_{2}}{R_{1}+R_{2}} V_{C C}-V_{E B}} \tag{5.108}
\end{equation*}
$$

Exercise $\quad$ Repeat the above example if $R_{2}=\infty$.

Example Determine the collector current and voltage of $Q_{1}$ in the self-biased circuit of 5.18 Fig. 5.27.
image_name:Figure 5.27
description:
[
name: Q1, type: PNP, ports: {C: VCC, B: X, E: Y}
name: RB, type: Resistor, value: RB, ports: {N1: X, N2: Y}
name: RC, type: Resistor, value: RC, ports: {N1: Y, N2: GND}
]
extrainfo:This circuit is a self-biased PNP transistor stage. The collector is connected to VCC, and the emitter is connected through RC to ground. The base is connected to node X through RB.

Figure 5.27 Self-biased $p n p$ stage.

Solution We must write a KVL from $V_{C C}$ through the emitter-base junction of $Q_{1}, R_{B}$, and $R_{C}$ to ground. Since $\beta \gg 1$ and hence $I_{C} \gg I_{B}, R_{C}$ carries a current approximately equal to $I_{C}$, creating $V_{Y}=R_{C} I_{C}$. Moreover, $V_{X}=R_{B} I_{B}+V_{Y}=R_{B} I_{B}+R_{C} I_{C}$, yielding

$$
\begin{align*}
V_{C C} & =V_{E B}+V_{X}  \tag{5.109}\\
& =V_{E B}+R_{B} I_{B}+I_{C} R_{C}  \tag{5.110}\\
& =V_{E B}+\left(\frac{R_{B}}{\beta}+R_{C}\right) I_{C} \tag{5.111}
\end{align*}
$$

Thus,

$$
\begin{equation*}
I_{C}=\frac{V_{C C}-V_{E B}}{\frac{R_{B}}{\beta}+R_{C}} \tag{5.112}
\end{equation*}
$$

a result similar to Eq. (5.78). As usual, we begin with a guess for $V_{E B}$, compute $I_{C}$, and determine a new value for $V_{E B}$, etc. Note that, since the base is higher than the collector voltage, $Q_{1}$ always remains in the active mode.

Exercise How far is $Q_{1}$ from saturation?

## 5.3 BIPOLAR AMPLIFIER TOPOLOGIES

Following our detailed study of biasing, we can now delve into different amplifier topologies and examine their small-signal properties. ${ }^{6}$

Since the bipolar transistor contains three terminals, we may surmise that three possibilities exist for applying the input signal to the device, as conceptually illustrated in Figs. 5.28(a)-(c). Similarly, the output signal can be sensed from any of the terminals (with respect to ground) [Figs. 5.28(d)-(f)], leading to nine possible combinations of input and output networks and hence nine amplifier topologies.
image_name:(a)
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: Q, type: NPN, ports: {C: LOAD, B: Vin, E: GND}
]
extrainfo:This is a common-emitter amplifier configuration. The input voltage Vin is applied to the base of the NPN transistor, and the output is taken from the collector, which is connected to the load. The emitter is grounded.
image_name:(b)
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: Q, type: NPN, ports: {C: LOAD, B: Vin, E: LOAD}
]
extrainfo:The circuit diagram (b) shows an NPN transistor Q with the base connected to Vin, the collector connected to LOAD, and the emitter also connected to LOAD. The input voltage source Vin is connected between Vin and GND.
image_name:(c)
description:
[
name: Q, type: NPN, ports: {C: LOAD, B: Vin, E: LOAD}
]
extrainfo:The diagram illustrates a bipolar transistor with an input at the base and a load connected to both the collector and emitter. This configuration does not allow the input voltage to affect the base or emitter voltages effectively, making it unsuitable for amplification purposes.
image_name:(d)
description:
[
name: Q, type: NPN, ports: {C: Vout, B: LOAD, E: LOAD}
]
extrainfo:The circuit diagram (d) represents one of the possible output connections for a bipolar transistor, where the output is taken from the collector of the NPN transistor. The load is connected between the emitter and base, and the output is labeled as Vout.
image_name:(e)
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: Q, type: NPN, ports: {C: LOAD, B: Vout, E: LOAD}
]
extrainfo:The circuit diagram (e) shows an NPN transistor with the base connected to the output node Vout, the collector connected to the LOAD, and the emitter also connected to the LOAD. The input voltage source Vin is connected between the Vin node and ground.
image_name:(f)
description:
[
name: Q, type: NPN, ports: {C: LOAD, B: LOAD, E: Vout}
]
extrainfo:The circuit diagram (f) shows a configuration where the NPN transistor Q has its collector and base connected to the LOAD, and the emitter connected to Vout.

Figure 5.28 Possible input and output connections to a bipolar transistor.

However, as seen in Chapter 4, bipolar transistors operating in the active mode respond to base-emitter voltage variations by varying their collector current. This property rules out the input connection shown in Fig. 5.28(c) because here $V_{i n}$ does not affect the base or emitter voltages. Also, the topology in Fig. 5.28(f) proves of no value as $V_{\text {out }}$ is not a function of the collector current. The number of possibilities therefore falls to four. But we note that the input and output connections in

[^6]Figs. 5.28(b) and (e) remain incompatible because $V_{\text {out }}$ would be sensed at the input node (the emitter) and the circuit would provide no function.

The foregoing observations reveal three possible amplifier topologies. We study each carefully, seeking to compute its gain and input and output impedances. In all cases, the bipolar transistors operate in the active mode. The reader is encouraged to review Examples (5.2)-(5.4) and the three resulting rules illustrated in Fig. 5.7 before proceeding further.

### 5.3.1 Common-Emitter Topology

Our initial thoughts in Section 4.1 pointed to the circuit of Fig. 4.1(b) and hence the topology of Fig. 4.25 as an amplifier. If the input signal is applied to the base [Fig. 5.28(a)] and the output signal is sensed at the collector [Fig. 5.28(d)], the circuit is called a "commonemitter" (CE) stage (Fig. 5.29). We have encountered and analyzed this circuit in different contexts without giving it a name. The term "common-emitter" is used because the emitter terminal is grounded and hence appears in common to the input and output ports. Nevertheless, we identify the stage based on the input and output connections (to the base and from the collector, respectively) so as to avoid confusion in more complex topologies.
image_name:Figure 5.29 Common-emitter stage
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}
name: Q1, type: NPN, ports: {C: Vout, B: Vin, E: GND}
]
extrainfo:This is a common-emitter amplifier stage. The input is applied to the base of the transistor Q1, and the output is taken from the collector. The emitter is grounded.

Figure 5.29 Common-emitter stage.

We deal with the CE amplifier in two phases: (a) analysis of the CE core to understand its fundamental properties, and (b) analysis of the CE stage including the bias circuitry as a more realistic case.

Analysis of CE Core Recall from the definition of transconductance in Section 4.4.3 that a small increment of $\Delta V$ applied to the base of $Q_{1}$ in Fig. 5.29 increases the collector current by $g_{m} \Delta V$ and hence the voltage drop across $R_{C}$ by $g_{m} \Delta V R_{C}$. In order to examine the amplifying properties of the CE stage, we construct the small-signal equivalent of the circuit, shown in Fig. 5.30. As explained in Chapter 4, the supply voltage node, $V_{C C}$, acts
image_name:Figure 5.30 Small-signal model of CE stage
description:
[
name: rπ, type: Resistor, value: rπ, ports: {N1: Vin, N2: GND}
name: gmvπ, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: Vout}
name: RC, type: Resistor, value: RC, ports: {N1: Vout, N2: GND}
]
extrainfo:The circuit is a small-signal model of a common-emitter (CE) stage amplifier. The input voltage is applied across rπ, and the output is taken across RC. The transconductance amplifier is represented by gmvπ.

Figure 5.30 Small-signal model of CE stage.
as an ac ground because its value remains constant with time. We neglect the Early effect for now.

Let us first compute the small-signal voltage gain $A_{v}=v_{o u t} / v_{i n}$. Beginning from the output port and writing a KCL at the collector node, we have

$$
\begin{equation*}
-\frac{v_{\text {out }}}{R_{C}}=g_{m} v_{\pi} \tag{5.113}
\end{equation*}
$$

and $v_{\pi}=v_{i n}$. It follows that

$$
\begin{equation*}
A_{v}=-g_{m} R_{C} \tag{5.114}
\end{equation*}
$$

Equation (5.114) embodies two interesting and important properties of the CE stage. First, the small-signal gain is negative because raising the base voltage and hence the collector current in Fig. 5.29 lowers $V_{\text {out }}$. Second, $A_{v}$ is proportional to $g_{m}$ (i.e., the collector bias current) and the collector resistor, $R_{C}$.

Interestingly, the voltage gain of the stage is limited by the supply voltage. A higher collector bias current or a larger $R_{C}$ demands a greater voltage drop across $R_{C}$, but this drop cannot exceed $V_{C C}$. In fact, denoting the dc drop across $R_{C}$ with $V_{R C}$ and writing $g_{m}=I_{C} / V_{T}$, we express Eq. (5.113) as

$$
\begin{align*}
\left|A_{v}\right| & =\frac{I_{C} R_{C}}{V_{T}}  \tag{5.115}\\
& =\frac{V_{R C}}{V_{T}} \tag{5.116}
\end{align*}
$$

Since $V_{R C}<V_{C C}$,

$$
\begin{equation*}
\left|A_{v}\right|<\frac{V_{C C}}{V_{T}} \tag{5.117}
\end{equation*}
$$

Furthermore, the transistor itself requires a minimum collector-emitter voltage of about $V_{B E}$ to remain in the active region, lowering the limit to

$$
\begin{equation*}
\left|A_{v}\right|<\frac{V_{C C}-V_{B E}}{V_{T}} \tag{5.118}
\end{equation*}
$$

Design a CE core with $V_{C C}=1.8 \mathrm{~V}$ and a power budget, $P$, of 1 mW while achieving maximum voltage gain.

Solution $\quad$ Since $P=I_{C} \cdot V_{C C}=1 \mathrm{~mW}$, we have $I_{C}=0.556 \mathrm{~mA}$. The value of $R_{C}$ that places $Q_{1}$ at the edge of saturation is given by

$$
\begin{equation*}
V_{C C}-R_{C} I_{C}=V_{B E}, \tag{5.119}
\end{equation*}
$$

which, along with $V_{B E} \approx 800 \mathrm{mV}$, yields

$$
\begin{align*}
R_{C} & \leq \frac{V_{C C}-V_{B E}}{I_{C}}  \tag{5.120}\\
& \leq 1.8 \mathrm{k} \Omega . \tag{5.121}
\end{align*}
$$

The voltage gain is therefore equal to

$$
\begin{align*}
A_{v} & =-g_{m} R_{C}  \tag{5.122}\\
& =-38.5 \tag{5.123}
\end{align*}
$$

Under this condition, an input signal drives the transistor into saturation. As illustrated in Fig. 5.31(a), a $2-\mathrm{mV}_{\mathrm{pp}}$ input results in a $77-\mathrm{mV}_{\mathrm{pp}}$ output, forward-biasing the basecollector junction for half of each cycle. Nevertheless, so long as $Q_{1}$ remains in soft saturation $\left(V_{B C}>400 \mathrm{mV}\right)$, the circuit amplifies properly.

A more aggressive design may allow $Q_{1}$ to operate in soft saturation, e.g., $V_{C E} \approx 400 \mathrm{mV}$ and hence

$$
\begin{align*}
R_{C} & \leq \frac{V_{C C}-400 \mathrm{mV}}{I_{C}}  \tag{5.124}\\
& \leq 2.52 \mathrm{k} \Omega \tag{5.125}
\end{align*}
$$

In this case, the maximum voltage gain is given by

$$
\begin{equation*}
A_{v}=-53.9 \tag{5.126}
\end{equation*}
$$

Of course, the circuit can now tolerate only very small voltage swings at the output. For example, a 2-mV $\mathrm{mp}_{\mathrm{pp}}$ input signal gives rise to a $107.8-\mathrm{mV}_{\mathrm{pp}}$ output, driving $Q_{1}$ into heavy saturation [Fig. 5.31(b)]. We say the circuit suffers from a trade-off between voltage gain and voltage "headroom."
image_name:Figure 5.31 (a)
description:
[
name: Q1, type: NPN, ports: {C: c1, B: b1, E: GND}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: c1}
name: C1, type: Capacitor, value: C1, ports: {Np: c1, Nn: Vout}
name: VCC, type: VoltageSource, value: VCC, ports: {Np: VCC, Nn: GND}
]
extrainfo:The circuit is a common-emitter (CE) amplifier stage. It shows voltage gain and saturation effects with an input signal of 2 mV peak-to-peak and an output signal of 107.8 mV peak-to-peak in heavy saturation. The circuit operates with a trade-off between voltage gain and headroom.
image_name:Figure 5.31 (b)
description:
[
name: Q1, type: NPN, ports: {C: c1, B: b1, E: GND}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: c1}
name: C1, type: Capacitor, value: C1, ports: {Np: c1, Nn: Vout}
name: VCC, type: VoltageSource, value: VCC, ports: {Np: VCC, Nn: GND}
]
extrainfo:The circuit is a common-emitter (CE) amplifier stage. It shows the voltage gain and swing limitations, with a 2 mV input signal leading to a 107.8 mV output in heavy saturation. The diagram illustrates the trade-off between voltage gain and headroom.

Figure 5.31 CE stage (a) with some signal levels, (b) in saturation.

Exercise Repeat the above example if $V_{C C}=2.5 \mathrm{~V}$ and compare the results.
image_name:(a)
description:
[
name: Vx, type: VoltageSource, value: Vx, ports: {Np: Vx, Nn: GND}
name: rπ, type: Resistor, value: rπ, ports: {N1: Vx, N2: GND}
name: gmvπ, type: VoltageControlledCurrentSource, value: gmvπ, ports: {Np: GND, Nn: Vx}
name: RC, type: Resistor, value: RC, ports: {N1: Vx, N2: GND}
]
extrainfo:The circuit is a common-emitter (CE) amplifier stage with input and output impedance calculations shown. The input impedance is represented by rπ, and the output impedance involves RC. The voltage gain and swing limitations are illustrated, with a 2 mV input signal resulting in a 107.8 mV output in heavy saturation.
image_name:(b)
description:
[
name: Vx, type: VoltageSource, value: Vx, ports: {Np: Vx, Nn: GND}
name: rπ, type: Resistor, value: rπ, ports: {N1: Vx, N2: vπ}
name: gmvπ, type: VoltageControlledCurrentSource, value: gmvπ, ports: {Np: GND, Nn: vπ}
name: RC, type: Resistor, value: RC, ports: {N1: Vx, N2: GND}
name: Vx, type: VoltageSource, value: Vx, ports: {Np: Vx, Nn: GND}
]
extrainfo:The circuit diagram (b) is used for calculating the input and output impedance of a common-emitter (CE) amplifier stage. It shows the connections of the voltage source, resistors, and a voltage-controlled current source. The input impedance is determined by the resistor rπ, and the output impedance involves the resistor RC and the current source gmvπ.

Figure 5.32 (a) Input and (b) output impedance calculation of CE stage.

Let us now calculate the I/O impedances of the CE stage. Using the equivalent circuit depicted in Fig. 5.32(a), we write

$$
\begin{align*}
R_{i n} & =\frac{v_{X}}{i_{X}}  \tag{5.127}\\
& =r_{\pi} \tag{5.128}
\end{align*}
$$

Thus, the input impedance is simply equal to $\beta / g_{m}=\beta V_{T} / I_{C}$ and decreases as the collector bias increases.

The output impedance is obtained from Fig. 5.32(b), where the input voltage source is set to zero (replaced with a short). Since $v_{\pi}=0$, the dependent current source also vanishes, leaving $R_{C}$ as the only component seen by $v_{X}$. In other words,

$$
\begin{align*}
R_{\text {out }} & =\frac{v_{X}}{i_{X}}  \tag{5.129}\\
& =R_{C} \tag{5.130}
\end{align*}
$$

The output impedance therefore trades with the voltage gain, $-g_{m} R_{C}$.
Figure 5.33 summarizes the trade-offs in the performance of the CE topology along with the parameters that create such trade-offs. For example, for a given value of output impedance, $R_{C}$ is fixed and the voltage gain can be increased by increasing $I_{C}$, thereby lowering both the voltage headroom and the input impedance.
image_name:Figure 5.33 CE stage trade-offs
description:The diagram labeled "Figure 5.33 CE stage trade-offs" illustrates the trade-offs inherent in the common-emitter (CE) amplifier stage. It is organized in a triangular format with three primary factors influencing the performance of the CE stage: Voltage Gain, Input Impedance, and Output Impedance.

1. **Main Components:**
- **Voltage Gain (A_v):** Central to the diagram, indicating the amplification factor of the CE stage. It is influenced by both the transconductance (g_m) and the collector resistance (R_C).
- **Input Impedance (R_in):** Located at the bottom left, represented as β/g_m, where β is the current gain and g_m is the transconductance.
- **Output Impedance (R_out):** Positioned at the bottom right, denoted as R_C, representing the resistance at the output of the CE stage.
- **Voltage Headroom (Swings):** At the top, indicating the available voltage range for signal swings, which is affected by the voltage gain.

2. **Flow of Information or Control:**
- The diagram shows the interdependence between these parameters. Increasing g_m, for example, affects both the input impedance and the voltage gain, demonstrating a trade-off.
- The arrows between the components suggest that changes in one parameter (e.g., R_C) will influence the others (e.g., Voltage Gain and Output Impedance).

3. **Labels, Annotations, and Key Indicators:**
- Each corner of the triangle is labeled with the corresponding parameter, and the relationships between them are indicated with arrows.
- The annotations clarify the mathematical relationships, such as R_in = β/g_m and R_out = R_C, linking these parameters to the overall voltage gain.

4. **Overall System Function:**
- The primary function of this diagram is to summarize the trade-offs involved in designing a CE amplifier stage. By adjusting parameters like g_m and R_C, one can optimize for desired characteristics such as input/output impedance and voltage gain, but must consider the impact on voltage headroom and other parameters. This visual representation helps in understanding how changes in one aspect of the circuit can impact overall performance.

Figure 5.33 CE stage trade-offs.

| $\begin{gathered} \text { Example } \\ 5.20 \end{gathered}$ | A CE stage must achieve an input impedance of $R_{\text {in }}$ and an output impedance of $R_{\text {out }}$. What is the voltage gain of the circuit? |
| :---: | :---: |
| Solution | Since $R_{\text {in }}=r_{\pi}=\beta / g_{m}$ and $R_{\text {out }}=R_{C}$, we have |
|  | $A_{v}=-g_{m} R_{C}$ |
|  | $\begin{equation*} =-\beta \frac{R_{\text {out }}}{R_{\text {in }}} \tag{5.132} \end{equation*}$ |
|  | Interestingly, if the I/O impedances are specified, then the voltage gain is automatically set. We will develop other circuits in this book that avoid this "coupling" of design specifications. |

Exercise What happens to this result if the supply voltage is halved?

Inclusion of Early Effect Equation (5.114) suggests that the voltage gain of the CE stage can be increased indefinitely if $R_{C} \rightarrow \infty$ while $g_{m}$ remains constant. Mentioned in Section 4.4.5, this trend appears valid if $V_{C C}$ is also raised to ensure the transistor remains in the active mode. From an intuitive point of view, a given change in the input voltage and hence the collector current gives rise to an increasingly larger output swing as $R_{C}$ increases.

In reality, however, the Early effect limits the voltage gain even if $R_{C}$ approaches infinity. Since achieving a high gain proves critical in circuits such as operational amplifiers, we must reexamine the above derivations in the presence of the Early effect.

Figure 5.34 depicts the small-signal equivalent circuit of the CE stage including the transistor output resistance. Note that $r_{O}$ appears in parallel with $R_{C}$, allowing us to rewrite Eq. (5.114) as

$$
\begin{equation*}
A_{v}=-g_{m}\left(R_{C} \| r_{O}\right) \tag{5.133}
\end{equation*}
$$

We also recognize that the input impedance remains equal to $r_{\pi}$ whereas the output impedance falls to

$$
\begin{equation*}
R_{\text {out }}=R_{C} \| r_{O} \tag{5.134}
\end{equation*}
$$

image_name:Figure 5.34 CE stage including Early effect
description:
[
name: rπ, type: Resistor, value: rπ, ports: {N1: Vin, N2: GND}
name: gmvπ, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: Vout}
name: ro, type: Resistor, value: ro, ports: {N1: Vout, N2: GND}
name: RC, type: Resistor, value: RC, ports: {N1: Vout, N2: GND}
]
extrainfo:The circuit is a common-emitter (CE) stage with the Early effect included. It features a voltage-controlled current source representing the transconductance, and resistors representing the input resistance (rπ) and output resistance (ro in parallel with RC). The input is labeled as Vin and the output as Vout.

Figure 5.34 CE stage including Early effect.

Example The circuit of Fig. 5.29 is biased with a collector current of 1 mA and $R_{C}=1 \mathrm{k} \Omega$. If 5.21 $\beta=100$ and $V_{A}=10 \mathrm{~V}$, determine the small-signal voltage gain and the I/O impedances.

Solution We have

$$
\begin{align*}
g_{m} & =\frac{I_{C}}{V_{T}}  \tag{5.135}\\
& =(26 \Omega)^{-1} \tag{5.136}
\end{align*}
$$

and

$$
\begin{align*}
r_{O} & =\frac{V_{A}}{I_{C}}  \tag{5.137}\\
& =10 \mathrm{k} \Omega \tag{5.138}
\end{align*}
$$

Thus,

$$
\begin{align*}
A_{v} & =-g_{m}\left(R_{C} \| r_{O}\right)  \tag{5.139}\\
& \approx 35 \tag{5.140}
\end{align*}
$$

(As a comparison, if $V_{A}=\infty$, then $A_{v} \approx 38$.) For the I/O impedances, we write

$$
\begin{align*}
R_{i n} & =r_{\pi}  \tag{5.141}\\
& =\frac{\beta}{g_{m}}  \tag{5.142}\\
& =2.6 \mathrm{k} \Omega \tag{5.143}
\end{align*}
$$

and

$$
\begin{align*}
R_{\text {out }} & =R_{C} \| r_{O}  \tag{5.144}\\
& =0.91 \mathrm{k} \Omega \tag{5.145}
\end{align*}
$$

Exercise Calculate the gain if $V_{A}=5 \mathrm{~V}$.

Let us determine the gain of a CE stage as $R_{C} \rightarrow \infty$. Equation (5.132) gives

$$
\begin{equation*}
A_{v}=-g_{m} r_{O} \tag{5.146}
\end{equation*}
$$

Called the "intrinsic gain" of the transistor to emphasize that no external device loads the circuit, $g_{m} r_{O}$ represents the maximum voltage gain provided by a single transistor, playing a fundamental role in high-gain amplifiers.

We now substitute $g_{m}=I_{C} / V_{T}$ and $r_{O}=V_{A} / I_{C}$ in Eq. (5.133), thereby arriving at

$$
\begin{equation*}
\left|A_{v}\right|=\frac{V_{A}}{V_{T}} \tag{5.147}
\end{equation*}
$$

Interestingly, the intrinsic gain of a bipolar transistor is independent of the bias current. In modern integrated bipolar transistors, $V_{A}$ falls in the vicinity of 5 V , yielding
a gain of nearly $200 .{ }^{7}$ In this book, we assume $g_{m} r_{O} \gg 1$ (and hence $r_{O} \gg 1 / g_{m}$ ) for all transistors.

Another parameter of the CE stage that may prove relevant in some applications is the "current gain," defined as

$$
\begin{equation*}
A_{I}=\frac{i_{\text {out }}}{i_{\text {in }}} \tag{5.148}
\end{equation*}
$$

where $i_{\text {out }}$ denotes the current delivered to the load and $i_{\text {in }}$ the current flowing to the input. We rarely deal with this parameter for voltage amplifiers, but note that $A_{I}=\beta$ for the stage shown in Fig. 5.29 because the entire collector current is delivered to $R_{C}$.

Did you know?

The Early effect was discovered by James Early, who worked under Shockley at Bell Laboratories in the 1950s. Early was also involved in the development of transistors and solar cells for satellites. Early was the first to recognize that the speed of a bipolar transistor can be improved if the base region is made much thinner than the collector region.

CE Stage With Emitter Degeneration In many applications, the CE core of Fig. 5.29 is modified as shown in Fig. 5.35(a), where a resistor $R_{E}$ appears in series with the emitter. Called "emitter degeneration," this technique improves the "linearity" of the circuit and provides many other interesting properties that are studied in more advanced courses.
image_name:Figure 5.35 (a)
description:
[
name: Q1, type: NPN, ports: {C: Vout, B: Vin, E: e1}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}
name: RE, type: Resistor, value: RE, ports: {N1: e1, N2: GND}
]
extrainfo:This is a common-emitter amplifier circuit with emitter degeneration using a resistor RE. The resistor RC is connected to the collector of the NPN transistor Q1, and RE is connected to its emitter. The input is applied at the base (Vin), and the output is taken from the collector (Vout). The circuit is powered by VCC.

(a)
image_name:Figure 5.35 (a)
description:
[
name: Q1, type: NPN, ports: {C: Vout, B: b1, E: e1}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}
name: RE, type: Resistor, value: RE, ports: {N1: e1, N2: GND}
]
extrainfo:This is a common-emitter amplifier circuit with emitter degeneration using a resistor RE. The resistor RC is connected to the collector of the NPN transistor Q1, and RE is connected to its emitter. The input is applied at the base (b1), and the output is taken from the collector (Vout). The circuit is powered by VCC.

(b)

Figure 5.35 (a) CE stage with degeneration, (b) effect of input voltage change.
As with the CE core, we intend to determine the voltage gain and I/O impedances of the circuit, assuming $Q_{1}$ is biased properly. Before delving into a detailed analysis, it is instructive to make some qualitative observations. Suppose the input signal raises the base voltage by $\Delta V$ [Fig. 5.35(b)]. If $R_{E}$ were zero, then the base-emitter voltage would also increase by $\Delta V$, producing a collector current change of $g_{m} \Delta V$. But with $R_{E} \neq 0$, some fraction of $\Delta V$ appears across $R_{E}$, thus leaving a voltage change across the BE junction that is less than $\Delta V$. Consequently, the collector current change is also less than $g_{m} \Delta V$. We therefore expect that the voltage gain of the degenerated stage is lower than that of the CE core with no degeneration. While undesirable, the reduction in gain is incurred to improve other aspects of the performance.

How about the input impedance? Since the collector current change is less than $g_{m} \Delta V$, the base current also changes by less than $g_{m} \Delta V / \beta$, yielding an input impedance greater than $\beta / g_{m}=r_{\pi}$. Thus, emitter degeneration increases the input impedance of the CE stage, a desirable property. A common mistake is to conclude that $R_{i n}=r_{\pi}+R_{E}$, but as explained below, $R_{i n}=r_{\pi}+(\beta+1) R_{E}$.

[^7]image_name:Figure 5.36 Small-signal model of CE stage with emitter degeneration
description:
[
name: v_in, type: VoltageSource, value: v_in, ports: {Np: Vin, Nn: GND}
name: r_π, type: Resistor, value: r_π, ports: {N1: Vin, N2: X1}
name: R_E, type: Resistor, value: R_E, ports: {N1: X1, N2: GND}
name: R_C, type: Resistor, value: R_C, ports: {N1: Vout, N2: GND}
name: g_m v_π, type: CurrentControlledCurrentSource, ports: {Np: X1, Nn: Vout}
]
extrainfo:The circuit is a small-signal model of a common-emitter (CE) stage with emitter degeneration. The input voltage is applied at Vin, and the output is taken from Vout. The circuit includes a voltage source, two resistors (r_π and R_E), and a current-controlled current source (g_m v_π) to model the transistor's behavior. The resistor R_C is connected to the output node Vout.

Figure 5.36 Small-signal model of CE stage with emitter degeneration.
We now quantify the foregoing observations by analyzing the small-signal behavior of the circuit. Depicted in Fig. 5.36 is the small-signal equivalent circuit, where $V_{C C}$ is replaced with an ac ground and the Early effect is neglected. Note that $v_{\pi}$ appears across $r_{\pi}$ and not from the base to ground. To determine $v_{\text {out }} / v_{\text {in }}$, we first write a KCL at the output node,

$$
\begin{equation*}
g_{m} v_{\pi}=-\frac{v_{\text {out }}}{R_{C}} \tag{5.149}
\end{equation*}
$$

obtaining

$$
\begin{equation*}
v_{\pi}=-\frac{v_{\text {out }}}{g_{m} R_{C}} \tag{5.150}
\end{equation*}
$$

We also recognize that two currents flow through $R_{E}$ : one originating from $r_{\pi}$ equal to $v_{\pi} / r_{\pi}$ and another equal to $g_{m} v_{\pi}$. Thus, the voltage drop across $R_{E}$ is given by

$$
\begin{equation*}
v_{R E}=\left(\frac{v_{\pi}}{r_{\pi}}+g_{m} v_{\pi}\right) R_{E} \tag{5.151}
\end{equation*}
$$

Since the voltage drop across $r_{\pi}$ and $R_{E}$ must add up to $v_{i n}$, we have

$$
\begin{align*}
v_{i n} & =v_{\pi}+v_{R E}  \tag{5.152}\\
& =v_{\pi}+\left(\frac{v_{\pi}}{r_{\pi}}+g_{m} v_{\pi}\right) R_{E}  \tag{5.153}\\
& =v_{\pi}\left[1+\left(\frac{1}{r_{\pi}}+g_{m}\right) R_{E}\right] . \tag{5.154}
\end{align*}
$$

Substituting for $v_{\pi}$ from Eq. (5.150) and rearranging the terms, we arrive at

$$
\begin{equation*}
\frac{v_{\text {out }}}{v_{\text {in }}}=-\frac{g_{m} R_{C}}{1+\left(\frac{1}{r_{\pi}}+g_{m}\right) R_{E}} \tag{5.155}
\end{equation*}
$$

As predicted earlier, the magnitude of the voltage gain is lower than $g_{m} R_{C}$ for $R_{E} \neq 0$. With $\beta \gg 1$, we can assume $g_{m} \gg 1 / r_{\pi}$ and hence

$$
\begin{equation*}
A_{v}=-\frac{g_{m} R_{C}}{1+g_{m} R_{E}} \tag{5.156}
\end{equation*}
$$

Thus, the gain falls by a factor of $1+g_{m} R_{E}$.
To arrive at an interesting interpretation of Eq. (5.156), we divide the numerator and denominator by $g_{m}$,

$$
\begin{equation*}
A_{v}=-\frac{R_{C}}{\frac{1}{g_{m}}+R_{E}} \tag{5.157}
\end{equation*}
$$

It is helpful to memorize this result as "the gain of the degenerated CE stage is equal to the total load resistance seen at the collector (to ground) divided by $1 / g_{m}$ plus the total resistance placed in series with the emitter." (In verbal descriptions, we often ignore the negative sign in the gain, with the understanding that it must be included.) This and similar interpretations throughout this book greatly simplify the analysis of amplifiers-often obviating the need for drawing small-signal circuits.

Example Determine the voltage gain of the stage shown in Fig. 5.37(a).

5.22
image_name:Figure 5.37 (b)
description:
[
name: Q1, type: NPN, ports: {C: Vout, B: Vin, E: e1b2}
name: Q2, type: NPN, ports: {C: VCC, B: e1b2, E: GND}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}
name: RE, type: Resistor, value: RE, ports: {N1: e1b2, N2: GND}
]
extrainfo:The circuit is a common-emitter (CE) amplifier stage with a degeneration resistor RE and an additional transistor Q2. The input is applied to the base of Q1 and the output is taken from its collector. The node e1b2 connects the emitter of Q1 and the base of Q2, providing feedback and additional biasing.

(a)
image_name:(a)
description:
[
name: Q1, type: NPN, ports: {C: Vout, B: Vin, E: e1}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}
name: RE, type: Resistor, value: RE, ports: {N1: e1, N2: GND}
name: rπ, type: Resistor, value: rπ, ports: {N1: e1, N2: GND}
]
extrainfo:The circuit is a common-emitter (CE) amplifier stage with a degeneration resistor RE and an additional resistor rπ2. The input is applied to the base of Q1 and the output is taken from its collector. The node e1 connects the emitter of Q1 to the ground through RE and rπ2, providing feedback and additional biasing.

(b)

Figure 5.37 (a) CE stage example, (b) simplified circuit.
Solution We identify the circuit as a CE stage because the input is applied to the base of $Q_{1}$ and the output is sensed at its collector. This transistor is degenerated by two devices: $R_{E}$ and the base-emitter junction of $Q_{2}$. The latter exhibits an impedance of $r_{\pi 2}$ (as illustrated in Fig. 5.7), leading to the simplified model depicted in Fig. 5.37(b). The total resistance placed in series with the emitter is therefore equal to $R_{E} \| r_{\pi 2}$, yielding

$$
\begin{equation*}
A_{v}=-\frac{R_{C}}{\frac{1}{g_{m 1}}+R_{E} \| r_{\pi 2}} \tag{5.158}
\end{equation*}
$$

Without the above observations, we would need to draw the small-signal model of both $Q_{1}$ and $Q_{2}$ and solve a system of several equations.

Exercise Repeat the above example if a resistor is placed in series with the emitter of $Q_{2}$.

Example Calculate the voltage gain of the circuit in Fig. 5.38(a).
5.23

Solution The topology is a CE stage degenerated by $R_{E}$, but the load resistance between the collector of $Q_{1}$ and ac ground consists of $R_{C}$ and the base-emitter junction of $Q_{2}$. Modeling the latter by $r_{\pi 2}$, we reduce the circuit to that shown in Fig. 5.38(b), where the total load resistance seen at the collector of $Q_{1}$ is equal to $R_{C} \| r_{\pi 2}$. The
voltage gain is thus given by

$$
\begin{equation*}
A_{v}=-\frac{R_{C} \| r_{\pi 2}}{\frac{1}{g_{m 1}}+R_{E}} \tag{5.159}
\end{equation*}
$$

image_name:(a)
description:
[
name: Q1, type: NPN, ports: {C: Vout, B: Vin, E: e1}
name: Q2, type: NPN, ports: {C: VCC, B: Vout, E: GND}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}
name: RE, type: Resistor, value: RE, ports: {N1: e1, N2: GND}
]
extrainfo:This is a common-emitter amplifier stage with Q1 and Q2 as NPN transistors. Q1 is degenerated by RE, and Q2 is connected to the output node Vout. The circuit operates with a supply voltage VCC. The load resistance at the collector of Q1 is RC.

(a)
image_name:Figure 5.38 (a)
description:
[
name: Q1, type: NPN, ports: {C: VCC, B: Vin, E: e1}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}
name: RE, type: Resistor, value: RE, ports: {N1: e1, N2: GND}
name: rπ2, type: Resistor, value: rπ2, ports: {N1: Vout, N2: GND}
name: VCC, type: VoltageSource, value: VCC, ports: {Np: VCC, Nn: GND}
]
extrainfo:This circuit is a common-emitter amplifier stage with an NPN transistor Q1. The transistor is degenerated by a resistor RE, and the load resistance at the collector is RC. The circuit operates with a supply voltage VCC. The output is taken across the node Vout.

(b)

Figure 5.38 (a) CE stage example, (b) simplified circuit.

Exercise Repeat the above example if a resistor is placed in series with the emitter of $Q_{2}$.

To compute the input impedance of the degenerated CE stage, we redraw the smallsignal model as in Fig. 5.39(a) and calculate $v_{X} / i_{X}$. Since $v_{\pi}=r_{\pi} i_{X}$, the current flowing through $R_{E}$ is equal to $i_{X}+g_{m} r_{\pi} i_{X}=(1+\beta) i_{X}$, creating a voltage drop of $R_{E}(1+\beta) i_{X}$. Summing $v_{\pi}$ and $v_{R E}$ and equating the result to $v_{X}$, we have

$$
\begin{equation*}
v_{X}=r_{\pi} i_{X}+R_{E}(1+\beta) i_{X} \tag{5.160}
\end{equation*}
$$

and hence

$$
\begin{align*}
R_{i n} & =\frac{v_{X}}{i_{X}}  \tag{5.161}\\
& =r_{\pi}+(\beta+1) R_{E} \tag{5.162}
\end{align*}
$$

As predicted by our qualitative reasoning, emitter degeneration increases the input impedance [Fig. 5.39(b)].

Why is $R_{i n}$ not simply equal to $r_{\pi}+R_{E}$ ? This would hold only if $r_{\pi}$ and $R_{E}$ were exactly in series, i.e., if the two carried equal currents, but in the circuit of Fig. 5.39(a), the collector current, $g_{m} v_{\pi}$, also flows into node $P$.
image_name:(a)
description:
[
name: Vx, type: VoltageSource, value: Vx, ports: {Np: Vx, Nn: GND}
name: rπ, type: Resistor, value: rπ, ports: {N1: Vx, N2: P}
name: vπ, type: VoltageSource, value: vπ, ports: {Np: P, Nn: GND}
name: gmvπ, type: CurrentControlledCurrentSource, value: gmvπ, ports: {Np: P, Nn: Vout}
name: RE, type: Resistor, value: RE, ports: {N1: P, N2: GND}
name: RC, type: Resistor, value: RC, ports: {N1: Vout, N2: GND}
name: Rin, type: Resistor, value: Rin, ports: {N1: Vx, N2: X}
name: (β+1)RE, type: Resistor, value: (β+1)RE, ports: {N1: X, N2: GND}
]
extrainfo:The circuit diagram (a) represents the input impedance of a degenerated common-emitter stage. It includes a voltage source Vx, resistors rπ, RE, RC, Rin, and (β+1)RE, and a current-controlled current source gmvπ. The emitter degeneration increases the input impedance by a factor of (β+1), as both base and collector currents flow through RE, resulting in a larger voltage drop.
image_name:(b)
description:
[
name: Vx, type: VoltageSource, value: Vx, ports: {Np: Vx, Nn: GND}
name: rπ, type: Resistor, value: rπ, ports: {N1: Vx, N2: X}
name: Rin, type: Resistor, value: Rin, ports: {N1: Vx, N2: X}
name: (β+1)RE, type: Resistor, value: (β+1)RE, ports: {N1: X, N2: GND}
]
extrainfo:The circuit diagram (b) represents the equivalent input impedance of a degenerated common-emitter stage. It shows how the input impedance is affected by the additional resistor (β+1)RE, which increases the input impedance due to the feedback through the emitter resistor.

Figure 5.39 (a) Input impedance of degenerated CE stage, (b) equivalent circuit.
image_name:Figure 5.39 (b)
description:
[
name: rπ, type: Resistor, value: rπ, ports: {N1: GND, N2: P}
name: RE, type: Resistor, value: RE, ports: {N1: P, N2: GND}
name: RC, type: Resistor, value: RC, ports: {N1: Vx, N2: GND}
name: gmvπ, type: CurrentSource, ports: {Np: P, Nn: Vx}
name: vπ, type: VoltageSource, value: vπ, ports: {Np: P, Nn: GND}
name: vRE, type: VoltageSource, value: vRE, ports: {Np: P, Nn: GND}
name: vx, type: VoltageSource, value: vx, ports: {Np: Vx, Nn: GND}
]
extrainfo:The circuit represents the equivalent input impedance of a degenerated common-emitter stage, showing the impact of the emitter resistor RE on the input impedance. The input impedance is increased by the factor (β+1) due to feedback through the emitter resistor.

Figure 5.40 Output impedance of degenerated stage.

Does the factor $\beta+1$ bear any intuitive meaning? We observe that the flow of both base and collector currents through $R_{E}$ results in a large voltage drop, $(\beta+1) i_{X} R_{E}$, even though the current drawn from $v_{X}$ is merely $i_{X}$. In other words, the test voltage source, $v_{X}$, supplies a current of only $i_{X}$ while producing a voltage drop of $(\beta+1) i_{X} R_{E}$ across $R_{E}$-as if $i_{X}$ flows through a resistor equal to $(\beta+1) R_{E}$.

The above observation is articulated as follows: any impedance tied between the emitter and ground is multiplied by $\beta+1$ when "seen from the base." The expression "seen from the base" means the impedance measured between the base and ground.

We also calculate the output impedance of the stage with the aid of the equivalent shown in Fig. 5.40, where the input voltage is set to zero. Equation (5.153) applies to this circuit as well:

$$
\begin{equation*}
v_{i n}=0=v_{\pi}+\left(\frac{v_{\pi}}{r_{\pi}}+g_{m} v_{\pi}\right) R_{E} \tag{5.163}
\end{equation*}
$$

yielding $v_{\pi}=0$ and hence $g_{m} v_{\pi}=0$. Thus, all of $i_{X}$ flows through $R_{C}$, and

$$
\begin{align*}
R_{\text {out }} & =\frac{v_{X}}{i_{X}}  \tag{5.164}\\
& =R_{C} \tag{5.165}
\end{align*}
$$

revealing that emitter degeneration does not alter the output impedance if the Early effect is neglected.

Example A CE stage is biased at a collector current of 1 mA . If the circuit provides a voltage gain

5.24 of 20 with no emitter degeneration and 10 with degeneration, determine $R_{C}, R_{E}$, and the I/O impedances. Assume $\beta=100$.

Solution For $A_{v}=20$ in the absence of degeneration, we require

$$
\begin{equation*}
g_{m} R_{C}=20 \tag{5.166}
\end{equation*}
$$

which, together with $g_{m}=I_{C} / V_{T}=(26 \Omega)^{-1}$, yields

$$
\begin{equation*}
R_{C}=520 \Omega \tag{5.167}
\end{equation*}
$$

Since degeneration lowers the gain by a factor of two,

$$
\begin{equation*}
1+g_{m} R_{E}=2 \tag{5.168}
\end{equation*}
$$

i.e.,

$$
\begin{align*}
R_{E} & =\frac{1}{g_{m}}  \tag{5.169}\\
& =26 \Omega \tag{5.170}
\end{align*}
$$

The input impedance is given by

$$
\begin{align*}
R_{i n} & =r_{\pi}+(\beta+1) R_{E}  \tag{5.171}\\
& =\frac{\beta}{g_{m}}+(\beta+1) R_{E}  \tag{5.172}\\
& \approx 2 r_{\pi} \tag{5.173}
\end{align*}
$$

because $\beta \gg 1$ and $R_{E}=1 / g_{m}$ in this example. Thus, $R_{i n}=5200 \Omega$. Finally,

$$
\begin{align*}
R_{\text {out }} & =R_{C}  \tag{5.174}\\
& =520 \Omega \tag{5.175}
\end{align*}
$$

Exercise What bias current would result in a gain of 5 with such emitter and collector resistor values?

Example Compute the voltage gain and I/O impedances of the circuit depicted in Fig. 5.41. Assume 5.25 a very large value for $C_{1}$.
image_name:Figure 5.41 CE stage example
description:
[
name: Q1, type: NPN, ports: {C: Vout, B: Vin, E: e1}
name: RC, type: Resistor, value: RC, ports: {N1: Vout, N2: VCC}
name: RE, type: Resistor, value: RE, ports: {N1: e1, N2: P}
name: C1, type: Capacitor, value: C1, ports: {Np: P, Nn: GND}
name: Constant, type: CurrentSource, value: Constant, ports: {Np: P, Nn: GND}
]
extrainfo:The circuit is a common-emitter (CE) amplifier stage with emitter degeneration. It includes an NPN transistor Q1, with RC and RE as collector and emitter resistors respectively. A large capacitor C1 is connected from the emitter to ground, and there is a constant current source connected in parallel with C1.

Figure 5.41 CE stage example.
Solution If $C_{1}$ is very large, it acts as a short circuit for the signal frequencies of interest. Also, the constant current source is replaced with an open circuit in the small-signal equivalent circuit. Thus, the stage reduces to that in Fig. 5.35(a) and Eqs. (5.157), (5.162), (5.165) apply.

Exercise Repeat the above example if we tie another capacitor from the base to ground.

The degenerated CE stage can be analyzed from a different perspective to provide more insight. Let us place the transistor and the emitter resistor in a black box having still three terminals [Fig. 5.42(a)]. For small-signal operation, we can view the box as a
image_name:(a)
description:
[
name: Q1, type: NPN, ports: {C: iout, B: Vin, E: e1}
name: RE, type: Resistor, value: RE, ports: {N1: e1, N2: GND}
name: rπ, type: Resistor, value: rπ, ports: {N1: Vin, N2: p}
name: gmvπ, type: CurrentSource, ports: {Np: p, Nn: iout}
]
extrainfo:The circuit is a degenerated common-emitter amplifier with feedback through RE. The small-signal model includes rπ and a current source gmvπ, indicating feedback and gain elements.
image_name:(b)
description:
[
name: Q1, type: NPN, ports: {C: i_out, B: vin, E: p}
name: RE, type: Resistor, value: RE, ports: {N1: p, N2: GND}
name: rπ, type: Resistor, value: rπ, ports: {N1: vin, N2: p}
name: gmvπ, type: CurrentControlledCurrentSource, ports: {Np: p, Nn: i_out}
]
extrainfo:The circuit is a small-signal model of a degenerated common-emitter amplifier with emitter resistor RE. The transconductance is represented by gmvπ, and the input resistance is rπ.

Figure 5.42 (a) Degenerated bipolar transistor viewed as a black box, (b) small-signal equivalent.
new transistor (or "active" device) and model its behavior by new values of transconductance and impedances. Denoted by $G_{m}$ to avoid confusion with $g_{m}$ of $Q_{1}$, the equivalent transconductance is obtained from Fig. 5.42(b). Since Eq. (5.154) still holds, we have

$$
\begin{align*}
i_{\text {out }} & =g_{m} v_{\pi}  \tag{5.176}\\
& =g_{m} \frac{v_{\text {in }}}{1+\left(r_{\pi}^{-1}+g_{m}\right) R_{E}} \tag{5.177}
\end{align*}
$$

and hence

$$
\begin{align*}
G_{m} & =\frac{i_{\text {out }}}{v_{\text {in }}}  \tag{5.178}\\
& \approx \frac{g_{m}}{1+g_{m} R_{E}} \tag{5.179}
\end{align*}
$$

For example, the voltage gain of the stage with a load resistance of $R_{D}$ is given by $-G_{m} R_{D}$.
An interesting property of the degenerated CE stage is that its voltage gain becomes relatively independent of the transistor transconductance and hence bias current if $g_{m} R_{E} \gg 1$. From Eq. (5.157), we note that $A_{v} \rightarrow-R_{C} / R_{E}$ under this condition. As studied in Problem 5.40, this trend in fact represents the "linearizing" effect of emitter degeneration.

As a more general case, we now consider a degenerated CE stage containing a resistance in series with the base [Fig. 5.43(a)]. As seen below, $R_{B}$ only degrades the
image_name:(a)
description:
[
name: RB, type: Resistor, value: RB, ports: {N1: vin0, N2: A}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: vout}
name: RE, type: Resistor, value: RE, ports: {N1: e1, N2: GND}
name: rπ, type: Resistor, value: rπ, ports: {N1: A, N2: b1}
name: Q1, type: NPN, ports: {C: vout, B: b1, E: e1}
]
extrainfo:The circuit is a common-emitter amplifier with emitter degeneration. The resistor RB represents the base resistance and can affect the input signal. The circuit uses an NPN transistor Q1 with a collector resistor RC and an emitter resistor RE. The input is applied at vin0, and the output is taken from vout.
image_name:(b)
description:
[
name: RB, type: Resistor, value: RB, ports: {N1: Vin, N2: A}
name: rπ, type: Resistor, value: rπ, ports: {N1: A, N2: X}
name: RE, type: Resistor, value: (β+1)RE, ports: {N1: X, N2: GND}
]
extrainfo:The circuit diagram (b) is a small-signal equivalent model of the CE stage with base resistance. The node A represents the base of the transistor, and the node X is an intermediate node connected to the emitter through the equivalent resistance (β+1)RE. The ground node is indicated as GND.

Figure 5.43 (a) CE stage with base resistance, (b) equivalent circuit.
performance of the circuit, but often proves inevitable. For example, $R_{B}$ may represent the output resistance of a microphone connected to the input of the amplifier.

To analyze the small-signal behavior of this stage, we can adopt one of two approaches:
(a) draw the small-signal model of the entire circuit and solve the resulting equations, or
(b) recognize that the signal at node $A$ is simply an attenuated version of $v_{i n}$ and write

$$
\begin{equation*}
\frac{v_{\text {out }}}{v_{\text {in }}}=\frac{v_{A}}{v_{\text {in }}} \cdot \frac{v_{\text {out }}}{v_{A}} . \tag{5.180}
\end{equation*}
$$

Here, $v_{A} / v_{\text {in }}$ denotes the effect of voltage division between $R_{B}$ and the impedance seen at the base of $Q_{1}$, and $v_{\text {out }} / v_{A}$ represents the voltage gain from the base of $Q_{1}$ to the output, as already obtained in Eqs. (5.155) and (5.157). We leave the former approach for Problem 5.44 and continue with the latter here.

Let us first compute $v_{A} / v_{\text {in }}$ with the aid of Eq. (5.162) and the model depicted in Fig. 5.39(b), as illustrated in Fig. 5.43(b). The resulting voltage divider yields

$$
\begin{equation*}
\frac{v_{A}}{v_{i n}}=\frac{r_{\pi}+(\beta+1) R_{E}}{r_{\pi}+(\beta+1) R_{E}+R_{B}} \tag{5.181}
\end{equation*}
$$

Combining Eqs. (5.155) and (5.157), we arrive at the overall gain as

$$
\begin{align*}
& \frac{v_{\text {out }}}{v_{\text {in }}}=\frac{r_{\pi}+(\beta+1) R_{E}}{r_{\pi}+(\beta+1) R_{E}+R_{B}} \cdot \frac{-g_{m} R_{C}}{1+\left(\frac{1}{r_{\pi}}+g_{m}\right) R_{E}}  \tag{5.182}\\
& =\frac{r_{\pi}+(\beta+1) R_{E}}{r_{\pi}+(\beta+1) R_{E}+R_{B}} \cdot \frac{-g_{m} r_{\pi} R_{C}}{r_{\pi}+(1+\beta) R_{E}}  \tag{5.183}\\
& =\frac{-\beta R_{C}}{r_{\pi}+(\beta+1) R_{E}+R_{B}} . \tag{5.184}
\end{align*}
$$

To obtain a more intuitive expression, we divide the numerator and the denominator by $\beta$ :

$$
\begin{equation*}
A_{v} \approx \frac{-R_{C}}{\frac{1}{g_{m}}+R_{E}+\frac{R_{B}}{\beta+1}} \tag{5.185}
\end{equation*}
$$

Compared to Eq. (5.157), this result contains only one additional term in the denominator equal to the base resistance divided by $\beta+1$.

The above results reveal that resistances in series with the emitter and the base have similar effects on the voltage gain, but $R_{B}$ is scaled down by $\beta+1$. The significance of this observation becomes clear later.

For the stage of Fig. 5.43(a), we can define two different input impedances, one seen at the base of $Q_{1}$ and another at the left terminal of $R_{B}$ (Fig. 5.44). The former is equal to

$$
\begin{equation*}
R_{i n 1}=r_{\pi}+(\beta+1) R_{E} \tag{5.186}
\end{equation*}
$$

and the latter,

$$
\begin{equation*}
R_{i n 2}=R_{B}+r_{\pi}+(\beta+1) R_{E} \tag{5.187}
\end{equation*}
$$

image_name:Figure 5.44
description:
[
name: RB, type: Resistor, value: RB, ports: {N1: Vin, N2: b1}
name: Rin1, type: Resistor, value: Rin1, ports: {N1: Vin, N2: b1}
name: Rin2, type: Resistor, value: Rin2, ports: {N1: Vin, N2: GND}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}
name: RE, type: Resistor, value: RE, ports: {N1: e1, N2: GND}
name: Q1, type: NPN, ports: {C: Vout, B: b1, E: e1}
]
extrainfo:The circuit is a common-emitter amplifier stage with input at Vin and output at Vout. The resistors RB and Rin1 are connected to the base of the transistor Q1, and the emitter is connected to ground through RE. The collector is connected to VCC through RC. The output is taken from the collector.

Figure 5.44 Input impedances seen at different nodes.
In practice, $R_{i n 1}$ proves more relevant and useful. We also note that the output impedance of the circuit remains equal to

$$
\begin{equation*}
R_{\text {out }}=R_{C} \tag{5.188}
\end{equation*}
$$

even with $R_{B} \neq 0$. This is studied in Problem 5.45.

Example A microphone having an output resistance of $1 \mathrm{k} \Omega$ generates a peak signal level of $5.26 \quad 2 \mathrm{mV}$. Design a CE stage with a bias current of 1 mA that amplifies this signal to 40 mV . Assume $R_{E}=4 / g_{m}$ and $\beta=100$.

Solution The following quantities are obtained: $R_{B}=1 \mathrm{k} \Omega, g_{m}=(26 \Omega)^{-1},\left|A_{v}\right|=20$, and $R_{E}=104 \Omega$. From Eq. (5.185),

$$
\begin{align*}
R_{C} & =\left|A_{v}\right|\left(\frac{1}{g_{m}}+R_{E}+\frac{R_{B}}{\beta+1}\right)  \tag{5.189}\\
& \approx 2.8 \mathrm{k} \Omega \tag{5.190}
\end{align*}
$$

Exercise Repeat the above example if the microphone output resistance is doubled.

Example Determine the voltage gain and I/O impedances of the circuit shown in Fig. 5.45(a).
5.27 Assume a very large value for $C_{1}$ and neglect the Early effect.
image_name:(a)
description:
[
name: Q1, type: NPN, ports: {C: VCC, B: b1, E: e1}
name: RB, type: Resistor, value: RB, ports: {N1: Vin, N2: b1}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}
name: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: X}
name: R2, type: Resistor, value: R2, ports: {N1: X, N2: e1}
name: C1, type: Capacitor, value: C1, ports: {Np: X, Nn: GND}
name: I1, type: CurrentSource, value: I1, ports: {Np: e1, Nn: GND}
]
extrainfo:The circuit is a common-emitter amplifier with an NPN transistor Q1. It includes resistors RB, RC, R1, and R2, a capacitor C1, and a current source I1. The input is applied at Vin and the output is taken from Vout.

(a)
image_name:(a)
description:
[
name: Q1, type: NPN, ports: {C: Vout, B: b1, E: e1}
name: RB, type: Resistor, value: RB, ports: {N1: Vin, N2: b1}
name: RC, type: Resistor, value: RC, ports: {N1: Vout, N2: GND}
name: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: GND}
name: R2, type: Resistor, value: R2, ports: {N1: e1, N2: GND}
]
extrainfo:The circuit is a common-emitter amplifier with an NPN transistor Q1. It includes resistors RB, RC, R1, and R2. The input is applied at Vin and the output is taken from Vout.

(b)

Figure 5.45 (a) CE stage example, (b) simplified circuit.

Solution Replacing $C_{1}$ with a short circuit, $I_{1}$ with an open circuit, and $V_{C C}$ with ac ground, we arrive at the simplified model in Fig. 5.45(b), where $R_{1}$ and $R_{C}$ appear in parallel and $R_{2}$ acts as an emitter degeneration resistor. Equations (5.185)-(5.188) are therefore written respectively as

$$
\begin{align*}
A_{v} & =\frac{-\left(R_{C} \| R_{1}\right)}{\frac{1}{g_{m}}+R_{2}+\frac{R_{B}}{\beta+1}}  \tag{5.191}\\
R_{\text {in }} & =R_{B}+r_{\pi}+(\beta+1) R_{2}  \tag{5.192}\\
R_{\text {out }} & =R_{C} \| R_{1} \tag{5.193}
\end{align*}
$$

Exercise What happens if a very large capacitor is tied from the emitter of $Q_{1}$ to ground?

#### Effect of Transistor Output Resistance

The analysis of the degenerated CE stage has thus far neglected the Early effect. Somewhat beyond the scope of this book, the derivation of the circuit properties in the presence of this effect is outlined in Problem 5.48 for the interested reader. We nonetheless explore one aspect of the circuit, namely, the output resistance, as it provides the foundation for many other topologies studied later.

Our objective is to determine the output impedance seen looking into the collector of a degenerated transistor [Fig. 5.46(a)]. Recall from Fig. 5.7 that $R_{\text {out }}=r_{O}$ if $R_{E}=0$. Also, $R_{\text {out }}=\infty$ if $V_{A}=\infty$ (why?). To include the Early effect, we draw the smallsignal equivalent circuit as in Fig. 5.46(b), grounding the input terminal. A common mistake here is to write $R_{\text {out }}=r_{O}+R_{E}$. Since $g_{m} v_{\pi}$ flows from the output node into $P$, resistors $r_{O}$ and $R_{E}$ are not in series. We readily note that $R_{E}$ and $r_{\pi}$ appear in parallel, and the current flowing through $R_{E} \| r_{\pi}$ is equal to $i_{X}$. Thus,

$$
\begin{equation*}
v_{\pi}=-i_{X}\left(R_{E} \| r_{\pi}\right) \tag{5.194}
\end{equation*}
$$

image_name:(a)
description:
[
name: Q1, type: NPN, ports: {C: Rout, B: Vin, E: e1}
name: RE, type: Resistor, value: RE, ports: {N1: e1, N2: GND}
name: rπ, type: Resistor, value: rπ, ports: {N1: GND, N2: P}
name: ro, type: Resistor, value: ro, ports: {N1: Vx, N2: P}
name: gmvπ, type: CurrentControlledCurrentSource, ports: {Np: P, Nn: P}
name: vx, type: VoltageSource, value: vx, ports: {Np: Vx, Nn: GND}
]
extrainfo:The circuit is an output impedance stage with emitter degeneration. The small-signal equivalent circuit shows the relationship between the resistors and the current-controlled current source, illustrating the parallel relationship of RE and rπ, and the effect of gm and vπ on the circuit.
image_name:(b)
description:
[
name: Q1, type: NPN, ports: {C: Vx, B: P, E: GND}
name: RE, type: Resistor, value: RE, ports: {N1: P, N2: GND}
name: rπ, type: Resistor, value: rπ, ports: {N1: GND, N2: P}
name: ro, type: Resistor, value: ro, ports: {N1: Vx, N2: P}
name: gmvπ, type: CurrentSource, ports: {Np: P, Nn: Vx}
name: vx, type: VoltageSource, value: vx, ports: {Np: Vx, Nn: GND}
]
extrainfo:The circuit represents the small-signal equivalent of a degenerated stage with a common emitter configuration. The output impedance is analyzed considering the parallel and series combinations of resistors and current sources.

Figure 5.46 (a) Output impedance of degenerated stage, (b) equivalent circuit.
where the negative sign arises because the positive side of $v_{\pi}$ is at ground. We also recognize that $r_{O}$ carries a current of $i_{X}-g_{m} v_{\pi}$ and hence sustains a voltage of $\left(i_{X}-g_{m} v_{\pi}\right) r_{O}$. Adding this voltage to that across $R_{E}\left(=-v_{\pi}\right)$ and equating the result to $v_{X}$, we obtain

$$
\begin{align*}
v_{X} & =\left(i_{X}-g_{m} v_{\pi}\right) r_{O}-v_{\pi}  \tag{5.195}\\
& =\left[i_{X}+g_{m} i_{X}\left(R_{E} \| r_{\pi}\right)\right] r_{O}+i_{X}\left(R_{E} \| r_{\pi}\right) \tag{5.196}
\end{align*}
$$

It follows that

$$
\begin{align*}
R_{\text {out }} & =\left[1+g_{m}\left(R_{E} \| r_{\pi}\right)\right] r_{O}+R_{E} \| r_{\pi}  \tag{5.197}\\
& =r_{O}+\left(g_{m} r_{O}+1\right)\left(R_{E} \| r_{\pi}\right) \tag{5.198}
\end{align*}
$$

Recall from Eq. (5.146) that the intrinsic gain of the transistor, $g_{m} r_{O} \gg 1$, and hence

$$
\begin{align*}
R_{\text {out }} & \approx r_{O}+g_{m} r_{O}\left(R_{E} \| r_{\pi}\right)  \tag{5.199}\\
& \approx r_{O}\left[1+g_{m}\left(R_{E} \| r_{\pi}\right)\right] \tag{5.200}
\end{align*}
$$

Interestingly, emitter degeneration raises the output impedance from $r_{O}$ to the above value, i.e., by a factor of $1+g_{m}\left(R_{E} \| r_{\pi}\right)$.

The reader may wonder if the increase in the output resistance is desirable or undesirable. The "boosting" of output resistance as a result of degeneration proves extremely useful in circuit design, producing amplifiers with a higher gain as well as creating more ideal current sources. These concepts are studied in Chapter 9.

It is instructive to examine Eq. (5.200) for two special cases $R_{E} \gg r_{\pi}$ and $R_{E} \ll r_{\pi}$. For $R_{E} \gg r_{\pi}$, we have $R_{E} \| r_{\pi} \rightarrow r_{\pi}$ and

$$
\begin{align*}
R_{\text {out }} & \approx r_{O}\left(1+g_{m} r_{\pi}\right)  \tag{5.201}\\
& \approx \beta r_{O} \tag{5.202}
\end{align*}
$$

because $\beta \gg 1$. Thus, the maximum resistance seen at the collector of a bipolar transistor is equal to $\beta r_{O}$-if the degeneration impedance becomes much larger than $r_{\pi}$.

For $R_{E} \ll r_{\pi}$, we have $R_{E} \| r_{\pi} \rightarrow R_{E}$ and

$$
\begin{equation*}
R_{\text {out }} \approx\left(1+g_{m} R_{E}\right) r_{O} \tag{5.203}
\end{equation*}
$$

Thus, the output resistance is boosted by a factor of $1+g_{m} R_{E}$.
In the analysis of circuits, we sometimes draw the transistor output resistance explicitly to emphasize its significance (Fig. 5.47). This representation, of course, assumes $Q_{1}$ itself does not contain another $r_{O}$.
image_name:Figure 5.47
description:
[
name: Q1, type: NPN, ports: {C: CL, B: Vin, E: e1}
name: Cl, type: Capacitor, value: Cl, ports: {Np: CL, Nn: rO}
name: rO, type: Resistor, value: rO, ports: {N1: CL, N2: e1}
name: RE, type: Resistor, value: RE, ports: {N1: e1, N2: GND}
]
extrainfo:The circuit represents a stage with an explicit depiction of the transistor's output resistance, rO. It includes a capacitor Cl and a resistor RE for emitter degeneration. The output resistance is boosted by a factor of 1+g_m RE.

Figure 5.47 Stage with explicit depiction of $r_{O}$.

Example

We wish to design a current source having a value of 1 mA and an output resistance of
5.28
$20 \mathrm{k} \Omega$. The available bipolar transistor exhibits $\beta=100$ and $V_{A}=10 \mathrm{~V}$. Determine the minimum required value of emitter degeneration resistance.

Solution Since $r_{O}=V_{A} / I_{C}=10 \mathrm{k} \Omega$, degeneration must raise the output resistance by a factor of two. We postulate that the condition $R_{E} \ll r_{\pi}$ holds and write

$$
\begin{equation*}
1+g_{m} R_{E}=2 \tag{5.204}
\end{equation*}
$$

That is,

$$
\begin{align*}
R_{E} & =\frac{1}{g_{m}}  \tag{5.205}\\
& =26 \Omega . \tag{5.206}
\end{align*}
$$

Note that indeed $r_{\pi}=\beta / g_{m} \gg R_{E}$.

Exercise What is the output impedance if $R_{E}$ is doubled?

Example
5.29 Calculate the output resistance of the circuit shown in Fig. 5.48(a) if $C_{1}$ is very large.
image_name:Figure 5.48 (a)
description:
[
name: Q1, type: NPN, ports: {C: LOAD, B: Vb, E: e1}
name: Rout, type: Resistor, value: Rout, ports: {N1: LOAD, N2: X}
name: R1, type: Resistor, value: R1, ports: {N1: X, N2: e1}
name: R2, type: Resistor, value: R2, ports: {N1: X, N2: GND}
name: C1, type: Capacitor, value: C1, ports: {Np: X, Nn: GND}
name: Vb, type: VoltageSource, value: Vb, ports: {Np: Vb, Nn: GND}
name: I1, type: CurrentSource, value: I1, ports: {Np: e1, Nn: GND}
]
extrainfo:The circuit is a common-emitter (CE) amplifier stage. The transistor Q1 is biased using a voltage source Vb. The load resistor Rout is connected at the collector of Q1. The resistors R1 and R2 form a voltage divider at node X. Capacitor C1 is used for AC coupling or bypassing. Current source I1 is connected to the emitter of Q1.

(a)
image_name:(a)
description:
[
name: Q1, type: NPN, ports: {C: LOAD, B: GND, E: R2}
name: R1, type: Resistor, value: R1, ports: {N1: LOAD, N2: GND}
name: R2, type: Resistor, value: R2, ports: {N1: I1, N2: GND}
name: Rout, type: Resistor, value: Rout, ports: {N1: LOAD, N2: Vout}
name: I1, type: CurrentSource, value: I1, ports: {Np: R2, Nn: GND}
]
extrainfo:The circuit is a common-emitter amplifier stage with the transistor Q1 biased by a voltage source Vb. The load resistor Rout is connected at the collector of Q1. Resistors R1 and R2 form a voltage divider, and capacitor C1 is used for AC coupling or bypassing. The current source I1 is connected to the emitter of Q1.

(b)
image_name:(b)
description:
[
name: Q1, type: NPN, ports: {C: LOAD, B: GND, E: e1}
name: R2, type: Resistor, value: R2, ports: {N1: e1, N2: GND}
name: Rout1, type: Resistor, value: Rout1, ports: {N1: LOAD, N2: Vout}
]
extrainfo:The circuit is a simplified common-emitter amplifier stage. The NPN transistor Q1 is connected with its collector at 'LOAD', base at 'GND', and emitter at 'e1'. Resistor R2 is connected between 'e1' and 'GND', and Rout1 is connected between 'LOAD' and 'Vout'.

(c)

Figure 5.48 (a) CE stage example, (b) simplified circuit, (c) resistance seen at the collector.
Solution Replacing $V_{b}$ and $C_{1}$ with an ac ground and $I_{1}$ with an open circuit, we arrive at the simplified model in Fig. 5.48(b). Since $R_{1}$ appears in parallel with the resistance seen looking into the collector of $Q_{1}$, we ignore $R_{1}$ for the moment, reducing the circuit to that in Fig. 5.48(c). In analogy with Fig. 5.40, we rewrite Eq. (5.200) as

$$
\begin{equation*}
R_{\text {out } 1}=\left[1+g_{m}\left(R_{2} \| r_{\pi}\right)\right] r_{O} \tag{5.207}
\end{equation*}
$$

Returning to Fig. 5.48(b), we have

$$
\begin{align*}
R_{\text {out }} & =R_{\text {out } 1} \| R_{1}  \tag{5.208}\\
& =\left\{\left[1+g_{m}\left(R_{2} \| r_{\pi}\right)\right] r_{O}\right\} \| R_{1} . \tag{5.209}
\end{align*}
$$

Exercise What is the output resistance if a very large capacitor is tied between the emitter of $Q_{1}$ and ground?

The procedure of progressively simplifying a circuit until it resembles a known topology proves extremely critical in our work. Called "analysis by inspection," this method obviates the need for complex small-signal models and lengthy calculations. The reader is encouraged to attempt the above example using the small-signal model of the overall circuit to appreciate the efficiency and insight provided by our intuitive approach.
image_name:(a)
description:
[
name: Q1, type: NPN, ports: {C: Rout, B: Vb2, E: e1c2}
name: Q2, type: NPN, ports: {C: e1c2, B: Vb1, E: GND}
name: rO2, type: Resistor, value: rO2, ports: {N1: b1, N2: GND}
]
extrainfo:The circuit is a CE stage with two NPN transistors Q1 and Q2. Q1 is connected to the output resistance Rout and Q2 acts as an emitter follower. The resistor rO2 represents the output resistance of Q2, providing emitter degeneration for Q1.
image_name:(b)
description:
[
name: Q1, type: NPN, ports: {C: Rout, B: b1, E: GND}
name: rO2, type: Resistor, value: rO2, ports: {N1: b1, N2: GND}
]
extrainfo:The simplified circuit (b) shows a single NPN transistor Q1 with its emitter grounded and a resistor rO2 connected between the base of Q1 and ground. The output resistance is measured at the collector of Q1.

Figure 5.49 (a) CE stage example, (b) simplified circuit.
Solution Recall from Fig. 5.7 that the impedance seen at the collector is equal to $r_{O}$ if the base and emitter are (ac) grounded. Thus, $Q_{2}$ can be replaced with $r_{O 2}$ [Fig. 5.49(b)]. From another perspective, $Q_{2}$ is reduced to $r_{O 2}$ because its base-emitter voltage is fixed by $V_{b 1}$, yielding a zero $g_{m 2} v_{\pi 2}$.

Now, $r_{O 2}$ plays the role of emitter degeneration resistance for $Q_{1}$. In analogy with Fig. 5.40(a), we rewrite Eq. (5.200) as

$$
\begin{equation*}
R_{\text {out }}=\left[1+g_{m 1}\left(r_{O 2} \| r_{\pi 1}\right)\right] r_{O 1} \tag{5.210}
\end{equation*}
$$

Called a "cascode" circuit, this topology is studied and utilized extensively in Chapter 9.

Exercise Repeat the above example for a "stack" of three transistors.

CE Stage with Biasing Having learned the small-signal properties of the commonemitter amplifier and its variants, we now study a more general case wherein the circuit contains a bias network as well. We begin with simple biasing schemes described in Section 5.2 and progressively add complexity (and more robust performance) to the circuit. Let us begin with an example.

A student familiar with the CE stage and basic biasing constructs the circuit shown in Fig. 5.50 to amplify the signal produced by a microphone. Unfortunately, $Q_{1}$ carries no current, failing to amplify. Explain the cause of this problem.

[^0]:    ${ }^{1}$ About nine orders of magnitude less than one sustaining 750 mV : $(750 \mathrm{mV}-200 \mathrm{mV}) /$ $(60 \mathrm{mV} / \mathrm{dec}) \approx 9.2$.

[^1]:    ${ }^{1}$ Exceptions are described in Chapter 12

[^2]:    ${ }^{2}$ Recall that a zero voltage source is replaced by a short and a zero current source by an open.

[^3]:    ${ }^{3}$ While beyond the scope of this book, it can be shown that the impedance seen at the emitter is approximately equal to $1 / g_{m}$ only if the collector is tied to a relatively low impedance.

[^4]:    ${ }^{4}$ We say all constant voltage sources are replaced by an "ac ground."

[^5]:    ${ }^{5}$ The subscript $C C$ indicates supply voltage feeding the collector.

[^6]:    ${ }^{6}$ While beyond the scope of this book, the large-signal behavior of amplifiers also becomes important in many applications.

[^7]:    ${ }^{7}$ But other second-order effects limit the actual gain to about 50.

image_name:Figure 5.50 Microphone amplifier
description:
[
name: RB, type: Resistor, value: 100k, ports: {N1: VCC, N2: X}
name: RC, type: Resistor, value: 1k, ports: {N1: VCC, N2: Vout}
name: Q1, type: NPN, ports: {C: Vout, B: X, E: GND}
name: VCC, type: VoltageSource, value: 2.5V, ports: {Np: VCC, Nn: GND}
]
extrainfo:This is a microphone amplifier circuit. The microphone creates a low resistance from the base of Q1 to ground, forming a voltage divider with RB and providing a very low base voltage.

Figure 5.50 Microphone amplifier.
Solution Many microphones exhibit a small low-frequency resistance (e.g., $<100 \Omega$ ). If used in this circuit, such a microphone creates a low resistance from the base of $Q_{1}$ to ground, forming a voltage divider with $R_{B}$ and providing a very low base voltage. For example, a microphone resistance of $100 \Omega$ yields

$$
\begin{align*}
V_{X} & =\frac{100 \Omega}{100 \mathrm{k} \Omega+100 \Omega} \times 2.5 \mathrm{~V}  \tag{5.211}\\
& \approx 2.5 \mathrm{mV} \tag{5.212}
\end{align*}
$$

Thus, the microphone low-frequency resistance disrupts the bias of the amplifier.
Exercise Does the circuit operate better if $R_{B}$ is halved?

How should the circuit of Fig. 5.50 be fixed? Since only the signal generated by the microphone is of interest, a series capacitor can be inserted as depicted in Fig. 5.51 so as to isolate the dc biasing of the amplifier from the microphone. That is, the bias point of $Q_{1}$ remains independent of the resistance of the microphone because $C_{1}$ carries no bias current. The value of $C_{1}$ is chosen so that it provides a relatively low impedance (almost a short circuit) for the frequencies of interest. We say $C_{1}$ is a "coupling" capacitor and the input of this stage is "ac-coupled" or "capacitively coupled." Many circuits employ capacitors to isolate the bias conditions from "undesirable" effects. More examples clarify this point later.
image_name:Figure 5.51
description:
[
name: RB, type: Resistor, value: 100kΩ, ports: {N1: VCC, N2: X}
name: RC, type: Resistor, value: 1kΩ, ports: {N1: VCC, N2: Vout}
name: C1, type: Capacitor, value: C1, ports: {Np: X1, Nn: X}
name: Q1, type: NPN, ports: {C: Vout, B: X, E: GND}
name: VCC, type: VoltageSource, value: 2.5V, ports: {Np: VCC, Nn: GND}
]
extrainfo:The circuit is a microphone amplifier with capacitive coupling at the input. C1 is used to isolate the bias conditions from the signal source. RB and RC set the biasing of the NPN transistor Q1. Vout is the amplified output voltage.

Figure 5.51 Capacitive coupling at the input of microphone amplifier.

The foregoing observation suggests that the methodology illustrated in Fig. 5.9 must include an additional rule: replace all capacitors with an open circuit for dc analysis and a short circuit for small-signal analysis.

Let us begin with the stage depicted in Fig. 5.52(a). For bias calculations, the signal source is set to zero and $C_{1}$ is opened, leading to Fig. 5.52(b). From Section 5.2.1,
image_name:(a)
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: RB, type: Resistor, value: RB, ports: {N1: VCC, N2: X}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Y}
name: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: X}
name: Q1, type: NPN, ports: {C: Y, B: X, E: GND}
]
extrainfo:The circuit is a common-emitter amplifier with capacitive coupling at the input. It uses an NPN transistor (Q1) with resistors RB and RC for biasing, and a capacitor C1 for AC signal coupling. The output is taken from the collector of Q1.
image_name:(b)
description:
[
name: Q1, type: NPN, ports: {C: VCC, B: X, E: GND}
name: RB, type: Resistor, value: RB, ports: {N1: VCC, N2: X}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Y}
]
extrainfo:The circuit diagram (b) represents a simplified stage for bias calculation in a common-emitter amplifier. The capacitor C1 is removed for DC analysis, and the transistor Q1 is used for amplification. Resistors RB and RC are used for biasing and load, respectively.
image_name:(c)
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: RB, type: Resistor, value: RB, ports: {N1: X, N2: GND}
name: Q1, type: NPN, ports: {C: X, B: X, E: GND}
name: RC, type: Resistor, value: RC, ports: {N1: Vout, N2: GND}
]
extrainfo:The circuit is a common-emitter amplifier with capacitive coupling, used for small-signal amplification. The input is grounded for AC analysis, and the output is taken across RC.
image_name:(d)
description:
[
name: C1, type: Capacitor, value: C1, ports: {Np: b1, Nn: GND}
name: RB, type: Resistor, value: RB, ports: {N1: b1, N2: GND}
name: RC, type: Resistor, value: RC, ports: {N1: C1, N2: GND}
name: Rin1, type: Resistor, value: Rin1, ports: {N1: b1, N2: GND}
name: Rin2, type: Resistor, value: Rin2, ports: {N1: Vin, N2: b1}
name: Rout, type: Resistor, value: Rout, ports: {N1: C1, N2: Vout}
name: Q1, type: NPN, ports: {C: C1, B: b1, E: GND}
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: VCC, type: VoltageSource, value: VCC, ports: {Np: C1, Nn: GND}
]
extrainfo:The circuit diagram (d) represents a simplified stage for input impedance calculation in a common-emitter amplifier configuration. It includes a voltage divider biasing network and a coupling capacitor at the input.
image_name:(e)
description:
[
name: Q1, type: NPN, ports: {C: C1, B: GND, E: GND}
name: RB, type: Resistor, value: RB, ports: {N1: GND, N2: GND}
name: RC, type: Resistor, value: RC, ports: {N1: C1, N2: GND}
name: C1, type: Capacitor, value: C1, ports: {Np: C1, Nn: GND}
name: Vin, type: VoltageSource, value: Vin, ports: {Np: GND, Nn: GND}
name: Rin1, type: Resistor, value: Rin1, ports: {N1: GND, N2: GND}
name: Rin2, type: Resistor, value: Rin2, ports: {N1: GND, N2: b1}
name: Rout, type: Resistor, value: Rout, ports: {N1: C1, N2: Vout}
]
extrainfo:This is a simplified circuit diagram for output impedance calculation of a common-emitter amplifier stage. The circuit uses capacitive coupling and is grounded at multiple points, with resistors RB and RC setting the biasing, and Rout representing the output load.

Figure 5.52 (a) Capacitive coupling at the input of a CE stage, (b) simplified stage for bias calculation, (c) simplified stage for small-signal calculation, (d) simplified circuit for input impedance calculation, (e) simplified circuit for output impedance calculation.
we have

$$
\begin{align*}
I_{C} & =\beta \frac{V_{C C}-V_{B E}}{R_{B}}  \tag{5.213}\\
V_{Y} & =V_{C C}-\beta R_{C} \frac{V_{C C}-V_{B E}}{R_{B}} \tag{5.214}
\end{align*}
$$

To avoid saturation, $V_{Y} \geq V_{B E}$.
With the bias current known, the small-signal parameters $g_{m}, r_{\pi}$, and $r_{O}$ can be calculated. We now turn our attention to small-signal analysis, considering the simplified circuit of Fig. 5.52(c). Here, $C_{1}$ is replaced with a short and $V_{C C}$ with ac ground, but $Q_{1}$ is maintained as a symbol. We attempt to solve the circuit by inspection: if unsuccessful, we will resort to using a small-signal model for $Q_{1}$ and writing KVLs and KCLs.

The circuit of Fig. 5.52(c) resembles the CE core illustrated in Fig. 5.29, except for $R_{B}$. Interestingly, $R_{B}$ has no effect on the voltage at node $X$ so long as $v_{i n}$ remains an ideal voltage source; i.e., $v_{X}=v_{i n}$ regardless of the value of $R_{B}$. Since the voltage gain from the base to the collector is given by $v_{\text {out }} / v_{X}=-g_{m} R_{C}$, we have

$$
\begin{equation*}
\frac{v_{\text {out }}}{v_{\text {in }}}=-g_{m} R_{C} \tag{5.215}
\end{equation*}
$$

If $V_{A}<\infty$, then

$$
\begin{equation*}
\frac{v_{\text {out }}}{v_{\text {in }}}=-g_{m}\left(R_{C} \| r_{O}\right) \tag{5.216}
\end{equation*}
$$

However, the input impedance is affected by $R_{B}$ [Fig. 5.52(d)]. Recall from Fig. 5.7 that the impedance seen looking into the base, $R_{i n 1}$, is equal to $r_{\pi}$ if the emitter is grounded. Here, $R_{B}$ simply appears in parallel with $R_{i n 1}$, yielding

$$
\begin{equation*}
R_{i n 2}=r_{\pi} \| R_{B} . \tag{5.217}
\end{equation*}
$$

Thus, the bias resistor lowers the input impedance. Nevertheless, as shown in Problem 5.51 , this effect is usually negligible.

To determine the output impedance, we set the input source to zero [Fig. 5.52(e)]. Comparing this circuit with that in Fig. 5.32(b), we recognize that $R_{\text {out }}$ remains unchanged:

$$
\begin{equation*}
R_{\text {out }}=R_{C} \| r_{O} \tag{5.218}
\end{equation*}
$$

because both terminals of $R_{B}$ are shorted to ground.
In summary, the bias resistor, $R_{B}$, negligibly impacts the performance of the stage shown in Fig. 5.52(a).

Example
5.32

Having learned about ac coupling, the student in Example 5.31 modifies the design to that shown in Fig. 5.53 and attempts to drive a speaker. Unfortunately, the circuit still fails. Explain why.
image_name:Figure 5.53
description:
[
name: RB, type: Resistor, value: 100k, ports: {N1: VCC, N2: X}
name: RC, type: Resistor, value: 1k, ports: {N1: VCC, N2: C1}
name: C1, type: Capacitor, value: C1, ports: {Np: Y, Nn: X}
name: Q1, type: NPN, ports: {C: C1, B: X, E: GND}
]
extrainfo:The circuit is an amplifier attempting to drive a speaker directly. The speaker is connected between the collector of Q1 and ground, which causes the transistor to go into deep saturation due to the low DC resistance of the speaker. This results in the collector being shorted to ground, affecting the circuit's operation.

Figure 5.53 Amplifier with direct connection of speaker.

Solution Typical speakers incorporate a solenoid (inductor) to actuate a membrane. The solenoid exhibits a very low dc resistance, e.g., less than $1 \Omega$. Thus, the speaker in Fig. 5.53 shorts the collector to ground, driving $Q_{1}$ into deep saturation.

Exercise Does the circuit operate better if the speaker is tied between the output node and $V_{C C}$ ?

The student applies ac coupling to the output as well [Fig. 5.54(a)] and measures the quiescent points to ensure proper biasing. The collector bias voltage is 1.5 V , indicating that $Q_{1}$ operates in the active region. However, the student still observes no gain in the circuit. (a) If $I_{S}=5 \times 10^{-17} \mathrm{~A}$ and $V_{A}=\infty$, compute the $\beta$ of the transistor. (b) Explain why the circuit provides no gain.
image_name:(a)
description:
[
name: RB, type: Resistor, value: 100kΩ, ports: {N1: VCC, N2: b1}
name: RC, type: Resistor, value: 1kΩ, ports: {N1: Vout, N2: GND}
name: C1, type: Capacitor, value: C1, ports: {Np: Y, Nn: X}
name: C2, type: Capacitor, value: C2, ports: {Np: X1, Nn: Vout}
name: Q1, type: NPN, ports: {C: Vout, B: b1, E: GND}
name: VCC, type: VoltageSource, value: 2.5V, ports: {Np: VCC, Nn: GND}
name: RSP, type: Resistor, value: 8Ω, ports: {N1: Vout, N2: GND}
]
extrainfo:The circuit is a common-emitter amplifier with capacitive coupling at the input and output. The transistor Q1 is biased with a voltage source VCC of 2.5V. The input is AC-coupled through C1, and the output is AC-coupled through C2. The collector resistor RC and the speaker resistor RSP are connected to the output node Vout. The circuit lacks gain possibly due to improper biasing or loading effects.
image_name:(b)
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: RB, type: Resistor, value: 100kΩ, ports: {N1: Vin, N2: b1}
name: Q1, type: NPN, ports: {C: Vout, B: b1, E: GND}
name: RC, type: Resistor, value: 1kΩ, ports: {N1: Vout, N2: GND}
name: RSP, type: Resistor, value: 8Ω, ports: {N1: Vout, N2: GND}
name: VCC, type: VoltageSource, value: 2.5V, ports: {Np: Vout, Nn: GND}
]
extrainfo:The circuit is a basic common-emitter amplifier configuration with a single NPN transistor (Q1). The input is applied at the base of the transistor, and the output is taken from the collector. The circuit includes resistors for biasing (RB) and load (RC), with the addition of a speaker represented by RSP at the output. The collector is connected to VCC, and the emitter is grounded. The circuit is designed for amplification but may not provide gain due to improper biasing or loading.

Figure 5.54 (a) Amplifier with capacitive coupling at the input and output, (b) simplified small-signal model.

Solution (a) A collector voltage of 1.5 V translates to a voltage drop of 1 V across $R_{C}$ and hence a collector current of 1 mA . Thus,

$$
\begin{align*}
V_{B E} & =V_{T} \ln \frac{I_{C}}{I_{S}}  \tag{5.219}\\
& =796 \mathrm{mV} \tag{5.220}
\end{align*}
$$

It follows that

$$
\begin{align*}
I_{B} & =\frac{V_{C C}-V_{B E}}{R_{B}}  \tag{5.221}\\
& =17 \mu \mathrm{~A}, \tag{5.222}
\end{align*}
$$

and $\beta=I_{C} / I_{B}=58.8$.
(b) Speakers typically exhibit a low impedance in the audio frequency range, e.g., $8 \Omega$. Drawing the ac equivalent as in Fig. 5.54(b), we note that the total resistance seen at the collector node is equal to $1 \mathrm{k} \Omega \| 8 \Omega$, yielding a gain of

$$
\begin{equation*}
\left|A_{v}\right|=g_{m}\left(R_{C} \| R_{S}\right)=0.31 \tag{5.223}
\end{equation*}
$$

Exercise Repeat the above example for $R_{C}=500 \Omega$.

The design in Fig. 5.54(a) exemplifies an improper interface between an amplifier and a load: the output impedance is so much higher than the load impedance that the connection of the load to the amplifier drops the gain drastically.

How can we remedy the problem of loading here? Since the voltage gain is proportional to $g_{m}$, we can bias $Q_{1}$ at a much higher current to raise the gain. This is studied in Problem 5.53. Alternatively, we can interpose a "buffer" stage between the CE amplifier and the speaker (Section 5.3.3).

Let us now consider the biasing scheme shown in Fig. 5.15 and repeated in Fig. 5.55(a). To determine the bias conditions, we set the signal source to zero and open the capacitor(s). Equations (5.38)-(5.41) can then be used. For small-signal analysis, the simplified circuit in Fig. 5.55(b) reveals a resemblance to that in Fig. 5.52(b), except that both $R_{1}$ and $R_{2}$
image_name:Figure 5.55 (a)
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: B}
name: R1, type: Resistor, value: R1, ports: {N1: VCC, N2: B}
name: R2, type: Resistor, value: R2, ports: {N1: B, N2: GND}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}
name: Q1, type: NPN, ports: {C: Vout, B: B, E: GND}
]
extrainfo:The circuit is a common-emitter amplifier with capacitive coupling. It uses an NPN transistor (Q1) with resistors R1 and R2 for biasing, and RC as the collector resistor. The input is AC-coupled through capacitor C1, and the output is taken at the collector of Q1. The circuit is powered by VCC.
image_name:Figure 5.55 (b)
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: B}
name: R1, type: Resistor, value: R1, ports: {N1: Vin, N2: GND}
name: R2, type: Resistor, value: R2, ports: {N1: B, N2: GND}
name: RC, type: Resistor, value: RC, ports: {N1: Vout, N2: GND}
name: Q1, type: NPN, ports: {C: Vout, B: B, E: GND}
]
extrainfo:This circuit is a common-emitter amplifier with capacitive coupling. The input signal is applied to the base of the NPN transistor Q1 through capacitor C1. Resistors R1 and R2 form a voltage divider biasing network for the transistor. The output is taken from the collector of Q1, and RC acts as the load resistor.

Figure 5.55 (a) Biased stage with capacitive coupling, (b) simplified circuit.
image_name:(a)
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: R1, type: Resistor, value: R1, ports: {N1: Vin, N2: b}
name: R2, type: Resistor, value: R2, ports: {N1: b, N2: GND}
name: RC, type: Resistor, value: RC, ports: {N1: Vout, N2: VCC}
name: RE, type: Resistor, value: RE, ports: {N1: e, N2: GND}
name: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: b}
name: VCC, type: VoltageSource, value: VCC, ports: {Np: VCC, Nn: GND}
name: Q1, type: NPN, ports: {C: Vout, B: b, E: e}
]
extrainfo:This circuit is a common-emitter amplifier with capacitive coupling. The input signal is applied to the base of the NPN transistor Q1 through capacitor C1. Resistors R1 and R2 form a voltage divider biasing network for the transistor. The output is taken from the collector of Q1, and RC acts as the load resistor.
image_name:(b)
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: B}
name: R1, type: Resistor, value: R1, ports: {N1: Vin, N2: GND}
name: R2, type: Resistor, value: R2, ports: {N1: B, N2: GND}
name: RC, type: Resistor, value: RC, ports: {N1: Vout, N2: GND}
name: RE, type: Resistor, value: RE, ports: {N1: E, N2: GND}
name: Q1, type: NPN, ports: {C: Vout, B: B, E: E}
]
extrainfo:This circuit is a simplified common-emitter amplifier with capacitive coupling. The input signal is applied directly to the base of the NPN transistor Q1. Resistors R1 and R2 form a voltage divider biasing network for the transistor. The output is taken from the collector of Q1, and RC acts as the load resistor. RE is used for emitter degeneration, improving linearity and stability.

Figure 5.56 (a) Degenerated stage with capacitive coupling, (b) simplified circuit.
appear in parallel with the input. Thus, the voltage gain is still equal to $-g_{m}\left(R_{C} \| r_{O}\right)$ and the input impedance is given by

$$
\begin{equation*}
R_{i n}=r_{\pi}\left\|R_{1}\right\| R_{2} \tag{5.224}
\end{equation*}
$$

The output resistance is equal to $R_{C} \| r_{O}$.
We next study the more robust biasing scheme of Fig. 5.19, repeated in Fig. 5.56(a) along with an input coupling capacitor. The bias point is determined by opening $C_{1}$ and following Eqs. (5.52) and (5.53). With the collector current known, the smallsignal parameters of $Q_{1}$ can be computed. We also construct the simplified ac circuit shown in Fig. 5.56(b), noting that the voltage gain is not affected by $R_{1}$ and $R_{2}$ and remains equal to

$$
\begin{equation*}
A_{v}=\frac{-R_{C}}{\frac{1}{g_{m}}+R_{E}} \tag{5.225}
\end{equation*}
$$

where Early effect is neglected. On the other hand, the input impedance is lowered to:

$$
\begin{equation*}
R_{i n}=\left[r_{\pi}+(\beta+1) R_{E}\right]\left\|R_{1}\right\| R_{2}, \tag{5.226}
\end{equation*}
$$

whereas the output impedance remains equal to $R_{C}$ if $V_{A}=\infty$.
As explained in Section 5.2.3, the use of emitter degeneration can effectively stabilize the bias point despite variations in $\beta$ and $I_{S}$. However, as evident from Eq. (5.225), degeneration also lowers the gain. Is it possible to apply degeneration to biasing but not to the signal? Illustrated in Fig. 5.57 is such a topology, where $C_{2}$ is large enough to act as a short circuit for signal frequencies of interest. We can
image_name:Figure 5.57
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: b1}
name: R1, type: Resistor, value: R1, ports: {N1: VCC, N2: b1}
name: R2, type: Resistor, value: R2, ports: {N1: b1, N2: GND}
name: Q1, type: NPN, ports: {C: c1, B: b1, E: e1}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: c1}
name: RE, type: Resistor, value: RE, ports: {N1: e1, N2: GND}
name: C2, type: Capacitor, value: C2, ports: {Np: e1, Nn: GND}
]
extrainfo:The circuit is a common-emitter amplifier with emitter degeneration bypassed by capacitor C2. It is designed to stabilize the bias point while maintaining a high voltage gain at signal frequencies. The input is coupled through C1, and the output is taken across RC. The use of C2 effectively eliminates degeneration at signal frequencies.

Figure 5.57 Use of capacitor to eliminate degeneration.
therefore write

$$
\begin{equation*}
A_{v}=-g_{m} R_{C} \tag{5.227}
\end{equation*}
$$

and

$$
\begin{align*}
R_{\text {in }} & =r_{\pi}\left\|R_{1}\right\| R_{2}  \tag{5.228}\\
R_{\text {out }} & =R_{C} . \tag{5.229}
\end{align*}
$$

Example Design the stage of Fig. 5.57 to satisfy the following conditions: $I_{C}=1 \mathrm{~mA}$, voltage drop 5.34 across $R_{E}=400 \mathrm{mV}$, voltage gain $=20$ in the audio frequency range ( 20 Hz to 20 kHz ), input impedance $>2 \mathrm{k} \Omega$. Assume $\beta=100, I_{S}=5 \times 10^{-16}$, and $V_{C C}=2.5 \mathrm{~V}$.

Solution With $I_{C}=1 \mathrm{~mA} \approx I_{E}$, the value of $R_{E}$ is equal to $400 \Omega$. For the voltage gain to remain unaffected by degeneration, the maximum impedance of $C_{1}$ must be much smaller than $1 / g_{m}=26 \Omega .{ }^{8}$ Occurring at 20 Hz , the maximum impedance must remain below roughly $0.1 \times\left(1 / g_{m}\right)=2.6 \Omega$ :

$$
\begin{equation*}
\frac{1}{C_{2} \omega} \leq \frac{1}{10} \cdot \frac{1}{g_{m}} \text { for } \omega=2 \pi \times 20 \mathrm{~Hz} \tag{5.230}
\end{equation*}
$$

Thus,

$$
\begin{equation*}
C_{2} \geq 30,607 \mu \mathrm{~F} \tag{5.231}
\end{equation*}
$$

(This value is unrealistically large, requiring modification of the design.) We also have

$$
\begin{equation*}
\left|A_{v}\right|=g_{m} R_{C}=20 \tag{5.232}
\end{equation*}
$$

obtaining

$$
\begin{equation*}
R_{C}=520 \Omega \tag{5.233}
\end{equation*}
$$

Since the voltage across $R_{E}$ is equal to 400 mV and $V_{B E}=V_{T} \ln \left(I_{C} / I_{S}\right)=736 \mathrm{mV}$, we have $V_{X}=1.14 \mathrm{~V}$. Also, with a base current of $10 \mu \mathrm{~A}$, the current flowing through $R_{1}$ and $R_{2}$ must exceed $100 \mu \mathrm{~A}$ to lower sensitivity to $\beta$ :

$$
\begin{equation*}
\frac{V_{C C}}{R_{1}+R_{2}}>10 I_{B} \tag{5.234}
\end{equation*}
$$

and hence

$$
\begin{equation*}
R_{1}+R_{2}<25 \mathrm{k} \Omega \tag{5.235}
\end{equation*}
$$

Under this condition,

$$
\begin{equation*}
V_{X} \approx \frac{R_{2}}{R_{1}+R_{2}} V_{C C}=1.14 \mathrm{~V} \tag{5.236}
\end{equation*}
$$

yielding

$$
\begin{align*}
R_{2} & =11.4 \mathrm{k} \Omega  \tag{5.237}\\
R_{1} & =13.6 \mathrm{k} \Omega \tag{5.238}
\end{align*}
$$

[^0]We must now check to verify that this choice of $R_{1}$ and $R_{2}$ satisfies the condition $R_{i n}>2 \mathrm{k} \Omega$. That is,

$$
\begin{align*}
R_{i n} & =r_{\pi}\left\|R_{1}\right\| R_{2}  \tag{5.239}\\
& =1.83 \mathrm{k} \Omega . \tag{5.240}
\end{align*}
$$

Unfortunately, $R_{1}$ and $R_{2}$ lower the input impedance excessively. To remedy the problem, we can allow a smaller current through $R_{1}$ and $R_{2}$ than $10 I_{B}$, at the cost of creating more sensitivity to $\beta$. For example, if this current is set to $5 I_{B}=50 \mu \mathrm{~A}$ and we still neglect $I_{B}$ in the calculation of $V_{X}$,

$$
\begin{equation*}
\frac{V_{C C}}{R_{1}+R_{2}}>5 I_{B} \tag{5.241}
\end{equation*}
$$

and

$$
\begin{equation*}
R_{1}+R_{2}<50 \mathrm{k} \Omega \tag{5.242}
\end{equation*}
$$

Consequently,

$$
\begin{align*}
& R_{2}=22.8 \mathrm{k} \Omega  \tag{5.243}\\
& R_{1}=27.2 \mathrm{k} \Omega \tag{5.244}
\end{align*}
$$

giving

$$
\begin{equation*}
R_{\text {in }}=2.15 \mathrm{k} \Omega \tag{5.245}
\end{equation*}
$$

Exercise Redesign the above stage for a gain of 10 and compare the results.

We conclude our study of the CE stage with a brief look at the more general case depicted in Fig. 5.58(a), where the input signal source exhibits a finite resistance and the output is tied to a load $R_{L}$. The biasing remains identical to that of Fig. 5.56(a), but $R_{S}$ and $R_{L}$ lower the voltage gain $v_{\text {out }} / v_{\text {in }}$. The simplified ac circuit of Fig. 5.58(b) reveals $V_{i n}$ is attenuated by the voltage division between $R_{S}$ and the impedance seen at node $X$, $R_{1}\left\|R_{2}\right\|\left[r_{\pi}+(\beta+1) R_{E}\right]$, i.e.,

$$
\begin{equation*}
\frac{v_{X}}{v_{i n}}=\frac{R_{1}\left\|R_{2}\right\|\left[r_{\pi}+(\beta+1) R_{E}\right]}{R_{1}\left\|R_{2}\right\|\left[r_{\pi}+(\beta+1) R_{E}\right]+R_{S}} \tag{5.246}
\end{equation*}
$$

The voltage gain from $v_{i n}$ to the output is given by

$$
\begin{align*}
\frac{v_{\text {out }}}{v_{\text {in }}} & =\frac{v_{X}}{v_{\text {in }}} \cdot \frac{v_{\text {out }}}{v_{X}}  \tag{5.247}\\
& =-\frac{R_{1}\left\|R_{2}\right\|\left[r_{\pi}+(\beta+1) R_{E}\right]}{R_{1}\left\|R_{2}\right\|\left[r_{\pi}+(\beta+1) R_{E}\right]+R_{S}} \frac{R_{C} \| R_{L}}{\frac{1}{g_{m}}+R_{E}} \tag{5.248}
\end{align*}
$$

As expected, lower values of $R_{1}$ and $R_{2}$ reduce the gain.
image_name:(a)
description:
[
name: Vin, type: VoltageSource, ports: {Np: Vin, Nn: GND}
name: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: X}
name: R1, type: Resistor, value: R1, ports: {N1: VCC, N2: b1}
name: R2, type: Resistor, value: R2, ports: {N1: b1, N2: GND}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: C1}
name: RE, type: Resistor, value: RE, ports: {N1: e1, N2: GND}
name: RL, type: Resistor, value: RL, ports: {N1: Vout, N2: GND}
name: C1, type: Capacitor, ports: {N1: X, N2: b1}
name: C2, type: Capacitor, ports: {N1: C1, N2: Vout}
name: Q1, type: NPN, ports: {C: C1, B: b1, E: e1}
]
extrainfo:The circuit is a common emitter (CE) amplifier stage. It uses an NPN transistor (Q1) to amplify the input signal Vin. The resistors R1 and R2 form a voltage divider biasing network for the base of the transistor. The capacitor C1 couples the input signal to the base of the transistor, and C2 couples the amplified signal to the output. RE provides emitter degeneration to stabilize the bias point, and RC is the collector resistor. RL is the load resistor connected to the output Vout.
image_name:(b)
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: X}
name: R1||R2, type: Resistor, ports: {N1: X, N2: GND}
name: Q1, type: NPN, ports: {C: Vout, B: X, E: GND}
name: RE, type: Resistor, value: RE, ports: {N1: E, N2: GND}
name: RC||RL, type: Resistor, ports: {N1: Vout, N2: GND}
]
extrainfo:The circuit diagram (b) is a simplified common-emitter (CE) amplifier stage. The input signal is applied at Vin, and the output is taken at Vout. The voltage divider bias is represented by R1||R2, and the load resistance is RC||RL. RE provides emitter degeneration.
image_name:(c)
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: X}
name: R1||R2, type: Resistor, ports: {N1: X, N2: GND}
name: Q1, type: NPN, ports: {C: Vout, B: X, E: GND}
name: RE, type: Resistor, value: RE, ports: {N1: GND, N2: GND}
name: RC||RL, type: Resistor, ports: {N1: Vout, N2: GND}
]
extrainfo:The circuit diagram (c) represents a simplified common-emitter (CE) amplifier stage with a voltage source Vin, input resistor RS, and a parallel combination of resistors R1 and R2 at the base. The transistor Q1 amplifies the input signal, with RE providing emitter biasing and RC||RL forming the load at the collector. The output is taken across the load resistor combination RC||RL.

Figure 5.58 (a) General CE stage, (b) simplified circuit, (c) Thevenin model of input network.

Did you know?

What we have learned so far readily allows us to construct interesting circuits. One of the first gadgets that you can build are radio receivers and transmitters. Shown below is an FM transmitter operating in the vicinity of 100 MHz . A self-biased CE stage amplifies the microphone signal, applying the result to an oscillator. The audio signal "modulates" (varies) the frequency of the oscillator, creating an FM output.
image_name:Simple FM transmitter
description:
[
name: Q1, type: NPN, ports: {C: VDD, B: Node1, E: GND}
name: Q2, type: NPN, ports: {C: Node3, B: Node2, E: GND}
name: 4 kΩ, type: Resistor, value: 4 kΩ, ports: {N1: VDD, N2: Node1}
name: 30 kΩ, type: Resistor, value: 30 kΩ, ports: {N1: Node1, N2: Mike}
name: 2 kΩ, type: Resistor, value: 2 kΩ, ports: {N1: Node2, N2: Node3}
name: 200 Ω, type: Resistor, value: 200 Ω, ports: {N1: Node2, N2: GND}
name: 2 μF, type: Capacitor, value: 2 μF, ports: {Np: Node1, Nn: Node2}
name: 80 pF, type: Capacitor, value: 80 pF, ports: {Np: Node3, Nn: Antenna}
name: 80 pF, type: Capacitor, value: 80 pF, ports: {Np: Node3, Nn: GND}
name: 60 nH, type: Inductor, value: 60 nH, ports: {N1: VDD, N2: Node3}
name: 5 V, type: VoltageSource, value: 5 V, ports: {Np: VDD, Nn: GND}
name: Mike, type: Other, ports: {N1: Mike, N2: GND}
]
extrainfo:The circuit is a simple FM transmitter. It uses a self-biased common-emitter (CE) amplifier stage (Q1) to amplify the microphone signal. This amplified signal modulates the frequency of an oscillator stage (Q2), creating the FM output. The oscillator frequency is determined by the LC tank circuit consisting of the 60 nH inductor and the 80 pF capacitors. The FM signal is transmitted through an antenna connected to the circuit.

Simple FM transmitter.

The above computation views the input network as a voltage divider. Alternatively, we can utilize a Thevenin equivalent to include the effect of $R_{S}, R_{1}$, and $R_{2}$ on the voltage gain. Illustrated in Fig. 5.58(c), the idea is to replace $v_{i n}, R_{S}$ and $R_{1} \| R_{2}$ with $v_{\text {Thev }}$ and $R_{\text {Thev }}$ :

$$
\begin{align*}
v_{\text {Thev }} & =\frac{R_{1} \| R_{2}}{R_{1} \| R_{2}+R_{S}} v_{\text {in }}  \tag{5.249}\\
R_{\text {Thev }} & =R_{S}\left\|R_{1}\right\| R_{2} \tag{5.250}
\end{align*}
$$

The resulting circuit resembles that in Fig. 5.43(a) and follows Eq. (5.185):

$$
\begin{equation*}
A_{v}=-\frac{R_{C} \| R_{L}}{\frac{1}{g_{m}}+R_{E}+\frac{R_{\text {Thev }}}{\beta+1}} \cdot \frac{R_{1} \| R_{2}}{R_{1} \| R_{2}+R_{S}} \tag{5.251}
\end{equation*}
$$

where the second fraction on the right accounts for the voltage attenuation given by Eq. (5.249). The reader is encouraged to prove that Eqs. (5.248) and (5.251) are identical.

The two approaches described above exemplify analysis techniques used to solve circuits and gain insight. Neither requires drawing the small-signal model of the transistor because the reduced circuits can be "mapped" into known topologies.

Figure 5.59 summarizes the concepts studied in this section.
image_name:Figure 5.59 (top)
description:
[
name: Q1, type: NPN, ports: {C: RC, B: b1, E: GND}
name: RC, type: Resistor, value: RC, ports: {N1: VDD, N2: RC}
name: C1, type: Capacitor, value: C1, ports: {Np: RC, Nn: Vout}
name: ro, type: Resistor, value: ro, ports: {N1: RC, N2: GND}
name: RE, type: Resistor, value: RE, ports: {N1: E, N2: GND}
name: R1, type: Resistor, value: R1, ports: {N1: Vin, N2: b1}
name: R2, type: Resistor, value: R2, ports: {N1: b1, N2: GND}
name: C2, type: Capacitor, value: C2, ports: {Np: E, Nn: GND}
]
extrainfo:The circuit diagram illustrates a common-emitter amplifier configuration with an NPN transistor (Q1). The amplifier includes resistive loads (RC and RE), coupling capacitors (C1 and C2), and a biasing network (R1 and R2). The configuration is designed to provide voltage gain, with the output taken across the collector resistor RC. The circuit also considers the output impedance represented by ro.
image_name:Figure 5.59 (bottom)
description:
[
name: Q1, type: NPN, ports: {C: Rout, B: b1, E: GND}
name: RC, type: Resistor, value: RC, ports: {N1: Rout, N2: GND}
name: C1, type: Capacitor, value: C1, ports: {Np: Rout, Nn: GND}
name: ro, type: Resistor, value: ro, ports: {N1: Rout, N2: GND}
name: RE, type: Resistor, value: RE, ports: {N1: GND, N2: GND}
name: R1, type: Resistor, value: R1, ports: {N1: b1, N2: GND}
name: R2, type: Resistor, value: R2, ports: {N1: b1, N2: GND}
name: C2, type: Capacitor, value: C2, ports: {Np: GND, Nn: GND}
]
extrainfo:The circuit diagram represents a common-base topology with an NPN transistor Q1. It includes resistors RC, ro, RE, R1, and R2, and capacitors C1 and C2. The circuit is configured to analyze input and output resistance, gain, and headroom.

Figure 5.59 Summary of concepts studied thus far.

### 5.3.2 Common-Base Topology

Following our extensive study of the CE stage, we now turn our attention to the "commonbase" (CB) topology. Nearly all of the concepts described for the CE configuration apply here as well. We therefore follow the same train of thought, but at a slightly faster pace.

Given the amplification capabilities of the CE stage, the reader may wonder why we study other amplifier topologies. As we will see, other configurations provide different circuit properties that are preferable to those of the CE stage in some applications. The reader is encouraged to review Examples 5.2-5.4, their resulting rules illustrated in Fig. 5.7, and the possible topologies in Fig. 5.28 before proceeding further.

Figure 5.60 shows the CB stage. The input is applied to the emitter and the output is sensed at the collector. Biased at a proper voltage, the base acts as ac ground and hence as a node "common" to the input and output ports. As with the CE stage, we first study the core and subsequently add the biasing elements.
image_name:Figure 5.60 Common-base stage
description:
[
name: Vin, type: VoltageSource, ports: {Np: Vin, Nn: GND}
name: RC, type: Resistor, ports: {N1: VCC, N2: Vout}
name: Q, type: NPN, ports: {C: Vout, B: Vb, E: Vin}
name: Vb, type: VoltageSource, ports: {Np: Vb, Nn: GND}
name: VCC, type: VoltageSource, ports: {Np: VCC, Nn: GND}
]
extrainfo:The circuit is a common-base amplifier stage where the input is applied to the emitter and the output is taken from the collector of the NPN transistor Q. The base is biased with a voltage source Vb, and the collector is connected to a resistor RC, which is in turn connected to the supply voltage VCC. The circuit amplifies the input signal Vin.

Figure 5.60 Common-base stage.
Analysis of CB Core How does the CB stage of Fig. 5.61(a) respond to an input signal? ${ }^{9}$ If $V_{\text {in }}$ goes up by a small amount $\Delta V$, the base-emitter voltage of $Q_{1}$ decreases by the same amount because the base voltage is fixed. Consequently, the collector current falls by $g_{m} \Delta V$, allowing $V_{\text {out }}$ to rise by $g_{m} \Delta V R_{C}$. We therefore surmise that the small-signal voltage gain is equal to

$$
\begin{equation*}
A_{v}=g_{m} R_{C} \tag{5.252}
\end{equation*}
$$

[^1]image_name:(a)
description:
[
name: Q1, type: NPN, ports: {C: Vout, B: Vb, E: Vin}
name: RC, type: Resistor, value: RC, ports: {N1: Vout, N2: VCC}
name: Vb, type: VoltageSource, value: Vb, ports: {Np: Vb, Nn: GND}
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
]
extrainfo:The circuit diagram (a) is a common-base (CB) amplifier stage. It demonstrates the response to a small input change, where an increase in input voltage Vin leads to an increase in output voltage Vout due to the positive gain of the CB configuration. The small-signal voltage gain is given by Av = gm * RC, where gm is the transconductance and RC is the load resistor.
image_name:(b)
description:
[
name: Q1, type: NPN, ports: {C: Vout, B: Vin, E: GND}
name: RC, type: Resistor, value: RC, ports: {N1: Vout, N2: GND}
name: Vb, type: VoltageSource, value: Vb, ports: {Np: Vb, Nn: GND}
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: r_pi, type: Resistor, value: r_pi, ports: {N1: Vin, N2: GND}
name: gm_v_pi, type: CurrentControlledCurrentSource, ports: {Np: Vin, Nn: Vout}
]
extrainfo:The circuit is a small-signal model of a common-base (CB) amplifier stage, showing the relationship between input and output voltages. The NPN transistor Q1 is biased with a fixed base voltage Vb, and the input signal is applied to the emitter. The small-signal voltage gain is represented as A_v = g_m * R_C, indicating a positive gain.

Figure 5.61 (a) Response of CB stage to small input change, (b) small-signal model.
Interestingly, this expression is identical to the gain of the CE topology. Unlike the CE stage, however, this circuit exhibits a positive gain because an increase in $V_{i n}$ leads to an increase in $V_{\text {out }}$.

Let us confirm these results with the aid of the small-signal equivalent depicted in Fig. 5.61(b), where the Early effect is neglected. Beginning with the output node, we equate the current flowing through $R_{C}$ to $g_{m} v_{\pi}$ :

$$
\begin{equation*}
-\frac{v_{\text {out }}}{R_{C}}=g_{m} v_{\pi} \tag{5.253}
\end{equation*}
$$

obtaining $v_{\pi}=-v_{\text {out }} /\left(g_{m} R_{C}\right)$. Considering the input node next, we recognize that $v_{\pi}=-v_{i n}$. It follows that

$$
\begin{equation*}
\frac{v_{\text {out }}}{v_{\text {in }}}=g_{m} R_{C} \tag{5.254}
\end{equation*}
$$

As with the CE stage, the CB topology suffers from trade-offs among the gain, the voltage headroom, and the I/O impedances. We first examine the circuit's headroom limitations. How should the base voltage, $V_{b}$, in Fig. 5.61(a) be chosen? Recall that the operation in the active region requires $V_{B E}>0$ and $V_{B C} \leq 0$ (for $n p n$ devices). Thus, $V_{b}$ must remain higher than the input by about 800 mV , and the output must remain higher than or equal to $V_{b}$. For example, if the dc level of the input is zero (Fig. 5.62), then the output must not fall below approximately 800 mV , i.e., the voltage drop across $R_{C}$ cannot exceed $V_{C C}-V_{B E}$. Similar to the CE stage limitation, this condition translates to

$$
\begin{align*}
A_{v} & =\frac{I_{C}}{V_{T}} \cdot R_{C}  \tag{5.255}\\
& =\frac{V_{C C}-V_{B E}}{V_{T}} \tag{5.256}
\end{align*}
$$

image_name:Figure 5.62
description:
[
name: RC, type: Resistor, ports: {N1: VCC, N2: C1}
name: Vin, type: VoltageSource, ports: {Np: Vin, Nn: GND}
name: Vb, type: VoltageSource, ports: {Np: Vb, Nn: GND}
name: Q1, type: NPN, ports: {C: C1, B: Vb, E: Vin}
]
extrainfo:The circuit is a common-base amplifier stage. It is designed to amplify the input voltage from Vin while maintaining the output voltage above Vb. The voltage headroom is managed to ensure the output does not fall below approximately 800 mV.

Figure 5.62 Voltage headroom in CB stage.

Example The voltage produced by an electronic thermometer is equal to 600 mV at room 5.35 temperature. Design a CB stage to sense the thermometer voltage and amplify the change with maximum gain. Assume $V_{C C}=1.8 \mathrm{~V}, I_{C}=0.2 \mathrm{~mA}, I_{S}=5 \times 10^{-17} \mathrm{~A}$, and $\beta=100$.

Solution Illustrated in Fig. 5.63(a), the circuit must operate properly with an input level of 600 mV . Thus, $V_{b}=V_{B E}+600 \mathrm{mV}=V_{T} \ln \left(I_{C} / I_{S}\right)+600 \mathrm{mV}=1.354 \mathrm{~V}$. To avoid saturation, the collector voltage must not fall below the base voltage, thereby allowing a maximum voltage drop across $R_{C}$ equal to $1.8 \mathrm{~V}-1.354 \mathrm{~V}=0.446 \mathrm{~V}$. Thus $R_{C}=2.23 \mathrm{k} \Omega$. We can then write

$$
\begin{align*}
A_{v} & =g_{m} R_{C}  \tag{5.257}\\
& =\frac{I_{C} R_{C}}{V_{T}}  \tag{5.258}\\
& =17.2 \tag{5.259}
\end{align*}
$$

The reader is encouraged to repeat the problem with $I_{C}=0.4 \mathrm{~mA}$ to verify that the maximum gain remains relatively independent of the bias current. ${ }^{10}$
image_name:(a)
description:
[
name: Vin, type: VoltageSource, value: 600 mV, ports: {Np: Vin, Nn: GND}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}
name: Q1, type: NPN, ports: {C: Vout, B: Vb, E: Vin}
]
extrainfo:This is a common-base (CB) amplifier stage. The input is at the emitter, the output is at the collector, and the base is connected to a bias voltage Vb. The voltage source Vin provides an input of 600 mV.

Thermometer
(a)
image_name:(a)
description:
[
name: Vin, type: VoltageSource, value: 600 mV, ports: {Np: Vin, Nn: GND}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}
name: R1, type: Resistor, value: R1, ports: {N1: VCC, N2: b1}
name: R2, type: Resistor, value: R2, ports: {N1: b1, N2: GND}
name: Q1, type: NPN, ports: {C: Vout, B: b1, E: Vin}
]
extrainfo:This is a common-base (CB) amplifier stage. The input is at the emitter, the output is at the collector, and the base is connected to a bias voltage Vb. The voltage source Vin provides an input of 600 mV. The resistors R1 and R2 form a voltage divider to generate the bias voltage Vb at node b1.

(b)

Figure 5.63 (a) CB stage sensing an input, (b) bias network for base.

We must now generate $V_{b}$. A simple approach is to employ a resistive divider as depicted in Fig. 5.63(b). To lower sensitivity to $\beta$, we choose $I_{1} \approx 10 I_{B} \approx 20 \mu \mathrm{~A} \approx$ $V_{C C} /\left(R_{1}+R_{2}\right)$. Thus, $R_{1}+R_{2}=90 \mathrm{k} \Omega$. Also,

$$
\begin{equation*}
V_{b} \approx \frac{R_{2}}{R_{1}+R_{2}} V_{C C} \tag{5.260}
\end{equation*}
$$

and hence

$$
\begin{align*}
& R_{2}=67.7 \mathrm{k} \Omega  \tag{5.261}\\
& R_{1}=22.3 \mathrm{k} \Omega . \tag{5.262}
\end{align*}
$$

Exercise Repeat the above example if the thermometer voltage is 300 mV .

[^2]Let us now compute the I/O impedances of the CB topology so as to understand its capabilities in interfacing with preceding and following stages. The rules illustrated in Fig. 5.7 prove extremely useful here, obviating the need for small-signal equivalent circuits. Shown in Fig. 5.64(a), the simplified ac circuit reveals that $R_{i n}$ is simply the impedance seen looking into the emitter with the base at ac ground. From the rules in Fig. 5.7, we have

$$
\begin{equation*}
R_{i n}=\frac{1}{g_{m}} \tag{5.263}
\end{equation*}
$$

if $V_{A}=\infty$. The input impedance of the CB stage is therefore relatively low, e.g., $26 \Omega$ for $I_{C}=1 \mathrm{~mA}$ (in sharp contrast to the corresponding value for a CE stage, $\beta / g_{m}$ ).
image_name:(a)
description:
[
name: Q1, type: NPN, ports: {C: Vcc, B: GND, E: e1}
name: RC, type: Resistor, value: RC, ports: {N1: Vcc, N2: CI}
name: Rin, type: Resistor, value: Rin, ports: {N1: e1, N2: ac}
name: CI, type: Capacitor, value: CI, ports: {Np: CI, Nn: e1}
name: VCC, type: VoltageSource, value: VCC, ports: {Np: Vcc, Nn: GND}
]
extrainfo:The circuit is a simplified AC model of a common-base (CB) amplifier stage. The input impedance is low, determined by the transistor's transconductance.
image_name:(b)
description:
[
name: Q1, type: NPN, ports: {C: VCC, B: Vb, E: Vx}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: C1}
name: Rin, type: Resistor, value: Rin, ports: {N1: Vx, N2: GND}
name: C1, type: Capacitor, value: C1, ports: {Np: C1, Nn: Vb}
name: VCC, type: VoltageSource, value: VCC, ports: {Np: VCC, Nn: GND}
name: Vx, type: VoltageSource, value: Vx, ports: {Np: Vx, Nn: GND}
name: Ix, type: CurrentSource, value: Ix, ports: {Np: Vx, Nn: GND}
]
extrainfo:The circuit represents a common base (CB) configuration with an NPN transistor Q1. The input is connected to the emitter, and the output is taken from the collector. The input impedance is low, as typical for CB configurations.

Figure 5.64 (a) Input impedance of CB stage, (b) response to a small change in input.

The input impedance of the CB stage can also be determined intuitively [Fig. 5.64(b)]. Suppose a voltage source $V_{X}$ tied to the emitter of $Q_{1}$ changes by a small amount $\Delta V$. The base-emitter voltage therefore changes by the same amount, leading to a change in the collector current equal to $g_{m} \Delta V$. Since the collector current flows through the input source, the current supplied by $V_{X}$ also changes by $g_{m} \Delta V$. Consequently, $R_{i n}=\Delta V_{X} / \Delta I_{X}=1 / g_{m}$.

Does an amplifier with a low input impedance find any practical use? Yes, indeed. For example, many stand-alone high-frequency amplifiers are designed with an input resistance of $50 \Omega$ to provide "impedance matching" between modules in a cascade and the transmission lines (traces on a printed-circuit board) connecting the modules (Fig. 5.65). ${ }^{11}$

The output impedance of the CB stage is computed with the aid of Fig. 5.66, where the input voltage source is set to zero. We note that $R_{\text {out }}=R_{\text {out } 1} \| R_{C}$, where $R_{\text {out } 1}$ is the impedance seen at the collector with the emitter grounded. From the rules of Fig. 5.7, we have $R_{\text {out } 1}=r_{O}$ and hence

$$
\begin{equation*}
R_{\text {out }}=r_{O} \| R_{C} \tag{5.264}
\end{equation*}
$$

or

$$
\begin{equation*}
R_{\text {out }}=R_{C} \text { if } V_{A}=\infty \tag{5.265}
\end{equation*}
$$

[^3]image_name:Figure 5.65 System using transmission lines
description:The system block diagram, titled "Figure 5.65 System using transmission lines," consists of a series of components connected in a linear fashion, focusing on signal transmission through matched impedance pathways.

1. **Main Components:**
- **Amplifiers:** The diagram includes three triangular symbols representing amplifiers. These amplifiers are positioned at the beginning, middle, and end of the system, indicating their role in boosting signal strength as it travels through the transmission lines.
- **Transmission Lines:** Two sections of 50-ohm transmission lines are depicted, each section connecting one amplifier to the next. These lines are crucial for maintaining signal integrity over distance.
- **Impedance Matching:** Each transmission line is labeled with a 50-ohm impedance, ensuring impedance matching throughout the system. This matching minimizes signal reflection and loss.

2. **Flow of Information or Control:**
- The signal flow begins at the leftmost amplifier, which amplifies the incoming signal and sends it through the first 50-ohm transmission line.
- The signal then reaches the second amplifier, where it is further amplified before being sent through the second 50-ohm transmission line.
- Finally, the signal arrives at the rightmost amplifier, which boosts the signal to its final output level.
- The arrows along the transmission lines indicate the direction of signal flow from left to right.

3. **Labels, Annotations, and Key Indicators:**
- Each transmission line is clearly labeled as "50-Ω Transmission Line," emphasizing the importance of impedance matching.
- The 50-ohm labels at the connection points reinforce the impedance matching requirement at each stage.

4. **Overall System Function:**
- The primary function of this system is to transmit a signal across a distance while maintaining signal integrity and strength. The use of amplifiers and impedance-matched transmission lines ensures minimal signal loss and reflection, allowing for efficient signal propagation. This arrangement is typical in RF (radio frequency) and microwave applications where signal quality is paramount.

Figure 5.65 System using transmission lines.
image_name:Figure 5.66 Output impedance of CB stage
description:
[
name: Q1, type: NPN, ports: {C: C1, B: GND, E: ac}
name: ro, type: Resistor, value: ro, ports: {N1: C1, N2: GND}
name: RC, type: Resistor, value: RC, ports: {N1: C1, N2: GND}
]
extrainfo:The circuit is a common-base amplifier with an NPN transistor Q1. The input is at the emitter (ac), and the output is taken from the collector (C1). The resistors ro and RC are connected between the collector and ground. The circuit is used to determine the output impedance of the common-base stage.

Figure 5.66 Output impedance of CB stage.

A common-base amplifier is designed for an input impedance of $R_{\text {in }}$ and an output
5.36 impedance of $R_{\text {out }}$. Neglecting the Early effect, determine the voltage gain of the circuit.

Solution $\quad$ Since $R_{\text {in }}=1 / g_{m}$ and $R_{\text {out }}=R_{C}$, we have

$$
\begin{equation*}
A_{v}=\frac{R_{\text {out }}}{R_{\text {in }}} \tag{5.266}
\end{equation*}
$$

Exercise Compare this value with that obtained for the CE stage.

From Eqs. (5.256) and (5.266), we conclude that the CB stage exhibits a set of trade-offs similar to those depicted in Fig. 5.33 for the CE amplifier.

It is instructive to study the behavior of the CB topology in the presence of a finite source resistance. Shown in Fig. 5.67, such a circuit suffers from signal attenuation from the input to node $X$, thereby providing a smaller voltage gain. More specifically, since the impedance seen looking into the emitter of $Q_{1}$ (with the base grounded) is
image_name:Figure 5.67 CB stage with source resistance.
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: X}
name: 1/gm, type: Resistor, value: 1/gm, ports: {N1: X, N2: GND}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}
name: Q, type: NPN, ports: {C: VCC, B: GND, E: X}
]
extrainfo:The circuit is a common-base (CB) amplifier stage with source resistance RS. The input voltage is applied at Vin, and the output is taken across RC at Vout. The transistor Q is configured with its base grounded, and the emitter is connected to the source resistance RS and a resistor 1/gm.

Figure 5.67 CB stage with source resistance.
equal to $1 / g_{m}$ (for $V_{A}=\infty$ ), we have

$$
\begin{align*}
v_{X} & =\frac{\frac{1}{g_{m}}}{R_{S}+\frac{1}{g_{m}}} v_{i n}  \tag{5.267}\\
& =\frac{1}{1+g_{m} R_{S}} v_{i n} \tag{5.268}
\end{align*}
$$

We also recall from Eq. (5.254) that the gain from the emitter to the output is given by

$$
\begin{equation*}
\frac{v_{\text {out }}}{v_{X}}=g_{m} R_{C} \tag{5.269}
\end{equation*}
$$

It follows that

$$
\begin{align*}
\frac{v_{\text {out }}}{v_{\text {in }}} & =\frac{g_{m} R_{C}}{1+g_{m} R_{S}}  \tag{5.270}\\
& =\frac{R_{C}}{\frac{1}{g_{m}}+R_{S}} \tag{5.271}
\end{align*}
$$

a result identical to that of the CE stage (except for a negative sign) if $R_{S}$ is viewed as an emitter degeneration resistor.

Example A common-base stage is designed to amplify an RF signal received by a $50-\Omega$ antenna.

5.37

Determine the required bias current if the input impedance of the amplifier must "match" the impedance of the antenna. What is the voltage gain if the CB stage also drives a $50-\Omega$ load? Assume $V_{A}=\infty$.

Solution Figure 5.68 depicts the amplifier ${ }^{12}$ and the equivalent circuit with the antenna modeled by a voltage source, $v_{i n}$, and a resistance, $R_{S}=50 \Omega$. For impedance matching,
image_name:Figure 5.68 (a)
description:
[
name: Vin, type: VoltageSource, ports: {Np: Vin, Nn: GND}
name: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: e1}
name: Q1, type: NPN, ports: {C: Vout, B: VB, E: e1}
name: RC, type: Resistor, ports: {N1: VCC, N2: Vout}
]
extrainfo:The circuit is a common-base (CB) amplifier stage designed to match the input impedance with a 50-Ω antenna. The amplifier drives a 50-Ω load. The bias current is set to match the input impedance with the antenna's impedance.
image_name:Figure 5.68 (b)
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: e1}
name: Q1, type: NPN, ports: {C: Vout, B: VB, E: e1}
name: RC, type: Resistor, value: RC, ports: {N1: Vout, N2: VCC}
]
extrainfo:The circuit is a common base (CB) amplifier stage designed for impedance matching with a 50-Ω antenna. The input impedance of the CB core is set to match the antenna's impedance by adjusting the bias current. The output is taken from the collector of the transistor Q1, driving a 50-Ω load.

Figure 5.68 (a) CB stage sensing a signal received by an antenna, (b) equivalent circuit.

[^4]it is necessary that the input impedance of the CB core, $1 / g_{m}$, be equal to $R_{S}$, and hence
\$\$

$$
\begin{align*}
I_{C} & =g_{m} V_{T}  \tag{5.272}\\
& =0.52 \mathrm{~mA} \tag{5.273}
\end{align*}
$$

\$\$

If $R_{C}$ itself is replaced by a $50-\Omega$ load, then Eq. (5.271) reveals that

$$
\begin{align*}
A_{v} & =\frac{R_{C}}{\frac{1}{g_{m}}+R_{S}}  \tag{5.274}\\
& =\frac{1}{2} \tag{5.275}
\end{align*}
$$

The circuit is therefore not suited to driving a $50-\Omega$ load directly.

What is the voltage gain if a $50-\Omega$ resistor is also tied from the emitter of $Q_{1}$ to ground?

Another interesting point of contrast between the CE and CB stages relates to their current gains. The CB stage displays a current gain of unity because the current flowing into the emitter simply emerges from the collector (if the base current is neglected). On the other hand, as mentioned in Section 5.3.1, $A_{I}=\beta$ for the CE stage. In fact, in the preceding example, $i_{\text {in }}=v_{i n} /\left(R_{S}+1 / g_{m}\right)$, which upon flowing through $R_{C}$, yields $v_{\text {out }}=R_{C} v_{\text {in }} /\left(R_{S}+1 / g_{m}\right)$. It is thus not surprising that the voltage gain does not exceed 0.5 if $R_{C} \leq R_{S}$.

As with the CE stage, we may desire to analyze the CB topology in the general case: with emitter degeneration, $V_{A}<\infty$, and a resistance in series with the base [Fig. 5.69(a)]. Outlined in Problem 5.64, this analysis is somewhat beyond the scope of this book. Nevertheless, it is instructive to consider a special case where $R_{B}=0$ but $V_{A}<\infty$, and we wish to compute the output impedance. As illustrated in Fig. 5.69(b), $R_{\text {out }}$ is equal to $R_{C}$ in parallel with the impedance seen looking into the collector, $R_{\text {out } 1}$. But $R_{\text {out } 1}$ is identical to the output resistance of an emitter-degenerated common emitter stage, i.e., Fig. 5.46, and hence given by Eq. (5.197):

$$
\begin{equation*}
R_{\text {out } 1}=\left[1+g_{m}\left(R_{E} \| r_{\pi}\right)\right] r_{O}+\left(R_{E} \| r_{\pi}\right) \tag{5.276}
\end{equation*}
$$

image_name:Figure 5.69 (a)
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: vout}
name: RO, type: Resistor, value: RO, ports: {N1: vout, N2: e1}
name: RE, type: Resistor, value: RE, ports: {N1: Vin, N2: e1}
name: RB, type: Resistor, value: RB, ports: {N1: b, N2: VB}
name: Q1, type: NPN, ports: {C: vout, B: b, E: e1}
name: C1, type: Capacitor, value: C1, ports: {Np: vout, Nn: GND}
]
extrainfo:Figure 5.69 (a) represents a common base (CB) stage with an NPN transistor Q1. The circuit is used for output impedance analysis. The input is provided at node Vin, and the output is at node vout. The bias voltage VB is connected to the base of Q1. The output impedance is analyzed using resistors RC, RO, and RE, along with the transistor parameters.
image_name:Figure 5.69 (b)
description:
[
name: Q1, type: NPN, ports: {C: C1, B: GND, E: e1}
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: RC, type: Resistor, value: RC, ports: {N1: C1, N2: GND}
name: RE, type: Resistor, value: RE, ports: {N1: Vin, N2: e1}
name: RB, type: Resistor, value: RB, ports: {N1: b1, N2: VB}
name: ro, type: Resistor, value: ro, ports: {N1: C1, N2: e1}
name: C1, type: Capacitor, value: C1, ports: {Np: C1, Nn: C1}
]
extrainfo:The circuit is a common-base amplifier stage with output impedance analysis. It includes a transistor Q1, resistors RC, RE, RB, and ro, and a capacitor C1. The output impedance is measured at Rout1 and Rout2 nodes.

Figure 5.69 (a) General CB stage, (b) output impedance seen at different nodes.
image_name:(a)
description:
[
name: Q1, type: NPN, ports: {C: Vout, B: Vin, E: e1}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}
name: RE, type: Resistor, value: RE, ports: {N1: e1, N2: GND}
name: vin, type: VoltageSource, value: vin, ports: {Np: Vin, Nn: GND}
name: VCC, type: VoltageSource, value: VCC, ports: {Np: VCC, Nn: GND}
]
extrainfo:The circuit is a common-base amplifier stage with output impedance analysis. It includes a transistor Q1, resistors RC, RE, and a voltage source vin. The output impedance is measured at the Vout node.
image_name:(b)
description:
[
name: Q1, type: NPN, ports: {C: Vout, B: Vb, E: e1}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}
name: RE, type: Resistor, value: RE, ports: {N1: e1, N2: GND}
name: vin, type: VoltageSource, value: vin, ports: {Np: Vin, Nn: GND}
name: VCC, type: VoltageSource, value: VCC, ports: {Np: VCC, Nn: GND}
]
extrainfo:The circuit is a common-base amplifier stage with output impedance analysis. The output impedance is measured at the Rout node.

Figure 5.70 (a) CE stage and (b) CB stage simplified for output impedance calculation.

It follows that

$$
\begin{equation*}
R_{\text {out }}=R_{C} \|\left\{\left[1+g_{m}\left(R_{E} \| r_{\pi}\right)\right] r_{O}+\left(R_{E} \| r_{\pi}\right)\right\} \tag{5.277}
\end{equation*}
$$

The reader may have recognized that the output impedance of the CB stage is equal to that of the CE stage. Is this true in general? Recall that the output impedance is determined by setting the input source to zero. In other words, when calculating $R_{\text {out }}$, we have no knowledge of the input terminal of the circuit, as illustrated in Fig. 5.70 for CE and CB stages. It is therefore no coincidence that the output impedances are identical if the same assumptions are made for both circuits (e.g., identical values of $V_{A}$ and emitter degeneration).

Old wisdom says "the output impedance of the CB stage is substantially higher than that of the CE stage." This claim is justified by the tests illustrated in Fig. 5.71. If a constant current is injected into the base while the collector voltage is varied, $I_{C}$ exhibits a slope equal to $r_{O}^{-1}$ [Fig. 5.71(a)]. On the other hand, if a constant current is drawn from the emitter, $I_{C}$ displays much less dependence on the collector voltage. Explain why these tests do not represent practical situations.
image_name:(a)
description:The graph labeled (a) is a plot showing the relationship between the collector current (I_C) and the collector voltage (V_1) in a common-base (CB) transistor configuration. The x-axis represents the collector voltage V_1, while the y-axis represents the collector current I_C.

**Type of Graph and Function:**
- The graph is a linear plot depicting the output characteristics of the transistor in a CB configuration.

**Axes Labels and Units:**
- X-axis: V_1 (Collector Voltage)
- Y-axis: I_C (Collector Current)
- The scale is linear, and no specific units or markers are provided.

**Overall Behavior and Trends:**
- The graph shows a linear increase in collector current (I_C) as the collector voltage (V_1) increases. This indicates that the output impedance is high, as a small change in current results in a significant change in voltage, typical for a CB configuration.

**Key Features and Technical Details:**
- The slope of the line is indicative of the inverse of the output resistance (r_O^{-1}).
- The graph suggests that the collector current is directly proportional to the collector voltage, with a positive slope.

**Annotations and Specific Data Points:**
- There are no specific annotations or numerical values provided on the graph. However, the linear trend is emphasized with a solid line, contrasting with a dashed line representing a lower slope, possibly indicating a comparison to another configuration, such as common-emitter (CE).
image_name:(c)
description:
[
name: rπ, type: Resistor, value: rπ, ports: {N1: Open, N2: GND}
name: gmvπ, type: VoltageControlledCurrentSource, value: gmvπ, ports: {Np: GND, Nn: P}
name: ro, type: Resistor, value: ro, ports: {N1: P, N2: Rout}
]
extrainfo:This is a small-signal model of a transistor with open input and output ports, showing the resistance seen at the collector with the emitter grounded. The circuit includes a resistor rπ, a voltage-controlled current source gmvπ, and a resistor ro.
image_name:(d)
description:
[
name: rπ, type: Resistor, value: rπ, ports: {N1: GND, N2: X}
name: gmvπ, type: VoltageControlledCurrentSource, value: gmvπ, ports: {Np: X, Nn: Y}
name: ro, type: Resistor, value: ro, ports: {N1: Y, N2: Open}
]
extrainfo:The circuit diagram (d) represents a small-signal model with a resistor rπ connected to ground and a voltage-controlled current source gmvπ. The output resistance ro is connected between node Y and an open terminal. This configuration is used to analyze the output impedance of a transistor stage.

Figure 5.71 (a) Resistance seens at collector with emitter grounded, (b) resistance seen at collector with an ideal current source in emitter, (c) small-signal model of (a), (d) smallsignal model of (b).

Solution The principal issue in these tests relates to the use of current sources to drive each stage. From a small-signal point of view, the two circuits reduce to those depicted in Figs. 5.71(c) and (d), with current sources $I_{B}$ and $I_{E}$ replaced with open circuits because they are constant. In Fig. 5.71(c), the current through $r_{\pi}$ is zero, yielding $g_{m} v_{\pi}=0$ and hence $R_{\text {out }}=r_{O}$. On the other hand, Fig. 5.71(d) resembles an emitter-degenerated stage (Fig. 5.46) with an infinite emitter resistance, exhibiting an output resistance of

$$
\begin{align*}
R_{\text {out }} & =\left[1+g_{m}\left(R_{E} \| r_{\pi}\right)\right] r_{O}+\left(R_{E} \| r_{\pi}\right)  \tag{5.278}\\
& =\left(1+g_{m} r_{\pi}\right) r_{O}+r_{\pi}  \tag{5.279}\\
& \approx \beta r_{O}+r_{\pi} \tag{5.280}
\end{align*}
$$

which is, of course, much greater than $r_{O}$. In practice, however, each stage may be driven by a voltage source having a finite impedance, making the above comparison irrelevant.

Exercise Repeat the above example if a resistor of value $R_{1}$ is inserted in series with the emitter.

Another special case of the topology shown in Fig. 5.69(a) occurs if $V_{A}=\infty$ but $R_{B}>0$. Since this case does not reduce to any of the configurations studied earlier, we employ the small-signal model shown in Fig. 5.72 to study its behavior. As usual, we write $g_{m} v_{\pi}=-v_{\text {out }} / R_{C}$ and hence $v_{\pi}=-v_{\text {out }} /\left(g_{m} R_{C}\right)$. The current flowing through $r_{\pi}$ (and $\left.R_{B}\right)$ is then equal to $v_{\pi} / r_{\pi}=-v_{\text {out }} /\left(g_{m} r_{\pi} R_{C}\right)=-v_{\text {out }} /\left(\beta R_{C}\right)$. Multiplying this current by $R_{B}+r_{\pi}$, we obtain the voltage at node $P$ :

$$
\begin{align*}
v_{P} & =-\frac{-v_{\text {out }}}{\beta R_{C}}\left(R_{B}+r_{\pi}\right)  \tag{5.281}\\
& =\frac{v_{\text {out }}}{\beta R_{C}}\left(R_{B}+r_{\pi}\right) . \tag{5.282}
\end{align*}
$$

We also write a KCL at $P$ :

$$
\begin{equation*}
\frac{v_{\pi}}{r_{\pi}}+g_{m} v_{\pi}=\frac{v_{P}-v_{i n}}{R_{E}} \tag{5.283}
\end{equation*}
$$

image_name:Figure 5.72 CB stage with base resistance
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: RB, type: Resistor, value: RB, ports: {N1: GND, N2: X1}
name: rπ, type: Resistor, value: rπ, ports: {N1: X1, N2: P}
name: RE, type: Resistor, value: RE, ports: {N1: Vin, N2: P}
name: RC, type: Resistor, value: RC, ports: {N1: Vout, N2: GND}
name: gmvπ, type: CurrentSource, ports: {Np: X1, Nn: Vout}
]
extrainfo:The circuit is a common base (CB) amplifier stage with base resistance. It includes a voltage source Vin, resistors RB, rπ, RE, and RC, and a current source gmvπ. The input is at Vin, and the output is at Vout.

Figure 5.72 CB stage with base resistance.

Did you know?

The CB gain reduction as a result of an impedance in series with the base has stumbled many a designer. This effect is especially pronounced at high frequencies because the parasitic inductances of the package (which contains the chip) may introduce a significant impedance $(=L \omega)$. As shown below, the "bond wires" connecting the chip to the package behave like inductors, thus degrading the performance. For example, a $5-\mathrm{mm}$ bond wire has an inductance of about 5 nH , exhibiting an impedance of $157 \Omega$ at 5 GHz .
image_name:Effect of bond wire inductance in a CB stage
description:The image illustrates the effect of bond wire inductance in a common-base (CB) stage of an electronic circuit. It consists of two main parts: a physical representation of a chip within a package, and a schematic symbol indicating the bond wire's role as an inductor.

1. **Identification of Components and Structure:**
- **Package and Chip:** The left side of the image shows a rectangular package with multiple protruding leads. Inside this package, a chip is mounted. The chip is depicted separately on the right side, showing its layout and connections.
- **Bond Wires:** Thin lines, labeled as "Bond Wire," connect the chip to the package leads. These wires are highlighted to show their significance in the circuit.

2. **Connections and Interactions:**
- The bond wires create electrical connections between the chip and the external package leads. These wires introduce parasitic inductance, which can affect high-frequency performance.
- The schematic at the bottom of the image shows a bond wire represented as an inductor in series with a transistor. This illustrates how the inductance of the bond wire can impact the overall impedance in the circuit.

3. **Labels, Annotations, and Key Features:**
- The image includes labels such as "Package," "Chip," and "Bond Wire" to clarify the components.
- The schematic symbol at the bottom emphasizes the inductive nature of the bond wires, highlighting their role in altering circuit behavior, particularly at high frequencies.

Overall, the image serves to explain how the physical structure of bond wires in a package can introduce inductance, thereby influencing the performance of a CB stage in high-frequency applications.
image_name:Bond Wire
description:
[
name: Bond Wire, type: Inductor, ports: {N1: Base, N2: Package}
]
extrainfo:The diagram illustrates the effect of bond wire inductance in a common-base (CB) stage. The bond wire behaves like an inductor, which can introduce significant impedance at high frequencies, affecting the circuit performance.

Effect of bond wire inductance in a CB stage.
that is,

$$
\begin{equation*}
\left(\frac{1}{r_{\pi}}+g_{m}\right) \frac{-v_{\text {out }}}{g_{m} R_{C}}=\frac{\frac{v_{\text {out }}}{\beta R_{C}}\left(R_{B}+r_{\pi}\right)-v_{\text {in }}}{R_{E}} \tag{5.284}
\end{equation*}
$$

It follows that

$$
\begin{equation*}
\frac{v_{\text {out }}}{v_{\text {in }}}=\frac{\beta R_{C}}{(\beta+1) R_{E}+R_{B}+r_{\pi}} . \tag{5.285}
\end{equation*}
$$

Dividing the numerator and denominator by $\beta+1$, we have

$$
\begin{equation*}
\frac{v_{\text {out }}}{v_{\text {in }}} \approx \frac{R_{C}}{R_{E}+\frac{R_{B}}{\beta+1}+\frac{1}{g_{m}}} \tag{5.286}
\end{equation*}
$$

As expected, the gain is positive. Furthermore, this expression is identical to that in Eq. (5.185) for the CE stage. Figure 5.73 illustrates the results, revealing that, except for a negative sign, the two stages exhibit equal gains. Note that $R_{B}$ degrades the gain and is not added to the circuit deliberately. As explained later in this section, $R_{B}$ may arise from the biasing network.

Let us now determine the input impedance of the CB stage in the presence of a resistance in series with the base, still assuming $V_{A}=\infty$. From the small-signal equivalent circuit shown in Fig. 5.74, we recognize that
image_name:Figure 5.73
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: VCC, type: VoltageSource, value: VCC, ports: {Np: VCC, Nn: GND}
name: RB, type: Resistor, value: RB, ports: {N1: Vin, N2: b1}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}
name: RE, type: Resistor, value: RE, ports: {N1: e1, N2: GND}
name: Q1, type: NPN, ports: {C: Vout, B: b1, E: e1}
]
extrainfo:The circuit consists of a common emitter (CE) and common base (CB) amplifier stages with a base resistance RB affecting the gain. Both stages show similar gains except for a negative sign. The input impedance of the CB stage is analyzed with a base resistance present. The circuit is powered by VCC and Vin is the input voltage source.
image_name:Figure 5.74
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: RB, type: Resistor, value: RB, ports: {N1: Vin, N2: b1}
name: Q1, type: NPN, ports: {C: Vout, B: b1, E: e1}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}
name: RE, type: Resistor, value: RE, ports: {N1: e1, N2: GND}
name: VCC, type: VoltageSource, value: VCC, ports: {Np: VCC, Nn: GND}
]
extrainfo:The circuit is a common-emitter amplifier with a base resistor RB, collector resistor RC, and emitter resistor RE. The input voltage source Vin is connected to the base of the NPN transistor Q1 through RB. The output is taken from the collector, connected to RC and VCC. The emitter is grounded through RE.

Figure 5.73 Comparison of CE and CB stages with base resistance.
image_name:Figure 5.74
description:
[
name: RB, type: Resistor, value: RB, ports: {N1: GND, N2: X}
name: rπ, type: Resistor, value: rπ, ports: {N1: X, N2: Vx}
name: RC, type: Resistor, value: RC, ports: {N1: Vout, N2: GND}
name: Vx, type: VoltageSource, value: Vx, ports: {Np: Vx, Nn: GND}
name: gmvπ, type: VoltageControlledCurrentSource, ports: {Np: X, Nn: Vout}
]
extrainfo:The circuit is a common-base amplifier with a base resistor RB, a resistor rπ representing the transistor's input resistance, and a collector resistor RC. The input voltage source Vx is connected to the emitter node. The output is taken from the collector, connected to RC and Vout. The voltage-controlled current source gmvπ models the transistor's transconductance.

Figure 5.74 Input impedance of CB stage with base resistance.
$r_{\pi}$ and $R_{B}$ form a voltage divider, thereby producing ${ }^{13}$

$$
\begin{equation*}
v_{\pi}=-\frac{r_{\pi}}{r_{\pi}+R_{B}} v_{X} \tag{5.287}
\end{equation*}
$$

Moreover, KCL at the input node gives

$$
\begin{equation*}
\frac{v_{\pi}}{r_{\pi}}+g_{m} v_{\pi}=-i_{X} \tag{5.288}
\end{equation*}
$$

Thus,

$$
\begin{equation*}
\left(\frac{1}{r_{\pi}}+g_{m}\right) \frac{-r_{\pi}}{r_{\pi}+R_{B}} v_{X}=-i_{X} \tag{5.289}
\end{equation*}
$$

and

$$
\begin{align*}
\frac{v_{X}}{i_{X}} & =\frac{r_{\pi}+R_{B}}{\beta+1}  \tag{5.290}\\
& \approx \frac{1}{g_{m}}+\frac{R_{B}}{\beta+1} . \tag{5.291}
\end{align*}
$$

Note that $R_{i n}=1 / g_{m}$ if $R_{B}=0$, an expected result from the rules illustrated in Fig. 5.7. Interestingly, the base resistance is divided by $\beta+1$ when "seen" from the emitter. This is in contrast to the case of emitter degeneration, where the emitter resistance is multiplied by $\beta+1$ when seen from the base. Figure 5.75 summarizes the two cases. Note that these results remain independent of $R_{C}$ if $V_{A}=\infty$.
image_name:Figure 5.75
description:
[
name: Q1, type: NPN, ports: {C: LOAD, B: b1, E: e1}
name: RB, type: Resistor, value: RB, ports: {N1: b1, N2: GND}
name: RE, type: Resistor, value: RE, ports: {N1: e1, N2: GND}
]
extrainfo:The circuit illustrates two configurations of impedance seen at the emitter and base of a transistor. For the emitter, the impedance is 1/gm + RB/(β+1), and for the base, it is rπ + (β+1)RE. The transistor Q1 is connected with its base to node b1, collector to LOAD, and emitter to node e1. The resistors RB and RE are connected to ground.

Figure 5.75 Impedance seen at the emitter or base of a transistor.

Example 5.39

Determine the impedance seen at the emitter of $Q_{2}$ in Fig. 5.76(a) if the two transistors are identical and $V_{A}=\infty$.
image_name:Figure 5.76 (a)
description:
[
name: Q1, type: NPN, ports: {C: VCC, B: b1, E: e1b2}
name: Q2, type: NPN, ports: {C: Vout, B: e1b2, E: GND}
name: RB, type: Resistor, value: RB, ports: {N1: b1, N2: GND}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}
name: Req, type: Resistor, value: Req, ports: {N1: e1b2, N2: GND}
name: Rx, type: Resistor, value: Rx, ports: {N1: e1b2, N2: GND}
]
extrainfo:The circuit is a common-base amplifier stage with two NPN transistors, Q1 and Q2. Q1's base is connected to node b1, and its emitter is tied to node e1b2, which is shared with Q2's base. The collector of Q2 is connected to the output node Vout. Resistors RB and Req provide biasing and load impedances, respectively.

(a)
image_name:Figure 5.76 (b)
description:
[
name: Q2, type: NPN, ports: {C: VCC, B: b2, E: GND}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}
name: RB, type: Resistor, value: RB, ports: {N1: b2, N2: GND}
name: Rx, type: Resistor, value: Rx, ports: {N1: Vout, N2: GND}
]
extrainfo:The circuit is a simplified common-base amplifier stage using an NPN transistor Q2. The base of Q2 is connected to a bias voltage node b2, and the emitter is grounded. The collector is connected to the VCC supply through the resistor RC, and the output is taken from the collector at Vout. Resistor Rx provides additional load impedance at the output.

(b)

Figure 5.76 (a) Example of CB stage, (b) simplified circuit.

[^5]Solution The circuit employs $Q_{2}$ as a common-base device, but with its base tied to a finite series resistance equal to that seen at the emitter of $Q_{1}$. Thus, we must first obtain the equivalent resistance $R_{e q}$, which from Eq. (5.291) is simply equal to

$$
\begin{equation*}
R_{e q}=\frac{1}{g_{m 1}}+\frac{R_{B}}{\beta+1} . \tag{5.292}
\end{equation*}
$$

Reducing the circuit to that shown in Fig. 5.76(b), we have

$$
\begin{align*}
R_{X} & =\frac{1}{g_{m 2}}+\frac{R_{e q}}{\beta+1}  \tag{5.293}\\
& =\frac{1}{g_{m 2}}+\frac{1}{\beta+1}\left(\frac{1}{g_{m 1}}+\frac{R_{B}}{\beta+1}\right) \tag{5.294}
\end{align*}
$$

Exercise What happens if a resistor of value $R_{1}$ is placed in series with the collector of $Q_{1}$ ?

CB Stage with Biasing Having learned the small-signal properties of the CB core, we now extend our analysis to the circuit including biasing. An example proves instructive at this point.

Example
5.40

The student in Example 5.31 decides to incorporate ac coupling at the input of a CB stage to ensure the bias is not affected by the signal source, drawing the design as shown in Fig. 5.77. Explain why this circuit does not work.
image_name:Figure 5.77 CB stage lacking bias current
description:
[
name: Q1, type: NPN, ports: {C: Vout, B: Vb, E: E1}
name: RC, type: Resistor, value: RC, ports: {N1: Vout, N2: VCC}
name: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: E1}
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: Vb, type: VoltageSource, value: Vb, ports: {Np: Vb, Nn: GND}
]
extrainfo:The circuit is a Common Base (CB) amplifier stage with biasing issues due to lack of DC path for emitter current. This results in zero bias current and transconductance. The emitter is floating, preventing proper operation.

Figure 5.77 CB stage lacking bias current.

Solution Unfortunately, the design provides no dc path for the emitter current of $Q_{1}$, forcing a zero bias current and hence a zero transconductance. The situation is similar to the CE counterpart in Example 5.5, where no base current can be supported.

Exercise In what region does $Q_{1}$ operate if $V_{b}=V_{C C}$ ?

Somewhat embarrassed, the student quickly connects the emitter to ground so that
5.41 $V_{B E}=V_{b}$ and a reasonable collector current can be established (Fig. 5.78). Explain why "haste makes waste."
image_name:Figure 5.78
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: RC, type: Resistor, value: RC, ports: {N1: Vout, N2: VCC}
name: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: e1}
name: Q, type: NPN, ports: {C: Vout, B: Vb, E: e1}
name: Vb, type: VoltageSource, value: Vb, ports: {Np: Vb, Nn: GND}
]
extrainfo:The circuit is a common base (CB) amplifier stage with the emitter shorted to ground. The input signal is applied to the emitter through a coupling capacitor C1. The output is taken from the collector. The bias voltage Vb is applied to the base.

Figure 5.78 CB stage with emitter shorted to ground.
Solution As in Example 5.6, the student has shorted the signal to ac ground. That is, the emitter voltage is equal to zero regardless of the value of $v_{\text {in }}$, yielding $v_{\text {out }}=0$.

Exercise Does the circuit operate better if $V_{b}$ is raised?

The above examples imply that the emitter can remain neither open nor shorted to ground, thereby requiring some bias element. Shown in Fig. 5.79(a) is an example in which $R_{E}$ provides a path for the bias current at the cost of lowering the input impedance. We recognize that $R_{\text {in }}$ now consists of two parallel components: (1) $1 / g_{m}$, seen looking "up" into the emitter (with the base at ac ground) and (2) $R_{E}$, seen looking "down." Thus,

$$
\begin{equation*}
R_{i n}=\frac{1}{g_{m}} \| R_{E} \tag{5.295}
\end{equation*}
$$

As with the input biasing network in the CE stage (Fig. 5.58), the reduction in $R_{\text {in }}$ manifests itself if the source voltage exhibits a finite output resistance. Depicted in Fig. 5.79(b), such a circuit attenuates the signal, lowering the overall voltage gain.
image_name:(a)
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: e1}
name: Q1, type: NPN, ports: {C: Vout, B: Vb, E: e1}
name: RC, type: Resistor, value: RC, ports: {N1: Vout, N2: VCC}
name: RE, type: Resistor, value: RE, ports: {N1: e1, N2: GND}
name: Vb, type: VoltageSource, value: Vb, ports: {Np: Vb, Nn: GND}
]
extrainfo:The circuit is a common-base (CB) amplifier stage with biasing. It includes a voltage source Vin as the input, a capacitor C1 for AC coupling, an NPN transistor Q1 for amplification, and resistors RC and RE for load and emitter degeneration respectively. The Vb voltage source provides the necessary biasing for the transistor's base.

(a)
image_name:(a)
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: Y}
name: C1, type: Capacitor, value: C1, ports: {Np: Y, Nn: X}
name: Rin, type: Resistor, value: Rin, ports: {N1: X, N2: GND}
name: Q1, type: NPN, ports: {C: VCC, B: Vb, E: X}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}
name: RE, type: Resistor, value: RE, ports: {N1: X, N2: GND}
name: Vb, type: VoltageSource, value: Vb, ports: {Np: Vb, Nn: GND}
]
extrainfo:The circuit is a common-base amplifier stage with biasing. It includes a voltage source Vin as the input, a capacitor C1 for AC coupling, an NPN transistor Q1 for amplification, and resistors RC and RE for load and emitter degeneration respectively. The Vb voltage source provides the necessary biasing for the transistor's base.

(b)

Figure 5.79 (a) CB stage with biasing, (b) inclusion of source resistance.

Following the analysis illustrated in Fig. 5.67, we can write

$$
\begin{align*}
\frac{v_{X}}{v_{i n}} & =\frac{R_{\text {in }}}{R_{i n}+R_{S}}  \tag{5.296}\\
& =\frac{\frac{1}{g_{m}} \| R_{E}}{\frac{1}{g_{m}} \| R_{E}+R_{S}}  \tag{5.297}\\
& =\frac{1}{1+\left(1+g_{m} R_{E}\right) R_{S}} \tag{5.298}
\end{align*}
$$

Since $v_{\text {out }} / v_{X}=g_{m} R_{C}$,

$$
\begin{equation*}
\frac{v_{\text {out }}}{v_{\text {in }}}=\frac{1}{1+\left(1+g_{m} R_{E}\right) R_{S}} \cdot g_{m} R_{C} \tag{5.299}
\end{equation*}
$$

As usual, we have preferred solution by inspection over drawing the small-signal equivalent.

The reader may see a contradiction in our thoughts: on the one hand, we view the low input impedance of the CB stage as a useful property; on the other hand, we consider the reduction of the input impedance due to $R_{E}$ undesirable. To resolve this apparent contradiction, we must distinguish between the two components $1 / g_{m}$ and $R_{E}$, noting that the latter shunts the input source current to ground, thus "wasting" the signal. As shown in Fig. 5.80, $i_{\text {in }}$ splits two ways, with only $i_{2}$ reaching $R_{C}$ and contributing to the output signal. If $R_{E}$ decreases while $1 / g_{m}$ remains constant, then $i_{2}$ also falls. ${ }^{14}$ Thus, reduction of $R_{i n}$ due to $R_{E}$ is undesirable. By contrast, if $1 / g_{m}$ decreases while $R_{E}$ remains constant, then $i_{2}$ rises. For $R_{E}$ to affect the input impedance negligibly, we must have

$$
\begin{equation*}
R_{E} \gg \frac{1}{g_{m}} \tag{5.300}
\end{equation*}
$$

image_name:Figure 5.80 Small-signal input current components in a CB stage
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: X1}
name: C1, type: Capacitor, value: C1, ports: {Np: X1, Nn: e1}
name: Q1, type: NPN, ports: {C: Vout, B: Vb, E: e1}
name: RC, type: Resistor, value: RC, ports: {N1: Vout, N2: VCC}
name: RE, type: Resistor, value: RE, ports: {N1: e1, N2: GND}
name: Vb, type: VoltageSource, value: Vb, ports: {Np: Vb, Nn: GND}
]
extrainfo:The circuit represents a common-base (CB) amplifier stage. The input signal is applied at the emitter through a capacitor C1, and the output is taken from the collector. The base is biased with a voltage source Vb. The circuit shows the input current components i1 and i2, where i2 contributes to the output signal.

Figure 5.80 Small-signal input current components in a CB stage.
and hence

$$
\begin{equation*}
I_{C} R_{E} \gg V_{T} \tag{5.301}
\end{equation*}
$$

That is, the dc voltage drop across $R_{E}$ muts be much greater than $V_{T}$.

[^6]How is the base voltage, $V_{b}$, generated? We can employ a resistive divider similar to that used in the CE stage. Shown in Fig. 5.81(a), such a topology must ensure $I_{1} \gg I_{B}$ to minimize sensitivity to $\beta$, yielding

$$
\begin{equation*}
V_{b} \approx \frac{R_{2}}{R_{1}+R_{2}} V_{C C} \tag{5.302}
\end{equation*}
$$

However, recall from Eq. (5.286) that a resistance in series with the base reduces the voltage gain of the CB stage. Substituting a Thevenin equivalent for $R_{1}$ and $R_{2}$ as depicted in Fig. 5.81(b), we recognize that a resistance of $R_{\text {Thev }}=R_{1} \| R_{2}$ now appears in series with the base. For this reason, a "bypass capacitor" is often tied from the base to ground, acting as a short circuit at frequencies of interest [Fig. 5.81(c)].
image_name:(a)
description:
[
name: Q1, type: NPN, ports: {C: c1, B: Vb, E: e1}
name: RC, type: Resistor, value: RC, ports: {N1: c1, N2: VCC}
name: RE, type: Resistor, value: RE, ports: {N1: e1, N2: GND}
name: R1, type: Resistor, value: R1, ports: {N1: VCC, N2: Vb}
name: R2, type: Resistor, value: R2, ports: {N1: Vb, N2: GND}
name: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: e1}
name: I1, type: CurrentSource, value: I1, ports: {Np: VCC, Nn: Vb}
]
extrainfo:This is a common-base (CB) amplifier stage with a base bias network. The circuit uses a Thevenin equivalent for the biasing resistors R1 and R2, and a bypass capacitor C1 is used to ground the emitter at AC frequencies. The current source I1 represents the bias current for the transistor Q1.
image_name:(b)
description:
[
name: Q1, type: NPN, ports: {C: c1, B: Vb, E: e1}
name: RC, type: Resistor, value: RC, ports: {N1: c1, N2: VCC}
name: RE, type: Resistor, value: RE, ports: {N1: e1, N2: GND}
name: R1, type: Resistor, value: R1, ports: {N1: VCC, N2: Vb}
name: R2, type: Resistor, value: R2, ports: {N1: Vb, N2: GND}
name: C1, type: Capacitor, value: C1, ports: {Np: Input, Nn: e1}
name: VCC, type: VoltageSource, value: VCC, ports: {Np: VCC, Nn: GND}
name: I1, type: CurrentSource, value: I1, ports: {Np: VCC, Nn: Vb}
]
extrainfo:This is a common-base (CB) amplifier stage with a bias network formed by R1 and R2. The circuit uses a bypass capacitor C1 to stabilize the emitter voltage.
image_name:(c)
description:
[
name: Q1, type: NPN, ports: {C: c1, B: Vb, E: e1}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: c1}
name: RE, type: Resistor, value: RE, ports: {N1: e1, N2: GND}
name: R1, type: Resistor, value: R1, ports: {N1: VCC, N2: Vb}
name: R2, type: Resistor, value: R2, ports: {N1: Vb, N2: GND}
name: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: e1}
name: VCC, type: VoltageSource, value: VCC, ports: {Np: VCC, Nn: GND}
name: I1, type: CurrentSource, value: I1, ports: {Np: Vb, Nn: GND}
]
extrainfo:The circuit is a common-base (CB) amplifier stage with a bypass capacitor C1 at the input. The NPN transistor Q1 is biased using resistors R1 and R2, and the collector is connected to the power supply VCC through resistor RC. The emitter is connected to ground through resistor RE. A current source I1 provides the base current IB.

(a)
image_name:(b)
description:
[
name: Q1, type: NPN, ports: {C: C1, B: b1, E: e1}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: C1}
name: RE, type: Resistor, value: RE, ports: {N1: e1, N2: GND}
name: RThev, type: Resistor, value: RThev, ports: {N1: b1, N2: VThev}
name: C1, type: Capacitor, value: C1, ports: {Np: C1, Nn: b1}
name: VThev, type: VoltageSource, value: VThev, ports: {Np: VThev, Nn: GND}
]
extrainfo:The circuit is a common-base amplifier stage with an NPN transistor Q1. It includes a bypass capacitor C1 at the input. The transistor is biased using a Thevenin equivalent voltage source VThev and resistor RThev. The collector is connected to VCC through resistor RC, and the emitter is grounded through resistor RE.

(b)
image_name:Figure 5.81 (a)
description:
[
name: RC, type: Resistor, value: RC, ports: {N1: c1, N2: VCC}
name: R1, type: Resistor, value: R1, ports: {N1: VCC, N2: b1}
name: RE, type: Resistor, value: RE, ports: {N1: e1, N2: GND}
name: R2, type: Resistor, value: R2, ports: {N1: b1, N2: GND}
name: CB, type: Capacitor, value: CB, ports: {Np: b1, Nn: GND}
name: Q1, type: NPN, ports: {C: c1, B: b1, E: e1}
]
extrainfo:The circuit is a common-base amplifier stage with an NPN transistor Q1. It includes a bypass capacitor CB at the input. The transistor is biased using a resistor network R1 and R2. The collector is connected to VCC through resistor RC, and the emitter is grounded through resistor RE. The bypass capacitor CB is connected from the base to ground.

(c)

Figure 5.81 (a) CB stage with base bias network, (b) use of Thevenin equivalent, (c) effect of bypass capacitor.

Example
5.42

Design a CB stage (Fig. 5.82) for a voltage gain of 10 and an input impedance of $50 \Omega$. Assume $I_{S}=5 \times 10^{-16} \mathrm{~A}, V_{A}=\infty, \beta=100$, and $V_{C C}=2.5 \mathrm{~V}$.
image_name:Figure 5.82
description:
[
name: Q1, type: NPN, ports: {C: Vout, B: Vb, E: GND}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}
name: R1, type: Resistor, value: R1, ports: {N1: VCC, N2: Vb}
name: R2, type: Resistor, value: R2, ports: {N1: Vb, N2: GND}
name: RE, type: Resistor, value: RE, ports: {N1: Vout, N2: GND}
name: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: Vout}
name: CB, type: Capacitor, value: CB, ports: {Np: Vb, Nn: GND}
name: VCC, type: VoltageSource, value: VCC, ports: {Np: VCC, Nn: GND}
name: Vb, type: VoltageSource, value: Vb, ports: {Np: Vb, Nn: GND}
]
extrainfo:This is a common base (CB) amplifier stage with base biasing. The circuit is designed for a voltage gain of 10 and an input impedance of 50 Ω. The bypass capacitor CB is used to stabilize the base voltage, and the emitter resistor RE is bypassed to ground. The circuit operates with a supply voltage VCC of 2.5 V.

Figure 5.82 Example of CB stage with biasing.
Solution We begin by selecting $R_{E} \gg 1 / g_{m}$, e.g., $R_{E}=500 \Omega$, to minimize the undesirable effect of $R_{E}$. Thus,

$$
\begin{equation*}
R_{i n} \approx \frac{1}{g_{m}}=50 \Omega \tag{5.303}
\end{equation*}
$$

and hence

$$
\begin{equation*}
I_{C}=0.52 \mathrm{~mA} \tag{5.304}
\end{equation*}
$$

If the base is bypassed to ground

$$
\begin{equation*}
A_{v}=g_{m} R_{C} \tag{5.305}
\end{equation*}
$$

yielding

$$
\begin{equation*}
R_{C}=500 \Omega \tag{5.306}
\end{equation*}
$$

We now determine the base bias resistors. Since the voltage drop across $R_{E}$ is equal to $500 \Omega \times 0.52 \mathrm{~mA}=260 \mathrm{mV}$ and $V_{B E}=V_{T} \ln \left(I_{C} / I_{S}\right)=899 \mathrm{mV}$, we have

$$
\begin{align*}
V_{b} & =I_{E} R_{E}+V_{B E}  \tag{5.307}\\
& =1.16 \mathrm{~V} \tag{5.308}
\end{align*}
$$

Selecting the current through $R_{1}$ and $R_{2}$ to be $10 I_{B}=52 \mu \mathrm{~A}$, we write

$$
\begin{align*}
V_{b} & \approx \frac{R_{2}}{R_{1}+R_{2}} V_{C C} .  \tag{5.309}\\
\frac{V_{C C}}{R_{1}+R_{2}} & =52 \mu \mathrm{~A} \tag{5.310}
\end{align*}
$$

It follows that

$$
\begin{align*}
& R_{1}=25.8 \mathrm{k} \Omega  \tag{5.311}\\
& R_{2}=22.3 \mathrm{k} \Omega \tag{5.312}
\end{align*}
$$

The last step in the design is to compute the required values of $C_{1}$ and $C_{B}$ according to the signal frequency. For example, if the amplifier is used at the receiver front end of a 900MHz cellphone, the impedances of $C_{1}$ and $C_{B}$ must be sufficiently small at this frequency. Appearing in series with the emitter of $Q_{1}, C_{1}$ plays a role similar to $R_{S}$ in Fig. 5.67 and Eq. (5.271). Thus, its impedance, $\left|C_{1} \omega\right|^{-1}$, must remain much less than $1 / g_{m}=50 \Omega$. In high-performance applications such as cellphones, we may choose $\left|C_{1} \omega\right|^{-1}=\left(1 / g_{m}\right) / 20$ to ensure negligible gain degradation. Consequently, for $\omega=2 \pi \times(900 \mathrm{MHz})$ :

$$
\begin{align*}
C_{1} & =\frac{20 g_{m}}{\omega}  \tag{5.313}\\
& =71 \mathrm{pF} \tag{5.314}
\end{align*}
$$

Since the impedance of $C_{B}$ appears in series with the base and plays a role similar to the term $R_{B} /(\beta+1)$ in Eq. (5.286), we require that

$$
\begin{equation*}
\frac{1}{\beta+1}\left|\frac{1}{C_{B} \omega}\right|=\frac{1}{20} \frac{1}{g_{m}} \tag{5.315}
\end{equation*}
$$

and hence

$$
\begin{equation*}
C_{B}=0.7 \mathrm{pF} \tag{5.316}
\end{equation*}
$$

(A common mistake is to make the impedance of $C_{B}$ negligible with respect to $R_{1} \| R_{2}$ rather than with respect to $1 / g_{m}$.)

Exercise Design the above circuit for an input impedance of $100 \Omega$.

### 5.3.3 Emitter Follower

Another important circuit topology is the emitter follower (also called the "commoncollector" stage). The reader is encouraged to review Examples 5.2-5.3, rules illustrated in Fig. 5.7, and the possible topologies in Fig. 5.28 before proceeding further. For the sake of brevity, we may also use the term "follower" to refer to emitter followers in this chapter.

Shown in Fig. 5.83, the emitter follower senses the input at the base of the transistor and produces the output at the emitter. The collector is tied to $V_{C C}$ and hence ac ground. We first study the core and subsequently add the biasing elements.
image_name:Figure 5.83 Emitter follower
description:
[
name: Q1, type: NPN, ports: {C: VCC, B: Vin, E: Vout}
name: RE, type: Resistor, value: RE, ports: {N1: Vout, N2: GND}
]
extrainfo:The circuit is an emitter follower configuration with input applied to the base of Q1 and output sensed at the emitter. The collector is connected to VCC, and the emitter is connected to ground through the resistor RE.

Figure 5.83 Emitter follower.

Emitter Follower Core How does the follower in Fig. 5.84(a) respond to a change in $V_{i n}$ ? If $V_{i n}$ rises by a small amount $\Delta V_{i n}$, the base-emitter voltage of $Q_{1}$ tends to increase, raising the collector and emitter currents. The higher emitter current translates to a greater drop across $R_{E}$ and hence a higher $V_{\text {out }}$. From another perspective, if we assume, for example, $V_{\text {out }}$ is constant, then $V_{B E}$ must rise and so must $I_{E}$, requiring that $V_{\text {out }}$ go up. Since $V_{\text {out }}$ changes in the same direction as $V_{i n}$, we expect the voltage gain to be positive. Note that $V_{\text {out }}$ is always lower than $V_{\text {in }}$ by an amount equal to $V_{B E}$, and the circuit is said to provide "level shift."
image_name:(a)
description:
[
name: Q1, type: NPN, ports: {C: VCC, B: Vin, E: Vout}
name: RE, type: Resistor, value: RE, ports: {N1: Vout, N2: GND}
]
extrainfo:The circuit is an emitter follower configuration using NPN transistor Q1 with resistor RE. It provides a voltage level shift between Vin and Vout. Vout is always slightly lower than Vin by VBE of Q1.

(a)
image_name:(b)
description:The graph in Figure 5.84(b) is a schematic representation illustrating the relationship between input voltage ($V_{in}$) and output voltage ($V_{out}$) in an emitter follower circuit.

1. **Type of Graph and Function:**
- The diagram is a conceptual representation rather than a typical graph with axes. It visually explains how changes in input voltage affect the output voltage in an emitter follower.

2. **Axes Labels and Units:**
- There are no traditional axes with labels or units. Instead, the diagram uses annotated voltage levels to convey information.

3. **Overall Behavior and Trends:**
- The diagram shows that when the input voltage increases from $V_{in1}$ to $V_{in1} + \Delta V_{in}$, the output voltage increases from $V_{out1}$ to $V_{out1} + \Delta V_{out}$. However, the change in output voltage ($\Delta V_{out}$) is always less than the change in input voltage ($\Delta V_{in}$) due to the voltage drop across the base-emitter junction ($V_{BE}$).

4. **Key Features and Technical Details:**
- The diagram highlights two key voltage levels: $V_{BE1}$ and $V_{BE2}$. These represent the base-emitter voltage drops at the initial and final states, respectively.
- The vertical arrows indicate the voltage differences, emphasizing the level shift characteristic of the emitter follower configuration, where $V_{out}$ is slightly less than $V_{in}$ by approximately $V_{BE}$.

5. **Annotations and Specific Data Points:**
- Annotations include $V_{in1}$, $V_{in1} + \Delta V_{in}$, $V_{out1}$, $V_{out1} + \Delta V_{out}$, $V_{BE1}$, and $V_{BE2$, clearly marking the initial and changed states of the voltages involved.

Overall, this diagram effectively communicates the concept of voltage level shifting in an emitter follower circuit, emphasizing the non-linear relationship between input and output voltage changes due to the inherent properties of the transistor.

(b)

Figure 5.84 (a) Emitter follower sensing an input change, (b) response of the circuit.

Another interesting and important observation here is that the change in $V_{\text {out }}$ cannot be larger than the change in $V_{\text {in }}$. Suppose $V_{\text {in }}$ increases from $V_{\text {in } 1}$ to $V_{\text {in } 1}+\Delta V_{\text {in }}$ and $V_{\text {out }}$ from $V_{\text {out } 1}$ to $V_{\text {out } 1}+\Delta V_{\text {out }}$ [Fig. 5.84(b)]. If the output changes by a greater amount than the input, $\Delta V_{\text {out }}>\Delta V_{\text {in }}$, then $V_{B E 2}$ must be less than $V_{B E 1}$. But this means the emitter current also decreases and so does $I_{E} R_{E}=V_{\text {out }}$, contradicting the assumption that $V_{\text {out }}$ has increased. Thus, $\Delta V_{\text {out }}<\Delta V_{\text {in }}$, implying that the follower exhibits a voltage gain less than unity. ${ }^{15}$

[^7]image_name:Figure 5.85
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: rπ, type: Resistor, value: rπ, ports: {N1: Vin, N2: Vout}
name: vπ, type: VoltageSource, value: vπ, ports: {Np: Vout, Nn: GND}
name: gmvπ, type: CurrentSource, value: gmvπ, ports: {Np: GND, Nn: Vout}
name: RE, type: Resistor, value: RE, ports: {N1: Vout, N2: GND}
]
extrainfo:The circuit diagram represents a small-signal model of an emitter follower. It includes a voltage source Vin, a resistor rπ, a voltage source vπ, a current source gmvπ, and a resistor RE. The input is Vin and the output is Vout, with the emitter resistor RE connected to ground.

Figure 5.85 Small-signal model of emitter follower.

The reader may wonder if an amplifier with a subunity gain has any practical value. As explained later, the input and output impedances of the emitter follower make it a particularly useful circuit for some applications.

Let us now derive the small-signal properties of the follower, first assuming $V_{A}=\infty$. Shown in Fig. 5.85, the equivalent circuit yields

$$
\begin{equation*}
\frac{v_{\pi}}{r_{\pi}}+g_{m} v_{\pi}=\frac{v_{\text {out }}}{R_{E}} \tag{5.317}
\end{equation*}
$$

and hence

$$
\begin{equation*}
v_{\pi}=\frac{r_{\pi}}{\beta+1} \cdot \frac{v_{\text {out }}}{R_{E}} \tag{5.318}
\end{equation*}
$$

We also have

$$
\begin{equation*}
v_{\text {in }}=v_{\pi}+v_{\text {out }} \tag{5.319}
\end{equation*}
$$

Substituting for $v_{\pi}$ from (5.318), we obtain

$$
\begin{align*}
\frac{v_{\text {out }}}{v_{\text {in }}} & =\frac{1}{1+\frac{r_{\pi}}{\beta+1} \cdot \frac{1}{R_{E}}}  \tag{5.320}\\
& \approx \frac{R_{E}}{R_{E}+\frac{1}{g_{m}}} \tag{5.321}
\end{align*}
$$

The voltage gain is therefore positive and less than unity.

In integrated circuits, the follower is typically realized as shown in Fig. 5.86. Determine 5.43 the voltage gain if the current source is ideal and $V_{A}=\infty$.
image_name:Figure 5.86
description:
[
name: Q1, type: NPN, ports: {C: VCC, B: Vin, E: Vout}
name: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}
]
extrainfo:The circuit is a voltage follower using an NPN transistor Q1 and an ideal current source I1. The input voltage is applied to the base of Q1, and the output is taken from the emitter, resulting in a voltage gain of approximately 1.

Figure 5.86 Follower with current source.

Solution Since the emitter resistor is replaced with an ideal current source, the value of $R_{E}$ in Eq. (5.321) must tend to infinity, yielding

$$
\begin{equation*}
A_{v}=1 \tag{5.322}
\end{equation*}
$$

This result can also be derived intuitively. A constant current source flowing through $Q_{1}$ requires that $V_{B E}=V_{T} \ln \left(I_{C} / I_{S}\right)$ remain constant. Writing $V_{\text {out }}=V_{\text {in }}-V_{B E}$, we recognize that $V_{\text {out }}$ exactly follows $V_{\text {in }}$ if $V_{B E}$ is constant.

Exercise Repeat the above example if a resistor of value $R_{1}$ is placed in series with the collector.

Equation (5.321) suggests that the emitter follower acts as a voltage divider, a perspective that can be reinforced by an alternative analysis. Suppose, as shown in Fig. 5.87(a), we wish to model $v_{\text {in }}$ and $Q_{1}$ by a Thevenin equivalent. The Thevenin voltage is given by the open-circuit output voltage produced by $Q_{1}$ [Fig. 5.87(b)], as if $Q_{1}$ operates with $R_{E}=\infty$ (Example 5.43). Thus, $v_{T h e v}=v_{i n}$. The Thevenin resistance is obtained by setting the input to zero [Fig. 5.87(c)] and is equal to $1 / g_{m}$. The circuit of Fig. 5.87(a) therefore reduces to that shown in Fig. 5.87(d), confirming operation as a voltage divider.
image_name:(a)
description:
[
name: Vin, type: VoltageSource, ports: {Np: Vin, Nn: GND}
name: Q1, type: NPN, ports: {C: VCC, B: Vin, E: Vout}
name: RE, type: Resistor, value: RE, ports: {N1: Vout, N2: GND}
]
extrainfo:The circuit is an emitter follower stage with a Thevenin equivalent model. The Thevenin voltage is equal to Vin, and the Thevenin resistance is 1/gm. The circuit operates as a voltage divider.
image_name:(b)
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: Q1, type: NPN, ports: {C: VCC, B: Vin, E: Vout}
name: RThev, type: Resistor, value: RThev, ports: {N1: Vin, N2: Vout}
]
extrainfo:The circuit in Fig. 5.87(b) is a Thevenin equivalent model of the emitter follower stage, showing that the open-circuit voltage at the output is equal to the input voltage Vin. The Thevenin resistance is represented by RThev, which is equal to 1/gm. This confirms the operation as a voltage divider.
image_name:(c)
description:
[
name: Q1, type: NPN, ports: {C: VCC, B: GND, E: e1}
name: RThev, type: Resistor, value: RThev, ports: {N1: e1, N2: GND}
]
extrainfo:The circuit is a Thevenin equivalent model of an emitter follower stage. The Thevenin resistance is modeled as RThev connected between the emitter of Q1 and ground.
image_name:(d)
description:
[
name: vin, type: VoltageSource, value: vin, ports: {Np: Vin, Nn: GND}
name: RThev, type: Resistor, value: RThev, ports: {N1: Vin, N2: Vout}
name: RE, type: Resistor, value: RE, ports: {N1: Vout, N2: GND}
]
extrainfo:The circuit is a Thevenin equivalent model of an emitter follower stage, reducing to a voltage divider with Thevenin resistance RThev = 1/gm and Thevenin voltage VThev = Vin.

Figure 5.87 (a) Emitter follower stage, (b) Thevenin voltage, (c) Thevenin resistance, (d) simplified circuit.

Example 5.44

Determine the voltage gain of a follower driven by a finite source impedance of $R_{S}$ [Fig. 5.88(a)] if $V_{A}=\infty$.

Solution We model $v_{i n}, R_{S}$, and $Q_{1}$ by a Thevenin equivalent. The reader can show that the opencircuit voltage is equal to $v_{i n}$. Furthermore, the Thevenin resistance [Fig. 5.88(b)] is given by Eq. (5.291) as $R_{S} /(\beta+1)+1 / g_{m}$. Figure 5.88(c) depicts the equivalent circuit, revealing that

$$
\begin{equation*}
\frac{v_{\text {out }}}{v_{\text {in }}}=\frac{R_{E}}{R_{E}+\frac{R_{S}}{\beta+1}+\frac{1}{g_{m}}} \tag{5.323}
\end{equation*}
$$

image_name:(a)
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: B}
name: Q1, type: NPN, ports: {C: VCC, B: B, E: Vout}
name: RE, type: Resistor, value: RE, ports: {N1: Vout, N2: GND}
]
extrainfo:The circuit is a voltage follower with a source impedance, using an NPN transistor Q1. The input voltage Vin is applied across RS, and the output voltage Vout is taken across RE. VCC is the supply voltage.
image_name:(b)
description:
[
name: RS, type: Resistor, value: RS, ports: {N1: GND, N2: b1}
name: Q1, type: NPN, ports: {C: VCC, B: b1, E: e1}
name: RThev, type: Resistor, value: RThev, ports: {N1: e1, N2: GND}
]
extrainfo:The circuit diagram (b) represents the Thevenin equivalent model of a transistor circuit. It includes a resistor RS connected to the base of an NPN transistor Q1, whose collector is connected to VCC and emitter is connected to a Thevenin resistor RThev. The emitter is also connected to ground.
image_name:(c)
description:
[
name: VThev, type: VoltageSource, value: Vin, ports: {Np: VThev, Nn: GND}
name: RThev, type: Resistor, value: RThev, ports: {N1: VThev, N2: Vout}
name: RE, type: Resistor, value: RE, ports: {N1: Vout, N2: GND}
]
extrainfo:This is a simplified Thevenin equivalent circuit showing the voltage source VThev with value Vin and Thevenin resistance RThev connected to the output node Vout. The resistor RE is connected between Vout and ground.

Figure 5.88 (a) Follower with source impedance, (b) Thevenin resistance seen at emitter, (c) simplified circuit.

This result can also be obtained by solving the small-signal equivalent circuit of the follower.

Exercise What happens if $R_{E}=\infty$ ?

Did you know?

Shortly after the invention of the bipolar transistor, a Bell Labs engineer named Sidney Darlington borrowed a few transistors from his boss and took them home for the weekend. It was over that weekend that he came up with what is known as the "Darlington Pair" [Fig. (a)]. Here, $Q_{1}$ and $Q_{2}$ can be viewed as two emitter followers in a cascade. The circuit provides a high input impedance but since $I_{C 1}$ is small $\left(=I_{B 2}\right), Q_{1}$ is quite slow. For this reason, the modified topologies in Figs. (b) and (c) are preferred.
image_name:(a)
description:
[
name: Q1, type: NPN, ports: {C: VCC, B: Vin, E: e1b2}
name: Q2, type: NPN, ports: {C: VCC, B: e1b2, E: Vout}
name: RE, type: Resistor, value: RE, ports: {N1: Vout, N2: GND}
]
extrainfo:The circuit is a Darlington pair configuration providing high input impedance. The emitters of Q1 and Q2 are connected in a cascade, improving current gain.

(a)
image_name:(a)
description:
[
name: Q1, type: NPN, ports: {C: VCC, B: Vin, E: e1b2}
name: Q2, type: NPN, ports: {C: VCC, B: e1b2, E: Vout}
name: RE, type: Resistor, value: RE, ports: {N1: Vout, N2: GND}
]
extrainfo:The circuit is a Darlington pair configuration providing high input impedance. The emitters of Q1 and Q2 are connected in a cascade, improving current gain.

(c)

Darlington pairs.

In order to appreciate the usefulness of emitter followers, let us compute their input and output impedances. In the equivalent circuit of Fig. 5.89(a), we have $i_{X} r_{\pi}=v_{\pi}$. Also, the current $i_{X}$ and $g_{m} v_{\pi}$ flow through $R_{E}$, producing a voltage drop equal to $\left(i_{X}+g_{m} v_{\pi}\right) R_{E}$. Adding the voltages across $r_{\pi}$ and $R_{E}$ and equating the result to $v_{X}$, we have

$$
\begin{align*}
v_{X} & =v_{\pi}+\left(i_{X}+g_{m} v_{\pi}\right) R_{E}  \tag{5.324}\\
& =i_{X} r_{\pi}+\left(i_{X}+g_{m} i_{X} r_{\pi}\right) R_{E}, \tag{5.325}
\end{align*}
$$

and hence

$$
\begin{equation*}
\frac{v_{X}}{i_{X}}=r_{\pi}+(1+\beta) R_{E} \tag{5.326}
\end{equation*}
$$

This expression is identical to that in Eq. (5.162) derived for a degenerated CE stage. This is, of course, no coincidence. Since the input impedance of the CE topology is independent of the collector resistor (for $V_{A}=\infty$ ), its value remains unchanged if $R_{C}=0$, which is the case for an emitter follower [Fig. 5.89(b)].

The key observation here is that the follower "transforms" the load resistor, $R_{E}$, to a much larger value, thereby serving as an efficient "buffer." This concept can be illustrated by an example.
image_name:(a)
description:
[
name: Vx, type: VoltageSource, value: Vx, ports: {Np: Vx, Nn: GND}
name: rπ, type: Resistor, value: rπ, ports: {N1: Vx, N2: X}
name: gmvπ, type: CurrentSource, value: gmvπ, ports: {Np: X, Nn: GND}
name: RE, type: Resistor, value: RE, ports: {N1: X, N2: GND}
]
extrainfo:The circuit represents the input impedance of an emitter follower. The voltage source Vx is connected to the resistor rπ, which is connected to node X. A current source gmvπ is connected from node X to ground. The resistor RE is also connected between node X and ground. This setup is typical for analyzing the input impedance of an emitter follower.
image_name:(b)
description:
[
name: Vx, type: VoltageSource, value: Vx, ports: {Np: Vx, Nn: GND}
name: rπ, type: Resistor, value: rπ, ports: {N1: Vx, N2: X}
name: gmvπ, type: CurrentSource, value: gmvπ, ports: {Np: X, Nn: GND}
name: RE, type: Resistor, value: RE, ports: {N1: X, N2: GND}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: C1}
name: C1, type: Capacitor, value: C1, ports: {Np: C1, Nn: Q1_C}
name: Q1, type: NPN, ports: {C: Q1_C, B: LOAD, E: e1}
name: Rin, type: Resistor, value: Rin, ports: {N1: LOAD, N2: e1}
]
extrainfo:The circuit diagram (b) represents an emitter follower configuration. It includes an NPN transistor Q1, with its collector connected to VCC through a capacitor C1 and a resistor RC (which is zero). The emitter is connected to ground via a resistor RE. The input is applied to the base through a resistor Rin, and the output is taken from the emitter. This configuration is used to provide a high input impedance and low output impedance, effectively buffering the load.

Figure 5.89 (a) Input impedance of emitter follower, (b) equivalence of CE and follower stages.

Example
5.45

A CE stage exhibits a voltage gain of 20 and an output resistance of $1 \mathrm{k} \Omega$. Determine the voltage gain of the CE amplifier if
(a) The stage drives an $8-\Omega$ speaker directly.
(b) An emitter follower biased at a current of 5 mA is interposed between the CE stage and the speaker. Assume $\beta=100, V_{A}=\infty$, and the follower is biased with an ideal current source.

Solution (a) As depicted in Fig. 5.90(a), the equivalent resistance seen at the collector is now given by the parallel combination of $R_{C}$ and the speaker impedance, $R_{s p}$, reducing the gain from 20 to $20 \times\left(R_{C} \| 8 \Omega\right) / R_{C}=0.159$. The voltage gain therefore degrades drastically.
image_name:(a)
description:
[
name: Vin, type: VoltageSource, ports: {Np: Vin, Nn: GND}
name: RC, type: Resistor, value: 1kΩ, ports: {N1: VCC, N2: C1}
name: Q1, type: NPN, ports: {C: C1, B: Vin, E: GND}
name: Rsp, type: Other, ports: {N1: C1, N2: GND}
]
extrainfo:The circuit is a common-emitter amplifier stage with a speaker load. The voltage gain is reduced due to the parallel combination of RC and the speaker impedance Rsp.
image_name:(b)
description:
[
name: Vin, type: VoltageSource, ports: {Np: Vin, Nn: GND}
name: RC, type: Resistor, value: 1 kΩ, ports: {N1: VCC, N2: C1B2}
name: Q1, type: NPN, ports: {C: C1B2, B: Vin, E: GND}
name: Rin1, type: Resistor, value: Rin1, ports: {N1: C1B2, N2: B2}
name: Q2, type: NPN, ports: {C: VCC, B: B2, E: E2}
name: I1, type: CurrentSource, ports: {Np: E2, Nn: GND}
name: C1, type: Capacitor, value: C1, ports: {Np: E2, Nn: X}
name: Rsp, type: Other, ports: {N1: X, N2: GND}
]
extrainfo:The circuit is a two-stage amplifier driving a speaker. The first stage is a common-emitter amplifier followed by an emitter follower biased with an ideal current source. The emitter follower drives the speaker, reducing the loading effect on the first stage and improving the voltage gain.

Figure 5.90 (a) CE stage and (b) two-stage circuit driving a speaker.
(b) From the arrangement in Fig. 5.90(b), we note that

$$
\begin{align*}
R_{i n 1} & =r_{\pi 2}+(\beta+1) R_{s p}  \tag{5.327}\\
& =1328 \Omega \tag{5.328}
\end{align*}
$$

Thus, the voltage gain of the CE stage drops from 20 to $20 \times\left(R_{C} \| R_{i n 1}\right) /$ $R_{C}=11.4$, a substantial improvement over case (a).

Exercise Repeat the above example if the emitter follower is biased at a current of 10 mA .
image_name:Figure 5.90 (a)
description:
[
name: Rs, type: Resistor, value: Rs, ports: {N1: GND, N2: b1}
name: Q1, type: NPN, ports: {C: VCC, B: b1, E: e1}
name: RE, type: Resistor, value: RE, ports: {N1: e1, N2: GND}
]
extrainfo:The circuit is a common-emitter (CE) stage amplifier with an NPN transistor Q1. The input is connected to the base, and the output is taken from the emitter through RE. VCC is the supply voltage.

(a)
image_name:Figure 5.90 (a)
description:
[
name: RS, type: Resistor, value: RS, ports: {N1: GND, N2: b1}
name: Q1, type: NPN, ports: {C: VCC, B: b1, E: e1}
name: RE, type: Resistor, value: RE, ports: {N1: e1, N2: GND}
]
extrainfo:The circuit is a common-emitter (CE) stage amplifier with an NPN transistor Q1. The input is connected to the base, and the output is taken from the emitter through RE. VCC is the supply voltage.

(b)

Figure 5.91 (a) Output impedance of a follower, (b) components of output resistance.

We now calculate the output impedance of the follower, assuming the circuit is driven by a source impedance $R_{S}$ [Fig. 5.91(a)]. Interestingly, we need not resort to a small-signal model here as $R_{\text {out }}$ can be obtained by inspection. As illustrated in Fig. 5.91(b), the output resistance can be viewed as the parallel combination of two components: one seen looking "up" into the emitter and another looking "down" into $R_{E}$. From Fig. 5.88, the former is equal to $R_{S} /(\beta+1)+1 / g_{m}$, and hence

$$
\begin{equation*}
R_{\text {out }}=\left(\frac{R_{S}}{\beta+1}+\frac{1}{g_{m}}\right) \| R_{E} \tag{5.329}
\end{equation*}
$$

This result can also be derived from the Thevenin equivalent shown in Fig. 5.88(c) by setting $v_{\text {in }}$ to zero.

Equation (5.329) reveals another important attribute of the follower: the circuit transforms the source impedance, $R_{S}$, to a much lower value, thereby providing higher "driving" capability. We say the follower operates as a good "voltage buffer" because it displays a high input impedance (like a voltmeter) and a low output impedance (like a voltage source).

Effect of Transistor Output Resistance Our analysis of the follower has thus far neglected the Early effect. Fortunately, the results obtained above can be readily modified to reflect this nonideality. Figure 5.92 illustrates a key point that facilitates the analysis: in small-signal operation, $r_{O}$ appears in parallel with $R_{E}$. We can therefore rewrite Eqs. (5.323), (5.326) and (5.329) as

$$
\begin{align*}
A_{v} & =\frac{R_{E} \| r_{O}}{R_{E} \| r_{O}+\frac{R_{S}}{\beta+1}+\frac{1}{g_{m}}}  \tag{5.330}\\
R_{\text {in }} & =r_{\pi}+(\beta+1)\left(R_{E} \| r_{O}\right)  \tag{5.331}\\
R_{\text {out }} & =\left(\frac{R_{S}}{\beta+1}+\frac{1}{g_{m}}\right)\left\|R_{E}\right\| r_{O} \tag{5.332}
\end{align*}
$$

image_name:Figure 5.92
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: b1}
name: Q1, type: NPN, ports: {C: VCC, B: b1, E: e1}
name: RE, type: Resistor, value: RE, ports: {N1: e1, N2: GND}
name: ro, type: Resistor, value: ro, ports: {N1: e1, N2: GND}
]
extrainfo:The circuit is an emitter follower with a transistor output resistance ro in parallel with RE. The input is connected to Vin through RS, and the output is at the emitter of Q1.

Figure 5.92 Follower including transistor output resistance.

Example Determine the small-signal properties of an emitter follower using an ideal current 5.46 source (as in Example 5.43) but with a finite source impedance $R_{S}$.

Solution Since $R_{E}=\infty$, we have

$$
\begin{align*}
A_{v} & =\frac{r_{O}}{r_{O}+\frac{R_{S}}{\beta+1}+\frac{1}{g_{m}}}  \tag{5.333}\\
R_{\text {in }} & =r_{\pi}+(\beta+1) r_{O}  \tag{5.334}\\
R_{\text {out }} & =\left(\frac{R_{S}}{\beta+1}+\frac{1}{g_{m}}\right) \| r_{O} \tag{5.335}
\end{align*}
$$

Also, $g_{m} r_{O} \gg 1$, and hence

$$
\begin{align*}
& A_{v} \approx \frac{r_{O}}{r_{O}+\frac{R_{S}}{\beta+1}}  \tag{5.336}\\
& R_{\text {in }} \approx(\beta+1) r_{O} \tag{5.337}
\end{align*}
$$

We note that $A_{v}$ approaches unity if $R_{S} \ll(\beta+1) r_{O}$, a condition typically valid.

Exercise $\quad$ How are the results modified if $R_{E}<\infty$ ?

The buffering capability of followers is sometimes attributed to their "current gain." Since a base current $i_{B}$ results in an emitter current of $(\beta+1) i_{B}$, we can say that for a current $i_{L}$ delivered to the load, the follower draws only $i_{L} /(\beta+1)$ from the source voltage (Fig. 5.93). Thus, $v_{X}$ sees the load impedance multiplied by $(\beta+1)$.
image_name:Figure 5.93
description:
[
name: Vx, type: VoltageSource, value: Vx, ports: {Np: Vx, Nn: GND}
name: Q1, type: NPN, ports: {C: VCC, B: Vx, E: e1}
name: Load, type: Resistor, ports: {N1: e1, N2: GND}
]
extrainfo:The circuit is an emitter follower configuration with a voltage source Vx driving the base of the NPN transistor Q1. The emitter of Q1 is connected to a load resistor, and the collector is connected to VCC. The load current iL flows through the load resistor to ground.

Figure 5.93 Current amplification in a follower.

Emitter Follower with Biasing The biasing of emitter followers entails defining both the base voltage and the collector (emitter) current. Figure 5.94(a) depicts an example similar to the scheme illustrated in Fig. 5.19 for the CE stage. As usual, the current flowing through $R_{1}$ and $R_{2}$ is chosen to be much greater than the base current.

It is interesting to note that, unlike the CE topology, the emitter follower can operate with a base voltage near $V_{C C}$. This is because the collector is tied to $V_{C C}$, allowing the same voltage for the base without driving $Q_{1}$ into saturation. For this reason, followers are often biased as shown in Fig. 5.94(b), where $R_{B} I_{B}$ is chosen much less than the
image_name:(a)
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: X}
name: R1, type: Resistor, value: R1, ports: {N1: VCC, N2: X}
name: R2, type: Resistor, value: R2, ports: {N1: X, N2: GND}
name: Q1, type: NPN, ports: {C: VCC, B: X, E: e1}
name: RE, type: Resistor, value: RE, ports: {N1: e1, N2: GND}
]
extrainfo:The circuit is a common emitter amplifier with a resistive divider biasing. It uses a voltage divider with R1 and R2 to set the base voltage of the NPN transistor Q1. The emitter resistor RE provides feedback stabilization. The input is AC-coupled through capacitor C1, and the output is taken from the emitter (emitter follower configuration).

(a)
image_name:(b)
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: RB, type: Resistor, value: RB, ports: {N1: VCC, N2: X}
name: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: X}
name: Q1, type: NPN, ports: {C: VCC, B: X, E: Y}
name: RE, type: Resistor, value: RE, ports: {N1: Y, N2: GND}
]
extrainfo:The circuit is a common emitter amplifier with a single base resistor biasing. It uses a resistor RB to set the base voltage of the NPN transistor Q1. The emitter resistor RE provides feedback stabilization. The input is AC-coupled through capacitor C1, and the output is taken from the emitter (emitter follower configuration).

(b)

Figure 5.94 Biasing a follower by means of (a) resistive divider, (b) single base resistor.
voltage drop across $R_{E}$, thus lowering the sensitivity to $\beta$. The following example illustrates this point.

Example The follower of Fig. 5.94(b) employs $R_{B}=10 \mathrm{k} \Omega$ and $R_{E}=1 \mathrm{k} \Omega$. Calculate the bias 5.47 current and voltages if $I_{S}=5 \times 10^{-16} \mathrm{~A}, \beta=100$, and $V_{C C}=2.5 \mathrm{~V}$. What happens if $\beta$ drops to 50?

Solution To determine the bias current, we follow the iterative procedure described in Section 5.2.3. Writing a KVL through $R_{B}$, the base-emitter junction, and $R_{E}$ gives

$$
\begin{equation*}
\frac{R_{B} I_{C}}{\beta}+V_{B E}+R_{E} I_{C}=V_{C C} \tag{5.338}
\end{equation*}
$$

which, with $V_{B E} \approx 800 \mathrm{mV}$, leads to

$$
\begin{equation*}
I_{C}=1.545 \mathrm{~mA} \tag{5.339}
\end{equation*}
$$

It follows that $V_{B E}=V_{T} \ln \left(I_{C} / I_{S}\right)=748 \mathrm{mV}$. Using this value in Eq. (5.338), we have

$$
\begin{equation*}
I_{C}=1.593 \mathrm{~mA} \tag{5.340}
\end{equation*}
$$

a value close to that in Eq. (5.339) and hence relatively accurate. Under this condition, $I_{B} R_{B}=159 \mathrm{mV}$ whereas $R_{E} I_{C}=1.593 \mathrm{~V}$.

Since $I_{B} R_{B} \ll R_{E} I_{C}$, we expect that variation of $\beta$ and hence $I_{B} R_{B}$ negligibly affects the voltage drop across $R_{E}$ and hence the emitter and collector currents. As a rough estimate, for $\beta=50, I_{B} R_{B}$ is doubled $(\approx 318 \mathrm{mV})$, reducing the drop across $R_{E}$ by 159 mV . That is, $I_{E}=(1.593 \mathrm{~V}-0.159 \mathrm{~V}) / 1 \mathrm{k} \Omega=1.434 \mathrm{~mA}$, implying that a twofold change in $\beta$ leads to a $10 \%$ change in the collector current. The reader is encouraged to repeat the above iterations with $\beta=50$ and determine the exact current.

Exercise If $R_{B}$ is doubled, is the circuit more or less sensitive to the variation in $\beta$ ?

As manifested by Eq. (5.338), the topologies of Fig. 5.94 suffer from supplydependent biasing. In integrated circuits, this issue is resolved by replacing the emitter resistor with a constant current source (Fig. 5.95). Now, since $I_{E E}$ is constant, so are $V_{B E}$ and $R_{B} I_{B}$. Thus, if $V_{C C}$ rises, so do $V_{X}$ and $V_{Y}$, but the bias current remains constant.
image_name:Figure 5.95
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: b1}
name: RB, type: Resistor, value: RB, ports: {N1: b1, N2: VCC}
name: Q1, type: NPN, ports: {C: VCC, B: b1, E: e1}
name: C2, type: Capacitor, value: C2, ports: {Np: e1, Nn: X}
name: RL, type: Resistor, value: RL, ports: {N1: X, N2: GND}
]
extrainfo:The circuit is a common collector (emitter follower) amplifier with capacitive coupling at the input and output. It uses a constant current source to maintain bias stability.

Figure 5.95 Capacitive coupling at input and output of a follower.

## 5.4 SUMMARY AND ADDITIONAL EXAMPLES

This chapter has created a foundation for amplifier design, emphasizing that a proper bias point must be established to define the small-signal properties of each circuit. Depicted in Fig. 5.96, the three amplifier topologies studied here exhibit different gains and I/O impedances, each serving a specific application. CE and CB stages can provide a voltage gain greater than unity and their input and output impedances are independent of the load and source impedances, respectively (if $V_{A}=\infty$ ). On the other hand, followers display a voltage gain of at most unity but their terminal impedances depend on the load and source impedances.
image_name:CE Stage
description:
[
name: Q1, type: NPN, ports: {C: Vout, B: Vin, E: GND}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}
name: VCC, type: VoltageSource, value: VCC, ports: {Np: VCC, Nn: GND}
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
]
extrainfo:The CE Stage circuit consists of an NPN transistor Q1 with its collector connected to the output node Vout, base connected to the input node Vin, and emitter connected to ground. A resistor RC is connected between VCC and Vout.
image_name:CB Stage
description:
[
name: Q1, type: NPN, ports: {C: VCC, B: Vb1, E: Vin}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}
name: VCC, type: VoltageSource, value: VCC, ports: {Np: VCC, Nn: GND}
name: Vb1, type: VoltageSource, value: Vb1, ports: {Np: Vb1, Nn: GND}
]
extrainfo:The CB Stage is a common-base amplifier configuration with an NPN transistor, where the collector is connected to VCC, the base is connected to a bias voltage Vb1, and the emitter is connected to the input Vin. The output is taken from the collector through the resistor RC.
image_name:Follower
description:
[
name: Q1, type: NPN, ports: {C: VCC, B: Vin, E: Vout}
name: RE, type: Resistor, value: RE, ports: {N1: Vout, N2: GND}
name: VCC, type: VoltageSource, value: VCC, ports: {Np: VCC, Nn: GND}
]
extrainfo:The circuit is a voltage follower amplifier using an NPN transistor. The input voltage is applied to the base of the transistor, and the output is taken from the emitter. The emitter resistor (RE) stabilizes the output.

Figure 5.96 Summary of bipolar amplifier topologies.
In this section, we consider a number of challenging examples, seeking to improve our circuit analysis techniques. As usual, our emphasis is on solution by inspection and hence intuitive understanding of the circuits. We assume various capacitors used in each circuit have a negligible impedance at the signal frequencies of interest.

Assuming $V_{A}=\infty$, determine the voltage gain of the circuit shown in Fig. 5.97(a).
5.48
image_name:(a)
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: Rs, type: Resistor, value: Rs, ports: {N1: Vin, N2: b1}
name: R1, type: Resistor, value: R1, ports: {N1: b1, N2: X1}
name: R2, type: Resistor, value: R2, ports: {N1: X1, N2: Vout}
name: C1, type: Capacitor, value: C1, ports: {Np: X1, Nn: GND}
name: Rc, type: Resistor, value: Rc, ports: {N1: VCC, N2: Vout}
name: Re, type: Resistor, value: Re, ports: {N1: qe1, N2: GND}
name: Q1, type: NPN, ports: {C: Vout, B: b1, E: qe1}
]
extrainfo:The circuit is a common-emitter amplifier with a bypass capacitor C1. The input is connected to Vin and the output is taken from Vout. The transistor Q1 is biased by resistors R1 and R2, and the emitter resistor Re is bypassed by C1 to increase gain.

(a)
image_name:(a)
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: b1}
name: R1, type: Resistor, value: R1, ports: {N1: b1, N2: GND}
name: R2, type: Resistor, value: R2, ports: {N1: b1, N2: Vout}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}
name: RE, type: Resistor, value: RE, ports: {N1: qe1, N2: GND}
name: Q1, type: NPN, ports: {C: Vout, B: b1, E: qe1}
]
extrainfo:The circuit is a common-emitter amplifier with a bypass capacitor C1. The input is connected to Vin and the output is taken from Vout. The transistor Q1 is biased by resistors R1 and R2, and the emitter resistor Re is bypassed by C1 to increase gain.

(b)
image_name:Figure 5.97(c)
description:
[
name: VThev, type: VoltageSource, value: VThev, ports: {Np: VThev, Nn: GND}
name: RThev, type: Resistor, value: RThev, ports: {N1: VThev, N2: b1}
name: Q1, type: NPN, ports: {C: Vout, B: b1, E: qe1}
name: RE, type: Resistor, value: RE, ports: {N1: qe1, N2: GND}
name: RC||R2, type: Resistor, value: RC||R2, ports: {N1: Vout, N2: GND}
]
extrainfo:The simplified AC model represents a common-emitter amplifier with a bypass capacitor C1 shorted. The input is modeled as a Thevenin equivalent with VThev and RThev. The transistor Q1 is biased by the resistors, and the output is taken from Vout.

(c)

Figure 5.97 (a) Example of CE stage, (b) equivalent circuit with $C_{1}$ shorted, (c) simplified circuit.

Solution The simplified ac model is depicted in Fig. 5.97(b), revealing that $R_{1}$ appears between base and ground, and $R_{2}$ between collector and ground. Replacing $v_{i n}, R_{S}$, and $R_{1}$ with a Thevenin equivalent [Fig. 5.97(c)], we have

$$
\begin{align*}
v_{\text {Thev }} & =\frac{R_{1}}{R_{1}+R_{S}} v_{\text {in }}  \tag{5.341}\\
R_{\text {Thev }} & =R_{1} \| R_{S} . \tag{5.342}
\end{align*}
$$

The resulting circuit resembles that in Fig. 5.43(a) and satisfies Eq. (5.185):

$$
\begin{equation*}
\frac{v_{\text {out }}}{v_{\text {Thev }}}=-\frac{R_{2} \| R_{C}}{\frac{R_{\text {Thev }}}{\beta+1}+\frac{1}{g_{m}}+R_{E}} \tag{5.343}
\end{equation*}
$$

Substituting for $v_{\text {Thev }}$ and $R_{\text {Thev }}$ gives

$$
\begin{equation*}
\frac{v_{\text {out }}}{v_{\text {in }}}=-\frac{R_{2} \| R_{C}}{\frac{R_{1} \| R_{S}}{\beta+1}+\frac{1}{g_{m}}+R_{E}} \cdot \frac{R_{1}}{R_{1}+R_{S}} \tag{5.344}
\end{equation*}
$$

Exercise What happens if a very large capacitor is added from the emitter of $Q_{1}$ to ground?
image_name:(a)
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: x1}
name: C1, type: Capacitor, value: C1, ports: {Np: x1, Nn: b1}
name: R1, type: Resistor, value: R1, ports: {N1: b1, N2: x2}
name: R2, type: Resistor, value: R2, ports: {N1: x2, N2: e1}
name: C2, type: Capacitor, value: C2, ports: {Np: x2, Nn: GND}
name: Q1, type: NPN, ports: {C: Vout, B: b1, E: e1}
name: RC, type: Resistor, value: RC, ports: {N1: Vout, N2: VCC}
name: I1, type: CurrentSource, value: I1, ports: {Np: e1, Nn: GND}
]
extrainfo:The circuit is a common-emitter amplifier stage with emitter degeneration. The voltage gain is determined by the resistors and the transistor parameters. A large capacitor from the emitter of Q1 to ground would bypass the emitter resistor R2 at high frequencies, increasing the gain.
image_name:(b)
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: b1}
name: C1, type: Capacitor, value: C1, ports: {Np: b1, Nn: GND}
name: R1, type: Resistor, value: R1, ports: {N1: b1, N2: b1}
name: R2, type: Resistor, value: R2, ports: {N1: b1, N2: e1}
name: C2, type: Capacitor, value: C2, ports: {Np: e1, Nn: GND}
name: RC, type: Resistor, value: RC, ports: {N1: Vout, N2: GND}
name: Q1, type: NPN, ports: {C: Vout, B: b1, E: e1}
]
extrainfo:The circuit is a common-emitter amplifier with emitter degeneration. The voltage gain is calculated assuming the Early voltage VA is infinite.

Figure 5.98 (a) Example of CE stage, (b) simplified circuit.

Solution As shown in the simplified diagram of Fig. 5.98(b), $R_{2}$ appears as an emitter degeneration resistor. As in the above example, we replace $v_{i n}, R_{S}$, and $R_{1}$ with a Thevenin equivalent and utilize Eq. (5.185):

$$
\begin{equation*}
\frac{v_{\text {out }}}{v_{\text {in }}}=-\frac{R_{C}}{\frac{R_{\text {Thev }}}{\beta+1}+\frac{1}{g_{m}}+R_{2}} \tag{5.345}
\end{equation*}
$$

and hence

$$
\begin{equation*}
\frac{v_{\text {out }}}{v_{\text {in }}}=-\frac{R_{C}}{\frac{R_{S} \| R_{1}}{\beta+1}+\frac{1}{g_{m}}+R_{2}} \cdot \frac{R_{1}}{R_{1}+R_{S}} \tag{5.346}
\end{equation*}
$$

Exercise What happens if $C_{2}$ is tied from the emitter of $Q_{1}$ to ground?

Example

5.50

Assuming $V_{A}=\infty$, compute the voltage gain and input impedance of the circuit shown in Fig. 5.99(a).
image_name:Figure 5.99 (a)
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: Q1, type: NPN, ports: {C: Vout, B: Vin, E: e1e2}
name: Q2, type: NPN, ports: {C: VCC, B: b, E: e1e2}
name: RC, type: Resistor, value: RC, ports: {N1: Vout, N2: VCC}
name: R1, type: Resistor, value: R1, ports: {N1: b, N2: VB}
name: I1, type: CurrentSource, value: I1, ports: {Np: e1e2, Nn: GND}
name: Req, type: Resistor, value: Req, ports: {N1: e1e2, N2: GND}
]
extrainfo:The circuit is a common-emitter (CE) stage with degeneration through the impedance seen at the emitter of Q2, represented by Req. It is powered by VCC and has a voltage input Vin and output Vout.

(a)
image_name:(a)
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: Rc, type: Resistor, value: Rc, ports: {N1: Vout, N2: VCC}
name: Req, type: Resistor, value: Req, ports: {N1: e1, N2: GND}
name: Q1, type: NPN, ports: {C: Vout, B: Vin, E: e1}
]
extrainfo:The circuit is a common-emitter (CE) stage with degeneration through the impedance seen at the emitter of Q1, represented by Req. It is powered by VCC and has a voltage input Vin and output Vout.

(b)

Figure 5.99 (a) Example of CE stage, (b) simplified circuit.
Solution The circuit resembles a CE stage (why?) degenerated by the impedance seen at the emitter of $Q_{2}, R_{e q}$. Recall from Fig. 5.75 that

$$
\begin{equation*}
R_{e q}=\frac{R_{1}}{\beta+1}+\frac{1}{g_{m 2}} \tag{5.347}
\end{equation*}
$$

The simplified model in Fig. 5.99(b) thus yields

$$
\begin{align*}
A_{v} & =\frac{-R_{C}}{\frac{1}{g_{m 1}}+R_{e q}}  \tag{5.348}\\
& =\frac{-R_{C}}{\frac{1}{g_{m 1}}+\frac{R_{1}}{\beta+1}+\frac{1}{g_{m 2}}} \tag{5.349}
\end{align*}
$$

The input impedance is also obtained from Fig. 5.75:

$$
\begin{align*}
R_{i n} & =r_{\pi 1}+(\beta+1) R_{e q}  \tag{5.350}\\
& =r_{\pi 1}+R_{1}+r_{\pi 2} \tag{5.351}
\end{align*}
$$

Exercise Repeat the above example if $R_{1}$ is placed in series with the emitter of $Q_{2}$.

Calculate the voltage gain of the circuit in Fig. 5.100(a) if $V_{A}=\infty$.
5.51

Solution $\quad$ Since the base is at ac ground, $R_{1}$ appears in parallel with $R_{C}$ and $R_{2}$ is shorted to ground on both ends [Fig. 5.100(b)]. The voltage gain is given by Eq. (5.271) but with $R_{C}$ replaced by $R_{C} \| R_{1}$ :

$$
\begin{equation*}
A_{v}=\frac{R_{C} \| R_{1}}{R_{S}+\frac{1}{g_{m}}} \tag{5.352}
\end{equation*}
$$

Exercise What happens if $R_{C}$ is replaced by an ideal current source?
image_name:Figure 5.100 (a)
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: X1}
name: C1, type: Capacitor, value: C1, ports: {Np: X1, Nn: E1}
name: Q1, type: NPN, ports: {C: Vout, B: B1, E: E1}
name: RC, type: Resistor, value: RC, ports: {N1: Vout, N2: VCC}
name: R1, type: Resistor, value: R1, ports: {N1: Vout, N2: B1}
name: R2, type: Resistor, value: R2, ports: {N1: B1, N2: GND}
name: CB, type: Capacitor, value: CB, ports: {Np: B1, Nn: GND}
]
extrainfo:The circuit is a common-base (CB) amplifier configuration. The voltage gain is affected by the parallel combination of RC and R1. The input is connected through RS and C1 to the emitter of Q1, while the output is taken from the collector. The base is AC grounded through R2 and CB.
image_name:Figure 5.100 (b)
description:
[
name: vin, type: VoltageSource, value: vin, ports: {Np: Vin, Nn: GND}
name: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: e1}
name: C1, type: Capacitor, value: C1, ports: {Np: e1, Nn: GND}
name: Q1, type: NPN, ports: {C: Vout, B: GND, E: e1}
name: RC||R1, type: Resistor, ports: {N1: Vout, N2: GND}
]
extrainfo:The circuit is a common-base (CB) amplifier stage with the base grounded and the output taken across RC || R1. The input is AC-coupled through C1, and the voltage gain is affected by the parallel combination of RC and R1.

Figure 5.100 (a) Example of CB stage, (b) simplified circuit.

Determine the input impedance of the circuit shown in Fig. 5.101(a) if $V_{A}=\infty$.
image_name:Figure 5.101 (b)
description:
[
name: Q1, type: NPN, ports: {C: Vout, B: GND, E: e1}
name: Q2, type: NPN, ports: {C: VCC, B: b2, E: b1}
name: Rin, type: Resistor, value: Rin, ports: {N1: Vin, N2: e1}
name: RC, type: Resistor, value: RC, ports: {N1: VCC, N2: Vout}
name: RB, type: Resistor, value: RB, ports: {N1: VCC, N2: b2}
name: RE, type: Resistor, value: RE, ports: {N1: b1, N2: GND}
name: Req, type: Resistor, value: Req, ports: {N1: b1, N2: e1}
]
extrainfo:The circuit is a common-base (CB) amplifier stage with a grounded base and the output taken across RC. Q1 operates as a common-base device, and Q2 resembles an emitter follower, contributing to the equivalent resistance Req in series with the base of Q1.

(a)
image_name:Figure 5.101 (b)
description:
[
name: RC, type: Resistor, value: RC, ports: {N1: Cl, N2: GND}
name: Cl, type: Capacitor, value: Cl, ports: {Np: RC, Nn: Q1}
name: Q1, type: NPN, ports: {C: Cl, B: b1, E: e1}
name: Req, type: Resistor, value: Req, ports: {N1: b1, N2: GND}
name: Rin, type: Resistor, value: Rin, ports: {N1: Vin, N2: e1}
]
extrainfo:The circuit is a common-base amplifier stage with Q1 operating as a common-base device. The output is taken across RC, and Req is in series with the base of Q1. Q2 resembles an emitter follower, contributing to Req.

(b)

Figure 5.101 (a) Example of CB stage, (b) simplified circuit.

Solution In this circuit, $Q_{1}$ operates as a common-base device (why?) but with a resistance $R_{e q}$ in series with its base [Fig. 5.101(b)]. To obtain $R_{e q}$, we recognize that $Q_{2}$ resembles an emitter follower, e.g., the topology in Fig. 5.91(a), concluding that $R_{e q}$ can be viewed as the output resistance of such a stage, as given by Eq. (5.329):

$$
\begin{equation*}
R_{e q}=\left(\frac{R_{B}}{\beta+1}+\frac{1}{g_{m 2}}\right) \| R_{E} \tag{5.353}
\end{equation*}
$$

Now, from Fig. 5.101(b), we observe that $R_{\text {in }}$ contains two components: one equal to the resistance in series with the base, $R_{e q}$, divided by $\beta+1$, and another equal to $1 / g_{m 1}$ :

$$
\begin{align*}
R_{i n}=\frac{R_{e q}}{\beta+1} & +\frac{1}{g_{m 1}}  \tag{5.354}\\
\quad & =\frac{1}{\beta+1}\left[\left(\frac{R_{B}}{\beta+1}+\frac{1}{g_{m 2}}\right) \| R_{E}\right]+\frac{1}{g_{m 1}} \tag{5.355}
\end{align*}
$$

The reader is encouraged to obtain $R_{i n}$ through a complete small-signal analysis and compare the required "manual labor" to the above algebra.

Compute the voltage gain and the output impedance of the circuit depicted in Fig. 5.102(a) with $V_{A}<\infty$.
image_name:(a)
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: Rs, type: Resistor, value: Rs, ports: {N1: Vin, N2: b1}
name: R1, type: Resistor, value: R1, ports: {N1: b1, N2: X}
name: R2, type: Resistor, value: R2, ports: {N1: X, N2: Vout}
name: RE, type: Resistor, value: RE, ports: {N1: Vout, N2: GND}
name: C2, type: Capacitor, value: C2, ports: {Np: X, Nn: GND}
name: Q1, type: NPN, ports: {C: VCC, B: b1, E: Vout}
]
extrainfo:The circuit is an emitter follower configuration with an NPN transistor Q1. The input voltage is applied at Vin and the output is taken from Vout. The resistors R1 and R2 form a voltage divider biasing network, and RE provides emitter degeneration. C2 is used for AC coupling.

(a)
image_name:(a)
description:
[
name: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}
name: Rs, type: Resistor, value: Rs, ports: {N1: Vin, N2: b1}
name: R1, type: Resistor, value: R1, ports: {N1: b1, N2: GND}
name: Q1, type: NPN, ports: {C: GND, B: b1, E: Vout}
name: ro, type: Resistor, value: ro, ports: {N1: GND, N2: Vout}
name: RE||R2, type: Resistor, value: RE||R2, ports: {N1: Vout, N2: GND}
]
extrainfo:The circuit is an emitter follower configuration with an NPN transistor Q1. The input voltage is applied at Vin and the output is taken from Vout. The resistors R1 and Rs form part of the input network, and RE||R2 provides emitter degeneration. The resistor ro represents the output resistance of the transistor.

(b)
image_name:Figure 5.102(b)
description:
[
name: VThev, type: VoltageSource, ports: {Np: VThev, Nn: GND}
name: RThev, type: Resistor, value: RThev, ports: {N1: VThev, N2: b1}
name: Q1, type: NPN, ports: {C: GND, B: b1, E: Vout}
name: RE||R2||ro, type: Resistor, value: RE||R2||ro, ports: {N1: Vout, N2: GND}
]
extrainfo:The circuit is an emitter follower configuration with an NPN transistor Q1. The input voltage is applied at VThev and the output is taken from Vout. The resistors RThev forms part of the input network, and RE||R2||ro provides emitter degeneration. The resistor ro represents the output resistance of the transistor.

(c)

Figure 5.102 (a) Example of emitter follower, (b) circuit with $C_{1}$ shorted, (c) simplified circuit.

Solution Noting that $X$ is at ac ground, we construct the simplified circuit shown in Fig. 5.102(b), where the output resistance of $Q_{1}$ is explicitly drawn. Replacing $v_{i n}, R_{S}$, and $R_{1}$ with their Thevenin equivalent and recognizing that $R_{E}, R_{2}$, and $r_{O}$ appear in parallel [Fig. 5.102(c)], we employ Eq. (5.330) and write

$$
\begin{equation*}
\frac{v_{\text {out }}}{v_{\text {Thev }}}=\frac{R_{E}\left\|R_{2}\right\| r_{O}}{R_{E}\left\|R_{2}\right\| r_{O}+\frac{1}{g_{m}}+\frac{R_{T h e v}}{\beta+1}} \tag{5.356}
\end{equation*}
$$

and hence

$$
\begin{equation*}
\frac{v_{\text {out }}}{v_{\text {in }}}=\frac{R_{E}\left\|R_{2}\right\| r_{O}}{R_{E}\left\|R_{2}\right\| r_{O}+\frac{1}{g_{m}}+\frac{R_{S} \| R_{1}}{\beta+1}} \cdot \frac{R_{1}}{R_{1}+R_{S}} \tag{5.357}
\end{equation*}
$$

For the output resistance, we refer to Eq. (5.332):

$$
\begin{align*}
R_{\text {out }} & =\left(\frac{R_{\text {Thev }}}{\beta+1}+\frac{1}{g_{m}}\right) \|\left(R_{E}\left\|R_{2}\right\| r_{O}\right)  \tag{5.358}\\
& =\left(\frac{R_{S} \| R_{1}}{\beta+1}+\frac{1}{g_{m}}\right)\left\|R_{E}\right\| R_{2} \| r_{O} \tag{5.359}
\end{align*}
$$

Exercise What happens if $R_{S}=0$ ?

Example
5.54

Determine the voltage gain and I/O impedances of the topology shown in Fig. 5.103(a). Assume $V_{A}=\infty$ and equal $\beta$ s for $n p n$ and $p n p$ transistors.
image_name:Figure 5.103 (a)
description:
[
name: Q1, type: NPN, ports: {C: VCC, B: b1, E: e1}
name: Q2, type: PNP, ports: {C: GND, B: b2, E: e2}
name: Q3, type: NPN, ports: {C: e1, B: Vin, E: e3}
name: RB1, type: Resistor, value: RB1, ports: {N1: b2, N2: GND}
name: RB2, type: Resistor, value: RB2, ports: {N1: VCC, N2: b1}
name: RC, type: Resistor, value: RC, ports: {N1: e1, N2: Vout}
name: RE, type: Resistor, value: RE, ports: {N1: e3, N2: e2}
name: Req1, type: Resistor, value: Req1, ports: {N1: Vin, N2: e3}
name: Req2, type: Resistor, value: Req2, ports: {N1: e1, N2: Vout}
]
extrainfo:The circuit is a CE amplifier with emitter degeneration and a composite collector load. Q1 and Q3 form the main amplification stage, while Q2 provides biasing. The circuit is designed to amplify the input voltage Vin and produce an output voltage at Vout.

(a)
image_name:(a)
description:
[
name: Q3, type: NPN, ports: {C: Vout, B: Vin, E: e3}
name: Req2, type: Resistor, value: Req2, ports: {N1: GND, N2: X2}
name: Rc, type: Resistor, value: Rc, ports: {N1: X2, N2: Vout}
name: Re, type: Resistor, value: Re, ports: {N1: e3, N2: X1}
name: Req1, type: Resistor, value: Req1, ports: {N1: X1, N2: GND}
]
extrainfo:The circuit is a common-emitter (CE) amplifier with emitter degeneration and a composite collector load. It consists of an NPN transistor Q3 as the main amplifying element, with resistors Rc and Req2 forming the collector load, and resistors Re and Req1 providing emitter degeneration. The input voltage is applied at Vin, and the amplified output is taken from Vout.

(b)

Figure 5.103 (a) Example of CE stage, (b) simplified circuit.

Solution
We identify the stage as a CE amplifier with emitter degeneration and a composite collector load. As the first step, we represent the role of $Q_{2}$ and $Q_{3}$ by the impedances that they create at their emitter. Since $R_{e q 1}$ denotes the impedance seen looking into the emitter of $Q_{2}$ with a base resistance of $R_{B 1}$, we have from Fig. 5.75

$$
\begin{equation*}
R_{e q 1}=\frac{R_{B 1}}{\beta+1}+\frac{1}{g_{m 2}} . \tag{5.360}
\end{equation*}
$$

Similarly,

$$
\begin{equation*}
R_{e q 2}=\frac{R_{B 2}}{\beta+1}+\frac{1}{g_{m 1}}, \tag{5.361}
\end{equation*}
$$

leading to the simplified circuit shown in Fig. 5.103(b). It follows that

$$
\begin{align*}
A_{v} & =-\frac{R_{C}+R_{e q 2}}{R_{e q 1}+\frac{1}{g_{m 3}}+R_{E}}  \tag{5.362}\\
& =-\frac{R_{C}+\frac{R_{B 2}}{\beta+1}+\frac{1}{g_{m 1}}}{\frac{R_{B 1}}{\beta+1}+\frac{1}{g_{m 2}}+\frac{1}{g_{m 3}}+R_{E}} \tag{5.363}
\end{align*}
$$

Also,

$$
\begin{align*}
R_{i n} & =r_{\pi 3}+(\beta+1)\left(R_{E}+R_{e q 1}\right)  \tag{5.364}\\
& =r_{\pi 3}+(\beta+1)\left(R_{E}+\frac{R_{B 1}}{\beta+1}+\frac{1}{g_{m 2}}\right) \tag{5.365}
\end{align*}
$$

and

$$
\begin{align*}
R_{\text {out }} & =R_{C}+R_{\text {eq } 2}  \tag{5.366}\\
& =R_{C}+\frac{R_{B 2}}{\beta+1}+\frac{1}{g_{m 1}} . \tag{5.367}
\end{align*}
$$

Exercise What happens if $R_{B 2} \rightarrow \infty$ ?

## 5.5 CHAPTER SUMMARY

- In addition to gain, the input and output impedances of amplifiers determine the ease with which various stages can be cascaded.
- Voltage amplifiers must ideally provide a high input impedance (so that they can sense a voltage without disturbing the node) and a low output impedance (so that they can drive a load without reduction in gain).
- The impedances seen looking into the base, collector, and emitter of a bipolar transistor are equal to $r_{\pi}$ (with emitter grounded), $r_{O}$ (with emitter grounded), and $1 / g_{m}$ (with base grounded), respectively.
- In order to obtain the required small-signal bipolar device parameters such as $g_{m}$, $r_{\pi}$, and $r_{O}$, the transistor must be "biased," i.e., carry a certain collector current and operate in the active region. Signals simply perturb these conditions.
- Biasing techniques establish the required base-emitter and base-collector voltages while providing the base current.
- With a single bipolar transistor, only three amplifier topologies are possible: commonemitter and common-base stages and emitter followers.
- The CE stage provides a moderate voltage gain, a moderate input impedance, and a moderate output impedance.
- Emitter degeneration improves the linearity but lowers the voltage gain.
- Emitter degeneration raises the output impedance of CE stages considerably.
- The CB stage provides a moderate voltage gain, a low input impedance, and a moderate output impedance.
- The voltage gain expressions for CE and CB stages are similar but for a sign.
- The emitter follower provides a voltage gain less than unity, a high input impedance, and a low output impedance, serving as a good voltage buffer.
