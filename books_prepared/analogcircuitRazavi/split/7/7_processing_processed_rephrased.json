[

{
    "text": "The provided text:\n```\nDepending on the application, MOS circuits may employ biasing techniques that differ significantly from those detailed in Chapter 5 for bipolar stages. Most of these techniques exceed the scope of this book, though some are discussed in Chapter 5. Nevertheless, it is beneficial to apply certain biasing concepts from Chapter 5 to MOS stages.\nimage_name:Figure 7.1 MOS stage with biasing\ndescription:\n[\nname: R1, type: Resistor, value: 4kΩ, ports: {N1: VDD, N2: X}\nname: R2, type: Resistor, value: 10kΩ, ports: {N1: X, N2: GND}\nname: RS, type: Resistor, value: 1kΩ, ports: {N1: S1, N2: GND}\nname: RD, type: Resistor, ports: {N1: VDD, N2: Y}\nname: M1, type: NMOS, ports: {S: S1, D: Y, G: X}\nname: VDD, type: VoltageSource, value: 1.8V, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a MOS stage with biasing, using resistors R1 and R2 to set the gate voltage. M1 is an NMOS transistor operating in saturation, with RD connected to VDD and RS to ground. The gate voltage is determined by the voltage divider formed by R1 and R2.\n\nFigure 7.1 MOS stage with biasing.\nConsider the circuit depicted in Fig. 7.1, where the gate voltage is set by $R_{1}$ and $R_{2}$. We assume $M_{1}$ operates in saturation. Additionally, in most bias calculations, channel-length modulation can be ignored. Noting that the gate current is zero, we have\n\n$$\n\\begin{equation*}\nV_{X}=\\frac{R_{2}}{R_{1}+R_{2}} V_{D D} \\tag{7.1}\n\\end{equation*}\n$$\n\nSince $V_{X}=V_{G S}+I_{D} R_{S}$,\n\n$$\n\\begin{equation*}\n\\frac{R_{2}}{R_{1}+R_{2}} V_{D D}=V_{G S}+I_{D} R_{S} \\tag{7.2}\n\\end{equation*}\n$$\n\nAlso,\n\n$$\n\\begin{equation*}\nI_{D}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2} \\tag{7.3}\n\\end{equation*}\n$$\n\nEquations (7.2) and (7.3) can be solved to obtain $I_{D}$ and $V_{G S}$, either iteratively or by finding $I_{D}$ from Eq. (7.2) and substituting it in Eq. (7.3):\n\n$$\n\\begin{equation*}\n\\left(\\frac{R_{2}}{R_{1}+R_{2}} V_{D D}-V_{G S}\\right) \\frac{1}{R_{S}}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2} \\tag{7.4}\n\\end{equation*}\n$$\n\nThat is,\n\n$$\n\\begin{align*}\nV_{G S} & =-\\left(V_{1}-V_{T H}\\right)+\\sqrt{\\left(V_{1}-V_{T H}\\right)^{2}-V_{T H}^{2}+\\frac{2 R_{2}}{R_{1}+R_{2}} V_{1} V_{D D}}  \\tag{7.5}\\\\\n& =-\\left(V_{1}-V_{T H}\\right)+\\sqrt{V_{1}^{2}+2 V_{1}\\left(\\frac{R_{2} V_{D D}}{R_{1}+R_{2}}-V_{T H}\\right)} \\tag{7.6}\n\\end{align*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\nV_{1}=\\frac{1}{\\mu_{n} C_{o x} \\frac{W}{L} R_{S}} \\tag{7.7}\n\\end{equation*}\n$$\n\nThis value of $V_{G S}$ can then be substituted in Eq. (7.2) to determine $I_{D}$. Ensure that $V_{Y}$ exceeds $V_{X}-V_{T H}$ to maintain operation in the saturation region.\n\n```\nExample\n7.1\n```\n\nDetermine the bias current of $M_{1}$ in Fig. 7.1 assuming $V_{T H}=0.5 \\mathrm{~V}, \\mu_{n} C_{o x}=$ $100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, W / L=5 / 0.18$, and $\\lambda=0$. What is the maximum allowable value of $R_{D}$ for $M_{1}$ to remain in saturation?\n\nSolution We have\n\n$$\n\\begin{align*}\nV_{X} & =\\frac{R_{2}}{R_{1}+R_{2}} V_{D D}  \\tag{7.8}\\\\\n& =1.286 \\mathrm{~V} . \\tag{7.9}\n\\end{align*}\n$$\n\nWith an initial guess $V_{G S}=1 \\mathrm{~V}$, the voltage drop across $R_{S}$ is $V_{X}-V_{G S}=286 \\mathrm{mV}$, yielding a drain current of $286 \\mu \\mathrm{~A}$. Substituting for $I_{D}$ in Eq. (7.3) gives the new value of $V_{G S}$ as\n\n$$\n\\begin{align*}\nV_{G S} & =V_{T H}+\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x} \\frac{W}{L}}}  \\tag{7.10}\\\\\n& =0.954 \\mathrm{~V} \\tag{7.11}\n\\end{align*}\n$$\n\nConsequently,\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{V_{X}-V_{G S}}{R_{S}}  \\tag{7.12}\\\\\n& =332 \\mu \\mathrm{~A} \\tag{7.13}\n\\end{align*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\nV_{G S}=0.989 \\mathrm{~V} \\tag{7.14}\n\\end{equation*}\n$$\n\nThis gives $I_{D}=297 \\mu \\mathrm{~A}$.\nAs observed, the solutions converge more slowly than those in Chapter 5 for bipolar circuits due to the quadratic (rather than exponential) $I_{D}-V_{G S}$ relationship. To avoid extensive calculations, we can use the exact result in Eq. (7.6). Since $V_{1}=0.36 \\mathrm{~V}$,\n\n$$\n\\begin{equation*}\nV_{G S}=0.974 \\mathrm{~V} \\tag{7.15}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{V_{X}-V_{G S}}{R_{S}}  \\tag{7.16}\\\\\n& =312 \\mu \\mathrm{~A} \\tag{7.17}\n\\end{align*}\n$$\n\nThe maximum allowable value of $R_{D}$ is found when $V_{Y}=V_{X}-V_{T H}=0.786 \\mathrm{~V}$. Thus,\n\n$$\n\\begin{align*}\nR_{D} & =\\frac{V_{D D}-V_{Y}}{I_{D}}  \\tag{7.18}\\\\\n& =3.25 \\mathrm{k} \\Omega \\tag{7.19}\n\\end{align*}\n$$\n\nExercise What value of $R_{2}$ places $M_{1}$ at the edge of saturation?\n\nIn the circuit of Example 7.1, assume $M_{1}$ is in saturation with $R_{D}=2.5 \\mathrm{k} \\Omega$ and compute (a) the maximum allowable value of $W / L$ and (b) the minimum allowable value of $R_{S}$ (with $W / L=5 / 0.18$ ). Assume $\\lambda=0$.\n\nSolution (a) As $W / L$ increases, $M_{1}$ can conduct a higher current for a given $V_{G S}$. With $R_{D}=2.5 \\mathrm{k} \\Omega$ and $V_{X}=1.286 \\mathrm{~V}$, the maximum allowable $I_{D}$ is\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{V_{D D}-V_{Y}}{R_{D}}  \\tag{7.20}\\\\\n& =406 \\mu \\mathrm{~A} . \\tag{7.21}\n\\end{align*}\n$$\n\nThe voltage drop across $R_{S}$ is then 406 mV, resulting in $V_{G S}=1.286 \\mathrm{~V}-$ $0.406 \\mathrm{~V}=0.88 \\mathrm{~V}$. Thus, $M_{1}$ must carry a current of $406 \\mu \\mathrm{~A}$ with $V_{G S}=0.88 \\mathrm{~V}$ :\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2}  \\tag{7.22}\\\\\n406 \\mu \\mathrm{~A} & =\\left(50 \\mu \\mathrm{~A} / \\mathrm{V}^{2}\\right) \\frac{W}{L}(0.38 \\mathrm{~V})^{2} \\tag{7.23}\n\\end{align*}\n$$\n\nthus,\n\n$$\n\\begin{equation*}\n\\frac{W}{L}=56.2 \\tag{7.24}\n\\end{equation*}\n$$\n\n(b) With $W / L=5 / 0.18$, the minimum allowable $R_{S}$ for a drain current of $406 \\mu \\mathrm{~A}$ is determined. Since\n\n$$\n\\begin{align*}\nV_{G S} & =V_{T H}+\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x} \\frac{W}{L}}}  \\tag{7.25}\\\\\n& =1.041 \\mathrm{~V} \\tag{7.26}\n\\end{align*}\n$$\n\nthe voltage drop across $R_{S}$ is $V_{X}-V_{G S}=245 \\mathrm{mV}$. It follows that\n\n$$\n\\begin{align*}\nR_{S} & =\\frac{V_{X}-V_{G S}}{I_{D}}  \\tag{7.27}\\\\\n& =604 \\Omega . \\tag{7.28}\n\\end{align*}\n$$\n\nExercise Repeat the above example if $V_{T H}=0.35 \\mathrm{~V}$.\n\nThe self-biasing technique illustrated in Fig. 5.22 can also be applied to MOS amplifiers. As shown in Fig. 7.2, the circuit analysis involves noting that $M_{1}$ is in saturation (why?) and the voltage drop across $R_{G}$ is zero. Thus,\n\n$$\n\\begin{equation*}\nI_{D} R_{D}+V_{G S}+R_{S} I_{D}=V_{D D} \\tag{7.29}\n\\end{equation*}\n$$\n\nFinding $V_{G S}$ from this equation and substituting it in Eq. (7.3), we obtain\n\n$$\n\\begin{equation*}\nI_{D}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left[V_{D D}-\\left(R_{S}+R_{D}\\right) I_{D}-V_{T H}\\right]^{2} \\tag{7.30}\n\\end{equation*}\n$$\n\nimage_name:Figure 7.2 Self-biased MOS stage\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1, D: d1, G: g1}\nname: RG, type: Resistor, value: RG, ports: {N1: g1, N2: d1}\nname: RD, type: Resistor, value: RD, ports: {N1: d1, N2: VDD}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\n]\nextrainfo:The circuit is a self-biased NMOS amplifier with M1 in saturation. The voltage drop across RG is zero, indicating no gate current. The drain current ID flows from VDD through RD and M1 to GND.\n\nFigure 7.2 Self-biased MOS stage.\nwhere channel-length modulation is neglected. It follows that\n\n$$\n\\begin{equation*}\n\\left(R_{S}+R_{D}\\right)^{2} I_{D}^{2}-2\\left[\\left(V_{D D}-V_{T H}\\right)\\left(R_{S}+R_{D}\\right)+\\frac{1}{\\mu_{n} C_{o x} \\frac{W}{L}}\\right] I_{D}+\\left(V_{D D}-V_{T H}\\right)^{2}=0 \\tag{7.31}\n\\end{equation*}\n$$\n\nExample $\\quad$ Calculate the drain current of $M_{1}$ in Fig. 7.3 if $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}$, and 7.3 $\\lambda=0$. What value of $R_{D}$ is necessary to reduce $I_{D}$ by a factor of two?\nimage_name:Fig. 7.3\ndescription:\n[\nname: VDD, type: VoltageSource, value: 1.8V, ports: {Np: VDD, Nn: GND}\nname: RD, type: Resistor, value: 1kΩ, ports: {N1: VDD, N2: d1}\nname: Resistor, type: Resistor, value: 20kΩ, ports: {N1: d1, N2: g1}\nname: M1, type: NMOS, ports: {S: s1, D: d1, G: g1}\nname: Resistor, type: Resistor, value: 200Ω, ports: {N1: s1, N2: GND}\n]\nextrainfo:The circuit is a self-biased NMOS stage with a drain current of 556 μA. The width-to-length ratio (W/L) of the NMOS transistor M1 is 5/0.18.\n\nFigure 7.3 Example of self-biased MOS stage.\nSolution Equation (7.31) gives\n\n$$\n\\begin{equation*}\nI_{D}=556 \\mu \\mathrm{~A} \\tag{7.32}\n\\end{equation*}\n$$\n\nTo reduce $I_{D}$ to $278 \\mu \\mathrm{~A}$, we solve Eq. (7.31) for $R_{D}$ :\n\n$$\n\\begin{equation*}\nR_{D}=2.867 \\mathrm{k} \\Omega \\tag{7.33}\n\\end{equation*}\n```"
},
{
    "text": "Depending on the application, MOS circuits may employ biasing techniques that differ significantly from those detailed in Chapter 5 for bipolar stages. The majority of these techniques are beyond the scope of this book, although some are covered in Chapter 5. Nonetheless, it is beneficial to apply certain biasing concepts from Chapter 5 to MOS stages.\n\nImage Description:\n- Figure 7.1: MOS stage with biasing\n  - Components:\n    - R1: Resistor, 4kΩ, connected between VDD and X\n    - R2: Resistor, 10kΩ, connected between X and GND\n    - RS: Resistor, 1kΩ, connected between S1 and GND\n    - RD: Resistor, connected between VDD and Y\n    - M1: NMOS transistor, with source (S) at S1, drain (D) at Y, and gate (G) at X\n    - VDD: Voltage source, 1.8V, connected between VDD and GND\n  - Additional Info: The circuit is a MOS stage with biasing, using resistors R1 and R2 to set the gate voltage. M1 operates in saturation, with RD connected to VDD and RS to ground. The gate voltage is determined by the voltage divider formed by R1 and R2.\n\nConsider the circuit shown in Fig. 7.1, where the gate voltage is set by $R_{1}$ and $R_{2}$. We assume $M_{1}$ operates in saturation. In most bias calculations, channel-length modulation can be disregarded. Noting that the gate current is zero, we have:\n\n$$\n\\begin{equation*}\nV_{X}=\\frac{R_{2}}{R_{1}+R_{2}} V_{D D} \\tag{7.1}\n\\end{equation*}\n$$\n\nSince $V_{X}=V_{G S}+I_{D} R_{S}$,\n\n$$\n\\begin{equation*}\n\\frac{R_{2}}{R_{1}+R_{2}} V_{D D}=V_{G S}+I_{D} R_{S} \\tag{7.2}\n\\end{equation*}\n$$\n\nAlso,\n\n$$\n\\begin{equation*}\nI_{D}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2} \\tag{7.3}\n\\end{equation*}\n$$\n\nEquations (7.2) and (7.3) can be solved to determine $I_{D}$ and $V_{G S}$, either iteratively or by solving for $I_{D}$ from Eq. (7.2) and substituting it into Eq. (7.3):\n\n$$\n\\begin{equation*}\n\\left(\\frac{R_{2}}{R_{1}+R_{2}} V_{D D}-V_{G S}\\right) \\frac{1}{R_{S}}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2} \\tag{7.4}\n\\end{equation*}\n$$\n\nThus,\n\n$$\n\\begin{align*}\nV_{G S} & =-\\left(V_{1}-V_{T H}\\right)+\\sqrt{\\left(V_{1}-V_{T H}\\right)^{2}-V_{T H}^{2}+\\frac{2 R_{2}}{R_{1}+R_{2}} V_{1} V_{D D}}  \\tag{7.5}\\\\\n& =-\\left(V_{1}-V_{T H}\\right)+\\sqrt{V_{1}^{2}+2 V_{1}\\left(\\frac{R_{2} V_{D D}}{R_{1}+R_{2}}-V_{T H}\\right)} \\tag{7.6}\n\\end{align*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\nV_{1}=\\frac{1}{\\mu_{n} C_{o x} \\frac{W}{L} R_{S}} \\tag{7.7}\n\\end{equation*}\n$$\n\nThis value of $V_{G S}$ can then be substituted into Eq. (7.2) to find $I_{D}$. Ensure $V_{Y}$ exceeds $V_{X}-V_{T H}$ to maintain operation in the saturation region.\n\n```\nExample 7.1\n```\n\nDetermine the bias current of $M_{1}$ in Fig. 7.1, assuming $V_{T H}=0.5 \\mathrm{~V}, \\mu_{n} C_{o x}=$ $100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, W / L=5 / 0.18$, and $\\lambda=0$. What is the maximum allowable value of $R_{D}$ for $M_{1}$ to remain in saturation?\n\nSolution:\n$$\n\\begin{align*}\nV_{X} & =\\frac{R_{2}}{R_{1}+R_{2}} V_{D D}  \\tag{7.8}\\\\\n& =1.286 \\mathrm{~V} . \\tag{7.9}\n\\end{align*}\n$$\n\nWith an initial guess $V_{G S}=1 \\mathrm{~V}$, the voltage drop across $R_{S}$ is $V_{X}-V_{G S}=286 \\mathrm{mV}$, yielding a drain current of $286 \\mu \\mathrm{~A}$. Substituting for $I_{D}$ in Eq. (7.3) gives the new value of $V_{G S}$ as:\n\n$$\n\\begin{align*}\nV_{G S} & =V_{T H}+\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x} \\frac{W}{L}}}  \\tag{7.10}\\\\\n& =0.954 \\mathrm{~V} \\tag{7.11}\n\\end{align*}\n$$\n\nConsequently,\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{V_{X}-V_{G S}}{R_{S}}  \\tag{7.12}\\\\\n& =332 \\mu \\mathrm{~A} \\tag{7.13}\n\\end{align*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\nV_{G S}=0.989 \\mathrm{~V} \\tag{7.14}\n\\end{equation*}\n$$\n\nThis gives $I_{D}=297 \\mu \\mathrm{~A}$. The solutions converge more slowly than those in Chapter 5 for bipolar circuits due to the quadratic $I_{D}-V_{G S}$ relationship. Using Eq. (7.6) avoids lengthy calculations. With $V_{1}=0.36 \\mathrm{~V}$,\n\n$$\n\\begin{equation*}\nV_{G S}=0.974 \\mathrm{~V} \\tag{7.15}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{V_{X}-V_{G S}}{R_{S}}  \\tag{7.16}\\\\\n& =312 \\mu \\mathrm{~A} \\tag{7.17}\n\\end{align*}\n$$\n\nThe maximum allowable $R_{D}$ is found if $V_{Y}=V_{X}-V_{T H}=0.786 \\mathrm{~V}$:\n\n$$\n\\begin{align*}\nR_{D} & =\\frac{V_{D D}-V_{Y}}{I_{D}}  \\tag{7.18}\\\\\n& =3.25 \\mathrm{k} \\Omega \\tag{7.19}\n\\end{align*}\n$$\n\nExercise: Determine the value of $R_{2}$ that places $M_{1}$ at the edge of saturation.\n\nIn the circuit of Example 7.1, assume $M_{1}$ is in saturation with $R_{D}=2.5 \\mathrm{k} \\Omega$ and compute (a) the maximum allowable $W / L$ and (b) the minimum allowable $R_{S}$ (with $W / L=5 / 0.18$). Assume $\\lambda=0$.\n\nSolution (a): As $W / L$ increases, $M_{1}$ can handle more current for a given $V_{G S}$. With $R_{D}=2.5 \\mathrm{k} \\Omega$ and $V_{X}=1.286 \\mathrm{~V}$, the maximum $I_{D}$ is:\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{V_{D D}-V_{Y}}{R_{D}}  \\tag{7.20}\\\\\n& =406 \\mu \\mathrm{~A} . \\tag{7.21}\n\\end{align*}\n$$\n\nThe voltage drop across $R_{S}$ is 406 mV, giving $V_{G S}=1.286 \\mathrm{~V}-0.406 \\mathrm{~V}=0.88 \\mathrm{~V}$. Thus, $M_{1}$ must carry $406 \\mu \\mathrm{~A}$ at $V_{G S}=0.88 \\mathrm{~V}$:\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2}  \\tag{7.22}\\\\\n406 \\mu \\mathrm{~A} & =\\left(50 \\mu \\mathrm{~A} / \\mathrm{V}^{2}\\right) \\frac{W}{L}(0.38 \\mathrm{~V})^{2} \\tag{7.23}\n\\end{align*}\n$$\n\nthus,\n\n$$\n\\begin{equation*}\n\\frac{W}{L}=56.2 \\tag{7.24}\n\\end{equation*}\n$$\n\n(b): With $W / L=5 / 0.18$, the minimum $R_{S}$ for $I_{D}=406 \\mu \\mathrm{~A}$ is found. Since\n\n$$\n\\begin{align*}\nV_{G S} & =V_{T H}+\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x} \\frac{W}{L}}}  \\tag{7.25}\\\\\n& =1.041 \\mathrm{~V} \\tag{7.26}\n\\end{align*}\n$$\n\nthe voltage drop across $R_{S}$ is $V_{X}-V_{G S}=245 \\mathrm{mV}$. Thus,\n\n$$\n\\begin{align*}\nR_{S} & =\\frac{V_{X}-V_{G S}}{I_{D}}  \\tag{7.27}\\\\\n& =604 \\Omega . \\tag{7.28}\n\\end{align*}\n$$\n\nExercise: Repeat the above example if $V_{T H}=0.35 \\mathrm{~V}$.\n\nThe self-biasing technique from Fig. 5.22 can also be applied to MOS amplifiers. As shown in Fig. 7.2, the circuit analysis notes that $M_{1}$ is in saturation (justify this assumption) and the voltage drop across $R_{G}$ is zero. Thus,\n\n$$\n\\begin{equation*}\nI_{D} R_{D}+V_{G S}+R_{S} I_{D}=V_{D D} \\tag{7.29}\n\\end{equation*}\n$$\n\nFinding $V_{G S}$ from this equation and substituting it into Eq. (7.3), we get:\n\n$$\n\\begin{equation*}\nI_{D}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left[V_{D D}-\\left(R_{S}+R_{D}\\right) I_{D}-V_{T H}\\right]^{2} \\tag{7.30}\n\\end{equation*}\n$$\n\nImage Description:\n- Figure 7.2: Self-biased MOS stage\n  - Components:\n    - M1: NMOS transistor, with source (S) at S1, drain (D) at D1, and gate (G) at G1\n    - RG: Resistor, value RG, connected between G1 and D1\n    - RD: Resistor, value RD, connected between D1 and VDD\n    - RS: Resistor, value RS, connected between S1 and GND\n  - Additional Info: The circuit is a self-biased NMOS amplifier with M1 in saturation. The voltage drop across RG is zero, indicating no gate current. The drain current ID flows from VDD through RD and M1 to GND.\n\nFigure 7.2 Self-biased MOS stage.\nNeglecting channel-length modulation, we have:\n\n$$\n\\begin{equation*}\n\\left(R_{S}+R_{D}\\right)^{2} I_{D}^{2}-2\\left[\\left(V_{D D}-V_{T H}\\right)\\left(R_{S}+R_{D}\\right)+\\frac{1}{\\mu_{n} C_{o x} \\frac{W}{L}}\\right] I_{D}+\\left(V_{D D}-V_{T H}\\right)^{2}=0 \\tag{7.31}\n\\end{equation*}\n$$\n\nExample: Calculate the drain current of $M_{1}$ in Fig. 7.3 if $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}$, and $\\lambda=0$. What value of $R_{D}$ is needed to halve $I_{D}$?\nImage Description:\n- Fig. 7.3\n  - Components:\n    - VDD: Voltage source, 1.8V, connected between VDD and GND\n    - RD: Resistor, 1kΩ, connected between VDD and D1\n    - Resistor: 20kΩ, connected between D1 and G1\n    - M1: NMOS transistor, with source (S) at S1, drain (D) at D1, and gate (G) at G1\n    - Resistor: 200Ω, connected between S1 and GND\n  - Additional Info: The circuit is a self-biased NMOS stage with a drain current of 556 μA. The width-to-length ratio (W/L) of the NMOS transistor M1 is 5/0.18.\n\nFigure 7.3 Example of self-biased MOS stage.\nSolution: Eq. (7.31) gives\n\n$$\n\\begin{equation*}\nI_{D}=556 \\mu \\mathrm{~A} \\tag{7.32}\n\\end{equation*}\n$$\n\nTo reduce $I_{D}$ to $278 \\mu \\mathrm{~A}$, solve Eq. (7.31) for $R_{D}$:\n\n$$\n\\begin{equation*}\nR_{D}=2.867 \\mathrm{k} \\Omega \\tag{7.33}\n\\end{equation*}\n```"
},
{
    "text": "Depending on the application, MOS circuits may utilize biasing techniques that differ significantly from those outlined in Chapter 5 for bipolar stages. While many of these techniques exceed the scope of this book and some are discussed in Chapter 5, it remains beneficial to apply certain biasing concepts from Chapter 5 to MOS stages.\n\nImage Description:\n- Figure 7.1: MOS stage with biasing\n  - Components:\n    - R1: Resistor, 4kΩ, connected between VDD and X\n    - R2: Resistor, 10kΩ, connected between X and GND\n    - RS: Resistor, 1kΩ, connected between S1 and GND\n    - RD: Resistor, connected between VDD and Y\n    - M1: NMOS transistor, with S connected to S1, D to Y, and G to X\n    - VDD: Voltage source, 1.8V, connected between VDD and GND\n  - Additional Info: The circuit uses R1 and R2 to set the gate voltage. M1 operates in saturation with RD connected to VDD and RS to ground. The gate voltage is determined by the voltage divider formed by R1 and R2.\n\nConsider the circuit in Fig. 7.1, where the gate voltage is set by R1 and R2. We assume M1 operates in saturation. In most bias calculations, channel-length modulation can be ignored. Given that the gate current is zero, we have:\n\n$$\n\\begin{equation*}\nV_{X}=\\frac{R_{2}}{R_{1}+R_{2}} V_{D D} \\tag{7.1}\n\\end{equation*}\n$$\n\nSince $V_{X}=V_{G S}+I_{D} R_{S}$,\n\n$$\n\\begin{equation*}\n\\frac{R_{2}}{R_{1}+R_{2}} V_{D D}=V_{G S}+I_{D} R_{S} \\tag{7.2}\n\\end{equation*}\n$$\n\nAlso,\n\n$$\n\\begin{equation*}\nI_{D}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2} \\tag{7.3}\n\\end{equation*}\n$$\n\nEquations (7.2) and (7.3) can be solved to find $I_{D}$ and $V_{G S}$, either iteratively or by deriving $I_{D}$ from Eq. (7.2) and substituting it in Eq. (7.3):\n\n$$\n\\begin{equation*}\n\\left(\\frac{R_{2}}{R_{1}+R_{2}} V_{D D}-V_{G S}\\right) \\frac{1}{R_{S}}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2} \\tag{7.4}\n\\end{equation*}\n$$\n\nThus,\n\n$$\n\\begin{align*}\nV_{G S} & =-\\left(V_{1}-V_{T H}\\right)+\\sqrt{\\left(V_{1}-V_{T H}\\right)^{2}-V_{T H}^{2}+\\frac{2 R_{2}}{R_{1}+R_{2}} V_{1} V_{D D}}  \\tag{7.5}\\\\\n& =-\\left(V_{1}-V_{T H}\\right)+\\sqrt{V_{1}^{2}+2 V_{1}\\left(\\frac{R_{2} V_{D D}}{R_{1}+R_{2}}-V_{T H}\\right)} \\tag{7.6}\n\\end{align*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\nV_{1}=\\frac{1}{\\mu_{n} C_{o x} \\frac{W}{L} R_{S}} \\tag{7.7}\n\\end{equation*}\n$$\n\nThis $V_{G S}$ value can then be used in Eq. (7.2) to determine $I_{D}$. For operation in the saturation region, $V_{Y}$ must exceed $V_{X}-V_{T H}$.\n\n```\nExample 7.1\n```\n\nDetermine the bias current of M1 in Fig. 7.1, assuming $V_{T H}=0.5 \\mathrm{~V}, \\mu_{n} C_{o x}=$ $100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, W / L=5 / 0.18$, and $\\lambda=0$. What is the maximum allowable value of RD for M1 to remain in saturation?\n\nSolution:\n$$\n\\begin{align*}\nV_{X} & =\\frac{R_{2}}{R_{1}+R_{2}} V_{D D}  \\tag{7.8}\\\\\n& =1.286 \\mathrm{~V} . \\tag{7.9}\n\\end{align*}\n$$\n\nWith an initial guess of $V_{G S}=1 \\mathrm{~V}$, the voltage drop across RS is $V_{X}-V_{G S}=286 \\mathrm{mV}$, resulting in a drain current of $286 \\mu \\mathrm{~A}$. Substituting $I_{D}$ in Eq. (7.3) gives the new $V_{G S}$ value:\n\n$$\n\\begin{align*}\nV_{G S} & =V_{T H}+\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x} \\frac{W}{L}}}  \\tag{7.10}\\\\\n& =0.954 \\mathrm{~V} \\tag{7.11}\n\\end{align*}\n$$\n\nThus,\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{V_{X}-V_{G S}}{R_{S}}  \\tag{7.12}\\\\\n& =332 \\mu \\mathrm{~A} \\tag{7.13}\n\\end{align*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\nV_{G S}=0.989 \\mathrm{~V} \\tag{7.14}\n\\end{equation*}\n$$\n\nThis results in $I_{D}=297 \\mu \\mathrm{~A}$. The solutions converge more slowly than those in Chapter 5 for bipolar circuits due to the quadratic $I_{D}-V_{G S}$ relationship. Using Eq. (7.6) avoids lengthy calculations. With $V_{1}=0.36 \\mathrm{~V}$,\n\n$$\n\\begin{equation*}\nV_{G S}=0.974 \\mathrm{~V} \\tag{7.15}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{V_{X}-V_{G S}}{R_{S}}  \\tag{7.16}\\\\\n& =312 \\mu \\mathrm{~A} \\tag{7.17}\n\\end{align*}\n$$\n\nThe maximum allowable RD is found if $V_{Y}=V_{X}-V_{T H}=0.786 \\mathrm{~V}$. Thus,\n\n$$\n\\begin{align*}\nR_{D} & =\\frac{V_{D D}-V_{Y}}{I_{D}}  \\tag{7.18}\\\\\n& =3.25 \\mathrm{k} \\Omega \\tag{7.19}\n\\end{align*}\n$$\n\nExercise: Determine the value of R2 that places M1 at the edge of saturation.\n\nIn the circuit of Example 7.1, assume M1 is in saturation with RD=2.5 kΩ. Compute (a) the maximum allowable W/L and (b) the minimum allowable RS (with W/L=5/0.18). Assume $\\lambda=0$.\n\nSolution (a): As W/L increases, M1 can carry more current for a given $V_{G S}$. With RD=2.5 kΩ and $V_{X}=1.286 \\mathrm{~V}$, the maximum $I_{D}$ is:\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{V_{D D}-V_{Y}}{R_{D}}  \\tag{7.20}\\\\\n& =406 \\mu \\mathrm{~A} . \\tag{7.21}\n\\end{align*}\n$$\n\nThe voltage drop across RS is 406 mV, giving $V_{G S}=1.286 \\mathrm{~V}-0.406 \\mathrm{~V}=0.88 \\mathrm{~V}$. Thus, M1 must carry 406 μA with $V_{G S}=0.88 \\mathrm{~V}$:\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2}  \\tag{7.22}\\\\\n406 \\mu \\mathrm{~A} & =\\left(50 \\mu \\mathrm{~A} / \\mathrm{V}^{2}\\right) \\frac{W}{L}(0.38 \\mathrm{~V})^{2} \\tag{7.23}\n\\end{align*}\n$$\n\nyielding\n\n$$\n\\begin{equation*}\n\\frac{W}{L}=56.2 \\tag{7.24}\n\\end{equation*}\n$$\n\n(b) With W/L=5/0.18, the minimum RS for a drain current of 406 μA is found. Since\n\n$$\n\\begin{align*}\nV_{G S} & =V_{T H}+\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x} \\frac{W}{L}}}  \\tag{7.25}\\\\\n& =1.041 \\mathrm{~V} \\tag{7.26}\n\\end{align*}\n$$\n\nthe voltage drop across RS is $V_{X}-V_{G S}=245 \\mathrm{mV}$. Thus,\n\n$$\n\\begin{align*}\nR_{S} & =\\frac{V_{X}-V_{G S}}{I_{D}}  \\tag{7.27}\\\\\n& =604 \\Omega . \\tag{7.28}\n\\end{align*}\n$$\n\nExercise: Repeat the above example with $V_{T H}=0.35 \\mathrm{~V}$.\n\nThe self-biasing technique from Fig. 5.22 can also be applied to MOS amplifiers. As shown in Fig. 7.2, the circuit analysis notes that M1 is in saturation (why?) and the voltage drop across RG is zero. Therefore,\n\n$$\n\\begin{equation*}\nI_{D} R_{D}+V_{G S}+R_{S} I_{D}=V_{D D} \\tag{7.29}\n\\end{equation*}\n$$\n\nSolving for $V_{G S}$ and substituting it in Eq. (7.3) gives\n\n$$\n\\begin{equation*}\nI_{D}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left[V_{D D}-\\left(R_{S}+R_{D}\\right) I_{D}-V_{T H}\\right]^{2} \\tag{7.30}\n\\end{equation*}\n$$\n\nImage Description:\n- Figure 7.2: Self-biased MOS stage\n  - Components:\n    - M1: NMOS transistor, with S connected to s1, D to d1, and G to g1\n    - RG: Resistor, value RG, connected between g1 and d1\n    - RD: Resistor, value RD, connected between d1 and VDD\n    - RS: Resistor, value RS, connected between s1 and GND\n  - Additional Info: The circuit is a self-biased NMOS amplifier with M1 in saturation. The voltage drop across RG is zero, indicating no gate current. The drain current ID flows from VDD through RD and M1 to GND.\n\nFigure 7.2 Self-biased MOS stage.\nNeglecting channel-length modulation, we have\n\n$$\n\\begin{equation*}\n\\left(R_{S}+R_{D}\\right)^{2} I_{D}^{2}-2\\left[\\left(V_{D D}-V_{T H}\\right)\\left(R_{S}+R_{D}\\right)+\\frac{1}{\\mu_{n} C_{o x} \\frac{W}{L}}\\right] I_{D}+\\left(V_{D D}-V_{T H}\\right)^{2}=0 \\tag{7.31}\n\\end{equation*}\n$$\n\nExample: Calculate the drain current of M1 in Fig. 7.3 if $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}$, and $\\lambda=0$. What RD value is needed to halve $I_{D}$?\nImage Description:\n- Fig. 7.3\n  - Components:\n    - VDD: Voltage source, 1.8V, connected between VDD and GND\n    - RD: Resistor, 1kΩ, connected between VDD and d1\n    - Resistor: 20kΩ, connected between d1 and g1\n    - M1: NMOS transistor, with S connected to s1, D to d1, and G to g1\n    - Resistor: 200Ω, connected between s1 and GND\n  - Additional Info: The circuit is a self-biased NMOS stage with a drain current of 556 μA. The width-to-length ratio (W/L) of the NMOS transistor M1 is 5/0.18.\n\nFigure 7.3 Example of self-biased MOS stage.\nSolution: Eq. (7.31) yields\n\n$$\n\\begin{equation*}\nI_{D}=556 \\mu \\mathrm{~A} \\tag{7.32}\n\\end{equation*}\n$$\n\nTo reduce $I_{D}$ to $278 \\mu \\mathrm{~A}$, solve Eq. (7.31) for RD:\n\n$$\n\\begin{equation*}\nR_{D}=2.867 \\mathrm{k} \\Omega \\tag{7.33}\n\\end{equation*}\n```"
},
{
    "text": "Depending on the application, MOS circuits may employ biasing techniques that differ significantly from those outlined in Chapter 5 for bipolar stages. The majority of these techniques exceed the scope of this book, although some are discussed in Chapter 5. Nonetheless, applying certain biasing concepts from Chapter 5 to MOS stages remains instructive.\n\nImage Description:\n- Figure 7.1 illustrates a MOS stage with biasing.\n- Components include:\n  - R1: Resistor, 4kΩ, connected between VDD and X.\n  - R2: Resistor, 10kΩ, connected between X and GND.\n  - RS: Resistor, 1kΩ, connected between S1 and GND.\n  - RD: Resistor, connected between VDD and Y.\n  - M1: NMOS transistor, with source (S) at S1, drain (D) at Y, and gate (G) at X.\n  - VDD: Voltage source, 1.8V, connected between VDD and GND.\n- The circuit utilizes R1 and R2 to set the gate voltage. M1 operates in saturation, with RD connected to VDD and RS to ground. The gate voltage is determined by the voltage divider formed by R1 and R2.\n\nConsider the circuit in Fig. 7.1, where the gate voltage is set by R1 and R2. We assume M1 operates in saturation. In most bias calculations, channel-length modulation can be ignored. Given that the gate current is zero, we have:\n\n$$\n\\begin{equation*}\nV_{X}=\\frac{R_{2}}{R_{1}+R_{2}} V_{D D} \\tag{7.1}\n\\end{equation*}\n$$\n\nSince $V_{X}=V_{G S}+I_{D} R_{S}$,\n\n$$\n\\begin{equation*}\n\\frac{R_{2}}{R_{1}+R_{2}} V_{D D}=V_{G S}+I_{D} R_{S} \\tag{7.2}\n\\end{equation*}\n$$\n\nAlso,\n\n$$\n\\begin{equation*}\nI_{D}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2} \\tag{7.3}\n\\end{equation*}\n$$\n\nEquations (7.2) and (7.3) can be solved to find $I_{D}$ and $V_{G S}$, either iteratively or by deriving $I_{D}$ from Eq. (7.2) and substituting it in Eq. (7.3):\n\n$$\n\\begin{equation*}\n\\left(\\frac{R_{2}}{R_{1}+R_{2}} V_{D D}-V_{G S}\\right) \\frac{1}{R_{S}}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2} \\tag{7.4}\n\\end{equation*}\n$$\n\nThus,\n\n$$\n\\begin{align*}\nV_{G S} & =-\\left(V_{1}-V_{T H}\\right)+\\sqrt{\\left(V_{1}-V_{T H}\\right)^{2}-V_{T H}^{2}+\\frac{2 R_{2}}{R_{1}+R_{2}} V_{1} V_{D D}}  \\tag{7.5}\\\\\n& =-\\left(V_{1}-V_{T H}\\right)+\\sqrt{V_{1}^{2}+2 V_{1}\\left(\\frac{R_{2} V_{D D}}{R_{1}+R_{2}}-V_{T H}\\right)} \\tag{7.6}\n\\end{align*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\nV_{1}=\\frac{1}{\\mu_{n} C_{o x} \\frac{W}{L} R_{S}} \\tag{7.7}\n\\end{equation*}\n$$\n\nThis $V_{G S}$ value can then be substituted into Eq. (7.2) to obtain $I_{D}$. For operation in the saturation region, $V_{Y}$ must exceed $V_{X}-V_{T H}$.\n\n```\nExample 7.1\n```\n\nDetermine the bias current of M1 in Fig. 7.1, assuming $V_{T H}=0.5 \\mathrm{~V}, \\mu_{n} C_{o x}=$ $100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, W / L=5 / 0.18$, and $\\lambda=0$. What is the maximum allowable value of RD for M1 to remain in saturation?\n\nSolution:\n$$\n\\begin{align*}\nV_{X} & =\\frac{R_{2}}{R_{1}+R_{2}} V_{D D}  \\tag{7.8}\\\\\n& =1.286 \\mathrm{~V} . \\tag{7.9}\n\\end{align*}\n$$\n\nWith an initial guess of $V_{G S}=1 \\mathrm{~V}$, the voltage drop across RS is $V_{X}-V_{G S}=286 \\mathrm{mV}$, yielding a drain current of $286 \\mu \\mathrm{~A}$. Substituting $I_{D}$ in Eq. (7.3) gives the new $V_{G S}$ value as:\n\n$$\n\\begin{align*}\nV_{G S} & =V_{T H}+\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x} \\frac{W}{L}}}  \\tag{7.10}\\\\\n& =0.954 \\mathrm{~V} \\tag{7.11}\n\\end{align*}\n$$\n\nConsequently,\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{V_{X}-V_{G S}}{R_{S}}  \\tag{7.12}\\\\\n& =332 \\mu \\mathrm{~A} \\tag{7.13}\n\\end{align*}\n$$\n\nThus,\n\n$$\n\\begin{equation*}\nV_{G S}=0.989 \\mathrm{~V} \\tag{7.14}\n\\end{equation*}\n$$\n\nyielding $I_{D}=297 \\mu \\mathrm{~A}$. The solutions converge more slowly than those in Chapter 5 for bipolar circuits due to the quadratic $I_{D}-V_{G S}$ relationship. Using Eq. (7.6) avoids lengthy calculations. With $V_{1}=0.36 \\mathrm{~V}$,\n\n$$\n\\begin{equation*}\nV_{G S}=0.974 \\mathrm{~V} \\tag{7.15}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{V_{X}-V_{G S}}{R_{S}}  \\tag{7.16}\\\\\n& =312 \\mu \\mathrm{~A} \\tag{7.17}\n\\end{align*}\n$$\n\nThe maximum allowable RD is found when $V_{Y}=V_{X}-V_{T H}=0.786 \\mathrm{~V}$:\n\n$$\n\\begin{align*}\nR_{D} & =\\frac{V_{D D}-V_{Y}}{I_{D}}  \\tag{7.18}\\\\\n& =3.25 \\mathrm{k} \\Omega \\tag{7.19}\n\\end{align*}\n$$\n\nExercise: Determine the value of R2 that places M1 at the edge of saturation.\n\nIn the circuit of Example 7.1, assume M1 is in saturation with RD=2.5 kΩ. Compute (a) the maximum allowable W/L and (b) the minimum allowable RS (with W/L=5/0.18). Assume $\\lambda=0$.\n\nSolution (a): As W/L increases, M1 can carry more current for a given $V_{G S}$. With RD=2.5 kΩ and $V_{X}=1.286 \\mathrm{~V}$, the maximum $I_{D}$ is:\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{V_{D D}-V_{Y}}{R_{D}}  \\tag{7.20}\\\\\n& =406 \\mu \\mathrm{~A} . \\tag{7.21}\n\\end{align*}\n$$\n\nThe voltage drop across RS is 406 mV, giving $V_{G S}=1.286 \\mathrm{~V}-0.406 \\mathrm{~V}=0.88 \\mathrm{~V}$. Thus, M1 must carry 406 μA with $V_{G S}=0.88 \\mathrm{~V}$:\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2}  \\tag{7.22}\\\\\n406 \\mu \\mathrm{~A} & =\\left(50 \\mu \\mathrm{~A} / \\mathrm{V}^{2}\\right) \\frac{W}{L}(0.38 \\mathrm{~V})^{2} \\tag{7.23}\n\\end{align*}\n$$\n\nyielding:\n\n$$\n\\begin{equation*}\n\\frac{W}{L}=56.2 \\tag{7.24}\n\\end{equation*}\n$$\n\n(b) With W/L=5/0.18, the minimum RS for a drain current of 406 μA is found as follows:\n\n$$\n\\begin{align*}\nV_{G S} & =V_{T H}+\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x} \\frac{W}{L}}}  \\tag{7.25}\\\\\n& =1.041 \\mathrm{~V} \\tag{7.26}\n\\end{align*}\n$$\n\nThe voltage drop across RS is $V_{X}-V_{G S}=245 \\mathrm{mV}$, so:\n\n$$\n\\begin{align*}\nR_{S} & =\\frac{V_{X}-V_{G S}}{I_{D}}  \\tag{7.27}\\\\\n& =604 \\Omega . \\tag{7.28}\n\\end{align*}\n$$\n\nExercise: Repeat the above example with $V_{T H}=0.35 \\mathrm{~V}$.\n\nThe self-biasing technique from Fig. 5.22 can also be applied to MOS amplifiers. As shown in Fig. 7.2, the circuit analysis notes that M1 is in saturation (why?) and the voltage drop across RG is zero. Thus,\n\n$$\n\\begin{equation*}\nI_{D} R_{D}+V_{G S}+R_{S} I_{D}=V_{D D} \\tag{7.29}\n\\end{equation*}\n$$\n\nFinding $V_{G S}$ from this equation and substituting it in Eq. (7.3) gives:\n\n$$\n\\begin{equation*}\nI_{D}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left[V_{D D}-\\left(R_{S}+R_{D}\\right) I_{D}-V_{T H}\\right]^{2} \\tag{7.30}\n\\end{equation*}\n$$\n\nImage Description:\n- Figure 7.2 depicts a self-biased MOS stage.\n- Components include:\n  - M1: NMOS transistor, with source (S) at s1, drain (D) at d1, and gate (G) at g1.\n  - RG: Resistor, value RG, connected between g1 and d1.\n  - RD: Resistor, value RD, connected between d1 and VDD.\n  - RS: Resistor, value RS, connected between s1 and GND.\n- The circuit is a self-biased NMOS amplifier with M1 in saturation. The voltage drop across RG is zero, indicating no gate current. The drain current ID flows from VDD through RD and M1 to GND.\n\nFigure 7.2 Self-biased MOS stage.\nNeglecting channel-length modulation, we have:\n\n$$\n\\begin{equation*}\n\\left(R_{S}+R_{D}\\right)^{2} I_{D}^{2}-2\\left[\\left(V_{D D}-V_{T H}\\right)\\left(R_{S}+R_{D}\\right)+\\frac{1}{\\mu_{n} C_{o x} \\frac{W}{L}}\\right] I_{D}+\\left(V_{D D}-V_{T H}\\right)^{2}=0 \\tag{7.31}\n\\end{equation*}\n$$\n\nExample: Calculate the drain current of M1 in Fig. 7.3 if $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}$, and $\\lambda=0$. What RD value is needed to halve $I_{D}$?\nImage Description:\n- Figure 7.3 shows a self-biased MOS stage.\n- Components include:\n  - VDD: Voltage source, 1.8V, connected between VDD and GND.\n  - RD: Resistor, 1kΩ, connected between VDD and d1.\n  - Resistor, 20kΩ, connected between d1 and g1.\n  - M1: NMOS transistor, with source (S) at s1, drain (D) at d1, and gate (G) at g1.\n  - Resistor, 200Ω, connected between s1 and GND.\n- The circuit is a self-biased NMOS stage with a drain current of 556 μA. The width-to-length ratio (W/L) of the NMOS transistor M1 is 5/0.18.\n\nFigure 7.3 Example of self-biased MOS stage.\nSolution: Eq. (7.31) gives\n\n$$\n\\begin{equation*}\nI_{D}=556 \\mu \\mathrm{~A} \\tag{7.32}\n\\end{equation*}\n$$\n\nTo reduce $I_{D}$ to 278 μA, solve Eq. (7.31) for RD:\n\n$$\n\\begin{equation*}\nR_{D}=2.867 \\mathrm{k} \\Omega \\tag{7.33}\n\\end{equation*}\n```"
},
{
    "text": "Depending on the application, MOS circuits may employ biasing techniques that differ significantly from those detailed in Chapter 5 for bipolar stages. While most of these techniques are beyond the scope of this book, some are covered in Chapter 5. Nevertheless, it is beneficial to apply certain biasing concepts from Chapter 5 to MOS stages.\n\nImage Description:\n- Figure 7.1: MOS stage with biasing\n- Components:\n  - R1: Resistor, 4kΩ, connected between VDD and X\n  - R2: Resistor, 10kΩ, connected between X and GND\n  - RS: Resistor, 1kΩ, connected between S1 and GND\n  - RD: Resistor, connected between VDD and Y\n  - M1: NMOS transistor, with S connected to S1, D to Y, and G to X\n  - VDD: Voltage source, 1.8V, connected between VDD and GND\n- Additional Info: The circuit is a MOS stage with biasing, using resistors R1 and R2 to set the gate voltage. M1 operates in saturation, with RD connected to VDD and RS to ground. The gate voltage is determined by the voltage divider formed by R1 and R2.\n\nFigure 7.1 illustrates a MOS stage with biasing. In this circuit, the gate voltage is set by R1 and R2. We assume M1 operates in saturation. For most bias calculations, channel-length modulation can be ignored. Given that the gate current is zero, we have:\n\n$$\n\\begin{equation*}\nV_{X}=\\frac{R_{2}}{R_{1}+R_{2}} V_{D D} \\tag{7.1}\n\\end{equation*}\n$$\n\nSince $V_{X}=V_{G S}+I_{D} R_{S}$,\n\n$$\n\\begin{equation*}\n\\frac{R_{2}}{R_{1}+R_{2}} V_{D D}=V_{G S}+I_{D} R_{S} \\tag{7.2}\n\\end{equation*}\n$$\n\nAdditionally,\n\n$$\n\\begin{equation*}\nI_{D}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2} \\tag{7.3}\n\\end{equation*}\n$$\n\nBy solving Equations (7.2) and (7.3), we can determine $I_{D}$ and $V_{G S}$, either through iteration or by finding $I_{D}$ from Eq. (7.2) and substituting it in Eq. (7.3):\n\n$$\n\\begin{equation*}\n\\left(\\frac{R_{2}}{R_{1}+R_{2}} V_{D D}-V_{G S}\\right) \\frac{1}{R_{S}}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2} \\tag{7.4}\n\\end{equation*}\n$$\n\nThus,\n\n$$\n\\begin{align*}\nV_{G S} & =-\\left(V_{1}-V_{T H}\\right)+\\sqrt{\\left(V_{1}-V_{T H}\\right)^{2}-V_{T H}^{2}+\\frac{2 R_{2}}{R_{1}+R_{2}} V_{1} V_{D D}}  \\tag{7.5}\\\\\n& =-\\left(V_{1}-V_{T H}\\right)+\\sqrt{V_{1}^{2}+2 V_{1}\\left(\\frac{R_{2} V_{D D}}{R_{1}+R_{2}}-V_{T H}\\right)} \\tag{7.6}\n\\end{align*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\nV_{1}=\\frac{1}{\\mu_{n} C_{o x} \\frac{W}{L} R_{S}} \\tag{7.7}\n\\end{equation*}\n$$\n\nThis $V_{G S}$ value can then be used in Eq. (7.2) to find $I_{D}$. To ensure operation in the saturation region, $V_{Y}$ must exceed $V_{X}-V_{T H}$.\n\n```\nExample 7.1\n```\n\nDetermine the bias current of M1 in Fig. 7.1, assuming $V_{T H}=0.5 \\mathrm{~V}, \\mu_{n} C_{o x}=$ $100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, W / L=5 / 0.18$, and $\\lambda=0$. What is the maximum allowable value of RD for M1 to remain in saturation?\n\nSolution:\n$$\n\\begin{align*}\nV_{X} & =\\frac{R_{2}}{R_{1}+R_{2}} V_{D D}  \\tag{7.8}\\\\\n& =1.286 \\mathrm{~V} . \\tag{7.9}\n\\end{align*}\n$$\n\nWith an initial guess of $V_{G S}=1 \\mathrm{~V}$, the voltage drop across RS is $V_{X}-V_{G S}=286 \\mathrm{mV}$, yielding a drain current of $286 \\mu \\mathrm{~A}$. Substituting this $I_{D}$ in Eq. (7.3) gives the new $V_{G S}$ value as:\n\n$$\n\\begin{align*}\nV_{G S} & =V_{T H}+\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x} \\frac{W}{L}}}  \\tag{7.10}\\\\\n& =0.954 \\mathrm{~V} \\tag{7.11}\n\\end{align*}\n$$\n\nConsequently,\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{V_{X}-V_{G S}}{R_{S}}  \\tag{7.12}\\\\\n& =332 \\mu \\mathrm{~A} \\tag{7.13}\n\\end{align*}\n$$\n\nThus,\n\n$$\n\\begin{equation*}\nV_{G S}=0.989 \\mathrm{~V} \\tag{7.14}\n\\end{equation*}\n$$\n\nResulting in $I_{D}=297 \\mu \\mathrm{~A}$.\nThe solutions converge more slowly than those in Chapter 5 for bipolar circuits due to the quadratic $I_{D}-V_{G S}$ relationship. To avoid extensive calculations, we use Eq. (7.6). With $V_{1}=0.36 \\mathrm{~V}$,\n\n$$\n\\begin{equation*}\nV_{G S}=0.974 \\mathrm{~V} \\tag{7.15}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{V_{X}-V_{G S}}{R_{S}}  \\tag{7.16}\\\\\n& =312 \\mu \\mathrm{~A} \\tag{7.17}\n\\end{align*}\n$$\n\nThe maximum allowable RD is found when $V_{Y}=V_{X}-V_{T H}=0.786 \\mathrm{~V}$:\n\n$$\n\\begin{align*}\nR_{D} & =\\frac{V_{D D}-V_{Y}}{I_{D}}  \\tag{7.18}\\\\\n& =3.25 \\mathrm{k} \\Omega \\tag{7.19}\n\\end{align*}\n$$\n\nExercise: Determine the value of R2 that places M1 at the edge of saturation.\n\nIn the circuit of Example 7.1, with M1 in saturation and RD=2.5 kΩ, compute (a) the maximum allowable W/L and (b) the minimum allowable RS (with W/L=5/0.18). Assume $\\lambda=0$.\n\nSolution (a): As W/L increases, M1 can carry more current for a given $V_{G S}$. With RD=2.5 kΩ and $V_{X}=1.286 \\mathrm{~V}$, the maximum $I_{D}$ is:\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{V_{D D}-V_{Y}}{R_{D}}  \\tag{7.20}\\\\\n& =406 \\mu \\mathrm{~A} . \\tag{7.21}\n\\end{align*}\n$$\n\nThe voltage drop across RS is 406 mV, giving $V_{G S}=1.286 \\mathrm{~V}-0.406 \\mathrm{~V}=0.88 \\mathrm{~V}$. Thus, M1 must carry 406 μA with $V_{G S}=0.88 \\mathrm{~V}$:\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2}  \\tag{7.22}\\\\\n406 \\mu \\mathrm{~A} & =\\left(50 \\mu \\mathrm{~A} / \\mathrm{V}^{2}\\right) \\frac{W}{L}(0.38 \\mathrm{~V})^{2} \\tag{7.23}\n\\end{align*}\n$$\n\nyielding\n\n$$\n\\begin{equation*}\n\\frac{W}{L}=56.2 \\tag{7.24}\n\\end{equation*}\n$$\n\n(b) With W/L=5/0.18, the minimum RS for a drain current of 406 μA is found as follows:\n\n$$\n\\begin{align*}\nV_{G S} & =V_{T H}+\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x} \\frac{W}{L}}}  \\tag{7.25}\\\\\n& =1.041 \\mathrm{~V} \\tag{7.26}\n\\end{align*}\n$$\n\nThe voltage drop across RS is $V_{X}-V_{G S}=245 \\mathrm{mV}$, so\n\n$$\n\\begin{align*}\nR_{S} & =\\frac{V_{X}-V_{G S}}{I_{D}}  \\tag{7.27}\\\\\n& =604 \\Omega . \\tag{7.28}\n\\end{align*}\n$$\n\nExercise: Repeat the above example with $V_{T H}=0.35 \\mathrm{~V}$.\n\nThe self-biasing technique from Fig. 5.22 can also be applied to MOS amplifiers. As shown in Fig. 7.2, the analysis involves noting that M1 is in saturation (why?) and the voltage drop across RG is zero. Thus,\n\n$$\n\\begin{equation*}\nI_{D} R_{D}+V_{G S}+R_{S} I_{D}=V_{D D} \\tag{7.29}\n\\end{equation*}\n$$\n\nFinding $V_{G S}$ from this equation and substituting it in Eq. (7.3) gives:\n\n$$\n\\begin{equation*}\nI_{D}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left[V_{D D}-\\left(R_{S}+R_{D}\\right) I_{D}-V_{T H}\\right]^{2} \\tag{7.30}\n\\end{equation*}\n$$\n\nImage Description:\n- Figure 7.2: Self-biased MOS stage\n- Components:\n  - M1: NMOS transistor, with S connected to s1, D to d1, and G to g1\n  - RG: Resistor, value RG, connected between g1 and d1\n  - RD: Resistor, value RD, connected between d1 and VDD\n  - RS: Resistor, value RS, connected between s1 and GND\n- Additional Info: The circuit is a self-biased NMOS amplifier with M1 in saturation. The voltage drop across RG is zero, indicating no gate current. The drain current ID flows from VDD through RD and M1 to GND.\n\nFigure 7.2 illustrates a self-biased MOS stage. Here, M1 operates in saturation, and the voltage drop across RG is zero, indicating no gate current. The drain current ID flows from VDD through RD and M1 to GND.\n\nwhere channel-length modulation is neglected. It follows that\n\n$$\n\\begin{equation*}\n\\left(R_{S}+R_{D}\\right)^{2} I_{D}^{2}-2\\left[\\left(V_{D D}-V_{T H}\\right)\\left(R_{S}+R_{D}\\right)+\\frac{1}{\\mu_{n} C_{o x} \\frac{W}{L}}\\right] I_{D}+\\left(V_{D D}-V_{T H}\\right)^{2}=0 \\tag{7.31}\n\\end{equation*}\n$$\n\nExample: Calculate the drain current of M1 in Fig. 7.3 if $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}$, and $\\lambda=0$. What value of RD is needed to reduce ID by half?\n\nImage Description:\n- Fig. 7.3\n- Components:\n  - VDD: Voltage source, 1.8V, connected between VDD and GND\n  - RD: Resistor, 1kΩ, connected between VDD and d1\n  - Resistor: 20kΩ, connected between d1 and g1\n  - M1: NMOS transistor, with S connected to s1, D to d1, and G to g1\n  - Resistor: 200Ω, connected between s1 and GND\n- Additional Info: The circuit is a self-biased NMOS stage with a drain current of 556 μA. The width-to-length ratio (W/L) of the NMOS transistor M1 is 5/0.18.\n\nFigure 7.3 shows a self-biased NMOS stage with a drain current of 556 μA. The W/L ratio of M1 is 5/0.18.\n\nSolution: Equation (7.31) yields\n\n$$\n\\begin{equation*}\nI_{D}=556 \\mu \\mathrm{~A} \\tag{7.32}\n\\end{equation*}\n$$\n\nTo reduce ID to 278 μA, solve Eq. (7.31) for RD:\n\n$$\n\\begin{equation*}\nR_{D}=2.867 \\mathrm{k} \\Omega \\tag{7.33}\n\\end{equation*}\n```"
},
{
    "text": "Depending on the application, MOS circuits may utilize biasing techniques that differ significantly from those outlined in Chapter 5 for bipolar stages. Most of these techniques exceed the scope of this book, though some are discussed in Chapter 5. Nevertheless, it is beneficial to apply certain biasing concepts from Chapter 5 to MOS stages.\n\nimage_name: Figure 7.1 MOS stage with biasing\ndescription:\n[\nname: R1, type: Resistor, value: 4kΩ, ports: {N1: VDD, N2: X}\nname: R2, type: Resistor, value: 10kΩ, ports: {N1: X, N2: GND}\nname: RS, type: Resistor, value: 1kΩ, ports: {N1: S1, N2: GND}\nname: RD, type: Resistor, ports: {N1: VDD, N2: Y}\nname: M1, type: NMOS, ports: {S: S1, D: Y, G: X}\nname: VDD, type: VoltageSource, value: 1.8V, ports: {Np: VDD, Nn: GND}\n]\nextrainfo: The circuit is a MOS stage with biasing, employing resistors R1 and R2 to set the gate voltage. M1 is an NMOS transistor operating in saturation, with RD connected to VDD and RS to ground. The gate voltage is determined by the voltage divider formed by R1 and R2.\n\nFigure 7.1 MOS stage with biasing.\nConsider the circuit depicted in Fig. 7.1, where the gate voltage is established by $R_{1}$ and $R_{2}$. We assume $M_{1}$ operates in saturation. Additionally, in most bias calculations, channel-length modulation can be disregarded. Noting that the gate current is zero, we have\n\n$$\n\\begin{equation*}\nV_{X}=\\frac{R_{2}}{R_{1}+R_{2}} V_{D D} \\tag{7.1}\n\\end{equation*}\n$$\n\nSince $V_{X}=V_{G S}+I_{D} R_{S}$,\n\n$$\n\\begin{equation*}\n\\frac{R_{2}}{R_{1}+R_{2}} V_{D D}=V_{G S}+I_{D} R_{S} \\tag{7.2}\n\\end{equation*}\n$$\n\nAlso,\n\n$$\n\\begin{equation*}\nI_{D}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2} \\tag{7.3}\n\\end{equation*}\n$$\n\nEquations (7.2) and (7.3) can be solved to determine $I_{D}$ and $V_{G S}$, either iteratively or by finding $I_{D}$ from Eq. (7.2) and substituting it in Eq. (7.3):\n\n$$\n\\begin{equation*}\n\\left(\\frac{R_{2}}{R_{1}+R_{2}} V_{D D}-V_{G S}\\right) \\frac{1}{R_{S}}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2} \\tag{7.4}\n\\end{equation*}\n$$\n\nThat is,\n\n$$\n\\begin{align*}\nV_{G S} & =-\\left(V_{1}-V_{T H}\\right)+\\sqrt{\\left(V_{1}-V_{T H}\\right)^{2}-V_{T H}^{2}+\\frac{2 R_{2}}{R_{1}+R_{2}} V_{1} V_{D D}}  \\tag{7.5}\\\\\n& =-\\left(V_{1}-V_{T H}\\right)+\\sqrt{V_{1}^{2}+2 V_{1}\\left(\\frac{R_{2} V_{D D}}{R_{1}+R_{2}}-V_{T H}\\right)} \\tag{7.6}\n\\end{align*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\nV_{1}=\\frac{1}{\\mu_{n} C_{o x} \\frac{W}{L} R_{S}} \\tag{7.7}\n\\end{equation*}\n$$\n\nThis value of $V_{G S}$ can then be substituted in Eq. (7.2) to obtain $I_{D}$. Of course, $V_{Y}$ must exceed $V_{X}-V_{T H}$ to ensure operation in the saturation region.\n\n```\nExample\n7.1\n```\n\nDetermine the bias current of $M_{1}$ in Fig. 7.1 assuming $V_{T H}=0.5 \\mathrm{~V}, \\mu_{n} C_{o x}=$ $100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, W / L=5 / 0.18$, and $\\lambda=0$. What is the maximum allowable value of $R_{D}$ for $M_{1}$ to remain in saturation?\n\nSolution We have\n\n$$\n\\begin{align*}\nV_{X} & =\\frac{R_{2}}{R_{1}+R_{2}} V_{D D}  \\tag{7.8}\\\\\n& =1.286 \\mathrm{~V} . \\tag{7.9}\n\\end{align*}\n$$\n\nWith an initial guess $V_{G S}=1 \\mathrm{~V}$, the voltage drop across $R_{S}$ can be expressed as $V_{X}-V_{G S}=286 \\mathrm{mV}$, yielding a drain current of $286 \\mu \\mathrm{~A}$. Substituting for $I_{D}$ in Eq. (7.3) gives the new value of $V_{G S}$ as\n\n$$\n\\begin{align*}\nV_{G S} & =V_{T H}+\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x} \\frac{W}{L}}}  \\tag{7.10}\\\\\n& =0.954 \\mathrm{~V} \\tag{7.11}\n\\end{align*}\n$$\n\nConsequently,\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{V_{X}-V_{G S}}{R_{S}}  \\tag{7.12}\\\\\n& =332 \\mu \\mathrm{~A} \\tag{7.13}\n\\end{align*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\nV_{G S}=0.989 \\mathrm{~V} \\tag{7.14}\n\\end{equation*}\n$$\n\nThis gives $I_{D}=297 \\mu \\mathrm{~A}$.\nAs seen from the iterations, the solutions converge more slowly than those encountered in Chapter 5 for bipolar circuits. This is due to the quadratic (rather than exponential) $I_{D}-V_{G S}$ dependence. We may therefore utilize the exact result in Eq. (7.6) to avoid lengthy calculations. Since $V_{1}=0.36 \\mathrm{~V}$,\n\n$$\n\\begin{equation*}\nV_{G S}=0.974 \\mathrm{~V} \\tag{7.15}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{V_{X}-V_{G S}}{R_{S}}  \\tag{7.16}\\\\\n& =312 \\mu \\mathrm{~A} \\tag{7.17}\n\\end{align*}\n$$\n\nThe maximum allowable value of $R_{D}$ is obtained if $V_{Y}=V_{X}-V_{T H}=0.786 \\mathrm{~V}$. That is,\n\n$$\n\\begin{align*}\nR_{D} & =\\frac{V_{D D}-V_{Y}}{I_{D}}  \\tag{7.18}\\\\\n& =3.25 \\mathrm{k} \\Omega \\tag{7.19}\n\\end{align*}\n$$\n\nExercise What is the value of $R_{2}$ that places $M_{1}$ at the edge of saturation?\n\nIn the circuit of Example 7.1, assume $M_{1}$ is in saturation and $R_{D}=2.5 \\mathrm{k} \\Omega$ and compute (a) the maximum allowable value of $W / L$ and (b) the minimum allowable value of $R_{S}$ (with $W / L=5 / 0.18$ ). Assume $\\lambda=0$.\n\nSolution (a) As $W / L$ increases, $M_{1}$ can conduct a higher current for a given $V_{G S}$. With $R_{D}=2.5 \\mathrm{k} \\Omega$ and $V_{X}=1.286 \\mathrm{~V}$, the maximum allowable $I_{D}$ is\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{V_{D D}-V_{Y}}{R_{D}}  \\tag{7.20}\\\\\n& =406 \\mu \\mathrm{~A} . \\tag{7.21}\n\\end{align*}\n$$\n\nThe voltage drop across $R_{S}$ is then 406 mV, resulting in $V_{G S}=1.286 \\mathrm{~V}-$ $0.406 \\mathrm{~V}=0.88 \\mathrm{~V}$. Thus, $M_{1}$ must carry a current of $406 \\mu \\mathrm{~A}$ with $V_{G S}=0.88 \\mathrm{~V}$ :\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2}  \\tag{7.22}\\\\\n406 \\mu \\mathrm{~A} & =\\left(50 \\mu \\mathrm{~A} / \\mathrm{V}^{2}\\right) \\frac{W}{L}(0.38 \\mathrm{~V})^{2} \\tag{7.23}\n\\end{align*}\n$$\n\nthus,\n\n$$\n\\begin{equation*}\n\\frac{W}{L}=56.2 \\tag{7.24}\n\\end{equation*}\n$$\n\n(b) With $W / L=5 / 0.18$, the minimum allowable $R_{S}$ for a drain current of $406 \\mu \\mathrm{~A}$ is determined. Since\n\n$$\n\\begin{align*}\nV_{G S} & =V_{T H}+\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x} \\frac{W}{L}}}  \\tag{7.25}\\\\\n& =1.041 \\mathrm{~V} \\tag{7.26}\n\\end{align*}\n$$\n\nthe voltage drop across $R_{S}$ is $V_{X}-V_{G S}=245 \\mathrm{mV}$. It follows that\n\n$$\n\\begin{align*}\nR_{S} & =\\frac{V_{X}-V_{G S}}{I_{D}}  \\tag{7.27}\\\\\n& =604 \\Omega . \\tag{7.28}\n\\end{align*}\n$$\n\nExercise Repeat the above example if $V_{T H}=0.35 \\mathrm{~V}$.\n\nThe self-biasing technique illustrated in Fig. 5.22 can also be applied to MOS amplifiers. As shown in Fig. 7.2, the circuit can be analyzed by noting that $M_{1}$ is in saturation (why?) and the voltage drop across $R_{G}$ is zero. Thus,\n\n$$\n\\begin{equation*}\nI_{D} R_{D}+V_{G S}+R_{S} I_{D}=V_{D D} \\tag{7.29}\n\\end{equation*}\n$$\n\nFinding $V_{G S}$ from this equation and substituting it in Eq. (7.3), we have\n\n$$\n\\begin{equation*}\nI_{D}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left[V_{D D}-\\left(R_{S}+R_{D}\\right) I_{D}-V_{T H}\\right]^{2} \\tag{7.30}\n\\end{equation*}\n$$\n\nimage_name: Figure 7.2 Self-biased MOS stage\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1, D: d1, G: g1}\nname: RG, type: Resistor, value: RG, ports: {N1: g1, N2: d1}\nname: RD, type: Resistor, value: RD, ports: {N1: d1, N2: VDD}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\n]\nextrainfo: The circuit is a self-biased NMOS amplifier with M1 in saturation. The voltage drop across RG is zero, indicating no gate current. The drain current ID flows from VDD through RD and M1 to GND.\n\nFigure 7.2 Self-biased MOS stage.\nwhere channel-length modulation is neglected. It follows that\n\n$$\n\\begin{equation*}\n\\left(R_{S}+R_{D}\\right)^{2} I_{D}^{2}-2\\left[\\left(V_{D D}-V_{T H}\\right)\\left(R_{S}+R_{D}\\right)+\\frac{1}{\\mu_{n} C_{o x} \\frac{W}{L}}\\right] I_{D}+\\left(V_{D D}-V_{T H}\\right)^{2}=0 \\tag{7.31}\n\\end{equation*}\n$$\n\nExample $\\quad$ Calculate the drain current of $M_{1}$ in Fig. 7.3 if $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}$, and 7.3 $\\lambda=0$. What value of $R_{D}$ is necessary to reduce $I_{D}$ by a factor of two?\nimage_name: Fig. 7.3\ndescription:\n[\nname: VDD, type: VoltageSource, value: 1.8V, ports: {Np: VDD, Nn: GND}\nname: RD, type: Resistor, value: 1kΩ, ports: {N1: VDD, N2: d1}\nname: Resistor, type: Resistor, value: 20kΩ, ports: {N1: d1, N2: g1}\nname: M1, type: NMOS, ports: {S: s1, D: d1, G: g1}\nname: Resistor, type: Resistor, value: 200Ω, ports: {N1: s1, N2: GND}\n]\nextrainfo: The circuit is a self-biased NMOS stage with a drain current of 556 μA. The width-to-length ratio (W/L) of the NMOS transistor M1 is 5/0.18.\n\nFigure 7.3 Example of self-biased MOS stage.\nSolution Equation (7.31) gives\n\n$$\n\\begin{equation*}\nI_{D}=556 \\mu \\mathrm{~A} \\tag{7.32}\n\\end{equation*}\n$$\n\nTo reduce $I_{D}$ to $278 \\mu \\mathrm{~A}$, we solve Eq. (7.31) for $R_{D}$ :\n\n$$\n\\begin{equation*}\nR_{D}=2.867 \\mathrm{k} \\Omega \\tag{7.33}\n\\end{equation*}\n```"
},
{
    "text": "Depending on the application, MOS circuits may employ biasing techniques that differ significantly from those detailed in Chapter 5 for bipolar stages. Most of these techniques exceed the scope of this book, though some are covered in Chapter 5. Nevertheless, it is beneficial to apply certain biasing concepts from Chapter 5 to MOS stages.\n\nimage_name: Figure 7.1 MOS stage with biasing\ndescription:\n[\nname: R1, type: Resistor, value: 4kΩ, ports: {N1: VDD, N2: X}\nname: R2, type: Resistor, value: 10kΩ, ports: {N1: X, N2: GND}\nname: RS, type: Resistor, value: 1kΩ, ports: {N1: S1, N2: GND}\nname: RD, type: Resistor, ports: {N1: VDD, N2: Y}\nname: M1, type: NMOS, ports: {S: S1, D: Y, G: X}\nname: VDD, type: VoltageSource, value: 1.8V, ports: {Np: VDD, Nn: GND}\n]\nextrainfo: The circuit is a MOS stage with biasing, utilizing resistors R1 and R2 to establish the gate voltage. M1 is an NMOS transistor operating in saturation, with RD connected to VDD and RS to ground. The gate voltage is determined by the voltage divider formed by R1 and R2.\n\nFigure 7.1 MOS stage with biasing.\nConsider the circuit depicted in Fig. 7.1, where the gate voltage is set by $R_{1}$ and $R_{2}$. We assume $M_{1}$ operates in saturation. Additionally, in most bias calculations, channel-length modulation can be disregarded. Noting that the gate current is zero, we have\n\n$$\n\\begin{equation*}\nV_{X}=\\frac{R_{2}}{R_{1}+R_{2}} V_{D D} \\tag{7.1}\n\\end{equation*}\n$$\n\nSince $V_{X}=V_{G S}+I_{D} R_{S}$,\n\n$$\n\\begin{equation*}\n\\frac{R_{2}}{R_{1}+R_{2}} V_{D D}=V_{G S}+I_{D} R_{S} \\tag{7.2}\n\\end{equation*}\n$$\n\nAlso,\n\n$$\n\\begin{equation*}\nI_{D}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2} \\tag{7.3}\n\\end{equation*}\n$$\n\nEquations (7.2) and (7.3) can be solved to determine $I_{D}$ and $V_{G S}$, either through iteration or by finding $I_{D}$ from Eq. (7.2) and substituting it in Eq. (7.3):\n\n$$\n\\begin{equation*}\n\\left(\\frac{R_{2}}{R_{1}+R_{2}} V_{D D}-V_{G S}\\right) \\frac{1}{R_{S}}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2} \\tag{7.4}\n\\end{equation*}\n$$\n\nThat is,\n\n$$\n\\begin{align*}\nV_{G S} & =-\\left(V_{1}-V_{T H}\\right)+\\sqrt{\\left(V_{1}-V_{T H}\\right)^{2}-V_{T H}^{2}+\\frac{2 R_{2}}{R_{1}+R_{2}} V_{1} V_{D D}}  \\tag{7.5}\\\\\n& =-\\left(V_{1}-V_{T H}\\right)+\\sqrt{V_{1}^{2}+2 V_{1}\\left(\\frac{R_{2} V_{D D}}{R_{1}+R_{2}}-V_{T H}\\right)} \\tag{7.6}\n\\end{align*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\nV_{1}=\\frac{1}{\\mu_{n} C_{o x} \\frac{W}{L} R_{S}} \\tag{7.7}\n\\end{equation*}\n$$\n\nThis value of $V_{G S}$ can then be substituted in Eq. (7.2) to obtain $I_{D}$. Of course, $V_{Y}$ must exceed $V_{X}-V_{T H}$ to ensure operation in the saturation region.\n\n```\nExample\n7.1\n```\n\nDetermine the bias current of $M_{1}$ in Fig. 7.1 assuming $V_{T H}=0.5 \\mathrm{~V}, \\mu_{n} C_{o x}=$ $100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, W / L=5 / 0.18$, and $\\lambda=0$. What is the maximum allowable value of $R_{D}$ for $M_{1}$ to remain in saturation?\n\nSolution We have\n\n$$\n\\begin{align*}\nV_{X} & =\\frac{R_{2}}{R_{1}+R_{2}} V_{D D}  \\tag{7.8}\\\\\n& =1.286 \\mathrm{~V} . \\tag{7.9}\n\\end{align*}\n$$\n\nWith an initial guess $V_{G S}=1 \\mathrm{~V}$, the voltage drop across $R_{S}$ can be expressed as $V_{X}-V_{G S}=286 \\mathrm{mV}$, yielding a drain current of $286 \\mu \\mathrm{~A}$. Substituting for $I_{D}$ in Eq. (7.3) gives the new value of $V_{G S}$ as\n\n$$\n\\begin{align*}\nV_{G S} & =V_{T H}+\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x} \\frac{W}{L}}}  \\tag{7.10}\\\\\n& =0.954 \\mathrm{~V} \\tag{7.11}\n\\end{align*}\n$$\n\nConsequently,\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{V_{X}-V_{G S}}{R_{S}}  \\tag{7.12}\\\\\n& =332 \\mu \\mathrm{~A} \\tag{7.13}\n\\end{align*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\nV_{G S}=0.989 \\mathrm{~V} \\tag{7.14}\n\\end{equation*}\n$$\n\nThis gives $I_{D}=297 \\mu \\mathrm{~A}$.\nAs seen from the iterations, the solutions converge more slowly than those encountered in Chapter 5 for bipolar circuits. This is due to the quadratic (rather than exponential) $I_{D}-V_{G S}$ dependence. We may therefore utilize the exact result in Eq. (7.6) to avoid lengthy calculations. Since $V_{1}=0.36 \\mathrm{~V}$,\n\n$$\n\\begin{equation*}\nV_{G S}=0.974 \\mathrm{~V} \\tag{7.15}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{V_{X}-V_{G S}}{R_{S}}  \\tag{7.16}\\\\\n& =312 \\mu \\mathrm{~A} \\tag{7.17}\n\\end{align*}\n$$\n\nThe maximum allowable value of $R_{D}$ is obtained if $V_{Y}=V_{X}-V_{T H}=0.786 \\mathrm{~V}$. That is,\n\n$$\n\\begin{align*}\nR_{D} & =\\frac{V_{D D}-V_{Y}}{I_{D}}  \\tag{7.18}\\\\\n& =3.25 \\mathrm{k} \\Omega \\tag{7.19}\n\\end{align*}\n$$\n\nExercise What is the value of $R_{2}$ that places $M_{1}$ at the edge of saturation?\n\nIn the circuit of Example 7.1, assume $M_{1}$ is in saturation and $R_{D}=2.5 \\mathrm{k} \\Omega$ and compute (a) the maximum allowable value of $W / L$ and (b) the minimum allowable value of $R_{S}$ (with $W / L=5 / 0.18$ ). Assume $\\lambda=0$.\n\nSolution (a) As $W / L$ increases, $M_{1}$ can conduct a higher current for a given $V_{G S}$. With $R_{D}=2.5 \\mathrm{k} \\Omega$ and $V_{X}=1.286 \\mathrm{~V}$, the maximum allowable $I_{D}$ is\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{V_{D D}-V_{Y}}{R_{D}}  \\tag{7.20}\\\\\n& =406 \\mu \\mathrm{~A} . \\tag{7.21}\n\\end{align*}\n$$\n\nThe voltage drop across $R_{S}$ is then 406 mV, resulting in $V_{G S}=1.286 \\mathrm{~V}-$ $0.406 \\mathrm{~V}=0.88 \\mathrm{~V}$. In other words, $M_{1}$ must support a current of $406 \\mu \\mathrm{~A}$ with $V_{G S}=0.88 \\mathrm{~V}$ :\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2}  \\tag{7.22}\\\\\n406 \\mu \\mathrm{~A} & =\\left(50 \\mu \\mathrm{~A} / \\mathrm{V}^{2}\\right) \\frac{W}{L}(0.38 \\mathrm{~V})^{2} \\tag{7.23}\n\\end{align*}\n$$\n\nthus,\n\n$$\n\\begin{equation*}\n\\frac{W}{L}=56.2 \\tag{7.24}\n\\end{equation*}\n$$\n\n(b) With $W / L=5 / 0.18$, the minimum allowable $R_{S}$ for a drain current of $406 \\mu \\mathrm{~A}$ is determined. Since\n\n$$\n\\begin{align*}\nV_{G S} & =V_{T H}+\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x} \\frac{W}{L}}}  \\tag{7.25}\\\\\n& =1.041 \\mathrm{~V} \\tag{7.26}\n\\end{align*}\n$$\n\nthe voltage drop across $R_{S}$ is $V_{X}-V_{G S}=245 \\mathrm{mV}$. It follows that\n\n$$\n\\begin{align*}\nR_{S} & =\\frac{V_{X}-V_{G S}}{I_{D}}  \\tag{7.27}\\\\\n& =604 \\Omega . \\tag{7.28}\n\\end{align*}\n$$\n\nExercise Repeat the above example if $V_{T H}=0.35 \\mathrm{~V}$.\n\nThe self-biasing technique illustrated in Fig. 5.22 can also be applied to MOS amplifiers. As shown in Fig. 7.2, the circuit can be analyzed by noting that $M_{1}$ is in saturation (why?) and the voltage drop across $R_{G}$ is zero. Thus,\n\n$$\n\\begin{equation*}\nI_{D} R_{D}+V_{G S}+R_{S} I_{D}=V_{D D} \\tag{7.29}\n\\end{equation*}\n$$\n\nFinding $V_{G S}$ from this equation and substituting it in Eq. (7.3), we have\n\n$$\n\\begin{equation*}\nI_{D}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left[V_{D D}-\\left(R_{S}+R_{D}\\right) I_{D}-V_{T H}\\right]^{2} \\tag{7.30}\n\\end{equation*}\n$$\n\nimage_name: Figure 7.2 Self-biased MOS stage\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1, D: d1, G: g1}\nname: RG, type: Resistor, value: RG, ports: {N1: g1, N2: d1}\nname: RD, type: Resistor, value: RD, ports: {N1: d1, N2: VDD}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\n]\nextrainfo: The circuit is a self-biased NMOS amplifier with M1 in saturation. The voltage drop across RG is zero, indicating no gate current. The drain current ID flows from VDD through RD and M1 to GND.\n\nFigure 7.2 Self-biased MOS stage.\nwhere channel-length modulation is neglected. It follows that\n\n$$\n\\begin{equation*}\n\\left(R_{S}+R_{D}\\right)^{2} I_{D}^{2}-2\\left[\\left(V_{D D}-V_{T H}\\right)\\left(R_{S}+R_{D}\\right)+\\frac{1}{\\mu_{n} C_{o x} \\frac{W}{L}}\\right] I_{D}+\\left(V_{D D}-V_{T H}\\right)^{2}=0 \\tag{7.31}\n\\end{equation*}\n$$\n\nExample $\\quad$ Calculate the drain current of $M_{1}$ in Fig. 7.3 if $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}$, and 7.3 $\\lambda=0$. What value of $R_{D}$ is necessary to reduce $I_{D}$ by a factor of two?\nimage_name: Fig. 7.3\ndescription:\n[\nname: VDD, type: VoltageSource, value: 1.8V, ports: {Np: VDD, Nn: GND}\nname: RD, type: Resistor, value: 1kΩ, ports: {N1: VDD, N2: d1}\nname: Resistor, type: Resistor, value: 20kΩ, ports: {N1: d1, N2: g1}\nname: M1, type: NMOS, ports: {S: s1, D: d1, G: g1}\nname: Resistor, type: Resistor, value: 200Ω, ports: {N1: s1, N2: GND}\n]\nextrainfo: The circuit is a self-biased NMOS stage with a drain current of 556 μA. The width-to-length ratio (W/L) of the NMOS transistor M1 is 5/0.18.\n\nFigure 7.3 Example of self-biased MOS stage.\nSolution Equation (7.31) gives\n\n$$\n\\begin{equation*}\nI_{D}=556 \\mu \\mathrm{~A} \\tag{7.32}\n\\end{equation*}\n$$\n\nTo reduce $I_{D}$ to $278 \\mu \\mathrm{~A}$, we solve Eq. (7.31) for $R_{D}$ :\n\n$$\n\\begin{equation*}\nR_{D}=2.867 \\mathrm{k} \\Omega \\tag{7.33}\n\\end{equation*}\n```"
},
{
    "text": "Depending on the application, MOS circuits may employ biasing techniques that differ significantly from those outlined in Chapter 5 for bipolar stages. Most of these techniques are beyond the scope of this book, though some are discussed in Chapter 5. Nevertheless, it is instructive to apply certain biasing concepts from Chapter 5 to MOS stages.\n\nimage_name: Figure 7.1 MOS stage with biasing\ndescription:\n[\nname: R1, type: Resistor, value: 4kΩ, ports: {N1: VDD, N2: X}\nname: R2, type: Resistor, value: 10kΩ, ports: {N1: X, N2: GND}\nname: RS, type: Resistor, value: 1kΩ, ports: {N1: S1, N2: GND}\nname: RD, type: Resistor, ports: {N1: VDD, N2: Y}\nname: M1, type: NMOS, ports: {S: S1, D: Y, G: X}\nname: VDD, type: VoltageSource, value: 1.8V, ports: {Np: VDD, Nn: GND}\n]\nextrainfo: The circuit is a MOS stage with biasing, utilizing resistors R1 and R2 to set the gate voltage. M1 is an NMOS transistor operating in saturation, with RD connected to VDD and RS to ground. The gate voltage is determined by the voltage divider formed by R1 and R2.\n\nFigure 7.1 MOS stage with biasing.\nConsider the circuit depicted in Fig. 7.1, where the gate voltage is established by $R_{1}$ and $R_{2}$. We assume $M_{1}$ operates in saturation. Additionally, in most bias calculations, channel-length modulation can be disregarded. Noting that the gate current is zero, we have\n\n$$\n\\begin{equation*}\nV_{X}=\\frac{R_{2}}{R_{1}+R_{2}} V_{D D} \\tag{7.1}\n\\end{equation*}\n$$\n\nSince $V_{X}=V_{G S}+I_{D} R_{S}$,\n\n$$\n\\begin{equation*}\n\\frac{R_{2}}{R_{1}+R_{2}} V_{D D}=V_{G S}+I_{D} R_{S} \\tag{7.2}\n\\end{equation*}\n$$\n\nAlso,\n\n$$\n\\begin{equation*}\nI_{D}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2} \\tag{7.3}\n\\end{equation*}\n$$\n\nEquations (7.2) and (7.3) can be solved to determine $I_{D}$ and $V_{G S}$, either through iteration or by finding $I_{D}$ from Eq. (7.2) and substituting it in Eq. (7.3):\n\n$$\n\\begin{equation*}\n\\left(\\frac{R_{2}}{R_{1}+R_{2}} V_{D D}-V_{G S}\\right) \\frac{1}{R_{S}}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2} \\tag{7.4}\n\\end{equation*}\n$$\n\nThat is,\n\n$$\n\\begin{align*}\nV_{G S} & =-\\left(V_{1}-V_{T H}\\right)+\\sqrt{\\left(V_{1}-V_{T H}\\right)^{2}-V_{T H}^{2}+\\frac{2 R_{2}}{R_{1}+R_{2}} V_{1} V_{D D}}  \\tag{7.5}\\\\\n& =-\\left(V_{1}-V_{T H}\\right)+\\sqrt{V_{1}^{2}+2 V_{1}\\left(\\frac{R_{2} V_{D D}}{R_{1}+R_{2}}-V_{T H}\\right)} \\tag{7.6}\n\\end{align*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\nV_{1}=\\frac{1}{\\mu_{n} C_{o x} \\frac{W}{L} R_{S}} \\tag{7.7}\n\\end{equation*}\n$$\n\nThis value of $V_{G S}$ can then be substituted in Eq. (7.2) to obtain $I_{D}$. Of course, $V_{Y}$ must exceed $V_{X}-V_{T H}$ to ensure operation in the saturation region.\n\n```\nExample\n7.1\n```\n\nDetermine the bias current of $M_{1}$ in Fig. 7.1 assuming $V_{T H}=0.5 \\mathrm{~V}, \\mu_{n} C_{o x}=$ $100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, W / L=5 / 0.18$, and $\\lambda=0$. What is the maximum allowable value of $R_{D}$ for $M_{1}$ to remain in saturation?\n\nSolution We have\n\n$$\n\\begin{align*}\nV_{X} & =\\frac{R_{2}}{R_{1}+R_{2}} V_{D D}  \\tag{7.8}\\\\\n& =1.286 \\mathrm{~V} . \\tag{7.9}\n\\end{align*}\n$$\n\nWith an initial guess $V_{G S}=1 \\mathrm{~V}$, the voltage drop across $R_{S}$ can be expressed as $V_{X}-V_{G S}=286 \\mathrm{mV}$, yielding a drain current of $286 \\mu \\mathrm{~A}$. Substituting for $I_{D}$ in Eq. (7.3) gives the new value of $V_{G S}$ as\n\n$$\n\\begin{align*}\nV_{G S} & =V_{T H}+\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x} \\frac{W}{L}}}  \\tag{7.10}\\\\\n& =0.954 \\mathrm{~V} \\tag{7.11}\n\\end{align*}\n$$\n\nConsequently,\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{V_{X}-V_{G S}}{R_{S}}  \\tag{7.12}\\\\\n& =332 \\mu \\mathrm{~A} \\tag{7.13}\n\\end{align*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\nV_{G S}=0.989 \\mathrm{~V} \\tag{7.14}\n\\end{equation*}\n$$\n\nThis gives $I_{D}=297 \\mu \\mathrm{~A}$.\nAs seen from the iterations, the solutions converge more slowly than those encountered in Chapter 5 for bipolar circuits. This is due to the quadratic (rather than exponential) $I_{D}-V_{G S}$ dependence. We may therefore utilize the exact result in Eq. (7.6) to avoid lengthy calculations. Since $V_{1}=0.36 \\mathrm{~V}$,\n\n$$\n\\begin{equation*}\nV_{G S}=0.974 \\mathrm{~V} \\tag{7.15}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{V_{X}-V_{G S}}{R_{S}}  \\tag{7.16}\\\\\n& =312 \\mu \\mathrm{~A} \\tag{7.17}\n\\end{align*}\n$$\n\nThe maximum allowable value of $R_{D}$ is obtained if $V_{Y}=V_{X}-V_{T H}=0.786 \\mathrm{~V}$. That is,\n\n$$\n\\begin{align*}\nR_{D} & =\\frac{V_{D D}-V_{Y}}{I_{D}}  \\tag{7.18}\\\\\n& =3.25 \\mathrm{k} \\Omega \\tag{7.19}\n\\end{align*}\n$$\n\nExercise What is the value of $R_{2}$ that places $M_{1}$ at the edge of saturation?\n\nIn the circuit of Example 7.1, assume $M_{1}$ is in saturation and $R_{D}=2.5 \\mathrm{k} \\Omega$ and compute (a) the maximum allowable value of $W / L$ and (b) the minimum allowable value of $R_{S}$ (with $W / L=5 / 0.18$ ). Assume $\\lambda=0$.\n\nSolution (a) As $W / L$ increases, $M_{1}$ can conduct a higher current for a given $V_{G S}$. With $R_{D}=2.5 \\mathrm{k} \\Omega$ and $V_{X}=1.286 \\mathrm{~V}$, the maximum allowable $I_{D}$ is\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{V_{D D}-V_{Y}}{R_{D}}  \\tag{7.20}\\\\\n& =406 \\mu \\mathrm{~A} . \\tag{7.21}\n\\end{align*}\n$$\n\nThe voltage drop across $R_{S}$ is then 406 mV, resulting in $V_{G S}=1.286 \\mathrm{~V}-$ $0.406 \\mathrm{~V}=0.88 \\mathrm{~V}$. Thus, $M_{1}$ must carry a current of $406 \\mu \\mathrm{~A}$ with $V_{G S}=0.88 \\mathrm{~V}$ :\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2}  \\tag{7.22}\\\\\n406 \\mu \\mathrm{~A} & =\\left(50 \\mu \\mathrm{~A} / \\mathrm{V}^{2}\\right) \\frac{W}{L}(0.38 \\mathrm{~V})^{2} \\tag{7.23}\n\\end{align*}\n$$\n\nthus,\n\n$$\n\\begin{equation*}\n\\frac{W}{L}=56.2 \\tag{7.24}\n\\end{equation*}\n$$\n\n(b) With $W / L=5 / 0.18$, the minimum allowable $R_{S}$ for a drain current of $406 \\mu \\mathrm{~A}$ is determined. Since\n\n$$\n\\begin{align*}\nV_{G S} & =V_{T H}+\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x} \\frac{W}{L}}}  \\tag{7.25}\\\\\n& =1.041 \\mathrm{~V} \\tag{7.26}\n\\end{align*}\n$$\n\nthe voltage drop across $R_{S}$ is $V_{X}-V_{G S}=245 \\mathrm{mV}$. It follows that\n\n$$\n\\begin{align*}\nR_{S} & =\\frac{V_{X}-V_{G S}}{I_{D}}  \\tag{7.27}\\\\\n& =604 \\Omega . \\tag{7.28}\n\\end{align*}\n$$\n\nExercise Repeat the above example if $V_{T H}=0.35 \\mathrm{~V}$.\n\nThe self-biasing technique illustrated in Fig. 5.22 can also be applied to MOS amplifiers. As shown in Fig. 7.2, the circuit can be analyzed by noting that $M_{1}$ is in saturation (why?) and the voltage drop across $R_{G}$ is zero. Thus,\n\n$$\n\\begin{equation*}\nI_{D} R_{D}+V_{G S}+R_{S} I_{D}=V_{D D} \\tag{7.29}\n\\end{equation*}\n$$\n\nFinding $V_{G S}$ from this equation and substituting it in Eq. (7.3), we have\n\n$$\n\\begin{equation*}\nI_{D}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left[V_{D D}-\\left(R_{S}+R_{D}\\right) I_{D}-V_{T H}\\right]^{2} \\tag{7.30}\n\\end{equation*}\n$$\n\nimage_name: Figure 7.2 Self-biased MOS stage\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1, D: d1, G: g1}\nname: RG, type: Resistor, value: RG, ports: {N1: g1, N2: d1}\nname: RD, type: Resistor, value: RD, ports: {N1: d1, N2: VDD}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\n]\nextrainfo: The circuit is a self-biased NMOS amplifier with M1 in saturation. The voltage drop across RG is zero, indicating no gate current. The drain current ID flows from VDD through RD and M1 to GND.\n\nFigure 7.2 Self-biased MOS stage.\nwhere channel-length modulation is neglected. It follows that\n\n$$\n\\begin{equation*}\n\\left(R_{S}+R_{D}\\right)^{2} I_{D}^{2}-2\\left[\\left(V_{D D}-V_{T H}\\right)\\left(R_{S}+R_{D}\\right)+\\frac{1}{\\mu_{n} C_{o x} \\frac{W}{L}}\\right] I_{D}+\\left(V_{D D}-V_{T H}\\right)^{2}=0 \\tag{7.31}\n\\end{equation*}\n$$\n\nExample $\\quad$ Calculate the drain current of $M_{1}$ in Fig. 7.3 if $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}$, and 7.3 $\\lambda=0$. What value of $R_{D}$ is necessary to reduce $I_{D}$ by a factor of two?\nimage_name: Fig. 7.3\ndescription:\n[\nname: VDD, type: VoltageSource, value: 1.8V, ports: {Np: VDD, Nn: GND}\nname: RD, type: Resistor, value: 1kΩ, ports: {N1: VDD, N2: d1}\nname: Resistor, type: Resistor, value: 20kΩ, ports: {N1: d1, N2: g1}\nname: M1, type: NMOS, ports: {S: s1, D: d1, G: g1}\nname: Resistor, type: Resistor, value: 200Ω, ports: {N1: s1, N2: GND}\n]\nextrainfo: The circuit is a self-biased NMOS stage with a drain current of 556 μA. The width-to-length ratio (W/L) of the NMOS transistor M1 is 5/0.18.\n\nFigure 7.3 Example of self-biased MOS stage.\nSolution Equation (7.31) gives\n\n$$\n\\begin{equation*}\nI_{D}=556 \\mu \\mathrm{~A} \\tag{7.32}\n\\end{equation*}\n$$\n\nTo reduce $I_{D}$ to $278 \\mu \\mathrm{~A}$, we solve Eq. (7.31) for $R_{D}$ :\n\n$$\n\\begin{equation*}\nR_{D}=2.867 \\mathrm{k} \\Omega \\tag{7.33}\n\\end{equation*}\n```"
},
{
    "text": "---[Attention]---\nImage Descriptions: Any images linked in the [Context Provided] have been converted into textual descriptions. You also need to rephrase it to maintain the original meaning and length.\n---[Task]---\nPlease rephrase the provided text in [Context Provided] Section. Ensure the rephrased version maintains the original meaning and length. Only output the rephrased text.\n---[Context Provided]---\n\nWhen MOS transistors operate in saturation, they can function as current sources. As depicted in Fig. 7.4(a), an NMOS device acts as a current source with one terminal connected to ground, meaning it draws current from node $X$ to ground. Conversely, a PMOS transistor operates as a current source, providing current from $V_{DD}$ to node $Y$. It is controlled by the bias voltage $V_b$.\n\nIn Fig. 7.4(a), the NMOS transistor M1 is connected with its source to GND, drain to node Y, and gate to $V_b$. It acts as a current source drawing current from node Y to ground.\n\nIt is crucial to comprehend that only the drain terminal of a MOSFET can draw a dc current while still presenting a high impedance. Specifically, NMOS or PMOS devices configured as shown in Figs. 7.4(c) and (d) do not function as current sources because variation of $V_{X}$ or $V_{Y}$ directly alters the gate-source voltage of each transistor, consequently changing the drain current significantly. From another perspective, the small-signal model of these two structures is identical to that of the diode-connected devices in Fig. 6.34, revealing a small-signal impedance of only $1 / g_{m}($ if $\\lambda=0)$ rather than infinity."
},
{
    "text": "In the saturation region, MOS transistors can function as current sources. For instance, as depicted in Fig. 7.4(a), an NMOS transistor operates as a current source, sourcing current from node X to ground. Conversely, a PMOS transistor serves as a current source, providing current from VDD to node Y, as shown in Fig. 7.4(b). The operation of these current sources is controlled by the bias voltage Vb.\n\nIt is crucial to note that only the drain terminal of a MOSFET can draw a dc current while maintaining a high impedance. Specifically, NMOS or PMOS devices configured as shown in Figs. 7.4(c) and (d) do not function as current sources because variations in Vx or Vy directly alter the gate-source voltage of each transistor, consequently changing the drain current significantly. From another perspective, the small-signal model of these two structures is identical to that of the diode-connected devices in Fig. 6.34, revealing a small-signal impedance of only 1/gm (if lambda=0) instead of infinity."
},
{
    "text": "Rephrased text:\nMOS transistors, when in saturation mode, function as current sources. As depicted in Fig. 7.4(a), an NMOS device acts as a current source with one terminal connected to ground, meaning it draws current from node X to ground. Conversely, a PMOS transistor\n\nImage name: (a)\nDescription:\n[\nName: M1, Type: NMOS, Ports: {S: GND, D: X, G: Vb}\n]\nAdditional info: The NMOS transistor M1 functions as a current source, drawing current from node X to ground.\n\n(a)\nImage name: (b)\nDescription:\n[\nName: M2, Type: PMOS, Ports: {S: VDD, D: Y, G: Vb}\n]\nAdditional info: The PMOS transistor M2 acts as a current source, supplying current from VDD to node Y. It is controlled by the bias voltage Vb.\n\n(b)\nImage name: (a)\nDescription:\n[\nName: M1, Type: NMOS, Ports: {S: GND, D: Y, G: Vb}\n]\nAdditional info: The NMOS transistor M1 is connected with its source to GND, drain to node Y, and gate to Vb. It acts as a current source, drawing current from node Y to ground.\n\n(c)\nImage description:\n[\nName: M1, Type: NMOS, Ports: {S: GND, D: Y, G: Vb}\n]\nAdditional info: The NMOS transistor M1 is connected with its source to GND, drain to node Y, and gate to Vb. It acts as a current source, drawing current from node Y to ground.\n\n(d)\nImage description:\n[\nName: M2, Type: PMOS, Ports: {S: VDD, D: Y, G: Vb}\n]\nAdditional info: The PMOS transistor M2 acts as a current source, supplying current from VDD to node Y. It is controlled by the bias voltage Vb.\n\n(d)\nFigure 7.4 (a) NMOS device operating as a current source, (b) PMOS device operating as a current source, (c) PMOS topology not operating as a current source, (d) NMOS topology not operating as a current source.\n[Fig. 7.4(b)] draws current from $V_{D D}$ to node $Y$. If $\\lambda=0$, these currents remain independent of $V_{X}$ or $V_{Y}$ (as long as the transistors are in saturation).\n\nIt is crucial to recognize that only the drain terminal of a MOSFET can draw a dc current while still presenting a high impedance. Specifically, NMOS or PMOS devices configured as shown in Figs. 7.4(c) and (d) do not operate as current sources because the variation of $V_{X}$ or $V_{Y}$ directly alters the gate-source voltage of each transistor, significantly changing the drain current. From another perspective, the small-signal model of these two structures is identical to that of the diode-connected devices in Fig. 6.34, revealing a small-signal impedance of only $1 / g_{m}($ if $\\lambda=0)$ instead of infinity."
},
{
    "text": "MOS transistors in saturation mode can function as current sources. As depicted in Fig. 7.4(a), an NMOS transistor acts as a current source with its source terminal connected to ground, meaning it draws current from node $X$ to ground. Conversely, a PMOS transistor\n\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: X, G: Vb}\n]\nextrainfo:NMOS transistor M1 acts as a current source, drawing current from node X to ground.\n\n(a)\nimage_name:(b)\ndescription:\n[\nname: M2, type: PMOS, ports: {S: VDD, D: Y, G: Vb}\n]\nextrainfo:PMOS transistor M2 acts as a current source, providing current from VDD to node Y. It is controlled by the bias voltage Vb.\n\n(b)\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Y, G: Vb}\n]\nextrainfo:NMOS transistor M1 is connected with its source to GND, drain to node Y, and gate to Vb. It acts as a current source, drawing current from node Y to ground.\n\n(c)\nimage_name:(d)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: X, G: Vb}\n]\nextrainfo:NMOS transistor M1 is connected with its source to GND, drain to node X, and gate to Vb. It does not act as a current source because the variation of $V_X$ directly changes the gate-source voltage, thus altering the drain current significantly.\n\n(d)\nimage_name:(d)\ndescription:\n[\nname: M2, type: PMOS, ports: {S: VDD, D: Y, G: Vb}\n]\nextrainfo:PMOS transistor M2 is connected with its source to VDD, drain to node Y, and gate to Vb. It does not act as a current source because the variation of $V_Y$ directly changes the gate-source voltage, thus altering the drain current significantly.\n\nIt is crucial to recognize that only the drain terminal of a MOSFET can draw a dc current while maintaining\nMOS transistors in saturation mode can function as current sources. As depicted in Fig. 7.4(a), an NMOS transistor acts as a current source with its source terminal connected to ground, meaning it draws current from node $X$ to ground. Conversely, a PMOS transistor\n\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: X, G: Vb}\n]\nextrainfo:NMOS transistor M1 acts as a current source, drawing current from node X to ground.\n\n(a)\nimage_name:(b)\ndescription:\n[\nname: M2, type: PMOS, ports: {S: VDD, D: Y, G: Vb}\n]\nextrainfo:PMOS transistor M2 acts as a current source, providing current from VDD to node Y. It is controlled by the bias voltage Vb.\n\n(b)\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Y, G: Vb}\n]\nextrainfo:NMOS transistor M1 is connected with its source to GND, drain to node Y, and gate to Vb. It acts as a current source, drawing current from node Y to ground.\n\n(c)\nimage_name:(d)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: X, G: Vb}\n]\nextrainfo:NMOS transistor M1 is connected with its source to GND, drain to node X, and gate to Vb. It does not act as a current source because the variation of $V_X$ directly changes the gate-source voltage, thus altering the drain current significantly.\n\n(d)\nimage_name:(d)\ndescription:\n[\nname: M2, type: PMOS, ports: {S: VDD, D: Y, G: Vb}\n]\nextrainfo:PMOS transistor M2 is connected with its source to VDD, drain to node Y, and gate to Vb. It does not act as a current source because the variation of $V_Y$ directly changes the gate-source voltage, thus altering the drain current significantly.\n\nIt is crucial to recognize that only the drain terminal of a MOSFET can draw a dc current while"
},
{
    "text": "MOS transistors, when in saturation mode, function as current sources. Figure 7.4(a) depicts an NMOS transistor configured as a current source, with one terminal connected to ground, thus sourcing current from node X to ground. Conversely, a PMOS transistor, as shown in Fig. 7.4(b), serves as a current source that supplies current from VDD to node Y, regulated by the bias voltage Vb.\n\nThe NMOS transistor M1, depicted in Fig. 7.4(a), is set up with its source connected to GND, its drain to node Y, and its gate to Vb, acting as a current source that draws current from node Y to ground.\n\nFigure 7.4(c) and (d) illustrate PMOS and NMOS configurations, respectively, that do not operate as current sources. These configurations show that variations in $V_{X}$ or $V_{Y}$ directly impact the gate-source voltage of the transistors, significantly altering the drain current. The small-signal models of these configurations match those of the diode-connected devices in Fig. 6.34, indicating a small-signal impedance of $1/g_{m}$ (when $\\lambda=0$) instead of infinity. It's crucial to recognize that only the drain terminal of a MOSFET can source a DC current while maintaining a high impedance. The configurations in Figs. 7.4(c) and (d) are not effective as current sources because the gate-source voltage, and consequently the drain current, is significantly affected by changes in $V_{X}$ or $V_{Y}$."
},
{
    "text": "MOS transistors, when in saturation, can function as current sources. For instance, as depicted in Fig. 7.4(a), an NMOS device acts as a current source with one terminal connected to ground, meaning it draws current from node $X$ to ground. Conversely, a PMOS transistor operates as a current source, sourcing current from $V_{DD}$ to node $Y$, and it is regulated by the bias voltage $V_b$.\n\nThe configurations shown in Figs. 7.4(c) and (d) do not function as current sources because any variation in $V_{X}$ or $V_{Y}$ directly alters the gate-source voltage of the respective transistor, which significantly changes the drain current. In essence, the small-signal model of these configurations corresponds to the diode-connected devices in Fig. 6.34, exhibiting a small-signal impedance of merely $1/g_{m}$ (assuming $\\lambda=0$) instead of being infinite."
},
{
    "text": "MOS transistors, when operating in saturation mode, can be utilized as current sources. As depicted in Fig. 7.4(a), an NMOS device functions as a current source with one terminal connected to ground, meaning it draws current from node $X$ to ground. Conversely, a PMOS transistor serves as a current source, sourcing current from $V_{DD}$ to node $Y$. It is regulated by the bias voltage $V_b$.\n\nThe NMOS transistor M1 is connected with its source to GND, drain to node Y, and gate to $V_b$. It acts as a current source drawing current from node Y to ground.\n\nIn Figs. 7.4(c) and (d), the NMOS and PMOS topologies do not operate as current sources. If $\\lambda=0$, the currents remain independent of $V_X$ or $V_Y$, provided the transistors remain in saturation.\n\nIt is crucial to comprehend that only the drain terminal of a MOSFET can draw a dc current while still presenting a high impedance. Specifically, NMOS or PMOS devices configured as shown in Figs. 7.4(c) and (d) do not function as current sources because variations in $V_X$ or $V_Y$ directly alter the gate-source voltage of each transistor, consequently changing the drain current significantly. From another perspective, the small-signal model of these two structures is identical to that of the diode-connected devices in Fig. 6.34, revealing a small-signal impedance of only $1/g_m$ (if $\\lambda=0$) rather than infinity."
},
{
    "text": "NMOS transistors in saturation can function as current sources. As depicted in Fig. 7.4(a), an NMOS transistor acts as a current source with one terminal connected to ground, drawing current from node $X$ to ground. Conversely, a PMOS transistor image_name:(a) description: [name: M1, type: NMOS, ports: {S: GND, D: X, G: Vb}] extrainfo: The NMOS transistor M1 acts as a current source, drawing current from node X to ground. (a) image_name:(b) description: [name: M2, type: PMOS, ports: {S: VDD, D: Y, G: Vb}] extrainfo: The PMOS transistor M2 serves as a current source, providing current from VDD to node Y. It is controlled by the bias voltage Vb. (b) image_name:(a) description: [name: M1, type: NMOS, ports: {S: GND, D: Y, G: Vb}] extrainfo: The NMOS transistor M1 is connected with its source to GND, drain to node Y, and gate to Vb. It acts as a current source, drawing current from node Y to ground. (c) <img class=\"imgSvg\" id = \"m38ptgief1wld20dgpt\" src=\"data:image/svg+xml;base64,PHN2ZyBpZD0ic21pbGVzLW0zOHB0Z2llZjF3bGQyMGRncHQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDIyNiAxMjMuODM5NDQzMDY5NTE3OTgiIHN0eWxlPSJ3aWR0aDogMjI1Ljc1MDAyNDQ4NjQ3NzI2cHg7IGhlaWdodDogMTIzLjgzOTQ0MzA2OTUxNzk4cHg7IG92ZXJmbG93OiB2aXNpYmxlOyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJsaW5lLW0zOHB0Z2llZjF3bGQyMGRncHQtMSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSIxNjcuOTk5OTk5OTk5OTQ5MjQiIHkxPSI3NS41NTk2ODUyNjIyNDA3MiIgeDI9IjE4My43NTAwMjQ0ODY0NzcyMyIgeTI9IjQ4LjI3OTg5OTE4MDM0OTA4NCI+PHN0b3Agc3RvcC1jb2xvcj0iY3VycmVudENvbG9yIiBvZmZzZXQ9IjIwJSI+PC9zdG9wPjxzdG9wIHN0b3AtY29sb3I9ImN1cnJlbnRDb2xvciIgb2Zmc2V0PSIxMDAlIj48L3N0b3A+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImxpbmUtbTM4cHRnaWVmMXdsZDIwZGdwdC0zIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjEzNi40OTk5OTk5OTk5NjE5NCIgeTE9Ijc1LjU1OTY1Njk4NzYyNjM0IiB4Mj0iMTY3Ljk5OTk5OTk5OTk0OTI0IiB5Mj0iNzUuNTU5NjU2OTg3NjI2MzQiPjxzdG9wIHN0b3AtY29sb3I9ImN1cnJlbnRDb2xvciIgb2Zmc2V0PSIyMCUiPjwvc3RvcD48c3RvcCBzdG9wLWNvbG9yPSJjdXJyZW50Q29sb3IiIG9mZnNldD0iMTAwJSI+PC9zdG9wPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJsaW5lLW0zOHB0Z2llZjF3bGQyMGRncHQtNSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSIxMTcuNDE0NjE2NDY3MzQ2MjYiIHkxPSI5Ny4yNzY0NjAwNTM3NTM3NyIgeDI9IjEzMC4wMTQ2MzYwNTY1Njg2MyIgeTI9Ijc1LjQ1MjYzMTE4ODI0MDQ1Ij48c3RvcCBzdG9wLWNvbG9yPSJjdXJyZW50Q29sb3IiIG9mZnNldD0iMjAlIj48L3N0b3A+PHN0b3Agc3RvcC1jb2xvcj0iY3VycmVudENvbG9yIiBvZmZnNldD0iMTAwJSI+PC9zdG9wPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJsaW5lLW0zOHB0Z2llZjF3bGQyMGRncHQtOSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSIxMjAuNzUwMDI0NDg2NTAyNTUiIHkxPSI0OC4yNzk4NDI2MzExMjAzMSIgeDI9IjEzNi40OTk5OTk5OTk5NjE5NCIgeTI9Ijc1LjU1OTY1Njk4NzYyNjM0Ij48c3RvcCBzdG9wLWNvbG9yPSJjdXJyZW50Q29sb3IiIG9mZnNldD0iMjAlIj48L3N0b3A+PHN0b3Agc3RvcC1jb2xvcj0iY3VycmVudENvbG9yIiBvZmZnNldD0iMTAwJSI+PC9zdG9wPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJsaW5lLW0zOHB0Z2llZjF3bGQyMGRncHQtMTUiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iODkuMjQ5OTk3NTUxMzQ0NjY3IiB5MT0iMTAyLjgzOTQxNDc5NDkwMzY2IiB4Mj0iMTIwLjc0OTk3NTUxMzQzMzk1IiB5Mj0iMTAyLjgzOTQ0MzA2OTUxNzk4Ij48c3RvcCBzdG9wLWNvbG9yPSJjdXJyZW50Q29sb3IiIG9mZnNldD0iMjAlIj48L3N0b3A+PHN0b3Agc3RvcC1jb2xvcj0iY3VycmVudENvbG9yIiBvZmZnNldD0iMTAwJSI+PC9zdG9wPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJsaW5lLW0zOHB0Z2llZjF3bGQyMGRncHQtMTciIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iNzkuOTg1MzY0MTM1NTA0MzEiIHkxPSI3NS41NTk2MDA0MzgzOTc2NyIgeDI9IjkyLjU4NTM0NDU0NjI3MTE4IiB5Mj0iOTcuMjc2NDM3NzY2ODMwMzgiPjxzdG9wIHN0b3AtY29sb3I9ImN1cnJlbnRDb2xvciIgb2Zmc2V0PSIyMCUiPjwvc3RvcD48c3RvcCBzdG9wLWNvbG9yPSJjdXJyZW50Q29sb3IiIG9mZnNldD0iMTAwJSI+PC9zdG9wPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJsaW5lLW0zOHB0Z2llZjF3bGQyMGRncHQtMTkiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iNzMuNDk5OTk5OTk5ODczMSIgeTE9Ijc1LjU1OTYwMDQzODM5NzY3IiB4Mj0iODkuMjUwMDI0NDg2NTE1MjYiIHkyPSIxMDIuODM5NDE0Nzk0OTAzNjYiIHN0eWxlPSJzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLXdpZHRoOjEuMjYiIHN0cm9rZT0idXJsKCcjbGluZS1tMzhwdGdpZWYxd2xkMjBkZ3B0LTE5JykiPjwvbGluZT48bGluZSB4MT0iNzMuNTAwMDQ4OTczMDU1OSIgeTE9IjIxIiB4Mj0iODkuMjUwMDI0NDg2NTE1MjYiIHkyPSI0OC4yNzk4MTQzNTY1MDU5OSIgc3R5bGU9InN0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utd2lkdGg6MS4yNiIgc3Ryb2tlPSJ1cmwoJyNsaW5lLW0zOHB0Z2llZjF3bGQyMGRncHQtMjMnKSI+PC9saW5lPjxsaW5lIHgxPSI0MiIgeTE9Ijc1LjU1OTU3MjE2Mzc4MzMyIiB4Mj0iNzMuNDk5OTk5OTk5OTg3MzEiIHkyPSI3NS41NTk2MDA0MzgzOTc2NyIgc3R5bGU9InN0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utd2lkdGg6MS4yNiIgc3Ryb2tlPSJ1cmwoJyNsaW5lLW0zOHB0Z2llZjF3bGQyMGRncHQtMjUnKSI+PC9saW5lPjwvZz48L3N2Zz4=\"/> (d) Figure 7.4 (a) NMOS device operating as a current source, (b) PMOS device operating as a current source, (c) PMOS topology not operating as a current source, (d) NMOS topology not operating as a current source. [Fig. 7.4(b)] draws current from $V_{D D}$ to node $Y$. If $\\lambda=0$, these currents remain independent of $V_{X}$ or $V_{Y}$ (as long as the transistors are in saturation). It is important to understand that only the drain terminal of a MOSFET can draw a dc current and still present a high impedance. Specifically, NMOS or PMOS devices configured as shown in Figs. 7.4(c) and (d) do not operate as current sources because variation of $V_{X}$ or $V_{Y}$ directly changes the gate-source voltage of each transistor, thus changing the drain current considerably. From another perspective, the small-signal model of these two structures is identical to that of the diode-connected devices in Fig. 6.34, revealing a small-signal impedance of only $1 / g_{m}($ if $\\lambda=0)$ rather than infinity."
},
{
    "text": "As depicted in Fig. 7.5(a), the fundamental CS stage resembles the common-emitter configuration, with the input applied to the gate and the output measured at the drain. For small signals, $M_{1}$ translates input voltage variations into proportional drain current changes, and $R_{D}$ converts these drain currents into the output voltage. If channel-length modulation is disregarded, the small-signal model in Fig. 7.5(b) yields $v_{\\text {in }}=v_{1}$ and $v_{\\text {out }}=-g_{m} v_{1} R_{D}$. Thus,\n\n$$\n\\begin{equation*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}}=-g_{m} R_{D} \\tag{7.34}\n\\end{equation*}\n$$\n\nThis result parallels that derived for the common-emitter stage in Chapter 5.\n\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: Vin, Nn: GND}\n]\nextrainfo:This represents a common-source amplifier circuit featuring an NMOS transistor. The input voltage is applied to the gate of M1, with the output taken from the drain. The resistor RD is connected between VDD and the drain of M1, serving as the load. The voltage-controlled current source depicts the transconductance of the MOSFET in the small-signal model.\n\nimage_name:(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: Vout, N2: GND}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit diagram (b) illustrates the small-signal model of a common-source amplifier. The NMOS transistor M1 converts input voltage variations to drain current changes, and the resistor RD transforms these drain currents to output voltage. The voltage-controlled current source gmV1 models the transconductance of the NMOS transistor.\n\nFigure 7.5 (a) Common-source stage, (b) small-signal mode.\n\nThe voltage gain of the CS stage is also constrained by the supply voltage. Given $g_{m}=$ $\\sqrt{2 \\mu_{n} C_{o x}(W / L) I_{D}}$, we obtain\n\n$$\n\\begin{equation*}\nA_{v}=-\\sqrt{2 \\mu_{n} C_{o x} \\frac{W}{L} I_{D}} R_{D}, \\tag{7.35}\n\\end{equation*}\n$$\n\nindicating that increasing $I_{D}$ or $R_{D}$ also increases the voltage drop across $R_{D}\\left(=I_{D} R_{D}\\right)^{1}$. For $M_{1}$ to remain in saturation,\n\n$$\n\\begin{equation*}\nV_{D D}-R_{D} I_{D}>V_{G S}-V_{T H} \\tag{7.36}\n\\end{equation*}\n$$\n\nor equivalently,\n\n$$\n\\begin{equation*}\nR_{D} I_{D}<V_{D D}-\\left(V_{G S}-V_{T H}\\right) \\tag{7.37}\n\\end{equation*}\n$$\n\nExample: Calculate the small-signal voltage gain of the CS stage shown in Fig. 7.6 if $I_{D}=1 \\mathrm{~mA}$, $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}$, $V_{T H}=0.5 \\mathrm{~V}$, and $\\lambda=0$. Verify that $M_{1}$ operates in saturation.\nimage_name:Figure 7.6\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: RD, type: Resistor, value: 1k, ports: {N1: VDD, N2: Vout}\nname: VDD, type: VoltageSource, value: 1.8V, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a common-source (CS) amplifier stage with NMOS M1. The resistor RD is connected between the drain of M1 and VDD, and the source of M1 is grounded. The gate of M1 is connected to Vin, and the output is taken from the drain, labeled as Vout. The voltage supply is 1.8V.\n\nFigure 7.6 Example of CS stage.\nSolution: We have\n\n$$\n\\begin{align*}\ng_{m} & =\\sqrt{2 \\mu_{n} C_{o x} \\frac{W}{L} I_{D}}  \\tag{7.38}\\\\\n& =\\frac{1}{300 \\Omega} . \\tag{7.39}\n\\end{align*}\n$$\n\nThus,\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m} R_{D}  \\tag{7.40}\\\\\n& =3.33 \\tag{7.41}\n\\end{align*}\n$$\n\nTo confirm the operation region, we first determine the gate-source voltage:\n\n$$\n\\begin{align*}\nV_{G S} & =V_{T H}+\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x} \\frac{W}{L}}}  \\tag{7.42}\\\\\n& =1.1 \\mathrm{~V} \\tag{7.43}\n\\end{align*}\n$$\n\n[^4]The drain voltage equals $V_{D D}-R_{D} I_{D}=0.8 \\mathrm{~V}$. Since $V_{G S}-V_{T H}=0.6 \\mathrm{~V}$, the device indeed operates in saturation, with a margin of 0.2 V relative to the triode region. For instance, if $R_{D}$ is doubled to double $A_{v}$, $M_{1}$ enters the triode region, reducing its transconductance.\n\nExercise: Determine the value of $V_{T H}$ that places $M_{1}$ at the edge of saturation.\n\nGiven that the gate terminal of MOSFETs draws negligible current (at very low frequencies), the CS amplifier is said to provide a current gain of infinity. In contrast, the current gain of a common-emitter stage equals $\\beta$.\n\nLet's now compute the I/O impedances of the CS amplifier. Since the gate current is zero (at low frequencies),\n\n$$\n\\begin{equation*}\nR_{i n}=\\infty \\tag{7.44}\n\\end{equation*}\n$$\n\nThis contrasts with the CE stage, where $R_{i n}$ equals $r_{\\pi}$. The high input impedance of the CS topology is crucial in many analog circuits.\n\nThe similarity between the small-signal models of CE and CS stages suggests that the output impedance of the CS amplifier is simply\n\n$$\n\\begin{equation*}\nR_{\\text {out }}=R_{D} \\tag{7.45}\n\\end{equation*}\n$$\n\nThis is also evident from Fig. 7.7.\nimage_name:Figure 7.8\ndescription:\n[\nname: V1, type: VoltageSource, value: V1, ports: {Np: V1, Nn: GND}\nname: g_mv1, type: VoltageControlledCurrentSource, ports: {Np: V1, Nn: Vx}\nname: RD, type: Resistor, value: RD, ports: {N1: Vx, N2: GND}\nname: Vx, type: VoltageSource, value: Vx, ports: {Np: Vx, Nn: GND}\n]\nextrainfo:The circuit is a small-signal model of a common-source amplifier with channel-length modulation. The voltage source V1 provides the input signal, while the voltage-controlled current source g_mv1 models the transconductance of the MOSFET. RD is the load resistor, and Vx is the output voltage across the load.\n\nFigure 7.7 Output impedance of CS stage.\n\nIn practice, channel-length modulation may not be negligible, especially if $R_{D}$ is large. The small-signal model of the CS topology is thus modified as shown in Fig. 7.8, revealing that\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m}\\left(R_{D} \\| r_{O}\\right)  \\tag{7.46}\\\\\nR_{\\text {in }} & =\\infty  \\tag{7.47}\\\\\nR_{\\text {out }} & =R_{D} \\| r_{O} . \\tag{7.48}\n\\end{align*}\n$$\n\nIn other words, channel-length modulation and the Early effect similarly impact the CS and CE stages, respectively.\n\nimage_name:Figure 7.8\ndescription:\n[\nname: v1, type: VoltageSource, value: v1, ports: {Np: Vx, Nn: GND}\nname: g_m v1, type: VoltageControlledCurrentSource, value: g_m v1, ports: {Np: GND, Nn: Vx}\nname: ro, type: Resistor, value: ro, ports: {N1: Vx, N2: Vx}\nname: RD, type: Resistor, value: RD, ports: {N1: Vx, N2: GND}\nname: vx, type: VoltageSource, value: vx, ports: {Np: Vx, Nn: GND}\n]\nextrainfo:The circuit is a small-signal model of a common-source amplifier with channel-length modulation. It includes a voltage-controlled current source, resistors, and voltage sources. The voltage gain is affected by the parallel combination of RD and ro.\n\nFigure 7.8 Effect of channel-length modulation on CS stage.\n\nExample 7.5:\n\nAssuming $M_{1}$ operates in saturation, determine the voltage gain of the circuit shown in Fig. 7.9(a) and plot the result as a function of the transistor channel length, keeping other parameters constant.\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: Vout}\nname: I1, type: CurrentSource, ports: {Np: VDD, Nn: Vout}\n]\nextrainfo:The circuit is a common-source amplifier with channel-length modulation. The voltage gain is determined by the transconductance (gm) and the output resistance (ro) of the NMOS transistor M1. The ideal current source provides an infinite small-signal resistance.\n\n(a)\nimage_name:(b)\ndescription:The graph depicts voltage gain (A_v) versus device channel length (L) for a common-source amplifier. The x-axis represents the channel length (L), and the y-axis represents the voltage gain (A_v), both on a linear scale.\n\nThe curve starts at a lower gain value and increases with increasing channel length, indicating a positive correlation between voltage gain and channel length. The relationship is nonlinear, with the rate of gain increase diminishing as the channel length grows, possibly approaching an asymptotic value.\n\nNo specific annotations, markers, or numerical values are provided on the graph. The overall trend highlights the impact of channel-length modulation on amplifier gain, where longer channel lengths result in higher gains due to increased output resistance (r_O). This behavior aligns with the equation A_v = -g_m * r_O, where r_O is inversely proportional to the channel-length modulation parameter (λ).\n\n(b)\n\nFigure 7.9 (a) CS stage with ideal current source as a load, (b) gain as a function of device channel length.\n\nSolution: The ideal current source presents an infinite small-signal resistance, allowing the use of Eq. (7.46) with $R_{D}=\\infty$ :\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m} r_{O} \\tag{7.49}\n\\end{equation*}\n$$\n\nThis represents the highest voltage gain a single transistor can achieve. Writing $g_{m}=$ $\\sqrt{2 \\mu_{n} C_{o x}(W / L) I_{D}}$ and $r_{O}=\\left(\\lambda I_{D}\\right)^{-1}$, we get\n\n$$\n\\begin{equation*}\n\\left|A_{v}\\right|=\\frac{\\sqrt{2 \\mu_{n} C_{o x} \\frac{W}{L}}}{\\lambda \\sqrt{I_{D}}} \\tag{7.50}\n\\end{equation*}\n$$\n\nThis result suggests that $\\left|A_{v}\\right|$ decreases as $L$ increases, but recall from Chapter 6 that $\\lambda \\propto L^{-1}$ :\n\n$$\n\\begin{equation*}\n\\left|A_{v}\\right| \\propto \\sqrt{\\frac{2 \\mu_{n} C_{o x} W L}{I_{D}}} \\tag{7.51}\n\\end{equation*}\n$$\n\nConsequently, $\\left|A_{v}\\right|$ increases with $L$ [Fig. 7.9(b)].\n\nRepeat the above example if a resistor of value $R_{1}$ is connected between the gate and drain of $M_{1}$."
},
{
    "text": "As depicted in Fig. 7.5(a), the fundamental CS stage resembles the common-emitter configuration, with the input applied to the gate and the output measured at the drain. For small signals, $M_{1}$ translates input voltage fluctuations into proportional drain current variations, and $R_{D}$ converts these drain currents into the output voltage. If channel-length modulation is disregarded, the small-signal model in Fig. 7.5(b) yields $v_{\\text {in }}=v_{1}$ and $v_{\\text {out }}=-g_{m} v_{1} R_{D}$. Therefore,\n\n$$\n\\begin{equation*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}}=-g_{m} R_{D} \\tag{7.34}\n\\end{equation*}\n$$\n\nThis outcome is analogous to that derived for the common-emitter stage in Chapter 5.\n\nImage Description (a):\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: Vin, Nn: GND}\n]\nExtra Info: This represents a common-source amplifier circuit with an NMOS transistor. The input voltage is applied to the gate of M1, and the output is taken from the drain. The resistor RD is connected between VDD and the drain of M1, serving as the load. The voltage-controlled current source depicts the transconductance of the MOSFET in the small-signal model.\n\nImage Description (b):\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: Vout, N2: GND}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: Vout, Nn: GND}\n]\nExtra Info: The circuit diagram (b) illustrates the small-signal model of a common-source amplifier. The NMOS transistor M1 converts input voltage variations to drain current changes, and the resistor RD transforms these drain currents to output voltage. The voltage-controlled current source gmV1 models the transconductance of the NMOS transistor.\n\nFigure 7.5 (a) Common-source stage, (b) small-signal model.\n\nThe voltage gain of the CS stage is also constrained by the supply voltage. Given $g_{m}=$ $\\sqrt{2 \\mu_{n} C_{o x}(W / L) I_{D}}$, we obtain\n\n$$\n\\begin{equation*}\nA_{v}=-\\sqrt{2 \\mu_{n} C_{o x} \\frac{W}{L} I_{D}} R_{D}, \\tag{7.35}\n\\end{equation*}\n$$\n\nindicating that increasing $I_{D}$ or $R_{D}$ also increases the voltage drop across $R_{D}\\left(=I_{D} R_{D}\\right)^{1}$. For $M_{1}$ to remain in saturation,\n\n$$\n\\begin{equation*}\nV_{D D}-R_{D} I_{D}>V_{G S}-V_{T H} \\tag{7.36}\n\\end{equation*}\n$$\n\nwhich simplifies to\n\n$$\n\\begin{equation*}\nR_{D} I_{D}<V_{D D}-\\left(V_{G S}-V_{T H}\\right) \\tag{7.37}\n\\end{equation*}\n$$\n\nExample: Calculate the small-signal voltage gain of the CS stage shown in Fig. 7.6 if $I_{D}=1 \\mathrm{~mA}$, $7.4 \\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}$, $V_{T H}=0.5 \\mathrm{~V}$, and $\\lambda=0$. Verify that $M_{1}$ operates in saturation.\n\nImage Description:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: RD, type: Resistor, value: 1k, ports: {N1: VDD, N2: Vout}\nname: VDD, type: VoltageSource, value: 1.8V, ports: {Np: VDD, Nn: GND}\n]\nExtra Info: This circuit is a common-source (CS) amplifier stage with NMOS M1. The resistor RD is connected between the drain of M1 and VDD, and the source of M1 is grounded. The gate of M1 is connected to Vin, and the output is taken from the drain, labeled as Vout. The voltage supply is 1.8V.\n\nFigure 7.6 Example of CS stage.\n\nSolution:\n\n$$\n\\begin{align*}\ng_{m} & =\\sqrt{2 \\mu_{n} C_{o x} \\frac{W}{L} I_{D}}  \\tag{7.38}\\\\\n& =\\frac{1}{300 \\Omega} . \\tag{7.39}\n\\end{align*}\n$$\n\nThus,\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m} R_{D}  \\tag{7.40}\\\\\n& =3.33 \\tag{7.41}\n\\end{align*}\n$$\n\nTo verify the operation region, we first calculate the gate-source voltage:\n\n$$\n\\begin{align*}\nV_{G S} & =V_{T H}+\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x} \\frac{W}{L}}}  \\tag{7.42}\\\\\n& =1.1 \\mathrm{~V} \\tag{7.43}\n\\end{align*}\n$$\n\n[^4]The drain voltage equals $V_{D D}-R_{D} I_{D}=0.8 \\mathrm{~V}$. Since $V_{G S}-V_{T H}=0.6 \\mathrm{~V}$, the device indeed operates in saturation with a margin of 0.2 V from the triode region. For instance, if $R_{D}$ is doubled to double $A_{v}$, $M_{1}$ enters the triode region, reducing its transconductance.\n\nExercise: Determine the value of $V_{T H}$ that places $M_{1}$ at the edge of saturation.\n\nGiven that the gate terminal of MOSFETs draws negligible current (at very low frequencies), the CS amplifier is said to provide infinite current gain. In contrast, the current gain of a common-emitter stage is $\\beta$.\n\nLet's now compute the I/O impedances of the CS amplifier. Since the gate current is zero (at low frequencies),\n\n$$\n\\begin{equation*}\nR_{i n}=\\infty \\tag{7.44}\n\\end{equation*}\n$$\n\nThis contrasts with the CE stage, where $R_{i n}$ equals $r_{\\pi}$. The high input impedance of the CS topology is crucial in many analog circuits.\n\nThe similarity between the small-signal models of CE and CS stages suggests that the output impedance of the CS amplifier is simply\n\n$$\n\\begin{equation*}\nR_{\\text {out }}=R_{D} \\tag{7.45}\n\\end{equation*}\n$$\n\nThis is also evident from Fig. 7.7.\n\nImage Description:\n[\nname: V1, type: VoltageSource, value: V1, ports: {Np: V1, Nn: GND}\nname: g_mv1, type: VoltageControlledCurrentSource, ports: {Np: V1, Nn: Vx}\nname: RD, type: Resistor, value: RD, ports: {N1: Vx, N2: GND}\nname: Vx, type: VoltageSource, value: Vx, ports: {Np: Vx, Nn: GND}\n]\nExtra Info: This circuit is a small-signal model of a common-source amplifier with channel-length modulation. The voltage source V1 provides the input signal, the voltage-controlled current source g_mv1 models the transconductance of the MOSFET, RD is the load resistor, and Vx is the output voltage across the load.\n\nFigure 7.7 Output impedance of CS stage.\n\nIn practice, channel-length modulation may not be negligible, especially with large $R_{D}$. The small-signal model of the CS topology is thus modified as shown in Fig. 7.8, revealing that\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m}\\left(R_{D} \\| r_{O}\\right)  \\tag{7.46}\\\\\nR_{\\text {in }} & =\\infty  \\tag{7.47}\\\\\nR_{\\text {out }} & =R_{D} \\| r_{O} . \\tag{7.48}\n\\end{align*}\n$$\n\nIn other words, channel-length modulation and the Early effect similarly impact the CS and CE stages, respectively.\n\nImage Description:\n[\nname: v1, type: VoltageSource, value: v1, ports: {Np: Vx, Nn: GND}\nname: g_m v1, type: VoltageControlledCurrentSource, value: g_m v1, ports: {Np: GND, Nn: Vx}\nname: ro, type: Resistor, value: ro, ports: {N1: Vx, N2: Vx}\nname: RD, type: Resistor, value: RD, ports: {N1: Vx, N2: GND}\nname: vx, type: VoltageSource, value: vx, ports: {Np: Vx, Nn: GND}\n]\nExtra Info: This circuit is a small-signal model of a common-source amplifier with channel-length modulation. It includes a voltage-controlled current source, resistors, and voltage sources. The voltage gain is affected by the parallel combination of RD and ro.\n\nFigure 7.8 Effect of channel-length modulation on CS stage.\n\nExample 7.5:\n\nAssuming $M_{1}$ operates in saturation, determine the voltage gain of the circuit shown in Fig. 7.9(a) and plot the result as a function of the transistor channel length, keeping other parameters constant.\n\nImage Description (a):\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: Vout}\nname: I1, type: CurrentSource, ports: {Np: VDD, Nn: Vout}\n]\nExtra Info: This circuit is a common-source amplifier with channel-length modulation. The voltage gain is determined by the transconductance (gm) and the output resistance (ro) of the NMOS transistor M1. The ideal current source provides an infinite small-signal resistance.\n\n(a)\n\nImage Description (b):\nThe graph depicts voltage gain (A_v) versus device channel length (L) for a common-source amplifier. The x-axis represents the channel length (L), and the y-axis represents the voltage gain (A_v), both on a linear scale. The curve starts at a lower gain value and increases with channel length, indicating a positive correlation. The relationship is nonlinear, with the rate of increase diminishing as the channel length grows, possibly approaching an asymptotic value. No specific annotations, markers, or numerical values are provided. The trend highlights the impact of channel-length modulation on gain, where longer channel lengths lead to higher gains due to increased output resistance (r_O), consistent with the equation A_v = -g_m * r_O, where r_O is inversely proportional to the channel-length modulation parameter (λ).\n\n(b)\n\nFigure 7.9 (a) CS stage with ideal current source as a load, (b) gain as a function of device channel length.\n\nSolution: The ideal current source presents an infinite small-signal resistance, allowing us to use Eq. (7.46) with $R_{D}=\\infty$:\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m} r_{O} \\tag{7.49}\n\\end{equation*}\n$$\n\nThis represents the highest voltage gain a single transistor can achieve. Writing $g_{m}=$ $\\sqrt{2 \\mu_{n} C_{o x}(W / L) I_{D}}$ and $r_{O}=\\left(\\lambda I_{D}\\right)^{-1}$, we get\n\n$$\n\\begin{equation*}\n\\left|A_{v}\\right|=\\frac{\\sqrt{2 \\mu_{n} C_{o x} \\frac{W}{L}}}{\\lambda \\sqrt{I_{D}}} \\tag{7.50}\n\\end{equation*}\n$$\n\nThis result suggests that $\\left|A_{v}\\right|$ decreases as $L$ increases, but considering from Chapter 6 that $\\lambda \\propto L^{-1}$,\n\n$$\n\\begin{equation*}\n\\left|A_{v}\\right| \\propto \\sqrt{\\frac{2 \\mu_{n} C_{o x} W L}{I_{D}}} \\tag{7.51}\n\\end{equation*}\n$$\n\nThus, $\\left|A_{v}\\right|$ actually increases with $L$ [Fig. 7.9(b)].\n\nRepeat the above example if a resistor of value $R_{1}$ is connected between the gate and drain of $M_{1}$."
},
{
    "text": "As depicted in Fig. 7.5(a), the fundamental CS stage resembles the common-emitter configuration, with the input applied to the gate and the output measured at the drain. For small signals, $M_{1}$ translates input voltage fluctuations into proportional drain current variations, and $R_{D}$ converts these drain currents into the output voltage. If channel-length modulation is disregarded, the small-signal model in Fig. 7.5(b) results in $v_{\\text {in }}=v_{1}$ and $v_{\\text {out }}=-g_{m} v_{1} R_{D}$. Thus,\n\n$$\n\\begin{equation*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}}=-g_{m} R_{D} \\tag{7.34}\n\\end{equation*}\n$$\n\nThis outcome is analogous to that derived for the common-emitter stage in Chapter 5.\n\nImage Description (a):\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: Vin, Nn: GND}\n]\nExtra Info: This represents a common-source amplifier circuit with an NMOS transistor. The input voltage is applied to the gate of M1, and the output is taken from the drain. The resistor RD is connected between VDD and the drain of M1, serving as the load. The voltage-controlled current source depicts the transconductance of the MOSFET in the small-signal model.\n\nImage Description (b):\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: Vout, N2: GND}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: Vout, Nn: GND}\n]\nExtra Info: The circuit diagram (b) illustrates the small-signal model of a common-source amplifier. The NMOS transistor M1 converts input voltage variations to drain current changes, and the resistor RD transforms these drain currents to output voltage. The voltage-controlled current source gmV1 models the transconductance of the NMOS transistor.\n\nFigure 7.5 (a) Common-source stage, (b) small-signal model.\n\nThe voltage gain of the CS stage is also constrained by the supply voltage. Given $g_{m}=\\sqrt{2 \\mu_{n} C_{o x}(W / L) I_{D}}$, we obtain\n\n$$\n\\begin{equation*}\nA_{v}=-\\sqrt{2 \\mu_{n} C_{o x} \\frac{W}{L} I_{D}} R_{D}, \\tag{7.35}\n\\end{equation*}\n$$\n\nindicating that increasing $I_{D}$ or $R_{D}$ also increases the voltage drop across $R_{D}\\left(=I_{D} R_{D}\\right)^{1}$. For $M_{1}$ to remain in saturation,\n\n$$\n\\begin{equation*}\nV_{D D}-R_{D} I_{D}>V_{G S}-V_{T H} \\tag{7.36}\n\\end{equation*}\n$$\n\nor equivalently,\n\n$$\n\\begin{equation*}\nR_{D} I_{D}<V_{D D}-\\left(V_{G S}-V_{T H}\\right) \\tag{7.37}\n\\end{equation*}\n$$\n\nExample: Calculate the small-signal voltage gain of the CS stage shown in Fig. 7.6 if $I_{D}=1 \\mathrm{~mA}$, $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}$, $V_{T H}=0.5 \\mathrm{~V}$, and $\\lambda=0$. Verify that $M_{1}$ operates in saturation.\n\nImage Description:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: RD, type: Resistor, value: 1k, ports: {N1: VDD, N2: Vout}\nname: VDD, type: VoltageSource, value: 1.8V, ports: {Np: VDD, Nn: GND}\n]\nExtra Info: The circuit is a common-source (CS) amplifier stage with NMOS M1. The resistor RD is connected between the drain of M1 and VDD, and the source of M1 is grounded. The gate of M1 is connected to Vin, and the output is taken from the drain, labeled as Vout. The voltage supply is 1.8V.\n\nFigure 7.6 Example of CS stage.\n\nSolution:\n$$\n\\begin{align*}\ng_{m} & =\\sqrt{2 \\mu_{n} C_{o x} \\frac{W}{L} I_{D}}  \\tag{7.38}\\\\\n& =\\frac{1}{300 \\Omega} . \\tag{7.39}\n\\end{align*}\n$$\n\nThus,\n$$\n\\begin{align*}\nA_{v} & =-g_{m} R_{D}  \\tag{7.40}\\\\\n& =3.33 \\tag{7.41}\n\\end{align*}\n$$\n\nTo verify the operation region, we first determine the gate-source voltage:\n$$\n\\begin{align*}\nV_{G S} & =V_{T H}+\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x} \\frac{W}{L}}}  \\tag{7.42}\\\\\n& =1.1 \\mathrm{~V} \\tag{7.43}\n\\end{align*}\n$$\n\n[^4]The drain voltage equals $V_{D D}-R_{D} I_{D}=0.8 \\mathrm{~V}$. Since $V_{G S}-V_{T H}=0.6 \\mathrm{~V}$, the device indeed operates in saturation with a margin of 0.2 V from the triode region. For instance, if $R_{D}$ is doubled to increase $A_{v}$, $M_{1}$ enters the triode region, reducing its transconductance.\n\nExercise: Determine the value of $V_{T H}$ that places $M_{1}$ at the edge of saturation.\n\nSince MOSFET gate terminals draw negligible current at low frequencies, the CS amplifier is said to provide infinite current gain. In contrast, the current gain of a common-emitter stage equals $\\beta$.\n\nNext, let's compute the I/O impedances of the CS amplifier. Given the negligible gate current at low frequencies,\n$$\n\\begin{equation*}\nR_{i n}=\\infty \\tag{7.44}\n\\end{equation*}\n$$\na contrast to the CE stage (where $R_{i n}=r_{\\pi}$). The high input impedance of the CS topology is crucial in many analog circuits.\n\nThe similarity between the small-signal models of CE and CS stages suggests that the output impedance of the CS amplifier is simply\n$$\n\\begin{equation*}\nR_{\\text {out }}=R_{D} \\tag{7.45}\n\\end{equation*}\n$$\nas seen in Fig. 7.7.\n\nImage Description:\n[\nname: V1, type: VoltageSource, value: V1, ports: {Np: V1, Nn: GND}\nname: g_mv1, type: VoltageControlledCurrentSource, ports: {Np: V1, Nn: Vx}\nname: RD, type: Resistor, value: RD, ports: {N1: Vx, N2: GND}\nname: Vx, type: VoltageSource, value: Vx, ports: {Np: Vx, Nn: GND}\n]\nExtra Info: The circuit is a small-signal model of a common-source amplifier with channel-length modulation. The voltage source V1 provides the input signal, the voltage-controlled current source g_mv1 models the transconductance of the MOSFET, RD is the load resistor, and Vx is the output voltage across the load.\n\nFigure 7.7 Output impedance of CS stage.\n\nIn practice, channel-length modulation may not be negligible, especially with large $R_{D}$. The small-signal model of the CS topology is thus modified as shown in Fig. 7.8, revealing that\n$$\n\\begin{align*}\nA_{v} & =-g_{m}\\left(R_{D} \\| r_{O}\\right)  \\tag{7.46}\\\\\nR_{\\text {in }} & =\\infty  \\tag{7.47}\\\\\nR_{\\text {out }} & =R_{D} \\| r_{O} . \\tag{7.48}\n\\end{align*}\n$$\n\nIn other words, channel-length modulation impacts the CS stage similarly to how the Early effect affects the CE stage.\n\nImage Description:\n[\nname: v1, type: VoltageSource, value: v1, ports: {Np: Vx, Nn: GND}\nname: g_m v1, type: VoltageControlledCurrentSource, value: g_m v1, ports: {Np: GND, Nn: Vx}\nname: ro, type: Resistor, value: ro, ports: {N1: Vx, N2: Vx}\nname: RD, type: Resistor, value: RD, ports: {N1: Vx, N2: GND}\nname: vx, type: VoltageSource, value: vx, ports: {Np: Vx, Nn: GND}\n]\nExtra Info: The circuit is a small-signal model of a common-source amplifier with channel-length modulation. It includes a voltage-controlled current source, resistors, and voltage sources. The voltage gain is affected by the parallel combination of RD and ro.\n\nFigure 7.8 Effect of channel-length modulation on CS stage.\n\nExample 7.5:\n\nAssuming $M_{1}$ operates in saturation, determine the voltage gain of the circuit in Fig. 7.9(a) and plot it as a function of the transistor channel length, keeping other parameters constant.\n\nImage Description (a):\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: Vout}\nname: I1, type: CurrentSource, ports: {Np: VDD, Nn: Vout}\n]\nExtra Info: The circuit is a common-source amplifier with channel-length modulation. The voltage gain is determined by the transconductance (gm) and the output resistance (ro) of the NMOS transistor M1. The ideal current source provides an infinite small-signal resistance.\n\n(a)\n\nImage Description (b):\nThe graph plots voltage gain (A_v) against device channel length (L) for a common-source amplifier. The x-axis represents channel length (L), and the y-axis represents voltage gain (A_v), both on linear scales.\n\nThe curve starts at a lower gain value and increases with channel length, indicating a positive correlation. The relationship is nonlinear, with the rate of gain increase diminishing as channel length grows, possibly approaching an asymptotic value.\n\nNo specific annotations, markers, or numerical values are provided on the graph. The trend shows that longer channel lengths lead to higher gains due to increased output resistance (r_O), consistent with the equation A_v = -g_m * r_O, where r_O is inversely proportional to the channel-length modulation parameter (λ).\n\n(b)\n\nFigure 7.9 (a) CS stage with ideal current source as a load, (b) gain as a function of device channel length.\n\nSolution: The ideal current source presents an infinite small-signal resistance, allowing us to use Eq. (7.46) with $R_{D}=\\infty$:\n$$\n\\begin{equation*}\nA_{v}=-g_{m} r_{O} \\tag{7.49}\n\\end{equation*}\n$$\n\nThis represents the highest voltage gain a single transistor can achieve. Writing $g_{m}=\\sqrt{2 \\mu_{n} C_{o x}(W / L) I_{D}}$ and $r_{O}=\\left(\\lambda I_{D}\\right)^{-1}$, we get\n$$\n\\begin{equation*}\n\\left|A_{v}\\right|=\\frac{\\sqrt{2 \\mu_{n} C_{o x} \\frac{W}{L}}}{\\lambda \\sqrt{I_{D}}} \\tag{7.50}\n\\end{equation*}\n$$\n\nThis result suggests that $\\left|A_{v}\\right|$ decreases with increasing $L$, but considering $\\lambda \\propto L^{-1}$ from Chapter 6,\n$$\n\\begin{equation*}\n\\left|A_{v}\\right| \\propto \\sqrt{\\frac{2 \\mu_{n} C_{o x} W L}{I_{D}}} \\tag{7.51}\n\\end{equation*}\n$$\n\nThus, $\\left|A_{v}\\right|$ actually increases with $L$ [Fig. 7.9(b)].\n\nRepeat the above example if a resistor of value $R_{1}$ is connected between the gate and drain of $M_{1}$."
},
{
    "text": "As depicted in Fig. 7.5(a), the fundamental CS stage resembles the common-emitter configuration, with the input applied to the gate and the output measured at the drain. For small signals, $M_{1}$ translates input voltage variations into proportional drain current changes, and $R_{D}$ converts these drain currents into the output voltage. Neglecting channel-length modulation, the small-signal model in Fig. 7.5(b) results in $v_{\\text {in }}=v_{1}$ and $v_{\\text {out }}=-g_{m} v_{1} R_{D}$. Thus,\n\n$$\n\\begin{equation*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}}=-g_{m} R_{D} \\tag{7.34}\n\\end{equation*}\n$$\n\nThis outcome is akin to that derived for the common-emitter stage in Chapter 5.\n\nImage Description (a):\n- **M1**: NMOS, Ports: S=GND, D=Vout, G=Vin\n- **RD**: Resistor, Value: RD, Ports: N1=VDD, N2=Vout\n- **gmV1**: Voltage-Controlled Current Source, Ports: Np=Vin, Nn=GND\n\nExtra Info: This represents a common-source amplifier circuit with an NMOS transistor. The input voltage is applied to the gate of M1, and the output is taken from the drain. The resistor RD is connected between VDD and the drain of M1, forming the load. The voltage-controlled current source models the MOSFET's transconductance in the small-signal model.\n\nImage Description (b):\n- **M1**: NMOS, Ports: S=GND, D=Vout, G=Vin\n- **RD**: Resistor, Value: RD, Ports: N1=Vout, N2=GND\n- **gmV1**: Voltage-Controlled Current Source, Ports: Np=Vout, Nn=GND\n\nExtra Info: The circuit diagram (b) illustrates the small-signal model of a common-source amplifier. The NMOS transistor M1 converts input voltage variations to drain current changes, and the resistor RD transforms these drain currents to output voltage. The voltage-controlled current source gmV1 models the transconductance of the NMOS transistor.\n\nFigure 7.5 (a) Common-source stage, (b) small-signal model.\n\nThe voltage gain of the CS stage is also constrained by the supply voltage. Given $g_{m}=\\sqrt{2 \\mu_{n} C_{o x}(W / L) I_{D}}$, we obtain\n\n$$\n\\begin{equation*}\nA_{v}=-\\sqrt{2 \\mu_{n} C_{o x} \\frac{W}{L} I_{D}} R_{D}, \\tag{7.35}\n\\end{equation*}\n$$\n\nindicating that increasing $I_{D}$ or $R_{D}$ also increases the voltage drop across $R_{D}\\left(=I_{D} R_{D}\\right)^{1}$. For $M_{1}$ to remain in saturation,\n\n$$\n\\begin{equation*}\nV_{D D}-R_{D} I_{D}>V_{G S}-V_{T H} \\tag{7.36}\n\\end{equation*}\n$$\n\nwhich simplifies to\n\n$$\n\\begin{equation*}\nR_{D} I_{D}<V_{D D}-\\left(V_{G S}-V_{T H}\\right) \\tag{7.37}\n\\end{equation*}\n$$\n\nExample: Calculate the small-signal voltage gain of the CS stage shown in Fig. 7.6 if $I_{D}=1 \\mathrm{~mA}$, $7.4 \\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}$, $V_{T H}=0.5 \\mathrm{~V}$, and $\\lambda=0$. Verify that $M_{1}$ operates in saturation.\n\nImage Description:\n- **M1**: NMOS, Ports: S=GND, D=Vout, G=Vin\n- **RD**: Resistor, Value: 1k, Ports: N1=VDD, N2=Vout\n- **VDD**: Voltage Source, Value: 1.8V, Ports: Np=VDD, Nn=GND\n\nExtra Info: This circuit is a common-source (CS) amplifier stage with NMOS M1. The resistor RD is connected between the drain of M1 and VDD, and the source of M1 is grounded. The gate of M1 is connected to Vin, and the output is taken from the drain, labeled as Vout. The voltage supply is 1.8V.\n\nFigure 7.6 Example of CS stage.\n\nSolution:\n$$\n\\begin{align*}\ng_{m} & =\\sqrt{2 \\mu_{n} C_{o x} \\frac{W}{L} I_{D}}  \\tag{7.38}\\\\\n& =\\frac{1}{300 \\Omega} . \\tag{7.39}\n\\end{align*}\n$$\n\nThus,\n$$\n\\begin{align*}\nA_{v} & =-g_{m} R_{D}  \\tag{7.40}\\\\\n& =3.33 \\tag{7.41}\n\\end{align*}\n$$\n\nTo verify the operation region, we first determine the gate-source voltage:\n$$\n\\begin{align*}\nV_{G S} & =V_{T H}+\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x} \\frac{W}{L}}}  \\tag{7.42}\\\\\n& =1.1 \\mathrm{~V} \\tag{7.43}\n\\end{align*}\n$$\n\nThe drain voltage equals $V_{D D}-R_{D} I_{D}=0.8 \\mathrm{~V}$. Since $V_{G S}-V_{T H}=0.6 \\mathrm{~V}$, the device indeed operates in saturation with a margin of 0.2 V from the triode region. For instance, if $R_{D}$ is doubled to double $A_{v}$, $M_{1}$ enters the triode region, reducing its transconductance.\n\nExercise: Determine the $V_{T H}$ value that places $M_{1}$ at the edge of saturation.\n\nSince MOSFET gate terminals draw negligible current at very low frequencies, the CS amplifier is said to provide infinite current gain. In contrast, the common-emitter stage has a current gain equal to $\\beta$.\n\nNext, we compute the I/O impedances of the CS amplifier. With zero gate current at low frequencies,\n\n$$\n\\begin{equation*}\nR_{i n}=\\infty \\tag{7.44}\n\\end{equation*}\n$$\n\nThis contrasts with the CE stage, where $R_{i n}$ equals $r_{\\pi}$. The high input impedance of the CS topology is crucial in many analog circuits.\n\nThe similarity between the small-signal models of CE and CS stages suggests that the output impedance of the CS amplifier is simply\n\n$$\n\\begin{equation*}\nR_{\\text {out }}=R_{D} \\tag{7.45}\n\\end{equation*}\n$$\n\nThis is also evident from Fig. 7.7.\n\nImage Description:\n- **V1**: Voltage Source, Value: V1, Ports: Np=V1, Nn=GND\n- **g_mv1**: Voltage-Controlled Current Source, Ports: Np=V1, Nn=Vx\n- **RD**: Resistor, Value: RD, Ports: N1=Vx, N2=GND\n- **Vx**: Voltage Source, Value: Vx, Ports: Np=Vx, Nn=GND\n\nExtra Info: This circuit is a small-signal model of a common-source amplifier with channel-length modulation. The voltage source V1 provides the input signal, while the voltage-controlled current source g_mv1 models the transconductance of the MOSFET. RD is the load resistor, and Vx is the output voltage across the load.\n\nFigure 7.7 Output impedance of CS stage.\n\nIn practice, channel-length modulation may not be negligible, especially with large $R_{D}$. The small-signal model of the CS topology is thus modified as shown in Fig. 7.8, revealing that\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m}\\left(R_{D} \\| r_{O}\\right)  \\tag{7.46}\\\\\nR_{\\text {in }} & =\\infty  \\tag{7.47}\\\\\nR_{\\text {out }} & =R_{D} \\| r_{O} . \\tag{7.48}\n\\end{align*}\n$$\n\nIn essence, channel-length modulation affects the CS stage similarly to how the Early effect impacts the CE stage.\n\nImage Description:\n- **v1**: Voltage Source, Value: v1, Ports: Np=Vx, Nn=GND\n- **g_m v1**: Voltage-Controlled Current Source, Value: g_m v1, Ports: Np=GND, Nn=Vx\n- **ro**: Resistor, Value: ro, Ports: N1=Vx, N2=Vx\n- **RD**: Resistor, Value: RD, Ports: N1=Vx, N2=GND\n- **vx**: Voltage Source, Value: vx, Ports: Np=Vx, Nn=GND\n\nExtra Info: This circuit is a small-signal model of a common-source amplifier with channel-length modulation. It includes a voltage-controlled current source, resistors, and voltage sources. The voltage gain is affected by the parallel combination of RD and ro.\n\nFigure 7.8 Effect of channel-length modulation on CS stage.\n\nExample 7.5:\n\nAssuming $M_{1}$ operates in saturation, determine the voltage gain of the circuit shown in Fig. 7.9(a) and plot it as a function of the transistor channel length, keeping other parameters constant.\n\nImage Description (a):\n- **M1**: NMOS, Ports: S=GND, D=Vout, G=Vin\n- **VDD**: Voltage Source, Value: VDD, Ports: Np=VDD, Nn=Vout\n- **I1**: Current Source, Ports: Np=VDD, Nn=Vout\n\nExtra Info: This circuit is a common-source amplifier with channel-length modulation. The voltage gain is determined by the transconductance (gm) and the output resistance (ro) of the NMOS transistor M1. The ideal current source provides an infinite small-signal resistance.\n\n(a)\n\nImage Description (b):\nThe graph plots voltage gain (A_v) against device channel length (L) for a common-source amplifier. The x-axis represents channel length (L), and the y-axis represents voltage gain (A_v), both on linear scales.\n\nThe curve starts at a lower gain value and increases with channel length, indicating a positive correlation between voltage gain and channel length. The relationship is nonlinear, with the rate of gain increase diminishing as channel length grows, possibly approaching an asymptotic value. No specific annotations, markers, or numerical values are provided on the graph. The trend highlights the impact of channel-length modulation on amplifier gain, where longer channel lengths lead to higher gains due to increased output resistance (r_O), consistent with the equation A_v = -g_m * r_O, where r_O is inversely proportional to the channel-length modulation parameter (λ).\n\n(b)\n\nFigure 7.9 (a) CS stage with ideal current source as a load, (b) gain as a function of device channel length.\n\nSolution: The ideal current source presents an infinite small-signal resistance, allowing us to use Eq. (7.46) with $R_{D}=\\infty$:\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m} r_{O} \\tag{7.49}\n\\end{equation*}\n$$\n\nThis represents the highest voltage gain a single transistor can achieve. Writing $g_{m}=\\sqrt{2 \\mu_{n} C_{o x}(W / L) I_{D}}$ and $r_{O}=\\left(\\lambda I_{D}\\right)^{-1}$, we get\n\n$$\n\\begin{equation*}\n\\left|A_{v}\\right|=\\frac{\\sqrt{2 \\mu_{n} C_{o x} \\frac{W}{L}}}{\\lambda \\sqrt{I_{D}}} \\tag{7.50}\n\\end{equation*}\n$$\n\nThis result suggests that $\\left|A_{v}\\right|$ decreases with increasing $L$, but considering $\\lambda \\propto L^{-1}$ from Chapter 6,\n\n$$\n\\begin{equation*}\n\\left|A_{v}\\right| \\propto \\sqrt{\\frac{2 \\mu_{n} C_{o x} W L}{I_{D}}} \\tag{7.51}\n\\end{equation*}\n$$\n\nThus, $\\left|A_{v}\\right|$ actually increases with $L$ [Fig. 7.9(b)].\n\nRepeat the above example if a resistor of value $R_{1}$ is connected between the gate and drain of $M_{1}$."
},
{
    "text": "As depicted in Fig. 7.5(a), the fundamental CS stage resembles the common-emitter configuration, with the input applied to the gate and the output measured at the drain. For small signals, $M_{1}$ translates input voltage variations into proportional drain current changes, and $R_{D}$ converts these drain currents into the output voltage. Neglecting channel-length modulation, the small-signal model in Fig. 7.5(b) yields $v_{\\text {in }}=v_{1}$ and $v_{\\text {out }}=-g_{m} v_{1} R_{D}$. Thus,\n\n$$\n\\begin{equation*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}}=-g_{m} R_{D} \\tag{7.34}\n\\end{equation*}\n$$\n\nThis result parallels that derived for the common-emitter stage in Chapter 5.\n\nImage Description (a):\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: Vin, Nn: GND}\n]\nExtra Info: This is a common-source amplifier circuit with an NMOS transistor. The input voltage is applied to the gate of M1, and the output is taken from the drain. The resistor RD is connected between VDD and the drain of M1, forming the load. The voltage-controlled current source represents the transconductance of the MOSFET in the small-signal model.\n\nImage Description (b):\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: Vout, N2: GND}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: Vout, Nn: GND}\n]\nExtra Info: The circuit diagram (b) represents the small-signal model of a common-source amplifier. The NMOS transistor M1 converts input voltage variations to drain current changes, and the resistor RD transforms these drain currents to output voltage. The voltage-controlled current source gmV1 models the transconductance of the NMOS transistor.\n\nFigure 7.5 (a) Common-source stage, (b) small-signal model.\n\nThe voltage gain of the CS stage is also constrained by the supply voltage. Given $g_{m}=\\sqrt{2 \\mu_{n} C_{o x}(W / L) I_{D}}$, we obtain\n\n$$\n\\begin{equation*}\nA_{v}=-\\sqrt{2 \\mu_{n} C_{o x} \\frac{W}{L} I_{D}} R_{D}, \\tag{7.35}\n\\end{equation*}\n$$\n\nindicating that increasing $I_{D}$ or $R_{D}$ raises the voltage drop across $R_{D}\\left(=I_{D} R_{D}\\right)^{1}$. For $M_{1}$ to remain in saturation,\n\n$$\n\\begin{equation*}\nV_{D D}-R_{D} I_{D}>V_{G S}-V_{T H} \\tag{7.36}\n\\end{equation*}\n$$\n\nor equivalently,\n\n$$\n\\begin{equation*}\nR_{D} I_{D}<V_{D D}-\\left(V_{G S}-V_{T H}\\right) \\tag{7.37}\n\\end{equation*}\n$$\n\nExample: Calculate the small-signal voltage gain of the CS stage shown in Fig. 7.6 if $I_{D}=1 \\mathrm{~mA}$, $7.4 \\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}$, $V_{T H}=0.5 \\mathrm{~V}$, and $\\lambda=0$. Verify that $M_{1}$ operates in saturation.\n\nImage Description: Figure 7.6\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: RD, type: Resistor, value: 1k, ports: {N1: VDD, N2: Vout}\nname: VDD, type: VoltageSource, value: 1.8V, ports: {Np: VDD, Nn: GND}\n]\nExtra Info: The circuit is a common-source (CS) amplifier stage with NMOS M1. The resistor RD is connected between the drain of M1 and VDD, and the source of M1 is grounded. The gate of M1 is connected to Vin, and the output is taken from the drain, labeled as Vout. The voltage supply is 1.8V.\n\nFigure 7.6 Example of CS stage.\n\nSolution:\n\n$$\n\\begin{align*}\ng_{m} & =\\sqrt{2 \\mu_{n} C_{o x} \\frac{W}{L} I_{D}}  \\tag{7.38}\\\\\n& =\\frac{1}{300 \\Omega} . \\tag{7.39}\n\\end{align*}\n$$\n\nThus,\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m} R_{D}  \\tag{7.40}\\\\\n& =3.33 \\tag{7.41}\n\\end{align*}\n$$\n\nTo confirm the operation region, we first determine the gate-source voltage:\n\n$$\n\\begin{align*}\nV_{G S} & =V_{T H}+\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x} \\frac{W}{L}}}  \\tag{7.42}\\\\\n& =1.1 \\mathrm{~V} \\tag{7.43}\n\\end{align*}\n$$\n\n[^4]The drain voltage equals $V_{D D}-R_{D} I_{D}=0.8 \\mathrm{~V}$. Since $V_{G S}-V_{T H}=0.6 \\mathrm{~V}$, the device indeed operates in saturation, with a margin of 0.2 V from the triode region. For instance, doubling $R_{D}$ to double $A_{v}$ would cause $M_{1}$ to enter the triode region, reducing its transconductance.\n\nExercise: Determine the value of $V_{T H}$ that positions $M_{1}$ at the edge of saturation.\n\nGiven that the gate of MOSFETs draws negligible current (at very low frequencies), the CS amplifier is said to provide infinite current gain. In contrast, the current gain of a common-emitter stage equals $\\beta$.\n\nNext, let's compute the I/O impedances of the CS amplifier. With zero gate current (at low frequencies),\n\n$$\n\\begin{equation*}\nR_{i n}=\\infty \\tag{7.44}\n\\end{equation*}\n$$\n\nThis contrasts with the CE stage (where $R_{i n}$ equals $r_{\\pi}$). The high input impedance of the CS topology is crucial in many analog circuits.\n\nThe similarity between the small-signal models of CE and CS stages suggests that the output impedance of the CS amplifier is simply\n\n$$\n\\begin{equation*}\nR_{\\text {out }}=R_{D} \\tag{7.45}\n\\end{equation*}\n$$\n\nThis is also evident from Fig. 7.7.\n\nImage Description: Figure 7.8\n[\nname: V1, type: VoltageSource, value: V1, ports: {Np: V1, Nn: GND}\nname: g_mv1, type: VoltageControlledCurrentSource, ports: {Np: V1, Nn: Vx}\nname: RD, type: Resistor, value: RD, ports: {N1: Vx, N2: GND}\nname: Vx, type: VoltageSource, value: Vx, ports: {Np: Vx, Nn: GND}\n]\nExtra Info: The circuit is a small-signal model of a common-source amplifier with channel-length modulation. The voltage source V1 provides the input signal, while the voltage-controlled current source g_mv1 models the transconductance of the MOSFET. RD is the load resistor, and Vx is the output voltage across the load.\n\nFigure 7.7 Output impedance of CS stage.\n\nIn practice, channel-length modulation may not be negligible, especially with large $R_{D}$. The small-signal model of the CS topology is thus modified as shown in Fig. 7.8, revealing that\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m}\\left(R_{D} \\| r_{O}\\right)  \\tag{7.46}\\\\\nR_{\\text {in }} & =\\infty  \\tag{7.47}\\\\\nR_{\\text {out }} & =R_{D} \\| r_{O} . \\tag{7.48}\n\\end{align*}\n$$\n\nIn other words, channel-length modulation and the Early effect similarly impact the CS and CE stages.\n\nImage Description: Figure 7.8\n[\nname: v1, type: VoltageSource, value: v1, ports: {Np: Vx, Nn: GND}\nname: g_m v1, type: VoltageControlledCurrentSource, value: g_m v1, ports: {Np: GND, Nn: Vx}\nname: ro, type: Resistor, value: ro, ports: {N1: Vx, N2: Vx}\nname: RD, type: Resistor, value: RD, ports: {N1: Vx, N2: GND}\nname: vx, type: VoltageSource, value: vx, ports: {Np: Vx, Nn: GND}\n]\nExtra Info: The circuit is a small-signal model of a common source amplifier with channel-length modulation. It includes a voltage-controlled current source, resistors, and voltage sources. The voltage gain is affected by the parallel combination of RD and ro.\n\nFigure 7.8 Effect of channel-length modulation on CS stage.\n\nExample 7.5:\n\nAssuming $M_{1}$ operates in saturation, determine the voltage gain of the circuit shown in Fig. 7.9(a) and plot it as a function of the transistor channel length, keeping other parameters constant.\n\nImage Description (a):\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: Vout}\nname: I1, type: CurrentSource, ports: {Np: VDD, Nn: Vout}\n]\nExtra Info: The circuit is a common source amplifier with channel-length modulation. The voltage gain is determined by the transconductance (gm) and the output resistance (ro) of the NMOS transistor M1. The ideal current source provides an infinite small-signal resistance.\n\n(a)\n\nImage Description (b):\nThe graph depicts voltage gain (A_v) versus device channel length (L) for a common source amplifier. The x-axis represents the channel length (L), and the y-axis represents the voltage gain (A_v), both on a linear scale. The curve starts at a lower gain value and increases with channel length, indicating a positive correlation. The relationship is nonlinear, with the rate of increase in gain diminishing as channel length increases, possibly approaching an asymptotic value. No specific annotations, markers, or numerical values are provided. The trend highlights the impact of channel length modulation on gain, where longer channel lengths lead to higher gains due to increased output resistance (r_O), consistent with the equation A_v = -g_m * r_O, where r_O is inversely proportional to the channel length modulation parameter (λ).\n\n(b)\n\nFigure 7.9 (a) CS stage with ideal current source as a load, (b) gain as a function of device channel length.\n\nSolution: The ideal current source presents an infinite small-signal resistance, allowing us to use Eq. (7.46) with $R_{D}=\\infty$:\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m} r_{O} \\tag{7.49}\n\\end{equation*}\n$$\n\nThis represents the highest voltage gain a single transistor can achieve. Writing $g_{m}=\\sqrt{2 \\mu_{n} C_{o x}(W / L) I_{D}}$ and $r_{O}=\\left(\\lambda I_{D}\\right)^{-1}$, we get\n\n$$\n\\begin{equation*}\n\\left|A_{v}\\right|=\\frac{\\sqrt{2 \\mu_{n} C_{o x} \\frac{W}{L}}}{\\lambda \\sqrt{I_{D}}} \\tag{7.50}\n\\end{equation*}\n$$\n\nThis result suggests that $\\left|A_{v}\\right|$ decreases as $L$ increases, but considering $\\lambda \\propto L^{-1}$ from Chapter 6:\n\n$$\n\\begin{equation*}\n\\left|A_{v}\\right| \\propto \\sqrt{\\frac{2 \\mu_{n} C_{o x} W L}{I_{D}}} \\tag{7.51}\n\\end{equation*}\n$$\n\nThus, $\\left|A_{v}\\right|$ actually increases with $L$ [Fig. 7.9(b)].\n\nRepeat the above example if a resistor of value $R_{1}$ is connected between the gate and drain of $M_{1}$."
},
{
    "text": "As depicted in Fig. 7.5(a), the fundamental CS stage resembles the common-emitter configuration, with the input applied to the gate and the output measured at the drain. For small signals, $M_{1}$ translates input voltage variations into proportional drain current changes, and $R_{D}$ converts these drain currents into the output voltage. If channel-length modulation is disregarded, the small-signal model in Fig. 7.5(b) yields $v_{\\text {in }}=v_{1}$ and $v_{\\text {out }}=-g_{m} v_{1} R_{D}$. Thus,\n\n$$\n\\begin{equation*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}}=-g_{m} R_{D} \\tag{7.34}\n\\end{equation*}\n$$\n\nThis outcome is akin to that derived for the common-emitter stage in Chapter 5.\n\nImage Description (a):\n- **M1**: NMOS, Ports: S=GND, D=Vout, G=Vin\n- **RD**: Resistor, Value: RD, Ports: N1=VDD, N2=Vout\n- **gmV1**: Voltage-Controlled Current Source, Ports: Np=Vin, Nn=GND\n\nExtra Info: This represents a common-source amplifier circuit with an NMOS transistor. The input voltage is applied to the gate of M1, and the output is taken from the drain. The resistor RD is connected between VDD and the drain of M1, forming the load. The voltage-controlled current source models the transconductance of the MOSFET in the small-signal model.\n\nImage Description (b):\n- **M1**: NMOS, Ports: S=GND, D=Vout, G=Vin\n- **RD**: Resistor, Value: RD, Ports: N1=Vout, N2=GND\n- **gmV1**: Voltage-Controlled Current Source, Ports: Np=Vout, Nn=GND\n\nExtra Info: The circuit diagram (b) illustrates the small-signal model of a common-source amplifier. The NMOS transistor M1 converts input voltage variations to drain current changes, and the resistor RD transforms these drain currents to output voltage. The voltage-controlled current source gmV1 models the transconductance of the NMOS transistor.\n\nFigure 7.5 (a) Common-source stage, (b) small-signal model.\n\nThe voltage gain of the CS stage is also constrained by the supply voltage. Given $g_{m}=\\sqrt{2 \\mu_{n} C_{o x}(W / L) I_{D}}$, we obtain\n\n$$\n\\begin{equation*}\nA_{v}=-\\sqrt{2 \\mu_{n} C_{o x} \\frac{W}{L} I_{D}} R_{D}, \\tag{7.35}\n\\end{equation*}\n$$\n\nindicating that increasing $I_{D}$ or $R_{D}$ raises the voltage drop across $R_{D}\\left(=I_{D} R_{D}\\right)$. For $M_{1}$ to remain in saturation,\n\n$$\n\\begin{equation*}\nV_{D D}-R_{D} I_{D}>V_{G S}-V_{T H} \\tag{7.36}\n\\end{equation*}\n$$\n\nwhich simplifies to\n\n$$\n\\begin{equation*}\nR_{D} I_{D}<V_{D D}-\\left(V_{G S}-V_{T H}\\right) \\tag{7.37}\n\\end{equation*}\n$$\n\nExample: Calculate the small-signal voltage gain of the CS stage shown in Fig. 7.6 if $I_{D}=1 \\mathrm{~mA}$, $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}$, $V_{T H}=0.5 \\mathrm{~V}$, and $\\lambda=0$. Verify that $M_{1}$ operates in saturation.\n\nImage Description:\n- **M1**: NMOS, Ports: S=GND, D=Vout, G=Vin\n- **RD**: Resistor, Value: 1k, Ports: N1=VDD, N2=Vout\n- **VDD**: Voltage Source, Value: 1.8V, Ports: Np=VDD, Nn=GND\n\nExtra Info: The circuit is a common-source (CS) amplifier stage with NMOS M1. The resistor RD is connected between the drain of M1 and VDD, and the source of M1 is grounded. The gate of M1 is connected to Vin, and the output is taken from the drain, labeled as Vout. The voltage supply is 1.8V.\n\nFigure 7.6 Example of CS stage.\n\nSolution:\n$$\n\\begin{align*}\ng_{m} & =\\sqrt{2 \\mu_{n} C_{o x} \\frac{W}{L} I_{D}}  \\tag{7.38}\\\\\n& =\\frac{1}{300 \\Omega} . \\tag{7.39}\n\\end{align*}\n$$\n\nThus,\n$$\n\\begin{align*}\nA_{v} & =-g_{m} R_{D}  \\tag{7.40}\\\\\n& =3.33 \\tag{7.41}\n\\end{align*}\n$$\n\nTo verify the operation region, we first determine the gate-source voltage:\n$$\n\\begin{align*}\nV_{G S} & =V_{T H}+\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x} \\frac{W}{L}}}  \\tag{7.42}\\\\\n& =1.1 \\mathrm{~V} \\tag{7.43}\n\\end{align*}\n$$\n\nThe drain voltage equals $V_{D D}-R_{D} I_{D}=0.8 \\mathrm{~V}$. Since $V_{G S}-V_{T H}=0.6 \\mathrm{~V}$, the device indeed operates in saturation with a margin of 0.2 V from the triode region. For instance, if $R_{D}$ is doubled to double $A_{v}$, $M_{1}$ enters the triode region, reducing its transconductance.\n\nExercise: Determine the $V_{T H}$ value that places $M_{1}$ at the edge of saturation.\n\nSince MOSFETs draw negligible gate current (at very low frequencies), the CS amplifier is said to have infinite current gain. In contrast, the common-emitter stage has a current gain equal to $\\beta$.\n\nNext, let's compute the I/O impedances of the CS amplifier. Given the negligible gate current at low frequencies,\n\n$$\n\\begin{equation*}\nR_{i n}=\\infty \\tag{7.44}\n\\end{equation*}\n$$\n\nThis contrasts with the CE stage, where $R_{i n}$ equals $r_{\\pi}$. The high input impedance of the CS topology is crucial in many analog circuits.\n\nThe similarity between the small-signal models of CE and CS stages suggests that the output impedance of the CS amplifier is simply\n\n$$\n\\begin{equation*}\nR_{\\text {out }}=R_{D} \\tag{7.45}\n\\end{equation*}\n$$\n\nThis is also evident from Fig. 7.7.\n\nImage Description:\n- **V1**: Voltage Source, Value: V1, Ports: Np=V1, Nn=GND\n- **g_mv1**: Voltage-Controlled Current Source, Ports: Np=V1, Nn=Vx\n- **RD**: Resistor, Value: RD, Ports: N1=Vx, N2=GND\n- **Vx**: Voltage Source, Value: Vx, Ports: Np=Vx, Nn=GND\n\nExtra Info: The circuit is a small-signal model of a common-source amplifier with channel-length modulation. The voltage source V1 provides the input signal, the voltage-controlled current source g_mv1 models the transconductance of the MOSFET, RD is the load resistor, and Vx is the output voltage across the load.\n\nFigure 7.7 Output impedance of CS stage.\n\nIn practice, channel-length modulation may not be negligible, especially with large $R_{D}$. The small-signal model of the CS topology is thus modified as shown in Fig. 7.8, revealing that\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m}\\left(R_{D} \\| r_{O}\\right)  \\tag{7.46}\\\\\nR_{\\text {in }} & =\\infty  \\tag{7.47}\\\\\nR_{\\text {out }} & =R_{D} \\| r_{O} . \\tag{7.48}\n\\end{align*}\n$$\n\nIn other words, channel-length modulation impacts the CS stage similarly to how the Early effect affects the CE stage.\n\nImage Description:\n- **v1**: Voltage Source, Value: v1, Ports: Np=Vx, Nn=GND\n- **g_m v1**: Voltage-Controlled Current Source, Value: g_m v1, Ports: Np=GND, Nn=Vx\n- **ro**: Resistor, Value: ro, Ports: N1=Vx, N2=Vx\n- **RD**: Resistor, Value: RD, Ports: N1=Vx, N2=GND\n- **vx**: Voltage Source, Value: vx, Ports: Np=Vx, Nn=GND\n\nExtra Info: The circuit is a small-signal model of a common-source amplifier with channel-length modulation. It includes a voltage-controlled current source, resistors, and voltage sources. The voltage gain is affected by the parallel combination of RD and ro.\n\nFigure 7.8 Effect of channel-length modulation on CS stage.\n\nExample 7.5:\n\nAssuming $M_{1}$ operates in saturation, determine the voltage gain of the circuit shown in Fig. 7.9(a) and plot it as a function of the transistor channel length, keeping other parameters constant.\n\nImage Description (a):\n- **M1**: NMOS, Ports: S=GND, D=Vout, G=Vin\n- **VDD**: Voltage Source, Value: VDD, Ports: Np=VDD, Nn=Vout\n- **I1**: Current Source, Ports: Np=VDD, Nn=Vout\n\nExtra Info: The circuit is a common-source amplifier with channel-length modulation. The voltage gain is determined by the transconductance (gm) and the output resistance (ro) of the NMOS transistor M1. The ideal current source provides an infinite small-signal resistance.\n\n(a)\n\nImage Description (b):\nThe graph plots voltage gain (A_v) versus device channel length (L) for a common-source amplifier. The x-axis represents channel length (L), and the y-axis represents voltage gain (A_v), both on linear scales.\n\nThe curve starts at a lower gain value and increases with channel length, indicating a positive correlation between voltage gain and channel length. The relationship is nonlinear, with the rate of gain increase diminishing as channel length increases, possibly approaching an asymptotic value. No specific annotations, markers, or numerical values are provided. The trend highlights the impact of channel-length modulation on gain, where longer channel lengths lead to higher gains due to increased output resistance (r_O), consistent with the equation A_v = -g_m * r_O, where r_O is inversely proportional to the channel-length modulation parameter (λ).\n\n(b)\n\nFigure 7.9 (a) CS stage with ideal current source as load, (b) gain as a function of device channel length.\n\nSolution: The ideal current source presents an infinite small-signal resistance, allowing us to use Eq. (7.46) with $R_{D}=\\infty$:\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m} r_{O} \\tag{7.49}\n\\end{equation*}\n$$\n\nThis represents the highest voltage gain a single transistor can provide. Using $g_{m}=\\sqrt{2 \\mu_{n} C_{o x}(W / L) I_{D}}$ and $r_{O}=\\left(\\lambda I_{D}\\right)^{-1}$, we get\n\n$$\n\\begin{equation*}\n\\left|A_{v}\\right|=\\frac{\\sqrt{2 \\mu_{n} C_{o x} \\frac{W}{L}}}{\\lambda \\sqrt{I_{D}}} \\tag{7.50}\n\\end{equation*}\n$$\n\nThis suggests that $\\left|A_{v}\\right|$ decreases with increasing $L$, but considering $\\lambda \\propto L^{-1}$ from Chapter 6:\n\n$$\n\\begin{equation*}\n\\left|A_{v}\\right| \\propto \\sqrt{\\frac{2 \\mu_{n} C_{o x} W L}{I_{D}}} \\tag{7.51}\n\\end{equation*}\n$$\n\nThus, $\\left|A_{v}\\right|$ actually increases with $L$ [Fig. 7.9(b)].\n\nRepeat the above example if a resistor of value $R_{1}$ is connected between the gate and drain of $M_{1}$."
},
{
    "text": "As depicted in Fig. 7.5(a), the fundamental CS stage resembles the common-emitter configuration, with the input applied to the gate and the output measured at the drain. For small signals, $M_{1}$ translates input voltage variations into proportional drain current changes, and $R_{D}$ converts these drain currents into the output voltage. Ignoring channel-length modulation, the small-signal model in Fig. 7.5(b) gives $v_{\\text {in }}=v_{1}$ and $v_{\\text {out }}=-g_{m} v_{1} R_{D}$. Thus,\n\n$$\n\\begin{equation*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}}=-g_{m} R_{D} \\tag{7.34}\n\\end{equation*}\n$$\n\nThis result is analogous to that derived for the common-emitter stage in Chapter 5.\n\nImage Description (a):\n- Name: M1, Type: NMOS, Ports: {S: GND, D: Vout, G: Vin}\n- Name: RD, Type: Resistor, Value: RD, Ports: {N1: VDD, N2: Vout}\n- Name: gmV1, Type: VoltageControlledCurrentSource, Ports: {Np: Vin, Nn: GND}\nExtra Info: This represents a common-source amplifier circuit with an NMOS transistor. The input voltage is applied to the gate of M1, and the output is taken from the drain. RD is connected between VDD and the drain of M1, serving as the load. The voltage-controlled current source depicts the MOSFET's transconductance in the small-signal model.\n\nImage Description (b):\n- Name: M1, Type: NMOS, Ports: {S: GND, D: Vout, G: Vin}\n- Name: RD, Type: Resistor, Value: RD, Ports: {N1: Vout, N2: GND}\n- Name: gmV1, Type: VoltageControlledCurrentSource, Ports: {Np: Vout, Nn: GND}\nExtra Info: The circuit diagram (b) illustrates the small-signal model of a common-source amplifier. The NMOS transistor M1 converts input voltage variations to drain current changes, and RD transforms these drain currents to output voltage. The voltage-controlled current source gmV1 models the transconductance of the NMOS transistor.\n\nFigure 7.5 (a) Common-source stage, (b) small-signal model.\n\nThe voltage gain of the CS stage is also constrained by the supply voltage. Given $g_{m}=\\sqrt{2 \\mu_{n} C_{o x}(W / L) I_{D}}$, we obtain\n\n$$\n\\begin{equation*}\nA_{v}=-\\sqrt{2 \\mu_{n} C_{o x} \\frac{W}{L} I_{D}} R_{D}, \\tag{7.35}\n\\end{equation*}\n$$\n\nindicating that increasing $I_{D}$ or $R_{D}$ raises the voltage drop across $R_{D}\\left(=I_{D} R_{D}\\right)^{1}$. For $M_{1}$ to remain in saturation,\n\n$$\n\\begin{equation*}\nV_{D D}-R_{D} I_{D}>V_{G S}-V_{T H} \\tag{7.36}\n\\end{equation*}\n$$\n\nwhich simplifies to\n\n$$\n\\begin{equation*}\nR_{D} I_{D}<V_{D D}-\\left(V_{G S}-V_{T H}\\right) \\tag{7.37}\n\\end{equation*}\n$$\n\nExample: Calculate the small-signal voltage gain of the CS stage in Fig. 7.6, given $I_{D}=1 \\mathrm{~mA}$, $7.4 \\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}$, $V_{T H}=0.5 \\mathrm{~V}$, and $\\lambda=0$. Verify that $M_{1}$ operates in saturation.\n\nImage Description: Figure 7.6\n- Name: M1, Type: NMOS, Ports: {S: GND, D: Vout, G: Vin}\n- Name: RD, Type: Resistor, Value: 1k, Ports: {N1: VDD, N2: Vout}\n- Name: VDD, Type: VoltageSource, Value: 1.8V, Ports: {Np: VDD, Nn: GND}\nExtra Info: This circuit is a common-source (CS) amplifier stage with NMOS M1. RD is connected between the drain of M1 and VDD, and the source of M1 is grounded. The gate of M1 is connected to Vin, and the output is taken from the drain, labeled as Vout. The voltage supply is 1.8V.\n\nFigure 7.6 Example of CS stage.\n\nSolution:\n$$\n\\begin{align*}\ng_{m} & =\\sqrt{2 \\mu_{n} C_{o x} \\frac{W}{L} I_{D}}  \\tag{7.38}\\\\\n& =\\frac{1}{300 \\Omega} . \\tag{7.39}\n\\end{align*}\n$$\n\nThus,\n$$\n\\begin{align*}\nA_{v} & =-g_{m} R_{D}  \\tag{7.40}\\\\\n& =3.33 \\tag{7.41}\n\\end{align*}\n$$\n\nTo verify the operation region, we first calculate the gate-source voltage:\n$$\n\\begin{align*}\nV_{G S} & =V_{T H}+\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x} \\frac{W}{L}}}  \\tag{7.42}\\\\\n& =1.1 \\mathrm{~V} \\tag{7.43}\n\\end{align*}\n$$\n\nThe drain voltage equals $V_{D D}-R_{D} I_{D}=0.8 \\mathrm{~V}$. Since $V_{G S}-V_{T H}=0.6 \\mathrm{~V}$, $M_{1}$ indeed operates in saturation, with a 0.2 V margin from the triode region. For instance, doubling $R_{D}$ to double $A_{v}$ would cause $M_{1}$ to enter the triode region, reducing its transconductance.\n\nExercise: Determine the value of $V_{T H}$ that places $M_{1}$ at the edge of saturation.\n\nSince MOSFET gate terminals draw negligible current at low frequencies, the CS amplifier is said to provide infinite current gain. In contrast, the common-emitter stage has a current gain equal to $\\beta$.\n\nNow, let's compute the I/O impedances of the CS amplifier. With zero gate current at low frequencies,\n$$\n\\begin{equation*}\nR_{i n}=\\infty \\tag{7.44}\n\\end{equation*}\n$$\nThis contrasts with the CE stage, where $R_{i n}$ equals $r_{\\pi}$. The high input impedance of the CS topology is crucial in many analog circuits.\n\nThe similarity between the small-signal models of CE and CS stages suggests that the output impedance of the CS amplifier is simply\n$$\n\\begin{equation*}\nR_{\\text {out }}=R_{D} \\tag{7.45}\n\\end{equation*}\n$$\nThis is also evident from Fig. 7.7.\n\nImage Description: Figure 7.8\n- Name: V1, Type: VoltageSource, Value: V1, Ports: {Np: V1, Nn: GND}\n- Name: g_mv1, Type: VoltageControlledCurrentSource, Ports: {Np: V1, Nn: Vx}\n- Name: RD, Type: Resistor, Value: RD, Ports: {N1: Vx, N2: GND}\n- Name: Vx, Type: VoltageSource, Value: Vx, Ports: {Np: Vx, Nn: GND}\nExtra Info: This circuit is a small-signal model of a common-source amplifier with channel-length modulation. The voltage source V1 provides the input signal, the voltage-controlled current source g_mv1 models the transconductance of the MOSFET, RD is the load resistor, and Vx is the output voltage across the load.\n\nFigure 7.7 Output impedance of CS stage.\n\nIn practice, channel-length modulation may not be negligible, especially with large $R_{D}$. The small-signal model of the CS topology is thus modified as shown in Fig. 7.8, revealing that\n$$\n\\begin{align*}\nA_{v} & =-g_{m}\\left(R_{D} \\| r_{O}\\right)  \\tag{7.46}\\\\\nR_{\\text {in }} & =\\infty  \\tag{7.47}\\\\\nR_{\\text {out }} & =R_{D} \\| r_{O} . \\tag{7.48}\n\\end{align*}\n$$\nIn other words, channel-length modulation and the Early effect similarly impact the CS and CE stages, respectively.\n\nImage Description: Figure 7.8\n- Name: v1, Type: VoltageSource, Value: v1, Ports: {Np: Vx, Nn: GND}\n- Name: g_m v1, Type: VoltageControlledCurrentSource, Value: g_m v1, Ports: {Np: GND, Nn: Vx}\n- Name: ro, Type: Resistor, Value: ro, Ports: {N1: Vx, N2: Vx}\n- Name: RD, Type: Resistor, Value: RD, Ports: {N1: Vx, N2: GND}\n- Name: vx, Type: VoltageSource, Value: vx, Ports: {Np: Vx, Nn: GND}\nExtra Info: This circuit is a small-signal model of a common-source amplifier with channel-length modulation. It includes a voltage-controlled current source, resistors, and voltage sources. The voltage gain is affected by the parallel combination of RD and ro.\n\nFigure 7.8 Effect of channel-length modulation on CS stage.\n\nExample 7.5:\nAssuming $M_{1}$ operates in saturation, determine the voltage gain of the circuit in Fig. 7.9(a) and plot it as a function of the transistor channel length, keeping other parameters constant.\n\nImage Description (a):\n- Name: M1, Type: NMOS, Ports: {S: GND, D: Vout, G: Vin}\n- Name: VDD, Type: VoltageSource, Value: VDD, Ports: {Np: VDD, Nn: Vout}\n- Name: I1, Type: CurrentSource, Ports: {Np: VDD, Nn: Vout}\nExtra Info: This circuit is a common-source amplifier with channel-length modulation. The voltage gain is determined by the transconductance (gm) and the output resistance (ro) of the NMOS transistor M1. The ideal current source provides an infinite small-signal resistance.\n\n(a)\n\nImage Description (b):\nThe graph depicts voltage gain (A_v) versus device channel length (L) for a common-source amplifier. The x-axis represents channel length (L), and the y-axis represents voltage gain (A_v), both on a linear scale. The curve starts at a lower gain value and increases with channel length, indicating a positive correlation. The relationship is nonlinear, with the rate of gain increase diminishing as channel length grows, possibly approaching an asymptotic value. No specific annotations, markers, or numerical values are provided. The trend shows the impact of channel-length modulation on gain, where longer channel lengths lead to higher gains due to increased output resistance (r_O), consistent with $A_v = -g_m * r_O$ and $r_O \\propto \\lambda^{-1}$.\n\n(b)\n\nFigure 7.9 (a) CS stage with ideal current source as a load, (b) gain as a function of device channel length.\n\nSolution: The ideal current source presents an infinite small-signal resistance, allowing use of Eq. (7.46) with $R_{D}=\\infty$:\n$$\n\\begin{equation*}\nA_{v}=-g_{m} r_{O} \\tag{7.49}\n\\end{equation*}\n$$\nThis represents the highest voltage gain a single transistor can provide. Writing $g_{m}=\\sqrt{2 \\mu_{n} C_{o x}(W / L) I_{D}}$ and $r_{O}=\\left(\\lambda I_{D}\\right)^{-1}$, we get\n$$\n\\begin{equation*}\n\\left|A_{v}\\right|=\\frac{\\sqrt{2 \\mu_{n} C_{o x} \\frac{W}{L}}}{\\lambda \\sqrt{I_{D}}} \\tag{7.50}\n\\end{equation*}\n$$\nThis suggests $\\left|A_{v}\\right|$ decreases with increasing $L$, but since $\\lambda \\propto L^{-1}$ from Chapter 6,\n$$\n\\begin{equation*}\n\\left|A_{v}\\right| \\propto \\sqrt{\\frac{2 \\mu_{n} C_{o x} W L}{I_{D}}} \\tag{7.51}\n\\end{equation*}\n$$\nThus, $\\left|A_{v}\\right|$ actually increases with $L$ [Fig. 7.9(b)].\n\nRepeat the above example if a resistor of value $R_{1}$ is connected between the gate and drain of $M_{1}$."
},
{
    "text": "As depicted in Fig. 7.5(a), the fundamental CS stage resembles the common-emitter configuration, with the input applied to the gate and the output measured at the drain. For small signals, $M_{1}$ translates input voltage variations into proportional drain current changes, and $R_{D}$ converts these drain currents into the output voltage. Neglecting channel-length modulation, the small-signal model in Fig. 7.5(b) gives $v_{\\text {in }}=v_{1}$ and $v_{\\text {out }}=-g_{m} v_{1} R_{D}$. Thus,\n\n$$\n\\begin{equation*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}}=-g_{m} R_{D} \\tag{7.34}\n\\end{equation*}\n$$\n\nThis result mirrors that obtained for the common-emitter stage in Chapter 5.\n\nImage Description (a):\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: Vin, Nn: GND}\n]\nExtra Info: This represents a common-source amplifier circuit with an NMOS transistor. The input voltage is applied to the gate of M1, and the output is taken from the drain. The resistor RD is connected between VDD and the drain of M1, forming the load. The voltage-controlled current source represents the transconductance of the MOSFET in the small-signal model.\n\nImage Description (b):\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: Vout, N2: GND}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: Vout, Nn: GND}\n]\nExtra Info: The circuit diagram (b) illustrates the small-signal model of a common-source amplifier. The NMOS transistor M1 converts input voltage variations to drain current changes, and the resistor RD transforms these drain currents to output voltage. The voltage-controlled current source gmV1 models the transconductance of the NMOS transistor.\n\nFigure 7.5 (a) Common-source stage, (b) small-signal model.\n\nThe voltage gain of the CS stage is also constrained by the supply voltage. Given $g_{m}=\\sqrt{2 \\mu_{n} C_{o x}(W / L) I_{D}}$, we have\n\n$$\n\\begin{equation*}\nA_{v}=-\\sqrt{2 \\mu_{n} C_{o x} \\frac{W}{L} I_{D}} R_{D}, \\tag{7.35}\n\\end{equation*}\n$$\n\nimplying that increasing $I_{D}$ or $R_{D}$ also increases the voltage drop across $R_{D}\\left(=I_{D} R_{D}\\right)^{1}$. For $M_{1}$ to remain in saturation,\n\n$$\n\\begin{equation*}\nV_{D D}-R_{D} I_{D}>V_{G S}-V_{T H} \\tag{7.36}\n\\end{equation*}\n$$\n\nor equivalently,\n\n$$\n\\begin{equation*}\nR_{D} I_{D}<V_{D D}-\\left(V_{G S}-V_{T H}\\right) \\tag{7.37}\n\\end{equation*}\n$$\n\nExample: Calculate the small-signal voltage gain of the CS stage shown in Fig. 7.6 if $I_{D}=1 \\mathrm{~mA}$, $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}$, $V_{T H}=0.5 \\mathrm{~V}$, and $\\lambda=0$. Verify that $M_{1}$ operates in saturation.\n\nImage Description:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: RD, type: Resistor, value: 1k, ports: {N1: VDD, N2: Vout}\nname: VDD, type: VoltageSource, value: 1.8V, ports: {Np: VDD, Nn: GND}\n]\nExtra Info: The circuit is a common-source (CS) amplifier stage with NMOS M1. The resistor RD is connected between the drain of M1 and VDD, and the source of M1 is grounded. The gate of M1 is connected to Vin, and the output is taken from the drain, labeled as Vout. The voltage supply is 1.8V.\n\nFigure 7.6 Example of CS stage.\n\nSolution: We have\n\n$$\n\\begin{align*}\ng_{m} & =\\sqrt{2 \\mu_{n} C_{o x} \\frac{W}{L} I_{D}}  \\tag{7.38}\\\\\n& =\\frac{1}{300 \\Omega} . \\tag{7.39}\n\\end{align*}\n$$\n\nThus,\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m} R_{D}  \\tag{7.40}\\\\\n& =3.33 \\tag{7.41}\n\\end{align*}\n$$\n\nTo verify the operation region, we first determine the gate-source voltage:\n\n$$\n\\begin{align*}\nV_{G S} & =V_{T H}+\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x} \\frac{W}{L}}}  \\tag{7.42}\\\\\n& =1.1 \\mathrm{~V} \\tag{7.43}\n\\end{align*}\n$$\n\n[^4]The drain voltage equals $V_{D D}-R_{D} I_{D}=0.8 \\mathrm{~V}$. Since $V_{G S}-V_{T H}=0.6 \\mathrm{~V}$, the device indeed operates in saturation with a margin of 0.2 V from the triode region. For instance, if $R_{D}$ is doubled to double $A_{v}$, $M_{1}$ enters the triode region, reducing its transconductance.\n\nExercise: Determine the value of $V_{T H}$ that places $M_{1}$ at the edge of saturation.\n\nSince MOSFETs draw zero gate current (at very low frequencies), the CS amplifier is said to provide infinite current gain. In contrast, the common-emitter stage has a current gain equal to $\\beta$.\n\nLet's now compute the I/O impedances of the CS amplifier. With zero gate current (at low frequencies),\n\n$$\n\\begin{equation*}\nR_{i n}=\\infty \\tag{7.44}\n\\end{equation*}\n$$\n\nThis contrasts with the CE stage, where $R_{i n}$ equals $r_{\\pi}$. The high input impedance of the CS topology is crucial in many analog circuits.\n\nThe similarity between the small-signal models of CE and CS stages indicates that the output impedance of the CS amplifier is simply\n\n$$\n\\begin{equation*}\nR_{\\text {out }}=R_{D} \\tag{7.45}\n\\end{equation*}\n$$\n\nThis is also evident from Fig. 7.7.\n\nImage Description:\n[\nname: V1, type: VoltageSource, value: V1, ports: {Np: V1, Nn: GND}\nname: g_mv1, type: VoltageControlledCurrentSource, ports: {Np: V1, Nn: Vx}\nname: RD, type: Resistor, value: RD, ports: {N1: Vx, N2: GND}\nname: Vx, type: VoltageSource, value: Vx, ports: {Np: Vx, Nn: GND}\n]\nExtra Info: The circuit is a small-signal model of a common-source amplifier with channel-length modulation. The voltage source V1 provides the input signal, while the voltage-controlled current source g_mv1 models the transconductance of the MOSFET. RD is the load resistor, and Vx is the output voltage across the load.\n\nFigure 7.7 Output impedance of CS stage.\n\nIn practice, channel-length modulation may not be negligible, especially if $R_{D}$ is large. The small-signal model of the CS topology is thus modified as shown in Fig. 7.8, revealing that\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m}\\left(R_{D} \\| r_{O}\\right)  \\tag{7.46}\\\\\nR_{\\text {in }} & =\\infty  \\tag{7.47}\\\\\nR_{\\text {out }} & =R_{D} \\| r_{O} . \\tag{7.48}\n\\end{align*}\n$$\n\nIn other words, channel-length modulation and the Early effect similarly impact the CS and CE stages, respectively.\n\nImage Description:\n[\nname: v1, type: VoltageSource, value: v1, ports: {Np: Vx, Nn: GND}\nname: g_m v1, type: VoltageControlledCurrentSource, value: g_m v1, ports: {Np: GND, Nn: Vx}\nname: ro, type: Resistor, value: ro, ports: {N1: Vx, N2: Vx}\nname: RD, type: Resistor, value: RD, ports: {N1: Vx, N2: GND}\nname: vx, type: VoltageSource, value: vx, ports: {Np: Vx, Nn: GND}\n]\nExtra Info: The circuit is a small-signal model of a common-source amplifier with channel-length modulation. It includes a voltage-controlled current source, resistors, and voltage sources. The voltage gain is affected by the parallel combination of RD and ro.\n\nFigure 7.8 Effect of channel-length modulation on CS stage.\n\nExample 7.5:\n\nAssuming $M_{1}$ operates in saturation, determine the voltage gain of the circuit shown in Fig. 7.9(a) and plot the result as a function of the transistor channel length, keeping other parameters constant.\n\nImage Description (a):\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: Vout}\nname: I1, type: CurrentSource, ports: {Np: VDD, Nn: Vout}\n]\nExtra Info: The circuit is a common-source amplifier with channel-length modulation. The voltage gain is determined by the transconductance (gm) and the output resistance (ro) of the NMOS transistor M1. The ideal current source provides an infinite small-signal resistance.\n\n(a)\n\nImage Description (b):\nThe graph depicts voltage gain (A_v) versus device channel length (L) for a common-source amplifier. The x-axis represents the channel length (L), and the y-axis represents the voltage gain (A_v), both on a linear scale.\n\nThe curve starts at a lower gain value and increases with increasing channel length, indicating a positive correlation between voltage gain and channel length. The relationship is nonlinear, with the rate of gain increase diminishing as the channel length grows, possibly approaching an asymptotic value.\n\nNo specific annotations, markers, or numerical values are provided on the graph. The trend highlights the impact of channel-length modulation on amplifier gain, where longer channel lengths result in higher gains due to increased output resistance (r_O). This behavior aligns with the equation A_v = -g_m * r_O, where r_O is inversely proportional to the channel-length modulation parameter (λ).\n\n(b)\n\nFigure 7.9 (a) CS stage with ideal current source as a load, (b) gain as a function of device channel length.\n\nSolution: The ideal current source presents an infinite small-signal resistance, allowing us to use Eq. (7.46) with $R_{D}=\\infty$:\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m} r_{O} \\tag{7.49}\n\\end{equation*}\n$$\n\nThis represents the highest voltage gain a single transistor can provide. Writing $g_{m}=\\sqrt{2 \\mu_{n} C_{o x}(W / L) I_{D}}$ and $r_{O}=\\left(\\lambda I_{D}\\right)^{-1}$, we get\n\n$$\n\\begin{equation*}\n\\left|A_{v}\\right|=\\frac{\\sqrt{2 \\mu_{n} C_{o x} \\frac{W}{L}}}{\\lambda \\sqrt{I_{D}}} \\tag{7.50}\n\\end{equation*}\n$$\n\nThis result suggests that $\\left|A_{v}\\right|$ decreases as $L$ increases, but recall from Chapter 6 that $\\lambda \\propto L^{-1}$:\n\n$$\n\\begin{equation*}\n\\left|A_{v}\\right| \\propto \\sqrt{\\frac{2 \\mu_{n} C_{o x} W L}{I_{D}}} \\tag{7.51}\n\\end{equation*}\n$$\n\nThus, $\\left|A_{v}\\right|$ actually increases with $L$ [Fig. 7.9(b)].\n\nRepeat the above example if a resistor of value $R_{1}$ is connected between the gate and drain of $M_{1}$."
},
{
    "text": "As illustrated in the preceding example, the compromise between voltage gain and voltage headroom can be mitigated by substituting the load resistor with a current source. Consequently, the insights derived from Fig. 7.4(b) propose employing a PMOS device as the load for an NMOS CS amplifier [Fig. 7.10(a)].\n\nLet's calculate the small-signal gain and output impedance of the circuit. With a constant gate-source voltage, $M_{2}$ effectively functions as a resistor equivalent to its\n\nDid you know?\n\nThe intrinsic gain, $g_{m} r_{0}$, of MOSFETs has decreased with technological scaling, meaning the minimum channel length has reduced from approximately $10 \\mu \\mathrm{~m}$ in the 1960s to 25 nm today. Due to significant channel-length modulation, the intrinsic gain of these short-channel devices is around 5 to 10, complicating the achievement of high voltage gain in many analog circuits. This challenge has spurred extensive research on analog design using low-gain components. For instance, the analog-to-digital converter in your camera, which digitizes images, may require an op amp with a gain of 4,000 but now must be designed with a gain of only 20.\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\nname: V1, type: VoltageSource, value: V1, ports: {Np: V1, Nn: GND}\nname: gm2V1, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: Vout}\nname: ro1, type: Resistor, value: ro1, ports: {N1: Vout, N2: GND}\nname: ro2, type: Resistor, value: ro2, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a common-source (CS) stage using a PMOS device as a current source. The output impedance is determined by the parallel combination of ro1 and ro2.\nimage_name:(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\nname: V1, type: VoltageSource, value: V1, ports: {Np: V1, Nn: GND}\nname: ro1, type: Resistor, value: ro1, ports: {N1: Vout, N2: GND}\nname: gm2, type: VoltageControlledCurrentSource, value: gm2, ports: {Np: GND, Nn: Vout}\nname: ro2, type: Resistor, value: ro2, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a common-source (CS) amplifier stage using an NMOS transistor (M1) with a PMOS current source (M2). The output is taken at Vout. The small-signal model includes a voltage-controlled current source (gm2) and resistors ro1 and ro2, which define the output impedance.\n\nFigure 7.10 (a) CS stage using a PMOS device as a current source, (b) small-signal model.\noutput impedance [Fig. 7.10(b)] because $v_{1}=0$ and hence $g_{m 2} v_{1}=0$. Thus, the drain node of $M_{1}$ encounters both $r_{O 1}$ and $r_{O 2}$ to ac ground. Equations (7.46) and (7.48) yield\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1}\\left(r_{O 1} \\| r_{O 2}\\right)  \\tag{7.52}\\\\\nR_{\\text {out }} & =r_{O 1} \\| r_{O 2} \\tag{7.53}\n\\end{align*}\n$$\n\nExample Figure 7.11 depicts a PMOS CS stage using an NMOS current source load. Calculate the 7.6 voltage gain of the circuit.\nimage_name:Figure 7.11\ndescription:\n[\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vin}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vb}\n]\nextrainfo:The circuit is a common-source amplifier with a PMOS load and NMOS driver. The input is at Vin, and the output is at Vout. Vb is the bias voltage for the NMOS transistor M1.\n\nFigure 7.11 CS stage using an NMOS device as current source.\n\nSolution Transistor $M_{2}$ produces a small-signal current equal to $g_{m 2} v_{i n}$, which then flows through $r_{O 1} \\| r_{O 2}$, resulting in $v_{o u t}=-g_{m 2} v_{i n}\\left(r_{O 1} \\| r_{O 2}\\right)$. Therefore,\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 2}\\left(r_{O 1} \\| r_{O 2}\\right) \\tag{7.54}\n\\end{equation*}\n$$\n\nExercise Determine the gain if the circuit drives a load resistance equal to $R_{L}$."
},
{
    "text": "As illustrated in the preceding example, the compromise between voltage gain and voltage headroom can be mitigated by substituting the load resistor with a current source. Consequently, the insights derived from Fig. 7.4(b) advocate for the utilization of a PMOS device as the load in an NMOS CS amplifier [Fig. 7.10(a)].\n\nLet's calculate the small-signal gain and output impedance of the circuit. With a constant gate-source voltage, $M_{2}$ effectively functions as a resistor equivalent to its\n\nDid you know?\n\nThe intrinsic gain, $g_{m} r_{0}$, of MOSFETs has decreased with technological scaling, meaning the minimum channel length has shrunk from approximately $10 \\mu \\mathrm{~m}$ in the 1960s to 25 nm today. Due to significant channel-length modulation, the intrinsic gain of these short-channel devices is around 5 to 10, complicating the achievement of high voltage gain in many analog circuits. This challenge has spurred extensive research into analog design using low-gain components. For instance, the analog-to-digital converter in your camera, which digitizes images, may require an op amp with a gain of 4,000 but now must be designed with a gain of only 20.\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\nname: V1, type: VoltageSource, value: V1, ports: {Np: V1, Nn: GND}\nname: gm2V1, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: Vout}\nname: ro1, type: Resistor, value: ro1, ports: {N1: Vout, N2: GND}\nname: ro2, type: Resistor, value: ro2, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a common-source (CS) stage using a PMOS device as a current source. The output impedance is defined by the parallel combination of ro1 and ro2.\nimage_name:(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\nname: V1, type: VoltageSource, value: V1, ports: {Np: V1, Nn: GND}\nname: ro1, type: Resistor, value: ro1, ports: {N1: Vout, N2: GND}\nname: gm2, type: VoltageControlledCurrentSource, value: gm2, ports: {Np: GND, Nn: Vout}\nname: ro2, type: Resistor, value: ro2, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a common-source (CS) amplifier stage using an NMOS transistor (M1) with a PMOS current source (M2). The output is taken at Vout. The small-signal model includes a voltage-controlled current source (gm2) and resistors ro1 and ro2, which define the output impedance.\n\nFigure 7.10 (a) CS stage using a PMOS device as a current source, (b) small-signal model.\noutput impedance [Fig. 7.10(b)] because $v_{1}=0$ and hence $g_{m 2} v_{1}=0$. Thus, the drain node of $M_{1}$ sees both $r_{O 1}$ and $r_{O 2}$ to ac ground. Equations (7.46) and (7.48) yield\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1}\\left(r_{O 1} \\| r_{O 2}\\right)  \\tag{7.52}\\\\\nR_{\\text {out }} & =r_{O 1} \\| r_{O 2} \\tag{7.53}\n\\end{align*}\n$$\n\nExample Figure 7.11 depicts a PMOS CS stage employing an NMOS current source load. Calculate the voltage gain of the circuit.\nimage_name:Figure 7.11\ndescription:\n[\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vin}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vb}\n]\nextrainfo:The circuit is a common-source amplifier with a PMOS load and NMOS driver. The input is at Vin, and the output is at Vout. Vb is the bias voltage for the NMOS transistor M1.\n\nFigure 7.11 CS stage using an NMOS device as current source.\n\nSolution Transistor $M_{2}$ produces a small-signal current equal to $g_{m 2} v_{i n}$, which then flows through $r_{O 1} \\| r_{O 2}$, resulting in $v_{o u t}=-g_{m 2} v_{i n}\\left(r_{O 1} \\| r_{O 2}\\right)$. Therefore,\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 2}\\left(r_{O 1} \\| r_{O 2}\\right) \\tag{7.54}\n\\end{equation*}\n$$\n\nExercise Determine the gain if the circuit is driving a load resistance equal to $R_{L}$."
},
{
    "text": "As illustrated in the preceding example, the compromise between voltage gain and voltage headroom can be mitigated by substituting the load resistor with a current source. Consequently, the insights derived from Fig. 7.4(b) advocate for employing a PMOS device as the load in an NMOS CS amplifier [Fig. 7.10(a)].\n\nLet's calculate the small-signal gain and output impedance of this circuit. With a constant gate-source voltage, $M_{2}$ effectively acts as a resistor equivalent to its\n\nDid you know?\n\nThe intrinsic gain, $g_{m} r_{0}$, of MOSFETs has decreased with technological advancements, specifically as the minimum channel length has shrunk from approximately $10 \\mu \\mathrm{~m}$ in the 1960s to 25 nm today. Due to significant channel-length modulation, the intrinsic gain of these short-channel devices is around 5 to 10, complicating the achievement of high voltage gain in many analog circuits. This challenge has spurred extensive research on analog design utilizing low-gain components. For instance, the analog-to-digital converter in your camera, which digitizes images, may require an op amp with a gain of 4,000 but now must be designed with a gain of only 20.\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\nname: V1, type: VoltageSource, value: V1, ports: {Np: V1, Nn: GND}\nname: gm2V1, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: Vout}\nname: ro1, type: Resistor, value: ro1, ports: {N1: Vout, N2: GND}\nname: ro2, type: Resistor, value: ro2, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a common-source (CS) stage using a PMOS device as a current source. The output impedance is determined by the parallel combination of ro1 and ro2.\nimage_name:(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\nname: V1, type: VoltageSource, value: V1, ports: {Np: V1, Nn: GND}\nname: ro1, type: Resistor, value: ro1, ports: {N1: Vout, N2: GND}\nname: gm2, type: VoltageControlledCurrentSource, value: gm2, ports: {Np: GND, Nn: Vout}\nname: ro2, type: Resistor, value: ro2, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a common-source (CS) amplifier stage utilizing an NMOS transistor (M1) with a PMOS current source (M2). The output is obtained at Vout. The small-signal model incorporates a voltage-controlled current source (gm2) and resistors ro1 and ro2, which define the output impedance.\n\nFigure 7.10 (a) CS stage using a PMOS device as a current source, (b) small-signal model.\noutput impedance [Fig. 7.10(b)] because $v_{1}=0$ and thus $g_{m 2} v_{1}=0$. Therefore, the drain node of $M_{1}$ encounters both $r_{O 1}$ and $r_{O 2}$ to ac ground. Equations (7.46) and (7.48) yield\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1}\\left(r_{O 1} \\| r_{O 2}\\right)  \\tag{7.52}\\\\\nR_{\\text {out }} & =r_{O 1} \\| r_{O 2} \\tag{7.53}\n\\end{align*}\n$$\n\nExample Figure 7.11 depicts a PMOS CS stage with an NMOS current source load. Calculate the voltage gain of the circuit.\nimage_name:Figure 7.11\ndescription:\n[\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vin}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vb}\n]\nextrainfo:The circuit is a common-source amplifier with a PMOS load and NMOS driver. The input is at Vin, and the output is at Vout. Vb is the bias voltage for the NMOS transistor M1.\n\nFigure 7.11 CS stage using an NMOS device as current source.\n\nSolution Transistor $M_{2}$ produces a small-signal current equal to $g_{m 2} v_{i n}$, which then flows through $r_{O 1} \\| r_{O 2}$, resulting in $v_{o u t}=-g_{m 2} v_{i n}\\left(r_{O 1} \\| r_{O 2}\\right)$. Hence,\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 2}\\left(r_{O 1} \\| r_{O 2}\\right) \\tag{7.54}\n\\end{equation*}\n$$\n\nExercise Determine the gain if the circuit is connected to a load resistance of $R_{L}$."
},
{
    "text": "As illustrated in the preceding example, the compromise between voltage gain and voltage headroom can be mitigated by substituting the load resistor with a current source. Consequently, the insights derived from Fig. 7.4(b) propose employing a PMOS device as the load for an NMOS CS amplifier [Fig. 7.10(a)].\n\nLet's calculate the small-signal gain and output impedance of this circuit. With a constant gate-source voltage, $M_{2}$ effectively acts as a resistor equivalent to its\n\nDid you know?\n\nThe intrinsic gain, $g_{m} r_{0}$, of MOSFETs has decreased with technological advancements, specifically as the minimum channel length has shrunk from approximately $10 \\mu \\mathrm{~m}$ in the 1960s to 25 nm today. Due to significant channel-length modulation, the intrinsic gain of these short-channel devices is around 5 to 10, complicating the achievement of high voltage gain in many analog circuits. This challenge has spurred extensive research on analog design utilizing low-gain components. For instance, the analog-to-digital converter in your camera, which digitizes images, may require an op amp with a gain of 4,000 but must now be designed with a gain of only 20.\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\nname: V1, type: VoltageSource, value: V1, ports: {Np: V1, Nn: GND}\nname: gm2V1, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: Vout}\nname: ro1, type: Resistor, value: ro1, ports: {N1: Vout, N2: GND}\nname: ro2, type: Resistor, value: ro2, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a common-source (CS) stage using a PMOS device as a current source. The output impedance is determined by the parallel combination of ro1 and ro2.\nimage_name:(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\nname: V1, type: VoltageSource, value: V1, ports: {Np: V1, Nn: GND}\nname: ro1, type: Resistor, value: ro1, ports: {N1: Vout, N2: GND}\nname: gm2, type: VoltageControlledCurrentSource, value: gm2, ports: {Np: GND, Nn: Vout}\nname: ro2, type: Resistor, value: ro2, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a common-source (CS) amplifier stage using an NMOS transistor (M1) with a PMOS current source (M2). The output is taken at Vout. The small-signal model includes a voltage-controlled current source (gm2) and resistors ro1 and ro2, which define the output impedance.\n\nFigure 7.10 (a) CS stage using a PMOS device as a current source, (b) small-signal model.\noutput impedance [Fig. 7.10(b)] because $v_{1}=0$ and hence $g_{m 2} v_{1}=0$. Thus, the drain node of $M_{1}$ sees both $r_{O 1}$ and $r_{O 2}$ to ac ground. Equations (7.46) and (7.48) yield\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1}\\left(r_{O 1} \\| r_{O 2}\\right)  \\tag{7.52}\\\\\nR_{\\text {out }} & =r_{O 1} \\| r_{O 2} \\tag{7.53}\n\\end{align*}\n$$\n\nExample Figure 7.11 depicts a PMOS CS stage employing an NMOS current source load. Calculate the voltage gain of the circuit.\nimage_name:Figure 7.11\ndescription:\n[\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vin}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vb}\n]\nextrainfo:The circuit is a common-source amplifier with a PMOS load and NMOS driver. The input is at Vin, and the output is at Vout. Vb is the bias voltage for the NMOS transistor M1.\n\nFigure 7.11 CS stage using an NMOS device as current source.\n\nSolution Transistor $M_{2}$ produces a small-signal current equal to $g_{m 2} v_{i n}$, which then flows through $r_{O 1} \\| r_{O 2}$, resulting in $v_{o u t}=-g_{m 2} v_{i n}\\left(r_{O 1} \\| r_{O 2}\\right)$. Therefore,\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 2}\\left(r_{O 1} \\| r_{O 2}\\right) \\tag{7.54}\n\\end{equation*}\n$$\n\nExercise Determine the gain if the circuit drives a load resistance equal to $R_{L}$."
},
{
    "text": "As illustrated in the preceding example, the compromise between voltage gain and voltage headroom can be eased by substituting the load resistor with a current source. Consequently, the insights derived from Fig. 7.4(b) advocate employing a PMOS device as the load for an NMOS CS amplifier [Fig. 7.10(a)].\n\nLet's compute the small-signal gain and output impedance of this circuit. With a steady gate-source voltage, $M_{2}$ effectively functions as a resistor equivalent to its\n\nDid you know?\n\nThe intrinsic gain, $g_{m} r_{0}$, of MOSFETs has decreased with technological advancements, specifically as the minimum channel length has shrunk from approximately $10 \\mu \\mathrm{~m}$ in the 1960s to 25 nm today. Due to significant channel-length modulation, the intrinsic gain of these short-channel devices is around 5 to 10, complicating the achievement of high voltage gain in numerous analog circuits. This challenge has spurred extensive research into analog design utilizing low-gain components. For instance, the analog-to-digital converter that digitizes images in your camera might require an op amp with a gain of 4,000 but now must be designed with a gain of merely 20.\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\nname: V1, type: VoltageSource, value: V1, ports: {Np: V1, Nn: GND}\nname: gm2V1, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: Vout}\nname: ro1, type: Resistor, value: ro1, ports: {N1: Vout, N2: GND}\nname: ro2, type: Resistor, value: ro2, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a common-source (CS) stage using a PMOS device as a current source. The output impedance is defined by the parallel combination of ro1 and ro2.\nimage_name:(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\nname: V1, type: VoltageSource, value: V1, ports: {Np: V1, Nn: GND}\nname: ro1, type: Resistor, value: ro1, ports: {N1: Vout, N2: GND}\nname: gm2, type: VoltageControlledCurrentSource, value: gm2, ports: {Np: GND, Nn: Vout}\nname: ro2, type: Resistor, value: ro2, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a common-source (CS) amplifier stage using an NMOS transistor (M1) with a PMOS current source (M2). The output is taken at Vout. The small-signal model includes a voltage-controlled current source (gm2) and resistors ro1 and ro2, which define the output impedance.\n\nFigure 7.10 (a) CS stage using a PMOS device as a current source, (b) small-signal model.\noutput impedance [Fig. 7.10(b)] because $v_{1}=0$ and hence $g_{m 2} v_{1}=0$. Thus, the drain node of $M_{1}$ encounters both $r_{O 1}$ and $r_{O 2}$ to ac ground. Equations (7.46) and (7.48) yield\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1}\\left(r_{O 1} \\| r_{O 2}\\right)  \\tag{7.52}\\\\\nR_{\\text {out }} & =r_{O 1} \\| r_{O 2} \\tag{7.53}\n\\end{align*}\n$$\n\nExample Figure 7.11 depicts a PMOS CS stage utilizing an NMOS current source load. Calculate the 7.6 voltage gain of this circuit.\nimage_name:Figure 7.11\ndescription:\n[\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vin}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vb}\n]\nextrainfo:The circuit is a common-source amplifier with a PMOS load and NMOS driver. The input is at Vin, and the output is at Vout. Vb is the bias voltage for the NMOS transistor M1.\n\nFigure 7.11 CS stage using an NMOS device as current source.\n\nSolution Transistor $M_{2}$ produces a small-signal current equivalent to $g_{m 2} v_{i n}$, which then flows through $r_{O 1} \\| r_{O 2}$, resulting in $v_{o u t}=-g_{m 2} v_{i n}\\left(r_{O 1} \\| r_{O 2}\\right)$. Therefore,\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 2}\\left(r_{O 1} \\| r_{O 2}\\right) \\tag{7.54}\n\\end{equation*}\n$$\n\nExercise Determine the gain if the circuit is connected to a load resistance of $R_{L}$."
},
{
    "text": "As observed in the preceding example, the compromise between voltage gain and voltage headroom can be mitigated by substituting the load resistor with a current source. Consequently, the insights derived from Fig. 7.4(b) advocate for employing a PMOS device as the load in an NMOS CS amplifier [Fig. 7.10(a)].\n\nLet's calculate the small-signal gain and output impedance of this circuit. With a constant gate-source voltage, $M_{2}$ effectively functions as a resistor equivalent to its\n\nDid you know?\n\nThe intrinsic gain, $g_{m} r_{0}$, of MOSFETs has decreased with technological advancements, specifically as the minimum channel length has shrunk from approximately $10 \\mu \\mathrm{~m}$ in the 1960s to 25 nm today. Due to significant channel-length modulation, the intrinsic gain of these short-channel devices is around 5 to 10, complicating the achievement of high voltage gain in many analog circuits. This challenge has spurred extensive research into analog design using low-gain components. For instance, the analog-to-digital converter in your camera, which digitizes images, may require an op amp with a gain of 4,000 but must now be designed with a gain of only 20.\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\nname: V1, type: VoltageSource, value: V1, ports: {Np: V1, Nn: GND}\nname: gm2V1, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: Vout}\nname: ro1, type: Resistor, value: ro1, ports: {N1: Vout, N2: GND}\nname: ro2, type: Resistor, value: ro2, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a common-source (CS) stage using a PMOS device as a current source. The output impedance is defined by the parallel combination of ro1 and ro2.\nimage_name:(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\nname: V1, type: VoltageSource, value: V1, ports: {Np: V1, Nn: GND}\nname: ro1, type: Resistor, value: ro1, ports: {N1: Vout, N2: GND}\nname: gm2, type: VoltageControlledCurrentSource, value: gm2, ports: {Np: GND, Nn: Vout}\nname: ro2, type: Resistor, value: ro2, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a common-source (CS) amplifier stage using an NMOS transistor (M1) with a PMOS current source (M2). The output is taken at Vout. The small-signal model includes a voltage-controlled current source (gm2) and resistors ro1 and ro2, which define the output impedance.\n\nFigure 7.10 (a) CS stage using a PMOS device as a current source, (b) small-signal model.\noutput impedance [Fig. 7.10(b)] because $v_{1}=0$ and hence $g_{m 2} v_{1}=0$. Therefore, the drain node of $M_{1}$ encounters both $r_{O 1}$ and $r_{O 2}$ to ac ground. Equations (7.46) and (7.48) yield\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1}\\left(r_{O 1} \\| r_{O 2}\\right)  \\tag{7.52}\\\\\nR_{\\text {out }} & =r_{O 1} \\| r_{O 2} \\tag{7.53}\n\\end{align*}\n$$\n\nExample Figure 7.11 illustrates a PMOS CS stage utilizing an NMOS current source load. Determine the voltage gain of the circuit.\nimage_name:Figure 7.11\ndescription:\n[\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vin}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vb}\n]\nextrainfo:The circuit is a common-source amplifier with a PMOS load and NMOS driver. The input is at Vin, and the output is at Vout. Vb is the bias voltage for the NMOS transistor M1.\n\nFigure 7.11 CS stage using an NMOS device as current source.\n\nSolution Transistor $M_{2}$ produces a small-signal current equivalent to $g_{m 2} v_{i n}$, which then flows through $r_{O 1} \\| r_{O 2}$, resulting in $v_{o u t}=-g_{m 2} v_{i n}\\left(r_{O 1} \\| r_{O 2}\\right)$. Thus,\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 2}\\left(r_{O 1} \\| r_{O 2}\\right) \\tag{7.54}\n\\end{equation*}\n$$\n\nExercise Determine the gain if the circuit is connected to a load resistance of $R_{L}$."
},
{
    "text": "As observed in the preceding illustration, the compromise between voltage gain and voltage headroom can be mitigated by substituting the load resistor with a current source. Consequently, the insights derived from Fig. 7.4(b) advocate for the utilization of a PMOS device as the load in an NMOS CS amplifier [Fig. 7.10(a)].\n\nLet us calculate the small-signal gain and output impedance of this circuit. With a constant gate-source voltage, $M_{2}$ effectively acts as a resistor equivalent to its\n\nDid you know?\n\nThe intrinsic gain, $g_{m} r_{0}$, of MOSFETs has decreased with technological advancements, specifically as the minimum channel length has shrunk from approximately $10 \\mu \\mathrm{~m}$ in the 1960s to 25 nm today. Due to significant channel-length modulation, the intrinsic gain of these short-channel devices is around 5 to 10, complicating the achievement of high voltage gain in many analog circuits. This challenge has spurred extensive research into analog design using low-gain components. For instance, the analog-to-digital converter in your camera, which digitizes images, may require an op amp with a gain of 4,000 but now must be designed with a gain of merely 20.\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\nname: V1, type: VoltageSource, value: V1, ports: {Np: V1, Nn: GND}\nname: gm2V1, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: Vout}\nname: ro1, type: Resistor, value: ro1, ports: {N1: Vout, N2: GND}\nname: ro2, type: Resistor, value: ro2, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a common-source (CS) stage using a PMOS device as a current source. The output impedance is determined by the parallel combination of ro1 and ro2.\nimage_name:(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\nname: V1, type: VoltageSource, value: V1, ports: {Np: V1, Nn: GND}\nname: ro1, type: Resistor, value: ro1, ports: {N1: Vout, N2: GND}\nname: gm2, type: VoltageControlledCurrentSource, value: gm2, ports: {Np: GND, Nn: Vout}\nname: ro2, type: Resistor, value: ro2, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a common-source (CS) amplifier stage employing an NMOS transistor (M1) with a PMOS current source (M2). The output is obtained at Vout. The small-signal model incorporates a voltage-controlled current source (gm2) and resistors ro1 and ro2, which define the output impedance.\n\nFigure 7.10 (a) CS stage using a PMOS device as a current source, (b) small-signal model.\noutput impedance [Fig. 7.10(b)] because $v_{1}=0$ and thus $g_{m 2} v_{1}=0$. Therefore, the drain node of $M_{1}$ encounters both $r_{O 1}$ and $r_{O 2}$ to ac ground. Equations (7.46) and (7.48) yield\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1}\\left(r_{O 1} \\| r_{O 2}\\right)  \\tag{7.52}\\\\\nR_{\\text {out }} & =r_{O 1} \\| r_{O 2} \\tag{7.53}\n\\end{align*}\n$$\n\nExample Figure 7.11 depicts a PMOS CS stage with an NMOS current source load. Calculate the voltage gain of the circuit.\nimage_name:Figure 7.11\ndescription:\n[\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vin}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vb}\n]\nextrainfo:The circuit is a common-source amplifier with a PMOS load and NMOS driver. The input is at Vin, and the output is at Vout. Vb is the bias voltage for the NMOS transistor M1.\n\nFigure 7.11 CS stage using an NMOS device as current source.\n\nSolution Transistor $M_{2}$ produces a small-signal current equivalent to $g_{m 2} v_{i n}$, which then flows through $r_{O 1} \\| r_{O 2}$, resulting in $v_{o u t}=-g_{m 2} v_{i n}\\left(r_{O 1} \\| r_{O 2}\\right)$. Hence,\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 2}\\left(r_{O 1} \\| r_{O 2}\\right) \\tag{7.54}\n\\end{equation*}\n$$\n\nExercise Determine the gain if the circuit is driving a load resistance equal to $R_{L}$."
},
{
    "text": "As illustrated in the preceding example, the compromise between voltage gain and voltage headroom can be mitigated by substituting the load resistor with a current source. Consequently, the insights derived from Fig. 7.4(b) advocate for employing a PMOS device as the load in an NMOS CS amplifier [Fig. 7.10(a)].\n\nLet's compute the small-signal gain and output impedance of this circuit. With a constant gate-source voltage, $M_{2}$ effectively functions as a resistor equivalent to its\n\nDid you know?\n\nThe intrinsic gain, $g_{m} r_{0}$, of MOSFETs has decreased with technological advancements, specifically as the minimum channel length has shrunk from approximately $10 \\mu \\mathrm{~m}$ in the 1960s to 25 nm today. Due to significant channel-length modulation, the intrinsic gain of these short-channel devices is around 5 to 10, complicating the achievement of high voltage gain in many analog circuits. This challenge has spurred extensive research into analog design using low-gain components. For instance, the analog-to-digital converter in your camera, which digitizes images, may require an op amp with a gain of 4,000 but now must be designed with a gain of only 20.\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\nname: V1, type: VoltageSource, value: V1, ports: {Np: V1, Nn: GND}\nname: gm2V1, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: Vout}\nname: ro1, type: Resistor, value: ro1, ports: {N1: Vout, N2: GND}\nname: ro2, type: Resistor, value: ro2, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a common-source (CS) stage using a PMOS device as a current source. The output impedance is determined by the parallel combination of ro1 and ro2.\nimage_name:(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\nname: V1, type: VoltageSource, value: V1, ports: {Np: V1, Nn: GND}\nname: ro1, type: Resistor, value: ro1, ports: {N1: Vout, N2: GND}\nname: gm2, type: VoltageControlledCurrentSource, value: gm2, ports: {Np: GND, Nn: Vout}\nname: ro2, type: Resistor, value: ro2, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a common-source (CS) amplifier stage using an NMOS transistor (M1) with a PMOS current source (M2). The output is taken at Vout. The small-signal model includes a voltage-controlled current source (gm2) and resistors ro1 and ro2, which define the output impedance.\n\nFigure 7.10 (a) CS stage using a PMOS device as a current source, (b) small-signal model.\noutput impedance [Fig. 7.10(b)] because $v_{1}=0$ and hence $g_{m 2} v_{1}=0$. Thus, the drain node of $M_{1}$ encounters both $r_{O 1}$ and $r_{O 2}$ to ac ground. Equations (7.46) and (7.48) yield\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1}\\left(r_{O 1} \\| r_{O 2}\\right)  \\tag{7.52}\\\\\nR_{\\text {out }} & =r_{O 1} \\| r_{O 2} \\tag{7.53}\n\\end{align*}\n$$\n\nExample Figure 7.11 depicts a PMOS CS stage utilizing an NMOS current source load. Calculate the voltage gain of the circuit.\nimage_name:Figure 7.11\ndescription:\n[\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vin}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vb}\n]\nextrainfo:The circuit is a common-source amplifier with a PMOS load and NMOS driver. The input is at Vin, and the output is at Vout. Vb is the bias voltage for the NMOS transistor M1.\n\nFigure 7.11 CS stage using an NMOS device as current source.\n\nSolution Transistor $M_{2}$ produces a small-signal current equal to $g_{m 2} v_{i n}$, which then flows through $r_{O 1} \\| r_{O 2}$, resulting in $v_{o u t}=-g_{m 2} v_{i n}\\left(r_{O 1} \\| r_{O 2}\\right)$. Therefore,\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 2}\\left(r_{O 1} \\| r_{O 2}\\right) \\tag{7.54}\n\\end{equation*}\n$$\n\nExercise Determine the gain if the circuit is driving a load resistance equal to $R_{L}$."
},
{
    "text": "In certain applications, a diode-connected MOSFET may be utilized as the drain load. As depicted in Fig. 7.12(a), this configuration exhibits a moderate gain due to the relatively low impedance of the diode-connected device (Section 7.1.3). When $\\lambda=0$, $M_{2}$ functions as a small-signal resistance equivalent to $1 / g_{m 2}$, and Eq. (7.34) results in\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1} \\cdot \\frac{1}{g_{m 2}}  \\tag{7.55}\\\\\n& =-\\frac{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{1} I_{D}}}{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{2} I_{D}}}  \\tag{7.56}\\\\\n& =-\\sqrt{\\frac{(W / L)_{1}}{(W / L)_{2}}} . \\tag{7.57}\n\\end{align*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: NMOS, ports: {S: VDD, D: Vout, G: Vout}\n]\nextrainfo:The circuit is a MOS stage with a diode-connected NMOS load, providing moderate gain due to the low impedance of the diode-connected device. The gain is determined by the dimensions of M1 and M2 and is independent of process parameters and drain current.\nimage_name:(b)\ndescription:\n[\nname: Q1, type: NPN, ports: {C: Vout, B: Vin, E: GND}\nname: Q2, type: NPN, ports: {C: VCC, B: Vout, E: Vout}\n]\nextrainfo:The circuit (b) is a bipolar equivalent of a MOS stage with a diode-connected load. The voltage gain is limited to unity.\nimage_name:(c)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: rO1, type: Resistor, value: rO1, ports: {N1: Vout, N2: GND}\nname: rO2, type: Resistor, value: rO2, ports: {N1: Vout, N2: GND}\nname: 1/gm2, type: CurrentSource, value: 1/gm2, ports: {Np: GND, Nn: Vout}\n]\nextrainfo:The circuit is a simplified MOS stage with a diode-connected load, offering moderate gain. The gain is determined by the transistor dimensions and is independent of process parameters and drain current.\n\nFigure 7.12 (a) MOS stage with diode-connected load, (b) bipolar counterpart, (c) simplified circuit of (a).\n\nNotably, the gain is dictated by the dimensions of $M_{1}$ and $M_{2}$ and remains unaffected by process parameters $\\mu_{n}$ and $C_{o x}$ and the drain current, $I_{D}$.\n\nReaders might question why a common-emitter stage with a diode-connected load was not discussed in Chapter 5. As shown in Fig. 7.12(b), such a circuit is not employed because it only provides a voltage gain of unity:\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1} \\cdot \\frac{1}{g_{m 2}}  \\tag{7.58}\\\\\n& =-\\frac{I_{C 1}}{V_{T}} \\cdot \\frac{1}{I_{C 2} / V_{T}}  \\tag{7.59}\\\\\n& \\approx-1 . \\tag{7.60}\n\\end{align*}\n$$\n\nThe difference between Eqs. (7.57) and (7.60) stems from a fundamental distinction between MOS and bipolar devices: the transconductance of MOS devices depends on their dimensions, whereas that of bipolar devices does not.\n\nA more precise expression for the gain of the stage in Fig. 7.12(a) must account for channel-length modulation. As illustrated in Fig. 7.12(c), the resistance at the drain is now $\\left(1 / g_{m 2}\\right)\\left\\|r_{O 2}\\right\\| r_{O 1}$, thus\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 1}\\left(\\frac{1}{g_{m 2}}\\left\\|r_{O 2}\\right\\| r_{O 1}\\right) \\tag{7.61}\n\\end{equation*}\n$$\n\nSimilarly, the output resistance of the stage is given by\n\n$$\n\\begin{equation*}\nR_{\\text {out }}=\\frac{1}{g_{m 2}}\\left\\|r_{O 2}\\right\\| r_{O 1} \\tag{7.62}\n\\end{equation*}\n$$\n\n| Example |  |\n| :---: | :---: |\n| 7.7 | Calculate the voltage gain of the circuit shown in Fig. 7.13(a) if $\\lambda \\neq 0$. |\n\nimage_name:Figure 7.13\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vout}\n]\nextrainfo:The circuit is a common-source amplifier with a diode-connected PMOS load. The input is applied to the gate of M1, and the output is taken from the drain of M1. M2 is configured as a diode-connected load.\n\nFigure 7.13 CS stage with diode-connected PMOS device.\n\nSolution This stage resembles that in Fig. 7.12(a), but with NMOS devices replaced by PMOS transistors: $M_{1}$ acts as a common-source device and $M_{2}$ as a diode-connected load. Therefore,\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 2}\\left(\\frac{1}{g_{m 1}}\\left\\|r_{O 1}\\right\\| r_{O 2}\\right) \\tag{7.63}\n\\end{equation*}\n$$\n\nExercise Repeat the above example if the gate of $M_{1}$ is connected to a constant voltage of 0.5 V."
},
{
    "text": "In certain applications, a diode-connected MOSFET may serve as the drain load. As depicted in Fig. 7.12(a), this configuration exhibits moderate gain due to the relatively low impedance of the diode-connected device (Section 7.1.3). With $\\lambda=0$, $M_{2}$ functions as a small-signal resistance equivalent to $1 / g_{m 2}$, and Eq. (7.34) results in\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1} \\cdot \\frac{1}{g_{m 2}}  \\tag{7.55}\\\\\n& =-\\frac{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{1} I_{D}}}{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{2} I_{D}}}  \\tag{7.56}\\\\\n& =-\\sqrt{\\frac{(W / L)_{1}}{(W / L)_{2}}} . \\tag{7.57}\n\\end{align*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: NMOS, ports: {S: VDD, D: Vout, G: Vout}\n]\nextrainfo:The circuit is a MOS stage using a diode-connected NMOS load, offering moderate gain due to the low impedance of the diode-connected device. The gain is determined by the dimensions of M1 and M2 and is independent of process parameters and drain current.\nimage_name:(b)\ndescription:\n[\nname: Q1, type: NPN, ports: {C: Vout, B: Vin, E: GND}\nname: Q2, type: NPN, ports: {C: VCC, B: Vout, E: Vout}\n]\nextrainfo:The circuit (b) is a bipolar equivalent of a MOS stage with a diode-connected load. The voltage gain is limited to unity.\nimage_name:(c)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: rO1, type: Resistor, value: rO1, ports: {N1: Vout, N2: GND}\nname: rO2, type: Resistor, value: rO2, ports: {N1: Vout, N2: GND}\nname: 1/gm2, type: CurrentSource, value: 1/gm2, ports: {Np: GND, Nn: Vout}\n]\nextrainfo:The circuit is a simplified MOS stage using a diode-connected load, providing moderate gain. The gain is determined by the transistor dimensions and is independent of process parameters and drain current.\n\nFigure 7.12 (a) MOS stage with diode-connected load, (b) bipolar counterpart, (c) simplified circuit of (a).\n\nNotably, the gain is dictated by the dimensions of $M_{1}$ and $M_{2}$ and remains unaffected by process parameters $\\mu_{n}$ and $C_{o x}$, as well as the drain current, $I_{D}$.\n\nOne might question why a common-emitter stage with a diode-connected load was not discussed in Chapter 5. As shown in Fig. 7.12(b), such a circuit is not utilized because it only provides a voltage gain of unity:\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1} \\cdot \\frac{1}{g_{m 2}}  \\tag{7.58}\\\\\n& =-\\frac{I_{C 1}}{V_{T}} \\cdot \\frac{1}{I_{C 2} / V_{T}}  \\tag{7.59}\\\\\n& \\approx-1 . \\tag{7.60}\n\\end{align*}\n$$\n\nThe disparity between Eqs. (7.57) and (7.60) stems from a fundamental difference between MOS and bipolar devices: the transconductance of MOS devices depends on their dimensions, whereas that of bipolar devices does not.\n\nA more precise expression for the gain of the stage in Fig. 7.12(a) must account for channel-length modulation. As illustrated in Fig. 7.12(c), the resistance at the drain is now $\\left(1 / g_{m 2}\\right)\\left\\|r_{O 2}\\right\\| r_{O 1}$, thus\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 1}\\left(\\frac{1}{g_{m 2}}\\left\\|r_{O 2}\\right\\| r_{O 1}\\right) \\tag{7.61}\n\\end{equation*}\n$$\n\nSimilarly, the output resistance of the stage is given by\n\n$$\n\\begin{equation*}\nR_{\\text {out }}=\\frac{1}{g_{m 2}}\\left\\|r_{O 2}\\right\\| r_{O 1} \\tag{7.62}\n\\end{equation*}\n$$\n\n| Example |  |\n| :---: | :---: |\n| 7.7 | Determine the voltage gain of the circuit shown in Fig. 7.13(a) if $\\lambda \\neq 0$. |\n\nimage_name:Figure 7.13\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vout}\n]\nextrainfo:The circuit is a common-source amplifier with a diode-connected PMOS load. The input is applied to the gate of M1, and the output is taken from the drain of M1. M2 is configured as a diode-connected load.\n\nFigure 7.13 CS stage with diode-connected PMOS device.\n\nSolution This stage resembles that in Fig. 7.12(a), but with NMOS devices replaced by PMOS transistors: $M_{1}$ acts as a common-source device and $M_{2}$ as a diode-connected load. Therefore,\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 2}\\left(\\frac{1}{g_{m 1}}\\left\\|r_{O 1}\\right\\| r_{O 2}\\right) \\tag{7.63}\n\\end{equation*}\n$$\n\nExercise Repeat the above example if the gate of $M_{1}$ is connected to a constant voltage of 0.5 V."
},
{
    "text": "In certain applications, a diode-connected MOSFET may serve as the drain load. As depicted in Fig. 7.12(a), this configuration offers a moderate gain due to the relatively low impedance of the diode-connected device (Section 7.1.3). With $\\lambda=0$, $M_{2}$ functions as a small-signal resistance equivalent to $1 / g_{m 2}$, and Eq. (7.34) results in\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1} \\cdot \\frac{1}{g_{m 2}}  \\tag{7.55}\\\\\n& =-\\frac{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{1} I_{D}}}{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{2} I_{D}}}  \\tag{7.56}\\\\\n& =-\\sqrt{\\frac{(W / L)_{1}}{(W / L)_{2}}} . \\tag{7.57}\n\\end{align*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: NMOS, ports: {S: VDD, D: Vout, G: Vout}\n]\nextrainfo:The circuit consists of a MOS stage with a diode-connected NMOS load, yielding moderate gain due to the low impedance of the diode-connected device. The gain is influenced by the dimensions of M1 and M2 and is unaffected by process parameters and drain current.\nimage_name:(b)\ndescription:\n[\nname: Q1, type: NPN, ports: {C: Vout, B: Vin, E: GND}\nname: Q2, type: NPN, ports: {C: VCC, B: Vout, E: Vout}\n]\nextrainfo:The circuit (b) is the bipolar equivalent of a MOS stage with a diode-connected load, where the voltage gain is limited to unity.\nimage_name:(c)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: rO1, type: Resistor, value: rO1, ports: {N1: Vout, N2: GND}\nname: rO2, type: Resistor, value: rO2, ports: {N1: Vout, N2: GND}\nname: 1/gm2, type: CurrentSource, value: 1/gm2, ports: {Np: GND, Nn: Vout}\n]\nextrainfo:The circuit represents a simplified MOS stage with a diode-connected load, providing moderate gain. The gain is determined by the transistor dimensions and is independent of process parameters and drain current.\n\nFigure 7.12 (a) MOS stage with diode-connected load, (b) bipolar equivalent, (c) simplified version of (a).\n\nNotably, the gain is dictated by the dimensions of $M_{1}$ and $M_{2}$ and remains不受影响 by process parameters $\\mu_{n}$ and $C_{o x}$, as well as the drain current, $I_{D}$.\n\nReaders might question why a common-emitter stage with a diode-connected load was not discussed in Chapter 5. As shown in Fig. 7.12(b), such a circuit is not employed because it only provides a voltage gain of unity:\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1} \\cdot \\frac{1}{g_{m 2}}  \\tag{7.58}\\\\\n& =-\\frac{I_{C 1}}{V_{T}} \\cdot \\frac{1}{I_{C 2} / V_{T}}  \\tag{7.59}\\\\\n& \\approx-1 . \\tag{7.60}\n\\end{align*}\n$$\n\nThe difference between Eqs. (7.57) and (7.60) stems from a fundamental distinction between MOS and bipolar devices: the transconductance of MOS devices depends on their dimensions, whereas that of bipolar devices does not.\n\nA more precise expression for the gain of the stage in Fig. 7.12(a) must account for channel-length modulation. As shown in Fig. 7.12(c), the resistance at the drain is now $\\left(1 / g_{m 2}\\right)\\left\\|r_{O 2}\\right\\| r_{O 1}$, thus\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 1}\\left(\\frac{1}{g_{m 2}}\\left\\|r_{O 2}\\right\\| r_{O 1}\\right) \\tag{7.61}\n\\end{equation*}\n$$\n\nSimilarly, the output resistance of the stage is\n\n$$\n\\begin{equation*}\nR_{\\text {out }}=\\frac{1}{g_{m 2}}\\left\\|r_{O 2}\\right\\| r_{O 1} \\tag{7.62}\n\\end{equation*}\n$$\n\n| Example |  |\n| :---: | :---: |\n| 7.7 | Calculate the voltage gain of the circuit shown in Fig. 7.13(a) if $\\lambda \\neq 0$. |\n\nimage_name:Figure 7.13\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vout}\n]\nextrainfo:The circuit is a common-source amplifier with a diode-connected PMOS load. The input is applied to the gate of M1, and the output is taken from the drain of M1. M2 is configured as a diode-connected load.\n\nFigure 7.13 CS stage with diode-connected PMOS device.\n\nSolution This stage resembles that in Fig. 7.12(a), but with NMOS devices replaced by PMOS transistors: $M_{1}$ acts as a common-source device and $M_{2}$ as a diode-connected load. Therefore,\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 2}\\left(\\frac{1}{g_{m 1}}\\left\\|r_{O 1}\\right\\| r_{O 2}\\right) \\tag{7.63}\n\\end{equation*}\n$$\n\nExercise Repeat the above example if the gate of $M_{1}$ is connected to a constant voltage of 0.5 V."
},
{
    "text": "In certain applications, a diode-connected MOSFET may be employed as the drain load. As depicted in Fig. 7.12(a), this configuration exhibits a moderate gain due to the relatively low impedance of the diode-connected device (Section 7.1.3). When $\\lambda=0$, $M_{2}$ functions as a small-signal resistance equivalent to $1 / g_{m 2}$, and Eq. (7.34) results in\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1} \\cdot \\frac{1}{g_{m 2}}  \\tag{7.55}\\\\\n& =-\\frac{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{1} I_{D}}}{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{2} I_{D}}}  \\tag{7.56}\\\\\n& =-\\sqrt{\\frac{(W / L)_{1}}{(W / L)_{2}}} . \\tag{7.57}\n\\end{align*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: NMOS, ports: {S: VDD, D: Vout, G: Vout}\n]\nextrainfo:The circuit is a MOS stage using a diode-connected NMOS load, providing moderate gain due to the low impedance of the diode-connected device. The gain is determined by the dimensions of M1 and M2 and is independent of process parameters and drain current.\nimage_name:(b)\ndescription:\n[\nname: Q1, type: NPN, ports: {C: Vout, B: Vin, E: GND}\nname: Q2, type: NPN, ports: {C: VCC, B: Vout, E: Vout}\n]\nextrainfo:The circuit (b) is a bipolar counterpart of a MOS stage using a diode-connected load. The voltage gain is limited to unity.\nimage_name:(c)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: rO1, type: Resistor, value: rO1, ports: {N1: Vout, N2: GND}\nname: rO2, type: Resistor, value: rO2, ports: {N1: Vout, N2: GND}\nname: 1/gm2, type: CurrentSource, value: 1/gm2, ports: {Np: GND, Nn: Vout}\n]\nextrainfo:The circuit is a simplified MOS stage using a diode-connected load, providing moderate gain. The gain is determined by the dimensions of the transistors and is independent of process parameters and drain current.\n\nFigure 7.12 (a) MOS stage using a diode-connected load, (b) bipolar counterpart, (c) simplified circuit of (a).\n\nNotably, the gain is dictated by the dimensions of $M_{1}$ and $M_{2}$ and remains unaffected by process parameters $\\mu_{n}$ and $C_{o x}$, as well as the drain current, $I_{D}$.\n\nOne might question why a common-emitter stage with a diode-connected load was not discussed in Chapter 5. As shown in Fig. 7.12(b), such a circuit is not utilized because it only provides a voltage gain of unity:\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1} \\cdot \\frac{1}{g_{m 2}}  \\tag{7.58}\\\\\n& =-\\frac{I_{C 1}}{V_{T}} \\cdot \\frac{1}{I_{C 2} / V_{T}}  \\tag{7.59}\\\\\n& \\approx-1 . \\tag{7.60}\n\\end{align*}\n$$\n\nThe disparity between Eqs. (7.57) and (7.60) stems from a fundamental difference between MOS and bipolar devices: the transconductance of MOS devices depends on their dimensions, whereas that of bipolar devices does not.\n\nA more precise expression for the gain of the stage in Fig. 7.12(a) must account for channel-length modulation. As illustrated in Fig. 7.12(c), the resistance at the drain is now equivalent to $\\left(1 / g_{m 2}\\right)\\left\\|r_{O 2}\\right\\| r_{O 1}$, thus\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 1}\\left(\\frac{1}{g_{m 2}}\\left\\|r_{O 2}\\right\\| r_{O 1}\\right) \\tag{7.61}\n\\end{equation*}\n$$\n\nSimilarly, the output resistance of the stage is given by\n\n$$\n\\begin{equation*}\nR_{\\text {out }}=\\frac{1}{g_{m 2}}\\left\\|r_{O 2}\\right\\| r_{O 1} \\tag{7.62}\n\\end{equation*}\n$$\n\n| Example |  |\n| :---: | :---: |\n| 7.7 | Determine the voltage gain of the circuit shown in Fig. 7.13(a) if $\\lambda \\neq 0$. |\n\nimage_name:Figure 7.13\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vout}\n]\nextrainfo:The circuit is a common-source amplifier with a diode-connected PMOS load. The input is applied to the gate of M1, and the output is taken from the drain of M1. M2 is configured as a diode-connected load.\n\nFigure 7.13 CS stage with diode-connected PMOS device.\n\nSolution This stage resembles that in Fig. 7.12(a), but with NMOS devices replaced by PMOS transistors: $M_{1}$ acts as a common-source device and $M_{2}$ as a diode-connected load. Therefore,\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 2}\\left(\\frac{1}{g_{m 1}}\\left\\|r_{O 1}\\right\\| r_{O 2}\\right) \\tag{7.63}\n\\end{equation*}\n$$\n\nExercise Repeat the above example if the gate of $M_{1}$ is connected to a constant voltage of 0.5 V."
},
{
    "text": "In certain applications, a diode-connected MOSFET may be employed as the drain load. As depicted in Fig. 7.12(a), this configuration exhibits a moderate gain due to the relatively low impedance of the diode-connected device (Section 7.1.3). With $\\lambda=0$, $M_{2}$ functions as a small-signal resistance equivalent to $1 / g_{m 2}$, and Eq. (7.34) results in\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1} \\cdot \\frac{1}{g_{m 2}}  \\tag{7.55}\\\\\n& =-\\frac{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{1} I_{D}}}{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{2} I_{D}}}  \\tag{7.56}\\\\\n& =-\\sqrt{\\frac{(W / L)_{1}}{(W / L)_{2}}} . \\tag{7.57}\n\\end{align*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: NMOS, ports: {S: VDD, D: Vout, G: Vout}\n]\nextrainfo:The circuit is a MOS stage using a diode-connected NMOS load, yielding moderate gain due to the low impedance of the diode-connected device. The gain is determined by the dimensions of M1 and M2 and is independent of process parameters and drain current.\nimage_name:(b)\ndescription:\n[\nname: Q1, type: NPN, ports: {C: Vout, B: Vin, E: GND}\nname: Q2, type: NPN, ports: {C: VCC, B: Vout, E: Vout}\n]\nextrainfo:The circuit (b) is a bipolar equivalent of a MOS stage using a diode-connected load. The voltage gain is limited to unity.\nimage_name:(c)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: rO1, type: Resistor, value: rO1, ports: {N1: Vout, N2: GND}\nname: rO2, type: Resistor, value: rO2, ports: {N1: Vout, N2: GND}\nname: 1/gm2, type: CurrentSource, value: 1/gm2, ports: {Np: GND, Nn: Vout}\n]\nextrainfo:The circuit is a simplified MOS stage using a diode-connected load, providing moderate gain. The gain is determined by the transistor dimensions and is independent of process parameters and drain current.\n\nFigure 7.12 (a) MOS stage using a diode-connected load, (b) bipolar counterpart, (c) simplified circuit of (a).\n\nNotably, the gain is dictated by the dimensions of $M_{1}$ and $M_{2}$ and remains unaffected by process parameters $\\mu_{n}$ and $C_{o x}$, as well as the drain current, $I_{D}$.\n\nOne might question why a common-emitter stage with a diode-connected load was not discussed in Chapter 5. As shown in Fig. 7.12(b), such a circuit is not utilized because it only provides a voltage gain of unity:\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1} \\cdot \\frac{1}{g_{m 2}}  \\tag{7.58}\\\\\n& =-\\frac{I_{C 1}}{V_{T}} \\cdot \\frac{1}{I_{C 2} / V_{T}}  \\tag{7.59}\\\\\n& \\approx-1 . \\tag{7.60}\n\\end{align*}\n$$\n\nThe discrepancy between Eqs. (7.57) and (7.60) stems from a fundamental difference between MOS and bipolar devices: the transconductance of MOS devices depends on their dimensions, whereas that of bipolar devices does not.\n\nA more precise expression for the gain of the stage in Fig. 7.12(a) must account for channel-length modulation. As illustrated in Fig. 7.12(c), the resistance observed at the drain is now $\\left(1 / g_{m 2}\\right)\\left\\|r_{O 2}\\right\\| r_{O 1}$, thus\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 1}\\left(\\frac{1}{g_{m 2}}\\left\\|r_{O 2}\\right\\| r_{O 1}\\right) \\tag{7.61}\n\\end{equation*}\n$$\n\nSimilarly, the output resistance of the stage is given by\n\n$$\n\\begin{equation*}\nR_{\\text {out }}=\\frac{1}{g_{m 2}}\\left\\|r_{O 2}\\right\\| r_{O 1} \\tag{7.62}\n\\end{equation*}\n$$\n\n| Example |  |\n| :---: | :---: |\n| 7.7 | Determine the voltage gain of the circuit shown in Fig. 7.13(a) if $\\lambda \\neq 0$. |\n\nimage_name:Figure 7.13\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vout}\n]\nextrainfo:The circuit is a common-source amplifier with a diode-connected PMOS load. The input is applied to the gate of M1, and the output is taken from the drain of M1. M2 is configured as a diode-connected load.\n\nFigure 7.13 CS stage with diode-connected PMOS device.\n\nSolution This stage resembles that in Fig. 7.12(a), but with NMOS devices replaced by PMOS transistors: $M_{1}$ acts as a common-source device and $M_{2}$ as a diode-connected load. Therefore,\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 2}\\left(\\frac{1}{g_{m 1}}\\left\\|r_{O 1}\\right\\| r_{O 2}\\right) \\tag{7.63}\n\\end{equation*}\n$$\n\nExercise Repeat the above example if the gate of $M_{1}$ is connected to a constant voltage of 0.5 V."
},
{
    "text": "In certain applications, a diode-connected MOSFET may be utilized as the drain load. As depicted in Fig. 7.12(a), this configuration exhibits a moderate gain due to the relatively low impedance of the diode-connected device (Section 7.1.3). With $\\lambda=0$, $M_{2}$ functions as a small-signal resistance equivalent to $1 / g_{m 2}$, and Eq. (7.34) results in\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1} \\cdot \\frac{1}{g_{m 2}}  \\tag{7.55}\\\\\n& =-\\frac{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{1} I_{D}}}{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{2} I_{D}}}  \\tag{7.56}\\\\\n& =-\\sqrt{\\frac{(W / L)_{1}}{(W / L)_{2}}} . \\tag{7.57}\n\\end{align*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: NMOS, ports: {S: VDD, D: Vout, G: Vout}\n]\nextrainfo:The circuit is a MOS stage using a diode-connected NMOS load, yielding moderate gain due to the low impedance of the diode-connected device. The gain is dictated by the dimensions of M1 and M2 and is unaffected by process parameters and drain current.\nimage_name:(b)\ndescription:\n[\nname: Q1, type: NPN, ports: {C: Vout, B: Vin, E: GND}\nname: Q2, type: NPN, ports: {C: VCC, B: Vout, E: Vout}\n]\nextrainfo:The circuit (b) is a bipolar counterpart to a MOS stage with a diode-connected load, where the voltage gain is limited to unity.\nimage_name:(c)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: rO1, type: Resistor, value: rO1, ports: {N1: Vout, N2: GND}\nname: rO2, type: Resistor, value: rO2, ports: {N1: Vout, N2: GND}\nname: 1/gm2, type: CurrentSource, value: 1/gm2, ports: {Np: GND, Nn: Vout}\n]\nextrainfo:The circuit is a simplified MOS stage with a diode-connected load, providing moderate gain. The gain is determined by the transistor dimensions and is independent of process parameters and drain current.\n\nFigure 7.12 (a) MOS stage with diode-connected load, (b) bipolar counterpart, (c) simplified circuit of (a).\n\nNotably, the gain is defined by the dimensions of $M_{1}$ and $M_{2}$ and remains independent of process parameters $\\mu_{n}$ and $C_{o x}$, as well as the drain current, $I_{D}$.\n\nReaders might question why a common-emitter stage with a diode-connected load was not discussed in Chapter 5. As shown in Fig. 7.12(b), such a circuit is not employed because it only offers a voltage gain of unity:\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1} \\cdot \\frac{1}{g_{m 2}}  \\tag{7.58}\\\\\n& =-\\frac{I_{C 1}}{V_{T}} \\cdot \\frac{1}{I_{C 2} / V_{T}}  \\tag{7.59}\\\\\n& \\approx-1 . \\tag{7.60}\n\\end{align*}\n$$\n\nThe discrepancy between Eqs. (7.57) and (7.60) stems from a fundamental difference between MOS and bipolar devices: the transconductance of MOS devices depends on their dimensions, whereas that of bipolar devices does not.\n\nA more precise expression for the gain of the stage in Fig. 7.12(a) must account for channel-length modulation. As illustrated in Fig. 7.12(c), the resistance at the drain is now $\\left(1 / g_{m 2}\\right)\\left\\|r_{O 2}\\right\\| r_{O 1}$, thus\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 1}\\left(\\frac{1}{g_{m 2}}\\left\\|r_{O 2}\\right\\| r_{O 1}\\right) \\tag{7.61}\n\\end{equation*}\n$$\n\nSimilarly, the output resistance of the stage is given by\n\n$$\n\\begin{equation*}\nR_{\\text {out }}=\\frac{1}{g_{m 2}}\\left\\|r_{O 2}\\right\\| r_{O 1} \\tag{7.62}\n\\end{equation*}\n$$\n\n| Example |  |\n| :---: | :---: |\n| 7.7 | Calculate the voltage gain of the circuit shown in Fig. 7.13(a) if $\\lambda \\neq 0$. |\n\nimage_name:Figure 7.13\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vout}\n]\nextrainfo:The circuit is a common-source amplifier with a diode-connected PMOS load. The input is applied to the gate of M1, and the output is taken from the drain of M1. M2 is configured as a diode-connected load.\n\nFigure 7.13 CS stage with diode-connected PMOS device.\n\nSolution This stage resembles that in Fig. 7.12(a), but with NMOS devices replaced by PMOS transistors: $M_{1}$ acts as a common-source device and $M_{2}$ as a diode-connected load. Therefore,\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 2}\\left(\\frac{1}{g_{m 1}}\\left\\|r_{O 1}\\right\\| r_{O 2}\\right) \\tag{7.63}\n\\end{equation*}\n$$\n\nExercise Repeat the above example if the gate of $M_{1}$ is connected to a constant voltage of 0.5 V."
},
{
    "text": "In certain applications, a diode-connected MOSFET may be employed as the drain load. As depicted in Fig. 7.12(a), this configuration exhibits a moderate gain due to the relatively low impedance of the diode-connected device (Section 7.1.3). With $\\lambda=0$, $M_{2}$ functions as a small-signal resistance equivalent to $1 / g_{m 2}$, and Eq. (7.34) results in\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1} \\cdot \\frac{1}{g_{m 2}}  \\tag{7.55}\\\\\n& =-\\frac{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{1} I_{D}}}{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{2} I_{D}}}  \\tag{7.56}\\\\\n& =-\\sqrt{\\frac{(W / L)_{1}}{(W / L)_{2}}} . \\tag{7.57}\n\\end{align*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: NMOS, ports: {S: VDD, D: Vout, G: Vout}\n]\nextrainfo:The circuit is a MOS stage using a diode-connected NMOS load, offering moderate gain due to the low impedance of the diode-connected device. The gain is determined by the dimensions of M1 and M2 and is independent of process parameters and drain current.\nimage_name:(b)\ndescription:\n[\nname: Q1, type: NPN, ports: {C: Vout, B: Vin, E: GND}\nname: Q2, type: NPN, ports: {C: VCC, B: Vout, E: Vout}\n]\nextrainfo:The circuit (b) is a bipolar counterpart to a MOS stage using a diode-connected load. The voltage gain is limited to unity.\nimage_name:(c)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: rO1, type: Resistor, value: rO1, ports: {N1: Vout, N2: GND}\nname: rO2, type: Resistor, value: rO2, ports: {N1: Vout, N2: GND}\nname: 1/gm2, type: CurrentSource, value: 1/gm2, ports: {Np: GND, Nn: Vout}\n]\nextrainfo:The circuit is a simplified MOS stage using a diode-connected load, providing moderate gain. The gain is determined by the transistor dimensions and is independent of process parameters and drain current.\n\nFigure 7.12 (a) MOS stage using a diode-connected load, (b) bipolar counterpart, (c) simplified circuit of (a).\n\nNotably, the gain is dictated by the dimensions of $M_{1}$ and $M_{2}$ and remains unaffected by process parameters $\\mu_{n}$ and $C_{o x}$, as well as the drain current, $I_{D}$.\n\nOne might wonder why a common-emitter stage with a diode-connected load was not discussed in Chapter 5. As shown in Fig. 7.12(b), such a circuit is not utilized because it yields a voltage gain of only unity:\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1} \\cdot \\frac{1}{g_{m 2}}  \\tag{7.58}\\\\\n& =-\\frac{I_{C 1}}{V_{T}} \\cdot \\frac{1}{I_{C 2} / V_{T}}  \\tag{7.59}\\\\\n& \\approx-1 . \\tag{7.60}\n\\end{align*}\n$$\n\nThe disparity between Eqs. (7.57) and (7.60) stems from a fundamental difference between MOS and bipolar devices: the transconductance of MOS devices depends on their dimensions, whereas that of bipolar devices does not.\n\nA more precise expression for the gain of the stage in Fig. 7.12(a) must account for channel-length modulation. As illustrated in Fig. 7.12(c), the resistance at the drain is now $\\left(1 / g_{m 2}\\right)\\left\\|r_{O 2}\\right\\| r_{O 1}$, thus\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 1}\\left(\\frac{1}{g_{m 2}}\\left\\|r_{O 2}\\right\\| r_{O 1}\\right) \\tag{7.61}\n\\end{equation*}\n$$\n\nSimilarly, the output resistance of the stage is given by\n\n$$\n\\begin{equation*}\nR_{\\text {out }}=\\frac{1}{g_{m 2}}\\left\\|r_{O 2}\\right\\| r_{O 1} \\tag{7.62}\n\\end{equation*}\n$$\n\n| Example |  |\n| :---: | :---: |\n| 7.7 | Determine the voltage gain of the circuit shown in Fig. 7.13(a) if $\\lambda \\neq 0$. |\n\nimage_name:Figure 7.13\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vout}\n]\nextrainfo:The circuit is a common-source amplifier with a diode-connected PMOS load. The input is applied to the gate of M1, and the output is taken from the drain of M1. M2 is configured as a diode-connected load.\n\nFigure 7.13 CS stage with diode-connected PMOS device.\n\nSolution This stage resembles that in Fig. 7.12(a), but with NMOS devices replaced by PMOS transistors: $M_{1}$ acts as a common-source device and $M_{2}$ as a diode-connected load. Therefore,\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 2}\\left(\\frac{1}{g_{m 1}}\\left\\|r_{O 1}\\right\\| r_{O 2}\\right) \\tag{7.63}\n\\end{equation*}\n$$\n\nExercise Repeat the above example if the gate of $M_{1}$ is connected to a constant voltage of 0.5 V."
},
{
    "text": "In certain applications, a diode-connected MOSFET may be employed as the drain load. As depicted in Fig. 7.12(a), this configuration results in a moderate gain due to the relatively low impedance of the diode-connected device (Section 7.1.3). When $\\lambda=0$, $M_{2}$ functions as a small-signal resistance equivalent to $1 / g_{m 2}$, and Eq. (7.34) provides:\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1} \\cdot \\frac{1}{g_{m 2}}  \\tag{7.55}\\\\\n& =-\\frac{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{1} I_{D}}}{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{2} I_{D}}}  \\tag{7.56}\\\\\n& =-\\sqrt{\\frac{(W / L)_{1}}{(W / L)_{2}}} . \\tag{7.57}\n\\end{align*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: NMOS, ports: {S: VDD, D: Vout, G: Vout}\n]\nextrainfo:The circuit features a MOS stage with a diode-connected NMOS load, yielding moderate gain due to the low impedance of the diode-connected device. The gain is dictated by the dimensions of M1 and M2 and is unaffected by process parameters and drain current.\nimage_name:(b)\ndescription:\n[\nname: Q1, type: NPN, ports: {C: Vout, B: Vin, E: GND}\nname: Q2, type: NPN, ports: {C: VCC, B: Vout, E: Vout}\n]\nextrainfo:The circuit (b) is a bipolar equivalent of a MOS stage with a diode-connected load, where the voltage gain is restricted to unity.\nimage_name:(c)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: rO1, type: Resistor, value: rO1, ports: {N1: Vout, N2: GND}\nname: rO2, type: Resistor, value: rO2, ports: {N1: Vout, N2: GND}\nname: 1/gm2, type: CurrentSource, value: 1/gm2, ports: {Np: GND, Nn: Vout}\n]\nextrainfo:The circuit represents a simplified MOS stage with a diode-connected load, delivering moderate gain. The gain is influenced by the transistor dimensions and remains independent of process parameters and drain current.\n\nFigure 7.12 (a) MOS stage with diode-connected load, (b) bipolar equivalent, (c) simplified version of (a).\n\nNotably, the gain is determined by the dimensions of $M_{1}$ and $M_{2}$ and remains不受 process parameters $\\mu_{n}$ and $C_{o x}$ and the drain current, $I_{D}$.\n\nOne might question why a common-emitter stage with a diode-connected load was not discussed in Chapter 5. As shown in Fig. 7.12(b), such a circuit is not utilized because it only achieves a voltage gain of unity:\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1} \\cdot \\frac{1}{g_{m 2}}  \\tag{7.58}\\\\\n& =-\\frac{I_{C 1}}{V_{T}} \\cdot \\frac{1}{I_{C 2} / V_{T}}  \\tag{7.59}\\\\\n& \\approx-1 . \\tag{7.60}\n\\end{align*}\n$$\n\nThe disparity between Eqs. (7.57) and (7.60) stems from a fundamental difference between MOS and bipolar devices: the transconductance of MOS devices depends on their dimensions, whereas that of bipolar devices does not.\n\nFor a more precise expression of the gain in the stage shown in Fig. 7.12(a), channel-length modulation must be considered. As illustrated in Fig. 7.12(c), the resistance observed at the drain now equals $\\left(1 / g_{m 2}\\right)\\left\\|r_{O 2}\\right\\| r_{O 1}$, thus\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 1}\\left(\\frac{1}{g_{m 2}}\\left\\|r_{O 2}\\right\\| r_{O 1}\\right) \\tag{7.61}\n\\end{equation*}\n$$\n\nSimilarly, the output resistance of the stage is given by\n\n$$\n\\begin{equation*}\nR_{\\text {out }}=\\frac{1}{g_{m 2}}\\left\\|r_{O 2}\\right\\| r_{O 1} \\tag{7.62}\n\\end{equation*}\n$$\n\n| Example |  |\n| :---: | :---: |\n| 7.7 | Calculate the voltage gain of the circuit shown in Fig. 7.13(a) if $\\lambda \\neq 0$. |\n\nimage_name:Figure 7.13\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vout}\n]\nextrainfo:The circuit is a common-source amplifier with a diode-connected PMOS load. The input is applied to the gate of M1, and the output is taken from the drain of M1. M2 is configured as a diode-connected load.\n\nFigure 7.13 CS stage with diode-connected PMOS device.\n\nSolution This stage resembles that in Fig. 7.12(a), but with NMOS devices replaced by PMOS transistors: $M_{1}$ acts as a common-source device and $M_{2}$ as a diode-connected load. Therefore,\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 2}\\left(\\frac{1}{g_{m 1}}\\left\\|r_{O 1}\\right\\| r_{O 2}\\right) \\tag{7.63}\n\\end{equation*}\n$$\n\nExercise Repeat the above example if the gate of $M_{1}$ is connected to a constant voltage of 0.5 V."
},
{
    "text": "In certain applications, a diode-connected MOSFET may be utilized as the drain load. As depicted in Fig. 7.12(a), this configuration exhibits a moderate gain due to the relatively low impedance of the diode-connected device (refer to Section 7.1.3). With $\\lambda=0$, $M_{2}$ functions as a small-signal resistance equivalent to $1 / g_{m 2}$, and Eq. (7.34) results in\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1} \\cdot \\frac{1}{g_{m 2}}  \\tag{7.55}\\\\\n& =-\\frac{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{1} I_{D}}}{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{2} I_{D}}}  \\tag{7.56}\\\\\n& =-\\sqrt{\\frac{(W / L)_{1}}{(W / L)_{2}}} . \\tag{7.57}\n\\end{align*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: NMOS, ports: {S: VDD, D: Vout, G: Vout}\n]\nextrainfo:The circuit is a MOS stage using a diode-connected NMOS load, providing moderate gain due to the low impedance of the diode-connected device. The gain is determined by the dimensions of M1 and M2 and is independent of process parameters and drain current.\nimage_name:(b)\ndescription:\n[\nname: Q1, type: NPN, ports: {C: Vout, B: Vin, E: GND}\nname: Q2, type: NPN, ports: {C: VCC, B: Vout, E: Vout}\n]\nextrainfo:The circuit (b) is a bipolar counterpart of a MOS stage using a diode-connected load. The voltage gain is limited to unity.\nimage_name:(c)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: rO1, type: Resistor, value: rO1, ports: {N1: Vout, N2: GND}\nname: rO2, type: Resistor, value: rO2, ports: {N1: Vout, N2: GND}\nname: 1/gm2, type: CurrentSource, value: 1/gm2, ports: {Np: GND, Nn: Vout}\n]\nextrainfo:The circuit is a simplified MOS stage using a diode-connected load, providing moderate gain. The gain is determined by the dimensions of the transistors and is independent of process parameters and drain current.\n\nFigure 7.12 (a) MOS stage using a diode-connected load, (b) bipolar counterpart, (c) simplified circuit of (a).\n\nNotably, the gain is dictated by the dimensions of $M_{1}$ and $M_{2}$ and remains unaffected by process parameters $\\mu_{n}$ and $C_{o x}$, as well as the drain current, $I_{D}$.\n\nOne might question why a common-emitter stage with a diode-connected load was not discussed in Chapter 5. As shown in Fig. 7.12(b), such a configuration is not employed because it only provides a voltage gain of unity:\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1} \\cdot \\frac{1}{g_{m 2}}  \\tag{7.58}\\\\\n& =-\\frac{I_{C 1}}{V_{T}} \\cdot \\frac{1}{I_{C 2} / V_{T}}  \\tag{7.59}\\\\\n& \\approx-1 . \\tag{7.60}\n\\end{align*}\n$$\n\nThe disparity between Eqs. (7.57) and (7.60) stems from a fundamental difference between MOS and bipolar devices: the transconductance of MOS devices depends on their dimensions, whereas that of bipolar devices does not.\n\nA more precise expression for the gain of the stage in Fig. 7.12(a) must consider channel-length modulation. As illustrated in Fig. 7.12(c), the resistance observed at the drain is now $\\left(1 / g_{m 2}\\right)\\left\\|r_{O 2}\\right\\| r_{O 1}$, thus\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 1}\\left(\\frac{1}{g_{m 2}}\\left\\|r_{O 2}\\right\\| r_{O 1}\\right) \\tag{7.61}\n\\end{equation*}\n$$\n\nSimilarly, the output resistance of the stage is given by\n\n$$\n\\begin{equation*}\nR_{\\text {out }}=\\frac{1}{g_{m 2}}\\left\\|r_{O 2}\\right\\| r_{O 1} \\tag{7.62}\n\\end{equation*}\n$$\n\n| Example |  |\n| :---: | :---: |\n| 7.7 | Determine the voltage gain of the circuit shown in Fig. 7.13(a) if $\\lambda \\neq 0$. |\n\nimage_name:Figure 7.13\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vout}\n]\nextrainfo:The circuit is a common-source amplifier with a diode-connected PMOS load. The input is applied to the gate of M1, and the output is taken from the drain of M1. M2 is configured as a diode-connected load.\n\nFigure 7.13 CS stage with diode-connected PMOS device.\n\nSolution This stage resembles that in Fig. 7.12(a), but with NMOS devices replaced by PMOS transistors: $M_{1}$ acts as a common-source device and $M_{2}$ as a diode-connected load. Therefore,\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 2}\\left(\\frac{1}{g_{m 1}}\\left\\|r_{O 1}\\right\\| r_{O 2}\\right) \\tag{7.63}\n\\end{equation*}\n$$\n\nExercise Repeat the above example if the gate of $M_{1}$ is connected to a constant voltage of 0.5 V."
},
{
    "text": "In certain applications, a diode-connected MOSFET might be employed as the drain load. As depicted in Fig. 7.12(a), this configuration demonstrates a moderate gain due to the relatively low impedance of the diode-connected device (Section 7.1.3). With $\\lambda=0$, $M_{2}$ functions as a small-signal resistance equivalent to $1 / g_{m 2}$, and Eq. (7.34) results in\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1} \\cdot \\frac{1}{g_{m 2}}  \\tag{7.55}\\\\\n& =-\\frac{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{1} I_{D}}}{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{2} I_{D}}}  \\tag{7.56}\\\\\n& =-\\sqrt{\\frac{(W / L)_{1}}{(W / L)_{2}}} . \\tag{7.57}\n\\end{align*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: NMOS, ports: {S: VDD, D: Vout, G: Vout}\n]\nextrainfo:The circuit is a MOS stage using a diode-connected NMOS load, yielding moderate gain due to the low impedance of the diode-connected device. The gain is dictated by the dimensions of M1 and M2 and is unaffected by process parameters and drain current.\nimage_name:(b)\ndescription:\n[\nname: Q1, type: NPN, ports: {C: Vout, B: Vin, E: GND}\nname: Q2, type: NPN, ports: {C: VCC, B: Vout, E: Vout}\n]\nextrainfo:The circuit (b) is a bipolar equivalent of a MOS stage with a diode-connected load. The voltage gain is restricted to unity.\nimage_name:(c)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: rO1, type: Resistor, value: rO1, ports: {N1: Vout, N2: GND}\nname: rO2, type: Resistor, value: rO2, ports: {N1: Vout, N2: GND}\nname: 1/gm2, type: CurrentSource, value: 1/gm2, ports: {Np: GND, Nn: Vout}\n]\nextrainfo:The circuit is a simplified MOS stage using a diode-connected load, offering moderate gain. The gain is influenced by the transistor dimensions and is independent of process parameters and drain current.\n\nFigure 7.12 (a) MOS stage with diode-connected load, (b) bipolar counterpart, (c) simplified version of (a).\n\nNotably, the gain is determined by the dimensions of $M_{1}$ and $M_{2}$ and remains不受影响 by process parameters $\\mu_{n}$ and $C_{o x}$, as well as the drain current, $I_{D}$.\n\nReaders might question why a common-emitter stage with a diode-connected load was not discussed in Chapter 5. As shown in Fig. 7.12(b), such a circuit is not utilized because it only provides a voltage gain of unity:\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1} \\cdot \\frac{1}{g_{m 2}}  \\tag{7.58}\\\\\n& =-\\frac{I_{C 1}}{V_{T}} \\cdot \\frac{1}{I_{C 2} / V_{T}}  \\tag{7.59}\\\\\n& \\approx-1 . \\tag{7.60}\n\\end{align*}\n$$\n\nThe disparity between Eqs. (7.57) and (7.60) stems from a fundamental difference between MOS and bipolar devices: the transconductance of MOS devices depends on their dimensions, whereas that of bipolar devices does not.\n\nA more precise expression for the gain of the stage in Fig. 7.12(a) must account for channel-length modulation. As illustrated in Fig. 7.12(c), the resistance observed at the drain is now $\\left(1 / g_{m 2}\\right)\\left\\|r_{O 2}\\right\\| r_{O 1}$, thus\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 1}\\left(\\frac{1}{g_{m 2}}\\left\\|r_{O 2}\\right\\| r_{O 1}\\right) \\tag{7.61}\n\\end{equation*}\n$$\n\nSimilarly, the output resistance of the stage is given by\n\n$$\n\\begin{equation*}\nR_{\\text {out }}=\\frac{1}{g_{m 2}}\\left\\|r_{O 2}\\right\\| r_{O 1} \\tag{7.62}\n\\end{equation*}\n$$\n\n| Example |  |\n| :---: | :---: |\n| 7.7 | Calculate the voltage gain of the circuit shown in Fig. 7.13(a) if $\\lambda \\neq 0$. |\n\nimage_name:Figure 7.13\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vout}\n]\nextrainfo:The circuit is a common-source amplifier with a diode-connected PMOS load. The input is applied to the gate of M1, and the output is taken from the drain of M1. M2 is configured as a diode-connected load.\n\nFigure 7.13 CS stage with diode-connected PMOS device.\n\nSolution This stage resembles that in Fig. 7.12(a), but with NMOS devices replaced by PMOS transistors: $M_{1}$ acts as a common-source device and $M_{2}$ as a diode-connected load. Therefore,\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 2}\\left(\\frac{1}{g_{m 1}}\\left\\|r_{O 1}\\right\\| r_{O 2}\\right) \\tag{7.63}\n\\end{equation*}\n$$\n\nExercise Repeat the above example if the gate of $M_{1}$ is connected to a constant voltage of 0.5 V."
},
{
    "text": "In certain applications, a diode-connected MOSFET may be employed as the drain load. As depicted in Fig. 7.12(a), this configuration demonstrates a moderate gain due to the relatively low impedance of the diode-connected device (Section 7.1.3). With $\\lambda=0$, $M_{2}$ functions as a small-signal resistance equivalent to $1 / g_{m 2}$, and Eq. (7.34) results in\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1} \\cdot \\frac{1}{g_{m 2}}  \\tag{7.55}\\\\\n& =-\\frac{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{1} I_{D}}}{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{2} I_{D}}}  \\tag{7.56}\\\\\n& =-\\sqrt{\\frac{(W / L)_{1}}{(W / L)_{2}}} . \\tag{7.57}\n\\end{align*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: NMOS, ports: {S: VDD, D: Vout, G: Vout}\n]\nextrainfo:The circuit is a MOS stage using a diode-connected NMOS load, yielding moderate gain due to the low impedance of the diode-connected device. The gain is dictated by the dimensions of M1 and M2 and is unaffected by process parameters and drain current.\nimage_name:(b)\ndescription:\n[\nname: Q1, type: NPN, ports: {C: Vout, B: Vin, E: GND}\nname: Q2, type: NPN, ports: {C: VCC, B: Vout, E: Vout}\n]\nextrainfo:The circuit (b) is a bipolar equivalent of a MOS stage with a diode-connected load. The voltage gain is restricted to unity.\nimage_name:(c)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: rO1, type: Resistor, value: rO1, ports: {N1: Vout, N2: GND}\nname: rO2, type: Resistor, value: rO2, ports: {N1: Vout, N2: GND}\nname: 1/gm2, type: CurrentSource, value: 1/gm2, ports: {Np: GND, Nn: Vout}\n]\nextrainfo:The circuit is a simplified MOS stage with a diode-connected load, providing moderate gain. The gain is determined by the transistor dimensions and is independent of process parameters and drain current.\n\nFigure 7.12 (a) MOS stage with diode-connected load, (b) bipolar counterpart, (c) simplified circuit of (a).\n\nNotably, the gain is derived from the dimensions of $M_{1}$ and $M_{2}$ and remains不受process parameters $\\mu_{n}$ and $C_{o x}$ and the drain current, $I_{D}$,的影响.\n\nReaders might question why a common-emitter stage with a diode-connected load was not discussed in Chapter 5. As shown in Fig. 7.12(b), such a circuit is not utilized because it offers a voltage gain of only unity:\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1} \\cdot \\frac{1}{g_{m 2}}  \\tag{7.58}\\\\\n& =-\\frac{I_{C 1}}{V_{T}} \\cdot \\frac{1}{I_{C 2} / V_{T}}  \\tag{7.59}\\\\\n& \\approx-1 . \\tag{7.60}\n\\end{align*}\n$$\n\nThe disparity between Eqs. (7.57) and (7.60) stems from a fundamental difference between MOS and bipolar devices: the transconductance of the former depends on device dimensions, whereas that of the latter does not.\n\nA more precise expression for the gain of the stage in Fig. 7.12(a) must account for channel-length modulation. As illustrated in Fig. 7.12(c), the resistance at the drain is now $\\left(1 / g_{m 2}\\right)\\left\\|r_{O 2}\\right\\| r_{O 1}$, thus\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 1}\\left(\\frac{1}{g_{m 2}}\\left\\|r_{O 2}\\right\\| r_{O 1}\\right) \\tag{7.61}\n\\end{equation*}\n$$\n\nSimilarly, the output resistance of the stage is given by\n\n$$\n\\begin{equation*}\nR_{\\text {out }}=\\frac{1}{g_{m 2}}\\left\\|r_{O 2}\\right\\| r_{O 1} \\tag{7.62}\n\\end{equation*}\n$$\n\n| Example |  |\n| :---: | :---: |\n| 7.7 | Determine the voltage gain of the circuit shown in Fig. 7.13(a) if $\\lambda \\neq 0$. |\n\nimage_name:Figure 7.13\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vout}\n]\nextrainfo:The circuit is a common-source amplifier with a diode-connected PMOS load. The input is applied to the gate of M1, and the output is taken from the drain of M1. M2 is configured as a diode-connected load.\n\nFigure 7.13 CS stage with diode-connected PMOS device.\n\nSolution This stage resembles that in Fig. 7.12(a), but with NMOS devices replaced by PMOS transistors: $M_{1}$ acts as a common-source device and $M_{2}$ as a diode-connected load. Therefore,\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 2}\\left(\\frac{1}{g_{m 1}}\\left\\|r_{O 1}\\right\\| r_{O 2}\\right) \\tag{7.63}\n\\end{equation*}\n$$\n\nExercise Repeat the above example if the gate of $M_{1}$ is connected to a constant voltage of 0.5 V."
},
{
    "text": "In certain applications, a diode-connected MOSFET may be utilized as the drain load. As depicted in Fig. 7.12(a), this configuration demonstrates a moderate gain due to the relatively low impedance of the diode-connected device (Section 7.1.3). When $\\lambda=0$, $M_{2}$ functions as a small-signal resistance equivalent to $1 / g_{m 2}$, and Eq. (7.34) results in\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1} \\cdot \\frac{1}{g_{m 2}}  \\tag{7.55}\\\\\n& =-\\frac{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{1} I_{D}}}{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{2} I_{D}}}  \\tag{7.56}\\\\\n& =-\\sqrt{\\frac{(W / L)_{1}}{(W / L)_{2}}} . \\tag{7.57}\n\\end{align*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: NMOS, ports: {S: VDD, D: Vout, G: Vout}\n]\nextrainfo:The circuit is a MOS stage using a diode-connected NMOS load, offering moderate gain due to the low impedance of the diode-connected device. The gain is dictated by the dimensions of M1 and M2 and is unaffected by process parameters and drain current.\nimage_name:(b)\ndescription:\n[\nname: Q1, type: NPN, ports: {C: Vout, B: Vin, E: GND}\nname: Q2, type: NPN, ports: {C: VCC, B: Vout, E: Vout}\n]\nextrainfo:The circuit (b) is a bipolar equivalent of a MOS stage with a diode-connected load. The voltage gain is restricted to unity.\nimage_name:(c)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: rO1, type: Resistor, value: rO1, ports: {N1: Vout, N2: GND}\nname: rO2, type: Resistor, value: rO2, ports: {N1: Vout, N2: GND}\nname: 1/gm2, type: CurrentSource, value: 1/gm2, ports: {Np: GND, Nn: Vout}\n]\nextrainfo:The circuit is a simplified MOS stage with a diode-connected load, providing moderate gain. The gain is determined by the transistor dimensions and is independent of process parameters and drain current.\n\nFigure 7.12 (a) MOS stage with a diode-connected load, (b) bipolar counterpart, (c) simplified circuit of (a).\n\nNotably, the gain is derived from the dimensions of $M_{1}$ and $M_{2}$ and remains independent of process parameters $\\mu_{n}$ and $C_{o x}$, as well as the drain current, $I_{D}$.\n\nOne might question why a common-emitter stage with a diode-connected load was not discussed in Chapter 5. As shown in Fig. 7.12(b), such a circuit is not employed because it yields a voltage gain of only unity:\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1} \\cdot \\frac{1}{g_{m 2}}  \\tag{7.58}\\\\\n& =-\\frac{I_{C 1}}{V_{T}} \\cdot \\frac{1}{I_{C 2} / V_{T}}  \\tag{7.59}\\\\\n& \\approx-1 . \\tag{7.60}\n\\end{align*}\n$$\n\nThe discrepancy between Eqs. (7.57) and (7.60) stems from a fundamental distinction between MOS and bipolar devices: the transconductance of MOS devices depends on their dimensions, whereas that of bipolar devices does not.\n\nA more precise expression for the gain of the stage in Fig. 7.12(a) must account for channel-length modulation. As illustrated in Fig. 7.12(c), the resistance observed at the drain is now $\\left(1 / g_{m 2}\\right)\\left\\|r_{O 2}\\right\\| r_{O 1}$, thus\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 1}\\left(\\frac{1}{g_{m 2}}\\left\\|r_{O 2}\\right\\| r_{O 1}\\right) \\tag{7.61}\n\\end{equation*}\n$$\n\nSimilarly, the output resistance of the stage is given by\n\n$$\n\\begin{equation*}\nR_{\\text {out }}=\\frac{1}{g_{m 2}}\\left\\|r_{O 2}\\right\\| r_{O 1} \\tag{7.62}\n\\end{equation*}\n$$\n\n| Example |  |\n| :---: | :---: |\n| 7.7 | Calculate the voltage gain of the circuit shown in Fig. 7.13(a) if $\\lambda \\neq 0$. |\n\nimage_name:Figure 7.13\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vout}\n]\nextrainfo:The circuit is a common-source amplifier with a diode-connected PMOS load. The input is applied to the gate of M1, and the output is taken from the drain of M1. M2 is configured as a diode-connected load.\n\nFigure 7.13 CS stage with diode-connected PMOS device.\n\nSolution This stage resembles that in Fig. 7.12(a), but with NMOS devices replaced by PMOS transistors: $M_{1}$ functions as a common-source device and $M_{2}$ as a diode-connected load. Therefore,\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 2}\\left(\\frac{1}{g_{m 1}}\\left\\|r_{O 1}\\right\\| r_{O 2}\\right) \\tag{7.63}\n\\end{equation*}\n$$\n\nExercise Repeat the above example if the gate of $M_{1}$ is connected to a constant voltage of 0.5 V."
},
{
    "text": "In certain applications, a diode-connected MOSFET may be employed as the drain load. As depicted in Fig. 7.12(a), this configuration exhibits a moderate gain due to the relatively low impedance of the diode-connected device (Section 7.1.3). With $\\lambda=0$, $M_{2}$ functions as a small-signal resistance equivalent to $1 / g_{m 2}$, and Eq. (7.34) results in\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1} \\cdot \\frac{1}{g_{m 2}}  \\tag{7.55}\\\\\n& =-\\frac{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{1} I_{D}}}{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{2} I_{D}}}  \\tag{7.56}\\\\\n& =-\\sqrt{\\frac{(W / L)_{1}}{(W / L)_{2}}} . \\tag{7.57}\n\\end{align*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: NMOS, ports: {S: VDD, D: Vout, G: Vout}\n]\nextrainfo:The circuit is a MOS stage using a diode-connected NMOS load, providing moderate gain due to the low impedance of the diode-connected device. The gain is determined by the dimensions of M1 and M2 and is independent of process parameters and drain current.\nimage_name:(b)\ndescription:\n[\nname: Q1, type: NPN, ports: {C: Vout, B: Vin, E: GND}\nname: Q2, type: NPN, ports: {C: VCC, B: Vout, E: Vout}\n]\nextrainfo:The circuit (b) is a bipolar counterpart of a MOS stage using a diode-connected load. The voltage gain is limited to unity.\nimage_name:(c)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: rO1, type: Resistor, value: rO1, ports: {N1: Vout, N2: GND}\nname: rO2, type: Resistor, value: rO2, ports: {N1: Vout, N2: GND}\nname: 1/gm2, type: CurrentSource, value: 1/gm2, ports: {Np: GND, Nn: Vout}\n]\nextrainfo:The circuit is a simplified MOS stage using a diode-connected load, providing moderate gain. The gain is determined by the dimensions of the transistors and is independent of process parameters and drain current.\n\nFigure 7.12 (a) MOS stage using a diode-connected load, (b) bipolar counterpart, (c) simplified circuit of (a).\n\nNotably, the gain is dictated by the dimensions of $M_{1}$ and $M_{2}$ and remains unaffected by process parameters $\\mu_{n}$ and $C_{o x}$, as well as the drain current, $I_{D}$.\n\nOne might question why a common-emitter stage with a diode-connected load was not discussed in Chapter 5. As shown in Fig. 7.12(b), such a circuit is not utilized because it only provides a voltage gain of unity:\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1} \\cdot \\frac{1}{g_{m 2}}  \\tag{7.58}\\\\\n& =-\\frac{I_{C 1}}{V_{T}} \\cdot \\frac{1}{I_{C 2} / V_{T}}  \\tag{7.59}\\\\\n& \\approx-1 . \\tag{7.60}\n\\end{align*}\n$$\n\nThe disparity between Eqs. (7.57) and (7.60) stems from a fundamental difference between MOS and bipolar devices: the transconductance of MOS devices depends on their dimensions, whereas that of bipolar devices does not.\n\nA more precise expression for the gain of the stage in Fig. 7.12(a) must account for channel-length modulation. As illustrated in Fig. 7.12(c), the resistance observed at the drain is now $\\left(1 / g_{m 2}\\right)\\left\\|r_{O 2}\\right\\| r_{O 1}$, thus\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 1}\\left(\\frac{1}{g_{m 2}}\\left\\|r_{O 2}\\right\\| r_{O 1}\\right) \\tag{7.61}\n\\end{equation*}\n$$\n\nSimilarly, the output resistance of the stage is given by\n\n$$\n\\begin{equation*}\nR_{\\text {out }}=\\frac{1}{g_{m 2}}\\left\\|r_{O 2}\\right\\| r_{O 1} \\tag{7.62}\n\\end{equation*}\n$$\n\n| Example |  |\n| :---: | :---: |\n| 7.7 | Determine the voltage gain of the circuit shown in Fig. 7.13(a) if $\\lambda \\neq 0$. |\n\nimage_name:Figure 7.13\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vout}\n]\nextrainfo:The circuit is a common-source amplifier with a diode-connected PMOS load. The input is applied to the gate of M1, and the output is taken from the drain of M1. M2 is configured as a diode-connected load.\n\nFigure 7.13 CS stage with diode-connected PMOS device.\n\nSolution This stage resembles that in Fig. 7.12(a), but with NMOS devices replaced by PMOS transistors: $M_{1}$ acts as a common-source device and $M_{2}$ as a diode-connected load. Therefore,\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 2}\\left(\\frac{1}{g_{m 1}}\\left\\|r_{O 1}\\right\\| r_{O 2}\\right) \\tag{7.63}\n\\end{equation*}\n$$\n\nExercise Repeat the above example if the gate of $M_{1}$ is connected to a constant voltage of 0.5 V."
},
{
    "text": "Recall from Chapter 5 that placing a resistor in series with the emitter of a bipolar transistor modifies characteristics such as gain, I/O impedances, and linearity. We anticipate similar outcomes for a degenerated CS amplifier.\n\nImage Description:\n- **(a)**\n  - **Components:**\n    - **M1:** NMOS, Ports: {S: GND, D: Vout, G: Vin}\n    - **RD:** Resistor, Value: RD, Ports: {N1: Vout, N2: VDD}\n    - **RS:** Resistor, Value: RS, Ports: {N1: GND, N2: Vout}\n  - **Extra Info:** This is a common-source amplifier with source degeneration. The NMOS transistor M1 is connected with its source to ground through resistor RS, its drain to the output Vout through resistor RD, and its gate to the input Vin. The circuit is powered by VDD.\n\n- **(b)**\n  - **Components:**\n    - **V1:** VoltageSource, Value: V1, Ports: {Np: Vin, Nn: GND}\n    - **RS:** Resistor, Value: RS, Ports: {N1: GND, N2: V1}\n    - **gmV1:** VoltageControlledCurrentSource, Ports: {Np: V1, Nn: Vout}\n    - **RD:** Resistor, Value: RD, Ports: {N1: Vout, N2: GND}\n  - **Extra Info:** This is a small-signal model of a common-source amplifier with source degeneration. The voltage source V1 provides the input voltage Vin. The resistor RS is connected to ground, and the current source gmV1 represents the transconductance in the circuit. The output is taken across resistor RD, which is also connected to ground.\n\nFigure 7.14 illustrates the stage along with its small-signal equivalent (assuming $\\lambda=0$). Similar to the bipolar counterpart, the degeneration resistor supports a portion of the input voltage change. From Fig. 7.14(b), we derive:\n\n$$\n\\begin{equation*}\nv_{\\text {in }}=v_{1}+g_{m} v_{1} R_{S} \\tag{7.64}\n\\end{equation*}\n$$\n\nThus,\n\n$$\n\\begin{equation*}\nv_{1}=\\frac{v_{i n}}{1+g_{m} R_{S}} \\tag{7.65}\n\\end{equation*}\n$$\n\nSince $g_{m} v_{1}$ flows through $R_{D}$, we have $v_{\\text {out }}=-g_{m} v_{1} R_{D}$, leading to:\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =-\\frac{g_{m} R_{D}}{1+g_{m} R_{S}}  \\tag{7.66}\\\\\n& =-\\frac{R_{D}}{\\frac{1}{g_{m}}+R_{S}} \\tag{7.67}\n\\end{align*}\n$$\n\nThis result matches Eq. (5.157) for the bipolar counterpart.\n\n**Example 7.8**\n- **(a)**\n  - **Components:**\n    - **M1:** NMOS, Ports: {S: GND, D: Vout, G: Vin}\n    - **M2:** PMOS, Ports: {S: VDD, D: Vout, G: GND}\n    - **RD:** Resistor, Value: RD, Ports: {N1: VDD, N2: Vout}\n  - **Extra Info:** The circuit is a common-source stage with degeneration, using M1 as an NMOS and M2 as a PMOS. M2 is diode-connected, providing feedback. The output is taken across RD.\n\n- **(b)**\n  - **Components:**\n    - **M1:** NMOS, Ports: {S: GND, D: Vout, G: Vin}\n    - **RD:** Resistor, Value: RD, Ports: {N1: VDD, N2: Vout}\n    - **S1:** Resistor, Value: 1/gm2, Ports: {N1: GND, N2: GND}\n  - **Extra Info:** The circuit is a common-source stage with degeneration, using M1 as an NMOS. The output is taken across RD. The resistor S1 represents a source degeneration resistor with a value of 1/gm2.\n\nFigure 7.15 (a) Example of CS stage with degeneration, (b) simplified circuit.\n\n**Solution:** Transistor $M_{2}$ acts as a diode-connected device, presenting an impedance of $1 / g_{m 2}$ [Fig. 7.15(b)]. The gain is given by Eq. (7.67) if $R_{S}$ is replaced with $1 / g_{m 2}$:\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{R_{D}}{\\frac{1}{g_{m 1}}+\\frac{1}{g_{m 2}}} . \\tag{7.68}\n\\end{equation*}\n$$\n\n**Exercise:** What occurs if $\\lambda \\neq 0$ for $M_{2}$?\n\nIn line with Chapter 5, we can examine the impact of a resistor in series with the gate (Fig. 7.16). However, since the gate current is negligible (at low frequencies), $R_{G}$ does not sustain a voltage drop and does not affect the voltage gain or I/O impedances.\n\n**Effect of Transistor Output Impedance:** Like the bipolar counterparts, including the transistor output impedance complicates the analysis, as discussed in Problem 7.32. Nevertheless, the output impedance of the degenerated CS stage is crucial in analog design and warrants study.\n\nFigure 7.17 depicts the small-signal equivalent of the circuit. Since $R_{S}$ carries a current equal to $i_{X}$, we have $v_{1}=-i_{X} R_{S}$. Also, the current through $r_{O}$ is:\n\nImage Description:\n- **Figure 7.16 CS stage with gate resistance**\n  - **Components:**\n    - **M1:** NMOS, Ports: {S: s1, D: Vout, G: g1}\n    - **RG:** Resistor, Value: RG, Ports: {N1: Vin, N2: g1}\n    - **RD:** Resistor, Value: RD, Ports: {N1: VDD, N2: Vout}\n    - **RS:** Resistor, Value: RS, Ports: {N1: s1, N2: GND}\n    - **VDD:** VoltageSource, Value: VDD, Ports: {Np: VDD, Nn: GND}\n  - **Extra Info:** The circuit is a common-source (CS) stage with a gate resistance RG and degeneration resistance RS. It amplifies input signals at Vin, with the output at Vout. The NMOS transistor M1 is the active device in the amplification process.\n\n- **Figure 7.17 Output impedance of CS stage with degeneration**\n  - **Components:**\n    - **V1:** VoltageSource, Value: V1, Ports: {Np: v1, Nn: -Vi}\n    - **RS:** Resistor, Value: RS, Ports: {N1: -Vi, N2: GND}\n    - **gmV1:** VoltageControlledCurrentSource, Ports: {Np: -Vi, Nn: -Vi}\n    - **ro:** Resistor, Value: ro, Ports: {N1: Vx, N2: -Vi}\n    - **Vx:** VoltageSource, Value: Vx, Ports: {Np: Vx, Nn: GND}\n  - **Extra Info:** The circuit diagram represents the output impedance of a common-source (CS) stage with degeneration. It includes a voltage source V1, a resistor RS, a voltage-controlled current source gmV1, a resistor ro, and a voltage source Vx. The diagram shows the relationship between the current ix and voltage vx in the CS stage.\n\n$i_{X}-g_{m} v_{1}=i_{X}-g_{m}\\left(-i_{X} R_{S}\\right)=i_{X}+g_{m} i_{X} R_{S}$. Adding the voltage drops across $r_{O}$ and $R_{S}$ and equating to $v_{X}$, we get:\n\n$$\n\\begin{equation*}\nr_{O}\\left(i_{X}+g_{m} i_{X} R_{S}\\right)+i_{X} R_{S}=v_{X} \\tag{7.69}\n\\end{equation*}\n$$\n\nThus,\n\n$$\n\\begin{align*}\n\\frac{v_{X}}{i_{X}} & =r_{O}\\left(1+g_{m} R_{S}\\right)+R_{S}  \\tag{7.70}\\\\\n& =\\left(1+g_{m} r_{O}\\right) R_{S}+r_{O}  \\tag{7.71}\\\\\n& \\approx g_{m} r_{O} R_{S}+r_{O} \\tag{7.72}\n\\end{align*}\n$$\n\nAlternatively, the model in Fig. 7.17 resembles its bipolar counterpart in Fig. 5.46(a) but with $r_{\\pi}=\\infty$. Setting $r_{\\pi} \\rightarrow \\infty$ in Eqs. (5.196) and (5.197) yields the same results. As expected, the MOS version also exhibits a \"boosted\" output impedance, similar to the bipolar degenerated stage.\n\n**Compute the output resistance of the circuit in Fig. 7.18(a) if $M_{1}$ and $M_{2}$ are identical.**\n- **(a)**\n  - **Components:**\n    - **M1:** NMOS, Ports: {S: sig2, D: d1, G: Vb}\n    - **M2:** NMOS, Ports: {S: VDD, D: sig2, G: GND}\n    - **Rout:** Resistor, Value: Rout, Ports: {N1: d1, N2: Vout}\n  - **Extra Info:** The circuit is a common-source stage with degeneration using two NMOS transistors. M2 is diode-connected.\n\n- **(b)**\n  - **Components:**\n    - **M1:** NMOS, Ports: {S: s1, D: d1, G: Vb}\n    - **M2:** NMOS, Ports: {S: GND, D: s1, G: s1}\n    - **Rout:** Resistor, Value: Rout, Ports: {N1: d1, N2: Vout}\n  - **Extra Info:** The circuit is a common-source stage with degeneration using two NMOS transistors. M2 is diode-connected. The output resistance is calculated using the formula for Rout.\n\nFigure 7.18 (a) Example of CS stage with degeneration, (b) simplified circuit.\n\n**Solution:** The diode-connected device $M_{2}$ can be represented by a small-signal resistance of $\\left(1 / g_{m 2}\\right) \\| r_{O 2} \\approx 1 / g_{m 2}$. Transistor $M_{1}$ is degenerated by this resistance, and from Eq. (7.70):\n\n$$\n\\begin{equation*}\nR_{o u t}=r_{O 1}\\left(1+g_{m 1} \\frac{1}{g_{m 2}}\\right)+\\frac{1}{g_{m 2}} \\tag{7.73}\n\\end{equation*}\n$$\n\nSince $g_{m 1}=g_{m 2}=g_{m}$, this reduces to:\n\n$$\n\\begin{align*}\nR_{\\text {out }} & =2 r_{O 1}+\\frac{1}{g_{m}}  \\tag{7.74}\\\\\n& \\approx 2 r_{O 1} . \\tag{7.75}\n\\end{align*}\n$$\n\n**Exercise:** Do the results change if $M_{2}$ is replaced with a diode-connected PMOS device?\n\n**Example:** Determine the output resistance of the circuit in Fig. 7.19(a) and compare it with the result in the previous example. Assume $M_{1}$ and $M_{2}$ are in saturation.\n- **(a)**\n  - **Components:**\n    - **M1:** NMOS, Ports: {S: s1d2, D: d1, G: Vb2}\n    - **M2:** NMOS, Ports: {S: GND, D: s1d2, G: Vb1}\n    - **Rout:** Resistor, Value: Rout, Ports: {N1: d1, N2: Vout}\n    - **d1:** Diode, Ports: {Na: Vout, Nc: d1}\n  - **Extra Info:** The circuit is a common-source stage with NMOS transistors M1 and M2, and a diode-connected load. M2 acts as a source degeneration resistor for M1. The output is taken across Rout.\n\n- **(b)**\n  - **Components:**\n    - **M1:** NMOS, Ports: {S: s1, D: d1, G: GND}\n    - **rO1:** Resistor, Value: rO1, Ports: {N1: d1, N2: s1}\n    - **rO2:** Resistor, Value: rO2, Ports: {N1: s1, N2: GND}\n    - **d1:** Diode, Ports: {Na: Vout, Nc: d1}\n    - **Rout:** Resistor, Value: Rout, Ports: {N1: d1, N2: Vout}\n  - **Extra Info:** The circuit is a common-source stage with NMOS transistor M1 and a diode-connected load. Resistors rO1 and rO2 are connected to the source of M1, with rO2 connected to ground. The output is taken across Rout, connected to the diode.\n\nFigure 7.19 (a) Example of CS stage with degeneration, (b) simplified circuit.\n\n**Solution:** With its gate-source voltage fixed, transistor $M_{2}$ operates as a current source, introducing a resistance of $r_{O 2}$ from the source of $M_{1}$ to ground [Fig. 7.19(b)].\n\nEquation (7.71) can thus be written as:\n\n$$\n\\begin{align*}\nR_{\\text {out }} & =\\left(1+g_{m 1} r_{O 1}\\right) r_{O 2}+r_{O 1}  \\tag{7.76}\\\\\n& \\approx g_{m 1} r_{O 1} r_{O 2}+r_{O 1} \\tag{7.77}\n\\end{align*}\n$$\n\nAssuming $g_{m 1} r_{O 2} \\gg 1$ (which is valid in practice), we have:\n\n$$\n\\begin{equation*}\nR_{\\text {out }} \\approx g_{m 1} r_{O 1} r_{O 2} \\tag{7.78}\n\\end{equation*}\n$$\n\nWe observe that this value is significantly higher than that in Eq. (7.75).\n\n**Exercise:** Repeat the above example for the PMOS counterpart of the circuit."
},
{
    "text": "Recall from Chapter 5 that placing a resistor in series with the emitter of a bipolar transistor modifies characteristics such as gain, I/O impedances, and linearity. We anticipate similar outcomes for a degenerated CS amplifier.\n\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: Vout, N2: VDD}\nname: RS, type: Resistor, value: RS, ports: {N1: GND, N2: Vout}\n]\nextrainfo:This configuration is a common-source amplifier with source degeneration. The NMOS transistor M1 has its source connected to ground through resistor RS, its drain to the output Vout via resistor RD, and its gate to the input Vin. The circuit is powered by VDD.\n\n(a)\nimage_name:(b)\ndescription:\n[\nname: V1, type: VoltageSource, value: V1, ports: {Np: Vin, Nn: GND}\nname: RS, type: Resistor, value: RS, ports: {N1: GND, N2: V1}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: V1, Nn: Vout}\nname: RD, type: Resistor, value: RD, ports: {N1: Vout, N2: GND}\n]\nextrainfo:This represents a small-signal model of a common-source amplifier with source degeneration. The voltage source V1 provides the input voltage Vin. Resistor RS is connected to ground, and the current source gmV1 represents the transconductance. The output is measured across resistor RD, which is also grounded.\n\n(b)\n\nFigure 7.14 illustrates the stage and its small-signal equivalent (assuming $\\lambda=0$). Like its bipolar counterpart, the degeneration resistor partially absorbs the input voltage change. From Fig. 7.14(b), we derive\n\n$$\n\\begin{equation*}\nv_{\\text {in }}=v_{1}+g_{m} v_{1} R_{S} \\tag{7.64}\n\\end{equation*}\n$$\n\nyielding\n\n$$\n\\begin{equation*}\nv_{1}=\\frac{v_{i n}}{1+g_{m} R_{S}} \\tag{7.65}\n\\end{equation*}\n$$\n\nSince $g_{m} v_{1}$ flows through $R_{D}, v_{\\text {out }}=-g_{m} v_{1} R_{D}$, thus\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =-\\frac{g_{m} R_{D}}{1+g_{m} R_{S}}  \\tag{7.66}\\\\\n& =-\\frac{R_{D}}{\\frac{1}{g_{m}}+R_{S}} \\tag{7.67}\n\\end{align*}\n$$\n\nThis result mirrors Eq. (5.157) for the bipolar equivalent.\n\nExample 7.8\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\n]\nextrainfo:The circuit is a common-source stage with degeneration, featuring M1 as an NMOS and M2 as a PMOS. M2 is diode-connected, providing feedback, with the output taken across RD.\n\n(a)\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: S1, type: Resistor, value: 1/gm2, ports: {N1: GND, N2: GND}\n]\nextrainfo:The circuit is a common-source stage with degeneration, using M1 as an NMOS. The output is taken across RD. Resistor S1 represents a source degeneration resistor with a value of 1/gm2.\n\n(b)\n\nFigure 7.15 shows an example of a CS stage with degeneration and its simplified circuit.\nSolution Transistor $M_{2}$ acts as a diode-connected device, presenting an impedance of $1 / g_{m 2}$ [Fig. 7.15(b)]. The gain is thus given by Eq. (7.67) if $R_{S}$ is replaced with $1 / g_{m 2}$:\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{R_{D}}{\\frac{1}{g_{m 1}}+\\frac{1}{g_{m 2}}} . \\tag{7.68}\n\\end{equation*}\n$$\n\nExercise\nWhat occurs if $\\lambda \\neq 0$ for $M_{2}$?\n\nIn line with Chapter 5's developments, we can examine the impact of a resistor in series with the gate (Fig. 7.16). However, since the gate current is negligible (at low frequencies), $R_{G}$ does not cause a voltage drop and does not affect the voltage gain or I/O impedances.\n\nEffect of Transistor Output Impedance Like the bipolar equivalents, including the transistor output impedance complicates the analysis, as discussed in Problem 7.32. Nevertheless, the output impedance of the degenerated CS stage is crucial in analog design and warrants further study.\n\nFigure 7.17 depicts the small-signal equivalent of the circuit. Since $R_{S}$ carries a current equal to $i_{X}$, we have $v_{1}=-i_{X} R_{S}$. Additionally, the current through $r_{O}$ equals\nimage_name:Figure 7.16 CS stage with gate resistance\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1, D: Vout, G: g1}\nname: RG, type: Resistor, value: RG, ports: {N1: Vin, N2: g1}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a common-source (CS) stage with a gate resistance RG and degeneration resistance RS. It amplifies input signals at Vin, with the output at Vout. The NMOS transistor M1 is the active amplifying device.\n\nFigure 7.16 CS stage with gate resistance.\nimage_name:Figure 7.17 Output impedance of CS stage with degeneration\ndescription:\n[\nname: V1, type: VoltageSource, value: V1, ports: {Np: v1, Nn: -Vi}\nname: RS, type: Resistor, value: RS, ports: {N1: -Vi, N2: GND}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: -Vi, Nn: -Vi}\nname: ro, type: Resistor, value: ro, ports: {N1: Vx, N2: -Vi}\nname: Vx, type: VoltageSource, value: Vx, ports: {Np: Vx, Nn: GND}\n]\nextrainfo:The circuit diagram represents the output impedance of a common-source (CS) stage with degeneration. It includes a voltage source V1, resistor RS, voltage-controlled current source gmV1, resistor ro, and voltage source Vx. The diagram shows the relationship between current ix and voltage vx in the CS stage.\n\nFigure 7.17 Output impedance of CS stage with degeneration.\n$i_{X}-g_{m} v_{1}=i_{X}-g_{m}\\left(-i_{X} R_{S}\\right)=i_{X}+g_{m} i_{X} R_{S}$. Adding the voltage drops across $r_{O}$ and $R_{S}$ and equating to $v_{X}$, we get\n\n$$\n\\begin{equation*}\nr_{O}\\left(i_{X}+g_{m} i_{X} R_{S}\\right)+i_{X} R_{S}=v_{X} \\tag{7.69}\n\\end{equation*}\n$$\n\nresulting in\n\n$$\n\\begin{align*}\n\\frac{v_{X}}{i_{X}} & =r_{O}\\left(1+g_{m} R_{S}\\right)+R_{S}  \\tag{7.70}\\\\\n& =\\left(1+g_{m} r_{O}\\right) R_{S}+r_{O}  \\tag{7.71}\\\\\n& \\approx g_{m} r_{O} R_{S}+r_{O} \\tag{7.72}\n\\end{align*}\n$$\n\nAlternatively, noting that the model in Fig. 7.17 resembles its bipolar counterpart in Fig. 5.46(a) but with $r_{\\pi}=\\infty$, setting $r_{\\pi} \\rightarrow \\infty$ in Eqs. (5.196) and (5.197) yields the same results. As expected from the bipolar degenerated stage study, the MOS version also exhibits a \"boosted\" output impedance.\n\nCompute the output resistance of the circuit in Fig. 7.18(a) if $M_{1}$ and $M_{2}$ are identical.\nimage_name:Figure 7.18 (a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: sig2, D: d1, G: Vb}\nname: M2, type: NMOS, ports: {S: VDD, D: sig2, G: GND}\nname: Rout, type: Resistor, value: Rout, ports: {N1: d1, N2: Vout}\n]\nextrainfo:The circuit is a common-source stage with degeneration using two NMOS transistors. M2 is diode-connected.\n\n(a)\nimage_name:Figure 7.18 (a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1, D: d1, G: Vb}\nname: M2, type: NMOS, ports: {S: VDD, D: s1, G: s1}\nname: Rout, type: Resistor, value: Rout, ports: {N1: d1, N2: Vout}\n]\nextrainfo:The circuit is a common-source stage with degeneration using two NMOS transistors. M2 is diode-connected. The output resistance is calculated using the formula for Rout.\n\n(b)\n\nFigure 7.18 shows an example of a CS stage with degeneration and its simplified circuit.\nSolution The diode-connected transistor $M_{2}$ can be represented by a small-signal resistance of $\\left(1 / g_{m 2}\\right) \\| r_{O 2} \\approx 1 / g_{m 2}$. Transistor $M_{1}$ is degenerated by this resistance, and from Eq. (7.70):\n\n$$\n\\begin{equation*}\nR_{o u t}=r_{O 1}\\left(1+g_{m 1} \\frac{1}{g_{m 2}}\\right)+\\frac{1}{g_{m 2}} \\tag{7.73}\n\\end{equation*}\n$$\n\nwhich, given $g_{m 1}=g_{m 2}=g_{m}$, simplifies to\n\n$$\n\\begin{align*}\nR_{\\text {out }} & =2 r_{O 1}+\\frac{1}{g_{m}}  \\tag{7.74}\\\\\n& \\approx 2 r_{O 1} . \\tag{7.75}\n\\end{align*}\n$$\n\nExercise Do the results change if $M_{2}$ is replaced with a diode-connected PMOS device?\n\nExample Determine the output resistance of the circuit in Fig. 7.19(a) and compare it with the result in the previous example. Assume $M_{1}$ and $M_{2}$ are in saturation.\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1d2, D: d1, G: Vb2}\nname: M2, type: NMOS, ports: {S: GND, D: s1d2, G: Vb1}\nname: Rout, type: Resistor, value: Rout, ports: {N1: d1, N2: Vout}\nname: d1, type: Diode, ports: {Na: Vout, Nc: d1}\n]\nextrainfo:The circuit is a common-source stage with NMOS transistors M1 and M2, and a diode-connected load. M2 acts as a source degeneration resistor for M1. The output is taken across Rout.\n\n(a)\nimage_name:(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1, D: d1, G: GND}\nname: rO1, type: Resistor, value: rO1, ports: {N1: d1, N2: s1}\nname: rO2, type: Resistor, value: rO2, ports: {N1: s1, N2: GND}\nname: d1, type: Diode, ports: {Na: Vout, Nc: d1}\nname: Rout, type: Resistor, value: Rout, ports: {N1: d1, N2: Vout}\n]\nextrainfo:The circuit is a common-source stage with NMOS transistor M1 and a diode-connected load. Resistors rO1 and rO2 are connected to the source of M1, with rO2 connected to ground. The output is taken across Rout, connected to the diode.\n\n(b)\n\nFigure 7.19 shows an example of a CS stage with degeneration and its simplified circuit.\nSolution With its gate-source voltage fixed, transistor $M_{2}$ operates as a current source, introducing a resistance of $r_{O 2}$ from the source of $M_{1}$ to ground [Fig. 7.19(b)].\n\nEquation (7.71) can thus be written as\n\n$$\n\\begin{align*}\nR_{\\text {out }} & =\\left(1+g_{m 1} r_{O 1}\\right) r_{O 2}+r_{O 1}  \\tag{7.76}\\\\\n& \\approx g_{m 1} r_{O 1} r_{O 2}+r_{O 1} \\tag{7.77}\n\\end{align*}\n$$\n\nAssuming $g_{m 1} r_{O 2} \\gg 1$ (which is valid in practice), we have\n\n$$\n\\begin{equation*}\nR_{\\text {out }} \\approx g_{m 1} r_{O 1} r_{O 2} \\tag{7.78}\n\\end{equation*}\n$$\n\nWe observe that this value is significantly higher than that in Eq. (7.75).\n\nExercise Repeat the above example for the PMOS counterpart of the circuit."
},
{
    "text": "Refer to Chapter 5, which explains that a resistor in series with the emitter of a bipolar transistor modifies traits like gain, input/output impedances, and linearity. Similar outcomes are anticipated for a degenerated common-source (CS) amplifier.\n\nImage Description (a):\n- Component: M1, Type: NMOS, Connections: Source (S) to Ground (GND), Drain (D) to Vout, Gate (G) to Vin\n- Component: RD, Type: Resistor, Value: RD, Connections: One end (N1) to Vout, Other end (N2) to VDD\n- Component: RS, Type: Resistor, Value: RS, Connections: One end (N1) to GND, Other end (N2) to Vout\nAdditional Info: This depicts a common-source amplifier with source degeneration. The NMOS transistor M1 is connected such that its source is grounded through RS, its drain connects to the output Vout via RD, and its gate receives the input Vin. The circuit is powered by VDD.\n\n(a)\n\nImage Description (b):\n- Component: V1, Type: VoltageSource, Value: V1, Connections: Positive (Np) to Vin, Negative (Nn) to GND\n- Component: RS, Type: Resistor, Value: RS, Connections: One end (N1) to GND, Other end (N2) to V1\n- Component: gmV1, Type: VoltageControlledCurrentSource, Connections: Positive (Np) to V1, Negative (Nn) to Vout\n- Component: RD, Type: Resistor, Value: RD, Connections: One end (N1) to Vout, Other end (N2) to GND\nAdditional Info: This represents a small-signal model of a common-source amplifier with source degeneration. The voltage source V1 provides the input voltage Vin. The resistor RS is grounded, and the current source gmV1 symbolizes the transconductance in the circuit. The output is measured across the resistor RD, which is also grounded.\n\n(b)\n\nFigure 7.14 illustrates the CS stage with degeneration and its small-signal equivalent (assuming $\\lambda=0$). Like its bipolar equivalent, the degeneration resistor supports a portion of the input voltage change. From Fig. 7.14(b), we derive:\n\n$$\n\\begin{equation*}\nv_{\\text {in }}=v_{1}+g_{m} v_{1} R_{S} \\tag{7.64}\n\\end{equation*}\n$$\n\nThus,\n\n$$\n\\begin{equation*}\nv_{1}=\\frac{v_{i n}}{1+g_{m} R_{S}} \\tag{7.65}\n\\end{equation*}\n$$\n\nSince $g_{m} v_{1}$ flows through RD, we get $v_{\\text {out }}=-g_{m} v_{1} R_{D}$, leading to:\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =-\\frac{g_{m} R_{D}}{1+g_{m} R_{S}}  \\tag{7.66}\\\\\n& =-\\frac{R_{D}}{\\frac{1}{g_{m}}+R_{S}} \\tag{7.67}\n\\end{align*}\n$$\n\nThis result mirrors Eq. (5.157) for the bipolar counterpart.\n\nExample 7.8\nImage Description (a):\n- Component: M1, Type: NMOS, Connections: Source (S) to GND, Drain (D) to Vout, Gate (G) to Vin\n- Component: M2, Type: PMOS, Connections: Source (S) to VDD, Drain (D) to Vout, Gate (G) to GND\n- Component: RD, Type: Resistor, Value: RD, Connections: One end (N1) to VDD, Other end (N2) to Vout\nAdditional Info: This circuit is a common-source stage with degeneration, featuring M1 as an NMOS and M2 as a PMOS. M2 is diode-connected, providing feedback, with the output taken across RD.\n\n(a)\n\nImage Description (b):\n- Component: M1, Type: NMOS, Connections: Source (S) to GND, Drain (D) to Vout, Gate (G) to Vin\n- Component: RD, Type: Resistor, Value: RD, Connections: One end (N1) to VDD, Other end (N2) to Vout\n- Component: S1, Type: Resistor, Value: 1/gm2, Connections: One end (N1) to GND, Other end (N2) to GND\nAdditional Info: This circuit is a common-source stage with degeneration, using M1 as an NMOS. The output is taken across RD, with resistor S1 representing a source degeneration resistor valued at 1/gm2.\n\n(b)\n\nFigure 7.15 shows an example of a CS stage with degeneration and its simplified circuit.\nSolution: Transistor M2, acting as a diode-connected device, presents an impedance of $1 / g_{m 2}$ [Fig. 7.15(b)]. The gain is thus given by Eq. (7.67), substituting $R_{S}$ with $1 / g_{m 2}$:\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{R_{D}}{\\frac{1}{g_{m 1}}+\\frac{1}{g_{m 2}}} . \\tag{7.68}\n\\end{equation*}\n$$\n\nExercise: What occurs if $\\lambda \\neq 0$ for M2?\n\nIn line with Chapter 5's developments, we can examine the impact of a resistor in series with the gate (Fig. 7.16). However, since the gate current is negligible (at low frequencies), $R_{G}$ sustains no voltage drop and does not affect the voltage gain or I/O impedances.\n\nThe Effect of Transistor Output Impedance: Like the bipolar equivalents, including the transistor output impedance complicates the analysis, as discussed in Problem 7.32. Nevertheless, the output impedance of the degenerated CS stage is crucial in analog design and warrants study.\n\nFigure 7.17 displays the small-signal equivalent of the circuit. Since RS carries a current equal to $i_{X}$, we have $v_{1}=-i_{X} R_{S}$. Also, the current through $r_{O}$ equals $i_{X}-g_{m} v_{1}=i_{X}-g_{m}(-i_{X} R_{S})=i_{X}+g_{m} i_{X} R_{S}$. Adding the voltage drops across $r_{O}$ and RS and equating to $v_{X}$, we obtain:\n\n$$\n\\begin{equation*}\nr_{O}(i_{X}+g_{m} i_{X} R_{S})+i_{X} R_{S}=v_{X} \\tag{7.69}\n\\end{equation*}\n$$\n\nThus,\n\n$$\n\\begin{align*}\n\\frac{v_{X}}{i_{X}} & =r_{O}(1+g_{m} R_{S})+R_{S}  \\tag{7.70}\\\\\n& =(1+g_{m} r_{O}) R_{S}+r_{O}  \\tag{7.71}\\\\\n& \\approx g_{m} r_{O} R_{S}+r_{O} \\tag{7.72}\n\\end{align*}\n$$\n\nAlternatively, the model in Fig. 7.17 resembles its bipolar counterpart in Fig. 5.46(a) but with $r_{\\pi}=\\infty$. Setting $r_{\\pi} \\rightarrow \\infty$ in Eqs. (5.196) and (5.197) yields the same results. As expected, the MOS version also shows a \"boosted\" output impedance, similar to the bipolar degenerated stage.\n\nCompute the output resistance of the circuit in Fig. 7.18(a) if M1 and M2 are identical.\nImage Description (a):\n- Component: M1, Type: NMOS, Connections: Source (S) to sig2, Drain (D) to d1, Gate (G) to Vb\n- Component: M2, Type: NMOS, Connections: Source (S) to GND, Drain (D) to sig2, Gate (G) to sig2\n- Component: Rout, Type: Resistor, Value: Rout, Connections: One end (N1) to d1, Other end (N2) to Vout\nAdditional Info: This circuit is a common-source stage with degeneration using two NMOS transistors. M2 is diode-connected.\n\n(a)\n\nImage Description (b):\n- Component: M1, Type: NMOS, Connections: Source (S) to s1, Drain (D) to d1, Gate (G) to Vb\n- Component: M2, Type: NMOS, Connections: Source (S) to GND, Drain (D) to s1, Gate (G) to s1\n- Component: Rout, Type: Resistor, Value: Rout, Connections: One end (N1) to d1, Other end (N2) to Vout\nAdditional Info: This circuit is a common-source stage with degeneration using two NMOS transistors. M2 is diode-connected. The output resistance is calculated using the formula for Rout.\n\n(b)\n\nFigure 7.18 shows an example of a CS stage with degeneration and its simplified circuit.\nSolution: The diode-connected M2 can be represented by a small-signal resistance of $\\left(1 / g_{m 2}\\right) \\| r_{O 2} \\approx 1 / g_{m 2}$. Transistor M1 is degenerated by this resistance, and from Eq. (7.70):\n\n$$\n\\begin{equation*}\nR_{o u t}=r_{O 1}\\left(1+g_{m 1} \\frac{1}{g_{m 2}}\\right)+\\frac{1}{g_{m 2}} \\tag{7.73}\n\\end{equation*}\n$$\n\nSince $g_{m 1}=g_{m 2}=g_{m}$, this simplifies to:\n\n$$\n\\begin{align*}\nR_{\\text {out }} & =2 r_{O 1}+\\frac{1}{g_{m}}  \\tag{7.74}\\\\\n& \\approx 2 r_{O 1} . \\tag{7.75}\n\\end{align*}\n$$\n\nExercise: Do the results change if M2 is replaced with a diode-connected PMOS device?\n\nExample: Determine the output resistance of the circuit in Fig. 7.19(a) and compare it with the result in the previous example. Assume M1 and M2 are in saturation.\nImage Description (a):\n- Component: M1, Type: NMOS, Connections: Source (S) to s1d2, Drain (D) to d1, Gate (G) to Vb2\n- Component: M2, Type: NMOS, Connections: Source (S) to GND, Drain (D) to s1d2, Gate (G) to Vb1\n- Component: Rout, Type: Resistor, Value: Rout, Connections: One end (N1) to d1, Other end (N2) to Vout\n- Component: d1, Type: Diode, Connections: Anode (Na) to Vout, Cathode (Nc) to d1\nAdditional Info: This circuit is a common-source stage with NMOS transistors M1 and M2, and a diode-connected load. M2 acts as a source degeneration resistor for M1. The output is taken across Rout.\n\n(a)\n\nImage Description (b):\n- Component: M1, Type: NMOS, Connections: Source (S) to s1, Drain (D) to d1, Gate (G) to GND\n- Component: rO1, Type: Resistor, Value: rO1, Connections: One end (N1) to d1, Other end (N2) to s1\n- Component: rO2, Type: Resistor, Value: rO2, Connections: One end (N1) to s1, Other end (N2) to GND\n- Component: d1, Type: Diode, Connections: Anode (Na) to Vout, Cathode (Nc) to d1\n- Component: Rout, Type: Resistor, Value: Rout, Connections: One end (N1) to d1, Other end (N2) to Vout\nAdditional Info: This circuit is a common-source stage with NMOS transistor M1 and a diode-connected load. Resistors rO1 and rO2 are connected to the source of M1, with rO2 grounded. The output is taken across Rout, connected to the diode.\n\n(b)\n\nFigure 7.19 shows an example of a CS stage with degeneration and its simplified circuit.\nSolution: With its gate-source voltage fixed, M2 operates as a current source, introducing a resistance of $r_{O 2}$ from the source of M1 to ground [Fig. 7.19(b)].\n\nUsing Eq. (7.71), we get:\n\n$$\n\\begin{align*}\nR_{\\text {out }} & =(1+g_{m 1} r_{O 1}) r_{O 2}+r_{O 1}  \\tag{7.76}\\\\\n& \\approx g_{m 1} r_{O 1} r_{O 2}+r_{O 1} \\tag{7.77}\n\\end{align*}\n$$\n\nAssuming $g_{m 1} r_{O 2} \\gg 1$, we have:\n\n$$\n\\begin{equation*}\nR_{\\text {out }} \\approx g_{m 1} r_{O 1} r_{O 2} \\tag{7.78}\n\\end{equation*}\n$$\n\nThis value is significantly higher than that in Eq. (7.75).\n\nExercise: Repeat the above example for the PMOS counterpart of the circuit."
},
{
    "text": "Recall from Chapter 5 that placing a resistor in series with the emitter of a bipolar transistor modifies characteristics such as gain, I/O impedances, and linearity. Similar outcomes are anticipated for a degenerated CS amplifier.\n\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: Vout, N2: VDD}\nname: RS, type: Resistor, value: RS, ports: {N1: GND, N2: Vout}\n]\nextrainfo:This configuration is a common-source amplifier with source degeneration. The NMOS transistor M1 is connected with its source to ground through resistor RS, its drain to output Vout via resistor RD, and its gate to input Vin. The circuit is powered by VDD.\n\n(a)\nimage_name:(b)\ndescription:\n[\nname: V1, type: VoltageSource, value: V1, ports: {Np: Vin, Nn: GND}\nname: RS, type: Resistor, value: RS, ports: {N1: GND, N2: V1}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: V1, Nn: Vout}\nname: RD, type: Resistor, value: RD, ports: {N1: Vout, N2: GND}\n]\nextrainfo:This represents a small-signal model of a common-source amplifier with source degeneration. The voltage source V1 provides input voltage Vin. Resistor RS is connected to ground, and the current source gmV1 models the transconductance. The output is taken across resistor RD, which is also grounded.\n\n(b)\n\nFigure 7.14 illustrates the CS stage with degeneration and its small-signal equivalent (assuming $\\lambda=0$). Like its bipolar counterpart, the degeneration resistor retains a portion of the input voltage change. From Fig. 7.14(b), we derive\n\n$$\n\\begin{equation*}\nv_{\\text {in }}=v_{1}+g_{m} v_{1} R_{S} \\tag{7.64}\n\\end{equation*}\n$$\n\nleading to\n\n$$\n\\begin{equation*}\nv_{1}=\\frac{v_{i n}}{1+g_{m} R_{S}} \\tag{7.65}\n\\end{equation*}\n$$\n\nSince $g_{m} v_{1}$ flows through RD, we have $v_{\\text {out }}=-g_{m} v_{1} R_{D}$, and thus\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =-\\frac{g_{m} R_{D}}{1+g_{m} R_{S}}  \\tag{7.66}\\\\\n& =-\\frac{R_{D}}{\\frac{1}{g_{m}}+R_{S}} \\tag{7.67}\n\\end{align*}\n$$\n\nThis result mirrors Eq. (5.157) for the bipolar equivalent.\n\nExample 7.8\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\n]\nextrainfo:The circuit features a common-source stage with degeneration, employing M1 as an NMOS and M2 as a PMOS. M2 is diode-connected, providing feedback, with the output taken across RD.\n\n(a)\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: S1, type: Resistor, value: 1/gm2, ports: {N1: GND, N2: GND}\n]\nextrainfo:The circuit is a common-source stage with degeneration, using M1 as an NMOS. The output is taken across RD. Resistor S1 represents a source degeneration resistor with a value of 1/gm2.\n\n(b)\n\nFigure 7.15 shows an example of a CS stage with degeneration and its simplified circuit.\nSolution Transistor M2 acts as a diode-connected device, presenting an impedance of $1 / g_{m 2}$ [Fig. 7.15(b)]. The gain is thus given by Eq. (7.67) if RS is replaced with $1 / g_{m 2}$:\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{R_{D}}{\\frac{1}{g_{m 1}}+\\frac{1}{g_{m 2}}} . \\tag{7.68}\n\\end{equation*}\n$$\n\nExercise\nWhat occurs if $\\lambda \\neq 0$ for M2?\n\nIn line with Chapter 5's developments, we can examine the impact of a resistor in series with the gate (Fig. 7.16). However, since the gate current is negligible (at low frequencies), RG experiences no voltage drop and does not affect voltage gain or I/O impedances.\n\nEffect of Transistor Output Impedance Similar to bipolar counterparts, including the transistor output impedance complicates the analysis, as explored in Problem 7.32. Nonetheless, the output impedance of the degenerated CS stage is crucial in analog design and warrants examination.\n\nFigure 7.17 depicts the small-signal equivalent of the circuit. Given that RS carries a current equal to iX (why?), we have $v_{1}=-i_{X} R_{S}$. Additionally, the current through rO equals\n\nimage_name:Figure 7.16 CS stage with gate resistance\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1, D: Vout, G: g1}\nname: RG, type: Resistor, value: RG, ports: {N1: Vin, N2: g1}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a common-source (CS) stage with gate resistance RG and degeneration resistance RS, used for amplifying input signals at Vin, with the output at Vout. The NMOS transistor M1 is the active amplification device.\n\nFigure 7.16 CS stage with gate resistance.\nimage_name:Figure 7.17 Output impedance of CS stage with degeneration\ndescription:\n[\nname: V1, type: VoltageSource, value: V1, ports: {Np: v1, Nn: -Vi}\nname: RS, type: Resistor, value: RS, ports: {N1: -Vi, N2: GND}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: -Vi, Nn: -Vi}\nname: ro, type: Resistor, value: ro, ports: {N1: Vx, N2: -Vi}\nname: Vx, type: VoltageSource, value: Vx, ports: {Np: Vx, Nn: GND}\n]\nextrainfo:The diagram represents the output impedance of a common-source (CS) stage with degeneration, including a voltage source V1, resistor RS, voltage-controlled current source gmV1, resistor ro, and voltage source Vx. It shows the relationship between current ix and voltage vx in the CS stage.\n\nFigure 7.17 Output impedance of CS stage with degeneration.\n$i_{X}-g_{m} v_{1}=i_{X}-g_{m}\\left(-i_{X} R_{S}\\right)=i_{X}+g_{m} i_{X} R_{S}$. Adding the voltage drops across rO and RS and equating to vX, we obtain\n\n$$\n\\begin{equation*}\nr_{O}\\left(i_{X}+g_{m} i_{X} R_{S}\\right)+i_{X} R_{S}=v_{X} \\tag{7.69}\n\\end{equation*}\n$$\n\nyielding\n\n$$\n\\begin{align*}\n\\frac{v_{X}}{i_{X}} & =r_{O}\\left(1+g_{m} R_{S}\\right)+R_{S}  \\tag{7.70}\\\\\n& =\\left(1+g_{m} r_{O}\\right) R_{S}+r_{O}  \\tag{7.71}\\\\\n& \\approx g_{m} r_{O} R_{S}+r_{O} \\tag{7.72}\n\\end{align*}\n$$\n\nAlternatively, noting the similarity between the model in Fig. 7.17 and its bipolar counterpart in Fig. 5.46(a) but with $r_{\\pi}=\\infty$, setting $r_{\\pi} \\rightarrow \\infty$ in Eqs. (5.196) and (5.197) produces the same results. As expected from the bipolar degenerated stage study, the MOS version also exhibits a \"boosted\" output impedance.\n\nCompute the output resistance of the circuit in Fig. 7.18(a) if M1 and M2 are identical.\nimage_name:Figure 7.18 (a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: sig2, D: d1, G: Vb}\nname: M2, type: NMOS, ports: {S: VDD, D: sig2, G: GND}\nname: Rout, type: Resistor, value: Rout, ports: {N1: d1, N2: Vout}\n]\nextrainfo:The circuit is a common-source stage with degeneration using two NMOS transistors. M2 is diode-connected.\n\n(a)\nimage_name:Figure 7.18 (a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1, D: d1, G: Vb}\nname: M2, type: NMOS, ports: {S: VDD, D: s1, G: s1}\nname: Rout, type: Resistor, value: Rout, ports: {N1: d1, N2: Vout}\n]\nextrainfo:The circuit is a common-source stage with degeneration using two NMOS transistors. M2 is diode-connected. The output resistance is calculated using the formula for Rout.\n\n(b)\n\nFigure 7.18 shows an example of a CS stage with degeneration and its simplified circuit.\nSolution The diode-connected device M2 can be represented by a small-signal resistance of $\\left(1 / g_{m 2}\\right) \\| r_{O 2} \\approx 1 / g_{m 2}$. Transistor M1 is degenerated by this resistance, and from Eq. (7.70):\n\n$$\n\\begin{equation*}\nR_{o u t}=r_{O 1}\\left(1+g_{m 1} \\frac{1}{g_{m 2}}\\right)+\\frac{1}{g_{m 2}} \\tag{7.73}\n\\end{equation*}\n$$\n\nwhich, given $g_{m 1}=g_{m 2}=g_{m}$, simplifies to\n\n$$\n\\begin{align*}\nR_{\\text {out }} & =2 r_{O 1}+\\frac{1}{g_{m}}  \\tag{7.74}\\\\\n& \\approx 2 r_{O 1} . \\tag{7.75}\n\\end{align*}\n$$\n\nExercise Would the results change if M2 were replaced with a diode-connected PMOS device?\n\nExample Determine the output resistance of the circuit in Fig. 7.19(a) and compare it with the result in the previous example. Assume M1 and M2 are in saturation.\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1d2, D: d1, G: Vb2}\nname: M2, type: NMOS, ports: {S: GND, D: s1d2, G: Vb1}\nname: Rout, type: Resistor, value: Rout, ports: {N1: d1, N2: Vout}\nname: d1, type: Diode, ports: {Na: Vout, Nc: d1}\n]\nextrainfo:The circuit is a common-source stage with NMOS transistors M1 and M2, and a diode-connected load. M2 acts as a source degeneration resistor for M1. The output is taken across Rout.\n\n(a)\nimage_name:(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1, D: d1, G: GND}\nname: rO1, type: Resistor, value: rO1, ports: {N1: d1, N2: s1}\nname: rO2, type: Resistor, value: rO2, ports: {N1: s1, N2: GND}\nname: d1, type: Diode, ports: {Na: Vout, Nc: d1}\nname: Rout, type: Resistor, value: Rout, ports: {N1: d1, N2: Vout}\n]\nextrainfo:The circuit is a common-source stage with NMOS transistor M1 and a diode-connected load. Resistors rO1 and rO2 are connected to the source of M1, with rO2 connected to ground. The output is taken across Rout, connected to the diode.\n\n(b)\n\nFigure 7.19 shows an example of a CS stage with degeneration and its simplified circuit.\nSolution With its gate-source voltage fixed, transistor M2 operates as a current source, introducing a resistance of rO2 from the source of M1 to ground [Fig. 7.19(b)].\n\nEquation (7.71) can thus be written as\n\n$$\n\\begin{align*}\nR_{\\text {out }} & =\\left(1+g_{m 1} r_{O 1}\\right) r_{O 2}+r_{O 1}  \\tag{7.76}\\\\\n& \\approx g_{m 1} r_{O 1} r_{O 2}+r_{O 1} \\tag{7.77}\n\\end{align*}\n$$\n\nAssuming $g_{m 1} r_{O 2} \\gg 1$ (which is valid in practice), we have\n\n$$\n\\begin{equation*}\nR_{\\text {out }} \\approx g_{m 1} r_{O 1} r_{O 2} \\tag{7.78}\n\\end{equation*}\n$$\n\nWe observe that this value is significantly higher than that in Eq. (7.75).\n\nExercise Repeat the above example for the PMOS counterpart of the circuit."
},
{
    "text": "Refer back to Chapter 5, where it was discussed that a resistor in series with the emitter of a bipolar transistor modifies traits like gain, input/output impedances, and linearity. We anticipate similar outcomes for a degenerated common-source (CS) amplifier.\n\nImage Description (a):\n- Component: M1, Type: NMOS, Connections: Source (S) to Ground (GND), Drain (D) to Vout, Gate (G) to Vin\n- Component: RD, Type: Resistor, Value: RD, Connections: Node 1 (N1) to Vout, Node 2 (N2) to VDD\n- Component: RS, Type: Resistor, Value: RS, Connections: Node 1 (N1) to GND, Node 2 (N2) to Vout\n\nAdditional Info: This depicts a common-source amplifier with source degeneration. The NMOS transistor M1 has its source connected to ground through resistor RS, its drain to output Vout via resistor RD, and its gate to input Vin. The circuit is powered by VDD.\n\n(a)\n\nImage Description (b):\n- Component: V1, Type: VoltageSource, Value: V1, Connections: Positive Node (Np) to Vin, Negative Node (Nn) to GND\n- Component: RS, Type: Resistor, Value: RS, Connections: Node 1 (N1) to GND, Node 2 (N2) to V1\n- Component: gmV1, Type: VoltageControlledCurrentSource, Connections: Positive Node (Np) to V1, Negative Node (Nn) to Vout\n- Component: RD, Type: Resistor, Value: RD, Connections: Node 1 (N1) to Vout, Node 2 (N2) to GND\n\nAdditional Info: This represents a small-signal model of a common-source amplifier with source degeneration. The voltage source V1 provides the input voltage Vin. Resistor RS is connected to ground, and the current source gmV1 symbolizes the transconductance in the circuit. The output is measured across resistor RD, which is also connected to ground.\n\n(b)\n\nFigure 7.14 illustrates the CS stage with degeneration and its small-signal equivalent (assuming $\\lambda=0$). Like its bipolar counterpart, the degeneration resistor absorbs a portion of the input voltage change. From Fig. 7.14(b), we derive:\n\n$$\n\\begin{equation*}\nv_{\\text {in }}=v_{1}+g_{m} v_{1} R_{S} \\tag{7.64}\n\\end{equation*}\n$$\n\nThus,\n\n$$\n\\begin{equation*}\nv_{1}=\\frac{v_{i n}}{1+g_{m} R_{S}} \\tag{7.65}\n\\end{equation*}\n$$\n\nSince $g_{m} v_{1}$ flows through RD, we have $v_{\\text {out }}=-g_{m} v_{1} R_{D}$, leading to:\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =-\\frac{g_{m} R_{D}}{1+g_{m} R_{S}}  \\tag{7.66}\\\\\n& =-\\frac{R_{D}}{\\frac{1}{g_{m}}+R_{S}} \\tag{7.67}\n\\end{align*}\n$$\n\nThis result mirrors Eq. (5.157) for the bipolar equivalent.\n\nExample 7.8\nImage Description (a):\n- Component: M1, Type: NMOS, Connections: Source (S) to GND, Drain (D) to Vout, Gate (G) to Vin\n- Component: M2, Type: PMOS, Connections: Source (S) to VDD, Drain (D) to Vout, Gate (G) to GND\n- Component: RD, Type: Resistor, Value: RD, Connections: Node 1 (N1) to VDD, Node 2 (N2) to Vout\n\nAdditional Info: This circuit is a common-source stage with degeneration, employing M1 as an NMOS and M2 as a PMOS. M2 is diode-connected, providing feedback. The output is measured across RD.\n\n(a)\n\nImage Description (b):\n- Component: M1, Type: NMOS, Connections: Source (S) to GND, Drain (D) to Vout, Gate (G) to Vin\n- Component: RD, Type: Resistor, Value: RD, Connections: Node 1 (N1) to VDD, Node 2 (N2) to Vout\n- Component: S1, Type: Resistor, Value: 1/gm2, Connections: Node 1 (N1) to GND, Node 2 (N2) to GND\n\nAdditional Info: This circuit is a common-source stage with degeneration, using M1 as an NMOS. The output is measured across RD. Resistor S1 represents a source degeneration resistor with a value of 1/gm2.\n\n(b)\n\nFigure 7.15 presents an example of a CS stage with degeneration and its simplified circuit.\n\nSolution: Transistor M2, acting as a diode-connected device, exhibits an impedance of $1 / g_{m 2}$ [Fig. 7.15(b)]. The gain is thus given by Eq. (7.67) if RS is replaced with $1 / g_{m 2}$:\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{R_{D}}{\\frac{1}{g_{m 1}}+\\frac{1}{g_{m 2}}} . \\tag{7.68}\n\\end{equation*}\n$$\n\nExercise: What occurs if $\\lambda \\neq 0$ for M2?\n\nIn conjunction with Chapter 5's developments, we can examine the impact of a resistor in series with the gate (Fig. 7.16). However, since the gate current is negligible (at low frequencies), RG does not sustain a voltage drop and does not affect the voltage gain or input/output impedances.\n\nEffect of Transistor Output Impedance: Like the bipolar counterparts, including the transistor output impedance complicates the analysis, as studied in Problem 7.32. Nevertheless, the output impedance of the degenerated CS stage is crucial in analog design and warrants examination here.\n\nFigure 7.17 displays the small-signal equivalent of the circuit. Since RS carries a current equal to iX (why?), we have $v_{1}=-i_{X} R_{S}$. Also, the current through rO equals $i_{X}-g_{m} v_{1}=i_{X}-g_{m}(-i_{X} R_{S})=i_{X}+g_{m} i_{X} R_{S}$. Adding the voltage drops across rO and RS and equating to vX, we get:\n\n$$\n\\begin{equation*}\nr_{O}(i_{X}+g_{m} i_{X} R_{S})+i_{X} R_{S}=v_{X} \\tag{7.69}\n\\end{equation*}\n$$\n\nThus,\n\n$$\n\\begin{align*}\n\\frac{v_{X}}{i_{X}} & =r_{O}(1+g_{m} R_{S})+R_{S}  \\tag{7.70}\\\\\n& =(1+g_{m} r_{O}) R_{S}+r_{O}  \\tag{7.71}\\\\\n& \\approx g_{m} r_{O} R_{S}+r_{O} \\tag{7.72}\n\\end{align*}\n$$\n\nAlternatively, the model in Fig. 7.17 resembles its bipolar counterpart in Fig. 5.46(a) but with $r_{\\pi}=\\infty$. Setting $r_{\\pi} \\rightarrow \\infty$ in Eqs. (5.196) and (5.197) yields the same results. As expected from the bipolar degenerated stage study, the MOS version also shows a \"boosted\" output impedance.\n\nCompute the output resistance of the circuit in Fig. 7.18(a) if M1 and M2 are identical.\nImage Description (a):\n- Component: M1, Type: NMOS, Connections: Source (S) to sig2, Drain (D) to d1, Gate (G) to Vb\n- Component: M2, Type: NMOS, Connections: Source (S) to VDD, Drain (D) to sig2, Gate (G) to sig2\n- Component: Rout, Type: Resistor, Value: Rout, Connections: Node 1 (N1) to d1, Node 2 (N2) to Vout\n\nAdditional Info: This circuit is a common-source stage with degeneration using two NMOS transistors. M2 is diode-connected.\n\n(a)\n\nImage Description (b):\n- Component: M1, Type: NMOS, Connections: Source (S) to s1, Drain (D) to d1, Gate (G) to Vb\n- Component: M2, Type: NMOS, Connections: Source (S) to GND, Drain (D) to s1, Gate (G) to s1\n- Component: Rout, Type: Resistor, Value: Rout, Connections: Node 1 (N1) to d1, Node 2 (N2) to Vout\n\nAdditional Info: This circuit is a common-source stage with degeneration using two NMOS transistors. M2 is diode-connected. The output resistance is calculated using the formula for Rout.\n\n(b)\n\nFigure 7.18 displays an example of a CS stage with degeneration and its simplified circuit.\n\nSolution: The diode-connected M2 can be represented by a small-signal resistance of $\\left(1 / g_{m 2}\\right) \\| r_{O 2} \\approx 1 / g_{m 2}$. Transistor M1 is degenerated by this resistance, and from Eq. (7.70):\n\n$$\n\\begin{equation*}\nR_{o u t}=r_{O 1}(1+g_{m 1} \\frac{1}{g_{m 2}})+\\frac{1}{g_{m 2}} \\tag{7.73}\n\\end{equation*}\n$$\n\nSince $g_{m 1}=g_{m 2}=g_{m}$, this reduces to:\n\n$$\n\\begin{align*}\nR_{\\text {out }} & =2 r_{O 1}+\\frac{1}{g_{m}}  \\tag{7.74}\\\\\n& \\approx 2 r_{O 1} . \\tag{7.75}\n\\end{align*}\n$$\n\nExercise: Do the results change if M2 is replaced with a diode-connected PMOS device?\n\nExample: Determine the output resistance of the circuit in Fig. 7.19(a) and compare it with the result in the previous example. Assume M1 and M2 are in saturation.\nImage Description (a):\n- Component: M1, Type: NMOS, Connections: Source (S) to s1d2, Drain (D) to d1, Gate (G) to Vb2\n- Component: M2, Type: NMOS, Connections: Source (S) to GND, Drain (D) to s1d2, Gate (G) to Vb1\n- Component: Rout, Type: Resistor, Value: Rout, Connections: Node 1 (N1) to d1, Node 2 (N2) to Vout\n- Component: d1, Type: Diode, Connections: Anode (Na) to Vout, Cathode (Nc) to d1\n\nAdditional Info: This circuit is a common-source stage with NMOS transistors M1 and M2, and a diode-connected load. M2 acts as a source degeneration resistor for M1. The output is taken across Rout.\n\n(a)\n\nImage Description (b):\n- Component: M1, Type: NMOS, Connections: Source (S) to s1, Drain (D) to d1, Gate (G) to GND\n- Component: rO1, Type: Resistor, Value: rO1, Connections: Node 1 (N1) to d1, Node 2 (N2) to s1\n- Component: rO2, Type: Resistor, Value: rO2, Connections: Node 1 (N1) to s1, Node 2 (N2) to GND\n- Component: d1, Type: Diode, Connections: Anode (Na) to Vout, Cathode (Nc) to d1\n- Component: Rout, Type: Resistor, Value: Rout, Connections: Node 1 (N1) to d1, Node 2 (N2) to Vout\n\nAdditional Info: This circuit is a common-source stage with NMOS transistor M1 and a diode-connected load. Resistors rO1 and rO2 are connected to the source of M1, with rO2 connected to ground. The output is taken across Rout, connected to the diode.\n\n(b)\n\nFigure 7.19 presents an example of a CS stage with degeneration and its simplified circuit.\n\nSolution: With its gate-source voltage fixed, M2 operates as a current source, introducing a resistance of rO2 from the source of M1 to ground [Fig. 7.19(b)].\n\nEquation (7.71) can thus be written as:\n\n$$\n\\begin{align*}\nR_{\\text {out }} & =(1+g_{m 1} r_{O 1}) r_{O 2}+r_{O 1}  \\tag{7.76}\\\\\n& \\approx g_{m 1} r_{O 1} r_{O 2}+r_{O 1} \\tag{7.77}\n\\end{align*}\n$$\n\nAssuming $g_{m 1} r_{O 2} \\gg 1$ (valid in practice), we get:\n\n$$\n\\begin{equation*}\nR_{\\text {out }} \\approx g_{m 1} r_{O 1} r_{O 2} \\tag{7.78}\n\\end{equation*}\n$$\n\nThis value is significantly higher than that in Eq. (7.75).\n\nExercise: Repeat the above example for the PMOS counterpart of the circuit."
},
{
    "text": "Refer to Chapter 5, which states that placing a resistor in series with the emitter of a bipolar transistor modifies attributes like gain, input/output impedances, and linearity. We anticipate similar outcomes for a degenerated common-source (CS) amplifier.\n\n**Image Description (a):**\n- **Components:**\n  - **M1:** NMOS transistor, Source (S) connected to Ground (GND), Drain (D) to Vout, Gate (G) to Vin.\n  - **RD:** Resistor, value RD, connected between Vout (N1) and VDD (N2).\n  - **RS:** Resistor, value RS, connected between Ground (N1) and Vout (N2).\n- **Additional Info:** This configuration represents a common-source amplifier with source degeneration. The NMOS transistor M1 has its source connected to ground through resistor RS, its drain to the output Vout through resistor RD, and its gate to the input Vin. The circuit is powered by VDD.\n\n**Image Description (b):**\n- **Components:**\n  - **V1:** Voltage source, value V1, connected between Vin (Np) and Ground (GND) (Nn).\n  - **RS:** Resistor, value RS, connected between Ground (N1) and V1 (N2).\n  - **gmV1:** Voltage-controlled current source, connected between V1 (Np) and Vout (Nn).\n  - **RD:** Resistor, value RD, connected between Vout (N1) and Ground (N2).\n- **Additional Info:** This is the small-signal model of a common-source amplifier with source degeneration. The voltage source V1 provides the input voltage Vin. The resistor RS is connected to ground, and the current source gmV1 represents the transconductance in the circuit. The output is taken across the resistor RD, which is also connected to ground.\n\n**Figure 7.14:**\n- **(a)** CS stage with degeneration.\n- **(b)** Small-signal model.\n\nFigure 7.14 illustrates the stage alongside its small-signal equivalent (assuming $\\lambda=0$). Similar to the bipolar transistor scenario, the degeneration resistor absorbs a portion of the input voltage change. From Fig. 7.14(b), we derive:\n\n$$\n\\begin{equation*}\nv_{\\text {in }}=v_{1}+g_{m} v_{1} R_{S} \\tag{7.64}\n\\end{equation*}\n$$\n\nThus,\n\n$$\n\\begin{equation*}\nv_{1}=\\frac{v_{i n}}{1+g_{m} R_{S}} \\tag{7.65}\n\\end{equation*}\n$$\n\nSince $g_{m} v_{1}$ flows through RD, we have $v_{\\text {out }}=-g_{m} v_{1} R_{D}$, leading to:\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =-\\frac{g_{m} R_{D}}{1+g_{m} R_{S}}  \\tag{7.66}\\\\\n& =-\\frac{R_{D}}{\\frac{1}{g_{m}}+R_{S}} \\tag{7.67}\n\\end{align*}\n$$\n\nThis result mirrors Eq. (5.157) for the bipolar counterpart.\n\n**Example 7.8:**\n- **Image Description (a):**\n  - **Components:**\n    - **M1:** NMOS transistor, Source (S) to Ground (GND), Drain (D) to Vout, Gate (G) to Vin.\n    - **M2:** PMOS transistor, Source (S) to VDD, Drain (D) to Vout, Gate (G) to Ground (GND).\n    - **RD:** Resistor, value RD, connected between VDD (N1) and Vout (N2).\n  - **Additional Info:** This circuit is a common-source stage with degeneration, utilizing M1 as an NMOS and M2 as a PMOS. M2 is diode-connected, providing feedback. The output is taken across RD.\n\n- **Image Description (b):**\n  - **Components:**\n    - **M1:** NMOS transistor, Source (S) to Ground (GND), Drain (D) to Vout, Gate (G) to Vin.\n    - **RD:** Resistor, value RD, connected between VDD (N1) and Vout (N2).\n    - **S1:** Resistor, value 1/gm2, connected between Ground (N1) and Ground (N2).\n  - **Additional Info:** This circuit is a common-source stage with degeneration, using M1 as an NMOS. The output is taken across RD. The resistor S1 represents a source degeneration resistor with a value of 1/gm2.\n\n**Figure 7.15:**\n- **(a)** Example of CS stage with degeneration.\n- **(b)** Simplified circuit.\n\n**Solution:**\nTransistor M2 functions as a diode-connected device, presenting an impedance of $1 / g_{m 2}$ [Fig. 7.15(b)]. The gain is thus given by Eq. (7.67) if RS is replaced with $1 / g_{m 2}$:\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{R_{D}}{\\frac{1}{g_{m 1}}+\\frac{1}{g_{m 2}}} . \\tag{7.68}\n\\end{equation*}\n$$\n\n**Exercise:**\nWhat occurs if $\\lambda \\neq 0$ for M2?\n\nIn conjunction with the discussions in Chapter 5, we can examine the impact of a resistor in series with the gate (Fig. 7.16). However, since the gate current is negligible (at low frequencies), RG does not cause a voltage drop and does not affect the voltage gain or the input/output impedances.\n\n**Effect of Transistor Output Impedance:**\nLike the bipolar counterparts, including the transistor output impedance complicates the analysis, as explored in Problem 7.32. Nevertheless, the output impedance of the degenerated CS stage is crucial in analog design and warrants investigation here.\n\n**Figure 7.16:**\n- **Description:**\n  - **Components:**\n    - **M1:** NMOS transistor, Source (S) to s1, Drain (D) to Vout, Gate (G) to g1.\n    - **RG:** Resistor, value RG, connected between Vin (N1) and g1 (N2).\n    - **RD:** Resistor, value RD, connected between VDD (N1) and Vout (N2).\n    - **RS:** Resistor, value RS, connected between s1 (N1) and Ground (GND).\n    - **VDD:** Voltage source, value VDD, connected between VDD (Np) and Ground (GND) (Nn).\n  - **Additional Info:** This circuit is a common-source (CS) stage with a gate resistance RG and degeneration resistance RS. It amplifies input signals applied at Vin, with the output taken at Vout. The NMOS transistor M1 is the active device in the amplification process.\n\n**Figure 7.17:**\n- **Description:**\n  - **Components:**\n    - **V1:** Voltage source, value V1, connected between v1 (Np) and -Vi (Nn).\n    - **RS:** Resistor, value RS, connected between -Vi (N1) and Ground (GND).\n    - **gmV1:** Voltage-controlled current source, connected between -Vi (Np) and -Vi (Nn).\n    - **ro:** Resistor, value ro, connected between Vx (N1) and -Vi (N2).\n    - **Vx:** Voltage source, value Vx, connected between Vx (Np) and Ground (GND).\n  - **Additional Info:** This circuit diagram represents the output impedance of a common-source (CS) stage with degeneration. It includes a voltage source V1, a resistor RS, a voltage-controlled current source gmV1, a resistor ro, and a voltage source Vx. The diagram illustrates the relationship between the current ix and voltage vx in the context of the CS stage.\n\nSince RS carries a current equal to $i_{X}$ (why?), we have $v_{1}=-i_{X} R_{S}$. Also, the current through $r_{O}$ is $i_{X}-g_{m} v_{1}=i_{X}-g_{m}(-i_{X} R_{S})=i_{X}+g_{m} i_{X} R_{S}$. Adding the voltage drops across $r_{O}$ and $RS$ and equating to $v_{X}$, we get:\n\n$$\n\\begin{equation*}\nr_{O}(i_{X}+g_{m} i_{X} R_{S})+i_{X} R_{S}=v_{X} \\tag{7.69}\n\\end{equation*}\n$$\n\nThus,\n\n$$\n\\begin{align*}\n\\frac{v_{X}}{i_{X}} & =r_{O}(1+g_{m} R_{S})+R_{S}  \\tag{7.70}\\\\\n& =(1+g_{m} r_{O}) R_{S}+r_{O}  \\tag{7.71}\\\\\n& \\approx g_{m} r_{O} R_{S}+r_{O} \\tag{7.72}\n\\end{align*}\n$$\n\nAlternatively, the model in Fig. 7.17 resembles its bipolar counterpart in Fig. 5.46(a) but with $r_{\\pi}=\\infty$. Setting $r_{\\pi} \\rightarrow \\infty$ in Eqs. (5.196) and (5.197) yields the same results. As expected from the bipolar degenerated stage study, the MOS version also exhibits a \"boosted\" output impedance.\n\n**Compute the output resistance of the circuit in Fig. 7.18(a) if M1 and M2 are identical.**\n\n**Figure 7.18:**\n- **(a)** Example of CS stage with degeneration.\n- **(b)** Simplified circuit.\n\n**Image Description (a):**\n- **Components:**\n  - **M1:** NMOS transistor, Source (S) to sig2, Drain (D) to d1, Gate (G) to Vb.\n  - **M2:** NMOS transistor, Source (S) to VDD, Drain (D) to sig2, Gate (G) to sig2.\n  - **Rout:** Resistor, value Rout, connected between d1 (N1) and Vout (N2).\n- **Additional Info:** This circuit is a common-source stage with degeneration using two NMOS transistors. M2 is diode-connected.\n\n**Image Description (b):**\n- **Components:**\n  - **M1:** NMOS transistor, Source (S) to s1, Drain (D) to d1, Gate (G) to Vb.\n  - **M2:** NMOS transistor, Source (S) to GND, Drain (D) to s1, Gate (G) to s1.\n  - **Rout:** Resistor, value Rout, connected between d1 (N1) and Vout (N2).\n- **Additional Info:** This circuit is a common-source stage with degeneration using two NMOS transistors. M2 is diode-connected. The output resistance is calculated using the formula for Rout.\n\n**Solution:**\nThe diode-connected device M2 can be represented by a small-signal resistance of $\\left(1 / g_{m 2}\\right) \\| r_{O 2} \\approx 1 / g_{m 2}$. Transistor M1 is degenerated by this resistance, and from Eq. (7.70):\n\n$$\n\\begin{equation*}\nR_{o u t}=r_{O 1}\\left(1+g_{m 1} \\frac{1}{g_{m 2}}\\right)+\\frac{1}{g_{m 2}} \\tag{7.73}\n\\end{equation*}\n$$\n\nSince $g_{m 1}=g_{m 2}=g_{m}$, this simplifies to:\n\n$$\n\\begin{align*}\nR_{\\text {out }} & =2 r_{O 1}+\\frac{1}{g_{m}}  \\tag{7.74}\\\\\n& \\approx 2 r_{O 1} . \\tag{7.75}\n\\end{align*}\n$$\n\n**Exercise:**\nDo the results change if M2 is replaced with a diode-connected PMOS device?\n\n**Example:**\nDetermine the output resistance of the circuit in Fig. 7.19(a) and compare it with the result in the previous example. Assume M1 and M2 are in saturation.\n\n**Figure 7.19:**\n- **(a)** Example of CS stage with degeneration.\n- **(b)** Simplified circuit.\n\n**Image Description (a):**\n- **Components:**\n  - **M1:** NMOS transistor, Source (S) to s1d2, Drain (D) to d1, Gate (G) to Vb2.\n  - **M2:** NMOS transistor, Source (S) to GND, Drain (D) to s1d2, Gate (G) to Vb1.\n  - **Rout:** Resistor, value Rout, connected between d1 (N1) and Vout (N2).\n  - **d1:** Diode, connected between Vout (Na) and d1 (Nc).\n- **Additional Info:** The circuit is a common-source stage with NMOS transistors M1 and M2, and a diode-connected load. M2 acts as a source degeneration resistor for M1. The output is taken across Rout.\n\n**Image Description (b):**\n- **Components:**\n  - **M1:** NMOS transistor, Source (S) to s1, Drain (D) to d1, Gate (G) to GND.\n  - **rO1:** Resistor, value rO1, connected between d1 (N1) and s1 (N2).\n  - **rO2:** Resistor, value rO2, connected between s1 (N1) and GND (N2).\n  - **d1:** Diode, connected between Vout (Na) and d1 (Nc).\n  - **Rout:** Resistor, value Rout, connected between d1 (N1) and Vout (N2).\n- **Additional Info:** The circuit is a common-source stage with NMOS transistor M1 and a diode-connected load. Resistors rO1 and rO2 are connected to the source of M1, with rO2 connected to ground. The output is taken across Rout, connected to the diode.\n\n**Solution:**\nWith its gate-source voltage fixed, transistor M2 operates as a current source, introducing a resistance of $r_{O 2}$ from the source of M1 to ground [Fig. 7.19(b)].\n\nEquation (7.71) can thus be written as:\n\n$$\n\\begin{align*}\nR_{\\text {out }} & =(1+g_{m 1} r_{O 1}) r_{O 2}+r_{O 1}  \\tag{7.76}\\\\\n& \\approx g_{m 1} r_{O 1} r_{O 2}+r_{O 1} \\tag{7.77}\n\\end{align*}\n$$\n\nAssuming $g_{m 1} r_{O 2} \\gg 1$ (which is valid in practice), we have:\n\n$$\n\\begin{equation*}\nR_{\\text {out }} \\approx g_{m 1} r_{O 1} r_{O 2} \\tag{7.78}\n\\end{equation*}\n$$\n\nWe observe that this value is significantly higher than that in Eq. (7.75).\n\n**Exercise:**\nRepeat the above example for the PMOS counterpart of the circuit."
},
{
    "text": "Refer to Chapter 5, which explains that inserting a resistor in series with the emitter of a bipolar transistor modifies attributes like gain, input/output impedances, and linearity. We anticipate similar outcomes for a degenerated common-source (CS) amplifier.\n\nImage Description (a):\n- Name: M1, Type: NMOS, Ports: {S: GND, D: Vout, G: Vin}\n- Name: RD, Type: Resistor, Value: RD, Ports: {N1: Vout, N2: VDD}\n- Name: RS, Type: Resistor, Value: RS, Ports: {N1: GND, N2: Vout}\nAdditional Info: This is a common-source amplifier with source degeneration. The NMOS transistor M1 is connected with its source to ground through resistor RS, its drain to the output Vout via resistor RD, and its gate to the input Vin. The circuit is powered by VDD.\n\n(a)\n\nImage Description (b):\n- Name: V1, Type: VoltageSource, Value: V1, Ports: {Np: Vin, Nn: GND}\n- Name: RS, Type: Resistor, Value: RS, Ports: {N1: GND, N2: V1}\n- Name: gmV1, Type: VoltageControlledCurrentSource, Ports: {Np: V1, Nn: Vout}\n- Name: RD, Type: Resistor, Value: RD, Ports: {N1: Vout, N2: GND}\nAdditional Info: This is a small-signal model of a common-source amplifier with source degeneration. The voltage source V1 provides the input voltage Vin. Resistor RS is connected to ground, and the current source gmV1 represents the transconductance in the circuit. The output is taken across resistor RD, which is also connected to ground.\n\n(b)\n\nFigure 7.14 illustrates the CS stage with degeneration and its small-signal equivalent (assuming $\\lambda=0$). Similar to the bipolar transistor scenario, the degeneration resistor partially absorbs the input voltage change. From Fig. 7.14(b), we derive:\n\n$$\n\\begin{equation*}\nv_{\\text {in }}=v_{1}+g_{m} v_{1} R_{S} \\tag{7.64}\n\\end{equation*}\n$$\n\nConsequently,\n\n$$\n\\begin{equation*}\nv_{1}=\\frac{v_{i n}}{1+g_{m} R_{S}} \\tag{7.65}\n\\end{equation*}\n$$\n\nGiven that $g_{m} v_{1}$ flows through RD, we have $v_{\\text {out }}=-g_{m} v_{1} R_{D}$, leading to:\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =-\\frac{g_{m} R_{D}}{1+g_{m} R_{S}}  \\tag{7.66}\\\\\n& =-\\frac{R_{D}}{\\frac{1}{g_{m}}+R_{S}} \\tag{7.67}\n\\end{align*}\n$$\n\nThis result matches Eq. (5.157) for the bipolar counterpart.\n\nExample 7.8\nImage Description (a):\n- Name: M1, Type: NMOS, Ports: {S: GND, D: Vout, G: Vin}\n- Name: M2, Type: PMOS, Ports: {S: VDD, D: Vout, G: GND}\n- Name: RD, Type: Resistor, Value: RD, Ports: {N1: VDD, N2: Vout}\nAdditional Info: This circuit is a common-source stage with degeneration, using M1 as an NMOS and M2 as a PMOS. M2 is diode-connected, providing feedback. The output is taken across RD.\n\n(a)\n\nImage Description (a):\n- Name: M1, Type: NMOS, Ports: {S: GND, D: Vout, G: Vin}\n- Name: RD, Type: Resistor, Value: RD, Ports: {N1: VDD, N2: Vout}\n- Name: S1, Type: Resistor, Value: 1/gm2, Ports: {N1: GND, N2: GND}\nAdditional Info: This circuit is a common-source stage with degeneration, using M1 as an NMOS. The output is taken across RD. Resistor S1 represents a source degeneration resistor with a value of 1/gm2.\n\n(b)\n\nFigure 7.15 displays an example of a CS stage with degeneration and its simplified circuit.\nSolution: Transistor M2 acts as a diode-connected device, presenting an impedance of $1 / g_{m 2}$ [Fig. 7.15(b)]. The gain is thus given by Eq. (7.67) if RS is replaced with $1 / g_{m 2}$:\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{R_{D}}{\\frac{1}{g_{m 1}}+\\frac{1}{g_{m 2}}} . \\tag{7.68}\n\\end{equation*}\n$$\n\nExercise: What occurs if $\\lambda \\neq 0$ for M2?\n\nIn line with the discussions in Chapter 5, we can investigate the impact of a resistor in series with the gate (Fig. 7.16). However, since the gate current is negligible (at low frequencies), RG does not sustain a voltage drop and does not affect the voltage gain or the input/output impedances.\n\nImpact of Transistor Output Impedance: Like the bipolar counterparts, including the transistor output impedance complicates the analysis, as explored in Problem 7.32. Nonetheless, the output impedance of the degenerated CS stage is crucial in analog design and warrants further examination.\n\nFigure 7.17 depicts the small-signal equivalent of the circuit. Since RS carries a current equal to iX (why?), we have $v_{1}=-i_{X} R_{S}$. Additionally, the current through ro equals $i_{X}-g_{m} v_{1}=i_{X}-g_{m}(-i_{X} R_{S})=i_{X}+g_{m} i_{X} R_{S}$. Summing the voltage drops across ro and RS and equating to vX yields:\n\n$$\n\\begin{equation*}\nr_{O}(i_{X}+g_{m} i_{X} R_{S})+i_{X} R_{S}=v_{X} \\tag{7.69}\n\\end{equation*}\n$$\n\nThus,\n\n$$\n\\begin{align*}\n\\frac{v_{X}}{i_{X}} & =r_{O}(1+g_{m} R_{S})+R_{S}  \\tag{7.70}\\\\\n& =(1+g_{m} r_{O}) R_{S}+r_{O}  \\tag{7.71}\\\\\n& \\approx g_{m} r_{O} R_{S}+r_{O} \\tag{7.72}\n\\end{align*}\n$$\n\nAlternatively, noting that the model in Fig. 7.17 resembles its bipolar counterpart in Fig. 5.46(a) but with $r_{\\pi}=\\infty$, setting $r_{\\pi} \\rightarrow \\infty$ in Eqs. (5.196) and (5.197) yields the same results. As expected from the bipolar degenerated stage study, the MOS version also exhibits a \"boosted\" output impedance.\n\nCompute the output resistance of the circuit in Fig. 7.18(a) if M1 and M2 are identical.\nImage Description (a):\n- Name: M1, Type: NMOS, Ports: {S: sig2, D: d1, G: Vb}\n- Name: M2, Type: NMOS, Ports: {S: GND, D: sig2, G: sig2}\n- Name: Rout, Type: Resistor, Value: Rout, Ports: {N1: d1, N2: Vout}\nAdditional Info: This circuit is a common-source stage with degeneration using two NMOS transistors. M2 is diode-connected.\n\n(a)\n\nImage Description (a):\n- Name: M1, Type: NMOS, Ports: {S: s1, D: d1, G: Vb}\n- Name: M2, Type: NMOS, Ports: {S: GND, D: s1, G: s1}\n- Name: Rout, Type: Resistor, Value: Rout, Ports: {N1: d1, N2: Vout}\nAdditional Info: This circuit is a common-source stage with degeneration using two NMOS transistors. M2 is diode-connected. The output resistance is calculated using the formula for Rout.\n\n(b)\n\nFigure 7.18 illustrates an example of a CS stage with degeneration and its simplified circuit.\nSolution: The diode-connected M2 can be represented by a small-signal resistance of $\\left(1 / g_{m 2}\\right) \\| r_{O 2} \\approx 1 / g_{m 2}$. Transistor M1 is degenerated by this resistance, and from Eq. (7.70):\n\n$$\n\\begin{equation*}\nR_{o u t}=r_{O 1}(1+g_{m 1} \\frac{1}{g_{m 2}})+\\frac{1}{g_{m 2}} \\tag{7.73}\n\\end{equation*}\n$$\n\nSince $g_{m 1}=g_{m 2}=g_{m}$, this simplifies to:\n\n$$\n\\begin{align*}\nR_{\\text {out }} & =2 r_{O 1}+\\frac{1}{g_{m}}  \\tag{7.74}\\\\\n& \\approx 2 r_{O 1} . \\tag{7.75}\n\\end{align*}\n$$\n\nExercise: Do the results change if M2 is replaced with a diode-connected PMOS device?\n\nExample: Determine the output resistance of the circuit in Fig. 7.19(a) and compare it with the result in the previous example. Assume M1 and M2 are in saturation.\nImage Description (a):\n- Name: M1, Type: NMOS, Ports: {S: s1d2, D: d1, G: Vb2}\n- Name: M2, Type: NMOS, Ports: {S: GND, D: s1d2, G: Vb1}\n- Name: Rout, Type: Resistor, Value: Rout, Ports: {N1: d1, N2: Vout}\n- Name: d1, Type: Diode, Ports: {Na: Vout, Nc: d1}\nAdditional Info: This circuit is a common-source stage with NMOS transistors M1 and M2, and a diode-connected load. M2 acts as a source degeneration resistor for M1. The output is taken across Rout.\n\n(a)\n\nImage Description (b):\n- Name: M1, Type: NMOS, Ports: {S: s1, D: d1, G: GND}\n- Name: rO1, Type: Resistor, Value: rO1, Ports: {N1: d1, N2: s1}\n- Name: rO2, Type: Resistor, Value: rO2, Ports: {N1: s1, N2: GND}\n- Name: d1, Type: Diode, Ports: {Na: Vout, Nc: d1}\n- Name: Rout, Type: Resistor, Value: Rout, Ports: {N1: d1, N2: Vout}\nAdditional Info: This circuit is a common-source stage with NMOS transistor M1 and a diode-connected load. Resistors rO1 and rO2 are connected to the source of M1, with rO2 connected to ground. The output is taken across Rout, connected to the diode.\n\n(b)\n\nFigure 7.19 illustrates an example of a CS stage with degeneration and its simplified circuit.\nSolution: With its gate-source voltage fixed, M2 operates as a current source, introducing a resistance of $r_{O 2}$ from the source of M1 to ground [Fig. 7.19(b)].\n\nUsing Eq. (7.71), we get:\n\n$$\n\\begin{align*}\nR_{\\text {out }} & =(1+g_{m 1} r_{O 1}) r_{O 2}+r_{O 1}  \\tag{7.76}\\\\\n& \\approx g_{m 1} r_{O 1} r_{O 2}+r_{O 1} \\tag{7.77}\n\\end{align*}\n$$\n\nAssuming $g_{m 1} r_{O 2} \\gg 1$ (valid in practice), we have:\n\n$$\n\\begin{equation*}\nR_{\\text {out }} \\approx g_{m 1} r_{O 1} r_{O 2} \\tag{7.78}\n\\end{equation*}\n$$\n\nThis value is significantly higher than that in Eq. (7.75).\n\nExercise: Repeat the above example for the PMOS counterpart of the circuit."
},
{
    "text": "Recall from Chapter 5 that placing a resistor in series with the emitter of a bipolar transistor modifies characteristics such as gain, I/O impedances, and linearity. We anticipate similar outcomes for a degenerated CS amplifier.\n\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: Vout, N2: VDD}\nname: RS, type: Resistor, value: RS, ports: {N1: GND, N2: Vout}\n]\nextrainfo:This configuration is a common-source amplifier with source degeneration. The NMOS transistor M1 has its source connected to ground through resistor RS, its drain to the output Vout via resistor RD, and its gate to the input Vin. The circuit is powered by VDD.\n\n(a)\nimage_name:(b)\ndescription:\n[\nname: V1, type: VoltageSource, value: V1, ports: {Np: Vin, Nn: GND}\nname: RS, type: Resistor, value: RS, ports: {N1: GND, N2: V1}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: V1, Nn: Vout}\nname: RD, type: Resistor, value: RD, ports: {N1: Vout, N2: GND}\n]\nextrainfo:This represents a small-signal model of a common-source amplifier with source degeneration. The voltage source V1 provides the input voltage Vin. Resistor RS is connected to ground, and the current source gmV1 represents the transconductance. The output is measured across resistor RD, which is also grounded.\n\n(b)\n\nFigure 7.14 (a) CS stage with degeneration, (b) small-signal model.\n\nFigure 7.14 illustrates the stage and its small-signal equivalent (assuming $\\lambda=0$). Like its bipolar counterpart, the degeneration resistor absorbs a portion of the input voltage change. From Fig. 7.14(b), we derive\n\n$$\n\\begin{equation*}\nv_{\\text {in }}=v_{1}+g_{m} v_{1} R_{S} \\tag{7.64}\n\\end{equation*}\n$$\n\nand consequently\n\n$$\n\\begin{equation*}\nv_{1}=\\frac{v_{i n}}{1+g_{m} R_{S}} \\tag{7.65}\n\\end{equation*}\n$$\n\nSince $g_{m} v_{1}$ flows through $R_{D}$, we have $v_{\\text {out }}=-g_{m} v_{1} R_{D}$, leading to\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =-\\frac{g_{m} R_{D}}{1+g_{m} R_{S}}  \\tag{7.66}\\\\\n& =-\\frac{R_{D}}{\\frac{1}{g_{m}}+R_{S}} \\tag{7.67}\n\\end{align*}\n$$\n\nThis result mirrors Eq. (5.157) for the bipolar equivalent.\n\nExample 7.8\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\n]\nextrainfo:The circuit is a common-source stage with degeneration, featuring M1 as an NMOS and M2 as a PMOS. M2 is diode-connected, providing feedback, with the output taken across RD.\n\n(a)\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: S1, type: Resistor, value: 1/gm2, ports: {N1: GND, N2: GND}\n]\nextrainfo:The circuit is a common-source stage with degeneration, using M1 as an NMOS. The output is taken across RD. Resistor S1 represents a source degeneration resistor with a value of 1/gm2.\n\n(b)\n\nFigure 7.15 (a) Example of CS stage with degeneration, (b) simplified circuit.\nSolution Transistor $M_{2}$ functions as a diode-connected device, presenting an impedance of $1 / g_{m 2}$ [Fig. 7.15(b)]. The gain is thus given by Eq. (7.67) if $R_{S}$ is replaced with $1 / g_{m 2}$:\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{R_{D}}{\\frac{1}{g_{m 1}}+\\frac{1}{g_{m 2}}} . \\tag{7.68}\n\\end{equation*}\n$$\n\nExercise\nWhat occurs if $\\lambda \\neq 0$ for $M_{2}$?\n\nIn conjunction with the concepts from Chapter 5, we can examine the impact of a resistor in series with the gate (Fig. 7.16). However, since the gate current is negligible (at low frequencies), $R_{G}$ does not cause a voltage drop and thus does not affect the voltage gain or I/O impedances.\n\nEffect of Transistor Output Impedance Similar to the bipolar counterparts, including the transistor output impedance complicates the analysis, as explored in Problem 7.32. Nevertheless, the output impedance of the degenerated CS stage is crucial in analog design and warrants further study.\n\nFigure 7.17 depicts the small-signal equivalent of the circuit. Since $R_{S}$ carries a current equal to $i_{X}$ (why?), we have $v_{1}=-i_{X} R_{S}$. Additionally, the current through $r_{O}$ equals\nimage_name:Figure 7.16 CS stage with gate resistance\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1, D: Vout, G: g1}\nname: RG, type: Resistor, value: RG, ports: {N1: Vin, N2: g1}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a common-source (CS) stage with a gate resistance RG and degeneration resistance RS. It amplifies input signals applied at Vin, with the output taken at Vout. The NMOS transistor M1 is the active device in the amplification process.\n\nFigure 7.16 CS stage with gate resistance.\nimage_name:Figure 7.17 Output impedance of CS stage with degeneration\ndescription:\n[\nname: V1, type: VoltageSource, value: V1, ports: {Np: v1, Nn: -Vi}\nname: RS, type: Resistor, value: RS, ports: {N1: -Vi, N2: GND}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: -Vi, Nn: -Vi}\nname: ro, type: Resistor, value: ro, ports: {N1: Vx, N2: -Vi}\nname: Vx, type: VoltageSource, value: Vx, ports: {Np: Vx, Nn: GND}\n]\nextrainfo:The circuit diagram represents the output impedance of a common-source (CS) stage with degeneration. It includes a voltage source V1, a resistor RS, a voltage-controlled current source gmV1, a resistor ro, and a voltage source Vx. The diagram shows the relationship between the current ix and voltage vx in the context of the CS stage.\n\nFigure 7.17 Output impedance of CS stage with degeneration.\n$i_{X}-g_{m} v_{1}=i_{X}-g_{m}\\left(-i_{X} R_{S}\\right)=i_{X}+g_{m} i_{X} R_{S}$. Adding the voltage drops across $r_{O}$ and $R_{S}$ and equating to $v_{X}$, we get\n\n$$\n\\begin{equation*}\nr_{O}\\left(i_{X}+g_{m} i_{X} R_{S}\\right)+i_{X} R_{S}=v_{X} \\tag{7.69}\n\\end{equation*}\n$$\n\nand thus\n\n$$\n\\begin{align*}\n\\frac{v_{X}}{i_{X}} & =r_{O}\\left(1+g_{m} R_{S}\\right)+R_{S}  \\tag{7.70}\\\\\n& =\\left(1+g_{m} r_{O}\\right) R_{S}+r_{O}  \\tag{7.71}\\\\\n& \\approx g_{m} r_{O} R_{S}+r_{O} \\tag{7.72}\n\\end{align*}\n$$\n\nAlternatively, we note that the model in Fig. 7.17 is akin to its bipolar counterpart in Fig. 5.46(a) but with $r_{\\pi}=\\infty$. Setting $r_{\\pi} \\rightarrow \\infty$ in Eqs. (5.196) and (5.197) yields the same results. As expected from our study of the bipolar degenerated stage, the MOS version also exhibits a \"boosted\" output impedance.\n\nCompute the output resistance of the circuit in Fig. 7.18(a) if $M_{1}$ and $M_{2}$ are identical.\nimage_name:Figure 7.18 (a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: sig2, D: d1, G: Vb}\nname: M2, type: NMOS, ports: {S: GND, D: sig2, G: sig2}\nname: Rout, type: Resistor, value: Rout, ports: {N1: d1, N2: Vout}\n]\nextrainfo:The circuit is a common-source stage with degeneration using two NMOS transistors. M2 is diode-connected.\n\n(a)\nimage_name:Figure 7.18 (a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1, D: d1, G: Vb}\nname: M2, type: NMOS, ports: {S: GND, D: s1, G: s1}\nname: Rout, type: Resistor, value: Rout, ports: {N1: d1, N2: Vout}\n]\nextrainfo:The circuit is a common-source stage with degeneration using two NMOS transistors. M2 is diode-connected. The output resistance is calculated using the formula for Rout.\n\n(b)\n\nFigure 7.18 (a) Example of CS stage with degeneration, (b) simplified circuit.\n\nSolution The diode-connected transistor $M_{2}$ can be represented by a small-signal resistance of $\\left(1 / g_{m 2}\\right) \\| r_{O 2} \\approx 1 / g_{m 2}$. Transistor $M_{1}$ is degenerated by this resistance, and from Eq. (7.70):\n\n$$\n\\begin{equation*}\nR_{o u t}=r_{O 1}\\left(1+g_{m 1} \\frac{1}{g_{m 2}}\\right)+\\frac{1}{g_{m 2}} \\tag{7.73}\n\\end{equation*}\n$$\n\nwhich, given $g_{m 1}=g_{m 2}=g_{m}$, simplifies to\n\n$$\n\\begin{align*}\nR_{\\text {out }} & =2 r_{O 1}+\\frac{1}{g_{m}}  \\tag{7.74}\\\\\n& \\approx 2 r_{O 1} . \\tag{7.75}\n\\end{align*}\n$$\n\nExercise Do the results change if $M_{2}$ is replaced with a diode-connected PMOS device?\n\nExample Determine the output resistance of the circuit in Fig. 7.19(a) and compare it with the result in the previous example. Assume $M_{1}$ and $M_{2}$ are in saturation.\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1d2, D: d1, G: Vb2}\nname: M2, type: NMOS, ports: {S: GND, D: s1d2, G: Vb1}\nname: Rout, type: Resistor, value: Rout, ports: {N1: d1, N2: Vout}\nname: d1, type: Diode, ports: {Na: Vout, Nc: d1}\n]\nextrainfo:The circuit is a common-source stage with NMOS transistors M1 and M2, and a diode-connected load. M2 acts as a source degeneration resistor for M1. The output is taken across Rout.\n\n(a)\nimage_name:(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1, D: d1, G: GND}\nname: rO1, type: Resistor, value: rO1, ports: {N1: d1, N2: s1}\nname: rO2, type: Resistor, value: rO2, ports: {N1: s1, N2: GND}\nname: d1, type: Diode, ports: {Na: Vout, Nc: d1}\nname: Rout, type: Resistor, value: Rout, ports: {N1: d1, N2: Vout}\n]\nextrainfo:The circuit is a common-source stage with NMOS transistor M1 and a diode-connected load. Resistors rO1 and rO2 are connected to the source of M1, with rO2 connected to ground. The output is taken across Rout, connected to the diode.\n\n(b)\n\nFigure 7.19 (a) Example of CS stage with degeneration, (b) simplified circuit.\n\nSolution With its gate-source voltage fixed, transistor $M_{2}$ operates as a current source, introducing a resistance of $r_{O 2}$ from the source of $M_{1}$ to ground [Fig. 7.19(b)].\n\nEquation (7.71) can thus be written as\n\n$$\n\\begin{align*}\nR_{\\text {out }} & =\\left(1+g_{m 1} r_{O 1}\\right) r_{O 2}+r_{O 1}  \\tag{7.76}\\\\\n& \\approx g_{m 1} r_{O 1} r_{O 2}+r_{O 1} \\tag{7.77}\n\\end{align*}\n$$\n\nAssuming $g_{m 1} r_{O 2} \\gg 1$ (which is valid in practice), we have\n\n$$\n\\begin{equation*}\nR_{\\text {out }} \\approx g_{m 1} r_{O 1} r_{O 2} \\tag{7.78}\n\\end{equation*}\n$$\n\nWe observe that this value is significantly higher than that in Eq. (7.75).\n\nExercise Repeat the above example for the PMOS counterpart of the circuit."
},
{
    "text": "The impact of the straightforward biasing network illustrated in Fig. 7.1 is akin to that examined for the bipolar stage in Chapter 5. Presented in Fig. 7.20(a) along with an input coupling capacitor (assumed to be a short circuit), this circuit no longer displays infinite input impedance:\n\n$$\n\\begin{equation*}\nR_{\\text {in }}=R_{1} \\| R_{2} \\tag{7.79}\n\\end{equation*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: g1}\nname: M1, type: NMOS, ports: {S: s1, D: Vout, G: g1}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a common-source (CS) amplifier featuring a biasing network, input coupling capacitor, and load resistor RD. The NMOS transistor M1 is used for amplification. R1 and R2 create a voltage divider for biasing M1's gate. The input signal is AC-coupled via C1. The output is taken across RD, and RS provides source degeneration for stability.\nimage_name:(b)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: RG, type: Resistor, value: RG, ports: {N1: Vin, N2: X}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g}\nname: R2, type: Resistor, value: R2, ports: {N1: g, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: S1, N2: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: X, Nn: g}\nname: M1, type: NMOS, ports: {S: S1, D: Vout, G: g}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with an added gate resistor RG for biasing. The input is capacitively coupled through C1, and the output is derived from M1's drain. RS offers source degeneration, and RD serves as the load resistor.\nimage_name:(c)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: RG, type: Resistor, value: RG, ports: {N1: Vin, N2: x}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g}\nname: R2, type: Resistor, value: R2, ports: {N1: g, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: x, Nn: g}\nname: C2, type: Capacitor, value: C2, ports: {Np: s1, Nn: GND}\nname: M1, type: NMOS, ports: {S: s1, D: Vout, G: g}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit diagram (c) depicts a common-source amplifier with an NMOS transistor (M1) and a bypass capacitor (C2) connected across RS for AC signals. The input is AC-coupled through C1, and the gate bias is set by R1 and R2. The output is obtained from M1's drain.\n\nFigure 7.20 (a) CS stage with input coupling capacitor, (b) addition of gate resistance, (c) incorporation of bypass capacitor.\n\nConsequently, if the circuit is driven by a source with finite impedance [Fig. 7.20(b)], the voltage gain decreases to\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{R_{1} \\| R_{2}}{R_{G}+R_{1} \\| R_{2}} \\cdot \\frac{-R_{D}}{\\frac{1}{g_{m}}+R_{S}} \\tag{7.80}\n\\end{equation*}\n$$\n\nassuming $\\lambda$ is zero.\nAs discussed in Chapter 5, it is feasible to use degeneration for bias point stability while eliminating its impact on small-signal performance via a bypass capacitor [Fig. 7.20(c)]. Unlike the bipolar implementation, this does not change the CS stage's input impedance:\n\n$$\n\\begin{equation*}\nR_{\\text {in }}=R_{1} \\| R_{2} \\tag{7.81}\n\\end{equation*}\n$$\n\nbut enhances the voltage gain:\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{R_{1} \\| R_{2}}{R_{G}+R_{1} \\| R_{2}} g_{m} R_{D} \\tag{7.82}\n\\end{equation*}\n$$\n\nExample Design the CS stage of Fig. 7.20(c) for a voltage gain of 5, an input impedance of $50 \\mathrm{k} \\Omega$, and a power budget of 5 mW. Assume $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}, \\lambda=0$, and $V_{D D}=1.8 \\mathrm{~V}$. Also, assume a voltage drop of 400 mV across $R_{S}$.\n\nSolution The power budget combined with $V_{D D}=1.8 \\mathrm{~V}$ suggests a maximum supply current of 2.78 mA. Initially, we allocate 2.7 mA to $M_{1}$ and the remaining $80 \\mu \\mathrm{~A}$ to $R_{1}$ and $R_{2}$. This results in\n\n$$\n\\begin{equation*}\nR_{S}=148 \\Omega \\tag{7.83}\n\\end{equation*}\n$$\n\nAs with typical design issues, the selection of $g_{m}$ and $R_{D}$ is somewhat flexible as long as $g_{m} R_{D}=5$. However, with $I_{D}$ known, we must ensure a reasonable $V_{G S}$, e.g., $V_{G S}=1 \\mathrm{~V}$. This choice yields\n\n$$\n\\begin{align*}\ng_{m} & =\\frac{2 I_{D}}{V_{G S}-V_{T H}}  \\tag{7.84}\\\\\n& =\\frac{1}{92.6 \\Omega} \\tag{7.85}\n\\end{align*}\n$$\n\nand thus\n\n$$\n\\begin{equation*}\nR_{D}=463 \\Omega \\tag{7.86}\n\\end{equation*}\n$$\n\nUsing\n\n$$\n\\begin{equation*}\nI_{D}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2} \\tag{7.87}\n\\end{equation*}\n$$\n\nwe find\n\n$$\n\\begin{equation*}\n\\frac{W}{L}=216 \\tag{7.88}\n\\end{equation*}\n$$\n\nWith $V_{G S}=1 \\mathrm{~V}$ and a 400 mV drop across $R_{S}$, the gate voltage reaches 1.4 V, necessitating that\n\n$$\n\\begin{equation*}\n\\frac{R_{2}}{R_{1}+R_{2}} V_{D D}=1.4 \\mathrm{~V} \\tag{7.89}\n\\end{equation*}\n$$\n\nwhich, along with $R_{i n}=R_{1} \\| R_{2}=50 \\mathrm{k} \\Omega$, results in\n\n$$\n\\begin{align*}\n& R_{1}=64.3 \\mathrm{k} \\Omega  \\tag{7.90}\\\\\n& R_{2}=225 \\mathrm{k} \\Omega . \\tag{7.91}\n\\end{align*}\n$$\n\nWe must now verify that $M_{1}$ operates in saturation. The drain voltage is $V_{D D}-I_{D} R_{D}=1.8 \\mathrm{~V}-1.25 \\mathrm{~V}=0.55 \\mathrm{~V}$. Since the gate voltage is 1.4 V, the gate-drain voltage difference exceeds $V_{T H}$, driving $M_{1}$ into the triode region!\n\nHow did our design approach lead to this outcome? For the given $I_{D}$, we chose an excessively large $R_{D}$, i.e., an excessively small $g_{m}$ (since $g_{m} R_{D}=5$), even though $V_{G S}$ is reasonable. We must therefore increase $g_{m}$ to allow a lower $R_{D}$. For instance, if we halve $R_{D}$ and double $g_{m}$ by increasing $W / L$ by a factor of four:\n\n$$\n\\begin{align*}\n\\frac{W}{L} & =864  \\tag{7.92}\\\\\ng_{m} & =\\frac{1}{46.3 \\Omega} \\tag{7.93}\n\\end{align*}\n$$\n\nThe corresponding gate-source voltage from (7.84) is\n\n$$\n\\begin{equation*}\nV_{G S}=250 \\mathrm{mV} \\tag{7.94}\n\\end{equation*}\n$$\n\nyielding a gate voltage of 650 mV.\nIs $M_{1}$ in saturation? The drain voltage is $V_{D D}-R_{D} I_{D}=1.17 \\mathrm{~V}$, which is higher than the gate voltage minus $V_{T H}$. Thus, $M_{1}$ operates in saturation.\n\nExercise Repeat the above example for a power budget of 3 mW and $V_{D D}=1.2 \\mathrm{~V}$."
},
{
    "text": "The impact of the straightforward biasing network illustrated in Fig. 7.1 is akin to that examined for the bipolar stage in Chapter 5. Displayed in Fig. 7.20(a), alongside an input coupling capacitor (assumed to be a short circuit), this circuit no longer presents an infinite input impedance:\n\n$$\n\\begin{equation*}\nR_{\\text {in }}=R_{1} \\| R_{2} \\tag{7.79}\n\\end{equation*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: g1}\nname: M1, type: NMOS, ports: {S: s1, D: Vout, G: g1}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a common-source (CS) amplifier featuring a biasing network, input coupling capacitor, and load resistor RD. The NMOS transistor M1 serves for amplification. R1 and R2 create a voltage divider for biasing M1's gate. The input signal is AC-coupled via C1. The output is measured across RD, with RS providing source degeneration for stability.\nimage_name:(b)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: RG, type: Resistor, value: RG, ports: {N1: Vin, N2: X}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g}\nname: R2, type: Resistor, value: R2, ports: {N1: g, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: S1, N2: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: X, Nn: g}\nname: M1, type: NMOS, ports: {S: S1, D: Vout, G: g}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with an added gate resistor RG for biasing. The input is capacitively coupled through C1, and the output is derived from M1's drain. RS offers source degeneration, while RD acts as the load resistor.\nimage_name:(c)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: RG, type: Resistor, value: RG, ports: {N1: Vin, N2: x}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g}\nname: R2, type: Resistor, value: R2, ports: {N1: g, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: x, Nn: g}\nname: C2, type: Capacitor, value: C2, ports: {Np: s1, Nn: GND}\nname: M1, type: NMOS, ports: {S: s1, D: Vout, G: g}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit in diagram (c) is a common-source amplifier with an NMOS transistor (M1) and a bypass capacitor (C2) across RS for AC signals. The input is AC-coupled through C1, and the gate bias is set by R1 and R2. The output is taken from M1's drain.\n\nFigure 7.20 (a) CS stage with input coupling capacitor, (b) addition of gate resistance, (c) incorporation of bypass capacitor.\n\nThus, when the circuit is driven by a finite source impedance [Fig. 7.20(b)], the voltage gain decreases to\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{R_{1} \\| R_{2}}{R_{G}+R_{1} \\| R_{2}} \\cdot \\frac{-R_{D}}{\\frac{1}{g_{m}}+R_{S}} \\tag{7.80}\n\\end{equation*}\n$$\n\nassuming $\\lambda$ is zero.\nAs discussed in Chapter 5, it is feasible to use degeneration for bias point stability while nullifying its impact on small-signal performance via a bypass capacitor [Fig. 7.20(c)]. Unlike bipolar implementations, this does not alter the CS stage's input impedance:\n\n$$\n\\begin{equation*}\nR_{\\text {in }}=R_{1} \\| R_{2} \\tag{7.81}\n\\end{equation*}\n$$\n\nbut enhances the voltage gain:\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{R_{1} \\| R_{2}}{R_{G}+R_{1} \\| R_{2}} g_{m} R_{D} \\tag{7.82}\n\\end{equation*}\n$$\n\nExample Design the CS stage of Fig. 7.20(c) for a voltage gain of 5, an input impedance of $50 \\mathrm{k} \\Omega$, and a power budget of 5 mW. Assume $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}, \\lambda=0$, and $V_{D D}=1.8 \\mathrm{~V}$. Also, assume a voltage drop of 400 mV across $R_{S}$.\n\nSolution The power budget, combined with $V_{D D}=1.8 \\mathrm{~V}$, indicates a maximum supply current of 2.78 mA. Initially, we assign 2.7 mA to $M_{1}$ and the remaining $80 \\mu \\mathrm{~A}$ to $R_{1}$ and $R_{2}$. Consequently,\n\n$$\n\\begin{equation*}\nR_{S}=148 \\Omega \\tag{7.83}\n\\end{equation*}\n$$\n\nAs with typical design issues, the selection of $g_{m}$ and $R_{D}$ offers some flexibility as long as $g_{m} R_{D}=5$. However, with $I_{D}$ known, we must ensure a reasonable $V_{G S}$, e.g., $V_{G S}=1 \\mathrm{~V}$. This choice results in\n\n$$\n\\begin{align*}\ng_{m} & =\\frac{2 I_{D}}{V_{G S}-V_{T H}}  \\tag{7.84}\\\\\n& =\\frac{1}{92.6 \\Omega} \\tag{7.85}\n\\end{align*}\n$$\n\nand thus\n\n$$\n\\begin{equation*}\nR_{D}=463 \\Omega \\tag{7.86}\n\\end{equation*}\n$$\n\nWriting\n\n$$\n\\begin{equation*}\nI_{D}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2} \\tag{7.87}\n\\end{equation*}\n$$\n\nyields\n\n$$\n\\begin{equation*}\n\\frac{W}{L}=216 \\tag{7.88}\n\\end{equation*}\n$$\n\nWith $V_{G S}=1 \\mathrm{~V}$ and a $400-\\mathrm{mV}$ drop across $R_{S}$, the gate voltage reaches 1.4 V, necessitating that\n\n$$\n\\begin{equation*}\n\\frac{R_{2}}{R_{1}+R_{2}} V_{D D}=1.4 \\mathrm{~V} \\tag{7.89}\n\\end{equation*}\n$$\n\nwhich, along with $R_{i n}=R_{1} \\| R_{2}=50 \\mathrm{k} \\Omega$, results in\n\n$$\n\\begin{align*}\n& R_{1}=64.3 \\mathrm{k} \\Omega  \\tag{7.90}\\\\\n& R_{2}=225 \\mathrm{k} \\Omega . \\tag{7.91}\n\\end{align*}\n$$\n\nWe must now verify that $M_{1}$ indeed operates in saturation. The drain voltage is $V_{D D}-I_{D} R_{D}=1.8 \\mathrm{~V}-1.25 \\mathrm{~V}=0.55 \\mathrm{~V}$. Since the gate voltage is 1.4 V, the gate-drain voltage difference exceeds $V_{T H}$, pushing $M_{1}$ into the triode region!\n\nHow did our design approach result in this outcome? For the given $I_{D}$, we chose an excessively large $R_{D}$, i.e., an excessively small $g_{m}$ (since $g_{m} R_{D}=5$), even though $V_{G S}$ is reasonable. We must therefore increase $g_{m}$ to allow for a lower $R_{D}$. For instance, if we halve $R_{D}$ and double $g_{m}$ by quadrupling $W / L$:\n\n$$\n\\begin{align*}\n\\frac{W}{L} & =864  \\tag{7.92}\\\\\ng_{m} & =\\frac{1}{46.3 \\Omega} \\tag{7.93}\n\\end{align*}\n$$\n\nThe corresponding gate-source voltage from (7.84) is\n\n$$\n\\begin{equation*}\nV_{G S}=250 \\mathrm{mV} \\tag{7.94}\n\\end{equation*}\n$$\n\nyielding a gate voltage of 650 mV.\nIs $M_{1}$ in saturation? The drain voltage is $V_{D D}-R_{D} I_{D}=1.17 \\mathrm{~V}$, a value higher than the gate voltage minus $V_{T H}$. Thus, $M_{1}$ operates in saturation.\n\nExercise Repeat the above example for a power budget of 3 mW and $V_{D D}=1.2 \\mathrm{~V}$."
},
{
    "text": "The impact of the straightforward biasing network depicted in Fig. 7.1 is akin to that examined for the bipolar stage in Chapter 5. As illustrated in Fig. 7.20(a), which includes an input coupling capacitor (assumed to act as a short circuit), this circuit no longer presents an infinite input impedance:\n\n$$\n\\begin{equation*}\nR_{\\text {in }}=R_{1} \\| R_{2} \\tag{7.79}\n\\end{equation*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: g1}\nname: M1, type: NMOS, ports: {S: s1, D: Vout, G: g1}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a common-source (CS) amplifier featuring a biasing network, an input coupling capacitor, and a load resistor RD. The NMOS transistor M1 is used for amplification. R1 and R2 create a voltage divider for biasing M1's gate. The input signal is AC-coupled via C1. The output is taken across RD, and RS provides source degeneration for stability.\nimage_name:(b)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: RG, type: Resistor, value: RG, ports: {N1: Vin, N2: X}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g}\nname: R2, type: Resistor, value: R2, ports: {N1: g, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: S1, N2: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: X, Nn: g}\nname: M1, type: NMOS, ports: {S: S1, D: Vout, G: g}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with an added gate resistor RG for biasing. The input is capacitively coupled through C1, and the output is derived from M1's drain. RS offers source degeneration, and RD serves as the load resistor.\nimage_name:(c)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: RG, type: Resistor, value: RG, ports: {N1: Vin, N2: x}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g}\nname: R2, type: Resistor, value: R2, ports: {N1: g, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: x, Nn: g}\nname: C2, type: Capacitor, value: C2, ports: {Np: s1, Nn: GND}\nname: M1, type: NMOS, ports: {S: s1, D: Vout, G: g}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit in diagram (c) is a common-source amplifier with an NMOS transistor (M1) and a bypass capacitor (C2) connected across RS for AC signals. The input is AC-coupled via C1, and the gate bias is set by R1 and R2. The output is obtained from M1's drain.\n\nFigure 7.20 (a) CS stage with input coupling capacitor, (b) addition of gate resistance, (c) incorporation of bypass capacitor.\n\nConsequently, if the circuit is driven by a source with finite impedance [Fig. 7.20(b)], the voltage gain drops to\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{R_{1} \\| R_{2}}{R_{G}+R_{1} \\| R_{2}} \\cdot \\frac{-R_{D}}{\\frac{1}{g_{m}}+R_{S}} \\tag{7.80}\n\\end{equation*}\n$$\n\nassuming $\\lambda$ is zero.\nAs discussed in Chapter 5, it is feasible to use degeneration for bias point stability while eliminating its impact on small-signal performance through a bypass capacitor [Fig. 7.20(c)]. Unlike the bipolar implementation, this does not alter the input impedance of the CS stage:\n\n$$\n\\begin{equation*}\nR_{\\text {in }}=R_{1} \\| R_{2} \\tag{7.81}\n\\end{equation*}\n$$\n\nbut enhances the voltage gain:\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{R_{1} \\| R_{2}}{R_{G}+R_{1} \\| R_{2}} g_{m} R_{D} \\tag{7.82}\n\\end{equation*}\n$$\n\nExample Design the CS stage of Fig. 7.20(c) for a voltage gain of 5, an input impedance of $50 \\mathrm{k} \\Omega$, and a power budget of 5 mW. Assume $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}, \\lambda=0$, and $V_{D D}=1.8 \\mathrm{~V}$. Also, assume a voltage drop of 400 mV across $R_{S}$.\n\nSolution The power budget, combined with $V_{D D}=1.8 \\mathrm{~V}$, implies a maximum supply current of 2.78 mA. Initially, we allocate 2.7 mA to $M_{1}$ and the remaining $80 \\mu \\mathrm{~A}$ to $R_{1}$ and $R_{2}$. Consequently,\n\n$$\n\\begin{equation*}\nR_{S}=148 \\Omega \\tag{7.83}\n\\end{equation*}\n$$\n\nIn typical design scenarios, the selection of $g_{m}$ and $R_{D}$ is somewhat flexible as long as $g_{m} R_{D}=5$. However, with $I_{D}$ known, we must ensure a reasonable value for $V_{G S}$, e.g., $V_{G S}=1 \\mathrm{~V}$. This choice results in\n\n$$\n\\begin{align*}\ng_{m} & =\\frac{2 I_{D}}{V_{G S}-V_{T H}}  \\tag{7.84}\\\\\n& =\\frac{1}{92.6 \\Omega} \\tag{7.85}\n\\end{align*}\n$$\n\nand thus\n\n$$\n\\begin{equation*}\nR_{D}=463 \\Omega \\tag{7.86}\n\\end{equation*}\n$$\n\nFrom\n\n$$\n\\begin{equation*}\nI_{D}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2} \\tag{7.87}\n\\end{equation*}\n$$\n\nwe derive\n\n$$\n\\begin{equation*}\n\\frac{W}{L}=216 \\tag{7.88}\n\\end{equation*}\n$$\n\nWith $V_{G S}=1 \\mathrm{~V}$ and a $400-\\mathrm{mV}$ drop across $R_{S}$, the gate voltage reaches 1.4 V, necessitating that\n\n$$\n\\begin{equation*}\n\\frac{R_{2}}{R_{1}+R_{2}} V_{D D}=1.4 \\mathrm{~V} \\tag{7.89}\n\\end{equation*}\n$$\n\nwhich, along with $R_{i n}=R_{1} \\| R_{2}=50 \\mathrm{k} \\Omega$, yields\n\n$$\n\\begin{align*}\n& R_{1}=64.3 \\mathrm{k} \\Omega  \\tag{7.90}\\\\\n& R_{2}=225 \\mathrm{k} \\Omega . \\tag{7.91}\n\\end{align*}\n$$\n\nWe must now verify that $M_{1}$ operates in saturation. The drain voltage is $V_{D D}-I_{D} R_{D}=1.8 \\mathrm{~V}-1.25 \\mathrm{~V}=0.55 \\mathrm{~V}$. Since the gate voltage is 1.4 V, the gate-drain voltage difference exceeds $V_{T H}$, driving $M_{1}$ into the triode region!\n\nHow did our design process result in this outcome? For the given $I_{D}$, we chose an excessively large $R_{D}$, i.e., an excessively small $g_{m}$ (since $g_{m} R_{D}=5$), even though $V_{G S}$ is reasonable. We must therefore increase $g_{m}$ to allow for a lower $R_{D}$. For instance, if we halve $R_{D}$ and double $g_{m}$ by increasing $W / L$ by a factor of four:\n\n$$\n\\begin{align*}\n\\frac{W}{L} & =864  \\tag{7.92}\\\\\ng_{m} & =\\frac{1}{46.3 \\Omega} \\tag{7.93}\n\\end{align*}\n$$\n\nThe corresponding gate-source voltage from (7.84) is\n\n$$\n\\begin{equation*}\nV_{G S}=250 \\mathrm{mV} \\tag{7.94}\n\\end{equation*}\n$$\n\nyielding a gate voltage of 650 mV.\nIs $M_{1}$ in saturation? The drain voltage is $V_{D D}-R_{D} I_{D}=1.17 \\mathrm{~V}$, which is higher than the gate voltage minus $V_{T H}$. Thus, $M_{1}$ operates in saturation.\n\nExercise Repeat the above example for a power budget of 3 mW and $V_{D D}=1.2 \\mathrm{~V}$."
},
{
    "text": "The impact of the straightforward biasing network depicted in Fig. 7.1 is akin to that examined for the bipolar stage in Chapter 5. Illustrated in Fig. 7.20(a) alongside an input coupling capacitor (treated as a short circuit), this circuit no longer presents an infinite input impedance:\n\n$$\n\\begin{equation*}\nR_{\\text {in }}=R_{1} \\| R_{2} \\tag{7.79}\n\\end{equation*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: g1}\nname: M1, type: NMOS, ports: {S: s1, D: Vout, G: g1}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a common-source (CS) amplifier featuring a biasing network, input coupling capacitor, and load resistor RD. The NMOS transistor M1 is employed for amplification. R1 and R2 constitute a voltage divider for biasing M1's gate. The input signal is AC-coupled via C1. The output is measured across RD, and RS provides source degeneration for stability.\nimage_name:(b)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: RG, type: Resistor, value: RG, ports: {N1: Vin, N2: X}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g}\nname: R2, type: Resistor, value: R2, ports: {N1: g, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: S1, N2: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: X, Nn: g}\nname: M1, type: NMOS, ports: {S: S1, D: Vout, G: g}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with an added gate resistor RG for biasing. The input is capacitively coupled through C1, and the output is derived from M1's drain. RS offers source degeneration, and RD serves as the load resistor.\nimage_name:(c)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: RG, type: Resistor, value: RG, ports: {N1: Vin, N2: x}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g}\nname: R2, type: Resistor, value: R2, ports: {N1: g, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: x, Nn: g}\nname: C2, type: Capacitor, value: C2, ports: {Np: s1, Nn: GND}\nname: M1, type: NMOS, ports: {S: s1, D: Vout, G: g}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit diagram (c) portrays a common-source amplifier with an NMOS transistor (M1) and a bypass capacitor (C2) across RS for AC signals. The input is AC-coupled via C1, and the gate bias is set by R1 and R2. The output is obtained from M1's drain.\n\nFigure 7.20 (a) CS stage with input coupling capacitor, (b) addition of gate resistance, (c) incorporation of bypass capacitor.\n\nConsequently, if the circuit is driven by a source with finite impedance [Fig. 7.20(b)], the voltage gain decreases to\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{R_{1} \\| R_{2}}{R_{G}+R_{1} \\| R_{2}} \\cdot \\frac{-R_{D}}{\\frac{1}{g_{m}}+R_{S}} \\tag{7.80}\n\\end{equation*}\n$$\n\nassuming $\\lambda$ is zero.\nAs discussed in Chapter 5, it is feasible to use degeneration for bias point stability while nullifying its impact on small-signal performance through a bypass capacitor [Fig. 7.20(c)]. Unlike bipolar implementations, this does not alter the CS stage's input impedance:\n\n$$\n\\begin{equation*}\nR_{\\text {in }}=R_{1} \\| R_{2} \\tag{7.81}\n\\end{equation*}\n$$\n\nbut enhances the voltage gain:\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{R_{1} \\| R_{2}}{R_{G}+R_{1} \\| R_{2}} g_{m} R_{D} \\tag{7.82}\n\\end{equation*}\n$$\n\nExample: Design the CS stage of Fig. 7.20(c) for a voltage gain of 5, an input impedance of $50 \\mathrm{k} \\Omega$, and a power budget of 5 mW. Assume $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}, \\lambda=0$, and $V_{D D}=1.8 \\mathrm{~V}$. Also, assume a 400 mV drop across $R_{S}$.\n\nSolution: The power budget combined with $V_{D D}=1.8 \\mathrm{~V}$ allows a maximum supply current of 2.78 mA. Initially, we allocate 2.7 mA to $M_{1}$ and the remaining $80 \\mu \\mathrm{~A}$ to $R_{1}$ and $R_{2}$. This results in\n\n$$\n\\begin{equation*}\nR_{S}=148 \\Omega \\tag{7.83}\n\\end{equation*}\n$$\n\nAs with typical design issues, the selection of $g_{m}$ and $R_{D}$ is somewhat flexible as long as $g_{m} R_{D}=5$. However, with $I_{D}$ known, we must ensure a reasonable $V_{G S}$, e.g., $V_{G S}=1 \\mathrm{~V}$. This choice yields\n\n$$\n\\begin{align*}\ng_{m} & =\\frac{2 I_{D}}{V_{G S}-V_{T H}}  \\tag{7.84}\\\\\n& =\\frac{1}{92.6 \\Omega} \\tag{7.85}\n\\end{align*}\n$$\n\nand thus\n\n$$\n\\begin{equation*}\nR_{D}=463 \\Omega \\tag{7.86}\n\\end{equation*}\n$$\n\nWriting\n\n$$\n\\begin{equation*}\nI_{D}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2} \\tag{7.87}\n\\end{equation*}\n$$\n\ngives\n\n$$\n\\begin{equation*}\n\\frac{W}{L}=216 \\tag{7.88}\n\\end{equation*}\n$$\n\nWith $V_{G S}=1 \\mathrm{~V}$ and a 400 mV drop across $R_{S}$, the gate voltage reaches 1.4 V, requiring that\n\n$$\n\\begin{equation*}\n\\frac{R_{2}}{R_{1}+R_{2}} V_{D D}=1.4 \\mathrm{~V} \\tag{7.89}\n\\end{equation*}\n$$\n\nwhich, along with $R_{i n}=R_{1} \\| R_{2}=50 \\mathrm{k} \\Omega$, results in\n\n$$\n\\begin{align*}\n& R_{1}=64.3 \\mathrm{k} \\Omega  \\tag{7.90}\\\\\n& R_{2}=225 \\mathrm{k} \\Omega . \\tag{7.91}\n\\end{align*}\n$$\n\nWe must now verify that $M_{1}$ operates in saturation. The drain voltage is $V_{D D}-I_{D} R_{D}=1.8 \\mathrm{~V}-1.25 \\mathrm{~V}=0.55 \\mathrm{~V}$. Since the gate voltage is 1.4 V, the gate-drain voltage difference exceeds $V_{T H}$, driving $M_{1}$ into the triode region!\n\nHow did our design approach lead to this outcome? For the given $I_{D}$, we chose an excessively large $R_{D}$, i.e., an excessively small $g_{m}$ (since $g_{m} R_{D}=5$), even though $V_{G S}$ is reasonable. We must therefore increase $g_{m}$ to permit a lower $R_{D}$. For instance, if we halve $R_{D}$ and double $g_{m}$ by quadrupling $W / L$:\n\n$$\n\\begin{align*}\n\\frac{W}{L} & =864  \\tag{7.92}\\\\\ng_{m} & =\\frac{1}{46.3 \\Omega} \\tag{7.93}\n\\end{align*}\n$$\n\nThe corresponding gate-source voltage from (7.84) is\n\n$$\n\\begin{equation*}\nV_{G S}=250 \\mathrm{mV} \\tag{7.94}\n\\end{equation*}\n$$\n\nyielding a gate voltage of 650 mV.\nIs $M_{1}$ in saturation? The drain voltage is $V_{D D}-R_{D} I_{D}=1.17 \\mathrm{~V}$, which is higher than the gate voltage minus $V_{T H}$. Thus, $M_{1}$ operates in saturation.\n\nExercise: Repeat the above example for a power budget of 3 mW and $V_{D D}=1.2 \\mathrm{~V}$."
},
{
    "text": "The impact of the straightforward biasing network illustrated in Fig. 7.1 is comparable to that examined for the bipolar stage in Chapter 5. As depicted in Fig. 7.20(a), which includes an input coupling capacitor (assumed to be a short circuit), this circuit no longer presents an infinite input impedance:\n\n$$\n\\begin{equation*}\nR_{\\text {in }}=R_{1} \\| R_{2} \\tag{7.79}\n\\end{equation*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: g1}\nname: M1, type: NMOS, ports: {S: s1, D: Vout, G: g1}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a common-source (CS) amplifier featuring a biasing network, an input coupling capacitor, and a load resistor RD. The NMOS transistor M1 is employed for amplification. R1 and R2 constitute a voltage divider for biasing M1's gate. The input signal is AC-coupled via C1. The output is derived across RD, with RS providing source degeneration for stability.\nimage_name:(b)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: RG, type: Resistor, value: RG, ports: {N1: Vin, N2: X}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g}\nname: R2, type: Resistor, value: R2, ports: {N1: g, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: S1, N2: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: X, Nn: g}\nname: M1, type: NMOS, ports: {S: S1, D: Vout, G: g}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with an added gate resistor RG for biasing. The input is capacitively coupled through C1, and the output is taken from M1's drain. RS offers source degeneration, while RD serves as the load resistor.\nimage_name:(c)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: RG, type: Resistor, value: RG, ports: {N1: Vin, N2: x}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g}\nname: R2, type: Resistor, value: R2, ports: {N1: g, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: x, Nn: g}\nname: C2, type: Capacitor, value: C2, ports: {Np: s1, Nn: GND}\nname: M1, type: NMOS, ports: {S: s1, D: Vout, G: g}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit in diagram (c) is a common-source amplifier with an NMOS transistor (M1) and a bypass capacitor (C2) connected across RS for AC signals. The input is AC-coupled via C1, and the gate bias is established by R1 and R2. The output is obtained from M1's drain.\n\nFigure 7.20 (a) CS stage with input coupling capacitor, (b) addition of gate resistance, (c) incorporation of bypass capacitor.\n\nConsequently, if the circuit is driven by a source with finite impedance [Fig. 7.20(b)], the voltage gain drops to\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{R_{1} \\| R_{2}}{R_{G}+R_{1} \\| R_{2}} \\cdot \\frac{-R_{D}}{\\frac{1}{g_{m}}+R_{S}} \\tag{7.80}\n\\end{equation*}\n$$\n\nassuming $\\lambda$ is zero.\nAs discussed in Chapter 5, it is feasible to use degeneration for bias point stability while nullifying its impact on small-signal performance through a bypass capacitor [Fig. 7.20(c)]. Unlike the bipolar counterpart, this does not alter the CS stage's input impedance:\n\n$$\n\\begin{equation*}\nR_{\\text {in }}=R_{1} \\| R_{2} \\tag{7.81}\n\\end{equation*}\n$$\n\nbut enhances the voltage gain:\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{R_{1} \\| R_{2}}{R_{G}+R_{1} \\| R_{2}} g_{m} R_{D} \\tag{7.82}\n\\end{equation*}\n$$\n\nExample: Design the CS stage of Fig. 7.20(c) for a voltage gain of 5, an input impedance of $50 \\mathrm{k} \\Omega$, and a power budget of 5 mW. Assume $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}, \\lambda=0$, and $V_{D D}=1.8 \\mathrm{~V}$. Also, assume a voltage drop of 400 mV across $R_{S}$.\n\nSolution: The power budget combined with $V_{D D}=1.8 \\mathrm{~V}$ suggests a maximum supply current of 2.78 mA. Initially, we assign 2.7 mA to $M_{1}$ and the remaining $80 \\mu \\mathrm{~A}$ to $R_{1}$ and $R_{2}$. Consequently,\n\n$$\n\\begin{equation*}\nR_{S}=148 \\Omega \\tag{7.83}\n\\end{equation*}\n$$\n\nIn typical design scenarios, the selection of $g_{m}$ and $R_{D}$ is somewhat flexible as long as $g_{m} R_{D}=5$. However, with $I_{D}$ known, we must ensure a reasonable $V_{G S}$, e.g., $V_{G S}=1 \\mathrm{~V}$. This choice results in\n\n$$\n\\begin{align*}\ng_{m} & =\\frac{2 I_{D}}{V_{G S}-V_{T H}}  \\tag{7.84}\\\\\n& =\\frac{1}{92.6 \\Omega} \\tag{7.85}\n\\end{align*}\n$$\n\nand thus\n\n$$\n\\begin{equation*}\nR_{D}=463 \\Omega \\tag{7.86}\n\\end{equation*}\n$$\n\nBy writing\n\n$$\n\\begin{equation*}\nI_{D}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2} \\tag{7.87}\n\\end{equation*}\n$$\n\nwe find\n\n$$\n\\begin{equation*}\n\\frac{W}{L}=216 \\tag{7.88}\n\\end{equation*}\n$$\n\nWith $V_{G S}=1 \\mathrm{~V}$ and a 400 mV drop across $R_{S}$, the gate voltage reaches 1.4 V, necessitating that\n\n$$\n\\begin{equation*}\n\\frac{R_{2}}{R_{1}+R_{2}} V_{D D}=1.4 \\mathrm{~V} \\tag{7.89}\n\\end{equation*}\n$$\n\nwhich, along with $R_{i n}=R_{1} \\| R_{2}=50 \\mathrm{k} \\Omega$, yields\n\n$$\n\\begin{align*}\n& R_{1}=64.3 \\mathrm{k} \\Omega  \\tag{7.90}\\\\\n& R_{2}=225 \\mathrm{k} \\Omega . \\tag{7.91}\n\\end{align*}\n$$\n\nWe must now verify that $M_{1}$ indeed operates in saturation. The drain voltage is $V_{D D}-I_{D} R_{D}=1.8 \\mathrm{~V}-1.25 \\mathrm{~V}=0.55 \\mathrm{~V}$. Since the gate voltage is 1.4 V, the gate-drain voltage difference exceeds $V_{T H}$, driving $M_{1}$ into the triode region!\n\nHow did our design approach result in this outcome? For the given $I_{D}$, we chose an excessively large $R_{D}$, i.e., an excessively small $g_{m}$ (since $g_{m} R_{D}=5$), despite a reasonable $V_{G S}$. We must therefore increase $g_{m}$ to permit a lower $R_{D}$. For instance, if we halve $R_{D}$ and double $g_{m}$ by quadrupling $W / L$:\n\n$$\n\\begin{align*}\n\\frac{W}{L} & =864  \\tag{7.92}\\\\\ng_{m} & =\\frac{1}{46.3 \\Omega} \\tag{7.93}\n\\end{align*}\n$$\n\nThe corresponding gate-source voltage from (7.84) is\n\n$$\n\\begin{equation*}\nV_{G S}=250 \\mathrm{mV} \\tag{7.94}\n\\end{equation*}\n$$\n\nyielding a gate voltage of 650 mV.\nIs $M_{1}$ in saturation? The drain voltage is $V_{D D}-R_{D} I_{D}=1.17 \\mathrm{~V}$, which is higher than the gate voltage minus $V_{T H}$. Thus, $M_{1}$ operates in saturation.\n\nExercise: Repeat the above example for a power budget of 3 mW and $V_{D D}=1.2 \\mathrm{~V}$."
},
{
    "text": "The impact of the straightforward biasing network illustrated in Fig. 7.1 resembles that analyzed for the bipolar stage in Chapter 5. Shown in Fig. 7.20(a), along with an input coupling capacitor (assumed to be a short circuit), this circuit no longer presents an infinite input impedance:\n\n$$\n\\begin{equation*}\nR_{\\text {in }}=R_{1} \\| R_{2} \\tag{7.79}\n\\end{equation*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: g1}\nname: M1, type: NMOS, ports: {S: s1, D: Vout, G: g1}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a common-source (CS) amplifier with a biasing network, input coupling capacitor, and load resistor RD. The NMOS transistor M1 is used for amplification. R1 and R2 form a voltage divider for biasing M1's gate. The input signal is AC-coupled via C1. The output is taken across RD, and RS provides source degeneration for stability.\nimage_name:(b)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: RG, type: Resistor, value: RG, ports: {N1: Vin, N2: X}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g}\nname: R2, type: Resistor, value: R2, ports: {N1: g, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: S1, N2: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: X, Nn: g}\nname: M1, type: NMOS, ports: {S: S1, D: Vout, G: g}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with an added gate resistor RG for biasing. The input is capacitively coupled through C1, and the output is taken from M1's drain. RS provides source degeneration, and RD is the load resistor.\nimage_name:(c)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: RG, type: Resistor, value: RG, ports: {N1: Vin, N2: x}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g}\nname: R2, type: Resistor, value: R2, ports: {N1: g, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: x, Nn: g}\nname: C2, type: Capacitor, value: C2, ports: {Np: s1, Nn: GND}\nname: M1, type: NMOS, ports: {S: s1, D: Vout, G: g}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit diagram (c) depicts a common-source amplifier with an NMOS transistor (M1) and a bypass capacitor (C2) across RS for AC signals. The input is AC-coupled through C1, and the gate bias is set by R1 and R2. The output is taken from M1's drain.\n\nFigure 7.20 (a) CS stage with input coupling capacitor, (b) addition of gate resistance, (c) incorporation of bypass capacitor.\n\nTherefore, if the circuit is driven by a finite source impedance [Fig. 7.20(b)], the voltage gain decreases to\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{R_{1} \\| R_{2}}{R_{G}+R_{1} \\| R_{2}} \\cdot \\frac{-R_{D}}{\\frac{1}{g_{m}}+R_{S}} \\tag{7.80}\n\\end{equation*}\n$$\n\nassuming $\\lambda$ is zero.\nAs discussed in Chapter 5, it is feasible to use degeneration for bias point stability while eliminating its impact on small-signal performance via a bypass capacitor [Fig. 7.20(c)]. Unlike bipolar implementations, this does not change the CS stage's input impedance:\n\n$$\n\\begin{equation*}\nR_{\\text {in }}=R_{1} \\| R_{2} \\tag{7.81}\n\\end{equation*}\n$$\n\nbut enhances the voltage gain:\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{R_{1} \\| R_{2}}{R_{G}+R_{1} \\| R_{2}} g_{m} R_{D} \\tag{7.82}\n\\end{equation*}\n$$\n\nExample: Design the CS stage of Fig. 7.20(c) for a voltage gain of 5, an input impedance of $50 \\mathrm{k} \\Omega$, and a power budget of 5 mW. Assume $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}, \\lambda=0$, and $V_{D D}=1.8 \\mathrm{~V}$. Also, assume a 400 mV drop across $R_{S}$.\n\nSolution: The power budget and $V_{D D}=1.8 \\mathrm{~V}$ imply a maximum supply current of 2.78 mA. Initially, we allocate 2.7 mA to $M_{1}$ and the remaining $80 \\mu \\mathrm{~A}$ to $R_{1}$ and $R_{2}$. Consequently,\n\n$$\n\\begin{equation*}\nR_{S}=148 \\Omega \\tag{7.83}\n\\end{equation*}\n$$\n\nAs with typical design problems, the selection of $g_{m}$ and $R_{D}$ is somewhat flexible as long as $g_{m} R_{D}=5$. However, with $I_{D}$ known, we must ensure a reasonable $V_{G S}$, e.g., $V_{G S}=1 \\mathrm{~V}$. This choice results in\n\n$$\n\\begin{align*}\ng_{m} & =\\frac{2 I_{D}}{V_{G S}-V_{T H}}  \\tag{7.84}\\\\\n& =\\frac{1}{92.6 \\Omega} \\tag{7.85}\n\\end{align*}\n$$\n\nand thus\n\n$$\n\\begin{equation*}\nR_{D}=463 \\Omega \\tag{7.86}\n\\end{equation*}\n$$\n\nWriting\n\n$$\n\\begin{equation*}\nI_{D}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2} \\tag{7.87}\n\\end{equation*}\n$$\n\nyields\n\n$$\n\\begin{equation*}\n\\frac{W}{L}=216 \\tag{7.88}\n\\end{equation*}\n$$\n\nWith $V_{G S}=1 \\mathrm{~V}$ and a 400 mV drop across $R_{S}$, the gate voltage reaches 1.4 V, requiring that\n\n$$\n\\begin{equation*}\n\\frac{R_{2}}{R_{1}+R_{2}} V_{D D}=1.4 \\mathrm{~V} \\tag{7.89}\n\\end{equation*}\n$$\n\nwhich, along with $R_{i n}=R_{1} \\| R_{2}=50 \\mathrm{k} \\Omega$, results in\n\n$$\n\\begin{align*}\n& R_{1}=64.3 \\mathrm{k} \\Omega  \\tag{7.90}\\\\\n& R_{2}=225 \\mathrm{k} \\Omega . \\tag{7.91}\n\\end{align*}\n$$\n\nWe must now verify that $M_{1}$ operates in saturation. The drain voltage is $V_{D D}-I_{D} R_{D}=1.8 \\mathrm{~V}-1.25 \\mathrm{~V}=0.55 \\mathrm{~V}$. Since the gate voltage is 1.4 V, the gate-drain voltage difference exceeds $V_{T H}$, driving $M_{1}$ into the triode region!\n\nHow did our design process lead to this outcome? For the given $I_{D}$, we chose an excessively large $R_{D}$, i.e., an excessively small $g_{m}$ (since $g_{m} R_{D}=5$), even though $V_{G S}$ is reasonable. We must therefore increase $g_{m}$ to allow a lower $R_{D}$. For instance, if we halve $R_{D}$ and double $g_{m}$ by increasing $W / L$ by a factor of four:\n\n$$\n\\begin{align*}\n\\frac{W}{L} & =864  \\tag{7.92}\\\\\ng_{m} & =\\frac{1}{46.3 \\Omega} \\tag{7.93}\n\\end{align*}\n$$\n\nThe corresponding gate-source voltage from (7.84) is\n\n$$\n\\begin{equation*}\nV_{G S}=250 \\mathrm{mV} \\tag{7.94}\n\\end{equation*}\n$$\n\nyielding a gate voltage of 650 mV.\nIs $M_{1}$ in saturation? The drain voltage is $V_{D D}-R_{D} I_{D}=1.17 \\mathrm{~V}$, which is higher than the gate voltage minus $V_{T H}$. Thus, $M_{1}$ operates in saturation.\n\nExercise: Repeat the above example for a power budget of 3 mW and $V_{D D}=1.2 \\mathrm{~V}$."
},
{
    "text": "The impact of the straightforward biasing configuration illustrated in Fig. 7.1 is akin to that examined for the bipolar stage in Chapter 5. As depicted in Fig. 7.20(a), which includes an input coupling capacitor (treated as a short circuit), this circuit no longer presents an infinite input impedance:\n\n$$\n\\begin{equation*}\nR_{\\text {in }}=R_{1} \\| R_{2} \\tag{7.79}\n\\end{equation*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: g1}\nname: M1, type: NMOS, ports: {S: s1, D: Vout, G: g1}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a common-source (CS) amplifier featuring a biasing network, input coupling capacitor, and load resistor RD. The NMOS transistor M1 is used for amplification. R1 and R2 create a voltage divider for biasing M1's gate. The input signal is AC-coupled via C1. The output is measured across RD, and RS provides source degeneration for stability.\nimage_name:(b)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: RG, type: Resistor, value: RG, ports: {N1: Vin, N2: X}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g}\nname: R2, type: Resistor, value: R2, ports: {N1: g, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: S1, N2: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: X, Nn: g}\nname: M1, type: NMOS, ports: {S: S1, D: Vout, G: g}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with an additional gate resistor RG for biasing. The input is capacitively coupled through C1, and the output is derived from M1's drain. RS offers source degeneration, and RD serves as the load resistor.\nimage_name:(c)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: RG, type: Resistor, value: RG, ports: {N1: Vin, N2: x}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g}\nname: R2, type: Resistor, value: R2, ports: {N1: g, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: x, Nn: g}\nname: C2, type: Capacitor, value: C2, ports: {Np: s1, Nn: GND}\nname: M1, type: NMOS, ports: {S: s1, D: Vout, G: g}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit in diagram (c) is a common-source amplifier with an NMOS transistor (M1) and a bypass capacitor (C2) across RS for AC signals. The input is AC-coupled through C1, and the gate bias is set by R1 and R2. The output is taken from M1's drain.\n\nFigure 7.20 (a) CS stage with input coupling capacitor, (b) addition of gate resistance, (c) incorporation of bypass capacitor.\n\nConsequently, when the circuit is driven by a source with finite impedance [Fig. 7.20(b)], the voltage gain decreases to\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{R_{1} \\| R_{2}}{R_{G}+R_{1} \\| R_{2}} \\cdot \\frac{-R_{D}}{\\frac{1}{g_{m}}+R_{S}} \\tag{7.80}\n\\end{equation*}\n$$\n\nassuming $\\lambda$ is zero.\nAs discussed in Chapter 5, it is feasible to use degeneration for bias point stability while nullifying its impact on small-signal performance via a bypass capacitor [Fig. 7.20(c)]. Unlike bipolar implementations, this does not alter the CS stage's input impedance:\n\n$$\n\\begin{equation*}\nR_{\\text {in }}=R_{1} \\| R_{2} \\tag{7.81}\n\\end{equation*}\n$$\n\nbut enhances the voltage gain:\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{R_{1} \\| R_{2}}{R_{G}+R_{1} \\| R_{2}} g_{m} R_{D} \\tag{7.82}\n\\end{equation*}\n$$\n\nExample Design the CS stage of Fig. 7.20(c) for a voltage gain of 5, an input impedance of $50 \\mathrm{k} \\Omega$, and a power budget of 5 mW. Assume $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}, \\lambda=0$, and $V_{D D}=1.8 \\mathrm{~V}$. Also, assume a voltage drop of 400 mV across $R_{S}$.\n\nSolution The power budget combined with $V_{D D}=1.8 \\mathrm{~V}$ implies a maximum supply current of 2.78 mA. Initially, we allocate 2.7 mA to $M_{1}$ and the remaining $80 \\mu \\mathrm{~A}$ to $R_{1}$ and $R_{2}$. Consequently,\n\n$$\n\\begin{equation*}\nR_{S}=148 \\Omega \\tag{7.83}\n\\end{equation*}\n$$\n\nIn typical design scenarios, the selection of $g_{m}$ and $R_{D}$ is somewhat flexible as long as $g_{m} R_{D}=5$. However, with $I_{D}$ known, we must ensure a reasonable $V_{G S}$, e.g., $V_{G S}=1 \\mathrm{~V}$. This choice results in\n\n$$\n\\begin{align*}\ng_{m} & =\\frac{2 I_{D}}{V_{G S}-V_{T H}}  \\tag{7.84}\\\\\n& =\\frac{1}{92.6 \\Omega} \\tag{7.85}\n\\end{align*}\n$$\n\nand thus\n\n$$\n\\begin{equation*}\nR_{D}=463 \\Omega \\tag{7.86}\n\\end{equation*}\n$$\n\nFrom\n\n$$\n\\begin{equation*}\nI_{D}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2} \\tag{7.87}\n\\end{equation*}\n$$\n\nwe obtain\n\n$$\n\\begin{equation*}\n\\frac{W}{L}=216 \\tag{7.88}\n\\end{equation*}\n$$\n\nWith $V_{G S}=1 \\mathrm{~V}$ and a $400-\\mathrm{mV}$ drop across $R_{S}$, the gate voltage reaches 1.4 V, necessitating that\n\n$$\n\\begin{equation*}\n\\frac{R_{2}}{R_{1}+R_{2}} V_{D D}=1.4 \\mathrm{~V} \\tag{7.89}\n\\end{equation*}\n$$\n\nwhich, along with $R_{i n}=R_{1} \\| R_{2}=50 \\mathrm{k} \\Omega$, gives\n\n$$\n\\begin{align*}\n& R_{1}=64.3 \\mathrm{k} \\Omega  \\tag{7.90}\\\\\n& R_{2}=225 \\mathrm{k} \\Omega . \\tag{7.91}\n\\end{align*}\n$$\n\nWe must now verify that $M_{1}$ operates in saturation. The drain voltage is $V_{D D}-I_{D} R_{D}=1.8 \\mathrm{~V}-1.25 \\mathrm{~V}=0.55 \\mathrm{~V}$. Since the gate voltage is 1.4 V, the gate-drain voltage difference exceeds $V_{T H}$, pushing $M_{1}$ into the triode region!\n\nHow did our design approach result in this? For the given $I_{D}$, we chose an excessively large $R_{D}$, i.e., an excessively small $g_{m}$ (since $g_{m} R_{D}=5$), even though $V_{G S}$ is reasonable. We must therefore increase $g_{m}$ to permit a lower $R_{D}$. For instance, if we halve $R_{D}$ and double $g_{m}$ by quadrupling $W / L$:\n\n$$\n\\begin{align*}\n\\frac{W}{L} & =864  \\tag{7.92}\\\\\ng_{m} & =\\frac{1}{46.3 \\Omega} \\tag{7.93}\n\\end{align*}\n$$\n\nThe corresponding gate-source voltage from (7.84) is\n\n$$\n\\begin{equation*}\nV_{G S}=250 \\mathrm{mV} \\tag{7.94}\n\\end{equation*}\n$$\n\nyielding a gate voltage of 650 mV.\nIs $M_{1}$ in saturation? The drain voltage is $V_{D D}-R_{D} I_{D}=1.17 \\mathrm{~V}$, which is higher than the gate voltage minus $V_{T H}$. Thus, $M_{1}$ operates in saturation.\n\nExercise Repeat the above example for a power budget of 3 mW and $V_{D D}=1.2 \\mathrm{~V}$."
},
{
    "text": "The impact of the straightforward biasing configuration illustrated in Fig. 7.1 parallels that examined for the bipolar stage in Chapter 5. As depicted in Fig. 7.20(a), which includes an input coupling capacitor (treated as a short circuit), this circuit no longer presents an infinite input impedance:\n\n$$\n\\begin{equation*}\nR_{\\text {in }}=R_{1} \\| R_{2} \\tag{7.79}\n\\end{equation*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: g1}\nname: M1, type: NMOS, ports: {S: s1, D: Vout, G: g1}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a common-source (CS) amplifier featuring a biasing network, input coupling capacitor, and load resistor RD. The NMOS transistor M1 is employed for amplification. R1 and R2 constitute a voltage divider for biasing M1's gate. The input signal is AC-coupled via C1. The output is derived across RD, with RS providing source degeneration for stability.\nimage_name:(b)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: RG, type: Resistor, value: RG, ports: {N1: Vin, N2: X}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g}\nname: R2, type: Resistor, value: R2, ports: {N1: g, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: S1, N2: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: X, Nn: g}\nname: M1, type: NMOS, ports: {S: S1, D: Vout, G: g}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with an additional gate resistor RG for biasing. The input is capacitively coupled through C1, and the output is taken from M1's drain. RS offers source degeneration, while RD serves as the load resistor.\nimage_name:(c)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: RG, type: Resistor, value: RG, ports: {N1: Vin, N2: x}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g}\nname: R2, type: Resistor, value: R2, ports: {N1: g, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: x, Nn: g}\nname: C2, type: Capacitor, value: C2, ports: {Np: s1, Nn: GND}\nname: M1, type: NMOS, ports: {S: s1, D: Vout, G: g}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit diagram (c) depicts a common-source amplifier with an NMOS transistor (M1) and a bypass capacitor (C2) connected across RS for AC signals. The input is AC-coupled through C1, and the gate bias is established by R1 and R2. The output is obtained from M1's drain.\n\nFigure 7.20 (a) CS stage with input coupling capacitor, (b) addition of gate resistance, (c) incorporation of bypass capacitor.\n\nConsequently, when the circuit is driven by a finite source impedance [Fig. 7.20(b)], the voltage gain decreases to\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{R_{1} \\| R_{2}}{R_{G}+R_{1} \\| R_{2}} \\cdot \\frac{-R_{D}}{\\frac{1}{g_{m}}+R_{S}} \\tag{7.80}\n\\end{equation*}\n$$\n\nassuming $\\lambda$ is zero.\nAs discussed in Chapter 5, it is feasible to use degeneration for bias point stability while nullifying its impact on small-signal performance via a bypass capacitor [Fig. 7.20(c)]. Unlike bipolar implementations, this does not alter the CS stage's input impedance:\n\n$$\n\\begin{equation*}\nR_{\\text {in }}=R_{1} \\| R_{2} \\tag{7.81}\n\\end{equation*}\n$$\n\nbut enhances the voltage gain:\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{R_{1} \\| R_{2}}{R_{G}+R_{1} \\| R_{2}} g_{m} R_{D} \\tag{7.82}\n\\end{equation*}\n$$\n\nExample Design the CS stage of Fig. 7.20(c) for a voltage gain of 5, an input impedance of $50 \\mathrm{k} \\Omega$, and a power budget of 5 mW. Assume $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}, \\lambda=0$, and $V_{D D}=1.8 \\mathrm{~V}$. Also, assume a voltage drop of 400 mV across $R_{S}$.\n\nSolution The power budget, combined with $V_{D D}=1.8 \\mathrm{~V}$, indicates a maximum supply current of 2.78 mA. Initially, we allocate 2.7 mA to $M_{1}$ and the remaining $80 \\mu \\mathrm{~A}$ to $R_{1}$ and $R_{2}$. Consequently,\n\n$$\n\\begin{equation*}\nR_{S}=148 \\Omega \\tag{7.83}\n\\end{equation*}\n$$\n\nAs with typical design challenges, the selection of $g_{m}$ and $R_{D}$ offers some flexibility, provided $g_{m} R_{D}=5$. However, with $I_{D}$ known, we must ensure a reasonable $V_{G S}$, e.g., $V_{G S}=1 \\mathrm{~V}$. This choice results in\n\n$$\n\\begin{align*}\ng_{m} & =\\frac{2 I_{D}}{V_{G S}-V_{T H}}  \\tag{7.84}\\\\\n& =\\frac{1}{92.6 \\Omega} \\tag{7.85}\n\\end{align*}\n$$\n\nand thus\n\n$$\n\\begin{equation*}\nR_{D}=463 \\Omega \\tag{7.86}\n\\end{equation*}\n$$\n\nUsing\n\n$$\n\\begin{equation*}\nI_{D}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2} \\tag{7.87}\n\\end{equation*}\n$$\n\nyields\n\n$$\n\\begin{equation*}\n\\frac{W}{L}=216 \\tag{7.88}\n\\end{equation*}\n$$\n\nWith $V_{G S}=1 \\mathrm{~V}$ and a 400-mV drop across $R_{S}$, the gate voltage reaches 1.4 V, necessitating that\n\n$$\n\\begin{equation*}\n\\frac{R_{2}}{R_{1}+R_{2}} V_{D D}=1.4 \\mathrm{~V} \\tag{7.89}\n\\end{equation*}\n$$\n\nwhich, along with $R_{i n}=R_{1} \\| R_{2}=50 \\mathrm{k} \\Omega$, results in\n\n$$\n\\begin{align*}\n& R_{1}=64.3 \\mathrm{k} \\Omega  \\tag{7.90}\\\\\n& R_{2}=225 \\mathrm{k} \\Omega . \\tag{7.91}\n\\end{align*}\n$$\n\nWe must now verify that $M_{1}$ operates in saturation. The drain voltage is $V_{D D}-I_{D} R_{D}=1.8 \\mathrm{~V}-1.25 \\mathrm{~V}=0.55 \\mathrm{~V}$. Since the gate voltage is 1.4 V, the gate-drain voltage difference exceeds $V_{T H}$, pushing $M_{1}$ into the triode region!\n\nHow did our design approach lead to this outcome? For the given $I_{D}$, we chose an excessively large $R_{D}$, i.e., an excessively small $g_{m}$ (since $g_{m} R_{D}=5$), even though $V_{G S}$ is reasonable. We must therefore increase $g_{m}$ to permit a lower $R_{D}$. For instance, if we halve $R_{D}$ and double $g_{m}$ by quadrupling $W / L$:\n\n$$\n\\begin{align*}\n\\frac{W}{L} & =864  \\tag{7.92}\\\\\ng_{m} & =\\frac{1}{46.3 \\Omega} \\tag{7.93}\n\\end{align*}\n$$\n\nThe corresponding gate-source voltage from (7.84) is\n\n$$\n\\begin{equation*}\nV_{G S}=250 \\mathrm{mV} \\tag{7.94}\n\\end{equation*}\n$$\n\nyielding a gate voltage of 650 mV.\nIs $M_{1}$ in saturation? The drain voltage is $V_{D D}-R_{D} I_{D}=1.17 \\mathrm{~V}$, a value higher than the gate voltage minus $V_{T H}$. Thus, $M_{1}$ operates in saturation.\n\nExercise Repeat the above example for a power budget of 3 mW and $V_{D D}=1.2 \\mathrm{~V}$."
},
{
    "text": "The impact of the straightforward biasing network depicted in Fig. 7.1 is akin to that examined for the bipolar stage in Chapter 5. Illustrated in Fig. 7.20(a) along with an input coupling capacitor (assumed to be a short circuit), this circuit no longer presents an infinite input impedance:\n\n$$\n\\begin{equation*}\nR_{\\text {in }}=R_{1} \\| R_{2} \\tag{7.79}\n\\end{equation*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: g1}\nname: M1, type: NMOS, ports: {S: s1, D: Vout, G: g1}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a common-source (CS) amplifier with a biasing network, input coupling capacitor, and load resistor RD. The NMOS transistor M1 is used for amplification. R1 and R2 form a voltage divider for biasing M1's gate. The input signal is AC-coupled via C1. The output is taken across RD, and RS provides source degeneration for stability.\nimage_name:(b)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: RG, type: Resistor, value: RG, ports: {N1: Vin, N2: X}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g}\nname: R2, type: Resistor, value: R2, ports: {N1: g, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: S1, N2: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: X, Nn: g}\nname: M1, type: NMOS, ports: {S: S1, D: Vout, G: g}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with an added gate resistor RG for biasing. The input is capacitively coupled through C1, and the output is taken from M1's drain. RS offers source degeneration, and RD serves as the load resistor.\nimage_name:(c)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: RG, type: Resistor, value: RG, ports: {N1: Vin, N2: x}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g}\nname: R2, type: Resistor, value: R2, ports: {N1: g, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: x, Nn: g}\nname: C2, type: Capacitor, value: C2, ports: {Np: s1, Nn: GND}\nname: M1, type: NMOS, ports: {S: s1, D: Vout, G: g}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit diagram (c) shows a common-source amplifier with an NMOS transistor (M1) and a bypass capacitor (C2) across RS for AC signals. The input is AC-coupled through C1, and the gate bias is set by R1 and R2. The output is taken from M1's drain.\n\nFigure 7.20 (a) CS stage with input coupling capacitor, (b) addition of gate resistance, (c) incorporation of bypass capacitor.\n\nThus, when the circuit is driven by a finite source impedance [Fig. 7.20(b)], the voltage gain decreases to\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{R_{1} \\| R_{2}}{R_{G}+R_{1} \\| R_{2}} \\cdot \\frac{-R_{D}}{\\frac{1}{g_{m}}+R_{S}} \\tag{7.80}\n\\end{equation*}\n$$\n\nassuming $\\lambda$ is zero.\nAs discussed in Chapter 5, it is feasible to use degeneration for bias point stability while eliminating its impact on small-signal performance via a bypass capacitor [Fig. 7.20(c)]. Unlike the bipolar implementation, this does not alter the CS stage's input impedance:\n\n$$\n\\begin{equation*}\nR_{\\text {in }}=R_{1} \\| R_{2} \\tag{7.81}\n\\end{equation*}\n$$\n\nbut enhances the voltage gain:\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{R_{1} \\| R_{2}}{R_{G}+R_{1} \\| R_{2}} g_{m} R_{D} \\tag{7.82}\n\\end{equation*}\n$$\n\nExample: Design the CS stage of Fig. 7.20(c) for a voltage gain of 5, an input impedance of $50 \\mathrm{k} \\Omega$, and a power budget of 5 mW. Assume $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}, \\lambda=0$, and $V_{D D}=1.8 \\mathrm{~V}$. Also, assume a voltage drop of 400 mV across $R_{S}$.\n\nSolution: The power budget along with $V_{D D}=1.8 \\mathrm{~V}$ indicates a maximum supply current of 2.78 mA. Initially, we allocate 2.7 mA to $M_{1}$ and the remaining $80 \\mu \\mathrm{~A}$ to $R_{1}$ and $R_{2}$. Consequently,\n\n$$\n\\begin{equation*}\nR_{S}=148 \\Omega \\tag{7.83}\n\\end{equation*}\n$$\n\nIn typical design scenarios, the choice of $g_{m}$ and $R_{D}$ is flexible as long as $g_{m} R_{D}=5$. However, with $I_{D}$ known, we must ensure a reasonable $V_{G S}$, e.g., $V_{G S}=1 \\mathrm{~V}$. This choice results in\n\n$$\n\\begin{align*}\ng_{m} & =\\frac{2 I_{D}}{V_{G S}-V_{T H}}  \\tag{7.84}\\\\\n& =\\frac{1}{92.6 \\Omega} \\tag{7.85}\n\\end{align*}\n$$\n\nand thus\n\n$$\n\\begin{equation*}\nR_{D}=463 \\Omega \\tag{7.86}\n\\end{equation*}\n$$\n\nFrom\n\n$$\n\\begin{equation*}\nI_{D}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2} \\tag{7.87}\n\\end{equation*}\n$$\n\nwe derive\n\n$$\n\\begin{equation*}\n\\frac{W}{L}=216 \\tag{7.88}\n\\end{equation*}\n$$\n\nWith $V_{G S}=1 \\mathrm{~V}$ and a $400-\\mathrm{mV}$ drop across $R_{S}$, the gate voltage reaches 1.4 V, necessitating that\n\n$$\n\\begin{equation*}\n\\frac{R_{2}}{R_{1}+R_{2}} V_{D D}=1.4 \\mathrm{~V} \\tag{7.89}\n\\end{equation*}\n$$\n\nwhich, along with $R_{i n}=R_{1} \\| R_{2}=50 \\mathrm{k} \\Omega$, gives\n\n$$\n\\begin{align*}\n& R_{1}=64.3 \\mathrm{k} \\Omega  \\tag{7.90}\\\\\n& R_{2}=225 \\mathrm{k} \\Omega . \\tag{7.91}\n\\end{align*}\n$$\n\nWe must now verify that $M_{1}$ operates in saturation. The drain voltage is $V_{D D}-I_{D} R_{D}=1.8 \\mathrm{~V}-1.25 \\mathrm{~V}=0.55 \\mathrm{~V}$. Since the gate voltage is 1.4 V, the gate-drain voltage difference exceeds $V_{T H}$, pushing $M_{1}$ into the triode region!\n\nHow did our design approach lead to this outcome? For the given $I_{D}$, we chose an excessively large $R_{D}$, i.e., an excessively small $g_{m}$ (since $g_{m} R_{D}=5$), even though $V_{G S}$ is reasonable. We must therefore increase $g_{m}$ to permit a lower $R_{D}$. For instance, if we halve $R_{D}$ and double $g_{m}$ by increasing $W / L$ by a factor of four:\n\n$$\n\\begin{align*}\n\\frac{W}{L} & =864  \\tag{7.92}\\\\\ng_{m} & =\\frac{1}{46.3 \\Omega} \\tag{7.93}\n\\end{align*}\n$$\n\nThe corresponding gate-source voltage from (7.84) is\n\n$$\n\\begin{equation*}\nV_{G S}=250 \\mathrm{mV} \\tag{7.94}\n\\end{equation*}\n$$\n\nyielding a gate voltage of 650 mV.\nIs $M_{1}$ in saturation? The drain voltage is $V_{D D}-R_{D} I_{D}=1.17 \\mathrm{~V}$, which is higher than the gate voltage minus $V_{T H}$. Thus, $M_{1}$ operates in saturation.\n\nExercise: Repeat the above example for a power budget of 3 mW and $V_{D D}=1.2 \\mathrm{~V}$."
},
{
    "text": "The impact of the straightforward biasing configuration depicted in Fig. 7.1 is akin to that discussed for the bipolar stage in Chapter 5. Illustrated in Fig. 7.20(a) along with an input coupling capacitor (treated as a short circuit), this circuit no longer presents an infinite input impedance:\n\n$$\n\\begin{equation*}\nR_{\\text {in }}=R_{1} \\| R_{2} \\tag{7.79}\n\\end{equation*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: g1}\nname: M1, type: NMOS, ports: {S: s1, D: Vout, G: g1}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a common-source (CS) amplifier featuring a biasing network, input coupling capacitor, and load resistor RD. The NMOS transistor M1 is used for amplification. R1 and R2 create a voltage divider for biasing M1's gate. The input signal is AC-coupled via C1. The output is measured across RD, and RS provides source degeneration for stability.\nimage_name:(b)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: RG, type: Resistor, value: RG, ports: {N1: Vin, N2: X}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g}\nname: R2, type: Resistor, value: R2, ports: {N1: g, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: S1, N2: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: X, Nn: g}\nname: M1, type: NMOS, ports: {S: S1, D: Vout, G: g}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with an added gate resistor RG for biasing. The input is capacitively coupled through C1, and the output is derived from M1's drain. RS offers source degeneration, and RD serves as the load resistor.\nimage_name:(c)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: RG, type: Resistor, value: RG, ports: {N1: Vin, N2: x}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g}\nname: R2, type: Resistor, value: R2, ports: {N1: g, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: x, Nn: g}\nname: C2, type: Capacitor, value: C2, ports: {Np: s1, Nn: GND}\nname: M1, type: NMOS, ports: {S: s1, D: Vout, G: g}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit diagram (c) shows a common-source amplifier with an NMOS transistor (M1) and a bypass capacitor (C2) across RS for AC signals. The input is AC-coupled through C1, and the gate bias is set by R1 and R2. The output is taken from M1's drain.\n\nFigure 7.20 (a) CS stage with input coupling capacitor, (b) addition of gate resistance, (c) incorporation of bypass capacitor.\n\nThus, when the circuit is driven by a finite source impedance [Fig. 7.20(b)], the voltage gain drops to\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{R_{1} \\| R_{2}}{R_{G}+R_{1} \\| R_{2}} \\cdot \\frac{-R_{D}}{\\frac{1}{g_{m}}+R_{S}} \\tag{7.80}\n\\end{equation*}\n$$\n\nassuming $\\lambda$ is zero.\nAs discussed in Chapter 5, it is feasible to use degeneration for bias point stability while negating its impact on small-signal performance via a bypass capacitor [Fig. 7.20(c)]. Unlike bipolar implementations, this does not alter the CS stage's input impedance:\n\n$$\n\\begin{equation*}\nR_{\\text {in }}=R_{1} \\| R_{2} \\tag{7.81}\n\\end{equation*}\n$$\n\nbut enhances the voltage gain:\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{R_{1} \\| R_{2}}{R_{G}+R_{1} \\| R_{2}} g_{m} R_{D} \\tag{7.82}\n\\end{equation*}\n$$\n\nExample Design the CS stage of Fig. 7.20(c) for a voltage gain of 5, an input impedance of $50 \\mathrm{k} \\Omega$, and a power budget of 5 mW. Assume $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}, \\lambda=0$, and $V_{D D}=1.8 \\mathrm{~V}$. Also, assume a voltage drop of 400 mV across $R_{S}$.\n\nSolution The power budget combined with $V_{D D}=1.8 \\mathrm{~V}$ allows a maximum supply current of 2.78 mA. Initially, we allocate 2.7 mA to $M_{1}$ and the remaining $80 \\mu \\mathrm{~A}$ to $R_{1}$ and $R_{2}$. Consequently,\n\n$$\n\\begin{equation*}\nR_{S}=148 \\Omega \\tag{7.83}\n\\end{equation*}\n$$\n\nIn typical design scenarios, the choice of $g_{m}$ and $R_{D}$ is flexible as long as $g_{m} R_{D}=5$. However, with $I_{D}$ known, we must ensure a reasonable $V_{G S}$, e.g., $V_{G S}=1 \\mathrm{~V}$. This choice results in\n\n$$\n\\begin{align*}\ng_{m} & =\\frac{2 I_{D}}{V_{G S}-V_{T H}}  \\tag{7.84}\\\\\n& =\\frac{1}{92.6 \\Omega} \\tag{7.85}\n\\end{align*}\n$$\n\nand thus\n\n$$\n\\begin{equation*}\nR_{D}=463 \\Omega \\tag{7.86}\n\\end{equation*}\n$$\n\nUsing\n\n$$\n\\begin{equation*}\nI_{D}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2} \\tag{7.87}\n\\end{equation*}\n$$\n\nyields\n\n$$\n\\begin{equation*}\n\\frac{W}{L}=216 \\tag{7.88}\n\\end{equation*}\n$$\n\nWith $V_{G S}=1 \\mathrm{~V}$ and a $400-\\mathrm{mV}$ drop across $R_{S}$, the gate voltage reaches 1.4 V, necessitating that\n\n$$\n\\begin{equation*}\n\\frac{R_{2}}{R_{1}+R_{2}} V_{D D}=1.4 \\mathrm{~V} \\tag{7.89}\n\\end{equation*}\n$$\n\nwhich, along with $R_{i n}=R_{1} \\| R_{2}=50 \\mathrm{k} \\Omega$, gives\n\n$$\n\\begin{align*}\n& R_{1}=64.3 \\mathrm{k} \\Omega  \\tag{7.90}\\\\\n& R_{2}=225 \\mathrm{k} \\Omega . \\tag{7.91}\n\\end{align*}\n$$\n\nWe must now verify that $M_{1}$ operates in saturation. The drain voltage is $V_{D D}-I_{D} R_{D}=1.8 \\mathrm{~V}-1.25 \\mathrm{~V}=0.55 \\mathrm{~V}$. Since the gate voltage is 1.4 V, the gate-drain voltage difference exceeds $V_{T H}$, placing $M_{1}$ in the triode region!\n\nHow did our design process result in this outcome? For the given $I_{D}$, we selected an excessively large $R_{D}$, i.e., an excessively small $g_{m}$ (since $g_{m} R_{D}=5$), even though $V_{G S}$ is reasonable. We must therefore increase $g_{m}$ to permit a lower $R_{D}$. For instance, if we halve $R_{D}$ and double $g_{m}$ by quadrupling $W / L$:\n\n$$\n\\begin{align*}\n\\frac{W}{L} & =864  \\tag{7.92}\\\\\ng_{m} & =\\frac{1}{46.3 \\Omega} \\tag{7.93}\n\\end{align*}\n$$\n\nThe corresponding gate-source voltage from (7.84) is\n\n$$\n\\begin{equation*}\nV_{G S}=250 \\mathrm{mV} \\tag{7.94}\n\\end{equation*}\n$$\n\nyielding a gate voltage of 650 mV.\nIs $M_{1}$ in saturation? The drain voltage is $V_{D D}-R_{D} I_{D}=1.17 \\mathrm{~V}$, which is higher than the gate voltage minus $V_{T H}$. Thus, $M_{1}$ operates in saturation.\n\nExercise Repeat the above example for a power budget of 3 mW and $V_{D D}=1.2 \\mathrm{~V}$."
},
{
    "text": "The impact of the straightforward biasing network illustrated in Fig. 7.1 is akin to that analyzed for the bipolar stage in Chapter 5. As depicted in Fig. 7.20(a), along with an input coupling capacitor (assumed to be a short circuit), this circuit no longer presents an infinite input impedance:\n\n$$\n\\begin{equation*}\nR_{\\text {in }}=R_{1} \\| R_{2} \\tag{7.79}\n\\end{equation*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: g1}\nname: M1, type: NMOS, ports: {S: s1, D: Vout, G: g1}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a common-source (CS) amplifier featuring a biasing network, an input coupling capacitor, and a load resistor RD. The NMOS transistor M1 is used for amplification. R1 and R2 form a voltage divider for biasing M1's gate. The input signal is AC-coupled via C1. The output is taken across RD, with RS providing source degeneration for stability.\nimage_name:(b)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: RG, type: Resistor, value: RG, ports: {N1: Vin, N2: X}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g}\nname: R2, type: Resistor, value: R2, ports: {N1: g, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: S1, N2: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: X, Nn: g}\nname: M1, type: NMOS, ports: {S: S1, D: Vout, G: g}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with an added gate resistor RG for biasing. The input is capacitively coupled through C1, and the output is taken from M1's drain. RS offers source degeneration, and RD serves as the load resistor.\nimage_name:(c)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: RG, type: Resistor, value: RG, ports: {N1: Vin, N2: x}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g}\nname: R2, type: Resistor, value: R2, ports: {N1: g, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: x, Nn: g}\nname: C2, type: Capacitor, value: C2, ports: {Np: s1, Nn: GND}\nname: M1, type: NMOS, ports: {S: s1, D: Vout, G: g}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit in diagram (c) is a common-source amplifier with an NMOS transistor (M1) and a bypass capacitor (C2) across RS for AC signals. The input is AC-coupled through C1, and the gate bias is set by R1 and R2. The output is obtained from M1's drain.\n\nFigure 7.20 (a) CS stage with input coupling capacitor, (b) addition of gate resistance, (c) incorporation of bypass capacitor.\n\nThus, when the circuit is driven by a finite source impedance [Fig. 7.20(b)], the voltage gain drops to\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{R_{1} \\| R_{2}}{R_{G}+R_{1} \\| R_{2}} \\cdot \\frac{-R_{D}}{\\frac{1}{g_{m}}+R_{S}} \\tag{7.80}\n\\end{equation*}\n$$\n\nassuming $\\lambda$ is zero.\nAs discussed in Chapter 5, it is feasible to use degeneration for bias point stability while nullifying its impact on small-signal performance via a bypass capacitor [Fig. 7.20(c)]. Unlike bipolar implementations, this does not alter the CS stage's input impedance:\n\n$$\n\\begin{equation*}\nR_{\\text {in }}=R_{1} \\| R_{2} \\tag{7.81}\n\\end{equation*}\n$$\n\nbut enhances the voltage gain:\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{R_{1} \\| R_{2}}{R_{G}+R_{1} \\| R_{2}} g_{m} R_{D} \\tag{7.82}\n\\end{equation*}\n$$\n\nExample: Design the CS stage of Fig. 7.20(c) for a voltage gain of 5, an input impedance of $50 \\mathrm{k} \\Omega$, and a power budget of 5 mW. Assume $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}, \\lambda=0$, and $V_{D D}=1.8 \\mathrm{~V}$. Also, assume a 400 mV drop across $R_{S}$.\n\nSolution: The power budget, combined with $V_{D D}=1.8 \\mathrm{~V}$, implies a maximum supply current of 2.78 mA. Initially, we allocate 2.7 mA to $M_{1}$ and the remaining $80 \\mu \\mathrm{~A}$ to $R_{1}$ and $R_{2}$. Consequently,\n\n$$\n\\begin{equation*}\nR_{S}=148 \\Omega \\tag{7.83}\n\\end{equation*}\n$$\n\nAs with typical design issues, the choice of $g_{m}$ and $R_{D}$ is somewhat flexible as long as $g_{m} R_{D}=5$. However, with $I_{D}$ known, we must ensure a reasonable $V_{G S}$, e.g., $V_{G S}=1 \\mathrm{~V}$. This choice results in\n\n$$\n\\begin{align*}\ng_{m} & =\\frac{2 I_{D}}{V_{G S}-V_{T H}}  \\tag{7.84}\\\\\n& =\\frac{1}{92.6 \\Omega} \\tag{7.85}\n\\end{align*}\n$$\n\nand thus\n\n$$\n\\begin{equation*}\nR_{D}=463 \\Omega \\tag{7.86}\n\\end{equation*}\n$$\n\nWriting\n\n$$\n\\begin{equation*}\nI_{D}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2} \\tag{7.87}\n\\end{equation*}\n$$\n\nyields\n\n$$\n\\begin{equation*}\n\\frac{W}{L}=216 \\tag{7.88}\n\\end{equation*}\n$$\n\nWith $V_{G S}=1 \\mathrm{~V}$ and a 400 mV drop across $R_{S}$, the gate voltage reaches 1.4 V, necessitating that\n\n$$\n\\begin{equation*}\n\\frac{R_{2}}{R_{1}+R_{2}} V_{D D}=1.4 \\mathrm{~V} \\tag{7.89}\n\\end{equation*}\n$$\n\nwhich, along with $R_{i n}=R_{1} \\| R_{2}=50 \\mathrm{k} \\Omega$, results in\n\n$$\n\\begin{align*}\n& R_{1}=64.3 \\mathrm{k} \\Omega  \\tag{7.90}\\\\\n& R_{2}=225 \\mathrm{k} \\Omega . \\tag{7.91}\n\\end{align*}\n$$\n\nWe must now verify that $M_{1}$ operates in saturation. The drain voltage is $V_{D D}-I_{D} R_{D}=1.8 \\mathrm{~V}-1.25 \\mathrm{~V}=0.55 \\mathrm{~V}$. Since the gate voltage is 1.4 V, the gate-drain voltage difference exceeds $V_{T H}$, pushing $M_{1}$ into the triode region!\n\nHow did our design approach lead to this outcome? For the given $I_{D}$, we chose an excessively large $R_{D}$, i.e., an excessively small $g_{m}$ (since $g_{m} R_{D}=5$), even though $V_{G S}$ is reasonable. We must therefore increase $g_{m}$ to allow for a lower $R_{D}$. For instance, if we halve $R_{D}$ and double $g_{m}$ by increasing $W / L$ by a factor of four:\n\n$$\n\\begin{align*}\n\\frac{W}{L} & =864  \\tag{7.92}\\\\\ng_{m} & =\\frac{1}{46.3 \\Omega} \\tag{7.93}\n\\end{align*}\n$$\n\nThe corresponding gate-source voltage from (7.84) is\n\n$$\n\\begin{equation*}\nV_{G S}=250 \\mathrm{mV} \\tag{7.94}\n\\end{equation*}\n$$\n\nyielding a gate voltage of 650 mV.\nIs $M_{1}$ in saturation? The drain voltage is $V_{D D}-R_{D} I_{D}=1.17 \\mathrm{~V}$, which is higher than the gate voltage minus $V_{T H}$. Thus, $M_{1}$ operates in saturation.\n\nExercise: Repeat the above example for a power budget of 3 mW and $V_{D D}=1.2 \\mathrm{~V}$."
},
{
    "text": "The impact of the straightforward biasing network depicted in Fig. 7.1 resembles that analyzed for the bipolar stage in Chapter 5. Illustrated in Fig. 7.20(a) alongside an input coupling capacitor (assumed to be a short circuit), this circuit no longer presents an infinite input impedance:\n\n$$\n\\begin{equation*}\nR_{\\text {in }}=R_{1} \\| R_{2} \\tag{7.79}\n\\end{equation*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: g1}\nname: M1, type: NMOS, ports: {S: s1, D: Vout, G: g1}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:This circuit is a common-source (CS) amplifier featuring a biasing network, an input coupling capacitor, and a load resistor RD. The NMOS transistor M1 is employed for amplification. R1 and R2 create a voltage divider for biasing M1's gate. The input signal is AC-coupled via C1. The output is measured across RD, and RS provides source degeneration for stability.\nimage_name:(b)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: RG, type: Resistor, value: RG, ports: {N1: Vin, N2: X}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g}\nname: R2, type: Resistor, value: R2, ports: {N1: g, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: S1, N2: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: X, Nn: g}\nname: M1, type: NMOS, ports: {S: S1, D: Vout, G: g}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:This circuit is a common-source NMOS amplifier with an additional gate resistor RG for biasing. The input is capacitively coupled through C1, and the output is derived from M1's drain. RS offers source degeneration, and RD serves as the load resistor.\nimage_name:(c)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: RG, type: Resistor, value: RG, ports: {N1: Vin, N2: x}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g}\nname: R2, type: Resistor, value: R2, ports: {N1: g, N2: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: C1, type: Capacitor, value: C1, ports: {Np: x, Nn: g}\nname: C2, type: Capacitor, value: C2, ports: {Np: s1, Nn: GND}\nname: M1, type: NMOS, ports: {S: s1, D: Vout, G: g}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit diagram (c) shows a common-source amplifier with an NMOS transistor (M1) and a bypass capacitor (C2) connected across RS for AC signals. The input is AC-coupled through C1, and the gate bias is set by R1 and R2. The output is taken from M1's drain.\n\nFigure 7.20 (a) CS stage with input coupling capacitor, (b) addition of gate resistance, (c) incorporation of bypass capacitor.\n\nThus, when the circuit is driven by a finite source impedance [Fig. 7.20(b)], the voltage gain decreases to\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{R_{1} \\| R_{2}}{R_{G}+R_{1} \\| R_{2}} \\cdot \\frac{-R_{D}}{\\frac{1}{g_{m}}+R_{S}} \\tag{7.80}\n\\end{equation*}\n$$\n\nassuming $\\lambda$ is zero.\nAs discussed in Chapter 5, it is feasible to use degeneration for bias point stability while nullifying its impact on small-signal performance via a bypass capacitor [Fig. 7.20(c)]. Unlike bipolar implementations, this does not alter the CS stage's input impedance:\n\n$$\n\\begin{equation*}\nR_{\\text {in }}=R_{1} \\| R_{2} \\tag{7.81}\n\\end{equation*}\n$$\n\nbut enhances the voltage gain:\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{R_{1} \\| R_{2}}{R_{G}+R_{1} \\| R_{2}} g_{m} R_{D} \\tag{7.82}\n\\end{equation*}\n$$\n\nExample: Design the CS stage of Fig. 7.20(c) for a voltage gain of 5, an input impedance of $50 \\mathrm{k} \\Omega$, and a power budget of 5 mW. Assume $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}, \\lambda=0$, and $V_{D D}=1.8 \\mathrm{~V}$. Also, assume a 400 mV drop across $R_{S}$.\n\nSolution: The power budget and $V_{D D}=1.8 \\mathrm{~V}$ imply a maximum supply current of 2.78 mA. Initially, we allocate 2.7 mA to $M_{1}$ and the remaining 80 $\\mu \\mathrm{~A}$ to $R_{1}$ and $R_{2}$. Consequently,\n\n$$\n\\begin{equation*}\nR_{S}=148 \\Omega \\tag{7.83}\n\\end{equation*}\n$$\n\nAs with typical design issues, the selection of $g_{m}$ and $R_{D}$ is somewhat flexible as long as $g_{m} R_{D}=5$. However, with $I_{D}$ known, we must ensure a reasonable $V_{G S}$, e.g., $V_{G S}=1 \\mathrm{~V}$. This choice results in\n\n$$\n\\begin{align*}\ng_{m} & =\\frac{2 I_{D}}{V_{G S}-V_{T H}}  \\tag{7.84}\\\\\n& =\\frac{1}{92.6 \\Omega} \\tag{7.85}\n\\end{align*}\n$$\n\nand thus\n\n$$\n\\begin{equation*}\nR_{D}=463 \\Omega \\tag{7.86}\n\\end{equation*}\n$$\n\nBy writing\n\n$$\n\\begin{equation*}\nI_{D}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2} \\tag{7.87}\n\\end{equation*}\n$$\n\nwe find\n\n$$\n\\begin{equation*}\n\\frac{W}{L}=216 \\tag{7.88}\n\\end{equation*}\n$$\n\nWith $V_{G S}=1 \\mathrm{~V}$ and a 400 mV drop across $R_{S}$, the gate voltage reaches 1.4 V, necessitating that\n\n$$\n\\begin{equation*}\n\\frac{R_{2}}{R_{1}+R_{2}} V_{D D}=1.4 \\mathrm{~V} \\tag{7.89}\n\\end{equation*}\n$$\n\nwhich, along with $R_{i n}=R_{1} \\| R_{2}=50 \\mathrm{k} \\Omega$, yields\n\n$$\n\\begin{align*}\n& R_{1}=64.3 \\mathrm{k} \\Omega  \\tag{7.90}\\\\\n& R_{2}=225 \\mathrm{k} \\Omega . \\tag{7.91}\n\\end{align*}\n$$\n\nWe must now verify that $M_{1}$ operates in saturation. The drain voltage is $V_{D D}-I_{D} R_{D}=1.8 \\mathrm{~V}-1.25 \\mathrm{~V}=0.55 \\mathrm{~V}$. Since the gate voltage is 1.4 V, the gate-drain voltage difference exceeds $V_{T H}$, driving $M_{1}$ into the triode region!\n\nHow did our design approach result in this outcome? For the given $I_{D}$, we chose an excessively large $R_{D}$, i.e., an excessively small $g_{m}$ (since $g_{m} R_{D}=5$), even though $V_{G S}$ is reasonable. We must therefore increase $g_{m}$ to allow a lower $R_{D}$. For instance, if we halve $R_{D}$ and double $g_{m}$ by increasing $W / L$ by a factor of four:\n\n$$\n\\begin{align*}\n\\frac{W}{L} & =864  \\tag{7.92}\\\\\ng_{m} & =\\frac{1}{46.3 \\Omega} \\tag{7.93}\n\\end{align*}\n$$\n\nThe corresponding gate-source voltage from (7.84) is\n\n$$\n\\begin{equation*}\nV_{G S}=250 \\mathrm{mV} \\tag{7.94}\n\\end{equation*}\n$$\n\nyielding a gate voltage of 650 mV.\nIs $M_{1}$ in saturation? The drain voltage is $V_{D D}-R_{D} I_{D}=1.17 \\mathrm{~V}$, which is higher than the gate voltage minus $V_{T H}$. Thus, $M_{1}$ operates in saturation.\n\nExercise: Repeat the above example for a power budget of 3 mW and $V_{D D}=1.2 \\mathrm{~V}$."
},
{
    "text": "Figure 7.21 depicts the common-gate (CG) topology, which mirrors the common-base stage discussed in Chapter 5. When the input increases by a small amount, ΔV, the gate-source voltage of M1 drops by the same ΔV, leading to a reduction in the drain current by g_m ΔV. Consequently, the output voltage, V_out, increases by g_m ΔV R_D, indicating a positive voltage gain expressed as:\n\n$$\nA_v = g_m R_D \\tag{7.95}\n$$\n\nThe CG stage experiences voltage headroom-gain trade-offs akin to those of the CB topology. To attain high gain, it is necessary to have a high I_D or R_D, but the drain voltage, V_DD - I_D R_D, must stay above V_b - V_TH to ensure M1 remains in saturation.\n\nConsider a microphone with a DC level of zero driving a CG stage biased at I_D = 0.5 mA. Given W/L = 50, μ_n C_ox = 100 μA/V^2, V_TH = 0.5 V, and V_DD = 1.8 V, determine the maximum allowable R_D value and thus the maximum voltage gain, neglecting channel-length modulation.\n\nUsing the given W/L, the gate-source voltage can be derived from:\n\n$$\nI_D = \\frac{1}{2} μ_n C_ox \\frac{W}{L} (V_{GS} - V_{TH})^2 \\tag{7.96}\n$$\n\nyielding:\n\n$$\nV_{GS} = 0.947 V \\tag{7.97}\n$$\n\nFor M1 to stay in saturation:\n\n$$\nV_DD - I_D R_D > V_b - V_{TH} \\tag{7.98}\n$$\n\nThus:\n\n$$\nR_D < 2.71 kΩ \\tag{7.99}\n$$\n\nFurthermore, the W/L and I_D values yield g_m = (447 Ω)^-1 and:\n\n$$\nA_v ≤ 6.06 \\tag{7.100}\n$$\n\nFigure 7.22 encapsulates the permissible signal levels for this design. The gate voltage can be generated using a resistive divider, similar to the one shown in Figure 7.20(a).\n\nExercise: If a gain of 10 is required, what should be the value chosen for W/L?\n\nFigure 7.22 illustrates the CG stage with the gate voltage V_b at 0.947 V, and V_b - V_th at 0.447 V. The output voltage is measured across R_D, and the input is applied to the source of M1.\n\nWe now analyze the input and output impedances of the CG stage, anticipating results analogous to those of the CB topology. Ignoring channel-length modulation, from Figure 7.23(a), we have v_1 = -v_X and:\n\n$$\ni_X = -g_m v_1 \\tag{7.101}\n$$\n$$\ni_X = g_m v_X \\tag{7.102}\n$$\n\nThus:\n\n$$\nR_{in} = \\frac{1}{g_m} \\tag{7.103}\n$$\n\na relatively low value. Also, from Figure 7.23(b), v_1 = 0, hence:\n\n$$\nR_{out} = R_D \\tag{7.104}\n$$\n\nan expected result since the circuits in Figures 7.23(b) and 7.7 are identical.\n\nWe now examine the CG stage's behavior with a finite source impedance (Figure 7.24) while maintaining λ = 0. Similar to the analysis in Chapter 5 for the CB topology, we derive:\n\n$$\nv_X = \\frac{\\frac{1}{g_m}}{\\frac{1}{g_m} + R_S} v_{in} \\tag{7.105}\n$$\n$$\nv_X = \\frac{1}{1 + g_m R_S} v_{in} \\tag{7.106}\n$$\n\nFigure 7.24 simplifies the CG stage with signal source resistance Rs. It includes a voltage source Vin, an NMOS transistor M1, and resistors RD and RS. The stage also features a voltage-controlled current source with transconductance 1/gm. The output voltage is measured across RD.\n\nHence:\n\n$$\n\\frac{v_{out}}{v_{in}} = \\frac{v_{out}}{v_X} \\cdot \\frac{v_X}{v_{in}} \\tag{7.107}\n$$\n$$\n\\frac{v_{out}}{v_{in}} = \\frac{g_m R_D}{1 + g_m R_S} \\tag{7.108}\n$$\n$$\n\\frac{v_{out}}{v_{in}} = \\frac{R_D}{\\frac{1}{g_m} + R_S} \\tag{7.109}\n$$\n\nThe gain is therefore the same as that of the degenerated CS stage but with a negative sign. Unlike the common-source stage, the CG amplifier has a current gain of unity: the current from the input voltage source flows through the channel and exits from the drain node.\n\nAnalyzing the CG stage in the general case, i.e., incorporating both channel-length modulation and a finite source impedance, is beyond the scope of this book (Problem 7.42). However, two observations can be made. First, a resistance in series with the gate terminal [Figure 7.25(a)] does not alter the gain or I/O impedances (at low frequencies) as it maintains a zero potential drop—effectively acting as if its value is zero. Second, the output resistance of the CG stage in the general case [Figure 7.25(b)] matches that of the degenerated CS topology:\n\n$$\nR_{out} = (1 + g_m r_O) R_S + r_O \\tag{7.110}\n$$\n\nFigure 7.25(a) depicts a CG amplifier stage with a gate resistance RG, while Figure 7.25(b) illustrates the output resistance of the CG stage with a source degeneration resistor RS and output resistance Rout.\n\nExample 7.13:\n\nFor the circuit shown in Figure 7.26(a), calculate the voltage gain if λ = 0 and the output impedance if λ > 0.\n\nFigure 7.26(a) shows a CG amplifier stage with NMOS transistors M1 and M2. M1 is connected with its source to node X and its drain to Vout, while M2 has its source grounded and its drain at node X. The input voltage is applied at Vin, and the output is taken from Vout. RD provides the load at the output. The gate voltage Vb is common to both NMOS transistors.\n\nUsing the equivalent circuit in Figure 7.26(b), we first calculate v_X / v_{in}:\n\n$$\n\\frac{v_X}{v_{in}} = \\frac{\\frac{1}{g_{m2}} || \\frac{1}{g_{m1}}}{\\frac{1}{g_{m2}} || \\frac{1}{g_{m1}} + R_S} \\tag{7.111}\n$$\n$$\n\\frac{v_X}{v_{in}} = \\frac{1}{1 + (g_{m1} + g_{m2}) R_S} \\tag{7.112}\n$$\n\nNoting that v_{out} / v_X = g_{m1} R_D, we get:\n\n$$\n\\frac{v_{out}}{v_{in}} = \\frac{g_{m1} R_D}{1 + (g_{m1} + g_{m2}) R_S} \\tag{7.113}\n$$\n\nTo compute the output impedance, we first consider R_{out1} in Figure 7.26(c), which from Equation (7.110) is equal to:\n\n$$\nR_{out1} = (1 + g_{m1} r_{O1}) \\left(\\frac{1}{g_{m2}} || r_{O2} || R_S\\right) + r_{O1} \\tag{7.114}\n$$\n$$\nR_{out1} \\approx g_{m1} r_{O1} \\left(\\frac{1}{g_{m2}} || R_S\\right) + r_{O1} \\tag{7.115}\n$$\n\nThe overall output impedance is then given by:\n\n$$\nR_{out} = R_{out1} || R_D \\tag{7.116}\n$$\n$$\nR_{out} \\approx \\left[g_{m1} r_{O1} \\left(\\frac{1}{g_{m2}} || R_S\\right) + r_{O1}\\right] || R_D \\tag{7.117}\n$$\n\nExercise: Calculate the output impedance if the gate of M2 is connected to a constant voltage."
},
{
    "text": "The CG topology depicted in Fig. 7.21 mirrors the common-base stage discussed in Chapter 5. When the input voltage increases by a small increment, ΔV, the gate-source voltage of M1 correspondingly decreases, reducing the drain current by gmΔV. Consequently, the output voltage, Vout, increases by gmΔVRD, where the voltage gain is positive and expressed as:\n\n$$\nA_{v}=g_{m} R_{D} \\tag{7.95}\n$$\n\nThe CG topology faces similar voltage headroom-gain trade-offs as the CB topology. To achieve higher gain, it's necessary to have a high ID or RD, but it's crucial to maintain the drain voltage, VDD-IDRD, above Vb-VTH to ensure M1 remains in saturation.\n\nConsider a microphone with a DC level of zero driving a CG stage biased at ID=0.5 mA. Given W/L=50, μnCox=100 μA/V², VTH=0.5 V, and VDD=1.8 V, we need to determine the maximum allowable RD value and thus the maximum voltage gain, neglecting channel-length modulation.\n\nUsing the given W/L, the gate-source voltage can be calculated from:\n\n$$\nI_{D}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2} \\tag{7.96}\n$$\n\nyielding:\n\n$$\nV_{G S}=0.947 \\mathrm{~V} \\tag{7.97}\n$$\n\nTo keep M1 in saturation:\n\n$$\nV_{D D}-I_{D} R_{D}>V_{b}-V_{T H} \\tag{7.98}\n$$\n\nThus:\n\n$$\nR_{D}<2.71 \\mathrm{k} \\Omega \\tag{7.99}\n$$\n\nWith the given W/L and ID, we find gm=(447 Ω)^-1 and:\n\n$$\nA_{v} \\leq 6.06 \\tag{7.100}\n$$\n\nFigure 7.22 illustrates the permissible signal levels for this design. The gate voltage can be generated using a resistive divider, similar to the one shown in Fig. 7.20(a).\n\nFor an exercise, if a gain of 10 is required, what should be the chosen value for W/L?\n\nWe now examine the input and output impedances of the CG stage, anticipating results akin to those of the CB topology. Ignoring channel-length modulation, from Fig. 7.23(a) we have v1=-vX and:\n\n$$\ni_{X} =-g_{m} v_{1}  \\tag{7.101}\n$$\n$$\ni_{X} =g_{m} v_{X} \\tag{7.102}\n$$\n\nTherefore:\n\n$$\nR_{i n}=\\frac{1}{g_{m}} \\tag{7.103}\n$$\n\nAdditionally, from Fig. 7.23(b), v1=0, leading to:\n\n$$\nR_{\\text {out }}=R_{D} \\tag{7.104}\n$$\n\nThis is an expected result since the circuits in Figs. 7.23(b) and 7.7 are identical.\n\nNext, we investigate the CG stage's behavior with a finite source impedance (Fig. 7.24) while still assuming λ=0. Similar to the analysis in Chapter 5 for the CB topology, we derive:\n\n$$\nv_{X} =\\frac{\\frac{1}{g_{m}}}{\\frac{1}{g_{m}}+R_{S}} v_{i n}  \\tag{7.105}\n$$\n$$\nv_{X} =\\frac{1}{1+g_{m} R_{S}} v_{i n} \\tag{7.106}\n$$\n\nHence:\n\n$$\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} =\\frac{v_{\\text {out }}}{v_{X}} \\cdot \\frac{v_{X}}{v_{\\text {in }}}  \\tag{7.107}\n$$\n$$\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} =\\frac{g_{m} R_{D}}{1+g_{m} R_{S}}  \\tag{7.108}\n$$\n$$\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} =\\frac{R_{D}}{\\frac{1}{g_{m}}+R_{S}} \\tag{7.109}\n$$\n\nThe gain is therefore the same as that of the degenerated CS stage but with a negative sign. Unlike the common-source stage, the CG amplifier exhibits a current gain of unity, where the input voltage source's current flows through the channel and exits from the drain node.\n\nAnalyzing the CG stage in the general case, including both channel-length modulation and a finite source impedance, is beyond the scope of this text (Problem 7.42). However, two observations can be made. First, a resistance in series with the gate terminal [Fig. 7.25(a)] does not affect the gain or I/O impedances (at low frequencies) as it maintains a zero potential drop—as if its value were zero. Second, the output resistance of the CG stage in the general case [Fig. 7.25(b)] matches that of the degenerated CS topology:\n\n$$\nR_{\\text {out }}=\\left(1+g_{m} r_{O}\\right) R_{S}+r_{O} \\tag{7.110}\n$$\n\nFor the circuit shown in Fig. 7.26(a), we calculate the voltage gain if λ=0 and the output impedance if λ>0.\n\nUsing the equivalent circuit in Fig. 7.26(b), we compute vX/vin as:\n\n$$\n\\frac{v_{X}}{v_{i n}} =\\frac{\\frac{1}{g_{m 2}} \\| \\frac{1}{g_{m 1}}}{\\frac{1}{g_{m 2}} \\| \\frac{1}{g_{m 1}}+R_{S}}  \\tag{7.111}\n$$\n$$\n\\frac{v_{X}}{v_{i n}} =\\frac{1}{1+\\left(g_{m 1}+g_{m 2}\\right) R_{S}} \\tag{7.112}\n$$\n\nConsideringing that vout/vX=gm1RD, we have:\n\n$$\n\\frac{v_{\\text {out }}}{v_{\\text {in }}}=\\frac{g_{m 1} R_{D}}{1+\\left(g_{m 1}+g_{m 2}\\right) R_{S}} \\tag{7.113}\n$$\n\nTo calculate the output impedance, we first consider Rout1 from Fig. 7.26(c), which from Eq. (7.110) is equal to:\n\n$$\nR_{\\text {out } 1}=\\left(1+g_{m 1} r_{O 1}\\right)\\left(\\frac{1}{g_{m 2}}\\left\\|r_{O 2}\\right\\| R_{S}\\right)+r_{O 1}  \\tag{7.114}\n$$\n$$\nR_{\\text {out } 1} \\approx g_{m 1} r_{O 1}\\left(\\frac{1}{g_{m 2}} \\| R_{S}\\right)+r_{O 1} \\tag{7.115}\n$$\n\nThe overall output impedance is then:\n\n$$\nR_{\\text {out }} =R_{\\text {out } 1} \\| R_{D}  \\tag{7.116}\n$$\n$$\nR_{\\text {out }} \\approx\\left[g_{m 1} r_{O 1}\\left(\\frac{1}{g_{m 2}} \\| R_{S}\\right)+r_{O 1}\\right] \\| R_{D} \\tag{7.117}\n$$\n\nFor an exercise, calculate the output impedance if the gate of M2 is tied to a constant voltage."
},
{
    "text": "The CG topology, as depicted in Fig. 7.21, bears a resemblance to the common-base stage analyzed in Chapter 5. When the input increases by a small increment, $\\Delta V$, the gate-source voltage of $M_{1}$ correspondingly decreases by the same increment. This reduction in gate-source voltage results in a decrease in the drain current by an amount of $g_{m} \\Delta V$. Consequently, the output voltage $V_{\\text{out}}$ increases by $g_{m} \\Delta V R_{D}$. This indicates that the voltage gain is positive and is given by:\n\n$$\nA_{v} = g_{m} R_{D} \\tag{7.95}\n$$\n\nThe CG stage is subject to trade-offs between voltage headroom and gain, similar to those encountered in the CB topology. To achieve a higher gain, it is necessary to have a higher $I_{D}$ or $R_{D}$. However, it is crucial to maintain the drain voltage, $V_{DD} - I_{D} R_{D}$, above $V_{b} - V_{TH}$ to ensure that $M_{1}$ remains in saturation.\n\nConsider a microphone with a DC level of zero driving a CG stage biased at $I_{D} = 0.5 \\mathrm{~mA}$. Given $W/L = 50$, $\\mu_{n} C_{ox} = 100 \\mu \\mathrm{~A}/\\mathrm{V}^{2}$, $V_{TH} = 0.5 \\mathrm{~V}$, and $V_{DD} = 1.8 \\mathrm{~V}$, determine the maximum allowable value of $R_{D}$ and, accordingly, the maximum voltage gain. Ignore channel-length modulation.\n\nThe solution involves calculating the gate-source voltage from the given $W/L$ and the drain current:\n\n$$\nV_{GS} = 0.947 \\mathrm{~V} \\tag{7.97}\n$$\n\nTo ensure that $M_{1}$ stays in saturation:\n\n$$\nR_{D} < 2.71 \\mathrm{k} \\Omega \\tag{7.99}\n$$\n\nFurthermore, with the provided $W/L$ and $I_{D}$ values, we find $g_{m} = (447 \\Omega)^{-1}$, leading to:\n\n$$\nA_{v} \\leq 6.06 \\tag{7.100}\n$$\n\nFigure 7.22 provides a summary of the permissible signal levels for this design. The gate voltage can be generated using a resistive divider, akin to the one shown in Fig. 7.20(a).\n\nFor an exercise, if a gain of 10 is required, determine the appropriate value for $W/L$.\n\nIn analyzing the CG stage, we expect to find input and output impedances similar to those of the CB topology. Neglecting channel-length modulation, we derive the input impedance $R_{in}$ as:\n\n$$\nR_{in} = \\frac{1}{g_{m}} \\tag{7.103}\n$$\n\nand the output impedance $R_{out}$ as:\n\n$$\nR_{out} = R_{D} \\tag{7.104}\n$$\n\nThese results are consistent with expectations, as the circuits in Figs. 7.23(b) and 7.7 are identical.\n\nWhen considering a CG stage with a finite source impedance (Fig. 7.24) and still assuming $\\lambda = 0$, we can analyze the behavior in a manner similar to that for the CB topology. This leads to the expression for the gain:\n\n$$\n\\frac{v_{out}}{v_{in}} = \\frac{g_{m} R_{D}}{1 + g_{m} R_{S}} \\tag{7.108}\n$$\n\nThis indicates that the gain is equivalent to that of the degenerated CS stage but with a negative sign. Unlike the common-source stage, the CG amplifier exhibits a current gain of unity, meaning the current supplied by the input voltage source flows directly through the channel and exits from the drain node.\n\nThe general case analysis of the CG stage, including both channel-length modulation and a finite source impedance, is not covered in this text (refer to Problem 7.42). However, two observations can be made: first, a resistance in series with the gate terminal does not affect the gain or I/O impedances (at low frequencies) as it maintains a zero potential drop; second, the output resistance of the CG stage in the general case is identical to that of the degenerated CS topology:\n\n$$\nR_{out} = \\left(1 + g_{m} r_{O}\\right) R_{S} + r_{O} \\tag{7.110}\n$$\n\nThese insights provide a deeper understanding of the CG stage and its behavior in various configurations and conditions."
},
{
    "text": "Figure 7.21 illustrates a common-gate (CG) topology, which bears resemblance to the common-base configuration discussed in Chapter 5. In this setup, a minute increment in the input voltage, denoted as $\\Delta V$, leads to a corresponding reduction in the gate-source voltage of transistor $M_{1}$, thereby decreasing the drain current by $g_{m} \\Delta V$. Consequently, this raises the output voltage, $V_{\\text {out }}$, by $g_{m} \\Delta V R_{D}$. The voltage gain, as a result, is positive and can be expressed as:\n\n$$\n\\begin{equation*}\nA_{v}=g_{m} R_{D} \\tag{7.95}\n\\end{equation*}\n$$\n\nThe CG stage is subject to voltage headroom-gain trade-offs akin to those of the CB topology. Specifically, to attain a higher gain, it is necessary to have a higher $I_{D}$ or $R_{D}$. However, the drain voltage, $V_{D D}-I_{D} R_{D}$, must stay above $V_{b}-V_{T H}$ to ensure $M_{1}$ remains in saturation.\n\nConsider a microphone with a DC level of zero driving a CG stage biased at $I_{D}=0.5 \\mathrm{~mA}$. Given parameters such as $W / L=50$, $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}$, $V_{T H}=0.5 \\mathrm{~V}$, and $V_{D D}=1.8 \\mathrm{~V}$, one must determine the maximum allowable value of $R_{D}$ and, subsequently, the maximum voltage gain, while disregarding channel-length modulation.\n\nWith $W / L$ established, the gate-source voltage can be derived from the equation:\n\n$$\n\\begin{equation*}\nI_{D}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2} \\tag{7.96}\n\\end{equation*}\n$$\n\nyielding:\n\n$$\n\\begin{equation*}\nV_{G S}=0.947 \\mathrm{~V} \\tag{7.97}\n\\end{equation*}\n$$\n\nTo maintain saturation in $M_{1}$:\n\n$$\n\\begin{equation*}\nV_{D D}-I_{D} R_{D}>V_{b}-V_{T H} \\tag{7.98}\n\\end{equation*}\n$$\n\nand thus:\n\n$$\n\\begin{equation*}\nR_{D}<2.71 \\mathrm{k} \\Omega \\tag{7.99}\n\\end{equation*}\n$$\n\nGiven the above values of $W / L$ and $I_{D}$, we obtain $g_{m}=(447 \\Omega)^{-1}$ and the voltage gain is bounded by:\n\n$$\n\\begin{equation*}\nA_{v} \\leq 6.06 \\tag{7.100}\n\\end{equation*}\n$$\n\nFigure 7.22 encapsulates the permissible signal levels for this design. The gate voltage can be sourced using a resistive divider akin to the one in Figure 7.20(a).\n\nAs an exercise, if a gain of 10 is required, what value should be selected for $W / L$?\n\nFor a CG stage, the input and output impedances are analyzed, anticipating outcomes similar to those of the CB topology. Ignoring channel-length modulation, we derive from Figure 7.23(a) that $v_{1}=-v_{X}$ and:\n\n$$\n\\begin{align*}\ni_{X} & =-g_{m} v_{1}  \\tag{7.101}\\\\\n& =g_{m} v_{X} \\tag{7.102}\n\\end{align*}\n$$\n\nindicating:\n\n$$\n\\begin{equation*}\nR_{i n}=\\frac{1}{g_{m}} \\tag{7.103}\n\\end{equation*}\n$$\n\na relatively low value. Additionally, from Figure 7.23(b), where $v_{1}=0$, we find:\n\n$$\n\\begin{equation*}\nR_{\\text {out }}=R_{D} \\tag{7.104}\n\\end{equation*}\n$$\n\nan anticipated outcome since the circuits depicted in Figures 7.23(b) and 7.7 are identical.\n\nThe CG stage's behavior in the presence of a non-zero source impedance (Figure 7.24) is examined, with $\\lambda=0$. Analogous to the CB topology analysis in Chapter 5, we write:\n\n$$\n\\begin{align*}\nv_{X} & =\\frac{\\frac{1}{g_{m}}}{\\frac{1}{g_{m}}+R_{S}} v_{i n}  \\tag{7.105}\\\\\n& =\\frac{1}{1+g_{m} R_{S}} v_{i n} \\tag{7.106}\n\\end{align*}\n$$\n\nThis gain stage can occasionally employed as a low-noise RF amplifier, for instance, at the input of a WiFi receiver. Its appeal lies in the low input impedance, which facilitates straightforward \"impedance matching\" with the antenna. However, due to the diminished intrinsic gain, $g_{m} r_{O}$, resulting from scaling, the input impedance, $R_{i n}$, is now too high. It can be demonstrated that with channel-length modulation:\n\n$$\nR_{i n}=\\frac{R_{D}+r_{0}}{1+g_{m} r_{0}}\n$$\n\nwhich simplifies to $1 / g_{m}$ if $g_{m} r_{0} \\gg 1$ and $R_{D} \\ll r_{0}$. Since these conditions no longer apply, the CG stage presents new challenges for RF designers.\n\nHence,\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{v_{\\text {out }}}{v_{X}} \\cdot \\frac{v_{X}}{v_{\\text {in }}}  \\tag{7.107}\\\\\n& =\\frac{g_{m} R_{D}}{1+g_{m} R_{S}}  \\tag{7.108}\\\\\n& =\\frac{R_{D}}{\\frac{1}{g_{m}}+R_{S}} \\tag{7.109}\n\\end{align*}\n$$\n\nThe gain is, therefore, equivalent to that of the degenerated CS stage, barring a negative sign. Unlike the common-source stage, the CG amplifier exhibits a current gain of unity; the current supplied by the input voltage source flows through the channel and exits from the drain node.\n\nThe comprehensive analysis of the CG stage, encompassing both channel-length modulation and finite source impedance, exceeds the scope of this text (Problem 7.42). Nonetheless, two observations can be made. First, a resistance in series with the gate terminal [Figure 7.25(a)] does not modify the gain or I/O impedances (at low frequencies) since it sustains a zero potential drop—as if its value were zero. Second, the output resistance of the CG stage in the general case [Figure 7.25(b)] matches that of the degenerated CS topology:\n\n$$\n\\begin{equation*}\nR_{\\text {out }}=\\left(1+g_{m} r_{O}\\right) R_{S}+r_{O} \\tag{7.110}\n\\end{equation*}\n$$\n\nExample 7.13 involves calculating the voltage gain for the circuit depicted in Figure 7.26(a) with $\\lambda=0$ and the output impedance when $\\lambda>0$.\n\nFor the circuit in Figure 7.26(a), the voltage gain with $\\lambda=0$ and the output impedance with $\\lambda>0$ are computed as follows:\n\n$$\n\\begin{align*}\n\\frac{v_{X}}{v_{i n}} & =\\frac{\\frac{1}{g_{m 2}} \\| \\frac{1}{g_{m 1}}}{\\frac{1}{g_{m 2}} \\| \\frac{1}{g_{m 1}}+R_{S}}  \\tag{7.111}\\\\\n& =\\frac{1}{1+\\left(g_{m 1}+g_{m 2}\\right) R_{S}} \\tag{7.112}\n\\end{align*}\n$$\n\nGiven that $v_{\\text {out }} / v_{X}=g_{m 1} R_{D}$, the voltage gain is:\n\n$$\n\\begin{equation*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}}=\\frac{g_{m 1} R_{D}}{1+\\left(g_{m 1}+g_{m 2}\\right) R_{S}} \\tag{7.113}\n\\end{equation*}\n$$\n\nTo determine the output impedance, we first consider $R_{\\text {out } 1}$ from Figure 7.26(c), which, according to Eq. (7.110), equals:\n\n$$\n\\begin{align*}\n& R_{\\text {out } 1}=\\left(1+g_{m 1} r_{O 1}\\right)\\left(\\frac{1}{g_{m 2}}\\left\\|r_{O 2}\\right\\| R_{S}\\right)+r_{O 1}  \\tag{7.114}\\\\\n& \\approx g_{m 1} r_{O 1}\\left(\\frac{1}{g_{m 2}} \\| R_{S}\\right)+r_{O 1} \\tag{7.115}\n\\end{align*}\n$$\n\nThe overall output impedance is then:\n\n$$\n\\begin{align*}\nR_{\\text {out }} & =R_{\\text {out } 1} \\| R_{D}  \\tag{7.116}\\\\\n& \\approx\\left[g_{m 1} r_{O 1}\\left(\\frac{1}{g_{m 2}} \\| R_{S}\\right)+r_{O 1}\\right] \\| R_{D} \\tag{7.117}\n\\end{align*}\n$$\n\nAs an exercise, calculate the output impedance if the gate of $M_{2}$ is tied to a constant voltage."
},
{
    "text": "In Fig. 7.21, the common-gate (CG) topology resembles the common-base stage from Chapter 5. When the input increases by a small amount, ΔV, the gate-source voltage of M1 decreases by the same ΔV, leading to a reduction in the drain current by gmΔV. Consequently, the output voltage, Vout, increases by gmΔVRD, resulting in a positive voltage gain expressed as:\n\n$$\nA_{v}=g_{m} R_{D} \\tag{7.95}\n$$\n\nThe CG stage experiences voltage headroom-gain trade-offs similar to the CB topology. To achieve high gain, a high Id or RD is required, while the drain voltage (VDD - IDRD) must stay above (Vb - VTH) to ensure M1 remains saturated.\n\nConsider a microphone with a DC level of zero driving a CG stage biased at ID = 0.5 mA. Given W/L = 50, μn Cox = 100 μA/V², VTH = 0.5 V, and VDD = 1.8 V, determine the maximum allowable RD value and hence the maximum voltage gain, neglecting channel-length modulation.\n\nUsing the given W/L, the gate-source voltage is calculated from:\n\n$$\nI_{D}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2} \\tag{7.96}\n$$\n\nyielding:\n\n$$\nV_{G S}=0.947 \\mathrm{~V} \\tag{7.97}\n$$\n\nFor M1 to remain in saturation:\n\n$$\nV_{D D}-I_{D} R_{D}>V_{b}-V_{T H} \\tag{7.98}\n$$\n\nThus:\n\n$$\nR_{D}<2.71 \\mathrm{k} \\Omega \\tag{7.99}\n$$\n\nWith the above W/L and ID, gm = (447 Ω)^-1, and the maximum voltage gain is:\n\n$$\nA_{v} \\leq 6.06 \\tag{7.100}\n$$\n\nFigure 7.22 summarizes the allowable signal levels in this design, with the gate voltage generated using a resistive divider as in Fig. 7.20(a).\n\nExercise: If a gain of 10 is required, what should be chosen for W/L?\n\nFigure 7.22 depicts a CG stage with an NMOS transistor M1, where the gate voltage Vb is 0.947 V and Vb - Vth is 0.447 V. The output voltage is taken across RD, and the input is applied to the source of M1.\n\nThe I/O impedances of the CG stage are computed, expecting results similar to the CB topology. Neglecting channel-length modulation, from Fig. 7.23(a) we have v1 = -vX and:\n\n$$\ni_{X} =-g_{m} v_{1}  \\tag{7.101}\n$$\n\n$$\ni_{X} =g_{m} v_{X} \\tag{7.102}\n$$\n\nThus:\n\n$$\nR_{i n}=\\frac{1}{g_{m}} \\tag{7.103}\n$$\n\na relatively low value. Also, from Fig. 7.23(b), v1 = 0, hence:\n\n$$\nR_{\\text {out }}=R_{D} \\tag{7.104}\n$$\n\nan expected result since the circuits of Figs. 7.23(b) and 7.7 are identical.\n\nIn the presence of a finite source impedance (Fig. 7.24) but still with λ = 0, we write:\n\n$$\nv_{X} =\\frac{\\frac{1}{g_{m}}}{\\frac{1}{g_{m}}+R_{S}} v_{i n}  \\tag{7.105}\n$$\n\n$$\nv_{X} =\\frac{1}{1+g_{m} R_{S}} v_{i n} \\tag{7.106}\n$$\n\nThus:\n\n$$\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} =\\frac{v_{\\text {out }}}{v_{X}} \\cdot \\frac{v_{X}}{v_{\\text {in }}}  \\tag{7.107}\n$$\n\n$$\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} =\\frac{g_{m} R_{D}}{1+g_{m} R_{S}}  \\tag{7.108}\n$$\n\n$$\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} =\\frac{R_{D}}{\\frac{1}{g_{m}}+R_{S}} \\tag{7.109}\n$$\n\nThe gain is equal to that of the degenerated CS stage except for a negative sign. The CG amplifier exhibits a current gain of unity, as the input current simply flows through the channel and emerges from the drain node.\n\nThe analysis of the CG stage including both channel-length modulation and a finite source impedance is beyond this book's scope (Problem 7.42). However, two observations can be made. First, a resistance in series with the gate terminal [Fig. 7.25(a)] does not alter the gain or I/O impedances (at low frequencies) because it sustains a zero potential drop—as if its value were zero. Second, the output resistance of the CG stage in the general case [Fig. 7.25(b)] is identical to that of the degenerated CS topology:\n\n$$\nR_{\\text {out }}=\\left(1+g_{m} r_{O}\\right) R_{S}+r_{O} \\tag{7.110}\n$$\n\nExample 7.13:\n\nFor the circuit shown in Fig. 7.26(a), calculate the voltage gain if λ = 0 and the output impedance if λ > 0.\n\nUsing the equivalent circuit in Fig. 7.26(b), we compute vX/vin:\n\n$$\n\\frac{v_{X}}{v_{i n}} =\\frac{\\frac{1}{g_{m 2}} \\| \\frac{1}{g_{m 1}}}{\\frac{1}{g_{m 2}} \\| \\frac{1}{g_{m 1}}+R_{S}}  \\tag{7.111}\n$$\n\n$$\n\\frac{v_{X}}{v_{i n}} =\\frac{1}{1+\\left(g_{m 1}+g_{m 2}\\right) R_{S}} \\tag{7.112}\n$$\n\nNoting that vout/vX = gm1RD, the voltage gain is:\n\n$$\n\\frac{v_{\\text {out }}}{v_{\\text {in }}}=\\frac{g_{m 1} R_{D}}{1+\\left(g_{m 1}+g_{m 2}\\right) R_{S}} \\tag{7.113}\n$$\n\nFor the output impedance, we first consider Rout1 from Fig. 7.26(c), which from Eq. (7.110) is:\n\n$$\nR_{\\text {out } 1}=\\left(1+g_{m 1} r_{O 1}\\right)\\left(\\frac{1}{g_{m 2}}\\left\\|r_{O 2}\\right\\| R_{S}\\right)+r_{O 1}  \\tag{7.114}\n$$\n\n$$\nR_{\\text {out } 1} \\approx g_{m 1} r_{O 1}\\left(\\frac{1}{g_{m 2}} \\| R_{S}\\right)+r_{O 1} \\tag{7.115}\n$$\n\nThe overall output impedance is then:\n\n$$\nR_{\\text {out }} =R_{\\text {out } 1} \\| R_{D}  \\tag{7.116}\n$$\n\n$$\nR_{\\text {out }} \\approx\\left[g_{m 1} r_{O 1}\\left(\\frac{1}{g_{m 2}} \\| R_{S}\\right)+r_{O 1}\\right] \\| R_{D} \\tag{7.117}\n$$\n\nExercise: Calculate the output impedance if the gate of M2 is tied to a constant voltage."
},
{
    "text": "---[Rephrased Text]---\nIllustrated in Fig. 7.21, the common-gate (CG) topology mirrors the common-base configuration analyzed in Chapter 5. When the input voltage increases slightly by $\\Delta V$, the gate-source voltage of transistor $M_{1}$ diminishes by the same $\\Delta V$, leading to a reduction in the drain current by $g_{m} \\Delta V$. Consequently, the output voltage $V_{\\text {out }}$ increases by $g_{m} \\Delta V R_{D}$. Hence, the voltage gain is positive and can be expressed as:\n\n$$\n\\begin{equation*}\nA_{v}=g_{m} R_{D} \\tag{7.95}\n\\end{equation*}\n$$\n\nThe CG stage encounters similar voltage headroom-gain trade-offs as the CB topology. Specifically, to obtain a high gain, a high $I_{D}$ or $R_{D}$ is required. However, the drain voltage, $V_{D D}-I_{D} R_{D}$, must stay above $V_{b}-V_{T H}$ to guarantee that $M_{1}$ remains in saturation.\n\nConsider a microphone with a dc level of zero driving a CG stage biased at $I_{D}=0.5 \\mathrm{~mA}$. Given $W / L=50$, $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}$, $V_{T H}=0.5 \\mathrm{~V}$, and $V_{D D}=1.8 \\mathrm{~V}$, determine the maximum allowable value of $R_{D}$ and, subsequently, the maximum voltage gain. Ignore channellength modulation.\n\nTo find the gate-source voltage, use the equation:\n\n$$\n\\begin{equation*}\nI_{D}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2} \\tag{7.96}\n\\end{equation*}\n$$\n\nyielding:\n\n$$\n\\begin{equation*}\nV_{G S}=0.947 \\mathrm{~V} \\tag{7.97}\n\\end{equation*}\n$$\n\nFor saturation of $M_{1}$:\n\n$$\n\\begin{equation*}\nV_{D D}-I_{D} R_{D}>V_{b}-V_{T H} \\tag{7.98}\n\\end{equation*}\n$$\n\nthus:\n\n$$\n\\begin{equation*}\nR_{D}<2.71 \\mathrm{k} \\Omega \\tag{7.99}\n\\end{equation*}\n$$\n\nUsing the above $W / L$ and $I_{D}$ values, we get $g_{m}=(447 \\Omega)^{-1}$ and:\n\n$$\n\\begin{equation*}\nA_{v} \\leq 6.06 \\tag{7.100}\n\\end{equation*}\n$$\n\nFig. 7.22 encapsulates the permissible signal levels for this design. The gate voltage can be produced using a resistive divider, as seen in Fig. 7.20(a).\n\nExercise: For a desired gain of 10, what should the $W / L$ value be?\n\nFig. 7.23(a) shows $v_{1}=-v_{X}$ and:\n\n$$\n\\begin{align*}\ni_{X} & =-g_{m} v_{1}  \\tag{7.101}\\\\\n& =g_{m} v_{X} \\tag{7.102}\n\\end{align*}\n$$\n\nresulting in:\n\n$$\n\\begin{equation*}\nR_{i n}=\\frac{1}{g_{m}} \\tag{7.103}\n\\end{equation*}\n$$\n\na relatively low input impedance. From Fig. 7.23(b), where $v_{1}=0$, we get:\n\n$$\n\\begin{equation*}\nR_{\\text {out }}=R_{D} \\tag{7.104}\n\\end{equation*}\n$$\n\nan anticipated outcome, as the circuits in Figs. 7.23(b) and 7.7 are the same.\n\nThe behavior of the CG stage in the presence of a non-zero source impedance (Fig. 7.24) is considered next, with $\\lambda=0$. Similar to the CB topology analysis in Chapter 5, we write:\n\n$$\n\\begin{align*}\nv_{X} & =\\frac{\\frac{1}{g_{m}}}{\\frac{1}{g_{m}}+R_{S}} v_{i n}  \\tag{7.105}\\\\\n& =\\frac{1}{1+g_{m} R_{S}} v_{i n} \\tag{7.106}\n\\end{align*}\n$$\n\nHence:\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{v_{\\text {out }}}{v_{X}} \\cdot \\frac{v_{X}}{v_{\\text {in }}}  \\tag{7.107}\\\\\n& =\\frac{g_{m} R_{D}}{1+g_{m} R_{S}}  \\tag{7.108}\\\\\n& =\\frac{R_{D}}{\\frac{1}{g_{m}}+R_{S}} \\tag{7.109}\n\\end{align*}\n$$\n\nThe gain is, therefore, the same as that of the degenerated CS stage but with a negative sign. In contrast to the common-source stage, the CG amplifier has a current gain of unity: the current supplied\nThe provided text:\n```\nShown in Fig. 7.21, the CG topology resembles the common-base stage studied in Chapter 5. Here, if the input rises by a small value, $\\Delta V$, then the gate-source voltage of $M_{1}$ decreases by the same amount, thereby lowering the drain current by $g_{m} \\Delta V$ and\nimage_name:Figure 7.21 Common-gate stage\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vin, D: Vout, G: Vb}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:This is a common-gate amplifier circuit. The input is applied to the source of the NMOS transistor M1, and the output is taken from the drain. The gate of M1 is connected to a bias voltage Vb. The resistor RD is connected between VDD and the drain of M1. The circuit is used for amplifying voltage signals.\n\nFigure 7.21 Common-gate stage.\nraising $V_{\\text {out }}$ by $g_{m} \\Delta V R_{D}$. That is, the voltage gain is positive and equal to\n\n$$\n\\begin{equation*}\nA_{v}=g_{m} R_{D} \\tag{7.95}\n\\end{equation*}\n$$\n\nThe CG stage suffers from voltage headroom-gain trade-offs similar to those of the CB topology. In particular, to achieve a high gain, a high $I_{D}$ or $R_{D}$ is necessary, but the drain voltage, $V_{D D}-I_{D} R_{D}$, must remain above $V_{b}-V_{T H}$ to ensure $M_{1}$ is saturated.\n\nExample A microphone having a dc level of zero drives a CG stage biased at $I_{D}=0.5 \\mathrm{~mA}$. If 7.12 $W / L=50, \\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}$, and $V_{D D}=1.8 \\mathrm{~V}$, determine the maximum allowable value of $R_{D}$ and hence the maximum voltage gain. Neglect channellength modulation.\n\nSolution With $W / L$ known, the gate-source voltage can be determined from\n\n$$\n\\begin{equation*}\nI_{D}=\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2} \\tag{7.96}\n\\end{equation*}\n$$\n\nas\n\n$$\n\\begin{equation*}\nV_{G S}=0.947 \\mathrm{~V} \\tag{7.97}\n\\end{equation*}\n$$\n\nFor $M_{1}$ to remain in saturation,\n\n$$\n\\begin{equation*}\nV_{D D}-I_{D} R_{D}>V_{b}-V_{T H} \\tag{7.98}\n\\end{equation*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\nR_{D}<2.71 \\mathrm{k} \\Omega \\tag{7.99}\n\\end{equation*}\n$$\n\nAlso, the above value of $W / L$ and $I_{D}$ yield $g_{m}=(447 \\Omega)^{-1}$ and\n\n$$\n\\begin{equation*}\nA_{v} \\leq 6.06 \\tag{7.100}\n\\end{equation*}\n$$\n\nFigure 7.22 summarizes the allowable signal levels in this design. The gate voltage can be generated using a resistive divider similar to that in Fig. 7.20(a).\n\nExercise If a gain of 10 is required, what value should be chosen for $W / L$ ?\nimage_name:Figure 7.22\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vin, D: Vout, G: Vb}\nname: RD, type: Resistor, value: RD, ports: {N1: Vout, N2: VDD}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit represents a common-gate (CG) stage with an NMOS transistor M1. The gate voltage Vb is 0.947 V, and Vb - Vth is 0.447 V. The output voltage is taken across RD, and the input is applied to the source of M1.\n\nFigure 7.22 Signal levels in CG stage.\n\nWe now compute the I/O impedances of the CG stage, expecting to obtain results similar to those of the CB topology. Neglecting channel-length modulation for now, we have from Fig. 7.23(a) $v_{1}=-v_{X}$ and\n\n$$\n\\begin{align*}\ni_{X} & =-g_{m} v_{1}  \\tag{7.101}\\\\\n& =g_{m} v_{X} \\tag{7.102}\n\\end{align*}\n$$\n\nThat is,\n\n$$\n\\begin{equation*}\nR_{i n}=\\frac{1}{g_{m}} \\tag{7.103}\n\\end{equation*}\n$$\n\na relatively low value. Also, from Fig. 7.23(b), $v_{1}=0$ and hence\n\n$$\n\\begin{equation*}\nR_{\\text {out }}=R_{D} \\tag{7.104}\n\\end{equation*}\n$$\n\nan expected result because the circuits of Figs. 7.23(b) and 7.7 are identical.\n\nLet us study the behavior of the CG stage in the presence of a finite source impedance (Fig. 7.24) but still with $\\lambda=0$. In a manner similar to that depicted in Chapter 5 for the CB topology, we write\n\n$$\n\\begin{align*}\nv_{X} & =\\frac{\\frac{1}{g_{m}}}{\\frac{1}{g_{m}}+R_{S}} v_{i n}  \\tag{7.105}\\\\\n& =\\frac{1}{1+g_{m} R_{S}} v_{i n} \\tag{7.106}\n\\end{align*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: V1, type: VoltageSource, value: V1, ports: {Np: V1, Nn: GND}\nname: Vx, type: VoltageSource, value: Vx, ports: {Np: Vx, Nn: GND}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: X, Nn: Vx}\nname: RD, type: Resistor, value: RD, ports: {N1: X, N2: GND}\n]\nextrainfo:The circuit is a common-gate stage with a voltage source V1 supplying the input voltage. The voltage-controlled current source gmV1 is controlled by V1 and outputs current through RD to ground. Vx is used as a feedback voltage source.\nimage_name:(b)\ndescription:\n[\nname: v1, type: VoltageSource, value: v1, ports: {Np: X, Nn: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: X, N2: GND}\nname: vx, type: VoltageSource, value: vx, ports: {Np: Vx, Nn: GND}\n]\nextrainfo:The circuit diagram (b) is a common-gate stage with a voltage source V1, a resistor RD, and a voltage source Vx. The current source gmV1 is connected to node X, which is common to V1 and RD. Vx is connected to the output node, providing feedback.\n\nDid you know?\n\nThe common-gate stage is sometimes used as a low-noise RF amplifier, e.g., at the input of your WiFi receiver. This topology is attractive because its low input impedance allows simple \"impedance matching\" with the antenna. However, with the reduction of the intrinsic gain, $g_{m} r_{O}$, as a result of scaling, the input impedance, $R_{i n}$, is now too high! It can be shown that with channel-length modulation\n\n$$\nR_{i n}=\\frac{R_{D}+r_{0}}{1+g_{m} r_{0}}\n$$\n\nwhich reduces to $1 / g_{m}$ if $g_{m} r_{0} \\gg 1$ and $R_{D} \\ll r_{0}$. Since neither of these conditions holds anymore, the CG stage presents new challenges to RF designers.\nimage_name:Figure 7.24 Simplification of CG stage with signal source resistance\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: X}\nname: M1, type: NMOS, ports: {S: X, D: Vout, G: Vb}\nname: RD, type: Resistor, value: RD, ports: {N1: Vout, N2: VDD}\nname: 1/gm, type: VoltageControlledCurrentSource, value: 1/gm, ports: {Np: X, Nn: GND}\n]\nextrainfo:The circuit is a simplified common-gate (CG) stage with source resistance Rs. It includes a voltage source Vin, an NMOS transistor M1, and resistors RD and RS. The stage also includes a voltage-controlled current source with transconductance 1/gm. The output voltage is taken across RD.\n\nFigure 7.24 Simplification of CG stage with signal source resistance.\n\nThus,\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{v_{\\text {out }}}{v_{X}} \\cdot \\frac{v_{X}}{v_{\\text {in }}}  \\tag{7.107}\\\\\n& =\\frac{g_{m} R_{D}}{1+g_{m} R_{S}}  \\tag{7.108}\\\\\n& =\\frac{R_{D}}{\\frac{1}{g_{m}}+R_{S}} \\tag{7.109}\n\\end{align*}\n$$\n\nThe gain is therefore equal to that of the degenerated CS stage except for a negative sign.\nIn contrast to the common-source stage, the CG amplifier exhibits a current gain of unity: the current provided by the input voltage source simply flows through the channel and emerges from the drain node.\n\nThe analysis of the common-gate stage in the general case, i.e., including both channellength modulation and a finite source impedance, is beyond the scope of this book (Problem 7.42). However, we can make two observations. First, a resistance appearing in series with the gate terminal [Fig. 7.25(a)] does not alter the gain or I/O impedances (at low frequencies) because it sustains a zero potential drop-as if its value were zero. Second, the output resistance of the CG stage in the general case [Fig. 7.25(b)] is identical to that of the degenerated CS topology:\n\n$$\n\\begin{equation*}\nR_{\\text {out }}=\\left(1+g_{m} r_{O}\\right) R_{S}+r_{O} \\tag{7.110}\n\\end{equation*}\n$$\n\nimage_name:Figure 7.25 (a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RG, type: Resistor, value: RG, ports: {N1: G, N2: Vb}\nname: M1, type: NMOS, ports: {S: Vin, D: Vout, G: G}\nname: RS, type: Resistor, value: RS, ports: {N1: GND, N2: S1}\nname: ro, type: Resistor, value: ro, ports: {N1: S1, N2: d1}\nname: Rout, type: Resistor, value:"
},
{
    "text": "The circuit configuration depicted in Figure 7.21 corresponds to the common-gate (CG) topology, which was previously discussed in Chapter 5. When the input voltage increases by a small increment, ΔV, the gate-source voltage of transistor M1 correspondingly decreases by ΔV, leading to a reduction in the drain current by \\( g_{m} \\Delta V \\). Consequently, the output voltage \\( V_{\\text{out}} \\) is increased by \\( g_{m} \\Delta V R_{D} \\). This implies a positive voltage gain given by the equation \\( A_{v} = g_{m} R_{D} \\).\n\nThe CG stage encounters similar trade-offs between voltage headroom and gain as those found in the common-base (CB) topology. To achieve higher gain, a higher \\( I_{D} \\) or \\( R_{D} \\) is required, but it is essential to maintain the drain voltage \\( V_{DD} - I_{D} R_{D} \\) above \\( V_{b} - V_{TH} \\) to ensure that transistor M1 remains in saturation.\n\nConsider a microphone with a DC bias level of zero that drives a CG stage biased at \\( I_{D} = 0.5 \\) mA. Given parameters such as \\( W/L = 50 \\), \\( \\mu_{n} C_{ox} = 100 \\mu \\text{A}/\\text{V}^2 \\), \\( V_{TH} = 0.5 \\) V, and \\( V_{DD} = 1.8 \\) V, the task is to determine the maximum allowable value for \\( R_{D} \\) and, accordingly, the maximum voltage gain, while neglecting channel-length modulation.\n\nUsing the provided equations and parameters, it is determined that \\( V_{GS} \\) is 0.947 V. To ensure that M1 stays in saturation, \\( R_{D} \\) must be less than 2.71 kΩ. The calculated value of \\( g_{m} \\) is \\( (447 \\Omega)^{-1} \\), leading to a maximum voltage gain of \\( A_{v} \\leq 6.06 \\).\n\nFigure 7.22 provides a summary of the permissible signal levels in this design. The gate voltage can be generated using a resistive divider, as shown in Figure 7.20(a).\n\nFor an exercise, if a gain of 10 is required, one would need to calculate the appropriate value for \\( W/L \\).\n\nThe input and output impedances of the CG stage are analyzed, anticipating results akin to those of the CB topology. Neglecting channel-length modulation, the input impedance \\( R_{in} \\) is found to be \\( \\frac{1}{g_{m}} \\), a relatively low value. The output impedance \\( R_{out} \\) is \\( R_{D} \\), an expected outcome since the circuits in Figures 7.23(b) and 7.7 are identical.\n\nThe behavior of the CG stage in the presence of a finite source impedance is examined, as depicted in Figure 7.24, with channel-length modulation still assumed to be zero. The voltage gain in this configuration is derived and shown to be equal to that of the degenerated common-source (CS) stage, but with a negative sign.\n\nThe CG amplifier differs from the common-source stage in that it exhibits a current gain of unity; the current supplied by the input voltage source flows directly through the channel and exits from the drain node.\n\nThe comprehensive analysis of the CG stage, including both channel-length modulation and a finite source impedance, is beyond the scope of this text but can be explored in Problem 7.42. However, two observations can be made: a resistance in series with the gate terminal does not affect the gain or input/output impedances at low frequencies, and the output resistance of the CG stage in the general case is identical to that of the degenerated CS topology.\n\nAn example problem (Example 7.13) involves calculating the voltage gain for a circuit with zero channel-length modulation and the output impedance for a circuit with finite channel-length modulation. The solution involves using equivalent circuits and the derived equations to find the gain and impedance values.\n\nAn additional exercise involves calculating the output impedance if the gate of transistor M2 is connected to a constant voltage."
},
{
    "text": "As depicted in Figure 7.21, the common-gate (CG) amplifier stage has a topology akin to the common-base stage analyzed in Chapter 5. If the input voltage increases by a small increment, ΔV, the gate-source voltage of transistor M1 will similarly decrease, reducing the drain current by g_m ΔV. Consequently, the output voltage V_out increases by g_m ΔV R_D, indicating a positive voltage gain of A_v = g_m R_D (Equation 7.95).\n\nSimilar to the common-base topology, the CG stage experiences a trade-off between voltage headroom and gain. For instance, to achieve higher gain, it is necessary to increase either I_D or R_D. However, the drain voltage (V_D_D - I_D R_D) must stay above (V_b - V_T_H) to ensure that M1 remains in saturation.\n\nConsider a microphone with a DC level of zero that drives a CG stage biased at I_D = 0.5 mA. Given W/L = 50, μ_n C_ox = 100 μA/V^2, V_T_H = 0.5 V, and V_D_D = 1.8 V, we need to calculate the maximum allowable R_D value and hence the maximum voltage gain, disregarding channel-length modulation.\n\nUsing the provided W/L value, the gate-source voltage can be determined from the drain current equation (Equation 7.96), resulting in V_G_S = 0.947 V (Equation 7.97). To keep M1 in saturation, the condition V_D_D - I_D R_D > V_b - V_T_H must be met (Equation 7.98), which leads to R_D < 2.71 kΩ (Equation 7.99). With the given W/L and I_D values, the transconductance g_m is found to be (447 Ω)^-1, and the maximum voltage gain A_v is limited to 6.06 (Equation 7.100).\n\nFigure 7.22 illustrates the allowable signal levels in this design. The gate voltage can be generated using a resistive divider similar to that shown in Figure 7.20(a).\n\nIf a gain of 10 is required, one must determine the appropriate W/L value for the transistor."
},
{
    "text": "Following our analysis of CB biasing in Chapter 5, we infer that the CG amplifier can be biased as depicted in Fig. 7.27. By providing a path for the bias current to ground, resistor $R_{3}$ reduces the input impedance—and consequently the voltage gain—if the signal source has a finite output impedance, $R_{S}$.\n\nimage_name: Figure 7.27 CG stage with biasing\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: X}\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: X}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: X}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: R3, type: Resistor, value: R3, ports: {N1: X, N2: GND}\nname: g1, type: VoltageSource, value: g1, ports: {Np: g1, Nn: X}\n]\nextrainfo: The circuit represents a Common Gate (CG) amplifier stage with biasing. The input is applied at Vin, and the output is taken at Vout. The NMOS transistor M1 is configured in the CG setup, with its source connected to ground and its gate linked to node X. Biasing is achieved through resistors R1, R2, and R3, with a voltage source g1 setting the gate voltage. The load resistor RD connects the drain to VDD, and the input signal is AC coupled via capacitor C1.\n\nFigure 7.27 CG stage with biasing.\n\nGiven that the impedance to the right of node $X$ equals $R_{3} \\|\\left(1 / g_{m}\\right)$, we derive:\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{v_{X}}{v_{\\text {in }}} \\cdot \\frac{v_{\\text {out }}}{v_{X}}  \\tag{7.118}\\\\\n& =\\frac{R_{3} \\|\\left(1 / g_{m}\\right)}{R_{3} \\|\\left(1 / g_{m}\\right)+R_{S}} \\cdot g_{m} R_{D} \\tag{7.119}\n\\end{align*}\n$$\n\nHere, channel-length modulation is disregarded. As previously stated, the voltage divider formed by $R_{1}$ and $R_{2}$ does not influence the small-signal behavior of the circuit at low frequencies.\n\nDesign the common-gate stage in Fig. 7.27 with the following parameters: $v_{\\text {out }} / v_{\\text {in }}=5, R_{S}=0, R_{3}=500 \\Omega, 1 / g_{m}=50 \\Omega$, power budget $=2 \\mathrm{~mW}, V_{D D}=1.8 \\mathrm{~V}$. Assume $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}$, and $\\lambda=0$.\n\nSolution: From the power budget, we calculate a total supply current of 1.11 mA. Allocating $10 \\mu \\mathrm{~A}$ to the voltage divider, $R_{1}$ and $R_{2}$, we reserve 1.1 mA for the drain current of $M_{1}$. Thus, the voltage drop across $R_{3}$ is 550 mV.\n\nWe now need to determine two interconnected parameters: $W / L$ and $R_{D}$. A higher $W / L$ results in a greater $g_{m}$, allowing for a smaller $R_{D}$. As in Example 7.11, we select an initial $V_{G S}$ to estimate $W / L$. For instance, if $V_{G S}=0.8 \\mathrm{~V}$, then $W / L=244$, and $g_{m}=2 I_{D} /\\left(V_{G S}-V_{T H}\\right)=(136.4 \\Omega)^{-1}$, necessitating $R_{D}=682 \\Omega$ for $v_{\\text {out }} / v_{\\text {in }}=5$.\n\nLet's verify if $M_{1}$ operates in saturation. The gate voltage equals $V_{G S}$ plus the drop across $R_{3}$, totaling 1.35 V. Conversely, the drain voltage is $V_{D D}-I_{D} R_{D}=1.05 \\mathrm{~V}$. Since the drain voltage surpasses $V_{G}-V_{T H}$, $M_{1}$ is indeed in saturation.\n\nThe resistive divider composed of $R_{1}$ and $R_{2}$ must set a gate voltage of 1.35 V while drawing $10 \\mu \\mathrm{~A}$:\n\n$$\n\\begin{align*}\n\\frac{V_{D D}}{R_{1}+R_{2}} & =10 \\mu \\mathrm{~A}  \\tag{7.120}\\\\\n\\frac{R_{2}}{R_{1}+R_{2}} V_{D D} & =1.35 \\mathrm{~V} \\tag{7.121}\n\\end{align*}\n$$\n\nThis yields $R_{1}=45 \\mathrm{k} \\Omega$ and $R_{2}=135 \\mathrm{k} \\Omega$.\nIf $W / L$ cannot exceed 100, what voltage gain can be achieved?\n\nSuppose in Example 7.14, we aim to minimize $W / L$ (and thus transistor capacitances).\n7.15 What is the minimum acceptable value of $W / L$?\n\nSolution: For a given $I_{D}$, as $W / L$ decreases, $V_{G S}-V_{T H}$ increases. First, we must calculate the maximum allowable $V_{G S}$. We apply the saturation condition as:\n\n$$\n\\begin{equation*}\nV_{D D}-I_{D} R_{D}>V_{G S}+V_{R 3}-V_{T H} \\tag{7.122}\n\\end{equation*}\n$$\n\nwhere $V_{R 3}$ is the voltage drop across $R_{3}$, and set $g_{m} R_{D}$ to the required gain:\n\n$$\n\\begin{equation*}\n\\frac{2 I_{D}}{V_{G S}-V_{T H}} R_{D}=A_{v} \\tag{7.123}\n\\end{equation*}\n$$\n\nEliminating $R_{D}$ from Eqs. (7.122) and (7.123) results in:\n\n$$\n\\begin{equation*}\nV_{D D}-\\frac{A_{v}}{2}\\left(V_{G S}-V_{T H}\\right)>V_{G S}-V_{T H}+V_{R 3} \\tag{7.124}\n\\end{equation*}\n$$\n\nand thus:\n\n$$\n\\begin{equation*}\nV_{G S}-V_{T H}<\\frac{V_{D D}-V_{R 3}}{\\frac{A_{v}}{2}+1} \\tag{7.125}\n\\end{equation*}\n$$\n\nIn other words:\n\n$$\n\\begin{equation*}\nW / L>\\frac{2 I_{D}}{\\mu_{n} C_{o x}\\left(2 \\frac{V_{D D}-V_{R 3}}{A_{v}+2}\\right)^{2}} \\tag{7.126}\n\\end{equation*}\n$$\n\nIt follows that:\n\n$$\n\\begin{equation*}\nW / L>172.5 . \\tag{7.127}\n\\end{equation*}\n$$\n\nExercise: Repeat the above example for $A_{v}=10$."
},
{
    "text": "Following our analysis of CB biasing in Chapter 5, we infer that the CG amplifier can be biased as depicted in Fig. 7.27. By providing a path for the bias current to ground, resistor $R_{3}$ reduces the input impedance—and consequently the voltage gain—if the signal source has a finite output impedance, $R_{S}$.\nimage_name:Figure 7.27 CG stage with biasing\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: X}\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: X}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: X}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: R3, type: Resistor, value: R3, ports: {N1: X, N2: GND}\nname: g1, type: VoltageSource, value: g1, ports: {Np: g1, Nn: X}\n]\nextrainfo:The circuit represents a Common Gate (CG) amplifier stage with biasing. The input is applied at Vin, and the output is taken at Vout. The NMOS transistor M1 is configured in the CG setup, with its source connected to ground and its gate linked to node X. Biasing is achieved through resistors R1, R2, and R3, with a voltage source g1 setting the gate voltage. The load resistor RD connects the drain to VDD, and the input signal is AC coupled via capacitor C1.\n\nFigure 7.27 CG stage with biasing.\n\nGiven that the impedance seen to the right of node $X$ equals $R_{3} \\|\\left(1 / g_{m}\\right)$, we derive\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{v_{X}}{v_{\\text {in }}} \\cdot \\frac{v_{\\text {out }}}{v_{X}}  \\tag{7.118}\\\\\n& =\\frac{R_{3} \\|\\left(1 / g_{m}\\right)}{R_{3} \\|\\left(1 / g_{m}\\right)+R_{S}} \\cdot g_{m} R_{D} \\tag{7.119}\n\\end{align*}\n$$\n\nassuming channel-length modulation is negligible. As previously noted, the voltage divider formed by $R_{1}$ and $R_{2}$ does not influence the small-signal behavior of the circuit at low frequencies.\n\nDesign the common-gate stage in Fig. 7.27 for the specified parameters: $v_{\\text {out }} / v_{\\text {in }}=5, R_{S}=0, R_{3}=500 \\Omega, 1 / g_{m}=50 \\Omega$, power budget $=2 \\mathrm{~mW}, V_{D D}=1.8 \\mathrm{~V}$. Assume $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}$, and $\\lambda=0$.\n\nSolution From the power budget, we determine a total supply current of 1.11 mA. Allocating $10 \\mu \\mathrm{~A}$ to the voltage divider, $R_{1}$ and $R_{2}$, we reserve 1.1 mA for the drain current of $M_{1}$. Thus, the voltage drop across $R_{3}$ is 550 mV.\n\nWe now need to calculate two interdependent parameters: $W / L$ and $R_{D}$. A higher $W / L$ results in a greater $g_{m}$, permitting a lower $R_{D}$. Following the approach in Example 7.11, we select an initial $V_{G S}$ to estimate $W / L$. For instance, if $V_{G S}=0.8 \\mathrm{~V}$, then $W / L=244$, and $g_{m}=2 I_{D} /\\left(V_{G S}-V_{T H}\\right)=(136.4 \\Omega)^{-1}$, requiring $R_{D}=682 \\Omega$ for $v_{\\text {out }} / v_{\\text {in }}=5$.\n\nLet's verify if $M_{1}$ operates in saturation. The gate voltage equals $V_{G S}$ plus the drop across $R_{3}$, totaling 1.35 V. Conversely, the drain voltage is $V_{D D}-I_{D} R_{D}=1.05 \\mathrm{~V}$. Since the drain voltage surpasses $V_{G}-V_{T H}$, $M_{1}$ is indeed in saturation.\n\nThe resistive divider composed of $R_{1}$ and $R_{2}$ must set a gate voltage of 1.35 V while drawing $10 \\mu \\mathrm{~A}$:\n\n$$\n\\begin{align*}\n\\frac{V_{D D}}{R_{1}+R_{2}} & =10 \\mu \\mathrm{~A}  \\tag{7.120}\\\\\n\\frac{R_{2}}{R_{1}+R_{2}} V_{D D} & =1.35 \\mathrm{~V} \\tag{7.121}\n\\end{align*}\n$$\n\nThis yields $R_{1}=45 \\mathrm{k} \\Omega$ and $R_{2}=135 \\mathrm{k} \\Omega$.\nIf $W / L$ is limited to 100, what voltage gain can be achieved?\n\nSuppose in Example 7.14, we aim to minimize $W / L$ (and thereby transistor capacitances).\n7.15 What is the minimum acceptable value of $W / L$?\n\nSolution For a given $I_{D}$, as $W / L$ decreases, $V_{G S}-V_{T H}$ increases. First, we must determine the maximum allowable $V_{G S}$. We enforce the saturation condition as\n\n$$\n\\begin{equation*}\nV_{D D}-I_{D} R_{D}>V_{G S}+V_{R 3}-V_{T H} \\tag{7.122}\n\\end{equation*}\n$$\n\nwhere $V_{R 3}$ is the voltage drop across $R_{3}$, and set $g_{m} R_{D}$ to the desired gain:\n\n$$\n\\begin{equation*}\n\\frac{2 I_{D}}{V_{G S}-V_{T H}} R_{D}=A_{v} \\tag{7.123}\n\\end{equation*}\n$$\n\nEliminating $R_{D}$ from Eqs. (7.122) and (7.123) results in:\n\n$$\n\\begin{equation*}\nV_{D D}-\\frac{A_{v}}{2}\\left(V_{G S}-V_{T H}\\right)>V_{G S}-V_{T H}+V_{R 3} \\tag{7.124}\n\\end{equation*}\n$$\n\nand thus\n\n$$\n\\begin{equation*}\nV_{G S}-V_{T H}<\\frac{V_{D D}-V_{R 3}}{\\frac{A_{v}}{2}+1} \\tag{7.125}\n\\end{equation*}\n$$\n\nIn other words,\n\n$$\n\\begin{equation*}\nW / L>\\frac{2 I_{D}}{\\mu_{n} C_{o x}\\left(2 \\frac{V_{D D}-V_{R 3}}{A_{v}+2}\\right)^{2}} \\tag{7.126}\n\\end{equation*}\n$$\n\nTherefore,\n\n$$\n\\begin{equation*}\nW / L>172.5 . \\tag{7.127}\n\\end{equation*}\n$$\n\nExercise Repeat the above example for $A_{v}=10$."
},
{
    "text": "After examining the CB biasing in Chapter 5, we infer that the CG amplifier can be biased as depicted in Fig. 7.27. By providing a path for the bias current to ground, resistor $R_{3}$ reduces the input impedance—and consequently the voltage gain—if the signal source has a finite output impedance, $R_{S}$.\nimage_name:Figure 7.27 CG stage with biasing\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: X}\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: X}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: X}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: R3, type: Resistor, value: R3, ports: {N1: X, N2: GND}\nname: g1, type: VoltageSource, value: g1, ports: {Np: g1, Nn: X}\n]\nextrainfo:The circuit is a Common Gate (CG) amplifier stage with biasing. The input is applied at Vin, and the output is taken at Vout. The NMOS transistor M1 is used in the CG configuration, with its source connected to ground and its gate connected to node X. The biasing is provided by resistors R1, R2, and R3, with a voltage source g1 setting the gate voltage. The load resistor RD connects the drain to VDD, and the input signal is AC coupled through capacitor C1.\n\nFigure 7.27 CG stage with biasing.\n\nGiven that the impedance seen to the right of node $X$ equals $R_{3} \\|\\left(1 / g_{m}\\right)$, we derive\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{v_{X}}{v_{\\text {in }}} \\cdot \\frac{v_{\\text {out }}}{v_{X}}  \\tag{7.118}\\\\\n& =\\frac{R_{3} \\|\\left(1 / g_{m}\\right)}{R_{3} \\|\\left(1 / g_{m}\\right)+R_{S}} \\cdot g_{m} R_{D} \\tag{7.119}\n\\end{align*}\n$$\n\nassuming channel-length modulation is negligible. As previously noted, the voltage divider formed by $R_{1}$ and $R_{2}$ does not influence the small-signal behavior of the circuit at low frequencies.\n\nDesign the common-gate stage shown in Fig. 7.27 with the following parameters: $v_{\\text {out }} / v_{\\text {in }}=5, R_{S}=0, R_{3}=500 \\Omega, 1 / g_{m}=50 \\Omega$, power budget $=2 \\mathrm{~mW}, V_{D D}=1.8 \\mathrm{~V}$. Assume $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}$, and $\\lambda=0$.\n\nSolution From the power budget, we determine a total supply current of 1.11 mA. Allocating $10 \\mu \\mathrm{~A}$ to the voltage divider, $R_{1}$ and $R_{2}$, we reserve 1.1 mA for the drain current of $M_{1}$. Thus, the voltage drop across $R_{3}$ is 550 mV.\n\nWe now need to calculate two interdependent parameters: $W / L$ and $R_{D}$. A higher $W / L$ results in a greater $g_{m}$, allowing for a smaller $R_{D}$. Following the approach in Example 7.11, we select an initial $V_{G S}$ to estimate $W / L$. For instance, if $V_{G S}=0.8 \\mathrm{~V}$, then $W / L=244$, and $g_{m}=2 I_{D} /\\left(V_{G S}-V_{T H}\\right)=(136.4 \\Omega)^{-1}$, necessitating $R_{D}=682 \\Omega$ for $v_{\\text {out }} / v_{\\text {in }}=5$.\n\nTo verify if $M_{1}$ operates in saturation, we calculate the gate voltage as $V_{G S}$ plus the drop across $R_{3}$, totaling 1.35 V. Meanwhile, the drain voltage is $V_{D D}-I_{D} R_{D}=1.05 \\mathrm{~V}$. Since the drain voltage exceeds $V_{G}-V_{T H}$, $M_{1}$ is indeed in saturation.\n\nThe resistive divider composed of $R_{1}$ and $R_{2}$ must set the gate voltage to 1.35 V while drawing $10 \\mu \\mathrm{~A}$:\n\n$$\n\\begin{align*}\n\\frac{V_{D D}}{R_{1}+R_{2}} & =10 \\mu \\mathrm{~A}  \\tag{7.120}\\\\\n\\frac{R_{2}}{R_{1}+R_{2}} V_{D D} & =1.35 \\mathrm{~V} \\tag{7.121}\n\\end{align*}\n$$\n\nThis results in $R_{1}=45 \\mathrm{k} \\Omega$ and $R_{2}=135 \\mathrm{k} \\Omega$.\nIf $W / L$ cannot exceed 100, what voltage gain is achievable?\n\nIn Example 7.14, suppose we aim to minimize $W / L$ (and thus transistor capacitances).\n7.15 What is the minimum acceptable value of $W / L$?\n\nSolution For a given $I_{D}$, as $W / L$ decreases, $V_{G S}-V_{T H}$ increases. First, we must determine the maximum allowable $V_{G S}$. We apply the saturation condition as\n\n$$\n\\begin{equation*}\nV_{D D}-I_{D} R_{D}>V_{G S}+V_{R 3}-V_{T H} \\tag{7.122}\n\\end{equation*}\n$$\n\nwhere $V_{R 3}$ is the voltage drop across $R_{3}$, and set $g_{m} R_{D}$ to the required gain:\n\n$$\n\\begin{equation*}\n\\frac{2 I_{D}}{V_{G S}-V_{T H}} R_{D}=A_{v} \\tag{7.123}\n\\end{equation*}\n$$\n\nEliminating $R_{D}$ from Eqs. (7.122) and (7.123) yields:\n\n$$\n\\begin{equation*}\nV_{D D}-\\frac{A_{v}}{2}\\left(V_{G S}-V_{T H}\\right)>V_{G S}-V_{T H}+V_{R 3} \\tag{7.124}\n\\end{equation*}\n$$\n\nand thus\n\n$$\n\\begin{equation*}\nV_{G S}-V_{T H}<\\frac{V_{D D}-V_{R 3}}{\\frac{A_{v}}{2}+1} \\tag{7.125}\n\\end{equation*}\n$$\n\nIn other words,\n\n$$\n\\begin{equation*}\nW / L>\\frac{2 I_{D}}{\\mu_{n} C_{o x}\\left(2 \\frac{V_{D D}-V_{R 3}}{A_{v}+2}\\right)^{2}} \\tag{7.126}\n\\end{equation*}\n$$\n\nIt follows that\n\n$$\n\\begin{equation*}\nW / L>172.5 . \\tag{7.127}\n\\end{equation*}\n$$\n\nExercise Repeat the above example for $A_{v}=10$."
},
{
    "text": "Following our analysis of CB biasing in Chapter 5, we推断 the CG amplifier can be biased as depicted in Fig. 7.27. By providing a path for the bias current to ground, resistor $R_{3}$ reduces the input impedance—and consequently the voltage gain—if the signal source has a finite output impedance, $R_{S}$.\nimage_name:Figure 7.27 CG stage with biasing\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: X}\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: X}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: X}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: R3, type: Resistor, value: R3, ports: {N1: X, N2: GND}\nname: g1, type: VoltageSource, value: g1, ports: {Np: g1, Nn: X}\n]\nextrainfo:The circuit represents a Common Gate (CG) amplifier stage with biasing. The input is applied at Vin, and the output is taken at Vout. The NMOS transistor M1 is configured in the CG arrangement, with its source connected to ground and its gate linked to node X. Biasing is achieved through resistors R1, R2, and R3, with a voltage source g1 setting the gate voltage. The load resistor RD connects the drain to VDD, and the input signal is AC coupled via capacitor C1.\n\nFigure 7.27 CG stage with biasing.\n\nGiven that the impedance to the right of node $X$ equals $R_{3} \\|\\left(1 / g_{m}\\right)$, we derive\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{v_{X}}{v_{\\text {in }}} \\cdot \\frac{v_{\\text {out }}}{v_{X}}  \\tag{7.118}\\\\\n& =\\frac{R_{3} \\|\\left(1 / g_{m}\\right)}{R_{3} \\|\\left(1 / g_{m}\\right)+R_{S}} \\cdot g_{m} R_{D} \\tag{7.119}\n\\end{align*}\n$$\n\nassuming channel-length modulation is negligible. As previously stated, the voltage divider formed by $R_{1}$ and $R_{2}$ does not influence the small-signal behavior of the circuit at low frequencies.\n\nDesign the common-gate stage in Fig. 7.27 for the specified parameters: $v_{\\text {out }} /$ $v_{i n}=5, R_{S}=0, R_{3}=500 \\Omega, 1 / g_{m}=50 \\Omega$, power budget $=2 \\mathrm{~mW}, V_{D D}=1.8 \\mathrm{~V}$. Assume $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}$, and $\\lambda=0$.\n\nSolution From the power budget, we calculate a total supply current of 1.11 mA. Allocating $10 \\mu \\mathrm{~A}$ to the voltage divider, $R_{1}$ and $R_{2}$, we reserve 1.1 mA for the drain current of $M_{1}$. Thus, the voltage drop across $R_{3}$ is 550 mV.\n\nWe now need to determine two interconnected parameters: $W / L$ and $R_{D}$. A higher $W / L$ results in a greater $g_{m}$, permitting a lower $R_{D}$. As in Example 7.11, we select an initial $V_{G S}$ to estimate $W / L$. For instance, if $V_{G S}=0.8 \\mathrm{~V}$, then $W / L=244$, and $g_{m}=2 I_{D} /\\left(V_{G S}-V_{T H}\\right)=(136.4 \\Omega)^{-1}$, necessitating $R_{D}=682 \\Omega$ for $v_{\\text {out }} / v_{\\text {in }}=5$.\n\nLet's verify if $M_{1}$ operates in saturation. The gate voltage equals $V_{G S}$ plus the drop across $R_{3}$, totaling 1.35 V. Conversely, the drain voltage is $V_{D D}-I_{D} R_{D}=1.05 \\mathrm{~V}$. Since the drain voltage exceeds $V_{G}-V_{T H}$, $M_{1}$ is indeed in saturation.\n\nThe resistive divider composed of $R_{1}$ and $R_{2}$ must establish a gate voltage of 1.35 V while drawing $10 \\mu \\mathrm{~A}$:\n\n$$\n\\begin{align*}\n\\frac{V_{D D}}{R_{1}+R_{2}} & =10 \\mu \\mathrm{~A}  \\tag{7.120}\\\\\n\\frac{R_{2}}{R_{1}+R_{2}} V_{D D} & =1.35 \\mathrm{~V} \\tag{7.121}\n\\end{align*}\n$$\n\nThis results in $R_{1}=45 \\mathrm{k} \\Omega$ and $R_{2}=135 \\mathrm{k} \\Omega$.\nIf $W / L$ is limited to 100, what voltage gain can be achieved?\n\nSuppose in Example 7.14, we aim to minimize $W / L$ (and thus transistor capacitances).\n7.15 What is the minimum acceptable value of $W / L$?\n\nSolution For a given $I_{D}$, as $W / L$ decreases, $V_{G S}-V_{T H}$ increases. First, we must determine the maximum allowable $V_{G S}$. We apply the saturation condition as\n\n$$\n\\begin{equation*}\nV_{D D}-I_{D} R_{D}>V_{G S}+V_{R 3}-V_{T H} \\tag{7.122}\n\\end{equation*}\n$$\n\nwhere $V_{R 3}$ is the voltage drop across $R_{3}$, and set $g_{m} R_{D}$ to the required gain:\n\n$$\n\\begin{equation*}\n\\frac{2 I_{D}}{V_{G S}-V_{T H}} R_{D}=A_{v} \\tag{7.123}\n\\end{equation*}\n$$\n\nEliminating $R_{D}$ from Eqs. (7.122) and (7.123) yields:\n\n$$\n\\begin{equation*}\nV_{D D}-\\frac{A_{v}}{2}\\left(V_{G S}-V_{T H}\\right)>V_{G S}-V_{T H}+V_{R 3} \\tag{7.124}\n\\end{equation*}\n$$\n\nand thus\n\n$$\n\\begin{equation*}\nV_{G S}-V_{T H}<\\frac{V_{D D}-V_{R 3}}{\\frac{A_{v}}{2}+1} \\tag{7.125}\n\\end{equation*}\n$$\n\nIn other words,\n\n$$\n\\begin{equation*}\nW / L>\\frac{2 I_{D}}{\\mu_{n} C_{o x}\\left(2 \\frac{V_{D D}-V_{R 3}}{A_{v}+2}\\right)^{2}} \\tag{7.126}\n\\end{equation*}\n$$\n\nIt follows that\n\n$$\n\\begin{equation*}\nW / L>172.5 . \\tag{7.127}\n\\end{equation*}\n$$\n\nExercise Repeat the above example for $A_{v}=10$."
},
{
    "text": "After examining the CB biasing in Chapter 5, we推测 the CG amplifier can be biased as depicted in Fig. 7.27. By providing a path for the bias current to ground, resistor $R_{3}$ reduces the input impedance—and consequently the voltage gain—if the signal source has a finite output impedance, $R_{S}$.\nimage_name:Figure 7.27 CG stage with biasing\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: X}\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: X}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: X}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: R3, type: Resistor, value: R3, ports: {N1: X, N2: GND}\nname: g1, type: VoltageSource, value: g1, ports: {Np: g1, Nn: X}\n]\nextrainfo:The circuit represents a Common Gate (CG) amplifier stage with biasing. The input is applied at Vin, and the output is obtained at Vout. The NMOS transistor M1 is configured in the CG setup, with its source connected to ground and its gate linked to node X. Biasing is achieved through resistors R1, R2, and R3, with a voltage source g1 setting the gate voltage. The load resistor RD connects the drain to VDD, and the input signal is AC coupled via capacitor C1.\n\nFigure 7.27 CG stage with biasing.\n\nGiven that the impedance to the right of node $X$ equals $R_{3} \\|\\left(1 / g_{m}\\right)$, we derive\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{v_{X}}{v_{\\text {in }}} \\cdot \\frac{v_{\\text {out }}}{v_{X}}  \\tag{7.118}\\\\\n& =\\frac{R_{3} \\|\\left(1 / g_{m}\\right)}{R_{3} \\|\\left(1 / g_{m}\\right)+R_{S}} \\cdot g_{m} R_{D} \\tag{7.119}\n\\end{align*}\n$$\n\nassuming channel-length modulation is negligible. As previously noted, the voltage divider formed by $R_{1}$ and $R_{2}$ does not influence the small-signal behavior of the circuit at low frequencies.\n\nDesign the common-gate stage in Fig. 7.27 with the following parameters: $v_{\\text {out }} /$ $v_{i n}=5, R_{S}=0, R_{3}=500 \\Omega, 1 / g_{m}=50 \\Omega$, power budget $=2 \\mathrm{~mW}, V_{D D}=1.8 \\mathrm{~V}$. Assume $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}$, and $\\lambda=0$.\n\nSolution From the power budget, we calculate a total supply current of 1.11 mA. Assigning $10 \\mu \\mathrm{~A}$ to the voltage divider, $R_{1}$ and $R_{2}$, we allocate 1.1 mA to the drain current of $M_{1}$. Thus, the voltage drop across $R_{3}$ is 550 mV.\n\nWe now need to determine two interdependent parameters: $W / L$ and $R_{D}$. A higher $W / L$ results in a greater $g_{m}$, permitting a lower $R_{D}$. As in Example 7.11, we select an initial $V_{G S}$ to estimate $W / L$. For instance, if $V_{G S}=0.8 \\mathrm{~V}$, then $W / L=244$, and $g_{m}=2 I_{D} /\\left(V_{G S}-V_{T H}\\right)=(136.4 \\Omega)^{-1}$, requiring $R_{D}=682 \\Omega$ for $v_{\\text {out }} / v_{\\text {in }}=5$.\n\nLet's verify if $M_{1}$ operates in saturation. The gate voltage equals $V_{G S}$ plus the drop across $R_{3}$, totaling 1.35 V. Conversely, the drain voltage is $V_{D D}-I_{D} R_{D}=1.05 \\mathrm{~V}$. Since the drain voltage exceeds $V_{G}-V_{T H}, M_{1}$ is in saturation.\n\nThe resistive divider composed of $R_{1}$ and $R_{2}$ must set the gate voltage to 1.35 V while drawing $10 \\mu \\mathrm{~A}$:\n\n$$\n\\begin{align*}\n\\frac{V_{D D}}{R_{1}+R_{2}} & =10 \\mu \\mathrm{~A}  \\tag{7.120}\\\\\n\\frac{R_{2}}{R_{1}+R_{2}} V_{D D} & =1.35 \\mathrm{~V} \\tag{7.121}\n\\end{align*}\n$$\n\nThus, $R_{1}=45 \\mathrm{k} \\Omega$ and $R_{2}=135 \\mathrm{k} \\Omega$.\nIf $W / L$ is limited to 100, what voltage gain can be achieved?\n\nSuppose in Example 7.14, we aim to minimize $W / L$ (and thereby transistor capacitances).\n7.15 What is the minimum acceptable $W / L$?\n\nSolution For a given $I_{D}$, as $W / L$ decreases, $V_{G S}-V_{T H}$ increases. First, we must calculate the maximum allowable $V_{G S}$. We set the saturation condition as\n\n$$\n\\begin{equation*}\nV_{D D}-I_{D} R_{D}>V_{G S}+V_{R 3}-V_{T H} \\tag{7.122}\n\\end{equation*}\n$$\n\nwhere $V_{R 3}$ is the voltage drop across $R_{3}$, and set $g_{m} R_{D}$ to the required gain:\n\n$$\n\\begin{equation*}\n\\frac{2 I_{D}}{V_{G S}-V_{T H}} R_{D}=A_{v} \\tag{7.123}\n\\end{equation*}\n$$\n\nEliminating $R_{D}$ from Eqs. (7.122) and (7.123) yields:\n\n$$\n\\begin{equation*}\nV_{D D}-\\frac{A_{v}}{2}\\left(V_{G S}-V_{T H}\\right)>V_{G S}-V_{T H}+V_{R 3} \\tag{7.124}\n\\end{equation*}\n$$\n\nand thus\n\n$$\n\\begin{equation*}\nV_{G S}-V_{T H}<\\frac{V_{D D}-V_{R 3}}{\\frac{A_{v}}{2}+1} \\tag{7.125}\n\\end{equation*}\n$$\n\nIn other words,\n\n$$\n\\begin{equation*}\nW / L>\\frac{2 I_{D}}{\\mu_{n} C_{o x}\\left(2 \\frac{V_{D D}-V_{R 3}}{A_{v}+2}\\right)^{2}} \\tag{7.126}\n\\end{equation*}\n$$\n\nIt follows that\n\n$$\n\\begin{equation*}\nW / L>172.5 . \\tag{7.127}\n\\end{equation*}\n$$\n\nExercise Repeat the above example for $A_{v}=10$."
},
{
    "text": "After examining the CB biasing in Chapter 5, we推测 the CG amplifier can be biased as depicted in Fig. 7.27. By providing a path for the bias current to ground, resistor $R_{3}$ reduces the input impedance—and consequently the voltage gain—if the signal source has a finite output impedance, $R_{S}$.\nimage_name:Figure 7.27 CG stage with biasing\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: X}\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: X}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: X}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: R3, type: Resistor, value: R3, ports: {N1: X, N2: GND}\nname: g1, type: VoltageSource, value: g1, ports: {Np: g1, Nn: X}\n]\nextrainfo:The circuit is a Common Gate (CG) amplifier stage with biasing. The input is applied at Vin, and the output is taken at Vout. The NMOS transistor M1 is used in the CG configuration, with its source connected to ground and its gate connected to node X. Biasing is provided by resistors R1, R2, and R3, with a voltage source g1 setting the gate voltage. The load resistor RD connects the drain to VDD, and the input signal is AC coupled through capacitor C1.\n\nFigure 7.27 CG stage with biasing.\n\nGiven that the impedance seen to the right of node $X$ equals $R_{3} \\|\\left(1 / g_{m}\\right)$, we have\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{v_{X}}{v_{\\text {in }}} \\cdot \\frac{v_{\\text {out }}}{v_{X}}  \\tag{7.118}\\\\\n& =\\frac{R_{3} \\|\\left(1 / g_{m}\\right)}{R_{3} \\|\\left(1 / g_{m}\\right)+R_{S}} \\cdot g_{m} R_{D} \\tag{7.119}\n\\end{align*}\n$$\n\nassuming channel-length modulation is ignored. As previously stated, the voltage divider formed by $R_{1}$ and $R_{2}$ does not impact the small-signal behavior of the circuit at low frequencies.\n\nDesign the common-gate stage in Fig. 7.27 for the following parameters: $v_{\\text {out }} / v_{i n}=5, R_{S}=0, R_{3}=500 \\Omega, 1 / g_{m}=50 \\Omega$, power budget $=2 \\mathrm{~mW}, V_{D D}=1.8 \\mathrm{~V}$. Assume $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}$, and $\\lambda=0$.\n\nSolution From the power budget, we derive a total supply current of 1.11 mA. Allocating $10 \\mu \\mathrm{~A}$ to the voltage divider, $R_{1}$ and $R_{2}$, we allocate 1.1 mA for the drain current of $M_{1}$. Thus, the voltage drop across $R_{3}$ is 550 mV.\n\nWe now need to calculate two interdependent parameters: $W / L$ and $R_{D}$. A higher $W / L$ value results in a greater $g_{m}$, permitting a lower $R_{D}$. Following the approach in Example 7.11, we select an initial $V_{G S}$ to estimate $W / L$. For instance, if $V_{G S}=0.8 \\mathrm{~V}$, then $W / L=244$, and $g_{m}=2 I_{D} /\\left(V_{G S}-V_{T H}\\right)=(136.4 \\Omega)^{-1}$, requiring $R_{D}=682 \\Omega$ for $v_{\\text {out }} / v_{\\text {in }}=5$.\n\nLet's verify if $M_{1}$ operates in saturation. The gate voltage equals $V_{G S}$ plus the drop across $R_{3}$, totaling 1.35 V. Conversely, the drain voltage is $V_{D D}-I_{D} R_{D}=1.05 \\mathrm{~V}$. Since the drain voltage exceeds $V_{G}-V_{T H}$, $M_{1}$ is in saturation.\n\nThe voltage divider formed by $R_{1}$ and $R_{2}$ must set a gate voltage of 1.35 V while drawing $10 \\mu \\mathrm{~A}$:\n\n$$\n\\begin{align*}\n\\frac{V_{D D}}{R_{1}+R_{2}} & =10 \\mu \\mathrm{~A}  \\tag{7.120}\\\\\n\\frac{R_{2}}{R_{1}+R_{2}} V_{D D} & =1.35 \\mathrm{~V} \\tag{7.121}\n\\end{align*}\n$$\n\nThis results in $R_{1}=45 \\mathrm{k} \\Omega$ and $R_{2}=135 \\mathrm{k} \\Omega$.\nIf $W / L$ cannot exceed 100, what voltage gain can be achieved?\n\nSuppose in Example 7.14, we aim to minimize $W / L$ (and thus transistor capacitances).\n7.15 What is the minimum acceptable value of $W / L$?\n\nSolution For a given $I_{D}$, as $W / L$ decreases, $V_{G S}-V_{T H}$ increases. First, we must determine the maximum allowable $V_{G S}$. We apply the saturation condition as\n\n$$\n\\begin{equation*}\nV_{D D}-I_{D} R_{D}>V_{G S}+V_{R 3}-V_{T H} \\tag{7.122}\n\\end{equation*}\n$$\n\nwhere $V_{R 3}$ is the voltage drop across $R_{3}$, and set $g_{m} R_{D}$ to the required gain:\n\n$$\n\\begin{equation*}\n\\frac{2 I_{D}}{V_{G S}-V_{T H}} R_{D}=A_{v} \\tag{7.123}\n\\end{equation*}\n$$\n\nEliminating $R_{D}$ from Eqs. (7.122) and (7.123) yields:\n\n$$\n\\begin{equation*}\nV_{D D}-\\frac{A_{v}}{2}\\left(V_{G S}-V_{T H}\\right)>V_{G S}-V_{T H}+V_{R 3} \\tag{7.124}\n\\end{equation*}\n$$\n\nand thus\n\n$$\n\\begin{equation*}\nV_{G S}-V_{T H}<\\frac{V_{D D}-V_{R 3}}{\\frac{A_{v}}{2}+1} \\tag{7.125}\n\\end{equation*}\n$$\n\nIn other words,\n\n$$\n\\begin{equation*}\nW / L>\\frac{2 I_{D}}{\\mu_{n} C_{o x}\\left(2 \\frac{V_{D D}-V_{R 3}}{A_{v}+2}\\right)^{2}} \\tag{7.126}\n\\end{equation*}\n$$\n\nThus,\n\n$$\n\\begin{equation*}\nW / L>172.5 . \\tag{7.127}\n\\end{equation*}\n$$\n\nExercise Repeat the above example for $A_{v}=10$."
},
{
    "text": "Based on our analysis of CB biasing in Chapter 5, we infer that the CG amplifier can be biased as depicted in Fig. 7.27. By providing a path for the bias current to ground, resistor $R_{3}$ reduces the input impedance—and consequently the voltage gain—if the signal source has a finite output impedance, $R_{S}$.\nimage_name:Figure 7.27 CG stage with biasing\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: X}\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: X}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: X}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: R3, type: Resistor, value: R3, ports: {N1: X, N2: GND}\nname: g1, type: VoltageSource, value: g1, ports: {Np: g1, Nn: X}\n]\nextrainfo:The circuit represents a Common Gate (CG) amplifier stage with biasing. The input is applied at Vin, and the output is measured at Vout. The NMOS transistor M1 is configured in the CG setup, with its source connected to ground and its gate linked to node X. Biasing is achieved through resistors R1, R2, and R3, with a voltage source g1 setting the gate voltage. The load resistor RD connects the drain to VDD, and the input signal is AC coupled via capacitor C1.\n\nFigure 7.27 CG stage with biasing.\n\nGiven that the impedance seen to the right of node $X$ equals $R_{3} \\|\\left(1 / g_{m}\\right)$, we derive\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{v_{X}}{v_{\\text {in }}} \\cdot \\frac{v_{\\text {out }}}{v_{X}}  \\tag{7.118}\\\\\n& =\\frac{R_{3} \\|\\left(1 / g_{m}\\right)}{R_{3} \\|\\left(1 / g_{m}\\right)+R_{S}} \\cdot g_{m} R_{D} \\tag{7.119}\n\\end{align*}\n$$\n\nassuming channel-length modulation is ignored. As previously stated, the voltage divider formed by $R_{1}$ and $R_{2}$ does not influence the small-signal behavior of the circuit at low frequencies.\n\nDesign the common-gate stage shown in Fig. 7.27 with the following parameters: $v_{\\text {out }} / v_{i n}=5, R_{S}=0, R_{3}=500 \\Omega, 1 / g_{m}=50 \\Omega$, power budget $=2 \\mathrm{~mW}, V_{D D}=1.8 \\mathrm{~V}$. Assume $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}$, and $\\lambda=0$.\n\nSolution From the power budget, we determine a total supply current of 1.11 mA. Allocating $10 \\mu \\mathrm{~A}$ to the voltage divider, $R_{1}$ and $R_{2}$, we reserve 1.1 mA for the drain current of $M_{1}$. Thus, the voltage drop across $R_{3}$ is 550 mV.\n\nWe now need to calculate two interdependent parameters: $W / L$ and $R_{D}$. A higher $W / L$ results in a greater $g_{m}$, permitting a lower $R_{D}$. Following the approach in Example 7.11, we select an initial $V_{G S}$ to estimate $W / L$. For instance, if $V_{G S}=0.8 \\mathrm{~V}$, then $W / L=244$, and $g_{m}=2 I_{D} /\\left(V_{G S}-V_{T H}\\right)=(136.4 \\Omega)^{-1}$, requiring $R_{D}=682 \\Omega$ for $v_{\\text {out }} / v_{\\text {in }}=5$.\n\nLet's verify if $M_{1}$ operates in saturation. The gate voltage equals $V_{G S}$ plus the drop across $R_{3}$, totaling 1.35 V. Conversely, the drain voltage is $V_{D D}-I_{D} R_{D}=1.05 \\mathrm{~V}$. Since the drain voltage exceeds $V_{G}-V_{T H}$, $M_{1}$ is in saturation.\n\nThe resistive divider composed of $R_{1}$ and $R_{2}$ must set a gate voltage of 1.35 V while drawing $10 \\mu \\mathrm{~A}$:\n\n$$\n\\begin{align*}\n\\frac{V_{D D}}{R_{1}+R_{2}} & =10 \\mu \\mathrm{~A}  \\tag{7.120}\\\\\n\\frac{R_{2}}{R_{1}+R_{2}} V_{D D} & =1.35 \\mathrm{~V} \\tag{7.121}\n\\end{align*}\n$$\n\nThis results in $R_{1}=45 \\mathrm{k} \\Omega$ and $R_{2}=135 \\mathrm{k} \\Omega$.\nIf $W / L$ cannot exceed 100, what voltage gain is achievable?\n\nSuppose in Example 7.14, we aim to minimize $W / L$ (and thereby transistor capacitances).\n7.15 What is the minimum acceptable value of $W / L$?\n\nSolution For a given $I_{D}$, as $W / L$ decreases, $V_{G S}-V_{T H}$ increases. First, we must determine the maximum allowable $V_{G S}$. We apply the saturation condition as\n\n$$\n\\begin{equation*}\nV_{D D}-I_{D} R_{D}>V_{G S}+V_{R 3}-V_{T H} \\tag{7.122}\n\\end{equation*}\n$$\n\nwhere $V_{R 3}$ is the voltage drop across $R_{3}$, and set $g_{m} R_{D}$ to the required gain:\n\n$$\n\\begin{equation*}\n\\frac{2 I_{D}}{V_{G S}-V_{T H}} R_{D}=A_{v} \\tag{7.123}\n\\end{equation*}\n$$\n\nEliminating $R_{D}$ from Eqs. (7.122) and (7.123) yields:\n\n$$\n\\begin{equation*}\nV_{D D}-\\frac{A_{v}}{2}\\left(V_{G S}-V_{T H}\\right)>V_{G S}-V_{T H}+V_{R 3} \\tag{7.124}\n\\end{equation*}\n$$\n\nand thus\n\n$$\n\\begin{equation*}\nV_{G S}-V_{T H}<\\frac{V_{D D}-V_{R 3}}{\\frac{A_{v}}{2}+1} \\tag{7.125}\n\\end{equation*}\n$$\n\nIn other words,\n\n$$\n\\begin{equation*}\nW / L>\\frac{2 I_{D}}{\\mu_{n} C_{o x}\\left(2 \\frac{V_{D D}-V_{R 3}}{A_{v}+2}\\right)^{2}} \\tag{7.126}\n\\end{equation*}\n$$\n\nIt follows that\n\n$$\n\\begin{equation*}\nW / L>172.5 . \\tag{7.127}\n\\end{equation*}\n$$\n\nExercise Repeat the above example for $A_{v}=10$."
},
{
    "text": "Following our examination of CB biasing in Chapter 5, we推测 the CG amplifier can be biased as depicted in Fig. 7.27. By providing a path for the bias current to ground, resistor $R_{3}$ reduces the input impedance—and consequently the voltage gain—if the signal source has a finite output impedance, $R_{S}$.\n\nimage_name: Figure 7.27 CG stage with biasing\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: X}\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: X}\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: X}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: R1, type: Resistor, value: R1, ports: {N1: VDD, N2: g1}\nname: R2, type: Resistor, value: R2, ports: {N1: g1, N2: GND}\nname: R3, type: Resistor, value: R3, ports: {N1: X, N2: GND}\nname: g1, type: VoltageSource, value: g1, ports: {Np: g1, Nn: X}\n]\nextrainfo: The circuit represents a Common Gate (CG) amplifier stage with biasing. The input is applied at Vin, and the output is obtained at Vout. The NMOS transistor M1 is configured in the CG setup, with its source connected to ground and its gate linked to node X. Biasing is achieved through resistors R1, R2, and R3, with a voltage source g1 setting the gate voltage. The load resistor RD connects the drain to VDD, and the input signal is AC coupled via capacitor C1.\n\nFigure 7.27 CG stage with biasing.\n\nGiven that the impedance to the right of node $X$ equals $R_{3} \\|\\left(1 / g_{m}\\right)$, we derive:\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{v_{X}}{v_{\\text {in }}} \\cdot \\frac{v_{\\text {out }}}{v_{X}}  \\tag{7.118}\\\\\n& =\\frac{R_{3} \\|\\left(1 / g_{m}\\right)}{R_{3} \\|\\left(1 / g_{m}\\right)+R_{S}} \\cdot g_{m} R_{D} \\tag{7.119}\n\\end{align*}\n$$\n\nHere, channel-length modulation is ignored. As previously noted, the voltage divider formed by $R_{1}$ and $R_{2}$ does not influence the small-signal behavior of the circuit at low frequencies.\n\nDesign the common-gate stage in Fig. 7.27 for the specified parameters: $v_{\\text {out }} / v_{\\text {in }}=5, R_{S}=0, R_{3}=500 \\Omega, 1 / g_{m}=50 \\Omega$, power budget $=2 \\mathrm{~mW}, V_{D D}=1.8 \\mathrm{~V}$. Assume $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}$, and $\\lambda=0$.\n\nSolution: From the power budget, we calculate a total supply current of 1.11 mA. Assigning $10 \\mu \\mathrm{~A}$ to the voltage divider, $R_{1}$ and $R_{2}$, we allocate 1.1 mA to the drain current of $M_{1}$. Thus, the voltage drop across $R_{3}$ is 550 mV.\n\nNext, we need to determine two interconnected parameters: $W / L$ and $R_{D}$. A higher $W / L$ results in a greater $g_{m}$, permitting a lower $R_{D}$. Following the approach in Example 7.11, we select an initial $V_{G S}$ to estimate $W / L$. For instance, if $V_{G S}=0.8 \\mathrm{~V}$, then $W / L=244$, and $g_{m}=2 I_{D} /\\left(V_{G S}-V_{T H}\\right)=(136.4 \\Omega)^{-1}$, necessitating $R_{D}=682 \\Omega$ for $v_{\\text {out }} / v_{\\text {in }}=5$.\n\nWe must verify if $M_{1}$ operates in saturation. The gate voltage equals $V_{G S}$ plus the drop across $R_{3}$, totaling 1.35 V. Conversely, the drain voltage is $V_{D D}-I_{D} R_{D}=1.05 \\mathrm{~V}$. Since the drain voltage surpasses $V_{G}-V_{T H}$, $M_{1}$ is indeed in saturation.\n\nThe resistive divider composed of $R_{1}$ and $R_{2}$ must set the gate voltage to 1.35 V while drawing $10 \\mu \\mathrm{~A}$:\n\n$$\n\\begin{align*}\n\\frac{V_{D D}}{R_{1}+R_{2}} & =10 \\mu \\mathrm{~A}  \\tag{7.120}\\\\\n\\frac{R_{2}}{R_{1}+R_{2}} V_{D D} & =1.35 \\mathrm{~V} \\tag{7.121}\n\\end{align*}\n$$\n\nThus, $R_{1}=45 \\mathrm{k} \\Omega$ and $R_{2}=135 \\mathrm{k} \\Omega$.\nIf $W / L$ cannot exceed 100, what voltage gain is achievable?\n\nSuppose in Example 7.14, we aim to minimize $W / L$ (and thereby transistor capacitances).\n7.15 What is the minimum acceptable value of $W / L$?\n\nSolution: For a given $I_{D}$, as $W / L$ decreases, $V_{G S}-V_{T H}$ increases. First, we must compute the maximum allowable $V_{G S}$. We apply the saturation condition as:\n\n$$\n\\begin{equation*}\nV_{D D}-I_{D} R_{D}>V_{G S}+V_{R 3}-V_{T H} \\tag{7.122}\n\\end{equation*}\n$$\n\nwhere $V_{R 3}$ represents the voltage drop across $R_{3}$, and set $g_{m} R_{D}$ to the required gain:\n\n$$\n\\begin{equation*}\n\\frac{2 I_{D}}{V_{G S}-V_{T H}} R_{D}=A_{v} \\tag{7.123}\n\\end{equation*}\n$$\n\nEliminating $R_{D}$ from Eqs. (7.122) and (7.123) yields:\n\n$$\n\\begin{equation*}\nV_{D D}-\\frac{A_{v}}{2}\\left(V_{G S}-V_{T H}\\right)>V_{G S}-V_{T H}+V_{R 3} \\tag{7.124}\n\\end{equation*}\n$$\n\nand thus:\n\n$$\n\\begin{equation*}\nV_{G S}-V_{T H}<\\frac{V_{D D}-V_{R 3}}{\\frac{A_{v}}{2}+1} \\tag{7.125}\n\\end{equation*}\n$$\n\nIn other words:\n\n$$\n\\begin{equation*}\nW / L>\\frac{2 I_{D}}{\\mu_{n} C_{o x}\\left(2 \\frac{V_{D D}-V_{R 3}}{A_{v}+2}\\right)^{2}} \\tag{7.126}\n\\end{equation*}\n$$\n\nIt follows that:\n\n$$\n\\begin{equation*}\nW / L>172.5 . \\tag{7.127}\n\\end{equation*}\n$$\n\nExercise: Repeat the above example for $A_{v}=10$."
},
{
    "text": "When the gate voltage of $M_{1}$ in Fig. 7.28 is slightly increased by $\\Delta V_{i n}$, the gate-source voltage tends to rise, which in turn boosts the source current and the output voltage. Consequently, $V_{\\text {out }}$ \"tracks\" $V_{\\text {in }}$. Given that the dc level of $V_{\\text {out }}$ is lower than that of $V_{\\text {in }}$ by $V_{G S}$, the follower can act as a \"level shift\" circuit. Based on our analysis of emitter followers in Chapter 5, we also anticipate this configuration to exhibit a gain less than unity.\n\nFigure 7.29(a) illustrates the small-signal equivalent of the source follower, including channel-length modulation. Noting that $r_{O}$ is in parallel with $R_{L}$, we derive\n\n$$\n\\begin{equation*}\ng_{m} v_{1}\\left(r_{O} \\| R_{L}\\right)=v_{\\text {out }} \\tag{7.128}\n\\end{equation*}\n$$\n\nAdditionally,\n\n$$\n\\begin{equation*}\nv_{\\text {in }}=v_{1}+v_{\\text {out }} \\tag{7.129}\n\\end{equation*}\n$$\n\nFrom this, we obtain\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{g_{m}\\left(r_{O} \\| R_{L}\\right)}{1+g_{m}\\left(r_{O} \\| R_{L}\\right)}  \\tag{7.130}\\\\\n& =\\frac{r_{O} \\| R_{L}}{\\frac{1}{g_{m}}+r_{O} \\| R_{L}} \\tag{7.131}\n\\end{align*}\n$$\n\nThus, the voltage gain is positive but less than unity. It is beneficial to maximize $R_{L}$ (and $r_{O}$).\n\nSimilar to emitter followers, the above result can be viewed as a voltage division between a resistance of $1 / g_{m}$ and another of $r_{O} \\| R_{L}$ [Fig. 7.29(b)]. However, a resistance in series with the gate does not affect Eq. (7.131) at low frequencies because it experiences no voltage drop.\nimage_name:(b)\ndescription:\n[\nname: Vin, type: VoltageSource, ports: {Np: Vin, Nn: GND}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: Vout}\nname: rO, type: Resistor, value: rO, ports: {N1: GND, N2: Vout}\nname: RL, type: Resistor, value: RL, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a source follower configuration with a voltage-controlled current source and resistive load. The voltage gain is positive but less than unity.\n\n(a)\nimage_name:(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: 1/gm, type: Resistor, value: 1/gm, ports: {N1: Vin, N2: Vout}\nname: RL||ro, type: Resistor, value: RL||ro, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a source follower configuration with a voltage-controlled current source and resistive load. The voltage gain is positive but less than unity.\n\n(b)\n\nExample\n7.16\n\nA source follower is configured as shown in Fig. 7.30(a), where $M_{2}$ functions as a current source. Determine the voltage gain of the circuit.\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: Vin}\nname: M2, type: NMOS, ports: {S: GND, D: Vout, G: Vb}\n]\nextrainfo:The circuit is a source follower configuration with a voltage-controlled current source and resistive load. The voltage gain is positive but less than unity. M1 acts as the main transistor providing the output voltage at Vout, and M2 serves as a current source.\n\n(a)\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vout, D: GND, G: Vin}\nname: rO1, type: Resistor, value: rO1, ports: {N1: GND, N2: Vout}\nname: rO2, type: Resistor, value: rO2, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a source follower configuration with NMOS M1 providing the output voltage at Vout. Resistors rO1 and rO2 form part of the load, with rO2 connected to ground. The voltage gain is positive but less than unity.\n\n(b)\n\nFigure 7.30 (a) Follower with ideal current source, (b) simplified circuit.\n\nSolution Since $M_{2}$ presents an impedance of $r_{O 2}$ from the output node to ac ground [Fig. 7.30(b)], we substitute $R_{L}=r_{O 2}$ in Eq. (7.131):\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{r_{O 1} \\| r_{O 2}}{\\frac{1}{g_{m 1}}+r_{O 1} \\| r_{O 2}} \\tag{7.132}\n\\end{equation*}\n$$\n\nIf $r_{O 1} \\| r_{O 2} \\gg 1 / g_{m 1}$, then $A_{v} \\approx 1$.\n\nExercise Repeat the above example if a resistance of value $R_{S}$ is placed in series with the source of $M_{2}$.\n\nExample\n7.17\n\nDesign a source follower to drive a $50-\\Omega$ load with a voltage gain of 0.5 and a power budget of 10 mW. Assume $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}, \\lambda=0$, and $V_{D D}=1.8 \\mathrm{~V}$.\n\nSolution With $R_{L}=50 \\Omega$ and $r_{O}=\\infty$ in Fig. 7.28, we have\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{R_{L}}{\\frac{1}{g_{m}}+R_{L}} \\tag{7.133}\n\\end{equation*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\ng_{m}=\\frac{1}{50 \\Omega} . \\tag{7.134}\n\\end{equation*}\n$$\n\nThe power budget and supply voltage allow a maximum supply current of 5.56 mA. Using this value for $I_{D}$ in $g_{m}=\\sqrt{2 \\mu_{n} C_{o x}(W / L) I_{D}}$ gives\n\n$$\n\\begin{equation*}\nW / L=360 . \\tag{7.135}\n\\end{equation*}\n$$\n\nExercise What voltage gain can be achieved if the power budget is increased to 15 mW?\nimage_name:Figure 7.31 Output resistance of source follower\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: s1, G: GND}\nname: ro, type: Resistor, value: ro, ports: {N1: s1, N2: GND}\nname: RL, type: Resistor, value: RL, ports: {N1: s1, N2: GND}\n]\nextrainfo:The circuit diagram shows a source follower configuration with NMOS transistor M1. The output resistance is calculated as the parallel combination of 1/gm, ro, and RL. The source node s1 connects to both resistors ro and RL, which are grounded at the other end.\n\nFigure 7.31 Output resistance of source follower.\n\nIt is useful to calculate the output impedance of the source follower. ${ }^{2}$ As shown in Fig. 7.31, $R_{\\text {out }}$ comprises the resistance looking up into the source in parallel with that looking down into $R_{L}$. With $\\lambda \\neq 0$, the former is $\\left(1 / g_{m}\\right) \\| r_{O}$, resulting in\n\n$$\n\\begin{align*}\nR_{\\text {out }} & =\\frac{1}{g_{m}}\\left\\|r_{O}\\right\\| R_{L}  \\tag{7.136}\\\\\n& \\approx \\frac{1}{g_{m}} \\| R_{L} . \\tag{7.137}\n\\end{align*}\n$$\n\nIn summary, the source follower exhibits a very high input impedance and a relatively low output impedance, providing effective buffering capability.\nimage_name:Figure 7.32 Source follower with input and output coupling capacitors\ndescription:\n[\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: g1}\nname: C2, type: Capacitor, value: C2, ports: {Np: s1, Nn: Vout}\nname: RG, type: Resistor, value: RG, ports: {N1: g1, N2: VDD}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: M1, type: NMOS, ports: {S: s1, D: VDD, G: g1}\n]\nextrainfo:The circuit is a source follower with input and output coupling capacitors, providing high input impedance and low output impedance. The NMOS transistor M1 operates in saturation with the gate and drain voltages equal.\n\nFigure 7.32 Source follower with input and output coupling capacitors."
},
{
    "text": "When the gate voltage of $M_{1}$ in Fig. 7.28 is slightly increased by $\\Delta V_{i n}$, the gate-source voltage tends to rise, leading to an increase in the source current and subsequently the output voltage. Consequently, $V_{\\text {out }}$ \"tracks\" $V_{\\text {in }}$. Given that the dc level of $V_{\\text {out }}$ is lower than that of $V_{\\text {in }}$ by $V_{G S}$, the follower can act as a \"level shift\" circuit. From our analysis of emitter followers in Chapter 5, we also anticipate this configuration to exhibit a gain less than unity.\n\nFigure 7.29(a) illustrates the small-signal equivalent of the source follower, including channel-length modulation. Noting that $r_{O}$ is in parallel with $R_{L}$, we derive\n\n$$\n\\begin{equation*}\ng_{m} v_{1}\\left(r_{O} \\| R_{L}\\right)=v_{\\text {out }} \\tag{7.128}\n\\end{equation*}\n$$\n\nAdditionally,\n\n$$\n\\begin{equation*}\nv_{\\text {in }}=v_{1}+v_{\\text {out }} \\tag{7.129}\n\\end{equation*}\n$$\n\nThis leads to\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{g_{m}\\left(r_{O} \\| R_{L}\\right)}{1+g_{m}\\left(r_{O} \\| R_{L}\\right)}  \\tag{7.130}\\\\\n& =\\frac{r_{O} \\| R_{L}}{\\frac{1}{g_{m}}+r_{O} \\| R_{L}} \\tag{7.131}\n\\end{align*}\n$$\n\nThus, the voltage gain is positive but less than unity. Maximizing $R_{L}$ (and $r_{O}$) is desirable.\n\nSimilar to emitter followers, the above result can be viewed as a voltage division between a resistance of $1 / g_{m}$ and another of $r_{O} \\| R_{L}$ [Fig. 7.29(b)]. However, a resistance in series with the gate does not affect Eq. (7.131) at low frequencies due to its negligible voltage drop.\nimage_name:(b)\ndescription:\n[\nname: Vin, type: VoltageSource, ports: {Np: Vin, Nn: GND}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: Vout}\nname: rO, type: Resistor, value: rO, ports: {N1: GND, N2: Vout}\nname: RL, type: Resistor, value: RL, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a source follower configuration with a voltage-controlled current source and resistive load. The voltage gain is positive but less than unity.\n\n(a)\nimage_name:(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: 1/gm, type: Resistor, value: 1/gm, ports: {N1: Vin, N2: Vout}\nname: RL||ro, type: Resistor, value: RL||ro, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a source follower configuration with a voltage-controlled current source and resistive load. The voltage gain is positive but less than unity.\n\n(b)\n\nExample\n7.16\n\nA source follower is implemented as shown in Fig. 7.30(a), where $M_{2}$ acts as a current source. Determine the voltage gain of the circuit.\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: Vin}\nname: M2, type: NMOS, ports: {S: GND, D: Vout, G: Vb}\n]\nextrainfo:The circuit is a source follower configuration with a voltage-controlled current source and resistive load. The voltage gain is positive but less than unity. M1 functions as the main transistor providing the output voltage at Vout, and M2 serves as a current source.\n\n(a)\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vout, D: GND, G: Vin}\nname: rO1, type: Resistor, value: rO1, ports: {N1: GND, N2: Vout}\nname: rO2, type: Resistor, value: rO2, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a source follower configuration with NMOS M1 providing the output voltage at Vout. Resistors rO1 and rO2 form part of the load, with rO2 connected to ground. The voltage gain is positive but less than unity.\n\n(b)\n\nFigure 7.30 (a) Follower with ideal current source, (b) simplified circuit.\n\nSolution Since $M_{2}$ presents an impedance of $r_{O 2}$ from the output node to ac ground [Fig. 7.30(b)], we substitute $R_{L}=r_{O 2}$ in Eq. (7.131):\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{r_{O 1} \\| r_{O 2}}{\\frac{1}{g_{m 1}}+r_{O 1} \\| r_{O 2}} \\tag{7.132}\n\\end{equation*}\n$$\n\nIf $r_{O 1} \\| r_{O 2} \\gg 1 / g_{m 1}$, then $A_{v} \\approx 1$.\n\nExercise Repeat the above example if a resistance of value $R_{S}$ is added in series with the source of $M_{2}$.\n\nExample\n7.17\n\nDesign a source follower to drive a $50-\\Omega$ load with a voltage gain of 0.5 and a power budget of 10 mW. Assume $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}, \\lambda=0$, and $V_{D D}=1.8 \\mathrm{~V}$.\n\nSolution With $R_{L}=50 \\Omega$ and $r_{O}=\\infty$ in Fig. 7.28, we obtain\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{R_{L}}{\\frac{1}{g_{m}}+R_{L}} \\tag{7.133}\n\\end{equation*}\n$$\n\nThus,\n\n$$\n\\begin{equation*}\ng_{m}=\\frac{1}{50 \\Omega} . \\tag{7.134}\n\\end{equation*}\n$$\n\nThe power budget and supply voltage allow a maximum supply current of 5.56 mA. Using this $I_{D}$ value in $g_{m}=\\sqrt{2 \\mu_{n} C_{o x}(W / L) I_{D}}$ results in\n\n$$\n\\begin{equation*}\nW / L=360 . \\tag{7.135}\n\\end{equation*}\n$$\n\nExercise Determine the achievable voltage gain if the power budget is increased to 15 mW.\nimage_name:Figure 7.31 Output resistance of source follower\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: s1, G: GND}\nname: ro, type: Resistor, value: ro, ports: {N1: s1, N2: GND}\nname: RL, type: Resistor, value: RL, ports: {N1: s1, N2: GND}\n]\nextrainfo:The circuit diagram shows a source follower configuration with NMOS transistor M1. The output resistance is calculated as the parallel combination of 1/gm, ro, and RL. The source node s1 connects to both resistors ro and RL, which are grounded at the other end.\n\nFigure 7.31 Output resistance of source follower.\n\nIt is useful to calculate the output impedance of the source follower. As shown in Fig. 7.31, $R_{\\text {out }}$ comprises the resistance looking up into the source in parallel with that looking down into $R_{L}$. With $\\lambda \\neq 0$, the former equals $\\left(1 / g_{m}\\right) \\| r_{O}$, giving\n\n$$\n\\begin{align*}\nR_{\\text {out }} & =\\frac{1}{g_{m}}\\left\\|r_{O}\\right\\| R_{L}  \\tag{7.136}\\\\\n& \\approx \\frac{1}{g_{m}} \\| R_{L} . \\tag{7.137}\n\\end{align*}\n$$\n\nIn summary, the source follower has a very high input impedance and a relatively low output impedance, providing effective buffering capability.\nimage_name:Figure 7.32 Source follower with input and output coupling capacitors\ndescription:\n[\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: g1}\nname: C2, type: Capacitor, value: C2, ports: {Np: s1, Nn: Vout}\nname: RG, type: Resistor, value: RG, ports: {N1: g1, N2: VDD}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: M1, type: NMOS, ports: {S: s1, D: VDD, G: g1}\n]\nextrainfo:The circuit is a source follower with input and output coupling capacitors, providing high input impedance and low output impedance. The NMOS transistor M1 operates in saturation with the gate and drain voltages equal.\n\nFigure 7.32 Source follower with input and output coupling capacitors."
},
{
    "text": "When the gate voltage of $M_{1}$ in Fig. 7.28 is slightly increased by $\\Delta V_{i n}$, the gate-source voltage tends to rise, leading to an increase in the source current and subsequently the output voltage. Consequently, $V_{\\text {out }}$ \"tracks\" $V_{\\text {in }}$. Given that the dc level of $V_{\\text {out }}$ is lower than that of $V_{\\text {in }}$ by $V_{G S}$, the follower can function as a \"level shift\" circuit. Based on our analysis of emitter followers in Chapter 5, we also anticipate this configuration to exhibit a gain less than unity.\n\nFigure 7.29(a) illustrates the small-signal equivalent of the source follower, incorporating channel-length modulation. Noting that $r_{O}$ is in parallel with $R_{L}$, we derive\n\n$$\n\\begin{equation*}\ng_{m} v_{1}\\left(r_{O} \\| R_{L}\\right)=v_{\\text {out }} \\tag{7.128}\n\\end{equation*}\n$$\n\nAdditionally,\n\n$$\n\\begin{equation*}\nv_{\\text {in }}=v_{1}+v_{\\text {out }} \\tag{7.129}\n\\end{equation*}\n$$\n\nFrom this, we obtain\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{g_{m}\\left(r_{O} \\| R_{L}\\right)}{1+g_{m}\\left(r_{O} \\| R_{L}\\right)}  \\tag{7.130}\\\\\n& =\\frac{r_{O} \\| R_{L}}{\\frac{1}{g_{m}}+r_{O} \\| R_{L}} \\tag{7.131}\n\\end{align*}\n$$\n\nThus, the voltage gain is positive but less than unity. It is beneficial to maximize $R_{L}$ (and $r_{O}$).\n\nSimilar to emitter followers, the above result can be viewed as voltage division between a resistance of $1 / g_{m}$ and another of $r_{O} \\| R_{L}$ [Fig. 7.29(b)]. However, a resistance in series with the gate does not affect Eq. (7.131) (at low frequencies) as it experiences no voltage drop.\nimage_name:(b)\ndescription:\n[\nname: Vin, type: VoltageSource, ports: {Np: Vin, Nn: GND}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: Vout}\nname: rO, type: Resistor, value: rO, ports: {N1: GND, N2: Vout}\nname: RL, type: Resistor, value: RL, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a source follower configuration with a voltage-controlled current source and resistive load. The voltage gain is positive but less than unity.\n\n(a)\nimage_name:(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: 1/gm, type: Resistor, value: 1/gm, ports: {N1: Vin, N2: Vout}\nname: RL||ro, type: Resistor, value: RL||ro, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a source follower configuration with a voltage-controlled current source and resistive load. The voltage gain is positive but less than unity.\n\n(b)\n\nExample\n7.16\n\nA source follower is implemented as shown in Fig. 7.30(a), where $M_{2}$ acts as a current source. Determine the voltage gain of the circuit.\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: Vin}\nname: M2, type: NMOS, ports: {S: GND, D: Vout, G: Vb}\n]\nextrainfo:The circuit is a source follower configuration with a voltage-controlled current source and resistive load. The voltage gain is positive but less than unity. M1 acts as the main transistor providing the output voltage at Vout, and M2 serves as a current source.\n\n(a)\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vout, D: GND, G: Vin}\nname: rO1, type: Resistor, value: rO1, ports: {N1: GND, N2: Vout}\nname: rO2, type: Resistor, value: rO2, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a source follower configuration with NMOS M1 providing the output voltage at Vout. Resistors rO1 and rO2 form part of the load, with rO2 connected to ground. The voltage gain is positive but less than unity.\n\n(b)\n\nFigure 7.30 (a) Follower with ideal current source, (b) simplified circuit.\n\nSolution Since $M_{2}$ presents an impedance of $r_{O 2}$ from the output node to ac ground [Fig. 7.30(b)], we substitute $R_{L}=r_{O 2}$ in Eq. (7.131):\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{r_{O 1} \\| r_{O 2}}{\\frac{1}{g_{m 1}}+r_{O 1} \\| r_{O 2}} \\tag{7.132}\n\\end{equation*}\n$$\n\nIf $r_{O 1} \\| r_{O 2} \\gg 1 / g_{m 1}$, then $A_{v} \\approx 1$.\n\nExercise Repeat the above example if a resistance of value $R_{S}$ is placed in series with the source of $M_{2}$.\n\nExample\n7.17\n\nDesign a source follower to drive a $50-\\Omega$ load with a voltage gain of 0.5 and a power budget of 10 mW. Assume $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}, \\lambda=0$, and $V_{D D}=1.8 \\mathrm{~V}$.\n\nSolution With $R_{L}=50 \\Omega$ and $r_{O}=\\infty$ in Fig. 7.28, we have\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{R_{L}}{\\frac{1}{g_{m}}+R_{L}} \\tag{7.133}\n\\end{equation*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\ng_{m}=\\frac{1}{50 \\Omega} . \\tag{7.134}\n\\end{equation*}\n$$\n\nThe power budget and supply voltage allow a maximum supply current of 5.56 mA. Using this value for $I_{D}$ in $g_{m}=\\sqrt{2 \\mu_{n} C_{o x}(W / L) I_{D}}$ gives\n\n$$\n\\begin{equation*}\nW / L=360 . \\tag{7.135}\n\\end{equation*}\n$$\n\nExercise What voltage gain can be achieved if the power budget is increased to 15 mW?\nimage_name:Figure 7.31 Output resistance of source follower\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: s1, G: GND}\nname: ro, type: Resistor, value: ro, ports: {N1: s1, N2: GND}\nname: RL, type: Resistor, value: RL, ports: {N1: s1, N2: GND}\n]\nextrainfo:The circuit diagram shows a source follower configuration with NMOS transistor M1. The output resistance is calculated as the parallel combination of 1/gm, ro, and RL. The source node s1 connects to both resistors ro and RL, which are grounded at the other end.\n\nFigure 7.31 Output resistance of source follower.\n\nIt is useful to calculate the output impedance of the source follower. As shown in Fig. 7.31, $R_{\\text {out }}$ comprises the resistance seen looking into the source in parallel with that seen looking into $R_{L}$. With $\\lambda \\neq 0$, the former equals $\\left(1 / g_{m}\\right) \\| r_{O}$, resulting in\n\n$$\n\\begin{align*}\nR_{\\text {out }} & =\\frac{1}{g_{m}}\\left\\|r_{O}\\right\\| R_{L}  \\tag{7.136}\\\\\n& \\approx \\frac{1}{g_{m}} \\| R_{L} . \\tag{7.137}\n\\end{align*}\n$$\n\nIn summary, the source follower exhibits a very high input impedance and a relatively low output impedance, thus providing buffering capability.\nimage_name:Figure 7.32 Source follower with input and output coupling capacitors\ndescription:\n[\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: g1}\nname: C2, type: Capacitor, value: C2, ports: {Np: s1, Nn: Vout}\nname: RG, type: Resistor, value: RG, ports: {N1: g1, N2: VDD}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: M1, type: NMOS, ports: {S: s1, D: VDD, G: g1}\n]\nextrainfo:The circuit is a source follower with input and output coupling capacitors, providing high input impedance and low output impedance. The NMOS transistor M1 operates in saturation with the gate and drain voltages equal.\n\nFigure 7.32 Source follower with input and output coupling capacitors."
},
{
    "text": "When the gate voltage of $M_{1}$ in Fig. 7.28 is slightly increased by $\\Delta V_{i n}$, the gate-source voltage tends to rise, which in turn boosts the source current and the output voltage. Consequently, $V_{\\text {out }}$ \"tracks\" $V_{\\text {in }}$. Given that the dc level of $V_{\\text {out }}$ is lower than that of $V_{\\text {in }}$ by $V_{G S}$, the follower can act as a \"level shift\" circuit. From our earlier analysis of emitter followers in Chapter 5, we also anticipate this configuration to exhibit a gain less than unity.\n\nFigure 7.29(a) illustrates the small-signal equivalent of the source follower, incorporating channel-length modulation. Noting that $r_{O}$ is in parallel with $R_{L}$, we derive\n\n$$\n\\begin{equation*}\ng_{m} v_{1}\\left(r_{O} \\| R_{L}\\right)=v_{\\text {out }} \\tag{7.128}\n\\end{equation*}\n$$\n\nAdditionally,\n\n$$\n\\begin{equation*}\nv_{\\text {in }}=v_{1}+v_{\\text {out }} \\tag{7.129}\n\\end{equation*}\n$$\n\nThis leads to\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{g_{m}\\left(r_{O} \\| R_{L}\\right)}{1+g_{m}\\left(r_{O} \\| R_{L}\\right)}  \\tag{7.130}\\\\\n& =\\frac{r_{O} \\| R_{L}}{\\frac{1}{g_{m}}+r_{O} \\| R_{L}} \\tag{7.131}\n\\end{align*}\n$$\n\nThus, the voltage gain is positive but less than unity. It is beneficial to maximize $R_{L}$ (and $r_{O}$).\n\nSimilar to emitter followers, the above result can be viewed as a voltage division between a resistance of $1 / g_{m}$ and another of $r_{O} \\| R_{L}$ [Fig. 7.29(b)]. However, a resistance in series with the gate does not impact Eq. (7.131) at low frequencies due to its negligible voltage drop.\nimage_name:(b)\ndescription:\n[\nname: Vin, type: VoltageSource, ports: {Np: Vin, Nn: GND}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: Vout}\nname: rO, type: Resistor, value: rO, ports: {N1: GND, N2: Vout}\nname: RL, type: Resistor, value: RL, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a source follower configuration with a voltage-controlled current source and resistive load. The voltage gain is positive but less than unity.\n\n(a)\nimage_name:(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: 1/gm, type: Resistor, value: 1/gm, ports: {N1: Vin, N2: Vout}\nname: RL||ro, type: Resistor, value: RL||ro, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a source follower configuration with a voltage-controlled current source and resistive load. The voltage gain is positive but less than unity.\n\n(b)\n\nExample\n7.16\n\nA source follower is configured as shown in Fig. 7.30(a), where $M_{2}$ functions as a current source. Determine the voltage gain of the circuit.\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: Vin}\nname: M2, type: NMOS, ports: {S: GND, D: Vout, G: Vb}\n]\nextrainfo:The circuit is a source follower configuration with a voltage-controlled current source and resistive load. The voltage gain is positive but less than unity. M1 acts as the main transistor providing the output voltage at Vout, and M2 serves as a current source.\n\n(a)\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vout, D: GND, G: Vin}\nname: rO1, type: Resistor, value: rO1, ports: {N1: GND, N2: Vout}\nname: rO2, type: Resistor, value: rO2, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a source follower configuration with NMOS M1 providing the output voltage at Vout. Resistors rO1 and rO2 form part of the load, with rO2 connected to ground. The voltage gain is positive but less than unity.\n\n(b)\n\nFigure 7.30 (a) Follower with ideal current source, (b) simplified circuit.\n\nSolution Since $M_{2}$ presents an impedance of $r_{O 2}$ from the output node to ac ground [Fig. 7.30(b)], we substitute $R_{L}=r_{O 2}$ in Eq. (7.131):\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{r_{O 1} \\| r_{O 2}}{\\frac{1}{g_{m 1}}+r_{O 1} \\| r_{O 2}} \\tag{7.132}\n\\end{equation*}\n$$\n\nIf $r_{O 1} \\| r_{O 2} \\gg 1 / g_{m 1}$, then $A_{v} \\approx 1$.\n\nExercise Repeat the above example if a resistance of value $R_{S}$ is placed in series with the source of $M_{2}$.\n\nExample\n7.17\n\nDesign a source follower to drive a $50-\\Omega$ load with a voltage gain of 0.5 and a power budget of 10 mW. Assume $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}, \\lambda=0$, and $V_{D D}=1.8 \\mathrm{~V}$.\n\nSolution With $R_{L}=50 \\Omega$ and $r_{O}=\\infty$ in Fig. 7.28, we obtain\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{R_{L}}{\\frac{1}{g_{m}}+R_{L}} \\tag{7.133}\n\\end{equation*}\n$$\n\nThus,\n\n$$\n\\begin{equation*}\ng_{m}=\\frac{1}{50 \\Omega} . \\tag{7.134}\n\\end{equation*}\n$$\n\nThe power budget and supply voltage allow a maximum supply current of 5.56 mA. Using this $I_{D}$ value in $g_{m}=\\sqrt{2 \\mu_{n} C_{o x}(W / L) I_{D}}$ results in\n\n$$\n\\begin{equation*}\nW / L=360 . \\tag{7.135}\n\\end{equation*}\n$$\n\nExercise What voltage gain can be achieved if the power budget is increased to 15 mW?\nimage_name:Figure 7.31 Output resistance of source follower\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: s1, G: GND}\nname: ro, type: Resistor, value: ro, ports: {N1: s1, N2: GND}\nname: RL, type: Resistor, value: RL, ports: {N1: s1, N2: GND}\n]\nextrainfo:The circuit diagram shows a source follower configuration with NMOS transistor M1. The output resistance is calculated as the parallel combination of 1/gm, ro, and RL. The source node s1 connects to both resistors ro and RL, which are grounded at the other end.\n\nFigure 7.31 Output resistance of source follower.\n\nIt is useful to calculate the output impedance of the source follower. As depicted in Fig. 7.31, $R_{\\text {out }}$ comprises the resistance looking up into the source in parallel with that looking down into $R_{L}$. With $\\lambda \\neq 0$, the former is $\\left(1 / g_{m}\\right) \\| r_{O}$, resulting in\n\n$$\n\\begin{align*}\nR_{\\text {out }} & =\\frac{1}{g_{m}}\\left\\|r_{O}\\right\\| R_{L}  \\tag{7.136}\\\\\n& \\approx \\frac{1}{g_{m}} \\| R_{L} . \\tag{7.137}\n\\end{align*}\n$$\n\nIn summary, the source follower features a very high input impedance and a relatively low output impedance, providing effective buffering capability.\nimage_name:Figure 7.32 Source follower with input and output coupling capacitors\ndescription:\n[\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: g1}\nname: C2, type: Capacitor, value: C2, ports: {Np: s1, Nn: Vout}\nname: RG, type: Resistor, value: RG, ports: {N1: g1, N2: VDD}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: M1, type: NMOS, ports: {S: s1, D: VDD, G: g1}\n]\nextrainfo:The circuit is a source follower with input and output coupling capacitors, providing high input impedance and low output impedance. The NMOS transistor M1 operates in saturation with the gate and drain voltages equal.\n\nFigure 7.32 Source follower with input and output coupling capacitors."
},
{
    "text": "When the gate voltage of $M_{1}$ in Fig. 7.28 is slightly increased by $\\Delta V_{i n}$, the gate-source voltage tends to rise, which in turn boosts the source current and the output voltage. Consequently, $V_{\\text {out }}$ \"tracks\" $V_{\\text {in }}$. Given that the dc level of $V_{\\text {out }}$ is lower than that of $V_{\\text {in }}$ by $V_{G S}$, the follower can act as a \"level shift\" circuit. From our earlier analysis of emitter followers in Chapter 5, we also anticipate this configuration to have a gain less than one.\n\nFigure 7.29(a) illustrates the small-signal equivalent of the source follower, incorporating channel-length modulation. Noting that $r_{O}$ is in parallel with $R_{L}$, we derive\n\n$$\n\\begin{equation*}\ng_{m} v_{1}\\left(r_{O} \\| R_{L}\\right)=v_{\\text {out }} \\tag{7.128}\n\\end{equation*}\n$$\n\nAdditionally,\n\n$$\n\\begin{equation*}\nv_{\\text {in }}=v_{1}+v_{\\text {out }} \\tag{7.129}\n\\end{equation*}\n$$\n\nThis leads to\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{g_{m}\\left(r_{O} \\| R_{L}\\right)}{1+g_{m}\\left(r_{O} \\| R_{L}\\right)}  \\tag{7.130}\\\\\n& =\\frac{r_{O} \\| R_{L}}{\\frac{1}{g_{m}}+r_{O} \\| R_{L}} \\tag{7.131}\n\\end{align*}\n$$\n\nThus, the voltage gain is positive but less than unity. Maximizing $R_{L}$ (and $r_{O}$) is advantageous.\n\nSimilar to emitter followers, the above result can be viewed as a voltage division between a resistance of $1 / g_{m}$ and another of $r_{O} \\| R_{L}$ [Fig. 7.29(b)]. However, a resistance in series with the gate does not affect Eq. (7.131) at low frequencies due to its negligible voltage drop.\nimage_name:(b)\ndescription:\n[\nname: Vin, type: VoltageSource, ports: {Np: Vin, Nn: GND}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: Vout}\nname: rO, type: Resistor, value: rO, ports: {N1: GND, N2: Vout}\nname: RL, type: Resistor, value: RL, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a source follower configuration with a voltage-controlled current source and resistive load. The voltage gain is positive but less than unity.\n\n(a)\nimage_name:(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: 1/gm, type: Resistor, value: 1/gm, ports: {N1: Vin, N2: Vout}\nname: RL||ro, type: Resistor, value: RL||ro, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a source follower configuration with a voltage-controlled current source and resistive load. The voltage gain is positive but less than unity.\n\n(b)\n\nExample\n7.16\n\nA source follower is configured as shown in Fig. 7.30(a), where $M_{2}$ acts as a current source. Determine the voltage gain of the circuit.\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: Vin}\nname: M2, type: NMOS, ports: {S: GND, D: Vout, G: Vb}\n]\nextrainfo:The circuit is a source follower configuration with a voltage-controlled current source and resistive load. The voltage gain is positive but less than unity. M1 is the main transistor providing the output voltage at Vout, and M2 functions as a current source.\n\n(a)\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vout, D: GND, G: Vin}\nname: rO1, type: Resistor, value: rO1, ports: {N1: GND, N2: Vout}\nname: rO2, type: Resistor, value: rO2, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a source follower configuration with NMOS M1 providing the output voltage at Vout. Resistors rO1 and rO2 form part of the load, with rO2 connected to ground. The voltage gain is positive but less than unity.\n\n(b)\n\nFigure 7.30 (a) Follower with ideal current source, (b) simplified circuit.\n\nSolution Since $M_{2}$ presents an impedance of $r_{O 2}$ from the output node to ac ground [Fig. 7.30(b)], we substitute $R_{L}=r_{O 2}$ in Eq. (7.131):\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{r_{O 1} \\| r_{O 2}}{\\frac{1}{g_{m 1}}+r_{O 1} \\| r_{O 2}} \\tag{7.132}\n\\end{equation*}\n$$\n\nIf $r_{O 1} \\| r_{O 2} \\gg 1 / g_{m 1}$, then $A_{v} \\approx 1$.\n\nExercise Repeat the above example if a resistance of $R_{S}$ is added in series with the source of $M_{2}$.\n\nExample\n7.17\n\nDesign a source follower to drive a $50-\\Omega$ load with a voltage gain of 0.5 and a power budget of 10 mW. Assume $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}, \\lambda=0$, and $V_{D D}=1.8 \\mathrm{~V}$.\n\nSolution With $R_{L}=50 \\Omega$ and $r_{O}=\\infty$ in Fig. 7.28, we obtain\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{R_{L}}{\\frac{1}{g_{m}}+R_{L}} \\tag{7.133}\n\\end{equation*}\n$$\n\nThus,\n\n$$\n\\begin{equation*}\ng_{m}=\\frac{1}{50 \\Omega} . \\tag{7.134}\n\\end{equation*}\n$$\n\nThe power budget and supply voltage limit the maximum supply current to 5.56 mA. Using this $I_{D}$ in $g_{m}=\\sqrt{2 \\mu_{n} C_{o x}(W / L) I_{D}}$ results in\n\n$$\n\\begin{equation*}\nW / L=360 . \\tag{7.135}\n\\end{equation*}\n$$\n\nExercise Determine the achievable voltage gain if the power budget is increased to 15 mW.\nimage_name:Figure 7.31 Output resistance of source follower\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: s1, G: GND}\nname: ro, type: Resistor, value: ro, ports: {N1: s1, N2: GND}\nname: RL, type: Resistor, value: RL, ports: {N1: s1, N2: GND}\n]\nextrainfo:The circuit diagram shows a source follower configuration with NMOS transistor M1. The output resistance is calculated as the parallel combination of 1/gm, ro, and RL. The source node s1 connects to both resistors ro and RL, which are grounded at the other end.\n\nFigure 7.31 Output resistance of source follower.\n\nIt is insightful to calculate the output impedance of the source follower. ${ }^{2}$ As shown in Fig. 7.31, $R_{\\text {out }}$ comprises the resistance looking up into the source in parallel with that looking down into $R_{L}$. With $\\lambda \\neq 0$, the former is $\\left(1 / g_{m}\\right) \\| r_{O}$, giving\n\n$$\n\\begin{align*}\nR_{\\text {out }} & =\\frac{1}{g_{m}}\\left\\|r_{O}\\right\\| R_{L}  \\tag{7.136}\\\\\n& \\approx \\frac{1}{g_{m}} \\| R_{L} . \\tag{7.137}\n\\end{align*}\n$$\n\nIn summary, the source follower features a very high input impedance and a relatively low output impedance, thus providing effective buffering capability.\nimage_name:Figure 7.32 Source follower with input and output coupling capacitors\ndescription:\n[\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: g1}\nname: C2, type: Capacitor, value: C2, ports: {Np: s1, Nn: Vout}\nname: RG, type: Resistor, value: RG, ports: {N1: g1, N2: VDD}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: M1, type: NMOS, ports: {S: s1, D: VDD, G: g1}\n]\nextrainfo:The circuit is a source follower with input and output coupling capacitors, providing high input impedance and low output impedance. The NMOS transistor M1 operates in saturation with the gate and drain voltages equal.\n\nFigure 7.32 Source follower with input and output coupling capacitors."
},
{
    "text": "When the gate voltage of $M_{1}$ in Fig. 7.28 is slightly increased by $\\Delta V_{i n}$, the gate-source voltage tends to rise, which in turn boosts the source current and the output voltage. Consequently, $V_{\\text {out }}$ \"tracks\" $V_{\\text {in }}$. Given that the dc level of $V_{\\text {out }}$ is $V_{G S}$ lower than that of $V_{\\text {in }}$, the follower can act as a \"level shift\" circuit. From our earlier analysis of emitter followers in Chapter 5, we also anticipate this configuration to have a gain less than one.\n\nFigure 7.29(a) illustrates the small-signal equivalent of the source follower, including channel-length modulation. Noting that $r_{O}$ is in parallel with $R_{L}$, we derive\n\n$$\n\\begin{equation*}\ng_{m} v_{1}\\left(r_{O} \\| R_{L}\\right)=v_{\\text {out }} \\tag{7.128}\n\\end{equation*}\n$$\n\nAdditionally,\n\n$$\n\\begin{equation*}\nv_{\\text {in }}=v_{1}+v_{\\text {out }} \\tag{7.129}\n\\end{equation*}\n$$\n\nThis leads to\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{g_{m}\\left(r_{O} \\| R_{L}\\right)}{1+g_{m}\\left(r_{O} \\| R_{L}\\right)}  \\tag{7.130}\\\\\n& =\\frac{r_{O} \\| R_{L}}{\\frac{1}{g_{m}}+r_{O} \\| R_{L}} \\tag{7.131}\n\\end{align*}\n$$\n\nThus, the voltage gain is positive but less than unity. It is advantageous to maximize $R_{L}$ (and $r_{O}$).\n\nSimilar to emitter followers, the above result can be viewed as a voltage division between a resistance of $1 / g_{m}$ and another of $r_{O} \\| R_{L}$ [Fig. 7.29(b)]. However, a resistance in series with the gate does not affect Eq. (7.131) at low frequencies due to its zero voltage drop.\nimage_name:(b)\ndescription:\n[\nname: Vin, type: VoltageSource, ports: {Np: Vin, Nn: GND}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: Vout}\nname: rO, type: Resistor, value: rO, ports: {N1: GND, N2: Vout}\nname: RL, type: Resistor, value: RL, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a source follower configuration with a voltage-controlled current source and resistive load. The voltage gain is positive but less than unity.\n\n(a)\nimage_name:(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: 1/gm, type: Resistor, value: 1/gm, ports: {N1: Vin, N2: Vout}\nname: RL||ro, type: Resistor, value: RL||ro, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a source follower configuration with a voltage-controlled current source and resistive load. The voltage gain is positive but less than unity.\n\n(b)\n\nExample\n7.16\n\nA source follower is implemented as shown in Fig. 7.30(a), where $M_{2}$ acts as a current source. Determine the voltage gain of the circuit.\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: Vin}\nname: M2, type: NMOS, ports: {S: GND, D: Vout, G: Vb}\n]\nextrainfo:The circuit is a source follower configuration with a voltage-controlled current source and resistive load. The voltage gain is positive but less than unity. M1 acts as the main transistor providing the output voltage at Vout, and M2 serves as a current source.\n\n(a)\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vout, D: GND, G: Vin}\nname: rO1, type: Resistor, value: rO1, ports: {N1: GND, N2: Vout}\nname: rO2, type: Resistor, value: rO2, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a source follower configuration with NMOS M1 providing the output voltage at Vout. Resistors rO1 and rO2 form part of the load, with rO2 connected to ground. The voltage gain is positive but less than unity.\n\n(b)\n\nFigure 7.30 (a) Follower with ideal current source, (b) simplified circuit.\n\nSolution Since $M_{2}$ presents an impedance of $r_{O 2}$ from the output node to ac ground [Fig. 7.30(b)], we substitute $R_{L}=r_{O 2}$ in Eq. (7.131):\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{r_{O 1} \\| r_{O 2}}{\\frac{1}{g_{m 1}}+r_{O 1} \\| r_{O 2}} \\tag{7.132}\n\\end{equation*}\n$$\n\nIf $r_{O 1} \\| r_{O 2} \\gg 1 / g_{m 1}$, then $A_{v} \\approx 1$.\n\nExercise Repeat the above example if a resistance of value $R_{S}$ is placed in series with the source of $M_{2}$.\n\nExample\n7.17\n\nDesign a source follower to drive a $50-\\Omega$ load with a voltage gain of 0.5 and a power budget of 10 mW. Assume $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}, \\lambda=0$, and $V_{D D}=1.8 \\mathrm{~V}$.\n\nSolution With $R_{L}=50 \\Omega$ and $r_{O}=\\infty$ in Fig. 7.28, we have\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{R_{L}}{\\frac{1}{g_{m}}+R_{L}} \\tag{7.133}\n\\end{equation*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\ng_{m}=\\frac{1}{50 \\Omega} . \\tag{7.134}\n\\end{equation*}\n$$\n\nThe power budget and supply voltage allow a maximum supply current of 5.56 mA. Using this value for $I_{D}$ in $g_{m}=\\sqrt{2 \\mu_{n} C_{o x}(W / L) I_{D}}$ gives\n\n$$\n\\begin{equation*}\nW / L=360 . \\tag{7.135}\n\\end{equation*}\n$$\n\nExercise What voltage gain can be achieved if the power budget is increased to 15 mW?\nimage_name:Figure 7.31 Output resistance of source follower\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: s1, G: GND}\nname: ro, type: Resistor, value: ro, ports: {N1: s1, N2: GND}\nname: RL, type: Resistor, value: RL, ports: {N1: s1, N2: GND}\n]\nextrainfo:The circuit diagram shows a source follower configuration with NMOS transistor M1. The output resistance is calculated as the parallel combination of 1/gm, ro, and RL. The source node s1 connects to both resistors ro and RL, which are grounded at the other end.\n\nFigure 7.31 Output resistance of source follower.\n\nIt is useful to calculate the output impedance of the source follower. As shown in Fig. 7.31, $R_{\\text {out }}$ comprises the resistance looking up into the source in parallel with that looking down into $R_{L}$. With $\\lambda \\neq 0$, the former is $\\left(1 / g_{m}\\right) \\| r_{O}$, resulting in\n\n$$\n\\begin{align*}\nR_{\\text {out }} & =\\frac{1}{g_{m}}\\left\\|r_{O}\\right\\| R_{L}  \\tag{7.136}\\\\\n& \\approx \\frac{1}{g_{m}} \\| R_{L} . \\tag{7.137}\n\\end{align*}\n$$\n\nIn summary, the source follower features a very high input impedance and a relatively low output impedance, thus providing effective buffering capability.\nimage_name:Figure 7.32 Source follower with input and output coupling capacitors\ndescription:\n[\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: g1}\nname: C2, type: Capacitor, value: C2, ports: {Np: s1, Nn: Vout}\nname: RG, type: Resistor, value: RG, ports: {N1: g1, N2: VDD}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: M1, type: NMOS, ports: {S: s1, D: VDD, G: g1}\n]\nextrainfo:The circuit is a source follower with input and output coupling capacitors, providing high input impedance and low output impedance. The NMOS transistor M1 operates in saturation with the gate and drain voltages equal.\n\nFigure 7.32 Source follower with input and output coupling capacitors."
},
{
    "text": "When the gate voltage of $M_{1}$ in Fig. 7.28 is slightly increased by $\\Delta V_{i n}$, the gate-source voltage tends to rise, which in turn boosts the source current and the output voltage. Consequently, $V_{\\text {out }}$ \"tracks\" $V_{\\text {in }}$. Given that the dc level of $V_{\\text {out }}$ is lower than that of $V_{\\text {in }}$ by $V_{G S}$, this configuration can act as a \"level shift\" circuit. Based on our analysis of emitter followers in Chapter 5, we also anticipate this setup to exhibit a gain less than one.\n\nFigure 7.29(a) illustrates the small-signal equivalent of the source follower, including channel-length modulation. Noting that $r_{O}$ is in parallel with $R_{L}$, we derive\n\n$$\n\\begin{equation*}\ng_{m} v_{1}\\left(r_{O} \\| R_{L}\\right)=v_{\\text {out }} \\tag{7.128}\n\\end{equation*}\n$$\n\nAdditionally,\n\n$$\n\\begin{equation*}\nv_{\\text {in }}=v_{1}+v_{\\text {out }} \\tag{7.129}\n\\end{equation*}\n$$\n\nThis leads to\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{g_{m}\\left(r_{O} \\| R_{L}\\right)}{1+g_{m}\\left(r_{O} \\| R_{L}\\right)}  \\tag{7.130}\\\\\n& =\\frac{r_{O} \\| R_{L}}{\\frac{1}{g_{m}}+r_{O} \\| R_{L}} \\tag{7.131}\n\\end{align*}\n$$\n\nThus, the voltage gain is positive but less than unity. It is beneficial to maximize $R_{L}$ (and $r_{O}$).\n\nSimilar to emitter followers, the above result can be viewed as a voltage division between a resistance of $1 / g_{m}$ and another of $r_{O} \\| R_{L}$ [Fig. 7.29(b)]. However, a resistance in series with the gate does not affect Eq. (7.131) at low frequencies due to its negligible voltage drop.\nimage_name:(b)\ndescription:\n[\nname: Vin, type: VoltageSource, ports: {Np: Vin, Nn: GND}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: Vout}\nname: rO, type: Resistor, value: rO, ports: {N1: GND, N2: Vout}\nname: RL, type: Resistor, value: RL, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a source follower configuration with a voltage-controlled current source and resistive load. The voltage gain is positive but less than unity.\n\n(a)\nimage_name:(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: 1/gm, type: Resistor, value: 1/gm, ports: {N1: Vin, N2: Vout}\nname: RL||ro, type: Resistor, value: RL||ro, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a source follower configuration with a voltage-controlled current source and resistive load. The voltage gain is positive but less than unity.\n\n(b)\n\nExample\n7.16\n\nA source follower is configured as shown in Fig. 7.30(a), where $M_{2}$ acts as a current source. Determine the voltage gain of the circuit.\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: Vin}\nname: M2, type: NMOS, ports: {S: GND, D: Vout, G: Vb}\n]\nextrainfo:The circuit is a source follower configuration with a voltage-controlled current source and resistive load. The voltage gain is positive but less than unity. M1 is the main transistor providing the output voltage at Vout, and M2 functions as a current source.\n\n(a)\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vout, D: GND, G: Vin}\nname: rO1, type: Resistor, value: rO1, ports: {N1: GND, N2: Vout}\nname: rO2, type: Resistor, value: rO2, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a source follower configuration with NMOS M1 providing the output voltage at Vout. Resistors rO1 and rO2 form part of the load, with rO2 connected to ground. The voltage gain is positive but less than unity.\n\n(b)\n\nFigure 7.30 (a) Follower with ideal current source, (b) simplified circuit.\n\nSolution Since $M_{2}$ presents an impedance of $r_{O 2}$ from the output node to ac ground [Fig. 7.30(b)], we substitute $R_{L}=r_{O 2}$ in Eq. (7.131):\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{r_{O 1} \\| r_{O 2}}{\\frac{1}{g_{m 1}}+r_{O 1} \\| r_{O 2}} \\tag{7.132}\n\\end{equation*}\n$$\n\nIf $r_{O 1} \\| r_{O 2} \\gg 1 / g_{m 1}$, then $A_{v} \\approx 1$.\n\nExercise Repeat the above example if a resistance of value $R_{S}$ is added in series with the source of $M_{2}$.\n\nExample\n7.17\n\nDesign a source follower to drive a $50-\\Omega$ load with a voltage gain of 0.5 and a power budget of 10 mW. Assume $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}, \\lambda=0$, and $V_{D D}=1.8 \\mathrm{~V}$.\n\nSolution With $R_{L}=50 \\Omega$ and $r_{O}=\\infty$ in Fig. 7.28, we obtain\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{R_{L}}{\\frac{1}{g_{m}}+R_{L}} \\tag{7.133}\n\\end{equation*}\n$$\n\nThus,\n\n$$\n\\begin{equation*}\ng_{m}=\\frac{1}{50 \\Omega} . \\tag{7.134}\n\\end{equation*}\n$$\n\nThe power budget and supply voltage allow a maximum supply current of 5.56 mA. Using this $I_{D}$ value in $g_{m}=\\sqrt{2 \\mu_{n} C_{o x}(W / L) I_{D}}$ results in\n\n$$\n\\begin{equation*}\nW / L=360 . \\tag{7.135}\n\\end{equation*}\n$$\n\nExercise Determine the achievable voltage gain if the power budget is increased to 15 mW.\nimage_name:Figure 7.31 Output resistance of source follower\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: s1, G: GND}\nname: ro, type: Resistor, value: ro, ports: {N1: s1, N2: GND}\nname: RL, type: Resistor, value: RL, ports: {N1: s1, N2: GND}\n]\nextrainfo:The circuit diagram shows a source follower configuration with NMOS transistor M1. The output resistance is calculated as the parallel combination of 1/gm, ro, and RL. The source node s1 connects to both resistors ro and RL, which are grounded at the other end.\n\nFigure 7.31 Output resistance of source follower.\n\nIt is useful to calculate the output impedance of the source follower. ${ }^{2}$ As depicted in Fig. 7.31, $R_{\\text {out }}$ comprises the resistance looking up into the source in parallel with that looking down into $R_{L}$. With $\\lambda \\neq 0$, the former equals $\\left(1 / g_{m}\\right) \\| r_{O}$, resulting in\n\n$$\n\\begin{align*}\nR_{\\text {out }} & =\\frac{1}{g_{m}}\\left\\|r_{O}\\right\\| R_{L}  \\tag{7.136}\\\\\n& \\approx \\frac{1}{g_{m}} \\| R_{L} . \\tag{7.137}\n\\end{align*}\n$$\n\nIn summary, the source follower features a very high input impedance and a relatively low output impedance, providing effective buffering capability.\nimage_name:Figure 7.32 Source follower with input and output coupling capacitors\ndescription:\n[\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: g1}\nname: C2, type: Capacitor, value: C2, ports: {Np: s1, Nn: Vout}\nname: RG, type: Resistor, value: RG, ports: {N1: g1, N2: VDD}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: M1, type: NMOS, ports: {S: s1, D: VDD, G: g1}\n]\nextrainfo:The circuit is a source follower with input and output coupling capacitors, providing high input impedance and low output impedance. The NMOS transistor M1 operates in saturation with the gate and drain voltages equal.\n\nFigure 7.32 Source follower with input and output coupling capacitors."
},
{
    "text": "When the gate voltage of $M_{1}$ in Fig. 7.28 is slightly increased by $\\Delta V_{i n}$, the gate-source voltage tends to rise, which in turn boosts the source current and the output voltage. Consequently, $V_{\\text {out }}$ \"tracks\" $V_{\\text {in }}$. Given that the dc level of $V_{\\text {out }}$ is lower than that of $V_{\\text {in }}$ by $V_{G S}$, the follower can function as a \"level shift\" circuit. Based on our analysis of emitter followers in Chapter 5, we also anticipate this configuration to exhibit a subunity gain.\n\nFigure 7.29(a) illustrates the small-signal equivalent of the source follower, including channel-length modulation. Noting that $r_{O}$ is in parallel with $R_{L}$, we derive\n\n$$\n\\begin{equation*}\ng_{m} v_{1}\\left(r_{O} \\| R_{L}\\right)=v_{\\text {out }} \\tag{7.128}\n\\end{equation*}\n$$\n\nAdditionally,\n\n$$\n\\begin{equation*}\nv_{\\text {in }}=v_{1}+v_{\\text {out }} \\tag{7.129}\n\\end{equation*}\n$$\n\nThis leads to\n\n$$\n\\begin{align*}\n\\frac{v_{\\text {out }}}{v_{\\text {in }}} & =\\frac{g_{m}\\left(r_{O} \\| R_{L}\\right)}{1+g_{m}\\left(r_{O} \\| R_{L}\\right)}  \\tag{7.130}\\\\\n& =\\frac{r_{O} \\| R_{L}}{\\frac{1}{g_{m}}+r_{O} \\| R_{L}} \\tag{7.131}\n\\end{align*}\n$$\n\nThus, the voltage gain is positive but less than unity. It is beneficial to maximize $R_{L}$ (and $r_{O}$).\n\nSimilar to emitter followers, the above result can be viewed as voltage division between a resistance of $1 / g_{m}$ and another of $r_{O} \\| R_{L}$ [Fig. 7.29(b)]. However, a resistance in series with the gate does not affect Eq. (7.131) (at low frequencies) as it experiences zero voltage drop.\nimage_name:(b)\ndescription:\n[\nname: Vin, type: VoltageSource, ports: {Np: Vin, Nn: GND}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: Vout}\nname: rO, type: Resistor, value: rO, ports: {N1: GND, N2: Vout}\nname: RL, type: Resistor, value: RL, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a source follower configuration with a voltage-controlled current source and resistive load. The voltage gain is positive but less than unity.\n\n(a)\nimage_name:(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: 1/gm, type: Resistor, value: 1/gm, ports: {N1: Vin, N2: Vout}\nname: RL||ro, type: Resistor, value: RL||ro, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a source follower configuration with a voltage-controlled current source and resistive load. The voltage gain is positive but less than unity.\n\n(b)\n\nExample\n7.16\n\nA source follower is implemented as shown in Fig. 7.30(a), where $M_{2}$ acts as a current source. Determine the voltage gain of the circuit.\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vout, D: VDD, G: Vin}\nname: M2, type: NMOS, ports: {S: GND, D: Vout, G: Vb}\n]\nextrainfo:The circuit is a source follower configuration with a voltage-controlled current source and resistive load. The voltage gain is positive but less than unity. M1 serves as the main transistor providing the output voltage at Vout, and M2 functions as a current source.\n\n(a)\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: Vout, D: GND, G: Vin}\nname: rO1, type: Resistor, value: rO1, ports: {N1: GND, N2: Vout}\nname: rO2, type: Resistor, value: rO2, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a source follower configuration with NMOS M1 providing the output voltage at Vout. Resistors rO1 and rO2 form part of the load, with rO2 connected to ground. The voltage gain is positive but less than unity.\n\n(b)\n\nFigure 7.30 (a) Follower with ideal current source, (b) simplified circuit.\n\nSolution Since $M_{2}$ presents an impedance of $r_{O 2}$ from the output node to ac ground [Fig. 7.30(b)], we substitute $R_{L}=r_{O 2}$ in Eq. (7.131):\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{r_{O 1} \\| r_{O 2}}{\\frac{1}{g_{m 1}}+r_{O 1} \\| r_{O 2}} \\tag{7.132}\n\\end{equation*}\n$$\n\nIf $r_{O 1} \\| r_{O 2} \\gg 1 / g_{m 1}$, then $A_{v} \\approx 1$.\n\nExercise Repeat the above example if a resistance of value $R_{S}$ is placed in series with the source of $M_{2}$.\n\nExample\n7.17\n\nDesign a source follower to drive a $50-\\Omega$ load with a voltage gain of 0.5 and a power budget of 10 mW. Assume $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}, \\lambda=0$, and $V_{D D}=1.8 \\mathrm{~V}$.\n\nSolution With $R_{L}=50 \\Omega$ and $r_{O}=\\infty$ in Fig. 7.28, we obtain\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{R_{L}}{\\frac{1}{g_{m}}+R_{L}} \\tag{7.133}\n\\end{equation*}\n$$\n\nand thus\n\n$$\n\\begin{equation*}\ng_{m}=\\frac{1}{50 \\Omega} . \\tag{7.134}\n\\end{equation*}\n$$\n\nThe power budget and supply voltage allow a maximum supply current of 5.56 mA. Using this value for $I_{D}$ in $g_{m}=\\sqrt{2 \\mu_{n} C_{o x}(W / L) I_{D}}$ results in\n\n$$\n\\begin{equation*}\nW / L=360 . \\tag{7.135}\n\\end{equation*}\n$$\n\nExercise Determine the voltage gain achievable if the power budget is increased to 15 mW.\nimage_name:Figure 7.31 Output resistance of source follower\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: s1, G: GND}\nname: ro, type: Resistor, value: ro, ports: {N1: s1, N2: GND}\nname: RL, type: Resistor, value: RL, ports: {N1: s1, N2: GND}\n]\nextrainfo:The circuit diagram shows a source follower configuration with NMOS transistor M1. The output resistance is calculated as the parallel combination of 1/gm, ro, and RL. The source node s1 connects to both resistors ro and RL, which are grounded at the other end.\n\nFigure 7.31 Output resistance of source follower.\n\nIt is useful to calculate the output impedance of the source follower. ${ }^{2}$ As shown in Fig. 7.31, $R_{\\text {out }}$ comprises the resistance seen looking up into the source in parallel with that seen looking down into $R_{L}$. With $\\lambda \\neq 0$, the former equals $\\left(1 / g_{m}\\right) \\| r_{O}$, resulting in\n\n$$\n\\begin{align*}\nR_{\\text {out }} & =\\frac{1}{g_{m}}\\left\\|r_{O}\\right\\| R_{L}  \\tag{7.136}\\\\\n& \\approx \\frac{1}{g_{m}} \\| R_{L} . \\tag{7.137}\n\\end{align*}\n$$\n\nIn summary, the source follower features a very high input impedance and a relatively low output impedance, thus providing buffering capability.\nimage_name:Figure 7.32 Source follower with input and output coupling capacitors\ndescription:\n[\nname: C1, type: Capacitor, value: C1, ports: {Np: Vin, Nn: g1}\nname: C2, type: Capacitor, value: C2, ports: {Np: s1, Nn: Vout}\nname: RG, type: Resistor, value: RG, ports: {N1: g1, N2: VDD}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: M1, type: NMOS, ports: {S: s1, D: VDD, G: g1}\n]\nextrainfo:The circuit is a source follower with input and output coupling capacitors, providing high input impedance and low output impedance. The NMOS transistor M1 operates in saturation with the gate and drain voltages equal.\n\nFigure 7.32 Source follower with input and output coupling capacitors."
},
{
    "text": "The biasing of source followers is akin to that of emitter followers (Chapter 5). Figure 7.32 illustrates an instance where $R_{G}$ sets a dc voltage equivalent to $V_{D D}$ at the gate of $M_{1}$ (why?) and $R_{S}$ determines the drain bias current. Note that $M_{1}$ functions in saturation due to equal gate and drain voltages. Additionally, the circuit's input impedance has decreased from infinity to $R_{G}$.\n\nLet's calculate the circuit's bias current. With no voltage drop across $R_{G}$, we get\n\n$$\n\\begin{equation*}\nV_{G S}+I_{D} R_{S}=V_{D D} . \\tag{7.138}\n\\end{equation*}\n$$\n\n[^5]Ignoring channel-length modulation, we express\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2}  \\tag{7.139}\\\\\n& =\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{D D}-I_{D} R_{S}-V_{T H}\\right)^{2} . \\tag{7.140}\n\\end{align*}\n$$\n\nThis quadratic equation can be solved to find $I_{D}$.\n\nDesign the source follower in Fig. 7.32 for a drain current of 1 mA and a voltage gain of 0.8. Assume $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}, \\lambda=0, V_{D D}=1.8 \\mathrm{~V}$, and $R_{G}=50 \\mathrm{k} \\Omega$.\n\nSolution: The unknowns here are $V_{G S}, W / L$, and $R_{S}$. The following three equations can be formulated:\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2}  \\tag{7.141}\\\\\nI_{D} R_{S}+V_{G S} & =V_{D D}  \\tag{7.142}\\\\\nA_{v} & =\\frac{R_{S}}{\\frac{1}{g_{m}}+R_{S}} . \\tag{7.143}\n\\end{align*}\n$$\n\nIf $g_{m}$ is written as $2 I_{D} /\\left(V_{G S}-V_{T H}\\right)$, then Eqs. (7.142) and (7.143) exclude $W / L$ and can be solved for $V_{G S}$ and $R_{S}$. Using Eq. (7.142), we rewrite Eq. (7.143) as\n\n$$\n\\begin{align*}\nA_{v} & =\\frac{R_{S}}{\\frac{V_{G S}-V_{T H}}{2 I_{D}}+R_{S}}  \\tag{7.144}\\\\\n& =\\frac{2 I_{D} R_{S}}{V_{G S}-V_{T H}+2 I_{D} R_{S}}  \\tag{7.145}\\\\\n& =\\frac{2 I_{D} R_{S}}{V_{D D}-V_{T H}+I_{D} R_{S}} \\tag{7.146}\n\\end{align*}\n$$\n\nThus,\n\n$$\n\\begin{align*}\nR_{S} & =\\frac{V_{D D}-V_{T H}}{I_{D}} \\frac{A_{v}}{2-A_{v}}  \\tag{7.147}\\\\\n& =867 \\Omega . \\tag{7.148}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{align*}\nV_{G S} & =V_{D D}-I_{D} R_{S}  \\tag{7.149}\\\\\n& =V_{D D}-\\left(V_{D D}-V_{T H}\\right) \\frac{A_{v}}{2-A_{v}}  \\tag{7.150}\\\\\n& =0.933 \\mathrm{~V} \\tag{7.151}\n\\end{align*}\n$$\n\nFrom Eq. (7.141), we deduce\n\n$$\n\\begin{equation*}\n\\frac{W}{L}=107 \\tag{7.152}\n\\end{equation*}\n$$\n\nExercise: What voltage gain is achievable if $W / L$ cannot exceed 50?\n\nEquation (7.140) indicates that the source follower's bias current varies with the supply voltage. To mitigate this, integrated circuits use a current source for biasing the follower (Fig. 7.33).\nimage_name:Figure 7.33 Source follower with biasing\ndescription:\n[\nname: RG, type: Resistor, ports: {N1: VDD, N2: g1}\nname: C1, type: Capacitor, ports: {Np: Vin, Nn: g1}\nname: M1, type: NMOS, ports: {S: s1d2, D: VDD, G: g1}\nname: C2, type: Capacitor, ports: {Np: s1d2, Nn: Vout}\nname: S1, type: CurrentSource, ports: {Np: s1, Nn: GND}\nname: M2, type: NMOS, ports: {S: GND, D: s1d2, G: Vb}\n]\nextrainfo:The circuit is a source follower with biasing, where M1 and M2 form a cascode stage. The biasing is provided by a current source (S1) and a bias voltage (Vb) for M2. The circuit aims to stabilize the bias current against variations in the supply voltage (VDD).\n\nFigure 7.33 Source follower with biasing."
},
{
    "text": "The source follower biasing is akin to that of emitter followers, as discussed in Chapter 5. Figure 7.32 illustrates a scenario where $R_{G}$ sets a dc voltage equal to $V_{D D}$ at the gate of $M_{1}$ (for a specific reason) and $R_{S}$ determines the drain bias current. Note that $M_{1}$ functions in saturation since the gate and drain voltages are the same. Additionally, the circuit's input impedance has decreased from infinity to $R_{G}$.\n\nLet's calculate the circuit's bias current. With no voltage drop across $R_{G}$, we get\n\n$$\n\\begin{equation*}\nV_{G S}+I_{D} R_{S}=V_{D D} . \\tag{7.138}\n\\end{equation*}\n$$\n\n[^5]Disregarding channel-length modulation, we express\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2}  \\tag{7.139}\\\\\n& =\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{D D}-I_{D} R_{S}-V_{T H}\\right)^{2} . \\tag{7.140}\n\\end{align*}\n$$\n\nSolving the resulting quadratic equation yields $I_{D}$.\n\nDesign the source follower in Fig. 7.32 for a drain current of 1 mA and a voltage gain of 0.8. Assume $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}, \\lambda=0, V_{D D}=1.8 \\mathrm{~V}$, and $R_{G}=50 \\mathrm{k} \\Omega$.\n\nSolution: The unknowns here are $V_{G S}, W / L$, and $R_{S}$. The following three equations can be formulated:\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2}  \\tag{7.141}\\\\\nI_{D} R_{S}+V_{G S} & =V_{D D}  \\tag{7.142}\\\\\nA_{v} & =\\frac{R_{S}}{\\frac{1}{g_{m}}+R_{S}} . \\tag{7.143}\n\\end{align*}\n$$\n\nIf $g_{m}$ is expressed as $2 I_{D} /\\left(V_{G S}-V_{T H}\\right)$, then Eqs. (7.142) and (7.143) exclude $W / L$ and can be solved to find $V_{G S}$ and $R_{S}$. Using Eq. (7.142), we rewrite Eq. (7.143) as\n\n$$\n\\begin{align*}\nA_{v} & =\\frac{R_{S}}{\\frac{V_{G S}-V_{T H}}{2 I_{D}}+R_{S}}  \\tag{7.144}\\\\\n& =\\frac{2 I_{D} R_{S}}{V_{G S}-V_{T H}+2 I_{D} R_{S}}  \\tag{7.145}\\\\\n& =\\frac{2 I_{D} R_{S}}{V_{D D}-V_{T H}+I_{D} R_{S}} \\tag{7.146}\n\\end{align*}\n$$\n\nThus,\n\n$$\n\\begin{align*}\nR_{S} & =\\frac{V_{D D}-V_{T H}}{I_{D}} \\frac{A_{v}}{2-A_{v}}  \\tag{7.147}\\\\\n& =867 \\Omega . \\tag{7.148}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{align*}\nV_{G S} & =V_{D D}-I_{D} R_{S}  \\tag{7.149}\\\\\n& =V_{D D}-\\left(V_{D D}-V_{T H}\\right) \\frac{A_{v}}{2-A_{v}}  \\tag{7.150}\\\\\n& =0.933 \\mathrm{~V} \\tag{7.151}\n\\end{align*}\n$$\n\nFrom Eq. (7.141), it follows that\n\n$$\n\\begin{equation*}\n\\frac{W}{L}=107 \\tag{7.152}\n\\end{equation*}\n$$\n\nExercise: What voltage gain is achievable if $W / L$ cannot exceed 50?\n\nEquation (7.140) indicates that the source follower's bias current varies with the supply voltage. To mitigate this, integrated circuits use a current source for biasing the follower (Fig. 7.33).\nimage_name:Figure 7.33 Source follower with biasing\ndescription:\n[\nname: RG, type: Resistor, ports: {N1: VDD, N2: g1}\nname: C1, type: Capacitor, ports: {Np: Vin, Nn: g1}\nname: M1, type: NMOS, ports: {S: s1d2, D: VDD, G: g1}\nname: C2, type: Capacitor, ports: {Np: s1d2, Nn: Vout}\nname: S1, type: CurrentSource, ports: {Np: s1, Nn: GND}\nname: M2, type: NMOS, ports: {S: GND, D: s1d2, G: Vb}\n]\nextrainfo:The circuit is a source follower with biasing, where M1 and M2 form a cascode stage. The biasing is provided by a current source (S1) and a bias voltage (Vb) for M2. The circuit aims to stabilize the bias current against variations in the supply voltage (VDD).\n\nFigure 7.33 Source follower with biasing."
},
{
    "text": "The biasing approach for source followers is akin to that used for emitter followers, as discussed in Chapter 5. Figure 7.32 illustrates a scenario where $R_{G}$ sets up a dc voltage at the gate of $M_{1}$ equal to $V_{D D}$ (for what reason?) and $R_{S}$ determines the drain bias current. It is important to note that $M_{1}$ functions in saturation since the gate and drain voltages are identical. Additionally, the circuit's input impedance has decreased from infinity to $R_{G}$.\n\nLet's calculate the bias current of the circuit. With no voltage drop across $R_{G}$, we obtain\n\n$$\n\\begin{equation*}\nV_{G S} + I_{D} R_{S} = V_{D D} . \\tag{7.138}\n\\end{equation*}\n$$\n\n[^5]Disregarding channel-length modulation, we express\n\n$$\n\\begin{align*}\nI_{D} & = \\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L} \\left(V_{G S} - V_{T H}\\right)^{2}  \\tag{7.139}\\\\\n& = \\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L} \\left(V_{D D} - I_{D} R_{S} - V_{T H}\\right)^{2} . \\tag{7.140}\n\\end{align*}\n$$\n\nThis quadratic equation can be solved to find $I_{D}$.\n\nDesign the source follower shown in Fig. 7.32 for a drain current of 1 mA and a voltage gain of 0.8. Assume $\\mu_{n} C_{o x} = 100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H} = 0.5 \\mathrm{~V}, \\lambda = 0, V_{D D} = 1.8 \\mathrm{~V}$, and $R_{G} = 50 \\mathrm{k} \\Omega$.\n\nSolution: The unknown variables in this problem are $V_{G S}, W / L$, and $R_{S}$. The following three equations can be formulated:\n\n$$\n\\begin{align*}\nI_{D} & = \\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L} \\left(V_{G S} - V_{T H}\\right)^{2}  \\tag{7.141}\\\\\nI_{D} R_{S} + V_{G S} & = V_{D D}  \\tag{7.142}\\\\\nA_{v} & = \\frac{R_{S}}{\\frac{1}{g_{m}} + R_{S}} . \\tag{7.143}\n\\end{align*}\n$$\n\nIf $g_{m}$ is expressed as $2 I_{D} / \\left(V_{G S} - V_{T H}\\right)$, then Eqs. (7.142) and (7.143) no longer include $W / L$ and can be solved to determine $V_{G S}$ and $R_{S}$. Using Eq. (7.142), we rewrite Eq. (7.143) as\n\n$$\n\\begin{align*}\nA_{v} & = \\frac{R_{S}}{\\frac{V_{G S} - V_{T H}}{2 I_{D}} + R_{S}}  \\tag{7.144}\\\\\n& = \\frac{2 I_{D} R_{S}}{V_{G S} - V_{T H} + 2 I_{D} R_{S}}  \\tag{7.145}\\\\\n& = \\frac{2 I_{D} R_{S}}{V_{D D} - V_{T H} + I_{D} R_{S}} \\tag{7.146}\n\\end{align*}\n$$\n\nTherefore,\n\n$$\n\\begin{align*}\nR_{S} & = \\frac{V_{D D} - V_{T H}}{I_{D}} \\frac{A_{v}}{2 - A_{v}}  \\tag{7.147}\\\\\n& = 867 \\Omega . \\tag{7.148}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{align*}\nV_{G S} & = V_{D D} - I_{D} R_{S}  \\tag{7.149}\\\\\n& = V_{D D} - \\left(V_{D D} - V_{T H}\\right) \\frac{A_{v}}{2 - A_{v}}  \\tag{7.150}\\\\\n& = 0.933 \\mathrm{~V} \\tag{7.151}\n\\end{align*}\n$$\n\nFrom Eq. (7.141), it follows that\n\n$$\n\\begin{equation*}\n\\frac{W}{L} = 107 \\tag{7.152}\n\\end{equation*}\n$$\n\nExercise: What voltage gain is achievable if $W / L$ cannot exceed 50?\n\nEquation (7.140) indicates that the bias current of the source follower varies with the supply voltage. To mitigate this effect, integrated circuits use a current source for biasing the follower (Fig. 7.33).\nimage_name: Figure 7.33 Source follower with biasing\ndescription:\n[\nname: RG, type: Resistor, ports: {N1: VDD, N2: g1}\nname: C1, type: Capacitor, ports: {Np: Vin, Nn: g1}\nname: M1, type: NMOS, ports: {S: s1d2, D: VDD, G: g1}\nname: C2, type: Capacitor, ports: {Np: s1d2, Nn: Vout}\nname: S1, type: CurrentSource, ports: {Np: s1, Nn: GND}\nname: M2, type: NMOS, ports: {S: GND, D: s1d2, G: Vb}\n]\nextrainfo: The circuit is a source follower with biasing, where M1 and M2 form a cascode stage. The biasing is provided by a current source (S1) and a bias voltage (Vb) for M2. The circuit aims to stabilize the bias current against variations in the supply voltage (VDD).\n\nFigure 7.33 Source follower with biasing."
},
{
    "text": "The biasing of source followers is akin to that of emitter followers (as discussed in Chapter 5). Figure 7.32 illustrates an example where $R_{G}$ sets a dc voltage equal to $V_{D D}$ at the gate of $M_{1}$ (for reasons explained later) and $R_{S}$ determines the drain bias current. Note that $M_{1}$ operates in saturation since the gate and drain voltages are the same. Additionally, the circuit's input impedance decreases from infinity to $R_{G}$.\n\nLet's calculate the bias current of the circuit. With no voltage drop across $R_{G}$, we have\n\n$$\n\\begin{equation*}\nV_{G S}+I_{D} R_{S}=V_{D D} . \\tag{7.138}\n\\end{equation*}\n$$\n\n[^5]Ignoring channel-length modulation, we express\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2}  \\tag{7.139}\\\\\n& =\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{D D}-I_{D} R_{S}-V_{T H}\\right)^{2} . \\tag{7.140}\n\\end{align*}\n$$\n\nThis quadratic equation can be solved to find $I_{D}$.\n\nDesign the source follower in Fig. 7.32 for a drain current of 1 mA and a voltage gain of 0.8. Assume $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}, \\lambda=0, V_{D D}=1.8 \\mathrm{~V}$, and $R_{G}=50 \\mathrm{k} \\Omega$.\n\nSolution: The unknowns in this problem are $V_{G S}, W / L$, and $R_{S}$. The following three equations can be formulated:\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2}  \\tag{7.141}\\\\\nI_{D} R_{S}+V_{G S} & =V_{D D}  \\tag{7.142}\\\\\nA_{v} & =\\frac{R_{S}}{\\frac{1}{g_{m}}+R_{S}} . \\tag{7.143}\n\\end{align*}\n$$\n\nIf $g_{m}$ is expressed as $2 I_{D} /\\left(V_{G S}-V_{T H}\\right)$, then Eqs. (7.142) and (7.143) do not involve $W / L$ and can be solved to determine $V_{G S}$ and $R_{S}$. Using Eq. (7.142), we rewrite Eq. (7.143) as\n\n$$\n\\begin{align*}\nA_{v} & =\\frac{R_{S}}{\\frac{V_{G S}-V_{T H}}{2 I_{D}}+R_{S}}  \\tag{7.144}\\\\\n& =\\frac{2 I_{D} R_{S}}{V_{G S}-V_{T H}+2 I_{D} R_{S}}  \\tag{7.145}\\\\\n& =\\frac{2 I_{D} R_{S}}{V_{D D}-V_{T H}+I_{D} R_{S}} \\tag{7.146}\n\\end{align*}\n$$\n\nThus,\n\n$$\n\\begin{align*}\nR_{S} & =\\frac{V_{D D}-V_{T H}}{I_{D}} \\frac{A_{v}}{2-A_{v}}  \\tag{7.147}\\\\\n& =867 \\Omega . \\tag{7.148}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{align*}\nV_{G S} & =V_{D D}-I_{D} R_{S}  \\tag{7.149}\\\\\n& =V_{D D}-\\left(V_{D D}-V_{T H}\\right) \\frac{A_{v}}{2-A_{v}}  \\tag{7.150}\\\\\n& =0.933 \\mathrm{~V} \\tag{7.151}\n\\end{align*}\n$$\n\nFrom Eq. (7.141), it follows that\n\n$$\n\\begin{equation*}\n\\frac{W}{L}=107 \\tag{7.152}\n\\end{equation*}\n$$\n\nExercise: What voltage gain can be achieved if $W / L$ cannot exceed 50?\n\nEquation (7.140) indicates that the bias current of the source follower varies with the supply voltage. To mitigate this effect, integrated circuits use a current source for biasing the follower (as shown in Fig. 7.33).\nimage_name: Figure 7.33 Source follower with biasing\ndescription:\n[\nname: RG, type: Resistor, ports: {N1: VDD, N2: g1}\nname: C1, type: Capacitor, ports: {Np: Vin, Nn: g1}\nname: M1, type: NMOS, ports: {S: s1d2, D: VDD, G: g1}\nname: C2, type: Capacitor, ports: {Np: s1d2, Nn: Vout}\nname: S1, type: CurrentSource, ports: {Np: s1, Nn: GND}\nname: M2, type: NMOS, ports: {S: GND, D: s1d2, G: Vb}\n]\nextrainfo: The circuit is a source follower with biasing, where M1 and M2 form a cascode stage. The biasing is provided by a current source (S1) and a bias voltage (Vb) for M2. The circuit aims to stabilize the bias current against variations in the supply voltage (VDD).\n\nFigure 7.33 Source follower with biasing."
},
{
    "text": "The biasing of source followers is akin to that of emitter followers (Chapter 5). Figure 7.32 illustrates an instance where $R_{G}$ sets a dc voltage equal to $V_{D D}$ at the gate of $M_{1}$ (why?) and $R_{S}$ determines the drain bias current. Note that $M_{1}$ functions in saturation since the gate and drain voltages are identical. Additionally, the circuit's input impedance has decreased from infinity to $R_{G}$.\n\nLet's calculate the circuit's bias current. With no voltage drop across $R_{G}$, we get\n\n$$\n\\begin{equation*}\nV_{G S}+I_{D} R_{S}=V_{D D} . \\tag{7.138}\n\\end{equation*}\n$$\n\n[^5]Disregarding channel-length modulation, we express\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2}  \\tag{7.139}\\\\\n& =\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{D D}-I_{D} R_{S}-V_{T H}\\right)^{2} . \\tag{7.140}\n\\end{align*}\n$$\n\nThis quadratic equation can be solved to find $I_{D}$.\n\nDesign the source follower in Fig. 7.32 for a drain current of 1 mA and a voltage gain of 0.8. Assume $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}, \\lambda=0, V_{D D}=1.8 \\mathrm{~V}$, and $R_{G}=50 \\mathrm{k} \\Omega$.\n\nSolution: The unknowns here are $V_{G S}, W / L$, and $R_{S}$. The following three equations can be formulated:\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2}  \\tag{7.141}\\\\\nI_{D} R_{S}+V_{G S} & =V_{D D}  \\tag{7.142}\\\\\nA_{v} & =\\frac{R_{S}}{\\frac{1}{g_{m}}+R_{S}} . \\tag{7.143}\n\\end{align*}\n$$\n\nIf $g_{m}$ is expressed as $2 I_{D} /\\left(V_{G S}-V_{T H}\\right)$, then Eqs. (7.142) and (7.143) exclude $W / L$ and can be solved to find $V_{G S}$ and $R_{S}$. Using Eq. (7.142), we rewrite Eq. (7.143) as\n\n$$\n\\begin{align*}\nA_{v} & =\\frac{R_{S}}{\\frac{V_{G S}-V_{T H}}{2 I_{D}}+R_{S}}  \\tag{7.144}\\\\\n& =\\frac{2 I_{D} R_{S}}{V_{G S}-V_{T H}+2 I_{D} R_{S}}  \\tag{7.145}\\\\\n& =\\frac{2 I_{D} R_{S}}{V_{D D}-V_{T H}+I_{D} R_{S}} \\tag{7.146}\n\\end{align*}\n$$\n\nThus,\n\n$$\n\\begin{align*}\nR_{S} & =\\frac{V_{D D}-V_{T H}}{I_{D}} \\frac{A_{v}}{2-A_{v}}  \\tag{7.147}\\\\\n& =867 \\Omega . \\tag{7.148}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{align*}\nV_{G S} & =V_{D D}-I_{D} R_{S}  \\tag{7.149}\\\\\n& =V_{D D}-\\left(V_{D D}-V_{T H}\\right) \\frac{A_{v}}{2-A_{v}}  \\tag{7.150}\\\\\n& =0.933 \\mathrm{~V} \\tag{7.151}\n\\end{align*}\n$$\n\nFrom Eq. (7.141), we deduce that\n\n$$\n\\begin{equation*}\n\\frac{W}{L}=107 \\tag{7.152}\n\\end{equation*}\n$$\n\nExercise: What voltage gain is achievable if $W / L$ cannot exceed 50?\n\nEquation (7.140) indicates that the source follower's bias current varies with the supply voltage. To mitigate this, integrated circuits use a current source for biasing the follower (Fig. 7.33).\nimage_name:Figure 7.33 Source follower with biasing\ndescription:\n[\nname: RG, type: Resistor, ports: {N1: VDD, N2: g1}\nname: C1, type: Capacitor, ports: {Np: Vin, Nn: g1}\nname: M1, type: NMOS, ports: {S: s1d2, D: VDD, G: g1}\nname: C2, type: Capacitor, ports: {Np: s1d2, Nn: Vout}\nname: S1, type: CurrentSource, ports: {Np: s1, Nn: GND}\nname: M2, type: NMOS, ports: {S: GND, D: s1d2, G: Vb}\n]\nextrainfo:The circuit is a source follower with biasing, where M1 and M2 form a cascode stage. The biasing is provided by a current source (S1) and a bias voltage (Vb) for M2. The circuit aims to stabilize the bias current against variations in the supply voltage (VDD).\n\nFigure 7.33 Source follower with biasing."
},
{
    "text": "The source follower biasing process resembles that of emitter followers (discussed in Chapter 5). Figure 7.32 illustrates a scenario where $R_{G}$ sets a dc voltage equivalent to $V_{D D}$ at the gate of $M_{1}$ (for a specific reason) and $R_{S}$ determines the drain bias current. It's important to note that $M_{1}$ functions in saturation due to the equality of gate and drain voltages. Additionally, the circuit's input impedance decreases from infinity to $R_{G}$.\n\nNow, let's calculate the circuit's bias current. Assuming no voltage drop across $R_{G}$, we get\n\n$$\n\\begin{equation*}\nV_{G S}+I_{D} R_{S}=V_{D D} . \\tag{7.138}\n\\end{equation*}\n$$\n\n[^5]Ignoring channel-length modulation, we express\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2}  \\tag{7.139}\\\\\n& =\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{D D}-I_{D} R_{S}-V_{T H}\\right)^{2} . \\tag{7.140}\n\\end{align*}\n$$\n\nThis quadratic equation can be solved to find $I_{D}$.\n\nDesign the source follower in Fig. 7.32 for a drain current of 1 mA and a voltage gain of 0.8. Assume $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}, \\lambda=0, V_{D D}=1.8 \\mathrm{~V}$, and $R_{G}=50 \\mathrm{k} \\Omega$.\n\n**Solution:** The unknown variables in this problem are $V_{G S}, W / L$, and $R_{S}$. The following three equations can be formulated:\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2}  \\tag{7.141}\\\\\nI_{D} R_{S}+V_{G S} & =V_{D D}  \\tag{7.142}\\\\\nA_{v} & =\\frac{R_{S}}{\\frac{1}{g_{m}}+R_{S}} . \\tag{7.143}\n\\end{align*}\n$$\n\nIf $g_{m}$ is expressed as $2 I_{D} /\\left(V_{G S}-V_{T H}\\right)$, then Eqs. (7.142) and (7.143) exclude $W / L$ and can be solved to find $V_{G S}$ and $R_{S}$. Using Eq. (7.142), we rewrite Eq. (7.143) as\n\n$$\n\\begin{align*}\nA_{v} & =\\frac{R_{S}}{\\frac{V_{G S}-V_{T H}}{2 I_{D}}+R_{S}}  \\tag{7.144}\\\\\n& =\\frac{2 I_{D} R_{S}}{V_{G S}-V_{T H}+2 I_{D} R_{S}}  \\tag{7.145}\\\\\n& =\\frac{2 I_{D} R_{S}}{V_{D D}-V_{T H}+I_{D} R_{S}} \\tag{7.146}\n\\end{align*}\n$$\n\nThus,\n\n$$\n\\begin{align*}\nR_{S} & =\\frac{V_{D D}-V_{T H}}{I_{D}} \\frac{A_{v}}{2-A_{v}}  \\tag{7.147}\\\\\n& =867 \\Omega . \\tag{7.148}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{align*}\nV_{G S} & =V_{D D}-I_{D} R_{S}  \\tag{7.149}\\\\\n& =V_{D D}-\\left(V_{D D}-V_{T H}\\right) \\frac{A_{v}}{2-A_{v}}  \\tag{7.150}\\\\\n& =0.933 \\mathrm{~V} \\tag{7.151}\n\\end{align*}\n$$\n\nFrom Eq. (7.141), we deduce that\n\n$$\n\\begin{equation*}\n\\frac{W}{L}=107 \\tag{7.152}\n\\end{equation*}\n$$\n\n**Exercise:** What voltage gain is achievable if $W / L$ cannot exceed 50?\n\nEquation (7.140) indicates that the source follower's bias current varies with the supply voltage. To mitigate this effect, integrated circuits use a current source for biasing the follower (as shown in Fig. 7.33).\n**Image Description:**\n[\nname: RG, type: Resistor, ports: {N1: VDD, N2: g1}\nname: C1, type: Capacitor, ports: {Np: Vin, Nn: g1}\nname: M1, type: NMOS, ports: {S: s1d2, D: VDD, G: g1}\nname: C2, type: Capacitor, ports: {Np: s1d2, Nn: Vout}\nname: S1, type: CurrentSource, ports: {Np: s1, Nn: GND}\nname: M2, type: NMOS, ports: {S: GND, D: s1d2, G: Vb}\n]\n**Extra Info:** This circuit is a source follower with biasing, where M1 and M2 form a cascode stage. The biasing is provided by a current source (S1) and a bias voltage (Vb) for M2. The circuit aims to stabilize the bias current against variations in the supply voltage (VDD).\n\n**Figure 7.33: Source follower with biasing.**"
},
{
    "text": "The biasing of source followers is akin to that of emitter followers (discussed in Chapter 5). Figure 7.32 illustrates an example where $R_{G}$ sets a dc voltage equal to $V_{D D}$ at the gate of $M_{1}$ (for a specific reason) and $R_{S}$ determines the drain bias current. Note that $M_{1}$ functions in saturation since the gate and drain voltages are identical. Additionally, the circuit's input impedance has decreased from infinity to $R_{G}$.\n\nLet's calculate the bias current of the circuit. With no voltage drop across $R_{G}$, we get\n\n$$\n\\begin{equation*}\nV_{G S}+I_{D} R_{S}=V_{D D} . \\tag{7.138}\n\\end{equation*}\n$$\n\n[^5]Ignoring channel-length modulation, we express\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2}  \\tag{7.139}\\\\\n& =\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{D D}-I_{D} R_{S}-V_{T H}\\right)^{2} . \\tag{7.140}\n\\end{align*}\n$$\n\nThis quadratic equation can be solved to find $I_{D}$.\n\nDesign the source follower in Fig. 7.32 for a drain current of 1 mA and a voltage gain of 0.8. Assume $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}, \\lambda=0, V_{D D}=1.8 \\mathrm{~V}$, and $R_{G}=50 \\mathrm{k} \\Omega$.\n\nSolution: The unknowns in this problem are $V_{G S}, W / L$, and $R_{S}$. The following three equations can be formulated:\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2}  \\tag{7.141}\\\\\nI_{D} R_{S}+V_{G S} & =V_{D D}  \\tag{7.142}\\\\\nA_{v} & =\\frac{R_{S}}{\\frac{1}{g_{m}}+R_{S}} . \\tag{7.143}\n\\end{align*}\n$$\n\nIf $g_{m}$ is expressed as $2 I_{D} /\\left(V_{G S}-V_{T H}\\right)$, then Eqs. (7.142) and (7.143) do not include $W / L$ and can be solved to find $V_{G S}$ and $R_{S}$. Using Eq. (7.142), we rewrite Eq. (7.143) as\n\n$$\n\\begin{align*}\nA_{v} & =\\frac{R_{S}}{\\frac{V_{G S}-V_{T H}}{2 I_{D}}+R_{S}}  \\tag{7.144}\\\\\n& =\\frac{2 I_{D} R_{S}}{V_{G S}-V_{T H}+2 I_{D} R_{S}}  \\tag{7.145}\\\\\n& =\\frac{2 I_{D} R_{S}}{V_{D D}-V_{T H}+I_{D} R_{S}} \\tag{7.146}\n\\end{align*}\n$$\n\nThus,\n\n$$\n\\begin{align*}\nR_{S} & =\\frac{V_{D D}-V_{T H}}{I_{D}} \\frac{A_{v}}{2-A_{v}}  \\tag{7.147}\\\\\n& =867 \\Omega . \\tag{7.148}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{align*}\nV_{G S} & =V_{D D}-I_{D} R_{S}  \\tag{7.149}\\\\\n& =V_{D D}-\\left(V_{D D}-V_{T H}\\right) \\frac{A_{v}}{2-A_{v}}  \\tag{7.150}\\\\\n& =0.933 \\mathrm{~V} \\tag{7.151}\n\\end{align*}\n$$\n\nFrom Eq. (7.141), it follows that\n\n$$\n\\begin{equation*}\n\\frac{W}{L}=107 \\tag{7.152}\n\\end{equation*}\n$$\n\nExercise: What voltage gain can be achieved if $W / L$ cannot exceed 50?\n\nEquation (7.140) indicates that the bias current of the source follower varies with the supply voltage. To mitigate this effect, integrated circuits use a current source for biasing the follower (as shown in Fig. 7.33).\nImage Description: Figure 7.33 illustrates a source follower with biasing, where M1 and M2 form a cascode stage. The biasing is provided by a current source (S1) and a bias voltage (Vb) for M2. The circuit aims to stabilize the bias current against variations in the supply voltage (VDD).\n\nFigure 7.33: Source follower with biasing."
},
{
    "text": "The biasing approach for source followers is akin to that used for emitter followers (as discussed in Chapter 5). Figure 7.32 illustrates a scenario where $R_{G}$ sets up a dc voltage at the gate of $M_{1}$ equal to $V_{D D}$ (for reasons explained later) and $R_{S}$ determines the drain bias current. It is important to note that $M_{1}$ functions in the saturation region because the gate and drain voltages are the same. Additionally, the circuit's input impedance decreases from infinity to $R_{G}$.\n\nLet's calculate the bias current for this circuit. Assuming no voltage drop across $R_{G}$, we have:\n\n$$\n\\begin{equation*}\nV_{G S}+I_{D} R_{S}=V_{D D} . \\tag{7.138}\n\\end{equation*}\n$$\n\n[^5]Disregarding channel-length modulation, we can express:\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2}  \\tag{7.139}\\\\\n& =\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{D D}-I_{D} R_{S}-V_{T H}\\right)^{2} . \\tag{7.140}\n\\end{align*}\n$$\n\nThis results in a quadratic equation that can be solved to find $I_{D}$.\n\nDesign the source follower shown in Fig. 7.32 for a drain current of 1 mA and a voltage gain of 0.8. Assume $\\mu_{n} C_{o x}=100 \\mu \\mathrm{~A} / \\mathrm{V}^{2}, V_{T H}=0.5 \\mathrm{~V}, \\lambda=0, V_{D D}=1.8 \\mathrm{~V}$, and $R_{G}=50 \\mathrm{k} \\Omega$.\n\nSolution: The unknown variables in this problem are $V_{G S}, W / L$, and $R_{S}$. We can formulate the following three equations:\n\n$$\n\\begin{align*}\nI_{D} & =\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2}  \\tag{7.141}\\\\\nI_{D} R_{S}+V_{G S} & =V_{D D}  \\tag{7.142}\\\\\nA_{v} & =\\frac{R_{S}}{\\frac{1}{g_{m}}+R_{S}} . \\tag{7.143}\n\\end{align*}\n$$\n\nBy expressing $g_{m}$ as $2 I_{D} /\\left(V_{G S}-V_{T H}\\right)$, Eqs. (7.142) and (7.143) no longer include $W / L$ and can be solved to find $V_{G S}$ and $R_{S}$. Using Eq. (7.142), we rewrite Eq. (7.143) as:\n\n$$\n\\begin{align*}\nA_{v} & =\\frac{R_{S}}{\\frac{V_{G S}-V_{T H}}{2 I_{D}}+R_{S}}  \\tag{7.144}\\\\\n& =\\frac{2 I_{D} R_{S}}{V_{G S}-V_{T H}+2 I_{D} R_{S}}  \\tag{7.145}\\\\\n& =\\frac{2 I_{D} R_{S}}{V_{D D}-V_{T H}+I_{D} R_{S}} \\tag{7.146}\n\\end{align*}\n$$\n\nTherefore,\n\n$$\n\\begin{align*}\nR_{S} & =\\frac{V_{D D}-V_{T H}}{I_{D}} \\frac{A_{v}}{2-A_{v}}  \\tag{7.147}\\\\\n& =867 \\Omega . \\tag{7.148}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{align*}\nV_{G S} & =V_{D D}-I_{D} R_{S}  \\tag{7.149}\\\\\n& =V_{D D}-\\left(V_{D D}-V_{T H}\\right) \\frac{A_{v}}{2-A_{v}}  \\tag{7.150}\\\\\n& =0.933 \\mathrm{~V} \\tag{7.151}\n\\end{align*}\n$$\n\nFrom Eq. (7.141), we deduce that:\n\n$$\n\\begin{equation*}\n\\frac{W}{L}=107 \\tag{7.152}\n\\end{equation*}\n$$\n\nExercise: What voltage gain can be achieved if $W / L$ is limited to 50?\n\nEquation (7.140) indicates that the bias current of the source follower varies with the supply voltage. To mitigate this, integrated circuits often use a current source for biasing the follower (as shown in Fig. 7.33).\n\nimage_name: Figure 7.33 Source follower with biasing\ndescription:\n[\nname: RG, type: Resistor, ports: {N1: VDD, N2: g1}\nname: C1, type: Capacitor, ports: {Np: Vin, Nn: g1}\nname: M1, type: NMOS, ports: {S: s1d2, D: VDD, G: g1}\nname: C2, type: Capacitor, ports: {Np: s1d2, Nn: Vout}\nname: S1, type: CurrentSource, ports: {Np: s1, Nn: GND}\nname: M2, type: NMOS, ports: {S: GND, D: s1d2, G: Vb}\n]\nextrainfo: This circuit is a source follower with biasing, featuring a cascode stage formed by M1 and M2. The biasing is supplied by a current source (S1) and a bias voltage (Vb) for M2. The design aims to stabilize the bias current against fluctuations in the supply voltage (VDD).\n\nFigure 7.33 Source follower with biasing."
},
{
    "text": "In this chapter, we have examined three fundamental CMOS building blocks: the common-source stage, the common-gate stage, and the source follower. As noted throughout the chapter, the small-signal behavior of these circuits closely resembles that of their bipolar counterparts, except for the high impedance observed at the gate terminal. We have also observed that the biasing schemes are similar, with the quadratic $I_{D}-V_{G S}$ relationship replacing the exponential $I_{C}-V_{B E}$ characteristic.\n\nIn this section, we present several additional examples to reinforce the concepts introduced in this chapter, with an emphasis on analysis by inspection.\n\nExample: Calculate the voltage gain and output impedance of the circuit depicted in Fig. 7.34(a).\nImage Description:\n[\nname: M1, type: PMOS, ports: {S: VDD, D: Vout, G: Vin}\nname: M2, type: NMOS, ports: {S: GND, D: Vout, G: Vb}\nname: M3, type: NMOS, ports: {S: Vout, D: GND, G: Vout}\n]\nExtra Info: The circuit is a common-source (CS) amplifier stage with PMOS M1 as the input device. M2 functions as a current source, and M3 is diode-connected. The output is taken from the drain of M1.\n\n(a)\nImage Description:\n[\nname: M1, type: PMOS, ports: {S: VDD, D: Vout, G: Vin}\nname: rO1, type: Resistor, value: rO1, ports: {N1: VDD, N2: Vout}\nname: rO2, type: Resistor, value: rO2, ports: {N1: Vout, N2: GND}\nname: rO3, type: Resistor, value: rO3, ports: {N1: Vout, N2: GND}\nname: 1/gm3, type: Resistor, value: 1/gm3, ports: {N1: Vout, N2: GND}\n]\nExtra Info: The circuit is a common-source amplifier stage with PMOS M1 as the input device. M2 acts as a current source, and M3 is diode-connected. The output is taken from the drain of M1.\n\n(b)\n\nFigure 7.34: (a) Example of CS stage, (b) simplified circuit.\n\nSolution: We identify $M_{1}$ as a common-source device because it detects the input at its gate and produces the output at its drain. Transistors $M_{2}$ and $M_{3}$ serve as the load, with $M_{2}$ acting as a current source and $M_{3}$ as a diode-connected device. Thus, $M_{2}$ can be replaced with a small-signal resistance equal to $r_{O 2}$, and $M_{3}$ with another equal to $\\left(1 / g_{m 3}\\right) \\| r_{O 3}$. The circuit simplifies to that shown in Fig. 7.34(b), resulting in\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 1}\\left(\\frac{1}{g_{m 3}}\\left\\|r_{O 1}\\right\\| r_{O 2} \\| r_{O 3}\\right) \\tag{7.153}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\nR_{o u t}=\\frac{1}{g_{m 3}}\\left\\|r_{O 1}\\right\\| r_{O 2} \\| r_{O 3} \\tag{7.154}\n\\end{equation*}\n$$\n\nNote that $1 / g_{m 3}$ is dominant in both expressions.\n\nExercise: Repeat the above example if $M_{2}$ is converted to a diode-connected device.\n\nExample: Compute the voltage gain of the circuit shown in Fig. 7.35(a), neglecting channel-length modulation in $M_{1}$.\nImage Description:\n[\nname: M3, type: PMOS, ports: {S: VDD, D: s1g3d3, G: s1g3d3}\nname: M1, type: PMOS, ports: {S: s1g3d3, D: Vout, G: Vin}\nname: M2, type: NMOS, ports: {S: GND, D: Vout, G: Vb}\n]\nExtra Info: The circuit is a common-source amplifier with M3 as a diode-connected PMOS, M1 as a PMOS, and M2 as an NMOS. The input is Vin, the output is Vout, and M2 is biased by Vb. M3 provides a load for M1.\n\n(a)\nImage Description:\n[\nname: M1, type: PMOS, ports: {S: S1, D: Vout, G: Vin}\nname: S1, type: VoltageSource, value: S1, ports: {Np: VDD, Nn: S1}\nname: 1/gm3 || rO3, type: Resistor, value: 1/gm3 || rO3, ports: {N1: S1, N2: VDD}\nname: rO2, type: Resistor, value: rO2, ports: {N1: Vout, N2: GND}\n]\nExtra Info: The circuit is a common-source amplifier with a PMOS transistor M1. The input is Vin, the output is Vout, and the load is provided by a combination of a voltage source S1 and a resistor 1/gm3 || rO3. The resistor rO2 connects the output to ground.\n\n(b)\n\nFigure 7.35: (a) Example of CS stage, (b) simplified circuit.\n\nSolution: Operating as a CS stage and degenerated by the diode-connected device $M_{3}$, transistor $M_{1}$ drives the current-source load, $M_{2}$. Simplifying the amplifier to that in Fig. 7.35(b), we obtain\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{r_{O 2}}{\\frac{1}{g_{m 1}}+\\frac{1}{g_{m 3}} \\| r_{O 3}} \\tag{7.155}\n\\end{equation*}\n$$\n\nExercise: Repeat the above example if the gate of $M_{3}$ is connected to a constant voltage.\n\nExample: Determine the voltage gain of the amplifiers shown in Fig. 7.36. For simplicity, assume $r_{O 1}=\\infty$ in Fig. 7.36(b).\nImage Description:\n[\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vin}\nname: M1, type: NMOS, ports: {S: S1, D: Vout, G: Vb}\nname: RS, type: Resistor, value: RS, ports: {N1: S1, N2: GND}\n]\nExtra Info: The circuit is a common-source amplifier stage with a PMOS load (M2) and an NMOS transistor (M1) with source degeneration by resistor RS. The input is applied at Vin, and the output is taken at Vout.\n\n(a)\nImage Description:\n[\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb2}\nname: M1, type: NMOS, ports: {S: S1, D: Vout, G: Vb1}\nname: RS, type: Resistor, value: RS, ports: {N1: S1, N2: Vin}\n]\nExtra Info: The circuit is a common-source amplifier stage with a PMOS load (M2) and an NMOS transistor (M1) with source degeneration by resistor RS. The input is applied at Vin, and the output is taken at Vout.\n\n(b)\n\nFigure 7.36: Examples of (a) CS and (b) CG stages.\n\nSolution: Degenerated by $R_{S}$, transistor $M_{1}$ in Fig. 7.36(a) presents an impedance of $\\left(1+g_{m 1} r_{O 1}\\right) R_{S}+r_{O 1}$ to the drain of $M_{2}$. Thus, the total impedance seen at the drain is $\\left[\\left(1+g_{m 1} r_{O 1}\\right) R_{S}+r_{O 1}\\right] \\| r_{O 2}$, giving a voltage gain of\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 2}\\left\\{\\left[\\left(1+g_{m 1} r_{O 1}\\right) R_{S}+r_{O 1}\\right] \\| r_{O 1}\\right\\} \\tag{7.156}\n\\end{equation*}\n$$\n\nIn Fig. 7.36(b), $M_{1}$ operates as a common-gate stage and $M_{2}$ as the load, obtaining Eq. (7.109):\n\n$$\n\\begin{equation*}\nA_{v 2}=\\frac{r_{O 2}}{\\frac{1}{g_{m 1}}+R_{S}} \\tag{7.157}\n\\end{equation*}\n$$\n\nExercise: Replace $R_{S}$ with a diode-connected device and repeat the analysis.\n\nCalculate the voltage gain of the circuit shown in Fig. 7.37(a) if $\\lambda=0$.\nImage Description:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: M1, type: NMOS, ports: {S: GND, D: s1s2, G: Vin}\nname: M2, type: NMOS, ports: {S: s1s2, D: Vout, G: Vb}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: I1, type: CurrentSource, value: I1, ports: {Np: s1s2, Nn: GND}\n]\nExtra Info: The circuit is a composite stage with M1 operating as a source follower and M2 as a common-gate stage. The voltage gain of the circuit is given by the expression A_v = RD / (1/g_m1 + 1/g_m2). A current named I1 flows from the node labeled s1s2 to ground.\nImage Description:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: M1, type: NMOS, ports: {S: GND, D: s1s2, G: Vin}\nname: M2, type: NMOS, ports: {S: s1s2, D: Vout, G: Vb}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: I1, type: CurrentSource, value: I1, ports: {Np: s1s2, Nn: GND}\n]\nExtra Info: The circuit is a composite stage with M1 operating as a source follower and M2 as a common-gate stage. The node s1s2 is a shared source connection between M1 and M2, with M2 providing the load for M1.\n\nFigure 7.37: (a) Example of a composite stage, (b) simplified circuit.\n\nSolution: In this circuit, $M_{1}$ functions as a source follower and $M_{2}$ as a CG stage. A straightforward method of analyzing the circuit is to replace $v_{i n}$ and $M_{1}$ with a Thevenin equivalent. From Fig. 7.29(b), we derive the model depicted in Fig. 7.37(b). Thus,\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{R_{D}}{\\frac{1}{g_{m 1}}+\\frac{1}{g_{m 2}}} \\tag{7.158}\n\\end{equation*}\n$$\n\nExercise: What happens if a resistor of value $R_{1}$ is placed in series with the drain of $M_{1}$?\n\nExample: The circuit in Fig. 7.38 produces two outputs. Calculate the voltage gain from the input to $Y$ and to $X$. Assume $\\lambda=0$ for $M_{1}$.\nImage Description:\n[\nname: M1, type: NMOS, ports: {S: X, D: Y, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: X, G: GND}\nname: M3, type: NMOS, ports: {S: Y, D: Vout2, G: VDD}\nname: M4, type: PMOS, ports: {S: VDD, D: Y, G: Vb}\n]\nExtra Info: The circuit in Figure 7.38 is a composite stage with two outputs, Vout1 and Vout2. M1 and M2 form a source follower configuration, while M3 and M4 are connected to the output node Y. The circuit operates with VDD as the power supply and GND as the ground reference.\n\nFigure 7.38: Example of composite stage.\n\nSolution: For $V_{\\text {out } 1}$, the circuit functions as a source follower. The reader can show that if $r_{O 1}=\\infty$, then $M_{3}$ and $M_{4}$ do not affect the source follower operation. Exhibiting a small-signal impedance of $\\left(1 / g_{m 2}\\right) \\| r_{O 2}$, transistor $M_{2}$ acts as a load for the follower, yielding from Eq. (7.131)\n\n$$\n\\begin{equation*}\n\\frac{v_{\\text {out } 1}}{v_{\\text {in }}}=\\frac{\\frac{1}{g_{m 2}} \\| r_{O 2}}{\\frac{1}{g_{m 2}} \\| r_{O 2}+\\frac{1}{g_{m 1}}} \\tag{7.159}\n\\end{equation*}\n$$\n\nFor $V_{\\text {out } 2}$, $M_{1}$ operates as a degenerated CS stage with a drain load consisting of the diode-connected device $M_{3}$ and the current source $M_{4}$. This load impedance is equal to $\\left(1 / g_{m 3}\\right)\\left\\|r_{O 3}\\right\\| r_{O 4}$, resulting in\n\n$$\n\\begin{equation*}\n\\frac{v_{\\text {out } 2}}{v_{i n}}=-\\frac{\\frac{1}{g_{m 3}}\\left\\|r_{O 3}\\right\\| r_{O 4}}{\\frac{1}{g_{m 1}}+\\frac{1}{g_{m 2}} \\| r_{O 2}} \\tag{7.160}\n\\end{equation*}\n$$\n\nExercise: Which one of the two gains is higher? Explain intuitively why."
}
]