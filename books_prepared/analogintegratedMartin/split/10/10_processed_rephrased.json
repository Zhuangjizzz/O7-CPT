[

{
    "text": "Comparators likely rank as the second most prevalent electronic components, following amplifiers. Their primary function is to ascertain whether a signal exceeds or falls short of zero, or to evaluate the magnitude of one signal relative to another. As detailed in Chapter 17, comparators are extensively employed in A/D converters and are also integral to various other applications, including data transmission and switching power regulators. This chapter delves into comparator design and its practical constraints, exploring multiple methodologies. Initially, we consider a basic method involving an open-loop opamp as a comparator. While this method is impractically slow, it serves as an illustrative example for discussing design strategies aimed at reducing input-offset voltage and charge-injection errors. Additional techniques are explored, such as multi-stage comparators, positive-feedback track-and-latch comparators, and fully differential comparators. The chapter concludes with descriptions of both CMOS and bipolar comparator circuit examples."
},
{
    "text": "Arguably the second most prevalent electronic components, following amplifiers, are comparators. These devices are employed to ascertain whether a signal exceeds or falls short of zero, or to contrast the magnitude of one signal with another. As detailed in Chapter 17, comparators are extensively utilized in A/D converters and are also integral to numerous other applications, including data transmission and switching power regulators, among others. This chapter delves into comparator design and its practical constraints, exploring various methodologies. Initially, we consider a basic method involving an open-loop opamp as a comparator. While this method is impractically slow, it serves as an illustrative example for discussing design strategies aimed at reducing input-offset voltage and charge-injection errors. Several other techniques are also explored, such as multi-stage comparators, positive-feedback track-and-latch comparators, and fully differential comparators. Additionally, examples of both CMOS and bipolar comparator circuits are presented."
},
{
    "text": "Arguably the second most prevalent electronic components, following amplifiers, are comparators. These devices are employed to ascertain whether a signal exceeds or falls short of zero, or to contrast the magnitude of one signal with another. As detailed in Chapter 17, comparators are extensively utilized in A/D converters. Their application extends to various other domains, including data transmission, switching power regulators, and more. This chapter delves into comparator design and its practical constraints, exploring multiple methodologies. Initially, we consider a basic method involving an open-loop opamp as a comparator. While this method is impractically slow, it serves as an illustrative example for discussing design strategies aimed at reducing input-offset voltage and charge-injection errors. Several other techniques are also covered, such as multi-stage comparators, positive-feedback track-and-latch comparators, and fully differential comparators. Additionally, examples of both CMOS and bipolar comparator circuits are presented."
},
{
    "text": "Possibly the second most prevalent electronic components, following amplifiers, are comparators. These components are employed to ascertain whether a signal exceeds or falls short of zero, or to evaluate the magnitude of one signal relative to another. As detailed in Chapter 17, comparators are extensively utilized in A/D converters and are also integral in numerous other applications, including data transmission and switching power regulators, among others. This chapter delves into the design of comparators and their practical constraints, exploring various methodologies. Initially, we consider a basic method involving an open-loop opamp as a comparator. Despite its impractical slowness, this method serves as an illustrative example for discussing design principles aimed at reducing input-offset voltage and charge-injection errors. Several other techniques are also explored, such as multi-stage comparators, positive-feedback track-and-latch comparators, and fully differential comparators. Additionally, examples of both CMOS and bipolar comparator circuits are presented."
},
{
    "text": "Possibly the second most prevalent electronic components, following amplifiers, are comparators. These devices are employed to ascertain whether a signal exceeds or falls short of zero, or to evaluate the magnitude of one signal against another. As detailed in Chapter 17, comparators are extensively utilized in A/D converters. Their application extends to various other fields, including data transmission, switching power regulators, and more. This chapter delves into the design of comparators and their practical constraints, exploring multiple methodologies. Initially, we consider a basic method involving an open-loop opamp as a comparator. While this method is impractically slow, it serves as an illustrative example for discussing design principles aimed at reducing input-offset voltage and charge-injection errors. Several other techniques are also explored, such as multi-stage comparators, positive-feedback track-and-latch comparators, and fully differential comparators. Additionally, examples of both CMOS and bipolar comparator circuits are provided."
},
{
    "text": "Comparators, possibly the second most prevalent electronic components next to amplifiers, are essential for determining if a signal exceeds or falls short of zero, or for evaluating the magnitude of one signal against another. As detailed in Chapter 17, comparators are extensively employed in A/D converters and are also integral to various other applications, including data transmission and switching power regulators. This chapter delves into comparator design and its practical constraints, exploring multiple methodologies. Initially, we consider a basic method involving an open-loop opamp as a comparator. Despite its impractical slowness, this method effectively illustrates key design principles aimed at reducing input-offset voltage and charge-injection errors. Additionally, we cover several other techniques, such as multi-stage comparators, positive-feedback track-and-latch comparators, and fully differential comparators. The chapter concludes with examples of both CMOS and bipolar comparator circuit designs."
},
{
    "text": "Arguably the second most prevalent electronic components, following amplifiers, are comparators. These devices are employed to ascertain whether a signal exceeds or falls short of zero, or to contrast the magnitude of one signal with another. As detailed in Chapter 17, comparators are extensively utilized in A/D converters. Their application extends to numerous other fields, including data transmission, switching power regulators, and more. This chapter delves into the design of comparators and their practical constraints, exploring various methodologies. Initially, we consider a basic method involving an open-loop opamp as a comparator. While this method is impractically slow, it serves as an illustrative example for discussing design strategies aimed at reducing input-offset voltage and charge-injection errors. Several other techniques are also explored, such as multi-stage comparators, positive-feedback track-and-latch comparators, and fully differential comparators. Additionally, examples of both CMOS and bipolar comparator circuits are provided."
},
{
    "text": "Comparators are likely the second most prevalent electronic components, following amplifiers. Their primary function is to ascertain whether a signal exceeds or falls short of zero, or to contrast the magnitude of one signal against another. As detailed in Chapter 17, comparators are extensively employed in A/D converters and are also integral to various other applications, including data transmission and switching power regulators, among others. This chapter delves into comparator design and its practical constraints, exploring multiple methodologies. Initially, we consider a basic method involving an open-loop opamp as a comparator. While this method is impractically slow, it serves as an illustrative example for discussing design strategies aimed at reducing input-offset voltage and charge-injection errors. Several other techniques are also explored, such as multi-stage comparators, positive-feedback track-and-latch comparators, and fully differential comparators. Additionally, examples of both CMOS and bipolar comparator circuits are provided."
},
{
    "text": "The input offset of a comparator is defined as the input voltage at which its output transitions between two logic levels (ignoring noise). In an ideal scenario, this value would be zero. However, in practical comparators, input offset can arise from device mismatches (as discussed in Chapter 2) or be an inherent aspect of the comparator's design.\n\nCircuit noise can lead to the comparator's output switching between logic states even when the input voltage remains constant. Therefore, to measure the input-offset voltage amidst such noise, one must identify the input voltage at which the comparator's output is equally probable to be high or low. The input-referred noise is then analyzed by varying the input around this voltage and observing how the output probabilities change with respect to the input voltage around this dc offset.\n\n#### EXAMPLE 10.1\n\nA comparator's output is monitored as the input voltage is gradually swept from -10 mV to +10 mV. The fraction of time the output is high is plotted against the input voltage in\nimage_name:Fig. 10.1\ndescription:Fig. 10.1 displays a probability curve, shaped like a sigmoid or S-curve, showing the likelihood of a comparator's high output as the input voltage varies.\n\n**Axes Labels and Units:**\n- The horizontal axis denotes the input voltage in millivolts (mV), ranging from -10 mV to +10 mV.\n- The vertical axis indicates the probability of the comparator output being high, ranging from 0 to 1.\n\n**Overall Behavior and Trends:**\n- The curve begins at a low probability near 0 at approximately -10 mV. As the input voltage increases, the probability of a high output increases sharply, forming an S-shaped curve.\n- The transition from low to high probability occurs around 0 to 5 mV, highlighting the comparator's sensitivity to input changes.\n\n**Key Features and Technical Details:**\n- At an input voltage of 3 mV, the probability of a high output is 50%, signifying the comparator's input offset.\n- At an input voltage of 4.28 mV, the probability reaches 90%, indicating a high confidence in the output being high.\n\n**Annotations and Specific Data Points:**\n- The graph features dashed lines marking the 50% probability at 3 mV and the 90% probability at 4.28 mV, which are crucial for evaluating the comparator’s performance.\n\nThe graph effectively demonstrates how the comparator's output probability shifts from low to high as the input voltage crosses the offset level, offering insights into the device's noise characteristics and sensitivity.\n\nFig. 10.1 Probability of a high output logic level with varying input level for a specific comparator.\n\nFig. 10.1. Determine the comparator's input offset and noise. For this comparator, what is the minimum input that can be detected with an error rate of $10^{-12}$?\n\n#### Solution\n\nThe plot in Fig. 10.1 is identified as a normal distribution. At an input of 3 mV, the comparator output has an equal chance of being high or low, indicating an input offset of 3 mV. The $90\\%$ confidence interval for a normal distribution is at 1.2816 times its standard deviation (rms) value. In Fig. 10.1, this point is at 4.28 mV, suggesting an rms input noise of\n\n$$\n\\frac{4.28-3}{1.2816} \\mathrm{mV}=1 \\mathrm{mV}_{\\mathrm{rms}}\n$$\n\nFor an error rate of $10^{-12}$, the input must surpass the input offset by 7.0344 times the rms noise level. Thus, for a high output logic level, the required input voltage is $3+7.0344 \\cdot 1 \\mathrm{mV}=10.0 \\mathrm{mV}$. For a low output logic level, the input must be below -4 mV."
},
{
    "text": "The input offset of a comparator is defined as the input voltage at which its output transitions between two logic levels, excluding noise. Ideally, this value should be zero, but in practical scenarios, input offset can arise from device mismatches (as discussed in Chapter 2) or be an inherent aspect of the comparator design.\n\nRandom circuit noise can induce fluctuations in the comparator's output, causing it to switch logic states even when the input voltage remains constant. Therefore, to measure the input-offset voltage amidst such noise, one must identify the input voltage at which the comparator's output is equally probable to be either high or low. The input-referred noise is then analyzed by varying the input around this point and observing the changes in output statistics relative to the input voltage around this dc offset.\n\n#### EXAMPLE 10.1\n\nWhen the input voltage to a comparator is gradually swept from -10 mV to +10 mV, the proportion of time the output remains high is plotted against the input voltage, as shown in\nimage_name:Fig. 10.1\ndescription:Fig. 10.1 presents a probability curve, shaped like a sigmoid or S-curve, illustrating the likelihood of a comparator's output being high in response to varying input voltages.\n\n**Axes Labels and Units:**\n- The horizontal axis denotes the input voltage in millivolts (mV), spanning from -10 mV to +10 mV.\n- The vertical axis indicates the probability of the comparator output being high, ranging from 0 to 1.\n\n**Overall Behavior and Trends:**\n- The curve initiates at a low probability close to 0 when the input voltage is approximately -10 mV. As the input voltage rises, the probability of a high output increases sharply, forming an S-shaped trajectory.\n- The transition from low to high probability occurs around the 0 to 5 mV range, highlighting the comparator's sensitivity to input variations.\n\n**Key Features and Technical Details:**\n- At an input voltage of 3 mV, the probability of a high output stands at 50%, signifying the comparator's input offset.\n- At 4.28 mV, the probability climbs to 90%, indicating a high confidence level in the output being high.\n\n**Annotations and Specific Data Points:**\n- The graph features dashed lines marking the 50% probability at 3 mV and the 90% probability at 4.28 mV, which are pivotal for evaluating the comparator's performance.\n\nThis graph effectively demonstrates the transition of the comparator's output from low to high probability as the input voltage surpasses the offset level, offering insights into the device's noise characteristics and sensitivity.\n\nFig. 10.1 Probability of a high output logic level as a function of varying input voltage for a specific comparator.\n\nFig. 10.1. Determine the comparator's input offset and noise. For this comparator, what is the minimum input that can be distinguished with an error rate of $10^{-12}$ ?\n\n#### Solution\n\nThe graph in Fig. 10.1 is identified as a normal distribution. At an input of 3 mV, the comparator output has an equal chance of being high or low, thus establishing the input offset at 3 mV. The $90 \\%$ confidence interval for a normal distribution corresponds to 1.2816 times its standard deviation (rms) value. In Fig. 10.1, this is observed at an input of 4.28 mV, suggesting an rms input noise of\n\n$$\n\\frac{4.28-3}{1.2816} \\mathrm{mV}=1 \\mathrm{mV}_{\\mathrm{rms}}\n$$\n\nFor an error rate of $10^{-12}$, the input must surpass the input offset by 7.0344 times the rms noise level. Therefore, for a high output logic level, the necessary input voltage is $3+7.0344 \\cdot 1 \\mathrm{mV}=10.0 \\mathrm{mV}$. For a low output logic level, the input must be below -4 mV."
},
{
    "text": "The input offset of a comparator is defined as the input voltage at which its output shifts between logic levels (disregarding noise). In an ideal scenario, this value would be zero. However, in real-world comparators, input offset can arise from device mismatches (as discussed in Chapter 2) or be an inherent aspect of the comparator's design.\n\nCircuit noise can lead to the comparator's output toggling between logic states even when the input voltage remains constant. Therefore, to measure the input-offset voltage amidst such noise, one must identify the input voltage where the comparator's output is equally probable to be high or low. The input-referred noise is then determined by varying the input around this voltage and observing how the output probabilities change with respect to the input voltage around this dc offset.\n\n#### EXAMPLE 10.1\n\nA comparator's output is monitored while the input voltage is gradually swept from -10 mV to +10 mV. The proportion of time the output is high is plotted against the input voltage in\nimage_name:Fig. 10.1\ndescription:Fig. 10.1 displays a probability curve, shaped like a sigmoid or S-curve, showing the likelihood of a high output logic level from a comparator as the input voltage varies.\n\n**Axes Labels and Units:**\n- The horizontal axis measures the input voltage in millivolts (mV), ranging from -10 mV to +10 mV.\n- The vertical axis indicates the probability of the comparator output being high, ranging from 0 to 1.\n\n**Overall Behavior and Trends:**\n- The curve begins at a low probability close to 0 when the input voltage is approximately -10 mV. As the input voltage rises, the probability of a high output increases sharply, forming an S-shaped pattern.\n- The transition from low to high probability occurs around the 0 to 5 mV range, highlighting the comparator's sensitivity to input changes.\n\n**Key Features and Technical Details:**\n- At an input voltage of 3 mV, the probability of a high output is 50%, signifying the comparator's input offset.\n- At an input voltage of 4.28 mV, the probability reaches 90%, indicating a high confidence in the output being high.\n\n**Annotations and Specific Data Points:**\n- The graph includes dashed lines marking the 50% probability at 3 mV and the 90% probability at 4.28 mV, which are crucial for evaluating the comparator’s performance.\n\nThe graph effectively demonstrates how the comparator's output transitions from low to high probability as the input voltage crosses the offset level, offering insights into the device's noise characteristics and sensitivity.\n\nFig. 10.1 Probability of a high output logic level with varying input level for a specific comparator.\n\nFig. 10.1. Determine the comparator's input offset and noise. For this comparator, what is the smallest input that can be resolved with an error rate of $10^{-12}$?\n\n#### Solution\n\nThe graph in Fig. 10.1 is identified as a normal distribution. At an input of 3 mV, the comparator output has an equal chance of being high or low, thus the input offset is 3 mV. The $90\\%$ confidence interval for a normal distribution is at 1.2816 times its standard deviation (rms) value. In Fig. 10.1, this point is at an input of 4.28 mV, suggesting an rms input noise of\n\n$$\n\\frac{4.28-3}{1.2816} \\mathrm{mV}=1 \\mathrm{mV}_{\\mathrm{rms}}\n$$\n\nFor an error rate of $10^{-12}$, the input must exceed the input offset by 7.0344 times the rms noise level. Therefore, for a high output logic level, the required input voltage is $3+7.0344 \\cdot 1 \\mathrm{mV}=10.0 \\mathrm{mV}$. For a low output logic level, the input must be below -4 mV."
},
{
    "text": "The input offset of a comparator is defined as the input voltage at which its output shifts from one logic level to another, disregarding noise. Ideally, this value should be zero, but in practical scenarios, input offset can arise from device mismatches (as discussed in Chapter 2) or be an inherent aspect of the comparator's design.\n\nCircuit noise can cause the comparator's output to toggle between logic states even when the input remains constant. Therefore, to measure the input-offset voltage amidst noise, one must identify the input voltage where the output is equally probable to be high or low. The input-referred noise is then analyzed by varying the input around this point and observing how the output statistics change with the input voltage.\n\n#### EXAMPLE 10.1\n\nBy gradually sweeping the input voltage from -10 mV to +10 mV, the comparator's output behavior is monitored. The proportion of time the output is high is plotted against the input voltage in\nimage_name:Fig. 10.1\ndescription:Fig. 10.1 displays a probability curve, shaped like a sigmoid or S-curve, representing the likelihood of a high output logic level from the comparator as the input voltage varies.\n\n**Axes Labels and Units:**\n- The horizontal axis shows the input voltage in millivolts (mV), ranging from -10 mV to +10 mV.\n- The vertical axis indicates the probability of the comparator output being high, spanning from 0 to 1.\n\n**Overall Behavior and Trends:**\n- The curve begins at a low probability near 0 at approximately -10 mV. As the input voltage rises, the probability of a high output increases sharply, forming an S-shaped pattern.\n- The transition from low to high probability occurs around 0 to 5 mV, highlighting the comparator's sensitivity to input changes.\n\n**Key Features and Technical Details:**\n- At 3 mV input voltage, the probability of a high output reaches 50%, marking the comparator's input offset.\n- At 4.28 mV, the probability hits 90%, indicating a high confidence in the output being high.\n\n**Annotations and Specific Data Points:**\n- The graph features dashed lines at 3 mV for 50% probability and at 4.28 mV for 90% probability, crucial for evaluating the comparator’s performance.\n\nThis graph effectively shows the transition of the comparator's output from low to high probability as the input voltage crosses the offset level, offering insights into the device's noise characteristics and sensitivity.\n\nFig. 10.1 Probability of a high output logic level with varying input level for a specific comparator.\n\nFig. 10.1. Determine the comparator's input offset and noise. For this comparator, what is the smallest input that can be resolved with an error rate of $10^{-12}$?\n\n#### Solution\n\nThe graph in Fig. 10.1 follows a normal distribution. At 3 mV input, the comparator output has equal chances of being high or low, thus the input offset is 3 mV. The 90% confidence interval for a normal distribution is at 1.2816 times its standard deviation (rms). In Fig. 10.1, this is observed at 4.28 mV, suggesting an rms input noise of\n\n$$\n\\frac{4.28-3}{1.2816} \\mathrm{mV}=1 \\mathrm{mV}_{\\mathrm{rms}}\n$$\n\nFor an error rate of $10^{-12}$, the input must surpass the input offset by 7.0344 times the rms noise level. Therefore, for a high output logic level, the required input voltage is $3+7.0344 \\cdot 1 \\mathrm{mV}=10.0 \\mathrm{mV}$. For a low output logic level, the input must be below -4 mV."
},
{
    "text": "The input offset of a comparator is defined as the input voltage at which its output transitions between logic levels (excluding noise effects). Ideally, this value should be zero, but in real-world comparators, input offset can arise from device mismatches (as discussed in Chapter 2) or be an inherent aspect of the comparator's design.\n\nCircuit noise can induce fluctuations in the comparator's output, causing it to switch between logic states even when the input voltage remains constant. Therefore, to measure the input-offset voltage amidst such noise, one must identify the input voltage at which the comparator's output is equally probable to be high or low. The input-referred noise is then assessed by varying the input around this voltage and analyzing how the output probabilities change with respect to the input voltage around this dc offset.\n\n#### EXAMPLE 10.1\n\nA comparator's output is monitored as the input voltage is gradually swept from -10 mV to +10 mV. The proportion of time the output remains high is plotted against the input voltage in\nimage_name:Fig. 10.1\ndescription:Fig. 10.1 displays a probability curve, shaped like a sigmoid or S-curve, showing the likelihood of a high output logic level from a comparator as the input voltage varies.\n\n**Axes Labels and Units:**\n- The horizontal axis denotes the input voltage in millivolts (mV), spanning from -10 mV to +10 mV.\n- The vertical axis indicates the probability of the comparator output being high, ranging from 0 to 1.\n\n**Overall Behavior and Trends:**\n- The curve begins at a low probability near 0 for input voltages around -10 mV. As the input voltage rises, the probability of a high output increases sharply, forming an S-shaped trajectory.\n- The transition from low to high probability occurs between 0 to 5 mV, highlighting the comparator's sensitivity to input variations.\n\n**Key Features and Technical Details:**\n- At an input voltage of 3 mV, the probability of a high output is 50%, signifying the comparator's input offset.\n- At 4.28 mV, the probability reaches 90%, indicating a high confidence in the output being high.\n\n**Annotations and Specific Data Points:**\n- The graph features dashed lines marking the 50% probability at 3 mV and the 90% probability at 4.28 mV, which are pivotal for evaluating the comparator’s performance.\n\nThis graph effectively demonstrates how the comparator's output probability shifts from low to high as the input voltage surpasses the offset level, offering insights into the device's noise characteristics and sensitivity.\n\nFig. 10.1 Probability of a high output logic level as a function of varying input voltage for a specific comparator.\n\nFig. 10.1. Determine the comparator's input offset and noise. For this comparator, what is the minimum input voltage that can be detected with an error rate of $10^{-12}$?\n\n#### Solution\n\nThe graph in Fig. 10.1 is identified as a normal distribution. At an input of 3 mV, the comparator output has an equal chance of being high or low, thus the input offset is 3 mV. The $90 \\%$ confidence interval for a normal distribution is at 1.2816 times its standard deviation (rms) value. In Fig. 10.1, this point is at 4.28 mV, suggesting an rms input noise of\n\n$$\n\\frac{4.28-3}{1.2816} \\mathrm{mV}=1 \\mathrm{mV}_{\\mathrm{rms}}\n$$\n\nFor an error rate of $10^{-12}$, the input must exceed the input offset by 7.0344 times the rms noise level. Therefore, for a high output logic level, the required input voltage is $3+7.0344 \\cdot 1 \\mathrm{mV}=10.0 \\mathrm{mV}$. For a low output logic level, the input must be below -4 mV."
},
{
    "text": "The input offset of a comparator is defined as the input voltage at which its output shifts from one logic level to another, disregarding noise. In an ideal scenario, this value would be zero. However, in practical comparators, input offset can arise due to device mismatches (as discussed in Chapter 2) or be an inherent aspect of the comparator's design.\n\nCircuit noise can induce the comparator's output to switch between logic states even when the input voltage remains constant. Therefore, to measure the input-offset voltage amidst circuit noise, one must identify the input voltage at which the comparator's output is equally probable to be high or low. The input-referred noise is then analyzed by varying the input around this voltage and observing how the output statistics change as a function of the input voltage near this dc offset.\n\n#### EXAMPLE 10.1\n\nA comparator's output is monitored while the input is gradually swept from -10 mV to +10 mV. The proportion of time the comparator output is high is plotted against the input voltage in\nimage_name:Fig. 10.1\ndescription:Fig. 10.1 displays a probability curve, shaped like a sigmoid or S-curve, representing the likelihood of a comparator's high output logic level as the input voltage varies.\n\n**Axes Labels and Units:**\n- The horizontal axis denotes the input voltage in millivolts (mV), spanning from -10 mV to +10 mV.\n- The vertical axis indicates the probability of the comparator output being high, ranging from 0 to 1.\n\n**Overall Behavior and Trends:**\n- The curve initiates at a low probability close to 0 at approximately -10 mV. As the input voltage rises, the probability of a high output increases sharply, forming an S-shaped pattern.\n- The transition from low to high probability occurs around the 0 to 5 mV range, highlighting the comparator's sensitivity to input changes.\n\n**Key Features and Technical Details:**\n- At an input voltage of 3 mV, the high output probability is 50%, signifying the comparator's input offset.\n- At 4.28 mV, the probability reaches 90%, indicating a high confidence in the output being high.\n\n**Annotations and Specific Data Points:**\n- The graph features dashed lines marking the 50% probability at 3 mV and the 90% probability at 4.28 mV, which are crucial for evaluating the comparator’s performance.\n\nThis graph effectively demonstrates the transition of the comparator's output from low to high probability as the input voltage surpasses the offset level, offering insights into the device's noise characteristics and sensitivity.\n\nFig. 10.1 Probability of a high output logic level as a function of varying input voltage for a specific comparator.\n\nFig. 10.1. Determine the comparator's input offset and noise. For this comparator, what is the minimal input that can be detected with an error rate of $10^{-12}$ ?\n\n#### Solution\n\nThe graph in Fig. 10.1 is identified as a normal distribution. At an input of 3 mV, the comparator output has an equal chance of being high or low, thus the input offset is 3 mV. The $90 \\%$ confidence interval for a normal distribution is at 1.2816 times its standard deviation (rms) value. In Fig. 10.1, this point is at 4.28 mV, suggesting an rms input noise of\n\n$$\n\\frac{4.28-3}{1.2816} \\mathrm{mV}=1 \\mathrm{mV}_{\\mathrm{rms}}\n$$\n\nFor an error rate of $10^{-12}$, the input must exceed the input offset by 7.0344 times the rms noise level. Therefore, for a high output logic level, the necessary input voltage is $3+7.0344 \\cdot 1 \\mathrm{mV}=10.0 \\mathrm{mV}$. For a low output logic level, the input must be below -4 mV."
},
{
    "text": "The input offset of a comparator is defined as the input voltage at which its output transitions between two logic levels (disregarding noise). In an ideal scenario, this value would be zero. However, in practical comparators, input offset can arise due to device mismatches (as discussed in Chapter 2) or be an inherent aspect of the comparator's design.\n\nCircuit noise can lead to the comparator's output switching between logic states even when the input voltage remains constant. Therefore, to measure the input-offset voltage amidst such noise, one must identify the input voltage at which the comparator's output is equally probable to be high or low. The input-referred noise is then analyzed by varying the input around this voltage and observing how the output statistics change as a function of the input voltage near this dc offset.\n\n#### EXAMPLE 10.1\n\nBy slowly sweeping the input voltage of a comparator from -10 mV to +10 mV, the fraction of time the output is high is plotted against the input voltage in\nimage_name:Fig. 10.1\ndescription:Fig. 10.1 presents a probability curve, shaped like a sigmoid or S-curve, illustrating the likelihood of a comparator's high output logic level as the input voltage varies.\n\n**Axes Labels and Units:**\n- The horizontal axis denotes the input voltage in millivolts (mV), spanning from -10 mV to +10 mV.\n- The vertical axis shows the probability of the comparator output being high, ranging from 0 to 1.\n\n**Overall Behavior and Trends:**\n- The curve initiates at a low probability close to 0 at approximately -10 mV. As the input voltage rises, the probability of a high output increases sharply, forming an S-shaped pattern.\n- The transition from low to high probability occurs around the 0 to 5 mV range, highlighting the comparator's sensitivity to input changes.\n\n**Key Features and Technical Details:**\n- At an input voltage of 3 mV, the probability of a high output is 50%, signifying the comparator's input offset.\n- At 4.28 mV, the probability reaches 90%, indicating a high confidence in the output being high.\n\n**Annotations and Specific Data Points:**\n- The graph features dashed lines marking the 50% probability at 3 mV and the 90% probability at 4.28 mV, which are pivotal for evaluating the comparator’s performance.\n\nThis graph effectively demonstrates the transition of the comparator's output from low to high probability as the input voltage surpasses the offset level, offering insights into the device's noise characteristics and sensitivity.\n\nFig. 10.1 Probability of a high output logic level as a function of varying input voltage for a specific comparator.\n\nFig. 10.1. Determine the comparator's input offset and noise. For this comparator, what is the minimum input that can be resolved with an error rate of $10^{-12}$ ?\n\n#### Solution\n\nThe graph in Fig. 10.1 is identified as a normal distribution. At an input of 3 mV, the comparator output has an equal chance of being high or low, thus the input offset is 3 mV. The $90 \\%$ confidence interval for a normal distribution is at 1.2816 times its standard deviation (rms) value. In Fig. 10.1, this is observed at 4.28 mV, suggesting an rms input noise of\n\n$$\n\\frac{4.28-3}{1.2816} \\mathrm{mV}=1 \\mathrm{mV}_{\\mathrm{rms}}\n$$\n\nFor an error rate of $10^{-12}$, the input must exceed the input offset by 7.0344 times the rms noise level. Therefore, for a high output logic level, the required input voltage is $3+7.0344 \\cdot 1 \\mathrm{mV}=10.0 \\mathrm{mV}$. For a low output logic level, the input must be below -4 mV."
},
{
    "text": "The input offset of a comparator is the voltage at which its output transitions between logic levels (ignoring noise). Ideally, this value should be zero, but in real-world comparators, input offset can arise from device mismatches (discussed in Chapter 2) or be an inherent design feature.\n\nCircuit noise can induce output transitions between logic states even when the input voltage remains constant. Therefore, to measure the input-offset voltage amidst noise, one must identify the input voltage that results in an equal probability of the output being high or low. The input-referred noise is then analyzed by varying the input around this voltage and observing the changes in output statistics relative to the input voltage.\n\n#### EXAMPLE 10.1\n\nA comparator's output is monitored as the input voltage is gradually swept from -10 mV to +10 mV. The proportion of time the output is high is plotted against the input voltage in\nimage_name:Fig. 10.1\ndescription:Fig. 10.1 displays a probability curve, shaped like a sigmoid or S-curve, showing the likelihood of a high output logic level from a comparator as the input voltage varies.\n\n**Axes Labels and Units:**\n- The horizontal axis measures the input voltage in millivolts (mV), ranging from -10 mV to +10 mV.\n- The vertical axis indicates the probability of the comparator output being high, ranging from 0 to 1.\n\n**Overall Behavior and Trends:**\n- The curve begins at a low probability near 0 at approximately -10 mV. As the input voltage rises, the probability of a high output increases sharply, forming an S-shaped pattern.\n- The transition from low to high probability occurs around 0 to 5 mV, highlighting the comparator's sensitivity to input changes.\n\n**Key Features and Technical Details:**\n- At 3 mV, the probability of a high output reaches 50%, indicating the comparator's input offset.\n- At 4.28 mV, the probability hits 90%, signifying a high confidence in the output being high.\n\n**Annotations and Specific Data Points:**\n- The graph includes dashed lines marking the 50% probability at 3 mV and the 90% probability at 4.28 mV, crucial for evaluating the comparator’s performance.\n\nThis graph effectively shows how the comparator's output transitions from low to high probability as the input voltage surpasses the offset level, offering insights into the device's noise characteristics and sensitivity.\n\nFig. 10.1 Probability of a high output logic level as a function of varying input voltage for a specific comparator.\n\nFig. 10.1. Determine the comparator's input offset and noise. For this comparator, what is the minimum input that can be resolved with an error rate of $10^{-12}$ ?\n\n#### Solution\n\nThe graph in Fig. 10.1 follows a normal distribution. At an input of 3 mV, the comparator output has an equal chance of being high or low, thus the input offset is 3 mV. The 90% confidence interval for a normal distribution is at 1.2816 times its standard deviation (rms). In Fig. 10.1, this is seen at 4.28 mV, indicating an rms input noise of\n\n$$\n\\frac{4.28-3}{1.2816} \\mathrm{mV}=1 \\mathrm{mV}_{\\mathrm{rms}}\n$$\n\nFor an error rate of $10^{-12}$, the input must exceed the input offset by 7.0344 times the rms noise level. Therefore, for a high output logic level, the required input voltage is $3+7.0344 \\cdot 1 \\mathrm{mV}=10.0 \\mathrm{mV}$. For a low output logic level, the input must be below -4 mV."
},
{
    "text": "Key Point: Hysteresis acts as a \"memory\" in a comparator, causing it to linger in its previous output state, typically because of charge held on internal circuit capacitances.\n\nIn numerous comparator designs, the input threshold is influenced by the comparator's prior state. Specifically, most comparators exhibit a propensity to stay in their previous condition. For instance, if a comparator's output is at a high logic level, it might persist at this level for input voltages down to -20 mV. Conversely, if the output is at a low logic level, an input voltage of +20 mV might be necessary to shift the output to a high logic level. This \"memory\" effect in the comparator arises from the charge stored on its internal capacitances and is known as hysteresis. Generally, hysteresis is considered a non-ideal characteristic in comparators that should be minimized, often by ensuring that all internal capacitances are periodically fully discharged. Nevertheless, in certain applications, hysteresis can be beneficial. For example, when a comparator operates with near-zero input for extended periods, some degree of hysteresis can prevent the output from fluctuating between high and low logic levels due to noise."
},
{
    "text": "Key Point: Hysteresis acts as a \"memory\" in a comparator, causing it to linger in its previous output state, typically due to retained charge on internal circuit capacitances.\n\nIn numerous comparator designs, the input threshold is influenced by the comparator's prior state. Essentially, comparators often exhibit a propensity to stay in their previous condition. For instance, if a comparator's output is at a high logic level, it might persist in this state even for input voltages as low as -20 mV. Conversely, if the output is at a low logic level, an input voltage of +20 mV might be necessary to switch the output to a high logic level. This \"memory\" effect in the comparator stems from the charge stored on its internal capacitances, a phenomenon known as hysteresis. Generally, hysteresis is considered a non-ideal characteristic in comparators and should be minimized, typically by ensuring periodic complete discharge of all internal capacitances. Nonetheless, in certain applications, hysteresis can be beneficial. For example, when a comparator operates with near-zero input for extended durations, some degree of hysteresis can prevent the output from fluctuating between high and low logic levels due to noise."
},
{
    "text": "Key Point: Hysteresis represents a \"memory\" effect in comparators, causing them to linger in their previous output state, primarily due to charge retention on internal circuit capacitances.\n\nIn numerous comparator designs, the input threshold is influenced by the comparator's prior state. Specifically, comparators generally exhibit a propensity to stay in their previous condition. For instance, if a comparator's output is at a high logic level, it may persist at this level even for input voltages as low as -20 mV. Conversely, if the output is at a low logic level, an input voltage of +20 mV might be necessary to switch it to a high logic level. This \"memory\" effect stems from the charge stored on the comparator's internal capacitances and is known as hysteresis. Typically, hysteresis is considered a non-ideal characteristic in comparators that should be minimized, often by ensuring periodic complete discharge of all internal capacitances. Nonetheless, in certain applications, hysteresis can be beneficial. For example, when a comparator is expected to operate with minimal input for extended durations, a degree of hysteresis can prevent the output from fluctuating between high and low logic levels due to noise."
},
{
    "text": "Key Point: Hysteresis acts as a \"memory\" in a comparator, causing it to linger in its previous output state, typically due to charge held on internal circuit capacitances.\n\nIn numerous comparator designs, the input threshold is influenced by the comparator's prior state. Specifically, comparators generally exhibit a propensity to stay in their previous condition. For instance, if a comparator's output is at a high logic level, it may persist at this level for input voltages down to -20 mV. Conversely, if the output is at a low logic level, an input voltage of +20 mV might be necessary to shift the output to a high logic level. This \"memory\" effect in the comparator arises from the charge stored on its internal capacitances, a phenomenon known as hysteresis. Typically, hysteresis is an undesirable trait in comparators that should be minimized, often by ensuring that all internal capacitances are fully discharged at regular intervals. Nonetheless, in certain scenarios, hysteresis can be beneficial. For example, when a comparator operates with near-zero input for extended periods, a degree of hysteresis can prevent the output from fluctuating between high and low logic levels due to noise."
},
{
    "text": "Key Point: Hysteresis represents the \"memory\" in a comparator, causing it to linger in its previous output state, primarily due to charge retained on internal circuit capacitances.\n\nIn numerous comparator designs, the input threshold is influenced by the comparator's prior state. Essentially, most comparators exhibit a propensity to stay in their previous state. For instance, if a comparator's output is at a high logic level, it may continue to do so even with input voltages as low as -20 mV. Conversely, if the comparator's output is at a low logic level, an input voltage of +20 mV might be necessary to switch the output to a high logic level. This \"memory\" effect in the comparator stems from the charge stored on its internal capacitances, a phenomenon known as hysteresis. Typically, hysteresis is considered a non-ideal characteristic in comparators that should be minimized, often by ensuring all internal capacitances are periodically fully discharged. Nevertheless, in certain applications, hysteresis can be beneficial. For example, when a comparator operates with near-zero input for extended periods, some hysteresis can prevent the output from fluctuating between high and low logic levels due to noise."
},
{
    "text": "Key Point: Hysteresis is the \"memory\" in a comparator that causes it to stay in its previous output state, typically due to charge held on internal circuit capacitances.\n\nIn many comparator designs, the input threshold is influenced by the comparator's past state. Most comparators exhibit a propensity to maintain their previous state. For instance, if a comparator's output is at a high logic level, it may stay that way even for input voltages as low as -20 mV. Conversely, if the output is at a low logic level, an input voltage of +20 mV might be necessary to switch the output to a high logic level. This \"memory\" effect arises from the charge stored on the comparator's internal capacitances and is known as hysteresis. Generally, hysteresis is an undesirable trait in comparators that should be minimized, often by ensuring that all internal capacitances are periodically fully discharged. However, in certain applications, hysteresis can be beneficial. For example, when a comparator operates with near-zero input for extended periods, some hysteresis can prevent the output from fluctuating between high and low logic levels due to noise."
},
{
    "text": "Key Point: Hysteresis acts as a \"memory\" in a comparator, causing it to linger in its previous output state, primarily due to charge held on internal circuit capacitances.\n\nIn numerous comparator designs, the input threshold is influenced by the comparator's prior state. Essentially, most comparators exhibit a propensity to stay in their previous state. For instance, if a comparator's output is at a high logic level, it may persist at this level for input voltages down to -20 mV. Conversely, if the output is at a low logic level, an input voltage of +20 mV might be necessary to switch the output to a high logic level. This \"memory\" effect in the comparator arises from the charge stored on its internal capacitances, a phenomenon known as hysteresis. Typically, hysteresis is considered a non-ideal characteristic in comparators and should be minimized, often by ensuring that all internal capacitances are fully discharged at regular intervals. Nevertheless, in certain applications, hysteresis can be beneficial. For example, when a comparator operates with near-zero input for extended periods, a degree of hysteresis can prevent the output from fluctuating between high and low logic levels due to noise."
},
{
    "text": "Key Point: Hysteresis is the \"memory\" in a comparator that causes it to linger in its previous output state, typically due to charge held on internal circuit capacitances.\n\nMany comparator designs feature an input threshold influenced by the comparator's past state. In particular, most comparators exhibit a propensity to stay in their previous state. For instance, if a comparator's output is at a high logic level, it might persist at this level for input voltages down to -20 mV. Conversely, if the output is at a low logic level, an input voltage of +20 mV might be necessary to switch the output to a high logic level. This \"memory\" effect stems from the charge stored on the comparator's internal capacitances and is known as hysteresis. Generally, hysteresis is an undesirable trait in comparators that should be minimized, often by ensuring all internal capacitances are fully discharged at regular intervals. Nonetheless, in certain applications, hysteresis can be beneficial. For example, when a comparator operates with near-zero input for extended periods, some hysteresis can prevent the output from fluctuating between high and low logic levels due to noise."
},
{
    "text": "A basic method for implementing a comparator involves using an open-loop opamp, as depicted in Fig. 10.2. The primary disadvantage of this method is the slow response time, as the opamp output must slew a significant voltage and settles slowly. Despite this, we will initially examine its input offset voltage, momentarily overlooking the slow response.\n\nThe simple opamp method illustrated in Fig. 10.2 has a resolution constrained by the opamp's input-offset voltage, typically ranging from 2 mV to 5 mV in standard MOS processes, which is insufficient for many uses. An alternative design capable of resolving signals with much finer accuracy than the input-offset voltages of opamps is presented in Fig. 10.3 [McCreary, 1975; Yee, 1978]. Although this circuit was frequently employed in early analog-to-digital converters, it is less favored today. Nonetheless, it serves as a straightforward example to demonstrate key design principles. The operation of the circuit in Fig. 10.3 is as follows: During $\\phi_{1}$, termed the reset phase, the bottom plate ${ }^{1}$ of capacitor C (i.e., the left side of capacitor C) is grounded, and the top plate connects to the inverting input of the opamp. Concurrently, the opamp output is linked to its inverting input by closing switch $\\mathrm{S}_{\\mathrm{r}}$. Assuming an ideal opamp, this setup charges the capacitor to zero volts. In the subsequent comparison phase, the reset switch $\\mathrm{S}_{\\mathrm{r}}$ is opened, and the bottom plate of the capacitor connects to the input voltage, placing the opamp in an open-loop configuration. If the input signal exceeds zero, the opamp output swings to a large negative voltage; if it is below zero, the output swings to a large positive voltage. These scenarios are easily distinguishable, and the decision can be stored using a basic digital latch.\n\nimage_name:Fig. 10.2\ndescription:\n[\nname: OpAmp1, type: OpAmp, ports: {InP: Vin, InN: GND, OutP: Vout}\n]\nextrainfo:The circuit is an open-loop op-amp comparator. When Vin > 0, the output Vout swings to a large negative voltage; when Vin < 0, Vout swings to a large positive voltage. The op-amp is used in a comparator configuration without feedback.\n\nFig. 10.2 A basic method of using an open-loop opamp for a comparator.\nimage_name:Fig. 10.3\ndescription:The circuit is a comparator with offset voltage cancellation using a capacitor and switch. The op-amp is configured with a feedback switch Sr, which closes during the phase φ1a to stabilize the comparator and reduce charge injection effects. The capacitor C is used to store charge and cancel offset voltages, with the bottom plate connected to the less sensitive input side.\n\nFig. 10.3 Cancelling the offset voltage of a comparator—the comparator here must be stable, with unity-gain feedback during $\\phi_{1 \\mathrm{a}}$. ( $\\phi_{1 \\mathrm{a}}$ is a slightly advanced version of $\\phi_{1}$ to minimize charge injection effects.)\n\n1. The bottom plate of a capacitor has significant parasitic capacitance to ground. Hence, it is usually connected to the less sensitive input side rather than the critical amplifier side (refer to Chapter 14).\n\nThe drawbacks of this approach become evident when considering nonideal opamps, which possess finite gains and necessitate compensation for stability during the reset phase."
},
{
    "text": "A basic method for implementing a comparator involves using an open-loop opamp, as depicted in Fig. 10.2. The primary disadvantage of this method is the sluggish response time, due to the opamp's output needing to slew a substantial voltage and settling gradually. Nevertheless, setting aside this slow response for now, we will initially examine its input offset voltage.\n\nThe simple opamp method illustrated in Fig. 10.2 has a resolution constrained by the opamp's input-offset voltage, typically ranging from 2 mV to 5 mV in standard MOS processes, which is insufficient for many uses. An alternative design capable of resolving signals with much finer accuracy than the input-offset voltages of opamps is presented in Fig. 10.3 [McCreary, 1975; Yee, 1978]. Although this circuit was frequently employed in early analog-to-digital converters, it is no longer preferred today. However, it serves as a straightforward example to demonstrate several key design principles. The operation of the circuit in Fig. 10.3 is as follows: During $\\phi_{1}$, termed the reset phase, the bottom plate ${ }^{1}$ of capacitor C (i.e., the left side of capacitor C) is grounded, while the top plate connects to the inverting input of the opamp. Concurrently, the opamp's output is linked to its inverting input by closing switch $\\mathrm{S}_{\\mathrm{r}}$. Assuming an ideal opamp, this setup charges the capacitor to zero volts. Subsequently, during the comparison phase, the reset switch $\\mathrm{S}_{\\mathrm{r}}$ is opened, and the bottom plate of the capacitor is connected to the input voltage, placing the opamp in an open-loop configuration. If the input signal exceeds zero, the opamp's output shifts to a large negative voltage; if it is below zero, the output shifts to a large positive voltage. These scenarios are easily distinguishable, and the decision can be retained using a simple digital latch.\n\nimage_name:Fig. 10.2\ndescription:\n[\nname: OpAmp1, type: OpAmp, ports: {InP: Vin, InN: GND, OutP: Vout}\n]\nextrainfo:The circuit functions as an open-loop op-amp comparator. When Vin > 0, the output Vout shifts to a large negative voltage; when Vin < 0, Vout shifts to a large positive voltage. The op-amp operates in a comparator setup without feedback.\n\nFig. 10.2 A basic method of employing an open-loop opamp for a comparator.\n\nimage_name:Fig. 10.3\ndescription:The circuit features a comparator with offset voltage cancellation using a capacitor and switch. The op-amp is set up with a feedback switch Sr, which closes during phase φ1a to stabilize the comparator and mitigate charge injection effects. The capacitor C is employed to store charge and cancel offset voltages, with the bottom plate attached to the less sensitive input side.\n\nFig. 10.3 Offset voltage cancellation in a comparator—the comparator must be stable with unity-gain feedback during $\\phi_{1 \\mathrm{a}}$. ( $\\phi_{1 \\mathrm{a}}$ is a slightly enhanced version of $\\phi_{1}$ to minimize charge injection effects.)\n\n1. The bottom plate of a capacitor exhibits significant parasitic capacitance with ground. Hence, it is usually connected to the less sensitive input side rather than the critical amplifier side (refer to Chapter 14).\n\nThe drawbacks of this approach become evident when considering nonideal opamps, which possess finite gains and necessitate compensation for stability during the reset phase."
},
{
    "text": "A basic method for implementing a comparator involves using an open-loop opamp, as depicted in Fig. 10.2. The primary disadvantage of this method is the sluggish response time, due to the opamp's output needing to slew a substantial voltage and settling too slowly. Despite this, we will initially examine its input offset voltage, momentarily overlooking the slow response.\n\nThe straightforward opamp method illustrated in Fig. 10.2 has a resolution constrained by the opamp's input-offset voltage, typically ranging from 2 mV to 5 mV in standard MOS processes, which is insufficient for many uses. An alternative design capable of resolving signals with much finer accuracy than the input-offset voltages of opamps is presented in Fig. 10.3 [McCreary, 1975; Yee, 1978]. Although this circuit was frequently employed in early analog-to-digital converters, it is less favored today. Nonetheless, it serves as a simple example to demonstrate numerous key design principles. The operation of the circuit in Fig. 10.3 is as follows: During $\\phi_{1}$, termed the reset phase, the bottom plate ${ }^{1}$ of capacitor C (i.e., the left side of capacitor C) is grounded, while the top plate connects to the inverting input of the opamp. Concurrently, the opamp's output is linked to its inverting input by closing switch $\\mathrm{S}_{\\mathrm{r}}$. Assuming an ideal opamp, this setup charges the capacitor to zero volts. Subsequently, during the comparison phase, the reset switch $\\mathrm{S}_{\\mathrm{r}}$ is opened, and the bottom plate of the capacitor connects to the input voltage, placing the opamp in an open-loop configuration. If the input signal exceeds zero, the opamp's output shifts to a large negative voltage; if it is below zero, the output shifts to a large positive voltage. These scenarios are easily distinguishable, and the decision can be stored using a basic digital latch.\n\nimage_name:Fig. 10.2\ndescription:\n[\nname: OpAmp1, type: OpAmp, ports: {InP: Vin, InN: GND, OutP: Vout}\n]\nextrainfo:This circuit functions as an open-loop op-amp comparator. When Vin > 0, the output Vout shifts to a large negative voltage; when Vin < 0, Vout shifts to a large positive voltage. The op-amp operates in a comparator setup without feedback.\n\nFig. 10.2 A basic method of employing an open-loop opamp for a comparator.\nimage_name:Fig. 10.3\ndescription:The circuit features a comparator with offset voltage cancellation using a capacitor and switch. The op-amp is set up with a feedback switch Sr, which closes during phase φ1a to stabilize the comparator and mitigate charge injection effects. The capacitor C is utilized to store charge and counteract offset voltages, with the bottom plate linked to the less sensitive input side.\n\nFig. 10.3 Offset voltage cancellation in a comparator—this comparator must remain stable with unity-gain feedback during $\\phi_{1 \\mathrm{a}}$. ( $\\phi_{1 \\mathrm{a}}$ is a slightly refined version of $\\phi_{1}$ to minimize charge injection effects.)\n\n1. The bottom plate of a capacitor exhibits considerable parasitic capacitance with ground. Hence, it is typically connected to the less sensitive input side rather than the critical amplifier side (refer to Chapter 14).\n\nThe constraints of this approach become evident when considering nonideal opamps, which possess finite gains and necessitate compensation for stability during the reset phase."
},
{
    "text": "A basic method for implementing a comparator involves using an open-loop opamp, as depicted in Fig. 10.2. The primary issue with this method is the slow response time, as the opamp output must slew a substantial voltage and settles too slowly. Despite this, we will initially examine its input offset voltage, momentarily overlooking the slow response.\n\nThe simple opamp method illustrated in Fig. 10.2 has a resolution constrained by the opamp's input-offset voltage, typically ranging from 2 mV to 5 mV in standard MOS processes, which is insufficient for many uses. An alternative design capable of resolving signals with much finer accuracy than the input-offset voltages of opamps is presented in Fig. 10.3 [McCreary, 1975; Yee, 1978]. Although this circuit was frequently employed in early analog-to-digital converters, it is no longer preferred today. Nonetheless, it serves as a straightforward example to demonstrate several key design principles. The operation of the circuit in Fig. 10.3 is as follows: During $\\phi_{1}$, termed the reset phase, the bottom plate ${ }^{1}$ of capacitor C (i.e., the left side of capacitor C) is grounded, and the top plate connects to the inverting input of the opamp. Concurrently, the opamp's output is linked to its inverting input by closing switch $\\mathrm{S}_{\\mathrm{r}}$. Assuming an ideal opamp, this setup charges the capacitor to zero volts. Subsequently, during the comparison phase, the reset switch $\\mathrm{S}_{\\mathrm{r}}$ is opened, and the bottom plate of the capacitor connects to the input voltage, placing the opamp in an open-loop configuration. If the input signal exceeds zero, the opamp output shifts to a large negative voltage; if it is below zero, the output shifts to a large positive voltage. These scenarios are easily distinguishable, and the decision can be stored using a basic digital latch.\n\nimage_name:Fig. 10.2\ndescription:\n[\nname: OpAmp1, type: OpAmp, ports: {InP: Vin, InN: GND, OutP: Vout}\n]\nextrainfo:This circuit functions as an open-loop op-amp comparator. When Vin > 0, the output Vout shifts to a large negative voltage; when Vin < 0, Vout shifts to a large positive voltage. The op-amp is utilized in a comparator setup without feedback.\n\nFig. 10.2 A basic method of employing an open-loop opamp for a comparator.\n\nimage_name:Fig. 10.3\ndescription:This circuit is a comparator with offset voltage cancellation, incorporating a capacitor and switch. The op-amp is arranged with a feedback switch Sr, which closes during phase φ1a to stabilize the comparator and mitigate charge injection effects. The capacitor C is employed to store charge and counteract offset voltages, with its bottom plate linked to the less sensitive input side.\n\nFig. 10.3 Offset voltage cancellation in a comparator—this comparator must be stable with unity-gain feedback during $\\phi_{1 \\mathrm{a}}$. ( $\\phi_{1 \\mathrm{a}}$ is a slightly refined version of $\\phi_{1}$ to minimize charge injection effects.)\n\n1. The bottom plate of a capacitor exhibits significant parasitic capacitance to ground. Consequently, it is typically connected to the less sensitive input side rather than the critical amplifier side (refer to Chapter 14).\n\nThe drawbacks of this approach become evident when considering nonideal opamps, which possess finite gains and necessitate compensation for stability during the reset phase."
},
{
    "text": "A basic method for implementing a comparator involves using an open-loop opamp, as depicted in Fig. 10.2. The primary disadvantage of this method is the sluggish response time, owing to the opamp's need to slew a substantial output voltage and settle slowly. Despite this, we will initially examine its input offset voltage, temporarily overlooking the slow response.\n\nThe simple opamp method illustrated in Fig. 10.2 has a resolution constrained by the opamp's input-offset voltage, typically ranging from 2 mV to 5 mV in standard MOS processes, which is insufficient for many uses. An alternative design capable of resolving signals with much finer accuracy than the input-offset voltages of opamps is presented in Fig. 10.3 [McCreary, 1975; Yee, 1978]. Although this circuit was frequently employed in early analog-to-digital converters, it is less favored today. Nevertheless, it serves as a straightforward example to demonstrate numerous key design principles. The operation of the circuit in Fig. 10.3 is as follows: During $\\phi_{1}$, termed the reset phase, the bottom plate ${ }^{1}$ of capacitor C (i.e., the left side of capacitor C) is grounded, while the top plate connects to the inverting input of the opamp. Concurrently, the opamp's output is linked to its inverting input by closing switch $\\mathrm{S}_{\\mathrm{r}}$. Assuming an ideal opamp, this setup charges the capacitor to zero volts. Subsequently, during the comparison phase, the reset switch $\\mathrm{S}_{\\mathrm{r}}$ is opened, and the bottom plate of the capacitor connects to the input voltage, placing the opamp in an open-loop configuration. If the input signal exceeds zero, the opamp's output shifts to a large negative voltage; if it is below zero, the output shifts to a large positive voltage. These scenarios are easily distinguishable, and the decision can be preserved using a simple digital latch.\n\nimage_name:Fig. 10.2\ndescription:\n[\nname: OpAmp1, type: OpAmp, ports: {InP: Vin, InN: GND, OutP: Vout}\n]\nextrainfo:This circuit functions as an open-loop op-amp comparator. When Vin > 0, the output Vout shifts to a large negative voltage; when Vin < 0, Vout shifts to a large positive voltage. The op-amp operates in a comparator setup without feedback.\n\nFig. 10.2 A basic method using an open-loop opamp for a comparator.\nimage_name:Fig. 10.3\ndescription:The circuit incorporates a comparator with offset voltage cancellation using a capacitor and switch. The op-amp is set up with a feedback switch Sr, which closes during phase φ1a to stabilize the comparator and mitigate charge injection effects. The capacitor C is utilized to store charge and neutralize offset voltages, with the bottom plate linked to the less sensitive input side.\n\nFig. 10.3 Offset voltage cancellation in a comparator—this comparator must be stable with unity-gain feedback during $\\phi_{1 \\mathrm{a}}$. ( $\\phi_{1 \\mathrm{a}}$ is a refined version of $\\phi_{1}$ designed to minimize charge injection effects.)\n\n1. The bottom plate of a capacitor exhibits significant parasitic capacitance with ground. Consequently, it is typically connected to the less sensitive input side rather than the critical amplifier side (refer to Chapter 14).\n\nThe drawbacks of this approach become evident when considering nonideal opamps, which possess finite gains and necessitate compensation for stability during the reset phase."
},
{
    "text": "A basic method for implementing a comparator involves using an open-loop opamp, as depicted in Fig. 10.2. The primary disadvantage of this method is the sluggish response time, due to the opamp's output needing to slew a substantial voltage and settling slowly. Nevertheless, setting aside this slow response time temporarily, we will initially examine its input offset voltage.\n\nThe straightforward opamp method illustrated in Fig. 10.2 has a resolution constrained by the opamp's input-offset voltage, typically ranging from 2 mV to 5 mV for standard MOS processes, which is insufficient for many uses. An alternative design capable of resolving signals with much finer accuracy than the input-offset voltages of opamps is presented in Fig. 10.3 [McCreary, 1975; Yee, 1978]. Although this circuit was frequently employed in early analog-to-digital converters, as we will discuss, it is not preferred today. However, it serves as a simple example to demonstrate numerous key design principles. The operation of the circuit in Fig. 10.3 is as follows: During $\\phi_{1}$, termed the reset phase, the bottom plate ${ }^{1}$ of capacitor C (i.e., the left side of capacitor C) is grounded, and the top plate is linked to the inverting input of the opamp. Concurrently, the opamp's output is also connected to its inverting input by closing switch $\\mathrm{S}_{\\mathrm{r}}$. Assuming an ideal opamp, this setup charges the capacitor to zero volts. Subsequently, during the comparison phase, the reset switch $\\mathrm{S}_{\\mathrm{r}}$ is opened, and the bottom plate of the capacitor is connected to the input voltage, placing the opamp in an open-loop configuration. If the input signal exceeds zero, the opamp's output shifts to a large negative voltage. If the input signal is below zero, the output shifts to a large positive voltage. These scenarios are easily distinguishable, and the decision can be preserved using a simple digital latch.\n\nimage_name:Fig. 10.2\ndescription:\n[\nname: OpAmp1, type: OpAmp, ports: {InP: Vin, InN: GND, OutP: Vout}\n]\nextrainfo:The circuit functions as an open-loop op-amp comparator. When Vin > 0, the output Vout shifts to a large negative voltage; when Vin < 0, Vout shifts to a large positive voltage. The op-amp is utilized in a comparator setup without feedback.\n\nFig. 10.2 A basic method of employing an open-loop opamp for a comparator.\nimage_name:Fig. 10.3\ndescription:The circuit features a comparator with offset voltage cancellation using a capacitor and switch. The op-amp is configured with a feedback switch Sr, which closes during phase φ1a to stabilize the comparator and mitigate charge injection effects. The capacitor C is employed to store charge and cancel offset voltages, with the bottom plate connected to the less sensitive input side.\n\nFig. 10.3 Offset voltage cancellation in a comparator—here, the comparator must be stable with unity-gain feedback during $\\phi_{1 \\mathrm{a}}$. ( $\\phi_{1 \\mathrm{a}}$ is a slightly advanced version of $\\phi_{1}$ to minimize charge injection effects.)\n\n1. The bottom plate of a capacitor exhibits significant parasitic capacitance to ground. Hence, it is typically connected to the less sensitive input side rather than the critical amplifier side (refer to Chapter 14).\n\nThe constraints of this approach become evident when considering nonideal opamps, which possess finite gains and necessitate compensation for stability during the reset phase."
},
{
    "text": "A basic method for implementing a comparator involves using an open-loop opamp, as depicted in Fig. 10.2. The primary disadvantage of this method is the sluggish response time, as the opamp output must traverse a substantial voltage range and stabilizes slowly. Despite this, we will initially examine its input offset voltage, temporarily overlooking the slow response.\n\nThe simple opamp method illustrated in Fig. 10.2 has a resolution constrained by the opamp's input-offset voltage, typically ranging from 2 mV to 5 mV in standard MOS processes, which is insufficient for many uses. An alternative design capable of resolving signals with much finer accuracy than the input-offset voltages of opamps is presented in Fig. 10.3 [McCreary, 1975; Yee, 1978]. Although this circuit was frequently employed in early analog-to-digital converters, it is less favored today. Nevertheless, it serves as a straightforward example to demonstrate several key design principles. The operation of the circuit in Fig. 10.3 is as follows: During $\\phi_{1}$, termed the reset phase, the bottom plate ${ }^{1}$ of capacitor C (i.e., the left side of capacitor C) is grounded, while the top plate connects to the inverting input of the opamp. Concurrently, the opamp's output is linked to its inverting input by closing switch $\\mathrm{S}_{\\mathrm{r}}$. Assuming an ideal opamp, this setup charges the capacitor to zero volts. Subsequently, during the comparison phase, the reset switch $\\mathrm{S}_{\\mathrm{r}}$ is opened, and the bottom plate of the capacitor connects to the input voltage, placing the opamp in an open-loop configuration. If the input signal exceeds zero, the opamp output shifts to a large negative voltage; if it is below zero, the output shifts to a large positive voltage. These scenarios are easily distinguishable, and the decision can be retained using a basic digital latch.\n\nimage_name:Fig. 10.2\ndescription:\n[\nname: OpAmp1, type: OpAmp, ports: {InP: Vin, InN: GND, OutP: Vout}\n]\nextrainfo:This circuit functions as an open-loop op-amp comparator. When Vin > 0, the output Vout shifts to a large negative voltage; when Vin < 0, Vout shifts to a large positive voltage. The op-amp operates in a comparator setup without feedback.\n\nFig. 10.2 A basic method of employing an open-loop opamp for a comparator.\n\nimage_name:Fig. 10.3\ndescription:This circuit is a comparator with offset voltage cancellation, utilizing a capacitor and switch. The op-amp is set up with a feedback switch Sr, which closes during phase φ1a to stabilize the comparator and mitigate charge injection effects. The capacitor C is employed to store charge and counteract offset voltages, with its bottom plate linked to the less sensitive input side.\n\nFig. 10.3 Offset voltage cancellation in a comparator—here, the comparator must be stable with unity-gain feedback during $\\phi_{1 \\mathrm{a}}$. ( $\\phi_{1 \\mathrm{a}}$ is a slightly refined version of $\\phi_{1}$ to minimize charge injection effects.)\n\n1. The bottom plate of a capacitor exhibits considerable parasitic capacitance to ground. Hence, it is typically connected to the less sensitive input side rather than the critical amplifier side (refer to Chapter 14).\n\nThe drawbacks of this approach become evident when considering nonideal opamps, which possess finite gains and necessitate compensation for stability during the reset phase."
},
{
    "text": "A basic method for implementing a comparator involves using an open-loop opamp, as depicted in Fig. 10.2. The primary issue with this method is the slow response time, due to the opamp's output needing to slew a substantial voltage and settling slowly. Nonetheless, setting aside this slow response time temporarily, we will initially examine its input offset voltage.\n\nThe straightforward opamp method illustrated in Fig. 10.2 has a resolution constrained by the opamp's input-offset voltage, typically ranging from 2 mV to 5 mV for standard MOS processes, which is insufficient for many uses. An alternative design capable of resolving signals with much finer accuracy than the input-offset voltages of opamps is presented in Fig. 10.3 [McCreary, 1975; Yee, 1978]. Although this circuit was frequently employed in early analog-to-digital converters, as we will discuss, it is less favored today. However, it serves as a simple example to demonstrate numerous key design principles. The operation of the circuit in Fig. 10.3 is as follows: During $\\phi_{1}$, termed the reset phase, the bottom plate ${ }^{1}$ of capacitor C (i.e., the left side of capacitor C) is grounded, and the top plate is linked to the inverting input of the opamp. Concurrently, the opamp's output is also connected to its inverting input by closing switch $\\mathrm{S}_{\\mathrm{r}}$. Assuming an ideal opamp, this setup charges the capacitor to zero volts. Subsequently, during the comparison phase, the reset switch $\\mathrm{S}_{\\mathrm{r}}$ is opened, and the bottom plate of the capacitor is connected to the input voltage, placing the opamp in an open-loop configuration. If the input signal exceeds zero, the opamp's output shifts to a large negative voltage; if it is below zero, the output shifts to a large positive voltage. These scenarios are easily distinguishable, and the decision can be retained using a basic digital latch.\n\nimage_name:Fig. 10.2\ndescription:\n[\nname: OpAmp1, type: OpAmp, ports: {InP: Vin, InN: GND, OutP: Vout}\n]\nextrainfo:This circuit functions as an open-loop op-amp comparator. When Vin > 0, the output Vout shifts to a substantial negative voltage; when Vin < 0, Vout shifts to a substantial positive voltage. The op-amp operates in a comparator setup without feedback.\n\nFig. 10.2 A basic method using an open-loop opamp for a comparator.\nimage_name:Fig. 10.3\ndescription:This circuit is a comparator with offset voltage cancellation, utilizing a capacitor and switch. The op-amp is configured with a feedback switch Sr, which closes during phase φ1a to stabilize the comparator and mitigate charge injection effects. The capacitor C is employed to store charge and cancel offset voltages, with the bottom plate connected to the less sensitive input side.\n\nFig. 10.3 Offset voltage cancellation in a comparator—here, the comparator must be stable with unity-gain feedback during $\\phi_{1 \\mathrm{a}}$. ( $\\phi_{1 \\mathrm{a}}$ is a slightly refined version of $\\phi_{1}$ to minimize charge injection effects.)\n\n1. The bottom plate of a capacitor exhibits significant parasitic capacitance with ground. Therefore, it is typically connected to the less sensitive input side rather than the critical amplifier side (refer to Chapter 14).\n\nThe drawbacks of this approach become evident when considering nonideal opamps, which possess finite gains and necessitate compensation for stability during the reset phase."
},
{
    "text": "Following the comparison stage, the opamp's output should exhibit a 2-V disparity when the input signal is either -0.1 mV or +0.1 mV. Consequently, the opamp must possess a minimum gain of 10,000 V/V. Assuming dominant-pole compensation is employed to ensure stability during the reset phase, the opamp's open-loop transfer function resembles that depicted in Fig. 10.4. Here, the -3-dB frequency of the opamp is defined as\n\n$$\n\\begin{equation*}\n\\mathrm{f}_{-3 \\mathrm{~dB}}=\\frac{\\mathrm{f}_{\\mathrm{t}}}{\\mathrm{~A}_{0}}=1 \\mathrm{kHz} \\tag{10.1}\n\\end{equation*}\n$$\n\nDuring the comparison phase, the opamp's output will exhibit a transient response akin to a first-order system with a time constant given by\n\n$$\n\\begin{equation*}\n\\tau=\\frac{1}{2 \\pi \\mathrm{f}_{-3 \\mathrm{~dB}}} \\cong 0.16 \\mathrm{~ms} \\tag{10.2}\n\\end{equation*}\n$$\n\nIf six time constants are permitted for settling during the comparison phase, approximately 1 ms is required. Assuming the reset time equals the comparison time, the clock frequency cannot exceed 500 Hz—a rate too slow for most applications.\n\nimage_name:Fig. 10.4\ndescription:Fig. 10.4 illustrates a Bode plot of an opamp's open-loop transfer function used in a comparator. The plot features frequency on the x-axis (logarithmic scale from 1 kHz to 10 MHz) and gain magnitude, |A(w)|, in dB on the y-axis.\n\n1. **Graph Type and Function:**\n- This is a Bode plot showing the magnitude response of the opamp's open-loop transfer function.\n\n2. **Axes Labels and Units:**\n- The x-axis logs frequency from 1 kHz to 10 MHz.\n- The y-axis measures gain magnitude, |A(w)|, in dB.\n\n3. **Behavior and Trends:**\n- The plot initiates at 80 dB at low frequencies.\n- A sharp transition occurs at the cutoff frequency (f₀) of 1 kHz, where gain decreases linearly with frequency.\n- The slope indicates a 20 dB/decade reduction, typical of a single-pole system.\n- Gain declines to 0 dB at 10 MHz, marking the bandwidth limit.\n\n4. **Key Features and Technical Details:**\n- Initial gain (A₀) is 80 dB below 1 kHz.\n- Cutoff frequency (f₀) is 1 kHz.\n- The linear decrease signifies a first-order low-pass filter.\n- Bandwidth extends to 10 MHz.\n\n5. **Annotations and Data Points:**\n- Annotated with initial gain (A₀ = 80 dB) and cutoff frequency (f₀ = 1 kHz).\n- The final frequency marker is 10 MHz.\n\nFig. 10.4 The open-loop transfer function of the opamp used in the comparator.\n\nimage_name:Fig. 10.5\ndescription:Fig. 10.5 depicts an opamp with a compensation capacitor Cc that can be disconnected by switch Q1 during the comparison phase. Inputs are Vin+ and Vin-, and the output is Vout. The circuit includes current sources and MOS transistors, indicating differential amplification and current mirroring.\n\nFig. 10.5 An opamp with its compensation capacitor disconnected during the comparison phase.\n\nOne method to expedite the comparison time is to disconnect the compensation capacitor during this phase. For instance, Fig. 10.5 presents a simplified opamp schematic. Here, transistor Q1 facilitates lead compensation when active during the reset phase, $\\phi_{1}$. During the comparison phase, Q1 is deactivated, disconnecting the compensation capacitor, Cc, significantly accelerating the opamp's response. This technique enables clock frequencies ten to fifty times higher—potentially reaching 25 or 50 kHz in this example. If this suffices, the method is viable. However, it often falls short, necessitating alternative approaches, which will be discussed shortly.\n\nA key advantage of this method is that the input capacitor, C in Fig. 10.3, remains uncharged during operation. Specifically, in phase $\\phi_{1}$, C is always at 0 V. In phase $\\phi_{2}$, the top plate, connected to the inverting input, is open-circuited (ignoring parasitic capacitors), maintaining the voltage across C at 0 V (the top-plate voltage follows $\\mathrm{V}_{\\text {in }}$). This significantly reduces the input charge requirement when $\\mathrm{V}_{\\mathrm{in}}$ changes. If the bottom plate switches' phases were reversed, the comparison would be noninverting, but C would need charging/discharging during the reset phase as the bottom plate follows $\\mathrm{V}_{\\mathrm{in}}$, while the top plate stays at virtual ground. Typically, a large input capacitor is preferred to mitigate clock-feedthrough effects (see Section 10.3). This charging/discharging demand imposes stringent constraints on the input signal source, making the clock phasing in Fig. 10.3 preferable. Additionally, an inverting comparison is usually tolerable since it can be inverted digitally elsewhere in the system."
},
{
    "text": "Following the comparison stage, the opamp's output should exhibit a 2-V disparity between scenarios where the input signal is either -0.1 mV or +0.1 mV. Consequently, the opamp must possess a minimum gain of 10,000 V/V. Assuming dominant-pole compensation is employed to ensure stability during the reset phase, the opamp's open-loop transfer function resembles that depicted in Fig. 10.4. In this context, the opamp's -3-dB frequency is expressed as:\n\n$$\n\\begin{equation*}\n\\mathrm{f}_{-3 \\mathrm{~dB}}=\\frac{\\mathrm{f}_{\\mathrm{t}}}{\\mathrm{~A}_{0}}=1 \\mathrm{kHz} \\tag{10.1}\n\\end{equation*}\n$$\n\nDuring the comparison phase, the opamp's output will exhibit a transient response akin to a first-order system with a time constant defined by:\n\n$$\n\\begin{equation*}\n\\tau=\\frac{1}{2 \\pi \\mathrm{f}_{-3 \\mathrm{~dB}}} \\cong 0.16 \\mathrm{~ms} \\tag{10.2}\n\\end{equation*}\n$$\n\nIf six time constants are permitted for settling during the comparison phase, approximately 1 ms is required for this phase. Assuming the reset time equals the comparison time, the clock frequency cannot exceed 500 Hz—a rate too slow for most applications.\n\n**Image Description: Fig. 10.4**\nThe graph in Fig. 10.4 illustrates a Bode plot of an opamp's open-loop transfer function used in a comparator. The plot features frequency on the x-axis (logarithmic scale from 1 kHz to 10 MHz) and gain magnitude, |A(w)|, in dB on the y-axis.\n\n1. **Graph Type and Function:**\n- A Bode plot showing the magnitude response of the opamp's open-loop transfer function.\n\n2. **Axes Labels and Units:**\n- X-axis: Frequency (logarithmic scale, 1 kHz to 10 MHz).\n- Y-axis: Gain magnitude, |A(w)|, in dB.\n\n3. **Behavior and Trends:**\n- Begins at 80 dB at low frequencies.\n- Sharp transition at the cutoff frequency (1 kHz) with a linear decrease in gain.\n- Slope of -20 dB/decade, indicative of a single-pole system.\n- Gain decreases to 0 dB at 10 MHz, marking the bandwidth limit.\n\n4. **Key Features:**\n- Initial gain: A₀ = 80 dB (below 1 kHz).\n- Cutoff frequency: f₀ = 1 kHz.\n- First-order low-pass filter characteristic.\n- Bandwidth extends to 10 MHz.\n\n5. **Annotations:**\n- Key values: A₀ = 80 dB, f₀ = 1 kHz.\n- Final frequency marker: 10 MHz.\n\n**Fig. 10.4** The open-loop transfer function of the opamp used in the comparator.\n\n**Image Description: Fig. 10.5**\nThe circuit depicts an opamp with a compensation capacitor Cc, which can be disconnected by switch Q1 during the comparison phase. Inputs are Vin+ and Vin-, and the output is Vout. The circuit includes current sources and MOS transistors, suggesting differential amplification and current mirroring.\n\n**Fig. 10.5** An opamp with its compensation capacitor disconnected during the comparison phase.\n\nOne method to accelerate the comparison time is to disconnect the compensation capacitor during this phase. For instance, Fig. 10.5 presents a simplified opamp schematic. Here, transistor Q1 facilitates lead compensation when active during the reset phase, φ₁. During the comparison phase, Q1 is deactivated, disconnecting the compensation capacitor, Cc, significantly enhancing the opamp's speed. This technique allows for clock frequencies ten to fifty times higher—potentially reaching 25 or 50 kHz in this example. If this suffices, the approach is viable. However, it often falls short, necessitating alternative methods, which will be discussed shortly.\n\nA notable advantage of this approach is that the input capacitor, C in Fig. 10.3, remains uncharged during operation. Specifically, in phase φ₁, C is always charged to 0 V. In phase φ₂, the top plate, connected to the inverting input of the opamp, is open-circuited (ignoring parasitic capacitors), and the voltage across C stays at 0 V (the top-plate voltage follows Vin). This significantly reduces the charge required from the input when Vin changes. If the switches on the bottom plate had their phases reversed, the comparison would be noninverting, but C would need charging/discharging during the reset phase as the bottom plate follows Vin while the top plate remains at virtual ground. Typically, a large input capacitor is preferred to minimize clock-feedthrough effects (Section 10.3). This charging/discharging demand imposes strict constraints on the input signal source, thus the clock phasing in Fig. 10.3 should be used. Additionally, an inverting comparison is usually tolerable since it can be converted to noninverting via digital inversion elsewhere in the system."
},
{
    "text": "Upon completing the comparison phase, the opamp's output should exhibit a 2-V disparity between scenarios where the input signal is either -0.1 mV or $+0.1 \\mathrm{mV} .^{2}$. Consequently, the opamp must possess a minimum gain of $10,000 \\mathrm{~V} / \\mathrm{V}$. Assuming dominant-pole compensation is employed to ensure stability during the reset phase, the opamp's open-loop transfer function resembles that depicted in Fig. 10.4. In this context, the $-3-\\mathrm{dB}$ frequency of the opamp is defined by\n\n$$\n\\begin{equation*}\n\\mathrm{f}_{-3 \\mathrm{~dB}}=\\frac{\\mathrm{f}_{\\mathrm{t}}}{\\mathrm{~A}_{0}}=1 \\mathrm{kHz} \\tag{10.1}\n\\end{equation*}\n$$\n\nDuring the comparison phase, the opamp's output will exhibit a transient response akin to that of a first-order system, characterized by a time constant given by\n\n$$\n\\begin{equation*}\n\\tau=\\frac{1}{2 \\pi \\mathrm{f}_{-3 \\mathrm{~dB}}} \\cong 0.16 \\mathrm{~ms} \\tag{10.2}\n\\end{equation*}\n$$\n\nIf six time constants are permitted for settling during the comparison phase, approximately 1 ms is required for this phase. Assuming the reset time matches the comparison time, the clock frequency cannot exceed 500 Hz—a rate far too slow for most applications.\n\n---\n\n**Description of Fig. 10.4:**\nThe graph in Fig. 10.4 illustrates a Bode plot of the open-loop transfer function for an operational amplifier (opamp) utilized in a comparator. The plot features frequency on the x-axis and the gain magnitude, |A(w)|, in decibels (dB) on the y-axis.\n\n1. **Graph Type and Function:**\n- This is a Bode plot, specifically depicting the magnitude response of the opamp's open-loop transfer function.\n\n2. **Axes Labels and Units:**\n- The x-axis denotes frequency, scaled logarithmically from 1 kHz to 10 MHz.\n- The y-axis represents the gain magnitude, |A(w)|, in decibels (dB).\n\n3. **General Behavior and Trends:**\n- The graph initiates at a high gain of 80 dB at low frequencies.\n- A sharp transition occurs at the cutoff frequency (f₀) of 1 kHz, where the gain magnitude begins to decline linearly with increasing frequency.\n- The decline slope is characteristic of a single-pole system, showing a 20 dB/decade reduction.\n- The gain continues to decrease until it reaches 0 dB at 10 MHz, indicating the opamp's bandwidth limit.\n\n4. **Key Features and Technical Details:**\n- The initial gain is A₀ = 80 dB at frequencies below 1 kHz.\n- The cutoff frequency, f₀, is identified at 1 kHz, marking the point where gain starts to drop.\n- The linear gain decrease signifies a first-order low-pass filter behavior.\n- The opamp's bandwidth extends up to 10 MHz.\n\n5. **Annotations and Specific Data Points:**\n- The graph includes annotations for key values such as the initial gain (A₀ = 80 dB) and the cutoff frequency (f₀ = 1 kHz).\n- The final frequency marker at 10 MHz denotes the extent of the frequency response depicted.\n\n**Fig. 10.4:** The open-loop transfer function of the opamp used to implement the comparator.\n\n---\n\n**Description of Fig. 10.5:**\nThe circuit depicts an opamp with a compensation capacitor Cc that can be disconnected by switch Q1 during the comparison phase. The inputs are labeled Vin+ and Vin-, and the output is labeled Vout. The circuit incorporates current sources and MOS transistors, indicating differential amplification and current mirroring.\n\n**Fig. 10.5:** An opamp with its compensation capacitor disconnected during the comparison phase.\n\nOne method to accelerate the comparison time involves disconnecting the compensation capacitor during this phase. For instance, a simplified opamp schematic is presented in Fig. 10.5. In this design, transistor $Q_{1}$ facilitates lead compensation when active during the reset phase, $\\phi_{1}$. During the comparison phase, $Q_{1}$ is deactivated, disconnecting the compensation capacitor, $\\mathrm{C}_{\\mathrm{C}}$, thereby significantly enhancing the opamp's speed. This technique enables the use of clock frequencies ten to fifty times higher—potentially reaching 25 or 50 kHz in our example. If this suffices, the approach is viable. However, it often falls short, necessitating alternative methods, which will be discussed shortly.\n\nA notable advantage of this approach is that the input capacitor, C in Fig. 10.3, remains uncharged during operation. Specifically, in phase $\\phi_{1}$, C is consistently charged to 0 V. In phase $\\phi_{2}$, the top plate, connected to the inverting input of the opamp, is open-circuited (assuming parasitic capacitors are negligible), and the voltage across C stays at 0 V (i.e., the top-plate voltage tracks $\\mathrm{V}_{\\text {in }}$). This significantly reduces the charge required from the input when $\\mathrm{V}_{\\mathrm{in}}$ changes. If the switches on the bottom plate had their phases reversed, the comparison would be noninverting, but C would need to be charged or discharged during the reset phase since the bottom plate follows $\\mathrm{V}_{\\mathrm{in}}$, while the top plate remains at virtual ground. Typically, a large input capacitor is preferred to mitigate clock-feedthrough effects (explained in Section 10.3). This charging/discharging requirement imposes stringent constraints on the input signal source, thus the clock phasing in Fig. 10.3 should be employed. Moreover, an inverting comparison is usually tolerable as it can be converted to noninverting through digital inversion elsewhere in the system."
},
{
    "text": "Following the comparison stage, the opamp's output should exhibit a 2-V disparity between scenarios where the input signal is either -0.1 mV or +0.1 mV. Consequently, the opamp must possess a minimum gain of 10,000 V/V. Assuming dominant-pole compensation is employed to ensure stability during the reset stage, the opamp's open-loop transfer function resembles that depicted in Fig. 10.4. Here, the -3-dB frequency of the opamp is expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{f}_{-3 \\mathrm{~dB}}=\\frac{\\mathrm{f}_{\\mathrm{t}}}{\\mathrm{~A}_{0}}=1 \\mathrm{kHz} \\tag{10.1}\n\\end{equation*}\n$$\n\nDuring the comparison stage, the opamp's output will exhibit a transient response akin to a first-order system with a time constant given by\n\n$$\n\\begin{equation*}\n\\tau=\\frac{1}{2 \\pi \\mathrm{f}_{-3 \\mathrm{~dB}}} \\cong 0.16 \\mathrm{~ms} \\tag{10.2}\n\\end{equation*}\n$$\n\nIf six time constants are permitted for settling during the comparison stage, approximately 1 ms is required for this phase. Assuming the reset time equals the comparison time, the clock frequency cannot exceed 500 Hz—a rate too slow for most applications.\n\n**Fig. 10.4 Description:**\nThe graph in Fig. 10.4 is a Bode plot depicting the open-loop transfer function of an opamp used in a comparator. The plot features frequency on the x-axis and gain magnitude, |A(w)|, in decibels (dB) on the y-axis.\n\n1. **Graph Type and Function:**\n- This is a Bode plot, specifically illustrating the magnitude response of the opamp's open-loop transfer function.\n\n2. **Axes Labels and Units:**\n- The x-axis logs frequency from 1 kHz to 10 MHz.\n- The y-axis measures gain magnitude, |A(w)|, in dB.\n\n3. **Behavior and Trends:**\n- The plot initiates at 80 dB at low frequencies.\n- A sharp transition occurs at the cutoff frequency (f₀) of 1 kHz, where gain magnitude decreases linearly with increasing frequency.\n- The slope, indicative of a single-pole system, shows a 20 dB/decade decline.\n- Gain decreases to 0 dB at 10 MHz, marking the bandwidth limit.\n\n4. **Key Features and Technical Details:**\n- Initial gain is A₀ = 80 dB below 1 kHz.\n- The cutoff frequency, f₀, is 1 kHz.\n- The linear decline signifies a first-order low-pass filter.\n- Bandwidth extends to 10 MHz.\n\n5. **Annotations and Data Points:**\n- The plot annotates initial gain (A₀ = 80 dB) and cutoff frequency (f₀ = 1 kHz).\n- The final frequency marker is 10 MHz, indicating the frequency response range.\n\n**Fig. 10.4** The open-loop transfer function of the opamp used in the comparator.\n\n**Fig. 10.5 Description:**\nThe circuit comprises an opamp with a compensation capacitor Cc, which can be disconnected by switch Q1 during the comparison stage. Inputs are labeled Vin+ and Vin-, and the output is Vout. The circuit includes current sources and MOS transistors, indicating differential amplification and current mirroring.\n\n**Fig. 10.5** An opamp with its compensation capacitor disconnected during the comparison stage.\n\nOne method to expedite the comparison time is to disconnect the compensation capacitor during this stage. For instance, a simplified opamp schematic is presented in Fig. 10.5. In this design, transistor Q1 facilitates lead compensation when active during the reset stage, φ₁. During the comparison stage, Q1 is deactivated, disconnecting the compensation capacitor, Cc, significantly enhancing the opamp's speed. This technique allows clock frequencies ten to fifty times higher—potentially reaching 25 or 50 kHz in our example. If this suffices, the approach is viable. However, it often falls short, necessitating alternative methods, which will be discussed shortly.\n\nA notable advantage of this approach is that the input capacitor, C in Fig. 10.3, remains uncharged and undischarged during operation. Specifically, in phase φ₁, C is consistently charged to 0 V. In phase φ₂, the top plate, connected to the inverting input of the opamp, is open-circuited (ignoring parasitic capacitors), and the voltage across C stays at 0 V (i.e., the top-plate voltage follows Vin). This significantly reduces the charge demand from the input when Vin changes. If the switches on the bottom plate had their phases reversed, the comparison would be noninverting, but C would need charging or discharging during the reset phase since the bottom plate follows Vin, while the top plate remains at virtual ground. Typically, a larger input capacitor is preferred to minimize clockfeedthrough effects (detailed in Section 10.3). This charging/discharging necessity imposes stringent constraints on the input signal source, thus the clock phasing in Fig. 10.3 should be adopted. Additionally, an inverting comparison is usually tolerable as it can be converted to noninverting via digital inversion elsewhere in the system."
},
{
    "text": "Following the comparison stage, the opamp's output should exhibit a 2-V disparity between scenarios where the input signal is either -0.1 mV or +0.1 mV. Consequently, the opamp must have a minimum gain of 10,000 V/V. Assuming dominant-pole compensation is employed to ensure stability during the reset phase, we derive an open-loop transfer function for the opamp akin to that illustrated in Fig. 10.4. In this context, the -3-dB frequency of the opamp is defined by\n\n$$\n\\begin{equation*}\n\\mathrm{f}_{-3 \\mathrm{~dB}}=\\frac{\\mathrm{f}_{\\mathrm{t}}}{\\mathrm{~A}_{0}}=1 \\mathrm{kHz} \\tag{10.1}\n\\end{equation*}\n$$\n\nDuring the comparison phase, the opamp's output will exhibit a transient response resembling that of a first-order system with a time constant given by\n\n$$\n\\begin{equation*}\n\\tau=\\frac{1}{2 \\pi \\mathrm{f}_{-3 \\mathrm{~dB}}} \\cong 0.16 \\mathrm{~ms} \\tag{10.2}\n\\end{equation*}\n$$\n\nIf six time constants are permitted for settling during the comparison phase, approximately 1 ms is required for this phase. Assuming the reset time equals the comparison time, the clock frequency cannot exceed 500 Hz—a rate too slow for most applications.\n\nThe graph in Fig. 10.4 is a Bode plot depicting the open-loop transfer function of an opamp used in a comparator. The plot features frequency on the x-axis and gain magnitude, |A(w)|, in decibels (dB) on the y-axis.\n\n1. **Graph Type and Function:**\n- This Bode plot shows the magnitude response of the opamp's open-loop transfer function.\n\n2. **Axes Labels and Units:**\n- The x-axis logs frequency from 1 kHz to 10 MHz.\n- The y-axis measures gain magnitude, |A(w)|, in dB.\n\n3. **Behavior and Trends:**\n- The plot begins at 80 dB at low frequencies.\n- A sharp transition occurs at the cutoff frequency (f₀) of 1 kHz, where gain decreases linearly with increasing frequency.\n- The slope, typical of a single-pole system, decreases by 20 dB/decade.\n- Gain declines to 0 dB at 10 MHz, indicating the opamp's bandwidth limit.\n\n4. **Key Features and Technical Details:**\n- Initial gain A₀ is 80 dB below 1 kHz.\n- The cutoff frequency f₀ is 1 kHz.\n- The linear gain decrease signifies a first-order low-pass filter.\n- Bandwidth extends to 10 MHz.\n\n5. **Annotations and Data Points:**\n- The plot annotates initial gain (A₀ = 80 dB) and cutoff frequency (f₀ = 1 kHz).\n- The final frequency marker is 10 MHz, showing the frequency response's extent.\n\nFig. 10.4 illustrates the open-loop transfer function of the opamp used in the comparator.\n\nThe circuit in Fig. 10.5 features an opamp with a compensation capacitor Cc that can be disconnected by switch Q1 during the comparison phase. Inputs are labeled Vin+ and Vin-, and the output is Vout. The circuit includes current sources and MOS transistors, indicating differential amplification and current mirroring.\n\nFig. 10.5 shows an opamp with its compensation capacitor disconnected during the comparison phase.\n\nOne method to accelerate the comparison time is to disconnect the compensation capacitor during this phase. For instance, Fig. 10.5 presents a simplified opamp schematic. Here, transistor Q1 facilitates lead compensation when on during the reset phase, φ₁. During the comparison phase, Q1 is off, disconnecting the compensation capacitor, Cc, significantly enhancing the opamp's speed. This technique allows clock frequencies ten to fifty times higher than usual—potentially up to 25 or 50 kHz in this example. If this suffices, the approach is viable. However, it often falls short, necessitating alternative methods, which will be discussed shortly.\n\nA key advantage of this approach is that the input capacitor, C in Fig. 10.3, remains uncharged during operation. Specifically, in phase φ₁, C is always at 0 V. In phase φ₂, the top plate, connected to the inverting input of the opamp, is open-circuited (ignoring parasitic capacitors), and the voltage across C stays at 0 V (the top-plate voltage follows Vin). This minimizes the charge required from the input when Vin changes. If the switches on the bottom plate had their phases swapped, the comparison would be noninverting, but C would need charging/discharging during the reset phase since the bottom plate follows Vin, while the top plate stays at virtual ground. Typically, a large input capacitor is preferred to mitigate clock-feedthrough effects (discussed in Section 10.3). This charging/discharging need imposes strict constraints on the input signal source, so the clock phasing in Fig. 10.3 is recommended. Additionally, an inverting comparison is usually tolerable as it can be made noninverting via digital inversion elsewhere in the system."
},
{
    "text": "Following the comparison phase, the opamp's output should exhibit a 2-V disparity between scenarios where the input signal is either -0.1 mV or +0.1 mV. Consequently, the opamp must possess a minimum gain of 10,000 V/V. Assuming dominant-pole compensation is employed to ensure stability during the reset phase, we derive an open-loop transfer function for the opamp akin to that depicted in Fig. 10.4. In this context, the -3-dB frequency of the opamp is expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{f}_{-3 \\mathrm{~dB}}=\\frac{\\mathrm{f}_{\\mathrm{t}}}{\\mathrm{~A}_{0}}=1 \\mathrm{kHz} \\tag{10.1}\n\\end{equation*}\n$$\n\nDuring the comparison phase, the opamp's output will exhibit a transient response resembling that of a first-order system, characterized by a time constant\n\n$$\n\\begin{equation*}\n\\tau=\\frac{1}{2 \\pi \\mathrm{f}_{-3 \\mathrm{~dB}}} \\cong 0.16 \\mathrm{~ms} \\tag{10.2}\n\\end{equation*}\n$$\n\nIf six time constants are permitted for settling during the comparison phase, approximately 1 ms is required for this phase. Assuming the reset time equals the comparison time, the clock frequency cannot exceed 500 Hz—a rate too slow for most applications.\n\nimage_name:Fig. 10.4\ndescription:Fig. 10.4 illustrates a Bode plot of the open-loop transfer function for an opamp used in a comparator. The plot features frequency on the x-axis and gain magnitude, |A(w)|, in dB on the y-axis.\n\n1. **Graph Type and Function:**\n- This is a Bode plot, highlighting the magnitude response of the opamp's open-loop transfer function.\n\n2. **Axes Labels and Units:**\n- The x-axis logs frequency from 1 kHz to 10 MHz.\n- The y-axis measures gain magnitude, |A(w)|, in dB.\n\n3. **Behavior and Trends:**\n- The plot initiates at 80 dB at low frequencies.\n- A sharp transition occurs at the cutoff frequency (f₀) of 1 kHz, where gain decreases linearly with increasing frequency.\n- The slope, indicative of a single-pole system, shows a 20 dB/decade decline.\n- Gain drops to 0 dB at 10 MHz, marking the opamp's bandwidth limit.\n\n4. **Key Features and Technical Details:**\n- Initial gain A₀ is 80 dB below 1 kHz.\n- The cutoff frequency f₀ is at 1 kHz.\n- The linear gain decrease signifies a first-order low-pass filter.\n- Bandwidth extends to 10 MHz.\n\n5. **Annotations and Data Points:**\n- Annotated with initial gain (A₀ = 80 dB) and cutoff frequency (f₀ = 1 kHz).\n- The final frequency marker at 10 MHz denotes the plot's frequency range.\n\nFig. 10.4 The open-loop transfer function of the opamp used in the comparator.\n\nimage_name:Fig. 10.5\ndescription:Fig. 10.5 shows an opamp with a compensation capacitor Cc that can be disconnected by switch Q1 during the comparison phase. Inputs are labeled Vin+ and Vin-, and the output as Vout. The circuit includes current sources and MOS transistors, indicating differential amplification and current mirroring.\n\nFig. 10.5 An opamp with its compensation capacitor disconnected during the comparison phase.\n\nA method to expedite the comparison time involves disconnecting the compensation capacitor during this phase. For instance, Fig. 10.5 presents a simplified opamp schematic. Here, transistor Q1 facilitates lead compensation when active during the reset phase, $\\phi_{1}$. During the comparison phase, Q1 is deactivated, disconnecting the compensation capacitor, Cc, significantly enhancing the opamp's speed. This technique enables clock frequencies ten to fifty times higher—potentially reaching 25 or 50 kHz in our example. If this suffices, the approach is viable. However, it often falls short, necessitating alternative methods, which will be discussed shortly.\n\nA notable advantage of this approach is that the input capacitor, C in Fig. 10.3, remains uncharged and undischarged during operation. Specifically, in phase $\\phi_{1}$, C is consistently charged to 0 V. In phase $\\phi_{2}$, the top plate, connected to the inverting input of the opamp, is open-circuited (assuming negligible parasitic capacitors), and the voltage across C stays at 0 V (i.e., the top-plate voltage follows $\\mathrm{V}_{\\text {in }}$). This significantly reduces the charge required from the input when $\\mathrm{V}_{\\mathrm{in}}$ changes. If the bottom-plate switches had their phases reversed, the comparison would be noninverting, but C would need charging/discharging during the reset phase as the bottom plate follows $\\mathrm{V}_{\\mathrm{in}}$, while the top plate remains at virtual ground. Typically, a larger input capacitor is preferred to mitigate clock-feedthrough effects (discussed in Section 10.3). This charging/discharging demand imposes strict constraints on the input signal source, thus the clock phasing in Fig. 10.3 is recommended. Moreover, an inverting comparison is usually tolerable since it can be converted to noninverting via digital inversion elsewhere in the system."
},
{
    "text": "Following the comparison phase, the opamp's output should exhibit a 2-V disparity between scenarios where the input signal is either -0.1 mV or +0.1 mV. Consequently, the opamp's gain must be at least 10,000 V/V. Assuming dominant-pole compensation is employed to ensure stability during the reset phase, we derive an open-loop transfer function for the opamp akin to that depicted in Fig. 10.4. In this context, the -3-dB frequency of the opamp is expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{f}_{-3 \\mathrm{~dB}}=\\frac{\\mathrm{f}_{\\mathrm{t}}}{\\mathrm{~A}_{0}}=1 \\mathrm{kHz} \\tag{10.1}\n\\end{equation*}\n$$\n\nDuring the comparison phase, the opamp's output will exhibit a transient response resembling that of a first-order system with a time constant defined by\n\n$$\n\\begin{equation*}\n\\tau=\\frac{1}{2 \\pi \\mathrm{f}_{-3 \\mathrm{~dB}}} \\cong 0.16 \\mathrm{~ms} \\tag{10.2}\n\\end{equation*}\n$$\n\nIf six time constants are permitted for settling during the comparison phase, approximately 1 ms is required for this phase. Assuming the reset time equals the comparison time, the clock frequency cannot exceed 500 Hz—a rate too slow for most applications.\n\n**Fig. 10.4 Description:**\nThe graph in Fig. 10.4 is a Bode plot illustrating the open-loop transfer function of an operational amplifier (opamp) used in a comparator. The plot features frequency on the x-axis and the gain magnitude, |A(w)|, in decibels (dB) on the y-axis.\n\n1. **Graph Type and Function:**\n- This Bode plot displays the magnitude response of the opamp's open-loop transfer function.\n\n2. **Axes Labels and Units:**\n- The x-axis logs frequency from 1 kHz to 10 MHz.\n- The y-axis measures gain magnitude, |A(w)|, in dB.\n\n3. **Behavior and Trends:**\n- The graph initiates at 80 dB at low frequencies.\n- A sharp transition begins at the cutoff frequency (f₀) of 1 kHz, where gain magnitude decreases linearly with increasing frequency.\n- The slope, indicative of a single-pole system, shows a 20 dB/decade reduction.\n- Gain declines to 0 dB at 10 MHz, marking the opamp's bandwidth limit.\n\n4. **Key Features and Technical Details:**\n- Initial gain A₀ is 80 dB below 1 kHz.\n- The cutoff frequency f₀ is 1 kHz, where gain starts dropping.\n- The linear decrease signifies a first-order low-pass filter trait.\n- Bandwidth extends to 10 MHz.\n\n5. **Annotations and Data Points:**\n- Annotated with initial gain (A₀ = 80 dB) and cutoff frequency (f₀ = 1 kHz).\n- The final frequency marker at 10 MHz denotes the plot's frequency response extent.\n\n**Fig. 10.4** The open-loop transfer function of the opamp used in the comparator.\n\n**Fig. 10.5 Description:**\nThe circuit features an opamp with a compensation capacitor Cc that can be disconnected via switch Q1 during the comparison phase. Inputs are labeled Vin+ and Vin-, with the output as Vout. The circuit includes current sources and MOS transistors, indicating differential amplification and current mirroring.\n\n**Fig. 10.5** An opamp with its compensation capacitor disconnected during the comparison phase.\n\nOne method to accelerate the comparison time is to disconnect the compensation capacitor during this phase. For instance, a simplified opamp schematic in Fig. 10.5 demonstrates this. Here, transistor Q1 facilitates lead compensation when on during the reset phase, φ1. During the comparison phase, Q1 is off, disconnecting the compensation capacitor, Cc, significantly enhancing the opamp's speed. This technique allows clock frequencies ten to fifty times higher—potentially reaching 25 or 50 kHz in our example. If this suffices, the method is viable. However, it often falls short, necessitating alternative approaches, which will be discussed shortly.\n\nA notable advantage of this method is that the input capacitor, C in Fig. 10.3, remains uncharged during operation. Specifically, in phase φ1, C is always charged to 0 V. In phase φ2, the top plate, connected to the inverting input of the opamp, is open-circuited (ignoring parasitic capacitors), and the voltage across C stays at 0 V (the top-plate voltage follows Vin). This significantly reduces the charge required from the input when Vin changes. If the switches on the bottom plate had their phases swapped, the comparison would be noninverting, but C would need charging/discharging during the reset phase as the bottom plate follows Vin, while the top plate remains at virtual ground. Typically, a large input capacitor is preferred to minimize clock-feedthrough effects (discussed in Section 10.3). This charging/discharging need imposes stringent constraints on the input signal source, thus the clock phasing in Fig. 10.3 should be adopted. Moreover, an inverting comparison is usually tolerable since it can be inverted digitally elsewhere in the system."
},
{
    "text": "Following the comparison stage, the opamp's output should exhibit a 2-V disparity between scenarios where the input signal is either -0.1 mV or +0.1 mV. Consequently, the opamp must have a minimum gain of 10,000 V/V. Assuming dominant-pole compensation is employed to ensure stability during the reset stage, we derive an open-loop transfer function for the opamp akin to that depicted in Fig. 10.4. In this context, the -3-dB frequency of the opamp is calculated as\n\n$$\n\\begin{equation*}\n\\mathrm{f}_{-3 \\mathrm{~dB}}=\\frac{\\mathrm{f}_{\\mathrm{t}}}{\\mathrm{~A}_{0}}=1 \\mathrm{kHz} \\tag{10.1}\n\\end{equation*}\n$$\n\nDuring the comparison stage, the opamp's output will exhibit a transient response resembling that of a first-order system with a time constant given by\n\n$$\n\\begin{equation*}\n\\tau=\\frac{1}{2 \\pi \\mathrm{f}_{-3 \\mathrm{~dB}}} \\cong 0.16 \\mathrm{~ms} \\tag{10.2}\n\\end{equation*}\n$$\n\nIf six time constants are permitted for settling during the comparison stage, approximately 1 ms is required for this phase. Assuming the reset time equals the comparison time, the clock frequency cannot exceed 500 Hz—a rate too slow for most applications.\n\n**Fig. 10.4 Description:**\nThe graph in Fig. 10.4 illustrates a Bode plot of the open-loop transfer function for an operational amplifier (opamp) used in a comparator. The plot features frequency on the x-axis and gain magnitude, |A(w)|, in decibels (dB) on the y-axis.\n\n1. **Graph Type and Function:**\n   - This is a Bode plot showing the magnitude response of the opamp's open-loop transfer function.\n\n2. **Axes Labels and Units:**\n   - The x-axis logs frequency from 1 kHz to 10 MHz.\n   - The y-axis measures gain magnitude, |A(w)|, in dB.\n\n3. **Behavior and Trends:**\n   - The plot initiates at 80 dB at low frequencies.\n   - A sharp transition occurs at the cutoff frequency (f₀) of 1 kHz, where gain decreases linearly with increasing frequency.\n   - The slope, indicative of a single-pole system, drops by 20 dB/decade.\n   - Gain declines to 0 dB at 10 MHz, marking the bandwidth limit.\n\n4. **Key Features and Technical Details:**\n   - Initial gain A₀ is 80 dB below 1 kHz.\n   - Cutoff frequency f₀ is at 1 kHz, initiating gain decline.\n   - The linear decrease signifies a first-order low-pass filter.\n   - Bandwidth extends to 10 MHz.\n\n5. **Annotations and Data Points:**\n   - Annotated with initial gain (A₀ = 80 dB) and cutoff frequency (f₀ = 1 kHz).\n   - The final frequency, 10 MHz, delineates the frequency response's extent.\n\n**Fig. 10.4** The open-loop transfer function of the opamp used in the comparator.\n\n**Fig. 10.5 Description:**\nThe circuit comprises an opamp with a compensation capacitor Cc, disconnectable by switch Q1 during the comparison phase. Inputs are Vin+ and Vin-, with output Vout. It includes current sources and MOS transistors, indicating differential amplification and current mirroring.\n\n**Fig. 10.5** An opamp with its compensation capacitor disconnected during the comparison phase.\n\nOne method to expedite the comparison time is to disconnect the compensation capacitor during this phase. For instance, Fig. 10.5 shows a simplified opamp schematic. Here, transistor Q1 facilitates lead compensation when active during the reset phase, $\\phi_{1}$. During the comparison phase, Q1 is deactivated, disconnecting the compensation capacitor, Cc, significantly enhancing the opamp's speed. This technique enables clock frequencies ten to fifty times higher—potentially up to 25 or 50 kHz in this example. If this suffices, the method is viable. However, it often falls short, necessitating alternative approaches, which will be discussed shortly.\n\nA notable advantage of this method is that the input capacitor, C in Fig. 10.3, remains uncharged during operation. Specifically, in phase $\\phi_{1}$, C is consistently charged to 0 V. In phase $\\phi_{2}$, the top plate, connected to the inverting input, is open-circuited (assuming negligible parasitic capacitors), maintaining the voltage across C at 0 V (the top-plate voltage follows $\\mathrm{V}_{\\text {in }}$). This significantly reduces the required input charge when $\\mathrm{V}_{\\mathrm{in}}$ changes. If the bottom plate switches' phases were swapped, the comparison would be noninverting, but C would need charging/discharging during the reset phase as the bottom plate follows $\\mathrm{V}_{\\mathrm{in}}$, while the top plate stays at virtual ground. Typically, a larger input capacitor is preferred to mitigate clockfeedthrough effects (explained in Section 10.3). This charging/discharging need imposes stringent demands on the input signal source, thus the clock phasing in Fig. 10.3 is recommended. Moreover, an inverting comparison is usually tolerable since it can be inverted digitally elsewhere in the system."
},
{
    "text": "In switched-capacitor comparators, such as the one depicted in Fig. 10.3, input offset is not an issue because it is stored across the capacitor during the reset phase and subsequently canceled during the comparison phase. To understand this cancellation process, consider that the opamp has an input-offset voltage error represented as a voltage source in series with one of its inputs. The circuit setup during the reset phase is illustrated in\n\nKey Point: An input capacitor is sometimes employed to sample the input offset voltage of a comparator during the reset phase and then subtract it from the input during the comparison phase.\nimage_name:(a)\ndescription:The circuit diagram (a) depicts the configuration during the reset phase (ϕ1), where the input capacitor is charged to the offset voltage Voff. The switch Sr is closed, linking the op-amp's output to its inverting input, forming a feedback loop. The voltage source Voff represents the op-amp's input-offset voltage.\nimage_name:(b)\ndescription:The circuit is designed to cancel the opamp's input-offset voltage error by sampling it during the reset phase and subtracting it during the comparison phase. This is accomplished by charging the capacitor to the offset voltage during the reset phase and utilizing it to adjust the input during the comparison phase.\n\nFig. 10.6 The circuit configuration (a) during the reset phase, and (b) during the comparison phase, assuming the opamp has an input-offset voltage denoted by $\\mathrm{V}_{\\text {off }}$.\n\nFig. 10.6(a). Assuming the opamp has a very high gain, the inverting input of the opamp is at the voltage $\\mathrm{V}_{\\text {off }}$, indicating that the input capacitor is charged to $\\mathrm{V}_{\\text {off }}$ during this phase. Subsequently, during $\\phi_{2}$, as shown in Fig. $10.6(b)$, the left side of capacitor C is connected to the input voltage. The right side of the capacitor exhibits a voltage of $\\mathrm{V}_{\\text {in }}+\\mathrm{V}_{\\text {off }}$, leading to the comparator output being negative if $\\mathrm{V}_{\\text {in }}$ exceeds zero or positive if $\\mathrm{V}_{\\text {in }}$ is less than zero, irrespective of the $\\mathrm{V}_{\\text {off }}$ value. Additionally, note that very low-frequency input-referred noise is indistinguishable from input-offset and is thus canceled along with $\\mathrm{V}_{\\text {off }}$. Consequently, this method not only eradicates input-offset voltage errors but also reduces errors due to low-frequency $1 / \\mathrm{f}$ noise, which can be significant in CMOS microcircuits."
},
{
    "text": "In switched-capacitor comparators, like the one depicted in Fig. 10.3, input offset is not an issue because it is stored across the capacitor during the reset phase and subsequently canceled during the comparison phase. To understand this cancellation, consider that the opamp has an input-offset voltage error represented as a voltage source in series with one of its inputs. The circuit setup during the reset phase is illustrated in\n\nKey Point: An input capacitor is often employed to sample the comparator's input offset voltage during the reset phase and then subtract it from the input during the comparison phase.\nimage_name:(a)\ndescription:The circuit diagram (a) depicts the configuration during the reset phase (ϕ1) where the input capacitor is charged to the offset voltage Voff. The switch Sr is closed, linking the op-amp's output to its inverting input, forming a feedback loop. The voltage source Voff represents the op-amp's input-offset voltage.\nimage_name:(b)\ndescription:The circuit is designed to eliminate the opamp's input-offset voltage error by sampling it during the reset phase and subtracting it during the comparison phase. This is accomplished by charging the capacitor to the offset voltage during the reset phase and utilizing it to adjust the input during the comparison phase.\n\nFig. 10.6 The circuit configuration (a) during the reset phase, and (b) during the comparison phase, assuming the opamp has an input-offset voltage denoted by $\\mathrm{V}_{\\text {off }}$.\n\nFig. 10.6(a). Assuming the opamp has a very high gain, the inverting input of the opamp is at the voltage $\\mathrm{V}_{\\text {off }}$, indicating that the input capacitor is charged to $\\mathrm{V}_{\\text {off }}$ during this phase. Subsequently, during $\\phi_{2}$, as shown in Fig. $10.6(b)$, the left side of capacitor C is connected to the input voltage. The right side of the capacitor exhibits a voltage of $\\mathrm{V}_{\\text {in }}+\\mathrm{V}_{\\text {off }}$, leading to a negative comparator output if $\\mathrm{V}_{\\text {in }}$ is greater than zero or a positive output if $\\mathrm{V}_{\\text {in }}$ is less than zero, irrespective of $\\mathrm{V}_{\\text {off }}$. Additionally, note that very low-frequency input-referred noise is indistinguishable from input-offset and is thus canceled along with $\\mathrm{V}_{\\text {off }}$. Consequently, this method not only eradicates input-offset voltage errors but also reduces errors due to low-frequency $1 / \\mathrm{f}$ noise, which can be significant in CMOS microcircuits."
},
{
    "text": "In switched-capacitor comparators, such as the one depicted in Fig. 10.3, input offset is not an issue because it is stored across the capacitor during the reset phase and subsequently canceled during the comparison phase. To understand this cancellation, consider that the opamp has an input-offset voltage error represented as a voltage source in series with one of its inputs. The circuit setup during the reset phase is illustrated in\n\nKey Point: An input capacitor is occasionally employed to sample the input offset voltage of a comparator during the reset phase and then subtract it from the input during the comparison phase.\nimage_name:(a)\ndescription:The circuit diagram (a) depicts the configuration during the reset phase (ϕ1), where the input capacitor is charged to the offset voltage Voff. The switch Sr is closed, linking the op-amp's output to its inverting input, forming a feedback loop. The voltage source Voff represents the op-amp's input-offset voltage.\nimage_name:(b)\ndescription:The circuit is designed to eliminate the input-offset voltage error of the opamp by sampling it during the reset phase and subtracting it during the comparison phase. This is accomplished by charging the capacitor to the offset voltage during the reset phase and utilizing it to adjust the input during the comparison phase.\n\nFig. 10.6 The circuit configuration (a) during the reset phase, and (b) during the comparison phase, assuming the opamp has an input-offset voltage denoted by $\\mathrm{V}_{\\text {off }}$.\n\nFig. 10.6(a). Assuming the opamp has a very high gain, the inverting input of the opamp is at the voltage $\\mathrm{V}_{\\text {off }}$, indicating that the input capacitor is charged to $\\mathrm{V}_{\\text {off }}$ during this phase. During $\\phi_{2}$, as shown in Fig. $10.6(b)$, the left side of capacitor C is connected to the input voltage. The right side of the capacitor exhibits a voltage of $\\mathrm{V}_{\\text {in }}+\\mathrm{V}_{\\text {off }}$, causing the comparator output to go negative if $\\mathrm{V}_{\\text {in }}$ exceeds zero or positive if $\\mathrm{V}_{\\text {in }}$ is less than zero, irrespective of $\\mathrm{V}_{\\text {off }}$. Additionally, note that very low-frequency input-referred noise is indistinguishable from input-offset and is thus canceled along with $\\mathrm{V}_{\\text {off }}$. Consequently, this method not only eradicates input-offset voltage errors but also reduces errors due to low-frequency $1 / \\mathrm{f}$ noise, which can be significant in CMOS microcircuits."
},
{
    "text": "In switched-capacitor comparators, like the one depicted in Fig. 10.3, input offset is not an issue because it is stored across the capacitor during the reset phase and subsequently canceled during the comparison phase. To understand this cancellation, consider that the opamp has an input-offset voltage error represented as a voltage source in series with one of its inputs. The circuit setup during the reset phase is illustrated in\n\nKey Point: An input capacitor is occasionally employed to sample the comparator's input offset voltage during the reset phase and then subtract it from the input during the comparison phase.\nimage_name:(a)\ndescription:The circuit diagram (a) depicts the configuration during the reset phase (ϕ1), where the input capacitor is charged to the offset voltage Voff. The switch Sr is closed, linking the op-amp's output to its inverting input, thereby forming a feedback loop. The voltage source Voff represents the op-amp's input-offset voltage.\nimage_name:(b)\ndescription:The circuit is designed to eliminate the opamp's input-offset voltage error by sampling it during the reset phase and subtracting it during the comparison phase. This is accomplished by charging the capacitor to the offset voltage during the reset phase and utilizing it to adjust the input during the comparison phase.\n\nFig. 10.6 The circuit configuration (a) during the reset phase, and (b) during the comparison phase, assuming the opamp has an input-offset voltage denoted by $\\mathrm{V}_{\\text {off }}$.\n\nFig. 10.6(a). Assuming the opamp has a very high gain, the inverting input of the opamp is at the voltage $\\mathrm{V}_{\\text {off }}$, indicating that the input capacitor is charged to $\\mathrm{V}_{\\text {off }}$ during this phase. Subsequently, during $\\phi_{2}$, as shown in Fig. $10.6(b)$, the left side of capacitor C is connected to the input voltage. The right side of the capacitor exhibits a voltage of $\\mathrm{V}_{\\text {in }}+\\mathrm{V}_{\\text {off }}$, leading to a negative comparator output if $\\mathrm{V}_{\\text {in }}$ exceeds zero or a positive output if $\\mathrm{V}_{\\text {in }}$ is less than zero, irrespective of $\\mathrm{V}_{\\text {off }}$. Additionally, it should be noted that very low-frequency input-referred noise is indistinguishable from input-offset and is thus canceled along with $\\mathrm{V}_{\\text {off }}$. Consequently, this method not only eradicates input-offset voltage errors but also reduces errors due to low-frequency $1 / \\mathrm{f}$ noise, which can be significant in CMOS microcircuits."
},
{
    "text": "In switched-capacitor comparators, like the one depicted in Fig. 10.3, input offset is not an issue because it is stored across the capacitor during the reset phase and subsequently canceled during the comparison phase. To understand this cancellation, consider that the opamp has an input-offset voltage error represented as a voltage source in series with one of its inputs. The circuit setup during the reset phase is illustrated in\n\nKey Point: An input capacitor is occasionally employed to sample the comparator's input offset voltage during the reset phase and then subtract it from the input during the comparison phase.\nimage_name:(a)\ndescription:The circuit diagram (a) depicts the configuration during the reset phase (ϕ1), where the input capacitor is charged to the offset voltage Voff. The switch Sr is closed, linking the op-amp's output to its inverting input, thereby forming a feedback loop. The voltage source Voff represents the op-amp's input-offset voltage.\nimage_name:(b)\ndescription:The circuit is designed to cancel the opamp's input-offset voltage error by sampling it during the reset phase and subtracting it during the comparison phase. This is accomplished by charging the capacitor to the offset voltage during the reset phase and utilizing it to adjust the input during the comparison phase.\n\nFig. 10.6 The circuit configuration (a) during the reset phase, and (b) during the comparison phase, assuming the opamp has an input-offset voltage denoted by $\\mathrm{V}_{\\text {off }}$.\n\nFig. 10.6(a). Assuming the opamp has a very high gain, the inverting input of the opamp is at the voltage $\\mathrm{V}_{\\text {off }}$, indicating that the input capacitor is charged to $\\mathrm{V}_{\\text {off }}$ during this phase. During $\\phi_{2}$, as shown in Fig. $10.6(b)$, the left side of capacitor C is connected to the input voltage. The right side of the capacitor exhibits a voltage of $\\mathrm{V}_{\\text {in }}+\\mathrm{V}_{\\text {off }}$, causing the comparator output to go negative if $\\mathrm{V}_{\\text {in }}$ exceeds zero or positive if $\\mathrm{V}_{\\text {in }}$ is less than zero, irrespective of $\\mathrm{V}_{\\text {off }}$. Additionally, note that very low-frequency input-referred noise is indistinguishable from input-offset and is thus canceled along with $\\mathrm{V}_{\\text {off }}$. Consequently, this method not only eradicates input-offset voltage errors but also reduces errors due to low-frequency $1 / \\mathrm{f}$ noise, which can be significant in CMOS microcircuits."
},
{
    "text": "In switched-capacitor comparators, like the one depicted in Fig. 10.3, input offset is not an issue because it is stored across the capacitor during the reset phase and then canceled during the comparison phase. To understand this cancellation, consider that the opamp has an input-offset voltage error represented as a voltage source in series with one of its inputs. The circuit setup during the reset phase is illustrated in\n\nKey Point: An input capacitor is occasionally employed to sample the input offset voltage of a comparator during the reset phase and subsequently subtract it from the input during the comparison phase.\nimage_name:(a)\ndescription:The circuit diagram (a) depicts the configuration during the reset phase (ϕ1), where the input capacitor is charged to the offset voltage Voff. The switch Sr is closed, linking the op-amp's output to its inverting input, forming a feedback loop. The voltage source Voff represents the op-amp's input-offset voltage.\nimage_name:(b)\ndescription:The circuit is designed to cancel the opamp's input-offset voltage error by sampling it during the reset phase and subtracting it during the comparison phase. This is accomplished by charging the capacitor to the offset voltage during the reset phase and using it to adjust the input during the comparison phase.\n\nFig. 10.6 The circuit configuration (a) during the reset phase, and (b) during the comparison phase, assuming the opamp has an input-offset voltage denoted by $\\mathrm{V}_{\\text {off }}$.\n\nFig. 10.6(a). Assuming the opamp has a very high gain, the inverting input of the opamp is at the voltage $\\mathrm{V}_{\\text {off }}$, meaning the input capacitor is charged to $\\mathrm{V}_{\\text {off }}$ during this phase. During $\\phi_{2}$, as shown in Fig. $10.6(b)$, the left side of capacitor C is connected to the input voltage. The right side of the capacitor has a voltage of $\\mathrm{V}_{\\text {in }}+\\mathrm{V}_{\\text {off }}$, causing the comparator output to become negative if $\\mathrm{V}_{\\text {in }}$ is greater than zero or positive if $\\mathrm{V}_{\\text {in }}$ is less than zero, irrespective of $\\mathrm{V}_{\\text {off }}$. Additionally, note that very low-frequency input-referred noise is indistinguishable from input-offset and is thus canceled along with $\\mathrm{V}_{\\text {off }}$. Consequently, this method not only eradicates input-offset voltage errors but also reduces errors due to low-frequency $1 / \\mathrm{f}$ noise, which can be significant in CMOS microcircuits."
},
{
    "text": "In switched-capacitor comparators, as illustrated in Fig. 10.3, input offset is not an issue because it is stored across the capacitor during the reset phase and subsequently canceled during the comparison phase. To understand this cancellation, consider that the opamp has an input-offset voltage error represented as a voltage source in series with one of its inputs. The circuit setup during the reset phase is depicted in\n\nKey Point: An input capacitor is often employed to sample the input offset voltage of a comparator during the reset phase and then subtract it from the input during the comparison phase.\nimage_name:(a)\ndescription:The circuit diagram (a) illustrates the configuration during the reset phase (ϕ1) where the input capacitor is charged to the offset voltage Voff. The switch Sr is closed, linking the op-amp's output to its inverting input, forming a feedback loop. The voltage source Voff represents the op-amp's input-offset voltage.\nimage_name:(b)\ndescription:The circuit is designed to eliminate the input-offset voltage error of the opamp by sampling it during the reset phase and subtracting it during the comparison phase. This is accomplished by charging the capacitor to the offset voltage during the reset phase and utilizing it to adjust the input during the comparison phase.\n\nFig. 10.6 The circuit setup (a) during the reset phase, and (b) during the comparison phase, assuming the opamp has an input-offset voltage denoted by $\\mathrm{V}_{\\text {off }}$.\n\nFig. 10.6(a). Assuming the opamp has a very high gain, the inverting input of the opamp is at the voltage $\\mathrm{V}_{\\text {off }}$, indicating that the input capacitor is charged to $\\mathrm{V}_{\\text {off }}$ during this phase. Subsequently, during $\\phi_{2}$, as shown in Fig. $10.6(b)$, the left side of capacitor C is connected to the input voltage. The right side of the capacitor exhibits a voltage of $\\mathrm{V}_{\\text {in }}+\\mathrm{V}_{\\text {off }}$, leading to the comparator output being negative if $\\mathrm{V}_{\\text {in }}$ exceeds zero or positive if $\\mathrm{V}_{\\text {in }}$ is less than zero, irrespective of the value of $\\mathrm{V}_{\\text {off }}$. Additionally, note that very low-frequency input-referred noise is indistinguishable from input-offset and is therefore canceled along with $\\mathrm{V}_{\\text {off }}$. Thus, this method not only eradicates input-offset voltage errors but also reduces errors due to low-frequency $1 / \\mathrm{f}$ noise, which can be significant in CMOS microcircuits."
},
{
    "text": "In switched-capacitor comparators, such as the one depicted in Fig. 10.3, input offset is not an issue because it is stored across the capacitor during the reset phase and subsequently canceled during the comparison phase. To understand this cancellation, consider that the opamp has an input-offset voltage error represented as a voltage source in series with one of its inputs. The circuit setup during the reset phase is illustrated in\n\nKey Point: An input capacitor is occasionally employed to sample the comparator's input offset voltage during the reset phase and then subtract it from the input during the comparison phase.\nimage_name:(a)\ndescription:The circuit diagram (a) depicts the configuration during the reset phase (ϕ1), where the input capacitor is charged to the offset voltage Voff. The switch Sr is closed, linking the op-amp's output to its inverting input, forming a feedback loop. The voltage source Voff represents the op-amp's input-offset voltage.\nimage_name:(b)\ndescription:The circuit is arranged to eliminate the opamp's input-offset voltage error by sampling it during the reset phase and subtracting it during the comparison phase. This is accomplished by charging the capacitor to the offset voltage during the reset phase and utilizing it to adjust the input during the comparison phase.\n\nFig. 10.6 The circuit setup (a) during the reset phase, and (b) during the comparison phase, assuming the opamp has an input-offset voltage denoted by $\\mathrm{V}_{\\text {off }}$.\n\nFig. 10.6(a). Assuming the opamp has a very high gain, the inverting input of the opamp is at the voltage $\\mathrm{V}_{\\text {off }}$, indicating that the input capacitor is charged to $\\mathrm{V}_{\\text {off }}$ during this phase. Subsequently, during $\\phi_{2}$, as shown in Fig. $10.6(b)$, the left side of capacitor C is connected to the input voltage. The right side of the capacitor exhibits a voltage of $\\mathrm{V}_{\\text {in }}+\\mathrm{V}_{\\text {off }}$, leading to a negative comparator output if $\\mathrm{V}_{\\text {in }}$ exceeds zero or a positive output if $\\mathrm{V}_{\\text {in }}$ is less than zero, irrespective of $\\mathrm{V}_{\\text {off }}$. Additionally, note that very low-frequency input-referred noise is indistinguishable from input-offset and is thus canceled along with $\\mathrm{V}_{\\text {off }}$. Consequently, this method not only eradicates input-offset voltage errors but also reduces errors due to low-frequency $1 / \\mathrm{f}$ noise, which can be significant in CMOS microcircuits."
},
{
    "text": "Perhaps the primary constraint on comparator resolution stems from what is known as charge-injection, also frequently termed clock feedthrough. This error arises due to the injection of unwanted charges into the circuit when transistors switch off. In the comparator depicted in Fig. 10.3, the switches are typically implemented using either n-channel transistors alone or CMOS transmission gates (comprising n-channel and p-channel transistors in parallel, both of which must deactivate). When MOS switches are active, they operate in the triode region with zero volts between their drain and source. As MOS switches turn off, charge errors arise through two mechanisms. The first involves the channel charge, which must exit the transistor's channel region to the drain and source junctions. \n\nimage_name:Fig. 10.7\ndescription:The circuit features a comparator with n-channel MOS switches and parasitic capacitances. It includes three NMOS transistors and several capacitors to manage charge distribution and signal comparison, with an op-amp amplifying the difference between input and reference signals.\n\nFig. 10.7 illustrates the comparator from Fig. 10.3, highlighting n-channel switches and overlap parasitic capacitances. Active transistors also possess channel charge. The channel charge of a transistor with zero $\\mathrm{V}_{\\mathrm{DS}}$ is expressed as\n\n$$\n\\begin{equation*}\nQ_{c h}=W L C_{o x} V_{\\text {eff }}=W L C_{o x}\\left(V_{G s}-V_{t}\\right) \\tag{10.3}\n\\end{equation*}\n$$\n\nThis charge usually predominates. The second charge, typically smaller unless $\\mathrm{V}_{\\text {eff }}$ is very low, results from the overlap capacitance between the gate and the junctions.\n\nFig. 10.7 shows the comparator from Fig. 10.3, with switches realized as n-channel transistors. It also displays parasitic capacitances due to gate-drain and gate-source overlap capacitors. Additionally, while not depicted in Fig. 10.7, it's crucial to account for the channel charge dispersion of any transistors transitioning from on to off. In this circuit, all transistors are n-channel, indicating that the channel charge is negative.\n\nConsider the scenario when $Q_{3}$ switches off. If the clock waveform is rapid, the channel charge from $Q_{3}$ will evenly distribute through both junctions [Shieh, 1987]. The $\\mathrm{Q}_{\\mathrm{ch}} / 2$ charge reaching the opamp's output node will have minimal impact beyond causing a transient glitch. However, the $Q_{c h} / 2$ charge reaching the opamp's inverting-input node will alter the voltage across $C$, introducing an error. Since this charge is negative for an n-channel transistor, the node voltage $\\mathrm{V}^{\\prime \\prime}$ will become negative. The voltage change due to the channel charge is given by\n\n$$\n\\begin{equation*}\n\\Delta V^{\\prime \\prime}=\\frac{\\left(Q_{\\mathrm{ch}} / 2\\right)}{C}=-\\frac{V_{\\text {eff } 3} C_{o x} W_{3} L_{3}}{2 C}=-\\frac{\\left(V_{D D}-V_{t n}\\right) C_{o x} W_{3} L_{3}}{2 C} \\tag{10.4}\n\\end{equation*}\n$$\n\nThis calculation assumes that $Q_{2}$ deactivates slightly after $Q_{3}$. More on this assumption will be discussed shortly.\n\n[^0]Fig. 10.8 A capacitor divider.\nimage_name:Fig. 10.8 A capacitor divider\ndescription:The circuit comprises a capacitor divider with two capacitors, C1 and C2, connected in series. Vout is measured across C2, equating to VC2.\n\nKey Point: As a MOSFET transitions from triode mode to off, the stored channel charge must exit the transistor terminals; in a comparator, this charge can accumulate on circuit capacitances, causing offset.\n\nTo determine the voltage change due to overlap capacitance, the capacitor-divider formula must first be introduced. This formula calculates the voltage change at the internal node of two series capacitors when the voltage at one end terminal changes. Fig. 10.8 demonstrates this, assuming $\\mathrm{V}_{\\text {in }}$ varies and we need to compute $\\Delta \\mathrm{V}_{\\text {out }}=\\mathrm{V}_{\\mathrm{C} 2}$. The series combination of $\\mathrm{C}_{1}$ and $\\mathrm{C}_{2}$ equals a single capacitor, $\\mathrm{C}_{\\mathrm{eq}}$, defined by\n\n$$\n\\begin{equation*}\n\\mathrm{C}_{\\mathrm{eq}}=\\frac{\\mathrm{C}_{1} \\mathrm{C}_{2}}{\\mathrm{C}_{1}+\\mathrm{C}_{2}} \\tag{10.5}\n\\end{equation*}\n$$\n\nWhen $\\mathrm{V}_{\\text {in }}$ changes, the charge entering this equivalent capacitor is\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{Q}_{\\mathrm{eq}}=\\Delta \\mathrm{V}_{\\mathrm{in}} \\mathrm{C}_{\\mathrm{eq}}=\\Delta \\mathrm{V}_{\\mathrm{in}} \\frac{\\mathrm{C}_{1} \\mathrm{C}_{2}}{\\mathrm{C}_{1}+\\mathrm{C}_{2}} \\tag{10.6}\n\\end{equation*}\n$$\n\nAll charge entering $\\mathrm{C}_{\\mathrm{eq}}$ equals the charge entering $\\mathrm{C}_{1}$, which also equals the charge entering $\\mathrm{C}_{2}$. Thus,\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{V}_{\\text {out }}=\\Delta \\mathrm{V}_{\\mathrm{C} 2}=\\frac{\\Delta \\mathrm{Q}_{\\mathrm{C} 2}}{\\mathrm{C}_{2}}=\\frac{\\Delta \\mathrm{V}_{\\text {in }} \\mathrm{C}_{1}}{\\mathrm{C}_{1}+\\mathrm{C}_{2}} \\tag{10.7}\n\\end{equation*}\n$$\n\nThis formula is invaluable for calculating charge flow in integrated circuits. Applying it to Fig. 10.7, we can determine the change in $\\mathrm{V}^{\\prime \\prime}$ due to $\\mathrm{Q}_{3}$'s overlap capacitance when it turns off. For this case, $\\mathrm{C}_{1}=\\mathrm{C}_{\\mathrm{ov}}, \\mathrm{C}_{2}=\\mathrm{C}$, and $\\Delta \\mathrm{V}_{\\mathrm{in}}=-\\left(\\mathrm{V}_{\\mathrm{DD}}-\\mathrm{V}_{\\mathrm{SS}}\\right)$. Assuming clock signals transition from $\\mathrm{V}_{\\mathrm{DD}}$ to $\\mathrm{V}_{\\mathrm{SS}}$, the change in $\\mathrm{V}^{\\prime \\prime}$ due to overlap capacitance is\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{V}^{\\prime \\prime}=\\frac{-\\left(\\mathrm{V}_{\\mathrm{DD}}-\\mathrm{V}_{\\mathrm{SS}}\\right) \\mathrm{C}_{\\mathrm{ov}}}{\\mathrm{C}_{\\mathrm{ov}}+\\mathrm{C}} \\tag{10.8}\n\\end{equation*}\n$$\n\nThis change is typically less significant than that caused by channel charge, as $\\mathrm{C}_{\\text {ov }}$ is small.\n\n#### EXAMPLE 10.3\n\nGiven a required resolution of $\\pm 2.5 \\mathrm{mV}$ for the circuit in Fig. 10.7, with the following parameters: $\\mathrm{C}=0.1 \\mathrm{pF}, \\mathrm{C}_{\\mathrm{ox}}=8.5 \\mathrm{fF} /(\\mu \\mathrm{m})^{2},(\\mathrm{~W} / \\mathrm{L})_{3}=4 \\mu \\mathrm{~m} / 0.2 \\mu \\mathrm{~m}, \\mathrm{~L}_{\\mathrm{ov}}=0.04 \\mu \\mathrm{~m}, \\mathrm{~V}_{\\mathrm{tn}}=0.45 \\mathrm{~V}$, and $\\mathrm{V}_{\\mathrm{DD}}=1 \\mathrm{~V}$, what is the change in $\\Delta \\mathrm{V}^{\\prime \\prime}$ when $\\mathrm{Q}_{3}$ turns off?\n\n#### Solution\n\nUsing (10.4), $\\Delta \\mathrm{V}^{\\prime \\prime}=-53 \\mathrm{mV}$. The overlap capacitance is $\\mathrm{C}_{\\mathrm{ov}}=\\mathrm{W}_{3} \\mathrm{~L}_{\\mathrm{ov}} \\mathrm{C}_{\\mathrm{ox}}=1.4 \\mathrm{fF}$. From (10.8), the voltage change in $\\Delta \\mathrm{V}^{\\prime \\prime}$ is $\\Delta \\mathrm{V}^{\\prime \\prime}=-2.8 \\mathrm{mV}$, smaller than the channel charge effect but still notable. The total change is $\\Delta \\mathrm{V}^{\\prime \\prime}=-56 \\mathrm{mV}$.\n\nThis result exceeds the required resolution of $\\pm 2.5 \\mathrm{mV}$ by an order of magnitude. Clearly, additional measures are necessary to mitigate charge-injection effects to achieve the desired resolution.\nimage_name:Fig. 10.9\ndescription:The circuit is a clock generator that produces two clock signals, φ1 and φ2, from a single input voltage source Vin. It employs AND gates and inverters to generate the clock waveforms.\n\nFig. 10.9 illustrates a clock generator suitable for producing the required clock waveforms for the comparator in Fig. 10.3."
},
{
    "text": "```\nThe primary constraint on comparator resolution often stems from what is known as charge-injection, also frequently termed clock feedthrough. This error arises from the injection of unwanted charges into the circuit when transistors are switched off. In the comparator depicted in Fig. 10.3, the switches are typically implemented using either n-channel transistors alone or CMOS transmission gates, which consist of n-channel and p-channel transistors in parallel, both of which must be turned off. When MOS switches are active, they operate in the triode region with zero volts between their drain and source. However, when these switches deactivate, charge errors occur through two mechanisms. The first involves the channel charge, which must exit the transistor's channel region and flow to the drain and source junctions. \n\nimage_name:Fig. 10.7\ndescription:The circuit features a comparator with n-channel MOS switches and parasitic capacitances, employing three NMOS transistors and multiple capacitors to manage charge distribution and signal comparison. An op-amp is used to amplify the difference between the input and reference signals.\n\nFig. 10.7 illustrates the comparator from Fig. 10.3, showing n-channel switches and the associated overlap parasitic capacitances. Active transistors also possess channel charge.\nThe channel charge for a transistor with zero $\\mathrm{V}_{\\mathrm{DS}}$ is expressed as\n\n$$\n\\begin{equation*}\nQ_{c h}=W L C_{o x} V_{\\text {eff }}=W L C_{o x}\\left(V_{G s}-V_{t}\\right) \\tag{10.3}\n\\end{equation*}\n$$\n\nThis charge usually dominates. The second type of charge, typically smaller unless $\\mathrm{V}_{\\text {eff }}$ is very low, results from the overlap capacitance between the gate and the junctions.\n\nFigure 10.7 presents the comparator from Fig. 10.3, where the switches are realized using n-channel transistors. It also highlights the parasitic capacitances due to gate-drain and gate-source overlap capacitors. Additionally, while not depicted in Fig. 10.7, it is crucial to consider the channel charge dispersion of any transistors transitioning from on to off. In this circuit, all transistors are n-channel, indicating that the channel charge is negative.\n\nConsider the scenario when $Q_{3}$ turns off. If the clock waveform is exceptionally rapid, the channel charge from $Q_{3}$ will distribute equally through both junctions [Shieh, 1987]. The $\\mathrm{Q}_{\\mathrm{ch}} / 2$ charge reaching the op-amp's output node will have minimal impact beyond causing a temporary glitch. However, the $Q_{c h} / 2$ charge that reaches the op-amp's inverting-input node will alter the voltage across $C$, introducing an error. Since this charge is negative for an n-channel transistor, the node voltage $\\mathrm{V}^{\\prime \\prime}$ will become negative. The voltage change due to the channel charge is given by\n\n$$\n\\begin{equation*}\n\\Delta V^{\\prime \\prime}=\\frac{\\left(Q_{\\mathrm{ch}} / 2\\right)}{C}=-\\frac{V_{\\text {eff } 3} C_{o x} W_{3} L_{3}}{2 C}=-\\frac{\\left(V_{D D}-V_{t n}\\right) C_{o x} W_{3} L_{3}}{2 C} \\tag{10.4}\n\\end{equation*}\n$$\n\nThis calculation assumes that $Q_{2}$ turns off slightly after $Q_{3}$. More details on this assumption will be discussed shortly.\n\n[^0]Fig. 10.8 A capacitor divider.\nimage_name:Fig. 10.8 A capacitor divider\ndescription:The circuit consists of a capacitor divider with two capacitors, C1 and C2, connected in series. Vout is measured across C2, equating to VC2.\n\nKey Point: When a MOSFET transitions from triode mode to off, the stored channel charge must exit through the transistor terminals; in a comparator, this charge can accumulate on circuit capacitances, causing offset.\n\nTo determine the voltage change due to overlap capacitance, it is essential to introduce the capacitor-divider formula. This formula calculates the voltage change at the internal node of two series capacitors when the voltage at one end terminal changes. Fig. 10.8 demonstrates this scenario, assuming $\\mathrm{V}_{\\text {in }}$ is changing and we need to find $\\Delta \\mathrm{V}_{\\text {out }}=\\mathrm{V}_{\\mathrm{C} 2}$. The series combination of $\\mathrm{C}_{1}$ and $\\mathrm{C}_{2}$ equates to a single capacitor, $\\mathrm{C}_{\\mathrm{eq}}$, defined by\n\n$$\n\\begin{equation*}\n\\mathrm{C}_{\\mathrm{eq}}=\\frac{\\mathrm{C}_{1} \\mathrm{C}_{2}}{\\mathrm{C}_{1}+\\mathrm{C}_{2}} \\tag{10.5}\n\\end{equation*}\n$$\n\nWhen $\\mathrm{V}_{\\text {in }}$ changes, the charge flowing into this equivalent capacitor is\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{Q}_{\\mathrm{eq}}=\\Delta \\mathrm{V}_{\\mathrm{in}} \\mathrm{C}_{\\mathrm{eq}}=\\Delta \\mathrm{V}_{\\mathrm{in}} \\frac{\\mathrm{C}_{1} \\mathrm{C}_{2}}{\\mathrm{C}_{1}+\\mathrm{C}_{2}} \\tag{10.6}\n\\end{equation*}\n$$\n\nAll charge entering $\\mathrm{C}_{\\mathrm{eq}}$ equals the charge entering $\\mathrm{C}_{1}$, which also equals the charge entering $\\mathrm{C}_{2}$. Thus,\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{V}_{\\text {out }}=\\Delta \\mathrm{V}_{\\mathrm{C} 2}=\\frac{\\Delta \\mathrm{Q}_{\\mathrm{C} 2}}{\\mathrm{C}_{2}}=\\frac{\\Delta \\mathrm{V}_{\\text {in }} \\mathrm{C}_{1}}{\\mathrm{C}_{1}+\\mathrm{C}_{2}} \\tag{10.7}\n\\end{equation*}\n$$\n\nThis formula is particularly useful for calculating charge flow in integrated circuits. Applying it to Fig. 10.7, we can calculate the change in $\\mathrm{V}^{\\prime \\prime}$ due to $\\mathrm{Q}_{3}$'s overlap capacitance when it turns off. For this case, $\\mathrm{C}_{1}=\\mathrm{C}_{\\mathrm{ov}}, \\mathrm{C}_{2}=\\mathrm{C}$, and $\\Delta \\mathrm{V}_{\\mathrm{in}}=-\\left(\\mathrm{V}_{\\mathrm{DD}}-\\mathrm{V}_{\\mathrm{SS}}\\right)$. Assuming the clock signals transition from $\\mathrm{V}_{\\mathrm{DD}}$ to $\\mathrm{V}_{\\mathrm{SS}}$, the change in $\\mathrm{V}^{\\prime \\prime}$ due to overlap capacitance is\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{V}^{\\prime \\prime}=\\frac{-\\left(\\mathrm{V}_{\\mathrm{DD}}-\\mathrm{V}_{\\mathrm{SS}}\\right) \\mathrm{C}_{\\mathrm{ov}}}{\\mathrm{C}_{\\mathrm{ov}}+\\mathrm{C}} \\tag{10.8}\n\\end{equation*}\n$$\n\nThis change is generally less significant than that caused by the channel charge, as $\\mathrm{C}_{\\text {ov }}$ is small.\n\n#### EXAMPLE 10.3\n\nSuppose a resolution of $\\pm 2.5 \\mathrm{mV}$ is required for the circuit in Fig. 10.7. Given values are: $\\mathrm{C}=0.1 \\mathrm{pF}, \\mathrm{C}_{\\mathrm{ox}}=8.5 \\mathrm{fF} /(\\mu \\mathrm{m})^{2},(\\mathrm{~W} / \\mathrm{L})_{3}=4 \\mu \\mathrm{~m} / 0.2 \\mu \\mathrm{~m}, \\mathrm{~L}_{\\mathrm{ov}}=0.04 \\mu \\mathrm{~m}, \\mathrm{~V}_{\\mathrm{tn}}=0.45 \\mathrm{~V}$, and $\\mathrm{V}_{\\mathrm{DD}}=1 \\mathrm{~V}$. What is the change in $\\Delta \\mathrm{V}^{\\prime \\prime}$ when $\\mathrm{Q}_{3}$ turns off?\n\n#### Solution\n\nUsing (10.4), $\\Delta \\mathrm{V}^{\\prime \\prime}=-53 \\mathrm{mV}$. The overlap capacitance is $\\mathrm{C}_{\\mathrm{ov}}=\\mathrm{W}_{3} \\mathrm{~L}_{\\mathrm{ov}} \\mathrm{C}_{\\mathrm{ox}}=1.4 \\mathrm{fF}$. Applying (10.8), the voltage change in $\\Delta \\mathrm{V}^{\\prime \\prime}$ is $\\Delta \\mathrm{V}^{\\prime \\prime}=-2.8 \\mathrm{mV}$, which, while smaller than the change due to the channel charge, is still notable. The total change is $\\Delta \\mathrm{V}^{\\prime \\prime}=-56 \\mathrm{mV}$.\n\nThis result exceeds the required resolution of $\\pm 2.5 \\mathrm{mV}$ by an order of magnitude. Clearly, additional measures are necessary to mitigate the effects of charge-injection to achieve the desired resolution.\n\nimage_name:Fig. 10.9\ndescription:The circuit is a clock generator that produces two clock signals, φ1 and φ2, from a single input voltage source Vin. It employs AND gates and inverters to generate the clock waveforms.\n\nFig. 10.9 illustrates a clock generator suitable for producing the required clock waveforms for the comparator in Fig. 10.3.\n```"
},
{
    "text": "The primary constraint on comparator resolution stems from what is known as charge-injection, often referred to as clock feedthrough. This error arises from the unintended injection of charges into the circuit when transistors switch off. In the comparator depicted in Fig. 10.3, the switches are typically implemented using either n-channel transistors alone or CMOS transmission gates (comprising n-channel and p-channel transistors in parallel, both of which must deactivate). When MOS switches are active, they operate in the triode region with zero volts between the drain and source. However, when they turn off, charge errors occur through two mechanisms. The first involves channel charge, which must exit the transistor's channel region to the drain and source junctions. The channel charge for a transistor with zero $\\mathrm{V}_{\\mathrm{DS}}$ is expressed as\n\n$$\n\\begin{equation*}\nQ_{c h}=W L C_{o x} V_{\\text {eff }}=W L C_{o x}\\left(V_{G s}-V_{t}\\right) \\tag{10.3}\n\\end{equation*}\n$$\n\nThis charge often predominates. The second mechanism, usually less significant unless $\\mathrm{V}_{\\text {eff }}$ is very low, involves the overlap capacitance between the gate and the junctions.\n\nFig. 10.7 illustrates the comparator from Fig. 10.3, with switches realized as n-channel transistors. It also highlights the parasitic capacitances due to gate-drain and gate-source overlap capacitors. Additionally, though not depicted in Fig. 10.7, it is crucial to account for the channel charge dispersion of any transistors transitioning from on to off. In the depicted circuit, all transistors are n-channel, indicating that the channel charge is negative.\n\nConsider the scenario when $Q_{3}$ switches off. If the clock waveform is exceptionally rapid, the channel charge from $Q_{3}$ will distribute equally through both junctions [Shieh, 1987]. The $\\mathrm{Q}_{\\mathrm{ch}} / 2$ charge reaching the opamp's output node will have minimal impact beyond causing a transient disturbance. Conversely, the $Q_{c h} / 2$ charge at the opamp's inverting-input node will alter the voltage across $C$, introducing an error. Given that this charge is negative for an n-channel transistor, the node voltage $\\mathrm{V}^{\\prime \\prime}$ will become negative. The voltage change due to the channel charge is calculated as\n\n$$\n\\begin{equation*}\n\\Delta V^{\\prime \\prime}=\\frac{\\left(Q_{\\mathrm{ch}} / 2\\right)}{C}=-\\frac{V_{\\text {eff } 3} C_{o x} W_{3} L_{3}}{2 C}=-\\frac{\\left(V_{D D}-V_{t n}\\right) C_{o x} W_{3} L_{3}}{2 C} \\tag{10.4}\n\\end{equation*}\n$$\n\nThis calculation assumes that $Q_{2}$ deactivates slightly after $Q_{3}$. Further discussion on this assumption will follow shortly.\n\n[^0]Fig. 10.8 depicts a capacitor divider.\nimage_name:Fig. 10.8 A capacitor divider\ndescription:The circuit consists of a capacitor divider with two capacitors, C1 and C2, connected in series. Vout is measured across C2, equating to VC2.\n\nKey Point: When a MOSFET shifts from triode mode to off, the stored channel charge must exit through the transistor terminals; in a comparator, this charge can accumulate on circuit capacitances, causing offset.\n\nTo determine the voltage change due to overlap capacitance, it is essential to introduce the capacitor-divider formula. This formula calculates the voltage change at the internal node of two series capacitors when the voltage at one end changes. Fig. 10.8 demonstrates this, assuming $\\mathrm{V}_{\\text {in }}$ varies and we need to determine $\\Delta \\mathrm{V}_{\\text {out }}=\\mathrm{V}_{\\mathrm{C} 2}$. The series combination of $\\mathrm{C}_{1}$ and $\\mathrm{C}_{2}$ equates to a single capacitor, $\\mathrm{C}_{\\mathrm{eq}}$, given by\n\n$$\n\\begin{equation*}\n\\mathrm{C}_{\\mathrm{eq}}=\\frac{\\mathrm{C}_{1} \\mathrm{C}_{2}}{\\mathrm{C}_{1}+\\mathrm{C}_{2}} \\tag{10.5}\n\\end{equation*}\n$$\n\nWhen $\\mathrm{V}_{\\text {in }}$ changes, the charge entering this equivalent capacitor is\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{Q}_{\\mathrm{eq}}=\\Delta \\mathrm{V}_{\\mathrm{in}} \\mathrm{C}_{\\mathrm{eq}}=\\Delta \\mathrm{V}_{\\mathrm{in}} \\frac{\\mathrm{C}_{1} \\mathrm{C}_{2}}{\\mathrm{C}_{1}+\\mathrm{C}_{2}} \\tag{10.6}\n\\end{equation*}\n$$\n\nThe charge entering $\\mathrm{C}_{\\mathrm{eq}}$ equals the charge entering $\\mathrm{C}_{1}$ and $\\mathrm{C}_{2}$. Thus,\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{V}_{\\text {out }}=\\Delta \\mathrm{V}_{\\mathrm{C} 2}=\\frac{\\Delta \\mathrm{Q}_{\\mathrm{C} 2}}{\\mathrm{C}_{2}}=\\frac{\\Delta \\mathrm{V}_{\\text {in }} \\mathrm{C}_{1}}{\\mathrm{C}_{1}+\\mathrm{C}_{2}} \\tag{10.7}\n\\end{equation*}\n$$\n\nThis formula is invaluable for calculating charge flow in integrated circuits. Applying it to Fig. 10.7, we can determine the change in $\\mathrm{V}^{\\prime \\prime}$ due to $\\mathrm{Q}_{3}$'s overlap capacitance when it turns off. Here, $\\mathrm{C}_{1}=\\mathrm{C}_{\\mathrm{ov}}, \\mathrm{C}_{2}=\\mathrm{C}$, and $\\Delta \\mathrm{V}_{\\mathrm{in}}=-\\left(\\mathrm{V}_{\\mathrm{DD}}-\\mathrm{V}_{\\mathrm{SS}}\\right)$. Assuming the clock signals transition from $\\mathrm{V}_{\\mathrm{DD}}$ to $\\mathrm{V}_{\\mathrm{SS}}$, the change in $\\mathrm{V}^{\\prime \\prime}$ due to overlap capacitance is\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{V}^{\\prime \\prime}=\\frac{-\\left(\\mathrm{V}_{\\mathrm{DD}}-\\mathrm{V}_{\\mathrm{SS}}\\right) \\mathrm{C}_{\\mathrm{ov}}}{\\mathrm{C}_{\\mathrm{ov}}+\\mathrm{C}} \\tag{10.8}\n\\end{equation*}\n$$\n\nThis change is generally less significant than that caused by the channel charge, as $\\mathrm{C}_{\\text {ov }}$ is small.\n\n#### EXAMPLE 10.3\n\nSuppose a resolution of $\\pm 2.5 \\mathrm{mV}$ is required for the circuit in Fig. 10.7. Given values are: $\\mathrm{C}=0.1 \\mathrm{pF}, \\mathrm{C}_{\\mathrm{ox}}=8.5 \\mathrm{fF} /(\\mu \\mathrm{m})^{2},(\\mathrm{~W} / \\mathrm{L})_{3}=4 \\mu \\mathrm{~m} / 0.2 \\mu \\mathrm{~m}, \\mathrm{~L}_{\\mathrm{ov}}=0.04 \\mu \\mathrm{~m}, \\mathrm{~V}_{\\mathrm{tn}}=0.45 \\mathrm{~V}$, and $\\mathrm{V}_{\\mathrm{DD}}=1 \\mathrm{~V}$. What is the change in $\\Delta \\mathrm{V}^{\\prime \\prime}$ when $\\mathrm{Q}_{3}$ turns off?\n\n#### Solution\n\nUsing (10.4), $\\Delta \\mathrm{V}^{\\prime \\prime}=-53 \\mathrm{mV}$. The overlap capacitance is $\\mathrm{C}_{\\mathrm{ov}}=\\mathrm{W}_{3} \\mathrm{~L}_{\\mathrm{ov}} \\mathrm{C}_{\\mathrm{ox}}=1.4 \\mathrm{fF}$. Applying (10.8), the voltage change in $\\Delta \\mathrm{V}^{\\prime \\prime}$ is $\\Delta \\mathrm{V}^{\\prime \\prime}=-2.8 \\mathrm{mV}$, which, while smaller than the channel charge effect, is still notable. The total change is $\\Delta \\mathrm{V}^{\\prime \\prime}=-56 \\mathrm{mV}$.\n\nThis result exceeds the required resolution of $\\pm 2.5 \\mathrm{mV}$ by an order of magnitude. Clearly, additional measures are necessary to mitigate charge-injection effects to achieve the desired resolution.\nimage_name:Fig. 10.9\ndescription:The circuit is a clock generator that produces two clock signals, φ1 and φ2, from a single input voltage source Vin. It utilizes AND gates and inverters to generate the clock waveforms.\n\nFig. 10.9 A clock generator suitable for producing the required clock waveforms for the comparator in Fig. 10.3."
},
{
    "text": "The primary constraint on comparator resolution is often attributed to charge-injection, also known as clock feedthrough. This error arises from unwanted charges entering the circuit when transistors switch off. In the comparator depicted in Fig. 10.3, the switches are typically implemented using either n-channel transistors alone or CMOS transmission gates, which consist of n-channel and p-channel transistors in parallel, both needing to turn off. When MOS switches are active, they operate in the triode region with zero volts between their drain and source. However, when these switches deactivate, charge errors occur via two mechanisms. The first involves channel charge, which must exit the transistor's channel region to the drain and source junctions. The channel charge for a transistor with zero $\\mathrm{V}_{\\mathrm{DS}}$ is expressed as\n\n$$\n\\begin{equation*}\nQ_{c h}=W L C_{o x} V_{\\text {eff }}=W L C_{o x}\\left(V_{G s}-V_{t}\\right) \\tag{10.3}\n\\end{equation*}\n$$\n\nThis charge usually predominates. The second mechanism, typically less significant unless $\\mathrm{V}_{\\text {eff }}$ is very low, involves overlap capacitance between the gate and junctions.\n\nFigure 10.7 illustrates the comparator from Fig. 10.3, where the switches are realized as n-channel transistors. It also shows parasitic capacitances due to gate-drain and gate-source overlap. Additionally, though not depicted in Fig. 10.7, it's crucial to account for the channel charge dispersion of any transistors transitioning from on to off. In this circuit, all transistors are n-channel, indicating that the channel charge is negative.\n\nConsider the scenario when $Q_{3}$ switches off. If the clock waveform is rapid, the channel charge from $Q_{3}$ will evenly distribute through both junctions [Shieh, 1987]. The $\\mathrm{Q}_{\\mathrm{ch}} / 2$ charge reaching the opamp's output node will have minimal impact beyond causing a temporary glitch. Conversely, the $Q_{c h} / 2$ charge affecting the opamp's inverting-input node will alter the voltage across $C$, introducing an error. Since this charge is negative for an n-channel transistor, the node voltage $\\mathrm{V}^{\\prime \\prime}$ will become negative. The voltage change due to the channel charge is given by\n\n$$\n\\begin{equation*}\n\\Delta V^{\\prime \\prime}=\\frac{\\left(Q_{\\mathrm{ch}} / 2\\right)}{C}=-\\frac{V_{\\text {eff } 3} C_{o x} W_{3} L_{3}}{2 C}=-\\frac{\\left(V_{D D}-V_{t n}\\right) C_{o x} W_{3} L_{3}}{2 C} \\tag{10.4}\n\\end{equation*}\n$$\n\nThis calculation assumes that $Q_{2}$ deactivates slightly after $Q_{3}$. More on this assumption will be discussed shortly.\n\n[^0]Fig. 10.8 illustrates a capacitor divider.\nimage_name:Fig. 10.8 A capacitor divider\ndescription:The circuit comprises a capacitor divider with two capacitors, C1 and C2, in series. Vout is measured across C2, equating to VC2.\n\nKey Point: When a MOSFET transitions from triode to off mode, the stored channel charge must exit the transistor terminals; in a comparator, this charge can accumulate on circuit capacitances, causing offset.\n\nTo determine the voltage change due to overlap capacitance, the capacitor-divider formula is essential. This formula calculates the voltage change at the internal node of two series capacitors when one end terminal's voltage changes, as shown in Fig. 10.8. Here, $\\mathrm{V}_{\\text {in }}$ is variable, and we aim to find $\\Delta \\mathrm{V}_{\\text {out }}=\\mathrm{V}_{\\mathrm{C} 2}$. The series combination of $\\mathrm{C}_{1}$ and $\\mathrm{C}_{2}$ equals a single capacitor, $\\mathrm{C}_{\\mathrm{eq}}$, defined by\n\n$$\n\\begin{equation*}\n\\mathrm{C}_{\\mathrm{eq}}=\\frac{\\mathrm{C}_{1} \\mathrm{C}_{2}}{\\mathrm{C}_{1}+\\mathrm{C}_{2}} \\tag{10.5}\n\\end{equation*}\n$$\n\nWhen $\\mathrm{V}_{\\text {in }}$ varies, the charge entering this equivalent capacitor is\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{Q}_{\\mathrm{eq}}=\\Delta \\mathrm{V}_{\\mathrm{in}} \\mathrm{C}_{\\mathrm{eq}}=\\Delta \\mathrm{V}_{\\mathrm{in}} \\frac{\\mathrm{C}_{1} \\mathrm{C}_{2}}{\\mathrm{C}_{1}+\\mathrm{C}_{2}} \\tag{10.6}\n\\end{equation*}\n$$\n\nThe charge entering $\\mathrm{C}_{\\mathrm{eq}}$ equals the charge entering $\\mathrm{C}_{1}$ and $\\mathrm{C}_{2}$. Thus,\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{V}_{\\text {out }}=\\Delta \\mathrm{V}_{\\mathrm{C} 2}=\\frac{\\Delta \\mathrm{Q}_{\\mathrm{C} 2}}{\\mathrm{C}_{2}}=\\frac{\\Delta \\mathrm{V}_{\\text {in }} \\mathrm{C}_{1}}{\\mathrm{C}_{1}+\\mathrm{C}_{2}} \\tag{10.7}\n\\end{equation*}\n$$\n\nThis formula is valuable for calculating charge flow in integrated circuits and can be applied to Fig. 10.7 to determine the change in $\\mathrm{V}^{\\prime \\prime}$ due to $\\mathrm{Q}_{3}$'s overlap capacitance when it turns off. For this scenario, $\\mathrm{C}_{1}=\\mathrm{C}_{\\mathrm{ov}}, \\mathrm{C}_{2}=\\mathrm{C}$, and $\\Delta \\mathrm{V}_{\\mathrm{in}}=-\\left(\\mathrm{V}_{\\mathrm{DD}}-\\mathrm{V}_{\\mathrm{SS}}\\right)$. Assuming the clock signals transition from $\\mathrm{V}_{\\mathrm{DD}}$ to $\\mathrm{V}_{\\mathrm{SS}}$, the change in $\\mathrm{V}^{\\prime \\prime}$ due to overlap capacitance is\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{V}^{\\prime \\prime}=\\frac{-\\left(\\mathrm{V}_{\\mathrm{DD}}-\\mathrm{V}_{\\mathrm{SS}}\\right) \\mathrm{C}_{\\mathrm{ov}}}{\\mathrm{C}_{\\mathrm{ov}}+\\mathrm{C}} \\tag{10.8}\n\\end{equation*}\n$$\n\nThis change is generally less significant than that due to channel charge, as $\\mathrm{C}_{\\text {ov }}$ is small.\n\n#### EXAMPLE 10.3\n\nGiven a required resolution of $\\pm 2.5 \\mathrm{mV}$ for the circuit in Fig. 10.7, with the following parameters: $\\mathrm{C}=0.1 \\mathrm{pF}, \\mathrm{C}_{\\mathrm{ox}}=8.5 \\mathrm{fF} /(\\mu \\mathrm{m})^{2},(\\mathrm{~W} / \\mathrm{L})_{3}=4 \\mu \\mathrm{~m} / 0.2 \\mu \\mathrm{~m}, \\mathrm{~L}_{\\mathrm{ov}}=0.04 \\mu \\mathrm{~m}, \\mathrm{~V}_{\\mathrm{tn}}=0.45 \\mathrm{~V}$, and $\\mathrm{V}_{\\mathrm{DD}}=1 \\mathrm{~V}$, what is the change in $\\Delta \\mathrm{V}^{\\prime \\prime}$ when $\\mathrm{Q}_{3}$ turns off?\n\n#### Solution\n\nUsing (10.4), $\\Delta \\mathrm{V}^{\\prime \\prime}=-53 \\mathrm{mV}$. The overlap capacitance is $\\mathrm{C}_{\\mathrm{ov}}=\\mathrm{W}_{3} \\mathrm{~L}_{\\mathrm{ov}} \\mathrm{C}_{\\mathrm{ox}}=1.4 \\mathrm{fF}$. Applying (10.8), the voltage change in $\\Delta \\mathrm{V}^{\\prime \\prime}$ is $\\Delta \\mathrm{V}^{\\prime \\prime}=-2.8 \\mathrm{mV}$, which, though smaller than the channel charge effect, is still notable. The total change is $\\Delta \\mathrm{V}^{\\prime \\prime}=-56 \\mathrm{mV}$.\n\nThis result exceeds the required resolution of $\\pm 2.5 \\mathrm{mV}$ by an order of magnitude, indicating that further measures are necessary to mitigate charge-injection effects to achieve the desired resolution.\nimage_name:Fig. 10.9\ndescription:The circuit is a clock generator that produces two clock signals, φ1 and φ2, from a single input voltage source Vin. It employs AND gates and inverters to generate the clock waveforms.\n\nFig. 10.9 A clock generator suitable for producing the required clock waveforms for the comparator in Fig. 10.3."
},
{
    "text": "The primary constraint on the resolution of comparators is often attributed to charge-injection, also known as clock feedthrough. This error arises from unwanted charges being introduced into the circuit when transistors switch off. In the comparator depicted in Fig. 10.3, the switches are typically implemented using either n-channel transistors alone or CMOS transmission gates, which consist of n-channel and p-channel transistors in parallel, both of which must deactivate. When MOS switches are active, they operate in the triode region with zero volts between their drain and source. However, when these switches turn off, charge errors occur through two mechanisms. The first involves the channel charge, which must exit the transistor's channel region and move to the drain and source junctions. The channel charge for a transistor with zero $\\mathrm{V}_{\\mathrm{DS}}$ is expressed as\n\n$$\n\\begin{equation*}\nQ_{c h}=W L C_{o x} V_{\\text {eff }}=W L C_{o x}\\left(V_{G s}-V_{t}\\right) \\tag{10.3}\n\\end{equation*}\n$$\n\nThis charge usually predominates. The second mechanism, typically less significant unless $\\mathrm{V}_{\\text {eff }}$ is very low, involves the overlap capacitance between the gate and the junctions.\n\nFigure 10.7 illustrates the comparator from Fig. 10.3, where the switches are realized using n-channel transistors. It also highlights the parasitic capacitances due to gate-drain and gate-source overlap capacitors. Additionally, while not depicted in Fig. 10.7, it is crucial to account for the channel charge dispersion of any transistors transitioning from on to off. In this circuit, all transistors are n-channel, indicating that the channel charge is negative.\n\nConsider the scenario when $Q_{3}$ deactivates. If the clock waveform is rapid, the channel charge from $Q_{3}$ will distribute equally through both junctions [Shieh, 1987]. The $\\mathrm{Q}_{\\mathrm{ch}} / 2$ charge reaching the opamp's output node will have minimal impact, aside from causing a temporary disturbance. However, the $Q_{c h} / 2$ charge that reaches the opamp's inverting-input node will alter the voltage across $C$, introducing an error. Given that this charge is negative for an n-channel transistor, the node voltage $\\mathrm{V}^{\\prime \\prime}$ will become negative. The voltage change due to the channel charge is calculated as\n\n$$\n\\begin{equation*}\n\\Delta V^{\\prime \\prime}=\\frac{\\left(Q_{\\mathrm{ch}} / 2\\right)}{C}=-\\frac{V_{\\text {eff } 3} C_{o x} W_{3} L_{3}}{2 C}=-\\frac{\\left(V_{D D}-V_{t n}\\right) C_{o x} W_{3} L_{3}}{2 C} \\tag{10.4}\n\\end{equation*}\n$$\n\nThis calculation assumes that $Q_{2}$ turns off slightly after $Q_{3}$. More details on this assumption will be discussed shortly.\n\n[^0]Fig. 10.8 A capacitor divider.\nimage_name:Fig. 10.8 A capacitor divider\ndescription:The circuit consists of a capacitor divider with two capacitors, C1 and C2, connected in series. Vout is measured across C2, equating to VC2.\n\nKey Point: When a MOSFET transitions from triode mode to off, the stored channel charge must exit through the transistor terminals; in a comparator, this charge can accumulate on circuit capacitances, causing offset.\n\nTo determine the voltage change due to overlap capacitance, it is essential to introduce the capacitor-divider formula. This formula calculates the voltage change at the internal node of two series capacitors when the voltage at one end terminal changes, as shown in Fig. 10.8. Here, $\\mathrm{V}_{\\text {in }}$ is assumed to change, and we aim to find $\\Delta \\mathrm{V}_{\\text {out }}=\\mathrm{V}_{\\mathrm{C} 2}$. The series combination of $\\mathrm{C}_{1}$ and $\\mathrm{C}_{2}$ equates to a single capacitor, $\\mathrm{C}_{\\mathrm{eq}}$, given by\n\n$$\n\\begin{equation*}\n\\mathrm{C}_{\\mathrm{eq}}=\\frac{\\mathrm{C}_{1} \\mathrm{C}_{2}}{\\mathrm{C}_{1}+\\mathrm{C}_{2}} \\tag{10.5}\n\\end{equation*}\n$$\n\nWhen $\\mathrm{V}_{\\text {in }}$ changes, the charge entering this equivalent capacitor is\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{Q}_{\\mathrm{eq}}=\\Delta \\mathrm{V}_{\\mathrm{in}} \\mathrm{C}_{\\mathrm{eq}}=\\Delta \\mathrm{V}_{\\mathrm{in}} \\frac{\\mathrm{C}_{1} \\mathrm{C}_{2}}{\\mathrm{C}_{1}+\\mathrm{C}_{2}} \\tag{10.6}\n\\end{equation*}\n$$\n\nAll charge entering $\\mathrm{C}_{\\mathrm{eq}}$ equals the charge entering $\\mathrm{C}_{1}$ and $\\mathrm{C}_{2}$. Thus,\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{V}_{\\text {out }}=\\Delta \\mathrm{V}_{\\mathrm{C} 2}=\\frac{\\Delta \\mathrm{Q}_{\\mathrm{C} 2}}{\\mathrm{C}_{2}}=\\frac{\\Delta \\mathrm{V}_{\\text {in }} \\mathrm{C}_{1}}{\\mathrm{C}_{1}+\\mathrm{C}_{2}} \\tag{10.7}\n\\end{equation*}\n$$\n\nThis formula is frequently useful in calculating charge flow in integrated circuits. Applying it to Fig. 10.7, we can determine the change in $\\mathrm{V}^{\\prime \\prime}$ due to the overlap capacitance of $\\mathrm{Q}_{3}$ when it turns off. For this scenario, $\\mathrm{C}_{1}=\\mathrm{C}_{\\mathrm{ov}}, \\mathrm{C}_{2}=\\mathrm{C}$, and $\\Delta \\mathrm{V}_{\\mathrm{in}}=-\\left(\\mathrm{V}_{\\mathrm{DD}}-\\mathrm{V}_{\\mathrm{SS}}\\right)$. Assuming the clock signals transition from $\\mathrm{V}_{\\mathrm{DD}}$ to $\\mathrm{V}_{\\mathrm{SS}}$, the change in $\\mathrm{V}^{\\prime \\prime}$ due to overlap capacitance is\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{V}^{\\prime \\prime}=\\frac{-\\left(\\mathrm{V}_{\\mathrm{DD}}-\\mathrm{V}_{\\mathrm{SS}}\\right) \\mathrm{C}_{\\mathrm{ov}}}{\\mathrm{C}_{\\mathrm{ov}}+\\mathrm{C}} \\tag{10.8}\n\\end{equation*}\n$$\n\nThis change is generally smaller than that caused by the channel charge, as $\\mathrm{C}_{\\text {ov }}$ is small.\n\n#### EXAMPLE 10.3\n\nSuppose a resolution of $\\pm 2.5 \\mathrm{mV}$ is required for the circuit in Fig. 10.7. Given: $\\mathrm{C}=0.1 \\mathrm{pF}, \\mathrm{C}_{\\mathrm{ox}}=8.5 \\mathrm{fF} /(\\mu \\mathrm{m})^{2},(\\mathrm{~W} / \\mathrm{L})_{3}=4 \\mu \\mathrm{~m} / 0.2 \\mu \\mathrm{~m}, \\mathrm{~L}_{\\mathrm{ov}}=0.04 \\mu \\mathrm{~m}, \\mathrm{~V}_{\\mathrm{tn}}=0.45 \\mathrm{~V}$, and $\\mathrm{V}_{\\mathrm{DD}}=1 \\mathrm{~V}$, what is the change in $\\Delta \\mathrm{V}^{\\prime \\prime}$ when $\\mathrm{Q}_{3}$ turns off?\n\n#### Solution\n\nUsing (10.4), $\\Delta \\mathrm{V}^{\\prime \\prime}=-53 \\mathrm{mV}$. The overlap capacitance is $\\mathrm{C}_{\\mathrm{ov}}=\\mathrm{W}_{3} \\mathrm{~L}_{\\mathrm{ov}} \\mathrm{C}_{\\mathrm{ox}}=1.4 \\mathrm{fF}$. Applying (10.8), the voltage change in $\\Delta \\mathrm{V}^{\\prime \\prime}$ is $\\Delta \\mathrm{V}^{\\prime \\prime}=-2.8 \\mathrm{mV}$, which is less significant than the change due to the channel charge but still notable. The total change is $\\Delta \\mathrm{V}^{\\prime \\prime}=-56 \\mathrm{mV}$.\n\nThis result exceeds the required resolution of $\\pm 2.5 \\mathrm{mV}$ by an order of magnitude. Clearly, additional measures are necessary to mitigate the effects of charge-injection to achieve the desired resolution.\nimage_name:Fig. 10.9\ndescription:The circuit is a clock generator that produces two clock signals, φ1 and φ2, from a single input voltage source Vin. It employs AND gates and inverters to generate the clock waveforms.\n\nFig. 10.9 A clock generator suitable for producing the required clock waveforms for the comparator in Fig. 10.3."
},
{
    "text": "Perhaps the primary constraint on comparator resolution stems from a phenomenon known as charge-injection, also frequently termed clock feedthrough. This error arises due to unwanted charges being introduced into the circuit when transistors switch off. In the comparator depicted in Fig. 10.3, the switches are typically implemented using either n-channel transistors exclusively or CMOS transmission gates (comprising n-channel and p-channel transistors in parallel, both of which must deactivate). When MOS switches are active, they operate in the triode region with zero volts between their drain and source. However, when these switches turn off, charge errors occur through two mechanisms. The first involves the channel charge, which must exit the transistor's channel region and move to the drain and source junctions. ${ }^{3}$ The channel charge of a transistor with zero $\\mathrm{V}_{\\mathrm{DS}}$ is expressed as\n\n$$\n\\begin{equation*}\nQ_{c h}=W L C_{o x} V_{\\text {eff }}=W L C_{o x}\\left(V_{G s}-V_{t}\\right) \\tag{10.3}\n\\end{equation*}\n$$\n\nThis charge often predominates. The second type of charge (usually smaller, unless $\\mathrm{V}_{\\text {eff }}$ is very low) results from the overlap capacitance between the gate and the junctions.\n\nFigure 10.7 illustrates the comparator from Fig. 10.3, where the switches are realized using n-channel transistors. Also depicted in Fig. 10.7 are the parasitic capacitances due to gate-drain and gate-source overlap capacitors. Additionally, while not shown in Fig. 10.7, it is crucial to account for the channel charge dispersion of any transistors transitioning from on to off. ${ }^{4}$ In the depicted circuit, all transistors are n-channel, indicating that the channel charge is negative.\n\nConsider the scenario when $Q_{3}$ deactivates. If the clock waveform is exceptionally rapid, the channel charge from $Q_{3}$ will distribute equally through both junctions [Shieh, 1987]. The $\\mathrm{Q}_{\\mathrm{ch}} / 2$ charge reaching the opamp's output node will have a minimal impact, aside from causing a temporary disturbance. However, the $Q_{c h} / 2$ charge that reaches the opamp's inverting-input node will alter the voltage across $C$, introducing an error. Since this charge is negative for an n-channel transistor, the node voltage $\\mathrm{V}^{\\prime \\prime}$ will become negative. The voltage change due to the channel charge is given by\n\n$$\n\\begin{equation*}\n\\Delta V^{\\prime \\prime}=\\frac{\\left(Q_{\\mathrm{ch}} / 2\\right)}{C}=-\\frac{V_{\\text {eff } 3} C_{o x} W_{3} L_{3}}{2 C}=-\\frac{\\left(V_{D D}-V_{t n}\\right) C_{o x} W_{3} L_{3}}{2 C} \\tag{10.4}\n\\end{equation*}\n$$\n\nThis is based on the effective gate-source voltage of $Q_{3}$ being $V_{\\text {eff } 3}=V_{G S_{3}}-V_{t n}=V_{D D}-V_{t n}$. The preceding voltage change in $\\mathrm{V}^{\\prime \\prime}$ assumes that $Q_{2}$ turns off slightly after $Q_{3}$. More on this assumption will be discussed shortly.\n\n[^0]Fig. 10.8 A capacitor divider.\nimage_name:Fig. 10.8 A capacitor divider\ndescription:The circuit consists of a capacitor divider with two capacitors, C1 and C2, connected in series. Vout is measured across C2, equating to VC2.\n\nKey Point: When a MOSFET transitions from triode mode to off, the stored channel charge must exit through the transistor terminals; in a comparator, this charge can accumulate on circuit capacitances, causing offset.\n\nTo determine the voltage change due to overlap capacitance, it is essential to introduce the capacitor-divider formula. This formula calculates the voltage change at the internal node of two series capacitors when the voltage at one end terminal changes. This is illustrated in Fig. 10.8, where $\\mathrm{V}_{\\text {in }}$ is changing, and we aim to calculate $\\mathrm{V}_{\\text {out }}=\\mathrm{V}_{\\mathrm{C} 2}$. The series combination of $\\mathrm{C}_{1}$ and $\\mathrm{C}_{2}$ equates to a single capacitor, $\\mathrm{C}_{\\mathrm{eq}}$, given by\n\n$$\n\\begin{equation*}\n\\mathrm{C}_{\\mathrm{eq}}=\\frac{\\mathrm{C}_{1} \\mathrm{C}_{2}}{\\mathrm{C}_{1}+\\mathrm{C}_{2}} \\tag{10.5}\n\\end{equation*}\n$$\n\nWhen $\\mathrm{V}_{\\text {in }}$ changes, the charge entering this equivalent capacitor is\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{Q}_{\\mathrm{eq}}=\\Delta \\mathrm{V}_{\\mathrm{in}} \\mathrm{C}_{\\mathrm{eq}}=\\Delta \\mathrm{V}_{\\mathrm{in}} \\frac{\\mathrm{C}_{1} \\mathrm{C}_{2}}{\\mathrm{C}_{1}+\\mathrm{C}_{2}} \\tag{10.6}\n\\end{equation*}\n$$\n\nAll charge entering $\\mathrm{C}_{\\mathrm{eq}}$ equals the charge entering $\\mathrm{C}_{1}$, which also equals the charge entering $\\mathrm{C}_{2}$. Thus,\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{V}_{\\text {out }}=\\Delta \\mathrm{V}_{\\mathrm{C} 2}=\\frac{\\Delta \\mathrm{Q}_{\\mathrm{C} 2}}{\\mathrm{C}_{2}}=\\frac{\\Delta \\mathrm{V}_{\\text {in }} \\mathrm{C}_{1}}{\\mathrm{C}_{1}+\\mathrm{C}_{2}} \\tag{10.7}\n\\end{equation*}\n$$\n\nThis formula is frequently useful in calculating charge flow in integrated circuits. Applying it to the circuit in Fig. 10.7, we can calculate the change in $\\mathrm{V}^{\\prime \\prime}$ due to the overlap capacitance of $\\mathrm{Q}_{3}$ when it turns off. For this scenario, $\\mathrm{C}_{1}=\\mathrm{C}_{\\mathrm{ov}}, \\mathrm{C}_{2}=\\mathrm{C}$, and $\\Delta \\mathrm{V}_{\\mathrm{in}}=-\\left(\\mathrm{V}_{\\mathrm{DD}}-\\mathrm{V}_{\\mathrm{SS}}\\right)$. This assumes the clock signals transition from $\\mathrm{V}_{\\mathrm{DD}}$ to $\\mathrm{V}_{\\mathrm{SS}}$. The change in $\\mathrm{V}^{\\prime \\prime}$ due to the overlap capacitance is then\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{V}^{\\prime \\prime}=\\frac{-\\left(\\mathrm{V}_{\\mathrm{DD}}-\\mathrm{V}_{\\mathrm{SS}}\\right) \\mathrm{C}_{\\mathrm{ov}}}{\\mathrm{C}_{\\mathrm{ov}}+\\mathrm{C}} \\tag{10.8}\n\\end{equation*}\n$$\n\nThis change is typically smaller than that caused by the channel charge, as $\\mathrm{C}_{\\text {ov }}$ is small.\n\n#### EXAMPLE 10.3\n\nSuppose a resolution of $\\pm 2.5 \\mathrm{mV}$ is required from the circuit in Fig. 10.7. Given values are: $\\mathrm{C}=0.1 \\mathrm{pF}, \\mathrm{C}_{\\mathrm{ox}}=8.5 \\mathrm{fF} /(\\mu \\mathrm{m})^{2},(\\mathrm{~W} / \\mathrm{L})_{3}=4 \\mu \\mathrm{~m} / 0.2 \\mu \\mathrm{~m}, \\mathrm{~L}_{\\mathrm{ov}}=0.04 \\mu \\mathrm{~m}, \\mathrm{~V}_{\\mathrm{tn}}=0.45 \\mathrm{~V}$, and $\\mathrm{V}_{\\mathrm{DD}}=1 \\mathrm{~V}$. What is the change in $\\Delta \\mathrm{V}^{\\prime \\prime}$ when $\\mathrm{Q}_{3}$ turns off?\n\n#### Solution\n\nUsing (10.4), we find $\\Delta \\mathrm{V}^{\\prime \\prime}=-53 \\mathrm{mV}$. The overlap capacitance is $\\mathrm{C}_{\\mathrm{ov}}=\\mathrm{W}_{3} \\mathrm{~L}_{\\mathrm{ov}} \\mathrm{C}_{\\mathrm{ox}}=1.4 \\mathrm{fF}$. Applying (10.8), this results in a voltage change of $\\Delta \\mathrm{V}^{\\prime \\prime}=-2.8 \\mathrm{mV}$, which is less significant than the change due to the channel charge but still notable. The total change is the sum of the two effects, yielding $\\Delta \\mathrm{V}^{\\prime \\prime}=-56 \\mathrm{mV}$.\n\nThis result exceeds the required resolution of $\\pm 2.5 \\mathrm{mV}$ by an order of magnitude. Clearly, additional measures are necessary to mitigate the effects of charge-injection to achieve the desired resolution.\nimage_name:Fig. 10.9\ndescription:The circuit is a clock generator that produces two clock signals, φ1 and φ2, from a single input voltage source Vin. It employs AND gates and inverters to generate the clock waveforms.\n\nFig. 10.9 A clock generator suitable for producing the required clock waveforms for the comparator in Fig. 10.3."
},
{
    "text": "Perhaps the primary constraint on comparator resolution stems from what is known as charge-injection, often referred to as clock feedthrough. This error arises from unwanted charges being introduced into the circuit when transistors are turned off. In the comparator depicted in Fig. 10.3, the switches are typically implemented using either n-channel transistors alone or CMOS transmission gates (comprising n-channel and p-channel transistors in parallel, both of which must deactivate). When MOS switches are active, they operate in the triode region with zero volts between their drain and source. However, when these switches turn off, charge errors occur through two mechanisms. The first involves the channel charge, which must exit the transistor's channel region and move to the drain and source junctions. \n\nimage_name:Fig. 10.7\ndescription:The circuit features a comparator with n-channel MOS switches and parasitic capacitances. It includes three NMOS transistors and several capacitors to manage charge distribution and signal comparison. An op-amp is used to amplify the difference between the input and reference signals.\n\nFig. 10.7 illustrates the comparator from Fig. 10.3, showing n-channel switches and the associated overlap parasitic capacitances. Transistors that are turned on also possess channel charge. The channel charge of a transistor with zero $\\mathrm{V}_{\\mathrm{DS}}$ is expressed as\n\n$$\n\\begin{equation*}\nQ_{c h}=W L C_{o x} V_{\\text {eff }}=W L C_{o x}\\left(V_{G s}-V_{t}\\right) \\tag{10.3}\n\\end{equation*}\n$$\n\nThis charge often predominates. The second charge, usually smaller unless $\\mathrm{V}_{\\text {eff }}$ is very low, results from the overlap capacitance between the gate and the junctions.\n\nFigure 10.7 presents the comparator from Fig. 10.3, where the switches are realized using n-channel transistors. It also highlights the parasitic capacitances due to gate-drain and gate-source overlap capacitors. Additionally, while not depicted in Fig. 10.7, it is crucial to account for the channel charge dispersion of any transistors transitioning from on to off. In the shown circuit, all transistors are n-channel, indicating that the channel charge is negative.\n\nConsider the scenario when $Q_{3}$ deactivates. If the clock waveform is extremely rapid, the channel charge from $Q_{3}$ will evenly distribute through both junctions [Shieh, 1987]. The $\\mathrm{Q}_{\\mathrm{ch}} / 2$ charge reaching the op-amp's output node will have minimal impact, aside from causing a brief glitch. Conversely, the $Q_{c h} / 2$ charge that reaches the op-amp's inverting-input node will alter the voltage across $C$, introducing an error. Given that this charge is negative for an n-channel transistor, the node voltage $\\mathrm{V}^{\\prime \\prime}$ will become negative. The voltage change due to the channel charge is calculated as\n\n$$\n\\begin{equation*}\n\\Delta V^{\\prime \\prime}=\\frac{\\left(Q_{\\mathrm{ch}} / 2\\right)}{C}=-\\frac{V_{\\text {eff } 3} C_{o x} W_{3} L_{3}}{2 C}=-\\frac{\\left(V_{D D}-V_{t n}\\right) C_{o x} W_{3} L_{3}}{2 C} \\tag{10.4}\n\\end{equation*}\n$$\n\nThis calculation assumes that $Q_{2}$ turns off slightly after $Q_{3}$. More details on this assumption will be discussed shortly.\n\n[^0]Fig. 10.8 A capacitor divider.\nimage_name:Fig. 10.8 A capacitor divider\ndescription:The circuit consists of a capacitor divider with two capacitors, C1 and C2, connected in series. Vout is measured across C2, equating to VC2.\n\nKey Point: When a MOSFET transitions from triode mode to off, the stored channel charge must exit through the transistor terminals; in a comparator, this charge can accumulate on circuit capacitances, causing offset.\n\nTo determine the voltage change due to overlap capacitance, it is essential to introduce the capacitor-divider formula. This formula calculates the voltage change at the internal node of two series capacitors when the voltage at one end terminal changes. This is depicted in Fig. 10.8, where $\\mathrm{V}_{\\text {in }}$ is changing, and we aim to calculate $\\mathrm{V}_{\\text {out }}=\\mathrm{V}_{\\mathrm{C} 2}$. The series combination of $\\mathrm{C}_{1}$ and $\\mathrm{C}_{2}$ equates to a single capacitor, $\\mathrm{C}_{\\mathrm{eq}}$, given by\n\n$$\n\\begin{equation*}\n\\mathrm{C}_{\\mathrm{eq}}=\\frac{\\mathrm{C}_{1} \\mathrm{C}_{2}}{\\mathrm{C}_{1}+\\mathrm{C}_{2}} \\tag{10.5}\n\\end{equation*}\n$$\n\nWhen $\\mathrm{V}_{\\text {in }}$ changes, the charge entering this equivalent capacitor is\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{Q}_{\\mathrm{eq}}=\\Delta \\mathrm{V}_{\\mathrm{in}} \\mathrm{C}_{\\mathrm{eq}}=\\Delta \\mathrm{V}_{\\mathrm{in}} \\frac{\\mathrm{C}_{1} \\mathrm{C}_{2}}{\\mathrm{C}_{1}+\\mathrm{C}_{2}} \\tag{10.6}\n\\end{equation*}\n$$\n\nAll charge entering $\\mathrm{C}_{\\mathrm{eq}}$ equals the charge entering $\\mathrm{C}_{1}$, which also equals the charge entering $\\mathrm{C}_{2}$. Thus,\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{V}_{\\text {out }}=\\Delta \\mathrm{V}_{\\mathrm{C} 2}=\\frac{\\Delta \\mathrm{Q}_{\\mathrm{C} 2}}{\\mathrm{C}_{2}}=\\frac{\\Delta \\mathrm{V}_{\\text {in }} \\mathrm{C}_{1}}{\\mathrm{C}_{1}+\\mathrm{C}_{2}} \\tag{10.7}\n\\end{equation*}\n$$\n\nThis formula is frequently useful in calculating charge flow in integrated circuits. Applying it to Fig. 10.7, we can calculate the change in $\\mathrm{V}^{\\prime \\prime}$ due to the overlap capacitance of $\\mathrm{Q}_{3}$ when it turns off. For this scenario, $\\mathrm{C}_{1}=\\mathrm{C}_{\\mathrm{ov}}, \\mathrm{C}_{2}=\\mathrm{C}$, and $\\Delta \\mathrm{V}_{\\mathrm{in}}=-\\left(\\mathrm{V}_{\\mathrm{DD}}-\\mathrm{V}_{\\mathrm{SS}}\\right)$, assuming the clock signals transition from $\\mathrm{V}_{\\mathrm{DD}}$ to $\\mathrm{V}_{\\mathrm{SS}}$. The change in $\\mathrm{V}^{\\prime \\prime}$ due to the overlap capacitance is then\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{V}^{\\prime \\prime}=\\frac{-\\left(\\mathrm{V}_{\\mathrm{DD}}-\\mathrm{V}_{\\mathrm{SS}}\\right) \\mathrm{C}_{\\mathrm{ov}}}{\\mathrm{C}_{\\mathrm{ov}}+\\mathrm{C}} \\tag{10.8}\n\\end{equation*}\n$$\n\nThis change is typically smaller than that caused by the channel charge, as $\\mathrm{C}_{\\text {ov }}$ is small.\n\n#### EXAMPLE 10.3\n\nSuppose a resolution of $\\pm 2.5 \\mathrm{mV}$ is needed for the circuit in Fig. 10.7. Given: $\\mathrm{C}=0.1 \\mathrm{pF}, \\mathrm{C}_{\\mathrm{ox}}=8.5 \\mathrm{fF} /(\\mu \\mathrm{m})^{2},(\\mathrm{~W} / \\mathrm{L})_{3}=4 \\mu \\mathrm{~m} / 0.2 \\mu \\mathrm{~m}, \\mathrm{~L}_{\\mathrm{ov}}=0.04 \\mu \\mathrm{~m}, \\mathrm{~V}_{\\mathrm{tn}}=0.45 \\mathrm{~V}$, and $\\mathrm{V}_{\\mathrm{DD}}=1 \\mathrm{~V}$. What is the change in $\\Delta \\mathrm{V}^{\\prime \\prime}$ when $\\mathrm{Q}_{3}$ turns off?\n\n#### Solution\n\nUsing (10.4), $\\Delta \\mathrm{V}^{\\prime \\prime}=-53 \\mathrm{mV}$. The overlap capacitance is $\\mathrm{C}_{\\mathrm{ov}}=\\mathrm{W}_{3} \\mathrm{~L}_{\\mathrm{ov}} \\mathrm{C}_{\\mathrm{ox}}=1.4 \\mathrm{fF}$. Using (10.8), this results in a $\\Delta \\mathrm{V}^{\\prime \\prime}$ change of $-2.8 \\mathrm{mV}$, which, while smaller than the channel charge effect, is still significant. The total change is $-56 \\mathrm{mV}$ by combining both effects.\n\nThis result exceeds the required resolution of $\\pm 2.5 \\mathrm{mV}$ by an order of magnitude. Clearly, additional steps are necessary to mitigate the impact of charge-injection to achieve the desired resolution.\nimage_name:Fig. 10.9\ndescription:The circuit is a clock generator that produces two clock signals, φ1 and φ2, from a single input voltage source Vin. It employs AND gates and inverters to generate the clock waveforms.\n\nFig. 10.9 illustrates a clock generator suitable for producing the required clock waveforms for the comparator in Fig. 10.3."
},
{
    "text": "The primary constraint on comparator resolution is often attributed to charge-injection, also known as clock feedthrough. This error arises from unwanted charges entering the circuit when transistors switch off. In the comparator depicted in Fig. 10.3, the switches are typically implemented using either n-channel transistors alone or CMOS transmission gates (comprising n-channel and p-channel transistors in parallel, both of which must deactivate). When MOS switches are active, they operate in the triode region with zero volts between drain and source. However, when these switches turn off, charge errors occur through two mechanisms. The first involves channel charge, which must exit the transistor's channel region to the drain and source junctions. The channel charge for a transistor with zero $\\mathrm{V}_{\\mathrm{DS}}$ is expressed as\n\n$$\n\\begin{equation*}\nQ_{c h}=W L C_{o x} V_{\\text {eff }}=W L C_{o x}\\left(V_{G s}-V_{t}\\right) \\tag{10.3}\n\\end{equation*}\n$$\n\nThis charge usually predominates. The second mechanism, typically less significant unless $\\mathrm{V}_{\\text {eff }}$ is very low, involves overlap capacitance between the gate and the junctions.\n\nFigure 10.7 illustrates the comparator from Fig. 10.3, where the switches are realized as n-channel transistors. It also highlights parasitic capacitances due to gate-drain and gate-source overlap. Additionally, while not depicted in Fig. 10.7, it's crucial to account for the channel charge dispersion of transistors transitioning from on to off. In this circuit, all transistors are n-channel, indicating that the channel charge is negative.\n\nConsider the scenario when $Q_{3}$ deactivates. If the clock waveform is rapid, the channel charge from $Q_{3}$ will distribute equally through both junctions [Shieh, 1987]. The $\\mathrm{Q}_{\\mathrm{ch}} / 2$ charge reaching the opamp's output node will have a minimal impact, aside from causing a brief glitch. However, the $Q_{c h} / 2$ charge directed to the opamp's inverting-input node will alter the voltage across $C$, introducing an error. Given that this charge is negative for an n-channel transistor, the node voltage $\\mathrm{V}^{\\prime \\prime}$ will become negative. The voltage change due to the channel charge is calculated as\n\n$$\n\\begin{equation*}\n\\Delta V^{\\prime \\prime}=\\frac{\\left(Q_{\\mathrm{ch}} / 2\\right)}{C}=-\\frac{V_{\\text {eff } 3} C_{o x} W_{3} L_{3}}{2 C}=-\\frac{\\left(V_{D D}-V_{t n}\\right) C_{o x} W_{3} L_{3}}{2 C} \\tag{10.4}\n\\end{equation*}\n$$\n\nThis calculation assumes that $Q_{2}$ turns off slightly after $Q_{3}$. More details on this assumption will be discussed shortly.\n\n[^0]Fig. 10.8 illustrates a capacitor divider.\nimage_name:Fig. 10.8 A capacitor divider\ndescription:The circuit consists of a capacitor divider with two capacitors, C1 and C2, connected in series. Vout is measured across C2, equating to VC2.\n\nKey Point: When a MOSFET shifts from triode mode to off, the stored channel charge must exit through the transistor terminals; in a comparator, this charge can accumulate on circuit capacitances, causing offset.\n\nTo determine the voltage change due to overlap capacitance, the capacitor-divider formula is essential. This formula calculates the voltage change at the internal node of two series capacitors when the voltage at one end changes. Fig. 10.8 demonstrates this, assuming $\\mathrm{V}_{\\text {in }}$ varies and we need to find $\\Delta \\mathrm{V}_{\\text {out }}=\\mathrm{V}_{\\mathrm{C} 2}$. The series combination of $\\mathrm{C}_{1}$ and $\\mathrm{C}_{2}$ equals a single capacitor, $\\mathrm{C}_{\\mathrm{eq}}$, given by\n\n$$\n\\begin{equation*}\n\\mathrm{C}_{\\mathrm{eq}}=\\frac{\\mathrm{C}_{1} \\mathrm{C}_{2}}{\\mathrm{C}_{1}+\\mathrm{C}_{2}} \\tag{10.5}\n\\end{equation*}\n$$\n\nWhen $\\mathrm{V}_{\\text {in }}$ changes, the charge entering this equivalent capacitor is\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{Q}_{\\mathrm{eq}}=\\Delta \\mathrm{V}_{\\mathrm{in}} \\mathrm{C}_{\\mathrm{eq}}=\\Delta \\mathrm{V}_{\\mathrm{in}} \\frac{\\mathrm{C}_{1} \\mathrm{C}_{2}}{\\mathrm{C}_{1}+\\mathrm{C}_{2}} \\tag{10.6}\n\\end{equation*}\n$$\n\nAll charge entering $\\mathrm{C}_{\\mathrm{eq}}$ equals the charge entering $\\mathrm{C}_{1}$ and $\\mathrm{C}_{2}$. Thus,\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{V}_{\\text {out }}=\\Delta \\mathrm{V}_{\\mathrm{C} 2}=\\frac{\\Delta \\mathrm{Q}_{\\mathrm{C} 2}}{\\mathrm{C}_{2}}=\\frac{\\Delta \\mathrm{V}_{\\text {in }} \\mathrm{C}_{1}}{\\mathrm{C}_{1}+\\mathrm{C}_{2}} \\tag{10.7}\n\\end{equation*}\n$$\n\nThis formula is invaluable for calculating charge flow in integrated circuits. Applying it to Fig. 10.7, we can determine the change in $\\mathrm{V}^{\\prime \\prime}$ due to $\\mathrm{Q}_{3}$'s overlap capacitance when it turns off. For this scenario, $\\mathrm{C}_{1}=\\mathrm{C}_{\\mathrm{ov}}, \\mathrm{C}_{2}=\\mathrm{C}$, and $\\Delta \\mathrm{V}_{\\mathrm{in}}=-\\left(\\mathrm{V}_{\\mathrm{DD}}-\\mathrm{V}_{\\mathrm{SS}}\\right)$. Assuming the clock signals transition from $\\mathrm{V}_{\\mathrm{DD}}$ to $\\mathrm{V}_{\\mathrm{SS}}$, the change in $\\mathrm{V}^{\\prime \\prime}$ due to overlap capacitance is\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{V}^{\\prime \\prime}=\\frac{-\\left(\\mathrm{V}_{\\mathrm{DD}}-\\mathrm{V}_{\\mathrm{SS}}\\right) \\mathrm{C}_{\\mathrm{ov}}}{\\mathrm{C}_{\\mathrm{ov}}+\\mathrm{C}} \\tag{10.8}\n\\end{equation*}\n$$\n\nThis change is typically smaller than that caused by channel charge, as $\\mathrm{C}_{\\text {ov }}$ is minimal.\n\n#### EXAMPLE 10.3\n\nFor the circuit in Fig. 10.7, suppose a resolution of $\\pm 2.5 \\mathrm{mV}$ is needed. Given: $\\mathrm{C}=0.1 \\mathrm{pF}, \\mathrm{C}_{\\mathrm{ox}}=8.5 \\mathrm{fF} /(\\mu \\mathrm{m})^{2},(\\mathrm{~W} / \\mathrm{L})_{3}=4 \\mu \\mathrm{~m} / 0.2 \\mu \\mathrm{~m}, \\mathrm{~L}_{\\mathrm{ov}}=0.04 \\mu \\mathrm{~m}, \\mathrm{~V}_{\\mathrm{tn}}=0.45 \\mathrm{~V}$, and $\\mathrm{V}_{\\mathrm{DD}}=1 \\mathrm{~V}$, what is the change in $\\Delta \\mathrm{V}^{\\prime \\prime}$ when $\\mathrm{Q}_{3}$ turns off?\n\n#### Solution\n\nUsing (10.4), $\\Delta \\mathrm{V}^{\\prime \\prime}=-53 \\mathrm{mV}$. The overlap capacitance is $\\mathrm{C}_{\\mathrm{ov}}=\\mathrm{W}_{3} \\mathrm{~L}_{\\mathrm{ov}} \\mathrm{C}_{\\mathrm{ox}}=1.4 \\mathrm{fF}$. Applying (10.8), the voltage change in $\\Delta \\mathrm{V}^{\\prime \\prime}$ is $\\Delta \\mathrm{V}^{\\prime \\prime}=-2.8 \\mathrm{mV}$, which, though smaller than the channel charge effect, is still significant. The total change is $\\Delta \\mathrm{V}^{\\prime \\prime}=-56 \\mathrm{mV}$.\n\nThis result exceeds the required resolution of $\\pm 2.5 \\mathrm{mV}$ by an order of magnitude. Clearly, additional steps are necessary to mitigate charge-injection effects to achieve the desired resolution.\nimage_name:Fig. 10.9\ndescription:The circuit is a clock generator that produces two clock signals, φ1 and φ2, from a single input voltage source Vin. It employs AND gates and inverters to generate the clock waveforms.\n\nFig. 10.9 A clock generator suitable for producing the necessary clock waveforms for the comparator in Fig. 10.3."
},
{
    "text": "The charge-injection resulting from transistors $Q_{1}$ and $Q_{2}$ can lead to transient glitches, yet its impact is significantly less pronounced than the charge-injection caused by $Q_{3}$, given that $Q_{2}$ deactivates slightly after $Q_{3}$ [Haigh, 1983]. This temporal discrepancy explains why the clock voltage for $Q_{2}$ is labeled $\\phi_{1}$, while $Q_{3}$'s clock voltage is designated $\\phi_{1 a}$ (indicating an advanced $\\phi_{1}$). The rationale for this setup is as follows: When $Q_{2}$ switches off, its charge-injection induces a negative glitch at $\\mathrm{V}^{\\prime}$, but this does not alter the charge stored in $C$ since the right side of $C$ is effectively open-circuited, assuming $Q_{3}$ has already deactivated. Subsequently, when $Q_{1}$ activates, the voltage $\\mathrm{V}^{\\prime}$ stabilizes at $V_{\\text {in }}$, irrespective of $Q_{2}$'s prior charge-injection. Consequently, the voltage on the left side of $C$ and the voltage across $C$ remain unaffected by $Q_{2}$'s charge-injection, ensuring that $\\mathrm{V}^{\\prime \\prime}$ is also unaffected. This scenario changes if $Q_{2}$ deactivates simultaneously with or before $Q_{3}$. The charge-injection from $Q_{1}$ is inconsequential for a straightforward reason—it occurs after the critical comparison. Additionally, its charge-injection is neutralized during activation because the right side of $C$ is then connected to an open circuit, provided the clock signals do not overlap. In essence, by deactivating $\\phi_{1 \\mathrm{a}}$ first, the circuit is solely influenced by the charge-injection of $Q_{3}$, excluding any impact from other switches.\n\nFigure 10.9 illustrates a basic digital circuit [Martin, 1980] designed to produce the required clock waveforms. The waveforms $\\phi_{1}$ and $\\phi_{1 a}$ do not coincide with $\\phi_{2}$ and $\\phi_{2 a}$. Furthermore, $\\phi_{1 \\mathrm{a}}$ is slightly advanced (by two inverter delays) relative to $\\phi_{1}$."
},
{
    "text": "The charge-injection from transistors $Q_{1}$ and $Q_{2}$ may result in temporary glitches, but its impact is significantly less than that of the charge-injection from $Q_{3}$, assuming $Q_{2}$ switches off slightly after $Q_{3}$ [Haigh, 1983]. This timing discrepancy explains why the clock voltage for $Q_{2}$ is labeled $\\phi_{1}$, while that for $Q_{3}$ is labeled $\\phi_{1 a}$ (indicating an advanced $\\phi_{1}$). The rationale for this setup is as follows: When $Q_{2}$ deactivates, its charge-injection induces a negative glitch at $\\mathrm{V}^{\\prime}$, but this does not alter the charge in $C$ because the right side of $C$ is effectively open-circuited, provided $Q_{3}$ has already deactivated. Subsequently, when $Q_{1}$ activates, the voltage $\\mathrm{V}^{\\prime}$ stabilizes at $V_{\\text {in }}$, irrespective of $Q_{2}$'s prior charge-injection. Thus, the voltage on the left side of $C$ and across $C$ remains unaffected by $Q_{2}$'s charge-injection, ensuring $\\mathrm{V}^{\\prime \\prime}$ is also不受影响. This scenario changes if $Q_{2}$ deactivates simultaneously with or before $Q_{3}$. The charge-injection from $Q_{1}$ is inconsequential for a straightforward reason—it occurs post-comparison. Additionally, its charge-injection is irrelevant during activation since the right side of $C$ is then open-circuited, assuming non-overlapping clocks. In essence, by deactivating $\\phi_{1 \\mathrm{a}}$ first, the circuit is impacted solely by $Q_{3}$'s charge-injection and none from the other switches.\n\nFigure 10.9 illustrates a basic digital circuit [Martin, 1980] capable of producing the required clock waveforms. The waveforms $\\phi_{1}$ and $\\phi_{1 a}$ do not overlap with $\\phi_{2}$ and $\\phi_{2 a}$. Furthermore, $\\phi_{1 \\mathrm{a}}$ is slightly advanced (by two inverter delays) relative to $\\phi_{1}$."
},
{
    "text": "The charge-injection resulting from transistors $Q_{1}$ and $Q_{2}$ may lead to temporary glitches, but its impact is significantly less than that of the charge-injection caused by $Q_{3}$, assuming $Q_{2}$ switches off shortly after $Q_{3}$ [Haigh, 1983]. This timing discrepancy explains why the clock voltage for $Q_{2}$ is labeled $\\phi_{1}$, while the clock voltage for $Q_{3}$ is designated $\\phi_{1 a}$ (indicating an advanced $\\phi_{1}$). The rationale behind this setup is as follows: When $Q_{2}$ deactivates, its charge-injection induces a negative glitch at $\\mathrm{V}^{\\prime}$, but this does not alter the charge stored in $C$ since the right side of $C$ is effectively open-circuited, provided $Q_{3}$ has already turned off. Subsequently, when $Q_{1}$ activates, the voltage $\\mathrm{V}^{\\prime}$ stabilizes at $V_{\\text{in}}$, irrespective of $Q_{2}$'s prior charge-injection. Thus, the voltage on the left side of $C$ and the voltage across $C$ remain unaffected by $Q_{2}$'s charge-injection, ensuring that $\\mathrm{V}^{\\prime \\prime}$ is also不受影响. This scenario changes if $Q_{2}$ deactivates simultaneously with or before $Q_{3}$. The charge-injection of $Q_{1}$ is inconsequential for a straightforward reason—it occurs after the critical comparison. Additionally, its charge-injection is negligible during activation because the right side of $C$ is then connected to an open circuit, assuming non-overlapping clocks. In essence, by deactivating $\\phi_{1 a}$ first, the circuit is influenced solely by the charge-injection of $Q_{3}$ and not by other switches.\n\nFigure 10.9 illustrates a basic digital circuit [Martin, 1980] designed to produce the required clock waveforms. The waveforms $\\phi_{1}$ and $\\phi_{1 a}$ do not overlap with $\\phi_{2}$ and $\\phi_{2 a}$. Furthermore, $\\phi_{1 a}$ is slightly advanced (by two inverter delays) relative to $\\phi_{1}$."
},
{
    "text": "The charge-injection from transistors $Q_{1}$ and $Q_{2}$ can lead to temporary glitches, but its impact is significantly less than that of the charge-injection from $Q_{3}$, assuming $Q_{2}$ switches off slightly after $Q_{3}$ [Haigh, 1983]. This timing discrepancy explains why $Q_{2}$'s clock voltage is labeled $\\phi_{1}$, while $Q_{3}$'s clock voltage is designated $\\phi_{1 a}$ (indicating an advanced $\\phi_{1}$). The rationale for this setup is as follows: When $Q_{2}$ deactivates, its charge-injection induces a negative glitch at $\\mathrm{V}^{\\prime}$, but this does not alter the charge in $C$ since its right side is effectively open-circuited, provided $Q_{3}$ has already turned off. Subsequently, when $Q_{1}$ activates, $\\mathrm{V}^{\\prime}$ stabilizes at $V_{\\text{in}}$, irrespective of $Q_{2}$'s prior charge-injection. Consequently, the voltage on the left of $C$ and across $C$ remains unaffected by $Q_{2}$'s charge-injection, ensuring $\\mathrm{V}^{\\prime \\prime}$ is also unaffected. This outcome changes if $Q_{2}$ deactivates simultaneously with or before $Q_{3}$. The charge-injection from $Q_{1}$ is inconsequential for a straightforward reason—it occurs after the critical comparison. Moreover, its charge-injection is irrelevant during activation because the right side of $C$ is open-circuited then, assuming non-overlapping clocks. In essence, by deactivating $\\phi_{1 a}$ first, the circuit is influenced solely by $Q_{3}$'s charge-injection,不受其他开关的影响.\n\nFigure 10.9 illustrates a basic digital circuit [Martin, 1980] designed to produce the required clock waveforms. The waveforms $\\phi_{1}$ and $\\phi_{1 a}$ do not overlap with $\\phi_{2}$ and $\\phi_{2 a}$. Additionally, $\\phi_{1 a}$ is slightly advanced (by two inverter delays) relative to $\\phi_{1}$."
},
{
    "text": "The charge-injection from transistors $Q_{1}$ and $Q_{2}$ may result in temporary glitches, but its impact is significantly less than that of the charge-injection from $Q_{3}$, given that $Q_{2}$ switches off slightly after $Q_{3}$ [Haigh, 1983]. This timing difference explains why the clock voltage for $Q_{2}$ is labeled $\\phi_{1}$, while the clock voltage for $Q_{3}$ is labeled $\\phi_{1 a}$ (indicating an advanced $\\phi_{1}$). The rationale for this setup is as follows: When $Q_{2}$ deactivates, its charge-injection induces a negative glitch at $\\mathrm{V}^{\\prime}$, but this does not alter the charge stored in $C$ because the right side of $C$ is effectively open-circuited, assuming $Q_{3}$ has already turned off. Subsequently, when $Q_{1}$ activates, the voltage $\\mathrm{V}^{\\prime}$ stabilizes at $V_{\\text {in }}$, regardless of $Q_{2}$'s prior charge-injection. Consequently, the voltage on the left side of $C$ and the voltage across $C$ remain unaffected by $Q_{2}$'s charge-injection, ensuring that $\\mathrm{V}^{\\prime \\prime}$ is also unaffected. This scenario changes if $Q_{2}$ is turned off simultaneously with or before $Q_{3}$. The charge-injection from $Q_{1}$ is inconsequential for a straightforward reason: the comparison is already completed when it turns off. Moreover, its charge-injection is negligible when it turns on because the right side of $C$ is connected to an open circuit at that moment, provided the clocks do not overlap. In essence, by deactivating $\\phi_{1 \\mathrm{a}}$ first, the circuit is influenced solely by the charge-injection from $Q_{3}$ and not by any other switches.\n\nFigure 10.9 illustrates a basic digital circuit [Martin, 1980] designed to produce the required clock waveforms. The waveforms $\\phi_{1}$ and $\\phi_{1 a}$ do not overlap with $\\phi_{2}$ and $\\phi_{2 a}$. Additionally, $\\phi_{1 \\mathrm{a}}$ is slightly advanced (by two inverter delays) relative to $\\phi_{1}$."
},
{
    "text": "The rephrased text:\n```\nThe charge-injection from transistors $Q_{1}$ and $Q_{2}$ may result in temporary glitches, but its impact will be significantly less than that of the charge-injection from $Q_{3}$, assuming $Q_{2}$ switches off slightly after $Q_{3}$ [Haigh, 1983]. This timing discrepancy explains why the clock voltage for $Q_{2}$ is labeled $\\phi_{1}$, while the clock voltage for $Q_{3}$ is designated $\\phi_{1 a}$ (indicating an advanced $\\phi_{1}$). The rationale for this setup is as follows: When $Q_{2}$ deactivates, its charge-injection induces a negative glitch at $\\mathrm{V}^{\\prime}$, but this does not alter the charge stored in $C$ because the right side of $C$ is effectively open-circuited, provided $Q_{3}$ has already turned off. Subsequently, when $Q_{1}$ activates, the voltage $\\mathrm{V}^{\\prime}$ stabilizes at $V_{\\text {in }}$, irrespective of $Q_{2}$'s prior charge-injection. Consequently, the voltage on the left side of $C$ and the voltage across $C$ remain unaffected by $Q_{2}$'s charge-injection, ensuring $\\mathrm{V}^{\\prime \\prime}$ is also不受影响. This scenario changes if $Q_{2}$ is turned off simultaneously with or before $Q_{3}$. The charge-injection from $Q_{1}$ is inconsequential for a straightforward reason—it occurs after the comparison has already taken place. Additionally, its charge-injection is negligible when it turns on because the right side of $C$ is then connected to an open circuit, assuming no clock overlap. In essence, by deactivating $\\phi_{1 \\mathrm{a}}$ first, the circuit is influenced solely by the charge-injection of $Q_{3}$ and none of the other switches.\n\nFigure 10.9 illustrates a basic digital circuit [Martin, 1980] capable of producing the required clock waveforms. The waveforms $\\phi_{1}$ and $\\phi_{1 a}$ do not coincide with $\\phi_{2}$ and $\\phi_{2 a}$. Furthermore, $\\phi_{1 \\mathrm{a}}$ is slightly advanced (by two inverter delays) relative to $\\phi_{1}$.\n```"
},
{
    "text": "The charge-injection resulting from transistors $Q_{1}$ and $Q_{2}$ can lead to temporary glitches, but its impact is significantly less than that of the charge-injection from $Q_{3}$, assuming $Q_{2}$ deactivates slightly after $Q_{3}$ [Haigh, 1983]. This timing discrepancy explains why $Q_{2}$'s clock voltage is labeled $\\phi_{1}$, while $Q_{3}$'s clock voltage is designated $\\phi_{1 a}$ (indicating an advanced $\\phi_{1}$). The rationale for this setup is as follows: When $Q_{2}$ switches off, its charge-injection induces a negative glitch at $\\mathrm{V}^{\\prime}$, but this does not alter the charge in $C$ because the right side of $C$ is effectively open-circuited, provided $Q_{3}$ has already deactivated. Subsequently, when $Q_{1}$ activates, $\\mathrm{V}^{\\prime}$ stabilizes at $V_{\\text{in}}$, irrespective of $Q_{2}$'s prior charge-injection. Consequently, the voltage on the left side of $C$ and the voltage across $C$ remain unaffected by $Q_{2}$'s charge-injection, ensuring $\\mathrm{V}^{\\prime \\prime}$ is also unaffected. This scenario changes if $Q_{2}$ deactivates simultaneously with or before $Q_{3}$. The charge-injection from $Q_{1}$ is inconsequential for a straightforward reason—it occurs after the comparison has been made. Additionally, its charge-injection is irrelevant during activation since the right side of $C$ is open-circuited at that moment, assuming non-overlapping clocks. In essence, by deactivating $\\phi_{1 a}$ first, the circuit is influenced solely by $Q_{3}$'s charge-injection and not by other switches.\n\nFigure 10.9 illustrates a basic digital circuit [Martin, 1980] capable of producing the required clock waveforms. The waveforms $\\phi_{1}$ and $\\phi_{1 a}$ do not overlap with $\\phi_{2}$ and $\\phi_{2 a}$. Furthermore, $\\phi_{1 a}$ is slightly advanced (by two inverter delays) relative to $\\phi_{1}$."
},
{
    "text": "The charge-injection from transistors $Q_{1}$ and $Q_{2}$ may result in temporary glitches, but its impact is significantly less than that of the charge-injection from $Q_{3}$, assuming $Q_{2}$ switches off slightly after $Q_{3}$ [Haigh, 1983]. This timing discrepancy explains why $Q_{2}$'s clock voltage is labeled $\\phi_{1}$, while $Q_{3}$'s clock voltage is designated $\\phi_{1 a}$ (indicating an advanced $\\phi_{1}$). The rationale for this setup is as follows: When $Q_{2}$ deactivates, its charge-injection induces a negative glitch at $\\mathrm{V}^{\\prime}$, but this does not alter the charge in $C$ because the right side of $C$ is effectively open-circuited, provided $Q_{3}$ has already turned off. Subsequently, when $Q_{1}$ activates, $\\mathrm{V}^{\\prime}$ stabilizes to $V_{\\text{in}}$, irrespective of $Q_{2}$'s prior charge-injection. Thus, the voltage on the left side of $C$ and across $C$ remains unaffected by $Q_{2}$'s charge-injection, ensuring $\\mathrm{V}^{\\prime \\prime}$ is also不受影响. This scenario changes if $Q_{2}$ deactivates simultaneously with or before $Q_{3}$. The charge-injection from $Q_{1}$ is inconsequential for a straightforward reason—it occurs after the critical comparison. Additionally, its charge-injection is ineffective during activation because the right side of $C$ is then open-circuited, assuming non-overlapping clocks. In essence, by deactivating $\\phi_{1 \\mathrm{a}}$ first, the circuit is solely influenced by $Q_{3}$'s charge-injection and none from the other switches.\n\nFigure 10.9 illustrates a basic digital circuit [Martin, 1980] designed to produce the required clock waveforms. The waveforms $\\phi_{1}$ and $\\phi_{1 a}$ do not overlap with $\\phi_{2}$ and $\\phi_{2 a}$. Furthermore, $\\phi_{1 \\mathrm{a}}$ is slightly advanced (by two inverter delays) relative to $\\phi_{1}$."
},
{
    "text": "To minimize errors from charge-injection, using larger capacitors is the simplest method. For instance, capacitors around 10 pF ensure clock-feedthrough errors are roughly 0.5 mV. However, this significant capacitance demands a substantial silicon area. Additionally, integrated capacitors have parasitic capacitances between their terminals and the substrate, which can be about 20% of the capacitor's size. Consequently, a parasitic capacitance of around 2 pF would need to be driven by the input circuits, significantly slowing them down.\n\nimage_name:Fig. 10.10\ndescription:A fully differential, single-stage, switched-capacitor comparator circuit. It employs a fully differential design to reduce charge injection errors. The reset switches can connect to a common-mode voltage reference instead of ground.\n\nFig. 10.10 Illustrates a fully differential, single-stage, switched-capacitor comparator.\nAnother method to reduce charge-injection errors is to use fully differential design techniques for comparators, akin to those used for opamps. Fig. 10.10 shows a basic example of a one-stage, switched-capacitor, fully differential comparator. Note that in Fig. 10.10, the ground connections to the reset switches $\\varphi_{1}$ can be replaced by a common-mode voltage reference situated midway between the analog supplies. Ideally, when the comparator exits reset mode, the clock feedthrough of reset switch $Q_{3 a}$ matches that of $Q_{3 b}$. In this scenario, the common-mode voltage may slightly change, but the differential input voltage remains unaffected. The only errors now stem from mismatches in the clock feedthrough of the two switches, typically at least ten times smaller than in single-ended designs. Hence, nearly all modern integrated comparators adopt fully differential design techniques.\n\nA third approach, which can complement fully differential designs, is to implement a multi-stage comparator [Poujois, 1978; Vittoz, 1985]. Here, the first stage's clock feedthrough is stored on coupling capacitors between the first and second stages, nullifying its effect. Similarly, the second stage's clock feedthrough is stored on capacitors between the second and third stages, and so on. While this technique is usually paired with fully differential configurations, we will explain it using single-ended configurations for simplicity. Consider the three-stage comparator in Fig. 10.11(a), along with the corresponding clock waveforms in Fig. 10.11(b). When $\\phi_{1}^{\\prime}$ drops and the first stage's switch experiences charge-injection, Fig. 10.12 depicts this situation, including the parasitic capacitances of the first-stage switch. As $\\phi_{1}^{\\prime}$ drops, $Q_{1}$ injects charge into both the inverting input and the first stage's output via parasitic capacitors $C_{p 1}$ and $C_{p 2}$, respectively. The charge at the first stage's output causes a temporary glitch, while the charge at the inverting input makes this node negative. The voltage drop at this node, calculated using prior methods, is assumed to be in the tens of millivolts, as in Example 10.3. After the inverting input becomes negative, the first stage's output becomes positive by an amount equal to the negative transition of the inverting input multiplied by the first stage's gain. However, at this point, $\\phi_{1}^{\\prime \\prime}$ is still high, keeping the second stage in reset mode. Thus, $\\mathrm{C}_{2}$ charges to the output error caused by the first stage's clock feedthrough, eliminating its effect. Similarly, when $\\phi_{1}^{\\prime \\prime}$ turns off and the second stage shifts from closed-loop reset to open-loop comparison mode, the third stage remains in reset mode, storing the second stage's clock feedthrough on coupling capacitor $\\mathrm{C}_{3}$. Finally, when the third stage turns off, its charge-injection is not cancelled. However, the error it introduces in resolving the input voltage across all three stages is minor, equal to the voltage transition at the third stage's inverting input divided by the negative gains of the first two stages (i.e., the input voltage needed to counteract the third stage's clock feedthrough upon exiting reset mode).\n\nimage_name:(a)\ndescription:A multi-stage comparator circuit designed to eliminate clock feedthrough errors. It comprises three stages, each with an operational amplifier and coupling capacitors. The circuit employs multiple clock phases to control switches, enabling input offset voltage cancellation and minimizing transition errors.\nimage_name:(b)\ndescription:The graph labeled \"(b)\" shows time-domain waveforms representing clock signals in a multi-stage comparator circuit. It displays four distinct waveforms corresponding to different clock phases: \\( \\phi_1 \\), \\( \\phi_1' \\), \\( \\phi_1'' \\), and \\( \\phi_2 \\).\n\n1. **Type of Graph and Function:**\n- **Graph Type:** Time-domain waveform.\n- **Function:** Depicts clock signal phases controlling switching in a multi-stage comparator circuit.\n\n2. **Axes Labels and Units:**\n- **Horizontal Axis:** Represents time, with implied consistent time intervals.\n- **Vertical Axis:** Represents clock signal states (high or low), typically in digital logic levels (e.g., 0V for low, Vcc for high).\n\n3. **Overall Behavior and Trends:**\n- Each waveform displays a rectangular shape, typical of digital clock signals, alternating between high and low states.\n- The waveforms are staggered, indicating different timings for each clock phase.\n- \\( \\phi_1 \\) and \\( \\phi_2 \\) have similar periods but are not synchronized, with \\( \\phi_2 \\) starting low while \\( \\phi_1 \\) starts high.\n- \\( \\phi_1' \\) and \\( \\phi_1'' \\) are staggered versions of \\( \\phi_1 \\), indicating sequential clock phases.\n\n4. **Key Features and Technical Details:**\n- The staggered nature indicates sequential switching in the circuit.\n- Timing differences between phases are crucial for the comparator's proper operation, ensuring correct stage triggering.\n\n5. **Annotations and Specific Data Points:**\n- No specific numerical values or annotations are provided, but timing relationships are visually clear.\n- The sequence and duration of high and low states are essential for the clocking mechanism, aiming to minimize clock feedthrough errors.\n\nFig. 10.11 (a) A multi-stage comparator for eliminating clock feedthrough errors, with (b) the corresponding clock waveforms.\n\nIn a variant of this multi-stage approach [Poujois, 1978], the first stage was not reset. Instead, the first stage's input offset voltage was cancelled by storing it on coupling capacitors between the first and second stages during reset mode. This method is detailed in Section 10.5.\n\nimage_name:Fig. 10.12\ndescription:A multi-stage comparator circuit designed to minimize clock feedthrough errors. It includes coupling capacitors to store the first stage's input offset voltage during reset mode. The circuit features two sequential operational amplifiers with capacitive coupling between stages.\n\nFig. 10.12 Shows the first stage of the comparator in Fig. 10.11 during charge-injection.\n\n#### EXAMPLE 10.4\n\nGiven capacitors of 0.1 pF, transistor sizes of $\\mathrm{W} / \\mathrm{L}=4 \\mu \\mathrm{~m} / 0.2 \\mu \\mathrm{~m}$, $\\mathrm{C}_{\\mathrm{ox}}=8.5 \\mathrm{fF} /(\\mu \\mathrm{m})^{2}$, $\\mathrm{L}_{\\mathrm{ov}}=0.04 \\mu \\mathrm{~m}$, $\\mathrm{~V}_{\\mathrm{tn}}=0.45 \\mathrm{~V}$, $\\mathrm{V}_{\\mathrm{DD}}=2 \\mathrm{~V}$, and each stage having a gain of 20, determine the input-offset voltage error caused by the third stage's clock feedthrough when it exits reset mode.\n\n#### Solution\n\nThe values are the same as in Example 10.3. Thus, the charge-injection at the third stage's inverting input is -56 mV, as previously found. The input signal needed to counter this 56 mV is given by\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{V}_{\\mathrm{in}}=\\frac{56 \\mathrm{mV}}{\\mathrm{~A}_{1} \\mathrm{~A}_{2}}=140 \\mu \\mathrm{~V} \\tag{10.9}\n\\end{equation*}\n$$\n\nTherefore, the equivalent input-offset voltage is $140 \\mu \\mathrm{~V}$, significantly better than the 56 mV resolution in Example 10.3."
},
{
    "text": "The most straightforward method to mitigate errors from charge-injection is by employing larger capacitors. In our prior example, capacitors around 10 pF ensure that clock-feedthrough errors are roughly 0.5 mV. However, such substantial capacitance demands a significant silicon area. Additionally, integrated capacitors exhibit parasitic capacitances between their terminals and the substrate, which can be about 20% of the actual capacitor size. Consequently, a parasitic capacitance of around 2 pF would need to be driven by the input circuits, significantly slowing them down.\n\nimage_name:Fig. 10.10\ndescription:A fully differential, single-stage, switched-capacitor comparator circuit. It employs a fully differential design to minimize charge-injection errors. The reset switches can be linked to a common-mode voltage reference instead of ground.\n\nFig. 10.10 Illustrates a fully differential, single-stage, switched-capacitor comparator.\nAnother strategy to reduce charge-injection errors is using fully differential design techniques for comparators, akin to those often used in opamps. A basic example of a one-stage, switched-capacitor, fully differential comparator is depicted in Fig. 10.10. Note that the ground connections to the reset switches $\\varphi_{1}$ in Fig. 10.10 can be substituted with a common-mode voltage reference situated midway between the analog supplies. Ideally, when the comparator exits reset mode, the clock feedthrough of reset switch $Q_{3 a}$ matches that of $Q_{3 b}$. In this scenario, the common-mode voltage may slightly vary, but the differential input voltage remains unaffected. The only errors now stem from mismatches in the clock feedthrough of the two switches, which are typically at least ten times smaller than in a single-ended configuration. For this reason, nearly all contemporary integrated comparators adopt fully differential design techniques.\n\nA third approach, which can be combined with fully differential design techniques, involves implementing a multi-stage comparator [Poujois, 1978; Vittoz, 1985]. In this method, the clock feedthrough of the first stage is stored on coupling capacitors between the first and second stages, thereby nullifying its impact. Similarly, the clock feedthrough of the second stage can be stored on coupling capacitors between the second and third stages, and so on. Although this technique is usually employed with fully differential configurations, we will explain it using single-ended configurations for simplicity. Consider the three-stage comparator shown in Fig. 10.11(a), along with the corresponding clock waveforms in Fig. 10.11(b). Focus on the moment when $\\phi_{1}^{\\prime}$ drops and the first-stage switch experiences charge-injection. Figure 10.12 demonstrates this situation, including the parasitic capacitances of the first-stage switch. When $\\phi_{1}^{\\prime}$ drops, $Q_{1}$ injects charge into both the inverting input and the output of the first stage via parasitic capacitors $C_{p 1}$ and $C_{p 2}$, respectively. The charge injected at the first stage output results in only a temporary glitch. The charge injected at the inverting input causes this node to become negative. The extent of this negative voltage is determined using the previously described analysis method. Assume this value is in the tens of millivolts, as calculated in Example 10.3. After the inverting input becomes negative, the first stage's output becomes positive by an amount equal to the negative transition of the inverting input multiplied by the first stage's gain. However, at this point, $\\phi_{1}^{\\prime \\prime}$ is still high. Thus, the second stage remains in reset mode, and $\\mathrm{C}_{2}$ charges up to the output error caused by the first stage's clock feedthrough, thereby eliminating its effect. Similarly, when $\\phi_{1}^{\\prime \\prime}$ turns off and the second stage transitions from closed-loop reset mode to open-loop comparison mode, the third stage is still in reset mode, and the second stage's clock feedthrough is stored on coupling capacitor $\\mathrm{C}_{3}$. Finally, when the third stage turns off, its charge-injection is not cancelled. However, the error it introduces in resolving an input voltage across all three stages is minimal, equal to the voltage transition at the third stage's inverting input divided by the negative of the gains of the first two stages (i.e., this is the input voltage needed to counteract the third stage's clock feedthrough upon exiting reset mode).\n\nimage_name:(a)\ndescription:A multi-stage comparator circuit designed to eliminate clock feedthrough errors. It comprises three stages, each with an operational amplifier and coupling capacitors. The circuit employs multiple clock phases to control the switches, enabling the cancellation of input offset voltages and minimizing errors during transitions.\n\nimage_name:(b)\ndescription:The graph labeled \"(b)\" depicts time-domain waveforms representing clock signals used in a multi-stage comparator circuit. It shows four distinct waveforms, each corresponding to a different clock phase: \\( \\phi_1 \\), \\( \\phi_1' \\), \\( \\phi_1'' \\), and \\( \\phi_2 \\).\n\n1. **Type of Graph and Function:**\n- **Graph Type:** Time-domain waveform.\n- **Function:** Represents clock signal phases controlling the switching in a multi-stage comparator circuit.\n\n2. **Axes Labels and Units:**\n- **Horizontal Axis:** Represents time, with implied consistent time intervals.\n- **Vertical Axis:** Represents the logical state of the clock signals (high or low), typically in digital logic levels (e.g., 0V for low, Vcc for high).\n\n3. **Overall Behavior and Trends:**\n- Each waveform displays a rectangular shape, typical of digital clock signals, alternating between high and low states.\n- The waveforms are staggered, indicating different timing for each clock phase.\n- \\( \\phi_1 \\) and \\( \\phi_2 \\) have similar periods but are not synchronized, with \\( \\phi_2 \\) starting low while \\( \\phi_1 \\) starts high.\n- \\( \\phi_1' \\) and \\( \\phi_1'' \\) are staggered versions of \\( \\phi_1 \\), indicating sequential clock phases.\n\n4. **Key Features and Technical Details:**\n- The staggered nature of the waveforms suggests sequential switching operations in the circuit.\n- The timing differences between the phases are crucial for the comparator's proper operation, ensuring each stage is triggered at the correct time.\n\n5. **Annotations and Specific Data Points:**\n- No specific numerical values or annotations are provided, but the timing relationships are visually clear.\n- The sequence and duration of the high and low states are essential for the clocking mechanism of the multi-stage comparator circuit, aiming to minimize clock feedthrough errors.\n\nFig. 10.11 (a) A multi-stage comparator for eliminating clock feedthrough errors, with (b) the corresponding clock waveforms.\n\nIn a variant of this multi-stage approach [Poujois, 1978], the first stage was not reset. However, the input offset voltage of the first stage was still neutralized by storing it on coupling capacitors between the first and second stages during a reset mode. This method is detailed in Section 10.5.\n\nimage_name:Fig. 10.12\ndescription:A multi-stage comparator circuit designed to minimize clock feedthrough errors. It includes coupling capacitors to store the first stage's input offset voltage during a reset mode. The circuit features two operational amplifiers in sequence, with capacitors providing coupling between stages.\n\nFig. 10.12 Shows the first stage of the comparator in Fig. 10.11 when it is injecting charge.\n\n#### EXAMPLE 10.4\n\nAssume all capacitors are 0.1 pF, transistor sizes are $\\mathrm{W} / \\mathrm{L}=4 \\mu \\mathrm{~m} / 0.2 \\mu \\mathrm{~m}$, $\\mathrm{C}_{\\mathrm{ox}}=8.5 \\mathrm{fF} /(\\mu \\mathrm{m})^{2}$, $\\mathrm{L}_{\\mathrm{ov}}=0.04 \\mu \\mathrm{~m}$, $\\mathrm{~V}_{\\mathrm{tn}}=0.45 \\mathrm{~V}$, and $\\mathrm{V}_{\\mathrm{DD}}=2 \\mathrm{~V}$, with each stage having a gain of 20. What is the input-offset voltage error caused by the clock feedthrough of the third stage when it exits reset mode?\n\n#### Solution\n\nThe values used are the same as those in Example 10.3. Therefore, the charge-injection at the inverting input of the third stage is identical to that found in Example 10.3, or -56 mV. The input signal required to counter this 56 mV is given by\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{V}_{\\mathrm{in}}=\\frac{56 \\mathrm{mV}}{\\mathrm{~A}_{1} \\mathrm{~A}_{2}}=140 \\mu \\mathrm{~V} \\tag{10.9}\n\\end{equation*}\n$$\n\nThus, the equivalent input-offset voltage is $140 \\mu \\mathrm{~V}$, significantly better than the 56 mV resolution in Example 10.3."
},
{
    "text": "The most straightforward method to mitigate errors stemming from charge-injection is to employ larger capacitors. For instance, in our earlier example, capacitors around 10 pF ensure that clock-feedthrough errors are roughly 0.5 mV. However, such substantial capacitance necessitates a significant silicon area. Additionally, integrated capacitors exhibit parasitic capacitances between their terminals and the substrate, which might be about 20% of the capacitor's size. Consequently, a parasitic capacitance of around 2 pF would need to be driven by the input circuits, significantly slowing them down.\n\nimage_name:Fig. 10.10\ndescription:The circuit is a fully differential, single-stage, switched-capacitor comparator. It employs a fully differential design to minimize charge-injection errors. The reset switches can be linked to a common-mode voltage reference instead of ground.\n\nFig. 10.10 A fully differential, single-stage, switched-capacitor comparator.\nAnother strategy to reduce charge-injection errors is to use fully differential design techniques for comparators, akin to those often used for opamps. A basic example of a single-stage, switched-capacitor, fully differential comparator is depicted in Fig. 10.10. Note that the ground connections to the reset switches $\\varphi_{1}$ in Fig. 10.10 can be substituted with a common-mode voltage reference positioned midway between the analog supplies. Ideally, when the comparator exits reset mode, the clock feedthrough of reset switch $Q_{3 a}$ matches that of $Q_{3 b}$. In this scenario, the common-mode voltage may slightly vary, but the differential input voltage remains unaffected. The only errors now arise from mismatches in the clock feedthrough of the two switches, which are typically at least ten times smaller than in a single-ended configuration. For this reason, nearly all modern integrated comparators adopt fully differential design techniques.\n\nA third approach, which can be combined with fully differential design techniques, involves implementing a multi-stage comparator [Poujois, 1978; Vittoz, 1985]. In this design, the clock feedthrough of the first stage is stored on coupling capacitors between the first and second stages, thereby nullifying its effect. Similarly, the clock feedthrough of the second stage can be stored on coupling capacitors between the second and third stages, and so on. Although this technique is typically used with fully differential configurations, we will illustrate it using single-ended configurations for simplicity. Consider the three-stage comparator shown in Fig. 10.11(a), along with the corresponding clock waveforms in Fig. 10.11(b). Focus on the moment when $\\phi_{1}^{\\prime}$ drops and the first-stage switch experiences charge-injection. Figure 10.12 illustrates this scenario, including the parasitic capacitances of the first-stage switch. When $\\phi_{1}^{\\prime}$ drops, $Q_{1}$ injects charge into both the inverting input and the output of the first stage via parasitic capacitors $C_{p 1}$ and $C_{p 2}$, respectively. The charge injected at the first stage output results in only a temporary glitch. The charge injected at the inverting input causes this node to become negative. The extent of this negative voltage shift can be calculated using the previously described analysis method. Assume this shift is in the tens of millivolts, as calculated in Example 10.3. After the inverting input becomes negative, the first stage's output becomes positive by an amount equal to the negative transition of the inverting input multiplied by the first stage's gain. However, at this point, $\\phi_{1}^{\\prime \\prime}$ is still high, keeping the second stage in reset mode. Thus, $\\mathrm{C}_{2}$ charges up to the output error caused by the first stage's clock feedthrough, effectively eliminating its impact. Similarly, when $\\phi_{1}^{\\prime \\prime}$ turns off and the second stage transitions from closed-loop reset to open-loop comparison mode, the third stage remains in reset mode, storing the second stage's clock feedthrough on coupling capacitor $\\mathrm{C}_{3}$. Finally, when the third stage turns off, its charge-injection is not canceled. However, the error it introduces in resolving an input voltage across all three stages is minimal, equivalent to the voltage transition at the third stage's inverting input divided by the negative of the first two stages' gains (i.e., the input voltage needed to counteract the third stage's clock feedthrough upon exiting reset mode).\n\nimage_name:(a)\ndescription:This circuit is a multi-stage comparator designed to eliminate clock feedthrough errors. It comprises three stages, each with an operational amplifier and coupling capacitors. The circuit employs multiple clock phases to control the switches, enabling the cancellation of input offset voltages and minimizing errors during transitions.\nimage_name:(b)\ndescription:The graph labeled \"(b)\" depicts time-domain waveforms representing clock signals used in a multi-stage comparator circuit. It shows four distinct waveforms corresponding to different clock phases: \\( \\phi_1 \\), \\( \\phi_1' \\), \\( \\phi_1'' \\), and \\( \\phi_2 \\).\n\n1. **Type of Graph and Function:**\n- **Graph Type:** Time-domain waveform.\n- **Function:** Represents clock signal phases controlling the switching in a multi-stage comparator circuit.\n\n2. **Axes Labels and Units:**\n- **Horizontal Axis:** Represents time, with implied consistent time intervals.\n- **Vertical Axis:** Represents the logical state of the clock signals (high or low), typically in digital logic levels (e.g., 0V for low, Vcc for high).\n\n3. **Overall Behavior and Trends:**\n- Each waveform displays a rectangular shape, typical of digital clock signals, alternating between high and low states.\n- The waveforms are staggered, indicating different timing for each clock phase.\n- \\( \\phi_1 \\) and \\( \\phi_2 \\) have similar periods but are not synchronized, with \\( \\phi_2 \\) starting low while \\( \\phi_1 \\) starts high.\n- \\( \\phi_1' \\) and \\( \\phi_1'' \\) are staggered versions of \\( \\phi_1 \\), indicating sequential clock phases.\n\n4. **Key Features and Technical Details:**\n- The staggered nature suggests sequential switching operations in the circuit.\n- The timing differences between phases are crucial for the comparator's proper operation, ensuring each stage is triggered at the correct time.\n\n5. **Annotations and Specific Data Points:**\n- No specific numerical values or annotations are provided, but the timing relationships are visually clear.\n- The sequence and duration of the high and low states are essential for the clocking mechanism of the multi-stage comparator circuit, aiming to minimize clock feedthrough errors.\n\nFig. 10.11 (a) A multi-stage comparator for eliminating clock feedthrough errors, with (b) the corresponding clock waveforms.\n\nIn a variant of this multi-stage approach [Poujois, 1978], the first stage was not reset. However, the input offset voltage of the first stage was still neutralized by storing it on coupling capacitors between the first and second stages during reset mode. This method is detailed in Section 10.5.\n\nimage_name:Fig. 10.12\ndescription:This circuit is a multi-stage comparator designed to minimize clock feedthrough errors. It includes coupling capacitors to store the first stage's input offset voltage during reset mode. The circuit features two operational amplifiers in sequence, with capacitors providing coupling between stages.\n\nFig. 10.12 The first stage of the comparator in Fig. 10.11, during charge-injection.\n\n#### EXAMPLE 10.4\n\nGiven that all capacitors are 0.1 pF, transistor sizes are $\\mathrm{W} / \\mathrm{L}=4 \\mu \\mathrm{~m} / 0.2 \\mu \\mathrm{~m}$, $\\mathrm{C}_{\\mathrm{ox}}=8.5 \\mathrm{fF} /(\\mu \\mathrm{m})^{2}$, $\\mathrm{L}_{\\mathrm{ov}}=0.04 \\mu \\mathrm{~m}$, $\\mathrm{~V}_{\\mathrm{tn}}=0.45 \\mathrm{~V}$, $\\mathrm{V}_{\\mathrm{DD}}=2 \\mathrm{~V}$, and each stage has a gain of 20, determine the input-offset voltage error caused by the clock feedthrough of the third stage when it exits reset mode.\n\n#### Solution\n\nThe values used are the same as those in Example 10.3. Therefore, the charge-injection at the third stage's inverting input is -56 mV, as determined in Example 10.3. The input signal required to counteract this 56 mV is given by\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{V}_{\\mathrm{in}}=\\frac{56 \\mathrm{mV}}{\\mathrm{~A}_{1} \\mathrm{~A}_{2}}=140 \\mu \\mathrm{~V} \\tag{10.9}\n\\end{equation*}\n$$\n\nThus, the equivalent input-offset voltage is $140 \\mu \\mathrm{~V}$, significantly better than the 56 mV resolution found in Example 10.3."
},
{
    "text": "The most straightforward method to mitigate errors from charge-injection is by employing larger capacitors. In our prior example, capacitors around 10 pF ensure that clock-feedthrough errors are roughly 0.5 mV. However, such substantial capacitance necessitates a significant silicon area. Additionally, integrated capacitors exhibit parasitic capacitances between their terminals and the substrate, which can be about 20% of the realized capacitor's size. Consequently, a parasitic capacitance of around 2 pF would need to be driven by the input circuits, significantly slowing them down.\n\nimage_name:Fig. 10.10\ndescription:A fully differential, single-stage, switched-capacitor comparator circuit. It employs a fully differential design to minimize charge injection errors. The reset switches can be linked to a common-mode voltage reference instead of ground.\n\nFig. 10.10 illustrates a fully differential, single-stage, switched-capacitor comparator.\nAn alternative strategy to reduce charge-injection errors involves using fully differential design techniques for comparators, akin to those commonly used for opamps. A basic example of a one-stage, switched-capacitor, fully differential comparator is depicted in Fig. 10.10. Note that the ground connections to the reset switches $\\varphi_{1}$ in Fig. 10.10 can be substituted with a common-mode voltage reference situated midway between the analog supplies. Ideally, when the comparator exits reset mode, the clock feedthrough of reset switch $Q_{3 a}$ matches that of $Q_{3 b}$. In this scenario, the common-mode voltage may experience slight variations, but the differential input voltage remains unaffected. The only remaining errors stem from mismatches in the clock feedthrough of the two switches, which are typically at least ten times smaller than in single-ended configurations. Consequently, nearly all modern integrated comparators adopt fully differential design techniques.\n\nA third option, which can be combined with fully differential designs, is to implement a multi-stage comparator [Poujois, 1978; Vittoz, 1985]. In this approach, the clock feedthrough of the first stage is stored on coupling capacitors between the first and second stages, effectively neutralizing its impact. Similarly, the clock feedthrough of the second stage can be stored on coupling capacitors between the second and third stages, and so forth. Although this technique is usually employed with fully differential configurations, we will simplify the explanation using single-ended configurations. Consider the three-stage comparator shown in Fig. 10.11(a), along with the corresponding clock waveforms in Fig. 10.11(b). Focus on the moment when $\\phi_{1}^{\\prime}$ drops and the first-stage switch experiences charge-injection. Figure 10.12 depicts this situation, including the parasitic capacitances of the first-stage switch. When $\\phi_{1}^{\\prime}$ drops, $Q_{1}$ injects charge into both the inverting input and the output of the first stage via parasitic capacitors $C_{p 1}$ and $C_{p 2}$, respectively. The charge injected at the first stage output results in only a temporary glitch. The charge injected at the inverting input causes this node to become negative. The extent of this negative voltage shift is determined using the previously described analysis method. Assume this shift is in the range of tens of millivolts, as calculated in Example 10.3. After the inverting input turns negative, the first stage's output becomes positive by an amount equal to the negative transition of the inverting input multiplied by the first stage's gain. However, at this point, $\\phi_{1}^{\\prime \\prime}$ is still high. Thus, the second stage remains in reset mode, and $\\mathrm{C}_{2}$ charges to the output error caused by the first stage's clock feedthrough, thereby nullifying its effect. Similarly, when $\\phi_{1}^{\\prime \\prime}$ deactivates and the second stage transitions from closed-loop reset to open-loop comparison mode, the third stage is still resetting, and the second stage's clock feedthrough is stored on coupling capacitor $\\mathrm{C}_{3}$. Finally, when the third stage deactivates, its charge-injection is not canceled. However, the error it introduces in resolving an input voltage across all three stages is minimal, equivalent to the voltage transition at the third stage's inverting input divided by the negative gains of the first two stages (i.e., the input voltage required to counteract the third stage's clock feedthrough upon exiting reset mode).\n\nimage_name:(a)\ndescription:A multi-stage comparator circuit designed to eliminate clock feedthrough errors. It comprises three stages, each with an operational amplifier and coupling capacitors. The circuit employs multiple clock phases to control the switches, enabling the cancellation of input offset voltages and minimizing errors during transitions.\n\nimage_name:(b)\ndescription:The graph labeled \"(b)\" depicts time-domain waveforms representing clock signals used in a multi-stage comparator circuit. It shows four distinct waveforms corresponding to different clock phases: \\( \\phi_1 \\), \\( \\phi_1' \\), \\( \\phi_1'' \\), and \\( \\phi_2 \\).\n\n1. **Type of Graph and Function:**\n- **Graph Type:** Time-domain waveform.\n- **Function:** Illustrates clock signal phases controlling the switching in a multi-stage comparator circuit.\n\n2. **Axes Labels and Units:**\n- **Horizontal Axis:** Represents time, with implied consistent time intervals but no specific units marked.\n- **Vertical Axis:** Indicates the logical state of the clock signals (high or low), typically in digital logic levels (e.g., 0V for low, Vcc for high), but no specific voltage levels are indicated.\n\n3. **Overall Behavior and Trends:**\n- Each waveform displays a rectangular shape, typical of digital clock signals, alternating between high and low states.\n- The waveforms are staggered, indicating different timing for each clock phase.\n- \\( \\phi_1 \\) and \\( \\phi_2 \\) have similar periods but are not synchronized, with \\( \\phi_2 \\) starting low while \\( \\phi_1 \\) starts high.\n- \\( \\phi_1' \\) and \\( \\phi_1'' \\) are staggered versions of \\( \\phi_1 \\), reflecting sequential clock phases.\n\n4. **Key Features and Technical Details:**\n- The staggered nature of the waveforms suggests sequential switching operations in the circuit.\n- The timing differences between phases are crucial for the comparator's proper operation, ensuring each stage is triggered at the correct time.\n\n5. **Annotations and Specific Data Points:**\n- No specific numerical values or annotations are provided, but the timing relationships are visually evident.\n- The sequence and duration of the high and low states are essential for the clocking mechanism of the multi-stage comparator circuit, aimed at minimizing clock feedthrough errors.\n\nFig. 10.11 (a) A multi-stage comparator for eliminating clock feedthrough errors, with (b) the corresponding clock waveforms.\n\nIn a variant of this multi-stage approach [Poujois, 1978], the first stage was not reset. However, the input offset voltage of the first stage was still neutralized by storing it on coupling capacitors between the first and second stages during a reset mode. This method is detailed in Section 10.5.\n\nimage_name:Fig. 10.12\ndescription:A multi-stage comparator circuit designed to minimize clock feedthrough errors. It includes coupling capacitors to store the first stage's input offset voltage during a reset mode. The circuit features two operational amplifiers in sequence, with capacitors providing coupling between stages.\n\nFig. 10.12 shows the first stage of the comparator in Fig. 10.11 when it is injecting charge.\n\n#### EXAMPLE 10.4\n\nGiven that all capacitors are 0.1 pF, transistor sizes are $\\mathrm{W} / \\mathrm{L}=4 \\mu \\mathrm{~m} / 0.2 \\mu \\mathrm{~m}$, $\\mathrm{C}_{\\mathrm{ox}}=8.5 \\mathrm{fF} /(\\mu \\mathrm{m})^{2}$, $\\mathrm{L}_{\\mathrm{ov}}=0.04 \\mu \\mathrm{~m}$, $\\mathrm{~V}_{\\mathrm{tn}}=0.45 \\mathrm{~V}$, $\\mathrm{V}_{\\mathrm{DD}}=2 \\mathrm{~V}$, and each stage has a gain of 20, determine the input-offset voltage error caused by the clock feedthrough of the third stage when it exits reset mode.\n\n#### Solution\n\nThe parameters used are the same as those in Example 10.3. Therefore, the charge-injection at the inverting input of the third stage is identical to that found in Example 10.3, or -56 mV. The input signal required to counteract this 56 mV is given by\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{V}_{\\mathrm{in}}=\\frac{56 \\mathrm{mV}}{\\mathrm{~A}_{1} \\mathrm{~A}_{2}}=140 \\mu \\mathrm{~V} \\tag{10.9}\n\\end{equation*}\n$$\n\nThus, the equivalent input-offset voltage is $140 \\mu \\mathrm{~V}$, significantly better than the 56 mV resolution in Example 10.3."
},
{
    "text": "To minimize errors from charge-injection, employing larger capacitors is the simplest solution. For instance, capacitors around 10 pF ensure that clock-feedthrough errors are roughly 0.5 mV. However, such substantial capacitance demands a significant silicon area. Additionally, integrated capacitors exhibit parasitic capacitances between their terminals and the substrate, which can be about 20% of the actual capacitor size. Consequently, a parasitic capacitance of approximately 2 pF would need to be driven by the input circuits, significantly slowing them down.\n\nimage_name:Fig. 10.10\ndescription:A fully differential, single-stage, switched-capacitor comparator circuit. It employs a fully differential design to reduce charge-injection errors. The reset switches can be linked to a common-mode voltage reference instead of ground.\n\nFig. 10.10 Illustrates a fully differential, single-stage, switched-capacitor comparator.\nAnother method to mitigate charge-injection errors is using fully differential design techniques for comparators, akin to those used in opamps. A basic example of a one-stage, switched-capacitor, fully differential comparator is depicted in Fig. 10.10. Note that the ground connections to the reset switches $\\varphi_{1}$ in Fig. 10.10 can be substituted with a common-mode voltage reference situated midway between the analog supplies. Ideally, when the comparator exits reset mode, the clock feedthrough of reset switch $Q_{3 a}$ matches that of $Q_{3 b}$. In this scenario, the common-mode voltage may experience minor changes, but the differential input voltage remains unaffected. The only errors now arise from mismatches in the clock feedthrough of the two switches, typically at least ten times smaller than in a single-ended configuration. Consequently, nearly all contemporary integrated comparators adopt fully differential design techniques.\n\nA third approach, which can be combined with fully differential designs, involves implementing a multi-stage comparator [Poujois, 1978; Vittoz, 1985]. Here, the clock feedthrough of the first stage is stored on coupling capacitors between the first and second stages, thereby nullifying its impact. Similarly, the clock feedthrough of the second stage can be stored on capacitors between the second and third stages, and so on. Although this technique is usually paired with fully differential configurations, we will explain it using single-ended configurations for simplicity. Consider the three-stage comparator shown in Fig. 10.11(a), along with the corresponding clock waveforms in Fig. 10.11(b). Focus on the moment when $\\phi_{1}^{\\prime}$ drops and the first-stage switch experiences charge-injection. Figure 10.12 depicts this scenario, including the parasitic capacitances of the first-stage switch. When $\\phi_{1}^{\\prime}$ drops, $Q_{1}$ injects charge into both the inverting input and the output of the first stage via parasitic capacitors $C_{p 1}$ and $C_{p 2}$, respectively. The charge injected at the first stage output results in a temporary glitch. The charge injected at the inverting input causes this node to become negative. The extent of this negative voltage shift is determined using the previously described analysis method. Assume this shift is in the tens of millivolts, as calculated in Example 10.3. After the inverting input becomes negative, the first stage's output becomes positive by an amount equal to the negative transition of the inverting input multiplied by the first stage's gain. However, at this point, $\\phi_{1}^{\\prime \\prime}$ remains high. Thus, the second stage is still in reset mode, and $\\mathrm{C}_{2}$ charges to the output error caused by the first stage's clock feedthrough, thereby negating its effect. Similarly, when $\\phi_{1}^{\\prime \\prime}$ turns off and the second stage transitions from closed-loop reset to open-loop comparison mode, the third stage is still resetting, and the second stage's clock feedthrough is stored on coupling capacitor $\\mathrm{C}_{3}$. Finally, when the third stage deactivates, its charge-injection is not canceled. However, the error it introduces in resolving the input voltage across all three stages is minimal, equivalent to the voltage transition at the third stage's inverting input divided by the negative gains of the first two stages (i.e., the input voltage needed to counteract the third stage's clock feedthrough upon exiting reset mode).\n\nimage_name:(a)\ndescription:A multi-stage comparator circuit designed to eliminate clock feedthrough errors. It comprises three stages, each with an operational amplifier and coupling capacitors. The circuit employs multiple clock phases to control the switches, enabling the cancellation of input offset voltages and reducing errors during transitions.\n\nimage_name:(b)\ndescription:The graph labeled \"(b)\" shows time-domain waveforms representing clock signals used in a multi-stage comparator circuit. It features four distinct waveforms corresponding to different clock phases: \\( \\phi_1 \\), \\( \\phi_1' \\), \\( \\phi_1'' \\), and \\( \\phi_2 \\).\n\n1. **Type of Graph and Function:**\n- **Graph Type:** Time-domain waveform.\n- **Function:** Represents clock signal phases for controlling switching in a multi-stage comparator circuit.\n\n2. **Axes Labels and Units:**\n- **Horizontal Axis:** Represents time, with implied consistent time intervals.\n- **Vertical Axis:** Represents the logical state of the clock signals (high or low), typically in digital logic levels (e.g., 0V for low, Vcc for high).\n\n3. **Overall Behavior and Trends:**\n- Each waveform displays a rectangular shape, typical of digital clock signals, alternating between high and low states.\n- The waveforms are staggered, indicating different timing for each clock phase.\n- \\( \\phi_1 \\) and \\( \\phi_2 \\) have similar periods but are not synchronized, with \\( \\phi_2 \\) starting low while \\( \\phi_1 \\) starts high.\n- \\( \\phi_1' \\) and \\( \\phi_1'' \\) are staggered versions of \\( \\phi_1 \\), indicating sequential clock phases.\n\n4. **Key Features and Technical Details:**\n- The staggered nature suggests sequential switching operations in the circuit.\n- The timing differences between phases are crucial for the comparator's proper operation, ensuring each stage is triggered at the correct time.\n\n5. **Annotations and Specific Data Points:**\n- No specific numerical values or annotations are provided, but the timing relationships are visually clear.\n- The sequence and duration of the high and low states are essential for the clocking mechanism of the multi-stage comparator circuit, aiming to minimize clock feedthrough errors.\n\nFig. 10.11 (a) A multi-stage comparator for eliminating clock feedthrough errors, with (b) the corresponding clock waveforms.\n\nIn a variant of this multi-stage approach [Poujois, 1978], the first stage was not reset. However, the input offset voltage of the first stage was still neutralized by storing it on coupling capacitors between the first and second stages during a reset mode. This method is detailed in Section 10.5.\n\nimage_name:Fig. 10.12\ndescription:A multi-stage comparator circuit designed to minimize clock feedthrough errors. It includes coupling capacitors to store the first stage's input offset voltage during a reset mode. The circuit features two operational amplifiers in sequence, with capacitors providing coupling between stages.\n\nFig. 10.12 Shows the first stage of the comparator in Fig. 10.11 when it is injecting charge.\n\n#### EXAMPLE 10.4\n\nGiven that all capacitors are 0.1 pF, transistor sizes are $\\mathrm{W} / \\mathrm{L}=4 \\mu \\mathrm{~m} / 0.2 \\mu \\mathrm{~m}$, $\\mathrm{C}_{\\mathrm{ox}}=8.5 \\mathrm{fF} /(\\mu \\mathrm{m})^{2}$, $\\mathrm{L}_{\\mathrm{ov}}=0.04 \\mu \\mathrm{~m}$, $\\mathrm{~V}_{\\mathrm{tn}}=0.45 \\mathrm{~V}$, $\\mathrm{V}_{\\mathrm{DD}}=2 \\mathrm{~V}$, and each stage has a gain of 20, determine the input-offset voltage error caused by the clock feedthrough of the third stage when it exits reset mode.\n\n#### Solution\n\nThe values used are the same as those in Example 10.3. Therefore, the charge-injection at the inverting input of the third stage is -56 mV, as calculated in Example 10.3. The input signal required to counteract this 56 mV is given by\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{V}_{\\mathrm{in}}=\\frac{56 \\mathrm{mV}}{\\mathrm{~A}_{1} \\mathrm{~A}_{2}}=140 \\mu \\mathrm{~V} \\tag{10.9}\n\\end{equation*}\n$$\n\nThus, the equivalent input-offset voltage is $140 \\mu \\mathrm{~V}$, significantly better than the 56 mV resolution in Example 10.3."
},
{
    "text": "The most straightforward method to mitigate errors from charge-injection is by employing larger capacitors. In our prior example, capacitors around 10 pF ensure that clock-feedthrough errors are roughly 0.5 mV. However, such significant capacitance necessitates a substantial silicon area. Additionally, integrated capacitors exhibit parasitic capacitances between their terminals and the substrate, which can be about 20% of the actual capacitor size. Consequently, a parasitic capacitance of around 2 pF would need to be driven by the input circuits, significantly slowing them down.\n\nimage_name:Fig. 10.10\ndescription:A fully differential, single-stage, switched-capacitor comparator circuit. It employs a fully differential design to minimize charge-injection errors. The reset switches can be linked to a common-mode voltage reference instead of ground.\n\nFig. 10.10 Illustrates a fully differential, single-stage, switched-capacitor comparator.\nAn alternative strategy to reduce charge-injection errors is using fully differential design techniques for comparators, akin to those frequently used in opamps. A basic example of a one-stage, switched-capacitor, fully differential comparator is depicted in Fig. 10.10. Note that the ground connections to the reset switches $\\varphi_{1}$ in Fig. 10.10 can be substituted with a common-mode voltage reference positioned midway between the analog supplies. Ideally, when the comparator exits reset mode, the clock feedthrough of reset switch $Q_{3 a}$ matches that of $Q_{3 b}$. In this scenario, the common-mode voltage may experience minor fluctuations, but the differential input voltage remains unaffected. The only errors now arise from mismatches in the clock feedthrough of the two switches, which are typically at least ten times smaller than in a single-ended configuration. For this reason, nearly all contemporary integrated comparators adopt fully differential design techniques.\n\nA third approach, which can be combined with fully differential design techniques, involves implementing a multi-stage comparator [Poujois, 1978; Vittoz, 1985]. In this method, the clock feedthrough of the first stage is stored on coupling capacitors between the first and second stages, thereby nullifying its impact. Similarly, the clock feedthrough of the second stage can be stored on coupling capacitors between the second and third stages, and so on. Although this technique is usually employed alongside fully differential configurations, we will explain it using single-ended configurations for simplicity. Consider the three-stage comparator shown in Fig. 10.11(a), along with the corresponding clock waveforms in Fig. 10.11(b). Focus on the moment when $\\phi_{1}^{\\prime}$ drops and the first-stage switch experiences charge-injection. Figure 10.12 illustrates this scenario, including the parasitic capacitances of the first-stage switch. When $\\phi_{1}^{\\prime}$ drops, $Q_{1}$ injects charge into both the inverting input and the output of the first stage via parasitic capacitors $C_{p 1}$ and $C_{p 2}$, respectively. The charge injected at the first stage output results in only a temporary glitch. The charge injected at the inverting input causes this node to become negative. The extent of this negative voltage shift is determined using the previously described analysis method. Assume this shift is in the tens of millivolts, as calculated in Example 10.3. After the inverting input becomes negative, the first stage's output becomes positive by an amount equal to the negative transition of the inverting input multiplied by the first stage's gain. However, at this point, $\\phi_{1}^{\\prime \\prime}$ is still high. Thus, the second stage remains in reset mode, and $\\mathrm{C}_{2}$ charges up to the output error caused by the first stage's clock feedthrough, thereby eliminating its effect. Similarly, when $\\phi_{1}^{\\prime \\prime}$ turns off and the second stage transitions from closed-loop reset mode to open-loop comparison mode, the third stage is still in reset mode, and the second stage's clock feedthrough is stored on coupling capacitor $\\mathrm{C}_{3}$. Finally, when the third stage turns off, its charge-injection is not canceled. However, the error it introduces in resolving an input voltage across all three stages is minimal, equivalent to the voltage transition at the inverting input of the third stage divided by the negative of the gains of the first two stages (i.e., this is the input voltage required to counteract the third stage's clock feedthrough upon exiting reset mode).\n\nimage_name:(a)\ndescription:A multi-stage comparator circuit designed to eliminate clock feedthrough errors. It comprises three stages, each with an operational amplifier and coupling capacitors. The circuit employs multiple clock phases to control the switches, enabling the cancellation of input offset voltages and minimizing errors during transitions.\n\nimage_name:(b)\ndescription:The graph labeled \"(b)\" depicts time-domain waveforms representing clock signals used in a multi-stage comparator circuit. It shows four distinct waveforms, each corresponding to a different clock phase: \\( \\phi_1 \\), \\( \\phi_1' \\), \\( \\phi_1'' \\), and \\( \\phi_2 \\).\n\n1. **Type of Graph and Function:**\n- **Graph Type:** Time-domain waveform.\n- **Function:** Represents clock signal phases for controlling switching in a multi-stage comparator circuit.\n\n2. **Axes Labels and Units:**\n- **Horizontal Axis:** Represents time, with implied consistent time intervals.\n- **Vertical Axis:** Represents the logical state of the clock signals (high or low), typically in digital logic levels (e.g., 0V for low, Vcc for high).\n\n3. **Overall Behavior and Trends:**\n- Each waveform displays a rectangular shape, typical of digital clock signals, alternating between high and low states.\n- The waveforms are staggered, indicating different timing for each clock phase.\n- \\( \\phi_1 \\) and \\( \\phi_2 \\) have similar periods but are not synchronized, with \\( \\phi_2 \\) starting low while \\( \\phi_1 \\) starts high.\n- \\( \\phi_1' \\) and \\( \\phi_1'' \\) are staggered versions of \\( \\phi_1 \\), indicating sequential clock phases.\n\n4. **Key Features and Technical Details:**\n- The staggered nature of the waveforms suggests sequential switching operations in the circuit.\n- The timing differences between the phases are crucial for the proper functioning of the comparator, ensuring each stage is triggered at the correct time.\n\n5. **Annotations and Specific Data Points:**\n- No specific numerical values or annotations are provided, but the timing relationships are visually clear.\n- The sequence and duration of the high and low states are essential for the clocking mechanism of the multi-stage comparator circuit, aimed at minimizing clock feedthrough errors.\n\nFig. 10.11 (a) A multi-stage comparator for eliminating clock feedthrough errors, with (b) the corresponding clock waveforms.\n\nIn a variant of this multi-stage approach [Poujois, 1978], the first stage was not reset. However, the input offset voltage of the first stage was still neutralized by storing it on coupling capacitors between the first and second stages during a reset mode. This method is detailed in Section 10.5.\n\nimage_name:Fig. 10.12\ndescription:A multi-stage comparator circuit designed to minimize clock feedthrough errors. It includes coupling capacitors to store the input offset voltage of the first stage during a reset mode. The circuit features two operational amplifiers in sequence, with capacitors providing coupling between stages.\n\nFig. 10.12 The first stage of the comparator in Fig. 10.11, during charge-injection.\n\n#### EXAMPLE 10.4\n\nAssume all capacitors are 0.1 pF, transistor sizes are $\\mathrm{W} / \\mathrm{L}=4 \\mu \\mathrm{~m} / 0.2 \\mu \\mathrm{~m}$, $\\mathrm{C}_{\\mathrm{ox}}=8.5 \\mathrm{fF} /(\\mu \\mathrm{m})^{2}$, $\\mathrm{L}_{\\mathrm{ov}}=0.04 \\mu \\mathrm{~m}$, $\\mathrm{~V}_{\\mathrm{tn}}=0.45 \\mathrm{~V}$, and $\\mathrm{V}_{\\mathrm{DD}}=2 \\mathrm{~V}$, with each stage having a gain of 20. What is the input-offset voltage error caused by the clock feedthrough of the third stage when it exits reset mode?\n\n#### Solution\n\nThe values used are the same as those in Example 10.3. Therefore, the charge-injection at the inverting input of the third stage is identical to that found in Example 10.3, or -56 mV. The input signal required to counteract this 56 mV is given by\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{V}_{\\mathrm{in}}=\\frac{56 \\mathrm{mV}}{\\mathrm{~A}_{1} \\mathrm{~A}_{2}}=140 \\mu \\mathrm{~V} \\tag{10.9}\n\\end{equation*}\n$$\n\nThus, the equivalent input-offset voltage is $140 \\mu \\mathrm{~V}$, significantly better than the 56 mV resolution found in Example 10.3."
},
{
    "text": "The most straightforward method to mitigate errors stemming from charge-injection is to employ larger capacitors. In our prior example, capacitors around 10 pF ensure that clock-feedthrough errors are roughly 0.5 mV. However, such substantial capacitance necessitates a significant silicon area. Additionally, integrated capacitors exhibit parasitic capacitances between their terminals and the substrate, which can be about 20% of the capacitor's size. Consequently, a parasitic capacitance of around 2 pF would need to be driven by the input circuits, significantly slowing them down.\n\nimage_name:Fig. 10.10\ndescription:A fully differential, single-stage, switched-capacitor comparator circuit. It employs a fully differential design to minimize charge-injection errors. The reset switches can be linked to a common-mode voltage reference instead of ground.\n\nFig. 10.10 Illustrates a fully differential, single-stage, switched-capacitor comparator.\nAnother technique to reduce charge-injection errors is to use fully differential design methodologies for comparators, akin to those commonly used in opamps. A basic example of a one-stage, switched-capacitor, fully differential comparator is depicted in Fig. 10.10. Note that the ground connections to the reset switches $\\varphi_{1}$ in Fig. 10.10 can be substituted with a common-mode voltage reference situated midway between the analog supplies. Ideally, when the comparator exits reset mode, the clock feedthrough of reset switch $Q_{3 a}$ matches that of $Q_{3 b}$. In this scenario, the common-mode voltage may experience minor fluctuations, but the differential input voltage remains unaffected. The only residual errors arise from mismatches in the clock feedthrough of the two switches, which are typically at least ten times smaller than in a single-ended configuration. For this reason, nearly all contemporary integrated comparators adopt fully differential design techniques.\n\nA third strategy, which can be combined with fully differential designs, involves implementing a multi-stage comparator [Poujois, 1978; Vittoz, 1985]. In this approach, the clock feedthrough of the first stage is stored on coupling capacitors between the first and second stages, thereby nullifying its impact. Similarly, the clock feedthrough of the second stage can be stored on coupling capacitors between the second and third stages, and so on. Although this technique is typically used alongside fully differential configurations, we will explain it using single-ended configurations for simplicity. Consider the three-stage comparator shown in Fig. 10.11(a), along with the corresponding clock waveforms in Fig. 10.11(b). Focus on the moment when $\\phi_{1}^{\\prime}$ drops and the first-stage switch experiences charge-injection. Fig. 10.12 illustrates this situation, including the parasitic capacitances of the first-stage switch. When $\\phi_{1}^{\\prime}$ drops, $Q_{1}$ injects charge into both the inverting input and the output of the first stage via parasitic capacitors $C_{p 1}$ and $C_{p 2}$, respectively. The charge injected at the first stage output results in only a temporary glitch. The charge injected at the inverting input causes this node to become negative. The extent of this negative voltage shift can be calculated using the previously described analysis method. Assuming this shift is in the tens of millivolts, as calculated in Example 10.3, the output of the first stage then becomes positive by an amount equal to the negative transition of the inverting input multiplied by the first stage's gain. However, at this point, $\\phi_{1}^{\\prime \\prime}$ is still high, keeping the second stage in reset mode. Thus, $\\mathrm{C}_{2}$ charges up to the output error caused by the first stage's clock feedthrough, effectively eliminating its effect. Similarly, when $\\phi_{1}^{\\prime \\prime}$ turns off and the second stage transitions from closed-loop reset to open-loop comparison mode, the third stage remains in reset mode, storing the second stage's clock feedthrough on coupling capacitor $\\mathrm{C}_{3}$. Finally, when the third stage deactivates, its charge-injection is not canceled. However, the error it introduces in resolving an input voltage across all three stages is minimal, equivalent to the voltage transition at the inverting input of the third stage divided by the negative of the gains of the first two stages (i.e., the input voltage required to counteract the third stage's clock feedthrough upon exiting reset mode).\n\nimage_name:(a)\ndescription:A multi-stage comparator circuit designed to eliminate clock feedthrough errors. It comprises three stages, each with an operational amplifier and coupling capacitors. The circuit employs multiple clock phases to control the switches, enabling the cancellation of input offset voltages and minimizing errors during transitions.\n\nimage_name:(b)\ndescription:The graph labeled \"(b)\" depicts time-domain waveforms representing clock signals used in a multi-stage comparator circuit. It shows four distinct waveforms corresponding to different clock phases: \\( \\phi_1 \\), \\( \\phi_1' \\), \\( \\phi_1'' \\), and \\( \\phi_2 \\).\n\n1. **Type of Graph and Function:**\n- **Graph Type:** Time-domain waveform.\n- **Function:** Represents clock signal phases for controlling switching in a multi-stage comparator circuit.\n\n2. **Axes Labels and Units:**\n- **Horizontal Axis:** Represents time, with implied consistent time intervals.\n- **Vertical Axis:** Represents the logical state of the clock signals (high or low), typically in digital logic levels (e.g., 0V for low, Vcc for high).\n\n3. **Overall Behavior and Trends:**\n- Each waveform displays a rectangular shape, typical of digital clock signals, alternating between high and low states.\n- The waveforms are staggered, indicating different timing for each clock phase.\n- \\( \\phi_1 \\) and \\( \\phi_2 \\) have similar periods but are not synchronized, with \\( \\phi_2 \\) starting low while \\( \\phi_1 \\) starts high.\n- \\( \\phi_1' \\) and \\( \\phi_1'' \\) are staggered versions of \\( \\phi_1 \\), indicating sequential clock phases.\n\n4. **Key Features and Technical Details:**\n- The staggered nature indicates sequential switching operations in the circuit.\n- The timing differences between phases are crucial for the comparator's proper operation, ensuring each stage is triggered at the correct time.\n\n5. **Annotations and Specific Data Points:**\n- No specific numerical values or annotations are provided, but the timing relationships are visually clear.\n- The sequence and duration of the high and low states are essential for the clocking mechanism of the multi-stage comparator circuit, aiming to minimize clock feedthrough errors.\n\nFig. 10.11 (a) A multi-stage comparator for eliminating clock feedthrough errors, with (b) the corresponding clock waveforms.\n\nIn a variant of this multi-stage approach [Poujois, 1978], the first stage was not reset. Instead, the input offset voltage of the first stage was still neutralized by storing it on coupling capacitors between the first and second stages during a reset mode. This method is detailed in Section 10.5.\n\nimage_name:Fig. 10.12\ndescription:A multi-stage comparator circuit designed to minimize clock feedthrough errors. It includes coupling capacitors to store the input offset voltage of the first stage during a reset mode. The circuit features two operational amplifiers in sequence, with capacitors providing coupling between stages.\n\nFig. 10.12 The first stage of the comparator in Fig. 10.11, during charge-injection.\n\n#### EXAMPLE 10.4\n\nAssume all capacitors are 0.1 pF, transistor sizes are $\\mathrm{W} / \\mathrm{L}=4 \\mu \\mathrm{~m} / 0.2 \\mu \\mathrm{~m}$, $\\mathrm{C}_{\\mathrm{ox}}=8.5 \\mathrm{fF} /(\\mu \\mathrm{m})^{2}$, $\\mathrm{L}_{\\mathrm{ov}}=0.04 \\mu \\mathrm{~m}$, $\\mathrm{~V}_{\\mathrm{tn}}=0.45 \\mathrm{~V}$, and $\\mathrm{V}_{\\mathrm{DD}}=2 \\mathrm{~V}$, with each stage having a gain of 20. What is the input-offset voltage error caused by the clock feedthrough of the third stage when it exits reset mode?\n\n#### Solution\n\nThe values used are the same as those in Example 10.3. Therefore, the charge-injection at the inverting input of the third stage is -56 mV, as determined in Example 10.3. The input signal required to counteract this 56 mV is given by\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{V}_{\\mathrm{in}}=\\frac{56 \\mathrm{mV}}{\\mathrm{~A}_{1} \\mathrm{~A}_{2}}=140 \\mu \\mathrm{~V} \\tag{10.9}\n\\end{equation*}\n$$\n\nThus, the equivalent input-offset voltage is $140 \\mu \\mathrm{~V}$, significantly better than the 56 mV resolution found in Example 10.3."
},
{
    "text": "To minimize errors from charge-injection, employing larger capacitors is the simplest method. In our prior example, capacitors around 10 pF ensure that clock-feedthrough errors are roughly 0.5 mV. However, such significant capacitance demands a substantial silicon area. Additionally, integrated capacitors exhibit parasitic capacitances between their terminals and the substrate, which can be about 20% of the capacitor's size. Consequently, a parasitic capacitance of around 2 pF would need to be driven by the input circuits, significantly slowing them down.\n\nimage_name:Fig. 10.10\ndescription:A fully differential, single-stage, switched-capacitor comparator circuit. It employs a fully differential design to reduce charge-injection errors. The reset switches can be connected to a common-mode voltage reference instead of ground.\n\nFig. 10.10 Illustrates a fully differential, single-stage, switched-capacitor comparator.\nAnother strategy to mitigate charge-injection errors is to use fully differential design techniques for comparators, akin to those often used in opamps. A basic example of a one-stage, switched-capacitor, fully differential comparator is depicted in Fig. 10.10. Note that the ground connections to the reset switches $\\varphi_{1}$ in Fig. 10.10 can be substituted with a common-mode voltage reference situated midway between the analog supplies. Ideally, when the comparator exits reset mode, the clock feedthrough of reset switch $Q_{3 a}$ matches that of $Q_{3 b}$. In this scenario, the common-mode voltage may slightly vary, but the differential input voltage remains unaffected. The only errors now stem from mismatches in the clock feedthrough of the two switches, which are typically at least ten times smaller than in a single-ended configuration. Consequently, nearly all modern integrated comparators adopt fully differential design techniques.\n\nA third approach, which can complement fully differential designs, is to implement a multi-stage comparator [Poujois, 1978; Vittoz, 1985]. Here, the clock feedthrough of the first stage is stored on coupling capacitors between the first and second stages, effectively nullifying its impact. Similarly, the clock feedthrough of the second stage can be stored on coupling capacitors between the second and third stages, and so on. Although this technique is usually paired with fully differential configurations, we will explain it using single-ended configurations for simplicity. Consider the three-stage comparator shown in Fig. 10.11(a), along with the corresponding clock waveforms in Fig. 10.11(b). Focus on the moment when $\\phi_{1}^{\\prime}$ drops and the first-stage switch experiences charge-injection. Fig. 10.12 depicts this situation, including the parasitic capacitances of the first-stage switch. When $\\phi_{1}^{\\prime}$ drops, $Q_{1}$ injects charge into both the inverting input and the output of the first stage via parasitic capacitors $C_{p 1}$ and $C_{p 2}$, respectively. The charge injected at the first stage output causes only a temporary glitch. The charge injected at the inverting input makes this node negative. The extent of this negative voltage is determined using the previously described analysis method. Assume this voltage shift is in the tens of millivolts, as calculated in Example 10.3. After the inverting input turns negative, the first stage's output becomes positive by an amount equal to the negative transition of the inverting input multiplied by the first stage's gain. However, at this point, $\\phi_{1}^{\\prime \\prime}$ is still high. Thus, the second stage remains in reset, and $\\mathrm{C}_{2}$ charges to the output error caused by the first stage's clock feedthrough, eliminating its effect. Similarly, when $\\phi_{1}^{\\prime \\prime}$ deactivates and the second stage shifts from closed-loop reset to open-loop comparison, the third stage is still in reset, storing the second stage's clock feedthrough on coupling capacitor $\\mathrm{C}_{3}$. Finally, when the third stage deactivates, its charge-injection is not canceled. However, the error it introduces in resolving the input voltage across all three stages is minor, equivalent to the voltage transition at the third stage's inverting input divided by the negative gains of the first two stages (i.e., the input voltage needed to counteract the third stage's clock feedthrough upon exiting reset mode).\n\nimage_name:(a)\ndescription:A multi-stage comparator circuit designed to eliminate clock feedthrough errors. It comprises three stages, each with an operational amplifier and coupling capacitors. The circuit employs multiple clock phases to control the switches, enabling the cancellation of input offset voltages and minimizing errors during transitions.\n\nimage_name:(b)\ndescription:The graph labeled \"(b)\" presents time-domain waveforms representing clock signals used in a multi-stage comparator circuit. It displays four distinct waveforms corresponding to different clock phases: \\( \\phi_1 \\), \\( \\phi_1' \\), \\( \\phi_1'' \\), and \\( \\phi_2 \\).\n\n1. **Type of Graph and Function:**\n- **Graph Type:** Time-domain waveform.\n- **Function:** Represents clock signal phases controlling the switching in a multi-stage comparator circuit.\n\n2. **Axes Labels and Units:**\n- **Horizontal Axis:** Represents time, with implied consistent time intervals.\n- **Vertical Axis:** Represents the logical state of the clock signals (high or low), typically in digital logic levels (e.g., 0V for low, Vcc for high).\n\n3. **Overall Behavior and Trends:**\n- Each waveform exhibits a rectangular shape, typical of digital clock signals, alternating between high and low states.\n- The waveforms are staggered, indicating different timing for each clock phase.\n- \\( \\phi_1 \\) and \\( \\phi_2 \\) have similar periods but are unsynchronized, with \\( \\phi_2 \\) starting low while \\( \\phi_1 \\) starts high.\n- \\( \\phi_1' \\) and \\( \\phi_1'' \\) are staggered versions of \\( \\phi_1 \\), indicating sequential clock phases.\n\n4. **Key Features and Technical Details:**\n- The staggered nature indicates sequential switching operations in the circuit.\n- The timing differences between phases are crucial for the comparator's proper operation, ensuring each stage is triggered at the correct time.\n\n5. **Annotations and Specific Data Points:**\n- No specific numerical values or annotations are provided, but the timing relationships are visually clear.\n- The sequence and duration of the high and low states are essential for the clocking mechanism of the multi-stage comparator circuit, aiming to minimize clock feedthrough errors.\n\nFig. 10.11 (a) A multi-stage comparator for eliminating clock feedthrough errors, with (b) the corresponding clock waveforms.\n\nIn a variant of this multi-stage approach [Poujois, 1978], the first stage was not reset. However, the input offset voltage of the first stage was still neutralized by storing it on coupling capacitors between the first and second stages during reset mode. This method is detailed in Section 10.5.\n\nimage_name:Fig. 10.12\ndescription:A multi-stage comparator circuit designed to minimize clock feedthrough errors. It includes coupling capacitors to store the first stage's input offset voltage during reset mode. The circuit features two operational amplifiers in sequence, with capacitors providing coupling between stages.\n\nFig. 10.12 Shows the first stage of the comparator in Fig. 10.11 during charge-injection.\n\n#### EXAMPLE 10.4\n\nGiven that all capacitors are 0.1 pF, transistor sizes are $\\mathrm{W} / \\mathrm{L}=4 \\mu \\mathrm{~m} / 0.2 \\mu \\mathrm{~m}$, $\\mathrm{C}_{\\mathrm{ox}}=8.5 \\mathrm{fF} /(\\mu \\mathrm{m})^{2}$, $\\mathrm{L}_{\\mathrm{ov}}=0.04 \\mu \\mathrm{~m}$, $\\mathrm{~V}_{\\mathrm{tn}}=0.45 \\mathrm{~V}$, $\\mathrm{V}_{\\mathrm{DD}}=2 \\mathrm{~V}$, and each stage has a gain of 20, determine the input-offset voltage error caused by the third stage's clock feedthrough when it exits reset.\n\n#### Solution\n\nThe values used are the same as those in Example 10.3. Therefore, the charge-injection at the third stage's inverting input is -56 mV, as found in Example 10.3. The input signal required to counter this 56 mV is given by\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{V}_{\\mathrm{in}}=\\frac{56 \\mathrm{mV}}{\\mathrm{~A}_{1} \\mathrm{~A}_{2}}=140 \\mu \\mathrm{~V} \\tag{10.9}\n\\end{equation*}\n$$\n\nThus, the equivalent input-offset voltage is $140 \\mu \\mathrm{~V}$, significantly better than the 56 mV resolution in Example 10.3."
},
{
    "text": "The method outlined can be utilized to create comparators with extremely high resolution, particularly when paired with fully differential circuit design methods. Nevertheless, this technique has a drawback in that it necessitates multiple-phase clock waveforms, which tend to slow down the circuitry.\n\nDespite the multi-stage approach being constrained in speed due to the requirement for the signal to pass through all stages, it can still achieve reasonable speed since each individual stage can be designed to operate quickly. Typically, each stage is composed of a single-stage amplifier that exhibits only a $90^{\\circ}$ phase shift, thereby eliminating the need for compensation capacitors (i.e., each stage maintains a $90^{\\circ}$ phase margin without compensation). To understand why this multi-stage approach can be rapid, consider the simplified scenario of a series of first-order, uncompensated inverters, as depicted in Fig. 10.13. This configuration roughly represents a multi-stage comparator when it is not undergoing reset. The parasitic load capacitance at the output of the ith stage is approximately\n\n$$\n\\begin{equation*}\nC_{p i} \\cong C_{0-i}+C_{g s-i+1} \\tag{10.10}\n\\end{equation*}\n$$\n\nwhere $\\mathrm{C}_{0-\\mathrm{i}}$ is the output capacitance of the ${ }_{i}$th stage, typically due to junction capacitances, and $\\mathrm{C}_{\\mathrm{gs}-\\mathrm{i}+1}$ is the gate-source capacitance of the input transistor in the subsequent stage. Equation (10.10) may not hold true for the final stage, but the load on the last stage should be of similar magnitude. If it is assumed that the stages are matched, then generally $\\mathrm{C}_{0 . \\mathrm{i}}<\\mathrm{C}_{\\mathrm{gs}-\\mathrm{i}+1}$, since junction capacitances are usually smaller than gate-source capacitances, suggesting that\n\n$$\n\\begin{equation*}\nC_{p i}<2 C_{g s-i} \\tag{10.11}\n\\end{equation*}\n$$\n\nThe unity-gain frequency of a single stage is approximately\n\n$$\n\\begin{equation*}\n\\omega_{\\mathrm{ti}} \\sim \\frac{g_{\\mathrm{mi}}}{2 C_{\\mathrm{gs-i}}} \\tag{10.12}\n\\end{equation*}\n$$\n\nor higher, where $\\mathrm{g}_{\\mathrm{mi}}$ is the transconductance of the input capacitor of the ith stage. Thus, the unity-gain frequency of a single gain stage is roughly half that of a single transistor. If it is assumed that the ith stage has a dc gain $A_{0-i}$ and is well described by a first-order transfer function, the transfer function of a single stage is approximately\n\n$$\n\\begin{equation*}\nA_{i}(s)=\\frac{A_{0-i}}{1+s / \\omega_{p-i}} \\tag{10.13}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\n\\omega_{p-i} \\cong \\frac{\\omega_{\\mathrm{ti-}}}{\\mathrm{~A}_{0-\\mathrm{i}}} \\sim \\frac{\\mathrm{~g}_{\\mathrm{mi}}}{2 \\mathrm{~A}_{0-\\mathrm{i}} \\mathrm{C}_{\\mathrm{gs-i}}} \\tag{10.14}\n\\end{equation*}\n$$\n\nThus, the $-3-\\mathrm{dB}$ frequency of a single stage is roughly half the unity-gain frequency of a transistor divided by the stage's gain. For a cascade of n stages, the overall transfer function is\n\n$$\n\\begin{equation*}\n\\mathrm{A}_{\\text {total }}(\\mathrm{s})=\\prod \\mathrm{A}_{i}(\\mathrm{~s}) \\tag{10.15}\n\\end{equation*}\n$$\n\nThis can be approximated by a first-order transfer function, ignoring higher-order terms, resulting in\n\n$$\n\\begin{equation*}\n\\mathrm{A}_{\\text {total }}(\\mathrm{s}) \\cong \\frac{1 \\mathrm{~A}_{0-\\mathrm{i}}}{1+\\mathrm{s} \\sum 1 / \\omega_{\\mathrm{p}-\\mathrm{i}}} \\cong \\frac{\\mathrm{~A}_{0}^{\\mathrm{n}}}{1+\\mathrm{ns} / \\omega_{\\mathrm{p}-\\mathrm{i}}} \\tag{10.16}\n\\end{equation*}\n$$\n\nThus, a cascade of n stages has a time constant approximately\n\n$$\n\\begin{equation*}\n\\tau_{\\text {total }} \\cong \\frac{2 \\mathrm{nA}_{0} \\mathrm{C}_{\\mathrm{gs}}}{\\mathrm{~g}_{\\mathrm{m}}} \\cong 2 \\mathrm{nA}_{0} \\tau_{\\mathrm{T}} \\tag{10.17}\n\\end{equation*}\n$$\n\nwhere $\\tau_{T}=C_{g s} / g_{m}$ is the approximate transit time of a single transistor (i.e., 1 over the unity-gain frequency of a single transistor). In essence, the time constant of the cascade of first-order stages is roughly n times the time constant of a single stage, which is approximately $2 \\mathrm{~A}_{0}$ times the transit time of a single transistor. This should be compared to using a single opamp, which, for the same overall gain, would have a time constant significantly greater than $2 \\mathrm{~A}_{0}^{n}$ times the transit time of a single transistor. While the speed estimate is valid for simple single-ended stages, the principles apply to more complex, fully differential stages if each stage is first order and does not require compensation.\n\nEquation (10.17) can be further simplified. Recall from Chapter 1 that\n\n$$\n\\begin{equation*}\nC_{g s}=\\frac{2}{3} C_{o x} W L \\tag{10.18}\n\\end{equation*}\n$$\n\nfor a transistor in the active region, and\n\n$$\n\\begin{equation*}\n\\mathrm{g}_{\\mathrm{m}}=\\sqrt{2 \\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}(\\mathrm{~W} / \\mathrm{L}) \\mathrm{I}_{\\mathrm{D}}} \\tag{10.19}\n\\end{equation*}\n$$\n\nSubstituting (10.18) and (10.19) into (10.17), and after simple manipulation, we arrive at\nwhere, again from Chapter 1,\n\n$$\n\\begin{equation*}\nV_{\\text {eff }}=\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x}(W / L)}} \\tag{10.21}\n\\end{equation*}\n$$\n\nEquation (10.20) is highly useful for quickly assessing the speed and resolution capabilities of a given technology. It also offers insights into comparator design. First, the effective gate-source voltages of the input drivers in each stage should be maximized to enhance speed. Second, the widths of the transistors have minimal impact on comparator speed, provided they are sufficiently large so that $\\mathrm{C}_{\\mathrm{gs}}$ dominates parasitic capacitances due to interconnect and external loading. However, larger input transistor sizes will be better matched, reducing offset, and generally have higher transconductance, leading to lower input-referred noise.\n\n#### EXAMPLE 10.5\n\nFor a $0.2-\\mu \\mathrm{m}$ technology, assume $\\mathrm{A}_{0}=20, \\mathrm{n}=3, \\mathrm{~V}_{\\text {eff }}=0.5 \\mathrm{~V}$, and $\\mu_{\\mathrm{n}}=0.03 \\mathrm{~m}^{2} / \\mathrm{V} \\cdot \\mathrm{s}$. What is the maximum clocking frequency of the comparator?\n\n#### Solution\n\nUsing (10.20), we find $\\tau_{\\text {total }}=0.21 \\mathrm{~ns}$. Assuming $3 \\tau$ is needed for each half period, a complete period requires $6 \\tau$, corresponding to a clocking frequency of 781 MHz. The resolution is approximately $2 \\mathrm{~V} / \\mathrm{A}_{0}^{\\mathrm{n}}=0.25 \\mathrm{mV}$."
},
{
    "text": "The method outlined can be employed to create very-high-resolution comparators, particularly when paired with fully differential circuit design methods. However, this technique has the drawback of necessitating multiple-phase clock waveforms, which减速 the circuits.\n\nDespite the multi-stage approach being inherently slower due to the signal needing to pass through all stages, it can still achieve reasonable speed since each individual stage can be designed to operate quickly. Typically, each stage comprises a single-stage amplifier with only a $90^{\\circ}$ phase shift, thus eliminating the need for compensation capacitors (i.e., each stage maintains a $90^{\\circ}$ phase margin without compensation). To understand why this multi-stage approach can be swift, consider the simplified scenario of a series of first-order, uncompensated inverters, as depicted in Fig. 10.13. This setup serves as a rough approximation of a multi-stage comparator when it is not undergoing reset. The parasitic load capacitance at the output of the ith stage is roughly\n\n$$\n\\begin{equation*}\nC_{p i} \\cong C_{0-i}+C_{g s-i+1} \\tag{10.10}\n\\end{equation*}\n$$\n\nwhere $\\mathrm{C}_{0-\\mathrm{i}}$ is the output capacitance of the ${ }_{i}$th stage, primarily due to junction capacitances, and $\\mathrm{C}_{\\mathrm{gs}-\\mathrm{i}+1}$ is the gate-source capacitance of the input transistor in the next stage. Equation (10.10) may not hold for the final stage, but its load should be of similar magnitude. If it is assumed that the stages are matched, then typically $\\mathrm{C}_{0 . \\mathrm{i}}<\\mathrm{C}_{\\mathrm{gs}-\\mathrm{i}+1}$, given that junction capacitances are usually smaller than gate-source capacitances, leading to the assumption that\n\n$$\n\\begin{equation*}\nC_{p i}<2 C_{g s-i} \\tag{10.11}\n\\end{equation*}\n$$\n\nThe unity-gain frequency of a single stage is approximately\n\n$$\n\\begin{equation*}\n\\omega_{\\mathrm{ti}} \\sim \\frac{g_{\\mathrm{mi}}}{2 C_{\\mathrm{gs-i}}} \\tag{10.12}\n\\end{equation*}\n$$\n\nor higher, where $\\mathrm{g}_{\\mathrm{mi}}$ is the transconductance of the input capacitor of the ith stage. Thus, the unity-gain frequency of a single gain-stage is about half that of a single transistor. Assuming the ith stage has a dc gain $A_{0-i}$ and is well described by a first-order transfer function, the transfer function of a single stage is roughly\n\n$$\n\\begin{equation*}\nA_{i}(s)=\\frac{A_{0-i}}{1+s / \\omega_{p-i}} \\tag{10.13}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\n\\omega_{p-i} \\cong \\frac{\\omega_{\\mathrm{ti-}}}{\\mathrm{~A}_{0-\\mathrm{i}}} \\sim \\frac{\\mathrm{~g}_{\\mathrm{mi}}}{2 \\mathrm{~A}_{0-\\mathrm{i}} \\mathrm{C}_{\\mathrm{gs-i}}} \\tag{10.14}\n\\end{equation*}\n$$\n\nHence, the $-3-\\mathrm{dB}$ frequency of a single stage is roughly half the unity-gain frequency of a transistor divided by the stage's gain. For a cascade of n stages, the overall transfer function is\n\n$$\n\\begin{equation*}\n\\mathrm{A}_{\\text {total }}(\\mathrm{s})=\\prod \\mathrm{A}_{i}(\\mathrm{~s}) \\tag{10.15}\n\\end{equation*}\n$$\n\nThis can be approximated by a first-order transfer function, ignoring higher-order terms, resulting in\n\n$$\n\\begin{equation*}\n\\mathrm{A}_{\\text {total }}(\\mathrm{s}) \\cong \\frac{1 \\mathrm{~A}_{0-\\mathrm{i}}}{1+\\mathrm{s} \\sum 1 / \\omega_{\\mathrm{p}-\\mathrm{i}}} \\cong \\frac{\\mathrm{~A}_{0}^{\\mathrm{n}}}{1+\\mathrm{ns} / \\omega_{\\mathrm{p}-\\mathrm{i}}} \\tag{10.16}\n\\end{equation*}\n$$\n\nThus, a cascade of n stages has a time constant approximately\n\n$$\n\\begin{equation*}\n\\tau_{\\text {total }} \\cong \\frac{2 \\mathrm{nA}_{0} \\mathrm{C}_{\\mathrm{gs}}}{\\mathrm{~g}_{\\mathrm{m}}} \\cong 2 \\mathrm{nA}_{0} \\tau_{\\mathrm{T}} \\tag{10.17}\n\\end{equation*}\n$$\n\nwhere $\\tau_{T}=C_{g s} / g_{m}$ is the approximate transit time of a single transistor (i.e., 1 over the unity-gain frequency of a single transistor). In essence, the time constant of the cascade of first-order stages is roughly n times the time constant of a single stage, which is approximately $2 \\mathrm{~A}_{0}$ times the transit time of a single transistor. This should be compared to using a single opamp, which, for the same overall gain, would have a time constant significantly greater than $2 \\mathrm{~A}_{0}^{n}$ times the transit time of a single transistor. While the speed estimate is valid for simple single-ended stages, the principles also apply to more complex, fully differential stages as long as each stage is first order and uncompensated.\n\nEquation (10.17) can be further simplified. From Chapter 1, recall that\n\n$$\n\\begin{equation*}\nC_{g s}=\\frac{2}{3} C_{o x} W L \\tag{10.18}\n\\end{equation*}\n$$\n\nfor a transistor in the active region, and that\n\n$$\n\\begin{equation*}\n\\mathrm{g}_{\\mathrm{m}}=\\sqrt{2 \\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}(\\mathrm{~W} / \\mathrm{L}) \\mathrm{I}_{\\mathrm{D}}} \\tag{10.19}\n\\end{equation*}\n$$\n\nSubstituting (10.18) and (10.19) into (10.17), and after simple manipulation, we get\nwhere, again from Chapter 1,\n\n$$\n\\begin{equation*}\nV_{\\text {eff }}=\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x}(W / L)}} \\tag{10.21}\n\\end{equation*}\n$$\n\nEquation (10.20) is invaluable for quickly assessing the speed and resolution capabilities of a given technology. It also offers insights into comparator design. First, the effective gate-source voltages of the input drivers in each stage should be maximized to enhance speed. Second, the widths of the transistors have minimal impact on comparator speed, assuming they are sufficiently large so that $\\mathrm{C}_{\\mathrm{gs}}$ dominates parasitic capacitances from interconnect and external loading. However, larger input transistor sizes will improve matching, reducing offset, and generally result in higher transconductance, thereby lowering input-referred noise.\n\n#### EXAMPLE 10.5\n\nFor a $0.2-\\mu \\mathrm{m}$ technology with $\\mathrm{A}_{0}=20, \\mathrm{n}=3, \\mathrm{~V}_{\\text {eff }}=0.5 \\mathrm{~V}$, and $\\mu_{\\mathrm{n}}=0.03 \\mathrm{~m}^{2} / \\mathrm{V} \\cdot \\mathrm{s}$, determine the maximum clocking frequency of the comparator.\n\n#### Solution\n\nUsing (10.20), we find $\\tau_{\\text {total }}=0.21 \\mathrm{~ns}$. Assuming $3 \\tau$ is needed for each half period, a complete period requires $6 \\tau$, corresponding to a clocking frequency of 781 MHz. The resolution is approximately $2 \\mathrm{~V} / \\mathrm{A}_{0}^{\\mathrm{n}}=0.25 \\mathrm{mV}$."
},
{
    "text": "The method outlined can be employed to create very-high-resolution comparators, particularly when paired with fully differential circuit design methods. Nevertheless, this technique is constrained by its need for multiple-phase clock waveforms, which减速 the circuitry.\n\nDespite the multi-stage approach being limited in speed due to the necessity for the signal to propagate through all stages, it can still achieve reasonable speed since each individual stage can be designed to operate swiftly. Typically, each stage comprises a single-stage amplifier with only a $90^{\\circ}$ phase shift, thus eliminating the need for compensation capacitors (i.e., each stage possesses a $90^{\\circ}$ phase margin without compensation). To understand why this multi-stage approach can be rapid, consider the simplified scenario of a cascade of first-order, uncompensated inverters, as depicted in Fig. 10.13. This configuration serves as a rough approximation of a multi-stage comparator when not in the reset state. The parasitic load capacitance at the output of the ith stage is approximately\n\n$$\n\\begin{equation*}\nC_{p i} \\cong C_{0-i}+C_{g s-i+1} \\tag{10.10}\n\\end{equation*}\n$$\n\nwhere $\\mathrm{C}_{0-\\mathrm{i}}$ is the output capacitance of the ${ }_{i}$ th stage, primarily due to junction capacitances, and $\\mathrm{C}_{\\mathrm{gs}-\\mathrm{i}+1}$ is the gate-source capacitance of the input transistor of the subsequent stage. Equation (10.10) may not hold true for the final stage, but its load should be of similar magnitude. If it is assumed that the stages are matched, then typically $\\mathrm{C}_{0 . \\mathrm{i}}<\\mathrm{C}_{\\mathrm{gs}-\\mathrm{i}+1}$, as junction capacitances are usually smaller than gate-source capacitances, leading to the assumption that\n\n$$\n\\begin{equation*}\nC_{p i}<2 C_{g s-i} \\tag{10.11}\n\\end{equation*}\n$$\n\nThe unity-gain frequency of a single stage is approximately\n\n$$\n\\begin{equation*}\n\\omega_{\\mathrm{ti}} \\sim \\frac{g_{\\mathrm{mi}}}{2 C_{\\mathrm{gs-i}}} \\tag{10.12}\n\\end{equation*}\n$$\n\nor higher, where $\\mathrm{g}_{\\mathrm{mi}}$ is the transconductance of the input capacitor of the ith stage. Thus, the unity-gain frequency of a single gain-stage is roughly half that of a single transistor. Assuming the ith stage has a dc gain $A_{0-i}$ and is well described by a first-order transfer function, the transfer function of a single stage is approximately\n\n$$\n\\begin{equation*}\nA_{i}(s)=\\frac{A_{0-i}}{1+s / \\omega_{p-i}} \\tag{10.13}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\n\\omega_{p-i} \\cong \\frac{\\omega_{\\mathrm{ti-}}}{\\mathrm{~A}_{0-\\mathrm{i}}} \\sim \\frac{\\mathrm{~g}_{\\mathrm{mi}}}{2 \\mathrm{~A}_{0-\\mathrm{i}} \\mathrm{C}_{\\mathrm{gs-i}}} \\tag{10.14}\n\\end{equation*}\n$$\n\nThus, the $-3-\\mathrm{dB}$ frequency of a single stage is roughly half the unity-gain frequency of a transistor divided by the stage's gain. For a cascade of n stages, the overall transfer function is\n\n$$\n\\begin{equation*}\n\\mathrm{A}_{\\text {total }}(\\mathrm{s})=\\prod \\mathrm{A}_{i}(\\mathrm{~s}) \\tag{10.15}\n\\end{equation*}\n$$\n\nThis can be approximated by a first-order transfer function, ignoring higher-order terms, resulting in\n\n$$\n\\begin{equation*}\n\\mathrm{A}_{\\text {total }}(\\mathrm{s}) \\cong \\frac{1 \\mathrm{~A}_{0-\\mathrm{i}}}{1+\\mathrm{s} \\sum 1 / \\omega_{\\mathrm{p}-\\mathrm{i}}} \\cong \\frac{\\mathrm{~A}_{0}^{\\mathrm{n}}}{1+\\mathrm{ns} / \\omega_{\\mathrm{p}-\\mathrm{i}}} \\tag{10.16}\n\\end{equation*}\n$$\n\nThus, a cascade of n stages has a time constant approximately\n\n$$\n\\begin{equation*}\n\\tau_{\\text {total }} \\cong \\frac{2 \\mathrm{nA}_{0} \\mathrm{C}_{\\mathrm{gs}}}{\\mathrm{~g}_{\\mathrm{m}}} \\cong 2 \\mathrm{nA}_{0} \\tau_{\\mathrm{T}} \\tag{10.17}\n\\end{equation*}\n$$\n\nwhere $\\tau_{T}=C_{g s} / g_{m}$ is the approximate transit time of a single transistor (i.e., 1 over the unity-gain frequency of a single transistor). In essence, the time constant of the cascade of first-order stages is roughly n times the time constant of a single stage, which is approximately $2 \\mathrm{~A}_{0}$ times the transit time of a single transistor. This should be compared to using a single opamp, which, for the same overall gain, would have a time constant significantly greater than $2 \\mathrm{~A}_{0}^{n}$ times the transit time of a single transistor. While the speed estimate is valid for simple single-ended stages, the principles extend to more complex, fully differential stages if each stage is first order and uncompensated.\n\nEquation (10.17) can be further simplified. From Chapter 1, recall that\n\n$$\n\\begin{equation*}\nC_{g s}=\\frac{2}{3} C_{o x} W L \\tag{10.18}\n\\end{equation*}\n$$\n\nfor a transistor in the active region, and that\n\n$$\n\\begin{equation*}\n\\mathrm{g}_{\\mathrm{m}}=\\sqrt{2 \\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}(\\mathrm{~W} / \\mathrm{L}) \\mathrm{I}_{\\mathrm{D}}} \\tag{10.19}\n\\end{equation*}\n$$\n\nSubstituting (10.18) and (10.19) into (10.17), and after simple manipulation, we obtain\nwhere, again from Chapter 1,\n\n$$\n\\begin{equation*}\nV_{\\text {eff }}=\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x}(W / L)}} \\tag{10.21}\n\\end{equation*}\n$$\n\nEquation (10.20) is highly useful for quickly assessing the speed and resolution capabilities of a given technology. It also offers insights into comparator design. First, the effective gate-source voltages of input drivers in each stage should be maximized to enhance speed. Second, transistor widths have minimal impact on comparator speed, assuming they are sufficiently large so that $\\mathrm{C}_{\\mathrm{gs}}$ dominates parasitic capacitances from interconnect and external loading. However, larger input transistor sizes will be better matched, reducing offset, and generally have higher transconductance, leading to lower input-referred noise.\n\n#### EXAMPLE 10.5\n\nFor a $0.2-\\mu \\mathrm{m}$ technology with $\\mathrm{A}_{0}=20, \\mathrm{n}=3, \\mathrm{~V}_{\\text {eff }}=0.5 \\mathrm{~V}$, and $\\mu_{\\mathrm{n}}=0.03 \\mathrm{~m}^{2} / \\mathrm{V} \\cdot \\mathrm{s}$, determine the maximum clocking frequency of the comparator.\n\n#### Solution\n\nUsing (10.20), we find $\\tau_{\\text {total }}=0.21 \\mathrm{~ns}$. Assuming $3 \\tau$ is needed for each half period, a complete period requires $6 \\tau$, corresponding to a clocking frequency of 781 MHz. The resolution is approximately $2 \\mathrm{~V} / \\mathrm{A}_{0}^{\\mathrm{n}}=0.25 \\mathrm{mV}$."
},
{
    "text": "The method described can be utilized to create very-high-resolution comparators, particularly when integrated with fully differential circuit design techniques. Nonetheless, this method has a drawback in that it necessitates multiple-phase clock waveforms, which减速 the circuit operation.\n\nDespite the multi-stage approach being constrained in speed due to the requirement for the signal to propagate through all stages, it can still achieve reasonable speed since each individual stage can be designed to operate quickly. Typically, each stage comprises a single-stage amplifier with only a $90^{\\circ}$ phase shift, thus eliminating the need for compensation capacitors (i.e., each stage maintains a $90^{\\circ}$ phase margin without compensation). To understand why this multi-stage approach can be swift, consider the simplified scenario of a series of first-order, uncompensated inverters, as illustrated in Fig. 10.13. This configuration roughly approximates a multi-stage comparator when it is not undergoing reset. The parasitic load capacitance at the output of the ith stage is approximately\n\n$$\n\\begin{equation*}\nC_{p i} \\cong C_{0-i}+C_{g s-i+1} \\tag{10.10}\n\\end{equation*}\n$$\n\nwhere $\\mathrm{C}_{0-\\mathrm{i}}$ represents the output capacitance of the ${ }_{i}$th stage, typically due to junction capacitances, and $\\mathrm{C}_{\\mathrm{gs}-\\mathrm{i}+1}$ is the gate-source capacitance of the input transistor in the subsequent stage. Equation (10.10) may not hold true for the final stage, but the load on the last stage should be of similar magnitude. If it is assumed that the stages are matched, then generally $\\mathrm{C}_{0 . \\mathrm{i}}<\\mathrm{C}_{\\mathrm{gs}-\\mathrm{i}+1}$, since junction capacitances are usually smaller than gate-source capacitances, implying that\n\n$$\n\\begin{equation*}\nC_{p i}<2 C_{g s-i} \\tag{10.11}\n\\end{equation*}\n$$\n\nThe unity-gain frequency of a single stage is approximately\n\n$$\n\\begin{equation*}\n\\omega_{\\mathrm{ti}} \\sim \\frac{g_{\\mathrm{mi}}}{2 C_{\\mathrm{gs-i}}} \\tag{10.12}\n\\end{equation*}\n$$\n\nor higher, where $\\mathrm{g}_{\\mathrm{mi}}$ is the transconductance of the input capacitor of the ith stage. Thus, the unity-gain frequency of a single gain stage is roughly half that of a single transistor. Assuming the ith stage has a dc gain $A_{0-i}$ and is well described by a first-order transfer function, the transfer function of a single stage is approximately\n\n$$\n\\begin{equation*}\nA_{i}(s)=\\frac{A_{0-i}}{1+s / \\omega_{p-i}} \\tag{10.13}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\n\\omega_{p-i} \\cong \\frac{\\omega_{\\mathrm{ti-}}}{\\mathrm{~A}_{0-\\mathrm{i}}} \\sim \\frac{\\mathrm{~g}_{\\mathrm{mi}}}{2 \\mathrm{~A}_{0-\\mathrm{i}} \\mathrm{C}_{\\mathrm{gs-i}}} \\tag{10.14}\n\\end{equation*}\n$$\n\nThus, the $-3-\\mathrm{dB}$ frequency of a single stage is roughly half the unity-gain frequency of a transistor divided by the stage's gain. For a cascade of n stages, the overall transfer function is\n\n$$\n\\begin{equation*}\n\\mathrm{A}_{\\text {total }}(\\mathrm{s})=\\prod \\mathrm{A}_{i}(\\mathrm{~s}) \\tag{10.15}\n\\end{equation*}\n$$\n\nThis can be approximated by a first-order transfer function, ignoring higher-order terms, resulting in\n\n$$\n\\begin{equation*}\n\\mathrm{A}_{\\text {total }}(\\mathrm{s}) \\cong \\frac{1 \\mathrm{~A}_{0-\\mathrm{i}}}{1+\\mathrm{s} \\sum 1 / \\omega_{\\mathrm{p}-\\mathrm{i}}} \\cong \\frac{\\mathrm{~A}_{0}^{\\mathrm{n}}}{1+\\mathrm{ns} / \\omega_{\\mathrm{p}-\\mathrm{i}}} \\tag{10.16}\n\\end{equation*}\n$$\n\nThus, a cascade of n stages has a time constant approximately\n\n$$\n\\begin{equation*}\n\\tau_{\\text {total }} \\cong \\frac{2 \\mathrm{nA}_{0} \\mathrm{C}_{\\mathrm{gs}}}{\\mathrm{~g}_{\\mathrm{m}}} \\cong 2 \\mathrm{nA}_{0} \\tau_{\\mathrm{T}} \\tag{10.17}\n\\end{equation*}\n$$\n\nwhere $\\tau_{T}=C_{g s} / g_{m}$ is the approximate transit time of a single transistor (i.e., 1 over the unity-gain frequency of a single transistor). In essence, the time constant of the cascade of first-order stages is roughly n times the time constant of a single stage, which is approximately $2 \\mathrm{~A}_{0}$ times the transit time of a single transistor. This should be compared to using a single opamp, which, for the same overall gain, would have a time constant significantly greater than $2 \\mathrm{~A}_{0}^{n}$ times the transit time of a single transistor. While the preceding speed estimate is valid for simple single-ended stages, the general principles also apply to more complex, fully differential stages, provided each stage is first order and does not require compensation.\n\nEquation (10.17) can be further simplified. Recall from Chapter 1 that\n\n$$\n\\begin{equation*}\nC_{g s}=\\frac{2}{3} C_{o x} W L \\tag{10.18}\n\\end{equation*}\n$$\n\nfor a transistor in the active region, and\n\n$$\n\\begin{equation*}\n\\mathrm{g}_{\\mathrm{m}}=\\sqrt{2 \\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}(\\mathrm{~W} / \\mathrm{L}) \\mathrm{I}_{\\mathrm{D}}} \\tag{10.19}\n\\end{equation*}\n$$\n\nSubstituting (10.18) and (10.19) into (10.17), and after simple manipulation, we arrive at\nwhere, again from Chapter 1,\n\n$$\n\\begin{equation*}\nV_{\\text {eff }}=\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x}(W / L)}} \\tag{10.21}\n\\end{equation*}\n$$\n\nEquation (10.20) is highly useful for quickly assessing the speed and resolution capabilities of a given technology. It also provides insights into comparator design. First, the effective gate-source voltages of the input drivers in each stage should be maximized to enhance speed. Second, the widths of the transistors have minimal impact on comparator speed, assuming they are sufficiently large so that $\\mathrm{C}_{\\mathrm{gs}}$ dominates parasitic capacitances from interconnect and external loading. However, larger input transistor sizes will be better matched, reducing offset, and generally have higher transconductance, leading to lower input-referred noise.\n\n#### EXAMPLE 10.5\n\nFor a $0.2-\\mu \\mathrm{m}$ technology, assume $\\mathrm{A}_{0}=20, \\mathrm{n}=3, \\mathrm{~V}_{\\text {eff }}=0.5 \\mathrm{~V}$, and $\\mu_{\\mathrm{n}}=0.03 \\mathrm{~m}^{2} / \\mathrm{V} \\cdot \\mathrm{s}$. What is the maximum clocking frequency of the comparator?\n\n#### Solution\n\nUsing (10.20), we find $\\tau_{\\text {total }}=0.21 \\mathrm{~ns}$. Assuming $3 \\tau$ is needed for each half period, a complete period requires $6 \\tau$, corresponding to a clocking frequency of 781 MHz. The resolution is approximately $2 \\mathrm{~V} / \\mathrm{A}_{0}^{\\mathrm{n}}=0.25 \\mathrm{mV}$."
},
{
    "text": "The method described can be utilized to create comparators with very high resolution, particularly when integrated with fully differential circuit design techniques. However, this method has a drawback in that it necessitates multiple-phase clock waveforms, which tend to slow down the circuits.\n\nDespite the speed limitation imposed by the multi-stage approach due to the signal's need to propagate through all stages, it can still achieve reasonable speed. This is because each individual stage can be designed to operate quickly. Typically, each stage comprises a single-stage amplifier with only a $90^{\\circ}$ phase shift, thus eliminating the need for compensation capacitors (i.e., each stage maintains a $90^{\\circ}$ phase margin without compensation). To understand why this multi-stage approach can be swift, consider the simplified example of a cascade of first-order, uncompensated inverters, as depicted in Fig. 10.13. This configuration roughly represents a multi-stage comparator in its non-reset state. The parasitic load capacitance at the output of the ith stage is approximately\n\n$$\n\\begin{equation*}\nC_{p i} \\cong C_{0-i}+C_{g s-i+1} \\tag{10.10}\n\\end{equation*}\n$$\n\nwhere $\\mathrm{C}_{0-\\mathrm{i}}$ is the output capacitance of the ${ }_{i}$ th stage, typically due to junction capacitances, and $\\mathrm{C}_{\\mathrm{gs}-\\mathrm{i}+1}$ is the gate-source capacitance of the input transistor in the subsequent stage. Equation (10.10) may not hold true for the final stage, but its load should be of similar magnitude. If it is assumed that the stages are matched, then generally $\\mathrm{C}_{0 . \\mathrm{i}}<\\mathrm{C}_{\\mathrm{gs}-\\mathrm{i}+1}$, since junction capacitances are usually smaller than gate-source capacitances, leading to the assumption that\n\n$$\n\\begin{equation*}\nC_{p i}<2 C_{g s-i} \\tag{10.11}\n\\end{equation*}\n$$\n\nThe unity-gain frequency of a single stage is approximately\n\n$$\n\\begin{equation*}\n\\omega_{\\mathrm{ti}} \\sim \\frac{g_{\\mathrm{mi}}}{2 C_{\\mathrm{gs-i}}} \\tag{10.12}\n\\end{equation*}\n$$\n\nor higher, where $\\mathrm{g}_{\\mathrm{mi}}$ is the transconductance of the input capacitor of the ith stage. Thus, the unity-gain frequency of a single gain stage is roughly half that of a single transistor. Assuming the ith stage has a dc gain $A_{0-i}$ and is well described by a first-order transfer function, the transfer function of a single stage is approximately\n\n$$\n\\begin{equation*}\nA_{i}(s)=\\frac{A_{0-i}}{1+s / \\omega_{p-i}} \\tag{10.13}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\n\\omega_{p-i} \\cong \\frac{\\omega_{\\mathrm{ti-}}}{\\mathrm{~A}_{0-\\mathrm{i}}} \\sim \\frac{\\mathrm{~g}_{\\mathrm{mi}}}{2 \\mathrm{~A}_{0-\\mathrm{i}} \\mathrm{C}_{\\mathrm{gs-i}}} \\tag{10.14}\n\\end{equation*}\n$$\n\nThus, the $-3-\\mathrm{dB}$ frequency of a single stage is roughly half the unity-gain frequency of a transistor divided by the stage's gain. For a cascade of n stages, the overall transfer function is\n\n$$\n\\begin{equation*}\n\\mathrm{A}_{\\text {total }}(\\mathrm{s})=\\prod \\mathrm{A}_{i}(\\mathrm{~s}) \\tag{10.15}\n\\end{equation*}\n$$\n\nThis can be approximated by a first-order transfer function, ignoring higher-order terms, resulting in\n\n$$\n\\begin{equation*}\n\\mathrm{A}_{\\text {total }}(\\mathrm{s}) \\cong \\frac{1 \\mathrm{~A}_{0-\\mathrm{i}}}{1+\\mathrm{s} \\sum 1 / \\omega_{\\mathrm{p}-\\mathrm{i}}} \\cong \\frac{\\mathrm{~A}_{0}^{\\mathrm{n}}}{1+\\mathrm{ns} / \\omega_{\\mathrm{p}-\\mathrm{i}}} \\tag{10.16}\n\\end{equation*}\n$$\n\nTherefore, a cascade of n stages has a time constant approximately\n\n$$\n\\begin{equation*}\n\\tau_{\\text {total }} \\cong \\frac{2 \\mathrm{nA}_{0} \\mathrm{C}_{\\mathrm{gs}}}{\\mathrm{~g}_{\\mathrm{m}}} \\cong 2 \\mathrm{nA}_{0} \\tau_{\\mathrm{T}} \\tag{10.17}\n\\end{equation*}\n$$\n\nwhere $\\tau_{T}=C_{g s} / g_{m}$ is the approximate transit time of a single transistor (i.e., 1 over the unity-gain frequency of a single transistor). In essence, the time constant of the cascade of first-order stages is roughly n times the time constant of a single stage, which is approximately $2 \\mathrm{~A}_{0}$ times the transit time of a single transistor. This should be compared to using a single opamp, which, for the same overall gain, would have a time constant significantly greater than $2 \\mathrm{~A}_{0}^{n}$ times the transit time of a single transistor. While the speed estimate is valid for simple single-ended stages, the principles apply to more complex, fully differential stages as long as each stage is first order and does not require compensation.\n\nEquation (10.17) can be further simplified. From Chapter 1, recall that\n\n$$\n\\begin{equation*}\nC_{g s}=\\frac{2}{3} C_{o x} W L \\tag{10.18}\n\\end{equation*}\n$$\n\nfor a transistor in the active region, and\n\n$$\n\\begin{equation*}\n\\mathrm{g}_{\\mathrm{m}}=\\sqrt{2 \\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}(\\mathrm{~W} / \\mathrm{L}) \\mathrm{I}_{\\mathrm{D}}} \\tag{10.19}\n\\end{equation*}\n$$\n\nSubstituting (10.18) and (10.19) into (10.17), and after simple manipulation, we arrive at\nwhere, again from Chapter 1,\n\n$$\n\\begin{equation*}\nV_{\\text {eff }}=\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x}(W / L)}} \\tag{10.21}\n\\end{equation*}\n$$\n\nEquation (10.20) is highly useful for quickly assessing the speed and resolution capabilities of a given technology. It also offers insights into comparator design. First, the effective gate-source voltages of the input drivers in each stage should be maximized to enhance speed. Second, the widths of the transistors have minimal impact on comparator speed, assuming they are sufficiently large so that $\\mathrm{C}_{\\mathrm{gs}}$ dominates parasitic capacitances due to interconnect and external loading. However, larger input transistor sizes will be better matched, reducing offset, and generally have higher transconductance, leading to lower input-referred noise.\n\n#### EXAMPLE 10.5\n\nFor a $0.2-\\mu \\mathrm{m}$ technology, assume $\\mathrm{A}_{0}=20, \\mathrm{n}=3, \\mathrm{~V}_{\\text {eff }}=0.5 \\mathrm{~V}$, and $\\mu_{\\mathrm{n}}=0.03 \\mathrm{~m}^{2} / \\mathrm{V} \\cdot \\mathrm{s}$. What is the maximum clocking frequency of the comparator?\n\n#### Solution\n\nUsing (10.20), we find $\\tau_{\\text {total }}=0.21 \\mathrm{~ns}$. Assuming $3 \\tau$ is required for each half period, a complete period requires $6 \\tau$, corresponding to a clocking frequency of 781 MHz. The resolution is approximately $2 \\mathrm{~V} / \\mathrm{A}_{0}^{\\mathrm{n}}=0.25 \\mathrm{mV}$."
},
{
    "text": "The described method can be utilized to create very-high-resolution comparators, particularly when paired with fully differential circuit design techniques. However, this method has the drawback of requiring multiple-phase clock waveforms, which减速 the circuits.\n\nDespite the multi-stage approach being limited in speed due to the signal's need to propagate through all stages, it can still achieve reasonable speed since each individual stage can be designed to operate quickly. Typically, each stage comprises a single-stage amplifier with only a $90^{\\circ}$ phase shift, thus eliminating the need for compensation capacitors (i.e., each stage has a $90^{\\circ}$ phase margin without compensation). To understand why this multi-stage approach can be fast, consider the simplified example of a cascade of first-order, uncompensated inverters, as depicted in Fig. 10.13. This circuit serves as a rough approximation of a multi-stage comparator when it is not being reset. The parasitic load capacitance at the output of the ith stage is approximately\n\n$$\n\\begin{equation*}\nC_{p i} \\cong C_{0-i}+C_{g s-i+1} \\tag{10.10}\n\\end{equation*}\n$$\n\nwhere $\\mathrm{C}_{0-\\mathrm{i}}$ is the output capacitance of the ${ }_{i}$ th stage, typically due to junction capacitances, and $\\mathrm{C}_{\\mathrm{gs}-\\mathrm{i}+1}$ is the gate-source capacitance of the input transistor of the subsequent stage. Equation (10.10) may not hold for the final stage, but its load should be of similar magnitude. If the stages are assumed to be matched, then usually $\\mathrm{C}_{0 . \\mathrm{i}}<\\mathrm{C}_{\\mathrm{gs}-\\mathrm{i}+1}$, since junction capacitances are generally less than gate-source capacitances, leading to the assumption that\n\n$$\n\\begin{equation*}\nC_{p i}<2 C_{g s-i} \\tag{10.11}\n\\end{equation*}\n$$\n\nThe unity-gain frequency of a single stage is approximately\n\n$$\n\\begin{equation*}\n\\omega_{\\mathrm{ti}} \\sim \\frac{g_{\\mathrm{mi}}}{2 C_{\\mathrm{gs-i}}} \\tag{10.12}\n\\end{equation*}\n$$\n\nor higher, where $\\mathrm{g}_{\\mathrm{mi}}$ is the transconductance of the input capacitor of the ith stage. Thus, the unity-gain frequency of a single gain-stage is about half that of a single transistor. If the ith stage has a dc gain $A_{0-i}$ and is well described by a first-order transfer function, the transfer function of a single stage is roughly\n\n$$\n\\begin{equation*}\nA_{i}(s)=\\frac{A_{0-i}}{1+s / \\omega_{p-i}} \\tag{10.13}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\n\\omega_{p-i} \\cong \\frac{\\omega_{\\mathrm{ti-}}}{\\mathrm{~A}_{0-\\mathrm{i}}} \\sim \\frac{\\mathrm{~g}_{\\mathrm{mi}}}{2 \\mathrm{~A}_{0-\\mathrm{i}} \\mathrm{C}_{\\mathrm{gs-i}}} \\tag{10.14}\n\\end{equation*}\n$$\n\nThus, the $-3-\\mathrm{dB}$ frequency of a single stage is about half the unity-gain frequency of a transistor divided by the stage's gain. For a cascade of n stages, the overall transfer function is\n\n$$\n\\begin{equation*}\n\\mathrm{A}_{\\text {total }}(\\mathrm{s})=\\prod \\mathrm{A}_{i}(\\mathrm{~s}) \\tag{10.15}\n\\end{equation*}\n$$\n\nThis can be approximated by a first-order transfer function, ignoring higher-order terms, resulting in\n\n$$\n\\begin{equation*}\n\\mathrm{A}_{\\text {total }}(\\mathrm{s}) \\cong \\frac{1 \\mathrm{~A}_{0-\\mathrm{i}}}{1+\\mathrm{s} \\sum 1 / \\omega_{\\mathrm{p}-\\mathrm{i}}} \\cong \\frac{\\mathrm{~A}_{0}^{\\mathrm{n}}}{1+\\mathrm{ns} / \\omega_{\\mathrm{p}-\\mathrm{i}}} \\tag{10.16}\n\\end{equation*}\n$$\n\nThus, a cascade of n stages has a time constant roughly\n\n$$\n\\begin{equation*}\n\\tau_{\\text {total }} \\cong \\frac{2 \\mathrm{nA}_{0} \\mathrm{C}_{\\mathrm{gs}}}{\\mathrm{~g}_{\\mathrm{m}}} \\cong 2 \\mathrm{nA}_{0} \\tau_{\\mathrm{T}} \\tag{10.17}\n\\end{equation*}\n$$\n\nwhere $\\tau_{T}=C_{g s} / g_{m}$ is the approximate transit time of a single transistor (i.e., 1 over the unity-gain frequency of a single transistor). In essence, the time constant of the cascade of first-order stages is about n times the time constant of a single stage, roughly $2 \\mathrm{~A}_{0}$ times the transit time of a single transistor. This contrasts with a single opamp, which, for the same overall gain, would have a time constant significantly greater than $2 \\mathrm{~A}_{0}^{n}$ times the transit time of a single transistor. While the speed estimate is valid for simple single-ended stages, the principles extend to more complex, fully differential stages as long as each stage is first order and uncompensated.\n\nEquation (10.17) can be further simplified. From Chapter 1, recall that\n\n$$\n\\begin{equation*}\nC_{g s}=\\frac{2}{3} C_{o x} W L \\tag{10.18}\n\\end{equation*}\n$$\n\nfor a transistor in the active region, and\n\n$$\n\\begin{equation*}\n\\mathrm{g}_{\\mathrm{m}}=\\sqrt{2 \\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}(\\mathrm{~W} / \\mathrm{L}) \\mathrm{I}_{\\mathrm{D}}} \\tag{10.19}\n\\end{equation*}\n$$\n\nSubstituting (10.18) and (10.19) into (10.17), and after simple manipulation, we get\nwhere, again from Chapter 1,\n\n$$\n\\begin{equation*}\nV_{\\text {eff }}=\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x}(W / L)}} \\tag{10.21}\n\\end{equation*}\n$$\n\nEquation (10.20) is highly useful for quickly assessing the speed and resolution capabilities of a given technology. It also offers insights into comparator design. First, the effective gate-source voltages of input drivers in each stage should be maximized to enhance speed. Second, transistor widths have minimal impact on comparator speed, assuming they are sufficiently large so that $\\mathrm{C}_{\\mathrm{gs}}$ dominates parasitic capacitances from interconnect and external loading. However, larger input transistor sizes improve matching, reducing offset, and generally result in higher transconductance, thereby lowering input-referred noise.\n\n#### EXAMPLE 10.5\n\nFor a $0.2-\\mu \\mathrm{m}$ technology with $\\mathrm{A}_{0}=20, \\mathrm{n}=3, \\mathrm{~V}_{\\text {eff }}=0.5 \\mathrm{~V}$, and $\\mu_{\\mathrm{n}}=0.03 \\mathrm{~m}^{2} / \\mathrm{V} \\cdot \\mathrm{s}$, determine the maximum clocking frequency of the comparator.\n\n#### Solution\n\nUsing (10.20), we find $\\tau_{\\text {total }}=0.21 \\mathrm{~ns}$. Assuming $3 \\tau$ is needed for each half period, a complete period requires $6 \\tau$, corresponding to a clocking frequency of 781 MHz. The resolution is approximately $2 \\mathrm{~V} / \\mathrm{A}_{0}^{\\mathrm{n}}=0.25 \\mathrm{mV}$."
},
{
    "text": "The described methodology can be employed to create comparators with very high resolution, particularly when integrated with fully differential circuit design techniques. Nonetheless, this method has a drawback in that it necessitates multiple-phase clock waveforms, which减速 the circuitry.\n\nDespite the speed limitation of the multi-stage approach due to the requirement for the signal to propagate through all stages, it can still achieve reasonable speed since each individual stage can be designed to operate quickly. Typically, each stage comprises a single-stage amplifier with only a $90^{\\circ}$ phase shift, thus eliminating the need for compensation capacitors (i.e., each stage maintains a $90^{\\circ}$ phase margin without compensation). To understand why this multi-stage approach can be rapid, consider the simplified scenario of a series of first-order, uncompensated inverters, as depicted in Fig. 10.13. This configuration roughly represents a multi-stage comparator when it is not undergoing reset. The parasitic load capacitance at the output of the ith stage is approximately\n\n$$\n\\begin{equation*}\nC_{p i} \\cong C_{0-i}+C_{g s-i+1} \\tag{10.10}\n\\end{equation*}\n$$\n\nwhere $\\mathrm{C}_{0-\\mathrm{i}}$ is the output capacitance of the ${ }_{i}$ th stage, typically due to junction capacitances, and $\\mathrm{C}_{\\mathrm{gs}-\\mathrm{i}+1}$ is the gate-source capacitance of the input transistor of the subsequent stage. Equation (10.10) may not hold for the final stage, but the last stage's load should be of similar magnitude. If it is assumed that the stages are matched, then usually $\\mathrm{C}_{0 . \\mathrm{i}}<\\mathrm{C}_{\\mathrm{gs}-\\mathrm{i}+1}$, given that junction capacitances are generally less than gate-source capacitances, suggesting that\n\n$$\n\\begin{equation*}\nC_{p i}<2 C_{g s-i} \\tag{10.11}\n\\end{equation*}\n$$\n\nThe unity-gain frequency of a single stage is approximately\n\n$$\n\\begin{equation*}\n\\omega_{\\mathrm{ti}} \\sim \\frac{g_{\\mathrm{mi}}}{2 C_{\\mathrm{gs-i}}} \\tag{10.12}\n\\end{equation*}\n$$\n\nor higher, where $\\mathrm{g}_{\\mathrm{mi}}$ is the transconductance of the input capacitor of the ith stage. Thus, the unity-gain frequency of a single gain stage is about half that of a single transistor. Assuming the ith stage has a dc gain $A_{0-i}$ and is well described by a first-order transfer function, the transfer function of a single stage is roughly\n\n$$\n\\begin{equation*}\nA_{i}(s)=\\frac{A_{0-i}}{1+s / \\omega_{p-i}} \\tag{10.13}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\n\\omega_{p-i} \\cong \\frac{\\omega_{\\mathrm{ti-}}}{\\mathrm{~A}_{0-\\mathrm{i}}} \\sim \\frac{\\mathrm{~g}_{\\mathrm{mi}}}{2 \\mathrm{~A}_{0-\\mathrm{i}} \\mathrm{C}_{\\mathrm{gs-i}}} \\tag{10.14}\n\\end{equation*}\n$$\n\nThus, the $-3-\\mathrm{dB}$ frequency of a single stage is around half the unity-gain frequency of a transistor divided by the stage's gain. For a cascade of n stages, the overall transfer function is\n\n$$\n\\begin{equation*}\n\\mathrm{A}_{\\text {total }}(\\mathrm{s})=\\prod \\mathrm{A}_{i}(\\mathrm{~s}) \\tag{10.15}\n\\end{equation*}\n$$\n\nThis can be approximated by a first-order transfer function, ignoring higher-order terms, resulting in\n\n$$\n\\begin{equation*}\n\\mathrm{A}_{\\text {total }}(\\mathrm{s}) \\cong \\frac{1 \\mathrm{~A}_{0-\\mathrm{i}}}{1+\\mathrm{s} \\sum 1 / \\omega_{\\mathrm{p}-\\mathrm{i}}} \\cong \\frac{\\mathrm{~A}_{0}^{\\mathrm{n}}}{1+\\mathrm{ns} / \\omega_{\\mathrm{p}-\\mathrm{i}}} \\tag{10.16}\n\\end{equation*}\n$$\n\nThus, a cascade of n stages has a time constant approximately\n\n$$\n\\begin{equation*}\n\\tau_{\\text {total }} \\cong \\frac{2 \\mathrm{nA}_{0} \\mathrm{C}_{\\mathrm{gs}}}{\\mathrm{~g}_{\\mathrm{m}}} \\cong 2 \\mathrm{nA}_{0} \\tau_{\\mathrm{T}} \\tag{10.17}\n\\end{equation*}\n$$\n\nwhere $\\tau_{T}=C_{g s} / g_{m}$ is the approximate transit time of a single transistor (i.e., 1 over the unity-gain frequency of a single transistor). In essence, the time constant of the cascade of first-order stages is roughly n times the time constant of a single stage, which is about $2 \\mathrm{~A}_{0}$ times the transit time of a single transistor. This should be compared to using a single opamp, which, for the same overall gain, would have a time constant significantly greater than $2 \\mathrm{~A}_{0}^{n}$ times the transit time of a single transistor. While the speed estimate is valid for simple single-ended stages, the principles also apply to more complex, fully differential stages as long as each stage is first order and uncompensated.\n\nEquation (10.17) can be further simplified. From Chapter 1, recall that\n\n$$\n\\begin{equation*}\nC_{g s}=\\frac{2}{3} C_{o x} W L \\tag{10.18}\n\\end{equation*}\n$$\n\nfor a transistor in the active region, and\n\n$$\n\\begin{equation*}\n\\mathrm{g}_{\\mathrm{m}}=\\sqrt{2 \\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}(\\mathrm{~W} / \\mathrm{L}) \\mathrm{I}_{\\mathrm{D}}} \\tag{10.19}\n\\end{equation*}\n$$\n\nSubstituting (10.18) and (10.19) into (10.17), and after simple manipulation, we arrive at\nwhere, again from Chapter 1,\n\n$$\n\\begin{equation*}\nV_{\\text {eff }}=\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x}(W / L)}} \\tag{10.21}\n\\end{equation*}\n$$\n\nEquation (10.20) is highly useful for quickly assessing the speed and resolution capabilities of a given technology. It also offers insights into comparator design. First, the effective gate-source voltages of the input drivers of each stage should be maximized to enhance speed. Second, the widths of the transistors have minimal impact on comparator speed, assuming they are sufficiently large so that $\\mathrm{C}_{\\mathrm{gs}}$ dominates parasitic capacitances from interconnect and external loading. However, larger input transistor sizes will be better matched, reducing offset, and generally have higher transconductance, leading to lower input-referred noise.\n\n#### EXAMPLE 10.5\n\nFor a $0.2-\\mu \\mathrm{m}$ technology with $\\mathrm{A}_{0}=20, \\mathrm{n}=3, \\mathrm{~V}_{\\text {eff }}=0.5 \\mathrm{~V}$, and $\\mu_{\\mathrm{n}}=0.03 \\mathrm{~m}^{2} / \\mathrm{V} \\cdot \\mathrm{s}$, what is the maximum clocking frequency of the comparator?\n\n#### Solution\n\nUsing (10.20), we find $\\tau_{\\text {total }}=0.21 \\mathrm{~ns}$. Assuming $3 \\tau$ is required for each half period, a complete period requires $6 \\tau$, corresponding to a clocking frequency of 781 MHz. The resolution is approximately $2 \\mathrm{~V} / \\mathrm{A}_{0}^{\\mathrm{n}}=0.25 \\mathrm{mV}$."
},
{
    "text": "The described method can be utilized to create very-high-resolution comparators, particularly when paired with fully differential circuit design techniques. However, this method has a drawback in that it necessitates multiple-phase clock waveforms, which减速 the circuit operation.\n\nDespite the speed limitation of the multi-stage approach due to the signal's need to propagate through all stages, it can still achieve reasonable speed since each individual stage can be designed to operate quickly. Typically, each stage comprises a single-stage amplifier with only a $90^{\\circ}$ phase shift, thus eliminating the need for compensation capacitors (i.e., each stage maintains a $90^{\\circ}$ phase margin without compensation). To understand why this multi-stage approach can be swift, consider the simplified example of a cascade of first-order, uncompensated inverters, as depicted in Fig. 10.13. This circuit serves as a rough approximation of a multi-stage comparator when it is not in the reset state. The parasitic load capacitance at the output of the ith stage is approximately\n\n$$\n\\begin{equation*}\nC_{p i} \\cong C_{0-i}+C_{g s-i+1} \\tag{10.10}\n\\end{equation*}\n$$\n\nwhere $\\mathrm{C}_{0-\\mathrm{i}}$ is the output capacitance of the ${ }_{i}$th stage, typically due to junction capacitances, and $\\mathrm{C}_{\\mathrm{gs}-\\mathrm{i}+1}$ is the gate-source capacitance of the input transistor in the subsequent stage. Equation (10.10) may not hold for the final stage, but the last stage's load should be of similar magnitude. If it is assumed that the stages are matched, then generally $\\mathrm{C}_{0 . \\mathrm{i}}<\\mathrm{C}_{\\mathrm{gs}-\\mathrm{i}+1}$, as junction capacitances are usually smaller than gate-source capacitances, suggesting that\n\n$$\n\\begin{equation*}\nC_{p i}<2 C_{g s-i} \\tag{10.11}\n\\end{equation*}\n$$\n\nThe unity-gain frequency of a single stage is approximately\n\n$$\n\\begin{equation*}\n\\omega_{\\mathrm{ti}} \\sim \\frac{g_{\\mathrm{mi}}}{2 C_{\\mathrm{gs-i}}} \\tag{10.12}\n\\end{equation*}\n$$\n\nor higher, where $\\mathrm{g}_{\\mathrm{mi}}$ is the transconductance of the input capacitor of the ith stage. Thus, the unity-gain frequency of a single gain stage is roughly half that of a single transistor. Assuming the ith stage has a dc gain $A_{0-i}$ and is well described by a first-order transfer function, the transfer function of a single stage is approximately\n\n$$\n\\begin{equation*}\nA_{i}(s)=\\frac{A_{0-i}}{1+s / \\omega_{p-i}} \\tag{10.13}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\n\\omega_{p-i} \\cong \\frac{\\omega_{\\mathrm{ti-}}}{\\mathrm{~A}_{0-\\mathrm{i}}} \\sim \\frac{\\mathrm{~g}_{\\mathrm{mi}}}{2 \\mathrm{~A}_{0-\\mathrm{i}} \\mathrm{C}_{\\mathrm{gs-i}}} \\tag{10.14}\n\\end{equation*}\n$$\n\nThus, the $-3-\\mathrm{dB}$ frequency of a single stage is roughly half the unity-gain frequency of a transistor divided by the stage's gain. For a cascade of n stages, the overall transfer function is\n\n$$\n\\begin{equation*}\n\\mathrm{A}_{\\text {total }}(\\mathrm{s})=\\prod \\mathrm{A}_{i}(\\mathrm{~s}) \\tag{10.15}\n\\end{equation*}\n$$\n\nThis can be approximated by a first-order transfer function, ignoring higher-order terms, resulting in\n\n$$\n\\begin{equation*}\n\\mathrm{A}_{\\text {total }}(\\mathrm{s}) \\cong \\frac{1 \\mathrm{~A}_{0-\\mathrm{i}}}{1+\\mathrm{s} \\sum 1 / \\omega_{\\mathrm{p}-\\mathrm{i}}} \\cong \\frac{\\mathrm{~A}_{0}^{\\mathrm{n}}}{1+\\mathrm{ns} / \\omega_{\\mathrm{p}-\\mathrm{i}}} \\tag{10.16}\n\\end{equation*}\n$$\n\nThus, a cascade of n stages has a time constant approximately\n\n$$\n\\begin{equation*}\n\\tau_{\\text {total }} \\cong \\frac{2 \\mathrm{nA}_{0} \\mathrm{C}_{\\mathrm{gs}}}{\\mathrm{~g}_{\\mathrm{m}}} \\cong 2 \\mathrm{nA}_{0} \\tau_{\\mathrm{T}} \\tag{10.17}\n\\end{equation*}\n$$\n\nwhere $\\tau_{T}=C_{g s} / g_{m}$ is the approximate transit time of a single transistor (i.e., 1 over the unity-gain frequency of a single transistor). In essence, the time constant of the cascade of first-order stages is roughly n times the time constant of a single stage, which is approximately $2 \\mathrm{~A}_{0}$ times the transit time of a single transistor. This should be compared to using a single opamp, which, for the same overall gain, would have a time constant significantly greater than $2 \\mathrm{~A}_{0}^{n}$ times the transit time of a single transistor. While the speed estimate is valid for simple single-ended stages, the principles extend to more complex, fully differential stages as long as each stage is first order and uncompensated.\n\nEquation (10.17) can be further simplified. From Chapter 1, recall that\n\n$$\n\\begin{equation*}\nC_{g s}=\\frac{2}{3} C_{o x} W L \\tag{10.18}\n\\end{equation*}\n$$\n\nfor a transistor in the active region, and\n\n$$\n\\begin{equation*}\n\\mathrm{g}_{\\mathrm{m}}=\\sqrt{2 \\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}(\\mathrm{~W} / \\mathrm{L}) \\mathrm{I}_{\\mathrm{D}}} \\tag{10.19}\n\\end{equation*}\n$$\n\nSubstituting (10.18) and (10.19) into (10.17), and after simple manipulation, we obtain\nwhere, again from Chapter 1,\n\n$$\n\\begin{equation*}\nV_{\\text {eff }}=\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x}(W / L)}} \\tag{10.21}\n\\end{equation*}\n$$\n\nEquation (10.20) is highly useful for quickly assessing the speed and resolution capabilities of a given technology. It also offers insights into comparator design. First, the effective gate-source voltages of the input drivers in each stage should be maximized to enhance speed. Second, the widths of the transistors have minimal impact on comparator speed, assuming they are sufficiently large so that $\\mathrm{C}_{\\mathrm{gs}}$ dominates parasitic capacitances from interconnect and external loading. However, larger input transistor sizes will be better matched, reducing offset, and generally have higher transconductance, leading to lower input-referred noise.\n\n#### EXAMPLE 10.5\n\nFor a $0.2-\\mu \\mathrm{m}$ technology with $\\mathrm{A}_{0}=20, \\mathrm{n}=3, \\mathrm{~V}_{\\text {eff }}=0.5 \\mathrm{~V}$, and $\\mu_{\\mathrm{n}}=0.03 \\mathrm{~m}^{2} / \\mathrm{V} \\cdot \\mathrm{s}$, what is the maximum clocking frequency of the comparator?\n\n#### Solution\n\nUsing (10.20), we find $\\tau_{\\text {total }}=0.21 \\mathrm{~ns}$. Assuming $3 \\tau$ is needed for each half period, a complete period requires $6 \\tau$, corresponding to a clocking frequency of 781 MHz. The resolution is approximately $2 \\mathrm{~V} / \\mathrm{A}_{0}^{\\mathrm{n}}=0.25 \\mathrm{mV}$."
},
{
    "text": "The method outlined can be employed to create comparators with extremely high resolution, particularly when integrated with fully differential circuit design methodologies. Nonetheless, this technique is constrained by the necessity for multiple-phase clock waveforms, which减速 the circuit operation.\n\nDespite the speed limitation of the multi-stage approach due to the signal's need to traverse all stages, it can still achieve reasonable speed since each individual stage can be designed to operate rapidly. Typically, each stage comprises a single-stage amplifier with a $90^{\\circ}$ phase shift, eliminating the need for compensation capacitors (i.e., each stage maintains a $90^{\\circ}$ phase margin without compensation). To understand why this multi-stage configuration can be swift, consider the simplified scenario of a series of first-order, uncompensated inverters, as depicted in Fig. 10.13. This setup serves as a rough approximation of a multi-stage comparator when not in reset mode. The parasitic load capacitance at the output of the ith stage is approximately\n\n$$\n\\begin{equation*}\nC_{p i} \\cong C_{0-i}+C_{g s-i+1} \\tag{10.10}\n\\end{equation*}\n$$\n\nwhere $\\mathrm{C}_{0-\\mathrm{i}}$ represents the output capacitance of the ${ }_{i}$ th stage, typically due to junction capacitances, and $\\mathrm{C}_{\\mathrm{gs}-\\mathrm{i}+1}$ is the gate-source capacitance of the input transistor in the subsequent stage. Equation (10.10) may not hold true for the final stage, but its load should be of similar magnitude. If it is assumed that the stages are matched, then generally $\\mathrm{C}_{0 . \\mathrm{i}}<\\mathrm{C}_{\\mathrm{gs}-\\mathrm{i}+1}$, given that junction capacitances are usually smaller than gate-source capacitances, suggesting that\n\n$$\n\\begin{equation*}\nC_{p i}<2 C_{g s-i} \\tag{10.11}\n\\end{equation*}\n$$\n\nThe unity-gain frequency of a single stage is approximately\n\n$$\n\\begin{equation*}\n\\omega_{\\mathrm{ti}} \\sim \\frac{g_{\\mathrm{mi}}}{2 C_{\\mathrm{gs-i}}} \\tag{10.12}\n\\end{equation*}\n$$\n\nor higher, where $\\mathrm{g}_{\\mathrm{mi}}$ is the transconductance of the input capacitor of the ith stage. Thus, the unity-gain frequency of a single gain stage is roughly half that of a single transistor. Assuming the ith stage has a dc gain $A_{0-i}$ and is well described by a first-order transfer function, the transfer function of a single stage is approximately\n\n$$\n\\begin{equation*}\nA_{i}(s)=\\frac{A_{0-i}}{1+s / \\omega_{p-i}} \\tag{10.13}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\n\\omega_{p-i} \\cong \\frac{\\omega_{\\mathrm{ti-}}}{\\mathrm{~A}_{0-\\mathrm{i}}} \\sim \\frac{\\mathrm{~g}_{\\mathrm{mi}}}{2 \\mathrm{~A}_{0-\\mathrm{i}} \\mathrm{C}_{\\mathrm{gs-i}}} \\tag{10.14}\n\\end{equation*}\n$$\n\nThus, the $-3-\\mathrm{dB}$ frequency of a single stage is roughly half the unity-gain frequency of a transistor divided by the stage's gain. For a cascade of n stages, the overall transfer function is\n\n$$\n\\begin{equation*}\n\\mathrm{A}_{\\text {total }}(\\mathrm{s})=\\prod \\mathrm{A}_{i}(\\mathrm{~s}) \\tag{10.15}\n\\end{equation*}\n$$\n\nThis can be approximated by a first-order transfer function, ignoring higher-order terms, resulting in\n\n$$\n\\begin{equation*}\n\\mathrm{A}_{\\text {total }}(\\mathrm{s}) \\cong \\frac{1 \\mathrm{~A}_{0-\\mathrm{i}}}{1+\\mathrm{s} \\sum 1 / \\omega_{\\mathrm{p}-\\mathrm{i}}} \\cong \\frac{\\mathrm{~A}_{0}^{\\mathrm{n}}}{1+\\mathrm{ns} / \\omega_{\\mathrm{p}-\\mathrm{i}}} \\tag{10.16}\n\\end{equation*}\n$$\n\nThus, a cascade of n stages has a time constant approximately\n\n$$\n\\begin{equation*}\n\\tau_{\\text {total }} \\cong \\frac{2 \\mathrm{nA}_{0} \\mathrm{C}_{\\mathrm{gs}}}{\\mathrm{~g}_{\\mathrm{m}}} \\cong 2 \\mathrm{nA}_{0} \\tau_{\\mathrm{T}} \\tag{10.17}\n\\end{equation*}\n$$\n\nwhere $\\tau_{T}=C_{g s} / g_{m}$ is the approximate transit time of a single transistor (i.e., 1 over the unity-gain frequency of a single transistor). In essence, the time constant of the cascade of first-order stages is roughly n times the time constant of a single stage, which is approximately $2 \\mathrm{~A}_{0}$ times the transit time of a single transistor. This should be compared to using a single opamp, which, for the same overall gain, would have a time constant significantly greater than $2 \\mathrm{~A}_{0}^{n}$ times the transit time of a single transistor. While the preceding speed estimate is valid for simple single-ended stages, the general principles also apply to more complex, fully differential stages, provided each stage is first order and does not require compensation.\n\nEquation (10.17) can be further simplified. Recall from Chapter 1 that\n\n$$\n\\begin{equation*}\nC_{g s}=\\frac{2}{3} C_{o x} W L \\tag{10.18}\n\\end{equation*}\n$$\n\nfor a transistor in the active region, and\n\n$$\n\\begin{equation*}\n\\mathrm{g}_{\\mathrm{m}}=\\sqrt{2 \\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}(\\mathrm{~W} / \\mathrm{L}) \\mathrm{I}_{\\mathrm{D}}} \\tag{10.19}\n\\end{equation*}\n$$\n\nSubstituting (10.18) and (10.19) into (10.17), and after simple manipulation, we arrive at\nwhere, again from Chapter 1,\n\n$$\n\\begin{equation*}\nV_{\\text {eff }}=\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x}(W / L)}} \\tag{10.21}\n\\end{equation*}\n$$\n\nEquation (10.20) is highly useful for quickly assessing the speed and resolution capabilities of a given technology. It also provides insights into comparator design. First, the effective gate-source voltages of the input drivers in each stage should be maximized to enhance speed. Second, the widths of the transistors have minimal impact on comparator speed, assuming they are sufficiently large so that $\\mathrm{C}_{\\mathrm{gs}}$ dominates parasitic capacitances from interconnect and external loading. However, larger input transistor sizes will be better matched, reducing offset, and generally have higher transconductance, leading to lower input-referred noise.\n\n#### EXAMPLE 10.5\n\nFor a $0.2-\\mu \\mathrm{m}$ technology, assume $\\mathrm{A}_{0}=20, \\mathrm{n}=3, \\mathrm{~V}_{\\text {eff }}=0.5 \\mathrm{~V}$, and $\\mu_{\\mathrm{n}}=0.03 \\mathrm{~m}^{2} / \\mathrm{V} \\cdot \\mathrm{s}$. What is the maximum clocking frequency of the comparator?\n\n#### Solution\n\nUsing (10.20), we find $\\tau_{\\text {total }}=0.21 \\mathrm{~ns}$. Assuming $3 \\tau$ is required for each half period, a complete period requires $6 \\tau$, corresponding to a clocking frequency of 781 MHz. The resolution is approximately $2 \\mathrm{~V} / \\mathrm{A}_{0}^{\\mathrm{n}}=0.25 \\mathrm{mV}$."
},
{
    "text": "The described methodology can be employed to create comparators with extremely high resolution, particularly when integrated with fully differential circuit design techniques. Nonetheless, this method is constrained by the necessity for multiple-phase clock waveforms, which减速 the circuit operation.\n\nDespite the speed limitation of the multi-stage approach due to the signal's need to traverse all stages, it can still achieve reasonable speed since each individual stage can be designed to operate quickly. Typically, each stage comprises a single-stage amplifier with a $90^{\\circ}$ phase shift, thus eliminating the need for compensation capacitors (i.e., each stage maintains a $90^{\\circ}$ phase margin without compensation). To understand why this multi-stage approach can be swift, consider the simplified scenario of a series of first-order, uncompensated inverters, as depicted in Fig. 10.13. This configuration roughly approximates a multi-stage comparator when it is not undergoing reset. The parasitic load capacitance at the output of the ith stage is approximately\n\n$$\n\\begin{equation*}\nC_{p i} \\cong C_{0-i}+C_{g s-i+1} \\tag{10.10}\n\\end{equation*}\n$$\n\nwhere $\\mathrm{C}_{0-\\mathrm{i}}$ represents the output capacitance of the ${ }_{i}$th stage, typically due to junction capacitances, and $\\mathrm{C}_{\\mathrm{gs}-\\mathrm{i}+1}$ is the gate-source capacitance of the input transistor of the subsequent stage. Equation (10.10) may not hold true for the final stage, but its load should be of similar magnitude. If it is assumed that the stages are matched, then generally $\\mathrm{C}_{0 . \\mathrm{i}}<\\mathrm{C}_{\\mathrm{gs}-\\mathrm{i}+1}$, given that junction capacitances are usually smaller than gate-source capacitances, suggesting that\n\n$$\n\\begin{equation*}\nC_{p i}<2 C_{g s-i} \\tag{10.11}\n\\end{equation*}\n$$\n\nThe unity-gain frequency of a single stage is approximately\n\n$$\n\\begin{equation*}\n\\omega_{\\mathrm{ti}} \\sim \\frac{g_{\\mathrm{mi}}}{2 C_{\\mathrm{gs-i}}} \\tag{10.12}\n\\end{equation*}\n$$\n\nor higher, where $\\mathrm{g}_{\\mathrm{mi}}$ is the transconductance of the input capacitor of the ith stage. Thus, the unity-gain frequency of a single gain stage is roughly half that of a single transistor. If the ith stage has a dc gain $A_{0-i}$ and is well described by a first-order transfer function, the transfer function of a single stage is approximately\n\n$$\n\\begin{equation*}\nA_{i}(s)=\\frac{A_{0-i}}{1+s / \\omega_{p-i}} \\tag{10.13}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\n\\omega_{p-i} \\cong \\frac{\\omega_{\\mathrm{ti-}}}{\\mathrm{~A}_{0-\\mathrm{i}}} \\sim \\frac{\\mathrm{~g}_{\\mathrm{mi}}}{2 \\mathrm{~A}_{0-\\mathrm{i}} \\mathrm{C}_{\\mathrm{gs-i}}} \\tag{10.14}\n\\end{equation*}\n$$\n\nThus, the $-3-\\mathrm{dB}$ frequency of a single stage is roughly half the unity-gain frequency of a transistor divided by the stage's gain. For a cascade of n stages, the overall transfer function is\n\n$$\n\\begin{equation*}\n\\mathrm{A}_{\\text {total }}(\\mathrm{s})=\\prod \\mathrm{A}_{i}(\\mathrm{~s}) \\tag{10.15}\n\\end{equation*}\n$$\n\nThis can be approximated by a first-order transfer function, ignoring higher-order terms, resulting in\n\n$$\n\\begin{equation*}\n\\mathrm{A}_{\\text {total }}(\\mathrm{s}) \\cong \\frac{1 \\mathrm{~A}_{0-\\mathrm{i}}}{1+\\mathrm{s} \\sum 1 / \\omega_{\\mathrm{p}-\\mathrm{i}}} \\cong \\frac{\\mathrm{~A}_{0}^{\\mathrm{n}}}{1+\\mathrm{ns} / \\omega_{\\mathrm{p}-\\mathrm{i}}} \\tag{10.16}\n\\end{equation*}\n$$\n\nThus, a cascade of n stages has a time constant approximately\n\n$$\n\\begin{equation*}\n\\tau_{\\text {total }} \\cong \\frac{2 \\mathrm{nA}_{0} \\mathrm{C}_{\\mathrm{gs}}}{\\mathrm{~g}_{\\mathrm{m}}} \\cong 2 \\mathrm{nA}_{0} \\tau_{\\mathrm{T}} \\tag{10.17}\n\\end{equation*}\n$$\n\nwhere $\\tau_{T}=C_{g s} / g_{m}$ is the approximate transit time of a single transistor (i.e., 1 over the unity-gain frequency of a single transistor). In essence, the time constant of the cascade of first-order stages is roughly n times the time constant of a single stage, which is approximately $2 \\mathrm{~A}_{0}$ times the transit time of a single transistor. This should be compared to a single opamp, which, for the same overall gain, would have a time constant significantly greater than $2 \\mathrm{~A}_{0}^{n}$ times the transit time of a single transistor. While the speed estimate is valid for simple single-ended stages, the principles extend to more complex, fully differential stages if each stage is first order and uncompensated.\n\nEquation (10.17) can be further simplified. From Chapter 1, recall that\n\n$$\n\\begin{equation*}\nC_{g s}=\\frac{2}{3} C_{o x} W L \\tag{10.18}\n\\end{equation*}\n$$\n\nfor a transistor in the active region, and\n\n$$\n\\begin{equation*}\n\\mathrm{g}_{\\mathrm{m}}=\\sqrt{2 \\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}(\\mathrm{~W} / \\mathrm{L}) \\mathrm{I}_{\\mathrm{D}}} \\tag{10.19}\n\\end{equation*}\n$$\n\nSubstituting (10.18) and (10.19) into (10.17), and after simple manipulation, we arrive at\nwhere, again from Chapter 1,\n\n$$\n\\begin{equation*}\nV_{\\text {eff }}=\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x}(W / L)}} \\tag{10.21}\n\\end{equation*}\n$$\n\nEquation (10.20) is highly useful for rapidly assessing the speed and resolution capabilities of a given technology. It also provides insights into comparator design. First, the effective gate-source voltages of the input drivers of each stage should be maximized to enhance speed. Second, transistor widths have minimal impact on comparator speed, assuming they are sufficiently large so that $\\mathrm{C}_{\\mathrm{gs}}$ dominates parasitic capacitances from interconnect and external loading. However, larger input transistor sizes offer better matching, reducing offset, and generally higher transconductance, leading to lower input-referred noise.\n\n#### EXAMPLE 10.5\n\nFor a $0.2-\\mu \\mathrm{m}$ technology with $\\mathrm{A}_{0}=20, \\mathrm{n}=3, \\mathrm{~V}_{\\text {eff }}=0.5 \\mathrm{~V}$, and $\\mu_{\\mathrm{n}}=0.03 \\mathrm{~m}^{2} / \\mathrm{V} \\cdot \\mathrm{s}$, what is the maximum clocking frequency of the comparator?\n\n#### Solution\n\nUsing (10.20), $\\tau_{\\text {total }}=0.21 \\mathrm{~ns}$. Assuming $3 \\tau$ is required for each half period, a complete period requires $6 \\tau$, corresponding to a clocking frequency of 781 MHz. The resolution is approximately $2 \\mathrm{~V} / \\mathrm{A}_{0}^{\\mathrm{n}}=0.25 \\mathrm{mV}$."
},
{
    "text": "The described methodology can be employed to achieve extremely high-resolution comparators, particularly when integrated with fully differential circuit design strategies. Nevertheless, this technique is constrained by its necessity for multiple-phase clock waveforms, which inherently decelerate the circuitry.\n\nDespite the speed limitation inherent in the multi-stage approach due to the signal's propagation through all stages, it can still achieve reasonable speeds. This is because each individual stage can be designed to operate swiftly. Typically, each stage comprises a single-stage amplifier with a $90^{\\circ}$ phase shift, thus obviating the need for compensation capacitors (i.e., each stage maintains a $90^{\\circ}$ phase margin without compensation). To understand the potential speed of this multi-stage approach, consider the simplified scenario of a series of first-order, uncompensated inverters, as depicted in Fig. 10.13. This configuration roughly approximates a multi-stage comparator in its non-reset state. The parasitic load capacitance at the output of the ith stage is approximately\n\n$$\n\\begin{equation*}\nC_{p i} \\cong C_{0-i}+C_{g s-i+1} \\tag{10.10}\n\\end{equation*}\n$$\n\nwhere $\\mathrm{C}_{0-\\mathrm{i}}$ represents the output capacitance of the ${ }_{i}$th stage, typically due to junction capacitances, and $\\mathrm{C}_{\\mathrm{gs}-\\mathrm{i}+1}$ is the gate-source capacitance of the input transistor in the subsequent stage. Equation (10.10) may not hold true for the final stage, but its load should be of similar magnitude. If it is assumed that the stages are matched, then generally $\\mathrm{C}_{0 . \\mathrm{i}}<\\mathrm{C}_{\\mathrm{gs}-\\mathrm{i}+1}$, given that junction capacitances are usually smaller than gate-source capacitances, leading to the assumption\n\n$$\n\\begin{equation*}\nC_{p i}<2 C_{g s-i} \\tag{10.11}\n\\end{equation*}\n$$\n\nThe unity-gain frequency of a single stage is approximately\n\n$$\n\\begin{equation*}\n\\omega_{\\mathrm{ti}} \\sim \\frac{g_{\\mathrm{mi}}}{2 C_{\\mathrm{gs-i}}} \\tag{10.12}\n\\end{equation*}\n$$\n\nor higher, where $\\mathrm{g}_{\\mathrm{mi}}$ is the transconductance of the input capacitor in the ith stage. Thus, the unity-gain frequency of a single gain stage is roughly half that of a single transistor. Assuming the ith stage has a dc gain $A_{0-i}$ and is well described by a first-order transfer function, the transfer function of a single stage is approximately\n\n$$\n\\begin{equation*}\nA_{i}(s)=\\frac{A_{0-i}}{1+s / \\omega_{p-i}} \\tag{10.13}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\n\\omega_{p-i} \\cong \\frac{\\omega_{\\mathrm{ti-}}}{\\mathrm{~A}_{0-\\mathrm{i}}} \\sim \\frac{\\mathrm{~g}_{\\mathrm{mi}}}{2 \\mathrm{~A}_{0-\\mathrm{i}} \\mathrm{C}_{\\mathrm{gs-i}}} \\tag{10.14}\n\\end{equation*}\n$$\n\nHence, the $-3-\\mathrm{dB}$ frequency of a single stage is roughly half the unity-gain frequency of a transistor divided by the stage's gain. For a cascade of n stages, the overall transfer function is\n\n$$\n\\begin{equation*}\n\\mathrm{A}_{\\text {total }}(\\mathrm{s})=\\prod \\mathrm{A}_{i}(\\mathrm{~s}) \\tag{10.15}\n\\end{equation*}\n$$\n\nThis can be approximated by a first-order transfer function, ignoring higher-order terms, resulting in\n\n$$\n\\begin{equation*}\n\\mathrm{A}_{\\text {total }}(\\mathrm{s}) \\cong \\frac{1 \\mathrm{~A}_{0-\\mathrm{i}}}{1+\\mathrm{s} \\sum 1 / \\omega_{\\mathrm{p}-\\mathrm{i}}} \\cong \\frac{\\mathrm{~A}_{0}^{\\mathrm{n}}}{1+\\mathrm{ns} / \\omega_{\\mathrm{p}-\\mathrm{i}}} \\tag{10.16}\n\\end{equation*}\n$$\n\nThus, a cascade of n stages has a time constant approximately\n\n$$\n\\begin{equation*}\n\\tau_{\\text {total }} \\cong \\frac{2 \\mathrm{nA}_{0} \\mathrm{C}_{\\mathrm{gs}}}{\\mathrm{~g}_{\\mathrm{m}}} \\cong 2 \\mathrm{nA}_{0} \\tau_{\\mathrm{T}} \\tag{10.17}\n\\end{equation*}\n$$\n\nwhere $\\tau_{T}=C_{g s} / g_{m}$ is the approximate transit time of a single transistor (i.e., 1 over the unity-gain frequency of a single transistor). In essence, the time constant of the cascade of first-order stages is roughly n times the time constant of a single stage, which is approximately $2 \\mathrm{~A}_{0}$ times the transit time of a single transistor. This should be compared to using a single opamp, which, for the same overall gain, would have a time constant significantly greater than $2 \\mathrm{~A}_{0}^{n}$ times the transit time of a single transistor. While the preceding speed estimate applies to simple single-ended stages, the general principles also hold for more complex, fully differential stages, provided each stage is first order and does not require compensation.\n\nEquation (10.17) can be further simplified. Recall from Chapter 1 that\n\n$$\n\\begin{equation*}\nC_{g s}=\\frac{2}{3} C_{o x} W L \\tag{10.18}\n\\end{equation*}\n$$\n\nfor a transistor in the active region, and\n\n$$\n\\begin{equation*}\n\\mathrm{g}_{\\mathrm{m}}=\\sqrt{2 \\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}(\\mathrm{~W} / \\mathrm{L}) \\mathrm{I}_{\\mathrm{D}}} \\tag{10.19}\n\\end{equation*}\n$$\n\nSubstituting (10.18) and (10.19) into (10.17), and after simple manipulation, we arrive at\nwhere, again from Chapter 1,\n\n$$\n\\begin{equation*}\nV_{\\text {eff }}=\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x}(W / L)}} \\tag{10.21}\n\\end{equation*}\n$$\n\nEquation (10.20) is highly useful for quickly assessing the speed and resolution capabilities of a given technology. It also offers insights into comparator design. First, the effective gate-source voltages of the input drivers in each stage should be maximized to enhance speed. Second, the widths of the transistors have minimal impact on comparator speed, assuming they are sufficiently large so that $\\mathrm{C}_{\\mathrm{gs}}$ dominates parasitic capacitances from interconnects and external loads. However, larger input transistor sizes will be better matched, reducing offset, and generally exhibit higher transconductance, leading to lower input-referred noise.\n\n#### EXAMPLE 10.5\n\nFor a $0.2-\\mu \\mathrm{m}$ technology with $\\mathrm{A}_{0}=20, \\mathrm{n}=3, \\mathrm{~V}_{\\text {eff }}=0.5 \\mathrm{~V}$, and $\\mu_{\\mathrm{n}}=0.03 \\mathrm{~m}^{2} / \\mathrm{V} \\cdot \\mathrm{s}$, determine the maximum clocking frequency of the comparator.\n\n#### Solution\n\nUsing (10.20), we find $\\tau_{\\text {total }}=0.21 \\mathrm{~ns}$. Assuming $3 \\tau$ is required for each half period, a complete period requires $6 \\tau$, corresponding to a clocking frequency of 781 MHz. The resolution is approximately $2 \\mathrm{~V} / \\mathrm{A}_{0}^{\\mathrm{n}}=0.25 \\mathrm{mV}$."
},
{
    "text": "The described methodology can be employed to create comparators with very high resolution, particularly when integrated with fully differential circuit design techniques. Nevertheless, this method has the drawback of necessitating multiple-phase clock waveforms, which减速 the circuitry.\n\nDespite the speed limitation inherent in the multi-stage approach due to the signal's need to propagate through all stages, it can still achieve reasonable speed because each individual stage can be designed for rapid operation. Typically, each stage comprises a single-stage amplifier with a $90^{\\circ}$ phase shift, thus obviating the need for compensation capacitors (i.e., each stage maintains a $90^{\\circ}$ phase margin without compensation). To understand why this multi-stage approach can be swift, consider the simplified scenario of a series of first-order, uncompensated inverters, as depicted in Fig. 10.13. This configuration roughly approximates a multi-stage comparator in its non-reset state. The parasitic load capacitance at the output of the ith stage is approximately\n\n$$\n\\begin{equation*}\nC_{p i} \\cong C_{0-i}+C_{g s-i+1} \\tag{10.10}\n\\end{equation*}\n$$\n\nwhere $\\mathrm{C}_{0-\\mathrm{i}}$ represents the output capacitance of the ${ }_{i}$ th stage, typically due to junction capacitances, and $\\mathrm{C}_{\\mathrm{gs}-\\mathrm{i}+1}$ is the gate-source capacitance of the input transistor of the subsequent stage. Equation (10.10) may not hold true for the final stage, but its load should be of similar magnitude. If it is assumed that the stages are matched, then generally $\\mathrm{C}_{0 . \\mathrm{i}}<\\mathrm{C}_{\\mathrm{gs}-\\mathrm{i}+1}$, given that junction capacitances are usually smaller than gate-source capacitances, leading to the assumption that\n\n$$\n\\begin{equation*}\nC_{p i}<2 C_{g s-i} \\tag{10.11}\n\\end{equation*}\n$$\n\nThe unity-gain frequency of a single stage is approximately\n\n$$\n\\begin{equation*}\n\\omega_{\\mathrm{ti}} \\sim \\frac{g_{\\mathrm{mi}}}{2 C_{\\mathrm{gs-i}}} \\tag{10.12}\n\\end{equation*}\n$$\n\nor higher, where $\\mathrm{g}_{\\mathrm{mi}}$ is the transconductance of the input capacitor of the ith stage. Thus, the unity-gain frequency of a single gain stage is roughly half that of a single transistor. Assuming the ith stage has a dc gain $A_{0-i}$ and is adequately described by a first-order transfer function, the transfer function of a single stage is approximately\n\n$$\n\\begin{equation*}\nA_{i}(s)=\\frac{A_{0-i}}{1+s / \\omega_{p-i}} \\tag{10.13}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\n\\omega_{p-i} \\cong \\frac{\\omega_{\\mathrm{ti-}}}{\\mathrm{~A}_{0-\\mathrm{i}}} \\sim \\frac{\\mathrm{~g}_{\\mathrm{mi}}}{2 \\mathrm{~A}_{0-\\mathrm{i}} \\mathrm{C}_{\\mathrm{gs-i}}} \\tag{10.14}\n\\end{equation*}\n$$\n\nHence, the $-3-\\mathrm{dB}$ frequency of a single stage is roughly half the unity-gain frequency of a transistor divided by the stage's gain. For a cascade of n stages, the overall transfer function is\n\n$$\n\\begin{equation*}\n\\mathrm{A}_{\\text {total }}(\\mathrm{s})=\\prod \\mathrm{A}_{i}(\\mathrm{~s}) \\tag{10.15}\n\\end{equation*}\n$$\n\nThis can be approximated by a first-order transfer function, ignoring higher-order terms, resulting in\n\n$$\n\\begin{equation*}\n\\mathrm{A}_{\\text {total }}(\\mathrm{s}) \\cong \\frac{1 \\mathrm{~A}_{0-\\mathrm{i}}}{1+\\mathrm{s} \\sum 1 / \\omega_{\\mathrm{p}-\\mathrm{i}}} \\cong \\frac{\\mathrm{~A}_{0}^{\\mathrm{n}}}{1+\\mathrm{ns} / \\omega_{\\mathrm{p}-\\mathrm{i}}} \\tag{10.16}\n\\end{equation*}\n$$\n\nThus, a cascade of n stages has a time constant approximately\n\n$$\n\\begin{equation*}\n\\tau_{\\text {total }} \\cong \\frac{2 \\mathrm{nA}_{0} \\mathrm{C}_{\\mathrm{gs}}}{\\mathrm{~g}_{\\mathrm{m}}} \\cong 2 \\mathrm{nA}_{0} \\tau_{\\mathrm{T}} \\tag{10.17}\n\\end{equation*}\n$$\n\nwhere $\\tau_{T}=C_{g s} / g_{m}$ is the approximate transit time of a single transistor (i.e., 1 over the unity-gain frequency of a single transistor). In essence, the time constant of the cascade of first-order stages is roughly n times the time constant of a single stage, which is approximately $2 \\mathrm{~A}_{0}$ times the transit time of a single transistor. This should be compared to using a single opamp, which, for the same overall gain, would have a time constant significantly greater than $2 \\mathrm{~A}_{0}^{n}$ times the transit time of a single transistor. While the preceding speed estimate is valid for simple single-ended stages, the general principles also apply to more complex, fully differential stages, provided each stage is first order and does not require compensation.\n\nEquation (10.17) can be further simplified. Recall from Chapter 1 that\n\n$$\n\\begin{equation*}\nC_{g s}=\\frac{2}{3} C_{o x} W L \\tag{10.18}\n\\end{equation*}\n$$\n\nfor a transistor in the active region, and\n\n$$\n\\begin{equation*}\n\\mathrm{g}_{\\mathrm{m}}=\\sqrt{2 \\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}(\\mathrm{~W} / \\mathrm{L}) \\mathrm{I}_{\\mathrm{D}}} \\tag{10.19}\n\\end{equation*}\n$$\n\nSubstituting (10.18) and (10.19) into (10.17), and after simple manipulation, we arrive at\nwhere, again from Chapter 1,\n\n$$\n\\begin{equation*}\nV_{\\text {eff }}=\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x}(W / L)}} \\tag{10.21}\n\\end{equation*}\n$$\n\nEquation (10.20) is highly useful for rapidly assessing the speed and resolution capabilities of a given technology. It also offers insights into comparator design. Firstly, the effective gate-source voltages of the input drivers in each stage should be maximized to enhance speed. Secondly, the widths of the transistors have minimal impact on comparator speed, assuming they are sufficiently large so that $\\mathrm{C}_{\\mathrm{gs}}$ dominates parasitic capacitances from interconnects and external loading. However, larger input transistor sizes will improve matching, reducing offset, and generally result in higher transconductance, thereby lowering input-referred noise.\n\n#### EXAMPLE 10.5\n\nConsider a $0.2-\\mu \\mathrm{m}$ technology with $\\mathrm{A}_{0}=20, \\mathrm{n}=3, \\mathrm{~V}_{\\text {eff }}=0.5 \\mathrm{~V}$, and $\\mu_{\\mathrm{n}}=0.03 \\mathrm{~m}^{2} / \\mathrm{V} \\cdot \\mathrm{s}$. What is the maximum clocking frequency of the comparator?\n\n#### Solution\n\nUsing (10.20), we find $\\tau_{\\text {total }}=0.21 \\mathrm{~ns}$. If we assume that $3 \\tau$ is required for each half period, then a complete period requires $6 \\tau$, corresponding to a clocking frequency of 781 MHz. The resolution is approximately $2 \\mathrm{~V} / \\mathrm{A}_{0}^{\\mathrm{n}}=0.25 \\mathrm{mV}$."
},
{
    "text": "The method outlined can be employed to create very-high-resolution comparators, particularly when paired with fully differential circuit design techniques. Nonetheless, this method has the drawback of necessitating multiple-phase clock waveforms, which减速 the circuits.\n\nDespite the multi-stage approach being inherently slower due to the signal's need to traverse all stages, it can still achieve reasonable speed since each individual stage can be designed to operate quickly. Typically, each stage comprises a single-stage amplifier with only a $90^{\\circ}$ phase shift, thus eliminating the need for compensation capacitors (i.e., each stage maintains a $90^{\\circ}$ phase margin without compensation). To understand why this multi-stage approach can be swift, consider the simplified scenario of a series of first-order, uncompensated inverters, as depicted in Fig. 10.13. This configuration roughly approximates a multi-stage comparator when it is not in the reset state. The parasitic load capacitance at the output of the ith stage is approximately\n\n$$\n\\begin{equation*}\nC_{p i} \\cong C_{0-i}+C_{g s-i+1} \\tag{10.10}\n\\end{equation*}\n$$\n\nwhere $\\mathrm{C}_{0-\\mathrm{i}}$ is the output capacitance of the ${ }_{i}$ th stage, typically due to junction capacitances, and $\\mathrm{C}_{\\mathrm{gs}-\\mathrm{i}+1}$ is the gate-source capacitance of the input transistor of the subsequent stage. Equation (10.10) may not hold true for the final stage, but its load should be of similar magnitude. If the stages are assumed to be matched, then generally $\\mathrm{C}_{0 . \\mathrm{i}}<\\mathrm{C}_{\\mathrm{gs}-\\mathrm{i}+1}$ since junction capacitances are usually smaller than gate-source capacitances, leading to the assumption that\n\n$$\n\\begin{equation*}\nC_{p i}<2 C_{g s-i} \\tag{10.11}\n\\end{equation*}\n$$\n\nThe unity-gain frequency of a single stage is approximately\n\n$$\n\\begin{equation*}\n\\omega_{\\mathrm{ti}} \\sim \\frac{g_{\\mathrm{mi}}}{2 C_{\\mathrm{gs-i}}} \\tag{10.12}\n\\end{equation*}\n$$\n\nor higher, where $\\mathrm{g}_{\\mathrm{mi}}$ is the transconductance of the input capacitor of the ith stage. Thus, the unity-gain frequency of a single gain-stage is roughly half that of a single transistor. Assuming the ith stage has a dc gain $A_{0-i}$ and is well described by a first-order transfer function, the transfer function of a single stage is approximately\n\n$$\n\\begin{equation*}\nA_{i}(s)=\\frac{A_{0-i}}{1+s / \\omega_{p-i}} \\tag{10.13}\n\\end{equation*}\n$$\n\nwhere\n\n$$\n\\begin{equation*}\n\\omega_{p-i} \\cong \\frac{\\omega_{\\mathrm{ti-}}}{\\mathrm{~A}_{0-\\mathrm{i}}} \\sim \\frac{\\mathrm{~g}_{\\mathrm{mi}}}{2 \\mathrm{~A}_{0-\\mathrm{i}} \\mathrm{C}_{\\mathrm{gs-i}}} \\tag{10.14}\n\\end{equation*}\n$$\n\nThus, the $-3-\\mathrm{dB}$ frequency of a single stage is roughly half the unity-gain frequency of a transistor divided by the stage's gain. For a cascade of n stages, the overall transfer function is\n\n$$\n\\begin{equation*}\n\\mathrm{A}_{\\text {total }}(\\mathrm{s})=\\prod \\mathrm{A}_{i}(\\mathrm{~s}) \\tag{10.15}\n\\end{equation*}\n$$\n\nThis can be approximated by a first-order transfer function, ignoring higher-order terms, resulting in\n\n$$\n\\begin{equation*}\n\\mathrm{A}_{\\text {total }}(\\mathrm{s}) \\cong \\frac{1 \\mathrm{~A}_{0-\\mathrm{i}}}{1+\\mathrm{s} \\sum 1 / \\omega_{\\mathrm{p}-\\mathrm{i}}} \\cong \\frac{\\mathrm{~A}_{0}^{\\mathrm{n}}}{1+\\mathrm{ns} / \\omega_{\\mathrm{p}-\\mathrm{i}}} \\tag{10.16}\n\\end{equation*}\n$$\n\nThus, a cascade of n stages has a time constant approximately\n\n$$\n\\begin{equation*}\n\\tau_{\\text {total }} \\cong \\frac{2 \\mathrm{nA}_{0} \\mathrm{C}_{\\mathrm{gs}}}{\\mathrm{~g}_{\\mathrm{m}}} \\cong 2 \\mathrm{nA}_{0} \\tau_{\\mathrm{T}} \\tag{10.17}\n\\end{equation*}\n$$\n\nwhere $\\tau_{T}=C_{g s} / g_{m}$ is the approximate transit time of a single transistor (i.e., 1 over the unity-gain frequency of a single transistor). In essence, the time constant of the cascade of first-order stages is roughly n times the time constant of a single stage, which is approximately $2 \\mathrm{~A}_{0}$ times the transit time of a single transistor. This should be contrasted with using a single opamp, which, for the same overall gain, would have a time constant significantly greater than $2 \\mathrm{~A}_{0}^{n}$ times the transit time of a single transistor. While the preceding speed estimate applies to simple single-ended stages, the general principles also hold for more complex, fully differential stages, provided each stage is first order and uncompensated.\n\nEquation (10.17) can be further simplified. Recall from Chapter 1 that\n\n$$\n\\begin{equation*}\nC_{g s}=\\frac{2}{3} C_{o x} W L \\tag{10.18}\n\\end{equation*}\n$$\n\nfor a transistor in the active region, and\n\n$$\n\\begin{equation*}\n\\mathrm{g}_{\\mathrm{m}}=\\sqrt{2 \\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}(\\mathrm{~W} / \\mathrm{L}) \\mathrm{I}_{\\mathrm{D}}} \\tag{10.19}\n\\end{equation*}\n$$\n\nSubstituting (10.18) and (10.19) into (10.17), and after simple manipulation, we arrive at\nwhere, again from Chapter 1,\n\n$$\n\\begin{equation*}\nV_{\\text {eff }}=\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x}(W / L)}} \\tag{10.21}\n\\end{equation*}\n$$\n\nEquation (10.20) is highly useful for quickly assessing the speed and resolution capabilities of a given technology. It also offers insights into comparator design. First, the effective gate-source voltages of the input drivers of each stage should be maximized to enhance speed. Second, the widths of the transistors have minimal impact on comparator speed, assuming they are sufficiently large so that $\\mathrm{C}_{\\mathrm{gs}}$ predominates over parasitic capacitances from interconnect and external loading. However, larger input transistor sizes will be better matched, reducing offset, and generally have higher transconductance, leading to lower input-referred noise.\n\n#### EXAMPLE 10.5\n\nFor a $0.2-\\mu \\mathrm{m}$ technology with $\\mathrm{A}_{0}=20, \\mathrm{n}=3, \\mathrm{~V}_{\\text {eff }}=0.5 \\mathrm{~V}$, and $\\mu_{\\mathrm{n}}=0.03 \\mathrm{~m}^{2} / \\mathrm{V} \\cdot \\mathrm{s}$, what is the maximum clocking frequency of the comparator?\n\n#### Solution\n\nUsing (10.20), we find $\\tau_{\\text {total }}=0.21 \\mathrm{~ns}$. Assuming $3 \\tau$ is needed for each half period, a complete period requires $6 \\tau$, corresponding to a clocking frequency of 781 MHz. The resolution is approximately $2 \\mathrm{~V} / \\mathrm{A}_{0}^{\\mathrm{n}}=0.25 \\mathrm{mV}$."
},
{
    "text": "Modern high-speed comparators generally feature one or two preamplification stages followed by a track-and-latch stage, as illustrated in simplified form for a CMOS implementation in Fig. 10.14 [Yukawa, 1985]. The rationale behind this architecture is as follows: The preamplifier(s) enhance resolution and mitigate kickback effects (to be discussed shortly). Despite being larger than the comparator input, the preamplifier's output remains significantly smaller than the voltage levels required for digital circuitry. The track-and-latch stage then further amplifies this signal during the track phase and again during the latch phase, where positive feedback is activated. This positive feedback converts the analog signal into a full-scale digital signal. The track-and-latch stage reduces the number of necessary gain stages, ensuring faster operation even when high resolution is needed, compared to the multi-stage approach mentioned.\n\nThe preamplifier typically has a gain ranging from 2 to 10. Gains much higher than 10 are usually avoided to prevent excessive time constants that limit speed. One or two simple resistively-loaded differential pair stages are often adequate. The input offset and noise of the track-and-latch stage are diminished by the preamplifier's gain when referenced to the comparator input. Thus, the preamplifier's noise and offset, assuming a modest gain, often define the comparator's noise and offset limits. ${ }^{5}$ For scenarios requiring very high speed but only moderate resolution, the preamplifier might be a unity-gain buffer.\n\nEliminating the preamplifier is not advisable, as kickback into the driving circuitry would severely compromise accuracy. Kickback refers to the charge transfer into or out of the inputs when transitioning from track to latch mode. This charge transfer is due to the energy needed to activate transistors in the positive-feedback circuitry and to deactivate those in the tracking circuitry. Without a preamplifier or buffer, kickback-induced glitches in the driving circuitry would be substantial, especially if the input impedances are not perfectly matched.\n\nIn high-resolution applications, capacitive coupling and reset switches are often incorporated to eliminate input-offset-voltage and clock-feedthrough errors, similar to methods described in Sections 10.2 and 10.3.\n\nA crucial aspect for comparators is preventing memory transfer between decision cycles. Hysteresis, where a comparator tends to remain in its previous state, can be eliminated by resetting stages before entering track mode. This can be achieved by connecting internal nodes to power supplies or linking differential nodes via switches before tracking begins. For instance, in Fig. 10.14, the latch's internal nodes are reset to $\\mathrm{V}_{\\mathrm{DD}}$ and ground when the $\\mathrm{V}_{\\text {Itch }}$ signal is low, eradicating memory and setting the comparator to its trip point for faster operation with small input signals.\n\nAnother factor is ensuring the gain in track mode is not excessively high, as large time constants would limit speed.\n\nThe track-and-latch stage exhibits numerous variations. The circuit in Fig. 10.14, while symbolic, is often sufficient for many applications."
},
{
    "text": "Modern high-speed comparators generally feature one or two preamplification stages followed by a track-and-latch stage, as illustrated in simplified form for a CMOS implementation in Fig. 10.14 [Yukawa, 1985]. The rationale behind this architecture is as follows: The preamplifier stages are employed to enhance resolution and mitigate kickback effects (which will be discussed shortly). Although the preamplifier's output is greater than the comparator input, it remains significantly lower than the voltage levels required for driving digital circuits. The track-and-latch stage then further amplifies this signal during the track phase and again during the latch phase, where positive feedback is activated. This positive feedback converts the analog signal into a full-scale digital signal. The track-and-latch stage reduces the number of necessary gain stages, even when high resolution is needed, thereby enhancing speed compared to the multi-stage approach described earlier.\n\nThe preamplifier typically exhibits a gain ranging from 2 to 10. Gains much beyond 10 are usually avoided to prevent excessive time constants that limit speed. One or two simple resistively-loaded differential pair stages are often adequate. The input offset and noise of the track-and-latch stage are diminished by the preamplifier's gain when referenced to the comparator input. Thus, assuming a modest gain, the preamplifier's noise and offset often determine the comparator's noise and offset. ${ }^{5}$ For scenarios demanding very high speed but only moderate resolution, the preamplifier might sometimes be a unity-gain buffer.\n\nEliminating the preamplifier entirely is not advisable, as kickback into the driving circuitry would severely compromise accuracy. Kickback refers to the charge transfer into or out of the inputs when transitioning from track to latch mode. This charge transfer is due to the energy required to activate transistors in the positive-feedback circuitry and to deactivate those in the tracking circuitry. Without a preamplifier or buffer, kickback would infiltrate the driving circuitry, causing significant glitches, especially if the input impedances are not perfectly matched.\n\nIn high-resolution applications, capacitive coupling and reset switches are commonly included to eliminate input-offset-voltage and clock-feedthrough errors, similar to methods described in Sections 10.2 and 10.3.\n\nA crucial aspect for comparators is ensuring no memory transfer between decision cycles. Hysteresis, where a comparator tends to remain in its previous state, can be mitigated by resetting stages before entering track mode. This can be achieved by connecting internal nodes to a power supply or by linking differential nodes via switches before tracking begins. For instance, in Fig. 10.14, the latch's internal nodes are reset to both $\\mathrm{V}_{\\mathrm{DD}}$ and ground when the $\\mathrm{V}_{\\text {Itch }}$ signal is low. This not only eradicates memory but also positions the comparator at its trip point, enhancing speed for small input signal resolution.\n\nAnother important factor is that the gain in track mode should not be excessively high, as this would increase time constants and limit speed.\n\nThe track-and-latch stage exhibits numerous variations. The circuitry depicted in Fig. 10.14 should be viewed as symbolic, though it is sufficient for many applications."
},
{
    "text": "Modern high-speed comparators generally feature one or two preamplification stages followed by a track-and-latch stage, as depicted in a simplified form for a CMOS implementation in Fig. 10.14 [Yukawa, 1985]. The underlying rationale for this architecture is as follows: The preamplifier(s) enhance resolution and mitigate kickback effects (to be discussed shortly). Despite the preamplifier's output being larger than the comparator input, it remains significantly smaller than the voltage levels required for digital circuitry. The track-and-latch stage further amplifies the signal during the track phase and again during the latch phase, where positive feedback is activated. This positive feedback converts the analog signal into a full-scale digital signal. The track-and-latch stage reduces the number of necessary gain stages, ensuring faster operation even when high resolution is needed, compared to the multi-stage approach mentioned.\n\nTypically, the preamplifier has a gain ranging from 2 to 10. Gains much beyond 10 are avoided to prevent excessive time constants that would limit speed. Simple resistively-loaded differential pair stages are often adequate. The input offset and noise of the track-and-latch stage are diminished by the preamplifier's gain when referenced to the comparator input. Thus, the preamplifier's noise and offset, assuming a modest gain, often determine the comparator's noise and offset. ${ }^{5}$ For scenarios demanding very high speed but only moderate resolution, the preamplifier might be a unity-gain buffer.\n\nEliminating the preamplifier is not advisable, as it would result in significant kickback into the driving circuitry, severely compromising accuracy. Kickback refers to the charge transfer into or out of the inputs when transitioning from track to latch mode, caused by the charge needed to activate transistors in the positive-feedback circuitry and to deactivate those in the tracking circuitry. Without a preamplifier or buffer, this kickback induces large glitches, particularly when the input impedances are not perfectly matched.\n\nIn high-resolution applications, capacitive coupling and reset switches are commonly included to eliminate input-offset-voltage and clock-feedthrough errors, similar to methods described in Sections 10.2 and 10.3.\n\nA crucial aspect for comparators is preventing memory transfer between decision cycles. Hysteresis, where a comparator tends to remain in its previous state, can be mitigated by resetting stages before entering track mode. This can be achieved by connecting internal nodes to power supplies or linking differential nodes via switches. For instance, in Fig. 10.14, the latch's internal nodes are reset to $\\mathrm{V}_{\\mathrm{DD}}$ and ground when the $\\mathrm{V}_{\\text {Itch }}$ signal is low, eliminating memory and setting the comparator to its trip point for faster operation with small input signals.\n\nAnother key consideration is that the gain in track mode should not be excessively high, as this increases time constants and limits speed.\n\nThe track-and-latch stage exhibits numerous variations. The circuitry in Fig. 10.14 should be viewed as symbolic, though it is often sufficient for many applications."
},
{
    "text": "Modern high-speed comparators generally feature one or two preamplification stages followed by a track-and-latch stage, as depicted in simplified form for a CMOS implementation in Fig. 10.14 [Yukawa, 1985]. The underlying rationale for this architecture is as follows: The preamplifier(s) enhance resolution and mitigate kickback effects (to be discussed shortly). Although the preamplifier's output is greater than the comparator input, it remains significantly lower than the voltage levels required for digital circuitry. The track-and-latch stage subsequently amplifies this signal during the track phase and further during the latch phase, where positive feedback is activated. This positive feedback converts the analog signal into a full-scale digital signal. The track-and-latch stage reduces the number of necessary gain stages, ensuring faster operation even when high resolution is needed, compared to the multi-stage approach previously described.\n\nThe preamplifier typically has a gain ranging from 2 to 10. Gains much beyond 10 are usually avoided to prevent excessive time constants and limited speed. One or two simple resistively-loaded differential pair stages are often adequate. The input offset and noise of the track-and-latch stage are diminished by the preamplifier's gain when referenced to the comparator input. Thus, if the preamplifier provides at least moderate gain, its noise and offset will often define the comparator's noise and offset. ${ }^{5}$ For scenarios requiring very high speed but only moderate resolution, the preamplifier might be a unity-gain buffer.\n\nEliminating the preamplifier entirely is not advisable, as it would result in significant kickback into the driving circuitry, severely limiting accuracy. Kickback refers to the charge transfer into or out of the inputs when transitioning from track to latch mode. This transfer is due to the charge needed to activate the transistors in the positive-feedback circuitry and to deactivate those in the tracking circuitry. Without a preamplifier or buffer, this kickback would cause substantial glitches, particularly if the input impedances are not perfectly matched.\n\nIn high-resolution applications, capacitive coupling and reset switches are commonly included to eliminate input-offset-voltage and clock-feedthrough errors, similar to methods described in Sections 10.2 and 10.3.\n\nA crucial aspect for comparators is ensuring no memory transfer between decision cycles. When a comparator toggles in one direction, it may tend to remain in that state, a phenomenon known as hysteresis. To prevent hysteresis, stages can be reset before entering track mode, achieved by connecting internal nodes to a power supply or linking differential nodes via switches. For instance, in Fig. 10.14, the latch's internal nodes are reset to both $\\mathrm{V}_{\\mathrm{DD}}$ and ground when the $\\mathrm{V}_{\\text {Itch }}$ signal is low. This not only eradicates memory but also sets the comparator to its trip point, enhancing speed for small input signal resolution.\n\nAnother critical factor is that the gain in track mode should not be excessively high, as large time constants would limit speed.\n\nThe track-and-latch stage exhibits numerous variations. The circuitry in Fig. 10.14 should be viewed as symbolic, though it is often sufficient for many applications."
},
{
    "text": "Modern high-speed comparators commonly feature one or two preamplification stages followed by a track-and-latch stage, as illustrated in simplified form for a CMOS implementation in Fig. 10.14 [Yukawa, 1985]. The rationale behind this architecture is as follows: The preamplifier(s) enhance resolution and mitigate kickback effects (to be explained shortly). Although the preamplifier's output is larger than the comparator input, it remains significantly smaller than the voltage levels required for digital circuitry. The track-and-latch stage then further amplifies this signal during the track phase and again during the latch phase, where positive feedback is activated. This positive feedback converts the analog signal into a full-scale digital signal. The track-and-latch stage reduces the number of required gain stages, ensuring faster operation even when high resolution is necessary.\n\nTypically, the preamplifier has a gain ranging from 2 to 10. Gains much higher than 10 are usually avoided to prevent excessive time constants that limit speed. Simple resistively-loaded differential pair stages are often adequate. The input offset and noise of the track-and-latch stage are reduced by the preamplifier's gain when referenced to the comparator input. Thus, the preamplifier's noise and offset, provided it offers at least modest gain, often define the comparator's noise and offset. ${ }^{5}$ In scenarios demanding very high speed but only moderate resolution, the preamplifier might be a unity-gain buffer.\n\nEliminating the preamplifier is not advisable, as kickback into the driving circuitry would severely limit accuracy. Kickback refers to the charge transfer into or out of the inputs when transitioning from track to latch mode, caused by the charge needed to activate transistors in the positive-feedback circuitry and to deactivate those in the tracking circuitry. Without a preamplifier or buffer, this kickback induces significant glitches, especially if the input impedances are not perfectly matched.\n\nIn high-resolution applications, capacitive coupling and reset switches are often included to eliminate input-offset-voltage and clock-feedthrough errors, similar to methods described in Sections 10.2 and 10.3.\n\nA crucial aspect for comparators is ensuring no memory transfer between decision cycles. Hysteresis, where a comparator tends to stay in its last toggled state, can be eliminated by resetting stages before entering track mode. This can be achieved by connecting internal nodes to power supplies or linking differential nodes via switches. For instance, in Fig. 10.14, the latch's internal nodes are reset to $\\mathrm{V}_{\\mathrm{DD}}$ and ground when the $\\mathrm{V}_{\\text {Itch }}$ signal is low, eliminating memory and setting the comparator to its trip point for faster operation with small input signals.\n\nAnother consideration is that the gain in track mode should not be excessively high, as large time constants would limit speed.\n\nThe track-and-latch stage exhibits numerous variations. The circuitry in Fig. 10.14 should be viewed as symbolic, though it is sufficient for many applications."
},
{
    "text": "Modern high-speed comparators usually feature one or two preamplification stages followed by a track-and-latch stage, as depicted in simplified form for a CMOS implementation in Fig. 10.14 [Yukawa, 1985]. The rationale behind this design is as follows: The preamplifier(s) enhance resolution and mitigate kickback effects (to be explained shortly). Despite being larger than the comparator input, the preamplifier's output remains significantly smaller than the voltages required for digital circuitry. The track-and-latch stage further amplifies this signal during the track phase and again during the latch phase, where positive feedback is activated. This positive feedback converts the analog signal into a full-scale digital signal. By minimizing the number of gain stages needed, even for high resolution, the track-and-latch stage is faster than the multi-stage approach previously described.\n\nTypically, the preamplifier has a gain ranging from 2 to 10. Gains much beyond 10 are usually avoided to prevent excessive time constants that limit speed. One or two simple resistively-loaded differential pair stages are often adequate. The input offset and noise of the track-and-latch stage are reduced by the preamplifier's gain when referenced to the comparator input. Thus, assuming it provides at least moderate gain, the preamplifier's noise and offset often determine the comparator's overall noise and offset. ${ }^{5}$ In scenarios requiring very high speed but only moderate resolution, the preamplifier might be a unity-gain buffer.\n\nEliminating the preamplifier is not advisable, as kickback into the driving circuitry would severely limit accuracy. Kickback refers to the charge transfer into or out of the inputs when transitioning from track to latch mode. This charge transfer results from the energy needed to activate transistors in the positive-feedback circuitry and to deactivate those in the tracking circuitry. Without a preamplifier or buffer, kickback induces significant glitches, particularly if the input impedances are not perfectly matched.\n\nIn high-resolution applications, capacitive coupling and reset switches are often included to eliminate input-offset-voltage and clock-feedthrough errors, similar to methods described in Sections 10.2 and 10.3.\n\nA crucial aspect for comparators is ensuring no memory transfer between decision cycles. Hysteresis, where a comparator tends to remain in its last state, can be mitigated by resetting stages before entering track mode. This can be achieved by connecting internal nodes to power supplies or linking differential nodes via switches. For instance, in Fig. 10.14, the latch's internal nodes are reset to $\\mathrm{V}_{\\mathrm{DD}}$ and ground when the $\\mathrm{V}_{\\text {Itch }}$ signal is low, eliminating memory and setting the comparator to its trip point for faster operation with small input signals.\n\nAnother key consideration is that the gain in track mode should not be excessively high, as large time constants would limit speed.\n\nThe track-and-latch stage exhibits numerous variations. The circuitry in Fig. 10.14 is symbolic but sufficient for many applications."
},
{
    "text": "Modern high-speed comparators generally feature one or two preamplification stages followed by a track-and-latch stage, as depicted in simplified form for a CMOS implementation in Fig. 10.14 [Yukawa, 1985]. The underlying principle of this architecture is as follows: The preamplifier(s) enhance resolution and mitigate kickback effects (to be discussed shortly). Despite being larger than the comparator input, the preamplifier's output remains significantly smaller than the voltage levels required for digital circuitry. The track-and-latch stage further amplifies this signal during the track phase and again during the latch phase, where positive feedback is activated. This positive feedback converts the analog signal into a full-scale digital signal. The track-and-latch stage reduces the number of necessary gain stages, ensuring faster operation even when high resolution is needed, compared to the multi-stage approach mentioned.\n\nTypically, the preamplifier has a gain ranging from 2 to 10. Gains exceeding 10 are usually avoided to prevent excessive time constants that limit speed. One or two simple resistively-loaded differential pair stages are often adequate. The input offset and noise of the track-and-latch stage are reduced by the preamplifier's gain when referenced to the comparator input. Thus, the preamplifier's noise and offset, assuming modest gain, often define the comparator's noise and offset limits. ${ }^{5}$ For scenarios requiring very high speed but only moderate resolution, the preamplifier might be a unity-gain buffer.\n\nEliminating the preamplifier is not advisable, as it would result in significant kickback into the driving circuitry, severely compromising accuracy. Kickback refers to the charge transfer into or out of the inputs when transitioning from track to latch mode. This transfer is due to the charge needed to activate transistors in the positive-feedback circuitry and to deactivate those in the tracking circuitry. Without a preamplifier or buffer, kickback induces substantial glitches, particularly when input impedances are not perfectly matched.\n\nIn high-resolution applications, capacitive coupling and reset switches are often included to eliminate input-offset-voltage and clock-feedthrough errors, similar to methods described in Sections 10.2 and 10.3.\n\nA crucial aspect for comparators is preventing memory transfer between decision cycles. Hysteresis, where a comparator tends to remain in its previous state, can be mitigated by resetting stages before entering track mode. This can be achieved by connecting internal nodes to power supplies or linking differential nodes via switches. For instance, in Fig. 10.14, the latch's internal nodes are reset to $\\mathrm{V}_{\\mathrm{DD}}$ and ground when the $\\mathrm{V}_{\\text {Itch }}$ signal is low, eliminating memory and setting the comparator to its trip point for faster operation with small input signals.\n\nAnother important consideration is that the gain in track mode should not be excessively high, as large time constants would limit speed.\n\nThe track-and-latch stage exhibits numerous variations. The circuitry in Fig. 10.14 should be viewed as symbolic, though it is suitable for many applications."
},
{
    "text": "Modern high-speed comparators generally feature one or two preamplification stages followed by a track-and-latch stage, as illustrated in simplified form for a CMOS implementation in Fig. 10.14 [Yukawa, 1985]. The rationale behind this architecture is as follows: The preamplifier(s) enhance resolution and mitigate kickback effects (which will be discussed shortly). Although the preamplifier's output is greater than the comparator input, it remains significantly lower than the voltage levels required for digital circuitry. The track-and-latch stage further amplifies this signal during the track phase and again during the latch phase, where positive feedback is activated. This positive feedback converts the analog signal into a full-scale digital signal. The track-and-latch stage reduces the number of necessary gain stages, ensuring faster operation even when high resolution is needed, compared to the multi-stage approach previously described.\n\nTypically, the preamplifier has a gain ranging from 2 to 10. Gains much higher than 10 are usually avoided to prevent excessive time constants that limit speed. One or two simple resistively-loaded differential pair stages are often adequate. The input offset and noise of the track-and-latch stage are diminished by the preamplifier's gain when referenced to the comparator input. Therefore, provided the preamplifier offers at least modest gain, its noise and offset will often define the comparator's noise and offset. ${ }^{5}$ In scenarios demanding very high speed but only moderate resolution, the preamplifier might be a unity-gain buffer.\n\nEliminating the preamplifier entirely is not advisable, as kickback into the driving circuitry would severely limit accuracy. Kickback refers to the charge transfer into or out of the inputs when transitioning from track to latch mode. This charge transfer is due to the charge required to activate transistors in the positive-feedback circuitry and to deactivate transistors in the tracking circuitry. Without a preamplifier or buffer, kickback would infiltrate the driving circuitry, causing significant glitches, particularly if the input impedances are not perfectly matched.\n\nIn high-resolution applications, capacitive coupling and reset switches are often incorporated to eliminate input-offset-voltage and clock-feedthrough errors, similar to methods described in Sections 10.2 and 10.3.\n\nA crucial aspect for comparators is ensuring no memory transfer occurs between decision cycles. When a comparator toggles in one direction, it may tend to stay in that state, known as hysteresis. To eliminate hysteresis, stages can be reset before entering track mode, achieved by connecting internal nodes to a power supply or linking differential nodes via switches. For instance, in Fig. 10.14, the latch's internal nodes are reset to $\\mathrm{V}_{\\mathrm{DD}}$ and ground when the $\\mathrm{V}_{\\text {Itch }}$ signal is low. This not only eradicates memory but also sets the comparator to its trip point, enhancing speed for small input signal resolution.\n\nAnother consideration is that the gain in track mode should not be excessively high, as large time constants would impede speed.\n\nThe track-and-latch stage exhibits numerous variations. The circuitry in Fig. 10.14 should be viewed as symbolic, though it is effective in many applications."
},
{
    "text": "The time constant of the latch during its positive-feedback (i.e., latch) phase can be determined by analyzing a simplified circuit composed of two back-to-back inverters, as illustrated in Fig. 10.15. Assuming the output voltages of the inverters are initially close and the inverters operate within their linear range, each inverter can be modeled as a voltage-controlled current source driving an RC load, as depicted in Fig. 10.16. Here, $A_{V}$ represents the low-frequency gain of each inverter, with a transconductance $G_{m}$ given by $G_{m}=A_{V} / R_{L}$. For this linearized model, the equations are:\n\n$$\n\\begin{equation*}\n\\frac{A_{v}}{R_{L}} V_{y}=-C_{L}\\left(\\frac{d V_{x}}{d t}\\right)-\\left(\\frac{V_{x}}{R_{D}}\\right) \\tag{10.22}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\frac{A_{v}}{R_{L}} V_{x}=-C_{L}\\left(\\frac{d V_{y}}{d t}\\right)-\\left(\\frac{V_{y}}{R_{L}}\\right) \\tag{10.23}\n\\end{equation*}\n$$\n\nMultiplying (10.22) and (10.23) by $R_{L}$ and rearranging yields:\n\n$$\n\\begin{equation*}\n\\tau\\left(\\frac{d V_{x}}{d t}\\right)+V_{x}=-A_{v} V_{y} \\tag{10.24}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\tau\\left(\\frac{d V_{y}}{d t}\\right)+V_{y}=-A_{v} V_{x} \\tag{10.25}\n\\end{equation*}\n$$\n\nwhere $\\tau=R_{L} C_{L}$ is the time constant at the output node of each inverter. Subtracting (10.25) from (10.24) and rearranging terms results in:\n\n$$\n\\begin{equation*}\n\\left(\\frac{\\tau}{A_{V}-1}\\right)\\left(\\frac{d \\Delta V}{dt}\\right)=\\Delta V \\tag{10.26}\n\\end{equation*}\n$$\n\nwith $\\Delta V=V_{x}-V_{y}$ being the voltage difference between the inverter outputs. Equation (10.26) is a first-order differential equation without a forcing function, whose solution is:\n\n$$\n\\begin{equation*}\n\\Delta V=\\Delta V_{0} e^{(A_{v}-1) t / \\tau} \\tag{10.27}\n\\end{equation*}\n$$\n\nwhere $\\Delta V_{0}$ is the initial voltage difference at the onset of the latch phase. Thus, the voltage difference increases exponentially over time with a time constant:\n\n$$\n\\begin{equation*}\n\\tau_{\\text{latch}}=\\frac{\\tau}{A_{V}-1} \\approx \\frac{R_{L} C_{L}}{A_{V}}=\\frac{C_{L}}{G_{m}} \\tag{10.28}\n\\end{equation*}\n$$\n\nHere, $G_{m}=A_{V} / R_{L}$ is the transconductance of each inverter. Note that $\\tau_{\\text{latch}}$ is approximately the inverse of the unity-gain frequency of each inverter.\n\nFor MOS devices, the output load typically corresponds to the gate-source capacitance of a single transistor, specifically:\n\n$$\n\\begin{equation*}\nC_{L}=K_{1} WLC_{ox} \\tag{10.29}\n\\end{equation*}\n$$\n\nwhere $K_{1}$ is a proportionality constant, usually between 1 and 2. The inverter transconductance, proportional to the transconductance of a single transistor, is given by:\n\n$$\n\\begin{equation*}\nG_{m}=K_{2} g_{m}=K_{2} \\mu_{n} C_{ox} \\frac{W}{L} V_{\\text{eff}} \\tag{10.30}\n\\end{equation*}\n$$\n\nwith $K_{2}$ typically between 0.5 and 1. Substituting (10.29) and (10.30) into (10.28) yields:\n\n$$\n\\begin{equation*}\n\\tau_{\\text{latch}}=\\frac{K_{1}}{K_{2}} \\frac{L^{2}}{\\mu_{n} V_{\\text{eff}}} = K_{3} \\frac{L^{2}}{\\mu_{n} V_{\\text{eff}}} \\tag{10.31}\n\\end{equation*}\n$$\n\nwhere $K_{3}$ might range from 2 to 4. Note that (10.31) indicates $\\tau_{\\text{latch}}$ primarily depends on the technology rather than the design, assuming a reasonable $V_{\\text{eff}}$ and minimized $C_{L}$. The similarity between (10.31) and (10.20), the equation for the time constant of a cascade of gain stages, is also noteworthy. For a given technology, (10.31) is useful for estimating the maximum clock frequency of a latch-and-track comparator.\n\nIf a voltage difference of $\\Delta V_{\\text{logic}}$ is required for subsequent logic circuitry to reliably recognize the correct output, using (10.27) gives the necessary time as:\n\n$$\n\\begin{equation*}\nT_{\\text{latch}}=\\frac{C_{L}}{G_{m}} \\ln \\left(\\frac{\\Delta V_{\\text{logic}}}{\\Delta V_{0}}\\right) = K_{3} \\frac{L^{2}}{\\mu_{n} V_{\\text{eff}}} \\ln \\left(\\frac{\\Delta V_{\\text{logic}}}{\\Delta V_{0}}\\right) \\tag{10.32}\n\\end{equation*}\n$$\n\nIf $\\Delta V_{0}$ is small, the latch time can be substantial, potentially exceeding the allowed time for the latch phase, a situation often termed metastability. In other words, an insufficient initial voltage difference prevents the latch's differential output voltage from reaching a recognizable logic value. Sometimes, even with a sufficient initial voltage difference, circuit noise can reduce it to a level causing metastability.\n\nKey Point: A positive-feedback latch output grows exponentially with a time constant determined by the unity-gain frequency, $G_{m} / C_{L}$. When the initial input is too small, metastability may arise, resulting in insufficient voltage growth for a recognizable logic signal at the latch output before the reset phase begins.\n\n#### EXAMPLE 10.6\n\nFor a $0.2-\\mu$m technology with $K_{3}=2.5$, $\\Delta V_{0}=1$ mV, $\\Delta V_{\\text{logic}}=1$ V, $V_{\\text{eff}}=0.5$ V, and $\\mu_{n}=0.03$ M²/V·s, determine the maximum clocking frequency of the comparator.\n\n#### Solution\n\nUsing (10.32), $T_{\\text{latch}}=46$ ps. Assuming this is half the total period (an optimistic assumption), the smallest possible period for a track-and-latch is 92 ps, corresponding to a clocking frequency of 11 GHz. Typically, the maximum clock rate in a comparator is limited by the frequency response of the preamplifiers and the track-and-latch during the track phase, rather than the latch speed during the latch phase."
},
{
    "text": "The time constant of the latch during its positive-feedback (i.e., latch) phase can be determined by analyzing a simplified circuit comprising two back-to-back inverters, as illustrated in Fig. 10.15. Assuming the output voltages of the inverters are initially close and the inverters operate within their linear range, each inverter can be modeled as a voltage-controlled current source driving an RC load, as depicted in Fig. 10.16, where $A_{V}$ represents the low-frequency gain of each inverter, with a transconductance $G_{m}=A_{V} / R_{L}$. For this linearized model, the following equations apply:\n\n$$\n\\begin{equation*}\n\\frac{A_{v}}{R_{L}} V_{y}=-C_{L}\\left(\\frac{d V_{x}}{d t}\\right)-\\left(\\frac{V_{x}}{R_{D}}\\right) \\tag{10.22}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\frac{A_{v}}{R_{L}} V_{x}=-C_{L}\\left(\\frac{d V_{y}}{d t}\\right)-\\left(\\frac{V_{y}}{R_{L}}\\right) \\tag{10.23}\n\\end{equation*}\n$$\n\nMultiplying (10.22) and (10.23) by $R_{L}$ and rearranging yields:\n\n$$\n\\begin{equation*}\n\\tau\\left(\\frac{d V_{x}}{d t}\\right)+V_{x}=-A_{v} V_{y} \\tag{10.24}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\tau\\left(\\frac{d V_{y}}{d t}\\right)+V_{y}=-A_{v} V_{x} \\tag{10.25}\n\\end{equation*}\n$$\n\nwhere $\\tau=R_{L} C_{L}$ is the time constant at the output node of each inverter. Subtracting (10.25) from (10.24) and rearranging terms results in:\n\n$$\n\\begin{equation*}\n\\left(\\frac{\\tau}{A_{V}-1}\\right)\\left(\\frac{d \\Delta V}{dt}\\right)=\\Delta V \\tag{10.26}\n\\end{equation*}\n$$\n\nwith $\\Delta V=V_{x}-V_{y}$ being the voltage difference between the inverter outputs. Equation (10.26) is a first-order differential equation without a forcing function, and its solution is:\n\n$$\n\\begin{equation*}\n\\Delta V=\\Delta V_{0} e^{\\left(A_{v}-1\\right) t / \\tau} \\tag{10.27}\n\\end{equation*}\n$$\n\nwhere $\\Delta V_{0}$ is the initial voltage difference at the start of the latch phase. Thus, the voltage difference increases exponentially over time with a time constant:\n\n$$\n\\begin{equation*}\n\\tau_{\\text{latch}}=\\frac{\\tau}{A_{V}-1} \\approx \\frac{R_{L} C_{L}}{A_{V}}=\\frac{C_{L}}{G_{m}} \\tag{10.28}\n\\end{equation*}\n$$\n\nwhere $G_{m}=A_{V} / R_{L}$ is the transconductance of each inverter. Note that $\\tau_{\\text{latch}}$ is approximately equal to the inverse of the unity-gain frequency of each inverter.\n\nFor MOS devices, the output load typically corresponds to the gate-source capacitance of a single transistor, specifically:\n\n$$\n\\begin{equation*}\nC_{L}=K_{1} WLC_{ox} \\tag{10.29}\n\\end{equation*}\n$$\n\nHere, $K_{1}$ is a proportionality constant, usually between 1 and 2. The inverter transconductance, proportional to the transconductance of a single transistor, is given by:\n\n$$\n\\begin{equation*}\nG_{m}=K_{2} g_{m}=K_{2} \\mu_{n} C_{ox} \\frac{W}{L} V_{\\text{eff}} \\tag{10.30}\n\\end{equation*}\n$$\n\nwhere $K_{2}$ typically ranges from 0.5 to 1. Substituting (10.29) and (10.30) into (10.28) yields:\n\n$$\n\\begin{equation*}\n\\tau_{\\text{latch}}=\\frac{K_{1}}{K_{2}} \\frac{L^{2}}{\\mu_{n} V_{\\text{eff}}} = K_{3} \\frac{L^{2}}{\\mu_{n} V_{\\text{eff}}} \\tag{10.31}\n\\end{equation*}\n$$\n\nwith $K_{3}$ usually between 2 and 4. Note that (10.31) indicates $\\tau_{\\text{latch}}$ primarily depends on the technology rather than the design, assuming a reasonable $V_{\\text{eff}}$ and minimized $C_{L}$. The similarity between (10.31) and (10.20), the equation for the time constant of a cascade of gain stages, is also noteworthy. For a given technology, (10.31) is useful for estimating the maximum clock frequency of a latch-and-track comparator.\n\nIf a voltage difference of $\\Delta V_{\\text{logic}}$ is required for subsequent logic circuitry to reliably recognize the correct output, using (10.27) reveals the necessary time:\n\n$$\n\\begin{equation*}\nT_{\\text{latch}}=\\frac{C_{L}}{G_{m}} \\ln \\left(\\frac{\\Delta V_{\\text{logic}}}{\\Delta V_{0}}\\right)=K_{3} \\frac{L^{2}}{\\mu_{n} V_{\\text{eff}}} \\ln \\left(\\frac{\\Delta V_{\\text{logic}}}{\\Delta V_{0}}\\right) \\tag{10.32}\n\\end{equation*}\n$$\n\nIf $\\Delta V_{0}$ is small, the latch time can be substantial, potentially exceeding the allowed time for the latch phase, a condition known as metastability. In other words, an insufficient initial voltage difference prevents the latch's differential output voltage from reaching a recognizable logic value. Sometimes, even with a sufficient initial voltage difference, circuit noise can reduce it to a level causing metastability.\n\nKey Point: A positive-feedback latch output grows exponentially with a time constant determined by the unity-gain frequency, $G_{m} / C_{L}$. When the initial input is too small, metastability may arise, slowing the growth and preventing a recognizable logic signal from appearing at the latch output before the reset phase begins.\n\n#### EXAMPLE 10.6\n\nFor a $0.2-\\mu$m technology with $K_{3}=2.5$, $\\Delta V_{0}=1$ mV, $\\Delta V_{\\text{logic}}=1$ V, $V_{\\text{eff}}=0.5$ V, and $\\mu_{n}=0.03$ M²/V·s, determine the maximum clocking frequency of the comparator.\n\n#### Solution\n\nUsing (10.32), we find $T_{\\text{latch}}=46$ ps. Assuming this is half the total period (an optimistic assumption), the minimum possible period for a track-and-latch is 92 ps, corresponding to a clocking frequency of 11 GHz. Typically, the maximum clock rate in a comparator is limited by the frequency response of the preamplifiers and the track-and-latch during the track phase, rather than the speed of the latch during the latch phase."
},
{
    "text": "The time constant of the latch during its positive-feedback (i.e., latch) phase can be determined by examining a simplified circuit composed of two back-to-back inverters, as illustrated in Fig. 10.15. Assuming the output voltages of the inverters are nearly equal at the onset of the latch phase and that the inverters operate within their linear range, each inverter can be modeled as a voltage-controlled current source driving an RC load, as depicted in Fig. 10.16. Here, $A_{V}$ represents the low-frequency gain of each inverter, with a transconductance $G_{m}=A_{V} / R_{L}$. For this linearized model, the equations are:\n\n$$\n\\begin{equation*}\n\\frac{A_{v}}{R_{L}} V_{y}=-C_{L}\\left(\\frac{d V_{x}}{d t}\\right)-\\left(\\frac{V_{x}}{R_{D}}\\right) \\tag{10.22}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\frac{A_{v}}{R_{L}} V_{x}=-C_{L}\\left(\\frac{d V_{y}}{d t}\\right)-\\left(\\frac{V_{y}}{R_{L}}\\right) \\tag{10.23}\n\\end{equation*}\n$$\n\nMultiplying (10.22) and (10.23) by $R_{L}$ and rearranging yields:\n\n$$\n\\begin{equation*}\n\\tau\\left(\\frac{d V_{x}}{d t}\\right)+V_{x}=-A_{v} V_{y} \\tag{10.24}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\tau\\left(\\frac{d V_{y}}{d t}\\right)+V_{y}=-A_{v} V_{x} \\tag{10.25}\n\\end{equation*}\n$$\n\nwhere $\\tau=R_{L} C_{L}$ is the time constant at the output node of each inverter. Subtracting (10.25) from (10.24) and rearranging terms results in:\n\n$$\n\\begin{equation*}\n\\left(\\frac{\\tau}{A_{V}-1}\\right)\\left(\\frac{d \\Delta V}{dt}\\right)=\\Delta V \\tag{10.26}\n\\end{equation*}\n$$\n\nwith $\\Delta V=V_{x}-V_{y}$ being the voltage difference between the inverter outputs. Equation (10.26) is a first-order differential equation without a forcing function, and its solution is:\n\n$$\n\\begin{equation*}\n\\Delta V=\\Delta V_{0} e^{(A_{v}-1) t / \\tau} \\tag{10.27}\n\\end{equation*}\n$$\n\nwhere $\\Delta V_{0}$ is the initial voltage difference at the latch phase's start. Thus, the voltage difference increases exponentially over time with a time constant:\n\n$$\n\\begin{equation*}\n\\tau_{\\text{latch}}=\\frac{\\tau}{A_{V}-1} \\approx \\frac{R_{L} C_{L}}{A_{V}}=\\frac{C_{L}}{G_{m}} \\tag{10.28}\n\\end{equation*}\n$$\n\nHere, $G_{m}=A_{V} / R_{L}$ is the transconductance of each inverter. Note that $\\tau_{\\text{latch}}$ is approximately the inverse of the unity-gain frequency of each inverter.\n\nFor MOS devices, the output load typically corresponds to the gate-source capacitance of a single transistor, specifically:\n\n$$\n\\begin{equation*}\nC_{L}=K_{1} WLC_{ox} \\tag{10.29}\n\\end{equation*}\n$$\n\nwhere $K_{1}$ is a proportionality constant, usually between 1 and 2. The inverter transconductance, proportional to a single transistor's transconductance, is given by:\n\n$$\n\\begin{equation*}\nG_{m}=K_{2} g_{m}=K_{2} \\mu_{n} C_{ox} \\frac{W}{L} V_{\\text{eff}} \\tag{10.30}\n\\end{equation*}\n$$\n\nwith $K_{2}$ typically between 0.5 and 1. Substituting (10.29) and (10.30) into (10.28) results in:\n\n$$\n\\begin{equation*}\n\\tau_{\\text{latch}}=\\frac{K_{1}}{K_{2}} \\frac{L^{2}}{\\mu_{n} V_{\\text{eff}}} = K_{3} \\frac{L^{2}}{\\mu_{n} V_{\\text{eff}}} \\tag{10.31}\n\\end{equation*}\n$$\n\nwhere $K_{3}$ might range from 2 to 4. Note that (10.31) indicates $\\tau_{\\text{latch}}$ primarily depends on the technology, not the design (assuming a reasonable $V_{\\text{eff}}$ and minimized $C_{L}$). The similarity between (10.31) and (10.20), the equation for a cascade of gain stages' time constant, is also noteworthy. For a given technology, (10.31) is useful for estimating the maximum clock frequency of a latch-and-track comparator.\n\nIf a voltage difference of $\\Delta V_{\\text{logic}}$ is required for subsequent logic circuits to reliably recognize the correct output, using (10.27) reveals the necessary time:\n\n$$\n\\begin{equation*}\nT_{\\text{latch}}=\\frac{C_{L}}{G_{m}} \\ln \\left(\\frac{\\Delta V_{\\text{logic}}}{\\Delta V_{0}}\\right)=K_{3} \\frac{L^{2}}{\\mu_{n} V_{\\text{eff}}} \\ln \\left(\\frac{\\Delta V_{\\text{logic}}}{\\Delta V_{0}}\\right) \\tag{10.32}\n\\end{equation*}\n$$\n\nIf $\\Delta V_{0}$ is small, this latch time can be significant, potentially exceeding the allowed latch phase duration, a condition known as metastability. In other words, an insufficient initial voltage difference prevents the latch's differential output voltage from reaching a recognizable logic value. Sometimes, even with a sufficient initial voltage difference, circuit noise can reduce it enough to cause metastability.\n\nKey Point: A positive-feedback latch's output grows exponentially with a time constant determined by the unity-gain frequency, $G_{m} / C_{L}$. When the initial input is too small, metastability may occur, slowing the growth and preventing a recognizable logic signal at the latch output before the reset phase begins.\n\n#### EXAMPLE 10.6\n\nFor a $0.2-\\mu m$ technology with $K_{3}=2.5, \\Delta V_{0}=1 \\text{mV}, \\Delta V_{\\text{logic}}=1 \\text{V}, V_{\\text{eff}}=0.5 \\text{V}$, and $\\mu_{n}=0.03 \\text{M}^2 / \\text{V} \\cdot \\text{s}$, determine the maximum clocking frequency of the comparator.\n\n#### Solution\n\nUsing (10.32), we find $T_{\\text{latch}}=46 \\text{ps}$. Assuming this is half the total period (an optimistic assumption), the smallest possible period for a track-and-latch is 92 ps, corresponding to a clocking frequency of 11 GHz. Typically, the maximum clock rate in a comparator is limited by the preamplifiers' frequency response and the track phase's speed, rather than the latch phase's speed."
},
{
    "text": "The time constant of the latch during its positive-feedback (i.e., latch) phase can be determined by examining a simplified circuit comprising two back-to-back inverters, as illustrated in Fig. 10.15. Assuming the output voltages of the inverters are initially close and the inverters operate within their linear range, each inverter can be modeled as a voltage-controlled current source driving an RC load, as depicted in Fig. 10.16. Here, $A_{V}$ represents the low-frequency gain of each inverter, with a transconductance $G_{m}$ given by $G_{m}=A_{V} / R_{L}$. For this linearized model, the equations are:\n\n$$\n\\begin{equation*}\n\\frac{A_{v}}{R_{L}} V_{y}=-C_{L}\\left(\\frac{d V_{x}}{d t}\\right)-\\left(\\frac{V_{x}}{R_{D}}\\right) \\tag{10.22}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\frac{A_{v}}{R_{L}} V_{x}=-C_{L}\\left(\\frac{d V_{y}}{d t}\\right)-\\left(\\frac{V_{y}}{R_{L}}\\right) \\tag{10.23}\n\\end{equation*}\n$$\n\nMultiplying (10.22) and (10.23) by $R_{L}$ and rearranging yields:\n\n$$\n\\begin{equation*}\n\\tau\\left(\\frac{d V_{x}}{d t}\\right)+V_{x}=-A_{v} V_{y} \\tag{10.24}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\tau\\left(\\frac{d V_{y}}{d t}\\right)+V_{y}=-A_{v} V_{x} \\tag{10.25}\n\\end{equation*}\n$$\n\nwhere $\\tau=R_{L} C_{L}$ is the time constant at the output node of each inverter. Subtracting (10.25) from (10.24) and rearranging terms results in:\n\n$$\n\\begin{equation*}\n\\left(\\frac{\\tau}{A_{V}-1}\\right)\\left(\\frac{d \\Delta V}{dt}\\right)=\\Delta V \\tag{10.26}\n\\end{equation*}\n$$\n\nwith $\\Delta V=V_{x}-V_{y}$ being the voltage difference between the inverter outputs. Equation (10.26) is a first-order differential equation without a forcing function, whose solution is:\n\n$$\n\\begin{equation*}\n\\Delta V=\\Delta V_{0} e^{(A_{v}-1) t / \\tau} \\tag{10.27}\n\\end{equation*}\n$$\n\nwhere $\\Delta V_{0}$ is the initial voltage difference at the start of the latch phase. Thus, the voltage difference increases exponentially over time with a time constant:\n\n$$\n\\begin{equation*}\n\\tau_{\\text{latch}}=\\frac{\\tau}{A_{V}-1} \\approx \\frac{R_{L} C_{L}}{A_{V}}=\\frac{C_{L}}{G_{m}} \\tag{10.28}\n\\end{equation*}\n$$\n\nHere, $G_{m}=A_{V} / R_{L}$ is the transconductance of each inverter. Note that $\\tau_{\\text{latch}}$ is approximately the inverse of the unity-gain frequency of each inverter.\n\nFor MOS devices, the output load typically corresponds to the gate-source capacitance of a single transistor, specifically:\n\n$$\n\\begin{equation*}\nC_{L}=K_{1} WLC_{ox} \\tag{10.29}\n\\end{equation*}\n$$\n\nwhere $K_{1}$ is a proportionality constant, usually between 1 and 2. The inverter transconductance, proportional to the transconductance of a single transistor, is given by:\n\n$$\n\\begin{equation*}\nG_{m}=K_{2} g_{m}=K_{2} \\mu_{n} C_{ox} \\frac{W}{L} V_{\\text{eff}} \\tag{10.30}\n\\end{equation*}\n$$\n\nwith $K_{2}$ typically between 0.5 and 1. Substituting (10.29) and (10.30) into (10.28) yields:\n\n$$\n\\begin{equation*}\n\\tau_{\\text{latch}}=\\frac{K_{1}}{K_{2}} \\frac{L^{2}}{\\mu_{n} V_{\\text{eff}}} = K_{3} \\frac{L^{2}}{\\mu_{n} V_{\\text{eff}}} \\tag{10.31}\n\\end{equation*}\n$$\n\nwhere $K_{3}$ might range from 2 to 4. Note that (10.31) indicates $\\tau_{\\text{latch}}$ primarily depends on the technology rather than the design, assuming a reasonable $V_{\\text{eff}}$ and minimal $C_{L}$. Also, note the similarity between (10.31) and (10.20), the equation for the time constant of a cascade of gain stages. For a given technology, (10.31) is useful for estimating the maximum clock frequency of a latch-and-track comparator.\n\nIf a voltage difference of $\\Delta V_{\\text{logic}}$ is required for subsequent logic circuits to reliably recognize the correct output, using (10.27), the necessary time is:\n\n$$\n\\begin{equation*}\nT_{\\text{latch}}=\\frac{C_{L}}{G_{m}} \\ln \\left(\\frac{\\Delta V_{\\text{logic}}}{\\Delta V_{0}}\\right) = K_{3} \\frac{L^{2}}{\\mu_{n} V_{\\text{eff}}} \\ln \\left(\\frac{\\Delta V_{\\text{logic}}}{\\Delta V_{0}}\\right) \\tag{10.32}\n\\end{equation*}\n$$\n\nIf $\\Delta V_{0}$ is small, the latch time can be significant, potentially exceeding the allowed time for the latch phase, a condition known as metastability. This occurs when the initial differential output voltage is too low to be recognized as a valid logic value by subsequent circuits. Sometimes, even with a sufficient initial voltage difference, circuit noise can reduce it to a level causing metastability.\n\nKey Point: A positive-feedback latch output grows exponentially with a time constant tied to the unity-gain frequency, $G_{m} / C_{L}$. When the initial input is too small, metastability may arise, resulting in insufficient voltage growth for a recognizable logic signal before the reset phase begins.\n\n#### EXAMPLE 10.6\n\nFor a $0.2-\\mu m$ technology with $K_{3}=2.5$, $\\Delta V_{0}=1 \\text{mV}$, $\\Delta V_{\\text{logic}}=1 \\text{V}$, $V_{\\text{eff}}=0.5 \\text{V}$, and $\\mu_{n}=0.03 \\text{M}^{2} / \\text{V} \\cdot \\text{s}$, determine the maximum clocking frequency of the comparator.\n\n#### Solution\n\nUsing (10.32), $T_{\\text{latch}}=46 \\text{ps}$. Assuming this is half the total period (an optimistic assumption), the minimum period for a track-and-latch would be 92 ps, corresponding to a clocking frequency of 11 GHz. Typically, the maximum clock rate is limited by the frequency response of the preamplifiers and the track-and-latch during the track phase, rather than the latch speed during the latch phase."
},
{
    "text": "The time constant of the latch during its positive-feedback (i.e., latch) phase can be determined by examining a simplified circuit comprising two back-to-back inverters, as depicted in Fig. 10.15. Assuming the output voltages of these inverters are initially close and the inverters operate within their linear range, each inverter can be modeled as a voltage-controlled current source driving an RC load, as illustrated in Fig. 10.16. Here, $A_{V}$ represents the low-frequency gain of each inverter, with a transconductance $G_{m}$ given by $G_{m}=A_{V} / R_{L}$. For this linearized model, the following equations apply:\n\n$$\n\\begin{equation*}\n\\frac{A_{v}}{R_{L}} V_{y}=-C_{L}\\left(\\frac{d V_{x}}{d t}\\right)-\\left(\\frac{V_{x}}{R_{D}}\\right) \\tag{10.22}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\frac{A_{v}}{R_{L}} V_{x}=-C_{L}\\left(\\frac{d V_{y}}{d t}\\right)-\\left(\\frac{V_{y}}{R_{L}}\\right) \\tag{10.23}\n\\end{equation*}\n$$\n\nMultiplying (10.22) and (10.23) by $R_{L}$ and rearranging yields:\n\n$$\n\\begin{equation*}\n\\tau\\left(\\frac{d V_{x}}{d t}\\right)+V_{x}=-A_{v} V_{y} \\tag{10.24}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\tau\\left(\\frac{d V_{y}}{d t}\\right)+V_{y}=-A_{v} V_{x} \\tag{10.25}\n\\end{equation*}\n$$\n\nwhere $\\tau=R_{L} C_{L}$ is the time constant at the output node of each inverter. Subtracting (10.25) from (10.24) and rearranging terms results in:\n\n$$\n\\begin{equation*}\n\\left(\\frac{\\tau}{A_{V}-1}\\right)\\left(\\frac{d \\Delta V}{dt}\\right)=\\Delta V \\tag{10.26}\n\\end{equation*}\n$$\n\nwith $\\Delta V=V_{x}-V_{y}$ being the voltage difference between the inverter outputs. Equation (10.26) is a first-order differential equation without a forcing function, whose solution is:\n\n$$\n\\begin{equation*}\n\\Delta V=\\Delta V_{0} e^{(A_{v}-1) t / \\tau} \\tag{10.27}\n\\end{equation*}\n$$\n\nwhere $\\Delta V_{0}$ is the initial voltage difference at the start of the latch phase. Thus, the voltage difference increases exponentially over time with a time constant:\n\n$$\n\\begin{equation*}\n\\tau_{\\text {latch}}=\\frac{\\tau}{A_{V}-1} \\approx \\frac{R_{L} C_{L}}{A_{V}}=\\frac{C_{L}}{G_{m}} \\tag{10.28}\n\\end{equation*}\n$$\n\nHere, $G_{m}=A_{V} / R_{L}$ is the transconductance of each inverter. Note that $\\tau_{\\text {latch}}$ is approximately equal to the inverse of the unity-gain frequency of each inverter.\n\nFor MOS devices, the output load typically corresponds to the gate-source capacitance of a single transistor, specifically:\n\n$$\n\\begin{equation*}\nC_{L}=K_{1} WLC_{ox} \\tag{10.29}\n\\end{equation*}\n$$\n\nwhere $K_{1}$ is a proportionality constant, usually between 1 and 2. The inverter transconductance, proportional to that of a single transistor, is given by:\n\n$$\n\\begin{equation*}\nG_{m}=K_{2} g_{m}=K_{2} \\mu_{n} C_{ox} \\frac{W}{L} V_{\\text {eff}} \\tag{10.30}\n\\end{equation*}\n$$\n\nwith $K_{2}$ typically between 0.5 and 1. Substituting (10.29) and (10.30) into (10.28) yields:\n\n$$\n\\begin{equation*}\n\\tau_{\\text {latch}}=\\frac{K_{1}}{K_{2}} \\frac{L^{2}}{\\mu_{n} V_{\\text {eff}}} = K_{3} \\frac{L^{2}}{\\mu_{n} V_{\\text {eff}}} \\tag{10.31}\n\\end{equation*}\n$$\n\nwhere $K_{3}$ might range from 2 to 4. Equation (10.31) indicates that $\\tau_{\\text {latch}}$ primarily depends on the technology rather than the design, assuming a reasonable $V_{\\text {eff}}$ and minimized $C_{L}$. Note the similarity between (10.31) and (10.20), the equation for the time constant of a cascade of gain stages. For a given technology, (10.31) is useful for estimating the maximum clock frequency of a latch-and-track comparator.\n\nIf a voltage difference of $\\Delta V_{\\text {logic}}$ is required for subsequent logic circuitry to reliably detect the correct output, using (10.27) gives the necessary time:\n\n$$\n\\begin{equation*}\nT_{\\text {latch}}=\\frac{C_{L}}{G_{m}} \\ln \\left(\\frac{\\Delta V_{\\text {logic}}}{\\Delta V_{0}}\\right)=K_{3} \\frac{L^{2}}{\\mu_{n} V_{\\text {eff}}} \\ln \\left(\\frac{\\Delta V_{\\text {logic}}}{\\Delta V_{0}}\\right) \\tag{10.32}\n\\end{equation*}\n$$\n\nIf $\\Delta V_{0}$ is small, the latch time can be significant, potentially exceeding the allowed latch phase duration, a condition known as metastability. In other words, an initially small differential output voltage may not increase sufficiently to be recognized as a valid logic value by subsequent circuitry. Even with a larger initial voltage difference, circuit noise can reduce it to a level causing metastability.\n\nKey Point: A positive-feedback latch's output grows exponentially with a time constant determined by the unity-gain frequency, $G_{m} / C_{L}$. When the initial input is too small, metastability may arise, resulting in insufficient output voltage growth for reliable logic signal recognition before the reset phase begins.\n\n#### EXAMPLE 10.6\n\nFor a $0.2-\\mu m$ technology with $K_{3}=2.5$, $\\Delta V_{0}=1 \\text{mV}$, $\\Delta V_{\\text {logic}}=1 \\text{V}$, $V_{\\text {eff}}=0.5 \\text{V}$, and $\\mu_{n}=0.03 \\text{M}^{2} / \\text{V} \\cdot \\text{s}$, determine the maximum clocking frequency of the comparator.\n\n#### Solution\n\nUsing (10.32), $T_{\\text {latch}}=46 \\text{ps}$. Assuming this is half the total period (an optimistic assumption), the minimum period for a track-and-latch stage is 92 ps, corresponding to a clocking frequency of 11 GHz. Typically, the maximum clock rate is limited by the frequency response of the preamplifiers and the track-and-latch during the track phase, rather than the latch speed during the latch phase."
},
{
    "text": "The time constant of the latch during its positive-feedback (i.e., latch) phase can be determined by examining a simplified circuit comprising two back-to-back inverters, as illustrated in Fig. 10.15. Assuming the output voltages of the inverters are nearly equal at the onset of the latch phase and that the inverters operate within their linear range, each inverter can be modeled as a voltage-controlled current source driving an RC load, as depicted in Fig. 10.16. Here, $A_{V}$ represents the low-frequency gain of each inverter, with a transconductance $G_{m}$ given by $G_{m}=A_{V} / R_{L}$. For this linearized model, the equations are:\n\n$$\n\\begin{equation*}\n\\frac{A_{v}}{R_{L}} V_{y}=-C_{L}\\left(\\frac{d V_{x}}{d t}\\right)-\\left(\\frac{V_{x}}{R_{D}}\\right) \\tag{10.22}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\frac{A_{v}}{R_{L}} V_{x}=-C_{L}\\left(\\frac{d V_{y}}{d t}\\right)-\\left(\\frac{V_{y}}{R_{L}}\\right) \\tag{10.23}\n\\end{equation*}\n$$\n\nMultiplying (10.22) and (10.23) by $R_{L}$ and rearranging yields:\n\n$$\n\\begin{equation*}\n\\tau\\left(\\frac{d V_{x}}{d t}\\right)+V_{x}=-A_{v} V_{y} \\tag{10.24}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\tau\\left(\\frac{d V_{y}}{d t}\\right)+V_{y}=-A_{v} V_{x} \\tag{10.25}\n\\end{equation*}\n$$\n\nwhere $\\tau=R_{L} C_{L}$ is the time constant at the output node of each inverter. Subtracting (10.25) from (10.24) and rearranging terms results in:\n\n$$\n\\begin{equation*}\n\\left(\\frac{\\tau}{A_{V}-1}\\right)\\left(\\frac{d \\Delta V}{dt}\\right)=\\Delta V \\tag{10.26}\n\\end{equation*}\n$$\n\nwith $\\Delta V=V_{x}-V_{y}$ being the voltage difference between the inverter outputs. Equation (10.26) is a first-order differential equation without a forcing function, whose solution is:\n\n$$\n\\begin{equation*}\n\\Delta V=\\Delta V_{0} e^{(A_{v}-1) t / \\tau} \\tag{10.27}\n\\end{equation*}\n$$\n\nwhere $\\Delta V_{0}$ is the initial voltage difference at the latch phase's start. Thus, the voltage difference increases exponentially over time with a time constant:\n\n$$\n\\begin{equation*}\n\\tau_{\\text{latch}}=\\frac{\\tau}{A_{V}-1} \\approx \\frac{R_{L} C_{L}}{A_{V}}=\\frac{C_{L}}{G_{m}} \\tag{10.28}\n\\end{equation*}\n$$\n\nHere, $G_{m}=A_{V} / R_{L}$ is the transconductance of each inverter. Note that $\\tau_{\\text{latch}}$ is approximately the inverse of the unity-gain frequency of each inverter.\n\nFor MOS devices, the output load typically corresponds to the gate-source capacitance of a single transistor, specifically:\n\n$$\n\\begin{equation*}\nC_{L}=K_{1} WLC_{ox} \\tag{10.29}\n\\end{equation*}\n$$\n\nwhere $K_{1}$ is a proportionality constant, usually between 1 and 2. The inverter transconductance, proportional to a single transistor's transconductance, is given by:\n\n$$\n\\begin{equation*}\nG_{m}=K_{2} g_{m}=K_{2} \\mu_{n} C_{ox} \\frac{W}{L} V_{\\text{eff}} \\tag{10.30}\n\\end{equation*}\n$$\n\nwith $K_{2}$ typically between 0.5 and 1. Substituting (10.29) and (10.30) into (10.28) results in:\n\n$$\n\\begin{equation*}\n\\tau_{\\text{latch}}=\\frac{K_{1}}{K_{2}} \\frac{L^{2}}{\\mu_{n} V_{\\text{eff}}} = K_{3} \\frac{L^{2}}{\\mu_{n} V_{\\text{eff}}} \\tag{10.31}\n\\end{equation*}\n$$\n\nwhere $K_{3}$ might range from 2 to 4. Note that (10.31) indicates $\\tau_{\\text{latch}}$ primarily depends on the technology, not the design (assuming a reasonable $V_{\\text{eff}}$ and minimal $C_{L}$). The similarity between (10.31) and (10.20), the time constant equation for a cascade of gain stages, is also noteworthy. For a given technology, (10.31) is useful for estimating the maximum clock frequency of a latch-and-track comparator.\n\nIf a voltage difference of $\\Delta V_{\\text{logic}}$ is required for subsequent logic circuits to reliably recognize the correct output, using (10.27) reveals the necessary time:\n\n$$\n\\begin{equation*}\nT_{\\text{latch}}=\\frac{C_{L}}{G_{m}} \\ln \\left(\\frac{\\Delta V_{\\text{logic}}}{\\Delta V_{0}}\\right)=K_{3} \\frac{L^{2}}{\\mu_{n} V_{\\text{eff}}} \\ln \\left(\\frac{\\Delta V_{\\text{logic}}}{\\Delta V_{0}}\\right) \\tag{10.32}\n\\end{equation*}\n$$\n\nIf $\\Delta V_{0}$ is small, the latch time can be extensive, potentially exceeding the allowed latch phase duration, a condition known as metastability. In other words, an insufficient initial voltage difference prevents the latch's differential output voltage from reaching a recognizable logic value. Sometimes, even with a sufficient initial voltage difference, circuit noise can reduce it enough to cause metastability.\n\nKey Point: A positive-feedback latch's output grows exponentially with a time constant tied to the unity-gain frequency, $G_{m} / C_{L}$. When the initial input is too small, metastability may arise, slowing the growth and preventing a recognizable logic signal at the latch output before the reset phase begins.\n\n#### EXAMPLE 10.6\n\nFor a $0.2-\\mu m$ technology with $K_{3}=2.5, \\Delta V_{0}=1 \\text{mV}, \\Delta V_{\\text{logic}}=1 \\text{V}, V_{\\text{eff}}=0.5 \\text{V}$, and $\\mu_{n}=0.03 \\text{M}^{2} / \\text{V} \\cdot \\text{s}$, determine the maximum clocking frequency of the comparator.\n\n#### Solution\n\nUsing (10.32), $T_{\\text{latch}}=46 \\text{ps}$. Assuming this is half the total period (an optimistic assumption), the smallest possible period for a track-and-latch is 92 ps, corresponding to a clocking frequency of 11 GHz. Typically, the maximum clock rate is limited by the preamplifiers' frequency response and the track-and-latch during the track phase, rather than the latch speed during the latch phase."
},
{
    "text": "The time constant of the latch during its positive-feedback (i.e., latch) phase can be determined by examining a simplified circuit composed of two back-to-back inverters, as illustrated in Fig. 10.15. Assuming the output voltages of these inverters are initially close and that they operate within their linear range, each inverter can be modeled as a voltage-controlled current source driving an RC load, as depicted in Fig. 10.16. Here, $A_{V}$ represents the low-frequency gain of each inverter, with a transconductance given by $G_{m}=A_{V} / R_{L}$. For this linearized model, the following equations apply:\n\n$$\n\\begin{equation*}\n\\frac{A_{v}}{R_{L}} V_{y}=-C_{L}\\left(\\frac{d V_{x}}{d t}\\right)-\\left(\\frac{V_{x}}{R_{D}}\\right) \\tag{10.22}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\frac{A_{v}}{R_{L}} V_{x}=-C_{L}\\left(\\frac{d V_{y}}{d t}\\right)-\\left(\\frac{V_{y}}{R_{L}}\\right) \\tag{10.23}\n\\end{equation*}\n$$\n\nMultiplying (10.22) and (10.23) by $R_{L}$ and rearranging yields:\n\n$$\n\\begin{equation*}\n\\tau\\left(\\frac{d V_{x}}{d t}\\right)+V_{x}=-A_{v} V_{y} \\tag{10.24}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\tau\\left(\\frac{d V_{y}}{d t}\\right)+V_{y}=-A_{v} V_{x} \\tag{10.25}\n\\end{equation*}\n$$\n\nwhere $\\tau=R_{L} C_{L}$ is the time constant at the output node of each inverter. Subtracting (10.25) from (10.24) and rearranging terms results in:\n\n$$\n\\begin{equation*}\n\\left(\\frac{\\tau}{A_{V}-1}\\right)\\left(\\frac{d \\Delta V}{dt}\\right)=\\Delta V \\tag{10.26}\n\\end{equation*}\n$$\n\nHere, $\\Delta V=V_{x}-V_{y}$ represents the voltage difference between the output voltages of the inverters. Equation (10.26) is a first-order differential equation without a forcing function, and its solution is:\n\n$$\n\\begin{equation*}\n\\Delta V=\\Delta V_{0} e^{(A_{v}-1) t / \\tau} \\tag{10.27}\n\\end{equation*}\n$$\n\nwhere $\\Delta V_{0}$ is the initial voltage difference at the start of the latch phase. Thus, the voltage difference increases exponentially over time with a time constant given by:\n\n$$\n\\begin{equation*}\n\\tau_{\\text{latch}}=\\frac{\\tau}{A_{V}-1} \\approx \\frac{R_{L} C_{L}}{A_{V}}=\\frac{C_{L}}{G_{m}} \\tag{10.28}\n\\end{equation*}\n$$\n\nHere, $G_{m}=A_{V} / R_{L}$ is the transconductance of each inverter. Note that $\\tau_{\\text{latch}}$ is approximately equal to the inverse of the unity-gain frequency of each inverter.\n\nFor MOS devices, the output load typically corresponds to the gate-source capacitance of a single transistor, specifically:\n\n$$\n\\begin{equation*}\nC_{L}=K_{1} WLC_{ox} \\tag{10.29}\n\\end{equation*}\n$$\n\nwhere $K_{1}$ is a proportionality constant, usually between 1 and 2. The inverter transconductance, proportional to the transconductance of a single transistor, is given by:\n\n$$\n\\begin{equation*}\nG_{m}=K_{2} g_{m}=K_{2} \\mu_{n} C_{ox} \\frac{W}{L} V_{\\text{eff}} \\tag{10.30}\n\\end{equation*}\n$$\n\nwith $K_{2}$ typically between 0.5 and 1. Substituting (10.29) and (10.30) into (10.28) results in:\n\n$$\n\\begin{equation*}\n\\tau_{\\text{latch}}=\\frac{K_{1}}{K_{2}} \\frac{L^{2}}{\\mu_{n} V_{\\text{eff}}} = K_{3} \\frac{L^{2}}{\\mu_{n} V_{\\text{eff}}} \\tag{10.31}\n\\end{equation*}\n$$\n\nwhere $K_{3}$ might be between 2 and 4. Note that (10.31) indicates $\\tau_{\\text{latch}}$ primarily depends on the technology rather than the design, assuming a reasonable choice of $V_{\\text{eff}}$ and minimal $C_{L}$. Also, note the similarity between (10.31) and (10.20), the equation for the time constant of a cascade of gain stages. For a given technology, (10.31) is useful for estimating the maximum clock frequency of a latch-and-track comparator.\n\nIf a voltage difference of $\\Delta V_{\\text{logic}}$ is required for subsequent logic circuitry to reliably recognize the correct output value, using (10.27) gives the necessary time as:\n\n$$\n\\begin{equation*}\nT_{\\text{latch}}=\\frac{C_{L}}{G_{m}} \\ln \\left(\\frac{\\Delta V_{\\text{logic}}}{\\Delta V_{0}}\\right)=K_{3} \\frac{L^{2}}{\\mu_{n} V_{\\text{eff}}} \\ln \\left(\\frac{\\Delta V_{\\text{logic}}}{\\Delta V_{0}}\\right) \\tag{10.32}\n\\end{equation*}\n$$\n\nIf $\\Delta V_{0}$ is small, this latch time can be substantial, potentially exceeding the allowed time for the latch phase, a situation often termed metastability. In other words, due to an initially small value, the differential output voltage of the latch may not increase sufficiently to be recognized as the correct logic value by subsequent circuitry. Sometimes, even with a sufficiently large initial voltage difference, circuit noise can reduce it to a level that causes metastability.\n\nKey Point: A positive-feedback latch output grows exponentially with a time constant determined by the unity-gain frequency, $G_{m} / C_{L}$. When the initial input is too small, metastability may occur, resulting in insufficient growth for a recognizable logic signal to appear at the latch output before the reset phase begins.\n\n#### EXAMPLE 10.6\n\nFor a $0.2-\\mu m$ technology, assume $\\mathrm{K}_{3}=2.5, \\Delta V_{0}=1 \\text{mV}, \\Delta V_{\\text{logic}}=1 \\text{V}, V_{\\text{eff}}=0.5 \\text{V}$, and $\\mu_{n}=0.03 \\text{M}^{2} / \\text{V} \\cdot \\text{s}$. What is the maximum clocking frequency of the comparator?\n\n#### Solution\n\nUsing (10.32), we find $T_{\\text{latch}}=46 \\text{ps}$. Assuming this is half the total period (a potentially optimistic assumption), the smallest possible period for a track-and-latch stage is 92 ps, corresponding to a clocking frequency of 11 GHz. In a typical comparator, the maximum clock rate is likely limited by the frequency response of the preamplifiers and the track-and-latch stage during the track phase, rather than by the speed of the latch during the latch phase."
},
{
    "text": "The time constant of the latch during its positive-feedback (i.e., latch) phase can be determined by analyzing a simplified circuit composed of two back-to-back inverters, as depicted in Fig. 10.15. If we assume that the output voltages of the inverters are initially close to each other and that the inverters operate within their linear range, each inverter can be modeled as a voltage-controlled current source driving an RC load, as illustrated in Fig. 10.16, where $A_{V}$ represents the low-frequency gain of each inverter, with a transconductance $G_{m}=A_{V} / R_{L}$. For this linearized model, the equations are:\n\n$$\n\\begin{equation*}\n\\frac{A_{v}}{R_{L}} V_{y}=-C_{L}\\left(\\frac{d V_{x}}{d t}\\right)-\\left(\\frac{V_{x}}{R_{D}}\\right) \\tag{10.22}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\frac{A_{v}}{R_{L}} V_{x}=-C_{L}\\left(\\frac{d V_{y}}{d t}\\right)-\\left(\\frac{V_{y}}{R_{L}}\\right) \\tag{10.23}\n\\end{equation*}\n$$\n\nMultiplying (10.22) and (10.23) by $R_{L}$ and rearranging yields:\n\n$$\n\\begin{equation*}\n\\tau\\left(\\frac{d V_{x}}{d t}\\right)+V_{x}=-A_{v} V_{y} \\tag{10.24}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\tau\\left(\\frac{d V_{y}}{d t}\\right)+V_{y}=-A_{v} V_{x} \\tag{10.25}\n\\end{equation*}\n$$\n\nwhere $\\tau=R_{L} C_{L}$ is the time constant at the output node of each inverter. Subtracting (10.25) from (10.24) and rearranging terms results in:\n\n$$\n\\begin{equation*}\n\\left(\\frac{\\tau}{A_{V}-1}\\right)\\left(\\frac{d \\Delta V}{dt}\\right)=\\Delta V \\tag{10.26}\n\\end{equation*}\n$$\n\nwith $\\Delta V=V_{x}-V_{y}$ being the voltage difference between the output voltages of the inverters. Equation (10.26) is a first-order differential equation without a forcing function, and its solution is:\n\n$$\n\\begin{equation*}\n\\Delta V=\\Delta V_{0} e^{(A_{v}-1) t / \\tau} \\tag{10.27}\n\\end{equation*}\n$$\n\nwhere $\\Delta V_{0}$ is the initial voltage difference at the start of the latch phase. Thus, the voltage difference increases exponentially over time with a time constant:\n\n$$\n\\begin{equation*}\n\\tau_{\\text{latch}}=\\frac{\\tau}{A_{V}-1} \\approx \\frac{R_{L} C_{L}}{A_{V}}=\\frac{C_{L}}{G_{m}} \\tag{10.28}\n\\end{equation*}\n$$\n\nHere, $G_{m}=A_{V} / R_{L}$ is the transconductance of each inverter. Note that $\\tau_{\\text{latch}}$ is approximately equal to the inverse of the unity-gain frequency of each inverter.\n\nFor MOS devices, the output load typically correlates with the gate-source capacitance of a single transistor, specifically:\n\n$$\n\\begin{equation*}\nC_{L}=K_{1} WLC_{ox} \\tag{10.29}\n\\end{equation*}\n$$\n\nwhere $K_{1}$ is a proportionality constant, usually between 1 and 2. The inverter transconductance, proportional to the transconductance of a single transistor, is given by:\n\n$$\n\\begin{equation*}\nG_{m}=K_{2} g_{m}=K_{2} \\mu_{n} C_{ox} \\frac{W}{L} V_{\\text{eff}} \\tag{10.30}\n\\end{equation*}\n$$\n\nwith $K_{2}$ typically between 0.5 and 1. Substituting (10.29) and (10.30) into (10.28) yields:\n\n$$\n\\begin{equation*}\n\\tau_{\\text{latch}}=\\frac{K_{1}}{K_{2}} \\frac{L^{2}}{\\mu_{n} V_{\\text{eff}}} = K_{3} \\frac{L^{2}}{\\mu_{n} V_{\\text{eff}}} \\tag{10.31}\n\\end{equation*}\n$$\n\nwhere $K_{3}$ might range from 2 to 4. Note that (10.31) indicates $\\tau_{\\text{latch}}$ primarily depends on the technology rather than the design (assuming a reasonable $V_{\\text{eff}}$ and minimized $C_{L}$). Also, note the similarity between (10.31) and (10.20), the equation for the time constant of a cascade of gain stages. For a given technology, (10.31) is useful for estimating the maximum clock frequency of a latch-and-track comparator.\n\nIf a voltage difference of $\\Delta V_{\\text{logic}}$ is required for subsequent logic circuitry to reliably recognize the correct output value, using (10.27) shows that the necessary time is:\n\n$$\n\\begin{equation*}\nT_{\\text{latch}}=\\frac{C_{L}}{G_{m}} \\ln \\left(\\frac{\\Delta V_{\\text{logic}}}{\\Delta V_{0}}\\right)=K_{3} \\frac{L^{2}}{\\mu_{n} V_{\\text{eff}}} \\ln \\left(\\frac{\\Delta V_{\\text{logic}}}{\\Delta V_{0}}\\right) \\tag{10.32}\n\\end{equation*}\n$$\n\nIf $\\Delta V_{0}$ is small, this latch time can be significant, potentially exceeding the allowed time for the latch phase, a condition known as metastability. In other words, due to an insufficient initial value, the differential output voltage of the latch may not increase enough to be recognized as the correct logic value by subsequent circuitry. Sometimes, even with a sufficiently large initial voltage difference, circuit noise can reduce it to a level that causes metastability.\n\nKey Point: A positive-feedback latch output grows exponentially with a time constant determined by the unity-gain frequency, $G_{m} / C_{L}$. When the initial input is too small, metastability may occur, resulting in insufficient growth for a recognizable logic signal to appear at the latch output before the reset phase begins.\n\n#### EXAMPLE 10.6\n\nFor a $0.2-\\mu$m technology with $K_{3}=2.5, \\Delta V_{0}=1 \\text{mV}, \\Delta V_{\\text{logic}}=1 \\text{V}, V_{\\text{eff}}=0.5 \\text{V}$, and $\\mu_{n}=0.03 \\text{M}^{2} / \\text{V} \\cdot \\text{s}$, determine the maximum clocking frequency of the comparator.\n\n#### Solution\n\nUsing (10.32), we find $T_{\\text{latch}}=46 \\text{ps}$. Assuming this is half the total period (an optimistic assumption), the smallest possible period for a track-and-latch would be 92 ps, corresponding to a clocking frequency of 11 GHz. Typically, the maximum clock rate in a comparator is limited by the frequency response of the preamplifiers and the track-and-latch during the track phase, rather than by the speed of the latch during the latch phase."
},
{
    "text": "The input offset of a latch is affected by both random and systematic mismatches between its two half-circuits. When employing very small transistors, this mismatch can become substantial, often resulting in offsets of tens of millivolts or more. In such scenarios, additional components may be added to control the imbalances in the circuit, thereby canceling the effects of random mismatch and achieving a latch with nearly zero overall offset.\n\nThe latch model depicted in Fig. 10.16 is revised in Fig. 10.17 to highlight various contributors to latch offset. Imbalances such as $i_{01} \\neq i_{02}$, $G_{m 1} \\neq G_{m 2}$, etc., may result from random mismatch or be intentionally introduced to allow for adjusting the latch offset. Clearly, when $i_{01} \\neq i_{02}$ and/or $G_{m 1} \\neq G_{m 2}$, some offset is introduced because, with $V_{x}=V_{y} \\neq 0$, different currents flow through each half-circuit. However, even if the offset current $i_{0}$ and transconductances $G_{m}$ are perfectly matched and $V_{x}(0)=V_{y}(0) \\neq 0$, mismatched $R_{L}$ loads will cause node voltages $V_{x}$ and $V_{y}$ to respond with different time constants, immediately resulting in a finite differential voltage $\\Delta \\mathrm{V}=\\mathrm{V}_{\\mathrm{x}}-\\mathrm{V}_{\\mathrm{y}}$, which then triggers the circuit's positive feedback, eventually regenerating a logic signal. The progression of node voltages under these conditions is depicted in Fig. 10.18.\n\nKey Point: Latches exhibit offset due to imbalances between the two half-circuits that provide positive feedback. These imbalances stem from random mismatch. Sometimes, additional controllable imbalances are intentionally included in the design to counteract random offsets and create an accurate comparator.\n\nA latch featuring an offset adjustment mechanism is illustrated in Fig. 10.19 [Cho, 1995]. In latch mode, the cross-coupled pair $Q_{1,2}$ is source-degenerated by the triode transistors $Q_{3-6}$. Thus, the transconductance of each half-circuit, $\\mathbf{G}_{\\mathrm{m} 1,2}$, depends on the applied differential voltage $\\mathrm{V}_{\\text {ref }}^{ \\pm}$ and the input voltage $\\mathrm{V}_{\\mathrm{in}}^{ \\pm}$. A dc current $\\mathrm{i}_{\\text {。 }}$ flows at the onset of latch mode because the node voltages $\\mathrm{V}_{\\text {out }}^{ \\pm}$ have been reset to the positive supply, with all NMOS transistors turned on. Therefore, in the absence of any random mismatch, the latch will be in a balanced state with equal half-circuit currents only when\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{V}_{\\mathrm{in}}=\\left(\\frac{\\mathrm{W}_{3,6}}{\\mathrm{~W}_{4,5}}\\right) \\Delta \\mathrm{V}_{\\mathrm{ref}} \\tag{10.33}\n\\end{equation*}\n$$\n\nimage_name:Fig. 10.17\ndescription:The circuit depicts a linearized latch model featuring a voltage-controlled current source, a capacitor, a resistor, and a current source all connected to a common node Vy. The voltages and currents are referenced to ground.\n\nFig. 10.17 A linearized model of the latch showing various sources of offset, whether random or intentional.\nimage_name:Fig. 10.17\ndescription:The circuit illustrates a linearized latch model with a voltage-controlled current source, a capacitor, a resistor, and a current source all connected to a common node Vy. The voltages and currents are referenced to ground.\n\nimage_name:Fig. 10.18\ndescription:**Type of Graph and Function:**\nThe graph is a time-domain waveform depicting the evolution of voltages at two nodes, Vx and Vy, over time in a latch circuit.\n\n**Axes Labels and Units:**\n- The horizontal axis represents time, typically in seconds or milliseconds in such contexts, though specific units are not provided.\n- The vertical axis represents voltage, likely in volts, though specific units are not given.\n\n**Overall Behavior and Trends:**\n- The graph displays two curves, Vx and Vy, which start from a common point and diverge over time.\n- Vx increases over time, indicating a positive trend, while Vy decreases, showing a negative trend.\n- The divergence signifies the development of a differential voltage due to differing time constants (τ1 ≠ τ2).\n- Positive feedback is noted to regenerate logic signals, suggesting that the circuit amplifies the difference between Vx and Vy.\n\n**Key Features and Technical Details:**\n- The initial point where both Vx and Vy start is crucial, likely representing the initial condition of the latch.\n- The graph highlights two regions with ellipses, indicating critical points where the voltage behavior is significant, possibly where the rate of change is most pronounced.\n- The system's dynamics are influenced by different time constants, τ1 and τ2, affecting how quickly Vx and Vy diverge.\n\n**Annotations and Specific Data Points:**\n- Annotations on the graph explain the cause of differential voltage due to different time constants and the role of positive feedback in regenerating logic signals.\n- The graph emphasizes qualitative voltage behavior over time without providing specific numerical values.\n\nFig. 10.18 Evolution of the latch node voltages when $i_{01}=i_{02} \\neq 0$ and $R_{L 1} C_{L 1} \\neq R_{L 2} C_{L 2}$.\nimage_name:Fig. 10.19\ndescription:The circuit is a latch with adjustable offset, utilizing a combination of NMOS and PMOS transistors to generate a differential output based on input and reference voltages. The design aims to compensate for offsets, potentially caused by mismatches or parasitics.\n\nFig. 10.19 A latch circuit with adjustable offset [Cho, 1995].\n\nEquation (10.33) represents the latch offset due to $\\Delta \\mathrm{V}_{\\text {ref }}$, which can be adjusted to counteract other offset sources, such as those from device size mismatches or parasitics. A comprehensive general analysis linking all offset sources to circuit parameters is quite intricate [He, 2009]."
},
{
    "text": "The input offset of a latch is affected by both random and systematic mismatches between its two half-circuits. When using very small transistors, this mismatch can be substantial, often resulting in offsets of tens of millivolts or more. In such scenarios, additional components may be added to control the imbalances in the circuit, thereby canceling the effects of random mismatch and achieving a latch with near-zero overall offset.\n\nThe latch model depicted in Fig. 10.16 is modified in Fig. 10.17 to highlight various contributors to latch offset. Imbalances such as $i_{01} \\neq i_{02}$ and $G_{m 1} \\neq G_{m 2}$ may result from random mismatch or be intentionally introduced to adjust the latch offset. Clearly, when $i_{01} \\neq i_{02}$ and/or $G_{m 1} \\neq G_{m 2}$, some offset is introduced because, with $V_{x}=V_{y} \\neq 0$, different currents flow through each half-circuit. However, even if the offset current $i_{0}$ and transconductances $G_{m}$ are perfectly matched and $V_{x}(0)=V_{y}(0) \\neq 0$, mismatched $R_{L}$ loads will cause $V_{x}$ and $V_{y}$ to respond with different time constants, immediately leading to a finite differential voltage $\\Delta \\mathrm{V}=\\mathrm{V}_{\\mathrm{x}}-\\mathrm{V}_{\\mathrm{y}}$. This initiates the circuit's positive feedback, eventually regenerating a logic signal. The progression of node voltages in this situation is illustrated in Fig. 10.18.\n\nKey Point: Latches exhibit offset due to imbalances between the two half-circuits that provide positive feedback. These imbalances stem from random mismatch. Additional controllable imbalances are sometimes deliberately included to cancel random offsets and create an accurate comparator.\n\nA latch with an offset adjustment mechanism is shown in Fig. 10.19 [Cho, 1995]. In latch mode, the cross-coupled pair $Q_{1,2}$ is source-degenerated by the triode transistors $Q_{3-6}$. Thus, the transconductance of each half-circuit, $\\mathbf{G}_{\\mathrm{m} 1,2}$, depends on the applied differential voltage $\\mathrm{V}_{\\text {ref }}^{\\pm}$ and the input voltage $\\mathrm{V}_{\\mathrm{in}}^{\\pm}$. A dc current $\\mathrm{i}_{\\text {dc}}$ flows at the onset of latch mode since the node voltages $\\mathrm{V}_{\\text {out }}^{\\pm}$ have been reset to the positive supply, with all NMOS transistors turned on. Therefore, in the absence of any random mismatch, the latch will be in a balanced state with equal half-circuit currents only when\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{V}_{\\mathrm{in}}=\\left(\\frac{\\mathrm{W}_{3,6}}{\\mathrm{~W}_{4,5}}\\right) \\Delta \\mathrm{V}_{\\mathrm{ref}} \\tag{10.33}\n\\end{equation*}\n$$\n\nimage_name:Fig. 10.17\ndescription:The circuit depicts a linearized latch model featuring a voltage-controlled current source, a capacitor, a resistor, and a current source all connected to a common node Vy. The voltages and currents are referenced to ground.\n\nFig. 10.17 A linearized model of the latch showing various sources of offset, whether random or intentional.\nimage_name:Fig. 10.17\ndescription:The circuit illustrates a linearized latch model with a voltage-controlled current source, a capacitor, a resistor, and a current source all connected to a common node Vy. The voltages and currents are referenced to ground.\n\nimage_name:Fig. 10.18\ndescription:**Type of Graph and Function:**\nThe graph is a time-domain waveform depicting the evolution of voltages at two nodes, Vx and Vy, over time in a latch circuit.\n\n**Axes Labels and Units:**\n- The horizontal axis represents time, typically in seconds or milliseconds in such contexts, though specific units are not provided.\n- The vertical axis represents voltage, likely in volts, though specific units are not indicated.\n\n**Overall Behavior and Trends:**\n- The graph displays two curves, Vx and Vy, which start from a common point and diverge over time.\n- Vx increases over time, indicating a positive trend, while Vy decreases, showing a negative trend.\n- The divergence signifies the development of a differential voltage due to differing time constants (τ1 ≠ τ2).\n- Positive feedback is noted to regenerate logic signals, suggesting the circuit amplifies the difference between Vx and Vy.\n\n**Key Features and Technical Details:**\n- The initial point where both Vx and Vy start is crucial, likely representing the initial condition of the latch.\n- The graph highlights two regions with ellipses, indicating significant points where the rate of change is most pronounced.\n- The system's dynamics are influenced by different time constants, τ1 and τ2, affecting how quickly Vx and Vy diverge.\n\n**Annotations and Specific Data Points:**\n- Annotations explain the cause of differential voltage due to different time constants and the role of positive feedback in regenerating logic signals.\n- The graph emphasizes qualitative voltage behavior over time without providing specific numerical values.\n\nFig. 10.18 Evolution of the latch node voltages when $i_{01}=i_{02} \\neq 0$ and $R_{L 1} C_{L 1} \\neq R_{L 2} C_{L 2}$.\nimage_name:Fig. 10.19\ndescription:The circuit is a latch with adjustable offset, utilizing a combination of NMOS and PMOS transistors to generate a differential output based on input and reference voltages. It is designed to compensate for offsets, potentially due to mismatches or parasitics.\n\nFig. 10.19 A latch circuit with controllable offset [Cho, 1995].\n\nEquation (10.33) represents the latch offset due to $\\Delta \\mathrm{V}_{\\text {ref }}$, which can be adjusted to cancel other offset sources, such as those from device size mismatches or parasitics. A comprehensive general analysis linking all offset sources to circuit parameters is quite complex [He, 2009]."
},
{
    "text": "The input offset of a latch is affected by both random and systematic mismatches between its two half-circuits. When very small transistors are employed, this mismatch can be substantial, often resulting in offsets of tens of millivolts or more. In such scenarios, additional components may be added to control the circuit imbalances, thereby canceling the effects of random mismatch and achieving a latch with near-zero overall offset.\n\nThe latch model depicted in Fig. 10.16 is modified in Fig. 10.17 to highlight various factors contributing to latch offset. The imbalances $i_{01} \\neq i_{02}, G_{m 1} \\neq G_{m 2}$, etc., may stem from random mismatch or be intentionally introduced to adjust the latch offset. Clearly, when $i_{01} \\neq i_{02}$ and/or $G_{m 1} \\neq G_{m 2}$, some offset is introduced because, with $V_{x}=V_{y} \\neq 0$, different currents flow in each half-circuit. However, even if the offset current $i_{0}$ and transconductances $G_{m}$ are perfectly matched and $V_{x}(0)=V_{y}(0) \\neq 0$, mismatched $R_{L}$ loads will cause the node voltages $V_{x}$ and $V_{y}$ to respond with different time constants, immediately resulting in a finite differential voltage $\\Delta \\mathrm{V}=\\mathrm{V}_{\\mathrm{x}}-\\mathrm{V}_{\\mathrm{y}}$, which initiates the circuit's positive feedback and eventually regenerates a logic signal. The progression of node voltages under these conditions is illustrated in Fig. 10.18.\n\nKey Point: Latches exhibit offset due to imbalances between the two half-circuits that provide positive feedback. These imbalances arise from random mismatch. Additional controllable imbalances are sometimes intentionally included in the design to cancel random offsets and create an accurate comparator.\n\nA latch with an offset adjustment mechanism is shown in Fig. 10.19 [Cho, 1995]. In latch mode, the cross-coupled pair $Q_{1,2}$ is source-degenerated by the triode transistors $Q_{3-6}$. Thus, the transconductance of each half-circuit, $\\mathbf{G}_{\\mathrm{m} 1,2}$, depends on the applied differential voltage $\\mathrm{V}_{\\text {ref }}^{\\pm}$ and the input voltage $\\mathrm{V}_{\\mathrm{in}}^{\\pm}$. A dc current $\\mathrm{i}_{\\text {dc }}$ flows at the onset of latch mode since the node voltages $\\mathrm{V}_{\\text {out }}^{\\pm}$ have been reset to the positive supply, with all NMOS transistors turned on. Therefore, in the absence of any random mismatch, the latch will be in a balanced state with equal half-circuit currents only when\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{V}_{\\mathrm{in}}=\\left(\\frac{\\mathrm{W}_{3,6}}{\\mathrm{~W}_{4,5}}\\right) \\Delta \\mathrm{V}_{\\mathrm{ref}} \\tag{10.33}\n\\end{equation*}\n$$\n\nimage_name:Fig. 10.17\ndescription:The circuit represents a linearized latch model featuring a voltage-controlled current source, a capacitor, a resistor, and a current source all connected to a common node Vy. The voltages and currents are referenced to ground.\n\nFig. 10.17 A linearized model of the latch showing various sources of offset, whether random or intentional.\nimage_name:Fig. 10.17\ndescription:The circuit depicts a linearized latch model with a voltage-controlled current source, a capacitor, a resistor, and a current source all connected to a common node Vy. The voltages and currents are referenced to ground.\n\nimage_name:Fig. 10.18\ndescription:**Type of Graph and Function:**\nThe graph is a time-domain waveform illustrating the evolution of voltages at two nodes, Vx and Vy, over time in a latch circuit.\n\n**Axes Labels and Units:**\n- The horizontal axis represents time, typically in seconds or milliseconds for such contexts, though specific units are not provided.\n- The vertical axis represents voltage, likely in volts, though specific units are not indicated.\n\n**Overall Behavior and Trends:**\n- The graph shows two curves, Vx and Vy, starting from a common point and diverging over time.\n- Vx increases, indicating a positive trend, while Vy decreases, showing a negative trend.\n- The divergence reflects the development of a differential voltage due to differing time constants (τ1 ≠ τ2).\n- Positive feedback is noted to regenerate logic signals, suggesting the circuit amplifies the difference between Vx and Vy.\n\n**Key Features and Technical Details:**\n- The initial point where both Vx and Vy start is critical, likely representing the latch's initial condition.\n- The graph highlights two regions with ellipses, indicating significant points where the rate of change is most pronounced.\n- The system's dynamics are influenced by different time constants, τ1 and τ2, affecting how quickly Vx and Vy diverge.\n\n**Annotations and Specific Data Points:**\n- Annotations explain the cause of differential voltage due to different time constants and the role of positive feedback in regenerating logic signals.\n- The graph emphasizes qualitative voltage behavior over time without providing specific numerical values.\n\nFig. 10.18 Evolution of the latch node voltages when $i_{01}=i_{02} \\neq 0$ and $R_{L 1} C_{L 1} \\neq R_{L 2} C_{L 2}$.\nimage_name:Fig. 10.19\ndescription:The circuit is a latch with controllable offset, utilizing NMOS and PMOS transistors to generate a differential output based on input and reference voltages. It is designed to adjust for offsets, potentially caused by mismatches or parasitics.\n\nFig. 10.19 A latch circuit featuring controllable offset [Cho, 1995].\n\nEquation (10.33) represents the latch offset due to $\\Delta \\mathrm{V}_{\\text {ref }}$, which can be adjusted to cancel other offset sources, such as those from device size mismatches or parasitics. A comprehensive general analysis linking all offset sources to circuit parameters is quite complex [He, 2009]."
},
{
    "text": "The input offset of a latch is affected by both random and systematic mismatches between its two half-circuits. When very small transistors are employed, this mismatch can be substantial, often resulting in offsets of tens of millivolts or more. In such scenarios, additional components may be added to control the imbalances in the circuit, thereby canceling the effects of random mismatch and achieving a latch with nearly zero overall offset.\n\nThe latch model depicted in Fig. 10.16 is revised in Fig. 10.17 to highlight various factors contributing to latch offset. Imbalances such as $i_{01} \\neq i_{02}$ and $G_{m1} \\neq G_{m2}$ may stem from random mismatch or be intentionally introduced to adjust the latch offset. Clearly, when $i_{01} \\neq i_{02}$ and/or $G_{m1} \\neq G_{m2}$, some offset is introduced because, with $V_{x} = V_{y} \\neq 0$, different currents flow through each half-circuit. However, even if the offset current $i_{0}$ and transconductances $G_{m}$ are perfectly matched and $V_{x}(0) = V_{y}(0) \\neq 0$, mismatched $R_{L}$ loads will cause $V_{x}$ and $V_{y}$ to respond with different time constants, immediately resulting in a finite differential voltage $\\Delta V = V_{x} - V_{y}$, which in turn triggers the circuit's positive feedback, eventually regenerating a logic signal. The progression of node voltages under these conditions is depicted in Fig. 10.18.\n\nKey Point: Latches exhibit offset due to imbalances between the two half-circuits that provide positive feedback. These imbalances result from random mismatch. Additional controllable imbalances are sometimes intentionally included to counteract random offsets and create an accurate comparator.\n\nA latch featuring an offset adjustment mechanism is shown in Fig. 10.19 [Cho, 1995]. In latch mode, the cross-coupled pair $Q_{1,2}$ is source-degenerated by the triode transistors $Q_{3-6}$. Thus, the transconductance of each half-circuit, $\\mathbf{G}_{m1,2}$, depends on the applied differential voltage $\\mathrm{V}_{\\text{ref}}^{\\pm}$ and the input voltage $\\mathrm{V}_{\\text{in}}^{\\pm}$. A dc current $\\mathrm{i}_{0}$ flows at the onset of latch mode since the node voltages $\\mathrm{V}_{\\text{out}}^{\\pm}$ have been reset to the positive supply, with all NMOS transistors activated. Therefore, in the absence of random mismatch, the latch will be balanced with equal half-circuit currents only when\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{V}_{\\mathrm{in}} = \\left(\\frac{\\mathrm{W}_{3,6}}{\\mathrm{W}_{4,5}}\\right) \\Delta \\mathrm{V}_{\\mathrm{ref}} \\tag{10.33}\n\\end{equation*}\n$$\n\nimage_name:Fig. 10.17\ndescription:The circuit illustrates a linearized latch model featuring a voltage-controlled current source, a capacitor, a resistor, and a current source all connected to a common node Vy. The voltages and currents are referenced to ground.\n\nFig. 10.17 A linearized model of the latch showing various sources of offset, whether random or intentional.\nimage_name:Fig. 10.17\ndescription:The circuit illustrates a linearized latch model featuring a voltage-controlled current source, a capacitor, a resistor, and a current source all connected to a common node Vy. The voltages and currents are referenced to ground.\n\nimage_name:Fig. 10.18\ndescription:**Type of Graph and Function:**\nThe graph is a time-domain waveform depicting the evolution of voltages at two nodes, Vx and Vy, over time in a latch circuit.\n\n**Axes Labels and Units:**\n- The horizontal axis represents time, typically in seconds or milliseconds in such contexts, though specific units are not provided.\n- The vertical axis represents voltage, likely in volts, though specific units are not provided.\n\n**Overall Behavior and Trends:**\n- The graph displays two curves, Vx and Vy, which start from a common point and diverge over time.\n- Vx increases, indicating a positive trend, while Vy decreases, indicating a negative trend.\n- The divergence reflects the development of a differential voltage due to differing time constants (τ1 ≠ τ2).\n- Positive feedback is noted for regenerating logic signals, suggesting the circuit amplifies the difference between Vx and Vy.\n\n**Key Features and Technical Details:**\n- The initial point where both Vx and Vy start is crucial, likely representing the latch's initial condition.\n- The graph highlights two regions with ellipses, indicating significant points where the voltages' behavior is pronounced, possibly where the rate of change is most notable.\n- The system's dynamics are influenced by different time constants, τ1 and τ2, affecting how quickly Vx and Vy diverge.\n\n**Annotations and Specific Data Points:**\n- Annotations explain the cause of differential voltage due to different time constants and the role of positive feedback in regenerating logic signals.\n- The graph emphasizes qualitative voltage behavior over time without specific numerical values.\n\nFig. 10.18 Evolution of the latch node voltages when $i_{01} = i_{02} \\neq 0$ and $R_{L1}C_{L1} \\neq R_{L2}C_{L2}$.\nimage_name:Fig. 10.19\ndescription:The circuit is a latch with adjustable offset, utilizing NMOS and PMOS transistors to generate a differential output based on input and reference voltages. It is designed to compensate for offsets, potentially due to mismatches or parasitics.\n\nFig. 10.19 A latch circuit with adjustable offset [Cho, 1995].\n\nEquation (10.33) represents the latch offset due to $\\Delta \\mathrm{V}_{\\text{ref}}$, which can be adjusted to counteract other offset sources, such as those from device size mismatches or parasitics. A comprehensive general analysis linking all offset sources to circuit parameters is quite complex [He, 2009]."
},
{
    "text": "The input offset of a latch is affected by both random and systematic mismatches between its two half-circuits. When employing very small transistors, this mismatch can be substantial, often resulting in offsets of tens of millivolts or more. In such scenarios, additional components may be added to control the imbalances in the circuit, thereby canceling the effects of random mismatch and achieving a latch with nearly zero overall offset.\n\nThe latch model depicted in Fig. 10.16 is revised in Fig. 10.17 to highlight various factors contributing to latch offset. Imbalances such as $i_{01} \\neq i_{02}$, $G_{m 1} \\neq G_{m 2}$, etc., may result from random mismatch or be intentionally introduced to adjust the latch offset. Clearly, when $i_{01} \\neq i_{02}$ and/or $G_{m 1} \\neq G_{m 2}$, an offset is introduced because, with $V_{x}=V_{y} \\neq 0$, different currents flow through each half-circuit. However, even if the offset current $i_{0}$ and transconductances $G_{m}$ are perfectly matched and $V_{x}(0)=V_{y}(0) \\neq 0$, mismatched $R_{L}$ loads will cause $V_{x}$ and $V_{y}$ to respond with different time constants, immediately resulting in a finite differential voltage $\\Delta \\mathrm{V}=\\mathrm{V}_{\\mathrm{x}}-\\mathrm{V}_{\\mathrm{y}}$, which triggers the circuit's positive feedback, ultimately regenerating a logic signal. The progression of node voltages under these conditions is shown in Fig. 10.18.\n\nKey Point: Latches exhibit offset due to imbalances between the two half-circuits that provide positive feedback. These imbalances stem from random mismatch. Sometimes, additional controllable imbalances are deliberately included to counteract random offsets and create an accurate comparator.\n\nA latch with an offset adjustment mechanism is illustrated in Fig. 10.19 [Cho, 1995]. In latch mode, the cross-coupled pair $Q_{1,2}$ is source-degenerated by the triode transistors $Q_{3-6}$. Consequently, the transconductance of each half-circuit, $\\mathbf{G}_{\\mathrm{m} 1,2}$, depends on the applied differential voltage $\\mathrm{V}_{\\text {ref }}^{\\pm}$ and the input voltage $\\mathrm{V}_{\\mathrm{in}}^{\\pm}$. A dc current $\\mathrm{i}_{\\text {dc }}$ flows at the onset of latch mode because the node voltages $\\mathrm{V}_{\\text {out }}^{\\pm}$ have been reset to the positive supply, with all NMOS transistors activated. Thus, in the absence of random mismatch, the latch will be balanced with equal half-circuit currents only when\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{V}_{\\mathrm{in}}=\\left(\\frac{\\mathrm{W}_{3,6}}{\\mathrm{~W}_{4,5}}\\right) \\Delta \\mathrm{V}_{\\mathrm{ref}} \\tag{10.33}\n\\end{equation*}\n$$\n\nimage_name:Fig. 10.17\ndescription:The circuit depicts a linearized latch model featuring a voltage-controlled current source, a capacitor, a resistor, and a current source all connected to a common node Vy. The voltages and currents are referenced to ground.\n\nFig. 10.17 A linearized model of the latch showing various sources of offset, whether random or intentional.\nimage_name:Fig. 10.17\ndescription:The circuit depicts a linearized latch model featuring a voltage-controlled current source, a capacitor, a resistor, and a current source all connected to a common node Vy. The voltages and currents are referenced to ground.\n\nimage_name:Fig. 10.18\ndescription:**Type of Graph and Function:**\nThe graph is a time-domain waveform depicting the evolution of voltages at two nodes, Vx and Vy, over time in a latch circuit.\n\n**Axes Labels and Units:**\n- The horizontal axis represents time, typically in seconds or milliseconds for such contexts, though specific units are not provided.\n- The vertical axis represents voltage, likely in volts, though specific units are not provided.\n\n**Overall Behavior and Trends:**\n- The graph shows two curves, Vx and Vy, starting from a common point and diverging over time.\n- Vx increases, indicating a positive trend, while Vy decreases, showing a negative trend.\n- The divergence signifies the development of a differential voltage due to differing time constants (τ1 ≠ τ2).\n- Positive feedback is noted to regenerate logic signals, indicating the circuit amplifies the difference between Vx and Vy.\n\n**Key Features and Technical Details:**\n- The initial point where both Vx and Vy start is crucial, likely representing the latch's initial condition.\n- The graph highlights two regions with ellipses, indicating significant points where voltage behavior changes markedly.\n- The system's dynamics are influenced by different time constants, τ1 and τ2, affecting how quickly Vx and Vy diverge.\n\n**Annotations and Specific Data Points:**\n- Annotations explain the cause of differential voltage due to differing time constants and the role of positive feedback in regenerating logic signals.\n- The graph focuses on qualitative voltage behavior over time, without providing specific numerical values.\n\nFig. 10.18 Evolution of latch node voltages when $i_{01}=i_{02} \\neq 0$ and $R_{L 1} C_{L 1} \\neq R_{L 2} C_{L 2}$.\nimage_name:Fig. 10.19\ndescription:The circuit is a latch with adjustable offset, using a combination of NMOS and PMOS transistors to generate a differential output based on input and reference voltages. It is designed to compensate for offsets, potentially due to mismatches or parasitics.\n\nFig. 10.19 A latch circuit with controllable offset [Cho, 1995].\n\nEquation (10.33) represents the latch offset due to $\\Delta \\mathrm{V}_{\\text {ref }}$, which can be adjusted to counteract other offset sources, such as those from device size mismatches or parasitics. A comprehensive general analysis linking all offset sources to circuit parameters is quite complex [He, 2009]."
},
{
    "text": "The input offset of a latch is affected by both random and systematic mismatches between its two half-circuits. When employing very small transistors, this mismatch can be substantial, often resulting in offsets of tens of millivolts or more. In such scenarios, additional components may be added to control the imbalances in the circuit, thereby canceling the effects of random mismatch and achieving a latch with nearly zero overall offset.\n\nThe latch model depicted in Fig. 10.16 is revised in Fig. 10.17 to highlight various contributors to latch offset. Imbalances such as $i_{01} \\neq i_{02}$ and $G_{m 1} \\neq G_{m 2}$ may stem from random mismatch or be intentionally introduced to allow for adjustment of the latch offset. Clearly, when $i_{01} \\neq i_{02}$ and/or $G_{m 1} \\neq G_{m 2}$, some offset is introduced because, with $V_{x}=V_{y} \\neq 0$, different currents flow through each half-circuit. However, even if the offset current $i_{0}$ and transconductances $G_{m}$ are perfectly matched and $V_{x}(0)=V_{y}(0) \\neq 0$, mismatched $R_{L}$ loads will cause the node voltages $V_{x}$ and $V_{y}$ to respond with different time constants, immediately resulting in a finite differential voltage $\\Delta \\mathrm{V}=\\mathrm{V}_{\\mathrm{x}}-\\mathrm{V}_{\\mathrm{y}}$. This, in turn, triggers the circuit's positive feedback, eventually regenerating a logic signal. The progression of node voltages under these conditions is illustrated in Fig. 10.18.\n\nKey Point: Latches exhibit offset due to imbalances between the two half-circuits that provide positive feedback. These imbalances are caused by random mismatch. Additional, controllable imbalances are sometimes deliberately included to cancel random offsets and ensure accurate comparator performance.\n\nA latch featuring an offset adjustment mechanism is presented in Fig. 10.19 [Cho, 1995]. In latch mode, the cross-coupled pair $Q_{1,2}$ is source-degenerated by the triode transistors $Q_{3-6}$. Thus, the transconductance of each half-circuit, $\\mathbf{G}_{\\mathrm{m} 1,2}$, depends on the applied differential voltage $\\mathrm{V}_{\\text {ref }}^{\\pm}$ and the input voltage $\\mathrm{V}_{\\mathrm{in}}^{\\pm}$. A dc current $\\mathrm{i}_{\\text {dc}}$ flows at the onset of latch mode because the node voltages $\\mathrm{V}_{\\text {out }}^{\\pm}$ have been reset to the positive supply, with all NMOS transistors activated. Therefore, in the absence of random mismatch, the latch will be in a balanced state with equal half-circuit currents only when\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{V}_{\\mathrm{in}}=\\left(\\frac{\\mathrm{W}_{3,6}}{\\mathrm{~W}_{4,5}}\\right) \\Delta \\mathrm{V}_{\\mathrm{ref}} \\tag{10.33}\n\\end{equation*}\n$$\n\nimage_name:Fig. 10.17\ndescription:The circuit illustrates a linearized latch model featuring a voltage-controlled current source, a capacitor, a resistor, and a current source all connected to a common node Vy. The voltages and currents are referenced to ground.\n\nFig. 10.17 A linearized model of the latch showing various sources of offset, whether random or intentional.\nimage_name:Fig. 10.17\ndescription:The circuit depicts a linearized latch model with a voltage-controlled current source, a capacitor, a resistor, and a current source all connected to a common node Vy. The voltages and currents are referenced to ground.\n\nimage_name:Fig. 10.18\ndescription:**Type of Graph and Function:**\nThe graph is a time-domain waveform depicting the evolution of voltages at two nodes, Vx and Vy, over time in a latch circuit.\n\n**Axes Labels and Units:**\n- The horizontal axis represents time, typically in seconds or milliseconds in such contexts, though specific units are not provided.\n- The vertical axis represents voltage, likely in volts, though specific units are not indicated.\n\n**Overall Behavior and Trends:**\n- The graph displays two curves, Vx and Vy, which start from a common point and diverge over time.\n- Vx increases, indicating a positive trend, while Vy decreases, showing a negative trend.\n- The divergence highlights the development of a differential voltage due to differing time constants (τ1 ≠ τ2).\n- Positive feedback is noted to regenerate logic signals, suggesting the circuit amplifies the difference between Vx and Vy.\n\n**Key Features and Technical Details:**\n- The initial point where both Vx and Vy start is crucial, likely representing the latch's initial condition.\n- The graph marks two regions with ellipses, indicating significant points where the voltages' behavior is most pronounced.\n- The system's dynamics are influenced by different time constants, τ1 and τ2, affecting how quickly Vx and Vy diverge.\n\n**Annotations and Specific Data Points:**\n- Annotations explain the cause of differential voltage due to differing time constants and the role of positive feedback in regenerating logic signals.\n- The graph emphasizes qualitative voltage behavior over time without providing specific numerical values.\n\nFig. 10.18 Evolution of the latch node voltages when $i_{01}=i_{02} \\neq 0$ and $R_{L 1} C_{L 1} \\neq R_{L 2} C_{L 2}$.\nimage_name:Fig. 10.19\ndescription:The circuit is a latch with adjustable offset, utilizing NMOS and PMOS transistors to generate a differential output based on input and reference voltages. It is designed to compensate for offsets, potentially caused by mismatches or parasitics.\n\nFig. 10.19 A latch circuit with controllable offset [Cho, 1995].\n\nEquation (10.33) represents the latch offset due to $\\Delta \\mathrm{V}_{\\text {ref }}$, which can be adjusted to counteract other offset sources, such as those from device size mismatches or parasitics. A comprehensive general analysis linking all offset sources to circuit parameters is quite complex [He, 2009]."
},
{
    "text": "The input offset of a latch is affected by both random and systematic mismatches between its two half-circuits. When employing very small transistors, this mismatch can be substantial, often resulting in offsets of tens of millivolts or more. In such scenarios, additional components may be added to control the circuit imbalances, thereby canceling the effects of random mismatch and achieving a latch with nearly zero overall offset.\n\nThe latch model depicted in Fig. 10.16 is revised in Fig. 10.17 to highlight various factors contributing to latch offset. Imbalances such as $i_{01} \\neq i_{02}$ and $G_{m1} \\neq G_{m2}$ may stem from random mismatch or be intentionally introduced to adjust the latch offset. Clearly, when $i_{01} \\neq i_{02}$ and/or $G_{m1} \\neq G_{m2}$, some offset is introduced because, with $V_x = V_y \\neq 0$, different currents flow through each half-circuit. However, even if the offset current $i_0$ and transconductances $G_m$ are perfectly matched and $V_x(0) = V_y(0) \\neq 0$, mismatched $R_L$ loads will cause $V_x$ and $V_y$ to respond with different time constants, immediately resulting in a finite differential voltage $\\Delta V = V_x - V_y$. This differential voltage then triggers the circuit's positive feedback, eventually regenerating a logic signal. The progression of node voltages under these conditions is depicted in Fig. 10.18.\n\nKey Point: Latches exhibit offset due to imbalances between the two half-circuits that provide positive feedback. These imbalances arise from random mismatch. Additional, controllable imbalances are sometimes deliberately included to counteract random offsets and create an accurate comparator.\n\nA latch featuring an offset adjustment mechanism is illustrated in Fig. 10.19 [Cho, 1995]. In latch mode, the cross-coupled pair $Q_{1,2}$ is source-degenerated by the triode transistors $Q_{3-6}$. Thus, the transconductance of each half-circuit, $\\mathbf{G}_{\\mathrm{m}1,2}$, depends on the applied differential voltage $\\mathrm{V}_{\\text{ref}}^{\\pm}$ and the input voltage $\\mathrm{V}_{\\mathrm{in}}^{\\pm}$. A dc current $\\mathrm{i}_{\\text{dc}}$ flows at the onset of latch mode since the node voltages $\\mathrm{V}_{\\text{out}}^{\\pm}$ have been reset to the positive supply, with all NMOS transistors activated. Consequently, in the absence of any random mismatch, the latch will be in a balanced state with equal half-circuit currents only when\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{V}_{\\mathrm{in}} = \\left(\\frac{\\mathrm{W}_{3,6}}{\\mathrm{W}_{4,5}}\\right) \\Delta \\mathrm{V}_{\\mathrm{ref}} \\tag{10.33}\n\\end{equation*}\n$$\n\nimage_name:Fig. 10.17\ndescription:The circuit represents a linearized latch model featuring a voltage-controlled current source, a capacitor, a resistor, and a current source all connected to a common node Vy. The voltages and currents are referenced to ground.\n\nFig. 10.17 A linearized model of the latch showing various sources of offset, whether random or intentional.\nimage_name:Fig. 10.17\ndescription:The circuit illustrates a linearized latch model with a voltage-controlled current source, a capacitor, a resistor, and a current source all connected to a common node Vy. The voltages and currents are referenced to ground.\n\nimage_name:Fig. 10.18\ndescription:**Type of Graph and Function:**\nThe graph is a time-domain waveform depicting the evolution of voltages at two nodes, Vx and Vy, over time in a latch circuit.\n\n**Axes Labels and Units:**\n- The horizontal axis represents time, typically in seconds or milliseconds in such contexts, though specific units are not provided.\n- The vertical axis represents voltage, likely in volts, though specific units are not given.\n\n**Overall Behavior and Trends:**\n- The graph shows two curves, Vx and Vy, starting from a common point and diverging over time.\n- Vx increases, indicating a positive trend, while Vy decreases, showing a negative trend.\n- The divergence reflects the development of a differential voltage due to differing time constants (τ1 ≠ τ2).\n- Positive feedback is noted to regenerate logic signals, suggesting the circuit amplifies the difference between Vx and Vy.\n\n**Key Features and Technical Details:**\n- The initial common starting point of Vx and Vy is crucial, likely representing the latch's initial condition.\n- The graph highlights two regions with ellipses, indicating significant points where the voltage behavior is most pronounced.\n- The system's dynamics are influenced by different time constants, τ1 and τ2, affecting how quickly Vx and Vy diverge.\n\n**Annotations and Specific Data Points:**\n- Annotations explain the cause of differential voltage due to different time constants and the role of positive feedback in regenerating logic signals.\n- The graph emphasizes qualitative voltage behavior over time without providing specific numerical values.\n\nFig. 10.18 Evolution of the latch node voltages when $i_{01} = i_{02} \\neq 0$ and $R_{L1}C_{L1} \\neq R_{L2}C_{L2}$.\nimage_name:Fig. 10.19\ndescription:The circuit is a latch with adjustable offset, utilizing NMOS and PMOS transistors to generate a differential output based on input and reference voltages. It is designed to compensate for offsets, potentially caused by mismatches or parasitics.\n\nFig. 10.19 A latch circuit with controllable offset [Cho, 1995].\n\nEquation (10.33) represents the latch offset due to $\\Delta \\mathrm{V}_{\\text{ref}}$, which can be adjusted to counteract other offset sources, such as those from device size mismatches or parasitics. A comprehensive general analysis linking all offset sources to circuit parameters is quite complex [He, 2009]."
},
{
    "text": "The input offset of a latch is affected by both random and systematic mismatches between its two half-circuits. When employing very small transistors, this mismatch can become substantial, often resulting in offsets of tens of millivolts or more. In such scenarios, additional components may be added to control the imbalances in the circuit, thereby canceling the effects of random mismatch and achieving a latch with nearly zero overall offset.\n\nThe latch model depicted in Fig. 10.16 is revised in Fig. 10.17 to highlight various factors contributing to latch offset. Imbalances such as $i_{01} \\neq i_{02}$ and $G_{m 1} \\neq G_{m 2}$ may stem from random mismatch or be intentionally introduced to adjust the latch offset. Clearly, when $i_{01} \\neq i_{02}$ and/or $G_{m 1} \\neq G_{m 2}$, some offset is introduced because, with $V_{x}=V_{y} \\neq 0$, different currents flow through each half-circuit. However, even if the offset current $i_{0}$ and transconductances $G_{m}$ are perfectly matched and $V_{x}(0)=V_{y}(0) \\neq 0$, mismatched $R_{L}$ loads will cause the node voltages $V_{x}$ and $V_{y}$ to respond with different time constants, immediately resulting in a finite differential voltage $\\Delta \\mathrm{V}=\\mathrm{V}_{\\mathrm{x}}-\\mathrm{V}_{\\mathrm{y}}$. This, in turn, triggers the circuit's positive feedback, eventually regenerating a logic signal. The progression of node voltages under these conditions is depicted in Fig. 10.18.\n\nKey Point: Latches exhibit offset due to imbalances between the two half-circuits that provide positive feedback. These imbalances are primarily caused by random mismatch. Sometimes, additional controllable imbalances are deliberately included in the design to counteract random offsets and create an accurate comparator.\n\nA latch featuring an offset adjustment mechanism is illustrated in Fig. 10.19 [Cho, 1995]. In latch mode, the cross-coupled pair $Q_{1,2}$ is source-degenerated by the triode transistors $Q_{3-6}$. Thus, the transconductance of each half-circuit, $\\mathbf{G}_{\\mathrm{m} 1,2}$, depends on the applied differential voltage $\\mathrm{V}_{\\text {ref }}^{\\pm}$ and the input voltage $\\mathrm{V}_{\\mathrm{in}}^{\\pm}$. A dc current $\\mathrm{i}_{\\text {dc}}$ flows at the onset of latch mode since the node voltages $\\mathrm{V}_{\\text {out }}^{\\pm}$ have been reset to the positive supply, with all NMOS transistors activated. Therefore, in the absence of any random mismatch, the latch will be balanced with equal half-circuit currents only when\n\n$$\n\\begin{equation*}\n\\Delta \\mathrm{V}_{\\mathrm{in}}=\\left(\\frac{\\mathrm{W}_{3,6}}{\\mathrm{~W}_{4,5}}\\right) \\Delta \\mathrm{V}_{\\mathrm{ref}} \\tag{10.33}\n\\end{equation*}\n$$\n\nimage_name:Fig. 10.17\ndescription:The circuit shows a linearized latch model featuring a voltage-controlled current source, a capacitor, a resistor, and a current source all connected to a common node Vy. The voltages and currents are referenced to ground.\n\nFig. 10.17 A linearized model of the latch highlighting various sources of offset, whether random or intentional.\nimage_name:Fig. 10.17\ndescription:The circuit illustrates a linearized latch model with a voltage-controlled current source, a capacitor, a resistor, and a current source all connected to a common node Vy. The voltages and currents are referenced to ground.\n\nimage_name:Fig. 10.18\ndescription:**Type of Graph and Function:**\nThe graph is a time-domain waveform depicting the evolution of voltages at two nodes, Vx and Vy, over time in a latch circuit.\n\n**Axes Labels and Units:**\n- The horizontal axis represents time, typically in seconds or milliseconds in such contexts, though specific units are not provided.\n- The vertical axis represents voltage, likely in volts, though specific units are not given.\n\n**Overall Behavior and Trends:**\n- The graph displays two curves, Vx and Vy, which start from a common point and diverge over time.\n- Vx increases, indicating a positive trend, while Vy decreases, showing a negative trend.\n- The divergence highlights the development of a differential voltage due to differing time constants (τ1 ≠ τ2).\n- Positive feedback is noted to regenerate logic signals, suggesting the circuit amplifies the difference between Vx and Vy.\n\n**Key Features and Technical Details:**\n- The initial point where both Vx and Vy start is crucial, likely representing the latch's initial condition.\n- The graph marks two regions with ellipses, indicating critical points where voltage behavior is significant, possibly where the rate of change is most pronounced.\n- The system's dynamics are influenced by different time constants, τ1 and τ2, affecting how quickly Vx and Vy diverge.\n\n**Annotations and Specific Data Points:**\n- Annotations explain the cause of differential voltage due to different time constants and the role of positive feedback in regenerating logic signals.\n- The graph emphasizes qualitative voltage behavior over time without providing specific numerical values.\n\nFig. 10.18 Evolution of the latch node voltages when $i_{01}=i_{02} \\neq 0$ and $R_{L 1} C_{L 1} \\neq R_{L 2} C_{L 2}$.\nimage_name:Fig. 10.19\ndescription:The circuit is a latch with adjustable offset, utilizing NMOS and PMOS transistors to generate a differential output based on input and reference voltages. It is designed to compensate for offsets, potentially caused by mismatches or parasitics.\n\nFig. 10.19 A latch circuit with controllable offset [Cho, 1995].\n\nEquation (10.33) represents the latch offset due to $\\Delta \\mathrm{V}_{\\text {ref }}$, which can be adjusted to counteract other offset sources, such as those from device size mismatches or parasitics. A comprehensive general analysis linking all offset sources to circuit parameters is quite complex [He, 2009]."
},
{
    "text": "This section outlines various high-speed comparator designs. The literature on integrated circuit technology features numerous examples of latched comparators. For instance, the latches depicted in Fig. 10.14 and Fig. 10.19 can be preceded by a resistively loaded differential pair preamplifier to form a latched comparator. Figure 10.20 presents another comparator [Song, 1990], where the second stage's positive feedback is always active. In track mode, enabling the two diode-connected transistors in the gain stage reduces the gain around the positive-feedback loop to less than one, ensuring circuit stability. The combination of these transistors and the positive-feedback loop transistors functions as a moderately large impedance, providing gain from the preamplifier to the track-and-latch stage. The diode-connected loads in the preamplifier stage offer limited gain to maximize speed while buffering input circuitry kickback.\n\nimage_name:Fig. 10.20\ndescription:The circuit is a two-stage comparator featuring a preamplifier and a positive-feedback track-and-latch stage. It utilizes diode-connected loads to maintain low node impedances, enhancing speed. Precharging is employed to eliminate memory from previous decisions, thereby reducing hysteresis.\n\nFig. 10.20 A two-stage comparator comprising a preamplifier and a positive-feedback track-and-latch stage.\n\nAnother comparator is illustrated in Fig. 10.21 [Norsworthy, 1989]. This design also employs diode-connected loads to keep node impedances low (similar to current-mode circuit design), ensuring small node time constants and rapid operation. It uses precharging to erase any memory from previous decisions that could cause hysteresis. For example, the positive-feedback stage is precharged low, while the digital-restoration stage is precharged high, akin to Domino CMOS logic [Krambeck, 1982].\n\nYet another comparator, shown in Fig. 10.22 with corresponding clock waveforms, eliminates input-offset voltages from both stages via capacitive coupling. It includes common-mode feedback circuitry for the first preamplifier stage, accommodating large common-mode input signals. Unlike fully differential opamps, in fully differential comparators, the linearity of the common-mode feedback circuitry is less critical because, with large signals (and nonlinear common-mode feedback), there is no ambiguity in resolving the input signal's sign. This permits a simple differential pair for CMFB circuitry. The measured (but unpublished) performance of this circuit achieved a 0.1-mV resolution at a 2-MHz clock frequency, despite using outdated 5-µm technology. The performance was limited by the test setup, not the circuitry.\n\nA BiCMOS comparator with excellent performance is described in [Razavi, 1992]. It is based on the concept that resetting the first stage is unnecessary; input-offset errors can still be eliminated by resetting the right side of the coupling capacitors between the stages, provided the first stage's gain is not too high [Poujois, 1978] [Vittoz, 1985]. A simplified schematic of this comparator is shown in Fig. 10.24. During the reset phase, the preamplifier inputs are connected directly to ground (or a reference voltage), and the coupling capacitor outputs are grounded, storing any first-stage offset voltages. When the comparator exits the reset phase, the clock feedthrough effect of $S_{5}$ and $S_{6}$ on input resolution is reduced by the first stage's gain. In [Razavi, 1992], the first stage is a BiCMOS preamplifier with MOS source followers, a bipolar differential amplifier, and emitter-follower output buffers, as shown in Fig. 10.25. The circuit operates between ground and a negative voltage supply, with p-channel transistors used for switches. The track-and-latch stage includes both bipolar and CMOS latches, as shown in Fig. 10.23. During reset, $\\phi_{1}$ is low and $\\phi_{2}$ is high, connecting $X_{1}$ and $Y_{1}$ to ground via $M_{1}$ and $M_{2}$, discharging $C_{3}$ to the minus supply through $M_{11}$, and discharging $X_{2}$ and $Y_{2}$ through $M_{9}$ and $M_{10}$. $M_{3}$ and $M_{4}$ are off. When $\\phi_{1}$ goes high, $X_{1}$ and $Y_{1}$ float, and the preamplifier outputs connect to the input signal. After a brief delay for the preamplifier's transient response, $\\phi_{2}$ goes low, activating $M_{12}$ and the positive feedback of $Q_{5}$ and $Q_{6}$, developing a differential voltage of about 200 mV between $X_{1}$ and $Y_{1}$. The bipolar latch's offset is minimal, typically around one millivolt or less. When activated, the only power dissipated is that required to charge $C_{3}$, with no dc power dissipation. Shortly after, the inverter connected to $C_{3}$ changes state, turning on $M_{3}$ and $M_{4}$, activating the CMOS latch consisting of cross-coupled $M_{5}$ and $M_{6}$ and cross-coupled $M_{7}$ and $M_{8}$. This prevents $X_{1}$ and $Y_{1}$ from discharging too far and amplifies the 200-mV difference signal to nearly a full CMOS voltage change, making the latch accurate, fast, and low power. [Razavi, 1992] also describes an intriguing CMOS-only comparator, which is not detailed here but is recommended for further exploration by interested readers.\n\nimage_name:Fig. 10.21 A two-stage comparator.\ndescription:The circuit is a two-stage comparator with preamp and latch stages, employing positive feedback and digital signal-level restoration. The preamp stage amplifies the input signal, while the latch stage provides decision-making capability. The design minimizes input-offset errors by resetting the right side of the coupling capacitors.\n\nFig. 10.21 A two-stage comparator.\n\nimage_name:Fig. 10.22\ndescription:The circuit is a two-stage comparator with capacitive coupling to eliminate input-offset-voltage and clock-feedthrough errors, incorporating positive feedback for rapid operation. It includes several key components and stages:\n\n1. **First Switched-Capacitor Gain Stage:**\n- The input voltage \\( V_{in} \\) is fed into this stage through capacitors \\( C_{1A} \\) and \\( C_{1B} \\).\n- The stage uses switches controlled by clock signals \\( \\phi_1 \\) and \\( \\phi_2 \\) for charge transfer and amplification.\n- Common-mode feedback stabilizes the output.\n\n2. **Second Gain Stage:**\n- Coupled with capacitor \\( C_{2A} \\), this stage uses additional switches controlled by clock signals \\( \\phi_1'' \\) and \\( \\phi_1' \\).\n- Gain is further amplified and stabilized through common-mode feedback.\n\n3. **Positive Feedback Stage:**\n- This stage enhances speed via regenerative feedback, rapidly driving the output to a stable state.\n\n4. **Clock Signals:**\n- The timing diagram includes clock signals \\( \\phi_1 \\), \\( \\phi_1' \\), \\( \\phi_1'' \\), and \\( T_{rk} \\), showing their phases and durations. These signals control the switching actions, crucial for proper timing of charge transfer and amplification.\n\nOverall, the circuit is designed for fast and accurate signal comparison by efficiently managing charge transfer and amplification through switched-capacitor techniques and positive feedback.\n\nFig. 10.22 A two-stage comparator with capacitive coupling to eliminate input-offset-voltage and clock-feedthrough errors, along with positive feedback for fast operation.\n\nimage_name:Fig. 10.23\ndescription:The circuit is a two-stage comparator with capacitive coupling to eliminate input-offset-voltage and clock-feedthrough errors. It uses switched-capacitor techniques and positive feedback for fast operation. The cross-coupled transistors Q5 and Q6 prevent nodes X1 and Y1 from discharging too far.\n\nFig. 10.23 The BiCMOS track-and-latch stage in [Razavi, 1992].\n\nimage_name:Fig. 10.24\ndescription:\n[\nname: S1, type: Switch, ports: {N1: Vin, N2: phi1}\nname: S2, type: Switch, ports: {N1: Vin, N2: phi1}\nname: S3, type: Switch, ports: {N1: phi1, N2: GND}\nname: S4, type: Switch, ports: {N1: phi1, N2: GND}\nname: S5, type: Switch, ports: {N1: phi1, N2: GND}\nname: S6, type: Switch, ports: {N1: phi1, N2: GND}\nname: OpAmp, type: OpAmp, ports: {InP: phi1, InN: phi1, OutP: phi1, OutN: phi1}\nname: Positive-feedback latch, type: Other, ports: {N1: phi1, N2: Vout}\n]\nextrainfo:The circuit is a two-stage comparator with capacitive coupling to eliminate input-offset-voltage and clock-feedthrough errors. It uses switched-capacitor techniques and positive feedback for fast operation. The cross-coupled transistors prevent nodes from discharging too far. The latch amplifies the 200-mV difference signal to a full-level CMOS voltage change, ensuring accuracy, speed, and low power.\n\nFig. 10.24 A simplified schematic of the comparator described in [Razavi, 1992]."
},
{
    "text": "This section outlines various high-speed comparator designs. The literature on integrated circuit technology features numerous examples of latched comparators. For instance, the latches depicted in Fig. 10.14 and Fig. 10.19 can be preceded by a resistively loaded differential pair preamplifier to form a latched comparator. Figure 10.20 presents another comparator [Song, 1990], where the second stage's positive feedback is continuously enabled. In track mode, when the two diode-connected transistors in the gain stage are active, the loop gain is less than one, ensuring circuit stability. The combination of these transistors and the positive-feedback loop acts as a moderately high impedance, providing gain from the preamplifier to the track-and-latch stage. The diode-connected loads in the preamplifier stage offer limited gain to maximize speed while buffering input circuitry kickback.\n\nimage_name:Fig. 10.20\ndescription:A two-stage comparator featuring a preamplifier and a positive-feedback track-and-latch stage. It utilizes diode-connected loads to maintain low node impedances, enhancing speed. Precharging is employed to eliminate memory from prior decisions, reducing hysteresis.\n\nFig. 10.20 A two-stage comparator with a preamplifier and a positive-feedback track-and-latch stage.\n\nAnother comparator is illustrated in Fig. 10.21 [Norsworthy, 1989]. This design also employs diode-connected loads to keep node impedances low, akin to current-mode design techniques, thereby minimizing node time constants and ensuring fast operation. It uses precharging to erase any memory from previous decisions that could cause hysteresis. For instance, the positive-feedback stage is precharged low, while the digital-restoration stage is precharged high, similar to Domino CMOS logic [Krambeck, 1982].\n\nYet another comparator is shown in Fig. 10.22, accompanied by appropriate clock waveforms. ${ }^{6}$ This design消除s input-offset voltages from both stages using capacitive coupling. It also includes common-mode feedback circuitry for the first preamplifier stage, accommodating large common-mode signals. Unlike fully differential opamps, in fully differential comparators, the linearity of the common-mode feedback circuitry is less critical because, with large signals (where the feedback becomes nonlinear), there is no ambiguity in resolving the input signal's sign. This permits the use of a simple differential pair for CMFB circuitry. The measured (though unpublished) performance of this circuit achieved a $0.1-\\mathrm{mV}$ resolution at a $2-\\mathrm{MHz}$ clock frequency, despite using outdated $5-\\mu \\mathrm{m}$ technology. The performance was limited by the test setup, not the circuitry.\n\nA BiCMOS comparator with excellent performance is detailed in [Razavi, 1992]. It is based on the concept that resetting the first stage is unnecessary; input-offset errors can still be eliminated by resetting the right side of the coupling capacitors between the stages, assuming the first stage's gain is not excessive [Poujois, 1978] [Vittoz, 1985]. A simplified schematic of this comparator is shown in Fig. 10.24. During the reset phase, the preamplifier inputs are directly connected to ground (or a reference voltage), and the coupling capacitor outputs are grounded, storing any first-stage offset voltages. When the comparator exits the reset phase, the clock feedthrough effect of $S_{5}$ and $S_{6}$ on input resolution is reduced by the first stage's gain. In [Razavi, 1992], the first stage is a BiCMOS preamplifier, comprising MOS source followers, a bipolar differential amplifier, and emitter-follower output buffers, as shown in Fig. 10.25. Note that the circuit operates between ground and a negative supply voltage, with p-channel transistors used for switches. The track-and-latch stage includes both bipolar and CMOS latches, as depicted in Fig. 10.23. During reset, $\\phi_{1}$ is low and $\\phi_{2}$ is high, connecting $X_{1}$ and $Y_{1}$ to ground via $M_{1}$ and $M_{2}$, discharging $C_{3}$ to the minus supply through $M_{11}$, and discharging $X_{2}$ and $Y_{2}$ through $M_{9}$ and $M_{10}$. $M_{3}$ and $M_{4}$ are off. When $\\phi_{1}$ goes high, $X_{1}$ and $Y_{1}$ float, and the preamplifier outputs connect to the input signal. After a brief delay for the preamplifier's transient response, $\\phi_{2}$ goes low, activating $M_{12}$ and the positive feedback of $Q_{5}$ and $Q_{6}$, developing a differential voltage of about 200 mV between $X_{1}$ and $Y_{1}$, given $C_{3}$ is one-fifth the size of $C_{1}$ and $C_{2}$. The bipolar latch's offset is minimal, typically around one millivolt or less. When active, the only power dissipated is for charging $C_{3}$, with no dc power dissipation. Shortly after, the inverter connected to $C_{3}$ changes state, turning on $M_{3}$ and $M_{4}$, activating the CMOS latch with cross-coupled $M_{5}$ and $M_{6}$ and $M_{7}$ and $M_{8}$. The inclusion of cross-coupled $M_{5}$ and $M_{6}$ prevents $X_{1}$ and $Y_{1}$ from discharging too far from ground toward the minus supply and amplifies the 200-mV differential signal to nearly a full CMOS voltage level, making the latch accurate, fast, and low power. [Razavi, 1992] also describes an intriguing CMOS-only comparator, which is not covered here but is recommended for interested readers."
},
{
    "text": "This section outlines various high-speed comparator designs. The literature on integrated circuit technology features numerous latched comparator examples. For instance, the latches depicted in Fig. 10.14 and Fig. 10.19 can be preceded by a resistively loaded differential pair preamplifier to form a latched comparator. Figure 10.20 presents another comparator [Song, 1990], where the second stage's positive feedback is always active. In track mode, with the gain stage's diode-connected transistors enabled, the loop gain is less than one, ensuring circuit stability. The combination of these transistors and the positive-feedback loop acts as a substantial impedance, providing gain from the preamplifier to the track-and-latch stage. The preamplifier's diode-connected loads offer limited gain to maximize speed while buffering input kickback.\n\nimage_name:Fig. 10.20\ndescription:The circuit is a two-stage comparator featuring a preamplifier and a positive-feedback track-and-latch stage. It utilizes diode-connected loads to maintain low node impedances, enhancing speed. Precharging is employed to eliminate memory from prior decisions, reducing hysteresis.\n\nFig. 10.20 A two-stage comparator comprising a preamplifier and a positive-feedback track-and-latch stage.\n\nAnother comparator is illustrated in Fig. 10.21 [Norsworthy, 1989]. This design also employs diode-connected loads to keep node impedances low, akin to current-mode circuit design, ensuring fast operation by minimizing node time constants. It uses precharging to erase any memory from previous decisions that could cause hysteresis. For instance, the positive-feedback stage is precharged low, while the digital-restoration stage is precharged high, similar to Domino CMOS logic [Krambeck, 1982].\n\nYet another comparator is shown in Fig. 10.22, accompanied by appropriate clock waveforms. ${ }^{6}$ This design eradicates input-offset voltages from both stages via capacitive coupling and includes common-mode feedback for the first preamplifier stage, accommodating large common-mode signals. Unlike fully differential opamps, in fully differential comparators, the common-mode feedback circuitry's linearity is less critical, as large signals and nonlinear feedback still clearly resolve the input signal's sign, allowing a simple differential pair for CMFB. This circuit achieved a $0.1-\\mathrm{mV}$ resolution at a $2-\\mathrm{MHz}$ clock frequency, limited by the test setup rather than the circuitry itself, despite using outdated $5-\\mu \\mathrm{m}$ technology.\n\nA high-performing BiCMOS comparator is detailed in [Razavi, 1992]. It is based on the principle that resetting the first stage is unnecessary; input-offset errors can be eliminated by resetting the right side of the coupling capacitors between stages, provided the first stage's gain is not excessive [Poujois, 1978] [Vittoz, 1985]. A simplified schematic of this comparator is shown in Fig. 10.24. During reset, the preamplifier inputs and capacitor outputs are grounded, storing first-stage offset voltages. Exiting reset divides the clock feedthrough effect of $S_{5}$ and $S_{6}$ by the first stage's gain. The described realization features a BiCMOS preamplifier with MOS source followers, a bipolar differential amplifier, and emitter-follower output buffers, operating between ground and a negative supply, with p-channel transistor switches. The track-and-latch stage combines bipolar and CMOS latches, as shown in Fig. 10.23. During reset, $\\phi_{1}$ is low, $\\phi_{2}$ is high, grounding $X_{1}$, $Y_{1}$, and discharging $C_{3}$ and $X_{2}$, $Y_{2}$. $\\phi_{1}$ then goes high, floating $X_{1}$, $Y_{1}$, and connecting the preamplifier to the input. After a delay for transient response, $\\phi_{2}$ goes low, activating the bipolar latch's positive feedback, developing a 200 mV differential voltage. The bipolar latch's offset is minimal, typically below one millivolt, with power dissipation only for charging $C_{3}$. The CMOS latch, activated shortly after, amplifies the 200 mV signal to a full CMOS level, ensuring accuracy, speed, and low power. [Razavi, 1992] also describes an intriguing CMOS-only comparator, not detailed here, for further reader exploration.\n\nimage_name:Fig. 10.21 A two-stage comparator.\ndescription:The circuit is a two-stage comparator with preamp and latch stages, employing positive feedback and digital signal-level restoration. The preamp amplifies the input, while the latch makes decisions, designed to minimize input-offset errors by resetting the right side of the coupling capacitors.\n\nFig. 10.21 A two-stage comparator.\n\nimage_name:Fig. 10.22\ndescription:The circuit is a two-stage comparator with capacitive coupling to eliminate input-offset-voltage and clock-feedthrough errors, incorporating positive feedback for rapid operation. It includes a first switched-capacitor gain stage and a second gain stage, with timing diagrams for clock phases.\n\nimage_name:Fig. 10.22\ndescription:The diagram depicts a two-stage comparator with capacitive coupling to eliminate input-offset-voltage and clock-feedthrough errors, featuring positive feedback for swift operation. Key components and stages include:\n\n1. **First Switched-Capacitor Gain Stage:**\n- Inputs $V_{in}$ via capacitors $C_{1A}$ and $C_{1B}$.\n- Utilizes clock-controlled switches for charge transfer and amplification.\n- Includes common-mode feedback for output stabilization.\n\n2. **Second Gain Stage:**\n- Coupled with $C_{2A}$, using clock-controlled switches for further amplification and stabilization.\n\n3. **Positive Feedback Stage:**\n- Enhances speed via regenerative feedback for quick output stabilization.\n\n4. **Clock Signals:**\n- Timing diagrams for $ \\phi_1 $, $ \\phi_1' $, $ \\phi_1'' $, and $ T_{rk} $, crucial for switch timing and charge management.\n\nOverall, the circuit ensures fast, accurate comparison through efficient charge transfer and amplification.\n\nFig. 10.22 A two-stage comparator with capacitive coupling and positive feedback for fast operation.\n\nimage_name:Fig. 10.23\ndescription:The circuit is a two-stage comparator with capacitive coupling to eliminate input-offset-voltage and clock-feedthrough errors, using switched-capacitor techniques and positive feedback for speed. Cross-coupled transistors Q5 and Q6 prevent excessive discharge of nodes X1 and Y1.\n\nFig. 10.23 The BiCMOS track-and-latch stage in [Razavi, 1992].\n\nimage_name:Fig. 10.24\ndescription:\n[\nname: S1, type: Switch, ports: {N1: Vin, N2: phi1}\nname: S2, type: Switch, ports: {N1: Vin, N2: phi1}\nname: S3, type: Switch, ports: {N1: phi1, N2: GND}\nname: S4, type: Switch, ports: {N1: phi1, N2: GND}\nname: S5, type: Switch, ports: {N1: phi1, N2: GND}\nname: S6, type: Switch, ports: {N1: phi1, N2: GND}\nname: OpAmp, type: OpAmp, ports: {InP: phi1, InN: phi1, OutP: phi1, OutN: phi1}\nname: Positive-feedback latch, type: Other, ports: {N1: phi1, N2: Vout}\n]\nextrainfo:The circuit is a two-stage comparator with capacitive coupling to eliminate input-offset-voltage and clock-feedthrough errors, using switched-capacitor techniques and positive feedback for speed. Cross-coupled transistors prevent excessive node discharge. The latch amplifies a 200-mV difference to a full CMOS level, ensuring accuracy, speed, and low power.\n\nFig. 10.24 A simplified schematic of the comparator described in [Razavi, 1992]."
},
{
    "text": "This section outlines various high-speed comparator designs. The literature on integrated circuit technology features numerous examples of latched comparators. For instance, the latches depicted in Fig. 10.14 and Fig. 10.19 can be preceded by a resistively loaded differential pair preamplifier to form a latched comparator. Figure 10.20 presents another comparator [Song, 1990], where the second stage's positive feedback is always active. In track mode, when the two diode-connected transistors in the gain stage are enabled, the loop gain is less than one, ensuring circuit stability. The combination of these transistors and the positive-feedback loop acts as a moderately large impedance, providing gain from the preamplifier to the track-and-latch stage. The diode-connected loads in the preamplifier stage offer limited gain to maximize speed while buffering input kickback.\n\nimage_name:Fig. 10.20\ndescription:A two-stage comparator featuring a preamplifier and a positive-feedback track-and-latch stage. It utilizes diode-connected loads to maintain low node impedances, enhancing speed. Precharging is employed to eliminate memory from previous decisions, reducing hysteresis.\n\nFig. 10.20 A two-stage comparator with a preamplifier and a positive-feedback track-and-latch stage.\n\nAnother comparator is illustrated in Fig. 10.21 [Norsworthy, 1989]. This design also employs diode-connected loads to keep node impedances low, akin to current-mode design techniques, thereby minimizing node time constants for fast operation. It uses precharging to erase any memory from previous decisions that could cause hysteresis. For example, the positive-feedback stage is precharged low, while the digital-restoration stage is precharged high, similar to Domino CMOS logic [Krambeck, 1982].\n\nYet another comparator is shown in Fig. 10.22, accompanied by appropriate clock waveforms. ${ }^{6}$ This design eradicates input-offset voltages from both stages using capacitive coupling. It also incorporates common-mode feedback circuitry for the first preamplifier stage, accommodating large common-mode input signals. Unlike fully differential opamps, in fully differential comparators, the linearity of the common-mode feedback circuitry is less critical because, with large signals (where the feedback becomes nonlinear), there is no ambiguity in resolving the input signal's sign. This permits the use of a simple differential pair for CMFB circuitry. The measured (but unpublished) performance of this circuit achieved a $0.1-\\mathrm{mV}$ resolution at a $2-\\mathrm{MHz}$ clock frequency, despite using outdated $5-\\mu \\mathrm{m}$ technology. The performance was limited by the test setup, not the circuitry.\n\nA BiCMOS comparator with excellent performance is described in [Razavi, 1992]. It is based on the principle that resetting the first stage is unnecessary; input-offset errors can still be eliminated by resetting the right side of the coupling capacitors between the first and second stages, provided the first stage's gain is not excessive [Poujois, 1978] [Vittoz, 1985]. A simplified schematic of this comparator is shown in Fig. 10.24. During the reset phase, the preamplifier inputs are directly connected to ground (or a reference voltage), and the coupling capacitor outputs are also grounded, storing any first-stage offset voltages. When the comparator exits the reset phase, the clock feedthrough effect of $S_{5}$ and $S_{6}$ on input resolution is reduced by the first stage's gain. In the [Razavi, 1992] implementation, the first stage is a BiCMOS preamplifier, comprising MOS source followers followed by a bipolar differential amplifier and emitter-follower output buffers, as shown in Fig. 10.25. Note that the circuit operates between ground and a negative voltage supply, and the switches are realized using p-channel transistors. The track-and-latch stage includes both bipolar and CMOS latches, as depicted in Fig. 10.23. During the reset phase, $\\phi_{1}$ is low and $\\phi_{2}$ is high, connecting $X_{1}$ and $Y_{1}$ to ground via switches $M_{1}$ and $M_{2}$, discharging $C_{3}$ to the minus supply through $M_{11}$, and discharging $X_{2}$ and $Y_{2}$ to the minus supply through $M_{9}$ and $M_{10}$. At this time, $M_{3}$ and $M_{4}$ are off. Next, $\\phi_{1}$ goes high, leaving $X_{1}$ and $Y_{1}$ floating and connecting the preamplifier outputs to its input signal. After a brief delay for the preamplifier's transient response, $\\phi_{2}$ goes low, activating $M_{12}$ and the positive feedback of $Q_{5}$ and $Q_{6}$, developing a differential voltage of about 200 mV between $X_{1}$ and $Y_{1}$, given $C_{3}$ is about one-fifth the size of $C_{1}$ and $C_{2}$. The bipolar latch's offset is minimal, typically around one millivolt or less. Note that, when active, the only power dissipated is that required to charge $\\mathrm{C}_{3}$—there is no dc power dissipation. Shortly after the bipolar latch activates, the inverter connected to $C_{3}$ changes state, lowering its output voltage and turning on $M_{3}$ and $M_{4}$, thereby activating the CMOS latch consisting of cross-coupled $M_{5}$ and $M_{6}$ and cross-coupled $M_{7}$ and $M_{8}$. The inclusion of cross-coupled $M_{5}$ and $M_{6}$ prevents $X_{1}$ and $Y_{1}$ from discharging too far from ground toward the minus power supply and amplifies the 200-mV difference signal to nearly a full-level CMOS voltage change, making the latch accurate, fast, and low power. [Razavi, 1992] also describes an intriguing CMOS-only comparator, not detailed here, but which interested readers may explore."
},
{
    "text": "This section outlines various high-speed comparator designs. The literature on integrated circuit technology features numerous examples of latched comparators. For instance, the latches depicted in Fig. 10.14 and Fig. 10.19 can be preceded by a resistively loaded differential pair preamplifier to form a latched comparator. Figure 10.20 presents another comparator [Song, 1990], where the second stage's positive feedback is always active. In track mode, when the two diode-connected transistors in the gain stage are enabled, the gain around the positive-feedback loop is less than one, ensuring circuit stability. The combination of these diode-connected transistors and the positive-feedback loop transistors acts as a moderately large impedance, providing gain from the preamplifier to the track-and-latch stage. The diode-connected loads in the preamplifier stage offer limited gain to maximize speed while buffering kickback from the input circuitry.\n\nimage_name:Fig. 10.20\ndescription:The circuit is a two-stage comparator featuring a preamplifier and a positive-feedback track-and-latch stage. It utilizes diode-connected loads to maintain low node impedances, enhancing speed. Precharging is employed to eliminate memory from previous decisions, thereby reducing hysteresis.\n\nFig. 10.20 A two-stage comparator comprising a preamplifier and a positive-feedback track-and-latch stage.\n\nAnother comparator is illustrated in Fig. 10.21 [Norsworthy, 1989]. This design also employs diode-connected loads to keep all nodes at relatively low impedance, akin to current-mode circuit design techniques, ensuring small node time constants and fast operation. It uses precharging to eradicate any memory from previous decisions that could cause hysteresis. For example, the positive-feedback stage is precharged low, while the digital-restoration stage is precharged high, similar to Domino CMOS logic [Krambeck, 1982].\n\nYet another comparator is shown in Fig. 10.22, accompanied by appropriate clock waveforms. ${ }^{6}$ This design eliminates input-offset voltages from both the first and second stages through capacitive coupling. It also includes common-mode feedback circuitry for the first preamplifier stage, accommodating input signals with large common-mode components. Unlike fully differential opamps, in fully differential comparators, the linearity of the common-mode feedback circuitry is less critical because, when large signals are present (and the common-mode feedback becomes nonlinear), there is no ambiguity in resolving the input signal's sign. This permits the use of a simple differential pair for CMFB circuitry. The measured (but unpublished) performance of this circuit achieved a $0.1-\\mathrm{mV}$ resolution at a $2-\\mathrm{MHz}$ clock frequency, despite using outdated $5-\\mu \\mathrm{m}$ technology. The performance was limited by the test setup rather than the circuitry itself.\n\nA BiCMOS comparator with excellent performance is described in [Razavi, 1992]. It is based on the principle that resetting the first stage is unnecessary; input-offset errors of the first stage can still be eliminated by resetting the right side of the coupling capacitors between the first and second stages, assuming the first stage's gain is not too high [Poujois, 1978] [Vittoz, 1985]. A simplified schematic of this comparator is shown in Fig. 10.24. During the reset phase, the preamplifier inputs are directly connected to ground (or a reference voltage), and the coupling capacitor outputs are also grounded, storing any first-stage offset voltages on the capacitors. When the comparator exits the reset phase, the effect of clock feedthrough from $S_{5}$ and $S_{6}$ on input resolution is reduced by the first stage's gain. In the [Razavi, 1992] implementation, the first stage is a BiCMOS preamplifier, consisting of MOS source followers followed by a bipolar differential amplifier and emitter-follower output buffers, as shown in Fig. 10.25. Note that the circuit operates between ground and a negative voltage supply, and the switches are realized using p-channel transistors. The track-and-latch stage features both a bipolar latch and a CMOS latch, as shown in Fig. 10.23. During the reset phase, $\\phi_{1}$ is low and $\\phi_{2}$ is high, connecting $X_{1}$ and $Y_{1}$ to ground through switches $M_{1}$ and $M_{2}$, discharging $C_{3}$ to the minus supply through $M_{11}$, and discharging $X_{2}$ and $Y_{2}$ to the minus supply through $M_{9}$ and $M_{10}$. At this time, $M_{3}$ and $M_{4}$ are off. Next, $\\phi_{1}$ goes high, leaving $X_{1}$ and $Y_{1}$ floating and connecting the preamplifier outputs to its input signal. After a short delay for the preamplifier's transient response, $\\phi_{2}$ goes low, turning on $M_{12}$ and activating the positive feedback of $Q_{5}$ and $Q_{6}$. This develops a differential voltage of about 200 mV between $X_{1}$ and $Y_{1}$, as $C_{3}$ is about one-fifth the size of $C_{1}$ and $C_{2}$. The bipolar latch's offset is very small, typically around one millivolt or less. Note that, when activated, the only power dissipated is that required to charge $C_{3}$, with no dc power dissipation. Shortly after the bipolar latch activates, the inverter connected to $C_{3}$ changes state, lowering its output voltage and turning on $M_{3}$ and $M_{4}$, thereby activating the CMOS part of the latch consisting of cross-coupled $M_{5}$ and $M_{6}$ and cross-coupled $M_{7}$ and $M_{8}$. The inclusion of cross-coupled $M_{5}$ and $M_{6}$ prevents $X_{1}$ and $Y_{1}$ from being discharged too far from ground toward the minus power supply and amplifies the 200-mV difference signal to nearly a full-level CMOS voltage change, making the latch accurate, fast, and low power. [Razavi, 1992] also describes an intriguing CMOS-only comparator, which is not detailed here but may be of interest to readers."
},
{
    "text": "This section outlines various high-speed comparator designs. The literature on integrated circuit technology presents numerous examples of latched comparators. For instance, the latches depicted in Fig. 10.14 and Fig. 10.19 can be preceded by a resistively loaded differential pair preamplifier to form a latched comparator. Figure 10.20 illustrates another comparator [Song, 1990], featuring continuously enabled positive feedback in the second stage. In track mode, with the two diode-connected transistors of the gain stage active, the loop gain is less than one, ensuring circuit stability. The combination of these transistors and the positive-feedback loop acts as a substantial impedance, providing gain from the preamplifier to the track-and-latch stage. The diode-connected loads in the preamplifier stage offer limited gain to maximize speed while buffering input kickback.\n\nimage_name:Fig. 10.20\ndescription:A two-stage comparator with a preamplifier and a positive-feedback track-and-latch stage. It employs diode-connected loads to maintain low node impedances, enhancing speed. Precharging is utilized to eliminate memory from previous decisions, thereby reducing hysteresis.\n\nFig. 10.20 A two-stage comparator featuring a preamplifier and a positive-feedback track-and-latch stage.\n\nAnother comparator is depicted in Fig. 10.21 [Norsworthy, 1989]. This design also utilizes diode-connected loads to keep node impedances low, akin to current-mode design techniques, ensuring fast operation by minimizing node time constants. Precharging is employed to erase any memory from previous decisions that could cause hysteresis. For example, the positive-feedback stage is precharged low, while the digital-restoration stage is precharged high, similar to Domino CMOS logic [Krambeck, 1982].\n\nYet another comparator is shown in Fig. 10.22, accompanied by appropriate clock waveforms. ${ }^{6}$ This design消除s input-offset voltages from both stages via capacitive coupling and includes common-mode feedback circuitry for the first preamplifier stage, accommodating large common-mode input signals. Unlike fully differential opamps, in fully differential comparators, the linearity of the common-mode feedback circuitry is less critical because large signals render the circuitry nonlinear, but the input signal's sign remains unambiguous. This permits the use of a simple differential pair for CMFB circuitry. The measured (but unpublished) performance of this circuit achieved a $0.1-\\mathrm{mV}$ resolution at a $2-\\mathrm{MHz}$ clock frequency, despite using outdated $5-\\mu \\mathrm{m}$ technology. The performance was constrained by the test setup, not the circuitry.\n\nA BiCMOS comparator with excellent performance is described in [Razavi, 1992]. It is based on the principle that resetting the first stage is unnecessary; input-offset errors can be eliminated by resetting the right side of the coupling capacitors between the stages, assuming the first stage's gain is not excessive [Poujois, 1978] [Vittoz, 1985]. A simplified schematic of this comparator is shown in Fig. 10.24. During the reset phase, the preamplifier inputs are connected to ground (or a reference voltage), and the coupling capacitor outputs are grounded, storing any first-stage offset voltages. Exiting the reset phase divides the clock feedthrough effect of $S_{5}$ and $S_{6}$ on input resolution by the first stage's gain. In [Razavi, 1992], the first stage is a BiCMOS preamplifier with MOS source followers, a bipolar differential amplifier, and emitter-follower output buffers, as shown in Fig. 10.25. The circuit operates between ground and a negative voltage supply, with p-channel transistors used for switches. The track-and-latch stage combines a bipolar latch and a CMOS latch, as shown in Fig. 10.23. During reset, $\\phi_{1}$ is low, $\\phi_{2}$ is high, $X_{1}$ and $Y_{1}$ are grounded via $M_{1}$ and $M_{2}$, $C_{3}$ discharges to the minus supply through $M_{11}$, and $X_{2}$ and $Y_{2}$ discharge through $M_{9}$ and $M_{10}$. $M_{3}$ and $M_{4}$ are off. When $\\phi_{1}$ goes high, $X_{1}$ and $Y_{1}$ float, and the preamplifier outputs connect to the input signal. After a brief delay for the preamplifier's transient response, $\\phi_{2}$ goes low, activating $M_{12}$ and the positive feedback of $Q_{5}$ and $Q_{6}$, developing a differential voltage of about 200 mV between $X_{1}$ and $Y_{1}$ due to $C_{3}$ being one-fifth the size of $C_{1}$ and $C_{2}$. The bipolar latch's offset is minimal, typically a millivolt or less. When active, only the power to charge $\\mathrm{C}_{3}$ is dissipated, with no dc power consumption. Shortly after, the inverter connected to $C_{3}$ changes state, turning on $M_{3}$ and $M_{4}$, activating the CMOS latch of cross-coupled $M_{5}$ and $M_{6}$ and $M_{7}$ and $M_{8}$. This prevents $X_{1}$ and $Y_{1}$ from discharging too far and amplifies the 200-mV difference to a near-full CMOS voltage change, ensuring accuracy, speed, and low power. [Razavi, 1992] also describes an intriguing CMOS-only comparator, not detailed here, for interested readers to explore.\n\nimage_name:Fig. 10.21 A two-stage comparator.\ndescription:A two-stage comparator with preamp and latch stages, employing positive feedback and digital signal-level restoration. The preamp stage amplifies the input signal, while the latch stage provides decision-making capability. The design minimizes input-offset errors by resetting the right side of the coupling capacitors.\n\nFig. 10.21 A two-stage comparator.\n\nimage_name:Fig. 10.22\ndescription:A two-stage comparator with capacitive coupling to eliminate input-offset-voltage and clock-feedthrough errors, incorporating positive feedback for rapid operation. It consists of several key components and stages:\n\n1. **First Switched-Capacitor Gain Stage:**\n- The input voltage \\( V_{in} \\) is fed into this stage through capacitors \\( C_{1A} \\) and \\( C_{1B} \\).\n- Switches controlled by clock signals \\( \\phi_1 \\) and \\( \\phi_2 \\) manage charge transfer and amplification.\n- Common-mode feedback stabilizes the output.\n\n2. **Second Gain Stage:**\n- Coupled with capacitor \\( C_{2A} \\), this stage uses switches controlled by clock signals \\( \\phi_1'' \\) and \\( \\phi_1' \\).\n- Gain is further amplified and stabilized through common-mode feedback.\n\n3. **Positive Feedback Stage:**\n- Enhances speed via regenerative feedback, rapidly driving the output to a stable state.\n\n4. **Clock Signals:**\n- Timing diagrams for clock signals \\( \\phi_1 \\), \\( \\phi_1' \\), \\( \\phi_1'' \\), and \\( T_{rk} \\) show their phases and durations, crucial for proper timing of charge transfer and amplification.\n\nOverall, the circuit is designed for fast and accurate signal comparison through efficient charge transfer and amplification via switched-capacitor techniques and positive feedback.\n\nFig. 10.22 A two-stage comparator with capacitive coupling to eliminate input-offset-voltage and clock-feedthrough errors, along with positive feedback for fast operation.\n\nimage_name:Fig. 10.23\ndescription:A two-stage comparator with capacitive coupling to eliminate input-offset-voltage and clock-feedthrough errors, using switched-capacitor techniques and positive feedback for fast operation. Cross-coupled transistors Q5 and Q6 prevent nodes X1 and Y1 from discharging too far.\n\nFig. 10.23 The BiCMOS track-and-latch stage in [Razavi, 1992].\n\nimage_name:Fig. 10.24\ndescription:\n[\nname: S1, type: Switch, ports: {N1: Vin, N2: phi1}\nname: S2, type: Switch, ports: {N1: Vin, N2: phi1}\nname: S3, type: Switch, ports: {N1: phi1, N2: GND}\nname: S4, type: Switch, ports: {N1: phi1, N2: GND}\nname: S5, type: Switch, ports: {N1: phi1, N2: GND}\nname: S6, type: Switch, ports: {N1: phi1, N2: GND}\nname: OpAmp, type: OpAmp, ports: {InP: phi1, InN: phi1, OutP: phi1, OutN: phi1}\nname: Positive-feedback latch, type: Other, ports: {N1: phi1, N2: Vout}\n]\nextrainfo:A two-stage comparator with capacitive coupling to eliminate input-offset-voltage and clock-feedthrough errors, using switched-capacitor techniques and positive feedback for fast operation. Cross-coupled transistors prevent nodes from discharging too far. The latch amplifies the 200-mV difference signal to a full-level CMOS voltage change, ensuring accuracy, speed, and low power.\n\nFig. 10.24 A simplified schematic of the comparator described in [Razavi, 1992]."
},
{
    "text": "This section outlines various high-speed comparator designs. The literature on integrated circuit technology offers numerous examples of latched comparators. For instance, the latches depicted in Fig. 10.14 and Fig. 10.19 can be preceded by a resistively loaded differential pair preamplifier to form a latched comparator. Figure 10.20 presents another comparator [Song, 1990], where the second stage's positive feedback is always active. In track mode, when the gain stage's two diode-connected transistors are enabled, the loop's gain is less than one, ensuring circuit stability. The combination of these transistors and the positive-feedback loop acts as a moderately high impedance, providing gain from the preamplifier to the track-and-latch stage. The preamplifier's diode-connected loads offer limited gain to maximize speed while buffering input kickback.\n\nimage_name:Fig. 10.20\ndescription:A two-stage comparator featuring a preamplifier and a positive-feedback track-and-latch stage. It employs diode-connected loads to maintain low node impedances, enhancing speed. Precharging is utilized to eliminate memory from prior decisions, thereby reducing hysteresis.\n\nFig. 10.20 A two-stage comparator comprising a preamplifier and a positive-feedback track-and-latch stage.\n\nAnother comparator is illustrated in Fig. 10.21 [Norsworthy, 1989]. This design also utilizes diode-connected loads to keep node impedances low (akin to current-mode design techniques), ensuring small node time constants and rapid operation. It employs precharging to erase any memory from previous decisions that could cause hysteresis. For example, the positive-feedback stage is precharged low, while the digital-restoration stage is precharged high, similar to Domino CMOS logic [Krambeck, 1982].\n\nYet another comparator is shown in Fig. 10.22, accompanied by appropriate clock waveforms. ${ }^{6}$ This design eradicates input-offset voltages from both stages via capacitive coupling and includes common-mode feedback circuitry for the first preamplifier stage, accommodating large common-mode input signals. Unlike fully differential opamps, in fully differential comparators, the common-mode feedback circuitry's linearity is less critical because large signals (where the feedback becomes nonlinear) still allow clear input signal sign resolution. This permits a simple differential pair for CMFB circuitry. Unpublished measurements of this circuit achieved a $0.1-\\mathrm{mV}$ resolution at a $2-\\mathrm{MHz}$ clock frequency, despite using outdated $5-\\mu \\mathrm{m}$ technology. The performance was constrained by the test setup, not the circuitry.\n\nA BiCMOS comparator with excellent performance is detailed in [Razavi, 1992]. It is based on the premise that resetting the first stage is unnecessary; input-offset errors can be eliminated by resetting the right side of the coupling capacitors between the stages, assuming the first stage's gain is not excessive [Poujois, 1978] [Vittoz, 1985]. A simplified schematic of this comparator is shown in Fig. 10.24. During reset, the preamplifier inputs are connected to ground (or a reference voltage), and the coupling capacitor outputs are grounded, storing first-stage offset voltages. Exiting the reset phase divides the clock feedthrough effect of $S_{5}$ and $S_{6}$ on input resolution by the first stage's gain. In [Razavi, 1992], the first stage is a BiCMOS preamplifier with MOS source followers, a bipolar differential amplifier, and emitter-follower output buffers, as shown in Fig. 10.25. The circuit operates between ground and a negative voltage supply, with p-channel transistors used for switches. The track-and-latch stage includes both bipolar and CMOS latches, as shown in Fig. 10.23. During reset, $\\phi_{1}$ is low, $\\phi_{2}$ is high, $X_{1}$ and $Y_{1}$ are grounded via $M_{1}$ and $M_{2}$, $C_{3}$ discharges to the minus supply through $M_{11}$, and $X_{2}$ and $Y_{2}$ discharge through $M_{9}$ and $M_{10}$. $M_{3}$ and $M_{4}$ are off. When $\\phi_{1}$ goes high, $X_{1}$ and $Y_{1}$ float, and the preamplifier connects to the input signal. After a brief delay for the preamplifier's transient response, $\\phi_{2}$ goes low, activating $M_{12}$ and the positive feedback of $Q_{5}$ and $Q_{6}$, creating a 200 mV differential voltage between $X_{1}$ and $Y_{1}$. The bipolar latch's offset is minimal, typically less than one millivolt. Power dissipation occurs only when charging $C_{3}$, with no dc power consumption. Shortly after, the inverter connected to $C_{3}$ changes state, turning on $M_{3}$ and $M_{4}$, activating the CMOS latch consisting of cross-coupled $M_{5}$ and $M_{6}$ and cross-coupled $M_{7}$ and $M_{8}$. This prevents $X_{1}$ and $Y_{1}$ from discharging too far and amplifies the 200 mV signal to a full CMOS level, ensuring accuracy, speed, and low power. [Razavi, 1992] also describes an intriguing CMOS-only comparator, which readers may explore further."
},
{
    "text": "This section outlines various high-speed comparator designs. The literature on integrated circuit technology offers numerous examples of latched comparators. For instance, the latches depicted in Fig. 10.14 and Fig. 10.19 can be preceded by a resistively loaded differential pair preamplifier to form a latched comparator. Figure 10.20 presents another comparator [Song, 1990], where the second stage's positive feedback is always active. In track mode, enabling the two diode-connected transistors in the gain stage reduces the gain around the positive-feedback loop to less than one, ensuring circuit stability. The combination of these transistors and the positive-feedback loop transistors acts as a moderately large impedance, providing gain from the preamplifier to the track-and-latch stage. The diode-connected loads in the preamplifier stage offer limited gain to maximize speed while buffering input circuitry kickback.\n\nimage_name:Fig. 10.20\ndescription:The circuit is a two-stage comparator featuring a preamplifier and a positive-feedback track-and-latch stage. It utilizes diode-connected loads to maintain low node impedances, enhancing speed. Precharging is employed to eliminate memory from previous decisions, reducing hysteresis.\n\nFig. 10.20 A two-stage comparator comprising a preamplifier and a positive-feedback track-and-latch stage.\n\nAnother comparator is illustrated in Fig. 10.21 [Norsworthy, 1989]. This design also employs diode-connected loads to keep node impedances low (similar to current-mode circuit design), ensuring small node time constants and fast operation. It uses precharging to remove any memory from previous decisions that could cause hysteresis. For example, the positive-feedback stage is precharged low, while the digital-restoration stage is precharged high, akin to Domino CMOS logic [Krambeck, 1982].\n\nYet another comparator is shown in Fig. 10.22, accompanied by appropriate clock waveforms. ${ }^{6}$ This design eradicates input-offset voltages from both stages using capacitive coupling. It also incorporates common-mode feedback circuitry for the first preamplifier stage, accommodating input signals with large common-mode components. Unlike fully differential opamps, in fully differential comparators, the linearity of the common-mode feedback circuitry is less critical because, with large signals (where the feedback becomes nonlinear), there is no ambiguity in resolving the input signal's sign. This permits the use of a simple differential pair for CMFB circuitry. The measured (but unpublished) performance of this circuit achieved a $0.1-\\mathrm{mV}$ resolution at a $2-\\mathrm{MHz}$ clock frequency, despite using outdated $5-\\mu \\mathrm{m}$ technology. The performance was limited by the test setup, not the circuitry.\n\nA BiCMOS comparator with excellent performance is described in [Razavi, 1992]. It is based on the principle that resetting the first stage is unnecessary; input-offset errors can still be eliminated by resetting the right side of the coupling capacitors between the first and second stages, assuming the first stage's gain is not too high [Poujois, 1978] [Vittoz, 1985]. A simplified schematic of this comparator is shown in Fig. 10.24. During the reset phase, the preamplifier inputs are directly connected to ground (or a reference voltage), and the coupling capacitor outputs are also grounded, storing any first-stage offset voltages. When the comparator exits the reset phase, the clock feedthrough effect of $S_{5}$ and $S_{6}$ on input resolution is reduced by the first stage's gain. In [Razavi, 1992], the first stage is a BiCMOS preamplifier, consisting of MOS source followers followed by a bipolar differential amplifier and emitter-follower output buffers, as shown in Fig. 10.25. Note that the circuit operates between ground and a negative voltage supply, with p-channel transistors used for switches. The track-and-latch stage includes both bipolar and CMOS latches, as shown in Fig. 10.23. During the reset phase, $\\phi_{1}$ is low and $\\phi_{2}$ is high, connecting $X_{1}$ and $Y_{1}$ to ground via $M_{1}$ and $M_{2}$, discharging $C_{3}$ to the minus supply through $M_{11}$, and discharging $X_{2}$ and $Y_{2}$ to the minus supply via $M_{9}$ and $M_{10}$. At this time, $M_{3}$ and $M_{4}$ are off. Next, $\\phi_{1}$ goes high, leaving $X_{1}$ and $Y_{1}$ floating and connecting the preamplifier outputs to the input signal. After a brief delay for the preamplifier's transient response, $\\phi_{2}$ goes low, turning on $M_{12}$ and activating the positive feedback of $Q_{5}$ and $Q_{6}$, developing a differential voltage of about 200 mV between $X_{1}$ and $Y_{1}$, given $C_{3}$ is about one-fifth the size of $C_{1}$ and $C_{2}$. The bipolar latch's offset is minimal, typically around one millivolt or less. Note that, when active, the only power dissipated is that required to charge $\\mathrm{C}_{3}$, with no dc power dissipation. Shortly after the bipolar latch activates, the inverter connected to $C_{3}$ changes state, lowering its output voltage and turning on $M_{3}$ and $M_{4}$, activating the CMOS latch consisting of cross-coupled $M_{5}$ and $M_{6}$ and cross-coupled $M_{7}$ and $M_{8}$. The inclusion of cross-coupled $M_{5}$ and $M_{6}$ prevents $X_{1}$ and $Y_{1}$ from discharging too far from ground toward the minus power supply and amplifies the 200-mV difference signal to nearly a full-level CMOS voltage change, making the latch accurate, fast, and low power. [Razavi, 1992] also describes an intriguing CMOS-only comparator, which is not detailed here but is recommended for interested readers."
},
{
    "text": "This section outlines various high-speed comparator designs. The literature on integrated circuit technology offers numerous examples of latched comparators. For instance, the latches depicted in Fig. 10.14 and Fig. 10.19 can be preceded by a resistively loaded differential pair preamplifier to form a latched comparator. Figure 10.20 presents another comparator [Song, 1990], where the second stage's positive feedback is always active. In track mode, when the gain stage's two diode-connected transistors are enabled, the loop gain is less than one, ensuring circuit stability. The combination of these transistors and the positive-feedback loop acts as a moderately high impedance, providing gain from the preamplifier to the track-and-latch stage. The preamplifier's diode-connected loads offer limited gain to maximize speed while buffering input kickback.\n\nimage_name:Fig. 10.20\ndescription:The circuit is a two-stage comparator featuring a preamplifier and a positive-feedback track-and-latch stage. It employs diode-connected loads to maintain low node impedances, enhancing speed. Precharging is utilized to eliminate memory from prior decisions, thereby reducing hysteresis.\n\nFig. 10.20 A two-stage comparator comprising a preamplifier and a positive-feedback track-and-latch stage.\n\nAnother comparator is illustrated in Fig. 10.21 [Norsworthy, 1989]. This design also utilizes diode-connected loads to keep node impedances low (similar to current-mode design techniques), ensuring small node time constants and rapid operation. It employs precharging to remove any memory from previous decisions that could cause hysteresis. For example, the positive-feedback stage is precharged low, while the digital-restoration stage is precharged high, akin to Domino CMOS logic [Krambeck, 1982].\n\nYet another comparator is shown in Fig. 10.22, accompanied by appropriate clock waveforms. ${ }^{6}$ This design eradicates input-offset voltages from both stages using capacitive coupling. It also includes common-mode feedback circuitry for the first preamplifier stage, accommodating large common-mode input signals. Unlike fully differential opamps, in fully differential comparators, the common-mode feedback circuitry's linearity is less critical because, with large signals (where the feedback becomes nonlinear), there is no ambiguity in determining the input signal's sign. This permits the use of a simple differential pair for CMFB circuitry. The measured (but unpublished) performance of this circuit achieved a $0.1-\\mathrm{mV}$ resolution at a $2-\\mathrm{MHz}$ clock frequency, despite using outdated $5-\\mu \\mathrm{m}$ technology. The performance was limited by the test setup, not the circuitry.\n\nA BiCMOS comparator with excellent performance is detailed in [Razavi, 1992]. It is based on the concept that resetting the first stage is unnecessary; input-offset errors can still be eliminated by resetting the right side of the coupling capacitors between the first and second stages, provided the first stage's gain is not too high [Poujois, 1978] [Vittoz, 1985]. A simplified schematic of this comparator is shown in Fig. 10.24. During the reset phase, the preamplifier inputs are directly connected to ground (or a reference voltage), and the coupling capacitor outputs are also grounded, storing any first-stage offset voltages. When the comparator exits the reset phase, the clock feedthrough effect of $S_{5}$ and $S_{6}$ on input resolution is reduced by the first stage's gain. In the [Razavi, 1992] implementation, the first stage is a BiCMOS preamplifier, consisting of MOS source followers followed by a bipolar differential amplifier and emitter-follower output buffers, as shown in Fig. 10.25. Note that the circuit operates between ground and a negative voltage supply, and the switches are realized using p-channel transistors. The track-and-latch stage includes both a bipolar latch and a CMOS latch, as shown in Fig. 10.23. During the reset phase, $\\phi_{1}$ is low and $\\phi_{2}$ is high, connecting $X_{1}$ and $Y_{1}$ to ground via switches $M_{1}$ and $M_{2}$, discharging $C_{3}$ to the minus supply through $M_{11}$, and discharging $X_{2}$ and $Y_{2}$ to the minus supply through $M_{9}$ and $M_{10}$. At this time, $M_{3}$ and $M_{4}$ are off. Next, $\\phi_{1}$ goes high, leaving $X_{1}$ and $Y_{1}$ floating and connecting the preamplifier outputs to its input signal. After a brief delay for the preamplifier's transient response, $\\phi_{2}$ goes low, turning on $M_{12}$ and activating the positive feedback of $Q_{5}$ and $Q_{6}$, developing a differential voltage of about 200 mV between $X_{1}$ and $Y_{1}$, given $C_{3}$ is about one-fifth the size of $C_{1}$ and $C_{2}$. The bipolar latch's offset is minimal, typically around one millivolt or less. Note that, when active, the only power dissipated is that required to charge $\\mathrm{C}_{3}$—there is no dc power dissipation. Shortly after the bipolar latch activates, the inverter connected to $C_{3}$ changes state, lowering its output voltage, which turns on $M_{3}$ and $M_{4}$, activating the CMOS latch consisting of cross-coupled $M_{5}$ and $M_{6}$ and cross-coupled $M_{7}$ and $M_{8}$. The inclusion of cross-coupled $M_{5}$ and $M_{6}$ prevents $X_{1}$ and $Y_{1}$ from discharging too far from ground toward the minus power supply and amplifies the 200-mV difference signal to nearly a full-level CMOS voltage change, making the latch accurate, fast, and low power. [Razavi, 1992] also describes an intriguing CMOS-only comparator, which is not detailed here but is recommended for interested readers."
},
{
    "text": "This section outlines various high-speed comparator designs. The literature on integrated circuit technology features numerous examples of latched comparators. For instance, the latches depicted in Fig. 10.14 and Fig. 10.19 can be preceded by a resistively loaded differential pair preamplifier to form a latched comparator. Figure 10.20 presents another comparator [Song, 1990], where the second stage's positive feedback is continuously enabled. In track mode, with the two diode-connected transistors in the gain stage active, the loop gain is less than one, ensuring circuit stability. The combination of these transistors and the positive-feedback loop functions as a moderately high impedance, providing gain from the preamplifier to the track-and-latch stage. The diode-connected loads in the preamplifier stage offer limited gain to maximize speed while buffering input circuitry kickback.\n\nimage_name:Fig. 10.20\ndescription:A two-stage comparator featuring a preamplifier and a positive-feedback track-and-latch stage. It utilizes diode-connected loads to maintain low node impedances, enhancing speed. Precharging is employed to eliminate memory from prior decisions, thereby reducing hysteresis.\n\nFig. 10.20 A two-stage comparator comprising a preamplifier and a positive-feedback track-and-latch stage.\n\nAnother comparator is illustrated in Fig. 10.21 [Norsworthy, 1989]. This design also employs diode-connected loads to keep node impedances low (similar to current-mode design techniques), ensuring small node time constants and rapid operation. It uses precharging to remove any memory from previous decisions that could cause hysteresis. For instance, the positive-feedback stage is precharged low, while the digital-restoration stage is precharged high, akin to Domino CMOS logic [Krambeck, 1982].\n\nYet another comparator is shown in Fig. 10.22, accompanied by appropriate clock waveforms. ${ }^{6}$ This design eradicates input-offset voltages from both stages via capacitive coupling and includes common-mode feedback circuitry for the first preamplifier stage, accommodating large common-mode signals. Unlike fully differential opamps, in fully differential comparators, the common-mode feedback circuitry's linearity is less critical because, with large signals (and nonlinear common-mode feedback), there's no ambiguity in resolving the input signal's sign. This permits a simple differential pair for CMFB circuitry. The measured (but unpublished) performance of this circuit achieved a $0.1-\\mathrm{mV}$ resolution at a $2-\\mathrm{MHz}$ clock frequency, despite using outdated $5-\\mu \\mathrm{m}$ technology. The performance was constrained by the test setup, not the circuitry.\n\nA BiCMOS comparator with exceptional performance is detailed in [Razavi, 1992]. It is based on the premise that resetting the first stage is unnecessary; input-offset errors can still be eliminated by resetting the right side of the coupling capacitors between the stages, provided the first stage's gain is not excessive [Poujois, 1978] [Vittoz, 1985]. A simplified schematic of this comparator is shown in Fig. 10.24. During reset, the preamplifier inputs are connected to ground (or a reference voltage), and the coupling capacitor outputs are grounded, storing any first-stage offset voltages. When the comparator exits the reset phase, the clock feedthrough effect of $S_{5}$ and $S_{6}$ on input resolution is reduced by the first stage's gain. In [Razavi, 1992], the first stage is a BiCMOS preamplifier with MOS source followers, a bipolar differential amplifier, and emitter-follower output buffers, as shown in Fig. 10.25. Note that the circuit operates between ground and a negative supply voltage, with p-channel transistors used for switches. The track-and-latch stage includes both bipolar and CMOS latches, as shown in Fig. 10.23. During reset, $\\phi_{1}$ is low, $\\phi_{2}$ is high, $X_{1}$ and $Y_{1}$ are grounded via $M_{1}$ and $M_{2}$, $C_{3}$ is discharged to the minus supply through $M_{11}$, and $X_{2}$ and $Y_{2}$ are discharged through $M_{9}$ and $M_{10}$. $M_{3}$ and $M_{4}$ are off. When $\\phi_{1}$ goes high, $X_{1}$ and $Y_{1}$ float, and the preamplifier outputs connect to the input signal. After a brief delay for the preamplifier's transient response, $\\phi_{2}$ goes low, activating $M_{12}$ and the positive feedback of $Q_{5}$ and $Q_{6}$, creating a differential voltage of about 200 mV between $X_{1}$ and $Y_{1}$. The bipolar latch's offset is minimal, typically less than one millivolt. When active, only the power to charge $\\mathrm{C}_{3}$ is dissipated, with no dc power consumption. Shortly after, the inverter connected to $C_{3}$ changes state, turning on $M_{3}$ and $M_{4}$, activating the CMOS latch with cross-coupled $M_{5}$ and $M_{6}$ and cross-coupled $M_{7}$ and $M_{8}$. This prevents $X_{1}$ and $Y_{1}$ from discharging too far and amplifies the 200-mV difference to nearly a full CMOS voltage change, making the latch accurate, fast, and low power. [Razavi, 1992] also describes an intriguing CMOS-only comparator, which is not detailed here but is recommended for interested readers."
},
{
    "text": "In the development of highly precise CMOS comparators, a critical error mechanism to consider is charge trapping within the gate oxide of the input MOS comparator transistors [Tewksbury, 1989]. When n-channel transistors are subjected to substantial positive gate voltages, electrons can become trapped through a tunneling process, wherein electrons move to oxide traps near the conduction band. The release time constant for these trapped electrons is approximately milliseconds, significantly longer than their trapping period. During their trapped state, the effective transistor threshold voltage rises, resulting in comparator hysteresis ranging from 0.1 to 1 mV. This phenomenon is closely related to transistor $1 / \\mathrm{f}$ noise and is notably less pronounced in p-channel transistors. For applications requiring highly accurate comparators, charge trapping must be addressed and minimized. A potential solution within BiCMOS technology, as detailed in [Miller, 1990] and depicted in Fig. 10.26, involves using diodes in the input stage. This setup incorporates two additional small-current sources, ensuring that the p-channel input transistors remain active. Furthermore, employing p-channel input transistors significantly reduces charge trapping due to their inherently lower hysteresis compared to n-channel transistors.\n\nAnother method is to flush the input transistors after each use by connecting the junctions and wells of n-channel transistors to a positive power supply while grounding the gates to a negative power supply, effectively removing trapped electrons [Swanson, 1993]. Additionally, or as a complementary approach, the comparator can utilize two input stages: a rough stage for handling large signals that may overload, and a fine stage for precise comparisons when no large signals are present [Swanson, 1993; Tan, 1990]."
},
{
    "text": "When designing highly precise CMOS comparators, an important error mechanism to consider is charge trapping in the gate oxide of the input MOS transistors [Tewksbury, 1989]. When n-channel transistors are subjected to large positive gate voltages, electrons can become trapped through a tunneling process, wherein electrons move to oxide traps near the conduction band. The release time constant for these trapped electrons is approximately milliseconds, significantly longer than their trapping time. During their trapped state, the effective threshold voltage of the transistor increases, resulting in comparator hysteresis ranging from 0.1 to 1 mV. This phenomenon correlates with transistor $1 / \\mathrm{f}$ noise and is less pronounced in p-channel transistors. For highly accurate comparators, charge trapping must be addressed and minimized. One method to reduce this effect, assuming the availability of BiCMOS technology, is outlined in [Miller, 1990] and depicted in Fig. 10.26. BiCMOS technology permits the use of diodes in the input stage, enabling the addition of two small-current sources; this ensures that the p-channel input transistors remain active. Additionally, employing p-channel input transistors significantly reduces charge trapping due to their lower hysteresis compared to n-channel transistors.\n\nAnother approach involves flushing the input transistors after each use by connecting the junctions and wells of n-channel transistors to a positive power supply while the gates are connected to a negative power supply, effectively removing trapped electrons [Swanson, 1993]. Alternatively, or in conjunction, two input stages can be utilized for the comparator: a rough stage for periods when large signals and overloads are expected, and a fine stage for times requiring precise comparisons, ensuring no large signals are present [Swanson, 1993; Tan, 1990]."
},
{
    "text": "When designing highly accurate CMOS comparators, a critical error mechanism to consider is charge trapping in the gate oxide of the input MOS transistors [Tewksbury, 1989]. When n-channel transistors are subjected to high positive gate voltages, electrons can become trapped through a tunneling process, wherein electrons move to oxide traps near the conduction band. The release time constant for these trapped electrons is around milliseconds, significantly longer than their trapping time. During their trapped state, the effective threshold voltage of the transistor increases, resulting in comparator hysteresis ranging from 0.1 to 1 mV. This phenomenon is closely related to transistor $1 / \\mathrm{f}$ noise and is less pronounced in p-channel transistors. For highly precise comparators, charge trapping must be addressed and minimized. One method to reduce this effect, particularly in BiCMOS technology, is outlined in [Miller, 1990] and depicted in Fig. 10.26. BiCMOS technology enables the use of diodes in the input stage, incorporating two small-current sources to ensure that p-channel input transistors remain active. Additionally, employing p-channel input transistors significantly reduces charge trapping due to their lower hysteresis compared to n-channel transistors.\n\nAnother strategy involves flushing the input transistors after each use by connecting the junctions and wells of n-channel transistors to a positive power supply while the gates are connected to a negative power supply, effectively removing trapped electrons [Swanson, 1993]. Alternatively, or in conjunction with this, using two input stages for the comparator can be beneficial: a rough stage for handling large signals with potential overloads, and a fine stage for precise comparisons when no large signals are present [Swanson, 1993; Tan, 1990]."
},
{
    "text": "When designing highly precise CMOS comparators, an error mechanism that must be accounted for is charge trapping in the gate oxide of the input MOS transistors [Tewksbury, 1989]. When n-channel transistors are subjected to high positive gate voltages, electrons can become trapped through a tunneling process, wherein\nimage_name:Fig. 10.25 A BiCMOS preamplifier.\ndescription:The circuit diagram depicts a BiCMOS preamplifier featuring two differential inputs (V+in and V-in) and differential outputs (V+out and V-out). It employs NMOS transistors regulated by a clock signal Phi1 to modulate input signals. Diodes and resistors are utilized for biasing and loading. Current sources are included to ensure proper circuit operation and biasing.\n\nFig. 10.25 A BiCMOS preamplifier.\nelectrons tunnel into oxide traps near the conduction band. The time constant for the release of these trapped electrons is approximately milliseconds, significantly longer than their trapping time. While trapped, the effective threshold voltage of the transistor increases, resulting in comparator hysteresis ranging from 0.1 to 1 mV. This phenomenon correlates with transistor $1 / \\mathrm{f}$ noise and is less pronounced in p-channel transistors. For highly accurate comparators, charge trapping must be addressed and minimized. One method to mitigate this effect, assuming the availability of BiCMOS technology, is outlined in [Miller, 1990] and illustrated in Fig. 10.26. BiCMOS technology permits the use of diodes in the input\nimage_name:Fig. 10.26\ndescription:The circuit is a comparator with p-channel inputs designed to minimize hysteresis by employing small bias currents and current mirrors. The use of p-channel transistors reduces charge trapping effects, enhancing comparator accuracy.\n\nFig. 10.26 A comparator with minimal hysteresis. (Hysteresis is induced by charge trapping.)\nstage, allowing the integration of two additional small-current sources in the input stage; this ensures that the p-channel input transistors remain active. Additionally, using p-channel input transistors significantly reduces charge trapping, as they exhibit far less hysteresis than n-channel transistors.\n\nAnother approach is to flush the input transistors after each use by connecting the junctions and wells of n-channel transistors to a positive power supply while the gates are connected to a negative power supply, effectively removing trapped electrons [Swanson, 1993]. Alternatively, or in conjunction, the comparator can utilize two input stages: a rough stage for periods when large signals and overloads are possible, and a fine stage for times requiring precise comparisons and assurance of no large signals [Swanson, 1993; Tan, 1990]."
},
{
    "text": "When designing highly precise CMOS comparators, a critical error mechanism to consider is charge trapping in the gate oxide of the input MOS transistors [Tewksbury, 1989]. When n-channel transistors are subjected to large positive gate voltages, electrons can become trapped through a tunneling process, where electrons move to oxide traps near the conduction band. The release time constant for these trapped electrons is approximately milliseconds, significantly longer than their trapping time. During their trapped state, the effective threshold voltage of the transistor increases, resulting in comparator hysteresis ranging from 0.1 to 1 mV. This phenomenon closely correlates with transistor $1 / \\mathrm{f}$ noise and is less pronounced in p-channel transistors. For highly accurate comparators, charge trapping must be addressed and minimized. One method to reduce this effect, particularly in BiCMOS technology, is outlined in [Miller, 1990] and depicted in Fig. 10.26. BiCMOS technology enables the use of diodes in the input stage, incorporating two small-current sources to ensure that p-channel input transistors remain active. Additionally, employing p-channel input transistors significantly reduces charge trapping due to their lower hysteresis compared to n-channel transistors.\n\nAnother approach involves flushing the input transistors after each use by connecting the junctions and wells of n-channel transistors to a positive power supply while the gates are connected to a negative power supply, effectively removing trapped electrons [Swanson, 1993]. Alternatively, or in conjunction, a dual-stage comparator can be utilized: a rough stage for handling large signals with potential overloads, and a fine stage for precise comparisons when no large signals are present [Swanson, 1993; Tan, 1990]."
},
{
    "text": "When designing highly precise CMOS comparators, a critical error mechanism to consider is charge trapping in the gate oxide of the input MOS transistors [Tewksbury, 1989]. When n-channel transistors are subjected to large positive gate voltages, electrons can become trapped through a tunneling process, wherein electrons migrate to oxide traps near the conduction band. The release time constant for these trapped electrons is in the millisecond range, significantly longer than their trapping time. During their trapped state, the effective threshold voltage of the transistor increases, resulting in comparator hysteresis of approximately 0.1 to 1 mV. This phenomenon is closely related to transistor $1 / \\mathrm{f}$ noise and is less pronounced in p-channel transistors. For applications requiring highly accurate comparators, charge trapping must be addressed and minimized. One method to mitigate this effect, particularly in BiCMOS technology, is outlined in [Miller, 1990] and depicted in Fig. 10.26. BiCMOS technology permits the use of diodes in the input stage, enabling the incorporation of two small-current sources that ensure the p-channel input transistors remain active. Additionally, employing p-channel input transistors significantly reduces charge trapping due to their inherently lower hysteresis compared to n-channel transistors.\n\nAnother strategy involves flushing the input transistors after each use by connecting the junctions and wells of n-channel transistors to a positive power supply while grounding the gates to a negative power supply, effectively removing trapped electrons [Swanson, 1993]. Alternatively, or as a complementary measure, a dual-stage comparator can be employed: a coarse stage for handling large signals that may cause overloads, and a fine stage for precise comparisons when it is certain that no large signals are present [Swanson, 1993; Tan, 1990]."
},
{
    "text": "When designing highly precise CMOS comparators, a critical error mechanism to consider is charge trapping in the gate oxide of the input MOS transistors [Tewksbury, 1989]. When n-channel transistors are subjected to high positive gate voltages, electrons can become trapped through a tunneling process where they move to oxide traps near the conduction band. The time constant for the release of these trapped electrons is approximately milliseconds, significantly longer than the time required for trapping. During the trapping period, the effective threshold voltage of the transistor increases, resulting in comparator hysteresis ranging from 0.1 to 1 mV. This effect is closely related to transistor $1 / \\mathrm{f}$ noise and is less pronounced in p-channel transistors. For applications requiring very accurate comparators, charge trapping must be addressed and minimized. One method to reduce this effect, assuming the availability of BiCMOS technology, is outlined in [Miller, 1990] and depicted in Fig. 10.26. BiCMOS technology enables the use of diodes in the input stage, allowing the incorporation of two small-current sources; this ensures that the p-channel input transistors remain active. Additionally, employing p-channel input transistors significantly reduces charge trapping due to their lower hysteresis compared to n-channel transistors.\n\nAnother approach involves flushing the input transistors after each use by connecting the junctions and wells of n-channel transistors to a positive power supply while the gates are connected to a negative power supply, effectively removing trapped electrons [Swanson, 1993]. Alternatively, or in conjunction with this method, two input stages can be employed for the comparator: a rough stage for handling large signals with potential overloads, and a fine stage for precise comparisons when no large signals are present [Swanson, 1993; Tan, 1990]."
},
{
    "text": "In the development of highly precise CMOS comparators, a critical error mechanism to consider is charge trapping within the gate oxide of the input MOS transistors [Tewksbury, 1989]. When n-channel transistors are subjected to high positive gate voltages, electrons can become trapped through a tunneling process, wherein\nimage_name:Fig. 10.25 A BiCMOS preamplifier.\ndescription:A BiCMOS preamplifier circuit diagram featuring two differential inputs (V+in and V-in) and differential outputs (V+out and V-out). NMOS transistors, regulated by a clock signal Phi1, modulate input signals. Diodes and resistors serve biasing and loading functions, while current sources ensure proper circuit operation and biasing.\n\nFig. 10.25 A BiCMOS preamplifier.\nelectrons tunnel into oxide traps near the conduction band. The release time constant for these trapped electrons is in the millisecond range, significantly longer than their trapping time. While trapped, the effective threshold voltage of the transistor increases, resulting in comparator hysteresis of approximately 0.1 to 1 mV. This phenomenon correlates with transistor $1 / \\mathrm{f}$ noise and is less pronounced in p-channel transistors. For highly accurate comparators, charge trapping must be addressed and minimized. A potential method to reduce this effect, particularly in BiCMOS technology, is outlined in [Miller, 1990] and depicted in Fig. 10.26. BiCMOS technology enables the use of diodes in the input\nimage_name:Fig. 10.26\ndescription:A comparator circuit with p-channel inputs designed to minimize hysteresis by employing small bias currents and current mirrors. The use of p-channel transistors reduces charge trapping, enhancing comparator accuracy.\n\nFig. 10.26 A comparator with minimal hysteresis. (Hysteresis results from charge trapping.)\nstage, incorporating two additional small-current sources to ensure p-channel input transistors never turn off. ${ }^{7}$ Additionally, using p-channel input transistors significantly reduces charge trapping due to their lower hysteresis compared to n-channel transistors.\n\nAnother method involves flushing the input transistors after each use by connecting the junctions and wells of n-channel transistors to a positive power supply while the gates are connected to a negative power supply, effectively removing trapped electrons [Swanson, 1993]. Alternatively, or concurrently, employing two input stages for the comparator can be effective: a rough stage for periods with potential large signal overloads, and a fine stage for precise comparisons when no large signals are present [Swanson, 1993; Tan, 1990]."
},
{
    "text": "High-speed bipolar comparators are commonly latched comparators, as depicted earlier in Fig. 10.14, incorporating preamplifier and track-and-latch stages. A representative example is illustrated in Fig. 10.27 [Wakimoto, 1988]. The preamplifier is a basic differential amplifier with a gain of approximately 5. Besides enhancing resolution, it aids in mitigating kickback from the track-and-latch stage. The track-and-latch stage closely resembles a current-mode digital latch. During the tracking phase, the differential pair comprising transistors $Q_{3}$ and $Q_{4}$ is activated, functioning as a secondary differential amplifier. When the latch mode is activated, $I_{2}$ is rerouted to the differential pair consisting of $Q_{5}$ and $Q_{6}$. The inputs to this third differential pair are derived from the outputs of the second differential pair via emitter-follower buffers, which include $Q_{9}$ and $Q_{10}$. The outputs of the third differential pair are fed back to the high-impedance output nodes in a cross-coupled configuration, thereby generating positive feedback. Upon activation of this positive feedback, it rapidly amplifies the initial small differential voltage to between 0.4 and 0.6 V, contingent on the logic levels in use. The emitter-follower buffers serve two purposes: they isolate the high-impedance nodes at the collectors of the second and third differential pairs from the base-emitter capacitances of the third differential pair, and they also shield these nodes from the output load capacitance.\n\nAnother bipolar comparator architecture is presented in Fig. 10.28 [Van de Plassche, 1988]. In this design, the input signals are directed to a differential pair that remains continuously active, even during the latch phase. During the tracking phase, $Q_{3}$ and $Q_{4}$ are active, functioning as common-base transistors, thus enabling the comparator to operate as a cascode amplifier in this phase. When the comparator transitions to latch mode, the collector current from the input transistors is rerouted from the common-base transistors to $Q_{7}$ and $Q_{8}$, which are part of a positive-feedback loop. Since the bias current of the input transistors is never deactivated, kickback is significantly reduced without the need for additional preamplifier stages, thereby maximizing bandwidth during the tracking phase.\n\nA third bipolar comparator is depicted in Fig. 10.29. Although this comparator has not been experimentally verified, it serves as an illustrative example of various comparator design principles. A minor current source is added to the tracking differential pair to prevent it from completely turning off during the hold mode, thereby enhancing the comparator's speed when transitioning from hold to track mode. Additionally, a cascode common-base stage is incorporated just below the output voltages to isolate the outputs from the positive-feedback loop. This allows for the use of smaller resistors in the positive-feedback loop, which accelerates the loop and eliminates the necessity for emitter-follower buffers. Furthermore, a larger resistor is placed between the emitters of the cascode transistors to prevent them from fully turning off during the latch phase, thereby expediting the transition from latch mode to tracking mode."
},
{
    "text": "High-speed bipolar comparators are generally latched comparators, as depicted earlier in Fig. 10.14, incorporating preamplifier and track-and-latch stages. A representative example is illustrated in Fig. 10.27 [Wakimoto, 1988]. The preamplifier is a basic differential amplifier with a gain of approximately 5. Besides enhancing resolution, it aids in mitigating kickback from the track-and-latch stage. The track-and-latch stage resembles a current-mode digital latch. During the track phase, the differential pair comprising transistors $Q_{3}$ and $Q_{4}$ is activated, functioning as a secondary differential amplifier. When the latch mode is activated, $I_{2}$ is rerouted to the differential pair consisting of $Q_{5}$ and $Q_{6}$. The inputs to this third differential pair are derived from the outputs of the second differential pair via emitter-follower buffers, which include $Q_{9}$ and $Q_{10}$. The outputs of the third differential pair are fed back to the high-impedance output nodes in a cross-coupled configuration, thereby generating positive feedback. Upon enabling this positive feedback, it rapidly amplifies the initial small differential voltage to between 0.4 and 0.6 V, contingent on the logic levels employed. The emitter-follower buffers serve two purposes: they isolate the high-impedance nodes at the collectors of the second and third differential pairs from the base-emitter capacitances of the third differential pair, and they also shield these nodes from the output load capacitance.\n\nAn alternative architecture for a bipolar comparator is presented in Fig. 10.28 [Van de Plassche, 1988]. In this design, the input signals are directed to a differential pair that remains active even during the latch phase. During the track phase, $Q_{3}$ and $Q_{4}$ are active, functioning as common-base transistors, thus enabling the comparator to operate as a cascode amplifier. When the comparator shifts to latch mode, the collector current from the input transistors is rerouted from the common-base transistors to $Q_{7}$ and $Q_{8}$, which are part of a positive-feedback loop. Since the bias current of the input transistors is never deactivated, kickback is significantly reduced without the need for additional preamplifier stages, thereby maximizing bandwidth during the tracking phase.\n\nA third bipolar comparator is shown in Fig. 10.29. Although not experimentally verified, it exemplifies numerous comparator design principles. A minor current source is added to the tracking differential pair to prevent it from completely turning off in hold mode, thereby accelerating the transition to track mode. Additionally, a cascode common-base stage is introduced just below the output voltages to isolate the outputs from the positive-feedback loop. This permits the use of smaller resistors in the positive-feedback loop, enhancing speed and eliminating the need for emitter-follower buffers. Furthermore, a larger resistor is placed between the emitters of the cascode transistors to prevent them from fully turning off during the latch phase, thus speeding up the transition from latch mode to tracking mode."
},
{
    "text": "High-speed bipolar comparators are generally latched comparators, as depicted earlier in Fig. 10.14, incorporating preamplifier and track-and-latch stages. A representative example is illustrated in Fig. 10.27 [Wakimoto, 1988]. The preamplifier is a basic differential amplifier with a gain approximately around 5. Besides enhancing resolution, this preamplifier aids in mitigating kickback from the track-and-latch stage. The track-and-latch stage closely resembles a current-mode digital latch. During the tracking phase, the differential pair comprising transistors $Q_{3}$ and $Q_{4}$ is activated, functioning as a secondary differential amplifier. When the latch mode is activated, $I_{2}$ is rerouted to the differential pair consisting of $Q_{5}$ and $Q_{6}$. The inputs to this third differential pair are derived from the outputs of the second differential pair via emitter-follower buffers made up of $Q_{9}$ and $Q_{10}$. The outputs of the third differential pair are fed back to the high-impedance output nodes in a cross-coupled configuration, thereby generating positive feedback. When this positive feedback is activated, it rapidly amplifies the initial small differential voltage to between 0.4 and 0.6 V, depending on the logic levels in use. The emitter-follower buffers serve two purposes: they isolate the high-impedance nodes at the collectors of the second and third differential pairs from the base-emitter capacitances of the third differential pair, and they also shield these high-impedance nodes from the output load capacitance.\n\nAn alternative architecture for a bipolar comparator is presented in Fig. 10.28 [Van de Plassche, 1988]. In this design, the input signals are directed to a differential pair that remains continuously active, even during the latch phase. During the tracking phase, $Q_{3}$ and $Q_{4}$ are active, functioning as common-base transistors, thus enabling the comparator to operate as a cascode amplifier during this phase. When the comparator shifts to latch mode, the collector current from the input transistors is rerouted from the common-base transistors to $Q_{7}$ and $Q_{8}$, which are part of a positive-feedback loop. Since the bias current of the input transistors is never deactivated, kickback from them is significantly reduced without the need for additional preamplifier stages, thereby maximizing bandwidth during the tracking phase.\n\nA third bipolar comparator is shown in Fig. 10.29. Although this comparator has not been experimentally validated, it serves as an illustrative example of various comparator design principles. A minor current source is introduced to the tracking differential pair to prevent it from completely turning off during the hold mode, thereby enhancing the comparator's speed when transitioning from hold to track mode. Additionally, a cascode common-base stage is incorporated just below the output voltages to isolate the outputs from the positive-feedback loop. This allows for the use of smaller resistors in the positive-feedback loop, accelerating the loop and eliminating the necessity for emitter-follower buffers. Furthermore, a larger resistor is placed between the emitters of the cascode transistors to prevent them from fully turning off during the latch phase, thereby speeding up the transition from latch mode to tracking mode."
},
{
    "text": "High-speed bipolar comparators are usually latched comparators, as depicted earlier in Fig. 10.14, incorporating preamplifier and track-and-latch stages. A representative example is illustrated in Fig. 10.27 [Wakimoto, 1988]. The preamplifier is a basic differential amplifier with a gain of approximately 5. Apart from enhancing resolution, it also aids in mitigating kickback from the track-and-latch stage. The track-and-latch stage closely resembles a current-mode digital latch. During the tracking phase, the differential pair formed by transistors $Q_{3}$ and $Q_{4}$ is activated, functioning as a secondary differential amplifier. When the latch mode is activated, $I_{2}$ is rerouted to the differential pair comprising $Q_{5}$ and $Q_{6}$. The inputs to this third differential pair are derived from the outputs of the second differential pair via emitter-follower buffers consisting of $Q_{9}$ and $Q_{10}$. The outputs of the third differential pair are fed back to the high-impedance output nodes in a cross-coupled configuration, thereby generating positive feedback. When this positive feedback is engaged, it rapidly amplifies the initial small differential voltage to between 0.4 and 0.6 V, depending on the logic levels in use. The emitter-follower buffers serve two purposes: they isolate the high-impedance nodes at the collectors of the second and third differential pairs from the base-emitter capacitances of the third differential pair, and they also shield these nodes from the output load capacitance.\n\nAnother bipolar comparator architecture is presented in Fig. 10.28 [Van de Plassche, 1988]. In this design, the input signals are directed to a differential pair that remains active even during the latch phase. During the tracking phase, $Q_{3}$ and $Q_{4}$ are active, functioning as common-base transistors, thereby enabling the comparator to operate as a cascode amplifier. When the comparator shifts to latch mode, the collector current from the input transistors is rerouted from the common-base transistors to $Q_{7}$ and $Q_{8}$, which are part of a positive-feedback loop. Since the bias current of the input transistors is never deactivated, kickback is significantly reduced without the need for additional preamplifier stages, thereby maximizing bandwidth during the tracking phase.\n\nA third bipolar comparator is depicted in Fig. 10.29. Although this comparator has not been experimentally verified, it serves as an example to demonstrate various comparator design principles. A minor current source is added to the tracking differential pair to prevent it from completely turning off during hold mode, thereby enhancing the comparator's speed when transitioning from hold to track mode. Additionally, a cascode common-base stage is introduced just below the output voltages to isolate the outputs from the positive-feedback loop. This allows for the use of smaller resistors in the positive-feedback loop, which accelerates the loop and eliminates the need for emitter-follower buffers. Furthermore, a larger resistor is placed between the emitters of the cascode transistors to prevent them from fully turning off during the latch phase, thereby speeding up the transition from latch to tracking mode."
},
{
    "text": "High-speed bipolar comparators are generally latched comparators, as depicted earlier in Fig. 10.14, featuring preamplifier and track-and-latch stages. A representative example is illustrated in Fig. 10.27 [Wakimoto, 1988]. The preamplifier is a basic differential amplifier with a gain of approximately 5. Besides enhancing resolution, it aids in mitigating kickback from the track-and-latch stage. The track-and-latch stage closely resembles a current-mode digital latch. During the track phase, the differential pair composed of transistors $Q_{3}$ and $Q_{4}$ is activated, functioning as a secondary differential amplifier. When the latch mode is activated, $I_{2}$ is rerouted to the differential pair comprising $Q_{5}$ and $Q_{6}$. The inputs to this third differential pair are derived from the outputs of the second differential pair via emitter-follower buffers consisting of $Q_{9}$ and $Q_{10}$. The outputs of the third differential pair are fed back to the high-impedance output nodes in a cross-coupled configuration, thereby generating positive feedback. When this positive feedback is engaged, it rapidly amplifies the initial small differential voltage to between 0.4 and 0.6 V, depending on the logic levels in use. The emitter-follower buffers serve two purposes: they isolate the high-impedance nodes at the collectors of the second and third differential pairs from the base-emitter capacitances of the third differential pair, and they also shield these nodes from the output load capacitance.\n\nAn alternative architecture for a bipolar comparator is presented in Fig. 10.28 [Van de Plassche, 1988]. In this design, the input signals are directed to a differential pair that remains continuously active, even during the latch phase. During the track phase, $Q_{3}$ and $Q_{4}$ are active, functioning as common-base transistors, thus enabling the comparator to operate as a cascode amplifier during this phase. When the comparator transitions to latch mode, the collector current from the input transistors is redirected from the common-base transistors to $Q_{7}$ and $Q_{8}$, which are part of a positive-feedback loop. Since the bias current of the input transistors is never deactivated, kickback is significantly reduced without the need for additional preamplifier stages, thereby maximizing bandwidth during the tracking phase.\n\nA third bipolar comparator is shown in Fig. 10.29. Although this comparator has not been experimentally verified, it serves as an example to demonstrate various comparator design principles. A small current source is incorporated into the tracking differential pair to prevent it from completely turning off during hold mode, thereby enhancing the comparator's speed when transitioning from hold to track mode. Additionally, a cascode common-base stage is introduced just below the output voltages to isolate the outputs from the positive-feedback loop. This allows for the use of smaller resistors in the positive-feedback loop, accelerating the loop and eliminating the need for emitter-follower buffers. Furthermore, a larger resistor is added between the emitters of the cascode transistors to prevent them from fully turning off during the latch phase, thereby speeding up the transition from latch mode to tracking mode."
},
{
    "text": "High-speed bipolar comparators are generally latched comparators, as depicted earlier in Fig. 10.14, featuring preamplifier and track-and-latch stages. A representative example is illustrated in Fig. 10.27 [Wakimoto, 1988]. The preamplifier is a basic differential amplifier with a gain of approximately 5. Apart from enhancing resolution, it also aids in mitigating kickback from the track-and-latch stage. The track-and-latch stage closely resembles a current-mode digital latch. During the track phase, the differential pair comprising transistors $Q_{3}$ and $Q_{4}$ is activated, functioning as a secondary differential amplifier. When the latch mode is activated, $I_{2}$ is rerouted to the differential pair consisting of $Q_{5}$ and $Q_{6}$. The inputs to this third differential pair are derived from the outputs of the second differential pair via emitter-follower buffers, which include $Q_{9}$ and $Q_{10}$. The outputs of the third differential pair are fed back to the high-impedance output nodes in a cross-coupled configuration, thereby generating positive feedback. Upon enabling this positive feedback, it rapidly amplifies the initial small differential voltage to between 0.4 and 0.6 V, depending on the logic levels in use. The emitter-follower buffers serve two purposes: they isolate the high-impedance nodes at the collectors of the second and third differential pairs from the base-emitter capacitances of the third differential pair, and they also shield these nodes from the output load capacitance.\n\nAnother bipolar comparator architecture is presented in Fig. 10.28 [Van de Plassche, 1988]. In this design, the input signals are directed to a differential pair that remains continuously active, even during the latch phase. During the track phase, $Q_{3}$ and $Q_{4}$ are active, functioning as common-base transistors, thus enabling the comparator to operate as a cascode amplifier in this phase. When the comparator shifts to latch mode, the collector current from the input transistors is rerouted from the common-base transistors to $Q_{7}$ and $Q_{8}$, which are part of a positive-feedback loop. Since the bias current of the input transistors is never deactivated, kickback is significantly reduced without the need for additional preamplifier stages, thereby maximizing bandwidth during the tracking phase.\n\nA third bipolar comparator is depicted in Fig. 10.29. Although this comparator has not been experimentally verified, it serves as an illustrative example of various comparator design principles. A small current source is incorporated into the tracking differential pair to prevent it from completely turning off during hold mode, thereby enhancing the comparator's speed when transitioning from hold to track mode. Additionally, a cascode common-base stage is introduced just below the output voltages to isolate the outputs from the positive-feedback loop. This allows for the use of smaller resistors in the positive-feedback loop, accelerating the loop and eliminating the need for emitter-follower buffers. Furthermore, a larger resistor is placed between the emitters of the cascode transistors to prevent them from fully turning off during the latch phase, thereby speeding up the transition from latch mode to tracking mode."
},
{
    "text": "High-speed bipolar comparators are usually latched comparators, as depicted earlier in Fig. 10.14, incorporating preamplifier and track-and-latch stages. A representative example is illustrated in Fig. 10.27 [Wakimoto, 1988]. The preamplifier is a straightforward differential amplifier with a gain of approximately 5. Besides enhancing resolution, it aids in mitigating kickback from the track-and-latch stage. The track-and-latch stage closely resembles a current-mode digital latch. During the tracking phase, the differential pair comprising transistors $Q_{3}$ and $Q_{4}$ is activated, functioning as a secondary differential amplifier. When the latch mode is activated, $I_{2}$ is rerouted to the differential pair consisting of $Q_{5}$ and $Q_{6}$. The inputs to this third differential pair are derived from the outputs of the second differential pair via emitter-follower buffers, which include $Q_{9}$ and $Q_{10}$. The outputs of the third differential pair are fed back to the high-impedance output nodes in a cross-coupled configuration, thereby generating positive feedback. When this positive feedback is engaged, it rapidly amplifies the initial small differential voltage to between 0.4 and 0.6 V, depending on the logic levels in use. The emitter-follower buffers serve two purposes: they isolate the high-impedance nodes at the collectors of the second and third differential pairs from the base-emitter capacitances of the third differential pair, and they also shield these nodes from the output load capacitance.\n\nAn alternative architecture for a bipolar comparator is presented in Fig. 10.28 [Van de Plassche, 1988]. In this design, the input signals are directed to a differential pair that remains continuously active, even during the latch phase. During the tracking phase, $Q_{3}$ and $Q_{4}$ are active, functioning as common-base transistors, thus enabling the comparator to operate as a cascode amplifier in this phase. When the comparator shifts to latch mode, the collector current from the input transistors is rerouted from the common-base transistors to $Q_{7}$ and $Q_{8}$, which are part of a positive-feedback loop. Since the bias current of the input transistors is never deactivated, kickback is significantly reduced without the need for additional preamplifier stages, thereby maximizing bandwidth during the tracking phase.\n\nA third bipolar comparator is depicted in Fig. 10.29. Although this comparator has not been experimentally validated, it serves as an illustrative example of various comparator design principles. A minor current source is incorporated into the tracking differential pair to prevent it from completely turning off during hold mode, thereby accelerating the transition to track mode. Additionally, a cascode common-base stage is introduced just below the output voltages to isolate the outputs from the positive-feedback loop. This allows for the use of smaller resistors in the positive-feedback loop, enhancing its speed and eliminating the necessity for emitter-follower buffers. Furthermore, a larger resistor is placed between the emitters of the cascode transistors to prevent them from fully turning off during the latch phase, thus speeding up the transition from latch mode to tracking mode."
},
{
    "text": "High-speed bipolar comparators are generally latched comparators, as depicted earlier in Fig. 10.14, featuring preamplifier and track-and-latch stages. A representative example is illustrated in Fig. 10.27 [Wakimoto, 1988]. The preamplifier is a basic differential amplifier with a gain approximately around 5. Apart from enhancing resolution, this preamplifier aids in mitigating kickback from the track-and-latch stage. The track-and-latch stage closely resembles a current-mode digital latch. During the tracking phase, the differential pair comprising transistors $Q_{3}$ and $Q_{4}$ is activated, functioning as a secondary differential amplifier. When the latch mode is activated, $I_{2}$ is rerouted to the differential pair consisting of $Q_{5}$ and $Q_{6}$. The inputs to this third differential pair are derived from the outputs of the second differential pair via emitter-follower buffers made up of $Q_{9}$ and $Q_{10}$. The outputs of the third differential pair are fed back to the high-impedance output nodes in a cross-coupled configuration, thereby generating positive feedback. Upon enabling this positive feedback, it rapidly amplifies the initial small differential voltage to between 0.4 and 0.6 V, depending on the logic levels in use. The emitter-follower buffers serve two purposes: they isolate the high-impedance nodes at the collectors of the second and third differential pairs from the base-emitter capacitances of the third differential pair, and they also shield these nodes from the output load capacitance.\n\nAn alternative architecture for a bipolar comparator is presented in Fig. 10.28 [Van de Plassche, 1988]. In this comparator, the input signals are directed to a differential pair that remains continuously active, even during the latch phase. During the tracking phase, $Q_{3}$ and $Q_{4}$ are active, operating as common-base transistors, thus making the comparator function as a cascode amplifier in this phase. When the comparator shifts to latch mode, the collector current from the input transistors is rerouted from the common-base transistors to $Q_{7}$ and $Q_{8}$, which are part of a positive-feedback loop. Since the bias current of the input transistors is never deactivated, kickback from them is significantly reduced without the need for additional preamplifier stages, thereby maximizing bandwidth during the tracking phase.\n\nA third bipolar comparator is shown in Fig. 10.29. Although this comparator has not been experimentally verified, it serves as an example to demonstrate various comparator design principles. A minor current source is incorporated into the tracking differential pair to prevent it from completely turning off during the hold mode, thereby enhancing the comparator's speed when transitioning from hold to track mode. Additionally, a cascode common-base stage is introduced just beneath the output voltages to isolate the outputs from the positive-feedback loop. This allows for the use of much smaller resistors in the positive-feedback loop, accelerating the loop and eliminating the need for emitter-follower buffers. Furthermore, a larger resistor is placed between the emitters of the cascode transistors to prevent them from fully turning off during the latch phase, thus speeding up the transition from latch mode to tracking mode."
},
{
    "text": "- The input offset of a comparator is the point at which the output has an equal probability of being high or low. Noise influences how the output statistics change as the input varies. [p. 413]\n- Hysteresis acts as a \"memory\" in a comparator, causing it to倾向于 maintain its previous output state, typically due to charge held on internal circuit capacitances. [p. 414]\n- Conventional opamps are designed for stability in closed-loop setups, leading to a low 3-dB bandwidth and consequently slow settling when used open-loop as a comparator. [p. 417]\n- An input capacitor is occasionally employed to measure the input offset voltage of a comparator during a reset phase, subsequently subtracting it from the input during the comparison phase. [p. 417]\n- When a MOSFET transitions from triode mode to off, the charge stored in the channel region must exit through the transistor terminals; in a comparator, this charge can accumulate on circuit capacitances, causing offset. [p. 420]\n- The harmful effects of charge-injection can be minimized by using \"advanced\" clocks that open-circuit the discharge paths through which signal-dependent charge-injection occurs. [p. 421]\n- Latched comparators commonly use a basic preamplifier to reduce kickback and lessen the demands on the latch stage, followed by a latch that alternates between a reset phase and a positive feedback phase, rapidly producing full-swing digital signals from the preamplifier output. [p. 427]\n- The output of a positive-feedback latch increases exponentially with a time constant defined by the unity-gain frequency, $\\mathrm{G}_{\\mathrm{m}} / \\mathrm{C}_{\\mathrm{L}}$. If the initial input is too weak, metastability may arise, where the growth is insufficient for a distinct logic signal to emerge at the latch output before the reset phase begins. [p. 429]\n- Latches exhibit offset due to discrepancies between the two halves of the circuit providing positive feedback. These discrepancies stem from random mismatch. Designers sometimes intentionally introduce additional controllable imbalances to counteract random offsets and ensure an accurate comparator. [p. 430]"
},
{
    "text": "- The input offset of a comparator is the point at which the output has an equal chance of being high or low. Noise influences how the output statistics change based on the input. [p. 413]\n- Hysteresis acts as \"memory\" in a comparator, often causing it to stay in its previous output state, typically due to charge held on internal circuit capacitances. [p. 414]\n- Standard opamps are designed for stability in closed-loop setups, leading to a low 3-dB bandwidth and consequently slow settling when used open-loop as a comparator. [p. 417]\n- An input capacitor is occasionally employed to measure the input offset voltage of a comparator during a reset phase, subsequently subtracting it from the input during the comparison phase. [p. 417]\n- When a MOSFET transitions from triode mode to off, the charge in the channel region must exit through the transistor terminals; in a comparator, this charge can accumulate on circuit capacitances, causing offset. [p. 420]\n- The harmful effects of charge-injection can be minimized by using \"advanced\" clocks that open-circuit the discharge paths through which signal-dependent charge-injection occurs. [p. 421]\n- Latched comparators commonly use a basic preamplifier to reduce kickback and ease the demands on the latch stage, followed by a latch that alternates between a reset phase and a positive feedback phase, rapidly producing full-swing digital signals from the preamplifier output. [p. 427]\n- The output of a positive-feedback latch increases exponentially with a time constant defined by the unity-gain frequency, $\\mathrm{G}_{\\mathrm{m}} / \\mathrm{C}_{\\mathrm{L}}$. If the initial input is too weak, metastability may arise, where the growth is too sluggish for a discernible logic signal to emerge at the latch output before the reset phase begins. [p. 429]\n- Latches exhibit offset due to discrepancies between the two halves of the circuit providing positive feedback. These discrepancies stem from random mismatch. Sometimes, deliberate controllable imbalances are introduced to counteract random offsets and ensure an accurate comparator. [p. 430]"
},
{
    "text": "- The input offset of a comparator is the point at which the output has an equal probability of being high or low. Noise influences how the output statistics change as a function of the input. [p. 413]\n- Hysteresis in a comparator acts as a form of \"memory,\" causing it to tend to stay in its previous output state, typically due to charge held on internal circuit capacitances. [p. 414]\n- Conventional opamps are designed for stability in closed-loop setups, leading to a low 3-dB bandwidth and, consequently, very slow settling when used open-loop as a comparator. [p. 417]\n- An input capacitor is occasionally employed to measure the input offset voltage of a comparator during a reset phase, subsequently subtracting it from the input during the comparison phase. [p. 417]\n- When a MOSFET transitions from triode mode to off, the charge stored in the channel region must exit through the transistor terminals; in a comparator, this charge can accumulate on circuit capacitances, causing offset. [p. 420]\n- The harmful effects of charge-injection can be minimized by using \"advanced\" clocking techniques that open-circuit the discharge paths through which signal-dependent charge-injection occurs. [p. 421]\n- Latched comparators often utilize a basic preamplifier to reduce kickback and lessen the demands on the latch stage, followed by a latch that alternates between a reset phase and a positive feedback phase, rapidly producing full-swing digital signals from the preamplifier output. [p. 427]\n- The output of a positive-feedback latch increases exponentially with a time constant determined by the unity-gain frequency, $\\mathrm{G}_{\\mathrm{m}} / \\mathrm{C}_{\\mathrm{L}}$. If the initial input is too weak, metastability may occur, where the growth is insufficient for a distinct logic signal to appear at the latch output before the reset phase begins. [p. 429]\n- Latches exhibit offset due to discrepancies between the two halves of the circuit providing positive feedback. These discrepancies stem from random mismatch. Sometimes, deliberate imbalances are introduced by design to counteract random offsets and ensure an accurate comparator. [p. 430]"
},
{
    "text": "- The input offset of a comparator is the point at which the output has an equal probability of being high or low. Noise influences how the output statistics change as a function of the input. [p. 413]\n- Hysteresis in a comparator acts as a form of \"memory,\" often causing it to stay in its previous output state, typically due to charge held on internal circuit capacitances. [p. 414]\n- Standard operational amplifiers are designed for stability in closed-loop setups, leading to a reduced 3-dB bandwidth and consequently very slow settling when used open-loop as a comparator. [p. 417]\n- An input capacitor is occasionally employed to measure the input offset voltage of a comparator during a reset phase, subsequently subtracting it from the input during the comparison phase. [p. 417]\n- When a MOSFET transitions from triode mode to off, the charge stored in the channel region must exit through the transistor terminals; in a comparator, this charge can accumulate on circuit capacitances, causing offset. [p. 420]\n- The harmful effects of charge-injection can be minimized by using \"advanced\" clocking techniques that open-circuit the discharge paths through which signal-dependent charge-injection occurs. [p. 421]\n- Latched comparators commonly use a basic preamplifier to reduce kickback and lessen the demands on the latch stage, followed by a latch that cycles between a reset phase and a positive feedback phase, rapidly producing full-swing digital signals from the preamplifier output. [p. 427]\n- The output of a positive-feedback latch increases exponentially with a time constant defined by the unity-gain frequency, $\\mathrm{G}_{\\mathrm{m}} / \\mathrm{C}_{\\mathrm{L}}$. If the initial input is too weak, metastability may arise, where the growth is insufficient for a distinct logic signal to emerge at the latch output before the reset phase begins. [p. 429]\n- Latches exhibit offset due to discrepancies between the two halves of the circuit providing positive feedback. These discrepancies stem from random mismatches. Sometimes, intentional and controllable imbalances are introduced by design to counteract random offsets and ensure an accurate comparator. [p. 430]"
},
{
    "text": "- The input offset of a comparator is the point at which the output has an equal probability of being high or low. Noise influences how the output statistics change as the input varies. [p. 413]\n- Hysteresis in a comparator acts as a form of \"memory,\" causing it to tend to stay in its previous output state, often due to charge retained on internal capacitances. [p. 414]\n- Standard operational amplifiers are designed for stability in closed-loop setups, leading to a reduced 3-dB bandwidth and, consequently, slow settling when used open-loop as a comparator. [p. 417]\n- An input capacitor is occasionally utilized to measure the input offset voltage of a comparator during a reset phase, subsequently subtracting it from the input during the comparison phase. [p. 417]\n- When a MOSFET transitions from triode mode to off, the charge in the channel region must exit through the transistor terminals; in a comparator, this charge can accumulate on circuit capacitances, causing offset. [p. 420]\n- The harmful impacts of charge-injection can be minimized by employing \"advanced\" clocking techniques that open-circuit the discharge pathways through which signal-dependent charge-injection occurs. [p. 421]\n- Latched comparators commonly use a basic preamplifier to lessen kickback and reduce the demands on the latch stage, followed by a latch that cycles between a reset phase and a positive feedback phase, rapidly producing full-swing digital signals from the preamplifier output. [p. 427]\n- The output of a positive-feedback latch increases exponentially with a time constant defined by the unity-gain frequency, $\\mathrm{G}_{\\mathrm{m}} / \\mathrm{C}_{\\mathrm{L}}$. If the initial input is insufficient, metastability may arise, where the output growth is too sluggish to produce a discernible logic signal before the reset phase begins. [p. 429]\n- Latches exhibit offset due to discrepancies between the two halves of the circuit providing positive feedback. These discrepancies stem from random mismatches. Designers sometimes intentionally introduce additional controllable imbalances to counteract random offsets and enhance comparator accuracy. [p. 430]"
},
{
    "text": "- The input offset of a comparator is the point at which the output has an equal probability of being high or low. Noise influences how the output statistics change with varying input. [p. 413]\n- Hysteresis acts as a \"memory\" in a comparator, causing it to tend to stay in its previous output state, typically due to charge held on internal circuit capacitances. [p. 414]\n- Conventional opamps are designed for stability in closed-loop setups, leading to a low 3-dB bandwidth and consequently slow settling when used open-loop as a comparator. [p. 417]\n- An input capacitor is occasionally employed to measure the input offset voltage of a comparator during a reset phase and then subtract it from the input during the comparison phase. [p. 417]\n- When a MOSFET transitions from triode mode to off, the charge in the channel region must exit through the transistor terminals; in a comparator, this charge can accumulate on circuit capacitances, causing offset. [p. 420]\n- The harmful effects of charge-injection can be minimized by using \"advanced\" clocks that open-circuit the discharge paths through which signal-dependent charge-injection occurs. [p. 421]\n- Latched comparators often use a basic preamplifier to reduce kickback and lessen the demands on the latch stage, followed by a latch that alternates between a reset phase and a positive feedback phase, rapidly producing full-swing digital signals from the preamplifier output. [p. 427]\n- The output of a positive-feedback latch increases exponentially with a time constant defined by the unity-gain frequency, $\\mathrm{G}_{\\mathrm{m}} / \\mathrm{C}_{\\mathrm{L}}$. If the initial input is too small, metastability may arise, where the growth is insufficient for a distinct logic signal to appear at the latch output before the reset phase begins. [p. 429]\n- Latches exhibit offset due to disparities between the two halves of the circuit providing positive feedback. These disparities stem from random mismatch. Designers sometimes intentionally introduce additional controllable imbalances to counteract random offsets and ensure an accurate comparator. [p. 430]"
},
{
    "text": "- The input offset of a comparator is the point at which the output has an equal probability of being high or low. Noise influences how the output statistics change as the input varies. [p. 413]\n- Hysteresis acts as a form of \"memory\" in a comparator, causing it to倾向于 maintain its previous output state, often due to charge retained on internal capacitances. [p. 414]\n- Standard operational amplifiers are designed for stability in closed-loop setups, leading to a low 3-dB bandwidth and consequently slow settling when used open-loop as a comparator. [p. 417]\n- An input capacitor is occasionally utilized to measure the input offset voltage of a comparator during a reset phase, subsequently subtracting it from the input during the comparison phase. [p. 417]\n- When a MOSFET transitions from triode mode to off, the charge stored in the channel must exit through the transistor terminals; in a comparator, this charge can accumulate on circuit capacitances, causing offset. [p. 420]\n- The harmful effects of charge-injection can be minimized by employing \"advanced\" clocking techniques that open-circuit the discharge paths through which signal-dependent charge-injection occurs. [p. 421]\n- Latched comparators commonly use a basic preamplifier to reduce kickback and lessen the demands on the latch stage, followed by a latch that cycles between a reset phase and a positive feedback phase, rapidly producing full-swing digital signals from the preamplifier output. [p. 427]\n- The output of a positive-feedback latch increases exponentially with a time constant defined by the unity-gain frequency, $\\mathrm{G}_{\\mathrm{m}} / \\mathrm{C}_{\\mathrm{L}}$. If the initial input is too weak, metastability may arise, where the growth is insufficient for a distinct logic signal to emerge at the latch output before the reset phase begins. [p. 429]\n- Latches exhibit offset due to discrepancies between the two halves of the circuit providing positive feedback. These discrepancies stem from random mismatches. Designers sometimes intentionally introduce additional controllable imbalances to counteract random offsets and ensure accurate comparator performance. [p. 430]"
},
{
    "text": "- The input offset of a comparator is the point at which the output has an equal chance of being high or low. Noise influences how the output statistics change with the input. [p. 413]\n- Hysteresis acts as \"memory\" in a comparator, often causing it to stay in its previous output state, typically due to charge held in internal circuit capacitances. [p. 414]\n- Standard opamps are designed for stability in closed-loop setups, leading to a low 3-dB bandwidth and consequently slow settling when used open-loop as a comparator. [p. 417]\n- An input capacitor is occasionally employed to measure the input offset voltage of a comparator during a reset phase, subsequently subtracting it from the input during the comparison phase. [p. 417]\n- When a MOSFET transitions from triode mode to off, the charge in the channel region must exit through the transistor terminals; in a comparator, this charge can accumulate on circuit capacitances, causing offset. [p. 420]\n- The harmful effects of charge-injection can be minimized by using \"advanced\" clocks that open-circuit the discharge paths through which signal-dependent charge-injection occurs. [p. 421]\n- Latched comparators commonly use a basic preamplifier to reduce kickback and ease the demands on the latch stage, followed by a latch that cycles between a reset phase and a positive feedback phase to rapidly produce full-swing digital signals from the preamplifier output. [p. 427]\n- The output of a positive-feedback latch increases exponentially with a time constant defined by the unity-gain frequency, $\\mathrm{G}_{\\mathrm{m}} / \\mathrm{C}_{\\mathrm{L}}$. If the initial input is too weak, metastability may arise, where the growth is too slow for a distinct logic signal to emerge at the latch output before the reset phase begins. [p. 429]\n- Latches exhibit offset due to discrepancies between the two halves of the circuit providing positive feedback. These discrepancies stem from random mismatch. Designers sometimes intentionally introduce additional controllable imbalances to counteract random offsets and ensure an accurate comparator. [p. 430]"
}
]