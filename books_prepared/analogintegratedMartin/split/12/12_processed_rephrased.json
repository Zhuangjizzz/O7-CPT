[

{
    "text": "Integrated analog filters can be implemented in either discrete time or continuous time. Discrete-time filters and signal processing are covered in Chapter 13, while their implementation via switched-capacitor circuits is discussed in Chapter 14. In switched-capacitor circuits, although the signals remain continuous in voltage (i.e., they are never quantized), they necessitate sampling in the time domain. Due to this time-domain sampling, the clock rate must always be at least twice the highest frequency being processed to prevent aliasing. Typically, the clock rate is significantly higher than twice the signal bandwidth to ease the requirements of an anti-aliasing filter. Consequently, switched-capacitor filters are constrained in their ability to handle high-frequency signals.\n\nThis chapter concentrates on continuous-time filtering. As their name implies, continuous-time filters maintain signals that are continuous both in time and in analog signal levels. Since no sampling is needed, continuous-time filters offer a substantial speed advantage over switched-capacitor filters. However, they do have certain drawbacks. One such drawback is their requirement for tuning circuitry. Tuning is essential because their filter coefficients are determined by the product of two different elements, such as capacitance and resistance (or transconductance) values. While switched-capacitor filter coefficients, determined by capacitance ratios, achieve accuracies of 0.1 percent, integrated continuous-time coefficients are initially set to only about 30 percent accuracy. Fortunately, tuning circuitry can enhance the filter coefficient accuracy to around 1 percent, albeit at the expense of additional (and sometimes complex) circuitry, as detailed in Section 12.9. Another practical drawback of most continuous-time filters is their relatively inferior linearity and noise performance. Although low-frequency switched-capacitor filters can achieve nonlinear distortion and noise performance exceeding 90 dB, high-frequency continuous-time filters typically exhibit distortion plus noise performance barely surpassing 60 dB (often much worse). Nonetheless, there are numerous high-speed applications where stringent distortion and noise performance is not critical, such as in many data communication and video circuits.\n\nKey Point: Continuous-time integrated analog filters process signals that are continuous in both amplitude and time. Discrete-time analog filters handle signals that are sampled in time and generally operate on lower-frequency signals compared to their continuous-time counterparts."
},
{
    "text": "Integrated analog filters can be implemented in either discrete time or continuous time. Discrete-time filters and signal processing are covered in Chapter 13, while their implementation using switched-capacitor circuits is discussed in Chapter 14. In switched-capacitor circuits, although the signals remain continuous in voltage (i.e., they are never quantized), they necessitate sampling in the time domain. Due to this time-domain sampling, the clock rate must always be at least twice the highest frequency being processed to prevent aliasing. Typically, the clock rate is significantly higher than twice the signal bandwidth to ease the requirements of an anti-aliasing filter. Consequently, switched-capacitor filters are constrained in their ability to handle high-frequency signals.\n\nThis chapter concentrates on continuous-time filtering. As their name implies, continuous-time filters maintain continuous signals in both time and analog signal levels. Since no sampling is needed, continuous-time filters offer a substantial speed advantage over switched-capacitor filters. However, they do have certain drawbacks. One is the necessity for tuning circuitry. Tuning is essential because their filter coefficients are determined by the product of two different elements, such as capacitance and resistance (or transconductance) values. While switched-capacitor filter coefficients, determined by capacitance ratios, achieve accuracies of 0.1 percent, integrated continuous-time coefficients are initially set to only about 30 percent accuracy. Fortunately, tuning circuitry can enhance the filter coefficient accuracy to around 1 percent, albeit at the expense of additional (and sometimes complex) circuitry, as detailed in Section 12.9. Another practical drawback of most continuous-time filters is their relatively inferior linearity and noise performance. Although low-frequency switched-capacitor filters can achieve nonlinear distortion and noise performance better than 90 dB, high-frequency continuous-time filters typically exhibit distortion plus noise performance barely exceeding 60 dB (often much worse). Nonetheless, there are numerous high-speed applications where distortion and noise performance are not critically stringent, such as in many data communication and video circuits.\n\nKey Point: Continuous-time integrated analog filters process signals that are continuous in both amplitude and time. Discrete-time analog filters handle signals sampled in time and generally operate on lower-frequency signals compared to their continuous-time counterparts."
},
{
    "text": "Integrated analog filters can be implemented in either discrete-time or continuous-time formats. Discrete-time filters and their associated signal processing are covered in Chapter 13, while their implementation via switched-capacitor circuits is discussed in Chapter 14. In switched-capacitor circuits, although the signals remain continuous in voltage (i.e., they are not quantized), they necessitate sampling in the time domain. Due to this time-domain sampling, the clock rate must always be at least twice the highest frequency being processed to prevent aliasing. Typically, the clock rate is significantly higher than twice the signal bandwidth to ease the demands on the anti-aliasing filter. Consequently, switched-capacitor filters are constrained in their ability to handle high-frequency signals.\n\nThis chapter concentrates on continuous-time filtering. As their name implies, continuous-time filters maintain continuous signals both in time and in analog signal levels. Since they do not require sampling, continuous-time filters offer a substantial speed advantage over switched-capacitor filters. However, they also have certain drawbacks. One such drawback is their requirement for tuning circuitry. Tuning is necessary because their filter coefficients are derived from the product of two different elements, such as capacitance and resistance (or transconductance) values. While switched-capacitor filter coefficients, determined by capacitance ratios, achieve accuracies of 0.1 percent, integrated continuous-time coefficients are initially set to only about 30 percent accuracy. Fortunately, tuning circuitry can enhance the filter coefficient accuracy to approximately 1 percent, albeit at the expense of additional (and sometimes complex) circuitry, as detailed in Section 12.9. Another practical limitation of most continuous-time filters is their relatively inferior linearity and noise performance. Although low-frequency switched-capacitor filters can achieve nonlinear distortion and noise performance exceeding 90 dB, high-frequency continuous-time filters generally have distortion and noise performance barely surpassing 60 dB (and often much worse). Nonetheless, there are numerous high-speed applications where stringent distortion and noise performance are not critical, such as in many data communication and video circuits.\n\nKey Point: Continuous-time integrated analog filters handle signals that are continuous in both amplitude and time. Discrete-time analog filters process signals that are sampled in time, and thus typically operate on lower-frequency signals compared to their continuous-time counterparts."
},
{
    "text": "Integrated analog filters can be implemented in either discrete-time or continuous-time formats. Chapter 13 delves into discrete-time filters and signal processing, while Chapter 14 covers their implementation via switched-capacitor circuits. In these circuits, although the signals remain continuous in voltage (i.e., they are not quantized), they necessitate sampling in the time domain. Due to this time-domain sampling, the clock rate must be at least twice the highest frequency being processed to prevent aliasing. Typically, the clock rate far exceeds twice the signal bandwidth to ease the demands on the anti-aliasing filter. Consequently, switched-capacitor filters face limitations in processing high-frequency signals.\n\nThis chapter concentrates on continuous-time filtering. As their name implies, continuous-time filters maintain signals that are continuous both in time and in analog signal levels. Since they do not require sampling, they hold a notable speed advantage over switched-capacitor filters. However, continuous-time filters are not without drawbacks. One significant issue is their requirement for tuning circuitry. Tuning is essential because their filter coefficients depend on the product of two different elements, such as capacitance and resistance (or transconductance) values. While switched-capacitor filter coefficients, determined by capacitance ratios, achieve accuracies of 0.1 percent, integrated continuous-time coefficients initially reach only about 30 percent accuracy. Fortunately, tuning circuitry can enhance this accuracy to around 1 percent, albeit at the expense of additional and sometimes complex circuitry, as discussed in Section 12.9. Another practical drawback of most continuous-time filters is their relatively inferior linearity and noise performance. Although low-frequency switched-capacitor filters can achieve nonlinear distortion and noise performance exceeding 90 dB, high-frequency continuous-time filters generally exhibit distortion plus noise performance barely surpassing 60 dB (and often much lower). Nonetheless, there are numerous high-speed applications, such as data communication and video circuits, where stringent distortion and noise performance is not critical. \n\nKey Point: Continuous-time integrated analog filters handle signals that are continuous in both amplitude and time. In contrast, discrete-time analog filters process signals that are sampled in time, typically operating on lower-frequency signals compared to their continuous-time counterparts."
},
{
    "text": "Integrated analog filters can be implemented in either discrete-time or continuous-time formats. Discrete-time filters and their associated signal processing techniques are covered in Chapter 13, while their implementation via switched-capacitor circuits is discussed in Chapter 14. In switched-capacitor circuits, although the voltage signals remain continuous (i.e., they are not quantized), they necessitate sampling in the time domain. Due to this time-domain sampling, the clock rate must be at least twice the highest frequency being processed to prevent aliasing. Typically, the clock rate exceeds twice the signal bandwidth significantly, to ease the demands on the anti-aliasing filter. Consequently, switched-capacitor filters are constrained in their ability to handle high-frequency signals.\n\nThis chapter centers on continuous-time filtering. As their name implies, continuous-time filters maintain signals that are continuous both in time and in analog signal levels. Since they do not require sampling, continuous-time filters offer a notable speed advantage over switched-capacitor filters. However, they also come with certain drawbacks. One such drawback is the necessity for tuning circuitry. Tuning is essential because their filter coefficients are derived from the product of two different elements, such as capacitance and resistance (or transconductance) values. While switched-capacitor filter coefficients, determined by capacitance ratios, achieve accuracies of 0.1 percent, integrated continuous-time coefficients initially only reach about 30 percent accuracy. Fortunately, tuning circuitry can enhance this accuracy to approximately 1 percent, albeit at the expense of additional and sometimes complex circuitry, as detailed in Section 12.9. Another practical issue with most continuous-time filters is their generally inferior linearity and noise performance. Although low-frequency switched-capacitor filters can achieve nonlinear distortion and noise performance exceeding 90 dB, high-frequency continuous-time filters typically only manage around 60 dB (and often worse). Nevertheless, there are numerous high-speed applications, such as data communication and video circuits, where stringent distortion and noise performance is not critical. \n\nKey Point: Continuous-time integrated analog filters handle signals that are continuous in both amplitude and time. Discrete-time analog filters process signals that are sampled in time, and thus generally operate on lower-frequency signals compared to their continuous-time counterparts."
},
{
    "text": "Integrated analog filters can be implemented in either discrete time or continuous time. Discrete-time filters and their associated signal processing are covered in Chapter 13, while their implementation via switched-capacitor circuits is discussed in Chapter 14. In switched-capacitor circuits, although the signals maintain continuous voltage levels (i.e., they are never quantized), they necessitate sampling in the time domain. Due to this time-domain sampling, the clock rate must always be at least twice the highest frequency being processed to prevent aliasing. Typically, the clock rate exceeds twice the signal bandwidth significantly, to ease the requirements of an anti-aliasing filter. Consequently, switched-capacitor filters face limitations in processing high-frequency signals.\n\nThis chapter concentrates on continuous-time filtering. As their name implies, continuous-time filters handle signals that remain continuous both in time and in analog signal levels. Since they do not require sampling, continuous-time filters offer a substantial speed advantage over switched-capacitor filters. However, they also have certain drawbacks. One notable disadvantage is their requirement for tuning circuitry. Tuning is essential because their filter coefficients are derived from the product of two different elements, such as capacitance and resistance (or transconductance) values. While switched-capacitor filter coefficients, determined by capacitance ratios, achieve accuracies of 0.1 percent, integrated continuous-time coefficients are initially set to only about 30 percent accuracy. Fortunately, tuning circuitry can enhance the filter coefficient accuracy to approximately 1 percent, albeit at the expense of additional and sometimes complex circuitry, as detailed in Section 12.9. Another practical drawback of most continuous-time filters is their relatively inferior linearity and noise performance. Although low-frequency switched-capacitor filters can achieve nonlinear distortion and noise performance exceeding 90 dB, high-frequency continuous-time filters typically exhibit distortion and noise performance barely surpassing 60 dB (and often much worse). Nevertheless, there are numerous high-speed applications, such as many data communication and video circuits, where stringent distortion and noise performance is not critical.\n\nKey Point: Continuous-time integrated analog filters process signals that are continuous in both amplitude and time. Discrete-time analog filters handle signals that are sampled in time, and thus generally operate on lower-frequency signals compared to their continuous-time counterparts."
},
{
    "text": "Integrated analog filters can be implemented in either discrete-time or continuous-time formats. Discrete-time filters and their associated signal processing are covered in Chapter 13, while their implementation via switched-capacitor circuits is discussed in Chapter 14. In switched-capacitor circuits, although the signals remain continuous in voltage (i.e., they are not quantized), they necessitate sampling in the time domain. Due to this time-domain sampling, the clock rate must always be at least twice the highest frequency being processed to prevent aliasing. Typically, the clock rate is significantly higher than twice the signal bandwidth to ease the requirements of the anti-aliasing filter. Consequently, switched-capacitor filters are constrained in their ability to handle high-frequency signals.\n\nThis chapter concentrates on continuous-time filtering. As their name implies, continuous-time filters maintain continuous signals in both time and analog signal levels. Since they do not require sampling, continuous-time filters offer a substantial speed advantage over switched-capacitor filters. However, they also have certain drawbacks. One significant issue is their requirement for tuning circuitry. Tuning is necessary because their filter coefficients are derived from the product of two different elements, such as capacitance and resistance (or transconductance) values. While switched-capacitor filter coefficients, determined by capacitance ratios, achieve accuracies of 0.1 percent, integrated continuous-time coefficients are initially set to only about 30 percent accuracy. Fortunately, tuning circuitry can enhance the filter coefficient accuracy to approximately 1 percent, albeit at the expense of additional and sometimes complex circuitry, as detailed in Section 12.9. Another practical limitation of most continuous-time filters is their relatively inferior linearity and noise performance. Although low-frequency switched-capacitor filters can achieve nonlinear distortion and noise performance exceeding 90 dB, high-frequency continuous-time filters typically exhibit distortion and noise performance barely surpassing 60 dB (and often much worse). Nonetheless, there are numerous high-speed applications where stringent distortion and noise performance is not critical, such as in many data communication and video circuits.\n\nKey Point: Continuous-time integrated analog filters process signals that are continuous in both amplitude and time. Discrete-time analog filters handle signals that are sampled in time, generally operating on lower-frequency signals compared to their continuous-time counterparts."
},
{
    "text": "Integrated analog filters can be implemented in either discrete-time or continuous-time formats. Discrete-time filters and their associated signal processing are covered in Chapter 13, while their implementation via switched-capacitor circuits is discussed in Chapter 14. In switched-capacitor circuits, although the voltage signals remain continuous (i.e., they are not quantized), they necessitate sampling in the time domain. Due to this time-domain sampling, the clock rate must be at least twice the highest frequency being processed to avoid aliasing. Typically, the clock rate far exceeds twice the signal bandwidth to ease the demands on the anti-aliasing filter. Consequently, switched-capacitor filters face limitations in processing high-frequency signals.\n\nThis chapter concentrates on continuous-time filtering. As their name implies, continuous-time filters maintain continuous signals in both time and analog signal levels. Since they do not require sampling, they offer a significant speed advantage over switched-capacitor filters. However, continuous-time filters also have drawbacks. One is the necessity for tuning circuitry. Tuning is essential because their filter coefficients are derived from the product of two different elements, such as capacitance and resistance (or transconductance) values. While switched-capacitor filter coefficients, determined by capacitance ratios, achieve accuracies of 0.1 percent, integrated continuous-time coefficients initially reach only about 30 percent accuracy. Fortunately, tuning circuitry can enhance this accuracy to around 1 percent, albeit with the addition of more (and sometimes complex) circuitry, as detailed in Section 12.9. Another practical issue with most continuous-time filters is their relatively inferior linearity and noise performance. Although low-frequency switched-capacitor filters can achieve nonlinear distortion and noise performance exceeding 90 dB, high-frequency continuous-time filters typically only manage around 60 dB (and often worse). Nevertheless, there are numerous high-speed applications, such as data communication and video circuits, where stringent distortion and noise performance is not critical.\n\nKey Point: Continuous-time integrated analog filters handle signals that are continuous in both amplitude and time. Discrete-time analog filters process signals that are sampled in time, generally operating on lower-frequency signals compared to their continuous-time counterparts."
},
{
    "text": "The foundational concepts of first- and second-order transfer functions were outlined in Section 4.1. In the realm of analog filters, these transfer functions are constructed using integrators, summers, and gain elements, which serve as the essential components of integrated continuous-time filters. By assembling these elements, any rational transfer function can be effectively realized.\n\nKey Point: The core elements of analog filters are integrators, summers, and gain stages.\n\nKey Point: Any rational transfer function featuring real-valued coefficients can be decomposed into first- and second-order terms, enabling its implementation as a series of first- and second-order filters.\n\nA rational transfer function with real-valued coefficients can be broken down into first- and second-order terms that also possess real-valued coefficients. Consequently, filters of any order can be constructed by cascading first- and second-order sections. This cascading approach is widely used in practice, prompting us to focus our discussion on first- and second-order filters."
},
{
    "text": "The essentials of first- and second-order transfer functions were outlined in Section 4.1. In analog filters, these functions are implemented through combinations of integrators, summers, and gain elements, which serve as the core components of integrated continuous-time filters. By assembling these elements, any rational transfer function can be achieved.\n\nKey Point: Integrators, summers, and gain stages constitute the basic building blocks of analog filters.\n\nKey Point: Any rational transfer function with real-valued coefficients can be decomposed into first- and second-order terms, allowing it to be implemented as a series of first- and second-order filters.\n\nA rational transfer function with real-valued coefficients can be broken down into first- and second-order terms, also having real-valued coefficients, enabling the creation of any order filter through the cascading of first- and second-order sections. This cascading approach is widely used in practice, hence our focus here is limited to the discussion of first- and second-order filters."
},
{
    "text": "The essentials of first- and second-order transfer functions were outlined in Section 4.1. In analog filters, these functions are achieved through the use of integrators, summers, and gain components. These components form the basic structure of integrated continuous-time filters. By combining these elements, any rational transfer function can be constructed.\n\nKey Point: Integrators, summers, and gain stages serve as the core components of analog filters.\n\nKey Point: Any rational transfer function featuring real-valued coefficients can be decomposed into first- and second-order terms, allowing it to be implemented as a series of first- and second-order filters.\n\nA rational transfer function with real-valued coefficients can be broken down into first- and second-order terms, also with real-valued coefficients, enabling the creation of any order filter through the cascading of first- and second-order sections. This cascading approach is widely used in practice, hence our focus here is limited to discussions of first- and second-order filters."
},
{
    "text": "The fundamentals of first- and second-order transfer functions were outlined in Section 4.1. In analog filters, these transfer functions are achieved through combinations of integrators, summers, and gain elements, which serve as the essential components of integrated continuous-time filters. By assembling these elements, any rational transfer function can be realized.\n\nKey Point: Integrators, summers, and gain stages constitute the core building blocks of analog filters.\n\nKey Point: Any rational transfer function featuring real-valued coefficients can be decomposed into first- and second-order terms, allowing it to be implemented as a series of first- and second-order filters.\n\nA rational transfer function with real-valued coefficients can be broken down into first- and second-order terms that also possess real-valued coefficients. Consequently, filters of any order can be constructed by cascading first- and second-order sections. This cascading approach is widely used in practice, prompting us to focus our discussion on first- and second-order filters herein."
},
{
    "text": "The fundamentals of first- and second-order transfer functions were outlined in Section 4.1. In analog filters, these transfer functions are achieved through the use of integrators, summers, and gain elements, which serve as the essential components of integrated continuous-time filters. By combining these elements, any rational transfer function can be realized.\n\nKey Point: Integrators, summers, and gain stages constitute the core building blocks of analog filters.\n\nKey Point: Any rational transfer function with real coefficients can be decomposed into first- and second-order terms, allowing it to be implemented as a series of first- and second-order filters.\n\nAny rational transfer function featuring real coefficients can be broken down into first- and second-order terms with real coefficients, enabling the creation of filters of any order by cascading first- and second-order sections. This cascading approach is widely used in practice, prompting us to focus our discussion on first- and second-order filters here."
},
{
    "text": "The fundamentals of first- and second-order transfer functions were outlined in Section 4.1. In analog filters, these functions are achieved through combinations of integrators, summers, and gain elements, which serve as the essential components of integrated continuous-time filters. By assembling these elements, any rational transfer function can be realized.\n\nKey Point: Integrators, summers, and gain stages constitute the core building blocks of analog filters.\n\nKey Point: Any rational transfer function with real-valued coefficients can be decomposed into first- and second-order terms, allowing it to be implemented as a series of first- and second-order filters.\n\nA rational transfer function with real-valued coefficients can be broken down into first- and second-order terms, also having real-valued coefficients, enabling the creation of any order filter by cascading first- and second-order sections. This cascading approach is widely used in practice, hence our focus here is limited to discussing first- and second-order filters."
},
{
    "text": "The fundamentals of first- and second-order transfer functions were outlined in Section 4.1. In analog filters, these functions are implemented using integrators, summers, and gain elements, which serve as the core components of integrated continuous-time filters. By assembling these elements, any rational transfer function can be achieved.\n\nKey Point: Integrators, summers, and gain stages form the essential building blocks of analog filters.\n\nKey Point: Any rational transfer function with real coefficients can be decomposed into first- and second-order terms, allowing it to be implemented as a series of first- and second-order filters.\n\nA rational transfer function with real coefficients can be broken down into first- and second-order terms with real coefficients, enabling the creation of any order filter through the cascading of first- and second-order sections. This cascading approach is widely used in practice, hence our focus here is limited to first- and second-order filters."
},
{
    "text": "The fundamentals of first- and second-order transfer functions were outlined in Section 4.1. In analog filters, these functions are implemented through combinations of integrators, summers, and gain elements, which serve as the core components of integrated continuous-time filters. By assembling these elements, any rational transfer function can be achieved.\n\nKey Point: Integrators, summers, and gain stages constitute the essential building blocks of analog filters.\n\nKey Point: Any rational transfer function with real coefficients can be decomposed into first- and second-order terms, allowing it to be implemented as a series of first- and second-order filters.\n\nA rational transfer function with real coefficients can be broken down into first- and second-order terms, also having real coefficients, enabling the creation of any order filter by cascading first- and second-order sections. This cascading approach is widely used in practice, prompting us to focus our discussion on first- and second-order filters here."
},
{
    "text": "Second-order filters, also known as biquadratic filters or biquads, derive their name from their general transfer function, which is the ratio of two quadratic polynomials. The practical implementation of this filter is illustrated in Fig. 12.2. The transfer function for this second-order filter is expressed as follows:\nimage_name:Fig. 12.1\ndescription:The block diagram in Fig. 12.1 depicts a general first-order continuous-time filter, comprising the following primary components:\n\n1. **Input and Output Ports:**\n- **Input Port:** Marked as \\( V_{in}(s) \\), this is the entry point for the input signal.\n- **Output Port:** Marked as \\( V_{out}(s) \\), this is where the filtered output signal emerges.\n\n2. **Summing Junction:**\n- The input signal \\( V_{in}(s) \\) is divided into two paths. One path directly enters the summing junction, while the other is multiplied by \\( k_1 s \\) before reaching it.\n- The summing junction merges the weighted input signal \\( k_0 \\) with the feedback signal from the output, which is multiplied by \\(-\\omega_0\\).\n\n3. **Integrator Block:**\n- Represented by the block labeled \\( 1/s \\), this component integrates the signal from the summing junction, playing a key role in the system's dynamic behavior.\n\n4. **Feedback Path:**\n- A feedback loop exists where the output \\( V_{out}(s) \\) is fed back into the summing junction after being multiplied by \\(-\\omega_0\\). This feedback is essential for defining the system's frequency response.\n\n**Flow of Information:**\n- The input \\( V_{in}(s) \\) undergoes processing through two paths: one direct to the summing junction and the other via a gain \\( k_1 s \\).\n- The summing junction blends these inputs with the feedback signal, generating a combined signal.\n- This combined signal is then integrated by the \\( 1/s \\) block.\n- The output of the integrator, \\( V_{out}(s) \\), is also part of the feedback loop.\n\n**Overall System Function:**\n- This system acts as a first-order filter, employing both feedforward and feedback paths to alter the input signal's frequency characteristics. The feedback loop is particularly important for determining the filter's stability and frequency response. The constants \\( k_0 \\), \\( k_1 \\), and \\( \\omega_0 \\) influence the filter's gain and cutoff frequency. The arrangement of these components enables the system to transform the input signal into the desired output, emphasizing or attenuating specific frequency components.\nimage_name:Fig. 12.2\ndescription:The block diagram in Fig. 12.2 illustrates a general second-order (biquadratic) continuous-time filter. This filter processes an input signal \\( V_{in}(s) \\) to produce an output signal \\( V_{out}(s) \\) through a series of operations involving amplification and integration.\n\n**Main Components:**\n1. **Input Signal \\( V_{in}(s) \\):** This signal enters the system for filtering.\n2. **Summing Junction:** The input signal \\( V_{in}(s) \\) is split and directed to a summing junction, where it is combined with two other signals: one scaled by \\( k_0 \\) and the other by \\( k_1 s \\).\n3. **Gain Blocks:**\n- **\\( k_0 \\) Gain Block:** This block scales the input signal by a constant \\( k_0 \\).\n- **\\( k_1 s \\) Gain Block:** This block scales the input signal proportionally to the complex frequency variable \\( s \\), effectively differentiating it.\n4. **Integrator Block \\( \\frac{1}{s} \\):** This block integrates the signal from the summing junction's output, with integration in the Laplace domain represented as division by \\( s \\).\n5. **Feedback Path:** A feedback loop is formed by feeding the integrator's output back into the summing junction after scaling by \\(-\\omega_0\\).\n\n**Flow of Information or Control:**\n- The input \\( V_{in}(s) \\) is split into two paths. One path goes directly to the summing junction after being multiplied by \\( k_0 \\), and the other is multiplied by \\( k_1 s \\) before reaching the summing junction.\n- The summing junction combines these scaled inputs with the feedback signal, which is the integrator's output scaled by \\(-\\omega_0\\).\n- The combined signal is then integrated by the \\( \\frac{1}{s} \\) block, resulting in the output \\( V_{out}(s) \\).\n- The feedback loop ensures continuous adjustment of \\( V_{out}(s) \\) based on the difference between the input and feedback signals, achieving the desired filter characteristics.\n\n**Overall System Function:**\nThe main function of this second-order filter is to modify the frequency characteristics of the input signal \\( V_{in}(s) \\) according to the specified transfer function. The configuration of gain blocks, the integrator, and the feedback loop allows the filter to selectively enhance or attenuate certain frequency components, shaping the output signal \\( V_{out}(s) \\) for specific applications.\n\nFig. 12.1 A block diagram of a general first-order continuous-time filter.\nimage_name:Fig. 12.2\ndescription:The block diagram labeled \"Fig. 12.2\" represents a general second-order (biquadratic) continuous-time filter. This filter is designed to modify the frequency characteristics of an input signal \\( V_{in}(s) \\) and produce an output signal \\( V_{out}(s) \\) according to a specified transfer function.\n\nMain Components:\n1. **Summing Junctions**: The diagram includes two summing junctions. The first combines the input signal \\( V_{in}(s) \\) with feedback signals, while the second combines the output from the first integrator with additional feedback.\n2. **Integrators**: Two integrator blocks, each labeled \\( 1/s \\), are crucial for implementing the continuous-time filter.\n3. **Feedback Paths**: Multiple feedback paths are present, labeled with specific parameters \\( -\\omega_0, -\\omega_0/Q \\), and gains \\( k_0/\\omega_0, k_1, k_2s \\).\n\nFlow of Information or Control:\n- The input signal \\( V_{in}(s) \\) is fed into the first summing junction, where it is combined with feedback signals.\n- The output of the first summing junction is processed through the first integrator \\( 1/s \\), producing an intermediate signal.\n- This intermediate signal is then fed into the second summing junction, where it is combined with additional feedback signals.\n- The output of the second summing junction is processed through the second integrator \\( 1/s \\), resulting in the output signal \\( V_{out}(s) \\).\n- Feedback paths control the filter's characteristics, with specific gains applied to shape the frequency response.\n\nLabels, Annotations, and Key Indicators:\n- **Gain Values**: The diagram includes gain values such as \\( k_0/\\omega_0, k_1, k_2s \\), which adjust the filter's response.\n- **Feedback Parameters**: \\( -\\omega_0, -\\omega_0/Q \\) define the feedback characteristics, crucial for determining the system's poles and zeros.\n\nOverall System Function:\nThe primary function of this second-order filter is to selectively enhance or attenuate certain frequency components of the input signal \\( V_{in}(s) \\). This is achieved through the arrangement of integrators, feedback loops, and gain blocks, which collectively define the transfer function \\( H(s) \\). The filter can shape the output signal \\( V_{out}(s) \\) to meet specific application needs, such as in audio processing, communication systems, or signal conditioning.\n\nFig. 12.2 A block diagram of a general second-order (biquadratic) continuous-time filter.\n\n$$\n\\begin{equation*}\nH(s) \\equiv \\frac{V_{\\text {out }}(s)}{V_{\\text {in }}(s)}=\\frac{k_{2} s^{2}+k_{1} s+k_{0}}{s^{2}+\\left(\\frac{\\omega_{0}}{Q}\\right) s+\\omega_{0}^{2}} \\tag{12.2}\n\\end{equation*}\n$$\n\nThe system's poles, like any linear system, can be determined by considering the undriven behavior, \\( \\mathrm{V}_{\\text {in }}=0 \\), and are independent of the feed-in gains, \\( \\mathrm{k}_{1,2,3} \\). Two integrators are necessary to realize the two poles. For stability, \\( \\omega_{0} / Q \\) must be positive, implying that one of the integrators in Fig. 12.2 must have negative feedback, making it lossy. A large \\( \\omega_{0} / Q \\) indicates a very lossy integrator and a low \\( Q \\)-factor. With \\( Q<1 / 2 \\), the poles are real, whereas with \\( \\mathrm{Q}>1 / 2 \\), the poles form a complex-conjugate pair, as illustrated in Fig. 4.9.\n\nThe numerator of (12.2) and thus the zeros of the biquad are determined by the feed-in gains \\( \\mathrm{k}_{1,2,3} \\). By omitting some feed-in branches in Fig. 12.2, the filter can realize low-pass, high-pass, or band-pass configurations.\n\n#### EXAMPLE 12.1\n\nDetermine the gain coefficients in the biquad of Fig. 12.2 required for a low-pass transfer function with a dc gain of 6 dB, \\( Q=1 / \\sqrt{2} \\), and a 3-dB bandwidth of \\( \\omega_{3-\\mathrm{dB}}=10^{6} \\) rad/sec.\n\n#### Solution\n\nA low-pass biquad is achieved with \\( \\mathrm{k}_{1}=\\mathrm{k}_{2}=0 \\).\n\n$$\n\\begin{equation*}\nH(s)=\\frac{k_{0}}{s^{2}+\\left(\\frac{\\omega_{0}}{Q}\\right) s+\\omega_{0}^{2}} \\tag{12.3}\n\\end{equation*}\n$$\n\nThe 3-dB bandwidth is the frequency at which the denominator's magnitude is \\( \\sqrt{2} \\) times its dc value. For \\( Q=1 / \\sqrt{2} \\), this is solved by\n\n$$\n\\begin{align*}\n\\left|-\\omega_{3-\\mathrm{dB}}^{2}+\\mathrm{j} \\sqrt{2} \\omega_{0} \\omega_{3-\\mathrm{dB}}+\\omega_{\\mathrm{o}}^{2}\\right| & =\\sqrt{2} \\omega_{\\mathrm{o}}^{2}  \\tag{12.4}\\\\\n\\Rightarrow \\omega_{3-\\mathrm{dB}} & =\\omega_{0}\n\\end{align*}\n$$\n\nThus, \\( \\omega_{0}=10^{6} \\). For a dc gain of 6 dB, \\( \\mathrm{k}_{0} / \\omega_{0}^{2}=2 \\Rightarrow \\mathrm{k}_{0}=2 \\omega_{0}^{2} \\). The block diagram in Fig. 12.2 can be simplified by incorporating a gain \\( \\omega_{0} \\) into each integrator, resulting in the biquad shown in Fig. 12.3."
},
{
    "text": "Second-order filters are also known as biquadratic filters or biquads, as their general transfer function is the ratio of two quadratic polynomials. The practical implementation's block diagram is depicted in Fig. 12.2. The transfer function for this second-order filter is expressed as\nimage_name:Fig. 12.1\ndescription:The block diagram in Fig. 12.1 illustrates a general first-order continuous-time filter, comprising the following key components:\n\n1. **Input and Output Ports:**\n- **Input Port:** Marked \\( V_{in}(s) \\), where the input signal enters the system.\n- **Output Port:** Marked \\( V_{out}(s) \\), where the filtered output signal exits the system.\n\n2. **Summing Junction:**\n- The input signal \\( V_{in}(s) \\) is divided into two paths. One path directly enters the summing junction, while the other is multiplied by \\( k_1 s \\) before reaching it.\n- The summing junction combines the weighted input signal \\( k_0 \\) and the feedback signal from the output, multiplied by \\(-\\omega_0\\).\n\n3. **Integrator Block:**\n- Represented by the block labeled \\( 1/s \\), this component integrates the signal from the summing junction, playing a vital role in the system's dynamic behavior.\n\n4. **Feedback Path:**\n- A feedback loop exists where the output \\( V_{out}(s) \\) is fed back into the summing junction after being multiplied by \\(-\\omega_0\\). This feedback is essential for defining the system's frequency response characteristics.\n\n**Information Flow:**\n- The input \\( V_{in}(s) \\) undergoes processing through two paths: one directly to the summing junction and the other via a gain \\( k_1 s \\).\n- The summing junction merges these inputs with the feedback signal, generating a combined signal.\n- This combined signal is then integrated by the \\( 1/s \\) block.\n- The output of the integrator, \\( V_{out}(s) \\), is also part of the feedback loop.\n\n**System Function Overview:**\n- This system acts as a first-order filter, utilizing feedforward and feedback paths to alter the input signal's frequency characteristics. The feedback loop is crucial for determining the filter's stability and frequency response. The constants \\( k_0 \\), \\( k_1 \\), and \\( \\omega_0 \\) influence the filter's gain and cutoff frequency. The arrangement of these components enables the system to transform the input signal into the desired output, emphasizing or attenuating specific frequency components.\nimage_name:Fig. 12.2\ndescription:The block diagram in Fig. 12.2 depicts a general second-order (biquadratic) continuous-time filter. This filter processes an input signal \\( V_{in}(s) \\) to produce an output signal \\( V_{out}(s) \\) through a series of operations involving amplification and integration.\n\n**Key Components:**\n1. **Input Signal \\( V_{in}(s) \\):** The signal that enters the system for filtering.\n2. **Summing Junction:** The input signal \\( V_{in}(s) \\) is split and directed to a summing junction, where it is combined with two other signals: one scaled by \\( k_0 \\) and another by \\( k_1 s \\).\n3. **Gain Blocks:**\n- **\\( k_0 \\) Gain Block:** Scales the input signal by a constant \\( k_0 \\).\n- **\\( k_1 s \\) Gain Block:** Scales the input signal proportionally to the complex frequency variable \\( s \\), effectively differentiating it.\n4. **Integrator Block \\( \\frac{1}{s} \\):** Integrates the signal from the summing junction's output, with integration in the Laplace domain represented as division by \\( s \\).\n5. **Feedback Path:** A feedback loop is formed by feeding the integrator's output back into the summing junction after scaling by \\(-\\omega_0\\).\n\n**Information and Control Flow:**\n- The input \\( V_{in}(s) \\) is split into two paths. One path goes directly to the summing junction after being multiplied by \\( k_0 \\), and the other is multiplied by \\( k_1 s \\) before reaching the summing junction.\n- The summing junction merges these scaled inputs with the feedback signal, which is the integrator's output scaled by \\(-\\omega_0\\).\n- The combined signal is then integrated by the \\( \\frac{1}{s} \\) block, producing the output \\( V_{out}(s) \\).\n- The feedback loop ensures continuous adjustment of \\( V_{out}(s) \\) based on the input and feedback signal difference, achieving the desired filter characteristics.\n\n**System Function Overview:**\nThe main function of this second-order filter is to modify the input signal \\( V_{in}(s) \\)'s frequency characteristics according to the specified transfer function. The configuration of gain blocks, the integrator, and the feedback loop allows the filter to selectively enhance or attenuate certain frequency components, shaping the output signal \\( V_{out}(s) \\) for specific applications.\n\nFig. 12.1 A block diagram of a general first-order continuous-time filter.\nimage_name:Fig. 12.2\ndescription:The block diagram labeled \"Fig. 12.2\" represents a general second-order (biquadratic) continuous-time filter. This filter is designed to modify the frequency characteristics of an input signal \\( V_{in}(s) \\) and produce an output signal \\( V_{out}(s) \\) according to a specified transfer function.\n\nMain Components:\n1. **Summing Junctions**: Two summing junctions are present. The first combines the input signal \\( V_{in}(s) \\) with feedback signals, while the second merges the first integrator's output with additional feedback.\n2. **Integrators**: Two integrator blocks, each labeled \\( 1/s \\), are crucial for the continuous-time filter implementation.\n3. **Feedback Paths**: Multiple feedback paths are present, labeled with specific parameters \\( -\\omega_0, -\\omega_0/Q \\), and gains \\( k_0/\\omega_0, k_1, k_2s \\).\n\nInformation and Control Flow:\n- The input signal \\( V_{in}(s) \\) enters the first summing junction, where it is combined with feedback signals.\n- The first summing junction's output is processed through the first integrator \\( 1/s \\), generating an intermediate signal.\n- This intermediate signal is then fed into the second summing junction, where it is combined with additional feedback signals.\n- The second summing junction's output is processed through the second integrator \\( 1/s \\), resulting in the output signal \\( V_{out}(s) \\).\n- Feedback paths control the filter's characteristics, with specific gains applied to shape the frequency response.\n\nLabels, Annotations, and Key Indicators:\n- **Gain Values**: The diagram includes gain values like \\( k_0/\\omega_0, k_1, k_2s \\), which adjust the filter's response.\n- **Feedback Parameters**: \\( -\\omega_0, -\\omega_0/Q \\) define the feedback characteristics, crucial for determining the system's poles and zeros.\n\nSystem Function Overview:\nThe primary function of this second-order filter is to selectively enhance or attenuate certain frequency components of the input signal \\( V_{in}(s) \\). This is achieved through the arrangement of integrators, feedback loops, and gain blocks, collectively defining the transfer function \\( H(s) \\). The filter can shape the output signal \\( V_{out}(s) \\) to meet specific application needs, such as in audio processing, communication systems, or signal conditioning.\n\nFig. 12.2 A block diagram of a general second-order (biquadratic) continuous-time filter.\n\n$$\n\\begin{equation*}\nH(s) \\equiv \\frac{V_{\\text {out }}(s)}{V_{\\text {in }}(s)}=\\frac{k_{2} s^{2}+k_{1} s+k_{0}}{s^{2}+\\left(\\frac{\\omega_{0}}{Q}\\right) s+\\omega_{0}^{2}} \\tag{12.2}\n\\end{equation*}\n$$\n\nThe system's poles, like any linear system, can be determined by considering the undriven behavior, \\( \\mathrm{V}_{\\text {in }}=0 \\), and are independent of the feed-in gains, \\( \\mathrm{k}_{1,2,3} \\). Two integrators are required to realize the two poles. For stability, \\( \\omega_{0} / Q \\) must be positive, implying one integrator in Fig. 12.2 must have negative feedback, making it lossy. A large \\( \\omega_{0} / Q \\) indicates a very lossy integrator and a low \\( Q \\)-factor. With \\( Q<1 / 2 \\), the poles are real; with \\( \\mathrm{Q}>1 / 2 \\), they form a complex-conjugate pair, as illustrated in Fig. 4.9.\n\nThe numerator of (12.2) and thus the zeros of the biquad are determined by the feed-in gains \\( \\mathrm{k}_{1,2,3} \\). By omitting some feed-in branches in Fig. 12.2, it can realize low-pass, high-pass, or band-pass biquads.\n\n#### EXAMPLE 12.1\n\nDetermine the gain coefficients in the biquad of Fig. 12.2 for a low-pass transfer function with a dc gain of 6 dB, \\( Q=1 / \\sqrt{2} \\), and a 3-dB bandwidth of \\( \\omega_{3-\\mathrm{dB}}=10^{6} \\) rad/sec.\n\n#### Solution\n\nA low-pass biquad is achieved with \\( \\mathrm{k}_{1}=\\mathrm{k}_{2}=0 \\).\n\n$$\n\\begin{equation*}\nH(s)=\\frac{k_{0}}{s^{2}+\\left(\\frac{\\omega_{0}}{Q}\\right) s+\\omega_{0}^{2}} \\tag{12.3}\n\\end{equation*}\n$$\n\nThe 3-dB bandwidth is the frequency where the denominator's magnitude is \\( \\sqrt{2} \\) times its dc value. For \\( Q=1 / \\sqrt{2} \\), this is solved by\n\n$$\n\\begin{align*}\n\\left|-\\omega_{3-\\mathrm{dB}}^{2}+\\mathrm{j} \\sqrt{2} \\omega_{0} \\omega_{3-\\mathrm{dB}}+\\omega_{\\mathrm{o}}^{2}\\right| & =\\sqrt{2} \\omega_{\\mathrm{o}}^{2}  \\tag{12.4}\\\\\n\\Rightarrow \\omega_{3-\\mathrm{dB}} & =\\omega_{0}\n\\end{align*}\n$$\n\nThus, \\( \\omega_{0}=10^{6} \\). For a dc gain of 6 dB, \\( \\mathrm{k}_{0} / \\omega_{0}^{2}=2 \\Rightarrow \\mathrm{k}_{0}=2 \\omega_{0}^{2} \\). The block diagram in Fig. 12.2 can be simplified by incorporating a gain \\( \\omega_{0} \\) into each integrator, resulting in the biquad of Fig. 12.3."
},
{
    "text": "Second-order filters are also referred to as biquadratic filters or biquads, named for their transfer function, which is the ratio of two quadratic polynomials. The practical implementation's block diagram is depicted in Fig. 12.2. The transfer function for this second-order filter is expressed as\nimage_name:Fig. 12.1\ndescription:The block diagram in Fig. 12.1 illustrates a general first-order continuous-time filter, comprising the following primary components:\n\n1. **Input and Output Ports:**\n- **Input Port:** Marked as \\( V_{in}(s) \\), this is where the input signal enters.\n- **Output Port:** Marked as \\( V_{out}(s) \\), this is where the filtered output exits.\n\n2. **Summing Junction:**\n- The input signal \\( V_{in}(s) \\) splits into two paths. One path directly enters the summing junction, while the other is multiplied by \\( k_1 s \\) before reaching it.\n- The summing junction merges the weighted input signal \\( k_0 \\) and the feedback signal from the output, multiplied by \\(-\\omega_0\\).\n\n3. **Integrator Block:**\n- Represented by the block labeled \\( 1/s \\), this block integrates the signal from the summing junction, playing a key role in the system's dynamics.\n\n4. **Feedback Path:**\n- A feedback loop exists where the output \\( V_{out}(s) \\) is fed back into the summing junction after being multiplied by \\(-\\omega_0\\). This feedback is essential for defining the system's frequency response.\n\n**Information Flow:**\n- The input \\( V_{in}(s) \\) is processed through two paths: one direct to the summing junction and the other via a gain \\( k_1 s \\).\n- The summing junction combines these inputs with the feedback signal, creating a combined signal.\n- This combined signal is then integrated by the \\( 1/s \\) block.\n- The integrator's output, \\( V_{out}(s) \\), is also part of the feedback loop.\n\n**System Function:**\n- This system acts as a first-order filter, using feedforward and feedback paths to alter the input signal's frequency characteristics. The feedback loop is crucial for stability and frequency response. Constants \\( k_0 \\), \\( k_1 \\), and \\( \\omega_0 \\) influence the filter's gain and cutoff frequency. The component arrangement allows the system to transform the input signal into the desired output, emphasizing or attenuating specific frequencies.\nimage_name:Fig. 12.2\ndescription:The block diagram in Fig. 12.2 represents a general second-order (biquadratic) continuous-time filter. This filter processes an input signal \\( V_{in}(s) \\) to produce an output signal \\( V_{out}(s) \\) through a series of amplification and integration steps.\n\n**Key Components:**\n1. **Input Signal \\( V_{in}(s) \\):** The signal entering the system for filtering.\n2. **Summing Junction:** The input signal \\( V_{in}(s) \\) splits and enters a summing junction, where it combines with two other signals: one scaled by \\( k_0 \\) and another by \\( k_1 s \\).\n3. **Gain Blocks:**\n- **\\( k_0 \\) Gain Block:** Scales the input signal by a constant \\( k_0 \\).\n- **\\( k_1 s \\) Gain Block:** Scales the input signal proportionally to the complex frequency \\( s \\), effectively differentiating it.\n4. **Integrator Block \\( \\frac{1}{s} \\):** Integrates the signal from the summing junction. In the Laplace domain, integration is represented as division by \\( s \\).\n5. **Feedback Path:** A feedback loop feeds the integrator's output back into the summing junction after scaling by \\(-\\omega_0\\).\n\n**Information and Control Flow:**\n- The input \\( V_{in}(s) \\) splits into two paths. One goes directly to the summing junction after being multiplied by \\( k_0 \\), and the other is multiplied by \\( k_1 s \\) before reaching the summing junction.\n- The summing junction combines these scaled inputs with the feedback signal, which is the integrator's output scaled by \\(-\\omega_0\\).\n- The combined signal is integrated by the \\( \\frac{1}{s} \\) block, producing \\( V_{out}(s) \\).\n- The feedback loop ensures \\( V_{out}(s) \\) is continuously adjusted based on the input and feedback difference, achieving the desired filter characteristics.\n\n**System Function:**\nThe main function of this second-order filter is to modify the input signal \\( V_{in}(s) \\)'s frequency characteristics according to the specified transfer function. The arrangement of gain blocks, the integrator, and the feedback loop allows the filter to selectively enhance or attenuate certain frequencies, shaping the output signal \\( V_{out}(s) \\) for specific applications.\n\nFig. 12.1 A block diagram of a general first-order continuous-time filter.\nimage_name:Fig. 12.2\ndescription:The block diagram labeled \"Fig. 12.2\" represents a general second-order (biquadratic) continuous-time filter. This filter is designed to modify the frequency characteristics of an input signal \\( V_{in}(s) \\) and produce an output signal \\( V_{out}(s) \\) according to a specified transfer function.\n\nMain Components:\n1. **Summing Junctions**: Two summing junctions are present. The first combines the input signal \\( V_{in}(s) \\) with feedback signals, and the second combines the first integrator's output with additional feedback.\n2. **Integrators**: Two integrator blocks, each labeled \\( 1/s \\), are crucial for the continuous-time filter implementation.\n3. **Feedback Paths**: Multiple feedback paths are labeled with specific parameters \\( -\\omega_0, -\\omega_0/Q \\), and gains \\( k_0/\\omega_0, k_1, k_2s \\).\n\nInformation and Control Flow:\n- The input signal \\( V_{in}(s) \\) enters the first summing junction, combining with feedback signals.\n- The first summing junction's output is processed through the first integrator \\( 1/s \\), producing an intermediate signal.\n- This intermediate signal enters the second summing junction, combining again with feedback signals.\n- The second summing junction's output is processed through the second integrator \\( 1/s \\), resulting in the output signal \\( V_{out}(s) \\).\n- Feedback paths control the filter's characteristics, with specific gains applied to shape the frequency response.\n\nLabels, Annotations, and Key Indicators:\n- **Gain Values**: The diagram includes gain values \\( k_0/\\omega_0, k_1, k_2s \\) for adjusting the filter's response.\n- **Feedback Parameters**: \\( -\\omega_0, -\\omega_0/Q \\) define the feedback characteristics, crucial for determining the system's poles and zeros.\n\nSystem Function:\nThe primary function of this second-order filter is to selectively enhance or attenuate specific frequency components of the input signal \\( V_{in}(s) \\). This is achieved through the arrangement of integrators, feedback loops, and gain blocks, defining the transfer function \\( H(s) \\). The filter shapes the output signal \\( V_{out}(s) \\) to meet specific application needs, such as in audio processing, communication systems, or signal conditioning.\n\nFig. 12.2 A block diagram of a general second-order (biquadratic) continuous-time filter.\n\n$$\n\\begin{equation*}\nH(s) \\equiv \\frac{V_{\\text {out }}(s)}{V_{\\text {in }}(s)}=\\frac{k_{2} s^{2}+k_{1} s+k_{0}}{s^{2}+\\left(\\frac{\\omega_{0}}{Q}\\right) s+\\omega_{0}^{2}} \\tag{12.2}\n\\end{equation*}\n$$\n\nThe system's poles, like any linear system, can be determined by considering the undriven behavior, \\( \\mathrm{V}_{\\text {in }}=0 \\), and are independent of the feed-in gains, \\( \\mathrm{k}_{1,2,3} \\). Two integrators are needed to realize the two poles. For stability, \\( \\omega_{0} / Q \\) must be positive, implying one integrator in Fig. 12.2 must have negative feedback, making it lossy. A large \\( \\omega_{0} / Q \\) indicates a very lossy integrator and a low \\( Q \\)-factor. With \\( Q<1 / 2 \\), the poles are real; with \\( Q>1 / 2 \\), they form a complex-conjugate pair, as illustrated in Fig. 4.9.\n\nThe numerator of (12.2) and thus the zeros of the biquad are determined by the feed-in gains \\( \\mathrm{k}_{1,2,3} \\). By omitting some feed-in branches in Fig. 12.2, it can realize low-pass, high-pass, or band-pass biquads.\n\n#### EXAMPLE 12.1\n\nDetermine the gain coefficients in the biquad of Fig. 12.2 for a low-pass transfer function with a dc gain of 6 dB, \\( Q=1 / \\sqrt{2} \\), and a 3-dB bandwidth of \\( \\omega_{3-\\mathrm{dB}}=10^{6} \\mathrm{rad} / \\mathrm{sec} \\).\n\n#### Solution\n\nA low-pass biquad is achieved with \\( \\mathrm{k}_{1}=\\mathrm{k}_{2}=0 \\).\n\n$$\n\\begin{equation*}\nH(s)=\\frac{k_{0}}{s^{2}+\\left(\\frac{\\omega_{0}}{Q}\\right) s+\\omega_{0}^{2}} \\tag{12.3}\n\\end{equation*}\n$$\n\nThe 3-dB bandwidth is the frequency where the denominator's magnitude is \\( \\sqrt{2} \\) times its dc value. For \\( Q=1 / \\sqrt{2} \\), this is solved by\n\n$$\n\\begin{align*}\n\\left|-\\omega_{3-\\mathrm{dB}}^{2}+\\mathrm{j} \\sqrt{2} \\omega_{0} \\omega_{3-\\mathrm{dB}}+\\omega_{\\mathrm{o}}^{2}\\right| & =\\sqrt{2} \\omega_{\\mathrm{o}}^{2}  \\tag{12.4}\\\\\n\\Rightarrow \\omega_{3-\\mathrm{dB}} & =\\omega_{0}\n\\end{align*}\n$$\n\nThus, \\( \\omega_{0}=10^{6} \\). For a dc gain of 6 dB, \\( \\mathrm{k}_{0} / \\omega_{0}^{2}=2 \\Rightarrow \\mathrm{k}_{0}=2 \\omega_{0}^{2} \\). The block diagram in Fig. 12.2 can be simplified by incorporating a gain \\( \\omega_{0} \\) into each integrator, resulting in the biquad of Fig. 12.3."
},
{
    "text": "Second-order filters are also known as biquadratic filters or biquads, named for their transfer function, which is the ratio of two quadratic polynomials. The practical implementation of this filter is depicted in Fig. 12.2. The transfer function for this second-order filter is expressed as\nimage_name:Fig. 12.1\ndescription:Fig. 12.1 illustrates a general first-order continuous-time filter block diagram, comprising the following primary components:\n\n1. **Input and Output Ports:**\n- **Input Port:** Marked as \\( V_{in}(s) \\), this is the entry point for the input signal.\n- **Output Port:** Marked as \\( V_{out}(s) \\), this is where the filtered output signal emerges.\n\n2. **Summing Junction:**\n- The input signal \\( V_{in}(s) \\) is divided into two paths. One path directly enters the summing junction, while the other is multiplied by \\( k_1 s \\) before reaching it.\n- The summing junction aggregates the weighted input signal \\( k_0 \\) and the feedback signal from the output, multiplied by \\(-\\omega_0\\).\n\n3. **Integrator Block:**\n- Represented by the block labeled \\( 1/s \\), this component integrates the signal from the summing junction, playing a key role in the system's dynamics.\n\n4. **Feedback Path:**\n- A feedback loop exists where the output \\( V_{out}(s) \\) is returned to the summing junction after being multiplied by \\(-\\omega_0\\). This feedback is essential for defining the system's frequency response.\n\n**Information Flow:**\n- The input \\( V_{in}(s) \\) is processed through two paths: one direct to the summing junction and the other via a gain \\( k_1 s \\).\n- The summing junction merges these inputs with the feedback signal, creating a combined signal.\n- This combined signal is then integrated by the \\( 1/s \\) block.\n- The integrator's output, \\( V_{out}(s) \\), is also fed back into the system as part of the feedback loop.\n\n**Overall System Function:**\n- This system acts as a first-order filter, using both feedforward and feedback paths to alter the input signal's frequency characteristics. The feedback loop particularly influences the filter's stability and frequency response. The constants \\( k_0 \\), \\( k_1 \\), and \\( \\omega_0 \\) are parameters affecting the filter's gain and cutoff frequency. The arrangement of these components enables the system to transform the input signal into the desired output, emphasizing or attenuating specific frequency components.\nimage_name:Fig. 12.2\ndescription:Fig. 12.2 presents a block diagram of a general second-order (biquadratic) continuous-time filter. This filter processes an input signal \\( V_{in}(s) \\) to produce an output signal \\( V_{out}(s) \\) through a series of operations involving amplification and integration.\n\n**Key Components:**\n1. **Input Signal \\( V_{in}(s) \\):** The signal entering the system for filtering.\n2. **Summing Junction:** The input signal \\( V_{in}(s) \\) is split and directed to a summing junction, where it is combined with two other signals: one scaled by \\( k_0 \\) and another by \\( k_1 s \\).\n3. **Gain Blocks:**\n- **\\( k_0 \\) Gain Block:** Scales the input signal by a constant \\( k_0 \\).\n- **\\( k_1 s \\) Gain Block:** Scales the input signal proportionally to the complex frequency variable \\( s \\), effectively differentiating it.\n4. **Integrator Block \\( \\frac{1}{s} \\):** Integrates the signal from the summing junction's output, with integration in the Laplace domain represented as division by \\( s \\).\n5. **Feedback Path:** A feedback loop is established by feeding the integrator's output back to the summing junction after scaling by \\(-\\omega_0\\).\n\n**Information and Control Flow:**\n- The input \\( V_{in}(s) \\) is split into two paths. One path goes directly to the summing junction after being multiplied by \\( k_0 \\), and the other is multiplied by \\( k_1 s \\) before reaching the summing junction.\n- The summing junction combines these scaled inputs with the feedback signal, which is the integrator's output scaled by \\(-\\omega_0\\).\n- The combined signal is then integrated by the \\( \\frac{1}{s} \\) block, producing the output \\( V_{out}(s) \\).\n- The feedback loop ensures continuous adjustment of \\( V_{out}(s) \\) based on the input and feedback signal difference, achieving the desired filter characteristics.\n\n**Overall System Function:**\nThe main function of this second-order filter is to modify the input signal \\( V_{in}(s) \\)'s frequency characteristics according to the specified transfer function. The configuration of gain blocks, the integrator, and the feedback loop allows the filter to selectively enhance or attenuate certain frequency components, shaping the output signal \\( V_{out}(s) \\) for specific applications.\n\nFig. 12.1 A block diagram of a general first-order continuous-time filter.\nimage_name:Fig. 12.2\ndescription:The block diagram labeled \"Fig. 12.2\" depicts a general second-order (biquadratic) continuous-time filter. This filter is designed to alter the frequency characteristics of an input signal \\( V_{in}(s) \\) and generate an output signal \\( V_{out}(s) \\) based on a specified transfer function.\n\nMain Components:\n1. **Summing Junctions**: Two summing junctions are present. The first combines the input signal \\( V_{in}(s) \\) with feedback signals, and the second merges the first integrator's output with additional feedback.\n2. **Integrators**: Two integrator blocks, each labeled \\( 1/s \\), are crucial for the continuous-time filter's implementation.\n3. **Feedback Paths**: Multiple feedback paths are included, labeled with specific parameters \\( -\\omega_0, -\\omega_0/Q \\), and gains \\( k_0/\\omega_0, k_1, k_2s \\).\n\nFlow of Information or Control:\n- The input signal \\( V_{in}(s) \\) enters the first summing junction, where it is combined with feedback signals.\n- The first summing junction's output is processed through the first integrator \\( 1/s \\), generating an intermediate signal.\n- This intermediate signal is then fed into the second summing junction, where it is combined with further feedback signals.\n- The second summing junction's output is processed through the second integrator \\( 1/s \\), resulting in the output signal \\( V_{out}(s) \\).\n- Feedback paths control the filter's characteristics, with specific gains applied at various points to shape the frequency response.\n\nLabels, Annotations, and Key Indicators:\n- **Gain Values**: The diagram includes gain values like \\( k_0/\\omega_0, k_1, k_2s \\), used to adjust the filter's response.\n- **Feedback Parameters**: \\( -\\omega_0, -\\omega_0/Q \\) define the feedback characteristics, crucial for determining the system's poles and zeros.\n\nOverall System Function:\nThe primary role of this second-order filter is to selectively enhance or attenuate specific frequency components of the input signal \\( V_{in}(s) \\). This is achieved through the arrangement of integrators, feedback loops, and gain blocks, collectively defining the transfer function \\( H(s) \\). The filter can shape the output signal \\( V_{out}(s) \\) to meet specific application requirements, such as in audio processing, communication systems, or signal conditioning.\n\nFig. 12.2 A block diagram of a general second-order (biquadratic) continuous-time filter.\n\n$$\n\\begin{equation*}\nH(s) \\equiv \\frac{V_{\\text {out }}(s)}{V_{\\text {in }}(s)}=\\frac{k_{2} s^{2}+k_{1} s+k_{0}}{s^{2}+\\left(\\frac{\\omega_{0}}{Q}\\right) s+\\omega_{0}^{2}} \\tag{12.2}\n\\end{equation*}\n$$\n\nThe system's poles, like any linear system, can be determined by examining its undriven behavior, $\\mathrm{V}_{\\text {in }}=0$, and are thus independent of the feed-in gains, $\\mathrm{k}_{1,2,3}$. Two integrators are necessary to realize the two poles. For stability, $\\omega_{0} / Q$ must be positive, indicating that one of the two integrators in Fig. 12.2 must have negative feedback, making it lossy. A large feedback coefficient $\\omega_{0} / Q$ implies a highly lossy integrator and, consequently, a low $Q$-factor. With $Q<1 / 2$, the two poles are real, whereas with $\\mathrm{Q}>1 / 2$, the poles form a complex-conjugate pair, as illustrated in Fig. 4.9.\n\nThe numerator of (12.2) and thus the zeros of the biquad are determined by the feed-in gains $\\mathrm{k}_{1,2,3}$. By omitting some feed-in branches in Fig. 12.2, the filter can be configured to realize low-pass, high-pass, or band-pass biquads.\n\n#### EXAMPLE 12.1\n\nDetermine the gain coefficients in the biquad of Fig. 12.2 required for a low-pass transfer function with a dc gain of $6 \\mathrm{~dB}, Q=1 / \\sqrt{2}$, and a $3-\\mathrm{dB}$ bandwidth of $\\omega_{3-\\mathrm{dB}}=10^{6} \\mathrm{rad} / \\mathrm{sec}$.\n\n#### Solution\n\nA low-pass biquad is achieved with $\\mathrm{k}_{1}=\\mathrm{k}_{2}=0$.\n\n$$\n\\begin{equation*}\nH(s)=\\frac{k_{0}}{s^{2}+\\left(\\frac{\\omega_{0}}{Q}\\right) s+\\omega_{0}^{2}} \\tag{12.3}\n\\end{equation*}\n$$\n\nThe $3-\\mathrm{dB}$ bandwidth is the frequency at which the denominator's magnitude is $\\sqrt{2}$ times its dc value. For $Q=1 / \\sqrt{2}$, this is solved by\n\n$$\n\\begin{align*}\n\\left|-\\omega_{3-\\mathrm{dB}}^{2}+\\mathrm{j} \\sqrt{2} \\omega_{0} \\omega_{3-\\mathrm{dB}}+\\omega_{\\mathrm{o}}^{2}\\right| & =\\sqrt{2} \\omega_{\\mathrm{o}}^{2}  \\tag{12.4}\\\\\n\\Rightarrow \\omega_{3-\\mathrm{dB}} & =\\omega_{0}\n\\end{align*}\n$$\n\nThus, in this case, $\\omega_{0}=10^{6}$. For a dc gain of $6 \\mathrm{~dB}, \\mathrm{k}_{0} / \\omega_{0}^{2}=2 \\Rightarrow \\mathrm{k}_{0}=2 \\omega_{0}^{2}$. The block diagram in Fig. 12.2 can be simplified by incorporating a gain $\\omega_{0}$ into each integrator, resulting in the biquad of Fig. 12.3."
},
{
    "text": "Second-order filters are also known as biquadratic filters or biquads, named for their transfer function, which is the ratio of two quadratic polynomials in its most general form. The practical implementation of this second-order filter is depicted in Fig. 12.2, with its transfer function provided by\nimage_name:Fig. 12.1\ndescription:Fig. 12.1 illustrates a general first-order continuous-time filter block diagram, comprising the following primary components:\n\n1. **Input and Output Ports:**\n- **Input Port:** Marked \\( V_{in}(s) \\), where the input signal enters.\n- **Output Port:** Marked \\( V_{out}(s) \\), where the filtered output signal exits.\n\n2. **Summing Junction:**\n- The input signal \\( V_{in}(s) \\) branches into two paths. One path directly enters the summing junction, while the other is multiplied by \\( k_1 s \\) before reaching it.\n- The summing junction merges the weighted input signal \\( k_0 \\) and the feedback signal, which is multiplied by \\(-\\omega_0\\).\n\n3. **Integrator Block:**\n- Represented by the block \\( 1/s \\), this component integrates the signal from the summing junction, playing a key role in the system's dynamic behavior.\n\n4. **Feedback Path:**\n- A feedback loop exists where the output \\( V_{out}(s) \\) is fed back into the summing junction after being multiplied by \\(-\\omega_0\\). This feedback is essential for determining the system's frequency response characteristics.\n\n**Flow of Information:**\n- The input \\( V_{in}(s) \\) undergoes processing through two paths: one direct to the summing junction and the other through a gain \\( k_1 s \\).\n- The summing junction combines these inputs with the feedback signal, generating a combined signal.\n- This combined signal is then integrated by the \\( 1/s \\) block.\n- The output of the integrator, \\( V_{out}(s) \\), is also part of the feedback loop.\n\n**Overall System Function:**\n- This system acts as a first-order filter, using both feedforward and feedback paths to alter the input signal's frequency characteristics. The feedback loop is crucial for the filter's stability and frequency response. The constants \\( k_0 \\), \\( k_1 \\), and \\( \\omega_0 \\) influence the filter's gain and cutoff frequency. The arrangement of these components allows the system to transform the input signal into the desired output, emphasizing or attenuating specific frequency components.\nimage_name:Fig. 12.2\ndescription:Fig. 12.2 shows a general second-order (biquadratic) continuous-time filter block diagram. This filter processes an input signal \\( V_{in}(s) \\) to produce an output signal \\( V_{out}(s) \\) through a series of operations involving amplification and integration.\n\n**Main Components:**\n1. **Input Signal \\( V_{in}(s) \\):** The signal entering the system for filtering.\n2. **Summing Junction:** The input signal \\( V_{in}(s) \\) is split and fed into a summing junction, where it is combined with two other signals scaled by \\( k_0 \\) and \\( k_1 s \\).\n3. **Gain Blocks:**\n- **\\( k_0 \\) Gain Block:** Scales the input signal by a constant \\( k_0 \\).\n- **\\( k_1 s \\) Gain Block:** Scales the input signal proportionally to the complex frequency variable \\( s \\), effectively differentiating it.\n4. **Integrator Block \\( \\frac{1}{s} \\):** Integrates the signal from the summing junction output, with integration in the Laplace domain represented as division by \\( s \\).\n5. **Feedback Path:** A feedback loop feeds the integrator's output back into the summing junction after scaling by \\(-\\omega_0\\).\n\n**Flow of Information or Control:**\n- The input \\( V_{in}(s) \\) splits into two paths. One path goes directly to the summing junction after being multiplied by \\( k_0 \\), and the other is multiplied by \\( k_1 s \\) before reaching the summing junction.\n- The summing junction combines these scaled inputs with the feedback signal, which is the integrator's output scaled by \\(-\\omega_0\\).\n- The combined signal is integrated by the \\( \\frac{1}{s} \\) block, producing the output \\( V_{out}(s) \\).\n- The feedback loop continuously adjusts \\( V_{out}(s) \\) based on the difference between the input and feedback signals, achieving the desired filter characteristics.\n\n**Overall System Function:**\nThis second-order filter's main function is to modify the input signal \\( V_{in}(s) \\)'s frequency characteristics according to the specified transfer function. The arrangement of gain blocks, the integrator, and the feedback loop allows the filter to selectively enhance or attenuate certain frequency components, shaping the output signal \\( V_{out}(s) \\) for specific applications.\n\nFig. 12.1 A block diagram of a general first-order continuous-time filter.\nimage_name:Fig. 12.2\ndescription:The block diagram labeled \"Fig. 12.2\" represents a general second-order (biquadratic) continuous-time filter. This filter is designed to modify the frequency characteristics of an input signal \\( V_{in}(s) \\) and produce an output signal \\( V_{out}(s) \\) according to a specified transfer function.\n\nMain Components:\n1. **Summing Junctions**: Two summing junctions are present. The first combines the input signal \\( V_{in}(s) \\) with feedback signals, and the second combines the first integrator's output with additional feedback.\n2. **Integrators**: Two integrator blocks, each labeled \\( 1/s \\), are crucial for the continuous-time filter implementation.\n3. **Feedback Paths**: Multiple feedback paths exist, labeled with specific parameters \\( -\\omega_0, -\\omega_0/Q \\), and gains \\( k_0/\\omega_0, k_1, k_2s \\).\n\nFlow of Information or Control:\n- The input signal \\( V_{in}(s) \\) enters the first summing junction, where it is combined with feedback signals.\n- The first summing junction's output is processed through the first integrator \\( 1/s \\), producing an intermediate signal.\n- This intermediate signal is then fed into the second summing junction, combined again with feedback signals.\n- The second summing junction's output is processed through the second integrator \\( 1/s \\), resulting in the output signal \\( V_{out}(s) \\).\n- Feedback paths control the filter's characteristics, with specific gains applied to shape the frequency response.\n\nLabels, Annotations, and Key Indicators:\n- **Gain Values**: The diagram includes gain values \\( k_0/\\omega_0, k_1, k_2s \\) for adjusting the filter's response.\n- **Feedback Parameters**: \\( -\\omega_0, -\\omega_0/Q \\) define the feedback characteristics, crucial for determining the system's poles and zeros.\n\nOverall System Function:\nThe primary function of this second-order filter is to selectively enhance or attenuate certain frequency components of the input signal \\( V_{in}(s) \\). This is achieved through the arrangement of integrators, feedback loops, and gain blocks, collectively defining the transfer function \\( H(s) \\). The filter shapes the output signal \\( V_{out}(s) \\) to meet specific application needs, such as in audio processing, communication systems, or signal conditioning.\n\nFig. 12.2 A block diagram of a general second-order (biquadratic) continuous-time filter.\n\n$$\n\\begin{equation*}\nH(s) \\equiv \\frac{V_{\\text {out }}(s)}{V_{\\text {in }}(s)}=\\frac{k_{2} s^{2}+k_{1} s+k_{0}}{s^{2}+\\left(\\frac{\\omega_{0}}{Q}\\right) s+\\omega_{0}^{2}} \\tag{12.2}\n\\end{equation*}\n$$\n\nThe system's poles, like any linear system, are determined by considering its undriven behavior, \\( \\mathrm{V}_{\\text {in }}=0 \\), and are independent of the feed-in gains, \\( \\mathrm{k}_{1,2,3} \\). Two integrators are needed to realize the two poles. Stability requires \\( \\omega_{0} / Q \\) to be positive, implying one integrator in Fig. 12.2 must have negative feedback, making it lossy. A large \\( \\omega_{0} / Q \\) indicates a very lossy integrator and a low \\( Q \\)-factor. With \\( Q<1 / 2 \\), the poles are real; with \\( Q>1 / 2 \\), they form a complex-conjugate pair, as illustrated in Fig. 4.9.\n\nThe numerator of (12.2) and thus the zeros of the biquad are determined by the feed-in gains \\( \\mathrm{k}_{1,2,3} \\). Omitting some feed-in branches in Fig. 12.2 allows realization of low-pass, high-pass, or band-pass biquads.\n\n#### EXAMPLE 12.1\n\nDetermine the gain coefficients in the Fig. 12.2 biquad required for a low-pass transfer function with a dc gain of 6 dB, \\( Q=1 / \\sqrt{2} \\), and a 3-dB bandwidth of \\( \\omega_{3-\\mathrm{dB}}=10^{6} \\) rad/sec.\n\n#### Solution\n\nA low-pass biquad is achieved with \\( \\mathrm{k}_{1}=\\mathrm{k}_{2}=0 \\).\n\n$$\n\\begin{equation*}\nH(s)=\\frac{k_{0}}{s^{2}+\\left(\\frac{\\omega_{0}}{Q}\\right) s+\\omega_{0}^{2}} \\tag{12.3}\n\\end{equation*}\n$$\n\nThe 3-dB bandwidth is the frequency at which the denominator's magnitude is \\( \\sqrt{2} \\) times its dc value. For \\( Q=1 / \\sqrt{2} \\), this is solved by\n\n$$\n\\begin{align*}\n\\left|-\\omega_{3-\\mathrm{dB}}^{2}+\\mathrm{j} \\sqrt{2} \\omega_{0} \\omega_{3-\\mathrm{dB}}+\\omega_{\\mathrm{o}}^{2}\\right| & =\\sqrt{2} \\omega_{\\mathrm{o}}^{2}  \\tag{12.4}\\\\\n\\Rightarrow \\omega_{3-\\mathrm{dB}} & =\\omega_{0}\n\\end{align*}\n$$\n\nThus, \\( \\omega_{0}=10^{6} \\). For a dc gain of 6 dB, \\( \\mathrm{k}_{0} / \\omega_{0}^{2}=2 \\Rightarrow \\mathrm{k}_{0}=2 \\omega_{0}^{2} \\). The block diagram in Fig. 12.2 can be simplified by incorporating a gain \\( \\omega_{0} \\) into each integrator, resulting in the biquad of Fig. 12.3."
},
{
    "text": "Second-order filters, also known as biquadratic filters or simply biquads, derive their name from their transfer function, which is the ratio of two quadratic polynomials. The practical implementation of this filter is depicted in Fig. 12.2, with its transfer function detailed as follows:\nimage_name:Fig. 12.1\ndescription:Fig. 12.1 illustrates a general first-order continuous-time filter, comprising several key components:\n\n1. **Input and Output Ports:**\n- **Input Port:** Marked as \\( V_{in}(s) \\), this is the entry point for the input signal.\n- **Output Port:** Designated as \\( V_{out}(s) \\), this is where the filtered output signal emerges.\n\n2. **Summing Junction:**\n- The input signal \\( V_{in}(s) \\) is divided into two paths. One path directly enters the summing junction, while the other is multiplied by \\( k_1 s \\) before reaching it.\n- The summing junction aggregates the weighted input signal \\( k_0 \\) and the feedback signal from the output, which is multiplied by \\(-\\omega_0\\).\n\n3. **Integrator Block:**\n- Represented by the \\( 1/s \\) block, this component integrates the signal from the summing junction, playing a critical role in the system's dynamics.\n\n4. **Feedback Path:**\n- A feedback loop is established, where the output \\( V_{out}(s) \\) is redirected to the summing junction after being scaled by \\(-\\omega_0\\). This feedback is essential for defining the system's frequency response.\n\n**Information Flow:**\n- The input \\( V_{in}(s) \\) undergoes processing through two paths: one direct to the summing junction and the other via a gain \\( k_1 s \\).\n- The summing junction merges these inputs with the feedback signal, generating a composite signal.\n- This composite signal is then integrated by the \\( 1/s \\) block.\n- The integrator's output, \\( V_{out}(s) \\), is also looped back into the system as part of the feedback.\n\n**System Function Overview:**\n- This system operates as a first-order filter, leveraging both feedforward and feedback paths to alter the input signal's frequency characteristics. The feedback loop is particularly important for determining the filter's stability and frequency response. The constants \\( k_0 \\), \\( k_1 \\), and \\( \\omega_0 \\) influence the filter's gain and cutoff frequency. The configuration of these components enables the system to transform the input signal into the desired output, emphasizing or attenuating specific frequencies.\n\nimage_name:Fig. 12.2\ndescription:Fig. 12.2 presents a block diagram of a general second-order (biquadratic) continuous-time filter. This filter is designed to process an input signal \\( V_{in}(s) \\) and generate an output signal \\( V_{out}(s) \\) through a series of operations involving amplification and integration.\n\n**Key Components:**\n1. **Input Signal \\( V_{in}(s) \\):** The signal that undergoes filtering upon entering the system.\n2. **Summing Junction:** The input signal \\( V_{in}(s) \\) is split and directed to a summing junction, where it is combined with two other signals: one scaled by \\( k_0 \\) and another by \\( k_1 s \\).\n3. **Gain Blocks:**\n- **\\( k_0 \\) Gain Block:** Scales the input signal by a constant \\( k_0 \\).\n- **\\( k_1 s \\) Gain Block:** Scales the input signal in proportion to the complex frequency variable \\( s \\), effectively differentiating it.\n4. **Integrator Block \\( \\frac{1}{s} \\):** Integrates the signal from the summing junction's output, with integration in the Laplace domain represented as division by \\( s \\).\n5. **Feedback Path:** A feedback loop is formed by feeding the integrator's output back to the summing junction after scaling by \\(-\\omega_0\\).\n\n**Information and Control Flow:**\n- The input \\( V_{in}(s) \\) is split into two paths. One path goes directly to the summing junction after being multiplied by \\( k_0 \\), and the other is multiplied by \\( k_1 s \\) before reaching the summing junction.\n- The summing junction combines these scaled inputs with the feedback signal, which is the integrator's output scaled by \\(-\\omega_0\\).\n- The combined signal is then integrated by the \\( \\frac{1}{s} \\) block, producing the output \\( V_{out}(s) \\).\n- The feedback loop ensures continuous adjustment of \\( V_{out}(s) \\) based on the difference between the input and feedback signals, achieving the desired filter characteristics.\n\n**System Function Overview:**\nThe primary role of this second-order filter is to modify the input signal \\( V_{in}(s) \\)'s frequency characteristics according to the specified transfer function. The arrangement of gain blocks, the integrator, and the feedback loop allows the filter to selectively enhance or attenuate certain frequencies, shaping the output signal \\( V_{out}(s) \\) for specific applications.\n\nFig. 12.1 A block diagram of a general first-order continuous-time filter.\nimage_name:Fig. 12.2\ndescription:The block diagram labeled \"Fig. 12.2\" represents a general second-order (biquadratic) continuous-time filter. This filter is designed to alter the frequency characteristics of an input signal \\( V_{in}(s) \\) and produce an output signal \\( V_{out}(s) \\) based on a specified transfer function.\n\nMain Components:\n1. **Summing Junctions**: The diagram includes two summing junctions. The first combines the input signal \\( V_{in}(s) \\) with feedback signals, while the second merges the first integrator's output with additional feedback.\n2. **Integrators**: Two integrator blocks, each labeled \\( 1/s \\), are crucial for the filter's implementation.\n3. **Feedback Paths**: Multiple feedback paths are present, labeled with specific parameters \\( -\\omega_0, -\\omega_0/Q \\), and gains \\( k_0/\\omega_0, k_1, k_2s \\).\n\nInformation and Control Flow:\n- The input signal \\( V_{in}(s) \\) is directed to the first summing junction, where it is combined with feedback signals.\n- The first summing junction's output is processed through the first integrator \\( 1/s \\), producing an intermediate signal.\n- This intermediate signal is then fed into the second summing junction, where it is combined with further feedback signals.\n- The second summing junction's output is processed through the second integrator \\( 1/s \\), resulting in the output signal \\( V_{out}(s) \\).\n- Feedback paths control the filter's characteristics, with specific gains applied to shape the frequency response.\n\nLabels, Annotations, and Key Indicators:\n- **Gain Values**: The diagram includes gain values such as \\( k_0/\\omega_0, k_1, k_2s \\), which adjust the filter's response.\n- **Feedback Parameters**: \\( -\\omega_0, -\\omega_0/Q \\) define the feedback characteristics, crucial for determining the system's poles and zeros.\n\nSystem Function Overview:\nThe main function of this second-order filter is to selectively enhance or attenuate certain frequency components of the input signal \\( V_{in}(s) \\). This is achieved through the configuration of integrators, feedback loops, and gain blocks, collectively defining the transfer function \\( H(s) \\). The filter can shape the output signal \\( V_{out}(s) \\) to meet specific needs, such as in audio processing, communication systems, or signal conditioning.\n\nFig. 12.2 A block diagram of a general second-order (biquadratic) continuous-time filter.\n\n$$\n\\begin{equation*}\nH(s) \\equiv \\frac{V_{\\text {out }}(s)}{V_{\\text {in }}(s)}=\\frac{k_{2} s^{2}+k_{1} s+k_{0}}{s^{2}+\\left(\\frac{\\omega_{0}}{Q}\\right) s+\\omega_{0}^{2}} \\tag{12.2}\n\\end{equation*}\n$$\n\nThe system's poles, like any linear system, are determined by considering the undriven behavior, $\\mathrm{V}_{\\text {in }}=0$, and are independent of the feed-in gains, $\\mathrm{k}_{1,2,3}$. Two integrators are necessary to realize the two poles. For stability, $\\omega_{0} / Q$ must be positive, implying that one of the integrators in Fig. 12.2 must have negative feedback, making it lossy. A large feedback coefficient $\\omega_{0} / Q$ indicates a very lossy integrator and a low $Q$-factor. With $Q<1 / 2$, the poles are real, whereas with $\\mathrm{Q}>1 / 2$, the poles form a complex-conjugate pair, as shown in Fig. 4.9.\n\nThe numerator of (12.2) and thus the zeros of the biquad are determined by the feed-in gains $\\mathrm{k}_{1,2,3}$. By omitting some feed-in branches in Fig. 12.2, the filter can realize low-pass, high-pass, or band-pass configurations.\n\n#### EXAMPLE 12.1\n\nDetermine the gain coefficients in the biquad of Fig. 12.2 required for a low-pass transfer function with a dc gain of $6 \\mathrm{~dB}$, $Q=1 / \\sqrt{2}$, and a $3-\\mathrm{dB}$ bandwidth of $\\omega_{3-\\mathrm{dB}}=10^{6} \\mathrm{rad} / \\mathrm{sec}$.\n\n#### Solution\n\nA low-pass biquad is achieved with $\\mathrm{k}_{1}=\\mathrm{k}_{2}=0$.\n\n$$\n\\begin{equation*}\nH(s)=\\frac{k_{0}}{s^{2}+\\left(\\frac{\\omega_{0}}{Q}\\right) s+\\omega_{0}^{2}} \\tag{12.3}\n\\end{equation*}\n$$\n\nThe $3-\\mathrm{dB}$ bandwidth is the frequency at which the denominator's magnitude is $\\sqrt{2}$ times its dc value. For $Q=1 / \\sqrt{2}$, this is solved by\n\n$$\n\\begin{align*}\n\\left|-\\omega_{3-\\mathrm{dB}}^{2}+\\mathrm{j} \\sqrt{2} \\omega_{0} \\omega_{3-\\mathrm{dB}}+\\omega_{\\mathrm{o}}^{2}\\right| & =\\sqrt{2} \\omega_{\\mathrm{o}}^{2}  \\tag{12.4}\\\\\n\\Rightarrow \\omega_{3-\\mathrm{dB}} & =\\omega_{0}\n\\end{align*}\n$$\n\nThus, $\\omega_{0}=10^{6}$. For a dc gain of $6 \\mathrm{~dB}$, $\\mathrm{k}_{0} / \\omega_{0}^{2}=2 \\Rightarrow \\mathrm{k}_{0}=2 \\omega_{0}^{2}$. The block diagram in Fig. 12.2 can be simplified by incorporating a gain $\\omega_{0}$ into each integrator, resulting in the biquad of Fig. 12.3."
},
{
    "text": "Second-order filters, also known as biquadratic filters or simply biquads, derive their name from their transfer function, which is the ratio of two quadratic polynomials. The practical implementation of this filter is depicted in Fig. 12.2. The transfer function for this second-order filter is expressed as\nimage_name:Fig. 12.1\ndescription:Fig. 12.1 illustrates a general first-order continuous-time filter block diagram, comprising the following primary components:\n\n1. **Input and Output Ports:**\n- **Input Port:** Marked \\( V_{in}(s) \\), this is the entry point for the input signal.\n- **Output Port:** Marked \\( V_{out}(s) \\), this is where the filtered output signal emerges.\n\n2. **Summing Junction:**\n- The input signal \\( V_{in}(s) \\) is divided into two paths. One path directly enters the summing junction, while the other is multiplied by \\( k_1 s \\) before reaching it.\n- The summing junction aggregates the weighted input signal \\( k_0 \\) and the feedback signal from the output, multiplied by \\(-\\omega_0\\).\n\n3. **Integrator Block:**\n- Represented by the block labeled \\( 1/s \\), this component integrates the signal from the summing junction, playing a key role in the system's dynamic behavior.\n\n4. **Feedback Path:**\n- A feedback loop is established where the output \\( V_{out}(s) \\) is routed back to the summing junction after being multiplied by \\(-\\omega_0\\). This feedback is essential for defining the system's frequency response.\n\n**Information Flow:**\n- The input \\( V_{in}(s) \\) traverses two paths: one directly to the summing junction and the other through a gain \\( k_1 s \\).\n- The summing junction merges these inputs with the feedback signal, generating a combined signal.\n- This combined signal is then processed by the \\( 1/s \\) integrator block.\n- The integrator's output, \\( V_{out}(s) \\), is also fed back into the system as part of the feedback loop.\n\n**System Function Overview:**\n- This system acts as a first-order filter, utilizing both feedforward and feedback paths to alter the input signal's frequency characteristics. The feedback loop is particularly important for determining the filter's stability and frequency response. The constants \\( k_0 \\), \\( k_1 \\), and \\( \\omega_0 \\) influence the filter's gain and cutoff frequency. The arrangement of these components enables the system to transform the input signal into a desired output signal, emphasizing or attenuating specific frequency components.\nimage_name:Fig. 12.2\ndescription:Fig. 12.2 showcases a general second-order (biquadratic) continuous-time filter block diagram. This filter processes an input signal \\( V_{in}(s) \\) to produce an output signal \\( V_{out}(s) \\) through a series of operations involving amplification and integration.\n\n**Key Components:**\n1. **Input Signal \\( V_{in}(s) \\):** The signal entering the system for filtering.\n2. **Summing Junction:** The input signal \\( V_{in}(s) \\) is split and directed to a summing junction, where it is combined with two other signals scaled by \\( k_0 \\) and \\( k_1 s \\).\n3. **Gain Blocks:**\n- **\\( k_0 \\) Gain Block:** Scales the input signal by a constant factor \\( k_0 \\).\n- **\\( k_1 s \\) Gain Block:** Scales the input signal proportionally to the complex frequency variable \\( s \\), effectively differentiating it.\n4. **Integrator Block \\( \\frac{1}{s} \\):** Integrates the signal from the summing junction's output, with integration in the Laplace domain represented as division by \\( s \\).\n5. **Feedback Path:** A feedback loop is formed by feeding the integrator's output back to the summing junction after scaling by \\(-\\omega_0\\).\n\n**Information and Control Flow:**\n- The input \\( V_{in}(s) \\) is split into two paths. One path goes directly to the summing junction after being multiplied by \\( k_0 \\), and the other is multiplied by \\( k_1 s \\) before reaching the summing junction.\n- The summing junction merges these scaled inputs with the feedback signal, which is the integrator's output scaled by \\(-\\omega_0\\).\n- The combined signal is then integrated by the \\( \\frac{1}{s} \\) block, producing the output \\( V_{out}(s) \\).\n- The feedback loop ensures continuous adjustment of \\( V_{out}(s) \\) based on the difference between the input and feedback signals, achieving the desired filter characteristics.\n\n**System Function Overview:**\nThe primary role of this second-order filter is to modify the frequency characteristics of the input signal \\( V_{in}(s) \\) according to a specified transfer function. The configuration of gain blocks, the integrator, and the feedback loop allows the filter to selectively enhance or attenuate certain frequency components, shaping the output signal \\( V_{out}(s) \\) for specific applications.\n\nFig. 12.1 A block diagram of a general first-order continuous-time filter.\nimage_name:Fig. 12.2\ndescription:The block diagram labeled \"Fig. 12.2\" represents a general second-order (biquadratic) continuous-time filter. This filter is designed to modify the frequency characteristics of an input signal \\( V_{in}(s) \\) and produce an output signal \\( V_{out}(s) \\) according to a specified transfer function.\n\nMain Components:\n1. **Summing Junctions:** The diagram features two summing junctions. The first combines the input signal \\( V_{in}(s) \\) with feedback signals, while the second merges the output from the first integrator with additional feedback.\n2. **Integrators:** Two integrator blocks, each labeled \\( 1/s \\), are crucial for the continuous-time filter implementation.\n3. **Feedback Paths:** Multiple feedback paths are present, labeled with specific parameters \\( -\\omega_0, -\\omega_0/Q \\), and gains \\( k_0/\\omega_0, k_1, k_2s \\).\n\nInformation and Control Flow:\n- The input signal \\( V_{in}(s) \\) enters the first summing junction, where it is combined with feedback signals.\n- The output from the first summing junction is processed through the first integrator \\( 1/s \\), generating an intermediate signal.\n- This intermediate signal is then fed into the second summing junction, where it is combined with additional feedback signals.\n- The output from the second summing junction is processed through the second integrator \\( 1/s \\), resulting in the output signal \\( V_{out}(s) \\).\n- Feedback paths control the filter's characteristics, with specific gains applied at various points to shape the frequency response.\n\nLabels, Annotations, and Key Indicators:\n- **Gain Values:** The diagram includes gain values such as \\( k_0/\\omega_0, k_1, k_2s \\), which adjust the filter's response.\n- **Feedback Parameters:** \\( -\\omega_0, -\\omega_0/Q \\) define the feedback characteristics, crucial for determining the system's poles and zeros.\n\nSystem Function Overview:\nThe main function of this second-order filter is to selectively enhance or attenuate certain frequency components of the input signal \\( V_{in}(s) \\). This is achieved through the arrangement of integrators, feedback loops, and gain blocks, collectively defining the transfer function \\( H(s) \\). The filter can shape the output signal \\( V_{out}(s) \\) to meet specific application requirements, such as in audio processing, communication systems, or signal conditioning.\n\nFig. 12.2 A block diagram of a general second-order (biquadratic) continuous-time filter.\n\n$$\n\\begin{equation*}\nH(s) \\equiv \\frac{V_{\\text {out }}(s)}{V_{\\text {in }}(s)}=\\frac{k_{2} s^{2}+k_{1} s+k_{0}}{s^{2}+\\left(\\frac{\\omega_{0}}{Q}\\right) s+\\omega_{0}^{2}} \\tag{12.2}\n\\end{equation*}\n$$\n\nThe system's poles, like any linear system, can be determined by examining its undriven behavior, \\( V_{\\text {in }}=0 \\), and are thus independent of the feed-in gains, \\( k_{1,2,3} \\). Two integrators are necessary to realize the two poles. For stability, \\( \\omega_{0} / Q \\) must be positive, indicating that one of the two integrators in Fig. 12.2 must have negative feedback, making it lossy. A large feedback coefficient \\( \\omega_{0} / Q \\) implies a highly lossy integrator and, consequently, a low \\( Q \\)-factor. With \\( Q<1 / 2 \\), the two poles are real, whereas with \\( Q>1 / 2 \\), the poles form a complex-conjugate pair, as illustrated in Fig. 4.9.\n\nThe numerator of (12.2) and thus the zeros of the biquad are determined by the feed-in gains \\( k_{1,2,3} \\). By omitting some feed-in branches in Fig. 12.2, the filter can be configured to realize low-pass, high-pass, or band-pass biquads.\n\n#### EXAMPLE 12.1\n\nDetermine the gain coefficients in the biquad of Fig. 12.2 required for a low-pass transfer function with a dc gain of 6 dB, \\( Q=1 / \\sqrt{2} \\), and a 3-dB bandwidth of \\( \\omega_{3-\\mathrm{dB}}=10^{6} \\) rad/sec.\n\n#### Solution\n\nA low-pass biquad is achieved with \\( k_{1}=k_{2}=0 \\).\n\n$$\n\\begin{equation*}\nH(s)=\\frac{k_{0}}{s^{2}+\\left(\\frac{\\omega_{0}}{Q}\\right) s+\\omega_{0}^{2}} \\tag{12.3}\n\\end{equation*}\n$$\n\nThe 3-dB bandwidth is the frequency at which the denominator's magnitude is \\( \\sqrt{2} \\) times its dc value. For \\( Q=1 / \\sqrt{2} \\), this is solved by\n\n$$\n\\begin{align*}\n\\left|-\\omega_{3-\\mathrm{dB}}^{2}+\\mathrm{j} \\sqrt{2} \\omega_{0} \\omega_{3-\\mathrm{dB}}+\\omega_{\\mathrm{o}}^{2}\\right| & =\\sqrt{2} \\omega_{\\mathrm{o}}^{2}  \\tag{12.4}\\\\\n\\Rightarrow \\omega_{3-\\mathrm{dB}} & =\\omega_{0}\n\\end{align*}\n$$\n\nThus, \\( \\omega_{0}=10^{6} \\). For a dc gain of 6 dB, \\( k_{0} / \\omega_{0}^{2}=2 \\Rightarrow k_{0}=2 \\omega_{0}^{2} \\). The block diagram in Fig. 12.2 can be simplified by incorporating a gain \\( \\omega_{0} \\) into each integrator, resulting in the biquad shown in Fig. 12.3."
},
{
    "text": "Second-order filters, also known as biquadratic filters or simply biquads, are characterized by their transfer function being the ratio of two quadratic polynomials. The practical implementation of this filter is depicted in Fig. 12.2. The transfer function for this second-order filter is expressed as\nimage_name:Fig. 12.1\ndescription:The block diagram in Fig. 12.1 illustrates a general first-order continuous-time filter, comprising the following key components:\n\n1. **Input and Output Ports:**\n- **Input Port:** Marked as \\( V_{in}(s) \\), this is the entry point for the input signal into the system.\n- **Output Port:** Marked as \\( V_{out}(s) \\), this is where the filtered output signal emerges from the system.\n\n2. **Summing Junction:**\n- The input signal \\( V_{in}(s) \\) is divided into two paths. One path directly enters the summing junction, while the other is multiplied by \\( k_1 s \\) before reaching the junction.\n- The summing junction aggregates the weighted input signal \\( k_0 \\) and the feedback signal from the output, which is multiplied by \\(-\\omega_0\\).\n\n3. **Integrator Block:**\n- Represented by the block labeled \\( 1/s \\), this component integrates the signal from the summing junction, playing a vital role in the system's dynamic behavior.\n\n4. **Feedback Path:**\n- A feedback loop exists where the output \\( V_{out}(s) \\) is fed back into the summing junction after being multiplied by \\(-\\omega_0\\). This feedback is essential for defining the system's frequency response characteristics.\n\n**Flow of Information:**\n- The input \\( V_{in}(s) \\) undergoes processing through two paths: one directly to the summing junction and the other via a gain \\( k_1 s \\).\n- The summing junction merges these inputs with the feedback signal, generating a combined signal.\n- This combined signal is then integrated by the \\( 1/s \\) block.\n- The output of the integrator, \\( V_{out}(s) \\), is also part of the feedback loop.\n\n**Overall System Function:**\n- This system operates as a first-order filter, leveraging both feedforward and feedback paths to alter the input signal's frequency characteristics. The feedback loop, in particular, aids in determining the filter's stability and frequency response. The constants \\( k_0 \\), \\( k_1 \\), and \\( \\omega_0 \\) are parameters influencing the filter's gain and cutoff frequency. The configuration of these components enables the system to transform the input signal into a desired output signal, emphasizing or attenuating specific frequency components.\nimage_name:Fig. 12.2\ndescription:The block diagram in Fig. 12.2 depicts a general second-order (biquadratic) continuous-time filter. This filter processes an input signal \\( V_{in}(s) \\) to produce an output signal \\( V_{out}(s) \\) through a series of operations involving amplification and integration.\n\n**Main Components:**\n1. **Input Signal \\( V_{in}(s) \\):** This signal enters the system for filtering.\n2. **Summing Junction:** The input signal \\( V_{in}(s) \\) is split and directed to a summing junction, where it is combined with two other signals: one scaled by \\( k_0 \\) and another by \\( k_1 s \\).\n3. **Gain Blocks:**\n- **\\( k_0 \\) Gain Block:** This block scales the input signal by a constant \\( k_0 \\).\n- **\\( k_1 s \\) Gain Block:** This block scales the input signal in proportion to the complex frequency variable \\( s \\), effectively differentiating it.\n4. **Integrator Block \\( \\frac{1}{s} \\):** This block integrates the signal from the summing junction output, with integration in the Laplace domain represented as division by \\( s \\).\n5. **Feedback Path:** A feedback loop is established by feeding the integrator's output back into the summing junction after scaling by \\(-\\omega_0\\).\n\n**Flow of Information or Control:**\n- The input \\( V_{in}(s) \\) is split into two paths. One path goes directly to the summing junction after being multiplied by \\( k_0 \\), and the other is multiplied by \\( k_1 s \\) before reaching the junction.\n- The summing junction combines these scaled inputs with the feedback signal, which is the integrator's output scaled by \\(-\\omega_0\\).\n- The combined signal is then integrated by the \\( \\frac{1}{s} \\) block, producing the output \\( V_{out}(s) \\).\n- The feedback loop ensures continuous adjustment of \\( V_{out}(s) \\) based on the difference between the input and feedback signals, achieving the desired filter characteristics.\n\n**Overall System Function:**\nThe primary role of this second-order filter is to modify the frequency characteristics of the input signal \\( V_{in}(s) \\) according to a specified transfer function. The arrangement of gain blocks, the integrator, and the feedback loop enables the filter to selectively enhance or attenuate certain frequency components, shaping the output signal \\( V_{out}(s) \\) for specific applications.\n\nFig. 12.1 A block diagram of a general first-order continuous-time filter.\nimage_name:Fig. 12.2\ndescription:The block diagram labeled \"Fig. 12.2\" represents a general second-order (biquadratic) continuous-time filter. This filter is designed to alter the frequency characteristics of an input signal \\( V_{in}(s) \\) and produce an output signal \\( V_{out}(s) \\) according to a specified transfer function.\n\nMain Components:\n1. **Summing Junctions**: The diagram includes two summing junctions. The first combines the input signal \\( V_{in}(s) \\) with feedback signals, and the second merges the output from the first integrator with additional feedback.\n2. **Integrators**: Two integrator blocks, each labeled \\( 1/s \\), are present, crucial for the continuous-time filter implementation.\n3. **Feedback Paths**: Multiple feedback paths are featured, labeled with specific parameters \\( -\\omega_0, -\\omega_0/Q \\), and gains \\( k_0/\\omega_0, k_1, k_2s \\).\n\nFlow of Information or Control:\n- The input signal \\( V_{in}(s) \\) is directed to the first summing junction, where it is combined with feedback signals.\n- The output of the first summing junction is processed through the first integrator \\( 1/s \\), generating an intermediate signal.\n- This intermediate signal is then fed into the second summing junction, where it is combined with additional feedback signals.\n- The output of the second summing junction is processed through the second integrator \\( 1/s \\), resulting in the output signal \\( V_{out}(s) \\).\n- Feedback paths control the filter's characteristics, with specific gains applied at various points to shape the frequency response.\n\nLabels, Annotations, and Key Indicators:\n- **Gain Values**: The diagram includes gain values such as \\( k_0/\\omega_0, k_1, k_2s \\), which adjust the filter's response.\n- **Feedback Parameters**: \\( -\\omega_0, -\\omega_0/Q \\) define the feedback characteristics, crucial for determining the system's poles and zeros.\n\nOverall System Function:\nThe main function of this second-order filter is to selectively enhance or attenuate certain frequency components of the input signal \\( V_{in}(s) \\). This is achieved through the configuration of integrators, feedback loops, and gain blocks, collectively defining the transfer function \\( H(s) \\). The filter can shape the output signal \\( V_{out}(s) \\) to meet specific application requirements, such as in audio processing, communication systems, or signal conditioning.\n\nFig. 12.2 A block diagram of a general second-order (biquadratic) continuous-time filter.\n\n$$\n\\begin{equation*}\nH(s) \\equiv \\frac{V_{\\text {out }}(s)}{V_{\\text {in }}(s)}=\\frac{k_{2} s^{2}+k_{1} s+k_{0}}{s^{2}+\\left(\\frac{\\omega_{0}}{Q}\\right) s+\\omega_{0}^{2}} \\tag{12.2}\n\\end{equation*}\n$$\n\nThe system's poles, like any linear system, can be determined by examining the system's undriven behavior, \\( \\mathrm{V}_{\\text {in }}=0 \\), and are thus independent of the feed-in gains, \\( \\mathrm{k}_{1,2,3} \\). Two integrators are necessary to realize the two poles. To ensure stability, \\( \\omega_{0} / Q \\) must be positive, implying that one of the two integrators in Fig. 12.2 must have negative feedback, making it lossy. A large feedback coefficient \\( \\omega_{0} / Q \\) indicates a very lossy integrator and, consequently, a low \\( Q \\)-factor. With \\( Q<1 / 2 \\), the two poles are real, whereas with \\( \\mathrm{Q}>1 / 2 \\), the poles form a complex-conjugate pair, as illustrated in Fig. 4.9.\n\nThe numerator of (12.2) and hence the zeros of the biquad are determined by the feed-in gains \\( \\mathrm{k}_{1,2,3} \\). By omitting some feed-in branches in Fig. 12.2, the filter can be configured to realize low-pass, high-pass, or band-pass biquads.\n\n#### EXAMPLE 12.1\n\nDetermine the gain coefficients in the biquad of Fig. 12.2 required to realize a low-pass transfer function with a dc gain of \\( 6 \\mathrm{~dB} \\), \\( Q=1 / \\sqrt{2} \\), and a \\( 3-\\mathrm{dB} \\) bandwidth of \\( \\omega_{3-\\mathrm{dB}}=10^{6} \\mathrm{rad} / \\mathrm{sec} \\).\n\n#### Solution\n\nA low-pass biquad is achieved with \\( \\mathrm{k}_{1}=\\mathrm{k}_{2}=0 \\).\n\n$$\n\\begin{equation*}\nH(s)=\\frac{k_{0}}{s^{2}+\\left(\\frac{\\omega_{0}}{Q}\\right) s+\\omega_{0}^{2}} \\tag{12.3}\n\\end{equation*}\n$$\n\nThe \\( 3-\\mathrm{dB} \\) bandwidth is the frequency at which the denominator's magnitude is \\( \\sqrt{2} \\) times its dc value. For \\( Q=1 / \\sqrt{2} \\), this is the solution to\n\n$$\n\\begin{align*}\n\\left|-\\omega_{3-\\mathrm{dB}}^{2}+\\mathrm{j} \\sqrt{2} \\omega_{0} \\omega_{3-\\mathrm{dB}}+\\omega_{\\mathrm{o}}^{2}\\right| & =\\sqrt{2} \\omega_{\\mathrm{o}}^{2}  \\tag{12.4}\\\\\n\\Rightarrow \\omega_{3-\\mathrm{dB}} & =\\omega_{0}\n\\end{align*}\n$$\n\nThus, in this case, \\( \\omega_{0}=10^{6} \\). Finally, for a dc gain of \\( 6 \\mathrm{~dB} \\), \\( \\mathrm{k}_{0} / \\omega_{0}^{2}=2 \\Rightarrow \\mathrm{k}_{0}=2 \\omega_{0}^{2} \\). The block diagram in Fig. 12.2 can be simplified by incorporating a gain \\( \\omega_{0} \\) into each integrator, resulting in the biquad shown in Fig. 12.3."
},
{
    "text": "This section offers a concise overview of $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filters. Here, we'll explore that the primary circuit elements of $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filters are transconductors. The fundamental roles of transconductors are outlined in this section, with subsequent sections detailing circuit methodologies for their implementation.\nimage_name:Fig. 12.3\ndescription:Fig. 12.3 illustrates a biquad filter, a second-order filter type. This filter employs the Gm-C (transconductance-capacitance) technique, widely utilized in continuous-time analog filters.\n\nKey Components:\n1. **Input Signal (Vin(s)):** The system accepts an input signal labeled Vin(s).\n2. **Summing Junctions:** The system includes two summing junctions. The initial one merges the input signal with feedback signals, while the second processes signals between the two integrators.\n3. **Integrators:** There are two integrator blocks:\n- The first integrator has a transfer function of \\(\\omega_o/s = 10^6/s\\).\n- The second integrator also features the transfer function \\(\\omega_o/s = 10^6/s\\).\n4. **Feedback Paths:** Two feedback paths exist:\n- A path with a gain of \\(-1\\) loops from the second integrator's output back to the input summing junction.\n- Another path with a gain of \\(-1/Q = \\sqrt{2}\\) links the first integrator's output to the second summing junction.\n5. **Output Signal (Vout(s)):** The output is designated as Vout(s).\n\nInformation Flow and Control:\n- The input signal Vin(s) is introduced via the first summing junction, where it blends with feedback signals.\n- The combined signal is then processed by the first integrator, whose output is both forwarded to the second summing junction and fed back with a gain of \\(-1/Q = \\sqrt{2}\\) to the second summing junction.\n- The second summing junction consolidates its inputs and directs the resulting signal to the second integrator.\n- The second integrator's output is looped back to the first summing junction with a gain of \\(-1\\) and also serves as the final output signal Vout(s).\n\nLabels, Annotations, and Key Markers:\n- The input gain factor is indicated as \\(k_o/\\omega_o^2 = 2\\).\n- Feedback gains are marked as \\(-1\\) and \\(-1/Q = \\sqrt{2}\\).\n- Integrators are annotated with their transfer functions \\(\\omega_o/s = 10^6/s\\).\n\nSystem Function Overview:\nThe biquad filter is crafted to process input signals through stages of integration and feedback loops, aiming for a particular frequency response. The configuration of integrators and feedback paths enables the filter to execute intricate filtering tasks, such as bandpass or low-pass filtering, contingent on the specific setup and component values.\n\nFig. 12.3 The biquad filter of Example 12.1."
},
{
    "text": "This segment offers a concise overview of $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filters. Here, we will explore that the primary circuit components of $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filters are transconductors. The fundamental roles of transconductors are outlined in this segment, and subsequent sections detail the circuit methodologies for implementing transconductors.\n\nimage_name:Fig. 12.3\ndescription:Illustrated as \"Fig. 12.3,\" this diagram depicts a biquad filter, a second-order filter type. This specific filter employs the Gm-C (transconductance-capacitance) technique, frequently utilized in continuous-time analog filters.\n\nKey Components:\n1. **Input Signal (Vin(s)):** The system accepts an input signal identified as Vin(s).\n2. **Summing Junctions:** The system incorporates two summing junctions. The initial one merges the input signal with feedback signals, while the second processes the signal between the two integrators.\n3. **Integrators:** There are two integrator blocks:\n- The initial integrator has a transfer function of \\(\\omega_o/s = 10^6/s\\).\n- The subsequent integrator also possesses the same transfer function \\(\\omega_o/s = 10^6/s\\).\n4. **Feedback Paths:** Two feedback paths exist:\n- A feedback path with a gain of \\(-1\\) loops from the output of the second integrator back to the input summing junction.\n- Another feedback path with a gain of \\(-1/Q = \\sqrt{2}\\) links from the output of the first integrator to the second summing junction.\n5. **Output Signal (Vout(s)):** The output signal is designated as Vout(s).\n\nInformation or Control Flow:\n- The input signal Vin(s) is introduced into the system via the first summing junction, where it blends with feedback signals.\n- The resulting signal undergoes processing by the first integrator, which then outputs a signal that is both forwarded to the second summing junction and fed back with a gain of \\(-1/Q = \\sqrt{2}\\) to the second summing junction.\n- The second summing junction merges its inputs and directs the resultant signal to the second integrator.\n- The output from the second integrator is looped back to the first summing junction with a gain of \\(-1\\) and also serves as the final output signal Vout(s).\n\nLabels, Annotations, and Critical Indicators:\n- The input gain factor is marked as \\(k_o/\\omega_o^2 = 2\\).\n- The feedback gains are indicated as \\(-1\\) and \\(-1/Q = \\sqrt{2}\\).\n- Integrators are identified by their transfer functions \\(\\omega_o/s = 10^6/s\\).\n\nComprehensive System Function:\nThe biquad filter is crafted to process the input signal via a sequence of integrations and feedback loops to attain a desired frequency response. The configuration of integrators and feedback paths enables the filter to execute intricate filtering tasks, such as bandpass or low-pass filtering, based on the specific setup and component values.\n\nFig. 12.3 The biquad filter of Example 12.1."
},
{
    "text": "This section offers a concise overview of $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filters. Here, we will explore that the primary circuit components of $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filters are transconductors. The fundamental roles of transconductors are detailed in this section, and subsequent sections will cover circuit methodologies for implementing transconductors.\n\nimage_name:Fig. 12.3\ndescription:Fig. 12.3 illustrates a biquad filter, a second-order filter type. This specific filter employs the Gm-C (transconductance-capacitance) method, widely utilized in continuous-time analog filters.\n\nKey Components:\n1. **Input Signal (Vin(s)):** The system accepts an input signal labeled Vin(s).\n2. **Summing Junctions:** The system includes two summing junctions. The initial one merges the input signal with feedback signals, while the second processes the signal between the two integrators.\n3. **Integrators:** There are two integrator blocks:\n- The first integrator features a transfer function of \\(\\omega_o/s = 10^6/s\\).\n- The second integrator shares the same transfer function, \\(\\omega_o/s = 10^6/s\\).\n4. **Feedback Paths:** Two feedback paths exist:\n- One feedback path, with a gain of \\(-1\\), loops from the second integrator's output back to the input summing junction.\n- Another feedback path, with a gain of \\(-1/Q = \\sqrt{2}\\), links from the first integrator's output to the second summing junction.\n5. **Output Signal (Vout(s)):** The system's output signal is identified as Vout(s).\n\nInformation or Control Flow:\n- The input signal Vin(s) is introduced via the first summing junction, where it blends with feedback signals.\n- The resulting signal undergoes processing by the first integrator, which forwards its output to the second summing junction and also feeds it back with a gain of \\(-1/Q = \\sqrt{2}\\) to the same junction.\n- The second summing junction merges its inputs and directs the combined signal to the second integrator.\n- The second integrator's output is both fed back to the first summing junction with a gain of \\(-1\\) and serves as the final output signal Vout(s).\n\nLabels, Annotations, and Key Markers:\n- The input gain factor is indicated as \\(k_o/\\omega_o^2 = 2\\).\n- Feedback gains are marked as \\(-1\\) and \\(-1/Q = \\sqrt{2}\\).\n- Integrators are annotated with their transfer functions, \\(\\omega_o/s = 10^6/s\\).\n\nSystem Function Overview:\nThe biquad filter is structured to process the input signal via integrations and feedback loops, targeting a particular frequency response. The configuration of integrators and feedback paths enables the filter to execute intricate filtering tasks, such as bandpass or low-pass filtering, contingent on the specific setup and component values.\n\nFig. 12.3 The biquad filter of Example 12.1."
},
{
    "text": "This section offers a concise overview of $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filters. Here, we will explore that the primary circuit components of $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filters are transconductors. The fundamental roles of transconductors are outlined in this section, and subsequent sections detail the circuit methodologies for implementing transconductors.\n\nimage_name:Fig. 12.3\ndescription:The illustration labeled \"Fig. 12.3\" depicts a biquad filter, a type of second-order filter. This specific filter is constructed using the Gm-C (transconductance-capacitance) technique, frequently employed in continuous-time analog filters.\n\nKey Components:\n1. **Input Signal (Vin(s)):** The system accepts an input signal designated as Vin(s).\n2. **Summing Junctions:** The system comprises two summing junctions. The initial one merges the input signal with feedback signals, while the second processes the signal between the two integrators.\n3. **Integrators:** There are two integrator blocks:\n- The first integrator has a transfer function of \\(\\omega_o/s = 10^6/s\\).\n- The second integrator also possesses the same transfer function \\(\\omega_o/s = 10^6/s\\).\n4. **Feedback Paths:** Two feedback paths exist:\n- A feedback path with a gain of \\(-1\\) loops from the output of the second integrator back to the input summing junction.\n- Another feedback path with a gain of \\(-1/Q = \\sqrt{2}\\) links from the output of the first integrator to the second summing junction.\n5. **Output Signal (Vout(s)):** The output signal is identified as Vout(s).\n\nInformation or Control Flow:\n- The input signal Vin(s) enters the system via the first summing junction, where it blends with feedback signals.\n- The resulting signal is then handled by the first integrator, which produces a signal that is both fed forward to the second summing junction and fed back with a gain of \\(-1/Q = \\sqrt{2}\\) to the second summing junction.\n- The second summing junction merges its inputs and forwards the resultant signal to the second integrator.\n- The output from the second integrator is fed back to the first summing junction with a gain of \\(-1\\) and also serves as the final output signal Vout(s).\n\nLabels, Annotations, and Significant Indicators:\n- The gain factor at the input is marked as \\(k_o/\\omega_o^2 = 2\\).\n- The feedback gains are indicated as \\(-1\\) and \\(-1/Q = \\sqrt{2}\\).\n- Integrators are annotated with their transfer functions \\(\\omega_o/s = 10^6/s\\).\n\nOverall System Functionality:\nThe biquad filter is engineered to process the input signal through successive integrations and feedback loops to attain a particular frequency response. The configuration of integrators and feedback paths enables the filter to execute intricate filtering tasks, such as bandpass or low-pass filtering, based on the specific setup and component values.\n\nFig. 12.3 The biquad filter of Example 12.1."
},
{
    "text": "This segment offers a concise overview of $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filters. Here, we'll explore that the primary circuit components of $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filters are transconductors. The fundamental roles of transconductors are outlined in this section, and subsequent sections detail the circuit methodologies for implementing transconductors.\n\nimage_name:Fig. 12.3\ndescription:The illustration labeled \"Fig. 12.3\" depicts a biquad filter, a second-order filter type. This specific filter employs the Gm-C (transconductance-capacitance) technique, widely utilized in continuous-time analog filters.\n\nKey Components:\n1. **Input Signal (Vin(s)):** The system accepts an input signal identified as Vin(s).\n2. **Summing Junctions:** The system incorporates two summing junctions. The initial one merges the input signal with feedback signals, while the second processes the signal between the two integrators.\n3. **Integrators:** There are two integrator blocks:\n   - The first integrator has a transfer function of \\(\\omega_o/s = 10^6/s\\).\n   - The second integrator also features the same transfer function \\(\\omega_o/s = 10^6/s\\).\n4. **Feedback Paths:** Two feedback paths exist:\n   - A feedback path with a gain of \\(-1\\) loops from the second integrator's output back to the input summing junction.\n   - Another feedback path with a gain of \\(-1/Q = \\sqrt{2}\\) links from the first integrator's output to the second summing junction.\n5. **Output Signal (Vout(s)):** The output signal is designated as Vout(s).\n\nInformation or Control Flow:\n- The input signal Vin(s) is introduced into the system via the first summing junction, where it blends with feedback signals.\n- The resulting signal undergoes processing by the first integrator, which then outputs a signal routed to the second summing junction and also fed back with a gain of \\(-1/Q = \\sqrt{2}\\) to the second summing junction.\n- The second summing junction consolidates its inputs and forwards the resulting signal to the second integrator.\n- The output from the second integrator is looped back to the first summing junction with a gain of \\(-1\\) and concurrently serves as the final output signal Vout(s).\n\nLabels, Annotations, and Key Markers:\n- The input gain factor is indicated as \\(k_o/\\omega_o^2 = 2\\).\n- The feedback gains are marked as \\(-1\\) and \\(-1/Q = \\sqrt{2}\\).\n- Integrators are identified by their transfer functions \\(\\omega_o/s = 10^6/s\\).\n\nSystem Function Overview:\nThe biquad filter is crafted to process the input signal via successive integrations and feedback loops to attain a desired frequency response. The configuration of integrators and feedback paths enables the filter to execute intricate filtering tasks, such as bandpass or low-pass filtering, based on the specific setup and component values.\n\nFig. 12.3 The biquad filter of Example 12.1."
},
{
    "text": "This section offers a concise overview of $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filters. Here, we will observe that the primary circuit components of $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filters are transconductors. The fundamental roles of transconductors are outlined in this section, with subsequent sections detailing circuit methods for their implementation.\n\nimage_name:Fig. 12.3\ndescription:The illustration marked \"Fig. 12.3\" depicts a biquad filter, a second-order filter type. This specific filter employs the Gm-C (transconductance-capacitance) technique, frequently utilized in continuous-time analog filters.\n\nKey Components:\n1. **Input Signal (Vin(s)):** The system accepts an input signal labeled Vin(s).\n2. **Summing Junctions:** The system includes two summing junctions. The initial one merges the input signal with feedback signals, while the second processes the signal between the two integrators.\n3. **Integrators:** There are two integrator blocks:\n- The first integrator has a transfer function of \\(\\omega_o/s = 10^6/s\\).\n- The second integrator shares the same transfer function \\(\\omega_o/s = 10^6/s\\).\n4. **Feedback Paths:** Two feedback paths exist:\n- A feedback path with a gain of \\(-1\\) loops from the second integrator's output back to the input summing junction.\n- Another feedback path with a gain of \\(-1/Q = \\sqrt{2}\\) links from the first integrator's output to the second summing junction.\n5. **Output Signal (Vout(s)):** The output signal is identified as Vout(s).\n\nInformation or Control Flow:\n- The input signal Vin(s) is introduced into the system via the first summing junction, where it blends with feedback signals.\n- The resulting signal undergoes processing by the first integrator, which then forwards its output to the second summing junction and also feeds it back with a gain of \\(-1/Q = \\sqrt{2}\\) to the same junction.\n- The second summing junction consolidates its inputs and transmits the resulting signal to the second integrator.\n- The second integrator's output is both fed back to the first summing junction with a gain of \\(-1\\) and serves as the final output signal Vout(s).\n\nLabels, Annotations, and Significant Markers:\n- The input gain factor is indicated as \\(k_o/\\omega_o^2 = 2\\).\n- The feedback gains are marked as \\(-1\\) and \\(-1/Q = \\sqrt{2}\\).\n- Integrators are annotated with their transfer functions \\(\\omega_o/s = 10^6/s\\).\n\nOverall System Operation:\nThe biquad filter is crafted to process the input signal through successive integrations and feedback loops, targeting a particular frequency response. The configuration of integrators and feedback paths enables the filter to execute intricate filtering tasks, such as bandpass or low-pass filtering, based on the specific setup and component values.\n\nFig. 12.3 The biquad filter of Example 12.1."
},
{
    "text": "This section offers a concise overview of $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filters. Here, we will explore that the primary circuit elements of $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filters are transconductors. The fundamental roles of transconductors are outlined in this section, and the methodologies for constructing transconductors are detailed in subsequent sections.\n\nimage_name:Fig. 12.3\ndescription:The illustration marked \"Fig. 12.3\" depicts a biquad filter, a second-order filter type. This specific filter is realized using the Gm-C (transconductance-capacitance) method, frequently employed in continuous-time analog filters.\n\nKey Components:\n1. **Input Signal (Vin(s)):** The system accepts an input signal identified as Vin(s).\n2. **Summing Junctions:** The system incorporates two summing junctions. The initial one merges the input signal with feedback signals, while the second processes the signal between the two integrators.\n3. **Integrators:** There are two integrator blocks:\n- The first integrator possesses a transfer function of \\(\\omega_o/s = 10^6/s\\).\n- The second integrator also features the identical transfer function \\(\\omega_o/s = 10^6/s\\).\n4. **Feedback Paths:** Two feedback paths exist:\n- A feedback path with a gain of \\(-1\\) loops from the output of the second integrator back to the input summing junction.\n- Another feedback path with a gain of \\(-1/Q = \\sqrt{2}\\) links from the output of the first integrator to the second summing junction.\n5. **Output Signal (Vout(s)):** The output signal is designated as Vout(s).\n\nInformation or Control Flow:\n- The input signal Vin(s) is introduced into the system via the first summing junction, where it blends with feedback signals.\n- The resulting signal undergoes processing by the first integrator, which then outputs a signal that is both fed forward to the second summing junction and fed back with a gain of \\(-1/Q = \\sqrt{2}\\) to the second summing junction.\n- The second summing junction consolidates its inputs and forwards the resultant signal to the second integrator.\n- The output from the second integrator is looped back to the first summing junction with a gain of \\(-1\\) and also serves as the final output signal Vout(s).\n\nLabels, Annotations, and Significant Indicators:\n- The gain factor at the input is indicated as \\(k_o/\\omega_o^2 = 2\\).\n- The feedback gains are marked as \\(-1\\) and \\(-1/Q = \\sqrt{2}\\).\n- Integrators are tagged with their transfer functions \\(\\omega_o/s = 10^6/s\\).\n\nComprehensive System Function:\nThe biquad filter is engineered to manipulate the input signal through a sequence of integrations and feedback loops to attain a desired frequency response. The configuration of integrators and feedback paths enables the filter to execute intricate filtering tasks, such as bandpass or low-pass filtering, contingent on the specific setup and component values.\n\nFig. 12.3 The biquad filter of Example 12.1."
},
{
    "text": "This section offers a concise overview of $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filters. Here, we will explore that the primary circuit components of $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filters are transconductors. The fundamental roles of transconductors are outlined in this section, with subsequent sections detailing circuit methodologies for their implementation.\n\nimage_name:Fig. 12.3\ndescription:The illustration marked \"Fig. 12.3\" depicts a biquad filter, a second-order filter type. This specific filter employs the Gm-C (transconductance-capacitance) technique, widely utilized in continuous-time analog filters.\n\nKey Components:\n1. **Input Signal (Vin(s)):** The system accepts an input signal identified as Vin(s).\n2. **Summing Junctions:** The system includes two summing junctions. The initial junction combines the input signal with feedback signals, while the second processes the signal between the two integrators.\n3. **Integrators:** There are two integrator blocks:\n- The first integrator features a transfer function of \\(\\omega_o/s = 10^6/s\\).\n- The second integrator shares the same transfer function \\(\\omega_o/s = 10^6/s\\).\n4. **Feedback Paths:** Two feedback paths exist:\n- A path with a gain of \\(-1\\) loops from the second integrator's output back to the input summing junction.\n- Another path with a gain of \\(-1/Q = \\sqrt{2}\\) links from the first integrator's output to the second summing junction.\n5. **Output Signal (Vout(s)):** The system's output signal is labeled Vout(s).\n\nInformation or Control Flow:\n- The input signal Vin(s) is introduced via the first summing junction, where it merges with feedback signals.\n- The resulting signal undergoes processing by the first integrator, which forwards its output to the second summing junction and also feeds it back with a gain of \\(-1/Q = \\sqrt{2}\\) to the same junction.\n- The second summing junction aggregates its inputs and directs the combined signal to the second integrator.\n- The second integrator's output is both fed back to the first summing junction with a gain of \\(-1\\) and serves as the final output signal Vout(s).\n\nLabels, Annotations, and Key Markers:\n- The input gain factor is indicated as \\(k_o/\\omega_o^2 = 2\\).\n- The feedback gains are marked as \\(-1\\) and \\(-1/Q = \\sqrt{2}\\).\n- Integrators are identified by their transfer functions \\(\\omega_o/s = 10^6/s\\).\n\nSystem Function Overview:\nThe biquad filter is engineered to process input signals through successive integrations and feedback loops, aiming for a particular frequency response. The configuration of integrators and feedback paths enables the filter to execute intricate filtering tasks, such as bandpass or low-pass filtering, contingent on the specific setup and component values.\n\nFig. 12.3 The biquad filter of Example 12.1."
},
{
    "text": "Key Point: In $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filters, integrators are implemented using a transconductor, which generates an output current proportional to the input voltage, and a capacitor, which integrates this current to produce the output voltage.\n\nAn integrator serves as the fundamental component in most continuous-time filters. To construct an integrator using $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ technology, a transconductor and a capacitor are employed, as depicted in Fig. 12.4. A transconductor is essentially a transconductance cell (where an input voltage generates an output current) with the additional requirement that the output current must be linearly proportional to the input voltage. Here, the transconductor's output is the current $i_{0}$, and ideally, both the input and output impedances of this block are infinite. The output current is linearly related to the differential input voltage signal by\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{o}}=\\mathrm{G}_{\\mathrm{m}} \\mathrm{v}_{\\mathrm{i}} \\tag{12.5}\n\\end{equation*}\n$$\n\nwhere $G_{m}$ represents the transconductance of the cell. It is important to highlight that this relationship differs from that of an operational-transconductance amplifier (OTA), where the output current should be linearly related to the input voltage. Additionally, a transconductor should possess a well-defined (or at least controllable) transconductance value. In contrast, an OTA's transconductance does not necessarily need to be a linear function of the input voltage or a precisely controlled value (though typically, the transconductance should be as high as possible).\n\nThis output current is then applied to the integrating capacitor, $\\mathrm{C}_{1}$, resulting in the voltage across $\\mathrm{C}_{1}$ being expressed as\n\n$$\n\\begin{equation*}\nV_{o}=\\frac{I_{0}}{s C_{1}}=\\frac{G_{m} V_{i}}{s C_{1}} \\tag{12.6}\n\\end{equation*}\n$$\n\nBy defining $\\omega_{\\mathrm{ti}}$ as the unity-gain frequency of the integrator, we can express\n\n$$\n\\begin{equation*}\nV_{o} \\equiv\\left(\\frac{\\omega_{i t}}{s}\\right) V_{i}=\\left(\\frac{G_{m}}{s C_{i}}\\right) V_{i} \\tag{12.7}\n\\end{equation*}\n$$\n\nimage_name:Fig. 12.4\ndescription:The circuit is a single-ended Gm-C integrator. The input voltage vi is converted to a current io by the transconductor Gm. This current is then integrated by the capacitor C1, resulting in the output voltage vo. The integrator has infinite input and output resistances (Rin = ∞, Rout = ∞). The unity-gain frequency of the integrator is defined as ωti = Gm / C1.\n\nFig. 12.4 A single-ended $G_{m}-C$ integrator.\nimage_name:Fig. 12.5\ndescription:The circuit is a three-input, single-ended integrator/summer circuit. The output voltage Vo is the integration of the weighted sum of the input voltages V1, V2, and V3. The weights are determined by the transconductance values Gm1, Gm2, and Gm3, and the integration is performed by the capacitor C1. The output voltage is given by Vo = (1/sC1)(Gm1*V1 - Gm2*V2 + Gm3*V3).\n\nFig. 12.5 A three-input, single-ended integrator/summer circuit.\n\nThus, the output voltage equals the integration of the differential input voltage multiplied by the integrator's unity-gain frequency, which is given by\n\n$$\n\\begin{equation*}\n\\omega_{\\mathrm{ti}}=\\frac{\\mathrm{G}_{\\mathrm{m}}}{\\mathrm{C}_{1}} \\tag{12.8}\n\\end{equation*}\n$$\n\nTo create a more versatile integrator/summer circuit, multiple transconductors can be connected in parallel since their output currents sum together. An example of a three-input integrator/summer circuit is illustrated in Fig. 12.5.\n\nKey Point: Current signals can be easily summed by simply connecting them together.\n\n#### EXAMPLE 12.2\n\nWhat transconductance is required for an integrator with a unity-gain frequency of 20 MHz, assuming a 2-pF integrating capacitor?\n\n#### Solution\n\nBy rearranging (12.8), we obtain\n\n$$\n\\begin{align*}\n\\mathrm{G}_{\\mathrm{m}} & =2 \\pi \\times 20 \\mathrm{MHz} \\times 2 \\mathrm{pF}  \\tag{12.9}\\\\\n& =0.251 \\mathrm{~mA} / \\mathrm{V}\n\\end{align*}\n$$\n\nNote that this transconductance value corresponds to\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=1 / 3.98 \\mathrm{k} \\Omega \\tag{12.10}\n\\end{equation*}\n$$\n\nwhich, as expected, is related to the unity-gain frequency by\n\n$$\n\\begin{equation*}\n2 \\pi \\times 20 \\mathrm{MHz}=\\frac{1}{3.98 \\mathrm{k} \\Omega \\times 2 \\mathrm{pF}} \\tag{12.11}\n\\end{equation*}\n$$\n\nIn essence, the required transconductance value is the inverse of the resistance value needed to form an RC time constant corresponding to the desired unity-gain frequency."
},
{
    "text": "Key Point: In $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filters, integrators are formed using a transconductor, which generates an output current proportional to the input voltage, and a capacitor, which integrates this current to produce the output voltage.\n\nAn integrator serves as the fundamental component in most continuous-time filters. To construct an integrator in $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ technology, a transconductor and a capacitor are utilized, as depicted in Fig. 12.4. A transconductor is essentially a transconductance cell (where an input voltage results in an output current) with the additional stipulation that the output current must be linearly proportional to the input voltage. Here, the transconductor's output is the current $i_{0}$, and ideally, both the input and output impedances of this component are infinite. The output current is linearly related to the differential input voltage signal by\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{o}}=\\mathrm{G}_{\\mathrm{m}} \\mathrm{v}_{\\mathrm{i}} \\tag{12.5}\n\\end{equation*}\n$$\n\nwhere $G_{m}$ represents the transconductance of the cell. It is important to reiterate that this relationship differs from that of an operational-transconductance amplifier (OTA), where the output current should be linearly related to the input voltage. Additionally, a transconductor should possess a well-defined (or at least controllable) transconductance value. In contrast, an OTA's transconductance does not necessarily need to be a linear function of the input voltage or a precisely controlled value (though typically, the transconductance should be as high as possible).\n\nThis output current is then applied to the integrating capacitor, $\\mathrm{C}_{1}$, leading to the voltage across $\\mathrm{C}_{1}$ being expressed as\n\n$$\n\\begin{equation*}\nV_{o}=\\frac{I_{0}}{s C_{1}}=\\frac{G_{m} V_{i}}{s C_{1}} \\tag{12.6}\n\\end{equation*}\n$$\n\nBy defining $\\omega_{\\mathrm{ti}}$ as the unity-gain frequency of the integrator, we can express\n\n$$\n\\begin{equation*}\nV_{o} \\equiv\\left(\\frac{\\omega_{i t}}{s}\\right) V_{i}=\\left(\\frac{G_{m}}{s C_{i}}\\right) V_{i} \\tag{12.7}\n\\end{equation*}\n$$\n\nimage_name:Fig. 12.4\ndescription:The circuit represents a single-ended Gm-C integrator. The input voltage vi is converted to a current io by the transconductor Gm. This current is subsequently integrated by the capacitor C1, producing the output voltage vo. The integrator features infinite input and output resistances (Rin = ∞, Rout = ∞). The unity-gain frequency of the integrator is defined as ωti = Gm / C1.\n\nFig. 12.4 A single-ended $G_{m}-C$ integrator.\nimage_name:Fig. 12.5\ndescription:The circuit is a three-input, single-ended integrator/summer. The output voltage Vo results from the integration of the weighted sum of the input voltages V1, V2, and V3. The weights are determined by the transconductance values Gm1, Gm2, and Gm3, with the integration carried out by the capacitor C1. The output voltage is given by Vo = (1/sC1)(Gm1*V1 - Gm2*V2 + Gm3*V3).\n\nFig. 12.5 A three-input, single-ended integrator/summer circuit.\n\nThus, it is evident that the output voltage corresponds to the integration of the differential input voltage multiplied by the integrator's unity-gain frequency, which is defined as\n\n$$\n\\begin{equation*}\n\\omega_{\\mathrm{ti}}=\\frac{\\mathrm{G}_{\\mathrm{m}}}{\\mathrm{C}_{1}} \\tag{12.8}\n\\end{equation*}\n$$\n\nTo create a more versatile integrator/summer circuit, multiple transconductors can be connected in parallel, as their output currents sum together. An example of a three-input integrator/summer circuit is illustrated in Fig. 12.5.\n\nKey Point: Current signals can be easily summed by simply connecting them together.\n\n#### EXAMPLE 12.2\n\nWhat transconductance is required for an integrator with a unity-gain frequency of 20 MHz, given a 2-pF integrating capacitor?\n\n#### Solution\n\nBy rearranging (12.8), we obtain\n\n$$\n\\begin{align*}\n\\mathrm{G}_{\\mathrm{m}} & =2 \\pi \\times 20 \\mathrm{MHz} \\times 2 \\mathrm{pF}  \\tag{12.9}\\\\\n& =0.251 \\mathrm{~mA} / \\mathrm{V}\n\\end{align*}\n$$\n\nIt should be noted that this transconductance value corresponds to\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=1 / 3.98 \\mathrm{k} \\Omega \\tag{12.10}\n\\end{equation*}\n$$\n\nwhich, as expected, is related to the unity-gain frequency by\n\n$$\n\\begin{equation*}\n2 \\pi \\times 20 \\mathrm{MHz}=\\frac{1}{3.98 \\mathrm{k} \\Omega \\times 2 \\mathrm{pF}} \\tag{12.11}\n\\end{equation*}\n$$\n\nIn essence, the required transconductance value is the inverse of the resistance needed to form an RC time constant corresponding to the desired unity-gain frequency."
},
{
    "text": "Key Point: In $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filters, integrators are constructed using a transconductor, which generates an output current proportional to the input voltage, and a capacitor, which integrates this current to produce the output voltage.\n\nAn integrator serves as the fundamental component in most continuous-time filters. To create an integrator using $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ technology, a transconductor and a capacitor are employed, as depicted in Fig. 12.4. A transconductor is essentially a transconductance cell where an input voltage generates an output current, with the additional requirement that the output current must be linearly proportional to the input voltage. Here, the transconductor's output is the current $i_{0}$, and ideally, both the input and output impedances of this block are infinite. The output current is linearly related to the differential input voltage signal by\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{o}}=\\mathrm{G}_{\\mathrm{m}} \\mathrm{v}_{\\mathrm{i}} \\tag{12.5}\n\\end{equation*}\n$$\n\nwhere $G_{m}$ is the transconductance of the cell. It is important to reiterate that this relationship differs from that of an operational-transconductance amplifier (OTA), where the output current should be linearly related to the input voltage. Additionally, a transconductor should have a well-defined or controllable transconductance value. In contrast, an OTA's transconductance does not necessarily need to be a linear function of the input voltage or a precisely controlled value (though a higher transconductance value is typically desirable).\n\nThis output current is then applied to the integrating capacitor, $\\mathrm{C}_{1}$, resulting in the voltage across $\\mathrm{C}_{1}$ being expressed as\n\n$$\n\\begin{equation*}\nV_{o}=\\frac{I_{0}}{s C_{1}}=\\frac{G_{m} V_{i}}{s C_{1}} \\tag{12.6}\n\\end{equation*}\n$$\n\nBy defining $\\omega_{\\mathrm{ti}}$ as the unity-gain frequency of the integrator, we can express\n\n$$\n\\begin{equation*}\nV_{o} \\equiv\\left(\\frac{\\omega_{i t}}{s}\\right) V_{i}=\\left(\\frac{G_{m}}{s C_{i}}\\right) V_{i} \\tag{12.7}\n\\end{equation*}\n$$\n\nimage_name:Fig. 12.4\ndescription:The circuit is a single-ended Gm-C integrator. The input voltage vi is converted to a current io by the transconductor Gm. This current is then integrated by the capacitor C1, resulting in the output voltage vo. The integrator has infinite input and output resistances (Rin = ∞, Rout = ∞). The unity-gain frequency of the integrator is defined as ωti = Gm / C1.\n\nFig. 12.4 A single-ended $G_{m}-C$ integrator.\nimage_name:Fig. 12.5\ndescription:The circuit is a three-input, single-ended integrator/summer circuit. The output voltage Vo is the integration of the weighted sum of the input voltages V1, V2, and V3. The weights are determined by the transconductance values Gm1, Gm2, and Gm3, and the integration is performed by the capacitor C1. The output voltage is given by Vo = (1/sC1)(Gm1*V1 - Gm2*V2 + Gm3*V3).\n\nFig. 12.5 A three-input, single-ended integrator/summer circuit.\n\nThus, the output voltage equals the integration of the differential input voltage multiplied by the integrator's unity-gain frequency, which is given by\n\n$$\n\\begin{equation*}\n\\omega_{\\mathrm{ti}}=\\frac{\\mathrm{G}_{\\mathrm{m}}}{\\mathrm{C}_{1}} \\tag{12.8}\n\\end{equation*}\n$$\n\nTo construct a more general integrator/summer circuit, multiple transconductors can be connected in parallel since their output currents sum together. An example of a three-input integrator/summer circuit is shown in Fig. 12.5.\n\nKey Point: Current signals can be easily summed by simply connecting them together.\n\n#### EXAMPLE 12.2\n\nWhat transconductance is required for an integrator with a unity-gain frequency of 20 MHz, assuming a 2-pF integrating capacitor?\n\n#### Solution\n\nRearranging (12.8), we obtain\n\n$$\n\\begin{align*}\n\\mathrm{G}_{\\mathrm{m}} & =2 \\pi \\times 20 \\mathrm{MHz} \\times 2 \\mathrm{pF}  \\tag{12.9}\\\\\n& =0.251 \\mathrm{~mA} / \\mathrm{V}\n\\end{align*}\n$$\n\nNote that this transconductance value corresponds to\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=1 / 3.98 \\mathrm{k} \\Omega \\tag{12.10}\n\\end{equation*}\n$$\n\nwhich, as expected, is related to the unity-gain frequency by\n\n$$\n\\begin{equation*}\n2 \\pi \\times 20 \\mathrm{MHz}=\\frac{1}{3.98 \\mathrm{k} \\Omega \\times 2 \\mathrm{pF}} \\tag{12.11}\n\\end{equation*}\n$$\n\nIn essence, the required transconductance value is the inverse of the resistance needed to form an RC time constant corresponding to the desired unity-gain frequency."
},
{
    "text": "Key Point: In $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filters, integrators are constructed using a transconductor, which generates an output current proportional to the input voltage, and a capacitor, which integrates this current to produce the output voltage.\n\nAn integrator serves as the fundamental component in most continuous-time filters. To create an integrator in $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ technology, a transconductor and a capacitor are utilized, as depicted in Fig. 12.4. A transconductor is essentially a transconductance cell (where an input voltage generates an output current) with the additional requirement that the output current must be linearly proportional to the input voltage. Here, the transconductor's output is the current $i_{0}$, and ideally, both the input and output impedances of this block are infinite. The output current is linearly related to the differential input voltage signal by\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{o}}=\\mathrm{G}_{\\mathrm{m}} \\mathrm{v}_{\\mathrm{i}} \\tag{12.5}\n\\end{equation*}\n$$\n\nwhere $G_{m}$ represents the transconductance of the cell. It is important to reiterate that this relationship differs from that of an operational-transconductance amplifier (OTA), where the output current should be linearly related to the input voltage. Additionally, a transconductor should have a well-defined (or at least controllable) transconductance value. In contrast, an OTA's transconductance does not necessarily need to be a linear function of the input voltage or a precisely controlled value (although a high transconductance value is typically desirable).\n\nThis output current is then applied to the integrating capacitor, $\\mathrm{C}_{1}$, resulting in the voltage across $\\mathrm{C}_{1}$ being expressed as\n\n$$\n\\begin{equation*}\nV_{o}=\\frac{I_{0}}{s C_{1}}=\\frac{G_{m} V_{i}}{s C_{1}} \\tag{12.6}\n\\end{equation*}\n$$\n\nBy defining $\\omega_{\\mathrm{ti}}$ as the unity-gain frequency of the integrator, we can express\n\n$$\n\\begin{equation*}\nV_{o} \\equiv\\left(\\frac{\\omega_{i t}}{s}\\right) V_{i}=\\left(\\frac{G_{m}}{s C_{i}}\\right) V_{i} \\tag{12.7}\n\\end{equation*}\n$$\n\nimage_name:Fig. 12.4\ndescription:The circuit is a single-ended Gm-C integrator. The input voltage vi is converted to a current io by the transconductor Gm. This current is then integrated by the capacitor C1, resulting in the output voltage vo. The integrator has infinite input and output resistances (Rin = ∞, Rout = ∞). The unity-gain frequency of the integrator is defined as ωti = Gm / C1.\n\nFig. 12.4 A single-ended $G_{m}-C$ integrator.\nimage_name:Fig. 12.5\ndescription:The circuit is a three-input, single-ended integrator/summer circuit. The output voltage Vo is the integration of the weighted sum of the input voltages V1, V2, and V3. The weights are determined by the transconductance values Gm1, Gm2, and Gm3, and the integration is performed by the capacitor C1. The output voltage is given by Vo = (1/sC1)(Gm1*V1 - Gm2*V2 + Gm3*V3).\n\nFig. 12.5 A three-input, single-ended integrator/summer circuit.\n\nThus, the output voltage equals the integration of the differential input voltage multiplied by the integrator's unity-gain frequency, which is given by\n\n$$\n\\begin{equation*}\n\\omega_{\\mathrm{ti}}=\\frac{\\mathrm{G}_{\\mathrm{m}}}{\\mathrm{C}_{1}} \\tag{12.8}\n\\end{equation*}\n$$\n\nTo construct a more general integrator/summer circuit, multiple transconductors can be connected in parallel since their output currents sum together. An example of a three-input integrator/summer circuit is illustrated in Fig. 12.5.\n\nKey Point: Current signals can be easily summed by simply connecting them together.\n\n#### EXAMPLE 12.2\n\nWhat transconductance is required for an integrator with a unity-gain frequency of 20 MHz, assuming a 2-pF integrating capacitor?\n\n#### Solution\n\nRearranging (12.8), we obtain\n\n$$\n\\begin{align*}\n\\mathrm{G}_{\\mathrm{m}} & =2 \\pi \\times 20 \\mathrm{MHz} \\times 2 \\mathrm{pF}  \\tag{12.9}\\\\\n& =0.251 \\mathrm{~mA} / \\mathrm{V}\n\\end{align*}\n$$\n\nNote that this transconductance value corresponds to\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=1 / 3.98 \\mathrm{k} \\Omega \\tag{12.10}\n\\end{equation*}\n$$\n\nwhich, as expected, is related to the unity-gain frequency by\n\n$$\n\\begin{equation*}\n2 \\pi \\times 20 \\mathrm{MHz}=\\frac{1}{3.98 \\mathrm{k} \\Omega \\times 2 \\mathrm{pF}} \\tag{12.11}\n\\end{equation*}\n$$\n\nIn essence, the required transconductance value is the inverse of the resistance needed to form an RC time constant corresponding to the desired unity-gain frequency."
},
{
    "text": "Key Point: In $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filters, integrators are formed using a transconductor, which generates an output current proportional to the input voltage, and a capacitor, which integrates this current to produce the output voltage.\n\nAn integrator serves as the fundamental component in most continuous-time filters. To implement an integrator in $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ technology, a transconductor and a capacitor are utilized, as depicted in Fig. 12.4. A transconductor is essentially a transconductance cell where an input voltage generates an output current, with the added requirement that the output current be linearly proportional to the input voltage. Here, the transconductor's output is the current $i_{0}$, and ideally, both the input and output impedances of this block are infinite. The output current is linearly related to the differential input voltage signal by\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{o}}=\\mathrm{G}_{\\mathrm{m}} \\mathrm{v}_{\\mathrm{i}} \\tag{12.5}\n\\end{equation*}\n$$\n\nwhere $G_{m}$ represents the transconductance of the cell. It is important to highlight that this relationship differs from that of an operational-transconductance amplifier (OTA), where the output current must be linearly related to the input voltage. Additionally, a transconductor should have a well-defined or controllable transconductance value. In contrast, an OTA's transconductance does not necessarily need to be a linear function of the input voltage or a precisely controlled value (though typically, the transconductance should be as high as possible).\n\nThis output current is then applied to the integrating capacitor, $\\mathrm{C}_{1}$, resulting in the voltage across $\\mathrm{C}_{1}$ being expressed as\n\n$$\n\\begin{equation*}\nV_{o}=\\frac{I_{0}}{s C_{1}}=\\frac{G_{m} V_{i}}{s C_{1}} \\tag{12.6}\n\\end{equation*}\n$$\n\nBy defining $\\omega_{\\mathrm{ti}}$ as the unity-gain frequency of the integrator, we can express\n\n$$\n\\begin{equation*}\nV_{o} \\equiv\\left(\\frac{\\omega_{i t}}{s}\\right) V_{i}=\\left(\\frac{G_{m}}{s C_{i}}\\right) V_{i} \\tag{12.7}\n\\end{equation*}\n$$\n\nimage_name:Fig. 12.4\ndescription:The circuit is a single-ended Gm-C integrator. The input voltage vi is converted to a current io by the transconductor Gm. This current is then integrated by the capacitor C1, resulting in the output voltage vo. The integrator has infinite input and output resistances (Rin = ∞, Rout = ∞). The unity-gain frequency of the integrator is defined as ωti = Gm / C1.\n\nFig. 12.4 A single-ended $G_{m}-C$ integrator.\nimage_name:Fig. 12.5\ndescription:The circuit is a three-input, single-ended integrator/summer circuit. The output voltage Vo is the integration of the weighted sum of the input voltages V1, V2, and V3. The weights are determined by the transconductance values Gm1, Gm2, and Gm3, and the integration is performed by the capacitor C1. The output voltage is given by Vo = (1/sC1)(Gm1*V1 - Gm2*V2 + Gm3*V3).\n\nFig. 12.5 A three-input, single-ended integrator/summer circuit.\n\nThus, the output voltage equals the integration of the differential input voltage multiplied by the integrator's unity-gain frequency, which is\n\n$$\n\\begin{equation*}\n\\omega_{\\mathrm{ti}}=\\frac{\\mathrm{G}_{\\mathrm{m}}}{\\mathrm{C}_{1}} \\tag{12.8}\n\\end{equation*}\n$$\n\nTo create a more versatile integrator/summer circuit, multiple transconductors can be connected in parallel, as their output currents sum together. An example of a three-input integrator/summer circuit is shown in Fig. 12.5.\n\nKey Point: Current signals can be easily summed by simply connecting them together.\n\n#### EXAMPLE 12.2\n\nWhat transconductance is required for an integrator with a unity-gain frequency of 20 MHz, assuming a 2-pF integrating capacitor?\n\n#### Solution\n\nBy rearranging (12.8), we obtain\n\n$$\n\\begin{align*}\n\\mathrm{G}_{\\mathrm{m}} & =2 \\pi \\times 20 \\mathrm{MHz} \\times 2 \\mathrm{pF}  \\tag{12.9}\\\\\n& =0.251 \\mathrm{~mA} / \\mathrm{V}\n\\end{align*}\n$$\n\nThis transconductance value corresponds to\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=1 / 3.98 \\mathrm{k} \\Omega \\tag{12.10}\n\\end{equation*}\n$$\n\nwhich, as expected, is related to the unity-gain frequency by\n\n$$\n\\begin{equation*}\n2 \\pi \\times 20 \\mathrm{MHz}=\\frac{1}{3.98 \\mathrm{k} \\Omega \\times 2 \\mathrm{pF}} \\tag{12.11}\n\\end{equation*}\n$$\n\nIn essence, the necessary transconductance value is the inverse of the resistance required to form an RC time constant corresponding to the desired unity-gain frequency."
},
{
    "text": "Key Point: In $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filters, integrators are constructed using a transconductor, which generates an output current proportional to the input voltage, and a capacitor, which integrates this current to produce the output voltage.\n\nAn integrator serves as the fundamental component in most continuous-time filters. To implement an integrator in $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ technology, a transconductor and a capacitor are utilized, as depicted in Fig. 12.4. A transconductor is essentially a transconductance cell where an input voltage generates an output current, with the additional requirement that the output current must be linearly proportional to the input voltage. Here, the transconductor's output is the current $i_{0}$, and ideally, both the input and output impedances of this block are infinite. The output current is linearly related to the differential input voltage signal by\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{o}}=\\mathrm{G}_{\\mathrm{m}} \\mathrm{v}_{\\mathrm{i}} \\tag{12.5}\n\\end{equation*}\n$$\n\nwhere $G_{m}$ is the transconductance of the cell. It is important to reiterate that this relationship differs from that of an operational-transconductance amplifier (OTA), where the output current should be linearly related to the input voltage. Additionally, a transconductor should have a well-defined (or at least controllable) transconductance value. In contrast, an OTA's transconductance does not necessarily need to be a linear function of the input voltage or a well-controlled value (though typically, the transconductance should be as high as possible).\n\nThis output current is then applied to the integrating capacitor, $\\mathrm{C}_{1}$, resulting in the voltage across $\\mathrm{C}_{1}$ being expressed as\n\n$$\n\\begin{equation*}\nV_{o}=\\frac{I_{0}}{s C_{1}}=\\frac{G_{m} V_{i}}{s C_{1}} \\tag{12.6}\n\\end{equation*}\n$$\n\nBy defining $\\omega_{\\mathrm{ti}}$ as the unity-gain frequency of the integrator, we can write\n\n$$\n\\begin{equation*}\nV_{o} \\equiv\\left(\\frac{\\omega_{i t}}{s}\\right) V_{i}=\\left(\\frac{G_{m}}{s C_{i}}\\right) V_{i} \\tag{12.7}\n\\end{equation*}\n$$\n\nimage_name:Fig. 12.4\ndescription:The circuit is a single-ended Gm-C integrator. The input voltage vi is converted to a current io by the transconductor Gm. This current is then integrated by the capacitor C1, resulting in the output voltage vo. The integrator has infinite input and output resistances (Rin = ∞, Rout = ∞). The unity-gain frequency of the integrator is defined as ωti = Gm / C1.\n\nFig. 12.4 A single-ended $G_{m}-C$ integrator.\nimage_name:Fig. 12.5\ndescription:The circuit is a three-input, single-ended integrator/summer circuit. The output voltage Vo is the integration of the weighted sum of the input voltages V1, V2, and V3. The weights are determined by the transconductance values Gm1, Gm2, and Gm3, and the integration is performed by the capacitor C1. The output voltage is given by Vo = (1/sC1)(Gm1*V1 - Gm2*V2 + Gm3*V3).\n\nFig. 12.5 A three-input, single-ended integrator/summer circuit.\n\nThus, the output voltage is seen to be the integration of the differential input voltage multiplied by the integrator's unity-gain frequency, which is given by\n\n$$\n\\begin{equation*}\n\\omega_{\\mathrm{ti}}=\\frac{\\mathrm{G}_{\\mathrm{m}}}{\\mathrm{C}_{1}} \\tag{12.8}\n\\end{equation*}\n$$\n\nTo create a more general integrator/summer circuit, multiple transconductors can be connected in parallel since their output currents sum together. An example of a three-input integrator/summer circuit is shown in Fig. 12.5.\n\nKey Point: Current signals can be easily summed by simply connecting them together.\n\n#### EXAMPLE 12.2\n\nWhat transconductance is required for an integrator with a unity-gain frequency of 20 MHz, assuming a 2-pF integrating capacitor?\n\n#### Solution\n\nRearranging (12.8), we obtain\n\n$$\n\\begin{align*}\n\\mathrm{G}_{\\mathrm{m}} & =2 \\pi \\times 20 \\mathrm{MHz} \\times 2 \\mathrm{pF}  \\tag{12.9}\\\\\n& =0.251 \\mathrm{~mA} / \\mathrm{V}\n\\end{align*}\n$$\n\nNote that this transconductance value corresponds to\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=1 / 3.98 \\mathrm{k} \\Omega \\tag{12.10}\n\\end{equation*}\n$$\n\nwhich, as expected, is related to the unity-gain frequency by\n\n$$\n\\begin{equation*}\n2 \\pi \\times 20 \\mathrm{MHz}=\\frac{1}{3.98 \\mathrm{k} \\Omega \\times 2 \\mathrm{pF}} \\tag{12.11}\n\\end{equation*}\n$$\n\nIn essence, the required transconductance value is the inverse of the resistance value needed to form an RC time constant corresponding to the desired unity-gain frequency."
},
{
    "text": "Key Point: In $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filters, integrators are constructed using a transconductor that generates an output current proportional to the input voltage, along with a capacitor that integrates this current to produce the output voltage.\n\nAn integrator serves as the fundamental component for most continuous-time filters. To create an integrator using $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ technology, a transconductor and a capacitor are employed, as illustrated in Fig. 12.4. A transconductor is essentially a transconductance cell where an input voltage generates an output current, with the added requirement that the output current must be linearly proportional to the input voltage. Here, the transconductor's output is the current $i_{0}$, and ideally, both the input and output impedances of this component are infinite. The output current is linearly related to the differential input voltage signal by\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{o}}=\\mathrm{G}_{\\mathrm{m}} \\mathrm{v}_{\\mathrm{i}} \\tag{12.5}\n\\end{equation*}\n$$\n\nwhere $G_{m}$ represents the transconductance of the cell. It is important to stress that this relationship differs from that of an operational-transconductance amplifier (OTA), where the output current must be linearly related to the input voltage. Additionally, a transconductor should have a well-defined or controllable transconductance value. In contrast, an OTA's transconductance does not necessarily need to be a linear function of the input voltage or a precisely controlled value (though a higher transconductance is generally preferred).\n\nThis output current is then applied to the integrating capacitor, $\\mathrm{C}_{1}$, resulting in the voltage across $\\mathrm{C}_{1}$ being expressed as\n\n$$\n\\begin{equation*}\nV_{o}=\\frac{I_{0}}{s C_{1}}=\\frac{G_{m} V_{i}}{s C_{1}} \\tag{12.6}\n\\end{equation*}\n$$\n\nBy defining $\\omega_{\\mathrm{ti}}$ as the unity-gain frequency of the integrator, we can rewrite the output voltage as\n\n$$\n\\begin{equation*}\nV_{o} \\equiv\\left(\\frac{\\omega_{i t}}{s}\\right) V_{i}=\\left(\\frac{G_{m}}{s C_{i}}\\right) V_{i} \\tag{12.7}\n\\end{equation*}\n$$\n\nimage_name:Fig. 12.4\ndescription:The circuit depicts a single-ended Gm-C integrator. The input voltage vi is converted to a current io by the transconductor Gm. This current is subsequently integrated by the capacitor C1, producing the output voltage vo. The integrator features infinite input and output resistances (Rin = ∞, Rout = ∞). The unity-gain frequency of the integrator is defined as ωti = Gm / C1.\n\nFig. 12.4 $A$ single-ended $G_{m}-C$ integrator.\nimage_name:Fig. 12.5\ndescription:The circuit is a three-input, single-ended integrator/summer. The output voltage Vo is the integration of the weighted sum of the input voltages V1, V2, and V3. The weights are determined by the transconductance values Gm1, Gm2, and Gm3, with the integration carried out by the capacitor C1. The output voltage is given by Vo = (1/sC1)(Gm1*V1 - Gm2*V2 + Gm3*V3).\n\nFig. 12.5 A three-input, single-ended integrator/summer circuit.\n\nThus, the output voltage corresponds to the integration of the differential input voltage multiplied by the integrator's unity-gain frequency, which is defined as\n\n$$\n\\begin{equation*}\n\\omega_{\\mathrm{ti}}=\\frac{\\mathrm{G}_{\\mathrm{m}}}{\\mathrm{C}_{1}} \\tag{12.8}\n\\end{equation*}\n$$\n\nTo create a more versatile integrator/summer circuit, multiple transconductors can be connected in parallel, as their output currents sum together. An example of a three-input integrator/summer circuit is shown in Fig. 12.5.\n\nKey Point: Current signals can be easily summed by simply connecting them together.\n\n#### EXAMPLE 12.2\n\nWhat transconductance is required for an integrator with a unity-gain frequency of 20 MHz, given a 2-pF integrating capacitor?\n\n#### Solution\n\nBy rearranging (12.8), we obtain\n\n$$\n\\begin{align*}\n\\mathrm{G}_{\\mathrm{m}} & =2 \\pi \\times 20 \\mathrm{MHz} \\times 2 \\mathrm{pF}  \\tag{12.9}\\\\\n& =0.251 \\mathrm{~mA} / \\mathrm{V}\n\\end{align*}\n$$\n\nThis transconductance value corresponds to\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=1 / 3.98 \\mathrm{k} \\Omega \\tag{12.10}\n\\end{equation*}\n$$\n\nwhich, as expected, is related to the unity-gain frequency by\n\n$$\n\\begin{equation*}\n2 \\pi \\times 20 \\mathrm{MHz}=\\frac{1}{3.98 \\mathrm{k} \\Omega \\times 2 \\mathrm{pF}} \\tag{12.11}\n\\end{equation*}\n$$\n\nIn essence, the required transconductance value is the inverse of the resistance needed to form an RC time constant corresponding to the desired unity-gain frequency."
},
{
    "text": "Key Point: In $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filters, integrators are constructed using a transconductor, which generates an output current proportional to the input voltage, and a capacitor, which integrates this current to produce the output voltage.\n\nAn integrator serves as the primary building block for most continuous-time filters. To implement an integrator in $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ technology, a transconductor and a capacitor are utilized, as depicted in Fig. 12.4. A transconductor is essentially a transconductance cell (where an input voltage generates an output current) with the added requirement that the output current must be linearly proportional to the input voltage. Here, the transconductor's output is the current $i_{0}$, and ideally, both the input and output impedances of this block are infinite. The output current is linearly related to the differential input voltage signal by\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{o}}=\\mathrm{G}_{\\mathrm{m}} \\mathrm{v}_{\\mathrm{i}} \\tag{12.5}\n\\end{equation*}\n$$\n\nwhere $G_{m}$ is the transconductance of the cell. It is important to highlight that this relationship differs from that of an operational-transconductance amplifier (OTA), where the output current should be linearly related to the input voltage. Additionally, a transconductor should possess a well-defined (or at least controllable) transconductance value. In contrast, an OTA's transconductance does not necessarily need to be a linear function of the input voltage or a well-controlled value (although a high transconductance value is typically desirable).\n\nThis output current is then applied to the integrating capacitor, $\\mathrm{C}_{1}$, resulting in the voltage across $\\mathrm{C}_{1}$ being expressed as\n\n$$\n\\begin{equation*}\nV_{o}=\\frac{I_{0}}{s C_{1}}=\\frac{G_{m} V_{i}}{s C_{1}} \\tag{12.6}\n\\end{equation*}\n$$\n\nBy defining $\\omega_{\\mathrm{ti}}$ as the unity-gain frequency of the integrator, we can express\n\n$$\n\\begin{equation*}\nV_{o} \\equiv\\left(\\frac{\\omega_{i t}}{s}\\right) V_{i}=\\left(\\frac{G_{m}}{s C_{i}}\\right) V_{i} \\tag{12.7}\n\\end{equation*}\n$$\n\nimage_name:Fig. 12.4\ndescription:The circuit is a single-ended Gm-C integrator. The input voltage vi is converted to a current io by the transconductor Gm. This current is then integrated by the capacitor C1, resulting in the output voltage vo. The integrator has infinite input and output resistances (Rin = ∞, Rout = ∞). The unity-gain frequency of the integrator is defined as ωti = Gm / C1.\n\nFig. 12.4 A single-ended $G_{m}-C$ integrator.\nimage_name:Fig. 12.5\ndescription:The circuit is a three-input, single-ended integrator/summer circuit. The output voltage Vo is the integration of the weighted sum of the input voltages V1, V2, and V3. The weights are determined by the transconductance values Gm1, Gm2, and Gm3, and the integration is performed by the capacitor C1. The output voltage is given by Vo = (1/sC1)(Gm1*V1 - Gm2*V2 + Gm3*V3).\n\nFig. 12.5 A three-input, single-ended integrator/summer circuit.\n\nThus, the output voltage is seen to be the integration of the differential input voltage multiplied by the integrator's unity-gain frequency, which is given by\n\n$$\n\\begin{equation*}\n\\omega_{\\mathrm{ti}}=\\frac{\\mathrm{G}_{\\mathrm{m}}}{\\mathrm{C}_{1}} \\tag{12.8}\n\\end{equation*}\n$$\n\nTo create a more general integrator/summer circuit, multiple transconductors can be connected in parallel since their output currents sum together. An example of a three-input integrator/summer circuit is shown in Fig. 12.5.\n\nKey Point: Current signals can be easily summed by simply connecting them together.\n\n#### EXAMPLE 12.2\n\nWhat transconductance is required for an integrator with a unity-gain frequency of 20 MHz, assuming a 2-pF integrating capacitor?\n\n#### Solution\n\nBy rearranging (12.8), we obtain\n\n$$\n\\begin{align*}\n\\mathrm{G}_{\\mathrm{m}} & =2 \\pi \\times 20 \\mathrm{MHz} \\times 2 \\mathrm{pF}  \\tag{12.9}\\\\\n& =0.251 \\mathrm{~mA} / \\mathrm{V}\n\\end{align*}\n$$\n\nNote that this transconductance value corresponds to\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=1 / 3.98 \\mathrm{k} \\Omega \\tag{12.10}\n\\end{equation*}\n$$\n\nwhich, as expected, is related to the unity-gain frequency by\n\n$$\n\\begin{equation*}\n2 \\pi \\times 20 \\mathrm{MHz}=\\frac{1}{3.98 \\mathrm{k} \\Omega \\times 2 \\mathrm{pF}} \\tag{12.11}\n\\end{equation*}\n$$\n\nIn essence, the required transconductance value is the inverse of the resistance value needed to form an RC time constant corresponding to the desired unity-gain frequency."
},
{
    "text": "Key Point: Fully-differential circuits are often favored in analog integrated circuits due to their enhanced linearity and noise immunity.\n\nWhile the preceding blocks have been depicted with single-ended signals, ${ }^{1}$ in most integrated applications, it is preferable to maintain signals as fully differential. As discussed in Section 6.7, fully differential circuits offer superior noise immunity and distortion characteristics. Consequently, fully differential circuits are the primary focus for the rest of this chapter.\n\nA fully differential transconductor features two outputs—one positive (current flowing out for a positive input voltage) and one negative (current flowing in for a positive input voltage). This additional degree of freedom (having two outputs instead of one) allows a fully differential integrator to be implemented in two ways, as illustrated in Fig. 12.6.\n\nNote that the integrator shown in Fig. 12.6(a) requires only one-fourth the capacitance needed for the integrator in Fig. $12.6(b)$ to achieve the same integrator coefficient. Although initially, the larger size of the circuit in Fig. 12.6(b) may seem disadvantageous, it is important to note that fully differential circuits necessitate some form of common-mode feedback. This necessity arises because, while the differential signal remains stable due to the filter feedback network connections, the common-mode signal can drift if not controlled by a feedback circuit. Therefore, the stability of the common-mode feedback circuit must also be considered. Since dominant pole compensation using capacitors on the output nodes is often employed to stabilize the common-mode network, the integrator in Fig. $12.6(b)$ has the advantage that the integrating capacitors, $2 \\mathrm{C}_{1}$, can serve this purpose as well. Additionally, remember that the single capacitor in the integrator shown in Fig. 12.6(a) must be realized using integrated capacitors, which introduces top- and bottom-plate parasitic capacitances. Given that the bottom-plate parasitic capacitance can be substantial (up to 20 percent of the capacitance value), to maintain symmetry, $\\mathrm{C}_{1}$ is often implemented using two parallel capacitors, as depicted in Fig. 12.7. We consider the parallel combination of these two capacitances,\nimage_name:(a)\ndescription:\n[\nname: OpAmp, type: OpAmp, value: OpAmp, ports: {InP: vi+, InN: vi-, OutP: vo+, OutN: vo-}\nname: C1, type: Capacitor, value: C1, ports: {Np: vo+, Nn: vo-}\n]\nextrainfo:The circuit is a fully differential Gm-C integrator with a single capacitor C1. The output voltage Vo is given by the equation Vo = Io/sC1 = GmVi/sC1, and the integrator's time constant is defined as ωti = Gm/C1. The diagram illustrates the relationship between the input voltage vi, output current io, and the transconductance Gm.\nimage_name:(b)\ndescription:The circuit is a fully differential Gm-C integrator with two capacitors 2C1 connected to the output nodes Vo+ and Vo-. It is designed to provide an output voltage Vo = 2Io/(s(2C1)) = GmVi/(sC1), with a transconductance Gm and a time constant ωti = Gm/C1.\n\nFig. 12.6 Fully differential $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ integrators: (a) single capacitor, (b) two capacitors.\n\n1. The transconductor input may be differential, but its output is single-ended, and single-ended signals are typically applied to the transconductor inputs.\nimage_name:Fig. 12.7\ndescription:\n[\nname: OpAmp, type: OpAmp, value: OpAmp, ports: {InP: vi+, InN: vi-, OutP: vo+, OutN: vo-}\nname: C1, type: Capacitor, value: C1, ports: {Np: vo+, Nn: vo-}\nname: Cp1, type: Capacitor, value: Cp, ports: {Np: vo+, Nn: GND}\nname: Cp2, type: Capacitor, value: Cp, ports: {Np: vo-, Nn: GND}\n]\nextrainfo:The circuit is a fully differential Gm-C integrator with parasitic capacitances Cp. It provides an output voltage Vo = GmVi/(s(C1+Cp/2)) with a time constant ωti = Gm/(C1+Cp/2).\n\n$$\nv_{o}=\\frac{G_{m} v_{i}}{s\\left(C_{1}+C_{p} / 2\\right)} \\quad \\omega_{t i}=\\frac{G_{m}}{\\left(C_{1}+C_{p} / 2\\right)}\n$$\n\nFig. 12.7 A fully differential integrator maintaining symmetry and showing parasitic capacitances.\nimage_name:Fig. 12.8\ndescription:\n[\nname: C_X, type: Capacitor, value: C_X, ports: {Np: Vin, Nn: Vout(S)}\nname: G_m1, type: OpAmp, value: G_m1, ports: {InP: Vin(s), InN: GND, Out: Vout(S)}\nname: C_A, type: Capacitor, value: C_A, ports: {Np: Vout(S), Nn: GND}\nname: G_m2, type: OpAmp, value: G_m2, ports: {InP: GND, InN: Vout(S), Out: Vout(S)}\n]\nextrainfo:The circuit is a single-ended first-order Gm-C filter. It includes a capacitor C_X and an op-amp G_m1 connected to the input voltage Vin(s). The capacitor C_A is connected to the output of G_m1 and the input of G_m2. The output voltage Vout(s) is taken from the output of G_m2. The values of C_X and G_m1 depend on the parameters k1 and k0, respectively.\n\nFig. 12.8 A single-ended first-order $\\mathrm{G}_{m}-\\mathrm{C}$ filter.\nwhich equals $C_{1}$, and incorporate the effect of the parasitic capacitances, $C_{p}$, to derive the output voltage, given by\n\n$$\n\\begin{equation*}\nV_{o}=\\frac{G_{m} V_{i}}{s\\left(C_{1}+C_{p} / 2\\right)} \\tag{12.12}\n\\end{equation*}\n$$\n\nThus, it is evident that the parasitic capacitances influence the integration coefficient and must be accounted for."
},
{
    "text": "Key Point: Fully-differential circuits are often favored in analog integrated circuits due to their enhanced linearity and noise immunity.\n\nWhile the preceding blocks have demonstrated single-ended signals, ${ }^{1}$ in most integrated applications, it is preferable to maintain fully differential signals. As covered in Section 6.7, fully differential circuits offer superior noise immunity and distortion characteristics. Consequently, fully differential circuits are the main focus for the rest of this chapter.\n\nA fully differential transconductor features two outputs—one positive (current flowing out for a positive input voltage) and one negative (current flowing in for a positive input voltage). This additional degree of freedom (having two outputs instead of one) allows a fully differential integrator to be implemented in two ways, as depicted in Fig. 12.6.\n\nNote that the integrator in Fig. 12.6(a) requires only one-fourth the capacitance needed for the integrator in Fig. $12.6(b)$ to achieve the same integrator coefficient. Although initially, the larger size of the circuit in Fig. 12.6(b) may seem disadvantageous, it is important to note that fully differential circuits necessitate some form of common-mode feedback. This necessity arises because, while the differential signal remains stable due to the filter feedback network connections, the common-mode signal can drift if not controlled by a feedback circuit. Therefore, the stability of the common-mode feedback circuit must also be considered. Since dominant pole compensation using capacitors on the output nodes is often employed to stabilize the common-mode network, the integrator in Fig. $12.6(b)$ has the advantage that the integrating capacitors, $2 \\mathrm{C}_{1}$, can serve this purpose as well. Additionally, remember that the single capacitor in the integrator shown in Fig. 12.6(a) must be realized using integrated capacitors, which introduces top- and bottom-plate parasitic capacitances. Given that the bottom-plate parasitic capacitance can be significant (up to 20 percent of the capacitance value), to maintain symmetry, $\\mathrm{C}_{1}$ is often implemented using two parallel capacitors, as illustrated in Fig. 12.7. We consider the parallel combination of these two capacitances,\nimage_name:(a)\ndescription:\n[\nname: OpAmp, type: OpAmp, value: OpAmp, ports: {InP: vi+, InN: vi-, OutP: vo+, OutN: vo-}\nname: C1, type: Capacitor, value: C1, ports: {Np: vo+, Nn: vo-}\n]\nextrainfo:The circuit is a fully differential Gm-C integrator with a single capacitor C1. The output voltage Vo is given by the equation Vo = Io/sC1 = GmVi/sC1, and the integrator's time constant is defined as ωti = Gm/C1. The diagram illustrates the relationship between the input voltage vi, output current io, and the transconductance Gm.\nimage_name:(b)\ndescription:The circuit is a fully differential Gm-C integrator with two capacitors 2C1 connected to the output nodes Vo+ and Vo-. It is designed to provide an output voltage Vo = 2Io/(s(2C1)) = GmVi/(sC1), with a transconductance Gm and a time constant ωti = Gm/C1.\n\nFig. 12.6 Fully differential $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ integrators: (a) single capacitor, (b) two capacitors.\n\n1. The transconductor input may be differential, but its output is single-ended, and single-ended signals are typically applied to the transconductor inputs.\nimage_name:Fig. 12.7\ndescription:\n[\nname: OpAmp, type: OpAmp, value: OpAmp, ports: {InP: vi+, InN: vi-, OutP: vo+, OutN: vo-}\nname: C1, type: Capacitor, value: C1, ports: {Np: vo+, Nn: vo-}\nname: Cp1, type: Capacitor, value: Cp, ports: {Np: vo+, Nn: GND}\nname: Cp2, type: Capacitor, value: Cp, ports: {Np: vo-, Nn: GND}\n]\nextrainfo:The circuit is a fully differential Gm-C integrator with parasitic capacitances Cp. It provides an output voltage Vo = GmVi/(s(C1+Cp/2)) with a time constant ωti = Gm/(C1+Cp/2).\n\n$$\nv_{o}=\\frac{G_{m} v_{i}}{s\\left(C_{1}+C_{p} / 2\\right)} \\quad \\omega_{t i}=\\frac{G_{m}}{\\left(C_{1}+C_{p} / 2\\right)}\n$$\n\nFig. 12.7 A fully differential integrator maintaining symmetry and showing parasitic capacitances.\nimage_name:Fig. 12.8\ndescription:\n[\nname: C_X, type: Capacitor, value: C_X, ports: {Np: Vin, Nn: Vout(S)}\nname: G_m1, type: OpAmp, value: G_m1, ports: {InP: Vin(s), InN: GND, Out: Vout(S)}\nname: C_A, type: Capacitor, value: C_A, ports: {Np: Vout(S), Nn: GND}\nname: G_m2, type: OpAmp, value: G_m2, ports: {InP: GND, InN: Vout(S), Out: Vout(S)}\n]\nextrainfo:The circuit is a single-ended first-order Gm-C filter. It includes a capacitor C_X and an op-amp G_m1 connected to the input voltage Vin(s). The capacitor C_A is connected to the output of G_m1 and the input of G_m2. The output voltage Vout(s) is taken from the output of G_m2. The values of C_X and G_m1 depend on the parameters k1 and k0, respectively.\n\nFig. 12.8 A single-ended first-order $\\mathrm{G}_{m}-\\mathrm{C}$ filter.\nwhich equals $C_{1}$, and include the effect of the parasitic capacitances, $C_{p}$, to obtain the output voltage, given by\n\n$$\n\\begin{equation*}\nV_{o}=\\frac{G_{m} V_{i}}{s\\left(C_{1}+C_{p} / 2\\right)} \\tag{12.12}\n\\end{equation*}\n$$\n\nThus, it is evident that the parasitic capacitances influence the integration coefficient and must be accounted for."
},
{
    "text": "Key Point: Fully-differential circuits are often favored in analog integrated circuits due to their enhanced linearity and noise immunity.\n\nWhile the preceding blocks have been depicted with single-ended signals, ${ }^{1}$ in most integrated applications, it is preferable to maintain fully differential signals. As discussed in Section 6.7, fully differential circuits offer superior noise immunity and distortion characteristics. Consequently, fully differential circuits are the primary focus for the remainder of this chapter.\n\nA fully differential transconductor features two outputs: a positive output (current flowing out for a positive input voltage) and a negative output (current flowing in for a positive input voltage). This additional degree of freedom (having two outputs instead of one) allows a fully differential integrator to be implemented in one of two ways, as illustrated in Fig. 12.6.\n\nIt is important to note that the integrator depicted in Fig. 12.6(a) requires only one-fourth the capacitance needed for the integrator in Fig. $12.6(b)$ to achieve the same integrator coefficient. Although initially, the larger size of the circuit in Fig. 12.6(b) may seem disadvantageous, it is essential to consider that fully differential circuits necessitate some form of common-mode feedback. This necessity arises because, while the differential signal remains stable due to the filter feedback network connections, the common-mode signal can drift if not controlled by a feedback circuit. Therefore, the stability of the common-mode feedback circuit must also be addressed. Since dominant pole compensation using capacitors on the output nodes is commonly employed to stabilize the common-mode network, the integrator shown in Fig. $12.6(b)$ has the advantage that the integrating capacitors, $2 \\mathrm{C}_{1}$, can serve this purpose as well. Additionally, remember that the single capacitor in the integrator shown in Fig. 12.6(a) must be realized using integrated capacitors, which introduces top- and bottom-plate parasitic capacitances. Given that the bottom-plate parasitic capacitance can be substantial (up to 20 percent of the capacitance value), to maintain symmetry, $\\mathrm{C}_{1}$ is often implemented using two parallel capacitors, as shown in Fig. 12.7. We consider the parallel combination of these two capacitances,\nimage_name:(a)\ndescription:\n[\nname: OpAmp, type: OpAmp, value: OpAmp, ports: {InP: vi+, InN: vi-, OutP: vo+, OutN: vo-}\nname: C1, type: Capacitor, value: C1, ports: {Np: vo+, Nn: vo-}\n]\nextrainfo:The circuit is a fully differential Gm-C integrator with a single capacitor C1. The output voltage Vo is given by the equation Vo = Io/sC1 = GmVi/sC1, and the integrator's time constant is defined as ωti = Gm/C1. The diagram illustrates the relationship between the input voltage vi, output current io, and the transconductance Gm.\nimage_name:(b)\ndescription:The circuit is a fully differential Gm-C integrator with two capacitors 2C1 connected to the output nodes Vo+ and Vo-. It is designed to provide an output voltage Vo = 2Io/(s(2C1)) = GmVi/(sC1), with a transconductance Gm and a time constant ωti = Gm/C1.\n\nFig. 12.6 Fully differential $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ integrators: (a) single capacitor, (b) two capacitors.\n\n1. The transconductor input may be differential, but its output is single-ended, and single-ended signals are typically applied to the transconductor inputs.\nimage_name:Fig. 12.7\ndescription:\n[\nname: OpAmp, type: OpAmp, value: OpAmp, ports: {InP: vi+, InN: vi-, OutP: vo+, OutN: vo-}\nname: C1, type: Capacitor, value: C1, ports: {Np: vo+, Nn: vo-}\nname: Cp1, type: Capacitor, value: Cp, ports: {Np: vo+, Nn: GND}\nname: Cp2, type: Capacitor, value: Cp, ports: {Np: vo-, Nn: GND}\n]\nextrainfo:The circuit is a fully differential Gm-C integrator with parasitic capacitances Cp. It provides an output voltage Vo = GmVi/(s(C1+Cp/2)) with a time constant ωti = Gm/(C1+Cp/2).\n\n$$\nv_{o}=\\frac{G_{m} v_{i}}{s\\left(C_{1}+C_{p} / 2\\right)} \\quad \\omega_{t i}=\\frac{G_{m}}{\\left(C_{1}+C_{p} / 2\\right)}\n$$\n\nFig. 12.7 A fully differential integrator maintaining symmetry and showing parasitic capacitances.\nimage_name:Fig. 12.8\ndescription:\n[\nname: C_X, type: Capacitor, value: C_X, ports: {Np: Vin, Nn: Vout(S)}\nname: G_m1, type: OpAmp, value: G_m1, ports: {InP: Vin(s), InN: GND, Out: Vout(S)}\nname: C_A, type: Capacitor, value: C_A, ports: {Np: Vout(S), Nn: GND}\nname: G_m2, type: OpAmp, value: G_m2, ports: {InP: GND, InN: Vout(S), Out: Vout(S)}\n]\nextrainfo:The circuit is a single-ended first-order Gm-C filter. It includes a capacitor C_X and an op-amp G_m1 connected to the input voltage Vin(s). The capacitor C_A is connected to the output of G_m1 and the input of G_m2. The output voltage Vout(s) is taken from the output of G_m2. The values of C_X and G_m1 depend on the parameters k1 and k0, respectively.\n\nFig. 12.8 A single-ended first-order $\\mathrm{G}_{m}-\\mathrm{C}$ filter.\nwhich equals $C_{1}$, and incorporate the impact of the parasitic capacitances, $C_{p}$, to derive the output voltage, given by\n\n$$\n\\begin{equation*}\nV_{o}=\\frac{G_{m} V_{i}}{s\\left(C_{1}+C_{p} / 2\\right)} \\tag{12.12}\n\\end{equation*}\n$$\n\nThus, it is evident that the parasitic capacitances influence the integration coefficient and must be accounted for."
},
{
    "text": "Key Point: Fully-differential circuits are frequently favored in analog integrated circuits due to their enhanced linearity and noise resistance.\n\nWhile the preceding sections have depicted single-ended signals, ${ }^{1}$ in most integrated scenarios, it is advantageous to maintain fully differential signals. As elaborated in Section 6.7, fully differential circuits offer superior noise immunity and reduced distortion. Consequently, the remainder of this chapter primarily concentrates on fully differential circuits.\n\nA fully differential transconductor features two outputs—one positive (current exiting for a positive input voltage) and one negative (current entering for a positive input voltage). This additional degree of freedom (having two outputs instead of one) allows for the implementation of a fully differential integrator in two distinct configurations, as illustrated in Fig. 12.6.\n\nIt is important to note that the integrator in Fig. 12.6(a) necessitates only one-fourth the capacitance required by the integrator in Fig. $12.6(b)$ to achieve an equivalent integrator coefficient. Although the larger size of the circuit in Fig. 12.6(b) might seem disadvantageous initially, it is crucial to acknowledge that fully differential circuits require some form of common-mode feedback. This necessity arises because, while the differential signal remains stable due to the filter feedback network connections, the common-mode signal can drift if not controlled by a feedback circuit. Consequently, the stability of the common-mode feedback circuit must also be considered. Since dominant pole compensation using capacitors on the output nodes is commonly employed to stabilize the common-mode network, the integrator in Fig. $12.6(b)$ benefits from the fact that the integrating capacitors, $2 \\mathrm{C}_{1}$, can serve this purpose as well. Additionally, remember that the single capacitor in the integrator shown in Fig. 12.6(a) must be realized using integrated capacitors, which introduces top- and bottom-plate parasitic capacitances. Given that the bottom-plate parasitic capacitance can be substantial (up to 20 percent of the capacitance value), symmetry is often maintained by realizing $\\mathrm{C}_{1}$ using two parallel capacitors, as depicted in Fig. 12.7. We consider the parallel combination of these two capacitances,\nimage_name:(a)\ndescription:\n[\nname: OpAmp, type: OpAmp, value: OpAmp, ports: {InP: vi+, InN: vi-, OutP: vo+, OutN: vo-}\nname: C1, type: Capacitor, value: C1, ports: {Np: vo+, Nn: vo-}\n]\nextrainfo:The circuit is a fully differential Gm-C integrator with a single capacitor C1. The output voltage Vo is given by the equation Vo = Io/sC1 = GmVi/sC1, and the integrator's time constant is defined as ωti = Gm/C1. The diagram illustrates the relationship between the input voltage vi, output current io, and the transconductance Gm.\nimage_name:(b)\ndescription:The circuit is a fully differential Gm-C integrator with two capacitors 2C1 connected to the output nodes Vo+ and Vo-. It is designed to provide an output voltage Vo = 2Io/(s(2C1)) = GmVi/(sC1), with a transconductance Gm and a time constant ωti = Gm/C1.\n\nFig. 12.6 Fully differential $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ integrators: (a) single capacitor, (b) two capacitors.\n\n1. The transconductor input may be differential, but its output is single-ended, and single-ended signals are typically applied to the transconductor inputs.\nimage_name:Fig. 12.7\ndescription:\n[\nname: OpAmp, type: OpAmp, value: OpAmp, ports: {InP: vi+, InN: vi-, OutP: vo+, OutN: vo-}\nname: C1, type: Capacitor, value: C1, ports: {Np: vo+, Nn: vo-}\nname: Cp1, type: Capacitor, value: Cp, ports: {Np: vo+, Nn: GND}\nname: Cp2, type: Capacitor, value: Cp, ports: {Np: vo-, Nn: GND}\n]\nextrainfo:The circuit is a fully differential Gm-C integrator with parasitic capacitances Cp. It provides an output voltage Vo = GmVi/(s(C1+Cp/2)) with a time constant ωti = Gm/(C1+Cp/2).\n\n$$\nv_{o}=\\frac{G_{m} v_{i}}{s\\left(C_{1}+C_{p} / 2\\right)} \\quad \\omega_{t i}=\\frac{G_{m}}{\\left(C_{1}+C_{p} / 2\\right)}\n$$\n\nFig. 12.7 A fully differential integrator maintaining symmetry and showing parasitic capacitances.\nimage_name:Fig. 12.8\ndescription:\n[\nname: C_X, type: Capacitor, value: C_X, ports: {Np: Vin, Nn: Vout(S)}\nname: G_m1, type: OpAmp, value: G_m1, ports: {InP: Vin(s), InN: GND, Out: Vout(S)}\nname: C_A, type: Capacitor, value: C_A, ports: {Np: Vout(S), Nn: GND}\nname: G_m2, type: OpAmp, value: G_m2, ports: {InP: GND, InN: Vout(S), Out: Vout(S)}\n]\nextrainfo:The circuit is a single-ended first-order Gm-C filter. It includes a capacitor C_X and an op-amp G_m1 connected to the input voltage Vin(s). The capacitor C_A is connected to the output of G_m1 and the input of G_m2. The output voltage Vout(s) is taken from the output of G_m2. The values of C_X and G_m1 depend on the parameters k1 and k0, respectively.\n\nFig. 12.8 A single-ended first-order $\\mathrm{G}_{m}-\\mathrm{C}$ filter.\nwhich equals $C_{1}$, and incorporate the impact of the parasitic capacitances, $C_{p}$, to derive the output voltage, expressed as\n\n$$\n\\begin{equation*}\nV_{o}=\\frac{G_{m} V_{i}}{s\\left(C_{1}+C_{p} / 2\\right)} \\tag{12.12}\n\\end{equation*}\n$$\n\nThus, it becomes evident that parasitic capacitances influence the integration coefficient and must be accounted for."
},
{
    "text": "Key Point: Fully-differential circuits are often favored in analog integrated circuits due to their enhanced linearity and noise immunity.\n\nWhile the preceding blocks have been illustrated with single-ended signals, ${ }^{1}$ in most integrated applications, it is preferable to maintain signals as fully differential. As discussed in Section 6.7, fully differential circuits offer superior noise immunity and distortion characteristics. Consequently, fully differential circuits are the primary focus for the remainder of this chapter.\n\nA fully differential transconductor features two outputs—one positive (current flowing out for a positive input voltage) and one negative (current flowing in for a positive input voltage). This additional degree of freedom (having two outputs instead of one) allows a fully differential integrator to be implemented in two ways, as depicted in Fig. 12.6.\n\nIt should be noted that the integrator in Fig. 12.6(a) requires only one-fourth the capacitance needed for the integrator in Fig. $12.6(b)$ to achieve the same integrator coefficient. Although the increased size of the circuit in Fig. 12.6(b) may seem disadvantageous at first, it is important to highlight that fully differential circuits necessitate some form of common-mode feedback. This necessity arises because, while the differential signal remains stable due to the filter feedback network connections, the common-mode signal can drift if not controlled by a feedback circuit. Therefore, the stability of the common-mode feedback circuit must also be considered. Since dominant pole compensation using capacitors on the output nodes is commonly employed to stabilize the common-mode network, the integrator in Fig. $12.6(b)$ has the advantage that the integrating capacitors, $2 \\mathrm{C}_{1}$, can serve this purpose as well. Additionally, remember that the single capacitor in the integrator shown in Fig. 12.6(a) must be realized using integrated capacitors, which introduces top- and bottom-plate parasitic capacitances. Given that the bottom-plate parasitic capacitance can be substantial (up to 20 percent of the capacitance value), $\\mathrm{C}_{1}$ is often implemented using two parallel capacitors to maintain symmetry, as illustrated in Fig. 12.7. We consider the parallel combination of these two capacitances,\nimage_name:(a)\ndescription:\n[\nname: OpAmp, type: OpAmp, value: OpAmp, ports: {InP: vi+, InN: vi-, OutP: vo+, OutN: vo-}\nname: C1, type: Capacitor, value: C1, ports: {Np: vo+, Nn: vo-}\n]\nextrainfo:The circuit is a fully differential Gm-C integrator with a single capacitor C1. The output voltage Vo is given by the equation Vo = Io/sC1 = GmVi/sC1, and the integrator's time constant is defined as ωti = Gm/C1. The diagram illustrates the relationship between the input voltage vi, output current io, and the transconductance Gm.\nimage_name:(b)\ndescription:The circuit is a fully differential Gm-C integrator with two capacitors 2C1 connected to the output nodes Vo+ and Vo-. It is designed to provide an output voltage Vo = 2Io/(s(2C1)) = GmVi/(sC1), with a transconductance Gm and a time constant ωti = Gm/C1.\n\nFig. 12.6 Fully differential $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ integrators: (a) single capacitor, (b) two capacitors.\n\n1. The transconductor input may be differential, but its output is single-ended, and single-ended signals are typically applied to the transconductor inputs.\nimage_name:Fig. 12.7\ndescription:\n[\nname: OpAmp, type: OpAmp, value: OpAmp, ports: {InP: vi+, InN: vi-, OutP: vo+, OutN: vo-}\nname: C1, type: Capacitor, value: C1, ports: {Np: vo+, Nn: vo-}\nname: Cp1, type: Capacitor, value: Cp, ports: {Np: vo+, Nn: GND}\nname: Cp2, type: Capacitor, value: Cp, ports: {Np: vo-, Nn: GND}\n]\nextrainfo:The circuit is a fully differential Gm-C integrator with parasitic capacitances Cp. It provides an output voltage Vo = GmVi/(s(C1+Cp/2)) with a time constant ωti = Gm/(C1+Cp/2).\n\n$$\nv_{o}=\\frac{G_{m} v_{i}}{s\\left(C_{1}+C_{p} / 2\\right)} \\quad \\omega_{t i}=\\frac{G_{m}}{\\left(C_{1}+C_{p} / 2\\right)}\n$$\n\nFig. 12.7 A fully differential integrator maintaining symmetry and showing parasitic capacitances.\nimage_name:Fig. 12.8\ndescription:\n[\nname: C_X, type: Capacitor, value: C_X, ports: {Np: Vin, Nn: Vout(S)}\nname: G_m1, type: OpAmp, value: G_m1, ports: {InP: Vin(s), InN: GND, Out: Vout(S)}\nname: C_A, type: Capacitor, value: C_A, ports: {Np: Vout(S), Nn: GND}\nname: G_m2, type: OpAmp, value: G_m2, ports: {InP: GND, InN: Vout(S), Out: Vout(S)}\n]\nextrainfo:The circuit is a single-ended first-order Gm-C filter. It includes a capacitor C_X and an op-amp G_m1 connected to the input voltage Vin(s). The capacitor C_A is connected to the output of G_m1 and the input of G_m2. The output voltage Vout(s) is taken from the output of G_m2. The values of C_X and G_m1 depend on the parameters k1 and k0, respectively.\n\nFig. 12.8 A single-ended first-order $\\mathrm{G}_{m}-\\mathrm{C}$ filter.\nwhich equals $C_{1}$, and account for the parasitic capacitances, $C_{p}$, to derive the output voltage, expressed as\n\n$$\n\\begin{equation*}\nV_{o}=\\frac{G_{m} V_{i}}{s\\left(C_{1}+C_{p} / 2\\right)} \\tag{12.12}\n\\end{equation*}\n$$\n\nThus, it is evident that parasitic capacitances influence the integration coefficient and must be considered."
},
{
    "text": "Key Point: Fully-differential circuits are frequently chosen for analog integrated circuits due to their enhanced linearity and noise resistance.\n\nWhile the previous blocks have been depicted with single-ended signals, ${ }^{1}$ in most integrated applications, it is preferable to maintain fully differential signals. As detailed in Section 6.7, fully differential circuits offer superior noise immunity and reduced distortion. Consequently, fully differential circuits are the main focus for the rest of this chapter.\n\nA fully differential transconductor features two outputs: one positive (current flows out for a positive input voltage) and one negative (current flows in for a positive input voltage). This additional degree of freedom (having two outputs rather than one) allows a fully differential integrator to be implemented in two ways, as illustrated in Fig. 12.6.\n\nNote that the integrator in Fig. 12.6(a) requires only one-fourth the capacitance needed for the integrator in Fig. $12.6(b)$ to achieve the same integrator coefficient. Although initially, the larger size of the circuit in Fig. 12.6(b) seems disadvantageous, it is important to note that fully differential circuits necessitate some form of common-mode feedback. This necessity arises because, while the differential signal remains stable due to the filter feedback network connections, the common-mode signal can drift if not controlled by a feedback circuit. Therefore, the stability of the common-mode feedback circuit must also be considered. Since dominant pole compensation using capacitors on the output nodes is often employed to stabilize the common-mode network, the integrator in Fig. $12.6(b)$ has the advantage that the integrating capacitors, $2 \\mathrm{C}_{1}$, can serve this purpose as well. Additionally, remember that the single capacitor in the integrator shown in Fig. 12.6(a) must be realized using integrated capacitors, which introduces top- and bottom-plate parasitic capacitances. Given that the bottom-plate parasitic capacitance can be significant (up to 20 percent of the capacitance value), to maintain symmetry, $\\mathrm{C}_{1}$ is often implemented using two parallel capacitors, as depicted in Fig. 12.7. We consider the parallel combination of these two capacitances,\nimage_name:(a)\ndescription:\n[\nname: OpAmp, type: OpAmp, value: OpAmp, ports: {InP: vi+, InN: vi-, OutP: vo+, OutN: vo-}\nname: C1, type: Capacitor, value: C1, ports: {Np: vo+, Nn: vo-}\n]\nextrainfo:The circuit is a fully differential Gm-C integrator with a single capacitor C1. The output voltage Vo is given by the equation Vo = Io/sC1 = GmVi/sC1, and the integrator's time constant is defined as ωti = Gm/C1. The diagram illustrates the relationship between the input voltage vi, output current io, and the transconductance Gm.\nimage_name:(b)\ndescription:The circuit is a fully differential Gm-C integrator with two capacitors 2C1 connected to the output nodes Vo+ and Vo-. It is designed to provide an output voltage Vo = 2Io/(s(2C1)) = GmVi/(sC1), with a transconductance Gm and a time constant ωti = Gm/C1.\n\nFig. 12.6 Fully differential $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ integrators: (a) single capacitor, (b) two capacitors.\n\n1. The transconductor input may be differential, but its output is single-ended, and single-ended signals are typically applied to the transconductor inputs.\nimage_name:Fig. 12.7\ndescription:\n[\nname: OpAmp, type: OpAmp, value: OpAmp, ports: {InP: vi+, InN: vi-, OutP: vo+, OutN: vo-}\nname: C1, type: Capacitor, value: C1, ports: {Np: vo+, Nn: vo-}\nname: Cp1, type: Capacitor, value: Cp, ports: {Np: vo+, Nn: GND}\nname: Cp2, type: Capacitor, value: Cp, ports: {Np: vo-, Nn: GND}\n]\nextrainfo:The circuit is a fully differential Gm-C integrator with parasitic capacitances Cp. It provides an output voltage Vo = GmVi/(s(C1+Cp/2)) with a time constant ωti = Gm/(C1+Cp/2).\n\n$$\nv_{o}=\\frac{G_{m} v_{i}}{s\\left(C_{1}+C_{p} / 2\\right)} \\quad \\omega_{t i}=\\frac{G_{m}}{\\left(C_{1}+C_{p} / 2\\right)}\n$$\n\nFig. 12.7 A fully differential integrator maintaining symmetry and showing parasitic capacitances.\nimage_name:Fig. 12.8\ndescription:\n[\nname: C_X, type: Capacitor, value: C_X, ports: {Np: Vin, Nn: Vout(S)}\nname: G_m1, type: OpAmp, value: G_m1, ports: {InP: Vin(s), InN: GND, Out: Vout(S)}\nname: C_A, type: Capacitor, value: C_A, ports: {Np: Vout(S), Nn: GND}\nname: G_m2, type: OpAmp, value: G_m2, ports: {InP: GND, InN: Vout(S), Out: Vout(S)}\n]\nextrainfo:The circuit is a single-ended first-order Gm-C filter. It includes a capacitor C_X and an op-amp G_m1 connected to the input voltage Vin(s). The capacitor C_A is connected to the output of G_m1 and the input of G_m2. The output voltage Vout(s) is taken from the output of G_m2. The values of C_X and G_m1 depend on the parameters k1 and k0, respectively.\n\nFig. 12.8 A single-ended first-order $\\mathrm{G}_{m}-\\mathrm{C}$ filter.\nwhich equals $C_{1}$, and incorporate the impact of the parasitic capacitances, $C_{p}$, to derive the output voltage, expressed as\n\n$$\n\\begin{equation*}\nV_{o}=\\frac{G_{m} V_{i}}{s\\left(C_{1}+C_{p} / 2\\right)} \\tag{12.12}\n\\end{equation*}\n$$\n\nThus, it is evident that parasitic capacitances influence the integration coefficient and must be accounted for."
},
{
    "text": "Key Point: Fully-differential circuits are often favored in analog integrated circuits due to their enhanced linearity and noise resistance.\n\nWhile the preceding blocks have been depicted with single-ended signals, ${ }^{1}$ in most integrated applications, it is advantageous to maintain fully differential signals. As discussed in Section 6.7, fully differential circuits offer superior noise immunity and distortion characteristics. Consequently, fully differential circuits will be the primary focus for the rest of this chapter.\n\nA fully differential transconductor features two outputs—one positive (current flowing out for a positive input voltage) and one negative (current flowing in for a positive input voltage). This additional degree of freedom (having two outputs rather than one) allows a fully differential integrator to be implemented in one of two ways, as illustrated in Fig. 12.6.\n\nNote that the integrator depicted in Fig. 12.6(a) requires only one-fourth the capacitance needed for the integrator in Fig. $12.6(b)$ to achieve the same integrator coefficient. Although initially, the increased size of the circuit in Fig. 12.6(b) may seem disadvantageous, it is important to note that fully differential circuits necessitate some form of common-mode feedback. This necessity arises because, while the differential signal remains stable due to the filter feedback network connections, the common-mode signal can drift if not controlled by a feedback circuit. Therefore, the stability of the common-mode feedback circuit must also be considered. Since dominant pole compensation using capacitors on the output nodes is commonly employed to stabilize the common-mode network, the integrator shown in Fig. $12.6(b)$ has the benefit that the integrating capacitors, $2 \\mathrm{C}_{1}$, can also serve this purpose. Additionally, remember that the single capacitor in the integrator shown in Fig. 12.6(a) must be realized using integrated capacitors, which introduces top- and bottom-plate parasitic capacitances. Given that the bottom-plate parasitic capacitance can be substantial (up to 20 percent of the capacitance value), to maintain symmetry, $\\mathrm{C}_{1}$ is often implemented using two parallel capacitors, as shown in Fig. 12.7. We consider the parallel combination of these two capacitances,\nimage_name:(a)\ndescription:\n[\nname: OpAmp, type: OpAmp, value: OpAmp, ports: {InP: vi+, InN: vi-, OutP: vo+, OutN: vo-}\nname: C1, type: Capacitor, value: C1, ports: {Np: vo+, Nn: vo-}\n]\nextrainfo:The circuit is a fully differential Gm-C integrator with a single capacitor C1. The output voltage Vo is given by the equation Vo = Io/sC1 = GmVi/sC1, and the integrator's time constant is defined as ωti = Gm/C1. The diagram illustrates the relationship between the input voltage vi, output current io, and the transconductance Gm.\nimage_name:(b)\ndescription:The circuit is a fully differential Gm-C integrator with two capacitors 2C1 connected to the output nodes Vo+ and Vo-. It is designed to provide an output voltage Vo = 2Io/(s(2C1)) = GmVi/(sC1), with a transconductance Gm and a time constant ωti = Gm/C1.\n\nFig. 12.6 Fully differential $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ integrators: (a) single capacitor, (b) two capacitors.\n\n1. The transconductor input may be differential, but its output is single-ended, and single-ended signals are typically applied to the transconductor inputs.\nimage_name:Fig. 12.7\ndescription:\n[\nname: OpAmp, type: OpAmp, value: OpAmp, ports: {InP: vi+, InN: vi-, OutP: vo+, OutN: vo-}\nname: C1, type: Capacitor, value: C1, ports: {Np: vo+, Nn: vo-}\nname: Cp1, type: Capacitor, value: Cp, ports: {Np: vo+, Nn: GND}\nname: Cp2, type: Capacitor, value: Cp, ports: {Np: vo-, Nn: GND}\n]\nextrainfo:The circuit is a fully differential Gm-C integrator with parasitic capacitances Cp. It provides an output voltage Vo = GmVi/(s(C1+Cp/2)) with a time constant ωti = Gm/(C1+Cp/2).\n\n$$\nv_{o}=\\frac{G_{m} v_{i}}{s\\left(C_{1}+C_{p} / 2\\right)} \\quad \\omega_{t i}=\\frac{G_{m}}{\\left(C_{1}+C_{p} / 2\\right)}\n$$\n\nFig. 12.7 A fully differential integrator maintaining symmetry and showing parasitic capacitances.\nimage_name:Fig. 12.8\ndescription:\n[\nname: C_X, type: Capacitor, value: C_X, ports: {Np: Vin, Nn: Vout(S)}\nname: G_m1, type: OpAmp, value: G_m1, ports: {InP: Vin(s), InN: GND, Out: Vout(S)}\nname: C_A, type: Capacitor, value: C_A, ports: {Np: Vout(S), Nn: GND}\nname: G_m2, type: OpAmp, value: G_m2, ports: {InP: GND, InN: Vout(S), Out: Vout(S)}\n]\nextrainfo:The circuit is a single-ended first-order Gm-C filter. It includes a capacitor C_X and an op-amp G_m1 connected to the input voltage Vin(s). The capacitor C_A is connected to the output of G_m1 and the input of G_m2. The output voltage Vout(s) is taken from the output of G_m2. The values of C_X and G_m1 depend on the parameters k1 and k0, respectively.\n\nFig. 12.8 A single-ended first-order $\\mathrm{G}_{m}-\\mathrm{C}$ filter.\nwhich equals $C_{1}$, and incorporate the impact of the parasitic capacitances, $C_{p}$, to derive the output voltage, given by\n\n$$\n\\begin{equation*}\nV_{o}=\\frac{G_{m} V_{i}}{s\\left(C_{1}+C_{p} / 2\\right)} \\tag{12.12}\n\\end{equation*}\n$$\n\nThus, it is evident that the parasitic capacitances influence the integration coefficient and must be accounted for."
},
{
    "text": "Key Point: Fully-differential circuits are often favored in analog integrated circuits due to their enhanced linearity and noise immunity.\n\nWhile the preceding blocks have been illustrated with single-ended signals, ${ }^{1}$ in most integrated applications, it is preferable to maintain fully differential signals. As detailed in Section 6.7, fully differential circuits offer superior noise immunity and distortion characteristics. Consequently, fully differential circuits are the primary focus for the rest of this chapter.\n\nA fully differential transconductor features two outputs: a positive output (current flowing out for a positive input voltage) and a negative output (current flowing in for a positive input voltage). This additional degree of freedom (having two outputs instead of one) allows a fully differential integrator to be implemented in one of two ways, as depicted in Fig. 12.6.\n\nIt is noteworthy that the integrator in Fig. 12.6(a) requires only one-fourth the capacitance needed for the integrator in Fig. $12.6(b)$ to achieve the same integrator coefficient. Although the larger size of the circuit in Fig. 12.6(b) may seem disadvantageous at first, it is important to highlight that fully differential circuits necessitate some form of common-mode feedback. This necessity arises because, while the differential signal remains stable due to the filter feedback network connections, the common-mode signal can drift if not controlled by a feedback circuit. Therefore, the stability of the common-mode feedback circuit must also be considered. Since dominant pole compensation using capacitors on the output nodes is commonly employed to stabilize the common-mode network, the integrator in Fig. $12.6(b)$ has the advantage that the integrating capacitors, $2 \\mathrm{C}_{1}$, can serve this purpose as well. Additionally, remember that the single capacitor in the integrator shown in Fig. 12.6(a) must be realized using integrated capacitors, which introduces top- and bottom-plate parasitic capacitances. Given that the bottom-plate parasitic capacitance can be substantial (up to 20 percent of the capacitance value), to maintain symmetry, $\\mathrm{C}_{1}$ is often implemented using two parallel capacitors, as illustrated in Fig. 12.7. We consider the parallel combination of these two capacitances,\nimage_name:(a)\ndescription:\n[\nname: OpAmp, type: OpAmp, value: OpAmp, ports: {InP: vi+, InN: vi-, OutP: vo+, OutN: vo-}\nname: C1, type: Capacitor, value: C1, ports: {Np: vo+, Nn: vo-}\n]\nextrainfo:The circuit is a fully differential Gm-C integrator with a single capacitor C1. The output voltage Vo is given by the equation Vo = Io/sC1 = GmVi/sC1, and the integrator's time constant is defined as ωti = Gm/C1. The diagram illustrates the relationship between the input voltage vi, output current io, and the transconductance Gm.\nimage_name:(b)\ndescription:The circuit is a fully differential Gm-C integrator with two capacitors 2C1 connected to the output nodes Vo+ and Vo-. It is designed to provide an output voltage Vo = 2Io/(s(2C1)) = GmVi/(sC1), with a transconductance Gm and a time constant ωti = Gm/C1.\n\nFig. 12.6 Fully differential $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ integrators: (a) single capacitor, (b) two capacitors.\n\n1. The transconductor input may be differential, but its output is single-ended, and single-ended signals are typically applied to the transconductor inputs.\nimage_name:Fig. 12.7\ndescription:\n[\nname: OpAmp, type: OpAmp, value: OpAmp, ports: {InP: vi+, InN: vi-, OutP: vo+, OutN: vo-}\nname: C1, type: Capacitor, value: C1, ports: {Np: vo+, Nn: vo-}\nname: Cp1, type: Capacitor, value: Cp, ports: {Np: vo+, Nn: GND}\nname: Cp2, type: Capacitor, value: Cp, ports: {Np: vo-, Nn: GND}\n]\nextrainfo:The circuit is a fully differential Gm-C integrator with parasitic capacitances Cp. It provides an output voltage Vo = GmVi/(s(C1+Cp/2)) with a time constant ωti = Gm/(C1+Cp/2).\n\n$$\nv_{o}=\\frac{G_{m} v_{i}}{s\\left(C_{1}+C_{p} / 2\\right)} \\quad \\omega_{t i}=\\frac{G_{m}}{\\left(C_{1}+C_{p} / 2\\right)}\n$$\n\nFig. 12.7 A fully differential integrator maintaining symmetry and showing parasitic capacitances.\nimage_name:Fig. 12.8\ndescription:\n[\nname: C_X, type: Capacitor, value: C_X, ports: {Np: Vin, Nn: Vout(S)}\nname: G_m1, type: OpAmp, value: G_m1, ports: {InP: Vin(s), InN: GND, Out: Vout(S)}\nname: C_A, type: Capacitor, value: C_A, ports: {Np: Vout(S), Nn: GND}\nname: G_m2, type: OpAmp, value: G_m2, ports: {InP: GND, InN: Vout(S), Out: Vout(S)}\n]\nextrainfo:The circuit is a single-ended first-order Gm-C filter. It includes a capacitor C_X and an op-amp G_m1 connected to the input voltage Vin(s). The capacitor C_A is connected to the output of G_m1 and the input of G_m2. The output voltage Vout(s) is taken from the output of G_m2. The values of C_X and G_m1 depend on the parameters k1 and k0, respectively.\n\nFig. 12.8 A single-ended first-order $\\mathrm{G}_{m}-\\mathrm{C}$ filter.\nwhich equals $C_{1}$, and account for the parasitic capacitances, $C_{p}$, to derive the output voltage, expressed as\n\n$$\n\\begin{equation*}\nV_{o}=\\frac{G_{m} V_{i}}{s\\left(C_{1}+C_{p} / 2\\right)} \\tag{12.12}\n\\end{equation*}\n$$\n\nThus, it is evident that parasitic capacitances influence the integration coefficient and must be considered."
},
{
    "text": "A single-ended $\\mathrm{G}_{\\mathrm{m}}$-C filter that implements the first-order filter shown in Fig. 12.1 is illustrated in Fig. 12.8. Observe that the gains in Fig. 12.1 are supplied by the transconductors, the integration process is carried out by the capacitor $C_{A}$, and the capacitor $C_{x}$ corresponds to the differentiating feed-in path $\\mathrm{k}_{1}$ in Fig. 12.1.\n\nThe transfer function for this first-order $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filter is determined by writing a current equation for the output node, $\\mathrm{V}_{\\text {out }}(\\mathrm{s})$:\n\n$$\n\\begin{equation*}\nG_{m 1} V_{\\text {in }}(s)+s C_{x}\\left[V_{\\text {in }}(s)-V_{\\text {out }}(s)\\right]-s C_{A} V_{\\text {out }}(s)-G_{m 2} V_{\\text {out }}(s)=0 \\tag{12.13}\n\\end{equation*}\n$$\n\nRearranging to find $\\mathrm{V}_{\\text {out }}(\\mathrm{s}) / \\mathrm{V}_{\\text {in }}(\\mathrm{s})$, we obtain\n\n$$\n\\begin{equation*}\n\\frac{V_{\\text {out }}(s)}{V_{\\text {in }}(s)}=\\frac{s C_{x}+G_{m 1}}{s\\left(C_{A}+C_{x}\\right)+G_{m 2}}=\\frac{\\left[s\\left(\\frac{C_{X}}{C_{A}+C_{X}}\\right)+\\left(\\frac{G_{m 1}}{C_{A}+C_{X}}\\right)\\right]}{\\left[s+\\left(\\frac{G_{m 2}}{C_{A}+C_{X}}\\right)\\right]} \\tag{12.14}\n\\end{equation*}\n$$\n\nimage_name:Fig. 12.9\ndescription:The circuit is a fully differential Gm-C filter. Gm1 and Gm2 are voltage-controlled current sources. Capacitors 2CX and 2CA form the filter structure. The equations provided define the relationships between the components' values and the filter parameters.\n\nFig. 12.9 A fully differential general first-order $G_{m}-C$ filter.\nBy equating (12.14) with (12.1), the following relationships are derived:\n\n$$\n\\begin{align*}\n\\mathrm{C}_{\\mathrm{x}} & =\\left(\\frac{\\mathrm{k}_{1}}{1-\\mathrm{k}_{1}}\\right) \\mathrm{C}_{\\mathrm{A}}  \\tag{12.15}\\\\\n\\mathrm{G}_{\\mathrm{m} 1} & =\\mathrm{k}_{0}\\left(\\mathrm{C}_{\\mathrm{A}}+\\mathrm{C}_{\\mathrm{x}}\\right)  \\tag{12.16}\\\\\n\\mathrm{G}_{\\mathrm{m} 2} & =\\omega_{0}\\left(\\mathrm{C}_{\\mathrm{A}}+\\mathrm{C}_{\\mathrm{X}}\\right) \\tag{12.17}\n\\end{align*}\n$$\n\nIt is important to note from (12.15) that for $\\mathrm{C}_{\\mathrm{x}}$ to be positive, the term $\\mathrm{k}_{1}$ must satisfy $0 \\leq \\mathrm{k}_{1}<1$. This restriction indicates that the depicted circuit cannot realize a filter with a high-frequency gain that is either negative or exceeds 1. This outcome is expected since the high-frequency gain of this circuit is essentially a capacitor-divider circuit, thus imposing the restriction on $\\mathrm{k}_{1}$.\n\nUltimately, the equivalent fully differential first-order $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filter is depicted in Fig. 12.9. Note that the capacitor sizes are doubled compared to the single-ended case to maintain the same design equations. Additionally, the same restriction applies to $\\mathrm{k}_{1}$, although a negative value of $\\mathrm{k}_{1}$ can be achieved by cross-coupling the feed-in capacitor pair, $\\mathrm{C}_{\\mathrm{x}}$.\n\n#### EXAMPLE 12.3\n\nUsing Fig. 12.9, determine the component values for a first-order filter with a dc gain of 0.5, a pole at 20 MHz, and a zero at 40 MHz. Assume the integrating capacitors are sized $\\mathrm{C}_{\\mathrm{A}}=2 \\mathrm{pF}$.\n\n#### Solution\n\nA first-order filter with a zero at 40 MHz and a pole at 20 MHz is expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{H}(\\mathrm{~s})=\\frac{\\mathrm{k}(\\mathrm{~s}+2 \\pi \\times 40 \\mathrm{MHz})}{(\\mathrm{s}+2 \\pi \\times 20 \\mathrm{MHz})} \\tag{12.18}\n\\end{equation*}\n$$\n\nThe leading coefficient is set by the dc gain of 0.5, resulting in $\\mathrm{k}=0.25$. Therefore, we have\n\n$$\n\\begin{equation*}\n\\mathrm{H}(\\mathrm{~s})=\\frac{0.25 \\mathrm{~s}+2 \\pi \\times 10 \\mathrm{MHz}}{\\mathrm{~s}+2 \\pi \\times 20 \\mathrm{MHz}} \\tag{12.19}\n\\end{equation*}\n$$\n\nBy equating this transfer function to (12.1), we get\n\n$$\n\\begin{gather*}\n\\mathrm{k}_{1}=0.25  \\tag{12.20}\\\\\n\\mathrm{k}_{0}=2 \\pi \\times 10^{7}  \\tag{12.21}\\\\\n\\omega_{0}=4 \\pi \\times 10^{7} \\tag{12.22}\n\\end{gather*}\n$$\n\nimage_name:Fig. 12.10\ndescription:This is a fully differential Gm-C second-order filter. The circuit uses five voltage-controlled voltage sources (Gm1 to Gm5) and several capacitors (2CA, 2CB, 2CX) to achieve the desired filtering characteristics. The input is differential (Vin+ and Vin-) and the output is also differential (Vout+ and Vout-). The capacitors are connected in a manner to provide necessary feedback and filtering paths.\n\nFig. 12.10 A general second-order filter using fully differential $G_{m}-C$ techniques.\n\nApplying the design equations from Fig. 12.9, we find\n\n$$\n\\begin{gather*}\n\\mathrm{C}_{\\mathrm{x}}=2 \\mathrm{pF} \\times \\frac{0.25}{1-0.25}=0.667 \\mathrm{pF}  \\tag{12.23}\\\\\n\\mathrm{G}_{\\mathrm{m} 1}=2 \\pi \\times 10^{7} \\times 2.667 \\mathrm{pF}=0.168 \\mathrm{~mA} / \\mathrm{V}  \\tag{12.24}\\\\\n\\mathrm{G}_{\\mathrm{m} 2}=4 \\pi \\times 10^{7} \\times 2.667 \\mathrm{pF}=0.335 \\mathrm{~mA} / \\mathrm{V} \\tag{12.25}\n\\end{gather*}\n$$\n\nwhere $\\mathrm{C}_{\\mathrm{A}}=2 \\mathrm{pF}$, as specified."
},
{
    "text": "A single-ended $\\mathrm{G}_{\\mathrm{m}}$-C filter that implements the first-order filter shown in Fig. 12.1 is illustrated in Fig. 12.8. Observe that the gains in Fig. 12.1 are supplied by the transconductors, the integration is carried out by the capacitor $C_{A}$, and the capacitor $C_{x}$ corresponds to the differentiating feed-in path $\\mathrm{k}_{1}$ in Fig. 12.1.\n\nThe transfer function for this first-order $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filter is determined by writing a current equation for the output node, $\\mathrm{V}_{\\text {out }}(\\mathrm{s})$:\n\n$$\n\\begin{equation*}\nG_{m 1} V_{\\text {in }}(s)+s C_{x}\\left[V_{\\text {in }}(s)-V_{\\text {out }}(s)\\right]-s C_{A} V_{\\text {out }}(s)-G_{m 2} V_{\\text {out }}(s)=0 \\tag{12.13}\n\\end{equation*}\n$$\n\nRearranging to find $\\mathrm{V}_{\\text {out }}(\\mathrm{s}) / \\mathrm{V}_{\\text {in }}(\\mathrm{s})$, we obtain\n\n$$\n\\begin{equation*}\n\\frac{V_{\\text {out }}(s)}{V_{\\text {in }}(s)}=\\frac{s C_{x}+G_{m 1}}{s\\left(C_{A}+C_{x}\\right)+G_{m 2}}=\\frac{\\left[s\\left(\\frac{C_{X}}{C_{A}+C_{X}}\\right)+\\left(\\frac{G_{m 1}}{C_{A}+C_{X}}\\right)\\right]}{\\left[s+\\left(\\frac{G_{m 2}}{C_{A}+C_{X}}\\right)\\right]} \\tag{12.14}\n\\end{equation*}\n$$\n\nimage_name:Fig. 12.9\ndescription:The circuit is a fully differential Gm-C filter. Gm1 and Gm2 are voltage-controlled current sources. Capacitors 2CX and 2CA form the filter structure. The equations provided define the relationships between the components' values and the filter parameters.\n\nFig. 12.9 A fully differential general first-order $G_{m}-C$ filter.\nEquating (12.14) with (12.1) yields the following relationships:\n\n$$\n\\begin{align*}\n\\mathrm{C}_{\\mathrm{x}} & =\\left(\\frac{\\mathrm{k}_{1}}{1-\\mathrm{k}_{1}}\\right) \\mathrm{C}_{\\mathrm{A}}  \\tag{12.15}\\\\\n\\mathrm{G}_{\\mathrm{m} 1} & =\\mathrm{k}_{0}\\left(\\mathrm{C}_{\\mathrm{A}}+\\mathrm{C}_{\\mathrm{x}}\\right)  \\tag{12.16}\\\\\n\\mathrm{G}_{\\mathrm{m} 2} & =\\omega_{0}\\left(\\mathrm{C}_{\\mathrm{A}}+\\mathrm{C}_{\\mathrm{X}}\\right) \\tag{12.17}\n\\end{align*}\n$$\n\nIt is important to note from (12.15) that, for $\\mathrm{C}_{\\mathrm{x}}$ to be positive, the term $\\mathrm{k}_{1}$ must satisfy $0 \\leq \\mathrm{k}_{1}<1$. This restriction implies that the depicted circuit cannot realize a filter with a high-frequency gain that is either negative or exceeds 1. Such a limitation is expected since the high-frequency gain of this circuit is essentially a capacitor-divider circuit, thus imposing the restriction on $\\mathrm{k}_{1}$.\n\nUltimately, the equivalent fully differential first-order $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filter is depicted in Fig. 12.9. Note that the capacitor sizes are doubled compared to the single-ended case to maintain the same design equations. Additionally, the same restriction applies to $\\mathrm{k}_{1}$, although a negative value of $\\mathrm{k}_{1}$ can be achieved by cross-coupling the feed-in capacitor pair, $\\mathrm{C}_{\\mathrm{x}}$.\n\n#### EXAMPLE 12.3\n\nUsing Fig. 12.9, determine the component values for a first-order filter with a dc gain of 0.5, a pole at 20 MHz, and a zero at 40 MHz. Assume the integrating capacitors are sized $\\mathrm{C}_{\\mathrm{A}}=2 \\mathrm{pF}$.\n\n#### Solution\n\nA first-order filter with a zero at 40 MHz and a pole at 20 MHz is expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{H}(\\mathrm{~s})=\\frac{\\mathrm{k}(\\mathrm{~s}+2 \\pi \\times 40 \\mathrm{MHz})}{(\\mathrm{s}+2 \\pi \\times 20 \\mathrm{MHz})} \\tag{12.18}\n\\end{equation*}\n$$\n\nThe leading coefficient is set by the dc gain of 0.5, resulting in $\\mathrm{k}=0.25$. Therefore, we have\n\n$$\n\\begin{equation*}\n\\mathrm{H}(\\mathrm{~s})=\\frac{0.25 \\mathrm{~s}+2 \\pi \\times 10 \\mathrm{MHz}}{\\mathrm{~s}+2 \\pi \\times 20 \\mathrm{MHz}} \\tag{12.19}\n\\end{equation*}\n$$\n\nEquating this transfer function to (12.1) gives\n\n$$\n\\begin{gather*}\n\\mathrm{k}_{1}=0.25  \\tag{12.20}\\\\\n\\mathrm{k}_{0}=2 \\pi \\times 10^{7}  \\tag{12.21}\\\\\n\\omega_{0}=4 \\pi \\times 10^{7} \\tag{12.22}\n\\end{gather*}\n$$\n\nimage_name:Fig. 12.10\ndescription:This is a fully differential Gm-C second-order filter. The circuit uses five voltage-controlled voltage sources (Gm1 to Gm5) and several capacitors (2CA, 2CB, 2CX) to achieve the desired filtering characteristics. The input is differential (Vin+ and Vin-) and the output is also differential (Vout+ and Vout-). The capacitors are connected in a manner to provide necessary feedback and filtering paths.\n\nFig. 12.10 A general second-order filter using fully differential $G_{m}-C$ techniques.\n\nApplying the design equations from Fig. 12.9, we find\n\n$$\n\\begin{gather*}\n\\mathrm{C}_{\\mathrm{x}}=2 \\mathrm{pF} \\times \\frac{0.25}{1-0.25}=0.667 \\mathrm{pF}  \\tag{12.23}\\\\\n\\mathrm{G}_{\\mathrm{m} 1}=2 \\pi \\times 10^{7} \\times 2.667 \\mathrm{pF}=0.168 \\mathrm{~mA} / \\mathrm{V}  \\tag{12.24}\\\\\n\\mathrm{G}_{\\mathrm{m} 2}=4 \\pi \\times 10^{7} \\times 2.667 \\mathrm{pF}=0.335 \\mathrm{~mA} / \\mathrm{V} \\tag{12.25}\n\\end{gather*}\n$$\n\nwhere $\\mathrm{C}_{\\mathrm{A}}=2 \\mathrm{pF}$, as specified."
},
{
    "text": "A single-ended $\\mathrm{G}_{\\mathrm{m}}$-C filter that implements the first-order filter shown in Fig. 12.1 is illustrated in Fig. 12.8. Observe that the gains in Fig. 12.1 are provided by the transconductors, the integration is carried out by the capacitor $C_{A}$, and the capacitor $C_{x}$ corresponds to the differentiating feed-in path $\\mathrm{k}_{1}$ in Fig. 12.1.\n\nThe transfer function for this first-order $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filter is determined by writing a current equation for the output node, $\\mathrm{V}_{\\text {out }}(\\mathrm{s})$:\n\n$$\n\\begin{equation*}\nG_{m 1} V_{\\text {in }}(s)+s C_{x}\\left[V_{\\text {in }}(s)-V_{\\text {out }}(s)\\right]-s C_{A} V_{\\text {out }}(s)-G_{m 2} V_{\\text {out }}(s)=0 \\tag{12.13}\n\\end{equation*}\n$$\n\nRearranging to find $\\mathrm{V}_{\\text {out }}(\\mathrm{s}) / \\mathrm{V}_{\\text {in }}(\\mathrm{s})$, we obtain\n\n$$\n\\begin{equation*}\n\\frac{V_{\\text {out }}(s)}{V_{\\text {in }}(s)}=\\frac{s C_{x}+G_{m 1}}{s\\left(C_{A}+C_{x}\\right)+G_{m 2}}=\\frac{\\left[s\\left(\\frac{C_{X}}{C_{A}+C_{X}}\\right)+\\left(\\frac{G_{m 1}}{C_{A}+C_{X}}\\right)\\right]}{\\left[s+\\left(\\frac{G_{m 2}}{C_{A}+C_{X}}\\right)\\right]} \\tag{12.14}\n\\end{equation*}\n$$\n\nimage_name:Fig. 12.9\ndescription:The circuit is a fully differential Gm-C filter. Gm1 and Gm2 are voltage-controlled current sources. Capacitors 2CX and 2CA form the filter structure. The equations provided define the relationships between the components' values and the filter parameters.\n\nFig. 12.9 A fully differential general first-order $G_{m}-C$ filter.\nEquating (12.14) with (12.1) yields the following relationships:\n\n$$\n\\begin{align*}\n\\mathrm{C}_{\\mathrm{x}} & =\\left(\\frac{\\mathrm{k}_{1}}{1-\\mathrm{k}_{1}}\\right) \\mathrm{C}_{\\mathrm{A}}  \\tag{12.15}\\\\\n\\mathrm{G}_{\\mathrm{m} 1} & =\\mathrm{k}_{0}\\left(\\mathrm{C}_{\\mathrm{A}}+\\mathrm{C}_{\\mathrm{x}}\\right)  \\tag{12.16}\\\\\n\\mathrm{G}_{\\mathrm{m} 2} & =\\omega_{0}\\left(\\mathrm{C}_{\\mathrm{A}}+\\mathrm{C}_{\\mathrm{X}}\\right) \\tag{12.17}\n\\end{align*}\n$$\n\nIt is important to note from (12.15) that for $\\mathrm{C}_{\\mathrm{x}}$ to be positive, the term $\\mathrm{k}_{1}$ must satisfy $0 \\leq \\mathrm{k}_{1}<1$. This restriction indicates that the depicted circuit cannot realize a filter with a high-frequency gain that is either negative or exceeds 1. This outcome is expected since the high-frequency gain of this circuit is essentially a capacitor-divider circuit, thus imposing the restriction on $\\mathrm{k}_{1}$.\n\nUltimately, the equivalent fully differential first-order $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filter is depicted in Fig. 12.9. Note that the capacitor sizes are doubled compared to the single-ended case to maintain the same design equations. Additionally, the same restriction applies to $\\mathrm{k}_{1}$, although a negative value of $\\mathrm{k}_{1}$ can be achieved by cross-coupling the feed-in capacitor pair, $\\mathrm{C}_{\\mathrm{x}}$.\n\n#### EXAMPLE 12.3\n\nUsing Fig. 12.9, determine the component values for a first-order filter with a dc gain of 0.5, a pole at 20 MHz, and a zero at 40 MHz. Assume the integrating capacitors are sized $\\mathrm{C}_{\\mathrm{A}}=2 \\mathrm{pF}$.\n\n#### Solution\n\nA first-order filter with a zero at 40 MHz and a pole at 20 MHz is expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{H}(\\mathrm{~s})=\\frac{\\mathrm{k}(\\mathrm{~s}+2 \\pi \\times 40 \\mathrm{MHz})}{(\\mathrm{s}+2 \\pi \\times 20 \\mathrm{MHz})} \\tag{12.18}\n\\end{equation*}\n$$\n\nThe leading coefficient is set by the dc gain of 0.5, resulting in $\\mathrm{k}=0.25$. Therefore, we have\n\n$$\n\\begin{equation*}\n\\mathrm{H}(\\mathrm{~s})=\\frac{0.25 \\mathrm{~s}+2 \\pi \\times 10 \\mathrm{MHz}}{\\mathrm{~s}+2 \\pi \\times 20 \\mathrm{MHz}} \\tag{12.19}\n\\end{equation*}\n$$\n\nEquating this transfer function to (12.1) gives\n\n$$\n\\begin{gather*}\n\\mathrm{k}_{1}=0.25  \\tag{12.20}\\\\\n\\mathrm{k}_{0}=2 \\pi \\times 10^{7}  \\tag{12.21}\\\\\n\\omega_{0}=4 \\pi \\times 10^{7} \\tag{12.22}\n\\end{gather*}\n$$\n\nimage_name:Fig. 12.10\ndescription:This is a fully differential Gm-C second-order filter. The circuit employs five voltage-controlled voltage sources (Gm1 to Gm5) and several capacitors (2CA, 2CB, 2CX) to achieve the desired filtering characteristics. The input is differential (Vin+ and Vin-) and the output is also differential (Vout+ and Vout-). The capacitors are arranged to provide necessary feedback and filtering paths.\n\nFig. 12.10 A general second-order filter using fully differential $G_{m}-C$ techniques.\n\nApplying the design equations from Fig. 12.9, we find\n\n$$\n\\begin{gather*}\n\\mathrm{C}_{\\mathrm{x}}=2 \\mathrm{pF} \\times \\frac{0.25}{1-0.25}=0.667 \\mathrm{pF}  \\tag{12.23}\\\\\n\\mathrm{G}_{\\mathrm{m} 1}=2 \\pi \\times 10^{7} \\times 2.667 \\mathrm{pF}=0.168 \\mathrm{~mA} / \\mathrm{V}  \\tag{12.24}\\\\\n\\mathrm{G}_{\\mathrm{m} 2}=4 \\pi \\times 10^{7} \\times 2.667 \\mathrm{pF}=0.335 \\mathrm{~mA} / \\mathrm{V} \\tag{12.25}\n\\end{gather*}\n$$\n\nwhere $\\mathrm{C}_{\\mathrm{A}}=2 \\mathrm{pF}$, as specified."
},
{
    "text": "A single-ended $\\mathrm{G}_{\\mathrm{m}}$-C filter that implements the first-order filter shown in Fig. 12.1 is illustrated in Fig. 12.8. Observe that the gains in Fig. 12.1 are provided by the transconductors, the integration is carried out by the capacitor $C_{A}$, and the capacitor $C_{x}$ corresponds to the differentiating feed-in path $\\mathrm{k}_{1}$ in Fig. 12.1.\n\nThe transfer function for this first-order $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filter is determined by writing a current equation for the output node, $\\mathrm{V}_{\\text {out }}(\\mathrm{s})$:\n\n$$\n\\begin{equation*}\nG_{m 1} V_{\\text {in }}(s)+s C_{x}\\left[V_{\\text {in }}(s)-V_{\\text {out }}(s)\\right]-s C_{A} V_{\\text {out }}(s)-G_{m 2} V_{\\text {out }}(s)=0 \\tag{12.13}\n\\end{equation*}\n$$\n\nRearranging to find $\\mathrm{V}_{\\text {out }}(\\mathrm{s}) / \\mathrm{V}_{\\text {in }}(\\mathrm{s})$, we obtain\n\n$$\n\\begin{equation*}\n\\frac{V_{\\text {out }}(s)}{V_{\\text {in }}(s)}=\\frac{s C_{x}+G_{m 1}}{s\\left(C_{A}+C_{x}\\right)+G_{m 2}}=\\frac{\\left[s\\left(\\frac{C_{X}}{C_{A}+C_{X}}\\right)+\\left(\\frac{G_{m 1}}{C_{A}+C_{X}}\\right)\\right]}{\\left[s+\\left(\\frac{G_{m 2}}{C_{A}+C_{X}}\\right)\\right]} \\tag{12.14}\n\\end{equation*}\n$$\n\nimage_name:Fig. 12.9\ndescription:The circuit is a fully differential Gm-C filter. Gm1 and Gm2 are voltage-controlled current sources. Capacitors 2CX and 2CA form the filter structure. The equations provided define the relationships between the components' values and the filter parameters.\n\nFig. 12.9 A fully differential general first-order $G_{m}-C$ filter.\nEquating (12.14) with (12.1) yields the following relationships:\n\n$$\n\\begin{align*}\n\\mathrm{C}_{\\mathrm{x}} & =\\left(\\frac{\\mathrm{k}_{1}}{1-\\mathrm{k}_{1}}\\right) \\mathrm{C}_{\\mathrm{A}}  \\tag{12.15}\\\\\n\\mathrm{G}_{\\mathrm{m} 1} & =\\mathrm{k}_{0}\\left(\\mathrm{C}_{\\mathrm{A}}+\\mathrm{C}_{\\mathrm{x}}\\right)  \\tag{12.16}\\\\\n\\mathrm{G}_{\\mathrm{m} 2} & =\\omega_{0}\\left(\\mathrm{C}_{\\mathrm{A}}+\\mathrm{C}_{\\mathrm{X}}\\right) \\tag{12.17}\n\\end{align*}\n$$\n\nIt should be noted from (12.15) that, for $\\mathrm{C}_{\\mathrm{x}}$ to be positive, the term $\\mathrm{k}_{1}$ must satisfy $0 \\leq \\mathrm{k}_{1}<1$. This restriction implies that the depicted circuit cannot realize a filter with a high-frequency gain that is either negative or exceeds 1. Such a limitation is expected since the high-frequency gain of this circuit is essentially a capacitor-divider circuit, thus imposing the constraint on $\\mathrm{k}_{1}$.\n\nFinally, the equivalent fully differential first-order $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filter is depicted in Fig. 12.9. Note that the capacitor sizes are doubled compared to the single-ended case to maintain the same design equations. Additionally, the same constraint applies to $\\mathrm{k}_{1}$, although a negative value of $\\mathrm{k}_{1}$ can be achieved by cross-coupling the feed-in capacitor pair, $\\mathrm{C}_{\\mathrm{x}}$.\n\n#### EXAMPLE 12.3\n\nBased on Fig. 12.9, determine the component values for a first-order filter with a dc gain of 0.5, a pole at 20 MHz, and a zero at 40 MHz. Assume the integrating capacitors are sized $\\mathrm{C}_{\\mathrm{A}}=2 \\mathrm{pF}$.\n\n#### Solution\n\nA first-order filter with a zero at 40 MHz and a pole at 20 MHz is given by\n\n$$\n\\begin{equation*}\n\\mathrm{H}(\\mathrm{~s})=\\frac{\\mathrm{k}(\\mathrm{~s}+2 \\pi \\times 40 \\mathrm{MHz})}{(\\mathrm{s}+2 \\pi \\times 20 \\mathrm{MHz})} \\tag{12.18}\n\\end{equation*}\n$$\n\nThe leading coefficient is determined by setting the dc gain to 0.5, resulting in $\\mathrm{k}=0.25$. Thus, we have\n\n$$\n\\begin{equation*}\n\\mathrm{H}(\\mathrm{~s})=\\frac{0.25 \\mathrm{~s}+2 \\pi \\times 10 \\mathrm{MHz}}{\\mathrm{~s}+2 \\pi \\times 20 \\mathrm{MHz}} \\tag{12.19}\n\\end{equation*}\n$$\n\nEquating this transfer function to (12.1) results in\n\n$$\n\\begin{gather*}\n\\mathrm{k}_{1}=0.25  \\tag{12.20}\\\\\n\\mathrm{k}_{0}=2 \\pi \\times 10^{7}  \\tag{12.21}\\\\\n\\omega_{0}=4 \\pi \\times 10^{7} \\tag{12.22}\n\\end{gather*}\n$$\n\nimage_name:Fig. 12.10\ndescription:This is a fully differential Gm-C second-order filter. The circuit uses five voltage-controlled voltage sources (Gm1 to Gm5) and several capacitors (2CA, 2CB, 2CX) to achieve the desired filtering characteristics. The input is differential (Vin+ and Vin-) and the output is also differential (Vout+ and Vout-). The capacitors are connected in a manner to provide necessary feedback and filtering paths.\n\nFig. 12.10 A general second-order filter using fully differential $G_{m}-C$ techniques.\n\nUsing the design equations shown in Fig. 12.9, we find\n\n$$\n\\begin{gather*}\n\\mathrm{C}_{\\mathrm{x}}=2 \\mathrm{pF} \\times \\frac{0.25}{1-0.25}=0.667 \\mathrm{pF}  \\tag{12.23}\\\\\n\\mathrm{G}_{\\mathrm{m} 1}=2 \\pi \\times 10^{7} \\times 2.667 \\mathrm{pF}=0.168 \\mathrm{~mA} / \\mathrm{V}  \\tag{12.24}\\\\\n\\mathrm{G}_{\\mathrm{m} 2}=4 \\pi \\times 10^{7} \\times 2.667 \\mathrm{pF}=0.335 \\mathrm{~mA} / \\mathrm{V} \\tag{12.25}\n\\end{gather*}\n$$\n\nwhere $\\mathrm{C}_{\\mathrm{A}}=2 \\mathrm{pF}$, as given."
},
{
    "text": "A single-ended $\\mathrm{G}_{\\mathrm{m}}$-C filter that implements the first-order filter shown in Fig. 12.1 is illustrated in Fig. 12.8. Note that the gains in Fig. 12.1 are provided by the transconductors, the integration is carried out by the capacitor $C_{A}$, and the capacitor $C_{x}$ corresponds to the differentiating feed-in path $\\mathrm{k}_{1}$ in Fig. 12.1.\n\nThe transfer function for this first-order $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filter is derived by writing a current equation for the output node, $\\mathrm{V}_{\\text {out }}(\\mathrm{s})$:\n\n$$\n\\begin{equation*}\nG_{m 1} V_{\\text {in }}(s)+s C_{x}\\left[V_{\\text {in }}(s)-V_{\\text {out }}(s)\\right]-s C_{A} V_{\\text {out }}(s)-G_{m 2} V_{\\text {out }}(s)=0 \\tag{12.13}\n\\end{equation*}\n$$\n\nRearranging to determine $\\mathrm{V}_{\\text {out }}(\\mathrm{s}) / \\mathrm{V}_{\\text {in }}(\\mathrm{s})$, we obtain\n\n$$\n\\begin{equation*}\n\\frac{V_{\\text {out }}(s)}{V_{\\text {in }}(s)}=\\frac{s C_{x}+G_{m 1}}{s\\left(C_{A}+C_{x}\\right)+G_{m 2}}=\\frac{\\left[s\\left(\\frac{C_{X}}{C_{A}+C_{X}}\\right)+\\left(\\frac{G_{m 1}}{C_{A}+C_{X}}\\right)\\right]}{\\left[s+\\left(\\frac{G_{m 2}}{C_{A}+C_{X}}\\right)\\right]} \\tag{12.14}\n\\end{equation*}\n$$\n\nimage_name:Fig. 12.9\ndescription:The circuit is a fully differential Gm-C filter. Gm1 and Gm2 are voltage-controlled current sources. Capacitors 2CX and 2CA form the filter structure. The equations provided define the relationships between the components' values and the filter parameters.\n\nFig. 12.9 A fully differential general first-order $G_{m}-C$ filter.\nEquating (12.14) with (12.1) yields the following relationships:\n\n$$\n\\begin{align*}\n\\mathrm{C}_{\\mathrm{x}} & =\\left(\\frac{\\mathrm{k}_{1}}{1-\\mathrm{k}_{1}}\\right) \\mathrm{C}_{\\mathrm{A}}  \\tag{12.15}\\\\\n\\mathrm{G}_{\\mathrm{m} 1} & =\\mathrm{k}_{0}\\left(\\mathrm{C}_{\\mathrm{A}}+\\mathrm{C}_{\\mathrm{x}}\\right)  \\tag{12.16}\\\\\n\\mathrm{G}_{\\mathrm{m} 2} & =\\omega_{0}\\left(\\mathrm{C}_{\\mathrm{A}}+\\mathrm{C}_{\\mathrm{X}}\\right) \\tag{12.17}\n\\end{align*}\n$$\n\nIt should be noted from (12.15) that, for $\\mathrm{C}_{\\mathrm{x}}$ to be a positive value, the term $\\mathrm{k}_{1}$ must satisfy $0 \\leq \\mathrm{k}_{1}<1$. This restriction implies that the depicted circuit cannot realize a filter with a high-frequency gain that is either negative or greater than 1. Such a result is expected since the high-frequency gain of this circuit is essentially a capacitor-divider circuit, thereby imposing the restriction on $\\mathrm{k}_{1}$.\n\nFinally, the equivalent fully differential first-order $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filter is depicted in Fig. 12.9. Note that the capacitor sizes are doubled compared to the single-ended case, ensuring the same design equations apply. Also, the same restriction applies to $\\mathrm{k}_{1}$, although a negative value of $\\mathrm{k}_{1}$ can be achieved by cross-coupling the feed-in capacitor pair, $\\mathrm{C}_{\\mathrm{x}}$.\n\n#### EXAMPLE 12.3\n\nBased on Fig. 12.9, determine the component values for a first-order filter with a dc gain of 0.5, a pole at 20 MHz, and a zero at 40 MHz. Assume the integrating capacitors are sized $\\mathrm{C}_{\\mathrm{A}}=2 \\mathrm{pF}$.\n\n#### Solution\n\nA first-order filter with a zero at 40 MHz and a pole at 20 MHz is given by\n\n$$\n\\begin{equation*}\n\\mathrm{H}(\\mathrm{~s})=\\frac{\\mathrm{k}(\\mathrm{~s}+2 \\pi \\times 40 \\mathrm{MHz})}{(\\mathrm{s}+2 \\pi \\times 20 \\mathrm{MHz})} \\tag{12.18}\n\\end{equation*}\n$$\n\nThe leading coefficient is determined by setting the dc gain to 0.5, resulting in $\\mathrm{k}=0.25$. Thus, we have\n\n$$\n\\begin{equation*}\n\\mathrm{H}(\\mathrm{~s})=\\frac{0.25 \\mathrm{~s}+2 \\pi \\times 10 \\mathrm{MHz}}{\\mathrm{~s}+2 \\pi \\times 20 \\mathrm{MHz}} \\tag{12.19}\n\\end{equation*}\n$$\n\nEquating this transfer function to (12.1) results in\n\n$$\n\\begin{gather*}\n\\mathrm{k}_{1}=0.25  \\tag{12.20}\\\\\n\\mathrm{k}_{0}=2 \\pi \\times 10^{7}  \\tag{12.21}\\\\\n\\omega_{0}=4 \\pi \\times 10^{7} \\tag{12.22}\n\\end{gather*}\n$$\n\nimage_name:Fig. 12.10\ndescription:This is a fully differential Gm-C second-order filter. The circuit uses five voltage-controlled voltage sources (Gm1 to Gm5) and several capacitors (2CA, 2CB, 2CX) to achieve the desired filtering characteristics. The input is differential (Vin+ and Vin-) and the output is also differential (Vout+ and Vout-). The capacitors are connected in a manner to provide necessary feedback and filtering paths.\n\nFig. 12.10 A general second-order filter using fully differential $G_{m}-C$ techniques.\n\nUsing the design equations shown in Fig. 12.9, we find\n\n$$\n\\begin{gather*}\n\\mathrm{C}_{\\mathrm{x}}=2 \\mathrm{pF} \\times \\frac{0.25}{1-0.25}=0.667 \\mathrm{pF}  \\tag{12.23}\\\\\n\\mathrm{G}_{\\mathrm{m} 1}=2 \\pi \\times 10^{7} \\times 2.667 \\mathrm{pF}=0.168 \\mathrm{~mA} / \\mathrm{V}  \\tag{12.24}\\\\\n\\mathrm{G}_{\\mathrm{m} 2}=4 \\pi \\times 10^{7} \\times 2.667 \\mathrm{pF}=0.335 \\mathrm{~mA} / \\mathrm{V} \\tag{12.25}\n\\end{gather*}\n$$\n\nwhere $\\mathrm{C}_{\\mathrm{A}}=2 \\mathrm{pF}$, as given."
},
{
    "text": "A single-ended $\\mathrm{G}_{\\mathrm{m}}$-C filter that implements the first-order filter shown in Fig. 12.1 is illustrated in Fig. 12.8. Observe that the gains in Fig. 12.1 are supplied by the transconductors, the integration is carried out by the capacitor $C_{A}$, and the capacitor $C_{x}$ corresponds to the differentiating feed-in path $\\mathrm{k}_{1}$ in Fig. 12.1.\n\nThe transfer function for this first-order $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filter is determined by writing a current equation for the output node, $\\mathrm{V}_{\\text {out }}(\\mathrm{s})$:\n\n$$\n\\begin{equation*}\nG_{m 1} V_{\\text {in }}(s)+s C_{x}\\left[V_{\\text {in }}(s)-V_{\\text {out }}(s)\\right]-s C_{A} V_{\\text {out }}(s)-G_{m 2} V_{\\text {out }}(s)=0 \\tag{12.13}\n\\end{equation*}\n$$\n\nRearranging to find $\\mathrm{V}_{\\text {out }}(\\mathrm{s}) / \\mathrm{V}_{\\text {in }}(\\mathrm{s})$, we obtain\n\n$$\n\\begin{equation*}\n\\frac{V_{\\text {out }}(s)}{V_{\\text {in }}(s)}=\\frac{s C_{x}+G_{m 1}}{s\\left(C_{A}+C_{x}\\right)+G_{m 2}}=\\frac{\\left[s\\left(\\frac{C_{X}}{C_{A}+C_{X}}\\right)+\\left(\\frac{G_{m 1}}{C_{A}+C_{X}}\\right)\\right]}{\\left[s+\\left(\\frac{G_{m 2}}{C_{A}+C_{X}}\\right)\\right]} \\tag{12.14}\n\\end{equation*}\n$$\n\nimage_name:Fig. 12.9\ndescription:The circuit is a fully differential Gm-C filter. Gm1 and Gm2 are voltage-controlled current sources. Capacitors 2CX and 2CA form the filter structure. The equations provided define the relationships between the components' values and the filter parameters.\n\nFig. 12.9 A fully differential general first-order $G_{m}-C$ filter.\nEquating (12.14) with (12.1) yields the following relationships:\n\n$$\n\\begin{align*}\n\\mathrm{C}_{\\mathrm{x}} & =\\left(\\frac{\\mathrm{k}_{1}}{1-\\mathrm{k}_{1}}\\right) \\mathrm{C}_{\\mathrm{A}}  \\tag{12.15}\\\\\n\\mathrm{G}_{\\mathrm{m} 1} & =\\mathrm{k}_{0}\\left(\\mathrm{C}_{\\mathrm{A}}+\\mathrm{C}_{\\mathrm{x}}\\right)  \\tag{12.16}\\\\\n\\mathrm{G}_{\\mathrm{m} 2} & =\\omega_{0}\\left(\\mathrm{C}_{\\mathrm{A}}+\\mathrm{C}_{\\mathrm{X}}\\right) \\tag{12.17}\n\\end{align*}\n$$\n\nIt is important to note from (12.15) that, for $\\mathrm{C}_{\\mathrm{x}}$ to be positive, the term $\\mathrm{k}_{1}$ must satisfy $0 \\leq \\mathrm{k}_{1}<1$. This restriction implies that the depicted circuit cannot realize a filter with a high-frequency gain that is either negative or exceeds 1. This outcome is expected since the high-frequency gain of this circuit is essentially a capacitor-divider circuit, thus imposing the restriction on $\\mathrm{k}_{1}$.\n\nLastly, the equivalent fully differential first-order $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filter is depicted in Fig. 12.9. Note that the capacitor sizes are doubled compared to the single-ended case to maintain the same design equations. Additionally, the same restriction applies to $\\mathrm{k}_{1}$, although a negative value of $\\mathrm{k}_{1}$ can be achieved by cross-coupling the feed-in capacitor pair, $\\mathrm{C}_{\\mathrm{x}}$.\n\n#### EXAMPLE 12.3\n\nUsing Fig. 12.9, determine the component values for a first-order filter with a dc gain of 0.5, a pole at 20 MHz, and a zero at 40 MHz. Assume the integrating capacitors are sized $\\mathrm{C}_{\\mathrm{A}}=2 \\mathrm{pF}$.\n\n#### Solution\n\nA first-order filter with a zero at 40 MHz and a pole at 20 MHz is described by\n\n$$\n\\begin{equation*}\n\\mathrm{H}(\\mathrm{~s})=\\frac{\\mathrm{k}(\\mathrm{~s}+2 \\pi \\times 40 \\mathrm{MHz})}{(\\mathrm{s}+2 \\pi \\times 20 \\mathrm{MHz})} \\tag{12.18}\n\\end{equation*}\n$$\n\nThe leading coefficient is set by the dc gain of 0.5, resulting in $\\mathrm{k}=0.25$. Therefore, we have\n\n$$\n\\begin{equation*}\n\\mathrm{H}(\\mathrm{~s})=\\frac{0.25 \\mathrm{~s}+2 \\pi \\times 10 \\mathrm{MHz}}{\\mathrm{~s}+2 \\pi \\times 20 \\mathrm{MHz}} \\tag{12.19}\n\\end{equation*}\n$$\n\nBy equating this transfer function to (12.1), we get\n\n$$\n\\begin{gather*}\n\\mathrm{k}_{1}=0.25  \\tag{12.20}\\\\\n\\mathrm{k}_{0}=2 \\pi \\times 10^{7}  \\tag{12.21}\\\\\n\\omega_{0}=4 \\pi \\times 10^{7} \\tag{12.22}\n\\end{gather*}\n$$\n\nimage_name:Fig. 12.10\ndescription:This is a fully differential Gm-C second-order filter. The circuit uses five voltage-controlled voltage sources (Gm1 to Gm5) and several capacitors (2CA, 2CB, 2CX) to achieve the desired filtering characteristics. The input is differential (Vin+ and Vin-) and the output is also differential (Vout+ and Vout-). The capacitors are connected in a manner to provide necessary feedback and filtering paths.\n\nFig. 12.10 A general second-order filter using fully differential $G_{m}-C$ techniques.\n\nApplying the design equations from Fig. 12.9, we find\n\n$$\n\\begin{gather*}\n\\mathrm{C}_{\\mathrm{x}}=2 \\mathrm{pF} \\times \\frac{0.25}{1-0.25}=0.667 \\mathrm{pF}  \\tag{12.23}\\\\\n\\mathrm{G}_{\\mathrm{m} 1}=2 \\pi \\times 10^{7} \\times 2.667 \\mathrm{pF}=0.168 \\mathrm{~mA} / \\mathrm{V}  \\tag{12.24}\\\\\n\\mathrm{G}_{\\mathrm{m} 2}=4 \\pi \\times 10^{7} \\times 2.667 \\mathrm{pF}=0.335 \\mathrm{~mA} / \\mathrm{V} \\tag{12.25}\n\\end{gather*}\n$$\n\nwhere $\\mathrm{C}_{\\mathrm{A}}=2 \\mathrm{pF}$, as specified."
},
{
    "text": "A single-ended $\\mathrm{G}_{\\mathrm{m}}$-C filter that implements the first-order filter illustrated in Fig. 12.1 is presented in Fig. 12.8. Observe that the gains in Fig. 12.1 are supplied by the transconductors, the integration process is carried out by the capacitor $C_{A}$, and the capacitor $C_{x}$ corresponds to the differentiating feed-in path $\\mathrm{k}_{1}$ in Fig. 12.1.\n\nThe transfer function for this first-order $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filter is derived by writing a current equation for the output node, $\\mathrm{V}_{\\text {out }}(\\mathrm{s})$:\n\n$$\n\\begin{equation*}\nG_{m 1} V_{\\text {in }}(s)+s C_{x}\\left[V_{\\text {in }}(s)-V_{\\text {out }}(s)\\right]-s C_{A} V_{\\text {out }}(s)-G_{m 2} V_{\\text {out }}(s)=0 \\tag{12.13}\n\\end{equation*}\n$$\n\nRearranging to determine $\\mathrm{V}_{\\text {out }}(\\mathrm{s}) / \\mathrm{V}_{\\text {in }}(\\mathrm{s})$, we obtain\n\n$$\n\\begin{equation*}\n\\frac{V_{\\text {out }}(s)}{V_{\\text {in }}(s)}=\\frac{s C_{x}+G_{m 1}}{s\\left(C_{A}+C_{x}\\right)+G_{m 2}}=\\frac{\\left[s\\left(\\frac{C_{X}}{C_{A}+C_{X}}\\right)+\\left(\\frac{G_{m 1}}{C_{A}+C_{X}}\\right)\\right]}{\\left[s+\\left(\\frac{G_{m 2}}{C_{A}+C_{X}}\\right)\\right]} \\tag{12.14}\n\\end{equation*}\n$$\n\nimage_name:Fig. 12.9\ndescription:The circuit is a fully differential Gm-C filter. Gm1 and Gm2 are voltage-controlled current sources. Capacitors 2CX and 2CA form the filter structure. The equations provided define the relationships between the components' values and the filter parameters.\n\nFig. 12.9 A fully differential general first-order $G_{m}-C$ filter.\nBy equating (12.14) with (12.1), the following relationships are derived:\n\n$$\n\\begin{align*}\n\\mathrm{C}_{\\mathrm{x}} & =\\left(\\frac{\\mathrm{k}_{1}}{1-\\mathrm{k}_{1}}\\right) \\mathrm{C}_{\\mathrm{A}}  \\tag{12.15}\\\\\n\\mathrm{G}_{\\mathrm{m} 1} & =\\mathrm{k}_{0}\\left(\\mathrm{C}_{\\mathrm{A}}+\\mathrm{C}_{\\mathrm{x}}\\right)  \\tag{12.16}\\\\\n\\mathrm{G}_{\\mathrm{m} 2} & =\\omega_{0}\\left(\\mathrm{C}_{\\mathrm{A}}+\\mathrm{C}_{\\mathrm{X}}\\right) \\tag{12.17}\n\\end{align*}\n$$\n\nIt is important to note from (12.15) that for $\\mathrm{C}_{\\mathrm{x}}$ to be positive, the term $\\mathrm{k}_{1}$ must fulfill $0 \\leq \\mathrm{k}_{1}<1$. This restriction indicates that the depicted circuit cannot realize a filter with a high-frequency gain that is either negative or exceeds 1. This outcome is expected since the high-frequency gain of this circuit is essentially a capacitor-divider circuit, thus imposing the restriction on $\\mathrm{k}_{1}$.\n\nUltimately, the equivalent fully differential first-order $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filter is depicted in Fig. 12.9. Note that the capacitor sizes are doubled compared to the single-ended case to maintain the same design equations. Additionally, the same constraint applies to $\\mathrm{k}_{1}$, although a negative value of $\\mathrm{k}_{1}$ can be achieved by cross-coupling the feed-in capacitor pair, $\\mathrm{C}_{\\mathrm{x}}$.\n\n#### EXAMPLE 12.3\n\nUsing Fig. 12.9, determine the component values for a first-order filter with a dc gain of 0.5, a pole at 20 MHz, and a zero at 40 MHz. Assume the integrating capacitors are sized $\\mathrm{C}_{\\mathrm{A}}=2 \\mathrm{pF}$.\n\n#### Solution\n\nA first-order filter with a zero at 40 MHz and a pole at 20 MHz is expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{H}(\\mathrm{~s})=\\frac{\\mathrm{k}(\\mathrm{~s}+2 \\pi \\times 40 \\mathrm{MHz})}{(\\mathrm{s}+2 \\pi \\times 20 \\mathrm{MHz})} \\tag{12.18}\n\\end{equation*}\n$$\n\nThe leading coefficient is set by the dc gain of 0.5, resulting in $\\mathrm{k}=0.25$. Therefore, we have\n\n$$\n\\begin{equation*}\n\\mathrm{H}(\\mathrm{~s})=\\frac{0.25 \\mathrm{~s}+2 \\pi \\times 10 \\mathrm{MHz}}{\\mathrm{~s}+2 \\pi \\times 20 \\mathrm{MHz}} \\tag{12.19}\n\\end{equation*}\n$$\n\nBy equating this transfer function to (12.1), we get\n\n$$\n\\begin{gather*}\n\\mathrm{k}_{1}=0.25  \\tag{12.20}\\\\\n\\mathrm{k}_{0}=2 \\pi \\times 10^{7}  \\tag{12.21}\\\\\n\\omega_{0}=4 \\pi \\times 10^{7} \\tag{12.22}\n\\end{gather*}\n$$\n\nimage_name:Fig. 12.10\ndescription:This is a fully differential Gm-C second-order filter. The circuit employs five voltage-controlled voltage sources (Gm1 to Gm5) and several capacitors (2CA, 2CB, 2CX) to achieve the desired filtering characteristics. The input is differential (Vin+ and Vin-) and the output is also differential (Vout+ and Vout-). The capacitors are arranged to provide necessary feedback and filtering paths.\n\nFig. 12.10 A general second-order filter using fully differential $G_{m}-C$ techniques.\n\nApplying the design equations from Fig. 12.9, we find\n\n$$\n\\begin{gather*}\n\\mathrm{C}_{\\mathrm{x}}=2 \\mathrm{pF} \\times \\frac{0.25}{1-0.25}=0.667 \\mathrm{pF}  \\tag{12.23}\\\\\n\\mathrm{G}_{\\mathrm{m} 1}=2 \\pi \\times 10^{7} \\times 2.667 \\mathrm{pF}=0.168 \\mathrm{~mA} / \\mathrm{V}  \\tag{12.24}\\\\\n\\mathrm{G}_{\\mathrm{m} 2}=4 \\pi \\times 10^{7} \\times 2.667 \\mathrm{pF}=0.335 \\mathrm{~mA} / \\mathrm{V} \\tag{12.25}\n\\end{gather*}\n$$\n\nwhere $\\mathrm{C}_{\\mathrm{A}}=2 \\mathrm{pF}$, as specified."
},
{
    "text": "A single-ended $\\mathrm{G}_{\\mathrm{m}}$-C filter that implements the first-order filter shown in Fig. 12.1 is illustrated in Fig. 12.8. Observe that the gains in Fig. 12.1 are provided by the transconductors, the integration is carried out by the capacitor $C_{A}$, and the capacitor $C_{x}$ corresponds to the differentiating feed-in path $\\mathrm{k}_{1}$ in Fig. 12.1.\n\nThe transfer function for this first-order $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filter is derived by writing a current equation for the output node, $\\mathrm{V}_{\\text {out }}(\\mathrm{s})$:\n\n$$\n\\begin{equation*}\nG_{m 1} V_{\\text {in }}(s)+s C_{x}\\left[V_{\\text {in }}(s)-V_{\\text {out }}(s)\\right]-s C_{A} V_{\\text {out }}(s)-G_{m 2} V_{\\text {out }}(s)=0 \\tag{12.13}\n\\end{equation*}\n$$\n\nRearranging to determine $\\mathrm{V}_{\\text {out }}(\\mathrm{s}) / \\mathrm{V}_{\\text {in }}(\\mathrm{s})$, we obtain\n\n$$\n\\begin{equation*}\n\\frac{V_{\\text {out }}(s)}{V_{\\text {in }}(s)}=\\frac{s C_{x}+G_{m 1}}{s\\left(C_{A}+C_{x}\\right)+G_{m 2}}=\\frac{\\left[s\\left(\\frac{C_{X}}{C_{A}+C_{X}}\\right)+\\left(\\frac{G_{m 1}}{C_{A}+C_{X}}\\right)\\right]}{\\left[s+\\left(\\frac{G_{m 2}}{C_{A}+C_{X}}\\right)\\right]} \\tag{12.14}\n\\end{equation*}\n$$\n\nimage_name:Fig. 12.9\ndescription:The circuit is a fully differential Gm-C filter. Gm1 and Gm2 are voltage-controlled current sources. Capacitors 2CX and 2CA form the filter structure. The equations provided define the relationships between the components' values and the filter parameters.\n\nFig. 12.9 A fully differential general first-order $G_{m}-C$ filter.\nBy equating (12.14) with (12.1), the following relationships are derived:\n\n$$\n\\begin{align*}\n\\mathrm{C}_{\\mathrm{x}} & =\\left(\\frac{\\mathrm{k}_{1}}{1-\\mathrm{k}_{1}}\\right) \\mathrm{C}_{\\mathrm{A}}  \\tag{12.15}\\\\\n\\mathrm{G}_{\\mathrm{m} 1} & =\\mathrm{k}_{0}\\left(\\mathrm{C}_{\\mathrm{A}}+\\mathrm{C}_{\\mathrm{x}}\\right)  \\tag{12.16}\\\\\n\\mathrm{G}_{\\mathrm{m} 2} & =\\omega_{0}\\left(\\mathrm{C}_{\\mathrm{A}}+\\mathrm{C}_{\\mathrm{X}}\\right) \\tag{12.17}\n\\end{align*}\n$$\n\nIt is important to note from (12.15) that for $\\mathrm{C}_{\\mathrm{x}}$ to be positive, the term $\\mathrm{k}_{1}$ must satisfy $0 \\leq \\mathrm{k}_{1}<1$. This restriction indicates that the depicted circuit cannot realize a filter with a high-frequency gain that is either negative or exceeds 1. This outcome is expected since the high-frequency gain of this circuit is essentially a capacitor-divider circuit, thus imposing the restriction on $\\mathrm{k}_{1}$.\n\nLastly, the equivalent fully differential first-order $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ filter is depicted in Fig. 12.9. Note that the capacitor sizes here are doubled compared to the single-ended case, ensuring the same design equations apply. Additionally, the same restriction applies to $\\mathrm{k}_{1}$, although a negative value of $\\mathrm{k}_{1}$ can be achieved by cross-coupling the feed-in capacitor pair, $\\mathrm{C}_{\\mathrm{x}}$.\n\n#### EXAMPLE 12.3\n\nUsing Fig. 12.9, determine the component values for a first-order filter with a dc gain of 0.5, a pole at 20 MHz, and a zero at 40 MHz. Assume the integrating capacitors are sized $\\mathrm{C}_{\\mathrm{A}}=2 \\mathrm{pF}$.\n\n#### Solution\n\nA first-order filter with a zero at 40 MHz and a pole at 20 MHz is expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{H}(\\mathrm{~s})=\\frac{\\mathrm{k}(\\mathrm{~s}+2 \\pi \\times 40 \\mathrm{MHz})}{(\\mathrm{s}+2 \\pi \\times 20 \\mathrm{MHz})} \\tag{12.18}\n\\end{equation*}\n$$\n\nThe leading coefficient is set by the dc gain of 0.5, resulting in $\\mathrm{k}=0.25$. Therefore, we have\n\n$$\n\\begin{equation*}\n\\mathrm{H}(\\mathrm{~s})=\\frac{0.25 \\mathrm{~s}+2 \\pi \\times 10 \\mathrm{MHz}}{\\mathrm{~s}+2 \\pi \\times 20 \\mathrm{MHz}} \\tag{12.19}\n\\end{equation*}\n$$\n\nBy equating this transfer function to (12.1), we get\n\n$$\n\\begin{gather*}\n\\mathrm{k}_{1}=0.25  \\tag{12.20}\\\\\n\\mathrm{k}_{0}=2 \\pi \\times 10^{7}  \\tag{12.21}\\\\\n\\omega_{0}=4 \\pi \\times 10^{7} \\tag{12.22}\n\\end{gather*}\n$$\n\nimage_name:Fig. 12.10\ndescription:This is a fully differential Gm-C second-order filter. The circuit uses five voltage-controlled voltage sources (Gm1 to Gm5) and several capacitors (2CA, 2CB, 2CX) to achieve the desired filtering characteristics. The input is differential (Vin+ and Vin-) and the output is also differential (Vout+ and Vout-). The capacitors are connected in a manner to provide necessary feedback and filtering paths.\n\nFig. 12.10 A general second-order filter using fully differential $G_{m}-C$ techniques.\n\nApplying the design equations from Fig. 12.9, we find\n\n$$\n\\begin{gather*}\n\\mathrm{C}_{\\mathrm{x}}=2 \\mathrm{pF} \\times \\frac{0.25}{1-0.25}=0.667 \\mathrm{pF}  \\tag{12.23}\\\\\n\\mathrm{G}_{\\mathrm{m} 1}=2 \\pi \\times 10^{7} \\times 2.667 \\mathrm{pF}=0.168 \\mathrm{~mA} / \\mathrm{V}  \\tag{12.24}\\\\\n\\mathrm{G}_{\\mathrm{m} 2}=4 \\pi \\times 10^{7} \\times 2.667 \\mathrm{pF}=0.335 \\mathrm{~mA} / \\mathrm{V} \\tag{12.25}\n\\end{gather*}\n$$\n\nwhere $\\mathrm{C}_{\\mathrm{A}}=2 \\mathrm{pF}$, as specified."
},
{
    "text": "A fully-differential biquadratic $\\mathrm{G}_{\\mathrm{m}-} \\mathrm{C}$ filter is depicted in Fig. 12.10. The transfer function of this biquad filter is determined to be\n\n$$\n\\begin{equation*}\nH(s) \\equiv \\frac{V_{\\text {out }}(s)}{V_{\\text {in }}(s)}=\\frac{s^{2}\\left(\\frac{C_{x}}{C_{x}+C_{B}}\\right)+s\\left(\\frac{G_{m 5}}{C_{x}+C_{B}}\\right)+\\left(\\frac{G_{m 2} G_{m 4}}{C_{A}\\left(C_{x}+C_{B}\\right)}\\right)}{s^{2}+s\\left(\\frac{G_{m 3}}{C_{x}+C_{b}}\\right)+\\left(\\frac{G_{m 1} G_{m 2}}{C_{A}\\left(C_{x}+C_{B}\\right)}\\right)} \\tag{12.26}\n\\end{equation*}\n$$\n\nBy equating the coefficients of (12.2) and (12.26), we obtain\n\n$$\n\\begin{align*}\nk_{2} & =\\frac{C_{x}}{C_{X}+C_{B}}  \\tag{12.27}\\\\\nk_{1} & =\\frac{G_{m 5}}{C_{x}+C_{B}}  \\tag{12.28}\\\\\nk_{0} & =\\frac{G_{m 2} G_{m 4}}{C_{A}\\left(C_{X}+C_{B}\\right)} \\tag{12.29}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\omega_{\\circ}^{2}=\\frac{G_{m 1} G_{m 2}}{C_{A}\\left(C_{X}+C_{B}\\right)} \\tag{12.30}\n\\end{equation*}\n$$\n\nFor the quality factor $Q$, we observe that\n\n$$\n\\begin{equation*}\n\\frac{\\omega_{o}}{Q}=\\frac{G_{m 3}}{C_{x}+C_{b}} \\tag{12.31}\n\\end{equation*}\n$$\n\nUsing (12.30), we can derive $Q$ as\n\n$$\n\\begin{equation*}\nQ=\\sqrt{\\left(\\frac{G_{m 1} G_{m}}{G_{m 3}^{2}}\\right)\\left(\\frac{C_{X}+C_{B}}{C_{A}}\\right)} \\tag{12.32}\n\\end{equation*}\n$$\n\nWhile the above equations are intended for analyzing an existing circuit, they can also be applied to design, leading to the following design equations:\n\n$$\n\\begin{gathered}\nC_{x}=C_{B}\\left(\\frac{k_{2}}{1-k_{2}}\\right) \\quad \\text { where } 0 \\leq k_{2}<1 \\\\\nG_{m 1}=\\omega_{0} C_{A} \\quad G_{m 2}=\\omega_{0}\\left(C_{B}+C_{x}\\right) \\quad G_{m 3}=\\frac{\\omega_{0}\\left(C_{B}+C_{x}\\right)}{Q} \\\\\nG_{m 4}=\\left(k_{0} C_{A}\\right) / \\omega_{0} \\quad G_{m 5}=k_{1}\\left(C_{B}+C_{x}\\right)\n\\end{gathered}\n$$\n\nIt is important to note that for this design, there is a constraint on the high-frequency gain coefficient, $\\mathrm{k}_{2}$, akin to that in the first-order scenario.\n\n#### EXAMPLE 12.4\n\nDetermine the transconductance and capacitor values for a second-order filter with a bandpass response, a center frequency of 20 MHz, a $Q$ value of 5, and a center frequency gain of 1. Assume $C_{A}=C_{B}=2 \\mathrm{pF}$.\n\n#### Solution\n\nA bandpass transfer function is expressed as\n\n$$\n\\begin{equation*}\nH(s) \\equiv \\frac{V_{\\text {out }}(s)}{V_{\\text {in }}(s)}=\\frac{G s \\frac{\\omega_{o}}{Q}}{s^{2}+s \\frac{\\omega_{o}}{Q}+\\omega_{0}^{2}} \\tag{12.33}\n\\end{equation*}\n$$\n\nwhere $G=1$ represents the gain at the center frequency. Given $\\omega_{0}=2 \\pi \\times 20 \\mathrm{MHz}$ and $\\mathrm{Q}=5$, we calculate\n\n$$\n\\begin{equation*}\n\\mathrm{k}_{1}=\\mathrm{G} \\frac{\\omega_{0}}{\\mathrm{Q}}=2.513 \\times 10^{7} \\mathrm{rad} / \\mathrm{s} \\tag{12.34}\n\\end{equation*}\n$$\n\nSince $k_{0}$ and $k_{2}$ are zero, we find $C_{x}=G_{m 4}=0$ and\n\n$$\n\\begin{gather*}\nG_{m 1}=\\omega_{0} C_{A}=0.2513 \\mathrm{~mA} / \\mathrm{V}  \\tag{12.35}\\\\\nG_{m 2}=\\omega_{0}\\left(C_{B}+C_{x}\\right)=0.2513 \\mathrm{~mA} / \\mathrm{V} \\tag{12.36}\n\\end{gather*}\n$$\n\nIn this instance,\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m} 3}=\\mathrm{G}_{\\mathrm{m} 5}=\\mathrm{k}_{1} \\mathrm{C}_{\\mathrm{B}}=50.27 \\mu \\mathrm{~A} / \\mathrm{V} \\tag{12.37}\n\\end{equation*}\n$$"
},
{
    "text": "A fully-differential biquadratic $\\mathrm{G}_{\\mathrm{m}-} \\mathrm{C}$ filter is depicted in Fig. 12.10. The transfer function of this biquad filter is determined to be\n\n$$\n\\begin{equation*}\nH(s) \\equiv \\frac{V_{\\text {out }}(s)}{V_{\\text {in }}(s)}=\\frac{s^{2}\\left(\\frac{C_{x}}{C_{x}+C_{B}}\\right)+s\\left(\\frac{G_{m 5}}{C_{x}+C_{B}}\\right)+\\left(\\frac{G_{m 2} G_{m 4}}{C_{A}\\left(C_{x}+C_{B}\\right)}\\right.}{s^{2}+s\\left(\\frac{G_{m 3}}{C_{x}+C_{b}}\\right)+\\left(\\frac{G_{m 1} G_{m 2}}{C_{A}\\left(C_{x}+C_{B}\\right)}\\right)} \\tag{12.26}\n\\end{equation*}\n$$\n\nBy equating the coefficients of (12.2) and (12.26), we obtain\n\n$$\n\\begin{align*}\nk_{2} & =\\frac{C_{x}}{C_{X}+C_{B}}  \\tag{12.27}\\\\\nk_{1} & =\\frac{G_{m 5}}{C_{x}+C_{B}}  \\tag{12.28}\\\\\nk_{0} & =\\frac{G_{m 2} G_{m 4}}{C_{A}\\left(C_{X}+C_{B}\\right)} \\tag{12.29}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\omega_{\\circ}^{2}=\\frac{G_{m 1} G_{m 2}}{C_{A}\\left(C_{X}+C_{B}\\right)} \\tag{12.30}\n\\end{equation*}\n$$\n\nFor the quality factor $Q$, we observe that\n\n$$\n\\begin{equation*}\n\\frac{\\omega_{o}}{Q}=\\frac{G_{m 3}}{C_{x}+C_{b}} \\tag{12.31}\n\\end{equation*}\n$$\n\nUsing (12.30), we can derive $Q$ as\n\n$$\n\\begin{equation*}\nQ=\\sqrt{\\left(\\frac{G_{m 1} G_{m}}{G_{m 3}^{2}}\\right)\\left(\\frac{C_{X}+C_{B}}{C_{A}}\\right)} \\tag{12.32}\n\\end{equation*}\n$$\n\nWhile these equations are primarily for analyzing a given circuit, they can also be applied to design, leading to the following design equations:\n\n$$\n\\begin{gathered}\nC_{x}=C_{B}\\left(\\frac{k_{2}}{1-k_{2}}\\right) \\quad \\text { where } 0 \\leq k_{2}<1 \\\\\nG_{m 1}=\\omega_{0} C_{A} \\quad G_{m 2}=\\omega_{0}\\left(C_{B}+C_{x}\\right) \\quad G_{m 3}=\\frac{\\omega_{0}\\left(C_{B}+C_{x}\\right)}{Q} \\\\\nG_{m 4}=\\left(k_{0} C_{A}\\right) / \\omega_{0} \\quad G_{m 5}=k_{1}\\left(C_{B}+C_{x}\\right)\n\\end{gathered}\n$$\n\nNote that for this design, there is a constraint on the high-frequency gain coefficient, $\\mathrm{k}_{2}$, similar to that in the first-order case.\n\n#### EXAMPLE 12.4\n\nDetermine the transconductance and capacitor values for a second-order filter with a bandpass response, a center frequency of 20 MHz, a $Q$ value of 5, and a center frequency gain of 1. Assume $C_{A}=C_{B}=2 \\mathrm{pF}$.\n\n#### Solution\n\nA bandpass transfer function is expressed as\n\n$$\n\\begin{equation*}\nH(s) \\equiv \\frac{V_{\\text {out }}(s)}{V_{\\text {in }}(s)}=\\frac{G s \\frac{\\omega_{o}}{Q}}{s^{2}+s \\frac{\\omega_{o}}{Q}+\\omega_{0}^{2}} \\tag{12.33}\n\\end{equation*}\n$$\n\nwhere $G=1$ represents the gain at the center frequency. Given $\\omega_{0}=2 \\pi \\times 20 \\mathrm{MHz}$ and $\\mathrm{Q}=5$, we find\n\n$$\n\\begin{equation*}\n\\mathrm{k}_{1}=\\mathrm{G} \\frac{\\omega_{0}}{\\mathrm{Q}}=2.513 \\times 10^{7} \\mathrm{rad} / \\mathrm{s} \\tag{12.34}\n\\end{equation*}\n$$\n\nSince $k_{0}$ and $k_{2}$ are zero, we have $C_{x}=G_{m 4}=0$ and\n\n$$\n\\begin{gather*}\nG_{m 1}=\\omega_{0} C_{A}=0.2513 \\mathrm{~mA} / \\mathrm{V}  \\tag{12.35}\\\\\nG_{m 2}=\\omega_{0}\\left(C_{B}+C_{x}\\right)=0.2513 \\mathrm{~mA} / \\mathrm{V} \\tag{12.36}\n\\end{gather*}\n$$\n\nIn this scenario,\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m} 3}=\\mathrm{G}_{\\mathrm{m} 5}=\\mathrm{k}_{1} \\mathrm{C}_{\\mathrm{B}}=50.27 \\mu \\mathrm{~A} / \\mathrm{V} \\tag{12.37}\n\\end{equation*}\n$$"
},
{
    "text": "A fully-differential biquadratic $\\mathrm{G}_{\\mathrm{m}-} \\mathrm{C}$ filter is depicted in Fig. 12.10. The transfer function of this biquad filter is determined to be\n\n$$\n\\begin{equation*}\nH(s) \\equiv \\frac{V_{\\text {out }}(s)}{V_{\\text {in }}(s)}=\\frac{s^{2}\\left(\\frac{C_{x}}{C_{x}+C_{B}}\\right)+s\\left(\\frac{G_{m 5}}{C_{x}+C_{B}}\\right)+\\left(\\frac{G_{m 2} G_{m 4}}{C_{A}\\left(C_{x}+C_{B}\\right)}\\right.}{s^{2}+s\\left(\\frac{G_{m 3}}{C_{x}+C_{b}}\\right)+\\left(\\frac{G_{m 1} G_{m 2}}{C_{A}\\left(C_{x}+C_{B}\\right)}\\right)} \\tag{12.26}\n\\end{equation*}\n$$\n\nBy equating the coefficients of (12.2) and (12.26), we obtain\n\n$$\n\\begin{align*}\nk_{2} & =\\frac{C_{x}}{C_{X}+C_{B}}  \\tag{12.27}\\\\\nk_{1} & =\\frac{G_{m 5}}{C_{x}+C_{B}}  \\tag{12.28}\\\\\nk_{0} & =\\frac{G_{m 2} G_{m 4}}{C_{A}\\left(C_{X}+C_{B}\\right)} \\tag{12.29}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\omega_{\\circ}^{2}=\\frac{G_{m 1} G_{m 2}}{C_{A}\\left(C_{X}+C_{B}\\right)} \\tag{12.30}\n\\end{equation*}\n$$\n\nFor the quality factor $Q$, we observe that\n\n$$\n\\begin{equation*}\n\\frac{\\omega_{o}}{Q}=\\frac{G_{m 3}}{C_{x}+C_{b}} \\tag{12.31}\n\\end{equation*}\n$$\n\nUsing (12.30), we can determine $Q$, leading to\n\n$$\n\\begin{equation*}\nQ=\\sqrt{\\left(\\frac{G_{m 1} G_{m}}{G_{m 3}^{2}}\\right)\\left(\\frac{C_{X}+C_{B}}{C_{A}}\\right)} \\tag{12.32}\n\\end{equation*}\n$$\n\nWhile these equations are primarily for analyzing a given circuit, they can also be applied for design purposes, yielding the following design equations:\n\n$$\n\\begin{gathered}\nC_{x}=C_{B}\\left(\\frac{k_{2}}{1-k_{2}}\\right) \\quad \\text { where } 0 \\leq k_{2}<1 \\\\\nG_{m 1}=\\omega_{0} C_{A} \\quad G_{m 2}=\\omega_{0}\\left(C_{B}+C_{x}\\right) \\quad G_{m 3}=\\frac{\\omega_{0}\\left(C_{B}+C_{x}\\right)}{Q} \\\\\nG_{m 4}=\\left(k_{0} C_{A}\\right) / \\omega_{0} \\quad G_{m 5}=k_{1}\\left(C_{B}+C_{x}\\right)\n\\end{gathered}\n$$\n\nIt is important to note that for this design, there is a constraint on the high-frequency gain coefficient, $\\mathrm{k}_{2}$, similar to that encountered in the first-order case.\n\n#### EXAMPLE 12.4\n\nDetermine the transconductance and capacitor values for a second-order filter exhibiting a bandpass response with a center frequency of 20 MHz, a $Q$ value of 5, and a center frequency gain of 1. Assume $C_{A}=C_{B}=2 \\mathrm{pF}$.\n\n#### Solution\n\nA bandpass transfer function is expressed as\n\n$$\n\\begin{equation*}\nH(s) \\equiv \\frac{V_{\\text {out }}(s)}{V_{\\text {in }}(s)}=\\frac{G s \\frac{\\omega_{o}}{Q}}{s^{2}+s \\frac{\\omega_{o}}{Q}+\\omega_{0}^{2}} \\tag{12.33}\n\\end{equation*}\n$$\n\nwhere $G=1$ represents the gain at the center frequency. Given $\\omega_{0}=2 \\pi \\times 20 \\mathrm{MHz}$ and $\\mathrm{Q}=5$, we find\n\n$$\n\\begin{equation*}\n\\mathrm{k}_{1}=\\mathrm{G} \\frac{\\omega_{0}}{\\mathrm{Q}}=2.513 \\times 10^{7} \\mathrm{rad} / \\mathrm{s} \\tag{12.34}\n\\end{equation*}\n$$\n\nSince $k_{0}$ and $k_{2}$ are zero, we have $C_{x}=G_{m 4}=0$ and\n\n$$\n\\begin{gather*}\nG_{m 1}=\\omega_{0} C_{A}=0.2513 \\mathrm{~mA} / \\mathrm{V}  \\tag{12.35}\\\\\nG_{m 2}=\\omega_{0}\\left(C_{B}+C_{x}\\right)=0.2513 \\mathrm{~mA} / \\mathrm{V} \\tag{12.36}\n\\end{gather*}\n$$\n\nIn this scenario,\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m} 3}=\\mathrm{G}_{\\mathrm{m} 5}=\\mathrm{k}_{1} \\mathrm{C}_{\\mathrm{B}}=50.27 \\mu \\mathrm{~A} / \\mathrm{V} \\tag{12.37}\n\\end{equation*}\n$$"
},
{
    "text": "A fully-differential biquadratic $\\mathrm{G}_{\\mathrm{m}-} \\mathrm{C}$ filter is depicted in Fig. 12.10. The transfer function for this biquad filter is determined to be\n\n$$\n\\begin{equation*}\nH(s) \\equiv \\frac{V_{\\text {out }}(s)}{V_{\\text {in }}(s)}=\\frac{s^{2}\\left(\\frac{C_{x}}{C_{x}+C_{B}}\\right)+s\\left(\\frac{G_{m 5}}{C_{x}+C_{B}}\\right)+\\left(\\frac{G_{m 2} G_{m 4}}{C_{A}\\left(C_{x}+C_{B}\\right)}\\right.}{s^{2}+s\\left(\\frac{G_{m 3}}{C_{x}+C_{b}}\\right)+\\left(\\frac{G_{m 1} G_{m 2}}{C_{A}\\left(C_{x}+C_{B}\\right)}\\right)} \\tag{12.26}\n\\end{equation*}\n$$\n\nBy equating the coefficients of (12.2) and (12.26), we obtain\n\n$$\n\\begin{align*}\nk_{2} & =\\frac{C_{x}}{C_{X}+C_{B}}  \\tag{12.27}\\\\\nk_{1} & =\\frac{G_{m 5}}{C_{x}+C_{B}}  \\tag{12.28}\\\\\nk_{0} & =\\frac{G_{m 2} G_{m 4}}{C_{A}\\left(C_{X}+C_{B}\\right)} \\tag{12.29}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\omega_{\\circ}^{2}=\\frac{G_{m 1} G_{m 2}}{C_{A}\\left(C_{X}+C_{B}\\right)} \\tag{12.30}\n\\end{equation*}\n$$\n\nFor the quality factor $Q$, we observe that\n\n$$\n\\begin{equation*}\n\\frac{\\omega_{o}}{Q}=\\frac{G_{m 3}}{C_{x}+C_{b}} \\tag{12.31}\n\\end{equation*}\n$$\n\nUtilizing (12.30), we can derive $Q$ as\n\n$$\n\\begin{equation*}\nQ=\\sqrt{\\left(\\frac{G_{m 1} G_{m}}{G_{m 3}^{2}}\\right)\\left(\\frac{C_{X}+C_{B}}{C_{A}}\\right)} \\tag{12.32}\n\\end{equation*}\n$$\n\nWhile the above equations are intended for circuit analysis, they are also applicable for design, leading to the following design equations:\n\n$$\n\\begin{gathered}\nC_{x}=C_{B}\\left(\\frac{k_{2}}{1-k_{2}}\\right) \\quad \\text { where } 0 \\leq k_{2}<1 \\\\\nG_{m 1}=\\omega_{0} C_{A} \\quad G_{m 2}=\\omega_{0}\\left(C_{B}+C_{x}\\right) \\quad G_{m 3}=\\frac{\\omega_{0}\\left(C_{B}+C_{x}\\right)}{Q} \\\\\nG_{m 4}=\\left(k_{0} C_{A}\\right) / \\omega_{0} \\quad G_{m 5}=k_{1}\\left(C_{B}+C_{x}\\right)\n\\end{gathered}\n$$\n\nIt is important to note that this design imposes a restriction on the high-frequency gain coefficient, $\\mathrm{k}_{2}$, akin to that seen in the first-order scenario.\n\n#### EXAMPLE 12.4\n\nDetermine the transconductance and capacitor values for a second-order filter exhibiting a bandpass response with a center frequency of 20 MHz, a $Q$ value of 5, and a center frequency gain of 1. Assume $C_{A}=C_{B}=2 \\mathrm{pF}$.\n\n#### Solution\n\nA bandpass transfer function is expressed as\n\n$$\n\\begin{equation*}\nH(s) \\equiv \\frac{V_{\\text {out }}(s)}{V_{\\text {in }}(s)}=\\frac{G s \\frac{\\omega_{o}}{Q}}{s^{2}+s \\frac{\\omega_{o}}{Q}+\\omega_{0}^{2}} \\tag{12.33}\n\\end{equation*}\n$$\n\nwhere $G=1$ represents the gain at the center frequency. Given $\\omega_{0}=2 \\pi \\times 20 \\mathrm{MHz}$ and $\\mathrm{Q}=5$, we find\n\n$$\n\\begin{equation*}\n\\mathrm{k}_{1}=\\mathrm{G} \\frac{\\omega_{0}}{\\mathrm{Q}}=2.513 \\times 10^{7} \\mathrm{rad} / \\mathrm{s} \\tag{12.34}\n\\end{equation*}\n$$\n\nSince $k_{0}$ and $k_{2}$ are zero, we have $C_{x}=G_{m 4}=0$ and\n\n$$\n\\begin{gather*}\nG_{m 1}=\\omega_{0} C_{A}=0.2513 \\mathrm{~mA} / \\mathrm{V}  \\tag{12.35}\\\\\nG_{m 2}=\\omega_{0}\\left(C_{B}+C_{x}\\right)=0.2513 \\mathrm{~mA} / \\mathrm{V} \\tag{12.36}\n\\end{gather*}\n$$\n\nIn this scenario,\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m} 3}=\\mathrm{G}_{\\mathrm{m} 5}=\\mathrm{k}_{1} \\mathrm{C}_{\\mathrm{B}}=50.27 \\mu \\mathrm{~A} / \\mathrm{V} \\tag{12.37}\n\\end{equation*}\n$$"
},
{
    "text": "A fully-differential biquadratic $\\mathrm{G}_{\\mathrm{m}-} \\mathrm{C}$ filter is depicted in Fig. 12.10. The transfer function for this biquad filter is determined to be\n\n$$\n\\begin{equation*}\nH(s) \\equiv \\frac{V_{\\text {out }}(s)}{V_{\\text {in }}(s)}=\\frac{s^{2}\\left(\\frac{C_{x}}{C_{x}+C_{B}}\\right)+s\\left(\\frac{G_{m 5}}{C_{x}+C_{B}}\\right)+\\left(\\frac{G_{m 2} G_{m 4}}{C_{A}\\left(C_{x}+C_{B}\\right)}\\right.}{s^{2}+s\\left(\\frac{G_{m 3}}{C_{x}+C_{b}}\\right)+\\left(\\frac{G_{m 1} G_{m 2}}{C_{A}\\left(C_{x}+C_{B}\\right)}\\right)} \\tag{12.26}\n\\end{equation*}\n$$\n\nBy equating the coefficients of (12.2) and (12.26), we obtain\n\n$$\n\\begin{align*}\nk_{2} & =\\frac{C_{x}}{C_{X}+C_{B}}  \\tag{12.27}\\\\\nk_{1} & =\\frac{G_{m 5}}{C_{x}+C_{B}}  \\tag{12.28}\\\\\nk_{0} & =\\frac{G_{m 2} G_{m 4}}{C_{A}\\left(C_{X}+C_{B}\\right)} \\tag{12.29}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\omega_{\\circ}^{2}=\\frac{G_{m 1} G_{m 2}}{C_{A}\\left(C_{X}+C_{B}\\right)} \\tag{12.30}\n\\end{equation*}\n$$\n\nFor the quality factor $Q$, we observe that\n\n$$\n\\begin{equation*}\n\\frac{\\omega_{o}}{Q}=\\frac{G_{m 3}}{C_{x}+C_{b}} \\tag{12.31}\n\\end{equation*}\n$$\n\nUtilizing (12.30), we can determine $Q$, yielding\n\n$$\n\\begin{equation*}\nQ=\\sqrt{\\left(\\frac{G_{m 1} G_{m}}{G_{m 3}^{2}}\\right)\\left(\\frac{C_{X}+C_{B}}{C_{A}}\\right)} \\tag{12.32}\n\\end{equation*}\n$$\n\nWhile these equations are intended for analyzing an existing circuit, they can also be applied for design purposes, leading to the following design equations:\n\n$$\n\\begin{gathered}\nC_{x}=C_{B}\\left(\\frac{k_{2}}{1-k_{2}}\\right) \\quad \\text { where } 0 \\leq k_{2}<1 \\\\\nG_{m 1}=\\omega_{0} C_{A} \\quad G_{m 2}=\\omega_{0}\\left(C_{B}+C_{x}\\right) \\quad G_{m 3}=\\frac{\\omega_{0}\\left(C_{B}+C_{x}\\right)}{Q} \\\\\nG_{m 4}=\\left(k_{0} C_{A}\\right) / \\omega_{0} \\quad G_{m 5}=k_{1}\\left(C_{B}+C_{x}\\right)\n\\end{gathered}\n$$\n\nIt is important to note that for this design, there is a constraint on the high-frequency gain coefficient, $\\mathrm{k}_{2}$, analogous to that encountered in the first-order scenario.\n\n#### EXAMPLE 12.4\n\nDetermine the transconductance and capacitor values for a second-order filter exhibiting a bandpass response with a center frequency of 20 MHz, a $Q$ value of 5, and a center frequency gain of 1. Assume $C_{A}=C_{B}=2 \\mathrm{pF}$.\n\n#### Solution\n\nA bandpass transfer function is expressed as\n\n$$\n\\begin{equation*}\nH(s) \\equiv \\frac{V_{\\text {out }}(s)}{V_{\\text {in }}(s)}=\\frac{G s \\frac{\\omega_{o}}{Q}}{s^{2}+s \\frac{\\omega_{o}}{Q}+\\omega_{0}^{2}} \\tag{12.33}\n\\end{equation*}\n$$\n\nwhere $G=1$ represents the gain at the center frequency. Given $\\omega_{0}=2 \\pi \\times 20 \\mathrm{MHz}$ and $\\mathrm{Q}=5$, we find\n\n$$\n\\begin{equation*}\n\\mathrm{k}_{1}=\\mathrm{G} \\frac{\\omega_{0}}{\\mathrm{Q}}=2.513 \\times 10^{7} \\mathrm{rad} / \\mathrm{s} \\tag{12.34}\n\\end{equation*}\n$$\n\nSince $k_{0}$ and $k_{2}$ are zero, we have $C_{x}=G_{m 4}=0$ and\n\n$$\n\\begin{gather*}\nG_{m 1}=\\omega_{0} C_{A}=0.2513 \\mathrm{~mA} / \\mathrm{V}  \\tag{12.35}\\\\\nG_{m 2}=\\omega_{0}\\left(C_{B}+C_{x}\\right)=0.2513 \\mathrm{~mA} / \\mathrm{V} \\tag{12.36}\n\\end{gather*}\n$$\n\nIn this scenario,\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m} 3}=\\mathrm{G}_{\\mathrm{m} 5}=\\mathrm{k}_{1} \\mathrm{C}_{\\mathrm{B}}=50.27 \\mu \\mathrm{~A} / \\mathrm{V} \\tag{12.37}\n\\end{equation*}\n$$"
},
{
    "text": "A fully-differential biquadratic $\\mathrm{G}_{\\mathrm{m}-} \\mathrm{C}$ filter is depicted in Fig. 12.10. The transfer function of this biquad filter is determined to be\n\n$$\n\\begin{equation*}\nH(s) \\equiv \\frac{V_{\\text {out }}(s)}{V_{\\text {in }}(s)}=\\frac{s^{2}\\left(\\frac{C_{x}}{C_{x}+C_{B}}\\right)+s\\left(\\frac{G_{m 5}}{C_{x}+C_{B}}\\right)+\\left(\\frac{G_{m 2} G_{m 4}}{C_{A}\\left(C_{x}+C_{B}\\right)}\\right.}{s^{2}+s\\left(\\frac{G_{m 3}}{C_{x}+C_{b}}\\right)+\\left(\\frac{G_{m 1} G_{m 2}}{C_{A}\\left(C_{x}+C_{B}\\right)}\\right)} \\tag{12.26}\n\\end{equation*}\n$$\n\nBy equating the coefficients of (12.2) and (12.26), we obtain\n\n$$\n\\begin{align*}\nk_{2} & =\\frac{C_{x}}{C_{X}+C_{B}}  \\tag{12.27}\\\\\nk_{1} & =\\frac{G_{m 5}}{C_{x}+C_{B}}  \\tag{12.28}\\\\\nk_{0} & =\\frac{G_{m 2} G_{m 4}}{C_{A}\\left(C_{X}+C_{B}\\right)} \\tag{12.29}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\omega_{\\circ}^{2}=\\frac{G_{m 1} G_{m 2}}{C_{A}\\left(C_{X}+C_{B}\\right)} \\tag{12.30}\n\\end{equation*}\n$$\n\nFor the quality factor $Q$, we observe that\n\n$$\n\\begin{equation*}\n\\frac{\\omega_{o}}{Q}=\\frac{G_{m 3}}{C_{x}+C_{b}} \\tag{12.31}\n\\end{equation*}\n$$\n\nUsing (12.30), we can derive $Q$ as\n\n$$\n\\begin{equation*}\nQ=\\sqrt{\\left(\\frac{G_{m 1} G_{m}}{G_{m 3}^{2}}\\right)\\left(\\frac{C_{X}+C_{B}}{C_{A}}\\right)} \\tag{12.32}\n\\end{equation*}\n$$\n\nWhile the above equations are intended for circuit analysis, they can also be applied to design, leading to the following design equations:\n\n$$\n\\begin{gathered}\nC_{x}=C_{B}\\left(\\frac{k_{2}}{1-k_{2}}\\right) \\quad \\text { where } 0 \\leq k_{2}<1 \\\\\nG_{m 1}=\\omega_{0} C_{A} \\quad G_{m 2}=\\omega_{0}\\left(C_{B}+C_{x}\\right) \\quad G_{m 3}=\\frac{\\omega_{0}\\left(C_{B}+C_{x}\\right)}{Q} \\\\\nG_{m 4}=\\left(k_{0} C_{A}\\right) / \\omega_{0} \\quad G_{m 5}=k_{1}\\left(C_{B}+C_{x}\\right)\n\\end{gathered}\n$$\n\nNote that for this design, there is a constraint on the high-frequency gain coefficient, $\\mathrm{k}_{2}$, similar to that in the first-order case.\n\n#### EXAMPLE 12.4\n\nDetermine the transconductance and capacitor values for a second-order filter with a bandpass response, a center frequency of 20 MHz, a $Q$ value of 5, and a center frequency gain of 1. Assume $C_{A}=C_{B}=2 \\mathrm{pF}$.\n\n#### Solution\n\nA bandpass transfer function is expressed as\n\n$$\n\\begin{equation*}\nH(s) \\equiv \\frac{V_{\\text {out }}(s)}{V_{\\text {in }}(s)}=\\frac{G s \\frac{\\omega_{o}}{Q}}{s^{2}+s \\frac{\\omega_{o}}{Q}+\\omega_{0}^{2}} \\tag{12.33}\n\\end{equation*}\n$$\n\nwhere $G=1$ is the gain at the center frequency. Given $\\omega_{0}=2 \\pi \\times 20 \\mathrm{MHz}$ and $\\mathrm{Q}=5$, we find\n\n$$\n\\begin{equation*}\n\\mathrm{k}_{1}=\\mathrm{G} \\frac{\\omega_{0}}{\\mathrm{Q}}=2.513 \\times 10^{7} \\mathrm{rad} / \\mathrm{s} \\tag{12.34}\n\\end{equation*}\n$$\n\nSince $k_{0}$ and $k_{2}$ are zero, we have $C_{x}=G_{m 4}=0$ and\n\n$$\n\\begin{gather*}\nG_{m 1}=\\omega_{0} C_{A}=0.2513 \\mathrm{~mA} / \\mathrm{V}  \\tag{12.35}\\\\\nG_{m 2}=\\omega_{0}\\left(C_{B}+C_{x}\\right)=0.2513 \\mathrm{~mA} / \\mathrm{V} \\tag{12.36}\n\\end{gather*}\n$$\n\nIn this scenario,\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m} 3}=\\mathrm{G}_{\\mathrm{m} 5}=\\mathrm{k}_{1} \\mathrm{C}_{\\mathrm{B}}=50.27 \\mu \\mathrm{~A} / \\mathrm{V} \\tag{12.37}\n\\end{equation*}\n$$"
},
{
    "text": "A fully-differential biquadratic $\\mathrm{G}_{\\mathrm{m}-} \\mathrm{C}$ filter is depicted in Fig. 12.10. The transfer function for this biquad filter is determined to be\n\n$$\n\\begin{equation*}\nH(s) \\equiv \\frac{V_{\\text {out }}(s)}{V_{\\text {in }}(s)}=\\frac{s^{2}\\left(\\frac{C_{x}}{C_{x}+C_{B}}\\right)+s\\left(\\frac{G_{m 5}}{C_{x}+C_{B}}\\right)+\\left(\\frac{G_{m 2} G_{m 4}}{C_{A}\\left(C_{x}+C_{B}\\right)}\\right.}{s^{2}+s\\left(\\frac{G_{m 3}}{C_{x}+C_{b}}\\right)+\\left(\\frac{G_{m 1} G_{m 2}}{C_{A}\\left(C_{x}+C_{B}\\right)}\\right)} \\tag{12.26}\n\\end{equation*}\n$$\n\nBy equating the coefficients of (12.2) and (12.26), we obtain\n\n$$\n\\begin{align*}\nk_{2} & =\\frac{C_{x}}{C_{X}+C_{B}}  \\tag{12.27}\\\\\nk_{1} & =\\frac{G_{m 5}}{C_{x}+C_{B}}  \\tag{12.28}\\\\\nk_{0} & =\\frac{G_{m 2} G_{m 4}}{C_{A}\\left(C_{X}+C_{B}\\right)} \\tag{12.29}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\omega_{\\circ}^{2}=\\frac{G_{m 1} G_{m 2}}{C_{A}\\left(C_{X}+C_{B}\\right)} \\tag{12.30}\n\\end{equation*}\n$$\n\nFor the quality factor $Q$, we observe that\n\n$$\n\\begin{equation*}\n\\frac{\\omega_{o}}{Q}=\\frac{G_{m 3}}{C_{x}+C_{b}} \\tag{12.31}\n\\end{equation*}\n$$\n\nUsing (12.30), we can derive $Q$ as\n\n$$\n\\begin{equation*}\nQ=\\sqrt{\\left(\\frac{G_{m 1} G_{m}}{G_{m 3}^{2}}\\right)\\left(\\frac{C_{X}+C_{B}}{C_{A}}\\right)} \\tag{12.32}\n\\end{equation*}\n$$\n\nWhile these equations are intended for circuit analysis, they are also applicable for design, leading to the following design equations:\n\n$$\n\\begin{gathered}\nC_{x}=C_{B}\\left(\\frac{k_{2}}{1-k_{2}}\\right) \\quad \\text { where } 0 \\leq k_{2}<1 \\\\\nG_{m 1}=\\omega_{0} C_{A} \\quad G_{m 2}=\\omega_{0}\\left(C_{B}+C_{x}\\right) \\quad G_{m 3}=\\frac{\\omega_{0}\\left(C_{B}+C_{x}\\right)}{Q} \\\\\nG_{m 4}=\\left(k_{0} C_{A}\\right) / \\omega_{0} \\quad G_{m 5}=k_{1}\\left(C_{B}+C_{x}\\right)\n\\end{gathered}\n$$\n\nIt is important to note that this design imposes a constraint on the high-frequency gain coefficient, $\\mathrm{k}_{2}$, akin to that seen in the first-order scenario.\n\n#### EXAMPLE 12.4\n\nDetermine the transconductance and capacitor values for a second-order filter exhibiting a bandpass response with a center frequency of 20 MHz, a $Q$ value of 5, and a center frequency gain of 1. Assume $C_{A}=C_{B}=2 \\mathrm{pF}$.\n\n#### Solution\n\nA bandpass transfer function is expressed as\n\n$$\n\\begin{equation*}\nH(s) \\equiv \\frac{V_{\\text {out }}(s)}{V_{\\text {in }}(s)}=\\frac{G s \\frac{\\omega_{o}}{Q}}{s^{2}+s \\frac{\\omega_{o}}{Q}+\\omega_{0}^{2}} \\tag{12.33}\n\\end{equation*}\n$$\n\nwhere $G=1$ represents the gain at the center frequency. Given $\\omega_{0}=2 \\pi \\times 20 \\mathrm{MHz}$ and $\\mathrm{Q}=5$, we calculate\n\n$$\n\\begin{equation*}\n\\mathrm{k}_{1}=\\mathrm{G} \\frac{\\omega_{0}}{\\mathrm{Q}}=2.513 \\times 10^{7} \\mathrm{rad} / \\mathrm{s} \\tag{12.34}\n\\end{equation*}\n$$\n\nSince $k_{0}$ and $k_{2}$ are zero, we have $C_{x}=G_{m 4}=0$ and\n\n$$\n\\begin{gather*}\nG_{m 1}=\\omega_{0} C_{A}=0.2513 \\mathrm{~mA} / \\mathrm{V}  \\tag{12.35}\\\\\nG_{m 2}=\\omega_{0}\\left(C_{B}+C_{x}\\right)=0.2513 \\mathrm{~mA} / \\mathrm{V} \\tag{12.36}\n\\end{gather*}\n$$\n\nIn this instance,\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m} 3}=\\mathrm{G}_{\\mathrm{m} 5}=\\mathrm{k}_{1} \\mathrm{C}_{\\mathrm{B}}=50.27 \\mu \\mathrm{~A} / \\mathrm{V} \\tag{12.37}\n\\end{equation*}\n$$"
},
{
    "text": "A fully-differential biquadratic $\\mathrm{G}_{\\mathrm{m}-} \\mathrm{C}$ filter is depicted in Fig. 12.10. The transfer function for this biquad filter is determined to be\n\n$$\n\\begin{equation*}\nH(s) \\equiv \\frac{V_{\\text {out }}(s)}{V_{\\text {in }}(s)}=\\frac{s^{2}\\left(\\frac{C_{x}}{C_{x}+C_{B}}\\right)+s\\left(\\frac{G_{m 5}}{C_{x}+C_{B}}\\right)+\\left(\\frac{G_{m 2} G_{m 4}}{C_{A}\\left(C_{x}+C_{B}\\right)}\\right.}{s^{2}+s\\left(\\frac{G_{m 3}}{C_{x}+C_{b}}\\right)+\\left(\\frac{G_{m 1} G_{m 2}}{C_{A}\\left(C_{x}+C_{B}\\right)}\\right)} \\tag{12.26}\n\\end{equation*}\n$$\n\nBy equating the coefficients of (12.2) and (12.26), we obtain\n\n$$\n\\begin{align*}\nk_{2} & =\\frac{C_{x}}{C_{X}+C_{B}}  \\tag{12.27}\\\\\nk_{1} & =\\frac{G_{m 5}}{C_{x}+C_{B}}  \\tag{12.28}\\\\\nk_{0} & =\\frac{G_{m 2} G_{m 4}}{C_{A}\\left(C_{X}+C_{B}\\right)} \\tag{12.29}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\omega_{\\circ}^{2}=\\frac{G_{m 1} G_{m 2}}{C_{A}\\left(C_{X}+C_{B}\\right)} \\tag{12.30}\n\\end{equation*}\n$$\n\nFor the quality factor $Q$, we observe that\n\n$$\n\\begin{equation*}\n\\frac{\\omega_{o}}{Q}=\\frac{G_{m 3}}{C_{x}+C_{b}} \\tag{12.31}\n\\end{equation*}\n$$\n\nUtilizing (12.30), we can derive $Q$ as\n\n$$\n\\begin{equation*}\nQ=\\sqrt{\\left(\\frac{G_{m 1} G_{m}}{G_{m 3}^{2}}\\right)\\left(\\frac{C_{X}+C_{B}}{C_{A}}\\right)} \\tag{12.32}\n\\end{equation*}\n$$\n\nWhile these equations are primarily for analyzing a given circuit, they can also be applied for design purposes, leading to the following design equations:\n\n$$\n\\begin{gathered}\nC_{x}=C_{B}\\left(\\frac{k_{2}}{1-k_{2}}\\right) \\quad \\text { where } 0 \\leq k_{2}<1 \\\\\nG_{m 1}=\\omega_{0} C_{A} \\quad G_{m 2}=\\omega_{0}\\left(C_{B}+C_{x}\\right) \\quad G_{m 3}=\\frac{\\omega_{0}\\left(C_{B}+C_{x}\\right)}{Q} \\\\\nG_{m 4}=\\left(k_{0} C_{A}\\right) / \\omega_{0} \\quad G_{m 5}=k_{1}\\left(C_{B}+C_{x}\\right)\n\\end{gathered}\n$$\n\nIt is important to note that for this design, there is a constraint on the high-frequency gain coefficient, $\\mathrm{k}_{2}$, similar to that encountered in the first-order case.\n\n#### EXAMPLE 12.4\n\nDetermine the transconductance and capacitor values for a second-order filter with a bandpass response, featuring a center frequency of 20 MHz, a $Q$ value of 5, and a center frequency gain of 1. Assume $C_{A}=C_{B}=2 \\mathrm{pF}$.\n\n#### Solution\n\nA bandpass transfer function is expressed as\n\n$$\n\\begin{equation*}\nH(s) \\equiv \\frac{V_{\\text {out }}(s)}{V_{\\text {in }}(s)}=\\frac{G s \\frac{\\omega_{o}}{Q}}{s^{2}+s \\frac{\\omega_{o}}{Q}+\\omega_{0}^{2}} \\tag{12.33}\n\\end{equation*}\n$$\n\nwhere $G=1$ represents the gain at the center frequency. Given $\\omega_{0}=2 \\pi \\times 20 \\mathrm{MHz}$ and $\\mathrm{Q}=5$, we calculate\n\n$$\n\\begin{equation*}\n\\mathrm{k}_{1}=\\mathrm{G} \\frac{\\omega_{0}}{\\mathrm{Q}}=2.513 \\times 10^{7} \\mathrm{rad} / \\mathrm{s} \\tag{12.34}\n\\end{equation*}\n$$\n\nSince $k_{0}$ and $k_{2}$ are zero, we find $C_{x}=G_{m 4}=0$ and\n\n$$\n\\begin{gather*}\nG_{m 1}=\\omega_{0} C_{A}=0.2513 \\mathrm{~mA} / \\mathrm{V}  \\tag{12.35}\\\\\nG_{m 2}=\\omega_{0}\\left(C_{B}+C_{x}\\right)=0.2513 \\mathrm{~mA} / \\mathrm{V} \\tag{12.36}\n\\end{gather*}\n$$\n\nIn this scenario,\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m} 3}=\\mathrm{G}_{\\mathrm{m} 5}=\\mathrm{k}_{1} \\mathrm{C}_{\\mathrm{B}}=50.27 \\mu \\mathrm{~A} / \\mathrm{V} \\tag{12.37}\n\\end{equation*}\n$$"
},
{
    "text": "Two methodologies for employing resistors to linearize the differential input voltage to output current relationship in a differential transistor pair are depicted in Fig. 12.11. To grasp the fundamental operation of these circuits, we initially assume that the transistors' $\\mathrm{V}_{\\mathrm{gs}}$ voltages are constant. Consequently, the differential input voltage, $\\mathrm{v}_{\\mathrm{i}}$, is present across the two $\\mathrm{R}_{\\mathrm{S}} / 2$ resistors in Fig. 12.11(a) and across $R_{S}$ in Fig. 12.11(b). Hence, the drain current $I_{D 1}$ is expressed as\n\n$$\n\\begin{equation*}\nI_{D 1}=I_{1}+\\frac{v_{i}}{R_{S}} \\tag{12.38}\n\\end{equation*}\n$$\n\nand the drain current $I_{D 2}$ is given by\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{D} 2}=\\mathrm{I}_{1}-\\frac{\\mathrm{v}_{\\mathrm{i}}}{\\mathrm{R}_{\\mathrm{S}}} \\tag{12.39}\n\\end{equation*}\n$$\n\nDefining $\\mathrm{i}_{01}$ as the difference in drain currents from $I_{1}$, we obtain\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{01}=\\frac{v_{i}}{R_{S}} \\tag{12.40}\n\\end{equation*}\n$$\n\nThe circuit in (a) features a differential pair with source degeneration resistors Rs/2, which linearizes the relationship between the differential input voltage (vi) and the output current (io1). Bias currents flow through the Rs/2 resistors, impacting the common-mode range and output swing. The transconductance Gm is determined by the formula Gm = 1 / (2/gm1 + Rs).\n\nThe circuit (b) is a differential pair with source degeneration using a resistor Rs. It consists\nTwo methodologies for using resistors to linearize the differential input voltage to output current relationship in a differential transistor pair are depicted in Fig. 12.11. To grasp\ngrasp the fundamental operation of these circuits, we initially assume that the transistors' $\\mathrm{V}_{\\mathrm{gs}}$ voltages are constant. Consequently, the differential input voltage, $\\mathrm{v}_{\\mathrm{i}}$, is present across the two $\\mathrm{R}_{\\mathrm{S}} / 2$ resistors in Fig. 12.11(a) and across $R_{S}$ in Fig. 12.11(b). Hence, the drain current $I_{D 1}$ is expressed as\n\n$$\n\\begin{equation*}\nI_{D 1}=I_{1}+\\frac{v_{i}}{R_{S}} \\tag{12.38}\n\\end{equation*}\n$$\n\nand the drain current $I_{D 2}$ is given by\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{D} 2}=\\mathrm{I}_{1}-\\frac{\\mathrm{v}_{\\mathrm{i}}}{\\mathrm{R}_{\\mathrm{S}}} \\tag{12.39}\n\\end{equation*}\n$$\n\nDefining $\\mathrm{i}_{01}$ as the difference in drain currents from $I_{1}$, we obtain\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{01}=\\frac{v_{i}}{R_{S}} \\tag{12.40}\n\\end{equation*}\n$$\n\nThe circuit in (a) features a differential pair with source degeneration resistors Rs/2, which linearizes the relationship between the differential input voltage (vi) and the output current (io1). Bias currents flow through the Rs/2 resistors, influencing the common-mode range and output swing. The transconductance Gm is determined by the formula Gm = 1 / (2/gm1 + Rs).\n\nThe circuit (b) is a differential pair with source degeneration using a resistor Rs. It consists of two NMOS transistors Q1 and Q2, each with a current source I1 connected to their drains, and a resistor Rs connecting their sources. The circuit is designed for improved linearity in the transconductance by using source degeneration.\n\nFig. 12.11 illustrates fixed transconductors using resistors. The circuit in (a) has a smaller common-mode range and output swing than the circuit in (b) due to bias currents flowing through the $\\mathrm{R}_{\\mathrm{S}} / 2$ resistors.\n\nKey Point: Source-degenerating a differential pair with a resistor linearizes the relationship between differential input voltage and output current. The result is a transconductor with a value approximately equal to the degeneration resistance.\n\nThus, the transconductance of these two differential input circuits is a fixed value of $1 / R_{S}$. One important difference between the two fixed transconductors of Fig. 12.11 is that, in the case of $v_{i}=0$, a bias current of $I_{1}$ flows through the two $R_{S} / 2$ resistors in Fig. 12.11(a), whereas no bias current is flowing through $\\mathrm{R}_{\\mathrm{S}}$ in Fig. 12.11(b). As a result, the common-mode voltage of Fig. $12.11(b)$ can be closer to ground. For example, if a bias current of $I_{1}=100 \\mu \\mathrm{~A}$ is used together with $R_{S}=20 \\mathrm{k} \\Omega$, then the voltage drop across each of the two $R_{S} / 2$ resistors would result in 1 V less of common-mode range. It should be noted here that the common-mode input voltage must be far enough above ground to account for the largest expected differential input voltage, $v_{i}$. Specifically, one must ensure that the circuit remains functional while the gate on one side of the differential pair is lower than the common-mode voltage by $\\mathrm{v}_{\\mathrm{i}} / 2$.\n\nA simple estimate of the maximum differential input range for both these circuits can be found by determining how much voltage exists across the linearizing resistors at the point where one transistor just turns off. For example, in Fig. $12.11(a)$, when $Q_{2}$ turns off due to a large positive input voltage, all of $2 I_{1}$ flows through $R_{s} / 2$ on the left and nothing flows through $R_{s} / 2$ on the right. Thus, the voltage at the center of the two resistors equals that of the source of $Q_{2}$ (since no current flows right), and the maximum input voltage equals that voltage across the left $R_{S} / 2$ resistor, giving\n\n$$\n\\begin{equation*}\nV_{i, \\max }=I_{1} R_{S} \\tag{12.41}\n\\end{equation*}\n$$\n\nA similar argument gives the same maximum input voltage for the circuit of Fig. 12.11(b). It should be noted here that this simple estimate does not take into account that significant distortion occurs when this maximum input voltage is applied. Specifically, at $\\mathrm{V}_{\\mathrm{i}, \\max }=\\mathrm{I}_{1} \\mathrm{R}_{\\mathrm{S}}$, one of the two transistors will be off, implying that $\\mathrm{V}_{\\mathrm{Gs}}$ has not remained a relatively constant value, as we assumed earlier in this section. Typically, the maximum input range that applies to the preceding fixed transconductors might be one-half that of (12.41), or, equivalently, $\\left(I_{1} / 2\\right) R_{S}$.\n\nSo far, we have assumed that the transistor's $\\mathrm{V}_{\\mathrm{gs}}$ voltages remain constant. Such an assumption is reasonably valid if the MOSFETs are replaced by bipolar transistors as shown in Fig. 12.12 due to the exponential currentvoltage relationship of bipolar transistors. However, it is less accurate with a MOFET differential pair, whose"
},
{
    "text": "Figures 12.11(a) and 12.11(b) illustrate two equivalent strategies for utilizing resistors to linearize the differential input voltage to output current relationship in a differential pair of transistors. To grasp the fundamental operation of these circuits, we initially assume that the transistor gate-to-source voltages, $\\mathrm{V}_{\\mathrm{gs}}$, remain constant. Consequently, the differential input voltage, $\\mathrm{v}_{\\mathrm{i}}$, is evident across the two $\\mathrm{R}_{\\mathrm{S}} / 2$ resistors in Figure 12.11(a) and across $R_{S}$ in Figure 12.11(b). Therefore, the drain current $I_{D 1}$ can be expressed as:\n\n$$\nI_{D 1} = I_{1} + \\frac{v_{i}}{R_{S}} \\tag{12.38}\n$$\n\nand the drain current $I_{D 2}$ is given by:\n\n$$\nI_{D 2} = I_{1} - \\frac{v_{i}}{R_{S}} \\tag{12.39}\n$$\n\nDefining $\\mathrm{i}_{01}$ as the discrepancy in the drain currents from $I_{1}$, we have:\n\n$$\ni_{01} = \\frac{v_{i}}{R_{S}} \\tag{12.40}\n$$\n\nFigure 12.11(a) depicts a differential pair circuit with source degeneration resistors $\\mathrm{R}_{\\mathrm{S}} / 2$, which linearizes the relationship between the differential input voltage (vi) and the output current (io1). Bias currents traverse the $\\mathrm{R}_{\\mathrm{S}} / 2$ resistors, influencing the common-mode range and output swing. The transconductance Gm is determined by the formula Gm = 1 / (2/gm1 + Rs).\n\nFigure 12.11(b) represents a differential pair circuit with source degeneration via a resistor Rs. It comprises two NMOS transistors Q1 and Q2, each with a current source I1 connected to their drains, and a resistor Rs linking their sources. The circuit aims for enhanced linearity in transconductance through source degeneration.\n\nThe circuit in Figure 12.11(a) exhibits a smaller common-mode range and output swing compared to the circuit in Figure 12.11(b), due to bias currents flowing through the $\\mathrm{R}_{\\mathrm{S}} / 2$ resistors.\n\nKey Point: Employing a resistor to source-degenerate a differential pair linearizes the relationship between differential input voltage and output current, yielding a transconductor with a value approximately equal to the degeneration resistance.\n\nHence, the transconductance of both differential input circuits is a constant value of $1 / R_{S}$. A notable distinction between the two fixed transconductors in Figure 12.11 is that, when $v_{i} = 0$, a bias current of $I_{1}$ flows through the two $\\mathrm{R}_{\\mathrm{S}} / 2$ resistors in Figure 12.11(a), whereas no bias current flows through $\\mathrm{R}_{\\mathrm{S}}$ in Figure 12.11(b). Consequently, the common-mode voltage in Figure 12.11(b) can be closer to ground. For instance, with a bias current of $I_{1} = 100 \\mu \\mathrm{~A}$ and $R_{S} = 20 \\mathrm{k} \\Omega$, the voltage drop across each of the two $\\mathrm{R}_{\\mathrm{S}} / 2$ resistors would result in a 1 V reduction in common-mode range. It is crucial to ensure that the common-mode input voltage is sufficiently above ground to accommodate the largest expected differential input voltage, $v_{i}$. Specifically, one must guarantee that the circuit remains operational while the gate on one side of the differential pair is lower than the common-mode voltage by $\\mathrm{v}_{\\mathrm{i}} / 2$."
},
{
    "text": "---[Rephrased Text]---\n\nTwo methodologies for achieving a linear relationship between the differential input voltage and the output current in a pair of transistors by utilizing resistors are depicted in Fig. 12.11. To grasp the fundamental principles of these circuits, we initially assume that the transistors have a constant $\\mathrm{V}_{\\mathrm{gs}}$ voltage. Consequently, it becomes apparent that the differential input voltage, $\\mathrm{v}_{\\mathrm{i}}$, is present across the two $\\mathrm{R}_{\\mathrm{S}} / 2$ resistors in Fig. 12.11(a) and across $R_{S}$ in Fig. 12.11(b). Therefore, the drain current $I_{D 1}$ is expressed as\n\n$$\n\\begin{equation*}\nI_{D 1}=I_{1}+\\frac{v_{i}}{R_{S}} \\tag{12.38}\n\\end{equation*}\n$$\n\nand the drain current $I_{D 2}$ is expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{D} 2}=\\mathrm{I}_{1}-\\frac{\\mathrm{v}_{\\mathrm{i}}}{\\mathrm{R}_{\\mathrm{S}}} \\tag{12.39}\n\\end{equation*}\n$$\n\nUpon defining $\\mathrm{i}_{01}$ as the discrepancy in drain currents from $I_{1}$, we obtain\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{01}=\\frac{v_{i}}{R_{S}} \\tag{12.40}\n\\end{equation*}\n$$\n\nThe circuit depicted in (a) represents a differential pair with resistors $\\mathrm{R}_{\\mathrm{S}} / 2$ for source degeneration, which linearizes the relationship between the differential input voltage (vi) and the output current (io1). Bias currents flow through the $\\mathrm{R}_{\\mathrm{S}} / 2$ resistors, impacting the common-mode range and output swing. The transconductance Gm is determined using the formula Gm = 1 / (2/gm1 + Rs).\n\nThe circuit shown in (b) is a differential pair with source degeneration that employs a resistor Rs. Comprising two NMOS transistors Q1 and Q2, each with a current source I1 connected to their drains, and a resistor Rs linking their sources, this circuit is designed to enhance transconductance linearity through source degeneration.\n\nFig. 12.11 illustrates fixed transconductors using resistors. The circuit in (a) exhibits a smaller common-mode range and output swing compared to the circuit in (b), due to bias currents flowing through the $\\mathrm{R}_{\\mathrm{S}} / 2$ resistors.\n\nKey Point: Implementing source degeneration in a differential pair with a resistor linearizes the relationship between the differential input voltage and the output current, resulting in a transconductor with a value approximately equal to the degeneration resistance.\n\nHence, the transconductance of these two differential input circuits is a constant value of $1 / R_{S}$. A notable distinction between the two fixed transconductors of Fig. 12.11 is that, when $v_{i}=0$, a bias current of $I_{1}$ flows through the two $R_{S} / 2$ resistors in Fig. 12.11(a), whereas no bias current flows through $\\mathrm{R}_{\\mathrm{S}}$ in Fig. 12.11(b). Consequently, the common-mode voltage of Fig. $12.11(b)$ can be closer to ground. For instance, if a bias current of $I_{1}=100 \\mu \\mathrm{~A}$ is used in conjunction with $R_{S}=20 \\mathrm{k} \\Omega$, the voltage drop across each of the two $R_{S} / 2$ resistors would result in a 1 V reduction in the common-mode range. It is crucial to ensure that the common-mode input voltage is sufficiently above ground to accommodate the largest expected differential input voltage, $v_{\\mathrm{i}}$. Specifically, one must guarantee that the circuit remains operational while the gate on one side of the differential pair is lower than the common-mode voltage by $\\mathrm{v}_{\\mathrm{i}} / 2$.\n\nA straightforward estimate of the maximum differential input range for both circuits can be obtained by determining the voltage across the linearizing resistors at the point where one transistor just switches off. For example, in Fig. $12.11(a)$, when $Q_{2}$ switches off due to a large positive input voltage, the entire $2 I_{1}$ flows through $R_{s} / 2$ on the left, with none flowing through $R_{s} / 2$ on the right. Consequently, the voltage at the center of the two resistors equals that of the source of $Q_{2}$ (since no current flows right), and the maximum input voltage equals the voltage across the left $R_{S} / 2$ resistor, yielding\n\n$$\n\\begin{equation*}\nV_{i, \\max }=I_{1} R_{S} \\tag{12.41}\n\\end{equation*}\n$$\n\nA similar argument yields the same maximum input voltage for the circuit of Fig. 12.11(b). It is important to note that this simplified estimate does not account for the significant distortion that occurs when this maximum input voltage is applied. Specifically, at $\\mathrm{V}_{\\mathrm{i}, \\max }=\\mathrm{I}_{1} \\mathrm{R}_{\\mathrm{S}}$, one of the two transistors will be off, indicating that $\\mathrm{V}_{\\mathrm{Gs}}$ has not remained relatively constant, as assumed earlier in this section. Typically, the maximum input range applicable to the aforementioned fixed transconductors might be one-half that of (12.41), or, equivalently, $\\left(I_{1} / 2\\right) R_{S}$.\n\nSo far, we have assumed that the transistor's $\\mathrm{V}_{\\mathrm{gs}}$ voltages remain constant. This assumption is reasonably valid if the MOSFETs are replaced by bipolar transistors, as shown in Fig. 12.12, due to the exponential current-voltage relationship of bipolar transistors. However, it is less accurate with a MOFET differential pair, whose gate-source voltage varies appreciably with input voltage. In either the MOS or bipolar circuits, the assumption holds when one restricts the minimum drain (or collector) current, $\\mathrm{I}_{\\mathrm{D}, \\mathrm{min}}$, in either transistor to be that which maintains the small-signal transconductance, $g_{m}$, large enough to ensure $1 / g_{m}<<R_{S}$, recalling that\n\n$$\n\\begin{equation*}\ng_{m}=\\sqrt{2 \\mu_{n} C_{o x}(W / L) I_{D}} \\gg 1 / R_{S} \\tag{12.42}\n\\end{equation*}\n$$\n\nFor the bipolar circuit, we have the simpler requirement,\n\n$$\n\\begin{equation*}\n\\mathrm{r}_{\\mathrm{e}, \\max }=\\frac{\\mathrm{V}_{\\mathrm{T}}}{\\mathrm{I}_{\\mathrm{E}, \\min }} \\ll \\mathrm{R}_{\\mathrm{S}} \\tag{12.43}\n\\end{equation*}\n$$\n\nor equivalently,\n\n$$\n\\begin{equation*}\nI_{E, \\min }>>\\frac{V_{T}}{R_{S}} \\tag{12.44}\n\\end{equation*}\n$$\n\nFor example, if $R_{S}=20 \\mathrm{k} \\Omega$ and $\\mathrm{V}_{\\mathrm{T}}=25 \\mathrm{mV}$, the minimum emitter current in either transistor should be much greater than $1.25 \\mu \\mathrm{~A}$. A pertinent question is, How much greater is \"much greater than\"? The answer to this question depends on how much distortion can be tolerated since, when $1 / g_{m}$ becomes a comparable size to $R_{S}$, the varying $\\mathrm{V}_{\\mathrm{gs}}$ or $\\mathrm{V}_{\\mathrm{be}}$ voltage will result in the output current, $i_{o}$, being a significant nonlinear function of the input voltage, $v_{i}$. For instance, if the maximum value of $1 / g_{m}$ reaches 10 percent of that of $R_{S}$ when the maximum applied input voltage is $\\left(I_{1} / 2\\right) R_{S}$, then a linearity deviation of about 3 percent occurs. Therefore, to achieve high linearity with the preceding circuits, the bias currents should be substantial and the input signal should be minimal (to ensure large values of $\\mathrm{g}_{\\mathrm{m}}$ ). Of course, the use of small input signals may lead to noise becoming a problem.\n\nIn applications where a moderate amount of nonlinearity can be accepted, $\\mathrm{R}_{\\mathrm{S}}$ might be chosen to be similar in magnitude to the nominal bias value of $1 / \\mathrm{g}_{\\mathrm{m}}$. In this scenario, the overall transconductance of this transconductor is most conveniently determined using the hybrid T model for the input transistor pair. With this approach, the output current is more accurately described by\n\n$$\n\\begin{equation*}\ni_{01}=\\frac{v_{i}}{1 / g_{m 1}+R_{S}+1 / g_{m} 2}=\\frac{v_{i}}{2 / g_{m}+R_{s}} \\tag{12.45}\n\\end{equation*}\n$$\n\nNote that (12.45) reduces to (12.40) when $R_{S}$ is chosen much larger than $2 / g_{m}$. In summary, a more precise formula for the transconductance of the circuits of Fig. 12.11 (and Fig. 12.12) is\n\n$$\n\\begin{equation*}\nG_{m}=\\frac{i_{o 1}}{v_{i}}=\\frac{1}{2 / g_{m}+R_{s}} \\tag{12.46}\n\\end{equation*}\n$$\n\n#### EXAMPLE 12.5\n\nConsider the circuit of Fig. $12.12(b)$, where $R_{S}=3 \\mathrm{k} \\Omega$ (such that $G_{m} \\approx 0.333 \\mathrm{~mA} / \\mathrm{V}$ ) and the maximum differential input voltage is $\\pm 500 \\mathrm{mV}$. Choose an appropriate bias current, $I_{1}$, such that $r_{e, \\max }<0.1 R_{s}$, and find a more precise value for $G_{m}$. Find the new value of $I_{1}$ and $G_{m}$ if the constraint $r_{e, \\max }<0.01 R_{s}$ is used instead.\n\n#### Solution\n\nIn the first case, we have $r_{\\mathrm{e}, \\max }<0.1 \\mathrm{R}_{\\mathrm{s}}=300 \\Omega$. Thus, in the case of $\\mathrm{v}_{\\mathrm{i}}=500 \\mathrm{mV}$, we require that $\\mathrm{r}_{\\mathrm{e} 2} \\approx 300 \\Omega$, which is achieved for an emitter current of\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{E} 2, \\min }=\\frac{\\mathrm{V}_{\\mathrm{T}}}{\\mathrm{r}_{\\mathrm{e}, \\max }}=\\frac{26 \\mathrm{mV}}{300 \\Omega}=86.7 \\mu \\mathrm{~A} \\tag{12.47}\n\\end{equation*}\n$$\n\nFor this same input voltage, the resistor current is approximately\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{RE}} \\cong \\frac{500 \\mathrm{mV}}{3 \\mathrm{k} \\Omega}=167 \\mu \\mathrm{~A} \\tag{12.48}\n\\end{equation*}\n$$\n\nand since the current through $R_{s}$ plus $I_{\\mathrm{E} 2}$ must equal $I_{1}$ (according to the node currents at the emitter of $Q_{2}$ ), we have\n\n$$\n\\begin{equation*}\nI_{1}=167+86.7=253 \\mu \\mathrm{~A} \\tag{12.49}\n\\end{equation*}\n$$\n\nIn other words, a minimum bias current of $253 \\mu \\mathrm{~A}$ should be selected. For this value of bias current, the nominal value of $r_{e}$ is given by\n\n$$\n\\begin{equation*}\n\\mathrm{r}_{\\mathrm{e}}=\\frac{\\mathrm{V}_{\\mathrm{T}}}{\\mathrm{I}_{1}}=103 \\Omega \\tag{12.50}\n\\end{equation*}\n$$\n\nresulting in\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=\\frac{1}{\\left(2 \\mathrm{r}_{\\mathrm{e}}+\\mathrm{R}_{\\mathrm{s}}\\right)}=0.312 \\mathrm{~mA} / \\mathrm{V} \\tag{12.51}\n\\end{equation*}\n$$\n\nFor the case $r_{e, \\max }<0.01 R_{E}$, one finds $I_{1}=1.03 \\mathrm{~mA}$ and $G_{m}=0.328 \\mathrm{~mA} / V$. Note here that the nominal value of $r_{e}$ is now only $26 \\Omega$, which is significantly less than $R_{s}$. Although this second design will have less distortion than the first (about 10 times better), it consumes much more power. Next, we explore using feedback to enhance distortion without resorting to large bias currents.\n\nOne approach to enhancing the distortion characteristics of the aforementioned fixed transconductors without relying on large bias currents and small input signal levels is to employ an additional pair of amplifiers, as shown in Fig. 12.13. Here, the virtual ground in each opamp forces the source voltages of $Q_{1}$ and $Q_{2}$ to equal those of $v_{i}^{+}$and $v_{i}^{-}$. As a result, the input voltage appears directly across $R_{s}$ and does not depend on the $V_{g s}$ voltages of $Q_{1}$ and $Q_{2}$. Thus, the transconductance of this circuit is given by\n\n$$\n\\begin{equation*}\nG_{m}=\\frac{i_{o 1}}{v_{i}^{+}-v_{i}^{-}}=\\frac{1}{R_{S}} \\tag{12.52}\n\\end{equation*}\n$$\n\nIt should be noted here that the opamps can be quite simple (typically, a single stage) because they merely improve an input stage that is already reasonably linear.\n\nFig. 12.13 demonstrates the enhancement of the linearity of a fixed transconductor through the use of opamps.\n\nAnother technique for enhancing the linearity of a fixed transconductor is to maintain constant currents through $\\mathrm{Q}_{1}$ and $\\mathrm{Q}_{2}$, as shown in Fig. 12.14 for a bipolar input pair [Koyama, 1993]. Here, $I_{1}$ flows through each of $Q_{1}$ and $Q_{2}$ so that $V_{\\text {be1 }}$ and $V_{\\text {be2 }}$ are fixed, while $Q_{3}$ and $Q_{4}$ exhibit varying collector currents corresponding to the current flow through $R_{s}$. The output currents can then be obtained at the collectors of $\\mathrm{Q}_{7}$ and $\\mathrm{Q}_{8}$, which mirror the current through $Q_{3}$ and $Q_{4}$. Assuming the current mirror transistors consisting of $Q_{7}$ and $Q_{8}$ are equal in size to those of $Q_{3}$ and $Q_{4}$, the transconductance of this cell is expressed as\n\n$$\n\\begin{equation*}\nG_{m}=\\frac{i_{01}}{v_{i}^{+}-v_{i}^{-}}=\\frac{1}{R_{s}} \\tag{12.53}\n\\end{equation*}\n$$\n\nIf the current mirror transistors are scaled relative to $Q_{3}$ and $Q_{4}$, then the transconductance for this cell is also scaled by the same amount.\n\nIt should be noted that simple diode-connected transistors are not used at $Q_{3}$ and $Q_{4}$ since a feedback circuit is required to set the voltage level at the collectors of $Q_{1}$ and $Q_{2}$ without drawing much current. The feedback loop operates as follows: If the voltage at the collector of $Q_{1}$ increases because $I_{C 1}$ is less than $I_{1}$, then $V_{\\text {be3 }}$ also increases, forcing more current through $Q_{3}$ and $Q_{1}$ until $I_{C 1}$ once again equals $I_{1}$. Although the circuit shown results in each of $Q_{1}$ and $Q_{2}$ collector voltages being set to two diode drops above ground (i.e., $V_{\\text {be3 }}+V_{\\text {be } 5}$ ), a larger voltage can be obtained by adding diode-connected transistors that operate as voltage level-shifters. It is possible to combine parts of this fixed-transconductor circuit with a gain-cell stage, as was done in [Koyama, 1993]. The same linearization technique has been used in a CMOS variable transconductor that will be presented in Section 12.4.1, where the resistance $R_{S}$ is realized using a MOS transistor operating in the triode region [Welland, 1994].\n\nA challenge with the transconductors presented so far is the lack of an evident mechanism for tuning the transconductance to ensure accuracy over process, voltage, and temperature variations. One solution is to provide an array of degeneration resistors $\\mathrm{R}_{\\mathrm{S}}$ and select the most appropriate value using switches. Alternatively, triode devices may be used in series with or in place of $\\mathrm{R}_{\\mathrm{S}}$, and their gate voltage used to adjust the effective source degeneration. This is the topic of"
},
{
    "text": "Two methodologies are depicted in Fig. 12.11 for rectifying the differential input voltage to output current proportionality using resistors in a differential transistor pair. The fundamental functionality of these configurations is elucidated by initially hypothesizing a steady $\\mathrm{V}_{\\mathrm{gs}}$ voltage across the transistors. This hypothesis leads us to observe that the differential input voltage, $\\mathrm{v}_{\\mathrm{i}}$, is dropped across the two $\\mathrm{R}_{\\mathrm{S}} / 2$ resistors in Fig. 12.11(a) and across $R_{S}$ in Fig. 12.11(b). Consequently, the drain current $I_{D 1}$ can be expressed as\n\n$$\n\\begin{equation*}\nI_{D 1}=I_{1}+\\frac{v_{i}}{R_{S}} \\tag{12.38}\n\\end{equation*}\n$$\n\nand the drain current $I_{D 2}$ as\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{D} 2}=\\mathrm{I}_{1}-\\frac{\\mathrm{v}_{\\mathrm{i}}}{\\mathrm{R}_{\\mathrm{S}}} \\tag{12.39}\n\\end{equation*}\n$$\n\nBy defining $\\mathrm{i}_{01}$ as the deviation in drain currents from $I_{1}$, we obtain\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{01}=\\frac{v_{i}}{R_{S}} \\tag{12.40}\n\\end{equation*}\n$$\n\nFig. 12.11(a) illustrates a differential pair circuit with resistors $\\mathrm{R}_{\\mathrm{S}} / 2$ that linearize the differential input voltage (vi) to output current (io1) relationship. The bias currents traverse\nTwo methodologies are depicted in Fig. 12.11 for rectifying the differential input voltage to output current proportionality using resistors in a differential transistor pair. The fundamental functionality of these configurations is elucidated by initially hypothesizing a steady $\\mathrm{V}_{\\mathrm{gs}}$ voltage across the transistors. This hypothesis leads us to observe that the differential input voltage, $\\mathrm{v}_{\\mathrm{i}}$, is dropped across the two $\\mathrm{R}_{\\mathrm{S}} / 2$ resistors in Fig. 12.11(a) and across $R_{S}$ in Fig. 12.11(b). Consequently, the drain current $I_{D 1}$ can be expressed as\n\n$$\n\\begin{equation*}\nI_{D 1}=I_{1}+\\frac{v_{i}}{R_{S}} \\tag{12.38}\n\\end{equation*}\n$$\n\nand the drain current $I_{D 2}$ as\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{D} 2}=\\mathrm{I}_{1}-\\frac{\\mathrm{v}_{\\mathrm{i}}}{\\mathrm{R}_{\\mathrm{S}}} \\tag{12.39}\n\\end{equation*}\n$$\n\nBy defining $\\mathrm{i}_{01}$ as the deviation in drain currents from $I_{1}$, we obtain\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{01}=\\frac{v_{i}}{R_{S}} \\tag{12.40}\n\\end{equation*}\n$$\n\nFig. 12.11(a) illustrates a differential pair circuit with resistors $\\mathrm{R}_{\\mathrm{S}} / 2$ that linearize the differential input voltage (vi) to output current (io1) relationship. The bias currents"
},
{
    "text": "Two methods of utilizing resistors to linearize the relationship between differential input voltage and output current in a differential pair of transistors are depicted in Fig. 12.11. To grasp the fundamental operation of these circuits, we initially assume a constant $\\mathrm{V}_{\\mathrm{gs}}$ voltage for the transistors. Consequently, the differential input voltage, $\\mathrm{v}_{\\mathrm{i}}$, is present across the two $\\mathrm{R}_{\\mathrm{S}} / 2$ resistors in Fig. 12.11(a) and across $R_{S}$ in Fig. 12.11(b). Thus, the drain current $I_{D 1}$ is expressed as\n\n$$\n\\begin{equation*}\nI_{D 1}=I_{1}+\\frac{v_{i}}{R_{S}} \\tag{12.38}\n\\end{equation*}\n$$\n\nand the drain current $I_{D 2}$ is given by\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{D} 2}=\\mathrm{I}_{1}-\\frac{\\mathrm{v}_{\\mathrm{i}}}{\\mathrm{R}_{\\mathrm{S}}} \\tag{12.39}\n\\end{equation*}\n$$\n\nDefining $\\mathrm{i}_{01}$ as the difference in drain currents from $I_{1}$, we have\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{01}=\\frac{v_{i}}{R_{S}} \\tag{12.40}\n\\end{equation*}\n$$\n\nThe circuit in (a) is a differential pair with source degeneration resistors Rs/2, which linearizes the relationship between differential input voltage (vi) and output current (io1). The bias currents flow through the Rs/2 resistors, affecting common-mode range and output swing. The transconductance Gm is determined by the formula Gm = 1 / (2/gm1 + Rs).\n\nThe circuit (b) is a differential pair with source degeneration using a resistor Rs. It consists of two NMOS transistors Q1 and Q2, each with a current source I1 connected to their drains, and a resistor Rs connecting their sources. The circuit is designed for improved linearity in the transconductance by using source degeneration.\n\nFig. 12.11 Fixed transconductors using resistors. The circuit in (a) has smaller common-mode range and output swing than the circuit in (b) due to bias currents flowing through the $\\mathrm{R}_{\\mathrm{S}} / 2$ resistors.\n\nKey Point: Source-degenerating a differential pair with a resistor linearizes the relationship between differential input voltage and output current. The result is a transconductor with a value approximately equal to the degeneration resistance.\n\nThus, we see that the transconductance of these two differential input circuits is a fixed value of $1 / R_{S}$. One important difference between the two fixed transconductors of Fig. 12.11 is that, in the case of $v_{i}=0$, a bias current of $I_{1}$ flows through the two $R_{S} / 2$ resistors in Fig. 12.11(a), whereas no bias current is flowing through $\\mathrm{R}_{\\mathrm{S}}$ in Fig. 12.11(b). As a result, the common-mode voltage of Fig. $12.11(b)$ can be closer to ground. For example, if a bias current of $I_{1}=100 \\mu \\mathrm{~A}$ is used together with $R_{S}=20 \\mathrm{k} \\Omega$, then the voltage drop across each of the two $R_{S} / 2$ resistors would result in 1 V less of common-mode range. It should be noted here that the common-mode input voltage must be far enough above ground to account for the largest expected differential input voltage, $v_{i}$. Specifically, one must ensure that the circuit remains functional while the gate on one side of the differential pair is lower than the common-mode voltage by $\\mathrm{v}_{\\mathrm{i}} / 2$.\n\nA simple estimate of the maximum differential input range for both these circuits can be found by determining how much voltage exists across the linearizing resistors at the point where one transistor just turns off. For example, in Fig. $12.11(a)$, when $Q_{2}$ turns off due to a large positive input voltage, all of $2 I_{1}$ flows through $R_{s} / 2$ on the left and nothing flows through $R_{s} / 2$ on the right. Thus, the voltage at the center of the two resistors equals that of the source of $Q_{2}$ (since no current flows right), and the maximum input voltage equals that voltage across the left $R_{S} / 2$ resistor, giving\n\n$$\n\\begin{equation*}\nV_{i, \\max }=I_{1} R_{S} \\tag{12.41}\n\\end{equation*}\n$$\n\nA similar argument gives the same maximum input voltage for the circuit of Fig. 12.11(b). It should be noted here that this simple estimate does not take into account that significant distortion occurs when this maximum input voltage is applied. Specifically, at $\\mathrm{V}_{\\mathrm{i}, \\max }=\\mathrm{I}_{1} \\mathrm{R}_{\\mathrm{S}}$, one of the two transistors will be off, implying that $\\mathrm{V}_{\\mathrm{Gs}}$ has not remained a relatively constant value, as we assumed earlier in this section. Typically, the maximum input range that applies to the preceding fixed transconductors might be one-half that of (12.41), or, equivalently, $\\left(I_{1} / 2\\right) R_{S}$.\n\nSo far, we have assumed that the transistor's $\\mathrm{V}_{\\mathrm{gs}}$ voltages remain constant. Such an assumption is reasonably valid if the MOSFETs are replaced by bipolar transistors as shown in Fig. 12.12 due to the exponential currentvoltage relationship of bipolar transistors. However, it is less accurate with a MOFET differential pair, whose\ngate-source voltage changes appreciably with input voltage. In either the MOS or bipolar circuits, the assumption is reasonable when one restricts the minimum drain (or collector) current, $\\mathrm{I}_{\\mathrm{D}, \\mathrm{min}}$, in either transistor to be that which keeps the small-signal transconductance, $g_{m}$, large enough to ensure $1 / g_{m}<<R_{S}$, recalling that\n\n$$\n\\begin{equation*}\ng_{m}=\\sqrt{2 \\mu_{n} C_{o x}(W / L) I_{D}} \\gg 1 / R_{S} \\tag{12.42}\n\\end{equation*}\n$$\n\nFor the bipolar circuit, we have the simpler requirement,\n\n$$\n\\begin{equation*}\n\\mathrm{r}_{\\mathrm{e}, \\max }=\\frac{\\mathrm{V}_{\\mathrm{T}}}{\\mathrm{I}_{\\mathrm{E}, \\min }} \\ll \\mathrm{R}_{\\mathrm{S}} \\tag{12.43}\n\\end{equation*}\n$$\n\nor equivalently,\n\n$$\n\\begin{equation*}\nI_{E, \\min }>>\\frac{V_{T}}{R_{S}} \\tag{12.44}\n\\end{equation*}\n$$\n\nFor example, if $R_{S}=20 \\mathrm{k} \\Omega$ and $\\mathrm{V}_{\\mathrm{T}}=25 \\mathrm{mV}$, the minimum emitter current in either transistor should be much greater than $1.25 \\mu \\mathrm{~A}$. A good question is, How much is \"much greater than\"? The answer to this question depends on how much distortion can be tolerated since, when $1 / g_{m}$ becomes a comparable size to $R_{S}$, the varying $\\mathrm{V}_{\\mathrm{gs}}$ or $\\mathrm{V}_{\\mathrm{be}}$ voltage will result in the output current, $i_{o}$, being a significant nonlinear function of the input voltage, $v_{i}$. For example, if the maximum value of $1 / g_{m}$ goes to 10 percent of that of $R_{S}$ when the maximum applied input voltage is $\\left(I_{1} / 2\\right) R_{S}$, then a linearity deviation of about 3 percent occurs. Thus, to attain a high linearity with the preceding circuits, the bias currents should be large and the input signal should be small (to ensure large values of $\\mathrm{g}_{\\mathrm{m}}$ ). Of course, the use of small input signals may result in noise becoming a problem.\n\nIn applications in which a moderate amount of nonlinearity can be tolerated, $\\mathrm{R}_{\\mathrm{S}}$ might be chosen similar in size to the nominal bias value of $1 / \\mathrm{g}_{\\mathrm{m}}$. In this case, the overall transconductance of this transconductor is most easily found using the hybrid T model for the input transistor pair. With such an approach, the output current is more accurately described by\n\n$$\n\\begin{equation*}\ni_{01}=\\frac{v_{i}}{1 / g_{m 1}+R_{S}+1 / g_{m} 2}=\\frac{v_{i}}{2 / g_{m}+R_{s}} \\tag{12.45}\n\\end{equation*}\n$$\n\nNote that (12.45) reduces to (12.40) when $R_{S}$ is chosen much larger than $2 / g_{m}$. In summary, a more accurate formula for the transconductance of the circuits of Fig. 12.11 (and Fig. 12.12) is\n\n$$\n\\begin{equation*}\nG_{m}=\\frac{i_{o 1}}{v_{i}}=\\frac{1}{2 / g_{m}+R_{s}} \\tag{12.46}\n\\end{equation*}\n$$\n\n#### EXAMPLE 12.5\n\nConsider the circuit of Fig. $12.12(b)$, where $R_{S}=3 \\mathrm{k} \\Omega$ (such that $G_{m} \\approx 0.333 \\mathrm{~mA} / \\mathrm{V}$ ) and the maximum differential input voltage is $\\pm 500 \\mathrm{mV}$. Choose an appropriate bias current, $I_{1}$, such that $r_{e, \\max }<0.1 R_{s}$, and find a more precise value for $G_{m}$. Find the new value of $I_{1}$ and $G_{m}$ if the constraint $r_{e, \\max }<0.01 R_{s}$ is used instead.\n\n#### Solution\n\nIn the first case, we have $r_{\\mathrm{e}, \\max }<0.1 \\mathrm{R}_{\\mathrm{s}}=300 \\Omega$. Thus, in the case of $\\mathrm{v}_{\\mathrm{i}}=500 \\mathrm{mV}$, we require that $\\mathrm{r}_{\\mathrm{e} 2} \\approx 300 \\Omega$, which is attained for an emitter current of\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{E} 2, \\min }=\\frac{\\mathrm{V}_{\\mathrm{T}}}{\\mathrm{r}_{\\mathrm{e}, \\max }}=\\frac{26 \\mathrm{mV}}{300 \\Omega}=86.7 \\mu \\mathrm{~A} \\tag{12.47}\n\\end{equation*}\n$$\n\nFor this same input voltage, the resistor current is approximately\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{RE}} \\cong \\frac{500 \\mathrm{mV}}{3 \\mathrm{k} \\Omega}=167 \\mu \\mathrm{~A} \\tag{12.48}\n\\end{equation*}\n$$\n\nand since the current through $R_{s}$ plus $I_{\\mathrm{E} 2}$ must equal $I_{1}$ (according to the node currents at the emitter of $Q_{2}$ ), we have\n\n$$\n\\begin{equation*}\nI_{1}=167+86.7=253 \\mu \\mathrm{~A} \\tag{12.49}\n\\end{equation*}\n$$\n\nIn other words, a minimum bias current of $253 \\mu \\mathrm{~A}$ should be chosen. For this value of bias current, the nominal value of $r_{e}$ is given by\n\n$$\n\\begin{equation*}\n\\mathrm{r}_{\\mathrm{e}}=\\frac{\\mathrm{V}_{\\mathrm{T}}}{\\mathrm{I}_{1}}=103 \\Omega \\tag{12.50}\n\\end{equation*}\n$$\n\nresulting in\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=\\frac{1}{\\left(2 \\mathrm{r}_{\\mathrm{e}}+\\mathrm{R}_{\\mathrm{s}}\\right)}=0.312 \\mathrm{~mA} / \\mathrm{V} \\tag{12.51}\n\\end{equation*}\n$$\n\nFor the case $r_{e, \\max }<0.01 R_{E}$, one finds $I_{1}=1.03 \\mathrm{~mA}$ and $G_{m}=0.328 \\mathrm{~mA} / V$. Note here that the nominal value of $r_{e}$ is now only $26 \\Omega$, which is significantly less than $R_{s}$. Although this second design will have less distortion than the first (about 10 times better), it uses much more power. Next, we look at using feedback to improve distortion without resorting to large bias currents.\n\nOne way to improve the distortion properties of the preceding fixed transconductors without using large bias currents and small input signal levels is to use an extra pair of amplifiers, as shown in Fig. 12.13. Here, the virtual ground in each opamp forces the source voltages of $Q_{1}$ and $Q_{2}$ to equal those of $v_{i}^{+}$and $v_{i}^{-}$. As a result, the input voltage appears directly across $R_{s}$ and does not depend on the $V_{g s}$ voltages of $Q_{1}$ and $Q_{2}$. Thus, the transconductance of this circuit is given by\n\n$$\n\\begin{equation*}\nG_{m}=\\frac{i_{o 1}}{v_{i}^{+}-v_{i}^{-}}=\\frac{1}{R_{S}} \\tag{12.52}\n\\end{equation*}\n$$\n\nIt should be mentioned here that the opamps can be quite simple (typically, a single stage) because they merely improve an input stage that is already reasonably linear.\n\nFig. 12.13 Improving the linearity of a fixed transconductor through the use of opamps.\n\nAnother method for improving the linearity of a fixed transconductor is to force constant currents through $\\mathrm{Q}_{1}$ and $\\mathrm{Q}_{2}$, as shown in Fig. 12.14 for a bipolar input pair [Koyama, 1993]. Here, $I_{1}$ flows through each of $Q_{1}$ and $Q_{2}$ so that $V_{\\text {be1 }}$ and $V_{\\text {be2 }}$ are fixed, while $Q_{3}$ and $Q_{4}$ have varying collector currents corresponding to the current flow through $R_{s}$. The output currents can then be obtained at the collectors of $\\mathrm{Q}_{7}$ and $\\mathrm{Q}_{8}$, which mirror the current through $Q_{3}$ and $Q_{4}$. Thus, assuming the current mirror transistors consisting of $Q_{7}$ and $Q_{8}$ are equal in size to those of $Q_{3}$ and $Q_{4}$, the transconductance of this cell is given by\n\n$$\n\\begin{equation*}\nG_{m}=\\frac{i_{01}}{v_{i}^{+}-v_{i}^{-}}=\\frac{1}{R_{s}} \\tag{12.53}\n\\end{equation*}\n$$\n\nIf the current mirror transistors are scaled in relation to $Q_{3}$ and $Q_{4}$, then the transconductance for this cell is also scaled by the same amount.\n\nIt should be noted that simple diode-connected transistors are not used at $Q_{3}$ and $Q_{4}$ since a feedback circuit is required to set the voltage level at the collectors of $Q_{1}$ and $Q_{2}$ without drawing much current. The feedback loop occurs as follows: If the voltage at the collector of $Q_{1}$ increases because $I_{C 1}$ is less than $I_{1}$, then $V_{\\text {be3 }}$ also increases, forcing more current through $Q_{3}$ and $Q_{1}$ until $I_{C 1}$ once again equals $I_{1}$. Although the circuit shown results in each of $Q_{1}$ and $Q_{2}$ collector voltages being set to two diode drops above ground (i.e., $V_{\\text {be3 }}+V_{\\text {be } 5}$ ), a larger voltage can be obtained by adding diode-connected transistors that operate as voltage level-shifters. It is possible to combine parts of this fixed-transconductor circuit with a gain-cell stage, as was done in [Koyama, 1993]. The same linearization technique has been used in a CMOS variable transconductor that will be presented in Section 12.4.1, where the resistance $R_{S}$ is realized using a MOS transistor operating in the triode region [Welland, 1994].\n\nA problem with the transconductors shown so far is that there is no obvious mechanism for tuning the transconductance to ensure accuracy over process, voltage, and temperature variations. One solution is to provide an array of degeneration resistors $\\mathrm{R}_{\\mathrm{S}}$ and somehow select the most appropriate value using switches. Alternatively, triode devices may be used in series with or in place of $\\mathrm{R}_{\\mathrm{S}}$, and their gate voltage used to tune the effective source degeneration. This is the topic of the following section.\n\nFig. 12.14 Improving the linearity of a fixed transconductor by maintaining a constant $\\mathrm{V"
},
{
    "text": "Figures 12.11 and 12.12 illustrate two techniques for utilizing resistors to linearize the differential input voltage to output current characteristics in a differential transistor pair. We begin our analysis by assuming that the gate-to-source voltages (\\( V_{gs} \\)) of the transistors are held constant. Consequently, the differential input voltage (\\( v_i \\)) is dropped across the two \\( \\frac{R_S}{2} \\) resistors in Figure 12.11(a) and across \\( R_S \\) in Figure 12.11(b). Hence, the drain current \\( I_{D1} \\) can be expressed as:\n\n\\[\nI_{D1} = I_1 + \\frac{v_i}{R_S} \\tag{12.38}\n\\]\n\nAnd the drain current \\( I_{D2} \\) is:\n\n\\[\nI_{D2} = I_1 - \\frac{v_i}{R_S} \\tag{12.39}\n\\]\n\nDefining \\( i_{01} \\) as the difference in drain currents from \\( I_1 \\), we have:\n\n\\[\ni_{01} = \\frac{v_i}{R_S} \\tag{12.40}\n\\]\n\nThe circuit depicted in (a) features a differential pair with source degeneration resistors \\( \\frac{R_S}{2} \\), which linearizes the relationship between the differential input voltage (\\( v_i \\)) and the output current (\\( i_{o1} \\)). Bias currents flowing through these resistors influence the common-mode range and output swing, with the transconductance \\( G_m \\) calculated using \\( G_m = \\frac{1}{2/gm_1 + R_S} \\).\n\nIn contrast, the circuit in (b) employs a resistor \\( R_S \\) for source degeneration, utilizing two NMOS transistors, \\( Q1 \\) and \\( Q2 \\), each with a current source \\( I_1 \\) connected to their drains, and a resistor \\( R_S \\) connecting their sources, to enhance the transconductance linearity.\n\nFigure 12.11 presents fixed transconductors using resistors. The circuit in (a) exhibits a smaller common-mode range and output swing compared to (b) due to bias currents passing through the \\( \\frac{R_S}{2} \\) resistors.\n\nA key point to note is that source-degenerating a differential pair with a resistor linearizes the relationship between differential input voltage and output current, resulting in a transconductor with a value approximately equal to the degeneration resistance.\n\nThe transconductance of both differential input circuits is a fixed value of \\( \\frac{1}{R_S} \\). A notable difference between the two fixed transconductors in Figure 12.11 is that, when \\( v_i = 0 \\), a bias current of \\( I_1 \\) flows through the two \\( \\frac{R_S}{2} \\) resistors in (a), whereas no bias current flows through \\( R_S \\) in (b). Consequently, the common-mode voltage in (b) can be closer to ground. For instance, if \\( I_1 = 100 \\mu A \\) is used in conjunction with \\( R_S = 20 k\\Omega \\), the voltage drop across each \\( \\frac{R_S}{2} \\) resistor would result in a 1 V reduction in the common-mode range. It is crucial to ensure that the common-mode input voltage is sufficiently above ground to accommodate the largest expected differential input voltage (\\( v_i \\)), maintaining circuit functionality when the gate on one side of the differential pair is lower than the common-mode voltage by \\( \\frac{v_i}{2} \\).\n\nA simple estimate of the maximum differential input range for both circuits can be obtained by determining the voltage across the linearizing resistors at the point where one transistor just turns off. For example, in Figure 12.11(a), when \\( Q_2 \\) turns off due to a large positive input voltage, all of \\( 2I_1 \\) flows through \\( \\frac{R_S}{2} \\) on the left, with none flowing through \\( \\frac{R_S}{2} \\) on the right. Thus, the voltage at the center of the two resistors equals the source voltage of \\( Q_2 \\) (since no current flows to the right), and the maximum input voltage equals the voltage across the left \\( \\frac{R_S}{2} \\) resistor, giving:\n\n\\[\nV_{i,\\max} = I_1 R_S \\tag{12.41}\n\\]\n\nA similar argument yields the same maximum input voltage for the circuit in Figure 12.11(b). However, this simple estimate does not account for the significant distortion that occurs when this maximum input voltage is applied. Specifically, at \\( V_{i,\\max} = I_1 R_S \\), one of the two transistors will be off, indicating that \\( V_{gs} \\) has not remained relatively constant, contrary to our initial assumption. Typically, the maximum input range for the preceding fixed transconductors may be half that of (12.41), or equivalently, \\( \\left(\\frac{I_1}{2}\\right) R_S \\).\n\nSo far, we have assumed that the transistor's \\( V_{gs} \\) voltages remain constant. This assumption is reasonably valid if the MOSFETs are replaced by bipolar transistors, as shown in Figure 12.12, due to the exponential current-voltage relationship of bipolar transistors. However, it is less accurate for a MOSFET differential pair, where the gate-source voltage changes appreciably with input voltage. In either the MOS or bipolar circuits, the assumption holds when one restricts the minimum drain (or collector) current, \\( I_{D,\\min} \\), in either transistor to be that which keeps the small-signal transconductance, \\( g_m \\), large enough to ensure \\( \\frac{1}{g_m} << R_S \\), recalling that:\n\n\\[\ng_m = \\sqrt{2 \\mu_n C_{ox}(W/L) I_D} \\gg \\frac{1}{R_S} \\tag{12.42}\n\\]\n\nFor the bipolar circuit, the simpler requirement is:\n\n\\[\nr_{e,\\max} = \\frac{V_T}{I_{E,\\min}} \\ll R_S \\tag{12.43}\n\\]\n\nor equivalently:\n\n\\[\nI_{E,\\min} >> \\frac{V_T}{R_S} \\tag{12.44}\n\\]\n\nFor example, if \\( R_S = 20 k\\Omega \\) and \\( V_T = 25 mV \\), the minimum emitter current in either transistor should be much greater than \\( 1.25 \\mu A \\). The question arises: How much greater? The answer depends on the tolerable amount of distortion since, when \\( \\frac{1}{g_m} \\) becomes comparable in size to \\( R_S \\), the varying \\( V_{gs} \\) or \\( V_{be} \\) voltage will result in the output current, \\( i_o \\), being a significant nonlinear function of the input voltage, \\( v_i \\). For instance, if the maximum value of \\( \\frac{1}{g_m} \\) reaches 10 percent of \\( R_S \\) when the maximum applied input voltage is \\( \\left(\\frac{I_1}{2}\\right) R_S \\), then a linearity deviation of about 3 percent occurs. Therefore, to achieve high linearity with the preceding circuits, the bias currents should be large and the input signal should be small (to ensure large values of \\( g_m \\)). Of course, the use of small input signals may lead to noise becoming a problem.\n\nIn applications where a moderate amount of nonlinearity can be tolerated, \\( R_S \\) might be chosen to be similar in size to the nominal bias value of \\( \\frac{1}{g_m} \\). In this case, the overall transconductance of this transconductor is most easily found using the hybrid \\( \\Pi \\) model for the input transistor pair. With such an approach, the output current is more accurately described by:\n\n\\[\ni_{01} = \\frac{v_i}{\\frac{1}{g_{m1}} + R_S + \\frac{1}{g_{m2}}} = \\frac{v_i}{\\frac{2}{g_m} + R_S} \\tag{12.45}\n\\]\n\nNote that (12.45) reduces to (12.40) when \\( R_S \\) is chosen much larger than \\( \\frac{2}{g_m} \\). In summary, a more accurate formula for the transconductance of the circuits in Figures 12.11 and 12.12 is:\n\n\\[\nG_m = \\frac{i_{o1}}{v_i} = \\frac{1}{\\frac{2}{g_m} + R_S} \\tag{12.46}\n\\]\n\n#### EXAMPLE 12.5\n\nConsider the circuit in Figure 12.12(b), where \\( R_S = 3 k\\Omega \\) (such that \\( G_m \\approx 0.333 mA/V \\)) and the maximum differential input voltage is \\( \\pm 500 mV \\). Choose an appropriate bias current, \\( I_1 \\), such that \\( r_{e,\\max} < 0.1 R_S \\), and find a more precise value for \\( G_m \\). Find the new values of \\( I_1 \\) and \\( G_m \\) if the constraint \\( r_{e,\\max} < 0.01 R_S \\) is used instead.\n\n#### Solution\n\nIn the first case, we have \\( r_{e,\\max} < 0.1 R_S = 300 \\Omega \\). Thus, for \\( v_i = 500 mV \\), we require that \\( r_{e2} \\approx 300 \\Omega \\), which is achieved for an emitter current of:\n\n\\[\nI_{E2,\\min} = \\frac{V_T}{r_{e,\\max}} = \\frac{26 mV}{300 \\Omega} = 86.7 \\mu A \\tag{12.47}\n\\]\n\nFor this same input voltage, the resistor current is approximately:\n\n\\[\nI_{RE} \\cong \\frac{500 mV}{3 k\\Omega} = 167 \\mu A \\tag{12.48}\n\\]\n\nAnd since the current through \\( R_S \\) plus \\( I_{E2} \\) must equal \\( I_1 \\) (according to the node currents at the emitter of \\( Q_2 \\)), we have:\n\n\\[\nI_1 = 167 + 86.7 = 253 \\mu A \\tag{12.49}\n\\]\n\nIn other words, a minimum bias current of \\( 253 \\mu A \\) should be chosen. For this value of bias current, the nominal value of \\( r_e \\) is given by:\n\n\\[\nr_e = \\frac{V_T}{I_1} = 103 \\Omega \\tag{12.50}\n\\]\n\nresulting in:\n\n\\[\nG_m = \\frac{1}{2r_e + R_S} = 0.312 mA/V \\tag{12.51}\n\\]\n\nFor the case \\( r_{e,\\max} < 0.01 R_S \\), one finds \\( I_1 = 1.03 mA \\) and \\( G_m = 0.328 mA/V \\). Note here that the nominal value of \\( r_e \\) is now only \\( 26 \\Omega \\), which is significantly less than \\( R_S \\). Although this second design will have less distortion than the first (about 10 times better), it uses much more power. Next, we consider using feedback to improve distortion without resorting to large bias currents.\n\nOne method to enhance the distortion characteristics of the fixed transconductors without using large bias currents and small input signal levels is to employ an additional pair of amplifiers, as shown in Figure 12.13. Here, the virtual ground in each opamp forces the source voltages of \\( Q_1 \\) and \\( Q_2 \\) to equal those of \\( v_i^+ \\) and \\( v_i^- \\). As a result, the input voltage appears directly across \\( R_S \\) and does not depend on the \\( V_{gs} \\) voltages of \\( Q_1 \\) and \\( Q_2 \\). Thus, the transconductance of this circuit is given by:\n\n\\[\nG_m = \\frac{i_{o1}}{v_i^+ - v_i^-} = \\frac{1}{R_S} \\tag{12.52}\n\\]\n\nIt should be noted that the opamps can be quite simple (typically, a single stage) because they merely improve an input stage that is already reasonably linear.\n\nFigure 12.13 illustrates the improvement in linearity of a fixed transconductor through the use of opamps.\n\nAnother technique for enhancing the linearity of a fixed transconductor is to force constant currents through \\( Q_1 \\) and \\( Q_2 \\), as shown in Figure 12.14 for a bipolar input pair. Here, \\( I_1 \\) flows through each of \\( Q_1 \\) and \\( Q_2 \\) so that \\( V_{be1} \\) and \\( V_{be2} \\) are fixed, while \\( Q_3 \\) and \\( Q_4 \\) have varying collector currents corresponding to the current flow through \\( R_S \\). The output currents can then be obtained at the collectors of \\( Q_7 \\) and \\( Q_8 \\), which mirror the current through \\( Q_3 \\) and \\( Q_4 \\). Assuming the current mirror transistors consisting of \\( Q_7 \\) and \\( Q_8 \\) are equal in size to those of \\( Q_3 \\) and \\( Q_4 \\), the transconductance of this cell is given by:\n\n\\[\nG_m = \\frac{i_{01}}{v_i^+ - v_i^-} = \\frac{1}{R_S} \\tag{12.53}\n\\]\n\nIf the current mirror transistors are scaled in relation to \\( Q_3 \\) and \\( Q_4 \\), then the transconductance for this cell is also scaled by the same amount.\n\nIt should be noted that simple diode-connected transistors are not used at \\( Q_3 \\) and \\( Q_4 \\) since a feedback circuit is required to set the voltage level at the collectors of \\( Q_1 \\) and \\( Q_2 \\) without drawing much current. The feedback loop operates as follows: If the voltage at the collector of \\( Q_1 \\) increases because \\( I_C1 \\) is less than \\( I_1 \\), then \\( V_{be3} \\) also increases, forcing more current through \\( Q_3 \\) and \\( Q_1 \\) until \\( I_C1 \\) once again equals \\( I_1 \\). Although the circuit shown results in each of \\( Q_1 \\) and \\( Q_2 \\) collector voltages being set to two diode drops above ground (i.e., \\( V_{be3} + V_{be5} \\)), a larger voltage can be obtained by adding diode-connected transistors that operate as voltage level-shifters. It is possible to combine parts of this fixed-transconductor circuit with a gain-cell stage, as was done in [Koyama, 1993]. The same linearization technique has been used in a CMOS variable transconductor that will be presented in Section 12.4.1, where the resistance \\( R_S \\) is realized using a MOS transistor operating in the triode region [Welland, 1994].\n\nA challenge with the transconductors presented so far is the lack of an obvious mechanism for tuning the transconductance to ensure accuracy over process, voltage, and temperature variations. One solution is to provide an array of degeneration resistors \\( R_S \\) and select the most appropriate value using switches. Alternatively, triode devices may be used in series with or in place of \\( R_S \\), and their gate voltage used to tune the effective source degeneration. This is the topic of the following section.\n\nA key point to remember is that feedback may be used to more accurately reproduce the input voltage across the degeneration resistor or further improve the linearity of transconductors with fixed resistors."
},
{
    "text": "Two distinct methodologies for implementing resistors to straighten the correlation between the differential input voltage and the output current in a transistor differential pair are depicted in Fig. 12.11. To grasp the fundamental functioning of these circuits, we initially assume that the transistors' $\\mathrm{V}_{\\mathrm{gs}}$ voltages are steady. This assumption leads us to observe that the differential input voltage, $\\mathrm{v}_{\\mathrm{i}}$, is present across the two $\\mathrm{R}_{\\mathrm{S}} / 2$ resistors in Fig. 12.11(a) and across $R_{S}$ in Fig. 12.11(b). Consequently, the drain current $I_{D 1}$ is expressed as:\n\n$$\n\\begin{equation*}\nI_{D 1}=I_{1}+\\frac{v_{i}}{R_{S}} \\tag{12.38}\n\\end{equation*}\n$$\n\nand the drain current $I_{D 2}$ is given by:\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{D} 2}=\\mathrm{I}_{1}-\\frac{\\mathrm{v}_{\\mathrm{i}}}{\\mathrm{R}_{\\mathrm{S}}} \\tag{12.39}\n\\end{equation*}\n$$\n\nBy defining $\\mathrm{i}_{01}$ as the discrepancy in the drain currents from $I_{1}$, we obtain:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{01}=\\frac{v_{i}}{R_{S}} \\tag{12.40}\n\\end{equation*}\n$$\n\nFor the circuit depicted in (a), it comprises a differential pair with source degeneration resistors Rs/2, which serve to linearize the correlation between the differential input voltage (vi) and the output current (io1). The bias currents traverse the Rs/2 resistors, impacting the common-mode range and output swing. The transconductance Gm is calculated using the formula Gm = 1 / (2/gm1 + Rs).\n\nIn the circuit represented in (b), a differential pair with source degeneration via a resistor Rs is employed. It includes two NMOS transistors, Q1 and Q2, each with a current source I1 connected to their drains, and a resistor Rs linking their sources. The circuit aims to enhance transconductance linearity through source degeneration.\n\nFig. 12.11 illustrates fixed transconductors using resistors. The circuit in (a) exhibits a smaller common-mode range and output swing compared to the circuit in (b), due to bias currents passing through the $\\mathrm{R}_{\\mathrm{S}} / 2$ resistors.\n\nA pivotal point to note is that employing a resistor to source-degenerate a differential pair results in a linear relationship between the differential input voltage and the output current. This configuration yields a transconductor with a value approximately equal to the degeneration resistance.\n\nHence, it is evident that the transconductance of these two differential input circuits is a constant value of $1 / R_{S}$. A notable distinction between the two fixed transconductors in Fig. 12.11 is that, when $v_{i}=0$, a bias current of $I_{1}$ flows through the two $R_{S} / 2$ resistors in Fig. 12.11(a), whereas no bias current traverses $\\mathrm{R}_{\\mathrm{S}}$ in Fig. 12.11(b). Consequently, the common-mode voltage in Fig. $12.11(b)$ can be closer to ground. For instance, if a bias current of $I_{1}=100 \\mu \\mathrm{~A}$ is utilized in conjunction with $R_{S}=20 \\mathrm{k} \\Omega$, the voltage drop across each of the two $R_{S} / 2$ resistors would entail a reduction of 1 V in the common-mode range. It is crucial to ensure that the common-mode input voltage is sufficiently above ground to accommodate the largest anticipated differential input voltage, $v_{\\mathrm{i}}$. Specifically, one must guarantee that the circuit remains operational while the gate on one side of the differential pair is lower than the common-mode voltage by $\\mathrm{v}_{\\mathrm{i}} / 2$.\n\nA rudimentary estimate of the maximum differential input range for both circuits can be ascertained by determining the voltage across the linearizing resistors at the point where one transistor just ceases to conduct. For example, in Fig. $12.11(a)$, when $Q_{2}$ turns off due to a large positive input voltage, the entirety of $2 I_{1}$ flows through $R_{s} / 2$ on the left, with none flowing through $R_{s} / 2$ on the right. Thus, the voltage at the center of the two resistors equals that of the source of $Q_{2}$ (since no current flows to the right), and the maximum input voltage equals the voltage across the left $R_{S} / 2$ resistor, yielding:\n\n$$\n\\begin{equation*}\nV_{i, \\max }=I_{1} R_{S} \\tag{12.41}\n\\end{equation*}\n$$\n\nA similar rationale yields the same maximum input voltage for the circuit depicted in Fig. 12.11(b). It is important to acknowledge that this simplified estimate does not account for the significant distortion that occurs when this maximum input voltage is applied. Specifically, at $\\mathrm{V}_{\\mathrm{i}, \\max }=\\mathrm{I}_{1} \\mathrm{R}_{\\mathrm{S}}$, one of the two transistors will be non-conducting, indicating that $\\mathrm{V}_{\\mathrm{Gs}}$ has not remained relatively constant, contrary to our initial assumption. Typically, the maximum input range applicable to the aforementioned fixed transconductors may be half that of (12.41), or, equivalently, $\\left(I_{1} / 2\\right) R_{S}$.\n\nUp to this point, we have assumed that the transistor's $\\mathrm{V}_{\\mathrm{gs}}$ voltages remain constant. This assumption is reasonably valid if the MOSFETs are substituted by bipolar transistors, as demonstrated in Fig. 12.12, due to the exponential current-voltage relationship of bipolar transistors. However, it is less precise with a MOFET differential pair, where the gate-source voltage appreciably varies with the input voltage. In either the MOS or bipolar circuits, the assumption holds when one constrains the minimum drain (or collector) current, $\\mathrm{I}_{\\mathrm{D}, \\mathrm{min}}$, in either transistor to be that which maintains the small-signal transconductance, $g_{m}$, sufficiently large to ensure $1 / g_{m}<<R_{S}$, recalling that:\n\n$$\n\\begin{equation*}\ng_{m}=\\sqrt{2 \\mu_{n} C_{o x}(W / L) I_{D}} \\gg 1 / R_{S} \\tag{12.42}\n\\end{equation*}\n$$\n\nFor the bipolar circuit, we have the simplified requirement:\n\n$$\n\\begin{equation*}\n\\mathrm{r}_{\\mathrm{e}, \\max }=\\frac{\\mathrm{V}_{\\mathrm{T}}}{\\mathrm{I}_{\\mathrm{E}, \\min }} \\ll \\mathrm{R}_{\\mathrm{S}} \\tag{12.43}\n\\end{equation*}\n$$\n\nor equivalently:\n\n$$\n\\begin{equation*}\nI_{E, \\min }>>\\frac{V_{T}}{R_{S}} \\tag{12.44}\n\\end{equation*}\n$$\n\nFor instance, if $R_{S}=20 \\mathrm{k} \\Omega$ and $\\mathrm{V}_{\\mathrm{T}}=25 \\mathrm{mV}$, the minimum emitter current in either transistor should be substantially greater than $1.25 \\mu \\mathrm{~A}$. The question arises: How much greater? The answer hinges on the tolerable level of distortion, as when $1 / g_{m}$ becomes comparable in size to $R_{S}$, the fluctuating $\\mathrm{V}_{\\mathrm{gs}}$ or $\\mathrm{V}_{\\mathrm{be}}$ voltage will render the output current, $i_{o}$, a notably nonlinear function of the input voltage, $v_{i}$. For example, if the maximum value of $1 / g_{m}$ reaches 10 percent of $R_{S}$ when the maximum applied input voltage is $\\left(I_{1} / 2\\right) R_{S}$, then a linearity deviation of approximately 3 percent ensues. Therefore, to achieve high linearity with the aforementioned circuits, the bias currents should be substantial, and the input signal should be minimal (to ensure large values of $\\mathrm{g}_{\\mathrm{m}}$). Naturally, the use of small input signals may lead to noise becoming a concern.\n\nIn applications where a moderate degree of nonlinearity is permissible, $\\mathrm{R}_{\\mathrm{S}}$ might be selected to be approximately the same size as the nominal bias value of $1 / \\mathrm{g}_{\\mathrm{m}}$. In this scenario, the overall transconductance of this transconductor is most easily determined using the hybrid T model for the input transistor pair. With this approach, the output current is more accurately represented by:\n\n$$\n\\begin{equation*}\ni_{01}=\\frac{v_{i}}{1 / g_{m 1}+R_{S}+1 / g_{m} 2}=\\frac{v_{i}}{2 / g_{m}+R_{s}} \\tag{12.45}\n\\end{equation*}\n$$\n\nIt is important to note that (12.45) simplifies to (12.40) when $R_{S}$ is substantially larger than $2 / g_{m}$. To summarize, a more precise formula for the transconductance of the circuits in Fig. 12.11 (and Fig. 12.12) is:\n\n$$\n\\begin{equation*}\nG_{m}=\\frac{i_{o 1}}{v_{i}}=\\frac{1}{2 / g_{m}+R_{s}} \\tag{12.46}\n\\end{equation*}\n$$\n\n#### EXAMPLE 12.5\n\nConsider the circuit depicted in Fig. $12.12(b)$, where $R_{S}=3 \\mathrm{k} \\Omega$ (such that $G_{m} \\approx 0.333 \\mathrm{~mA} / \\mathrm{V}$) and the maximum differential input voltage is $\\pm 500 \\mathrm{mV}$. Select an appropriate bias current, $I_{1}$, such that $r_{e, \\max }<0.1 R_{s}$, and determine a more accurate value for $G_{m}$. Find the new values of $I_{1}$ and $G_{m}$ if the constraint $r_{e, \\max }<0.01 R_{s}$ is employed instead.\n\n#### Solution\n\nIn the first scenario, we have $r_{\\mathrm{e}, \\max }<0.1 \\mathrm{R}_{\\mathrm{s}}=300 \\Omega$. Thus, for $\\mathrm{v}_{\\mathrm{i}}=500 \\mathrm{mV}$, we require that $\\mathrm{r}_{\\mathrm{e} 2} \\approx 300 \\Omega$, which is achieved for an emitter current of:\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{E} 2, \\min }=\\frac{\\mathrm{V}_{\\mathrm{T}}}{\\mathrm{r}_{\\mathrm{e}, \\max }}=\\frac{26 \\mathrm{mV}}{300 \\Omega}=86.7 \\mu \\mathrm{~A} \\tag{12.47}\n\\end{equation*}\n$$\n\nFor this same input voltage, the resistor current is approximately:\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{RE}} \\cong \\frac{500 \\mathrm{mV}}{3 \\mathrm{k} \\Omega}=167 \\mu \\mathrm{~A} \\tag{12.48}\n\\end{equation*}\n$$\n\nSince the current through $R_{s}$ plus $I_{\\mathrm{E} 2}$ must equal $I_{1}$ (in accordance with the node currents at the emitter of $Q_{2}$), we have:\n\n$$\n\\begin{equation*}\nI_{1}=167+86.7=253 \\mu \\mathrm{~A} \\tag{12.49}\n\\end{equation*}\n$$\n\nIn other words, a minimum bias current of $253 \\mu \\mathrm{~A}$ should be selected. For this bias current value, the nominal value of $r_{e}$ is given by:\n\n$$\n\\begin{equation*}\n\\mathrm{r}_{\\mathrm{e}}=\\frac{\\mathrm{V}_{\\mathrm{T}}}{\\mathrm{I}_{1}}=103 \\Omega \\tag{12.50}\n\\end{equation*}\n$$\n\nresulting in:\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=\\frac{1}{\\left(2 \\mathrm{r}_{\\mathrm{e}}+\\mathrm{R}_{\\mathrm{s}}\\right)}=0.312 \\mathrm{~mA} / \\mathrm{V} \\tag{12.51}\n\\end{equation*}\n$$\n\nFor the case $r_{e, \\max }<0.01 R_{E}$, one finds $I_{1}=1.03 \\mathrm{~mA}$ and $G_{m}=0.328 \\mathrm{~mA} / V$. It is worth noting that the nominal value of $r_{e}$ is now only $26 \\Omega$, which is significantly less than $R_{s}$. Although this second design will exhibit less distortion than the first (approximately 10 times better), it consumes substantially more power. Next, we explore the use of feedback to enhance distortion resistance without resorting to large bias currents.\n\nOne approach to refine the distortion characteristics of the previously discussed fixed transconductors without relying on large bias currents and small input signal levels is to incorporate an additional pair of amplifiers, as illustrated in Fig. 12.13. Here, the virtual ground in each opamp compels the source voltages of $Q_{1}$ and $Q_{2}$ to match those of $v_{i}^{+}$ and $v_{i}^{-}$. Consequently, the input voltage is directly applied across $R_{s}$ and is independent of the $V_{g s}$ voltages of $Q_{1}$ and $Q_{2}$. Thus, the transconductance of this circuit is expressed as:\n\n$$\n\\begin{equation*}\nG_{m}=\\frac{i_{o 1}}{v_{i}^{+}-v_{i}^{-}}=\\frac{1}{R_{S}} \\tag{12.52}\n\\end{equation*}\n$$\n\nIt should be noted that the opamps can be rather straightforward (typically, a single stage) since they merely refine an input stage that is already reasonably linear.\n\nFig. 12.13 demonstrates the enhancement of the linearity of a fixed transconductor through the utilization of opamps.\n\nAnother technique for enhancing the linearity of a fixed transconductor involves forcing constant currents through $\\mathrm{Q}_{1}$ and $\\mathrm{Q}_{2}$, as shown in Fig. 12.14 for a bipolar input pair [Koyama, 1993]. Here, $I_{1}$ flows through each of $Q_{1}$ and $Q_{2}$, thereby fixing $V_{\\text {be1 }}$ and $V_{\\text {be2 }}$, while $Q_{3}$ and $Q_{4}$ experience fluctuating collector currents corresponding to the current flowing through $R_{s}$. The output currents can then be obtained at the collectors of $\\mathrm{Q}_{7}$ and $\\mathrm{Q}_{8}$, which mirror the current through $Q_{3}$ and $Q_{4}$. Assuming the current mirror transistors, consisting of $Q_{7}$ and $Q_{8}$, are identical in size to those of $Q_{3}$ and $Q_{4}$, the transconductance of this cell is expressed as:\n\n$$\n\\begin{equation*}\nG_{m}=\\frac{i_{01}}{v_{i}^{+}-v_{i}^{-}}=\\frac{1}{R_{s}} \\tag{12.53}\n\\end{equation*}\n$$\n\nIf the current mirror transistors are scaled relative to $Q_{3}$ and $Q_{4}$, then the transconductance for this cell is also scaled by the same proportion.\n\nIt is important to note that simple diode-connected transistors are not employed at $Q_{3}$ and $Q_{4}$ since a feedback circuit is necessary to establish the voltage level at the collectors of $Q_{1}$ and $Q_{2}$ without drawing significant current. The feedback loop operates as follows: If the voltage at the collector of $Q_{1}$ increases because $I_{C 1}$ is less than $I_{1}$, then $V_{\\text {be3 }}$ also increases, driving more current through $Q_{3}$ and $Q_{1}$ until $I_{C 1}$ once again equals $I_{1}$. Although the depicted circuit results in each of $Q_{1}$ and $Q_{2}$ collector voltages being set to two diode drops above ground (i.e., $V_{\\text {be3 }}+V_{\\text {be } 5}$), a higher voltage can be achieved by adding diode-connected transistors that function as voltage level-shifters. It is feasible to integrate components of this fixed-transconductor circuit with a gain-cell stage, as was done in [Koyama, 1993]. The same linearization technique has been applied in a CMOS variable transconductor, which will be presented in Section 12.4.1, where the resistance $R_{S}$ is realized using a MOS transistor operating in the triode region [Welland, 1994].\n\nA challenge associated with the transconductors presented thus far is the absence of a clear mechanism for tuning the transconductance to ensure precision across process, voltage, and temperature variations. One solution involves providing an array of degeneration resistors $\\mathrm{R}_{\\mathrm{S}}$ and selecting the most suitable value using switches. Alternatively, triode devices may be used in series with or in place of $\\mathrm{R}_{\\mathrm{S}}$, and their gate voltage can be utilized to adjust the effective source degeneration. This topic will be addressed in the following section.\n\n"
},
{
    "text": "Fig. 12.11 illustrates two methodologies for utilizing resistors to linearize the differential input voltage to output current correlation in a differential transistor pair. Initially, we simplify the analysis by assuming a constant $\\mathrm{V}_{\\mathrm{gs}}$ for the transistors. Consequently, the differential input voltage, $\\mathrm{v}_{\\mathrm{i}}$, is observed across the two $\\mathrm{R}_{\\mathrm{S}} / 2$ resistors in Fig. 12.11(a) and across $R_{S}$ in Fig. 12.11(b). This leads to the drain current $I_{D 1}$ being expressed as\n\n$$\n\\begin{equation*}\nI_{D 1}=I_{1}+\\frac{v_{i}}{R_{S}} \\tag{12.38}\n\\end{equation*}\n$$\n\nand the drain current $I_{D 2}$ as\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{D} 2}=\\mathrm{I}_{1}-\\frac{\\mathrm{v}_{\\mathrm{i}}}{\\mathrm{R}_{\\mathrm{S}}} \\tag{12.39}\n\\end{equation*}\n$$\n\nIntroducing $\\mathrm{i}_{01}$ as the differential in drain currents from $I_{1}$ yields\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{01}=\\frac{v_{i}}{R_{S}} \\tag{12.40}\n\\end{equation*}\n$$\n\nThe circuit in (a) represents a differential pair with source degeneration resistors Rs/2, which enhances the linearity between differential input voltage (vi) and output current (io1). Bias currents flowing through the Rs/2 resistors influence the common-mode range and output swing. The transconductance Gm is determined by the formula Gm = 1 / (2/gm1 + Rs).\n\nThe circuit (b) is a differential pair with source degeneration utilizing a resistor Rs. It consists of two NMOS transistors Q1 and Q2, each with a current source I1 connected to their drains, and a resistor Rs connecting their sources. The circuit is designed for improved linearity in the transconductance by using source degeneration.\n\nThe circuit in (a) exhibits a smaller common-mode range and output swing compared to the circuit in (b) due to bias currents flowing through the $\\mathrm{R}_{\\mathrm{S}} / 2$ resistors.\n\nA pivotal point is that source-degenerating a differential pair with a resistor linearizes the relationship between differential input voltage and output current. The outcome is a transconductor with a value approximately equal to the degeneration resistance.\n\nIt is observed that the transconductance of these two differential input circuits is a constant value of $1 / R_{S}$. A notable distinction between the two fixed transconductors of Fig. 12.11 is that, in the case of $v_{i}=0$, a bias current of $I_{1}$ flows through the two $R_{S} / 2$ resistors in Fig. 12.11(a), whereas no bias current flows through $\\mathrm{R}_{\\mathrm{S}}$ in Fig. 12.11(b). Consequently, the common-mode voltage of Fig. $12.11(b)$ can be closer to ground. For instance, if a bias current of $I_{1}=100 \\mu \\mathrm{~A}$ is used in conjunction with $R_{S}=20 \\mathrm{k} \\Omega$, the voltage drop across each of the two $R_{S} / 2$ resistors would result in a 1 V reduction in common-mode range. It is essential to ensure that the common-mode input voltage is sufficiently above ground to accommodate the largest expected differential input voltage, $v_{\\mathrm{i}}$. Specifically, the circuit must remain operational while the gate on one side of the differential pair is lower than the common-mode voltage by $\\mathrm{v}_{\\mathrm{i}} / 2$.\n\nA straightforward estimate of the maximum differential input range for both circuits can be obtained by determining the voltage across the linearizing resistors when one transistor just turns off. For example, in Fig. $12.11(a)$, when $Q_{2}$ turns off due to a large positive input voltage, all of $2 I_{1}$ flows through $R_{s} / 2$ on the left and none through $R_{s} / 2$ on the right. Hence, the voltage at the center of the two resistors equals that of the source of $Q_{2}$ (since no current flows right), and the maximum input voltage equals the voltage across the left $R_{S} / 2$ resistor, giving\n\n$$\n\\begin{equation*}\nV_{i, \\max }=I_{1} R_{S} \\tag{12.41}\n\\end{equation*}\n$$\n\nA similar argument yields the same maximum input voltage for the circuit of Fig. 12.11(b). It should be noted that this simple estimate does not account for the significant distortion that occurs when this maximum input voltage is applied. Specifically, at $\\mathrm{V}_{\\mathrm{i}, \\max }=\\mathrm{I}_{1} \\mathrm{R}_{\\mathrm{S}}$, one of the two transistors will be off, implying that $\\mathrm{V}_{\\mathrm{Gs}}$ has not remained a relatively constant value, as assumed earlier in this section. Typically, the maximum input range applicable to the preceding fixed transconductors might be one-half that of (12.41), or, equivalently, $\\left(I_{1} / 2\\right) R_{S}$.\n\nThe assumption that the transistor's $\\mathrm{V}_{\\mathrm{gs}}$ voltages remain constant is reasonably valid if the MOSFETs are replaced by bipolar transistors as shown in Fig. 12.12 due to the exponential current-voltage relationship of bipolar transistors. However, it is less accurate with a MOFET differential pair, whose gate-source voltage changes appreciably with input voltage. In either the MOS or bipolar circuits, the assumption is reasonable when one restricts the minimum drain (or collector) current, $\\mathrm{I}_{\\mathrm{D}, \\mathrm{min}}$, in either transistor to be that which keeps the small-signal transconductance, $g_{m}$, large enough to ensure $1 / g_{m}<<R_{S}$, recalling that\n\n$$\n\\begin{equation*}\ng_{m}=\\sqrt{2 \\mu_{n} C_{o x}(W / L) I_{D}} \\gg 1 / R_{S} \\tag{12.42}\n\\end{equation*}\n$$\n\nFor the bipolar circuit, we have the simpler requirement,\n\n$$\n\\begin{equation*}\n\\mathrm{r}_{\\mathrm{e}, \\max }=\\frac{\\mathrm{V}_{\\mathrm{T}}}{\\mathrm{I}_{\\mathrm{E}, \\min }} \\ll \\mathrm{R}_{\\mathrm{S}} \\tag{12.43}\n\\end{equation*}\n$$\n\nor equivalently,\n\n$$\n\\begin{equation*}\nI_{E, \\min }>>\\frac{V_{T}}{R_{S}} \\tag{12.44}\n\\end{equation*}\n$$\n\nFor example, if $R_{S}=20 \\mathrm{k} \\Omega$ and $\\mathrm{V}_{\\mathrm{T}}=25 \\mathrm{mV}$, the minimum emitter current in either transistor should be much greater than $1.25 \\mu \\mathrm{~A}$. A pertinent question is, How much is \"much greater than\"? The answer to this question depends on how much distortion can be tolerated since, when $1 / g_{m}$ becomes a comparable size to $R_{S}$, the varying $\\mathrm{V}_{\\mathrm{gs}}$ or $\\mathrm{V}_{\\mathrm{be}}$ voltage will result in the output current, $i_{o}$, being a significant nonlinear function of the input voltage, $v_{i}$. For instance, if the maximum value of $1 / g_{m}$ reaches 10 percent of that of $R_{S}$ when the maximum applied input voltage is $\\left(I_{1} / 2\\right) R_{S}$, then a linearity deviation of about 3 percent occurs. Therefore, to achieve high linearity with the preceding circuits, the bias currents should be substantial and the input signal should be minimal (to ensure large values of $\\mathrm{g}_{\\mathrm{m}}$ ). Of course, the use of small input signals may result in noise becoming a problem.\n\nIn applications where a moderate amount of nonlinearity can be accepted, $\\mathrm{R}_{\\mathrm{S}}$ might be chosen similar in size to the nominal bias value of $1 / \\mathrm{g}_{\\mathrm{m}}$. In this case, the overall transconductance of this transconductor is most easily found using the hybrid T model for the input transistor pair. With such an approach, the output current is more accurately described by\n\n$$\n\\begin{equation*}\ni_{01}=\\frac{v_{i}}{1 / g_{m 1}+R_{S}+1 / g_{m} 2}=\\frac{v_{i}}{2 / g_{m}+R_{s}} \\tag{12.45}\n\\end{equation*}\n$$\n\nNote that (12.45) reduces to (12.40) when $R_{S}$ is chosen much larger than $2 / g_{m}$. In summary, a more accurate formula for the transconductance of the circuits of Fig. 12.11 (and Fig. 12.12) is\n\n$$\n\\begin{equation*}\nG_{m}=\\frac{i_{o 1}}{v_{i}}=\\frac{1}{2 / g_{m}+R_{s}} \\tag{12.46}\n\\end{equation*}\n$$\n\n#### EXAMPLE 12.5\n\nConsider the circuit of Fig. $12.12(b)$, where $R_{S}=3 \\mathrm{k} \\Omega$ (such that $G_{m} \\approx 0.333 \\mathrm{~mA} / \\mathrm{V}$ ) and the maximum differential input voltage is $\\pm 500 \\mathrm{mV}$. Choose an appropriate bias current, $I_{1}$, such that $r_{e, \\max }<0.1 R_{s}$, and find a more precise value for $G_{m}$. Find the new value of $I_{1}$ and $G_{m}$ if the constraint $r_{e, \\max }<0.01 R_{s}$ is used instead.\n\n#### Solution\n\nIn the first case, we have $r_{\\mathrm{e}, \\max }<0.1 \\mathrm{R}_{\\mathrm{s}}=300 \\Omega$. Thus, in the case of $\\mathrm{v}_{\\mathrm{i}}=500 \\mathrm{mV}$, we require that $\\mathrm{r}_{\\mathrm{e} 2} \\approx 300 \\Omega$, which is attained for an emitter current of\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{E} 2, \\min }=\\frac{\\mathrm{V}_{\\mathrm{T}}}{\\mathrm{r}_{\\mathrm{e}, \\max }}=\\frac{26 \\mathrm{mV}}{300 \\Omega}=86.7 \\mu \\mathrm{~A} \\tag{12.47}\n\\end{equation*}\n$$\n\nFor this same input voltage, the resistor current is approximately\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{RE}} \\cong \\frac{500 \\mathrm{mV}}{3 \\mathrm{k} \\Omega}=167 \\mu \\mathrm{~A} \\tag{12.48}\n\\end{equation*}\n$$\n\nand since the current through $R_{s}$ plus $I_{\\mathrm{E} 2}$ must equal $I_{1}$ (according to the node currents at the emitter of $Q_{2}$ ), we have\n\n$$\n\\begin{equation*}\nI_{1}=167+86.7=253 \\mu \\mathrm{~A} \\tag{12.49}\n\\end{equation*}\n$$\n\nIn other words, a minimum bias current of $253 \\mu \\mathrm{~A}$ should be chosen. For this value of bias current, the nominal value of $r_{e}$ is given by\n\n$$\n\\begin{equation*}\n\\mathrm{r}_{\\mathrm{e}}=\\frac{\\mathrm{V}_{\\mathrm{T}}}{\\mathrm{I}_{1}}=103 \\Omega \\tag{12.50}\n\\end{equation*}\n$$\n\nresulting in\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=\\frac{1}{\\left(2 \\mathrm{r}_{\\mathrm{e}}+\\mathrm{R}_{\\mathrm{s}}\\right)}=0.312 \\mathrm{~mA} / \\mathrm{V} \\tag{12.51}\n\\end{equation*}\n$$\n\nFor the case $r_{e, \\max }<0.01 R_{E}$, one finds $I_{1}=1.03 \\mathrm{~mA}$ and $G_{m}=0.328 \\mathrm{~mA} / V$. Note here that the nominal value of $r_{e}$ is now only $26 \\Omega$, which is significantly less than $R_{s}$. Although this second design will have less distortion than the first (about 10 times better), it uses much more power. Next, we look at using feedback to improve distortion without resorting to large bias currents.\n\nOne way to enhance the distortion characteristics of the preceding fixed transconductors without using large bias currents and small input signal levels is to use an extra pair of amplifiers, as shown in Fig. 12.13. Here, the virtual ground in each opamp forces the source voltages of $Q_{1}$ and $Q_{2}$ to equal those of $v_{i}^{+}$and $v_{i}^{-}$. As a result, the input voltage appears directly across $R_{s}$ and does not depend on the $V_{g s}$ voltages of $Q_{1}$ and $Q_{2}$. Thus, the transconductance of this circuit is given by\n\n$$\n\\begin{equation*}\nG_{m}=\\frac{i_{o 1}}{v_{i}^{+}-v_{i}^{-}}=\\frac{1}{R_{S}} \\tag{12.52}\n\\end{equation*}\n$$\n\nIt should be mentioned here that the opamps can be quite simple (typically, a single stage) because they merely improve an input stage that is already reasonably linear.\n\nAnother method for improving the linearity of a fixed transconductor is to force constant currents through $\\mathrm{Q}_{1}$ and $\\mathrm{Q}_{2}$, as shown in Fig. 12.14 for a bipolar input pair [Koyama, 1993]. Here, $I_{1}$ flows through each of $Q_{1}$ and $Q_{2}$ so that $V_{\\text {be1 }}$ and $V_{\\text {be2 }}$ are fixed, while $Q_{3}$ and $Q_{4}$ have varying collector currents corresponding to the current flow through $R_{s}$. The output currents can then be obtained at the collectors of $\\mathrm{Q}_{7}$ and $\\mathrm{Q}_{8}$, which mirror the current through $Q_{3}$ and $Q_{4}$. Thus, assuming the current mirror transistors consisting of $Q_{7}$ and $Q_{8}$ are equal in size to those of $Q_{3}$ and $Q_{4}$, the transconductance of this cell is given by\n\n$$\n\\begin{equation*}\nG_{m}=\\frac{i_{01}}{v_{i}^{+}-v_{i}^{-}}=\\frac{1}{R_{s}} \\tag{12.53}\n\\end{equation*}\n$$\n\nIf the current mirror transistors are scaled in relation to $Q_{3}$ and $Q_{4}$, then the transconductance for this cell is also scaled by the same amount.\n\nIt should be noted that simple diode-connected transistors are not used at $Q_{3}$ and $Q_{4}$ since a feedback circuit is required to set the voltage level at the collectors of $Q_{1}$ and $Q_{2}$ without drawing much current. The feedback loop operates as follows: If the voltage at the collector of $Q_{1}$ increases because $I_{C 1}$ is less than $I_{1}$, then $V_{\\text {be3 }}$ also increases, forcing more current through $Q_{3}$ and $Q_{1}$ until $I_{C 1}$ once again equals $I_{1}$. Although the circuit shown results in each of $Q_{1}$ and $Q_{2}$ collector voltages being set to two diode drops above ground (i.e., $V_{\\text {be3 }}+V_{\\text {be } 5}$ ), a larger voltage can be obtained by adding diode-connected transistors that operate as voltage level-shifters. It is possible to combine parts of this fixed-transconductor circuit with a gain-cell stage, as was done in [Koyama, 1993]. The same linearization technique has been used in a CMOS variable transconductor that will be presented in Section 12.4.1, where the resistance $R_{S}$ is realized using a MOS transistor operating in the triode region [Welland, 1994].\n\nA challenge with the transconductors presented so far is the lack of an apparent mechanism for tuning the transconductance to ensure accuracy over process, voltage, and temperature variations. One solution is to provide an array of degeneration resistors $\\mathrm{R}_{\\mathrm{S}}$ and select the most appropriate value using switches. Alternatively, triode devices may be used in series with or in place of $\\mathrm{R}_{\\mathrm{S}}$, and their gate voltage used to tune the effective source degeneration. This is the topic of the following section.\n\nFeedback may be employed to more accurately reproduce the input voltage across the degeneration resistor or further improve the linearity of transconductors with fixed resistors."
},
{
    "text": "Figures 12.11 and 12.12 depict two methodologies utilizing resistors to linearize the inter\nI\nFig apologize for but it seems there was a error in processing response message. I is the rephrased text:\n\nFigures 12.11 and 12.12 illustrate two methods for linearizing the relationship between the differential input voltage and the output current in a pair of differential transistors using resistors. To comprehend the fundamental operation of these circuits, we initially assume that the transistors' Vgs voltages remain constant. Consequently, the differential input voltage, vi, is dropped across the two Rs/2 resistors in Figure 12.11(a) and across Rs in Figure 12.11(b). Therefore, the drain current ID1 can be expressed as:\n\n$$\nI_{D1} = I_{1} + \\frac{v_{i}}{R_{S}} \\tag{12.38}\n$$\n\nand the drain current ID2 is given by:\n\n$$\nI_{D2} = I_{1} - \\frac{v_{i}}{R_{S}} \\tag{12.39}\n$$\n\nBy defining i01 as the difference in drain currents from I1, we have:\n\n$$\ni_{01} = \\frac{v_{i}}{R_{S}} \\tag{12.40}\n$$\n\nThe circuit in (a) is a differential pair with source degeneration resistors Rs/2, which linearizes the relationship between the differential input voltage (vi) and the output current (io1). The bias currents flowing through the Rs/2 resistors influence the common-mode range and output swing. The transconductance Gm is determined by the formula Gm = 1 / (2/gm1 + Rs).\n\nThe circuit in (b) is a differential pair with source degeneration using a resistor Rs. It comprises two NMOS transistors Q1 and Q2, each with a current source I1 connected to their drains, and a resistor Rs connecting their sources. The circuit is designed for improved linearity in the transconductance by using source degeneration.\n\nFigure 12.11 presents fixed transconductors using resistors. The circuit in (a) has a smaller common-mode range and output swing compared to the circuit in (b) due to bias currents flowing through the Rs/2 resistors.\n\nKey Point: Source-degenerating a differential pair with a resistor linearizes the relationship between the differential input voltage and the output current. The outcome is a transconductor with a value approximately equal to the degeneration resistance.\n\nThus, the transconductance of these two differential input circuits is a fixed value of 1/Rs. An important distinction between the two fixed transconductors in Figure 12.11 is that, when vi = 0, a bias current of I1 flows through the two Rs/2 resistors in Figure 12.11(a), whereas no bias current flows through Rs in Figure 12.11(b). As a result, the common-mode voltage in Figure 12.11(b) can be closer to ground. For instance, if a bias current of I1 = 100 μA is used together with Rs = 20 kΩ, the voltage drop across each of the two Rs/2 resistors would result in 1 V less of common-mode range. It is crucial to ensure that the common-mode input voltage is sufficiently above ground to accommodate the largest expected differential input voltage, vi. Specifically, one must guarantee that the circuit remains functional while the gate on one side of the differential pair is lower than the common-mode voltage by vi/2.\n\nA simple estimate of the maximum differential input range for both circuits can be obtained by determining the voltage across the linearizing resistors at the point where one transistor just turns off. For example, in Figure 12.11(a), when Q2 turns off due to a large positive input voltage, all of 2I1 flows through Rs/2 on the left and nothing through Rs/2 on the right. Thus, the voltage at the center of the two resistors equals that of the source of Q2 (since no current flows right), and the maximum input voltage equals that voltage across the left Rs/2 resistor, giving:\n\n$$\nV_{i,max} = I_{1}R_{S} \\tag{12.41}\n$$\n\nA similar argument yields the same maximum input voltage for the circuit in Figure 12.11(b). It should be noted that this simple estimate does not account for the significant distortion that occurs when this maximum input voltage is applied. Specifically, at Vi,max = I1Rs, one of the two transistors will be off, implying that Vgs has not remained relatively constant, as assumed earlier. Typically, the maximum input range for the preceding fixed transconductors might be one-half that of (12.41), or equivalently, (I1/2)Rs.\n\nSo far, we have assumed that the transistor's Vgs voltages remain constant. This assumption is reasonably valid if the MOSFETs are replaced by bipolar transistors, as shown in Figure 12.12, due to the exponential current-voltage relationship of bipolar transistors. However, it is less accurate with a MOFET differential pair, whose gate-source voltage changes appreciably with input voltage. In either the MOS or bipolar circuits, the assumption is reasonable when one restricts the minimum drain (or collector) current, ID,min, in either transistor to be that which keeps the small-signal transconductance, gm, large enough to ensure 1/gm << Rs, recalling that:\n\n$$\ng_{m} = \\sqrt{2μ_{n}C_{ox}(W/L)I_{D}} \\gg 1/R_{S} \\tag{12.42}\n$$\n\nFor the bipolar circuit, we have the simpler requirement:\n\n$$\nr_{e,max} = \\frac{V_{T}}{I_{E,min}} \\ll R_{S} \\tag{12.43}\n$$\n\nor equivalently:\n\n$$\nI_{E,min} >> \\frac{V_{T}}{R_{S}} \\tag{12.44}\n$$\n\nFor example, if Rs = 20 kΩ and VT = 25 mV, the minimum emitter current in either transistor should be much greater than 1.25 μA. A good question is, How much is \"much greater than\"? The answer to this question depends on how much distortion can be tolerated since, when 1/gm becomes a comparable size to Rs, the varying Vgs or Vbe voltage will result in the output current, io, being a significant nonlinear function of the input voltage, vi. For instance, if the maximum value of 1/gm goes to 10 percent of that of Rs when the maximum applied input voltage is (I1/2)Rs, then a linearity deviation of about 3 percent occurs. Thus, to achieve high linearity with the preceding circuits, the bias currents should be large and the input signal should be small (to ensure large values of gm). Of course, the use of small input signals may result in noise becoming a problem.\n\nIn applications where a moderate amount of nonlinearity can be tolerated, Rs might be chosen similar in size to the nominal bias value of 1/gm. In this case, the overall transconductance of this transconductor is most easily found using the hybrid T model for the input transistor pair. With such an approach, the output current is more accurately described by:\n\n$$\ni_{01} = \\frac{v_{i}}{1/g_{m1} + R_{S} + 1/g_{m2}} = \\frac{v_{i}}{2/g_{m} + R_{s}} \\tag{12.45}\n$$\n\nNote that (12.45) reduces to (12.40) when Rs is chosen much larger than 2/gm. In summary, a more accurate formula for the transconductance of the circuits in Figures 12.11 and 12.12 is:\n\n$$\nG_{m} = \\frac{i_{o1}}{v_{i}} = \\frac{1}{2/g_{m} + R_{s}} \\tag{12.46}\n$$\n\n#### EXAMPLE 12.5\n\nConsider the circuit in Figure 12.12(b), where Rs = 3 kΩ (such that Gm ≈ 0.333 mA/V) and the maximum differential input voltage is ±500 mV. Choose an appropriate bias current, I1, such that re,max < 0.1 Rs, and find a more precise value for Gm. Find the new values of I1 and Gm if the constraint re,max < 0.01 Rs is used instead.\n\n#### Solution\n\nIn the first case, we have re,max < 0.1 Rs = 300 Ω. Thus, for vi = 500 mV, we require that re2 ≈ 300 Ω, which is achieved for an emitter current of:\n\n$$\nI_{E2,min} = \\frac{V_{T}}{r_{e,max}} = \\frac{26 mV}{300 Ω} = 86.7 μA \\tag{12.47}\n$$\n\nFor the same input voltage, the resistor current is approximately:\n\n$$\nI_{RE} ≅ \\frac{500 mV}{3 kΩ} = 167 μA \\tag{12.48}\n$$\n\nand since the current through Rs plus IE2 must equal I1 (according to the node currents at the emitter of Q2), we have:\n\n$$\nI_{1} = 167 + 86.7 = 253 μA \\tag{12.49}\n$$\n\nIn other words, a minimum bias current of 253 μA should be chosen. For this value of bias current, the nominal value of re is given by:\n\n$$\nr_{e} = \\frac{V_{T}}{I_{1}} = 103 Ω \\tag{12.50}\n$$\n\nresulting in:\n\n$$\nG_{m} = \\frac{1}{(2r_{e} + R_{s})} = 0.312 mA/V \\tag{12.51}\n$$\n\nFor the case re,max < 0.01 Rs, one finds I1 = 1.03 mA and Gm = 0.328 mA/V. Note that the nominal value of re is now only 26 Ω, which is significantly less than Rs. Although this second design will have less distortion than the first (about 10 times better), it uses much more power. Next, we look at using feedback to improve distortion without resorting to large bias currents.\n\nOne way to improve the distortion properties of the preceding fixed transconductors without using large bias currents and small input signal levels is to use an extra pair of amplifiers, as shown in Figure 12.13. Here, the virtual ground in each opamp forces the source voltages of Q1 and Q2 to equal those of vi+ and vi-. As a result, the input voltage appears directly across Rs and does not depend on the Vgs voltages of Q1 and Q2. Thus, the transconductance of this circuit is given by:\n\n$$\nG_{m} = \\frac{i_{o1}}{v_{i}^{+} - v_{i}^{-}} = \\frac{1}{R_{S}} \\tag{12.52}\n$$\n\nIt should be mentioned that the opamps can be quite simple (typically, a single stage) because they merely improve an input stage that is already reasonably linear.\n\nFigure 12.13 shows how to improve the linearity of a fixed transconductor using opamps.\n\nAnother method for improving the linearity of a fixed transconductor is to force constant currents through Q1 and Q2, as shown in Figure 12.14 for a bipolar input pair [Koyama, 1993]. Here, I1 flows through each of Q1 and Q2 so that Vbe1 and Vbe2 are fixed, while Q3 and Q4 have varying collector currents corresponding to the current flow through Rs. The output currents can then be obtained at the collectors of Q7 and Q8, which mirror the current through Q3 and Q4. Thus, assuming the current mirror transistors consisting of Q7 and Q8 are equal in size to those of Q3 and Q4, the transconductance of this cell is given by:\n\n$$\nG_{m} = \\frac{i_{01}}{v_{i}^{+} - v_{i}^{-}} = \\frac{1}{R_{s}} \\tag{12.53}\n$$\n\nIf the current mirror transistors are scaled in relation to Q3 and Q4, then the transconductance for this cell is also scaled by the same amount.\n\nIt should be noted that simple diode-connected transistors are not used at Q3 and Q4 since a feedback circuit is required to set the voltage level at the collectors of Q1 and Q2 without drawing much current. The feedback loop occurs as follows: If the voltage at the collector of Q1 increases because IC1 is less than I1, then Vbe3 also increases, forcing more current through Q3 and Q1 until IC1 once again equals I1. Although the circuit shown results in each of Q1 and Q2 collector voltages being set to two diode drops above ground (i.e., Vbe3 + Vbe5), a larger voltage can be obtained by adding diode-connected transistors that operate as voltage level-shifters. It is possible to combine parts of this fixed-transconductor circuit with a gain-cell stage, as was done in [Koyama, 1993]. The same linearization technique has been used in a CMOS variable transconductor that will be presented in Section 12.4.1, where the resistance Rs is realized using a MOS transistor operating in the triode region [Welland, 1994].\n\nA problem with the transconductors shown so far is that there is no obvious mechanism for tuning the transconductance to ensure accuracy over process, voltage, and temperature variations. One solution is to provide an array of degeneration resistors Rs and somehow select the most appropriate value using switches. Alternatively, triode devices may be used in series with or in place of Rs, and their gate voltage used to tune the effective source degeneration. This is the topic of the following section.\n\nFigure 12.14 demonstrates improving the linearity of a fixed transconductor by maintaining a constant Vbe voltage for Q1 and Q2. Level shifts should be added at the emitters of Q5, Q6 if a larger input range is desired.\n\nKey Point: Feedback may be used to more accurately reproduce the input voltage across the degeneration resistor or further improve the linearity of transconductors with fixed resistors."
},
{
    "text": "In this segment, we explore transconductor circuit techniques that depend on transistors functioning in the triode region. It's important to note that in the circuits discussed, not all transistors operate in the triode region. As we will illustrate, the majority of the transistors are biased in the active region, yet the circuit's transconductance is contingent on one or two critical transistors biased in the triode region.\n\nWe initiate this section by revisiting the classical model equation for an $n$-channel transistor operating in the triode region.\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{D}}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)\\left[\\left(\\mathrm{V}_{\\mathrm{GS}}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\mathrm{V}_{\\mathrm{DS}}-\\frac{\\mathrm{V}_{\\mathrm{DS}}^{2}}{2}\\right] \\tag{12.54}\n\\end{equation*}\n$$\n\nAdditionally, recall that a transistor remains in the triode region provided the drain-source voltage is less than the effective gate-source voltage. In essence, the following condition must be met:\n\n$$\n\\begin{equation*}\nV_{D s}<V_{\\text {eff }} \\quad \\text { where } V_{\\text {eff }}=V_{G S}-V_{t n} \\tag{12.55}\n\\end{equation*}\n$$\n\nWe will subsequently demonstrate that if the aforementioned equations were precise, perfectly linear circuits could be achieved. However, these equations are only moderately accurate for contemporary short-channel processes, leading to some distortion due to the absence of higher-order terms in the equations. Consequently, nearly all practical continuous-time circuits employ fully differential architectures to minimize even-order distortion products, allowing the third-order term to prevail."
},
{
    "text": "In this section, we delve into transconductor circuit techniques that depend on transistors functioning in the triode region. It's important to note that in the circuits discussed, not all transistors operate in the triode region. As we will explore, the majority of transistors are biased in the active region, but the circuit's transconductance is contingent on one or two critical transistors biased in the triode region.\n\nWe initiate this section by revisiting the classical model equation for an $n$-channel transistor operating in the triode region.\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{D}}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)\\left[\\left(\\mathrm{V}_{\\mathrm{GS}}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\mathrm{V}_{\\mathrm{DS}}-\\frac{\\mathrm{V}_{\\mathrm{DS}}^{2}}{2}\\right] \\tag{12.54}\n\\end{equation*}\n$$\n\nAdditionally, remember that a transistor stays in the triode region as long as the drain-source voltage is less than the effective gate-source voltage. Put differently, the following condition must be met:\n\n$$\n\\begin{equation*}\nV_{D s}<V_{\\text {eff }} \\quad \\text { where } V_{\\text {eff }}=V_{G S}-V_{t n} \\tag{12.55}\n\\end{equation*}\n$$\n\nWe will subsequently observe that if the aforementioned equations were precise, perfectly linear circuits could be achieved. However, these equations are only moderately accurate for modern short-channel processes, leading to some distortion due to the absence of higher-order terms in the equations. Consequently, nearly all practical continuous-time circuits employ fully differential architectures to minimize even-order distortion products, allowing the third-order term to prevail."
},
{
    "text": "In this section, we explore transconductor circuit techniques that depend on transistors functioning in the triode region. It's important to note that in the circuits discussed, not all transistors operate in the triode region. As we will observe, the majority of the transistors are biased in the active region, but the circuit's transconductance is contingent on one or two critical transistors biased in the triode region.\n\nWe start this section by revisiting the classical model equation for an $n$-channel transistor operating in the triode region.\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{D}}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)\\left[\\left(\\mathrm{V}_{\\mathrm{GS}}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\mathrm{V}_{\\mathrm{DS}}-\\frac{\\mathrm{V}_{\\mathrm{DS}}^{2}}{2}\\right] \\tag{12.54}\n\\end{equation*}\n$$\n\nAdditionally, remember that a transistor stays in the triode region as long as the drain-source voltage is less than the effective gate-source voltage. In other words, the following condition must be met:\n\n$$\n\\begin{equation*}\nV_{D s}<V_{\\text {eff }} \\quad \\text { where } V_{\\text {eff }}=V_{G S}-V_{t n} \\tag{12.55}\n\\end{equation*}\n$$\n\nWe will subsequently see that if the above equations were precise, perfectly linear circuits could be achieved. However, these equations are only moderately accurate for modern short-channel processes, leading to some distortion due to the omission of higher-order terms in the equations. Consequently, nearly all practical continuous-time circuits employ fully differential architectures to minimize even-order distortion products, allowing the third-order term to predominate."
},
{
    "text": "In this section, we explore transconductor circuit techniques that depend on transistors functioning in the triode region. It is important to note that in the circuits discussed here, not all transistors operate in the triode region. As we will observe, the majority of transistors are biased in the active region, yet the circuit's transconductance is contingent on one or two critical transistors biased in the triode region.\n\nWe initiate this section by revisiting the classical model equation for an $n$-channel transistor operating in the triode region.\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{D}}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)\\left[\\left(\\mathrm{V}_{\\mathrm{GS}}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\mathrm{V}_{\\mathrm{DS}}-\\frac{\\mathrm{V}_{\\mathrm{DS}}^{2}}{2}\\right] \\tag{12.54}\n\\end{equation*}\n$$\n\nAdditionally, remember that a transistor stays in the triode region as long as the drain-source voltage is less than the effective gate-source voltage. In other words, the following condition must be met:\n\n$$\n\\begin{equation*}\nV_{D s}<V_{\\text {eff }} \\quad \\text { where } V_{\\text {eff }}=V_{G S}-V_{t n} \\tag{12.55}\n\\end{equation*}\n$$\n\nWe will subsequently see that if the aforementioned equations were precise, perfectly linear circuits could be achieved. However, these equations are only moderately accurate for modern short-channel processes, leading to some distortion due to the absence of higher-order terms in the equations. Consequently, nearly all practical continuous-time circuits employ fully differential architectures to minimize even-order distortion products, allowing the third-order term to prevail."
},
{
    "text": "In this section, we explore transconductor circuit techniques that depend on transistors functioning in the triode region. It is important to note that in the circuits discussed herein, not all transistors operate in the triode region. As we will observe, the majority of the transistors are biased in the active region, but the circuit's transconductance is contingent on one or two critical transistors biased in the triode region.\n\nWe initiate this section by revisiting the classical model equation for an $n$-channel transistor operating in the triode region.\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{D}}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)\\left[\\left(\\mathrm{V}_{\\mathrm{GS}}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\mathrm{V}_{\\mathrm{DS}}-\\frac{\\mathrm{V}_{\\mathrm{DS}}^{2}}{2}\\right] \\tag{12.54}\n\\end{equation*}\n$$\n\nAdditionally, remember that a transistor stays in the triode region as long as the drain-source voltage is less than the effective gate-source voltage. Put another way, the following condition must be met:\n\n$$\n\\begin{equation*}\nV_{D s}<V_{\\text {eff }} \\quad \\text { where } V_{\\text {eff }}=V_{G S}-V_{t n} \\tag{12.55}\n\\end{equation*}\n$$\n\nWe will subsequently see that if the aforementioned equations were precise, then perfectly linear circuits could be achieved. However, these equations are only moderately accurate for modern short-channel processes, leading to some distortion due to the omission of higher-order terms in the equations. Consequently, nearly all practical continuous-time circuits employ fully differential architectures to minimize even-order distortion products, allowing the third-order term to predominate."
},
{
    "text": "In this section, we explore transconductor circuit techniques that depend on transistors functioning in the triode region. It's important to note that in the circuits discussed, not all transistors operate in the triode region. As we will illustrate, the majority of transistors are biased in the active region, but the circuit's transconductance is contingent on one or two critical transistors biased in the triode region.\n\nWe initiate this section by revisiting the classical model equation for an $n$-channel transistor operating in the triode region.\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{D}}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)\\left[\\left(\\mathrm{V}_{\\mathrm{GS}}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\mathrm{V}_{\\mathrm{DS}}-\\frac{\\mathrm{V}_{\\mathrm{DS}}^{2}}{2}\\right] \\tag{12.54}\n\\end{equation*}\n$$\n\nAdditionally, remember that a transistor stays in the triode region as long as the drain-source voltage is less than the effective gate-source voltage. Put differently, the following condition must be met:\n\n$$\n\\begin{equation*}\nV_{D s}<V_{\\text {eff }} \\quad \\text { where } V_{\\text {eff }}=V_{G S}-V_{t n} \\tag{12.55}\n\\end{equation*}\n$$\n\nWe will subsequently show that if the aforementioned equations were precise, perfectly linear circuits could be achieved. However, these equations are only moderately accurate for contemporary short-channel processes, leading to some distortion due to the omission of higher-order terms in the equations. Consequently, nearly all practical continuous-time circuits employ fully differential architectures to minimize even-order distortion products, allowing the third-order term to predominate."
},
{
    "text": "In this section, we explore transconductor circuit techniques that depend on transistors functioning in the triode region. It's important to note that in the circuits discussed, not every transistor operates in the triode region. As we will observe, the majority of transistors are biased in the active region, but the circuit's transconductance is contingent on one or two critical transistors biased in the triode region.\n\nWe initiate this section by revisiting the classical model equation for an $n$-channel transistor operating in the triode region.\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{D}}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)\\left[\\left(\\mathrm{V}_{\\mathrm{GS}}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\mathrm{V}_{\\mathrm{DS}}-\\frac{\\mathrm{V}_{\\mathrm{DS}}^{2}}{2}\\right] \\tag{12.54}\n\\end{equation*}\n$$\n\nAdditionally, remember that a transistor stays in the triode region as long as the drain-source voltage is less than the effective gate-source voltage. Put differently, the following condition must be met:\n\n$$\n\\begin{equation*}\nV_{D s}<V_{\\text {eff }} \\quad \\text { where } V_{\\text {eff }}=V_{G S}-V_{t n} \\tag{12.55}\n\\end{equation*}\n$$\n\nWe will subsequently see that if the aforementioned equations were precise, perfectly linear circuits could be achieved. However, these equations are only moderately accurate for modern short-channel processes, leading to some distortion due to unmodelled higher-order terms. Consequently, nearly all practical continuous-time circuits employ fully differential architectures to minimize even-order distortion products, allowing the third-order term to prevail."
},
{
    "text": "In this section, we explore transconductor circuit techniques that depend on transistors functioning in the triode region. It's important to note that not all transistors in the subsequent circuits operate in the triode region. As we will observe, the majority of transistors are biased in the active region, but the circuit's transconductance is contingent on one or two critical transistors biased in the triode region.\n\nWe initiate this section by revisiting the classical model equation for an $n$-channel transistor operating in the triode region.\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{D}}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)\\left[\\left(\\mathrm{V}_{\\mathrm{GS}}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\mathrm{V}_{\\mathrm{DS}}-\\frac{\\mathrm{V}_{\\mathrm{DS}}^{2}}{2}\\right] \\tag{12.54}\n\\end{equation*}\n$$\n\nAdditionally, remember that a transistor stays in the triode region as long as the drain-source voltage is less than the effective gate-source voltage. Put another way, the following condition must be met:\n\n$$\n\\begin{equation*}\nV_{D s}<V_{\\text {eff }} \\quad \\text { where } V_{\\text {eff }}=V_{G S}-V_{t n} \\tag{12.55}\n\\end{equation*}\n$$\n\nWe will subsequently see that if the aforementioned equations were precise, perfectly linear circuits could be achieved. However, these equations are only moderately accurate for modern short-channel processes, leading to some distortion due to the omission of higher-order terms in the equations. Consequently, nearly all practical continuous-time circuits employ fully differential architectures to minimize even-order distortion products, allowing the third-order term to predominate."
},
{
    "text": "We observe from (12.54) that when a small drain-source voltage, $\\mathrm{V}_{\\mathrm{DS}}$, is applied, the $\\mathrm{V}_{\\mathrm{DS}}^{2}$ term rapidly approaches zero, causing the drain current to be nearly linear with the applied drain-source voltage. Consequently, a transistor in the triode region can be modeled as a resistor defined by\n\n$$\n\\begin{equation*}\n\\left.r_{D S} \\equiv\\left(\\frac{\\partial i_{D}}{\\partial v_{D S}}\\right)^{-1}\\right|_{v_{D S}=0} \\tag{12.56}\n\\end{equation*}\n$$\n\nyielding a small-signal resistance of\n\n$$\n\\begin{equation*}\nr_{D S}=\\frac{1}{\\mu_{\\mathrm{n}} C_{o x}\\left(\\frac{W}{L}\\right)\\left(V_{G S}-V_{\\mathrm{tn}}\\right)} \\tag{12.57}\n\\end{equation*}\n$$\n\nKey Point: Triode transistors can substitute fixed resistors to create tunable transconductors, albeit with some reduction in linearity.\n\nA method to utilize this equivalent resistance for achieving a transconductor with moderate linearity is illustrated in Fig. 12.15 [Welland, 1994]. This circuit shares the same structure as the bipolar circuit in Fig. 12.14. However, the bipolar transistors are replaced with MOSFETs operating in the active region, and the resistor is substituted with a transistor in the triode region. Note that the circuit in Fig. 12.15 maintains constant currents through $\\mathrm{Q}_{1}$ and $\\mathrm{Q}_{2}$ (similar to the bipolar case), ensuring their gate-source voltages remain constant. Therefore, the transconductance of this cell equals the inverse of the small-signal resistance, $r_{d s}$, of $Q_{9}$. Using the small-signal resistance from (12.57), the overall transconductance of this cell is\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=\\frac{\\mathrm{i}_{\\mathrm{ol}}}{\\mathrm{v}_{\\mathrm{i}}^{+}-\\mathrm{v}_{\\mathrm{i}}^{-}}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{9}\\left(\\mathrm{~V}_{\\mathrm{gs} 9}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\tag{12.58}\n\\end{equation*}\n$$\n\nThus, this transconductor features a variable transconductance that can be adjusted by varying $V_{\\text {gs9. }}$. Similar to the bipolar scenario, this transconductance can be scaled by adjusting the current mirrors $Q_{7}$ and $Q_{8}$ relative to $Q_{3}$ and $Q_{4}$.\n\nA simpler approach with fewer p-channel inputs is depicted in Fig. 12.16 [Kwan, 1991]. Here, a constant current $I_{2}$ is enforced through each of $Q_{1}$ and $Q_{2}$, while the dc bias current for $Q_{3}$ and $Q_{4}$ is the difference between $I_{1}$ and $I_{2}$. The signal current, $i_{11}$, flows through $Q_{3}$ and $Q_{4}$ and is mirrored to the output transistors, $Q_{5}$ and $Q_{6}$. This configuration eliminates one transistor stage around the input loops compared to Fig. 12.15, specifically omitting the $Q_{5}$ and $Q_{6}$ source followers, which typically enhances speed.\n\nAn advantage of the transconductors in Figs. 12.15 and 12.16 (and similar designs) is their ease of modification for multiple outputs by adding extra output transistors. For instance, Fig. 12.16 illustrates a transconductor with two outputs in Fig. 12.17. These additional transistors can be scaled to achieve any desired output current ratio. Such multiple outputs often enable filters to be implemented using fewer transconductors. For example, a biquad similar to Fig. 12.10, but employing multiple-output transconductors, is shown in Fig. 12.18. The transconductors are now linked to the outputs rather than the inputs, reducing the number of transconductors by two. This not only conserves die area but also significantly saves power."
},
{
    "text": "We observe from (12.54) that when a small drain-source voltage, $\\mathrm{V}_{\\mathrm{DS}}$, is applied, the $\\mathrm{V}_{\\mathrm{DS}}^{2}$ term rapidly approaches zero, causing the drain current to be roughly linear with the applied drain-source voltage. Consequently, a transistor in triode can be modeled as a resistor defined by\n\n$$\n\\begin{equation*}\n\\left.r_{D S} \\equiv\\left(\\frac{\\partial i_{D}}{\\partial v_{D S}}\\right)^{-1}\\right|_{v_{D S}=0} \\tag{12.56}\n\\end{equation*}\n$$\n\nyielding a small-signal resistance of\n\n$$\n\\begin{equation*}\nr_{D S}=\\frac{1}{\\mu_{\\mathrm{n}} C_{o x}\\left(\\frac{W}{L}\\right)\\left(V_{G S}-V_{\\mathrm{tn}}\\right)} \\tag{12.57}\n\\end{equation*}\n$$\n\nKey Point: Triode transistors can substitute fixed resistors to create tunable transconductors, albeit with reduced linearity.\n\nOne method to utilize this equivalent resistance for a transconductor with moderate linearity is illustrated in Fig. 12.15 [Welland, 1994]. This circuit mirrors the structure of the bipolar circuit in Fig. 12.14. Here, bipolar transistors are replaced with MOSFETs (biased in the active region), and the resistor is substituted with a transistor in the triode region. Note that Fig. 12.15's circuit ensures constant currents through $\\mathrm{Q}_{1}$ and $\\mathrm{Q}_{2}$ (similar to the bipolar case), maintaining their gate-source voltages constant. Consequently, the cell's transconductance equals the inverse of $Q_{9}$'s small-signal resistance, $r_{d s}$. Using (12.57)'s small-signal resistance, the cell's overall transconductance is\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=\\frac{\\mathrm{i}_{\\mathrm{ol}}}{\\mathrm{v}_{\\mathrm{i}}^{+}-\\mathrm{v}_{\\mathrm{i}}^{-}}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{9}\\left(\\mathrm{~V}_{\\mathrm{gs} 9}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\tag{12.58}\n\\end{equation*}\n$$\n\nThus, this transconductor features a variable transconductance adjustable by altering $V_{\\text {gs9. }}$. Like the bipolar case, this value can be scaled by adjusting the current mirrors $Q_{7}$ and $Q_{8}$ relative to $Q_{3}$ and $Q_{4}$.\n\nA less complex approach with fewer p-channel inputs is depicted in Fig. 12.16 [Kwan, 1991]. Here, a constant current $I_{2}$ flows through each of $Q_{1}$ and $Q_{2}$, while the dc bias current for $Q_{3}$ and $Q_{4}$ equals the difference between $I_{1}$ and $I_{2}$. The signal current, $i_{11}$, passes through $Q_{3}$ and $Q_{4}$, mirrored to the output transistors, $Q_{5}$ and $Q_{6}$. This configuration eliminates one transistor stage around the input loops compared to Fig. 12.15, typically enhancing speed.\n\nAn advantage of the transconductors in Figs. 12.15 and 12.16 (and similar designs) is their ease of modification for multiple outputs by adding extra output transistors. For instance, Fig. 12.16's transconductor with two outputs is shown in Fig. 12.17. These additional transistors can be scaled for any desired output current ratio. Such multiple outputs often reduce the number of transconductors needed for filters. For example, a biquad similar to Fig. 12.10, but using multiple-output transconductors, is shown in Fig. 12.18. The transconductors are now linked to the outputs rather than the inputs, saving two transconductors. This method not only conserves die area but also significantly reduces power consumption."
},
{
    "text": "From (12.54), it is evident that when a small drain-source voltage, $\\mathrm{V}_{\\mathrm{DS}}$, is applied, the $\\mathrm{V}_{\\mathrm{DS}}^{2}$ term rapidly approaches zero, leading to a drain current that is approximately linear with the applied drain-source voltage. Consequently, a transistor in the triode region can be modeled as a resistor defined by\n\n$$\n\\begin{equation*}\n\\left.r_{D S} \\equiv\\left(\\frac{\\partial i_{D}}{\\partial v_{D S}}\\right)^{-1}\\right|_{v_{D S}=0} \\tag{12.56}\n\\end{equation*}\n$$\n\nyielding a small-signal resistance of\n\n$$\n\\begin{equation*}\nr_{D S}=\\frac{1}{\\mu_{\\mathrm{n}} C_{o x}\\left(\\frac{W}{L}\\right)\\left(V_{G S}-V_{\\mathrm{tn}}\\right)} \\tag{12.57}\n\\end{equation*}\n$$\n\nKey Point: Triode transistors can substitute fixed resistors to create tunable transconductors, albeit with reduced linearity.\n\nAn approach to achieve a transconductor with moderate linearity using this equivalent resistance is depicted in Fig. 12.15 [Welland, 1994]. This circuit shares the same structure as the bipolar circuit in Fig. 12.14. However, the bipolar transistors are replaced with MOSFET counterparts (biased in the active region), and the resistor is substituted with a transistor operating in the triode region. Note that the circuit in Fig. 12.15 maintains constant currents through $\\mathrm{Q}_{1}$ and $\\mathrm{Q}_{2}$ (similar to the bipolar case), ensuring their gate-source voltages remain constant. Consequently, the transconductance of this cell equals the inverse of the small-signal resistance, $r_{d s}$, of $Q_{9}$. Utilizing the small-signal resistance from (12.57), the overall transconductance of this cell is\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=\\frac{\\mathrm{i}_{\\mathrm{ol}}}{\\mathrm{v}_{\\mathrm{i}}^{+}-\\mathrm{v}_{\\mathrm{i}}^{-}}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{9}\\left(\\mathrm{~V}_{\\mathrm{gs} 9}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\tag{12.58}\n\\end{equation*}\n$$\n\nThus, this transconductor features a variable transconductance that can be adjusted by altering $V_{\\text {gs9. }}$. As in the bipolar scenario, this transconductance can be scaled by adjusting the current mirrors $Q_{7}$ and $Q_{8}$ relative to $Q_{3}$ and $Q_{4}$.\n\nA simplified approach with reduced complexity and fewer p-channel inputs is illustrated in Fig. 12.16 [Kwan, 1991]. Here, a constant current $I_{2}$ is enforced through each of $Q_{1}$ and $Q_{2}$, while the dc bias current for $Q_{3}$ and $Q_{4}$ is the difference between $I_{1}$ and $I_{2}$. The signal current, $i_{11}$, flows through $Q_{3}$ and $Q_{4}$, and is mirrored to the output transistors, $Q_{5}$ and $Q_{6}$. This configuration eliminates one transistor stage around the input loops compared to Fig. 12.15, specifically omitting the $Q_{5}$ and $Q_{6}$ source followers, which typically enhances speed.\n\nAn advantage of the transconductors in Figs. 12.15 and 12.16 (and similar designs) is their ease of modification for multiple outputs by adding extra output transistors. For instance, Fig. 12.16 demonstrates a transconductor with two outputs in Fig. 12.17. These additional transistors can be scaled to achieve any desired output current ratio. Such multiple outputs often enable filters to be implemented using fewer transconductors. For example, a biquad similar to Fig. 12.10, but utilizing multiple-output transconductors, is shown in Fig. 12.18. The transconductors are now linked to the outputs rather than the inputs, reducing the number of transconductors by two. This not only conserves die area but also significantly saves power."
},
{
    "text": "From (12.54), it is evident that when a small drain-source voltage, $\\mathrm{V}_{\\mathrm{DS}}$, is applied, the $\\mathrm{V}_{\\mathrm{DS}}^{2}$ term rapidly approaches zero, causing the drain current to exhibit an approximately linear relationship with the applied drain-source voltage. Consequently, a transistor in the triode region can be modeled as a resistor defined by\n\n$$\n\\begin{equation*}\n\\left.r_{D S} \\equiv\\left(\\frac{\\partial i_{D}}{\\partial v_{D S}}\\right)^{-1}\\right|_{v_{D S}=0} \\tag{12.56}\n\\end{equation*}\n$$\n\nyielding a small-signal resistance of\n\n$$\n\\begin{equation*}\nr_{D S}=\\frac{1}{\\mu_{\\mathrm{n}} C_{o x}\\left(\\frac{W}{L}\\right)\\left(V_{G S}-V_{\\mathrm{tn}}\\right)} \\tag{12.57}\n\\end{equation*}\n$$\n\nKey Point: Triode transistors can substitute fixed resistors to create tunable transconductors, albeit with some reduction in linearity.\n\nOne method to leverage this equivalent resistance for achieving a transconductor with moderate linearity is depicted in Fig. 12.15 [Welland, 1994]. This circuit shares the same architecture as the bipolar circuit in Fig. 12.14. However, the bipolar transistors are replaced with their MOSFET equivalents (biased in the active region), and the resistor is substituted with a transistor operating in the triode region. Note that the circuit in Fig. 12.15 ensures constant currents through $\\mathrm{Q}_{1}$ and $\\mathrm{Q}_{2}$ (similar to the bipolar case), thereby keeping their individual gate-source voltages constant. Consequently, the transconductance of this cell equals the inverse of the small-signal resistance, $r_{d s}$, of $Q_{9}$. Utilizing the small-signal resistance from (12.57), the overall transconductance of this cell is expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=\\frac{\\mathrm{i}_{\\mathrm{ol}}}{\\mathrm{v}_{\\mathrm{i}}^{+}-\\mathrm{v}_{\\mathrm{i}}^{-}}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{9}\\left(\\mathrm{~V}_{\\mathrm{gs} 9}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\tag{12.58}\n\\end{equation*}\n$$\n\nThus, this transconductor features a variable transconductance that can be adjusted by altering $V_{\\text {gs9. }}$. Similar to the bipolar scenario, this transconductance can be scaled by adjusting the current mirrors $Q_{7}$ and $Q_{8}$ relative to $Q_{3}$ and $Q_{4}$.\n\nA less complex approach with fewer p-channel inputs is illustrated in Fig. 12.16 [Kwan, 1991]. Here, a constant current $I_{2}$ is maintained through each of $Q_{1}$ and $Q_{2}$, while the dc bias current for $Q_{3}$ and $Q_{4}$ equals the difference between $I_{1}$ and $I_{2}$. The signal current, $i_{11}$, also passes through $Q_{3}$ and $Q_{4}$, and is mirrored to the output transistors, $Q_{5}$ and $Q_{6}$. Note that this configuration eliminates one transistor stage around the input transistor loops. Specifically, the $Q_{5}$ and $Q_{6}$ source followers present in Fig. 12.15 are not needed in Fig. 12.16, typically enhancing the speed of the latter.\n\nAn advantage of the transconductors in Figs. 12.15 and 12.16 (and similar designs) is their ease of modification for multiple outputs by simply adding extra output transistors. For instance, the transconductor in Fig. 12.16 with two outputs is shown in Fig. 12.17. These additional transistors can be scaled to achieve any desired output current ratio. Such multiple outputs often enable the realization of filters using fewer transconductors. For example, a biquad similar to that in Fig. 12.10, but employing multiple-output transconductors, is presented in Fig. 12.18. In this setup, the transconductors are associated with the outputs rather than the inputs. There is one transconductor per filter order plus an additional one for the input voltage-to-current conversion. This method saves two transconductors, not only conserving die area but, more critically, reducing power consumption."
},
{
    "text": "We observe from (12.54) that when a small drain-source voltage, $\\mathrm{V}_{\\mathrm{DS}}$, is applied, the $\\mathrm{V}_{\\mathrm{DS}}^{2}$ term rapidly approaches zero, causing the drain current to be nearly linear with respect to the applied drain-source voltage. Consequently, a transistor in triode mode can be modeled as a resistor defined by\n\n$$\n\\begin{equation*}\n\\left.r_{D S} \\equiv\\left(\\frac{\\partial i_{D}}{\\partial v_{D S}}\\right)^{-1}\\right|_{v_{D S}=0} \\tag{12.56}\n\\end{equation*}\n$$\n\nyielding a small-signal resistance of\n\n$$\n\\begin{equation*}\nr_{D S}=\\frac{1}{\\mu_{\\mathrm{n}} C_{o x}\\left(\\frac{W}{L}\\right)\\left(V_{G S}-V_{\\mathrm{tn}}\\right)} \\tag{12.57}\n\\end{equation*}\n$$\n\nKey Point: Triode transistors can substitute for fixed resistors to create tunable transconductors, albeit with some reduction in linearity.\n\nOne method to utilize this equivalent resistance for achieving a transconductor with moderate linearity is illustrated in Fig. 12.15 [Welland, 1994]. This circuit shares the same structure as the bipolar circuit in Fig. 12.14. However, in this instance, the bipolar transistors are replaced with their MOSFET equivalents (biased in the active region), and the resistor is substituted with a transistor operating in the triode region. Note that the circuit in Fig. 12.15 maintains constant currents through $\\mathrm{Q}_{1}$ and $\\mathrm{Q}_{2}$ (similar to the bipolar case), ensuring their individual gate-source voltages remain constant. Consequently, the transconductance of this cell equals the inverse of the small-signal resistance, $r_{d s}$, of $Q_{9}$. Using the small-signal resistance from (12.57), the overall transconductance of this cell is expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=\\frac{\\mathrm{i}_{\\mathrm{ol}}}{\\mathrm{v}_{\\mathrm{i}}^{+}-\\mathrm{v}_{\\mathrm{i}}^{-}}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{9}\\left(\\mathrm{~V}_{\\mathrm{gs} 9}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\tag{12.58}\n\\end{equation*}\n$$\n\nThus, this transconductor features a variable transconductance that can be adjusted by altering $V_{\\text {gs9. }}$. Similar to the bipolar scenario, this transconductance can be scaled by adjusting the current mirrors $Q_{7}$ and $Q_{8}$ relative to $Q_{3}$ and $Q_{4}$.\n\nA less complex approach with fewer p-channel inputs is depicted in Fig. 12.16 [Kwan, 1991]. Here, a constant current $I_{2}$ is forced through each of $Q_{1}$ and $Q_{2}$, while the dc bias current for $Q_{3}$ and $Q_{4}$ equals the difference between $I_{1}$ and $I_{2}$. The signal current, $i_{11}$, also flows through $Q_{3}$ and $Q_{4}$, and is mirrored to the output transistors, $Q_{5}$ and $Q_{6}$. Note that this configuration eliminates one transistor stage around the input transistor loops. Specifically, the $Q_{5}$ and $Q_{6}$ source followers present in Fig. 12.15 are not needed in Fig. 12.16, typically enhancing the speed of the latter.\n\nAn advantage of the transconductors in Figs. 12.15 and 12.16 (and similar designs) is their ease of modification for multiple outputs by simply adding extra output transistors. For instance, the transconductor in Fig. 12.16 with two outputs is shown in Fig. 12.17. These additional transistors can be scaled to achieve any desired output current ratio. Such multiple outputs often enable the realization of filters using fewer transconductors. For example, a biquad similar to that in Fig. 12.10, but employing multiple-output transconductors, is shown in Fig. 12.18. The transconductors are now linked to the outputs rather than the inputs. There is one transconductor per filter order plus an additional one for the input conversion from voltage to current. This method saves two transconductors, reducing both die area and power consumption."
},
{
    "text": "We observe from (12.54) that when a small drain-source voltage, $\\mathrm{V}_{\\mathrm{DS}}$, is applied, the $\\mathrm{V}_{\\mathrm{DS}}^{2}$ term rapidly approaches zero, causing the drain current to exhibit an approximately linear relationship with the applied drain-source voltage. Consequently, a transistor in the triode region can be modeled as a resistor, expressed by\n\n$$\n\\begin{equation*}\n\\left.r_{D S} \\equiv\\left(\\frac{\\partial i_{D}}{\\partial v_{D S}}\\right)^{-1}\\right|_{v_{D S}=0} \\tag{12.56}\n\\end{equation*}\n$$\n\nyielding a small-signal resistance of\n\n$$\n\\begin{equation*}\nr_{D S}=\\frac{1}{\\mu_{\\mathrm{n}} C_{o x}\\left(\\frac{W}{L}\\right)\\left(V_{G S}-V_{\\mathrm{tn}}\\right)} \\tag{12.57}\n\\end{equation*}\n$$\n\nKey Point: Triode transistors can substitute fixed resistors to create tunable transconductors, albeit with some reduction in linearity.\n\nOne method to utilize this equivalent resistance for achieving a transconductor with moderate linearity is illustrated in Fig. 12.15 [Welland, 1994]. This circuit shares the same structure as the bipolar circuit in Fig. 12.14. However, the bipolar transistors are replaced with their MOSFET equivalents (biased in the active region), and the resistor is substituted with a transistor operating in the triode region. Note that the circuit in Fig. 12.15 maintains constant currents through $\\mathrm{Q}_{1}$ and $\\mathrm{Q}_{2}$ (similar to the bipolar case), ensuring their individual gate-source voltages remain constant. Consequently, the transconductance of this cell equals the inverse of the small-signal resistance, $r_{d s}$, of $Q_{9}$. Using the small-signal resistance from (12.57), the overall transconductance of this cell is given by\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=\\frac{\\mathrm{i}_{\\mathrm{ol}}}{\\mathrm{v}_{\\mathrm{i}}^{+}-\\mathrm{v}_{\\mathrm{i}}^{-}}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{9}\\left(\\mathrm{~V}_{\\mathrm{gs} 9}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\tag{12.58}\n\\end{equation*}\n$$\n\nThus, this transconductor features a variable transconductance that can be adjusted by altering $V_{\\text {gs9. }}$. Similar to the bipolar scenario, this transconductance can be scaled by adjusting the current mirrors $Q_{7}$ and $Q_{8}$ relative to $Q_{3}$ and $Q_{4}$.\n\nA simpler approach with reduced complexity and fewer p-channel inputs is depicted in Fig. 12.16 [Kwan, 1991]. Here, a constant current $I_{2}$ is enforced through each of $Q_{1}$ and $Q_{2}$, while the dc bias current for $Q_{3}$ and $Q_{4}$ equals the difference between $I_{1}$ and $I_{2}$. The signal current, $i_{11}$, also passes through $Q_{3}$ and $Q_{4}$, and is mirrored to the output transistors, $Q_{5}$ and $Q_{6}$. Note that this configuration eliminates one transistor stage around the input transistor loops. Specifically, the $Q_{5}$ and $Q_{6}$ source followers present in Fig. 12.15 are not needed in Fig. 12.16, typically enhancing the speed of the latter.\n\nAn advantage of the transconductors in Figs. 12.15 and 12.16 (and similar designs) is their ease of modification for multiple outputs by simply adding extra output transistors. For instance, the transconductor in Fig. 12.16 with two outputs is shown in Fig. 12.17. These additional transistors can be scaled to achieve any desired output current ratio. Such multiple outputs often enable the realization of filters using fewer transconductors. For example, a biquad similar to that in Fig. 12.10, but employing multiple-output transconductors, is presented in Fig. 12.18. The transconductors are now linked to the outputs rather than the inputs. There is one transconductor per filter order plus an additional one for input voltage-to-current conversion. This method saves two transconductors, conserving both die area and power."
},
{
    "text": "We observe from (12.54) that when a small drain-source voltage, $\\mathrm{V}_{\\mathrm{DS}}$, is applied, the $\\mathrm{V}_{\\mathrm{DS}}^{2}$ term rapidly approaches zero, causing the drain current to be nearly linear with the applied drain-source voltage. Consequently, a transistor in the triode region can be modeled as a resistor defined by\n\n$$\n\\begin{equation*}\n\\left.r_{D S} \\equiv\\left(\\frac{\\partial i_{D}}{\\partial v_{D S}}\\right)^{-1}\\right|_{v_{D S}=0} \\tag{12.56}\n\\end{equation*}\n$$\n\nyielding a small-signal resistance of\n\n$$\n\\begin{equation*}\nr_{D S}=\\frac{1}{\\mu_{\\mathrm{n}} C_{o x}\\left(\\frac{W}{L}\\right)\\left(V_{G S}-V_{\\mathrm{tn}}\\right)} \\tag{12.57}\n\\end{equation*}\n$$\n\nKey Point: Triode transistors can substitute fixed resistors to create tunable transconductors, albeit with reduced linearity.\n\nOne method to utilize this equivalent resistance for achieving a transconductor with moderate linearity is illustrated in Fig. 12.15 [Welland, 1994]. This circuit shares the same structure as the bipolar circuit in Fig. 12.14. However, in this case, the bipolar transistors are replaced with their MOSFET equivalents (biased in the active region), and the resistor is substituted with a transistor operating in the triode region. Note that the circuit in Fig. 12.15 maintains constant currents through $\\mathrm{Q}_{1}$ and $\\mathrm{Q}_{2}$ (similar to the bipolar case), ensuring their individual gate-source voltages remain constant. Consequently, the transconductance of this cell equals the inverse of the small-signal resistance, $r_{d s}$, of $Q_{9}$. Using the small-signal resistance from (12.57), the overall transconductance of this cell is given by\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=\\frac{\\mathrm{i}_{\\mathrm{ol}}}{\\mathrm{v}_{\\mathrm{i}}^{+}-\\mathrm{v}_{\\mathrm{i}}^{-}}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{9}\\left(\\mathrm{~V}_{\\mathrm{gs} 9}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\tag{12.58}\n\\end{equation*}\n$$\n\nThus, this transconductor features a variable transconductance that can be adjusted by altering $V_{\\text {gs9. }}$. Similar to the bipolar scenario, this transconductance can be scaled by adjusting the current mirrors $Q_{7}$ and $Q_{8}$ relative to $Q_{3}$ and $Q_{4}$.\n\nA less complex approach with fewer p-channel inputs is depicted in Fig. 12.16 [Kwan, 1991]. Here, a constant current $I_{2}$ is forced through each of $Q_{1}$ and $Q_{2}$, while the dc bias current for $Q_{3}$ and $Q_{4}$ equals the difference between $I_{1}$ and $I_{2}$. The signal current, $i_{11}$, also flows through $Q_{3}$ and $Q_{4}$, and is mirrored to the output transistors, $Q_{5}$ and $Q_{6}$. Note that this configuration eliminates one transistor stage around the input transistor loops. Specifically, the $Q_{5}$ and $Q_{6}$ source followers present in Fig. 12.15 are not needed in Fig. 12.16, typically enhancing the speed of the latter.\n\nAn advantage of the transconductors in Figs. 12.15 and 12.16 (and similar designs) is their ease of modification for multiple outputs by simply adding extra output transistors. For instance, the transconductor in Fig. 12.16 with two outputs is shown in Fig. 12.17. These additional transistors can be scaled to achieve any desired output current ratio. These multiple outputs often enable the realization of filters using fewer transconductors. For example, a biquad similar to that in Fig. 12.10, but employing multiple-output transconductors, is shown in Fig. 12.18. The transconductors are now linked to the outputs rather than the inputs. There is one transconductor per filter order plus an additional one for the input conversion from voltage to current. This method saves two transconductors, conserving both die area and power."
},
{
    "text": "From equation (12.54), it is evident that when a small drain-source voltage, $\\mathrm{V}_{\\mathrm{DS}}$, is applied, the $\\mathrm{V}_{\\mathrm{DS}}^{2}$ term rapidly approaches zero, causing the drain current to be approximately linear with the applied drain-source voltage. Consequently, a transistor in the triode region can be modeled as a resistor defined by\n\n$$\n\\begin{equation*}\n\\left.r_{D S} \\equiv\\left(\\frac{\\partial i_{D}}{\\partial v_{D S}}\\right)^{-1}\\right|_{v_{D S}=0} \\tag{12.56}\n\\end{equation*}\n$$\n\nyielding a small-signal resistance of\n\n$$\n\\begin{equation*}\nr_{D S}=\\frac{1}{\\mu_{\\mathrm{n}} C_{o x}\\left(\\frac{W}{L}\\right)\\left(V_{G S}-V_{\\mathrm{tn}}\\right)} \\tag{12.57}\n\\end{equation*}\n$$\n\nKey Point: Triode transistors can substitute fixed resistors to create tunable transconductors, albeit with some reduction in linearity.\n\nOne method to utilize this equivalent resistance for achieving a transconductor with moderate linearity is depicted in Fig. 12.15 [Welland, 1994]. This circuit shares the same structure as the bipolar circuit in Fig. 12.14. However, in this case, the bipolar transistors are replaced by their MOSFET equivalents (biased in the active region), and the resistor is substituted with a transistor operating in the triode region. Note that the circuit in Fig. 12.15 ensures constant currents through $\\mathrm{Q}_{1}$ and $\\mathrm{Q}_{2}$ (similar to the bipolar case), thereby keeping their individual gate-source voltages constant. Consequently, the transconductance of this cell equals the inverse of the small-signal resistance, $r_{d s}$, of $Q_{9}$. Using the small-signal resistance from (12.57), the overall transconductance of this cell is\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=\\frac{\\mathrm{i}_{\\mathrm{ol}}}{\\mathrm{v}_{\\mathrm{i}}^{+}-\\mathrm{v}_{\\mathrm{i}}^{-}}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{9}\\left(\\mathrm{~V}_{\\mathrm{gs} 9}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\tag{12.58}\n\\end{equation*}\n$$\n\nThus, this transconductor features a variable transconductance that can be adjusted by altering $V_{\\text {gs9. }}$. Similar to the bipolar scenario, this transconductance can be scaled by adjusting the current mirrors $Q_{7}$ and $Q_{8}$ relative to $Q_{3}$ and $Q_{4}$.\n\nA simplified approach with reduced complexity and fewer p-channel inputs is illustrated in Fig. 12.16 [Kwan, 1991]. Here, a constant current $I_{2}$ is maintained through each of $Q_{1}$ and $Q_{2}$, while the dc bias current for $Q_{3}$ and $Q_{4}$ is the difference between $I_{1}$ and $I_{2}$. The signal current, $i_{11}$, also passes through $Q_{3}$ and $Q_{4}$, and is mirrored to the output transistors, $Q_{5}$ and $Q_{6}$. Note that this configuration eliminates one transistor stage around the input transistor loops compared to Fig. 12.15, specifically omitting the $Q_{5}$ and $Q_{6}$ source followers, which typically enhances the speed of the circuit in Fig. 12.16.\n\nAn advantage of the transconductors in Figs. 12.15 and 12.16 (and similar designs) is their ease of modification for multiple outputs by simply adding more output transistors. For instance, the transconductor in Fig. 12.16 with two outputs is shown in Fig. 12.17. These additional transistors can be scaled to achieve any desired output current ratio. Such multiple outputs often enable the realization of filters using fewer transconductors. For example, a biquad similar to Fig. 12.10, but employing multiple-output transconductors, is presented in Fig. 12.18. In this setup, the transconductors are associated with the outputs rather than the inputs, requiring one transconductor per filter order plus an additional one for the input voltage-to-current conversion. This method not only conserves die area but, more critically, reduces power consumption."
},
{
    "text": "The technique for linearizing a MOSFET differential stage by utilizing transistors primarily in the triode region is depicted in Fig. 12.19 [Krummenacher, 1988]. It's worth noting that the gates of transistors $Q_{3}$ and $Q_{4}$ are linked to the differential input voltage instead of a bias voltage. Consequently, triode transistors $Q_{3}$ and $Q_{4}$ experience fluctuating bias conditions to enhance the linearity of this circuit (as will be discussed shortly). To confirm that $Q_{3}$ and $Q_{4}$ are typically in the triode region, we examine the scenario of equal input signals (i.e., $v_{1}=v_{2}$), leading to\n\n$$\n\\begin{equation*}\nv_{x}=v_{y}=v_{1}-v_{G S 1}=v_{1}-\\left(v_{\\text {eff } 1}+V_{t \\mathrm{t}}\\right) \\tag{12.59}\n\\end{equation*}\n$$\n\nConsequently, the drain-source voltages of $Q_{3}$ and $Q_{4}$ are both zero. Nonetheless, their gate-source voltages match those of $\\mathrm{Q}_{1}$ and $\\mathrm{Q}_{2}$, indicating that they are indeed in the triode region.\n\nThe depicted circuit in Fig. 12.18 is a general biquad filter implemented using multiple-output transconductors. It comprises three operational amplifiers (Gm1, Gm2, Gm3) and capacitors (2CA, 2CB, 2CX). The configuration supports differential input (Vin+, Vin-) and differential output (Vout+, Vout-). The capacitors 2CA and 2CB are grounded, whereas 2CX links the input to the output nodes, providing feedback and frequency-dependent response.\n\nIn Fig. 12.19, a linearized CMOS differential pair is presented, utilizing NMOS transistors $Q_{3}$ and $Q_{4}$ primarily in the triode region. The current sources are adjusted to maintain common-mode feedback. The transconductance Gm is denoted by the formula displayed in the diagram.\n\nTo ascertain the small-signal transconductance of this stage, we observe from (12.57) that the small-signal drain-source resistance of $Q_{3}$ and $Q_{4}$ is expressed as\n\n$$\n\\begin{equation*}\nr_{\\mathrm{ds} 3}=r_{\\mathrm{ds} 4}=\\frac{1}{2 \\mathrm{k}_{3}\\left(\\mathrm{~V}_{\\mathrm{GS} 1}-\\mathrm{V}_{\\mathrm{tn}}\\right)} \\tag{12.60}\n\\end{equation*}\n$$\n\nwhere we have presumed that $Q_{3}$ and $Q_{4}$ are matched devices and have defined\n\n$$\n\\begin{equation*}\n\\mathrm{k}_{3}=\\frac{\\mu_{\\mathrm{n}} \\mathrm{Cox}_{\\mathrm{ox}}}{2}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{3} \\tag{12.61}\n\\end{equation*}\n$$\n\nIt should be noted that in this circuit, we cannot disregard the impact of the fluctuating gate-source voltages of $Q_{1}$ and $Q_{2}$ since their drain currents are not fixed to a constant value (as in Fig. 12.15). The small-signal source resistance values of $Q_{1}$ and $Q_{2}$ are indicated by\n\n$$\n\\begin{equation*}\nr_{s 1}=r_{s 2}=\\frac{1}{g_{m 1}}=\\frac{1}{2 k_{1}\\left(V_{\\mathrm{GS} 1}-V_{t n}\\right)} \\tag{12.62}\n\\end{equation*}\n$$\n\nEmploying the small-signal T model, we determine the small-signal output current of $i_{01}$ to be equivalent to\n\n$$\n\\begin{equation*}\ni_{01}=\\frac{v_{1}-v_{2}}{r_{s 1}+r_{s 2}+\\left(r_{d s 3} \\| r_{d s 4}\\right)} \\tag{12.63}\n\\end{equation*}\n$$\n\nThus, defining $G_{m} \\equiv i_{01} /\\left(v_{1}-v_{2}\\right)$, we obtain\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=\\frac{1}{\\mathrm{r}_{\\mathrm{s} 1}+\\mathrm{r}_{\\mathrm{s} 2}+\\left(\\mathrm{r}_{\\mathrm{ds} 3} \\| \\mathrm{r}_{\\mathrm{ds} 4}\\right)} \\tag{12.64}\n\\end{equation*}\n$$\n\nwhich can be demonstrated to be\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=\\frac{4 \\mathrm{k}_{1} \\mathrm{k}_{3}\\left(\\mathrm{~V}_{\\mathrm{GS} 1}-\\mathrm{V}_{\\mathrm{tn}}\\right)}{\\mathrm{k}_{1}+4 \\mathrm{k}_{3}} \\tag{12.65}\n\\end{equation*}\n$$\n\nUltimately, to adapt this outcome to express it in terms of current, we observe that\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{1}=\\mathrm{k}_{1}\\left(\\mathrm{~V}_{\\mathrm{GS} 1}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\tag{12.66}\n\\end{equation*}\n$$\n\nor, equivalently,\n\n$$\n\\begin{equation*}\n\\left(\\mathrm{V}_{\\mathrm{GS} 1}-\\mathrm{V}_{\\mathrm{tn}}\\right)=\\sqrt{\\frac{\\mathrm{I}_{1}}{\\mathrm{k}_{1}}} \\tag{12.67}\n\\end{equation*}\n$$\n\nwhich yields\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=\\frac{4 \\mathrm{k}_{1} \\mathrm{k}_{3} \\sqrt{\\mathrm{I}_{1}}}{\\left(\\mathrm{k}_{1}+4 \\mathrm{k}_{3}\\right) \\sqrt{\\mathrm{k}_{1}}} \\tag{12.68}\n\\end{equation*}\n$$\n\nTherefore, we observe that the transconductance of this transconductor can be adjusted by modifying the bias current, $I_{1}$. Additionally, it is worth noting that the transconductance is proportional to the square root of the bias current, contrasting with a linear relationship in the case of a bipolar transconductor.\n\nThe improvement in linearity of this circuit due to fluctuating bias conditions for the triode transistors can be observed by initially considering scenarios with minor disparities in $\\mathrm{V}_{1}$ and $\\mathrm{V}_{2}$ (e.g., 100 mV). In this case of small input signals, $Q_{3}$ and $Q_{4}$ fundamentally act as two source degeneration resistors. Thus, linearity is enhanced (assuming $r_{\\mathrm{ds} 3}>>r_{s 1}$) compared to that of a simple differential pair, since transistors in triode are more linear than the source resistances of transistors in the active region. In other words, for small input signal values, the linearity of this circuit resembles that of a circuit where the gates of $Q_{3}$, $Q_{4}$ are linked to fixed-bias voltages. However, if the gates of $Q_{3}$, $Q_{4}$ were connected to fixed-bias voltages, (12.54) demonstrates that as their drain-source voltage increases, the drain current decreases below the level that would occur in a linear relationship due to the squared $\\mathrm{V}_{\\mathrm{DS}}$ term. Furthermore, the fluctuating values of $\\mathrm{V}_{\\mathrm{GS} 1}$ and $\\mathrm{V}_{\\mathrm{GS} 2}$ (owing to current fluctuations) also diminish the value of $\\mathrm{V}_{\\mathrm{DS}}$, and hence the transconductance of the cell for large input signals. To counteract this reduction in transconductance for large input signals, the gates of $Q_{3}$ or $Q_{4}$ are connected to the input signals as illustrated. Now, as the input signal intensifies, the small-signal resistance of one of the two triode transistors in parallel, $Q_{3}$ or $Q_{4}$, is decreased. This diminished resistance strives to elevate the transconductance, resulting in a partial compensation for the decreasing transconductance value. Hence, if an optimal ratio of $k_{1} / k_{3}$ is selected, a more stable transconductance (and consequently better linearity) is achieved. For a 4-MHz filter presented in [Krummenacher, 1988], a ratio of $k_{1} / k_{3}=6.7$ is employed to attain distortion levels approximately 50 dB below the maximum output signal level of 350 mVrms. Moreover, an extension of this approach is presented in [Silva-Martinez, 1991], where the input signal is distributed across two input stages to further enhance the distortion performance.\n\n#### EXAMPLE 12.6\n\nConsider the circuit of Fig. 12.19 with the following values: $I_{1}=100 \\mu \\mathrm{~A}$, $\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}=96 \\mu \\mathrm{~A} / \\mathrm{V}^{2}$, $(\\mathrm{W} / \\mathrm{L})_{1}=(\\mathrm{W} / \\mathrm{L})_{2}=20$, $(\\mathrm{~W} / \\mathrm{L})_{3}=(\\mathrm{W} / \\mathrm{L})_{4}=3$, and $\\mathrm{v}_{2}=0 \\mathrm{~V}$.\n\n1. Presuming a perfectly linear transconductor, employ (12.68) to determine $i_{01}$ when $v_{1}$ equals 2.5 mV and 250 mV.\n2. Assume the gates of $Q_{3}$, $Q_{4}$ are connected to ground and utilize classical models for both the triode and active regions. Calculate the true value of $i_{01}$ when $v_{1}$ equals 2.5 mV and 250 mV. Compare your results with those in part 1.\n3. Repeat part 2, assuming the gates of $\\mathrm{Q}_{3}$, $Q_{4}$ are connected to the input signals as depicted in Fig. 12.19.\n\n#### Solution\n\n1. For the specified values, we have\n\n$$\n\\begin{align*}\n& \\mathrm{k}_{1}=\\frac{96}{2} \\times 20=960 \\mu \\mathrm{~A} / \\mathrm{V}^{2} \\tag{12.69}\\\\\n& \\mathrm{k}_{3}=\\frac{96}{2} \\times 3=144 \\mu \\mathrm{~A} / \\mathrm{V}^{2} \\tag{12.70}\n\\end{align*}\n$$\n\nand substituting the aforementioned values in (12.68), we derive\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=\\frac{4 \\mathrm{k}_{1} \\mathrm{k}_{3} \\sqrt{100}}{\\left(\\mathrm{k}_{1}+4 \\mathrm{k}_{3}\\right) \\sqrt{\\mathrm{k}_{1}}}=116.2 \\mu \\mathrm{~A} / \\mathrm{V} \\tag{12.71}\n\\end{equation*}\n$$\n\nNow, to determine $i_{01}$, we utilize the definition of $G_{m}$ to find\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{o} 1}=\\mathrm{G}_{\\mathrm{m}}\\left(\\mathrm{v}_{1}-\\mathrm{v}_{2}\\right)=\\mathrm{G}_{\\mathrm{m}} \\mathrm{v}_{1} \\tag{12.72}\n\\end{equation*}\n$$\n\nThus, for $\\mathrm{v}_{1}=2.5 \\mathrm{mV}$, we obtain $\\mathrm{i}_{01}=0.2905 \\mu \\mathrm{~A}$. However, if $\\mathrm{v}_{1}=250 \\mathrm{mV}$, then $\\mathrm{i}_{\\mathrm{ol}}=29.05 \\mu \\mathrm{~A}$. In other words, for a $250-\\mathrm{mV}$ input voltage, the total drain current of $\\mathrm{Q}_{1}$ would be $129.05 \\mu \\mathrm{~A}$, whereas that for $Q_{2}$ would be $70.95 \\mu \\mathrm{~A}$.\n2. To compute $i_{01}$ in this case, we first note that the sum of the drain currents in $Q_{1}$ and $Q_{2}$ must equal the total bias current, $200 \\mu \\mathrm{~A}$. In other words,\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{D} 1}+\\mathrm{i}_{\\mathrm{D} 2}=2 \\mathrm{I}_{1}=200 \\mu \\mathrm{~A} \\tag{12.73}\n\\end{equation*}\n$$\n\nAnd since (using $\\mathrm{V}_{\\text {effi }}=\\mathrm{V}_{\\mathrm{GSi}}-\\mathrm{V}_{\\mathrm{tn}}$) the drain currents in $\\mathrm{Q}_{1}$ and $\\mathrm{Q}_{2}$ are expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{D} 1}=\\frac{\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}}{2}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{1}\\left(\\mathrm{v}_{\\mathrm{eff} 1}^{2}\\right) \\quad \\text { and } \\quad \\mathrm{i}_{\\mathrm{D} 2}=\\frac{\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}}{2}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{2}\\left(\\mathrm{v}_{\\mathrm{eff} 2}^{2}\\right) \\tag{12.74}\n\\end{equation*}\n$$\n\nwe can write (12.73) as\n\n$$\n\\begin{equation*}\nv_{\\mathrm{eff} 1}^{2}+\\mathrm{v}_{\\mathrm{eff} 2}^{2}=\\frac{5}{24} \\mathrm{~V}^{2} \\tag{12.75}\n\\end{equation*}\n$$\n\nThe current flowing from node $\\mathrm{v}_{\\mathrm{x}}$ to $\\mathrm{v}_{\\mathrm{y}}$ through the two triode transistors is expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{xy}}=2 \\times \\mathrm{i}_{\\mathrm{D} 3}=2 \\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{3}\\left(\\mathrm{v}_{\\mathrm{eff} 2} \\mathrm{v}_{\\mathrm{xy}}-\\frac{\\mathrm{v}_{\\mathrm{xy}}^{2}}{2}\\right) \\tag{12.76}\n\\end{equation*}\n$$\n\nwhere we have noted that $v_{\\text {eff } 3}=v_{\\text {eff } 2}$. The sum of $i_{x y}$ and $i_{D 2}$ must equal $I_{1}$, resulting in\n\n$$\n\\begin{equation*}\n960 v_{\\text {eff } 2}^{2}+576\\left(v_{\\text {eff } 2} v_{x y}-\\frac{v_{\\mathrm{xy}}^{2}}{2}\\right)=100 \\tag{12.77}\n\\end{equation*}\n$$\n\nFinally, we note that the input signal is equivalent to the following sum (the threshold voltage terms cancel):\n\n$$\n\\begin{equation*}\n-v_{\\text {eff } 2}+v_{\\mathrm{xy}}+v_{\\text {eff } 1}=v_{\\text {in }} \\tag{12.78}\n\\end{equation*}\n$$\n\nEquations (12.75), (12.77), and (12.78) can be solved using an equation solver and then selecting the solution that possesses all positive values.\n\nFor a value of $\\mathrm{v}_{\\mathrm{in}}=2.5 \\mathrm{mV}$, the following results are obtained.\n\n$$\n\\begin{align*}\n\\mathrm{v}_{\\text {eff } 1} & =0.32322 \\mathrm{~V} \\\\\n\\mathrm{v}_{\\mathrm{eff} 2} & =0.32228 \\mathrm{~V} \\\\\n\\mathrm{v}_{\\mathrm{xy}} & =0.0015648 \\mathrm{~V} \\tag{12.79}\n\\end{align*}\n$$\n\nThese values of effective gate voltages suggest that the drain currents are\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{D} 1}=100.2898 \\mu \\mathrm{~A} \\quad \\mathrm{i}_{\\mathrm{D} 2}=99.7104 \\mu \\mathrm{~A} \\tag{12.80}\n\\end{equation*}\n$$\n\nwhich, in turn, imply that\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{ol}}=\\mathrm{i}_{\\mathrm{D} 1}-100 \\mu \\mathrm{~A}=0.2898 \\mu \\mathrm{~A} \\tag{12.81}\n\\end{equation*}\n$$\n\nSuch a result is in close agreement with that of part 1.\nHowever, for the case of $\\mathrm{v}_{\\mathrm{in}}=250 \\mathrm{mV}$, we obtain\n\n$$\n\\begin{align*}\n\\mathrm{v}_{\\text {"
},
{
    "text": "An alternative method for linearizing a MOSFET differential stage involves operating the transistors predominantly in the triode region, as depicted in Figure 12.19 [Krummenacher, 1988]. It should be noted that in this configuration, the gates of transistors $Q_{3}$ and $Q_{4}$ are linked to the differential input voltage, rather than a bias voltage. Consequently, triode transistors $Q_{3}$ and $Q_{4}$ experience variable bias conditions to enhance the linearity of the circuit, as will be discussed shortly. We can ascertain that $Q_{3}$ and $Q_{4}$ are primarily in the triode region by examining the scenario of equal input signals (i.e., $v_{1}=v_{2}$ ), which leads to\n\n$$\n\\begin{equation*}\nv_{x}=v_{y}=v_{1}-v_{G S 1}=v_{1}-\\left(v_{\\text {eff } 1}+V_{t \\mathrm{t}}\\right) \\tag{12.59}\n\\end{equation*}\n$$\n\nHence, the drain-source voltages of $Q_{3}$ and $Q_{4}$ are zero. Nevertheless, their gate-source voltages are equal to those of $\\mathrm{Q}_{1}$ and $\\mathrm{Q}_{2}$, indicating that they are indeed in the triode region.\nimage_name:Fig. 12.18 A general biquad filter realized with multiple-output transconductors.\ndescription:This figure illustrates a general biquad filter, constructed with multiple-output transconductors. The circuit includes three operational amplifiers (Gm1, Gm2, Gm3) and capacitors (2CA, 2CB, 2CX). The setup facilitates differential input (Vin+, Vin-) and differential output (Vout+, Vout-). Capacitors 2CA and 2CB are grounded, and 2CX connects the input to the output nodes, providing feedback and frequency-dependent response.\n\nFig. 12.18 A general biquad filter implemented using multiple-output transconductors.\nimage_name:Fig. 12.19\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: Vx, D: P, G: V1}\nname: Q2, type: NMOS, ports: {S: Vy, D: P2, G: V2}\nname: Q3, type: NMOS, ports: {S: Vy, D: Vx, G: V1}\nname: Q4, type: NMOS, ports: {S: Vy, D: Vx, G: V2}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vx, Nn: -VEE}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vy, Nn: -VEE}\n]\nextrainfo:This circuit demonstrates a linearized CMOS differential pair that employs NMOS transistors Q3 and Q4 in the triode region. The current sources are set to be equal to establish common-mode feedback. The transconductance Gm is presented in the accompanying diagram.\n\nFig. 12.19 A linearized CMOS differential pair that utilizes transistors $Q_{3}, Q_{4}$ predominantly in the triode region. The top pair of current sources can be matched to the bottom pair using a common-mode feedback scheme.\n\nTo ascertain the small-signal transconductance of this stage, we note from (12.57) that the small-signal drain-source resistance of $Q_{3}, Q_{4}$ is expressed by\n\n$$\n\\begin{equation*}\nr_{\\mathrm{ds} 3}=r_{\\mathrm{ds} 4}=\\frac{1}{2 \\mathrm{k}_{3}\\left(\\mathrm{~V}_{\\mathrm{GS} 1}-\\mathrm{V}_{\\mathrm{tn}}\\right)} \\tag{12.60}\n\\end{equation*}\n$$\n\nHere, we have assumed that $Q_{3}$ and $Q_{4}$ are matched devices and have defined\n\n$$\n\\begin{equation*}\n\\mathrm{k}_{3}=\\frac{\\mu_{\\mathrm{n}} \\mathrm{Cox}_{\\mathrm{ox}}}{2}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{3} \\tag{12.61}\n\\end{equation*}\n$$\n\nObserve that in this circuit, the influence of the fluctuating gate-source voltages of $Q_{1}$ and $Q_{2}$ cannot be neglected as their drain currents are not constant (as seen in Fig. 12.15). The small-signal source resistance values of $Q_{1}$ and $Q_{2}$ are calculated by\n\n$$\n\\begin{equation*}\nr_{s 1}=r_{s 2}=\\frac{1}{g_{m 1}}=\\frac{1}{2 k_{1}\\left(V_{\\mathrm{GS} 1}-V_{t n}\\right)} \\tag{12.62}\n\\end{equation*}\n$$\n\nEmploying the small-signal T model, we determine that the small-signal output current $i_{01}$ is equivalent to\n\n$$\n\\begin{equation*}\ni_{01}=\\frac{v_{1}-v_{2}}{r_{s 1}+r_{s 2}+\\left(r_{d s 3} \\| r_{d s 4}\\right)} \\tag{12.63}\n\\end{equation*}\n$$\n\nConsequently, defining $G_{m} \\equiv i_{01} /\\left(v_{1}-v_{2}\\right)$, we obtain\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=\\frac{1}{\\mathrm{r}_{\\mathrm{s} 1}+\\mathrm{r}_{\\mathrm{s} 2}+\\left(\\mathrm{r}_{\\mathrm{ds} 3} \\| \\mathrm{r}_{\\mathrm{ds} 4}\\right)} \\tag{12.64}\n\\end{equation*}\n$$\n\nThis can be demonstrated to be\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=\\frac{4 \\mathrm{k}_{1} \\mathrm{k}_{3}\\left(\\mathrm{~V}_{\\mathrm{GS} 1}-\\mathrm{V}_{\\mathrm{tn}}\\right)}{\\mathrm{k}_{1}+4 \\mathrm{k}_{3}} \\tag{12.65}\n\\end{equation*}\n$$\n\nIn the end, to modify this outcome so that it pertains to current, we note that\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{1}=\\mathrm{k}_{1}\\left(\\mathrm{~V}_{\\mathrm{GS} 1}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\tag{12.66}\n\\end{equation*}\n$$\n\nor, alternatively,\n\n$$\n\\begin{equation*}\n\\left(\\mathrm{V}_{\\mathrm{GS} 1}-\\mathrm{V}_{\\mathrm{tn}}\\right)=\\sqrt{\\frac{\\mathrm{I}_{1}}{\\mathrm{k}_{1}}} \\tag{12.67}\n\\end{equation*}\n$$\n\nwhich leads to\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=\\frac{4 \\mathrm{k}_{1} \\mathrm{k}_{3} \\sqrt{\\mathrm{I}_{1}}}{\\left(\\mathrm{k}_{1}+4 \\mathrm{k}_{3}\\right) \\sqrt{\\mathrm{k}_{1}}} \\tag{12.68}\n\\end{equation*}\n$$\n\nConsequently, we see that the transconductance of this transconductor can be adjusted by modifying the bias current, $I_{1}$. Note also that the transconductance is proportional to the square root of the bias current, in contrast to the linear relationship observed in the case of a bipolar transconductor.\n\nTo understand how varying bias conditions for the triode transistors enhance the linearity of this circuit, first consider the case of slight differences in $\\mathrm{V}_{1}$ and $\\mathrm{V}_{2}$ (e.g., 100 mV ). In this scenario with small-input signals, $Q_{3}$ and $Q_{4}$ essentially behave as two source degeneration resistors. Thus, linearity is improved (assuming $r_{\\mathrm{ds} 3}>>r_{s 1}$ ) compared to a simple differential pair, as transistors in the triode region are more linear than the source resistances of transistors in the active region. In other words, for a small-input-signal value, the linearity of this circuit is akin to that of a circuit in which the gates of $Q_{3}, Q_{4}$ are linked to fixed-bias voltages. However, if the gates of $Q_{3}, Q_{4}$ were linked to fixed-bias voltages, (12.54) shows that, as their drain-source voltage increases, the drain current is reduced below that expected in a linear relationship due to the squared $\\mathrm{V}_{\\mathrm{DS}}$ term. Furthermore, the changing values of $\\mathrm{V}_{\\mathrm{GS} 1}$ and $\\mathrm{V}_{\\mathrm{GS} 2}$ (due to current changes) also reduce the value of $\\mathrm{V}_{\\mathrm{DS}}$, and hence the transconductance of the cell for large input signals. To mitigate this reduction in transconductance for large input signals, the gates of $Q_{3}$ or $Q_{4}$ are connected to the input signals as illustrated. As the input signal increases, the small-signal resistance of one of the two triode transistors in parallel, $Q_{3}$ or $Q_{4}$, is reduced. This reduced resistance endeavors to enhance the transconductance, resulting in a partial cancellation of the decreasing transconductance value. Thus, by selecting an appropriate ratio of $k_{1} / k_{3}$, a more stable transconductance (and hence better linearity) is achieved. For a 4-MHz filter presented in [Krummenacher, 1988], a ratio of $k_{1} / k_{3}=6.7$ is utilized to achieve distortion levels approximately 50 dB below the maximum output signal level of 350 mVrms. Moreover, an extension of this method is presented in [Silva-Martinez, 1991], where the input signal is split across two input stages to further improve the distortion performance.\n\n#### EXAMPLE 12.6\n\nConsider the circuit of Fig. 12.19 with the following values: $I_{1}=100 \\mu \\mathrm{~A}, \\quad \\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}=96 \\mu \\mathrm{~A} / \\mathrm{V}^{2}$, $(\\mathrm{W} / \\mathrm{L})_{1}=(\\mathrm{W} / \\mathrm{L})_{2}=20,(\\mathrm{~W} / \\mathrm{L})_{3}=(\\mathrm{W} / \\mathrm{L})_{4}=3$, and $\\mathrm{v}_{2}=0 \\mathrm{~V}$.\n\n1. Assuming a perfectly linear transconductor, apply (12.68) to determine $i_{01}$ when $v_{1}$ equals 2.5 mV and 250 mV .\n2. Suppose the gates of $Q_{3}, Q_{4}$ are grounded, and utilize classical models for both the triode and active regions. Calculate the actual value of $i_{01}$ when $v_{1}$ equals 2.5 mV and 250 mV . Compare these results with those in part 1.\n3. Repeat part 2, assuming the gates of $\\mathrm{Q}_{3}, \\mathrm{Q}_{4}$ are linked to the input signals as depicted in Fig. 12.19.\n\n#### Solution\n\n1. For the given values, we have\n\n$$\n\\begin{align*}\n& \\mathrm{k}_{1}=\\frac{96}{2} \\times 20=960 \\mu \\mathrm{~A} / \\mathrm{V}^{2}  \\tag{12.69}\\\\\n& \\mathrm{k}_{3}=\\frac{96}{2} \\times 3=144 \\mu \\mathrm{~A} / \\mathrm{V}^{2} \\tag{12.70}\n\\end{align*}\n$$\n\nand substituting the above values into (12.68), we get\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=\\frac{4 \\mathrm{k}_{1} \\mathrm{k}_{3} \\sqrt{100}}{\\left(\\mathrm{k}_{1}+4 \\mathrm{k}_{3}\\right) \\sqrt{\\mathrm{k}_{1}}}=116.2 \\mu \\mathrm{~A} / \\mathrm{V} \\tag{12.71}\n\\end{equation*}\n$$\n\nNow, to find $i_{01}$, we use the definition of $G_{m}$ to derive\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{o} 1}=\\mathrm{G}_{\\mathrm{m}}\\left(\\mathrm{v}_{1}-\\mathrm{v}_{2}\\right)=\\mathrm{G}_{\\mathrm{m}} \\mathrm{v}_{1} \\tag{12.72}\n\\end{equation*}\n$$\n\nThus, for $\\mathrm{v}_{1}=2.5 \\mathrm{mV}$, we have $\\mathrm{i}_{01}=0.2905 \\mu \\mathrm{~A}$. However, if $\\mathrm{v}_{1}=250 \\mathrm{mV}$, then $\\mathrm{i}_{\\mathrm{ol}}=29.05 \\mu \\mathrm{~A}$. In other words, for a $250-\\mathrm{mV}$ input voltage, the total drain current of $\\mathrm{Q}_{1}$ would be $129.05 \\mu \\mathrm{~A}$, whereas that for $Q_{2}$ would be $70.95 \\mu \\mathrm{~A}$.\n2. To find $i_{01}$ in this scenario, we first note that the sum of the drain currents in $Q_{1}$ and $Q_{2}$ must equal the total bias current, $200 \\mu \\mathrm{~A}$. In other words,\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{D} 1}+\\mathrm{i}_{\\mathrm{D} 2}=2 \\mathrm{I}_{1}=200 \\mu \\mathrm{~A} \\tag{12.73}\n\\end{equation*}\n$$\n\nAnd since (using $\\mathrm{V}_{\\text {effi }}=\\mathrm{V}_{\\mathrm{GSi}}-\\mathrm{V}_{\\mathrm{tn}}$ ) the drain currents in $\\mathrm{Q}_{1}$ and $\\mathrm{Q}_{2}$ are given by\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{D} 1}=\\frac{\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}}{2}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{1}\\left(\\mathrm{v}_{\\mathrm{eff} 1}^{2}\\right) \\quad \\text { and } \\quad \\mathrm{i}_{\\mathrm{D} 2}=\\frac{\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}}{2}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{2}\\left(\\mathrm{v}_{\\mathrm{eff} 2}^{2}\\right) \\tag{12.74}\n\\end{equation*}\n$$\n\nwe can express (12.73) as\n\n$$\n\\begin{equation*}\nv_{\\mathrm{eff} 1}^{2}+\\mathrm{v}_{\\mathrm{eff} 2}^{2}=\\frac{5}{24} \\mathrm{~V}^{2} \\tag{12.75}\n\\end{equation*}\n$$\n\nThe current from node $\\mathrm{v}_{\\mathrm{x}}$ to $\\mathrm{v}_{\\mathrm{y}}$ through the two triode transistors is expressed by\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{xy}}=2 \\times \\mathrm{i}_{\\mathrm{D} 3}=2 \\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{3}\\left(\\mathrm{v}_{\\mathrm{eff} 2} \\mathrm{v}_{\\mathrm{xy}}-\\frac{\\mathrm{v}_{\\mathrm{xy}}^{2}}{2}\\right) \\tag{12.76}\n\\end{equation*}\n$$\n\nwhere we have noted that $v_{\\text {eff } 3}=v_{\\text {eff } 2}$. The sum of $i_{x y}$ and $i_{D 2}$ must equal $I_{1}$, resulting in\n\n$$\n\\begin{equation*}\n960 v_{\\text {eff } 2}^{2}+576\\left(v_{\\text {eff } 2} v_{x y}-\\frac{v_{\\mathrm{xy}}^{2}}{2}\\right)=100 \\tag{12.77}\n\\end{equation*}\n$$\n\nFinally, we observe that the input signal is equivalent to the sum of the following (the threshold voltage terms cancel):\n\n$$\n\\begin{equation*}\n-v_{\\text {eff } 2}+v_{\\mathrm{xy}}+v_{\\text {eff } 1}=v_{\\text {in }} \\tag{12.78}\n\\end{equation*}\n$$\n\nEquations (12.75), (12.77), and (12.78) can be solved using an equation solver and then selecting the solution that yields all positive values.\n\nFor a value of $\\mathrm{v}_{\\mathrm{in}}=2.5 \\mathrm{mV}$, the following results are obtained.\n\n$$\n\\begin{align*}\n\\mathrm{v}_{\\text {eff } 1} & =0.32322 \\mathrm{~V} \\\\\n\\mathrm{v}_{\\mathrm{eff} 2} & =0.32228 \\mathrm{~V} \\\\\n\\mathrm{v}_{\\mathrm"
},
{
    "text": "Figure 12.19 illustrates a technique for linearizing a MOSFET differential stage by utilizing transistors that predominantly operate in the triode region. As depicted, the gates of transistors $Q_3$ and $Q_4$ are linked directly to the differential input voltage instead of a biased voltage. This setup causes the triode transistors $Q_3$ and $Q_4$ to experience variable biasing conditions, which enhances the linearity of the circuit (to be elaborated further). To confirm that $Q_3$ and $Q_4$ are predominantly in the triode region, consider the scenario of equal input signals (i.e., $v_1 = v_2$). This leads to the following expression:\n\n$$\n\\begin{equation*}\nv_x = v_y = v_1 - v_{GS1} = v_1 - \\left(v_{eff1} + V_{tt}\\right) \\tag{12.59}\n\\end{equation*}\n$$\n\nConsequently, the drain-source voltages of $Q_3$ and $Q_4$ are both zero. Nonetheless, their gate-source voltages match those of $Q_1$ and $Q_2$, indicating that they are indeed within the triode region."
},
{
    "text": "The original text describes a circuit design for a MOSFET differential stage using transistors primarily in the triode region. The circuit's linearity is enhanced by connecting the gates of transistors \\( Q_3 \\) and \\( Q_4 \\) to the differential input voltage, rather than a bias voltage. This arrangement subjects \\( Q_3 \\) and \\( Q_4 \\) to varying bias conditions. For equal input signals, the drain-source voltages of these transistors are zero, confirming their operation in the triode region.\n\nThe text also presents a general biquad filter realized using multiple-output transconductors, featuring operational amplifiers and capacitors configured for differential input and output. The filter's response is frequency-dependent, with capacitors providing feedback.\n\nAnother circuit discussed is a linearized CMOS differential pair with \\( Q_3 \\) and \\( Q_4 \\) in the triode region, using current sources for common-mode feedback. The small-signal transconductance is analyzed, considering the drain-source resistance and source resistance values for the transistors. The effect of varying gate-source voltages on the transconductance is also discussed.\n\nAn example problem is presented, where the circuit's transconductance is calculated for different input voltages, considering both linear and non-linear transistor behavior. The example demonstrates how the circuit's linearity can be improved by adjusting the bias current.\n\nLastly, the text describes a differential transconductor circuit with constant drain-source voltages, where the transconductance is controlled by a voltage \\( V_C \\) and a common-mode voltage \\( V_{CM} \\) is applied. The circuit is balanced with two identical branches, each containing an NMOS transistor pair controlled by an op-amp."
},
{
    "text": "A depiction of a MOSFET differential stage linearization technique is presented in Fig. 12.19 [Krummenacher, 1988], where the transistors are mainly operated in the triode region. An important feature here is the connection of the gates of $Q_{3}, Q_{4}$ to the differential input voltage instead of a bias voltage. This configuration subjects $Q_{3}$ and $Q_{4}$ to dynamic bias conditions, enhancing the circuit's linearity.\n\nThe triode region operation of $Q_{3}$ and $Q_{4}$ can be confirmed by examining the condition of equal input signals ($v_{1}=v_{2}$), leading to\n\n$$\n\\begin{equation*}\nv_{x}=v_{y}=v_{1}-v_{G S 1}=v_{1}-\\left(v_{\\text {eff } 1}+V_{t \\mathrm{t}}\\right) \\tag{12.59}\n\\end{equation*}\n$$\n\nConsequently, the drain-source voltages for $Q_{3}, Q_{4}$ are zero, while their gate-source voltages match those of $\\mathrm{Q}_{1}, \\mathrm{Q}_{2}$, confirming\nA Fig. 12.18 displays a b biquad filter implemented using multiple-output transconductors. The circuit employs\nFigure 12.18 illustrates a general biquad filter configuration that utilizes multiple-output transconductors. The circuit"
},
{
    "text": "The provided text discusses a technique for linearizing a MOSFET differential stage by operating transistors in the triode region, as depicted in Fig. 12.19 [Krummenacher, 1988]. A key aspect of this design is the connection of the gates of transistors $Q_{3}$ and $Q_{4}$ to the differential input voltage, rather than a static bias voltage. This configuration allows $Q_{3}$ and $Q_{4}$ to experience variable bias conditions, enhancing the circuit's linearity.\n\nWhen the input signals are equal ($v_{1} = v_{2}$), the drain-source voltages of $Q_{3}$ and $Q_{4}$ are zero, and their gate-source voltages match those of $Q_{1}$ and $Q_{2}$, indicating operation in the triode region. Fig. 12.18 illustrates a general biquad filter realized with multiple-output transconductors, featuring three operational amplifiers and capacitors configured for differential input and output.\n\nThe circuit in Fig. 12.19 utilizes NMOS transistors $Q_{3}$ and $Q_{4}$ in the triode region, with current sources set equal for common-mode feedback. The small-signal transconductance of this stage is determined by the drain-source resistance of $Q_{3}$ and $Q_{4}$, and the source resistance of $Q_{1}$ and $Q_{2}$, which is not constant due to varying gate-source voltages.\n\nThe small-signal output current, $i_{01}$, is calculated using the T model, and the transconductance, $G_{m}$, is defined as $i_{01}$ divided by the differential input voltage. It is shown that $G_{m}$ can be tuned by adjusting the bias current, $I_{1}$, and is proportional to the square root of $I_{1}$.\n\nThe text further explains how the varying bias conditions for the triode transistors improve the circuit's linearity, especially for small input signals. For larger input signals, the connection of the gates of $Q_{3}$ or $Q_{4}$ to the input signals helps maintain a stable transconductance and linearity by partially counteracting the decrease in transconductance.\n\nAn example is provided with specific circuit values, and the steps to calculate the output current, $i_{01}$, are outlined for different scenarios: assuming a perfectly linear transconductor, with gates connected to ground, and with gates connected to the input signals as in Fig. 12.19.\n\nThe final part of the text describes a differential transconductor circuit (Fig. 12.20) that uses NMOS transistors in the triode region with constant drain-source voltages. The transconductance is controlled by a voltage $V_{C}$, and a common-mode voltage $V_{CM}$ is applied. The circuit is balanced with two identical branches, each containing an NMOS transistor pair controlled by an op-amp."
},
{
    "text": "Another approach to linearize a MOSFET differential stage, which primarily uses transistors in the triode region, is illustrated in Fig. 12.19 [Krummenacher, 1988]. It is worth to note\nI apologize\nCertainly apologize for the confusion earlier. Here is the rephrased text:\n\nA different method for linearizing a MOSFET differential stage, with the transistors operate mainly operated in the triode region, is illustrated in Fig. 12.19 [ [Krummenacher, 1988]. It should be noted that the this configuration, the gates of transistors $Q_{3}$ and $Q_{4}$ are linked to the differential input voltage instead of being connected to a bias voltage. Consequently, transistors $Q_{3}$ and $Q_{4}$ experience varying bias conditions, which enhances the linearity of the circuit (as will be discussed shortly). To confirm that $Q_{3}$ and $Q_{4}$ are typically in the triode region, we examine the scenario with the input signals are equal (i.e., $v_{1}=v_{2}$), leading to:\n\n$$\n\\_{x}=v_{y}=v_{1}-v_{G S 1}=v_{1}-\\left(v_{\\text {eff } 1}+V_{t \\mathrm{t}}\\right)\n$$\n\nHence, the drain-source voltages of $Q_{3}$ and $Q_{4}$ are both zero. Nevertheless, their gate-source voltages match those of $\\mathrm{Q}_{1}$ and $\\mathrm{Q}_{2}$, indicating that they are indeed operating in the triode region.\n\nThe circuit represented in Fig. 12.18 is a general biquad filter implemented using multiple-output transconductors. It comprises three operational amplifiers (Gm1, Gm2, Gm3) and capacitors (2CA, 2CB, 2CX). The setup supports differential input (Vin+, Vin-) and differential output (Vout+, Vout-). Capacitors 2CA and 2CB are grounded, while 2CX links the input to the output nodes, providing feedback and a frequency-dependent response.\n\nFig. 12.19 illustrates a linearized CMOS differential pair utilizing NMOS transistors $Q_{3}$ and $Q_{4}$ primarily in the triode region. The top pair of current sources can be matched to the bottom pair via a common-mode feedback mechanism.\n\nTo calculate the small-signal transconductance of this stage, we refer to (12.57) and note that the small-signal drain-source resistance of $Q_{3}$ and $Q_{4}$ is expressed as\n\n$$\nr_{\\mathrm{ds} 3}=r_{\\mathrm{ds} 4}=\\frac{1}{2 \\mathrm{k}_{3}\\left(\\mathrm{~V}_{\\mathrm{GS} 1}-\\mathrm{V}_{\\mathrm{tn}}\\right)}\n$$\n\nwhere it is assumed that $Q_{3}$ and $Q_{4}$ are matched devices, and we have defined\n\n$$\n\\mathrm{k}_{3}=\\frac{\\mu_{\\mathrm{n}} \\mathrm{Cox}_{\\mathrm{ox}}}{2}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{3}\n$$\n\nIn this circuit, the fluctuating gate-source voltages of $Q_{1}$ and $Q_{2}$ cannot be disregarded since their drain currents are not constant (unlike in Fig. 12.15). The small-signal source resistance values of $Q_{1}$ and $Q_{2}$ are given by\n\n$$\nr_{s 1}=r_{s 2}=\\frac{1}{g_{m 1}}=\\frac{1}{2 k_{1}\\left(V_{\\mathrm{GS} 1}-V_{t n}\\right)}\n$$\n\nUtilizing the small-signal T model, we determine the small-signal output current $i_{01}$ to be\n\n$$\ni_{01}=\\frac{v_{1}-v_{2}}{r_{s 1}+r_{s 2}+\\left(r_{d s 3} \\| r_{d s 4}\\right)}\n$$\n\nDefining $G_{m} \\equiv i_{01} /\\left(v_{1}-v_{2}\\right)$, we obtain\n\n$$\n\\mathrm{G}_{\\mathrm{m}}=\\frac{1}{\\mathrm{r}_{\\mathrm{s} 1}+\\mathrm{r}_{\\mathrm{s} 2}+\\left(\\mathrm{r}_{\\mathrm{ds} 3} \\| \\mathrm{r}_{\\mathrm{ds} 4}\\right)}\n$$\n\nwhich can be shown to be\n\n$$\n\\mathrm{G}_{\\mathrm{m}}=\\frac{4 \\mathrm{k}_{1} \\mathrm{k}_{3}\\left(\\mathrm{~V}_{\\mathrm{GS} 1}-\\mathrm{V}_{\\mathrm{tn}}\\right)}{\\mathrm{k}_{1}+4 \\mathrm{k}_{3}}\n$$\n\nTo express this result in terms of current, we observe that\n\n$$\n\\mathrm{I}_{1}=\\mathrm{k}_{1}\\left(\\mathrm{~V}_{\\mathrm{GS} 1}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2}\n$$\n\nor equivalently,\n\n$$\n\\left(\\mathrm{V}_{\\mathrm{GS} 1}-\\mathrm{V}_{\\mathrm{tn}}\\right)=\\sqrt{\\frac{\\mathrm{I}_{1}}{\\mathrm{k}_{1}}}\n$$\n\nwhich results in\n\n$$\n\\mathrm{G}_{\\mathrm{m}}=\\frac{4 \\mathrm{k}_{1} \\mathrm{k}_{3} \\sqrt{\\mathrm{I}_{1}}}{\\left(\\mathrm{k}_{1}+4 \\mathrm{k}_{3}\\right) \\sqrt{\\mathrm{k}_{1}}}\n$$\n\nTherefore, we conclude that the transconductance of this transconductor can be adjusted by altering the bias current, $I_{1}$. Additionally, the transconductance is proportional to the square root of the bias current, in contrast to the linear relationship observed in bipolar transconductors.\n\nTo understand how the varying bias conditions for the triode transistors enhance the linearity of the circuit, consider the case of minor differences in $\\mathrm{V}_{1}$ and $\\mathrm{V}_{2}$ (for instance, 100 mV). In this scenario with small input signals, $Q_{3}$ and $Q_{4}$ behave as source degeneration resistors. Consequently, the linearity is improved (assuming $r_{\\mathrm{ds} 3}>>r_{s 1}$) compared to a simple differential pair, as transistors in the triode region are more linear than those in the active region with source resistances. For small input signals, the linearity of this circuit is akin to that of a circuit where the gates of $Q_{3}$ and $Q_{4}$ are connected to fixed bias voltages. However, if the gates of $Q_{3}$ and $Q_{4}$ were connected to fixed bias voltages, (12.54) indicates that as their drain-source voltage increases, the drain current decreases below the level expected in a linear relationship due to the squared $\\mathrm{V}_{\\mathrm{DS}}$ term. Moreover, the changing $\\mathrm{V}_{\\mathrm{GS} 1}$ and $\\mathrm{V}_{\\mathrm{GS} 2}$ values (caused by current changes) also diminish $\\mathrm{V}_{\\mathrm{DS}}$, thereby reducing the transconductance of the cell for large input signals. To counteract this decrease in transconductance for large input signals, the gates of $Q_{3}$ or $Q_{4}$ are connected to the input signals as shown. As the input signal increases, the small-signal resistance of one of the triode transistors in parallel, $Q_{3}$ or $Q_{4}$, is decreased. This reduced resistance attempts to elevate the transconductance, partially offsetting the diminishing transconductance value. Thus, by selecting an appropriate ratio of $k_{1} / k_{3}$, a more consistent transconductance (and consequently better linearity) is achieved. For a 4-MHz filter detailed in [Krummenacher, 1988], a ratio of $k_{1} / k_{3}=6.7$ is employed to attain distortion levels approximately 50 dB below the maximum output signal level of 350 mVrms. Furthermore, an extension of this methodology is presented in [Silva-Martinez, 1991], where the input signal is distributed across two input stages to further enhance distortion performance."
},
{
    "text": "A method for linearizing a MOSFET differential stage, utilizing transistors mainly in the triode region, is illustrated in Fig. 12.19 [Krummenacher, 1988]. It's important to observe that the gates of $Q_{3}$ and $Q_{4}$ transistors are linked to the differential input voltage instead of a bias voltage. Consequently, triode transistors $Q_{3}$ and $Q_{4}$ experience fluctuating bias conditions to enhance the linearity of the circuit (as will be discussed shortly). To confirm that $Q_{3}$ and $Q_{4}$ are predominantly in the triode region, we examine the scenario with equal input signals (i.e., $v_{1}=v_{2}$), leading to\n\n$$\n\\begin{equation*}\nv_{x}=v_{y}=v_{1}-v_{G S 1}=v_{1}-\\left(v_{\\text {eff } 1}+V_{t \\mathrm{t}}\\right) \\tag{12.59}\n\\end{equation*}\n$$\n\nHence, the drain-source voltages of $Q_{3}$ and $Q_{4}$ are both zero. However, their gate-source voltages match those of $\\mathrm{Q}_{1}$ and $\\mathrm{Q}_{2}$, indicating that they are indeed in the triode region.\n\nFig. 12.18 depicts a general biquad filter implemented using multiple-output transconductors. The circuit incorporates three operational amplifiers (Gm1, Gm2, Gm3) and capacitors (2CA, 2CB, 2CX). It supports differential input (Vin+, Vin-) and differential output (Vout+, Vout-). Capacitors 2CA and 2CB are grounded, whereas 2CX links the input to the output nodes, providing feedback and frequency-dependent response.\n\nFig. 12.19 showcases a linearized CMOS differential pair using NMOS transistors $Q_{3}$ and $Q_{4}$ in the triode region. The current sources are adjusted to maintain common-mode feedback. The transconductance Gm is specified by the formula presented in the diagram.\n\nTo ascertain the small-signal transconductance of this stage, we note from (12.57) that the small-signal drain-source resistance of $Q_{3}$ and $Q_{4}$ is expressed as\n\n$$\n\\begin{equation*}\nr_{\\mathrm{ds} 3}=r_{\\mathrm{ds} 4}=\\frac{1}{2 \\mathrm{k}_{3}\\left(\\mathrm{~V}_{\\mathrm{GS} 1}-\\mathrm{V}_{\\mathrm{tn}}\\right)} \\tag{12.60}\n\\end{equation*}\n$$\n\nwhere we have assumed that $Q_{3}$ and $Q_{4}$ are matched devices and have defined\n\n$$\n\\begin{equation*}\n\\mathrm{k}_{3}=\\frac{\\mu_{\\mathrm{n}} \\mathrm{Cox}_{\\mathrm{ox}}}{2}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{3} \\tag{12.61}\n\\end{equation*}\n$$\n\nIn this circuit, the impact of the fluctuating gate-source voltages of $Q_{1}$ and $Q_{2}$ cannot be disregarded since their drain currents are not constant (as in Fig. 12.15). The small-signal source resistance values of $Q_{1}$ and $Q_{2}$ are given by\n\n$$\n\\begin{equation*}\nr_{s 1}=r_{s 2}=\\frac{1}{g_{m 1}}=\\frac{1}{2 k_{1}\\left(V_{\\mathrm{GS} 1}-V_{t n}\\right)} \\tag{12.62}\n\\end{equation*}\n$$\n\nUtilizing the small-signal T model, we determine the small-signal output current of $i_{01}$ to be equal to\n\n$$\n\\begin{equation*}\ni_{01}=\\frac{v_{1}-v_{2}}{r_{s 1}+r_{s 2}+\\left(r_{d s 3} \\| r_{d s 4}\\right)} \\tag{12.63}\n\\end{equation*}\n$$\n\nThus, defining $G_{m} \\equiv i_{01} /\\left(v_{1}-v_{2}\\right)$, we have\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=\\frac{1}{\\mathrm{r}_{\\mathrm{s} 1}+\\mathrm{r}_{\\mathrm{s} 2}+\\left(\\mathrm{r}_{\\mathrm{ds} 3} \\| \\mathrm{r}_{\\mathrm{ds} 4}\\right)} \\tag{12.64}\n\\end{equation*}\n$$\n\nwhich can be shown to be\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=\\frac{4 \\mathrm{k}_{1} \\mathrm{k}_{3}\\left(\\mathrm{~V}_{\\mathrm{GS} 1}-\\mathrm{V}_{\\mathrm{tn}}\\right)}{\\mathrm{k}_{1}+4 \\mathrm{k}_{3}} \\tag{12.65}\n\\end{equation*}\n$$\n\nUltimately, to adjust this result in terms of current, we note that\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{1}=\\mathrm{k}_{1}\\left(\\mathrm{~V}_{\\mathrm{GS} 1}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\tag{12.66}\n\\end{equation*}\n$$\n\nor, equivalently,\n\n$$\n\\begin{equation*}\n\\left(\\mathrm{V}_{\\mathrm{GS} 1}-\\mathrm{V}_{\\mathrm{tn}}\\right)=\\sqrt{\\frac{\\mathrm{I}_{1}}{\\mathrm{k}_{1}}} \\tag{12.67}\n\\end{equation*}\n$$\n\nwhich leads to\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=\\frac{4 \\mathrm{k}_{1} \\mathrm{k}_{3} \\sqrt{\\mathrm{I}_{1}}}{\\left(\\mathrm{k}_{1}+4 \\mathrm{k}_{3}\\right) \\sqrt{\\mathrm{k}_{1}}} \\tag{12.68}\n\\end{equation*}\n$$\n\nThus, we observe that the transconductance of this transconductor can be fine-tuned by altering the bias current, $I_{1}$. Additionally, the transconductance is proportional to the square root of the bias current, unlike the linear relation observed in bipolar transconductors.\n\nTo comprehend how the fluctuating bias conditions for the triode transistors enhance the linearity of the circuit, consider the scenario with minor discrepancies in $\\mathrm{V}_{1}$ and $\\mathrm{V}_{2}$ (e.g., 100 mV). In this case of small input signals, $Q_{3}$ and $Q_{4}$ essentially function as two source degeneration resistors. Consequently, linearity improves (assuming $r_{\\mathrm{ds} 3}>>r_{s 1}$) compared to a simple differential pair, since transistors in triode are more linear than the source resistances of transistors in the active region. In other words, for a small input signal value, the linearity of this circuit resembles that of a circuit where the gates of $Q_{3}$ and $Q_{4}$ are connected to fixed-bias voltages. However, if the gates of $Q_{3}$ and $Q_{4}$ were connected to fixed-bias voltages, (12.54) demonstrates that as their drain-source voltage increases, the drain current decreases below the value expected in a linear relationship due to the squared $\\mathrm{V}_{\\mathrm{DS}}$ term. Furthermore, the changing values of $\\mathrm{V}_{\\mathrm{GS} 1}$ and $\\mathrm{V}_{\\mathrm{GS} 2}$ (caused by current fluctuations) also diminish the value of $\\mathrm{V}_{\\mathrm{DS}}$, and hence the transconductance of the cell for large input signals. To counteract this reduction in transconductance for large input signals, the gates of $Q_{3}$ or $Q_{4}$ are connected to the input signals as illustrated. Now, as the input signal rises, the small-signal resistance of one of the two triode transistors in parallel, $Q_{3}$ or $Q_{4}$, is diminished. This reduced resistance strives to elevate the transconductance, partially offsetting the decreasing transconductance value. Hence, by selecting an appropriate ratio of $k_{1} / k_{3}$, a more stable transconductance (and consequently improved linearity) is achieved. For a 4-MHz filter presented in [Krummenacher, 1988], a ratio of $k_{1} / k_{3}=6.7$ is employed to attain distortion levels approximately 50 dB below the maximum output signal level of 350 mVrms. Moreover, an extension of this approach is discussed in [Silva-Martinez, 1991], where the input signal is divided between two input stages to further enhance the distortion performance.\n\n#### EXAMPLE 12.6\n\nConsider the circuit of Fig. 12.19 with the following parameters: $I_{1}=100 \\mu \\mathrm{~A}, \\quad \\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}=96 \\mu \\mathrm{~A} / \\mathrm{V}^{2}$, $(\\mathrm{W} / \\mathrm{L})_{1}=(\\mathrm{W} / \\mathrm{L})_{2}=20,(\\mathrm{~W} / \\mathrm{L})_{3}=(\\mathrm{W} / \\mathrm{L})_{4}=3$, and $\\mathrm{v}_{2}=0 \\mathrm{~V}$.\n\n1. Assuming a perfectly linear transconductor, use (12.68) to calculate $i_{01}$ when $v_{1}$ equals 2.5 mV and 250 mV.\n2. Suppose the gates of $Q_{3}$ and $Q_{4}$ are connected to ground and employ classical models for both the triode and active regions. Determine the true value of $i_{01}$ when $v_{1}$ equals 2.5 mV and 250 mV. Compare your findings with those in part 1.\n3. Repeat part 2, assuming the gates of $Q_{3}$ and $Q_{4}$ are connected to the input signals as depicted in Fig. 12.19.\n\n#### Solution\n\n1. For the specified values, we obtain\n\n$$\n\\begin{align*}\n& \\mathrm{k}_{1}=\\frac{96}{2} \\times 20=960 \\mu \\mathrm{~A} / \\mathrm{V}^{2}  \\tag{12.69}\\\\\n& \\mathrm{k}_{3}=\\frac{96}{2} \\times 3=144 \\mu \\mathrm{~A} / \\mathrm{V}^{2} \\tag{12.70}\n\\end{align*}\n$$\n\nand substituting these values into (12.68), we get\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=\\frac{4 \\mathrm{k}_{1} \\mathrm{k}_{3} \\sqrt{100}}{\\left(\\mathrm{k}_{1}+4 \\mathrm{k}_{3}\\right) \\sqrt{\\mathrm{k}_{1}}}=116.2 \\mu \\mathrm{~A} / \\mathrm{V} \\tag{12.71}\n\\end{equation*}\n$$\n\nTo determine $i_{01}$, we utilize\nA technique for linearizing a MOSFET differential stage is presented, where the primary operation of the transistors is in the triode region, as illustrated\nA technique for linearizing a MOSFET differential stage is demonstrated, where the primary operation of the transistors is in the triode region, as shown in Fig. 12.19 [Krummenacher, 1988]. It's important to note that the gates of $Q_{3}$ and $Q_{4}$ transistors are connected to the differential input voltage rather than a bias voltage. Consequently, triode transistors $Q_{3}$ and $Q_{4}$ experience fluctuating bias conditions to enhance the linearity of the circuit (as will be discussed shortly). To confirm that $Q_{3}$ and $Q_{4}$ are predominantly in the triode region, we examine the scenario with equal input signals (i.e., $v_{1}=v_{2}$), leading to\n\n$$\n\\begin{equation*}\nv_{x}=v_{y}=v_{1}-v_{G S 1}=v_{1}-\\left(v_{\\text {eff } 1}+V_{t \\mathrm{t}}\\right) \\tag{12.59}\n\\end{equation*}\n$$\n\nHence, the drain-source voltages of $Q_{3}$ and $Q_{4}$ are both zero. However, their gate-source voltages match those of $\\mathrm{Q}_{1}$ and $\\mathrm{Q}_{2}$, indicating that they are indeed in the triode region.\n\nFig. 12.18 depicts\nA linearization technique for a MOSFET differential stage is presented, which relies\nA linearization technique for a MOSFET differential stage is presented, which primarily employs\nA linearization technique for a MOSFET differential stage is presented, which primarily utilizes the use of transistors operating within the triode region, as depicted in Fig. 12.19 [Krummenacher, 1988]. It is worth noting that the gates of transistors $Q_{3}$ and $Q_{4}$ are connected to the differential input voltage as opposed to a fixed bias voltage. This configuration leads to varying bias conditions for the triode transistors $Q_{3}$ and $Q_{4}$, which is done to enhance the circuit\nA linearization technique for a MOSFET differential stage is presented, which primarily involves the use of transistors operating within the triode region, as depicted in Fig. 12.19 [Krummenacher, 1988]. It is worth noting that the gates of transistors $Q_{3}$ and $Q_{4}$ are connected to the differential input voltage as opposed to a fixed bias voltage. This configuration leads to varying bias conditions for the triode transistors $Q_{3}$ and $Q_{4}$, which is done to enhance the linearity of the circuit, as will be explained further on. To confirm that $Q_{3}$ and $Q_{4}$ operate mainly in the triode region, we consider the case where the input signals are equal (i.e., $v_{1}=v_{2}$), which results in\n\n$$\n\\begin{equation*}\nv_{x}=v_{y}=v_{1}-v_{G S 1}=v_{1}-\\left(v_{\\text {eff } 1}+V_{t \\mathrm{t}}\\right) \\tag{12.59}\n\\end{equation*}\n$$\n\nAs a consequence\nA linearization technique for a MOSFET differential stage is presented, which primarily involves the use of transistors operating within the triode region, as depicted in Fig. 12.19 [Krummenacher, 1988]. It is worth noting that the gates of transistors $Q_{3}$ and $Q_{4}$ are connected to the differential input voltage as opposed to a fixed bias voltage. This configuration leads to varying bias conditions for the triode transistors $Q_{3}$ and $Q_{4}$, which is done to enhance the linearity of the circuit, as will be explained further on. To confirm that $Q_{3}$ and $Q_{4}$ operate mainly in the triode region, we consider the case where the input signals are equal (i.e., $v_{1}=v_{2}$), which results in\n\n$$\n\\begin{equation*}\nv_{x}=v_{y}=v_{1}-v_{G S 1}=v_{1}-\\left(v_{\\text {eff } 1}+V_{t \\mathrm{t}}\\right) \\tag{12.59}\n\\end{equation*}\n$$\n\nAs a result, the drain-source voltages of $Q_{3}$ and $Q_{4}$ are both zero. However, their gate-source voltages match those of $\\mathrm{Q}_{1}$ and $\\mathrm{Q}_{2}$, indicating that they are indeed in the triode region."
},
{
    "text": "Fig. 12.19 illustrates an alternative method to linearize a MOSFET differential stage, employing transistors that primarily operate within the triode region, as introduced by Krummenacher in 1988. It is worth noting that the gates of transistors $Q_{3}$ and $Q_{4}$ are linked to the differential input voltage instead of a static bias voltage. Consequently, these triode transistors, $Q_{3}$ and $Q_{4}$, experience fluctuating bias conditions, which enhance the linearity of the circuit (a point that will be discussed further). To verify that $Q_{3}$ and $Q_{4}$ typically operate in the triode region, consider the scenario where the input signals are equal (i.e., $v_{1}=v_{2}$), leading to:\n\n$$\nv_{x}=v_{y}=v_{1}-v_{G S 1}=v_{1}-\\left(v_{\\text {eff } 1}+V_{t \\mathrm{t}}\\right)\n$$\n\nConsequently, the drain-source voltages of both $Q_{3}$ and $Q_{4}$ are zero. Nevertheless, their gate-source voltages match those of $\\mathrm{Q}_{1}$ and $\\mathrm{Q}_{2}$, confirming that they indeed function in the triode region.\n\nThe described circuit is a general biquad filter implemented with multiple-output transconductors. It includes three operational amplifiers (Gm1, Gm2, Gm3) and capacitors (2CA, 2CB, 2CX), configured to accept differential input (Vin+, Vin-) and provide differential output (Vout+, Vout-). Capacitors 2CA and 2CB are grounded, while 2CX connects the input to the output nodes, providing feedback and frequency-dependent response.\n\nThe linearized CMOS differential pair utilizes NMOS transistors $Q_{3}$ and $Q_{4}$ in the triode region, with the current sources balanced to maintain common-mode feedback. The transconductance Gm is determined by the formula presented in the diagram.\n\nFor the small-signal transconductance of this stage, we derive from (12.57) that the small-signal drain-source resistance of $Q_{3}$ and $Q_{4}$ is:\n\n$$\nr_{\\mathrm{ds} 3}=r_{\\mathrm{ds} 4}=\\frac{1}{2 \\mathrm{k}_{3}\\left(\\mathrm{~V}_{\\mathrm{GS} 1}-\\mathrm{V}_{\\mathrm{tn}}\\right)}\n$$\n\nHere, we assume that $Q_{3}$ and $Q_{4}$ are matched devices and define:\n\n$$\n\\mathrm{k}_{3}=\\frac{\\mu_{\\mathrm{n}} \\mathrm{Cox}_{\\mathrm{ox}}}{2}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{3}\n$$\n\nIt is important to note that in this circuit, the varying gate-source voltages of $Q_{1}$ and $Q_{2}$ cannot be neglected, as their drain currents are not fixed at a constant value (unlike in Fig. 12.15). The small-signal source resistance values of $Q_{1}$ and $Q_{2}$ are:\n\n$$\nr_{s 1}=r_{s 2}=\\frac{1}{g_{m 1}}=\\frac{1}{2 k_{1}\\left(V_{\\mathrm{GS} 1}-V_{t n}\\right)}\n$$\n\nUtilizing the small-signal T model, we determine the small-signal output current $i_{01}$ to be:\n\n$$\ni_{01}=\\frac{v_{1}-v_{2}}{r_{s 1}+r_{s 2}+\\left(r_{d s 3} \\| r_{d s 4}\\right)}\n$$\n\nThus, defining $G_{m} \\equiv i_{01} /\\left(v_{1}-v_{2}\\right)$, we have:\n\n$$\n\\mathrm{G}_{\\mathrm{m}}=\\frac{1}{\\mathrm{r}_{\\mathrm{s} 1}+\\mathrm{r}_{\\mathrm{s} 2}+\\left(\\mathrm{r}_{\\mathrm{ds} 3} \\| \\mathrm{r}_{\\mathrm{ds} 4}\\right)}\n$$\n\nwhich simplifies to:\n\n$$\n\\mathrm{G}_{\\mathrm{m}}=\\frac{4 \\mathrm{k}_{1} \\mathrm{k}_{3}\\left(\\mathrm{~V}_{\\mathrm{GS} 1}-\\mathrm{V}_{\\mathrm{tn}}\\right)}{\\mathrm{k}_{1}+4 \\mathrm{k}_{3}}\n$$\n\nFinally, to express this result in terms of current, we recognize that:\n\n$$\n\\mathrm{I}_{1}=\\mathrm{k}_{1}\\left(\\mathrm{~V}_{\\mathrm{GS} 1}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2}\n$$\n\nor, equivalently:\n\n$$\n\\left(\\mathrm{V}_{\\mathrm{GS} 1}-\\mathrm{V}_{\\mathrm{tn}}\\right)=\\sqrt{\\frac{\\mathrm{I}_{1}}{\\mathrm{k}_{1}}}\n$$\n\nThis leads to:\n\n$$\n\\mathrm{G}_{\\mathrm{m}}=\\frac{4 \\mathrm{k}_{1} \\mathrm{k}_{3} \\sqrt{\\mathrm{I}_{1}}}{\\left(\\mathrm{k}_{1}+4 \\mathrm{k}_{3}\\right) \\sqrt{\\mathrm{k}_{1}}}\n$$\n\nTherefore, we observe that the transconductance of this transconductor can be adjusted by altering the bias current, $I_{1}$. Additionally, the transconductance is proportional to the square root of the bias current,不同于双极型晶体管电路中的线性关系。\n\nTo understand how the varying bias conditions for the triode transistors enhance the linearity of the circuit, consider the scenario of minimal differences between $\\mathrm{V}_{1}$ and $\\mathrm{V}_{2}$ (e.g., 100 mV). In this case with small input signals, $Q_{3}$ and $Q_{4}$ effectively act as two source degeneration resistors, thus improving linearity over a simple differential pair due to the greater linearity of transistors in triode compared to those in the active region with source resistances. However, if the gates of $Q_{3}$ and $Q_{4}$ were connected to fixed-bias voltages, the drain current would decrease more than expected due to the squared $\\mathrm{V}_{\\mathrm{DS}}$ term as the drain-source voltage increases, as indicated by (12.54). Furthermore, the changing $\\mathrm{V}_{\\mathrm{GS} 1}$ and $\\mathrm{V}_{\\mathrm{GS} 2}$ values (caused by current changes) also reduce $\\mathrm{V}_{\\mathrm{DS}}$, thereby decreasing the cell's transconductance for large input signals. To counteract this reduction in transconductance for significant input signals, the gates of $Q_{3}$ or $Q_{4}$ are connected to the input signals as depicted. As the input signal rises, the small-signal resistance of one of the triode transistors in parallel, $Q_{3}$ or $Q_{4}$, decreases. This reduced resistance aims to increase the transconductance, partially offsetting the diminishing transconductance value. Hence, by selecting an appropriate ratio of $k_{1} / k_{3}$, a more consistent transconductance (and therefore better linearity) is achieved. For a 4-MHz filter detailed in [Krummenacher, 1988], a ratio of $k_{1} / k_{3}=6.7$ is employed to achieve distortion levels approximately 50 dB below the peak output signal level of 350 mVrms. An extension of this method is presented in [Silva-Martinez, 1991], where the input signal is split across two input stages to further enhance distortion performance.\n\n#### EXAMPLE 12.6\n\nConsider the circuit of Fig. 12.19 with the following values: $I_{1}=100 \\mu \\mathrm{~A}, \\quad \\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}=96 \\mu \\mathrm{~A} / \\mathrm{V}^{2}$, $(\\mathrm{W} / \\mathrm{L})_{1}=(\\mathrm{W} / \\mathrm{L})_{2}=20,(\\mathrm{~W} / \\mathrm{L})_{3}=(\\mathrm{W} / \\mathrm{L})_{4}=3$, and $\\mathrm{v}_{2}=0 \\mathrm{~V}$.\n\n1. Assuming a perfectly linear transconductor, use (12.68) to find $i_{01}$ when $v_{1}$ equals 2.5 mV and 250 mV.\n2. Assume the gates of $Q_{3}, Q_{4}$ are connected to ground and use classical models for both the triode and active regions. Find the true value of $i_{01}$ when $v_{1}$ equals 2.5 mV and 250 mV. Compare your results with those in part 1.\n3. Repeat part 2, assuming the gates of $\\mathrm{Q}_{3}, \\mathrm{Q}_{4}$ are connected to the input signals as shown in Fig. 12.19.\n\n#### Solution\n\n1. For the provided values, we calculate:\n\n$$\n\\begin{align*}\n& \\mathrm{k}_{1}=\\frac{96}{2} \\times 20=960 \\mu \\mathrm{~A} / \\mathrm{V}^{2}  \\\\\n& \\mathrm{k}_{3}=\\frac{96}{2} \\times 3=144 \\mu \\mathrm{~A} / \\mathrm{V}^{2}\n\\end{align*}\n$$\n\nSubstituting these values into (12.68), we obtain:\n\n$$\n\\mathrm{G}_{\\mathrm{m}}=\\frac{4 \\mathrm{k}_{1} \\mathrm{k}_{3} \\sqrt{100}}{\\left(\\mathrm{k}_{1}+4 \\mathrm{k}_{3}\\right) \\sqrt{\\mathrm{k}_{1}}}=116.2 \\mu \\mathrm{~A} / \\mathrm{V}\n$$\n\nUsing the definition of $G_{m}$, we find:\n\n$$\n\\mathrm{i}_{\\mathrm{o} 1}=\\mathrm{G}_{\\mathrm{m}}\\left(\\mathrm{v}_{1}-\\mathrm{v}_{2}\\right)=\\mathrm{G}_{\\mathrm{m}} \\mathrm{v}_{1}\n$$\n\nThus, for $\\mathrm{v}_{1}=2.5 \\mathrm{mV}$, we have $\\mathrm{i}_{01}=0.2905 \\mu \\mathrm{~A}$. For $\\mathrm{v}_{1}=250 \\mathrm{mV}$, then $\\mathrm{i}_{\\mathrm{ol}}=29.05 \\mu \\mathrm{~A}$. This means that for a $250-\\mathrm{mV}$ input voltage, the total drain current of $\\mathrm{Q}_{1}$ would be $129.05 \\mu \\mathrm{~A}$, whereas that for $Q_{2}$ would be $70.95 \\mu \\mathrm{~A}$.\n2. To determine $i_{01}$ in this case, we first note that the combined drain currents in $Q_{1}$ and $Q_{2}$ must equal the total bias current, $200 \\mu \\mathrm{~A}$. This can be expressed as:\n\n$$\n\\mathrm{i}_{\\mathrm{D} 1}+\\mathrm{i}_{\\mathrm{D} 2}=2 \\mathrm{I}_{1}=200 \\mu \\mathrm{~A}\n$$\n\nUsing $\\mathrm{V}_{\\text {effi }}=\\mathrm{V}_{\\mathrm{GSi}}-\\mathrm{V}_{\\mathrm{tn}}$, the drain currents in $\\mathrm{Q}_{1}$ and $\\mathrm{Q}_{2}$ are given by:\n\n$$\n\\mathrm{i}_{\\mathrm{D} 1}=\\frac{\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}}{2}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{1}\\left(\\mathrm{v}_{\\mathrm{eff} 1}^{2}\\right) \\quad \\text { and } \\quad \\mathrm{i}_{\\mathrm{D} 2}=\\frac{\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}}{2}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{2}\\left(\\mathrm{v}_{\\mathrm{eff} 2}^{2}\\right)\n$$\n\nThis leads to:\n\n$$\nv_{\\mathrm{eff} 1}^{2}+\\mathrm{v}_{\\mathrm{eff} 2}^{2}=\\frac{5}{24} \\mathrm{~V}^{2}\n$$\n\nThe current from node $\\mathrm{v}_{\\mathrm{x}}$ to $\\mathrm{v}_{\\mathrm{y}}$ through the two triode transistors is:\n\n$$\n\\mathrm{i}_{\\mathrm{xy}}=2 \\times \\mathrm{i}_{\\mathrm{D} 3}=2 \\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{3}\\left(\\mathrm{v}_{\\mathrm{eff} 2} \\mathrm{v}_{\\mathrm{xy}}-\\frac{\\mathrm{v}_{\\mathrm{xy}}^{2}}{2}\\right)\n$$\n\nHere, we note that $v_{\\text {eff } 3}=v_{\\text {eff } 2}$. The sum of $i_{x y}$ and $i_{D 2}$ must equal $I_{1}$, leading to:\n\n$$\n960 v_{\\text {eff } 2}^{2}+576\\left(v_{\\text {eff } 2} v_{x y}-\\frac{v_{\\mathrm{xy}}^{2}}{2}\\right)=100\n$$\n\nThe input signal is the sum of the following (with the threshold voltage terms cancelling out):\n\n$$\n-v_{\\text {eff } 2}+v_{\\mathrm{xy}}+v_{\\text {eff } 1}=v_{\\text {in }}\n$$\n\nSolving equations (12.75), (12.77), and (12.78) using an equation solver and selecting the solution with all positive values yields the effective gate voltages for $\\mathrm{v}_{\\mathrm{in}}=2.5 \\mathrm{mV}$:\n\n$$\n\\begin{align*}\n\\mathrm{v}_{\\text {eff } 1} & =0.32322 \\mathrm{~V} \\\\\n\\mathrm{v}_{\\mathrm{eff} 2} & =0.32228 \\mathrm{~V} \\\\\n\\mathrm{v}_{\\mathrm{xy}} & =0.0015648 \\mathrm{~V}\n\\end{align*}\n$$\n\nThese effective gate voltages indicate that the drain currents are:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{D} 1}=100.2898 \\mu \\mathrm{~A} \\quad \\mathrm{i}_{\\mathrm{D} 2}=99.7104 \\mu \\mathrm{~A}\n\\end{equation*}\n$$\n\nThus, we find:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{ol}}=\\mathrm{i}_{\\mathrm{D} 1}-100 \\mu \\mathrm{~A}=0.2898 \\mu \\mathrm{~A}\n\\end{equation*}\n$$\n\nThis result aligns closely with that of part 1. However, for $\\mathrm{v}_{\\mathrm{in}}=250 \\mathrm{mV}$, we obtain:\n\n$$\n\\begin{align*}\n\\mathrm{v}_{\\text {eff } 1} & =0.35452 \\mathrm{~V} \\\\\n\\mathrm{v}_{\\text {eff } 2} & =0.28749 \\mathrm{~V} \\\\\n\\mathrm{v}_{\\mathrm{xy}} & =0.18297 \\mathrm{~V}\n\\end{align*}\n$$\n\nresulting in $\\mathrm{i}_{01}=20.66 \\mu \\mathrm{~A}$. This is approximately 30 percent lower than the linear transconductor value of $29.05 \\mu \\mathrm{~A}$ found in part 1.\n3. If the gates are connected to the input signal, the equations from part 2 remain the same, except for $i_{x y}$, which now includes the sum of $i_{D 3}$ and $i_{D 4}$:\n\n$$\n\\begin{align*}\n\\mathrm{i}_{\\mathrm{xy}}= & \\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{3}\\left[\\left(\\mathrm{v}_{\\mathrm{eff} 2}+\\mathrm{v}_{\\mathrm{in}}\\right) \\mathrm{v}_{\\mathrm{xy}}-\\frac{\\mathrm{v}_{\\mathrm{xy}}^{2}}{2}\\right] \\\\\n& +\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{4}\\left(\\mathrm{v}_{\\mathrm{eff} 2} \\mathrm{v}_{\\mathrm{xy}}-\\frac{\\mathrm{v}_{\\mathrm{xy}}^{2}}{2}\\right)\n\\end{align*}\n$$\n\nThis modifies (12.77) to:\n\n$$\n960 v_{\\text {eff } 2}^{2}+576\\left[\\left(2 v_{\\text {eff } 2}+v_{i n}\\right) v_{x y}-v_{x y}^{2}\\right]=100\n$$\n\nOnce again, using an equation solver, we find that for $\\mathrm{v}_{\\mathrm{in}}=2.5 \\mathrm{mV}$, the results are consistent with parts 1 and 2. However, for $v_{i n}=250 \\mathrm{mV}$, we find:\n\n$$\n\\begin{align*}\n\\mathrm{v}_{\\text {eff } 1} & =0.36620 \\mathrm{~V} \\\\\n\\mathrm{v}_{\\text {eff } 2} & =0.27245 \\"
},
{
    "text": "Recall the classical transistor model biased in the triode region once more:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{D}}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)\\left[\\left(\\mathrm{V}_{\\mathrm{GS}}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\mathrm{V}_{\\mathrm{DS}}-\\frac{\\mathrm{V}_{\\mathrm{DS}}^{2}}{2}\\right] \\tag{12.86}\n\\end{equation*}\n$$\n\nHere, it is evident that if the drain-source voltage, $\\mathrm{V}_{\\mathrm{DS}}$, remains constant, the drain current linearly corresponds to the applied gate-source voltage (disregarding the dc offset due to the squared $\\mathrm{V}_{\\mathrm{DS}}$ term) [Pennock, 1985]. However, this straightforward model omits significant second-order effects (like velocity saturation and mobility degradation), which substantially impair the accuracy of the equation. Nevertheless, employing fully differential structures to nullify even-order error terms allows for constructing a fairly linear transconductor (around 50 dB) using this constant-$\\mathrm{V}_{\\mathrm{DS}}$ method.\n\nA feasible implementation based on the described linearization scheme is depicted in Fig. 12.20. In this setup, $Q_{1}$ and $Q_{2}$ are positioned in the triode region, with their drain-source voltages set to $V_{C}$ via $Q_{3}, Q_{4}$, and two additional amplifiers. The differential input signal is applied to the gates of $Q_{1}$ and $Q_{2}$, superimposed on a constant common-mode voltage, $\\mathrm{V}_{\\mathrm{CM}}$. An alternative approach involves using an extra opamp to form a $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ opamp integrator [Wong, 1989].\n\nFor the circuit in Fig. 12.20, we obtain:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{D} 1}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{1}\\left[\\left(\\frac{\\mathrm{~V}_{\\mathrm{i}}}{2}+\\mathrm{V}_{\\mathrm{CM}}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\mathrm{V}_{\\mathrm{DS}}-\\mathrm{V}_{\\mathrm{DS}}^{2} / 2\\right] \\tag{12.87}\n\\end{equation*}\n$$\n\nRecognizing that $i_{01}$ is the difference between this current and $I_{1}$, set by a common-mode feedback signal equal to:\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{1}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{1}\\left[\\left(\\mathrm{~V}_{\\mathrm{CM}}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\mathrm{V}_{\\mathrm{DS}}-\\mathrm{V}_{\\mathrm{DS}}^{2} / 2\\right] \\tag{12.88}\n\\end{equation*}\n$$\n\nwe then derive:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{ol}}=\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{I}_{1}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{1}\\left(\\frac{\\mathrm{v}_{\\mathrm{i}}}{2}\\right) \\mathrm{V}_{\\mathrm{DS}} \\tag{12.89}\n\\end{equation*}\n$$\n\nDefining $G_{m} \\equiv i_{01} / v_{i}$ yields:\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{1} \\mathrm{~V}_{\\mathrm{DS}} \\tag{12.90}\n\\end{equation*}\n$$\n\nNote that the transconductance value here is directly proportional to the drain-source voltage. From (12.88), it is also apparent that the bias current is roughly proportional to the drain-source voltage (if $\\mathrm{V}_{\\mathrm{DS}}$ is small).\n\n#### EXAMPLE 12.7\n\nExamine the circuit in Fig. 12.20, where $\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}=96 \\mu \\mathrm{~A} / \\mathrm{V}^{2},(\\mathrm{~W} / \\mathrm{L})_{1}=(\\mathrm{W} / \\mathrm{L})_{2}=10, \\mathrm{~V}_{\\mathrm{tn}}=0.8 \\mathrm{~V}$, and $\\mathrm{V}_{\\mathrm{CM}}=2 \\mathrm{~V}$. Determine the transconductance when $\\mathrm{V}_{\\mathrm{C}}=0.2 \\mathrm{~V}$ and $\\mathrm{V}_{\\mathrm{C}}=0.4 \\mathrm{~V}$. For these control signal values, also calculate the bias currents through $Q_{1}$ and $Q_{2}$ (i.e., when $v_{i}=0$) and the maximum input signal swing before either transistor exits the triode region (assuming the classical transistor model).\n\n#### Solution\n\nUsing (12.90), for $\\mathrm{V}_{\\mathrm{C}}=0.2 \\mathrm{~V}$, we get:\n\n$$\n\\mathrm{G}_{\\mathrm{m}}=96 \\mu \\mathrm{~A} / \\mathrm{V}^{2} \\times 10 \\times 0.2 \\mathrm{~V}=0.192 \\mathrm{~mA} / \\mathrm{V}\n$$\n\nThe bias current through $Q_{1}$ or $Q_{2}$ for this $V_{C}$ value, using (12.88), is:\n\n$$\nI_{1}=96 \\mu \\mathrm{~A} / \\mathrm{V}^{2} \\times 10\\left[(2-0.8) 0.2-\\frac{0.2^{2}}{2}\\right]=0.211 \\mathrm{~mA}\n$$\n\nTo stay in the triode region, the effective gate-source voltages of $Q_{1}$ and $Q_{2}$ must exceed $V_{D S}=0.2 \\mathrm{~V}$, meaning their gate-source voltages must be above $V_{D S}+V_{t}=1.0 \\mathrm{~V}$. Given $\\mathrm{V}_{\\mathrm{CM}}=2 \\mathrm{~V}$, the negative portion, $\\mathrm{v}_{\\mathrm{i}} / 2$, must not drop below -1 V to avoid entering the active region. Thus, the maximum differential input voltage, $\\mathrm{v}_{\\mathrm{i}}$, is 2 V.\n\nFor $\\mathrm{V}_{\\mathrm{C}}=0.4 \\mathrm{~V}$, the transconductance doubles to $\\mathrm{G}_{\\mathrm{m}}=0.384 \\mathrm{~mA} / \\mathrm{V}$. The bias current is $I_{1}=0.384 \\mathrm{~mA}$, and the maximum input signal swing is a differential voltage of $v_{i}=1.6 \\mathrm{~V}$. Note that doubling the drain-source voltage doubles the transconductance (as anticipated) but nearly doubles the bias current and reduces the signal swing."
},
{
    "text": "Reflect again on the classic model for a transistor operating in the triode region,\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{D}}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)\\left[\\left(\\mathrm{V}_{\\mathrm{GS}}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\mathrm{V}_{\\mathrm{DS}}-\\frac{\\mathrm{V}_{\\mathrm{DS}}^{2}}{2}\\right] \\tag{12.86}\n\\end{equation*}\n$$\n\nIt is evident that, with a constant drain-source voltage $\\mathrm{V}_{\\mathrm{DS}}$, the drain current exhibits a linear relationship with the applied gate-source voltage, disregarding the dc offset due to the $\\mathrm{V}_{\\mathrm{DS}}^2$ term [Pennock, 1985]. Regrettably, this straightforward model fails to incorporate significant second-order effects, such as velocity saturation and mobility degradation, which substantially impair the accuracy of the preceding equation. Nonetheless, employing fully differential structures to eliminate even-order error terms allows for the construction of a reasonably linear transconductor (around 50 dB) using this constant-$\\mathrm{V}_{\\mathrm{DS}}$ methodology.\n\nAn illustrative implementation based on the aforementioned linearization technique is depicted in Fig. 12.20. Here, transistors $Q_{1}$ and $Q_{2}$ are operated in the triode region, with their drain-source voltages set to $V_{C}$ via $Q_{3}$, $Q_{4}$, and two additional amplifiers. The differential input signal is applied to the gates of $Q_{1}$ and $Q_{2}$, superimposed on a constant common-mode voltage, $\\mathrm{V}_{\\mathrm{CM}}$. An alternative approach involves using an extra opamp to form a $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ opamp integrator [Wong, 1989].\n\nFor the circuit in Fig. 12.20, we derive:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{D} 1}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{1}\\left[\\left(\\frac{\\mathrm{~V}_{\\mathrm{i}}}{2}+\\mathrm{V}_{\\mathrm{CM}}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\mathrm{V}_{\\mathrm{DS}}-\\mathrm{V}_{\\mathrm{DS}}^{2} / 2\\right] \\tag{12.87}\n\\end{equation*}\n$$\n\nRecognizing that $i_{01}$ is the difference between this current and $I_{1}$, which is established by a common-mode feedback signal equal to\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{1}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{1}\\left[\\left(\\mathrm{~V}_{\\mathrm{CM}}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\mathrm{V}_{\\mathrm{DS}}-\\mathrm{V}_{\\mathrm{DS}}^{2} / 2\\right] \\tag{12.88}\n\\end{equation*}\n$$\n\nwe then obtain\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{ol}}=\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{I}_{1}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{1}\\left(\\frac{\\mathrm{v}_{\\mathrm{i}}}{2}\\right) \\mathrm{V}_{\\mathrm{DS}} \\tag{12.89}\n\\end{equation*}\n$$\n\nBy defining $G_{m} \\equiv i_{01} / v_{i}$, we arrive at\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{1} \\mathrm{~V}_{\\mathrm{DS}} \\tag{12.90}\n\\end{equation*}\n$$\n\nIt is important to note that the transconductance value here is directly proportional to the drain-source voltage. From (12.88), it is also evident that the bias current is approximately proportional to the drain-source voltage, particularly when $\\mathrm{V}_{\\mathrm{DS}}$ is small.\n\n#### EXAMPLE 12.7\n\nExamine the circuit in Fig. 12.20, where $\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}=96 \\mu \\mathrm{~A} / \\mathrm{V}^{2}$, $(\\mathrm{~W} / \\mathrm{L})_{1}=(\\mathrm{W} / \\mathrm{L})_{2}=10$, $\\mathrm{~V}_{\\mathrm{tn}}=0.8 \\mathrm{~V}$, and $\\mathrm{V}_{\\mathrm{CM}}=2 \\mathrm{~V}$. Determine the transconductance value for $\\mathrm{V}_{\\mathrm{C}}=0.2 \\mathrm{~V}$ and $\\mathrm{V}_{\\mathrm{C}}=0.4 \\mathrm{~V}$. Additionally, for these control signal values, calculate the bias currents through $Q_{1}$ and $Q_{2}$ (when $v_{i}=0$) and the maximum input signal swing before either transistor exits the triode region (assuming the classical transistor model).\n\n#### Solution\n\nApplying (12.90), for $\\mathrm{V}_{\\mathrm{C}}=0.2 \\mathrm{~V}$, we find\n\n$$\n\\mathrm{G}_{\\mathrm{m}}=96 \\mu \\mathrm{~A} / \\mathrm{V}^{2} \\times 10 \\times 0.2 \\mathrm{~V}=0.192 \\mathrm{~mA} / \\mathrm{V}\n$$\n\nThe bias current through $Q_{1}$ or $Q_{2}$ for this $V_{C}$ value, using (12.88), is\n\n$$\nI_{1}=96 \\mu \\mathrm{~A} / \\mathrm{V}^{2} \\times 10\\left[(2-0.8) 0.2-\\frac{0.2^{2}}{2}\\right]=0.211 \\mathrm{~mA}\n$$\n\nTo ensure operation within the triode region, the effective gate-source voltages of $Q_{1}$ and $Q_{2}$ must stay above $V_{D S}=0.2 \\mathrm{~V}$, meaning their gate-source voltages must exceed $V_{D S}+V_{t}=1.0 \\mathrm{~V}$. Given the common-mode voltage $\\mathrm{V}_{\\mathrm{CM}}$ is 2 V, the negative portion $\\mathrm{v}_{\\mathrm{i}} / 2$ must not drop below -1 V to prevent entry into the active region. Thus, the maximum differential input voltage $\\mathrm{v}_{\\mathrm{i}}$ is 2 V.\n\nFor $\\mathrm{V}_{\\mathrm{C}}=0.4 \\mathrm{~V}$, the transconductance value doubles to $\\mathrm{G}_{\\mathrm{m}}=0.384 \\mathrm{~mA} / \\mathrm{V}$. The bias current is accordingly $I_{1}=0.384 \\mathrm{~mA}$, and the maximum input signal swing is a differential voltage of $v_{i}=1.6 \\mathrm{~V}$. Notably, doubling the drain-source voltage results in a doubling of the transconductance, as anticipated, but also necessitates nearly a doubling of the bias current and a reduction in signal swing."
},
{
    "text": "Rephrased Text:\n```\nReflect once more on the classical model for a transistor biased in the triode region,\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{D}}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)\\left[\\left(\\mathrm{V}_{\\mathrm{GS}}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\mathrm{V}_{\\mathrm{DS}}-\\frac{\\mathrm{V}_{\\mathrm{DS}}^{2}}{2}\\right] \\tag{12.86}\n\\end{equation*}\n$$\n\nIt is evident that when the drain-source voltage, $\\mathrm{V}_{\\mathrm{DS}}$, remains constant, the drain current varies linearly with the applied gate-source voltage (discounting the dc offset current due to the squared $\\mathrm{V}_{\\mathrm{DS}}$ term) [Pennock, 1985]. Regrettably, this simplistic model fails to incorporate significant second-order effects (such as velocity saturation and mobility degradation), which substantially impair the accuracy of the aforementioned equation model. Nonetheless, employing fully differential structures to eliminate even-order error terms allows for the construction of a reasonably linear transconductor (around 50 dB) using this constant-$\\mathrm{V}_{\\mathrm{DS}}$ approach.\n\nAn implementation based on the aforementioned linearization scheme is depicted in Fig. 12.20. Here, $Q_{1}$ and $Q_{2}$ are operated in the triode region, with their drain-source voltages set to $V_{C}$ by means of $Q_{3}$, $Q_{4}$, and two additional amplifiers. The differential input signal is applied to the gates of $Q_{1}$ and $Q_{2}$, superimposed on a constant common-mode voltage signal, $\\mathrm{V}_{\\mathrm{CM}}$. An alternative design approach involves using an extra opamp to create a $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ opamp integrator [Wong, 1989].\n\nFor the circuit shown in Fig. 12.20, we obtain\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{D} 1}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{1}\\left[\\left(\\frac{\\mathrm{~V}_{\\mathrm{i}}}{2}+\\mathrm{V}_{\\mathrm{CM}}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\mathrm{V}_{\\mathrm{DS}}-\\mathrm{V}_{\\mathrm{DS}}^{2} / 2\\right] \\tag{12.87}\n\\end{equation*}\n$$\n\nRecognizing that $i_{01}$ is the difference between this current and $I_{1}$, which is established via a common-mode feedback signal equal to\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{1}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{1}\\left[\\left(\\mathrm{~V}_{\\mathrm{CM}}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\mathrm{V}_{\\mathrm{DS}}-\\mathrm{V}_{\\mathrm{DS}}^{2} / 2\\right] \\tag{12.88}\n\\end{equation*}\n$$\n\nwe then derive\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{ol}}=\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{I}_{1}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{1}\\left(\\frac{\\mathrm{v}_{\\mathrm{i}}}{2}\\right) \\mathrm{V}_{\\mathrm{DS}} \\tag{12.89}\n\\end{equation*}\n$$\n\nDefining $G_{m} \\equiv i_{01} / v_{i}$ leads to\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{1} \\mathrm{~V}_{\\mathrm{DS}} \\tag{12.90}\n\\end{equation*}\n$$\n\nNote that in this context, the transconductance value is directly proportional to the drain-source voltage. From (12.88), it is also evident that the bias current is approximately proportional to the drain-source voltage (assuming $\\mathrm{V}_{\\mathrm{DS}}$ is small).\n\n#### EXAMPLE 12.7\n\nExamine the circuit in Fig. 12.20, where $\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}=96 \\mu \\mathrm{~A} / \\mathrm{V}^{2}$, $(\\mathrm{~W} / \\mathrm{L})_{1}=(\\mathrm{W} / \\mathrm{L})_{2}=10$, $\\mathrm{~V}_{\\mathrm{tn}}=0.8 \\mathrm{~V}$, and $\\mathrm{V}_{\\mathrm{CM}}=2 \\mathrm{~V}$. Determine the transconductance value for $\\mathrm{V}_{\\mathrm{C}}=0.2 \\mathrm{~V}$ and $\\mathrm{V}_{\\mathrm{C}}=0.4 \\mathrm{~V}$. For these control signal values, also compute the bias currents through $Q_{1}$ and $Q_{2}$ (when $v_{i}=0$) and the maximum input signal swing before either transistor exits the triode region (using the classical transistor model).\n\n#### Solution\n\nApplying (12.90), for $\\mathrm{V}_{\\mathrm{C}}=0.2 \\mathrm{~V}$, we get\n\n$$\n\\mathrm{G}_{\\mathrm{m}}=96 \\mu \\mathrm{~A} / \\mathrm{V}^{2} \\times 10 \\times 0.2 \\mathrm{~V}=0.192 \\mathrm{~mA} / \\mathrm{V}\n$$\n\nThe bias current through $Q_{1}$ or $Q_{2}$ for this $V_{C}$ value, using (12.88), is\n\n$$\nI_{1}=96 \\mu \\mathrm{~A} / \\mathrm{V}^{2} \\times 10\\left[(2-0.8) 0.2-\\frac{0.2^{2}}{2}\\right]=0.211 \\mathrm{~mA}\n$$\n\nTo stay within the triode region, the effective gate-source voltages of $Q_{1}$ and $Q_{2}$ must exceed $V_{D S}=0.2 \\mathrm{~V}$, meaning their gate-source voltages must be above $V_{D S}+V_{t}=1.0 \\mathrm{~V}$. Given that the common-mode voltage, $\\mathrm{V}_{\\mathrm{CM}}$, is 2 V, the negative portion, $\\mathrm{v}_{\\mathrm{i}} / 2$, must not drop below -1 V to prevent the transistor from entering the active region. Thus, the maximum differential input voltage, $\\mathrm{v}_{\\mathrm{i}}$, is 2 V in this scenario.\n\nFor $\\mathrm{V}_{\\mathrm{C}}=0.4 \\mathrm{~V}$, the transconductance value doubles to $\\mathrm{G}_{\\mathrm{m}}=0.384 \\mathrm{~mA} / \\mathrm{V}$. Here, the bias current is $I_{1}=0.384 \\mathrm{~mA}$, and the maximum input signal swing is a differential voltage of $v_{i}=1.6 \\mathrm{~V}$. Note that doubling the drain-source voltage results in doubled transconductance (as anticipated) but necessitates nearly doubling the bias current and reduces the signal swing.\n```"
},
{
    "text": "Recall the classical model for a transistor biased in the triode region:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{D}}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)\\left[\\left(\\mathrm{V}_{\\mathrm{GS}}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\mathrm{V}_{\\mathrm{DS}}-\\frac{\\mathrm{V}_{\\mathrm{DS}}^{2}}{2}\\right] \\tag{12.86}\n\\end{equation*}\n$$\n\nHere, if the drain-source voltage, $\\mathrm{V}_{\\mathrm{DS}}$, remains constant, the drain current is linear with respect to the applied gate-source voltage, excluding the dc offset due to the squared $\\mathrm{V}_{\\mathrm{DS}}$ term [Pennock, 1985]. However, this model忽视es crucial second-order effects, such as velocity saturation and mobility degradation, which significantly impair the equation's accuracy. Nonetheless, employing fully differential structures to cancel even-order error terms allows for constructing a reasonably linear transconductor (around 50 dB) using this constant-$\\mathrm{V}_{\\mathrm{DS}}$ approach.\n\nA potential implementation based on the described linearization scheme is depicted in Fig. 12.20. In this setup, $Q_{1}$ and $Q_{2}$ are biased in the triode region, with their drain-source voltages set to $V_{C}$ via $Q_{3}, Q_{4}$, and two additional amplifiers. The differential input signal is applied to the gates of $Q_{1}, Q_{2}$, superimposed on a constant common-mode voltage, $\\mathrm{V}_{\\mathrm{CM}}$. An alternative design involves using an extra opamp to create a $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ opamp integrator [Wong, 1989].\n\nFor the circuit in Fig. 12.20, we derive:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{D} 1}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{1}\\left[\\left(\\frac{\\mathrm{~V}_{\\mathrm{i}}}{2}+\\mathrm{V}_{\\mathrm{CM}}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\mathrm{V}_{\\mathrm{DS}}-\\mathrm{V}_{\\mathrm{DS}}^{2} / 2\\right] \\tag{12.87}\n\\end{equation*}\n$$\n\nConsidering $i_{01}$ as the difference between this current and $I_{1}$, which is set by a common-mode feedback signal:\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{1}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{1}\\left[\\left(\\mathrm{~V}_{\\mathrm{CM}}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\mathrm{V}_{\\mathrm{DS}}-\\mathrm{V}_{\\mathrm{DS}}^{2} / 2\\right] \\tag{12.88}\n\\end{equation*}\n$$\n\nWe then obtain:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{ol}}=\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{I}_{1}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{1}\\left(\\frac{\\mathrm{v}_{\\mathrm{i}}}{2}\\right) \\mathrm{V}_{\\mathrm{DS}} \\tag{12.89}\n\\end{equation*}\n$$\n\nDefining $G_{m} \\equiv i_{01} / v_{i}$ leads to:\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{1} \\mathrm{~V}_{\\mathrm{DS}} \\tag{12.90}\n\\end{equation*}\n$$\n\nNote that the transconductance value here is proportional to the drain-source voltage. From (12.88), it is also evident that the bias current is approximately proportional to the drain-source voltage (if $\\mathrm{V}_{\\mathrm{DS}}$ is small).\n\n#### EXAMPLE 12.7\n\nConsider the circuit in Fig. 12.20, with $\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}=96 \\mu \\mathrm{~A} / \\mathrm{V}^{2},(\\mathrm{~W} / \\mathrm{L})_{1}=(\\mathrm{W} / \\mathrm{L})_{2}=10, \\mathrm{~V}_{\\mathrm{tn}}=0.8 \\mathrm{~V}$, and $\\mathrm{V}_{\\mathrm{CM}}=2 \\mathrm{~V}$. Determine the transconductance when $\\mathrm{V}_{\\mathrm{C}}=0.2 \\mathrm{~V}$ and $\\mathrm{V}_{\\mathrm{C}}=0.4 \\mathrm{~V}$. For these control signal values, also find the bias currents through $Q_{1}$ and $Q_{2}$ (when $v_{i}=0$) and the maximum input signal swing before either transistor exits the triode region (assuming the classical transistor model).\n\n#### Solution\n\nUsing (12.90), for $\\mathrm{V}_{\\mathrm{C}}=0.2 \\mathrm{~V}$:\n\n$$\n\\mathrm{G}_{\\mathrm{m}}=96 \\mu \\mathrm{~A} / \\mathrm{V}^{2} \\times 10 \\times 0.2 \\mathrm{~V}=0.192 \\mathrm{~mA} / \\mathrm{V}\n$$\n\nThe bias current through $Q_{1}$ or $Q_{2}$ for this $V_{C}$ value, using (12.88):\n\n$$\nI_{1}=96 \\mu \\mathrm{~A} / \\mathrm{V}^{2} \\times 10\\left[(2-0.8) 0.2-\\frac{0.2^{2}}{2}\\right]=0.211 \\mathrm{~mA}\n$$\n\nTo stay in the triode region, the effective gate-source voltages of $Q_{1}$ and $Q_{2}$ must exceed $V_{D S}=0.2 \\mathrm{~V}$, i.e., be above $V_{D S}+V_{t}=1.0 \\mathrm{~V}$. Given $\\mathrm{V}_{\\mathrm{CM}}=2 \\mathrm{~V}$, the negative portion, $\\mathrm{v}_{\\mathrm{i}} / 2$, must not drop below -1 V to avoid entering the active region. Thus, the maximum differential input voltage, $\\mathrm{v}_{\\mathrm{i}}$, is 2 V.\n\nFor $\\mathrm{V}_{\\mathrm{C}}=0.4 \\mathrm{~V}$, the transconductance doubles to $\\mathrm{G}_{\\mathrm{m}}=0.384 \\mathrm{~mA} / \\mathrm{V}$. The bias current is $I_{1}=0.384 \\mathrm{~mA}$, and the maximum input signal swing is a differential voltage of $v_{i}=1.6 \\mathrm{~V}$. Doubling the drain-source voltage doubles the transconductance but nearly doubles the bias current and reduces the signal swing."
},
{
    "text": "Recollect the conventional model for a transistor operating in the triode region:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{D}}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)\\left[\\left(\\mathrm{V}_{\\mathrm{GS}}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\mathrm{V}_{\\mathrm{DS}}-\\frac{\\mathrm{V}_{\\mathrm{DS}}^{2}}{2}\\right] \\tag{12.86}\n\\end{equation*}\n$$\n\nIt is evident that, with a constant drain-source voltage, $\\mathrm{V}_{\\mathrm{DS}}$, the drain current exhibits a linear relationship with the applied gate-source voltage, disregarding the dc offset due to the squared $\\mathrm{V}_{\\mathrm{DS}}$ term [Pennock, 1985]. Regrettably, this simplistic model neglects significant second-order effects, such as velocity saturation and mobility degradation, which substantially impair the accuracy of the aforementioned equation. Nevertheless, employing fully differential structures to eliminate even-order error terms allows for the construction of a fairly linear transconductor (approximately 50 dB) using this constant-$\\mathrm{V}_{\\mathrm{DS}}$ methodology.\n\nAn illustrative implementation based on the described linearization technique is depicted in Fig. 12.20. Here, $Q_{1}$ and $Q_{2}$ are operated in the triode region, with their drain-source voltages set to $V_{C}$ via $Q_{3}, Q_{4}$, and two additional amplifiers. The differential input signal is applied to the gates of $Q_{1}$ and $Q_{2}$, superimposed on a constant common-mode voltage, $\\mathrm{V}_{\\mathrm{CM}}$. An alternative approach involves using an extra opamp to form a $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ opamp integrator [Wong, 1989].\n\nFor the circuit in Fig. 12.20, the following holds:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{D} 1}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{1}\\left[\\left(\\frac{\\mathrm{~V}_{\\mathrm{i}}}{2}+\\mathrm{V}_{\\mathrm{CM}}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\mathrm{V}_{\\mathrm{DS}}-\\mathrm{V}_{\\mathrm{DS}}^{2} / 2\\right] \\tag{12.87}\n\\end{equation*}\n$$\n\nRecognizing that $i_{01}$ is the difference between this current and $I_{1}$, which is established via a common-mode feedback signal equal to\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{1}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{1}\\left[\\left(\\mathrm{~V}_{\\mathrm{CM}}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\mathrm{V}_{\\mathrm{DS}}-\\mathrm{V}_{\\mathrm{DS}}^{2} / 2\\right] \\tag{12.88}\n\\end{equation*}\n$$\n\nwe derive\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{ol}}=\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{I}_{1}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{1}\\left(\\frac{\\mathrm{v}_{\\mathrm{i}}}{2}\\right) \\mathrm{V}_{\\mathrm{DS}} \\tag{12.89}\n\\end{equation*}\n$$\n\nBy defining $G_{m} \\equiv i_{01} / v_{i}$, we obtain\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{1} \\mathrm{~V}_{\\mathrm{DS}} \\tag{12.90}\n\\end{equation*}\n$$\n\nIt is important to note that the transconductance value here is directly proportional to the drain-source voltage. From (12.88), it is also apparent that the bias current is roughly proportional to the drain-source voltage, particularly when $\\mathrm{V}_{\\mathrm{DS}}$ is small.\n\n#### EXAMPLE 12.7\n\nConsider the circuit in Fig. 12.20, where $\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}=96 \\mu \\mathrm{~A} / \\mathrm{V}^{2},(\\mathrm{~W} / \\mathrm{L})_{1}=(\\mathrm{W} / \\mathrm{L})_{2}=10, \\mathrm{~V}_{\\mathrm{tn}}=0.8 \\mathrm{~V}$, and $\\mathrm{V}_{\\mathrm{CM}}=2 \\mathrm{~V}$. Determine the transconductance value for $\\mathrm{V}_{\\mathrm{C}}=0.2 \\mathrm{~V}$ and $\\mathrm{V}_{\\mathrm{C}}=0.4 \\mathrm{~V}$. For these control signal values, also calculate the bias currents through $Q_{1}$ and $Q_{2}$ (when $v_{i}=0$) and the maximum input signal swing before either transistor exits the triode region (assuming the classical transistor model).\n\n#### Solution\n\nApplying (12.90), for $\\mathrm{V}_{\\mathrm{C}}=0.2 \\mathrm{~V}$, we get\n\n$$\n\\mathrm{G}_{\\mathrm{m}}=96 \\mu \\mathrm{~A} / \\mathrm{V}^{2} \\times 10 \\times 0.2 \\mathrm{~V}=0.192 \\mathrm{~mA} / \\mathrm{V}\n$$\n\nThe bias current through $Q_{1}$ or $Q_{2}$ for this $V_{C}$ value, using (12.88), is\n\n$$\nI_{1}=96 \\mu \\mathrm{~A} / \\mathrm{V}^{2} \\times 10\\left[(2-0.8) 0.2-\\frac{0.2^{2}}{2}\\right]=0.211 \\mathrm{~mA}\n$$\n\nTo stay in the triode region, the effective gate-source voltages of $Q_{1}$ and $Q_{2}$ must exceed $V_{D S}=0.2 \\mathrm{~V}$, meaning their gate-source voltages must be above $V_{D S}+V_{t}=1.0 \\mathrm{~V}$. Given the common-mode voltage, $\\mathrm{V}_{\\mathrm{CM}}$, is 2 V, the negative portion, $\\mathrm{v}_{\\mathrm{i}} / 2$, must not fall below -1 V to prevent the transistor from entering the active region. Thus, the maximum differential input voltage, $\\mathrm{v}_{\\mathrm{i}}$, is 2 V.\n\nFor $\\mathrm{V}_{\\mathrm{C}}=0.4 \\mathrm{~V}$, the transconductance value is doubled to $\\mathrm{G}_{\\mathrm{m}}=0.384 \\mathrm{~mA} / \\mathrm{V}$. The bias current is $I_{1}=0.384 \\mathrm{~mA}$, and the maximum input signal swing is a differential voltage of $v_{i}=1.6 \\mathrm{~V}$. Note that doubling the drain-source voltage doubles the transconductance, as expected, but also nearly doubles the bias current and reduces the signal swing."
},
{
    "text": "Recall the classical model for a transistor biased in the triode region:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{D}}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)\\left[\\left(\\mathrm{V}_{\\mathrm{GS}}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\mathrm{V}_{\\mathrm{DS}}-\\frac{\\mathrm{V}_{\\mathrm{DS}}^{2}}{2}\\right] \\tag{12.86}\n\\end{equation*}\n$$\n\nIt is evident that if the drain-source voltage, $\\mathrm{V}_{\\mathrm{DS}}$, remains constant, the drain current is linearly related to the applied gate-source voltage, disregarding the dc offset current due to the squared $\\mathrm{V}_{\\mathrm{DS}}$ term [Pennock, 1985]. Unfortunately, this simplistic model overlooks significant second-order effects, such as velocity saturation and mobility degradation, which severely compromise the accuracy of the equation model. However, employing fully differential structures to cancel even-order error terms allows for the construction of a reasonably linear transconductor (around 50 dB) using this constant-$\\mathrm{V}_{\\mathrm{DS}}$ approach.\n\nOne feasible implementation based on the described linearization scheme is depicted in Fig. 12.20. Here, $Q_{1}$ and $Q_{2}$ are operated in the triode region, with their drain-source voltages set to $V_{C}$ via $Q_{3}$, $Q_{4}$, and two additional amplifiers. The differential input signal is applied to the gates of $Q_{1}$ and $Q_{2}$, superimposed on a constant common-mode voltage signal, $\\mathrm{V}_{\\mathrm{CM}}$. An alternative design involves using an extra opamp to create a $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ opamp integrator [Wong, 1989].\n\nFor the circuit in Fig. 12.20, we have:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{D} 1}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{1}\\left[\\left(\\frac{\\mathrm{~V}_{\\mathrm{i}}}{2}+\\mathrm{V}_{\\mathrm{CM}}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\mathrm{V}_{\\mathrm{DS}}-\\mathrm{V}_{\\mathrm{DS}}^{2} / 2\\right] \\tag{12.87}\n\\end{equation*}\n$$\n\nNoting that $i_{01}$ is the difference between this current and $I_{1}$, which is set by a common-mode feedback signal equal to:\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{1}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{1}\\left[\\left(\\mathrm{~V}_{\\mathrm{CM}}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\mathrm{V}_{\\mathrm{DS}}-\\mathrm{V}_{\\mathrm{DS}}^{2} / 2\\right] \\tag{12.88}\n\\end{equation*}\n$$\n\nwe then obtain:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{ol}}=\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{I}_{1}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{1}\\left(\\frac{\\mathrm{v}_{\\mathrm{i}}}{2}\\right) \\mathrm{V}_{\\mathrm{DS}} \\tag{12.89}\n\\end{equation*}\n$$\n\nDefining $G_{m} \\equiv i_{01} / v_{i}$ results in:\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{1} \\mathrm{~V}_{\\mathrm{DS}} \\tag{12.90}\n\\end{equation*}\n$$\n\nNote that here, the transconductance value is proportional to the drain-source voltage. From (12.88), it is also evident that the bias current is approximately proportional to the drain-source voltage (if $\\mathrm{V}_{\\mathrm{DS}}$ is small).\n\n#### EXAMPLE 12.7\n\nConsider the circuit in Fig. 12.20, where $\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}=96 \\mu \\mathrm{~A} / \\mathrm{V}^{2}$, $(\\mathrm{~W} / \\mathrm{L})_{1}=(\\mathrm{W} / \\mathrm{L})_{2}=10$, $\\mathrm{~V}_{\\mathrm{tn}}=0.8 \\mathrm{~V}$, and $\\mathrm{V}_{\\mathrm{CM}}=2 \\mathrm{~V}$. Determine the transconductance value for $\\mathrm{V}_{\\mathrm{C}}=0.2 \\mathrm{~V}$ and $\\mathrm{V}_{\\mathrm{C}}=0.4 \\mathrm{~V}$. For these control signal values, also find the bias currents through $Q_{1}$ and $Q_{2}$ (when $v_{i}=0$) and the maximum input signal swing before either transistor exits the triode region (assuming the classical transistor model).\n\n#### Solution\n\nUsing (12.90), for $\\mathrm{V}_{\\mathrm{C}}=0.2 \\mathrm{~V}$, we get:\n\n$$\n\\mathrm{G}_{\\mathrm{m}}=96 \\mu \\mathrm{~A} / \\mathrm{V}^{2} \\times 10 \\times 0.2 \\mathrm{~V}=0.192 \\mathrm{~mA} / \\mathrm{V}\n$$\n\nThe bias current through $Q_{1}$ or $Q_{2}$ for this $V_{C}$ value, using (12.88), is:\n\n$$\nI_{1}=96 \\mu \\mathrm{~A} / \\mathrm{V}^{2} \\times 10\\left[(2-0.8) 0.2-\\frac{0.2^{2}}{2}\\right]=0.211 \\mathrm{~mA}\n$$\n\nTo remain in the triode region, the effective gate-source voltages of $Q_{1}$ and $Q_{2}$ must stay above $V_{D S}=0.2 \\mathrm{~V}$, meaning their gate-source voltages must exceed $V_{D S}+V_{t}=1.0 \\mathrm{~V}$. Since the common-mode voltage, $\\mathrm{V}_{\\mathrm{CM}}$, is 2 V, the negative portion, $\\mathrm{v}_{\\mathrm{i}} / 2$, must not drop below -1 V to prevent the transistor from entering the active region. Thus, the maximum differential input voltage, $\\mathrm{v}_{\\mathrm{i}}$, is 2 V.\n\nSimilarly, for $\\mathrm{V}_{\\mathrm{C}}=0.4 \\mathrm{~V}$, the transconductance value is $\\mathrm{G}_{\\mathrm{m}}=0.384 \\mathrm{~mA} / \\mathrm{V}$. The bias current is $I_{1}=0.384 \\mathrm{~mA}$, and the maximum input signal swing is a differential voltage of $v_{i}=1.6 \\mathrm{~V}$. Note that doubling the drain-source voltage doubles the transconductance (as expected) but nearly doubles the bias current and reduces the signal swing."
},
{
    "text": "Rephrase:\n\n```\nRevisit the classic model for a transistor biased in the triode region,\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{D}}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)\\left[\\left(\\mathrm{V}_{\\mathrm{GS}}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\mathrm{V}_{\\mathrm{DS}}-\\frac{\\mathrm{V}_{\\mathrm{DS}}^{2}}{2}\\right] \\tag{12.86}\n\\end{equation*}\n$$\n\nIt is evident that with a constant drain-source voltage, $\\mathrm{V}_{\\mathrm{DS}}$, the drain current varies linearly with the gate-source voltage (disregarding the dc offset due to the $\\mathrm{V}_{\\mathrm{DS}}^2$ term) [Pennock, 1985]. Unfortunately, this simplistic model overlooks significant second-order effects, such as velocity saturation and mobility degradation, which substantially impair the accuracy of the equation. However, employing fully differential structures to cancel even-order errors allows for the construction of a fairly linear transconductor (around 50 dB) using this constant-$\\mathrm{V}_{\\mathrm{DS}}$ approach.\n\nA feasible implementation based on the described linearization method is illustrated in Fig. 12.20. Here, $Q_{1}$ and $Q_{2}$ operate in the triode region, with their drain-source voltages set to $V_{C}$ via $Q_{3}, Q_{4}$, and two additional amplifiers. The differential input signal is applied to the gates of $Q_{1}, Q_{2}$, superimposed on a constant common-mode voltage, $\\mathrm{V}_{\\mathrm{CM}}$. An alternative design involves using an extra opamp to form a $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ opamp integrator [Wong, 1989].\n\nFor the circuit in Fig. 12.20, we derive\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{D} 1}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{1}\\left[\\left(\\frac{\\mathrm{~V}_{\\mathrm{i}}}{2}+\\mathrm{V}_{\\mathrm{CM}}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\mathrm{V}_{\\mathrm{DS}}-\\mathrm{V}_{\\mathrm{DS}}^{2} / 2\\right] \\tag{12.87}\n\\end{equation*}\n$$\n\nRecognizing that $i_{01}$ is the difference between this current and $I_{1}$, set by a common-mode feedback signal equal to\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{1}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{1}\\left[\\left(\\mathrm{~V}_{\\mathrm{CM}}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\mathrm{V}_{\\mathrm{DS}}-\\mathrm{V}_{\\mathrm{DS}}^{2} / 2\\right] \\tag{12.88}\n\\end{equation*}\n$$\n\nwe obtain\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{ol}}=\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{I}_{1}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{1}\\left(\\frac{\\mathrm{v}_{\\mathrm{i}}}{2}\\right) \\mathrm{V}_{\\mathrm{DS}} \\tag{12.89}\n\\end{equation*}\n$$\n\nDefining $G_{m} \\equiv i_{01} / v_{i}$ leads to\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{1} \\mathrm{~V}_{\\mathrm{DS}} \\tag{12.90}\n\\end{equation*}\n$$\n\nNote that the transconductance value here is directly proportional to the drain-source voltage, and from (12.88), the bias current is also roughly proportional to $\\mathrm{V}_{\\mathrm{DS}}$ (if $\\mathrm{V}_{\\mathrm{DS}}$ is small).\n\n#### EXAMPLE 12.7\n\nConsider the circuit in Fig. 12.20, where $\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}=96 \\mu \\mathrm{~A} / \\mathrm{V}^{2},(\\mathrm{~W} / \\mathrm{L})_{1}=(\\mathrm{W} / \\mathrm{L})_{2}=10, \\mathrm{~V}_{\\mathrm{tn}}=0.8 \\mathrm{~V}$, and $\\mathrm{V}_{\\mathrm{CM}}=2 \\mathrm{~V}$. Determine the transconductance for $\\mathrm{V}_{\\mathrm{C}}=0.2 \\mathrm{~V}$ and $\\mathrm{V}_{\\mathrm{C}}=0.4 \\mathrm{~V}$. Also, find the bias currents through $Q_{1}$ and $Q_{2}$ (when $v_{i}=0$) and the maximum input signal swing before either transistor leaves the triode region (using the classical transistor model).\n\n#### Solution\n\nUsing (12.90), for $\\mathrm{V}_{\\mathrm{C}}=0.2 \\mathrm{~V}$, we get\n\n$$\n\\mathrm{G}_{\\mathrm{m}}=96 \\mu \\mathrm{~A} / \\mathrm{V}^{2} \\times 10 \\times 0.2 \\mathrm{~V}=0.192 \\mathrm{~mA} / \\mathrm{V}\n$$\n\nThe bias current through $Q_{1}$ or $Q_{2}$ for this $V_{C}$ is found using (12.88):\n\n$$\nI_{1}=96 \\mu \\mathrm{~A} / \\mathrm{V}^{2} \\times 10\\left[(2-0.8) 0.2-\\frac{0.2^{2}}{2}\\right]=0.211 \\mathrm{~mA}\n$$\n\nTo stay in the triode region, the effective gate-source voltages of $Q_{1}$ and $Q_{2}$ must exceed $V_{D S}=0.2 \\mathrm{~V}$, meaning their gate-source voltages must be above $V_{D S}+V_{t}=1.0 \\mathrm{~V}$. Given $\\mathrm{V}_{\\mathrm{CM}}=2 \\mathrm{~V}$, the negative part of $\\mathrm{v}_{\\mathrm{i}} / 2$ must not drop below -1 V to avoid entering the active region. Thus, the maximum differential input voltage, $\\mathrm{v}_{\\mathrm{i}}$, is 2 V.\n\nFor $\\mathrm{V}_{\\mathrm{C}}=0.4 \\mathrm{~V}$, the transconductance doubles to $\\mathrm{G}_{\\mathrm{m}}=0.384 \\mathrm{~mA} / \\mathrm{V}$. The bias current is $I_{1}=0.384 \\mathrm{~mA}$, and the maximum input signal swing is a differential voltage of $v_{i}=1.6 \\mathrm{~V}$. Note that doubling $\\mathrm{V}_{\\mathrm{DS}}$ doubles the transconductance but nearly doubles the bias current and reduces the signal swing.\n```"
},
{
    "text": "Recall the classical model for a transistor biased in the triode region:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{D}}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)\\left[\\left(\\mathrm{V}_{\\mathrm{GS}}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\mathrm{V}_{\\mathrm{DS}}-\\frac{\\mathrm{V}_{\\mathrm{DS}}^{2}}{2}\\right] \\tag{12.86}\n\\end{equation*}\n$$\n\nHere, if the drain-source voltage, $\\mathrm{V}_{\\mathrm{DS}}$, remains constant, the drain current linearly varies with the applied gate-source voltage, discounting the dc offset due to the squared $\\mathrm{V}_{\\mathrm{DS}}$ term [Pennock, 1985]. However, this model neglects significant second-order effects like velocity saturation and mobility degradation, limiting the equation's accuracy. Nevertheless, using fully differential structures to cancel even-order errors, a linear transconductor (around 50 dB) can be achieved with this constant-$\\mathrm{V}_{\\mathrm{DS}}$ method.\n\nAn implementation based on this linearization scheme is depicted in Fig. 12.20. In this setup, $Q_{1}$ and $Q_{2}$ are in the triode region, with their drain-source voltages set to $V_{C}$ via $Q_{3}, Q_{4}$, and two additional amplifiers. The differential input signal is applied to the gates of $Q_{1}, Q_{2}$, superimposed on a constant common-mode voltage, $\\mathrm{V}_{\\mathrm{CM}}$. An alternative approach involves an extra opamp to form a $\\mathrm{G}_{\\mathrm{m}}-\\mathrm{C}$ opamp integrator [Wong, 1989].\n\nFor the circuit in Fig. 12.20, we derive:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{D} 1}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{1}\\left[\\left(\\frac{\\mathrm{~V}_{\\mathrm{i}}}{2}+\\mathrm{V}_{\\mathrm{CM}}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\mathrm{V}_{\\mathrm{DS}}-\\mathrm{V}_{\\mathrm{DS}}^{2} / 2\\right] \\tag{12.87}\n\\end{equation*}\n$$\n\nConsidering $i_{01}$ as the difference between this current and $I_{1}$, set by a common-mode feedback signal:\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{1}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{1}\\left[\\left(\\mathrm{~V}_{\\mathrm{CM}}-\\mathrm{V}_{\\mathrm{tn}}\\right) \\mathrm{V}_{\\mathrm{DS}}-\\mathrm{V}_{\\mathrm{DS}}^{2} / 2\\right] \\tag{12.88}\n\\end{equation*}\n$$\n\nWe then obtain:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{ol}}=\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{I}_{1}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{1}\\left(\\frac{\\mathrm{v}_{\\mathrm{i}}}{2}\\right) \\mathrm{V}_{\\mathrm{DS}} \\tag{12.89}\n\\end{equation*}\n$$\n\nDefining $G_{m} \\equiv i_{01} / v_{i}$ leads to:\n\n$$\n\\begin{equation*}\n\\mathrm{G}_{\\mathrm{m}}=\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right)_{1} \\mathrm{~V}_{\\mathrm{DS}} \\tag{12.90}\n\\end{equation*}\n$$\n\nNote that the transconductance value is proportional to the drain-source voltage. From (12.88), the bias current is also roughly proportional to $\\mathrm{V}_{\\mathrm{DS}}$ (if $\\mathrm{V}_{\\mathrm{DS}}$ is small).\n\n#### EXAMPLE 12.7\n\nFor the circuit in Fig. 12.20, with $\\mu_{\\mathrm{n}} \\mathrm{C}_{\\mathrm{ox}}=96 \\mu \\mathrm{~A} / \\mathrm{V}^{2},(\\mathrm{~W} / \\mathrm{L})_{1}=(\\mathrm{W} / \\mathrm{L})_{2}=10, \\mathrm{~V}_{\\mathrm{tn}}=0.8 \\mathrm{~V}$, and $\\mathrm{V}_{\\mathrm{CM}}=2 \\mathrm{~V}$, determine the transconductance for $\\mathrm{V}_{\\mathrm{C}}=0.2 \\mathrm{~V}$ and $\\mathrm{V}_{\\mathrm{C}}=0.4 \\mathrm{~V}$. Also, find the bias currents through $Q_{1}$ and $Q_{2}$ (when $v_{i}=0$) and the maximum input signal swing before exiting the triode region (using the classical transistor model).\n\n#### Solution\n\nUsing (12.90), for $\\mathrm{V}_{\\mathrm{C}}=0.2 \\mathrm{~V}$:\n\n$$\n\\mathrm{G}_{\\mathrm{m}}=96 \\mu \\mathrm{~A} / \\mathrm{V}^{2} \\times 10 \\times 0.2 \\mathrm{~V}=0.192 \\mathrm{~mA} / \\mathrm{V}\n$$\n\nThe bias current through $Q_{1}$ or $Q_{2}$ for this $V_{C}$:\n\n$$\nI_{1}=96 \\mu \\mathrm{~A} / \\mathrm{V}^{2} \\times 10\\left[(2-0.8) 0.2-\\frac{0.2^{2}}{2}\\right]=0.211 \\mathrm{~mA}\n$$\n\nTo stay in the triode region, the gate-source voltages of $Q_{1}$ and $Q_{2}$ must exceed $V_{D S}=0.2 \\mathrm{~V}$, i.e., above $V_{D S}+V_{t}=1.0 \\mathrm{~V}$. With $\\mathrm{V}_{\\mathrm{CM}}=2 \\mathrm{~V}$, the negative part of $\\mathrm{v}_{\\mathrm{i}} / 2$ must not drop below -1 V to avoid the active region. Thus, the maximum $\\mathrm{v}_{\\mathrm{i}}$ is 2 V.\n\nFor $\\mathrm{V}_{\\mathrm{C}}=0.4 \\mathrm{~V}$, the transconductance is $\\mathrm{G}_{\\mathrm{m}}=0.384 \\mathrm{~mA} / \\mathrm{V}$. The bias current is $I_{1}=0.384 \\mathrm{~mA}$, and the maximum input signal swing is $v_{i}=1.6 \\mathrm{~V}$. Doubling $\\mathrm{V}_{\\mathrm{DS}}$ doubles the transconductance but nearly doubles the bias current and reduces the signal swing."
},
{
    "text": "```\nGenerally, CMOS transconductors that utilize active transistors ${ }^{2}$ exhibit inferior linearity compared to those based on triode configurations. Nevertheless, designs employing active transistors typically boast enhanced speed performance, assuming identical bias currents in both scenarios. The linearity of active-transistor transconductors is merely moderate, ranging from 30 to 50 dB, due to their dependence on the MOS transistors' square-law model, which lacks precision, especially in short-channel processes. Moreover, only the differential output currents ideally exhibit linearity, while individual currents contain notable second-order harmonics. Consequently, second-order harmonic distortion arises if the differential measurement is not exact.\n\nIt is pertinent to note that not all linearization techniques involving active transistors are covered here. For instance, one omitted method involves adaptively biasing the tail current of a differential pair [Nedungadi, 1984]. This approach is constrained by its frequency response, leading designers to prefer triode-based alternatives. In essence, this section introduces CMOS linearization techniques aimed at high-speed performance with only moderate linearity.\n```"
},
{
    "text": "Generally, CMOS transconductors that utilize active transistors ${ }^{2}$ exhibit inferior linearity compared to those based on triode configurations. Nonetheless, designs incorporating active transistors typically boast enhanced speed performance, given equivalent bias currents in both scenarios. The linearity of active-transistor transconductors is modest, ranging from approximately 30 to 50 dB, due to their reliance on the MOS transistors' square-law model, which lacks precision, especially in short-channel processes. Moreover, only the differential output currents ideally exhibit linearity, whereas individual currents contain notable second-order harmonics. Consequently, second-order harmonic distortion arises if the differential measurement is not exact.\n\nIt is important to note that not all linearization techniques involving active transistors are covered here. For instance, one unaddressed method involves adaptively biasing the tail current of a differential pair [Nedungadi, 1984]. This approach is constrained by its frequency response, leading designers to typically prefer triode-based solutions. In essence, this section introduces CMOS linearization techniques aimed at high-speed applications with only moderate linearity."
},
{
    "text": "Generally, CMOS transconductors utilizing active transistors ${ }^{2}$ exhibit inferior linearity compared to those based on triode configurations. Nevertheless, designs relying on active transistors typically boast enhanced speed performance, given equivalent bias currents in both scenarios. The linearity of active-transistor transconductors is moderate, ranging from approximately 30 to 50 dB, due to their dependence on the MOS transistors' square-law model, which lacks precision, especially in short-channel processes. Moreover, only the differential output currents ideally achieve linearity, while individual currents contain notable second-order harmonics. Consequently, second-order harmonic distortion arises if the difference is not accurately computed.\n\nIt is pertinent to note that not all linearization techniques employing active transistors are covered here. For instance, one unaddressed method involves adaptively biasing the tail current of a differential pair [Nedungadi, 1984]. This approach is constrained by its frequency response, leading designers to typically prefer triode-based solutions. In essence, this section introduces CMOS linearization techniques aimed at high-speed performance with only moderate linearity."
},
{
    "text": "Generally, CMOS transconductors utilizing active transistors ${ }^{2}$ exhibit inferior linearity compared to those based on triode configurations. Nevertheless, designs relying on active transistors typically boast enhanced speed performance, given identical bias currents in both scenarios. The linearity of active-transistor transconductors is merely moderate, ranging from 30 to 50 dB, due to their dependence on the square-law model of MOS transistors, which lacks precision, especially in short-channel processes. Moreover, only the differential output currents ideally exhibit linearity, while individual currents contain notable second-order harmonics. Consequently, second-order harmonic distortion arises if the differential measurement is not exact.\n\nIt is pertinent to note that not all linearization techniques involving active transistors are covered here. For instance, one unaddressed method involves adaptively biasing the tail current of a differential pair [Nedungadi, 1984]. This approach is constrained by its frequency response, leading designers to prefer triode-based solutions. In essence, this section introduces CMOS linearization techniques aimed at high-speed performance with only moderate linearity."
},
{
    "text": "```\n Typically, CMOS transconductors utilizing active transistors ${ }^{2}$ exhibit inferior linearity compared to those based on triode configurations. Nevertheless, active-based configurations frequently offer enhanced speed performance, assuming identical bias currents in both scenarios. The linearity of active-transistor transconductors is merely moderate (approximately 30 to 50 dB) due to their reliance on the square-law model of MOS transistors, which lacks precision, especially in short-channel processes. Furthermore, only the difference in output currents ideally exhibits linearity, while individual currents contain notable second-order harmonics. Consequently, second-order harmonic distortion arises if the difference is not accurately calculated.\n\nIt is important to note that not all linearization techniques involving active transistors are covered here. For instance, one unaddressed method involves adaptively biasing the tail current of a differential pair [Nedungadi, 1984]. This method is constrained by its frequency response, leading designers to typically prefer triode-based designs. In essence, this section introduces CMOS linearization techniques aimed at high-speed performance with only moderate linearity.\n```"
},
{
    "text": "Generally, CMOS transconductors utilizing active transistors ${ }^{2}$ exhibit inferior linearity compared to those based on triodes. Nevertheless, designs incorporating active transistors typically offer enhanced speed performance (assuming equivalent bias currents in both scenarios). The linearity of active-transistor transconductors is moderate, ranging from 30 to 50 dB, due to their reliance on the MOS transistor square-law model, which is not highly accurate, especially in short-channel processes. Moreover, only the differential output currents ideally exhibit linearity, while individual currents contain substantial second-order harmonics. Consequently, second-order harmonic distortion arises if the difference is not accurately computed.\n\nIt is important to note that not all linearization techniques employing active transistors are covered here. For instance, one unaddressed method involves adaptively biasing the tail current of a differential pair [Nedungadi, 1984]. This approach is constrained by its frequency response, prompting designers to favor triode-based solutions. In essence, this section introduces CMOS linearization techniques aimed at high-speed performance with only moderate linearity."
},
{
    "text": "Generally, CMOS transconductors utilizing active transistors ${ }^{2}$ exhibit inferior linearity compared to those based on triode configurations. Nonetheless, active-based designs typically provide enhanced speed performance (given identical bias currents in both scenarios). The linearity of active-transistor transconductors is moderate, ranging from approximately 30 to 50 dB, due to their reliance on the square-law model of MOS transistors, which lacks precision (especially in short-channel processes). Moreover, only the differential output currents ideally exhibit linearity, while individual currents contain notable second-order harmonics. Consequently, second-order harmonic distortion arises if the differential measurement is not exact.\n\nIt is important to note that not all linearization techniques involving active transistors are covered here. For instance, one unaddressed method involves adaptively biasing the tail current of a differential pair [Nedungadi, 1984]. This approach is constrained by its frequency response, leading designers to typically prefer triode-based solutions. In essence, this section introduces CMOS linearization techniques aimed at high-speed performance with only moderate linearity."
},
{
    "text": "Generally, CMOS transconductors utilizing active transistors ${ }^{2}$ exhibit inferior linearity compared to those based on triode configurations. Nevertheless, designs leveraging active transistors typically demonstrate enhanced speed performance, given equivalent bias currents in both scenarios. The linearity of active-transistor transconductors is moderate, ranging from approximately 30 to 50 dB, due to their reliance on the MOS transistor square-law model, which lacks precision, especially in short-channel processes. Moreover, ideal linearity is only achieved in the difference of output currents, whereas individual currents exhibit considerable second-order harmonics. Consequently, second-order harmonic distortion arises if the difference is not accurately determined.\n\nIt is important to note that not all linearization techniques employing active transistors are covered here. For instance, one omitted method involves adaptively biasing the tail current of a differential pair [Nedungadi, 1984]. This approach is constrained by its frequency response, leading designers to typically prefer triode-based solutions. In essence, this section introduces CMOS linearization techniques aimed at high-speed performance with only moderate linearity."
},
{
    "text": "Before exploring transconductor circuits with active transistors, it's beneficial to introduce a two-transistor configuration known as the CMOS pair, depicted in Fig. 12.21 [Seevinck, 1987]. As we will demonstrate, this pair functions as a single transistor, provided both transistors stay in the active region. This insight simplifies the derivation of several CMOS transconductors discussed later in this section.\n\nTo illustrate that this two-transistor pair behaves like a single transistor, we initially assume both transistors are in the active region. Consequently, their drain currents can be expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{D}}=\\mathrm{K}_{\\mathrm{n}}\\left(\\mathrm{~V}_{\\mathrm{GSn}}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\quad \\text { where } \\mathrm{V}_{\\mathrm{tn}}>0 \\tag{12.91}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{D}}=\\mathrm{K}_{\\mathrm{p}}\\left(\\mathrm{~V}_{\\mathrm{SGp}}+\\mathrm{V}_{\\mathrm{tp}}\\right)^{2} \\quad \\text { where } \\mathrm{V}_{\\mathrm{tp}}<0 \\tag{12.92}\n\\end{equation*}\n$$\n\nimage_name:Fig. 12.21\ndescription:\n[\nname: Qn, type: NMOS, ports: {S: snsp, D: LOAD1, G: VGS-eq}\nname: Qp, type: PMOS, ports: {S: snsp, D: LOAD2, G: VGS-eq}\n]\nextrainfo:The circuit is a CMOS pair with both transistors in the active region. The equivalent transistor has a threshold voltage Vt-eq and device parameter Keq.\n\nFig. 12.21 A CMOS pair, where both transistors are in the active region. The transistor pair is equivalent to a single transistor with an equivalent threshold voltage, $\\mathrm{V}_{\\mathrm{t} \\text {-eq }}$, and device parameter, $\\mathrm{K}_{\\text {eq }}$\n2. Active transistors are those operating in the active region, also known as the pinch-off or saturation region. For an $n$-channel transistor, this region is defined when $V_{G S}$ exceeds $V_{t n}$ and $V_{D S} \\geq V_{G S}-V_{t n}=V_{\\text {eff }}$.\n\nRearranging these equations in terms of their gate-source voltages yields\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{SGp}}=-\\mathrm{V}_{\\mathrm{tp}}+\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{p}}}} \\sqrt{\\mathrm{I}_{\\mathrm{D}}} \\tag{12.94}\n\\end{equation*}\n$$\n\nBy defining the equivalent gate-source voltage, $\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq}}$, as the difference between the two gate voltages, we obtain\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq}} \\equiv \\mathrm{~V}_{\\mathrm{GSn}}+\\mathrm{V}_{\\mathrm{SGp}}=\\left(\\mathrm{V}_{\\mathrm{tn}}-\\mathrm{V}_{\\mathrm{tp}}\\right)+\\left(\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{n}}}}+\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{p}}}}\\right) \\sqrt{\\mathrm{I}_{\\mathrm{D}}} \\tag{12.95}\n\\end{equation*}\n$$\n\nSince this equation mirrors the form for a single transistor (equations (12.93) and (12.94)), we define the equivalent threshold voltage, $\\mathrm{V}_{\\mathrm{t} \\text {-eq }}$, as\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}} \\equiv \\mathrm{~V}_{\\mathrm{tn}}-\\mathrm{V}_{\\mathrm{tp}} \\quad \\text { where } \\mathrm{V}_{\\mathrm{tn}}>0 \\text { and } \\mathrm{V}_{\\mathrm{tp}}<0 \\tag{12.96}\n\\end{equation*}\n$$\n\nand the equivalent device parameter, $\\mathrm{K}_{\\mathrm{eq}}$, as\n\n$$\n\\begin{equation*}\n\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{eq}}}} \\equiv \\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{n}}}}+\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{p}}}} \\tag{12.97}\n\\end{equation*}\n$$\n\nwhich can be reformulated as\n\n$$\n\\begin{equation*}\n\\mathrm{K}_{\\mathrm{eq}}=\\frac{\\mathrm{K}_{\\mathrm{n}} \\mathrm{~K}_{\\mathrm{p}}}{\\left(\\sqrt{\\mathrm{~K}_{\\mathrm{n}}}+\\sqrt{\\mathrm{K}_{\\mathrm{p}}}\\right)^{2}} \\tag{12.98}\n\\end{equation*}\n$$\n\nFinally, by combining (12.95), (12.96), and (12.98) and rearranging, we find that when both transistors are in their active regions, the drain current can be expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{D}}=\\mathrm{K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{GS}-\\mathrm{eq}}-\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}}\\right)^{2} \\tag{12.99}\n\\end{equation*}\n$$\n\nwhere $\\mathrm{K}_{\\text {eq }}, \\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq}}$, and $\\mathrm{V}_{\\mathrm{t} \\text {-eq }}$ are as defined. Clearly, this equation matches the form for a single transistor, enabling this two-transistor pair to substitute for single transistors in various circuits. As we will subsequently see, this substitution can be highly advantageous in designing linear transconductor circuits."
},
{
    "text": "Before delving into transconductor circuits featuring active transistors, it is beneficial to introduce a two-transistor configuration known as the CMOS pair, depicted in Fig. 12.21 [Seevinck, 1987]. As we will demonstrate, this pair functions akin to a single transistor, provided both transistors operate within the active region. This insight simplifies the derivation of several CMOS transconductors discussed later in this section.\n\nTo illustrate that this two-transistor pair behaves like a single transistor, we initially assume both transistors are in the active region. Consequently, their drain currents can be expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{D}}=\\mathrm{K}_{\\mathrm{n}}\\left(\\mathrm{~V}_{\\mathrm{GSn}}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\quad \\text { where } \\mathrm{V}_{\\mathrm{tn}}>0 \\tag{12.91}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{D}}=\\mathrm{K}_{\\mathrm{p}}\\left(\\mathrm{~V}_{\\mathrm{SGp}}+\\mathrm{V}_{\\mathrm{tp}}\\right)^{2} \\quad \\text { where } \\mathrm{V}_{\\mathrm{tp}}<0 \\tag{12.92}\n\\end{equation*}\n$$\n\nimage_name:Fig. 12.21\ndescription:\n[\nname: Qn, type: NMOS, ports: {S: snsp, D: LOAD1, G: VGS-eq}\nname: Qp, type: PMOS, ports: {S: snsp, D: LOAD2, G: VGS-eq}\n]\nextrainfo:The circuit is a CMOS pair with both transistors in the active region. The equivalent transistor has a threshold voltage Vt-eq and device parameter Keq.\n\nFig. 12.21 Illustrates a CMOS pair with both transistors in the active region. This pair is equivalent to a single transistor with an equivalent threshold voltage, $\\mathrm{V}_{\\mathrm{t} \\text {-eq }}$, and device parameter, $\\mathrm{K}_{\\text {eq }}$.\n2. Active transistors are those operating in the active region, also known as the pinch-off or saturation region. For an $n$-channel transistor, this active region is achieved when $V_{G S}$ exceeds $V_{t n}$ and $V_{D S} \\geq V_{G S}-V_{t n}=V_{\\text {eff }}$.\n\nRearranging these equations in terms of their gate-source voltages yields\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{SGp}}=-\\mathrm{V}_{\\mathrm{tp}}+\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{p}}}} \\sqrt{\\mathrm{I}_{\\mathrm{D}}} \\tag{12.94}\n\\end{equation*}\n$$\n\nBy defining the equivalent gate-source voltage, $\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq}}$, as the difference between the two gate voltages, we obtain\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq}} \\equiv \\mathrm{~V}_{\\mathrm{GSn}}+\\mathrm{V}_{\\mathrm{SGp}}=\\left(\\mathrm{V}_{\\mathrm{tn}}-\\mathrm{V}_{\\mathrm{tp}}\\right)+\\left(\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{n}}}}+\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{p}}}}\\right) \\sqrt{\\mathrm{I}_{\\mathrm{D}}} \\tag{12.95}\n\\end{equation*}\n$$\n\nSince this equation mirrors the form of those for a single transistor (equations (12.93) and (12.94)), we define the equivalent threshold voltage, $\\mathrm{V}_{\\mathrm{t} \\text {-eq }}$, as\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}} \\equiv \\mathrm{~V}_{\\mathrm{tn}}-\\mathrm{V}_{\\mathrm{tp}} \\quad \\text { where } \\mathrm{V}_{\\mathrm{tn}}>0 \\text { and } \\mathrm{V}_{\\mathrm{tp}}<0 \\tag{12.96}\n\\end{equation*}\n$$\n\nand the equivalent device parameter, $\\mathrm{K}_{\\mathrm{eq}}$, as\n\n$$\n\\begin{equation*}\n\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{eq}}}} \\equiv \\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{n}}}}+\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{p}}}} \\tag{12.97}\n\\end{equation*}\n$$\n\nwhich can be reformulated as\n\n$$\n\\begin{equation*}\n\\mathrm{K}_{\\mathrm{eq}}=\\frac{\\mathrm{K}_{\\mathrm{n}} \\mathrm{~K}_{\\mathrm{p}}}{\\left(\\sqrt{\\mathrm{~K}_{\\mathrm{n}}}+\\sqrt{\\mathrm{K}_{\\mathrm{p}}}\\right)^{2}} \\tag{12.98}\n\\end{equation*}\n$$\n\nFinally, by combining (12.95), (12.96), and (12.98) and rearranging, we find that when both transistors are in their active regions, the drain current can be expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{D}}=\\mathrm{K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{GS}-\\mathrm{eq}}-\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}}\\right)^{2} \\tag{12.99}\n\\end{equation*}\n$$\n\nwhere $\\mathrm{K}_{\\text {eq }}, \\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq}}$, and $\\mathrm{V}_{\\mathrm{t} \\text {-eq }}$ are as previously defined. Clearly, this equation parallels that for a single transistor, enabling this two-transistor pair to substitute for single transistors in various circuits. As we will explore next, this substitution can be highly advantageous in the design of linear transconductor circuits."
},
{
    "text": "Before delving into transconductor circuits featuring active transistors, it is beneficial to introduce a two-transistor configuration known as the CMOS pair, depicted in Fig. 12.21 [Seevinck, 1987]. As we will demonstrate, this pair functions as a single transistor, provided both transistors remain in the active region. This insight simplifies the derivation of several CMOS transconductors discussed later in this section.\n\nTo illustrate that this two-transistor pair behaves like a single transistor, we initially assume both transistors operate in the active region. Consequently, their drain currents can be expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{D}}=\\mathrm{K}_{\\mathrm{n}}\\left(\\mathrm{~V}_{\\mathrm{GSn}}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\quad \\text { where } \\mathrm{V}_{\\mathrm{tn}}>0 \\tag{12.91}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{D}}=\\mathrm{K}_{\\mathrm{p}}\\left(\\mathrm{~V}_{\\mathrm{SGp}}+\\mathrm{V}_{\\mathrm{tp}}\\right)^{2} \\quad \\text { where } \\mathrm{V}_{\\mathrm{tp}}<0 \\tag{12.92}\n\\end{equation*}\n$$\n\nimage_name:Fig. 12.21\ndescription:\n[\nname: Qn, type: NMOS, ports: {S: snsp, D: LOAD1, G: VGS-eq}\nname: Qp, type: PMOS, ports: {S: snsp, D: LOAD2, G: VGS-eq}\n]\nextrainfo:The circuit is a CMOS pair with both transistors in the active region. The equivalent transistor has a threshold voltage Vt-eq and device parameter Keq.\n\nFig. 12.21 A CMOS pair, where both transistors are in the active region. The transistor pair is equivalent to a single transistor with an equivalent threshold voltage, $\\mathrm{V}_{\\mathrm{t} \\text {-eq }}$, and device parameter, $\\mathrm{K}_{\\text {eq }}$\n2. Active transistors are those that operate in the active region, also referred to as the pinch-off or saturation region. For an $n$-channel transistor, this active region is achieved when $V_{G S}$ exceeds $V_{t n}$ and $V_{D S} \\geq V_{G S}-V_{t n}=V_{\\text {eff }}$.\n\nRearranging these two equations in terms of their gate-source voltages yields\nand\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{SGp}}=-\\mathrm{V}_{\\mathrm{tp}}+\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{p}}}} \\sqrt{\\mathrm{I}_{\\mathrm{D}}} \\tag{12.94}\n\\end{equation*}\n$$\n\nBy defining the equivalent gate-source voltage, $\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq}}$, as the difference between the two gate voltages, we obtain\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq}} \\equiv \\mathrm{~V}_{\\mathrm{GSn}}+\\mathrm{V}_{\\mathrm{SGp}}=\\left(\\mathrm{V}_{\\mathrm{tn}}-\\mathrm{V}_{\\mathrm{tp}}\\right)+\\left(\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{n}}}}+\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{p}}}}\\right) \\sqrt{\\mathrm{I}_{\\mathrm{D}}} \\tag{12.95}\n\\end{equation*}\n$$\n\nSince this equation mirrors the form of those for a single transistor (equations (12.93) and (12.94)), we define the equivalent threshold voltage, $\\mathrm{V}_{\\mathrm{t} \\text {-eq }}$, as\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}} \\equiv \\mathrm{~V}_{\\mathrm{tn}}-\\mathrm{V}_{\\mathrm{tp}} \\quad \\text { where } \\mathrm{V}_{\\mathrm{tn}}>0 \\text { and } \\mathrm{V}_{\\mathrm{tp}}<0 \\tag{12.96}\n\\end{equation*}\n$$\n\nand the equivalent device parameter, $\\mathrm{K}_{\\mathrm{eq}}$, as\n\n$$\n\\begin{equation*}\n\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{eq}}}} \\equiv \\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{n}}}}+\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{p}}}} \\tag{12.97}\n\\end{equation*}\n$$\n\nwhich can be reformulated as\n\n$$\n\\begin{equation*}\n\\mathrm{K}_{\\mathrm{eq}}=\\frac{\\mathrm{K}_{\\mathrm{n}} \\mathrm{~K}_{\\mathrm{p}}}{\\left(\\sqrt{\\mathrm{~K}_{\\mathrm{n}}}+\\sqrt{\\mathrm{K}_{\\mathrm{p}}}\\right)^{2}} \\tag{12.98}\n\\end{equation*}\n$$\n\nFinally, by combining (12.95), (12.96), and (12.98) and rearranging, we find that when both transistors are in their active regions, the drain current can be expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{D}}=\\mathrm{K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{GS}-\\mathrm{eq}}-\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}}\\right)^{2} \\tag{12.99}\n\\end{equation*}\n$$\n\nwhere $\\mathrm{K}_{\\text {eq }}, \\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq}}$, and $\\mathrm{V}_{\\mathrm{t} \\text {-eq }}$ are as previously defined. Clearly, this equation matches the form for a single transistor, enabling this two-transistor pair to substitute for single transistors in numerous circuits. As we will explore next, this substitution can be highly advantageous in designing linear transconductor circuits."
},
{
    "text": "Prior to examining transconductor circuits featuring active transistors, it is beneficial to introduce a two-transistor configuration known as the CMOS pair, depicted in Fig. 12.21 [Seevinck, 1987]. As we will demonstrate, this pair functions as a single transistor, provided both transistors operate within the active region. This insight simplifies the derivation of certain CMOS transconductors discussed later in this section.\n\nTo illustrate that this two-transistor pair behaves like a single transistor, we initially assume both transistors are in the active region. Consequently, their drain currents can be expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{D}}=\\mathrm{K}_{\\mathrm{n}}\\left(\\mathrm{~V}_{\\mathrm{GSn}}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\quad \\text { where } \\mathrm{V}_{\\mathrm{tn}}>0 \\tag{12.91}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{D}}=\\mathrm{K}_{\\mathrm{p}}\\left(\\mathrm{~V}_{\\mathrm{SGp}}+\\mathrm{V}_{\\mathrm{tp}}\\right)^{2} \\quad \\text { where } \\mathrm{V}_{\\mathrm{tp}}<0 \\tag{12.92}\n\\end{equation*}\n$$\n\nimage_name:Fig. 12.21\ndescription:\n[\nname: Qn, type: NMOS, ports: {S: snsp, D: LOAD1, G: VGS-eq}\nname: Qp, type: PMOS, ports: {S: snsp, D: LOAD2, G: VGS-eq}\n]\nextrainfo:The circuit is a CMOS pair with both transistors in the active region. The equivalent transistor has a threshold voltage Vt-eq and device parameter Keq.\n\nFig. 12.21 A CMOS pair, where both transistors are in the active region. The transistor pair is equivalent to a single transistor with an equivalent threshold voltage, $\\mathrm{V}_{\\mathrm{t} \\text {-eq }}$, and device parameter, $\\mathrm{K}_{\\text {eq }}$.\n2. Active transistors are those that function in the active region, also referred to as the pinch-off or saturation region. For an $n$-channel transistor, the active region is defined when $V_{G S}$ exceeds $V_{t n}$ and $V_{D S} \\geq V_{G S}-V_{t n}=V_{\\text {eff }}$.\n\nRearranging these two equations in terms of their gate-source voltages yields\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{SGp}}=-\\mathrm{V}_{\\mathrm{tp}}+\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{p}}}} \\sqrt{\\mathrm{I}_{\\mathrm{D}}} \\tag{12.94}\n\\end{equation*}\n$$\n\nBy defining the equivalent gate-source voltage, $\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq}}$, as the difference between the two gate voltages, we obtain\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq}} \\equiv \\mathrm{~V}_{\\mathrm{GSn}}+\\mathrm{V}_{\\mathrm{SGp}}=\\left(\\mathrm{V}_{\\mathrm{tn}}-\\mathrm{V}_{\\mathrm{tp}}\\right)+\\left(\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{n}}}}+\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{p}}}}\\right) \\sqrt{\\mathrm{I}_{\\mathrm{D}}} \\tag{12.95}\n\\end{equation*}\n$$\n\nSince this equation mirrors the form for a single transistor (equations (12.93) and (12.94)), we define the equivalent threshold voltage, $\\mathrm{V}_{\\mathrm{t} \\text {-eq }}$, as\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}} \\equiv \\mathrm{~V}_{\\mathrm{tn}}-\\mathrm{V}_{\\mathrm{tp}} \\quad \\text { where } \\mathrm{V}_{\\mathrm{tn}}>0 \\text { and } \\mathrm{V}_{\\mathrm{tp}}<0 \\tag{12.96}\n\\end{equation*}\n$$\n\nand the equivalent device parameter, $\\mathrm{K}_{\\mathrm{eq}}$, as\n\n$$\n\\begin{equation*}\n\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{eq}}}} \\equiv \\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{n}}}}+\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{p}}}} \\tag{12.97}\n\\end{equation*}\n$$\n\nwhich can be reformulated as\n\n$$\n\\begin{equation*}\n\\mathrm{K}_{\\mathrm{eq}}=\\frac{\\mathrm{K}_{\\mathrm{n}} \\mathrm{~K}_{\\mathrm{p}}}{\\left(\\sqrt{\\mathrm{~K}_{\\mathrm{n}}}+\\sqrt{\\mathrm{K}_{\\mathrm{p}}}\\right)^{2}} \\tag{12.98}\n\\end{equation*}\n$$\n\nFinally, by combining (12.95), (12.96), and (12.98) and rearranging, we find that when both transistors are in their active regions, the drain current can be expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{D}}=\\mathrm{K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{GS}-\\mathrm{eq}}-\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}}\\right)^{2} \\tag{12.99}\n\\end{equation*}\n$$\n\nwhere $\\mathrm{K}_{\\text {eq }}, \\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq}}$, and $\\mathrm{V}_{\\mathrm{t} \\text {-eq }}$ are as previously defined. Clearly, this equation matches the form for a single transistor, enabling this two-transistor pair to substitute for single transistors in various circuits. As we will subsequently explore, this substitution can be highly advantageous in the design of linear transconductor circuits."
},
{
    "text": "Before delving into transconductor circuits featuring active transistors, it's beneficial to introduce a two-transistor configuration known as the CMOS pair, depicted in Fig. 12.21 [Seevinck, 1987]. As we will demonstrate, this pair functions as a single transistor, provided both transistors remain in the active region. This insight simplifies the derivation of several CMOS transconductors discussed later in this section.\n\nTo verify that this two-transistor pair behaves like a single transistor, we initially assume both transistors are in the active region. Consequently, their drain currents can be expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{D}}=\\mathrm{K}_{\\mathrm{n}}\\left(\\mathrm{~V}_{\\mathrm{GSn}}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\quad \\text { where } \\mathrm{V}_{\\mathrm{tn}}>0 \\tag{12.91}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{D}}=\\mathrm{K}_{\\mathrm{p}}\\left(\\mathrm{~V}_{\\mathrm{SGp}}+\\mathrm{V}_{\\mathrm{tp}}\\right)^{2} \\quad \\text { where } \\mathrm{V}_{\\mathrm{tp}}<0 \\tag{12.92}\n\\end{equation*}\n$$\n\nimage_name:Fig. 12.21\ndescription:\n[\nname: Qn, type: NMOS, ports: {S: snsp, D: LOAD1, G: VGS-eq}\nname: Qp, type: PMOS, ports: {S: snsp, D: LOAD2, G: VGS-eq}\n]\nextrainfo:The circuit is a CMOS pair with both transistors in the active region. The equivalent transistor has a threshold voltage Vt-eq and device parameter Keq.\n\nFig. 12.21 Illustrates a CMOS pair with both transistors in the active region. This pair is equivalent to a single transistor with an equivalent threshold voltage, $\\mathrm{V}_{\\mathrm{t} \\text {-eq }}$, and device parameter, $\\mathrm{K}_{\\text {eq }}$.\n2. Active transistors are those operating in the active region, also known as the pinch-off or saturation region. For an $n$-channel transistor, the active region is defined when $V_{G S}$ exceeds $V_{t n}$ and $V_{D S} \\geq V_{G S}-V_{t n}=V_{\\text {eff }}$.\n\nRearranging these equations in terms of their gate-source voltages yields\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{SGp}}=-\\mathrm{V}_{\\mathrm{tp}}+\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{p}}}} \\sqrt{\\mathrm{I}_{\\mathrm{D}}} \\tag{12.94}\n\\end{equation*}\n$$\n\nBy defining the equivalent gate-source voltage, $\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq}}$, as the difference between the two gate voltages, we obtain\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq}} \\equiv \\mathrm{~V}_{\\mathrm{GSn}}+\\mathrm{V}_{\\mathrm{SGp}}=\\left(\\mathrm{V}_{\\mathrm{tn}}-\\mathrm{V}_{\\mathrm{tp}}\\right)+\\left(\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{n}}}}+\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{p}}}}\\right) \\sqrt{\\mathrm{I}_{\\mathrm{D}}} \\tag{12.95}\n\\end{equation*}\n$$\n\nSince this equation mirrors the form for a single transistor (equations (12.93) and (12.94)), we define the equivalent threshold voltage, $\\mathrm{V}_{\\mathrm{t} \\text {-eq }}$, as\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}} \\equiv \\mathrm{~V}_{\\mathrm{tn}}-\\mathrm{V}_{\\mathrm{tp}} \\quad \\text { where } \\mathrm{V}_{\\mathrm{tn}}>0 \\text { and } \\mathrm{V}_{\\mathrm{tp}}<0 \\tag{12.96}\n\\end{equation*}\n$$\n\nand the equivalent device parameter, $\\mathrm{K}_{\\mathrm{eq}}$, as\n\n$$\n\\begin{equation*}\n\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{eq}}}} \\equiv \\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{n}}}}+\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{p}}}} \\tag{12.97}\n\\end{equation*}\n$$\n\nwhich can be reformulated as\n\n$$\n\\begin{equation*}\n\\mathrm{K}_{\\mathrm{eq}}=\\frac{\\mathrm{K}_{\\mathrm{n}} \\mathrm{~K}_{\\mathrm{p}}}{\\left(\\sqrt{\\mathrm{~K}_{\\mathrm{n}}}+\\sqrt{\\mathrm{K}_{\\mathrm{p}}}\\right)^{2}} \\tag{12.98}\n\\end{equation*}\n$$\n\nFinally, by combining (12.95), (12.96), and (12.98) and rearranging, we find that when both transistors are in their active regions, the drain current can be expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{D}}=\\mathrm{K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{GS}-\\mathrm{eq}}-\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}}\\right)^{2} \\tag{12.99}\n\\end{equation*}\n$$\n\nwhere $\\mathrm{K}_{\\text {eq }}, \\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq}}$, and $\\mathrm{V}_{\\mathrm{t} \\text {-eq }}$ are as previously defined. Clearly, this equation matches the form for a single transistor, enabling this two-transistor pair to substitute for single transistors in numerous circuits. As we will explore next, this substitution is highly advantageous in designing linear transconductor circuits."
},
{
    "text": "Before delving into transconductor circuits featuring active transistors, it's beneficial to introduce a two-transistor configuration known as the CMOS pair, as depicted in Fig. 12.21 [Seevinck, 1987]. As we will demonstrate, this pair functions as a single transistor, provided both transistors stay in the active region. This insight simplifies the derivation of certain CMOS transconductors discussed later in this section.\n\nTo illustrate that this two-transistor pair behaves like a single transistor, we initially assume both transistors are in the active region. Consequently, their drain currents can be expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{D}}=\\mathrm{K}_{\\mathrm{n}}\\left(\\mathrm{~V}_{\\mathrm{GSn}}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\quad \\text { where } \\mathrm{V}_{\\mathrm{tn}}>0 \\tag{12.91}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{D}}=\\mathrm{K}_{\\mathrm{p}}\\left(\\mathrm{~V}_{\\mathrm{SGp}}+\\mathrm{V}_{\\mathrm{tp}}\\right)^{2} \\quad \\text { where } \\mathrm{V}_{\\mathrm{tp}}<0 \\tag{12.92}\n\\end{equation*}\n$$\n\nimage_name:Fig. 12.21\ndescription:\n[\nname: Qn, type: NMOS, ports: {S: snsp, D: LOAD1, G: VGS-eq}\nname: Qp, type: PMOS, ports: {S: snsp, D: LOAD2, G: VGS-eq}\n]\nextrainfo:The circuit is a CMOS pair with both transistors in the active region. The equivalent transistor has a threshold voltage Vt-eq and device parameter Keq.\n\nFig. 12.21 A CMOS pair, where both transistors are in the active region. The transistor pair is equivalent to a single transistor with an equivalent threshold voltage, $\\mathrm{V}_{\\mathrm{t} \\text {-eq }}$, and device parameter, $\\mathrm{K}_{\\text {eq }}$\n2. Active transistors are those that operate in the active region, also known as the pinch-off or saturation region. For an $n$-channel transistor, the active region is achieved when $V_{G S}$ exceeds $V_{t n}$ and $V_{D S} \\geq V_{G S}-V_{t n}=V_{\\text {eff }}$.\n\nRearranging these two equations in terms of their gate-source voltages yields\nand\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{SGp}}=-\\mathrm{V}_{\\mathrm{tp}}+\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{p}}}} \\sqrt{\\mathrm{I}_{\\mathrm{D}}} \\tag{12.94}\n\\end{equation*}\n$$\n\nBy defining the equivalent gate-source voltage, $\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq}}$, as the difference between the two gate voltages, we obtain\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq}} \\equiv \\mathrm{~V}_{\\mathrm{GSn}}+\\mathrm{V}_{\\mathrm{SGp}}=\\left(\\mathrm{V}_{\\mathrm{tn}}-\\mathrm{V}_{\\mathrm{tp}}\\right)+\\left(\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{n}}}}+\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{p}}}}\\right) \\sqrt{\\mathrm{I}_{\\mathrm{D}}} \\tag{12.95}\n\\end{equation*}\n$$\n\nSince this equation mirrors the form of a single transistor's equations (12.93) and (12.94), we define the equivalent threshold voltage, $\\mathrm{V}_{\\mathrm{t} \\text {-eq }}$, as\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}} \\equiv \\mathrm{~V}_{\\mathrm{tn}}-\\mathrm{V}_{\\mathrm{tp}} \\quad \\text { where } \\mathrm{V}_{\\mathrm{tn}}>0 \\text { and } \\mathrm{V}_{\\mathrm{tp}}<0 \\tag{12.96}\n\\end{equation*}\n$$\n\nand the equivalent device parameter, $\\mathrm{K}_{\\mathrm{eq}}$, as\n\n$$\n\\begin{equation*}\n\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{eq}}}} \\equiv \\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{n}}}}+\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{p}}}} \\tag{12.97}\n\\end{equation*}\n$$\n\nwhich can be reformulated as\n\n$$\n\\begin{equation*}\n\\mathrm{K}_{\\mathrm{eq}}=\\frac{\\mathrm{K}_{\\mathrm{n}} \\mathrm{~K}_{\\mathrm{p}}}{\\left(\\sqrt{\\mathrm{~K}_{\\mathrm{n}}}+\\sqrt{\\mathrm{K}_{\\mathrm{p}}}\\right)^{2}} \\tag{12.98}\n\\end{equation*}\n$$\n\nFinally, merging (12.95), (12.96), and (12.98) and rearranging, we find that when both transistors are in their active regions, the drain current can be expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{D}}=\\mathrm{K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{GS}-\\mathrm{eq}}-\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}}\\right)^{2} \\tag{12.99}\n\\end{equation*}\n$$\n\nwhere $\\mathrm{K}_{\\text {eq }}, \\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq}}$, and $\\mathrm{V}_{\\mathrm{t} \\text {-eq }}$ are defined as previously described. Clearly, this equation aligns with the form for a single transistor, enabling this two-transistor pair to substitute single transistors in various circuits. As we will explore next, this substitution can be highly advantageous in designing linear transconductor circuits."
},
{
    "text": "Before delving into transconductor circuits with active transistors, it's beneficial to introduce a two-transistor configuration known as the CMOS pair, as depicted in Fig. 12.21 [Seevinck, 1987]. As we will demonstrate, this pair functions as a single transistor, provided both transistors stay in the active region. This insight simplifies the derivation of some CMOS transconductors discussed later in this section.\n\nTo illustrate that this two-transistor pair behaves like a single transistor, we initially assume both transistors operate in the active region. Consequently, their drain currents can be expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{D}}=\\mathrm{K}_{\\mathrm{n}}\\left(\\mathrm{~V}_{\\mathrm{GSn}}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\quad \\text { where } \\mathrm{V}_{\\mathrm{tn}}>0 \\tag{12.91}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{D}}=\\mathrm{K}_{\\mathrm{p}}\\left(\\mathrm{~V}_{\\mathrm{SGp}}+\\mathrm{V}_{\\mathrm{tp}}\\right)^{2} \\quad \\text { where } \\mathrm{V}_{\\mathrm{tp}}<0 \\tag{12.92}\n\\end{equation*}\n$$\n\nimage_name:Fig. 12.21\ndescription:\n[\nname: Qn, type: NMOS, ports: {S: snsp, D: LOAD1, G: VGS-eq}\nname: Qp, type: PMOS, ports: {S: snsp, D: LOAD2, G: VGS-eq}\n]\nextrainfo:The circuit is a CMOS pair with both transistors in the active region. The equivalent transistor has a threshold voltage Vt-eq and device parameter Keq.\n\nFig. 12.21 A CMOS pair, where both transistors are in the active region. The transistor pair is equivalent to a single transistor with an equivalent threshold voltage, $\\mathrm{V}_{\\mathrm{t} \\text {-eq }}$, and device parameter, $\\mathrm{K}_{\\text {eq }}$.\n2. Active transistors are those that function in the active region, also known as the pinch-off or saturation region. For an $n$-channel transistor, this active region is achieved when $V_{G S}$ exceeds $V_{t n}$ and $V_{D S} \\geq V_{G S}-V_{t n}=V_{\\text {eff }}$.\n\nRearranging these two equations in terms of their gate-source voltages yields\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{SGp}}=-\\mathrm{V}_{\\mathrm{tp}}+\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{p}}}} \\sqrt{\\mathrm{I}_{\\mathrm{D}}} \\tag{12.94}\n\\end{equation*}\n$$\n\nBy defining the equivalent gate-source voltage, $\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq}}$, as the difference between the two gate voltages, we obtain\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq}} \\equiv \\mathrm{~V}_{\\mathrm{GSn}}+\\mathrm{V}_{\\mathrm{SGp}}=\\left(\\mathrm{V}_{\\mathrm{tn}}-\\mathrm{V}_{\\mathrm{tp}}\\right)+\\left(\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{n}}}}+\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{p}}}}\\right) \\sqrt{\\mathrm{I}_{\\mathrm{D}}} \\tag{12.95}\n\\end{equation*}\n$$\n\nSince this equation mirrors the form of those for a single transistor (equations (12.93) and (12.94)), we define the equivalent threshold voltage, $\\mathrm{V}_{\\mathrm{t} \\text {-eq }}$, as\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}} \\equiv \\mathrm{~V}_{\\mathrm{tn}}-\\mathrm{V}_{\\mathrm{tp}} \\quad \\text { where } \\mathrm{V}_{\\mathrm{tn}}>0 \\text { and } \\mathrm{V}_{\\mathrm{tp}}<0 \\tag{12.96}\n\\end{equation*}\n$$\n\nand the equivalent device parameter, $\\mathrm{K}_{\\mathrm{eq}}$, as\n\n$$\n\\begin{equation*}\n\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{eq}}}} \\equiv \\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{n}}}}+\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{p}}}} \\tag{12.97}\n\\end{equation*}\n$$\n\nwhich can be reformulated as\n\n$$\n\\begin{equation*}\n\\mathrm{K}_{\\mathrm{eq}}=\\frac{\\mathrm{K}_{\\mathrm{n}} \\mathrm{~K}_{\\mathrm{p}}}{\\left(\\sqrt{\\mathrm{~K}_{\\mathrm{n}}}+\\sqrt{\\mathrm{K}_{\\mathrm{p}}}\\right)^{2}} \\tag{12.98}\n\\end{equation*}\n$$\n\nFinally, by combining (12.95), (12.96), and (12.98) and rearranging, we find that when both transistors are in their active regions, the drain current can be expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{D}}=\\mathrm{K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{GS}-\\mathrm{eq}}-\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}}\\right)^{2} \\tag{12.99}\n\\end{equation*}\n$$\n\nwhere $\\mathrm{K}_{\\text {eq }}, \\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq}}$, and $\\mathrm{V}_{\\mathrm{t} \\text {-eq }}$ are as previously defined. Clearly, this equation matches the form for a single transistor, enabling this two-transistor pair to substitute for single transistors in various circuits. As we will explore next, this substitution can be highly advantageous in designing linear transconductor circuits."
},
{
    "text": "Before delving into transconductor circuits with active transistors, it's beneficial to introduce a two-transistor configuration known as the CMOS pair, depicted in Fig. 12.21 [Seevinck, 1987]. As we will demonstrate, this pair functions as a single transistor, provided both transistors stay in the active region. This insight simplifies the derivation of several CMOS transconductors discussed later in this section.\n\nTo illustrate that this two-transistor pair behaves like a single transistor, we initially assume both transistors operate in the active region. Consequently, their drain currents can be expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{D}}=\\mathrm{K}_{\\mathrm{n}}\\left(\\mathrm{~V}_{\\mathrm{GSn}}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\quad \\text { where } \\mathrm{V}_{\\mathrm{tn}}>0 \\tag{12.91}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{I}_{\\mathrm{D}}=\\mathrm{K}_{\\mathrm{p}}\\left(\\mathrm{~V}_{\\mathrm{SGp}}+\\mathrm{V}_{\\mathrm{tp}}\\right)^{2} \\quad \\text { where } \\mathrm{V}_{\\mathrm{tp}}<0 \\tag{12.92}\n\\end{equation*}\n$$\n\nimage_name:Fig. 12.21\ndescription:\n[\nname: Qn, type: NMOS, ports: {S: snsp, D: LOAD1, G: VGS-eq}\nname: Qp, type: PMOS, ports: {S: snsp, D: LOAD2, G: VGS-eq}\n]\nextrainfo:The circuit is a CMOS pair with both transistors in the active region. The equivalent transistor has a threshold voltage Vt-eq and device parameter Keq.\n\nFig. 12.21 A CMOS pair, where both transistors are in the active region. The transistor pair is equivalent to a single transistor with an equivalent threshold voltage, $\\mathrm{V}_{\\mathrm{t} \\text {-eq }}$, and device parameter, $\\mathrm{K}_{\\text {eq }}$\n2. Active transistors are those that function in the active region, also referred to as the pinch-off or saturation region. For an $n$-channel transistor, this active region is achieved when $V_{G S}$ exceeds $V_{t n}$ and $V_{D S} \\geq V_{G S}-V_{t n}=V_{\\text {eff }}$.\n\nRearranging these two equations in terms of their gate-source voltages yields\nand\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{SGp}}=-\\mathrm{V}_{\\mathrm{tp}}+\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{p}}}} \\sqrt{\\mathrm{I}_{\\mathrm{D}}} \\tag{12.94}\n\\end{equation*}\n$$\n\nBy defining the equivalent gate-source voltage, $\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq}}$, as the difference between the two gate voltages, we obtain\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq}} \\equiv \\mathrm{~V}_{\\mathrm{GSn}}+\\mathrm{V}_{\\mathrm{SGp}}=\\left(\\mathrm{V}_{\\mathrm{tn}}-\\mathrm{V}_{\\mathrm{tp}}\\right)+\\left(\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{n}}}}+\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{p}}}}\\right) \\sqrt{\\mathrm{I}_{\\mathrm{D}}} \\tag{12.95}\n\\end{equation*}\n$$\n\nSince this equation mirrors the form of those for a single transistor (equations (12.93) and (12.94)), we define the equivalent threshold voltage, $\\mathrm{V}_{\\mathrm{t} \\text {-eq }}$, as\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}} \\equiv \\mathrm{~V}_{\\mathrm{tn}}-\\mathrm{V}_{\\mathrm{tp}} \\quad \\text { where } \\mathrm{V}_{\\mathrm{tn}}>0 \\text { and } \\mathrm{V}_{\\mathrm{tp}}<0 \\tag{12.96}\n\\end{equation*}\n$$\n\nand the equivalent device parameter, $\\mathrm{K}_{\\mathrm{eq}}$, as\n\n$$\n\\begin{equation*}\n\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{eq}}}} \\equiv \\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{n}}}}+\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{p}}}} \\tag{12.97}\n\\end{equation*}\n$$\n\nwhich can be reformulated as\n\n$$\n\\begin{equation*}\n\\mathrm{K}_{\\mathrm{eq}}=\\frac{\\mathrm{K}_{\\mathrm{n}} \\mathrm{~K}_{\\mathrm{p}}}{\\left(\\sqrt{\\mathrm{~K}_{\\mathrm{n}}}+\\sqrt{\\mathrm{K}_{\\mathrm{p}}}\\right)^{2}} \\tag{12.98}\n\\end{equation*}\n$$\n\nFinally, by combining (12.95), (12.96), and (12.98) and rearranging, we find that when both transistors are in their active regions, the drain current can be expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{D}}=\\mathrm{K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{GS}-\\mathrm{eq}}-\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}}\\right)^{2} \\tag{12.99}\n\\end{equation*}\n$$\n\nwhere $\\mathrm{K}_{\\text {eq }}, \\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq}}$, and $\\mathrm{V}_{\\mathrm{t} \\text {-eq }}$ are as previously defined. Clearly, this equation aligns with the form for a single transistor, enabling this two-transistor pair to substitute for single transistors in various circuits. As we will explore next, this substitution can be highly advantageous in designing linear transconductor circuits."
},
{
    "text": "A widely-used method for crafting an active transistor transconductor involves employing a consistent sum of gate-source voltages, as depicted in Fig. 12.22. Provided that both transistors function within the active region (i.e., the drain voltages are elevated and both $\\mathrm{v}_{\\mathrm{GS} 1}$ and $\\mathrm{V}_{\\mathrm{GS} 2}$ stay above $\\mathrm{V}_{\\mathrm{tn}}$), the output differential current can be expressed as\n\n$$\n\\begin{equation*}\n\\left(\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{i}_{\\mathrm{D} 2}\\right)=\\mathrm{K}\\left(\\mathrm{v}_{\\mathrm{GS} 1}+\\mathrm{v}_{\\mathrm{GS} 2}-2 \\mathrm{~V}_{\\mathrm{tn}}\\right)\\left(\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{v}_{\\mathrm{GS} 2}\\right) \\tag{12.100}\n\\end{equation*}\n$$\n\nIn this scenario, the output differential current remains linear so long as the combined gate-source voltages stay constant. We will explore various techniques to maintain this constant sum when an input signal is applied. It's crucial to note that while the differential current is linear, the individual drain currents are not. Consequently, any inaccuracies in current subtraction (which are inevitable) will result in distortion products, even if ideal square-law devices are used.\n\n**Description of Image: Matched Devices**\nThe circuit comprises two identical NMOS transistors, Q1 and Q2, with their sources connected to ground. The gate-source voltages are denoted as VGS1 and VGS2, and the corresponding drain currents are ID1 and ID2.\n\n(Matched devices)\n\n$$\n\\begin{gathered}\n\\mathrm{K}=\\left(\\mu_{\\mathrm{n}} / 2\\right) \\mathrm{C}_{\\mathrm{Ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right) \\\\\n\\mathrm{i}_{\\mathrm{D} 1}=\\mathrm{K}\\left(\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\quad \\text { and } \\quad \\mathrm{i}_{\\mathrm{D} 2}=\\mathrm{K}\\left(\\mathrm{v}_{\\mathrm{GS} 2}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\\\\n\\left(\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{i}_{\\mathrm{D} 2}\\right)=\\mathrm{K}\\left(\\mathrm{v}_{\\mathrm{GS} 1}+\\mathrm{v}_{\\mathrm{GS} 2}-2 \\mathrm{~V}_{\\mathrm{tn}}\\right)\\left(\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{v}_{\\mathrm{GS} 2}\\right)\n\\end{gathered}\n$$\n\nFig. 12.22 illustrates a two-transistor circuit where the difference in drain currents is linearly related to $\\left(\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{v}_{\\mathrm{GS} 2}\\right)$, provided the sum of the gate-source voltages remains steady. The transistors are matched and operate in the active region."
},
{
    "text": "A widely-used method for crafting an active transistor transconductor involves employing a consistent sum of gate-source voltages, as depicted in Fig. 12.22. When the two transistors function within the active region (i.e., their drain voltages are elevated and both $\\mathrm{v}_{\\mathrm{GS} 1}$ and $\\mathrm{V}_{\\mathrm{GS} 2}$ exceed $\\mathrm{V}_{\\mathrm{tn}}$), the output differential current is expressed as\n\n$$\n\\begin{equation*}\n\\left(\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{i}_{\\mathrm{D} 2}\\right)=\\mathrm{K}\\left(\\mathrm{v}_{\\mathrm{GS} 1}+\\mathrm{v}_{\\mathrm{GS} 2}-2 \\mathrm{~V}_{\\mathrm{tn}}\\right)\\left(\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{v}_{\\mathrm{GS} 2}\\right) \\tag{12.100}\n\\end{equation*}\n$$\n\nIn this scenario, the output differential current remains linear as long as the combined gate-source voltages stay constant. As we will discuss shortly, various techniques exist to maintain this constant sum when an input signal is applied. It is crucial to recognize that while the differential current is linear, the individual drain currents are not. Consequently, any inaccuracies in current subtraction (which are inevitable) will result in distortion products, even if ideal square-law devices are used.\n\nImage Description: The circuit comprises two matched NMOS transistors, Q1 and Q2, with their sources connected to ground. The gate-source voltages are denoted as VGS1 and VGS2, and the corresponding drain currents are ID1 and ID2.\n\n(Matched devices)\n\n$$\n\\begin{gathered}\n\\mathrm{K}=\\left(\\mu_{\\mathrm{n}} / 2\\right) \\mathrm{C}_{\\mathrm{Ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right) \\\\\n\\mathrm{i}_{\\mathrm{D} 1}=\\mathrm{K}\\left(\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\quad \\text { and } \\quad \\mathrm{i}_{\\mathrm{D} 2}=\\mathrm{K}\\left(\\mathrm{v}_{\\mathrm{GS} 2}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\\\\n\\left(\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{i}_{\\mathrm{D} 2}\\right)=\\mathrm{K}\\left(\\mathrm{v}_{\\mathrm{GS} 1}+\\mathrm{v}_{\\mathrm{GS} 2}-2 \\mathrm{~V}_{\\mathrm{tn}}\\right)\\left(\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{v}_{\\mathrm{GS} 2}\\right)\n\\end{gathered}\n$$\n\nFig. 12.22 Illustrates a two-transistor circuit where the difference in drain currents is linearly related to $\\left(\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{v}_{\\mathrm{GS} 2}\\right)$, provided the sum of the gate-source voltages remains constant. The transistors are matched and operate in the active region."
},
{
    "text": "A widely-used method for crafting an active transistor transconductor involves employing a consistent sum of gate-source voltages, as depicted in Fig. 12.22. Provided that both transistors function within the active region (where drain voltages are elevated and both $\\mathrm{v}_{\\mathrm{GS} 1}$ and $\\mathrm{V}_{\\mathrm{GS} 2}$ exceed $\\mathrm{V}_{\\mathrm{tn}}$), the resulting output differential current is expressed as\n\n$$\n\\begin{equation*}\n\\left(\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{i}_{\\mathrm{D} 2}\\right)=\\mathrm{K}\\left(\\mathrm{v}_{\\mathrm{GS} 1}+\\mathrm{v}_{\\mathrm{GS} 2}-2 \\mathrm{~V}_{\\mathrm{tn}}\\right)\\left(\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{v}_{\\mathrm{GS} 2}\\right) \\tag{12.100}\n\\end{equation*}\n$$\n\nIn this scenario, the output differential current remains linear as long as the combined gate-source voltages stay constant. Various techniques exist to maintain this constant sum during input signal application, as will be discussed subsequently. It is crucial to recognize that while the differential current is linear, the individual drain currents are not. Consequently, any discrepancies in current subtraction (which are inevitable) will lead to distortion products, even if ideal square-law devices are used.\n\n**Circuit Description:**\nThe circuit comprises two matched NMOS transistors, Q1 and Q2, with their sources connected to ground. The gate-source voltages are denoted as VGS1 and VGS2, and the corresponding drain currents are ID1 and ID2.\n\n**Equations:**\n$$\n\\begin{gathered}\n\\mathrm{K}=\\left(\\mu_{\\mathrm{n}} / 2\\right) \\mathrm{C}_{\\mathrm{Ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right) \\\\\n\\mathrm{i}_{\\mathrm{D} 1}=\\mathrm{K}\\left(\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\quad \\text { and } \\quad \\mathrm{i}_{\\mathrm{D} 2}=\\mathrm{K}\\left(\\mathrm{v}_{\\mathrm{GS} 2}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\\\\n\\left(\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{i}_{\\mathrm{D} 2}\\right)=\\mathrm{K}\\left(\\mathrm{v}_{\\mathrm{GS} 1}+\\mathrm{v}_{\\mathrm{GS} 2}-2 \\mathrm{~V}_{\\mathrm{tn}}\\right)\\left(\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{v}_{\\mathrm{GS} 2}\\right)\n\\end{gathered}\n$$\n\n**Fig. 12.22 Description:**\nIllustrates a two-transistor circuit where the difference in drain currents is linearly proportional to $\\left(\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{v}_{\\mathrm{GS} 2}\\right)$, provided the sum of the gate-source voltages remains constant. The transistors are matched and operate in the active region."
},
{
    "text": "A widely-used method for crafting an active transistor transconductor involves maintaining a constant sum of gate-source voltages, as depicted in Fig. 12.22. When the two transistors function within the active region (where drain voltages are elevated and both $\\mathrm{v}_{\\mathrm{GS} 1}$ and $\\mathrm{V}_{\\mathrm{GS} 2}$ surpass $\\mathrm{V}_{\\mathrm{tn}}$), the output differential current is expressed as\n\n$$\n\\begin{equation*}\n\\left(\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{i}_{\\mathrm{D} 2}\\right)=\\mathrm{K}\\left(\\mathrm{v}_{\\mathrm{GS} 1}+\\mathrm{v}_{\\mathrm{GS} 2}-2 \\mathrm{~V}_{\\mathrm{tn}}\\right)\\left(\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{v}_{\\mathrm{GS} 2}\\right) \\tag{12.100}\n\\end{equation*}\n$$\n\nIn this scenario, the output differential current remains linear as long as the sum of the gate-source voltages is stable. We will subsequently explore various techniques to ensure this sum stays constant upon applying an input signal. A crucial aspect to acknowledge is that while the differential current is linear, the individual drain currents are nonlinear. Consequently, any errors in current subtraction (which are inevitable) will result in distortion products, even if ideal square-law devices are employed.\n\nImage Description: The circuit comprises two matched NMOS transistors, Q1 and Q2, with their sources linked to ground. The gate-source voltages are denoted as VGS1 and VGS2, and the corresponding drain currents are ID1 and ID2.\n\n(Matched devices)\n\n$$\n\\begin{gathered}\n\\mathrm{K}=\\left(\\mu_{\\mathrm{n}} / 2\\right) \\mathrm{C}_{\\mathrm{Ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right) \\\\\n\\mathrm{i}_{\\mathrm{D} 1}=\\mathrm{K}\\left(\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\quad \\text { and } \\quad \\mathrm{i}_{\\mathrm{D} 2}=\\mathrm{K}\\left(\\mathrm{v}_{\\mathrm{GS} 2}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\\\\n\\left(\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{i}_{\\mathrm{D} 2}\\right)=\\mathrm{K}\\left(\\mathrm{v}_{\\mathrm{GS} 1}+\\mathrm{v}_{\\mathrm{GS} 2}-2 \\mathrm{~V}_{\\mathrm{tn}}\\right)\\left(\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{v}_{\\mathrm{GS} 2}\\right)\n\\end{gathered}\n$$\n\nFig. 12.22 illustrates a two-transistor circuit where the difference in drain currents is linearly related to $\\left(\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{v}_{\\mathrm{GS} 2}\\right)$, provided the sum of the gate-source voltages is kept constant. The transistors are matched and operate in the active region."
},
{
    "text": "A widely-used method for crafting an active transistor transconductor involves employing a consistent sum of gate-source voltages, as depicted in Fig. 12.22. When the two transistors function within the active region (i.e., the drain voltages are elevated and both $\\mathrm{v}_{\\mathrm{GS} 1}$ and $\\mathrm{V}_{\\mathrm{GS} 2}$ stay above $\\mathrm{V}_{\\mathrm{tn}}$), the output differential current is expressed as\n\n$$\n\\begin{equation*}\n\\left(\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{i}_{\\mathrm{D} 2}\\right)=\\mathrm{K}\\left(\\mathrm{v}_{\\mathrm{GS} 1}+\\mathrm{v}_{\\mathrm{GS} 2}-2 \\mathrm{~V}_{\\mathrm{tn}}\\right)\\left(\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{v}_{\\mathrm{GS} 2}\\right) \\tag{12.100}\n\\end{equation*}\n$$\n\nIn this scenario, the output differential current remains linear as long as the combined gate-source voltages stay constant. As we will explore shortly, various techniques exist to ensure this constancy under input signal application. A crucial aspect to acknowledge is that while the differential current is linear, the individual drain currents are not. Consequently, any inaccuracies in current subtraction (which are inevitable) will lead to distortion products, even if ideal square-law devices are utilized.\n\nimage_name: Matched devices\ndescription: The circuit comprises two identical NMOS transistors, Q1 and Q2, with their sources linked to ground. The gate-source voltages are denoted as VGS1 and VGS2, and the corresponding drain currents are ID1 and ID2.\n\n(Matched devices)\n\n$$\n\\begin{gathered}\n\\mathrm{K}=\\left(\\mu_{\\mathrm{n}} / 2\\right) \\mathrm{C}_{\\mathrm{Ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right) \\\\\n\\mathrm{i}_{\\mathrm{D} 1}=\\mathrm{K}\\left(\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\quad \\text { and } \\quad \\mathrm{i}_{\\mathrm{D} 2}=\\mathrm{K}\\left(\\mathrm{v}_{\\mathrm{GS} 2}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\\\\n\\left(\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{i}_{\\mathrm{D} 2}\\right)=\\mathrm{K}\\left(\\mathrm{v}_{\\mathrm{GS} 1}+\\mathrm{v}_{\\mathrm{GS} 2}-2 \\mathrm{~V}_{\\mathrm{tn}}\\right)\\left(\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{v}_{\\mathrm{GS} 2}\\right)\n\\end{gathered}\n$$\n\nFig. 12.22 Illustrates a two-transistor configuration where the disparity in drain currents is linear relative to $\\left(\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{v}_{\\mathrm{GS} 2}\\right)$, provided the total gate-source voltages remain steady. The transistors are matched and operate in the active region."
},
{
    "text": "A widely used method for crafting an active transistor transconductor involves employing a consistent sum of gate-source voltages, as depicted in Fig. 12.22. When the two transistors function within the active region (i.e., the drain voltages are elevated and both $\\mathrm{v}_{\\mathrm{GS} 1}$ and $\\mathrm{V}_{\\mathrm{GS} 2}$ exceed $\\mathrm{V}_{\\mathrm{tn}}$), the output differential current is expressed as\n\n$$\n\\begin{equation*}\n\\left(\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{i}_{\\mathrm{D} 2}\\right)=\\mathrm{K}\\left(\\mathrm{v}_{\\mathrm{GS} 1}+\\mathrm{v}_{\\mathrm{GS} 2}-2 \\mathrm{~V}_{\\mathrm{tn}}\\right)\\left(\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{v}_{\\mathrm{GS} 2}\\right) \\tag{12.100}\n\\end{equation*}\n$$\n\nIn this scenario, the output differential current remains linear as long as the sum of the gate-source voltages stays constant. Various techniques exist to maintain this constant sum when an input signal is applied, as we will discuss shortly. A crucial aspect to recognize is that while the differential current is linear, the individual drain currents are not. Consequently, any error in the current subtraction (which is inevitable) will result in distortion products, even if ideal square-law devices are available.\n\nimage_name: Matched devices\ndescription: The circuit comprises two identical NMOS transistors, Q1 and Q2, with their sources linked to ground. The gate-source voltages are denoted as VGS1 and VGS2, and the corresponding drain currents are ID1 and ID2.\n\n(Matched devices)\n\n$$\n\\begin{gathered}\n\\mathrm{K}=\\left(\\mu_{\\mathrm{n}} / 2\\right) \\mathrm{C}_{\\mathrm{Ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right) \\\\\n\\mathrm{i}_{\\mathrm{D} 1}=\\mathrm{K}\\left(\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\quad \\text { and } \\quad \\mathrm{i}_{\\mathrm{D} 2}=\\mathrm{K}\\left(\\mathrm{v}_{\\mathrm{GS} 2}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\\\\n\\left(\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{i}_{\\mathrm{D} 2}\\right)=\\mathrm{K}\\left(\\mathrm{v}_{\\mathrm{GS} 1}+\\mathrm{v}_{\\mathrm{GS} 2}-2 \\mathrm{~V}_{\\mathrm{tn}}\\right)\\left(\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{v}_{\\mathrm{GS} 2}\\right)\n\\end{gathered}\n$$\n\nFig. 12.22 Illustrates a two-transistor circuit where the difference in drain currents is linearly related to $\\left(\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{v}_{\\mathrm{GS} 2}\\right)$, provided the sum of the gate-source voltages remains steady. The transistors are matched and operate in the active region."
},
{
    "text": "A widely-used method for crafting an active transistor transconductor involves maintaining a constant sum of gate-source voltages, as depicted in Fig. 12.22. When the two transistors function within the active region (that is, their drain voltages are elevated and both $\\mathrm{v}_{\\mathrm{GS} 1}$ and $\\mathrm{V}_{\\mathrm{GS} 2}$ stay above $\\mathrm{V}_{\\mathrm{tn}}$), the output differential current can be expressed as\n\n$$\n\\begin{equation*}\n\\left(\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{i}_{\\mathrm{D} 2}\\right)=\\mathrm{K}\\left(\\mathrm{v}_{\\mathrm{GS} 1}+\\mathrm{v}_{\\mathrm{GS} 2}-2 \\mathrm{~V}_{\\mathrm{tn}}\\right)\\left(\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{v}_{\\mathrm{GS} 2}\\right) \\tag{12.100}\n\\end{equation*}\n$$\n\nIn this scenario, the output differential current remains linear provided the sum of the gate-source voltages is kept constant. We will explore various techniques to ensure this constancy when an input signal is applied. It is crucial to recognize that while the differential current is linear, the individual drain currents are not. Consequently, any discrepancies in current subtraction (which are inevitable) will result in distortion products, even if ideal square-law devices are employed.\n\nimage_name: Matched devices\ndescription: The circuit comprises two matched NMOS transistors, Q1 and Q2, with their sources linked to ground. The gate-source voltages are denoted as VGS1 and VGS2, and the corresponding drain currents are ID1 and ID2.\n\n(Matched devices)\n\n$$\n\\begin{gathered}\n\\mathrm{K}=\\left(\\mu_{\\mathrm{n}} / 2\\right) \\mathrm{C}_{\\mathrm{Ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right) \\\\\n\\mathrm{i}_{\\mathrm{D} 1}=\\mathrm{K}\\left(\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\quad \\text { and } \\quad \\mathrm{i}_{\\mathrm{D} 2}=\\mathrm{K}\\left(\\mathrm{v}_{\\mathrm{GS} 2}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\\\\n\\left(\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{i}_{\\mathrm{D} 2}\\right)=\\mathrm{K}\\left(\\mathrm{v}_{\\mathrm{GS} 1}+\\mathrm{v}_{\\mathrm{GS} 2}-2 \\mathrm{~V}_{\\mathrm{tn}}\\right)\\left(\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{v}_{\\mathrm{GS} 2}\\right)\n\\end{gathered}\n$$\n\nFig. 12.22 Illustrates a two-transistor circuit where the difference in drain currents is linear relative to $\\left(\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{v}_{\\mathrm{GS} 2}\\right)$, contingent on the constancy of the sum of the gate-source voltages. The transistors are matched and operate in the active region."
},
{
    "text": "A widely-used method for crafting an active transistor transconductor involves maintaining a constant sum of gate-source voltages, as depicted in Fig. 12.22. When the two transistors function in the active region (meaning the drain voltages are elevated and both $\\mathrm{v}_{\\mathrm{GS} 1}$ and $\\mathrm{V}_{\\mathrm{GS} 2}$ exceed $\\mathrm{V}_{\\mathrm{tn}}$), the output differential current is expressed as\n\n$$\n\\begin{equation*}\n\\left(\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{i}_{\\mathrm{D} 2}\\right)=\\mathrm{K}\\left(\\mathrm{v}_{\\mathrm{GS} 1}+\\mathrm{v}_{\\mathrm{GS} 2}-2 \\mathrm{~V}_{\\mathrm{tn}}\\right)\\left(\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{v}_{\\mathrm{GS} 2}\\right) \\tag{12.100}\n\\end{equation*}\n$$\n\nIn this scenario, the output differential current remains linear provided the sum of the gate-source voltages stays constant. We will explore various techniques to ensure this constancy when an input signal is applied. It's crucial to note that while the differential current is linear, the individual drain currents are not. Consequently, any error in the current subtraction (which is inevitable) will result in distortion products, even if ideal square-law devices are used.\n\nimage_name: Matched devices\ndescription: The circuit comprises two matched NMOS transistors, Q1 and Q2, with their sources grounded. The gate-source voltages are denoted as VGS1 and VGS2, and the corresponding drain currents are ID1 and ID2.\n\n(Matched devices)\n\n$$\n\\begin{gathered}\n\\mathrm{K}=\\left(\\mu_{\\mathrm{n}} / 2\\right) \\mathrm{C}_{\\mathrm{Ox}}\\left(\\frac{\\mathrm{~W}}{\\mathrm{~L}}\\right) \\\\\n\\mathrm{i}_{\\mathrm{D} 1}=\\mathrm{K}\\left(\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\quad \\text { and } \\quad \\mathrm{i}_{\\mathrm{D} 2}=\\mathrm{K}\\left(\\mathrm{v}_{\\mathrm{GS} 2}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\\\\n\\left(\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{i}_{\\mathrm{D} 2}\\right)=\\mathrm{K}\\left(\\mathrm{v}_{\\mathrm{GS} 1}+\\mathrm{v}_{\\mathrm{GS} 2}-2 \\mathrm{~V}_{\\mathrm{tn}}\\right)\\left(\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{v}_{\\mathrm{GS} 2}\\right)\n\\end{gathered}\n$$\n\nFig. 12.22 illustrates a two-transistor circuit where the difference in drain currents is linearly related to $\\left(\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{v}_{\\mathrm{GS} 2}\\right)$, provided the sum of the gate-source voltages is kept constant. The transistors are matched and operate in the active region."
},
{
    "text": "A method to keep the sum of gate-source voltages constant involves using a balanced differential input voltage, as depicted in Fig. 12.23. In this setup, the differential pair is biased by the dc common-mode voltage, $\\mathrm{V}_{\\mathrm{CM}}$, with the input signal fluctuating symmetrically around this common-mode voltage. It is crucial, as highlighted in previous analysis, that this input signal symmetry is essential for maintaining linearity. Nonetheless, in real-world scenarios, a slightly unbalanced input signal is not the primary cause of nonlinearity. Specifically, the linearity attainable through this method is fairly restricted due to the inadequate modeling of MOS transistors by square-law behavior. Moreover, achieving an exact difference between the two drain currents is challenging, which also introduces even-order harmonics. Consequently, this technique usually provides less than 50 dB of linearity.\n\nTo adjust the transconductance of the circuit, the common-mode voltage, $\\mathrm{V}_{\\mathrm{CM}}$, can be modified. However, it is important to recognize that in a short-channel process and with moderate gate-source voltages, carrier velocity saturation happens, restricting the variation in transconductance. Additionally, it should be noted that altering the input common-mode voltage affects both the linearity performance and the maximum signal swing levels. An instance of this approach is detailed in [Snelgrove, 1992], which demonstrates speeds of up to 450 MHz in a $0.9-\\mu \\mathrm{m}$ CMOS process, achieving a dynamic range performance of approximately $30-$ to $40-\\mathrm{dB}$."
},
{
    "text": "One method to sustain a consistent sum of gate-source voltages involves applying a balanced differential input voltage, as depicted in Fig. 12.23. In this scenario, the differential pair is biased by the dc common-mode voltage, $\\mathrm{V}_{\\mathrm{CM}}$, with the input signal fluctuating symmetrically around this common-mode voltage. It is crucial to note, based on prior analysis, that this symmetry in the input signal is vital for preserving linearity. Nevertheless, in practical applications, a slightly unbalanced input signal is not the primary cause of nonlinearity. Specifically, the linearity attainable through this method is fairly restricted due to the inadequate representation of MOS transistors by square-law behavior. Moreover, achieving an exact difference between the two drain currents is challenging, which also introduces even-order harmonics. Consequently, this technique usually confines linearity to less than 50 dB.\n\nTo adjust the transconductance of this circuit, the common-mode voltage, $\\mathrm{V}_{\\mathrm{CM}}$, can be modified. However, it is important to recognize that in a short-channel process and with moderate gate-source voltages, carrier velocity saturation occurs, thereby limiting the variation in transconductance. Additionally, it should be understood that altering the input common-mode voltage also impacts linearity performance and the maximum signal swing levels. An illustration of this method is provided in [Snelgrove, 1992], where speeds reaching 450 MHz are achieved in a $0.9-\\mu \\mathrm{m}$ CMOS process, accompanied by a dynamic range performance of approximately $30-$ to $40-\\mathrm{dB}$."
},
{
    "text": "To sustain a consistent sum of gate-source voltages, a balanced differential input voltage can be employed, as depicted in Fig. 12.23. In this setup, the differential pair is biased by the dc common-mode voltage, $\\mathrm{V}_{\\mathrm{CM}}$, with the input signal fluctuating symmetrically around this voltage. It is crucial to note from prior analysis that this symmetry in the input signal is vital for preserving linearity. Nonetheless, in real-world scenarios, a mildly unbalanced input signal is not the primary cause of nonlinearity. Specifically, the linearity attainable through this method is fairly restricted due to the inadequate representation of MOS transistors by square-law behavior. Moreover, achieving an exact difference between the two drain currents is challenging, which introduces even-order harmonics. Consequently, this technique usually confines linearity to less than 50 dB.\n\nFor adjusting the circuit's transconductance, the common-mode voltage, $\\mathrm{V}_{\\mathrm{CM}}$, can be modified. However, it is important to recognize that in a short-channel process and with moderate gate-source voltages, carrier velocity saturation arises, restricting the variation in transconductance. Additionally, it should be noted that altering the input common-mode voltage also impacts linearity performance and the maximum signal swing levels. An illustration of this method is provided in [Snelgrove, 1992], where speeds reaching 450 MHz are achieved in a $0.9-\\mu \\mathrm{m}$ CMOS process, accompanied by a dynamic range performance of approximately $30-$ to $40-\\mathrm{dB}$."
},
{
    "text": "A method to sustain a consistent sum of gate-source voltages involves applying a balanced differential input voltage, as depicted in Fig. 12.23. In this setup, the differential pair is biased by the dc common-mode voltage, $\\mathrm{V}_{\\mathrm{CM}}$, with the input signal fluctuating symmetrically around this common-mode voltage. It is crucial, as indicated by prior analysis, that this input signal symmetry is vital for preserving linearity. Nonetheless, in real-world scenarios, a minor imbalance in the input signal is not the primary cause of nonlinearity. Specifically, the linearity attainable through this method is fairly restricted due to the inadequate representation of MOS transistors by square-law behavior. Moreover, achieving an exact difference between the two drain currents is challenging, which also introduces even-order harmonics. Consequently, this technique usually provides less than 50 dB of linearity.\n\nTo modify the transconductance of this circuit, the common-mode voltage, $\\mathrm{V}_{\\mathrm{CM}}$, can be altered. However, it is important to recognize that in a short-channel process and with moderate gate-source voltages, carrier velocity saturation occurs, constraining the variation in transconductance. Additionally, it should be noted that adjusting the input common-mode voltage affects both linearity performance and the maximum signal swing levels. An example of this approach is detailed in [Snelgrove, 1992], where speeds reaching 450 MHz are achieved in a $0.9-\\mu \\mathrm{m}$ CMOS process, accompanied by a dynamic range performance of approximately $30-$ to $40-\\mathrm{dB}$."
},
{
    "text": "An effective strategy to sustain a consistent sum of gate-source voltages involves applying a balanced differential input voltage, as depicted in Fig. 12.23. In this setup, the differential pair is biased by the dc common-mode voltage, $\\mathrm{V}_{\\mathrm{CM}}$, with the input signal fluctuating symmetrically around this common-mode voltage. It is crucial to recognize, based on prior analysis, that this symmetry in the input signal is vital for preserving linearity. Nonetheless, in practical scenarios, a minor imbalance in the input signal is not the primary cause of nonlinearity. Specifically, the linearity attainable through this method is relatively constrained due to the inadequate representation of MOS transistors by square-law behavior. Moreover, achieving an exact difference between the two drain currents is challenging, which introduces even-order harmonics. Consequently, this technique usually confines linearity to less than 50 dB.\n\nAdjusting the common-mode voltage, $\\mathrm{V}_{\\mathrm{CM}}$, can fine-tune the circuit's transconductance. However, it is important to acknowledge that in a short-channel process and with moderate gate-source voltages, carrier velocity saturation occurs, restricting the variation in transconductance. Additionally, it should be noted that altering the input common-mode voltage also affects linearity performance and the maximum signal swing levels. An illustrative example of this approach is found in [Snelgrove, 1992], where speeds reaching 450 MHz are achieved in a $0.9-\\mu \\mathrm{m}$ CMOS process, accompanied by a dynamic range performance of approximately $30-$ to $40-\\mathrm{dB}$."
},
{
    "text": "A method to sustain a consistent sum of gate-source voltages involves applying a balanced differential input voltage, as depicted in Fig. 12.23. In this setup, the differential pair is biased by the dc common-mode voltage, $\\mathrm{V}_{\\mathrm{CM}}$, with the input signal fluctuating symmetrically around this common-mode voltage. It is crucial to note that, based on prior analysis, this symmetry in the input signal is vital for preserving linearity. Nevertheless, in practical scenarios, a slightly unbalanced input signal is not the primary cause of nonlinearity. Specifically, the linearity attainable through this method is fairly restricted due to the inadequate representation of MOS transistors by square-law behavior. Moreover, achieving an exact difference between the two drain currents is challenging, which also introduces even-order harmonics. Consequently, this technique usually confines the linearity to less than 50 dB.\n\nTo adjust the transconductance of this circuit, the common-mode voltage, $\\mathrm{V}_{\\mathrm{CM}}$, can be modified. However, it is important to recognize that in a short-channel process and with moderate gate-source voltages, carrier velocity saturation occurs, thereby limiting the variation in transconductance. Additionally, it should be noted that altering the input common-mode voltage affects both the linearity performance and the maximum signal swing levels. An illustration of this method is provided in [Snelgrove, 1992], where speeds of up to 450 MHz are achieved in a $0.9-\\mu \\mathrm{m}$ CMOS process, accompanied by a dynamic range performance of approximately $30-$ to $40-\\mathrm{dB}$."
},
{
    "text": "A method to sustain a consistent sum of gate-source voltages involves using a balanced differential input voltage, as depicted in Fig. 12.23. In this setup, the differential pair is biased by the dc common-mode voltage, $\\mathrm{V}_{\\mathrm{CM}}$, with the input signal fluctuating symmetrically around this common-mode voltage. It is crucial, as highlighted in prior analysis, that this input signal symmetry is essential for preserving linearity. Nonetheless, in real-world scenarios, a minor imbalance in the input signal is not the primary cause of nonlinearity. The linearity attainable with this method is notably restricted due to the inadequate representation of MOS transistors by square-law behavior. Moreover, achieving an exact difference between the two drain currents is challenging, which introduces even-order harmonics. Consequently, this technique usually provides less than 50 dB of linearity.\n\nTo modify the transconductance of the circuit, the common-mode voltage, $\\mathrm{V}_{\\mathrm{CM}}$, can be altered. It is important to recognize that in a short-channel process and with moderate gate-source voltages, carrier velocity saturation occurs, restricting the variation in transconductance. Additionally, adjusting the input common-mode voltage impacts both linearity performance and the maximum signal swing levels. An instance of this method is detailed in [Snelgrove, 1992], demonstrating speeds of up to 450 MHz in a $0.9-\\mu \\mathrm{m}$ CMOS process, achieving approximately a $30-$ to $40-\\mathrm{dB}$ dynamic range performance."
},
{
    "text": "One method to sustain a consistent sum of gate-source voltages involves applying a balanced differential input voltage, as depicted in Fig. 12.23. In this setup, the differential pair is biased by the dc common-mode voltage, $\\mathrm{V}_{\\mathrm{CM}}$, with the input signal fluctuating symmetrically around this common-mode voltage. It is crucial to note that, based on prior analysis, this symmetry in the input signal is vital for preserving linearity. Nonetheless, in practical scenarios, a minor imbalance in the input signal is not the primary cause of nonlinearity. Specifically, the linearity attainable through this method is relatively constrained due to the inadequate representation of MOS transistors by square-law behavior. Furthermore, achieving an exact difference between the two drain currents is challenging, which also introduces even-order harmonics. Consequently, this technique usually offers less than 50 dB of linearity.\n\nTo modify the transconductance of this circuit, the common-mode voltage, $\\mathrm{V}_{\\mathrm{CM}}$, can be altered. However, it is important to recognize that in a short-channel process and with moderate gate-source voltages, carrier velocity saturation occurs, restricting the variation in transconductance. Additionally, it should be noted that adjusting the input common-mode voltage also affects linearity performance and the maximum signal swing levels. An illustration of this approach is provided in [Snelgrove, 1992], where speeds reaching 450 MHz are achieved in a $0.9-\\mu \\mathrm{m}$ CMOS process, accompanied by a dynamic range performance of approximately $30-$ to $40-\\mathrm{dB}$."
},
{
    "text": "The rephrased text:\n\n```\nAn approach akin to the source-connected differential pair is the inverter-based transconductor, depicted in Fig. 12.24 [Park, 1986]. In this configuration, two CMOS pairs, $Q_{1 a}, Q_{1 b}$ and $Q_{2 a}, Q_{2 b}$, substitute the individual transistors of a conventional CMOS inverter, with the difference in their output currents constituting the overall output current, $\\mathrm{i}_{\\mathrm{o}}$. Assuming all four transistors operate in the active region and the CMOS pairs are matched, we can apply prior results for CMOS pairs to derive\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{1}=\\mathrm{K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{GS}-\\mathrm{eq} 1}-\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}}\\right)^{2} \\tag{12.101}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{2}=\\mathrm{K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{GS}-\\mathrm{eq} 2}-\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}}\\right)^{2} \\tag{12.102}\n\\end{equation*}\n$$\n\nThese equations mirror those in Fig. 12.22. Consequently, as in (12.100), the output current is expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{o}} \\equiv \\mathrm{i}_{1}-\\mathrm{i}_{2}=\\mathrm{K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{GS}-\\mathrm{eq} 1}+\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}-2 \\mathrm{~V}_{\\mathrm{t}-\\mathrm{eq}}\\right)\\left(\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 1}-\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}\\right) \\tag{12.103}\n\\end{equation*}\n$$\n\nThus, the output current linearly correlates with the difference in equivalent gate-source voltages of the CMOS pairs, provided their sum remains constant. To confirm this constant sum, we observe\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS} \\text {-eq1 }}=\\mathrm{V}_{\\mathrm{C} 1}-\\mathrm{V}_{\\mathrm{in}} \\tag{12.104}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}=\\mathrm{V}_{\\mathrm{in}}-\\mathrm{V}_{\\mathrm{C} 2} \\tag{12.105}\n\\end{equation*}\n$$\n\nyielding\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 1}+\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}=\\mathrm{V}_{\\mathrm{C} 1}-\\mathrm{V}_{\\mathrm{C} 2} \\tag{12.106}\n\\end{equation*}\n$$\n\nAdditionally, the difference in equivalent gate-source voltages is\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 1}-\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}=\\mathrm{V}_{\\mathrm{C} 1}+\\mathrm{V}_{\\mathrm{C} 2}-2 \\mathrm{~V}_{\\mathrm{in}} \\tag{12.107}\n\\end{equation*}\n$$\n\nWhen $\\mathrm{V}_{\\mathrm{C} 2}=-\\mathrm{V}_{\\mathrm{C} 1}$, we obtain\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{o}}=4 \\mathrm{~K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{C} 1}-\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}}\\right)\\left(\\mathrm{V}_{\\mathrm{in}}\\right) \\tag{12.108}\n\\end{equation*}\n$$\n\nThe transconductance can be adjusted by varying the control voltages, $\\mathrm{V}_{\\mathrm{C} 1}$ and $\\mathrm{V}_{\\mathrm{C} 2}$, which are high-input impedance nodes and thus easily modifiable. It is important to note that, for this transconductor, matching is required only within the same type of transistors: n-channel transistors should match each other, and p-channel transistors should match each other, but there is no necessity for cross-matching between n- and p-channel transistors.\n```"
},
{
    "text": "An approach akin to the source-connected differential pair is the inverter-based transconductor, depicted in Fig. 12.24 [Park, 1986]. In this configuration, two CMOS pairs, $Q_{1 a}, Q_{1 b}$ and $Q_{2 a}, Q_{2 b}$, substitute the individual transistors of a conventional CMOS inverter, with the difference in their output currents constituting the overall output current, $\\mathrm{i}_{\\mathrm{o}}$. Assuming all four transistors are in the active region and the CMOS pairs are matched, we can apply prior results for CMOS pairs to derive:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{1}=\\mathrm{K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{GS}-\\mathrm{eq} 1}-\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}}\\right)^{2} \\tag{12.101}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{2}=\\mathrm{K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{GS}-\\mathrm{eq} 2}-\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}}\\right)^{2} \\tag{12.102}\n\\end{equation*}\n$$\n\nThese equations mirror those in Fig. 12.22. Thus, as in (12.100), the output current is expressed as:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{o}} \\equiv \\mathrm{i}_{1}-\\mathrm{i}_{2}=\\mathrm{K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{GS}-\\mathrm{eq} 1}+\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}-2 \\mathrm{~V}_{\\mathrm{t}-\\mathrm{eq}}\\right)\\left(\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 1}-\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}\\right) \\tag{12.103}\n\\end{equation*}\n$$\n\nThe output current is linearly related to the difference in equivalent gate-source voltages of the CMOS pairs, provided their sum remains constant. This constancy is evident from:\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS} \\text {-eq1 }}=\\mathrm{V}_{\\mathrm{C} 1}-\\mathrm{V}_{\\mathrm{in}} \\tag{12.104}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}=\\mathrm{V}_{\\mathrm{in}}-\\mathrm{V}_{\\mathrm{C} 2} \\tag{12.105}\n\\end{equation*}\n$$\n\nleading to:\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 1}+\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}=\\mathrm{V}_{\\mathrm{C} 1}-\\mathrm{V}_{\\mathrm{C} 2} \\tag{12.106}\n\\end{equation*}\n$$\n\nThe difference in equivalent gate-source voltages is:\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 1}-\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}=\\mathrm{V}_{\\mathrm{C} 1}+\\mathrm{V}_{\\mathrm{C} 2}-2 \\mathrm{~V}_{\\mathrm{in}} \\tag{12.107}\n\\end{equation*}\n$$\n\nWhen $\\mathrm{V}_{\\mathrm{C} 2}=-\\mathrm{V}_{\\mathrm{C} 1}$, we obtain:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{o}}=4 \\mathrm{~K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{C} 1}-\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}}\\right)\\left(\\mathrm{V}_{\\mathrm{in}}\\right) \\tag{12.108}\n\\end{equation*}\n$$\n\nThe transconductance can be adjusted by varying the control voltages, $\\mathrm{V}_{\\mathrm{C} 1}$ and $\\mathrm{V}_{\\mathrm{C} 2}$, which are high-input impedance nodes and thus easily modifiable. With this transconductor, matching is only required within the same type of transistors: n-channel transistors should match among themselves, and p-channel transistors should match among themselves, but there is no necessity for cross-matching between n- and p-channel transistors."
},
{
    "text": "The inverter-based transconductor, akin to the source-connected differential pair, is depicted in Fig. 12.24 [Park, 1986]. In this configuration, two CMOS pairs, $Q_{1 a}, Q_{1 b}$ and $Q_{2 a}, Q_{2 b}$, substitute the individual transistors typically found in a standard CMOS inverter. The overall output current, $\\mathrm{i}_{\\mathrm{o}}$, is determined by the difference in their output currents. Assuming all four transistors operate in the active region and the CMOS pairs are matched, we can apply previous CMOS pair results to derive the following equations:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{1}=\\mathrm{K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{GS}-\\mathrm{eq} 1}-\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}}\\right)^{2} \\tag{12.101}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{2}=\\mathrm{K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{GS}-\\mathrm{eq} 2}-\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}}\\right)^{2} \\tag{12.102}\n\\end{equation*}\n$$\n\nThese equations are identical in form to those in Fig. 12.22. Consequently, as in (12.100), the output current is expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{o}} \\equiv \\mathrm{i}_{1}-\\mathrm{i}_{2}=\\mathrm{K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{GS}-\\mathrm{eq} 1}+\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}-2 \\mathrm{~V}_{\\mathrm{t}-\\mathrm{eq}}\\right)\\left(\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 1}-\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}\\right) \\tag{12.103}\n\\end{equation*}\n$$\n\nThe output current is linearly related to the difference in equivalent gate-source voltages of the CMOS pairs, provided their sum remains constant. To verify this constant sum, we have\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS} \\text {-eq1 }}=\\mathrm{V}_{\\mathrm{C} 1}-\\mathrm{V}_{\\mathrm{in}} \\tag{12.104}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}=\\mathrm{V}_{\\mathrm{in}}-\\mathrm{V}_{\\mathrm{C} 2} \\tag{12.105}\n\\end{equation*}\n$$\n\nresulting in\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 1}+\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}=\\mathrm{V}_{\\mathrm{C} 1}-\\mathrm{V}_{\\mathrm{C} 2} \\tag{12.106}\n\\end{equation*}\n$$\n\nAdditionally, the difference in equivalent gate-source voltages is\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 1}-\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}=\\mathrm{V}_{\\mathrm{C} 1}+\\mathrm{V}_{\\mathrm{C} 2}-2 \\mathrm{~V}_{\\mathrm{in}} \\tag{12.107}\n\\end{equation*}\n$$\n\nWhen $\\mathrm{V}_{\\mathrm{C} 2}=-\\mathrm{V}_{\\mathrm{C} 1}$, we obtain\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{o}}=4 \\mathrm{~K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{C} 1}-\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}}\\right)\\left(\\mathrm{V}_{\\mathrm{in}}\\right) \\tag{12.108}\n\\end{equation*}\n$$\n\nThe transconductance can be adjusted by varying the control voltages, $\\mathrm{V}_{\\mathrm{C} 1}$ and $\\mathrm{V}_{\\mathrm{C} 2}$, which are high-input impedance nodes and thus easily modifiable. It is important to note that matching is required only within the same type of transistors: n-channel transistors should match among themselves, and p-channel transistors should match among themselves, but there is no need for cross-matching between n- and p-channel transistors."
},
{
    "text": "The inverter-based transconductor, akin to the source-connected differential pair, is depicted in Fig. 12.24 [Park, 1986]. In this configuration, two CMOS pairs, $Q_{1 a}, Q_{1 b}$ and $Q_{2 a}, Q_{2 b}$, substitute the individual transistors typically found in a standard CMOS inverter, with the disparity in their output currents constituting the overall output current, $\\mathrm{i}_{\\mathrm{o}}$. Assuming all four transistors operate in the active region and the CMOS pairs are matched, we can apply prior results for CMOS pairs to derive the following equations:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{1}=\\mathrm{K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{GS}-\\mathrm{eq} 1}-\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}}\\right)^{2} \\tag{12.101}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{2}=\\mathrm{K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{GS}-\\mathrm{eq} 2}-\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}}\\right)^{2} \\tag{12.102}\n\\end{equation*}\n$$\n\nThese equations mirror those presented in Fig. 12.22. Consequently, as in (12.100), the output current is expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{o}} \\equiv \\mathrm{i}_{1}-\\mathrm{i}_{2}=\\mathrm{K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{GS}-\\mathrm{eq} 1}+\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}-2 \\mathrm{~V}_{\\mathrm{t}-\\mathrm{eq}}\\right)\\left(\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 1}-\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}\\right) \\tag{12.103}\n\\end{equation*}\n$$\n\nThus, the output current is linearly proportional to the difference in equivalent gate-source voltages of the CMOS pairs, provided their sum remains constant. To confirm this constant sum, we have\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS} \\text {-eq1 }}=\\mathrm{V}_{\\mathrm{C} 1}-\\mathrm{V}_{\\mathrm{in}} \\tag{12.104}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}=\\mathrm{V}_{\\mathrm{in}}-\\mathrm{V}_{\\mathrm{C} 2} \\tag{12.105}\n\\end{equation*}\n$$\n\nleading to\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 1}+\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}=\\mathrm{V}_{\\mathrm{C} 1}-\\mathrm{V}_{\\mathrm{C} 2} \\tag{12.106}\n\\end{equation*}\n$$\n\nAdditionally, the difference in equivalent gate-source voltages is\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 1}-\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}=\\mathrm{V}_{\\mathrm{C} 1}+\\mathrm{V}_{\\mathrm{C} 2}-2 \\mathrm{~V}_{\\mathrm{in}} \\tag{12.107}\n\\end{equation*}\n$$\n\nUltimately, if we select $\\mathrm{V}_{\\mathrm{C} 2}=-\\mathrm{V}_{\\mathrm{C} 1}$, we obtain\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{o}}=4 \\mathrm{~K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{C} 1}-\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}}\\right)\\left(\\mathrm{V}_{\\mathrm{in}}\\right) \\tag{12.108}\n\\end{equation*}\n$$\n\nThe transconductance can be adjusted by varying the control voltages, $\\mathrm{V}_{\\mathrm{C} 1}$ and $\\mathrm{V}_{\\mathrm{C} 2}$, which are high-input impedance nodes and thus easily modifiable. It is important to note that, with this transconductor, matching is only required within the same type of transistors: n-channel transistors should match each other, and p-channel transistors should match each other, but there is no necessity for cross-matching between n- and p-channel transistors."
},
{
    "text": "The rephrased text:\n\n```\nAn approach akin to the source-connected differential pair is the inverter-based transconductor, depicted in Fig. 12.24 [Park, 1986]. In this configuration, two CMOS pairs, $Q_{1 a}, Q_{1 b}$ and $Q_{2 a}, Q_{2 b}$, substitute the individual transistors of a conventional CMOS inverter, with the disparity in their output currents constituting the overall output current, $\\mathrm{i}_{\\mathrm{o}}$. Assuming all four transistors operate in the active region and the CMOS pairs are matched, we can apply prior results for CMOS pairs to derive:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{1}=\\mathrm{K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{GS}-\\mathrm{eq} 1}-\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}}\\right)^{2} \\tag{12.101}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{2}=\\mathrm{K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{GS}-\\mathrm{eq} 2}-\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}}\\right)^{2} \\tag{12.102}\n\\end{equation*}\n$$\n\nThese equations mirror those in Fig. 12.22. Hence, as per (12.100), the output current is expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{o}} \\equiv \\mathrm{i}_{1}-\\mathrm{i}_{2}=\\mathrm{K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{GS}-\\mathrm{eq} 1}+\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}-2 \\mathrm{~V}_{\\mathrm{t}-\\mathrm{eq}}\\right)\\left(\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 1}-\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}\\right) \\tag{12.103}\n\\end{equation*}\n$$\n\nThus, the output current linearly correlates with the difference in equivalent gate-source voltages of the CMOS pairs, provided their sum remains constant. To verify this constant sum, we have:\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS} \\text {-eq1 }}=\\mathrm{V}_{\\mathrm{C} 1}-\\mathrm{V}_{\\mathrm{in}} \\tag{12.104}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}=\\mathrm{V}_{\\mathrm{in}}-\\mathrm{V}_{\\mathrm{C} 2} \\tag{12.105}\n\\end{equation*}\n$$\n\nyielding\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 1}+\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}=\\mathrm{V}_{\\mathrm{C} 1}-\\mathrm{V}_{\\mathrm{C} 2} \\tag{12.106}\n\\end{equation*}\n$$\n\nAdditionally, the difference in equivalent gate-source voltages is:\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 1}-\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}=\\mathrm{V}_{\\mathrm{C} 1}+\\mathrm{V}_{\\mathrm{C} 2}-2 \\mathrm{~V}_{\\mathrm{in}} \\tag{12.107}\n\\end{equation*}\n$$\n\nWhen $\\mathrm{V}_{\\mathrm{C} 2}=-\\mathrm{V}_{\\mathrm{C} 1}$, we obtain:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{o}}=4 \\mathrm{~K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{C} 1}-\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}}\\right)\\left(\\mathrm{V}_{\\mathrm{in}}\\right) \\tag{12.108}\n\\end{equation*}\n$$\n\nThe transconductance can be adjusted by modifying the control voltages, $\\mathrm{V}_{\\mathrm{C} 1}$ and $\\mathrm{V}_{\\mathrm{C} 2}$, which are high-input impedance nodes and thus easily tunable. Note that for this transconductor, matching is required only within the same type of transistors: n-channel transistors should match among themselves, and p-channel transistors should match among themselves, but there is no necessity for cross-matching between n- and p-channel transistors.\n```"
},
{
    "text": "The rephrased text:\n\n```\nAn approach akin to the source-connected differential pair is the inverter-based transconductor, depicted in Fig. 12.24 [Park, 1986]. In this configuration, two CMOS pairs, $Q_{1 a}, Q_{1 b}$ and $Q_{2 a}, Q_{2 b}$, substitute the individual transistors of a conventional CMOS inverter, with the difference in their output currents constituting the overall output current, $\\mathrm{i}_{\\mathrm{o}}$. Assuming all four transistors operate in the active region and the CMOS pairs are matched, we can apply prior results for CMOS pairs to derive\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{1}=\\mathrm{K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{GS}-\\mathrm{eq} 1}-\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}}\\right)^{2} \\tag{12.101}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{2}=\\mathrm{K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{GS}-\\mathrm{eq} 2}-\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}}\\right)^{2} \\tag{12.102}\n\\end{equation*}\n$$\n\nThese equations mirror those in Fig. 12.22. Consequently, as in (12.100), the output current is expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{o}} \\equiv \\mathrm{i}_{1}-\\mathrm{i}_{2}=\\mathrm{K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{GS}-\\mathrm{eq} 1}+\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}-2 \\mathrm{~V}_{\\mathrm{t}-\\mathrm{eq}}\\right)\\left(\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 1}-\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}\\right) \\tag{12.103}\n\\end{equation*}\n$$\n\nThus, the output current is linearly related to the difference in equivalent gate-source voltages of the CMOS pairs, provided their sum remains constant. To demonstrate this constant sum, we have\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS} \\text {-eq1 }}=\\mathrm{V}_{\\mathrm{C} 1}-\\mathrm{V}_{\\mathrm{in}} \\tag{12.104}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}=\\mathrm{V}_{\\mathrm{in}}-\\mathrm{V}_{\\mathrm{C} 2} \\tag{12.105}\n\\end{equation*}\n$$\n\nleading to\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 1}+\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}=\\mathrm{V}_{\\mathrm{C} 1}-\\mathrm{V}_{\\mathrm{C} 2} \\tag{12.106}\n\\end{equation*}\n$$\n\nAdditionally, the difference in equivalent gate-source voltages is\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 1}-\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}=\\mathrm{V}_{\\mathrm{C} 1}+\\mathrm{V}_{\\mathrm{C} 2}-2 \\mathrm{~V}_{\\mathrm{in}} \\tag{12.107}\n\\end{equation*}\n$$\n\nWhen $\\mathrm{V}_{\\mathrm{C} 2}=-\\mathrm{V}_{\\mathrm{C} 1}$, we obtain\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{o}}=4 \\mathrm{~K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{C} 1}-\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}}\\right)\\left(\\mathrm{V}_{\\mathrm{in}}\\right) \\tag{12.108}\n\\end{equation*}\n$$\n\nThe transconductance can be adjusted by varying the control voltages, $\\mathrm{V}_{\\mathrm{C} 1}$ and $\\mathrm{V}_{\\mathrm{C} 2}$, which are high-input impedance nodes and thus easily modifiable. Note that for this transconductor, matching is required only within the same type of transistors: n-channel transistors should match among themselves, and p-channel transistors should match among themselves, but there is no need for cross-matching between n- and p-channel transistors.\n```"
},
{
    "text": "The inverter-based transconductor, akin to the source-connected differential pair, is depicted in Fig. 12.24 [Park, 1986]. In this configuration, two CMOS pairs, $Q_{1 a}, Q_{1 b}$ and $Q_{2 a}, Q_{2 b}$, substitute the individual transistors found in a conventional CMOS inverter, with the disparity in their output currents constituting the overall output current, $\\mathrm{i}_{\\mathrm{o}}$. Assuming all four transistors operate in the active region and the CMOS pairs are matched, we can apply prior results for CMOS pairs to derive the following equations:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{1}=\\mathrm{K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{GS}-\\mathrm{eq} 1}-\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}}\\right)^{2} \\tag{12.101}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{2}=\\mathrm{K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{GS}-\\mathrm{eq} 2}-\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}}\\right)^{2} \\tag{12.102}\n\\end{equation*}\n$$\n\nThese equations mirror those in Fig. 12.22. Consequently, as in (12.100), the output current is expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{o}} \\equiv \\mathrm{i}_{1}-\\mathrm{i}_{2}=\\mathrm{K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{GS}-\\mathrm{eq} 1}+\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}-2 \\mathrm{~V}_{\\mathrm{t}-\\mathrm{eq}}\\right)\\left(\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 1}-\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}\\right) \\tag{12.103}\n\\end{equation*}\n$$\n\nThus, the output current is linearly proportional to the difference in equivalent gate-source voltages of the CMOS pairs, provided their sum remains constant. To confirm this constant sum, we have\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS} \\text {-eq1 }}=\\mathrm{V}_{\\mathrm{C} 1}-\\mathrm{V}_{\\mathrm{in}} \\tag{12.104}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}=\\mathrm{V}_{\\mathrm{in}}-\\mathrm{V}_{\\mathrm{C} 2} \\tag{12.105}\n\\end{equation*}\n$$\n\nleading to\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 1}+\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}=\\mathrm{V}_{\\mathrm{C} 1}-\\mathrm{V}_{\\mathrm{C} 2} \\tag{12.106}\n\\end{equation*}\n$$\n\nAdditionally, the difference in equivalent gate-source voltages is\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 1}-\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}=\\mathrm{V}_{\\mathrm{C} 1}+\\mathrm{V}_{\\mathrm{C} 2}-2 \\mathrm{~V}_{\\mathrm{in}} \\tag{12.107}\n\\end{equation*}\n$$\n\nWhen $\\mathrm{V}_{\\mathrm{C} 2}=-\\mathrm{V}_{\\mathrm{C} 1}$, we obtain\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{o}}=4 \\mathrm{~K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{C} 1}-\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}}\\right)\\left(\\mathrm{V}_{\\mathrm{in}}\\right) \\tag{12.108}\n\\end{equation*}\n$$\n\nThe transconductance can be adjusted by varying the control voltages, $\\mathrm{V}_{\\mathrm{C} 1}$ and $\\mathrm{V}_{\\mathrm{C} 2}$, which are high-input impedance nodes and thus easily modifiable. It is important to note that, with this transconductor, matching is required only within the same type of transistors: n-channel transistors should match each other, and p-channel transistors should match each other, but there is no necessity for matching between n- and p-channel transistors."
},
{
    "text": "An approach akin to the source-connected differential pair is the inverter-based transconductor, depicted in Fig. 12.24 [Park, 1986]. In this configuration, two CMOS pairs, $Q_{1 a}, Q_{1 b}$ and $Q_{2 a}, Q_{2 b}$, substitute the individual transistors of a conventional CMOS inverter, with the difference in their output currents constituting the overall output current, $\\mathrm{i}_{\\mathrm{o}}$. Assuming all four transistors are in the active region and the CMOS pairs are matched, we can apply prior results for CMOS pairs to derive:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{1}=\\mathrm{K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{GS}-\\mathrm{eq} 1}-\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}}\\right)^{2} \\tag{12.101}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{2}=\\mathrm{K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{GS}-\\mathrm{eq} 2}-\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}}\\right)^{2} \\tag{12.102}\n\\end{equation*}\n$$\n\nThese equations mirror those in Fig. 12.22. Consequently, as in (12.100), the output current is expressed as:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{o}} \\equiv \\mathrm{i}_{1}-\\mathrm{i}_{2}=\\mathrm{K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{GS}-\\mathrm{eq} 1}+\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}-2 \\mathrm{~V}_{\\mathrm{t}-\\mathrm{eq}}\\right)\\left(\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 1}-\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}\\right) \\tag{12.103}\n\\end{equation*}\n$$\n\nThus, the output current is linearly related to the difference in equivalent gate-source voltages of the CMOS pairs, provided their sum remains constant. To demonstrate this constant sum, we have:\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS} \\text {-eq1 }}=\\mathrm{V}_{\\mathrm{C} 1}-\\mathrm{V}_{\\mathrm{in}} \\tag{12.104}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}=\\mathrm{V}_{\\mathrm{in}}-\\mathrm{V}_{\\mathrm{C} 2} \\tag{12.105}\n\\end{equation*}\n$$\n\nyielding\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 1}+\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}=\\mathrm{V}_{\\mathrm{C} 1}-\\mathrm{V}_{\\mathrm{C} 2} \\tag{12.106}\n\\end{equation*}\n$$\n\nAdditionally, the difference in equivalent gate-source voltages is:\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 1}-\\mathrm{V}_{\\mathrm{GS}-\\mathrm{eq} 2}=\\mathrm{V}_{\\mathrm{C} 1}+\\mathrm{V}_{\\mathrm{C} 2}-2 \\mathrm{~V}_{\\mathrm{in}} \\tag{12.107}\n\\end{equation*}\n$$\n\nWhen $\\mathrm{V}_{\\mathrm{C} 2}=-\\mathrm{V}_{\\mathrm{C} 1}$, we obtain:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{o}}=4 \\mathrm{~K}_{\\mathrm{eq}}\\left(\\mathrm{~V}_{\\mathrm{C} 1}-\\mathrm{V}_{\\mathrm{t}-\\mathrm{eq}}\\right)\\left(\\mathrm{V}_{\\mathrm{in}}\\right) \\tag{12.108}\n\\end{equation*}\n$$\n\nThe transconductance can be adjusted by varying the control voltages, $\\mathrm{V}_{\\mathrm{C} 1}$ and $\\mathrm{V}_{\\mathrm{C} 2}$, which are high-input impedance nodes and thus easily modifiable. It is important to note that, for this transconductor, matching is only required within the same type of transistors: n-channel transistors should match each other, and p-channel transistors should match each other, but there is no need for cross-matching between n- and p-channel transistors."
},
{
    "text": "Another method to sustain a consistent sum of gate-source voltages involves employing two floating dc voltage sources, as depicted in Fig. 12.25 [Nedungadi, 1984]. By writing a voltage equation for the loop, we derive\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS} 1}-\\left(\\mathrm{V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}\\right)+\\mathrm{V}_{\\mathrm{GS} 2}-\\left(\\mathrm{V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}\\right)=0 \\tag{12.109}\n\\end{equation*}\n$$\n\nwhich simplifies to\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS} 1}+\\mathrm{V}_{\\mathrm{GS} 2}=2\\left(\\mathrm{~V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}\\right) \\tag{12.110}\n\\end{equation*}\n$$\n\nConsequently, this configuration ensures a constant sum of gate-source voltages, even when the applied differential signal is unbalanced. Additionally, by formulating two equations describing the relationship between $v_{1}$ and $v_{2}$, we get\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{1}-\\mathrm{V}_{\\mathrm{GS} 1}+\\mathrm{V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}=\\mathrm{V}_{2} \\tag{12.111}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{2}-\\mathrm{V}_{\\mathrm{GS} 2}+\\mathrm{V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}=\\mathrm{V}_{1} \\tag{12.112}\n\\end{equation*}\n$$\n\nSubtracting (12.111) from (12.112) and rearranging, we obtain\n\n$$\n\\begin{equation*}\n\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{v}_{\\mathrm{GS} 2}=2\\left(\\mathrm{v}_{1}-\\mathrm{v}_{2}\\right) \\tag{12.113}\n\\end{equation*}\n$$\n\nThus, the difference between the input voltages equals half the difference between the gate-source voltages. Finally, the differential output current is determined by combining (12.100), (12.110), and (12.113), resulting in\n\n$$\n\\begin{equation*}\n\\left(i_{D 1}-i_{D 2}\\right)=4 K V_{x}\\left(v_{1}-v_{2}\\right) \\tag{12.114}\n\\end{equation*}\n$$\n\nA straightforward method to implement the floating voltage sources in Fig. 12.25 is by using two source followers, as illustrated in Fig. 12.26 [Nedungadi, 1984]. The transistors labeled nK are n times larger than the other two, hence\nimage_name:Fig. 12.25\ndescription:The circuit is a linearized differential pair using floating voltage sources. It includes two NMOS transistors (M1 and M2) with their gates driven by separate voltage sources (VGS1 and VGS2). The differential output current is determined by the difference between the drain currents of M1 and M2.\n\n$$\n\\begin{aligned}\n\\left(\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{i}_{\\mathrm{D} 2}\\right) & =4 \\mathrm{KV} \\mathrm{~V}_{\\mathrm{x}}\\left(\\mathrm{v}_{1}-\\mathrm{V}_{2}\\right) \\\\\n\\mathrm{G}_{\\mathrm{m}} & =4 \\mathrm{KV} \\mathrm{~V}_{\\mathrm{x}}\n\\end{aligned}\n$$\n\nFig. 12.25 A linearized differential pair using floating voltage sources.\nimage_name:Fig. 12.26 A linear transconductor for large n.\ndescription:This circuit is a linear transconductor for large n, utilizing NMOS transistors M1, M2, and M3. The differential output current is determined by the drain currents of M1 and M2. The current sources provide a bias current of (n+1)IB. The circuit operates between VDD and VSS.\n\n$$\n\\begin{array}{r}\n\\left(i_{D 1}-i_{D 2}\\right)=\\left(\\frac{n}{n+1}\\right) 4 \\sqrt{K I_{B}}\\left(v_{1}-v_{2}\\right) \\\\\nG_{m}=\\left(\\frac{n}{n+1}\\right) 4 \\sqrt{K I_{B}}\n\\end{array}\n$$\n\nFig. 12.26 A linear transconductor for large n.\nimage_name:Fig. 12.27 A linearized differential pair\ndescription:The circuit is a linearized differential pair using NMOS and PMOS transistors. It includes floating voltage sources that drive only the transistor gates. The differential output current is determined by the drain currents of the NMOS transistors Q1a and Q2a.\n\n$$\n\\left(\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{i}_{\\mathrm{D} 2}\\right)=4 \\mathrm{~K}_{\\mathrm{eq}} \\mathrm{~V}_{\\mathrm{x}}\\left(\\mathrm{v}_{1}-\\mathrm{v}_{2}\\right)\n$$\n\nFig. 12.27 A linearized differential pair in which the floating voltage sources need drive only the transistor gates.\nimage_name:Fig. 12.28\ndescription:The circuit is a linearized differential pair using NMOS and PMOS transistors with floating voltage sources driving only the transistor gates. The differential output current is determined by the drain currents of NMOS transistors Q1a and Q2a, expressed as (i_D1 - i_D2) = 4 * sqrt(K_eq) * I_B * (v1 - v2). The circuit is designed to act as a transconductor with a transconductance G_m = 4 * sqrt(K_eq) * I_B.\n\nFig. 12.28 A transconductor that uses CMOS pairs and floating voltage sources.\nthey function as source followers when n is large (typically, when n is 5 or more). If n is not large, the bias current through the source followers varies with the input signal, degrading linearity. A drawback of this circuit is the large dc bias current through the source followers. However, for moderate linearity and small input signals (e.g., 500 mV), this method can be quite effective.\n\nSince creating a floating voltage source to drive another transistor's source is challenging, an alternative is to modify the Fig. 12.25 circuit so that the floating voltage sources only drive the transistor gates. This can be achieved by replacing the single transistors in Fig. 12.25 with their CMOS pairs, as shown in Fig. 12.27. Note that the voltage sources must now exceed $\\mathrm{V}_{\\mathrm{t} \\text {-eq }}$ and include a controllable $\\mathrm{V}_{\\mathrm{x}}$ voltage. Fortunately, such configurations can be easily realized using two additional CMOS pairs, as shown in Fig. 12.28, where $\\mathrm{Q}_{3 \\mathrm{a}}, \\mathrm{Q}_{3 \\mathrm{~b}}$ and $\\mathrm{Q}_{4 \\mathrm{a}}, \\mathrm{Q}_{4 \\mathrm{~b}}$ are added along with two adjustable current sources [Seevinck, 1987]. Referring to (12.99), $\\mathrm{V}_{\\mathrm{x}}$ is given by\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{x}}=\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{eq}}}} \\sqrt{\\mathrm{I}_{\\mathrm{B}}} \\tag{12.115}\n\\end{equation*}\n$$\n\nassuming all CMOS pairs are matched for simplicity. Consequently, the differential output current is\n\n$$\n\\begin{equation*}\n\\left(i_{D 1}-i_{D 2}\\right)=4 \\sqrt{K_{e q} I_{B}}\\left(v_{1}-v_{2}\\right) \\tag{12.116}\n\\end{equation*}\n$$\n\nThus, the output current can be adjusted by varying the dc bias current, $\\mathrm{I}_{\\mathrm{B}}$. Note that the transconductance coefficient is proportional to the square root of $I_{B}$, so a fourfold increase in current results in only a twofold increase in the coefficient.\n\nBefore concluding, a couple of points deserve mention. First, the output currents from this circuit are available at both the upper pair, $Q_{1 a}, Q_{2 a}$, and the lower pair, $Q_{1 b}, Q_{2 b}$, which may be beneficial for subsequent transconductor circuitry. Second, $V_{\\text {ss }}$ must be at least $V_{\\mathrm{tn}}+\\left|V_{\\mathrm{tp}}\\right|$ below the most negative input signal swing of either $v_{1}$ or $v_{2}$. If $v_{1}$ and $v_{2}$ have $\\pm 1-V$ signals around ground, then for $\\mathrm{V}_{\\mathrm{tn}}=-\\mathrm{V}_{\\mathrm{tp}}=1 \\mathrm{~V}$, $\\mathrm{V}_{\\mathrm{ss}}$ would need to be less than -3 V. Thus, with symmetrical power supplies, a 6-V power supply would be necessary for a $2-\\mathrm{V}$ signal swing."
},
{
    "text": "An alternative method to sustain a consistent sum of gate-source voltages involves employing two floating dc voltage sources, as depicted in Fig. 12.25 [Nedungadi, 1984]. By writing a voltage equation around the loop, we derive\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS} 1}-\\left(\\mathrm{V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}\\right)+\\mathrm{V}_{\\mathrm{GS} 2}-\\left(\\mathrm{V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}\\right)=0 \\tag{12.109}\n\\end{equation*}\n$$\n\nwhich simplifies to\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS} 1}+\\mathrm{V}_{\\mathrm{GS} 2}=2\\left(\\mathrm{~V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}\\right) \\tag{12.110}\n\\end{equation*}\n$$\n\nConsequently, this circuit preserves a constant sum of gate-source voltages, even if the applied differential signal is unbalanced. Additionally, by formulating two equations that describe the relationship between $v_{1}$ and $v_{2}$, we obtain\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{1}-\\mathrm{V}_{\\mathrm{GS} 1}+\\mathrm{V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}=\\mathrm{V}_{2} \\tag{12.111}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{2}-\\mathrm{V}_{\\mathrm{GS} 2}+\\mathrm{V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}=\\mathrm{V}_{1} \\tag{12.112}\n\\end{equation*}\n$$\n\nSubtracting (12.111) from (12.112) and rearranging, we get\n\n$$\n\\begin{equation*}\n\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{v}_{\\mathrm{GS} 2}=2\\left(\\mathrm{v}_{1}-\\mathrm{v}_{2}\\right) \\tag{12.113}\n\\end{equation*}\n$$\n\nThus, the difference between the input voltages equals one-half the difference between the gate-source voltages. Finally, the differential output current is determined by combining (12.100), (12.110), and (12.113), resulting in\n\n$$\n\\begin{equation*}\n\\left(i_{D 1}-i_{D 2}\\right)=4 K V_{x}\\left(v_{1}-v_{2}\\right) \\tag{12.114}\n\\end{equation*}\n$$\n\nA straightforward method to implement the floating voltage sources in Fig. 12.25 is to utilize two source followers, as illustrated in Fig. 12.26 [Nedungadi, 1984]. The transistors labeled nK are n times larger than the other two transistors, and thus\nimage_name:Fig. 12.25\ndescription:The circuit is a linearized differential pair using floating voltage sources. It comprises two NMOS transistors (M1 and M2) with their gates driven by separate voltage sources (VGS1 and VGS2). The differential output current is determined by the difference between the drain currents of M1 and M2.\n\n$$\n\\begin{aligned}\n\\left(\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{i}_{\\mathrm{D} 2}\\right) & =4 \\mathrm{KV} \\mathrm{~V}_{\\mathrm{x}}\\left(\\mathrm{v}_{1}-\\mathrm{V}_{2}\\right) \\\\\n\\mathrm{G}_{\\mathrm{m}} & =4 \\mathrm{KV} \\mathrm{~V}_{\\mathrm{x}}\n\\end{aligned}\n$$\n\nFig. 12.25 A linearized differential pair using floating voltage sources.\nimage_name:Fig. 12.26 A linear transconductor for large n.\ndescription:This circuit is a linear transconductor for large n, employing NMOS transistors M1, M2, and M3. The differential output current is determined by the drain currents of M1 and M2. The current sources provide a bias current of (n+1)IB. The circuit operates between VDD and VSS.\n\n$$\n\\begin{array}{r}\n\\left(i_{D 1}-i_{D 2}\\right)=\\left(\\frac{n}{n+1}\\right) 4 \\sqrt{K I_{B}}\\left(v_{1}-v_{2}\\right) \\\\\nG_{m}=\\left(\\frac{n}{n+1}\\right) 4 \\sqrt{K I_{B}}\n\\end{array}\n$$\n\nFig. 12.26 A linear transconductor for large n.\nimage_name:Fig. 12.27 A linearized differential pair\ndescription:The circuit is a linearized differential pair using NMOS and PMOS transistors. It includes floating voltage sources that drive only the transistor gates. The differential output current is determined by the drain currents of the NMOS transistors Q1a and Q2a.\n\n$$\n\\left(\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{i}_{\\mathrm{D} 2}\\right)=4 \\mathrm{~K}_{\\mathrm{eq}} \\mathrm{~V}_{\\mathrm{x}}\\left(\\mathrm{v}_{1}-\\mathrm{v}_{2}\\right)\n$$\n\nFig. 12.27 A linearized differential pair in which the floating voltage sources need drive only the transistor gates.\nimage_name:Fig. 12.28\ndescription:The circuit is a linearized differential pair using NMOS and PMOS transistors with floating voltage sources driving only the transistor gates. The differential output current is determined by the drain currents of NMOS transistors Q1a and Q2a, expressed as (i_D1 - i_D2) = 4 * sqrt(K_eq) * I_B * (v1 - v2). The circuit is designed to act as a transconductor with a transconductance G_m = 4 * sqrt(K_eq) * I_B.\n\nFig. 12.28 A transconductor that uses CMOS pairs and floating voltage sources.\nthey function as source followers when n is large (typically, when n is 5 or more). If n is not large, the bias current through the two source followers varies with the input signal, degrading linearity. A drawback of this circuit is the large dc bias current passing through the two source followers. However, if moderate linearity is acceptable and the input signal is relatively small (e.g., 500 mV), this method can be quite effective.\n\nGiven the difficulty in realizing a floating voltage source that drives the source of another transistor, an alternative approach is to modify the circuit of Fig. 12.25 so that the floating voltage sources only need to drive the transistor gates. This modification is feasible by replacing the single transistors in Fig. 12.25 with their CMOS pairs, as shown in Fig. 12.27. Note that the voltage sources must now exceed $\\mathrm{V}_{\\mathrm{t} \\text {-eq }}$ and include a controllable $\\mathrm{V}_{\\mathrm{x}}$ voltage. Fortunately, such circuits can be easily implemented using two additional CMOS pairs, as shown in Fig. 12.28, where the pairs $\\mathrm{Q}_{3 \\mathrm{a}}, \\mathrm{Q}_{3 \\mathrm{~b}}$ and $\\mathrm{Q}_{4 \\mathrm{a}}, \\mathrm{Q}_{4 \\mathrm{~b}}$ have been added along with two adjustable current sources [Seevinck, 1987]. Referring back to (12.99), we find that $\\mathrm{V}_{\\mathrm{x}}$ is given by\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{x}}=\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{eq}}}} \\sqrt{\\mathrm{I}_{\\mathrm{B}}} \\tag{12.115}\n\\end{equation*}\n$$\n\nwhere, for simplicity, we assume all CMOS pairs are matched. Consequently, the differential output current is\n\n$$\n\\begin{equation*}\n\\left(i_{D 1}-i_{D 2}\\right)=4 \\sqrt{K_{e q} I_{B}}\\left(v_{1}-v_{2}\\right) \\tag{12.116}\n\\end{equation*}\n$$\n\nThus, the output current can be adjusted by tuning the dc bias current, $\\mathrm{I}_{\\mathrm{B}}$. Note that the transconductance coefficient is proportional to the square root of $I_{B}$, meaning a fourfold increase in current results in only a twofold increase in the coefficient.\n\nBefore concluding, a couple of points deserve mention. First, the output currents from this circuit are available at both the upper pair, $Q_{1 a}, Q_{2 a}$, and the lower pair, $Q_{1 b}, Q_{2 b}$, offering flexibility for subsequent transconductor circuitry. Second, $V_{\\text {ss }}$ must be at least $V_{\\mathrm{tn}}+\\left|V_{\\mathrm{tp}}\\right|$ below the most negative input signal swing of either $v_{1}$ or $V_{2}$. Assuming $v_{1}$ and $v_{2}$ have $\\pm 1-V$ signals around ground, and for $\\mathrm{V}_{\\mathrm{tn}}=-\\mathrm{V}_{\\mathrm{tp}}=1 \\mathrm{~V}$, $\\mathrm{V}_{\\mathrm{ss}}$ would need to be less than -3 V. Thus, with symmetrical power supplies, a 6-V power supply would be necessary for only a $2-\\mathrm{V}$ signal swing."
},
{
    "text": "An alternative method to sustain a consistent sum of gate-source voltages involves employing two floating dc voltage sources, as depicted in Fig. 12.25 [Nedungadi, 1984]. By writing a voltage equation around the loop, we derive\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS} 1}-\\left(\\mathrm{V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}\\right)+\\mathrm{V}_{\\mathrm{GS} 2}-\\left(\\mathrm{V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}\\right)=0 \\tag{12.109}\n\\end{equation*}\n$$\n\nwhich simplifies to\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS} 1}+\\mathrm{V}_{\\mathrm{GS} 2}=2\\left(\\mathrm{~V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}\\right) \\tag{12.110}\n\\end{equation*}\n$$\n\nConsequently, this configuration ensures a constant sum of gate-source voltages, even if the applied differential signal is unbalanced. Additionally, by formulating two equations that describe the relationship between $v_{1}$ and $v_{2}$, we obtain\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{1}-\\mathrm{V}_{\\mathrm{GS} 1}+\\mathrm{V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}=\\mathrm{V}_{2} \\tag{12.111}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{2}-\\mathrm{V}_{\\mathrm{GS} 2}+\\mathrm{V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}=\\mathrm{V}_{1} \\tag{12.112}\n\\end{equation*}\n$$\n\nSubtracting (12.111) from (12.112) and rearranging yields\n\n$$\n\\begin{equation*}\n\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{v}_{\\mathrm{GS} 2}=2\\left(\\mathrm{v}_{1}-\\mathrm{v}_{2}\\right) \\tag{12.113}\n\\end{equation*}\n$$\n\nThus, the difference between the input voltages equals half the difference between the gate-source voltages. Finally, the differential output current is determined by combining (12.100), (12.110), and (12.113), resulting in\n\n$$\n\\begin{equation*}\n\\left(i_{D 1}-i_{D 2}\\right)=4 K V_{x}\\left(v_{1}-v_{2}\\right) \\tag{12.114}\n\\end{equation*}\n$$\n\nA straightforward method to implement the floating voltage sources in Fig. 12.25 is to utilize two source followers, as illustrated in Fig. 12.26 [Nedungadi, 1984]. The transistors labeled nK are n times larger than the other two transistors, and thus\nimage_name:Fig. 12.25\ndescription:The circuit is a linearized differential pair using floating voltage sources. It includes two NMOS transistors (M1 and M2) with their gates driven by separate voltage sources (VGS1 and VGS2). The differential output current is determined by the difference between the drain currents of M1 and M2.\n\n$$\n\\begin{aligned}\n\\left(\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{i}_{\\mathrm{D} 2}\\right) & =4 \\mathrm{KV} \\mathrm{~V}_{\\mathrm{x}}\\left(\\mathrm{v}_{1}-\\mathrm{V}_{2}\\right) \\\\\n\\mathrm{G}_{\\mathrm{m}} & =4 \\mathrm{KV} \\mathrm{~V}_{\\mathrm{x}}\n\\end{aligned}\n$$\n\nFig. 12.25 A linearized differential pair using floating voltage sources.\nimage_name:Fig. 12.26 A linear transconductor for large n.\ndescription:This circuit is a linear transconductor for large n, utilizing NMOS transistors M1, M2, and M3. The differential output current is determined by the drain currents of M1 and M2. The current sources provide a bias current of (n+1)IB. The circuit operates between VDD and VSS.\n\n$$\n\\begin{array}{r}\n\\left(i_{D 1}-i_{D 2}\\right)=\\left(\\frac{n}{n+1}\\right) 4 \\sqrt{K I_{B}}\\left(v_{1}-v_{2}\\right) \\\\\nG_{m}=\\left(\\frac{n}{n+1}\\right) 4 \\sqrt{K I_{B}}\n\\end{array}\n$$\n\nFig. 12.26 A linear transconductor for large n.\nimage_name:Fig. 12.27 A linearized differential pair\ndescription:The circuit is a linearized differential pair using NMOS and PMOS transistors. It includes floating voltage sources that drive only the transistor gates. The differential output current is determined by the drain currents of the NMOS transistors Q1a and Q2a.\n\n$$\n\\left(\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{i}_{\\mathrm{D} 2}\\right)=4 \\mathrm{~K}_{\\mathrm{eq}} \\mathrm{~V}_{\\mathrm{x}}\\left(\\mathrm{v}_{1}-\\mathrm{v}_{2}\\right)\n$$\n\nFig. 12.27 A linearized differential pair in which the floating voltage sources need drive only the transistor gates.\nimage_name:Fig. 12.28\ndescription:The circuit is a linearized differential pair using NMOS and PMOS transistors with floating voltage sources driving only the transistor gates. The differential output current is determined by the drain currents of NMOS transistors Q1a and Q2a, expressed as (i_D1 - i_D2) = 4 * sqrt(K_eq) * I_B * (v1 - v2). The circuit is designed to act as a transconductor with a transconductance G_m = 4 * sqrt(K_eq) * I_B.\n\nFig. 12.28 A transconductor that uses CMOS pairs and floating voltage sources.\nthey function as source followers when n is large (typically, when n is 5 or more). If n is not large, the bias current through the two source followers varies with the input signal, degrading linearity. A drawback of this circuit is the large dc bias current passing through the two source followers. However, if moderate linearity is acceptable and the input signal is relatively small (e.g., 500 mV), this method can be quite effective.\n\nGiven the challenge of realizing a floating voltage source that drives the source of another transistor, an alternative is to modify the circuit of Fig. 12.25 so that the floating voltage sources only need to drive the transistor gates. This modification is feasible by replacing the single transistors in Fig. 12.25 with their CMOS pairs, as shown in Fig. 12.27. Note that the voltage sources must now exceed $\\mathrm{V}_{\\mathrm{t} \\text {-eq }}$ and include a controllable $\\mathrm{V}_{\\mathrm{x}}$ voltage. Fortunately, such circuits can be easily implemented using two additional CMOS pairs, as shown in Fig. 12.28, where the pairs $\\mathrm{Q}_{3 \\mathrm{a}}, \\mathrm{Q}_{3 \\mathrm{~b}}$ and $\\mathrm{Q}_{4 \\mathrm{a}}, \\mathrm{Q}_{4 \\mathrm{~b}}$ have been added along with two adjustable current sources [Seevinck, 1987]. Referring back to (12.99), we find that $\\mathrm{V}_{\\mathrm{x}}$ is given by\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{x}}=\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{eq}}}} \\sqrt{\\mathrm{I}_{\\mathrm{B}}} \\tag{12.115}\n\\end{equation*}\n$$\n\nassuming, for simplicity, that all CMOS pairs are matched. Consequently, the differential output current is\n\n$$\n\\begin{equation*}\n\\left(i_{D 1}-i_{D 2}\\right)=4 \\sqrt{K_{e q} I_{B}}\\left(v_{1}-v_{2}\\right) \\tag{12.116}\n\\end{equation*}\n$$\n\nThus, the output current can be adjusted by varying the dc bias current, $\\mathrm{I}_{\\mathrm{B}}$. Note that the transconductance coefficient is proportional to the square root of $I_{B}$, meaning a fourfold increase in current results in only a twofold increase in the coefficient.\n\nBefore concluding, a couple of points are noteworthy. First, the output currents from this circuit are available at both the upper pair, $Q_{1 a}, Q_{2 a}$, and the lower pair, $Q_{1 b}, Q_{2 b}$, offering flexibility for subsequent transconductor circuitry. Second, $V_{\\text {ss }}$ must be at least $V_{\\mathrm{tn}}+\\left|V_{\\mathrm{tp}}\\right|$ below the most negative input signal swing of either $v_{1}$ or $V_{2}$. Assuming $v_{1}$ and $v_{2}$ have $\\pm 1-V$ signals around ground, for $\\mathrm{V}_{\\mathrm{tn}}=-\\mathrm{V}_{\\mathrm{tp}}=1 \\mathrm{~V}$, $\\mathrm{V}_{\\mathrm{ss}}$ would need to be less than -3 V. Thus, with symmetrical power supplies, a 6-V power supply would be required for only a $2-\\mathrm{V}$ signal swing."
},
{
    "text": "An alternative method to sustain a consistent sum of gate-source voltages involves employing two floating dc voltage sources, as depicted in Fig. 12.25 [Nedungadi, 1984]. By writing a voltage equation around the loop, we derive\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS} 1}-\\left(\\mathrm{V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}\\right)+\\mathrm{V}_{\\mathrm{GS} 2}-\\left(\\mathrm{V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}\\right)=0 \\tag{12.109}\n\\end{equation*}\n$$\n\nwhich simplifies to\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS} 1}+\\mathrm{V}_{\\mathrm{GS} 2}=2\\left(\\mathrm{~V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}\\right) \\tag{12.110}\n\\end{equation*}\n$$\n\nConsequently, this configuration ensures a stable sum of gate-source voltages, even when the applied differential signal is unbalanced. Additionally, by formulating two equations describing the relationship between $v_{1}$ and $v_{2}$, we get\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{1}-\\mathrm{V}_{\\mathrm{GS} 1}+\\mathrm{V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}=\\mathrm{V}_{2} \\tag{12.111}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{2}-\\mathrm{V}_{\\mathrm{GS} 2}+\\mathrm{V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}=\\mathrm{V}_{1} \\tag{12.112}\n\\end{equation*}\n$$\n\nSubtracting (12.111) from (12.112) and rearranging, we obtain\n\n$$\n\\begin{equation*}\n\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{v}_{\\mathrm{GS} 2}=2\\left(\\mathrm{v}_{1}-\\mathrm{v}_{2}\\right) \\tag{12.113}\n\\end{equation*}\n$$\n\nThus, the difference between the input voltages equals half the difference between the gate-source voltages. Finally, by combining (12.100), (12.110), and (12.113), the differential output current is determined as\n\n$$\n\\begin{equation*}\n\\left(i_{D 1}-i_{D 2}\\right)=4 K V_{x}\\left(v_{1}-v_{2}\\right) \\tag{12.114}\n\\end{equation*}\n$$\n\nA straightforward method to implement the floating voltage sources in Fig. 12.25 is by using two source followers, as illustrated in Fig. 12.26 [Nedungadi, 1984]. The transistors labeled nK are n times larger than the other two transistors, and thus\nimage_name:Fig. 12.25\ndescription:The circuit is a linearized differential pair using floating voltage sources. It includes two NMOS transistors (M1 and M2) with their gates driven by separate voltage sources (VGS1 and VGS2). The differential output current is determined by the difference between the drain currents of M1 and M2.\n\n$$\n\\begin{aligned}\n\\left(\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{i}_{\\mathrm{D} 2}\\right) & =4 \\mathrm{KV} \\mathrm{~V}_{\\mathrm{x}}\\left(\\mathrm{v}_{1}-\\mathrm{V}_{2}\\right) \\\\\n\\mathrm{G}_{\\mathrm{m}} & =4 \\mathrm{KV} \\mathrm{~V}_{\\mathrm{x}}\n\\end{aligned}\n$$\n\nFig. 12.25 A linearized differential pair using floating voltage sources.\nimage_name:Fig. 12.26 A linear transconductor for large n.\ndescription:This circuit is a linear transconductor for large n, utilizing NMOS transistors M1, M2, and M3. The differential output current is determined by the drain currents of M1 and M2. The current sources provide a bias current of (n+1)IB. The circuit operates between VDD and VSS.\n\n$$\n\\begin{array}{r}\n\\left(i_{D 1}-i_{D 2}\\right)=\\left(\\frac{n}{n+1}\\right) 4 \\sqrt{K I_{B}}\\left(v_{1}-v_{2}\\right) \\\\\nG_{m}=\\left(\\frac{n}{n+1}\\right) 4 \\sqrt{K I_{B}}\n\\end{array}\n$$\n\nFig. 12.26 A linear transconductor for large n.\nimage_name:Fig. 12.27 A linearized differential pair\ndescription:The circuit is a linearized differential pair using NMOS and PMOS transistors. It includes floating voltage sources that drive only the transistor gates. The differential output current is determined by the drain currents of the NMOS transistors Q1a and Q2a.\n\n$$\n\\left(\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{i}_{\\mathrm{D} 2}\\right)=4 \\mathrm{~K}_{\\mathrm{eq}} \\mathrm{~V}_{\\mathrm{x}}\\left(\\mathrm{v}_{1}-\\mathrm{v}_{2}\\right)\n$$\n\nFig. 12.27 A linearized differential pair in which the floating voltage sources need drive only the transistor gates.\nimage_name:Fig. 12.28\ndescription:The circuit is a linearized differential pair using NMOS and PMOS transistors with floating voltage sources driving only the transistor gates. The differential output current is determined by the drain currents of NMOS transistors Q1a and Q2a, expressed as (i_D1 - i_D2) = 4 * sqrt(K_eq) * I_B * (v1 - v2). The circuit is designed to act as a transconductor with a transconductance G_m = 4 * sqrt(K_eq) * I_B.\n\nFig. 12.28 A transconductor that uses CMOS pairs and floating voltage sources.\nthey function as source followers when n is large (typically, when n exceeds 5). If n is not sufficiently large, the bias current through the source followers varies with the input signal, degrading linearity. A drawback of this circuit is the substantial dc bias current flowing through the source followers. However, for moderate linearity requirements and small input signals (e.g., 500 mV), this method can be quite effective.\n\nGiven the challenge of implementing a floating voltage source that drives another transistor's source, an alternative is to modify the circuit in Fig. 12.25 so that the floating voltage sources only need to drive the transistor gates. This can be achieved by replacing the single transistors in Fig. 12.25 with their CMOS counterparts, as shown in Fig. 12.27. Note that the voltage sources must now exceed $\\mathrm{V}_{\\mathrm{t} \\text {-eq }}$ and include a controllable $\\mathrm{V}_{\\mathrm{x}}$ voltage. Fortunately, such configurations can be easily realized using two additional CMOS pairs, as shown in Fig. 12.28, where the pairs $\\mathrm{Q}_{3 \\mathrm{a}}, \\mathrm{Q}_{3 \\mathrm{~b}}$ and $\\mathrm{Q}_{4 \\mathrm{a}}, \\mathrm{Q}_{4 \\mathrm{~b}}$ have been added along with two adjustable current sources [Seevinck, 1987]. Referring back to (12.99), we find that $\\mathrm{V}_{\\mathrm{x}}$ is given by\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{x}}=\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{eq}}}} \\sqrt{\\mathrm{I}_{\\mathrm{B}}} \\tag{12.115}\n\\end{equation*}\n$$\n\nassuming, for simplicity, that all CMOS pairs are matched. Consequently, the differential output current is\n\n$$\n\\begin{equation*}\n\\left(i_{D 1}-i_{D 2}\\right)=4 \\sqrt{K_{e q} I_{B}}\\left(v_{1}-v_{2}\\right) \\tag{12.116}\n\\end{equation*}\n$$\n\nThus, the output current can be adjusted by varying the dc bias current, $\\mathrm{I}_{\\mathrm{B}}$. Note that the transconductance coefficient is proportional to the square root of $I_{B}$, meaning a fourfold increase in current results in only a twofold increase in the coefficient.\n\nBefore concluding, a couple of points deserve mention. First, the output currents from this circuit are accessible from both the upper pair, $Q_{1 a}, Q_{2 a}$, and the lower pair, $Q_{1 b}, Q_{2 b}$, offering flexibility for subsequent transconductor circuitry. Second, $V_{\\text {ss }}$ must be at least $V_{\\mathrm{tn}}+\\left|V_{\\mathrm{tp}}\\right|$ below the most negative input signal swing of either $v_{1}$ or $v_{2}$. Assuming $v_{1}$ and $v_{2}$ have $\\pm 1-V$ signals around ground, and for $\\mathrm{V}_{\\mathrm{tn}}=-\\mathrm{V}_{\\mathrm{tp}}=1 \\mathrm{~V}$, $V_{\\mathrm{ss}}$ would need to be less than -3 V. Thus, with symmetrical power supplies, a 6-V power supply would be necessary for a $2-\\mathrm{V}$ signal swing."
},
{
    "text": "An alternative method to sustain a consistent sum of gate-source voltages involves employing two floating dc voltage sources, as depicted in Fig. 12.25 [Nedungadi, 1984]. By writing a voltage equation around the loop, we derive\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS} 1}-\\left(\\mathrm{V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}\\right)+\\mathrm{V}_{\\mathrm{GS} 2}-\\left(\\mathrm{V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}\\right)=0 \\tag{12.109}\n\\end{equation*}\n$$\n\nwhich simplifies to\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS} 1}+\\mathrm{V}_{\\mathrm{GS} 2}=2\\left(\\mathrm{~V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}\\right) \\tag{12.110}\n\\end{equation*}\n$$\n\nConsequently, this circuit preserves a constant sum of gate-source voltages, even if the applied differential signal is unbalanced. Additionally, by formulating two equations describing the relationship between $v_{1}$ and $v_{2}$, we obtain\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{1}-\\mathrm{V}_{\\mathrm{GS} 1}+\\mathrm{V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}=\\mathrm{V}_{2} \\tag{12.111}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{2}-\\mathrm{V}_{\\mathrm{GS} 2}+\\mathrm{V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}=\\mathrm{V}_{1} \\tag{12.112}\n\\end{equation*}\n$$\n\nSubtracting (12.111) from (12.112) and rearranging, we get\n\n$$\n\\begin{equation*}\n\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{v}_{\\mathrm{GS} 2}=2\\left(\\mathrm{v}_{1}-\\mathrm{v}_{2}\\right) \\tag{12.113}\n\\end{equation*}\n$$\n\nThus, the difference between the input voltages equals half the difference between the gate-source voltages. Finally, the differential output current is determined by combining (12.100), (12.110), and (12.113), resulting in\n\n$$\n\\begin{equation*}\n\\left(i_{D 1}-i_{D 2}\\right)=4 K V_{x}\\left(v_{1}-v_{2}\\right) \\tag{12.114}\n\\end{equation*}\n$$\n\nA straightforward method to implement the floating voltage sources in Fig. 12.25 is by using two source followers, as illustrated in Fig. 12.26 [Nedungadi, 1984]. The transistors labeled nK are n times larger than the other two transistors, and thus\nimage_name:Fig. 12.25\ndescription:The circuit is a linearized differential pair using floating voltage sources. It includes two NMOS transistors (M1 and M2) with their gates driven by separate voltage sources (VGS1 and VGS2). The differential output current is determined by the difference between the drain currents of M1 and M2.\n\n$$\n\\begin{aligned}\n\\left(\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{i}_{\\mathrm{D} 2}\\right) & =4 \\mathrm{KV} \\mathrm{~V}_{\\mathrm{x}}\\left(\\mathrm{v}_{1}-\\mathrm{V}_{2}\\right) \\\\\n\\mathrm{G}_{\\mathrm{m}} & =4 \\mathrm{KV} \\mathrm{~V}_{\\mathrm{x}}\n\\end{aligned}\n$$\n\nFig. 12.25 A linearized differential pair using floating voltage sources.\nimage_name:Fig. 12.26 A linear transconductor for large n.\ndescription:This circuit is a linear transconductor for large n, utilizing NMOS transistors M1, M2, and M3. The differential output current is determined by the drain currents of M1 and M2. The current sources provide a bias current of (n+1)IB. The circuit operates between VDD and VSS.\n\n$$\n\\begin{array}{r}\n\\left(i_{D 1}-i_{D 2}\\right)=\\left(\\frac{n}{n+1}\\right) 4 \\sqrt{K I_{B}}\\left(v_{1}-v_{2}\\right) \\\\\nG_{m}=\\left(\\frac{n}{n+1}\\right) 4 \\sqrt{K I_{B}}\n\\end{array}\n$$\n\nFig. 12.26 A linear transconductor for large n.\nimage_name:Fig. 12.27 A linearized differential pair\ndescription:The circuit is a linearized differential pair using NMOS and PMOS transistors. It includes floating voltage sources that drive only the transistor gates. The differential output current is determined by the drain currents of the NMOS transistors Q1a and Q2a.\n\n$$\n\\left(\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{i}_{\\mathrm{D} 2}\\right)=4 \\mathrm{~K}_{\\mathrm{eq}} \\mathrm{~V}_{\\mathrm{x}}\\left(\\mathrm{v}_{1}-\\mathrm{v}_{2}\\right)\n$$\n\nFig. 12.27 A linearized differential pair in which the floating voltage sources need drive only the transistor gates.\nimage_name:Fig. 12.28\ndescription:The circuit is a linearized differential pair using NMOS and PMOS transistors with floating voltage sources driving only the transistor gates. The differential output current is determined by the drain currents of NMOS transistors Q1a and Q2a, expressed as (i_D1 - i_D2) = 4 * sqrt(K_eq) * I_B * (v1 - v2). The circuit is designed to act as a transconductor with a transconductance G_m = 4 * sqrt(K_eq) * I_B.\n\nFig. 12.28 A transconductor that uses CMOS pairs and floating voltage sources.\nthey function as source followers when n is large (typically, when n is 5 or more). If n is not large, the bias current through the two source followers varies with the input signal, degrading linearity. A drawback of this circuit is the large dc bias current passing through the two source followers. However, if moderate linearity is acceptable and the input signal is relatively small (e.g., 500 mV), this method can be quite effective.\n\nGiven the challenge of realizing a floating voltage source that drives the source of another transistor, an alternative is to modify the circuit in Fig. 12.25 so that the floating voltage sources only need to drive the transistor gates. This modification is feasible by replacing the single transistors in Fig. 12.25 with their CMOS pairs, as shown in Fig. 12.27. Note that the voltage sources must now exceed $\\mathrm{V}_{\\mathrm{t} \\text {-eq }}$ and include a controllable $\\mathrm{V}_{\\mathrm{x}}$ voltage. Fortunately, such circuits can be easily implemented using two additional CMOS pairs, as shown in Fig. 12.28, where the pairs $\\mathrm{Q}_{3 \\mathrm{a}}, \\mathrm{Q}_{3 \\mathrm{~b}}$ and $\\mathrm{Q}_{4 \\mathrm{a}}, \\mathrm{Q}_{4 \\mathrm{~b}}$ have been added along with two adjustable current sources [Seevinck, 1987]. Referring back to (12.99), we find that $\\mathrm{V}_{\\mathrm{x}}$ is given by\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{x}}=\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{eq}}}} \\sqrt{\\mathrm{I}_{\\mathrm{B}}} \\tag{12.115}\n\\end{equation*}\n$$\n\nwhere, for simplicity, we assume all CMOS pairs are matched. Consequently, the differential output current is\n\n$$\n\\begin{equation*}\n\\left(i_{D 1}-i_{D 2}\\right)=4 \\sqrt{K_{e q} I_{B}}\\left(v_{1}-v_{2}\\right) \\tag{12.116}\n\\end{equation*}\n$$\n\nThus, the output current can be adjusted by varying the dc bias current, $\\mathrm{I}_{\\mathrm{B}}$. Note that the transconductance coefficient is proportional to the square root of $I_{B}$, meaning a fourfold increase in current results in only a twofold increase in the coefficient.\n\nBefore concluding, a couple of points are noteworthy. First, the output currents from this circuit are available at both the upper pair, $Q_{1 a}, Q_{2 a}$, and the lower pair, $Q_{1 b}, Q_{2 b}$, offering flexibility for subsequent transconductor circuitry. Second, $V_{\\text {ss }}$ must be at least $V_{\\mathrm{tn}}+\\left|V_{\\mathrm{tp}}\\right|$ below the most negative input signal swing of either $v_{1}$ or $V_{2}$. Assuming $v_{1}$ and $v_{2}$ have $\\pm 1-V$ signals around ground, for $\\mathrm{V}_{\\mathrm{tn}}=-\\mathrm{V}_{\\mathrm{tp}}=1 \\mathrm{~V}$, $\\mathrm{V}_{\\mathrm{ss}}$ would need to be less than -3 V. Thus, with symmetrical power supplies, a 6-V power supply would be required for a $2-\\mathrm{V}$ signal swing."
},
{
    "text": "An alternative method to sustain a consistent sum of gate-source voltages involves employing two floating dc voltage sources, as depicted in Fig. 12.25 [Nedungadi, 1984]. By writing a voltage equation around the loop, we derive\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS} 1}-\\left(\\mathrm{V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}\\right)+\\mathrm{V}_{\\mathrm{GS} 2}-\\left(\\mathrm{V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}\\right)=0 \\tag{12.109}\n\\end{equation*}\n$$\n\nwhich simplifies to\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS} 1}+\\mathrm{V}_{\\mathrm{GS} 2}=2\\left(\\mathrm{~V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}\\right) \\tag{12.110}\n\\end{equation*}\n$$\n\nConsequently, this configuration ensures a constant sum of gate-source voltages, even if the applied differential signal is unbalanced. Additionally, by formulating two equations that describe the relationship between $v_{1}$ and $v_{2}$, we obtain\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{1}-\\mathrm{V}_{\\mathrm{GS} 1}+\\mathrm{V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}=\\mathrm{V}_{2} \\tag{12.111}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{2}-\\mathrm{V}_{\\mathrm{GS} 2}+\\mathrm{V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}=\\mathrm{V}_{1} \\tag{12.112}\n\\end{equation*}\n$$\n\nSubtracting (12.111) from (12.112) and rearranging yields\n\n$$\n\\begin{equation*}\n\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{v}_{\\mathrm{GS} 2}=2\\left(\\mathrm{v}_{1}-\\mathrm{v}_{2}\\right) \\tag{12.113}\n\\end{equation*}\n$$\n\nThus, the difference between the input voltages equals one-half the difference between the gate-source voltages. Finally, the differential output current is determined by combining (12.100), (12.110), and (12.113), resulting in\n\n$$\n\\begin{equation*}\n\\left(i_{D 1}-i_{D 2}\\right)=4 K V_{x}\\left(v_{1}-v_{2}\\right) \\tag{12.114}\n\\end{equation*}\n$$\n\nA straightforward method to implement the floating voltage sources in Fig. 12.25 is to utilize two source followers, as illustrated in Fig. 12.26 [Nedungadi, 1984]. The transistors labeled nK are n times larger than the other two transistors, and thus\nimage_name:Fig. 12.25\ndescription:The circuit is a linearized differential pair using floating voltage sources. It includes two NMOS transistors (M1 and M2) with their gates driven by separate voltage sources (VGS1 and VGS2). The differential output current is determined by the difference between the drain currents of M1 and M2.\n\n$$\n\\begin{aligned}\n\\left(\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{i}_{\\mathrm{D} 2}\\right) & =4 \\mathrm{KV} \\mathrm{~V}_{\\mathrm{x}}\\left(\\mathrm{v}_{1}-\\mathrm{V}_{2}\\right) \\\\\n\\mathrm{G}_{\\mathrm{m}} & =4 \\mathrm{KV} \\mathrm{~V}_{\\mathrm{x}}\n\\end{aligned}\n$$\n\nFig. 12.25 A linearized differential pair using floating voltage sources.\nimage_name:Fig. 12.26 A linear transconductor for large n.\ndescription:This circuit is a linear transconductor for large n, utilizing NMOS transistors M1, M2, and M3. The differential output current is determined by the drain currents of M1 and M2. The current sources provide a bias current of (n+1)IB. The circuit operates between VDD and VSS.\n\n$$\n\\begin{array}{r}\n\\left(i_{D 1}-i_{D 2}\\right)=\\left(\\frac{n}{n+1}\\right) 4 \\sqrt{K I_{B}}\\left(v_{1}-v_{2}\\right) \\\\\nG_{m}=\\left(\\frac{n}{n+1}\\right) 4 \\sqrt{K I_{B}}\n\\end{array}\n$$\n\nFig. 12.26 A linear transconductor for large n.\nimage_name:Fig. 12.27 A linearized differential pair\ndescription:The circuit is a linearized differential pair using NMOS and PMOS transistors. It includes floating voltage sources that drive only the transistor gates. The differential output current is determined by the drain currents of the NMOS transistors Q1a and Q2a.\n\n$$\n\\left(\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{i}_{\\mathrm{D} 2}\\right)=4 \\mathrm{~K}_{\\mathrm{eq}} \\mathrm{~V}_{\\mathrm{x}}\\left(\\mathrm{v}_{1}-\\mathrm{v}_{2}\\right)\n$$\n\nFig. 12.27 A linearized differential pair in which the floating voltage sources need drive only the transistor gates.\nimage_name:Fig. 12.28\ndescription:The circuit is a linearized differential pair using NMOS and PMOS transistors with floating voltage sources driving only the transistor gates. The differential output current is determined by the drain currents of NMOS transistors Q1a and Q2a, expressed as (i_D1 - i_D2) = 4 * sqrt(K_eq) * I_B * (v1 - v2). The circuit is designed to act as a transconductor with a transconductance G_m = 4 * sqrt(K_eq) * I_B.\n\nFig. 12.28 A transconductor that uses CMOS pairs and floating voltage sources.\nthey function as source followers when n is large (typically, when n is 5 or greater). If n is not large, the bias current through the two source followers varies with the input signal, degrading linearity. A drawback of this circuit is the large dc bias current passing through the two source followers. However, if moderate linearity is acceptable and the input signal is relatively small (e.g., 500 mV), this method can be quite effective.\n\nSince realizing a floating voltage source that drives another transistor's source is challenging, an alternative is to modify the circuit in Fig. 12.25 so that the floating voltage sources only need to drive the transistor gates. This can be achieved by replacing the single transistors in Fig. 12.25 with their CMOS pairs, as shown in Fig. 12.27. Note that the voltage sources must now exceed $\\mathrm{V}_{\\mathrm{t} \\text {-eq }}$ and include a controllable $\\mathrm{V}_{\\mathrm{x}}$ voltage. Fortunately, such circuits can be easily implemented using two additional CMOS pairs, as shown in Fig. 12.28, where the pairs $\\mathrm{Q}_{3 \\mathrm{a}}, \\mathrm{Q}_{3 \\mathrm{~b}}$ and $\\mathrm{Q}_{4 \\mathrm{a}}, \\mathrm{Q}_{4 \\mathrm{~b}}$ have been added along with two adjustable current sources [Seevinck, 1987]. Referring back to (12.99), we find that $\\mathrm{V}_{\\mathrm{x}}$ is given by\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{x}}=\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{eq}}}} \\sqrt{\\mathrm{I}_{\\mathrm{B}}} \\tag{12.115}\n\\end{equation*}\n$$\n\nassuming, for simplicity, that all CMOS pairs are matched. Consequently, the differential output current is\n\n$$\n\\begin{equation*}\n\\left(i_{D 1}-i_{D 2}\\right)=4 \\sqrt{K_{e q} I_{B}}\\left(v_{1}-v_{2}\\right) \\tag{12.116}\n\\end{equation*}\n$$\n\nThus, the output current can be adjusted by varying the dc bias current, $\\mathrm{I}_{\\mathrm{B}}$. Note that the transconductance coefficient is proportional to the square root of $I_{B}$, so a fourfold increase in current results in only a twofold increase in the coefficient.\n\nBefore concluding, a couple of points are noteworthy. First, the output currents from this circuit are available at both the upper pair, $Q_{1 a}, Q_{2 a}$, and the lower pair, $Q_{1 b}, Q_{2 b}$, offering flexibility for subsequent transconductor circuitry. Second, $V_{\\text {ss }}$ must be at least $V_{\\mathrm{tn}}+\\left|V_{\\mathrm{tp}}\\right|$ below the most negative input signal swing of either $v_{1}$ or $V_{2}$. Assuming $v_{1}$ and $v_{2}$ have $\\pm 1-V$ signals around ground, for $\\mathrm{V}_{\\mathrm{tn}}=-\\mathrm{V}_{\\mathrm{tp}}=1 \\mathrm{~V}$, $\\mathrm{V}_{\\mathrm{ss}}$ would need to be less than -3 V. Thus, with symmetrical power supplies, a 6-V power supply would be required for only a $2-\\mathrm{V}$ signal swing."
},
{
    "text": "An alternative method to sustain a consistent sum of gate-source voltages involves employing two floating dc voltage sources, as depicted in Fig. 12.25 [Nedungadi, 1984]. By writing a voltage equation around the loop, we derive\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS} 1}-\\left(\\mathrm{V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}\\right)+\\mathrm{V}_{\\mathrm{GS} 2}-\\left(\\mathrm{V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}\\right)=0 \\tag{12.109}\n\\end{equation*}\n$$\n\nwhich simplifies to\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS} 1}+\\mathrm{V}_{\\mathrm{GS} 2}=2\\left(\\mathrm{~V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}\\right) \\tag{12.110}\n\\end{equation*}\n$$\n\nConsequently, this circuit preserves a constant sum of gate-source voltages, even if the applied differential signal is unbalanced. Additionally, by formulating two equations that describe the relationship between $v_{1}$ and $v_{2}$, we obtain\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{1}-\\mathrm{V}_{\\mathrm{GS} 1}+\\mathrm{V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}=\\mathrm{V}_{2} \\tag{12.111}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{2}-\\mathrm{V}_{\\mathrm{GS} 2}+\\mathrm{V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}=\\mathrm{V}_{1} \\tag{12.112}\n\\end{equation*}\n$$\n\nSubtracting (12.111) from (12.112) and rearranging yields\n\n$$\n\\begin{equation*}\n\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{v}_{\\mathrm{GS} 2}=2\\left(\\mathrm{v}_{1}-\\mathrm{v}_{2}\\right) \\tag{12.113}\n\\end{equation*}\n$$\n\nThus, the difference between the input voltages equals half the difference between the gate-source voltages. Finally, the differential output current is determined by combining (12.100), (12.110), and (12.113), resulting in\n\n$$\n\\begin{equation*}\n\\left(i_{D 1}-i_{D 2}\\right)=4 K V_{x}\\left(v_{1}-v_{2}\\right) \\tag{12.114}\n\\end{equation*}\n$$\n\nA straightforward method to implement the floating voltage sources in Fig. 12.25 is by using two source followers, as illustrated in Fig. 12.26 [Nedungadi, 1984]. The transistors labeled nK are n times larger than the other two transistors, hence\nimage_name:Fig. 12.25\ndescription:The circuit is a linearized differential pair using floating voltage sources. It comprises two NMOS transistors (M1 and M2) with their gates driven by separate voltage sources (VGS1 and VGS2). The differential output current is determined by the difference between the drain currents of M1 and M2.\n\n$$\n\\begin{aligned}\n\\left(\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{i}_{\\mathrm{D} 2}\\right) & =4 \\mathrm{KV} \\mathrm{~V}_{\\mathrm{x}}\\left(\\mathrm{v}_{1}-\\mathrm{V}_{2}\\right) \\\\\n\\mathrm{G}_{\\mathrm{m}} & =4 \\mathrm{KV} \\mathrm{~V}_{\\mathrm{x}}\n\\end{aligned}\n$$\n\nFig. 12.25 A linearized differential pair using floating voltage sources.\nimage_name:Fig. 12.26 A linear transconductor for large n.\ndescription:This circuit is a linear transconductor for large n, utilizing NMOS transistors M1, M2, and M3. The differential output current is determined by the drain currents of M1 and M2. The current sources provide a bias current of (n+1)IB. The circuit operates between VDD and VSS.\n\n$$\n\\begin{array}{r}\n\\left(i_{D 1}-i_{D 2}\\right)=\\left(\\frac{n}{n+1}\\right) 4 \\sqrt{K I_{B}}\\left(v_{1}-v_{2}\\right) \\\\\nG_{m}=\\left(\\frac{n}{n+1}\\right) 4 \\sqrt{K I_{B}}\n\\end{array}\n$$\n\nFig. 12.26 A linear transconductor for large n.\nimage_name:Fig. 12.27 A linearized differential pair\ndescription:The circuit is a linearized differential pair using NMOS and PMOS transistors. It includes floating voltage sources that drive only the transistor gates. The differential output current is determined by the drain currents of the NMOS transistors Q1a and Q2a.\n\n$$\n\\left(\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{i}_{\\mathrm{D} 2}\\right)=4 \\mathrm{~K}_{\\mathrm{eq}} \\mathrm{~V}_{\\mathrm{x}}\\left(\\mathrm{v}_{1}-\\mathrm{v}_{2}\\right)\n$$\n\nFig. 12.27 A linearized differential pair in which the floating voltage sources need drive only the transistor gates.\nimage_name:Fig. 12.28\ndescription:The circuit is a linearized differential pair using NMOS and PMOS transistors with floating voltage sources driving only the transistor gates. The differential output current is determined by the drain currents of NMOS transistors Q1a and Q2a, expressed as (i_D1 - i_D2) = 4 * sqrt(K_eq) * I_B * (v1 - v2). The circuit is designed to act as a transconductor with a transconductance G_m = 4 * sqrt(K_eq) * I_B.\n\nFig. 12.28 A transconductor that uses CMOS pairs and floating voltage sources.\nthey function as source followers when n is large (typically, when n is 5 or more). If n is not large, the bias current through the two source followers varies with the input signal, degrading linearity. A drawback of this circuit is the large dc bias current passing through the two source followers. However, if moderate linearity is acceptable and the input signal is relatively small (e.g., 500 mV), this method can be quite effective.\n\nGiven the challenge of realizing a floating voltage source that drives the source of another transistor, an alternative is to modify the circuit in Fig. 12.25 so that the floating voltage sources only need to drive the transistor gates. This can be achieved by replacing the single transistors in Fig. 12.25 with their CMOS pairs, as shown in Fig. 12.27. Note that the voltage sources must now exceed $\\mathrm{V}_{\\mathrm{t} \\text {-eq }}$ and include a controllable $\\mathrm{V}_{\\mathrm{x}}$ voltage. Fortunately, such circuits can be easily implemented using two additional CMOS pairs, as shown in Fig. 12.28, where the pairs $\\mathrm{Q}_{3 \\mathrm{a}}, \\mathrm{Q}_{3 \\mathrm{~b}}$ and $\\mathrm{Q}_{4 \\mathrm{a}}, \\mathrm{Q}_{4 \\mathrm{~b}}$ have been added along with two adjustable current sources [Seevinck, 1987]. Referring back to (12.99), we find that $\\mathrm{V}_{\\mathrm{x}}$ is given by\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{x}}=\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{eq}}}} \\sqrt{\\mathrm{I}_{\\mathrm{B}}} \\tag{12.115}\n\\end{equation*}\n$$\n\nassuming, for simplicity, that all CMOS pairs are matched. Consequently, the differential output current is\n\n$$\n\\begin{equation*}\n\\left(i_{D 1}-i_{D 2}\\right)=4 \\sqrt{K_{e q} I_{B}}\\left(v_{1}-v_{2}\\right) \\tag{12.116}\n\\end{equation*}\n$$\n\nThus, the output current can be adjusted by tuning the dc bias current, $\\mathrm{I}_{\\mathrm{B}}$. Note that the transconductance coefficient is proportional to the square root of $I_{B}$, so a fourfold increase in current results in only a twofold increase in the coefficient.\n\nBefore concluding, a couple of points deserve mention. First, note that the output currents from this circuit are available at both the upper pair, $Q_{1 a}, Q_{2 a}$, and the lower pair, $Q_{1 b}, Q_{2 b}$. This flexibility may be beneficial in subsequent transconductor circuitry. Second, note that $V_{\\text {ss }}$ must be at least $V_{\\mathrm{tn}}+\\left|V_{\\mathrm{tp}}\\right|$ below the most negative input signal swing of either $v_{1}$ or $v_{2}$. If we assume $v_{1}$ and $v_{2}$ have $\\pm 1-V$ signals around ground, then, for $\\mathrm{V}_{\\mathrm{tn}}=-\\mathrm{V}_{\\mathrm{tp}}=1 \\mathrm{~V}$, $\\mathrm{V}_{\\mathrm{ss}}$ would need to be less than -3 V. Thus, with symmetrical power supplies, a 6-V power supply would be required for only a $2-\\mathrm{V}$ signal swing."
},
{
    "text": "An alternative method to sustain a consistent sum of gate-source voltages involves the use of two floating dc voltage sources, as depicted in Fig. 12.25 [Nedungadi, 1984]. By writing a voltage equation around the loop, we derive\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS} 1}-\\left(\\mathrm{V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}\\right)+\\mathrm{V}_{\\mathrm{GS} 2}-\\left(\\mathrm{V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}\\right)=0 \\tag{12.109}\n\\end{equation*}\n$$\n\nwhich simplifies to\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{GS} 1}+\\mathrm{V}_{\\mathrm{GS} 2}=2\\left(\\mathrm{~V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}\\right) \\tag{12.110}\n\\end{equation*}\n$$\n\nConsequently, this circuit preserves a constant sum of gate-source voltages even if the applied differential signal is unbalanced. Additionally, by formulating two equations that describe the relationship between $v_{1}$ and $v_{2}$, we obtain\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{1}-\\mathrm{V}_{\\mathrm{GS} 1}+\\mathrm{V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}=\\mathrm{V}_{2} \\tag{12.111}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{2}-\\mathrm{V}_{\\mathrm{GS} 2}+\\mathrm{V}_{\\mathrm{x}}+\\mathrm{V}_{\\mathrm{tn}}=\\mathrm{V}_{1} \\tag{12.112}\n\\end{equation*}\n$$\n\nSubtracting (12.111) from (12.112) and rearranging, we arrive at\n\n$$\n\\begin{equation*}\n\\mathrm{v}_{\\mathrm{GS} 1}-\\mathrm{v}_{\\mathrm{GS} 2}=2\\left(\\mathrm{v}_{1}-\\mathrm{v}_{2}\\right) \\tag{12.113}\n\\end{equation*}\n$$\n\nThus, the difference between the input voltages equals half the difference between the gate-source voltages. Finally, the differential output current is determined by combining (12.100), (12.110), and (12.113), resulting in\n\n$$\n\\begin{equation*}\n\\left(i_{D 1}-i_{D 2}\\right)=4 K V_{x}\\left(v_{1}-v_{2}\\right) \\tag{12.114}\n\\end{equation*}\n$$\n\nA straightforward method to implement the floating voltage sources in Fig. 12.25 is to employ two source followers, as illustrated in Fig. 12.26 [Nedungadi, 1984]. The transistors labeled nK are n times larger than the other two transistors, and hence\nimage_name:Fig. 12.25\ndescription:The circuit is a linearized differential pair using floating voltage sources. It comprises two NMOS transistors (M1 and M2) with their gates driven by separate voltage sources (VGS1 and VGS2). The differential output current is determined by the difference between the drain currents of M1 and M2.\n\n$$\n\\begin{aligned}\n\\left(\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{i}_{\\mathrm{D} 2}\\right) & =4 \\mathrm{KV} \\mathrm{~V}_{\\mathrm{x}}\\left(\\mathrm{v}_{1}-\\mathrm{V}_{2}\\right) \\\\\n\\mathrm{G}_{\\mathrm{m}} & =4 \\mathrm{KV} \\mathrm{~V}_{\\mathrm{x}}\n\\end{aligned}\n$$\n\nFig. 12.25 A linearized differential pair using floating voltage sources.\nimage_name:Fig. 12.26 A linear transconductor for large n.\ndescription:This circuit is a linear transconductor for large n, utilizing NMOS transistors M1, M2, and M3. The differential output current is determined by the drain currents of M1 and M2. The current sources provide a bias current of (n+1)IB. The circuit operates between VDD and VSS.\n\n$$\n\\begin{array}{r}\n\\left(i_{D 1}-i_{D 2}\\right)=\\left(\\frac{n}{n+1}\\right) 4 \\sqrt{K I_{B}}\\left(v_{1}-v_{2}\\right) \\\\\nG_{m}=\\left(\\frac{n}{n+1}\\right) 4 \\sqrt{K I_{B}}\n\\end{array}\n$$\n\nFig. 12.26 A linear transconductor for large n.\nimage_name:Fig. 12.27 A linearized differential pair\ndescription:The circuit is a linearized differential pair using NMOS and PMOS transistors. It includes floating voltage sources that drive only the transistor gates. The differential output current is determined by the drain currents of the NMOS transistors Q1a and Q2a.\n\n$$\n\\left(\\mathrm{i}_{\\mathrm{D} 1}-\\mathrm{i}_{\\mathrm{D} 2}\\right)=4 \\mathrm{~K}_{\\mathrm{eq}} \\mathrm{~V}_{\\mathrm{x}}\\left(\\mathrm{v}_{1}-\\mathrm{v}_{2}\\right)\n$$\n\nFig. 12.27 A linearized differential pair in which the floating voltage sources need drive only the transistor gates.\nimage_name:Fig. 12.28\ndescription:The circuit is a linearized differential pair using NMOS and PMOS transistors with floating voltage sources driving only the transistor gates. The differential output current is determined by the drain currents of NMOS transistors Q1a and Q2a, expressed as (i_D1 - i_D2) = 4 * sqrt(K_eq) * I_B * (v1 - v2). The circuit is designed to act as a transconductor with a transconductance G_m = 4 * sqrt(K_eq) * I_B.\n\nFig. 12.28 A transconductor that uses CMOS pairs and floating voltage sources.\nthey function as source followers when n is large (typically, when n is 5 or more). If n is not large, the bias current through the two source followers varies with the input signal, degrading linearity. A drawback of this circuit is the large dc bias current passing through the two source followers. However, if moderate linearity is acceptable and the input signal is relatively small (e.g., 500 mV), this method can be quite effective.\n\nGiven the challenge of realizing a floating voltage source that drives the source of another transistor, an alternative approach is to modify the circuit in Fig. 12.25 so that the floating voltage sources only need to drive the transistor gates. This modification is feasible by replacing the single transistors in Fig. 12.25 with their CMOS pairs, as shown in Fig. 12.27. Note that the voltage sources must now exceed $\\mathrm{V}_{\\mathrm{t} \\text {-eq }}$ and include a controllable $\\mathrm{V}_{\\mathrm{x}}$ voltage. Fortunately, such circuits can be easily implemented using two additional CMOS pairs, as shown in Fig. 12.28, where the pairs $\\mathrm{Q}_{3 \\mathrm{a}}, \\mathrm{Q}_{3 \\mathrm{~b}}$ and $\\mathrm{Q}_{4 \\mathrm{a}}, \\mathrm{Q}_{4 \\mathrm{~b}}$ have been added along with two adjustable current sources [Seevinck, 1987]. Referring back to (12.99), we find that $\\mathrm{V}_{\\mathrm{x}}$ is given by\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{x}}=\\frac{1}{\\sqrt{\\mathrm{~K}_{\\mathrm{eq}}}} \\sqrt{\\mathrm{I}_{\\mathrm{B}}} \\tag{12.115}\n\\end{equation*}\n$$\n\nwhere, for simplicity, we assume all CMOS pairs are matched. Consequently, the differential output current is\n\n$$\n\\begin{equation*}\n\\left(i_{D 1}-i_{D 2}\\right)=4 \\sqrt{K_{e q} I_{B}}\\left(v_{1}-v_{2}\\right) \\tag{12.116}\n\\end{equation*}\n$$\n\nThus, the output current can be adjusted by varying the dc bias current, $\\mathrm{I}_{\\mathrm{B}}$. Note that the transconductance coefficient is proportional to the square root of $I_{B}$, meaning a fourfold increase in current results in only a twofold increase in the coefficient.\n\nBefore concluding, a couple of points deserve mention. First, note that the output currents from this circuit are available at both the upper pair, $Q_{1 a}, Q_{2 a}$, and the lower pair, $Q_{1 b}, Q_{2 b}$. This flexibility may be beneficial in subsequent transconductor circuitry. Second, note that $V_{\\text {ss }}$ must be at least $V_{\\mathrm{tn}}+\\left|V_{\\mathrm{tp}}\\right|$ below the most negative input signal swing of either $v_{1}$ or $v_{2}$. Assuming $v_{1}$ and $v_{2}$ have $\\pm 1-V$ signals around ground, for $\\mathrm{V}_{\\mathrm{tn}}=-\\mathrm{V}_{\\mathrm{tp}}=1 \\mathrm{~V}$, $\\mathrm{V}_{\\mathrm{ss}}$ would need to be less than -3 V. Thus, with symmetrical power supplies, a 6-V power supply would be required for only a $2-\\mathrm{V}$ signal swing."
},
{
    "text": "An alternative method to implement a transconductor using active transistors involves employing two cross-coupled differential pairs with an intentional voltage offset at the input of one pair [Wang, 1990]. An example of this approach is depicted in Fig. 12.29, where the differential pair $Q_{1}, Q_{2}$ is cross-coupled with the bias-offset differential pair $Q_{3}, Q_{4}$. In this setup, it is assumed that all transistors operate in the active region and are matched (i.e., all transistors possess identical device parameters K and equal threshold voltages $\\mathrm{V}_{\\mathrm{tn}}$).\n\nTo determine the differential output current, we initially calculate\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{1}=\\mathrm{K}\\left(\\mathrm{~V}_{1}-\\mathrm{V}_{\\mathrm{x}}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2}+\\mathrm{K}\\left(\\mathrm{~V}_{2}-\\mathrm{V}_{\\mathrm{B}}-\\mathrm{V}_{\\mathrm{x}}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\tag{12.117}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{2}=\\mathrm{K}\\left(\\mathrm{~V}_{2}-\\mathrm{V}_{\\mathrm{x}}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2}+\\mathrm{K}\\left(\\mathrm{~V}_{1}-\\mathrm{V}_{\\mathrm{B}}-\\mathrm{V}_{\\mathrm{x}}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\tag{12.118}\n\\end{equation*}\n$$\n\nBy computing the difference, $\\boldsymbol{i}_{1}-\\mathrm{i}_{2}$, we obtain\n\n$$\n\\begin{equation*}\n\\left(i_{1}-i_{2}\\right)=2 K V_{B}\\left(v_{1}-v_{2}\\right) \\tag{12.119}\n\\end{equation*}\n$$\n\nHence, the output differential current is linearly related to the differential input voltage, as anticipated, and the transconductance value is directly proportional to $\\mathrm{V}_{\\mathrm{B}}$. However, it is important to note that the bias currents through $\\mathrm{Q}_{5}, \\mathrm{Q}_{6}, \\mathrm{Q}_{7}$, and $\\mathrm{Q}_{8}$ are all related to $\\mathrm{V}_{\\mathrm{B}}$ by a square-law. Consequently, the transconductance value varies with the square root of the changing bias current, similar to other active transistor CMOS transconductors. Additionally, the bias current, $\\mathrm{I}_{\\mathrm{SS}}$, does not influence the transconductance value but sets the maximum (or minimum) output current achievable.\n\nLastly, it should be noted that this offset-bias linearization technique can also be implemented in a single-ended configuration using fewer transistors, as illustrated in Fig. 12.30 [Bult, 1987]. The analysis of this configuration is left as an exercise for the reader.\n\n---\n\n**Image Description: Fig. 12.29**\nThis circuit represents a bias-offset cross-coupled transconductor utilizing NMOS transistors to form differential pairs and regulate current flow. The bias current ISS plays a crucial role in determining the maximum or minimum output current. The design aims to linearize the transconductance.\n\n$$\n\\begin{aligned}\n\\left(i_{1}-i_{2}\\right) & =2 K V_{B}\\left(V_{1}-v_{2}\\right) \\\\\nG_{m} & =2 K V_{B}\n\\end{aligned}\n$$\n\n**Fig. 12.29 A bias-offset cross-coupled transconductor.**\n**Image Description:**\n[\nname: Q1, type: NMOS, ports: {S: GND, D: X, G: V1}\nname: Q2, type: NMOS, ports: {S: GND, D: i2, G: X}\nname: Q3, type: NMOS, ports: {S: X, D: i1, G: VB}\n]\n**Extra Info:**\nThis circuit is a bias-offset cross-coupled transconductor employing NMOS transistors. It forms differential pairs to control current flow, with the bias current ISS determining the output current. The design objective is to linearize the transconductance.\n\n$$\n\\mathrm{i}_{1}-\\mathrm{i}_{2}=\\mathrm{K}\\left(\\mathrm{~V}_{\\mathrm{B}}-2 \\mathrm{~V}_{\\mathrm{tn}}\\right)\\left(2 \\mathrm{v}_{1}-\\mathrm{V}_{\\mathrm{B}}\\right)\n$$\n\n**Fig. 12.30 A single-ended offset-bias transconductor.**"
},
{
    "text": "An alternative method to implement a transconductor using active transistors involves employing two cross-coupled differential pairs with an intentional voltage offset applied to one pair [Wang, 1990]. An example of this method is depicted in Fig. 12.29, where the differential pair $Q_{1}, Q_{2}$ is cross-coupled with the bias-offset differential pair $Q_{3}, Q_{4}$. In this setup, it is assumed that all transistors operate in the active region and are matched (i.e., all transistors possess identical device parameters K and the same threshold voltages $\\mathrm{V}_{\\mathrm{tn}}$).\n\nTo determine the differential output current, we initially calculate\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{1}=\\mathrm{K}\\left(\\mathrm{~V}_{1}-\\mathrm{V}_{\\mathrm{x}}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2}+\\mathrm{K}\\left(\\mathrm{~V}_{2}-\\mathrm{V}_{\\mathrm{B}}-\\mathrm{V}_{\\mathrm{x}}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\tag{12.117}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{2}=\\mathrm{K}\\left(\\mathrm{~V}_{2}-\\mathrm{V}_{\\mathrm{x}}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2}+\\mathrm{K}\\left(\\mathrm{~V}_{1}-\\mathrm{V}_{\\mathrm{B}}-\\mathrm{V}_{\\mathrm{x}}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\tag{12.118}\n\\end{equation*}\n$$\n\nBy computing the difference, $\\boldsymbol{i}_{1}-\\mathrm{i}_{2}$, we obtain\n\n$$\n\\begin{equation*}\n\\left(i_{1}-i_{2}\\right)=2 K V_{B}\\left(v_{1}-v_{2}\\right) \\tag{12.119}\n\\end{equation*}\n$$\n\nConsequently, the output differential current is linearly related to the differential input voltage (as anticipated), and the transconductance value is directly proportional to $\\mathrm{V}_{\\mathrm{B}}$. However, it is important to note that the bias currents through $\\mathrm{Q}_{5}, \\mathrm{Q}_{6}, \\mathrm{Q}_{7}$, and $\\mathrm{Q}_{8}$ are all related to $\\mathrm{V}_{\\mathrm{B}}$ by a square-law. Therefore, the transconductance value scales with the square root of the varying bias current, similar to other active transistor CMOS transconductors. Additionally, the bias current, $\\mathrm{I}_{\\mathrm{SS}}$, does not influence the transconductance value but does set the maximum (or minimum) output current that can be achieved.\n\nLastly, it should be noted that this offset-bias linearization technique can also be implemented in a single-ended configuration using fewer transistors, as illustrated in Fig. 12.30 [Bult, 1987]. The analysis of this configuration is left as an exercise for the reader.\n\n**Image Description for Fig. 12.29:**\nThis circuit is a bias-offset cross-coupled transconductor utilizing NMOS transistors to form differential pairs and manage current flow. The bias current ISS plays a crucial role in determining the maximum or minimum output current available. The design aims to linearize the transconductance.\n\n$$\n\\begin{aligned}\n\\left(i_{1}-i_{2}\\right) & =2 K V_{B}\\left(V_{1}-v_{2}\\right) \\\\\nG_{m} & =2 K V_{B}\n\\end{aligned}\n$$\n\n**Fig. 12.29: A bias-offset cross-coupled transconductor.**\n\n**Image Description for Fig. 12.29 A bias-offset cross-coupled transconductor:**\n[\nname: Q1, type: NMOS, ports: {S: GND, D: X, G: V1}\nname: Q2, type: NMOS, ports: {S: GND, D: i2, G: X}\nname: Q3, type: NMOS, ports: {S: X, D: i1, G: VB}\n]\n**Additional Info:**\nThis circuit is a bias-offset cross-coupled transconductor employing NMOS transistors. It forms differential pairs to control current flow, with the bias current ISS determining the output current. The design's objective is to linearize the transconductance.\n\n$$\n\\mathrm{i}_{1}-\\mathrm{i}_{2}=\\mathrm{K}\\left(\\mathrm{~V}_{\\mathrm{B}}-2 \\mathrm{~V}_{\\mathrm{tn}}\\right)\\left(2 \\mathrm{v}_{1}-\\mathrm{V}_{\\mathrm{B}}\\right)\n$$\n\n**Fig. 12.30: A single-ended offset-bias transconductor.**"
},
{
    "text": "An alternative method to implement a transconductor using active transistors involves employing two cross-coupled differential pairs with an intentional voltage offset at the input of one pair [Wang, 1990]. An example of this method is depicted in Fig. 12.29, where the differential pair $Q_{1}, Q_{2}$ is cross-coupled with the bias-offset differential pair $Q_{3}, Q_{4}$. In this setup, it is assumed that all transistors operate in the active region and are matched (i.e., all transistors possess identical device parameters K and equal threshold voltages $\\mathrm{V}_{\\mathrm{tn}}$).\n\nTo determine the differential output current, we initially calculate\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{1}=\\mathrm{K}\\left(\\mathrm{~V}_{1}-\\mathrm{V}_{\\mathrm{x}}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2}+\\mathrm{K}\\left(\\mathrm{~V}_{2}-\\mathrm{V}_{\\mathrm{B}}-\\mathrm{V}_{\\mathrm{x}}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\tag{12.117}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{2}=\\mathrm{K}\\left(\\mathrm{~V}_{2}-\\mathrm{V}_{\\mathrm{x}}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2}+\\mathrm{K}\\left(\\mathrm{~V}_{1}-\\mathrm{V}_{\\mathrm{B}}-\\mathrm{V}_{\\mathrm{x}}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\tag{12.118}\n\\end{equation*}\n$$\n\nBy finding the difference, $\\boldsymbol{i}_{1}-\\mathrm{i}_{2}$, we obtain\n\n$$\n\\begin{equation*}\n\\left(i_{1}-i_{2}\\right)=2 K V_{B}\\left(v_{1}-v_{2}\\right) \\tag{12.119}\n\\end{equation*}\n$$\n\nHence, the output differential current is linearly related to the differential input voltage, as anticipated, and the transconductance value is proportional to $\\mathrm{V}_{\\mathrm{B}}$. However, it is important to note that the bias currents through $\\mathrm{Q}_{5}, \\mathrm{Q}_{6}, \\mathrm{Q}_{7}$, and $\\mathrm{Q}_{8}$ are all related to $\\mathrm{V}_{\\mathrm{B}}$ by a square-law. Consequently, the transconductance value is proportional to the square root of the varying bias current, similar to other active transistor CMOS transconductors. Additionally, the bias current, $\\mathrm{I}_{\\mathrm{SS}}$, does not influence the transconductance value but does set the maximum (or minimum) output current achievable.\n\nLastly, it should be noted that this offset-bias linearization technique can also be implemented in a single-ended configuration using just a few transistors, as illustrated in Fig. 12.30 [Bult, 1987]. The analysis of this configuration is left as an exercise for the reader.\nimage_name:Fig. 12.29\ndescription:This circuit is a bias-offset cross-coupled transconductor. It utilizes NMOS transistors to form differential pairs and regulate current flow. The bias current ISS aids in establishing the maximum or minimum output current available. The circuit is designed to linearize the transconductance.\n\n$$\n\\begin{aligned}\n\\left(i_{1}-i_{2}\\right) & =2 K V_{B}\\left(V_{1}-v_{2}\\right) \\\\\nG_{m} & =2 K V_{B}\n\\end{aligned}\n$$\n\nFig. 12.29 A bias-offset cross-coupled transconductor.\nimage_name:Fig. 12.29 A bias-offset cross-coupled transconductor\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: X, G: V1}\nname: Q2, type: NMOS, ports: {S: GND, D: i2, G: X}\nname: Q3, type: NMOS, ports: {S: X, D: i1, G: VB}\n]\nextrainfo:This circuit is a bias-offset cross-coupled transconductor employing NMOS transistors. It forms differential pairs to control current flow, with a bias current ISS determining the output current. The design aims to linearize the transconductance.\n\n$$\n\\mathrm{i}_{1}-\\mathrm{i}_{2}=\\mathrm{K}\\left(\\mathrm{~V}_{\\mathrm{B}}-2 \\mathrm{~V}_{\\mathrm{tn}}\\right)\\left(2 \\mathrm{v}_{1}-\\mathrm{V}_{\\mathrm{B}}\\right)\n$$\n\nFig. 12.30 A single-ended offset-bias transconductor."
},
{
    "text": "An alternative method to implement a transconductor using active transistors involves employing two cross-coupled differential pairs with an intentional voltage offset at the input of one pair [Wang, 1990]. An example of this method is depicted in Fig. 12.29, where the differential pair $Q_{1}, Q_{2}$ is cross-coupled with the bias-offset differential pair $Q_{3}, Q_{4}$. In this setup, it is assumed that all transistors operate in the active region and are matched (i.e., all transistors possess identical device parameters K and equal threshold voltages $\\mathrm{V}_{\\mathrm{tn}}$).\n\nTo determine the differential output current, we initially calculate\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{1}=\\mathrm{K}\\left(\\mathrm{~V}_{1}-\\mathrm{V}_{\\mathrm{x}}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2}+\\mathrm{K}\\left(\\mathrm{~V}_{2}-\\mathrm{V}_{\\mathrm{B}}-\\mathrm{V}_{\\mathrm{x}}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\tag{12.117}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{2}=\\mathrm{K}\\left(\\mathrm{~V}_{2}-\\mathrm{V}_{\\mathrm{x}}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2}+\\mathrm{K}\\left(\\mathrm{~V}_{1}-\\mathrm{V}_{\\mathrm{B}}-\\mathrm{V}_{\\mathrm{x}}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\tag{12.118}\n\\end{equation*}\n$$\n\nBy computing the difference, $\\boldsymbol{i}_{1}-\\mathrm{i}_{2}$, we obtain\n\n$$\n\\begin{equation*}\n\\left(i_{1}-i_{2}\\right)=2 K V_{B}\\left(v_{1}-v_{2}\\right) \\tag{12.119}\n\\end{equation*}\n$$\n\nConsequently, the output differential current is linearly related to the differential input voltage, as anticipated, and the transconductance value is proportional to $\\mathrm{V}_{\\mathrm{B}}$. However, it is important to note that the bias currents through $\\mathrm{Q}_{5}, \\mathrm{Q}_{6}, \\mathrm{Q}_{7}$, and $\\mathrm{Q}_{8}$ are all related to $\\mathrm{V}_{\\mathrm{B}}$ by a square-law. Therefore, the transconductance value is proportional to the square root of the varying bias current, similar to other active transistor CMOS transconductors. Additionally, the bias current, $\\mathrm{I}_{\\mathrm{SS}}$, does not influence the transconductance value but does set the maximum (or minimum) output current available.\n\nLastly, it should be noted that this offset-bias linearization technique can also be implemented in a single-ended configuration using fewer transistors, as illustrated in Fig. 12.30 [Bult, 1987]. The analysis of this configuration is left as an exercise for the reader.\n\nimage_name:Fig. 12.29\ndescription:This circuit is a bias-offset cross-coupled transconductor. It utilizes NMOS transistors to form differential pairs and manage current flow. The bias current ISS is instrumental in determining the maximum or minimum output current available. The design aims to linearize the transconductance.\n\n$$\n\\begin{aligned}\n\\left(i_{1}-i_{2}\\right) & =2 K V_{B}\\left(V_{1}-v_{2}\\right) \\\\\nG_{m} & =2 K V_{B}\n\\end{aligned}\n$$\n\nFig. 12.29 A bias-offset cross-coupled transconductor.\nimage_name:Fig. 12.29 A bias-offset cross-coupled transconductor\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: X, G: V1}\nname: Q2, type: NMOS, ports: {S: GND, D: i2, G: X}\nname: Q3, type: NMOS, ports: {S: X, D: i1, G: VB}\n]\nextrainfo:This circuit is a bias-offset cross-coupled transconductor employing NMOS transistors. It forms differential pairs to regulate current flow, with a bias current ISS defining the output current. The objective is to linearize the transconductance.\n\n$$\n\\mathrm{i}_{1}-\\mathrm{i}_{2}=\\mathrm{K}\\left(\\mathrm{~V}_{\\mathrm{B}}-2 \\mathrm{~V}_{\\mathrm{tn}}\\right)\\left(2 \\mathrm{v}_{1}-\\mathrm{V}_{\\mathrm{B}}\\right)\n$$\n\nFig. 12.30 A single-ended offset-bias transconductor."
},
{
    "text": "An alternative method to implement a transconductor using active transistors involves employing two cross-coupled differential pairs with a deliberate voltage offset at the input of one pair [Wang, 1990]. An example of this method is depicted in Fig. 12.29, where the differential pair $Q_{1}, Q_{2}$ is cross-coupled with the bias-offset differential pair $Q_{3}, Q_{4}$. In this scenario, it is assumed that all transistors operate in the active region and are matched (i.e., all transistors possess identical device parameters K and equal threshold voltages $\\mathrm{V}_{\\mathrm{tn}}$).\n\nTo determine the differential output current, we initially calculate\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{1}=\\mathrm{K}\\left(\\mathrm{~V}_{1}-\\mathrm{V}_{\\mathrm{x}}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2}+\\mathrm{K}\\left(\\mathrm{~V}_{2}-\\mathrm{V}_{\\mathrm{B}}-\\mathrm{V}_{\\mathrm{x}}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\tag{12.117}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{2}=\\mathrm{K}\\left(\\mathrm{~V}_{2}-\\mathrm{V}_{\\mathrm{x}}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2}+\\mathrm{K}\\left(\\mathrm{~V}_{1}-\\mathrm{V}_{\\mathrm{B}}-\\mathrm{V}_{\\mathrm{x}}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\tag{12.118}\n\\end{equation*}\n$$\n\nBy computing the difference, $\\boldsymbol{i}_{1}-\\mathrm{i}_{2}$, we obtain\n\n$$\n\\begin{equation*}\n\\left(i_{1}-i_{2}\\right)=2 K V_{B}\\left(v_{1}-v_{2}\\right) \\tag{12.119}\n\\end{equation*}\n$$\n\nHence, the output differential current is linearly related to the differential input voltage, as anticipated, and the transconductance value is directly proportional to $\\mathrm{V}_{\\mathrm{B}}$. However, it is important to note that the bias currents through $\\mathrm{Q}_{5}, \\mathrm{Q}_{6}, \\mathrm{Q}_{7}$, and $\\mathrm{Q}_{8}$ are all related to $\\mathrm{V}_{\\mathrm{B}}$ by a square-law. Consequently, the transconductance value varies with the square root of the changing bias current, similar to other active transistor CMOS transconductors. Additionally, the bias current, $\\mathrm{I}_{\\mathrm{SS}}$, does not influence the transconductance value but does set the maximum (or minimum) output current achievable.\n\nLastly, it should be noted that this offset-bias linearization technique can also be implemented in a single-ended configuration using just a few transistors, as illustrated in Fig. 12.30 [Bult, 1987]. The analysis of this configuration is left as an exercise for the reader.\n\n**Image Description:**\nThis circuit represents a bias-offset cross-coupled transconductor. It utilizes NMOS transistors to form differential pairs and manage current flow. The bias current ISS is instrumental in defining the maximum or minimum output current available. The design is intended to linearize the transconductance.\n\n$$\n\\begin{aligned}\n\\left(i_{1}-i_{2}\\right) & =2 K V_{B}\\left(V_{1}-v_{2}\\right) \\\\\nG_{m} & =2 K V_{B}\n\\end{aligned}\n$$\n\n**Fig. 12.29:** A bias-offset cross-coupled transconductor.\n\n**Image Description:**\n[\nname: Q1, type: NMOS, ports: {S: GND, D: X, G: V1}\nname: Q2, type: NMOS, ports: {S: GND, D: i2, G: X}\nname: Q3, type: NMOS, ports: {S: X, D: i1, G: VB}\n]\n**Additional Info:** This circuit is a bias-offset cross-coupled transconductor employing NMOS transistors. It establishes differential pairs to regulate current flow, with a bias current ISS determining the output current. The objective of the design is to linearize the transconductance.\n\n$$\n\\mathrm{i}_{1}-\\mathrm{i}_{2}=\\mathrm{K}\\left(\\mathrm{~V}_{\\mathrm{B}}-2 \\mathrm{~V}_{\\mathrm{tn}}\\right)\\left(2 \\mathrm{v}_{1}-\\mathrm{V}_{\\mathrm{B}}\\right)\n$$\n\n**Fig. 12.30:** A single-ended offset-bias transconductor."
},
{
    "text": "An alternative method to implement a transconductor using active transistors involves employing two cross-coupled differential pairs with an intentional voltage offset applied to one pair [Wang, 1990]. An example of this method is illustrated in Fig. 12.29, where the differential pair $Q_{1}, Q_{2}$ is cross-coupled with the bias-offset differential pair $Q_{3}, Q_{4}$. In this scenario, it is assumed that all transistors operate in the active region and are matched (i.e., all transistors possess identical device parameters K and equal threshold voltages $\\mathrm{V}_{\\mathrm{tn}}$).\n\nTo determine the differential output current, we initially calculate\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{1}=\\mathrm{K}\\left(\\mathrm{~V}_{1}-\\mathrm{V}_{\\mathrm{x}}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2}+\\mathrm{K}\\left(\\mathrm{~V}_{2}-\\mathrm{V}_{\\mathrm{B}}-\\mathrm{V}_{\\mathrm{x}}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\tag{12.117}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{2}=\\mathrm{K}\\left(\\mathrm{~V}_{2}-\\mathrm{V}_{\\mathrm{x}}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2}+\\mathrm{K}\\left(\\mathrm{~V}_{1}-\\mathrm{V}_{\\mathrm{B}}-\\mathrm{V}_{\\mathrm{x}}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\tag{12.118}\n\\end{equation*}\n$$\n\nBy computing the difference, $\\boldsymbol{i}_{1}-\\mathrm{i}_{2}$, we obtain\n\n$$\n\\begin{equation*}\n\\left(i_{1}-i_{2}\\right)=2 K V_{B}\\left(v_{1}-v_{2}\\right) \\tag{12.119}\n\\end{equation*}\n$$\n\nConsequently, the output differential current is linearly related to the differential input voltage (as anticipated), and the transconductance value is directly proportional to $\\mathrm{V}_{\\mathrm{B}}$. However, it is important to note that the bias currents through $\\mathrm{Q}_{5}, \\mathrm{Q}_{6}, \\mathrm{Q}_{7}$, and $\\mathrm{Q}_{8}$ are all related to $\\mathrm{V}_{\\mathrm{B}}$ by a square-law. Therefore, the transconductance value varies with the square root of the changing bias current, similar to other active transistor CMOS transconductors. Additionally, the bias current, $\\mathrm{I}_{\\mathrm{SS}}$, does not influence the transconductance value but sets the maximum (or minimum) output current achievable.\n\nLastly, it should be noted that this offset-bias linearization technique can also be implemented in a single-ended configuration using fewer transistors, as depicted in Fig. 12.30 [Bult, 1987]. The analysis of this configuration is left as an exercise for the reader.\n\n**Fig. 12.29 Description:**\nThis circuit represents a bias-offset cross-coupled transconductor. It utilizes NMOS transistors to form differential pairs and manage current flow. The bias current ISS plays a crucial role in determining the maximum or minimum output current available. The design aims to linearize the transconductance.\n\n$$\n\\begin{aligned}\n\\left(i_{1}-i_{2}\\right) & =2 K V_{B}\\left(V_{1}-v_{2}\\right) \\\\\nG_{m} & =2 K V_{B}\n\\end{aligned}\n$$\n\n**Fig. 12.29 A bias-offset cross-coupled transconductor:**\n[\nname: Q1, type: NMOS, ports: {S: GND, D: X, G: V1}\nname: Q2, type: NMOS, ports: {S: GND, D: i2, G: X}\nname: Q3, type: NMOS, ports: {S: X, D: i1, G: VB}\n]\nAdditional Info: This circuit is a bias-offset cross-coupled transconductor employing NMOS transistors. It creates differential pairs to control current flow, with a bias current ISS determining the output current. The design is intended to linearize the transconductance.\n\n$$\n\\mathrm{i}_{1}-\\mathrm{i}_{2}=\\mathrm{K}\\left(\\mathrm{~V}_{\\mathrm{B}}-2 \\mathrm{~V}_{\\mathrm{tn}}\\right)\\left(2 \\mathrm{v}_{1}-\\mathrm{V}_{\\mathrm{B}}\\right)\n$$\n\n**Fig. 12.30 A single-ended offset-bias transconductor.**"
},
{
    "text": "An alternative method to implement a transconductor using active transistors involves employing two cross-coupled differential pairs with an intentional voltage offset applied to one pair [Wang, 1990]. An example of this method is depicted in Fig. 12.29, where the differential pair $Q_{1}, Q_{2}$ is cross-coupled with the bias-offset differential pair $Q_{3}, Q_{4}$. In this scenario, it is assumed that all transistors operate in the active region and are matched (i.e., all transistors possess identical device parameters K and equal threshold voltages $\\mathrm{V}_{\\mathrm{tn}}$).\n\nTo determine the differential output current, we initially calculate\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{1}=\\mathrm{K}\\left(\\mathrm{~V}_{1}-\\mathrm{V}_{\\mathrm{x}}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2}+\\mathrm{K}\\left(\\mathrm{~V}_{2}-\\mathrm{V}_{\\mathrm{B}}-\\mathrm{V}_{\\mathrm{x}}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\tag{12.117}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{2}=\\mathrm{K}\\left(\\mathrm{~V}_{2}-\\mathrm{V}_{\\mathrm{x}}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2}+\\mathrm{K}\\left(\\mathrm{~V}_{1}-\\mathrm{V}_{\\mathrm{B}}-\\mathrm{V}_{\\mathrm{x}}-\\mathrm{V}_{\\mathrm{tn}}\\right)^{2} \\tag{12.118}\n\\end{equation*}\n$$\n\nBy finding the difference, $\\boldsymbol{i}_{1}-\\mathrm{i}_{2}$, we obtain\n\n$$\n\\begin{equation*}\n\\left(i_{1}-i_{2}\\right)=2 K V_{B}\\left(v_{1}-v_{2}\\right) \\tag{12.119}\n\\end{equation*}\n$$\n\nHence, the output differential current is linearly related to the differential input voltage, as anticipated, and the transconductance value is proportional to $\\mathrm{V}_{\\mathrm{B}}$. It is important to note, however, that the bias currents through $\\mathrm{Q}_{5}, \\mathrm{Q}_{6}, \\mathrm{Q}_{7}$, and $\\mathrm{Q}_{8}$ are all related to $\\mathrm{V}_{\\mathrm{B}}$ by a square-law. Consequently, the transconductance value is proportional to the square root of the varying bias current, similar to other active transistor CMOS transconductors. Additionally, the bias current, $\\mathrm{I}_{\\mathrm{SS}}$, does not influence the transconductance value but does set the maximum (or minimum) output current achievable.\n\nLastly, it should be noted that this offset-bias linearization technique can also be implemented in a single-ended configuration using just a few transistors, as illustrated in Fig. 12.30 [Bult, 1987]. The analysis of this configuration is left as an exercise for the reader.\n\n---\n\nThis circuit represents a bias-offset cross-coupled transconductor. It utilizes NMOS transistors to form differential pairs and manage current flow. The bias current ISS is instrumental in determining the maximum or minimum output current available. The design is intended to linearize the transconductance.\n\n$$\n\\begin{aligned}\n\\left(i_{1}-i_{2}\\right) & =2 K V_{B}\\left(V_{1}-v_{2}\\right) \\\\\nG_{m} & =2 K V_{B}\n\\end{aligned}\n$$\n\nFig. 12.29 A bias-offset cross-coupled transconductor.\n\n---\n\nThis circuit is a bias-offset cross-coupled transconductor employing NMOS transistors. It forms differential pairs to regulate current flow, with the bias current ISS determining the output current. The design's objective is to linearize the transconductance.\n\n$$\n\\mathrm{i}_{1}-\\mathrm{i}_{2}=\\mathrm{K}\\left(\\mathrm{~V}_{\\mathrm{B}}-2 \\mathrm{~V}_{\\mathrm{tn}}\\right)\\left(2 \\mathrm{v}_{1}-\\mathrm{V}_{\\mathrm{B}}\\right)\n$$\n\nFig. 12.30 A single-ended offset-bias transconductor."
}
]