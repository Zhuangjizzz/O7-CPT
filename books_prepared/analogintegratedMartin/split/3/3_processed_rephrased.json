[

{
    "text": "In this chapter, the fundamental building blocks are detailed. These include various current mirrors, single-stage amplifiers with active loads, and differential pairs. A thorough understanding of these components is essential for grasping numerous topics in the remainder of this book and for general analog IC design. Emphasis is placed on CMOS mirrors and gain stages due to their prevalence in contemporary designs. Fortunately, the small-signal analyses presented can be readily applied to bipolar circuits with minimal modifications. Additionally, instead of using resistive loads and AC coupling, the gain stages discussed are illustrated with current-mirror active loads, as these are almost universally employed in integrated circuits.\n\nWhen examining electronic circuits containing transistors to ascertain their small-signal behavior, it is assumed that the signals are sufficiently small for linear approximations around an operating point to accurately depict circuit operation. These linear approximations can be depicted schematically by substituting transistors with their small-signal equivalents, whose parameters ($g_{m}$, $r_{ds}$, etc.) are linked to the device's operating point currents and voltages, as summarized in Section 1.3. The general process for small-signal analysis is as follows:\na. Nullify all signal sources and conduct an operating point analysis for all currents and voltages. A voltage source set to 0 V equates to an ideal wire—a short circuit. A current source set to 0 A equates to an open circuit.\nb. Substitute all transistors with their small-signal equivalents, where parameters $g_{m}$, $r_{ds}$, etc., are derived from the operating point voltages and currents using the relationships outlined in Section 1.3.\nc. Set all independent sources to zero, excluding the signal sources nullified in step (a). This includes power supply voltages, bias currents, etc. Note that setting a voltage source to zero involves replacing it with a short circuit, and setting a current source to zero involves replacing it with an open circuit.\nd. Analyze the resultant linearized small-signal circuit to determine small-signal node voltages, branch currents, small-signal resistances, etc.\ne. If needed, the complete solution can be obtained by superimposing the results from the operating point analysis in step (a) and the small-signal analysis in step (d). The resulting solution is approximate, as the small-signal analysis simplifies transistor nonlinear behavior using linearized models.\n\nThroughout this chapter, operating point quantities are denoted with uppercase voltage and current symbols (e.g., $\\mathrm{V}_{\\mathrm{GS}}$, $\\mathrm{I}_{\\mathrm{D}}$) and small-signal quantities with lowercase symbols (e.g., $\\mathrm{V}_{\\mathrm{gs}}$, $\\mathrm{i}_{\\mathrm{d}}$). However, practicing designers must remain vigilant about imprecise notation and be capable of interpreting meanings within their appropriate context."
},
{
    "text": "In this chapter, the fundamental building blocks are detailed. These include various current mirrors, single-stage amplifiers with active loads, and differential pairs. A solid understanding of these blocks is essential for grasping many topics in the remainder of this book and for general analog IC design. Emphasis is placed on CMOS mirrors and gain stages due to their prevalence in contemporary designs. Fortunately, the majority of the small-signal analyses presented can be readily applied to bipolar circuits with minimal adjustments. Additionally, instead of using resistive loads and AC coupling, the gain stages discussed are illustrated with current-mirror active loads, as these are nearly always employed in integrated circuits.\n\nWhen examining electronic circuits containing transistors to ascertain their small-signal behavior, it is inherently assumed that the signals are sufficiently small for linear approximations around an operating point to accurately depict the circuit's operation. These linear approximations can be depicted schematically by substituting transistors with their small-signal equivalents, whose parameters ($g_{m}$, $r_{d s}$, etc.) are linked to the device's operating point currents and voltages, as outlined in Section 1.3. The general procedure for small-signal analysis is thus:\na. Set all signal sources to zero and conduct an operating point analysis for all currents and voltages. A voltage source at 0 V is equivalent to an ideal wire—a short circuit. A current source at 0 A is equivalent to an open circuit.\nb. Replace all transistors with their small-signal equivalents, where parameters $g_{m}$, $r_{d s}$, etc., are derived from the operating point voltages and currents using the relationships summarized in Section 1.3.\nc. Set all independent sources to zero, except for the signal sources that were zeroed in step (a). This includes power supply voltages, bias currents, etc. Note that setting a voltage source to zero involves replacing it with a short circuit, and setting a current source to zero involves replacing it with an open circuit.\nd. Analyze the resulting linearized small-signal circuit to determine small-signal node voltages, branch currents, small-signal resistances, etc.\ne. If needed, the complete solution can be obtained by superimposing the results of the operating point analysis from step (a) with those of the small-signal analysis from step (d). The resulting solution is approximate because the small-signal analysis uses linearized models to approximate the transistor's nonlinear behavior.\n\nThroughout this chapter, to the extent possible, operating point quantities are denoted with uppercase voltage and current symbols (e.g., $V_{GS}$, $I_{D}$) and small-signal quantities with lowercase symbols (e.g., $v_{gs}$, $i_{d}$). However, practicing designers must remain vigilant about imprecise notation and be capable of interpreting meanings within their appropriate context."
},
{
    "text": "In this chapter, essential building blocks are detailed. These include various current mirrors, single-stage amplifiers with active loads, and differential pairs. A solid understanding of these components is crucial for grasping many topics in the remainder of this book and for general analog IC design. Emphasis is placed on CMOS mirrors and gain stages due to their prevalence in contemporary designs. Fortunately, the small-signal analyses presented can be readily applied to bipolar circuits with minimal adjustments. Additionally, instead of using resistive loads and AC coupling, the gain stages discussed are illustrated with current-mirror active loads, as these are almost universally employed in integrated circuits.\n\nWhen examining electronic circuits with transistors to ascertain their small-signal behavior, it is inherently assumed that the signals are sufficiently small for linear approximations around an operating point to accurately depict circuit operation. These linear approximations can be schematically represented by substituting transistors with their small-signal equivalents, whose parameters ($g_{m}$, $r_{ds}$, etc.) are derived from the device's operating point currents and voltages, as summarized in Section 1.3. The general approach for small-signal analysis is as follows:\na. Nullify all signal sources and conduct an operating point analysis for all currents and voltages. A voltage source set to 0 V equates to an ideal wire—a short circuit. A current source set to 0 A equates to an open circuit.\nb. Substitute all transistors with their small-signal equivalents, where parameters $g_{m}$, $r_{ds}$, etc., are determined from the operating point voltages and currents using the relationships outlined in Section 1.3.\nc. Set all independent sources to zero, excluding the signal sources nullified in step (a). This includes power supply voltages, bias currents, etc. Note that setting a voltage source to zero involves replacing it with a short circuit, and setting a current source to zero involves replacing it with an open circuit.\nd. Analyze the resultant linearized small-signal circuit to determine small-signal node voltages, branch currents, small-signal resistances, etc.\ne. If needed, the complete solution can be obtained by superimposing the results of the operating point analysis from step (a) with those of the small-signal analysis from step (d). The resulting solution is approximate, as the small-signal analysis linearizes the transistor's nonlinear behavior.\n\nThroughout this chapter, operating point quantities are denoted with uppercase voltage and current symbols (e.g., $\\mathrm{V}_{\\mathrm{GS}}$, $\\mathrm{I}_{\\mathrm{D}}$) and small-signal quantities with lowercase symbols (e.g., $\\mathrm{V}_{\\mathrm{gs}}$, $\\mathrm{i}_{\\mathrm{d}}$). However, practicing designers must remain vigilant about imprecise notation and be capable of interpreting meanings within their appropriate context."
},
{
    "text": "In this chapter, the fundamental building blocks are detailed. These include various current mirrors, single-stage amplifiers equipped with active loads, and differential pairs. A solid understanding of these components is essential for grasping numerous topics in the remainder of this book and for analog IC design overall. The focus is on CMOS mirrors and gain stages due to their widespread use in contemporary designs. Fortunately, the majority of the small-signal analyses presented can be easily adapted to bipolar circuits with minimal adjustments. Furthermore, instead of employing resistive loads and AC coupling, the gain stages discussed are illustrated with current-mirror active loads, as these are predominantly used in integrated circuits.\n\nWhen examining electronic circuits with transistors to ascertain their small-signal behavior, it is inherently assumed that the signals are sufficiently small for linear approximations around an operating point to accurately depict the circuit's operation. These linear approximations can be depicted schematically by substituting transistors with their small-signal equivalents, whose parameters ($g_{m}, r_{d s}$, etc.) are tied to the device's operating point currents and voltages, as outlined in Section 1.3. The general approach for small-signal analysis is thus:\na. Nullify all signal sources and conduct an operating point analysis for all currents and voltages. A voltage source set to 0 V equates to an ideal wire—a short circuit. A current source set to 0 A is equivalent to an open circuit.\nb. Replace all transistors with their small-signal equivalents, where parameters like $g_{m}, r_{d s}$ are derived from the operating point voltages and currents using the relationships summarized in Section 1.3.\nc. Set all independent sources to zero, excluding the signal sources nullified in step (a). This encompasses power supply voltages, bias currents, etc. Note that zeroing a voltage source involves replacing it with a short circuit, and zeroing a current source means substituting it with an open circuit.\nd. Analyze the resultant linearized small-signal circuit to determine small-signal node voltages, branch currents, small-signal resistances, etc.\ne. If needed, the comprehensive solution can be obtained by superimposing the outcomes of the operating point analysis from step (a) and the small-signal analysis from step (d). The resulting solution is approximate since the small-signal analysis simplifies transistor nonlinear behavior using linearized models.\n\nThroughout this chapter, operating point quantities are denoted with uppercase voltage and current symbols (e.g., $\\mathrm{V}_{\\mathrm{GS}}, \\mathrm{I}_{\\mathrm{D}}$) and small-signal quantities with lowercase symbols (e.g., $\\mathrm{V}_{\\mathrm{gs}}, \\mathrm{i}_{\\mathrm{d}}$). However, practicing designers must remain vigilant about imprecise notation and be capable of interpreting meanings within their appropriate context."
},
{
    "text": "In this chapter, essential building blocks are detailed. These include various current mirrors, single-stage amplifiers with active loads, and differential pairs. A thorough understanding of these components is crucial for grasping numerous topics in the remainder of this book and for general analog IC design. Emphasis is placed on CMOS mirrors and gain stages due to their widespread use in contemporary designs. Fortunately, the small-signal analyses presented can be readily applied to bipolar circuits with minimal adjustments. Additionally, instead of employing resistive loads and AC coupling, the gain stages discussed are illustrated with current-mirror active loads, as these are predominantly used in integrated circuits.\n\nWhen examining electronic circuits with transistors to ascertain their small-signal behavior, it is presumed that the signals are sufficiently small for linear approximations around an operating point to accurately depict the circuit's operation. These linear approximations can be depicted schematically by substituting transistors with their small-signal equivalents, whose parameters ($g_{m}, r_{d s}$, etc.) are linked to the device's operating point currents and voltages, as outlined in Section 1.3. The general process for small-signal analysis is as follows:\na. Set all signal sources to zero and conduct an operating point analysis for all currents and voltages. A voltage source set to 0 V is equivalent to an ideal wire—a short circuit. A current source set to 0 A is equivalent to an open circuit.\nb. Replace all transistors with their small-signal equivalents, where parameters $g_{m}, r_{d s}$, etc., are derived from the operating point voltages and currents using the relationships summarized in Section 1.3.\nc. Set all independent sources to zero, except for the signal sources that were zeroed in step (a). This includes power supply voltages, bias currents, etc. Note that setting a voltage source to zero means replacing it with a short circuit, and setting a current source to zero means replacing it with an open circuit.\nd. Analyze the resulting linearized small-signal circuit to determine small-signal node voltages, branch currents, small-signal resistances, etc.\ne. If needed, the complete solution can be obtained by superimposing the results of the operating point analysis from step (a) and the small-signal analysis from step (d). The resulting solution is approximate because the small-signal analysis linearizes the transistor's nonlinear behavior.\n\nThroughout this chapter, operating point quantities are denoted with uppercase voltage and current symbols (e.g., $\\mathrm{V}_{\\mathrm{GS}}, \\mathrm{I}_{\\mathrm{D}}$) and small-signal quantities with lowercase symbols (e.g., $\\mathrm{V}_{\\mathrm{gs}}, \\mathrm{i}_{\\mathrm{d}}$). However, practicing designers must remain vigilant about imprecise notation and be capable of interpreting meanings within their appropriate context."
},
{
    "text": "In this section, essential building blocks are detailed. These include various current mirrors, single-stage amplifiers with active loads, and differential pairs. A solid understanding of these components is crucial for grasping numerous topics in the remainder of this book and for analog IC design overall. Emphasis is placed on CMOS mirrors and gain stages due to their widespread use in contemporary designs. Fortunately, the small-signal analyses presented can be easily adapted to bipolar circuits with minimal modifications. Additionally, instead of employing resistive loads and AC coupling, the gain stages discussed are illustrated with current-mirror active loads, as these are nearly always utilized in integrated circuits.\n\nWhen examining electronic circuits with transistors to ascertain their small-signal behavior, it is presumed that the signals are sufficiently small for linear approximations around an operating point to accurately depict circuit operation. These linear approximations can be depicted schematically by substituting transistors with their small-signal equivalents, whose parameters ($g_{m}, r_{d s}$, etc.) are linked to the device's operating point currents and voltages, as outlined in Section 1.3. The general process for small-signal analysis is thus:\na. Nullify all signal sources and conduct an operating point analysis for all currents and voltages. A voltage source set to 0 V equates to an ideal wire—a short circuit. A current source set to 0 A equates to an open circuit.\nb. Substitute all transistors with their small-signal equivalents, where parameters $g_{m}, r_{d s}$, etc., are derived from the operating point voltages and currents using the relationships summarized in Section 1.3.\nc. Nullify all independent sources, except for the signal sources that were zeroed in step (a). This includes power supply voltages, bias currents, etc. Note that setting a voltage source to zero means replacing it with a short circuit, and setting a current source to zero means replacing it with an open circuit.\nd. Analyze the resulting linearized small-signal circuit to determine small-signal node voltages, branch currents, small-signal resistances, etc.\ne. If needed, the complete solution can be obtained by superimposing the results of the operating point analysis from step (a) with those of the small-signal analysis from step (d). The resulting solution is approximate because the small-signal analysis uses linearized models to approximate transistor nonlinear behavior.\n\nThroughout this chapter, to the extent possible, operating point quantities are denoted with uppercase voltage and current symbols (e.g., $\\mathrm{V}_{\\mathrm{GS}}, \\mathrm{I}_{\\mathrm{D}}$) and small-signal quantities with lowercase symbols (e.g., $\\mathrm{V}_{\\mathrm{gs}}, \\mathrm{i}_{\\mathrm{d}}$). However, practicing designers must remain vigilant about imprecise notation and be capable of interpreting meanings within their appropriate context."
},
{
    "text": "In this chapter, the foundational building blocks are detailed, encompassing various current mirrors, single-stage amplifiers with active loads, and differential pairs. A thorough understanding of these elements is crucial for grasping numerous topics in the remainder of this book and for analog IC design overall. The focus is on CMOS mirrors and gain stages due to their prevalence in contemporary designs. Fortunately, the majority of the small-signal analyses presented can be readily applied to bipolar circuits with minimal adjustments. Furthermore, instead of employing resistive loads and AC coupling, the gain stages discussed are illustrated with current-mirror active loads, as these are almost universally used in integrated circuits.\n\nWhen examining electronic circuits with transistors to ascertain their small-signal behavior, it is inherently assumed that the signals are sufficiently small for linear approximations around an operating point to accurately depict the circuit's operation. These linear approximations can be depicted schematically by substituting transistors with their small-signal equivalents, whose parameters ($g_{m}, r_{d s}$, etc.) are linked to the device's operating point currents and voltages, as outlined in Section 1.3. The general process for small-signal analysis is thus:\na. Nullify all signal sources and conduct an operating point analysis for all currents and voltages. A voltage source set to 0 V equates to an ideal wire—a short circuit. A current source set to 0 A equates to an open circuit.\nb. Substitute all transistors with their small-signal equivalents, where parameters $g_{m}, r_{d s}$, etc., are derived from the operating point voltages and currents using the relationships summarized in Section 1.3.\nc. Set all independent sources to zero, excluding the signal sources nullified in step (a). This includes power supply voltages, bias currents, etc. Note that setting a voltage source to zero means replacing it with a short circuit, and setting a current source to zero means replacing it with an open circuit.\nd. Analyze the resultant linearized small-signal circuit to determine small-signal node voltages, branch currents, small-signal resistances, etc.\ne. If needed, the complete solution can be obtained by superimposing the results of the operating point analysis from step (a) and the small-signal analysis from step (d). The resulting solution is approximate because the small-signal analysis uses linearized models to approximate the transistor's nonlinear behavior.\n\nThroughout this chapter, to the extent possible, operating point quantities are denoted with uppercase voltage and current symbols (e.g., $\\mathrm{V}_{\\mathrm{GS}}, \\mathrm{I}_{\\mathrm{D}}$), while small-signal quantities are represented with lowercase symbols (e.g., $\\mathrm{V}_{\\mathrm{gs}}, \\mathrm{i}_{\\mathrm{d}}$). However, practicing designers must remain vigilant about imprecise notation and be capable of interpreting meanings within their appropriate context."
},
{
    "text": "In this chapter, essential building blocks are detailed, encompassing various current mirrors, single-stage amplifiers with active loads, and differential pairs. Proficiency in these blocks is crucial for grasping numerous topics in the remainder of this book and for analog IC design broadly. Emphasis is placed on CMOS mirrors and gain stages due to their prevalence in contemporary designs.幸运的是, most of the small-signal analyses presented can be adapted to bipolar circuits with minimal alteration. Additionally, instead of employing resistive loads and ac coupling, the discussed gain stages are illustrated with current-mirror active loads, as these are predominantly used in integrated circuits.\n\nWhen examining electronic circuits with transistors to ascertain their small-signal behavior, it is assumed that signals are sufficiently small for linear approximations around an operating point to accurately depict circuit operation. These linear approximations can be depicted schematically by substituting transistors with their small-signal equivalents, whose parameters ($g_{m}, r_{d s}$, etc.) are linked to the device's operating point currents and voltages, as outlined in Section 1.3. The general process for small-signal analysis is thus:\na. Nullify all signal sources and conduct an operating point analysis for all currents and voltages. A voltage source set to 0 V equates to an ideal wire—a short circuit. A current source set to 0 A equates to an open circuit.\nb. Replace all transistors with their small-signal equivalents, where parameters $g_{m}, r_{d s}$, etc., are derived from the operating point voltages and currents using the relationships summarized in Section 1.3.\nc. Nullify all independent sources, excluding the signal sources zeroed in step (a). This includes power supply voltages, bias currents, etc. Recall that setting a voltage source to zero involves replacing it with a short circuit, and setting a current source to zero involves replacing it with an open circuit.\nd. Analyze the resultant linearized small-signal circuit to determine small-signal node voltages, branch currents, small-signal resistances, etc.\ne. If needed, the complete solution can be obtained by superimposing the outcomes of the operating point analysis in step (a) and the small-signal analysis in step (d). The resulting solution is approximate since the small-signal analysis simplifies transistor nonlinear behavior using linearized models.\n\nWithin this chapter, to the extent feasible, operating point quantities are denoted with uppercase voltage and current symbols (e.g., $\\mathrm{V}_{\\mathrm{GS}}, \\mathrm{I}_{\\mathrm{D}}$) and small-signal quantities with lowercase symbols (e.g., $\\mathrm{V}_{\\mathrm{gs}}, \\mathrm{i}_{\\mathrm{d}}$). However, practicing designers must remain vigilant about imprecise notation and be adept at interpreting meanings within their appropriate context."
},
{
    "text": "```\nimage_name: Fig. 3.1 A basic CMOS current mirror\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: V1, G: Vi}\nname: Q2, type: NMOS, ports: {S: GND, D: Vout, G: Vi}\nname: I_in, type: CurrentSource, ports: {Np: LOAD, Nn: V1}\n]\nextrainfo: This circuit is a basic CMOS current mirror featuring two NMOS transistors, Q1 and Q2. The input current I_in is mirrored to the output current I_out. The gates of Q1 and Q2 are connected, and both sources are linked to GND. The drain of Q1 connects to the input current source, while Q2's drain connects to the output load.\n\nFig. 3.1 A basic CMOS current mirror.\n\nAn ideal current mirror is a two-port circuit that takes an input current $\\mathrm{I}_{\\text {in }}$ and generates an output current $\\mathrm{I}_{\\text {out }}=\\mathrm{I}_{\\text {in }}$. Optimal current sensing occurs with low resistance, similar to an ammeter, thus the ideal current source has zero input resistance. An ideal current source possesses high output resistance, a trait shared by an ideal current mirror, enabling it to accurately replicate the input current irrespective of connected source and load impedances.\n\nFig. 3.1 illustrates a basic CMOS current mirror, assuming both transistors operate in the active region, meaning Q2's drain voltage must exceed $\\mathrm{V}_{\\text {eff } 2}$. Ignoring the transistors' finite small-signal drain-source impedances and assuming identical sizing, Q1 and Q2 will conduct the same current due to equal gate-source voltage, $\\mathrm{V}_{\\mathrm{gs}}$. However, considering finite drain-source impedance, the transistor with the higher drain-source voltage will also have a higher current. Let's compare this circuit to an \"ideal\" current source with zero input resistance and infinite output resistance.\n\nTo determine the input resistance, examine the small-signal model for Q1 alone, as depicted in Fig. 3.2(a). The independent current source $I_{i n}$ is absent in the small-signal model, replaced by an open circuit. Note that a low-frequency small-signal model is used for Q1, disregarding capacitors. This model can be simplified by deriving the Thévenin-equivalent circuit. The Thévenin-equivalent output voltage is zero due to the circuit's stability and lack of input signal. The Thévenin-equivalent input impedance is calculated by applying a test signal voltage, $v_{y}$, at $v_{1}$ and measuring the signal current, $i_{y}$. Here, the current $\\mathrm{i}_{\\mathrm{y}}$ is expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{y}}=\\frac{v_{\\mathrm{y}}}{\\mathrm{r}_{\\mathrm{ds} 1}}+\\mathrm{g}_{\\mathrm{m} 1} v_{\\mathrm{gs} 1}=\\frac{v_{\\mathrm{y}}}{r_{\\mathrm{ds} 1}}+\\mathrm{g}_{\\mathrm{m} 1} v_{\\mathrm{y}} \\tag{3.1}\n\\end{equation*}\n$$\n\nThe input impedance is $v_{y} / i_{y}$, equating to $1 / g_{m 1} \\| r_{d s 1}$. Given that typically $r_{d s 1}>1 / g_{m 1}$, we approximate the input impedance as $1 / \\mathrm{g}_{\\mathrm{m} 1}$ (also defined as $\\mathrm{r}_{\\mathrm{s} 1}$), resulting in the model shown in Fig. 3.2(c). This outcome applies to bipolar cases and resembles the small-signal model for a diode, often leading to Q1 being termed a diode-connected transistor.\nimage_name: Fig. 3.2 (a)\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: g1d1, G: g1d1}\n]\nextrainfo: This diagram depicts a diode-connected NMOS transistor Q1 with the gate and drain interconnected. This setup is commonly used for creating current sources or voltage references. The equivalent small-signal model simplifies the impedance to 1/g_m1, assuming r_ds1 is significantly larger than 1/g_m1.\nimage_name: Fig. 3.2 (b)\ndescription:\n[\n'name': 'r_ds1', 'type': 'Resistor', 'value': 'r_ds1', 'ports': {'N1': 'vgs1', 'N2': 'GND'\n'name': 'g_m1*v_gs1', 'type': 'VoltageControlledCurrentSource', 'value': 'g_m1*v_gs1', 'ports': {'Np': 'GND', 'Nn': 'vgs1'\n'name': 'v_y', 'type': 'VoltageSource', 'value': 'v_y', 'ports': {'Np': 'vy', 'Nn': 'GND'\n]\nextrainfo: The circuit diagram illustrates the small-signal model for a diode-connected NMOS transistor Q1, incorporating transconductance g_m1 and output resistance r_ds1, with an input voltage source v_y.\nimage_name: Fig. 3.2 (c)\ndescription:\n[\nname: rin, type: Resistor, value: 1/gm1, ports: {Np: V1, Nn: GND}\n]\nextrainfo: The circuit diagram 'Fig. 3.2 (c)' depicts a simplified small-signal model for a diode-connected transistor Q1. The input impedance is approximated as 1/g_m1, indicating the transistor acts like a resistor of value 1/g_m1 between Vy and GND.\nFig. 3.2 (a) A diode-connected transistor, $Q_{1}$, (b) the small-signal model for $Q_{1}$, and (c) an equivalent simplified small-signal model for $Q_{1}$.\nimage_name: (a)\ndescription: This diagram illustrates a small-signal model of a current mirror with transistors Q1 and Q2. The input current Iin flows into Q2's gate, and the output current Iout is derived from Q2's drain. The resistor 1/gm1 models Q1's input impedance, and the voltage-controlled current source gm2vgs2 represents Q2's transconductance. The resistor rds2 denotes Q2's output resistance. The voltage source Vx is utilized for analyzing output characteristics.\nimage_name: (b)\ndescription: The circuit diagram (b) shows a simplified small-signal model for calculating the small-signal output resistance, r_out. It comprises a resistor r_ds2 and a voltage source V_x in parallel, both connected to ground. The voltage source V_x is applied across nodes Vx and GND.\n\nFig. 3.3 (a) A small-signal model for the current mirror of Fig. 3.1 and (b) a simplified small-signal model for determining the small-signal output resistance, $r_{\\text {out }}$.\n\nEmploying the described model results in a simplified small-signal model for the overall current mirror, as shown in Fig. 3.3(a), where $\\mathrm{v}_{\\mathrm{gs} 2}$ is connected to ground via a resistance of $1 / \\mathrm{g}_{\\mathrm{m} 1}$. Since no current flows through the $1 / \\mathrm{g}_{\\mathrm{m} 1}$ resistor, $\\mathrm{v}_{\\mathrm{g} \\mathbf{2} 2}=0$ regardless of the voltage $\\mathrm{v}_{\\mathrm{x}}$ applied to the current-mirror output. This is expected, as MOS transistors function unilaterally at low frequencies. Thus, with $\\mathrm{g}_{\\mathrm{m} 2} \\mathbf{v}_{\\mathrm{gs} 2}=0$, the circuit simplifies to the model in Fig. 3.3(b). The small-signal output resistance, $r_{\\text {out }}$, is simply $r_{\\mathrm{ds} 2}$.\n\nKey Point: A basic CMOS current mirror exhibits a small-signal input resistance of $1 / \\mathrm{g}_{\\mathrm{m} 1}$ and a small-signal output resistance of $\\mathrm{r}_{\\mathrm{ds} 2}$.\n```"
},
{
    "text": "```\nimage_name: Fig. 3.1 A basic CMOS current mirror\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: V1, G: Vi}\nname: Q2, type: NMOS, ports: {S: GND, D: Vout, G: Vi}\nname: I_in, type: CurrentSource, ports: {Np: LOAD, Nn: V1}\n]\nextrainfo: This circuit is a straightforward CMOS current mirror utilizing two NMOS transistors, Q1 and Q2. The input current I_in is mirrored to the output current I_out. The gates of Q1 and Q2 are connected, and both transistors' sources are linked to GND. The drain of Q1 is connected to the input current source, while Q2's drain is connected to the output load.\n\nFig. 3.1 A basic CMOS current mirror.\n\nAn ideal current mirror is a two-port circuit that takes an input current $\\mathrm{I}_{\\text {in }}$ and generates an output current $\\mathrm{I}_{\\text {out }}=\\mathrm{I}_{\\text {in }}$. Given that current sensing is most effective with low resistance, akin to an ammeter, the ideal current source should have zero input resistance. An ideal current source features high output resistance, and similarly, so does an ideal current mirror. This ensures the ideal current mirror accurately replicates the input current, irrespective of the connected source and load impedances.\n\nFig. 3.1 illustrates a basic CMOS current mirror, assuming both transistors operate in the active region, meaning Q2's drain voltage must exceed $\\mathrm{V}_{\\text {eff } 2}$. If the transistors' finite small-signal drain-source impedances are neglected and both are assumed to be of the same size, Q1 and Q2 will carry the same current due to identical gate-source voltages, $\\mathrm{V}_{\\mathrm{gs}}$. However, when finite drain-source impedance is considered, the transistor with the higher drain-source voltage will also have a higher current. Let's compare this basic circuit to an \"ideal\" current source with zero input resistance and infinite output resistance.\n\nTo determine the input resistance, examine the small-signal model for Q1 alone, as depicted in Fig. 3.2(a). The independent current source $I_{i n}$ is absent in the small-signal model and is replaced by an open circuit. Note that a low-frequency small-signal model is employed for Q1, disregarding all capacitors. This model can be further simplified by deriving the Thévenin-equivalent circuit. The Thévenin-equivalent output voltage is zero due to the circuit's stability and lack of input signal. The circuit's Thévenin-equivalent input impedance is calculated by applying a test signal voltage, $v_{y}$, at $v_{1}$ and measuring the resulting signal current, $i_{y}$. Here, the current $\\mathrm{i}_{\\mathrm{y}}$ is expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{y}}=\\frac{v_{\\mathrm{y}}}{\\mathrm{r}_{\\mathrm{ds} 1}}+\\mathrm{g}_{\\mathrm{m} 1} v_{\\mathrm{gs} 1}=\\frac{v_{\\mathrm{y}}}{r_{\\mathrm{ds} 1}}+\\mathrm{g}_{\\mathrm{m} 1} v_{\\mathrm{y}} \\tag{3.1}\n\\end{equation*}\n$$\n\nThe input impedance is $v_{y} / i_{y}$, equating to $1 / g_{m 1} \\| r_{d s 1}$. Since typically $r_{d s 1}>1 / g_{m 1}$, the input impedance is approximated as $1 / \\mathrm{g}_{\\mathrm{m} 1}$ (also defined as $\\mathrm{r}_{\\mathrm{s} 1}$), resulting in the model shown in Fig. 3.2(c). This outcome is consistent in bipolar cases and equivalent to the small-signal model for a diode, hence Q1 is often termed a diode-connected transistor.\nimage_name: Fig. 3.2 (a)\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: g1d1, G: g1d1}\n]\nextrainfo: The diagram depicts a diode-connected NMOS transistor Q1 with the gate and drain interconnected. This setup is commonly used for creating current sources or voltage references. The equivalent small-signal model simplifies the impedance to 1/g_m1, assuming r_ds1 is significantly larger than 1/g_m1.\nimage_name: Fig. 3.2 (b)\ndescription:\n[\n'name': 'r_ds1', 'type': 'Resistor', 'value': 'r_ds1', 'ports': {'N1': 'vgs1', 'N2': 'GND'\n'name': 'g_m1*v_gs1', 'type': 'VoltageControlledCurrentSource', 'value': 'g_m1*v_gs1', 'ports': {'Np': 'GND', 'Nn': 'vgs1'\n'name': 'v_y', 'type': 'VoltageSource', 'value': 'v_y', 'ports': {'Np': 'vy', 'Nn': 'GND'\n]\nextrainfo: The circuit diagram represents the small-signal model for a diode-connected NMOS transistor Q1, incorporating transconductance g_m1 and output resistance r_ds1, with an input voltage source v_y.\nimage_name: Fig. 3.2 (c)\ndescription:\n[\nname: rin, type: Resistor, value: 1/gm1, ports: {Np: V1, Nn: GND}\n]\nextrainfo: The circuit diagram 'Fig. 3.2 (c)' illustrates a simplified small-signal model for a diode-connected transistor Q1. The input impedance is approximated as 1/g_m1, indicating the transistor behaves like a resistor with value 1/g_m1 between Vy and GND.\nFig. 3.2 (a) A diode-connected transistor, $Q_{1}$, (b) the small-signal model for $Q_{1}$, and (c) an equivalent simplified small-signal model for $Q_{1}$.\nimage_name: (a)\ndescription: The diagram represents a small-signal model of a current mirror with transistors Q1 and Q2. The input current Iin flows into the gate of Q2, and the output current Iout is derived from the drain of Q2. The resistor 1/gm1 models the input impedance of Q1, and the voltage-controlled current source gm2vgs2 represents the transconductance of Q2. The resistor rds2 denotes the output resistance of Q2. The voltage source Vx is used for analyzing output characteristics.\nimage_name: (b)\ndescription: The circuit diagram (b) depicts a simplified small-signal model for determining the small-signal output resistance, r_out. It comprises a resistor r_ds2 and a voltage source V_x connected in parallel, both linked to ground. The voltage source V_x is applied across nodes Vx and GND.\n\nFig. 3.3 (a) A small-signal model for the current mirror of Fig. 3.1 and (b) a simplified small-signal model for determining the small-signal output resistance, $r_{\\text {out }}$.\n\nUtilizing the described model results in a simplified small-signal model for the overall current mirror shown in Fig. 3.3(a), where $\\mathrm{v}_{\\mathrm{gs} 2}$ is connected to ground via a resistance of $1 / \\mathrm{g}_{\\mathrm{m} 1}$. Since no current flows through the $1 / \\mathrm{g}_{\\mathrm{m} 1}$ resistor, $\\mathrm{v}_{\\mathrm{g} \\mathbf{2} 2}=0$ regardless of the voltage $\\mathrm{v}_{\\mathrm{x}}$ applied to the current-mirror output. This is expected, as MOS transistors operate unilaterally at low frequencies. Thus, with $\\mathrm{g}_{\\mathrm{m} 2} \\mathbf{v}_{\\mathrm{gs} 2}=0$, the circuit simplifies to the model in Fig. 3.3(b). The small-signal output resistance, $r_{\\text {out }}$, is simply $r_{\\mathrm{ds} 2}$.\n\nKey Point: A basic CMOS current mirror exhibits a small-signal input resistance of $1 / \\mathrm{g}_{\\mathrm{m} 1}$ and a small-signal output resistance of $\\mathrm{r}_{\\mathrm{ds} 2}$.\n```"
},
{
    "text": "```\nimage_name: Fig. 3.1 A basic CMOS current mirror\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: V1, G: Vi}\nname: Q2, type: NMOS, ports: {S: GND, D: Vout, G: Vi}\nname: I_in, type: CurrentSource, ports: {Np: LOAD, Nn: V1}\n]\nextrainfo: This circuit is a fundamental CMOS current mirror featuring two NMOS transistors, Q1 and Q2. The input current I_in is mirrored to the output current I_out. The gates of Q1 and Q2 are connected, and both transistors' sources are linked to GND. Q1's drain connects to the input current source, while Q2's drain connects to the output load.\n\nFig. 3.1 A basic CMOS current mirror.\n\nAn ideal current mirror is a two-port device that takes an input current $\\mathrm{I}_{\\text{in}}$ and produces an output current $\\mathrm{I}_{\\text{out}} = \\mathrm{I}_{\\text{in}}$. Optimal current sensing requires low resistance, akin to an ammeter, thus the ideal current source has zero input resistance. An ideal current source boasts high output resistance, a trait shared by an ideal current mirror. This ensures the mirror accurately replicates the input current, irrespective of the connected source and load impedances.\n\nFig. 3.1 illustrates a basic CMOS current mirror, assuming both transistors operate in the active region, meaning Q2's drain voltage must exceed $\\mathrm{V}_{\\text{eff}2}$. Neglecting the transistors' finite small-signal drain-source impedances and assuming identical sizing, Q1 and Q2 will conduct equal currents due to their identical gate-source voltage, $\\mathrm{V}_{\\mathrm{gs}}$. However, considering finite drain-source impedance, the transistor with the higher drain-source voltage will also have a higher current. Let's compare this circuit to an \"ideal\" current source with zero input resistance and infinite output resistance.\n\nTo determine the input resistance, analyze the small-signal model for Q1 alone, as depicted in Fig. 3.2(a). The independent current source $I_{\\text{in}}$ is absent in the small-signal model, replaced by an open circuit. Note that a low-frequency small-signal model is used for Q1, ignoring all capacitors. This model can be simplified by deriving the Thévenin-equivalent circuit. The Thévenin-equivalent output voltage is zero due to the circuit's stability and lack of input signal. The Thévenin-equivalent input impedance is found by applying a test voltage, $v_{y}$, at $v_{1}$ and measuring the resultant current, $i_{y}$. Here, the current $\\mathrm{i}_{\\mathrm{y}}$ is expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{y}} = \\frac{v_{\\mathrm{y}}}{\\mathrm{r}_{\\mathrm{ds}1}} + \\mathrm{g}_{\\mathrm{m}1} v_{\\mathrm{gs}1} = \\frac{v_{\\mathrm{y}}}{r_{\\mathrm{ds}1}} + \\mathrm{g}_{\\mathrm{m}1} v_{\\mathrm{y}} \\tag{3.1}\n\\end{equation*}\n$$\n\nThe input impedance is $v_{y} / i_{y}$, equating to $1 / g_{m1} \\| r_{ds1}$. Since typically $r_{ds1} > 1 / g_{m1}$, the input impedance is approximated as $1 / \\mathrm{g}_{\\mathrm{m}1}$ (also defined as $\\mathrm{r}_{\\mathrm{s}1}$), resulting in the model shown in Fig. 3.2(c). This outcome applies to bipolar cases and resembles the small-signal model for a diode, hence Q1 is often termed a diode-connected transistor.\nimage_name: Fig. 3.2 (a)\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: g1d1, G: g1d1}\n]\nextrainfo: The diagram depicts a diode-connected NMOS transistor Q1 with the gate and drain interconnected. This setup is commonly used for creating current sources or voltage references. The equivalent small-signal model simplifies the impedance to 1/g_m1, assuming r_ds1 is much larger than 1/g_m1.\nimage_name: Fig. 3.2 (b)\ndescription:\n[\n'name': 'r_ds1', 'type': 'Resistor', 'value': 'r_ds1', 'ports': {'N1': 'vgs1', 'N2': 'GND'}\n'name': 'g_m1*v_gs1', 'type': 'VoltageControlledCurrentSource', 'value': 'g_m1*v_gs1', 'ports': {'Np': 'GND', 'Nn': 'vgs1'}\n'name': 'v_y', 'type': 'VoltageSource', 'value': 'v_y', 'ports': {'Np': 'vy', 'Nn': 'GND'}\n]\nextrainfo: This circuit diagram illustrates the small-signal model for a diode-connected NMOS transistor Q1, including transconductance g_m1 and output resistance r_ds1, with an input voltage source v_y.\nimage_name: Fig. 3.2 (c)\ndescription:\n[\nname: rin, type: Resistor, value: 1/gm1, ports: {Np: V1, Nn: GND}\n]\nextrainfo: The circuit diagram 'Fig. 3.2 (c)' depicts a simplified small-signal model for a diode-connected transistor Q1. The input impedance is approximated as 1/g_m1, indicating the transistor behaves like a resistor of value 1/g_m1 between Vy and GND.\nFig. 3.2 (a) A diode-connected transistor, $Q_{1}$, (b) the small-signal model for $Q_{1}$, and (c) an equivalent simplified small-signal model for $Q_{1}$.\nimage_name: (a)\ndescription: The diagram shows a small-signal model of a current mirror with transistors Q1 and Q2. The input current Iin flows into the gate of Q2, and the output current Iout is derived from the drain of Q2. The resistor 1/gm1 models Q1's input impedance, and the voltage-controlled current source gm2vgs2 represents Q2's transconductance. The resistor rds2 models Q2's output resistance. The voltage source Vx is used for analyzing output characteristics.\nimage_name: (b)\ndescription: The circuit diagram (b) illustrates a simplified small-signal model for determining the small-signal output resistance, r_out. It comprises a resistor r_ds2 and a voltage source V_x connected in parallel, both linked to ground. The voltage source V_x is applied across nodes Vx and GND.\n\nFig. 3.3 (a) A small-signal model for the current mirror of Fig. 3.1 and (b) a simplified small-signal model for determining the small-signal output resistance, $r_{\\text{out}}$.\n\nUsing the described model results in a simplified small-signal model for the overall current mirror shown in Fig. 3.3(a), where $\\mathrm{v}_{\\mathrm{gs}2}$ is connected to ground via a resistance of $1 / \\mathrm{g}_{\\mathrm{m}1}$. Since no current flows through the $1 / \\mathrm{g}_{\\mathrm{m}1}$ resistor, $\\mathrm{v}_{\\mathrm{gs}2} = 0$ regardless of the voltage $\\mathrm{v}_{\\mathrm{x}}$ applied to the current-mirror output. This is expected, as MOS transistors operate unilaterally at low frequencies. Thus, with $\\mathrm{g}_{\\mathrm{m}2} \\mathrm{v}_{\\mathrm{gs}2} = 0$, the circuit simplifies to the model in Fig. 3.3(b). The small-signal output resistance, $r_{\\text{out}}$, is simply $r_{\\mathrm{ds}2}$.\n\nKey Point: A basic CMOS current mirror exhibits a small-signal input resistance of $1 / \\mathrm{g}_{\\mathrm{m}1}$ and a small-signal output resistance of $\\mathrm{r}_{\\mathrm{ds}2}$.\n```"
},
{
    "text": "```\nimage_name:Fig. 3.1 A basic CMOS current mirror\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: V1, G: Vi}\nname: Q2, type: NMOS, ports: {S: GND, D: Vout, G: Vi}\nname: I_in, type: CurrentSource, ports: {Np: LOAD, Nn: V1}\n]\nextrainfo:This circuit is a basic CMOS current mirror featuring two NMOS transistors, Q1 and Q2. The input current I_in is mirrored to the output current I_out. The gates of Q1 and Q2 are connected, and both transistors' sources are linked to GND. The drain of Q1 connects to the input current source, while Q2's drain connects to the output load.\n\nFig. 3.1 A basic CMOS current mirror.\n\nAn ideal current mirror is a two-port circuit that takes an input current $\\mathrm{I}_{\\text {in }}$ and generates an output current $\\mathrm{I}_{\\text {out }}=\\mathrm{I}_{\\text {in }}$. For optimal current sensing, a low resistance is preferred, similar to an ammeter, hence the ideal current source has zero input resistance. An ideal current source boasts high output resistance, a trait shared by an ideal current mirror. This ensures the current mirror accurately replicates the input current, irrespective of the connected source and load impedances.\n\nFig. 3.1 illustrates a basic CMOS current mirror, assuming both transistors operate in the active region, meaning Q2's drain voltage must exceed $\\mathrm{V}_{\\text {eff } 2}$. Ignoring the transistors' finite small-signal drain-source impedances and assuming they are of identical size, Q1 and Q2 will conduct the same current due to equal gate-source voltage, $\\mathrm{V}_{\\mathrm{gs}}$. However, considering finite drain-source impedance, the transistor with the higher drain-source voltage will conduct more current. Let's compare this circuit to an \"ideal\" current source with zero input resistance and infinite output resistance.\n\nTo determine the input resistance, examine the small-signal model for Q1 alone, as depicted in Fig. 3.2(a). The independent current source $I_{i n}$ is absent in the small-signal model, replaced by an open circuit. Note that a low-frequency small-signal model is used for Q1, ignoring all capacitors. This model can be simplified by deriving the Thévenin-equivalent circuit. The Thévenin-equivalent output voltage is zero due to the circuit's stability and lack of input signal. The input impedance is found by applying a test voltage, $v_{y}$, at $v_{1}$ and measuring the resulting current, $i_{y}$. The current $\\mathrm{i}_{\\mathrm{y}}$ is given by\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{y}}=\\frac{v_{\\mathrm{y}}}{\\mathrm{r}_{\\mathrm{ds} 1}}+\\mathrm{g}_{\\mathrm{m} 1} v_{\\mathrm{gs} 1}=\\frac{v_{\\mathrm{y}}}{r_{\\mathrm{ds} 1}}+\\mathrm{g}_{\\mathrm{m} 1} v_{\\mathrm{y}} \\tag{3.1}\n\\end{equation*}\n$$\n\nThe input impedance is $v_{y} / i_{y}$, equating to $1 / g_{m 1} \\| r_{d s 1}$. Since typically $r_{d s 1}>1 / g_{m 1}$, we approximate the input impedance as $1 / \\mathrm{g}_{\\mathrm{m} 1}$ (also defined as $\\mathrm{r}_{\\mathrm{s} 1}$), resulting in the model shown in Fig. 3.2(c). This applies to bipolar cases and resembles the small-signal model for a diode, hence Q1 is often termed a diode-connected transistor.\nimage_name:Fig. 3.2 (a)\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: g1d1, G: g1d1}\n]\nextrainfo:This diagram depicts a diode-connected NMOS transistor Q1, with the gate and drain interconnected. This setup is common for creating current sources or voltage references. The equivalent small-signal model simplifies the impedance to 1/g_m1, assuming r_ds1 is much greater than 1/g_m1.\nimage_name:Fig. 3.2 (b)\ndescription:\n[\n'name': 'r_ds1', 'type': 'Resistor', 'value': 'r_ds1', 'ports': {'N1': 'vgs1', 'N2': 'GND'\n'name': 'g_m1*v_gs1', 'type': 'VoltageControlledCurrentSource', 'value': 'g_m1*v_gs1', 'ports': {'Np': 'GND', 'Nn': 'vgs1'\n'name': 'v_y', 'type': 'VoltageSource', 'value': 'v_y', 'ports': {'Np': 'vy', 'Nn': 'GND'\n]\nextrainfo:The circuit diagram represents the small-signal model for a diode-connected NMOS transistor Q1, including transconductance g_m1 and output resistance r_ds1, with an input voltage source v_y.\nimage_name:Fig. 3.2 (c)\ndescription:\n[\nname: rin, type: Resistor, value:1/gm1, ports: {Np: V1, Nn: GND}\n]\nextrainfo:The circuit diagram 'Fig. 3.2 (c)' shows a simplified small-signal model for a diode-connected transistor Q1. The input impedance is approximated as 1/g_m1, indicating the transistor behaves like a resistor of value 1/g_m1 between Vy and GND.\nFig. 3.2 (a) A diode-connected transistor, $Q_{1}$, (b) the small-signal model for $Q_{1}$, and (c) a simplified small-signal model for $Q_{1}$.\nimage_name:(a)\ndescription:The diagram illustrates a small-signal model of a current mirror with transistors Q1 and Q2. The input current Iin flows into Q2's gate, and the output current Iout is derived from Q2's drain. The resistor 1/gm1 models Q1's input impedance, and the voltage-controlled current source gm2vgs2 represents Q2's transconductance. The resistor rds2 denotes Q2's output resistance. The voltage source Vx is used for analyzing output characteristics.\nimage_name:(b)\ndescription:The circuit diagram (b) shows a simplified small-signal model for determining the small-signal output resistance, r_out. It includes a resistor r_ds2 and a voltage source V_x in parallel, both connected to ground. The voltage source V_x is applied across nodes Vx and GND.\n\nFig. 3.3 (a) A small-signal model for the current mirror of Fig. 3.1 and (b) a simplified model for determining the small-signal output resistance, $r_{\\text {out }}$.\n\nUsing the described model results in a simplified small-signal model for the overall current mirror, as shown in Fig. 3.3(a), where $\\mathrm{v}_{\\mathrm{gs} 2}$ is connected to ground via a resistance of $1 / \\mathrm{g}_{\\mathrm{m} 1}$. Since no current flows through the $1 / \\mathrm{g}_{\\mathrm{m} 1}$ resistor, $\\mathrm{v}_{\\mathrm{g} \\mathbf{2} 2}=0$ regardless of the voltage $\\mathrm{v}_{\\mathrm{x}}$ applied to the current-mirror output. This is expected, as MOS transistors operate unilaterally at low frequencies. Thus, with $\\mathrm{g}_{\\mathrm{m} 2} \\mathbf{v}_{\\mathrm{gs} 2}=0$, the circuit simplifies to the model in Fig. 3.3(b). The small-signal output resistance, $r_{\\text {out }}$, is simply $r_{\\mathrm{ds} 2}$.\n\nKey Point: A basic CMOS current mirror exhibits a small-signal input resistance of $1 / \\mathrm{g}_{\\mathrm{m} 1}$ and a small-signal output resistance of $\\mathrm{r}_{\\mathrm{ds} 2}$.\n```"
},
{
    "text": "image_name: Fig. 3.1 A basic CMOS current mirror\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: V1, G: Vi}\nname: Q2, type: NMOS, ports: {S: GND, D: Vout, G: Vi}\nname: I_in, type: CurrentSource, ports: {Np: LOAD, Nn: V1}\n]\nextrainfo: This circuit is a fundamental CMOS current mirror featuring two NMOS transistors, Q1 and Q2. The input current I_in is mirrored to the output current I_out. The gates of Q1 and Q2 are connected, and both transistors' sources are linked to GND. The drain of Q1 connects to the input current source, while Q2's drain connects to the output load.\n\nFig. 3.1 A basic CMOS current mirror.\n\nAn ideal current mirror is a two-port device that takes an input current $\\mathrm{I}_{\\text{in}}$ and generates an output current $\\mathrm{I}_{\\text{out}} = \\mathrm{I}_{\\text{in}}$. For optimal current sensing, a low resistance is preferred, akin to an ammeter, hence the ideal current source exhibits zero input resistance. An ideal current source boasts high output resistance, a trait shared by an ideal current mirror. This ensures the current mirror accurately replicates the input current, irrespective of the connected source and load impedances.\n\nFig. 3.1 illustrates a basic CMOS current mirror, assuming both transistors operate in the active region, meaning Q2's drain voltage must exceed $\\mathrm{V}_{\\text{eff}2}$. Neglecting the transistors' finite small-signal drain-source impedances and assuming identical sizing, Q1 and Q2 will conduct the same current due to equal gate-source voltages, $\\mathrm{V}_{\\mathrm{gs}}$. However, considering finite drain-source impedance, the transistor with the higher drain-source voltage will also have a higher current. Let's compare this circuit to an \"ideal\" current source with zero input resistance and infinite output resistance.\n\nTo determine the input resistance, examine the small-signal model for Q1 alone, as depicted in Fig. 3.2(a). The independent current source $I_{\\text{in}}$ is absent in the small-signal model, replaced by an open circuit. Note that a low-frequency small-signal model is employed for Q1, ignoring all capacitors. This model can be simplified by deriving the Thévenin-equivalent circuit. The Thévenin-equivalent output voltage is zero due to the circuit's stability and lack of input signal. The Thévenin-equivalent input impedance is calculated by applying a test voltage, $v_{y}$, at $v_{1}$ and measuring the resulting current, $i_{y}$. Here, the current $\\mathrm{i}_{\\mathrm{y}}$ is expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{y}} = \\frac{v_{\\mathrm{y}}}{\\mathrm{r}_{\\mathrm{ds}1}} + \\mathrm{g}_{\\mathrm{m}1} v_{\\mathrm{gs}1} = \\frac{v_{\\mathrm{y}}}{r_{\\mathrm{ds}1}} + \\mathrm{g}_{\\mathrm{m}1} v_{\\mathrm{y}} \\tag{3.1}\n\\end{equation*}\n$$\n\nThe input impedance is $v_{y} / i_{y}$, equating to $1 / g_{m1} \\| r_{ds1}$. Given that typically $r_{ds1} > 1 / g_{m1}$, the input impedance is approximated as $1 / \\mathrm{g}_{\\mathrm{m}1}$ (also denoted as $\\mathrm{r}_{\\mathrm{s}1}$), resulting in the model shown in Fig. 3.2(c). This outcome is consistent in bipolar cases and mirrors the small-signal model for a diode, hence Q1 is often termed a diode-connected transistor.\nimage_name: Fig. 3.2 (a)\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: g1d1, G: g1d1}\n]\nextrainfo: The diagram depicts a diode-connected NMOS transistor Q1 with the gate and drain interconnected. This setup is frequently used for creating current sources or voltage references. The equivalent small-signal model simplifies the impedance to 1/g_m1, assuming r_ds1 is significantly larger than 1/g_m1.\nimage_name: Fig. 3.2 (b)\ndescription:\n[\n'name': 'r_ds1', 'type': 'Resistor', 'value': 'r_ds1', 'ports': {'N1': 'vgs1', 'N2': 'GND'}\n'name': 'g_m1*v_gs1', 'type': 'VoltageControlledCurrentSource', 'value': 'g_m1*v_gs1', 'ports': {'Np': 'GND', 'Nn': 'vgs1'}\n'name': 'v_y', 'type': 'VoltageSource', 'value': 'v_y', 'ports': {'Np': 'vy', 'Nn': 'GND'}\n]\nextrainfo: This circuit diagram illustrates the small-signal model for a diode-connected NMOS transistor Q1, incorporating transconductance g_m1 and output resistance r_ds1, with an input voltage source v_y.\nimage_name: Fig. 3.2 (c)\ndescription:\n[\nname: rin, type: Resistor, value: 1/gm1, ports: {Np: V1, Nn: GND}\n]\nextrainfo: The circuit diagram 'Fig. 3.2 (c)' depicts a simplified small-signal model for a diode-connected transistor Q1. The input impedance is approximated as 1/g_m1, indicating the transistor behaves like a resistor of value 1/g_m1 between Vy and GND.\nFig. 3.2 (a) A diode-connected transistor, $Q_{1}$, (b) the small-signal model for $Q_{1}$, and (c) an equivalent simplified small-signal model for $Q_{1}$.\nimage_name: (a)\ndescription: The diagram illustrates a small-signal model of a current mirror with transistors Q1 and Q2. The input current Iin flows into the gate of Q2, and the output current Iout is derived from the drain of Q2. The resistor 1/gm1 models the input impedance of Q1, and the voltage-controlled current source gm2vgs2 represents the transconductance of Q2. The resistor rds2 denotes the output resistance of Q2. The voltage source Vx is utilized for analyzing output characteristics.\nimage_name: (b)\ndescription: The circuit diagram (b) shows a simplified small-signal model for determining the small-signal output resistance, r_out. It comprises a resistor r_ds2 and a voltage source V_x in parallel, both connected to ground. The voltage source V_x is applied across the nodes Vx and GND.\n\nFig. 3.3 (a) A small-signal model for the current mirror of Fig. 3.1 and (b) a simplified small-signal model for determining the small-signal output resistance, $r_{\\text{out}}$.\n\nUtilizing the described model results in a simplified small-signal model for the overall current mirror, as shown in Fig. 3.3(a), where $\\mathrm{v}_{\\mathrm{gs}2}$ is connected to ground via a resistance of $1 / \\mathrm{g}_{\\mathrm{m}1}$. Since no current flows through the $1 / \\mathrm{g}_{\\mathrm{m}1}$ resistor, $\\mathrm{v}_{\\mathrm{gs}2} = 0$ regardless of the voltage $\\mathrm{v}_{\\mathrm{x}}$ applied to the current-mirror output. This is expected, as MOS transistors operate unilaterally at low frequencies. Thus, with $\\mathrm{g}_{\\mathrm{m}2} \\mathrm{v}_{\\mathrm{gs}2} = 0$, the circuit simplifies to the equivalent small-signal model in Fig. 3.3(b). The small-signal output resistance, $r_{\\text{out}}$, is simply $r_{\\mathrm{ds}2}$.\n\nKey Point: A basic CMOS current mirror exhibits a small-signal input resistance of $1 / \\mathrm{g}_{\\mathrm{m}1}$ and a small-signal output resistance of $\\mathrm{r}_{\\mathrm{ds}2}$."
},
{
    "text": "image_name:Fig. 3.1 A basic CMOS current mirror\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: V1, G: Vi}\nname: Q2, type: NMOS, ports: {S: GND, D: Vout, G: Vi}\nname: I_in, type: CurrentSource, ports: {Np: LOAD, Nn: V1}\n]\nextrainfo:This circuit is a basic CMOS current mirror featuring two NMOS transistors, Q1 and Q2. The input current I_in is mirrored to the output current I_out. The gates of Q1 and Q2 are connected, and both transistors' sources are linked to GND. The drain of Q1 connects to the input current source, while Q2's drain connects to the output load.\n\nFig. 3.1 A basic CMOS current mirror.\n\nAn ideal current mirror is a two-port circuit that takes an input current $\\mathrm{I}_{\\text {in }}$ and generates an output current $\\mathrm{I}_{\\text {out }}=\\mathrm{I}_{\\text {in }}$. Optimal current sensing requires low resistance, akin to an ammeter, thus the ideal current source has zero input resistance. An ideal current source boasts high output resistance, a trait shared by an ideal current mirror. This ensures the current mirror accurately replicates the input current, irrespective of connected source and load impedances.\n\nFig. 3.1 illustrates a basic CMOS current mirror, assuming both transistors operate in the active region, meaning Q2's drain voltage must exceed $\\mathrm{V}_{\\text {eff } 2}$. Ignoring the transistors' finite small-signal drain-source impedances and assuming identical sizing, Q1 and Q2 will carry the same current due to equal gate-source voltage, $\\mathrm{V}_{\\mathrm{gs}}$. However, considering finite drain-source impedance, the transistor with the higher drain-source voltage will conduct more current. Let's compare this circuit to an \"ideal\" current source with zero input resistance and infinite output resistance.\n\nTo determine the input resistance, examine the small-signal model for Q1 alone, as depicted in Fig. 3.2(a). The independent current source $I_{i n}$ is absent in the small-signal model, replaced by an open circuit. Note that a low-frequency small-signal model is used for Q1, disregarding capacitors. This model can be simplified by deriving the Thévenin-equivalent circuit. The Thévenin-equivalent output voltage is zero due to the circuit's stability and lack of input signal. The Thévenin-equivalent input impedance is found by applying a test signal voltage, $v_{y}$, at $v_{1}$ and measuring the signal current, $i_{y}$. Here, the current $\\mathrm{i}_{\\mathrm{y}}$ is expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{y}}=\\frac{v_{\\mathrm{y}}}{\\mathrm{r}_{\\mathrm{ds} 1}}+\\mathrm{g}_{\\mathrm{m} 1} v_{\\mathrm{gs} 1}=\\frac{v_{\\mathrm{y}}}{r_{\\mathrm{ds} 1}}+\\mathrm{g}_{\\mathrm{m} 1} v_{\\mathrm{y}} \\tag{3.1}\n\\end{equation*}\n$$\n\nThe input impedance is $v_{y} / i_{y}$, equating to $1 / g_{m 1} \\| r_{d s 1}$. Since typically $r_{d s 1}>1 / g_{m 1}$, we approximate the input impedance as $1 / \\mathrm{g}_{\\mathrm{m} 1}$ (also termed $\\mathrm{r}_{\\mathrm{s} 1}$), resulting in the model shown in Fig. 3.2(c). This outcome applies to bipolar cases and resembles the small-signal model for a diode, hence Q1 is often termed a diode-connected transistor.\nimage_name:Fig. 3.2 (a)\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: g1d1, G: g1d1}\n]\nextrainfo:The diagram depicts a diode-connected NMOS transistor Q1, with the gate and drain interconnected. This setup is commonly used for creating current sources or voltage references. The equivalent small-signal model simplifies the impedance to 1/g_m1, assuming r_ds1 significantly exceeds 1/g_m1.\nimage_name:Fig. 3.2 (b)\ndescription:\n[\n'name': 'r_ds1', 'type': 'Resistor', 'value': 'r_ds1', 'ports': {'N1': 'vgs1', 'N2': 'GND'\n'name': 'g_m1*v_gs1', 'type': 'VoltageControlledCurrentSource', 'value': 'g_m1*v_gs1', 'ports': {'Np': 'GND', 'Nn': 'vgs1'\n'name': 'v_y', 'type': 'VoltageSource', 'value': 'v_y', 'ports': {'Np': 'vy', 'Nn': 'GND'\n]\nextrainfo:The circuit diagram illustrates the small-signal model for a diode-connected NMOS transistor Q1, featuring transconductance g_m1 and output resistance r_ds1, with an input voltage source v_y.\nimage_name:Fig. 3.2 (c)\ndescription:\n[\nname: rin, type: Resistor,value:1/gm1, ports: {Np: V1, Nn: GND}\n]\nextrainfo:The circuit diagram 'Fig. 3.2 (c)' shows a simplified small-signal model for a diode-connected transistor Q1. The input impedance is approximated as 1/g_m1, indicating the transistor acts like a resistor of value 1/g_m1 between Vy and GND.\nFig. 3.2 (a) A diode-connected transistor, $Q_{1}$, (b) the small-signal model for $Q_{1}$, and (c) a simplified small-signal model for $Q_{1}$.\nimage_name:(a)\ndescription:The diagram models a small-signal representation of a current mirror with transistors Q1 and Q2. The input current Iin enters the gate of Q2, and the output current Iout is derived from Q2's drain. The resistor 1/gm1 models Q1's input impedance, and the voltage-controlled current source gm2vgs2 represents Q2's transconductance. The resistor rds2 denotes Q2's output resistance. The voltage source Vx is utilized for analyzing output characteristics.\nimage_name:(b)\ndescription:The circuit diagram (b) presents a simplified small-signal model for calculating the small-signal output resistance, r_out. It comprises a resistor r_ds2 and a voltage source V_x in parallel, both connected to ground. The voltage source V_x is applied across nodes Vx and GND.\n\nFig. 3.3 (a) A small-signal model for the current mirror of Fig. 3.1 and (b) a simplified small-signal model for determining the small-signal output resistance, $r_{\\text {out }}$.\n\nUtilizing the described model results in a simplified small-signal model for the overall current mirror, as shown in Fig. 3.3(a), where $\\mathrm{v}_{\\mathrm{gs} 2}$ is connected to ground via a resistance of $1 / \\mathrm{g}_{\\mathrm{m} 1}$. Since no current flows through the $1 / \\mathrm{g}_{\\mathrm{m} 1}$ resistor, $\\mathrm{v}_{\\mathrm{g} \\mathbf{2} 2}=0$ regardless of the voltage $\\mathrm{v}_{\\mathrm{x}}$ applied to the current-mirror output. This is expected, as MOS transistors function unilaterally at low frequencies. Thus, with $\\mathrm{g}_{\\mathrm{m} 2} \\mathbf{v}_{\\mathrm{gs} 2}=0$, the circuit simplifies to the model in Fig. 3.3(b). The small-signal output resistance, $r_{\\text {out }}$, is simply $r_{\\mathrm{ds} 2}$.\n\nKey Point: A basic CMOS current mirror exhibits a small-signal input resistance of $1 / \\mathrm{g}_{\\mathrm{m} 1}$ and a small-signal output resistance of $\\mathrm{r}_{\\mathrm{ds} 2}$."
},
{
    "text": "image_name:Fig. 3.1 A simple CMOS current mirror\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: V1, G: Vi}\nname: Q2, type: NMOS, ports: {S: GND, D: Vout, G: Vi}\nname: I_in, type: CurrentSource, ports: {Np: LOAD, Nn: V1}\n]\nextrainfo:The circuit depicted is a basic CMOS current mirror featuring two NMOS transistors, Q1 and Q2. The input current I_in is mirrored to produce the output current I_out. Both transistors have their gates connected to Vi and their sources to GND. Q1's drain connects to the input current source, while Q2's drain links to the output load.\n\nFig. 3.1 A simple CMOS current mirror.\n\nAn ideal current mirror functions as a two-port device that takes an input current $\\mathrm{I}_{\\text {in }}$ and replicates it as an output current $\\mathrm{I}_{\\text {out }}=\\mathrm{I}_{\\text {in }}$. Optimal current sensing occurs with low resistance, akin to an ammeter, hence the ideal current source exhibits zero input resistance. An ideal current source boasts high output resistance, a trait shared by an ideal current mirror, enabling it to accurately replicate the input current irrespective of the connected source and load impedances.\n\nFig. 3.1 illustrates a simple CMOS current mirror, presupposing both transistors operate in the active region, necessitating that Q2's drain voltage exceeds $\\mathrm{V}_{\\text {eff } 2}$. Neglecting the transistors' finite small-signal drain-source impedances and assuming identical sizing, Q1 and Q2 will conduct equal currents due to their shared gate-source voltage, $\\mathrm{V}_{\\mathrm{gs}}$. However, accounting for finite drain-source impedance, the transistor with the higher drain-source voltage will also exhibit a higher current. This basic circuit is contrasted with an \"ideal\" current source characterized by zero input resistance and infinite output resistance.\n\nTo determine the input resistance, analyze the small-signal model for Q1 alone, as depicted in Fig. 3.2(a). In this model, the independent current source $I_{i n}$ is replaced by an open circuit. Note that a low-frequency small-signal model is employed for Q1, disregarding all capacitors. This model can be simplified by deriving the Thévenin-equivalent circuit. The Thévenin-equivalent output voltage is zero due to the circuit's stability and absence of input signal. The input impedance is calculated by applying a test signal voltage, $v_{y}$, at $v_{1}$ and measuring the resultant signal current, $i_{y}$. The current $\\mathrm{i}_{\\mathrm{y}}$ is expressed as\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{y}}=\\frac{v_{\\mathrm{y}}}{\\mathrm{r}_{\\mathrm{ds} 1}}+\\mathrm{g}_{\\mathrm{m} 1} v_{\\mathrm{gs} 1}=\\frac{v_{\\mathrm{y}}}{r_{\\mathrm{ds} 1}}+\\mathrm{g}_{\\mathrm{m} 1} v_{\\mathrm{y}} \\tag{3.1}\n\\end{equation*}\n$$\n\nThe input impedance, $v_{y} / i_{y}$, equates to $1 / g_{m 1} \\| r_{d s 1}$. Given that typically $r_{d s 1}>1 / g_{m 1}$, the input impedance is approximated as $1 / \\mathrm{g}_{\\mathrm{m} 1}$ (also denoted as $\\mathrm{r}_{\\mathrm{s} 1}$), resulting in the model shown in Fig. 3.2(c). This outcome is consistent for bipolar cases and mirrors the small-signal model for a diode, leading to Q1 being termed a diode-connected transistor.\nimage_name:Fig. 3.2 (a)\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: g1d1, G: g1d1}\n]\nextrainfo:The illustration presents a diode-connected NMOS transistor Q1, with the gate and drain interconnected. This setup is frequently utilized for generating current sources or voltage references. The equivalent small-signal model simplifies the impedance to 1/g_m1, assuming r_ds1 significantly exceeds 1/g_m1.\nimage_name:Fig. 3.2 (b)\ndescription:\n[\n'name': 'r_ds1', 'type': 'Resistor', 'value': 'r_ds1', 'ports': {'N1': 'vgs1', 'N2': 'GND'\n'name': 'g_m1*v_gs1', 'type': 'VoltageControlledCurrentSource', 'value': 'g_m1*v_gs1', 'ports': {'Np': 'GND', 'Nn': 'vgs1'\n'name': 'v_y', 'type': 'VoltageSource', 'value': 'v_y', 'ports': {'Np': 'vy', 'Nn': 'GND'\n]\nextrainfo:The circuit diagram portrays the small-signal model for a diode-connected NMOS transistor Q1, incorporating the transconductance g_m1 and output resistance r_ds1, with an input voltage source v_y.\nimage_name:Fig. 3.2 (c)\ndescription:\n[\nname: rin, type: Resistor,value:1/gm1, ports: {Np: V1, Nn: GND}\n]\nextrainfo:The circuit diagram 'Fig. 3.2 (c)' depicts a simplified small-signal model for a diode-connected transistor Q1. The input impedance is approximated as 1/g_m1, indicating the transistor behaves like a resistor of value 1/g_m1 between Vy and GND.\nFig. 3.2 (a) A diode-connected transistor, $Q_{1}$, (b) the small-signal model for $Q_{1}$, and (c) an equivalent simplified small-signal model for $Q_{1}$.\nimage_name:(a)\ndescription:The diagram illustrates a small-signal model of a current mirror with transistors Q1 and Q2. The input current Iin is directed to the gate of Q2, and the output current Iout is derived from the drain of Q2. The resistor 1/gm1 represents Q1's input impedance, while the voltage-controlled current source gm2vgs2 models Q2's transconductance. The resistor rds2 denotes Q2's output resistance. The voltage source Vx is employed for analyzing output characteristics.\nimage_name:(b)\ndescription:The circuit diagram (b) depicts a simplified small-signal model for calculating the small-signal output resistance, r_out. It comprises a resistor r_ds2 and a voltage source V_x in parallel, both connected to ground. The voltage source V_x is applied across the nodes Vx and GND.\n\nFig. 3.3 (a) A small-signal model for the current mirror of Fig. 3.1 and (b) a simplified small-signal model for determining the small-signal output resistance, $r_{\\text {out }}$.\n\nEmploying the described model results in a simplified small-signal model for the overall current mirror, as shown in Fig. 3.3(a), where $\\mathrm{v}_{\\mathrm{gs} 2}$ is connected to ground through a resistance of $1 / \\mathrm{g}_{\\mathrm{m} 1}$. Since no current flows through the $1 / \\mathrm{g}_{\\mathrm{m} 1}$ resistor, $\\mathrm{v}_{\\mathrm{g} \\mathbf{2} 2}=0$ regardless of the voltage $\\mathrm{v}_{\\mathrm{x}}$ applied to the current-mirror output. This is expected, as MOS transistors operate unilaterally at low frequencies. Consequently, with $\\mathrm{g}_{\\mathrm{m} 2} \\mathbf{v}_{\\mathrm{gs} 2}=0$, the circuit simplifies to the equivalent small-signal model in Fig. 3.3(b). The small-signal output resistance, $r_{\\text {out }}$, is solely $r_{\\mathrm{ds} 2}$.\n\nKey Point: A simple CMOS current mirror exhibits a small-signal input resistance of $1 / \\mathrm{g}_{\\mathrm{m} 1}$ and a small-signal output resistance of $\\mathrm{r}_{\\mathrm{ds} 2}$."
},
{
    "text": "image_name: Fig. 3.1 A basic CMOS current mirror\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: V1, G: Vi}\nname: Q2, type: NMOS, ports: {S: GND, D: Vout, G: Vi}\nname: I_in, type: CurrentSource, ports: {Np: LOAD, Nn: V1}\n]\nextrainfo: This circuit is a basic CMOS current mirror featuring two NMOS transistors, Q1 and Q2. The input current I_in is mirrored to the output current I_out. The gates of Q1 and Q2 are connected, and both transistors' sources are linked to GND. Q1's drain connects to the input current source, while Q2's drain connects to the output load.\n\nFig. 3.1 A basic CMOS current mirror.\n\nAn ideal current mirror is a two-port circuit that takes an input current $\\mathrm{I}_{\\text{in}}$ and generates an output current $\\mathrm{I}_{\\text{out}} = \\mathrm{I}_{\\text{in}}$. For optimal current sensing, which is akin to an ammeter, the ideal current source should have zero input resistance. An ideal current source boasts high output resistance, a trait shared by an ideal current mirror. This ensures the current mirror accurately replicates the input current, regardless of the connected source and load impedances.\n\nFig. 3.1 illustrates a basic CMOS current mirror, assuming both transistors operate in the active region, meaning Q2's drain voltage must exceed $\\mathrm{V}_{\\text{eff}2}$. If the transistors' finite small-signal drain-source impedances are neglected and both are assumed to be identical, Q1 and Q2 will carry the same current due to their identical gate-source voltage, $\\mathrm{V}_{\\mathrm{gs}}$. However, considering finite drain-source impedance, the transistor with the higher drain-source voltage will also have a higher current. Let's compare this circuit to an \"ideal\" current source with zero input resistance and infinite output resistance.\n\nTo determine the input resistance, examine the small-signal model for Q1 alone, as depicted in Fig. 3.2(a). The independent current source $I_{\\text{in}}$ is absent in the small-signal model and is replaced by an open circuit. Note that a low-frequency small-signal model is used for Q1, ignoring all capacitors. This model can be simplified by deriving the Thévenin-equivalent circuit. The Thévenin-equivalent output voltage is zero due to the circuit's stability and lack of input signal. The input impedance is found by applying a test voltage, $v_{y}$, at $v_{1}$ and measuring the resulting current, $i_{y}$. The current $\\mathrm{i}_{\\mathrm{y}}$ is given by\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{y}} = \\frac{v_{\\mathrm{y}}}{\\mathrm{r}_{\\mathrm{ds}1}} + \\mathrm{g}_{\\mathrm{m}1} v_{\\mathrm{gs}1} = \\frac{v_{\\mathrm{y}}}{r_{\\mathrm{ds}1}} + \\mathrm{g}_{\\mathrm{m}1} v_{\\mathrm{y}} \\tag{3.1}\n\\end{equation*}\n$$\n\nThe input impedance is $v_{y} / i_{y}$, equating to $1 / g_{m1} \\| r_{ds1}$. Since typically $r_{ds1} > 1 / g_{m1}$, the input impedance is approximated as $1 / \\mathrm{g}_{\\mathrm{m}1}$ (also defined as $\\mathrm{r}_{\\mathrm{s}1}$), resulting in the model shown in Fig. 3.2(c). This applies to bipolar cases and resembles the small-signal model for a diode, hence Q1 is often termed a diode-connected transistor.\nimage_name: Fig. 3.2 (a)\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: g1d1, G: g1d1}\n]\nextrainfo: This diagram depicts a diode-connected NMOS transistor Q1, with the gate and drain interconnected. This setup is commonly used for creating current sources or voltage references. The equivalent small-signal model simplifies the impedance to 1/g_m1, assuming r_ds1 is significantly larger than 1/g_m1.\nimage_name: Fig. 3.2 (b)\ndescription:\n[\n'name': 'r_ds1', 'type': 'Resistor', 'value': 'r_ds1', 'ports': {'N1': 'vgs1', 'N2': 'GND'}\n'name': 'g_m1*v_gs1', 'type': 'VoltageControlledCurrentSource', 'value': 'g_m1*v_gs1', 'ports': {'Np': 'GND', 'Nn': 'vgs1'}\n'name': 'v_y', 'type': 'VoltageSource', 'value': 'v_y', 'ports': {'Np': 'vy', 'Nn': 'GND'}\n]\nextrainfo: This circuit diagram illustrates the small-signal model for a diode-connected NMOS transistor Q1, incorporating transconductance g_m1 and output resistance r_ds1, with an input voltage source v_y.\nimage_name: Fig. 3.2 (c)\ndescription:\n[\nname: rin, type: Resistor, value: 1/gm1, ports: {Np: V1, Nn: GND}\n]\nextrainfo: The circuit diagram 'Fig. 3.2 (c)' shows a simplified small-signal model for a diode-connected transistor Q1. The input impedance is approximated as 1/g_m1, indicating the transistor acts like a resistor with value 1/g_m1 between Vy and GND.\nFig. 3.2 (a) A diode-connected transistor, $Q_{1}$, (b) the small-signal model for $Q_{1}$, and (c) an equivalent simplified small-signal model for $Q_{1}$.\nimage_name: (a)\ndescription: This diagram represents a small-signal model of a current mirror with transistors Q1 and Q2. The input current Iin flows into the gate of Q2, and the output current Iout is derived from the drain of Q2. The resistor 1/gm1 models Q1's input impedance, and the voltage-controlled current source gm2vgs2 represents Q2's transconductance. The resistor rds2 denotes Q2's output resistance. The voltage source Vx is used for analyzing output characteristics.\nimage_name: (b)\ndescription: The circuit diagram (b) depicts a simplified small-signal model for determining the small-signal output resistance, r_out. It includes a resistor r_ds2 and a voltage source V_x connected in parallel, both linked to ground. The voltage source V_x is applied across nodes Vx and GND.\n\nFig. 3.3 (a) A small-signal model for the current mirror of Fig. 3.1 and (b) a simplified small-signal model for determining the small-signal output resistance, $r_{\\text{out}}$.\n\nUsing the described model results in a simplified small-signal model for the overall current mirror, as shown in Fig. 3.3(a), where $\\mathrm{v}_{\\mathrm{gs}2}$ is connected to ground via a resistance of $1 / \\mathrm{g}_{\\mathrm{m}1}$. Since no current flows through the $1 / \\mathrm{g}_{\\mathrm{m}1}$ resistor, $\\mathrm{v}_{\\mathrm{gs}2} = 0$ regardless of the voltage $\\mathrm{v}_{\\mathrm{x}}$ applied to the current-mirror output. This is expected, as MOS transistors operate unilaterally at low frequencies. Thus, with $\\mathrm{g}_{\\mathrm{m}2} \\mathrm{v}_{\\mathrm{gs}2} = 0$, the circuit simplifies to the model in Fig. 3.3(b). The small-signal output resistance, $r_{\\text{out}}$, is simply $r_{\\mathrm{ds}2}$.\n\nKey Point: A basic CMOS current mirror has a small-signal input resistance of $1 / \\mathrm{g}_{\\mathrm{m}1}$ and a small-signal output resistance of $\\mathrm{r}_{\\mathrm{ds}2}$."
},
{
    "text": "Given that the $W / L$ ratios of $Q_{1}$ and $Q_{2}$ are identical, the nominal value of $I_{\\text{out}}$ matches that of $I_{\\text{in}} = 100 \\mu \\mathrm{A}$. Consequently, we obtain\n\n$$\n\\begin{equation*}\nr_{\\text{out}} = r_{\\text{ds}2} = \\frac{L}{\\lambda L I_{D}} = \\frac{0.4 \\mu \\mathrm{m}}{(0.16 \\mu \\mathrm{m} / \\mathrm{V})(100 \\mu \\mathrm{A})} = 25 \\mathrm{k} \\Omega \\tag{3.2}\n\\end{equation*}\n$$\n\nThe value of $g_{m1}$ is determined by\n\n$$\n\\begin{equation*}\ng_{m1} = \\sqrt{2 \\mu_{\\mathrm{n}} C_{\\mathrm{ox}} (\\mathrm{W} / \\mathrm{L}) I_{D1}} = 0.97 \\mathrm{mA} / \\mathrm{V} \\tag{3.3}\n\\end{equation*}\n$$\n\nleading to $r_{s1} = 1 / g_{m1} \\approx 1.03 \\mathrm{k} \\Omega$. It is important to note that this $r_{s1}$ value is considerably lower than $r_{\\text{ds}1}$, which is equal to $r_{\\text{ds}2}$ in this scenario, allowing us to assume $r_{\\text{in}} \\approx 1.03 \\mathrm{k} \\Omega$.\n\nThe variation in output current can be approximated using $r_{\\text{out}}$ as follows:\n\n$$\n\\begin{equation*}\n\\Delta I_{\\text{out}} = \\frac{\\Delta V}{r_{\\text{out}}} = \\frac{100 \\mathrm{mV}}{25 \\mathrm{k} \\Omega} = 4 \\mu \\mathrm{A} \\tag{3.4}\n\\end{equation*}\n$$\n\nIn essence, if the initial $I_{\\text{out}}$ is found to be $101 \\mu \\mathrm{A}$ (due to mismatch or a higher $\\mathrm{V}_{\\mathrm{DS}}$ voltage), then a 100 mV rise in output voltage would lead to a new output current of approximately $105 \\mu \\mathrm{A}$. This estimation does not consider second-order effects, such as the variation in $r_{\\text{ds}}$ with changes in output current.\n\nLastly, the drain voltage of $Q_{2}$ must be at least $\\mathrm{V}_{\\text{eff}2}$ to maintain it in active mode.\n\n$$\nV_{\\text{eff}2} = \\sqrt{\\frac{2 I_{D}}{\\mu_{\\mathrm{n}} C_{\\mathrm{ox}} (W / L)}} = 205 \\mathrm{mV}\n$$\n\nThese results can be compared with those from a SPICE simulation."
},
{
    "text": "Given that the $W / L$ ratios of $Q_{1}$ and $Q_{2}$ are identical, the nominal value of $I_{\\text{out}}$ matches that of $I_{\\text{in}}$, which is $100 \\mu \\mathrm{A}$. Consequently, we obtain\n\n$$\n\\begin{equation*}\nr_{\\text{out}} = r_{\\text{ds}2} = \\frac{L}{\\lambda L I_{D}} = \\frac{0.4 \\mu \\mathrm{m}}{(0.16 \\mu \\mathrm{m} / \\mathrm{V})(100 \\mu \\mathrm{A})} = 25 \\mathrm{k} \\Omega \\tag{3.2}\n\\end{equation*}\n$$\n\nThe value of $g_{m1}$ is determined by\n\n$$\n\\begin{equation*}\ng_{m1} = \\sqrt{2 \\mu_{n} C_{ox} (\\frac{W}{L}) I_{D1}} = 0.97 \\mathrm{mA} / \\mathrm{V} \\tag{3.3}\n\\end{equation*}\n$$\n\nThis leads to $r_{s1} = \\frac{1}{g_{m1}} \\approx 1.03 \\mathrm{k} \\Omega$. It is important to note that this $r_{s1}$ value is considerably smaller than $r_{\\text{ds}1}$, which in this scenario equals $r_{\\text{ds}2}$, allowing us to approximate $r_{\\text{in}} \\approx 1.03 \\mathrm{k} \\Omega$.\n\nThe variation in output current can be approximated using $r_{\\text{out}}$ as follows:\n\n$$\n\\begin{equation*}\n\\Delta I_{\\text{out}} = \\frac{\\Delta V}{r_{\\text{out}}} = \\frac{100 \\mathrm{mV}}{25 \\mathrm{k} \\Omega} = 4 \\mu \\mathrm{A} \\tag{3.4}\n\\end{equation*}\n$$\n\nIn essence, if the initial $I_{\\text{out}}$ is found to be $101 \\mu \\mathrm{A}$ (due to mismatch or a higher $\\mathrm{V}_{\\mathrm{DS}}$), then a 100 mV rise in output voltage would lead to a new output current of approximately $105 \\mu \\mathrm{A}$. Note that this estimation does not consider secondary effects, such as the variation in $r_{\\text{ds}}$ with changes in output current.\n\nLastly, the drain voltage of $Q_{2}$ must be at least $\\mathrm{V}_{\\text{eff}2}$ to maintain it in active mode.\n\n$$\nV_{\\text{eff}2} = \\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{ox} (\\frac{W}{L})}} = 205 \\mathrm{mV}\n$$\n\nThese results can be compared with those derived from a SPICE simulation."
},
{
    "text": "Given that the $W / L$ ratios of $Q_{1}$ and $Q_{2}$ are identical, the nominal value of $I_{\\text{out}}$ matches that of $I_{\\text{in}}$, which is $100 \\mu \\mathrm{A}$. Consequently, we obtain\n\n$$\n\\begin{equation*}\nr_{\\text{out}} = r_{\\text{ds} 2} = \\frac{L}{\\lambda L I_{D}} = \\frac{0.4 \\mu \\mathrm{m}}{(0.16 \\mu \\mathrm{m} / \\mathrm{V})(100 \\mu \\mathrm{A})} = 25 \\mathrm{k} \\Omega \\tag{3.2}\n\\end{equation*}\n$$\n\nThe value of $g_{m1}$ is determined by\n\n$$\n\\begin{equation*}\ng_{m1} = \\sqrt{2 \\mu_{n} C_{ox} (\\frac{W}{L}) I_{D1}} = 0.97 \\mathrm{mA} / \\mathrm{V} \\tag{3.3}\n\\end{equation*}\n$$\n\nleading to $r_{s1} = \\frac{1}{g_{m1}} \\approx 1.03 \\mathrm{k} \\Omega$. It is important to note that this $r_{s1}$ value is substantially lower than $r_{\\text{ds} 1}$, which in this scenario equals $r_{\\text{ds} 2}$, allowing us to assume $r_{\\text{in}} \\approx 1.03 \\mathrm{k} \\Omega$.\n\nThe variation in output current can be approximated using $r_{\\text{out}}$ as follows:\n\n$$\n\\begin{equation*}\n\\Delta I_{\\text{out}} = \\frac{\\Delta V}{r_{\\text{out}}} = \\frac{100 \\mathrm{mV}}{25 \\mathrm{k} \\Omega} = 4 \\mu \\mathrm{A} \\tag{3.4}\n\\end{equation*}\n$$\n\nPut differently, if the initial $I_{\\text{out}}$ is found to be $101 \\mu \\mathrm{A}$ (due to mismatch or a higher $\\mathrm{V}_{\\mathrm{DS}}$ voltage), then a 100 mV rise in output voltage would lead to a new output current of roughly $105 \\mu \\mathrm{A}$. It should be noted that this estimation does not consider second-order effects, such as the variation in $r_{\\text{ds}}$ with changes in the output current.\n\nLastly, the drain voltage of $Q_{2}$ must be at a minimum $\\mathrm{V}_{\\text{eff} 2}$ to ensure it remains in active mode.\n\n$$\nV_{\\text{eff} 2} = \\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{ox} (\\frac{W}{L})}} = 205 \\mathrm{mV}\n$$\n\nThese findings can be compared with those derived from a SPICE simulation."
},
{
    "text": "Given that the $W / L$ ratios of $Q_{1}$ and $Q_{2}$ are identical, the nominal value of $I_{\\text{out}}$ matches that of $I_{\\text{in}}$, which is $100 \\mu \\mathrm{A}$. Consequently, we derive\n\n$$\n\\begin{equation*}\nr_{\\text{out}} = r_{\\text{ds}2} = \\frac{L}{\\lambda L I_{D}} = \\frac{0.4 \\mu \\mathrm{m}}{(0.16 \\mu \\mathrm{m} / \\mathrm{V})(100 \\mu \\mathrm{A})} = 25 \\mathrm{k} \\Omega \\tag{3.2}\n\\end{equation*}\n$$\n\nThe value of $g_{m1}$ is calculated as\n\n$$\n\\begin{equation*}\ng_{m1} = \\sqrt{2 \\mu_{\\mathrm{n}} C_{\\mathrm{ox}} (W / L) I_{D1}} = 0.97 \\mathrm{mA} / \\mathrm{V} \\tag{3.3}\n\\end{equation*}\n$$\n\nThis leads to $r_{s1} = 1 / g_{m1} \\approx 1.03 \\mathrm{k} \\Omega$. It is important to note that this $r_{s1}$ value is substantially lower than $r_{\\text{ds}1}$, which is equal to $r_{\\text{ds}2}$ in this scenario, allowing us to assume $r_{\\text{in}} \\approx 1.03 \\mathrm{k} \\Omega$.\n\nThe variation in output current can be approximated using $r_{\\text{out}}$ as follows:\n\n$$\n\\begin{equation*}\n\\Delta I_{\\text{out}} = \\frac{\\Delta V}{r_{\\text{out}}} = \\frac{100 \\mathrm{mV}}{25 \\mathrm{k} \\Omega} = 4 \\mu \\mathrm{A} \\tag{3.4}\n\\end{equation*}\n$$\n\nIn essence, if the initial $I_{\\text{out}}$ is found to be $101 \\mu \\mathrm{A}$ (due to mismatch or a higher $\\mathrm{V}_{\\mathrm{DS}}$ voltage), then a 100 mV rise in output voltage would yield a new output current of approximately $105 \\mu \\mathrm{A}$. It should be noted that this estimation does not consider second-order effects, such as the variation of $r_{\\text{ds}}$ with changes in output current.\n\nLastly, the drain voltage of $Q_{2}$ must be at least $\\mathrm{V}_{\\text{eff}2}$ to maintain it in active mode.\n\n$$\nV_{\\text{eff}2} = \\sqrt{\\frac{2 I_{D}}{\\mu_{\\mathrm{n}} C_{\\mathrm{ox}} (W / L)}} = 205 \\mathrm{mV}\n$$\n\nThese results can be compared with those obtained from a SPICE simulation."
},
{
    "text": "Given that the $W / L$ ratios of $Q_{1}$ and $Q_{2}$ are identical, the nominal value of $I_{\\text{out}}$ matches that of $I_{\\text{in}}$, which is $100 \\mu \\mathrm{A}$. Consequently,\n\n$$\n\\begin{equation*}\nr_{\\text{out}} = r_{\\text{ds}2} = \\frac{L}{\\lambda L I_{D}} = \\frac{0.4 \\mu \\mathrm{m}}{(0.16 \\mu \\mathrm{m} / \\mathrm{V})(100 \\mu \\mathrm{A})} = 25 \\mathrm{k} \\Omega \\tag{3.2}\n\\end{equation*}\n$$\n\nThe value of $g_{m1}$ is determined by\n\n$$\n\\begin{equation*}\ng_{m1} = \\sqrt{2 \\mu_{n} C_{ox} (\\frac{W}{L}) I_{D1}} = 0.97 \\mathrm{mA} / \\mathrm{V} \\tag{3.3}\n\\end{equation*}\n$$\n\nThis leads to $r_{s1} = \\frac{1}{g_{m1}} \\approx 1.03 \\mathrm{k} \\Omega$. It is important to note that this $r_{s1}$ value is considerably smaller than $r_{\\text{ds}1}$, which in this scenario equals $r_{\\text{ds}2}$, allowing us to assume $r_{\\text{in}} \\approx 1.03 \\mathrm{k} \\Omega$.\n\nThe variation in output current can be approximated using $r_{\\text{out}}$ as follows:\n\n$$\n\\begin{equation*}\n\\Delta I_{\\text{out}} = \\frac{\\Delta V}{r_{\\text{out}}} = \\frac{100 \\mathrm{mV}}{25 \\mathrm{k} \\Omega} = 4 \\mu \\mathrm{A} \\tag{3.4}\n\\end{equation*}\n$$\n\nIn essence, if the initial $I_{\\text{out}}$ is found to be $101 \\mu \\mathrm{A}$ (due to mismatch or a higher $\\mathrm{V}_{\\mathrm{DS}}$ voltage), a 100 mV rise in output voltage would lead to a new output current of approximately $105 \\mu \\mathrm{A}$. It should be noted that this estimation does not consider secondary effects, such as the variation of $r_{\\text{ds}}$ with changes in output current.\n\nLastly, the drain voltage of $Q_{2}$ must be at least $\\mathrm{V}_{\\text{eff}2}$ to maintain it in active mode.\n\n$$\nV_{\\text{eff}2} = \\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{ox} (\\frac{W}{L})}} = 205 \\mathrm{mV}\n$$\n\nThese results can be compared with those obtained from a SPICE simulation."
},
{
    "text": "Given that the $W / L$ ratios of $Q_{1}$ and $Q_{2}$ are identical, the nominal value of $I_{\\text{out}}$ matches that of $I_{\\text{in}}$, which is $100 \\mu \\mathrm{A}$. Consequently, we obtain\n\n$$\n\\begin{equation*}\nr_{\\text{out}} = r_{\\text{ds}2} = \\frac{L}{\\lambda L I_{D}} = \\frac{0.4 \\mu \\mathrm{m}}{(0.16 \\mu \\mathrm{m} / \\mathrm{V})(100 \\mu \\mathrm{A})} = 25 \\mathrm{k} \\Omega \\tag{3.2}\n\\end{equation*}\n$$\n\nThe value of $g_{m1}$ is determined by\n\n$$\n\\begin{equation*}\ng_{m1} = \\sqrt{2 \\mu_{\\mathrm{n}} C_{\\mathrm{ox}} (\\mathrm{W} / \\mathrm{L}) I_{D1}} = 0.97 \\mathrm{mA} / \\mathrm{V} \\tag{3.3}\n\\end{equation*}\n$$\n\nThis leads to $r_{s1} = 1 / g_{m1} \\approx 1.03 \\mathrm{k} \\Omega$. It is important to note that this $r_{s1}$ value is considerably lower than $r_{\\text{ds}1}$, which is equal to $r_{\\text{ds}2}$ in this scenario, allowing us to assume $r_{\\text{in}} \\approx 1.03 \\mathrm{k} \\Omega$.\n\nThe variation in output current can be approximated using $r_{\\text{out}}$ as follows:\n\n$$\n\\begin{equation*}\n\\Delta I_{\\text{out}} = \\frac{\\Delta V}{r_{\\text{out}}} = \\frac{100 \\mathrm{mV}}{25 \\mathrm{k} \\Omega} = 4 \\mu \\mathrm{A} \\tag{3.4}\n\\end{equation*}\n$$\n\nIn essence, if the initial $I_{\\text{out}}$ is found to be $101 \\mu \\mathrm{A}$ (due to mismatch or a higher $\\mathrm{V}_{\\mathrm{DS}}$ voltage), then a 100 mV rise in output voltage would lead to a new output current of approximately $105 \\mu \\mathrm{A}$. Note that this approximation does not consider second-order effects, such as the variation in $r_{\\text{ds}}$ with changes in output current.\n\nLastly, the drain voltage of $Q_{2}$ must be at least $\\mathrm{V}_{\\text{eff}2}$ to maintain it in active mode.\n\n$$\nV_{\\text{eff}2} = \\sqrt{\\frac{2 I_{D}}{\\mu_{\\mathrm{n}} C_{\\mathrm{ox}} (W / L)}} = 205 \\mathrm{mV}\n$$\n\nYou can compare these findings with those derived from a SPICE simulation."
},
{
    "text": "Given that the $W / L$ ratios of $Q_{1}$ and $Q_{2}$ are identical, the nominal value of $I_{\\text{out}}$ matches that of $I_{\\text{in}}$, which is $100 \\mu \\mathrm{A}$. Consequently,\n\n$$\n\\begin{equation*}\nr_{\\text{out}} = r_{\\text{ds} 2} = \\frac{L}{\\lambda L I_{D}} = \\frac{0.4 \\mu \\mathrm{m}}{(0.16 \\mu \\mathrm{m} / \\mathrm{V})(100 \\mu \\mathrm{A})} = 25 \\mathrm{k} \\Omega \\tag{3.2}\n\\end{equation*}\n$$\n\nThe value of $g_{m 1}$ is determined by\n\n$$\n\\begin{equation*}\ng_{m 1} = \\sqrt{2 \\mu_{\\mathrm{n}} C_{\\mathrm{ox}} (\\mathrm{W} / \\mathrm{L}) I_{D 1}} = 0.97 \\mathrm{mA} / \\mathrm{V} \\tag{3.3}\n\\end{equation*}\n$$\n\nThis leads to $r_{s 1} = 1 / g_{m 1} \\approx 1.03 \\mathrm{k} \\Omega$. It is important to note that this $r_{s 1}$ value is substantially lower than $r_{\\text{ds} 1}$, which is equal to $r_{\\text{ds} 2}$ in this scenario, allowing us to approximate $r_{\\text{in}} \\approx 1.03 \\mathrm{k} \\Omega$.\n\nThe variation in output current can be approximated using $r_{\\text{out}}$ as follows:\n\n$$\n\\begin{equation*}\n\\Delta I_{\\text{out}} = \\frac{\\Delta V}{r_{\\text{out}}} = \\frac{100 \\mathrm{mV}}{25 \\mathrm{k} \\Omega} = 4 \\mu \\mathrm{A} \\tag{3.4}\n\\end{equation*}\n$$\n\nIn essence, if the initial $I_{\\text{out}}$ is found to be $101 \\mu \\mathrm{A}$ (due to mismatch or a higher $\\mathrm{V}_{\\mathrm{DS}}$ voltage), a 100 mV rise in output voltage would lead to a new output current of approximately $105 \\mu \\mathrm{A}$. Note that this estimation does not consider secondary effects such as the variation of $r_{\\text{ds}}$ with changes in output current.\n\nLastly, the drain voltage of $Q_{2}$ must be at least $\\mathrm{V}_{\\text{eff} 2}$ to maintain it in active mode.\n\n$$\nV_{\\text{eff} 2} = \\sqrt{\\frac{2 I_{D}}{\\mu_{\\mathrm{n}} C_{\\mathrm{ox}} (W / L)}} = 205 \\mathrm{mV}\n$$\n\nThese results can be compared with those from a SPICE simulation."
},
{
    "text": "Given that the $W / L$ ratios of $Q_{1}$ and $Q_{2}$ are identical, the nominal value of $I_{\\text{out}}$ matches that of $I_{\\text{in}}$, which is $100 \\mu \\mathrm{A}$. Consequently, we obtain\n\n$$\n\\begin{equation*}\nr_{\\text{out}} = r_{\\text{ds}2} = \\frac{L}{\\lambda L I_{D}} = \\frac{0.4 \\mu \\mathrm{m}}{(0.16 \\mu \\mathrm{m} / \\mathrm{V})(100 \\mu \\mathrm{A})} = 25 \\mathrm{k} \\Omega \\tag{3.2}\n\\end{equation*}\n$$\n\nThe value of $g_{m1}$ is determined by\n\n$$\n\\begin{equation*}\ng_{m1} = \\sqrt{2 \\mu_{n} C_{ox} (\\frac{W}{L}) I_{D1}} = 0.97 \\mathrm{mA} / \\mathrm{V} \\tag{3.3}\n\\end{equation*}\n$$\n\nleading to $r_{s1} = \\frac{1}{g_{m1}} \\approx 1.03 \\mathrm{k} \\Omega$. It is important to note that this $r_{s1}$ value is substantially lower than $r_{\\text{ds}1}$, which in this scenario equals $r_{\\text{ds}2}$, allowing us to assume $r_{\\text{in}} \\approx 1.03 \\mathrm{k} \\Omega$.\n\nThe variation in output current can be approximated using $r_{\\text{out}}$ as follows:\n\n$$\n\\begin{equation*}\n\\Delta I_{\\text{out}} = \\frac{\\Delta V}{r_{\\text{out}}} = \\frac{100 \\mathrm{mV}}{25 \\mathrm{k} \\Omega} = 4 \\mu \\mathrm{A} \\tag{3.4}\n\\end{equation*}\n$$\n\nIn other words, if the initial $I_{\\text{out}}$ is found to be $101 \\mu \\mathrm{A}$ (due to mismatch or a higher $\\mathrm{V}_{\\mathrm{DS}}$ voltage), then a 100 mV rise in output voltage would lead to a new output current of approximately $105 \\mu \\mathrm{A}$. Note that this estimation does not consider second-order effects, such as the variation of $r_{ds}$ with changes in output current.\n\nLastly, the drain voltage of $Q_{2}$ must be at least $\\mathrm{V}_{\\text{eff}2}$ to maintain it in active mode.\n\n$$\nV_{\\text{eff}2} = \\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{ox} (\\frac{W}{L})}} = 205 \\mathrm{mV}\n$$\n\nYou can compare these findings with the results from a SPICE simulation."
},
{
    "text": "image_name:Fig. 3.4 A common-source amplifier with a current-mirror active load\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: Q2, type: PMOS, ports: {S: VDD, D: Vout, G: P}\nname: Q3, type: PMOS, ports: {S: VDD, D: P, G: P}\nname: Ibias, type: CurrentSource, ports: {Np: P, Nn: GND}\n]\nextrainfo:The circuit is a common-source amplifier with a current-mirror active load. Q1 serves as the n-channel MOSFET amplifier, while Q2 and Q3 constitute the p-channel current mirror providing the active load. Ibias delivers the bias current for the circuit.\n\nFig. 3.4 A common-source amplifier with a current-mirror active load.\n\nSimple current mirrors are frequently employed in single-stage amplifiers with active loads, as depicted in Fig. 3.4. This common-source configuration is the most widely used gain stage, particularly when high input impedance is needed.\n\nIn this setup, an n-channel common-source amplifier utilizes a p-channel current mirror as an active load to supply the bias current for the drive transistor. Utilizing an active load enables the creation of a high-impedance output load without requiring excessively large resistors or a high power-supply voltage. Consequently, for a given power-supply voltage, an active load allows for a greater voltage gain compared to using a resistor for the load. For instance, achieving a $100-\\mathrm{k} \\Omega$ load with a $100-\\mu \\mathrm{A}$ bias current via a resistive-load approach would necessitate a power-supply voltage of $100 \\mathrm{k} \\Omega \\times 100 \\mu \\mathrm{~A}=10 \\mathrm{~V}$. An active load leverages the nonlinear, large-signal transistor current-voltage relationship to provide substantial small-signal resistances without significant dc voltage drops.\n\nKey Point: The common-source amplifier is a favored gain stage, especially when high input impedance is required. The active load exploits the nonlinear, large-signal transistor current-voltage relationship to deliver large small-signal resistances without substantial dc voltage drops.\n\nA small-signal equivalent circuit for the low-frequency analysis of the common-source amplifier in Fig. 3.4 is illustrated in Fig. 3.5, where $V_{\\text {in }}$ and $R_{\\text {in }}$ represent the Thévenin equivalent of the input source. It is presumed that the bias voltages ensure both transistors operate in the active region. The output resistance, $R_{2}$, comprises the parallel combination of the drain-to-source resistance of $Q_{1}$, denoted as $r_{d s}$, and the drain-to-source resistance of $Q_{2}$, denoted as $r_{\\text {ds } 2}$. Note that the voltage-controlled current source modeling the body effect is excluded since the source is at a small-signal ground, resulting in zero current for this source.\n\nThrough small-signal analysis, we derive $\\mathrm{v}_{\\mathrm{gs} 1}=\\mathrm{v}_{\\mathrm{in}}$, thus,\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{v_{\\text {out }}}{V_{\\text {in }}}=-g_{m 1} R_{2}=-g_{m 1}\\left(r_{d s 1} \\| r_{d s 2}\\right) \\tag{3.5}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.5\ndescription:\n[{'name': 'Vin', 'type': 'VoltageSource', 'value': 'Vin', 'ports': {'Np': 'Vin', 'Nn': 'GND'}}, {'name': 'Rin', 'type': 'Resistor', 'value': 'Rin', 'ports': {'N1': 'Vin', 'N2': 'Vgs1'}}]\n[{'name': 'g_m1V_gs1', 'type': 'VoltageControlledCurrentSource', 'ports': {'Np': 'Vgs1', 'Nn': 'GND'}}, {'name': 'R2', 'type': 'Resistor', 'value': 'rds1||rds2', 'ports': {'N1': 'Vout', 'N2': 'GND'}}]\nextrainfo:The circuit represents a small-signal equivalent of a common-source amplifier with a voltage gain of Av = -gm1 * R2. The gain is dictated by the transconductance gm1 and the parallel combination of rds1 and rds2.\n\nFig. 3.5 A small-signal equivalent circuit for the common-source amplifier.\n\nDepending on the device sizes, currents, and the employed technology, a typical gain for this circuit ranges from -5 to -100. To attain similar gains with resistive loads, significantly higher power-supply voltages are required, which also drastically increases power dissipation. However, it is worth noting that for low-gain, high-frequency stages, resistor loads may be preferable (if they do not occupy much silicon area) due to their typically lower parasitic capacitances and reduced noise compared to active loads."
},
{
    "text": "```\nimage_name:Fig. 3.4 A common-source amplifier with a current-mirror active load\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: Q2, type: PMOS, ports: {S: VDD, D: Vout, G: P}\nname: Q3, type: PMOS, ports: {S: VDD, D: P, G: P}\nname: Ibias, type: CurrentSource, ports: {Np: P, Nn: GND}\n]\nextrainfo:The circuit depicted is a common-source amplifier featuring a current-mirror active load. Q1 serves as the n-channel MOSFET amplifier, while Q2 and Q3 constitute the p-channel current mirror that provides the active load. Ibias delivers the bias current necessary for the circuit's operation.\n\nFig. 3.4 A common-source amplifier with a current-mirror active load.\n\nSimple current mirrors are frequently employed in single-stage amplifiers with active loads, as illustrated in Fig. 3.4. This common-source configuration is particularly favored as a gain stage when high input impedance is required.\n\nIn this setup, an n-channel common-source amplifier utilizes a p-channel current mirror as an active load to supply the bias current for the drive transistor. The adoption of an active load enables the realization of a high-impedance output load without the need for excessively large resistors or a high power-supply voltage. Consequently, for a given power-supply voltage, an active load facilitates a greater voltage gain compared to using a resistor as the load. For instance, achieving a $100-\\mathrm{k} \\Omega$ load with a $100-\\mu \\mathrm{A}$ bias current via a resistive load would necessitate a power-supply voltage of $100 \\mathrm{k} \\Omega \\times 100 \\mu \\mathrm{~A}=10 \\mathrm{~V}$. An active load leverages the nonlinear, large-signal transistor current-voltage characteristics to provide substantial small-signal resistances without significant dc voltage drops.\n\nKey Point: The common-source amplifier is a widely-used gain stage, especially beneficial for high input impedance requirements. The active load exploits the nonlinear, large-signal transistor current-voltage relationship to deliver large small-signal resistances without substantial dc voltage drops.\n\nA small-signal equivalent circuit for the low-frequency analysis of the common-source amplifier shown in Fig. 3.4 is presented in Fig. 3.5, where $V_{\\text {in }}$ and $R_{\\text {in }}$ represent the Thévenin equivalent of the input source. It is presumed that the bias voltages ensure both transistors operate in the active region. The output resistance, $R_{2}$, comprises the parallel combination of the drain-to-source resistance of $Q_{1}$, denoted as $r_{d s}$, and the drain-to-source resistance of $Q_{2}$, denoted as $r_{\\text {ds } 2}$. Note that the voltage-controlled current source modeling the body effect is excluded since the source is at a small-signal ground, resulting in a constant 0 current from this source.\n\nThrough small-signal analysis, we derive $\\mathrm{v}_{\\mathrm{gs} 1}=\\mathrm{v}_{\\mathrm{in}}$, leading to:\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{v_{\\text {out }}}{V_{\\text {in }}}=-g_{m 1} R_{2}=-g_{m 1}\\left(r_{d s 1} \\| r_{d s 2}\\right) \\tag{3.5}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.5\ndescription:\n[{'name': 'Vin', 'type': 'VoltageSource', 'value': 'Vin', 'ports': {'Np': 'Vin', 'Nn': 'GND'}}, {'name': 'Rin', 'type': 'Resistor', 'value': 'Rin', 'ports': {'N1': 'Vin', 'N2': 'Vgs1'}}]\n[{'name': 'g_m1V_gs1', 'type': 'VoltageControlledCurrentSource', 'ports': {'Np': 'Vgs1', 'Nn': 'GND'}}, {'name': 'R2', 'type': 'Resistor', 'value': 'rds1||rds2', 'ports': {'N1': 'Vout', 'N2': 'GND'}}]\nextrainfo:The depicted circuit is a small-signal equivalent of a common-source amplifier with a voltage gain of Av = -gm1 * R2. The gain is dictated by the transconductance gm1 and the parallel combination of rds1 and rds2.\n\nFig. 3.5 A small-signal equivalent circuit for the common-source amplifier.\n\nDepending on the device dimensions, currents, and the employed technology, a typical gain for this circuit ranges from -5 to -100. To achieve comparable gains with resistive loads, significantly higher power-supply voltages would be necessary, thereby substantially increasing power dissipation. However, it is worth noting that for low-gain, high-frequency stages, resistor loads may be preferable (if they occupy minimal silicon area) due to their typically lower parasitic capacitances and reduced noise compared to active loads.\n```"
},
{
    "text": "```\nimage_name:Fig. 3.4 A common-source amplifier with a current-mirror active load\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: Q2, type: PMOS, ports: {S: VDD, D: Vout, G: P}\nname: Q3, type: PMOS, ports: {S: VDD, D: P, G: P}\nname: Ibias, type: CurrentSource, ports: {Np: P, Nn: GND}\n]\nextrainfo:The circuit is a common-source amplifier featuring a current-mirror active load. Q1 acts as the n-channel MOSFET amplifier, while Q2 and Q3 together form the p-channel current mirror that serves as the active load. Ibias provides the necessary bias current for the circuit.\n\nFig. 3.4 A common-source amplifier with a current-mirror active load.\n\nSimple current mirrors are frequently employed in single-stage amplifiers with active loads, as depicted in Fig. 3.4. This common-source configuration is particularly favored for gain stages, especially when high input impedance is required.\n\nIn this setup, an n-channel common-source amplifier utilizes a p-channel current mirror as an active load to deliver the bias current to the drive transistor. By incorporating an active load, a high-impedance output load can be achieved without relying on excessively large resistors or a high power-supply voltage. Consequently, for a given power-supply voltage, an active load enables a greater voltage gain compared to using a resistor for the load. For instance, achieving a $100-\\mathrm{k} \\Omega$ load with a $100-\\mu \\mathrm{A}$ bias current via resistive load would necessitate a power-supply voltage of $100 \\mathrm{k} \\Omega \\times 100 \\mu \\mathrm{~A}=10 \\mathrm{~V}$. An active load leverages the nonlinear, large-signal transistor current-voltage characteristics to provide substantial small-signal resistances without significant dc voltage drops.\n\nKey Point: The common-source amplifier is a widely-used gain stage, particularly when high input impedance is needed. The active load exploits the nonlinear, large-signal transistor current-voltage relationship to deliver large small-signal resistances without substantial dc voltage drops.\n\nA small-signal equivalent circuit for the low-frequency analysis of the common-source amplifier shown in Fig. 3.4 is illustrated in Fig. 3.5, where $V_{\\text {in }}$ and $R_{\\text {in }}$ represent the Thévenin equivalent of the input source. It is presumed that the bias voltages ensure both transistors operate in the active region. The output resistance, $R_{2}$, comprises the parallel combination of the drain-to-source resistance of $Q_{1}$, denoted as $r_{d s}$, and the drain-to-source resistance of $Q_{2}$, denoted as $r_{\\text {ds } 2}$. Note that the voltage-controlled current source modeling the body effect is excluded since the source is at a small-signal ground, resulting in zero current for this source.\n\nThrough small-signal analysis, we derive $\\mathrm{v}_{\\mathrm{gs} 1}=\\mathrm{v}_{\\mathrm{in}}$, leading to:\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{v_{\\text {out }}}{V_{\\text {in }}}=-g_{m 1} R_{2}=-g_{m 1}\\left(r_{d s 1} \\| r_{d s 2}\\right) \\tag{3.5}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.5\ndescription:\n[{'name': 'Vin', 'type': 'VoltageSource', 'value': 'Vin', 'ports': {'Np': 'Vin', 'Nn': 'GND'}}, {'name': 'Rin', 'type': 'Resistor', 'value': 'Rin', 'ports': {'N1': 'Vin', 'N2': 'Vgs1'}}]\n[{'name': 'g_m1V_gs1', 'type': 'VoltageControlledCurrentSource', 'ports': {'Np': 'Vgs1', 'Nn': 'GND'}}, {'name': 'R2', 'type': 'Resistor', 'value': 'rds1||rds2', 'ports': {'N1': 'Vout', 'N2': 'GND'}}]\nextrainfo:The circuit represents a small-signal equivalent of a common-source amplifier with a voltage gain of Av = -gm1 * R2. The gain is influenced by the transconductance gm1 and the parallel combination of rds1 and rds2.\n\nFig. 3.5 A small-signal equivalent circuit for the common-source amplifier.\n\nDepending on the device sizes, currents, and the employed technology, a typical gain for this circuit ranges from -5 to -100. To attain similar gains with resistive loads, significantly higher power-supply voltages would be necessary, which would also drastically increase power dissipation. However, it is worth noting that for low-gain, high-frequency stages, resistor loads might be preferable (if they do not occupy much silicon area) due to their generally lower parasitic capacitances and reduced noise compared to active loads.\n```"
},
{
    "text": "```\nimage_name: Fig. 3.4 A common-source amplifier with a current-mirror active load\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: Q2, type: PMOS, ports: {S: VDD, D: Vout, G: P}\nname: Q3, type: PMOS, ports: {S: VDD, D: P, G: P}\nname: Ibias, type: CurrentSource, ports: {Np: P, Nn: GND}\n]\nextrainfo: The circuit is a common-source amplifier with a current-mirror active load. Q1 serves as the n-channel MOSFET amplifier, while Q2 and Q3 constitute the p-channel current mirror that provides the active load. Ibias delivers the bias current for the circuit.\n\nFig. 3.4 A common-source amplifier with a current-mirror active load.\n\nA typical application of simple current mirrors is in single-stage amplifiers with active loads, as depicted in Fig. 3.4. This common-source configuration is the most widely used gain stage, particularly when high input impedance is needed.\n\nIn this setup, an n-channel common-source amplifier employs a p-channel current mirror as an active load to supply the bias current for the drive transistor. Utilizing an active load allows for a high-impedance output load without the need for excessively large resistors or a high power-supply voltage. Consequently, for a given power-supply voltage, an active load enables a greater voltage gain compared to using a resistor for the load. For instance, achieving a $100-\\mathrm{k} \\Omega$ load with a $100-\\mu \\mathrm{A}$ bias current via resistive load would necessitate a power-supply voltage of $100 \\mathrm{k} \\Omega \\times 100 \\mu \\mathrm{~A}=10 \\mathrm{~V}$. An active load leverages the nonlinear, large-signal transistor current-voltage relationship to provide substantial small-signal resistances without significant dc voltage drops.\n\nKey Point: The common-source amplifier is a favored gain stage, especially for high input impedance requirements. The active load exploits the nonlinear, large-signal transistor current-voltage relationship to deliver large small-signal resistances without substantial dc voltage drops.\n\nA small-signal equivalent circuit for the low-frequency analysis of the common-source amplifier shown in Fig. 3.4 is presented in Fig. 3.5, where $V_{\\text {in }}$ and $R_{\\text {in }}$ represent the Thévenin equivalent of the input source. It is presumed that the bias voltages ensure both transistors operate in the active region. The output resistance, $R_{2}$, comprises the parallel combination of the drain-to-source resistance of $Q_{1}$, denoted as $r_{d s}$, and the drain-to-source resistance of $Q_{2}$, denoted as $r_{\\text {ds } 2}$. Note that the voltage-controlled current source modeling the body effect is excluded since the source is at a small-signal ground, resulting in zero current for this source.\n\nThrough small-signal analysis, we derive $\\mathrm{v}_{\\mathrm{gs} 1}=\\mathrm{v}_{\\mathrm{in}}$, leading to:\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{v_{\\text {out }}}{V_{\\text {in }}}=-g_{m 1} R_{2}=-g_{m 1}\\left(r_{d s 1} \\| r_{d s 2}\\right) \\tag{3.5}\n\\end{equation*}\n$$\n\nimage_name: Fig. 3.5\ndescription:\n[{'name': 'Vin', 'type': 'VoltageSource', 'value': 'Vin', 'ports': {'Np': 'Vin', 'Nn': 'GND'}}, {'name': 'Rin', 'type': 'Resistor', 'value': 'Rin', 'ports': {'N1': 'Vin', 'N2': 'Vgs1'}}]\n[{'name': 'g_m1V_gs1', 'type': 'VoltageControlledCurrentSource', 'ports': {'Np': 'Vgs1', 'Nn': 'GND'}}, {'name': 'R2', 'type': 'Resistor', 'value': 'rds1||rds2', 'ports': {'N1': 'Vout', 'N2': 'GND'}}]\nextrainfo: This circuit is a small-signal equivalent of a common-source amplifier with a voltage gain of Av = -gm1 * R2. The gain is dictated by the transconductance gm1 and the parallel combination of rds1 and rds2.\n\nFig. 3.5 A small-signal equivalent circuit for the common-source amplifier.\n\nDepending on the device sizes, currents, and technology employed, a typical gain for this circuit ranges from -5 to -100. To attain similar gains with resistive loads, significantly higher power-supply voltages are required, which also drastically increases power dissipation. However, for low-gain, high-frequency stages, it may be preferable to use resistor loads (if they occupy minimal silicon area) as they often have lower parasitic capacitances. They are also generally less noisy than active loads.\n```"
},
{
    "text": "image_name: Fig. 3.4 A common-source amplifier with a current-mirror active load\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: Q2, type: PMOS, ports: {S: VDD, D: Vout, G: P}\nname: Q3, type: PMOS, ports: {S: VDD, D: P, G: P}\nname: Ibias, type: CurrentSource, ports: {Np: P, Nn: GND}\n]\nextrainfo: The circuit is a common-source amplifier featuring a current-mirror active load. Q1 serves as the n-channel MOSFET amplifier, while Q2 and Q3 constitute the p-channel current mirror that provides the active load. Ibias delivers the bias current for the circuit.\n\nFig. 3.4 A common-source amplifier with a current-mirror active load.\n\nSimple current mirrors are frequently employed in single-stage amplifiers with active loads, as depicted in Fig. 3.4. This common-source configuration is the most widely used gain stage, particularly when high input impedance is necessary.\n\nIn this setup, an n-channel common-source amplifier utilizes a p-channel current mirror as an active load to supply the bias current for the drive transistor. By employing an active load, a high-impedance output load can be achieved without relying on excessively large resistors or a high power-supply voltage. Consequently, for a given power-supply voltage, an active load enables a greater voltage gain compared to using a resistor for the load. For instance, a $100-\\mathrm{k} \\Omega$ load with a $100-\\mu \\mathrm{A}$ bias current would necessitate a power-supply voltage of $100 \\mathrm{k} \\Omega \\times 100 \\mu \\mathrm{~A}=10 \\mathrm{~V}$ in a resistive-load approach. An active load leverages the nonlinear, large-signal transistor current-voltage relationship to provide substantial small-signal resistances without significant dc voltage drops.\n\nKey Point: The common-source amplifier is a favored gain stage, especially when high input impedance is needed. Utilizing an active load exploits the nonlinear, large-signal transistor current-voltage relationship to deliver large small-signal resistances without substantial dc voltage drops.\n\nA small-signal equivalent circuit for the low-frequency analysis of the common-source amplifier shown in Fig. 3.4 is illustrated in Fig. 3.5, where $V_{\\text {in }}$ and $R_{\\text {in }}$ represent the Thévenin equivalent of the input source. It is presumed that the bias voltages ensure both transistors operate in the active region. The output resistance, $R_{2}$, comprises the parallel combination of the drain-to-source resistance of $Q_{1}$, denoted as $r_{d s}$, and the drain-to-source resistance of $Q_{2}$, denoted as $r_{\\text {ds } 2}$. Note that the voltage-controlled current source modeling the body effect is excluded since the source is at a small-signal ground, resulting in zero current for this source.\n\nThrough small-signal analysis, we derive $\\mathrm{v}_{\\mathrm{gs} 1}=\\mathrm{v}_{\\mathrm{in}}$, leading to:\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{v_{\\text {out }}}{V_{\\text {in }}}=-g_{m 1} R_{2}=-g_{m 1}\\left(r_{d s 1} \\| r_{d s 2}\\right) \\tag{3.5}\n\\end{equation*}\n$$\n\nimage_name: Fig. 3.5\ndescription:\n[{'name': 'Vin', 'type': 'VoltageSource', 'value': 'Vin', 'ports': {'Np': 'Vin', 'Nn': 'GND'}}, {'name': 'Rin', 'type': 'Resistor', 'value': 'Rin', 'ports': {'N1': 'Vin', 'N2': 'Vgs1'}}]\n[{'name': 'g_m1V_gs1', 'type': 'VoltageControlledCurrentSource', 'ports': {'Np': 'Vgs1', 'Nn': 'GND'}}, {'name': 'R2', 'type': 'Resistor', 'value': 'rds1||rds2', 'ports': {'N1': 'Vout', 'N2': 'GND'}}]\nextrainfo: This circuit represents a small-signal equivalent of a common-source amplifier with a voltage gain of Av = -gm1 * R2. The gain is dictated by the transconductance gm1 and the parallel combination of rds1 and rds2.\n\nFig. 3.5 A small-signal equivalent circuit for the common-source amplifier.\n\nDepending on the device sizes, currents, and the technology employed, a typical gain for this circuit ranges from -5 to -100. To attain similar gains with resistive loads, significantly higher power-supply voltages are required, which also drastically increases power dissipation. However, it is worth noting that for low-gain, high-frequency stages, resistor loads may be preferable (if they do not occupy much silicon area) due to their typically lower parasitic capacitances and reduced noise compared to active loads."
},
{
    "text": "```\nimage_name: Fig. 3.4 A common-source amplifier with a current-mirror active load\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: Q2, type: PMOS, ports: {S: VDD, D: Vout, G: P}\nname: Q3, type: PMOS, ports: {S: VDD, D: P, G: P}\nname: Ibias, type: CurrentSource, ports: {Np: P, Nn: GND}\n]\nextrainfo: The circuit is a common-source amplifier with a current-mirror active load. Q1 serves as the n-channel MOSFET amplifier, while Q2 and Q3 constitute the p-channel current mirror that provides the active load. Ibias delivers the bias current for the circuit.\n\nFig. 3.4 A common-source amplifier with a current-mirror active load.\n\nSimple current mirrors are frequently employed in single-stage amplifiers with active loads, as depicted in Fig. 3.4. This common-source configuration is the most prevalent gain stage, particularly when high input impedance is needed.\n\nIn this setup, an n-channel common-source amplifier utilizes a p-channel current mirror as an active load to supply the bias current for the drive transistor. By employing an active load, a high-impedance output load can be achieved without relying on excessively large resistors or a high power-supply voltage. Consequently, for a given power-supply voltage, an active load enables a greater voltage gain compared to using a resistor for the load. For instance, a $100-\\mathrm{k} \\Omega$ load with a $100-\\mu \\mathrm{A}$ bias current would necessitate a power-supply voltage of $100 \\mathrm{k} \\Omega \\times 100 \\mu \\mathrm{~A}=10 \\mathrm{~V}$ in a resistive-load approach. An active load leverages the nonlinear, large-signal transistor current-voltage relationship to provide substantial small-signal resistances without significant dc voltage drops.\n\nKey Point: The common-source amplifier is a favored gain stage, especially for applications requiring high input impedance. The active load exploits the nonlinear, large-signal transistor current-voltage relationship to deliver large small-signal resistances without substantial dc voltage drops.\n\nA small-signal equivalent circuit for the low-frequency analysis of the common-source amplifier in Fig. 3.4 is illustrated in Fig. 3.5, where $V_{\\text {in }}$ and $R_{\\text {in }}$ represent the Thévenin equivalent of the input source. It is assumed that the bias voltages ensure both transistors operate in the active region. The output resistance, $R_{2}$, comprises the parallel combination of the drain-to-source resistance of $Q_{1}$, denoted as $r_{d s}$, and the drain-to-source resistance of $Q_{2}$, denoted as $r_{\\text {ds } 2}$. Note that the voltage-controlled current source modeling the body effect is excluded since the source is at a small-signal ground, resulting in zero current for this source.\n\nThrough small-signal analysis, we derive $\\mathrm{v}_{\\mathrm{gs} 1}=\\mathrm{v}_{\\mathrm{in}}$, leading to:\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{v_{\\text {out }}}{V_{\\text {in }}}=-g_{m 1} R_{2}=-g_{m 1}\\left(r_{d s 1} \\| r_{d s 2}\\right) \\tag{3.5}\n\\end{equation*}\n$$\n\nimage_name: Fig. 3.5\ndescription:\n[{'name': 'Vin', 'type': 'VoltageSource', 'value': 'Vin', 'ports': {'Np': 'Vin', 'Nn': 'GND'}}, {'name': 'Rin', 'type': 'Resistor', 'value': 'Rin', 'ports': {'N1': 'Vin', 'N2': 'Vgs1'}}]\n[{'name': 'g_m1V_gs1', 'type': 'VoltageControlledCurrentSource', 'ports': {'Np': 'Vgs1', 'Nn': 'GND'}}, {'name': 'R2', 'type': 'Resistor', 'value': 'rds1||rds2', 'ports': {'N1': 'Vout', 'N2': 'GND'}}]\nextrainfo: This circuit represents the small-signal equivalent of a common-source amplifier with a voltage gain of Av = -gm1 * R2. The gain is determined by the transconductance gm1 and the parallel combination of rds1 and rds2.\n\nFig. 3.5 A small-signal equivalent circuit for the common-source amplifier.\n\nDepending on the device sizes, currents, and the technology employed, a typical gain for this circuit ranges from -5 to -100. To achieve similar gains with resistive loads, significantly higher power-supply voltages are required, which also drastically increases power dissipation. However, for low-gain, high-frequency stages, resistor loads may be preferable (if they do not occupy much silicon area) due to their typically lower parasitic capacitances and reduced noise compared to active loads.\n```"
},
{
    "text": "image_name:Fig. 3.4 A common-source amplifier with a current-mirror active load\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: Q2, type: PMOS, ports: {S: VDD, D: Vout, G: P}\nname: Q3, type: PMOS, ports: {S: VDD, D: P, G: P}\nname: Ibias, type: CurrentSource, ports: {Np: P, Nn: GND}\n]\nextrainfo:The circuit depicted is a common-source amplifier featuring a current-mirror active load. Q1 serves as the n-channel MOSFET amplifier, while Q2 and Q3 constitute the p-channel current mirror that provides the active load. Ibias delivers the bias current necessary for the circuit's operation.\n\nFig. 3.4 A common-source amplifier with a current-mirror active load.\n\nSimple current mirrors are frequently employed in single-stage amplifiers with active loads, as illustrated in Fig. 3.4. This common-source configuration is particularly favored as a gain stage when high input impedance is required.\n\nIn this setup, an n-channel common-source amplifier utilizes a p-channel current mirror as an active load to supply the bias current for the drive transistor. The active load enables the creation of a high-impedance output load without the need for excessively large resistors or a high power-supply voltage. Consequently, for a given power-supply voltage, an active load can achieve a greater voltage gain compared to using a resistor for the load. For instance, achieving a $100-\\mathrm{k} \\Omega$ load with a $100-\\mu \\mathrm{A}$ bias current via a resistive load would necessitate a power-supply voltage of $100 \\mathrm{k} \\Omega \\times 100 \\mu \\mathrm{~A}=10 \\mathrm{~V}$. An active load leverages the nonlinear, large-signal transistor current-voltage characteristics to provide substantial small-signal resistances without significant dc voltage drops.\n\nKey Point: The common-source amplifier is a widely used gain stage, especially when high input impedance is needed. The incorporation of an active load exploits the nonlinear, large-signal transistor current-voltage relationship to deliver large small-signal resistances without substantial dc voltage drops.\n\nA small-signal equivalent circuit for the low-frequency analysis of the common-source amplifier shown in Fig. 3.4 is presented in Fig. 3.5, where $V_{\\text {in }}$ and $R_{\\text {in }}$ represent the Thévenin equivalent of the input source. It is presumed that the bias voltages ensure both transistors operate in the active region. The output resistance, $R_{2}$, comprises the parallel combination of the drain-to-source resistance of $Q_{1}$, denoted as $r_{d s}$, and the drain-to-source resistance of $Q_{2}$, denoted as $r_{\\text {ds } 2}$. Note that the voltage-controlled current source modeling the body effect is excluded since the source is at a small-signal ground, resulting in zero current for this source.\n\nThrough small-signal analysis, we derive $\\mathrm{v}_{\\mathrm{gs} 1}=\\mathrm{v}_{\\mathrm{in}}$, leading to:\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{v_{\\text {out }}}{V_{\\text {in }}}=-g_{m 1} R_{2}=-g_{m 1}\\left(r_{d s 1} \\| r_{d s 2}\\right) \\tag{3.5}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.5\ndescription:\n[{'name': 'Vin', 'type': 'VoltageSource', 'value': 'Vin', 'ports': {'Np': 'Vin', 'Nn': 'GND'}}, {'name': 'Rin', 'type': 'Resistor', 'value': 'Rin', 'ports': {'N1': 'Vin', 'N2': 'Vgs1'}}]\n[{'name': 'g_m1V_gs1', 'type': 'VoltageControlledCurrentSource', 'ports': {'Np': 'Vgs1', 'Nn': 'GND'}}, {'name': 'R2', 'type': 'Resistor', 'value': 'rds1||rds2', 'ports': {'N1': 'Vout', 'N2': 'GND'}}]\nextrainfo:The depicted circuit is a small-signal equivalent of a common-source amplifier with a voltage gain of Av = -gm1 * R2. The gain is dictated by the transconductance gm1 and the parallel combination of rds1 and rds2.\n\nFig. 3.5 A small-signal equivalent circuit for the common-source amplifier.\n\nDepending on the device sizes, currents, and the employed technology, a typical gain for this circuit ranges from -5 to -100. To achieve comparable gains with resistive loads, significantly higher power-supply voltages would be necessary, which would also drastically increase power dissipation. However, it is worth noting that for low-gain, high-frequency stages, resistor loads might be preferable (if they do not occupy much silicon area) due to their typically lower parasitic capacitances. They are also generally less noisy compared to active loads."
},
{
    "text": "```\nimage_name: Fig. 3.4 A common-source amplifier with a current-mirror active load\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: Q2, type: PMOS, ports: {S: VDD, D: Vout, G: P}\nname: Q3, type: PMOS, ports: {S: VDD, D: P, G: P}\nname: Ibias, type: CurrentSource, ports: {Np: P, Nn: GND}\n]\nextrainfo: The circuit is a common-source amplifier with a current-mirror active load. Q1 serves as the n-channel MOSFET amplifier, while Q2 and Q3 constitute the p-channel current mirror that provides the active load. Ibias delivers the bias current for the circuit.\n\nFig. 3.4 A common-source amplifier with a current-mirror active load.\n\nSimple current mirrors are frequently employed in single-stage amplifiers with active loads, as depicted in Fig. 3.4. This common-source configuration is the most widely used gain stage, particularly when high input impedance is needed.\n\nIn this setup, an n-channel common-source amplifier utilizes a p-channel current mirror as an active load to supply the bias current for the drive transistor. Employing an active load allows for a high-impedance output load without the need for excessively large resistors or a high power-supply voltage. Consequently, for a given power-supply voltage, a greater voltage gain can be achieved with an active load compared to using a resistor for the load. For instance, if a $100-\\mathrm{k} \\Omega$ load is required with a $100-\\mu \\mathrm{A}$ bias current, a resistive-load approach would necessitate a power-supply voltage of $100 \\mathrm{k} \\Omega \\times 100 \\mu \\mathrm{~A}=10 \\mathrm{~V}$. An active load leverages the nonlinear, large-signal transistor current-voltage relationship to provide substantial small-signal resistances without significant dc voltage drops.\n\nKey Point: The common-source amplifier is a favored gain stage, especially when high input impedance is required. Utilizing an active load exploits the nonlinear, large-signal transistor current-voltage relationship to deliver large small-signal resistances without substantial dc voltage drops.\n\nA small-signal equivalent circuit for the low-frequency analysis of the common-source amplifier in Fig. 3.4 is illustrated in Fig. 3.5, where $V_{\\text {in }}$ and $R_{\\text {in }}$ represent the Thévenin equivalent of the input source. It is presumed that the bias voltages ensure both transistors operate in the active region. The output resistance, $R_{2}$, comprises the parallel combination of the drain-to-source resistance of $Q_{1}$, denoted as $r_{d s}$, and the drain-to-source resistance of $Q_{2}$, denoted as $r_{\\text {ds } 2}$. Note that the voltage-controlled current source modeling the body effect is excluded since the source is at a small-signal ground, resulting in zero current for this source.\n\nThrough small-signal analysis, we derive $\\mathrm{v}_{\\mathrm{gs} 1}=\\mathrm{v}_{\\mathrm{in}}$, thus,\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{v_{\\text {out }}}{V_{\\text {in }}}=-g_{m 1} R_{2}=-g_{m 1}\\left(r_{d s 1} \\| r_{d s 2}\\right) \\tag{3.5}\n\\end{equation*}\n$$\n\nimage_name: Fig. 3.5\ndescription:\n[{'name': 'Vin', 'type': 'VoltageSource', 'value': 'Vin', 'ports': {'Np': 'Vin', 'Nn': 'GND'}}, {'name': 'Rin', 'type': 'Resistor', 'value': 'Rin', 'ports': {'N1': 'Vin', 'N2': 'Vgs1'}}]\n[{'name': 'g_m1V_gs1', 'type': 'VoltageControlledCurrentSource', 'ports': {'Np': 'Vgs1', 'Nn': 'GND'}}, {'name': 'R2', 'type': 'Resistor', 'value': 'rds1||rds2', 'ports': {'N1': 'Vout', 'N2': 'GND'}}]\nextrainfo: This circuit represents a small-signal equivalent of a common-source amplifier with a voltage gain of Av = -gm1 * R2. The gain is dictated by the transconductance gm1 and the parallel combination of rds1 and rds2.\n\nFig. 3.5 A small-signal equivalent circuit for the common-source amplifier.\n\nDepending on the device sizes, currents, and the employed technology, a typical gain for this circuit ranges from -5 to -100. To achieve similar gains with resistive loads, significantly higher power-supply voltages are required, which also drastically increases power dissipation. However, it is worth noting that for low-gain, high-frequency stages, resistor loads may be preferable (if they do not occupy much silicon area) as they often have lower parasitic capacitances. They are also generally less noisy than active loads.\n```"
},
{
    "text": "```\nimage_name: Fig. 3.6\ndescription:\n[\nname: I_bias, type: CurrentSource, value: I_bias, ports: {Np: VDD, Nn: P}\nname: Q1, type: NMOS, ports: {S: Vout, D: VDD, G: Vin}\nname: Q2, type: NMOS, ports: {S: GND, D: Vout, G: P}\nname: Q3, type: NMOS, ports: {S: GND, D: P, G: P}\n]\nextrainfo: The circuit features a source-follower stage with a current mirror providing the bias current. Q1 acts as the source follower, while Q2 and Q3 together form the active load that supplies Q1's bias current. This configuration is widely used as a voltage buffer.\n\nFig. 3.6 Illustration of a source-follower stage with a current mirror for bias current supply.\n\nCurrent mirrors are frequently employed to supply the bias current in source-follower amplifiers, as depicted in Fig. 3.6. In this instance, $Q_{1}$ serves as the source follower, and $Q_{2}$ functions as the active load that delivers the bias current to $Q_{1}$. These amplifiers, often utilized as voltage buffers, are commonly known as source followers. They are also termed common-drain amplifiers due to the input and output nodes being at the gate and source, respectively, with the drain at small-signal ground. Although the dc output voltage level differs from the input's dc level, the ideal small-signal voltage gain is nearly unity, though in practice, it is slightly less. Despite lacking voltage gain, the circuit can produce current gain.\n\nKey Point: The source follower offers a voltage gain near unity, often limited by the body effect. It can deliver substantial current gain and is unilateral, making it suitable as a voltage buffer.\n\nA low-frequency small-signal model for this source-follower stage is presented in Fig. 3.7. Note that the model includes a voltage-controlled current source representing the body effect of MOS transistors, as the source is not at small-signal ground. The body effect significantly restricts the small-signal gain. In Fig. 3.7, $r_{\\mathrm{ds} 1}$ is in parallel with $r_{\\mathrm{ds} 2}$. Additionally, the voltage-controlled current source modeling the body effect generates a current proportional to the voltage across it, equating the body effect to a resistor of size $1 / \\mathrm{g}_{\\mathrm{s} 1}$, also in parallel with $r_{\\mathrm{ds} 1}$ and $r_{\\mathrm{ds} 2}$. Thus, the model in Fig. 3.7 is equivalent to the simplified model in Fig. 3.8, where $R_{s 1}=r_{d s 1}\\left\\|r_{d s}\\right\\| 1 / g_{s 1}$. Writing the nodal equation at $v_{\\mathrm{out}}$ and noting $v_{g s 1}=v_{\\mathrm{in}}-v_{\\text {out }}$, we get\n\n$$\n\\begin{equation*}\nv_{\\text {out }} / R_{s 1}-g_{m 1}\\left(v_{\\text {in }}-v_{\\text {out }}\\right)=0 \\tag{3.9}\n\\end{equation*}\n$$\n\nTo reduce errors in circuit equations, a consistent approach should be used when writing nodal equations. The method used here involves: The first term is always the node where currents are summed, multiplied by the total admittances connected to it. Subsequent negative terms are the adjacent node voltages, each multiplied by the connecting admittance. The final terms are any current sources, with a negative sign if the current flows into the node.\n\nSolving for $\\mathrm{v}_{\\text {out }} / \\mathrm{v}_{\\text {in }}$, we obtain\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{v_{\\text {out }}}{v_{\\text {in }}}=\\frac{g_{m 1}}{g_{m 1}+G_{s 1}}=\\frac{g_{m 1}}{g_{m 1}+g_{s 1}+g_{d s 1}+g_{d s}}=g_{m 1}\\left(\\frac{1}{g_{m 1}}\\left\\|\\frac{1}{g_{s 1}}\\right\\| r_{d s 1} \\| r_{d s 2}\\right) \\tag{3.10}\n\\end{equation*}\n$$\n\nimage_name: Fig. 3.7\ndescription:\n[\nname: g_m1v_gs1, type: VoltageControlledCurrentSource, ports: {Np: Vd1, Nn: Vs1}\nname: g_s1v_s1, type: VoltageControlledVoltageSource, ports: {Np: Vd1, Nn: Vs1}\nname: r_ds1, type: Resistor, value: r_ds1, ports: {N1: Vd1, N2: Vd1}\nname: r_ds2, type: Resistor, value: r_ds2, ports: {N1: Vs1, N2: GND}\n]\nextrainfo: This model represents a low-frequency analysis of a source-follower amplifier, incorporating a voltage-controlled current source, a voltage-controlled voltage source, and two resistors connected to ground. The input voltage is labeled Vin, and the output voltage is Vout, equivalent to Vs1.\n\nFig. 3.7 The low-frequency model of the source-follower amplifier.\nwhere $G_{s 1}=1 / R_{s 1}$ is used. ${ }^{1}$ Typically, $g_{s 1}$ is about one-tenth to one-fifth of $\\mathrm{g}_{\\mathrm{m} 1}$. Also, the transistor output admittances, $\\mathrm{g}_{\\mathrm{ds} 1}$ and $\\mathrm{g}_{\\mathrm{ds} 2}$, might be one-tenth of the body-effect parameter, $\\mathrm{g}_{\\mathrm{s} 1}$. Hence, the body-effect parameter is the primary factor reducing the gain below unity. Additionally, at low frequencies, the stage is entirely unilateral, meaning no signal flows from output to input. This can be verified by applying a small test signal to the output and observing no induced voltage or current at the input.\n\nimage_name: Fig. 3.8\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: Vout}\nname: g_m1v_gs1, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: Vout}\nname: Rs1, type: Resistor, value: Rs1, ports: {N1: Vout, N2: GND}\n]\nextrainfo: This circuit is a small-signal model of a source follower, featuring a voltage-controlled current source for transconductance. The input is applied at Vin, and the output is taken from Vout. Rs1 is connected between Vout and ground.\n\nFig. 3.8 An equivalent small-signal model for the source follower.\n```"
},
{
    "text": "image_name: Fig. 3.6\ndescription:\n[\nname: I_bias, type: CurrentSource, value: I_bias, ports: {Np: VDD, Nn: P}\nname: Q1, type: NMOS, ports: {S: Vout, D: VDD, G: Vin}\nname: Q2, type: NMOS, ports: {S: GND, D: Vout, G: P}\nname: Q3, type: NMOS, ports: {S: GND, D: P, G: P}\n]\nextrainfo: This circuit is a source-follower stage that utilizes a current mirror to supply the bias current. Q1 functions as the source follower, while Q2 and Q3 together form the active load that provides the bias current for Q1. This configuration is frequently employed as a voltage buffer.\n\nFig. 3.6 A source-follower stage with a current mirror supplying the bias current.\n\nAnother common application of current mirrors is to provide the bias current for source-follower amplifiers, as depicted in Fig. 3.6. In this instance, $Q_{1}$ serves as the source follower, and $Q_{2}$ acts as an active load that supplies the bias current to $Q_{1}$. These amplifiers are typically used as voltage buffers and are often referred to as source followers. They are also known as common-drain amplifiers, given that the input and output nodes are located at the gate and source, respectively, with the drain node at small-signal ground. Although the dc level of the output voltage differs from that of the input voltage, the ideal small-signal voltage gain is nearly unity. In practice, it is slightly less than unity. Despite not providing voltage gain, this circuit can generate current gain.\n\nKey Point: The source follower offers a voltage gain close to unity, often limited by the body effect. It can deliver substantial current gain and is unilateral, making it a popular choice for voltage buffering.\n\nA small-signal model for low-frequency analysis of this source-follower stage is illustrated in Fig. 3.7. Note that the voltage-controlled current source, which models the body effect of MOS transistors, has been included because the source is not at small-signal ground. The body effect significantly limits the small-signal gain. In Fig. 3.7, $r_{\\mathrm{ds} 1}$ is in parallel with $r_{\\mathrm{ds} 2}$. Additionally, the voltage-controlled current source modeling the body effect generates a current proportional to the voltage across it. This relationship equates the body effect to a resistor of size $1 / \\mathrm{g}_{\\mathrm{s} 1}$, which is also in parallel with $r_{\\mathrm{ds} 1}$ and $r_{\\mathrm{ds} 2}$. Consequently, the small-signal model in Fig. 3.7 is equivalent to the simplified model in Fig. 3.8, where $R_{s 1}=r_{d s 1}\\left\\|r_{d s}\\right\\| 1 / g_{s 1}$. Writing the nodal equation at $v_{\\mathrm{out}}$ and noting that $v_{g s 1}=v_{\\mathrm{in}}-v_{\\text {out }}$, we obtain\n\n$$\n\\begin{equation*}\nv_{\\text {out }} / R_{s 1}-g_{m 1}\\left(v_{\\text {in }}-v_{\\text {out }}\\right)=0 \\tag{3.9}\n\\end{equation*}\n$$\n\nTo minimize errors in circuit equations, a consistent approach should be adopted when writing nodal equations. The method used here is as follows: The first term is always the node where currents are summed. This node voltage is multiplied by the sum of all admittances connected to it. The subsequent negative terms represent the adjacent node voltages, each multiplied by the connecting admittance. The final terms are any current sources, with a negative sign applied if the current flows into the node.\n\nSolving for $\\mathrm{v}_{\\text {out }} / \\mathrm{v}_{\\text {in }}$, we get\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{v_{\\text {out }}}{v_{\\text {in }}}=\\frac{g_{m 1}}{g_{m 1}+G_{s 1}}=\\frac{g_{m 1}}{g_{m 1}+g_{s 1}+g_{d s 1}+g_{d s}}=g_{m 1}\\left(\\frac{1}{g_{m 1}}\\left\\|\\frac{1}{g_{s 1}}\\right\\| r_{d s 1} \\| r_{d s 2}\\right) \\tag{3.10}\n\\end{equation*}\n$$\n\nimage_name: Fig. 3.7 The low-frequency model of the source-follower amplifier\ndescription:\n[\nname: g_m1v_gs1, type: VoltageControlledCurrentSource, ports: {Np: Vd1, Nn: Vs1}\nname: g_s1v_s1, type: VoltageControlledVoltageSource, ports: {Np: Vd1, Nn: Vs1}\nname: r_ds1, type: Resistor, value: r_ds1, ports: {N1: Vd1, N2: Vd1}\nname: r_ds2, type: Resistor, value: r_ds2, ports: {N1: Vs1, N2: GND}\n]\nextrainfo: This model represents a low-frequency analysis of a source-follower amplifier. It includes a voltage-controlled current source and a voltage-controlled voltage source, along with two resistors connected to ground. The input voltage is labeled Vin, and the output voltage is Vout, which corresponds to Vs1.\n\nFig. 3.7 The low-frequency model of the source-follower amplifier.\nwhere the notation $G_{s 1}=1 / R_{s 1}$ is used. ${ }^{1}$ Typically, $g_{s 1}$ is about one-tenth to one-fifth of $\\mathrm{g}_{\\mathrm{m} 1}$. Additionally, the transistor output admittances, $\\mathrm{g}_{\\mathrm{ds} 1}$ and $\\mathrm{g}_{\\mathrm{ds} 2}$, might be one-tenth of the body-effect parameter, $\\mathrm{g}_{\\mathrm{s} 1}$. Hence, the body-effect parameter is the primary cause of the gain being less than unity. It is also observed that at low frequencies, the stage is entirely unilateral. In other words, there is no signal feedback from the output to the input. This can be verified by applying a small test signal to the output and observing that it induces no voltage or current at the input.\n\nimage_name: Fig. 3.8 An equivalent small-signal model for the source follower.\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: Vout}\nname: g_m1v_gs1, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: Vout}\nname: Rs1, type: Resistor, value: Rs1, ports: {N1: Vout, N2: GND}\n]\nextrainfo: This circuit is a small-signal model of a source follower, featuring a voltage-controlled current source that represents the transconductance. The input is applied to Vin, and the output is taken from Vout. Rs1 is connected between Vout and ground.\n\nFig. 3.8 An equivalent small-signal model for the source follower."
},
{
    "text": "```\nimage_name:Fig. 3.6\ndescription:\n[\nname: I_bias, type: CurrentSource, value: I_bias, ports: {Np: VDD, Nn: P}\nname: Q1, type: NMOS, ports: {S: Vout, D: VDD, G: Vin}\nname: Q2, type: NMOS, ports: {S: GND, D: Vout, G: P}\nname: Q3, type: NMOS, ports: {S: GND, D: P, G: P}\n]\nextrainfo:This circuit is a source-follower stage that utilizes a current mirror to provide the bias current. Q1 functions as the source follower, while Q2 and Q3 collectively act as the active load that supplies Q1's bias current. This configuration is frequently employed as a voltage buffer.\n\nFig. 3.6 A source-follower stage with a current mirror supplying the bias current.\n\nAnother prevalent application of current mirrors is to furnish the bias current for source-follower amplifiers, as depicted in Fig. 3.6. In this instance, $Q_{1}$ serves as the source follower, and $Q_{2}$ acts as an active load that provides the bias current for $Q_{1}$. These amplifiers are widely used as voltage buffers and are often referred to as source followers. They are also known as common-drain amplifiers, given that the input and output nodes are at the gate and source, respectively, with the drain node at small-signal ground. Although the DC level of the output voltage differs from that of the input voltage, the ideal small-signal voltage gain is nearly unity. In practice, it is slightly less than unity. Despite not providing voltage gain, this circuit can generate current gain.\n\nKey Point: The source follower offers a voltage gain near unity, often limited by the body effect. It can deliver substantial current gain and is unilateral, making it a popular choice as a voltage buffer.\n\nA low-frequency small-signal model for analyzing this source-follower stage is presented in Fig. 3.7. It is important to note that the voltage-controlled current source, which models the body effect of MOS transistors, has been included due to the source not being at small-signal ground. The body effect significantly restricts the small-signal gain. In Fig. 3.7, $r_{\\mathrm{ds} 1}$ is in parallel with $r_{\\mathrm{ds} 2}$. Additionally, the voltage-controlled current source modeling the body effect generates a current proportional to the voltage across it. This relationship equates the body effect to a resistor of value $1 / \\mathrm{g}_{\\mathrm{s} 1}$, which is also in parallel with $r_{\\mathrm{ds} 1}$ and $r_{\\mathrm{ds} 2}$. Consequently, the small-signal model in Fig. 3.7 is equivalent to the simplified model in Fig. 3.8, where $R_{s 1}=r_{d s 1}\\left\\|r_{d s}\\right\\| 1 / g_{s 1}$. Writing the nodal equation at $v_{\\mathrm{out}}$, and noting that $v_{g s 1}=v_{\\mathrm{in}}-v_{\\text {out }}$, we obtain\n\n$$\n\\begin{equation*}\nv_{\\text {out }} / R_{s 1}-g_{m 1}\\left(v_{\\text {in }}-v_{\\text {out }}\\right)=0 \\tag{3.9}\n\\end{equation*}\n$$\n\nTo reduce errors in circuit equations, a consistent approach should be adopted when writing nodal equations. The method used here is as follows: The first term always represents the node where currents are summed. This node voltage is multiplied by the total admittances connected to the node. The subsequent negative terms are the adjacent node voltages, each multiplied by the respective connecting admittance. The final terms are any current sources, with a negative sign applied if the current flows into the node.\n\nSolving for $\\mathrm{v}_{\\text {out }} / \\mathrm{v}_{\\text {in }}$, we get\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{v_{\\text {out }}}{v_{\\text {in }}}=\\frac{g_{m 1}}{g_{m 1}+G_{s 1}}=\\frac{g_{m 1}}{g_{m 1}+g_{s 1}+g_{d s 1}+g_{d s}}=g_{m 1}\\left(\\frac{1}{g_{m 1}}\\left\\|\\frac{1}{g_{s 1}}\\right\\| r_{d s 1} \\| r_{d s 2}\\right) \\tag{3.10}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.7 The low-frequency model of the source-follower amplifier\ndescription:\n[\nname: g_m1v_gs1, type: VoltageControlledCurrentSource, ports: {Np: Vd1, Nn: Vs1}\nname: g_s1v_s1, type: VoltageControlledVoltageSource, ports: {Np: Vd1, Nn: Vs1}\nname: r_ds1, type: Resistor, value: r_ds1, ports: {N1: Vd1, N2: Vd1}\nname: r_ds2, type: Resistor, value: r_ds2, ports: {N1: Vs1, N2: GND}\n]\nextrainfo:This represents a low-frequency model of a source-follower amplifier. The circuit incorporates a voltage-controlled current source and a voltage-controlled voltage source, along with two resistors connected to ground. The input voltage is labeled Vin, and the output voltage is Vout, which corresponds to Vs1.\n\nFig. 3.7 The low-frequency model of the source-follower amplifier.\nwhere the notation $G_{s 1}=1 / R_{s 1}$ is employed. ${ }^{1}$ Typically, $g_{s 1}$ is about one-tenth to one-fifth of $\\mathrm{g}_{\\mathrm{m} 1}$. Additionally, the transistor output admittances, $\\mathrm{g}_{\\mathrm{ds} 1}$ and $\\mathrm{g}_{\\mathrm{ds} 2}$, are often one-tenth of the body-effect parameter, $\\mathrm{g}_{\\mathrm{s} 1}$. Thus, the body-effect parameter is the primary factor causing the gain to fall short of unity. It is also evident that at low frequencies, the stage is entirely unilateral. In other words, no signal transmission occurs from the output to the input. This can be verified by applying a small test signal to the output and observing that it induces no voltage or current at the input.\nimage_name:Fig. 3.8 An equivalent small-signal model for the source follower.\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: Vout}\nname: g_m1v_gs1, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: Vout}\nname: Rs1, type: Resistor, value: Rs1, ports: {N1: Vout, N2: GND}\n]\nextrainfo:This circuit is a small-signal model of a source follower featuring a voltage-controlled current source that represents the transconductance. The input is applied at Vin, and the output is taken from Vout. Rs1 is connected between Vout and ground.\n\nFig. 3.8 An equivalent small-signal model for the source follower.\n```"
},
{
    "text": "image_name:Fig. 3.6\ndescription:\n[\nname: I_bias, type: CurrentSource, value: I_bias, ports: {Np: VDD, Nn: P}\nname: Q1, type: NMOS, ports: {S: Vout, D: VDD, G: Vin}\nname: Q2, type: NMOS, ports: {S: GND, D: Vout, G: P}\nname: Q3, type: NMOS, ports: {S: GND, D: P, G: P}\n]\nextrainfo:The circuit features a source-follower stage with a current mirror providing the bias current. Q1 acts as the source follower, while Q2 and Q3 constitute the active load that supplies Q1's bias current. This configuration is typically employed as a voltage buffer.\n\nFig. 3.6 A source-follower stage utilizing a current mirror for bias current supply.\n\nA prevalent application of current mirrors is to furnish the bias current for source-follower amplifiers, as depicted in Fig. 3.6. In this scenario, $Q_{1}$ serves as the source follower, and $Q_{2}$ functions as an active load delivering the bias current to $Q_{1}$. These amplifiers, frequently utilized as voltage buffers, are often termed source followers. They are also known as common-drain amplifiers due to the input and output nodes being at the gate and source, respectively, with the drain at small-signal ground. While the dc output voltage level differs from the input's, the ideal small-signal voltage gain approaches unity, though in practice, it is slightly less. Despite lacking voltage gain, the circuit can produce current gain.\n\nKey Point: The source follower offers a voltage gain near unity, often limited by the body effect. It can deliver substantial current gain and is unilateral, making it a common choice for voltage buffering.\n\nA low-frequency small-signal model for this source-follower stage is illustrated in Fig. 3.7. The model incorporates a voltage-controlled current source to represent the MOS transistors' body effect, as the source is not at small-signal ground. The body effect significantly restricts the small-signal gain. In Fig. 3.7, $r_{\\mathrm{ds} 1}$ is in parallel with $r_{\\mathrm{ds} 2}$. The voltage-controlled current source modeling the body effect generates a current proportional to the voltage across it, equating the body effect to a resistor of size $1 / \\mathrm{g}_{\\mathrm{s} 1}$, also in parallel with $r_{\\mathrm{ds} 1}$ and $r_{\\mathrm{ds} 2}$. Thus, the model in Fig. 3.7 is equivalent to the simplified model in Fig. 3.8, where $R_{s 1}=r_{d s 1}\\left\\|r_{d s}\\right\\| 1 / g_{s 1}$. Writing the nodal equation at $v_{\\mathrm{out}}$ and noting $v_{g s 1}=v_{\\mathrm{in}}-v_{\\text {out }}$, we get\n\n$$\n\\begin{equation*}\nv_{\\text {out }} / R_{s 1}-g_{m 1}\\left(v_{\\text {in }}-v_{\\text {out }}\\right)=0 \\tag{3.9}\n\\end{equation*}\n$$\n\nTo reduce errors in circuit equations, a consistent approach should be used when writing nodal equations. The method here involves: The first term represents the node where currents are summed, multiplied by the total admittances connected to it. Subsequent negative terms are the adjacent node voltages, each multiplied by the connecting admittance. The final terms are any current sources, with a negative sign if the current flows into the node.\n\nSolving for $\\mathrm{v}_{\\text {out }} / \\mathrm{v}_{\\text {in }}$, we obtain\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{v_{\\text {out }}}{v_{\\text {in }}}=\\frac{g_{m 1}}{g_{m 1}+G_{s 1}}=\\frac{g_{m 1}}{g_{m 1}+g_{s 1}+g_{d s 1}+g_{d s}}=g_{m 1}\\left(\\frac{1}{g_{m 1}}\\left\\|\\frac{1}{g_{s 1}}\\right\\| r_{d s 1} \\| r_{d s 2}\\right) \\tag{3.10}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.7 The low-frequency model of the source-follower amplifier\ndescription:\n[\nname: g_m1v_gs1, type: VoltageControlledCurrentSource, ports: {Np: Vd1, Nn: Vs1}\nname: g_s1v_s1, type: VoltageControlledVoltageSource, ports: {Np: Vd1, Nn: Vs1}\nname: r_ds1, type: Resistor, value: r_ds1, ports: {N1: Vd1, N2: Vd1}\nname: r_ds2, type: Resistor, value: r_ds2, ports: {N1: Vs1, N2: GND}\n]\nextrainfo:This depicts a low-frequency model of a source-follower amplifier, including a voltage-controlled current source, a voltage-controlled voltage source, and two resistors grounded. The input voltage is labeled Vin, and the output voltage is Vout, equivalent to Vs1.\n\nFig. 3.7 The low-frequency model of the source-follower amplifier.\nwhere $G_{s 1}=1 / R_{s 1}$ is utilized. ${ }^{1}$ Typically, $g_{s 1}$ ranges from one-tenth to one-fifth of $\\mathrm{g}_{\\mathrm{m} 1}$. Additionally, the transistor output admittances, $\\mathrm{g}_{\\mathrm{ds} 1}$ and $\\mathrm{g}_{\\mathrm{ds} 2}$, may be one-tenth of the body-effect parameter, $\\mathrm{g}_{\\mathrm{s} 1}$. Hence, the body-effect parameter is the primary cause of the gain falling short of unity. It is also notable that at low frequencies, the stage is entirely unilateral, meaning no signal flows from output to input. This is evident by applying a small test signal to the output and observing no induced voltage or current at the input.\n\nimage_name:Fig. 3.8 An equivalent small-signal model for the source follower.\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: Vout}\nname: g_m1v_gs1, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: Vout}\nname: Rs1, type: Resistor, value: Rs1, ports: {N1: Vout, N2: GND}\n]\nextrainfo:This represents a small-signal model of a source follower, featuring a voltage-controlled current source for transconductance. The input is applied at Vin, and the output is taken from Vout. Rs1 is connected between Vout and ground.\n\nFig. 3.8 An equivalent small-signal model for the source follower."
},
{
    "text": "```\nimage_name: Fig. 3.6\ndescription:\n[\nname: I_bias, type: CurrentSource, value: I_bias, ports: {Np: VDD, Nn: P}\nname: Q1, type: NMOS, ports: {S: Vout, D: VDD, G: Vin}\nname: Q2, type: NMOS, ports: {S: GND, D: Vout, G: P}\nname: Q3, type: NMOS, ports: {S: GND, D: P, G: P}\n]\nextrainfo: This circuit features a source-follower stage with a current mirror providing the bias current. Q1 acts as the source follower, while Q2 and Q3 constitute the active load that supplies Q1's bias current. This configuration is widely used as a voltage buffer.\n\nFig. 3.6 A source-follower stage with a current mirror supplying the bias current.\n\nCurrent mirrors are also frequently employed to supply the bias current for source-follower amplifiers, as depicted in Fig. 3.6. In this instance, $Q_{1}$ serves as the source follower, and $Q_{2}$ acts as an active load that provides the bias current for $Q_{1}$. These amplifiers, commonly utilized as voltage buffers, are often referred to as source followers. Additionally, they are known as common-drain amplifiers due to the input and output nodes being at the gate and source, respectively, with the drain at small-signal ground. While the dc output voltage level differs from the input's dc level, the ideal small-signal voltage gain is nearly unity, though in practice, it is slightly less. Despite lacking voltage gain, this circuit can produce current gain.\n\nKey Point: The source follower offers a voltage gain near unity, often limited by the body effect. It can deliver substantial current gain and is unilateral, making it suitable as a voltage buffer.\n\nA low-frequency small-signal model for this source-follower stage is illustrated in Fig. 3.7. Note the inclusion of a voltage-controlled current source to model the MOS transistors' body effect, as the source is not at small-signal ground. The body effect significantly restricts the small-signal gain. In Fig. 3.7, $r_{\\mathrm{ds} 1}$ is in parallel with $r_{\\mathrm{ds} 2}$. The voltage-controlled current source modeling the body effect generates a current proportional to the voltage across it, effectively acting as a resistor of size $1 / \\mathrm{g}_{\\mathrm{s} 1}$, also in parallel with $r_{\\mathrm{ds} 1}$ and $r_{\\mathrm{ds} 2}$. Thus, the model in Fig. 3.7 is equivalent to the simplified model in Fig. 3.8, where $R_{s 1}=r_{d s 1}\\left\\|r_{d s}\\right\\| 1 / g_{s 1}$. Writing the nodal equation at $v_{\\mathrm{out}}$ and noting $v_{g s 1}=v_{\\mathrm{in}}-v_{\\text {out }}$, we get\n\n$$\n\\begin{equation*}\nv_{\\text {out }} / R_{s 1}-g_{m 1}\\left(v_{\\text {in }}-v_{\\text {out }}\\right)=0 \\tag{3.9}\n\\end{equation*}\n$$\n\nTo reduce errors in circuit equations, a consistent approach should be used when writing nodal equations. The method used here involves: the first term being the node where currents are summed, multiplied by the total admittances connected to it. Subsequent negative terms are the adjacent node voltages, each multiplied by the connecting admittance. The final terms are any current sources, with a negative sign if the current flows into the node.\n\nSolving for $\\mathrm{v}_{\\text {out }} / \\mathrm{v}_{\\text {in }}$, we obtain\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{v_{\\text {out }}}{v_{\\text {in }}}=\\frac{g_{m 1}}{g_{m 1}+G_{s 1}}=\\frac{g_{m 1}}{g_{m 1}+g_{s 1}+g_{d s 1}+g_{d s}}=g_{m 1}\\left(\\frac{1}{g_{m 1}}\\left\\|\\frac{1}{g_{s 1}}\\right\\| r_{d s 1} \\| r_{d s 2}\\right) \\tag{3.10}\n\\end{equation*}\n$$\n\nimage_name: Fig. 3.7 The low-frequency model of the source-follower amplifier\ndescription:\n[\nname: g_m1v_gs1, type: VoltageControlledCurrentSource, ports: {Np: Vd1, Nn: Vs1}\nname: g_s1v_s1, type: VoltageControlledVoltageSource, ports: {Np: Vd1, Nn: Vs1}\nname: r_ds1, type: Resistor, value: r_ds1, ports: {N1: Vd1, N2: Vd1}\nname: r_ds2, type: Resistor, value: r_ds2, ports: {N1: Vs1, N2: GND}\n]\nextrainfo: This model represents a low-frequency analysis of a source-follower amplifier, incorporating a voltage-controlled current source, a voltage-controlled voltage source, and two resistors connected to ground. The input voltage is labeled Vin, and the output voltage is Vout, equivalent to Vs1.\n\nFig. 3.7 The low-frequency model of the source-follower amplifier.\nwhere $G_{s 1}=1 / R_{s 1}$ is used. ${ }^{1}$ Typically, $g_{s 1}$ is about one-tenth to one-fifth of $\\mathrm{g}_{\\mathrm{m} 1}$. Additionally, the transistor output admittances, $\\mathrm{g}_{\\mathrm{ds} 1}$ and $\\mathrm{g}_{\\mathrm{ds} 2}$, might be one-tenth of the body-effect parameter, $\\mathrm{g}_{\\mathrm{s} 1}$. Thus, the body-effect parameter is the primary factor reducing the gain below unity. Also, at low frequencies, the stage is entirely unilateral, meaning no signal flows from output to input. This is evident by applying a small test signal to the output and observing no induced voltage or current at the input.\n\nimage_name: Fig. 3.8 An equivalent small-signal model for the source follower.\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: Vout}\nname: g_m1v_gs1, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: Vout}\nname: Rs1, type: Resistor, value: Rs1, ports: {N1: Vout, N2: GND}\n]\nextrainfo: This circuit is a small-signal model of a source follower, featuring a voltage-controlled current source representing the transconductance. The input is applied at Vin, and the output is taken from Vout. Rs1 is connected between Vout and ground.\n\nFig. 3.8 An equivalent small-signal model for the source follower.\n```"
},
{
    "text": "image_name: Fig. 3.6\ndescription:\n[\nname: I_bias, type: CurrentSource, value: I_bias, ports: {Np: VDD, Nn: P}\nname: Q1, type: NMOS, ports: {S: Vout, D: VDD, G: Vin}\nname: Q2, type: NMOS, ports: {S: GND, D: Vout, G: P}\nname: Q3, type: NMOS, ports: {S: GND, D: P, G: P}\n]\nextrainfo: This circuit comprises a source-follower stage with a current mirror providing the bias current. Q1 functions as the source follower, while Q2 and Q3 together form the active load that supplies Q1's bias current. This configuration is frequently employed as a voltage buffer.\n\nFig. 3.6 A source-follower stage featuring a current mirror for bias current supply.\n\nAnother common application of current mirrors is to furnish the bias current for source-follower amplifiers, as depicted in Fig. 3.6. In this instance, $Q_{1}$ acts as the source follower, and $Q_{2}$ serves as the active load that delivers the bias current to $Q_{1}$. These amplifiers, often utilized as voltage buffers, are also known as source followers. Additionally, they are termed common-drain amplifiers due to the input and output nodes being at the gate and source, respectively, with the drain at small-signal ground. While the dc output voltage level differs from the input's dc level, the ideal small-signal voltage gain is nearly unity, though in practice, it is slightly less. Despite lacking voltage gain, this circuit can provide current gain.\n\nKey Point: The source follower offers a voltage gain near unity, typically limited by the body effect. It can deliver substantial current gain and is unilateral, making it a popular choice for voltage buffering.\n\nA low-frequency small-signal model for this source-follower stage is illustrated in Fig. 3.7. Note that the model includes a voltage-controlled current source representing the body effect of MOS transistors, as the source is not at small-signal ground. The body effect significantly restricts the small-signal gain. In Fig. 3.7, $r_{\\mathrm{ds} 1}$ is in parallel with $r_{\\mathrm{ds} 2}$. The voltage-controlled current source modeling the body effect generates a current proportional to the voltage across it, equating the body effect to a resistor of size $1 / \\mathrm{g}_{\\mathrm{s} 1}$, also in parallel with $r_{\\mathrm{ds} 1}$ and $r_{\\mathrm{ds} 2}$. Thus, the model in Fig. 3.7 is equivalent to the simplified model in Fig. 3.8, where $R_{s 1}=r_{d s 1}\\left\\|r_{d s}\\right\\| 1 / g_{s 1}$. Writing the nodal equation at $v_{\\mathrm{out}}$ and noting $v_{g s 1}=v_{\\mathrm{in}}-v_{\\text {out }}$, we get\n\n$$\n\\begin{equation*}\nv_{\\text {out }} / R_{s 1}-g_{m 1}\\left(v_{\\text {in }}-v_{\\text {out }}\\right)=0 \\tag{3.9}\n\\end{equation*}\n$$\n\nTo reduce errors in circuit equations, a consistent approach should be adopted when writing nodal equations. The method used here is: The first term is always the node voltage where currents are summed, multiplied by the total admittances connected to that node. Subsequent negative terms are the adjacent node voltages, each multiplied by the connecting admittance. The final terms are any current sources, with a negative sign if the current flows into the node.\n\nSolving for $\\mathrm{v}_{\\text {out }} / \\mathrm{v}_{\\text {in }}$, we obtain\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{v_{\\text {out }}}{v_{\\text {in }}}=\\frac{g_{m 1}}{g_{m 1}+G_{s 1}}=\\frac{g_{m 1}}{g_{m 1}+g_{s 1}+g_{d s 1}+g_{d s}}=g_{m 1}\\left(\\frac{1}{g_{m 1}}\\left\\|\\frac{1}{g_{s 1}}\\right\\| r_{d s 1} \\| r_{d s 2}\\right) \\tag{3.10}\n\\end{equation*}\n$$\n\nimage_name: Fig. 3.7\ndescription:\n[\nname: g_m1v_gs1, type: VoltageControlledCurrentSource, ports: {Np: Vd1, Nn: Vs1}\nname: g_s1v_s1, type: VoltageControlledVoltageSource, ports: {Np: Vd1, Nn: Vs1}\nname: r_ds1, type: Resistor, value: r_ds1, ports: {N1: Vd1, N2: Vd1}\nname: r_ds2, type: Resistor, value: r_ds2, ports: {N1: Vs1, N2: GND}\n]\nextrainfo: This depicts a low-frequency model of a source-follower amplifier. It includes a voltage-controlled current source and a voltage-controlled voltage source, along with two resistors connected to ground. The input voltage is labeled Vin, and the output voltage is Vout, equivalent to Vs1.\n\nFig. 3.7 The low-frequency model of the source-follower amplifier.\nwhere $G_{s 1}=1 / R_{s 1}$ is employed. ${ }^{1}$ Typically, $g_{s 1}$ is about one-tenth to one-fifth of $\\mathrm{g}_{\\mathrm{m} 1}$. Additionally, the transistor output admittances, $\\mathrm{g}_{\\mathrm{ds} 1}$ and $\\mathrm{g}_{\\mathrm{ds} 2}$, might be one-tenth of the body-effect parameter, $\\mathrm{g}_{\\mathrm{s} 1}$. Hence, the body-effect parameter is the primary cause of the gain falling short of unity. Also, at low frequencies, the stage is entirely unilateral, meaning no signal flows from output to input. This can be verified by applying a small test signal to the output and observing no induced voltage or current at the input.\n\nimage_name: Fig. 3.8\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: Vout}\nname: g_m1v_gs1, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: Vout}\nname: Rs1, type: Resistor, value: Rs1, ports: {N1: Vout, N2: GND}\n]\nextrainfo: This circuit represents a small-signal model of a source follower, featuring a voltage-controlled current source for the transconductance. The input is applied at Vin, and the output is derived from Vout. Rs1 is connected between Vout and ground.\n\nFig. 3.8 An equivalent small-signal model for the source follower."
},
{
    "text": "image_name:Fig. 3.6\ndescription:\n[\nname: I_bias, type: CurrentSource, value: I_bias, ports: {Np: VDD, Nn: P}\nname: Q1, type: NMOS, ports: {S: Vout, D: VDD, G: Vin}\nname: Q2, type: NMOS, ports: {S: GND, D: Vout, G: P}\nname: Q3, type: NMOS, ports: {S: GND, D: P, G: P}\n]\nextrainfo:The circuit consists of a source-follower stage with a current mirror providing the bias current. Q1 acts as the source follower, while Q2 and Q3 together form the active load that supplies Q1's bias current. This configuration is frequently utilized as a voltage buffer.\n\nFig. 3.6 Illustration of a source-follower stage with a current mirror for bias current supply.\n\nA prevalent application of current mirrors is to deliver the bias current for source-follower amplifiers, as depicted in Fig. 3.6. In this instance, $Q_{1}$ serves as the source follower, and $Q_{2}$ acts as the active load that furnishes the bias current for $Q_{1}$. These amplifiers, often employed as voltage buffers, are also known as source followers or common-drain amplifiers, given that the input and output are connected to the gate and source, respectively, with the drain at small-signal ground. While the dc output voltage differs from the input's dc level, the small-signal voltage gain ideally approaches unity, though it is slightly less in practice. Despite lacking voltage gain, the circuit can provide current gain.\n\nKey Point: The source follower offers a voltage gain near unity, typically constrained by the body effect. It can deliver substantial current gain and is unilateral, making it a popular choice for voltage buffering.\n\nA low-frequency small-signal model for this source-follower stage is presented in Fig. 3.7. Note the inclusion of a voltage-controlled current source to account for the body effect of MOS transistors, as the source is not at small-signal ground. The body effect significantly limits the small-signal gain. In Fig. 3.7, $r_{\\mathrm{ds} 1}$ is in parallel with $r_{\\mathrm{ds} 2}$. The voltage-controlled current source modeling the body effect generates a current proportional to the voltage across it, effectively acting as a resistor of value $1 / \\mathrm{g}_{\\mathrm{s} 1}$, also in parallel with $r_{\\mathrm{ds} 1}$ and $r_{\\mathrm{ds} 2}$. Consequently, the model in Fig. 3.7 simplifies to that in Fig. 3.8, where $R_{s 1}=r_{d s 1}\\left\\|r_{d s}\\right\\| 1 / g_{s 1}$. Writing the nodal equation at $v_{\\mathrm{out}}$, with $v_{g s 1}=v_{\\mathrm{in}}-v_{\\text {out }}$, yields\n\n$$\n\\begin{equation*}\nv_{\\text {out }} / R_{s 1}-g_{m 1}\\left(v_{\\text {in }}-v_{\\text {out }}\\right)=0 \\tag{3.9}\n\\end{equation*}\n$$\n\nTo reduce errors in circuit equations, a consistent approach should be adopted when formulating nodal equations. The method used here involves: the first term representing the node voltage where currents are summed, multiplied by the total admittances connected to that node. Subsequent negative terms are the adjacent node voltages, each multiplied by the respective connecting admittance. The final terms are any current sources, with a negative sign if the current flows into the node.\n\nSolving for $\\mathrm{v}_{\\text {out }} / \\mathrm{v}_{\\text {in }}$ results in\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{v_{\\text {out }}}{v_{\\text {in }}}=\\frac{g_{m 1}}{g_{m 1}+G_{s 1}}=\\frac{g_{m 1}}{g_{m 1}+g_{s 1}+g_{d s 1}+g_{d s}}=g_{m 1}\\left(\\frac{1}{g_{m 1}}\\left\\|\\frac{1}{g_{s 1}}\\right\\| r_{d s 1} \\| r_{d s 2}\\right) \\tag{3.10}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.7 The low-frequency model of the source-follower amplifier\ndescription:\n[\nname: g_m1v_gs1, type: VoltageControlledCurrentSource, ports: {Np: Vd1, Nn: Vs1}\nname: g_s1v_s1, type: VoltageControlledVoltageSource, ports: {Np: Vd1, Nn: Vs1}\nname: r_ds1, type: Resistor, value: r_ds1, ports: {N1: Vd1, N2: Vd1}\nname: r_ds2, type: Resistor, value: r_ds2, ports: {N1: Vs1, N2: GND}\n]\nextrainfo:This figure depicts a low-frequency model of a source-follower amplifier, incorporating a voltage-controlled current source, a voltage-controlled voltage source, and two resistors connected to ground. The input voltage is labeled Vin, and the output voltage is Vout, equivalent to Vs1.\n\nFig. 3.7 The low-frequency model of the source-follower amplifier.\nwhere $G_{s 1}=1 / R_{s 1}$ is utilized. ${ }^{1}$ Typically, $g_{s 1}$ ranges from one-tenth to one-fifth of $\\mathrm{g}_{\\mathrm{m} 1}$. Additionally, the transistor output admittances, $\\mathrm{g}_{\\mathrm{ds} 1}$ and $\\mathrm{g}_{\\mathrm{ds} 2}$, are often one-tenth of the body-effect parameter, $\\mathrm{g}_{\\mathrm{s} 1}$. Hence, the body-effect parameter is the primary factor reducing the gain below unity. It is also observed that at low frequencies, the stage is entirely unilateral, meaning no signal transmission occurs from the output to the input. This can be verified by applying a small test signal to the output and observing no induced voltage or current at the input.\n\nimage_name:Fig. 3.8 An equivalent small-signal model for the source follower.\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: Vout}\nname: g_m1v_gs1, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: Vout}\nname: Rs1, type: Resistor, value: Rs1, ports: {N1: Vout, N2: GND}\n]\nextrainfo:This circuit represents a small-signal model of a source follower, featuring a voltage-controlled current source for transconductance. The input is applied at Vin, and the output is taken from Vout. Rs1 is connected between Vout and ground.\n\nFig. 3.8 An equivalent small-signal model for the source follower."
},
{
    "text": "image_name:Fig. 3.6\ndescription:\n[\nname: I_bias, type: CurrentSource, value: I_bias, ports: {Np: VDD, Nn: P}\nname: Q1, type: NMOS, ports: {S: Vout, D: VDD, G: Vin}\nname: Q2, type: NMOS, ports: {S: GND, D: Vout, G: P}\nname: Q3, type: NMOS, ports: {S: GND, D: P, G: P}\n]\nextrainfo:The circuit comprises a source-follower stage with a current mirror providing the bias current. Q1 acts as the source follower, while Q2 and Q3 together form the active load that supplies Q1's bias current. This configuration is widely used as a voltage buffer.\n\nFig. 3.6 Illustration of a source-follower stage featuring a current mirror for bias current supply.\n\nA common application of current mirrors is to furnish the bias current for source-follower amplifiers, as depicted in Fig. 3.6. In this scenario, $Q_{1}$ serves as the source follower, and $Q_{2}$ functions as the active load that delivers the bias current to $Q_{1}$. These amplifiers, frequently employed as voltage buffers, are often termed source followers. They are also known as common-drain amplifiers, given that the input and output nodes are situated at the gate and source, respectively, with the drain node at small-signal ground. Although the dc output voltage level differs from the input's dc level, the ideal small-signal voltage gain is nearly unity, though in practice, it is slightly less. Despite lacking voltage gain, this circuit can produce current gain.\n\nKey Point: The source follower offers a voltage gain close to unity, typically limited by the body effect. It can deliver substantial current gain and is unilateral, making it a popular choice for voltage buffering.\n\nA low-frequency small-signal model for this source-follower stage is presented in Fig. 3.7. It includes a voltage-controlled current source that accounts for the body effect of MOS transistors, necessary because the source is not at small-signal ground. The body effect significantly restricts the small-signal gain. In Fig. 3.7, $r_{\\mathrm{ds} 1}$ is in parallel with $r_{\\mathrm{ds} 2}$. The voltage-controlled current source modeling the body effect generates a current proportional to the voltage across it, effectively acting as a resistor of value $1 / \\mathrm{g}_{\\mathrm{s} 1}$, also in parallel with $r_{\\mathrm{ds} 1}$ and $r_{\\mathrm{ds} 2}$. Consequently, the small-signal model in Fig. 3.7 corresponds to the simplified model in Fig. 3.8, where $R_{s 1}=r_{d s 1}\\left\\|r_{d s}\\right\\| 1 / g_{s 1}$. Writing the nodal equation at $v_{\\mathrm{out}}$ and noting $v_{g s 1}=v_{\\mathrm{in}}-v_{\\text {out }}$, we derive\n\n$$\n\\begin{equation*}\nv_{\\text {out }} / R_{s 1}-g_{m 1}\\left(v_{\\text {in }}-v_{\\text {out }}\\right)=0 \\tag{3.9}\n\\end{equation*}\n$$\n\nTo minimize errors in circuit equations, a consistent approach should be adopted when formulating nodal equations. The method used here is as follows: The first term always represents the node where currents are summed, with the node voltage multiplied by the total admittances connected to it. Subsequent negative terms are the adjacent node voltages, each multiplied by the respective connecting admittance. The final terms are any current sources, with a negative sign applied if the current flows into the node.\n\nSolving for $\\mathrm{v}_{\\text {out }} / \\mathrm{v}_{\\text {in }}$, we obtain\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{v_{\\text {out }}}{v_{\\text {in }}}=\\frac{g_{m 1}}{g_{m 1}+G_{s 1}}=\\frac{g_{m 1}}{g_{m 1}+g_{s 1}+g_{d s 1}+g_{d s}}=g_{m 1}\\left(\\frac{1}{g_{m 1}}\\left\\|\\frac{1}{g_{s 1}}\\right\\| r_{d s 1} \\| r_{d s 2}\\right) \\tag{3.10}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.7 The low-frequency model of the source-follower amplifier\ndescription:\n[\nname: g_m1v_gs1, type: VoltageControlledCurrentSource, ports: {Np: Vd1, Nn: Vs1}\nname: g_s1v_s1, type: VoltageControlledVoltageSource, ports: {Np: Vd1, Nn: Vs1}\nname: r_ds1, type: Resistor, value: r_ds1, ports: {N1: Vd1, N2: Vd1}\nname: r_ds2, type: Resistor, value: r_ds2, ports: {N1: Vs1, N2: GND}\n]\nextrainfo:This model represents a low-frequency analysis of a source-follower amplifier, incorporating a voltage-controlled current source, a voltage-controlled voltage source, and two resistors grounded. The input voltage is labeled Vin, and the output voltage is Vout, equivalent to Vs1.\n\nFig. 3.7 The low-frequency model of the source-follower amplifier.\nwhere $G_{s 1}=1 / R_{s 1}$ is utilized. ${ }^{1}$ Typically, $g_{s 1}$ ranges from one-tenth to one-fifth of $\\mathrm{g}_{\\mathrm{m} 1}$. Additionally, the transistor output admittances, $\\mathrm{g}_{\\mathrm{ds} 1}$ and $\\mathrm{g}_{\\mathrm{ds} 2}$, are often one-tenth of the body-effect parameter, $\\mathrm{g}_{\\mathrm{s} 1}$. Thus, the body-effect parameter is the primary factor reducing the gain below unity. It is also observed that at low frequencies, the stage is entirely unilateral, meaning no signal transmission occurs from output to input. This can be verified by applying a small test signal to the output and observing no induced voltage or current at the input.\n\nimage_name:Fig. 3.8 An equivalent small-signal model for the source follower.\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: Vout}\nname: g_m1v_gs1, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: Vout}\nname: Rs1, type: Resistor, value: Rs1, ports: {N1: Vout, N2: GND}\n]\nextrainfo:This circuit is a simplified small-signal model of a source follower, featuring a voltage-controlled current source that represents the transconductance. The input is applied at Vin, and the output is taken from Vout, with Rs1 connecting Vout to ground.\n\nFig. 3.8 An equivalent small-signal model for the source follower."
},
{
    "text": "image_name:Fig. 3.9\ndescription:\n[\nname: Q3, type: PMOS, ports: {S: VDD, D: P, G: P}\nname: Q2, type: PMOS, ports: {S: VDD, D: Vout, G: P}\nname: Q1, type: NMOS, ports: {S: Vin, D: Vout, G: Vbias}\nname: Ibias, type: CurrentSource, ports: {Np: P, Nn: GND}\n]\nextrainfo:This circuit is a common-gate amplifier featuring a current-mirror active load. It is designed for low input impedance and is typically used for terminating transmission lines or as the initial stage of an amplifier where the input signal is a current.\n\nFig. 3.9 A common-gate amplifier with a current-mirror active load.\n\nShown in Fig. 3.9 is a common-gate amplifier with an active load, often employed as a gain stage when a low input impedance is required. For instance, it might be configured to have an input impedance of $50 \\Omega$ to match a $50-\\Omega$ transmission line. Another frequent application is as the first stage of an amplifier where the input signal is a current; in such scenarios, a low input impedance is essential to ensure the entire current signal is drawn into the amplifier, avoiding loss in the signal source impedance. Besides its low input impedance, the common-gate amplifier resembles the common-source amplifier; both apply the input across $\\mathrm{v}_{\\mathrm{gs}}$ with opposite polarities, and the output is taken at the drain. Consequently, the small-signal gain magnitude in both cases is approximately the product of $g_{m}$ and the total impedance at the drain.\n\nUsing basic small-signal analysis, when the impedance at $\\mathrm{V}_{\\text {out }}$ (in this instance, the output impedance of the current mirror formed by $Q_{2}$) is significantly less than $r_{d s 1}$, the input impedance, $r_{\\text {out }}$, is determined to be $1 / g_{m 1}$ at low frequencies. However, in integrated circuits, the impedance at $V_{\\text {out }}$ often equals or exceeds $r_{\\mathrm{ds} 1}$. In such cases, the low-frequency input impedance can be substantially higher than $1 / \\mathrm{g}_{\\mathrm{m} 1}$. To understand this, consider the small-signal model depicted in Fig. 3.10, which includes a voltage-dependent current source modeling the body effect. Note that $\\mathrm{v}_{\\mathrm{gs} 1}=-\\mathrm{v}_{\\mathrm{s} 1}$, allowing the two current sources to be combined into one, as shown in Fig. 3.11. This simplification is always feasible for a transistor with a grounded gate in a small-signal model and greatly simplifies accounting for the body effect. Specifically, one can disregard the body effect for transistors with grounded gates and later replace $\\mathrm{g}_{\\mathrm{mi}}$ with $\\mathrm{g}_{\\mathrm{mi}}+\\mathrm{g}_{\\mathrm{si}}$. However, for this example, the body-effect parameter is included throughout the analysis.\n\nAt node $v_{\\text {out }}$, we have\n\n$$\n\\begin{equation*}\nv_{\\text {out }}\\left(G_{L}+g_{d s 1}\\right)-v_{s 1} g_{d s 1}-\\left(g_{m 1}+g_{s 1}\\right) v_{s 1}=0 \\tag{3.16}\n\\end{equation*}\n$$\n\nRearranging slightly, we obtain\n\n$$\n\\begin{equation*}\n\\frac{v_{\\text {out }}}{v_{\\mathrm{s} 1}}=\\frac{g_{\\mathrm{m} 1}+g_{\\mathrm{s} 1}+g_{\\mathrm{ds} 1}}{G_{\\mathrm{L}}+g_{\\mathrm{ds} 1}}=\\left(g_{\\mathrm{m} 1}+g_{\\mathrm{s} 1}+g_{\\mathrm{ds} 1}\\right)\\left(R_{\\mathrm{L}} \\| r_{\\mathrm{ds} 1}\\right) \\cong g_{\\mathrm{m} 1}\\left(R_{\\mathrm{L}} \\| r_{\\mathrm{ds} 1}\\right) \\tag{3.17}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.10 The small-signal model of the common-gate amplifier at low frequencies\ndescription:\n[\nname: Vgs1, type: VoltageSource, value: Vgs1, ports: {Np: GND, Nn: Vs1}\nname: Rs, type: Resistor, value: Rs, ports: {N1: Vs1, N2: Vin}\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: gm1Vgs1, type: VoltageControlledCurrentSource, ports: {Np: Vout, Nn: Vs1}\nname: gs1Vs1, type: VoltageControlledCurrentSource, ports: {Np: Vout, Nn: Vs1}\nname: rds1, type: Resistor, value: rds1, ports: {N1: Vout, N2: Vs1}\nname: RL, type: Resistor, value: RL, ports: {N1: Vout, N2: GND}\n]\nextrainfo:This circuit represents a small-signal model of a common-gate amplifier at low frequencies, incorporating voltage sources, resistors, and voltage-controlled current sources. The output voltage is measured across RL, and the input is applied to Vin.\n\nFig. 3.10 The small-signal model of the common-gate amplifier at low frequencies.\nimage_name:Fig. 3.10\ndescription:\n[\nname: Vs1, type: VoltageSource, value: Vs1, ports: {Np: GND, Nn: Vs1}\nname: Rs, type: Resistor, value: Rs, ports: {N1: Vs1, N2: Vin}\nname: rds1, type: Resistor, value: rds1, ports: {N1: Vout, N2: Vs1}\nname: RL, type: Resistor, value: RL, ports: {N1: Vout, N2: GND}\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: (gm1+gs1)Vs1, type: VoltageControlledVoltageSource, ports: {N1: Vout, N2: Vs1}\n]\nextrainfo:This circuit is a small-signal model of a common-gate amplifier at low frequencies, featuring voltage sources, resistors, and voltage-controlled current sources. The output voltage is measured across RL, and the input is applied to Vin.\n\nFig. 3.11 A simplified small-signal model of the common-gate amplifier.\n\nThe current entering the source of $Q_{1}$ is given by\n\n$$\n\\begin{equation*}\ni_{s}=v_{s 1}\\left(g_{m 1}+g_{s 1}+g_{d s 1}\\right)-v_{\\text {out }} g_{d s 1} \\tag{3.18}\n\\end{equation*}\n$$\n\nCombining (3.17) and (3.18) to determine the input admittance, $\\mathrm{g}_{\\mathrm{in}}=1 / \\mathrm{r}_{\\mathrm{in}}$, we get\n\n$$\n\\begin{equation*}\ng_{\\mathrm{in}} \\equiv \\frac{i_{\\mathrm{s}}}{v_{s 1}} \\equiv \\frac{g_{\\mathrm{m} 1}+g_{\\mathrm{s} 1}+g_{\\mathrm{ds} 1}}{1+\\frac{g_{\\mathrm{ds} 1}}{G_{\\mathrm{L}}}} \\cong \\frac{g_{\\mathrm{m} 1}}{1+\\frac{g_{\\mathrm{ds} 1}}{G_{\\mathrm{L}}}} \\tag{3.19}\n\\end{equation*}\n$$\n\nAlternatively, we have\n\n$$\n\\begin{equation*}\nr_{\\text {in }}=\\frac{1}{g_{i n}}=\\left(\\frac{1}{g_{m 1}}\\left\\|\\frac{1}{g_{s 1}}\\right\\| r_{d s 1}\\right)\\left(1+\\frac{R_{L}}{r_{d s 1}}\\right) \\cong \\frac{1}{g_{m 1}}\\left(1+\\frac{R_{L}}{r_{d s 1}}\\right) \\tag{3.20}\n\\end{equation*}\n$$\n\nKey Point: The common-gate amplifier offers a voltage gain similar to that of the common-source amplifier but with a relatively low input resistance around $1 / \\mathrm{g}_{\\mathrm{m}}$. However, the input resistance can be higher when the amplifier has a substantial small-signal load resistance.\n\nWith the p-channel active load shown in Fig. 3.9, $R_{\\mathrm{L}}=r_{\\mathrm{ds} 2}$. Since $R_{L}$ is approximately equal to $r_{\\text {ds }}$ in this case, the input impedance, $r_{i n}$, is about $2 / g_{m 1}$ for low frequencies—twice the expected value of $1 / \\mathrm{g}_{\\mathrm{m} 1}$. This increased input impedance must be considered in applications like transmission-line terminations. In some instances, the current-mirror output impedance provided by $Q_{2}$ is much larger than $r_{d s 1}$ (i.e., $\\mathrm{R}_{\\mathrm{L}}>>\\mathrm{r}_{\\mathrm{dst}}$), resulting in a significantly higher input impedance for this common-gate amplifier. This elevated input impedance is often observed in integrated circuits and is not widely recognized.\n\nThe attenuation from the input source to the transistor source can be significant for a common-gate amplifier when $R_{s}$ is large. This attenuation is expressed as\n\n$$\n\\begin{equation*}\n\\frac{v_{s 1}}{v_{\\text {in }}}=\\frac{r_{\\text {in }}}{R_{s}+r_{\\text {in }}} \\tag{3.21}\n\\end{equation*}\n$$\n\nUsing (3.20) to substitute $r_{\\text {in }}$, we have\n\n$$\n\\begin{equation*}\n\\frac{v_{s 1}}{v_{i n}}=\\frac{\\left(\\frac{1}{g_{m 1}}\\left\\|\\frac{1}{g_{s 1}}\\right\\| r_{d s 1}\\right)\\left(1+\\frac{R_{L}}{r_{d s 1}}\\right)}{R_{s}+\\left(\\frac{1}{g_{m 1}}\\left\\|\\frac{1}{g_{s 1}}\\right\\| r_{d s 1}\\right)\\left(1+\\frac{R_{L}}{r_{d s 1}}\\right)}=\\frac{1}{1+R_{s}\\left(\\frac{g_{m 1}+g_{s 1}+g_{d s 1}}{1+R_{L} / r_{d s 1}}\\right)} \\tag{3.22}\n\\end{equation*}\n$$\n\nUsing (3.17) and (3.22), the overall dc gain is found to be\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{v_{\\text {out }}}{v_{\\text {in }}}=\\frac{\\left(g_{m 1}+g_{s 1}+g_{d s 1}\\right)\\left(R_{L} \\| r_{d s 1}\\right)}{1+R_{s}\\left(\\frac{g_{m 1}+g_{s 1}+g_{d s 1}}{1+R_{L} / r_{d s 1}}\\right)} \\cong \\frac{g_{m 1}\\left(R_{L} \\| r_{d s 1}\\right)}{1+R_{s}\\left(\\frac{g_{m 1}+g_{s 1}+g_{d s 1}}{1+R_{L} / r_{d s 1}}\\right)} \\tag{3.23}\n\\end{equation*}\n$$"
},
{
    "text": "image_name:Fig. 3.9\ndescription:\n[\nname: Q3, type: PMOS, ports: {S: VDD, D: P, G: P}\nname: Q2, type: PMOS, ports: {S: VDD, D: Vout, G: P}\nname: Q1, type: NMOS, ports: {S: Vin, D: Vout, G: Vbias}\nname: Ibias, type: CurrentSource, ports: {Np: P, Nn: GND}\n]\nextrainfo:This circuit is a common-gate amplifier featuring a current-mirror active load. It is engineered for low input impedance and is frequently utilized to terminate transmission lines or serve as the initial stage of an amplifier where the input signal is a current.\n\nFig. 3.9 A common-gate amplifier with a current-mirror active load.\n\nIllustrated in Fig. 3.9 is a common-gate amplifier with an active load, often employed as a gain stage when a low input impedance is required. For instance, it might be designed to have an input impedance of $50 \\Omega$ to match a $50-\\Omega$ transmission line. Another typical application is as the first stage of an amplifier where the input signal is a current; in such scenarios, a low input impedance is essential to ensure the entire current signal is drawn into the amplifier, with none lost in the signal source impedance. Besides its low input impedance, the common-gate amplifier resembles the common-source amplifier; both have the input applied across $\\mathrm{v}_{\\mathrm{gs}}$ with opposite polarities, and the output is taken at the drain. Consequently, the small-signal gain magnitude in both cases is approximately the product of $g_{m}$ and the total impedance at the drain.\n\nUsing basic small-signal analysis, when the impedance seen at $\\mathrm{V}_{\\text {out }}$ (in this instance, the output impedance of the current mirror formed by $Q_{2}$) is significantly less than $r_{d s 1}$, the input impedance, $r_{\\text {out }}$, is determined to be $1 / g_{m 1}$ at low frequencies. However, in integrated applications, the impedance seen at $V_{\\text {out }}$ often equals or exceeds $r_{\\mathrm{ds} 1}$. In such cases, the input impedance at low frequencies can be substantially greater than $1 / \\mathrm{g}_{\\mathrm{m} 1}$. To understand this, consider the small-signal model depicted in Fig. 3.10. This model includes a voltage-dependent current source representing the body effect. Note that $\\mathrm{v}_{\\mathrm{gs} 1}=-\\mathrm{v}_{\\mathrm{s} 1}$, allowing the two current sources to be combined into a single source, as shown in Fig. 3.11. This simplification is feasible for any transistor with a grounded gate in a small-signal model, significantly simplifying the inclusion of the body effect. Specifically, one can disregard the body effect for transistors with grounded gates and later replace $\\mathrm{g}_{\\mathrm{mi}}$ with $\\mathrm{g}_{\\mathrm{mi}}+\\mathrm{g}_{\\mathrm{si}}$. For this example, however, the body-effect parameter is included throughout the analysis.\n\nAt node $v_{\\text {out }}$, we have\n\n$$\n\\begin{equation*}\nv_{\\text {out }}\\left(G_{L}+g_{d s 1}\\right)-v_{s 1} g_{d s 1}-\\left(g_{m 1}+g_{s 1}\\right) v_{s 1}=0 \\tag{3.16}\n\\end{equation*}\n$$\n\nRearranging this, we obtain\n\n$$\n\\begin{equation*}\n\\frac{v_{\\text {out }}}{v_{\\mathrm{s} 1}}=\\frac{g_{\\mathrm{m} 1}+g_{\\mathrm{s} 1}+g_{\\mathrm{ds} 1}}{G_{\\mathrm{L}}+g_{\\mathrm{ds} 1}}=\\left(g_{\\mathrm{m} 1}+g_{\\mathrm{s} 1}+g_{\\mathrm{ds} 1}\\right)\\left(R_{\\mathrm{L}} \\| r_{\\mathrm{ds} 1}\\right) \\cong g_{\\mathrm{m} 1}\\left(R_{\\mathrm{L}} \\| r_{\\mathrm{ds} 1}\\right) \\tag{3.17}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.10 The small-signal model of the common-gate amplifier at low frequencies\ndescription:\n[\nname: Vgs1, type: VoltageSource, value: Vgs1, ports: {Np: GND, Nn: Vs1}\nname: Rs, type: Resistor, value: Rs, ports: {N1: Vs1, N2: Vin}\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: gm1Vgs1, type: VoltageControlledCurrentSource, ports: {Np: Vout, Nn: Vs1}\nname: gs1Vs1, type: VoltageControlledCurrentSource, ports: {Np: Vout, Nn: Vs1}\nname: rds1, type: Resistor, value: rds1, ports: {N1: Vout, N2: Vs1}\nname: RL, type: Resistor, value: RL, ports: {N1: Vout, N2: GND}\n]\nextrainfo:This circuit represents a small-signal model of a common-gate amplifier at low frequencies, incorporating voltage sources, resistors, and voltage-controlled current sources. The output voltage is measured across RL, with the input applied to Vin.\n\nFig. 3.10 The small-signal model of the common-gate amplifier at low frequencies.\nimage_name:Fig. 3.10\ndescription:\n[\nname: Vs1, type: VoltageSource, value: Vs1, ports: {Np: GND, Nn: Vs1}\nname: Rs, type: Resistor, value: Rs, ports: {N1: Vs1, N2: Vin}\nname: rds1, type: Resistor, value: rds1, ports: {N1: Vout, N2: Vs1}\nname: RL, type: Resistor, value: RL, ports: {N1: Vout, N2: GND}\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: (gm1+gs1)Vs1, type: VoltageControlledVoltageSource, ports: {N1: Vout, N2: Vs1}\n]\nextrainfo:This circuit is a small-signal model of a common-gate amplifier at low frequencies, featuring voltage sources, resistors, and voltage-controlled current sources. The output voltage is taken across RL, and the input is applied to Vin.\n\nFig. 3.11 A simplified small-signal model of the common-gate amplifier.\n\nThe current flowing into the source of $Q_{1}$ is expressed as\n\n$$\n\\begin{equation*}\ni_{s}=v_{s 1}\\left(g_{m 1}+g_{s 1}+g_{d s 1}\\right)-v_{\\text {out }} g_{d s 1} \\tag{3.18}\n\\end{equation*}\n$$\n\nCombining equations (3.17) and (3.18) to determine the input admittance, $\\mathrm{g}_{\\mathrm{in}}=1 / \\mathrm{r}_{\\mathrm{in}}$, we get\n\n$$\n\\begin{equation*}\ng_{\\mathrm{in}} \\equiv \\frac{i_{\\mathrm{s}}}{v_{s 1}} \\equiv \\frac{g_{\\mathrm{m} 1}+g_{\\mathrm{s} 1}+g_{\\mathrm{ds} 1}}{1+\\frac{g_{\\mathrm{ds} 1}}{G_{\\mathrm{L}}}} \\cong \\frac{g_{\\mathrm{m} 1}}{1+\\frac{g_{\\mathrm{ds} 1}}{G_{\\mathrm{L}}}} \\tag{3.19}\n\\end{equation*}\n$$\n\nAlternatively, we have\n\n$$\n\\begin{equation*}\nr_{\\text {in }}=\\frac{1}{g_{i n}}=\\left(\\frac{1}{g_{m 1}}\\left\\|\\frac{1}{g_{s 1}}\\right\\| r_{d s 1}\\right)\\left(1+\\frac{R_{L}}{r_{d s 1}}\\right) \\cong \\frac{1}{g_{m 1}}\\left(1+\\frac{R_{L}}{r_{d s 1}}\\right) \\tag{3.20}\n\\end{equation*}\n$$\n\nKey Point: The common-gate amplifier offers a voltage gain similar to that of the common-source amplifier but with a relatively low input resistance, typically around $1 / \\mathrm{g}_{\\mathrm{m}}$. However, the input resistance can be higher when the amplifier has a substantial small-signal load resistance.\n\nWith the p-channel active load shown in Fig. 3.9, $R_{\\mathrm{L}}=r_{\\mathrm{ds} 2}$. In this scenario, since $R_{L}$ is approximately equal to $r_{\\text {ds }}$, the input impedance, $r_{i n}$, is roughly $2 / g_{m 1}$ at low frequencies—twice the expected value of $1 / \\mathrm{g}_{\\mathrm{m} 1}$. This increased input impedance must be considered in applications like transmission-line terminations. In some cases, the current-mirror output impedance provided by $Q_{2}$ is much larger than $r_{d s 1}$ (i.e., $\\mathrm{R}_{\\mathrm{L}}>>\\mathrm{r}_{\\mathrm{ds} 1}$), resulting in a significantly higher input impedance for this common-gate amplifier. This phenomenon is common in integrated circuits but not widely recognized.\n\nThe attenuation from the input source to the transistor source can be significant in a common-gate amplifier when $R_{s}$ is large. This attenuation is given by\n\n$$\n\\begin{equation*}\n\\frac{v_{s 1}}{v_{\\text {in }}}=\\frac{r_{\\text {in }}}{R_{s}+r_{\\text {in }}} \\tag{3.21}\n\\end{equation*}\n$$\n\nUsing (3.20) to substitute for $r_{\\text {in }}$, we have\n\n$$\n\\begin{equation*}\n\\frac{v_{s 1}}{v_{i n}}=\\frac{\\left(\\frac{1}{g_{m 1}}\\left\\|\\frac{1}{g_{s 1}}\\right\\| r_{d s 1}\\right)\\left(1+\\frac{R_{L}}{r_{d s 1}}\\right)}{R_{s}+\\left(\\frac{1}{g_{m 1}}\\left\\|\\frac{1}{g_{s 1}}\\right\\| r_{d s 1}\\right)\\left(1+\\frac{R_{L}}{r_{d s 1}}\\right)}=\\frac{1}{1+R_{s}\\left(\\frac{g_{m 1}+g_{s 1}+g_{d s 1}}{1+R_{L} / r_{d s 1}}\\right)} \\tag{3.22}\n\\end{equation*}\n$$\n\nUsing (3.17) and (3.22), the overall dc gain is determined as\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{v_{\\text {out }}}{v_{\\text {in }}}=\\frac{\\left(g_{m 1}+g_{s 1}+g_{d s 1}\\right)\\left(R_{L} \\| r_{d s 1}\\right)}{1+R_{s}\\left(\\frac{g_{m 1}+g_{s 1}+g_{d s 1}}{1+R_{L} / r_{d s 1}}\\right)} \\cong \\frac{g_{m 1}\\left(R_{L} \\| r_{d s 1}\\right)}{1+R_{s}\\left(\\frac{g_{m 1}+g_{s 1}+g_{d s 1}}{1+R_{L} / r_{d s 1}}\\right)} \\tag{3.23}\n\\end{equation*}\n$$"
},
{
    "text": "image_name:Fig. 3.9\ndescription:\n[\nname: Q3, type: PMOS, ports: {S: VDD, D: P, G: P}\nname: Q2, type: PMOS, ports: {S: VDD, D: Vout, G: P}\nname: Q1, type: NMOS, ports: {S: Vin, D: Vout, G: Vbias}\nname: Ibias, type: CurrentSource, ports: {Np: P, Nn: GND}\n]\nextrainfo:The circuit depicted is a common-gate amplifier featuring a current-mirror active load. It is engineered for low input impedance and is frequently employed to terminate transmission lines or serve as the initial stage of an amplifier where the input signal is a current.\n\nFig. 3.9 Illustration of a common-gate amplifier with a current-mirror active load.\n\nDisplayed in Fig. 3.9 is a common-gate amplifier with an active load, commonly utilized as a gain stage when a relatively low input impedance is required. For instance, it might be designed to exhibit an input impedance of $50 \\Omega$ to match a $50-\\Omega$ transmission line. Another typical application for this amplifier is as the first stage in an amplifier where the input signal is a current; in such scenarios, a low input impedance is essential to ensure the entire current signal is drawn into the amplifier, with none \"lost\" in the signal source impedance. Besides its low input impedance, the common-gate amplifier shares similarities with the common-source amplifier; in both, the input is applied across $\\mathrm{v}_{\\mathrm{gs}}$, but with opposite polarities, and the output is derived from the drain. Consequently, the small-signal gain magnitude in both cases approximates the product of $g_{m}$ and the total impedance at the drain.\n\nUsing straightforward small-signal analysis, if the impedance observed at $\\mathrm{V}_{\\text {out }}$ (in this instance, the output impedance of the current mirror formed by $Q_{2}$) is significantly less than $r_{d s 1}$, the input impedance, $r_{\\text {out }}$, is determined to be $1 / g_{m 1}$ at low frequencies. However, in integrated applications, the impedance at $V_{\\text {out }}$ often matches or even exceeds $r_{\\mathrm{ds} 1}$. Under these conditions, the input impedance at low frequencies can be substantially greater than $1 / \\mathrm{g}_{\\mathrm{m} 1}$. To observe this outcome, consider the small-signal model depicted in Fig. 3.10. In this model, the voltage-dependent current source representing the body effect has been incorporated. Note that $\\mathrm{v}_{\\mathrm{gs} 1}=-\\mathrm{v}_{\\mathrm{s} 1}$, allowing the two current sources to be combined into a single current source, as shown in Fig. 3.11. This simplification is always feasible for a transistor with a grounded gate in a small-signal model and significantly simplifies accounting for the body effect. Specifically, one can disregard the body effect for transistors with grounded gates and, after completing the analysis, simply replace the constants $\\mathrm{g}_{\\mathrm{mi}}$ with $\\mathrm{g}_{\\mathrm{mi}}+\\mathrm{g}_{\\mathrm{si}}$. For this example, however, the body-effect parameter is included throughout the analysis.\n\nAt node $v_{\\text {out }}$, we have\n\n$$\n\\begin{equation*}\nv_{\\text {out }}\\left(G_{L}+g_{d s 1}\\right)-v_{s 1} g_{d s 1}-\\left(g_{m 1}+g_{s 1}\\right) v_{s 1}=0 \\tag{3.16}\n\\end{equation*}\n$$\n\nRearranging slightly, we obtain\n\n$$\n\\begin{equation*}\n\\frac{v_{\\text {out }}}{v_{\\mathrm{s} 1}}=\\frac{g_{\\mathrm{m} 1}+g_{\\mathrm{s} 1}+g_{\\mathrm{ds} 1}}{G_{\\mathrm{L}}+g_{\\mathrm{ds} 1}}=\\left(g_{\\mathrm{m} 1}+g_{\\mathrm{s} 1}+g_{\\mathrm{ds} 1}\\right)\\left(R_{\\mathrm{L}} \\| r_{\\mathrm{ds} 1}\\right) \\cong g_{\\mathrm{m} 1}\\left(R_{\\mathrm{L}} \\| r_{\\mathrm{ds} 1}\\right) \\tag{3.17}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.10 The small-signal model of the common-gate amplifier at low frequencies\ndescription:\n[\nname: Vgs1, type: VoltageSource, value: Vgs1, ports: {Np: GND, Nn: Vs1}\nname: Rs, type: Resistor, value: Rs, ports: {N1: Vs1, N2: Vin}\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: gm1Vgs1, type: VoltageControlledCurrentSource, ports: {Np: Vout, Nn: Vs1}\nname: gs1Vs1, type: VoltageControlledCurrentSource, ports: {Np: Vout, Nn: Vs1}\nname: rds1, type: Resistor, value: rds1, ports: {N1: Vout, N2: Vs1}\nname: RL, type: Resistor, value: RL, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit represents a small-signal model of a common-gate amplifier at low frequencies, incorporating voltage sources, resistors, and voltage-controlled current sources. The output voltage is measured across RL, with the input applied to Vin.\n\nFig. 3.10 The small-signal model of the common-gate amplifier at low frequencies.\nimage_name:Fig. 3.10\ndescription:\n[\nname: Vs1, type: VoltageSource, value: Vs1, ports: {Np: GND, Nn: Vs1}\nname: Rs, type: Resistor, value: Rs, ports: {N1: Vs1, N2: Vin}\nname: rds1, type: Resistor, value: rds1, ports: {N1: Vout, N2: Vs1}\nname: RL, type: Resistor, value: RL, ports: {N1: Vout, N2: GND}\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: (gm1+gs1)Vs1, type: VoltageControlledVoltageSource, ports: {N1: Vout, N2: Vs1}\n]\nextrainfo:The circuit is a small-signal model of a common-gate amplifier at low frequencies, featuring voltage sources, resistors, and voltage-controlled current sources. The output voltage is measured across RL, with the input applied to Vin.\n\nFig. 3.11 A simplified small-signal model of the common-gate amplifier.\n\nThe current entering the source of $Q_{1}$ is given by\n\n$$\n\\begin{equation*}\ni_{s}=v_{s 1}\\left(g_{m 1}+g_{s 1}+g_{d s 1}\\right)-v_{\\text {out }} g_{d s 1} \\tag{3.18}\n\\end{equation*}\n$$\n\nCombining (3.17) and (3.18) to determine the input admittance, $\\mathrm{g}_{\\mathrm{in}}=1 / \\mathrm{r}_{\\mathrm{in}}$, we get\n\n$$\n\\begin{equation*}\ng_{\\mathrm{in}} \\equiv \\frac{i_{\\mathrm{s}}}{v_{s 1}} \\equiv \\frac{g_{\\mathrm{m} 1}+g_{\\mathrm{s} 1}+g_{\\mathrm{ds} 1}}{1+\\frac{g_{\\mathrm{ds} 1}}{G_{\\mathrm{L}}}} \\cong \\frac{g_{\\mathrm{m} 1}}{1+\\frac{g_{\\mathrm{ds} 1}}{G_{\\mathrm{L}}}} \\tag{3.19}\n\\end{equation*}\n$$\n\nAlternatively, we have\n\n$$\n\\begin{equation*}\nr_{\\text {in }}=\\frac{1}{g_{i n}}=\\left(\\frac{1}{g_{m 1}}\\left\\|\\frac{1}{g_{s 1}}\\right\\| r_{d s 1}\\right)\\left(1+\\frac{R_{L}}{r_{d s 1}}\\right) \\cong \\frac{1}{g_{m 1}}\\left(1+\\frac{R_{L}}{r_{d s 1}}\\right) \\tag{3.20}\n\\end{equation*}\n$$\n\nKey Point: The common-gate amplifier offers a voltage gain similar to that of the common-source amplifier but with a relatively low input resistance, typically around $1 / \\mathrm{g}_{\\mathrm{m}}$. However, the input resistance can be higher when the amplifier has a substantial small-signal load resistance.\n\nWith the p-channel active load shown in Fig. 3.9, $R_{\\mathrm{L}}=r_{\\mathrm{ds} 2}$. In this scenario, since $R_{L}$ is approximately equal to $r_{\\text {ds }}$, the input impedance, $r_{i n}$, is roughly $2 / g_{m 1}$ at low frequencies—twice the expected value of $1 / \\mathrm{g}_{\\mathrm{m} 1}$. This elevated input impedance must be considered in applications like transmission-line terminations. In some cases, the current-mirror output impedance provided by $Q_{2}$ is significantly larger than $r_{d s 1}$ (i.e., $\\mathrm{R}_{\\mathrm{L}}>>\\mathrm{r}_{\\mathrm{dst}}$), resulting in a much higher input impedance for this common-gate amplifier. This increased input impedance is often observed in integrated circuits and is not widely recognized.\n\nThe attenuation from the input source to the transistor source can be significant in a common-gate amplifier when $R_{s}$ is large. This attenuation is expressed as\n\n$$\n\\begin{equation*}\n\\frac{v_{s 1}}{v_{\\text {in }}}=\\frac{r_{\\text {in }}}{R_{s}+r_{\\text {in }}} \\tag{3.21}\n\\end{equation*}\n$$\n\nUsing (3.20) to substitute $r_{\\text {in }}$, we get\n\n$$\n\\begin{equation*}\n\\frac{v_{s 1}}{v_{i n}}=\\frac{\\left(\\frac{1}{g_{m 1}}\\left\\|\\frac{1}{g_{s 1}}\\right\\| r_{d s 1}\\right)\\left(1+\\frac{R_{L}}{r_{d s 1}}\\right)}{R_{s}+\\left(\\frac{1}{g_{m 1}}\\left\\|\\frac{1}{g_{s 1}}\\right\\| r_{d s 1}\\right)\\left(1+\\frac{R_{L}}{r_{d s 1}}\\right)}=\\frac{1}{1+R_{s}\\left(\\frac{g_{m 1}+g_{s 1}+g_{d s 1}}{1+R_{L} / r_{d s 1}}\\right)} \\tag{3.22}\n\\end{equation*}\n$$\n\nUsing (3.17) and (3.22), we find the overall dc gain to be\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{v_{\\text {out }}}{v_{\\text {in }}}=\\frac{\\left(g_{m 1}+g_{s 1}+g_{d s 1}\\right)\\left(R_{L} \\| r_{d s 1}\\right)}{1+R_{s}\\left(\\frac{g_{m 1}+g_{s 1}+g_{d s 1}}{1+R_{L} / r_{d s 1}}\\right)} \\cong \\frac{g_{m 1}\\left(R_{L} \\| r_{d s 1}\\right)}{1+R_{s}\\left(\\frac{g_{m 1}+g_{s 1}+g_{d s 1}}{1+R_{L} / r_{d s 1}}\\right)} \\tag{3.23}\n\\end{equation*}\n$$"
},
{
    "text": "```\nimage_name:Fig. 3.9\ndescription:\n[\nname: Q3, type: PMOS, ports: {S: VDD, D: P, G: P}\nname: Q2, type: PMOS, ports: {S: VDD, D: Vout, G: P}\nname: Q1, type: NMOS, ports: {S: Vin, D: Vout, G: Vbias}\nname: Ibias, type: CurrentSource, ports: {Np: P, Nn: GND}\n]\nextrainfo:This circuit functions as a common-gate amplifier equipped with a current-mirror active load. It is intentionally designed to exhibit low input impedance and is frequently employed for terminating transmission lines or serving as the initial stage of an amplifier where the incoming signal is a current.\n\nFig. 3.9 Illustration of a common-gate amplifier featuring a current-mirror active load.\n\nThe depicted common-gate amplifier with an active load in Fig. 3.9 is often utilized as a gain stage when a relatively low input impedance is necessary. For instance, it might be engineered to have an input impedance of $50 \\Omega$ to effectively terminate a $50-\\Omega$ transmission line. Another prevalent application for this amplifier type is as the first stage in amplifiers where the input signal is a current; in such scenarios, a low input impedance is crucial to ensure the entire current signal is drawn into the amplifier, avoiding any loss in the signal source impedance. Besides its low input impedance characteristic, the common-gate amplifier shares similarities with the common-source amplifier; both apply the input across $\\mathrm{v}_{\\mathrm{gs}}$ with opposite polarities, and the output is derived at the drain. Consequently, the small signal gain magnitude in both cases is approximately the product of $g_{m}$ and the total impedance at the drain.\n\nWhen employing straightforward small-signal analysis, if the impedance observed at $\\mathrm{V}_{\\text {out }}$ (in this instance, the output impedance of the current mirror formed by $Q_{2}$) is significantly lower than $r_{d s 1}$, the input impedance, $r_{\\text {out }}$, is determined to be $1 / g_{m 1}$ at low frequencies. However, in integrated circuit applications, the impedance at $V_{\\text {out }}$ often matches or even exceeds $r_{\\mathrm{ds} 1}$. Under these conditions, the input impedance at low frequencies can be substantially higher than $1 / \\mathrm{g}_{\\mathrm{m} 1}$. To comprehend this outcome, consider the small-signal model illustrated in Fig. 3.10. In this model, the voltage-dependent current source that accounts for the body effect has been incorporated. Note that $\\mathrm{v}_{\\mathrm{gs} 1}=-\\mathrm{v}_{\\mathrm{s} 1}$, allowing the two current sources to be merged into a single source, as depicted in Fig. 3.11. This simplification is always feasible for a transistor with a grounded gate in a small-signal model and significantly eases the inclusion of the body effect. Specifically, one can disregard the body effect for transistors with grounded gates and, after completing the analysis, simply replace the constants $\\mathrm{g}_{\\mathrm{mi}}$ with $\\mathrm{g}_{\\mathrm{mi}}+\\mathrm{g}_{\\mathrm{si}}$. Nevertheless, for this example, we incorporate the body-effect parameter throughout the analysis.\n\nAt node $v_{\\text {out }}$, we derive\n\n$$\n\\begin{equation*}\nv_{\\text {out }}\\left(G_{L}+g_{d s 1}\\right)-v_{s 1} g_{d s 1}-\\left(g_{m 1}+g_{s 1}\\right) v_{s 1}=0 \\tag{3.16}\n\\end{equation*}\n$$\n\nRearranging the terms, we obtain\n\n$$\n\\begin{equation*}\n\\frac{v_{\\text {out }}}{v_{\\mathrm{s} 1}}=\\frac{g_{\\mathrm{m} 1}+g_{\\mathrm{s} 1}+g_{\\mathrm{ds} 1}}{G_{\\mathrm{L}}+g_{\\mathrm{ds} 1}}=\\left(g_{\\mathrm{m} 1}+g_{\\mathrm{s} 1}+g_{\\mathrm{ds} 1}\\right)\\left(R_{\\mathrm{L}} \\| r_{\\mathrm{ds} 1}\\right) \\cong g_{\\mathrm{m} 1}\\left(R_{\\mathrm{L}} \\| r_{\\mathrm{ds} 1}\\right) \\tag{3.17}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.10 The small-signal model of the common-gate amplifier at low frequencies\ndescription:\n[\nname: Vgs1, type: VoltageSource, value: Vgs1, ports: {Np: GND, Nn: Vs1}\nname: Rs, type: Resistor, value: Rs, ports: {N1: Vs1, N2: Vin}\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: gm1Vgs1, type: VoltageControlledCurrentSource, ports: {Np: Vout, Nn: Vs1}\nname: gs1Vs1, type: VoltageControlledCurrentSource, ports: {Np: Vout, Nn: Vs1}\nname: rds1, type: Resistor, value: rds1, ports: {N1: Vout, N2: Vs1}\nname: RL, type: Resistor, value: RL, ports: {N1: Vout, N2: GND}\n]\nextrainfo:This circuit represents a small-signal model of a common-gate amplifier at low frequencies, incorporating voltage sources, resistors, and voltage-controlled current sources. The output voltage is measured across RL, with the input applied to Vin.\n\nFig. 3.10 The small-signal model of the common-gate amplifier at low frequencies.\nimage_name:Fig. 3.10\ndescription:\n[\nname: Vs1, type: VoltageSource, value: Vs1, ports: {Np: GND, Nn: Vs1}\nname: Rs, type: Resistor, value: Rs, ports: {N1: Vs1, N2: Vin}\nname: rds1, type: Resistor, value: rds1, ports: {N1: Vout, N2: Vs1}\nname: RL, type: Resistor, value: RL, ports: {N1: Vout, N2: GND}\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: (gm1+gs1)Vs1, type: VoltageControlledVoltageSource, ports: {N1: Vout, N2: Vs1}\n]\nextrainfo:This circuit is a small-signal model of a common-gate amplifier at low frequencies, featuring voltage sources, resistors, and voltage-controlled current sources. The output voltage is measured across RL, with the input applied to Vin.\n\nFig. 3.11 A simplified small-signal model of the common-gate amplifier.\n\nThe current flowing into the source of $Q_{1}$ is expressed as\n\n$$\n\\begin{equation*}\ni_{s}=v_{s 1}\\left(g_{m 1}+g_{s 1}+g_{d s 1}\\right)-v_{\\text {out }} g_{d s 1} \\tag{3.18}\n\\end{equation*}\n$$\n\nBy combining (3.17) and (3.18) to determine the input admittance, $\\mathrm{g}_{\\mathrm{in}}=1 / \\mathrm{r}_{\\mathrm{in}}$, we derive\n\n$$\n\\begin{equation*}\ng_{\\mathrm{in}} \\equiv \\frac{i_{\\mathrm{s}}}{v_{s 1}} \\equiv \\frac{g_{\\mathrm{m} 1}+g_{\\mathrm{s} 1}+g_{\\mathrm{ds} 1}}{1+\\frac{g_{\\mathrm{ds} 1}}{G_{\\mathrm{L}}}} \\cong \\frac{g_{\\mathrm{m} 1}}{1+\\frac{g_{\\mathrm{ds} 1}}{G_{\\mathrm{L}}}} \\tag{3.19}\n\\end{equation*}\n$$\n\nAlternatively, we can express\n\n$$\n\\begin{equation*}\nr_{\\text {in }}=\\frac{1}{g_{i n}}=\\left(\\frac{1}{g_{m 1}}\\left\\|\\frac{1}{g_{s 1}}\\right\\| r_{d s 1}\\right)\\left(1+\\frac{R_{L}}{r_{d s 1}}\\right) \\cong \\frac{1}{g_{m 1}}\\left(1+\\frac{R_{L}}{r_{d s 1}}\\right) \\tag{3.20}\n\\end{equation*}\n$$\n\nKey Point: The common-gate amplifier delivers a voltage gain similar to that of the common-source amplifier but features a relatively low input resistance, typically around $1 / \\mathrm{g}_{\\mathrm{m}}$. However, the input resistance can increase when the amplifier is equipped with a high small-signal load resistance.\n\nWith the p-channel active load depicted in Fig. 3.9, $R_{\\mathrm{L}}=r_{\\mathrm{ds} 2}$. In this scenario, since $R_{L}$ is approximately equal in magnitude to $r_{\\text {ds }}$, the input impedance, $r_{i n}$, is roughly $2 / g_{m 1}$ for low frequencies—twice the expected value of $1 / \\mathrm{g}_{\\mathrm{m} 1}$. This elevated input impedance must be considered in applications like transmission-line terminations. In certain cases, the current-mirror output impedance provided by $Q_{2}$ is significantly larger than $r_{d s 1}$ (i.e., $\\mathrm{R}_{\\mathrm{L}}>>\\mathrm{r}_{\\mathrm{dst}}$), resulting in a much higher input impedance for this common-gate amplifier. This phenomenon is often observed in integrated circuits but is not widely recognized.\n\nThe attenuation from the input source to the transistor source can be significant in a common-gate amplifier when $R_{s}$ is large. This attenuation is given by\n\n$$\n\\begin{equation*}\n\\frac{v_{s 1}}{v_{\\text {in }}}=\\frac{r_{\\text {in }}}{R_{s}+r_{\\text {in }}} \\tag{3.21}\n\\end{equation*}\n$$\n\nUsing (3.20) to substitute $r_{\\text {in }}$, we get\n\n$$\n\\begin{equation*}\n\\frac{v_{s 1}}{v_{i n}}=\\frac{\\left(\\frac{1}{g_{m 1}}\\left\\|\\frac{1}{g_{s 1}}\\right\\| r_{d s 1}\\right)\\left(1+\\frac{R_{L}}{r_{d s 1}}\\right)}{R_{s}+\\left(\\frac{1}{g_{m 1}}\\left\\|\\frac{1}{g_{s 1}}\\right\\| r_{d s 1}\\right)\\left(1+\\frac{R_{L}}{r_{d s 1}}\\right)}=\\frac{1}{1+R_{s}\\left(\\frac{g_{m 1}+g_{s 1}+g_{d s 1}}{1+R_{L} / r_{d s 1}}\\right)} \\tag{3.22}\n\\end{equation*}\n$$\n\nBy utilizing (3.17) and (3.22), we determine that the overall dc gain is\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{v_{\\text {out }}}{v_{\\text {in }}}=\\frac{\\left(g_{m 1}+g_{s 1}+g_{d s 1}\\right)\\left(R_{L} \\| r_{d s 1}\\right)}{1+R_{s}\\left(\\frac{g_{m 1}+g_{s 1}+g_{d s 1}}{1+R_{L} / r_{d s 1}}\\right)} \\cong \\frac{g_{m 1}\\left(R_{L} \\| r_{d s 1}\\right)}{1+R_{s}\\left(\\frac{g_{m 1}+g_{s 1}+g_{d s 1}}{1+R_{L} / r_{d s 1}}\\right)} \\tag{3.23}\n\\end{equation*}\n$$\n```"
},
{
    "text": "image_name:Fig. 3.9\ndescription:\n[\nname: Q3, type: PMOS, ports: {S: VDD, D: P, G: P}\nname: Q2, type: PMOS, ports: {S: VDD, D: Vout, G: P}\nname: Q1, type: NMOS, ports: {S: Vin, D: Vout, G: Vbias}\nname: Ibias, type: CurrentSource, ports: {Np: P, Nn: GND}\n]\nextrainfo:This circuit is a common-gate amplifier featuring a current-mirror active load. It is designed for low input impedance and is typically used to terminate transmission lines or serve as the initial stage of an amplifier where the input signal is a current.\n\nFig. 3.9 A common-gate amplifier with a current-mirror active load.\n\nFig. 3.9 illustrates a common-gate amplifier with an active load, commonly employed as a gain stage when a low input impedance is required. For instance, it might be configured for an input impedance of $50 \\Omega$ to match a $50-\\Omega$ transmission line. Another frequent application is as the first stage of an amplifier where the input is a current; in such scenarios, a low input impedance ensures that all the current signal is drawn into the amplifier, avoiding loss in the signal source impedance. Besides its low input impedance, the common-gate amplifier resembles the common-source amplifier; both apply the input across $\\mathrm{v}_{\\mathrm{gs}}$ with opposite polarities and take the output at the drain. Consequently, the small-signal gain magnitude in both cases is approximately the product of $g_{m}$ and the total drain impedance.\n\nUsing basic small-signal analysis, if the impedance at $\\mathrm{V}_{\\text {out }}$ (here, the output impedance of the current mirror formed by $Q_{2}$) is significantly less than $r_{d s 1}$, the input impedance, $r_{\\text {out }}$, is $1 / g_{m 1}$ at low frequencies. However, in integrated circuits, the impedance at $V_{\\text {out }}$ often matches or exceeds $r_{\\mathrm{ds} 1}$. In such cases, the low-frequency input impedance can be substantially greater than $1 / \\mathrm{g}_{\\mathrm{m} 1}$. This is demonstrated by the small-signal model in Fig. 3.10, which includes a voltage-dependent current source for the body effect. Note that $\\mathrm{v}_{\\mathrm{gs} 1}=-\\mathrm{v}_{\\mathrm{s} 1}$, allowing the two current sources to be combined into one, as shown in Fig. 3.11. This simplification is feasible for transistors with grounded gates in small-signal models, simplifying the inclusion of the body effect. Specifically, one can initially ignore the body effect for grounded-gate transistors and later replace $\\mathrm{g}_{\\mathrm{mi}}$ with $\\mathrm{g}_{\\mathrm{mi}}+\\mathrm{g}_{\\mathrm{si}}$. For this example, the body-effect parameter is included throughout the analysis.\n\nAt node $v_{\\text {out }}$, we have\n\n$$\n\\begin{equation*}\nv_{\\text {out }}\\left(G_{L}+g_{d s 1}\\right)-v_{s 1} g_{d s 1}-\\left(g_{m 1}+g_{s 1}\\right) v_{s 1}=0 \\tag{3.16}\n\\end{equation*}\n$$\n\nRearranging, we obtain\n\n$$\n\\begin{equation*}\n\\frac{v_{\\text {out }}}{v_{\\mathrm{s} 1}}=\\frac{g_{\\mathrm{m} 1}+g_{\\mathrm{s} 1}+g_{\\mathrm{ds} 1}}{G_{\\mathrm{L}}+g_{\\mathrm{ds} 1}}=\\left(g_{\\mathrm{m} 1}+g_{\\mathrm{s} 1}+g_{\\mathrm{ds} 1}\\right)\\left(R_{\\mathrm{L}} \\| r_{\\mathrm{ds} 1}\\right) \\cong g_{\\mathrm{m} 1}\\left(R_{\\mathrm{L}} \\| r_{\\mathrm{ds} 1}\\right) \\tag{3.17}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.10 The small-signal model of the common-gate amplifier at low frequencies\ndescription:\n[\nname: Vgs1, type: VoltageSource, value: Vgs1, ports: {Np: GND, Nn: Vs1}\nname: Rs, type: Resistor, value: Rs, ports: {N1: Vs1, N2: Vin}\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: gm1Vgs1, type: VoltageControlledCurrentSource, ports: {Np: Vout, Nn: Vs1}\nname: gs1Vs1, type: VoltageControlledCurrentSource, ports: {Np: Vout, Nn: Vs1}\nname: rds1, type: Resistor, value: rds1, ports: {N1: Vout, N2: Vs1}\nname: RL, type: Resistor, value: RL, ports: {N1: Vout, N2: GND}\n]\nextrainfo:This circuit represents a small-signal model of a common-gate amplifier at low frequencies, incorporating voltage sources, resistors, and voltage-controlled current sources. The output voltage is measured across RL, with the input applied to Vin.\n\nFig. 3.10 The small-signal model of the common-gate amplifier at low frequencies.\nimage_name:Fig. 3.10\ndescription:\n[\nname: Vs1, type: VoltageSource, value: Vs1, ports: {Np: GND, Nn: Vs1}\nname: Rs, type: Resistor, value: Rs, ports: {N1: Vs1, N2: Vin}\nname: rds1, type: Resistor, value: rds1, ports: {N1: Vout, N2: Vs1}\nname: RL, type: Resistor, value: RL, ports: {N1: Vout, N2: GND}\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: (gm1+gs1)Vs1, type: VoltageControlledVoltageSource, ports: {N1: Vout, N2: Vs1}\n]\nextrainfo:This circuit is a small-signal model of a common-gate amplifier at low frequencies, featuring voltage sources, resistors, and voltage-controlled current sources. The output voltage is measured across RL, with the input applied to Vin.\n\nFig. 3.11 A simplified small-signal model of the common-gate amplifier.\n\nThe current entering the source of $Q_{1}$ is\n\n$$\n\\begin{equation*}\ni_{s}=v_{s 1}\\left(g_{m 1}+g_{s 1}+g_{d s 1}\\right)-v_{\\text {out }} g_{d s 1} \\tag{3.18}\n\\end{equation*}\n$$\n\nCombining (3.17) and (3.18) to determine the input admittance, $\\mathrm{g}_{\\mathrm{in}}=1 / \\mathrm{r}_{\\mathrm{in}}$, we get\n\n$$\n\\begin{equation*}\ng_{\\mathrm{in}} \\equiv \\frac{i_{\\mathrm{s}}}{v_{s 1}} \\equiv \\frac{g_{\\mathrm{m} 1}+g_{\\mathrm{s} 1}+g_{\\mathrm{ds} 1}}{1+\\frac{g_{\\mathrm{ds} 1}}{G_{\\mathrm{L}}}} \\cong \\frac{g_{\\mathrm{m} 1}}{1+\\frac{g_{\\mathrm{ds} 1}}{G_{\\mathrm{L}}}} \\tag{3.19}\n\\end{equation*}\n$$\n\nAlternatively, we have\n\n$$\n\\begin{equation*}\nr_{\\text {in }}=\\frac{1}{g_{i n}}=\\left(\\frac{1}{g_{m 1}}\\left\\|\\frac{1}{g_{s 1}}\\right\\| r_{d s 1}\\right)\\left(1+\\frac{R_{L}}{r_{d s 1}}\\right) \\cong \\frac{1}{g_{m 1}}\\left(1+\\frac{R_{L}}{r_{d s 1}}\\right) \\tag{3.20}\n\\end{equation*}\n$$\n\nKey Point: The common-gate amplifier offers a voltage gain similar to the common-source amplifier but with a lower input resistance, around $1 / \\mathrm{g}_{\\mathrm{m}}$. However, the input resistance can increase when the amplifier has a high small-signal load resistance.\n\nWith the p-channel active load in Fig. 3.9, $R_{\\mathrm{L}}=r_{\\mathrm{ds} 2}$. Since $R_{L}$ is approximately equal to $r_{\\text {ds }}$, the input impedance, $r_{i n}$, is about $2 / g_{m 1}$ at low frequencies—twice the expected $1 / \\mathrm{g}_{\\mathrm{m} 1}$. This higher input impedance must be considered in applications like transmission-line terminations. In some cases, the current-mirror output impedance provided by $Q_{2}$ is much larger than $r_{d s 1}$ (i.e., $\\mathrm{R}_{\\mathrm{L}}>>\\mathrm{r}_{\\mathrm{ds}}$), resulting in a significantly higher input impedance for this common-gate amplifier. This is often observed in integrated circuits but is not widely recognized.\n\nThe attenuation from the input source to the transistor source can be significant in a common-gate amplifier when $R_{s}$ is large. This attenuation is given by\n\n$$\n\\begin{equation*}\n\\frac{v_{s 1}}{v_{\\text {in }}}=\\frac{r_{\\text {in }}}{R_{s}+r_{\\text {in }}} \\tag{3.21}\n\\end{equation*}\n$$\n\nUsing (3.20) to replace $r_{\\text {in }}$, we have\n\n$$\n\\begin{equation*}\n\\frac{v_{s 1}}{v_{i n}}=\\frac{\\left(\\frac{1}{g_{m 1}}\\left\\|\\frac{1}{g_{s 1}}\\right\\| r_{d s 1}\\right)\\left(1+\\frac{R_{L}}{r_{d s 1}}\\right)}{R_{s}+\\left(\\frac{1}{g_{m 1}}\\left\\|\\frac{1}{g_{s 1}}\\right\\| r_{d s 1}\\right)\\left(1+\\frac{R_{L}}{r_{d s 1}}\\right)}=\\frac{1}{1+R_{s}\\left(\\frac{g_{m 1}+g_{s 1}+g_{d s 1}}{1+R_{L} / r_{d s 1}}\\right)} \\tag{3.22}\n\\end{equation*}\n$$\n\nUsing (3.17) and (3.22), the overall dc gain is found to be\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{v_{\\text {out }}}{v_{\\text {in }}}=\\frac{\\left(g_{m 1}+g_{s 1}+g_{d s 1}\\right)\\left(R_{L} \\| r_{d s 1}\\right)}{1+R_{s}\\left(\\frac{g_{m 1}+g_{s 1}+g_{d s 1}}{1+R_{L} / r_{d s 1}}\\right)} \\cong \\frac{g_{m 1}\\left(R_{L} \\| r_{d s 1}\\right)}{1+R_{s}\\left(\\frac{g_{m 1}+g_{s 1}+g_{d s 1}}{1+R_{L} / r_{d s 1}}\\right)} \\tag{3.23}\n\\end{equation*}\n$$"
},
{
    "text": "image_name:Fig. 3.9\ndescription:\n[\nname: Q3, type: PMOS, ports: {S: VDD, D: P, G: P}\nname: Q2, type: PMOS, ports: {S: VDD, D: Vout, G: P}\nname: Q1, type: NMOS, ports: {S: Vin, D: Vout, G: Vbias}\nname: Ibias, type: CurrentSource, ports: {Np: P, Nn: GND}\n]\nextrainfo:This circuit is a common-gate amplifier featuring a current-mirror active load. It is engineered for low input impedance and is frequently employed to terminate transmission lines or serve as the initial stage of an amplifier where the input signal is a current.\n\nFig. 3.9 A common-gate amplifier with a current-mirror active load.\n\nDisplayed in Fig. 3.9 is a common-gate amplifier with an active load, commonly utilized as a gain stage when a low input impedance is required. For instance, it might be designed to have an input impedance of $50 \\Omega$ to match a $50-\\Omega$ transmission line. Another typical application is as the first stage of an amplifier where the input signal is a current; in such scenarios, a low input impedance is crucial to ensure all the current signal is drawn into the amplifier, avoiding loss in the signal source impedance. Besides its low input impedance, the common-gate amplifier resembles the common-source amplifier; both have the input applied across $\\mathrm{v}_{\\mathrm{gs}}$ with opposite polarities, and the output is taken at the drain. Thus, the small-signal gain magnitude in both cases approximately equals the product of $g_{m}$ and the total impedance at the drain.\n\nUsing basic small-signal analysis, if the impedance seen at $\\mathrm{V}_{\\text {out }}$ (in this instance, the output impedance of the current mirror formed by $Q_{2}$) is significantly less than $r_{d s 1}$, the input impedance, $r_{\\text {out }}$, is determined to be $1 / g_{m 1}$ at low frequencies. However, in integrated applications, the impedance at $V_{\\text {out }}$ often equals or exceeds $r_{\\mathrm{ds} 1}$. In such cases, the low-frequency input impedance can be substantially greater than $1 / \\mathrm{g}_{\\mathrm{m} 1}$. To understand this, consider the small-signal model in Fig. 3.10, which includes a voltage-dependent current source modeling the body effect. Note that $\\mathrm{v}_{\\mathrm{gs} 1}=-\\mathrm{v}_{\\mathrm{s} 1}$, allowing the two current sources to be combined into one, as shown in Fig. 3.11. This simplification is feasible for a transistor with a grounded gate in a small-signal model, significantly easing the inclusion of the body effect. Specifically, one can ignore the body effect for grounded-gate transistors and later replace $\\mathrm{g}_{\\mathrm{mi}}$ with $\\mathrm{g}_{\\mathrm{mi}}+\\mathrm{g}_{\\mathrm{si}}$. For this example, however, the body-effect parameter is included throughout the analysis.\n\nAt node $v_{\\text {out }}$, we have\n\n$$\n\\begin{equation*}\nv_{\\text {out }}\\left(G_{L}+g_{d s 1}\\right)-v_{s 1} g_{d s 1}-\\left(g_{m 1}+g_{s 1}\\right) v_{s 1}=0 \\tag{3.16}\n\\end{equation*}\n$$\n\nRearranging slightly, we obtain\n\n$$\n\\begin{equation*}\n\\frac{v_{\\text {out }}}{v_{\\mathrm{s} 1}}=\\frac{g_{\\mathrm{m} 1}+g_{\\mathrm{s} 1}+g_{\\mathrm{ds} 1}}{G_{\\mathrm{L}}+g_{\\mathrm{ds} 1}}=\\left(g_{\\mathrm{m} 1}+g_{\\mathrm{s} 1}+g_{\\mathrm{ds} 1}\\right)\\left(R_{\\mathrm{L}} \\| r_{\\mathrm{ds} 1}\\right) \\cong g_{\\mathrm{m} 1}\\left(R_{\\mathrm{L}} \\| r_{\\mathrm{ds} 1}\\right) \\tag{3.17}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.10 The small-signal model of the common-gate amplifier at low frequencies\ndescription:\n[\nname: Vgs1, type: VoltageSource, value: Vgs1, ports: {Np: GND, Nn: Vs1}\nname: Rs, type: Resistor, value: Rs, ports: {N1: Vs1, N2: Vin}\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: gm1Vgs1, type: VoltageControlledCurrentSource, ports: {Np: Vout, Nn: Vs1}\nname: gs1Vs1, type: VoltageControlledCurrentSource, ports: {Np: Vout, Nn: Vs1}\nname: rds1, type: Resistor, value: rds1, ports: {N1: Vout, N2: Vs1}\nname: RL, type: Resistor, value: RL, ports: {N1: Vout, N2: GND}\n]\nextrainfo:This circuit represents a small-signal model of a common-gate amplifier at low frequencies, incorporating voltage sources, resistors, and voltage-controlled current sources. The output voltage is measured across RL, with the input applied to Vin.\n\nFig. 3.10 The small-signal model of the common-gate amplifier at low frequencies.\nimage_name:Fig. 3.10\ndescription:\n[\nname: Vs1, type: VoltageSource, value: Vs1, ports: {Np: GND, Nn: Vs1}\nname: Rs, type: Resistor, value: Rs, ports: {N1: Vs1, N2: Vin}\nname: rds1, type: Resistor, value: rds1, ports: {N1: Vout, N2: Vs1}\nname: RL, type: Resistor, value: RL, ports: {N1: Vout, N2: GND}\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: (gm1+gs1)Vs1, type: VoltageControlledVoltageSource, ports: {N1: Vout, N2: Vs1}\n]\nextrainfo:This circuit is a small-signal model of a common-gate amplifier at low frequencies, featuring voltage sources, resistors, and voltage-controlled current sources. The output voltage is measured across RL, and the input is applied to Vin.\n\nFig. 3.11 A simplified small-signal model of the common-gate amplifier.\n\nThe current entering the source of $Q_{1}$ is given by\n\n$$\n\\begin{equation*}\ni_{s}=v_{s 1}\\left(g_{m 1}+g_{s 1}+g_{d s 1}\\right)-v_{\\text {out }} g_{d s 1} \\tag{3.18}\n\\end{equation*}\n$$\n\nCombining (3.17) and (3.18) to determine the input admittance, $\\mathrm{g}_{\\mathrm{in}}=1 / \\mathrm{r}_{\\mathrm{in}}$, we get\n\n$$\n\\begin{equation*}\ng_{\\mathrm{in}} \\equiv \\frac{i_{\\mathrm{s}}}{v_{s 1}} \\equiv \\frac{g_{\\mathrm{m} 1}+g_{\\mathrm{s} 1}+g_{\\mathrm{ds} 1}}{1+\\frac{g_{\\mathrm{ds} 1}}{G_{\\mathrm{L}}}} \\cong \\frac{g_{\\mathrm{m} 1}}{1+\\frac{g_{\\mathrm{ds} 1}}{G_{\\mathrm{L}}}} \\tag{3.19}\n\\end{equation*}\n$$\n\nAlternatively, we have\n\n$$\n\\begin{equation*}\nr_{\\text {in }}=\\frac{1}{g_{i n}}=\\left(\\frac{1}{g_{m 1}}\\left\\|\\frac{1}{g_{s 1}}\\right\\| r_{d s 1}\\right)\\left(1+\\frac{R_{L}}{r_{d s 1}}\\right) \\cong \\frac{1}{g_{m 1}}\\left(1+\\frac{R_{L}}{r_{d s 1}}\\right) \\tag{3.20}\n\\end{equation*}\n$$\n\nKey Point: The common-gate amplifier offers a voltage gain similar to that of the common-source amplifier but with a relatively low input resistance, typically around $1 / \\mathrm{g}_{\\mathrm{m}}$. However, the input resistance can be higher when the amplifier has a substantial small-signal load resistance.\n\nWith the p-channel active load shown in Fig. 3.9, $R_{\\mathrm{L}}=r_{\\mathrm{ds} 2}$. In this case, since $R_{L}$ is roughly equivalent to $r_{\\text {ds }}$, the input impedance, $r_{i n}$, is approximately $2 / g_{m 1}$ at low frequencies—twice the expected value of $1 / \\mathrm{g}_{\\mathrm{m} 1}$. This elevated input impedance must be considered in applications like transmission-line terminations. In some instances, the current-mirror output impedance provided by $Q_{2}$ is much larger than $r_{d s 1}$ (i.e., $\\mathrm{R}_{\\mathrm{L}}>>\\mathrm{r}_{\\mathrm{dst}}$), resulting in a significantly higher input impedance for this common-gate amplifier. This increased input impedance is often observed in integrated circuits and is not widely recognized.\n\nThe attenuation from the input source to the transistor source can be significant in a common-gate amplifier when $R_{s}$ is large. This attenuation is expressed as\n\n$$\n\\begin{equation*}\n\\frac{v_{s 1}}{v_{\\text {in }}}=\\frac{r_{\\text {in }}}{R_{s}+r_{\\text {in }}} \\tag{3.21}\n\\end{equation*}\n$$\n\nUsing (3.20) to substitute for $r_{\\text {in }}$, we have\n\n$$\n\\begin{equation*}\n\\frac{v_{s 1}}{v_{i n}}=\\frac{\\left(\\frac{1}{g_{m 1}}\\left\\|\\frac{1}{g_{s 1}}\\right\\| r_{d s 1}\\right)\\left(1+\\frac{R_{L}}{r_{d s 1}}\\right)}{R_{s}+\\left(\\frac{1}{g_{m 1}}\\left\\|\\frac{1}{g_{s 1}}\\right\\| r_{d s 1}\\right)\\left(1+\\frac{R_{L}}{r_{d s 1}}\\right)}=\\frac{1}{1+R_{s}\\left(\\frac{g_{m 1}+g_{s 1}+g_{d s 1}}{1+R_{L} / r_{d s 1}}\\right)} \\tag{3.22}\n\\end{equation*}\n$$\n\nUsing (3.17) and (3.22), the overall dc gain is found to be\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{v_{\\text {out }}}{v_{\\text {in }}}=\\frac{\\left(g_{m 1}+g_{s 1}+g_{d s 1}\\right)\\left(R_{L} \\| r_{d s 1}\\right)}{1+R_{s}\\left(\\frac{g_{m 1}+g_{s 1}+g_{d s 1}}{1+R_{L} / r_{d s 1}}\\right)} \\cong \\frac{g_{m 1}\\left(R_{L} \\| r_{d s 1}\\right)}{1+R_{s}\\left(\\frac{g_{m 1}+g_{s 1}+g_{d s 1}}{1+R_{L} / r_{d s 1}}\\right)} \\tag{3.23}\n\\end{equation*}\n$$"
},
{
    "text": "```\nimage_name:Fig. 3.9\ndescription:\n[\nname: Q3, type: PMOS, ports: {S: VDD, D: P, G: P}\nname: Q2, type: PMOS, ports: {S: VDD, D: Vout, G: P}\nname: Q1, type: NMOS, ports: {S: Vin, D: Vout, G: Vbias}\nname: Ibias, type: CurrentSource, ports: {Np: P, Nn: GND}\n]\nextrainfo:The circuit is a common-gate amplifier with a current-mirror active load. It features low input impedance and is typically used for terminating transmission lines or as the initial stage of an amplifier where the input signal is a current.\n\nFig. 3.9 A common-gate amplifier with a current-mirror active load.\n\nFig. 3.9 illustrates a common-gate amplifier with an active load, commonly employed as a gain stage when a low input impedance is required. For instance, it might be designed to have an input impedance of $50 \\Omega$ to match a $50-\\Omega$ transmission line. Another frequent application is as the first stage of an amplifier where the input signal is a current, necessitating a small input impedance to ensure all current signal is drawn into the amplifier without loss in the signal source impedance. Besides its low input impedance, the common-gate amplifier resembles a common-source amplifier; both have inputs applied across $\\mathrm{v}_{\\mathrm{gs}}$ with opposite polarities and outputs taken at the drain. Thus, the small-signal gain magnitude in both cases approximates the product of $g_{m}$ and the total drain impedance.\n\nUsing simple small-signal analysis, if the impedance at $\\mathrm{V}_{\\text {out }}$ (in this case, the output impedance of the current mirror formed by $Q_{2}$) is much less than $r_{d s 1}$, the input impedance, $r_{\\text {out }}$, is found to be $1 / g_{m 1}$ at low frequencies. However, in integrated applications, the impedance at $V_{\\text {out }}$ often equals or exceeds $r_{\\mathrm{ds} 1}$. Consequently, the low-frequency input impedance can be significantly larger than $1 / \\mathrm{g}_{\\mathrm{m} 1}$. To illustrate this, consider the small-signal model in Fig. 3.10, which includes a voltage-dependent current source for the body effect. Note that $\\mathrm{v}_{\\mathrm{gs} 1}=-\\mathrm{v}_{\\mathrm{s} 1}$, allowing the two current sources to combine into one, as shown in Fig. 3.11. This simplification is feasible for transistors with grounded gates in small-signal models, simplifying the inclusion of the body effect. Specifically, one can initially ignore the body effect for grounded-gate transistors and later replace $\\mathrm{g}_{\\mathrm{mi}}$ with $\\mathrm{g}_{\\mathrm{mi}}+\\mathrm{g}_{\\mathrm{si}}$. However, this example includes the body-effect parameter throughout the analysis.\n\nAt node $v_{\\text {out }}$, we have\n\n$$\n\\begin{equation*}\nv_{\\text {out }}\\left(G_{L}+g_{d s 1}\\right)-v_{s 1} g_{d s 1}-\\left(g_{m 1}+g_{s 1}\\right) v_{s 1}=0 \\tag{3.16}\n\\end{equation*}\n$$\n\nRearranging, we get\n\n$$\n\\begin{equation*}\n\\frac{v_{\\text {out }}}{v_{\\mathrm{s} 1}}=\\frac{g_{\\mathrm{m} 1}+g_{\\mathrm{s} 1}+g_{\\mathrm{ds} 1}}{G_{\\mathrm{L}}+g_{\\mathrm{ds} 1}}=\\left(g_{\\mathrm{m} 1}+g_{\\mathrm{s} 1}+g_{\\mathrm{ds} 1}\\right)\\left(R_{\\mathrm{L}} \\| r_{\\mathrm{ds} 1}\\right) \\cong g_{\\mathrm{m} 1}\\left(R_{\\mathrm{L}} \\| r_{\\mathrm{ds} 1}\\right) \\tag{3.17}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.10 The small-signal model of the common-gate amplifier at low frequencies\ndescription:\n[\nname: Vgs1, type: VoltageSource, value: Vgs1, ports: {Np: GND, Nn: Vs1}\nname: Rs, type: Resistor, value: Rs, ports: {N1: Vs1, N2: Vin}\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: gm1Vgs1, type: VoltageControlledCurrentSource, ports: {Np: Vout, Nn: Vs1}\nname: gs1Vs1, type: VoltageControlledCurrentSource, ports: {Np: Vout, Nn: Vs1}\nname: rds1, type: Resistor, value: rds1, ports: {N1: Vout, N2: Vs1}\nname: RL, type: Resistor, value: RL, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit is a small-signal model of a common-gate amplifier at low frequencies, including voltage sources, resistors, and voltage-controlled current sources. The output voltage is measured across RL, with the input applied to Vin.\n\nFig. 3.10 The small-signal model of the common-gate amplifier at low frequencies.\nimage_name:Fig. 3.10\ndescription:\n[\nname: Vs1, type: VoltageSource, value: Vs1, ports: {Np: GND, Nn: Vs1}\nname: Rs, type: Resistor, value: Rs, ports: {N1: Vs1, N2: Vin}\nname: rds1, type: Resistor, value: rds1, ports: {N1: Vout, N2: Vs1}\nname: RL, type: Resistor, value: RL, ports: {N1: Vout, N2: GND}\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: (gm1+gs1)Vs1, type: VoltageControlledVoltageSource, ports: {N1: Vout, N2: Vs1}\n]\nextrainfo:The circuit is a small-signal model of a common-gate amplifier at low frequencies, incorporating voltage sources, resistors, and voltage-controlled current sources. The output voltage is measured across RL, with the input applied to Vin.\n\nFig. 3.11 A simplified small-signal model of the common-gate amplifier.\n\nThe current entering the source of $Q_{1}$ is\n\n$$\n\\begin{equation*}\ni_{s}=v_{s 1}\\left(g_{m 1}+g_{s 1}+g_{d s 1}\\right)-v_{\\text {out }} g_{d s 1} \\tag{3.18}\n\\end{equation*}\n$$\n\nCombining (3.17) and (3.18) to determine the input admittance, $\\mathrm{g}_{\\mathrm{in}}=1 / \\mathrm{r}_{\\mathrm{in}}$, we get\n\n$$\n\\begin{equation*}\ng_{\\mathrm{in}} \\equiv \\frac{i_{\\mathrm{s}}}{v_{s 1}} \\equiv \\frac{g_{\\mathrm{m} 1}+g_{\\mathrm{s} 1}+g_{\\mathrm{ds} 1}}{1+\\frac{g_{\\mathrm{ds} 1}}{G_{\\mathrm{L}}}} \\cong \\frac{g_{\\mathrm{m} 1}}{1+\\frac{g_{\\mathrm{ds} 1}}{G_{\\mathrm{L}}}} \\tag{3.19}\n\\end{equation*}\n$$\n\nAlternatively,\n\n$$\n\\begin{equation*}\nr_{\\text {in }}=\\frac{1}{g_{i n}}=\\left(\\frac{1}{g_{m 1}}\\left\\|\\frac{1}{g_{s 1}}\\right\\| r_{d s 1}\\right)\\left(1+\\frac{R_{L}}{r_{d s 1}}\\right) \\cong \\frac{1}{g_{m 1}}\\left(1+\\frac{R_{L}}{r_{d s 1}}\\right) \\tag{3.20}\n\\end{equation*}\n$$\n\nKey Point: The common-gate amplifier offers a voltage gain similar to the common-source amplifier but with a lower input resistance, typically around $1 / \\mathrm{g}_{\\mathrm{m}}$. However, the input resistance can increase when the amplifier has a high small-signal load resistance.\n\nWith the p-channel active load in Fig. 3.9, $R_{\\mathrm{L}}=r_{\\mathrm{ds} 2}$. Since $R_{L}$ is roughly equal to $r_{\\text {ds }}$, the input impedance, $r_{i n}$, is approximately $2 / g_{m 1}$ at low frequencies—twice the expected $1 / \\mathrm{g}_{\\mathrm{m} 1}$. This higher input impedance must be considered in applications like transmission-line terminations. In some cases, the current-mirror output impedance provided by $Q_{2}$ significantly exceeds $r_{d s 1}$ (i.e., $\\mathrm{R}_{\\mathrm{L}}>>\\mathrm{r}_{\\mathrm{dst}}$), resulting in a much higher input impedance for this common-gate amplifier. This elevated input impedance is common in integrated circuits but not widely recognized.\n\nThe input-source-to-transistor-source attenuation can be significant in a common-gate amplifier when $R_{s}$ is large. This attenuation is given by\n\n$$\n\\begin{equation*}\n\\frac{v_{s 1}}{v_{\\text {in }}}=\\frac{r_{\\text {in }}}{R_{s}+r_{\\text {in }}} \\tag{3.21}\n\\end{equation*}\n$$\n\nUsing (3.20) to substitute $r_{\\text {in }}$, we obtain\n\n$$\n\\begin{equation*}\n\\frac{v_{s 1}}{v_{i n}}=\\frac{\\left(\\frac{1}{g_{m 1}}\\left\\|\\frac{1}{g_{s 1}}\\right\\| r_{d s 1}\\right)\\left(1+\\frac{R_{L}}{r_{d s 1}}\\right)}{R_{s}+\\left(\\frac{1}{g_{m 1}}\\left\\|\\frac{1}{g_{s 1}}\\right\\| r_{d s 1}\\right)\\left(1+\\frac{R_{L}}{r_{d s 1}}\\right)}=\\frac{1}{1+R_{s}\\left(\\frac{g_{m 1}+g_{s 1}+g_{d s 1}}{1+R_{L} / r_{d s 1}}\\right)} \\tag{3.22}\n\\end{equation*}\n$$\n\nUsing (3.17) and (3.22), the overall dc gain is found to be\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{v_{\\text {out }}}{v_{\\text {in }}}=\\frac{\\left(g_{m 1}+g_{s 1}+g_{d s 1}\\right)\\left(R_{L} \\| r_{d s 1}\\right)}{1+R_{s}\\left(\\frac{g_{m 1}+g_{s 1}+g_{d s 1}}{1+R_{L} / r_{d s 1}}\\right)} \\cong \\frac{g_{m 1}\\left(R_{L} \\| r_{d s 1}\\right)}{1+R_{s}\\left(\\frac{g_{m 1}+g_{s 1}+g_{d s 1}}{1+R_{L} / r_{d s 1}}\\right)} \\tag{3.23}\n\\end{equation*}\n$$\n```"
},
{
    "text": "image_name:Fig. 3.9\ndescription:\n[\nname: Q3, type: PMOS, ports: {S: VDD, D: P, G: P}\nname: Q2, type: PMOS, ports: {S: VDD, D: Vout, G: P}\nname: Q1, type: NMOS, ports: {S: Vin, D: Vout, G: Vbias}\nname: Ibias, type: CurrentSource, ports: {Np: P, Nn: GND}\n]\nextrainfo:This circuit is a common-gate amplifier featuring a current-mirror active load. It is engineered for low input impedance and is frequently employed to terminate transmission lines or serve as the initial stage of an amplifier where the input signal is a current.\n\nFig. 3.9 A common-gate amplifier with a current-mirror active load.\n\nFig. 3.9 illustrates a common-gate amplifier with an active load, often utilized as a gain stage when a low input impedance is required. For instance, it might be designed to have an input impedance of $50 \\Omega$ to match a $50-\\Omega$ transmission line. Another typical application is as the first stage of an amplifier where the input signal is a current; in such scenarios, a low input impedance is crucial to ensure all the current signal is drawn into the amplifier, avoiding loss in the signal source impedance. Besides its low input impedance, the common-gate amplifier resembles the common-source amplifier; both apply the input across $\\mathrm{v}_{\\mathrm{gs}}$ with opposite polarities, and the output is taken at the drain. Thus, the small-signal gain magnitude in both cases is approximately the product of $g_{m}$ and the total impedance at the drain.\n\nUsing basic small-signal analysis, if the impedance seen at $\\mathrm{V}_{\\text {out }}$ (in this case, the output impedance of the current mirror formed by $Q_{2}$) is significantly less than $r_{d s 1}$, the input impedance, $r_{\\text {out }}$, is found to be $1 / g_{m 1}$ at low frequencies. However, in integrated applications, the impedance at $V_{\\text {out }}$ often matches or exceeds $r_{\\mathrm{ds} 1}$. In such cases, the low-frequency input impedance can be substantially higher than $1 / \\mathrm{g}_{\\mathrm{m} 1}$. To understand this, consider the small-signal model depicted in Fig. 3.10, which includes a voltage-dependent current source modeling the body effect. Note that $\\mathrm{v}_{\\mathrm{gs} 1}=-\\mathrm{v}_{\\mathrm{s} 1}$, allowing the two current sources to be combined into one, as shown in Fig. 3.11. This simplification is feasible for a transistor with a grounded gate in a small-signal model, greatly simplifying the inclusion of the body effect. Specifically, one can ignore the body effect for transistors with grounded gates and later replace $\\mathrm{g}_{\\mathrm{mi}}$ with $\\mathrm{g}_{\\mathrm{mi}}+\\mathrm{g}_{\\mathrm{si}}$. However, in this example, the body-effect parameter is included throughout the analysis.\n\nAt node $v_{\\text {out }}$, we have\n\n$$\n\\begin{equation*}\nv_{\\text {out }}\\left(G_{L}+g_{d s 1}\\right)-v_{s 1} g_{d s 1}-\\left(g_{m 1}+g_{s 1}\\right) v_{s 1}=0 \\tag{3.16}\n\\end{equation*}\n$$\n\nRearranging, we obtain\n\n$$\n\\begin{equation*}\n\\frac{v_{\\text {out }}}{v_{\\mathrm{s} 1}}=\\frac{g_{\\mathrm{m} 1}+g_{\\mathrm{s} 1}+g_{\\mathrm{ds} 1}}{G_{\\mathrm{L}}+g_{\\mathrm{ds} 1}}=\\left(g_{\\mathrm{m} 1}+g_{\\mathrm{s} 1}+g_{\\mathrm{ds} 1}\\right)\\left(R_{\\mathrm{L}} \\| r_{\\mathrm{ds} 1}\\right) \\cong g_{\\mathrm{m} 1}\\left(R_{\\mathrm{L}} \\| r_{\\mathrm{ds} 1}\\right) \\tag{3.17}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.10 The small-signal model of the common-gate amplifier at low frequencies\ndescription:\n[\nname: Vgs1, type: VoltageSource, value: Vgs1, ports: {Np: GND, Nn: Vs1}\nname: Rs, type: Resistor, value: Rs, ports: {N1: Vs1, N2: Vin}\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: gm1Vgs1, type: VoltageControlledCurrentSource, ports: {Np: Vout, Nn: Vs1}\nname: gs1Vs1, type: VoltageControlledCurrentSource, ports: {Np: Vout, Nn: Vs1}\nname: rds1, type: Resistor, value: rds1, ports: {N1: Vout, N2: Vs1}\nname: RL, type: Resistor, value: RL, ports: {N1: Vout, N2: GND}\n]\nextrainfo:This circuit represents a small-signal model of a common-gate amplifier at low frequencies, incorporating voltage sources, resistors, and voltage-controlled current sources. The output voltage is measured across RL, with the input applied to Vin.\n\nFig. 3.10 The small-signal model of the common-gate amplifier at low frequencies.\nimage_name:Fig. 3.10\ndescription:\n[\nname: Vs1, type: VoltageSource, value: Vs1, ports: {Np: GND, Nn: Vs1}\nname: Rs, type: Resistor, value: Rs, ports: {N1: Vs1, N2: Vin}\nname: rds1, type: Resistor, value: rds1, ports: {N1: Vout, N2: Vs1}\nname: RL, type: Resistor, value: RL, ports: {N1: Vout, N2: GND}\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: (gm1+gs1)Vs1, type: VoltageControlledVoltageSource, ports: {N1: Vout, N2: Vs1}\n]\nextrainfo:This circuit is a small-signal model of a common-gate amplifier at low frequencies, featuring voltage sources, resistors, and voltage-controlled current sources. The output voltage is measured across RL, with the input applied to Vin.\n\nFig. 3.11 A simplified small-signal model of the common-gate amplifier.\n\nThe current entering the source of $Q_{1}$ is given by\n\n$$\n\\begin{equation*}\ni_{s}=v_{s 1}\\left(g_{m 1}+g_{s 1}+g_{d s 1}\\right)-v_{\\text {out }} g_{d s 1} \\tag{3.18}\n\\end{equation*}\n$$\n\nCombining (3.17) and (3.18) to determine the input admittance, $\\mathrm{g}_{\\mathrm{in}}=1 / \\mathrm{r}_{\\mathrm{in}}$, we get\n\n$$\n\\begin{equation*}\ng_{\\mathrm{in}} \\equiv \\frac{i_{\\mathrm{s}}}{v_{s 1}} \\equiv \\frac{g_{\\mathrm{m} 1}+g_{\\mathrm{s} 1}+g_{\\mathrm{ds} 1}}{1+\\frac{g_{\\mathrm{ds} 1}}{G_{\\mathrm{L}}}} \\cong \\frac{g_{\\mathrm{m} 1}}{1+\\frac{g_{\\mathrm{ds} 1}}{G_{\\mathrm{L}}}} \\tag{3.19}\n\\end{equation*}\n$$\n\nAlternatively, we have\n\n$$\n\\begin{equation*}\nr_{\\text {in }}=\\frac{1}{g_{i n}}=\\left(\\frac{1}{g_{m 1}}\\left\\|\\frac{1}{g_{s 1}}\\right\\| r_{d s 1}\\right)\\left(1+\\frac{R_{L}}{r_{d s 1}}\\right) \\cong \\frac{1}{g_{m 1}}\\left(1+\\frac{R_{L}}{r_{d s 1}}\\right) \\tag{3.20}\n\\end{equation*}\n$$\n\nKey Point: The common-gate amplifier offers a voltage gain similar to that of the common-source amplifier but with a relatively low input resistance, typically around $1 / \\mathrm{g}_{\\mathrm{m}}$. However, the input resistance can be higher when the amplifier has a significant small-signal load resistance.\n\nWith the p-channel active load shown in Fig. 3.9, $R_{\\mathrm{L}}=r_{\\mathrm{ds} 2}$. In this case, since $R_{L}$ is approximately equal to $r_{\\text {ds }}$, the input impedance, $r_{i n}$, is about $2 / g_{m 1}$ at low frequencies—twice the expected value of $1 / \\mathrm{g}_{\\mathrm{m} 1}$. This increased input impedance must be considered in applications like transmission-line terminations. In some instances, the current-mirror output impedance provided by $Q_{2}$ is much larger than $r_{d s 1}$ (i.e., $\\mathrm{R}_{\\mathrm{L}}>>\\mathrm{r}_{\\mathrm{dst}}$), resulting in a significantly higher input impedance for this common-gate amplifier. This is often observed in integrated circuits and is not widely recognized.\n\nThe attenuation from the input source to the transistor source can be significant in a common-gate amplifier when $R_{s}$ is large. This attenuation is expressed as\n\n$$\n\\begin{equation*}\n\\frac{v_{s 1}}{v_{\\text {in }}}=\\frac{r_{\\text {in }}}{R_{s}+r_{\\text {in }}} \\tag{3.21}\n\\end{equation*}\n$$\n\nUsing (3.20) to replace $r_{\\text {in }}$, we get\n\n$$\n\\begin{equation*}\n\\frac{v_{s 1}}{v_{i n}}=\\frac{\\left(\\frac{1}{g_{m 1}}\\left\\|\\frac{1}{g_{s 1}}\\right\\| r_{d s 1}\\right)\\left(1+\\frac{R_{L}}{r_{d s 1}}\\right)}{R_{s}+\\left(\\frac{1}{g_{m 1}}\\left\\|\\frac{1}{g_{s 1}}\\right\\| r_{d s 1}\\right)\\left(1+\\frac{R_{L}}{r_{d s 1}}\\right)}=\\frac{1}{1+R_{s}\\left(\\frac{g_{m 1}+g_{s 1}+g_{d s 1}}{1+R_{L} / r_{d s 1}}\\right)} \\tag{3.22}\n\\end{equation*}\n$$\n\nUsing (3.17) and (3.22), the overall dc gain is found to be\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{v_{\\text {out }}}{v_{\\text {in }}}=\\frac{\\left(g_{m 1}+g_{s 1}+g_{d s 1}\\right)\\left(R_{L} \\| r_{d s 1}\\right)}{1+R_{s}\\left(\\frac{g_{m 1}+g_{s 1}+g_{d s 1}}{1+R_{L} / r_{d s 1}}\\right)} \\cong \\frac{g_{m 1}\\left(R_{L} \\| r_{d s 1}\\right)}{1+R_{s}\\left(\\frac{g_{m 1}+g_{s 1}+g_{d s 1}}{1+R_{L} / r_{d s 1}}\\right)} \\tag{3.23}\n\\end{equation*}\n$$"
},
{
    "text": "In Section 3.1, we observed that a current mirror can be implemented using just two transistors, with the output impedance of this current source being $r_{\\text{ds2}}$. To enhance this output impedance, a source-degenerated current mirror can be employed, as depicted in Fig. 3.12. The small-signal model for this current mirror is illustrated in Fig. 3.13. Since no small-signal current enters the gate, the gate voltage is 0 V in Fig. 3.13.\n\nIt is important to note that the current $i_{x}$ supplied by the applied voltage source is equivalent to the current through the degeneration resistor, $\\mathrm{R}_{\\mathrm{s}}$. Consequently, we have\n\n$$\n\\begin{equation*}\nv_{s}=i_{x} R_{s} \\tag{3.27}\n\\end{equation*}\n$$\n\nAdditionally, observe that\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{gs}}=-\\mathrm{V}_{\\mathrm{s}} \\tag{3.28}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.12\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: s1, D: P, G: P}\nname: Q2, type: NMOS, ports: {S: s2, D: LOAD, G: P}\nname: Rs, type: Resistor, value: Rs, ports: {N1: s1, N2: GND}\nname: Rs, type: Resistor, value: Rs, ports: {N1: s2, N2: GND}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: VDD, Nn: P}\n]\nextrainfo:The circuit is a current mirror with source degeneration, utilizing two NMOS transistors, Q1 and Q2. The degeneration resistors Rs are connected to the sources of Q1 and Q2, providing feedback to stabilize the current. The input current Iin flows through Q1, and the output current Iout is mirrored through Q2.\n\nFig. 3.12 A current mirror with source degeneration.\n\nFig. 3.13 The small-signal model for the source-degenerated current source.\nimage_name:Fig. 3.13 The small-signal model for the source-degenerated current source\ndescription:The circuit represents a small-signal model of a source-degenerated current source, including a voltage-controlled current source and resistors for source degeneration, with the current ix flowing through the circuit.\n\nBy setting $i_{x}$ equal to the total current through $g_{m 2} \\mathbf{v}_{\\mathrm{gs}}$ and $r_{\\mathrm{ds} 2}$, we obtain\n\n$$\n\\begin{equation*}\ni_{x}=g_{m 2} v_{g s}+\\frac{v_{x}-v_{s}}{r_{d s}} \\tag{3.29}\n\\end{equation*}\n$$\n\nSubstituting (3.27) and (3.28) into (3.29) yields\n\n$$\n\\begin{equation*}\ni_{x}=-i_{x} g_{m 2} R_{s}+\\frac{v_{x}-i_{x} R_{s}}{r_{d s}} \\tag{3.30}\n\\end{equation*}\n$$\n\nRearranging, we determine the output impedance to be\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=\\frac{v_{x}}{i_{x}}=r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{d s 2}\\right)\\right] \\cong r_{d s 2}\\left(1+R_{s} g_{m 2}\\right) \\tag{3.31}\n\\end{equation*}\n$$\n\nwhere $\\mathrm{g}_{\\mathrm{ds} 2}$ is equal to $1 / \\mathrm{r}_{\\mathrm{d} 2}$, which is significantly smaller than $\\mathrm{g}_{\\mathrm{m} 2}$. Thus, the output impedance is increased by a factor approximately equal to $\\left(1+R_{s} g_{m 2}\\right)$.\n\nKey Point: Introducing a small-signal resistance $\\mathrm{R}_{\\mathrm{s}}$ at the source of both transistors in a simple current mirror increases the output resistance by a factor approximately equal to $\\left(1+R_{s} g_{m}\\right)$.\n\nThis formula can be applied to moderately complex circuits to quickly estimate the impedances at a node. An example follows in the derivation of the output impedance of cascode current mirrors. It should be noted that the above derivation neglects the body effect of the transistor, even though the source is not connected to a small-signal ground. As discussed in Section 3.4, since the gate is at a small-signal ground, the body effect can be accounted for by replacing $g_{\\mathrm{m} 2}$ in Eq. (3.31) with $g_{m 2}+g_{s}$. This substitution results in\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=\\frac{v_{x}}{i_{x}}=r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{s 2}+g_{d s 2}\\right)\\right] \\cong r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{s 2}\\right)\\right] \\tag{3.32}\n\\end{equation*}\n$$\n\nwhere $g_{s 2}$ is the body-effect constant. This result is only slightly different since $g_{s}$ is roughly one-fifth of $g_{m}$."
},
{
    "text": "We observed in Section 3.1 that a current mirror can be constructed using just two transistors, with the output impedance of this current source being $r_{\\text{ds2}}$. To enhance this output impedance, a source-degenerated current mirror can be employed, as depicted in Fig. 3.12. The small-signal model for this current mirror is illustrated in Fig. 3.13. Since no small-signal current enters the gate, the gate voltage is 0 V in Fig. 3.13.\n\nIt is important to note that the current $i_{x}$ supplied by the applied voltage source is equal to the current through the degeneration resistor, $\\mathrm{R}_{\\mathrm{s}}$. Consequently, we have\n\n$$\n\\begin{equation*}\nv_{s}=i_{x} R_{s} \\tag{3.27}\n\\end{equation*}\n$$\n\nAdditionally, note that\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{gs}}=-\\mathrm{V}_{\\mathrm{s}} \\tag{3.28}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.12\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: s1, D: P, G: P}\nname: Q2, type: NMOS, ports: {S: s2, D: LOAD, G: P}\nname: Rs, type: Resistor, value: Rs, ports: {N1: s1, N2: GND}\nname: Rs, type: Resistor, value: Rs, ports: {N1: s2, N2: GND}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: VDD, Nn: P}\n]\nextrainfo:The circuit is a current mirror with source degeneration, utilizing two NMOS transistors, Q1 and Q2. The degeneration resistors Rs are connected to the sources of Q1 and Q2, providing feedback to stabilize the current. The input current Iin flows through Q1, and the output current Iout is mirrored through Q2.\n\nFig. 3.12 A current mirror with source degeneration.\n\nFig. 3.13 The small-signal model for the source-degenerated current source.\nimage_name:Fig. 3.13 The small-signal model for the source-degenerated current source\ndescription:The circuit represents a small-signal model of a source-degenerated current source. It includes a voltage-controlled current source and resistors for source degeneration, with the current ix flowing through the circuit.\n\nBy setting $i_{x}$ equal to the total current through $g_{m 2} \\mathbf{v}_{\\mathrm{gs}}$ and $r_{\\mathrm{ds} 2}$, we obtain\n\n$$\n\\begin{equation*}\ni_{x}=g_{m 2} v_{g s}+\\frac{v_{x}-v_{s}}{r_{d s}} \\tag{3.29}\n\\end{equation*}\n$$\n\nSubstituting (3.27) and (3.28) into (3.29) results in\n\n$$\n\\begin{equation*}\ni_{x}=-i_{x} g_{m 2} R_{s}+\\frac{v_{x}-i_{x} R_{s}}{r_{d s}} \\tag{3.30}\n\\end{equation*}\n$$\n\nRearranging, we determine the output impedance to be\n\n$$\n\\begin{equation*}\nr_{\\text{out}}=\\frac{v_{x}}{i_{x}}=r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{d s 2}\\right)\\right] \\cong r_{d s 2}\\left(1+R_{s} g_{m 2}\\right) \\tag{3.31}\n\\end{equation*}\n$$\n\nwhere $\\mathrm{g}_{\\mathrm{ds} 2}$ is equal to $1 / \\mathrm{r}_{\\mathrm{d} 2}$, which is much smaller than $\\mathrm{g}_{\\mathrm{m} 2}$. Thus, the output impedance is increased by a factor approximately equal to $\\left(1+R_{s} g_{m 2}\\right)$.\n\nKey Point: Introducing a small-signal resistance $\\mathrm{R}_{\\mathrm{s}}$ at the source of both transistors in a simple current mirror increases the output resistance by a factor approximately equal to $\\left(1+R_{s} g_{m}\\right)$.\n\nThis formula can often be applied to moderately complex circuits to quickly estimate the impedances at a node. An example follows in the derivation of the output impedance of cascode current mirrors. It should be noted that the above derivation neglects the body effect of the transistor, even though the source is not connected to a small-signal ground. As discussed in Section 3.4, since the gate is at a small-signal ground, the body effect can be accounted for by replacing $g_{\\mathrm{m} 2}$ in Eq. (3.31) with $g_{m 2}+g_{s}$. This substitution yields\n\n$$\n\\begin{equation*}\nr_{\\text{out}}=\\frac{v_{x}}{i_{x}}=r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{s 2}+g_{d s 2}\\right)\\right] \\cong r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{s 2}\\right)\\right] \\tag{3.32}\n\\end{equation*}\n$$\n\nwhere $g_{s 2}$ is the body-effect constant. This result is only slightly different since $g_{s}$ is roughly one-fifth of $g_{m}$."
},
{
    "text": "In Section 3.1, we observed that a current mirror can be constructed using just two transistors, with the output impedance of this current source being $r_{\\text{ds2}}$. To enhance this output impedance, a source-degenerated current mirror can be employed, as depicted in Fig. 3.12. The small-signal model for this current mirror is illustrated in Fig. 3.13. Given that no small-signal current enters the gate, the gate voltage in Fig. 3.13 is 0 V.\n\nIt is important to note that the current $i_{x}$ supplied by the applied voltage source is equivalent to the current passing through the degeneration resistor, $\\mathrm{R}_{\\mathrm{s}}$. Consequently, we have\n\n$$\n\\begin{equation*}\nv_{s}=i_{x} R_{s} \\tag{3.27}\n\\end{equation*}\n$$\n\nAdditionally, it should be noted that\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{gs}}=-\\mathrm{V}_{\\mathrm{s}} \\tag{3.28}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.12\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: s1, D: P, G: P}\nname: Q2, type: NMOS, ports: {S: s2, D: LOAD, G: P}\nname: Rs, type: Resistor, value: Rs, ports: {N1: s1, N2: GND}\nname: Rs, type: Resistor, value: Rs, ports: {N1: s2, N2: GND}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: VDD, Nn: P}\n]\nextrainfo:The circuit is a current mirror with source degeneration, utilizing two NMOS transistors, Q1 and Q2. The degeneration resistors Rs are connected to the sources of Q1 and Q2, providing feedback to stabilize the current. The input current Iin flows through Q1, and the output current Iout is mirrored through Q2.\n\nFig. 3.12 A current mirror with source degeneration.\n\nFig. 3.13 The small-signal model for the source-degenerated current source.\nimage_name:Fig. 3.13 The small-signal model for the source-degenerated current source\ndescription:The circuit represents a small-signal model of a source-degenerated current source, incorporating a voltage-controlled current source and resistors for source degeneration, with the current ix flowing through the circuit.\n\nBy setting $i_{x}$ equal to the total current through $g_{m 2} \\mathbf{v}_{\\mathrm{gs}}$ and $r_{\\mathrm{ds} 2}$, we obtain\n\n$$\n\\begin{equation*}\ni_{x}=g_{m 2} v_{g s}+\\frac{v_{x}-v_{s}}{r_{d s}} \\tag{3.29}\n\\end{equation*}\n$$\n\nSubstituting (3.27) and (3.28) into (3.29) yields\n\n$$\n\\begin{equation*}\ni_{x}=-i_{x} g_{m 2} R_{s}+\\frac{v_{x}-i_{x} R_{s}}{r_{d s}} \\tag{3.30}\n\\end{equation*}\n$$\n\nRearranging, we determine the output impedance to be\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=\\frac{v_{x}}{i_{x}}=r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{d s 2}\\right)\\right] \\cong r_{d s 2}\\left(1+R_{s} g_{m 2}\\right) \\tag{3.31}\n\\end{equation*}\n$$\n\nwhere $\\mathrm{g}_{\\mathrm{ds} 2}$ is equal to $1 / \\mathrm{r}_{\\mathrm{d} 2}$, which is significantly less than $\\mathrm{g}_{\\mathrm{m} 2}$. Thus, the output impedance is increased by a factor approximately equal to $\\left(1+R_{s} g_{m 2}\\right)$.\n\nKey Point: Introducing a small-signal resistance $\\mathrm{R}_{\\mathrm{s}}$ at the source of both transistors in a simple current mirror increases the output resistance by a factor approximately equal to $\\left(1+R_{s} g_{m}\\right)$.\n\nThis formula can be applied to moderately complex circuits to quickly estimate the impedances at a node. An example follows in the derivation of the output impedance of cascode current mirrors. It is worth noting that the above derivation neglects the body effect of the transistor, even though the source is not connected to a small-signal ground. As discussed in Section 3.4, since the gate is at a small-signal ground, the body effect can be accounted for by replacing $g_{\\mathrm{m} 2}$ in Eq. (3.31) with $g_{m 2}+g_{s}$. This substitution leads to\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=\\frac{v_{x}}{i_{x}}=r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{s 2}+g_{d s 2}\\right)\\right] \\cong r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{s 2}\\right)\\right] \\tag{3.32}\n\\end{equation*}\n$$\n\nwhere $g_{s 2}$ is the body-effect constant. This result differs only slightly since $g_{s}$ is roughly one-fifth of $g_{m}$."
},
{
    "text": "In Section 3.1, we observed that a current mirror can be constructed using just two transistors, with the output impedance of this current source identified as $r_{\\text{ds2}}$. To enhance this output impedance, a source-degenerated current mirror can be employed, as depicted in Fig. 3.12. The small-signal model for this current mirror is illustrated in Fig. 3.13. Since no small-signal current enters the gate, the gate voltage is 0 V in Fig. 3.13.\n\nIt is important to note that the current $i_{x}$ supplied by the applied voltage source is equivalent to the current flowing through the degeneration resistor, $\\mathrm{R}_{\\mathrm{s}}$. Consequently, we have\n\n$$\n\\begin{equation*}\nv_{s}=i_{x} R_{s} \\tag{3.27}\n\\end{equation*}\n$$\n\nAdditionally, observe that\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{gs}}=-\\mathrm{V}_{\\mathrm{s}} \\tag{3.28}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.12\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: s1, D: P, G: P}\nname: Q2, type: NMOS, ports: {S: s2, D: LOAD, G: P}\nname: Rs, type: Resistor, value: Rs, ports: {N1: s1, N2: GND}\nname: Rs, type: Resistor, value: Rs, ports: {N1: s2, N2: GND}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: VDD, Nn: P}\n]\nextrainfo:The circuit is a current mirror with source degeneration, utilizing two NMOS transistors, Q1 and Q2. The degeneration resistors Rs are connected to the sources of Q1 and Q2, providing feedback to stabilize the current. The input current Iin flows through Q1, and the output current Iout is mirrored through Q2.\n\nFig. 3.12 A current mirror with source degeneration.\n\nFig. 3.13 The small-signal model for the source-degenerated current source.\nimage_name:Fig. 3.13 The small-signal model for the source-degenerated current source\ndescription:The circuit represents a small-signal model of a source-degenerated current source, including a voltage-controlled current source and resistors for source degeneration, with the current ix flowing through the circuit.\n\nBy setting $i_{x}$ equal to the total current through $g_{m 2} \\mathbf{v}_{\\mathrm{gs}}$ and $r_{\\mathrm{ds} 2}$, we obtain\n\n$$\n\\begin{equation*}\ni_{x}=g_{m 2} v_{g s}+\\frac{v_{x}-v_{s}}{r_{d s}} \\tag{3.29}\n\\end{equation*}\n$$\n\nSubstituting (3.27) and (3.28) into (3.29) yields\n\n$$\n\\begin{equation*}\ni_{x}=-i_{x} g_{m 2} R_{s}+\\frac{v_{x}-i_{x} R_{s}}{r_{d s}} \\tag{3.30}\n\\end{equation*}\n$$\n\nRearranging, we determine the output impedance to be\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=\\frac{v_{x}}{i_{x}}=r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{d s 2}\\right)\\right] \\cong r_{d s 2}\\left(1+R_{s} g_{m 2}\\right) \\tag{3.31}\n\\end{equation*}\n$$\n\nwhere $\\mathrm{g}_{\\mathrm{ds} 2}$ equals $1 / \\mathrm{r}_{\\mathrm{d} 2}$, which is significantly smaller than $\\mathrm{g}_{\\mathrm{m} 2}$. Thus, the output impedance is increased by a factor approximately equal to $\\left(1+R_{s} g_{m 2}\\right)$.\n\nKey Point: Introducing a small-signal resistance $\\mathrm{R}_{\\mathrm{s}}$ at the source of both transistors in a simple current mirror increases the output resistance by a factor approximately equal to $\\left(1+R_{s} g_{m}\\right)$.\n\nThis formula can be applied to moderately complex circuits to quickly estimate the impedances at a node. An example follows in the derivation of the output impedance of cascode current mirrors. It should be noted that the above derivation neglects the body effect of the transistor, even though the source is not connected to a small-signal ground. As discussed in Section 3.4, since the gate is at a small-signal ground, the body effect can be accounted for by replacing $g_{\\mathrm{m} 2}$ in Eq. (3.31) with $g_{m 2}+g_{s}$. This substitution leads to\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=\\frac{v_{x}}{i_{x}}=r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{s 2}+g_{d s 2}\\right)\\right] \\cong r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{s 2}\\right)\\right] \\tag{3.32}\n\\end{equation*}\n$$\n\nwhere $g_{s 2}$ is the body-effect constant. This result differs only slightly since $g_{s}$ is approximately one-fifth of $g_{m}$."
},
{
    "text": "In Section 3.1, we observed that a current mirror can be implemented using just two transistors, with the output impedance of this current source being $r_{\\text{ds2}}$. To enhance this output impedance, a source-degenerated current mirror can be employed, as illustrated in Fig. 3.12. The small-signal model for this current mirror is depicted in Fig. 3.13. Given that no small-signal current flows into the gate, the gate voltage is 0 V in Fig. 3.13.\n\nIt is important to note that the current $i_{x}$ sourced by the applied voltage source is equivalent to the current through the degeneration resistor, $\\mathrm{R}_{\\mathrm{s}}$. Consequently, we have\n\n$$\n\\begin{equation*}\nv_{s}=i_{x} R_{s} \\tag{3.27}\n\\end{equation*}\n$$\n\nAdditionally, observe that\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{gs}}=-\\mathrm{V}_{\\mathrm{s}} \\tag{3.28}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.12\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: s1, D: P, G: P}\nname: Q2, type: NMOS, ports: {S: s2, D: LOAD, G: P}\nname: Rs, type: Resistor, value: Rs, ports: {N1: s1, N2: GND}\nname: Rs, type: Resistor, value: Rs, ports: {N1: s2, N2: GND}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: VDD, Nn: P}\n]\nextrainfo:The circuit is a current mirror with source degeneration, utilizing two NMOS transistors, Q1 and Q2. The degeneration resistors Rs are connected to the sources of Q1 and Q2, providing feedback to stabilize the current. The input current Iin flows through Q1, and the output current Iout is mirrored through Q2.\n\nFig. 3.12 A current mirror with source degeneration.\n\nFig. 3.13 The small-signal model for the source-degenerated current source.\nimage_name:Fig. 3.13 The small-signal model for the source-degenerated current source\ndescription:The circuit represents a small-signal model of a source-degenerated current source, incorporating a voltage-controlled current source and resistors for source degeneration, with the current ix flowing through the circuit.\n\nBy setting $i_{x}$ equal to the total current through $g_{m 2} \\mathbf{v}_{\\mathrm{gs}}$ and $r_{\\mathrm{ds} 2}$, we obtain\n\n$$\n\\begin{equation*}\ni_{x}=g_{m 2} v_{g s}+\\frac{v_{x}-v_{s}}{r_{d s}} \\tag{3.29}\n\\end{equation*}\n$$\n\nSubstituting (3.27) and (3.28) into (3.29) yields\n\n$$\n\\begin{equation*}\ni_{x}=-i_{x} g_{m 2} R_{s}+\\frac{v_{x}-i_{x} R_{s}}{r_{d s}} \\tag{3.30}\n\\end{equation*}\n$$\n\nRearranging, we determine the output impedance to be\n\n$$\n\\begin{equation*}\nr_{\\text{out}}=\\frac{v_{x}}{i_{x}}=r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{d s 2}\\right)\\right] \\cong r_{d s 2}\\left(1+R_{s} g_{m 2}\\right) \\tag{3.31}\n\\end{equation*}\n$$\n\nwhere $\\mathrm{g}_{\\mathrm{ds} 2}$ is equal to $1 / \\mathrm{r}_{\\mathrm{d} 2}$, which is significantly less than $\\mathrm{g}_{\\mathrm{m} 2}$. Thus, the output impedance is increased by a factor approximately equal to $\\left(1+R_{s} g_{m 2}\\right)$.\n\nKey Point: Introducing a small-signal resistance $\\mathrm{R}_{\\mathrm{s}}$ at the source of both transistors in a simple current mirror increases the output resistance by a factor approximately equal to $\\left(1+R_{s} g_{m}\\right)$.\n\nThis formula can be applied to moderately complex circuits to quickly estimate the impedances at a node. An example follows in the derivation of the output impedance of cascode current mirrors. It should be noted that the above derivation neglects the body effect of the transistor, even though the source is not connected to a small-signal ground. As discussed in Section 3.4, since the gate is at a small-signal ground, the body effect can be accounted for by replacing $g_{\\mathrm{m} 2}$ in Eq. (3.31) with $g_{m 2}+g_{s}$. This substitution leads to\n\n$$\n\\begin{equation*}\nr_{\\text{out}}=\\frac{v_{x}}{i_{x}}=r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{s 2}+g_{d s 2}\\right)\\right] \\cong r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{s 2}\\right)\\right] \\tag{3.32}\n\\end{equation*}\n$$\n\nwhere $g_{s 2}$ is the body-effect constant. This result is only slightly different since $g_{s}$ is roughly one-fifth of $g_{m}$."
},
{
    "text": "In Section 3.1, we observed that a current mirror can be constructed using just two transistors, with the output impedance of this current source identified as $r_{\\text{ds2}}$. To enhance this output impedance, a source-degenerated current mirror can be employed, as depicted in Fig. 3.12. The small-signal model for this current mirror is illustrated in Fig. 3.13. Given that no small-signal current flows into the gate, the gate voltage is 0 V in Fig. 3.13.\n\nIt is important to note that the current $i_{x}$ supplied by the applied voltage source equals the current through the degeneration resistor, $\\mathrm{R}_{\\mathrm{s}}$. Consequently, we have\n\n$$\n\\begin{equation*}\nv_{s}=i_{x} R_{s} \\tag{3.27}\n\\end{equation*}\n$$\n\nAdditionally, observe that\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{gs}}=-\\mathrm{V}_{\\mathrm{s}} \\tag{3.28}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.12\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: s1, D: P, G: P}\nname: Q2, type: NMOS, ports: {S: s2, D: LOAD, G: P}\nname: Rs, type: Resistor, value: Rs, ports: {N1: s1, N2: GND}\nname: Rs, type: Resistor, value: Rs, ports: {N1: s2, N2: GND}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: VDD, Nn: P}\n]\nextrainfo:The circuit is a current mirror with source degeneration, utilizing two NMOS transistors, Q1 and Q2. The degeneration resistors Rs are connected to the sources of Q1 and Q2, providing feedback to stabilize the current. The input current Iin flows through Q1, and the output current Iout is mirrored through Q2.\n\nFig. 3.12 A current mirror with source degeneration.\n\nFig. 3.13 The small-signal model for the source-degenerated current source.\nimage_name:Fig. 3.13 The small-signal model for the source-degenerated current source\ndescription:The circuit represents a small-signal model of a source-degenerated current source, including a voltage-controlled current source and resistors for source degeneration, with the current ix flowing through the circuit.\n\nBy setting $i_{x}$ equal to the total current through $g_{m 2} \\mathbf{v}_{\\mathrm{gs}}$ and $r_{\\mathrm{ds} 2}$, we obtain\n\n$$\n\\begin{equation*}\ni_{x}=g_{m 2} v_{g s}+\\frac{v_{x}-v_{s}}{r_{d s}} \\tag{3.29}\n\\end{equation*}\n$$\n\nSubstituting (3.27) and (3.28) into (3.29) results in\n\n$$\n\\begin{equation*}\ni_{x}=-i_{x} g_{m 2} R_{s}+\\frac{v_{x}-i_{x} R_{s}}{r_{d s}} \\tag{3.30}\n\\end{equation*}\n$$\n\nRearranging, we determine the output impedance to be\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=\\frac{v_{x}}{i_{x}}=r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{d s 2}\\right)\\right] \\cong r_{d s 2}\\left(1+R_{s} g_{m 2}\\right) \\tag{3.31}\n\\end{equation*}\n$$\n\nwhere $\\mathrm{g}_{\\mathrm{ds} 2}$ equals $1 / \\mathrm{r}_{\\mathrm{d} 2}$, which is significantly less than $\\mathrm{g}_{\\mathrm{m} 2}$. Thus, the output impedance increases by a factor approximately equal to $\\left(1+R_{s} g_{m 2}\\right)$.\n\nKey Point: Introducing a small-signal resistance $\\mathrm{R}_{\\mathrm{s}}$ at the source of both transistors in a simple current mirror increases the output resistance by a factor roughly equal to $\\left(1+R_{s} g_{m}\\right)$.\n\nThis formula can be applied to moderately complex circuits to quickly estimate the impedances at a node. An example follows in the derivation of the output impedance of cascode current mirrors. It should be noted that the above derivation neglects the body effect of the transistor, even though the source is not connected to a small-signal ground. As discussed in Section 3.4, since the gate is at a small-signal ground, the body effect can be accounted for by replacing $g_{\\mathrm{m} 2}$ in Eq. (3.31) with $g_{m 2}+g_{s}$. This substitution yields\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=\\frac{v_{x}}{i_{x}}=r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{s 2}+g_{d s 2}\\right)\\right] \\cong r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{s 2}\\right)\\right] \\tag{3.32}\n\\end{equation*}\n$$\n\nwhere $g_{s 2}$ is the body-effect constant. This result differs only slightly since $g_{s}$ is approximately one-fifth of $g_{m}$."
},
{
    "text": "In Section 3.1, we observed that a current mirror can be implemented using just two transistors, with the output impedance of this current source being $r_{\\text{ds2}}$. To enhance this output impedance, a source-degenerated current mirror can be employed, as depicted in Fig. 3.12. The small-signal model for this current mirror is illustrated in Fig. 3.13. Since no small-signal current flows into the gate, the gate voltage is 0 V in Fig. 3.13.\n\nIt should be noted that the current $i_{x}$ sourced by the applied voltage source is equivalent to the current through the degeneration resistor, $\\mathrm{R}_{\\mathrm{s}}$. Consequently, we have\n\n$$\n\\begin{equation*}\nv_{s}=i_{x} R_{s} \\tag{3.27}\n\\end{equation*}\n$$\n\nAdditionally, observe that\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{gs}}=-\\mathrm{V}_{\\mathrm{s}} \\tag{3.28}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.12\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: s1, D: P, G: P}\nname: Q2, type: NMOS, ports: {S: s2, D: LOAD, G: P}\nname: Rs, type: Resistor, value: Rs, ports: {N1: s1, N2: GND}\nname: Rs, type: Resistor, value: Rs, ports: {N1: s2, N2: GND}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: VDD, Nn: P}\n]\nextrainfo:The circuit is a current mirror with source degeneration, utilizing two NMOS transistors, Q1 and Q2. The degeneration resistors Rs are connected to the sources of Q1 and Q2, providing feedback to stabilize the current. The input current Iin flows through Q1, and the output current Iout is mirrored through Q2.\n\nFig. 3.12 A current mirror with source degeneration.\n\nFig. 3.13 The small-signal model for the source-degenerated current source.\nimage_name:Fig. 3.13 The small-signal model for the source-degenerated current source\ndescription:The circuit represents a small-signal model of a source-degenerated current source, including a voltage-controlled current source and resistors for source degeneration, with the current ix flowing through the circuit.\n\nBy setting $i_{x}$ equal to the total current through $g_{m 2} \\mathbf{v}_{\\mathrm{gs}}$ and $r_{\\mathrm{ds} 2}$, we obtain\n\n$$\n\\begin{equation*}\ni_{x}=g_{m 2} v_{g s}+\\frac{v_{x}-v_{s}}{r_{d s}} \\tag{3.29}\n\\end{equation*}\n$$\n\nSubstituting (3.27) and (3.28) into (3.29) yields\n\n$$\n\\begin{equation*}\ni_{x}=-i_{x} g_{m 2} R_{s}+\\frac{v_{x}-i_{x} R_{s}}{r_{d s}} \\tag{3.30}\n\\end{equation*}\n$$\n\nRearranging, we determine the output impedance to be\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=\\frac{v_{x}}{i_{x}}=r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{d s 2}\\right)\\right] \\cong r_{d s 2}\\left(1+R_{s} g_{m 2}\\right) \\tag{3.31}\n\\end{equation*}\n$$\n\nwhere $\\mathrm{g}_{\\mathrm{ds} 2}$ is equal to $1 / \\mathrm{r}_{\\mathrm{d} 2}$, which is much smaller than $\\mathrm{g}_{\\mathrm{m} 2}$. Thus, the output impedance is increased by a factor approximately equal to $\\left(1+R_{s} g_{m 2}\\right)$.\n\nKey Point: Introducing a small-signal resistance $\\mathrm{R}_{\\mathrm{s}}$ at the source of both transistors in a simple current mirror increases the output resistance by a factor approximately equal to $\\left(1+R_{s} g_{m}\\right)$.\n\nThis formula can be applied to moderately complex circuits to quickly estimate the impedances at a node. An example follows in the derivation of the output impedance of cascode current mirrors. It is important to note that the above derivation neglects the body effect of the transistor, even though the source is not connected to a small-signal ground. As discussed in Section 3.4, since the gate is at a small-signal ground, the body effect can be accounted for by replacing $g_{\\mathrm{m} 2}$ in Eq. (3.31) with $g_{m 2}+g_{s}$. This substitution results in\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=\\frac{v_{x}}{i_{x}}=r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{s 2}+g_{d s 2}\\right)\\right] \\cong r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{s 2}\\right)\\right] \\tag{3.32}\n\\end{equation*}\n$$\n\nwhere $g_{s 2}$ is the body-effect constant. This result differs only slightly since $g_{s}$ is roughly one-fifth of $g_{m}$."
},
{
    "text": "In Section 3.1, we observed that a current mirror can be implemented using just two transistors, with the output impedance of this current source being $r_{\\text{ds2}}$. To enhance this output impedance, a source-degenerated current mirror can be employed, as depicted in Fig. 3.12. The small-signal model for this current mirror is illustrated in Fig. 3.13. Since no small-signal current flows into the gate, the gate voltage is 0 V in Fig. 3.13.\n\nNote that the current $i_{x}$ sourced by the applied voltage source equals the current through the degeneration resistor, $\\mathrm{R}_{\\mathrm{s}}$. Thus, we have\n\n$$\n\\begin{equation*}\nv_{s}=i_{x} R_{s} \\tag{3.27}\n\\end{equation*}\n$$\n\nAdditionally, observe that\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{gs}}=-\\mathrm{V}_{\\mathrm{s}} \\tag{3.28}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.12\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: s1, D: P, G: P}\nname: Q2, type: NMOS, ports: {S: s2, D: LOAD, G: P}\nname: Rs, type: Resistor, value: Rs, ports: {N1: s1, N2: GND}\nname: Rs, type: Resistor, value: Rs, ports: {N1: s2, N2: GND}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: VDD, Nn: P}\n]\nextrainfo:The circuit is a current mirror with source degeneration, utilizing two NMOS transistors, Q1 and Q2. The degeneration resistors Rs are connected to the sources of Q1 and Q2, providing feedback to stabilize the current. The input current Iin flows through Q1, and the output current Iout is mirrored through Q2.\n\nFig. 3.12 A current mirror with source degeneration.\n\nFig. 3.13 The small-signal model for the source-degenerated current source.\nimage_name:Fig. 3.13 The small-signal model for the source-degenerated current source\ndescription:The circuit represents a small-signal model of a source-degenerated current source, including a voltage-controlled current source and resistors for source degeneration, with the current ix flowing through the circuit.\n\nBy setting $i_{x}$ equal to the total current through $g_{m 2} \\mathbf{v}_{\\mathrm{gs}}$ and $r_{\\mathrm{ds} 2}$, we get\n\n$$\n\\begin{equation*}\ni_{x}=g_{m 2} v_{g s}+\\frac{v_{x}-v_{s}}{r_{d s}} \\tag{3.29}\n\\end{equation*}\n$$\n\nSubstituting (3.27) and (3.28) into (3.29) yields\n\n$$\n\\begin{equation*}\ni_{x}=-i_{x} g_{m 2} R_{s}+\\frac{v_{x}-i_{x} R_{s}}{r_{d s}} \\tag{3.30}\n\\end{equation*}\n$$\n\nRearranging, we determine the output impedance to be\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=\\frac{v_{x}}{i_{x}}=r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{d s 2}\\right)\\right] \\cong r_{d s 2}\\left(1+R_{s} g_{m 2}\\right) \\tag{3.31}\n\\end{equation*}\n$$\n\nwhere $\\mathrm{g}_{\\mathrm{ds} 2}$ is equal to $1 / \\mathrm{r}_{\\mathrm{d} 2}$, which is much smaller than $\\mathrm{g}_{\\mathrm{m} 2}$. Hence, the output impedance is increased by a factor approximately equal to $\\left(1+R_{s} g_{m 2}\\right)$.\n\nKey Point: Introducing a small-signal resistance $\\mathrm{R}_{\\mathrm{s}}$ at the source of both transistors in a simple current mirror increases the output resistance by a factor approximately equal to $\\left(1+R_{s} g_{m}\\right)$.\n\nThis formula can be applied to moderately complex circuits to quickly estimate the impedances at a node. An example follows in the derivation of the output impedance of cascode current mirrors. It should be noted that the above derivation neglects the body effect of the transistor, even though the source is not connected to a small-signal ground. As discussed in Section 3.4, since the gate is at a small-signal ground, the body effect can be accounted for by replacing $g_{\\mathrm{m} 2}$ in Eq. (3.31) with $g_{m 2}+g_{s}$. This substitution leads to\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=\\frac{v_{x}}{i_{x}}=r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{s 2}+g_{d s 2}\\right)\\right] \\cong r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{s 2}\\right)\\right] \\tag{3.32}\n\\end{equation*}\n$$\n\nwhere $g_{s 2}$ is the body-effect constant. This result differs only slightly since $g_{s}$ is roughly one-fifth of $g_{m}$."
},
{
    "text": "In Section 3.1, we observed that a current mirror can be constructed using just two transistors, with the output impedance of this current source being $r_{\\text{ds2}}$. To enhance this output impedance, a source-degenerated current mirror can be employed, as depicted in Fig. 3.12. The small-signal model for this current mirror is illustrated in Fig. 3.13. Since no small-signal current flows into the gate, the gate voltage is 0 V in Fig. 3.13.\n\nIt should be noted that the current $i_{x}$ sourced by the applied voltage source equals the current through the degeneration resistor, $\\mathrm{R}_{\\mathrm{s}}$. Consequently, we have\n\n$$\n\\begin{equation*}\nv_{s}=i_{x} R_{s} \\tag{3.27}\n\\end{equation*}\n$$\n\nAdditionally, observe that\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{gs}}=-\\mathrm{V}_{\\mathrm{s}} \\tag{3.28}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.12\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: s1, D: P, G: P}\nname: Q2, type: NMOS, ports: {S: s2, D: LOAD, G: P}\nname: Rs, type: Resistor, value: Rs, ports: {N1: s1, N2: GND}\nname: Rs, type: Resistor, value: Rs, ports: {N1: s2, N2: GND}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: VDD, Nn: P}\n]\nextrainfo:The circuit is a current mirror with source degeneration, utilizing two NMOS transistors, Q1 and Q2. The degeneration resistors Rs are connected to the sources of Q1 and Q2, providing feedback to stabilize the current. The input current Iin flows through Q1, and the output current Iout is mirrored through Q2.\n\nFig. 3.12 A current mirror with source degeneration.\n\nFig. 3.13 The small-signal model for the source-degenerated current source.\nimage_name:Fig. 3.13 The small-signal model for the source-degenerated current source\ndescription:The circuit represents a small-signal model of a source-degenerated current source, including a voltage-controlled current source and resistors for source degeneration, with the current ix flowing through the circuit.\n\nBy setting $i_{x}$ equal to the total current through $g_{m 2} \\mathbf{v}_{\\mathrm{gs}}$ and $r_{\\mathrm{ds} 2}$, we obtain\n\n$$\n\\begin{equation*}\ni_{x}=g_{m 2} v_{g s}+\\frac{v_{x}-v_{s}}{r_{d s}} \\tag{3.29}\n\\end{equation*}\n$$\n\nSubstituting (3.27) and (3.28) into (3.29) results in\n\n$$\n\\begin{equation*}\ni_{x}=-i_{x} g_{m 2} R_{s}+\\frac{v_{x}-i_{x} R_{s}}{r_{d s}} \\tag{3.30}\n\\end{equation*}\n$$\n\nRearranging, we determine the output impedance to be\n\n$$\n\\begin{equation*}\nr_{\\text{out}}=\\frac{v_{x}}{i_{x}}=r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{d s 2}\\right)\\right] \\cong r_{d s 2}\\left(1+R_{s} g_{m 2}\\right) \\tag{3.31}\n\\end{equation*}\n$$\n\nwhere $\\mathrm{g}_{\\mathrm{ds} 2}$ is equal to $1 / \\mathrm{r}_{\\mathrm{d} 2}$, which is much smaller than $\\mathrm{g}_{\\mathrm{m} 2}$. Thus, the output impedance is increased by a factor approximately equal to $\\left(1+R_{s} g_{m 2}\\right)$.\n\nKey Point: Introducing a small-signal resistance $\\mathrm{R}_{\\mathrm{s}}$ at the source of both transistors in a simple current mirror increases the output resistance by a factor approximately equal to $\\left(1+R_{s} g_{m}\\right)$.\n\nThis formula can be applied to moderately complex circuits to quickly estimate the impedances at a node. An example follows in the derivation of the output impedance of cascode current mirrors. It is important to note that the above derivation neglects the body effect of the transistor, even though the source is not connected to a small-signal ground. As discussed in Section 3.4, since the gate is at a small-signal ground, the body effect can be accounted for by replacing $g_{\\mathrm{m} 2}$ in Eq. (3.31) with $g_{m 2}+g_{s}$. This substitution yields\n\n$$\n\\begin{equation*}\nr_{\\text{out}}=\\frac{v_{x}}{i_{x}}=r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{s 2}+g_{d s 2}\\right)\\right] \\cong r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{s 2}\\right)\\right] \\tag{3.32}\n\\end{equation*}\n$$\n\nwhere $g_{s 2}$ is the body-effect constant. This result differs only slightly since $g_{s}$ is approximately one-fifth of $g_{m}$."
},
{
    "text": "In Section 3.1, we observed that a current mirror can be constructed using just two transistors, with the output impedance of this current source being $r_{\\text{ds2}}$. To enhance this output impedance, a source-degenerated current mirror can be employed, as depicted in Fig. 3.12. The small-signal model for this current mirror is illustrated in Fig. 3.13. Since no small-signal current flows into the gate, the gate voltage is 0 V in Fig. 3.13.\n\nIt is important to note that the current $i_{x}$ supplied by the applied voltage source is equivalent to the current through the degeneration resistor, $\\mathrm{R}_{\\mathrm{s}}$. Consequently, we have\n\n$$\n\\begin{equation*}\nv_{s}=i_{x} R_{s} \\tag{3.27}\n\\end{equation*}\n$$\n\nAdditionally, observe that\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{gs}}=-\\mathrm{V}_{\\mathrm{s}} \\tag{3.28}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.12\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: s1, D: P, G: P}\nname: Q2, type: NMOS, ports: {S: s2, D: LOAD, G: P}\nname: Rs, type: Resistor, value: Rs, ports: {N1: s1, N2: GND}\nname: Rs, type: Resistor, value: Rs, ports: {N1: s2, N2: GND}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: VDD, Nn: P}\n]\nextrainfo:The circuit is a current mirror with source degeneration, utilizing two NMOS transistors, Q1 and Q2. The degeneration resistors Rs are connected to the sources of Q1 and Q2, providing feedback to stabilize the current. The input current Iin flows through Q1, and the output current Iout is mirrored through Q2.\n\nFig. 3.12 A current mirror with source degeneration.\n\nFig. 3.13 The small-signal model for the source-degenerated current source.\nimage_name:Fig. 3.13 The small-signal model for the source-degenerated current source\ndescription:The circuit represents a small-signal model of a source-degenerated current source. It includes a voltage-controlled current source and resistors for source degeneration, with the current ix flowing through the circuit.\n\nBy setting $i_{x}$ equal to the total current through $g_{m 2} \\mathbf{v}_{\\mathrm{gs}}$ and $r_{\\mathrm{ds} 2}$, we obtain\n\n$$\n\\begin{equation*}\ni_{x}=g_{m 2} v_{g s}+\\frac{v_{x}-v_{s}}{r_{d s}} \\tag{3.29}\n\\end{equation*}\n$$\n\nSubstituting (3.27) and (3.28) into (3.29) yields\n\n$$\n\\begin{equation*}\ni_{x}=-i_{x} g_{m 2} R_{s}+\\frac{v_{x}-i_{x} R_{s}}{r_{d s}} \\tag{3.30}\n\\end{equation*}\n$$\n\nRearranging, we determine the output impedance to be\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=\\frac{v_{x}}{i_{x}}=r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{d s 2}\\right)\\right] \\cong r_{d s 2}\\left(1+R_{s} g_{m 2}\\right) \\tag{3.31}\n\\end{equation*}\n$$\n\nwhere $\\mathrm{g}_{\\mathrm{ds} 2}$ is equal to $1 / \\mathrm{r}_{\\mathrm{d} 2}$, which is much smaller than $\\mathrm{g}_{\\mathrm{m} 2}$. Thus, the output impedance is increased by a factor approximately equal to $\\left(1+R_{s} g_{m 2}\\right)$.\n\nKey Point: Introducing a small-signal resistance $\\mathrm{R}_{\\mathrm{s}}$ at the source of both transistors in a simple current mirror increases the output resistance by a factor approximately equal to $\\left(1+R_{s} g_{m}\\right)$.\n\nThis formula can be applied to moderately complex circuits to quickly estimate the impedances at a node. An example follows in the derivation of the output impedance of cascode current mirrors. It should be noted that the above derivation neglects the body effect of the transistor, even though the source is not connected to a small-signal ground. As discussed in Section 3.4, since the gate is at a small-signal ground, the body effect can be accounted for by replacing $g_{\\mathrm{m} 2}$ in Eq. (3.31) with $g_{m 2}+g_{s}$. This substitution results in\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=\\frac{v_{x}}{i_{x}}=r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{s 2}+g_{d s 2}\\right)\\right] \\cong r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{s 2}\\right)\\right] \\tag{3.32}\n\\end{equation*}\n$$\n\nwhere $g_{s 2}$ is the body-effect constant. This result is only slightly different since $g_{s}$ is roughly one-fifth of $g_{m}$."
},
{
    "text": "In Section 3.1, we observed that a current mirror can be constructed using just two transistors, with the output impedance of this current source being $r_{\\text{ds2}}$. To enhance this output impedance, a source-degenerated current mirror can be employed, as depicted in Fig. 3.12. The small-signal model for this current mirror is illustrated in Fig. 3.13. Since no small-signal current enters the gate, the gate voltage is 0 V in Fig. 3.13.\n\nIt is important to note that the current $i_{x}$ supplied by the applied voltage source is equivalent to the current through the degeneration resistor, $\\mathrm{R}_{\\mathrm{s}}$. Consequently, we have\n\n$$\n\\begin{equation*}\nv_{s}=i_{x} R_{s} \\tag{3.27}\n\\end{equation*}\n$$\n\nAdditionally, observe that\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{gs}}=-\\mathrm{V}_{\\mathrm{s}} \\tag{3.28}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.12\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: s1, D: P, G: P}\nname: Q2, type: NMOS, ports: {S: s2, D: LOAD, G: P}\nname: Rs, type: Resistor, value: Rs, ports: {N1: s1, N2: GND}\nname: Rs, type: Resistor, value: Rs, ports: {N1: s2, N2: GND}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: VDD, Nn: P}\n]\nextrainfo:The circuit is a current mirror with source degeneration, utilizing two NMOS transistors, Q1 and Q2. The degeneration resistors Rs are connected to the sources of Q1 and Q2, providing feedback to stabilize the current. The input current Iin flows through Q1, and the output current Iout is mirrored through Q2.\n\nFig. 3.12 A current mirror with source degeneration.\n\nFig. 3.13 The small-signal model for the source-degenerated current source.\nimage_name:Fig. 3.13 The small-signal model for the source-degenerated current source\ndescription:The circuit represents a small-signal model of a source-degenerated current source, including a voltage-controlled current source and resistors for source degeneration, with the current ix flowing through the circuit.\n\nBy setting $i_{x}$ equal to the total current through $g_{m 2} \\mathbf{v}_{\\mathrm{gs}}$ and $r_{\\mathrm{ds} 2}$, we obtain\n\n$$\n\\begin{equation*}\ni_{x}=g_{m 2} v_{g s}+\\frac{v_{x}-v_{s}}{r_{d s}} \\tag{3.29}\n\\end{equation*}\n$$\n\nSubstituting (3.27) and (3.28) into (3.29) yields\n\n$$\n\\begin{equation*}\ni_{x}=-i_{x} g_{m 2} R_{s}+\\frac{v_{x}-i_{x} R_{s}}{r_{d s}} \\tag{3.30}\n\\end{equation*}\n$$\n\nRearranging, we determine the output impedance to be\n\n$$\n\\begin{equation*}\nr_{\\text{out}}=\\frac{v_{x}}{i_{x}}=r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{d s 2}\\right)\\right] \\cong r_{d s 2}\\left(1+R_{s} g_{m 2}\\right) \\tag{3.31}\n\\end{equation*}\n$$\n\nwhere $\\mathrm{g}_{\\mathrm{ds} 2}$ is equal to $1 / \\mathrm{r}_{\\mathrm{d} 2}$, which is significantly smaller than $\\mathrm{g}_{\\mathrm{m} 2}$. Thus, the output impedance is increased by a factor approximately equal to $\\left(1+R_{s} g_{m 2}\\right)$.\n\nKey Point: Introducing a small-signal resistance $\\mathrm{R}_{\\mathrm{s}}$ at the source of both transistors in a simple current mirror increases the output resistance by a factor approximately equal to $\\left(1+R_{s} g_{m}\\right)$.\n\nThis formula can be applied to moderately complex circuits to quickly estimate the impedances at a node. An example follows in the derivation of the output impedance of cascode current mirrors. It should be noted that the above derivation neglects the body effect of the transistor, even though the source is not connected to a small-signal ground. As discussed in Section 3.4, since the gate is at a small-signal ground, the body effect can be accounted for by replacing $g_{\\mathrm{m} 2}$ in Eq. (3.31) with $g_{m 2}+g_{s}$. This substitution results in\n\n$$\n\\begin{equation*}\nr_{\\text{out}}=\\frac{v_{x}}{i_{x}}=r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{s 2}+g_{d s 2}\\right)\\right] \\cong r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{s 2}\\right)\\right] \\tag{3.32}\n\\end{equation*}\n$$\n\nwhere $g_{s 2}$ is the body-effect constant. This result is only slightly different since $g_{s}$ is roughly one-fifth of $g_{m}$."
},
{
    "text": "In Section 3.1, we observed that a current mirror can be constructed using just two transistors, with the output impedance of this current source being $r_{\\text{ds2}}$. To enhance this output impedance, a source-degenerated current mirror can be employed, as depicted in Fig. 3.12. The small-signal model for this current mirror is illustrated in Fig. 3.13. Given that no small-signal current flows into the gate, the gate voltage is 0 V in Fig. 3.13.\n\nIt is important to note that the current $i_{x}$ sourced by the applied voltage source is equivalent to the current through the degeneration resistor, $\\mathrm{R}_{\\mathrm{s}}$. Consequently, we have\n\n$$\n\\begin{equation*}\nv_{s}=i_{x} R_{s} \\tag{3.27}\n\\end{equation*}\n$$\n\nAdditionally, observe that\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{gs}}=-\\mathrm{V}_{\\mathrm{s}} \\tag{3.28}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.12\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: s1, D: P, G: P}\nname: Q2, type: NMOS, ports: {S: s2, D: LOAD, G: P}\nname: Rs, type: Resistor, value: Rs, ports: {N1: s1, N2: GND}\nname: Rs, type: Resistor, value: Rs, ports: {N1: s2, N2: GND}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: VDD, Nn: P}\n]\nextrainfo:The circuit is a current mirror with source degeneration, utilizing two NMOS transistors, Q1 and Q2. The degeneration resistors Rs are connected to the sources of Q1 and Q2, providing feedback to stabilize the current. The input current Iin flows through Q1, and the output current Iout is mirrored through Q2.\n\nFig. 3.12 A current mirror with source degeneration.\n\nFig. 3.13 The small-signal model for the source-degenerated current source.\nimage_name:Fig. 3.13 The small-signal model for the source-degenerated current source\ndescription:The circuit represents a small-signal model of a source-degenerated current source, including a voltage-controlled current source and resistors for source degeneration, with the current ix flowing through the circuit.\n\nBy setting $i_{x}$ equal to the total current through $g_{m 2} \\mathbf{v}_{\\mathrm{gs}}$ and $r_{\\mathrm{ds} 2}$, we obtain\n\n$$\n\\begin{equation*}\ni_{x}=g_{m 2} v_{g s}+\\frac{v_{x}-v_{s}}{r_{d s}} \\tag{3.29}\n\\end{equation*}\n$$\n\nSubstituting (3.27) and (3.28) into (3.29) yields\n\n$$\n\\begin{equation*}\ni_{x}=-i_{x} g_{m 2} R_{s}+\\frac{v_{x}-i_{x} R_{s}}{r_{d s}} \\tag{3.30}\n\\end{equation*}\n$$\n\nRearranging, we determine the output impedance to be\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=\\frac{v_{x}}{i_{x}}=r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{d s 2}\\right)\\right] \\cong r_{d s 2}\\left(1+R_{s} g_{m 2}\\right) \\tag{3.31}\n\\end{equation*}\n$$\n\nwhere $\\mathrm{g}_{\\mathrm{ds} 2}$ is equal to $1 / \\mathrm{r}_{\\mathrm{d} 2}$, which is significantly less than $\\mathrm{g}_{\\mathrm{m} 2}$. Thus, the output impedance is increased by a factor approximately equal to $\\left(1+R_{s} g_{m 2}\\right)$.\n\nKey Point: Introducing a small-signal resistance $\\mathrm{R}_{\\mathrm{s}}$ at the source of both transistors in a simple current mirror increases the output resistance by a factor approximately equal to $\\left(1+R_{s} g_{m}\\right)$.\n\nThis formula can be applied to moderately complex circuits to quickly estimate the impedances at a node. An example follows in the derivation of the output impedance of cascode current mirrors. It should be noted that the above derivation neglects the body effect of the transistor, even though the source is not connected to a small-signal ground. As discussed in Section 3.4, since the gate is at a small-signal ground, the body effect can be accounted for by replacing $g_{\\mathrm{m} 2}$ in Eq. (3.31) with $g_{m 2}+g_{s}$. This substitution results in\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=\\frac{v_{x}}{i_{x}}=r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{s 2}+g_{d s 2}\\right)\\right] \\cong r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{s 2}\\right)\\right] \\tag{3.32}\n\\end{equation*}\n$$\n\nwhere $g_{s 2}$ is the body-effect constant. This result is only slightly different since $g_{s}$ is roughly one-fifth of $g_{m}$."
},
{
    "text": "In Section 3.1, we observed that a current mirror can be constructed using just two transistors, with the output impedance of this current source identified as $r_{\\text{ds2}}$. To enhance this output impedance, a source-degenerated current mirror can be employed, as depicted in Fig. 3.12. The small-signal model for this current mirror is illustrated in Fig. 3.13. Since no small-signal current flows into the gate, the gate voltage is 0 V in Fig. 3.13.\n\nIt is important to note that the current $i_{x}$ supplied by the applied voltage source is equivalent to the current through the degeneration resistor, $\\mathrm{R}_{\\mathrm{s}}$. Consequently, we have\n\n$$\n\\begin{equation*}\nv_{s}=i_{x} R_{s} \\tag{3.27}\n\\end{equation*}\n$$\n\nAdditionally, observe that\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{gs}}=-\\mathrm{V}_{\\mathrm{s}} \\tag{3.28}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.12\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: s1, D: P, G: P}\nname: Q2, type: NMOS, ports: {S: s2, D: LOAD, G: P}\nname: Rs, type: Resistor, value: Rs, ports: {N1: s1, N2: GND}\nname: Rs, type: Resistor, value: Rs, ports: {N1: s2, N2: GND}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: VDD, Nn: P}\n]\nextrainfo:The circuit is a current mirror with source degeneration, utilizing two NMOS transistors, Q1 and Q2. The degeneration resistors Rs are connected to the sources of Q1 and Q2, providing feedback to stabilize the current. The input current Iin flows through Q1, and the output current Iout is mirrored through Q2.\n\nFig. 3.12 A current mirror with source degeneration.\n\nFig. 3.13 The small-signal model for the source-degenerated current source.\nimage_name:Fig. 3.13 The small-signal model for the source-degenerated current source\ndescription:The circuit represents a small-signal model of a source-degenerated current source, including a voltage-controlled current source and resistors for source degeneration, with the current ix flowing through the circuit.\n\nBy setting $i_{x}$ equal to the total current through $g_{m 2} \\mathbf{v}_{\\mathrm{gs}}$ and $r_{\\mathrm{ds} 2}$, we obtain\n\n$$\n\\begin{equation*}\ni_{x}=g_{m 2} v_{g s}+\\frac{v_{x}-v_{s}}{r_{d s}} \\tag{3.29}\n\\end{equation*}\n$$\n\nSubstituting (3.27) and (3.28) into (3.29) results in\n\n$$\n\\begin{equation*}\ni_{x}=-i_{x} g_{m 2} R_{s}+\\frac{v_{x}-i_{x} R_{s}}{r_{d s}} \\tag{3.30}\n\\end{equation*}\n$$\n\nRearranging, we determine the output impedance to be\n\n$$\n\\begin{equation*}\nr_{\\text{out}}=\\frac{v_{x}}{i_{x}}=r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{d s 2}\\right)\\right] \\cong r_{d s 2}\\left(1+R_{s} g_{m 2}\\right) \\tag{3.31}\n\\end{equation*}\n$$\n\nwhere $\\mathrm{g}_{\\mathrm{ds} 2}$ is equal to $1 / \\mathrm{r}_{\\mathrm{d} 2}$, which is much smaller than $\\mathrm{g}_{\\mathrm{m} 2}$. Thus, the output impedance is increased by a factor approximately equal to $\\left(1+R_{s} g_{m 2}\\right)$.\n\nKey Point: Introducing a small-signal resistance $\\mathrm{R}_{\\mathrm{s}}$ at the source of both transistors in a simple current mirror increases the output resistance by a factor approximately equal to $\\left(1+R_{s} g_{m}\\right)$.\n\nThis formula can be applied to moderately complex circuits to quickly estimate the impedances at a node. An example follows in the derivation of the output impedance of cascode current mirrors. It should be noted that the above derivation neglects the body effect of the transistor, even though the source is not connected to a small-signal ground. As discussed in Section 3.4, since the gate is at a small-signal ground, the body effect can be accounted for by replacing $g_{\\mathrm{m} 2}$ in Eq. (3.31) with $g_{m 2}+g_{s}$. This substitution yields\n\n$$\n\\begin{equation*}\nr_{\\text{out}}=\\frac{v_{x}}{i_{x}}=r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{s 2}+g_{d s 2}\\right)\\right] \\cong r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{s 2}\\right)\\right] \\tag{3.32}\n\\end{equation*}\n$$\n\nwhere $g_{s 2}$ is the body-effect constant. This result differs only slightly since $g_{s}$ is roughly one-fifth of $g_{m}$."
},
{
    "text": "We observed in Section 3.1 that a current mirror can be implemented using just two transistors, with the output impedance of this current source being $r_{\\text {ds2 }}$. To enhance this output impedance, a source-degenerated current mirror can be employed, as depicted in Fig. 3.12. The small-signal model for this current mirror is illustrated in Fig. 3.13. Since no small-signal current flows into the gate, the gate voltage is 0 V in Fig. 3.13.\n\nIt should be noted that the current $i_{x}$ supplied by the applied voltage source is equal to the current through the degeneration resistor, $\\mathrm{R}_{\\mathrm{s}}$. Consequently, we have\n\n$$\n\\begin{equation*}\nv_{s}=i_{x} R_{s} \\tag{3.27}\n\\end{equation*}\n$$\n\nAdditionally, observe that\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{gs}}=-\\mathrm{V}_{\\mathrm{s}} \\tag{3.28}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.12\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: s1, D: P, G: P}\nname: Q2, type: NMOS, ports: {S: s2, D: LOAD, G: P}\nname: Rs, type: Resistor, value: Rs, ports: {N1: s1, N2: GND}\nname: Rs, type: Resistor, value: Rs, ports: {N1: s2, N2: GND}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: VDD, Nn: P}\n]\nextrainfo:The circuit is a current mirror with source degeneration, utilizing two NMOS transistors Q1 and Q2. The degeneration resistors Rs are connected to the sources of Q1 and Q2, providing feedback to stabilize the current. The input current Iin flows through Q1, and the output current Iout is mirrored through Q2.\n\nFig. 3.12 A current mirror with source degeneration.\n\nFig. 3.13 The small-signal model for the source-degenerated current source.\nimage_name:Fig. 3.13 The small-signal model for the source-degenerated current source\ndescription:The circuit represents a small-signal model of a source-degenerated current source. It includes a voltage-controlled current source and resistors for source degeneration, with the current ix flowing through the circuit.\n\nBy setting $i_{x}$ equal to the total current through $g_{m 2} \\mathbf{v}_{\\mathrm{gs}}$ and $r_{\\mathrm{ds} 2}$, we obtain\n\n$$\n\\begin{equation*}\ni_{x}=g_{m 2} v_{g s}+\\frac{v_{x}-v_{s}}{r_{d s}} \\tag{3.29}\n\\end{equation*}\n$$\n\nSubstituting (3.27) and (3.28) into (3.29) results in\n\n$$\n\\begin{equation*}\ni_{x}=-i_{x} g_{m 2} R_{s}+\\frac{v_{x}-i_{x} R_{s}}{r_{d s}} \\tag{3.30}\n\\end{equation*}\n$$\n\nRearranging, we determine the output impedance to be\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=\\frac{v_{x}}{i_{x}}=r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{d s 2}\\right)\\right] \\cong r_{d s 2}\\left(1+R_{s} g_{m 2}\\right) \\tag{3.31}\n\\end{equation*}\n$$\n\nwhere $\\mathrm{g}_{\\mathrm{ds} 2}$ is equal to $1 / \\mathrm{r}_{\\mathrm{d} 2}$, which is much smaller than $\\mathrm{g}_{\\mathrm{m} 2}$. Thus, the output impedance is increased by a factor approximately equal to $\\left(1+R_{s} g_{m 2}\\right)$.\n\nKey Point: Introducing a small-signal resistance $\\mathrm{R}_{\\mathrm{s}}$ at the source of both transistors in a simple current mirror increases the output resistance by a factor approximately equal to $\\left(1+R_{s} g_{m}\\right)$.\n\nThis formula can be applied to moderately complex circuits to quickly estimate the impedances at a node. An example follows in the derivation of the output impedance of cascode current mirrors. It is important to note that the above derivation neglects the body effect of the transistor, even though the source is not connected to a small-signal ground. As discussed in Section 3.4, since the gate is at a small-signal ground, the body effect can be accounted for by replacing $g_{\\mathrm{m} 2}$ in Eq. (3.31) with $g_{m 2}+g_{s}$. This substitution yields\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=\\frac{v_{x}}{i_{x}}=r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{s 2}+g_{d s 2}\\right)\\right] \\cong r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{s 2}\\right)\\right] \\tag{3.32}\n\\end{equation*}\n$$\n\nwhere $g_{s 2}$ is the body-effect constant. This result is only slightly different since $g_{s}$ is roughly one-fifth of $g_{m}$."
},
{
    "text": "We observed in Section 3.1 that a current mirror can be implemented using just two transistors, with the output impedance of this current source being $r_{\\text{ds2}}$. To enhance this output impedance, a source-degenerated current mirror can be employed, as depicted in Fig. 3.12. The small-signal model for this current mirror is illustrated in Fig. 3.13. Since no small-signal current flows into the gate, the gate voltage is 0 V in Fig. 3.13.\n\nNote that the current $i_{x}$ sourced by the applied voltage source equals the current through the degeneration resistor, $\\mathrm{R}_{\\mathrm{s}}$. Thus, we have\n\n$$\n\\begin{equation*}\nv_{s}=i_{x} R_{s} \\tag{3.27}\n\\end{equation*}\n$$\n\nAlso, observe that\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{gs}}=-\\mathrm{V}_{\\mathrm{s}} \\tag{3.28}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.12\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: s1, D: P, G: P}\nname: Q2, type: NMOS, ports: {S: s2, D: LOAD, G: P}\nname: Rs, type: Resistor, value: Rs, ports: {N1: s1, N2: GND}\nname: Rs, type: Resistor, value: Rs, ports: {N1: s2, N2: GND}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: VDD, Nn: P}\n]\nextrainfo:The circuit is a current mirror with source degeneration, utilizing two NMOS transistors Q1 and Q2. The degeneration resistors Rs are connected to the sources of Q1 and Q2, providing feedback to stabilize the current. The input current Iin flows through Q1, and the output current Iout is mirrored through Q2.\n\nFig. 3.12 A current mirror with source degeneration.\n\nFig. 3.13 The small-signal model for the source-degenerated current source.\nimage_name:Fig. 3.13 The small-signal model for the source-degenerated current source\ndescription:The circuit represents a small-signal model of a source-degenerated current source. It includes a voltage-controlled current source and resistors for source degeneration, with the current ix flowing through the circuit.\n\nSetting $i_{x}$ equal to the total current through $g_{m 2} \\mathbf{v}_{\\mathrm{gs}}$ and $r_{\\mathrm{ds} 2}$ yields\n\n$$\n\\begin{equation*}\ni_{x}=g_{m 2} v_{g s}+\\frac{v_{x}-v_{s}}{r_{d s}} \\tag{3.29}\n\\end{equation*}\n$$\n\nSubstituting (3.27) and (3.28) into (3.29) results in\n\n$$\n\\begin{equation*}\ni_{x}=-i_{x} g_{m 2} R_{s}+\\frac{v_{x}-i_{x} R_{s}}{r_{d s}} \\tag{3.30}\n\\end{equation*}\n$$\n\nRearranging, we determine the output impedance to be\n\n$$\n\\begin{equation*}\nr_{\\text{out}}=\\frac{v_{x}}{i_{x}}=r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{d s 2}\\right)\\right] \\cong r_{d s 2}\\left(1+R_{s} g_{m 2}\\right) \\tag{3.31}\n\\end{equation*}\n$$\n\nwhere $\\mathrm{g}_{\\mathrm{ds} 2}$ is equal to $1 / \\mathrm{r}_{\\mathrm{d} 2}$, which is much smaller than $\\mathrm{g}_{\\mathrm{m} 2}$. Thus, the output impedance is increased by a factor approximately equal to $\\left(1+R_{s} g_{m 2}\\right)$.\n\nKey Point: Introducing a small-signal resistance $\\mathrm{R}_{\\mathrm{s}}$ at the source of both transistors in a simple current mirror increases the output resistance by a factor approximately equal to $\\left(1+R_{s} g_{m}\\right)$.\n\nThis formula can often be applied to moderately complex circuits to quickly estimate the impedances looking into a node. An example follows in the derivation of the output impedance of cascode current mirrors. It should be noted that the above derivation neglects the body effect of the transistor, even though the source of the transistor is not connected to a small-signal ground. As discussed earlier in Section 3.4, since the gate is at a small-signal ground, the body effect can be accounted for by replacing $g_{\\mathrm{m} 2}$ in Eq. (3.31) with $g_{m 2}+g_{s}$. This substitution leads to\n\n$$\n\\begin{equation*}\nr_{\\text{out}}=\\frac{v_{x}}{i_{x}}=r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{s 2}+g_{d s 2}\\right)\\right] \\cong r_{d s 2}\\left[1+R_{s}\\left(g_{m 2}+g_{s 2}\\right)\\right] \\tag{3.32}\n\\end{equation*}\n$$\n\nwhere $g_{s 2}$ is the body-effect constant. This result is only slightly different since $g_{s}$ is roughly one-fifth of $g_{m}$."
},
{
    "text": "A cascode current mirror is depicted in Fig. 3.14. Initially, observe that the output impedance seen at the drain of $Q_{2}$ is simply $r_{d s 2}$, as determined by an analysis akin to that used for a basic current mirror. Consequently, the output impedance can be readily derived by treating $Q_{4}$ as a current source with a source-degeneration resistor of value $r_{d s 2}$. Utilizing (3.32) and noting that $Q_{4}$ now serves as the cascode transistor instead of $Q_{2}$, we obtain\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=r_{d s 4}\\left[1+R_{s}\\left(g_{m 4}+g_{s 4}+g_{d s 4}\\right)\\right] \\tag{3.36}\n\\end{equation*}\n$$\n\nwhere $R_{s}=r_{d s 2}$. Thus, the output impedance is expressed as\n\n$$\n\\begin{align*}\nr_{\\text {out }} & =r_{d s 4}\\left[1+r_{d s 2}\\left(g_{m 4}+g_{s 4}+g_{d s 4}\\right)\\right] \\\\\n& \\approx r_{d s 4}\\left[1+r_{d s 2}\\left(g_{m 4}+g_{s 4}\\right)\\right]  \\tag{3.37}\\\\\n& \\approx r_{d s 4}\\left(r_{d s 2} g_{m 4}\\right)\n\\end{align*}\n$$\n\nimage_name:Fig. 3.14 A cascode current mirror\ndescription:\n[\nname: I_in, type: CurrentSource, ports: {Np: VDD, Nn: P}\nname: Q1, type: NMOS, ports: {S: GND, D: d1g3s3, G: d1g3s3}\nname: Q2, type: NMOS, ports: {S: GND, D: s2s4, G: d1g3s3}\nname: Q3, type: NMOS, ports: {S: d1g3s3, D: P, G: P}\nname: Q4, type: NMOS, ports: {S: s2s4, D: Vout, G: P}\n]\nextrainfo:The circuit is a cascode current mirror, which significantly enhances the output impedance. This configuration is achieved by stacking transistors Q3 and Q4 atop Q1 and Q2, respectively, thereby improving the output impedance by a factor of $g_{m4} r_{ds4}$ and boosting the circuit's gain.\n\nFig. 3.14 A cascode current mirror.\n\nHence, the output impedance is augmented by a factor of $g_{m 4} r_{d s 4}$, representing the upper limit for the gain of a single-transistor MOS gain-stage, typically ranging between 10 and 100, depending on transistor dimensions, currents, and the technology employed. This substantial increase in output impedance is crucial for achieving single-stage amplifiers with high low-frequency gains.\n\nHowever, a drawback of using a cascode current mirror is the reduction in the maximum output voltage swing before transistors enter the triode region. To comprehend this reduction, recall that for an n-channel transistor to operate in the active region (also known as the saturation or pinch-off region), its drain-source voltage must exceed\n\nKey Point: Adding a cascode device to a CMOS current mirror enhances its output resistance by roughly the gain of the cascode device, $\\mathrm{g}_{\\mathrm{m}} \\mathrm{r}_{\\mathrm{ds}}$. The available voltage swing at the current mirror output is diminished because a certain voltage drop must be sustained across the cascode device to keep it in active mode.\n\n$$\n\\begin{equation*}\nV_{\\text {eff }} \\equiv V_{G S}-V_{t n} \\tag{3.38}\n\\end{equation*}\n$$\n\nas demonstrated in Chapter 1, where\n\n$$\n\\begin{equation*}\nV_{\\text {eff }}=\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x}(W / L)}} \\tag{3.39}\n\\end{equation*}\n$$\n\nAssuming all transistors have identical sizes and currents, they also share the same $V_{\\text {eff }}$ and, consequently, the same gate-source voltages, $\\mathrm{V}_{\\mathrm{Gsi}}=\\mathrm{V}_{\\text {eff }}+\\mathrm{V}_{\\mathrm{tn}}$. From Fig. 3.14, it is evident that\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{G} 3}=\\mathrm{V}_{\\mathrm{GS} 1}+\\mathrm{V}_{\\mathrm{GS} 3}=2 \\mathrm{~V}_{\\mathrm{eff}}+2 \\mathrm{~V}_{\\mathrm{tn}} \\tag{3.40}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\nV_{D S 2}=V_{G 3}-V_{G S 4}=V_{G 3}-\\left(V_{\\text {eff }}+V_{\\mathrm{tn}}\\right)=V_{\\text {eff }}+V_{\\mathrm{tn}} \\tag{3.41}\n\\end{equation*}\n$$\n\nThus, the drain-source voltage of $Q_{2}$ exceeds the minimum required for it to be at the edge of the active region. Specifically, the drain-source voltage of $\\mathrm{Q}_{2}$ is $\\mathrm{V}_{\\mathrm{tn}}$ higher than necessary. Since the smallest output voltage, $V_{D 4}$, that can be achieved without $Q_{4}$ entering the triode region is $V_{D S 2}+V_{\\text {eff }}$, the minimum allowable voltage for $V_{\\text {out }}$ is\n\n$$\n\\begin{equation*}\nV_{\\text {out }}>V_{D S 2}+V_{\\text {eff }}=2 V_{\\text {eff } 1}+V_{\\text {tn }} \\tag{3.42}\n\\end{equation*}\n$$\n\nwhich is $\\mathrm{V}_{\\mathrm{tn}}$ above the minimum value of $2 \\mathrm{~V}_{\\text {eff }}$. This reduction in signal swing is a significant disadvantage, especially in modern technologies where the maximum allowable power-supply voltage might be as low as 1 V. In Section 6.3, we will explore how the cascode current mirror can be modified to retain high output impedances while still permitting near-minimum voltages at the mirror's output."
},
{
    "text": "A cascode current mirror is depicted in Fig. 3.14. Initially, observe that the output impedance seen at the drain of $Q_{2}$ is simply $r_{d s 2}$, as determined through an analysis akin to that used for a basic current mirror. Consequently, the output impedance can be directly derived by treating $Q_{4}$ as a current source with a source-degeneration resistor of value $r_{\\mathrm{ds} 2}$. Utilizing equation (3.32), and recognizing that $Q_{4}$ now serves as the cascode transistor instead of $Q_{2}$, we obtain\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=r_{d s 4}\\left[1+R_{s}\\left(g_{m 4}+g_{s 4}+g_{d s 4}\\right)\\right] \\tag{3.36}\n\\end{equation*}\n$$\n\nwhere $R_{s}=r_{d s 2}$. Hence, the output impedance is expressed as\n\n$$\n\\begin{align*}\nr_{\\text {out }} & =r_{d s 4}\\left[1+r_{d s 2}\\left(g_{m 4}+g_{s 4}+g_{d s 4}\\right)\\right] \\\\\n& \\approx r_{d s 4}\\left[1+r_{d s 2}\\left(g_{m 4}+g_{s 4}\\right)\\right]  \\tag{3.37}\\\\\n& \\approx r_{d s 4}\\left(r_{d s 2} g_{m 4}\\right)\n\\end{align*}\n$$\n\nimage_name: Fig. 3.14 A cascode current mirror\ndescription:\n[\nname: I_in, type: CurrentSource, ports: {Np: VDD, Nn: P}\nname: Q1, type: NMOS, ports: {S: GND, D: d1g3s3, G: d1g3s3}\nname: Q2, type: NMOS, ports: {S: GND, D: s2s4, G: d1g3s3}\nname: Q3, type: NMOS, ports: {S: d1g3s3, D: P, G: P}\nname: Q4, type: NMOS, ports: {S: s2s4, D: Vout, G: P}\n]\nextrainfo: The circuit is a cascode current mirror, which significantly boosts the output impedance. This configuration is achieved by stacking transistors Q3 and Q4 atop Q1 and Q2, respectively. This setup enhances the output impedance by a factor of $g_{m4} r_{ds4}$, thereby increasing the circuit's gain.\n\nFig. 3.14 A cascode current mirror.\n\nAs a result, the output impedance is augmented by a factor of $g_{m 4} r_{d s 4}$, which represents the upper limit for the gain of a single-transistor MOS gain-stage, typically ranging between 10 and 100, depending on transistor dimensions, currents, and the technology employed. This substantial increase in output impedance is crucial for achieving single-stage amplifiers with high low-frequency gains.\n\nHowever, a drawback of using a cascode current mirror is that it limits the maximum output voltage swing before transistors enter the triode region. To comprehend this limitation, recall that for an n-channel transistor to operate in the active region (also known as the saturation or pinch-off region), its drain-source voltage must exceed\n\nKey Point: Adding a cascode device to a CMOS current mirror enhances its output resistance by roughly the gain of the cascode device, $\\mathrm{g}_{\\mathrm{m}} \\mathrm{r}_{\\mathrm{ds}}$. The available voltage swing at the current mirror output is diminished because a certain voltage drop must be maintained across the cascode device to keep it in active mode.\n\n$$\n\\begin{equation*}\nV_{\\text {eff }} \\equiv V_{G S}-V_{t n} \\tag{3.38}\n\\end{equation*}\n$$\n\nas demonstrated in Chapter 1, which is given by\n\n$$\n\\begin{equation*}\nV_{\\text {eff }}=\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x}(W / L)}} \\tag{3.39}\n\\end{equation*}\n$$\n\nAssuming all transistors have identical sizes and currents, they also share the same $V_{\\text {eff }}$ and hence the same gate-source voltages, $\\mathrm{V}_{\\mathrm{Gsi}}=\\mathrm{V}_{\\text {eff }}+\\mathrm{V}_{\\mathrm{tn}}$. Additionally, from Fig. 3.14, it is evident that\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{G} 3}=\\mathrm{V}_{\\mathrm{GS} 1}+\\mathrm{V}_{\\mathrm{GS} 3}=2 \\mathrm{~V}_{\\mathrm{eff}}+2 \\mathrm{~V}_{\\mathrm{tn}} \\tag{3.40}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\nV_{D S 2}=V_{G 3}-V_{G S 4}=V_{G 3}-\\left(V_{\\text {eff }}+V_{\\mathrm{tn}}\\right)=V_{\\text {eff }}+V_{\\mathrm{tn}} \\tag{3.41}\n\\end{equation*}\n$$\n\nThus, the drain-source voltage of $Q_{2}$ exceeds the minimum required for it to be at the edge of the active region. Specifically, the drain-source voltage of $\\mathrm{Q}_{2}$ is $\\mathrm{V}_{\\mathrm{tn}}$ higher than necessary. Since the smallest output voltage, $V_{D 4}$, that can be achieved without $Q_{4}$ entering the triode region is $V_{D S 2}+V_{\\text {eff }}$, the minimum permissible voltage for $V_{\\text {out }}$ is\n\n$$\n\\begin{equation*}\nV_{\\text {out }}>V_{D S 2}+V_{\\text {eff }}=2 V_{\\text {eff } 1}+V_{\\text {tn }} \\tag{3.42}\n\\end{equation*}\n$$\n\nwhich is $\\mathrm{V}_{\\mathrm{tn}}$ greater than the minimum value of $2 \\mathrm{~V}_{\\text {eff }}$. This reduction in signal swing is a significant disadvantage, particularly in modern technologies where the maximum allowable power-supply voltage might be as low as 1 V. In Section 6.3, we will explore how the cascode current mirror can be adapted to maintain high output impedances while still permitting near-minimum voltages at the mirror's output."
},
{
    "text": "A cascode current mirror is depicted in Fig. 3.14. Initially, observe that the output impedance seen at the drain of $Q_{2}$ is simply $r_{d s 2}$, as determined by an analysis similar to that used for the basic current mirror. Consequently, the output impedance can be readily derived by treating $Q_{4}$ as a current source with a source-degeneration resistor of value $r_{\\mathrm{ds} 2}$. Utilizing (3.32) and noting that $Q_{4}$ now acts as the cascode transistor instead of $Q_{2}$, we obtain\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=r_{d s 4}\\left[1+R_{s}\\left(g_{m 4}+g_{s 4}+g_{d s 4}\\right)\\right] \\tag{3.36}\n\\end{equation*}\n$$\n\nwhere $R_{s}=r_{d s 2}$. Hence, the output impedance is expressed as\n\n$$\n\\begin{align*}\nr_{\\text {out }} & =r_{d s 4}\\left[1+r_{d s 2}\\left(g_{m 4}+g_{s 4}+g_{d s 4}\\right)\\right] \\\\\n& \\cong r_{d s 4}\\left[1+r_{d s 2}\\left(g_{m 4}+g_{s 4}\\right)\\right]  \\tag{3.37}\\\\\n& \\cong r_{d s 4}\\left(r_{d s 2} g_{m 4}\\right)\n\\end{align*}\n$$\n\nimage_name:Fig. 3.14 A cascode current mirror\ndescription:\n[\nname: I_in, type: CurrentSource, ports: {Np: VDD, Nn: P}\nname: Q1, type: NMOS, ports: {S: GND, D: d1g3s3, G: d1g3s3}\nname: Q2, type: NMOS, ports: {S: GND, D: s2s4, G: d1g3s3}\nname: Q3, type: NMOS, ports: {S: d1g3s3, D: P, G: P}\nname: Q4, type: NMOS, ports: {S: s2s4, D: Vout, G: P}\n]\nextrainfo:The circuit is a cascode current mirror, which significantly boosts the output impedance. This configuration is achieved by stacking transistors Q3 and Q4 atop Q1 and Q2, respectively, enhancing the output impedance by a factor of $g_{m4} r_{ds4}$ and improving the circuit's gain.\n\nFig. 3.14 A cascode current mirror.\n\nThus, the output impedance is augmented by a factor of $g_{m 4} r_{d s 4}$, which represents the upper limit for the gain of a single-transistor MOS gain-stage, typically ranging between 10 and 100, depending on transistor sizes, currents, and the technology employed. This substantial increase in output impedance is crucial for achieving single-stage amplifiers with high low-frequency gains.\n\nHowever, a drawback of using a cascode current mirror is the reduction in the maximum output voltage swing before transistors enter the triode region. To comprehend this reduction, recall that for an n-channel transistor to operate in the active region (also known as the saturation or pinch-off region), its drain-source voltage must exceed\n\nKey Point: Adding a cascode device to a CMOS current mirror enhances its output resistance by roughly the gain of the cascode device, $\\mathrm{g}_{\\mathrm{m}} \\mathrm{r}_{\\mathrm{ds}}$. The available voltage swing at the current mirror output is diminished because a certain voltage drop must be maintained across the cascode device to keep it in active mode.\n\n$$\n\\begin{equation*}\nV_{\\text {eff }} \\equiv V_{G S}-V_{t n} \\tag{3.38}\n\\end{equation*}\n$$\n\nas demonstrated in Chapter 1, this is given by\n\n$$\n\\begin{equation*}\nV_{\\text {eff }}=\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x}(W / L)}} \\tag{3.39}\n\\end{equation*}\n$$\n\nAssuming all transistors have identical sizes and currents, they also share the same $V_{\\text {eff }}$ and, consequently, the same gate-source voltages, $\\mathrm{V}_{\\mathrm{Gsi}}=\\mathrm{V}_{\\text {eff }}+\\mathrm{V}_{\\mathrm{tn}}$. From Fig. 3.14, it is evident that\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{G} 3}=\\mathrm{V}_{\\mathrm{GS} 1}+\\mathrm{V}_{\\mathrm{GS} 3}=2 \\mathrm{~V}_{\\mathrm{eff}}+2 \\mathrm{~V}_{\\mathrm{tn}} \\tag{3.40}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\nV_{D S 2}=V_{G 3}-V_{G S 4}=V_{G 3}-\\left(V_{\\text {eff }}+V_{\\mathrm{tn}}\\right)=V_{\\text {eff }}+V_{\\mathrm{tn}} \\tag{3.41}\n\\end{equation*}\n$$\n\nThus, the drain-source voltage of $Q_{2}$ exceeds the minimum required for it to be at the edge of the active region. Specifically, $Q_{2}$'s drain-source voltage is $V_{\\mathrm{tn}}$ higher than necessary. Since the smallest output voltage, $V_{D 4}$, that can be achieved without $Q_{4}$ entering the triode region is $V_{D S 2}+V_{\\text {eff }}$, the minimum allowable voltage for $V_{\\text {out }}$ is\n\n$$\n\\begin{equation*}\nV_{\\text {out }}>V_{D S 2}+V_{\\text {eff }}=2 V_{\\text {eff } 1}+V_{\\text {tn }} \\tag{3.42}\n\\end{equation*}\n$$\n\nwhich is $V_{\\mathrm{tn}}$ greater than the minimum value of $2 \\mathrm{~V}_{\\text {eff }}$. This reduction in signal swing is a significant disadvantage, especially in modern technologies where the maximum allowable power-supply voltage might be as low as 1 V. In Section 6.3, we will explore how the cascode current mirror can be modified to retain high output impedances while still permitting near-minimum voltages at the mirror's output."
},
{
    "text": "A cascode current mirror is depicted in Fig. 3.14. Initially, observe that the output impedance when looking into the drain of $Q_{2}$ is simply $r_{d s 2}$, as determined through an analysis akin to that used for the basic current mirror. Consequently, the output impedance can be readily derived by treating $Q_{4}$ as a current source with a source-degeneration resistor of value $r_{\\mathrm{ds} 2}$. Utilizing (3.32) and noting that $Q_{4}$ now acts as the cascode transistor instead of $Q_{2}$, we obtain\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=r_{d s 4}\\left[1+R_{s}\\left(g_{m 4}+g_{s 4}+g_{d s 4}\\right)\\right] \\tag{3.36}\n\\end{equation*}\n$$\n\nwhere $R_{s}=r_{d s 2}$. Hence, the output impedance is expressed as\n\n$$\n\\begin{align*}\nr_{\\text {out }} & =r_{d s 4}\\left[1+r_{d s 2}\\left(g_{m 4}+g_{s 4}+g_{d s 4}\\right)\\right] \\\\\n& \\cong r_{d s 4}\\left[1+r_{d s 2}\\left(g_{m 4}+g_{s 4}\\right)\\right]  \\tag{3.37}\\\\\n& \\cong r_{d s 4}\\left(r_{d s 2} g_{m 4}\\right)\n\\end{align*}\n$$\n\nimage_name: Fig. 3.14 A cascode current mirror\ndescription:\n[\nname: I_in, type: CurrentSource, ports: {Np: VDD, Nn: P}\nname: Q1, type: NMOS, ports: {S: GND, D: d1g3s3, G: d1g3s3}\nname: Q2, type: NMOS, ports: {S: GND, D: s2s4, G: d1g3s3}\nname: Q3, type: NMOS, ports: {S: d1g3s3, D: P, G: P}\nname: Q4, type: NMOS, ports: {S: s2s4, D: Vout, G: P}\n]\nextrainfo: The circuit is a cascode current mirror, significantly enhancing the output impedance. This configuration is achieved by stacking transistors Q3 and Q4 atop Q1 and Q2, respectively, thereby improving the output impedance by a factor of $g_{m4} r_{ds4}$, which boosts the circuit's gain.\n\nFig. 3.14 A cascode current mirror.\n\nTherefore, the output impedance is augmented by a factor of $g_{m 4} r_{d s 4}$, representing an upper limit for the gain of a single-transistor MOS gain-stage, typically ranging between 10 and 100, depending on transistor dimensions, currents, and the technology employed. This substantial increase in output impedance is crucial for achieving single-stage amplifiers with high low-frequency gains.\n\nA drawback of using a cascode current mirror is the reduction in the maximum output voltage swing before transistors enter the triode region. To comprehend this reduction, recall that for an n-channel transistor to operate in the active region (also known as the saturation or pinch-off region), its drain-source voltage must exceed\n\nKey Point: Adding a cascode device to a CMOS current mirror enhances its output resistance by roughly the gain of the cascode device, $\\mathrm{g}_{\\mathrm{m}} \\mathrm{r}_{\\mathrm{ds}}$. The available voltage swing at the current mirror output decreases because a certain voltage drop must be maintained across the cascode device to keep it in active mode.\n\n$$\n\\begin{equation*}\nV_{\\text {eff }} \\equiv V_{G S}-V_{t n} \\tag{3.38}\n\\end{equation*}\n$$\n\nwhich, as shown in Chapter 1, is given by\n\n$$\n\\begin{equation*}\nV_{\\text {eff }}=\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x}(W / L)}} \\tag{3.39}\n\\end{equation*}\n$$\n\nAssuming all transistors have identical sizes and currents, they also share the same $V_{\\text {eff }}$ and hence the same gate-source voltages, $\\mathrm{V}_{\\mathrm{Gsi}}=\\mathrm{V}_{\\text {eff }}+\\mathrm{V}_{\\mathrm{tn}}$. From Fig. 3.14, it is evident that\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{G} 3}=\\mathrm{V}_{\\mathrm{GS} 1}+\\mathrm{V}_{\\mathrm{GS} 3}=2 \\mathrm{~V}_{\\mathrm{eff}}+2 \\mathrm{~V}_{\\mathrm{tn}} \\tag{3.40}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\nV_{D S 2}=V_{G 3}-V_{G S 4}=V_{G 3}-\\left(V_{\\text {eff }}+V_{\\mathrm{tn}}\\right)=V_{\\text {eff }}+V_{\\mathrm{tn}} \\tag{3.41}\n\\end{equation*}\n$$\n\nThus, the drain-source voltage of $Q_{2}$ exceeds the minimum required for it to be at the edge of the active region. Specifically, the drain-source voltage of $\\mathrm{Q}_{2}$ is $\\mathrm{V}_{\\mathrm{tn}}$ higher than necessary. Since the smallest output voltage, $V_{D 4}$, that can be achieved without $Q_{4}$ entering the triode region is $V_{D S 2}+V_{\\text {eff }}$, the minimum allowable voltage for $V_{\\text {out }}$ is\n\n$$\n\\begin{equation*}\nV_{\\text {out }}>V_{D S 2}+V_{\\text {eff }}=2 V_{\\text {eff } 1}+V_{\\text {tn }} \\tag{3.42}\n\\end{equation*}\n$$\n\nwhich is $\\mathrm{V}_{\\mathrm{tn}}$ above the minimum value of $2 \\mathrm{~V}_{\\text {eff }}$. This reduction in signal swing is a significant disadvantage, especially in modern technologies where the maximum allowable power-supply voltage might be as low as 1 V. In Section 6.3, we will explore how the cascode current mirror can be modified to retain high output impedances while still permitting near-minimum voltages at the mirror's output."
},
{
    "text": "A cascode current mirror is depicted in Fig. 3.14. Initially, observe that the output impedance seen at the drain of $Q_{2}$ is simply $r_{d s 2}$, as determined by an analysis similar to that used for the basic current mirror. Consequently, the output impedance can be directly derived by treating $Q_{4}$ as a current source with a source-degeneration resistor of value $r_{d s 2}$. Utilizing equation (3.32) and noting that $Q_{4}$ now acts as the cascode transistor instead of $Q_{2}$, we obtain\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=r_{d s 4}\\left[1+R_{s}\\left(g_{m 4}+g_{s 4}+g_{d s 4}\\right)\\right] \\tag{3.36}\n\\end{equation*}\n$$\n\nwhere $R_{s}=r_{d s 2}$. Therefore, the output impedance is expressed as\n\n$$\n\\begin{align*}\nr_{\\text {out }} & =r_{d s 4}\\left[1+r_{d s 2}\\left(g_{m 4}+g_{s 4}+g_{d s 4}\\right)\\right] \\\\\n& \\approx r_{d s 4}\\left[1+r_{d s 2}\\left(g_{m 4}+g_{s 4}\\right)\\right]  \\tag{3.37}\\\\\n& \\approx r_{d s 4}\\left(r_{d s 2} g_{m 4}\\right)\n\\end{align*}\n$$\n\nimage_name:Fig. 3.14 A cascode current mirror\ndescription:\n[\nname: I_in, type: CurrentSource, ports: {Np: VDD, Nn: P}\nname: Q1, type: NMOS, ports: {S: GND, D: d1g3s3, G: d1g3s3}\nname: Q2, type: NMOS, ports: {S: GND, D: s2s4, G: d1g3s3}\nname: Q3, type: NMOS, ports: {S: d1g3s3, D: P, G: P}\nname: Q4, type: NMOS, ports: {S: s2s4, D: Vout, G: P}\n]\nextrainfo:The circuit is a cascode current mirror, which significantly enhances the output impedance. The cascode setup is achieved by stacking transistors Q3 and Q4 atop Q1 and Q2, respectively. This configuration boosts the output impedance by a factor of $g_{m4} r_{ds4}$, thereby improving the circuit's gain.\n\nFig. 3.14 A cascode current mirror.\n\nHence, the output impedance is augmented by a factor of $g_{m 4} r_{d s 4}$, which represents the upper limit for the gain of a single-transistor MOS gain-stage, typically ranging between 10 and 100, depending on transistor dimensions, currents, and the technology employed. This substantial increase in output impedance is crucial for achieving single-stage amplifiers with high low-frequency gains.\n\nHowever, a drawback of using a cascode current mirror is that it limits the maximum output voltage swings before the transistors enter the triode region. To comprehend this limitation, recall that for an n-channel transistor to operate in the active region (also known as the saturation or pinch-off region), its drain-source voltage must exceed\n\nKey Point: Adding a cascode device to a CMOS current mirror enhances its output resistance by roughly the gain of the cascode device, $\\mathrm{g}_{\\mathrm{m}} \\mathrm{r}_{\\mathrm{ds}}$. The voltage swing at the current mirror output is diminished because a certain voltage drop must be maintained across the cascode device to keep it in active mode.\n\n$$\n\\begin{equation*}\nV_{\\text {eff }} \\equiv V_{G S}-V_{t n} \\tag{3.38}\n\\end{equation*}\n$$\n\nwhich, as shown in Chapter 1, is given by\n\n$$\n\\begin{equation*}\nV_{\\text {eff }}=\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x}(W / L)}} \\tag{3.39}\n\\end{equation*}\n$$\n\nAssuming all transistors have identical sizes and currents, they also share the same $V_{\\text {eff }}$ and hence the same gate-source voltages, $\\mathrm{V}_{\\mathrm{Gsi}}=\\mathrm{V}_{\\text {eff }}+\\mathrm{V}_{\\mathrm{tn}}$. From Fig. 3.14, it is evident that\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{G} 3}=\\mathrm{V}_{\\mathrm{GS} 1}+\\mathrm{V}_{\\mathrm{GS} 3}=2 \\mathrm{~V}_{\\mathrm{eff}}+2 \\mathrm{~V}_{\\mathrm{tn}} \\tag{3.40}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\nV_{D S 2}=V_{G 3}-V_{G S 4}=V_{G 3}-\\left(V_{\\text {eff }}+V_{\\mathrm{tn}}\\right)=V_{\\text {eff }}+V_{\\mathrm{tn}} \\tag{3.41}\n\\end{equation*}\n$$\n\nThus, the drain-source voltage of $Q_{2}$ exceeds the minimum required for it to be at the edge of the active region. Specifically, the drain-source voltage of $\\mathrm{Q}_{2}$ is $\\mathrm{V}_{\\mathrm{tn}}$ higher than necessary. Since the smallest output voltage, $V_{D 4}$, that can be achieved without $Q_{4}$ entering the triode region is $V_{D S 2}+V_{\\text {eff }}$, the minimum permissible voltage for $V_{\\text {out }}$ is\n\n$$\n\\begin{equation*}\nV_{\\text {out }}>V_{D S 2}+V_{\\text {eff }}=2 V_{\\text {eff } 1}+V_{\\text {tn }} \\tag{3.42}\n\\end{equation*}\n$$\n\nwhich is $\\mathrm{V}_{\\mathrm{tn}}$ above the minimum value of $2 \\mathrm{~V}_{\\text {eff }}$. This reduction in signal swing is a significant drawback, especially in modern technologies where the maximum allowable power-supply voltage might be as low as 1 V. In Section 6.3, we will explore how the cascode current mirror can be adapted to retain high output impedances while still permitting near-minimum voltages at the mirror's output."
},
{
    "text": "A cascode current mirror is depicted in Fig. 3.14. Initially, observe that the output impedance when looking into the drain of $Q_{2}$ is simply $r_{d s 2}$, as determined through an analysis akin to that used for the basic current mirror. Consequently, the output impedance can be directly derived by treating $Q_{4}$ as a current source with a source-degeneration resistor of value $r_{\\mathrm{ds} 2}$. Utilizing (3.32) and recognizing that $Q_{4}$ now serves as the cascode transistor instead of $Q_{2}$, we obtain\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=r_{d s 4}\\left[1+R_{s}\\left(g_{m 4}+g_{s 4}+g_{d s 4}\\right)\\right] \\tag{3.36}\n\\end{equation*}\n$$\n\nwhere $R_{s}=r_{d s 2}$. Thus, the output impedance is expressed as\n\n$$\n\\begin{align*}\nr_{\\text {out }} & =r_{d s 4}\\left[1+r_{d s 2}\\left(g_{m 4}+g_{s 4}+g_{d s 4}\\right)\\right] \\\\\n& \\approx r_{d s 4}\\left[1+r_{d s 2}\\left(g_{m 4}+g_{s 4}\\right)\\right]  \\tag{3.37}\\\\\n& \\approx r_{d s 4}\\left(r_{d s 2} g_{m 4}\\right)\n\\end{align*}\n$$\n\nimage_name: Fig. 3.14 A cascode current mirror\ndescription:\n[\nname: I_in, type: CurrentSource, ports: {Np: VDD, Nn: P}\nname: Q1, type: NMOS, ports: {S: GND, D: d1g3s3, G: d1g3s3}\nname: Q2, type: NMOS, ports: {S: GND, D: s2s4, G: d1g3s3}\nname: Q3, type: NMOS, ports: {S: d1g3s3, D: P, G: P}\nname: Q4, type: NMOS, ports: {S: s2s4, D: Vout, G: P}\n]\nextrainfo: The circuit is a cascode current mirror, which significantly enhances the output impedance. The cascode configuration is achieved by stacking transistors Q3 and Q4 atop Q1 and Q2, respectively. This setup boosts the output impedance by a factor of $g_{m4} r_{ds4}$, thereby increasing the circuit's gain.\n\nFig. 3.14 A cascode current mirror.\n\nHence, the output impedance is augmented by a factor of $g_{m 4} r_{d s 4}$, which represents the upper limit for the gain of a single-transistor MOS gain-stage, potentially ranging between 10 and 100, depending on transistor dimensions, currents, and the technology employed. This substantial rise in output impedance can be pivotal for achieving single-stage amplifiers with high low-frequency gains.\n\nA drawback of employing a cascode current mirror is that it diminishes the maximum output voltage swings before transistors enter the triode region. To comprehend this reduction, recall that for an n-channel transistor to remain in the active region (also known as the saturation or pinch-off region), its drain-source voltage must exceed\n\nKey Point: Adding a cascode device to a CMOS current mirror enhances its output resistance by roughly the gain of the cascode device, $\\mathrm{g}_{\\mathrm{m}} \\mathrm{r}_{\\mathrm{ds}}$. The available voltage swing at the current mirror output is reduced because a certain voltage drop must be maintained across the cascode device to keep it in active mode.\n\n$$\n\\begin{equation*}\nV_{\\text {eff }} \\equiv V_{G S}-V_{t n} \\tag{3.38}\n\\end{equation*}\n$$\n\nwhich, as shown in Chapter 1, is given by\n\n$$\n\\begin{equation*}\nV_{\\text {eff }}=\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x}(W / L)}} \\tag{3.39}\n\\end{equation*}\n$$\n\nAssuming all transistors have identical sizes and currents, they also share the same $\\mathrm{V}_{\\text {eff }}$ and, consequently, the same gate-source voltages, $\\mathrm{V}_{\\mathrm{Gsi}}=\\mathrm{V}_{\\text {eff }}+\\mathrm{V}_{\\mathrm{tn}}$. Additionally, from Fig. 3.14, we observe that\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{G} 3}=\\mathrm{V}_{\\mathrm{GS} 1}+\\mathrm{V}_{\\mathrm{GS} 3}=2 \\mathrm{~V}_{\\mathrm{eff}}+2 \\mathrm{~V}_{\\mathrm{tn}} \\tag{3.40}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\nV_{D S 2}=V_{G 3}-V_{G S 4}=V_{G 3}-\\left(V_{\\text {eff }}+V_{\\mathrm{tn}}\\right)=V_{\\text {eff }}+V_{\\mathrm{tn}} \\tag{3.41}\n\\end{equation*}\n$$\n\nThus, the drain-source voltage of $Q_{2}$ exceeds the minimum required to keep it at the edge of the active region. Specifically, the drain-source voltage of $\\mathrm{Q}_{2}$ is $\\mathrm{V}_{\\mathrm{tn}}$ higher than necessary. Since the smallest output voltage, $V_{D 4}$, that can be achieved without $Q_{4}$ entering the triode region is given by $V_{D S 2}+V_{\\text {eff }}$, the minimum allowable voltage for $V_{\\text {out }}$ is\n\n$$\n\\begin{equation*}\nV_{\\text {out }}>V_{D S 2}+V_{\\text {eff }}=2 V_{\\text {eff } 1}+V_{\\text {tn }} \\tag{3.42}\n\\end{equation*}\n$$\n\nwhich is $\\mathrm{V}_{\\mathrm{tn}}$ above the minimum value of $2 \\mathrm{~V}_{\\text {eff }}$. This reduction in signal swing is a significant drawback, especially with modern technologies that may have a maximum allowable power-supply voltage as low as 1 V. In Section 6.3, we will explore how the cascode current mirror can be modified to retain high output impedances while still permitting near-minimum voltages at the mirror's output."
},
{
    "text": "A cascode current mirror is depicted in Fig. 3.14. Initially, observe that the output impedance when looking into the drain of $Q_{2}$ is simply $r_{d s 2}$, as determined through an analysis akin to that used for the basic current mirror. Consequently, the output impedance can be directly derived by treating $Q_{4}$ as a current source with a source-degeneration resistor of value $r_{\\mathrm{ds} 2}$. Utilizing (3.32) and noting that $Q_{4}$ now acts as the cascode transistor instead of $Q_{2}$, we obtain\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=r_{d s 4}\\left[1+R_{s}\\left(g_{m 4}+g_{s 4}+g_{d s 4}\\right)\\right] \\tag{3.36}\n\\end{equation*}\n$$\n\nwhere $R_{s}=r_{d s 2}$. Hence, the output impedance is expressed as\n\n$$\n\\begin{align*}\nr_{\\text {out }} & =r_{d s 4}\\left[1+r_{d s 2}\\left(g_{m 4}+g_{s 4}+g_{d s 4}\\right)\\right] \\\\\n& \\approx r_{d s 4}\\left[1+r_{d s 2}\\left(g_{m 4}+g_{s 4}\\right)\\right]  \\tag{3.37}\\\\\n& \\approx r_{d s 4}\\left(r_{d s 2} g_{m 4}\\right)\n\\end{align*}\n$$\n\nimage_name:Fig. 3.14 A cascode current mirror\ndescription:\n[\nname: I_in, type: CurrentSource, ports: {Np: VDD, Nn: P}\nname: Q1, type: NMOS, ports: {S: GND, D: d1g3s3, G: d1g3s3}\nname: Q2, type: NMOS, ports: {S: GND, D: s2s4, G: d1g3s3}\nname: Q3, type: NMOS, ports: {S: d1g3s3, D: P, G: P}\nname: Q4, type: NMOS, ports: {S: s2s4, D: Vout, G: P}\n]\nextrainfo:The circuit is a cascode current mirror, significantly enhancing the output impedance. This configuration is achieved by stacking transistors Q3 and Q4 atop Q1 and Q2, respectively, improving the output impedance by a factor of $g_{m4} r_{ds4}$, thus boosting the circuit's gain.\n\nFig. 3.14 A cascode current mirror.\n\nConsequently, the output impedance is augmented by a factor of $g_{m 4} r_{d s 4}$, which represents the upper limit for the gain of a single-transistor MOS gain-stage, typically ranging between 10 and 100, depending on transistor dimensions, currents, and the employed technology. This substantial increase in output impedance is crucial for achieving single-stage amplifiers with high low-frequency gains.\n\nHowever, a drawback of using a cascode current mirror is the reduction in the maximum output voltage swings before transistors enter the triode region. To comprehend this reduction, recall that for an n-channel transistor to operate in the active region (also known as the saturation or pinch-off region), its drain-source voltage must exceed\n\nKey Point: Adding a cascode device to a CMOS current mirror enhances its output resistance by roughly the gain of the cascode device, $\\mathrm{g}_{\\mathrm{m}} \\mathrm{r}_{\\mathrm{ds}}$. The voltage swing at the current mirror output is diminished because a voltage drop must be maintained across the cascode device to keep it in active mode.\n\n$$\n\\begin{equation*}\nV_{\\text {eff }} \\equiv V_{G S}-V_{t n} \\tag{3.38}\n\\end{equation*}\n$$\n\nas demonstrated in Chapter 1, which is given by\n\n$$\n\\begin{equation*}\nV_{\\text {eff }}=\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x}(W / L)}} \\tag{3.39}\n\\end{equation*}\n$$\n\nAssuming all transistors have identical sizes and currents, they also share the same $V_{\\text {eff }}$ and, consequently, the same gate-source voltages, $\\mathrm{V}_{\\mathrm{Gsi}}=\\mathrm{V}_{\\text {eff }}+\\mathrm{V}_{\\mathrm{tn}}$. From Fig. 3.14, it is evident that\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{G} 3}=\\mathrm{V}_{\\mathrm{GS} 1}+\\mathrm{V}_{\\mathrm{GS} 3}=2 \\mathrm{~V}_{\\mathrm{eff}}+2 \\mathrm{~V}_{\\mathrm{tn}} \\tag{3.40}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\nV_{D S 2}=V_{G 3}-V_{G S 4}=V_{G 3}-\\left(V_{\\text {eff }}+V_{\\mathrm{tn}}\\right)=V_{\\text {eff }}+V_{\\mathrm{tn}} \\tag{3.41}\n\\end{equation*}\n$$\n\nThus, the drain-source voltage of $Q_{2}$ exceeds the minimum required for it to be at the edge of the active region. Specifically, the drain-source voltage of $\\mathrm{Q}_{2}$ is $\\mathrm{V}_{\\mathrm{tn}}$ more than necessary. Since the smallest output voltage, $V_{D 4}$, that can be achieved without $Q_{4}$ entering the triode region is $V_{D S 2}+V_{\\text {eff }}$, the minimum allowable voltage for $V_{\\text {out }}$ is\n\n$$\n\\begin{equation*}\nV_{\\text {out }}>V_{D S 2}+V_{\\text {eff }}=2 V_{\\text {eff } 1}+V_{\\text {tn }} \\tag{3.42}\n\\end{equation*}\n$$\n\nwhich is $\\mathrm{V}_{\\mathrm{tn}}$ greater than the minimum value of $2 \\mathrm{~V}_{\\text {eff }}$. This reduction in signal swing is a significant disadvantage, especially in modern technologies where the maximum allowable power-supply voltage might be as low as 1 V. In Section 6.3, we will explore how the cascode current mirror can be modified to retain high output impedances while still permitting near-minimum voltages at the mirror's output."
},
{
    "text": "A cascode current mirror is depicted in Fig. 3.14. Initially, observe that the output impedance seen at the drain of $Q_{2}$ is simply $r_{d s 2}$, as determined through an analysis akin to that used for a basic current mirror. Consequently, the output impedance can be promptly derived by treating $Q_{4}$ as a current source with a source-degeneration resistor of value $r_{\\mathrm{ds} 2}$. Utilizing (3.32) and noting that $Q_{4}$ now acts as the cascode transistor instead of $Q_{2}$, we obtain\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=r_{d s 4}\\left[1+R_{s}\\left(g_{m 4}+g_{s 4}+g_{d s 4}\\right)\\right] \\tag{3.36}\n\\end{equation*}\n$$\n\nwhere $R_{s}=r_{d s 2}$. Therefore, the output impedance is expressed as\n\n$$\n\\begin{align*}\nr_{\\text {out }} & =r_{d s 4}\\left[1+r_{d s 2}\\left(g_{m 4}+g_{s 4}+g_{d s 4}\\right)\\right] \\\\\n& \\cong r_{d s 4}\\left[1+r_{d s 2}\\left(g_{m 4}+g_{s 4}\\right)\\right]  \\tag{3.37}\\\\\n& \\cong r_{d s 4}\\left(r_{d s 2} g_{m 4}\\right)\n\\end{align*}\n$$\n\nimage_name: Fig. 3.14 A cascode current mirror\ndescription:\n[\nname: I_in, type: CurrentSource, ports: {Np: VDD, Nn: P}\nname: Q1, type: NMOS, ports: {S: GND, D: d1g3s3, G: d1g3s3}\nname: Q2, type: NMOS, ports: {S: GND, D: s2s4, G: d1g3s3}\nname: Q3, type: NMOS, ports: {S: d1g3s3, D: P, G: P}\nname: Q4, type: NMOS, ports: {S: s2s4, D: Vout, G: P}\n]\nextrainfo: The circuit is a cascode current mirror, significantly boosting the output impedance. This configuration is achieved by stacking transistors Q3 and Q4 atop Q1 and Q2, respectively, enhancing the output impedance by a factor of $g_{m4} r_{ds4}$, thereby increasing the circuit's gain.\n\nFig. 3.14 A cascode current mirror.\n\nHence, the output impedance is augmented by a factor of $g_{m 4} r_{d s 4}$, which represents the upper limit for the gain of a single-transistor MOS gain-stage, typically ranging between 10 and 100, depending on transistor dimensions, currents, and the technology employed. This substantial increase in output impedance is crucial for achieving single-stage amplifiers with high low-frequency gains.\n\nA drawback of employing a cascode current mirror is the reduction in the maximum output voltage swings before transistors enter the triode region. To comprehend this reduction, recall that for an n-channel transistor to operate in the active region (also known as the saturation or pinch-off region), its drain-source voltage must exceed\n\nKey Point: Adding a cascode device to a CMOS current mirror enhances its output resistance by roughly the gain of the cascode device, $\\mathrm{g}_{\\mathrm{m}} \\mathrm{r}_{\\mathrm{ds}}$. The available voltage swing at the current mirror output decreases because a voltage drop must be maintained across the cascode device to keep it in active mode.\n\n$$\n\\begin{equation*}\nV_{\\text {eff }} \\equiv V_{G S}-V_{t n} \\tag{3.38}\n\\end{equation*}\n$$\n\nas demonstrated in Chapter 1, this is given by\n\n$$\n\\begin{equation*}\nV_{\\text {eff }}=\\sqrt{\\frac{2 I_{D}}{\\mu_{n} C_{o x}(W / L)}} \\tag{3.39}\n\\end{equation*}\n$$\n\nAssuming all transistors have identical sizes and currents, they also share the same $\\mathrm{V}_{\\text {eff }}$ and hence the same gate-source voltages, $\\mathrm{V}_{\\mathrm{Gsi}}=\\mathrm{V}_{\\text {eff }}+\\mathrm{V}_{\\mathrm{tn}}$. From Fig. 3.14, it is evident that\n\n$$\n\\begin{equation*}\n\\mathrm{V}_{\\mathrm{G} 3}=\\mathrm{V}_{\\mathrm{GS} 1}+\\mathrm{V}_{\\mathrm{GS} 3}=2 \\mathrm{~V}_{\\mathrm{eff}}+2 \\mathrm{~V}_{\\mathrm{tn}} \\tag{3.40}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\nV_{D S 2}=V_{G 3}-V_{G S 4}=V_{G 3}-\\left(V_{\\text {eff }}+V_{\\mathrm{tn}}\\right)=V_{\\text {eff }}+V_{\\mathrm{tn}} \\tag{3.41}\n\\end{equation*}\n$$\n\nThus, the drain-source voltage of $Q_{2}$ exceeds the minimum required for it to be at the edge of the active region. Specifically, the drain-source voltage of $\\mathrm{Q}_{2}$ is $\\mathrm{V}_{\\mathrm{tn}}$ higher than necessary. Since the smallest output voltage, $V_{D 4}$, that can be achieved without $Q_{4}$ entering the triode region is $V_{D S 2}+V_{\\text {eff }}$, the minimum allowable voltage for $V_{\\text {out }}$ is\n\n$$\n\\begin{equation*}\nV_{\\text {out }}>V_{D S 2}+V_{\\text {eff }}=2 V_{\\text {eff } 1}+V_{\\text {tn }} \\tag{3.42}\n\\end{equation*}\n$$\n\nwhich is $\\mathrm{V}_{\\mathrm{tn}}$ greater than the minimum value of $2 \\mathrm{~V}_{\\text {eff }}$. This reduction in signal swing is a significant drawback in modern technologies, where the maximum allowable power-supply voltage might be as low as 1 V. In Section 6.3, we will explore how the cascode current mirror can be modified to retain high output impedances while still permitting near-minimum voltages at the mirror's output."
},
{
    "text": "In contemporary IC design, a prevalent setup for a single-stage amplifier is the cascode configuration, which comprises a common-source-connected transistor feeding into a common-gate-connected transistor. Fig. 3.15 illustrates two instances of cascode amplifiers. The setup in Fig. 3.15(a) features an n-channel common-source transistor, $\\mathrm{Q}_{1}$, and an n-channel common-gate cascode transistor, $\\mathrm{Q}_{2}$, often termed a telescopic-cascode amplifier. Conversely, Fig. 3.15(b) presents an n-channel input transistor paired with a p-channel cascode transistor, commonly referred to as a folded-cascode stage. When integrated into an operational amplifier, the folded cascode offers a broader output swing compared to the telescopic cascode, albeit typically at the cost of higher power consumption due to parallel drain bias currents for $Q_{1}$ and $Q_{2}$, unlike the shared dc drain current in the telescopic cascode.\n\nThe widespread adoption of cascode stages is attributed to two primary factors. Firstly, they can achieve substantial gain in a single stage, owing to the high output impedances facilitated by high-quality cascode current mirrors. Secondly, cascode stages constrain the voltage across the input drive transistor, thereby mitigating short-channel effects, which is crucial for modern technologies with very short channel-length transistors. This also enables the circuit to manage higher output voltages without jeopardizing the common-source transistor.\n\nKey Point: The cascode gain stage employs a common-gate transistor $\\mathrm{Q}_{2}$ to diminish $\\mathrm{V}_{\\mathrm{DS}}$ variations on a common-source transistor $\\mathrm{Q}_{1}$, resulting in high output resistance, potential high gain, and diminished short-channel effects. However, this comes at the expense of a reduced available output voltage swing.\nimage_name:(a)\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: d1s2, G: Vin}\nname: Q2, type: NMOS, ports: {S: d1s2, D: Vout, G: Vbias}\nname: Ibias, type: CurrentSource, value: Ibias, ports: {Np: VDD, Nn: Vout}\n]\nextrainfo: The circuit diagram (a) depicts a telescopic-cascode amplifier. It leverages a common-gate transistor Q2 to minimize V_DS variations on a common-source transistor Q1, leading to high output resistance and potential high gain. The diagram includes a current source Ibias connected to the output node Vout, providing necessary biasing for the amplifier.\nimage_name:(b)\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: P1, G: Vin}\nname: Q2, type: PMOS, ports: {S: P1, D: Vout, G: Vbias}\nname: Ibias1, type: CurrentSource, value: Ibias1, ports: {Np: LOAD, Nn: P1}\nname: Ibias2, type: CurrentSource, value: Ibias2, ports: {Np: Vout, Nn: GND}\n]\nextrainfo: This circuit represents a folded-cascode amplifier configuration, utilizing an NMOS transistor Q1 and a PMOS transistor Q2. The current sources Ibias1 and Ibias2 are responsible for biasing the circuit, with the output derived from the node labeled Vout.\n\nFig. 3.15 (a) A telescopic-cascode amplifier and (b) a folded-cascode amplifier.\n\nThe principal disadvantage of cascode amplifiers is their constrained output voltage range, narrower than that of common-source amplifiers, to ensure all devices remain in the active region. This limitation arises because a certain voltage must be maintained between the drain and source of the additional cascode transistor, $Q_{2}$."
},
{
    "text": "In contemporary IC design, a prevalent setup for a single-stage amplifier is the cascode configuration, which comprises a common-source-connected transistor feeding into a common-gate-connected transistor. Fig. 3.15 illustrates two cascode amplifier examples. The setup in Fig. 3.15(a) features an n-channel common-source transistor, $\\mathrm{Q}_{1}$, and an n-channel common-gate cascode transistor, $\\mathrm{Q}_{2}$, often termed a telescopic-cascode amplifier. Conversely, Fig. 3.15(b) includes an n-channel input transistor and a p-channel cascode transistor, known as a folded-cascode stage. When integrated into an operational amplifier, the folded cascode offers a broader output swing than the telescopic cascode but typically consumes more power, as the drain bias currents for $Q_{1}$ and $Q_{2}$ are drawn in parallel from the supply voltage, unlike the shared dc drain current in the telescopic cascode.\n\nThe cascode stage's popularity stems from two primary reasons. Firstly, it can achieve substantial gain in a single stage due to high output impedances, facilitated by high-quality cascode current mirrors at the output nodes. Secondly, it restricts the voltage across the input drive transistor, mitigating short-channel effects, which is crucial for modern short-channel-length transistors, and allows the circuit to manage higher output voltages without endangering the common-source transistor.\n\nKey Point: The cascode gain stage employs a common-gate transistor $\\mathrm{Q}_{2}$ to diminish $\\mathrm{V}_{\\mathrm{DS}}$ variations on a common-source transistor $\\mathrm{Q}_{1}$, resulting in high output resistance, potential high gain, and reduced short-channel effects, albeit with a limited output voltage swing.\nimage_name:(a)\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: d1s2, G: Vin}\nname: Q2, type: NMOS, ports: {S: d1s2, D: Vout, G: Vbias}\nname: Ibias, type: CurrentSource, value: Ibias, ports: {Np: VDD, Nn: Vout}\n]\nextrainfo:The circuit diagram (a) depicts a telescopic-cascode amplifier. It employs a common-gate transistor Q2 to minimize V_DS variations on a common-source transistor Q1, yielding high output resistance and potential high gain. The diagram includes a current source Ibias connected to the output node Vout, providing biasing for the amplifier.\nimage_name:(b)\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: P1, G: Vin}\nname: Q2, type: PMOS, ports: {S: P1, D: Vout, G: Vbias}\nname: Ibias1, type: CurrentSource, value: Ibias1, ports: {Np: LOAD, Nn: P1}\nname: Ibias2, type: CurrentSource, value: Ibias2, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit represents a folded-cascode amplifier configuration, utilizing an NMOS transistor Q1 and a PMOS transistor Q2. Current sources Ibias1 and Ibias2 supply biasing, with the output taken from the node labeled Vout.\n\nFig. 3.15 (a) A telescopic-cascode amplifier and (b) a folded-cascode amplifier.\n\nThe primary disadvantage of cascode amplifiers is their constrained output voltage range compared to common-source amplifiers, necessary to keep all devices in the active region. This limitation arises because a certain voltage must be maintained between the drain and source of the additional cascode transistor, $Q_{2}$."
},
{
    "text": "In contemporary IC design, a prevalent setup for a single-stage amplifier is the cascode configuration, which comprises a common-source-connected transistor feeding into a common-gate-connected transistor. Two instances of cascode amplifiers are depicted in Fig. 3.15. The setup in Fig. 3.15(a) features an n-channel common-source transistor, $\\mathrm{Q}_{1}$, and an n-channel common-gate cascode transistor, $\\mathrm{Q}_{2}$, often referred to as a telescopic-cascode amplifier. Conversely, the setup in Fig. 3.15(b) includes an n-channel input transistor but employs a p-channel transistor for the cascode (or common-gate) role, typically known as a folded-cascode stage. When integrated into an operational amplifier, the folded cascode can achieve a broader output swing than the telescopic cascode, albeit at the cost of higher power consumption due to parallel drain bias currents for $Q_{1}$ and $Q_{2}$, unlike the shared dc drain current in the telescopic cascode.\n\nThe widespread adoption of cascode stages is attributed to two primary factors. Firstly, they can achieve substantial gain in a single stage, thanks to the high impedances at the output, facilitated by high-quality cascode current mirrors used for the output node current sources. Secondly, cascode stages restrict the voltage across the input drive transistor, thereby mitigating short-channel effects, which is crucial for modern technologies with very short channel-length transistors. This also allows the circuit to manage higher output voltages without jeopardizing the common-source transistor.\n\nKey Point: The cascode gain stage employs a common-gate transistor $\\mathrm{Q}_{2}$ to diminish $\\mathrm{V}_{\\mathrm{DS}}$ variations on a common-source transistor $\\mathrm{Q}_{1}$, resulting in high output resistance, potential high gain, and minimized short-channel effects. However, this comes at the expense of reduced available output voltage swing.\nimage_name:(a)\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: d1s2, G: Vin}\nname: Q2, type: NMOS, ports: {S: d1s2, D: Vout, G: Vbias}\nname: Ibias, type: CurrentSource, value: Ibias, ports: {Np: VDD, Nn: Vout}\n]\nextrainfo:The circuit diagram (a) illustrates a telescopic-cascode amplifier. It utilizes a common-gate transistor Q2 to mitigate V_DS variations on a common-source transistor Q1, leading to high output resistance and potential high gain. The diagram includes a current source Ibias connected to the output node Vout, providing necessary biasing for the amplifier.\nimage_name:(b)\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: P1, G: Vin}\nname: Q2, type: PMOS, ports: {S: P1, D: Vout, G: Vbias}\nname: Ibias1, type: CurrentSource, value: Ibias1, ports: {Np: LOAD, Nn: P1}\nname: Ibias2, type: CurrentSource, value: Ibias2, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:This circuit represents a folded-cascode amplifier configuration, incorporating an NMOS transistor Q1 and a PMOS transistor Q2. The current sources Ibias1 and Ibias2 supply the necessary biasing, with the output derived from the node labeled Vout.\n\nFig. 3.15 (a) A telescopic-cascode amplifier and (b) a folded-cascode amplifier.\n\nThe primary limitation of cascode amplifiers is their constrained output voltage range compared to common-source amplifiers, necessitating the maintenance of a certain voltage between the drain and source of the additional cascode transistor, $Q_{2}$, to keep all devices in the active region."
},
{
    "text": "In contemporary IC design, a prevalent setup for a single-stage amplifier is the cascode configuration. This setup comprises a common-source-connected transistor feeding into a common-gate-connected transistor. Two instances of cascode amplifiers are depicted in Fig. 3.15. The arrangement in Fig. 3.15(a) features an n-channel common-source transistor, $\\mathrm{Q}_{1}$, and an n-channel common-gate cascode transistor, $\\mathrm{Q}_{2}$. This setup is occasionally termed a telescopic-cascode amplifier. The arrangement shown in Fig. 3.15(b) includes an n-channel input (or drive) transistor, but employs a p-channel transistor for the cascode (or common-gate) transistor. This setup is typically referred to as a folded-cascode stage. When integrated into an operational amplifier, the folded cascode can offer a greater output swing than the telescopic cascode. However, the folded cascode generally consumes more power since the drain bias currents for $Q_{1}$ and $Q_{2}$ are drawn in parallel from the supply voltage, whereas in the telescopic cascode, the same dc drain current is shared by both transistors.\n\nThere are two primary reasons for the widespread use of cascode stages. The first is their ability to achieve substantial gain in a single stage due to the high impedances at the output. To facilitate this high gain, the current sources connected to the output nodes are implemented using high-quality cascode current mirrors. The second key reason for employing cascode stages is their ability to limit the voltage across the input drive transistor. This minimizes any short-channel effects, which is particularly significant with modern technologies featuring very short channel-length transistors. It also allows the circuit to manage higher output voltages without endangering the common-source transistor.\n\nKey Point: The cascode gain stage utilizes a common-gate transistor $\\mathrm{Q}_{2}$ to mitigate $\\mathrm{V}_{\\mathrm{DS}}$ variations on a common-source transistor $\\mathrm{Q}_{1}$. This results in high output resistance, potentially high gain, and reduced short-channel effects. However, the available output voltage swing is diminished.\nimage_name:(a)\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: d1s2, G: Vin}\nname: Q2, type: NMOS, ports: {S: d1s2, D: Vout, G: Vbias}\nname: Ibias, type: CurrentSource, value: Ibias, ports: {Np: VDD, Nn: Vout}\n]\nextrainfo: The circuit diagram (a) illustrates a telescopic-cascode amplifier. It employs a common-gate transistor Q2 to reduce V_DS variations on a common-source transistor Q1, leading to high output resistance and potentially high gain. The diagram includes a current source Ibias connected to the output node Vout, providing biasing for the amplifier.\nimage_name:(b)\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: P1, G: Vin}\nname: Q2, type: PMOS, ports: {S: P1, D: Vout, G: Vbias}\nname: Ibias1, type: CurrentSource, value: Ibias1, ports: {Np: LOAD, Nn: P1}\nname: Ibias2, type: CurrentSource, value: Ibias2, ports: {Np: Vout, Nn: GND}\n]\nextrainfo: The circuit represents a folded-cascode amplifier configuration. It uses an NMOS transistor Q1 and a PMOS transistor Q2. The current sources Ibias1 and Ibias2 supply biasing for the circuit, with the output taken from the node labeled Vout.\n\nFig. 3.15 (a) A telescopic-cascode amplifier and (b) a folded-cascode amplifier.\n\nThe principal disadvantage of cascode amplifiers is that the output voltage is confined to a narrower range compared to the common-source amplifier to ensure all devices remain in the active region. This constraint arises because a certain voltage must be maintained between the drain and source of the additional cascode transistor, $Q_{2}$."
},
{
    "text": "In contemporary integrated circuit design, a prevalent setup for a single-stage amplifier is the cascode configuration. This setup comprises a common-source-connected transistor feeding into a common-gate-connected transistor. Two illustrations of cascode amplifiers are depicted in Fig. 3.15. The arrangement in Fig. 3.15(a) features an n-channel common-source transistor, $\\mathrm{Q}_{1}$, and an n-channel common-gate cascode transistor, $\\mathrm{Q}_{2}$. This setup is occasionally referred to as a telescopic-cascode amplifier. The arrangement in Fig. 3.15(b) includes an n-channel input (or drive) transistor, but employs a p-channel transistor for the cascode (or common-gate) transistor. This setup is typically known as a folded-cascode stage. When integrated into an operational amplifier, the folded cascode can offer a greater output swing than the telescopic cascode. However, the folded cascode generally consumes more power since the drain bias currents for $Q_{1}$ and $Q_{2}$ are drawn in parallel from the supply voltage, whereas in the telescopic cascode, the same dc drain current is shared by both transistors.\n\nThere are two primary reasons for the widespread use of cascode stages. The first is their ability to achieve substantial gain in a single stage due to the high impedances at the output. To facilitate this high gain, the current sources connected to the output nodes are implemented using high-quality cascode current mirrors. The second key reason for employing cascode stages is their ability to limit the voltage across the input drive transistor. This minimizes any short-channel effects, which is particularly crucial with modern technologies featuring very short channel-length transistors. It also allows the circuit to handle higher output voltages without risking damage to the common-source transistor.\n\nKey Point: The cascode gain stage utilizes a common-gate transistor $\\mathrm{Q}_{2}$ to mitigate $\\mathrm{V}_{\\mathrm{DS}}$ variations on a common-source transistor $\\mathrm{Q}_{1}$. This results in high output resistance, potentially high gain, and reduced short-channel effects. However, the available output voltage swing is diminished.\nimage_name:(a)\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: d1s2, G: Vin}\nname: Q2, type: NMOS, ports: {S: d1s2, D: Vout, G: Vbias}\nname: Ibias, type: CurrentSource, value: Ibias, ports: {Np: VDD, Nn: Vout}\n]\nextrainfo:The circuit diagram (a) represents a telescopic-cascode amplifier. It employs a common-gate transistor Q2 to reduce V_DS variations on a common-source transistor Q1, leading to high output resistance and potentially high gain. The diagram includes a current source Ibias connected to the output node Vout, providing biasing for the amplifier.\nimage_name:(b)\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: P1, G: Vin}\nname: Q2, type: PMOS, ports: {S: P1, D: Vout, G: Vbias}\nname: Ibias1, type: CurrentSource, value: Ibias1, ports: {Np: LOAD, Nn: P1}\nname: Ibias2, type: CurrentSource, value: Ibias2, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a folded-cascode amplifier configuration. It uses an NMOS transistor Q1 and a PMOS transistor Q2. The current sources Ibias1 and Ibias2 provide biasing for the circuit, and the output is derived from the node labeled Vout.\n\nFig. 3.15 (a) A telescopic-cascode amplifier and (b) a folded-cascode amplifier.\n\nThe principal drawback of cascode amplifiers is that the output voltage is confined to a narrower range compared to the common-source amplifier to ensure all devices remain in the active region. This limitation arises because a certain voltage must be maintained between the drain and source of the additional cascode transistor, $Q_{2}$."
},
{
    "text": "In contemporary IC design, a prevalent setup for a single-stage amplifier is the cascode configuration. This setup comprises a common-source-connected transistor feeding into a common-gate-connected transistor. Two instances of cascode amplifiers are depicted in Fig. 3.15. The configuration in Fig. 3.15(a) features both an n-channel common-source transistor, $\\mathrm{Q}_{1}$, and an n-channel common-gate cascode transistor, $\\mathrm{Q}_{2}$. This setup is occasionally referred to as a telescopic-cascode amplifier. The configuration illustrated in Fig. 3.15(b) includes an n-channel input (or drive) transistor, but utilizes a p-channel transistor for the cascode (or common-gate) transistor. This setup is typically known as a folded-cascode stage. When integrated into an operational amplifier, the folded cascode can offer a greater output swing than the telescopic cascode. However, the folded cascode generally consumes more power since the drain bias currents for $Q_{1}$ and $Q_{2}$ are drawn in parallel from the supply voltage, whereas in the telescopic cascode, the same dc drain current is shared by both transistors.\n\nThere are two primary reasons for the widespread use of cascode stages. The first is their ability to achieve substantial gain in a single stage due to the high impedances at the output. To facilitate this high gain, the current sources connected to the output nodes are implemented using high-quality cascode current mirrors. The second key reason for employing cascode stages is their ability to limit the voltage across the input drive transistor. This minimizes any short-channel effects, which is particularly crucial with modern technologies featuring very short channel-length transistors. It also allows the circuit to handle higher output voltages without risking damage to the common-source transistor.\n\nKey Point: The cascode gain stage employs a common-gate transistor $\\mathrm{Q}_{2}$ to mitigate $\\mathrm{V}_{\\mathrm{DS}}$ variations on a common-source transistor $\\mathrm{Q}_{1}$. This results in high output resistance, potentially high gain, and reduced short-channel effects. However, the available output voltage swing is diminished.\nimage_name:(a)\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: d1s2, G: Vin}\nname: Q2, type: NMOS, ports: {S: d1s2, D: Vout, G: Vbias}\nname: Ibias, type: CurrentSource, value: Ibias, ports: {Np: VDD, Nn: Vout}\n]\nextrainfo:The circuit diagram (a) represents a telescopic-cascode amplifier. It utilizes a common-gate transistor Q2 to decrease V_DS variations on a common-source transistor Q1, leading to high output resistance and potentially high gain. The diagram includes a current source Ibias connected to the output node Vout, providing biasing for the amplifier.\nimage_name:(b)\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: P1, G: Vin}\nname: Q2, type: PMOS, ports: {S: P1, D: Vout, G: Vbias}\nname: Ibias1, type: CurrentSource, value: Ibias1, ports: {Np: LOAD, Nn: P1}\nname: Ibias2, type: CurrentSource, value: Ibias2, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a folded-cascode amplifier configuration. It incorporates an NMOS transistor Q1 and a PMOS transistor Q2. The current sources Ibias1 and Ibias2 supply biasing for the circuit, and the output is derived from the node labeled Vout.\n\nFig. 3.15 (a) A telescopic-cascode amplifier and (b) a folded-cascode amplifier.\n\nThe primary drawback of cascode amplifiers is that the output voltage is confined to a narrower range compared to the common-source amplifier to ensure all devices remain in the active region. This necessity arises because a certain voltage must be maintained between the drain and source of the additional cascode transistor, $Q_{2}$."
},
{
    "text": "In contemporary IC design, a prevalent setup for a single-stage amplifier is the cascode configuration, which comprises a common-source-connected transistor feeding into a common-gate-connected transistor. Figures 3.15 illustrate two instances of cascode amplifiers. The setup in Fig. 3.15(a) features an n-channel common-source transistor, $\\mathrm{Q}_{1}$, and an n-channel common-gate cascode transistor, $\\mathrm{Q}_{2}$, often referred to as a telescopic-cascode amplifier. Conversely, Fig. 3.15(b) showcases an n-channel input transistor paired with a p-channel cascode transistor, commonly known as a folded-cascode stage. When integrated into an operational amplifier, the folded cascode offers a broader output swing compared to the telescopic cascode, albeit typically at the expense of higher power consumption. This is due to the parallel drawing of drain bias currents for $Q_{1}$ and $Q_{2}$ from the supply voltage, unlike the shared dc drain current in the telescopic cascode.\n\nThe widespread adoption of cascode stages is attributed to two primary factors. Firstly, they can achieve substantial gain in a single stage, thanks to the high impedances at the output, facilitated by high-quality cascode current mirrors. Secondly, cascode stages restrict the voltage across the input drive transistor, thereby mitigating short-channel effects, which is crucial for modern technologies with extremely short channel-length transistors. This also allows the circuit to manage higher output voltages without jeopardizing the common-source transistor.\n\nKey Point: The cascode gain stage employs a common-gate transistor $\\mathrm{Q}_{2}$ to diminish $\\mathrm{V}_{\\mathrm{DS}}$ variations on a common-source transistor $\\mathrm{Q}_{1}$, resulting in high output resistance, potential high gain, and minimized short-channel effects. However, this comes at the cost of reduced available output voltage swing.\n\nimage_name:(a)\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: d1s2, G: Vin}\nname: Q2, type: NMOS, ports: {S: d1s2, D: Vout, G: Vbias}\nname: Ibias, type: CurrentSource, value: Ibias, ports: {Np: VDD, Nn: Vout}\n]\nextrainfo: The circuit diagram (a) represents a telescopic-cascode amplifier. It utilizes a common-gate transistor Q2 to mitigate V_DS variations on a common-source transistor Q1, leading to high output resistance and potential high gain. The diagram includes a current source Ibias connected to the output node Vout, providing necessary biasing for the amplifier.\n\nimage_name:(b)\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: P1, G: Vin}\nname: Q2, type: PMOS, ports: {S: P1, D: Vout, G: Vbias}\nname: Ibias1, type: CurrentSource, value: Ibias1, ports: {Np: LOAD, Nn: P1}\nname: Ibias2, type: CurrentSource, value: Ibias2, ports: {Np: Vout, Nn: GND}\n]\nextrainfo: This circuit is a folded-cascode amplifier configuration, incorporating an NMOS transistor Q1 and a PMOS transistor Q2. The current sources Ibias1 and Ibias2 supply biasing for the circuit, with the output derived from the node labeled Vout.\n\nFig. 3.15 (a) A telescopic-cascode amplifier and (b) a folded-cascode amplifier.\n\nThe principal limitation of cascode amplifiers is their constrained output voltage range compared to common-source amplifiers, necessary to maintain all devices in the active region. This constraint arises because a certain voltage must be preserved between the drain and source of the additional cascode transistor, $Q_{2}$."
},
{
    "text": "In contemporary IC design, a prevalent setup for a single-stage amplifier is the cascode configuration, which comprises a common-source-connected transistor feeding into a common-gate-connected transistor. Fig. 3.15 illustrates two instances of cascode amplifiers. The setup in Fig. 3.15(a) features an n-channel common-source transistor, $\\mathrm{Q}_{1}$, and an n-channel common-gate cascode transistor, $\\mathrm{Q}_{2}$, often termed a telescopic-cascode amplifier. Conversely, Fig. 3.15(b) presents an n-channel input transistor paired with a p-channel cascode transistor, commonly referred to as a folded-cascode stage. When integrated into an operational amplifier, the folded cascode offers a broader output swing than the telescopic cascode, albeit typically at the cost of higher power consumption due to parallel drain bias currents for $Q_{1}$ and $Q_{2}$, unlike the shared dc drain current in the telescopic cascode.\n\nThe widespread adoption of cascode stages is attributed to two primary factors. Firstly, they can achieve substantial gain in a single stage, thanks to the high output impedances facilitated by high-quality cascode current mirrors. Secondly, cascode stages constrain the voltage across the input drive transistor, thereby mitigating short-channel effects, which is crucial for modern technologies with extremely short channel-length transistors. This also allows the circuit to manage higher output voltages without jeopardizing the common-source transistor.\n\nKey Point: The cascode gain stage employs a common-gate transistor $\\mathrm{Q}_{2}$ to diminish $\\mathrm{V}_{\\mathrm{DS}}$ variations on a common-source transistor $\\mathrm{Q}_{1}$, resulting in high output resistance, potential high gain, and minimized short-channel effects. However, this comes at the expense of a reduced available output voltage swing.\nimage_name:(a)\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: d1s2, G: Vin}\nname: Q2, type: NMOS, ports: {S: d1s2, D: Vout, G: Vbias}\nname: Ibias, type: CurrentSource, value: Ibias, ports: {Np: VDD, Nn: Vout}\n]\nextrainfo:The circuit diagram (a) depicts a telescopic-cascode amplifier. It leverages a common-gate transistor Q2 to mitigate V_DS variations on a common-source transistor Q1, yielding high output resistance and potential high gain. The diagram includes a current source Ibias connected to the output node Vout, providing necessary biasing for the amplifier.\nimage_name:(b)\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: GND, D: P1, G: Vin}\nname: Q2, type: PMOS, ports: {S: P1, D: Vout, G: Vbias}\nname: Ibias1, type: CurrentSource, value: Ibias1, ports: {Np: LOAD, Nn: P1}\nname: Ibias2, type: CurrentSource, value: Ibias2, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:This circuit represents a folded-cascode amplifier configuration, utilizing an NMOS transistor Q1 and a PMOS transistor Q2. The current sources Ibias1 and Ibias2 supply biasing for the circuit, with the output derived from the node labeled Vout.\n\nFig. 3.15 (a) A telescopic-cascode amplifier and (b) a folded-cascode amplifier.\n\nThe principal limitation of cascode amplifiers is their constrained output voltage range compared to common-source amplifiers, necessitating the maintenance of a certain voltage between the drain and source of the additional cascode transistor, $Q_{2}$, to keep all devices in the active region."
},
{
    "text": "The rephrased text:\n\n```\nThe majority of integrated amplifiers feature a differential input. To implement this differential input, nearly all amplifiers utilize what is commonly referred to as a differential transistor pair. A depiction of a differential pair along with a biasing current source is provided in Fig. 3.17. The transistors $\\mathrm{Q}_{1}$ and $\\mathrm{Q}_{2}$ are of identical size and are biased with the same DC gate voltage. A low-frequency, small-signal model of the differential pair is illustrated in Fig. 3.18. This small-signal equivalent circuit is derived from the T model for a MOS transistor, as detailed in Chapter 1. For the sake of simplifying the analysis, we temporarily disregard the output impedance of the transistors. By defining the differential input voltage as $\\mathrm{v}_{\\mathrm{in}} \\equiv \\mathrm{v}^{+}-\\mathrm{v}^{-}$, we obtain\nimage_name:Fig. 3.17 A MOS differential pair\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: P, D: LOAD2, G: V+}\nname: Q2, type: NMOS, ports: {S: P, D: LOAD3, G: V-}\nname: I_bias, type: CurrentSource, ports: {Np: P, Nn: LOAD1}\n]\nextrainfo:The circuit comprises a MOS differential pair with two NMOS transistors, Q1 and Q2, sharing a common source node P. These transistors are biased by a current source I_bias, and two additional current sources, P2 and P3, are connected to the drains of Q1 and Q2, respectively. The differential input is applied across V+ and V-.\n\nFig. 3.17 A MOS differential pair.\n\n$$\n\\begin{equation*}\ni_{d 1}=i_{s 1}=\\frac{v_{i n}}{r_{\\mathrm{s} 1}+r_{\\mathrm{s} 2}}=\\frac{v_{\\text {in }}}{1 / g_{\\mathrm{m} 1}+1 / g_{\\mathrm{m} 2}} \\tag{3.66}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.18 The small-signal model of a MOS differential pair.\ndescription:\n[\nname: rs1, type: Resistor, value: rs1, ports: {N1: V+, N2: p}\nname: rs2, type: Resistor, value: rs2, ports: {N1: V-, N2: p}\nname: LOAD2, type: CurrentControlledCurrentSource, ports: {Np: V+, Nn: VDD}\nname: LOAD3, type: CurrentControlledCurrentSource, ports: {Np: V-, Nn: VDD}\n]\nextrainfo:This circuit represents a small-signal model of a MOS differential pair, consisting of two resistors and two current-controlled current sources. The differential input is applied between V+ and V-, with the common node labeled as p.\n\nFig. 3.18 The small-signal model of a MOS differential pair.\n\nGiven that both $Q_{1}$ and $Q_{2}$ are biased with the same current, $g_{m 1}=g_{m 2}$. Consequently, we derive\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 1}=\\frac{\\mathrm{g}_{\\mathrm{m} 1}}{2} \\mathrm{v}_{\\mathrm{in}} \\tag{3.67}\n\\end{equation*}\n$$\n\nFurthermore, since $i_{\\mathrm{d} 2}=i_{\\mathrm{s} 2}=-\\mathrm{i}_{\\mathrm{d} 1}$, we find that\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 2}=-\\frac{\\mathrm{g}_{\\mathrm{m} 1}}{2} \\mathrm{v}_{\\mathrm{in}} \\tag{3.68}\n\\end{equation*}\n$$\n\nUltimately, by defining a differential output current, $i_{\\text {out }} \\equiv i_{d 1}-i_{d 2}$, we arrive at the following relationship:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\text {out }}=\\mathrm{g}_{\\mathrm{m} 1} \\mathrm{v}_{\\mathrm{in}} \\tag{3.69}\n\\end{equation*}\n$$\n\nKey Point: The differential pair with an active load traditionally serves as the initial stage of a two-stage operational amplifier. It accepts a differential input and generates a single-ended output with a gain similar to that of a common-source stage.\n\nIf two resistive loads $R_{L}$ are connected between the drains of $Q_{1}$ and $Q_{2}$ and a positive supply, the outcome is a differential output voltage across the two drain nodes, $\\mathrm{v}_{\\text {out }}=\\left(g_{m 1} R_{L}\\right) v_{\\text {in }}$, and the stage exhibits a differential small-signal gain of $g_{m 1} R_{L}$.\n\nWhen a differential pair incorporates a current mirror as an active load, a complete differential-input, single-ended-output gain stage can be achieved, as shown in Fig. 3.19. This configuration is typical for the first gain stage of a classic two-stage integrated op-amp; in this instance, the input differential pair is implemented using $n$-channel transistors, while the active current-mirror load is realized with $p$-channel transistors. From the small-signal analysis of the differential pair, we have\n\n$$\n\\begin{equation*}\ni_{d 1}=i_{s 1}=\\frac{g_{m 1}}{2} v_{i n} \\tag{3.70}\n\\end{equation*}\n$$\n\nAdditionally, by ignoring the transistor output impedances, we obtain\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 4}=\\mathrm{i}_{\\mathrm{d} 3}=-\\mathrm{i}_{\\mathrm{s} 1} \\tag{3.71}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.19 A differential-input, single-ended-output MOS gain stage.\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: P, D: X, G: Vip}\nname: Q2, type: NMOS, ports: {S: P, D: Vout, G: Vin}\nname: Q3, type: PMOS, ports: {S: VDD, D: X, G: X}\nname: Q4, type: PMOS, ports: {S: VDD, D: Vout, G: X}\nname: Ibias, type: CurrentSource, ports: {Np: VDD, Nn: P}\n]\nextrainfo:The circuit represents a differential-input, single-ended-output MOS gain stage with an active current-mirror load. The input differential pair is formed by NMOS transistors (Q1 and Q2), and the active current-mirror load is implemented using PMOS transistors (Q3 and Q4). The bias current source (Ibias) establishes the operating point of the differential pair.\n\nFig. 3.19 A differential-input, single-ended-output MOS gain stage.\n\nIt is noted that a positive small-signal current is defined as the current flowing into the drain of a transistor. Utilizing (3.71) and the fact that $i_{\\mathrm{d} 2}=-i_{\\mathrm{s} 1}$, we derive\n\n$$\n\\begin{equation*}\nv_{\\text {out }}=\\left(-i_{d 2}-i_{d 4}\\right) r_{\\text {out }}=2 i_{s 1} r_{\\text {out }}=g_{m 1} r_{\\text {out }} v_{\\text {in }} \\tag{3.72}\n\\end{equation*}\n$$\n\nThe assessment of the output resistance, $r_{\\text {out }}$, is conducted by employing the small-signal equivalent circuit and applying a voltage to the output node, as depicted in Fig. 3.20. Note that the T model is utilized for both $Q_{1}$ and $Q_{2}$, whereas $Q_{3}$ is replaced by an equivalent resistance (due to its diode connection), and the hybrid- $\\pi$ model is applied to $Q_{4}$. As customary, $r_{\\text {out }}$ is defined as the ratio $v_{x} / i_{x}$, where $i_{x}$ is the sum $i_{\\mathrm{x}}=\\mathrm{i}_{\\mathrm{x} 1}+\\mathrm{i}_{\\mathrm{x} 2}+\\mathrm{i}_{\\mathrm{x} 3}+\\mathrm{i}_{\\mathrm{x} 4}$. Clearly,\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{x} 1}=\\frac{\\mathrm{v}_{\\mathrm{x}}}{\\mathrm{r}_{\\mathrm{ds} 4}} \\tag{3.73}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.20\ndescription:\n[\nname: r_ds3 || r_s3, type: Resistor, value: r_ds3 || r_s3, ports: {N1: GND, N2: Va}\nname: d1, type: Diode, ports: {Na: Va, Nc: GND}\nname: r_ds1, type: Resistor, value: r_ds1, ports: {N1: Va, N2: s1}\nname: r_s1, type: Resistor, value: r_s1, ports: {N1: s1, N2: GND}\nname: r_ds4, type: Resistor, value: r_ds4, ports: {N1: GND, N2: vx}\nname: g_m4 v_a, type: VoltageControlledCurrentSource, ports: {Np: vx, Nn: vx}\nname: r_ds2, type: Resistor, value: r_ds2, ports: {N1: vx, N2: s2}\nname: r_s2, type: Resistor, value: r_s2, ports: {N1: s2, N2: GND}\nname: v_x, type: VoltageSource, value: v_x, ports: {Np: vx, Nn: GND}\n]\nextrainfo:This circuit serves as a small-signal model for determining the output impedance of a differential-input, single-ended-output MOS gain stage. It includes resistors, a diode, a voltage-controlled current source, and a voltage source. The circuit is designed to analyze the behavior of currents i_x1, i_x2, i_x3, and i_x4 in relation to the output voltage v_x.\n\nFig. 3.20 The small-signal model for the calculation of the output impedance of the differentialinput, single-ended-output MOS gain stage.\nimplying that the resistance encountered in the path of $i_{x 1}$ is equivalent to $r_{d s 4}$. Now, assuming that the effect of $r_{d s 1}$ can be neglected (since it is significantly larger than $r_{s 1}$), we observe that the current $i_{x 2}$ is given by\n\n$$\n\\begin{equation*}\ni_{x 2} \\cong \\frac{v_{x}}{r_{d s 2}+\\left(r_{s 1} \\| r_{s 2}\\right)} \\cong \\frac{v_{x}}{r_{d s} 2} \\tag{3.74}\n\\end{equation*}\n$$\n\nwhere the second approximation holds because $r_{d s 2}$ is typically much greater than $r_{s 1} \\| r_{s 2}$. This $i_{\\mathrm{x} 2}$ current divides equally between $i_{s 1}$ and $i_{s 2}$ (assuming $r_{s 1}=r_{s 2}$ and once again neglecting $r_{d s 1}$), resulting in\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{s} 1}=\\mathrm{i}_{\\mathrm{s} 2}=\\frac{-\\mathrm{v}_{\\mathrm{x}}}{2 \\mathrm{r}_{\\mathrm{ds} 2}} \\tag{3.75}\n\\end{equation*}\n$$\n\nHowever, due to the current mirror formed by $Q_{3}$ and $Q_{4}$, we have $i_{x 4}=i_{x 5}$ (assuming $g_{m 4}=1 / r_{s 4}=1 / r_{s 3}$ and $r_{d s 3}$ is much larger than $r_{s 3}$), thus the current $i_{x 4}$ is given by\n\n$$\n\\begin{equation*}\ni_{x 4}=-i_{s 1}=-i_{s 2}=-i_{x 3} \\tag{3.76}\n\\end{equation*}\n$$\n\nIn other words, when the current splits evenly between $r_{s 1}$ and $r_{s 2}$, the current mirror of $Q_{3}$ and $Q_{4}$ causes the two currents $i_{x 3}$ and $i_{x 4}$ to cancel each other out. Finally, the output resistance, $r_{o u t}$, is given by\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=\\frac{v_{x}}{i_{x 1}+i_{x 2}+i_{x 3}+i_{x 4}}=\\frac{v_{x}}{\\left(v_{x} / r_{d s 4}\\right)+\\left(v_{x} / r_{d s 2}\\right)} \\tag{3.77}\n\\end{equation*}\n$$\n\nwhich simplifies to the straightforward relationship\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=r_{\\mathrm{ds} 2} \\| r_{\\mathrm{ds} 4} \\tag{3.78}\n\\end{equation*}\n$$\n\nThus, at low frequencies, the gain, $A_{v}$, is expressed as\n\n$$\n\\begin{equation*}\nA_{v}=g_{m 1}\\left(r_{d s 2} \\| r_{d s 4}\\right) \\tag{3.79}\n\\end{equation*}\n```\n```"
},
{
    "text": "Most integrated amplifiers feature a differential input, typically implemented using a differential transistor pair. This pair, along with a biasing current source, is illustrated in Fig. 3.17. The transistors $\\mathrm{Q}_{1}$ and $\\mathrm{Q}_{2}$ are identically sized and biased with the same dc gate voltage. A low-frequency, small-signal model of this differential pair is depicted in Fig. 3.18. This model is based on the T model for a MOS transistor, as described in Chapter 1. For simplicity, we temporarily ignore the output impedance of the transistors. The differential input voltage is defined as $\\mathrm{v}_{\\mathrm{in}} \\equiv \\mathrm{v}^{+}-\\mathrm{v}^{-}$, giving us\n\nimage_name:Fig. 3.17 A MOS differential pair\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: P, D: LOAD2, G: V+}\nname: Q2, type: NMOS, ports: {S: P, D: LOAD3, G: V-}\nname: I_bias, type: CurrentSource, ports: {Np: P, Nn: LOAD1}\n]\nextrainfo:The circuit comprises a MOS differential pair with two NMOS transistors, Q1 and Q2, sharing a common source node P. These transistors are biased by a current source I_bias, with additional current sources P2 and P3 connected to the drains of Q1 and Q2, respectively. The differential input is applied across V+ and V-.\n\nFig. 3.17 A MOS differential pair.\n\n$$\n\\begin{equation*}\ni_{d 1}=i_{s 1}=\\frac{v_{i n}}{r_{\\mathrm{s} 1}+r_{\\mathrm{s} 2}}=\\frac{v_{\\text {in }}}{1 / g_{\\mathrm{m} 1}+1 / g_{\\mathrm{m} 2}} \\tag{3.66}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.18 The small-signal model of a MOS differential pair.\ndescription:\n[\nname: rs1, type: Resistor, value: rs1, ports: {N1: V+, N2: p}\nname: rs2, type: Resistor, value: rs2, ports: {N1: V-, N2: p}\nname: LOAD2, type: CurrentControlledCurrentSource, ports: {Np: V+, Nn: VDD}\nname: LOAD3, type: CurrentControlledCurrentSource, ports: {Np: V-, Nn: VDD}\n]\nextrainfo:This circuit represents a small-signal model of a MOS differential pair, featuring two resistors and two current-controlled current sources. The differential input is applied between V+ and V-, with the common node labeled as p.\n\nFig. 3.18 The small-signal model of a MOS differential pair.\n\nSince both $Q_{1}$ and $Q_{2}$ have identical bias currents, $g_{m 1}=g_{m 2}$. Consequently, we derive\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 1}=\\frac{\\mathrm{g}_{\\mathrm{m} 1}}{2} \\mathrm{v}_{\\mathrm{in}} \\tag{3.67}\n\\end{equation*}\n$$\n\nAlso, given $i_{\\mathrm{d} 2}=i_{\\mathrm{s} 2}=-\\mathrm{i}_{\\mathrm{d} 1}$, we find\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 2}=-\\frac{\\mathrm{g}_{\\mathrm{m} 1}}{2} \\mathrm{v}_{\\mathrm{in}} \\tag{3.68}\n\\end{equation*}\n$$\n\nDefining the differential output current as $i_{\\text {out }} \\equiv i_{d 1}-i_{d 2}$, we obtain the relationship\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\text {out }}=\\mathrm{g}_{\\mathrm{m} 1} \\mathrm{v}_{\\mathrm{in}} \\tag{3.69}\n\\end{equation*}\n$$\n\nKey Point: The differential pair with an active load typically serves as the initial stage of a two-stage operational amplifier. It accepts a differential input and generates a single-ended output with a gain similar to that of a common-source stage.\n\nIf two resistive loads $R_{L}$ are connected between the drains of $Q_{1}$ and $Q_{2}$ and a positive supply, the result is a differential output voltage across the two drain nodes, $\\mathrm{v}_{\\text {out }}=\\left(g_{m 1} R_{L}\\right) v_{\\text {in }}$, and the stage exhibits a differential small-signal gain of $g_{m 1} R_{L}$.\n\nUsing a current mirror as the active load in a differential pair creates a complete differential-input, single-ended-output gain stage, as shown in Fig. 3.19. This configuration is the standard first gain stage in a classic two-stage integrated opamp, where the input differential pair consists of $n$-channel transistors, and the active current-mirror load is implemented with $p$-channel transistors. From the small-signal analysis of the differential pair, we have\n\n$$\n\\begin{equation*}\ni_{d 1}=i_{s 1}=\\frac{g_{m 1}}{2} v_{i n} \\tag{3.70}\n\\end{equation*}\n$$\n\nAdditionally, neglecting transistor output impedances, we get\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 4}=\\mathrm{i}_{\\mathrm{d} 3}=-\\mathrm{i}_{\\mathrm{s} 1} \\tag{3.71}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.19 A differential-input, single-ended-output MOS gain stage.\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: P, D: X, G: Vip}\nname: Q2, type: NMOS, ports: {S: P, D: Vout, G: Vin}\nname: Q3, type: PMOS, ports: {S: VDD, D: X, G: X}\nname: Q4, type: PMOS, ports: {S: VDD, D: Vout, G: X}\nname: Ibias, type: CurrentSource, ports: {Np: VDD, Nn: P}\n]\nextrainfo:This circuit represents a differential-input, single-ended-output MOS gain stage with an active current-mirror load. The input differential pair is formed by NMOS transistors (Q1 and Q2), while the active current-mirror load is realized using PMOS transistors (Q3 and Q4). The bias current source (Ibias) sets the operating point of the differential pair.\n\nFig. 3.19 A differential-input, single-ended-output MOS gain stage.\n\nNote that a positive small-signal current is defined as the current flowing into a transistor's drain. Using (3.71) and the fact that $i_{\\mathrm{d} 2}=-i_{\\mathrm{s} 1}$, we derive\n\n$$\n\\begin{equation*}\nv_{\\text {out }}=\\left(-i_{d 2}-i_{d 4}\\right) r_{\\text {out }}=2 i_{s 1} r_{\\text {out }}=g_{m 1} r_{\\text {out }} v_{\\text {in }} \\tag{3.72}\n\\end{equation*}\n$$\n\nThe output resistance, $r_{\\text {out }}$, is evaluated using the small-signal equivalent circuit by applying a voltage to the output node, as shown in Fig. 3.20. Note that the T model is used for both $Q_{1}$ and $Q_{2}$, while $Q_{3}$ is replaced by an equivalent resistance (due to its diode connection), and the hybrid- $\\pi$ model is used for $Q_{4}$. As usual, $r_{\\text {out }}$ is defined as the ratio $v_{x} / i_{x}$, where $i_{x}$ is the sum $i_{\\mathrm{x}}=\\mathrm{i}_{\\mathrm{x} 1}+\\mathrm{i}_{\\mathrm{x} 2}+\\mathrm{i}_{\\mathrm{x} 3}+\\mathrm{i}_{\\mathrm{x} 4}$. Clearly,\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{x} 1}=\\frac{\\mathrm{v}_{\\mathrm{x}}}{\\mathrm{r}_{\\mathrm{ds} 4}} \\tag{3.73}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.20\ndescription:\n[\nname: r_ds3 || r_s3, type: Resistor, value: r_ds3 || r_s3, ports: {N1: GND, N2: Va}\nname: d1, type: Diode, ports: {Na: Va, Nc: GND}\nname: r_ds1, type: Resistor, value: r_ds1, ports: {N1: Va, N2: s1}\nname: r_s1, type: Resistor, value: r_s1, ports: {N1: s1, N2: GND}\nname: r_ds4, type: Resistor, value: r_ds4, ports: {N1: GND, N2: vx}\nname: g_m4 v_a, type: VoltageControlledCurrentSource, ports: {Np: vx, Nn: vx}\nname: r_ds2, type: Resistor, value: r_ds2, ports: {N1: vx, N2: s2}\nname: r_s2, type: Resistor, value: r_s2, ports: {N1: s2, N2: GND}\nname: v_x, type: VoltageSource, value: v_x, ports: {Np: vx, Nn: GND}\n]\nextrainfo:This circuit is a small-signal model for determining the output impedance of a differential-input, single-ended-output MOS gain stage. It includes resistors, a diode, a voltage-controlled current source, and a voltage source. The circuit is designed to analyze the behavior of currents i_x1, i_x2, i_x3, and i_x4 in relation to the output voltage v_x.\n\nFig. 3.20 The small-signal model for the calculation of the output impedance of the differentialinput, single-ended-output MOS gain stage.\nindicating that the resistance in the path of $i_{x 1}$ is $r_{d s 4}$. Now, assuming the effect of $r_{d s 1}$ can be neglected (as it is much larger than $r_{s 1}$), the current $i_{x 2}$ is given by\n\n$$\n\\begin{equation*}\ni_{x 2} \\cong \\frac{v_{x}}{r_{d s 2}+\\left(r_{s 1} \\| r_{s 2}\\right)} \\cong \\frac{v_{x}}{r_{d s} 2} \\tag{3.74}\n\\end{equation*}\n$$\n\nwhere the second approximation holds because $r_{d s 2}$ is typically much greater than $r_{s 1} \\| r_{s 2}$. This $i_{\\mathrm{x} 2}$ current splits equally between $i_{s 1}$ and $i_{s 2}$ (assuming $r_{s 1}=r_{s 2}$ and ignoring $r_{d s 1}$), resulting in\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{s} 1}=\\mathrm{i}_{\\mathrm{s} 2}=\\frac{-\\mathrm{v}_{\\mathrm{x}}}{2 \\mathrm{r}_{\\mathrm{ds} 2}} \\tag{3.75}\n\\end{equation*}\n$$\n\nHowever, due to the current mirror formed by $Q_{3}$ and $Q_{4}$, we have $i_{x 4}=i_{x 5}$ (assuming $g_{m 4}=1 / r_{s 4}=1 / r_{s 3}$ and $r_{d s 3}$ is much larger than $r_{s 3}$), so the current $i_{x 4}$ is\n\n$$\n\\begin{equation*}\ni_{x 4}=-i_{s 1}=-i_{s 2}=-i_{x 3} \\tag{3.76}\n\\end{equation*}\n$$\n\nIn other words, when the current splits equally between $r_{s 1}$ and $r_{s 2}$, the current mirror of $Q_{3}$ and $Q_{4}$ causes the currents $i_{x 3}$ and $i_{x 4}$ to cancel each other. Finally, the output resistance, $r_{o u t}$, is given by\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=\\frac{v_{x}}{i_{x 1}+i_{x 2}+i_{x 3}+i_{x 4}}=\\frac{v_{x}}{\\left(v_{x} / r_{d s 4}\\right)+\\left(v_{x} / r_{d s 2}\\right)} \\tag{3.77}\n\\end{equation*}\n$$\n\nleading to the simplified relationship\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=r_{\\mathrm{ds} 2} \\| r_{\\mathrm{ds} 4} \\tag{3.78}\n\\end{equation*}\n$$\n\nThus, at low frequencies, the gain, $A_{v}$, is expressed as\n\n$$\n\\begin{equation*}\nA_{v}=g_{m 1}\\left(r_{d s 2} \\| r_{d s 4}\\right) \\tag{3.79}\n\\end{equation*}\n```"
},
{
    "text": "Most integrated amplifiers feature a differential input, typically implemented using a differential transistor pair. Fig. 3.17 illustrates this pair, consisting of transistors $\\mathrm{Q}_{1}$ and $\\mathrm{Q}_{2}$, both NMOS and identically sized, biased with the same dc gate voltage and connected to a biasing current source $\\mathrm{I}_{\\text{bias}}$. A low-frequency, small-signal model of this differential pair is depicted in Fig. 3.18, based on the T model for a MOS transistor described in Chapter 1. For simplicity, the output impedance of the transistors is initially disregarded. The differential input voltage is defined as $\\mathrm{v}_{\\mathrm{in}} \\equiv \\mathrm{v}^{+} - \\mathrm{v}^{-}$, leading to:\n\nimage_name:Fig. 3.17 A MOS differential pair\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: P, D: LOAD2, G: V+}\nname: Q2, type: NMOS, ports: {S: P, D: LOAD3, G: V-}\nname: I_bias, type: CurrentSource, ports: {Np: P, Nn: LOAD1}\n]\nextrainfo:The circuit comprises a MOS differential pair with two NMOS transistors, Q1 and Q2, sharing a common source node P. These transistors are biased by a current source I_bias, with additional current sources P2 and P3 connected to the drains of Q1 and Q2, respectively. The differential input is applied across V+ and V-.\n\nFig. 3.17 A MOS differential pair.\n\n$$\n\\begin{equation*}\ni_{d 1} = i_{s 1} = \\frac{v_{i n}}{r_{\\mathrm{s} 1} + r_{\\mathrm{s} 2}} = \\frac{v_{\\text{in}}}{1 / g_{\\mathrm{m} 1} + 1 / g_{\\mathrm{m} 2}} \\tag{3.66}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.18 The small-signal model of a MOS differential pair.\ndescription:\n[\nname: rs1, type: Resistor, value: rs1, ports: {N1: V+, N2: p}\nname: rs2, type: Resistor, value: rs2, ports: {N1: V-, N2: p}\nname: LOAD2, type: CurrentControlledCurrentSource, ports: {Np: V+, Nn: VDD}\nname: LOAD3, type: CurrentControlledCurrentSource, ports: {Np: V-, Nn: VDD}\n]\nextrainfo:This small-signal model of a MOS differential pair includes two resistors and two current-controlled current sources. The differential input is applied between V+ and V-, with a common node labeled as p.\n\nFig. 3.18 The small-signal model of a MOS differential pair.\n\nGiven that both $Q_{1}$ and $Q_{2}$ have identical bias currents, $g_{m 1} = g_{m 2}$. Thus, we derive:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 1} = \\frac{\\mathrm{g}_{\\mathrm{m} 1}}{2} \\mathrm{v}_{\\mathrm{in}} \\tag{3.67}\n\\end{equation*}\n$$\n\nAdditionally, since $i_{\\mathrm{d} 2} = i_{\\mathrm{s} 2} = -\\mathrm{i}_{\\mathrm{d} 1}$, we find:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 2} = -\\frac{\\mathrm{g}_{\\mathrm{m} 1}}{2} \\mathrm{v}_{\\mathrm{in}} \\tag{3.68}\n\\end{equation*}\n$$\n\nDefining the differential output current as $i_{\\text{out}} \\equiv i_{d 1} - i_{d 2}$, we obtain:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\text{out}} = \\mathrm{g}_{\\mathrm{m} 1} \\mathrm{v}_{\\mathrm{in}} \\tag{3.69}\n\\end{equation*}\n$$\n\nKey Point: The differential pair with an active load typically serves as the initial stage of a two-stage operational amplifier. It accepts a differential input and produces a single-ended output with a gain similar to that of a common-source stage.\n\nIf resistive loads $R_{L}$ are connected between the drains of $Q_{1}$ and $Q_{2}$ and a positive supply, the resulting differential output voltage between the drain nodes is $\\mathrm{v}_{\\text{out}} = \\left(g_{m 1} R_{L}\\right) v_{\\text{in}}$, yielding a differential small-signal gain of $g_{m 1} R_{L}$.\n\nUsing a current mirror as an active load, a complete differential-input, single-ended-output gain stage can be formed, as shown in Fig. 3.19. This configuration is the standard first gain stage in a classic two-stage integrated opamp, employing $n$-channel transistors for the input differential pair and $p$-channel transistors for the active current-mirror load. From the small-signal analysis of the differential pair, we have:\n\n$$\n\\begin{equation*}\ni_{d 1} = i_{s 1} = \\frac{g_{m 1}}{2} v_{i n} \\tag{3.70}\n\\end{equation*}\n$$\n\nIgnoring transistor output impedances, we also have:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 4} = \\mathrm{i}_{\\mathrm{d} 3} = -\\mathrm{i}_{\\mathrm{s} 1} \\tag{3.71}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.19 A differential-input, single-ended-output MOS gain stage.\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: P, D: X, G: Vip}\nname: Q2, type: NMOS, ports: {S: P, D: Vout, G: Vin}\nname: Q3, type: PMOS, ports: {S: VDD, D: X, G: X}\nname: Q4, type: PMOS, ports: {S: VDD, D: Vout, G: X}\nname: Ibias, type: CurrentSource, ports: {Np: VDD, Nn: P}\n]\nextrainfo:This circuit represents a differential-input, single-ended-output MOS gain stage with an active current-mirror load. The input differential pair uses NMOS transistors (Q1 and Q2), while the active current-mirror load employs PMOS transistors (Q3 and Q4). The bias current source (Ibias) establishes the operating point of the differential pair.\n\nFig. 3.19 A differential-input, single-ended-output MOS gain stage.\n\nNoting that a positive small-signal current flows into a transistor's drain, using (3.71) and the fact that $i_{\\mathrm{d} 2} = -i_{\\mathrm{s} 1}$, we derive:\n\n$$\n\\begin{equation*}\nv_{\\text{out}} = \\left(-i_{d 2} - i_{d 4}\\right) r_{\\text{out}} = 2 i_{s 1} r_{\\text{out}} = g_{m 1} r_{\\text{out}} v_{\\text{in}} \\tag{3.72}\n\\end{equation*}\n$$\n\nTo evaluate the output resistance $r_{\\text{out}}$, a small-signal equivalent circuit is used, applying a voltage to the output node, as shown in Fig. 3.20. This model employs the T model for $Q_{1}$ and $Q_{2}$, an equivalent resistance for $Q_{3}$ (due to its diode connection), and the hybrid-$\\pi$ model for $Q_{4}$. Typically, $r_{\\text{out}}$ is defined as the ratio $v_{x} / i_{x}$, where $i_{x}$ is the sum $i_{\\mathrm{x}} = \\mathrm{i}_{\\mathrm{x} 1} + \\mathrm{i}_{\\mathrm{x} 2} + \\mathrm{i}_{\\mathrm{x} 3} + \\mathrm{i}_{\\mathrm{x} 4}$. Clearly,\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{x} 1} = \\frac{\\mathrm{v}_{\\mathrm{x}}}{\\mathrm{r}_{\\mathrm{ds} 4}} \\tag{3.73}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.20\ndescription:\n[\nname: r_ds3 || r_s3, type: Resistor, value: r_ds3 || r_s3, ports: {N1: GND, N2: Va}\nname: d1, type: Diode, ports: {Na: Va, Nc: GND}\nname: r_ds1, type: Resistor, value: r_ds1, ports: {N1: Va, N2: s1}\nname: r_s1, type: Resistor, value: r_s1, ports: {N1: s1, N2: GND}\nname: r_ds4, type: Resistor, value: r_ds4, ports: {N1: GND, N2: vx}\nname: g_m4 v_a, type: VoltageControlledCurrentSource, ports: {Np: vx, Nn: vx}\nname: r_ds2, type: Resistor, value: r_ds2, ports: {N1: vx, N2: s2}\nname: r_s2, type: Resistor, value: r_s2, ports: {N1: s2, N2: GND}\nname: v_x, type: VoltageSource, value: v_x, ports: {Np: vx, Nn: GND}\n]\nextrainfo:This small-signal model is used to calculate the output impedance of a differential-input, single-ended-output MOS gain stage. It includes resistors, a diode, a voltage-controlled current source, and a voltage source. The circuit is designed to analyze the behavior of currents i_x1, i_x2, i_x3, and i_x4 in relation to the output voltage v_x.\n\nFig. 3.20 The small-signal model for the calculation of the output impedance of the differential-input, single-ended-output MOS gain stage.\n\nThis implies that the resistance seen in the path of $i_{x 1}$ is $r_{d s 4}$. Assuming $r_{d s 1}$ can be neglected (being much larger than $r_{s 1}$), the current $i_{x 2}$ is:\n\n$$\n\\begin{equation*}\ni_{x 2} \\cong \\frac{v_{x}}{r_{d s 2} + \\left(r_{s 1} \\| r_{s 2}\\right)} \\cong \\frac{v_{x}}{r_{d s 2}} \\tag{3.74}\n\\end{equation*}\n$$\n\nwhere the second approximation holds because $r_{d s 2}$ is typically much greater than $r_{s 1} \\| r_{s 2}$. This $i_{\\mathrm{x} 2}$ current splits equally between $i_{s 1}$ and $i_{s 2}$ (assuming $r_{s 1} = r_{s 2}$ and neglecting $r_{d s 1}$), resulting in:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{s} 1} = \\mathrm{i}_{\\mathrm{s} 2} = \\frac{-\\mathrm{v}_{\\mathrm{x}}}{2 \\mathrm{r}_{\\mathrm{ds} 2}} \\tag{3.75}\n\\end{equation*}\n$$\n\nHowever, due to the current mirror formed by $Q_{3}$ and $Q_{4}$, $i_{x 4} = i_{x 5}$ (assuming $g_{m 4} = 1 / r_{s 4} = 1 / r_{s 3}$ and $r_{d s 3}$ is much larger than $r_{s 3}$), so $i_{x 4}$ is:\n\n$$\n\\begin{equation*}\ni_{x 4} = -i_{s 1} = -i_{s 2} = -i_{x 3} \\tag{3.76}\n\\end{equation*}\n$$\n\nIn other words, when the current splits equally between $r_{s 1}$ and $r_{s 2}$, the current mirror of $Q_{3}$ and $Q_{4}$ causes $i_{x 3}$ and $i_{x 4}$ to cancel each other. Finally, the output resistance $r_{\\text{out}}$ is:\n\n$$\n\\begin{equation*}\nr_{\\text{out}} = \\frac{v_{x}}{i_{x 1} + i_{x 2} + i_{x 3} + i_{x 4}} = \\frac{v_{x}}{\\left(v_{x} / r_{d s 4}\\right) + \\left(v_{x} / r_{d s 2}\\right)} \\tag{3.77}\n\\end{equation*}\n$$\n\nyielding the simple relationship:\n\n$$\n\\begin{equation*}\nr_{\\text{out}} = r_{\\mathrm{ds} 2} \\| r_{\\mathrm{ds} 4} \\tag{3.78}\n\\end{equation*}\n$$\n\nThus, at low frequencies, the gain $A_{v}$ is:\n\n$$\n\\begin{equation*}\nA_{v} = g_{m 1}\\left(r_{d s 2} \\| r_{d s 4}\\right) \\tag{3.79}\n\\end{equation*}\n```"
},
{
    "text": "Most integrated amplifiers feature a differential input, typically implemented using a differential transistor pair. This pair, along with a biasing current source, is depicted in Fig. 3.17. The transistors $\\mathrm{Q}_{1}$ and $\\mathrm{Q}_{2}$ are identically sized and biased with the same dc gate voltage. A low-frequency, small-signal model of this differential pair is shown in Fig. 3.18, based on the T model for a MOS transistor described in Chapter 1. For simplicity, we temporarily ignore the output impedance of the transistors. The differential input voltage is defined as $\\mathrm{v}_{\\mathrm{in}} \\equiv \\mathrm{v}^{+}-\\mathrm{v}^{-}$, leading to:\n\nimage_name:Fig. 3.17 A MOS differential pair\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: P, D: LOAD2, G: V+}\nname: Q2, type: NMOS, ports: {S: P, D: LOAD3, G: V-}\nname: I_bias, type: CurrentSource, ports: {Np: P, Nn: LOAD1}\n]\nextrainfo:The circuit consists of a MOS differential pair with two NMOS transistors, Q1 and Q2, sharing a common source node P. These transistors are biased by a current source I_bias, with additional current sources P2 and P3 connected to the drains of Q1 and Q2, respectively. The differential input is applied across V+ and V-.\n\nFig. 3.17 A MOS differential pair.\n\n$$\n\\begin{equation*}\ni_{d 1}=i_{s 1}=\\frac{v_{i n}}{r_{\\mathrm{s} 1}+r_{\\mathrm{s} 2}}=\\frac{v_{\\text {in }}}{1 / g_{\\mathrm{m} 1}+1 / g_{\\mathrm{m} 2}} \\tag{3.66}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.18 The small-signal model of a MOS differential pair.\ndescription:\n[\nname: rs1, type: Resistor, value: rs1, ports: {N1: V+, N2: p}\nname: rs2, type: Resistor, value: rs2, ports: {N1: V-, N2: p}\nname: LOAD2, type: CurrentControlledCurrentSource, ports: {Np: V+, Nn: VDD}\nname: LOAD3, type: CurrentControlledCurrentSource, ports: {Np: V-, Nn: VDD}\n]\nextrainfo:This circuit is a small-signal model of a MOS differential pair, featuring two resistors and two current-controlled current sources. The differential input is applied between V+ and V-, with a common node labeled as p.\n\nFig. 3.18 The small-signal model of a MOS differential pair.\n\nGiven that both $Q_{1}$ and $Q_{2}$ have identical bias currents, $g_{m 1}=g_{m 2}$. Thus, we derive:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 1}=\\frac{\\mathrm{g}_{\\mathrm{m} 1}}{2} \\mathrm{v}_{\\mathrm{in}} \\tag{3.67}\n\\end{equation*}\n$$\n\nAlso, since $i_{\\mathrm{d} 2}=i_{\\mathrm{s} 2}=-\\mathrm{i}_{\\mathrm{d} 1}$, we find:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 2}=-\\frac{\\mathrm{g}_{\\mathrm{m} 1}}{2} \\mathrm{v}_{\\mathrm{in}} \\tag{3.68}\n\\end{equation*}\n$$\n\nDefining the differential output current as $i_{\\text {out }} \\equiv i_{d 1}-i_{d 2}$, we obtain:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\text {out }}=\\mathrm{g}_{\\mathrm{m} 1} \\mathrm{v}_{\\mathrm{in}} \\tag{3.69}\n\\end{equation*}\n$$\n\nKey Point: The differential pair with an active load typically serves as the initial stage of a two-stage operational amplifier. It accepts a differential input and produces a single-ended output with gain comparable to a common-source stage.\n\nWhen two resistive loads $R_{L}$ are connected between the drains of $Q_{1}$ and $Q_{2}$ and a positive supply, a differential output voltage $\\mathrm{v}_{\\text {out }}=\\left(g_{m 1} R_{L}\\right) v_{\\text {in }}$ is produced, yielding a differential small-signal gain of $g_{m 1} R_{L}$.\n\nUsing a current mirror as the active load, a complete differential-input, single-ended-output gain stage can be formed, as illustrated in Fig. 3.19. This configuration is typical for the first gain stage of a classical two-stage integrated opamp, employing $n$-channel transistors for the input differential pair and $p$-channel transistors for the active current-mirror load. From the small-signal analysis of the differential pair, we have:\n\n$$\n\\begin{equation*}\ni_{d 1}=i_{s 1}=\\frac{g_{m 1}}{2} v_{i n} \\tag{3.70}\n\\end{equation*}\n$$\n\nIgnoring transistor output impedances, we also have:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 4}=\\mathrm{i}_{\\mathrm{d} 3}=-\\mathrm{i}_{\\mathrm{s} 1} \\tag{3.71}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.19 A differential-input, single-ended-output MOS gain stage.\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: P, D: X, G: Vip}\nname: Q2, type: NMOS, ports: {S: P, D: Vout, G: Vin}\nname: Q3, type: PMOS, ports: {S: VDD, D: X, G: X}\nname: Q4, type: PMOS, ports: {S: VDD, D: Vout, G: X}\nname: Ibias, type: CurrentSource, ports: {Np: VDD, Nn: P}\n]\nextrainfo:This circuit is a differential-input, single-ended-output MOS gain stage with an active current-mirror load. The input differential pair uses NMOS transistors (Q1 and Q2), while the active current-mirror load uses PMOS transistors (Q3 and Q4). The bias current source (Ibias) sets the operating point of the differential pair.\n\nFig. 3.19 A differential-input, single-ended-output MOS gain stage.\n\nA positive small-signal current is defined as the current entering the drain of a transistor. Using (3.71) and the fact that $i_{\\mathrm{d} 2}=-i_{\\mathrm{s} 1}$, we derive:\n\n$$\n\\begin{equation*}\nv_{\\text {out }}=\\left(-i_{d 2}-i_{d 4}\\right) r_{\\text {out }}=2 i_{s 1} r_{\\text {out }}=g_{m 1} r_{\\text {out }} v_{\\text {in }} \\tag{3.72}\n\\end{equation*}\n$$\n\nThe output resistance, $r_{\\text {out }}$, is evaluated using a small-signal equivalent circuit with a voltage applied to the output node, as shown in Fig. 3.20. Note that the T model is used for both $Q_{1}$ and $Q_{2}$, while $Q_{3}$ is replaced by an equivalent resistance (due to its diode connection), and the hybrid- $\\pi$ model is used for $Q_{4}$. As usual, $r_{\\text {out }}$ is defined as the ratio $v_{x} / i_{x}$, where $i_{x}$ is the sum $i_{\\mathrm{x}}=\\mathrm{i}_{\\mathrm{x} 1}+\\mathrm{i}_{\\mathrm{x} 2}+\\mathrm{i}_{\\mathrm{x} 3}+\\mathrm{i}_{\\mathrm{x} 4}$. Clearly,\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{x} 1}=\\frac{\\mathrm{v}_{\\mathrm{x}}}{\\mathrm{r}_{\\mathrm{ds} 4}} \\tag{3.73}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.20\ndescription:\n[\nname: r_ds3 || r_s3, type: Resistor, value: r_ds3 || r_s3, ports: {N1: GND, N2: Va}\nname: d1, type: Diode, ports: {Na: Va, Nc: GND}\nname: r_ds1, type: Resistor, value: r_ds1, ports: {N1: Va, N2: s1}\nname: r_s1, type: Resistor, value: r_s1, ports: {N1: s1, N2: GND}\nname: r_ds4, type: Resistor, value: r_ds4, ports: {N1: GND, N2: vx}\nname: g_m4 v_a, type: VoltageControlledCurrentSource, ports: {Np: vx, Nn: vx}\nname: r_ds2, type: Resistor, value: r_ds2, ports: {N1: vx, N2: s2}\nname: r_s2, type: Resistor, value: r_s2, ports: {N1: s2, N2: GND}\nname: v_x, type: VoltageSource, value: v_x, ports: {Np: vx, Nn: GND}\n]\nextrainfo:This circuit is a small-signal model for calculating the output impedance of a differential-input, single-ended-output MOS gain stage. It includes resistors, a diode, a voltage-controlled current source, and a voltage source. The circuit is designed to analyze the behavior of currents i_x1, i_x2, i_x3, and i_x4 in relation to the output voltage v_x.\n\nFig. 3.20 The small-signal model for the calculation of the output impedance of the differentialinput, single-ended-output MOS gain stage.\n\nThis implies that the resistance seen in the path taken by $i_{x 1}$ is $r_{d s 4}$. Assuming the effect of $r_{d s 1}$ can be neglected (as it is much larger than $r_{s 1}$), the current $i_{x 2}$ is given by:\n\n$$\n\\begin{equation*}\ni_{x 2} \\cong \\frac{v_{x}}{r_{d s 2}+\\left(r_{s 1} \\| r_{s 2}\\right)} \\cong \\frac{v_{x}}{r_{d s} 2} \\tag{3.74}\n\\end{equation*}\n$$\n\nwhere the second approximation holds because $r_{d s 2}$ is typically much greater than $r_{s 1} \\| r_{s 2}$. This $i_{\\mathrm{x} 2}$ current splits equally between $i_{s 1}$ and $i_{s 2}$ (assuming $r_{s 1}=r_{s 2}$ and ignoring $r_{d s 1}$), resulting in:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{s} 1}=\\mathrm{i}_{\\mathrm{s} 2}=\\frac{-\\mathrm{v}_{\\mathrm{x}}}{2 \\mathrm{r}_{\\mathrm{ds} 2}} \\tag{3.75}\n\\end{equation*}\n$$\n\nHowever, due to the current mirror formed by $Q_{3}$ and $Q_{4}$, $i_{x 4}=i_{x 5}$ (assuming $g_{m 4}=1 / r_{s 4}=1 / r_{s 3}$ and $r_{d s 3}$ is much larger than $r_{s 3}$), so the current $i_{x 4}$ is:\n\n$$\n\\begin{equation*}\ni_{x 4}=-i_{s 1}=-i_{s 2}=-i_{x 3} \\tag{3.76}\n\\end{equation*}\n$$\n\nIn other words, when the current splits equally between $r_{s 1}$ and $r_{s 2}$, the current mirror of $Q_{3}$ and $Q_{4}$ causes $i_{x 3}$ and $i_{x 4}$ to cancel each other. Finally, the output resistance, $r_{o u t}$, is:\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=\\frac{v_{x}}{i_{x 1}+i_{x 2}+i_{x 3}+i_{x 4}}=\\frac{v_{x}}{\\left(v_{x} / r_{d s 4}\\right)+\\left(v_{x} / r_{d s 2}\\right)} \\tag{3.77}\n\\end{equation*}\n$$\n\nyielding the simple relationship:\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=r_{\\mathrm{ds} 2} \\| r_{\\mathrm{ds} 4} \\tag{3.78}\n\\end{equation*}\n$$\n\nThus, at low frequencies, the gain, $A_{v}$, is:\n\n$$\n\\begin{equation*}\nA_{v}=g_{m 1}\\left(r_{d s 2} \\| r_{d s 4}\\right) \\tag{3.79}\n\\end{equation*}\n```"
},
{
    "text": "The majority of integrated amplifiers feature a differential input, which is typically implemented using a configuration known as a differential transistor pair. This pair, along with a biasing current source, is illustrated in Fig. 3.17. The transistors $\\mathrm{Q}_{1}$ and $\\mathrm{Q}_{2}$ are of identical size and are biased with the same DC gate voltage. A low-frequency, small-signal model of this differential pair is presented in Fig. 3.18. This model is derived from the T model for a MOS transistor, as detailed in Chapter 1. For simplicity, we temporarily disregard the output impedance of the transistors. The differential input voltage is defined as $\\mathrm{v}_{\\mathrm{in}} \\equiv \\mathrm{v}^{+}-\\mathrm{v}^{-}$, leading to the following:\n\n**Fig. 3.17 A MOS Differential Pair**\n- **Description**: The circuit comprises a MOS differential pair with two NMOS transistors, Q1 and Q2, sharing a common source node P. These transistors are biased by a current source I_bias, with additional current sources P2 and P3 connected to the drains of Q1 and Q2, respectively. The differential input is applied across V+ and V-.\n\n**Fig. 3.17 A MOS Differential Pair**\n\n$$\n\\begin{equation*}\ni_{d 1}=i_{s 1}=\\frac{v_{i n}}{r_{\\mathrm{s} 1}+r_{\\mathrm{s} 2}}=\\frac{v_{\\text {in }}}{1 / g_{\\mathrm{m} 1}+1 / g_{\\mathrm{m} 2}} \\tag{3.66}\n\\end{equation*}\n$$\n\n**Fig. 3.18 The Small-Signal Model of a MOS Differential Pair**\n- **Description**: This circuit represents the small-signal model of a MOS differential pair, featuring two resistors and two current-controlled current sources. The differential input is applied between V+ and V-, with a common node labeled as p.\n\n**Fig. 3.18 The Small-Signal Model of a MOS Differential Pair**\n\nGiven that both $Q_{1}$ and $Q_{2}$ have identical bias currents, $g_{m 1}=g_{m 2}$. Consequently, we derive:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 1}=\\frac{\\mathrm{g}_{\\mathrm{m} 1}}{2} \\mathrm{v}_{\\mathrm{in}} \\tag{3.67}\n\\end{equation*}\n$$\n\nFurthermore, since $i_{\\mathrm{d} 2}=i_{\\mathrm{s} 2}=-\\mathrm{i}_{\\mathrm{d} 1}$, we obtain:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 2}=-\\frac{\\mathrm{g}_{\\mathrm{m} 1}}{2} \\mathrm{v}_{\\mathrm{in}} \\tag{3.68}\n\\end{equation*}\n$$\n\nBy defining the differential output current as $i_{\\text {out }} \\equiv i_{d 1}-i_{d 2}$, the following relationship is established:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\text {out }}=\\mathrm{g}_{\\mathrm{m} 1} \\mathrm{v}_{\\mathrm{in}} \\tag{3.69}\n\\end{equation*}\n$$\n\n**Key Point**: The differential pair with an active load typically serves as the initial stage of a two-stage operational amplifier. It accepts a differential input and generates a single-ended output with a gain similar to that of a common-source stage.\n\nIf two resistive loads $R_{L}$ are connected between the drains of $Q_{1}$ and $Q_{2}$ and a positive supply, the resulting differential output voltage between the drain nodes is $\\mathrm{v}_{\\text {out }}=\\left(g_{m 1} R_{L}\\right) v_{\\text {in }}$, yielding a differential small-signal gain of $g_{m 1} R_{L}$.\n\nWhen a differential pair incorporates a current mirror as an active load, a complete differential-input, single-ended-output gain stage can be achieved, as depicted in Fig. 3.19. This configuration is the standard first gain stage in a classical two-stage integrated opamp, where the input differential pair uses $n$-channel transistors, and the active current-mirror load employs $p$-channel transistors. From the small-signal analysis of the differential pair, we have:\n\n$$\n\\begin{equation*}\ni_{d 1}=i_{s 1}=\\frac{g_{m 1}}{2} v_{i n} \\tag{3.70}\n\\end{equation*}\n$$\n\nAdditionally,忽略晶体管的输出阻抗，我们有：\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 4}=\\mathrm{i}_{\\mathrm{d} 3}=-\\mathrm{i}_{\\mathrm{s} 1} \\tag{3.71}\n\\end{equation*}\n$$\n\n**Fig. 3.19 A Differential-Input, Single-Ended-Output MOS Gain Stage**\n- **Description**: This circuit is a differential-input, single-ended-output MOS gain stage with an active current-mirror load. The input differential pair consists of NMOS transistors (Q1 and Q2), while the active current-mirror load is implemented using PMOS transistors (Q3 and Q4). The bias current source (Ibias) sets the operating point of the differential pair.\n\n**Fig. 3.19 A Differential-Input, Single-Ended-Output MOS Gain Stage**\n\nNote that a positive small-signal current is defined as the current flowing into the drain of a transistor. Using (3.71) and the fact that $i_{\\mathrm{d} 2}=-i_{\\mathrm{s} 1}$, we derive:\n\n$$\n\\begin{equation*}\nv_{\\text {out }}=\\left(-i_{d 2}-i_{d 4}\\right) r_{\\text {out }}=2 i_{s 1} r_{\\text {out }}=g_{m 1} r_{\\text {out }} v_{\\text {in }} \\tag{3.72}\n\\end{equation*}\n$$\n\nThe output resistance, $r_{\\text {out }}$, is evaluated using the small-signal equivalent circuit by applying a voltage to the output node, as shown in Fig. 3.20. Note that the T model is used for both $Q_{1}$ and $Q_{2}$, while $Q_{3}$ is replaced by an equivalent resistance (due to its diode connection), and the hybrid- $\\pi$ model is used for $Q_{4}$. As usual, $r_{\\text {out }}$ is defined as the ratio $v_{x} / i_{x}$, where $i_{x}$ is the sum $i_{\\mathrm{x}}=\\mathrm{i}_{\\mathrm{x} 1}+\\mathrm{i}_{\\mathrm{x} 2}+\\mathrm{i}_{\\mathrm{x} 3}+\\mathrm{i}_{\\mathrm{x} 4}$. Clearly,\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{x} 1}=\\frac{\\mathrm{v}_{\\mathrm{x}}}{\\mathrm{r}_{\\mathrm{ds} 4}} \\tag{3.73}\n\\end{equation*}\n$$\n\n**Fig. 3.20**\n- **Description**: This circuit is a small-signal model for calculating the output impedance of a differential-input, single-ended-output MOS gain stage. It includes resistors, a diode, a voltage-controlled current source, and a voltage source. The circuit is designed to analyze the behavior of currents i_x1, i_x2, i_x3, and i_x4 in relation to the output voltage v_x.\n\n**Fig. 3.20 The Small-Signal Model for the Calculation of the Output Impedance of the Differential-Input, Single-Ended-Output MOS Gain Stage**\n\nThis implies that the resistance seen in the path of $i_{x 1}$ is $r_{d s 4}$. Assuming the effect of $r_{d s 1}$ can be neglected (as it is much larger than $r_{s 1}$), the current $i_{x 2}$ is given by:\n\n$$\n\\begin{equation*}\ni_{x 2} \\cong \\frac{v_{x}}{r_{d s 2}+\\left(r_{s 1} \\| r_{s 2}\\right)} \\cong \\frac{v_{x}}{r_{d s} 2} \\tag{3.74}\n\\end{equation*}\n$$\n\nwhere the second approximation holds because $r_{d s 2}$ is typically much greater than $r_{s 1} \\| r_{s 2}$. This $i_{\\mathrm{x} 2}$ current splits equally between $i_{s 1}$ and $i_{s 2}$ (assuming $r_{s 1}=r_{s 2}$ and ignoring $r_{d s 1}$), resulting in:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{s} 1}=\\mathrm{i}_{\\mathrm{s} 2}=\\frac{-\\mathrm{v}_{\\mathrm{x}}}{2 \\mathrm{r}_{\\mathrm{ds} 2}} \\tag{3.75}\n\\end{equation*}\n$$\n\nHowever, due to the current mirror formed by $Q_{3}$ and $Q_{4}$, we have $i_{x 4}=i_{x 5}$ (assuming $g_{m 4}=1 / r_{s 4}=1 / r_{s 3}$ and $r_{d s 3}$ is much larger than $r_{s 3}$), so the current $i_{x 4}$ is:\n\n$$\n\\begin{equation*}\ni_{x 4}=-i_{s 1}=-i_{s 2}=-i_{x 3} \\tag{3.76}\n\\end{equation*}\n$$\n\nIn other words, when the current splits equally between $r_{s 1}$ and $r_{s 2}$, the current mirror of $Q_{3}$ and $Q_{4}$ causes the currents $i_{x 3}$ and $i_{x 4}$ to cancel each other. Finally, the output resistance, $r_{o u t}$, is given by:\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=\\frac{v_{x}}{i_{x 1}+i_{x 2}+i_{x 3}+i_{x 4}}=\\frac{v_{x}}{\\left(v_{x} / r_{d s 4}\\right)+\\left(v_{x} / r_{d s 2}\\right)} \\tag{3.77}\n\\end{equation*}\n$$\n\nyielding the simple relationship:\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=r_{\\mathrm{ds} 2} \\| r_{\\mathrm{ds} 4} \\tag{3.78}\n\\end{equation*}\n$$\n\nThus, at low frequencies, the gain, $A_{v}$, is:\n\n$$\n\\begin{equation*}\nA_{v}=g_{m 1}\\left(r_{d s 2} \\| r_{d s 4}\\right) \\tag{3.79}\n\\end{equation*}\n$$"
},
{
    "text": "Most integrated amplifiers feature a differential input, typically implemented using a differential transistor pair. This pair, along with a biasing current source, is depicted in Fig. 3.17. The transistors $\\mathrm{Q}_{1}$ and $\\mathrm{Q}_{2}$ are of identical size and biased with the same dc gate voltage. A low-frequency, small-signal model of this differential pair is shown in Fig. 3.18, based on the T model for a MOS transistor described in Chapter 1. For simplicity, we temporarily ignore the output impedance of the transistors. The differential input voltage is defined as $\\mathrm{v}_{\\mathrm{in}} \\equiv \\mathrm{v}^{+}-\\mathrm{v}^{-}$, leading to:\n\nimage_name:Fig. 3.17 A MOS differential pair\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: P, D: LOAD2, G: V+}\nname: Q2, type: NMOS, ports: {S: P, D: LOAD3, G: V-}\nname: I_bias, type: CurrentSource, ports: {Np: P, Nn: LOAD1}\n]\nextrainfo:The circuit consists of a MOS differential pair with two NMOS transistors, Q1 and Q2, sharing a common source node P. These transistors are biased by a current source I_bias, with additional current sources P2 and P3 connected to the drains of Q1 and Q2, respectively. The differential input is applied across V+ and V-.\n\nFig. 3.17 A MOS differential pair.\n\n$$\n\\begin{equation*}\ni_{d 1}=i_{s 1}=\\frac{v_{i n}}{r_{\\mathrm{s} 1}+r_{\\mathrm{s} 2}}=\\frac{v_{\\text {in }}}{1 / g_{\\mathrm{m} 1}+1 / g_{\\mathrm{m} 2}} \\tag{3.66}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.18 The small-signal model of a MOS differential pair.\ndescription:\n[\nname: rs1, type: Resistor, value: rs1, ports: {N1: V+, N2: p}\nname: rs2, type: Resistor, value: rs2, ports: {N1: V-, N2: p}\nname: LOAD2, type: CurrentControlledCurrentSource, ports: {Np: V+, Nn: VDD}\nname: LOAD3, type: CurrentControlledCurrentSource, ports: {Np: V-, Nn: VDD}\n]\nextrainfo:This small-signal model of a MOS differential pair includes two resistors and two current-controlled current sources. The differential input is applied between V+ and V-, with a common node labeled as p.\n\nFig. 3.18 The small-signal model of a MOS differential pair.\n\nSince both $Q_{1}$ and $Q_{2}$ have identical bias currents, $g_{m 1}=g_{m 2}$. Thus, we derive:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 1}=\\frac{\\mathrm{g}_{\\mathrm{m} 1}}{2} \\mathrm{v}_{\\mathrm{in}} \\tag{3.67}\n\\end{equation*}\n$$\n\nAlso, given $i_{\\mathrm{d} 2}=i_{\\mathrm{s} 2}=-\\mathrm{i}_{\\mathrm{d} 1}$, we find:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 2}=-\\frac{\\mathrm{g}_{\\mathrm{m} 1}}{2} \\mathrm{v}_{\\mathrm{in}} \\tag{3.68}\n\\end{equation*}\n$$\n\nDefining the differential output current as $i_{\\text {out }} \\equiv i_{d 1}-i_{d 2}$, we obtain:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\text {out }}=\\mathrm{g}_{\\mathrm{m} 1} \\mathrm{v}_{\\mathrm{in}} \\tag{3.69}\n\\end{equation*}\n$$\n\nKey Point: The differential pair with an active load typically serves as the first stage in a two-stage operational amplifier. It accepts a differential input and produces a single-ended output with gain similar to that of a common-source stage.\n\nIf resistive loads $R_{L}$ are connected between the drains of $Q_{1}$ and $Q_{2}$ and a positive supply, the result is a differential output voltage $\\mathrm{v}_{\\text {out }}=\\left(g_{m 1} R_{L}\\right) v_{\\text {in }}$, and the stage exhibits a differential small-signal gain of $g_{m 1} R_{L}$.\n\nUsing a current mirror as the active load, a complete differential-input, single-ended-output gain stage can be achieved, as illustrated in Fig. 3.19. This configuration is typical for the first gain stage in a classical two-stage integrated opamp, where the input differential pair uses $n$-channel transistors, and the active current-mirror load employs $p$-channel transistors. From the small-signal analysis of the differential pair, we have:\n\n$$\n\\begin{equation*}\ni_{d 1}=i_{s 1}=\\frac{g_{m 1}}{2} v_{i n} \\tag{3.70}\n\\end{equation*}\n$$\n\nIgnoring transistor output impedances, we also have:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 4}=\\mathrm{i}_{\\mathrm{d} 3}=-\\mathrm{i}_{\\mathrm{s} 1} \\tag{3.71}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.19 A differential-input, single-ended-output MOS gain stage.\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: P, D: X, G: Vip}\nname: Q2, type: NMOS, ports: {S: P, D: Vout, G: Vin}\nname: Q3, type: PMOS, ports: {S: VDD, D: X, G: X}\nname: Q4, type: PMOS, ports: {S: VDD, D: Vout, G: X}\nname: Ibias, type: CurrentSource, ports: {Np: VDD, Nn: P}\n]\nextrainfo:This circuit is a differential-input, single-ended-output MOS gain stage with an active current-mirror load. The input differential pair consists of NMOS transistors (Q1 and Q2), while the active current-mirror load is realized using PMOS transistors (Q3 and Q4). The bias current source (Ibias) sets the operating point for the differential pair.\n\nFig. 3.19 A differential-input, single-ended-output MOS gain stage.\n\nNoting that a positive small-signal current is defined as the current entering the drain of a transistor, and using (3.71) along with $i_{\\mathrm{d} 2}=-i_{\\mathrm{s} 1}$, we derive:\n\n$$\n\\begin{equation*}\nv_{\\text {out }}=\\left(-i_{d 2}-i_{d 4}\\right) r_{\\text {out }}=2 i_{s 1} r_{\\text {out }}=g_{m 1} r_{\\text {out }} v_{\\text {in }} \\tag{3.72}\n\\end{equation*}\n$$\n\nTo evaluate the output resistance $r_{\\text {out }}$, a small-signal equivalent circuit is used, applying a voltage to the output node, as shown in Fig. 3.20. The T model is applied to both $Q_{1}$ and $Q_{2}$, while $Q_{3}$ is represented by an equivalent resistance (due to its diode connection), and the hybrid- $\\pi$ model is used for $Q_{4}$. As usual, $r_{\\text {out }}$ is defined as the ratio $v_{x} / i_{x}$, where $i_{x}$ is the sum $i_{\\mathrm{x}}=\\mathrm{i}_{\\mathrm{x} 1}+\\mathrm{i}_{\\mathrm{x} 2}+\\mathrm{i}_{\\mathrm{x} 3}+\\mathrm{i}_{\\mathrm{x} 4}$. Clearly,\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{x} 1}=\\frac{\\mathrm{v}_{\\mathrm{x}}}{\\mathrm{r}_{\\mathrm{ds} 4}} \\tag{3.73}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.20\ndescription:\n[\nname: r_ds3 || r_s3, type: Resistor, value: r_ds3 || r_s3, ports: {N1: GND, N2: Va}\nname: d1, type: Diode, ports: {Na: Va, Nc: GND}\nname: r_ds1, type: Resistor, value: r_ds1, ports: {N1: Va, N2: s1}\nname: r_s1, type: Resistor, value: r_s1, ports: {N1: s1, N2: GND}\nname: r_ds4, type: Resistor, value: r_ds4, ports: {N1: GND, N2: vx}\nname: g_m4 v_a, type: VoltageControlledCurrentSource, ports: {Np: vx, Nn: vx}\nname: r_ds2, type: Resistor, value: r_ds2, ports: {N1: vx, N2: s2}\nname: r_s2, type: Resistor, value: r_s2, ports: {N1: s2, N2: GND}\nname: v_x, type: VoltageSource, value: v_x, ports: {Np: vx, Nn: GND}\n]\nextrainfo:This circuit is a small-signal model for calculating the output impedance of a differential-input, single-ended-output MOS gain stage. It includes resistors, a diode, a voltage-controlled current source, and a voltage source. The circuit is designed to analyze the behavior of currents i_x1, i_x2, i_x3, and i_x4 in relation to the output voltage v_x.\n\nFig. 3.20 The small-signal model for the calculation of the output impedance of the differentialinput, single-ended-output MOS gain stage.\n\nThis implies that the resistance seen in the path of $i_{x 1}$ is $r_{d s 4}$. Assuming the effect of $r_{d s 1}$ can be neglected (as it is much larger than $r_{s 1}$), the current $i_{x 2}$ is given by:\n\n$$\n\\begin{equation*}\ni_{x 2} \\cong \\frac{v_{x}}{r_{d s 2}+\\left(r_{s 1} \\| r_{s 2}\\right)} \\cong \\frac{v_{x}}{r_{d s} 2} \\tag{3.74}\n\\end{equation*}\n$$\n\nwhere the second approximation holds because $r_{d s 2}$ is typically much greater than $r_{s 1} \\| r_{s 2}$. This $i_{\\mathrm{x} 2}$ current splits equally between $i_{s 1}$ and $i_{s 2}$ (assuming $r_{s 1}=r_{s 2}$ and ignoring $r_{d s 1}$), resulting in:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{s} 1}=\\mathrm{i}_{\\mathrm{s} 2}=\\frac{-\\mathrm{v}_{\\mathrm{x}}}{2 \\mathrm{r}_{\\mathrm{ds} 2}} \\tag{3.75}\n\\end{equation*}\n$$\n\nHowever, due to the current mirror formed by $Q_{3}$ and $Q_{4}$, $i_{x 4}=i_{x 5}$ (assuming $g_{m 4}=1 / r_{s 4}=1 / r_{s 3}$ and $r_{d s 3}$ is much larger than $r_{s 3}$), so the current $i_{x 4}$ is:\n\n$$\n\\begin{equation*}\ni_{x 4}=-i_{s 1}=-i_{s 2}=-i_{x 3} \\tag{3.76}\n\\end{equation*}\n$$\n\nIn other words, when the current splits equally between $r_{s 1}$ and $r_{s 2}$, the current mirror of $Q_{3}$ and $Q_{4}$ causes $i_{x 3}$ and $i_{x 4}$ to cancel each other. Finally, the output resistance $r_{\\text {out }}$ is:\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=\\frac{v_{x}}{i_{x 1}+i_{x 2}+i_{x 3}+i_{x 4}}=\\frac{v_{x}}{\\left(v_{x} / r_{d s 4}\\right)+\\left(v_{x} / r_{d s 2}\\right)} \\tag{3.77}\n\\end{equation*}\n$$\n\nyielding the simple relationship:\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=r_{\\mathrm{ds} 2} \\| r_{\\mathrm{ds} 4} \\tag{3.78}\n\\end{equation*}\n$$\n\nThus, at low frequencies, the gain $A_{v}$ is:\n\n$$\n\\begin{equation*}\nA_{v}=g_{m 1}\\left(r_{d s 2} \\| r_{d s 4}\\right) \\tag{3.79}\n\\end{equation*}\n```"
},
{
    "text": "Most integrated amplifiers feature a differential input, typically implemented using a differential transistor pair. Fig. 3.17 illustrates this pair, consisting of transistors $\\mathrm{Q}_{1}$ and $\\mathrm{Q}_{2}$, both NMOS and identically sized, biased with the same dc gate voltage and connected to a biasing current source $\\mathrm{I}_{\\text{bias}}$. A low-frequency, small-signal model of this differential pair is depicted in Fig. 3.18, based on the T model for a MOS transistor as described in Chapter 1. For simplicity, the output impedance of the transistors is temporarily disregarded. The differential input voltage is defined as $\\mathrm{v}_{\\mathrm{in}} \\equiv \\mathrm{v}^{+} - \\mathrm{v}^{-}$, leading to:\n\nimage_name: Fig. 3.17 A MOS differential pair\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: P, D: LOAD2, G: V+}\nname: Q2, type: NMOS, ports: {S: P, D: LOAD3, G: V-}\nname: I_bias, type: CurrentSource, ports: {Np: P, Nn: LOAD1}\n]\nextrainfo: This circuit is a MOS differential pair with two NMOS transistors, Q1 and Q2, sharing a common source node P. These transistors are biased by a current source I_bias, with additional current sources P2 and P3 connected to the drains of Q1 and Q2, respectively. The differential input is applied across V+ and V-.\n\nFig. 3.17 A MOS differential pair.\n\n$$\n\\begin{equation*}\ni_{d1} = i_{s1} = \\frac{v_{in}}{r_{\\mathrm{s}1} + r_{\\mathrm{s}2}} = \\frac{v_{in}}{1/g_{\\mathrm{m}1} + 1/g_{\\mathrm{m}2}} \\tag{3.66}\n\\end{equation*}\n$$\n\nimage_name: Fig. 3.18 The small-signal model of a MOS differential pair.\ndescription:\n[\nname: rs1, type: Resistor, value: rs1, ports: {N1: V+, N2: p}\nname: rs2, type: Resistor, value: rs2, ports: {N1: V-, N2: p}\nname: LOAD2, type: CurrentControlledCurrentSource, ports: {Np: V+, Nn: VDD}\nname: LOAD3, type: CurrentControlledCurrentSource, ports: {Np: V-, Nn: VDD}\n]\nextrainfo: This circuit is a small-signal model of a MOS differential pair, comprising two resistors and two current-controlled current sources. The differential input is applied across V+ and V-, with a common node labeled as p.\n\nFig. 3.18 The small-signal model of a MOS differential pair.\n\nGiven that both $Q_{1}$ and $Q_{2}$ have identical bias currents, $g_{m1} = g_{m2}$. Thus, we derive:\n\n$$\n\\begin{equation*}\ni_{d1} = \\frac{g_{m1}}{2} v_{in} \\tag{3.67}\n\\end{equation*}\n$$\n\nAlso, since $i_{d2} = i_{s2} = -i_{d1}$, we find:\n\n$$\n\\begin{equation*}\ni_{d2} = -\\frac{g_{m1}}{2} v_{in} \\tag{3.68}\n\\end{equation*}\n$$\n\nDefining the differential output current as $i_{\\text{out}} \\equiv i_{d1} - i_{d2}$, we obtain:\n\n$$\n\\begin{equation*}\ni_{\\text{out}} = g_{m1} v_{in} \\tag{3.69}\n\\end{equation*}\n$$\n\nKey Point: The differential pair with an active load typically serves as the initial stage of a two-stage operational amplifier. It accepts a differential input and produces a single-ended output with a gain similar to that of a common-source stage.\n\nIf resistive loads $R_{L}$ are connected between the drains of $Q_{1}$ and $Q_{2}$ and a positive supply, the resulting differential output voltage between the drain nodes is $\\mathrm{v}_{\\text{out}} = (g_{m1} R_{L}) v_{in}$, yielding a differential small-signal gain of $g_{m1} R_{L}$.\n\nUsing a current mirror as an active load, a complete differential-input, single-ended-output gain stage can be achieved, as shown in Fig. 3.19. This configuration is the standard first gain stage in a classic two-stage integrated opamp, utilizing $n$-channel transistors for the input differential pair and $p$-channel transistors for the active current-mirror load. From the small-signal analysis of the differential pair, we have:\n\n$$\n\\begin{equation*}\ni_{d1} = i_{s1} = \\frac{g_{m1}}{2} v_{in} \\tag{3.70}\n\\end{equation*}\n$$\n\nIgnoring transistor output impedances, we also have:\n\n$$\n\\begin{equation*}\ni_{d4} = i_{d3} = -i_{s1} \\tag{3.71}\n\\end{equation*}\n$$\n\nimage_name: Fig. 3.19 A differential-input, single-ended-output MOS gain stage.\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: P, D: X, G: Vip}\nname: Q2, type: NMOS, ports: {S: P, D: Vout, G: Vin}\nname: Q3, type: PMOS, ports: {S: VDD, D: X, G: X}\nname: Q4, type: PMOS, ports: {S: VDD, D: Vout, G: X}\nname: Ibias, type: CurrentSource, ports: {Np: VDD, Nn: P}\n]\nextrainfo: This circuit is a differential-input, single-ended-output MOS gain stage with an active current-mirror load. The input differential pair consists of NMOS transistors (Q1 and Q2), while the active current-mirror load is implemented using PMOS transistors (Q3 and Q4). The bias current source (Ibias) sets the operating point of the differential pair.\n\nFig. 3.19 A differential-input, single-ended-output MOS gain stage.\n\nConsidering a positive small-signal current as the current entering the transistor drain, and using (3.71) along with $i_{d2} = -i_{s1}$, we derive:\n\n$$\n\\begin{equation*}\nv_{\\text{out}} = (-i_{d2} - i_{d4}) r_{\\text{out}} = 2 i_{s1} r_{\\text{out}} = g_{m1} r_{\\text{out}} v_{in} \\tag{3.72}\n\\end{equation*}\n$$\n\nThe output resistance, $r_{\\text{out}}$, is evaluated using the small-signal equivalent circuit with a voltage applied to the output node, as shown in Fig. 3.20. This model employs the T model for $Q_{1}$ and $Q_{2}$, an equivalent resistance for $Q_{3}$ (due to its diode connection), and the hybrid-$\\pi$ model for $Q_{4}$. Typically, $r_{\\text{out}}$ is defined as the ratio $v_{x}/i_{x}$, where $i_{x} = i_{x1} + i_{x2} + i_{x3} + i_{x4}$. Clearly,\n\n$$\n\\begin{equation*}\ni_{x1} = \\frac{v_{x}}{r_{ds4}} \\tag{3.73}\n\\end{equation*}\n$$\n\nimage_name: Fig. 3.20\ndescription:\n[\nname: r_ds3 || r_s3, type: Resistor, value: r_ds3 || r_s3, ports: {N1: GND, N2: Va}\nname: d1, type: Diode, ports: {Na: Va, Nc: GND}\nname: r_ds1, type: Resistor, value: r_ds1, ports: {N1: Va, N2: s1}\nname: r_s1, type: Resistor, value: r_s1, ports: {N1: s1, N2: GND}\nname: r_ds4, type: Resistor, value: r_ds4, ports: {N1: GND, N2: vx}\nname: g_m4 v_a, type: VoltageControlledCurrentSource, ports: {Np: vx, Nn: vx}\nname: r_ds2, type: Resistor, value: r_ds2, ports: {N1: vx, N2: s2}\nname: r_s2, type: Resistor, value: r_s2, ports: {N1: s2, N2: GND}\nname: v_x, type: VoltageSource, value: v_x, ports: {Np: vx, Nn: GND}\n]\nextrainfo: This circuit is a small-signal model for calculating the output impedance of a differential-input, single-ended-output MOS gain stage. It includes resistors, a diode, a voltage-controlled current source, and a voltage source. The circuit is designed to analyze the behavior of currents i_x1, i_x2, i_x3, and i_x4 in relation to the output voltage v_x.\n\nFig. 3.20 The small-signal model for the calculation of the output impedance of the differentialinput, single-ended-output MOS gain stage.\n\nAssuming the effect of $r_{ds1}$ can be neglected (as it is much larger than $r_{s1}$), the current $i_{x2}$ is approximated by:\n\n$$\n\\begin{equation*}\ni_{x2} \\cong \\frac{v_{x}}{r_{ds2} + (r_{s1} \\| r_{s2})} \\cong \\frac{v_{x}}{r_{ds2}} \\tag{3.74}\n\\end{equation*}\n$$\n\nHere, the second approximation holds because $r_{ds2}$ is typically much greater than $r_{s1} \\| r_{s2}$. This $i_{x2}$ current splits equally between $i_{s1}$ and $i_{s2}$ (assuming $r_{s1} = r_{s2}$ and neglecting $r_{ds1}$), resulting in:\n\n$$\n\\begin{equation*}\ni_{s1} = i_{s2} = \\frac{-v_{x}}{2 r_{ds2}} \\tag{3.75}\n\\end{equation*}\n$$\n\nHowever, due to the current mirror formed by $Q_{3}$ and $Q_{4}$, we have $i_{x4} = i_{x5}$ (assuming $g_{m4} = 1/r_{s4} = 1/r_{s3}$ and $r_{ds3}$ is much larger than $r_{s3}$), so:\n\n$$\n\\begin{equation*}\ni_{x4} = -i_{s1} = -i_{s2} = -i_{x3} \\tag{3.76}\n\\end{equation*}\n$$\n\nIn essence, when the current splits equally between $r_{s1}$ and $r_{s2}$, the current mirror of $Q_{3}$ and $Q_{4}$ causes $i_{x3}$ and $i_{x4}$ to cancel each other out. Finally, the output resistance, $r_{\\text{out}}$, is given by:\n\n$$\n\\begin{equation*}\nr_{\\text{out}} = \\frac{v_{x}}{i_{x1} + i_{x2} + i_{x3} + i_{x4}} = \\frac{v_{x}}{(v_{x}/r_{ds4}) + (v_{x}/r_{ds2})} \\tag{3.77}\n\\end{equation*}\n$$\n\nThis simplifies to:\n\n$$\n\\begin{equation*}\nr_{\\text{out}} = r_{ds2} \\| r_{ds4} \\tag{3.78}\n\\end{equation*}\n$$\n\nThus, at low frequencies, the gain $A_{v}$ is:\n\n$$\n\\begin{equation*}\nA_{v} = g_{m1} (r_{ds2} \\| r_{ds4}) \\tag{3.79}\n\\end{equation*}\n```"
},
{
    "text": "Most integrated amplifiers feature a differential input, typically implemented using a differential transistor pair. This pair, along with a biasing current source, is illustrated in Fig. 3.17. The transistors $\\mathrm{Q}_{1}$ and $\\mathrm{Q}_{2}$ are identically sized and biased with the same DC gate voltage. A low-frequency, small-signal model of this differential pair is presented in Fig. 3.18, based on the T model for a MOS transistor described in Chapter 1. For simplicity, we temporarily disregard the transistors' output impedance. The differential input voltage is defined as $\\mathrm{v}_{\\mathrm{in}} \\equiv \\mathrm{v}^{+}-\\mathrm{v}^{-}$, leading to:\n\nimage_name:Fig. 3.17 A MOS differential pair\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: P, D: LOAD2, G: V+}\nname: Q2, type: NMOS, ports: {S: P, D: LOAD3, G: V-}\nname: I_bias, type: CurrentSource, ports: {Np: P, Nn: LOAD1}\n]\nextrainfo:The circuit comprises a MOS differential pair with two NMOS transistors, Q1 and Q2, sharing a common source node P. These transistors are biased by a current source I_bias, with additional current sources P2 and P3 connected to the drains of Q1 and Q2, respectively. The differential input is applied across V+ and V-.\n\nFig. 3.17 A MOS differential pair.\n\n$$\n\\begin{equation*}\ni_{d 1}=i_{s 1}=\\frac{v_{i n}}{r_{\\mathrm{s} 1}+r_{\\mathrm{s} 2}}=\\frac{v_{\\text {in }}}{1 / g_{\\mathrm{m} 1}+1 / g_{\\mathrm{m} 2}} \\tag{3.66}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.18 The small-signal model of a MOS differential pair.\ndescription:\n[\nname: rs1, type: Resistor, value: rs1, ports: {N1: V+, N2: p}\nname: rs2, type: Resistor, value: rs2, ports: {N1: V-, N2: p}\nname: LOAD2, type: CurrentControlledCurrentSource, ports: {Np: V+, Nn: VDD}\nname: LOAD3, type: CurrentControlledCurrentSource, ports: {Np: V-, Nn: VDD}\n]\nextrainfo:This small-signal model of a MOS differential pair includes two resistors and two current-controlled current sources. The differential input is applied between V+ and V-, with a common node labeled p.\n\nFig. 3.18 The small-signal model of a MOS differential pair.\n\nSince both $Q_{1}$ and $Q_{2}$ have identical bias currents, $g_{m 1}=g_{m 2}$. Thus, we derive:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 1}=\\frac{\\mathrm{g}_{\\mathrm{m} 1}}{2} \\mathrm{v}_{\\mathrm{in}} \\tag{3.67}\n\\end{equation*}\n$$\n\nAlso, given $i_{\\mathrm{d} 2}=i_{\\mathrm{s} 2}=-\\mathrm{i}_{\\mathrm{d} 1}$, we find:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 2}=-\\frac{\\mathrm{g}_{\\mathrm{m} 1}}{2} \\mathrm{v}_{\\mathrm{in}} \\tag{3.68}\n\\end{equation*}\n$$\n\nDefining the differential output current as $i_{\\text {out }} \\equiv i_{d 1}-i_{d 2}$, we obtain:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\text {out }}=\\mathrm{g}_{\\mathrm{m} 1} \\mathrm{v}_{\\mathrm{in}} \\tag{3.69}\n\\end{equation*}\n$$\n\nKey Point: The differential pair with an active load typically serves as the initial stage of a two-stage operational amplifier, accepting a differential input and producing a single-ended output with gain comparable to a common-source stage.\n\nIf resistive loads $R_{L}$ are connected between the drains of $Q_{1}$ and $Q_{2}$ and a positive supply, the result is a differential output voltage $\\mathrm{v}_{\\text {out }}=\\left(g_{m 1} R_{L}\\right) v_{\\text {in }}$, with a differential small-signal gain of $g_{m 1} R_{L}$.\n\nUsing a current mirror as an active load, a complete differential-input, single-ended-output gain stage can be formed, as shown in Fig. 3.19. This circuit is the standard first gain stage in a classical two-stage integrated opamp, employing $n$-channel transistors for the input differential pair and $p$-channel transistors for the active current-mirror load. From the small-signal analysis of the differential pair, we have:\n\n$$\n\\begin{equation*}\ni_{d 1}=i_{s 1}=\\frac{g_{m 1}}{2} v_{i n} \\tag{3.70}\n\\end{equation*}\n$$\n\nIgnoring transistor output impedances, we also have:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 4}=\\mathrm{i}_{\\mathrm{d} 3}=-\\mathrm{i}_{\\mathrm{s} 1} \\tag{3.71}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.19 A differential-input, single-ended-output MOS gain stage.\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: P, D: X, G: Vip}\nname: Q2, type: NMOS, ports: {S: P, D: Vout, G: Vin}\nname: Q3, type: PMOS, ports: {S: VDD, D: X, G: X}\nname: Q4, type: PMOS, ports: {S: VDD, D: Vout, G: X}\nname: Ibias, type: CurrentSource, ports: {Np: VDD, Nn: P}\n]\nextrainfo:This circuit is a differential-input, single-ended-output MOS gain stage with an active current-mirror load. The input differential pair uses NMOS transistors (Q1 and Q2), while the active current-mirror load uses PMOS transistors (Q3 and Q4). The bias current source (Ibias) sets the operating point for the differential pair.\n\nFig. 3.19 A differential-input, single-ended-output MOS gain stage.\n\nNoting that a positive small-signal current flows into a transistor's drain, using (3.71) and the fact that $i_{\\mathrm{d} 2}=-i_{\\mathrm{s} 1}$, we derive:\n\n$$\n\\begin{equation*}\nv_{\\text {out }}=\\left(-i_{d 2}-i_{d 4}\\right) r_{\\text {out }}=2 i_{s 1} r_{\\text {out }}=g_{m 1} r_{\\text {out }} v_{\\text {in }} \\tag{3.72}\n\\end{equation*}\n$$\n\nTo evaluate the output resistance $r_{\\text {out }}$, we use the small-signal equivalent circuit, applying a voltage to the output node, as shown in Fig. 3.20. Here, the T model is used for $Q_{1}$ and $Q_{2}$, $Q_{3}$ is replaced by an equivalent resistance (due to its diode connection), and the hybrid- $\\pi$ model is used for $Q_{4}$. As usual, $r_{\\text {out }}$ is defined as $v_{x} / i_{x}$, where $i_{x}=\\mathrm{i}_{\\mathrm{x} 1}+\\mathrm{i}_{\\mathrm{x} 2}+\\mathrm{i}_{\\mathrm{x} 3}+\\mathrm{i}_{\\mathrm{x} 4}$. Clearly,\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{x} 1}=\\frac{\\mathrm{v}_{\\mathrm{x}}}{\\mathrm{r}_{\\mathrm{ds} 4}} \\tag{3.73}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.20\ndescription:\n[\nname: r_ds3 || r_s3, type: Resistor, value: r_ds3 || r_s3, ports: {N1: GND, N2: Va}\nname: d1, type: Diode, ports: {Na: Va, Nc: GND}\nname: r_ds1, type: Resistor, value: r_ds1, ports: {N1: Va, N2: s1}\nname: r_s1, type: Resistor, value: r_s1, ports: {N1: s1, N2: GND}\nname: r_ds4, type: Resistor, value: r_ds4, ports: {N1: GND, N2: vx}\nname: g_m4 v_a, type: VoltageControlledCurrentSource, ports: {Np: vx, Nn: vx}\nname: r_ds2, type: Resistor, value: r_ds2, ports: {N1: vx, N2: s2}\nname: r_s2, type: Resistor, value: r_s2, ports: {N1: s2, N2: GND}\nname: v_x, type: VoltageSource, value: v_x, ports: {Np: vx, Nn: GND}\n]\nextrainfo:This circuit is a small-signal model for calculating the output impedance of a differential-input, single-ended-output MOS gain stage. It includes resistors, a diode, a voltage-controlled current source, and a voltage source. The circuit is designed to analyze the behavior of currents i_x1, i_x2, i_x3, and i_x4 in relation to the output voltage v_x.\n\nFig. 3.20 The small-signal model for the calculation of the output impedance of the differentialinput, single-ended-output MOS gain stage.\n\nThis implies that the resistance seen in the path of $i_{x 1}$ is $r_{d s 4}$. Assuming $r_{d s 1}$ can be neglected (since it is much larger than $r_{s 1}$), the current $i_{x 2}$ is:\n\n$$\n\\begin{equation*}\ni_{x 2} \\cong \\frac{v_{x}}{r_{d s 2}+\\left(r_{s 1} \\| r_{s 2}\\right)} \\cong \\frac{v_{x}}{r_{d s} 2} \\tag{3.74}\n\\end{equation*}\n$$\n\nwhere the second approximation holds because $r_{d s 2}$ is typically much greater than $r_{s 1} \\| r_{s 2}$. This $i_{\\mathrm{x} 2}$ current splits equally between $i_{s 1}$ and $i_{s 2}$ (assuming $r_{s 1}=r_{s 2}$ and neglecting $r_{d s 1}$), resulting in:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{s} 1}=\\mathrm{i}_{\\mathrm{s} 2}=\\frac{-\\mathrm{v}_{\\mathrm{x}}}{2 \\mathrm{r}_{\\mathrm{ds} 2}} \\tag{3.75}\n\\end{equation*}\n$$\n\nHowever, due to the current mirror formed by $Q_{3}$ and $Q_{4}$, $i_{x 4}=i_{x 5}$ (assuming $g_{m 4}=1 / r_{s 4}=1 / r_{s 3}$ and $r_{d s 3}$ is much larger than $r_{s 3}$), so $i_{x 4}$ is:\n\n$$\n\\begin{equation*}\ni_{x 4}=-i_{s 1}=-i_{s 2}=-i_{x 3} \\tag{3.76}\n\\end{equation*}\n$$\n\nIn other words, when the current splits equally between $r_{s 1}$ and $r_{s 2}$, the current mirror of $Q_{3}$ and $Q_{4}$ causes $i_{x 3}$ and $i_{x 4}$ to cancel each other. Finally, the output resistance $r_{\\text {out }}$ is:\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=\\frac{v_{x}}{i_{x 1}+i_{x 2}+i_{x 3}+i_{x 4}}=\\frac{v_{x}}{\\left(v_{x} / r_{d s 4}\\right)+\\left(v_{x} / r_{d s 2}\\right)} \\tag{3.77}\n\\end{equation*}\n$$\n\nyielding the simple relationship:\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=r_{\\mathrm{ds} 2} \\| r_{\\mathrm{ds} 4} \\tag{3.78}\n\\end{equation*}\n$$\n\nThus, at low frequencies, the gain $A_{v}$ is:\n\n$$\n\\begin{equation*}\nA_{v}=g_{m 1}\\left(r_{d s 2} \\| r_{d s 4}\\right) \\tag{3.79}\n\\end{equation*}\n```"
},
{
    "text": "Most integrated amplifiers feature a differential input, typically implemented using a differential transistor pair. This pair, along with a biasing current source, is depicted in Fig. 3.17. The transistors $\\mathrm{Q}_{1}$ and $\\mathrm{Q}_{2}$ are identical in size and biased with the same DC gate voltage. A low-frequency, small-signal model of this differential pair is illustrated in Fig. 3.18. This model is based on the T model for a MOS transistor, as discussed in Chapter 1. For simplicity, we temporarily disregard the output impedance of the transistors. The differential input voltage is defined as $\\mathrm{v}_{\\mathrm{in}} \\equiv \\mathrm{v}^{+}-\\mathrm{v}^{-}$, leading to:\n\nimage_name:Fig. 3.17 A MOS differential pair\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: P, D: LOAD2, G: V+}\nname: Q2, type: NMOS, ports: {S: P, D: LOAD3, G: V-}\nname: I_bias, type: CurrentSource, ports: {Np: P, Nn: LOAD1}\n]\nextrainfo:The circuit consists of a MOS differential pair with two NMOS transistors, Q1 and Q2, sharing a common source node P. These transistors are biased by a current source I_bias, with additional current sources P2 and P3 connected to the drains of Q1 and Q2, respectively. The differential input is applied across V+ and V-.\n\nFig. 3.17 A MOS differential pair.\n\n$$\n\\begin{equation*}\ni_{d 1}=i_{s 1}=\\frac{v_{i n}}{r_{\\mathrm{s} 1}+r_{\\mathrm{s} 2}}=\\frac{v_{\\text {in }}}{1 / g_{\\mathrm{m} 1}+1 / g_{\\mathrm{m} 2}} \\tag{3.66}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.18 The small-signal model of a MOS differential pair.\ndescription:\n[\nname: rs1, type: Resistor, value: rs1, ports: {N1: V+, N2: p}\nname: rs2, type: Resistor, value: rs2, ports: {N1: V-, N2: p}\nname: LOAD2, type: CurrentControlledCurrentSource, ports: {Np: V+, Nn: VDD}\nname: LOAD3, type: CurrentControlledCurrentSource, ports: {Np: V-, Nn: VDD}\n]\nextrainfo:This small-signal model of a MOS differential pair includes two resistors and two current-controlled current sources. The differential input is applied between V+ and V-, with a common node labeled as p.\n\nFig. 3.18 The small-signal model of a MOS differential pair.\n\nGiven that both $Q_{1}$ and $Q_{2}$ have identical bias currents, $g_{m 1}=g_{m 2}$. Thus, we derive:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 1}=\\frac{\\mathrm{g}_{\\mathrm{m} 1}}{2} \\mathrm{v}_{\\mathrm{in}} \\tag{3.67}\n\\end{equation*}\n$$\n\nAlso, since $i_{\\mathrm{d} 2}=i_{\\mathrm{s} 2}=-\\mathrm{i}_{\\mathrm{d} 1}$, we find:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 2}=-\\frac{\\mathrm{g}_{\\mathrm{m} 1}}{2} \\mathrm{v}_{\\mathrm{in}} \\tag{3.68}\n\\end{equation*}\n$$\n\nDefining the differential output current as $i_{\\text {out }} \\equiv i_{d 1}-i_{d 2}$, we obtain:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\text {out }}=\\mathrm{g}_{\\mathrm{m} 1} \\mathrm{v}_{\\mathrm{in}} \\tag{3.69}\n\\end{equation*}\n$$\n\nKey Point: The differential pair with an active load typically serves as the first stage in a two-stage operational amplifier. It accepts a differential input and produces a single-ended output with a gain similar to that of a common-source stage.\n\nIf two resistive loads $R_{L}$ are connected between the drains of $Q_{1}$ and $Q_{2}$ and a positive supply, the result is a differential output voltage between the two drain nodes, $\\mathrm{v}_{\\text {out }}=\\left(g_{m 1} R_{L}\\right) v_{\\text {in }}$, and the stage exhibits a differential small-signal gain of $g_{m 1} R_{L}$.\n\nUsing a current mirror as an active load in a differential pair creates a complete differential-input, single-ended-output gain stage, as shown in Fig. 3.19. This configuration is the standard first gain stage in a classic two-stage integrated op-amp, where the input differential pair uses $n$-channel transistors, and the active current-mirror load employs $p$-channel transistors. From the small-signal analysis of the differential pair, we have:\n\n$$\n\\begin{equation*}\ni_{d 1}=i_{s 1}=\\frac{g_{m 1}}{2} v_{i n} \\tag{3.70}\n\\end{equation*}\n$$\n\nIgnoring transistor output impedances, we also have:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 4}=\\mathrm{i}_{\\mathrm{d} 3}=-\\mathrm{i}_{\\mathrm{s} 1} \\tag{3.71}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.19 A differential-input, single-ended-output MOS gain stage.\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: P, D: X, G: Vip}\nname: Q2, type: NMOS, ports: {S: P, D: Vout, G: Vin}\nname: Q3, type: PMOS, ports: {S: VDD, D: X, G: X}\nname: Q4, type: PMOS, ports: {S: VDD, D: Vout, G: X}\nname: Ibias, type: CurrentSource, ports: {Np: VDD, Nn: P}\n]\nextrainfo:This circuit is a differential-input, single-ended-output MOS gain stage with an active current-mirror load. The input differential pair consists of NMOS transistors (Q1 and Q2), while the active current-mirror load is implemented using PMOS transistors (Q3 and Q4). The bias current source (Ibias) sets the operating point for the differential pair.\n\nFig. 3.19 A differential-input, single-ended-output MOS gain stage.\n\nNote that a positive small-signal current is defined as the current flowing into a transistor's drain. Using (3.71) and the fact that $i_{\\mathrm{d} 2}=-i_{\\mathrm{s} 1}$, we derive:\n\n$$\n\\begin{equation*}\nv_{\\text {out }}=\\left(-i_{d 2}-i_{d 4}\\right) r_{\\text {out }}=2 i_{s 1} r_{\\text {out }}=g_{m 1} r_{\\text {out }} v_{\\text {in }} \\tag{3.72}\n\\end{equation*}\n$$\n\nTo evaluate the output resistance, $r_{\\text {out }}$, we use the small-signal equivalent circuit and apply a voltage to the output node, as shown in Fig. 3.20. Note that the T model is used for both $Q_{1}$ and $Q_{2}$, while $Q_{3}$ is replaced by an equivalent resistance (due to its diode connection), and the hybrid- $\\pi$ model is used for $Q_{4}$. As usual, $r_{\\text {out }}$ is defined as the ratio $v_{x} / i_{x}$, where $i_{x}$ is the sum $i_{\\mathrm{x}}=\\mathrm{i}_{\\mathrm{x} 1}+\\mathrm{i}_{\\mathrm{x} 2}+\\mathrm{i}_{\\mathrm{x} 3}+\\mathrm{i}_{\\mathrm{x} 4}$. Clearly,\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{x} 1}=\\frac{\\mathrm{v}_{\\mathrm{x}}}{\\mathrm{r}_{\\mathrm{ds} 4}} \\tag{3.73}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.20\ndescription:\n[\nname: r_ds3 || r_s3, type: Resistor, value: r_ds3 || r_s3, ports: {N1: GND, N2: Va}\nname: d1, type: Diode, ports: {Na: Va, Nc: GND}\nname: r_ds1, type: Resistor, value: r_ds1, ports: {N1: Va, N2: s1}\nname: r_s1, type: Resistor, value: r_s1, ports: {N1: s1, N2: GND}\nname: r_ds4, type: Resistor, value: r_ds4, ports: {N1: GND, N2: vx}\nname: g_m4 v_a, type: VoltageControlledCurrentSource, ports: {Np: vx, Nn: vx}\nname: r_ds2, type: Resistor, value: r_ds2, ports: {N1: vx, N2: s2}\nname: r_s2, type: Resistor, value: r_s2, ports: {N1: s2, N2: GND}\nname: v_x, type: VoltageSource, value: v_x, ports: {Np: vx, Nn: GND}\n]\nextrainfo:This circuit is a small-signal model for calculating the output impedance of a differential-input, single-ended-output MOS gain stage. It includes resistors, a diode, a voltage-controlled current source, and a voltage source. The circuit is designed to analyze the behavior of currents i_x1, i_x2, i_x3, and i_x4 in relation to the output voltage v_x.\n\nFig. 3.20 The small-signal model for the calculation of the output impedance of the differentialinput, single-ended-output MOS gain stage.\n\nThis implies that the resistance seen in the path of $i_{x 1}$ is $r_{d s 4}$. Assuming the effect of $r_{d s 1}$ can be neglected (as it is much larger than $r_{s 1}$), the current $i_{x 2}$ is given by:\n\n$$\n\\begin{equation*}\ni_{x 2} \\cong \\frac{v_{x}}{r_{d s 2}+\\left(r_{s 1} \\| r_{s 2}\\right)} \\cong \\frac{v_{x}}{r_{d s} 2} \\tag{3.74}\n\\end{equation*}\n$$\n\nwhere the second approximation holds because $r_{d s 2}$ is typically much greater than $r_{s 1} \\| r_{s 2}$. This $i_{\\mathrm{x} 2}$ current splits equally between $i_{s 1}$ and $i_{s 2}$ (assuming $r_{s 1}=r_{s 2}$ and neglecting $r_{d s 1}$), resulting in:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{s} 1}=\\mathrm{i}_{\\mathrm{s} 2}=\\frac{-\\mathrm{v}_{\\mathrm{x}}}{2 \\mathrm{r}_{\\mathrm{ds} 2}} \\tag{3.75}\n\\end{equation*}\n$$\n\nHowever, due to the current mirror formed by $Q_{3}$ and $Q_{4}$, we have $i_{x 4}=i_{x 5}$ (assuming $g_{m 4}=1 / r_{s 4}=1 / r_{s 3}$ and $r_{d s 3}$ is much larger than $r_{s 3}$), so the current $i_{x 4}$ is:\n\n$$\n\\begin{equation*}\ni_{x 4}=-i_{s 1}=-i_{s 2}=-i_{x 3} \\tag{3.76}\n\\end{equation*}\n$$\n\nIn other words, when the current splits equally between $r_{s 1}$ and $r_{s 2}$, the current mirror of $Q_{3}$ and $Q_{4}$ causes the currents $i_{x 3}$ and $i_{x 4}$ to cancel each other. Finally, the output resistance, $r_{o u t}$, is given by:\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=\\frac{v_{x}}{i_{x 1}+i_{x 2}+i_{x 3}+i_{x 4}}=\\frac{v_{x}}{\\left(v_{x} / r_{d s 4}\\right)+\\left(v_{x} / r_{d s 2}\\right)} \\tag{3.77}\n\\end{equation*}\n$$\n\nleading to the simple relationship:\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=r_{\\mathrm{ds} 2} \\| r_{\\mathrm{ds} 4} \\tag{3.78}\n\\end{equation*}\n$$\n\nThus, at low frequencies, the gain, $A_{v}$, is:\n\n$$\n\\begin{equation*}\nA_{v}=g_{m 1}\\left(r_{d s 2} \\| r_{d s 4}\\right) \\tag{3.79}\n\\end{equation*}\n```"
},
{
    "text": "Most integrated amplifiers feature a differential input, typically implemented using a differential transistor pair. This pair, along with a biasing current source, is depicted in Fig. 3.17. The transistors $\\mathrm{Q}_{1}$ and $\\mathrm{Q}_{2}$ are identical in size and biased with the same dc gate voltage. A low-frequency, small-signal model of this differential pair is shown in Fig. 3.18, based on the T model for a MOS transistor described in Chapter 1. For simplicity, we temporarily ignore the transistors' output impedance. The differential input voltage is defined as $\\mathrm{v}_{\\mathrm{in}} \\equiv \\mathrm{v}^{+}-\\mathrm{v}^{-}$, leading to:\n\nimage_name:Fig. 3.17 A MOS differential pair\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: P, D: LOAD2, G: V+}\nname: Q2, type: NMOS, ports: {S: P, D: LOAD3, G: V-}\nname: I_bias, type: CurrentSource, ports: {Np: P, Nn: LOAD1}\n]\nextrainfo:The circuit comprises a MOS differential pair with two NMOS transistors, Q1 and Q2, sharing a common source node P. These transistors are biased by a current source I_bias, with additional current sources P2 and P3 connected to the drains of Q1 and Q2, respectively. The differential input is applied between V+ and V-.\n\nFig. 3.17 A MOS differential pair.\n\n$$\n\\begin{equation*}\ni_{d 1}=i_{s 1}=\\frac{v_{i n}}{r_{\\mathrm{s} 1}+r_{\\mathrm{s} 2}}=\\frac{v_{\\text {in }}}{1 / g_{\\mathrm{m} 1}+1 / g_{\\mathrm{m} 2}} \\tag{3.66}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.18 The small-signal model of a MOS differential pair.\ndescription:\n[\nname: rs1, type: Resistor, value: rs1, ports: {N1: V+, N2: p}\nname: rs2, type: Resistor, value: rs2, ports: {N1: V-, N2: p}\nname: LOAD2, type: CurrentControlledCurrentSource, ports: {Np: V+, Nn: VDD}\nname: LOAD3, type: CurrentControlledCurrentSource, ports: {Np: V-, Nn: VDD}\n]\nextrainfo:This small-signal model of a MOS differential pair includes two resistors and two current-controlled current sources. The differential input is applied between V+ and V-, with a common node labeled as p.\n\nFig. 3.18 The small-signal model of a MOS differential pair.\n\nSince both $Q_{1}$ and $Q_{2}$ have identical bias currents, $g_{m 1}=g_{m 2}$. Thus, we derive:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 1}=\\frac{\\mathrm{g}_{\\mathrm{m} 1}}{2} \\mathrm{v}_{\\mathrm{in}} \\tag{3.67}\n\\end{equation*}\n$$\n\nAlso, given $i_{\\mathrm{d} 2}=i_{\\mathrm{s} 2}=-\\mathrm{i}_{\\mathrm{d} 1}$, we find:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 2}=-\\frac{\\mathrm{g}_{\\mathrm{m} 1}}{2} \\mathrm{v}_{\\mathrm{in}} \\tag{3.68}\n\\end{equation*}\n$$\n\nDefining the differential output current as $i_{\\text {out }} \\equiv i_{d 1}-i_{d 2}$, we obtain:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\text {out }}=\\mathrm{g}_{\\mathrm{m} 1} \\mathrm{v}_{\\mathrm{in}} \\tag{3.69}\n\\end{equation*}\n$$\n\nKey Point: The differential pair with an active load typically serves as the initial stage in a two-stage operational amplifier. It accepts a differential input and produces a single-ended output with gain comparable to a common-source stage.\n\nIf resistive loads $R_{L}$ are connected between the drains of $Q_{1}$ and $Q_{2}$ and a positive supply, the result is a differential output voltage $\\mathrm{v}_{\\text {out }}=\\left(g_{m 1} R_{L}\\right) v_{\\text {in }}$, yielding a differential small-signal gain of $g_{m 1} R_{L}$.\n\nUsing a current mirror as an active load, a complete differential-input, single-ended-output gain stage can be achieved, as illustrated in Fig. 3.19. This configuration is the standard first gain stage in a classic two-stage integrated opamp, employing $n$-channel transistors for the input differential pair and $p$-channel transistors for the active current-mirror load. From the small-signal analysis of the differential pair, we have:\n\n$$\n\\begin{equation*}\ni_{d 1}=i_{s 1}=\\frac{g_{m 1}}{2} v_{i n} \\tag{3.70}\n\\end{equation*}\n$$\n\nIgnoring transistor output impedances, we also have:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 4}=\\mathrm{i}_{\\mathrm{d} 3}=-\\mathrm{i}_{\\mathrm{s} 1} \\tag{3.71}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.19 A differential-input, single-ended-output MOS gain stage.\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: P, D: X, G: Vip}\nname: Q2, type: NMOS, ports: {S: P, D: Vout, G: Vin}\nname: Q3, type: PMOS, ports: {S: VDD, D: X, G: X}\nname: Q4, type: PMOS, ports: {S: VDD, D: Vout, G: X}\nname: Ibias, type: CurrentSource, ports: {Np: VDD, Nn: P}\n]\nextrainfo:This circuit is a differential-input, single-ended-output MOS gain stage with an active current-mirror load. The input differential pair consists of NMOS transistors (Q1 and Q2), while the active current-mirror load uses PMOS transistors (Q3 and Q4). The bias current source (Ibias) sets the operating point for the differential pair.\n\nFig. 3.19 A differential-input, single-ended-output MOS gain stage.\n\nNote that a positive small-signal current is defined as the current flowing into a transistor's drain. Using (3.71) and the fact that $i_{\\mathrm{d} 2}=-i_{\\mathrm{s} 1}$, we derive:\n\n$$\n\\begin{equation*}\nv_{\\text {out }}=\\left(-i_{d 2}-i_{d 4}\\right) r_{\\text {out }}=2 i_{s 1} r_{\\text {out }}=g_{m 1} r_{\\text {out }} v_{\\text {in }} \\tag{3.72}\n\\end{equation*}\n$$\n\nThe output resistance, $r_{\\text {out }}$, is evaluated using the small-signal equivalent circuit by applying a voltage to the output node, as shown in Fig. 3.20. Note that the T model is used for both $Q_{1}$ and $Q_{2}$, while $Q_{3}$ is replaced by an equivalent resistance (due to its diode connection), and the hybrid- $\\pi$ model is used for $Q_{4}$. As usual, $r_{\\text {out }}$ is defined as the ratio $v_{x} / i_{x}$, where $i_{x}$ is the sum $i_{\\mathrm{x}}=\\mathrm{i}_{\\mathrm{x} 1}+\\mathrm{i}_{\\mathrm{x} 2}+\\mathrm{i}_{\\mathrm{x} 3}+\\mathrm{i}_{\\mathrm{x} 4}$. Clearly,\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{x} 1}=\\frac{\\mathrm{v}_{\\mathrm{x}}}{\\mathrm{r}_{\\mathrm{ds} 4}} \\tag{3.73}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.20\ndescription:\n[\nname: r_ds3 || r_s3, type: Resistor, value: r_ds3 || r_s3, ports: {N1: GND, N2: Va}\nname: d1, type: Diode, ports: {Na: Va, Nc: GND}\nname: r_ds1, type: Resistor, value: r_ds1, ports: {N1: Va, N2: s1}\nname: r_s1, type: Resistor, value: r_s1, ports: {N1: s1, N2: GND}\nname: r_ds4, type: Resistor, value: r_ds4, ports: {N1: GND, N2: vx}\nname: g_m4 v_a, type: VoltageControlledCurrentSource, ports: {Np: vx, Nn: vx}\nname: r_ds2, type: Resistor, value: r_ds2, ports: {N1: vx, N2: s2}\nname: r_s2, type: Resistor, value: r_s2, ports: {N1: s2, N2: GND}\nname: v_x, type: VoltageSource, value: v_x, ports: {Np: vx, Nn: GND}\n]\nextrainfo:This circuit is a small-signal model for calculating the output impedance of a differential-input, single-ended-output MOS gain stage. It includes resistors, a diode, a voltage-controlled current source, and a voltage source. The circuit is designed to analyze the behavior of currents i_x1, i_x2, i_x3, and i_x4 in relation to the output voltage v_x.\n\nFig. 3.20 The small-signal model for the calculation of the output impedance of the differentialinput, single-ended-output MOS gain stage.\n\nThis implies that the resistance seen in the path taken by $i_{x 1}$ equals $r_{d s 4}$. Assuming the effect of $r_{d s 1}$ can be neglected (as it is much larger than $r_{s 1}$), the current $i_{x 2}$ is given by:\n\n$$\n\\begin{equation*}\ni_{x 2} \\cong \\frac{v_{x}}{r_{d s 2}+\\left(r_{s 1} \\| r_{s 2}\\right)} \\cong \\frac{v_{x}}{r_{d s} 2} \\tag{3.74}\n\\end{equation*}\n$$\n\nwhere the second approximation holds since $r_{d s 2}$ is typically much greater than $r_{s 1} \\| r_{s 2}$. This $i_{\\mathrm{x} 2}$ current splits equally between $i_{s 1}$ and $i_{s 2}$ (assuming $r_{s 1}=r_{s 2}$ and neglecting $r_{d s 1}$ again), resulting in:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{s} 1}=\\mathrm{i}_{\\mathrm{s} 2}=\\frac{-\\mathrm{v}_{\\mathrm{x}}}{2 \\mathrm{r}_{\\mathrm{ds} 2}} \\tag{3.75}\n\\end{equation*}\n$$\n\nHowever, due to the current mirror formed by $Q_{3}$ and $Q_{4}$, $i_{x 4}=i_{x 5}$ (assuming $g_{m 4}=1 / r_{s 4}=1 / r_{s 3}$ and $r_{d s 3}$ is much larger than $r_{s 3}$), so the current $i_{x 4}$ is:\n\n$$\n\\begin{equation*}\ni_{x 4}=-i_{s 1}=-i_{s 2}=-i_{x 3} \\tag{3.76}\n\\end{equation*}\n$$\n\nIn other words, when the current splits equally between $r_{s 1}$ and $r_{s 2}$, the current mirror of $Q_{3}$ and $Q_{4}$ causes the currents $i_{x 3}$ and $i_{x 4}$ to cancel each other. Finally, the output resistance, $r_{o u t}$, is:\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=\\frac{v_{x}}{i_{x 1}+i_{x 2}+i_{x 3}+i_{x 4}}=\\frac{v_{x}}{\\left(v_{x} / r_{d s 4}\\right)+\\left(v_{x} / r_{d s 2}\\right)} \\tag{3.77}\n\\end{equation*}\n$$\n\nyielding the simple relationship:\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=r_{\\mathrm{ds} 2} \\| r_{\\mathrm{ds} 4} \\tag{3.78}\n\\end{equation*}\n$$\n\nThus, at low frequencies, the gain, $A_{v}$, is given by:\n\n$$\n\\begin{equation*}\nA_{v}=g_{m 1}\\left(r_{d s 2} \\| r_{d s 4}\\right) \\tag{3.79}\n\\end{equation*}\n```"
},
{
    "text": "Most integrated amplifiers feature a differential input, typically implemented using a differential transistor pair. This pair, along with a biasing current source, is depicted in Fig. 3.17. The transistors $\\mathrm{Q}_{1}$ and $\\mathrm{Q}_{2}$ are identically sized and biased with the same DC gate voltage. A low-frequency, small-signal model of this differential pair is presented in Fig. 3.18, based on the T model for a MOS transistor described in Chapter 1. For simplicity, we temporarily disregard the transistors' output impedance. The differential input voltage is defined as $\\mathrm{v}_{\\mathrm{in}} \\equiv \\mathrm{v}^{+}-\\mathrm{v}^{-}$, leading to:\n\nimage_name: Fig. 3.17 A MOS differential pair\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: P, D: LOAD2, G: V+}\nname: Q2, type: NMOS, ports: {S: P, D: LOAD3, G: V-}\nname: I_bias, type: CurrentSource, ports: {Np: P, Nn: LOAD1}\n]\nextrainfo: This circuit comprises a MOS differential pair with two NMOS transistors, Q1 and Q2, sharing a common source node P. These transistors are biased by a current source I_bias, with additional current sources P2 and P3 connected to the drains of Q1 and Q2, respectively. The differential input is applied across V+ and V-.\n\nFig. 3.17 A MOS differential pair.\n\n$$\n\\begin{equation*}\ni_{d 1}=i_{s 1}=\\frac{v_{i n}}{r_{\\mathrm{s} 1}+r_{\\mathrm{s} 2}}=\\frac{v_{\\text {in }}}{1 / g_{\\mathrm{m} 1}+1 / g_{\\mathrm{m} 2}} \\tag{3.66}\n\\end{equation*}\n$$\n\nimage_name: Fig. 3.18 The small-signal model of a MOS differential pair.\ndescription:\n[\nname: rs1, type: Resistor, value: rs1, ports: {N1: V+, N2: p}\nname: rs2, type: Resistor, value: rs2, ports: {N1: V-, N2: p}\nname: LOAD2, type: CurrentControlledCurrentSource, ports: {Np: V+, Nn: VDD}\nname: LOAD3, type: CurrentControlledCurrentSource, ports: {Np: V-, Nn: VDD}\n]\nextrainfo: This small-signal model of a MOS differential pair includes two resistors and two current-controlled current sources. The differential input is applied between V+ and V-, with a common node labeled as p.\n\nFig. 3.18 The small-signal model of a MOS differential pair.\n\nGiven that both $Q_{1}$ and $Q_{2}$ have identical bias currents, $g_{m 1}=g_{m 2}$. Thus, we derive:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 1}=\\frac{\\mathrm{g}_{\\mathrm{m} 1}}{2} \\mathrm{v}_{\\mathrm{in}} \\tag{3.67}\n\\end{equation*}\n$$\n\nAlso, since $i_{\\mathrm{d} 2}=i_{\\mathrm{s} 2}=-\\mathrm{i}_{\\mathrm{d} 1}$, we find:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 2}=-\\frac{\\mathrm{g}_{\\mathrm{m} 1}}{2} \\mathrm{v}_{\\mathrm{in}} \\tag{3.68}\n\\end{equation*}\n$$\n\nDefining the differential output current as $i_{\\text {out }} \\equiv i_{d 1}-i_{d 2}$, we obtain:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\text {out }}=\\mathrm{g}_{\\mathrm{m} 1} \\mathrm{v}_{\\mathrm{in}} \\tag{3.69}\n\\end{equation*}\n$$\n\nKey Point: The differential pair with an active load typically serves as the initial stage of a two-stage operational amplifier. It accepts a differential input and generates a single-ended output with a gain similar to that of a common-source stage.\n\nWhen two resistive loads $R_{L}$ are connected between the drains of $Q_{1}$ and $Q_{2}$ and a positive supply, a differential output voltage $\\mathrm{v}_{\\text {out }}=\\left(g_{m 1} R_{L}\\right) v_{\\text {in }}$ is produced, yielding a differential small-signal gain of $g_{m 1} R_{L}$.\n\nUsing a current mirror as the active load in a differential pair creates a complete differential-input, single-ended-output gain stage, as illustrated in Fig. 3.19. This configuration is typical for the first gain stage of a classic two-stage integrated op-amp, employing $n$-channel transistors for the input differential pair and $p$-channel transistors for the active current-mirror load. From the small-signal analysis of the differential pair, we have:\n\n$$\n\\begin{equation*}\ni_{d 1}=i_{s 1}=\\frac{g_{m 1}}{2} v_{i n} \\tag{3.70}\n\\end{equation*}\n$$\n\nIgnoring transistor output impedances, we also have:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 4}=\\mathrm{i}_{\\mathrm{d} 3}=-\\mathrm{i}_{\\mathrm{s} 1} \\tag{3.71}\n\\end{equation*}\n$$\n\nimage_name: Fig. 3.19 A differential-input, single-ended-output MOS gain stage.\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: P, D: X, G: Vip}\nname: Q2, type: NMOS, ports: {S: P, D: Vout, G: Vin}\nname: Q3, type: PMOS, ports: {S: VDD, D: X, G: X}\nname: Q4, type: PMOS, ports: {S: VDD, D: Vout, G: X}\nname: Ibias, type: CurrentSource, ports: {Np: VDD, Nn: P}\n]\nextrainfo: This circuit is a differential-input, single-ended-output MOS gain stage with an active current-mirror load. The input differential pair uses NMOS transistors (Q1 and Q2), while the active current-mirror load uses PMOS transistors (Q3 and Q4). The bias current source (Ibias) establishes the operating point of the differential pair.\n\nFig. 3.19 A differential-input, single-ended-output MOS gain stage.\n\nNoting that a positive small-signal current flows into a transistor's drain, and using (3.71) along with $i_{\\mathrm{d} 2}=-i_{\\mathrm{s} 1}$, we derive:\n\n$$\n\\begin{equation*}\nv_{\\text {out }}=\\left(-i_{d 2}-i_{d 4}\\right) r_{\\text {out }}=2 i_{s 1} r_{\\text {out }}=g_{m 1} r_{\\text {out }} v_{\\text {in }} \\tag{3.72}\n\\end{equation*}\n$$\n\nThe output resistance, $r_{\\text {out }}$, is evaluated using the small-signal equivalent circuit by applying a voltage to the output node, as shown in Fig. 3.20. This model employs the T model for both $Q_{1}$ and $Q_{2}$, an equivalent resistance for $Q_{3}$ (due to its diode connection), and the hybrid- $\\pi$ model for $Q_{4}$. Typically, $r_{\\text {out }}$ is defined as the ratio $v_{x} / i_{x}$, where $i_{x}=\\mathrm{i}_{\\mathrm{x} 1}+\\mathrm{i}_{\\mathrm{x} 2}+\\mathrm{i}_{\\mathrm{x} 3}+\\mathrm{i}_{\\mathrm{x} 4}$. Clearly,\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{x} 1}=\\frac{\\mathrm{v}_{\\mathrm{x}}}{\\mathrm{r}_{\\mathrm{ds} 4}} \\tag{3.73}\n\\end{equation*}\n$$\n\nimage_name: Fig. 3.20\ndescription:\n[\nname: r_ds3 || r_s3, type: Resistor, value: r_ds3 || r_s3, ports: {N1: GND, N2: Va}\nname: d1, type: Diode, ports: {Na: Va, Nc: GND}\nname: r_ds1, type: Resistor, value: r_ds1, ports: {N1: Va, N2: s1}\nname: r_s1, type: Resistor, value: r_s1, ports: {N1: s1, N2: GND}\nname: r_ds4, type: Resistor, value: r_ds4, ports: {N1: GND, N2: vx}\nname: g_m4 v_a, type: VoltageControlledCurrentSource, ports: {Np: vx, Nn: vx}\nname: r_ds2, type: Resistor, value: r_ds2, ports: {N1: vx, N2: s2}\nname: r_s2, type: Resistor, value: r_s2, ports: {N1: s2, N2: GND}\nname: v_x, type: VoltageSource, value: v_x, ports: {Np: vx, Nn: GND}\n]\nextrainfo: This circuit is a small-signal model for determining the output impedance of a differential-input, single-ended-output MOS gain stage. It includes resistors, a diode, a voltage-controlled current source, and a voltage source. The circuit is designed to analyze the behavior of currents i_x1, i_x2, i_x3, and i_x4 in relation to the output voltage v_x.\n\nFig. 3.20 The small-signal model for the calculation of the output impedance of the differentialinput, single-ended-output MOS gain stage.\n\nThis indicates that the resistance in the path of $i_{x 1}$ equals $r_{d s 4}$. Assuming $r_{d s 1}$ can be neglected (as it is much larger than $r_{s 1}$), the current $i_{x 2}$ is:\n\n$$\n\\begin{equation*}\ni_{x 2} \\cong \\frac{v_{x}}{r_{d s 2}+\\left(r_{s 1} \\| r_{s 2}\\right)} \\cong \\frac{v_{x}}{r_{d s} 2} \\tag{3.74}\n\\end{equation*}\n$$\n\nwhere the approximation holds because $r_{d s 2}$ is typically much greater than $r_{s 1} \\| r_{s 2}$. This $i_{\\mathrm{x} 2}$ current splits equally between $i_{s 1}$ and $i_{s 2}$ (assuming $r_{s 1}=r_{s 2}$ and neglecting $r_{d s 1}$), resulting in:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{s} 1}=\\mathrm{i}_{\\mathrm{s} 2}=\\frac{-\\mathrm{v}_{\\mathrm{x}}}{2 \\mathrm{r}_{\\mathrm{ds} 2}} \\tag{3.75}\n\\end{equation*}\n$$\n\nHowever, due to the current mirror formed by $Q_{3}$ and $Q_{4}$, $i_{x 4}=i_{x 5}$ (assuming $g_{m 4}=1 / r_{s 4}=1 / r_{s 3}$ and $r_{d s 3}$ is much larger than $r_{s 3}$), so:\n\n$$\n\\begin{equation*}\ni_{x 4}=-i_{s 1}=-i_{s 2}=-i_{x 3} \\tag{3.76}\n\\end{equation*}\n$$\n\nIn essence, when the current splits equally between $r_{s 1}$ and $r_{s 2}$, the current mirror of $Q_{3}$ and $Q_{4}$ causes $i_{x 3}$ and $i_{x 4}$ to cancel each other. Finally, the output resistance, $r_{o u t}$, is:\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=\\frac{v_{x}}{i_{x 1}+i_{x 2}+i_{x 3}+i_{x 4}}=\\frac{v_{x}}{\\left(v_{x} / r_{d s 4}\\right)+\\left(v_{x} / r_{d s 2}\\right)} \\tag{3.77}\n\\end{equation*}\n$$\n\nyielding the simplified relationship:\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=r_{\\mathrm{ds} 2} \\| r_{\\mathrm{ds} 4} \\tag{3.78}\n\\end{equation*}\n$$\n\nThus, at low frequencies, the gain, $A_{v}$, is:\n\n$$\n\\begin{equation*}\nA_{v}=g_{m 1}\\left(r_{d s 2} \\| r_{d s 4}\\right) \\tag{3.79}\n\\end{equation*}\n```"
},
{
    "text": "Most integrated amplifiers feature a differential input, typically implemented using a differential transistor pair. This pair, along with a biasing current source, is depicted in Fig. 3.17. The transistors $\\mathrm{Q}_{1}$ and $\\mathrm{Q}_{2}$ are identical in size and biased with the same dc gate voltage. A low-frequency, small-signal model of this differential pair is shown in Fig. 3.18, based on the T model for a MOS transistor described in Chapter 1. For simplicity, we temporarily ignore the output impedance of the transistors. The differential input voltage is defined as $\\mathrm{v}_{\\mathrm{in}} \\equiv \\mathrm{v}^{+}-\\mathrm{v}^{-}$, leading to:\n\nimage_name:Fig. 3.17 A MOS differential pair\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: P, D: LOAD2, G: V+}\nname: Q2, type: NMOS, ports: {S: P, D: LOAD3, G: V-}\nname: I_bias, type: CurrentSource, ports: {Np: P, Nn: LOAD1}\n]\nextrainfo:The circuit is a MOS differential pair with two NMOS transistors Q1 and Q2, sharing a common source node P. The transistors are biased with a current source I_bias, and two current sources P2 and P3 are connected to the drains of Q1 and Q2, respectively. The differential input is applied between V+ and V-.\n\nFig. 3.17 A MOS differential pair.\n\n$$\n\\begin{equation*}\ni_{d 1}=i_{s 1}=\\frac{v_{i n}}{r_{\\mathrm{s} 1}+r_{\\mathrm{s} 2}}=\\frac{v_{\\text {in }}}{1 / g_{\\mathrm{m} 1}+1 / g_{\\mathrm{m} 2}} \\tag{3.66}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.18 The small-signal model of a MOS differential pair.\ndescription:\n[\nname: rs1, type: Resistor, value: rs1, ports: {N1: V+, N2: p}\nname: rs2, type: Resistor, value: rs2, ports: {N1: V-, N2: p}\nname: LOAD2, type: CurrentControlledCurrentSource, ports: {Np: V+, Nn: VDD}\nname: LOAD3, type: CurrentControlledCurrentSource, ports: {Np: V-, Nn: VDD}\n]\nextrainfo:This circuit is a small-signal model of a MOS differential pair with two resistors and two current-controlled current sources. The differential input is applied between V+ and V-, and the common node is labeled as p.\n\nFig. 3.18 The small-signal model of a MOS differential pair.\n\nSince both $Q_{1}$ and $Q_{2}$ have identical bias currents, $g_{m 1}=g_{m 2}$. Consequently,\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 1}=\\frac{\\mathrm{g}_{\\mathrm{m} 1}}{2} \\mathrm{v}_{\\mathrm{in}} \\tag{3.67}\n\\end{equation*}\n$$\n\nAlso, given $i_{\\mathrm{d} 2}=i_{\\mathrm{s} 2}=-\\mathrm{i}_{\\mathrm{d} 1}$, we find\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 2}=-\\frac{\\mathrm{g}_{\\mathrm{m} 1}}{2} \\mathrm{v}_{\\mathrm{in}} \\tag{3.68}\n\\end{equation*}\n$$\n\nDefining the differential output current as $i_{\\text {out }} \\equiv i_{d 1}-i_{d 2}$, we obtain:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\text {out }}=\\mathrm{g}_{\\mathrm{m} 1} \\mathrm{v}_{\\mathrm{in}} \\tag{3.69}\n\\end{equation*}\n$$\n\nKey Point: The differential pair with an active load typically serves as the first stage of a two-stage operational amplifier. It accepts a differential input and produces a single-ended output with a gain similar to that of a common-source stage.\n\nIf two resistive loads $R_{L}$ are connected between the drains of $Q_{1}$ and $Q_{2}$ and a positive supply, the resulting differential output voltage between the two drain nodes is $\\mathrm{v}_{\\text {out }}=\\left(g_{m 1} R_{L}\\right) v_{\\text {in }}$, and the stage exhibits a differential small-signal gain of $g_{m 1} R_{L}$.\n\nWhen a differential pair includes a current mirror as an active load, a complete differential-input, single-ended-output gain stage can be achieved, as illustrated in Fig. 3.19. This configuration is the standard first gain stage in a classical two-stage integrated opamp, where the input differential pair uses $n$-channel transistors, and the active current-mirror load employs $p$-channel transistors. From the small-signal analysis of the differential pair, we have:\n\n$$\n\\begin{equation*}\ni_{d 1}=i_{s 1}=\\frac{g_{m 1}}{2} v_{i n} \\tag{3.70}\n\\end{equation*}\n$$\n\nIgnoring transistor output impedances, we also have:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 4}=\\mathrm{i}_{\\mathrm{d} 3}=-\\mathrm{i}_{\\mathrm{s} 1} \\tag{3.71}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.19 A differential-input, single-ended-output MOS gain stage.\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: P, D: X, G: Vip}\nname: Q2, type: NMOS, ports: {S: P, D: Vout, G: Vin}\nname: Q3, type: PMOS, ports: {S: VDD, D: X, G: X}\nname: Q4, type: PMOS, ports: {S: VDD, D: Vout, G: X}\nname: Ibias, type: CurrentSource, ports: {Np: VDD, Nn: P}\n]\nextrainfo:The circuit is a differential-input, single-ended-output MOS gain stage with an active current-mirror load. The input differential pair is realized using NMOS transistors (Q1 and Q2), and the active current-mirror load is realized using PMOS transistors (Q3 and Q4). The bias current source (Ibias) sets the operating point of the differential pair.\n\nFig. 3.19 A differential-input, single-ended-output MOS gain stage.\n\nNote that a positive small-signal current is defined as the current flowing into the drain of a transistor. Using (3.71) and the fact that $i_{\\mathrm{d} 2}=-i_{\\mathrm{s} 1}$, we derive:\n\n$$\n\\begin{equation*}\nv_{\\text {out }}=\\left(-i_{d 2}-i_{d 4}\\right) r_{\\text {out }}=2 i_{s 1} r_{\\text {out }}=g_{m 1} r_{\\text {out }} v_{\\text {in }} \\tag{3.72}\n\\end{equation*}\n$$\n\nThe output resistance, $r_{\\text {out }}$, is evaluated using the small-signal equivalent circuit by applying a voltage to the output node, as shown in Fig. 3.20. Note that the T model is used for both $Q_{1}$ and $Q_{2}$, while $Q_{3}$ is replaced by an equivalent resistance (due to its diode connection), and the hybrid- $\\pi$ model is used for $Q_{4}$. As usual, $r_{\\text {out }}$ is defined as the ratio $v_{x} / i_{x}$, where $i_{x}$ is the sum $i_{\\mathrm{x}}=\\mathrm{i}_{\\mathrm{x} 1}+\\mathrm{i}_{\\mathrm{x} 2}+\\mathrm{i}_{\\mathrm{x} 3}+\\mathrm{i}_{\\mathrm{x} 4}$. Clearly,\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{x} 1}=\\frac{\\mathrm{v}_{\\mathrm{x}}}{\\mathrm{r}_{\\mathrm{ds} 4}} \\tag{3.73}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.20\ndescription:\n[\nname: r_ds3 || r_s3, type: Resistor, value: r_ds3 || r_s3, ports: {N1: GND, N2: Va}\nname: d1, type: Diode, ports: {Na: Va, Nc: GND}\nname: r_ds1, type: Resistor, value: r_ds1, ports: {N1: Va, N2: s1}\nname: r_s1, type: Resistor, value: r_s1, ports: {N1: s1, N2: GND}\nname: r_ds4, type: Resistor, value: r_ds4, ports: {N1: GND, N2: vx}\nname: g_m4 v_a, type: VoltageControlledCurrentSource, ports: {Np: vx, Nn: vx}\nname: r_ds2, type: Resistor, value: r_ds2, ports: {N1: vx, N2: s2}\nname: r_s2, type: Resistor, value: r_s2, ports: {N1: s2, N2: GND}\nname: v_x, type: VoltageSource, value: v_x, ports: {Np: vx, Nn: GND}\n]\nextrainfo:This circuit is a small-signal model for calculating the output impedance of a differential-input, single-ended-output MOS gain stage. It includes resistors, a diode, a voltage-controlled current source, and a voltage source. The circuit is designed to analyze the behavior of currents i_x1, i_x2, i_x3, and i_x4 in relation to the output voltage v_x.\n\nFig. 3.20 The small-signal model for the calculation of the output impedance of the differentialinput, single-ended-output MOS gain stage.\n\nThis implies that the resistance seen in the path taken by $i_{x 1}$ is $r_{d s 4}$. Assuming the effect of $r_{d s 1}$ can be neglected (since it is much larger than $r_{s 1}$), the current $i_{x 2}$ is given by:\n\n$$\n\\begin{equation*}\ni_{x 2} \\cong \\frac{v_{x}}{r_{d s 2}+\\left(r_{s 1} \\| r_{s 2}\\right)} \\cong \\frac{v_{x}}{r_{d s} 2} \\tag{3.74}\n\\end{equation*}\n$$\n\nwhere the second approximation holds because $r_{d s 2}$ is typically much greater than $r_{s 1} \\| r_{s 2}$. This $i_{\\mathrm{x} 2}$ current splits equally between $i_{s 1}$ and $i_{s 2}$ (assuming $r_{s 1}=r_{s 2}$ and ignoring $r_{d s 1}$), resulting in:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{s} 1}=\\mathrm{i}_{\\mathrm{s} 2}=\\frac{-\\mathrm{v}_{\\mathrm{x}}}{2 \\mathrm{r}_{\\mathrm{ds} 2}} \\tag{3.75}\n\\end{equation*}\n$$\n\nHowever, due to the current mirror formed by $Q_{3}$ and $Q_{4}$, we have $i_{x 4}=i_{x 5}$ (assuming $g_{m 4}=1 / r_{s 4}=1 / r_{s 3}$ and $r_{d s 3}$ is much larger than $r_{s 3}$), so the current $i_{x 4}$ is:\n\n$$\n\\begin{equation*}\ni_{x 4}=-i_{s 1}=-i_{s 2}=-i_{x 3} \\tag{3.76}\n\\end{equation*}\n$$\n\nIn other words, when the current splits equally between $r_{s 1}$ and $r_{s 2}$, the current mirror of $Q_{3}$ and $Q_{4}$ causes the currents $i_{x 3}$ and $i_{x 4}$ to cancel each other. Finally, the output resistance, $r_{o u t}$, is given by:\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=\\frac{v_{x}}{i_{x 1}+i_{x 2}+i_{x 3}+i_{x 4}}=\\frac{v_{x}}{\\left(v_{x} / r_{d s 4}\\right)+\\left(v_{x} / r_{d s 2}\\right)} \\tag{3.77}\n\\end{equation*}\n$$\n\nwhich simplifies to:\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=r_{\\mathrm{ds} 2} \\| r_{\\mathrm{ds} 4} \\tag{3.78}\n\\end{equation*}\n$$\n\nThus, at low frequencies, the gain, $A_{v}$, is:\n\n$$\n\\begin{equation*}\nA_{v}=g_{m 1}\\left(r_{d s 2} \\| r_{d s 4}\\right) \\tag{3.79}\n\\end{equation*}\n```"
},
{
    "text": "Most integrated amplifiers feature a differential input, typically implemented using a differential transistor pair. This pair, along with a biasing current source, is depicted in Fig. 3.17. The transistors $\\mathrm{Q}_{1}$ and $\\mathrm{Q}_{2}$ are identical in size and biased with the same dc gate voltage. A low-frequency, small-signal model of this differential pair is illustrated in Fig. 3.18, based on the T model for a MOS transistor described in Chapter 1. For simplicity, we temporarily disregard the output impedance of the transistors. The differential input voltage is defined as $\\mathrm{v}_{\\mathrm{in}} \\equiv \\mathrm{v}^{+}-\\mathrm{v}^{-}$, leading to:\n\nimage_name:Fig. 3.17 A MOS differential pair\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: P, D: LOAD2, G: V+}\nname: Q2, type: NMOS, ports: {S: P, D: LOAD3, G: V-}\nname: I_bias, type: CurrentSource, ports: {Np: P, Nn: LOAD1}\n]\nextrainfo:The circuit consists of a MOS differential pair with two NMOS transistors, Q1 and Q2, sharing a common source node P. These transistors are biased by a current source I_bias, with additional current sources P2 and P3 connected to the drains of Q1 and Q2, respectively. The differential input is applied between V+ and V-.\n\nFig. 3.17 A MOS differential pair.\n\n$$\n\\begin{equation*}\ni_{d 1}=i_{s 1}=\\frac{v_{i n}}{r_{\\mathrm{s} 1}+r_{\\mathrm{s} 2}}=\\frac{v_{\\text {in }}}{1 / g_{\\mathrm{m} 1}+1 / g_{\\mathrm{m} 2}} \\tag{3.66}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.18 The small-signal model of a MOS differential pair.\ndescription:\n[\nname: rs1, type: Resistor, value: rs1, ports: {N1: V+, N2: p}\nname: rs2, type: Resistor, value: rs2, ports: {N1: V-, N2: p}\nname: LOAD2, type: CurrentControlledCurrentSource, ports: {Np: V+, Nn: VDD}\nname: LOAD3, type: CurrentControlledCurrentSource, ports: {Np: V-, Nn: VDD}\n]\nextrainfo:This circuit is a small-signal model of a MOS differential pair, featuring two resistors and two current-controlled current sources. The differential input is applied between V+ and V-, with the common node labeled as p.\n\nFig. 3.18 The small-signal model of a MOS differential pair.\n\nGiven that both $Q_{1}$ and $Q_{2}$ have identical bias currents, $g_{m 1}=g_{m 2}$. Thus, we derive:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 1}=\\frac{\\mathrm{g}_{\\mathrm{m} 1}}{2} \\mathrm{v}_{\\mathrm{in}} \\tag{3.67}\n\\end{equation*}\n$$\n\nAdditionally, since $i_{\\mathrm{d} 2}=i_{\\mathrm{s} 2}=-\\mathrm{i}_{\\mathrm{d} 1}$, we find:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 2}=-\\frac{\\mathrm{g}_{\\mathrm{m} 1}}{2} \\mathrm{v}_{\\mathrm{in}} \\tag{3.68}\n\\end{equation*}\n$$\n\nDefining the differential output current as $i_{\\text {out }} \\equiv i_{d 1}-i_{d 2}$, we obtain:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\text {out }}=\\mathrm{g}_{\\mathrm{m} 1} \\mathrm{v}_{\\mathrm{in}} \\tag{3.69}\n\\end{equation*}\n$$\n\nKey Point: The differential pair with an active load typically serves as the initial stage of a two-stage operational amplifier. It accepts a differential input and generates a single-ended output with a gain similar to that of a common-source stage.\n\nIf two resistive loads $R_{L}$ are connected between the drains of $Q_{1}$ and $Q_{2}$ and a positive supply, the resulting differential output voltage between the drain nodes is $\\mathrm{v}_{\\text {out }}=\\left(g_{m 1} R_{L}\\right) v_{\\text {in }}$, and the stage exhibits a differential small-signal gain of $g_{m 1} R_{L}$.\n\nUsing a current mirror as an active load, a complete differential-input, single-ended-output gain stage can be achieved, as shown in Fig. 3.19. This configuration is the standard first gain stage in a classical two-stage integrated opamp, where the input differential pair consists of $n$-channel transistors, and the active current-mirror load uses $p$-channel transistors. From the small-signal analysis of the differential pair, we have:\n\n$$\n\\begin{equation*}\ni_{d 1}=i_{s 1}=\\frac{g_{m 1}}{2} v_{i n} \\tag{3.70}\n\\end{equation*}\n$$\n\nIgnoring transistor output impedances, we also have:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 4}=\\mathrm{i}_{\\mathrm{d} 3}=-\\mathrm{i}_{\\mathrm{s} 1} \\tag{3.71}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.19 A differential-input, single-ended-output MOS gain stage.\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: P, D: X, G: Vip}\nname: Q2, type: NMOS, ports: {S: P, D: Vout, G: Vin}\nname: Q3, type: PMOS, ports: {S: VDD, D: X, G: X}\nname: Q4, type: PMOS, ports: {S: VDD, D: Vout, G: X}\nname: Ibias, type: CurrentSource, ports: {Np: VDD, Nn: P}\n]\nextrainfo:This circuit is a differential-input, single-ended-output MOS gain stage with an active current-mirror load. The input differential pair uses NMOS transistors (Q1 and Q2), while the active current-mirror load employs PMOS transistors (Q3 and Q4). The bias current source (Ibias) sets the operating point of the differential pair.\n\nFig. 3.19 A differential-input, single-ended-output MOS gain stage.\n\nNoting that a positive small-signal current flows into the transistor drain, using (3.71) and the fact that $i_{\\mathrm{d} 2}=-i_{\\mathrm{s} 1}$, we derive:\n\n$$\n\\begin{equation*}\nv_{\\text {out }}=\\left(-i_{d 2}-i_{d 4}\\right) r_{\\text {out }}=2 i_{s 1} r_{\\text {out }}=g_{m 1} r_{\\text {out }} v_{\\text {in }} \\tag{3.72}\n\\end{equation*}\n$$\n\nTo evaluate the output resistance, $r_{\\text {out }}$, we use the small-signal equivalent circuit and apply a voltage to the output node, as shown in Fig. 3.20. Note that the T model is used for both $Q_{1}$ and $Q_{2}$, while $Q_{3}$ is replaced by an equivalent resistance (due to its diode connection), and the hybrid- $\\pi$ model is used for $Q_{4}$. As usual, $r_{\\text {out }}$ is defined as the ratio $v_{x} / i_{x}$, where $i_{x}$ is the sum $i_{\\mathrm{x}}=\\mathrm{i}_{\\mathrm{x} 1}+\\mathrm{i}_{\\mathrm{x} 2}+\\mathrm{i}_{\\mathrm{x} 3}+\\mathrm{i}_{\\mathrm{x} 4}$. Clearly,\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{x} 1}=\\frac{\\mathrm{v}_{\\mathrm{x}}}{\\mathrm{r}_{\\mathrm{ds} 4}} \\tag{3.73}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.20\ndescription:\n[\nname: r_ds3 || r_s3, type: Resistor, value: r_ds3 || r_s3, ports: {N1: GND, N2: Va}\nname: d1, type: Diode, ports: {Na: Va, Nc: GND}\nname: r_ds1, type: Resistor, value: r_ds1, ports: {N1: Va, N2: s1}\nname: r_s1, type: Resistor, value: r_s1, ports: {N1: s1, N2: GND}\nname: r_ds4, type: Resistor, value: r_ds4, ports: {N1: GND, N2: vx}\nname: g_m4 v_a, type: VoltageControlledCurrentSource, ports: {Np: vx, Nn: vx}\nname: r_ds2, type: Resistor, value: r_ds2, ports: {N1: vx, N2: s2}\nname: r_s2, type: Resistor, value: r_s2, ports: {N1: s2, N2: GND}\nname: v_x, type: VoltageSource, value: v_x, ports: {Np: vx, Nn: GND}\n]\nextrainfo:This circuit is a small-signal model for calculating the output impedance of a differential-input, single-ended-output MOS gain stage. It includes resistors, a diode, a voltage-controlled current source, and a voltage source. The circuit is designed to analyze the behavior of currents i_x1, i_x2, i_x3, and i_x4 in relation to the output voltage v_x.\n\nFig. 3.20 The small-signal model for the calculation of the output impedance of the differentialinput, single-ended-output MOS gain stage.\n\nThis implies that the resistance seen in the path taken by $i_{x 1}$ equals $r_{d s 4}$. Assuming the effect of $r_{d s 1}$ can be neglected (since it is much larger than $r_{s 1}$), the current $i_{x 2}$ is given by:\n\n$$\n\\begin{equation*}\ni_{x 2} \\cong \\frac{v_{x}}{r_{d s 2}+\\left(r_{s 1} \\| r_{s 2}\\right)} \\cong \\frac{v_{x}}{r_{d s} 2} \\tag{3.74}\n\\end{equation*}\n$$\n\nwhere the second approximation holds because $r_{d s 2}$ is typically much greater than $r_{s 1} \\| r_{s 2}$. This $i_{\\mathrm{x} 2}$ current splits equally between $i_{s 1}$ and $i_{s 2}$ (assuming $r_{s 1}=r_{s 2}$ and ignoring $r_{d s 1}$), resulting in:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{s} 1}=\\mathrm{i}_{\\mathrm{s} 2}=\\frac{-\\mathrm{v}_{\\mathrm{x}}}{2 \\mathrm{r}_{\\mathrm{ds} 2}} \\tag{3.75}\n\\end{equation*}\n$$\n\nHowever, due to the current mirror formed by $Q_{3}$ and $Q_{4}$, we have $i_{x 4}=i_{x 5}$ (assuming $g_{m 4}=1 / r_{s 4}=1 / r_{s 3}$ and $r_{d s 3}$ is much larger than $r_{s 3}$), so the current $i_{x 4}$ is:\n\n$$\n\\begin{equation*}\ni_{x 4}=-i_{s 1}=-i_{s 2}=-i_{x 3} \\tag{3.76}\n\\end{equation*}\n$$\n\nIn other words, when the current splits equally between $r_{s 1}$ and $r_{s 2}$, the current mirror of $Q_{3}$ and $Q_{4}$ causes $i_{x 3}$ and $i_{x 4}$ to cancel each other. Finally, the output resistance, $r_{o u t}$, is:\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=\\frac{v_{x}}{i_{x 1}+i_{x 2}+i_{x 3}+i_{x 4}}=\\frac{v_{x}}{\\left(v_{x} / r_{d s 4}\\right)+\\left(v_{x} / r_{d s 2}\\right)} \\tag{3.77}\n\\end{equation*}\n$$\n\nyielding the simple relationship:\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=r_{\\mathrm{ds} 2} \\| r_{\\mathrm{ds} 4} \\tag{3.78}\n\\end{equation*}\n$$\n\nThus, at low frequencies, the gain, $A_{v}$, is given by:\n\n$$\n\\begin{equation*}\nA_{v}=g_{m 1}\\left(r_{d s 2} \\| r_{d s 4}\\right) \\tag{3.79}\n\\end{equation*}\n```"
},
{
    "text": "Most integrated amplifiers feature a differential input, typically implemented using a differential transistor pair. This pair, along with a biasing current source, is illustrated in Fig. 3.17. The transistors $\\mathrm{Q}_{1}$ and $\\mathrm{Q}_{2}$ are identical in size and biased with the same dc gate voltage. A low-frequency, small-signal model of this differential pair is depicted in Fig. 3.18, based on the T model for a MOS transistor described in Chapter 1. For simplicity, we temporarily disregard the transistors' output impedance. The differential input voltage is defined as $\\mathrm{v}_{\\mathrm{in}} \\equiv \\mathrm{v}^{+}-\\mathrm{v}^{-}$, leading to:\n\nimage_name:Fig. 3.17 A MOS differential pair\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: P, D: LOAD2, G: V+}\nname: Q2, type: NMOS, ports: {S: P, D: LOAD3, G: V-}\nname: I_bias, type: CurrentSource, ports: {Np: P, Nn: LOAD1}\n]\nextrainfo:The circuit comprises a MOS differential pair with two NMOS transistors, Q1 and Q2, sharing a common source node P. These transistors are biased by a current source I_bias, with additional current sources P2 and P3 connected to the drains of Q1 and Q2, respectively. The differential input is applied across V+ and V-.\n\nFig. 3.17 A MOS differential pair.\n\n$$\n\\begin{equation*}\ni_{d 1}=i_{s 1}=\\frac{v_{i n}}{r_{\\mathrm{s} 1}+r_{\\mathrm{s} 2}}=\\frac{v_{\\text {in }}}{1 / g_{\\mathrm{m} 1}+1 / g_{\\mathrm{m} 2}} \\tag{3.66}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.18 The small-signal model of a MOS differential pair.\ndescription:\n[\nname: rs1, type: Resistor, value: rs1, ports: {N1: V+, N2: p}\nname: rs2, type: Resistor, value: rs2, ports: {N1: V-, N2: p}\nname: LOAD2, type: CurrentControlledCurrentSource, ports: {Np: V+, Nn: VDD}\nname: LOAD3, type: CurrentControlledCurrentSource, ports: {Np: V-, Nn: VDD}\n]\nextrainfo:This small-signal model of a MOS differential pair includes two resistors and two current-controlled current sources. The differential input is applied between V+ and V-, with a common node labeled as p.\n\nFig. 3.18 The small-signal model of a MOS differential pair.\n\nGiven that both $Q_{1}$ and $Q_{2}$ have identical bias currents, $g_{m 1}=g_{m 2}$. Thus, we derive:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 1}=\\frac{\\mathrm{g}_{\\mathrm{m} 1}}{2} \\mathrm{v}_{\\mathrm{in}} \\tag{3.67}\n\\end{equation*}\n$$\n\nAlso, since $i_{\\mathrm{d} 2}=i_{\\mathrm{s} 2}=-\\mathrm{i}_{\\mathrm{d} 1}$, we find:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 2}=-\\frac{\\mathrm{g}_{\\mathrm{m} 1}}{2} \\mathrm{v}_{\\mathrm{in}} \\tag{3.68}\n\\end{equation*}\n$$\n\nDefining the differential output current as $i_{\\text {out }} \\equiv i_{d 1}-i_{d 2}$, we obtain:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\text {out }}=\\mathrm{g}_{\\mathrm{m} 1} \\mathrm{v}_{\\mathrm{in}} \\tag{3.69}\n\\end{equation*}\n$$\n\nKey Point: The differential pair with an active load typically serves as the initial stage in a two-stage operational amplifier. It accepts a differential input and produces a single-ended output with a gain similar to that of a common-source stage.\n\nIf two resistive loads $R_{L}$ are connected between the drains of $Q_{1}$ and $Q_{2}$ and a positive supply, the result is a differential output voltage between the drain nodes, $\\mathrm{v}_{\\text {out }}=\\left(g_{m 1} R_{L}\\right) v_{\\text {in }}$, and the stage exhibits a differential small-signal gain of $g_{m 1} R_{L}$.\n\nUsing a current mirror as an active load in a differential pair creates a complete differential-input, single-ended-output gain stage, as shown in Fig. 3.19. This configuration is the standard first gain stage in a classical two-stage integrated opamp, where the input differential pair consists of $n$-channel transistors, and the active current-mirror load uses $p$-channel transistors. From the small-signal analysis of the differential pair, we have:\n\n$$\n\\begin{equation*}\ni_{d 1}=i_{s 1}=\\frac{g_{m 1}}{2} v_{i n} \\tag{3.70}\n\\end{equation*}\n$$\n\nIgnoring transistor output impedances, we also have:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{d} 4}=\\mathrm{i}_{\\mathrm{d} 3}=-\\mathrm{i}_{\\mathrm{s} 1} \\tag{3.71}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.19 A differential-input, single-ended-output MOS gain stage.\ndescription:\n[\nname: Q1, type: NMOS, ports: {S: P, D: X, G: Vip}\nname: Q2, type: NMOS, ports: {S: P, D: Vout, G: Vin}\nname: Q3, type: PMOS, ports: {S: VDD, D: X, G: X}\nname: Q4, type: PMOS, ports: {S: VDD, D: Vout, G: X}\nname: Ibias, type: CurrentSource, ports: {Np: VDD, Nn: P}\n]\nextrainfo:This circuit represents a differential-input, single-ended-output MOS gain stage with an active current-mirror load. The input differential pair uses NMOS transistors (Q1 and Q2), while the active current-mirror load employs PMOS transistors (Q3 and Q4). The bias current source (Ibias) sets the operating point for the differential pair.\n\nFig. 3.19 A differential-input, single-ended-output MOS gain stage.\n\nA positive small-signal current is defined as the current entering a transistor's drain. Using (3.71) and the fact that $i_{\\mathrm{d} 2}=-i_{\\mathrm{s} 1}$, we derive:\n\n$$\n\\begin{equation*}\nv_{\\text {out }}=\\left(-i_{d 2}-i_{d 4}\\right) r_{\\text {out }}=2 i_{s 1} r_{\\text {out }}=g_{m 1} r_{\\text {out }} v_{\\text {in }} \\tag{3.72}\n\\end{equation*}\n$$\n\nThe output resistance, $r_{\\text {out }}$, is evaluated using the small-signal equivalent circuit by applying a voltage to the output node, as shown in Fig. 3.20. Note that the T model is used for both $Q_{1}$ and $Q_{2}$, while $Q_{3}$ is represented by an equivalent resistance (due to its diode connection), and the hybrid- $\\pi$ model is used for $Q_{4}$. As usual, $r_{\\text {out }}$ is defined as the ratio $v_{x} / i_{x}$, where $i_{x}$ is the sum $i_{\\mathrm{x}}=\\mathrm{i}_{\\mathrm{x} 1}+\\mathrm{i}_{\\mathrm{x} 2}+\\mathrm{i}_{\\mathrm{x} 3}+\\mathrm{i}_{\\mathrm{x} 4}$. Clearly,\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{x} 1}=\\frac{\\mathrm{v}_{\\mathrm{x}}}{\\mathrm{r}_{\\mathrm{ds} 4}} \\tag{3.73}\n\\end{equation*}\n$$\n\nimage_name:Fig. 3.20\ndescription:\n[\nname: r_ds3 || r_s3, type: Resistor, value: r_ds3 || r_s3, ports: {N1: GND, N2: Va}\nname: d1, type: Diode, ports: {Na: Va, Nc: GND}\nname: r_ds1, type: Resistor, value: r_ds1, ports: {N1: Va, N2: s1}\nname: r_s1, type: Resistor, value: r_s1, ports: {N1: s1, N2: GND}\nname: r_ds4, type: Resistor, value: r_ds4, ports: {N1: GND, N2: vx}\nname: g_m4 v_a, type: VoltageControlledCurrentSource, ports: {Np: vx, Nn: vx}\nname: r_ds2, type: Resistor, value: r_ds2, ports: {N1: vx, N2: s2}\nname: r_s2, type: Resistor, value: r_s2, ports: {N1: s2, N2: GND}\nname: v_x, type: VoltageSource, value: v_x, ports: {Np: vx, Nn: GND}\n]\nextrainfo:This circuit is a small-signal model for calculating the output impedance of a differential-input, single-ended-output MOS gain stage. It includes resistors, a diode, a voltage-controlled current source, and a voltage source. The circuit is designed to analyze the behavior of currents i_x1, i_x2, i_x3, and i_x4 in relation to the output voltage v_x.\n\nFig. 3.20 The small-signal model for the calculation of the output impedance of the differentialinput, single-ended-output MOS gain stage.\nindicating that the resistance seen in the path of $i_{x 1}$ equals $r_{d s 4}$. Assuming the effect of $r_{d s 1}$ can be neglected (as it is much larger than $r_{s 1}$), the current $i_{x 2}$ is given by:\n\n$$\n\\begin{equation*}\ni_{x 2} \\cong \\frac{v_{x}}{r_{d s 2}+\\left(r_{s 1} \\| r_{s 2}\\right)} \\cong \\frac{v_{x}}{r_{d s} 2} \\tag{3.74}\n\\end{equation*}\n$$\n\nwhere the second approximation holds because $r_{d s 2}$ is typically much greater than $r_{s 1} \\| r_{s 2}$. This $i_{\\mathrm{x} 2}$ current splits equally between $i_{s 1}$ and $i_{s 2}$ (assuming $r_{s 1}=r_{s 2}$ and neglecting $r_{d s 1}$), resulting in:\n\n$$\n\\begin{equation*}\n\\mathrm{i}_{\\mathrm{s} 1}=\\mathrm{i}_{\\mathrm{s} 2}=\\frac{-\\mathrm{v}_{\\mathrm{x}}}{2 \\mathrm{r}_{\\mathrm{ds} 2}} \\tag{3.75}\n\\end{equation*}\n$$\n\nHowever, due to the current mirror formed by $Q_{3}$ and $Q_{4}$, we have $i_{x 4}=i_{x 5}$ (assuming $g_{m 4}=1 / r_{s 4}=1 / r_{s 3}$ and $r_{d s 3}$ is much larger than $r_{s 3}$), so the current $i_{x 4}$ is:\n\n$$\n\\begin{equation*}\ni_{x 4}=-i_{s 1}=-i_{s 2}=-i_{x 3} \\tag{3.76}\n\\end{equation*}\n$$\n\nIn other words, when the current splits equally between $r_{s 1}$ and $r_{s 2}$, the current mirror of $Q_{3}$ and $Q_{4}$ causes the currents $i_{x 3}$ and $i_{x 4}$ to cancel each other. Finally, the output resistance, $r_{o u t}$, is given by:\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=\\frac{v_{x}}{i_{x 1}+i_{x 2}+i_{x 3}+i_{x 4}}=\\frac{v_{x}}{\\left(v_{x} / r_{d s 4}\\right)+\\left(v_{x} / r_{d s 2}\\right)} \\tag{3.77}\n\\end{equation*}\n$$\n\nyielding the simple relationship:\n\n$$\n\\begin{equation*}\nr_{\\text {out }}=r_{\\mathrm{ds} 2} \\| r_{\\mathrm{ds} 4} \\tag{3.78}\n\\end{equation*}\n$$\n\nThus, at low frequencies, the gain, $A_{v}$, is:\n\n$$\n\\begin{equation*}\nA_{v}=g_{m 1}\\left(r_{d s 2} \\| r_{d s 4}\\right) \\tag{3.79}\n\\end{equation*}\n```"
},
{
    "text": "- A basic CMOS current mirror exhibits a small-signal input resistance of $1 / g_{m1}$ and a small-signal output resistance of $r_{\\text{ds2}}$. [p. 119]\n- The common-source amplifier is frequently employed as a gain stage, particularly when high input impedance is needed. Utilizing an active load leverages the nonlinear, large-signal transistor current-voltage characteristics to deliver substantial small-signal resistances without significant dc voltage drops. [p. 120]\n- The source-follower offers a voltage gain nearly equal to one, often constrained by the body effect. It can achieve a high current gain and is unilateral, making it a common choice for a voltage buffer. [p. 122]\n- The common-gate amplifier delivers a voltage gain similar to that of the common-source amplifier but has a relatively low input resistance around $1 / \\mathrm{g}_{\\mathrm{m}}$. However, this input resistance can increase if the amplifier is subjected to a large small-signal load resistance. [p. 126]\n- Introducing a small-signal resistance $R_{s}$ at the source of both transistors in a simple current mirror enhances the output resistance by a factor roughly equivalent to $(1 + R_{s} g_{m})$. [p. 128]\n- Adding a cascode device to a CMOS current mirror boosts its output resistance by approximately the gain of the cascode device, $g_{m} r_{d s}$. However, the voltage swing at the current mirror output is diminished due to the necessary voltage drop across the cascode device to maintain its active mode. [p. 129]\n- The cascode gain stage employs a common-gate transistor $Q_{2}$ to mitigate $V_{D S}$ variations in a common-source transistor $Q_{1}$, resulting in high output resistance, potential high gain, and reduced short-channel effects, albeit with a reduced available output voltage swing. [p. 131]\n- The differential pair with an active load traditionally serves as the initial stage of a two-stage operational amplifier. It processes a differential input and generates a single-ended output with a gain on par with that of a common-source stage. [p. 136]"
},
{
    "text": "- A basic CMOS current mirror exhibits a small-signal input resistance of $1 / g_{m1}$ and a small-signal output resistance of $r_{\\text{ds2}}$. [p. 119]\n- The common-source amplifier is widely used as a gain stage, particularly when high input impedance is needed. Employing an active load leverages the nonlinear, large-signal current-voltage characteristics of the transistor to deliver substantial small-signal resistances without significant dc voltage drops. [p. 120]\n- The source-follower offers a voltage gain near unity, often constrained by the body effect. It can achieve high current gain and is unilateral, frequently serving as a voltage buffer. [p. 122]\n- The common-gate amplifier delivers a voltage gain similar to that of the common-source amplifier but has a relatively low input resistance around $1 / \\mathrm{g}_{\\mathrm{m}}$. This input resistance can increase if the amplifier is paired with a large small-signal load resistance. [p. 126]\n- Introducing a small-signal resistance $R_{s}$ at the source of both transistors in a simple current mirror boosts the output resistance by a factor roughly equal to $(1 + R_{s} g_{m})$. [p. 128]\n- Adding a cascode device to a CMOS current mirror enhances its output resistance by about the gain of the cascode, $g_{m} r_{ds}$. However, the voltage swing at the current mirror output diminishes because a voltage drop must be sustained across the cascode device to maintain its active mode. [p. 129]\n- The cascode gain stage employs a common-gate transistor $Q_{2}$ to mitigate $V_{DS}$ variations in a common-source transistor $Q_{1}$, resulting in high output resistance, potentially high gain, and minimized short-channel effects, though the available output voltage swing is reduced. [p. 131]\n- The differential pair with an active load is traditionally the initial stage of a two-stage operational amplifier. It processes a differential input to generate a single-ended output with a gain on par with that of a common-source stage. [p. 136]"
},
{
    "text": "- A basic CMOS current mirror exhibits a small-signal input resistance of $1 / g_{m 1}$ and a small-signal output resistance of $r_{\\text{ds2}}$. [p. 119]\n- The common-source amplifier is widely used as a gain stage, particularly when high input impedance is needed. Utilizing an active load leverages the nonlinear, large-signal transistor current-voltage characteristics to deliver substantial small-signal resistances without significant dc voltage drops. [p. 120]\n- The source-follower offers a voltage gain nearly equal to one, often constrained by the body effect. It can achieve substantial current gain and is unilateral, making it a common choice for a voltage buffer. [p. 122]\n- The common-gate amplifier delivers a voltage gain similar to that of the common-source amplifier but has a relatively low input resistance around $1 / \\mathrm{g}_{\\mathrm{m}}$. This input resistance can increase if the amplifier is paired with a high small-signal load resistance. [p. 126]\n- Introducing a small-signal resistance $R_{s}$ at the source of both transistors in a basic current mirror boosts the output resistance by a factor roughly equivalent to $(1 + R_{s} g_{m})$. [p. 128]\n- Adding a cascode device to a CMOS current mirror enhances its output resistance by about the gain of the cascode device, $g_{m} r_{d s}$. However, the voltage swing at the current mirror output diminishes because a certain voltage drop must be sustained across the cascode device to maintain its active mode. [p. 129]\n- The cascode gain stage employs a common-gate transistor $Q_{2}$ to minimize $V_{D S}$ variations in a common-source transistor $Q_{1}$. This results in high output resistance, potentially high gain, and reduced short-channel effects, though the available output voltage swing is decreased. [p. 131]\n- The differential pair with an active load is traditionally the initial stage of a two-stage operational amplifier. It processes a differential input to generate a single-ended output with a gain similar to that of a common-source stage. [p. 136]"
},
{
    "text": "- A basic CMOS current mirror exhibits a small-signal input resistance of $1 / g_{m1}$ and a small-signal output resistance of $r_{\\text{ds2}}$. [p. 119]\n- The common-source amplifier is widely used as a gain stage, particularly when high input impedance is needed. Employing an active load leverages the nonlinear, large-signal transistor current-voltage characteristics to deliver substantial small-signal resistances without significant dc voltage drops. [p. 120]\n- The source-follower offers a voltage gain near unity, often constrained by the body effect. It can achieve substantial current gain and is unilateral, frequently serving as a voltage buffer. [p. 122]\n- The common-gate amplifier delivers a voltage gain similar to that of the common-source amplifier but has a relatively low input resistance around $1 / \\mathrm{g}_{\\mathrm{m}}$. However, this input resistance can increase if the amplifier is paired with a large small-signal load resistance. [p. 126]\n- Introducing a small-signal resistance $R_{s}$ at the source of both transistors in a simple current mirror enhances the output resistance by a factor roughly equivalent to $(1 + R_{s} g_{m})$. [p. 128]\n- Adding a cascode device to a CMOS current mirror boosts its output resistance by about the gain of the cascode device, $g_{m} r_{d s}$. The voltage swing at the current mirror output is diminished because a certain voltage drop must be sustained across the cascode device to maintain its active mode. [p. 129]\n- The cascode gain stage employs a common-gate transistor $Q_{2}$ to mitigate $V_{D S}$ variations on a common-source transistor $Q_{1}$, resulting in high output resistance, potentially high gain, and minimized short-channel effects. Nonetheless, the available output voltage swing is reduced. [p. 131]\n- The differential pair with an active load is traditionally the initial stage of a two-stage operational amplifier. It processes a differential input and generates a single-ended output with a gain on par with that of a common-source stage. [p. 136]"
},
{
    "text": "- A basic CMOS current mirror exhibits a small-signal input resistance of $1 / g_{m1}$ and a small-signal output resistance of $r_{\\text{ds2}}$. [p. 119]\n- The common-source amplifier is frequently employed as a gain stage, particularly when high input impedance is needed. Utilizing an active load leverages the nonlinear, large-signal transistor current-voltage characteristics to deliver substantial small-signal resistances without significant dc voltage drops. [p. 120]\n- The source-follower offers a voltage gain nearly equal to one, often constrained by the body effect. It can deliver considerable current gain and is unilateral, making it a common choice for a voltage buffer. [p. 122]\n- The common-gate amplifier achieves a voltage gain similar to that of the common-source amplifier but has a relatively low input resistance around $1 / \\mathrm{g}_{\\mathrm{m}}$. However, this input resistance can increase when the amplifier is paired with a large small-signal load resistance. [p. 126]\n- Introducing a small-signal resistance $R_{s}$ at the source of both transistors in a basic current mirror boosts the output resistance by a factor roughly equivalent to $(1 + R_{s} g_{m})$. [p. 128]\n- Adding a cascode device to a CMOS current mirror enhances its output resistance by roughly the gain of the cascode device, $g_{m} r_{d s}$. The available voltage swing at the current mirror output diminishes because a certain voltage drop must be sustained across the cascode device to maintain its active mode. [p. 129]\n- The cascode gain stage employs a common-gate transistor $Q_{2}$ to mitigate $V_{D S}$ variations on a common-source transistor $Q_{1}$, resulting in high output resistance, potential high gain, and minimized short-channel effects. Nonetheless, the available output voltage swing is decreased. [p. 131]\n- The differential pair with an active load is traditionally the initial stage of a two-stage operational amplifier. It accepts a differential input and generates a single-ended output with a gain on par with that of a common-source stage. [p. 136]"
},
{
    "text": "- A basic CMOS current mirror exhibits a small-signal input resistance of $1 / g_{m1}$ and a small-signal output resistance of $r_{\\text{ds2}}$. [p. 119]\n- The common-source amplifier is widely used as a gain stage, particularly when high input impedance is needed. Utilizing an active load leverages the nonlinear, large-signal transistor current-voltage characteristics to deliver substantial small-signal resistances without significant dc voltage drops. [p. 120]\n- The source-follower offers a voltage gain nearly equal to one, often constrained by the body effect. It can deliver substantial current gain and is unilateral, frequently serving as a voltage buffer. [p. 122]\n- The common-gate amplifier achieves a voltage gain similar to that of the common-source amplifier but has a relatively low input resistance around $1 / \\mathrm{g}_{\\mathrm{m}}$. However, the input resistance can increase if the amplifier is equipped with a large small-signal load resistance. [p. 126]\n- Introducing a small-signal resistance $R_{s}$ at the source of both transistors in a basic current mirror raises the output resistance by a factor roughly equivalent to ( $1 + R_{s} g_{m}$ ). [p. 128]\n- Adding a cascode device to a CMOS current mirror enhances its output resistance by roughly the gain of the cascode device, $g_{m} r_{d s}$. The available voltage swing at the current mirror output decreases because a certain voltage drop must be sustained across the cascode device to maintain its active mode. [p. 129]\n- The cascode gain stage employs a common-gate transistor $Q_{2}$ to minimize $V_{D S}$ variations on a common-source transistor $Q_{1}$. This results in high output resistance, potentially high gain, and reduced short-channel effects, though the available output voltage swing is diminished. [p. 131]\n- The differential pair with an active load is traditionally the initial stage of a two-stage operational amplifier. It accepts a differential input and generates a single-ended output with a gain comparable to that of a common-source stage. [p. 136]"
},
{
    "text": "- A basic CMOS current mirror exhibits a small-signal input resistance of $1 / g_{m 1}$ and a small-signal output resistance of $r_{\\text{ds2}}$. [p. 119]\n- The common-source amplifier is frequently employed as a gain stage, particularly when high input impedance is needed. Utilizing an active load leverages the nonlinear, large-signal transistor current-voltage characteristics to deliver substantial small-signal resistances without significant dc voltage drops. [p. 120]\n- The source-follower offers a voltage gain near unity, often constrained by the body effect. It can achieve substantial current gain and is unilateral, making it a common choice for a voltage buffer. [p. 122]\n- The common-gate amplifier delivers a voltage gain similar to that of the common-source amplifier but features a relatively low input resistance around $1 / \\mathrm{g}_{\\mathrm{m}}$. However, this input resistance can increase if the amplifier is paired with a large small-signal load resistance. [p. 126]\n- Introducing a small-signal resistance $R_{s}$ at the source of both transistors in a basic current mirror enhances the output resistance by a factor roughly equivalent to ( $1 + R_{s} g_{m}$ ). [p. 128]\n- Adding a cascode device to a CMOS current mirror boosts its output resistance by roughly the gain of the cascode device, $g_{m} r_{d s}$. The available voltage swing at the current mirror output decreases because a certain voltage drop must be sustained across the cascode device to keep it in active mode. [p. 129]\n- The cascode gain stage employs a common-gate transistor $Q_{2}$ to mitigate $V_{D S}$ variations on a common-source transistor $Q_{1}$. This results in high output resistance, potentially high gain, and reduced short-channel effects, though it limits the available output voltage swing. [p. 131]\n- The differential pair with an active load traditionally serves as the initial stage of a two-stage operational amplifier. It accepts a differential input and generates a single-ended output with a gain on par with that of a common-source stage. [p. 136]"
},
{
    "text": "- A basic CMOS current mirror exhibits a small-signal input resistance of $1 / g_{m1}$ and a small-signal output resistance of $r_{\\text{ds2}}$. [p. 119]\n- The common-source amplifier is frequently employed as a gain stage, particularly when high input impedance is needed. Utilizing an active load leverages the nonlinear, large-signal transistor current-voltage characteristics to deliver substantial small-signal resistances without significant dc voltage drops. [p. 120]\n- The source-follower offers a voltage gain nearly equal to one, often constrained by the body effect. It can achieve substantial current gain and is unilateral, making it a common choice for a voltage buffer. [p. 122]\n- The common-gate amplifier delivers a voltage gain similar to that of the common-source amplifier but has a relatively low input resistance around $1 / \\mathrm{g}_{\\mathrm{m}}$. This input resistance can increase if the amplifier is paired with a large small-signal load resistance. [p. 126]\n- Introducing a small-signal resistance $R_{s}$ at the source of both transistors in a simple current mirror boosts the output resistance by a factor roughly equivalent to ( $1 + R_{s} g_{m}$ ). [p. 128]\n- Adding a cascode device to a CMOS current mirror enhances its output resistance by roughly the gain of the cascode device, $g_{m} r_{d s}$. However, the voltage swing at the current mirror output decreases because a certain voltage drop must be sustained across the cascode device to maintain its active mode. [p. 129]\n- The cascode gain stage employs a common-gate transistor $Q_{2}$ to minimize $V_{D S}$ variations on a common-source transistor $Q_{1}$, resulting in high output resistance, potentially high gain, and reduced short-channel effects, albeit with a reduced available output voltage swing. [p. 131]\n- The differential pair with an active load is traditionally the initial stage of a two-stage operational amplifier. It processes a differential input to generate a single-ended output with a gain on par with that of a common-source stage. [p. 136]"
}
]