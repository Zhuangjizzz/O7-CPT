[

{
    "text": "Let's assume the original text is lengthy and has been segmented for clarity. Here is the rephrased version of the provided text in the [Context Provided] Section:\n\n---\n\n**Main Components of the Negative-Feedback System:**\n\n- **Summing Junction (+):** At this junction, the input signal \\(X(s)\\) and the feedback signal are merged. It functions by combining these two signals: adding the input signal and subtracting the feedback signal.\n- **Forward Path Transfer Function \\(H(s)\\):** This block symbolizes the system or plant being controlled. It processes the signal from the summing junction and generates the output \\(Y(s)\\).\n- **Feedback Path with Gain \\(\\beta\\):** This block captures a segment of the output \\(Y(s)\\), scales it by the feedback factor \\(\\beta\\), and returns it to the summing junction.\n\n**Flow of Information or Control:**\n\n- The input signal \\(X(s)\\) is introduced into the summing junction.\n- The summing junction calculates the difference between \\(X(s)\\) and the feedback signal, adjusted by \\(\\beta\\).\n- The resulting signal is then handled by the forward path \\(H(s)\\), resulting in the output \\(Y(s)\\).\n- A portion of \\(Y(s)\\) is sent back through the feedback path, scaled by \\(\\beta\\), and subtracted from the input at the summing junction.\n\n**Labels, Annotations, and Key Indicators:**\n\n- The input and output signals are identified as \\(X(s)\\) and \\(Y(s)\\), respectively.\n- The feedback gain is denoted as \\(\\beta\\).\n- The forward path transfer function is depicted as \\(H(s)\\).\n\n**Overall System Function:**\n\n- This system is designed to regulate its output \\(Y(s)\\) based on the input \\(X(s)\\) and the feedback signal. Adjusting the feedback gain \\(\\beta\\) allows the system to manage the stability and response properties of the output. The negative feedback loop contributes to maintaining desired system performance by minimizing the discrepancy between the input and the feedback signal.\n\n---\n\nThe rephrased text maintains the original meaning and length while adjusting the wording and sentence structure for clarity."
},
{
    "text": "Let's rephrase the provided text from the [Context Provided] section:\n\nOriginal Text:\n```\nLet us consider the negative-feedback system shown in Fig. 10.1(a), where $\\beta$ is assumed constant. Writing the closed-loop transfer function as\n\n$$\n\\begin{equation*}\n\\frac{Y}{X}(s)=\\frac{H(s)}{1+\\beta H(s)} \\tag{10.1}\n\\end{equation*}\n$$\n\nwe note that if $\\beta H\\left(s=j \\omega_{1}\\right)=-1$ at $\\omega_{1} \\neq 0$, then the closed-loop \"gain\" goes to infinity, and the circuit can amplify its own noise until it eventually begins to oscillate. In other words, if the loop gain at $\\omega_{1}, \\beta H\\left(j \\omega_{1}\\right)$, is equal to -1 , then the circuit may oscillate at frequency $\\omega_{1}$. This condition can be expressed as\n\n$$\n\\begin{align*}\n& \\left|\\beta H\\left(j \\omega_{1}\\right)\\right|=1  \\tag{10.2}\\\\\n& \\angle \\beta H\\left(j \\omega_{1}\\right)=-180^{\\circ} \\tag{10.3}\n\\end{align*}\n```\n\nRephrased Text:\n```\nIn examining the negative-feedback system depicted in Figure 10.1(a), we assume a constant value for $\\beta$. The closed-loop transfer function is expressed as:\n\n$$\n\\begin{equation*}\n\\frac{Y}{X}(s)=\\frac{H(s)}{1+\\beta H(s)} \\tag{10.1}\n\\end{equation*}\n$$\n\nWe observe that when $\\beta H\\left(s=j \\omega_{1}\\right)=-1$ at $\\omega_{1} \\neq 0$, the closed-loop \"gain\" becomes infinite, leading the circuit to amplify its own noise and eventually oscillate. To clarify, if the loop gain at $\\omega_{1}, \\beta H\\left(j \\omega_{1}\\right)$, equals -1, the circuit may oscillate at the frequency $\\omega_{1}$. This scenario is defined by:\n\n$$\n\\begin{align*}\n& \\left|\\beta H\\left(j \\omega_{1}\\right)\\right|=1  \\tag{10.2}\\\\\n& \\angle \\beta H\\left(j \\omega_{1}\\right)=-180^{\\circ} \\tag{10.3}\n\\end{align*}\n```"
},
{
    "text": "---[Attention]---\nImage Descriptions: Images linked in the [Context Provided] area have been converted into text descriptions. You must also rephrase the text in the [Context Provided] section to preserve the original meaning and length.\n---[Task]---\nCarefully rephrase the text given in the [Context Provided] Section. Make sure the rephrased version retains the original meaning and length. Provide only the rephrased text.\n---[Context Provided]---\nThe rephrased text:\n\n```\nExamine the negative-feedback system depicted in Figure 10.1(a), with the understanding that the variable $\\beta$ remains constant. By formulating the closed-loop transfer function as\n\n$$\n\\begin{equation*}\n\\frac{Y}{X}(s)=\\frac{H(s)}{1+\\beta H(s)} \\tag{10.1}\n\\end{equation*}\n$$\n\nwe observe that when $\\beta H(s=j \\omega_{1})$ equals -1 at a frequency $\\omega_{1}$ not equal to zero, the closed-loop \"gain\" escalates to infinity, and the circuit is capable of amplifying its own noise until it starts to oscillate. Essentially, if the loop gain at $\\omega_{1}$, given by $\\beta H(j \\omega_{1})$, is equal to -1, the circuit may oscillate at the frequency $\\omega_{1}$. This condition can be articulated as\n\n$$\n\\begin{align*}\n& \\left|\\beta H\\left(j \\omega_{1}\\right)\\right|=1  \\tag{10.2}\\\\\n& \\angle \\beta H\\left(j \\omega_{1}\\right)=-180^{\\circ} \\tag{10.3}\n\\end{align*}\n$$\n\nimage_name:(a)\ndescription: Diagram (a) illustrates an elementary negative-feedback system.\n\n1. **Principal Components:**\n- **Summing Junction (+):** Here, the input signal \\(X(s)\\) and the feedback signal are amalgamated. At the summing junction, the input signal is added and the feedback signal is subtracted.\n- **Forward Path Transfer Function \\(H(s)\\):** This component represents the system or plant being controlled. It processes the signal from the summing junction and generates the output \\(Y(s)\\).\n- **Feedback Path with Gain \\(\\beta\\):** This component takes a fraction of the output \\(Y(s)\\), multiplies it by the feedback factor \\(\\beta\\), and returns it to the summing junction.\n\n2. **Flow of Signal or Control:**\n- The input signal \\(X(s)\\) enters the summing junction.\n- The summing junction calculates the difference between \\(X(s)\\) and the feedback signal, which is scaled by \\(\\beta\\).\n- The resulting signal is processed by the forward path \\(H(s)\\), which results in the output \\(Y(s)\\).\n- A part of \\(Y(s)\\) is returned to the summing junction via the feedback path, scaled by \\(\\beta\\), and subtracted from the input.\n\n3. **Labels, Annotations, and Significance:**\n- The input and output signals are labeled as \\(X(s)\\) and \\(Y(s)\\), respectively.\n- The feedback gain is designated as \\(\\beta\\).\n- The forward path transfer function is symbolized by \\(H(s)\\).\n\n4. **Overall System Function:**\n- This system is designed to regulate its output \\(Y(s)\\) in response to the input \\(X(s)\\) and the feedback signal. By adjusting the feedback gain \\(\\beta\\), the system can govern the stability and performance traits of the output. The negative feedback loop aids in preserving desired system performance by diminishing the discrepancy between the input and the feedback signal.\nimage_name:(b)\ndescription: System block diagram (b) depicts a fundamental negative-feedback system with emphasis on phase shift within the loop at a specific frequency, \\( \\omega_{1} \\). The primary components of this diagram are:\n\n1. **Summing Junction**: This is the node where the input signal \\(X(s)\\) and the feedback signal merge. The summing junction receives the main input signal \\(X(s)\\) and the feedback signal, which is subtracted from it.\n\n2. **Transfer Function Block \\( H(s) \\)**: This block processes the signal received from the summing junction. It embodies the system's transfer function, which dictates how the input signal is transformed into the output signal \\(Y(s)\\).\n\n3. **Feedback Path**: This path includes a feedback transfer function \\( \\beta \\), which takes a segment of the output signal \\( Y(s) \\) and directs it back to the summing junction. The feedback path introduces a phase shift of 180 degrees.\n\n4. **Phase Shift Indicator**: The diagram highlights that an extra 180-degree phase shift is introduced by the system, summing up to 360 degrees at the frequency \\( \\omega_{1} \\).\n\n**Flow of Information**:\n- The input signal \\( X(s) \\) enters the summing junction where it is combined with the feedback signal.\n- The resultant signal is then processed by the transfer function \\( H(s) \\), yielding the output signal \\( Y(s) \\).\n- A portion of \\( Y(s) \\) is fed back through the feedback path with a gain of \\( \\beta \\) and a phase shift of 180 degrees.\n\n**Overall System Function**:\nThe primary purpose of this system is to ensure stability and control the amplification of signals by guaranteeing the total phase shift around the feedback loop is 360 degrees. This is consistent with Barkhausen's Criteria for oscillation, which dictates that the magnitude of the loop gain is 1, and the phase shift is -180 degrees, resulting in 360 degrees when considering negative feedback. This configuration is crucial for grasping the conditions under which the system may start to oscillate at a certain frequency, \\( \\omega_{1} \\).\n\nFigure 10.1 (a) Fundamental negative-feedback system, and (b) phase shift around the loop at \\( \\omega_{1} \\), referred to as \"Barkhausen's Criteria.\" Notably, (1) these equations concern solely the loop gain (more precisely, the loop transmission) and are unrelated to the positions of the input and output, and (2) the total phase shift around the loop at \\( \\omega_{1} \\) is \\( 360^{\\circ} \\) due to the introduction of \\( 180^{\\circ} \\) of phase shift by the negative feedback. The \\( 360^{\\circ} \\) phase shift is necessary for oscillation since the feedback signal must align in phase with the original noise for oscillation growth. Similarly, a loop gain of unity (or higher) is essential for enabling the amplification of the oscillation amplitude. These oscillation prerequisites are further explored in Chapter 15. The crucial point is that the loop transmission, which is often ascertainable from the open-loop system, reveals the stability of the closed-loop system.\n\nIn essence, a negative-feedback system can oscillate at \\( \\omega_{1} \\) if (1) the phase shift around the loop at this frequency is significant enough to cause the feedback to become positive, and (2) the loop gain is still sufficient to allow signal amplification. As depicted in Figure 10.2(a), the scenario can be regarded as an excessive loop gain at the frequency where the phase shift reaches \\(-180^{\\circ}\\) or, equivalently, an excessive phase at the frequency where the loop gain diminishes to unity. Consequently, to prevent instability, it is essential to minimize the total phase shift so that if \\( |\\beta H|=1 \\), then \\( \\angle \\beta H \\) remains more positive than \\(-180^{\\circ} \\) [Figure 10.2(b)]. In this section, we assume that \\( \\beta \\) is less than or equal to unity and is not a function of the frequency.\nimage_name:10.2(a)\ndescription: Graph 10.2(a) is a Bode plot that demonstrates the characteristics of an unstable system. It includes two separate plots: one for the magnitude of the loop gain and one for the phase, both plotted against frequency on a logarithmic scale.\n\n1. **Magnitude Plot:**\n- **Vertical Axis:** The vertical axis denotes \\( 20\\log|\\beta H(\\omega)| \\), which signifies the system's gain in decibels (dB).\n- **Horizontal Axis:** Frequency \\( \\omega \\) on a logarithmic scale.\n- **Behavior:** The magnitude starts at a particular level and decreases as the frequency increases. The gain intersects the 0 dB line at the frequency \\( \\omega_1 \\), indicating the gain crossover frequency.\n- **Key Feature:** The gain is still positive at the frequency \\( \\omega_2 \\), indicating excessive gain at that frequency.\n\n2. **Phase Plot:**\n- **Vertical Axis:** The vertical axis represents the phase angle \\( \\angle \\beta H(\\omega) \\) in degrees.\n- **Horizontal Axis:** Frequency \\( \\omega \\) on a logarithmic scale.\n- **Behavior:** The phase decreases and crosses the \\(-180^{\\circ}\\) line, indicating the phase crossover frequency at \\( \\omega_2 \\).\n- **Key Feature:** The phase is excessively negative at the frequency where the gain is still positive, contributing to instability.\n\n3. **Annotations and Observations:**\n- The plot is labeled \"Unstable\" due to the excessive gain and phase shift.\n- Annotations indicate \"Excessive Gain\" and \"Excessive Phase\" at the respective frequencies, highlighting the instability issues.\n\nOverall, this Bode plot illustrates that the gain crossover happens after the phase crossover, leading to instability, as the phase at unity gain is more negative than \\(-180^{\\circ}\\).\n```"
},
{
    "text": "We shall analyze the negative-feedback system depicted in Fig. 10.1(a), assuming a constant $\\beta$. The closed-loop transfer function is expressed as:\n\n$$\n\\frac{Y}{X}(s)=\\frac{H(s)}{1+\\beta H(s)}\n$$\n\nObserving this function, we note that if $\\beta H\\left(s=j \\omega_{1}\\right)=-1$ at $\\omega_{1} \\neq 0$, the closed-loop gain becomes infinite, and the circuit may amplify its noise to the point of oscillation. This implies that if the loop gain at $\\omega_{1}$, $\\beta H\\left(j \\omega_{1}\\right)$, equals -1, the circuit could oscillate at frequency $\\omega_{1}$. This condition can be written as:\n\n$$\n\\left|\\beta H\\left(j \\omega_{1}\\right)\\right|=1\n$$\n$$\n\\angle \\beta H\\left(j \\omega_{1}\\right)=-180^{\\circ}\n$$\n\nThe diagram labeled \"(a)\" shows a basic negative-feedback system.\n\n1. **Main Components:**\n- **Summing Junction (+):** This point combines the input signal \\(X(s)\\) and the feedback signal. The summing junction adds the input signal and subtracts the scaled feedback signal.\n- **Forward Path Transfer Function \\(H(s)\\):** This block represents the system or plant being controlled. It processes the signal from the summing junction to generate the output \\(Y(s)\\).\n- **Feedback Path with Gain \\(\\beta\\):** This block takes a portion of the output \\(Y(s)\\), scales it by the feedback factor \\(\\beta\\), and feeds it back to the summing junction.\n\n2. **Flow of Information or Control:**\n- The input signal \\(X(s)\\) enters the summing junction.\n- The summing junction computes the difference between \\(X(s)\\) and the scaled feedback signal.\n- The resulting signal is processed by the forward path \\(H(s)\\), producing the output \\(Y(s)\\).\n- A portion of \\(Y(s)\\) is fed back through the feedback path, scaled by \\(\\beta\\), and subtracted from the input at the summing junction.\n\n3. **Labels, Annotations, and Key Indicators:**\n- The input and output signals are labeled as \\(X(s)\\) and \\(Y(s)\\), respectively.\n- The feedback gain is denoted as \\(\\beta\\).\n- The forward path transfer function is represented by \\(H(s)\\).\n\n4. **Overall System Function:**\n- This system is designed to regulate its output \\(Y(s)\\) based on the input \\(X(s)\\) and the feedback signal. By adjusting the feedback gain \\(\\beta\\), the system can control the stability and response characteristics of the output. The negative feedback loop helps in maintaining desired system performance by reducing the error between the input and the feedback signal.\n\nThe system block diagram labeled (b) represents a basic negative-feedback system with a focus on phase shift around the loop at a specific frequency, $\\omega_{1}$.\n\n1. **Summing Junction**: This point combines the input signal \\(X(s)\\) and the feedback signal. The summing junction has two inputs: the main input signal \\(X(s)\\) and the feedback signal, which is subtracted from the main signal.\n\n2. **Transfer Function Block \\(H(s)\\)**: This block processes the signal from the summing junction. It represents the system's transfer function, which dictates how the input signal is transformed into the output signal \\(Y(s)\\).\n\n3. **Feedback Path**: This path includes a feedback transfer function \\(\\beta\\), which takes a portion of the output signal \\(Y(s)\\) and feeds it back to the summing junction. The feedback path introduces a phase shift of 180 degrees.\n\n4. **Phase Shift Indicator**: The diagram highlights that there is an additional 180-degree phase shift introduced by the system itself, making the total phase shift around the loop 360 degrees at frequency \\(\\omega_{1}\\).\n\n**Flow of Information**:\n- The input signal \\(X(s)\\) enters the summing junction where it is combined with the feedback signal.\n- The resultant signal is then processed by the transfer function \\(H(s)\\), producing the output signal \\(Y(s)\\).\n- A portion of \\(Y(s)\\) is fed back through the feedback path with a gain of \\(\\beta\\) and a phase shift of 180 degrees.\n\n**Overall System Function**:\nThe primary function of this system is to maintain stability and control the amplification of signals by ensuring the total phase shift around the feedback loop is 360 degrees. This aligns with Barkhausen's Criteria for oscillation, where the magnitude of the loop gain is 1, and the phase shift is -180 degrees, effectively making it 360 degrees when considering the negative feedback. This setup is crucial for understanding conditions under which the system may begin to oscillate at a particular frequency, \\(\\omega_{1}\\).\n\nFigure 10.1 (a) Basic negative-feedback system, and (b) phase shift around the loop at $\\omega_{1}$.\n\nThe frequencies at which the magnitude and phase of the loop gain are equal to unity and $-180^{\\circ}$, respectively, play a critical role in stability and are called the \"gain crossover frequency\" and the \"phase crossover frequency,\" respectively. In a stable system, the gain crossover must occur well before the phase crossover. For brevity, we denote the gain crossover by GX and the phase crossover by PX. It is helpful to note that the gain crossover frequency is the same as the unity-gain bandwidth of the loop transmission.\n\n#### Example 10.1\n\nExplain whether the system depicted in Fig. 10.2(a) becomes more or less stable if the feedback is weakened, i.e., if $\\beta$ is reduced.\n\n#### Solution\n\nAs illustrated in Fig. 10.3, a lower $\\beta$ shifts the plot of $20 \\log |\\beta H(\\omega)|$ down and the GX to the left. Since $\\angle \\beta H(\\omega)$ does not change, the system becomes more stable. After all, if we apply no feedback around an op amp, the circuit has no tendency to oscillate. Thus, the worst-case stability corresponds to $\\beta=1$, i.e, unity-gain feedback. For this reason, we often analyze the magnitude and phase plots for $\\beta H=H$.\n\nBefore studying more specific cases, let us review a few basic rules for constructing Bode plots. A Bode plot illustrates the asymptotic behavior of the magnitude and phase of a complex function according to the magnitude of the poles and zeros. The following two rules are used. (1) The slope of the magnitude plot changes by $+20 \\mathrm{~dB} / \\mathrm{dec}$ at every zero frequency and by $-20 \\mathrm{~dB} / \\mathrm{dec}$ at every pole frequency. (2) For a pole (zero) frequency of $\\omega_{m}$, the phase begins to fall (rise) at approximately $0.1 \\omega_{m}$, experiences a change of $-45^{\\circ}\\left(+45^{\\circ}\\right)$ at $\\omega_{m}$, and approaches a change of $-90^{\\circ}\\left(+90^{\\circ}\\right)$ at approximately $10 \\omega_{m}$. The key point here is that the phase is much more significantly affected by high-frequency poles and zeros than the magnitude is.\n\nIt is also instructive to plot the location of the poles of a closed-loop system on a complex plane. Expressing each pole frequency as $s_{p}=j \\omega_{p}+\\sigma_{p}$ and noting that the impulse response of the system includes a term $\\exp \\left(j \\omega_{p}+\\sigma_{p}\\right) t$, we observe that if $s_{p}$ falls in the right half plane (RHP), i.e., if $\\sigma_{p}>0$, then the system oscillates because its time-domain response exhibits a growing exponential [Fig. 10.4(a)]. Even if $\\sigma_{p}=0$, the system sustains oscillations [Fig. 10.4(b)]. Conversely, if the poles lie in the left half plane (LHP), all time-domain exponential terms decay to zero [Fig. 10.4(c)]. ${ }^{2}$ In practice, we plot the location of the poles as the loop gain varies, thereby revealing how close to oscillation the system may come. Such a plot is called a \"root locus.\"\n\nWe now study a feedback system incorporating a one-pole forward amplifier. Assuming $H(s)=$ $A_{0} /\\left(1+s / \\omega_{0}\\right)$, we have from $(10.1)$\n\n$$\n\\frac{Y}{X}(s)=\\frac{\\frac{A_{0}}{1+\\beta A_{0}}}{1+\\frac{s}{\\omega_{0}\\left(1+\\beta A_{0}\\right)}} \\tag{10.4}\n$$\n\nFigure 10.4 Time-domain response of a system versus the position of poles: (a) unstable with growing amplitude; (b) unstable with constant-amplitude oscillation; (c) stable.\n\nIn order to analyze the stability behavior, we plot $|\\beta H(s=j \\omega)|$ and $\\angle \\beta H(s=j \\omega)$ (Fig. 10.5), observing that a single pole cannot contribute a phase shift greater than $90^{\\circ}$ and the system is unconditionally stable for all nonnegative values of $\\beta$. Note that $\\angle \\beta H$ is independent of $\\beta$.\n\n#### Example 10.2\n\nConstruct the root locus for a one-pole system.\n\n#### Solution\n\nEquation (10.4) implies that the closed-loop system has a pole $s_{p}=-\\omega_{0}\\left(1+\\beta A_{0}\\right)$, i.e., a real-valued pole in the left half plane that moves away from the origin as the loop gain increases (Fig. 10.6)."
},
{
    "text": "Figure 10.1 (a) depicts a fundamental negative-feedback system, and (b) focuses on the phase shift around the loop at a specific frequency, $\\omega_{1}$. This setup is based on Barkhausen's Criteria for oscillation, which states that for a system to oscillate, the magnitude of the loop gain must be 1, and the phase shift must be -180 degrees, effectively making it 360 degrees when considering the negative feedback. This configuration is crucial for understanding the conditions under which the system may begin to oscillate at a particular frequency, $\\omega_{1}$.\n\nIn summary, a negative-feedback system may oscillate at $\\omega_{1}$ if the phase shift around the loop at this frequency becomes so great that the feedback becomes positive, and the loop gain is still sufficient to allow signal buildup. As shown in Fig. 10.2(a), this situation can be viewed as excessive loop gain at the frequency where the phase shift reaches -180 degrees, or equivalently, excessive phase at the frequency where the loop gain drops to unity. To avoid instability, we must minimize the total phase shift so that if $|\\beta H|=1$, then $\\angle \\beta H$ remains more positive than -180 degrees [Fig. 10.2(b)]. In this chapter, we assume that $\\beta$ is less than or equal to unity and does not depend on the frequency."
},
{
    "text": "Referring to the negative-feedback system depicted in Fig. 10.1(a), with the assumption that the parameter $\\beta$ remains constant, we can express the closed-loop transfer function as\n\n$$\n\\begin{equation*}\n\\frac{Y}{X}(s)=\\frac{H(s)}{1+\\beta H(s)} \\tag{10.1}\n\\end{equation*}\n$$\n\nIt is observed that if the expression $\\beta H\\left(s=j \\omega_{1}\\right)=-1$ holds true at a non-zero frequency $\\omega_{1}$, the closed-loop gain tends to infinity, leading to the potential for the circuit to amplify its inherent noise to the point of initiating oscillations. This implies that should the loop gain at frequency $\\omega_{1}$, denoted as $\\beta H\\left(j \\omega_{1}\\right)$, equal -1, the circuit is susceptible to oscillating at that frequency $\\omega_{1}$. This oscillatory condition can be mathematically represented by\n\n$$\n\\begin{align*}\n& \\left|\\beta H\\left(j \\omega_{1}\\right)\\right|=1  \\tag{10.2}\\\\\n& \\angle \\beta H\\left(j \\omega_{1}\\right)=-180^{\\circ} \\tag{10.3}\n\\end{align*}\n$$\n\nIn Fig. 10.1(a), the depicted diagram represents a fundamental negative-feedback system. The main elements include:\n\n1. **Main Components:**\n   - **Summing Junction (+):** This node is where the input signal \\(X(s)\\) and the feedback signal converge. The summing junction combines the input signal and the feedback signal, which is scaled by $\\beta$ and subtracted from the input.\n   - **Forward Path Transfer Function \\(H(s)\\):** This block symbolizes the system or plant under control. It processes the signal from the summing junction to produce the output \\(Y(s)\\).\n   - **Feedback Path with Gain \\(\\beta\\):** This block captures a fraction of the output \\(Y(s)\\), scales it by the feedback factor $\\beta$, and returns it to the summing junction.\n\n2. **Information or Control Flow:**\n   - The input signal \\(X(s)\\) enters the summing junction.\n   - The summing junction calculates the difference between \\(X(s)\\) and the scaled feedback signal.\n   - The resultant signal undergoes processing by the forward path \\(H(s)\\), resulting in the output \\(Y(s)\\).\n   - A segment of \\(Y(s)\\) is fed back through the feedback path, scaled by $\\beta$, and subtracted from the input at the summing junction.\n\n3. **Labels, Annotations, and Key Indicators:**\n   - The input and output signals are denoted as \\(X(s)\\) and \\(Y(s)\\), respectively.\n   - The feedback gain is represented by $\\beta$.\n   - The forward path transfer function is indicated by \\(H(s)\\).\n\n4. **Overall System Function:**\n   - This system aims to regulate its output \\(Y(s)\\) in response to the input \\(X(s)\\) and the feedback signal. By adjusting the feedback gain $\\beta$, the system can manage its stability and responsiveness. The negative feedback loop aids in maintaining the desired system performance by minimizing the discrepancy between the input and the feedback signal.\n\nIn Fig. 10.1(b), the block diagram represents a negative-feedback system with a focus on the phase shift around the loop at a particular frequency, \\(\\omega_{1}\\). The principal components of this diagram include:\n\n1. **Summing Junction:** This is the point where the input signal \\(X(s)\\) and the feedback signal converge. The summing junction takes two inputs: the primary input signal \\(X(s)\\) and the feedback signal, which is subtracted from the main signal.\n\n2. **Transfer Function Block \\(H(s)\\):** This block processes the signal from the summing junction. It embodies the system's transfer function, dictating the transformation of the input signal into the output signal \\(Y(s)\\).\n\n3. **Feedback Path:** This path incorporates a feedback transfer function \\(\\beta\\), which captures a portion of the output signal \\(Y(s)\\) and returns it to the summing junction. The feedback path introduces a phase shift of 180 degrees.\n\n4. **Phase Shift Indicator:** The diagram emphasizes that there is an additional 180-degree phase shift induced by the system itself, resulting in a cumulative phase shift of 360 degrees around the loop at frequency \\(\\omega_{1}\\).\n\n**Information Flow:**\n   - The input signal \\(X(s)\\) enters the summing junction, where it is mixed with the feedback signal.\n   - The resulting signal is then processed by the transfer function \\(H(s)\\), yielding the output signal \\(Y(s)\\).\n   - A fraction of \\(Y(s)\\) is fed back through the feedback path, scaled by \\(\\beta\\), and subjected to a 180-degree phase shift.\n\n**Overall System Function:**\n   - The system's primary function is to ensure stability and control the amplification of signals by maintaining a total phase shift of 360 degrees around the feedback loop. This aligns with Barkhausen's Criteria for oscillation, where the magnitude of the loop gain is 1, and the phase shift is -180 degrees, effectively totaling 360 degrees with negative feedback considered. This configuration is pivotal for comprehending the conditions under which the system may commence oscillating at a specific frequency, \\(\\omega_{1}\\).\n\nFigures 10.1 (a) and (b) depict a basic negative-feedback system and the phase shift around the loop at \\(\\omega_{1}\\), respectively, adhering to \"Barkhausen's Criteria.\" It is important to note that these equations pertain solely to the loop gain (more precisely, the loop transmission) and are independent of the input and output locations. Additionally, the total phase shift around the loop at \\(\\omega_{1}\\) amounts to \\(360^{\\circ}\\) due to the \\(180^{\\circ}\\) phase shift introduced by negative feedback itself [Fig. 10.1(b)]. The \\(360^{\\circ}\\) phase shift is essential for oscillation, as the feedback signal must be in phase with the original noise to facilitate oscillation growth. Similarly, a loop gain of unity (or greater) is required to permit the amplification of the oscillation amplitude. These oscillation conditions are explored in greater detail in Chapter 15. The crucial point here is that the loop transmission, often derivable from the open-loop system, reveals the stability of the closed-loop system.\n\nIn essence, a negative-feedback system may oscillate at \\(\\omega_{1}\\) if (1) the phase shift around the loop at this frequency results in positive feedback and (2) the loop gain is sufficient to enable signal amplification. As illustrated in Fig. 10.2(a), the scenario can be perceived as excessive loop gain at the frequency where the phase shift reaches \\(-180^{\\circ}\\) or, conversely, excessive phase at the frequency where the loop gain diminishes to unity. Hence, to avert instability, we must minimize the total phase shift such that if \\(|\\beta H|=1\\), then \\(\\angle \\beta H\\) remains more positive than \\(-180^{\\circ}\\) [Fig. 10.2(b)]. Within this chapter, we posit that \\(\\beta\\) is less than or equal to unity and is not dependent on the frequency.\n\nFigures 10.2 present Bode plots of loop transmission for (a) an unstable and (b) a stable system, respectively. The frequencies at which the magnitude and phase of the loop gain equal unity and \\(-180^{\\circ}\\), respectively, are pivotal for stability and are termed the \"gain crossover frequency\" and the \"phase crossover frequency.\" In a stable system, the gain crossover must occur prior to the phase crossover. For simplicity, we denote the gain crossover by GX and the phase crossover by PX. It is worth noting that the gain crossover frequency coincides with the unity-gain bandwidth of the loop transmission.\n\nIn the subsequent sections, the stability implications of altering the feedback strength, specifically reducing \\(\\beta\\), are examined, and the construction of Bode plots is reviewed, emphasizing the asymptotic behavior of the magnitude and phase of a complex function in relation to the poles and zeros. The root locus method is introduced to visualize the movement of poles in the complex plane as the loop gain varies, providing insight into the stability characteristics of the system.\n\nFinally, the analysis of a feedback system incorporating a one-pole forward amplifier is presented, assuming \\(H(s)=\\frac{A_{0}}{1+s/\\omega_{0}}\\). The resulting closed-loop transfer function is derived, and the stability behavior is investigated through Bode plots, highlighting the system's unconditional stability for all nonnegative values of \\(\\beta\\). The root locus for a one-pole system is also constructed, showcasing the movement of the pole in the s-plane as the loop gain changes, further elucidating the stability properties of the system."
},
{
    "text": "Referring to Fig. 10.1(a), we analyze a negative-feedback system in which the parameter $\\beta$ is constant. The closed-loop transfer function is expressed as:\n\n$$\n\\frac{Y}{X}(s)=\\frac{H(s)}{1+\\beta H(s)}\n$$\n\nIt is observed that if $\\beta H\\left(s=j \\omega_{1}\\right)=-1$ occurs at $\\omega_{1} \\neq 0$, the closed-loop gain becomes infinite, and the circuit may amplify its noise to the point of oscillation. If the loop gain at $\\omega_{1}$, $\\beta H\\left(j \\omega_{1}\\right)$, equals -1, the circuit could oscillate at frequency $\\omega_{1}$. This is represented by:\n\n$$\n\\left|\\beta H\\left(j \\omega_{1}\\right)\\right|=1\n$$\n\nand\n\n$$\n\\angle \\beta H\\left(j \\omega_{1}\\right)=-180^{\\circ}\n$$\n\nThe diagram labeled \"(a)\" shows a fundamental negative-feedback system.\n\n- **Main Components:**\n  - **Summing Junction (+):** This junction combines the input signal $X(s)$ with the feedback signal. It adds the input and subtracts the scaled feedback.\n  - **Forward Path Transfer Function $H(s)$:** This component represents the system or plant being controlled, processing the signal from the summing junction to produce the output $Y(s)$.\n  - **Feedback Path with Gain $\\beta$:** This block takes a fraction of the output $Y(s)$, scales it by the feedback factor $\\beta$, and returns it to the summing junction.\n\n- **Flow of Information or Control:**\n  - The input signal $X(s)$ enters the summing junction.\n  - The junction calculates the difference between $X(s)$ and the scaled feedback signal.\n  - The resultant signal is processed by the forward path $H(s)$, generating the output $Y(s)$.\n  - A fraction of $Y(s)$ is fed back through the feedback path, scaled by $\\beta$, and subtracted from the input at the summing junction.\n\n- **Labels, Annotations, and Key Indicators:**\n  - Input and output signals are labeled as $X(s)$ and $Y(s)$, respectively.\n  - The feedback gain is denoted as $\\beta$.\n  - The forward path transfer function is represented by $H(s)$.\n\n- **Overall System Function:**\n  - The system is designed to regulate its output $Y(s)$ based on the input $X(s)$ and the feedback signal. Adjusting the feedback gain $\\beta$ controls the system's stability and response characteristics. The negative feedback loop helps maintain desired performance by reducing the error between the input and the feedback signal.\n\nThe diagram labeled \"(b)\" focuses on the phase shift around the loop at a specific frequency, $\\omega_{1}$.\n\n- **Summing Junction:** This is the point where the input signal $X(s)$ and the feedback signal are combined. The summing junction has two inputs: the main input signal $X(s)$ and the feedback signal, which is subtracted from the main signal.\n\n- **Transfer Function Block $H(s)$:** This block processes the signal from the summing junction. It represents the system's transfer function, which determines how the input signal is transformed into the output signal $Y(s)$.\n\n- **Feedback Path:** This path includes a feedback transfer function $\\beta$, which takes a portion of the output signal $Y(s)$ and feeds it back to the summing junction. The feedback path introduces a phase shift of 180 degrees.\n\n- **Phase Shift Indicator:** The diagram emphasizes that there is an additional 180-degree phase shift introduced by the system itself, making the total phase shift around the loop 360 degrees at frequency $\\omega_{1}$.\n\n**Flow of Information:**\n- The input signal $X(s)$ enters the summing junction where it is combined with the feedback signal.\n- The resultant signal is then processed by the transfer function $H(s)$, producing the output signal $Y(s)$.\n- A portion of $Y(s)$ is fed back through the feedback path with a gain of $\\beta$ and a phase shift of 180 degrees.\n\n**Overall System Function:**\nThe primary function of this system is to maintain stability and control the amplification of signals by ensuring the total phase shift around the feedback loop is 360 degrees. This aligns with Barkhausen's Criteria for oscillation, where the magnitude of the loop gain is 1, and the phase shift is -180 degrees, effectively making it 360 degrees when considering the negative feedback. This setup is crucial for understanding conditions under which the system may begin to oscillate at a particular frequency, $\\omega_{1}$.\n\nFigure 10.1 depicts (a) a basic negative-feedback system, and (b) the phase shift around the loop at $\\omega_{1}$, which are referred to as \"Barkhausen's Criteria.\" These equations relate only to the loop gain (more precisely, the loop transmission) and are independent of where the input and output are located. The total phase shift around the loop at $\\omega_{1}$ is $360^{\\circ}$ because negative feedback itself introduces $180^{\\circ}$ of phase shift [Fig. 10.1(b)]. The $360^{\\circ}$ phase shift is necessary for oscillation since the feedback signal must add in phase to the original noise to allow oscillation buildup. Similarly, a loop gain of unity (or greater) is required to enable growth of the oscillation amplitude. These oscillation requirements are studied further in Chapter 15. The key point here is that the loop transmission, which can often be determined from the open-loop system, reveals the stability of the closed-loop system.\n\nIn summary, a negative-feedback system may oscillate at $\\omega_{1}$ if the phase shift around the loop at this frequency is so great that the feedback becomes positive and the loop gain is still enough to allow signal buildup. As shown in Fig. 10.2(a), the situation can be viewed as excessive loop gain at the frequency where the phase shift reaches $-180^{\\circ}$ or, equivalently, excessive phase at the frequency where the loop gain drops to unity. Thus, to avoid instability, we must minimize the total phase shift so that if $|\\beta H|=1$, then $\\angle \\beta H$ is still more positive than $-180^{\\circ}$ [Fig. 10.2(b)]. In this chapter, we assume that $\\beta$ is less than or equal to unity and does not depend on the frequency.\n\nThe frequencies at which the magnitude and phase of the loop gain are equal to unity and $-180^{\\circ}$, respectively, play a critical role in the stability and are called the \"gain crossover frequency\" and the \"phase crossover frequency,\" respectively. In a stable system, the gain crossover must occur well before the phase crossover. For brevity, we denote the gain crossover by GX and the phase crossover by PX. It is helpful to note that the gain crossover frequency is the same as the unity-gain bandwidth of the loop transmission.\n\n#### Example 10.1\n\nDiscuss whether the system depicted in Fig. 10.2(a) becomes more or less stable if the feedback is weakened, i.e., if $\\beta$ is reduced.\n\n#### Solution\n\nAs shown in Fig. 10.3, a lower $\\beta$ shifts the plot of $20 \\log |\\beta H(\\omega)|$ down and the GX to the left. Since $\\angle \\beta H(\\omega)$ does not change, the system becomes more stable. If no feedback is applied around an op amp, the circuit has no tendency to oscillate. Thus, the worst-case stability corresponds to $\\beta=1$, i.e., unity-gain feedback. For this reason, we often analyze the magnitude and phase plots for $\\beta H=H$."
},
{
    "text": "Considering the negative-feedback system depicted in Fig. 10.1(a), with a constant $\\beta$, the closed-loop transfer function is expressed as:\n\n$$\n\\frac{Y}{X}(s)=\\frac{H(s)}{1+\\beta H(s)}\n$$\n\nIt is observed that if $\\beta H\\left(s=j \\omega_{1}\\right)=-1$ at $\\omega_{1} \\neq 0$, the closed-loop gain becomes infinite, leading to the system amplifying its own noise and eventually oscillating. If the loop gain at $\\omega_{1}$, $\\beta H\\left(j \\omega_{1}\\right)$, equals -1, the circuit may oscillate at frequency $\\omega_{1}$. This condition can be described by:\n\n$$\n\\begin{align*}\n& \\left|\\beta H\\left(j \\omega_{1}\\right)\\right|=1  \\\\\n& \\angle \\beta H\\left(j \\omega_{1}\\right)=-180^{\\circ}\n\\end{align*}\n$$\n\nThe diagram labeled \"(a)\" portrays a fundamental negative-feedback system.\n\n1. **Key Components:**\n   - **Summing Junction (+):** The point where the input signal \\(X(s)\\) and the feedback signal converge. The summing junction adds the input signal and subtracts the feedback signal.\n   - **Forward Path Transfer Function \\(H(s)\\):** This component represents the system or plant being controlled, processing the signal from the summing junction to generate the output \\(Y(s)\\).\n   - **Feedback Path with Gain \\(\\beta\\):** This block takes a fraction of the output \\(Y(s)\\), scales it by the feedback factor \\(\\beta\\), and returns it to the summing junction.\n\n2. **Information or Control Flow:**\n   - The input signal \\(X(s)\\) enters the summing junction.\n   - The summing junction calculates the difference between \\(X(s)\\) and the feedback signal (scaled by \\(\\beta\\)).\n   - The resulting signal is processed by the forward path \\(H(s)\\), generating the output \\(Y(s)\\).\n   - A portion of \\(Y(s)\\) is fed back through the feedback path, scaled by \\(\\beta\\), and subtracted from the input at the summing junction.\n\n3. **Labels, Annotations, and Key Indicators:**\n   - The input and output signals are labeled as \\(X(s)\\) and \\(Y(s)\\), respectively.\n   - The feedback gain is denoted as \\(\\beta\\).\n   - The forward path transfer function is represented by \\(H(s)\\).\n\n4. **Overall System Function:**\n   - This system is designed to regulate its output \\(Y(s)\\) based on the input \\(X(s)\\) and the feedback signal. By adjusting the feedback gain \\(\\beta\\), the system can control the stability and response characteristics of the output. The negative feedback loop aids in maintaining desired system performance by reducing the error between the input and the feedback signal.\n\nThe system block diagram labeled (b) illustrates a basic negative-feedback system with a focus on phase shift around the loop at a specific frequency, \\( \\omega_{1} \\). The main components of this diagram include:\n\n1. **Summing Junction**: The point where the input signal \\( X(s) \\) and the feedback signal merge. The summing junction has two inputs: the main input signal \\( X(s) \\) and the feedback signal, which is subtracted from the main signal.\n\n2. **Transfer Function Block \\( H(s) \\)**: This block processes the signal from the summing junction. It represents the system's transfer function, which dictates how the input signal is transformed into the output signal \\( Y(s) \\).\n\n3. **Feedback Path**: This path includes a feedback transfer function \\( \\beta \\), which takes a portion of the output signal \\( Y(s) \\) and feeds it back to the summing junction. The feedback path introduces a phase shift of 180 degrees.\n\n4. **Phase Shift Indicator**: The diagram highlights that there is an additional 180-degree phase shift introduced by the system itself, making the total phase shift around the loop 360 degrees at frequency \\( \\omega_{1} \\).\n\n**Information Flow**:\n- The input signal \\( X(s) \\) enters the summing junction where it is combined with the feedback signal.\n- The resultant signal is then processed by the transfer function \\( H(s) \\), producing the output signal \\( Y(s) \\).\n- A portion of \\( Y(s) \\) is fed back through the feedback path with a gain of \\( \\beta \\) and a phase shift of 180 degrees.\n\n**Overall System Function**:\nThe primary function of this system is to maintain stability and control the amplification of signals by ensuring the total phase shift around the feedback loop is 360 degrees. This aligns with Barkhausen's Criteria for oscillation, where the magnitude of the loop gain is 1, and the phase shift is -180 degrees, effectively making it 360 degrees when considering the negative feedback. This setup is crucial for understanding conditions under which the system may begin to oscillate at a particular frequency, \\( \\omega_{1} \\).\n\nFigure 10.1 (a) Basic negative-feedback system, and (b) phase shift around the loop at $\\omega_{1}$, which are known as \"Barkhausen's Criteria.\" Note that (1) these equations relate only to the loop gain (more precisely, the loop transmission) and are independent of where the input and output are located, and (2) the total phase shift around the loop at $\\omega_{1}$ is $360^{\\circ}$ because negative feedback itself introduces $180^{\\circ}$ of phase shift [Fig. 10.1(b)]. The $360^{\\circ}$ phase shift is necessary for oscillation since the feedback signal must add in phase to the original noise to allow oscillation buildup. By the same token, a loop gain of unity (or greater) is also required to enable growth of the oscillation amplitude. These oscillation requirements are studied further in Chapter 15. The key point here is that the loop transmission, which can often be found from the open-loop system, reveals the stability of the closed-loop system.\n\nIn summary, a negative-feedback system may oscillate at $\\omega_{1}$ if (1) the phase shift around the loop at this frequency is so great that the feedback becomes positive and (2) the loop gain is still enough to allow signal buildup. Illustrated in Fig. 10.2(a), the situation can be viewed as excessive loop gain at the frequency where the phase shift reaches $-180^{\\circ}$ or, equivalently, excessive phase at the frequency where the loop gain drops to unity. Thus, to avoid instability, we must minimize the total phase shift so that if $|\\beta H|=1$, then $\\angle \\beta H$ is still more positive than $-180^{\\circ}$ [Fig. 10.2(b)]. In this chapter, we assume that $\\beta$ is less than or equal to unity and does not depend on the frequency.\n\nFigure 10.2 Bode plots of loop transmission for (a) unstable and (b) stable systems.\n\nThe frequencies at which the magnitude and phase of the loop gain are equal to unity and $-180^{\\circ}$, respectively, play a critical role in the stability and are called the \"gain crossover frequency\" and the \"phase crossover frequency,\" respectively. In a stable system, the gain crossover must occur well before the phase crossover. For the sake of brevity, we denote the gain crossover by GX and the phase crossover by PX. It is helpful to note that the gain crossover frequency is the same as the unity-gain bandwidth of the loop transmission.\n\n#### Example 10.1\n\nExplain whether the system depicted in Fig. 10.2(a) becomes more or less stable if the feedback is weakened, i.e., if $\\beta$ is reduced.\n\n#### Solution\n\nAs illustrated in Fig. 10.3, a lower $\\beta$ shifts the plot of $20 \\log |\\beta H(\\omega)|$ down and the GX to the left. Since $\\angle \\beta H(\\omega)$ does not change, the system becomes more stable. After all, if we apply no feedback around an op amp, the circuit has no tendency to oscillate. Thus, the worst-case stability corresponds to $\\beta=1$, i.e, unity-gain feedback. For this reason, we often analyze the magnitude and phase plots for $\\beta H=H$.\n\nBefore studying more specific cases, let us review a few basic rules for constructing Bode plots. A Bode plot illustrates the asymptotic behavior of the magnitude and phase of a complex function according to the magnitude of the poles and zeros. The following two rules are used. (1) The slope of the magnitude plot changes by $+20 \\mathrm{~dB} / \\mathrm{dec}$ at every zero frequency and by $-20 \\mathrm{~dB} / \\mathrm{dec}$ at every pole frequency. (2) For a pole (zero) frequency of $\\omega_{m}$, the phase begins to fall (rise) at approximately $0.1 \\omega_{m}$, experiences a change of $-45^{\\circ}\\left(+45^{\\circ}\\right)$ at $\\omega_{m}$, and approaches a change of $-90^{\\circ}\\left(+90^{\\circ}\\right)$ at approximately $10 \\omega_{m}$. The key point here is that the phase is much more significantly affected by high-frequency poles and zeros than the magnitude is.\n\nIt is also instructive to plot the location of the poles of a closed-loop system on a complex plane. Expressing each pole frequency as $s_{p}=j \\omega_{p}+\\sigma_{p}$ and noting that the impulse response of the system includes a term $\\exp \\left(j \\omega_{p}+\\sigma_{p}\\right) t$, we observe that if $s_{p}$ falls in the right half plane (RHP), i.e., if $\\sigma_{p}>0$, then the system oscillates because its time-domain response exhibits a growing exponential [Fig. 10.4(a)]. Even if $\\sigma_{p}=0$, the system sustains oscillations [Fig. 10.4(b)]. Conversely, if the poles lie in the left half plane (LHP), all time-domain exponential terms decay to zero [Fig. 10.4(c)]. In practice, we plot the location of the poles as the loop gain varies, thereby revealing how close to oscillation the system may come. Such a plot is called a \"root locus.\"\n\nWe now study a feedback system incorporating a one-pole forward amplifier. Assuming $H(s)=$ $A_{0} /\\left(1+s / \\omega_{0}\\right)$, we have from $(10.1)$\n\n$$\n\\frac{Y}{X}(s)=\\frac{\\frac{A_{0}}{1+\\beta A_{0}}}{1+\\frac{s}{\\omega_{0}\\left(1+\\beta A_{0}\\right)}}\n$$\n\nFigure 10.4 Time-domain response of a system versus the position of poles: (a) unstable with growing amplitude; (b) unstable with constant-amplitude oscillation; (c) stable.\n\nIn order to analyze the stability behavior, we plot $|\\beta H(s=j \\omega)|$ and $\\angle \\beta H(s=j \\omega)$ (Fig. 10.5), observing that a single pole cannot contribute a phase shift greater than $90^{\\circ}$ and the system is unconditionally stable for all nonnegative values of $\\beta$. Note that $\\angle \\beta H$ is independent of $\\beta$.\n\n#### Example 10.2\n\nConstruct the root locus for a one-pole system.\n\n#### Solution\n\nEquation (10.4) implies that the closed-loop system has a pole $s_{p}=-\\omega_{0}\\left(1+\\beta A_{0}\\right)$, i.e., a real-valued pole in the left half plane that moves away from the origin as the loop gain increases (Fig. 10.6)."
},
{
    "text": "Our examination in Chapter 9 reveals that op amp circuits typically feature multiple poles. In the case of two-stage op amps, for instance, each gain stage introduces a \"dominant\" pole. Consequently, it is crucial to analyze a feedback system whose core amplifier possesses more than one pole.\n\nLet's initially explore a two-pole system. For stability analysis, we plot $|\\beta H|$ and $\\angle \\beta H$ as functions of frequency. As depicted in Fig. 10.7, the magnitude starts to decline at a rate of $20 \\mathrm{~dB} / \\mathrm{dec}$ at $\\omega=\\omega_{p 1}$ and at $40 \\mathrm{~dB} / \\mathrm{dec}$ at $\\omega=\\omega_{p 2}$. Additionally, the phase begins to shift at $\\omega=0.1 \\omega_{p 1}$, reaching $-45^{\\circ}$ at $\\omega=\\omega_{p 1}$ and $-90^{\\circ}$ at $\\omega=10 \\omega_{p 1}$. It changes again at $\\omega=0.1 \\omega_{p 2}$ (if $0.1 \\omega_{p 2}>10 \\omega_{p 1}$), hitting $-135^{\\circ}$ at $\\omega=\\omega_{p 2}$ and asymptotically approaches $-180^{\\circ}$. The system remains stable since $|\\beta H|$ falls below unity at a frequency where $\\angle \\beta H<-180^{\\circ}$.\nimage_name:Figure 10.7 Bode plots of loop transmission for a two-pole system\ndescription:The graph consists of two subplots: a magnitude plot and a phase plot for a two-pole system, with the horizontal axis representing frequency \\( \\omega \\) on a logarithmic scale.\n\n**Magnitude Plot:**\n- The vertical axis is labeled \\( 20 \\log |\\beta H(\\omega)| \\), indicating the magnitude of the loop transmission in decibels (dB).\n- The plot initially shows a flat region, signifying a constant magnitude at low frequencies.\n- At the first pole \\( \\omega_{p1} \\), the magnitude decreases at a rate of \\(-20\\) dB/decade.\n- At the second pole \\( \\omega_{p2} \\), the slope steepens to \\(-40\\) dB/decade.\n- A gain crossover point is marked where the magnitude crosses 0 dB, indicating the frequency at which the gain equals unity.\n- A gray line illustrates a scenario with reduced feedback (lower \\( \\beta \\)), showing a diminished magnitude across frequencies and an earlier gain crossover point.\n\n**Phase Plot:**\n- The vertical axis represents the phase angle \\( \\angle \\beta H(\\omega) \\) in degrees.\n- Initially, the phase is 0 and begins to decrease with increasing frequency.\n- At \\( \\omega = 0.1 \\omega_{p1} \\), the phase starts changing, reaching \\(-45^{\\circ}\\) at \\( \\omega_{p1} \\) and \\(-90^{\\circ}\\) at \\( 10 \\omega_{p1} \\).\n- The phase changes again at \\( \\omega = 0.1 \\omega_{p2} \\) (if \\( 0.1 \\omega_{p2} > 10 \\omega_{p1} \\)), reaching \\(-135^{\\circ}\\) at \\( \\omega_{p2} \\) and asymptotically approaches \\(-180^{\\circ}\\).\n\n**Key Features:**\n- The system's stability is discussed based on the magnitude and phase plots. Stability is maintained as long as the magnitude drops below unity (0 dB) before the phase reaches \\(-180^{\\circ}\\).\n- Weaker feedback (shown by the gray line) results in a more stable system, as the gain crossover point shifts to a lower frequency, while the phase crossover point remains unchanged.\n\nWhat occurs if the feedback is weakened? To decrease feedback, we reduce $\\beta$, resulting in the gray magnitude plot in Fig. 10.7. As feedback weakens, the gain crossover point shifts towards the origin, while the phase crossover point stays constant, enhancing system stability. However, this stability comes at the expense of reduced feedback.\n\n#### Example 10.3\n\nCreate the root locus for a two-pole system.\n\n#### Solution\n\nExpressing the open-loop transfer function as\n\n$$\n\\begin{equation*}\nH(s)=\\frac{A_{0}}{\\left(1+\\frac{s}{\\omega_{p 1}}\\right)\\left(1+\\frac{s}{\\omega_{p 2}}\\right)} \\tag{10.5}\n\\end{equation*}\n$$\n\nwe derive\n\n$$\n\\begin{align*}\n\\frac{Y}{X}(s) & =\\frac{A_{0}}{\\left(1+\\frac{s}{\\omega_{p 1}}\\right)\\left(1+\\frac{s}{\\omega_{p 2}}\\right)+\\beta A_{0}}  \\tag{10.6}\\\\\n& =\\frac{A_{0} \\omega_{p 1} \\omega_{p 2}}{s^{2}+\\left(\\omega_{p 1}+\\omega_{p 2}\\right) s+\\left(1+\\beta A_{0}\\right) \\omega_{p 1} \\omega_{p 2}} \\tag{10.7}\n\\end{align*}\n$$\n\nThus, the closed-loop poles are determined by\n\n$$\n\\begin{equation*}\ns_{1,2}=\\frac{-\\left(\\omega_{p 1}+\\omega_{p 2}\\right) \\pm \\sqrt{\\left(\\omega_{p 1}+\\omega_{p 2}\\right)^{2}-4\\left(1+\\beta A_{0}\\right) \\omega_{p 1} \\omega_{p 2}}}{2} \\tag{10.8}\n\\end{equation*}\n$$\n\nAs anticipated, for $\\beta=0, s_{1,2}=-\\omega_{p 1},-\\omega_{p 2}$. As $\\beta$ increases, the term under the square root decreases, reaching zero for\n\n$$\n\\begin{equation*}\n\\beta_{1}=\\frac{1}{A_{0}} \\frac{\\left(\\omega_{p 1}-\\omega_{p 2}\\right)^{2}}{4 \\omega_{p 1} \\omega_{p 2}} \\tag{10.9}\n\\end{equation*}\n$$\n\nAs illustrated in Fig. 10.8, the poles start at $-\\omega_{p 1}$ and $-\\omega_{p 2}$, move towards each other, meet at $\\beta=\\beta_{1}$, and become complex for $\\beta>\\beta_{1}$. The closed-loop system remains stable as the poles do not reach the $j \\omega$ axis.\nimage_name:Figure 10.8\ndescription:**Type of Graph and Function:**\nThe graph is a root locus plot, used in control systems to analyze the paths of poles of the closed-loop transfer function as a system parameter (in this case, \\( \\beta \\)) varies.\n\n**Axes Labels and Units:**\n- The horizontal axis is labeled \\( \\sigma \\), representing the real part of the pole locations.\n- The vertical axis is labeled \\( j\\omega \\), representing the imaginary part of the pole locations.\n- The axes are dimensionless, typical for root locus plots.\n\n**Overall Behavior and Trends:**\n- The plot shows the movement of poles as \\( \\beta \\) changes.\n- Initially, poles are located at \\(-\\omega_{p1}\\) and \\(-\\omega_{p2}\\) on the real axis (\\( \\beta = 0 \\)).\n- As \\( \\beta \\) increases, poles move towards each other on the real axis.\n- At \\( \\beta = \\beta_1 \\), poles coincide at a single point on the real axis.\n- For \\( \\beta > \\beta_1 \\), poles become complex conjugates, moving off the real axis into the complex plane.\n\n**Key Features and Technical Details:**\n- Initial pole locations are marked with crosses at \\(-\\omega_{p1}\\) and \\(-\\omega_{p2}\\).\n- The transition point where poles coincide is marked as \\( \\beta = \\beta_1 \\).\n- The plot indicates that poles do not cross into the right half of the complex plane, suggesting the system remains stable as \\( \\beta \\) increases.\n\n**Annotations and Specific Data Points:**\n- The plot is annotated with \\( \\beta = 0 \\) at the starting pole locations and \\( \\beta = \\beta_1 \\) at the coincidence point.\n- Arrows indicate the direction of pole movement as \\( \\beta \\) increases, moving from the real axis into the complex plane.\n\nThe preceding calculations highlight the complexity of the algebra involved in constructing a root locus for higher-order systems. Consequently, various root locus techniques have been developed to minimize these computations.\n\nNext, we analyze a three-pole system. Fig. 10.9(a) presents the Bode plots of the magnitude and phase of the loop gain. The third pole introduces additional phase shift, potentially lowering the phase crossover frequency below the gain crossover frequency, leading to oscillation.\n\nSince the third pole also causes a steeper decline in the loop gain magnitude, one might wonder why the gain crossover frequency does not shift as significantly as the phase crossover frequency. As previously mentioned, the phase begins to change at approximately one-tenth of the pole frequency, whereas the magnitude starts to drop near the pole frequency. Hence, additional poles (and zeros) impact the phase more significantly than the magnitude.\nimage_name:Figure 10.9 (a)\ndescription:Figure 10.9 (a) displays Bode plots for a three-pole system's loop transmission, consisting of two plots: one for magnitude and one for phase, both plotted against frequency on a logarithmic scale.\n\n1. **Magnitude Plot**:\n- **Y-Axis**: Magnitude of the loop transmission, expressed in decibels as \\(20\\log|\\beta H(\\omega)|\\).\n- **X-Axis**: Frequency \\(\\omega\\) on a logarithmic scale.\n- **Behavior**: The magnitude plot shows a decreasing trend, starting flat at low frequencies and then sloping downward at each pole frequency \\(\\omega_p1\\), \\(\\omega_p2\\), and \\(\\omega_p3\\), indicating a drop in gain at these frequencies.\n- **Key Features**: The plot has three distinct slopes, each becoming steeper with additional poles, reflecting their cumulative effect on the system's gain.\n\n2. **Phase Plot**:\n- **Y-Axis**: Phase of the loop transmission, \\(\\angle \\beta H(\\omega)\\), in degrees.\n- **X-Axis**: Frequency \\(\\omega\\) on a logarithmic scale.\n- **Behavior**: The phase plot starts at 0 degrees and decreases as frequency increases, showing more pronounced drops at each pole frequency.\n- **Key Features**: Notable phase shifts occur at each pole frequency, with the phase moving from 0 to -90 degrees, then to -180 degrees and beyond as frequency increases.\n\nOverall, this Bode plot illustrates how the three-pole system affects both the magnitude and phase of the loop transmission, highlighting stability and response characteristics as frequency varies.\nimage_name:Figure 10.9 (b)\ndescription:Figure 10.9(b) shows the closed-loop response of a three-pole system, divided into two plots: the top plot is a Bode plot of the magnitude of the closed-loop gain, and the bottom plot shows the phase response.\n\n1. **Type of Graph and Function**:\n- The graph is a Bode plot, used to analyze the frequency response of a system.\n\n2. **Axes Labels and Units**:\n- The horizontal axis represents frequency () on a logarithmic scale.\n- The vertical axis of the top plot represents the magnitude of the gain, denoted as \\(|Y/X(\\omega)|\\), on a logarithmic scale.\n- The vertical axis of the bottom plot represents the phase angle \\(\\angle \\beta H(\\omega)\\) in degrees.\n\n3. **Overall Behavior and Trends**:\n- **Magnitude Plot**: The gain initially remains constant, then peaks at a certain frequency \\(\\omega_0\\), indicating resonance, and subsequently decreases sharply.\n- **Phase Plot**: The phase starts near 0 degrees, decreases gradually, and approaches -180 degrees as frequency increases.\n\n4. **Key Features and Technical Details**:\n- **Resonance Peak**: The magnitude plot shows a pronounced peak at the resonant frequency \\(\\omega_0\\), a critical feature indicating potential instability if not managed properly.\n- **Phase Crossover**: The phase plot crosses -180 degrees, a point of interest for stability analysis.\n- The gain at low frequencies is approximately \\(1/\\beta\\), indicating the system's steady-state behavior.\n\n5. **Annotations and Specific Data Points**:\n- The frequency \\(\\omega_0\\) is marked as the resonant point in the magnitude plot.\n- The phase plot includes reference lines at -90 degrees and -180 degrees to help identify phase margins and stability conditions.\n\nFigure 10.9 (a) Bode plots of loop transmission for a three-pole system and (b) closed-loop response.\n\nAs with a two-pole system, reducing the feedback factor in Fig. 10.9 results in a more stable circuit because the gain crossover moves towards the origin while the phase crossover remains constant. Consequently, a feedback amplifier designed for higher closed-loop gain tends to be more stable (for reasons discussed earlier).\n\nIt is crucial not to confuse the $\\beta H$ plots with the closed-loop frequency response, $Y / X$. For instance, consider a system with the loop response shown in Fig. 10.9(b), where the gain and phase crossover frequencies coincide. The closed-loop response, $|Y / X|$, exhibits infinite gain at $\\omega_{0}$, predicting oscillation at this frequency."
},
{
    "text": "Our examination in Chapter 9 reveals that op amp circuits typically feature multiple poles. In two-stage op amps, for instance, each gain stage introduces a \"dominant\" pole. Consequently, it is crucial to analyze a feedback system where the core amplifier has more than one pole.\n\nLet's initially explore a two-pole system. For stability analysis, we plot $|\\beta H|$ and $\\angle \\beta H$ as functions of frequency. As depicted in Fig. 10.7, the magnitude starts to decline at $20 \\mathrm{~dB} / \\mathrm{dec}$ at $\\omega=\\omega_{p1}$ and at $40 \\mathrm{~dB} / \\mathrm{dec}$ at $\\omega=\\omega_{p2}$. Additionally, the phase begins to shift at $\\omega=0.1 \\omega_{p1}$, reaching $-45^{\\circ}$ at $\\omega=\\omega_{p1}$ and $-90^{\\circ}$ at $\\omega=10 \\omega_{p1}$. It changes again at $\\omega=0.1 \\omega_{p2}$ (if $0.1 \\omega_{p2}>10 \\omega_{p1}$), reaching $-135^{\\circ}$ at $\\omega=\\omega_{p2}$ and asymptotically approaches $-180^{\\circ}$. The system remains stable because $|\\beta H|$ decreases below unity before the phase reaches $-180^{\\circ}$.\n\n**Image Description: Figure 10.7 Bode plots of loop transmission for a two-pole system**\nThe graph consists of two subplots: a magnitude plot and a phase plot for a two-pole system, with the horizontal axis representing frequency \\( \\omega \\) on a logarithmic scale.\n\n**Magnitude Plot:**\n- The vertical axis shows \\( 20 \\log |\\beta H(\\omega)| \\), indicating the loop transmission magnitude in dB.\n- The plot starts with a flat section at low frequencies, indicating constant magnitude.\n- At the first pole \\( \\omega_{p1} \\), the magnitude decreases at a rate of \\(-20\\) dB/decade.\n- At the second pole \\( \\omega_{p2} \\), the slope steepens to \\(-40\\) dB/decade.\n- A gain crossover point is marked where the magnitude crosses 0 dB, indicating unity gain.\n- A gray line represents a scenario with weaker feedback (lower \\( \\beta \\)), showing reduced magnitude and an earlier gain crossover point.\n\n**Phase Plot:**\n- The vertical axis represents the phase angle \\( \\angle \\beta H(\\omega) \\) in degrees.\n- Initially at 0, the phase decreases with increasing frequency.\n- At \\( \\omega = 0.1 \\omega_{p1} \\), the phase starts changing, reaching \\(-45^{\\circ}\\) at \\( \\omega_{p1} \\) and \\(-90^{\\circ}\\) at \\( 10 \\omega_{p1} \\).\n- The phase changes again at \\( \\omega = 0.1 \\omega_{p2} \\) (if \\( 0.1 \\omega_{p2} > 10 \\omega_{p1} \\)), reaching \\(-135^{\\circ}\\) at \\( \\omega_{p2} \\) and asymptotically approaches \\(-180^{\\circ}\\).\n\n**Key Features:**\n- The system's stability is assessed by the magnitude and phase plots. Stability is maintained as long as the magnitude drops below unity before the phase reaches \\(-180^{\\circ}\\).\n- Weaker feedback (gray line) results in a more stable system, with the gain crossover point occurring at a lower frequency while the phase crossover point remains unchanged.\n\nWhat occurs if the feedback is weakened? To decrease feedback, we reduce $\\beta$, resulting in the gray magnitude plot in Fig. 10.7. As feedback weakens, the gain crossover point shifts toward the origin, while the phase crossover point stays constant, enhancing stability. This stability, however, comes at the expense of reduced feedback.\n\n#### Example 10.3\n\nConstruct the root locus for a two-pole system.\n\n#### Solution\n\nExpressing the open-loop transfer function as\n\n$$\n\\begin{equation*}\nH(s)=\\frac{A_{0}}{\\left(1+\\frac{s}{\\omega_{p1}}\\right)\\left(1+\\frac{s}{\\omega_{p2}}\\right)} \\tag{10.5}\n\\end{equation*}\n$$\n\nwe derive\n\n$$\n\\begin{align*}\n\\frac{Y}{X}(s) & =\\frac{A_{0}}{\\left(1+\\frac{s}{\\omega_{p1}}\\right)\\left(1+\\frac{s}{\\omega_{p2}}\\right)+\\beta A_{0}}  \\tag{10.6}\\\\\n& =\\frac{A_{0} \\omega_{p1} \\omega_{p2}}{s^{2}+\\left(\\omega_{p1}+\\omega_{p2}\\right) s+\\left(1+\\beta A_{0}\\right) \\omega_{p1} \\omega_{p2}} \\tag{10.7}\n\\end{align*}\n$$\n\nThus, the closed-loop poles are\n\n$$\n\\begin{equation*}\ns_{1,2}=\\frac{-\\left(\\omega_{p1}+\\omega_{p2}\\right) \\pm \\sqrt{\\left(\\omega_{p1}+\\omega_{p2}\\right)^{2}-4\\left(1+\\beta A_{0}\\right) \\omega_{p1} \\omega_{p2}}}{2} \\tag{10.8}\n\\end{equation*}\n$$\n\nAs expected, for $\\beta=0, s_{1,2}=-\\omega_{p1},-\\omega_{p2}$. As $\\beta$ increases, the term under the square root decreases, reaching zero for\n\n$$\n\\begin{equation*}\n\\beta_{1}=\\frac{1}{A_{0}} \\frac{\\left(\\omega_{p1}-\\omega_{p2}\\right)^{2}}{4 \\omega_{p1} \\omega_{p2}} \\tag{10.9}\n\\end{equation*}\n$$\n\nAs illustrated in Fig. 10.8, the poles start at $-\\omega_{p1}$ and $-\\omega_{p2}$, move towards each other, coincide at $\\beta=\\beta_{1}$, and become complex for $\\beta>\\beta_{1}$. The closed-loop system remains stable as the poles do not reach the $j \\omega$ axis.\n\n**Image Description: Figure 10.8**\nThe graph is a root locus plot, analyzing the paths of poles of the closed-loop transfer function as the system parameter \\( \\beta \\) varies.\n\n**Axes Labels and Units:**\n- The horizontal axis is \\( \\sigma \\), representing the real part of the pole locations.\n- The vertical axis is \\( j\\omega \\), representing the imaginary part of the pole locations.\n- The axes are dimensionless, typical for root locus plots.\n\n**Overall Behavior and Trends:**\n- The plot shows pole movement as \\( \\beta \\) changes.\n- Initially, poles are at \\(-\\omega_{p1}\\) and \\(-\\omega_{p2}\\) on the real axis (\\( \\beta = 0 \\)).\n- As \\( \\beta \\) increases, poles move towards each other on the real axis.\n- At \\( \\beta = \\beta_1 \\), poles coincide at a single point.\n- For \\( \\beta > \\beta_1 \\), poles become complex conjugates, moving into the complex plane.\n\n**Key Features and Technical Details:**\n- Initial pole locations are marked with crosses at \\(-\\omega_{p1}\\) and \\(-\\omega_{p2}\\).\n- The transition point where poles coincide is marked as \\( \\beta = \\beta_1 \\).\n- The plot indicates system stability as poles do not cross into the right half of the complex plane.\n\n**Annotations and Specific Data Points:**\n- The plot is annotated with \\( \\beta = 0 \\) at starting pole locations and \\( \\beta = \\beta_1 \\) at the coincidence point.\n- Arrows indicate pole movement direction as \\( \\beta \\) increases.\n\nThe above calculations highlight the algebraic complexity involved in constructing a root locus for higher-order systems, leading to the development of various root locus techniques to simplify these computations.\n\nNext, we analyze a three-pole system. Fig. 10.9(a) shows Bode plots of the magnitude and phase of the loop gain. The third pole introduces additional phase shift, potentially lowering the phase crossover frequency below the gain crossover frequency, leading to oscillation.\n\nSince the third pole also accelerates the magnitude drop of the loop gain, one might wonder why the gain crossover frequency does not shift as significantly as the phase crossover frequency. As previously mentioned, the phase begins to change at about one-tenth of the pole frequency, whereas the magnitude starts dropping near the pole frequency. Hence, additional poles (and zeros) impact the phase more significantly than the magnitude.\n\n**Image Description: Figure 10.9 (a)**\nThis figure presents Bode plots for a three-pole system's loop transmission, consisting of magnitude and phase plots against frequency on a logarithmic scale.\n\n1. **Magnitude Plot:**\n- **Y-Axis**: Magnitude of loop transmission in dB as \\(20\\log|\\beta H(\\omega)|\\).\n- **X-Axis**: Frequency \\(\\omega\\) on a logarithmic scale.\n- **Behavior**: The plot shows a decreasing trend, starting flat at low frequencies and sloping downward at each pole frequency \\(\\omega_p1\\), \\(\\omega_p2\\), and \\(\\omega_p3\\).\n- **Key Features**: Three distinct slopes indicate the cumulative effect of the poles on gain.\n\n2. **Phase Plot:**\n- **Y-Axis**: Phase angle \\(\\angle \\beta H(\\omega)\\) in degrees.\n- **X-Axis**: Frequency \\(\\omega\\) on a logarithmic scale.\n- **Behavior**: The phase starts at 0 degrees and decreases, showing significant drops at each pole frequency.\n- **Key Features**: Phase shifts at each pole frequency, moving from 0 to -90 degrees, then to -180 degrees and beyond.\n\nOverall, the Bode plot illustrates how the three-pole system affects loop transmission magnitude and phase, highlighting stability and response characteristics.\n\n**Image Description: Figure 10.9 (b)**\nThis figure shows the closed-loop response of a three-pole system, divided into two plots: the top plot for magnitude and the bottom plot for phase.\n\n1. **Type of Graph and Function:**\n- A Bode plot analyzing the system's frequency response.\n\n2. **Axes Labels and Units:**\n- Horizontal axis: Frequency () on a logarithmic scale.\n- Top plot vertical axis: Magnitude of gain \\(|Y/X(\\omega)|\\) on a logarithmic scale.\n- Bottom plot vertical axis: Phase angle \\(\\angle \\beta H(\\omega)\\) in degrees.\n\n3. **Overall Behavior and Trends:**\n- **Magnitude Plot**: Gain remains constant initially, peaks at \\(\\omega_0\\), indicating resonance, then decreases sharply.\n- **Phase Plot**: Phase starts near 0 degrees, decreases gradually, and approaches -180 degrees.\n\n4. **Key Features and Technical Details:**\n- **Resonance Peak**: A pronounced peak at \\(\\omega_0\\) in the magnitude plot, indicating potential instability if not managed.\n- **Phase Crossover**: The phase plot crosses -180 degrees, a critical point for stability analysis.\n- Low-frequency gain is approximately \\(1/\\beta\\), indicating steady-state behavior.\n\n5. **Annotations and Specific Data Points:**\n- \\(\\omega_0\\) is marked as the resonant frequency in the magnitude plot.\n- Phase plot includes reference lines at -90 degrees and -180 degrees for phase margin and stability analysis.\n\nFigure 10.9 (a) Bode plots of loop transmission for a three-pole system and (b) closed-loop response.\n\nAs with a two-pole system, reducing the feedback factor in Fig. 10.9 results in greater stability, as the gain crossover moves toward the origin while the phase crossover remains constant. Consequently, a feedback amplifier designed for higher closed-loop gain tends to be more stable.\n\nIt is crucial to distinguish between the $\\beta H$ plots and the closed-loop frequency response, $Y / X$. For instance, consider a system with the loop response shown in Fig. 10.9(b), where gain and phase crossover frequencies coincide. The closed-loop response, $|Y / X|$, exhibits infinite gain at $\\omega_{0}$, predicting oscillation at this frequency."
},
{
    "text": "Our analysis in Chapter 9 reveals that operational amplifier circuits typically feature multiple poles. In the case of two-stage op amps, for instance, each stage introduces a \"dominant\" pole. Consequently, it is crucial to examine feedback systems where the core amplifier has more than one pole.\n\nLet's start by analyzing a two-pole system. For stability assessment, we plot $|\\beta H|$ and $\\angle \\beta H$ as functions of frequency. As depicted in Fig. 10.7, the magnitude begins to decline at a rate of $20 \\mathrm{~dB} / \\mathrm{dec}$ at $\\omega=\\omega_{p 1}$ and at $40 \\mathrm{~dB} / \\mathrm{dec}$ at $\\omega=\\omega_{p 2}$. Additionally, the phase starts changing at $\\omega=0.1 \\omega_{p 1}$, reaches $-45^{\\circ}$ at $\\omega=\\omega_{p 1}$ and $-90^{\\circ}$ at $\\omega=10 \\omega_{p 1}$, begins to change again at $\\omega=0.1 \\omega_{p 2}$ (if $0.1 \\omega_{p 2}>10 \\omega_{p 1}$), reaches $-135^{\\circ}$ at $\\omega=\\omega_{p 2}$, and asymptotically approaches $-180^{\\circ}$. The system is deemed stable because $|\\beta H|$ falls below unity at a frequency where $\\angle \\beta H<-180^{\\circ}$.\nimage_name: Figure 10.7 Bode plots of loop transmission for a two-pole system\ndescription: This Bode plot consists of two subplots: one for magnitude and one for phase, representing a two-pole system. Both plots use a logarithmic frequency scale on the horizontal axis.\n\n**Magnitude Plot:**\n- The vertical axis shows $20 \\log |\\beta H(\\omega)|$, indicating the loop transmission magnitude in decibels (dB).\n- Initially, the plot shows a constant magnitude at low frequencies.\n- At the first pole $\\omega_{p1}$, the magnitude decreases at a slope of $-20$ dB/decade.\n- At the second pole $\\omega_{p2}$, the slope steepens to $-40$ dB/decade.\n- A gain crossover point is indicated where the magnitude crosses 0 dB, marking the frequency at which the gain equals unity.\n- A gray line represents a scenario with reduced feedback (lower $\\beta$), showing a lower magnitude across frequencies and an earlier gain crossover.\n\n**Phase Plot:**\n- The vertical axis measures the phase angle $\\angle \\beta H(\\omega)$ in degrees.\n- The phase starts at 0 and decreases with increasing frequency.\n- At $\\omega = 0.1 \\omega_{p1}$, the phase begins to change, reaching $-45^{\\circ}$ at $\\omega_{p1}$ and $-90^{\\circ}$ at $10 \\omega_{p1}$.\n- The phase starts changing again at $\\omega = 0.1 \\omega_{p2}$ (if $0.1 \\omega_{p2} > 10 \\omega_{p1}$), reaching $-135^{\\circ}$ at $\\omega_{p2}$ and asymptotically approaches $-180^{\\circ}$.\n\n**Key Features:**\n- Stability is evaluated based on the magnitude and phase plots. The system remains stable as long as the magnitude drops below unity before the phase reaches $-180^{\\circ}$.\n- Weaker feedback (gray line) results in a more stable system, as the gain crossover occurs at a lower frequency, while the phase crossover remains unchanged.\n\nWhat occurs if the feedback is weakened? To decrease feedback, we reduce $\\beta$, resulting in the gray magnitude plot in Fig. 10.7. As feedback weakens, the gain crossover point shifts towards the origin, while the phase crossover point stays constant, enhancing system stability. However, this stability is achieved at the expense of reduced feedback.\n\n#### Example 10.3\n\nConstruct the root locus for a two-pole system.\n\n#### Solution\n\nExpressing the open-loop transfer function as\n\n$$\n\\begin{equation*}\nH(s)=\\frac{A_{0}}{\\left(1+\\frac{s}{\\omega_{p 1}}\\right)\\left(1+\\frac{s}{\\omega_{p 2}}\\right)} \\tag{10.5}\n\\end{equation*}\n$$\n\nwe derive\n\n$$\n\\begin{align*}\n\\frac{Y}{X}(s) & =\\frac{A_{0}}{\\left(1+\\frac{s}{\\omega_{p 1}}\\right)\\left(1+\\frac{s}{\\omega_{p 2}}\\right)+\\beta A_{0}}  \\tag{10.6}\\\\\n& =\\frac{A_{0} \\omega_{p 1} \\omega_{p 2}}{s^{2}+\\left(\\omega_{p 1}+\\omega_{p 2}\\right) s+\\left(1+\\beta A_{0}\\right) \\omega_{p 1} \\omega_{p 2}} \\tag{10.7}\n\\end{align*}\n$$\n\nThus, the closed-loop poles are given by\n\n$$\n\\begin{equation*}\ns_{1,2}=\\frac{-\\left(\\omega_{p 1}+\\omega_{p 2}\\right) \\pm \\sqrt{\\left(\\omega_{p 1}+\\omega_{p 2}\\right)^{2}-4\\left(1+\\beta A_{0}\\right) \\omega_{p 1} \\omega_{p 2}}}{2} \\tag{10.8}\n\\end{equation*}\n$$\n\nAs expected, for $\\beta=0, s_{1,2}=-\\omega_{p 1},-\\omega_{p 2}$. As $\\beta$ increases, the term under the square root decreases, reaching zero for\n\n$$\n\\begin{equation*}\n\\beta_{1}=\\frac{1}{A_{0}} \\frac{\\left(\\omega_{p 1}-\\omega_{p 2}\\right)^{2}}{4 \\omega_{p 1} \\omega_{p 2}} \\tag{10.9}\n\\end{equation*}\n$$\n\nAs illustrated in Fig. 10.8, the poles start at $-\\omega_{p 1}$ and $-\\omega_{p 2}$, move towards each other, meet at $\\beta=\\beta_{1}$, and become complex for $\\beta>\\beta_{1}$. The closed-loop system remains stable since the poles do not reach the $j \\omega$ axis.\nimage_name: Figure 10.8\ndescription:**Type of Graph and Function:**\nThis graph is a root locus plot, used in control systems to analyze the paths of poles of the closed-loop transfer function as a system parameter (here, $\\beta$) varies.\n\n**Axes Labels and Units:**\n- The horizontal axis is labeled $\\sigma$, representing the real part of the pole locations.\n- The vertical axis is labeled $j\\omega$, representing the imaginary part of the pole locations.\n- The axes are dimensionless, typical for root locus plots.\n\n**Overall Behavior and Trends:**\n- The plot shows pole movement as $\\beta$ changes.\n- Initially, poles are at $-\\omega_{p1}$ and $-\\omega_{p2}$ on the real axis ($\\beta = 0$).\n- As $\\beta$ increases, poles move towards each other on the real axis.\n- At $\\beta = \\beta_1$, poles coincide at a single point.\n- For $\\beta > \\beta_1$, poles become complex conjugates, moving into the complex plane.\n\n**Key Features and Technical Details:**\n- Initial pole locations are marked with crosses at $-\\omega_{p1}$ and $-\\omega_{p2}$.\n- The coincidence point is marked as $\\beta = \\beta_1$.\n- The plot indicates that poles do not cross into the right half-plane, suggesting stability as $\\beta$ increases.\n\n**Annotations and Specific Data Points:**\n- The plot is annotated with $\\beta = 0$ at starting poles and $\\beta = \\beta_1$ at the coincidence point.\n- Arrows indicate pole movement direction as $\\beta$ increases, moving from the real axis into the complex plane.\n\nThe preceding calculations highlight the algebraic complexity involved in constructing a root locus for higher-order systems. Consequently, various root locus techniques have been developed to simplify these computations.\n\nNext, we examine a three-pole system. Fig. 10.9(a) presents Bode plots of the magnitude and phase of the loop gain. The third pole introduces additional phase shift, potentially lowering the phase crossover frequency below the gain crossover frequency, leading to oscillation.\n\nSince the third pole also causes a steeper decline in the loop gain magnitude, one might wonder why the gain crossover frequency does not shift as significantly as the phase crossover. As previously mentioned, the phase begins to change around one-tenth of the pole frequency, whereas the magnitude starts dropping near the pole frequency. Thus, additional poles (and zeros) have a more substantial impact on the phase than on the magnitude.\nimage_name: Figure 10.9 (a)\ndescription: Figure 10.9 (a) displays Bode plots for the loop transmission of a three-pole system. It includes two plots: one for magnitude and one for phase, both against frequency on a logarithmic scale.\n\n1. **Magnitude Plot**:\n- **Y-Axis**: Magnitude of the loop transmission, $20\\log|\\beta H(\\omega)|$, in decibels.\n- **X-Axis**: Frequency $\\omega$ on a logarithmic scale.\n- **Behavior**: The plot shows a decreasing trend, starting flat at low frequencies and sloping downward at each pole frequency $\\omega_p1$, $\\omega_p2$, and $\\omega_p3$.\n- **Key Features**: Three distinct slopes indicate the cumulative effect of the poles on the system's gain.\n\n2. **Phase Plot**:\n- **Y-Axis**: Phase of the loop transmission, $\\angle \\beta H(\\omega)$, in degrees.\n- **X-Axis**: Frequency $\\omega$ on a logarithmic scale.\n- **Behavior**: The phase starts at 0 degrees and decreases with increasing frequency, showing more pronounced drops at each pole frequency.\n- **Key Features**: Phase shifts occur at each pole frequency, moving from 0 to -90 degrees, then to -180 degrees and beyond.\n\nOverall, this Bode plot illustrates how the three-pole system affects both the magnitude and phase of the loop transmission, highlighting stability and response characteristics as frequency varies.\nimage_name: Figure 10.9 (b)\ndescription: Figure 10.9(b) shows the closed-loop response of a three-pole system, featuring two plots: a Bode plot for the magnitude of the closed-loop gain and a phase response plot.\n\n1. **Type of Graph and Function**:\n- The graph is a Bode plot for analyzing the frequency response of a system.\n\n2. **Axes Labels and Units**:\n- The horizontal axis represents frequency $\\omega$ on a logarithmic scale.\n- The top plot's vertical axis shows the magnitude of the gain, $|Y/X(\\omega)|$, on a logarithmic scale.\n- The bottom plot's vertical axis represents the phase angle $\\angle \\beta H(\\omega)$ in degrees.\n\n3. **Overall Behavior and Trends**:\n- **Magnitude Plot**: The gain remains constant initially, peaks at $\\omega_0$, indicating resonance, then decreases sharply.\n- **Phase Plot**: The phase starts near 0 degrees, decreases gradually, and approaches -180 degrees with increasing frequency.\n\n4. **Key Features and Technical Details**:\n- **Resonance Peak**: The magnitude plot shows a peak at the resonant frequency $\\omega_0$, indicating potential instability if not managed.\n- **Phase Crossover**: The phase plot crosses -180 degrees, a critical point for stability analysis.\n- The gain at low frequencies is approximately $1/\\beta$, indicating steady-state behavior.\n\n5. **Annotations and Specific Data Points**:\n- The resonant frequency $\\omega_0$ is marked in the magnitude plot.\n- The phase plot includes reference lines at -90 degrees and -180 degrees for phase margin and stability analysis.\n\nFigure 10.9 (a) Bode plots of loop transmission for a three-pole system and (b) closed-loop response.\n\nSimilar to a two-pole system, if the feedback factor in Fig. 10.9 decreases, the circuit becomes more stable as the gain crossover shifts towards the origin while the phase crossover remains constant. Consequently, a feedback amplifier designed for higher closed-loop gain tends to be more stable (for reasons discussed earlier).\n\nIt is crucial not to confuse the $\\beta H$ plots with the closed-loop frequency response, $Y / X$. For instance, consider a system with the loop response shown in Fig. 10.9(b), where the gain and phase crossover frequencies coincide. The closed-loop response, $|Y / X|$, exhibits infinite gain at $\\omega_{0}$, predicting oscillation at this frequency."
},
{
    "text": "Our analysis in Chapter 9 reveals that operational amplifier circuits typically feature multiple poles. In two-stage op amps, for instance, each gain stage introduces a \"dominant\" pole. Consequently, it is crucial to examine feedback systems where the core amplifier has more than one pole.\n\nLet's initially focus on a two-pole system. For stability analysis, we plot $|\\beta H|$ and $\\angle \\beta H$ as functions of frequency. As depicted in Fig. 10.7, the magnitude starts to decline at $20 \\mathrm{~dB} / \\mathrm{dec}$ at $\\omega=\\omega_{p 1}$ and at $40 \\mathrm{~dB} / \\mathrm{dec}$ at $\\omega=\\omega_{p 2}$. The phase begins to shift at $\\omega=0.1 \\omega_{p 1}$, reaching $-45^{\\circ}$ at $\\omega=\\omega_{p 1}$ and $-90^{\\circ}$ at $\\omega=10 \\omega_{p 1}$. It changes again at $\\omega=0.1 \\omega_{p 2}$ (if $0.1 \\omega_{p 2}>10 \\omega_{p 1}$), hitting $-135^{\\circ}$ at $\\omega=\\omega_{p 2}$ and asymptotically approaching $-180^{\\circ}$. The system remains stable since $|\\beta H|$ falls below unity before the phase reaches $-180^{\\circ}$.\n\nimage_name: Figure 10.7 Bode plots of loop transmission for a two-pole system\ndescription: This Bode plot consists of two subplots: a magnitude plot and a phase plot for a two-pole system, with a logarithmic frequency axis.\n\n**Magnitude Plot:**\n- The vertical axis shows $20 \\log |\\beta H(\\omega)|$ in dB.\n- The plot initially flattens, indicating constant magnitude at low frequencies.\n- At $\\omega_{p1}$, the magnitude decreases at $-20$ dB/decade.\n- At $\\omega_{p2}$, the slope steepens to $-40$ dB/decade.\n- A gain crossover point is noted where the magnitude hits 0 dB.\n- A gray line represents a scenario with reduced feedback (lower $\\beta$), showing decreased magnitude and an earlier gain crossover.\n\n**Phase Plot:**\n- The vertical axis indicates the phase angle $\\angle \\beta H(\\omega)$ in degrees.\n- Starting at 0, the phase decreases with increasing frequency.\n- At $\\omega = 0.1 \\omega_{p1}$, the phase begins to change, reaching $-45^{\\circ}$ at $\\omega_{p1}$ and $-90^{\\circ}$ at $10 \\omega_{p1}$.\n- Further change occurs at $\\omega = 0.1 \\omega_{p2}$ (if $0.1 \\omega_{p2} > 10 \\omega_{p1}$), reaching $-135^{\\circ}$ at $\\omega_{p2}$ and asymptotically approaching $-180^{\\circ}$.\n\n**Key Features:**\n- Stability is assessed based on the magnitude and phase plots. The system is stable if the magnitude drops below unity before the phase reaches $-180^{\\circ}$.\n- Reduced feedback (gray line) enhances stability by lowering the gain crossover frequency, while the phase crossover point remains unchanged.\n\nWhat occurs when feedback is weakened? To diminish feedback, we lower $\\beta$, resulting in the gray magnitude plot in Fig. 10.7. As feedback weakens, the gain crossover point shifts towards the origin, while the phase crossover point stays constant, thus enhancing stability. However, this stability comes at the expense of reduced feedback.\n\n#### Example 10.3\n\nCreate the root locus for a two-pole system.\n\n#### Solution\n\nExpressing the open-loop transfer function as\n\n$$\n\\begin{equation*}\nH(s)=\\frac{A_{0}}{\\left(1+\\frac{s}{\\omega_{p 1}}\\right)\\left(1+\\frac{s}{\\omega_{p 2}}\\right)} \\tag{10.5}\n\\end{equation*}\n$$\n\nwe derive\n\n$$\n\\begin{align*}\n\\frac{Y}{X}(s) & =\\frac{A_{0}}{\\left(1+\\frac{s}{\\omega_{p 1}}\\right)\\left(1+\\frac{s}{\\omega_{p 2}}\\right)+\\beta A_{0}}  \\tag{10.6}\\\\\n& =\\frac{A_{0} \\omega_{p 1} \\omega_{p 2}}{s^{2}+\\left(\\omega_{p 1}+\\omega_{p 2}\\right) s+\\left(1+\\beta A_{0}\\right) \\omega_{p 1} \\omega_{p 2}} \\tag{10.7}\n\\end{align*}\n$$\n\nThus, the closed-loop poles are\n\n$$\n\\begin{equation*}\ns_{1,2}=\\frac{-\\left(\\omega_{p 1}+\\omega_{p 2}\\right) \\pm \\sqrt{\\left(\\omega_{p 1}+\\omega_{p 2}\\right)^{2}-4\\left(1+\\beta A_{0}\\right) \\omega_{p 1} \\omega_{p 2}}}{2} \\tag{10.8}\n\\end{equation*}\n$$\n\nAs anticipated, for $\\beta=0$, $s_{1,2}=-\\omega_{p 1},-\\omega_{p 2}$. As $\\beta$ rises, the term under the square root decreases, reaching zero at\n\n$$\n\\begin{equation*}\n\\beta_{1}=\\frac{1}{A_{0}} \\frac{\\left(\\omega_{p 1}-\\omega_{p 2}\\right)^{2}}{4 \\omega_{p 1} \\omega_{p 2}} \\tag{10.9}\n\\end{equation*}\n$$\n\nAs illustrated in Fig. 10.8, the poles start at $-\\omega_{p 1}$ and $-\\omega_{p 2}$, move towards each other, meet at $\\beta=\\beta_{1}$, and become complex for $\\beta>\\beta_{1}$. The closed-loop system remains stable as the poles do not reach the $j \\omega$ axis.\n\nimage_name: Figure 10.8\ndescription:**Type of Graph and Function:**\nThis is a root locus plot, analyzing the paths of poles of the closed-loop transfer function as the system parameter $\\beta$ varies.\n\n**Axes Labels and Units:**\n- The horizontal axis is $\\sigma$, representing the real part of the pole locations.\n- The vertical axis is $j\\omega$, representing the imaginary part of the pole locations.\n- Axes are dimensionless, typical for root locus plots.\n\n**Overall Behavior and Trends:**\n- The plot shows pole movement with varying $\\beta$.\n- Initially, poles are at $-\\omega_{p1}$ and $-\\omega_{p2}$ on the real axis ($\\beta = 0$).\n- As $\\beta$ increases, poles move towards each other on the real axis.\n- At $\\beta = \\beta_1$, poles coincide at a single point.\n- For $\\beta > \\beta_1$, poles become complex conjugates, moving into the complex plane.\n\n**Key Features and Technical Details:**\n- Initial pole locations are marked with crosses at $-\\omega_{p1}$ and $-\\omega_{p2}$.\n- The coincidence point is marked as $\\beta = \\beta_1$.\n- Poles do not enter the right half-plane, indicating stability.\n\n**Annotations and Specific Data Points:**\n- Annotations include $\\beta = 0$ at starting poles and $\\beta = \\beta_1$ at the coincidence point.\n- Arrows indicate pole movement direction with increasing $\\beta$.\n\nThe above calculations highlight the algebraic complexity involved in constructing root loci for higher-order systems, leading to the development of various root locus techniques to simplify these computations.\n\nNext, we examine a three-pole system. Fig. 10.9(a) displays Bode plots of the loop gain's magnitude and phase. The third pole introduces additional phase shift, potentially lowering the phase crossover frequency below the gain crossover, leading to oscillation.\n\nSince the third pole also steepens the magnitude decline, one might wonder why the gain crossover shifts less than the phase crossover. As previously noted, the phase starts changing at about one-tenth of the pole frequency, while the magnitude drops near the pole frequency. Hence, additional poles (and zeros) impact the phase more significantly than the magnitude.\n\nimage_name: Figure 10.9 (a)\ndescription: Figure 10.9(a) presents Bode plots for a three-pole system's loop transmission, featuring a magnitude plot and a phase plot against a logarithmic frequency scale.\n\n1. **Magnitude Plot**:\n- **Y-Axis**: Magnitude of loop transmission in dB as $20\\log|\\beta H(\\omega)|$.\n- **X-Axis**: Frequency $\\omega$ on a logarithmic scale.\n- **Behavior**: The plot shows a decreasing trend, starting flat at low frequencies and sloping downward at each pole frequency $\\omega_p1$, $\\omega_p2$, and $\\omega_p3$.\n- **Key Features**: Three distinct slopes reflect the cumulative effect of the poles on gain.\n\n2. **Phase Plot**:\n- **Y-Axis**: Phase of loop transmission, $\\angle \\beta H(\\omega)$, in degrees.\n- **X-Axis**: Frequency $\\omega$ on a logarithmic scale.\n- **Behavior**: The phase decreases from 0 degrees, with notable shifts at each pole frequency.\n- **Key Features**: Phase shifts at each pole frequency, moving from 0 to -90 degrees, then to -180 degrees and beyond.\n\nOverall, these plots illustrate the three-pole system's impact on loop transmission magnitude and phase, highlighting stability and response characteristics.\n\nimage_name: Figure 10.9 (b)\ndescription: Figure 10.9(b) shows the closed-loop response of a three-pole system, divided into a magnitude plot and a phase plot.\n\n1. **Type of Graph and Function**:\n- A Bode plot analyzing the system's frequency response.\n\n2. **Axes Labels and Units**:\n- Horizontal axis: Frequency $\\omega$ on a logarithmic scale.\n- Top plot vertical axis: Magnitude of gain, $|Y/X(\\omega)|$, on a logarithmic scale.\n- Bottom plot vertical axis: Phase angle $\\angle \\beta H(\\omega)$ in degrees.\n\n3. **Overall Behavior and Trends**:\n- **Magnitude Plot**: Gain remains constant initially, peaks at $\\omega_0$, then decreases sharply.\n- **Phase Plot**: Phase starts near 0 degrees, decreases gradually, approaching -180 degrees.\n\n4. **Key Features and Technical Details**:\n- **Resonance Peak**: A pronounced peak at $\\omega_0$ indicates potential instability.\n- **Phase Crossover**: The phase crosses -180 degrees, a critical stability point.\n- Low-frequency gain is approximately $1/\\beta$, indicating steady-state behavior.\n\n5. **Annotations and Specific Data Points**:\n- $\\omega_0$ marked as the resonant frequency in the magnitude plot.\n- Phase plot includes reference lines at -90 degrees and -180 degrees for clarity.\n\nFigure 10.9 (a) Bode plots of loop transmission for a three-pole system and (b) closed-loop response.\n\nSimilar to the two-pole system, reducing the feedback factor in Fig. 10.9 enhances stability by shifting the gain crossover towards the origin while keeping the phase crossover constant. Consequently, a feedback amplifier designed for higher closed-loop gain tends to be more stable.\n\nIt's essential to differentiate between $\\beta H$ plots and the closed-loop frequency response, $Y / X$. For instance, consider a system with the loop response shown in Fig. 10.9(b), where gain and phase crossover frequencies coincide. The closed-loop response, $|Y / X|$, shows infinite gain at $\\omega_{0}$, oscillation at this frequency."
},
{
    "text": "Our analysis of operational amplifiers in Chapter 9 reveals that these circuits typically feature multiple poles. In the case of two-stage op amps, for instance, each amplification stage introduces a \"dominant\" pole. Consequently, it is crucial to examine a feedback system whose core amplifier possesses more than one pole.\n\nLet's initially explore a two-pole system. For stability analysis, we plot $|\\beta H|$ and $\\angle \\beta H$ as functions of frequency. As depicted in Fig. 10.7, the magnitude starts to decline at a rate of $20 \\mathrm{~dB} / \\mathrm{dec}$ at $\\omega=\\omega_{p 1}$ and at $40 \\mathrm{~dB} / \\mathrm{dec}$ at $\\omega=\\omega_{p 2}$. Additionally, the phase begins to shift at $\\omega=0.1 \\omega_{p 1}$, reaches $-45^{\\circ}$ at $\\omega=\\omega_{p 1}$, and $-90^{\\circ}$ at $\\omega=10 \\omega_{p 1}$. It starts changing again at $\\omega=0.1 \\omega_{p 2}$ (if $0.1 \\omega_{p 2}>10 \\omega_{p 1}$), reaches $-135^{\\circ}$ at $\\omega=\\omega_{p 2}$, and asymptotically approaches $-180^{\\circ}$. The system remains stable because $|\\beta H|$ falls below unity at a frequency where $\\angle \\beta H<-180^{\\circ}$.\n\n**Figure Description: Figure 10.7 Bode plots of loop transmission for a two-pole system**\nThe graph consists of two subplots: a magnitude plot and a phase plot for a two-pole system. Both plots use a logarithmic frequency scale on the horizontal axis.\n\n**Magnitude Plot:**\n- The vertical axis shows $20 \\log |\\beta H(\\omega)|$ in decibels (dB).\n- The plot initially remains flat, indicating constant magnitude at low frequencies.\n- At the first pole $\\omega_{p1}$, the magnitude decreases at $-20$ dB/decade.\n- At the second pole $\\omega_{p2}$, the slope steepens to $-40$ dB/decade.\n- A gain crossover point is indicated where the magnitude crosses 0 dB, signifying unity gain.\n- A gray line represents a scenario with reduced feedback (lower $\\beta$), showing decreased magnitude and an earlier gain crossover.\n\n**Phase Plot:**\n- The vertical axis displays the phase angle $\\angle \\beta H(\\omega)$ in degrees.\n- Initially at 0, the phase decreases with increasing frequency.\n- At $\\omega = 0.1 \\omega_{p1}$, the phase begins to change, reaching $-45^{\\circ}$ at $\\omega_{p1}$ and $-90^{\\circ}$ at $10 \\omega_{p1}$.\n- The phase shifts again at $\\omega = 0.1 \\omega_{p2}$ (if $0.1 \\omega_{p2} > 10 \\omega_{p1}$), reaching $-135^{\\circ}$ at $\\omega_{p2}$ and asymptotically approaching $-180^{\\circ}$.\n\n**Key Features:**\n- Stability is assessed by examining the magnitude and phase plots. The system is stable if the magnitude drops below unity before the phase reaches $-180^{\\circ}$.\n- Weaker feedback (gray line) results in greater stability, as the gain crossover occurs at a lower frequency while the phase crossover remains unchanged.\n\nWhat occurs when feedback is weakened? To decrease feedback, we reduce $\\beta$, resulting in the gray magnitude plot in Fig. 10.7. As feedback weakens, the gain crossover point shifts towards the origin, while the phase crossover point stays constant, enhancing stability. However, this stability comes at the expense of reduced feedback.\n\n#### Example 10.3\n\nConstruct the root locus for a two-pole system.\n\n#### Solution\n\nExpressing the open-loop transfer function as\n\n$$\n\\begin{equation*}\nH(s)=\\frac{A_{0}}{\\left(1+\\frac{s}{\\omega_{p 1}}\\right)\\left(1+\\frac{s}{\\omega_{p 2}}\\right)} \\tag{10.5}\n\\end{equation*}\n$$\n\nwe derive\n\n$$\n\\begin{align*}\n\\frac{Y}{X}(s) & =\\frac{A_{0}}{\\left(1+\\frac{s}{\\omega_{p 1}}\\right)\\left(1+\\frac{s}{\\omega_{p 2}}\\right)+\\beta A_{0}}  \\tag{10.6}\\\\\n& =\\frac{A_{0} \\omega_{p 1} \\omega_{p 2}}{s^{2}+\\left(\\omega_{p 1}+\\omega_{p 2}\\right) s+\\left(1+\\beta A_{0}\\right) \\omega_{p 1} \\omega_{p 2}} \\tag{10.7}\n\\end{align*}\n$$\n\nThus, the closed-loop poles are\n\n$$\n\\begin{equation*}\ns_{1,2}=\\frac{-\\left(\\omega_{p 1}+\\omega_{p 2}\\right) \\pm \\sqrt{\\left(\\omega_{p 1}+\\omega_{p 2}\\right)^{2}-4\\left(1+\\beta A_{0}\\right) \\omega_{p 1} \\omega_{p 2}}}{2} \\tag{10.8}\n\\end{equation*}\n$$\n\nAs expected, for $\\beta=0, s_{1,2}=-\\omega_{p 1},-\\omega_{p 2}$. As $\\beta$ increases, the term under the square root decreases, reaching zero for\n\n$$\n\\begin{equation*}\n\\beta_{1}=\\frac{1}{A_{0}} \\frac{\\left(\\omega_{p 1}-\\omega_{p 2}\\right)^{2}}{4 \\omega_{p 1} \\omega_{p 2}} \\tag{10.9}\n\\end{equation*}\n$$\n\nAs illustrated in Fig. 10.8, the poles start at $-\\omega_{p 1}$ and $-\\omega_{p 2}$, move towards each other, coincide at $\\beta=\\beta_{1}$, and become complex for $\\beta>\\beta_{1}$. The closed-loop system remains stable as the poles do not reach the $j \\omega$ axis.\n\n**Figure Description: Figure 10.8**\n**Type of Graph and Function:**\nThe graph is a root locus plot, analyzing the paths of poles of the closed-loop transfer function as the parameter $\\beta$ varies.\n\n**Axes Labels and Units:**\n- The horizontal axis is $\\sigma$, representing the real part of the pole locations.\n- The vertical axis is $j\\omega$, representing the imaginary part of the pole locations.\n- The axes are dimensionless, typical for root locus plots.\n\n**Overall Behavior and Trends:**\n- The plot shows pole movement as $\\beta$ changes.\n- Initially, poles are at $-\\omega_{p1}$ and $-\\omega_{p2}$ on the real axis ($\\beta = 0$).\n- As $\\beta$ increases, poles move towards each other on the real axis.\n- At $\\beta = \\beta_1$, poles coincide at a single point.\n- For $\\beta > \\beta_1$, poles become complex conjugates, moving into the complex plane.\n\n**Key Features and Technical Details:**\n- Initial pole locations are marked with crosses at $-\\omega_{p1}$ and $-\\omega_{p2}$.\n- The transition point is marked as $\\beta = \\beta_1$.\n- Poles do not cross into the right half-plane, indicating stability.\n\n**Annotations and Specific Data Points:**\n- Annotations include $\\beta = 0$ at starting poles and $\\beta = \\beta_1$ at the coincidence point.\n- Arrows indicate pole movement direction as $\\beta$ increases.\n\nThe above calculations highlight the algebraic complexity involved in constructing a root locus for higher-order systems, leading to the development of various techniques to simplify these computations.\n\nNext, we examine a three-pole system. Fig. 10.9(a) presents Bode plots of the magnitude and phase of the loop gain. The third pole introduces additional phase shift, potentially lowering the phase crossover frequency below the gain crossover frequency, leading to oscillation.\n\nSince the third pole also causes a steeper decline in the loop gain magnitude, one might wonder why the gain crossover frequency changes less than the phase crossover frequency. As previously noted, the phase begins to change around one-tenth of the pole frequency, while the magnitude starts dropping near the pole frequency. Hence, additional poles (and zeros) significantly impact the phase more than the magnitude.\n\n**Figure Description: Figure 10.9 (a)**\nFigure 10.9(a) displays Bode plots for a three-pole system's loop transmission, consisting of magnitude and phase plots against frequency on a logarithmic scale.\n\n1. **Magnitude Plot:**\n- **Y-Axis:** Magnitude of the loop transmission in decibels, $20\\log|\\beta H(\\omega)|$.\n- **X-Axis:** Frequency $\\omega$ on a logarithmic scale.\n- **Behavior:** The plot shows a decreasing trend, starting flat at low frequencies and sloping downward at each pole frequency $\\omega_p1$, $\\omega_p2$, and $\\omega_p3$.\n- **Key Features:** Three distinct slopes reflect the cumulative effect of the poles on gain.\n\n2. **Phase Plot:**\n- **Y-Axis:** Phase of the loop transmission, $\\angle \\beta H(\\omega)$, in degrees.\n- **X-Axis:** Frequency $\\omega$ on a logarithmic scale.\n- **Behavior:** The phase starts at 0 degrees and decreases, showing significant drops at each pole frequency.\n- **Key Features:** Phase shifts at each pole frequency, moving from 0 to -90 degrees, then to -180 degrees and beyond.\n\nOverall, these Bode plots illustrate the impact of the three-pole system on loop transmission magnitude and phase, highlighting stability and response characteristics.\n\n**Figure Description: Figure 10.9 (b)**\nFigure 10.9(b) shows the closed-loop response of a three-pole system, featuring a Bode plot with a magnitude plot and a phase plot.\n\n1. **Type of Graph and Function:**\n- A Bode plot for frequency response analysis.\n\n2. **Axes Labels and Units:**\n- Horizontal axis: Frequency $\\omega$ on a logarithmic scale.\n- Top plot vertical axis: Magnitude of gain, $|Y/X(\\omega)|$, on a logarithmic scale.\n- Bottom plot vertical axis: Phase angle $\\angle \\beta H(\\omega)$ in degrees.\n\n3. **Overall Behavior and Trends:**\n- **Magnitude Plot:** Gain remains constant initially, peaks at $\\omega_0$, indicating resonance, then decreases sharply.\n- **Phase Plot:** Phase starts near 0 degrees, decreases gradually, approaching -180 degrees.\n\n4. **Key Features and Technical Details:**\n- **Resonance Peak:** Pronounced peak at $\\omega_0$ in the magnitude plot.\n- **Phase Crossover:** Phase crosses -180 degrees, critical for stability analysis.\n- Low-frequency gain is approximately $1/\\beta$, indicating steady-state behavior.\n\n5. **Annotations and Specific Data Points:**\n- $\\omega_0$ marked as the resonant frequency in the magnitude plot.\n- Phase plot includes reference lines at -90 degrees and -180 degrees for phase margin analysis.\n\nFigure 10.9 (a) Bode plots of loop transmission for a three-pole system and (b) closed-loop response.\n\nAs with a two-pole system, reducing the feedback factor in Fig. 10.9 results in greater stability, as the gain crossover shifts towards the origin while the phase crossover remains constant. Consequently, a feedback amplifier designed for higher closed-loop gain tends to be more stable.\n\nIt is crucial to distinguish between $\\beta H$ plots and the closed-loop frequency response, $Y / X$. For instance, consider a system with the loop response shown in Fig. 10.9(b), where gain and phase crossover frequencies coincide. The closed-loop response, $|Y / X|$, exhibits infinite gain at $\\omega_{0}$, predicting oscillation at this frequency."
},
{
    "text": "Our examination in Chapter 9 reveals that op amp circuits typically feature multiple poles. In the case of two-stage op amps, for instance, each gain stage introduces a \"dominant\" pole. Consequently, it is crucial to analyze a feedback system whose core amplifier has more than one pole.\n\nLet's initially explore a two-pole system. For stability analysis, we plot $|\\beta H|$ and $\\angle \\beta H$ as functions of frequency. As depicted in Fig. 10.7, the magnitude starts to decline at a rate of $20 \\mathrm{~dB} / \\mathrm{dec}$ at $\\omega=\\omega_{p1}$ and at $40 \\mathrm{~dB} / \\mathrm{dec}$ at $\\omega=\\omega_{p2}$. Additionally, the phase begins to shift at $\\omega=0.1 \\omega_{p1}$, reaches $-45^{\\circ}$ at $\\omega=\\omega_{p1}$ and $-90^{\\circ}$ at $\\omega=10 \\omega_{p1}$, starts changing again at $\\omega=0.1 \\omega_{p2}$ (if $0.1 \\omega_{p2}>10 \\omega_{p1}$), reaches $-135^{\\circ}$ at $\\omega=\\omega_{p2}$, and asymptotically approaches $-180^{\\circ}$. Thus, the system remains stable since $|\\beta H|$ falls below unity at a frequency where $\\angle \\beta H<-180^{\\circ}$.\n\nimage_name: Figure 10.7 Bode plots of loop transmission for a two-pole system\ndescription: This Bode plot consists of two subplots for a two-pole system: the magnitude plot and the phase plot, both with a logarithmic frequency axis.\n\n**Magnitude Plot:**\n- The vertical axis shows $20 \\log |\\beta H(\\omega)|$ in dB.\n- Initially, the plot is flat, indicating a constant magnitude at low frequencies.\n- At $\\omega_{p1}$, the magnitude decreases at $-20$ dB/decade.\n- At $\\omega_{p2}$, the slope steepens to $-40$ dB/decade.\n- A gain crossover point is marked where the magnitude reaches 0 dB.\n- A gray line represents a scenario with reduced feedback (lower $\\beta$), showing a lower magnitude and an earlier gain crossover.\n\n**Phase Plot:**\n- The vertical axis indicates the phase angle $\\angle \\beta H(\\omega)$ in degrees.\n- Starting at 0, the phase decreases with increasing frequency.\n- At $\\omega = 0.1 \\omega_{p1}$, the phase begins to change, reaching $-45^{\\circ}$ at $\\omega_{p1}$ and $-90^{\\circ}$ at $10 \\omega_{p1}$.\n- The phase changes again at $\\omega = 0.1 \\omega_{p2}$ (if $0.1 \\omega_{p2} > 10 \\omega_{p1}$), reaching $-135^{\\circ}$ at $\\omega_{p2}$ and asymptotically approaches $-180^{\\circ}$.\n\n**Key Features:**\n- Stability is assessed by the relationship between magnitude and phase plots. The system is stable if the magnitude drops below unity before the phase reaches $-180^{\\circ}$.\n- Weaker feedback (gray line) results in a more stable system, with an earlier gain crossover and a constant phase crossover.\n\nWhat occurs if the feedback is weakened? To decrease feedback, we reduce $\\beta$, resulting in the gray magnitude plot in Fig. 10.7. As feedback weakens, the gain crossover point shifts towards the origin, while the phase crossover point stays constant, enhancing system stability. However, this stability comes at the expense of reduced feedback.\n\n#### Example 10.3\n\nCreate the root locus for a two-pole system.\n\n#### Solution\n\nExpressing the open-loop transfer function as\n\n$$\n\\begin{equation*}\nH(s)=\\frac{A_{0}}{\\left(1+\\frac{s}{\\omega_{p1}}\\right)\\left(1+\\frac{s}{\\omega_{p2}}\\right)} \\tag{10.5}\n\\end{equation*}\n$$\n\nwe derive\n\n$$\n\\begin{align*}\n\\frac{Y}{X}(s) & =\\frac{A_{0}}{\\left(1+\\frac{s}{\\omega_{p1}}\\right)\\left(1+\\frac{s}{\\omega_{p2}}\\right)+\\beta A_{0}}  \\tag{10.6}\\\\\n& =\\frac{A_{0} \\omega_{p1} \\omega_{p2}}{s^{2}+\\left(\\omega_{p1}+\\omega_{p2}\\right) s+\\left(1+\\beta A_{0}\\right) \\omega_{p1} \\omega_{p2}} \\tag{10.7}\n\\end{align*}\n$$\n\nThus, the closed-loop poles are\n\n$$\n\\begin{equation*}\ns_{1,2}=\\frac{-\\left(\\omega_{p1}+\\omega_{p2}\\right) \\pm \\sqrt{\\left(\\omega_{p1}+\\omega_{p2}\\right)^{2}-4\\left(1+\\beta A_{0}\\right) \\omega_{p1} \\omega_{p2}}}{2} \\tag{10.8}\n\\end{equation*}\n$$\n\nAs expected, for $\\beta=0, s_{1,2}=-\\omega_{p1},-\\omega_{p2}$. As $\\beta$ increases, the term under the square root decreases, reaching zero for\n\n$$\n\\begin{equation*}\n\\beta_{1}=\\frac{1}{A_{0}} \\frac{\\left(\\omega_{p1}-\\omega_{p2}\\right)^{2}}{4 \\omega_{p1} \\omega_{p2}} \\tag{10.9}\n\\end{equation*}\n$$\n\nAs shown in Fig. 10.8, the poles start at $-\\omega_{p1}$ and $-\\omega_{p2}$, move towards each other, coincide at $\\beta=\\beta_{1}$, and become complex for $\\beta>\\beta_{1}$. The closed-loop system remains stable since the poles do not reach the $j \\omega$ axis.\n\nimage_name: Figure 10.8\ndescription:**Type of Graph and Function:**\nThis root locus plot illustrates the paths of poles in the closed-loop transfer function as the parameter $\\beta$ varies.\n\n**Axes Labels and Units:**\n- The horizontal axis is $\\sigma$, representing the real part of the pole locations.\n- The vertical axis is $j\\omega$, representing the imaginary part of the pole locations.\n- Axes are dimensionless in root locus plots.\n\n**Overall Behavior and Trends:**\n- The plot shows pole movement with varying $\\beta$.\n- Initially, poles are at $-\\omega_{p1}$ and $-\\omega_{p2}$ on the real axis ($\\beta = 0$).\n- As $\\beta$ increases, poles move towards each other on the real axis.\n- At $\\beta = \\beta_1$, poles coincide at a single point.\n- For $\\beta > \\beta_1$, poles become complex conjugates, moving into the complex plane.\n\n**Key Features and Technical Details:**\n- Initial pole locations are marked with crosses at $-\\omega_{p1}$ and $-\\omega_{p2}$.\n- The transition point is marked as $\\beta = \\beta_1$.\n- Poles do not cross into the right half-plane, indicating stability.\n\n**Annotations and Specific Data Points:**\n- Annotations include $\\beta = 0$ at starting locations and $\\beta = \\beta_1$ at the coincidence point.\n- Arrows indicate the direction of pole movement with increasing $\\beta$.\n\nThe above calculations highlight the algebraic complexity involved in constructing a root locus for higher-order systems, leading to the development of various root locus techniques to simplify these computations.\n\nNext, we analyze a three-pole system. Fig. 10.9(a) shows the Bode plots of the loop gain's magnitude and phase. The third pole introduces additional phase shift, potentially lowering the phase crossover frequency below the gain crossover, causing oscillation.\n\nSince the third pole also reduces the loop gain magnitude at a higher rate, one might wonder why the gain crossover does not shift as significantly as the phase crossover. As previously mentioned, the phase begins to change at about one-tenth of the pole frequency, whereas the magnitude starts to decline near the pole frequency. Hence, additional poles (and zeros) impact the phase more significantly than the magnitude.\n\nimage_name: Figure 10.9 (a)\ndescription:Figure 10.9 (a) displays Bode plots for a three-pole system's loop transmission, featuring two plots: one for magnitude and one for phase, both against a logarithmic frequency scale.\n\n1. **Magnitude Plot**:\n- **Y-Axis**: Magnitude of loop transmission in dB as $20\\log|\\beta H(\\omega)|$.\n- **X-Axis**: Frequency $\\omega$ on a logarithmic scale.\n- **Behavior**: The plot shows a decreasing trend, starting flat at low frequencies and sloping downward at each pole frequency $\\omega_p1$, $\\omega_p2$, and $\\omega_p3$.\n- **Key Features**: Three distinct slopes indicate the cumulative effect of the poles on gain.\n\n2. **Phase Plot**:\n- **Y-Axis**: Phase of loop transmission, $\\angle \\beta H(\\omega)$, in degrees.\n- **X-Axis**: Frequency $\\omega$ on a logarithmic scale.\n- **Behavior**: The phase starts at 0 degrees and decreases, showing significant drops at each pole frequency.\n- **Key Features**: Phase shifts at each pole frequency, moving from 0 to -90 degrees, then to -180 degrees and beyond.\n\nOverall, these plots illustrate how the three-pole system affects loop transmission, highlighting stability and response characteristics.\n\nimage_name: Figure 10.9 (b)\ndescription:Figure 10.9(b) shows the closed-loop response of a three-pole system, divided into two plots: the top for magnitude and the bottom for phase.\n\n1. **Type of Graph and Function**:\n- A Bode plot analyzing the system's frequency response.\n\n2. **Axes Labels and Units**:\n- Horizontal axis: Frequency $\\omega$ on a logarithmic scale.\n- Top plot vertical axis: Magnitude of gain, $|Y/X(\\omega)|$, on a logarithmic scale.\n- Bottom plot vertical axis: Phase angle $\\angle \\beta H(\\omega)$ in degrees.\n\n3. **Overall Behavior and Trends**:\n- **Magnitude Plot**: Gain remains constant initially, peaks at $\\omega_0$, then decreases sharply.\n- **Phase Plot**: Phase starts near 0 degrees, decreases gradually, approaching -180 degrees.\n\n4. **Key Features and Technical Details**:\n- **Resonance Peak**: A pronounced peak at $\\omega_0$ indicates potential instability.\n- **Phase Crossover**: Phase crosses -180 degrees, a critical stability point.\n- Low-frequency gain is approximately $1/\\beta$, indicating steady-state behavior.\n\n5. **Annotations and Specific Data Points**:\n- $\\omega_0$ is marked as the resonant frequency in the magnitude plot.\n- Phase plot includes reference lines at -90 degrees and -180 degrees for clarity.\n\nFigure 10.9 (a) Bode plots of loop transmission for a three-pole system and (b) closed-loop response.\n\nAs with the two-pole system, reducing the feedback factor in Fig. 10.9 results in greater stability, as the gain crossover moves towards the origin while the phase crossover remains constant. Consequently, a feedback amplifier designed for higher closed-loop gain tends to be more stable (reason?).\n\nIt is crucial not to confuse the $\\beta H$ plots with the closed-loop frequency response, $Y / X$. For instance, consider a system with the loop response shown in Fig. 10.9(b), where gain and phase crossover frequencies coincide. The closed-loop response, $|Y / X|$, shows infinite gain at $\\omega_{0}$, predicting oscillation at this frequency."
},
{
    "text": "Our examination in Chapter 9 reveals that op amp circuits typically feature multiple poles. In the case of two-stage op amps, for instance, each gain stage introduces a \"dominant\" pole. Consequently, it is crucial to analyze feedback systems where the core amplifier has more than one pole.\n\nLet's initially explore a two-pole system. For stability analysis, we plot $|\\beta H|$ and $\\angle \\beta H$ as functions of frequency. As depicted in Fig. 10.7, the magnitude starts to decline at a rate of $20 \\mathrm{~dB} / \\mathrm{dec}$ at $\\omega=\\omega_{p1}$ and at $40 \\mathrm{~dB} / \\mathrm{dec}$ at $\\omega=\\omega_{p2}$. Additionally, the phase begins to shift at $\\omega=0.1 \\omega_{p1}$, reaches $-45^{\\circ}$ at $\\omega=\\omega_{p1}$, and $-90^{\\circ}$ at $\\omega=10 \\omega_{p1}$. It changes again at $\\omega=0.1 \\omega_{p2}$ (if $0.1 \\omega_{p2}>10 \\omega_{p1}$), reaches $-135^{\\circ}$ at $\\omega=\\omega_{p2}$, and asymptotically approaches $-180^{\\circ}$. The system remains stable because $|\\beta H|$ decreases below unity at a frequency where $\\angle \\beta H<-180^{\\circ}$.\n\n**Figure Description: Figure 10.7**\nThis Bode plot illustrates the loop transmission for a two-pole system, comprising two subplots: one for magnitude and one for phase, with frequency $\\omega$ on a logarithmic horizontal axis.\n\n**Magnitude Plot:**\n- The vertical axis shows $20 \\log |\\beta H(\\omega)|$ in dB.\n- Initially, the magnitude is constant at low frequencies.\n- At $\\omega_{p1}$, it starts decreasing at $-20$ dB/decade.\n- At $\\omega_{p2}$, the slope steepens to $-40$ dB/decade.\n- A gain crossover point is noted where the magnitude hits 0 dB.\n- A gray line represents a scenario with reduced feedback (lower $\\beta$), showing a lower magnitude and an earlier gain crossover.\n\n**Phase Plot:**\n- The vertical axis depicts the phase angle $\\angle \\beta H(\\omega)$ in degrees.\n- The phase starts at 0 and decreases with increasing frequency.\n- It begins changing at $\\omega = 0.1 \\omega_{p1}$, reaching $-45^{\\circ}$ at $\\omega_{p1}$ and $-90^{\\circ}$ at $10 \\omega_{p1}$.\n- Further change occurs at $\\omega = 0.1 \\omega_{p2}$ (if $0.1 \\omega_{p2} > 10 \\omega_{p1}$), reaching $-135^{\\circ}$ at $\\omega_{p2}$ and asymptotically approaches $-180^{\\circ}$.\n\n**Key Points:**\n- Stability is assessed by the relationship between magnitude and phase plots. Stability is ensured if the magnitude drops below unity before the phase reaches $-180^{\\circ}$.\n- Weaker feedback (gray line) enhances stability by lowering the gain crossover frequency, while the phase crossover remains unchanged.\n\nWhat occurs if feedback is weakened? To decrease feedback, we reduce $\\beta$, resulting in the gray magnitude plot in Fig. 10.7. As feedback weakens, the gain crossover shifts towards the origin, while the phase crossover stays constant, thus enhancing stability. However, this stability comes at the expense of reduced feedback.\n\n#### Example 10.3\n\nCreate the root locus for a two-pole system.\n\n#### Solution\n\nExpressing the open-loop transfer function as\n\n$$\n\\begin{equation*}\nH(s)=\\frac{A_{0}}{\\left(1+\\frac{s}{\\omega_{p1}}\\right)\\left(1+\\frac{s}{\\omega_{p2}}\\right)} \\tag{10.5}\n\\end{equation*}\n$$\n\nwe derive\n\n$$\n\\begin{align*}\n\\frac{Y}{X}(s) & =\\frac{A_{0}}{\\left(1+\\frac{s}{\\omega_{p1}}\\right)\\left(1+\\frac{s}{\\omega_{p2}}\\right)+\\beta A_{0}}  \\tag{10.6}\\\\\n& =\\frac{A_{0} \\omega_{p1} \\omega_{p2}}{s^{2}+\\left(\\omega_{p1}+\\omega_{p2}\\right) s+\\left(1+\\beta A_{0}\\right) \\omega_{p1} \\omega_{p2}} \\tag{10.7}\n\\end{align*}\n$$\n\nThus, the closed-loop poles are\n\n$$\n\\begin{equation*}\ns_{1,2}=\\frac{-\\left(\\omega_{p1}+\\omega_{p2}\\right) \\pm \\sqrt{\\left(\\omega_{p1}+\\omega_{p2}\\right)^{2}-4\\left(1+\\beta A_{0}\\right) \\omega_{p1} \\omega_{p2}}}{2} \\tag{10.8}\n\\end{equation*}\n$$\n\nAs expected, for $\\beta=0, s_{1,2}=-\\omega_{p1},-\\omega_{p2}$. As $\\beta$ rises, the term under the square root decreases, becoming zero at\n\n$$\n\\begin{equation*}\n\\beta_{1}=\\frac{1}{A_{0}} \\frac{\\left(\\omega_{p1}-\\omega_{p2}\\right)^{2}}{4 \\omega_{p1} \\omega_{p2}} \\tag{10.9}\n\\end{equation*}\n$$\n\nAs shown in Fig. 10.8, the poles start at $-\\omega_{p1}$ and $-\\omega_{p2}$, move towards each other, meet at $\\beta=\\beta_{1}$, and become complex for $\\beta>\\beta_{1}$. The closed-loop system remains stable since the poles do not reach the $j \\omega$ axis.\n\n**Figure Description: Figure 10.8**\nThis root locus plot analyzes the movement of poles in the closed-loop transfer function as $\\beta$ varies.\n\n**Axes and Behavior:**\n- The horizontal axis is $\\sigma$, the real part of the poles.\n- The vertical axis is $j\\omega$, the imaginary part.\n- Initially, poles are at $-\\omega_{p1}$ and $-\\omega_{p2}$ on the real axis ($\\beta = 0$).\n- As $\\beta$ increases, poles move towards each other on the real axis.\n- At $\\beta = \\beta_1$, poles coincide at a single point.\n- For $\\beta > \\beta_1$, poles become complex conjugates, moving into the complex plane.\n\n**Key Features:**\n- Initial pole locations are marked with crosses at $-\\omega_{p1}$ and $-\\omega_{p2}$.\n- The transition point is marked as $\\beta = \\beta_1$.\n- Poles do not enter the right half-plane, indicating stability as $\\beta$ increases.\n\nThe calculations highlight the complexity of constructing a root locus for higher-order systems, leading to the development of various techniques to simplify these computations.\n\nNext, we analyze a three-pole system. Fig. 10.9(a) shows the Bode plots of the loop gain's magnitude and phase. The third pole introduces additional phase shift, potentially lowering the phase crossover frequency below the gain crossover, causing oscillation.\n\nSince the third pole also steepens the magnitude decline, one might wonder why the gain crossover shifts less than the phase crossover. As previously noted, phase changes start around one-tenth of the pole frequency, while magnitude drops near the pole frequency. Thus, additional poles (and zeros) impact the phase more significantly than the magnitude.\n\n**Figure Description: Figure 10.9 (a)**\nThis figure presents Bode plots for a three-pole system's loop transmission, featuring magnitude and phase plots against frequency on a logarithmic scale.\n\n**Magnitude Plot:**\n- Y-Axis: Magnitude in dB as $20\\log|\\beta H(\\omega)|$.\n- X-Axis: Frequency $\\omega$ on a logarithmic scale.\n- Behavior: Shows a decreasing trend, starting flat at low frequencies and sloping downward at each pole frequency $\\omega_p1$, $\\omega_p2$, and $\\omega_p3$.\n\n**Phase Plot:**\n- Y-Axis: Phase angle $\\angle \\beta H(\\omega)$ in degrees.\n- X-Axis: Frequency $\\omega$ on a logarithmic scale.\n- Behavior: Starts at 0 degrees and decreases, with notable shifts at each pole frequency.\n\n**Overall:**\n- Illustrates the system's impact on magnitude and phase, highlighting stability and response characteristics.\n\n**Figure Description: Figure 10.9 (b)**\nThis graph shows the closed-loop response of a three-pole system, divided into magnitude and phase plots.\n\n**Magnitude Plot:**\n- Displays the gain's magnitude, peaking at $\\omega_0$ and then decreasing sharply.\n\n**Phase Plot:**\n- Shows the phase decreasing from near 0 degrees to -180 degrees.\n\n**Key Features:**\n- Resonance peak at $\\omega_0$ in the magnitude plot.\n- Phase crossover at -180 degrees.\n\nFig. 10.9 (a) Bode plots for a three-pole system and (b) closed-loop response.\n\nAs with two-pole systems, decreasing the feedback factor in Fig. 10.9 enhances stability by shifting the gain crossover towards the origin while the phase crossover remains constant. Hence, a feedback amplifier designed for higher closed-loop gain tends to be more stable.\n\nIt's crucial not to confuse $\\beta H$ plots with the closed-loop frequency response, $Y / X$. For instance, in a system with the loop response shown in Fig. 10.9(b), where gain and phase crossover frequencies coincide, the closed-loop response $|Y / X|$ exhibits infinite gain at $\\omega_{0}$, predicting oscillation at this frequency."
},
{
    "text": "Our examination of operational amplifiers in Chapter 9 reveals that these circuits typically encompass multiple poles. In the case of two-stage op amps, for instance, each amplification stage introduces a \"dominant\" pole. Consequently, it is crucial to investigate a feedback system whose core amplifier features more than one pole.\n\nLet's initially explore a two-pole system. For stability analysis, we plot $|\\beta H|$ and $\\angle \\beta H$ as functions of frequency. As depicted in Fig. 10.7, the magnitude starts to decline at $20 \\mathrm{~dB} / \\mathrm{dec}$ at $\\omega=\\omega_{p 1}$ and at $40 \\mathrm{~dB} / \\mathrm{dec}$ at $\\omega=\\omega_{p 2}$. Additionally, the phase begins to shift at $\\omega=0.1 \\omega_{p 1}$, reaches $-45^{\\circ}$ at $\\omega=\\omega_{p 1}$ and $-90^{\\circ}$ at $\\omega=10 \\omega_{p 1}$, starts changing again at $\\omega=0.1 \\omega_{p 2}$ (if $0.1 \\omega_{p 2}>10 \\omega_{p 1}$), hits $-135^{\\circ}$ at $\\omega=\\omega_{p 2}$, and asymptotically approaches $-180^{\\circ}$. The system is deemed stable since $|\\beta H|$ falls below unity at a frequency where $\\angle \\beta H<-180^{\\circ}$.\nimage_name:Figure 10.7 Bode plots of loop transmission for a two-pole system\ndescription:The illustrated graph is a Bode plot, comprising two subplots: the magnitude plot and the phase plot, for a two-pole system. Both plots utilize a logarithmic scale for the horizontal axis representing frequency \\( \\omega \\).\n\n**Magnitude Plot:**\n- The vertical axis is labeled \\( 20 \\log |\\beta H(\\omega)| \\), indicating the magnitude of the loop transmission in decibels (dB).\n- The plot initiates with a flat segment, signifying a constant magnitude at low frequencies.\n- At the first pole \\( \\omega_{p1} \\), the magnitude starts decreasing at a rate of \\(-20\\) dB/decade.\n- At the second pole \\( \\omega_{p2} \\), the slope steepens to \\(-40\\) dB/decade.\n- A gain crossover point is identified where the magnitude intersects 0 dB, marking the frequency at which the gain equals unity.\n- A gray line illustrates a scenario with reduced feedback (lower \\( \\beta \\)), displaying a diminished magnitude across frequencies and an earlier gain crossover point.\n\n**Phase Plot:**\n- The vertical axis denotes the phase angle \\( \\angle \\beta H(\\omega) \\) in degrees.\n- Initially, the phase is 0 and begins to decrease with increasing frequency.\n- At \\( \\omega = 0.1 \\omega_{p1} \\), the phase starts changing, reaching \\(-45^{\\circ}\\) at \\( \\omega_{p1} \\) and \\(-90^{\\circ}\\) at \\( 10 \\omega_{p1} \\).\n- The phase resumes changing at \\( \\omega = 0.1 \\omega_{p2} \\) (if \\( 0.1 \\omega_{p2} > 10 \\omega_{p1} \\)), reaching \\(-135^{\\circ}\\) at \\( \\omega_{p2} \\) and asymptotically approaches \\(-180^{\\circ}\\).\n\n**Key Features:**\n- The system's stability is evaluated based on the magnitude and phase plots. Stability is maintained as long as the magnitude falls below unity (0 dB) before the phase reaches \\(-180^{\\circ}\\).\n- Weaker feedback (shown by the gray line) results in enhanced stability, as the gain crossover point shifts to a lower frequency, while the phase crossover point remains unchanged.\n\nWhat occurs if the feedback is weakened? To decrease feedback, we lower $\\beta$, resulting in the gray magnitude plot in Fig. 10.7. As feedback weakens, the gain crossover point shifts toward the origin, while the phase crossover point stays constant, thereby enhancing stability. This stability, however, comes at the expense of reduced feedback.\n\n#### Example 10.3\n\nCreate the root locus for a two-pole system.\n\n#### Solution\n\nExpressing the open-loop transfer function as\n\n$$\n\\begin{equation*}\nH(s)=\\frac{A_{0}}{\\left(1+\\frac{s}{\\omega_{p 1}}\\right)\\left(1+\\frac{s}{\\omega_{p 2}}\\right)} \\tag{10.5}\n\\end{equation*}\n$$\n\nwe derive\n\n$$\n\\begin{align*}\n\\frac{Y}{X}(s) & =\\frac{A_{0}}{\\left(1+\\frac{s}{\\omega_{p 1}}\\right)\\left(1+\\frac{s}{\\omega_{p 2}}\\right)+\\beta A_{0}}  \\tag{10.6}\\\\\n& =\\frac{A_{0} \\omega_{p 1} \\omega_{p 2}}{s^{2}+\\left(\\omega_{p 1}+\\omega_{p 2}\\right) s+\\left(1+\\beta A_{0}\\right) \\omega_{p 1} \\omega_{p 2}} \\tag{10.7}\n\\end{align*}\n$$\n\nThus, the closed-loop poles are determined by\n\n$$\n\\begin{equation*}\ns_{1,2}=\\frac{-\\left(\\omega_{p 1}+\\omega_{p 2}\\right) \\pm \\sqrt{\\left(\\omega_{p 1}+\\omega_{p 2}\\right)^{2}-4\\left(1+\\beta A_{0}\\right) \\omega_{p 1} \\omega_{p 2}}}{2} \\tag{10.8}\n\\end{equation*}\n$$\n\nAs anticipated, for $\\beta=0, s_{1,2}=-\\omega_{p 1},-\\omega_{p 2}$. As $\\beta$ rises, the term under the square root decreases, reaching zero for\n\n$$\n\\begin{equation*}\n\\beta_{1}=\\frac{1}{A_{0}} \\frac{\\left(\\omega_{p 1}-\\omega_{p 2}\\right)^{2}}{4 \\omega_{p 1} \\omega_{p 2}} \\tag{10.9}\n\\end{equation*}\n$$\n\nAs illustrated in Fig. 10.8, the poles start at $-\\omega_{p 1}$ and $-\\omega_{p 2}$, move toward each other, meet at $\\beta=\\beta_{1}$, and become complex for $\\beta>\\beta_{1}$. The closed-loop system remains stable since the poles do not reach the $j \\omega$ axis.\nimage_name:Figure 10.8\ndescription:**Graph Type and Function:**\nThe graph is a root locus plot, used in control systems to analyze the trajectories of poles of the closed-loop transfer function as a system parameter (in this case, \\( \\beta \\)) varies.\n\n**Axes Labels and Units:**\n- The horizontal axis is labeled \\( \\sigma \\), representing the real part of the pole locations.\n- The vertical axis is labeled \\( j\\omega \\), representing the imaginary part of the pole locations.\n- The axes are dimensionless, typical for root locus plots.\n\n**Behavior and Trends:**\n- The plot shows the movement of poles as \\( \\beta \\) changes.\n- Initially, the poles are situated at \\(-\\omega_{p1}\\) and \\(-\\omega_{p2}\\) on the real axis (\\( \\beta = 0 \\)).\n- As \\( \\beta \\) increases, the poles move towards each other on the real axis.\n- At \\( \\beta = \\beta_1 \\), the poles coincide at a single point on the real axis.\n- For \\( \\beta > \\beta_1 \\), the poles transform into complex conjugates, moving off the real axis into the complex plane.\n\n**Key Features and Technical Details:**\n- Initial pole locations are marked with crosses at \\(-\\omega_{p1}\\) and \\(-\\omega_{p2}\\).\n- The point of pole coincidence is marked as \\( \\beta = \\beta_1 \\).\n- The plot indicates that the poles do not enter the right half of the complex plane, suggesting stability as \\( \\beta \\) increases.\n\n**Annotations and Specific Data Points:**\n- The plot is annotated with \\( \\beta = 0 \\) at the starting pole locations and \\( \\beta = \\beta_1 \\) at the coincidence point.\n- Arrows indicate the direction of pole movement as \\( \\beta \\) increases, moving from the real axis into the complex plane.\n\nThe preceding calculations highlight the algebraic complexity involved in constructing a root locus for higher-order systems. Consequently, numerous root locus techniques have been developed to minimize these computations.\n\nNext, we analyze a three-pole system. Fig. 10.9(a) presents the Bode plots of the magnitude and phase of the loop gain. The third pole introduces additional phase shift, potentially lowering the phase crossover frequency below the gain crossover frequency, leading to oscillation.\n\nSince the third pole also causes a steeper decline in the loop gain magnitude, one might wonder why the gain crossover frequency does not shift as significantly as the phase crossover frequency. As previously mentioned, the phase begins to change at approximately one-tenth of the pole frequency, whereas the magnitude starts to drop near the pole frequency. Therefore, additional poles (and zeros) impact the phase more substantially than the magnitude.\nimage_name:Figure 10.9 (a)\ndescription:Figure 10.9 (a) displays Bode plots for the loop transmission of a three-pole system. It includes two plots: one for magnitude and one for phase, both plotted against frequency on a logarithmic scale.\n\n1. **Magnitude Plot**:\n- **Y-Axis**: Magnitude of the loop transmission, expressed in decibels as \\(20\\log|\\beta H(\\omega)|\\).\n- **X-Axis**: Frequency \\(\\omega\\) on a logarithmic scale.\n- **Behavior**: The plot shows a decreasing trend, starting flat at low frequencies and sloping downward at each pole frequency \\(\\omega_p1\\), \\(\\omega_p2\\), and \\(\\omega_p3\\), indicating gain reduction.\n- **Key Features**: The plot features three distinct slopes, each steeper with the addition of poles, reflecting their cumulative effect on system gain.\n\n2. **Phase Plot**:\n- **Y-Axis**: Phase of the loop transmission, \\(\\angle \\beta H(\\omega)\\), in degrees.\n- **X-Axis**: Frequency \\(\\omega\\) on a logarithmic scale.\n- **Behavior**: The phase starts at 0 degrees and decreases with increasing frequency, showing significant drops at each pole frequency.\n- **Key Features**: Notable phase shifts occur at each pole frequency, decreasing from 0 to -90 degrees, then to -180 degrees and beyond.\n\nOverall, this Bode plot illustrates how the three-pole system affects both the magnitude and phase of the loop transmission, highlighting stability and response characteristics across varying frequencies.\nimage_name:Figure 10.9 (b)\ndescription:Figure 10.9(b) depicts the closed-loop response of a three-pole system. The graph includes two plots: the top plot shows the magnitude of the closed-loop gain, and the bottom plot displays the phase response.\n\n1. **Graph Type and Function**:\n- The graph is a Bode plot, used for analyzing the frequency response of a system.\n\n2. **Axes Labels and Units**:\n- The horizontal axis represents frequency () on a logarithmic scale.\n- The top plot's vertical axis shows the magnitude of the gain, \\(|Y/X(\\omega)|\\), on a logarithmic scale.\n- The bottom plot's vertical axis represents the phase angle \\(\\angle \\beta H(\\omega)\\) in degrees.\n\n3. **Behavior and Trends**:\n- **Magnitude Plot**: The gain remains constant initially, then peaks at a certain frequency \\(\\omega_0\\), indicating resonance, followed by a sharp decrease.\n- **Phase Plot**: The phase starts near 0 degrees, decreases gradually, and approaches -180 degrees with increasing frequency.\n\n4. **Key Features and Technical Details**:\n- **Resonance Peak**: The magnitude plot features a pronounced peak at the resonant frequency \\(\\omega_0\\), a critical point for stability analysis.\n- **Phase Crossover**: The phase plot crosses -180 degrees, a significant point for stability considerations.\n- The gain at low frequencies is approximately \\(1/\\beta\\), indicating steady-state system behavior.\n\n5. **Annotations and Specific Data Points**:\n- The resonant frequency \\(\\omega_0\\) is marked in the magnitude plot.\n- The phase plot includes reference lines at -90 degrees and -180 degrees to aid in identifying phase margins and stability conditions.\n\nFigure 10.9 (a) Bode plots of loop transmission for a three-pole system and (b) closed-loop response.\n\nAs with a two-pole system, reducing the feedback factor in Fig. 10.9 results in greater stability, as the gain crossover moves toward the origin while the phase crossover remains unchanged. Consequently, a feedback amplifier designed for higher closed-loop gain tends to be more stable (for reasons discussed earlier).\n\nIt is crucial not to confuse the $\\beta H$ plots with the closed-loop frequency response, $Y / X$. For instance, consider a system with the loop response shown in Fig. 10.9(b), where the gain and phase crossover frequencies coincide. The closed-loop response, $|Y / X|$, exhibits infinite gain at $\\omega_{0}$,ing oscillation at this frequency."
},
{
    "text": "To maintain stability, the magnitude of H must decrease to unity before the phase of H reaches -180. We might wonder how far PX should be from GX. Let's first examine a critical case where GX is slightly below PX, as shown in Fig. 10.10(a). For instance, at GX, the phase is -175. How does the closed-loop system behave in this scenario? Considering that at GX, H(j) = 1  exp(-j175), the closed-loop system has the following response:\n\n$$\n\\begin{align*}\n\\frac{Y}{X}(j) & = \\frac{H(j)}{1 + H(j)} \\tag{10.10}\\\\\n& = \\frac{\\frac{1}{} \\exp(-j175)}{1 + \\exp(-j175)} \\tag{10.11}\\\\\n& = \\frac{1}{} \\cdot \\frac{-0.9962 - j0.0872}{0.0038 - j0.0872} \\tag{10.12}\n\\end{align*}\n$$\n\nGraphs (a) and (b) illustrate the closed-loop frequency and time responses for systems with small and large margins between gain and phase crossover points, respectively. In graph (a), the Bode plot and time response show a sharp peak and oscillations, indicating potential instability. Graph (b) shows a more stable system with a flatter frequency response and a smooth time response.\n\nThe concept of phase margin (PM) is introduced, defined as PM = 180 + H( = ), where  is the gain crossover frequency. A positive and large PM is indicative of stability. An example is provided to demonstrate how to calculate the phase margin for a two-pole feedback system.\n\nThe frequency response of the feedback system exhibits a peak at  = , near oscillation, and the step response shows underdamped behavior. For a larger margin between GX and PX, the closed-loop response is expected to be well-behaved in both frequency and time domains.\n\nFigure 10.10(a) and (b) show the frequency and time responses for small and large margins, respectively. Figure 10.11 is a Bode plot for a two-pole feedback system, and Figure 10.12 shows the closed-loop frequency response for a 45 phase margin. Figure 10.13(a), (b), and (c) depict the closed-loop time response for 45, 60, and 90 phase margins, respectively.\n\nThe phase margin is useful for small-signal circuit design but may not accurately predict large-signal behavior due to non-linearities and variations in pole and zero frequencies. An example of a unity-gain amplifier with a phase margin of 65 and a unity-gain frequency of 150 MHz is provided, showing significant ringing in the large-signal step response."
},
{
    "text": "We've observed that $|\\beta H|$ must decrease to 1 before $\\angle \\beta H$ reaches $-180^{\\circ}$ to ensure stability. A natural question arises: How far should PX be from GX? Let's examine a \"borderline\" case where GX is slightly below PX, as shown in Fig. 10.10(a). For instance, at GX, the phase is $-175^{\\circ}$. How does the closed-loop system behave in this scenario? At GX, $\\beta H\\left(j \\omega_{1}\\right)=1 \\times \\exp \\left(-j 175^{\\circ}\\right)$, leading to the closed-loop system response:\n\n$$\n\\begin{align*}\n\\frac{Y}{X}\\left(j \\omega_{1}\\right) & =\\frac{H\\left(j \\omega_{1}\\right)}{1+\\beta H\\left(j \\omega_{1}\\right)}  \\tag{10.10}\\\\\n& =\\frac{\\frac{1}{\\beta} \\exp \\left(-j 175^{\\circ}\\right)}{1+\\exp \\left(-j 175^{\\circ}\\right)}  \\tag{10.11}\\\\\n& =\\frac{1}{\\beta} \\cdot \\frac{-0.9962-j 0.0872}{0.0038-j 0.0872} \\tag{10.12}\n\\end{align*}\n$$\n\n[Graph descriptions and further text continue as provided in the original context, with similar rephrasing applied throughout.]"
},
{
    "text": "We have observed that for the system to remain stable, the magnitude of \\(|\\beta H|\\) must reduce to 1 before the phase \\(\\angle \\beta H\\) reaches \\(-180^{\\circ}\\). A logical inquiry arises: What is the optimal distance between PX and GX? Initially, let's examine a scenario where GX is marginally below PX, as illustrated in Fig. 10.10(a). For instance, at GX, the phase is \\( -175^{\\circ} \\). How does the closed-loop system react under these conditions? Considering that at GX, \\(\\beta H\\left(j \\omega_{1}\\right)=1 \\times \\exp \\left(-j 175^{\\circ}\\right)\\), we can determine the closed-loop system's response as follows:\n\n\\[\n\\begin{align*}\n\\frac{Y}{X}\\left(j \\omega_{1}\\right) & =\\frac{H\\left(j \\omega_{1}\\right)}{1+\\beta H\\left(j \\omega_{1}\\right)}  \\tag{10.10}\\\\\n& =\\frac{\\frac{1}{\\beta} \\exp \\left(-j 175^{\\circ}\\right)}{1+\\exp \\left(-j 175^{\\circ}\\right)}  \\tag{10.11}\\\\\n& =\\frac{1}{\\beta} \\cdot \\frac{-0.9962-j 0.0872}{0.0038-j 0.0872} \\tag{10.12}\n\\end{align*}\n\\]\n\nThe image descriptions provided give a detailed account of the various graphs, their types, functions, axes labels, units, overall behavior, trends, key features, technical details, and annotations. They include graphical representations of frequency and time responses for systems with different phase margins, as well as a specific example of a unity-gain buffer circuit with its large-signal step response characteristics."
},
{
    "text": "We have observed that for stability, the magnitude of H must decrease to 1 before the phase of H reaches -180. A logical inquiry arises: What should be the distance between PX and GX? Initially, we consider a \"borderline\" case where GX is just below PX, as illustrated in Fig. 10.10(a), for instance, at GX, the phase is -175. How will the closed-loop system react in this scenario? Considering that at GX, H(j) equals 1 times exp(-j175), the closed-loop system's response is\n\nY/X(j) = H(j) / (1 + H(j))The/X(j) = (1/ exp(-j175)) / (1 + exp(-j175))\n\nY/X(j) = (1/ * (-0.9962 - j0.0872) / (0.0038 - j0.0872)\n\nThe graph labeled \"|H()| and H() (a)\" presents a Bode plot, showing both the magnitude and phase of H(), a frequency response curve for |Y/X()|, and a time-domain response y(t). The axes represent frequency  and time t, magnitude |H()| and phase H() in degrees, and |Y/X()| and y(t), respectively. The graph exhibits a decrease in magnitude with frequency, a phase margin at the phase crossover frequency, a sharp peak in |Y/X()| indicating resonance, and oscillations in y(t) suggesting potential instability or ringing.\n\nThe graph labeled \"|Y/X|() (a)\" is a frequency response plot focusing on the magnitude response of the closed-loop transfer function |Y/X| as a function of frequency . The axes represent frequency  and magnitude |Y/X|. The plot shows a sharp peak indicating a resonant frequency where the system amplifies the input signal significantly. After the peak, the magnitude decreases, and at low frequencies, the magnitude starts near 1/.\n\nThe graph labeled \"y(t) (a)\" is a time-domain waveform plot. The waveform exhibits oscillatory behavior, indicating the presence of periodic fluctuations in the output over time. The amplitude of these oscillations appears to decrease gradually, suggesting a damped oscillatory response.\n\nThe graph labeled \"|H()| and H() (b)\" illustrates a Bode plot and time response diagrams that depict the frequency and time response of a closed-loop system for two different conditions: (a) with a small margin between gain and phase crossover points, and (b) with a large margin. The graph shows a more stable configuration with less pronounced peaks, a flatter frequency response |Y/X()|, and a smooth time response y(t) indicating stability.\n\nThe graph labeled \"|Y/X|() (b)\" is a frequency response plot that shows the magnitude of the closed-loop transfer function |Y/X| as a function of frequency . The graph illustrates a stable system with a broad frequency response and a gradual decline in gain at higher frequencies, characteristic of a system with a large gain and phase margin.\n\nThe graph labeled \"y(t) (b)\" is a time-domain waveform representing the output response of a closed-loop system over time. The waveform in graph (b) shows a smooth, gradual rise to a steady state, indicating a stable response without oscillations or overshoot, suggesting a system with adequate phase margin and damping.\n\nFigure 10.10 displays closed-loop frequency and time response for (a) small and (b) large margin between gain and phase crossover points. The closed-loop frequency response exhibits a sharp peak near =, indicating the system is near oscillation, and its step response, y(t), exhibits a very underdamped behavior. A second-order system may suffer from ringing despite being stable.\n\nWith a larger margin between GX and PX, as shown in Fig. 10.10(b), a relatively \"well-behaved\" closed-loop response is expected in both the frequency domain and the time domain. The greater the spacing between GX and PX (while GX remains below PX), the more stable the feedback system. Alternatively, the phase of H at the gain crossover frequency can serve as a measure of stability: the smaller the |H| at this point, the more stable the system.\n\nThis observation leads to the concept of \"phase margin\" (PM), defined as PM = 180 + H(=), where  is the gain crossover frequency. Stability requires a positive and large PM.\n\nFigure 10.11 is a Bode plot, consisting of magnitude and phase plots against frequency on a logarithmic scale. The magnitude plot shows a crossover at point GX where |H()| = 1. The phase plot crosses -180 at point PX, indicating a phase margin PM. The phase margin is 45, as the phase angle at p2 is -135.\n\nFor a phase margin greater than 45, the gain crossover frequency must lie between the first pole and the second (in the absence of zeros). The unity-gain bandwidth cannot exceed the second pole frequency.\n\nThe closed-loop frequency response for different phase margins is examined. For PM=45, at the gain crossover frequency H()=-135 and |H()|=1, the closed-loop gain plot shows a peak at the frequency , reaching approximately 1.3/, indicating a 30% peak in the frequency response.\n\nFor PM=60, Y(j) / X(j)=1 / , suggesting a negligible frequency peaking. This typically means that the step response of the feedback system exhibits little ringing, providing fast settling. For greater phase margins, the system is more stable, but the time response slows down. Thus, PM=60 is typically considered the optimum value.\n\nFigure 10.13 displays closed-loop time response for 45, 60, and 90 phase margins. The concept of phase margin is well suited to the design of circuits that process small signals. In practice, the large-signal step response of feedback amplifiers does not follow the illustration of Fig. 10.13. This is due to slewing and nonlinear behavior resulting from large excursions in the bias voltages and currents of the amplifier. Time-domain simulations of the closed-loop system are more relevant and useful than small-signal AC computations of the open-loop amplifier for large-signal applications.\n\nAs an example, the unity-gain amplifier of Fig. 10.14, with a phase margin of approximately 65 and a unity-gain frequency of 150 MHz, suffers from significant ringing in the large-signal step response."
},
{
    "text": "To ensure stability, the magnitude of \\(|\\beta H|\\) must decrease to 1 before the phase \\(\\angle \\beta H\\) reaches \\(-180^{\\circ}\\). It is natural to inquire about the appropriate distance between PX and GX. Initially, let's examine a \"marginal\" scenario, as illustrated in Fig. 10.10(a), where GX is only slightly below PX; for instance, at GX, the phase is \\(-175^{\\circ}\\). How does the closed-loop system behave in this instance? Considering that at GX, \\(\\beta H\\left(j \\omega_{1}\\right)=1 \\times \\exp \\left(-j 175^{\\circ}\\right)\\), we derive for the closed-loop system\n\n$$\n\\begin{align*}\n\\frac{Y}{X}\\left(j \\omega_{1}\\right) & =\\frac{H\\left(j \\omega_{1}\\right)}{1+\\beta H\\left(j \\omega_{1}\\right)}  \\tag{10.10}\\\\\n& =\\frac{\\frac{1}{\\beta} \\exp \\left(-j 175^{\\circ}\\right)}{1+\\exp \\left(-j 175^{\\circ}\\right)}  \\tag{10.11}\\\\\n& =\\frac{1}{\\beta} \\cdot \\frac{-0.9962-j 0.0872}{0.0038-j 0.0872} \\tag{10.12}\n\\end{align*}\n$$\n\nThe graphs and their descriptions provided in the context depict different scenarios of closed-loop frequency and time responses based on the margin between gain and phase crossover points. They illustrate the behavior of the system in both the frequency domain, through Bode plots, and the time domain, through step responses. The key observations include the phase margin, resonance, stability, and damping characteristics of the system under various conditions. The analysis leads to the conclusion that a larger phase margin generally results in a more stable system, with a trade-off between stability and response speed."
},
{
    "text": "To ensure stability, the magnitude of \\(|\\beta H|\\) must decrease to 1 before the phase \\(\\angle \\beta H\\) reaches \\(-180^{\\circ}\\). This leads us to question the appropriate distance between PX and GX. Consider a scenario where GX is only lower PX, as illustrated in Fig. 10.10(a), with the phase at GX being \\(-175^{\\circ}\\). How does the closed-loop system behave in this situation? At GX, \\(\\beta H\\left(j \\omega_{1}\\right) = 1 \\times \\exp \\left(-j 175^{\\circ}\\right)\\), resulting in the closed-loop system response:\n\n\\[\n\\begin{align*}\n\\frac{Y}{X}\\left(j \\omega_{1}\\right) & = \\frac{H\\left(j \\omega_{1}\\right)}{1+\\beta H\\left(j \\omega_{1}\\right)}  \\tag{10.10}\\\\\n& = \\frac{\\frac{1}{\\beta} \\exp \\left(-j 175^{\\circ}\\right)}{1+\\exp \\left(-j 175^{\\circ}\\right)}  \\tag{10.11}\\\\\n& = \\frac{1}{\\beta} \\cdot \\frac{-0.9962-j 0.0872}{0.0038-j 0.0872} \\tag{10.12}\n\\end{align*}\n\\]\n\nThe provided graphs, such as those labeled with \"|H()| and H() (a)\" and \"|Y/X|() (a)\", offer visual representations of the frequency response and phase margin. They depict Bode plots and frequency responses, highlighting key features like resonance, oscillations, and stability characteristics. The time-domain response graphs, \"y(t) (a)\" and \"y(t) (b)\", show how the system reacts over time, with \"a\" indicating potential instability or ringing and \"b\" showing a smooth, stable response.\n\nThe phase margin (PM) is a critical concept in control systems, defined as PM \\(= 180^{\\circ} + \\angle \\beta H(\\omega = \\omega_{1})\\), where \\(\\omega_{1}\\) is the gain crossover frequency. A positive and large PM is indicative of a stable system. The example of a two-pole feedback system in Fig. 10.11 demonstrates a phase margin calculation, revealing that a phase margin of \\(45^{\\circ}\\) is often insufficient for stability, suggesting that the unity-gain bandwidth should not exceed the second pole frequency.\n\nFigure 10.12 illustrates the closed-loop frequency response for a \\(45^{\\circ}\\) phase margin, showing a peak in the frequency response and potential stability issues. Conversely, a phase margin of \\(60^{\\circ}\\) or more results in a negligible frequency peaking and a faster settling time, with \\(60^{\\circ}\\) often considered optimal.\n\nFigures 10.13(a), (b), and (c) depict time-domain waveforms for phase margins of \\(45^{\\circ}\\), \\(60^{\\circ}\\), and \\(90^{\\circ}\\), respectively. These graphs show the step response of a feedback system, with \"a\" exhibiting ringing, \"b\" showing a critically damped response, and \"c\" indicating a slower but stable response.\n\nLastly, the unity-gain amplifier circuit in Fig. 10.14, despite having a reasonable phase margin of approximately \\(65^{\\circ}\\) and a unity-gain frequency of 150 MHz, exhibits significant ringing in its large-signal step response. This underscores the importance of considering large-signal behavior and time-domain simulations in the design of circuits that handle large signals, as small-signal AC computations may not fully capture the system's dynamics."
},
{
    "text": "We have observed that $|\\beta H|$ must decrease to 1 before $\\angle \\beta H$ reaches $-180^{\\circ}$ to ensure stability. A natural question arises: How far should PX be from GX? Let's consider a \"marginal\" case, as shown in Fig. 10.10(a), where GX is slightly below PX; for example, at GX, the phase is $-175^{\\circ}$. How does the closed-loop system respond in this scenario? At GX, $\\beta H\\left(j \\omega_{1}\\right)=1 \\times \\exp \\left(-j 175^{\\circ}\\right)$, so for the closed-loop system, we have:\n\n$$\n\\begin{align*}\n\\frac{Y}{X}\\left(j \\omega_{1}\\right) & =\\frac{H\\left(j \\omega_{1}\\right)}{1+\\beta H\\left(j \\omega_{1}\\right)}  \\tag{10.10}\\\\\n& =\\frac{\\frac{1}{\\beta} \\exp \\left(-j 175^{\\circ}\\right)}{1+\\exp \\left(-j 175^{\\circ}\\right)}  \\tag{10.11}\\\\\n& =\\frac{1}{\\beta} \\cdot \\frac{-0.9962-j 0.0872}{0.0038-j 0.0872} \\tag{10.12}\n\\end{align*}\n$$\n\nThe graph labeled \"|H()| and H() (a)\" is a Bode plot that shows both the magnitude \\(|\\beta H(\\omega)|\\) and phase \\(\\angle \\beta H(\\omega)\\). The graph also includes a frequency response curve for \\(|Y/X(\\omega)|\\) and a time-domain response \\(y(t)\\).\n\nIn the Bode plot, the magnitude decreases with frequency, crossing the 0 dB line at the gain crossover frequency (GX). The phase plot shows a phase margin (PM) at the phase crossover frequency (PX). The frequency response \\(|Y/X(\\omega)|\\) exhibits a sharp peak near \\(\\omega = \\omega_1\\), indicating resonance. The time response \\(y(t)\\) shows oscillations, indicating potential instability or ringing.\n\nThe graph labeled \"|Y/X|() (a)\" is a frequency response plot that shows the magnitude of the closed-loop transfer function |Y/X| as a function of frequency . The plot shows a sharp peak in the magnitude response, indicating a resonant frequency where the system amplifies the input signal significantly. After the peak, the magnitude decreases, suggesting the system attenuates higher frequencies. At low frequencies, the magnitude starts near 1/, as expected from the context.\n\nThe graph labeled \"y(t) (a)\" is a time-domain waveform plot. The waveform exhibits oscillatory behavior, indicating the presence of periodic fluctuations in the output over time. The amplitude of these oscillations appears to decrease gradually, suggesting a damped oscillatory response.\n\nThe graph labeled \"|H()| and H() (b)\" shows a more stable configuration with less pronounced peaks. The frequency response \\(|Y/X(\\omega)|\\) is flatter, indicating less resonance. The time response \\(y(t)\\) shows a smooth rise without oscillations, indicating stability.\n\nThe graph labeled \"|Y/X|() (b)\" is a frequency response plot that shows the magnitude of the closed-loop transfer function |Y/X| as a function of frequency . The graph shows a relatively flat response over a range of frequencies, indicating stable gain across those frequencies. Towards higher frequencies, the magnitude begins to decrease, suggesting a roll-off.\n\nThe graph labeled \"y(t) (b)\" is a time-domain waveform representing the output response of a closed-loop system over time. The waveform in graph (b) shows a smooth, gradual rise to a steady state. This indicates a stable response without oscillations or overshoot, suggesting a system with adequate phase margin and damping.\n\nFigure 10.10 shows closed-loop frequency and time response for (a) small and (b) large margin between gain and phase crossover points. The phase margin (PM) is defined as PM $=180^{\\circ}+\\angle \\beta H(\\omega=$ $\\omega_{1}$ ), where $\\omega_{1}$ is the gain crossover frequency. We see that stability calls for a positive and large PM.\n\nA two-pole feedback system is designed such that $\\left|\\beta H\\left(\\omega_{p 2}\\right)\\right|=1$ and $\\left|\\omega_{p 1}\\right| \\ll\\left|\\omega_{p 2}\\right|$ (Fig. 10.11). The phase margin is $45^{\\circ}$.\n\nThe graph in Figure 10.11 is a Bode plot, which consists of two separate plots: the magnitude plot and the phase plot, both plotted against frequency on a logarithmic scale. The magnitude plot shows a crossover at point GX where \\(|\\beta H(\\omega)| = 1\\). The phase plot crosses \\(-180^\\circ\\) at point PX, indicating a phase margin PM.\n\nThe above example suggests that for a phase margin greater than $45^{\\circ}$, the gain crossover frequency must lie between the first pole and the second (in the absence of zeros). That is, the unity-gain bandwidth cannot exceed the second pole frequency.\n\nHow much phase margin is adequate? For $\\mathrm{PM}=60^{\\circ}$, at the gain crossover frequency $\\angle \\beta H\\left(\\omega_{1}\\right)=-135^{\\circ}$ and $\\left|\\beta H\\left(\\omega_{1}\\right)\\right|=1$ (Fig. 10.12), yielding\n\n$$\n\\begin{align*}\n\\frac{Y}{X} & =\\frac{H\\left(j \\omega_{1}\\right)}{1+1 \\times \\exp \\left(-j 135^{\\circ}\\right)}  \\tag{10.15}\\\\\n& =\\frac{H\\left(j \\omega_{1}\\right)}{0.29-0.71 j} \\tag{10.16}\n\\end{align*}\n$$\n\nConsequently, the frequency response of the feedback system suffers from a $30 \\%$ peak at $\\omega=\\omega_{1}$.\n\nThe graph labeled \"(a)\" in Figure 10.13 depicts a time-domain waveform representing the closed-loop step response of a feedback system with a phase margin (PM) of 45 degrees. The graph shows an initial rapid rise in the output, followed by oscillations that gradually decrease in amplitude over time. This indicates that the system initially overshoots its final value and then exhibits ringing before settling.\n\nThe graph labeled \"(b)\" in Figure 10.13 is a time-domain waveform representing the closed-loop step response of a system with a phase margin (PM) of 60 degrees. The graph shows a smooth, monotonic rise from an initial value at \\( t = 0 \\) to a steady-state value. This indicates a stable system response with minimal overshoot and no oscillations.\n\nThe graph labeled \"(c)\" in Figure 10.13 is a time-domain waveform representing the closed-loop step response of a system with a phase margin (PM) of 90 degrees. The graph shows a smooth, monotonic increase from the origin, indicating a stable step response. The response rises quickly at first and then gradually approaches a steady-state value without any overshoot or oscillations.\n\nFigure 10.13 shows closed-loop time response for $45^{\\circ}, 60^{\\circ}$, and $90^{\\circ}$ phase margins.\n\nThe concept of phase margin is well suited to the design of circuits that process small signals. In practice, the large-signal step response of feedback amplifiers does not follow the illustration of Fig. 10.13. This is not only due to slewing but also because of the nonlinear behavior resulting from large excursions in the bias voltages and currents of the amplifier. Such excursions in fact cause the pole and zero frequencies to vary during the transient, leading to a complicated time response. Thus, for large-signal applications, time-domain simulations of the closed-loop system prove more relevant and useful than small-signal ac computations of the open-loop amplifier.\n\nAs an example of a feedback circuit exhibiting a reasonable phase margin but poor settling behavior, consider the unity-gain amplifier of Fig. 10.14, where the aspect ratio of all transistors is equal to $50 \\mu \\mathrm{~m} /$ $0.6 \\mu \\mathrm{~m}$. With the choice of the device dimensions, bias currents, and capacitor values shown here, SPICE yields a phase margin of approximately $65^{\\circ}$ and a unity-gain frequency of 150 MHz . The large-signal step response, however, suffers from significant ringing.\n\nThe graph labeled \"Large-signal step response\" is a time-domain waveform depicting the large-signal step response of a unity-gain amplifier circuit. The input voltage \\( V_{in} \\) is a step function, showing a sudden rise from a lower level to a higher steady-state level. The output voltage \\( V_{out} \\) initially follows the input but exhibits significant overshoot and ringing before settling. The waveform has a damped oscillatory behavior, indicating underdamped system dynamics."
},
{
    "text": "To ensure system stability, it is imperative that the magnitude of \\(|\\beta H|\\) reduces to unity prior to the phase \\(\\angle \\beta H\\) reaching \\(-180^{\\circ}\\). This prompts the inquiry: What is the optimal distance between PX and GX? Initially, we should examine a scenario where GX is marginally below PX, as illustrated in Fig. 10.10(a), for instance, at a phase of \\(-175^{\\circ}\\) at GX. How does the closed-loop system react under these conditions? Observing that at GX, \\(\\beta H\\left(j \\omega_{1}\\right)=1 \\times \\exp \\left(-j 175^{\\circ}\\right)\\), we can derive the closed-loop system response as follows:\n\n$$\n\\begin{align*}\n\\frac{Y}{X}\\left(j \\omega_{1}\\right) & =\\frac{H\\left(j \\omega_{1}\\right)}{1+\\beta H\\left(j \\omega_{1}\\right)}  \\tag{10.10}\\\\\n& =\\frac{\\frac{1}{\\beta} \\exp \\left(-j 175^{\\circ}\\right)}{1+\\exp \\left(-j 175^{\\circ}\\right)}  \\tag{10.11}\\\\\n& =\\frac{1}{\\beta} \\cdot \\frac{-0.9962-j 0.0872}{0.0038-j 0.0872} \\tag{10.12}\n\\end{align*}\n$$\n\nFor a comprehensive analysis, we consider the graphical representations of \\(|\\beta H(\\omega)|\\) and \\(\\angle \\beta H(\\omega)\\) in Fig. 10.10(a), which depict the frequency and time responses for a closed-loop system with a small margin between gain and phase crossover points. The Bode plot and frequency response curves reveal a resonant peak near \\(\\omega = \\omega_1\\), indicating potential instability or sensitivity. Additionally, the time-domain response \\(y(t)\\) exhibits oscillatory behavior, which is indicative of underdamping.\n\nWhen comparing this to the scenario in Fig. 10.10(b), where GX precedes PX by a more substantial margin, we anticipate a more stable closed-loop response both in frequency and time domains. It is reasonable to infer that an increased separation between GX and PX contributes to greater stability in the feedback system. Moreover, the phase of \\(\\beta H\\) at the gain crossover frequency can serve as a stability indicator: a smaller \\(|\\angle \\beta H|\\) at this frequency correlates with a more stable system.\n\nThis leads us to the notion of \"phase margin\" (PM), defined as PM \\(=180^{\\circ}+\\angle \\beta H(\\omega=\\omega_{1})\\), where \\(\\omega_{1}\\) is the gain crossover frequency. It becomes evident that stability is favored by a positive and ample PM.\n\nFor instance, in a two-pole feedback system designed such that \\(|\\beta H(\\omega_{p2})|=1\\) and \\(|\\omega_{p1}|\\ll|\\omega_{p2}|\\) (Fig. 10.11), the phase margin calculation is essential. In this specific case, the phase margin is determined to be \\(45^{\\circ}\\), highlighting the importance of the relationship between gain crossover frequency and system stability.\n\nFurther analysis of closed-loop frequency responses for varying phase margins reveals that a PM of \\(60^{\\circ}\\) is often considered optimal, as it balances stability with response speed. For a PM of \\(45^{\\circ}\\), the frequency response exhibits a peak, suggesting resonance and potential instability. In contrast, a PM of \\(60^{\\circ}\\) or greater results in a more stable system with reduced peaking and faster settling in the time response.\n\nThe graphical representations in Figures 10.12 and 10.13 provide visual evidence of the closed-loop frequency and time responses for different phase margins, illustrating the impact of PM on system stability and performance. These analyses demonstrate the significance of phase margin in the design of circuits for small-signal processing.\n\nIn practical applications, particularly for large-signal step responses, the behavior may deviate from small-signal AC computations due to factors such as slewing and nonlinearities. Consequently, time-domain simulations are often more relevant for predicting the actual performance of closed-loop systems.\n\nAn example of a feedback circuit with a reasonable phase margin but poor settling behavior is presented in Fig. 10.14, which shows a unity-gain amplifier with a phase margin of approximately \\(65^{\\circ}\\) and a unity-gain frequency of 150 MHz. Despite the adequate phase margin, the large-signal step response exhibits significant ringing, emphasizing the complexity of real-world circuit behavior and the necessity for comprehensive analysis."
},
{
    "text": "Operational amplifier circuits typically exhibit multiple poles. For instance, in a folded-cascode topology, both the folding node and the output node contribute to the pole count. Consequently, op amps often require \"compensation,\" which involves modifying the open-loop transfer function to ensure closed-loop circuit stability and proper time response.\n\nThe necessity for compensation stems from the fact that $|\\beta H|$ does not sufficiently decrease to unity before $\\angle \\beta H$ reaches $-180^{\\circ}$. To achieve stability, we can either minimize the overall phase shift, thereby moving the phase crossover outward [Fig. 10.15(a)], or decrease the gain with frequency, shifting the gain crossover inward [Fig. 10.15(b)]. The first method involves minimizing the number of poles in the signal path through careful design. Since each additional stage adds at least one pole, this implies reducing the number of stages, which may result in lower voltage gain and/or limited output swings (refer to Chapter 9). The second method retains low-frequency gain and output swings but sacrifices bandwidth by causing the gain to fall at lower frequencies.\n\n---[Figure Descriptions]---\n\nFigure 10.15(a) presents a Bode plot illustrating frequency response characteristics in an op-amp design. The upper plot shows the magnitude response, and the lower plot shows the phase response. The magnitude plot exhibits a typical low-pass filter characteristic, with gain decreasing with increasing frequency. The phase plot demonstrates a phase lag as frequency rises, approaching -180.\n\nFigure 10.15(b) also depicts a Bode plot, focusing on gain and phase shift in frequency response. The magnitude plot starts at a high gain level and decreases with frequency, while the phase plot shows a phase shift starting at 0 and decreasing towards -180.\n\nFigure 10.16 depicts a telescopic op-amp with a single-ended output. It includes high-frequency poles at the sources of transistors M3 and M7 and a mirror pole at node A in the signal paths.\n\nFigure 10.17 is a pole-zero plot for an op-amp, illustrating the positions of poles in the complex frequency plane. The poles are arranged along the real axis, with the dominant pole at the output influencing the open-loop 3-dB bandwidth.\n\nFigure 10.18 is a Bode plot that shows the loop transmission characteristics for the op-amp circuit in Figure 10.16. The magnitude plot exhibits a reduction in gain with increasing frequency, and the phase plot shows a phase lag that becomes more negative with frequency.\n\nFigure 10.19 is another Bode plot, with the magnitude plot demonstrating a low-pass filter response and the phase plot indicating a phase shift approaching -180. The graph also highlights the effect of translating the dominant pole towards the origin.\n\nFigure 10.20 displays a Bode plot that includes a magnitude plot and a phase plot. The magnitude plot shows a gain reduction with frequency, and the phase plot indicates a phase lag. The plot emphasizes the impact of the dominant pole on the phase margin.\n\nFigure 10.21 is a Bode plot that illustrates the loop gain characteristics for an op-amp with higher output resistance. The magnitude plot exhibits an increase in low-frequency gain, and the phase plot shows a phase lag with increasing frequency.\n\nFigure 10.22(a) represents an op-amp circuit with feedback, where the feedback factor is less than 1. It includes resistors R1 and R2 forming a voltage divider for feedback.\n\nFigure 10.22(b) is a Bode plot with magnitude and phase plots. The magnitude plot shows the uncompensated and compensated responses, while the phase plot indicates the phase margin.\n\nFigure 10.23 depicts a fully differential telescopic op-amp, utilizing a pair of NMOS transistors for the differential input stage and NMOS cascode transistors to increase output impedance.\n\nFigure 10.24(a) and (b) illustrate the effect of device capacitance at the internal node of a cascode current source. The PMOS transistors form a cascode arrangement to improve output impedance, and the capacitor CN at node N affects the frequency response."
},
{
    "text": "Operational amplifiers often require compensation due to the presence of multiple poles in their circuits. For instance, in a folded-cascode topology, both the folding node and the output node contribute to the poles. To ensure stability and proper time response in the closed-loop circuit, the open-loop transfer function of the op amp must be adjusted, a process known as compensation.\n\nCompensation becomes necessary because the magnitude of the loop gain, represented by \\(|\\beta H|\\), does not decrease to unity before the phase angle, \\(\\angle \\beta H\\), reaches \\(-180^{\\circ}\\). To achieve stability, we can either minimize the overall phase shift, pushing the phase crossover to higher frequencies, or decrease the gain with increasing frequency, shifting the gain crossover to lower frequencies. The former approach involves reducing the number of poles in the signal path, which often results in lower voltage gain and limited output swings. The latter method maintains low-frequency gain and output swings but sacrifices bandwidth by reducing gain at higher frequencies.\n\nThe Bode plots illustrate the frequency response characteristics of the op amp circuits. The magnitude plot shows the gain in decibels against logarithmic frequency, while the phase plot shows the phase angle in degrees against the same logarithmic frequency scale. These plots help analyze the stability and performance of the op amp circuits by identifying key features such as breakpoints, slopes, and phase margins.\n\nIn the context of a telescopic-cascode op amp, the output pole is typically the dominant pole, setting the open-loop 3-dB bandwidth. The next nondominant pole is usually at node A, followed by node N. The positions of these poles are crucial in determining the frequency response and stability of the amplifier.\n\nTo compensate the telescopic-cascode op amp, we aim to ensure that the loop gain is less than unity at the phase crossover frequency. This is achieved by moving the dominant pole towards the origin by increasing the load capacitance. The key point is that the phase contribution of the dominant pole near the gain or phase crossover point is approximately \\(90^{\\circ}\\) and relatively independent of the pole's exact location.\n\nIn summary, frequency compensation involves adjusting the dominant pole of the open-loop amplifier to ensure that the unity-gain bandwidth is below the phase crossover frequency. The compensated bandwidth cannot exceed the frequency of the first nondominant pole since a phase margin greater than \\(45^{\\circ}\\) is typically required for stability.\n\nFully differential telescopic cascode op amps offer an advantage by avoiding the mirror pole and the pole at node N, resulting in only one nondominant pole at high frequencies. This configuration provides stability and a wider bandwidth without the need for compensation.\n\nThe introduction of zeros in the transfer function can potentially cancel out nondominant poles, but this may lead to longer settling times in the step response of the closed-loop circuit due to mismatches."
},
{
    "text": "Operational amplifiers commonly incorporate numerous poles within their circuits. For instance, in a folded-cascode topology, both the folding node and the output node contribute to the pole count. Consequently, op amps typically necess \"compensation,\" which involves modifying their open-loop transfer function to ensure that-loop circuit stability and a well-behaved time response.\n\nThe need\nCertainly apologize for the confusion earlier. To seems there was an misunderstanding. As'm provide you rephrased text now the first passage of.\n\n---\n\n\nOperational amplifiers typically have multiple poles in their circuits. For example, in a folded-cascode topology, both the folding node and the output node contribute poles. As a result, op amps generally need to be \"compensated,\" meaning their open-loop transfer function must be adjusted to ensure the closed-loop circuit remains stable and the time response is well-behaved.\n\nThe need for compensation arises because the magnitude of $|\\beta H|$ does not decrease to unity before the phase $\\angle \\beta H$ reaches $-180^{\\circ}$. To achieve stability, we can either (1) minimize the overall phase shift, thus moving the phase crossover outward [Fig. 10.15(a)]; or (2) decrease the gain with frequency, thereby moving the gain crossover inward [Fig. 10.15(b)]. The first approach involves minimizing the number of poles in the signal path through proper design. Since each additional stage adds at least one pole, this means reducing the number of stages, which can result in lower voltage gain and/or limited output swings (Chapter 9). The second approach, on the other hand, maintains low-frequency gain and output swings but reduces bandwidth by causing the gain to fall at lower frequencies."
},
{
    "text": "---[Attention]---\nImage Descriptions: Textual descriptions have been generated for images referenced in the [Context Provided] section. Additionally, these descriptions have been rephrased to preserve the original meaning and length.\n\n---[Task]---\nPlease rephrase the content provided in the [Context Provided] section. The revised version should retain the same meaning and length as the original text.\n\n---[Context Provided]---\nRephrased Text:\n\nTypical operational amplifier circuits are characterized by the presence of numerous poles. In a folded-cascode configuration, both the folding node and the output node each introduce poles. Consequently, operational amplifiers typically require \"compensation,\" which involves altering their open-loop transfer function to ensure that the closed-loop circuit is stable and exhibits a well-defined time response.\n\nThe necessity for compensation stems from the fact that $|\\beta H|$ does not drop to unity prior to $\\angle \\beta H$ reaching $-180^{\\circ}$. We hypothesize that stability can be achieved either by (1) reducing the total phase shift to push the phase crossover further [Fig. 10.15(a)]; or by (2) decreasing the gain as frequency increases to shift the gain crossover closer [Fig. 10.15(b)]. To minimize the phase shift, it is essential to design the signal path to have as few poles as possible. As each additional stage adds at least one pole, this implies that the number of stages should be kept to a minimum. This approach can result in lower voltage gain and/or restricted output swing (refer to Chapter 9). Alternatively, the second method maintains the low-frequency gain and output swings but narrows the bandwidth by compelling the gain to decrease at lower frequencies.\n\nimage_name:Figure 10.15(a)\ndescription:Figure 10.15 presents a graph featuring two plots, each illustrating different aspects of the frequency response within an operational amplifier (op-amp) design.\n\n1. **Graph Type and Purpose:**\n- The presented graph is a Bode plot, a standard tool for examining the frequency response of systems.\n\n2. **Axis Labels and Units:**\n- The upper plot has a vertical axis labeled `20log|H()|`, denoting the loop gain magnitude in decibels (dB), with the horizontal axis marked `log()`, indicating a logarithmic frequency scale.\n- The lower plot features a vertical axis labeled `H()`, representing the loop gain phase angle in degrees, and the horizontal axis is also `log()`.\n\n3. **Overall Behavior and Trends:**\n- In the magnitude plot (upper), the gain is constant initially and then diminishes with increasing frequency, exhibiting characteristics of a typical low-pass filter.\n- In the phase plot (lower), the phase starts at around 0 and decreases, eventually approaching -180, indicating a phase lag that intensifies with rising frequency.\n\n4. **Key Features and Technical Details:**\n- The magnitude plot features a distinct break point where the gain begins to roll off, marking the cutoff frequency.\n- The phase plot shows a gradual phase decrease, with a significant change in slope as the frequency increases.\n- The modified design is depicted by a lighter line in the phase plot, indicating a less abrupt phase drop, which suggests an enhanced phase margin.\n\n5. **Annotations and Specific Data Points:**\n- Dashed lines denote critical frequencies where the magnitude crosses 0 dB and where the phase is near -180.\n- The modified design annotation emphasizes the modifications made to enhance stability through phase response adjustments.\n\nThis Bode plot visually demonstrates the impact of frequency compensation techniques, such as pole positioning and gain adjustment, in ensuring stability and desired performance in operational amplifier circuits.\n\nimage_name:(b)\ndescription:This graph is a Bode plot, utilized to analyze the frequency response of a system, with a focus on gain and phase shift. It includes two main plots: the magnitude plot and the phase plot.\n\n1. **Graph Type and Purpose:**\n- The depicted graph is a Bode plot, depicting both the magnitude and phase response of a system.\n\n2. **Axis Labels and Units:**\n- The magnitude plot is at the top, with the vertical axis labeled `20log|H()|`, indicating gain in decibels (dB), and the horizontal axis labeled `log()`, representing a logarithmic frequency scale.\n- The phase plot is at the bottom, with the vertical axis labeled `H()`, indicating the phase angle in degrees, and the horizontal axis also marked `log()`.\n\n3. **Overall Behavior and Trends:**\n- In the magnitude plot, the graph begins with a high gain and decreases in a segmented linear pattern as frequency increases. The modified design is depicted with a lighter line, signifying a more gradual decrease in gain.\n- In the phase plot, the phase starts at 0 and diminishes towards -180 as frequency increases, with some fluctuations along the way.\n\n4. **Key Features and Technical Details:**\n- The magnitude plot displays two distinct gradients, suggesting changes in the system's pole-zero arrangement.\n- Dashed vertical lines denote critical frequencies where the magnitude crosses 0 dB and where the phase approaches -180.\n- The modified design annotation highlights the adjustments made to improve stability by modifying the phase response.\n\n5. **Annotations and Specific Data Points:**\n- The plot includes annotations for a 'Modified Design', showing an improvement in phase margin through adjustments in gain crossover frequency.\n- The dashed lines indicate critical points where the system's response changes significantly, aiding in the analysis of system stability and performance.\n\nThis Bode plot demonstrates the influence of frequency compensation techniques, such as pole repositioning and gain modification, in maintaining stability and desired performance in operational amplifier circuits. The modifications aim to elevate the phase margin, thereby improving the overall system stability.\n\nFigure 10.15 illustrates frequency compensation through (a) shifting the phase crossover out and (b) advancing the gain crossover in.\n\nIn practice, we strive to design an operational amplifier with as few poles as possible while satisfying other requirements. However, if the resulting circuit lacks sufficient phase margin, we must compensate the operational amplifier, i.e., adjust the design to direct the gain crossover towards the origin. This process considers the $\\beta$ value based on the final design criteria. For instance, a closed-loop gain of 4 may correspond to $\\beta \\approx 0.25$ when the loop gain is considerable. ${ }^{3}$ Essentially, we need not compensate the circuit for $\\beta=1$ if the closed-loop gain is consistently high.\n\nLet us apply these principles to the telescopic-cascode operational amplifier depicted in Fig. 10.16, where a PMOS current mirror accomplishes differential to single-ended conversion. We identify various poles within the signal paths: path 1 includes a high-frequency pole at the source of $M_{3}$, a mirror pole at node $A$, and another high-frequency pole at the source of $M_{7}$, whereas path 2 features a high-frequency pole at the source of $M_{4}$. The two paths share a pole at the output.\n\nEstimating the relative positioning of these poles is instructive. Due to the operational amplifier's high output resistance compared to the small-signal resistances observed at other circuit nodes, we anticipate that, even with moderate load capacitance, the output pole, $\\omega_{p, \\text { out }}$, is closest to the origin. Known as the \"dominant pole,\" $\\omega_{p, \\text { out }}$ usually determines the open-loop 3-dB bandwidth.\n\nWe further surmise that the first \"nondominant pole,\" i.e., the closest pole to the origin after the dominant pole, is located at node $A$. This is because the total capacitance at this node, roughly equal to $C_{G S 5}+C_{G S 6}+$ $C_{D B 5}+2 C_{G D 6}+C_{D B 3}+C_{G D 3}$, is typically much larger than that at nodes $X, Y$, and $N$, and the small-signal resistance of $M_{5}$, approximately $1 / g_{m 5}$, is relatively high as well.\n\nWhich node contributes the next nondominant pole: $N$ or $X$ (and $Y$)? Referring back to Chapter 9, we recall that to achieve a low overdrive and a reasonable voltage headroom, the PMOS devices in the operational amplifier are typically wider than the NMOS transistors. Comparing $M_{4}$ and $M_{7}$, and disregarding body effect, we note that since $g_{m}=2 I_{D} /\\left|V_{G S}-V_{T H}\\right|$, if the two transistors are designed to have the same overdrive, they also exhibit the same transconductance. However, from square-law characteristics, we have $W_{4} / W_{7}=\\mu_{p} / \\mu_{n}$, which is approximately $1 / 2$ to $1 / 3$. Thus, nodes $N$ and $X$ (or $Y$) see roughly equivalent small-signal resistances to ground, but node $N$ is subjected to significantly more capacitance. Therefore, it is plausible to assume that node $N$ contributes the next nondominant pole. Figure 10.17 illustrates the outcomes, indicating the capacitance at nodes $A, N$, and $X$ as $C_{A}, C_{N}$, and $C_{X}$, respectively. The poles at nodes $X$ and $Y$ are nearly identical, and their corresponding terms in the transfer functions of path 1 and path 2 can be factored out. Thus, they are counted as one pole rather than two.\n\nimage_name:Figure 10.17 Pole locations for the op amp of Fig. 10.16.\ndescription:Figure 10.17 is a pole-zero plot for an operational amplifier, illustrating the locations of poles in the complex frequency plane. The graph is a two-dimensional plot, with the real axis () on the horizontal and the imaginary axis (j) on the vertical.\n\n1. **Graph Type and Purpose:**\n- This is a pole-zero plot, typically employed in control systems and signal processing to depict the positions of poles and zeros of a transfer function in the complex plane.\n\n2. **Axis Labels and Units:**\n- The horizontal axis is labeled as , representing the real part of the complex frequency.\n- The vertical axis is labeled as j, representing the imaginary part of the complex frequency.\n- Units are not explicitly provided but are typically in radians per second for frequency.\n\n3. **Overall Behavior and Trends:**\n- The graph displays several poles marked as crosses () along the real axis.\n- These poles are arranged from left to right with increasing real values, suggesting increasing damping or decreasing frequency response as you move rightward.\n\n4. **Key Features and Technical Details:**\n- The poles are labeled with specific terms: \\(-\\frac{g_{m3}}{C_{X}}, -\\frac{g_{m7}}{C_{N}}, -\\frac{g_{m5}}{C_{A}},\\) and \\(-\\frac{1}{R_{out}C_{L}}\\).\n- These terms represent the inverse of time constants associated with various nodes or stages within the amplifier, with \\(g_{m}\\) signifying transconductance and \\(C\\) indicating capacitance.\n- The pole \\(-\\frac{1}{R_{out}C_{L}}\\) is likely the dominant pole, as it is positioned farthest to the right, indicating a lower frequency response limit.\n\n5. **Annotations and Specific Data Points:**\n- The poles are critical points that define the frequency response and stability of the amplifier.\n- No specific numerical values are provided, but the labels offer insight into the relative contributions of various components to the system's dynamics.\n\nWith the positions of the poles approximately determined, we can create the magnitude and phase plots for $\\beta H$, using $\\beta=1$ for the worst-case scenario. Shown in Fig. 10.18, these characteristics suggest that the mirror pole typically confines the phase margin as its phase contribution occurs at lower frequencies than other nondominant poles.\n\nRecall from Chapter 6 that differential pairs utilizing active current mirrors exhibit a left-half-plane zero situated at twice the mirror pole frequency. The circuit of Fig. 10.16 contains such a zero as well. Located at $2 \\omega_{p, A}$, the zero affects both the magnitude and phase characteristics. The analysis is left to the reader.\n\nCompensation Procedure: How should we compensate the telescopic-cascode operational amplifier? Remember that our ultimate objective is to ensure a loop gain less than unity at the phase crossover frequency. Assume that the number and location of nondominant poles and, hence, the phase plot at frequencies above roughly $10 \\omega_{p, \\text { out }}$, remain constant. Starting with the original response depicted in Fig. 10.19, which exhibits a negative phase margin, we must compel the loop gain to decline such that the gain crossover point moves closer to the origin. To achieve this, we merely lower the frequency of the dominant pole, $\\omega_{p 1}$, by increasing the load capacitance. The crucial point is that the phase contribution of the dominant pole near the gain or phase crossover point is close to $90^{\\circ}$ and relatively independent of the pole's location. As depicted in Fig. 10.19, moving the dominant pole towards the origin influences the magnitude plot but not the pivotal section of the phase plot. If $\\omega_{p 1}$ is decreased sufficiently, the PM reaches an acceptable value, but at the expense of bandwidth.\n\nimage_name:Figure 10.19 Translating the dominant pole toward the origin.\ndescription:The graph in Figure 10.19 is a Bode plot comprising two separate plots: a magnitude plot and a phase plot, both sharing the same horizontal axis for frequency represented as \\( \\log(\\omega) \\), where \\( \\omega \\) denotes the angular frequency.\n\nMagnitude Plot:\n- **Vertical Axis:** The magnitude plot's vertical axis is labeled as \\( 20\\log|\\beta H(\\omega)| \\), indicating the gain in decibels (dB).\n- **Behavior:** The plot displays a standard low-pass filter response. Initially, the magnitude is constant at 0 dB, denoting a flat response at low frequencies. As frequency increases, the magnitude starts to decline, indicating a reduction in gain.\n- **Dominant Pole:** The frequency \\( \\omega_{p1} \\) is marked, signifying the location of the dominant pole. The original response is depicted in a thicker line, and a translated response (with the dominant pole shifted toward the origin) is illustrated in a lighter line, illustrating the influence of pole movement.\n\nPhase Plot:\n- **Vertical Axis:** The phase plot's vertical axis is labeled as \\( \\angle \\beta H(\\omega) \\), representing the phase shift in degrees.\n- **Behavior:** The phase begins at 0 degrees and decreases as frequency increases. A significant phase shift occurs around the dominant pole \\( \\omega_{p1} \\), eventually approaching \\(-180^{\\circ}\\).\n- **Phase Margin (PM):** The phase margin is annotated, with areas marked \\( PM > 0 \\) and \\( PM < 0 \\). This indicates the stability of the system, with a positive phase margin suggesting stability and a negative phase margin indicating potential instability.\n\nKey Features:\n- **Annotations:** The graph includes annotations indicating the original response and the effects of shifting the dominant pole. The critical frequencies and phase margins are highlighted, providing insight into the system's stability and performance.\n- **Critical Values:** The plot emphasizes the importance of the dominant pole \\( \\omega_{p1} \\) in affecting both the magnitude and phase characteristics, particularly in determining the phase margin and system stability.\n\nTo determine how much the dominant pole must be shifted and arrive at an essential conclusion, let us assume that (1) the second nondominant pole ( $\\omega_{p, N}$ ) in Fig. 10.16 is much higher than the mirror pole such that the phase shift at $\\omega=\\omega_{p, A}$ is equal to $-135^{\\circ}$, and (2) a phase margin of $45^{\\circ}$ (which is commonly insufficient) is necessary. To compensate the circuit, we commence from $\\angle \\beta H(\\omega)=-180^{\\circ}+\\mathrm{PM}=-135^{\\circ}$ and identify the corresponding gain crossover frequency, in this case, $\\omega_{p, A}$ (Fig. 10.20). Since the dominant pole must reduce the gain to unity at $\\omega_{p, A}$ with a slope of $20 \\mathrm{~dB} / \\mathrm{dec}$, we draw a straight line from $\\omega_{p, A}$ towards the origin with this slope, thereby obtaining the new magnitude of the dominant pole, $\\omega_{p, \\text { out }}^{\\prime}$. Consequently, the load capacitance must be increased by a factor of $\\omega_{p, \\text { out }} / \\omega_{p, \\text { out }}^{\\prime}$.\n\nimage_name:Figure 10.20 Translating the dominant pole toward the origin for $45^{\\circ}$ phase margin.\ndescription:The graph in Figure 10.20 consists of two plots, both on logarithmic scales for frequency () on the x-axis. The top plot is a magnitude plot, with the y-axis labeled as \"20log|H()|\" in decibels (dB). The bottom plot is a phase plot, with the y-axis labeled as \"H()\" in degrees.\n\nTop Plot: Magnitude\n- **Graph Type:** Bode magnitude plot.\n- **Axes:**\n- **X-axis:** Frequency () on a logarithmic scale.\n- **Y-axis:** Magnitude in decibels (20log|H()|).\n- **Overall Behavior and Trends:**\n- The plot begins at a high gain level, remains flat until it reaches a frequency labeled as _{p,out}.\n- Beyond _{p,out}, the gain commences to decrease in a linear fashion at a rate of -20 dB/decade, suggesting the presence of a dominant pole.\n- **Key Features and Technical Details:**\n- The line with a -20 dB/dec slope is highlighted, depicting the effect of the dominant pole.\n- Critical frequencies are marked: _{p,out} and _{p,A}.\n\nBottom Plot: Phase\n- **Graph Type:** Bode phase plot.\n- **Axes:**\n- **X-axis:** Frequency () on a logarithmic scale.\n- **Y-axis:** Phase in degrees (H()).\n- **Overall Behavior and Trends:**\n- The phase starts at 0 degrees and diminishes as frequency increases.\n- A significant phase drop is observed, reaching approximately -135 degrees.\n- **Key Features and Technical Details:**\n- The phase plot shows a decrease in phase angle, typical of a system with poles affecting the phase margin.\n- The phase margin at the unity-gain frequency is implied to be 45 degrees, as indicated by the context of the figure.\n\nAnnotations and Specific Data Points:\n- The magnitude plot includes a reference line indicating the slope of -20 dB/decade.\n- Frequencies _{p,out}"
},
{
    "text": "---[Attention]---\nImage Descriptions: Textual descriptions of images linked in the [Context Provided] section have been converted from visual content. You are required to rephrase the descriptions to preserve the original intent and length.\n---[Task]---\nPlease rephrase the descriptions provided in the [Context Provided] Section. Ensure the rephrased version retains the original meaning and content.\n---[Context Provided]---\nRephrased text:\n\n```\nCommon operational amplifier circuits feature multiple poles. In a configuration utilizing the folded-cascode technique, both the folded node and the output node each introduce poles. As a result, operational amplifiers often necessitate compensation, which involves modifying their open-loop transfer function to ensure the closed-loop circuit remains stable and exhibits a well-behaved time response.\n\nThe requirement for compensation stems from the fact that $|\\beta H|$ does not drop to unity sufficiently before $\\angle \\beta H$ reaches $-180^{\\circ}$. It is proposed that stability can be attained through either (1) minimizing the overall phase shift, thereby delaying the phase crossover [Figure 10.15(a)]; or (2) reducing the gain as the frequency increases, thereby advancing the gain crossover [Figure 10.15(b)]. The first method necessitates an effort to minimize the number of poles in the signal path through careful design. As each additional stage contributes at least one pole, this implies that the number of stages should be minimized, which results in a circuit with lower voltage gain and/or limited output swings (refer to Chapter 9). Conversely, the second method preserves the low-frequency gain and output swings but decreases the bandwidth by forcing the gain to decrease at lower frequencies.\nimage_name:Figure 10.15(a)\ndescription:Figure 10.15 displays a Bode plot with two separate graphs, each depicting distinct aspects of the frequency response within an operational amplifier (op-amp) design.\n\n1. **Graph Type and Purpose:**\n- The graph is a Bode plot, a standard tool for analyzing the frequency response of systems.\n\n2. **Axis Labels and Units:**\n- The upper graph features a vertical axis labeled `20log|H()|`, representing the magnitude of the loop gain in decibels (dB), with the horizontal axis labeled `log()`, indicating a logarithmic frequency scale.\n- The lower graph has a vertical axis labeled `H()`, denoting the phase angle of the loop gain in degrees, and also uses a logarithmic frequency scale for the horizontal axis.\n\n3. **General Behavior and Trends:**\n- In the magnitude plot (upper), the gain is constant initially and then decreases with frequency, following a characteristic of a typical low-pass filter.\n- In the phase plot (lower), the phase begins near 0 and decreases, approaching -180 as frequency increases, indicating phase lag.\n\n4. **Significant Features and Technical Details:**\n- The magnitude plot displays a distinct break point where the gain starts to decline, signifying the cutoff frequency.\n- The phase plot shows a gradual phase decrease, with a noticeable change in slope as frequency increases.\n- The modified design is depicted with a lighter line in the phase plot, indicating a less sharp decline, which suggests an improved phase margin.\n\n5. **Annotations and Specific Data Points:**\n- Dashed lines indicate critical frequencies where the magnitude crosses 0 dB and the phase approaches -180.\n- The modified design annotation emphasizes the changes made to improve stability by altering the phase response.\n\nThis Bode plot visually demonstrates the impact of frequency compensation techniques, such as pole shifting and gain adjustment, on maintaining stability and desired performance in op-amp circuits.\n\nimage_name:(b)\ndescription:Figure 10.15(b) presents a Bode plot that utilizes both magnitude and phase plots to analyze the frequency response of a system, with an emphasis on gain and phase shift.\n\n1. **Graph Type and Purpose:**\n- The graph is a Bode plot, displaying both the magnitude and phase response of a system.\n\n2. **Axis Labels and Units:**\n- The magnitude plot is at the top with the vertical axis labeled as \\(20\\log|\\beta H(\\omega)|\\) in dB, and the horizontal axis labeled as \\(\\log(\\omega)\\), representing a logarithmic frequency scale.\n- The phase plot is at the bottom with the vertical axis labeled as \\(\\angle \\beta H(\\omega)\\) in degrees and uses the same logarithmic frequency scale for the horizontal axis.\n\n3. **General Behavior and Trends:**\n- In the magnitude plot, the graph begins with a high gain level and decreases in a piecewise linear fashion with increasing frequency, with the modified design indicated by a lighter line.\n- In the phase plot, the phase starts at 0 and decreases toward -180 with some fluctuations.\n\n4. **Significant Features and Technical Details:**\n- The magnitude plot shows two distinct slopes, reflecting changes in the system's pole-zero configuration.\n- Dashed vertical lines mark critical frequencies where the magnitude crosses 0 dB and the phase approaches -180.\n- The modified design annotation highlights the adjustments made to enhance stability by modifying the phase response.\n\n5. **Annotations and Specific Data Points:**\n- The plot includes an 'Adjusted Design' annotation that indicates an improvement in phase margin by altering the gain crossover frequency.\n- The dashed lines denote critical points where the system's response changes significantly, aiding in the assessment of system stability and performance.\n\nThis Bode plot demonstrates the effect of frequency compensation techniques, such as pole relocation and gain adjustment, on achieving stability and desired performance in operational amplifier circuits.\n\nFigure 10.15: Frequency compensation strategies illustrated by (a) pole movement and (b) gain crossover advancement.\n\nIn practice, we initially strive to design an operational amplifier to minimize the number of poles while meeting additional requirements. Given that the resulting circuit may still lack adequate phase margin, we proceed to compensate the operational amplifier, meaning we modify the design to move the gain crossover closer to the origin. This process is guided by the chosen  value based on the final design specifications. For instance, a closed-loop gain of 4 may correspond to   0.25 if the loop gain is high. Otherwise, we may not need to compensate for =1 if the closed-loop gain is consistently higher.\n\nLet's apply these principles to the telescopic-cascode operational amplifier depicted in Figure 10.16, where a PMOS current mirror facilitates differential to single-ended conversion. We identify several poles within the signal paths: path 1 contains high-frequency poles at the sources of M3 and M7, a mirror pole at node A, and another high-frequency pole at the source of M7. Path 2 contains a high-frequency pole at the source of M4. Both paths share a pole at the output.\n\nIt is insightful to estimate the relative positioning of these poles. Considering the high output resistance of the operational amplifier compared to the small-signal resistances observed at other circuit nodes, we anticipate that the output pole, $\\omega_{p, \\text{out}}$, is closest to the origin. Known as the \"dominant pole,\" $\\omega_{p, \\text{out}}$ typically determines the open-loop 3-dB bandwidth.\n\nWe also infer that the first \"nondominant pole,\" i.e., the closest pole to the origin after the dominant pole, arises at node A. This is because the total capacitance at this node, approximately $C_{G S 5}+C_{G S 6}+$ $C_{D B 5}+2 C_{G D 6}+C_{D B 3}+C_{G D 3}$, is substantially larger than that at nodes X, Y, and N, and the small-signal resistance of M5, roughly $1 / g_{m 5}$, is also relatively large.\n\nIdentifying which node yields the next nondominant pole: N or X (and Y)? Recalling from Chapter 9, PMOS devices in operational amplifiers are generally wider than NMOS transistors to achieve low overdrive and a reasonable voltage headroom. Comparing M4 and M7, neglecting body effect, we observe that since $g_{m}=2 I_{D} /\\left|V_{G S}-V_{T H}\\right|$, if the two transistors are designed with the same overdrive, they also exhibit the same transconductance. However, from square-law characteristics, we have $W_{4} / W_{7}=\\mu_{p} / \\mu_{n}$, which is approximately 1/2 to 1/3. Thus, nodes N and X (or Y) see roughly equal small-signal resistances to ground, but node N bears more capacitance. It is, therefore, plausible to assume that node N contributes the next nondominant pole. Figure 10.17 illustrates the results, indicating the capacitance at nodes A, N, and X by $C_{A}, C_{N}$, and $C_{X}$, respectively. The poles at nodes X and Y are nearly equal, and their corresponding terms in the transfer functions of path 1 and path 2 can be factored out. Thus, they are counted as a single pole rather than two.\nimage_name:Figure 10.17 Pole locations for the op amp of Fig. 10.16.\ndescription:Figure 10.17 shows a pole-zero plot for an operational amplifier, illustrating the positions of poles in the complex frequency plane. The graph is a two-dimensional plot with the real axis () on the horizontal and the imaginary axis (j) on the vertical.\n\n1. **Graph Type and Purpose:**\n- This is a pole-zero plot, commonly used in control systems and signal processing to represent the locations of poles and zeros of a transfer function in the complex plane.\n\n2. **Axis Labels and Units:**\n- The horizontal axis is labeled as , representing the real part of the complex frequency.\n- The vertical axis is labeled as j, representing the imaginary part of the complex frequency.\n- Units are not explicitly stated, but they are typically in radians per second for frequency.\n\n3. **General Behavior and Trends:**\n- The graph depicts several poles marked as crosses () along the real axis.\n- These poles are arranged from left to right, increasing in real values, suggesting increasing damping or decreasing frequency response as you move rightward.\n\n4. **Significant Features and Technical Details:**\n- The poles are labeled with specific terms: \\(-\\frac{g_{m3}}{C_{X}}, -\\frac{g_{m7}}{C_{N}}, -\\frac{g_{m5}}{C_{A}},\\) and \\(-\\frac{1}{R_{out}C_{L}}\\).\n- These terms represent the inverse of time constants associated with different nodes or stages in the amplifier, with \\(g_{m}\\) representing transconductance and \\(C\\) representing capacitance.\n- The pole \\(-\\frac{1}{R_{out}C_{L}}\\) is likely the dominant pole, as it is positioned farthest to the right, indicating a lower frequency response limit.\n\n5. **Annotations and Specific Data Points:**\n- The poles are critical points that define the frequency response and stability of the amplifier.\n- No specific numerical values are given, but the labels provide insight into the relative contributions of various components to the system's dynamics.\n\nWith an approximate position of the poles established, we can construct the magnitude and phase plots for H using =1 for the worst-case scenario. As depicted in Figure 10.18, such characteristics reveal that the mirror pole generally limits the phase margin due to its phase contribution at lower frequencies than that of other nondominant poles.\nimage_name:Figure 10.18 Bode plots of loop transmission for op amp of Fig. 10.16\ndescription:Figure 10.18 illustrates a Bode plot of the loop transmission characteristics for the operational amplifier circuit shown in Figure 10.16. The Bode plot includes two components: the magnitude plot and the phase plot, both presented against frequency on a logarithmic scale.\n\n1. **Magnitude Plot (Top):**\n- **Y-axis:** The vertical axis represents the magnitude of the loop transmission, denoted as \\(20\\log|\\beta H(\\omega)|\\) in decibels (dB).\n- **X-axis:** The horizontal axis represents frequency \\(\\omega\\) on a logarithmic scale.\n- **Overall Behavior:** The magnitude plot starts at a high level and decreases in a piecewise linear manner as frequency increases, indicating a reduction in gain.\n- **Key Features:**\n- Several pole frequencies are marked with vertical dashed lines: \\(\\omega_{p,\\text{out}}\\), \\(\\omega_{p,A}\\), \\(\\omega_{p,N}\\), and \\(\\omega_{p,X}\\). Each pole contributes to a slope change in the magnitude plot.\n- The slope of the plot changes at each pole, typically decreasing by 20 dB/decade per pole.\n\n2. **Phase Plot (Bottom):**\n- **Y-axis:** The vertical axis represents the phase of the loop transmission, \\(\\angle \\beta H(\\omega)\\), in degrees.\n- **X-axis:** The horizontal axis is the same logarithmic frequency scale as the magnitude plot.\n- **Overall Behavior:** The phase plot shows a downward trend, indicating a phase shift that becomes more negative with increasing frequency.\n- **Key Features:**\n- The phase decreases through significant thresholds at \\(-180^\\circ\\), \\(-270^\\circ\\), and approaches \\(-360^\\circ\\), implying multiple poles contributing to phase lag.\n\nThis Bode plot emphasizes the impact of various poles on the loop transmission, with special attention to how these poles influence both the gain and phase margin. The mirror pole, as mentioned in the context, typically limits the phase margin due to its phase shift at lower frequencies.\n\nReferring back to Chapter 6, differential pairs using active current mirrors exhibit a left-half-plane zero located at twice the mirror pole frequency. The circuit of Figure 10.16 contains such a zero as well. Located at $2 \\omega_{p, A}$, the zero affects both the magnitude and phase characteristics. The analysis is left to the reader.\n\nCompensation Procedure: To compensate the telescopic-cascode operational amplifier, it is crucial to ensure that the loop gain is sufficiently less than unity at the phase crossover frequency. Assuming that the number and location of the nondominant poles, and hence the phase plot at frequencies above approximately $10 \\omega_{p, \\text { out }}$, remain unchanged, we begin with the original response shown in Figure 10.19, which features a negative phase margin. We must adjust the loop gain to ensure that the gain crossover moves closer to the origin. This can be achieved by reducing the frequency of the dominant pole, $\\omega_{p 1}$, by increasing the load capacitance. The essential point is that the phase contribution of the dominant pole near the gain or phase crossover is nearly $90^{\\circ}$ and largely independent of the pole's location. That is, as illustrated in Figure 10.19, shifting the dominant pole closer to the origin affects the magnitude plot, but not the critical portion of the phase plot. If $\\omega_{p 1}$ is reduced sufficiently, the phase margin reaches an acceptable level, but at the cost of bandwidth.\nimage_name:Figure 10.19 Translating the dominant pole toward the origin.\ndescription:Figure 10.19 presents a Bode plot consisting of two separate plots: a magnitude plot and a phase plot, both sharing a common horizontal axis representing frequency (log()).\n\nMagnitude Plot:\n- **Vertical Axis:** The magnitude plot's vertical axis is labeled as \\( 20\\log|\\beta H(\\omega)| \\), indicating the gain in decibels (dB).\n- **Behavior:** The plot shows a typical low-pass filter response, initially constant at 0 dB, indicating a flat response at low frequencies. As frequency increases, the magnitude begins to decline, indicating a reduction in gain.\n- **Dominant Pole:** The frequency \\( \\omega_{p1} \\) is marked, indicating the location of the dominant pole. The original response is depicted in a thicker line, and the translated response (with the dominant pole shifted closer to the origin) is shown in a lighter line.\n\nPhase Plot:\n- **Vertical Axis:** The phase plot's vertical axis is labeled as \\( \\angle \\beta H(\\omega) \\), representing the phase shift in degrees.\n- **Behavior:** The phase starts at 0 degrees and decreases as frequency increases. A significant phase shift occurs around the dominant pole \\( \\omega_{p1} \\), eventually approaching \\(-180^{\\circ}\\).\n- **Phase Margin (PM):** The phase margin is annotated, with areas marked \\( PM > 0 \\) and \\( PM < 0 \\). This indicates the stability of the system, with a positive phase margin suggesting stability and a negative phase margin indicating potential instability.\n\nKey Features:\n- **Annotations:** The graph includes annotations indicating the original response and the effects of shifting the dominant pole. The critical frequencies and phase margins are highlighted, providing insight into the system's stability and performance.\n- **Critical Values:** The plot emphasizes the importance of the dominant pole \\( \\omega_{p1} \\) in affecting both the magnitude and phase characteristics, particularly in determining the phase margin and system stability.\n\nTo determine the extent to which the dominant pole must be shifted downward and to arrive at an essential conclusion, assume that (1) the second nondominant pole ( $\\omega_{p, N}$ ) in Figure 10.16 is significantly higher than the mirror pole, such that the phase shift at $\\omega=\\omega_{p, A}$ is -135, and (2) a phase margin of 45 (which is generally insufficient) is necessary. To compensate the circuit, we start from $\\angle \\beta H(\\omega)=-180^{\\circ}+\\mathrm{PM}=-135^{\\circ}$ and identify the corresponding gain crossover frequency, in this case, $\\omega_{p, A}$ (Figure 10.20). Since the dominant pole must decrease the gain to unity at $\\omega_{p, A}$ with a slope of -20 dB/decade, we draw a straight line from $\\omega_{p, A}$ toward the origin with such a slope, thus obtaining the new magnitude of the dominant pole, $\\omega_{p, \\text { out }}^{\\prime}$. Consequently, the load capacitance must be increased by a factor of $\\omega_{p, \\text { out }} / \\omega_{p, \\text { out }}^{\\prime}$.\nimage_name:Figure 10.20 Translating the dominant pole toward the origin for $45^{\\circ}$ phase margin.\ndescription:Figure 10.20 displays two plots on logarithmic scales for frequency () on the x-axis. The top plot is a magnitude plot, with the y-axis labeled as \"20log|H()|\" in decibels (dB). The bottom plot is a phase plot, with the y-axis labeled as \"H()\" in degrees.\n\nTop Plot: Magnitude\n- **Graph Type:** Bode magnitude plot.\n- **Axes:**\n- **X-axis:** Frequency () on a logarithmic scale.\n- **Y-axis:** Magnitude in decibels (20log|H()|).\n- **Behavior and Trends:**\n- The plot starts at a high gain level and remains flat until it reaches a frequency labeled as _{p,out}.\n-"
},
{
    "text": "---[Attention]---\nImages Linked in the [Context Provided] have been transformed into textual descriptions. It is required that this transformation is redone while preserving the original meaning and length of the text.\n\n---[Task]---\nRephrase the text found in the [Context Provided] Section. The rephrased version should retain the original meaning and length. Please provide the revised text below.\n\n---[Context Provided]---\nThe revised text should be equivalent in substance to the following:\n\nTypical operational amplifier circuits are equipped with multiple poles. In a folded-cascode configuration, for example, both the folding node and the output node contribute to these poles. Consequently, operational amplifiers often require \"compensation,\" which entails modifying their open-loop transfer function to ensure the closed-loop circuit is stable and that the time response is well-behaved.\n\nThe necessity for compensation stems from the fact that the magnitude of $\\beta H$ does not promptly decrease to unity as the phase angle of $\\beta H$ approaches $-180^{\\circ}$. It is postulated that stability can be achieved by (1) minimizing the total phase shift, which pushes the phase crossover further [Fig. 10.15(a)]; or (2) reducing the gain with frequency, which shifts the gain crossover closer [Fig. 10.15(b)]. The first method necessitates a design that attempts to reduce the number of poles in the signal path. As each additional stage introduces at least one pole, this implies that the number of stages must be minimized, which results in a low voltage gain and/or restricted output swings (Chapter 9). Conversely, the second method preserves low-frequency gain and output swings but narrows the bandwidth by compelling the gain to decrease at lower frequencies.\nimage_name:Figure 10.15(a)\ndescription:\nThe graphical representation in Figure 10.15 comprises two plots, each depicting a different aspect of the frequency response within an operational amplifier (op-amp) design.\n\n1. **Graph Type and Purpose:**\n- The graph is a Bode plot, widely utilized for analyzing the frequency response of systems.\n\n2. **Axis Labeling and Units:**\n- The upper plot features a vertical axis labeled `20log|H()|`, signifying the magnitude of the loop gain in decibels (dB). The horizontal axis is labeled `log()`, indicating a logarithmic scale for frequency.\n- The lower plot has a vertical axis labeled `H()`, which denotes the phase angle of the loop gain in degrees. Like the horizontal axis, it uses a logarithmic frequency scale.\n\n3. **Overall Pattern and Trends:**\n- In the magnitude plot (upper), the gain starts at a consistent level and decreases as frequency increases, reflecting a characteristic low-pass filter.\n- In the phase plot (lower), the phase begins at 0 and declines, eventually nearing -180, indicating a phase lag with increasing frequency.\n\n4. **Notable Characteristics and Technical Details:**\n- The magnitude plot displays a discernible breakpoint where the gain starts to drop, signifying the cutoff frequency.\n- The phase plot shows a gradual decrease in phase, with a notable change in gradient as the frequency increases.\n- The modified design is represented by a lighter line in the phase plot, indicating a less abrupt decrease, which suggests a better phase margin.\n\n5. **Annotation and Specific Data Points:**\n- Dashed lines denote critical frequencies where the magnitude crosses 0 dB and where the phase approaches -180.\n- The modified design annotation emphasizes the modification made to enhance stability by altering the phase response.\n\nThis Bode plot demonstrates the impact of frequency compensation techniques, like pole movement and gain adjustment, on maintaining stability and optimal performance in op-amp circuits.\n\nimage_name:(b)\ndescription:\nThe given graph is a Bode plot, which is employed for analyzing the frequency response of a system, particularly emphasizing gain and phase shift. It contains two primary plots: the magnitude plot and the phase plot.\n\n1. **Graph Type and Purpose:**\n- The graph is a Bode plot, illustrating both the magnitude and phase response of a system.\n\n2. **Axis Labeling and Units:**\n- The magnitude plot is positioned above, with the vertical axis labeled as \\(20\\log|\\beta H(\\omega)|\\), indicating the gain in decibels (dB). The horizontal axis is labeled as \\(\\log(\\omega)\\), representing the logarithm of the frequency in radians per second.\n- The phase plot is located below, with the vertical axis labeled as \\(\\angle \\beta H(\\omega)\\), indicating the phase angle in degrees. The horizontal axis also features the \\(\\log(\\omega)\\) logarithmic frequency scale.\n\n3. **Overall Pattern and Trends:**\n- In the magnitude plot, the graph begins at a high gain level and decreases in a piecewise linear fashion as frequency increases. The modified design is shown as a lighter line, indicating a more gradual reduction in gain.\n- In the phase plot, the phase starts at 0 and decreases toward -180 as frequency increases, with some fluctuations along the way.\n\n4. **Notable Characteristics and Technical Details:**\n- The magnitude plot shows two distinct slopes, indicating changes in the system's pole-zero configuration.\n- Dashed vertical lines mark critical frequencies where the magnitude crosses 0 dB and where the phase approaches -180.\n- The modified design annotation highlights the modification made to improve stability by altering the phase response.\n\n5. **Annotation and Specific Data Points:**\n- The plot includes annotations for a 'Modified Design', indicating an improvement in phase margin through adjusting the gain crossover frequency.\n- The dashed lines indicate critical points where the system's response changes significantly, aiding in the analysis of system stability and performance.\n\nThis Bode plot is used to illustrate the effect of frequency compensation techniques, such as pole movement and gain adjustment, on achieving stability and desired performance in operational amplifier circuits. Adjustments are made to enhance the phase margin, thereby improving the overall stability of the system.\n\nFigure 10.15 Frequency compensation by (a) moving PX out and (b) pushing GX in.\n\nIn practice, we first aim to design an op amp with minimal poles while fulfilling other specifications. However, the resulting circuit may still lack adequate phase margin, necessitating further compensation, i.e., modifying the design to move the gain crossover closer to the origin. These actions are based on the $\\beta$ value chosen based on the final design requirements. For example, a closed-loop gain of 4 may equate to $\\beta \\approx 0.25$ when the loop gain is substantial. ${ }^{3}$ Otherwise, there is no need to compensate for $\\beta=1$ if the closed-loop gain is consistently higher.\n\nLet's apply these concepts to the telescopic-cascode op amp depicted in Fig. 10.16, which employs a PMOS current mirror for differential to single-ended conversion. We identify several poles in the signal paths: path 1 contains a high-frequency pole at the source of $M_{3}$, a mirror pole at node $A$, and another high-frequency pole at the source of $M_{7}$, whereas path 2 contains a high-frequency pole at the source of $M_{4}$. Both paths share a pole at the output.\n\nIt is insightful to estimate the relative positions of these poles. Given that the op amp's output resistance is significantly higher than the small-signal resistances at the other circuit nodes, we expect the output pole, $\\omega_{p, \\text { out }}$, to be the closest to the origin. Known as the \"dominant pole,\" $\\omega_{p, \\text { out }}$ typically dictates the open-loop 3-dB bandwidth.\n\nWe further hypothesize that the first \"nondominant pole,\" i.e., the pole closest to the origin after the dominant pole, emerges at node $A$. This is due to the total capacitance at this node, roughly equal to $C_{G S 5}+C_{G S 6}+$ $C_{D B 5}+2 C_{G D 6}+C_{D B 3}+C_{G D 3}$, being considerably larger than at nodes $X, Y$, and $N$, and the small-signal resistance of $M_{5}$, approximately $1 / g_{m 5}$, being relatively high.\n\nThe next nondominant pole to emerge: is it at node $N$ or $X$ (and $Y$)? Recalling from Chapter 9 that PMOS devices in an op amp are generally wider than NMOS transistors to achieve low overdrive and reasonable voltage headroom, comparing $M_{4}$ and $M_{7}$, and neglecting body effect, we observe that since $g_{m}=2 I_{D} /\\left|V_{G S}-V_{T H}\\right|$, if the two transistors are designed to have the same overdrive, they also exhibit the same transconductance. However, from square-law characteristics, we have $W_{4} / W_{7}=\\mu_{p} / \\mu_{n}$, which is about $1 / 2$ to $1 / 3$. Thus, nodes $N$ and $X$ (or $Y$ ) experience roughly equal small-signal resistances to ground, but node $N$ endures much more capacitance. It is, therefore, plausible to assume that node $N$ contributes the next nondominant pole. Figure 10.17 illustrates the outcomes, designating the capacitance at nodes $A, N$, and $X$ as $C_{A}, C_{N}$, and $C_{X}$, respectively. The poles at nodes $X$ and $Y$ are nearly equivalent, and their corresponding terms in the transfer functions of path 1 and path 2 can be factored out. Therefore, they are counted as one pole rather than two.\nimage_name:Figure 10.17 Pole locations for the op amp of Fig. 10.16.\ndescription:\nFigure 10.17 is a pole-zero plot for an operational amplifier, showcasing the locations of poles in the complex frequency plane. The plot is a two-dimensional representation with the real axis () on the horizontal and the imaginary axis (j) on the vertical.\n\n1. **Graph Type and Purpose:**\n- This is a pole-zero plot, typically used in control systems and signal processing to represent the locations of poles and zeros of a transfer function in the complex plane.\n\n2. **Axis Labeling and Units:**\n- The horizontal axis is labeled as , representing the real part of the complex frequency.\n- The vertical axis is labeled as j, representing the imaginary part of the complex frequency.\n- Units are not explicitly stated but are generally in radians per second for frequency.\n\n3. **Overall Pattern and Trends:**\n- The graph shows several poles marked as crosses () along the real axis.\n- These poles are arranged from left to right with increasing real values, suggesting increasing damping or decreasing frequency response as you move rightward.\n\n4. **Notable Characteristics and Technical Details:**\n- The poles are labeled with specific terms: \\(-\\frac{g_{m3}}{C_{X}}, -\\frac{g_{m7}}{C_{N}}, -\\frac{g_{m5}}{C_{A}},\\) and \\(-\\frac{1}{R_{out}C_{L}}\\).\n- These terms represent the inverse of time constants associated with different nodes or stages in the amplifier, with \\(g_{m}\\) denoting transconductance and \\(C\\) representing capacitance.\n- The pole \\(-\\frac{1}{R_{out}C_{L}}\\) is likely the dominant pole, positioned farthest to the right, indicating a lower frequency response limit.\n\n5. **Annotation and Specific Data Points:**\n- The poles are critical points that define the frequency response and stability of the amplifier.\n- No specific numerical values are given, but the labels provide insight into the relative contributions of various components to the system's dynamics.\n\nWith the approximate positions of the poles in mind, we can construct the magnitude and phase plots for $\\beta H$, assuming $\\beta=1$ for the worst-case scenario. As depicted in Fig. 10.18, these characteristics reveal that the mirror pole usually restricts the phase margin because its phase contribution occurs at lower frequencies than that of other nondominant poles.\nimage_name:Figure 10.18 Bode plots of loop transmission for op amp of Fig. 10.16\ndescription:\nThe graph in Figure 10.18 is a Bode plot that illustrates the loop transmission characteristics for the operational amplifier circuit shown in Figure 10.16. The Bode plot features two components: the magnitude plot and the phase plot, both plotted against frequency on a logarithmic scale.\n\n1. **Magnitude Plot (Top):**\n- **Y-Axis:** The vertical axis represents the magnitude of the loop transmission, denoted as \\(20\\log|\\beta H(\\omega)|\\), in decibels (dB).\n- **X-Axis:** The horizontal axis represents frequency \\(\\omega\\) on a logarithmic scale.\n- **Overall Behavior:** The magnitude plot starts at a high level and decreases in a piecewise linear fashion as frequency increases. This signifies a reduction in gain with increasing frequency.\n- **Key Features:**\n- Several pole frequencies are marked with vertical dashed lines: \\(\\omega_{p,\\text{out}}\\), \\(\\omega_{p,A}\\), \\(\\omega_{p,N}\\), and \\(\\omega_{p,X}\\). Each pole contributes to a slope change in the magnitude plot.\n- The slope of the plot changes at each pole, typically decreasing by 20 dB/decade per pole.\n\n2. **Phase Plot (Bottom):**\n- **Y-Axis:** The vertical axis represents the phase of the loop transmission, \\(\\angle \\beta H(\\omega)\\), in degrees.\n- **X-Axis:** The horizontal axis is the same logarithmic frequency scale as the magnitude plot.\n- **Overall Behavior:** The phase plot shows a downward trend, indicating a phase shift that becomes more negative with increasing frequency.\n- **Key Features:**\n- The phase decreases through significant thresholds at \\(-180^\\circ\\), \\(-270^\\circ\\), and approaches \\(-360^\\circ\\), suggesting multiple poles contributing to phase lag.\n\nThis Bode plot underscores the influence of various poles on the loop transmission, focusing on how these poles affect both the gain and phase margin. The mirror pole, as mentioned earlier, usually limits the phase margin by contributing a phase shift at lower frequencies.\n\nRefer back to Chapter 6 for the concept that differential pairs employing active current mirrors have a left-half-plane zero at twice the mirror pole frequency. The circuit of Fig. 10.16 contains such a zero as well, located at $2 \\omega_{p, A}$. This zero affects both the magnitude and phase characteristics. The analysis of this is left for the reader to explore.\n\n#### Compensation Procedure\nTo compensate the telescopic-cascode op amp, we must first ensure that the loop gain is sufficiently less than unity at the phase crossover frequency. Assuming that the number and location of the nondominant poles remain consistent, we begin with the initial response shown in Fig. 10.19, which exhibits a negative phase margin. We must then force the loop gain to drop such that the gain crossover point moves closer to the origin. This can be achieved by decreasing the frequency of the dominant pole, $\\omega_{p 1}$, by increasing the load capacitance. The crucial aspect is that the phase contribution of the dominant pole in the vicinity of the gain or phase crossover point is approximately $90^{\\circ}$ and independent of the pole's location. That is, as illustrated in Fig. 10.19, shifting the dominant pole toward the origin affects the magnitude plot but not the critical part of the phase plot. If $\\omega_{p 1}$ is reduced sufficiently, the phase margin reaches an acceptable value, albeit at the expense of bandwidth.\nimage_name:Figure 10.19 Translating the dominant pole toward the origin.\ndescription:\nThe graph in Figure 10.19 is a Bode plot, comprising two separate plots: a magnitude plot and a phase plot. Both plots share a common horizontal axis representing frequency, labeled as \\( \\log(\\omega) \\), where \\( \\omega \\) is the angular frequency.\n\nMagnitude Plot:\n- **Vertical Axis:** The magnitude plot's vertical axis is labeled as \\( 20\\log|\\beta H(\\omega)| \\), which represents the gain in decibels (dB).\n- **Behavior:** The plot shows a typical low-pass filter response. Initially, the magnitude is constant at 0 dB, indicating a flat response at low frequencies. As frequency increases, the magnitude starts to decline, indicating a reduction in gain.\n- **Dominant Pole:** The frequency \\( \\omega_{p1} \\) is marked, indicating the location of the dominant pole. The original response is shown in a thicker line, and a translated response (with the dominant pole shifted toward the origin) is depicted in a lighter line, illustrating the effect of moving the pole.\n\nPhase Plot:\n- **Vertical Axis:** The phase plot's vertical axis is labeled as \\( \\angle \\beta H(\\omega) \\), representing the phase shift in degrees.\n- **Behavior:** The phase begins at 0 degrees and decreases as frequency increases. A significant phase shift occurs around the dominant pole \\( \\omega_{p1} \\), eventually approaching \\(-180^{\\circ}\\).\n- **Phase Margin (PM):** The phase margin is annotated, with areas marked \\( PM > 0 \\) and \\( PM < 0 \\). This indicates the stability of the system, with a positive phase margin suggesting stability and a negative phase margin indicating potential instability.\n\nKey Features:\n- **Annotations:** The graph includes annotations indicating the original response and the effects of translating the dominant pole. The critical frequencies and phase margins are highlighted, providing insight into the system's stability and performance.\n- **Critical Values:** The plot emphasizes the importance of the dominant pole \\( \\omega_{p1} \\) in affecting both the magnitude and phase characteristics, particularly in determining the phase margin and system stability.\n\nIn order to determine how much the dominant pole must be shifted and arrive at a significant conclusion, let us assume that (1) the second nondominant pole ( $\\omega_{p, N}$ ) in Fig. 10.16 is significantly higher than the mirror pole, so that the phase shift at $\\omega=\\omega_{p, A}$ is equal to $-135^{\\circ}$, and (2) a phase margin of $45^{\\circ}$ (which is typically inadequate) is necessary. To compensate the circuit, we start from $\\angle \\beta H(\\omega)=-180^{\\circ}+\\mathrm{PM}=-135^{\\circ}$ and identify the corresponding gain crossover frequency, in this case, $\\omega_{p, A}$ (Fig. 10.20). Since the dominant pole must drop the gain to unity at $\\omega_{p, A}$ with a slope of $20 \\mathrm{~dB} / \\mathrm{dec}$, we draw a straight line from $\\omega_{p, A}$ toward the origin with such a slope, thereby obtaining the new magnitude of the dominant pole, $\\omega_{p, \\text { out }}^{\\prime}$. Therefore, the load capacitance must be increased by a factor of $\\omega_{p, \\text { out }} / \\omega_{p, \\text { out }}^{\\prime}$.\nimage_name:Figure "
},
{
    "text": "In op-amp circuits, a common occurrence is the presence of multiple poles. Within the folded-cascode design, both the folding node and the output node are contributors to these poles. As a result, op-amps typically necessitate compensation to modify their open-loop transfer function, ensuring the closed-loop circuit remains stable and exhibits a favorable time response.\n\nThe requirement for compensation stems from the fact that the magnitude of the loop gain, $|\\beta H|$, does not adequately decrease to unity before the phase, $\\angle \\beta H$, reaches $-180^{\\circ}$. To establish stability, we propose two strategies: (1) to reduce the overall phase shift to push the phase crossover further [refer to Fig. 10.15(a)]; or (2) to decrease the gain at lower frequencies, moving the gain crossover closer [Fig. 10.15(b)]. The first method entails minimizing the poles in the signal path through careful design. Given that each additional stage introduces at least one pole, this implies that the number of stages should be minimized, which may result in reduced voltage gain and/or limited output swings [refer to Chapter 9]. Conversely, the second approach maintains the low-frequency gain and output swings but narrows the bandwidth by compelling the gain to decrease at lower frequencies.\n\nThe Bode plot in Figure 10.15(a) portrays the frequency response of an operational amplifier (op-amp) design, highlighting the two plots that depict different aspects of the frequency response.\n\n1. **Graph Type and Function:** The plot is a Bode plot, a tool frequently utilized to examine the frequency response of systems.\n\n2. **Axes Labels and Units:** The upper plot features a vertical axis denoted as `20log|H()|`, indicating the loop gain magnitude in decibels (dB). The horizontal axis is labeled `log()`, signifying a logarithmic scale for frequency. The lower plot exhibits a vertical axis labeled `H()`, which denotes the phase angle of the loop gain in degrees, with the horizontal axis also set to `log()`.\n\n3. **Overall Behavior and Trends:** In the magnitude plot, the gain is constant initially and then diminishes with increasing frequency, exhibiting characteristics of a typical low-pass filter. The phase plot displays a decrease from nearly 0 to -180 as the frequency increases, indicating a phase lag.\n\n4. **Key Features and Technical Details:** The magnitude plot reveals a distinct breakpoint where the gain begins to roll off, marking the cutoff frequency. The phase plot demonstrates a gradual phase reduction, with a notable slope change as the frequency rises. The modified design is depicted by a lighter line in the phase plot, indicating a less steep decline, suggesting an enhanced phase margin.\n\n5. **Annotations and Specific Data Points:** Dashed lines signify critical frequencies where the magnitude crosses 0 dB and the phase approaches -180. The modified design is highlighted to emphasize the stability improvement achieved by adjusting the phase response.\n\nThe Bode plot exemplifies how frequency compensation techniques, like pole shifting and gain adjustment, contribute to stability and performance in op-amp circuits."
},
{
    "text": "---[Attention]---\nImages and descriptions: Textual descriptions have been generated for any images referenced within the [Context Provided] section. The original images have been replaced with these descriptions to maintain accessibility and clarity.\n\n---[Task]---\nPlease revise the content within the [Context Provided] section to maintain the intended message while altering the sentence structure and phrasing. The revised text should maintain the same length as the original.\n\n---[Context Provided]---\nRevised text:\n```\nStandard operational amplifier circuits typically feature numerous poles. In a folded-cascode design, for instance, both the folded node and the output node introduce poles. Consequently, op-amps often require \"compensation\"  an adjustment to their open-loop transfer function to ensure the closed-loop circuit is stable and the response times are well-controlled.\n\nCompensation is necessary because the magnitude of the loop gain, $|\\beta H|$, does not rapidly diminish to unity as the phase, $\\angle \\beta H$, approaches $-180^{\\circ}$. We propose that stability can be achieved by either (1) minimizing the total phase shift, pushing the phase crossover point outward [refer to Fig. 10.15(a)]; or (2) reducing the gain as frequency increases, moving the gain crossover point inward [see Fig. 10.15(b)]. The first method necessitates a careful design to minimize poles in the signal path, which in turn means reducing the number of stages  a strategy that can lead to lower voltage gain and/or more restricted output voltage ranges (refer to Chapter 9). The second method preserves the low-frequency gain and output range but limits the bandwidth by causing the gain to decrease at lower frequencies.\n\n[Image description for Figure 10.15(a): The figure illustrates two plots representing various aspects of frequency response within an operational amplifier (op-amp) design.]\n\n[Image description for Figure 10.15(b): This figure represents a Bode plot, used to analyze the frequency response of a system, specifically focusing on the gain and phase shifts.]\n\n[Continued text description and revisions omitted for brevity.]\n```"
},
{
    "text": "Rephrased text:\n\nOperational amplifier circuits typically feature numerous poles. For instance, in a folded-cascode configuration, both the folding and output nodes contribute additional poles. Consequently, op amps often require \"compensation,\" which entails modifying their open-loop transfer function to ensure stability and a well-behaved time response in the closed-loop circuit.\n\nThe necessity for compensation stems from the fact that $|\\beta H|$ does not1\\angle \\beta H$-180^{\\circ}$1[10.15a]2[10.15b]/9\n\n10.15op-amp\n\n-180\n\n\\beta4\\beta \\approx 0.25\\beta=1\n\n10.16cascodePMOS1$M_{3}$$A$$M_{7}$2$M_{4}$\n\n\\omega_{p, \\text { out }}\\omega_{p, \\text { out }}3-dB\n\n$A$$C_{G S 5}+C_{G S 6}+$ $C_{D B 5}+2 C_{G D 6}+C_{D B 3}+C_{G D 3}$$XY$$N$$M_{5}$$1 / g_{m 5}$\n\n$N$$X$$Y$9roomPMOSNMOS$M_{4}$$M_{7}$$W_{4} / W_{7}=\\mu_{p} / \\mu_{n}$$1 / 2$$1 / 3$$N$$X$$Y$$N$$N$10.17$C_{A}C_{N}$$C_{X}$$AN$$X$$X$$Y$12\n\n\\beta H\\beta=110.18\n\n610.16$2 \\omega_{p, A}$\n\ncascode1$10 \\omega_{p, \\text { out }}$10.19\\omega_{p 1}$90^{\\circ}$10.19\\omega_{p 1}$PM\n\n110.16\\omega_{p, N}\\omega=\\omega_{p, A}$$-135^{\\circ}$2$45^{\\circ}$\\angle \\beta H(\\omega)=-180^{\\circ}+\\mathrm{PM}=-135^{\\circ}$\\omega_{p, A}$10.20\\omega_{p, A}$1$20 \\mathrm{~dB} / \\mathrm{dec}$\\omega_{p, A}$\\omega_{p, \\text { out }}^{\\prime}\\omega_{p, \\text { out }} / \\omega_{p, \\text { out }}^{\\prime}$\n\n$45^{\\circ}$\n\n\\omega_{p, \\text { out }}=\\left(R_{\\text {out }} C_{L}\\right)^{-1}$$R_{\\text {out }}$10.21$R_{\\text {out }}$\n\n$45^{\\circ}$\n\n#### 10.5\n\n$60^{\\circ}$\\beta<1[10.22a]\n\n10.22b-180\n\n\nRephrased text:\n\nOperational amplifier circuits commonly\nRephrased text:\n\nOperational amplifier circuits typically feature multiple poles. For instance, in a folded-cascode configuration, both the folding and output nodes contribute additional poles. Consequently, op amps often require \"compensation,\" which entails modifying their open-loop transfer function to ensure stability and a well-behaved time response in the closed-loop circuit.\n\nThe need for compensation arises because $|\\beta H|$ does not drop to unity before $\\angle \\beta H$ reaches $-180^{\\circ}$. We assume that stability can be achieved by (1) minimizing the overall phase shift, thus pushing the phase crossover out [Fig. 10.15(a)]; or (2) dropping the gain with frequency, thereby pushing the gain crossover in [Fig. 10.15(b)]. The first approach requires us to minimize the number of poles in the signal path through proper design. Since each additional stage contributes at least one pole, this means that the number of stages must be minimized, a remedy that results in low voltage gain and/or limited output swings (Chapter 9). The second approach, on the other hand, retains the low-frequency gain and the output swings, but it reduces the bandwidth by forcing the gain to fall at lower frequencies.\n\nThe Bode plot in Figure 10.15 illustrates the effect of frequency compensation techniques, such as moving poles and adjusting gain, to maintain stability and desired performance in op-amp circuits.\n\nIn practice, we first try to design an op amp to minimize the number of poles while meeting other requirements. Since the resulting circuit may still suffer from insufficient phase margin, we then compensate the op amp by modifying the design to move the gain crossover toward the origin. These efforts proceed with the $\\beta$ value chosen according to the final design requirements. For example, a closed-loop gain of 4 in some cases translates to $\\beta \\approx 0.25$ if the loop gain is large. In other words, we need not compensate the circuit for $\\beta=1$ if the closed-loop gain is always higher.\n\nLet's apply the above concepts to the telescopic-cascode op amp shown in Figure 10.16, where a PMOS current mirror performs differential to single-ended conversion. We identify several poles in the signal paths: Path 1 contains high-frequency poles at the source of $M_{3}$ and $M_{7}$, and a mirror pole at node $A$, while Path 2 contains a high-frequency pole at the source of $M_{4}$. Both paths share a pole at the output.\n\nIt is instructive to estimate the relative position of these poles. Since the output resistance of the op amp is much higher than the small-signal resistances seen at the other nodes in the circuit, we expect that, even with a moderate load capacitance, the output pole, $\\omega_{p, \\text{out}}$, is the closest to the origin. This \"dominant pole,\" $\\omega_{p, \\text{out}}$, usually sets the open-loop 3-dB bandwidth.\n\nWe also speculate that the first \"non-dominant pole,\" i.e., the closest pole to the origin after the dominant pole, arises at node $A$. This is because the total capacitance at this node, roughly equal to $C_{G S 5}+C_{G S 6}+C_{D B 5}+2 C_{G D 6}+C_{D B 3}+C_{G D 3}$, is typically much larger than that at nodes $X, Y$, and $N$, and the small-signal resistance of $M_{5}$, approximately $1 / g_{m 5}$, is also relatively large.\n\nWhich node yields the next non-dominant pole: $N$ or $X$ (and $Y$)? Recall from Chapter 9 that, to obtain a low overdrive and consume a reasonable voltage headroom, the PMOS devices in the op amp are typically wider than the NMOS transistors. Comparing $M_{4}$ and $M_{7}$ and neglecting body effect, we note that since $g_{m}=2 I_{D} /\\left|V_{G S}-V_{T H}\\right|$, if the two transistors are designed to have the same overdrive, they also exhibit the same transconductance. However, from square-law characteristics, we have $W_{4} / W_{7}=\\mu_{p} / \\mu_{n}$, which is about $1 / 2$ to $1 / 3$. Thus, nodes $N$ and $X$ (or $Y$) see roughly equal small-signal resistances to ground, but node $N$ suffers from much more capacitance. It is therefore plausible to assume that node $N$ contributes the next non-dominant pole. Figure 10.17 illustrates the results, denoting the capacitance at nodes $A, N$, and $X$ by $C_{A}, C_{N}$, and $C_{X}$, respectively. The poles at nodes $X$ and $Y$ are nearly equal, and their corresponding terms in the transfer functions of path 1 and path 2 can be factored out. Thus, they count as one pole rather than two.\n\nWith the position of the poles roughly determined, we can construct the magnitude and phase plots for $\\beta H$, using $\\beta=1$ for the worst-case scenario. As shown in Figure 10.18, these characteristics indicate that the mirror pole typically limits the phase margin because its phase contribution occurs at lower frequencies than that of other non-dominant poles.\n\nRecall from Chapter 6 that differential pairs using active current mirrors exhibit a left-half-plane zero located at twice the mirror pole frequency. The circuit of Figure 10.16 also contains such a zero. Located at $2 \\omega_{p, A}$, the zero impacts both the magnitude and phase characteristics. The analysis is left to the reader.\n\nHow should we compensate the telescopic-cascode op amp? Recall that our ultimate goal is to ensure a loop gain sufficiently less than unity at the phase crossover frequency. Let's assume that the number and location of the non-dominant poles and hence the phase plot at frequencies higher than roughly $10 \\omega_{p, \\text{out}}$ remain constant. We begin with the original response shown in Figure 10.19, which has a negative phase margin. We must force the loop gain to drop such that the gain crossover point moves toward the origin. To accomplish this, we simply lower the frequency of the dominant pole, $\\omega_{p 1}$, by increasing the load capacitance. The key point is that the phase contribution of the dominant pole in the vicinity of the gain or phase crossover point is close to $90^{\\circ}$ and relatively independent of the location of the pole. That is, as illustrated in Figure 10.19, translating the dominant pole toward the origin affects the magnitude plot, but not the critical part of the phase plot. If $\\omega_{p 1}$ is lowered sufficiently, the PM reaches an acceptable value, but at the cost of bandwidth.\n\nTo determine how much the dominant pole must be shifted down and to arrive at an important conclusion, let's assume that (1) the second non-dominant pole ($\\omega_{p, N}$) in Figure 10.16 is much higher than the mirror pole so that the phase shift at $\\omega=\\omega_{p, A}$ is equal to $-135^{\\circ}$, and (2) a phase margin of $45^{\\circ}$ (which is usually inadequate) is necessary. To compensate the circuit, we begin from $\\angle \\beta H(\\omega)=-180^{\\circ}+\\mathrm{PM}=-135^{\\circ}$ and identify the corresponding gain crossover frequency, in this case, $\\omega_{p, A}$ (Figure 10.20). Since the dominant pole must drop the gain to unity at $\\omega_{p, A}$ with a slope of $20 \\mathrm{~dB} / \\mathrm{dec}$, we draw a straight line from $\\omega_{p, A}$ toward the origin with such a slope, thus obtaining the new magnitude of the dominant pole, $\\omega_{p, \\text{out}}^{\\prime}$. Therefore, the load capacitance must be increased by a factor of $\\omega_{p, \\text{out}} / \\omega_{p, \\text{out}}^{\\prime}$.\n\nFrom the new magnitude plot, we note that the unity-gain bandwidth of the compensated (open-loop) op amp is equal to the frequency of the first non-dominant pole (of course, with a phase margin of $45^{\\circ}$). This is a fundamental result, indicating that to achieve a wide bandwidth in a feedback system employing a multipole op amp, the first non-dominant pole must be as far as possible. For this reason, the mirror pole proves undesirable.\n\nWe should also mention that although $\\omega_{p, \\text{out}}=\\left(R_{\\text{out}} C_{L}\\right)^{-1}$, increasing $R_{\\text{out}}$ does not compensate the op amp. As shown in Figure 10.21, a higher $R_{\\text{out}}$ results in a greater low-frequency loop gain, only affecting the low-frequency portion of the characteristics. Also, moving one of the non-dominant poles toward the origin does not improve the phase margin. (Why?)\n\nIn summary, frequency compensation moves the dominant pole of the open-loop amplifier to sufficiently low values so that the unity-gain bandwidth is well below the phase crossover frequency. Also, the compensated bandwidth cannot exceed the first non-dominant pole frequency since a phase margin of greater than $45^{\\circ}$ is typically required.\n\n#### Example 10.5"
},
{
    "text": "In typical operational amplifier circuits, there are often numerous poles present. Take, for example, the folded-cascode topology, where both the folding node and the output node introduce poles. Due to this, op amps generally require compensation, which involves modifying their open-loop transfer function to ensure stability and proper time response in the closed-loop circuit.\n\nThe necessity for compensation stems from the fact that the magnitude of the loop gain, represented by $|\\beta H|$, does not reduce to unity before the phase of the loop gain, $\\angle \\beta H$, reaches $-180^{\\circ}$. To achieve stability, we can either minimize the overall phase shift, thereby moving the phase crossover point to a higher frequency [refer to Fig. 10.15(a)], or decrease the gain at higher frequencies, shifting the gain crossover point to a lower frequency [refer to Fig. 10.15(b)]. The first method involves minimizing the number of poles in the signal path through careful design, which may result in lower voltage gain and/or limited output swings (refer to Chapter 9). The second method maintains low-frequency gain and output swings but sacrifices bandwidth by causing the gain to decrease at lower frequencies.\n\nMoving on to the telescopic-cascode operational amplifier shown in Fig. 10.16, where a PMOS current mirror converts a differential signal to a single-ended output, we can identify several poles in the signal paths. Path 1 includes high-frequency poles at the sources of $M_3$ and $M_7$, and a mirror pole at node $A$, while path 2 has a high-frequency pole at the source of $M_4$. Both paths share a pole at the output.\n\nIt is expected that, even with a moderate load capacitance, the output pole, $\\omega_{p, \\text { out }}$, is the closest to the origin and is referred to as the \"dominant pole.\" This dominant pole usually determines the open-loop 3-dB bandwidth. The next \"nondominant pole\" is likely at node $A$, as the total capacitance at this node is substantial due to the sum of various capacitances associated with the transistors, and the small-signal resistance of $M_5$ is relatively large.\n\nDetermining the next nondominant pole between nodes $N$ and $X$ (or $Y$) involves considering the transistors' dimensions and the resulting transconductance and small-signal resistance. Given that PMOS devices are typically wider than NMOS transistors to achieve low overdrive and reasonable voltage headroom, nodes $N$ and $X$ (or $Y$) have comparable small-signal resistances to ground. However, node $N$ has much more capacitance, suggesting that it contributes the next nondominant pole.\n\nFigure 10.17 illustrates the pole locations for the op amp of Fig. 10.16, with the capacitance at nodes $A$, $N$, and $X$ denoted as $C_A$, $C_N$, and $C_X$, respectively. The poles at nodes $X$ and $Y$ are nearly equal and can be factored out as one pole in the transfer functions of path 1 and path 2.\n\nWith the positions of the poles roughly determined, we can construct the magnitude and phase plots for $\\beta H$ using $\\beta=1$ for the worst-case scenario. As shown in Fig. 10.18, the mirror pole typically limits the phase margin because its phase contribution occurs at lower frequencies than that of other nondominant poles.\n\nThe compensation procedure for the telescopic-cascode op amp involves ensuring that the loop gain is sufficiently less than unity at the phase crossover frequency. Assuming the number and location of the nondominant poles remain constant at frequencies higher than approximately $10 \\omega_{p, \\text { out }}$, we start with the original response shown in Fig. 10.19, which has a negative phase margin. To achieve the desired loop gain, we lower the frequency of the dominant pole, $\\omega_{p 1}$, by increasing the load capacitance. The critical point is that the phase contribution of the dominant pole near the gain or phase crossover point is approximately $90^{\\circ}$ and relatively independent of the pole's exact location. Thus, moving the dominant pole towards the origin affects the magnitude plot but not the critical part of the phase plot. By lowering $\\omega_{p 1}$ sufficiently, the phase margin reaches an acceptable value, although this comes at the expense of bandwidth.\n\nIn summary, frequency compensation involves moving the dominant pole of the open-loop amplifier to a sufficiently low value such that the unity-gain bandwidth is well below the phase crossover frequency. Additionally, the compensated bandwidth cannot exceed the first nondominant pole frequency, as a phase margin greater than $45^{\\circ}$ is typically required.\n\n#### Example 10.5\n\nFor an op amp compensated to have a phase margin of $60^{\\circ}$ with unity-gain feedback, we need to determine the factor by which the compensation can be relaxed if the circuit operates with a feedback factor of $\\beta<1$ [refer to Fig. 10.22(a)].\n\nAs illustrated in Fig. 10.22(b), the original compensation identifies the frequency at which $\\angle \\beta H=-120^{\\circ}$, draws a line from this frequency at a slope of $20 \\mathrm{~dB} / \\mathrm{dec}$ toward the vertical axis, and hence moves the dominant pole from $\\omega_{p 1}$ to $\\omega_{p 1}^{\\prime}$. With a feedback factor of $\\beta$, the uncompensated magnitude response is shifted down by $-20 \\log \\beta$, requiring a dominant pole at $\\omega_{p 1}^{\\prime \\prime}$. To obtain this value, we equate the slope of the line $CD$ to $20 \\mathrm{~dB} / \\mathrm{dec}$:\n\n$$\n\\begin{equation*}\n\\frac{-20 \\log \\beta}{\\log \\omega_{p 1}^{\\prime \\prime}-\\log \\omega_{p 1}^{\\prime}}=20 \\tag{10.19}\n\\end{equation*}\n$$\n\nand hence $\\omega_{p 1}^{\\prime \\prime}=\\omega_{p 1}^{\\prime} / \\beta$. This means that the compensation capacitor can be reduced by approximately a factor of $1 / \\beta$. However, this does not imply that the new feedback circuit settles faster; the weaker feedback results in a proportionally smaller extension of the bandwidth. In fact, we can write the closed-loop - $3-\\mathrm{dB}$ bandwidths as $\\left(1+A_{0}\\right) \\omega_{p 1}^{\\prime} \\approx A_{0} \\omega_{p 1}^{\\prime}$ for the original op amp and $\\left(1+\\beta A_{0}\\right) \\omega_{p 1}^{\\prime \\prime} \\approx \\beta A_{0} \\omega_{p 1}^{\\prime \\prime} \\approx A_{0} \\omega_{p 1}^{\\prime}$ for the newly-compensated counterpart, concluding that the closed-loop speed remains roughly the same.\n\nConsidering the fully differential telescopic cascode shown in Fig. 10.23, this topology not only achieves various useful properties of differential operation but also avoids the mirror pole, thereby exhibiting stable behavior for a greater bandwidth. In fact, we can identify one dominant pole at each output node and only one nondominant pole arising from node $X$ (or $Y$). This suggests that fully differential telescopic cascode circuits are inherently stable and do not require compensation.\n\nHowever, what about the pole at node $N$ (or $K$) in Fig. 10.23? Considering one of the PMOS cascodes as shown in Fig. 10.24(a), we might think that the capacitance at node $N$, $C_{N}=C_{G S 5}+C_{S B 5}+C_{G D 7}+C_{D B 7}$, shunts the output resistance of $M_{7}$ at high frequencies, thereby reducing the output impedance of the cascode. To quantify this effect, we first determine $Z_{\\text {out }}$ in Fig. 10.24(a):\n\n$$\n\\begin{equation*}\nZ_{\\text {out }}=\\left(1+g_{m 5} r_{O 5}\\right) Z_{N}+r_{O 5} \\tag{10.20}\n\\end{equation*}\n$$\n\nwhere body effect is neglected and $Z_{N}=r_{O 7} \\|\\left(C_{N} s\\right)^{-1}$. Assuming the first term is much greater than the second, we have\n\n$$\n\\begin{equation*}\nZ_{\\text {out }} \\approx\\left(1+g_{m 5} r_{O 5}\\right) \\frac{r_{O 7}}{r_{O 7} C_{N} s+1} \\tag{10.21}\n\\end{equation*}\n$$\n\nNow, as illustrated in Fig. 10.24(b), we take the output load capacitance into account:\n\n$$\n\\begin{align*}\nZ_{\\text {out }} \\| \\frac{1}{C_{L} s} & =\\frac{\\left(1+g_{m 5} r_{O 5}\\right) \\frac{r_{O 7}}{r_{O 7} C_{N} s+1} \\cdot \\frac{1}{C_{L} s}}{\\left(1+g_{m 5} r_{O 5}\\right) \\frac{r_{O 7}}{r_{O 7} C_{N} s+1}+\\frac{1}{C_{L} s}}  \\tag{10.22}\\\\\n& =\\frac{\\left(1+g_{m 5} r_{O 5}\\right) r_{O 7}}{\\left[\\left(1+g_{m 5} r_{O 5}\\right) r_{O 7} C_{L}+r_{O 7} C_{N}\\right] s+1} \\tag{10.23}\n\\end{align*}\n$$\n\nThus, the parallel combination of $Z_{\\text {out }}$ and the load capacitance still contains a single pole corresponding to a time constant $\\left(1+g_{m 5} r_{O 5}\\right) r_{O 7} C_{L}+r_{O 7} C_{N}$. Note that $\\left(1+g_{m 5} r_{O 5}\\right) r_{O 7} C_{L}$ is simply due to the low-frequency output resistance of the cascode. In other words, the overall time constant equals the \"output\" time constant plus $r_{O 7} C_{N}$. The key point in this calculation is that the pole in the PMOS cascode (at node $N$) is merged with the output pole, thus creating no additional pole. It merely lowers the dominant pole by a slight amount. For this reason, we loosely say that the signal does not \"see\" the pole in the cascode current sources.\n\nComparing the circuits shown in Figs. 10.16 and 10.23 reveals that the fully differential configuration avoids both the mirror pole and the pole at node $N$. With the approximation made in (10.23), the circuit of Fig. 10.23 contains only one nondominant pole located at relatively high frequencies owing to the high transconductance of the NMOS transistors. This is a remarkable advantage of fully differential cascode op amps.\n\nWe have thus far observed that nondominant poles give rise to instability, requiring frequency compensation. Is it possible to cancel one or more of these poles by introducing zeros in the transfer function? For example, following the analysis of Fig. 6.41, we surmise that if a low-gain but fast path is placed in parallel with the main amplifier, a zero is created that can be positioned atop the first nondominant pole. However, cancellation of a pole by a zero in the presence of mismatches leads to long settling components in the step response of the closed-loop circuit. This effect is studied in Problem 10.19."
},
{
    "text": "---[Attention]---\nWhen images are referenced within the [Context Provided], they are converted into descriptive text. This modification ensures that the content remains accessible while maintaining its original sense and length.\n---[Task]---\nRework the text found in the [Context Provided] Section to preserve its original meaning and overall length. Please provide the revised text.\n---[Context Provided]---\nRevised text:\n```\nCommon operational amplifier circuits feature multiple poles. For instance, in a folded-cascode design, both the folding node and the output node contribute to the poles' count. As a result, op amps often require compensation, which involves adjusting their open-loop transfer function to ensure a stable closed-loop circuit and a well-controlled time response.\n\nCompensation is necessary because the loop gain's magnitude doesn't drop to unity before its phase reaches -180 degrees. To address this, we propose stability can be attained through (1) reducing the total phase shift to extend the phase crossover point [Figure 10.15(a)]; or (2) decreasing the gain with frequency to advance the gain crossover [Figure 10.15(b)]. The first method necessitates minimizing poles in the signal path through thoughtful design. Since each additional stage adds at least one pole, this means that the number of stages should be reduced to achieve lower voltage gain and possibly limited output swings (Chapter 9). Conversely, the second method preserves the low-frequency gain and output swings, but narrows the bandwidth by enforcing a lower frequency gain drop.\n\nimage_name:Figure 10.15(a)\ndescription:\nThe Bode plot in Figure 10.15(a) displays two curves, each depicting various aspects of the frequency response within an op-amp design.\n\n1. **Graph Type and Purpose:**\n- The graph is a Bode plot, a standard tool for evaluating system frequency responses.\n\n2. **Axis Labeling and Units:**\n- The upper curve has a vertical axis labeled `20log|H()|`, representing the loop gain magnitude in decibels (dB). The horizontal axis is marked `log()`, signifying a logarithmic frequency scale.\n- The lower curve features a vertical axis labeled `H()`, showing the loop gain phase angle in degrees. The horizontal axis also denotes `log()`.\n\n3. **Behavior and Trends:**\n- The magnitude curve starts at a consistent level and decreases with rising frequency, characteristic of a low-pass filter.\n- The phase curve begins near 0 and diminishes, eventually nearing -180, indicating phase lag as frequency rises.\n\n4. **Significant Features and Technical Details:**\n- The magnitude curve illustrates a distinct breakpoint where the gain starts to roll off, pinpointing the cutoff frequency.\n- The phase curve shows a gradual phase decrease, with a notable slope change as frequency increases.\n- The modified design is shown with a lighter line in the phase curve, suggesting enhanced phase margin.\n\n5. **Annotations and Specific Points:**\n- Dashed lines denote critical frequencies at which the magnitude crosses 0 dB and the phase approaches -180.\n- The modified design's adjustment for improved stability through phase response modification is highlighted.\n\nThis Bode plot depicts the impact of frequency compensation techniques, such as pole shifting and gain adjustment, on maintaining stability and optimal performance in op-amp circuits.\n\nimage_name:(b)\ndescription:\nThe graph in question is a Bode plot, used for system frequency response analysis, particularly examining gain and phase shifts. It includes two primary plots: the magnitude plot and the phase plot.\n\n1. **Graph Type and Purpose:**\n- The graph is a Bode plot, providing both the magnitude and phase responses of a system.\n\n2. **Axis Labeling and Units:**\n- The magnitude plot, located at the top, has a vertical axis marked as \\(20\\log|\\beta H(\\omega)|\\) for gain in decibels (dB). The horizontal axis is labeled `log()`, indicating a logarithmic frequency scale.\n- The phase plot, at the bottom, has a vertical axis as \\(\\angle \\beta H(\\omega)\\), showing the phase angle in degrees. The horizontal axis matches `log()`.\n\n3. **Behavior and Trends:**\n- The magnitude plot begins at a high gain level and decreases in a stepwise fashion with frequency increases. The modified design is depicted as a lighter line, indicating a more gradual gain decline.\n- The phase plot starts at 0 and decreases towards -180 as frequency rises, with fluctuations along the way.\n\n4. **Significant Features and Technical Details:**\n- The magnitude plot displays two different slopes, indicating changes in the system's pole-zero structure.\n- Dashed vertical lines mark critical frequencies where the magnitude crosses 0 dB and the phase approaches -180.\n- The modified design's annotation emphasizes the phase margin improvement through gain crossover frequency adjustment.\n\n5. **Annotations and Specific Points:**\n- The plot includes a 'Modified Design' annotation that shows a phase margin enhancement through altering the gain crossover frequency.\n- Dashed lines signify critical points where the system response changes significantly, aiding in stability and performance analysis.\n\nThis Bode plot demonstrates the effects of frequency compensation techniques, such as pole shifting and gain adjustment, to maintain stability and performance in operational amplifier circuits. Modifications aim to increase phase margin, thereby enhancing system stability.\n\nFigure 10.15 illustrates frequency compensation by (a) moving PX out and (b) pushing GX in.\n\nPractically, we initially aim to design an op amp with the fewest poles while meeting additional requirements. If the phase margin remains insufficient, we then compensate the op amp by modifying the design to shift the gain crossover towards the origin. These adjustments are made based on the selected $\\beta$ value, which is determined by the final design specifications. For example, a closed-loop gain of 4 translates to $\\beta \\approx 0.25$ if the loop gain is substantial. Essentially, compensating for $\\beta=1$ isn't necessary if the closed-loop gain is consistently greater.\n\nLet's apply these principles to the telescopic-cascode op amp depicted in Figure 10.16, where a PMOS current mirror converts differential to single-ended signals. We identify several poles in the signal paths: path 1 contains high-frequency poles at the source of $M_{3}$, a mirror pole at node $A$, and another high-frequency pole at the source of $M_{7}$. Path 2 contains a high-frequency pole at the source of $M_{4}$, and both paths share a pole at the output.\n\nEvaluating the relative position of these poles is instructive. Given the much higher output resistance of the op amp compared to the small-signal resistances at other circuit nodes, we expect the output pole, $\\omega_{p, \\text { out }}$, to be the closest to the origin. This \"dominant pole\" typically determines the open-loop 3-dB bandwidth.\n\nWe also infer that the first \"nondominant pole,\" i.e., the closest pole to the origin after the dominant pole, emerges at node $A$. This is because the total capacitance at this node is typically much larger than that at nodes $X, Y,$ and $N$, and the small-signal resistance of $M_{5}$, approximately $1 / g_{m 5}$, is also relatively large.\n\nDetermining which node yields the next nondominant pole, $N$ or $X$ (and $Y$), requires consideration of the PMOS devices' width. As explained in Chapter 9, wider PMOS transistors are often used in op amps for reduced overdrive and adequate voltage headroom. Comparing $M_{4}$ and $M_{7}$, we find that they have the same overdrive but different transconductance due to the square-law characteristics. Thus, nodes $N$ and $X$ (and $Y$) experience roughly equal small-signal resistances to ground, but node $N$ has much more capacitance. Hence, it's plausible to assume that node $N$ contributes the next nondominant pole. Figure 10.17 illustrates these findings.\n\nimage_name:Figure 10.17 Pole locations for the op amp of Fig. 10.16.\ndescription:\n[\n... (previous description)\n]\nimage_name:Figure 10.17 Pole locations for the op amp of Fig. 10.16.\ndescription:\n[\n... (previous description)\n]\nimage_name:Figure 10.18 Bode plots of loop transmission for op amp of Fig. 10.16.\ndescription:\n[\n... (previous description)\n]\nimage_name:Figure 10.19 Translating the dominant pole toward the origin.\ndescription:\n[\n... (previous description)\n]\nimage_name:Figure 10.20 Translating the dominant pole toward the origin for $45^{\\circ}$ phase margin.\ndescription:\n[\n... (previous description)\n]\nimage_name:Figure 10.21 Bode plots of loop gain for higher output resistance\ndescription:\n[\n... (previous description)\n]\nimage_name:Figure 10.22(a)\ndescription:\n[\n... (previous description)\n]\nimage_name:(b)\ndescription:\n[\n... (previous description)\n]\nimage_name:Figure 10.23 Fully differential telescopic op amp\ndescription:\n[\n... (previous description)\n]\nimage_name:Figure 10.24 Effect of device capacitance at internal node of a cascode current source(a)\ndescription:\n[\n... (previous description)\n]\nimage_name:Figure 10.24(b)\ndescription:\n[\n... (previous description)\n]\nimage_name:Figure 10.24 Effect of device capacitance at internal node of a cascode current source.\ndescription:\n[\n... (previous description)\n]\n```"
},
{
    "text": "---[Attention]---\nIn the [Context Provided], all images are now accompanied by textual descriptions. This has been done to ensure accessibility and clarity for all users.\n\n---[Task]---\nRevise the content in the [Context Provided] section, maintaining the integrity of the original meaning and length of the text.\n---[Context Provided]---\nThe revised text:\n```\nOur examination of operational amplifiers, as detailed in Chapter 9, reveals that two-stage topologies are often required to achieve the maximum output voltage swing. This is particularly relevant in the context of contemporary low-voltage operational amplifiers. Therefore, the stability and compensation aspects of such amplifiers warrant attention.\n\nRefer to the circuit depicted in Figure 10.25. We observe three poles: one at position $X$ (or $Y$), another at $E$ (or $F$), and a third at $A$ (or $B$). Previous discussions inform us that the pole at $X$ resides at a high frequency. However, what about the remaining poles? Node $E$ displays a substantial small-signal resistance, which, in conjunction with the capacitances of $M_{3}, M_{5}$, and $M_{9}$, can induce a pole relatively close to the origin. At node $A$, the small-signal resistance is reduced, yet $C_{L}$ may be substantial. Therefore, we assert that the circuit contains two dominant poles.\nimage_name:Figure 10.25 Two-stage op amp\ndescription:This illustration presents a two-stage operational amplifier. The initial stage comprises a differential amplifier constructed from M1 and M2, utilizing active loads M3 and M4. The second stage features a common-source amplifier, with M9 and M10 serving as active loads. The circuit includes compensation capacitors CL for stabilizing the amplifier and enhancing its frequency response. The circuit exhibits two dominant poles at nodes E and A due to the significant small-signal resistance and substantial load capacitance.\n\nFigure 10.25 Two-stage op amp.\nBuilding on these insights, we can create the magnitude and phase plots depicted in Figure 10.26. Here, $\\omega_{p, E}$ is assumed to be the more influential, though the relative positioning of $\\omega_{p, E}$ and $\\omega_{p, A}$ is contingent upon the design and load capacitance. It is worth noting that, given the poles at $E$ and $A$ are near the origin, the phase\n\nimage_name:Figure 10.26 Bode plots of loop gain of two-stage op amp.\ndescription:Figure 10.26 presents a Bode plot depicting the loop gain of a two-stage operational amplifier. The plot includes two components: the magnitude plot (upper) and the phase plot (lower), both plotted against frequency on a logarithmic scale.\n\nMagnitude Plot:\n- **Y-Axis:** Represents the loop gain magnitude in decibels (dB), as \\(20\\log|\\beta H(\\omega)|\\).\n- **X-Axis:** Represents frequency \\(\\omega\\) on a logarithmic scale.\n- **Behavior:** The magnitude is initially high and remains constant at low frequencies, suggesting a constant gain. As frequency rises, the magnitude starts to decrease, initially at \\(\\omega_{p,E}\\), followed by \\(\\omega_{p,A}\\), and then \\(\\omega_{p,X}\\). This decrease indicates the impact of the dominant poles at these frequencies.\n- **Key Features:**\n- **\\(\\omega_{p,E}\\):** The first pole, initiating the decrease in magnitude.\n- **\\(\\omega_{p,A}\\):** The second pole, contributing to additional attenuation.\n- **\\(\\omega_{p,X}\\):** A third pole, leading to a more pronounced decline in gain.\n\nPhase Plot:\n- **Y-Axis:** Represents the phase shift of the loop gain in degrees.\n- **X-Axis:** Represents frequency \\(\\omega\\) on a logarithmic scale.\n- **Behavior:** The phase begins near 0 degrees and decreases as frequency increases. It approaches \\(-180^{\\circ}\\) before the third pole, indicating a significant phase shift due to the poles at \\(\\omega_{p,E}\\) and \\(\\omega_{p,A}\\). The phase continues to drop towards \\(-270^{\\circ}\\) as the frequency reaches \\(\\omega_{p,X}\\).\n- **Key Features:**\n- The phase margin is suggested to be close to zero before the third pole, emphasizing the requirement for frequency compensation.\n\nAnnotations:\n- Dotted vertical lines denote the pole frequencies \\(\\omega_{p,E}\\), \\(\\omega_{p,A}\\), and \\(\\omega_{p,X}\\).\n- Horizontal dashed lines in the phase plot at \\(-180^{\\circ}\\) and \\(-270^{\\circ}\\) provide reference points for phase shifts.\n\nOverall, the Bode plots depict the influence of the dominant poles on the loop gain and phase of the two-stage op amp, underscoring the necessity for meticulous frequency compensation to guarantee stability.\n\nThe phase approaches $-180^{\\circ}$ well below the third pole, suggesting that the phase margin may be near zero even before the third pole contributes a substantial phase shift.\n\nNext, let's delve into the frequency compensation of two-stage operational amplifiers. In Figure 10.26, one of the dominant poles must be shifted towards the origin to ensure that the gain crossover occurs well below the phase crossover. However, as mentioned in Section 10.4, the unity-gain bandwidth following compensation must not exceed the frequency of the second pole of the open-loop system for a phase margin greater than 45 degrees. Consequently, if the magnitude of $\\omega_{p, E}$ in Figure 10.26 is to be decreased, the achievable bandwidth is limited to roughly $\\omega_{p, A}$, a relatively low value. Additionally, the extremely small magnitude of the new dominant pole results in a large compensation capacitor.\n\nFortunately, a more effective method of compensation can be applied to the circuit of Figure 10.25. To arrive at this method, we note that, as depicted in Figure 10.27(a), the first stage possesses a high output impedance, $R_{\\text {out1 }}$, and the second stage offers a moderate gain, $A_{v 2}$, creating a favorable environment for Miller multiplication of capacitors. As shown in Figure 10.27(b), the objective is to generate a significant capacitance at node $E$, equal to $\\left(1+A_{v 2}\\right) C_{C}$, shifting the corresponding pole to $R_{\\text {out } 1}^{-1}\\left[C_{E}+\\left(1+A_{v 2}\\right) C_{C}\\right]^{-1}$, where $C_{E}$ refers to the capacitance at node $E$ prior to adding $C_{C}$. Subsequently, a low-frequency pole can be established with a moderate capacitor value, conserving substantial chip area. This technique is termed \"Miller compensation.\"\nimage_name:Figure 10.27 Miller compensation of a two-stage op amp.(a)\ndescription:The block diagram labeled \"(a)\" illustrates a fundamental two-stage operational amplifier configuration. The primary components consist of two amplifier stages. The first stage is designated as $A_{v1}$, and the second stage is identified as $A_{v2}$. These amplifiers are represented by triangular symbols, a conventional notation for amplifiers in circuit diagrams.\n\n1. **Main Components:**\n- **Amplifier $A_{v1}$:** This serves as the first stage of amplification, accepting the input signal and providing an amplified output to the subsequent stage.\n- **Amplifier $A_{v2}$:** This constitutes the second stage of amplification, further enhancing the signal it receives from $A_{v1}$.\n\n2. **Flow of Information or Control:**\n- The signal travels from left to right, originating at the input of $A_{v1}$, where it is amplified and conveyed to node $E$.\n- From node $E$, the signal progresses to $A_{v2}$, where it is further amplified before reaching the output designated as $A$.\n- A feedback loop, indicated by $R_{out1}$, implies feedback from the output of $A_{v1}$ back to its input or a related node, influencing the gain or stability of the amplifier.\n\n3. **Labels, Annotations, and Key Indicators:**\n- **$E$:** This signifies an intermediate node between the two amplifier stages.\n- **$R_{out1}$:** This denotes a feedback resistance or output resistance associated with the first stage, playing a crucial role in the feedback mechanism or output impedance.\n\n4. **Overall System Function:**\n- The primary function of this system is to amplify an input signal through two stages of amplification. The feedback loop via $R_{out1}$ aids in controlling the gain or improving the stability of the amplifier. This basic configuration paves the way for further enhancements, such as Miller compensation, to elevate performance by managing frequency response and stability.\nimage_name:Figure 10.27 Miller compensation of a two-stage op amp.(b)\ndescription:The diagram labeled \"(b)\" illustrates a two-stage operational amplifier employing Miller compensation. The essential components include two amplifiers and a compensation capacitor, denoted as $C_C$.\n\n1. **Main Components:**\n- **First Amplifier ($A_{v1}$):** This constitutes the initial stage of the op-amp, which receives the input signal and provides an amplified output to the following stage.\n- **Second Amplifier ($A_{v2}$):** This stage further boosts the signal it gets from the first amplifier.\n- **Compensation Capacitor ($C_C$):** Connected between the output of the second amplifier and the input of the first amplifier, it plays a vital role in frequency compensation by influencing the pole locations in the amplifier's frequency response.\n\n2. **Flow of Information or Control:**\n- The signal enters at the input of the first amplifier $A_{v1}$, which amplifies the input signal and passes it to node $E$.\n- From node $E$, the signal moves to the second amplifier $A_{v2}$, which further boosts the signal before outputting it to the final output node $A$.\n- The compensation capacitor $C_C$ establishes a feedback loop from the output of $A_{v2}$ back to the input of $A_{v1}$, thereby influencing the frequency response and stability of the op-amp.\n\n3. **Labels, Annotations, and Key Indicators:**\n- The node labeled $E$ is a critical point in the circuit where the output of the first amplifier and the input of the second amplifier intersect.\n- The presence of $C_C$ indicates the implementation of Miller compensation, which is designed to shift the poles and stabilize the amplifier.\n\n4. **Overall System Function:**\n- The primary function of this system is to deliver a stable, amplified output of an input signal through a two-stage amplification process. The addition of the compensation capacitor $C_C$ is vital for achieving Miller compensation, which effectively boosts the apparent capacitance at node $E$ and shifts the pole locations, thereby enhancing the stability and bandwidth of the op-amp. This setup reduces the necessary size of the compensation capacitor, conserving space and resources in integrated circuit design.\n\nIn addition to lowering the required capacitor value, Miller compensation features a crucial property: it relocates the output pole away from the origin. As illustrated in Figure 10.28, this effect is known as \"pole splitting.\" To comprehend the fundamental principle, we simplify the output stage of Figure 10.25 as depicted in Figure 10.29, where $R_{S}$ denotes the output resistance of the first stage, and $R_{L}=r_{O 9} \\| r_{O 11}$. From our\n```"
},
{
    "text": "Our exploration of operational amplifiers in Chapter 9 suggests that two-stage topologies are often necessary to maximize output voltage swing, particularly in contemporary low-voltage op amps. Consequently, the stability and compensation mechanisms of these op amps are of great significance.\n\nRefer to the circuit depicted in Fig. 10.25. We can identify three poles: one at $X$ (or $Y$), another at $E$ (or $F$), and a third at $A$ (or $B$). Our previous discussions have established that the pole at $X$ occurs at relatively high frequencies. However, the positions of the other two poles are less clear. Due to the high small-signal resistance at node $E$, even the capacitances of $M_{3}$, $M_{5}$, and $M_{9}$ can create a pole close to the origin. At node $A$, the small-signal resistance is lower, but $C_{L}$ may be large. As a result, we can conclude that the circuit has two dominant poles.\n\nThe circuit in Fig. 10.25 is a two-stage operational amplifier. The first stage consists of a differential amplifier formed by $M1$ and $M2$, with active loads $M3$ and $M4$. The second stage is a common-source amplifier with $M9$ and $M10$ as active loads. The circuit includes compensation capacitors $C_L$ to stabilize the amplifier and improve the frequency response. There are two dominant poles at nodes $E$ and $A$ due to the high small-signal resistance and large load capacitance.\n\nFrom these observations, we can construct the magnitude and phase plots shown in Fig. 10.26. Here, $\\omega_{p, E}$ is assumed to be more dominant, but the relative positions of $\\omega_{p, E}$ and $\\omega_{p, A}$ depend on the design and the load capacitance. Note that, since the poles at $E$ and $A$ are relatively close to the origin, the phase approaches $-180^{\\circ}$ well below the third pole. In other words, the phase margin may be close to zero even before the third pole contributes significant phase shift.\n\nLet us now investigate the frequency compensation of two-stage op amps. In Fig. 10.26, one of the dominant poles must be moved toward the origin so as to place the gain crossover well below the phase crossover. However, recall from Sec. 10.4 that the unity-gain bandwidth after compensation cannot exceed the frequency of the second pole of the open-loop system for $\\mathrm{PM}>45^{\\circ}$. Thus, if in Fig. 10.26 the magnitude of $\\omega_{p, E}$ is to be reduced, the available bandwidth is limited to approximately $\\omega_{p, A}$, a low value. Furthermore, the very small magnitude of the new dominant pole translates to a large compensation capacitor.\n\nFortunately, a more efficient method of compensation can be applied to the circuit of Fig. 10.25. To arrive at this method, we note that, as illustrated in Fig. 10.27(a), the first stage exhibits a high output impedance, $R_{\\text {out1 }}$, and the second stage provides a moderate gain, $A_{v 2}$, thereby creating a suitable environment for Miller multiplication of capacitors. Shown in Fig. 10.27(b), the idea is to create a large capacitance at node $E$, equal to $\\left(1+A_{v 2}\\right) C_{C}$, moving the corresponding pole to $R_{\\text {out } 1}^{-1}\\left[C_{E}+\\left(1+A_{v 2}\\right) C_{C}\\right]^{-1}$, where $C_{E}$ denotes the capacitance at node $E$ before $C_{C}$ is added. As a result, a low-frequency pole can be established with a moderate capacitor value, saving considerable chip area. This technique is called \"Miller compensation.\"\n\nIn addition to lowering the required capacitor value, Miller compensation entails a very important property: it moves the output pole away from the origin. Illustrated in Fig. 10.28, this effect is called \"pole splitting.\" To understand the underlying principle, we simplify the output stage of Fig. 10.25 as in Fig. 10.29, where $R_{S}$ denotes the output resistance of the first stage and $R_{L}=r_{O 9} \\| r_{O 11}$. From our analysis in Chapter 6, we note that this compensated circuit contains two poles:\n\n$$\n\\begin{align*}\n& \\omega_{p 1}^{\\prime} \\approx \\frac{1}{R_{S}\\left[\\left(1+g_{m 9} R_{L}\\right)\\left(C_{C}+C_{G D 9}\\right)+C_{E}\\right]+R_{L}\\left(C_{C}+C_{G D 9}+C_{L}\\right)}  \\tag{10.24}\\\\\n& \\omega_{p 2}^{\\prime} \\approx \\frac{R_{S}\\left[\\left(1+g_{m 9} R_{L}\\right)\\left(C_{C}+C_{G D 9}\\right)+C_{E}\\right]+R_{L}\\left(C_{C}+C_{G D 9}+C_{L}\\right)}{\\left.R_{S} R_{L}\\left[\\left(C_{C}+C_{G D 9}\\right) C_{E}+\\left(C_{C}+C_{G D 9}\\right) C_{L}+C_{E} C_{L}\\right)\\right]} \\tag{10.25}\n\\end{align*}\n$$\n\nThese expressions are based on the assumption that $\\left|\\omega_{p 1}^{\\prime}\\right| \\ll\\left|\\omega_{p 2}^{\\prime}\\right|$. Before compensation, however, $\\omega_{p 1}$ and $\\omega_{p 2}$ are of the same order of magnitude. For $C_{C}=0$ and relatively large $C_{L}$, we may approximate the magnitude of the output pole as $\\omega_{p 2} \\approx 1 /\\left(R_{L} C_{L}\\right)$.\n\nTo compare the magnitudes of $\\omega_{p 2}^{\\prime}$ before and after compensation, we consider a typical case: $C_{C}+$ $C_{G D 9} \\gg C_{E}$, reducing (10.25) to $\\omega_{p 2}^{\\prime} \\approx g_{m 9} /\\left(C_{E}+C_{L}\\right)$. Noting that typically $C_{E} \\ll C_{L}$, we conclude that Miller compensation increases the magnitude of the output pole by roughly a factor of $g_{m 9} R_{L}$, a relatively large value. Intuitively, this is because at high frequencies, $C_{C}$ provides a low impedance between the gate and drain of $M_{9}$, reducing the resistance seen by $C_{L}$ from $R_{L}$ to roughly $R_{S}\\left\\|g_{m 9}^{-1}\\right\\| R_{L} \\approx$ $g_{m 9}^{-1}\\left[\\right.$ Fig. 10.29(b)]. From another perspective, $C_{C}$ provides feedback around the second stage by sensing the output voltage; as a result, the output resistance falls and the second pole moves to higher frequencies.In summary, Miller compensation moves the interstage pole toward the origin and the output pole away from the origin, allowing a much greater bandwidth than that obtained by merely connecting the compensation capacitor from one node to ground. In practice, the choice of the compensation capacitor for proper phase margin requires some iteration because both poles move. The following example gives a rough estimate.\n\n#### Example 10.6\n\nThe two-stage op amp of Fig. 10.25 incorporates Miller compensation to reach a phase margin of $45^{\\circ}$. Estimate the compensation capacitor value.\n\n[^72]\n#### Solution\n\nAfter frequency compensation, the dominant pole moves down to approximately $\\left(g_{m 9} R_{L} C_{C} R_{S}\\right)^{-1}$, where $R_{S}$ denotes the output resistance of the first stage, and the second pole moves up to roughly $g_{m 9} / C_{L}$. For a phase margin of $45^{\\circ}$, the loop gain must drop to unity at the second pole. With a low-frequency loop gain of $\\beta g_{m 1} R_{S} g_{m 9} R_{L}$, we consider the postcompensation plot in Fig. 10.30 (on linear axes) and write\n\n$$\n\\begin{equation*}\n|\\beta H(\\omega)| \\approx \\frac{\\beta g_{m 1} R_{S} g_{m 9} R_{L}}{\\sqrt{1+\\omega^{2} / \\omega_{p 1}^{, 2}}} \\tag{10.26}\n\\end{equation*}\n$$\n\nwhere the effect of $\\omega_{p 2}^{\\prime}$ on the magnitude is neglected. At $\\omega=\\omega_{p 2}^{\\prime}$, the second term under the square root dominates, and\n\n$$\n\\begin{equation*}\n\\frac{\\beta g_{m 1} R_{S} g_{m 9} R_{L}}{\\omega_{p 2}^{\\prime} / \\omega_{p 1}^{\\prime}}=1 \\tag{10.27}\n\\end{equation*}\n$$\n\nSubstituting for the pole frequencies and assuming that $\\beta=1$, we obtain\n\n$$\n\\begin{equation*}\nC_{C}=\\frac{g_{m 1}}{g_{m 9}} C_{L} \\tag{10.28}\n\\end{equation*}\n$$\n\nNote that $g_{m 1}$ and $g_{m 9}$ are the transconductances of the two stages. The reader can prove that, if the effect of $\\omega_{p 2}^{\\prime}$ is included, then $C_{C}=\\left[g_{m 1} /\\left(\\sqrt{2} g_{m 9}\\right)\\right] C_{L}$. Of course, $C_{C}$ must generally be greater than this value so as to establish a higher phase margin, but this estimate serves as a reasonable starting point in the design.\n\nThis result assumes that $\\beta=1$; in practice, most op amps are configured for a closed-loop gain of 2 or higher, thus requiring a smaller $C_{C}$.\n\nOur study of stability and compensation has thus far neglected the effect of zeros of the transfer function. While in cascode topologies, the zeros are far from the origin, in two-stage op amps incorporating Miller compensation, a nearby zero appears in the circuit. Recall from Chapter 6 that the circuit of Fig. 10.29 contains a right-half-plane zero at $\\omega_{z}=g_{m 9} /\\left(C_{C}+C_{G D 9}\\right)$. This is because $C_{C}+C_{G D 9}$ forms a \"feedforward\" signal path from the input to the output. What is the effect of such a zero? The numerator of the transfer function reads $\\left(1-s / \\omega_{z}\\right)$, yielding a phase of $-\\tan ^{-1}\\left(\\omega / \\omega_{z}\\right)$, a negative value because $\\omega_{z}$ is positive. In other words, as with poles in the left half plane, a zero in the right half plane contributes additional negative phase shift, thus moving the phase crossover toward the origin. Furthermore, from Bode approximations, the zero slows down the drop of the magnitude, thereby pushing the gain crossover away from the origin. As a result, the stability degrades considerably.\n\nTo better understand the foregoing discussion, let us construct the Bode plots for a third-order system containing a dominant pole $\\omega_{p 1}$, two nondominant poles $\\omega_{p 2}$ and $\\omega_{p 3}$, and a zero in the right half plane $\\omega_{z}$. For two-stage op amps, typically $\\left|\\omega_{p 1}\\right|<\\left|\\omega_{z}\\right|<\\left|\\omega_{p 2}\\right|$. As shown in Fig. 10.31, the zero introduces significant phase shift while preventing the gain from falling sufficiently.\n\n#### Example 10.7\n\nNoting that the Miller compensation in Fig. 10.29(a) yields $\\omega_{p 2} \\approx g_{m 9} / C_{L}$ and $\\omega_{z} \\approx g_{m 9} / C_{C}$, a student decides to choose $C_{C}=C_{L}$, aiming to cancel the second pole by the zero. Explain what happens.\n\n#### Solution\n\nRecall that the zero is located in the right half plane and the poles in the left half plane. The compensated loop transmission can therefore be expressed as\n\n$$\n\\begin{equation*}\n\\beta H(s)=\\frac{\\beta A_{0}\\left(1-\\frac{s}{\\omega_{z}}\\right)}{\\left(1+\\frac{s}{\\omega_{p 1}}\\right)\\left(1+\\frac{s}{\\omega_{p 2}}\\right)} \\tag{10.29}\n\\end{equation*}\n$$\n\nWe recognize that the zero does not cancel the pole and still affects $|\\beta H|$ and $\\angle \\beta H$.\n\nThe right-half-plane zero in two-stage CMOS op amps, given by $g_{m} /\\left(C_{C}+C_{G D}\\right)$, is a serious issue because $g_{m}$ is relatively small and $C_{C}$ is chosen large enough to position the dominant pole properly. Various techniques for eliminating or moving the zero have been invented. Illustrated in Fig. 10.32, places a resistor in series with the compensation capacitor, thereby modifying the zero frequency. The output stage now exhibits three poles, but for moderate values of $R_{z}$, the third pole is located at high frequencies and the first two poles are close to the values calculated with $R_{z}=0$. Moreover, it can be shown (Problem 10.8) that the zero frequency is given by\n\n$$\n\\begin{equation*}\n\\omega_{z} \\approx \\frac{1}{C_{C}\\left(g_{m 9}^{-1}-R_{z}\\right)} \\tag{10.30}\n\\end{equation*}\n$$\n\nThus, if $R_{z} \\geq g_{m 9}^{-1}$, then $\\omega_{z} \\leq 0$. While $R_{z}=g_{m 9}^{-1}$ seems a natural choice, in practice we may even move the zero well into the left half plane so as to cancel the first nondominant pole. This occurs if\n\n$$\n\\begin{equation*}\n\\frac{1}{C_{C}\\left(g_{m 9}^{-1}-R_{z}\\right)}=\\frac{-g_{m 9}}{C_{L}+C_{E}} \\tag{10.31}\n\\end{equation*}\n$$\n\nthat is\n\n$$\n\\begin{align*}\nR_{z} & =\\frac{C_{L}+C_{E}+C_{C}}{g_{m 9} C_{C}}  \\tag{10.32}\\\\\n& \\approx \\frac{C_{L}+C_{C}}{g_{m 9} C_{C}} \\tag{10.33}\n\\end{align*}\n$$\n\nbecause $C_{E}$ is typically much less than $C_{L}+C_{C}$.\nThe possibility of canceling the nondominant pole makes this technique attractive, but in reality two important drawbacks must be considered. First, it is difficult to guarantee the relationship given by (10.33), especially if $C_{L}$ is unknown or variable. Mismatch between the pole and zero frequencies leads to the \"doublet problem\" (Problem 10.19). For example, as explained in Chapter 13, the load capacitance seen by an op amp may vary from one part of the period to another in switched-capacitor circuits, necessitating a corresponding change in $R_{z}$ and complicating the design. The second drawback relates to the actual implementation of $R_{z}$. Typically realized by a MOS transistor in the triode region (Fig. 10.33), $R_{z}$ changes substantially as output voltage excursions are coupled through $C_{C}$ to node $X$, thereby degrading the large-signal settling response.\n\nGenerating $V_{b}$ in Fig. 10.33 is not straightforward because $R_{Z}$ must remain equal to $\\left(1+C_{L} / C_{C}\\right) / g_{m 9}$ despite process and temperature variations. A common approach is illustrated in Fig. 10.34 [2], where diode-connected devices $M_{13}$ and $M_{14}$ are placed in series. If $I_{1}$ is chosen with respect to $I_{D 9}$ such that $V_{G S 13}=V_{G S 9}$, then $V_{G S 15}=V_{G S 14}$. Since $g_{m 14}=\\mu_{p} C_{o x}(W / L)_{14}\\left(V_{G S 14}-V_{T H 14}\\right)$ and $R_{o n 15}=$ $\\left[\\mu_{p} C_{o x}(W / L)_{15}\\left(V_{G S 15}-V_{T H 15}\\right)\\right]^{-1}$, we have $R_{o n 15}=g_{m 14}^{-1}(W / L)_{14} /(W / L)_{15}$. For pole-zero cancellation to occur,\n\n$$\n\\begin{equation*}\ng_{m 14}^{-1} \\frac{(W / L)_{14}}{(W / L)_{15}}=g_{m 9}^{-1}\\left(1+\\frac{C_{L}}{C_{C}}\\right) \\tag{10.34}\n\\end{equation*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\n(W / L)_{15}=\\sqrt{(W / L)_{14}(W / L)_{9}} \\sqrt{\\frac{I_{D 9}}{I_{D 14}}} \\frac{C_{C}}{C_{C}+C_{L}} \\tag{"
},
{
    "text": "Our investigation in Chapter 9 reveals that two-stage topologies are often necessary to maximize the output voltage swing, especially in contemporary low-voltage op amps. Hence, understanding the stability and compensation of these op amps is crucial.\n\nTake, for instance, the circuit depicted in Fig. 10.25. It features three poles: one at $X$ (or $Y$), another at $E$ (or $F$), and a third at $A$ (or $B$). We have previously established that the pole at $X$ exists at relatively high frequencies. However, the other two poles warrant further examination. Node $E$ exhibits a high small-signal resistance, which means that even the capacitances of $M_{3}, M_{5}$, and $M_{9}$ can create a pole near the origin. At node $A$, the small-signal resistance is lower, but $C_{L}$ may be significant. Therefore, the circuit is characterized by two dominant poles.\n\nThe circuit in Fig. 10.25 is a two-stage operational amplifier. The first stage is a differential amplifier, consisting of M1 and M2 with active loads M3 and M4. The second stage is a common-source amplifier with M9 and M10 serving as active loads. Compensation capacitors CL are included to stabilize the amplifier and enhance its frequency response. The presence of two dominant poles at nodes E and A is due to the high small-signal resistance and substantial load capacitance.\n\nThe observations from this circuit allow us to create magnitude and phase plots, as shown in Fig. 10.26. Here, $\\omega_{p, E}$ is considered the more dominant pole, but the exact positioning of $\\omega_{p, E}$ and $\\omega_{p, A}$ depends on the design and load capacitance. Notably, because the poles at $E$ and $A$ are close to the origin, the phase approaches $-180^{\\circ}$ well before the third pole, suggesting that the phase margin may be near zero even before the third pole's significant phase shift.\n\nLet's delve into the frequency compensation of two-stage op amps. In Fig. 10.26, one of the dominant poles must be shifted towards the origin to position the gain crossover below the phase crossover. However, as discussed in Sec. 10.4, the unity-gain bandwidth after compensation cannot surpass the frequency of the second pole of the open-loop system for $\\mathrm{PM}>45^{\\circ}$. Consequently, if $\\omega_{p, E}$ is reduced in Fig. 10.26, the available bandwidth is limited to approximately $\\omega_{p, A}$, which is quite low. Moreover, the minimal magnitude of the new dominant pole necessitates a large compensation capacitor.\n\nFortunately, a more efficient compensation method can be applied to the circuit in Fig. 10.25. Notably, as depicted in Fig. 10.27(a), the first stage exhibits a high output impedance, $R_{\\text {out1 }}$, while the second stage offers moderate gain, $A_{v 2}$, creating an environment conducive to Miller multiplication of capacitors. As shown in Fig. 10.27(b), the objective is to generate a large capacitance at node $E$, equal to $\\left(1+A_{v 2}\\right) C_{C}$, thereby shifting the corresponding pole to $R_{\\text {out } 1}^{-1}\\left[C_{E}+\\left(1+A_{v 2}\\right) C_{C}\\right]^{-1}$, where $C_{E}$ represents the capacitance at node $E$ before $C_{C}$ is added. This approach establishes a low-frequency pole with a moderate capacitor value, conserving significant chip area. This technique is known as \"Miller compensation.\"\n\nMiller compensation not only reduces the required capacitor value but also shifts the output pole away from the origin. This effect, illustrated in Fig. 10.28, is termed \"pole splitting.\" To comprehend this principle, we simplify the output stage of Fig. 10.25 as in Fig. 10.29, where $R_{S}$ denotes the output resistance of the first stage and $R_{L}=r_{O 9} \\| r_{O 11}$. Based on our analysis in Chapter 6, this compensated circuit contains two poles:\n\n$$\n\\begin{align*}\n& \\omega_{p 1}^{\\prime} \\approx \\frac{1}{R_{S}\\left[\\left(1+g_{m 9} R_{L}\\right)\\left(C_{C}+C_{G D 9}\\right)+C_{E}\\right]+R_{L}\\left(C_{C}+C_{G D 9}+C_{L}\\right)}  \\tag{10.24}\\\\\n& \\omega_{p 2}^{\\prime} \\approx \\frac{R_{S}\\left[\\left(1+g_{m 9} R_{L}\\right)\\left(C_{C}+C_{G D 9}\\right)+C_{E}\\right]+R_{L}\\left(C_{C}+C_{G D 9}+C_{L}\\right)}{\\left.R_{S} R_{L}\\left[\\left(C_{C}+C_{G D 9}\\right) C_{E}+\\left(C_{C}+C_{G D 9}\\right) C_{L}+C_{E} C_{L}\\right)\\right]} \\tag{10.25}\n\\end{align*}\n$$\n\nThese expressions are founded on the assumption that $\\left|\\omega_{p 1}^{\\prime}\\right| \\ll\\left|\\omega_{p 2}^{\\prime}\\right|$. Before compensation, $\\omega_{p 1}$ and $\\omega_{p 2}$ are of the same order of magnitude. For $C_{C}=0$ and relatively large $C_{L}$, we may approximate the magnitude of the output pole as $\\omega_{p 2} \\approx 1 /\\left(R_{L} C_{L}\\right)$.\n\nTo compare the magnitudes of $\\omega_{p 2}^{\\prime}$ before and after compensation, we consider a typical case: $C_{C}+$ $C_{G D 9} \\gg C_{E}$, simplifying (10.25) to $\\omega_{p 2}^{\\prime} \\approx g_{m 9} /\\left(C_{E}+C_{L}\\right)$. Considering that typically $C_{E} \\ll C_{L}$, we conclude that Miller compensation increases the magnitude of the output pole by roughly a factor of $g_{m 9} R_{L}$, a relatively large value. Intuitively, this occurs because at high frequencies, $C_{C}$ provides a low impedance between the gate and drain of $M_{9}$, diminishing the resistance seen by $C_{L}$ from $R_{L}$ to roughly $R_{S}\\left\\|g_{m 9}^{-1}\\right\\| R_{L} \\approx$ $g_{m 9}^{-1}\\left[\\right.$ Fig. 10.29(b)]. From another perspective, $C_{C}$ provides feedback around the second stage by sensing the output voltage; as a result, the output resistance diminishes and the second pole moves to higher frequencies.\n\nIn essence, Miller compensation shifts the interstage pole towards the origin and the output pole away from the origin, enabling a much broader bandwidth than that achieved by simply connecting the compensation capacitor from one node to ground. In practice, selecting the compensation capacitor for the appropriate phase margin necessitates some iteration because both poles shift. The following example provides a rough estimate.\n\n#### Example 10.6\n\nThe two-stage op amp in Fig. 10.25 employs Miller compensation to achieve a phase margin of $45^{\\circ}$. Estimate the compensation capacitor value.\n\n[^72]\n#### Solution\n\nFollowing frequency compensation, the dominant pole descends to approximately $\\left(g_{m 9} R_{L} C_{C} R_{S}\\right)^{-1}$, where $R_{S}$ denotes the output resistance of the first stage, and the second pole ascends to roughly $g_{m 9} / C_{L}$. For a phase margin of $45^{\\circ}$, the loop gain must to unity at the second pole. With a low-frequency loop gain of $\\beta g_{m 1} R_{S} g_{m 9} R_{L}$, we consider the postcompensation plot in Fig. 10.30 (on linear axes) and write\n\n$$\n\\begin{equation*}\n|\\beta H(\\omega)| \\approx \\frac{\\beta g_{m 1} R_{S} g_{m 9} R_{L}}{\\sqrt{1+\\omega^{2} / \\omega_{p 1}^{, 2}}} \\tag{10.26}\n\\end{equation*}\n$$\n\nwhere the influence of $\\omega_{p 2}^{\\prime}$ on the magnitude is disregarded. At $\\omega=\\omega_{p 2}^{\\prime}$, the second term under the square root dominates, and\n\n$$\n\\begin{equation*}\n\\frac{\\beta g_{m 1} R_{S} g_{m 9} R_{L}}{\\omega_{p 2}^{\\prime} / \\omega_{p 1}^{\\prime}}=1 \\tag{10.27}\n\\end{equation*}\n$$\n\nSubstituting for the pole frequencies and assuming that $\\beta=1$, we obtain\n\n$$\n\\begin{equation*}\nC_{C}=\\frac{g_{m 1}}{g_{m 9}} C_{L} \\tag{10.28}\n\\end{equation*}\n$$\n\nIt can be demonstrated that, if the effect of $\\omega_{p 2}^{\\prime}$ is included, then $C_{C}=\\left[g_{m 1} /\\left(\\sqrt{2} g_{m 9}\\right)\\right] C_{L}$. Of course, $C_{C}$ must generally be greater than this value to establish a higher phase margin, but this estimate serves as a reasonable starting point in the design.\n\nThis result assumes that $\\beta=1$; in reality, most op amps are configured for a closed-loop gain of 2 or higher, thus requiring a smaller $C_{C}$.\n\nOur examination of stability and compensation has thus far overlooked the impact of zeros of the transfer function. While in cascode topologies, the zeros are distant from the origin, in two-stage op amps incorporating Miller compensation, a nearby zero emerges in the circuit. Recalling from Chapter 6 that the circuit of Fig. 10.29 contains a right-half-plane zero at $\\omega_{z}=g_{m 9} /\\left(C_{C}+C_{G D 9}\\right)$, we must consider its effect. The numerator of the transfer function reads $\\left(1-s / \\omega_{z}\\right)$, yielding a phase of $-\\tan ^{-1}\\left(\\omega / \\omega_{z}\\right)$, a negative value because $\\omega_{z}$ is positive. In other words, similar to poles in the left half plane, a zero in the right half plane contributes additional negative phase shift, thus shifting the phase crossover towards the origin. Furthermore, from Bode approximations, the zero slows down the magnitude's decline, thereby pushing the gain crossover away from the origin. As a result, the stability is significantly compromised.\n\nTo better understand this concept, let's construct the Bode plots for a third-order system containing a dominant pole $\\omega_{p 1}$, two nondominant poles $\\omega_{p 2}$ and $\\omega_{p 3}$, and a zero in the right half plane $\\omega_{z}$. For two-stage op amps, typically $\\left|\\omega_{p 1}\\right|<\\left|\\omega_{z}\\right|<\\left|\\omega_{p 2}\\right|$. As shown in Fig. 10.31, the zero introduces considerable phase shift while preventing the gain from decreasing adequately.\n\n#### Example 10.7\n\nConsidering that the Miller compensation in Fig. 10.29(a) yields $\\omega_{p 2} \\approx g_{m 9} / C_{L}$ and $\\omega_{z} \\approx g_{m 9} / C_{C}$, a student opts to set $C_{C}=C_{L}$, aiming to cancel the second pole with the zero. Explain the outcome.\n\n#### Solution\n\nRecall that the zero is situated in the right half plane and the poles in the left half plane. The compensated loop transmission can therefore be expressed as\n\n$$\n\\begin{equation*}\n\\beta H(s)=\\frac{\\beta A_{0}\\left(1-\\frac{s}{\\omega_{z}}\\right)}{\\left(1+\\frac{s}{\\omega_{p 1}}\\right)\\left(1+\\frac{s}{\\omega_{p 2}}\\right)} \\tag{10.29}\n\\end{equation*}\n$$\n\nWe recognize that the zero does not cancel the pole and still influences $|\\beta H|$ and $\\angle \\beta H$.\n\nThe right-half-plane zero in two-stage CMOS op amps, given by $g_{m} /\\left(C_{C}+C_{G D}\\right)$, poses a significant challenge because $g_{m}$ is relatively small and $C_{C}$ is chosen large enough to position the dominant pole correctly. Various techniques for eliminating or moving the zero have been developed. Illustrated in Fig. 10.32, placing a resistor in series with the compensation capacitor modifies the zero frequency. The output stage now exhibits three poles, but for moderate values of $R_{z}$, the third pole is situated at high frequencies, and the first two poles are close to the values calculated with $R_{z}=0$. Moreover, it can be shown (Problem 10.8) that the zero frequency is given by\n\n$$\n\\begin{equation*}\n\\omega_{z} \\approx \\frac{1}{C_{C}\\left(g_{m 9}^{-1}-R_{z}\\right)} \\tag{10.30}\n\\end{equation*}\n$$\n\nThus, if $R_{z} \\geq g_{m 9}^{-1}$, then $\\omega_{z} \\leq 0$. While $R_{z}=g_{m 9}^{-1}$ seems like a natural choice, in practice, we may even move the zero well into the left half plane to cancel the first nondominant pole. This occurs if\n\n$$\n\\begin{equation*}\n\\frac{1}{C_{C}\\left(g_{m 9}^{-1}-R_{z}\\right)}=\\frac{-g_{m 9}}{C_{L}+C_{E}} \\tag{10.31}\n\\end{equation*}\n$$\n\nthat is\n\n$$\n\\begin{align*}\nR_{z} & =\\frac{C_{L}+C_{E}+C_{C}}{g_{m 9} C_{C}}  \\tag{10.32}\\\\\n& \\approx \\frac{C_{L}+C_{C}}{g_{m 9} C_{C}} \\tag{10.33}\n\\end{align*}\n$$\n\nbecause $C_{E}$ is typically much less than $C_{L}+C_{C}$.\n\nThe possibility of canceling the nondominant pole makes this technique appealing, but in reality, two important drawbacks must be considered. First, it is challenging to ensure the relationship given by (10.33), especially if $C_{L}$ is unknown or variable. Mismatch between the pole and zero frequencies leads to the \"doublet problem\" (Problem 10.19). For example, as explained in Chapter 13, the load capacitance seen by an op amp may vary from one part of the period to another in switched-capacitor circuits, necessitating a corresponding change in $R_{z}$ and complicating the design. The second drawback relates to the actual implementation of $R_{z}$. Typically realized by a MOS transistor in the triode region (Fig. 10.33), $R_{z}$ changes substantially as output voltage excursions are coupled through $C_{C}$ to node $X$, thereby degrading the large-signal settling response.\n\nGenerating $V_{b}$ in Fig. 10.33 is not straightforward because $R_{Z}$ must remain equal to $\\left(1+C_{L} / C_{C}\\right) / g_{m 9}$ despite process and temperature variations. A common approach is illustrated in Fig. 10.34, where diode-connected devices $M_{13}$ and $M_{14}$ are placed in series. If $I_{1}$ is chosen with respect to $I_{D 9}$ such that $V_{G S 13}=V_{G S 9}$, then $V_{G S 15}=V_{G S 14}$. Since $g_{m 14}=\\mu_{p} C_{o x}(W / L)_{14}\\left(V_{G S 14}-V_{T H 14}\\right)$ and $R_{o n 15}=$ $\\left[\\mu_{p} C_{o x}(W / L)_{15}\\left(V_{G S 15}-V_{T H 15}\\right)\\right]^{-1}$, we have $R_{o n 15}=g_{m 14}^{-1}(W / L)_{14} /(W / L)_{15}$. For pole-zero cancellation to occur,\n\n$$\n\\begin{equation*}\ng_{m 14}^{-1} \\frac{(W / L)_{14}}{(W / L)_{15}}=g_{m 9}^{-1}\\left(1+\\frac{C_{L}}{C_{C}}\\right) \\tag{10.34}\n\\end{equation*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\n(W / L)_{15}=\\sqrt{(W / L)_{14}(W / L)_{9}} \\sqrt{\\frac{I_{D 9}}{I_{D 14}}} \\frac{C_{C}}{C_{C}+C_{L}} \\tag{10.35}\n\\end{equation*}\n$$\n\nIf $C_{L}$ is constant, (10.35) can be established with reasonable accuracy because it contains only the ratio of quantities.\n\nAnother method of guaranteeing Eq. (10.33) is to use a simple resistor for $R_{Z}$ and define $g_{m 9}$ with respect to a resistor that closely matches $R_{Z}$ [3]. Depicted in Fig. 10.35, this technique incorporates $M_{b 1}-M_{b 4}$ along with $R_{S}$"
},
{
    "text": "Our examination of operational amplifiers (op amps) in Chapter 9 suggests that two-stage topologies are often necessary to maximize output voltage swing, especially in modern low-voltage op amps. Therefore, understanding the stability and compensation of these op amps is crucial.\n\nLet's analyze the circuit depicted in Fig. 10.25. It has three poles: one at $X$ (or $Y$), another at $E$ (or $F$), and a third at $A$ (or $B$). We know from previous discussions that the pole at $X$ is at a relatively high frequency. However, the other two poles are of interest. Node $E$ has a high small-signal resistance, which means that even the capacitances of $M_{3}$, $M_{5}$, and $M_{9}$ can create a pole near the origin. At node $A$, the small-signal resistance is lower, but $C_{L}$ may be large. As a result, we consider the circuit to have two dominant poles.\n\nThe circuit in Fig. 10.25 is a two-stage operational amplifier. The first stage is a differential amplifier, consisting of $M_1$ and $M_2$ with active loads $M_3$ and $M_4$. The second stage is a common-source amplifier with $M_9$ and $M_{10}$ as active loads. The circuit includes compensation capacitors $C_L$ to stabilize the amplifier and enhance the frequency response. There are two dominant poles at nodes $E$ and $A$ due to the high small-signal resistance and large load capacitance.\n\nWe can use these observations to create the magnitude and phase plots shown in Fig. 10.26. Here, $\\omega_{p, E}$ is assumed to be more dominant, but the relative positions of $\\omega_{p, E}$ and $\\omega_{p, A}$ depend on the design and load capacitance. Note that since the poles at $E$ and $A$ are near the origin, the phase approaches $-180^{\\circ}$ well before the third pole. This means that the phase margin may be close to zero even before the third pole contributes significantly to the phase shift.\n\nNow, let's explore the frequency compensation of two-stage op amps. In Fig. 10.26, one of the dominant poles must be shifted towards the origin to ensure the gain crossover is well below the phase crossover. However, as discussed in Sec. 10.4, the unity-gain bandwidth after compensation cannot exceed the frequency of the second pole of the open-loop system for $\\mathrm{PM}>45^{\\circ}$. Thus, if in Fig. 10.26 the magnitude of $\\omega_{p, E}$ is to be reduced, the available bandwidth is limited to approximately $\\omega_{p, A}$, which is a low value. Additionally, the very small magnitude of the new dominant pole translates to a large compensation capacitor.\n\nFortunately, a more efficient compensation method can be applied to the circuit in Fig. 10.25. As shown in Fig. 10.27(a), the first stage has a high output impedance, $R_{\\text {out1 }}$, and the second stage provides a moderate gain, $A_{v 2}$, creating an ideal environment for Miller multiplication of capacitors. The idea, as shown in Fig. 10.27(b), is to create a large capacitance at node $E$, equal to $\\left(1+A_{v 2}\\right) C_{C}$, moving the corresponding pole to $R_{\\text {out } 1}^{-1}\\left[C_{E}+\\left(1+A_{v 2}\\right) C_{C}\\right]^{-1}$, where $C_{E}$ denotes the capacitance at node $E$ before $C_{C}$ is added. This allows a low-frequency pole to be established with a moderate capacitor value, saving considerable chip area. This technique is known as \"Miller compensation.\"\n\nMiller compensation not only reduces the required capacitor value but also moves the output pole away from the origin, a phenomenon called \"pole splitting.\" To understand this principle, we simplify the output stage of Fig. 10.25 as in Fig. 10.29, where $R_{S}$ denotes the output resistance of the first stage and $R_{L}=r_{O 9} \\| r_{O 11}$. From our analysis in Chapter 6, we note that this compensated circuit contains two poles:\n\n$$\n\\begin{align*}\n& \\omega_{p 1}^{\\prime} \\approx \\frac{1}{R_{S}\\left[\\left(1+g_{m 9} R_{L}\\right)\\left(C_{C}+C_{G D 9}\\right)+C_{E}\\right]+R_{L}\\left(C_{C}+C_{G D 9}+C_{L}\\right)}  \\tag{10.24}\\\\\n& \\omega_{p 2}^{\\prime} \\approx \\frac{R_{S}\\left[\\left(1+g_{m 9} R_{L}\\right)\\left(C_{C}+C_{G D 9}\\right)+C_{E}\\right]+R_{L}\\left(C_{C}+C_{G D 9}+C_{L}\\right)}{\\left.R_{S} R_{L}\\left[\\left(C_{C}+C_{G D 9}\\right) C_{E}+\\left(C_{C}+C_{G D 9}\\right) C_{L}+C_{E} C_{L}\\right)\\right]} \\tag{10.25}\n\\end{align*}\n$$\n\nThese expressions are based on the assumption that $\\left|\\omega_{p 1}^{\\prime}\\right| \\ll\\left|\\omega_{p 2}^{\\prime}\\right|$. Before compensation, however, $\\omega_{p 1}$ and $\\omega_{p 2}$ are of the same order of magnitude. For $C_{C}=0$ and relatively large $C_{L}$, we may approximate the magnitude of the output pole as $\\omega_{p 2} \\approx 1 /\\left(R_{L} C_{L}\\right)$.\n\nTo compare the magnitudes of $\\omega_{p 2}^{\\prime}$ before and after compensation, we consider a typical case: $C_{C}+$ $C_{G D 9} \\gg C_{E}$, reducing (10.25) to $\\omega_{p 2}^{\\prime} \\approx g_{m 9} /\\left(C_{E}+C_{L}\\right)$. Noting that typically $C_{E} \\ll C_{L}$, we conclude that Miller compensation increases the magnitude of the output pole by roughly a factor of $g_{m 9} R_{L}$, a relatively large value. Intuitively, this is because at high frequencies, $C_{C}$ provides a low impedance between the gate and drain of $M_{9}$, reducing the resistance seen by $C_{L}$ from $R_{L}$ to roughly $R_{S}\\left\\|g_{m 9}^{-1}\\right\\| R_{L} \\approx$ $g_{m 9}^{-1}\\left[\\right.$ Fig. 10.29(b)]. From another perspective, $C_{C}$ provides feedback around the second stage by sensing the output voltage; as a result, the output resistance falls and the second pole moves to higher frequencies. ${ }^{5}$\n\nIn summary, Miller compensation moves the interstage pole towards the origin and the output pole away from the origin, allowing a much greater bandwidth than that obtained by merely connecting the compensation capacitor from one node to ground. In practice, the choice of the compensation capacitor for proper phase margin requires some iteration because both poles move. The following example gives a rough estimate.\n\n#### Example 10.6\n\nThe two-stage op amp of Fig. 10.25 incorporates Miller compensation to reach a phase margin of $45^{\\circ}$. Estimate the compensation capacitor value.\n\n[^72]\n#### Solution\n\nAfter frequency compensation, the dominant pole moves down to approximately $\\left(g_{m 9} R_{L} C_{C} R_{S}\\right)^{-1}$, where $R_{S}$ denotes the output resistance of the first stage, and the second pole moves up to roughly $g_{m 9} / C_{L}$. For a phase margin of $45^{\\circ}$, the loop gain must drop to unity at the second pole. With a low-frequency loop gain of $\\beta g_{m 1} R_{S} g_{m 9} R_{L}$, we consider the postcompensation plot in Fig. 10.30 (on linear axes) and write\n\n$$\n\\begin{equation*}\n|\\beta H(\\omega)| \\approx \\frac{\\beta g_{m 1} R_{S} g_{m 9} R_{L}}{\\sqrt{1+\\omega^{2} / \\omega_{p 1}^{, 2}}} \\tag{10.26}\n\\end{equation*}\n$$\n\nwhere the effect of $\\omega_{p 2}^{\\prime}$ on the magnitude is neglected. At $\\omega=\\omega_{p 2}^{\\prime}$, the second term under the square root dominates, and\n\n$$\n\\begin{equation*}\n\\frac{\\beta g_{m 1} R_{S} g_{m 9} R_{L}}{\\omega_{p 2}^{\\prime} / \\omega_{p 1}^{\\prime}}=1 \\tag{10.27}\n\\end{equation*}\n$$\n\nSubstituting for the pole frequencies and assuming that $\\beta=1$, we obtain\n\n$$\n\\begin{equation*}\nC_{C}=\\frac{g_{m 1}}{g_{m 9}} C_{L} \\tag{10.28}\n\\end{equation*}\n$$\n\nNote that $g_{m 1}$ and $g_{m 9}$ are the transconductances of the two stages. The reader can prove that, if the effect of $\\omega_{p 2}^{\\prime}$ is included, then $C_{C}=\\left[g_{m 1} /\\left(\\sqrt{2} g_{m 9}\\right)\\right] C_{L}$. Of course, $C_{C}$ must generally be greater than this value so as to establish a higher phase margin, but this estimate serves as a reasonable starting point in the design.\n\nThis result assumes that $\\beta=1$; in practice, most op amps are configured for a closed-loop gain of 2 or higher, thus requiring a smaller $C_{C}$.\n\nOur study of stability and compensation has thus far neglected the effect of zeros of the transfer function. While in cascode topologies, the zeros are far from the origin, in two-stage op amps incorporating Miller compensation, a nearby zero appears in the circuit. Recall from Chapter 6 that the circuit of Fig. 10.29 contains a right-half-plane zero at $\\omega_{z}=g_{m 9} /\\left(C_{C}+C_{G D 9}\\right)$. This is because $C_{C}+C_{G D 9}$ forms a \"feedforward\" signal path from the input to the output. What is the effect of such a zero? The numerator of the transfer function reads $\\left(1-s / \\omega_{z}\\right)$, yielding a phase of $-\\tan ^{-1}\\left(\\omega / \\omega_{z}\\right)$, a negative value because $\\omega_{z}$ is positive. In other words, as with poles in the left half plane, a zero in the right half plane contributes additional negative phase shift, thus moving the phase crossover towards the origin. Furthermore, from Bode approximations, the zero slows down the drop of the magnitude, thereby pushing the gain crossover away from the origin. As a result, the stability degrades considerably.\n\nTo better understand the foregoing discussion, let us construct the Bode plots for a third-order system containing a dominant pole $\\omega_{p 1}$, two nondominant poles $\\omega_{p 2}$ and $\\omega_{p 3}$, and a zero in the right half plane $\\omega_{z}$. For two-stage op amps, typically $\\left|\\omega_{p 1}\\right|<\\left|\\omega_{z}\\right|<\\left|\\omega_{p 2}\\right|$. As shown in Fig. 10.31, the zero introduces significant phase shift while preventing the gain from falling sufficiently.\nimage_name:Figure 10.31 Effect of right-half-plane zero\ndescription:The graph in Figure 10.31 is a Bode plot, which consists of two plots: one for magnitude and one for phase, both plotted against frequency on a logarithmic scale.\n\nMagnitude Plot:\n- **Type:** Logarithmic plot of magnitude.\n- **Y-Axis:** Represents the magnitude in decibels (dB), specifically \\(20\\log|\\beta H(\\omega)|\\).\n- **X-Axis:** Represents frequency \\(\\omega\\) on a logarithmic scale.\n- **Behavior:**\n- The plot starts at a constant level, indicating a flat gain at low frequencies.\n- As the frequency increases, the first pole \\(\\omega_{p1}\\) causes the magnitude to begin decreasing at a rate of -20 dB/decade.\n- The presence of the zero \\(\\omega_{z}\\) temporarily flattens the slope, reducing the rate of decrease.\n- After the zero, the second pole \\(\\omega_{p2}\\) and third pole \\(\\omega_{p3}\\) cause further decreases in the magnitude, each contributing an additional -20 dB/decade, resulting in a steeper slope.\n\nPhase Plot:\n- **Type:** Logarithmic plot of phase.\n- **Y-Axis:** Represents the phase in degrees.\n- **X-Axis:** Represents frequency \\(\\omega\\) on a logarithmic scale.\n- **Behavior:**\n- The phase starts at 0 degrees and begins to decrease as frequency increases.\n- The first pole \\(\\omega_{p1}\\) causes the phase to drop towards -90 degrees.\n- The right-half-plane zero \\(\\omega_{z}\\) introduces a positive phase shift, which is atypical as it causes the phase to initially increase slightly before continuing to decrease.\n- The subsequent poles \\(\\omega_{p2}\\) and \\(\\omega_{p3}\\) cause further phase decreases, moving the phase closer to -270 degrees.\n\nKey Features:\n- The graph clearly illustrates the effect of a right-half-plane zero, which notably alters the phase response and reduces the rate of magnitude decrease temporarily.\n- Critical points like \\(\\omega_{p1}\\), \\(\\omega_{z}\\), \\(\\omega_{p2}\\), and \\(\\omega_{p3}\\) are marked, showing their impact on the system's frequency response.\n\n#### Example 10.7\n\nNoting that the Miller compensation in Fig. 10.29(a) yields $\\omega_{p 2} \\approx g_{m 9} / C_{L}$ and $\\omega_{z} \\approx g_{m 9} / C_{C}$, a student decides to choose $C_{C}=C_{L}$, aiming to cancel the second pole by the zero. Explain what happens.\n\n#### Solution\n\nRecall that the zero is located in the right half plane and the poles in the left half plane. The compensated loop transmission can therefore be expressed as\n\n$$\n\\begin{equation*}\n\\beta H(s)=\\frac{\\beta A_{0}\\left(1-\\frac{s}{\\omega_{z}}\\right)}{\\left(1+\\frac{s}{\\omega_{p 1}}\\right)\\left(1+\\frac{s}{\\omega_{p 2}}\\right)} \\tag{10.29}\n\\end{equation*}\n$$\n\nWe recognize that the zero does not cancel the pole and still affects $|\\beta H|$ and $\\angle \\beta H$.\n\nThe right-half-plane zero in two-stage CMOS op amps, given by $g_{m} /\\left(C_{C}+C_{G D}\\right)$, is a serious issue because $g_{m}$ is relatively small and $C_{C}$ is chosen large enough to position the dominant pole properly. Various techniques for eliminating or moving the zero have been invented. Illustrated in Fig. 10.32, places a resistor in series with the compensation capacitor, thereby modifying the zero frequency. The output stage now exhibits three poles, but for moderate values of $R_{z}$, the third pole is located at high frequencies and the first two poles are close to the values calculated with $R_{z}=0$. Moreover, it can be\nimage_name:Figure 10.32 Addition of $R_{z}$ to move the right-half-plane zero.\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: g9}\nname: CE, type: Capacitor, value: CE, ports: {Np: VDD, Nn: g9}\nname: M9, type: PMOS, ports: {S: VDD, D: Vout, G: g9}\nname: RZ, type: Resistor, value: Rz, ports: {N1: g9, N2: r_c}\nname: CC, type: Capacitor, value: CC, ports: {Np: r_c, Nn: Vout}\nname: RL, type: Resistor, value: RL, ports: {N1: Vout, N2: GND}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit diagram 'Figure 10.32' includes a PMOS transistor M9 with a compensation capacitor CC and a resistor RZ added to move the zero frequency. The output stage exhibits three poles with the addition of RZ.\n\nshown (Problem 10.8) that the zero frequency is given by\n\n$$\n\\begin{equation*}\n\\omega_{z} \\approx \\frac{1}{C_{C}\\left(g_{m 9}^{-1}-R_{z}\\right)} \\tag{10.30}\n\\end{equation*}\n$$\n\nThus, if $R_{z} \\geq g_{m 9}^{-1}$, then $\\omega_{z} \\leq 0$. While $R_{z}=g_{m 9}^{-1}$ seems a natural choice, in practice we may even move the zero well into the left half plane so as to cancel the first nondominant pole. This occurs if\n\n$$\n\\begin{equation*}\n\\frac{1}{C"
},
{
    "text": "Our exploration of operational amplifiers in Chapter 9 suggests that employing a two-stage topology is essential when maximizing the output voltage swing, particularly in modern low-voltage op amps. Consequently, understanding the stability and compensation mechanisms of these op amps is crucial.\n\nExamine the circuit depicted in Fig. 10.25. We can identify three poles: one at $X$ (or $Y$), another at $E$ (or $F$), and a third at $A$ (or $B$). Our previous discussions indicate that the pole at $X$ exists at relatively high frequencies. However, the situation is different for the other two poles. At node $E$, the high small-signal resistance means that even the capacitances of $M_{3}$ M_{5}$, and $M_{9}$ can contribute a pole near the origin. At node $A$, the small-signal resistance is lower, but $C_{L}$ may be significant. Therefore, we can\nThe investigation in operational amplifiers in Chapter 9 indicates that a two-stage topology is necessary for maximize output output voltage swing, particularly in modern low-voltage op amps. As the stability and compensation of\nOur exploration into Chapter 9 indicates that a two-stage topology is necessary for maximize the output voltage swing, particularly in modern low-voltage op amps. Understanding, understanding the stability and compensation mechanisms of these op amps is crucial."
},
{
    "text": "Our examination of operational amplifiers in Chapter 9 suggests that two-stage configurations are often necessary to achieve the maximum output voltage swing, particularly in modern low-voltage op amps. Consequently, the stability and compensation mechanisms for these op amps are of significant interest.\n\nExamine the circuit depicted in Fig. 10.25. It features three poles: one at $X$ (or $Y$), another at $E$ (or $F$), and a third at $A$ (or $B$). Our previous discussions have established that the pole at $X$ is situated at relatively high frequencies. However, the positions of the other two poles require further investigation. Due to the high small-signal resistance at node $E$, even the capacitances of $M_{3}$, $M_{5}$, and $M_{9}$ can contribute to a pole near the origin. At node $A$, the small-signal resistance is lower, but $C_{L}$ may be substantial. As a result, we identify two dominant poles in the circuit.\n\nFigure 10.25 depicts a two-stage operational amplifier. The first stage is a differential amplifier composed of $M_1$ and $M_2$, with active loads $M_3$ and $M_4$. The second stage is a common-source amplifier with $M_9$ and $M_10$ as active loads. The circuit includes compensation capacitor $C_L$ to stabilize the amplifier and enhance its frequency response. There are two dominant poles at nodes $E$ and $A$ due to the high small-signal resistance and significant load capacitance.\n\nFigure 10.26 presents the magnitude and phase plots for the loop gain of the two-stage op amp. Here, $\\omega_{p,E}$ is considered more dominant, but the relative positions of $\\omega_{p,E}$ and $\\omega_{p,A}$ depend on the design and load capacitance. Notably, since the poles at $E$ and $A$ are close to the origin, the phase approaches $-180^{\\circ}$ well before the third pole, suggesting that the phase margin may be near zero even before the third pole contributes significantly to the phase shift.\n\nWe now turn our attention to the frequency compensation of two-stage op amps. In Fig. 10.26, one of the dominant poles must be shifted towards the origin to ensure the gain crossover occurs well below the phase crossover. However, as discussed in Sec. 10.4, the unity-gain bandwidth after compensation cannot exceed the frequency of the second pole of the open-loop system for $\\mathrm{PM}>45^{\\circ}$. Therefore, if $\\omega_{p,E}$ is to be reduced in Fig. 10.26, the available bandwidth is limited to approximately $\\omega_{p,A}$, which is a low value. Additionally, the small magnitude of the new dominant pole implies a large compensation capacitor.\n\nFortunately, a more efficient compensation method can be applied to the circuit in Fig. 10.25. By observing that the first stage has a high output impedance, $R_{\\text {out1 }}$, and the second stage provides moderate gain, $A_{v 2}$, a suitable environment for Miller multiplication of capacitors is created. The idea, as shown in Fig. 10.27(b), is to generate a large capacitance at node $E$, equal to $\\left(1+A_{v 2}\\right) C_{C}$, shifting the corresponding pole to $R_{\\text {out } 1}^{-1}\\left[C_{E}+\\left(1+A_{v 2}\\right) C_{C}\\right]^{-1}$, where $C_{E}$ represents the capacitance at node $E$ before $C_{C}$ is added. This approach establishes a low-frequency pole with a moderate capacitor value, conserving significant chip area. This technique is known as \"Miller compensation.\"\n\nMiller compensation not only reduces the required capacitor value but also moves the output pole away from the origin, a phenomenon referred to as \"pole splitting.\" To understand this principle, we simplify the output stage of Fig. 10.25 as in Fig. 10.29, where $R_{S}$ denotes the output resistance of the first stage and $R_{L}=r_{O 9} \\| r_{O 11}$. Based on our analysis in Chapter 6, we recognize that this compensated circuit contains two poles:\n\n$$\n\\begin{align*}\n& \\omega_{p 1}^{\\prime} \\approx \\frac{1}{R_{S}\\left[\\left(1+g_{m 9} R_{L}\\right)\\left(C_{C}+C_{G D 9}\\right)+C_{E}\\right]+R_{L}\\left(C_{C}+C_{G D 9}+C_{L}\\right)}  \\tag{10.24}\\\\\n& \\omega_{p 2}^{\\prime} \\approx \\frac{R_{S}\\left[\\left(1+g_{m 9} R_{L}\\right)\\left(C_{C}+C_{G D 9}\\right)+C_{E}\\right]+R_{L}\\left(C_{C}+C_{G D 9}+C_{L}\\right)}{\\left.R_{S} R_{L}\\left[\\left(C_{C}+C_{G D 9}\\right) C_{E}+\\left(C_{C}+C_{G D 9}\\right) C_{L}+C_{E} C_{L}\\right)\\right]} \\tag{10.25}\n\\end{align*}\n$$\n\nThese expressions are based on the assumption that $\\left|\\omega_{p 1}^{\\prime}\\right| \\ll\\left|\\omega_{p 2}^{\\prime}\\right|$. Before compensation, however, $\\omega_{p 1}$ and $\\omega_{p 2}$ are of the same order of magnitude. For $C_{C}=0$ and relatively large $C_{L}$, we may approximate the magnitude of the output pole as $\\omega_{p 2} \\approx 1 /\\left(R_{L} C_{L}\\right)$.\n\nTo compare the magnitudes of $\\omega_{p 2}^{\\prime}$ before and after compensation, we consider a typical case: $C_{C}+$ $C_{G D 9} \\gg C_{E}$, reducing (10.25) to $\\omega_{p 2}^{\\prime} \\approx g_{m 9} /\\left(C_{E}+C_{L}\\right)$. Noting that typically $C_{E} \\ll C_{L}$, we conclude that Miller compensation increases the magnitude of the output pole by roughly a factor of $g_{m 9} R_{L}$, a relatively large value. Intuitively, this is because at high frequencies, $C_{C}$ provides a low impedance between the gate and drain of $M_{9}$, reducing the resistance seen by $C_{L}$ from $R_{L}$ to roughly $R_{S}\\left\\|g_{m 9}^{-1}\\right\\| R_{L} \\approx$ $g_{m 9}^{-1}\\left[\\right.$ Fig. 10.29(b)]. From another perspective, $C_{C}$ provides feedback around the second stage by sensing the output voltage; as a result, the output resistance falls and the second pole moves to higher frequencies. ${ }^{5}$\n\nIn summary, Miller compensation moves the interstage pole towards the origin and the output pole away from the origin, allowing a much greater bandwidth than that obtained by merely connecting the compensation capacitor from one node to ground. In practice, the choice of the compensation capacitor for proper phase margin requires some iteration because both poles move. The following example provides a rough estimate.\n\n#### Example 10.6\n\nThe two-stage op amp of Fig. 10.25 incorporates Miller compensation to reach a phase margin of $45^{\\circ}$. Estimate the compensation capacitor value.\n\n[^72]\n#### Solution\n\nAfter frequency compensation, the dominant pole moves down to approximately $\\left(g_{m 9} R_{L} C_{C} R_{S}\\right)^{-1}$, where $R_{S}$ denotes the output resistance of the first stage, and the second pole moves up to roughly $g_{m 9} / C_{L}$. For a phase margin of $45^{\\circ}$, the loop gain must drop to unity at the second pole. With a low-frequency loop gain of $\\beta g_{m 1} R_{S} g_{m 9} R_{L}$, we consider the postcompensation plot in Fig. 10.30 (on linear axes) and write\n\n$$\n\\begin{equation*}\n|\\beta H(\\omega)| \\approx \\frac{\\beta g_{m 1} R_{S} g_{m 9} R_{L}}{\\sqrt{1+\\omega^{2} / \\omega_{p 1}^{, 2}}} \\tag{10.26}\n\\end{equation*}\n$$\n\nwhere the effect of $\\omega_{p 2}^{\\prime}$ on the magnitude is neglected. At $\\omega=\\omega_{p 2}^{\\prime}$, the second term under the square root dominates, and\n\n$$\n\\begin{equation*}\n\\frac{\\beta g_{m 1} R_{S} g_{m 9} R_{L}}{\\omega_{p 2}^{\\prime} / \\omega_{p 1}^{\\prime}}=1 \\tag{10.27}\n\\end{equation*}\n$$\n\nSubstituting for the pole frequencies and assuming that $\\beta=1$, we obtain\n\n$$\n\\begin{equation*}\nC_{C}=\\frac{g_{m 1}}{g_{m 9}} C_{L} \\tag{10.28}\n\\end{equation*}\n$$\n\nNote that $g_{m 1}$ and $g_{m 9}$ are the transconductances of the two stages. The reader can prove that, if the effect of $\\omega_{p 2}^{\\prime}$ is included, then $C_{C}=\\left[g_{m 1} /\\left(\\sqrt{2} g_{m 9}\\right)\\right] C_{L}$. Of course, $C_{C}$ must generally be greater than this value so as to establish a higher phase margin, but this estimate serves as a reasonable starting point in the design.\n\nThis result assumes that $\\beta=1$; in practice, most op amps are configured for a closed-loop gain of 2 or higher, thus requiring a smaller $C_{C}$.\n\nOur study of stability and compensation has thus far neglected the effect of zeros of the transfer function. While in cascode topologies, the zeros are far from the origin, in two-stage op amps incorporating Miller compensation, a nearby zero appears in the circuit. Recall from Chapter 6 that the circuit of Fig. 10.29 contains a right-half-plane zero at $\\omega_{z}=g_{m 9} /\\left(C_{C}+C_{G D 9}\\right)$. This is because $C_{C}+C_{G D 9}$ forms a \"feedforward\" signal path from the input to the output. What is the effect of such a zero? The numerator of the transfer function reads $\\left(1-s / \\omega_{z}\\right)$, yielding a phase of $-\\tan ^{-1}\\left(\\omega / \\omega_{z}\\right)$, a negative value because $\\omega_{z}$ is positive. In other words, as with poles in the left half plane, a zero in the right half plane contributes additional negative phase shift, thus moving the phase crossover toward the origin. Furthermore, from Bode approximations, the zero slows down the drop of the magnitude, thereby pushing the gain crossover away from the origin. As a result, the stability degrades considerably.\n\nTo better understand the foregoing discussion, let us construct the Bode plots for a third-order system containing a dominant pole $\\omega_{p 1}$, two nondominant poles $\\omega_{p 2}$ and $\\omega_{p 3}$, and a zero in the right half plane $\\omega_{z}$. For two-stage op amps, typically $\\left|\\omega_{p 1}\\right|<\\left|\\omega_{z}\\right|<\\left|\\omega_{p 2}\\right|$. As shown in Fig. 10.31, the zero introduces significant phase shift while preventing the gain from falling sufficiently.\n"
},
{
    "text": "Our examination of operational amplifiers in Chapter 9 suggests that dual-stage configurations may be necessary to achieve the maximum output voltage swing, particularly in modern low-voltage op amps. Consequently, the stability and compensation mechanisms for these op amps are significant areas of interest.\n\nRefer to the circuit depicted in Fig. 10.25. We can identify three poles in this circuit: one at node $X$ (or $Y$), another at node $E$ (or $F$), and a third at node $A$ (or $B$). Our previous discussions have established that the pole at $X$ occurs at relatively high frequencies. However, the positions of the other two poles are less clear. Node $E$ has a high small-signal resistance, which means that even the capacitances of $M_{3}, M_{5}$, and $M_{9}$ can contribute to a pole that is fairly close to the origin. At node $A$, the small-signal resistance is lower, but the load capacitance $C_{L}$ may be significant. Therefore, we can conclude that the circuit has two dominant poles.\n\nThe circuit shown in Fig. 10.25 is a two-stage operational amplifier. The first stage is a differential amplifier, comprising $M1$ and $M2$ with active loads $M3$ and $M4$. The second stage is a common-source amplifier with $M9$ and $M10$ serving as active loads. The circuit incorporates compensation capacitors $C_L$ to stabilize the amplifier and enhance its frequency response. There are two dominant poles at nodes $E$ and $A$, resulting from the high small-signal resistance and substantial load capacitance.\n\nFigures 10.25 and 10.26 illustrate the magnitude and phase plots for this two-stage op amp. Here, $\\omega_{p, E}$ is considered the more dominant pole, but the exact positions of $\\omega_{p, E}$ and $\\omega_{p, A}$ depend on the design and the load capacitance. It is important to note that, since the poles at $E$ and $A$ are near the origin, the phase approaches $-180^{\\circ}$ well before the third pole. This implies that the phase margin could be almost zero even before the third pole contributes a significant phase shift.\n\nLet us now explore the frequency compensation strategies for two-stage op amps. In Fig. 10.26, one of the dominant poles must be shifted towards the origin to ensure that the gain crossover occurs well below the phase crossover. However, as discussed in Sec. 10.4, the unity-gain bandwidth after compensation cannot exceed the frequency of the second pole of the open-loop system for $\\mathrm{PM}>45^{\\circ}$. Therefore, if the magnitude of $\\omega_{p, E}$ is to be reduced in Fig. 10.26, the available bandwidth is limited to approximately $\\omega_{p, A}$, which is a relatively low value. Additionally, the very small magnitude of the new dominant pole necessitates a large compensation capacitor.\n\nFortunately, a more efficient compensation method can be applied to the circuit in Fig. 10.25. As shown in Fig. 10.27(a), the first stage has a high output impedance, $R_{\\text {out1 }}$, and the second stage provides a moderate gain, $A_{v 2}$, creating an environment conducive to Miller multiplication of capacitors. As depicted in Fig. 10.27(b), the strategy is to create a large capacitance at node $E$, equal to $\\left(1+A_{v 2}\\right) C_{C}$, shifting the corresponding pole to $R_{\\text {out } 1}^{-1}\\left[C_{E}+\\left(1+A_{v 2}\\right) C_{C}\\right]^{-1}$, where $C_{E}$ represents the capacitance at node $E$ before $C_{C}$ is added. This approach allows for the establishment of a low-frequency pole with a moderate capacitor value, saving considerable chip area. This technique is known as \"Miller compensation.\"\n\nMiller compensation not only reduces the required capacitor value but also moves the output pole away from the origin, a phenomenon referred to as \"pole splitting.\" To understand this principle, we simplify the output stage of Fig. 10.25 as shown in Fig. 10.29, where $R_{S}$ denotes the output resistance of the first stage and $R_{L}=r_{O 9} \\| r_{O 11}$. Based on our analysis in Chapter 6, we recognize that this compensated circuit contains two poles:\n\n$$\n\\begin{align*}\n& \\omega_{p 1}^{\\prime} \\approx \\frac{1}{R_{S}\\left[\\left(1+g_{m 9} R_{L}\\right)\\left(C_{C}+C_{G D 9}\\right)+C_{E}\\right]+R_{L}\\left(C_{C}+C_{G D 9}+C_{L}\\right)}  \\tag{10.24}\\\\\n& \\omega_{p 2}^{\\prime} \\approx \\frac{R_{S}\\left[\\left(1+g_{m 9} R_{L}\\right)\\left(C_{C}+C_{G D 9}\\right)+C_{E}\\right]+R_{L}\\left(C_{C}+C_{G D 9}+C_{L}\\right)}{\\left.R_{S} R_{L}\\left[\\left(C_{C}+C_{G D 9}\\right) C_{E}+\\left(C_{C}+C_{G D 9}\\right) C_{L}+C_{E} C_{L}\\right)\\right]} \\tag{10.25}\n\\end{align*}\n$$\n\nThese expressions are based on the assumption that $\\left|\\omega_{p 1}^{\\prime}\\right| \\ll\\left|\\omega_{p 2}^{\\prime}\\right|$. Before compensation, however, $\\omega_{p 1}$ and $\\omega_{p 2}$ are of the same order of magnitude. For $C_{C}=0$ and relatively large $C_{L}$, we may approximate the magnitude of the output pole as $\\omega_{p 2} \\approx 1 /\\left(R_{L} C_{L}\\right)$.\n\nTo compare the magnitudes of $\\omega_{p 2}^{\\prime}$ before and after compensation, we consider a typical case: $C_{C}+$ $C_{G D 9} \\gg C_{E}$, reducing (10.25) to $\\omega_{p 2}^{\\prime} \\approx g_{m 9} /\\left(C_{E}+C_{L}\\right)$. Noting that typically $C_{E} \\ll C_{L}$, we conclude that Miller compensation increases the magnitude of the output pole by roughly a factor of $g_{m 9} R_{L}$, a relatively large value. Intuitively, this is because at high frequencies, $C_{C}$ provides a low impedance between the gate and drain of $M_{9}$, reducing the resistance seen by $C_{L}$ from $R_{L}$ to roughly $R_{S}\\left\\|g_{m 9}^{-1}\\right\\| R_{L} \\approx$ $g_{m 9}^{-1}\\left[\\right.$ Fig. 10.29(b)]. From another perspective, $C_{C}$ provides feedback around the second stage by sensing the output voltage; as a result, the output resistance falls and the second pole moves to higher frequencies. ${ }^{5}$\n\nIn summary, Miller compensation moves the interstage pole towards the origin and the output pole away from the origin, allowing a much greater bandwidth than that obtained by merely connecting the compensation capacitor from one node to ground. In practice, the choice of the compensation capacitor for proper phase margin requires some iteration because both poles move. The following example gives a rough estimate.\n\n#### Example 10.6\n\nThe two-stage op amp of Fig. 10.25 incorporates Miller compensation to reach a phase margin of $45^{\\circ}$. Estimate the compensation capacitor value.\n\n[^72]\n#### Solution\n\nAfter frequency compensation, the dominant pole moves down to approximately $\\left(g_{m 9} R_{L} C_{C} R_{S}\\right)^{-1}$, where $R_{S}$ denotes the output resistance of the first stage, and the second pole moves up to roughly $g_{m 9} / C_{L}$. For a phase margin of $45^{\\circ}$, the loop gain must drop to unity at the second pole. With a low-frequency loop gain of $\\beta g_{m 1} R_{S} g_{m 9} R_{L}$, we consider the postcompensation plot in Fig. 10.30 (on linear axes) and write\n\n$$\n\\begin{equation*}\n|\\beta H(\\omega)| \\approx \\frac{\\beta g_{m 1} R_{S} g_{m 9} R_{L}}{\\sqrt{1+\\omega^{2} / \\omega_{p 1}^{, 2}}} \\tag{10.26}\n\\end{equation*}\n$$\n\nwhere the effect of $\\omega_{p 2}^{\\prime}$ on the magnitude is neglected. At $\\omega=\\omega_{p 2}^{\\prime}$, the second term under the square root dominates, and\n\n$$\n\\begin{equation*}\n\\frac{\\beta g_{m 1} R_{S} g_{m 9} R_{L}}{\\omega_{p 2}^{\\prime} / \\omega_{p 1}^{\\prime}}=1 \\tag{10.27}\n\\end{equation*}\n$$\n\nSubstituting for the pole frequencies and assuming that $\\beta=1$, we obtain\n\n$$\n\\begin{equation*}\nC_{C}=\\frac{g_{m 1}}{g_{m 9}} C_{L} \\tag{10.28}\n\\end{equation*}\n$$\n\nNote that $g_{m 1}$ and $g_{m 9}$ are the transconductances of the two stages. The reader can prove that, if the effect of $\\omega_{p 2}^{\\prime}$ is included, then $C_{C}=\\left[g_{m 1} /\\left(\\sqrt{2} g_{m 9}\\right)\\right] C_{L}$. Of course, $C_{C}$ must generally be greater than this value so as to establish a higher phase margin, but this estimate serves as a reasonable starting point in the design.\n\nThis result assumes that $\\beta=1$; in practice, most op amps are configured for a closed-loop gain of 2 or higher, thus requiring a smaller $C_{C}$.\n\nOur study of stability and compensation has thus far neglected the effect of zeros of the transfer function. While in cascode topologies, the zeros are far from the origin, in two-stage op amps incorporating Miller compensation, a nearby zero appears in the circuit. Recall from Chapter 6 that the circuit of Fig. 10.29 contains a right-half-plane zero at $\\omega_{z}=g_{m 9} /\\left(C_{C}+C_{G D 9}\\right)$. This is because $C_{C}+C_{G D 9}$ forms a \"feedforward\" signal path from the input to the output. What is the effect of such a zero? The numerator of the transfer function reads $\\left(1-s / \\omega_{z}\\right)$, yielding a phase of $-\\tan ^{-1}\\left(\\omega / \\omega_{z}\\right)$, a negative value because $\\omega_{z}$ is positive. In other words, as with poles in the left half plane, a zero in the right half plane contributes additional negative phase shift, thus moving the phase crossover toward the origin. Furthermore, from Bode approximations, the zero slows down the drop of the magnitude, thereby pushing the gain crossover away from the origin. As a result, the stability degrades considerably.\n\nTo better understand the foregoing discussion, let us construct the Bode plots for a third-order system containing a dominant pole $\\omega_{p 1}$, two nondominant poles $\\omega_{p 2}$ and $\\omega_{p 3}$, and a zero in the right half plane $\\omega_{z}$. For two-stage op amps, typically $\\left|\\omega_{p 1}\\right|<\\left|\\omega_{z}\\right|<\\left|\\omega_{p 2}\\right|$. As shown in Fig. 10.31, the zero introduces significant phase shift while preventing the gain from falling sufficiently.\nimage_name:Figure 10.31 Effect of right-half-plane zero\ndescription:The graph in Figure 10.31 is a Bode plot, which consists of two plots: one for magnitude and one for phase, both plotted against frequency on a logarithmic scale.\n\nMagnitude Plot:\n- **Type:** Logarithmic plot of magnitude.\n- **Y-Axis:** Represents the magnitude in decibels (dB), specifically \\(20\\log|\\beta H(\\omega)|\\).\n- **X-Axis:** Represents frequency \\(\\omega\\) on a logarithmic scale.\n- **Behavior:**\n- The plot starts at a constant level, indicating a flat gain at low frequencies.\n- As the frequency increases, the first pole \\(\\omega_{p1}\\) causes the magnitude to begin decreasing at a rate of -20 dB/decade.\n- The presence of the zero \\(\\omega_{z}\\) temporarily flattens the slope, reducing the rate of decrease.\n- After the zero, the second pole \\(\\omega_{p2}\\) and third pole \\(\\omega_{p3}\\) cause further decreases in the magnitude, each contributing an additional -20 dB/decade, resulting in a steeper slope.\n\nPhase Plot:\n- **Type:** Logarithmic plot of phase.\n- **Y-Axis:** Represents the phase in degrees.\n- **X-Axis:** Represents frequency \\(\\omega\\) on a logarithmic scale.\n- **Behavior:**\n- The phase starts at 0 degrees and begins to decrease as frequency increases.\n- The first pole \\(\\omega_{p1}\\) causes the phase to drop towards -90 degrees.\n- The right-half-plane zero \\(\\omega_{z}\\) introduces a positive phase shift, which is atypical as it causes the phase to initially increase slightly before continuing to decrease.\n- The subsequent poles \\(\\omega_{p2}\\) and \\(\\omega_{p3}\\) cause further phase decreases, moving the phase closer to -270 degrees.\n\nKey Features:\n- The graph clearly illustrates the effect of a right-half-plane zero, which notably alters the phase response and reduces the rate of magnitude decrease temporarily.\n- Critical points like \\(\\omega_{p1}\\), \\(\\omega_{z}\\), \\(\\omega_{p2}\\), and \\(\\omega_{p3}\\) are marked, showing their impact on the system's frequency response.\n\n#### Example 10.7\n\nNoting that the Miller compensation in Fig. 10.29(a) yields $\\omega_{p 2} \\approx g_{m 9} / C_{L}$ and $\\omega_{z} \\approx g_{m 9} / C_{C}$, a student decides to choose $C_{C}=C_{L}$, aiming to cancel the second pole by the zero. Explain what happens.\n\n#### Solution\n\nRecall that the zero is located in the right half plane and the poles in the left half plane. The compensated loop transmission can therefore be expressed as\n\n$$\n\\begin{equation*}\n\\beta H(s)=\\frac{\\beta A_{0}\\left(1-\\frac{s}{\\omega_{z}}\\right)}{\\left(1+\\frac{s}{\\omega_{p 1}}\\right)\\left(1+\\frac{s}{\\omega_{p 2}}\\right)} \\tag{10.29}\n\\end{equation*}\n$$\n\nWe recognize that the zero does not cancel the pole and still affects $|\\beta H|$ and $\\angle \\beta H$.\n\nThe right-half-plane zero in two-stage CMOS op amps, given by $g_{m} /\\left(C_{C}+C_{G D}\\right)$, is a serious issue because $g_{m}$ is relatively small and $C_{C}$ is chosen large enough to position the dominant pole properly. Various techniques for eliminating or moving the zero have been invented. Illustrated in Fig. 10.32, places a resistor in series with the compensation capacitor, thereby modifying the zero frequency. The output stage now exhibits three poles, but for moderate values of $R_{z}$, the third pole is located at high frequencies and the first two poles are close to the values calculated with $R_{z}=0$. Moreover, it can be\nimage_name:Figure 10.32 Addition of $R_{z}$ to move the right-half-plane zero.\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: g9}\nname: CE, type: Capacitor, value: CE, ports: {Np: VDD, Nn: g9}\nname: M9, type: PMOS, ports: {S: VDD, D: Vout, G: g9}\nname: RZ, type: Resistor, value: Rz, ports: {N1: g9, N2: r_c}\nname: CC, type: Capacitor, value: CC, ports: {Np: r_c, Nn: Vout}\nname: RL, type: Resistor, value: RL, ports: {N1: Vout, Nn: GND}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit diagram 'Figure 10.32' includes a PMOS transistor M9 with a compensation capacitor CC and a resistor RZ added to move the zero frequency. The output stage exhibits three poles with the addition of RZ.\n\nshown (Problem 10.8) that the zero frequency is given by\n\n$$\n\\begin{equation*}\n\\omega_{z} \\approx \\frac{1}{C_{C}\\left(g_{m 9}^{-1}-R_{z}\\right)} \\tag{10.30}\n\\end{equation*}\n$$\n\nThus, if $R_{z} \\geq g_{m 9}^{-1}$, then $\\omega_{z} \\leq 0$. While $R_{z}=g_{m 9}^{-1}$ seems a natural choice, in practice we may even move the zero well into the left half plane so as to cancel the first nond"
},
{
    "text": "The analysis in Chapter 9 suggests that two-stage topologies may be necessary for maximizing output voltage swing, particularly in modern low-voltage op amps. Consequently, the stability and compensation mechanisms for these op amps are significant areas of interest.\n\nExamine the circuit depicted in Fig. 10.25. It features three poles: one at $X$ (or $Y$), another at $E$ (or $F$), and a third at $A$ (or $B$). We understand from previous discussions that the pole at $X$ is situated at relatively high frequencies. However, the positions of the other two poles are less clear. Given the high small-signal resistance at node $E$, the capacitances of $M_{3}, M_{5}$, and $M_{9}$ can create a pole near the origin. At node $A$, the small-signal resistance is lower, but $C_{L}$ may be significant. Thus, the circuit is characterized by two dominant poles.\n\nThe circuit in Fig. 10.25 is a two-stage operational amplifier. The first stage is a differential amplifier, formed by M1 and M2, with active loads M3 and M4. The second stage is a common-source amplifier with M9 and M10 as active loads. Compensation capacitors CL are included to stabilize the amplifier and enhance the frequency response. There are two dominant poles at nodes E and A due to the high small-signal resistance and large load capacitance.\n\nBased on these observations, we can generate the magnitude and phase plots shown in Fig. 10.26. Here, $\\omega_{p, E}$ is considered the more dominant pole, but the relative positions of $\\omega_{p, E}$ and $\\omega_{p, A}$ depend on the design and the load capacitance. It's important to note that since the poles at $E$ and $A$ are close to the origin, the phase approaches $-180^{\\circ}$ well before the third pole. This suggests that the phase margin may be nearly zero even before the third pole contributes significantly to the phase shift.\n\nNow, let's explore the frequency compensation of two-stage op amps. In Fig. 10.26, one of the dominant poles must be shifted towards the origin to ensure the gain crossover occurs well below the phase crossover. However, it's crucial to remember from Sec. 10.4 that the unity-gain bandwidth after compensation cannot exceed the frequency of the second pole of the open-loop system for $\\mathrm{PM}>45^{\\circ}$. Therefore, if the magnitude of $\\omega_{p, E}$ is to be reduced in Fig. 10.26, the available bandwidth is limited to approximately $\\omega_{p, A}$, which is a low value. Moreover, the small magnitude of the new dominant pole necessitates a large compensation capacitor.\n\nFortunately, a more efficient compensation method can be applied to the circuit in Fig. 10.25. This method leverages the high output impedance of the first stage, $R_{\\text {out1 }}$, and the moderate gain of the second stage, $A_{v 2}$, to facilitate Miller multiplication of capacitors. The idea, as shown in Fig. 10.27(b), is to create a large capacitance at node $E$, equal to $\\left(1+A_{v 2}\\right) C_{C}$, moving the corresponding pole to $R_{\\text {out } 1}^{-1}\\left[C_{E}+\\left(1+A_{v 2}\\right) C_{C}\\right]^{-1}$, where $C_{E}$ denotes the capacitance at node $E$ before $C_{C}$ is added. This allows for the establishment of a low-frequency pole with a moderate capacitor value, saving considerable chip area. This technique is known as \"Miller compensation.\"\n\nMiller compensation not only reduces the required capacitor value but also moves the output pole away from the origin, a phenomenon referred to as \"pole splitting.\" To understand this principle, we simplify the output stage of Fig. 10.25 as in Fig. 10.29, where $R_{S}$ denotes the output resistance of the first stage and $R_{L}=r_{O 9} \\| r_{O 11}$. From our analysis in Chapter 6, we note that this compensated circuit contains two poles:\n\n$$\n\\begin{align*}\n& \\omega_{p 1}^{\\prime} \\approx \\frac{1}{R_{S}\\left[\\left(1+g_{m 9} R_{L}\\right)\\left(C_{C}+C_{G D 9}\\right)+C_{E}\\right]+R_{L}\\left(C_{C}+C_{G D 9}+C_{L}\\right)}  \\tag{10.24}\\\\\n& \\omega_{p 2}^{\\prime} \\approx \\frac{R_{S}\\left[\\left(1+g_{m 9} R_{L}\\right)\\left(C_{C}+C_{G D 9}\\right)+C_{E}\\right]+R_{L}\\left(C_{C}+C_{G D 9}+C_{L}\\right)}{\\left.R_{S} R_{L}\\left[\\left(C_{C}+C_{G D 9}\\right) C_{E}+\\left(C_{C}+C_{G D 9}\\right) C_{L}+C_{E} C_{L}\\right)\\right]} \\tag{10.25}\n\\end{align*}\n$$\n\nThese expressions are based on the assumption that $\\left|\\omega_{p 1}^{\\prime}\\right| \\ll\\left|\\omega_{p 2}^{\\prime}\\right|$. Before compensation, however, $\\omega_{p 1}$ and $\\omega_{p 2}$ are of the same order of magnitude. For $C_{C}=0$ and relatively large $C_{L}$, we may approximate the magnitude of the output pole as $\\omega_{p 2} \\approx 1 /\\left(R_{L} C_{L}\\right)$.\n\nTo compare the magnitudes of $\\omega_{p 2}^{\\prime}$ before and after compensation, we consider a typical case: $C_{C}+$ $C_{G D 9} \\gg C_{E}$, reducing (10.25) to $\\omega_{p 2}^{\\prime} \\approx g_{m 9} /\\left(C_{E}+C_{L}\\right)$. Noting that typically $C_{E} \\ll C_{L}$, we conclude that Miller compensation increases the magnitude of the output pole by roughly a factor of $g_{m 9} R_{L}$, a relatively large value. Intuitively, this is because at high frequencies, $C_{C}$ provides a low impedance between the gate and drain of $M_{9}$, reducing the resistance seen by $C_{L}$ from $R_{L}$ to roughly $R_{S}\\left\\|g_{m 9}^{-1}\\right\\| R_{L} \\approx$ $g_{m 9}^{-1}\\left[\\right.$ Fig. 10.29(b)]. From another perspective, $C_{C}$ provides feedback around the second stage by sensing the output voltage; as a result, the output resistance falls and the second pole moves to higher frequencies. ${ }^{5}$\n\nIn summary, Miller compensation moves the interstage pole towards the origin and the output pole away from the origin, allowing for a much greater bandwidth than that obtained by simply connecting the compensation capacitor from one node to ground. In practice, the choice of the compensation capacitor for proper phase margin requires some iteration because both poles move. The following example provides a rough estimate.\n\n#### Example 10.6\n\nThe two-stage op amp of Fig. 10.25 incorporates Miller compensation to reach a phase margin of $45^{\\circ}$. Estimate the compensation capacitor value.\n\n[^72]\n#### Solution\n\nAfter frequency compensation, the dominant pole moves down to approximately $\\left(g_{m 9} R_{L} C_{C} R_{S}\\right)^{-1}$, where $R_{S}$ denotes the output resistance of the first stage, and the second pole moves up to roughly $g_{m 9} / C_{L}$. For a phase margin of $45^{\\circ}$, the loop gain must drop to unity at the second pole. With a low-frequency loop gain of $\\beta g_{m 1} R_{S} g_{m 9} R_{L}$, we consider the postcompensation plot in Fig. 10.30 (on linear axes) and write\n\n$$\n\\begin{equation*}\n|\\beta H(\\omega)| \\approx \\frac{\\beta g_{m 1} R_{S} g_{m 9} R_{L}}{\\sqrt{1+\\omega^{2} / \\omega_{p 1}^{, 2}}} \\tag{10.26}\n\\end{equation*}\n$$\n\nwhere the effect of $\\omega_{p 2}^{\\prime}$ on the magnitude is neglected. At $\\omega=\\omega_{p 2}^{\\prime}$, the second term under the square root dominates, and\n\n$$\n\\begin{equation*}\n\\frac{\\beta g_{m 1} R_{S} g_{m 9} R_{L}}{\\omega_{p 2}^{\\prime} / \\omega_{p 1}^{\\prime}}=1 \\tag{10.27}\n\\end{equation*}\n$$\n\nSubstituting for the pole frequencies and assuming that $\\beta=1$, we obtain\n\n$$\n\\begin{equation*}\nC_{C}=\\frac{g_{m 1}}{g_{m 9}} C_{L} \\tag{10.28}\n\\end{equation*}\n$$\n\nNote that $g_{m 1}$ and $g_{m 9}$ are the transconductances of the two stages. The reader can prove that, if the effect of $\\omega_{p 2}^{\\prime}$ is included, then $C_{C}=\\left[g_{m 1} /\\left(\\sqrt{2} g_{m 9}\\right)\\right] C_{L}$. Of course, $C_{C}$ must generally be greater than this value so as to establish a higher phase margin, but this estimate serves as a reasonable starting point in the design.\n\nThis result assumes that $\\beta=1$; in practice, most op amps are configured for a closed-loop gain of 2 or higher, thus requiring a smaller $C_{C}$.\n\nOur study of stability and compensation has thus far neglected the effect of zeros of the transfer function. While in cascode topologies, the zeros are far from the origin, in two-stage op amps incorporating Miller compensation, a nearby zero appears in the circuit. Recall from Chapter 6 that the circuit of Fig. 10.29 contains a right-half-plane zero at $\\omega_{z}=g_{m 9} /\\left(C_{C}+C_{G D 9}\\right)$. This is because $C_{C}+C_{G D 9}$ forms a \"feedforward\" signal path from the input to the output. What is the effect of such a zero? The numerator of the transfer function reads $\\left(1-s / \\omega_{z}\\right)$, yielding a phase of $-\\tan ^{-1}\\left(\\omega / \\omega_{z}\\right)$, a negative value because $\\omega_{z}$ is positive. In other words, as with poles in the left half plane, a zero in the right half plane contributes additional negative phase shift, thus moving the phase crossover towards the origin. Furthermore, from Bode approximations, the zero slows down the drop of the magnitude, thereby pushing the gain crossover away from the origin. As a result, the stability degrades considerably.\n\nTo better understand the foregoing discussion, let us construct the Bode plots for a third-order system containing a dominant pole $\\omega_{p 1}$, two nondominant poles $\\omega_{p 2}$ and $\\omega_{p 3}$, and a zero in the right half plane $\\omega_{z}$. For two-stage op amps, typically $\\left|\\omega_{p 1}\\right|<\\left|\\omega_{z}\\right|<\\left|\\omega_{p 2}\\right|$. As shown in Fig. 10.31, the zero introduces significant phase shift while preventing the gain from falling sufficiently.\nimage_name:Figure 10.31 Effect of right-half-plane zero\ndescription:The graph in Figure 10.31 is a Bode plot, which consists of two plots: one for magnitude and one for phase, both plotted against frequency on a logarithmic scale.\n\nMagnitude Plot:\n- **Type:** Logarithmic plot of magnitude.\n- **Y-Axis:** Represents the magnitude in decibels (dB), specifically \\(20\\log|\\beta H(\\omega)|\\).\n- **X-Axis:** Represents frequency \\(\\omega\\) on a logarithmic scale.\n- **Behavior:**\n- The plot starts at a constant level, indicating a flat gain at low frequencies.\n- As the frequency increases, the first pole \\(\\omega_{p1}\\) causes the magnitude to begin decreasing at a rate of -20 dB/decade.\n- The presence of the zero \\(\\omega_{z}\\) temporarily flattens the slope, reducing the rate of decrease.\n- After the zero, the second pole \\(\\omega_{p2}\\) and third pole \\(\\omega_{p3}\\) cause further decreases in the magnitude, each contributing an additional -20 dB/decade, resulting in a steeper slope.\n\nPhase Plot:\n- **Type:** Logarithmic plot of phase.\n- **Y-Axis:** Represents the phase in degrees.\n- **X-Axis:** Represents frequency \\(\\omega\\) on a logarithmic scale.\n- **Behavior:**\n- The phase starts at 0 degrees and begins to decrease as frequency increases.\n- The first pole \\(\\omega_{p1}\\) causes the phase to drop towards -90 degrees.\n- The right-half-plane zero \\(\\omega_{z}\\) introduces a positive phase shift, which is atypical as it causes the phase to initially increase slightly before continuing to decrease.\n- The subsequent poles \\(\\omega_{p2}\\) and \\(\\omega_{p3}\\) cause further phase decreases, moving the phase closer to -270 degrees.\n\nKey Features:\n- The graph clearly illustrates the effect of a right-half-plane zero, which notably alters the phase response and reduces the rate of magnitude decrease temporarily.\n- Critical points like \\(\\omega_{p1}\\), \\(\\omega_{z}\\), \\(\\omega_{p2}\\), and \\(\\omega_{p3}\\) are marked, showing their impact on the system's frequency response.\n\n#### Example 10.7\n\nNoting that the Miller compensation in Fig. 10.29(a) yields $\\omega_{p 2} \\approx g_{m 9} / C_{L}$ and $\\omega_{z} \\approx g_{m 9} / C_{C}$, a student decides to choose $C_{C}=C_{L}$, aiming to cancel the second pole by the zero. Explain what happens.\n\n#### Solution\n\nRecall that the zero is located in the right half plane and the poles in the left half plane. The compensated loop transmission can therefore be expressed as\n\n$$\n\\begin{equation*}\n\\beta H(s)=\\frac{\\beta A_{0}\\left(1-\\frac{s}{\\omega_{z}}\\right)}{\\left(1+\\frac{s}{\\omega_{p 1}}\\right)\\left(1+\\frac{s}{\\omega_{p 2}}\\right)} \\tag{10.29}\n\\end{equation*}\n$$\n\nWe recognize that the zero does not cancel the pole and still affects $|\\beta H|$ and $\\angle \\beta H$.\n\nThe right-half-plane zero in two-stage CMOS op amps, given by $g_{m} /\\left(C_{C}+C_{G D}\\right)$, is a serious issue because $g_{m}$ is relatively small and $C_{C}$ is chosen large enough to position the dominant pole properly. Various techniques for eliminating or moving the zero have been invented. Illustrated in Fig. 10.32, places a resistor in series with the compensation capacitor, thereby modifying the zero frequency. The output stage now exhibits three poles, but for moderate values of $R_{z}$, the third pole is located at high frequencies and the first two poles are close to the values calculated with $R_{z}=0$. Moreover, it can be\nimage_name:Figure 10.32 Addition of $R_{z}$ to move the right-half-plane zero.\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: RS, type: Resistor, value: RS, ports: {N1: Vin, N2: g9}\nname: CE, type: Capacitor, value: CE, ports: {Np: VDD, Nn: g9}\nname: M9, type: PMOS, ports: {S: VDD, D: Vout, G: g9}\nname: RZ, type: Resistor, value: Rz, ports: {N1: g9, N2: r_c}\nname: CC, type: Capacitor, value: CC, ports: {Np: r_c, Nn: Vout}\nname: RL, type: Resistor, value: RL, ports: {N1: Vout, Nn: GND}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit diagram 'Figure 10.32' includes a PMOS transistor M9 with a compensation capacitor CC and a resistor RZ added to move the zero frequency. The output stage exhibits three poles with the addition of RZ.\n\nshown (Problem 10.8) that the zero frequency is given by\n\n$$\n\\begin{equation*}\n\\omega_{z} \\approx \\frac{1}{C_{C}\\left(g_{m 9}^{-1}-R_{z}\\right)} \\tag{10.30}\n\\end{equation*}\n$$\n\nThus, if $R_{z} \\geq g_{m 9}^{-1}$, then $\\omega_{z} \\leq 0$. While $R_{z}=g_{m 9}^{-1}$ seems a natural choice, in practice we may even move the zero well into the left half plane so as to cancel the first nondominant pole. This occurs if\n\n$$\n\\begin{equation*}\n\\frac{1}{C_{C}\\left(g_{m 9}^{-1}-R_{z}\\right)}=\\frac{-g_{m 9}}{C_{L}+"
},
{
    "text": "To analyze the slewing characteristics of two-stage operational amplifiers, it's instructive to first examine the simple circuit in Fig. 10.37(a). Here, $I_{i n}$ is a current step expressed as $I_{S S} u(t)$, and $C_{F}$ starts with a zero initial condition. Assuming $A$ is large, node $X$ behaves as a virtual ground, making the voltage across $C_{F}$ approximately equal to $V_{o u t}$. With a constant current of $I_{S S}$, $C_{F}$ produces an output voltage given by\n\n$$\n\\begin{equation*}\nV_{\\text {out }}(t) \\approx \\frac{I_{S S}}{C_{F}} t \\tag{10.36}\n\\end{equation*}\n$$\n\nFig. 10.37(a) depicts a simple integrator circuit featuring an op-amp, capacitor CF, and current source Iin, with node X serving as a virtual ground due to the op-amp's high gain.\n\nIn Fig. 10.37(b), the circuit represents an integrator that uses an op-amp, capacitor CF, and NMOS transistor Mout, with the output voltage Vout determined by the integration of the input current over time, and the NMOS providing additional current control. The output waveform during slewing is shown in Fig. 10.37(c), demonstrating a linear increase in Vout over time.\n\nThe graph in Fig. 10.37(c) is a time-domain waveform that shows the output voltage \\( V_{out}(t) \\) of a circuit during the slewing phase, illustrating the relationship between output voltage and time, with time typically in seconds and voltage in volts. The graph exhibits a linear increase in output voltage over time, starting from a negative value and indicating a constant rate of change influenced by circuit parameters.\n\nIn Fig. 10.37(b), we analyze the circuit and derive the equation $V_{\\text {out }} / r_{O}+g_{m} V_{X}+I_{\\text {in }}=I_{1}$ and $C_{F} d\\left(V_{\\text {out }}-V_{X}\\right) / d t=I_{i n}$. Substituting for $V_{X}$, we obtain\n\n$$\n\\begin{equation*}\nC_{F}\\left(1+\\frac{1}{g_{m} r_{O}}\\right) \\frac{d V_{\\text {out }}}{d t}=I_{\\text {in }}-\\frac{C_{F}}{g_{m}} \\frac{d I_{\\text {in }}}{d t} \\tag{10.37}\n\\end{equation*}\n$$\n\nApplying superposition, we find\n\n$$\n\\begin{equation*}\nV_{\\text {out }}(t)=\\frac{I_{S S}}{C_{F}\\left(1+\\frac{1}{g_{m} r_{O}}\\right)} t u(t)-\\frac{I_{S S}}{g_{m}+\\frac{1}{r_{O}}} u(t) \\tag{10.38}\n\\end{equation*}\n$$\n\nThe output voltage $V_{\\text {out }}$ initially jumps to $-I_{S S} /\\left(g_{m}+r_{O}^{-1}\\right)$ and then ramps up with a slope of $I_{S S} /\\left[C_{F}\\left(1+g_{m}^{-1} r_{O}^{-1}\\right)\\right]$. The behavior of $C_{F}$, the Miller effect, and the independence of the equation from $I_{1}$ due to its role as the bias current of $M_{\\text {out }}$ are noteworthy aspects of this circuit.\n\nConsidering a two-stage op amp with a large positive step in $V_{i n}$ at $t=0$, which turns off $M_{2}, M_{4}$, and $M_{3}$, the circuit simplifies to that in Fig. 10.38(b). Here, $C_{C}$ is charged by a constant current $I_{S S}$, and the output voltage $V_{\\text {out }}(t)$ is approximately $\\left(I_{S S} t / C_{C}\\right) u(t)$. The positive slew rate equals $I_{S S} / C_{C}$, and during slewing, $M_{5}$ must supply both $I_{S S}$ and $I_{1}$.\n\nFor negative slew rate analysis, we simplify the circuit as shown in Fig. 10.38(c). Here, $I_{1}$ must support both $I_{S S}$ and $I_{D 5}$. If $I_{1}=I_{S S}$, then $V_{X}$ rises, turning off $M_{5}$. If $I_{1}<I_{S S}$, $M_{3}$ enters the triode region, and the slew rate is given by $I_{D 3} / C_{C}$.\n\nIn the case of a load capacitance $C_{L}$ in the circuit of Fig. 10.37(b), we consider two cases where $I_{i n}$ flows into or out of node $X$. If $M_{\\text {out }}$ remains in saturation, the output slew rate is approximately equal to $I_{S S} / C_{F}$. However, if $I_{1}<$ $\\left(1+C_{L} / C_{F}\\right) I_{S S}$, $M_{\\text {out }}$ turns off, and the slew rate is given by $\\left(I_{1}-I_{S S}\\right) / C_{L}$, which is a lower value.\n\nTwo-stage class-AB op amps can also incorporate Miller compensation, but due to the additional pole from current mirrors in the signal path, they are usually slower than class-A op amps. For class-AB op amps, the slew rate is given by $\\left[\\alpha\\left(W_{p 1} / W_{p 2}\\right)-1\\right] I_{S S} / C_{L}$, where $I_{1}$ can be quite large due to class-AB operation."
},
{
    "text": "Analyzing the slewing properties of two-stage operational amplifiers is an instructive exercise. To begin, we examine the basic circuit depicted in Fig. 10.37(a), where a current step $I_{i n}$, defined as $I_{S S} u(t)$, is applied to a capacitor $C_{F}$ with zero initial voltage. When the gain $A$ is high, node $X$ behaves as a virtual ground, and the voltage across $C_{F}$ is nearly equal to the output voltage $V_{o u t}$. With a steady current of $I_{S S}$, $C_{F}$ produces an output voltage that can be expressed as:\n\n$$\nV_{\\text {out }}(t) \\approx \\frac{I_{S S}}{C_{F}} t\n$$\n\nThe circuits in Figs. 10.37(b) and 10.37(c) represent an integrator circuit implementation with an op-amp, capacitor $C_{F}$, and current source $I_{i n}$, where the output voltage $V_{o u t}$ is determined by the integration of the input current over time, and the NMOS transistor provides additional current regulation. The waveform in Fig. 10.37(c) displays the slewing phase, showing a linear increase in $V_{o u t}$ with time.\n\nIn the circuit of Fig. 10.37(b), the output voltage $V_{\\text {out }}$ initially jumps to a value of $-I_{S S} /\\left(g_{m}+r_{O}^{-1}\\right)$ and then ramps up with a slope of $I_{S S} /\\left[C_{F}\\left(1+g_{m}^{-1} r_{O}^{-1}\\right)\\right]$. The output voltage can be approximated as $V_{\\text {out }}(t) \\approx\\left(I_{S S} / C_{F}\\right) t u(t)$.\n\nFor a two-stage op amp, if $V_{i n}$ undergoes a large positive step at $t=0$, turning off $M_{2}, M_{4}$, and $M_{3}$, the circuit simplifies to that in Fig. 10.38(b), where $C_{C}$ is charged by a constant current $I_{S S}$ if parasitic capacitances at node $X$ are negligible. With node $X$ as a virtual ground due to the op-amp's high gain, the output voltage is $V_{\\text {out }}(t) \\approx$ $\\left(I_{S S} t / C_{C}\\right) u(t)$. Thus, the positive slew rate equals $I_{S S} / C_{C}$.\n\nIn the negative slew rate scenario, the circuit simplifies to that in Fig. 10.38(c), where $I_{1}$ must supply both $I_{S S}$ and $I_{D 5}$. The slew rate is given by $I_{D 3} / C_{C}$ if $M_{3}$ enters the triode region.\n\nWhen analyzing the circuit with a load capacitance $C_{L}$, we consider two cases: $I_{i n}$ flowing into or out of node $X$. If $M_{\\text {out }}$ stays in saturation, the output slew rate is approximately $I_{S S} / C_{F}$. If $M_{\\text {out }}$ turns off, the slew rate is $\\left(I_{1}-I_{S S}\\right) / C_{L}$, which is typically lower.\n\nFor two-stage class-AB op amps, the slew rate can be computed as $\\left[\\alpha\\left(W_{p 1} / W_{p 2}\\right)-1\\right] I_{S S} / C_{L}$, where $I_{1}$ can be quite large due to class-AB operation."
},
{
    "text": "Analyzing the slewing attributes of two-stage operational amplifiers is educational. Initially, we'll examine the straightforward circuit depicted in Fig. 10.37(a), where $I_{i n}$ represents a current step expressed as $I_{S S} u(t)$, and $C_{F}$ is initialized at zero. Assuming $A$ is high, node $X$ behaves as a virtual ground, with the voltage across $C_{F}$ closely resembling $V_{o u t}$. With a constant current equivalent to $I_{S S}$ flowing through it, $C_{F}$ yields an output voltage expressed as:\n\n$$\n\\begin{equation*}\nV_{\\text {out }}(t) \\approx \\frac{I_{S S}}{C_{F}} t \\tag{10.36}\n\\end{equation*}\n$$\n\nThe provided text includes descriptions of three circuits and their respective waveforms. The first circuit, an integrator with an op-amp, capacitor CF, and current source Iin, demonstrates a virtual ground at node X due to the op-amp's high gain. The second circuit, an integrator using an op-amp, capacitor CF, and NMOS transistor Mout, shows how the output voltage Vout is the result of integrating the input current over time, with the NMOS transistor offering additional current regulation. The third, a waveform in Fig. 10.37(c), exhibits a linear increase in Vout with time, reflecting the slewing phase.\n\nThe analysis proceeds with the implementation in Fig. 10.37(b), where equations are derived to represent the voltage at the output. By applying superposition, an expression for $V_{\\text {out }}(t)$ is obtained, highlighting the influence of the current $I_{S S}$, the capacitance $C_{F}$, and the transconductance $g_{m}$ and output resistance $r_{O}$.\n\nAttention is then shifted to a two-stage op amp, considering the effect of a large positive step in $V_{i n}$ at $t=0$. The resulting circuit simplification leads to the conclusion that the positive slew rate equals $I_{S S} / C_{C}$, assuming parasitic capacitances at node X are negligible.\n\nFurther exploration into the negative slew rate involves simplifying the circuit as shown in Fig. 10.38(c), where the output slew rate is determined by the current capabilities of the transistors and the load capacitance.\n\nThe discussion extends to consider the impact of a load capacitance $C_{L}$ on the circuit of Fig. 10.37(b), with two cases analyzed: $I_{i n}$ flowing into or out of node $X$. The analysis concludes that the output slew rate is approximately equal to $I_{S S} / C_{F}$, depending on the transistor's ability to sustain the required currents.\n\nFinally, the application of Miller compensation in two-stage class-AB op amps is considered, noting that due to additional poles from current mirrors in the signal path, these op amps are usually slower than class-A types. The computation of the slew rate for class-AB op amps is presented, factoring in the class-AB operation's ability to allow a larger $I_{1}$, thus affecting the overall slew rate."
},
{
    "text": "Understanding the slewing properties of two-stage op amps is an informative exercise. Initially, let's examine the straightforward circuit depicted in Fig. 10.37(a), where $I_{i n}$ represents a current step defined by $I_{S S} u(t)$, and $C_{F}$ starts with zero initial conditions. Assuming $A$ is significant, node $X$ behaves as a virtual ground, and the voltage across $C_{F}$ is roughly equivalent to $V_{o u t}$. With a steady current equal to $I_{S S}$, $C_{F}$ produces an output voltage expressed as\n\n$$\n\\begin{equation*}\nV_{\\text {out }}(t) \\approx \\frac{I_{S S}}{C_{F}} t \\tag{10.36}\n\\end{equation*}\n$$\n\n[Figures and descriptions are omitted for brevity]\n\nThe circuit depicted in Fig. 10.37(b) illustrates an integrator realization featuring an op-amp, capacitor $C_{F}$, and a current source $I_{i n}$. The output voltage $V_{o u t}$ is a result of the input current's integration over time, with an NMOS transistor $M_{o u t}$ offering additional current regulation. The slewing phase's output waveform is depicted in Fig. 10.37(c), showing a linear rise in $V_{o u t}$ with time.\n\nThe graph in Fig. 10.37(c) is a time-domain representation that depicts the circuit's output voltage $V_{o u t}(t)$ during the slewing phase. The graph demonstrates a linear increase in output voltage over time, starting from a negative value and indicating a constant rate of change influenced by the circuit parameters.\n\n[Additional technical details and annotations are omitted for brevity]\n\nUpon examining the circuit in Fig. $10.37(\\mathrm{~b})$, we derive the equation $V_{\\text {out }} / r_{O}+g_{m} V_{X}+I_{\\text {in }}=I_{1}$ and $C_{F} d\\left(V_{\\text {out }}-V_{X}\\right) / d t=I_{i n}$. By substituting $V_{X}$ from the first equation into the second, we obtain\n\n$$\n\\begin{equation*}\nC_{F}\\left(1+\\frac{1}{g_{m} r_{O}}\\right) \\frac{d V_{\\text {out }}}{d t}=I_{\\text {in }}-\\frac{C_{F}}{g_{m}} \\frac{d I_{\\text {in }}}{d t} \\tag{10.37}\n\\end{equation*}\n$$\n\nBy treating the terms on the right-hand side as separate inputs and applying the principle of superposition, we find\n\n$$\n\\begin{equation*}\nV_{\\text {out }}(t)=\\frac{I_{S S}}{C_{F}\\left(1+\\frac{1}{g_{m} r_{O}}\\right)} t u(t)-\\frac{I_{S S}}{g_{m}+\\frac{1}{r_{O}}} u(t) \\tag{10.38}\n\\end{equation*}\n$$\n\nAs depicted in Fig. 10.37(c), $V_{\\text {out }}$ initially leaps to $-I_{S S} /\\left(g_{m}+r_{O}^{-1}\\right)$ and then ramps up with a slope of $I_{S S} /\\left[C_{F}\\left(1+g_{m}^{-1} r_{O}^{-1}\\right)\\right]$. It is noteworthy that (1) at $t=0^{+}$, $C_{F}$ behaves as a short circuit, allowing $I_{i n}$ to pass through $\\left(1 / g_{m}\\right) \\| r_{O}$, causing a downward step at the output; (2) the ramp's slope suggests an equivalent capacitance of $C_{F}\\left(1+g_{m}^{-1} r_{O}^{-1}\\right)$, showing the Miller effect of $C_{F}$ at the output; and (3) Eq. (10.38) is independent of $I_{1}$ since this current merely acts as the bias for $M_{\\text {out }}$. We approximate the output voltage as $V_{\\text {out }}(t) \\approx\\left(I_{S S} / C_{F}\\right) t u(t)$.\n\nReturning to a two-stage op amp, let's assume in Fig. 10.38(a) that $V_{i n}$ undergoes a substantial positive step at $t=0$, turning off $M_{2}, M_{4}$, and $M_{3}$. The circuit can then be reduced to that in Fig. 10.38(b), revealing that $C_{C}$ is charged by a constant current $I_{S S}$, assuming parasitic capacitances at node $X$ are insignificant. Acknowledging that the output stage's gain establishes node $X$ as a virtual ground, we write $V_{\\text {out }}(t) \\approx$ $\\left(I_{S S} t / C_{C}\\right) u(t)$. Thus, the positive slew rate equals $I_{S S} / C_{C}$. It is important to note that during slewing, $M_{5}$ must supply two currents: $I_{S S}$ and $I_{1}$. If $M_{5}$ is not sufficiently wide to maintain $I_{S S}+I_{1}$ in saturation, then $V_{X}$ significantly drops, potentially steering $M_{1}$ into the triode region.\n\n[Figures and descriptions are omitted for brevity]\n\nFor the negative slew rate, we simplify the circuit as shown in Fig. 10.38(c). Here, $I_{1}$ must accommodate both $I_{S S}$ and $I_{D 5}$. For instance, if $I_{1}=I_{S S}$, then $V_{X}$ rises to turn off $M_{5}$. If $I_{1}<I_{S S}$, $M_{3}$ enters the triode region, and the slew rate is given by $I_{D 3} / C_{C}$.\n\n#### Example 10.8\n\n[The example and its solution are omitted for brevity]\n\nTwo-Stage Class-AB Op Amps\n\nThe two-stage class-AB op amp, as discussed in Chapter 9, can also incorporate Miller compensation. However, the current mirrors in the signal path introduce an additional pole, diminishing the phase margin. Consequently, two-stage class-AB op amps are generally slower than their class-A equivalents.\n\nWe aim to calculate the slew rate of two-stage class-AB op amps. Let's redraw the circuit of Fig. 10.39(b) for this op amp topology (Fig. 10.40). In this scenario, the slew rate equals $\\left(I_{1}-I_{S S}\\right) / C_{L}$ if $M_{\\text {out }}$ switches off, but due to the class-AB operation, $I_{1}$ itself can be considerable. The current mirror action results in $I_{1}=\\left(W_{p 1} / W_{p 2}\\right) \\alpha I_{i n}$, thereby yielding a slew rate of $\\left[\\alpha\\left(W_{p 1} / W_{p 2}\\right)-1\\right] I_{S S} / C_{L}$.\n\n[Figure and description are omitted for brevity]"
},
{
    "text": "Analyzing the slewing properties of two-stage operational amplifiers is an instructive exercise. Initially, we should examine the straightforward circuit depicted in Fig. 10.37(a), which includes a current step $I_{i n}$ represented by $I_{S S} u(t)$ and a capacitor $C_{F}$ starting with zero initial conditions. When the gain $A$ is high, node $X$ behaves as a virtual ground, and the voltage across $C_{F}$ is roughly equivalent to $V_{o u t}$. With a steady current equal to $I_{S S}$ flowing through it, $C_{F}$ produces an output voltage expressed as:\n\n$$\nV_{\\text {out }}(t) \\approx \\frac{I_{S S}}{C_{F}} t \\tag{10.36}\n$$\n\nIn Fig. 10.37(b), the circuit is an example of an integrator that includes an op-amp, capacitor $C_{F}$, and a current source $I_{i n}$. The output voltage $V_{o u t}$ is the result of the input current's integration over time, with the NMOS transistor $M_{o u t}$ contributing extra current regulation. The output waveform during slewing, as depicted in Fig. 10.37(c), demonstrates the linear rise of $V_{o u t}$ with time.\n\nFigure 10.37(c) shows a time-domain waveform graph that describes the circuit's output voltage $V_{o u t}(t)$ during the slewing phase. The graph illustrates a linear relationship between the output voltage and time, with the voltage starting from a negative value and increasing linearly at a constant rate. The slope of the line represents the rate of change of the output voltage, influenced by the circuit parameters and the Miller effect of $C_{F}$.\n\nThe circuit in Fig. 10.37(b) is further analyzed by writing the equation $V_{\\text {out }} / r_{O}+g_{m} V_{X}+I_{\\text {in }}=I_{1}$ and $C_{F} d\\left(V_{\\text {out }}-V_{X}\\right) / d t=I_{i n}$. Substituting $V_{X}$ from the first equation into the second yields:\n\n$$\nC_{F}\\left(1+\\frac{1}{g_{m} r_{O}}\\right) \\frac{d V_{\\text {out }}}{d t}=I_{\\text {in }}-\\frac{C_{F}}{g_{m}} \\frac{d I_{\\text {in }}}{d t} \\tag{10.37}\n$$\n\nApplying superposition to the terms on the right-hand side, we find:\n\n$$\nV_{\\text {out }}(t)=\\frac{I_{S S}}{C_{F}\\left(1+\\frac{1}{g_{m} r_{O}}\\right)} t u(t)-\\frac{I_{S S}}{g_{m}+\\frac{1}{r_{O}}} u(t) \\tag{10.38}\n$$\n\nThe output voltage initially jumps to a negative value and then ramps up with a slope determined by the input current and circuit capacitance. The graph indicates the effect of the Miller capacitance and shows that the output voltage does not depend on $I_{1}$, as it merely serves as the bias current for $M_{o u t}$.\n\nTurning to a two-stage op amp, if $V_{i n}$ undergoes a significant positive step at $t=0$, transistors $M_{2}, M_{4}$, and $M_{3}$ are turned off. The circuit simplifies to that in Fig. 10.38(b), where $C_{C}$ is charged by a constant current $I_{S S}$, assuming negligible parasitic capacitances at node $X$. With node $X$ being a virtual ground due to the op-amp's high gain, the output voltage is approximately $V_{\\text {out }}(t) \\approx \\left(I_{S S} t / C_{C}\\right) u(t)$. Therefore, the positive slew rate is $I_{S S} / C_{C}$. During slewing, $M_{5}$ must supply two currents: $I_{S S}$ and $I_{1}$.\n\nFor the negative slew rate, the circuit is simplified as shown in Fig. 10.38(c). Here, $I_{1}$ must supply both $I_{S S}$ and $I_{D 5}$. If $I_{1}=I_{S S}$, then $V_{X}$ rises to turn off $M_{5}$. If $I_{1}<I_{S S}$, $M_{3}$ enters the triode region, and the slew rate is given by $I_{D 3} / C_{C}$.\n\nConsidering a load capacitance $C_{L}$ in the circuit of Fig. 10.37(b) and neglecting channel-length modulation, we analyze two cases: $I_{i n}$ flowing into or out of node $X$. With $\\lambda=0$, the steady-state gain from $V_{X}$ to $V_{\\text {out }}$ is infinite, making $X$ a virtual ground. In the first case [Fig. 10.39(a)], $I_{i n}=I_{S S u}(t)$ flows through $C_{F}$, creating a ramp voltage. Since $V_{X}$ is constant, the voltage at the right terminal of $C_{F}$, $V_{\\text {out }}$, must fall at a rate of $I_{S S} / C_{F}$. This also means that $C_{L}$ is discharged at the same rate, requiring the transistor to draw three currents: $I_{1}, I_{S S}$, and $C_{L} d V_{\\text {out }} / d t=\\left(C_{L} / C_{F}\\right) I_{S S}$. Thus, as long as $M_{\\text {out }}$ stays in saturation, the output slew rate is approximately $I_{S S} / C_{F}$.\n\nIn the second case [Fig. 10.39(b)], if $X$ is a virtual ground, $V_{\\text {out }}$ must rise at a rate of $I_{S S} / C_{F}$, and $C_{L}$ must also receive a current of $C_{L} d V_{\\text {out }} / d t=\\left(C_{L} / C_{F}\\right) I_{S S}$. If $I_{1}>I_{S S}\\left(C_{L} / C_{F}\\right)+I_{S S}$, then $M_{\\text {out }}$ remains on, $V_{X}$ varies slightly, and the output slew rate is $I_{S S} / C_{F}$. However, if $I_{1}<\\left(1+C_{L} / C_{F}\\right) I_{S S}$, $M_{\\text {out }}$ turns off, and the slew rate is given by $\\left(I_{1}-I_{S S}\\right) / C_{L}$, which is a lower value.\n\nTwo-stage class-AB op amps, as discussed in Chapter 9, can also incorporate Miller compensation. However, the current mirrors in the signal path introduce an additional pole, reducing the phase margin. Consequently, two-stage class-AB op amps are usually slower than their class-A equivalents.\n\nTo compute the slew rate of two-stage class-AB op amps, we redraw the circuit of Fig. 10.39(b) for this op-amp topology (Fig. 10.40). In this case, the slew rate is $\\left(I_{1}-I_{S S}\\right) / C_{L}$ if $M_{\\text {out }}$ turns off, but due to class-AB operation, $I_{1}$ can be quite large. The current mirror action results in $I_{1}=\\left(W_{p 1} / W_{p 2}\\right) \\alpha I_{i n}$, leading to a slew rate of $\\left[\\alpha\\left(W_{p 1} / W_{p 2}\\right)-1\\right] I_{S S} / C_{L}$."
},
{
    "text": "Analyzing the slewing behavior of two-stage operational amplifiers is insightful. Initially, we examine the straightforward circuit depicted in Fig. 10.37(a), where a current step $I_{i n}$, defined by $I_{S S} u(t)$, interacts with a capacitor $C_{F}$ initialized at zero. When the gain $A$ is high, node $X$ behaves as a virtual ground, and the voltage across $C_{F}$ is nearly equivalent to $V_{o u t}$. With a steady current of $I_{S S}$, $C_{F}$ produces an output voltage expressed as:\n\n$$\nV_{\\text {out }}(t) \\approx \\frac{I_{S S}}{C_{F}} t\n$$\n\nThe circuits in Figs. 10.37(b) and (c) represent an integrator circuit using an op-amp, capacitor $C_{F}$, and a current source $I_{i n}$. The output voltage $V_{o u t}$ is determined by the integration of the input current over time, with an NMOS transistor providing additional current regulation. The waveform in Fig. 10.37(c) shows the linear rise of $V_{o u t}$ with time.\n\nWe further investigate the circuit in Fig. 10.37(b) and derive the equation $V_{\\text {out }} / r_{O}+g_{m} V_{X}+I_{\\text {in }}=I_{1}$ and $C_{F} d\\left(V_{\\text {out }}-V_{X}\\right) / d t=I_{i n}$. By substituting $V_{X}$ from the first equation into the second, we obtain:\n\n$$\nC_{F}\\left(1+\\frac{1}{g_{m} r_{O}}\\right) \\frac{d V_{\\text {out }}}{d t}=I_{\\text {in }}-\\frac{C_{F}}{g_{m}} \\frac{d I_{\\text {in }}}{d t}\n$$\n\nApplying the principle of superposition, we find:\n\n$$\nV_{\\text {out }}(t)=\\frac{I_{S S}}{C_{F}\\left(1+\\frac{1}{g_{m} r_{O}}\\right)} t u(t)-\\frac{I_{S S}}{g_{m}+\\frac{1}{r_{O}}} u(t)\n$$\n\nThe graph in Fig. 10.37(c) illustrates the output voltage $V_{o u t}(t)$ during the slewing phase, showing a linear increase over time.\n\nIn a two-stage op-amp, if $V_{i n}$ undergoes a significant positive step at $t=0$, transistors $M_{2}, M_{4}$, and $M_{3}$ are turned off. The circuit simplifies to that in Fig. 10.38(b), indicating that $C_{C}$ is charged by a constant current $I_{S S}$, assuming negligible parasitic capacitances at node $X$. Given that the output stage's gain renders node $X$ a virtual ground, we have $V_{\\text {out }}(t) \\approx$ $\\left(I_{S S} t / C_{C}\\right) u(t)$. Hence, the positive slew rate equals $I_{S S} / C_{C}$.\n\nThe circuits in Figs. 10.38(a), (b), and (c) depict a simple two-stage operational amplifier, its simplified version during positive slewing, and during negative slewing, respectively.\n\nFor the negative slew rate, we simplify the circuit as shown in Fig. 10.38(c). Here, $I_{1}$ must support both $I_{S S}$ and $I_{D 5}$. If $I_{1}=I_{S S}$, then $V_{X}$ rises to turn off $M_{5}$. If $I_{1}<I_{S S}$, then $M_{3}$ enters the triode region, and the slew rate is given by $I_{D 3} / C_{C}$.\n\nWhen considering a load capacitance $C_{L}$ in the circuit of Fig. 10.37(b)$, we analyze two scenarios: $I_{i n}$ flowing into or out of node $X$. If $I_{i n}=I_{S S u}(t)$ flows through $C_{F}$, generating a ramp voltage, and $V_{X}$ is constant, the voltage at the right terminal of $C_{F}$, $V_{\\text {out }}$, must fall at a rate of $I_{S S} / C_{F}$. This implies that $C_{L}$ is discharged at the same rate, requiring the transistor to draw three currents: $I_{1}, I_{S S}$, and $C_{L} d V_{\\text {out }} / d t=\\left(C_{L} / C_{F}\\right) I_{S S}$. Thus, as long as $M_{\\text {out }}$ remains in saturation, the output slew rate is approximately equal to $I_{S S} / C_{F}$.\n\nIn the second case, if $X$ is a virtual ground, $V_{\\text {out }}$ must rise at a rate of $I_{S S} / C_{F}$, and $C_{L}$ must also receive a current of $C_{L} d V_{\\text {out }} / d t=\\left(C_{L} / C_{F}\\right) I_{S S}$. If $I_{1}>I_{S S}\\left(C_{L} / C_{F}\\right)+I_{S S}$, then $M_{\\text {out }}$ remains on, $V_{X}$ varies little, and the output slew rate is equal to $I_{S S} / C_{F}$. If $I_{1}<\\left(1+C_{L} / C_{F}\\right) I_{S S}$, $M_{\\text {out }}$ turns off, the difference between $I_{1}$ and $I_{S S}$ charges $C_{L}$, and the slew rate is given by $\\left(I_{1}-I_{S S}\\right) / C_{L}$, a lower value.\n\nTwo-stage class-AB op amps can also incorporate Miller compensation. However, due to the additional pole from current mirrors in the signal path, they typically have a lower phase margin and are slower than their class-A counterparts.\n\nTo compute the slew rate of two-stage class-AB op amps, we redraw the circuit of Fig. 10.39(b) for this topology (Fig. 10.40). The slew rate is equal to $\\left(I_{1}-I_{S S}\\right) / C_{L}$ if $M_{\\text {out }}$ turns off, but due to class-AB operation, $I_{1}$ can be quite large. The current mirror action yields $I_{1}=\\left(W_{p 1} / W_{p 2}\\right) \\alpha I_{i n}$, resulting in a slew rate of $\\left[\\alpha\\left(W_{p 1} / W_{p 2}\\right)-1\\right] I_{S S} / C_{L}$."
},
{
    "text": "Studying the slewing characteristics of two-stage operational amplifiers provides valuable insights. To begin, we examine the straightforward circuit depicted in Fig. 10.37(a), featuring a current step \\( I_{i n} \\) represented by \\( I_{S S} u(t) \\) and a capacitor \\( C_{F} \\) with zero initial voltage. Assuming a high gain \\( A \\), node \\( X \\) behaves as a virtual ground, making the voltage across \\( C_{F} \\) nearly equivalent to \\( V_{o u t} \\). With a steady current \\( I_{S S} \\), \\( C_{F} \\) generates an output voltage expressed as:\n\n\\[ V_{\\text {out }}(t) \\approx \\frac{I_{S S}}{C_{F}} t \\tag{10.36} \\]\n\nFig. 10.37(b) illustrates an integrator circuit utilizing an op-amp, capacitor \\( C_{F} \\), and current source \\( I_{i n} \\), where the output voltage \\( V_{o u t} \\) is determined by the input current's integration over time, with the NMOS transistor \\( M_{o u t} \\) offering additional current regulation. The output waveform during slewing, as shown in Fig. 10.37(c), depicts a linear rise in \\( V_{o u t} \\) with time.\n\nThe graph in Fig. 10.37(c) is a time-domain waveform depicting the output voltage \\( V_{o u t}(t) \\) during the slewing phase, showing a linear increase in voltage over time. The graph starts from a negative voltage value and increases linearly, indicating a constant rate of change influenced by the circuit parameters.\n\nIn the context of Fig. 10.37(b), we derive the equation \\( V_{\\text {out }} / r_{O}+g_{m} V_{X}+I_{\\text {in }}=I_{1} \\) and \\( C_{F} d\\left(V_{\\text {out }}-V_{X}\\right) / d t=I_{i n} \\), leading to:\n\n\\[ C_{F}\\left(1+\\frac{1}{g_{m} r_{O}}\\right) \\frac{d V_{\\text {out }}}{d t}=I_{\\text {in }}-\\frac{C_{F}}{g_{m}} \\frac{d I_{\\text {in }}}{d t} \\tag{10.37} \\]\n\nApplying superposition, we obtain:\n\n\\[ V_{\\text {out }}(t)=\\frac{I_{S S}}{C_{F}\\left(1+\\frac{1}{g_{m} r_{O}}\\right)} t u(t)-\\frac{I_{S S}}{g_{m}+\\frac{1}{r_{O}}} u(t) \\tag{10.38} \\]\n\nThe output voltage initially jumps to \\( -I_{S S} /\\left(g_{m}+r_{O}^{-1}\\right) \\) and then ramps up with a slope of \\( I_{S S} /\\left[C_{F}\\left(1+g_{m}^{-1} r_{O}^{-1}\\right)\\right] \\). Notably, at \\( t=0^{+} \\), \\( C_{F} \\) acts as a short circuit, and the slope of the ramp indicates an equivalent capacitance of \\( C_{F}\\left(1+g_{m}^{-1} r_{O}^{-1}\\right) \\), revealing the Miller effect of \\( C_{F} \\) at the output.\n\nConsidering a two-stage op amp with \\( V_{i n} \\) experiencing a large positive step at \\( t=0 \\), turning off \\( M_{2}, M_{4} \\), and \\( M_{3} \\), the circuit simplifies to that in Fig. 10.38(b), where \\( C_{C} \\) is charged by a constant current \\( I_{S S} \\) if parasitic capacitances at node \\( X \\) are negligible. The output voltage \\( V_{\\text {out }}(t) \\approx \\left(I_{S S} t / C_{C}\\right) u(t) \\), making the positive slew rate \\( I_{S S} / C_{C} \\).\n\nFor the negative slew rate, simplifying the circuit as shown in Fig. 10.38(c), \\( I_{1} \\) must support both \\( I_{S S} \\) and \\( I_{D 5} \\). If \\( I_{1}=I_{S S} \\), \\( V_{X} \\) rises to turn off \\( M_{5} \\). If \\( I_{1}<I_{S S} \\), \\( M_{3} \\) enters the triode region, and the slew rate is \\( I_{D 3} / C_{C} \\).\n\nIn the presence of a load capacitance \\( C_{L} \\), the output slew rate is approximately \\( I_{S S} / C_{F} \\) if \\( M_{\\text {out }} \\) remains in saturation. For the second case, if \\( I_{1}>\\left(1+C_{L} / C_{F}\\right) I_{S S} \\), \\( M_{\\text {out }} \\) stays on, and the output slew rate is \\( I_{S S} / C_{F} \\). However, if \\( I_{1}<\\left(1+C_{L} / C_{F}\\right) I_{S S} \\), \\( M_{\\text {out }} \\) turns off, and the slew rate is \\( \\left(I_{1}-I_{S S}\\right) / C_{L} \\).\n\nTwo-stage class-AB op amps, discussed in Chapter 9, can also incorporate Miller compensation. The slew rate for these op amps is \\( \\left[\\alpha\\left(W_{p 1} / W_{p 2}\\right)-1\\right] I_{S S} / C_{L} \\), considering class-AB operation allows for a larger \\( I_{1} \\)."
},
{
    "text": "It is instructive to study the slewing characteristics of two-stage op amps. Before delving into the details, let us consider the simple circuit shown in Fig. 10.37(a), where $I_{i n}$ is a current step given by $I_{S S} u(t)$ and $C_{F}$ has a zero initial condition. If $A$ is large, node $X$ is a virtual ground and the voltage across $C_{F}$ is approximately equal to $V_{o u t}$. Receiving a constant current equal to $I_{S S}, C_{F}$ generates an output voltage given by\n\n$$\n\\begin{equation*}\nV_{\\text {out }}(t) \\approx \\frac{I_{S S}}{C_{F}} t \\tag{10.36}\n\\end{equation*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: CF, type: Capacitor, value: CF, ports: {Np: X, Nn: Vout}\nname: A, type: OpAmp, value: -A, ports: {InP: X, Out: Vout}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: X, Nn: GND}\n]\nextrainfo:The circuit is a simple integrator with an op-amp, capacitor CF, and current source Iin. Node X is a virtual ground due to the high gain of the op-amp.\nimage_name:(b)\ndescription:\n[\nname: CF, type: Capacitor, value: CF, ports: {Np: X, Nn: Vout}\nname: Iin, type: CurrentSource, value: Iin, ports: {Np: X, Nn: GND}\nname: I1, type: CurrentSource, value: I1, ports: {Np: VDD, Nn: Vout}\nname: Mout, type: NMOS, ports: {S: GND, D: Vout, G: X}\nname: ro, type: Resistor, value: ro, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit in Fig. 10.37(b) is an implementation of an integrator with a current input Iin, using an op-amp, capacitor CF, and NMOS transistor Mout. The output voltage Vout is determined by the integration of the input current over time, with the NMOS transistor providing additional current control. The output waveform during slewing is shown in Fig. 10.37(c), illustrating the linear increase of Vout over time.\nimage_name:(c)\ndescription:The graph in Figure 10.37(c) is a time-domain waveform illustrating the output voltage \\( V_{out}(t) \\) of a circuit during the slewing phase.\n\n1. **Type of Graph and Function:**\n- This is a time-domain waveform graph showing the relationship between output voltage and time.\n\n2. **Axes Labels and Units:**\n- The horizontal axis represents time \\( t \\).\n- The vertical axis represents the output voltage \\( V_{out}(t) \\).\n- No specific units are given, but time is typically in seconds and voltage in volts.\n\n3. **Overall Behavior and Trends:**\n- The graph shows a linear increase in the output voltage over time.\n- Initially, the voltage starts from a negative value \\( \\frac{-I_{SS}}{g_m + r_O^{-1}} \\) and increases linearly, indicating a constant rate of change.\n\n4. **Key Features and Technical Details:**\n- The slope of the line is given by \\( \\frac{I_{SS}}{C_F(1 + \\frac{1}{g_m r_O})} \\), which represents the rate of change of the output voltage.\n- The graph starts from a negative voltage value, indicating an initial condition influenced by the circuit parameters.\n- The linear region of the graph represents the slewing behavior, where the output voltage changes at a constant rate determined by the input current and circuit capacitance.\n\n5. **Annotations and Specific Data Points:**\n- The graph includes a dashed line indicating the slope of the linear region, emphasizing the relationship between the current \\( I_{SS} \\), the capacitance \\( C_F \\), and the transconductance \\( g_m \\) and output resistance \\( r_O \\).\n- The initial voltage point \\( \\frac{-I_{SS}}{g_m + r_O^{-1}} \\) is a critical value that highlights the starting condition of the waveform.\n\nFigure 10.37 (a) Simplified circuit for slew study, (b) realization of (a), and (c) output waveform during slewing.\nWe now consider the implementation depicted in Fig. $10.37(\\mathrm{~b})^{6}$ and write $V_{\\text {out }} / r_{O}+g_{m} V_{X}+I_{\\text {in }}=I_{1}$ and $C_{F} d\\left(V_{\\text {out }}-V_{X}\\right) / d t=I_{i n}$. Substituting for $V_{X}$ from the former equation in the latter, we have\n\n$$\n\\begin{equation*}\nC_{F}\\left(1+\\frac{1}{g_{m} r_{O}}\\right) \\frac{d V_{\\text {out }}}{d t}=I_{\\text {in }}-\\frac{C_{F}}{g_{m}} \\frac{d I_{\\text {in }}}{d t} \\tag{10.37}\n\\end{equation*}\n$$\n\nWe consider the terms on the right-hand side as two inputs and apply superposition, obtaining\n\n$$\n\\begin{equation*}\nV_{\\text {out }}(t)=\\frac{I_{S S}}{C_{F}\\left(1+\\frac{1}{g_{m} r_{O}}\\right)} t u(t)-\\frac{I_{S S}}{g_{m}+\\frac{1}{r_{O}}} u(t) \\tag{10.38}\n\\end{equation*}\n$$\n\n(This voltage, of course, rides on top of a bias value.) As illustrated in Fig. 10.37(c), $V_{\\text {out }}$ initially jumps to $-I_{S S} /\\left(g_{m}+r_{O}^{-1}\\right)$ and subsequently ramps up with a slope equal to $I_{S S} /\\left[C_{F}\\left(1+g_{m}^{-1} r_{O}^{-1}\\right)\\right]$. It is interesting to note that (1) at $t=0^{+}, C_{F}$ acts as a short circuit, allowing $I_{i n}$ to flow through $\\left(1 / g_{m}\\right) \\| r_{O}$ and creating a downward step at the output; (2) the slope of the ramp suggests an equivalent capacitance of $C_{F}\\left(1+g_{m}^{-1} r_{O}^{-1}\\right)$, revealing the Miller effect of $C_{F}$ at the output; and (3) Eq. (10.38) does not depend on $I_{1}$ because this current simply serves as the bias current of $M_{\\text {out }}$. We approximate the output voltage as $V_{\\text {out }}(t) \\approx\\left(I_{S S} / C_{F}\\right) t u(t)$.\n\nLet us return to a two-stage op amp and suppose that in Fig. 10.38(a), $V_{i n}$ experiences a large positive step at $t=0$, turning off $M_{2}, M_{4}$, and $M_{3}$. The circuit can then be simplified to that in Fig. 10.38(b), revealing that $C_{C}$ is charged by a constant current $I_{S S}$ if parasitic capacitances at node $X$ are negligible. Recognizing that the gain of the output stage makes node $X$ a virtual ground, we write $V_{\\text {out }}(t) \\approx$ $\\left(I_{S S} t / C_{C}\\right) u(t)$. Thus, the positive slew rate ${ }^{7}$ equals $I_{S S} / C_{C}$. Note that during slewing, $M_{5}$ must provide two currents: $I_{S S}$ and $I_{1}$. If $M_{5}$ is not wide enough to sustain $I_{S S}+I_{1}$ in saturation, then $V_{X}$ drops significantly, possibly driving $M_{1}$ into the triode region.\nimage_name:(a)\ndescription:The diagram labeled (a) represents a simple two-stage operational amplifier (op-amp) circuit. This op-amp consists of the following main components:\n\n1. **Input Differential Pair**: Transistors M1 and M2 form the input differential pair, which receives the input voltage $V_{in}$. This pair is biased by a constant current source $I_{SS}$ connected to the ground ($GND$).\n\n2. **Current Mirrors**: Transistors M3 and M4 act as a current mirror, which replicates the current through M1 to M4. This configuration helps in converting the differential input signal into a single-ended output.\n\n3. **Second Gain Stage**: Transistor M5 acts as the second gain stage, which is connected to the supply voltage $V_{DD}$. This stage provides additional amplification to the signal processed by the input stage.\n\n4. **Compensation Capacitor (C_C)**: The capacitor $C_C$ is connected between the output of the first stage (node X) and the output of the second stage ($V_{out}$). This capacitor is crucial for frequency compensation, ensuring stability of the op-amp by controlling the bandwidth and phase margin.\n\n5. **Output Stage**: The output voltage is taken across $V_{out}$, which is connected to another current source $I_1$ to ground. This stage provides the final amplified output.\n\n**Flow of Information**:\n- The input voltage $V_{in}$ is applied to the gate of M1.\n- The differential pair (M1, M2) converts the input voltage difference into a current difference, which is mirrored by M3 and M4.\n- The current through M4 is fed into the gate of M5, amplifying the signal further.\n- The compensation capacitor $C_C$ helps stabilize the op-amp by providing a feedback path from the output to the node X.\n\n**Overall System Function**:\nThis op-amp is designed to amplify the input signal applied at $V_{in}$, providing a larger output signal at $V_{out}$. The use of a differential pair allows the op-amp to reject common-mode signals, enhancing the precision of amplification. The compensation capacitor ensures the stability of the op-amp across a range of frequencies, making it suitable for a variety of analog signal processing applications.\nimage_name:(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: P, D: X, G: Vin}\nname: M5, type: PMOS, ports: {S: VDD, D: Vout, G: X}\nname: Cc, type: Capacitor, value: Cc, ports: {Np: X, Nn: Vout}\nname: Iss, type: CurrentSource, value: Iss, ports: {Np: P, Nn: GND}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is a simplified two-stage operational amplifier during positive slewing. M1 is an NMOS transistor connected to the input, and M5 is a PMOS transistor providing current to the output. The capacitor Cc is used for compensation between node X and Vout. Current sources Iss and I1 are used for biasing and output current, respectively.\nimage_name:(c)\ndescription:\n[\nname: M3, type: PMOS, ports: {S: VDD, D: X, G: Vb}\nname: M5, type: PMOS, ports: {S: VDD, D: Vout, G: X}\nname: CC, type: Capacitor, value: CC, ports: {Np: X, Nn: Vout}\nname: I1, type: CurrentSource, value: I1, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit diagram represents a simplified two-stage op-amp during negative slewing. The current ISS flows into node x, which is also connected to the drain of M3 and the source of M5. The capacitor CC is connected between node x and Vout. The current source I1 is connected from Vout to ground. M3 and M5 are PMOS transistors with their sources connected to VDD.\n\nFigure 10.38 (a) Simple two-stage op amp, (b) simplified circuit during positive slewing, and (c) simplified circuit during negative slewing.\n\nFor the negative slew rate, we simplify the circuit as shown in Fig. 10.38(c). Here $I_{1}$ must support both $I_{S S}$ and $I_{D 5}$. For example, if $I_{1}=I_{S S}$, then $V_{X}$ rises so as to turn off $M_{5}$. If $I_{1}<I_{S S}$, then $M_{3}$ enters the triode region and the slew rate is given by $I_{D 3} / C_{C}$.\n\n#### Example 10.8\n\nOp amps typically drive a heavy load capacitance. Repeat the slew rate analysis if the circuit of Fig. 10.37(b) sees a load capacitance of $C_{L}$. For simplicity, neglect channel-length modulation.\n\n#### Solution\n\nWe consider two cases: $I_{i n}$ flows into or out of node $X$. With $\\lambda=0$, the steady-state gain from $V_{X}$ to $V_{\\text {out }}$ is infinite, forcing $X$ to be a virtual ground node. In the first case [Fig. 10.39(a)], $I_{i n}=I_{S S u}(t)$ flows through $C_{F}$, generating a ramp voltage across it. Since $V_{X}$ is constant, the voltage at the right terminal of $C_{F}, V_{\\text {out }}$, must fall at a rate of $I_{S S} / C_{F}$. This also means that $C_{L}$ is discharged at the same rate, requiring that the transistor draw three currents: $I_{1}, I_{S S}$, and $C_{L} d V_{\\text {out }} / d t=\\left(C_{L} / C_{F}\\right) I_{S S}$. Thus, so long as $M_{\\text {out }}$ remains in saturation, the output slew rate is approximately equal to $I_{S S} / C_{F}$.\nimage_name:(a)\ndescription:\n[\nname: CF, type: Capacitor, value: CF, ports: {Np: Vout, Nn: X}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\nname: Mout, type: NMOS, ports: {S: GND, D: Vout, G: X}\nname: I1, type: CurrentSource, value: I1, ports: {Np: VDD, Nn: Vout}\nname: Issu(t), type: CurrentSource, value: Issu(t), ports: {Np: VDD, Nn: X}\n]\nextrainfo:The circuit is a current-controlled ramp generator. The NMOS transistor Mout controls the discharge of the capacitors CF and CL. The output voltage Vout changes at a rate determined by the current Issu(t) and the capacitance CF.\nimage_name:(b)\ndescription:\n[\nname: I1, type: CurrentSource, value: I1, ports: {Np: VDD, Nn: Vout}\nname: CF, type: Capacitor, value: CF, ports: {Np: Vout, Nn: X}\nname: Mout, type: NMOS, ports: {S: GND, D: Vout, G: X}\nname: CL, type: Capacitor, value: CL, ports: {Np: Vout, Nn: GND}\nname: Issu(t), type: CurrentSource, value: Issu(t), ports: {Np: X, Nn: GND}\n]\nextrainfo:The circuit is a configuration involving a current source I1, capacitors CF and CL, and an NMOS transistor Mout. It is designed to control the output voltage Vout, with node X acting as a virtual ground. The current Issu(t) flows into node X, and the NMOS transistor Mout helps regulate the discharge of CL.\nimage_name:(c)\ndescription:\n[\nname: I_SS, type: CurrentSource, value: I_SS, ports: {Np: X, Nn: GND}\nname: C_F, type: Capacitor, value: C_F, ports: {Np: Vout, Nn: X}\nname: C_L, type: Capacitor, value: C_L, ports: {Np: Vout, Nn: GND}\n]\nextrainfo:The circuit is designed to control the output slew rate by adjusting the current through the NMOS transistor M_out. The current source I_1 is adjusted by subtracting I_SS, affecting the voltage across the capacitors C_F and C_L, which in turn controls the rate of change of Vout.\n\nNow, let us study the second case [Fig. 10.39(b)]. If $X$ is a virtual ground, $V_{\\text {out }}$ must rise at a rate of $I_{S S} / C_{F}$, and $C_{L}$ must also receive a current of $C_{L} d V_{\\text {out }} / d t=\\left(C_{L} / C_{F}\\right) I_{S S}$. We observe that, if $I_{1}>I_{S S}\\left(C_{L} / C_{F}\\right)+I_{S S}$, then $M_{\\text {out }}$ remains on, $V_{X}$ varies little, and the output slew rate is equal to $I_{S S} / C_{F}$. On the other hand, if $I_{1}<$ $\\left(1+C_{L} / C_{F}\\right) I_{S S}, M_{\\text {out }}$ turns off, the difference between $I_{1}$ and $I_{S S}$ charges $C_{"
},
{
    "text": "The challenge in compensating two-stage CMOS operational amplifiers stems from the feedforward path established by the compensating capacitor, as depicted in Fig. 10.41(a). Should the capacitor $C_{C}$ allow current to flow from the output node to node $X$ but prevent it from flowing back, the zero would shift to an exceedingly high frequency. As illustrated in Fig. 10.41(b), this can be achieved by placing a source follower in series with the capacitor. Given that the gate-source capacitance of $M_{2}$ is usually much smaller than $C_{C}$, we anticipate the right-half-plane zero to manifest at high frequencies. Presuming that $\\gamma=\\lambda=0$ for the source follower and disregarding certain device capacitances, we simplify the circuit as shown in Fig. 10.42, leading to the equation $-g_{m 1} V_{1}=V_{\\text {out }}\\left(R_{L}^{-1}+C_{L} s\\right)$, and consequently:\n\n$$\n\\begin{equation*}\nV_{1}=\\frac{-V_{\\text {out }}}{g_{m 1} R_{L}}\\left(1+R_{L} C_{L} s\\right) \\tag{10.39}\n\\end{equation*}\n$$\n\nThe descriptions of the images provided correspond to the figures mentioned and depict the configurations of the two-stage op-amps with various compensation techniques and their simplified equivalent circuits.\n\nFurther analysis yields:\n\n$$\n\\begin{equation*}\n\\frac{V_{\\text {out }}-V_{1}}{\\frac{1}{g_{m 2}}+\\frac{1}{C_{C} s}}+I_{\\text {in }}=\\frac{V_{1}}{R_{S}} \\tag{10.40}\n\\end{equation*}\n$$\n\nUpon substituting for $V_{1}$ from (10.39), we obtain:\n\n$$\n\\begin{equation*}\n\\frac{V_{\\text {out }}}{I_{\\text {in }}}=\\frac{-g_{m 1} R_{L} R_{S}\\left(g_{m 2}+C_{C} s\\right)}{R_{L} C_{L} C_{C}\\left(1+g_{m 2} R_{S}\\right) s^{2}+\\left[\\left(1+g_{m 1} g_{m 2} R_{L} R_{S}\\right) C_{C}+g_{m 2} R_{L} C_{L}\\right] s+g_{m 2}} \\tag{10.41}\n\\end{equation*}\n$$\n\nThe circuit, therefore, introduces a zero in the left half-plane, which can be adjusted to cancel one of the poles. This zero can also be derived as demonstrated in Fig. 6.18.\n\nBy assuming widely separated poles and utilizing certain approximations, we can calculate the magnitudes of the two poles:\n\n$$\n\\begin{align*}\n\\omega_{p 1} & \\approx \\frac{g_{m 2}}{g_{m 1} g_{m 2} R_{L} R_{S} C_{C}}  \\tag{10.42}\\\\\n& \\approx \\frac{1}{g_{m 1} R_{L} R_{S} C_{C}} \\tag{10.43}\n\\end{align*}\n$$\n\nand\n\n$$\n\\begin{align*}\n\\omega_{p 2} & \\approx \\frac{g_{m 1} g_{m 2} R_{L} R_{S} C_{C}}{R_{L} C_{L} C_{C} g_{m 2} R_{S}}  \\tag{10.44}\\\\\n& \\approx \\frac{g_{m 1}}{C_{L}} \\tag{10.45}\n\\end{align*}\n$$\n\nThus, the new values of $\\omega_{p 1}$ and $\\omega_{p 2}$ resemble those derived from the simple Miller approximation. For instance, the output pole has shifted from $\\left(R_{L} C_{L}\\right)^{-1}$ to $g_{m 1} / C_{L}$.\n\nA key issue in the circuit of Fig. 10.41(b) is that the source follower constrains the lower limit of the output voltage to $V_{G S 2}+V_{I 2}$, where $V_{I 2}$ is the voltage necessary across $I_{2}$. Consequently, it is advantageous to employ the compensation capacitor to separate the dc levels in the active feedback stage from those at the output. This topology is shown in Fig. 10.43, where $C_{C}$ and the common-gate stage $M_{2}$ transform the output voltage swing into a current, which is then fed back to the gate of $M_{1}$. If $V_{1}$ changes by $\\Delta V$ and $V_{\\text {out }}$ by $A_{v} \\Delta V$, the current through the capacitor is nearly $A_{v} \\Delta V C_{C} s$ due to the relatively small $1 / g_{m 2}$. Hence, a $\\Delta V$ change at the gate of $M_{1}$ generates a current change of $A_{v} \\Delta V C_{C} s$, providing a capacitor multiplication factor equal to $A_{v}$.\n\nAssuming that $\\lambda=\\gamma=0$ for the common-gate stage, we redraw the circuit of Fig. 10.43 in Fig. 10.44, yielding:\n\n$$\n\\begin{equation*}\nV_{\\text {out }}+\\frac{g_{m 2} V_{2}}{C_{C} s}=-V_{2} \\tag{10.46}\n\\end{equation*}\n$$\n\nand consequently:\n\n$$\n\\begin{equation*}\nV_{2}=-V_{\\text {out }} \\frac{C_{C} s}{C_{C} s+g_{m 2}} \\tag{10.47}\n\\end{equation*}\n$$\n\nAdditionally:\n\n$$\n\\begin{equation*}\ng_{m 1} V_{1}+V_{\\text {out }}\\left(\\frac{1}{R_{L}}+C_{L} s\\right)=g_{m 2} V_{2} \\tag{10.48}\n\\end{equation*}\n$$\n\nwith $I_{i n}=V_{1} / R_{S}+g_{m 2} V_{2}$. Solving these equations gives:\n\n$$\n\\begin{equation*}\n\\frac{V_{\\text {out }}}{I_{\\text {in }}}=\\frac{-g_{m 1} R_{S} R_{L}\\left(g_{m 2}+C_{C} s\\right)}{R_{L} C_{L} C_{C} S^{2}+\\left[\\left(1+g_{m 1} R_{S}\\right) g_{m 2} R_{L} C_{C}+C_{C}+g_{m 2} R_{L} C_{L}\\right] s+g_{m 2}} \\tag{10.49}\n\\end{equation*}\n$$\n\nSimilar to the circuit of Fig. 10.41(b), this topology incorporates a zero in the left half-plane. Using analogous approximations, we calculate the poles as:\n\n$$\n\\begin{align*}\n& \\omega_{p 1} \\approx \\frac{1}{g_{m 1} R_{L} R_{S} C_{C}}  \\tag{10.50}\\\\\n& \\omega_{p 2} \\approx \\frac{g_{m 2} R_{s} g_{m 1}}{C_{L}} \\tag{10.51}\n\\end{align*}\n$$\n\nNotably, the second pole has significantly increased in magnitudeby a factor of $g_{m 2} R_{S}$ compared to the circuit of Fig. 10.41. This is because, at very high frequencies, the feedback loop composed of $M_{2}$ and $R_{S}$ in Fig. 10.43 reduces the output resistance by the same factor. Of course, if the capacitance at the gate of $M_{1}$ is considered, pole splitting is less pronounced. Nonetheless, this technique has the potential to deliver a high bandwidth in two-stage op amps.\n\nThe op amp in Fig. 10.43 presents significant slewing challenges. For positive slewing at the output, the simplified circuit in Fig. 10.45(a) indicates that $M_{2}$ and thus $I_{1}$ must provide $I_{S S}$, necessitating that $I_{1} \\geq$ $I_{S S}+I_{D 1}$. If $I_{1}$ is insufficient, $V_{P}$ decreases, turning off $M_{1}$, and if $I_{1}<I_{S S}$, $M_{0}$ and its tail current source must enter the triode region, resulting in a slew rate of $I_{1} / C_{C}$.\n\nFor negative slewing, $I_{2}$ must support both $I_{S S}$ and $I_{D 2}$, as shown in Fig. 10.45(b). As $I_{S S}$ flows into node $P$, $V_{P}$ tends to rise, increasing $I_{D 1}$. Consequently, $M_{1}$ absorbs the current generated by $I_{3}$ through $C_{C}$, turning off $M_{2}$ and countering the rise in $V_{P}$. We can thus consider $P$ a virtual ground node. This implies that, for equal positive and negative slew rates, $I_{3}$ (and hence $I_{2}$) must be at least as large as $I_{S S}$, increasing power dissipation.\n\nOperational amplifiers utilizing a cascode topology as their first stage can adopt a variant of the technique shown in Fig. 10.43. As depicted in Fig. 10.46(a), this method locates the compensation capacitor between the source of the cascode devices and the output nodes. Using the simplified model in Fig. 10.46(b) and the approach in Fig. 6.18, the reader can demonstrate that the zero appears at $\\left(g_{m 4} R_{e q}\\right)\\left(g_{m 9} / C_{C}\\right)$, a much greater magnitude than $g_{m 9} / C_{C}$. If other capacitances are ignored, it can also be shown that the dominant pole is situated at approximately $\\left(R_{e q} g_{m 9} R_{L} C_{C}\\right)^{-1}$, as if $C_{C}$ were connected to the gate of $M_{9}$ rather than the source of $M_{4}$. The first nondominant pole is given by $g_{m 4} g_{m 9} R_{e q} / C_{L}$, an effect akin to that described by Eq. (10.51). In reality, the capacitance at $X$ may create a significant pole because the resistance seen at this node is quite substantial. The analysis of the slew rate is left as an exercise for the reader. (One can also insert a resistor in series with each $C_{C}$ to adjust the zero frequency.)\n\nIt\nThe challenge text provided has series of equations and descriptions related figures\nThe original text provided a series of equations and descriptions of two configurations-stage CMOS operational amplifier configurations and compensation compensation techniques. It detailed the challenges associated with compensating these amplifiers, particularly the difficulty arising from the feedforward path created by the compensation capacitor. The text explained how the\nThe original text provided a series of equations and descriptions of various two-stage CMOS operational amplifier configurations and their compensation techniques. It discussed the challenges associated with compensating these amplifiers, particularly the issues arising from the feedforward path created by the compensation capacitor. The text explained how the addition of a source follower in help move the zero-half-plane zero to a higher frequency, It also described the simplification of the circuit under the resulting equations, describe the amplifier's behavior.\n\nFurthermore text further explored the use of a common-gate stage as isolate DC levels and how the amplifier's frequency response. It presented the slewing issues related to the output voltage and how necessary dissipation concerns\nThe original text provided a comprehensive exploration of two-stage CMOS operational amplifiers, focusing on the complexities of their compensation mechanisms. It highlighted the challenges posed by the feedforward path created by the compensation\nThe original text detailed a comprehensive analysis of two-stage CMOS operational amplifiers, focusing on the complexities of their compensation mechanisms. It highlighted the challenges posed by the feedforward path created by the compensation capacitor and how this can lead to a right-half-plane zero. The text then proposed a solution involving the insertion of a source follower to elevate\nThe original text presented a detailed examination of the compensation challenges in two-stage CMOS operational amplifiers, emphasizing\nThe original text presented a detailed exploration of the compensation challenges in two-stage CMOS operational amplifiers, emphasizing\nThe original text provided an in-depth examination of the compensation challenges in two-stage CMOS operational amplifiers, particularly focusing the complications arising from the feedforward path formed by the compensation capacitor. This path can lead to a right-half-plane zero, which affects\nThe original text provided an in-depth examination of the compensation challenges in two-stage CMOS operational amplifiers, particularly addressing the complications arising from the feedforward path formed by the compensation capacitor. This path can lead to a right-half-plane zero, which affects the amplifier's stability and frequency response. The text proposed the use of a source follower as a solution to shift this zero to a much higher frequency, thereby improving the amplifier's performance.\n\nThe text also delved into the simplification of the circuit for analytical purposes and presented the resulting equations that describe the amplifier's behavior. It further discussed the implementation of a common-gate stage to isolate DC levels and enhance the amplifier's frequency response. Additionally, the text addressed slewing issues related to the output voltage and the associated power dissipation concerns."
},
{
    "text": "The challenge with compensating two-stage CMOS operational amplifiers stems from the feedforward path created by the compensation capacitor, as depicted in Figure 10.41(a). If the capacitor $C_C$ could allow current to flow from the output node to node $X$ and not the reverse, the zero would shift to a much higher frequency. As illustrated in Figure 10.41(b), this can be achieved by placing a source follower in series with the capacitor. Given that the gate-source capacitance of $M_2$ is usually much smaller than $C_C$, we anticipate the right-half-plane zero to manifest at high frequencies. Assuming $\\gamma=\\lambda=0$ for the source follower,Figure 10.42 $-g_{m1} V_1=V_{\\text{out}}\\left(R_L^{-1}+C_L s\\right)$\n\n$$\n\\begin{equation*}\nV_1=\\frac{-V_{\\text{out}}}{g_{m1} R_L}\\left(1+R_L C_L s\\right) \\tag{10.39}\n\\end{equation*}\n$$\n\n10.41(a)$C_C$NMOS$M_1$$V_{DD}$$I_1$$V_{out}$\n\n10.41(b)\nThe challenge in compensating two-stage CMOS operational amplifiers is rooted\nThe challenge in compensating two-stage CMOS operational amplifiers is"
}
]