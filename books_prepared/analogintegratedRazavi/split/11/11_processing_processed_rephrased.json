[

{
    "text": "In Chapter 2, we examined the fundamental operation of MOSFETs, incorporating several second-order effects. Our analysis resulted in a large-signal model (comprising the triode-region quadratic equation and the saturation-region square-law relation), which is essential in two scenarios: (1) when the transistor undergoes significant voltage (or current) variations due to input or output signals, deviating from the small-signal model, or (2) when the transistor requires specific terminal voltages for biasing to conduct a designated current. In analog design, the first scenario happens occasionally, whereas the second is nearly always present.\n\nThe large-signal behavior of nanometer-scale MOSFETs markedly differs from the \"long-channel\" model we developed. Due to technology scaling, i.e., the reduction in MOS dimensions, additional effects beyond those covered in Chapter 2 emerge, thereby modifying the I/V characteristics. For instance, Fig. 11.1 illustrates the actual $I_{D}-V_{D S}$ characteristics of an NFET with $W / L=5 \\mu \\mathrm{~m} / 40$ nm and $V_{T H} \\approx 300 \\mathrm{mV}$ (using a BSIM4 model) compared to a \"best-fit\" long-channel square-law approximation. We notice a considerable divergence between the two. Consequently, even if we are not focused on the large-signal analysis of a circuit, we still encounter the challenge of bias calculations using the square-law model.\n\nIn this section, we briefly explore several \"short-channel\" effects that render the long-channel model inaccurate. A comprehensive discussion of short-channel effects is postponed to Chapter 17. It is crucial to recognize that the MOS small-signal model from Chapter 2 remains applicable to short-channel devices and, as demonstrated throughout this book, is sufficient for the preliminary analysis of many analog circuit blocks. However, the equations linking $g_{m}$ and $r_{O}$ to the bias conditions need to be updated.\n\nThe graph in Figure 11.1 depicts the I-V characteristics for a 5-μm/40-nm MOS device. It compares the actual device characteristics (shown with black curves) to a best-fit square-law model (shown with gray curves). The x-axis represents the drain-source voltage, $V_{DS}$, in volts (V), ranging from 0 to 1 V. The y-axis represents the drain current, $I_{D}$, in milliamperes (mA), ranging from 0 to 3.5 mA.\n\nThe graph includes multiple curves, each corresponding to different gate-source voltages, $V_{GS}$, which increase from 300 mV to 800 mV in 100-mV increments. These values are clearly marked on the right side of the graph.\n\nThe curves generally show an initial rapid rise in $I_{D}$ as $V_{DS}$ increases from 0 V, followed by a leveling off, indicating channel-length modulation effects. The actual device curves (black) exhibit more pronounced leveling than the square-law model (gray), highlighting deviations from ideal behavior due to short-channel effects.\n\nKey features include the 'knee' points on each curve, serving as approximate boundaries between the triode and saturation regions. These knee points are less distinct in the actual device curves, complicating the differentiation between operating regions. The overall trend shows that higher $V_{GS}$ values lead to higher $I_{D}$ for a given $V_{DS}$, consistent with MOSFET behavior.\n\nFigure 11.1 I-V characteristics of an actual 5- $\\mu \\mathrm{m} / 40-\\mathrm{nm}$ device (black curves) and a best-fit square-law device (gray curves). ( $V_{G S}$ is incremented from 300 mV to 800 mV in $100-\\mathrm{mV}$ steps.)\n\nThe characteristics shown in Fig. 11.1 reveal significant channel-length modulation for the actual 40nm devices, making it challenging to distinguish between the triode and saturation regions. However, we can identify a \"knee\" point on each curve as a rough boundary. Figure 11.2 plots the actual $40-\\mathrm{nm}$ device characteristics for a narrower $V_{G S}$ range, specifically, $V_{G S}-V_{T H}=50 \\mathrm{mV}, 100 \\mathrm{mV}, \\cdots, 350 \\mathrm{mV}$. We observe knee points below $V_{D S}=0.2 \\mathrm{~V}$. (Here, $W=5 \\mu \\mathrm{~m}$ and $V_{T H} \\approx 200 \\mathrm{mV}$.)\n\nThe graph in Figure 11.2 presents the I-V characteristics for a 5-micrometer by 40-nanometer device, illustrating the relationship between the drain current ($I_D$) and the drain-source voltage ($V_{DS}$) for various gate-source voltage ($V_{GS}$) levels. The x-axis shows $V_{DS}$ in volts, ranging from 0 to 1 V, while the y-axis displays $I_D$ in milliamperes (mA), ranging from 0 to 1.2 mA, both on a linear scale.\n\nThe plot features several curves, each corresponding to a different $V_{GS} - V_{TH}$ value, ranging from 50 mV to 350 mV in 50-mV increments. The curves exhibit typical MOSFET behavior, starting at the origin and initially rising sharply, indicating the triode region. As $V_{DS}$ increases, the curves gradually flatten, signifying the transition into the saturation region.\n\nThe knee point, marking the transition from the triode to the saturation region, is observed below $V_{DS} = 0.2$ V for all curves. As $V_{GS}$ increases, the curves shift upwards, indicating higher drain currents for higher gate-source voltages.\n\nOverall, the graph demonstrates the expected behavior of MOSFET devices, highlighting the influence of varying $V_{GS}$ on the drain current and the clear delineation between the triode and saturation regions at lower $V_{DS}$ values.\n\nFigure 11.2 I-V characteristics of a $5-\\mu \\mathrm{m} / 40-\\mathrm{nm}$ device for $V_{G S}-V_{T H}=50, \\cdots, 350 \\mathrm{mV}$."
},
{
    "text": "In Chapter 2, we examined the fundamental operations of MOSFETs, incorporating several second-order effects. Our analysis resulted in a large-signal model (comprising the triode-region quadratic equation and the saturation-region square-law relation), which is essential in two scenarios: (1) when the transistor undergoes significant voltage (or current) variations due to input or output signals, deviating from the small-signal model, or (2) when the transistor requires specific terminal voltages for biasing to maintain a designated current. In analog design, the first scenario arises occasionally, whereas the second is nearly always present.\n\nThe large-signal behavior of nanometer-scale MOSFETs notably diverges from the \"long-channel\" model we have established. Due to technology scaling, specifically the reduction in MOS dimensions, additional effects beyond those discussed in Chapter 2 emerge, thereby modifying the I/V characteristics. For instance, Fig. 11.1 illustrates the actual $I_{D}-V_{D S}$ characteristics of an NFET with $W / L=5 \\mu \\mathrm{~m} / 40$ nm and $V_{T H} \\approx 300 \\mathrm{mV}$ (using a BSIM4 model) compared to a \"best-fit\" long-channel square-law approximation. We notice a considerable discrepancy between the two. Consequently, even if we are not focused on the large-signal analysis of a circuit, we still encounter the challenge of bias calculations using the square-law model.\n\nIn this section, we briefly explore several \"short-channel\" effects that render the long-channel model inaccurate. A comprehensive discussion of short-channel effects is postponed to Chapter 17. It is crucial to recognize that the MOS small-signal model developed in Chapter 2 remains applicable to short-channel devices and, as demonstrated throughout this book, is sufficient for the preliminary analysis of many analog circuit blocks. However, the equations linking $g_{m}$ and $r_{O}$ to the bias conditions need to be updated.\n\n**Figure 11.1 Description:**\nThe graph in Figure 11.1 depicts the I-V characteristics of a 5-μm/40-nm MOS device. It compares the actual device characteristics (shown with black curves) to a best-fit square-law model (shown with gray curves). The x-axis measures the drain-source voltage, $V_{DS}$, in volts (V), ranging from 0 to 1 V. The y-axis measures the drain current, $I_{D}$, in milliamperes (mA), ranging from 0 to 3.5 mA.\n\nThe graph includes multiple curves, each corresponding to different gate-source voltages, $V_{GS}$, which increase from 300 mV to 800 mV in 100-mV increments. These values are clearly marked on the right side of the graph.\n\nThe curves generally show an initial rapid rise in $I_{D}$ as $V_{DS}$ increases from 0 V, followed by a leveling off, indicating channel-length modulation effects. The actual device curves (black) exhibit a more pronounced leveling compared to the square-law model (gray), highlighting deviations from ideal behavior due to short-channel effects.\n\nKey features include the 'knee' points on each curve, serving as approximate boundaries between the triode and saturation regions. These knee points are less distinct in the actual device curves, complicating the differentiation between operating regions. The overall trend indicates that higher $V_{GS}$ values lead to higher $I_{D}$ for a given $V_{DS}$, consistent with MOSFET behavior.\n\n**Figure 11.1:** I-V characteristics of an actual 5- $\\mu \\mathrm{m} / 40-\\mathrm{nm}$ device (black curves) and a best-fit square-law device (gray curves). ($V_{G S}$ is incremented from 300 mV to 800 mV in $100-\\mathrm{mV}$ steps.)\n\nThe characteristics shown in Fig. 11.1 reveal significant channel-length modulation for the actual 40nm devices, making it challenging to distinguish between the triode and saturation regions. However, we can identify a \"knee\" point on each curve as a rough boundary. **Figure 11.2** plots the actual $40-\\mathrm{nm}$ device characteristics for a narrower $V_{G S}$ range, specifically $V_{G S}-V_{T H}=50 \\mathrm{mV}, 100 \\mathrm{mV}, \\cdots, 350 \\mathrm{mV}$. We observe knee points below $V_{D S}=0.2 \\mathrm{~V}$. (Here, $W=5 \\mu \\mathrm{~m}$ and $V_{T H} \\approx 200 \\mathrm{mV}$.)\n\n**Figure 11.2 Description:**\nThe graph in Figure 11.2 presents the I-V characteristics of a 5-micrometer by 40-nanometer device, illustrating the relationship between the drain current ($I_D$) and the drain-source voltage ($V_{DS}$) for various gate-source voltage ($V_{GS}$) levels. The x-axis represents $V_{DS}$ in volts, ranging from 0 to 1 V, while the y-axis represents $I_D$ in milliamperes (mA), ranging from 0 to 1.2 mA, both using a linear scale.\n\nThe plot comprises several curves, each corresponding to a different $V_{GS} - V_{TH}$ value, ranging from 50 mV to 350 mV in 50-mV increments. The curves display typical MOSFET behavior, starting at the origin and initially rising sharply, indicating the triode region. As $V_{DS}$ increases, the curves gradually flatten, signifying the transition into the saturation region.\n\nThe knee point, marking the transition from the triode to the saturation region, is observed below $V_{DS} = 0.2$ V for all curves. As $V_{GS}$ increases, the curves shift upwards, indicating higher drain currents for higher gate-source voltages.\n\nOverall, the graph demonstrates the expected behavior of MOSFET devices, emphasizing the influence of varying $V_{GS}$ on the drain current and the clear delineation between the triode and saturation regions at lower $V_{DS}$ values.\n\n**Figure 11.2:** I-V characteristics of a $5-\\mu \\mathrm{m} / 40-\\mathrm{nm}$ device for $V_{G S}-V_{T H}=50, \\cdots, 350 \\mathrm{mV}$."
},
{
    "text": "In Chapter 2, we explored the fundamental operations of MOSFETs, incorporating several second-order effects. Our analysis resulted in a large-signal model (comprising the triode-region quadratic equation and the saturation-region square-law relation), which is essential in two scenarios: (1) when the transistor undergoes significant voltage (or current) variations due to input or output signals, deviating from the small-signal model, or (2) when the transistor requires specific terminal voltages for biasing to maintain a designated current. In analog design, the first scenario arises occasionally, whereas the second is nearly always present.\n\nThe large-signal behavior of nanometer-scale MOSFETs markedly differs from the \"long-channel\" model we developed. Due to technology scaling, i.e., the reduction in MOS dimensions, additional effects beyond those covered in Chapter 2 emerge, altering the I/V characteristics. For instance, Fig. 11.1 illustrates the actual $I_{D}-V_{D S}$ characteristics of an NFET with $W / L=5 \\mu \\mathrm{~m} / 40$ nm and $V_{T H} \\approx 300 \\mathrm{mV}$ (using a BSIM4 model) compared to a \"best-fit\" long-channel square-law approximation. We note a significant divergence between the two. Consequently, even if large-signal analysis is not our focus, we still encounter challenges in bias calculations using the square-law model.\n\nIn this section, we briefly examine several \"short-channel\" effects that render the long-channel model inaccurate. A comprehensive discussion of short-channel effects is postponed to Chapter 17. It is crucial to recognize that the MOS small-signal model from Chapter 2 remains applicable to short-channel devices and, as demonstrated throughout this book, is sufficient for the preliminary analysis of many analog circuit blocks. However, the expressions linking $g_{m}$ and $r_{O}$ to the bias conditions need to be updated.\n\n**Figure 11.1 Description:**\nThe graph in Figure 11.1 depicts the I-V characteristics for a 5-μm/40-nm MOS device. It compares the actual device characteristics (shown with black curves) to a best-fit square-law model (shown with gray curves). The x-axis measures the drain-source voltage, $V_{DS}$, in volts (V), ranging from 0 to 1 V. The y-axis measures the drain current, $I_{D}$, in milliamperes (mA), ranging from 0 to 3.5 mA.\n\nThe graph includes multiple curves, each corresponding to different gate-source voltages, $V_{GS}$, which increase from 300 mV to 800 mV in 100-mV increments. These values are clearly marked on the right side of the graph.\n\nThe curves generally show an initial rapid rise in $I_{D}$ as $V_{DS}$ increases from 0 V, followed by a gradual leveling off, indicating channel-length modulation effects. The actual device curves (black) exhibit a more pronounced leveling than the square-law model (gray), highlighting deviations from ideal behavior due to short-channel effects.\n\nKey features include the 'knee' points on each curve, serving as approximate boundaries between the triode and saturation regions. These knee points are less distinct in the actual device curves, complicating the identification of operating regions. The overall trend indicates that higher $V_{GS}$ values lead to higher $I_{D}$ for a given $V_{DS}$, consistent with MOSFET behavior.\n\n**Figure 11.1: I-V characteristics of an actual 5- $\\mu \\mathrm{m} / 40-\\mathrm{nm}$ device (black curves) and a best-fit square-law device (gray curves). ($V_{G S}$ is incremented from 300 mV to 800 mV in $100-\\mathrm{mV}$ steps.)\n\nThe characteristics in Fig. 11.1 reveal significant channel-length modulation for the actual 40nm devices, making it challenging to distinguish between the triode and saturation regions. However, we can identify a \"knee\" point on each curve as a rough boundary. Figure 11.2 plots the actual $40-\\mathrm{nm}$ device characteristics for a narrower $V_{G S}$ range, specifically, $V_{G S}-V_{T H}=50 \\mathrm{mV}, 100 \\mathrm{mV}, \\cdots, 350 \\mathrm{mV}$. We observe knee points below $V_{D S}=0.2 \\mathrm{~V}$. (Here, $W=5 \\mu \\mathrm{~m}$ and $V_{T H} \\approx 200 \\mathrm{mV}$.)\n\n**Figure 11.2 Description:**\nThe graph in Figure 11.2 presents the I-V characteristics for a 5-micrometer by 40-nanometer device, illustrating the relationship between the drain current ($I_D$) and the drain-source voltage ($V_{DS}$) for various gate-source voltage ($V_{GS}$) levels. The x-axis represents $V_{DS}$ in volts, ranging from 0 to 1 V, while the y-axis represents $I_D$ in milliamperes (mA), ranging from 0 to 1.2 mA, both on a linear scale.\n\nThe plot features several curves, each corresponding to a different $V_{GS} - V_{TH}$ value, ranging from 50 mV to 350 mV in 50-mV increments. The curves display typical MOSFET behavior, starting at the origin and initially increasing sharply, indicating the triode region. As $V_{DS}$ increases, the curves gradually flatten, marking the transition into the saturation region.\n\nThe knee point, signifying the transition from the triode to the saturation region, is observed below $V_{DS} = 0.2$ V for all curves. With increasing $V_{GS}$, the curves shift upwards, indicating higher drain currents for higher gate-source voltages.\n\nOverall, the graph demonstrates the expected behavior of MOSFET devices, emphasizing the influence of varying $V_{GS}$ on the drain current and the clear delineation between the triode and saturation regions at lower $V_{DS}$ values.\n\n**Figure 11.2: I-V characteristics of a $5-\\mu \\mathrm{m} / 40-\\mathrm{nm}$ device for $V_{G S}-V_{T H}=50, \\cdots, 350 \\mathrm{mV}$.**"
},
{
    "text": "In Chapter 2, we explored the fundamental operations of MOSFETs, incorporating several second-order effects. Our analysis resulted in a large-signal model, which includes the triode-region quadratic equation and the saturation-region square-law relation. This model is essential in two scenarios: (1) when the transistor undergoes significant voltage (or current) variations due to input or output signals, deviating from the small-signal model, or (2) when the transistor requires specific terminal voltages to maintain a designated current during biasing. In analog design, the first scenario happens occasionally, whereas the second is nearly always present.\n\nThe large-signal behavior of nanometer-scale MOSFETs markedly differs from the \"long-channel\" model we developed. Due to technology scaling, or the reduction of MOS dimensions, additional effects beyond those discussed in Chapter 2 emerge, altering the I/V characteristics. For instance, Fig. 11.1 illustrates the actual $I_{D}-V_{D S}$ characteristics of an NFET with $W / L=5 \\mu \\mathrm{~m} / 40$ nm and $V_{T H} \\approx 300 \\mathrm{mV}$ (using a BSIM4 model) compared to a \"best-fit\" long-channel square-law approximation. We notice a significant divergence between the two. Therefore, even if large-signal analysis is not our focus, we still encounter issues with bias calculations using the square-law model.\n\nIn this section, we briefly examine several \"short-channel\" effects that render the long-channel model inaccurate. A comprehensive discussion of short-channel effects is postponed to Chapter 17. It is crucial to recognize that the MOS small-signal model from Chapter 2 remains applicable to short-channel devices and, as demonstrated throughout this book, is sufficient for the preliminary analysis of many analog circuit blocks. However, the expressions linking $g_{m}$ and $r_{O}$ to the bias conditions need modification.\n\n**Figure 11.1 Description:**\nThe graph in Figure 11.1 depicts the I-V characteristics of a 5-μm/40-nm MOS device. It compares the actual device characteristics (shown with black curves) to a best-fit square-law model (shown with gray curves). The x-axis measures the drain-source voltage, $V_{DS}$, in volts (V), ranging from 0 to 1 V. The y-axis measures the drain current, $I_{D}$, in milliamperes (mA), ranging from 0 to 3.5 mA.\n\nThe graph includes multiple curves, each corresponding to different gate-source voltages, $V_{GS}$, incrementing from 300 mV to 800 mV in 100-mV steps. These values are clearly marked on the right side of the graph.\n\nThe curves generally show an initial rapid rise in $I_{D}$ as $V_{DS}$ increases from 0 V, followed by a leveling off, indicating channel-length modulation effects. The actual device curves (black) exhibit more pronounced leveling than the square-law model (gray), highlighting deviations from ideal behavior due to short-channel effects.\n\nKey features include the 'knee' points on each curve, serving as approximate boundaries between the triode and saturation regions. These knee points are less distinct in the actual device curves, complicating the differentiation between operating regions. The overall trend shows that higher $V_{GS}$ values lead to higher $I_{D}$ for a given $V_{DS}$, consistent with MOSFET behavior.\n\n**Figure 11.1:**\nI-V characteristics of an actual 5- $\\mu \\mathrm{m} / 40-\\mathrm{nm}$ device (black curves) and a best-fit square-law device (gray curves). ($V_{G S}$ is incremented from 300 mV to 800 mV in $100-\\mathrm{mV}$ steps.)\n\nThe characteristics in Fig. 11.1 reveal severe channel-length modulation for the actual 40nm devices, making it challenging to distinguish between the triode and saturation regions. However, a \"knee\" point can be associated with each curve as a rough boundary. Figure 11.2 plots the actual $40-\\mathrm{nm}$ device characteristics for a narrower $V_{G S}$ range, specifically, $V_{G S}-V_{T H}=50 \\mathrm{mV}, 100 \\mathrm{mV}, \\cdots, 350 \\mathrm{mV}$. Knee points are observed below $V_{D S}=0.2 \\mathrm{~V}$. (Here, $W=5 \\mu \\mathrm{~m}$ and $V_{T H} \\approx 200 \\mathrm{mV}$.)\n\n**Figure 11.2 Description:**\nThe graph in Figure 11.2 presents the I-V characteristics of a 5-micrometer by 40-nanometer device, showing the relationship between the drain current ($I_D$) and the drain-source voltage ($V_{DS}$) for various gate-source voltage ($V_{GS}$) levels. The x-axis represents $V_{DS}$ in volts, ranging from 0 to 1 V, while the y-axis represents $I_D$ in milliamperes (mA), ranging from 0 to 1.2 mA, both on a linear scale.\n\nThe plot comprises several curves, each corresponding to a different $V_{GS} - V_{TH}$ value, ranging from 50 mV to 350 mV in 50-mV increments. The curves display typical MOSFET behavior, starting at the origin and initially increasing sharply, indicating the triode region. As $V_{DS}$ increases, the curves gradually flatten, marking the transition into the saturation region.\n\nThe knee point, which signifies the transition from the triode to the saturation region, is visible below $V_{DS} = 0.2$ V for all curves. As $V_{GS}$ increases, the curves shift upwards, indicating higher drain currents for higher gate-source voltages.\n\nOverall, the graph illustrates the expected behavior of MOSFET devices, emphasizing the impact of varying $V_{GS}$ on the drain current and the clear delineation between the triode and saturation regions at lower $V_{DS}$ values.\n\n**Figure 11.2:**\nI-V characteristics of a $5-\\mu \\mathrm{m} / 40-\\mathrm{nm}$ device for $V_{G S}-V_{T H}=50, \\cdots, 350 \\mathrm{mV}$."
},
{
    "text": "In Chapter 2, we explored the fundamental operations of MOSFETs, incorporating several second-order effects. Our analysis yielded a large-signal model, which includes the triode-region quadratic equation and the saturation-region square-law relation. This model is essential in two scenarios: (1) when the transistor undergoes significant voltage or current variations due to input or output signals, deviating from the small-signal model, or (2) when the transistor requires specific terminal voltages to maintain a designated current during biasing. In analog design, the first scenario is occasional, whereas the second is nearly constant.\n\nThe large-signal behavior of nanometer-scale MOSFETs significantly diverges from the \"long-channel\" model we developed. Due to technology scaling, which involves reducing MOS dimensions, additional effects beyond those discussed in Chapter 2 emerge, altering the I/V characteristics. For instance, Fig. 11.1 illustrates the actual $I_{D}-V_{D S}$ characteristics of an NFET with $W / L=5 \\mu \\mathrm{~m} / 40$ nm and $V_{T H} \\approx 300 \\mathrm{mV}$ (using a BSIM4 model) compared to a \"best-fit\" long-channel square-law approximation. The discrepancy between the two is notable. Consequently, even if large-signal analysis is not our focus, we still encounter challenges with bias calculations using the square-law model.\n\nIn this section, we briefly examine several \"short-channel\" effects that render the long-channel model inaccurate. A comprehensive discussion of short-channel effects is postponed to Chapter 17. It is crucial to recognize that the MOS small-signal model from Chapter 2 remains applicable to short-channel devices and is sufficient for the preliminary analysis of many analog circuit blocks. However, the equations linking $g_{m}$ and $r_{O}$ to the bias conditions need revision.\n\nThe graph in Figure 11.1 depicts the I-V characteristics of a 5-μm/40-nm MOS device. It compares the actual device characteristics (shown with black curves) to a best-fit square-law model (shown with gray curves). The x-axis represents the drain-source voltage, $V_{DS}$, in volts (V), ranging from 0 to 1 V. The y-axis represents the drain current, $I_{D}$, in milliamperes (mA), ranging from 0 to 3.5 mA.\n\nThe graph comprises multiple curves, each corresponding to different gate-source voltages, $V_{GS}$, which increase from 300 mV to 800 mV in 100-mV increments. These values are clearly marked on the right side of the graph.\n\nThe curves generally show an initial rapid rise in $I_{D}$ as $V_{DS}$ increases from 0 V, followed by a gradual leveling off, indicating channel-length modulation effects. The actual device curves (black) exhibit more pronounced leveling than the square-law model (gray), highlighting deviations from ideal behavior due to short-channel effects.\n\nKey features include the 'knee' points on each curve, serving as approximate boundaries between the triode and saturation regions. These knee points are less distinct in the actual device curves, complicating the differentiation between operating regions. The overall trend indicates that higher $V_{GS}$ values result in higher $I_{D}$ for a given $V_{DS}$, consistent with MOSFET behavior.\n\nFigure 11.1 I-V characteristics of an actual 5- $\\mu \\mathrm{m} / 40-\\mathrm{nm}$ device (black curves) and a best-fit square-law device (gray curves). ($V_{G S}$ is incremented from 300 mV to 800 mV in $100-\\mathrm{mV}$ steps.)\n\nThe characteristics shown in Fig. 11.1 reveal significant channel-length modulation for the actual 40nm devices, making it challenging to distinguish between the triode and saturation regions. However, a \"knee\" point can be associated with each curve as a rough boundary. Figure 11.2 presents the actual $40-\\mathrm{nm}$ device characteristics for a narrower $V_{G S}$ range, specifically $V_{G S}-V_{T H}=50 \\mathrm{mV}, 100 \\mathrm{mV}, \\cdots, 350 \\mathrm{mV}$. Knee points are observed below $V_{D S}=0.2 \\mathrm{~V}$. (Here, $W=5 \\mu \\mathrm{~m}$ and $V_{T H} \\approx 200 \\mathrm{mV}$.)\n\nThe graph in Figure 11.2 shows the I-V characteristics of a 5-micrometer by 40-nanometer device, illustrating the relationship between the drain current ($I_D$) and the drain-source voltage ($V_{DS}$) for various gate-source voltage ($V_{GS}$) levels. The x-axis represents $V_{DS}$ in volts, ranging from 0 to 1 V, while the y-axis represents $I_D$ in milliamperes (mA), ranging from 0 to 1.2 mA, both on a linear scale.\n\nThe plot includes several curves, each corresponding to a different $V_{GS} - V_{TH}$ value, ranging from 50 mV to 350 mV in 50-mV increments. The curves display typical MOSFET behavior, starting at the origin and initially increasing sharply, indicating the triode region. As $V_{DS}$ increases, the curves gradually flatten, signifying the transition into the saturation region.\n\nThe knee point, marking the transition from the triode to the saturation region, is evident below $V_{DS} = 0.2$ V for all curves. As $V_{GS}$ increases, the curves shift upwards, indicating higher drain currents for higher gate-source voltages.\n\nOverall, the graph demonstrates the expected behavior of MOSFET devices, highlighting the influence of varying $V_{GS}$ on the drain current and the clear delineation between the triode and saturation regions at lower $V_{DS}$ values.\n\nFigure 11.2 I-V characteristics of a $5-\\mu \\mathrm{m} / 40-\\mathrm{nm}$ device for $V_{G S}-V_{T H}=50, \\cdots, 350 \\mathrm{mV}$."
},
{
    "text": "In Chapter 2, we examined the fundamental operation of MOSFETs, incorporating several second-order effects. Our analysis resulted in a large-signal model, which includes the triode-region quadratic equation and the saturation-region square-law relation, essential in two scenarios: (1) when the transistor undergoes significant voltage (or current) variations due to input or output signals, deviating from the small-signal model, or (2) when the transistor needs to be biased, requiring specific terminal voltages to maintain a designated current. In analog design, the first scenario occurs occasionally, whereas the second is nearly always present.\n\nThe large-signal behavior of nanometer-scale MOSFETs significantly diverges from the \"long-channel\" model we developed. Due to technology scaling, or the reduction of MOS dimensions, additional effects beyond those covered in Chapter 2 emerge, altering the I/V characteristics. For instance, Fig. 11.1 illustrates the actual $I_{D}-V_{D S}$ characteristics of an NFET with $W / L=5 \\mu \\mathrm{~m} / 40$ nm and $V_{T H} \\approx 300 \\mathrm{mV}$ (using a BSIM4 model) compared to a \"best-fit\" long-channel square-law approximation. We note a considerable discrepancy between the two. Thus, even if we are not focused on large-signal circuit analysis, we still encounter the challenge of bias calculations using the square-law model.\n\nIn this section, we briefly explore several \"short-channel\" effects that render the long-channel model inaccurate. A comprehensive discussion of short-channel effects is postponed to Chapter 17. It is crucial to recognize that the MOS small-signal model from Chapter 2 remains applicable to short-channel devices and, as demonstrated throughout this book, is sufficient for the preliminary analysis of many analog circuit blocks. However, the expressions linking $g_{m}$ and $r_{O}$ to the bias conditions need revision.\n\nThe graph in Figure 11.1 depicts the I-V characteristics of a 5-μm/40-nm MOS device. It compares the actual device characteristics (shown with black curves) to a best-fit square-law model (shown with gray curves). The x-axis represents the drain-source voltage, $V_{DS}$, in volts (V), ranging from 0 to 1 V. The y-axis represents the drain current, $I_{D}$, in milliamperes (mA), ranging from 0 to 3.5 mA.\n\nThe plot includes multiple curves, each corresponding to different gate-source voltages, $V_{GS}$, which increase from 300 mV to 800 mV in 100-mV increments. These values are clearly marked on the right side of the graph.\n\nThe curves generally show an initial rapid rise in $I_{D}$ as $V_{DS}$ increases from 0 V, followed by a leveling off, indicating channel-length modulation effects. The actual device curves (black) exhibit more pronounced leveling than the square-law model (gray), highlighting deviations from ideal behavior due to short-channel effects.\n\nKey features include the 'knee' points on each curve, serving as approximate boundaries between the triode and saturation regions. These knee points are less distinct in the actual device curves, complicating the differentiation between operating regions. The overall trend indicates that higher $V_{GS}$ values result in higher $I_{D}$ for a given $V_{DS}$, consistent with MOSFET behavior.\n\nFigure 11.1 I-V characteristics of an actual 5- $\\mu \\mathrm{m} / 40-\\mathrm{nm}$ device (black curves) and a best-fit square-law device (gray curves). ( $V_{G S}$ is incremented from 300 mV to 800 mV in $100-\\mathrm{mV}$ steps.)\n\nThe characteristics shown in Fig. 11.1 reveal significant channel-length modulation for the actual 40nm devices, making it challenging to distinguish between the triode and saturation regions. However, we can identify a \"knee\" point on each curve as a rough boundary. Figure 11.2 presents the actual $40-\\mathrm{nm}$ device characteristics for a narrower $V_{G S}$ range, specifically, $V_{G S}-V_{T H}=50 \\mathrm{mV}, 100 \\mathrm{mV}, \\cdots, 350 \\mathrm{mV}$. We observe knee points below $V_{D S}=0.2 \\mathrm{~V}$. (Here, $W=5 \\mu \\mathrm{~m}$ and $V_{T H} \\approx 200 \\mathrm{mV}$.)\n\nThe graph in Figure 11.2 illustrates the I-V characteristics of a 5-micrometer by 40-nanometer device, showing the relationship between the drain current ($I_D$) and the drain-source voltage ($V_{DS}$) for various gate-source voltage ($V_{GS}$) levels. The x-axis represents $V_{DS}$ in volts, ranging from 0 to 1 V, while the y-axis represents $I_D$ in milliamperes (mA), ranging from 0 to 1.2 mA, both on a linear scale.\n\nThe plot comprises several curves, each corresponding to a different $V_{GS} - V_{TH}$ value, ranging from 50 mV to 350 mV in 50-mV increments. The curves display typical MOSFET behavior, starting at the origin and initially increasing sharply, indicating the triode region. As $V_{DS}$ increases, the curves gradually flatten, signifying the transition into the saturation region.\n\nThe knee point, marking the transition from the triode to the saturation region, is observed below $V_{DS} = 0.2$ V for all curves. As $V_{GS}$ increases, the curves shift upwards, indicating higher drain currents for higher gate-source voltages.\n\nOverall, the graph demonstrates the expected behavior of MOSFET devices, emphasizing the influence of varying $V_{GS}$ on the drain current and the clear delineation between the triode and saturation regions at lower $V_{DS}$ values.\n\nFigure 11.2 I-V characteristics of a $5-\\mu \\mathrm{m} / 40-\\mathrm{nm}$ device for $V_{G S}-V_{T H}=50, \\cdots, 350 \\mathrm{mV}$."
},
{
    "text": "In Chapter 2, we explored the fundamental operation of MOSFETs and incorporated several secondary effects. Our analysis resulted in a large-signal model, which includes the triode-region quadratic equation and the saturation-region square-law relation. This model is essential in two scenarios: (1) when the transistor undergoes significant voltage (or current) variations due to input or output signals, deviating from the small-signal model, or (2) when the transistor requires specific terminal voltages to maintain a designated current during biasing. In analog design, the first scenario occurs occasionally, whereas the second is nearly always present.\n\nThe large-signal behavior of nanometer-scale MOSFETs markedly differs from the \"long-channel\" model we have established. Due to technology scaling, which involves reducing MOS dimensions, additional effects beyond those discussed in Chapter 2 emerge, altering the I/V characteristics. For instance, Fig. 11.1 depicts the actual $I_{D}-V_{D S}$ characteristics of an NFET with $W / L=5 \\mu \\mathrm{~m} / 40$ nm and $V_{T H} \\approx 300 \\mathrm{mV}$ (using a BSIM4 model) compared to a \"best-fit\" long-channel square-law approximation. We note a significant divergence between the two. Consequently, even if large-signal analysis is not our focus, we still encounter challenges with bias calculations using the square-law model.\n\nIn this section, we briefly examine several \"short-channel\" effects that render the long-channel model inaccurate. A comprehensive discussion of short-channel effects is postponed to Chapter 17. It is crucial to recognize that the MOS small-signal model from Chapter 2 remains applicable to short-channel devices and, as demonstrated throughout this book, is sufficient for the preliminary analysis of many analog circuit blocks. However, the equations linking $g_{m}$ and $r_{O}$ to the bias conditions need revision.\n\n**Figure 11.1 Description:**\nThe graph in Figure 11.1 illustrates the I-V characteristics for a 5-μm/40-nm MOS device. It compares the actual device characteristics (shown with black curves) to a best-fit square-law model (shown with gray curves). The x-axis displays the drain-source voltage, $V_{DS}$, in volts (V), ranging from 0 to 1 V. The y-axis shows the drain current, $I_{D}$, in milliamperes (mA), ranging from 0 to 3.5 mA.\n\nThe graph features multiple curves, each corresponding to different gate-source voltages, $V_{GS}$, which increase from 300 mV to 800 mV in 100-mV increments. These values are clearly marked on the right side of the graph.\n\nThe curves exhibit an initial rapid rise in $I_{D}$ as $V_{DS}$ increases from 0 V, followed by a leveling off, indicating channel-length modulation effects. The actual device curves (black) show a more pronounced leveling than the square-law model (gray), highlighting deviations from ideal behavior due to short-channel effects.\n\nKey features include the 'knee' points on each curve, serving as approximate boundaries between the triode and saturation regions. These knee points are less distinct in the actual device curves, complicating the differentiation between operating regions. The overall trend indicates that higher $V_{GS}$ values lead to higher $I_{D}$ for a given $V_{DS}$, consistent with MOSFET behavior.\n\n**Figure 11.1: I-V characteristics of an actual 5- $\\mu \\mathrm{m} / 40-\\mathrm{nm}$ device (black curves) and a best-fit square-law device (gray curves). ($V_{G S}$ is incremented from 300 mV to 800 mV in $100-\\mathrm{mV}$ steps.)**\n\nThe characteristics in Fig. 11.1 reveal pronounced channel-length modulation for the actual 40nm devices, making it challenging to distinguish between the triode and saturation regions. However, we can identify a \"knee\" point on each curve as a rough boundary. Figure 11.2 presents the actual $40-\\mathrm{nm}$ device characteristics for a narrower $V_{G S}$ range, specifically $V_{G S}-V_{T H}=50 \\mathrm{mV}, 100 \\mathrm{mV}, \\cdots, 350 \\mathrm{mV}$. Knee points are observed below $V_{D S}=0.2 \\mathrm{~V}$. (Here, $W=5 \\mu \\mathrm{~m}$ and $V_{T H} \\approx 200 \\mathrm{mV}$.)\n\n**Figure 11.2 Description:**\nThe graph in Figure 11.2 shows the I-V characteristics for a 5-micrometer by 40-nanometer device, illustrating the relationship between the drain current ($I_D$) and the drain-source voltage ($V_{DS}$) for various gate-source voltage ($V_{GS}$) levels. The x-axis represents $V_{DS}$ in volts, ranging from 0 to 1 V, while the y-axis represents $I_D$ in milliamperes (mA), ranging from 0 to 1.2 mA, both on a linear scale.\n\nThe plot comprises several curves, each corresponding to a different $V_{GS} - V_{TH}$ value, ranging from 50 mV to 350 mV in 50-mV increments. The curves display typical MOSFET behavior, starting at the origin and initially rising sharply, indicating the triode region. As $V_{DS}$ increases, the curves gradually flatten, signifying the transition into the saturation region.\n\nThe knee point, marking the transition from the triode to the saturation region, is observed below $V_{DS} = 0.2$ V for all curves. As $V_{GS}$ increases, the curves shift upwards, indicating higher drain currents for higher gate-source voltages.\n\nOverall, the graph demonstrates the expected behavior of MOSFET devices, emphasizing the influence of varying $V_{GS}$ on the drain current and the clear delineation between the triode and saturation regions at lower $V_{DS}$ values.\n\n**Figure 11.2: I-V characteristics of a $5-\\mu \\mathrm{m} / 40-\\mathrm{nm}$ device for $V_{G S}-V_{T H}=50, \\cdots, 350 \\mathrm{mV}$.**"
},
{
    "text": "In Chapter 2, we examined the fundamental operations of MOSFETs, incorporating several second-order effects. Our analysis resulted in a large-signal model, which includes the triode-region quadratic equation and the saturation-region square-law relation. This model is essential in two scenarios: (1) when the transistor undergoes significant voltage or current variations due to input or output signals, deviating from the small-signal model, or (2) when the transistor requires specific terminal voltages to maintain a designated current during biasing. In analog design, the first scenario is occasional, whereas the second is nearly constant.\n\nThe large-signal behavior of nanometer-scale MOSFETs notably diverges from the \"long-channel\" model we developed. Due to technology scaling, specifically the reduction in MOS dimensions, additional effects beyond those covered in Chapter 2 emerge, altering the I/V characteristics. For instance, Fig. 11.1 illustrates the actual $I_{D}-V_{D S}$ characteristics of an NFET with $W / L=5 \\mu \\mathrm{~m} / 40$ nm and $V_{T H} \\approx 300 \\mathrm{mV}$ (using a BSIM4 model), compared to a \"best-fit\" long-channel square-law approximation. The discrepancy between the two is substantial. Consequently, even if large-signal analysis is not our focus, we still encounter challenges in bias calculations using the square-law model.\n\nIn this section, we briefly explore several \"short-channel\" effects that render the long-channel model inaccurate. A comprehensive discussion of short-channel effects is postponed to Chapter 17. It is crucial to recognize that the MOS small-signal model from Chapter 2 remains applicable to short-channel devices and, as demonstrated throughout this book, is sufficient for the preliminary analysis of many analog circuit blocks. However, the formulas linking $g_{m}$ and $r_{O}$ to the bias conditions need revision.\n\n**Figure 11.1 Description:**\nThe graph in Figure 11.1 depicts the I-V characteristics of a 5-μm/40-nm MOS device. It compares the actual device characteristics (shown with black curves) to a best-fit square-law model (shown with gray curves). The x-axis measures the drain-source voltage, $V_{DS}$, in volts (V), ranging from 0 to 1 V. The y-axis measures the drain current, $I_{D}$, in milliamperes (mA), ranging from 0 to 3.5 mA.\n\nThe graph includes multiple curves, each corresponding to different gate-source voltages, $V_{GS}$, which increase from 300 mV to 800 mV in 100-mV increments. These values are clearly marked on the right side of the graph.\n\nThe curves generally show an initial rapid rise in $I_{D}$ as $V_{DS}$ increases from 0 V, followed by a leveling off, indicating channel-length modulation effects. The actual device curves (black) exhibit more pronounced leveling than the square-law model (gray), highlighting deviations from ideal behavior due to short-channel effects.\n\nKey features include the 'knee' points on each curve, serving as approximate boundaries between the triode and saturation regions. These knee points are less distinct in the actual device curves, complicating the differentiation between operating regions. The overall trend shows that higher $V_{GS}$ values result in higher $I_{D}$ for a given $V_{DS}$, consistent with MOSFET behavior.\n\n**Figure 11.1:** I-V characteristics of an actual 5- $\\mu \\mathrm{m} / 40-\\mathrm{nm}$ device (black curves) and a best-fit square-law device (gray curves). ($V_{G S}$ is incremented from 300 mV to 800 mV in $100-\\mathrm{mV}$ steps.)\n\nThe characteristics in Fig. 11.1 reveal significant channel-length modulation for the actual 40nm devices, making it challenging to distinguish between the triode and saturation regions. However, a \"knee\" point can be associated with each curve as a rough boundary. Figure 11.2 plots the actual 40-nm device characteristics for a narrower $V_{G S}$ range, specifically $V_{G S}-V_{T H}=50 \\mathrm{mV}, 100 \\mathrm{mV}, \\cdots, 350 \\mathrm{mV}$. Knee points are observed below $V_{D S}=0.2 \\mathrm{~V}$. (Here, $W=5 \\mu \\mathrm{~m}$ and $V_{T H} \\approx 200 \\mathrm{mV}$.)\n\n**Figure 11.2 Description:**\nThe graph in Figure 11.2 presents the I-V characteristics of a 5-micrometer by 40-nanometer device, illustrating the relationship between the drain current ($I_D$) and the drain-source voltage ($V_{DS}$) for various gate-source voltage ($V_{GS}$) levels. The x-axis represents $V_{DS}$ in volts, ranging from 0 to 1 V, while the y-axis represents $I_D$ in milliamperes (mA), ranging from 0 to 1.2 mA, both on a linear scale.\n\nThe plot comprises several curves, each corresponding to a different $V_{GS} - V_{TH}$ value, ranging from 50 mV to 350 mV in 50-mV increments. The curves display typical MOSFET behavior, starting at the origin and initially rising sharply, indicating the triode region. As $V_{DS}$ increases, the curves gradually flatten, signifying the transition into the saturation region.\n\nThe knee point, marking the transition from the triode to the saturation region, is observed below $V_{DS} = 0.2$ V for all curves. As $V_{GS}$ increases, the curves shift upwards, indicating higher drain currents for higher gate-source voltages.\n\nOverall, the graph demonstrates the expected behavior of MOSFET devices, highlighting the influence of varying $V_{GS}$ on the drain current and the clear delineation between the triode and saturation regions at lower $V_{DS}$ values.\n\n**Figure 11.2:** I-V characteristics of a $5-\\mu \\mathrm{m} / 40-\\mathrm{nm}$ device for $V_{G S}-V_{T H}=50, \\cdots, 350 \\mathrm{mV}$."
},
{
    "text": "Among the various short-channel effects, two are particularly significant at this stage of our research; both pertain to the mobility of carriers within the channel. Recall our assumption that the carrier velocity is given by \\( v = \\mu E \\), where \\( E \\) represents the electric field. We will re-examine this assumption here.\n\n**Velocity Saturation** In a MOSFET, as \\( V_{DS} \\) and consequently the electric field along the source-drain path increase, \\( v \\) does not increase proportionally (Fig. 11.3).\n**Image Description:** Figure 11.3 depicts a graph of carrier velocity versus electric field, illustrating velocity saturation in a MOSFET. The graph is a two-dimensional plot with the horizontal axis labeled 'E' for the electric field and the vertical axis labeled 'Carrier Velocity' in cm/s.\n\nThe graph shows a curve originating from the origin, initially rising linearly, indicating that at low electric fields, carrier velocity increases proportionally with the electric field. However, as the electric field continues to rise, the curve flattens, signifying a decrease in the rate of carrier velocity increase. This flattening marks the onset of velocity saturation, where the carrier velocity approaches a maximum value and does not significantly increase despite further electric field increases.\n\nThe critical electric field, denoted as 'E_crit', is indicated on the horizontal axis. At this point, the linear increase transitions to saturation, and the carrier velocity approaches approximately \\( 10^7 \\) cm/s, as shown by a horizontal dashed line from the vertical axis. This line represents the maximum achievable carrier velocity under the given conditions, highlighting velocity saturation's effect.\n\nOverall, the graph effectively demonstrates how carrier velocity becomes limited at high electric fields due to velocity saturation, a crucial factor in short-channel MOSFET behavior.\n\nWe term this phenomenon \"velocity saturation,\" or equivalently, a decline in mobility (the slope of \\( v \\) versus \\( E \\)). This effect arises because MOSFET lengths have decreased from, say, \\( 1 \\mu \\mathrm{m} \\) to 40 nm (a reduction factor of 25), while the allowable drain-source voltage has dropped from 5 V to about 1 V. Consequently, the lateral electric field has exceeded \\( E_{\\text{crit}} \\) (\\(\\approx 1 \\mathrm{V}/\\mu \\mathrm{m}\\)) in Fig. 11.3.\n\nWe address velocity saturation modeling in Chapter 17, but let's consider an extreme case here: assume the charge carriers reach the saturated velocity, \\( v_{\\text{sat}} \\), immediately upon leaving the source. Since \\( I = Q_d \\cdot v \\), where \\( Q_d \\) is the charge density (per unit length) given by \\( W C_{ox} (V_{GS} - V_{TH}) \\), we have\n\n\\[ I_D = W C_{ox} (V_{GS} - V_{TH}) v_{\\text{sat}} \\tag{11.1} \\]\n\nExtreme velocity saturation leads to three deviations from square-law behavior. First, the device current is linearly proportional to the overdrive and independent of the channel length. Second, \\( I_D \\) reaches saturation even for \\( V_{DS} < V_{GS} - V_{TH} \\) (Fig. 11.4). As seen in Fig. 11.2, the knee points occur at relatively low \\( V_{DS} \\) values even as the overdrive reaches 350 mV. Third, the transconductance of a fully velocity-saturated MOSFET becomes\n\n\\[ g_m = \\left. \\frac{\\partial I_D}{\\partial V_{GS}} \\right|_{V_{DS \\text{ const}}} \\tag{11.2} \\]\n\\[ = W C_{ox} v_{\\text{sat}} \\tag{11.3} \\]\n\na relatively constant value versus \\( I_D \\) or \\( V_{GS} \\). For instance, in Fig. 11.2, the change in \\( I_D \\) remains fairly constant as the overdrive increases from 250 mV to 300 mV and from 300 mV to 350 mV.\n**Image Description:** Figure 11.4 shows the premature saturation of drain current due to velocity saturation. The graph plots drain current \\( I_D \\) against drain-source voltage \\( V_{DS} \\) in a MOSFET.\n\n1. **Graph Type and Function:** A plot graph illustrating the relationship between \\( I_D \\) and \\( V_{DS} \\).\n2. **Axes Labels and Units:** The vertical axis represents \\( I_D \\) (typically in amperes, A), and the horizontal axis represents \\( V_{DS} \\) (in volts, V). Key points include \\( V_{D0} \\) and \\( V_{GS} - V_{TH} \\).\n3. **Overall Behavior and Trends:** The graph shows two curves: one without velocity saturation (dashed line) and one with velocity saturation (solid line). Without saturation, \\( I_D \\) increases sharply and reaches a higher saturation level. With saturation, \\( I_D \\) levels off sooner, indicating a lower saturation current.\n4. **Key Features and Technical Details:** The dashed line shows continuous \\( I_D \\) increase beyond the threshold, reaching a higher saturation level. The solid line shows premature saturation at a lower \\( V_{DS} \\).\n5. **Annotations:** The graph differentiates \"Without Velocity Saturation\" and \"With Velocity Saturation\" scenarios, with vertical dashed lines marking critical voltage points.\n\n**Mobility Degradation with Vertical Field** The mobility of charge carriers in the channel also decreases as the gate-source voltage and the vertical field increase (Fig. 11.5).\n\n**Image Description:** Figure 11.5 illustrates the reduction of mobility (\\( \\mu \\)) due to the vertical electric field as a function of the overdrive voltage \\( V_{GS} - V_{TH} \\). The graph is a two-dimensional plot with the x-axis labeled \\( V_{GS} - V_{TH} \\) and the y-axis labeled \\( \\mu \\).\n\n1. **Graph Type and Function:** A plot showing the relationship between mobility and overdrive voltage.\n2. **Axes Labels and Units:** X-axis: \\( V_{GS} - V_{TH} \\) (Overdrive Voltage); Y-axis: \\( \\mu \\) (Mobility). Units are not specified but typically in volts for \\( V_{GS} - V_{TH} \\) and dimensionless or cm²/V·s for mobility.\n3. **Overall Behavior and Trends:** The graph starts with a constant mobility (\\( \\mu_0 \\)) and decreases nonlinearly as \\( V_{GS} - V_{TH} \\) increases.\n4. **Key Features:** The graph transitions from a flat region to a declining slope, indicating mobility degradation.\n5. **Annotations:** No specific annotations or numerical values, but the trend of mobility degradation is clear.\n\nWhat impact does this mobility degradation have on device transconductance? Intuitively, we expect \\( g_m \\) to deviate from the linear relationship, \\( g_m = \\mu C_{ox} (W/L) (V_{GS} - V_{TH}) \\), with the overdrive voltage. Figure 11.6 illustrates this behavior for the \\( 5-\\mu \\mathrm{m}/40-\\mathrm{nm} \\) NFET mentioned earlier.\n**Image Description:** Figure 11.6 plots transconductance \\( g_m \\) against the overdrive voltage \\( V_{GS} - V_{TH} \\). The line graph has the x-axis representing \\( V_{GS} - V_{TH} \\) in volts (V), ranging from 0 to 0.6 V, and the y-axis representing \\( g_m \\) in millisiemens (mS), ranging from 0 to 5 mS.\n\n**Overall Behavior and Trends:** The graph shows a nonlinear relationship between \\( g_m \\) and \\( V_{GS} - V_{TH} \\). Initially, \\( g_m \\) increases sharply but then levels off as \\( V_{GS} - V_{TH} \\) approaches 0.5 V.\n\n**Key Features and Technical Details:** The graph indicates \\( g_m \\) does not increase linearly due to mobility degradation. An inflection point around 0.3 V marks a slowdown in \\( g_m \\) increase. \\( g_m \\) reaches a maximum slightly above 5 mS at \\( V_{GS} - V_{TH} \\) near 0.6 V.\n\n**Annotations:** The graph includes gridlines for better visualization, with no specific data points annotated, but the trend is consistent with the expected impact of mobility degradation on transconductance.\n\n#### Example 11.1\n\nWe approximate the mobility plot in Fig. 11.5 using\n\n\\[ \\mu = \\frac{\\mu_0}{1 + \\theta (V_{GS} - V_{TH})} \\tag{11.4} \\]\n\nwhere \\( \\theta \\) is a proportionality factor with units of (voltage) \\(^{-1}\\). Determine the transconductance of a MOSFET experiencing this type of mobility degradation.\n\n#### Solution\n\nWe write\n\n\\[ I_D = \\frac{1}{2} \\frac{\\mu_0 C_{ox}}{1 + \\theta (V_{GS} - V_{TH})} \\frac{W}{L} (V_{GS} - V_{TH})^2 \\tag{11.5} \\]\n\nand hence\n\n\\[ g_m = \\mu_0 C_{ox} \\frac{W}{L} \\frac{(\\theta/2) (V_{GS} - V_{TH})^2 + V_{GS} - V_{TH}}{[1 + \\theta (V_{GS} - V_{TH})]^2} \\tag{11.6} \\]\n\nAs expected, for \\( \\theta (V_{GS} - V_{TH}) \\ll 1 \\), \\( g_m \\approx \\mu_0 C_{ox} (W/L) (V_{GS} - V_{TH}) \\). At the other extreme, if \\( (V_{GS} - V_{TH}) \\gg 2/\\theta \\), \\( g_m \\) approaches a constant value: \\( g_m \\approx (1/2) \\mu_0 C_{ox} (W/L) / \\theta \\).\n\nIn general, both lateral and vertical field effects (\\( V_{DS} \\) and \\( V_{GS} \\), respectively) must be considered for mobility degradation. However, the simple results derived above are sufficient for most of our analog design studies."
},
{
    "text": "Among the various short-channel effects, two are particularly significant at this stage of our research, both concerning the mobility of carriers in the channel. Recall our assumption that carrier velocity is given by \\( v = \\mu E \\), where \\( E \\) represents the electric field. We will re-examine this assumption here.\n\n**Velocity Saturation**: In a MOSFET, as \\( V_{DS} \\) and thus the electric field along the source-drain path increase, \\( v \\) does not increase proportionally (Fig. 11.3).\n**Image Description**: Figure 11.3 illustrates velocity saturation at high electric fields. The graph plots carrier velocity against the electric field, depicting the phenomenon in a MOSFET. The horizontal axis, labeled 'E', represents the electric field, while the vertical axis, labeled 'Carrier Velocity', is in cm/s.\n\nThe graph features a curve originating from the origin, initially rising linearly, indicating proportional increases in carrier velocity with the electric field at low values. However, as the electric field intensifies, the curve flattens, showing a reduced rate of velocity increase. This flattening signifies velocity saturation, where the carrier velocity nears a maximum value and ceases to rise significantly despite further electric field increases.\n\nThe critical electric field, denoted 'E_crit', is marked on the horizontal axis, marking the transition from linear increase to saturation. At this point, the carrier velocity approaches approximately \\( 10^7 \\) cm/s, indicated by a horizontal dashed line from the vertical axis, representing the maximum achievable carrier velocity under these conditions. The graph effectively demonstrates how carrier velocity becomes limited at high electric fields due to velocity saturation, a key factor in short-channel MOSFET behavior.\n\nWe describe this phenomenon as \"velocity saturation,\" or equivalently, a decline in mobility (the slope of \\( v \\) versus \\( E \\)). This effect arises because MOSFET lengths have shrunk from about \\( 1 \\mu \\mathrm{m} \\) to 40 nm (a 25-fold reduction), while the allowable drain-source voltage has decreased from 5 V to around 1 V. Consequently, the lateral electric field exceeds \\( E_{\\text{crit}} (\\approx 1 \\mathrm{V}/\\mu \\mathrm{m}) \\) in Fig. 11.3.\n\nWe address velocity saturation modeling in Chapter 17, but consider an extreme case here: assume carriers reach the saturated velocity, \\( v_{\\text{sat}} \\), immediately upon leaving the source. Since \\( I = Q_d \\cdot v \\), where \\( Q_d \\) is the charge density (per unit length) given by \\( W C_{ox} (V_{GS} - V_{TH}) \\), we have:\n\n\\[\n\\begin{equation*}\nI_D = W C_{ox} (V_{GS} - V_{TH}) v_{\\text{sat}} \\tag{11.1}\n\\end{equation*}\n\\]\n\nExtreme velocity saturation leads to three deviations from square-law behavior. First, the device current is linearly proportional to the overdrive and independent of channel length. Second, \\( I_D \\) reaches saturation even for \\( V_{DS} < V_{GS} - V_{TH} \\) (Fig. 11.4). As seen in Fig. 11.2, knee points occur at relatively low \\( V_{DS} \\) values, even as the overdrive reaches 350 mV. Third, the transconductance of a fully velocity-saturated MOSFET becomes:\n\n\\[\n\\begin{align*}\ng_m & = \\left. \\frac{\\partial I_D}{\\partial V_{GS}} \\right|_{V_{DS \\text{ const}}} \\tag{11.2}\\\\\n& = W C_{ox} v_{\\text{sat}} \\tag{11.3}\n\\end{align*}\n\\]\n\na relatively constant value versus \\( I_D \\) or \\( V_{GS} \\). For instance, in Fig. 11.2, \\( I_D \\) changes consistently as the overdrive increases from 250 mV to 300 mV and from 300 mV to 350 mV.\n**Image Description**: Figure 11.4 shows the premature saturation of drain current due to velocity saturation. The graph plots drain current \\( I_D \\) against drain-source voltage \\( V_{DS} \\) in a MOSFET.\n\n1. **Graph Type and Function**: A plot graph illustrating the relationship between \\( I_D \\) and \\( V_{DS} \\).\n2. **Axes Labels and Units**: The vertical axis represents \\( I_D \\) (typically in amperes), and the horizontal axis represents \\( V_{DS} \\) (in volts). Key points include \\( V_{D0} \\) and \\( V_{GS} - V_{TH} \\).\n3. **Behavior and Trends**: The graph includes two curves: one without velocity saturation (dashed line) and one with velocity saturation (solid line). Without saturation, \\( I_D \\) increases sharply and reaches a higher saturation level. With saturation, \\( I_D \\) levels off sooner, indicating lower saturation current.\n4. **Key Features**: The dashed line shows continuous \\( I_D \\) increase beyond the threshold, reaching higher saturation. The solid line shows premature saturation at a lower \\( V_{DS} \\).\n5. **Annotations**: The graph differentiates \"Without Velocity Saturation\" and \"With Velocity Saturation,\" with vertical dashed lines marking critical voltage points.\n\n**Mobility Degradation with Vertical Field**: The mobility of charge carriers in the channel also decreases as the gate-source voltage and vertical field increase (Fig. 11.5).\n\n**Image Description**: Figure 11.5 illustrates the reduction of mobility (\\( \\mu \\)) due to the vertical electric field as a function of overdrive voltage \\( V_{GS} - V_{TH} \\). The graph plots \\( \\mu \\) against \\( V_{GS} - V_{TH} \\).\n\n1. **Graph Type and Function**: A plot showing the relationship between mobility and overdrive voltage.\n2. **Axes Labels and Units**: X-axis: \\( V_{GS} - V_{TH} \\) (Overdrive Voltage); Y-axis: \\( \\mu \\) (Mobility). Units are not specified, but typically \\( V_{GS} - V_{TH} \\) is in volts, and mobility is dimensionless or in cm²/V·s.\n3. **Behavior and Trends**: The graph starts with a constant mobility (\\( \\mu_0 \\)) and decreases nonlinearly as \\( V_{GS} - V_{TH} \\) increases.\n4. **Key Features**: The graph transitions from a flat region to a declining slope, indicating mobility degradation.\n5. **Annotations**: No specific annotations or data points, but the trend of mobility degradation is clear.\n\nWhat impact does this mobility degradation have on device transconductance? We intuitively expect that \\( g_m \\) no longer follows the linear relationship \\( g_m = \\mu C_{ox} (W / L) (V_{GS} - V_{TH}) \\) with the overdrive voltage. Figure 11.6 displays this behavior for the \\( 5-\\mu \\mathrm{m} / 40-\\mathrm{nm} \\) NFET mentioned earlier.\n\n**Image Description**: Figure 11.6 plots transconductance \\( g_m \\) as a function of overdrive voltage \\( V_{GS} - V_{TH} \\). The x-axis ranges from 0 to 0.6 V, and the y-axis ranges from 0 to 5 mS.\n\n**Behavior and Trends**: The graph shows a nonlinear relationship between \\( g_m \\) and \\( V_{GS} - V_{TH} \\). Initially, \\( g_m \\) increases sharply with \\( V_{GS} - V_{TH} \\), but the rate of increase diminishes as \\( V_{GS} - V_{TH} \\) approaches 0.5 V, indicating saturation.\n\n**Key Features**: The graph shows \\( g_m \\) does not increase linearly due to mobility degradation, with an inflection point around 0.3 V. \\( g_m \\) reaches a maximum slightly above 5 mS at 0.6 V.\n\n**Annotations**: The graph includes gridlines for better visualization, with no specific data points annotated, but the trend aligns with theoretical expectations of mobility degradation affecting transconductance.\n\n#### Example 11.1\n\nWe approximate the mobility plot of Fig. 11.5 by:\n\n\\[\n\\begin{equation*}\n\\mu = \\frac{\\mu_0}{1 + \\theta (V_{GS} - V_{TH})} \\tag{11.4}\n\\end{equation*}\n\\]\n\nwhere \\( \\theta \\) is a proportionality factor with units of (voltage) \\(^{-1}\\). Determine the transconductance of a MOSFET suffering from this type of mobility degradation.\n\n#### Solution\n\nWe write:\n\n\\[\n\\begin{equation*}\nI_D = \\frac{1}{2} \\frac{\\mu_0 C_{ox}}{1 + \\theta (V_{GS} - V_{TH})} \\frac{W}{L} (V_{GS} - V_{TH})^2 \\tag{11.5}\n\\end{equation*}\n\\]\n\nand hence:\n\n\\[\n\\begin{equation*}\ng_m = \\mu_0 C_{ox} \\frac{W}{L} \\frac{(\\theta / 2) (V_{GS} - V_{TH})^2 + V_{GS} - V_{TH}}{[1 + \\theta (V_{GS} - V_{TH})]^2} \\tag{11.6}\n\\end{equation*}\n\\]\n\nAs expected, for \\( \\theta (V_{GS} - V_{TH}) \\ll 1 \\), \\( g_m \\approx \\mu_0 C_{ox} (W / L) (V_{GS} - V_{TH}) \\). At the other extreme, if \\( (V_{GS} - V_{TH}) \\gg 2 / \\theta \\), \\( g_m \\) approaches a constant value: \\( g_m \\approx (1 / 2) \\mu_0 C_{ox} (W / L) / \\theta \\).\n\nIn general, the degradation of mobility due to both lateral and vertical fields (\\( V_{DS} \\) and \\( V_{GS} \\), respectively) must be considered. However, the simple results derived above are sufficient for most of our analog design studies."
},
{
    "text": "Among the various short-channel effects, two are particularly significant at this stage of our research; both are related to the mobility of carriers in the channel. Recall our assumption that the carrier velocity is given by $v=\\mu E$, where $E$ represents the electric field. We will re-examine this assumption here.\n\n**Velocity Saturation** In a MOSFET, as $V_{D S}$ and thus the electric field along the source-drain path increase, $v$ does not increase proportionally (Fig. 11.3).\n*Image Description: Figure 11.3 illustrates velocity saturation at high electric fields. The graph plots carrier velocity against the electric field, showing velocity saturation in a MOSFET. The horizontal axis is labeled 'E' for the electric field, and the vertical axis is labeled 'Carrier Velocity' in cm/s. The curve starts from the origin, initially rising linearly, indicating proportional increases at low electric fields. As the electric field increases, the curve flattens, signifying velocity saturation where the carrier velocity approaches a maximum value despite further electric field increases. The critical electric field, 'E_crit', is marked on the horizontal axis, where the linear increase transitions to saturation. At this point, the carrier velocity is around 10^7 cm/s, indicated by a horizontal dashed line representing the maximum achievable carrier velocity under these conditions. The graph demonstrates how carrier velocity is limited at high electric fields due to velocity saturation, a key factor in short-channel MOSFET behavior.*\n\nWe describe this phenomenon as \"velocity saturation,\" or equivalently, a decline in mobility (the slope of $v$ versus $E$). This effect arises because MOSFET lengths have decreased from approximately $1 \\mu \\mathrm{~m}$ to 40 nm (a reduction factor of 25), while the allowable drain-source voltage has dropped from 5 V to about 1 V. Consequently, the lateral electric field exceeds $E_{\\text {crit }}(\\approx 1 \\mathrm{~V} / \\mu \\mathrm{m})$ as shown in Fig. 11.3.\n\nWe address the modeling of velocity saturation in Chapter 17, but let's consider an extreme scenario here: assume the charge carriers reach the saturated velocity, $v_{\\text {sat }}$, immediately upon leaving the source. Given $I=Q_{d} \\cdot v$, where $Q_{d}$ is the charge density (per unit length) expressed as $W C_{o x}\\left(V_{G S}-V_{T H}\\right)$, we obtain\n\n$$\n\\begin{equation*}\nI_{D}=W C_{o x}\\left(V_{G S}-V_{T H}\\right) v_{s a t} \\tag{11.1}\n\\end{equation*}\n$$\n\nExtreme velocity saturation leads to three deviations from the square-law behavior. First, the device current is linearly proportional to the overdrive and independent of the channel length. Second, $I_{D}$ reaches saturation even for $V_{D S}<V_{G S}-V_{T H}$ (Fig. 11.4). As seen in Fig. 11.2, the knee points occur at relatively low $V_{D S}$ values, even as the overdrive reaches 350 mV. Third, the transconductance of a fully velocity-saturated MOSFET becomes\n\n$$\n\\begin{align*}\ng_{m} & =\\left.\\frac{\\partial I_{D}}{\\partial V_{G S}}\\right|_{V_{D S \\text { const }}}  \\tag{11.2}\\\\\n& =W C_{o x} v_{\\text {sat }} \\tag{11.3}\n\\end{align*}\n$$\n\na relatively constant value versus $I_{D}$ or $V_{G S}$. For instance, in Fig. 11.2, the change in $I_{D}$ remains fairly constant as the overdrive increases from 250 mV to 300 mV and from 300 mV to 350 mV.\n*Image Description: Figure 11.4 shows the premature saturation of drain current due to velocity saturation. The graph plots drain current \\( I_D \\) against drain-source voltage \\( V_{DS} \\) in a MOSFET. The vertical axis represents \\( I_D \\) (typically in amperes), and the horizontal axis represents \\( V_{DS} \\) (in volts). Key points on the horizontal axis include \\( V_{D0} \\) and \\( V_{GS} - V_{TH} \\). The graph features two curves: one without velocity saturation (dashed line) and one with velocity saturation (solid line). Without velocity saturation, \\( I_D \\) increases sharply and reaches a higher saturation level. With velocity saturation, \\( I_D \\) levels off sooner, indicating a lower saturation current. The dashed line shows continued current increase beyond the threshold, while the solid line shows premature saturation at a lower \\( V_{DS} \\). Annotations differentiate the two conditions, and vertical dashed lines mark critical voltage points.*\n\n**Mobility Degradation with Vertical Field** The mobility of charge carriers in the channel also decreases as the gate-source voltage and the vertical field increase (Fig. 11.5).\n*Image Description: Figure 11.5 depicts the reduction of mobility (\\( \\mu \\)) due to the vertical electric field as a function of the overdrive voltage \\( V_{GS} - V_{TH} \\). The graph is a two-dimensional plot with the x-axis labeled \\( V_{GS} - V_{TH} \\) and the y-axis labeled \\( \\mu \\). The graph starts with a horizontal line at \\( \\mu_0 \\), indicating initial constant mobility. As \\( V_{GS} - V_{TH} \\) increases, mobility \\( \\mu \\) decreases nonlinearly, showing a smooth decline due to increased vertical electric field. There are no specific peaks or inflection points, but the trend clearly illustrates mobility degradation.*\n\nHow does this mobility degradation affect the device transconductance? Intuitively, we expect that $g_{m}$ no longer follows the linear relationship, $g_{m}=\\mu C_{o x}(W / L)\\left(V_{G S}-V_{T H}\\right)$, with the overdrive voltage. Figure 11.6 illustrates this behavior for the $5-\\mu \\mathrm{m} / 40-\\mathrm{nm}$ NFET mentioned earlier.\n*Image Description: Figure 11.6 plots transconductance \\( g_m \\) against the overdrive voltage \\( V_{GS} - V_{TH} \\). The x-axis ranges from 0 to 0.6 V, and the y-axis ranges from 0 to 5 mS. The graph shows a nonlinear relationship, with \\( g_m \\) initially increasing sharply but then slowing as \\( V_{GS} - V_{TH} \\) approaches 0.5 V, indicating saturation. There is an inflection point around 0.3 V, and \\( g_m \\) reaches a maximum slightly above 5 mS at 0.6 V. The graph is marked with gridlines and demonstrates that \\( g_m \\) deviates from linearity due to mobility degradation.*\n\n#### Example 11.1\n\nWe approximate the mobility plot of Fig. 11.5 using\n\n$$\n\\begin{equation*}\n\\mu=\\frac{\\mu_{0}}{1+\\theta\\left(V_{G S}-V_{T H}\\right)} \\tag{11.4}\n\\end{equation*}\n$$\n\nwhere $\\theta$ is a proportionality factor with units of (voltage) ${ }^{-1}$. Determine the transconductance of a MOSFET affected by this type of mobility degradation.\n\n#### Solution\n\nWe express\n\n$$\n\\begin{equation*}\nI_{D}=\\frac{1}{2} \\frac{\\mu_{0} C_{o x}}{1+\\theta\\left(V_{G S}-V_{T H}\\right)} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2} \\tag{11.5}\n\\end{equation*}\n$$\n\nand thus\n\n$$\n\\begin{equation*}\ng_{m}=\\mu_{0} C_{o x} \\frac{W}{L} \\frac{(\\theta / 2)\\left(V_{G S}-V_{T H}\\right)^{2}+V_{G S}-V_{T H}}{\\left[1+\\theta\\left(V_{G S}-V_{T H}\\right)\\right]^{2}} \\tag{11.6}\n\\end{equation*}\n$$\n\nAs expected, for $\\theta\\left(V_{G S}-V_{T H}\\right) \\ll 1$, $g_{m} \\approx \\mu_{0} C_{o x}(W / L)\\left(V_{G S}-V_{T H}\\right)$. At the other extreme, if $\\left(V_{G S}-V_{T H}\\right) \\gg 2 / \\theta$, $g_{m}$ approaches a constant value: $g_{m} \\approx(1 / 2) \\mu_{0} C_{o x}(W / L) / \\theta$.\n\nIn general, the degradation of mobility due to both lateral and vertical fields ( $V_{D S}$ and $V_{G S}$, respectively) must be considered. However, the simplified results derived above are sufficient for most of our analog design studies."
},
{
    "text": "Among the various short-channel effects, two are particularly significant at this stage of our research; both are related to the mobility of carriers in the channel. Recall our assumption that carrier velocity is given by $v=\\mu E$, where $E$ represents the electric field. We will re-examine this assumption here.\n\nVelocity Saturation In a MOSFET, as $V_{D S}$ and thus the electric field along the source-drain path increase, $v$ does not increase proportionally (Fig. 11.3).\nimage_name:Figure 11.3 Velocity saturation at high electric fields.\ndescription:Figure 11.3 presents a graph of carrier velocity versus electric field, depicting velocity saturation in a MOSFET. The graph is two-dimensional, with the horizontal axis labeled 'E' for the electric field and the vertical axis labeled 'Carrier Velocity', measured in cm/s.\n\nThe graph features a curve originating from the origin, initially rising linearly, indicating that at low electric fields, carrier velocity increases proportionally with the electric field. However, as the electric field intensifies, the curve flattens, showing a reduced rate of increase in carrier velocity. This flattening signifies the onset of velocity saturation, where the carrier velocity approaches a maximum value and ceases to rise significantly despite further increases in the electric field.\n\nThe critical electric field, denoted as 'E_crit', is marked on the horizontal axis, indicating the transition point from linear increase to saturation. At this juncture, the carrier velocity approaches approximately 10^7 cm/s, as indicated by a horizontal dashed line from the vertical axis. This line represents the maximum achievable carrier velocity under the given conditions, highlighting the impact of velocity saturation.\n\nOverall, the graph effectively illustrates how carrier velocity becomes limited at high electric fields due to velocity saturation, a crucial factor in short-channel MOSFET behavior.\n\nWe describe this phenomenon as \"velocity saturation,\" or equivalently, as a decline in mobility (the slope of $v$ versus $E$). This effect arises because MOSFET lengths have shrunk from about $1 \\mu \\mathrm{~m}$ to 40 nm (a reduction factor of 25), while the permissible drain-source voltage has decreased from 5 V to around 1 V. Consequently, the lateral electric field has surpassed $E_{\\text {crit }}(\\approx 1 \\mathrm{~V} / \\mu \\mathrm{m})$ as shown in Fig. 11.3.\n\nWe address the modeling of velocity saturation in Chapter 17, but let's consider an extreme scenario here: suppose the charge carriers reach the saturated velocity, $v_{\\text {sat }}$, immediately upon leaving the source. Given that $I=Q_{d} \\cdot v$, where $Q_{d}$ is the charge density (per unit length) and is given by $W C_{o x}\\left(V_{G S}-V_{T H}\\right)$, we obtain\n\n$$\n\\begin{equation*}\nI_{D}=W C_{o x}\\left(V_{G S}-V_{T H}\\right) v_{s a t} \\tag{11.1}\n\\end{equation*}\n$$\n\nExtreme velocity saturation leads to three deviations from the square-law behavior. First, the device current is linearly proportional to the overdrive and independent of the channel length. ${ }^{1}$ Second, $I_{D}$ reaches saturation even for $V_{D S}<V_{G S}-V_{T H}$ (Fig. 11.4). As seen in Fig. 11.2, the knee points occur at relatively low $V_{D S}$ values even as the overdrive reaches 350 mV. Third, the transconductance of a fully velocity-saturated MOSFET is\n\n$$\n\\begin{align*}\ng_{m} & =\\left.\\frac{\\partial I_{D}}{\\partial V_{G S}}\\right|_{V_{D S \\text { const }}}  \\tag{11.2}\\\\\n& =W C_{o x} v_{\\text {sat }} \\tag{11.3}\n\\end{align*}\n$$\n\na relatively constant value versus $I_{D}$ or $V_{G S}$. For instance, in Fig. 11.2, the change in $I_{D}$ remains fairly constant as the overdrive increases from 250 mV to 300 mV and from 300 mV to 350 mV.\nimage_name:Figure 11.4 Premature saturation of drain current due to velocity saturation.\ndescription:Figure 11.4 shows the behavior of drain current \\( I_D \\) as a function of drain-source voltage \\( V_{DS} \\) in a MOSFET, emphasizing the effect of velocity saturation.\n\n1. **Graph Type and Function:**\n- This is a plot graph illustrating the relationship between drain current \\( I_D \\) and drain-source voltage \\( V_{DS} \\).\n\n2. **Axes Labels and Units:**\n- The vertical axis represents the drain current \\( I_D \\), typically measured in amperes (A).\n- The horizontal axis represents the drain-source voltage \\( V_{DS} \\), measured in volts (V).\n- Key points on the horizontal axis include \\( V_{D0} \\) and \\( V_{GS} - V_{TH} \\), indicating threshold voltage levels and the onset of saturation.\n\n3. **Overall Behavior and Trends:**\n- The graph includes two curves: one for behavior without velocity saturation (dashed line) and one with velocity saturation (solid line).\n- Without velocity saturation, \\( I_D \\) increases sharply with \\( V_{DS} \\) and reaches a higher saturation level.\n- With velocity saturation, \\( I_D \\) increases initially but levels off sooner, indicating a lower saturation current.\n\n4. **Key Features and Technical Details:**\n- The dashed line shows a scenario where the current continues to rise with \\( V_{DS} \\) beyond the threshold, reaching a higher saturation level.\n- The solid line indicates that with velocity saturation, the current plateaus at a lower \\( V_{DS} \\) value, signifying premature saturation.\n- The point \\( V_{GS} - V_{TH} \\) marks the transition to the saturation region.\n\n5. **Annotations and Specific Data Points:**\n- The graph includes annotations for both conditions: \"Without Velocity Saturation\" and \"With Velocity Saturation,\" clearly distinguishing the two scenarios.\n- Vertical dashed lines indicate critical voltage points such as \\( V_{D0} \\) and \\( V_{GS} - V_{TH} \\), highlighting the onset of the saturation region.\n\nMobility Degradation with Vertical Field The mobility of charge carriers in the channel also decreases as the gate-source voltage and the vertical field increase (Fig. 11.5).\n\nimage_name:Figure 11.5 Reduction of mobility due to vertical electric field.\ndescription:Figure 11.5 illustrates the reduction of mobility (\\( \\mu \\)) due to the vertical electric field as a function of the overdrive voltage \\( V_{GS} - V_{TH} \\). The graph is a two-dimensional plot with the x-axis labeled \\( V_{GS} - V_{TH} \\) and the y-axis labeled \\( \\mu \\), representing mobility.\n\n1. **Graph Type and Function:**\n- The graph plots the relationship between mobility and overdrive voltage, focusing on how mobility decreases with increasing vertical electric field.\n\n2. **Axes Labels and Units:**\n- **X-axis:** \\( V_{GS} - V_{TH} \\) (Overdrive Voltage)\n- **Y-axis:** \\( \\mu \\) (Mobility)\n- The units are not explicitly mentioned, but \\( V_{GS} - V_{TH} \\) is typically in volts, and mobility is a dimensionless ratio or in cm²/V·s.\n\n3. **Overall Behavior and Trends:**\n- The graph starts with a horizontal line at \\( \\mu_0 \\), indicating initial constant mobility.\n- As \\( V_{GS} - V_{TH} \\) increases, mobility \\( \\mu \\) decreases nonlinearly, showing a downward slope.\n- This trend indicates mobility degradation due to an increased vertical electric field.\n\n4. **Key Features and Technical Details:**\n- The graph shows a clear transition from a flat region to a declining slope.\n- No specific peaks, valleys, or inflection points are marked, but the overall trend is a smooth decline.\n\n5. **Annotations and Specific Data Points:**\n- The graph lacks specific annotations or numerical values but visually represents the concept of mobility degradation with increasing \\( V_{GS} - V_{TH} \\).\n\nWhat impact does this mobility degradation have on the device transconductance? Intuitively, we expect that $g_{m}$ no longer follows the linear relationship, $g_{m}=\\mu C_{o x}(W / L)\\left(V_{G S}-V_{T H}\\right)$, with the overdrive voltage. Figure 11.6 demonstrates this behavior for the $5-\\mu \\mathrm{m} / 40-\\mathrm{nm}$ NFET mentioned earlier.\nimage_name:Figure 11.6 Transconductance as a function of overdrive voltage\ndescription:Figure 11.6 plots transconductance \\( g_m \\) as a function of the overdrive voltage \\( V_{GS} - V_{TH} \\). It is a line graph with the x-axis representing the overdrive voltage \\( V_{GS} - V_{TH} \\) in volts (V), ranging from 0 to 0.6 V. The y-axis represents the transconductance \\( g_m \\) in millisiemens (mS), ranging from 0 to 5 mS.\n\nOverall Behavior and Trends:\nThe graph shows a nonlinear relationship between \\( g_m \\) and \\( V_{GS} - V_{TH} \\). Initially, as \\( V_{GS} - V_{TH} \\) increases from 0, \\( g_m \\) rises sharply, indicating a strong dependence of transconductance on the overdrive voltage in this region. However, as \\( V_{GS} - V_{TH} \\) approaches 0.5 V, the rate of increase in \\( g_m \\) slows down, showing a saturation trend.\n\nKey Features and Technical Details:\n- The graph indicates that \\( g_m \\) does not increase linearly with \\( V_{GS} - V_{TH} \\) due to mobility degradation, consistent with the context provided.\n- An inflection point around 0.3 V marks where the rate of increase in \\( g_m \\) begins to decline.\n- \\( g_m \\) reaches a maximum value slightly above 5 mS as \\( V_{GS} - V_{TH} \\) approaches 0.6 V, suggesting a saturation effect.\n\nAnnotations and Specific Data Points:\n- The graph includes gridlines to aid in visualizing changes in \\( g_m \\) with \\( V_{GS} - V_{TH} \\).\n- No specific data points are annotated, but the trend is clear and consistent with the theoretical expectation that mobility degradation affects transconductance behavior, deviating from linearity as \\( V_{GS} - V_{TH} \\) increases.\n\n#### Example 11.1\n\nWe approximate the mobility plot of Fig. 11.5 using\n\n$$\n\\begin{equation*}\n\\mu=\\frac{\\mu_{0}}{1+\\theta\\left(V_{G S}-V_{T H}\\right)} \\tag{11.4}\n\\end{equation*}\n$$\n\nwhere $\\theta$ is a proportionality factor with a dimension of (voltage) ${ }^{-1}$. Determine the transconductance of a MOSFET affected by this type of mobility degradation.\n\n#### Solution\n\nWe express\n\n$$\n\\begin{equation*}\nI_{D}=\\frac{1}{2} \\frac{\\mu_{0} C_{o x}}{1+\\theta\\left(V_{G S}-V_{T H}\\right)} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2} \\tag{11.5}\n\\end{equation*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\ng_{m}=\\mu_{0} C_{o x} \\frac{W}{L} \\frac{(\\theta / 2)\\left(V_{G S}-V_{T H}\\right)^{2}+V_{G S}-V_{T H}}{\\left[1+\\theta\\left(V_{G S}-V_{T H}\\right)\\right]^{2}} \\tag{11.6}\n\\end{equation*}\n$$\n\nAs expected, for $\\theta\\left(V_{G S}-V_{T H}\\right) \\ll 1$, we have $g_{m} \\approx \\mu_{0} C_{o x}(W / L)\\left(V_{G S}-V_{T H}\\right)$. At the other extreme, if $\\left(V_{G S}-V_{T H}\\right) \\gg 2 / \\theta$, then $g_{m}$ approaches a constant value: $g_{m} \\approx(1 / 2) \\mu_{0} C_{o x}(W / L) / \\theta$.\n\nIn general, the degradation of mobility due to both lateral and vertical fields ( $V_{D S}$ and $V_{G S}$, respectively) must be considered. Nevertheless, the simplified results derived above are sufficient for most of our analog design studies."
},
{
    "text": "Among the various short-channel effects, two are particularly significant at this stage of our research; both are related to the mobility of carriers in the channel. Recall our assumption that the carrier velocity is given by $v=\\mu E$, where $E$ represents the electric field. We will re-examine this assumption here.\n\n**Velocity Saturation** In a MOSFET, as $V_{D S}$ and thus the electric field along the source-drain path increase, $v$ does not increase proportionally (Fig. 11.3).\nimage_name:Figure 11.3 Velocity saturation at high electric fields.\ndescription:Figure 11.3 depicts a graph of carrier velocity versus electric field, illustrating velocity saturation in a MOSFET. This two-dimensional plot has the horizontal axis labeled 'E' for the electric field and the vertical axis labeled 'Carrier Velocity' in cm/s.\n\nThe graph features a curve originating from the origin, initially rising linearly, indicating that at low electric fields, carrier velocity increases proportionally with the electric field. However, as the electric field intensifies, the curve flattens, showing a reduced rate of increase in carrier velocity. This flattening signifies the onset of velocity saturation, where the carrier velocity approaches a maximum value and ceases to rise significantly despite further increases in the electric field.\n\nThe critical electric field, marked as 'E_crit', is indicated on the horizontal axis. At this point, the linear increase transitions to saturation, with the carrier velocity reaching approximately 10^7 cm/s, as shown by a horizontal dashed line from the vertical axis. This line represents the maximum achievable carrier velocity under the given conditions, highlighting the impact of velocity saturation.\n\nOverall, the graph effectively demonstrates how carrier velocity becomes limited at high electric fields due to velocity saturation, a key factor in the behavior of short-channel MOSFETs.\n\nWe describe this phenomenon as \"velocity saturation,\" or equivalently, a decline in mobility (the slope of $v$ versus $E$). This effect arises because MOSFET lengths have decreased from, say, $1 \\mu \\mathrm{~m}$ to 40 nm (a reduction factor of 25), while the allowable drain-source voltage has dropped from 5 V to about 1 V. Consequently, the lateral electric field has exceeded $E_{\\text {crit }}(\\approx 1 \\mathrm{~V} / \\mu \\mathrm{m})$ as shown in Fig. 11.3.\n\nWe address the modeling of velocity saturation in Chapter 17, but let's consider an extreme scenario here: assume the charge carriers reach the saturated velocity, $v_{\\text {sat }}$, immediately upon leaving the source. Since $I=Q_{d} \\cdot v$, where $Q_{d}$ is the charge density (per unit length) given by $W C_{o x}\\left(V_{G S}-V_{T H}\\right)$, we obtain\n\n$$\n\\begin{equation*}\nI_{D}=W C_{o x}\\left(V_{G S}-V_{T H}\\right) v_{s a t} \\tag{11.1}\n\\end{equation*}\n$$\n\nExtreme velocity saturation leads to three deviations from the square-law behavior. First, the device current is linearly proportional to the overdrive and independent of the channel length. Second, $I_{D}$ reaches saturation even for $V_{D S}<V_{G S}-V_{T H}$ (Fig. 11.4). As seen in Fig. 11.2, the knee points occur at relatively low $V_{D S}$ values, even as the overdrive reaches 350 mV. Third, the transconductance of a fully velocity-saturated MOSFET is\n\n$$\n\\begin{align*}\ng_{m} & =\\left.\\frac{\\partial I_{D}}{\\partial V_{G S}}\\right|_{V_{D S \\text { const }}}  \\tag{11.2}\\\\\n& =W C_{o x} v_{\\text {sat }} \\tag{11.3}\n\\end{align*}\n$$\n\na relatively constant value versus $I_{D}$ or $V_{G S}$. For instance, in Fig. 11.2, the change in $I_{D}$ remains fairly constant as the overdrive increases from 250 mV to 300 mV and from 300 mV to 350 mV.\nimage_name:Figure 11.4 Premature saturation of drain current due to velocity saturation.\ndescription:Figure 11.4 shows the behavior of drain current \\( I_D \\) as a function of drain-source voltage \\( V_{DS} \\) in a MOSFET, highlighting the effect of velocity saturation.\n\n1. **Graph Type and Function:**\n- This plot graph illustrates the relationship between drain current \\( I_D \\) and drain-source voltage \\( V_{DS} \\).\n\n2. **Axes Labels and Units:**\n- The vertical axis represents the drain current \\( I_D \\) (typically in amperes, A).\n- The horizontal axis represents the drain-source voltage \\( V_{DS} \\) (in volts, V).\n- Key points on the horizontal axis include \\( V_{D0} \\) and \\( V_{GS} - V_{TH} \\), indicating threshold voltage levels and the onset of saturation.\n\n3. **Overall Behavior and Trends:**\n- The graph includes two curves: one without velocity saturation (dashed line) and one with velocity saturation (solid line).\n- Without velocity saturation, \\( I_D \\) increases sharply with \\( V_{DS} \\) and reaches a higher saturation level.\n- With velocity saturation, \\( I_D \\) increases initially but levels off sooner, indicating a lower saturation current.\n\n4. **Key Features and Technical Details:**\n- The dashed line shows a scenario where the current continues to rise with \\( V_{DS} \\) beyond the threshold, reaching a higher saturation level.\n- The solid line indicates that with velocity saturation, the current plateaus at a lower \\( V_{DS} \\), showing premature saturation.\n- The point \\( V_{GS} - V_{TH} \\) marks the transition to the saturation region.\n\n5. **Annotations and Specific Data Points:**\n- Annotations differentiate between \"Without Velocity Saturation\" and \"With Velocity Saturation.\"\n- Vertical dashed lines indicate critical voltage points like \\( V_{D0} \\) and \\( V_{GS} - V_{TH} \\), highlighting the onset of saturation.\n\n**Mobility Degradation with Vertical Field** The mobility of charge carriers in the channel also decreases as the gate-source voltage and the vertical field increase (Fig. 11.5).\n\nimage_name:Figure 11.5 Reduction of mobility due to vertical electric field.\ndescription:Figure 11.5 illustrates the reduction of mobility (\\( \\mu \\)) due to the vertical electric field as a function of the overdrive voltage \\( V_{GS} - V_{TH} \\). This two-dimensional plot has the x-axis labeled \\( V_{GS} - V_{TH} \\) and the y-axis labeled \\( \\mu \\) for mobility.\n\n1. **Graph Type and Function:**\n- The graph shows the relationship between mobility and overdrive voltage, focusing on how mobility decreases with increasing vertical electric field.\n\n2. **Axes Labels and Units:**\n- **X-axis:** \\( V_{GS} - V_{TH} \\) (Overdrive Voltage)\n- **Y-axis:** \\( \\mu \\) (Mobility)\n- Units are not explicitly mentioned, but \\( V_{GS} - V_{TH} \\) is in volts, and mobility is dimensionless or in cm²/V·s.\n\n3. **Overall Behavior and Trends:**\n- The graph starts with a horizontal line at \\( \\mu_0 \\), indicating initial constant mobility.\n- As \\( V_{GS} - V_{TH} \\) increases, mobility \\( \\mu \\) decreases nonlinearly, showing a downward slope.\n\n4. **Key Features and Technical Details:**\n- The graph transitions from a flat region to a declining slope.\n- No specific peaks, valleys, or inflection points are marked, but the trend is a smooth decline.\n\n5. **Annotations and Specific Data Points:**\n- The graph lacks specific annotations or numerical values but visually represents mobility degradation with increasing \\( V_{GS} - V_{TH} \\).\n\nWhat is the impact of this mobility degradation on the device transconductance? We intuitively expect that $g_{m}$ no longer follows the linear relationship, $g_{m}=\\mu C_{o x}(W / L)\\left(V_{G S}-V_{T H}\\right)$, with the overdrive voltage. Figure 11.6 illustrates this behavior for the $5-\\mu \\mathrm{m} / 40-\\mathrm{nm}$ NFET mentioned earlier.\nimage_name:Figure 11.6 Transconductance as a function of overdrive voltage\ndescription:Figure 11.6 plots transconductance \\( g_m \\) as a function of overdrive voltage \\( V_{GS} - V_{TH} \\). The line graph has the x-axis representing \\( V_{GS} - V_{TH} \\) in volts (V), ranging from 0 to 0.6 V, and the y-axis representing \\( g_m \\) in millisiemens (mS), ranging from 0 to 5 mS.\n\nOverall Behavior and Trends:\nThe graph shows a nonlinear relationship between \\( g_m \\) and \\( V_{GS} - V_{TH} \\). Initially, as \\( V_{GS} - V_{TH} \\) increases from 0, \\( g_m \\) rises sharply, indicating strong dependence on the overdrive voltage. However, as \\( V_{GS} - V_{TH} \\) approaches 0.5 V, the rate of increase in \\( g_m \\) slows, showing a saturation trend.\n\nKey Features and Technical Details:\n- The graph indicates that \\( g_m \\) does not increase linearly with \\( V_{GS} - V_{TH} \\) due to mobility degradation.\n- An inflection point around 0.3 V marks where the rate of increase in \\( g_m \\) begins to decline.\n- \\( g_m \\) reaches a maximum value slightly above 5 mS as \\( V_{GS} - V_{TH} \\) approaches 0.6 V, suggesting saturation.\n\nAnnotations and Specific Data Points:\n- Gridlines aid in visualizing changes in \\( g_m \\) with \\( V_{GS} - V_{TH} \\).\n- No specific data points are annotated, but the trend aligns with the theoretical expectation that mobility degradation affects transconductance, deviating from linearity as \\( V_{GS} - V_{TH} \\) increases.\n\n#### Example 11.1\n\nWe approximate the mobility plot of Fig. 11.5 using\n\n$$\n\\begin{equation*}\n\\mu=\\frac{\\mu_{0}}{1+\\theta\\left(V_{G S}-V_{T H}\\right)} \\tag{11.4}\n\\end{equation*}\n$$\n\nwhere $\\theta$ is a proportionality factor with units of (voltage) ${ }^{-1}$. Determine the transconductance of a MOSFET affected by this type of mobility degradation.\n\n#### Solution\n\nWe express\n\n$$\n\\begin{equation*}\nI_{D}=\\frac{1}{2} \\frac{\\mu_{0} C_{o x}}{1+\\theta\\left(V_{G S}-V_{T H}\\right)} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2} \\tag{11.5}\n\\end{equation*}\n$$\n\nand thus\n\n$$\n\\begin{equation*}\ng_{m}=\\mu_{0} C_{o x} \\frac{W}{L} \\frac{(\\theta / 2)\\left(V_{G S}-V_{T H}\\right)^{2}+V_{G S}-V_{T H}}{\\left[1+\\theta\\left(V_{G S}-V_{T H}\\right)\\right]^{2}} \\tag{11.6}\n\\end{equation*}\n$$\n\nAs expected, for $\\theta\\left(V_{G S}-V_{T H}\\right) \\ll 1$, we have $g_{m} \\approx \\mu_{0} C_{o x}(W / L)\\left(V_{G S}-V_{T H}\\right)$. At the other extreme, if $\\left(V_{G S}-V_{T H}\\right) \\gg 2 / \\theta$, then $g_{m}$ approaches a constant value: $g_{m} \\approx(1 / 2) \\mu_{0} C_{o x}(W / L) / \\theta$.\n\nIn general, the degradation of mobility due to both lateral and vertical fields ( $V_{D S}$ and $V_{G S}$, respectively) must be considered. Nevertheless, the simplified results derived above are sufficient for most of our analog design studies."
},
{
    "text": "Among the various short-channel effects, two are particularly significant at this stage of our research; both are related to the mobility of carriers in the channel. Recall our assumption that the carrier velocity is given by $v=\\mu E$, where $E$ represents the electric field. We re-examine this assumption here.\n\nVelocity Saturation In a MOSFET, as $V_{D S}$ and thus the electric field along the source-drain path increase, $v$ does not increase proportionally (Fig. 11.3).\nimage_name:Figure 11.3 Velocity saturation at high electric fields.\ndescription:Figure 11.3 depicts a graph of carrier velocity versus electric field, illustrating velocity saturation in a MOSFET. This two-dimensional plot has the horizontal axis labeled 'E' for the electric field and the vertical axis labeled 'Carrier Velocity' with units in cm/s.\n\nThe graph shows a curve originating from the origin, initially rising linearly, indicating that at low electric fields, carrier velocity increases proportionally with the electric field. However, as the electric field intensifies, the curve flattens, signifying a reduced rate of increase in carrier velocity. This flattening marks the onset of velocity saturation, where the carrier velocity approaches a maximum value and ceases to rise significantly despite further increases in the electric field.\n\nThe critical electric field, denoted as 'E_crit', is indicated on the horizontal axis. At this point, the linear increase transitions to saturation, with the carrier velocity reaching approximately 10^7 cm/s, as shown by a horizontal dashed line from the vertical axis. This line represents the maximum achievable carrier velocity under the given conditions, highlighting the impact of velocity saturation.\n\nOverall, the graph effectively demonstrates how carrier velocity becomes limited at high electric fields due to velocity saturation, a critical factor in the behavior of short-channel MOSFETs.\n\nWe term this phenomenon \"velocity saturation\" or, equivalently, a decline in mobility (the slope of $v$ versus $E$). This effect arises because MOSFET lengths have decreased from, say, $1 \\mu \\mathrm{~m}$ to 40 nm (a reduction factor of 25), while the allowable drain-source voltage has dropped from 5 V to about 1 V. Consequently, the lateral electric field has exceeded $E_{\\text {crit }}(\\approx 1 \\mathrm{~V} / \\mu \\mathrm{m})$ as shown in Fig. 11.3.\n\nWe address the modeling of velocity saturation in Chapter 17, but let's consider an extreme scenario here: assume the charge carriers reach the saturated velocity, $v_{\\text {sat }}$, immediately upon leaving the source. Since $I=Q_{d} \\cdot v$, where $Q_{d}$ is the charge density (per unit length) given by $W C_{o x}\\left(V_{G S}-V_{T H}\\right)$, we obtain\n\n$$\n\\begin{equation*}\nI_{D}=W C_{o x}\\left(V_{G S}-V_{T H}\\right) v_{s a t} \\tag{11.1}\n\\end{equation*}\n$$\n\nExtreme velocity saturation leads to three deviations from the square-law behavior. First, the device current is linearly proportional to the overdrive and independent of the channel length. ${ }^{1}$ Second, $I_{D}$ reaches saturation even for $V_{D S}<V_{G S}-V_{T H}$ (Fig. 11.4). As seen in Fig. 11.2, the knee points occur at relatively low $V_{D S}$ values even as the overdrive reaches 350 mV. Third, the transconductance of a fully velocity-saturated MOSFET is\n\n$$\n\\begin{align*}\ng_{m} & =\\left.\\frac{\\partial I_{D}}{\\partial V_{G S}}\\right|_{V_{D S \\text { const }}}  \\tag{11.2}\\\\\n& =W C_{o x} v_{\\text {sat }} \\tag{11.3}\n\\end{align*}\n$$\n\na relatively constant value versus $I_{D}$ or $V_{G S}$. For instance, in the plots of Fig. 11.2, the change in $I_{D}$ remains fairly constant as the overdrive increases from 250 mV to 300 mV and from 300 mV to 350 mV.\nimage_name:Figure 11.4 Premature saturation of drain current due to velocity saturation.\ndescription:The graph in Figure 11.4 shows the behavior of drain current \\( I_D \\) as a function of drain-source voltage \\( V_{DS} \\) in a MOSFET, highlighting the effect of velocity saturation.\n\n1. **Type of Graph and Function:**\n- This is a plot graph illustrating the relationship between drain current \\( I_D \\) and drain-source voltage \\( V_{DS} \\).\n\n2. **Axes Labels and Units:**\n- The vertical axis represents the drain current \\( I_D \\), typically measured in amperes (A).\n- The horizontal axis represents the drain-source voltage \\( V_{DS} \\), measured in volts (V).\n- Key points on the horizontal axis include \\( V_{D0} \\) and \\( V_{GS} - V_{TH} \\), indicating threshold voltage levels and the onset of saturation.\n\n3. **Overall Behavior and Trends:**\n- The graph features two curves: one without velocity saturation (dashed line) and one with velocity saturation (solid line).\n- Without velocity saturation, \\( I_D \\) increases sharply with \\( V_{DS} \\) and reaches a higher saturation level.\n- With velocity saturation, \\( I_D \\) increases initially but levels off sooner, indicating a lower saturation current.\n\n4. **Key Features and Technical Details:**\n- The dashed line shows a scenario where the current continues to rise with \\( V_{DS} \\) beyond the threshold, achieving a higher saturation level.\n- The solid line indicates that with velocity saturation, the current plateaus at a lower \\( V_{DS} \\), signifying premature saturation.\n- The point \\( V_{GS} - V_{TH} \\) marks the transition to the saturation region.\n\n5. **Annotations and Specific Data Points:**\n- The graph includes annotations for both conditions: \"Without Velocity Saturation\" and \"With Velocity Saturation,\" clearly differentiating the two scenarios.\n- Vertical dashed lines indicate critical voltage points such as \\( V_{D0} \\) and \\( V_{GS} - V_{TH} \\), highlighting the onset of the saturation region.\n\nMobility Degradation with Vertical Field The mobility of charge carriers in the channel also decreases as the gate-source voltage and the vertical field increase (Fig. 11.5).\n\nimage_name:Figure 11.5 Reduction of mobility due to vertical electric field.\ndescription:Figure 11.5 illustrates the reduction of mobility (\\( \\mu \\)) due to the vertical electric field as a function of the overdrive voltage \\( V_{GS} - V_{TH} \\). This two-dimensional plot has the x-axis labeled \\( V_{GS} - V_{TH} \\) and the y-axis labeled \\( \\mu \\), representing mobility.\n\n1. **Type of Graph and Function:**\n- The graph plots the relationship between mobility and overdrive voltage, focusing on how mobility decreases with increasing vertical electric field.\n\n2. **Axes Labels and Units:**\n- **X-axis:** \\( V_{GS} - V_{TH} \\) (Overdrive Voltage)\n- **Y-axis:** \\( \\mu \\) (Mobility)\n- The units are not explicitly mentioned, but \\( V_{GS} - V_{TH} \\) is typically in volts, and mobility is a dimensionless ratio or could be in cm²/V·s.\n\n3. **Overall Behavior and Trends:**\n- The graph starts with a horizontal line at \\( \\mu_0 \\), indicating initial constant mobility.\n- As \\( V_{GS} - V_{TH} \\) increases, mobility \\( \\mu \\) decreases nonlinearly, showing a downward slope.\n- This trend indicates mobility degradation due to an increased vertical electric field.\n\n4. **Key Features and Technical Details:**\n- The graph transitions from a flat region to a declining slope.\n- No specific peaks, valleys, or inflection points are marked, but the overall trend is a smooth decline.\n\n5. **Annotations and Specific Data Points:**\n- The graph lacks specific annotations or numerical values but visually represents the concept of mobility degradation with increasing \\( V_{GS} - V_{TH} \\).\n\nWhat impact does this mobility degradation have on the device transconductance? Intuitively, we expect that $g_{m}$ no longer follows the linear relationship, $g_{m}=\\mu C_{o x}(W / L)\\left(V_{G S}-V_{T H}\\right)$, with the overdrive voltage. Figure 11.6 illustrates this behavior for the $5-\\mu \\mathrm{m} / 40-\\mathrm{nm}$ NFET mentioned earlier.\nimage_name:Figure 11.6 Transconductance as a function of overdrive voltage\ndescription:Figure 11.6 plots transconductance \\( g_m \\) as a function of the overdrive voltage \\( V_{GS} - V_{TH} \\). This line graph has the x-axis representing the overdrive voltage \\( V_{GS} - V_{TH} \\) in volts (V), ranging from 0 to 0.6 V. The y-axis represents the transconductance \\( g_m \\) in millisiemens (mS), ranging from 0 to 5 mS.\n\nOverall Behavior and Trends:\nThe graph shows a nonlinear relationship between \\( g_m \\) and \\( V_{GS} - V_{TH} \\). Initially, as \\( V_{GS} - V_{TH} \\) increases from 0, \\( g_m \\) rises sharply, indicating a strong dependence of transconductance on the overdrive voltage in this region. However, as \\( V_{GS} - V_{TH} \\) approaches 0.5 V, the rate of increase in \\( g_m \\) begins to decline, showing a saturation trend.\n\nKey Features and Technical Details:\n- The graph indicates that \\( g_m \\) does not increase linearly with \\( V_{GS} - V_{TH} \\) due to mobility degradation, consistent with the provided context.\n- An inflection point around 0.3 V marks where the rate of increase in \\( g_m \\) starts to slow down.\n- \\( g_m \\) reaches a maximum value slightly above 5 mS as \\( V_{GS} - V_{TH} \\) approaches 0.6 V, suggesting a saturation effect.\n\nAnnotations and Specific Data Points:\n- The graph includes gridlines to aid in visualizing changes in \\( g_m \\) with \\( V_{GS} - V_{TH} \\).\n- No specific data points are annotated, but the trend is clear and consistent with the theoretical expectation that mobility degradation affects transconductance behavior, deviating from linearity as \\( V_{GS} - V_{TH} \\) increases.\n\n#### Example 11.1\n\nWe approximate the mobility plot of Fig. 11.5 using\n\n$$\n\\begin{equation*}\n\\mu=\\frac{\\mu_{0}}{1+\\theta\\left(V_{G S}-V_{T H}\\right)} \\tag{11.4}\n\\end{equation*}\n$$\n\nwhere $\\theta$ is a proportionality factor with a dimension of (voltage) ${ }^{-1}$. Determine the transconductance of a MOSFET experiencing this type of mobility degradation.\n\n#### Solution\n\nWe write\n\n$$\n\\begin{equation*}\nI_{D}=\\frac{1}{2} \\frac{\\mu_{0} C_{o x}}{1+\\theta\\left(V_{G S}-V_{T H}\\right)} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2} \\tag{11.5}\n\\end{equation*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\ng_{m}=\\mu_{0} C_{o x} \\frac{W}{L} \\frac{(\\theta / 2)\\left(V_{G S}-V_{T H}\\right)^{2}+V_{G S}-V_{T H}}{\\left[1+\\theta\\left(V_{G S}-V_{T H}\\right)\\right]^{2}} \\tag{11.6}\n\\end{equation*}\n$$\n\nAs expected, for $\\theta\\left(V_{G S}-V_{T H}\\right) \\ll 1$, we have $g_{m} \\approx \\mu_{0} C_{o x}(W / L)\\left(V_{G S}-V_{T H}\\right)$. At the other extreme, if $\\left(V_{G S}-V_{T H}\\right) \\gg 2 / \\theta$, then $g_{m}$ approaches a constant value: $g_{m} \\approx(1 / 2) \\mu_{0} C_{o x}(W / L) / \\theta$.\n\nIn general, the degradation of mobility due to both lateral and vertical fields ( $V_{D S}$ and $V_{G S}$, respectively) must be considered. Nonetheless, the simplified results derived above are sufficient for most of our analog design studies."
},
{
    "text": "Among the various short-channel effects, two are particularly significant at this stage of our research, both related to the mobility of carriers in the channel. Recall our assumption that the carrier velocity is given by \\( v = \\mu E \\), where \\( E \\) represents the electric field. We revisit this assumption here.\n\n**Velocity Saturation:** In a MOSFET, as \\( V_{DS} \\) and thus the electric field along the source-drain path increase, \\( v \\) does not increase proportionally (Fig. 11.3).\n*Image Description: Figure 11.3 illustrates velocity saturation at high electric fields. The graph plots carrier velocity against the electric field, showing velocity saturation in a MOSFET. The horizontal axis, labeled 'E', represents the electric field, while the vertical axis, labeled 'Carrier Velocity', is in cm/s. The curve starts from the origin, rising linearly at low electric fields, indicating proportional increases in carrier velocity. As the electric field increases, the curve flattens, signifying velocity saturation where the carrier velocity approaches a maximum value despite further electric field increases. The critical electric field, 'E_crit', is marked on the horizontal axis, transitioning from linear to saturation behavior. At this point, the carrier velocity nears \\( 10^7 \\) cm/s, indicated by a horizontal dashed line representing the maximum achievable carrier velocity, highlighting velocity saturation's effect in short-channel MOSFETs.*\n\nWe describe this phenomenon as \"velocity saturation,\" or equivalently, a decline in mobility (the slope of \\( v \\) versus \\( E \\)). This effect arises because MOSFET lengths have shrunk from about \\( 1 \\mu \\mathrm{m} \\) to 40 nm (a reduction factor of 25), while the allowable drain-source voltage has decreased from 5 V to around 1 V. Consequently, the lateral electric field exceeds \\( E_{\\text{crit}} \\approx 1 \\mathrm{V}/\\mu \\mathrm{m} \\) in Fig. 11.3.\n\nWe address velocity saturation modeling in Chapter 17, but consider an extreme case here: assume carriers reach the saturated velocity, \\( v_{\\text{sat}} \\), immediately upon leaving the source. Since \\( I = Q_d \\cdot v \\), where \\( Q_d \\) is the charge density (per unit length) given by \\( W C_{ox} (V_{GS} - V_{TH}) \\), we have:\n\n\\[\n\\begin{equation*}\nI_D = W C_{ox} (V_{GS} - V_{TH}) v_{\\text{sat}} \\tag{11.1}\n\\end{equation*}\n\\]\n\nExtreme velocity saturation results in three deviations from square-law behavior. First, the device current is linearly proportional to the overdrive and independent of the channel length. Second, \\( I_D \\) reaches saturation even for \\( V_{DS} < V_{GS} - V_{TH} \\) (Fig. 11.4). As seen in Fig. 11.2, knee points occur at relatively low \\( V_{DS} \\) values, even as the overdrive reaches 350 mV. Third, the transconductance of a fully velocity-saturated MOSFET becomes:\n\n\\[\n\\begin{align*}\ng_m &= \\left. \\frac{\\partial I_D}{\\partial V_{GS}} \\right|_{V_{DS \\text{ const}}} \\tag{11.2} \\\\\n&= W C_{ox} v_{\\text{sat}} \\tag{11.3}\n\\end{align*}\n\\]\n\na relatively constant value versus \\( I_D \\) or \\( V_{GS} \\). For instance, in Fig. 11.2, \\( I_D \\) changes consistently as the overdrive increases from 250 mV to 300 mV and from 300 mV to 350 mV.\n*Image Description: Figure 11.4 shows premature saturation of drain current due to velocity saturation. The graph plots drain current \\( I_D \\) against drain-source voltage \\( V_{DS} \\) in a MOSFET. The vertical axis represents \\( I_D \\) (typically in amperes), and the horizontal axis represents \\( V_{DS} \\) (in volts). Key points on the horizontal axis include \\( V_{D0} \\) and \\( V_{GS} - V_{TH} \\). The graph features two curves: one without velocity saturation (dashed line) and one with velocity saturation (solid line). Without velocity saturation, \\( I_D \\) increases sharply and reaches a higher saturation level. With velocity saturation, \\( I_D \\) levels off sooner, indicating a lower saturation current. Annotations differentiate the two conditions, and vertical dashed lines mark critical voltage points.*\n\n**Mobility Degradation with Vertical Field:** The mobility of charge carriers in the channel also decreases as the gate-source voltage and vertical field increase (Fig. 11.5).\n*Image Description: Figure 11.5 depicts the reduction of mobility (\\( \\mu \\)) due to the vertical electric field as a function of the overdrive voltage \\( V_{GS} - V_{TH} \\). The graph is a two-dimensional plot with the x-axis labeled \\( V_{GS} - V_{TH} \\) and the y-axis labeled \\( \\mu \\). The graph starts with a horizontal line at \\( \\mu_0 \\), indicating initial constant mobility. As \\( V_{GS} - V_{TH} \\) increases, mobility \\( \\mu \\) decreases nonlinearly, showing a smooth decline due to increased vertical electric field.*\n\nWhat impact does this mobility degradation have on device transconductance? Intuitively, we expect \\( g_m \\) to deviate from the linear relationship \\( g_m = \\mu C_{ox} (W / L) (V_{GS} - V_{TH}) \\) with the overdrive voltage. Figure 11.6 demonstrates this behavior for the \\( 5-\\mu \\mathrm{m} / 40-\\mathrm{nm} \\) NFET mentioned earlier.\n*Image Description: Figure 11.6 plots transconductance \\( g_m \\) against the overdrive voltage \\( V_{GS} - V_{TH} \\). The x-axis represents \\( V_{GS} - V_{TH} \\) in volts (ranging from 0 to 0.6 V), and the y-axis represents \\( g_m \\) in millisiemens (ranging from 0 to 5 mS). The graph shows a nonlinear relationship, with \\( g_m \\) increasing sharply initially and then slowing as \\( V_{GS} - V_{TH} \\) approaches 0.5 V, indicating saturation. An inflection point around 0.3 V marks the transition to a slower rate of increase, with \\( g_m \\) reaching a maximum slightly above 5 mS at 0.6 V.*\n\n#### Example 11.1\n\nWe approximate the mobility plot in Fig. 11.5 using:\n\n\\[\n\\begin{equation*}\n\\mu = \\frac{\\mu_0}{1 + \\theta (V_{GS} - V_{TH})} \\tag{11.4}\n\\end{equation*}\n\\]\n\nwhere \\( \\theta \\) is a proportionality factor with units of (voltage) \\( ^{-1} \\). Determine the transconductance of a MOSFET experiencing this type of mobility degradation.\n\n#### Solution\n\nWe express:\n\n\\[\n\\begin{equation*}\nI_D = \\frac{1}{2} \\frac{\\mu_0 C_{ox}}{1 + \\theta (V_{GS} - V_{TH})} \\frac{W}{L} (V_{GS} - V_{TH})^2 \\tag{11.5}\n\\end{equation*}\n\\]\n\nand thus:\n\n\\[\n\\begin{equation*}\ng_m = \\mu_0 C_{ox} \\frac{W}{L} \\frac{(\\theta / 2) (V_{GS} - V_{TH})^2 + V_{GS} - V_{TH}}{[1 + \\theta (V_{GS} - V_{TH})]^2} \\tag{11.6}\n\\end{equation*}\n\\]\n\nAs expected, for \\( \\theta (V_{GS} - V_{TH}) \\ll 1 \\), \\( g_m \\approx \\mu_0 C_{ox} (W / L) (V_{GS} - V_{TH}) \\). At the other extreme, if \\( (V_{GS} - V_{TH}) \\gg 2 / \\theta \\), \\( g_m \\) approaches a constant value: \\( g_m \\approx (1 / 2) \\mu_0 C_{ox} (W / L) / \\theta \\).\n\nIn general, mobility degradation due to both lateral and vertical fields (\\( V_{DS} \\) and \\( V_{GS} \\), respectively) must be considered. However, the simplified results derived above are sufficient for most of our analog design studies."
},
{
    "text": "Among the various short-channel effects, two are particularly significant at this stage of our research, both concerning the mobility of carriers in the channel. Recall our assumption that the carrier velocity is given by $v=\\mu E$, where $E$ represents the electric field. We will re-examine this assumption here.\n\n**Velocity Saturation** In a MOSFET, as $V_{D S}$ and consequently the electric field along the source-drain path increase, $v$ does not increase proportionally (Fig. 11.3).\nimage_name:Figure 11.3 Velocity saturation at high electric fields.\ndescription:Figure 11.3 presents a graph of carrier velocity versus electric field, illustrating velocity saturation in a MOSFET. This two-dimensional plot has the horizontal axis labeled 'E' for the electric field and the vertical axis labeled 'Carrier Velocity' in cm/s.\n\nThe graph features a curve originating from the origin, initially rising linearly, indicating that at low electric fields, carrier velocity increases proportionally with the electric field. However, as the electric field intensifies, the curve flattens, showing a reduced rate of increase in carrier velocity. This flattening signifies the onset of velocity saturation, where the carrier velocity approaches a maximum value and ceases to rise significantly despite further electric field increases.\n\nThe critical electric field, denoted as 'E_crit', is marked on the horizontal axis, marking the transition from linear increase to saturation. At this point, the carrier velocity nears approximately 10^7 cm/s, indicated by a horizontal dashed line from the vertical axis. This line represents the maximum achievable carrier velocity under the given conditions, highlighting velocity saturation's effect.\n\nOverall, the graph effectively demonstrates how carrier velocity becomes limited at high electric fields due to velocity saturation, a key factor in short-channel MOSFET behavior.\n\nWe refer to this phenomenon as \"velocity saturation,\" or equivalently, a decline in mobility (the slope of $v$ versus $E$). This effect arises because MOSFET lengths have decreased from about $1 \\mu \\mathrm{~m}$ to 40 nm (a reduction factor of 25), while the allowable drain-source voltage has dropped from 5 V to around 1 V. Consequently, the lateral electric field has exceeded $E_{\\text {crit }}(\\approx 1 \\mathrm{~V} / \\mu \\mathrm{m})$ as shown in Fig. 11.3.\n\nWe address velocity saturation modeling in Chapter 17, but let's consider an extreme scenario here: suppose the charge carriers reach the saturated velocity, $v_{\\text {sat }}$, immediately upon leaving the source. Given $I=Q_{d} \\cdot v$, where $Q_{d}$ is the charge density (per unit length) and is given by $W C_{o x}\\left(V_{G S}-V_{T H}\\right)$, we have\n\n$$\n\\begin{equation*}\nI_{D}=W C_{o x}\\left(V_{G S}-V_{T H}\\right) v_{s a t} \\tag{11.1}\n\\end{equation*}\n$$\n\nExtreme velocity saturation leads to three deviations from the square-law behavior. First, the device current is linearly proportional to the overdrive and independent of the channel length. Second, $I_{D}$ reaches saturation even for $V_{D S}<V_{G S}-V_{T H}$ (Fig. 11.4). As seen in Fig. 11.2, the knee points occur at relatively low $V_{D S}$ values even as the overdrive reaches 350 mV. Third, the transconductance of a fully velocity-saturated MOSFET becomes\n\n$$\n\\begin{align*}\ng_{m} & =\\left.\\frac{\\partial I_{D}}{\\partial V_{G S}}\\right|_{V_{D S \\text { const }}}  \\tag{11.2}\\\\\n& =W C_{o x} v_{\\text {sat }} \\tag{11.3}\n\\end{align*}\n$$\n\na relatively constant value versus $I_{D}$ or $V_{G S}$. For instance, in Fig. 11.2, the change in $I_{D}$ remains fairly constant as the overdrive increases from 250 mV to 300 mV and from 300 mV to 350 mV.\nimage_name:Figure 11.4 Premature saturation of drain current due to velocity saturation.\ndescription:Figure 11.4 depicts the behavior of drain current \\( I_D \\) as a function of drain-source voltage \\( V_{DS} \\) in a MOSFET, highlighting velocity saturation effects.\n\n1. **Graph Type and Function:**\n- This plot graph shows the relationship between drain current \\( I_D \\) and drain-source voltage \\( V_{DS} \\).\n\n2. **Axes Labels and Units:**\n- The vertical axis represents \\( I_D \\) (typically in amperes, A).\n- The horizontal axis represents \\( V_{DS} \\) (typically in volts, V).\n- Key points on the horizontal axis include \\( V_{D0} \\) and \\( V_{GS} - V_{TH} \\), indicating threshold voltage and saturation onset.\n\n3. **Overall Behavior and Trends:**\n- The graph includes two curves: one without velocity saturation (dashed line) and one with velocity saturation (solid line).\n- Without velocity saturation, \\( I_D \\) increases sharply with \\( V_{DS} \\) and reaches a higher saturation level.\n- With velocity saturation, \\( I_D \\) increases initially but levels off sooner, indicating a lower saturation current.\n\n4. **Key Features and Technical Details:**\n- The dashed line shows current increasing with \\( V_{DS} \\) beyond the threshold, reaching higher saturation.\n- The solid line indicates that with velocity saturation, current plateaus at a lower \\( V_{DS} \\), showing premature saturation.\n- \\( V_{GS} - V_{TH} \\) marks the transition to saturation.\n\n5. **Annotations and Specific Data Points:**\n- Annotations differentiate \"Without Velocity Saturation\" and \"With Velocity Saturation.\"\n- Vertical dashed lines indicate critical voltage points like \\( V_{D0} \\) and \\( V_{GS} - V_{TH} \\).\n\n**Mobility Degradation with Vertical Field** The mobility of charge carriers in the channel also decreases as the gate-source voltage and vertical field increase (Fig. 11.5).\n\nimage_name:Figure 11.5 Reduction of mobility due to vertical electric field.\ndescription:Figure 11.5 illustrates the reduction of mobility (\\( \\mu \\)) due to the vertical electric field as a function of overdrive voltage \\( V_{GS} - V_{TH} \\). This two-dimensional plot has the x-axis labeled \\( V_{GS} - V_{TH} \\) and the y-axis labeled \\( \\mu \\) for mobility.\n\n1. **Graph Type and Function:**\n- The graph shows the relationship between mobility and overdrive voltage, focusing on mobility reduction with increasing vertical electric field.\n\n2. **Axes Labels and Units:**\n- **X-axis:** \\( V_{GS} - V_{TH} \\) (Overdrive Voltage)\n- **Y-axis:** \\( \\mu \\) (Mobility)\n- Units are not explicitly mentioned, but \\( V_{GS} - V_{TH} \\) is in volts, and mobility is dimensionless or in cm²/V·s.\n\n3. **Overall Behavior and Trends:**\n- The graph starts with a horizontal line at \\( \\mu_0 \\), indicating initial constant mobility.\n- As \\( V_{GS} - V_{TH} \\) increases, \\( \\mu \\) decreases nonlinearly, showing mobility degradation.\n\n4. **Key Features and Technical Details:**\n- The graph transitions from a flat region to a declining slope.\n- No specific peaks or inflection points are marked, but the trend is a smooth decline.\n\n5. **Annotations and Specific Data Points:**\n- The graph lacks specific annotations or numerical values but visually represents mobility degradation with increasing \\( V_{GS} - V_{TH} \\).\n\nWhat impact does this mobility degradation have on device transconductance? Intuitively, we expect that $g_{m}$ no longer follows the linear relationship, $g_{m}=\\mu C_{o x}(W / L)\\left(V_{G S}-V_{T H}\\right)$, with the overdrive voltage. Figure 11.6 illustrates this behavior for the $5-\\mu \\mathrm{m} / 40-\\mathrm{nm}$ NFET mentioned earlier.\nimage_name:Figure 11.6 Transconductance as a function of overdrive voltage\ndescription:Figure 11.6 plots transconductance \\( g_m \\) as a function of overdrive voltage \\( V_{GS} - V_{TH} \\). This line graph has the x-axis representing \\( V_{GS} - V_{TH} \\) in volts (V), ranging from 0 to 0.6 V, and the y-axis representing \\( g_m \\) in millisiemens (mS), ranging from 0 to 5 mS.\n\nOverall Behavior and Trends:\nThe graph shows a nonlinear relationship between \\( g_m \\) and \\( V_{GS} - V_{TH} \\). Initially, as \\( V_{GS} - V_{TH} \\) increases from 0, \\( g_m \\) rises sharply, indicating strong dependence on the overdrive voltage. However, as \\( V_{GS} - V_{TH} \\) approaches 0.5 V, the rate of increase in \\( g_m \\) diminishes, showing a saturation trend.\n\nKey Features and Technical Details:\n- The graph indicates that \\( g_m \\) does not increase linearly with \\( V_{GS} - V_{TH} \\) due to mobility degradation.\n- An inflection point around 0.3 V marks where the rate of increase in \\( g_m \\) begins to slow.\n- \\( g_m \\) reaches a maximum slightly above 5 mS as \\( V_{GS} - V_{TH} \\) approaches 0.6 V, suggesting saturation.\n\nAnnotations and Specific Data Points:\n- Gridlines aid in visualizing changes in \\( g_m \\) with \\( V_{GS} - V_{TH} \\).\n- No specific data points are annotated, but the trend aligns with the expectation that mobility degradation affects transconductance, deviating from linearity as \\( V_{GS} - V_{TH} \\) increases.\n\n#### Example 11.1\n\nWe approximate the mobility plot of Fig. 11.5 using\n\n$$\n\\begin{equation*}\n\\mu=\\frac{\\mu_{0}}{1+\\theta\\left(V_{G S}-V_{T H}\\right)} \\tag{11.4}\n\\end{equation*}\n$$\n\nwhere $\\theta$ is a proportionality factor with a dimension of (voltage) ${ }^{-1}$. Determine the transconductance of a MOSFET affected by this type of mobility degradation.\n\n#### Solution\n\nWe express\n\n$$\n\\begin{equation*}\nI_{D}=\\frac{1}{2} \\frac{\\mu_{0} C_{o x}}{1+\\theta\\left(V_{G S}-V_{T H}\\right)} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)^{2} \\tag{11.5}\n\\end{equation*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\ng_{m}=\\mu_{0} C_{o x} \\frac{W}{L} \\frac{(\\theta / 2)\\left(V_{G S}-V_{T H}\\right)^{2}+V_{G S}-V_{T H}}{\\left[1+\\theta\\left(V_{G S}-V_{T H}\\right)\\right]^{2}} \\tag{11.6}\n\\end{equation*}\n$$\n\nAs expected, for $\\theta\\left(V_{G S}-V_{T H}\\right) \\ll 1$, we have $g_{m} \\approx \\mu_{0} C_{o x}(W / L)\\left(V_{G S}-V_{T H}\\right)$. At the other extreme, if $\\left(V_{G S}-V_{T H}\\right) \\gg 2 / \\theta$, then $g_{m}$ approaches a constant value: $g_{m} \\approx(1 / 2) \\mu_{0} C_{o x}(W / L) / \\theta$.\n\nIn general, the degradation of mobility due to both lateral and vertical fields ( $V_{D S}$ and $V_{G S}$, respectively) must be considered. Nonetheless, the simplified results derived above are sufficient for most of our analog design studies."
},
{
    "text": "Transconductance is a fundamental aspect of nearly every analog circuit, typically involving transistors operating in the saturation region where the required transconductance is crucial. The equations for transconductance, denoted as $g_{m}$, are detailed in Chapter 2 and include the following:\n\n$$\n\\begin{align*}\ng_{m} & =\\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)  \\tag{11.7}\\\\\n& =\\sqrt{2 \\mu_{n} C_{o x} \\frac{W}{L} I_{D}}  \\tag{11.8}\\\\\n& =\\frac{2 I_{D}}{V_{G S}-V_{T H}} \\tag{11.9}\n\\end{align*}\n$$\n\nThese equations suggest that the transconductance can be scaled by adjusting three key parameters: theW / L$, $V_{G S}-V_{T H}$, and $I_{D}$. Our the long-channel device, we is assumed that $I_{D} \\approx(1 / 2) \\mu_{n} C_{o x}(W / L)\\left(V_{G S}-V_{T H}\\right)^{2}$, simplifying to $V_{G S}-V_{T H} \\approx \\sqrt{2 I_{D} /\\left(\\mu_{n} C_{o x} W / L\\right)}$. By analysis involves holding one parameter constant while varying the other two.\n\nUsing equation (11.7), it $W / L$ is increased with a constant $V_{G S}-V_{T H}$, both $g_{m}$ and $I_{D}$ scale scalely scale with $W / L$, leading depicted in Figure 11.7(a), which to a corresponding increase in power consumption. Conversely, if $V_{G S}-V_{T H}$ while a constant $W / L$ will necessitate a higher drain current, as shown in Figure 11.7(b).Equ $ $W / L$ with a constant $I_{D}$, as per Figure 11.7(c), $V_{G S}-V_{T H}$ is decrease. This, due subconductance does not indefinitely to rise indefinitely due to subthreshold conduction.. Keeping the other hand, if $I_{D}$ is increased with $ $W / L$ constant, as in Figure 11.7(d), both $V_{G S}-V_{T H}$ and theV_{D S, \\min}$$ must increase.\n\nAccording to equation (11.9), increasing $I_{D}$ with a constant $V_{G S}-V_{T H}$, as in in Figure 11.7(e), requires an increase in $W / L$. Conversely, decreasing\nTransconductance is a pivotal\nTransconductance plays a pivotal\nTransconductance is a pivotal aspect in nearly\nTransconductance is a pivotal characteristic in is in the\nTransconductance is a fundamental property that is ubiquitous\nTransconductance is a essential feature in in"
},
{
    "text": "Transconductance is a fundamental concept in analog circuits, often involving the operation of transistors. Consider a scenario where a transistor is in saturation but fails to deliver the necessary transconductance. The equations from Chapter 2,\n\n$$\n\\begin{align*}\ng_{m} & =\\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)  \\tag{11.7}\\\\\n& =\\sqrt{2 \\mu_{n} C_{o x} \\frac{W}{L} I_{D}}  \\tag{11.8}\\\\\n& =\\frac{2 I_{D}}{V_{G S}-V_{T H}} \\tag{11.9}\n\\end{align*}\n$$\n\nindicate that altering three parameters—$W / L$, $V_{G S}-V_{T H}$, or $I_{D}$—can adjust the transconductance. We examine these scenarios, assuming a long-channel device and therefore $I_{D} \\approx(1 / 2) \\mu_{n} C_{o x}(W / L)\\left(V_{G S}-V_{T H}\\right)^{2}$. This implies $V_{G S}-V_{T H} \\approx \\sqrt{2 I_{D} /\\left(\\mu_{n} C_{o x} W / L\\right)}$. In each case, we maintain one parameter constant while adjusting the other two.\n\nUsing equation (11.7), we can elevate $W / L$ while keeping $V_{G S}-V_{T H}$ unchanged. Consequently, both $g_{m}$ and $I_{D}$ scale linearly with $W / L$ (why?) [Fig. 11.7(a)], as does the power consumption. Alternatively, we\n\nimage_name:(a)\ndescription:This graph labeled (a) depicts a linear relationship between the transconductance (g_m) and the drain current (I_D) relative to the width-to-length ratio (W/L) of a MOSFET. The horizontal axis measures the width-to-length ratio (W/L), and the vertical axis represents both the transconductance (g_m) and the drain current (I_D). The parameter V_GS - V_TH is held constant on this graph.\n\n1. **Graph Type and Function:**\n- This linear graph exhibits the dependence of g_m and I_D on W/L.\n\n2. **Axes Labels and Units:**\n- **X-axis:** Width-to-length ratio (W/L) (unitless).\n- **Y-axis:** Transconductance (g_m) and Drain Current (I_D) (units not specified, assumed to be consistent with typical electrical units like Siemens for g_m and Amperes for I_D).\n\n3. **Overall Behavior and Trends:**\n- Both g_m and I_D exhibit a linear increase with the rising W/L. This demonstrates a direct proportionality between these parameters and the width-to-length ratio when V_GS - V_TH is constant.\n\n4. **Key Features and Technical Details:**\n- The graph features two straight lines emanating from the origin, signifying the linear scaling of both g_m and I_D with W/L.\n- The linearity suggests that doubling the W/L will double both g_m and I_D, preserving the proportionality.\n\n5. **Annotations and Specific Data Points:**\n- The graph lacks specific numerical values or markers but clearly illustrates the linear trend across the W/L range displayed.\n\nimage_name:(b)\ndescription:This graph labeled (b) in Figure 11.7 illustrates the relationship between the transconductance, \\( g_m \\), the drain current, \\( I_D \\), and the gate-source voltage minus the threshold voltage, \\( V_{GS} - V_{TH} \\), while maintaining the width-to-length ratio, \\( W/L \\), constant.\n\n1. Graph Type and Function:\nThis is a linear graph depicting the dependencies of two parameters, \\( g_m \\) and \\( I_D \\), on \\( V_{GS} - V_{TH} \\).\n\n2. Axes Labels and Units:\n- **Horizontal Axis:** Represents \\( V_{GS} - V_{TH} \\).\n- **Vertical Axis:** Represents both \\( g_m \\) and \\( I_D \\).\n- The graph employs a linear scale for both axes.\n\n3. **Overall Behavior and Trends:**\n- The plot reveals that as \\( V_{GS} - V_{TH} \\) increases, \\( g_m \\) increases linearly, while \\( I_D \\) also increases but at a decreasing rate, indicating a sub-linear relationship.\n- The graph initiates from the origin, suggesting that both \\( g_m \\) and \\( I_D \\) are zero when \\( V_{GS} - V_{TH} \\) is zero.\n\n4. **Key Features and Technical Details:**\n- \\( g_m \\) demonstrates a positive linear trend with \\( V_{GS} - V_{TH} \\), indicating a direct proportionality.\n- \\( I_D \\) increases with \\( V_{GS} - V_{TH} \\), but the curve bends downwards, reflecting diminishing returns in \\( I_D \\) increase as \\( V_{GS} - V_{TH} \\) grows.\n\n5. **Annotations and Specific Data Points:**\n- The graph lacks specific numerical values but clearly presents the linear and sub-linear trends.\n- No specific markers or reference lines are present beyond the axes themselves.\n\nimage_name:(c)\ndescription:This graph labeled (c) in Figure 11.7 depicts the relationship between the transconductance (g_m) and the ratio of the width to length (W/L) of a MOSFET, with the gate-source voltage minus the threshold voltage (V_GS - V_TH) held constant. The axes are defined as follows:\n\n1. **Y-axis**: Represents the transconductance (g_m), a measure of the MOSFET's gain, depicted in arbitrary units.\n2. **X-axis**: Represents the ratio of the width to length (W/L) of the MOSFET, also in arbitrary units.\n\n**Overall Behavior and Trends:**\n- As W/L increases, the transconductance (g_m) also increases, showcasing a positive correlation between these two parameters.\n- The graph portrays a nonlinear upward trend, suggesting that the increase in g_m is not directly proportional to W/L but follows a curve that rises more slowly as W/L becomes larger.\n\n**Key Features and Technical Details:**\n- The graph commences from the origin, signifying that at zero W/L, the transconductance is also zero.\n- A noticeable curve in the plot indicates diminishing returns in transconductance increase as W/L grows larger.\n- The graph lacks specific annotations or markers, focusing on the qualitative relationship between g_m and W/L when V_GS - V_TH is constant.\n\n**Annotations and Specific Data Points:**\n- The graph omits specific numerical values or markers, concentrating on the qualitative linear trend of the relationships.\n\nThis graph aids in understanding how altering the physical dimensions of a MOSFET affects its transconductance when the voltage condition is maintained, emphasizing the significance of device geometry in electrical performance.\n\nimage_name:(d)\ndescription:This graph labeled (d) in Figure 11.7 presents the relationship between the transconductance ($g_m$) and the gate-source voltage minus the threshold voltage ($V_{GS} - V_{TH}$) as dependent on the drain current ($I_D$), with the width-to-length ratio ($W/L$) held constant.\n\n1. **Graph Type and Function**: This is a linear plot showing how $g_m$ and $V_{GS} - V_{TH}$ vary in relation to $I_D$.\n\n2. **Axes Labels and Units**:\n- The horizontal axis represents the drain current ($I_D$).\n- The left vertical axis represents the transconductance ($g_m$).\n- The right vertical axis represents the gate-source voltage minus the threshold voltage ($V_{GS} - V_{TH}$).\n- Linear scales are used for all axes.\n\n3. **Overall Behavior and Trends**:\n- As $I_D$ increases, $g_m$ exhibits an upward curve, indicating that transconductance increases with increasing drain current.\n- Simultaneously, $V_{GS} - V_{TH}$ also increases, showing a similar upward trend.\n\n4. **Key Features and Technical Details**:\n- Both $g_m$ and $V_{GS} - V_{TH}$ display non-linear increases with $I_D$, suggesting a quadratic relationship typical of MOSFET behavior in saturation.\n- The graph implies that with a constant $W/L$, increasing $I_D$ leads to higher $g_m$ and $V_{GS} - V_{TH}$, reflecting the dependency of these parameters on the drain current.\n\n5. **Annotations and Specific Data Points**:\n- The graph lacks specific annotations or numerical data points. The curves are smooth and continuous, suggesting a theoretical representation rather than empirical data.\n\nimage_name:(e)\ndescription:This graph labeled (e) in Figure 11.7 illustrates the relationship between the transconductance (g_m) and the width-to-length ratio (W/L) as functions of the drain current (I_D), with the gate-source voltage minus threshold voltage (V_GS - V_TH) held constant.\n\n1. **Graph Type and Function:**\n- The graph is a linear plot depicting the dependence of two variables, g_m and W/L, on I_D.\n\n2. **Axes Labels and Units:**\n- The horizontal axis represents the drain current (I_D), typically measured in amperes (A).\n- The vertical axis on the left represents the transconductance (g_m), usually measured in siemens (S).\n- The vertical axis on the right represents the width-to-length ratio (W/L), a dimensionless quantity.\n\n3. **Overall Behavior and Trends:**\n- Both g_m and W/L display a linear increase as the drain current (I_D) increases. This indicates a direct proportionality between these parameters and I_D when V_GS - V_TH is constant.\n\n4. **Key Features and Technical Details:**\n- The graph exhibits linear behavior without visible saturation or non-linear effects, suggesting that the device operates in a region where g_m and W/L are directly proportional to I_D.\n- The absence of peaks, valleys, or inflection points signifies a straightforward linear relationship.\n\n5. **Annotations and Specific Data Points**:\n- The graph omits specific numerical values or annotations, focusing on the qualitative linear trend of the relationships.\n\nThis graph aids in understanding how changes in drain current affect the transconductance and width-to-length ratio when the gate overdrive voltage is constant, highlighting the linear scaling of these parameters with I_D, which is crucial for designing and optimizing MOSFET operation in analog circuits.\n\nimage_name:(f)\ndescription:This graph labeled (f) in Figure 11.7 illustrates the relationship between the transconductance \\( g_m \\) and the width-to-length ratio \\( W/L \\) with respect to \\( V_{GS} - V_{TH} \\) when the drain current \\( I_D \\) is held constant.\n\nGraph Type and Function\nThis is a parametric plot depicting the dependence of two variables, \\( g_m \\) and \\( W/L \\), on the voltage difference \\( V_{GS} - V_{TH} \\), with a constant drain current \\( I_D \\).\n\nAxes Labels and Units\n- The horizontal axis represents \\( V_{GS} - V_{TH} \\), which is the gate-source voltage minus the threshold voltage.\n- The left vertical axis represents the transconductance \\( g_m \\).\n- The right vertical axis represents the width-to-length ratio \\( W/L \\).\n\nOverall Behavior and Trends\n- The plot presents two curves:\n- The \\( g_m \\) curve starts at a higher value and decreases as \\( V_{GS} - V_{TH} \\) increases. It exhibits a downward slope, indicating that \\( g_m \\) decreases with increasing \\( V_{GS} - V_{TH} \\) when \\( I_D \\) is constant.\n- The \\( W/L \\) curve starts at a lower value and increases as \\( V_{GS} - V_{TH} \\) increases. It shows an upward trend, suggesting that \\( W/L \\) increases with \\( V_{GS} - V_{TH} \\).\n\nKey Features and Technical Details\n- The \\( g_m \\) curve demonstrates a noticeable curvature, starting at a high point and gradually decreasing, indicating a nonlinear relationship.\n- The \\( W/L \\) curve, on the other hand, starts low and increases, suggesting an inverse relationship with \\( g_m \\).\n- A dotted line indicates a threshold or reference level for \\( I_D/\\xi V_T \\), providing a reference for the transconductance.\n\nAnnotations and Specific Data Points\n- The graph is annotated with a dotted horizontal line representing \\( I_D/\\xi V_T \\), serving as a reference for comparing the behavior of \\( g_m \\).\n- No specific numerical values are provided, but the trends are clear and indicative of the relationships between the variables.\n\nFigure 11.7 illustrates the dependencies of (a) $g_{m}$ and $I_{D}$ upon $W / L$, (b) $g_{m}$ and $I_{D}$ upon $V_{G S}-V_{T H}$, (c) $g_{m}$ and $V_{G S}-V_{T H}$ upon $W / L$, (d) $g_{m}$ and $V_{G S}-V_{T H}$ upon $I_{D}$, (e) $g_{m}$ and $W / L$ upon $I_{D}$, and (f) $g_{m}$ and $W / L$ upon $V_{G S}-V_{T H}$.\nWe can elevate $V_{G S}-V_{T H}$ while maintaining $W / L$ constant [Fig. 11.7(b)], necessitating a higher drain current. In the former scenario, the device capacitances increase, whereas in the latter, $V_{D S, \\text { min }}$ rises. Throughout this chapter, we use the notations $V_{D S, \\text { min }}, V_{D, s a t}$, and $V_{G S}-V_{T H}$ interchangeably.\n\nFrom (11.8), we can elevate $W / L$ while keeping $I_{D}$ constant [Fig. 11.7(c)], causing $V_{G S}-V_{T H}$ to decrease (why?). Due to subthreshold conduction, however, $g_{m}$ does not rise indefinitely in this case. If we maintain $W / L$ constant and increase $I_{D}$ [Fig. 11.7(d)], then $V_{G S}-V_{T H}$ and hence $V_{D S, \\min }$ must rise.\n\nFrom (11.9), we can increase $I_{D}$ while keeping $V_{G S}-V_{T H}$ constant [Fig. 11.7(e)]. This requires that $W / L$ increase. Alternatively, we can decrease $V_{G S}-V_{T H}$ and maintain $I_{D}$ constant [Fig. 11.7(f)], implying that $W / L$ must increase. For $V_{G S}-V_{T H} \\approx 0$, the device enters the subthreshold region and $g_{m} \\approx I_{D} /\\left(\\xi V_{T}\\right)$. In both cases, the device capacitances rise.\n\nNow, let's reconsider the aforementioned six scenarios for nanometer devices. We observe that the plots in Fig. 11.7 still hold qualitatively, but the $g_{m}$ and overdrive equations are more intricate. The case depicted in Fig. 11.7(a) is particularly fascinating and useful, warranting further examination in the subsequent example.\n\n#### Example 11.2\n\nThe linear scaling of $g_{m}$ and $I_{D}$ with $W / L$, depicted in Fig. 11.7(a), remains valid regardless of transistor characteristics. Explain why.\n\n#### Solution\n\nConsider two identical transistors connected in parallel (Fig. 11.8), each possessing a transconductance of $g_{m}$. If $V_{G S}$ changes by $\\Delta V$, then the drain current of each device changes by $g_{m} \\Delta V$, and hence the current of the composite device changes by $2 g_{m} \\Delta V$. This means the parallel combination exhibits a transconductance of $2 g_{m}$. We conclude that increasing both the width and the drain current of the transistor by a factor of $K(>1)$ is equivalent to placing $K$ transistors in parallel and increasing the $g_{m}$ by a factor of $K$. We refer to this as preserving the device's \"current density\" $\\left(I_{D} / W\\right)$ in this scenario. Note that the bias overdrive voltage remains constant in this case, as does the $g_{m} / I_{D}$ ratio. The latter property proves beneficial in our studies.\nimage_name:Figure 11.8\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: LOAD, G: VGS}\nname: M2, type: NMOS, ports: {S: GND, D: LOAD, G: VGS}\nname: VGS, type: VoltageSource, value: VGS, ports: {Np: VGS, Nn: GND}\n]\nextrainfo:This circuit consists of two NMOS transistors, M1 and M2, in a push-pull configuration with a load connected at the shared drain node. The gate voltage is supplied by a voltage source VGS.\n\nAmong the six scenarios depicted in Fig. 11.7, which are more prevalent in practice? Given that modern analog circuits must function with low supplies (around 1 V), we often confine $V_{G S}-V_{T H}$ to a few hundred millivolts. Therefore, to achieve a specific transconductance, we initially increase the width [Fig. 11.7(c)] to the extent that it significantly raises the $g_{m}$. As $g_{m}$ approaches a constant value (in the subthreshold region), the width is no longer a determining factor, leaving the drain current as the sole parameter that can elevate the $g_{m}$ [Fig. 11.7(d)]. However, as we increase $I_{D}$ in this case, $V_{G S}-V_{T H}$ may surpass the allocated value, forcing us to resort to the scenario in Fig. 11.7(e) [which is equivalent to that in Fig. 11.7(a)]. These trials and errors might seem arbitrary, but do not lose hope! The remainder of this section is dedicated to developing a systematic approach to transistor design. We commence with an important example.\n\n#### Example 11.3\n\nA transistor with an aspect ratio of $(W / L)_{R E F}$ exhibits the $g_{m}-I_{D}$ characteristic shown in Fig. 11.9(a).\nimage_name:(a)\ndescription:This graph in Fig. 11.9(a) presents a plot of transconductance (g_m) versus drain"
},
{
    "text": "Device transconductance is a critical factor in nearly all analog circuits. Consider a scenario where a transistor is operating in the saturation region but fails to deliver the necessary transconductance. The $g_{m}$ equations in Chapter 2,\n\n$$\n\\begin{align*}\ng_{m} & =\\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)  \\tag{11.7}\\\\\n& =\\sqrt{2 \\mu_{n} C_{o x} \\frac{W}{L} I_{D}}  \\tag{11.8}\\\\\n& =\\frac{2 I_{D}}{V_{G S}-V_{T H}} \\tag{11.9}\n\\end{align*}\n$$\n\nindicate that adjusting\nTrans appears there was an error with the text of the provided text, particularly may have caused an responsephrasingased text to be incomplete off. I's try again. the entire passage provided. If re the full text you rephrasing,"
},
{
    "text": "Transconductance is a fundamental aspect of virtually every analog circuit, often governed by a transistor's operation within the saturation region. If the transistor does not meet the necessary transconductance, we can turn to the equations from Chapter 2:\n\n$$\n\\begin{align*}\ng_{m} & =\\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)  \\tag{11.7}\\\\\n& =\\sqrt{2 \\mu_{n} C_{o x} \\frac{W}{L} I_{D}}  \\tag{11.8}\\\\\n& =\\frac{2 I_{D}}{V_{G S}-V_{T H}} \\tag{11.9}\n\\end{align*}\n$$\n\nThese equations indicate that by adjusting three key parameters—$W / L$, $V_{G S}-V_{T H}$, or $I_{D}$—we can scale the transconductance accordingly. We explore these scenarios with the assumption of a long-channel device, leading to the approximation $I_{D} \\approx(1 / 2) \\mu_{n} C_{o x}(W / L)\\left(V_{G S}-V_{T H}\\right)^{2}$. This simplifies to $V_{G S}-V_{T H} \\approx \\sqrt{2 I_{D} /\\left(\\mu_{n} C_{o x} W / L\\right)}$. In each scenario, we maintain one parameter as constant while altering the other two.\n\nFrom equation (11.7), we can elevate $W / L$ while keeping $V_{G S}-V_{T H}$ steady. Under these conditions, both $g_{m}$ and $I_{D}$ will scale linearly with $W / L$ (the reason for which is a topic for discussion) [Fig. 11.7(a)], as will the power consumption. Conversely, we can augment $V_{G S}-V_{T H}$ with $W / L$ held constant [Fig. 11.7(b)], necessitating a higher drain current. The former scenario sees an increase in device capacitance, whereas in the latter, $V_{D S, \\text { min }}$ increases. Throughout this chapter, we treat the notations $V_{D S, \\text { min }}, V_{D, s a t}$, and $V_{G S}-V_{T H}$ as interchangeable.\n\nEquation (11.8) allows us to boost $W / L$ while keeping $I_{D}$ unchanged [Fig. 11.7(c)], resulting in a reduction of $V_{G S}-V_{T H}$ (the rationale behind this is another point for analysis). However, due to subthreshold conduction, $g_{m}$ does not escalate indefinitely. If we maintain $W / L$ constant and raise $I_{D}$ [Fig. 11.7(d)], then $V_{G S}-V_{T H}$, and consequently $V_{D S, \\min }$, must ascend.\n\nAccording to equation (11.9), we can escalate $I_{D}$ while keeping $V_{G S}-V_{T H}$ constant [Fig. 11.7(e)]. This necessitates an increase in $W / L$. Alternatively, we can diminish $V_{G S}-V_{T H}$ and keep $I_{D}$ constant [Fig. 11.7(f)], which implies that $W / L$ must grow. When $V_{G S}-V_{T H}$ is approximately zero, the device enters the subthreshold region where $g_{m} \\approx I_{D} /\\left(\\xi V_{T}\\right)$. In both instances, the device capacitances swell.\n\nLet us now reevaluate the previously discussed six scenarios in the context of nanometer devices. We observe that the qualitative trends depicted in Fig. 11.7 remain valid, though the equations governing $g_{m}$ and overdrive become more intricate. The scenario shown in Fig. 11.7(a) is particularly noteworthy and is the subject of further investigation in the subsequent example.\n\n#### Example 11.2\n\nThe linear scaling of $g_{m}$ and $I_{D}$ with $W / L$, as depicted in Fig. 11.7(a), persists irrespective of transistor traits. The explanation for this is provided below.\n\n#### Solution\n\nConsider two identical transistors in parallel, each with a transconductance of $g_{m}$. A change in $V_{G S}$ by $\\Delta V$ leads to a change in the drain current of each device by $g_{m} \\Delta V$, resulting in a total change of $2 g_{m} \\Delta V$ for the composite device. Thus, the parallel configuration demonstrates a transconductance of $2 g_{m}$. We infer that increasing both the width and the drain current of a transistor by a factor of $K(>1)$ is analogous to placing $K$ transistors in parallel and multiplying $g_{m}$ by a factor of $K$. We assert that this scaling maintains the device's \"current density\" $\\left(I_{D} / W\\right)$. It is important to note that the bias overdrive voltage remains constant in this scenario, as does the $g_{m} / I_{D}$ ratio. The latter characteristic proves beneficial in our studies.\n\nOf the scenarios depicted in Fig. 11.7, certain ones are more prevalent in practical applications. Given that contemporary analog circuits often operate with low supply voltages (around 1 V), we frequently limit $V_{G S}-V_{T H}$ to a few hundred millivolts. Therefore, to achieve a desired transconductance, we initially increase the width [Fig. 11.7(c)] to substantially elevate $g_{m}$. As $g_{m}$ approaches a constant value (in the subthreshold region), the width ceases to be a decisive factor, leaving the drain current as the sole parameter capable of boosting $g_{m}$ [Fig. 11.7(d)]. However, as we augment $I_{D}$ in this manner, $V_{G S}-V_{T H}$ may surpass the designated limit, compelling us to adopt the scenario in Fig. 11.7(e) [which mirrors that in Fig. 11.7(a)]. These iterative attempts may appear arbitrary, but fear not! The remainder of this section is devoted to establishing a systematic methodology for transistor design. We commence with a pivotal example.\n\n#### Example 11.3\n\nA transistor with an aspect ratio of $(W / L)_{R E F}$ exhibits the $g_{m}-I_{D}$ characteristic depicted in Fig. 11.9(a).\n\nimage_name:(a)\ndescription:\nThe graph in Fig. 11.9(a) portrays the relationship between transconductance (g_m) and drain current (I_D) for a transistor with a defined aspect ratio \\((W/L)_{REF}\\). This curve is instrumental in transistor analysis.\n\n1. **Type of Graph and Function:**\n- The graph represents a characteristic curve that illustrates the interplay between transconductance and drain current for a transistor.\n\n2. **Axes Labels and Units:**\n- The x-axis denotes the drain current \\(I_D\\), conventionally measured in amperes.\n- The y-axis denotes the transconductance \\(g_m\\), typically measured in siemens (S).\n- Both axes are scaled linearly.\n\n3. **Overall Behavior and Trends:**\n- The curve reveals a positive correlation, demonstrating that as the drain current \\(I_D\\) increases, the transconductance \\(g_m\\) also rises, signifying that higher currents enhance the transistor's capacity to govern the output current.\n\n4. **Key Features and Technical Details:**\n- The graph initiates at a lower \\(g_m\\) value and ascends as \\(I_D\\) increases.\n- A marked point at \\(I_{D1}\\) indicates where \\(g_m\\) equals \\(g_{m1}\\).\n- The absence of saturation or a maximum within the visible range suggests a continuous escalation of \\(g_m\\) with \\(I_D\\).\n\n5. **Annotations and Specific Data Points:**\n- The graph highlights the aspect ratio \\((W/L)_{REF}\\) used for this characteristic curve.\n- The point \\((I_{D1}, g_{m1})\\) is explicitly indicated, serving as a reference for initial biasing conditions.\n\nThis graph offers a visual comprehension of how fluctuations in drain current influence the transconductance of a transistor, which is crucial for designing and optimizing transistor performance in circuits."
},
{
    "text": "Device transconductance is a critical aspect of nearly every analog circuit. Consider a scenario where a transistor is operating in the saturation region yet fails to deliver the necessary transconductance. The equations for transconductance, $g_{m}$, presented in Chapter 2,\n\n$$\n\\begin{align*}\ng_{m} & =\\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)  \\tag{11.7}\\\\\n& =\\sqrt{2 \\mu_{n} C_{o x} \\frac{W}{L} I_{D}}  \\tag{11.8}\\\\\n& =\\frac{2 I_{D}}{V_{G S}-V_{T H}} \\tag{11.9}\n\\end{align*}\n$$\n\nindicate that modifications to three key parameters—$W / L$, $V_{G S}-V_{T H}$, and $I_{D}$—can adjust $g_{m}$. We examine these scenarios, initially assuming a long-channel device, leading to $I_{D} \\approx(1 / 2) \\mu_{n} C_{o x}(W / L)\\left(V_{G S}-V_{T H}\\right)^{2}$. Consequently, $V_{G S}-V_{T H} \\approx \\sqrt{2 I_{D} /\\left(\\mu_{n} C_{o x} W / L\\right)}$. In each scenario, we hold one parameter steady while adjusting the other two.\n\nReferring to equation (11.7), we can elevate $W / L$ while maintaining a constant $V_{G S}-V_{T H}$. Under these conditions, both $g_{m}$ and $I_{D}$ scale linearly with $W / L$ (why?) [Fig. 11.7(a)], as does the power consumption. Alternatively, we can\n\nimage_name:(a)\ndescription:The graph labeled (a) depicts a linear relationship between the transconductance (g_m) and the drain current (I_D) relative to the width-to-length ratio (W/L) of a MOSFET. The x-axis represents the width-to-length ratio (W/L), and the y-axis represents both the transconductance (g_m) and the drain current (I_D). The parameter V_GS - V_TH is held constant in this graph.\n\n1. **Type of Graph and Function:**\n- This is a linear plot showing the dependence of g_m and I_D on W/L.\n\n2. **Axes Labels and Units:**\n- **X-axis:** Width-to-length ratio (W/L) (unitless).\n- **Y-axis:** Transconductance (g_m) and Drain Current (I_D) (units not specified, assumed to be consistent with typical electrical units like Siemens for g_m and Amperes for I_D).\n\n3. **Overall Behavior and Trends:**\n- Both g_m and I_D increase linearly with increasing W/L. This indicates a direct proportionality between these parameters and the width-to-length ratio when V_GS - V_TH is constant.\n\n4. **Key Features and Technical Details:**\n- The graph shows two straight lines originating from the origin, reflecting the linear scaling of both g_m and I_D with W/L.\n- The linearity suggests that doubling the W/L will double both g_m and I_D, maintaining the proportionality.\n\n5. **Annotations and Specific Data Points:**\n- The graph does not have specific numerical values or markers, but the linear trend is clear and consistent across the range of W/L values shown.\nimage_name:(b)\ndescription:The graph labeled (b) in Figure 11.7 illustrates the relationship between the transconductance, \\( g_m \\), the drain current, \\( I_D \\), and the gate-source voltage minus the threshold voltage, \\( V_{GS} - V_{TH} \\), while keeping the width-to-length ratio, \\( W/L \\), constant.\n\n1. Type of Graph and Function:\nThis is a linear graph showing the dependencies of two parameters, \\( g_m \\) and \\( I_D \\), on \\( V_{GS} - V_{TH} \\).\n\n2. Axes Labels and Units:\n- **Horizontal Axis:** Represents \\( V_{GS} - V_{TH} \\).\n- **Vertical Axis:** Represents both \\( g_m \\) and \\( I_D \\).\n- The graph uses a linear scale for both axes.\n\n3. **Overall Behavior and Trends:**\n- The plot shows that as \\( V_{GS} - V_{TH} \\) increases, \\( g_m \\) increases linearly, while \\( I_D \\) also increases but at a decreasing rate, indicating a sub-linear relationship.\n- The graph starts from the origin, suggesting that both \\( g_m \\) and \\( I_D \\) are zero when \\( V_{GS} - V_{TH} \\) is zero.\n\n4. **Key Features and Technical Details:**\n- \\( g_m \\) exhibits a positive linear trend with \\( V_{GS} - V_{TH} \\), suggesting a direct proportionality.\n- \\( I_D \\) increases with \\( V_{GS} - V_{TH} \\) but the curve bends downwards, indicating diminishing returns in \\( I_D \\) increase as \\( V_{GS} - V_{TH} \\) grows.\n\n5. **Annotations and Specific Data Points:**\n- The graph does not have specific numerical values annotated, but the linear and sub-linear trends are clearly marked.\n- There are no specific markers or reference lines other than the axes themselves.\nimage_name:(c)\ndescription:The graph labeled (c) in Figure 11.7 illustrates the relationship between the transconductance (g_m) and the ratio of the width to length (W/L) of a MOSFET, with the gate-source voltage minus the threshold voltage (V_GS - V_TH) held constant. The axes are as follows:\n\n1. **Y-axis**: Represents the transconductance (g_m), which is a measure of the gain of the MOSFET. It is depicted in arbitrary units.\n2. **X-axis**: Represents the ratio of the width to length (W/L) of the MOSFET, also in arbitrary units.\n\n**Overall Behavior and Trends:**\n- As W/L increases, the transconductance (g_m) also increases, showing a positive correlation between these two parameters.\n- The graph shows a nonlinear upward trend, suggesting that the increase in g_m is not directly proportional to W/L but rather follows a curve that rises more slowly as W/L becomes larger.\n\n**Key Features and Technical Details:**\n- The graph starts from the origin, indicating that at zero W/L, the transconductance is also zero.\n- There is a noticeable curve in the plot, which suggests diminishing returns in transconductance increase as W/L grows larger.\n- There are no specific annotations or markers on the graph, but the curve implies an asymptotic behavior as it approaches a certain value.\n\n**Annotations and Specific Data Points:**\n- The graph is free of specific numerical values or markers, focusing on the qualitative relationship between g_m and W/L when V_GS - V_TH is constant.\n\nThis graph is useful for understanding how changing the physical dimensions of a MOSFET affects its transconductance when the voltage condition is kept constant, emphasizing the importance of device geometry in electrical performance.\nimage_name:(d)\ndescription:The graph labeled (d) in Figure 11.7 is a plot showing the relationship between the transconductance ($g_m$) and the gate-source voltage minus the threshold voltage ($V_{GS} - V_{TH}$) as dependent on the drain current ($I_D$), with the width-to-length ratio ($W/L$) held constant.\n\n1. **Type of Graph and Function**: This is a linear plot showing how $g_m$ and $V_{GS} - V_{TH}$ vary with respect to $I_D$.\n\n2. **Axes Labels and Units**:\n- The horizontal axis represents the drain current ($I_D$).\n- The left vertical axis represents the transconductance ($g_m$).\n- The right vertical axis represents the gate-source voltage minus the threshold voltage ($V_{GS} - V_{TH}$).\n- The scales are linear for all axes.\n\n3. **Overall Behavior and Trends**:\n- As $I_D$ increases, $g_m$ shows an upward curve, indicating that transconductance increases with increasing drain current.\n- Simultaneously, $V_{GS} - V_{TH}$ also increases, showing a similar upward trend.\n\n4. **Key Features and Technical Details**:\n- Both $g_m$ and $V_{GS} - V_{TH}$ increase non-linearly with $I_D$, suggesting a quadratic relationship typical of MOSFET behavior in saturation.\n- The graph implies that with a constant $W/L$, increasing $I_D$ leads to higher $g_m$ and $V_{GS} - V_{TH}$, reflecting the dependency of these parameters on the drain current.\n\n5. **Annotations and Specific Data Points**:\n- There are no specific annotations or numerical data points marked on the graph. The curves are smooth and continuous, indicating a theoretical representation rather than empirical data.\nimage_name:(e)\ndescription:The graph labeled (e) in Figure 11.7 illustrates the relationship between the transconductance (g_m) and the width-to-length ratio (W/L) as functions of the drain current (I_D), with the gate-source voltage minus threshold voltage (V_GS - V_TH) held constant.\n\n1. **Type of Graph and Function:**\n- The graph is a linear plot showing the dependence of two variables, g_m and W/L, on I_D.\n\n2. **Axes Labels and Units:**\n- The horizontal axis represents the drain current (I_D), which is typically measured in amperes (A).\n- The vertical axis on the left represents the transconductance (g_m), usually measured in siemens (S).\n- The vertical axis on the right represents the width-to-length ratio (W/L), a dimensionless quantity.\n\n3. **Overall Behavior and Trends:**\n- Both g_m and W/L exhibit a linear increase as the drain current (I_D) increases. This indicates a direct proportionality between these parameters and I_D when V_GS - V_TH is constant.\n\n4. **Key Features and Technical Details:**\n- The graph shows linear behavior with no visible saturation or non-linear effects, suggesting that the device operates in a region where g_m and W/L are directly proportional to I_D.\n- There are no peaks, valleys, or inflection points, indicating a straightforward linear relationship.\n\n5. **Annotations and Specific Data Points:**\n- The graph does not show specific numerical values or annotations, focusing instead on the qualitative linear trend of the relationships.\n\nThis graph is useful for understanding how changes in drain current affect the transconductance and width-to-length ratio when the gate overdrive voltage is constant. It highlights the linear scaling of these parameters with I_D, which is critical for designing and optimizing MOSFET operation in analog circuits.\nimage_name:(f)\ndescription:The graph labeled (f) in Figure 11.7 illustrates the relationship between the transconductance \\( g_m \\) and the width-to-length ratio \\( W/L \\) with respect to \\( V_{GS} - V_{TH} \\) when the drain current \\( I_D \\) is kept constant.\n\nType of Graph and Function\nThis is a parametric plot showing the dependence of two variables, \\( g_m \\) and \\( W/L \\), on the voltage difference \\( V_{GS} - V_{TH} \\), with a constant drain current \\( I_D \\).\n\nAxes Labels and Units\n- The horizontal axis represents \\( V_{GS} - V_{TH} \\), which is the gate-source voltage minus the threshold voltage.\n- The left vertical axis represents the transconductance \\( g_m \\).\n- The right vertical axis represents the width-to-length ratio \\( W/L \\).\n\nOverall Behavior and Trends\n- The plot shows two curves:\n- The \\( g_m \\) curve starts at a higher value and decreases as \\( V_{GS} - V_{TH} \\) increases. It exhibits a downward slope, indicating that \\( g_m \\) decreases with increasing \\( V_{GS} - V_{TH} \\) when \\( I_D \\) is constant.\n- The \\( W/L \\) curve starts at a lower value and increases as \\( V_{GS} - V_{TH} \\) increases. It shows an upward trend, suggesting that \\( W/L \\) increases with \\( V_{GS} - V_{TH} \\).\n\nKey Features and Technical Details\n- The \\( g_m \\) curve has a noticeable curvature, starting at a high point and gradually decreasing, indicating a nonlinear relationship.\n- The \\( W/L \\) curve, on the other hand, starts low and increases, suggesting an inverse relationship with \\( g_m \\).\n- There is a dotted line indicating a threshold or reference level for \\( I_D/\\xi V_T \\), which provides a reference for the transconductance.\n\nAnnotations and Specific Data Points\n- The graph is annotated with a dotted horizontal line representing \\( I_D/\\xi V_T \\), serving as a reference for comparing the behavior of \\( g_m \\).\n- No specific numerical values are provided, but the trends are clear and indicative of the relationships between the variables.\n\nFigure 11.7 Dependence of (a) $g_{m}$ and $I_{D}$ upon $W / L$, (b) $g_{m}$ and $I_{D}$ upon $V_{G S}-V_{T H}$, (c) $g_{m}$ and $V_{G S}-V_{T H}$ upon $W / L$, (d) $g_{m}$ and $V_{G S}-V_{T H}$ upon $I_{D}$, (e) $g_{m}$ and $W / L$ upon $I_{D}$, and (f) $g_{m}$ and $W / L$ upon $V_{G S}-V_{T H}$.\ncan increase $V_{G S}-V_{T H}$ but keep $W / L$ constant [Fig. 11.7(b)], thus requiring a higher drain current. In the former case, the device capacitances rise whereas in the latter, $V_{D S, \\text { min }}$ increases. In this chapter, we use the notations $V_{D S, \\text { min }}, V_{D, s a t}$, and $V_{G S}-V_{T H}$ interchangeably.\n\nFrom (11.8), we can raise $W / L$ while $I_{D}$ is constant [Fig. 11.7(c)], as a result of which $V_{G S}-V_{T H}$ is lowered (why?). Due to subthreshold conduction, however, $g_{m}$ does not climb indefinitely in this case. If we keep $W / L$ constant and increase $I_{D}$ [Fig. 11.7(d)], then $V_{G S}-V_{T H}$ and hence $V_{D S, \\min }$ must rise.\n\nFrom (11.9), we can increase $I_{D}$ while $V_{G S}-V_{T H}$ is constant [Fig. 11.7(e)]. This requires that $W / L$ increase. Alternatively, we can lower $V_{G S}-V_{T H}$ and keep $I_{D}$ constant [Fig. 11.7(f)], which means that $W / L$ must increase. For $V_{G S}-V_{T H} \\approx 0$, the device enters the subthreshold region and $g_{m} \\approx I_{D} /\\left(\\xi V_{T}\\right)$. In both cases, the device capacitances climb.\n\nLet us now reconsider the foregoing six scenarios for nanometer devices. We note that the plots in Fig. 11.7 still hold qualitatively, but the $g_{m}$ and overdrive equations are more complex. The case of Fig. 11.7(a) is particularly interesting and useful and is studied further in the following example.\n\n#### Example 11.2\n\nThe linear scaling of $g_{m}$ and $I_{D}$ with $W / L$, shown in Fig. 11.7(a), holds regardless of the transistor characteristics. Explain why.\n\n#### Solution\n\nConsider, as an example, two identical transistors connected in parallel (Fig. 11.8), each having a transconductance of $g_{m}$. If $V_{G S}$ changes by $\\Delta V$, then the drain current of each device changes by $g_{m} \\Delta V$, and hence the current of the composite device changes by $2 g_{m} \\Delta V$. That is, the parallel combination exhibits a transconductance of $2 g_{m}$. We conclude that increasing both the width and the drain current of the transistor by a factor of $K(>1)$ is equivalent to placing $K$ transistors in parallel and raising the $g_{m}$ by a factor of $K$. We say that the scaling preserves the device \"current density\" $\\left(I_{D} / W\\right)$ in this case. Note that the bias overdrive voltage remains constant in this scenario, and so does the $g_{m} / I_{D}$ ratio. The latter property proves useful in our studies.\nimage_name:Figure 11.8\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: LOAD, G: VGS}\nname: M2, type: NMOS, ports: {S: GND, D: LOAD, G: VGS}\nname: VGS, type: VoltageSource, value: VGS, ports: {Np: VGS, Nn: GND}\n]\nextrainfo:The circuit consists of two NMOS transistors, M1 and M2, in a push-pull configuration with a load connected at the common drain node. The gate voltage is provided by a voltage source VGS.\n\nOf the six scenarios depicted in Fig. 11.7, which ones are more common in practice? Since modern analog circuits must operate with low supplies (around 1 V ), we often limit $V_{G S}-V_{T H}$ to a few hundred millivolts. Thus, to obtain a certain transconductance, we first keep increasing the width [Fig. 11.7(c)] to the extent that it raises the $g_{m}$ significantly. As $g_{m}$ approaches a constant value (in the subthreshold region), the width is no longer a determining factor, leaving the drain current as the only parameter that can increase the $g_{m}$ [Fig. 11.7(d)]. However, as we increase $I_{D}$ in this case, $V_{G S}-V_{T H}$ may exceed the allotted value, forcing us to resort to the scenario in Fig. 11.7(e) [which is equivalent to that in Fig. 11.7(a)]. These trials and errors seem rather haphazard, but do not despair! The remainder of this section is dedicated to developing a methodical approach to transistor design. We begin with an important example.\n\n#### Example 11.3"
},
{
    "text": "Transconductance is a fundamental aspect of virtually all analog circuits, and it is crucial for a transistor to provide the necessary level of transconductance when operating in the saturation region. The equations for transconductance, $g_{m}$, as presented in Chapter 2:\n\n$$\n\\begin{align*}\ng_{m} & = \\mu_{n} C_{o x} \\frac{W}{L} (V_{G S} - V_{T H}) \\tag{11.7} \\\\\n& = \\sqrt{2 \\mu_{n} C_{o x} \\frac{W}{L} I_{D}} \\tag{11.8} \\\\\n& = \\frac{2 I_{D}}{V_{G S} - V_{T H}} \\tag{11.9}\n\\end{align*}\n$$\n\nindicate that the manipulation of three key parameters—$W/L$, $V_{G S} - V_{T H}$, and $I_{D}$—can effectively scale the transconductance. We examine these scenarios, initially assuming a long-channel device, which leads to the approximation $I_{D} \\approx (1/2) \\mu_{n} C_{o x} (W/L) (V_{G S} - V_{T H})^2$. Consequently, $V_{G S} - V_{T H} \\approx \\sqrt{2 I_{D} / (\\mu_{n} C_{o x} W/L)}$. In each scenario, we maintain one parameter as constant while adjusting the other two.\n\nReferring to equation (11.7), we can augment $W/L$ while holding $V_{G S} - V_{T H}$ steady. Under these conditions, both $g_{m}$ and $I_{D}$ scale linearly with $W/L$ (the reason for which is to be explored) [Fig. 11.7(a)], and the power consumption similarly increases. Alternatively, we can adjust $V_{G S} - V_{T H}$ with $W/L$ constant [Fig. 11.7(b)], necessitating a higher drain current. In the former scenario, device capacitances increase, whereas in the latter, $V_{D S, \\text{min}}$ rises. Throughout this chapter, we use the terms $V_{D S, \\text{min}}$, $V_{D, \\text{sat}}$, and $V_{G S} - V_{T H}$ interchangeably.\n\nEquation (11.8) allows us to increase $W/L$ while keeping $I_{D}$ constant [Fig. 11.7(c)], which in turn reduces $V_{G S} - V_{T H}$ (the rationale for this will be discussed). However, due to subthreshold conduction, $g_{m}$ does not continuously increase in this manner. If we maintain $W/L$ constant and elevate $I_{D}$ [Fig. 11.7(d)], then $V_{G S} - V_{T H}$, and thus $V_{D S, \\min}$, must increase as well.\n\nAccording to equation (11.9), we can enhance $I_{D}$ while keeping $V_{G S} - V_{T H}$ constant [Fig. 11.7(e)]. This necessitates an increase in $W/L$. Conversely, we can decrease $V_{G S} - V_{T H}$ and maintain $I_{D}$ constant [Fig. 11.7(f)], which implies that $W/L$ must increase. For $V_{G S} - V_{T H} \\approx 0$, the device transitions into the subthreshold region, and $g_{m} \\approx I_{D} / (\\xi V_{T})$. In both scenarios, device capacitances increase.\n\nWe now revisit the aforementioned six scenarios in the context of nanometer-scale devices. It's important to note that the qualitative plots in Fig. 11.7 remain relevant, although the $g_{m}$ and overdrive equations are more intricate. The scenario depicted in Fig. 11.7(a) is particularly noteworthy and is further investigated in the following example.\n\n#### Example 11.2\n\nThe linear scaling of $g_{m}$ and $I_{D}$ with $W/L$, as shown in Fig. 11.7(a), is independent of the transistor's specific characteristics. Explain why.\n\n#### Solution\n\nConsider two identical transistors connected in parallel, each with a transconductance of $g_{m}$. If $V_{G S}$ changes by $\\Delta V$, the drain current of each transistor changes by $g_{m} \\Delta V$, and thus the composite device's current changes by $2 g_{m} \\Delta V$. This indicates that the parallel combination exhibits a transconductance of $2 g_{m}$. We deduce that increasing both the width and the drain current of the transistor by a factor of $K(>1)$ is analogous to placing $K$ transistors in parallel and multiplying the $g_{m}$ by a factor of $K$. We refer to this as preserving the device's \"current density\" $(I_{D} / W)$ in this instance. Note that the bias overdrive voltage remains constant in this scenario, as does the $g_{m} / I_{D}$ ratio. The latter property is particularly useful in our studies.\n\n#### Example 11.3\n\nA transistor with an aspect ratio of $(W/L)_{REF}$ exhibits the $g_{m}-I_{D}$ characteristic shown in Fig. 11.9(a).\n\n#### Solution\n\nThe linear scaling of $g_{m}$ and $I_{D}$ with $W/L$, as depicted in Fig. 11.7(a), holds regardless of the transistor's characteristics. This is because increasing the width and drain current of the transistor by a factor of $K(>1)$ is equivalent to placing $K$ transistors in parallel and increasing the $g_{m}$ by a factor of $K$. We refer to this as preserving the device's \"current density\" $(I_{D} / W)$ in this instance. Note that the bias overdrive voltage remains constant in this scenario, as does the $g_{m} / I_{D}$ ratio. The latter property is particularly useful in our studies."
},
{
    "text": "Transconductance is a fundamental concept in analog circuits, and its adjustment is critical for proper transistor operation. Consider a transistor functioning in the saturation region that fails to deliver the necessary transconductance. The equations for transconductance, $g_{m}$, presented in Chapter 2 are:\n\n$$\n\\begin{align*}\ng_{m} & =\\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)  \\tag{11.7}\\\\\n& =\\sqrt{2 \\mu_{n} C_{o x} \\frac{W}{L} I_{D}}  \\tag{11.8}\\\\\n& =\\frac{2 I_{D}}{V_{G S}-V_{T H}} \\tag{11.9}\n\\end{align*}\n$$\n\nThese equations indicate that modifications in three key parameters—$W / L$, $V_{G S}-V_{T H}$, or $I_{D}$—can adjust the transconductance. We examine these scenarios, assuming a long-channel device, leading to $I_{D} \\approx(1 / 2) \\mu_{n} C_{o x}(W / L)\\left(V_{G S}-V_{T H}\\right)^{2}$. Consequently, $V_{G S}-V_{T H} \\approx \\sqrt{2 I_{D} /\\left(\\mu_{n} C_{o x} W / L\\right)}$. For each scenario, we maintain one parameter constant while altering the other two.\n\nUsing equation (11.7), we can elevate $W / L$ while keeping $V_{G S}-V_{T H}$ unchanged. Here, both $g_{m}$ and $I_{D}$ scale linearly with $W / L$ [Fig. 11.7(a)], as does the power consumption. Alternatively, we\n\nimage_name:(a)\ndescription:\nThe graph labeled (a) displays a linear relationship between the transconductance (g_m) and the drain current (I_D) relative to the width-to-length ratio (W/L) of a MOSFET. The x-axis denotes the width-to-length ratio (W/L), and the y-axis represents both the transconductance (g_m) and the drain current (I_D). The parameter V_GS - V_TH is held constant in this graph.\n\n1. **Type of Graph and Function:**\n- This is a linear plot depicting the reliance of g_m and I_D on W/L.\n\n2. **Axes Labels and Units:**\n- **X-axis:** Width-to-length ratio (W/L) (unitless).\n- **Y-axis:** Transconductance (g_m) and Drain Current (I_D) (units not specified, assumed to be consistent with typical electrical units like Siemens for g_m and Amperes for I_D).\n\n3. **Overall Behavior and Trends:**\n- Both g_m and I_D exhibit a linear increase with increasing W/L. This suggests a direct proportionality between these parameters and the width-to-length ratio when V_GS - V_TH is constant.\n\n4. **Key Features and Technical Details:**\n- The graph features two straight lines originating from the origin, symbolizing the linear scaling of both g_m and I_D with W/L.\n- The linearity implies that doubling the W/L will double both g_m and I_D, maintaining the proportionality.\n\n5. **Annotations and Specific Data Points:**\n- The graph lacks specific numerical values or markers, but the linear trend is evident and consistent across the range of W/L values shown."
},
{
    "text": "Transconductance is a crucial aspect of analog circuits, often influenced by transistor operation. For instance, if a transistor in saturation fails to deliver the necessary transconductance, we refer to the $g_{m}$ equations in Chapter 2:\n\n$$\n\\begin{align*}\ng_{m} & = \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{G S}-V_{T H}\\right)  \\tag{11.7}\\\\\n& = \\sqrt{2 \\mu_{n} C_{o x} \\frac{W}{L} I_{D}}  \\tag{11.8}\\\\\n& = \\frac{2 I_{D}}{V_{G S}-V_{T H}} \\tag{11.9}\n\\end{align*}\n$$\n\nThese equations indicate that $g_{m}$ can be adjusted by altering three parameters: $W/L$, $V_{G S}-V_{T H}$, or $I_{D}$. We analyze these scenarios, assuming a long-channel device, where $I_{D} \\approx (1/2) \\mu_{n} C_{o x}(W/L)(V_{G S}-V_{T H})^2$. This implies that $V_{G S}-V_{T H} \\approx \\sqrt{2 I_{D}/(\\mu_{n} C_{o x} W/L)}$. In each scenario, we maintain one parameter constant while adjusting the other two.\n\nReferring to (11.7), we can increase $W/L$ while keeping $V_{G S}-V_{T H}$ constant. Consequently, both $g_{m}$ and $I_{D}$ scale linearly with $W/L$ [Fig. 11.7(a)], as does power consumption. Alternatively, we can increase $V_{G S}-V_{T H}$ while maintaining $W/L$ constant [Fig. 11.7(b)], necessitating a higher drain current. In the former scenario, device capacitances increase, while in the latter, $V_{D S, \\text { min }}$ rises. Throughout this chapter, we use the terms $V_{D S, \\text { min }}$, $V_{D, s a t}$, and $V_{G S}-V_{T H}$ interchangeably.\n\nFrom (11.8), we can raise $W/L$ while keeping $I_{D}$ constant [Fig. 11.7(c)]. This leads to a reduction in $V_{G S}-V_{T H}$ (why?). However, due to subthreshold conduction, $g_{m}$ does not increase indefinitely in this case. If we maintain $W/L$ constant and increase $I_{D}$ [Fig. 11.7(d)], then $V_{G S}-V_{T H}$ and thus $V_{D S, \\min }$ must rise.\n\nAccording to (11.9), we can increase $I_{D}$ while keeping $V_{G S}-V_{T H}$ constant [Fig. 11.7(e)]. This requires an increase in $W/L$. Alternatively, we can decrease $V_{G S}-V_{T H}$ while keeping $I_{D}$ constant [Fig. 11.7(f)], meaning that $W/L$ must increase. For $V_{G S}-V_{T H} \\approx 0$, the device enters the subthreshold region, and $g_{m} \\approx I_{D}/(\\xi V_{T})$. In both cases, device capacitances increase.\n\nWe now reconsider the six scenarios outlined in Fig. 11.7 for nanometer devices. We observe that the plots in Fig. 11.7 still hold qualitatively, but the $g_{m}$ and overdrive equations are more complex. The case depicted in Fig. 11.7(a) is particularly interesting and useful, warranting further study in the following example.\n\n#### Example 11.2\n\nThe linear scaling of $g_{m}$ and $I_{D}$ with $W/L$, as shown in Fig. 11.7(a), is consistent regardless of transistor characteristics. Explain why.\n\n#### Solution\n\nConsider two identical transistors connected in parallel, each with a transconductance of $g_{m}$. If $V_{G S}$ changes by $\\Delta V$, the drain current of each device changes by $g_{m} \\Delta V$, and thus the composite device's current changes by $2 g_{m} \\Delta V$. This indicates that the parallel combination exhibits a transconductance of $2 g_{m}$. Therefore, increasing both the width and drain current of the transistor by a factor of $K(>1)$ is equivalent to placing $K$ transistors in parallel and increasing $g_{m}$ by a factor of $K$. We refer to this as preserving the device's \"current density\" $(I_{D} / W)$ in this scenario. Note that the bias overdrive voltage remains constant in this case, as does the $g_{m} / I_{D}$ ratio. The latter property is useful in our studies.\n\nOf the six scenarios depicted in Fig. 11.7, which are more common in practice? Given that modern analog circuits must operate with low supplies (around 1 V), we often limit $V_{G S}-V_{T H}$ to a few hundred millivolts. Thus, to achieve a specific transconductance, we first increase the width [Fig. 11.7(c)] to significantly raise $g_{m}$. As $g_{m}$ approaches a constant value (in the subthreshold region), width is no longer a determining factor, leaving the drain current as the only parameter that can increase $g_{m}$ [Fig. 11.7(d)]. However, as we increase $I_{D}$ in this case, $V_{G S}-V_{T H}$ may exceed the allowed value, necessitating the scenario in Fig. 11.7(e) [equivalent to that in Fig. 11.7(a)]. These trials and errors may seem haphazard, but do not despair! The remainder of this section is dedicated to developing a methodical approach to transistor design. We begin with an important example.\n\n#### Example 11.3\n\nA transistor with an aspect ratio of $(W/L)_{R E F}$ exhibits the $g_{m}-I_{D}$ characteristic shown in Fig. 11.9(a).\n\nimage_name:(a)\ndescription:\nThe graph in Fig. 11.9(a) is a plot of transconductance (g_m) versus drain current (I_D) for a transistor with a specific aspect ratio \\((W/L)_{REF}\\). This is a characteristic curve used in transistor analysis.\n\n1. **Type of Graph and Function:**\n- This is a characteristic curve graph depicting the relationship between transconductance and drain current for a transistor.\n\n2. **Axes Labels and Units:**\n- The x-axis represents the drain current \\(I_D\\), typically measured in amperes.\n- The y-axis represents the transconductance \\(g_m\\), typically measured in siemens (S).\n- The graph uses a linear scale for both axes.\n\n3. **Overall Behavior and Trends:**\n- The curve shows a positive, increasing relationship between transconductance \\(g_m\\) and drain current \\(I_D\\).\n- As the drain current \\(I_D\\) increases, the transconductance \\(g_m\\) also increases, indicating that higher currents enhance the transistor's ability to control the output current.\n\n4. **Key Features and Technical Details:**\n- The graph begins at a lower value of \\(g_m\\) and rises as \\(I_D\\) increases.\n- There is a marked point on the curve at \\(I_{D1}\\) where \\(g_m\\) is equal to \\(g_{m1}\\).\n- The curve does not display any saturation or maximum point within the visible range, suggesting a continuous increase in \\(g_m\\) with \\(I_D\\).\n\n5. **Annotations and Specific Data Points:**\n- A specific reference point \\((W/L)_{REF}\\) is indicated, highlighting the aspect ratio used for this characteristic curve.\n- The point \\((I_{D1}, g_{m1})\\) is specifically marked, providing a reference for initial biasing conditions.\n\nThis graph provides a visual understanding of how changes in drain current affect the transconductance of a transistor, which is crucial for designing and optimizing transistor performance in circuits.\n\n####_name:(b)\ndescription:\nThe graph in Fig. 11.9(b) is a plot of transconductance \\( g_m \\) versus drain current \\( I_D \\). The x-axis represents the drain current \\( I_D \\), and the y-axis represents the transconductance \\( g_m \\). The graph is plotted on a linear scale for both axes.\n\nOverall Behavior and Trends\nThe graph shows a nonlinear relationship between \\( g_m \\) and \\( I_D \\), with \\( g_m \\) increasing as \\( I_D \\) increases. It starts at a lower value \\( g_{m1} \\) at \\( I_{D1} \\) and rises to \\( 2g_{m1} \\) when the drain current doubles to \\( 2I_{D1} \\). The curve is concave down, indicating diminishing returns in \\( g_m \\) increase as \\( I_D \\) continues to rise.\n\nKey Features and Technical Details\n- **Initial Point:** The curve starts at \\( I_{D1} \\) with a corresponding transconductance \\( g_{m1} \\).\n- **Doubling Width Effect:** The dashed line indicates the effect of doubling the transistor width \\( W \\), which results in doubling the transconductance for the same \\( I_D \\). This is shown by the point \\( 2g_{m1} \\) at \\( I_{D1} \\).\n- **Concave Shape:** The curve's concave shape illustrates that as \\( I_D \\) increases, the rate of increase in \\( g_m \\) decreases.\n\nAnnotations and Specific Data Points\n- **Reference Line:** A dashed line from \\( g_{m1} \\) to \\( 2g_{m1} \\) highlights the relationship between the initial and doubled transconductance values.\n- **Markers:** Specific points are marked to show \\( g_{m1} \\) at \\( I_{D1} \\) and \\( 2g_{m1} \\) at \\( 2I_{D1} \\).\n\nimage_name:(c)\ndescription:\nThe graph labeled (c) is a plot illustrating the relationship between the transconductance (g_m) and the drain current (I_D) with respect to the overdrive voltage (V_GS - V_TH). This is a characteristic curve for a transistor with variable width (W) and constant length (L). The x-axis represents the drain current (I_D) and the overdrive voltage (V_GS - V_TH), while the y-axis represents the transconductance (g_m).\n\n1. **Axes Labels and Units:**\n- **X-axis:** The left side of the x-axis is labeled as V_GS - V_TH, representing the overdrive voltage, while the right side is labeled as I_D, representing the drain current. The scale is linear.\n- **Y-axis:** Labeled as g_m, representing the transconductance, with a linear scale.\n\n2. **Overall Behavior and Trends:**\n- The graph shows a non-linear, upward-sloping curve, indicating that as the overdrive voltage and drain current increase, the transconductance also increases.\n- The curve represents a scenario where the width of the transistor is varied, affecting the transconductance at different points.\n\n3. **Key Features and Technical Details:**\n- Two overdrive voltages are marked: (V_GS - V_TH)_1 and (V_GS - V_TH)_2, with corresponding transconductance values of g_m1 and g_m2.\n- As the width (W) of the transistor doubles, the transconductance increases from g_m1 to 2g_m2, showing a proportional relationship.\n- The graph illustrates two points on the I_D axis: I_D1 and I_D2, with I_D2 being twice I_D1, indicating the effect of doubling the width.\n\n4. **Annotations and Specific Data Points:**\n- The curve is annotated with dashed lines showing how changes in overdrive voltage and width affect the transconductance and drain current.\n- The specific points (I_D1, g_m1) and (I_D2, g_m2) are highlighted to show the initial and doubled conditions.\n\nThis graph effectively demonstrates the impact of changing the width of the transistor on its transconductance and drain current, under constant overdrive voltage conditions.\n\nimage_name:(d)\ndescription:\nThe graph labeled (d) in Figure 11.9 is a plot illustrating the relationship between transconductance (g_m) and the drain current (I_D) for a transistor. The graph is a two-dimensional plot with the vertical axis labeled as g_m and the horizontal axis labeled as I_D. Both axes are on a linear scale.\n\nType of Graph and Function:\nThis is a characteristic curve graph showing how transconductance varies with changes in the drain current under specific conditions of gate-source voltage minus threshold voltage (V_GS - V_TH).\n\nAxes Labels and Units:\n- **Vertical Axis (g_m):** Represents the transconductance of the transistor. No specific units are provided, but transconductance is typically measured in siemens (S).\n- **Horizontal Axis (I_D):** Represents the drain current, typically measured in amperes (A).\n\nOverall Behavior and Trends:\nThe graph shows a nonlinear curve that starts at a certain transconductance value (g_m0) when the drain current is I_D0. As the drain current increases towards I_DX, the transconductance also increases, reaching a higher value of 2g_mx. The curve exhibits a smooth, upward trend indicating that transconductance increases with increasing drain current.\n\nKey Features and Technical Details:\n- **Starting Point:** The curve begins at a point (I_D0, g_m0) where the initial transconductance is g_m0.\n- **Ending Point:** The curve ends at a point (I_DX, 2g_mx) where the transconductance doubles to 2g_mx.\n- **Slope:** The curve has a positive slope, indicating that as the drain current increases, the transconductance increases.\n- **Reference Lines:** The graph includes dashed reference lines showing the initial and final transconductance values and corresponding drain currents.\n\nAnnotations and Specific Data Points:\n- The graph is annotated with arrows indicating the direction of change in transconductance as the drain current increases.\n- The dashed lines and arrows serve as guides to show the relationship between changes in the drain current and the corresponding changes in transconductance.\n\n(I) Suppose the device is first biased at $I_{D}=I_{D 1}$. What happens to the transconductance and the drain current if the width is doubled while $V_{G S}-V_{T H}$ remains constant? (II) Repeat (I) if we begin with a greater overdrive. (III) We wish to obtain a transconductance of $g_{m x}$ at a drain current of $I_{D x}$. How should the transistor be scaled?\n\n#### Solution\n\n(I) With a constant $V_{G S}-V_{T H}$, doubling the width also doubles the transconductance and the drain current (Example 11.2). Since $g_{m} / I_{D}$ is constant, to reach this point on the $g_{m}-I_{D}$ plane, we draw a straight line through the origin and $\\left(I_{D 1}, g_{m 1}\\right)$, continuing to $\\left(2 I_{D 1}, 2 g_{m 1}\\right)$ [Fig. 11.9(b)]. Thus, all ( $\\left.I_{D}, g_{m}\\right)$ combinations resulting from the scaling of $W$ fall on this line if the overdrive is fixed.\n(II) If we begin with a greater overdrive, $\\left(V_{G S}-V_{T H}\\right)_{2}$, the $\\left(I_{D}, g_{m}\\right)$ point is located elsewhere, at $\\left(I_{D 2}, g_{m 2}\\right)$, on the characteristic [Fig. 11.9(c)]. We again draw a straight line through the origin and ( $I_{D 2}, g_{m 2}$ ) and continue to $\\left(2 I_{D 2}, 2 g_{m 2}\\right)$. Thus, each such line in the $g_{m}-I_{D}$ plane represents the possible $\\left(I_{D}, g_{m}\\right)$ combinations that can be obtained by scaling $W$ for a given overdrive.\n(III) We draw a line through the origin and the point $\\left(I_{D x}, g_{m x}\\right)$ [Fig. 11.9(d)]. The intersection of the line and the $g_{m}$ plot yields a \"reference\" point specifying the proper overdrive voltage, $\\left(V_{G S}-V_{T H}\\right)_{0}$, and an acceptable ( $I_{D}, g_{m}$ ) combination, $\\left(I_{D 0}, g_{m 0}\\right)$. If the width is scaled up by a factor of $g_{m x} / g_{m 0}\\left(=I_{D x} / I_{D 0}\\right)$, and the overdrive remains equal to $\\left(V_{G S}-V_{T H}\\right)_{0}$, then the desired transconductance and current are obtained."
},
{
    "text": "The reader may have observed that a specific transistor in a circuit is defined by numerous parameters. In this section, we presume that transistors function in saturation and concentrate on two bias quantities, $I_{D}$ and $V_{G S}-V_{T H}\\left(=V_{D S, \\min }\\right)$, one small-signal parameter, $g_{m}$, and one physical parameter, $W / L$. A standard transistor design problem specifies two of these first three parameters and aims to determine the remaining two (see Table 11.1). Our goal is to establish systematic methods for calculating these two parameters for nanometer-scale devices. Although not explicitly mentioned here, the output resistance, $r_{O}$, is also significant in many circuits and will be incorporated into our analysis in Sec. 11.4.5.\n\nTable 11.1 Three scenarios encountered in transistor design.\n\n|  | Case I | Case II | Case III |\n| :--- | :---: | :---: | :---: |\n| Given | $I_{D}, V_{D S, \\min }$ | $g_{m}, I_{D}$ | $g_{m}, V_{D S, \\min }$ |\n| To Be Determined | $\\frac{W}{L}, g_{m}$ | $\\frac{W}{L}, V_{D S, \\min }$ | $\\frac{W}{L}, I_{D}$ |\n| Design Revision | $g_{m}$ insufficient; | $V_{D S, \\min \\text { too large; }}$ | $I_{D}$ too large; |\n|  | Increase $I_{D}$ and $\\frac{W}{L}$ | Increase $\\frac{W}{L}$ | Increase $\\frac{W}{L} ;$ Decrease $V_{G S}-V_{T H}$ |\n\nThe reader may note that the design issues presented in Table 11.1 are \"overconstrained,\" meaning the two provided parameters invariably result in specific values for the other two, even if the outcomes are not always optimal. For instance, a known $I_{D}$ and $V_{D S, \\min }$ directly yield a $g_{m}$ value that might be inadequate for a certain circuit. In such scenarios, we must adjust the design as outlined in the table's final row. We will expand on this row in the subsequent design studies, but let's offer some initial comments here. In Case I, an inadequate $g_{m}$ necessitates a higher $I_{D}$ (which might surpass a power limit) and a larger $W / L$ (to meet the specified $V_{D S, \\min }$). In Case II, the given $I_{D}$ and $g_{m}$ might produce an excessively high $V_{D S, \\text { min }}$, thus requiring a larger $W / L$. In Case III, the required $I_{D}$ might be too high, necessitating a greater $W / L$ and a reduced overdrive. ${ }^{2}$"
},
{
    "text": "By now, readers might have observed that a single transistor in a circuit is defined by numerous parameters. In this section, we operate under the assumption that transistors function in saturation, concentrating on two bias quantities, $I_{D}$ and $V_{G S}-V_{T H}\\left(=V_{D S, \\min }\\right)$, one small-signal parameter, $g_{m}$, and one physical parameter, $W / L$. A standard transistor design issue involves specifying two of the initial three parameters and finding the remaining two (see Table 11.1). Our goal is to devise systematic methods for calculating these two parameters for nanometer-scale devices. Although not explicitly mentioned here, the output resistance, $r_{O}$, is also crucial in many circuits and will be incorporated into our analysis in Sec. 11.4.5.\n\nTable 11.1 illustrates three common scenarios in transistor design.\n\n|  | Case I | Case II | Case III |\n| :--- | :---: | :---: | :---: |\n| Given | $I_{D}, V_{D S, \\min }$ | $g_{m}, I_{D}$ | $g_{m}, V_{D S, \\min }$ |\n| To Be Determined | $\\frac{W}{L}, g_{m}$ | $\\frac{W}{L}, V_{D S, \\min }$ | $\\frac{W}{L}, I_{D}$ |\n| Design Revision | Insufficient $g_{m}$; | $V_{D S, \\min }$ too large; | $I_{D}$ too large; |\n|  | Increase $I_{D}$ and $\\frac{W}{L}$ | Increase $\\frac{W}{L}$ | Increase $\\frac{W}{L}$; Decrease $V_{G S}-V_{T H}$ |\n\nReaders may note that the design issues in Table 11.1 are \"overconstrained,\" meaning the two provided parameters invariably determine the other two, even if the outcomes are not always ideal. For instance, a known $I_{D}$ and $V_{D S, \\min }$ directly yield a $g_{m}$ value that might be inadequate for a specific circuit. In such scenarios, we must adjust the design as outlined in the table's final row. We will delve deeper into this row in subsequent design analyses, but let's offer some initial observations here. In Case I, an inadequate $g_{m}$ necessitates a higher $I_{D}$ (which might surpass power limits) and a larger $W / L$ (to meet the specified $V_{D S, \\min }$). In Case II, the given $I_{D}$ and $g_{m}$ might result in an excessively high $V_{D S, \\text { min }}$, thus requiring a larger $W / L$. In Case III, the required $I_{D}$ may be too high, calling for a greater $W / L$ and a reduced overdrive. ${ }^{2}$"
},
{
    "text": "It should be evident to the reader by now that a specific transistor in a circuit is defined by numerous parameters. In this section, we presume that transistors function in saturation and concentrate on two bias values, $I_{D}$ and $V_{G S}-V_{T H}\\left(=V_{D S, \\min }\\right)$, one small-signal parameter, $g_{m}$, and one physical parameter, $W / L$. A standard transistor design issue specifies two of the initial three parameters and aims to determine the remaining two (Table 11.1). Our goal is to formulate systematic methods for calculating these two parameters for nanometer-scale devices. Although not explicitly mentioned here, the output resistance, $r_{O}$, is also significant in many circuits and will be incorporated into our analysis in Sec. 11.4.5.\n\nTable 11.1 Three scenarios encountered in transistor design.\n\n|  | Case I | Case II | Case III |\n| :--- | :---: | :---: | :---: |\n| Given | $I_{D}, V_{D S, \\min }$ | $g_{m}, I_{D}$ | $g_{m}, V_{D S, \\min }$ |\n| To Be Determined | $\\frac{W}{L}, g_{m}$ | $\\frac{W}{L}, V_{D S, \\min }$ | $\\frac{W}{L}, I_{D}$ |\n| Design Revision | $g_{m}$ insufficient; | $V_{D S, \\min \\text { too large; }}$ | $I_{D}$ too large; |\n|  | Increase $I_{D}$ and $\\frac{W}{L}$ | Increase $\\frac{W}{L}$ | Increase $\\frac{W}{L} ;$ Decrease $V_{G S}-V_{T H}$ |\n\nThe reader might observe that the design issues presented in Table 11.1 are \"overconstrained,\" meaning the two provided parameters invariably determine the other two, even if the outcomes are not always optimal. For instance, a known $I_{D}$ and $V_{D S, \\min }$ directly yield a $g_{m}$ value that might be inadequate for a specific circuit. In such scenarios, we must adjust the design as outlined in the last row of the table. We will delve into this row in the subsequent design studies, but let's offer some initial comments here. In Case I, an inadequate $g_{m}$ necessitates a higher $I_{D}$ (which might surpass a power limit) and a larger $W / L$ (to meet the specified $V_{D S, \\min }$). In Case II, the given $I_{D}$ and $g_{m}$ might result in an excessively high $V_{D S, \\text { min }}$, thus requiring a larger $W / L$. In Case III, the required $I_{D}$ may be too high, necessitating a greater $W / L$ and a reduced overdrive. ${ }^{2}$"
},
{
    "text": "It should be evident to the reader by now that a specific transistor in a circuit is defined by numerous parameters. In this section, we presuppose that transistors function in saturation and concentrate on two bias quantities, $I_{D}$ and $V_{G S}-V_{T H}\\left(=V_{D S, \\min }\\right)$, one small-signal parameter, $g_{m}$, and one physical parameter, $W / L$. A standard transistor design problem specifies two of the initial three parameters and aims to determine the remaining two (see Table 11.1). Our objective is to formulate systematic methods for calculating these two parameters for nanometer-scale devices. Although not explicitly mentioned here, the output resistance, $r_{O}$, is also crucial in many circuits and will be incorporated into our analysis in Sec. 11.4.5.\n\nTable 11.1 illustrates three common scenarios in transistor design.\n\n|  | Case I | Case II | Case III |\n| :--- | :---: | :---: | :---: |\n| Given | $I_{D}, V_{D S, \\min }$ | $g_{m}, I_{D}$ | $g_{m}, V_{D S, \\min }$ |\n| To Be Determined | $\\frac{W}{L}, g_{m}$ | $\\frac{W}{L}, V_{D S, \\min }$ | $\\frac{W}{L}, I_{D}$ |\n| Design Revision | $g_{m}$ insufficient; | $V_{D S, \\min \\text { too large; }}$ | $I_{D}$ too large; |\n|  | Increase $I_{D}$ and $\\frac{W}{L}$ | Increase $\\frac{W}{L}$ | Increase $\\frac{W}{L} ;$ Decrease $V_{G S}-V_{T H}$ |\n\nThe reader might observe that the design issues presented in Table 11.1 are \"overconstrained,\" meaning the two provided parameters inherently determine the values of the other two, even if the outcomes are not always optimal. For instance, a known $I_{D}$ and $V_{D S, \\min }$ directly yield a $g_{m}$ value that might be inadequate for a specific circuit. In such scenarios, we must adjust the design as suggested in the table's final row. We will delve into this row in the upcoming design studies, but let's offer some initial comments here. In Case I, an inadequate $g_{m}$ necessitates a higher $I_{D}$ (which might surpass power constraints) and a larger $W / L$ (to meet the specified $V_{D S, \\min }$). In Case II, the given $I_{D}$ and $g_{m}$ might result in an excessively high $V_{D S, \\text { min }}$, thus requiring a larger $W / L$. In Case III, the required $I_{D}$ might be too high, necessitating a greater $W / L$ and a reduced overdrive. ${ }^{2}$"
},
{
    "text": "It should be apparent to the reader by now that a specific transistor in a circuit is defined by numerous parameters. In this section, we presuppose that transistors function in saturation and concentrate on two bias values, $I_{D}$ and $V_{G S}-V_{T H}\\left(=V_{D S, \\min }\\right)$, one small-signal parameter, $g_{m}$, and one physical parameter, $W / L$. A standard transistor design problem typically specifies two of the initial three parameters and aims to determine the remaining two (refer to Table 11.1). Our goal is to formulate systematic methods for calculating these two parameters for nanometer-scale devices. Although not explicitly mentioned here, the output resistance, $r_{O}$, is also significant in many circuits and will be incorporated into our analysis in Sec. 11.4.5.\n\nTable 11.1 illustrates three common scenarios in transistor design.\n\n|  | Case I | Case II | Case III |\n| :--- | :---: | :---: | :---: |\n| Given | $I_{D}, V_{D S, \\min }$ | $g_{m}, I_{D}$ | $g_{m}, V_{D S, \\min }$ |\n| To Be Determined | $\\frac{W}{L}, g_{m}$ | $\\frac{W}{L}, V_{D S, \\min }$ | $\\frac{W}{L}, I_{D}$ |\n| Design Revision | $g_{m}$ insufficient; | $V_{D S, \\min \\text { too large; }}$ | $I_{D}$ too large; |\n|  | Increase $I_{D}$ and $\\frac{W}{L}$ | Increase $\\frac{W}{L}$ | Increase $\\frac{W}{L} ;$ Decrease $V_{G S}-V_{T H}$ |\n\nThe reader might observe that the design issues presented in Table 11.1 are \"overconstrained,\" meaning the two provided parameters inherently dictate the values of the other two, even if the outcomes are not always optimal. For instance, a known $I_{D}$ and $V_{D S, \\min }$ directly yield a $g_{m}$ value that might be inadequate for a specific circuit. In such situations, we must adjust the design as suggested in the table's final row. We will delve into this row in the subsequent design analyses, but let's offer some initial comments here. In Case I, an inadequate $g_{m}$ necessitates a higher $I_{D}$ (which might surpass power constraints) and a larger $W / L$ (to meet the specified $V_{D S, \\min }$). In Case II, the given $I_{D}$ and $g_{m}$ might result in an excessively high $V_{D S, \\text { min }}$, thus requiring a larger $W / L$. In Case III, the required $I_{D}$ could be too high, mandating an increase in $W / L$ and a reduction in the overdrive. ${ }^{2}$"
},
{
    "text": "It has likely become apparent to the reader that a specific transistor in a circuit is defined by numerous parameters. In this section, we presuppose that transistors function in saturation and concentrate on two bias quantities, $I_{D}$ and $V_{G S}-V_{T H}\\left(=V_{D S, \\min }\\right)$, one small-signal parameter, $g_{m}$, and one physical parameter, $W / L$. A standard transistor design issue specifies two of the initial three parameters and aims to determine the remaining two (see Table 11.1). Our objective is to formulate systematic methods for calculating these two parameters for nanometer-scale devices. Although not explicitly mentioned here, the output resistance, $r_{O}$, is also significant in many circuits and will be incorporated into our analysis in Sec. 11.4.5.\n\nTable 11.1 Three scenarios encountered in transistor design.\n\n|  | Case I | Case II | Case III |\n| :--- | :---: | :---: | :---: |\n| Given | $I_{D}, V_{D S, \\min }$ | $g_{m}, I_{D}$ | $g_{m}, V_{D S, \\min }$ |\n| To Be Determined | $\\frac{W}{L}, g_{m}$ | $\\frac{W}{L}, V_{D S, \\min }$ | $\\frac{W}{L}, I_{D}$ |\n| Design Revision | $g_{m}$ insufficient; | $V_{D S, \\min \\text { too large; }}$ | $I_{D}$ too large; |\n|  | Increase $I_{D}$ and $\\frac{W}{L}$ | Increase $\\frac{W}{L}$ | Increase $\\frac{W}{L} ;$ Decrease $V_{G S}-V_{T H}$ |\n\nThe reader may observe that the design problems presented in Table 11.1 are \"overconstrained,\" meaning the two provided parameters invariably determine the values of the other two, even if the outcomes are not always optimal. For instance, a known $I_{D}$ and $V_{D S, \\min }$ directly yield a $g_{m}$ value that might be inadequate for a specific circuit. In such scenarios, we must adjust the design as outlined in the final row of the table. We will expand on this row in the subsequent design studies, but let's offer some initial comments here. In Case I, an inadequate $g_{m}$ necessitates a higher $I_{D}$ (which might surpass a power limit) and a larger $W / L$ (to meet the specified $V_{D S, \\min }$). In Case II, the given $I_{D}$ and $g_{m}$ might result in an excessively high $V_{D S, \\text { min }}$, thus requiring a larger $W / L$. In Case III, the required $I_{D}$ might be too high, necessitating a larger $W / L$ and a reduced overdrive. ${ }^{2}$"
},
{
    "text": "It should be evident to the reader by now that a specific transistor in a circuit is defined by numerous parameters. In this section, we presuppose that transistors function in saturation and concentrate on two bias values, $I_{D}$ and $V_{G S}-V_{T H}\\left(=V_{D S, \\min }\\right)$, one small-signal parameter, $g_{m}$, and one physical parameter, $W / L$. A standard transistor design problem specifies two of the initial three parameters and aims to determine the remaining two (see Table 11.1). Our goal is to devise systematic methods for calculating these two parameters for nanometer-scale devices. Although not explicitly mentioned here, the output resistance, $r_{O}$, is also crucial in many circuits and will be incorporated into our analysis in Sec. 11.4.5.\n\nTable 11.1 Three scenarios encountered in transistor design.\n\n|  | Case I | Case II | Case III |\n| :--- | :---: | :---: | :---: |\n| Given | $I_{D}, V_{D S, \\min }$ | $g_{m}, I_{D}$ | $g_{m}, V_{D S, \\min }$ |\n| To Be Determined | $\\frac{W}{L}, g_{m}$ | $\\frac{W}{L}, V_{D S, \\min }$ | $\\frac{W}{L}, I_{D}$ |\n| Design Revision | $g_{m}$ insufficient; | $V_{D S, \\min \\text { too large; }}$ | $I_{D}$ too large; |\n|  | Increase $I_{D}$ and $\\frac{W}{L}$ | Increase $\\frac{W}{L}$ | Increase $\\frac{W}{L} ;$ Decrease $V_{G S}-V_{T H}$ |\n\nThe reader might observe that the design issues presented in Table 11.1 are \"overconstrained,\" meaning the two provided parameters invariably determine the values of the other two, even if the outcomes are not always optimal. For instance, a known $I_{D}$ and $V_{D S, \\min }$ directly yield a $g_{m}$ value that might be inadequate for a specific circuit. In such scenarios, we must adjust the design as suggested in the last row of the table. We will expand on this row in the subsequent design studies, but let's offer some initial comments here. In Case I, an inadequate $g_{m}$ necessitates a higher $I_{D}$ (which might surpass a power limit) and a larger $W / L$ (to meet the specified $V_{D S, \\min }$). In Case II, the given $I_{D}$ and $g_{m}$ might result in an excessively high $V_{D S, \\text { min }}$, thus requiring a larger $W / L$. In Case III, the required $I_{D}$ might be too high, necessitating a greater $W / L$ and a reduced overdrive. ${ }^{2}$"
},
{
    "text": "The reader may have observed by now that a specific transistor in a circuit is defined by numerous parameters. In this section, we presume that transistors function in saturation and concentrate on two bias quantities, $I_{D}$ and $V_{G S}-V_{T H}\\left(=V_{D S, \\min }\\right)$, one small-signal parameter, $g_{m}$, and one physical parameter, $W / L$. A standard transistor design problem specifies two of the first three parameters and seeks the remaining two (Table 11.1). Our goal is to establish systematic methods for calculating these two parameters for nanometer-scale devices. Although not explicitly mentioned here, the output resistance, $r_{O}$, also plays a crucial role in many circuits and will be incorporated into our analysis in Sec. 11.4.5.\n\nTable 11.1 Three scenarios encountered in transistor design.\n\n|  | Case I | Case II | Case III |\n| :--- | :---: | :---: | :---: |\n| Given | $I_{D}, V_{D S, \\min }$ | $g_{m}, I_{D}$ | $g_{m}, V_{D S, \\min }$ |\n| To Be Determined | $\\frac{W}{L}, g_{m}$ | $\\frac{W}{L}, V_{D S, \\min }$ | $\\frac{W}{L}, I_{D}$ |\n| Design Revision | $g_{m}$ insufficient; | $V_{D S, \\min }$ too large; | $I_{D}$ too large; |\n|  | Increase $I_{D}$ and $\\frac{W}{L}$ | Increase $\\frac{W}{L}$ | Increase $\\frac{W}{L}$; Decrease $V_{G S}-V_{T H}$ |\n\nThe reader may note that the design issues presented in Table 11.1 are \"overconstrained,\" meaning the two provided parameters invariably result in specific values for the other two, even if the outcomes are not always ideal. For instance, a known $I_{D}$ and $V_{D S, \\min }$ directly yield a $g_{m}$ value that might be inadequate for a particular circuit. In such instances, we must adjust the design as outlined in the last row of the table. We will expand on this row in the subsequent design studies, but let's make some initial observations here. In Case I, an inadequate $g_{m}$ necessitates a higher $I_{D}$ (which might surpass a power limit) and a larger $W / L$ (to meet the specified $V_{D S, \\min }$). In Case II, the given $I_{D}$ and $g_{m}$ might result in an excessively high $V_{D S, \\text { min }}$, thus requiring a larger $W / L$. In Case III, the required $I_{D}$ might be too high, necessitating a greater $W / L$ and a reduced overdrive. ${ }^{2}$"
},
{
    "text": "A frequent scenario in analog design unfolds as follows. For a specific transistor in the circuit, we have selected a bias current (perhaps based on a power budget) and a minimum $V_{DS}$ (perhaps according to the voltage headroom, i.e., the constraints imposed by the supply voltage and required swings). ${ }^{3}$ We now aim to determine the dimensions and the transconductance of the device, acknowledging that the square-law equations are imprecise. Of course, with available transistor models, we can simulate the device to obtain these values, but we seek a more systematic and less labor-intensive approach. Our method involves three steps. We consider $I_{D}=0.5 \\mathrm{~mA}$ and $V_{DS, \\min }=200 \\mathrm{mV}$ as an example.\n\nStep 1 Choose a \"reference\" transistor with a width $W_{REF}$ and a length equal to the minimum allowable value, $L_{\\min }$ (e.g., $L_{\\min }=40 \\mathrm{~nm}$). Let's select $W_{REF}=5 \\mu \\mathrm{~m}$ as an example.\n\nStep 2 Utilize the actual device models and a circuit simulator to plot the $I_{D}-V_{DS}$ characteristics of the reference transistor for various values of $V_{GS}-V_{TH}$. In typical analog circuits, $V_{GS}-V_{TH}$ ranges from approximately 50 mV to 600 mV. We can thus construct the characteristics with the overdrive voltage.\n\nimage_name:Figure 11.10\ndescription:Figure 11.10 depicts a plot of the drain current ($I_D$) versus the drain-source voltage ($V_{DS}$) for a reference transistor. The graph consists of $I_D$-$V_{DS}$ characteristics for different overdrive voltage values, $V_{GS} - V_{TH}$, incremented in 50 mV steps, ranging from 50 mV to 350 mV.\n\n1. **Type of Graph and Function:**\n- This is an $I_D$-$V_{DS}$ characteristics plot, commonly used in transistor analysis to show how the drain current varies with the drain-source voltage for different gate-source overdrive voltages.\n\n2. **Axes Labels and Units:**\n- The x-axis represents $V_{DS}$ (drain-source voltage) in volts (V), ranging from 0 to 1 V.\n- The y-axis represents $I_D$ (drain current) in milliamperes (mA), ranging from 0 to 1.2 mA.\n- The graph uses a linear scale for both axes.\n\n3. **Overall Behavior and Trends:**\n- The curves exhibit typical transistor behavior, where the drain current increases with an increase in $V_{DS}$ and also with an increase in $V_{GS} - V_{TH}$.\n- For lower $V_{DS}$ values, the curves show a linear increase in current, indicating operation in the ohmic region.\n- As $V_{DS}$ increases further, the curves flatten, indicating the saturation region where the current becomes relatively constant.\n\n4. **Key Features and Technical Details:**\n- Each curve corresponds to a specific $V_{GS} - V_{TH}$ value, starting from 50 mV and increasing in 50 mV steps up to 350 mV.\n- The saturation current increases with higher $V_{GS} - V_{TH}$ values.\n- A vertical line is drawn at $V_{DS} = 0.2$ V, intersecting the curves, indicating a reference point, possibly related to a specific operating condition.\n\n5. **Annotations and Specific Data Points:**\n- The vertical line at $V_{DS} = 0.2$ V intersects the curves around $I_D = 0.5$ mA, highlighting a specific operating point or condition of interest.\n\nFigure 11.10 Drain current for $V_{GS}-V_{TH}=50 \\mathrm{mV} \\cdots 350 \\mathrm{mV}$ in 50 mV increments for a reference device.\nincrementing in 50 mV steps. ${ }^{4}$ Figure 11.10 shows the results for $W_{REF} / L_{\\min }=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$. (Here, $V_{GS}-V_{TH}$ increments from 50 mV to 350 mV for clarity.)\n\nStep 3 Considering our example specifies $I_{D}=0.5 \\mathrm{~mA}$ and $V_{DS, \\min }=200 \\mathrm{mV}$, we draw a vertical line at $V_{DS}=200 \\mathrm{mV}$ (Fig. 11.10) and find its intersection with the plots. Which plot should we choose? If the device followed the square law, we would select the plot for $V_{GS}-V_{TH}=V_{DS, \\text { min }}=200 \\mathrm{mV}$. However, the short-channel device remains in saturation even for $V_{GS}-V_{TH}=350 \\mathrm{mV}$ at $V_{DS}=200 \\mathrm{mV}$. The situation is thus more complex, but let's proceed with $V_{GS}-V_{TH}=200 \\mathrm{mV}$ for now.\n\nStep 4 The previous steps have yielded, for the reference transistor, one operating point that meets the $V_{DS}$ requirement. The drain current, $I_{D, REF}$, however, may not be close to the required value, 0.5 mA in our example. What should we do? We must now scale the width of the transistor and hence its drain current. Since in Fig. 11.10, $I_{D, REF} \\approx 100 \\mu \\mathrm{~A}$, we choose a transistor width of $(500 \\mu \\mathrm{~A} / 100 \\mu \\mathrm{~A}) \\times W_{REF}=5 W_{REF}=25 \\mu \\mathrm{~m}$.\n\nWhat is the transconductance of the initial reference transistor? From the plots in Fig. 11.10, we observe that as $V_{GS}-V_{TH}$ increases from 200 mV to 250 mV, $I_{D}$ changes by about 100 µA. Thus, $g_{m} \\approx 100 \\mu \\mathrm{~A} / 50 \\mathrm{mV}=2 \\mathrm{mS}$. Since the change in the overdrive is not significantly less than the initial value of 200 mV, we may seek a more precise value for $g_{m}$. To this end, let's return to the reference transistor and, using simulations, plot its transconductance as a function of $V_{GS}-V_{TH}$ with $V_{DS}=200 \\mathrm{mV}$. For a square-law device, this plot would be a straight line, $g_{m}=\\mu_{n} C_{ox}\\left(W_{REF} / L_{\\min }\\right)\\left(V_{GS}-V_{TH}\\right)$, but with short-channel effects, $g_{m}$ eventually saturates. Shown in Fig. 11.11, the result predicts $g_{m}=1.5 \\mathrm{mS}$ for $V_{GS}-V_{TH}=200 \\mathrm{mV}$. Now, if both the width and the drain current are scaled up by a factor of 5, then $g_{m}$ also increases by the same factor (Example 11.2), reaching 7.5 mS. As indicated in Table 11.1, if this transconductance is insufficient, $W / L$ must be increased further.\n\nWith the $I_{D}$ and $g_{m}$ plots obtained for the reference device, we can easily perform scaling to determine the width and transconductance of other transistors in a circuit. The key point here is that the $I_{D}$ and $g_{m}$ simulations are conducted only once (for a given channel length) but serve most of our design work.\n\nimage_name:Figure 11.11\ndescription:The graph in Figure 11.11 plots transconductance ($g_{m}$) against overdrive voltage ($V_{GS} - V_{TH}$) for a specific transistor configuration. The x-axis represents the overdrive voltage, $V_{GS} - V_{TH}$, in volts (V), ranging from 0 to 0.6 V. The y-axis represents the transconductance, $g_{m}$, in millisiemens (mS), ranging from 0 to 6 mS.\n\nThe graph shows a curve that starts near the origin and rises steeply, indicating that as the overdrive voltage increases, the transconductance also increases. The curve initially has a steep slope, showing a rapid increase in transconductance for small increases in overdrive voltage. This behavior continues up to around 0.4 V, where the curve begins to level off, indicating a saturation region where further increases in overdrive voltage result in smaller increases in transconductance.\n\nKey features of the graph include:\n- A steep initial increase in $g_{m}$ as $V_{GS} - V_{TH}$ increases from 0 to about 0.3 V.\n- A transition region from about 0.3 V to 0.4 V where the rate of increase in $g_{m}$ begins to slow.\n- A saturation region beyond 0.4 V where $g_{m}$ approaches a maximum value of just over 5 mS.\n\nThe graph is significant for understanding how changes in overdrive voltage affect the transconductance of a transistor, which is crucial for designing circuits that require specific transconductance values.\n\nFigure 11.11 Dependence of $g_{m}$ on overdrive for $W / L=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ and $V_{DS}=200 \\mathrm{mV}$.\nCan we choose a higher overdrive voltage in Fig. 11.10? Suppose we select $V_{GS}-V_{TH}=250 \\mathrm{mV}$, obtaining $I_{D}=200 \\mu \\mathrm{~A}$ for the reference transistor and a transconductance of about 2.3 mS from Fig. 11.11. If scaled up to $12.5 \\mu \\mathrm{~m}$ to carry $500 \\mu \\mathrm{~A}$, the transistor exhibits a transconductance of $2.5 \\times 2.3 \\mathrm{mS}=5.75 \\mathrm{mS}$, a value less than that observed in the previous case (7.5 mS). This occurs because $g_{m}=2 I_{D} /\\left(V_{GS}-V_{TH}\\right)$ in saturation. To achieve a high transconductance, we typically choose $V_{GS}-V_{TH} \\approx V_{DS, \\text { min }}$ even though it results in a wider transistor.\n\n#### Example 11.4\n\nThe circuit shown in Fig. 11.12 must be designed for a power budget of 1 mW and a peak-to-peak output voltage swing of 0.8 V. Assuming $L=40 \\mathrm{~nm}$ for $M_{1}$, compute its required width. Can the transistor provide a transconductance of $1 /(50 \\Omega)$?\nimage_name:Figure 11.12\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: VDD, type: VoltageSource, value: 1V, ports: {Np: VDD, Nn: GND}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with a drain resistor RD. The NMOS transistor M1 is used for amplification, and the circuit is powered by a 1V supply. The output voltage swing is between 0.2V and 1V.\nimage_name:Figure 11.12\ndescription:The graph depicts a time-domain waveform of the output voltage, \\( V_{out} \\), of a transistor circuit over time. The waveform is a sinusoidal signal with a peak-to-peak voltage swing of 0.8 V, oscillating between 1 V and 0.2 V. The horizontal axis represents time, typically in seconds or a submultiple thereof, while the vertical axis represents the output voltage in volts.\n\nType of Graph and Function\n- **Graph Type:** Time-domain waveform\n- **Function Type:** Sinusoidal signal\n\nAxes Labels and Units\n- **Horizontal Axis:** Time (units not specified, but generally in seconds)\n- **Vertical Axis:** Voltage (in volts)\n- **Voltage Range:** 0.2 V to 1 V\n\nOverall Behavior and Trends\n- The waveform displays sinusoidal behavior, indicating periodic oscillations in the output voltage.\n- The amplitude of the waveform is consistent, suggesting stable operation within the specified voltage range.\n\nKey Features and Technical Details\n- **Peak Voltage:** 1 V\n- **Minimum Voltage:** 0.2 V\n- **Peak-to-Peak Voltage Swing:** 0.8 V\n- The waveform remains within the saturation region of the transistor, as indicated by the context, ensuring \\( M_1 \\) remains in saturation.\n\nAnnotations and Specific Data Points\n- The waveform is annotated with horizontal dashed lines at 1 V and 0.2 V, marking the peak and minimum voltage levels, respectively.\n\nThis graph is crucial for analyzing the performance of the transistor \\( M_1 \\) in maintaining the required output voltage swing while staying within the power budget and saturation region.\n\n#### Solution\n\nThe power budget, along with $V_{DD}=1 \\mathrm{~V}$, translates to a drain bias current of 1 mA. For the circuit to accommodate an output swing of $0.8 \\mathrm{~V}$, $M_{1}$ must remain in saturation as $V_{DS}$ drops to 0.2 V. We refer back to the $I_{D}-V_{DS}$ characteristics of Fig. 11.10 and note that $I_{D, REF} \\approx 100 \\mu \\mathrm{~A}$ for $V_{DS}=V_{GS}-V_{TH}=200 \\mathrm{mV}$. We must therefore scale $W_{REF}$ up by a factor of $1 \\mathrm{~mA} / 0.1 \\mathrm{~mA}$, obtaining $W / L=50 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$. The transconductance is also multiplied by this factor, reaching $15 \\mathrm{mS}=1 /(67 \\Omega)$. Note that these results are independent of the value of $R_{D}$.\n\nWe conclude that, if the transistor is designed solely to meet this example's $I_{D}$ and $V_{DS}$ specifications, it does not necessarily achieve a transconductance of $1 /(50 \\Omega)$.\n\nIn addition to $I_{D}, V_{GS}-V_{TH}$, and $g_{m}$, the output impedance of the transistors also becomes important in many analog circuits. As explained in Chapter 17, $r_{O}$ cannot be expressed as $1 /\\left(\\lambda I_{D}\\right)$ for short-channel devices. The value of $r_{O}$ can be estimated from the slope of the $I_{D}$ characteristics in Fig. 11.2, but for convenience and accuracy, we use simulations to plot $r_{O}$ for the reference transistor as a function of $I_{D}$ (Fig. 11.13).\nimage_name:Figure 11.13\ndescription:Figure 11.13 illustrates the output resistance \\( r_O \\) of a 5-\\( \\mu \\)m / 40-nm NMOS device as a function of the drain current \\( I_D \\). The graph is a two-dimensional plot with the x-axis labeled \\( I_D \\) (mA) representing the drain current in milliamperes, ranging from 0 to 0.5 mA. The y-axis is labeled \\( r_O \\) (k\\( \\Omega \\)), indicating the output resistance in kilo-ohms, ranging from 0 to 14 k\\( \\Omega \\).\n\nThe graph shows a downward-sloping curve, indicating that as the drain current \\( I_D \\) increases, the output resistance \\( r_O \\) decreases. The curve starts at an output resistance of approximately 12 k\\( \\Omega \\) when the drain current is near 0 mA and decreases to about 3 k\\( \\Omega \\) as the drain current approaches 0.5 mA.\n\nThe graph has a smooth, continuous curve with no sharp transitions or discontinuities, suggesting a consistent relationship between the drain current and output resistance over the range of values plotted. The trend is characterized by a steep decrease in resistance at lower drain currents, gradually leveling off as the current increases.\n\nFigure 11.13 Output resistance of a $5-\\mu \\mathrm{m} / 40-\\mathrm{nm}$ NMOS device as a function of drain current.\n\n#### Example 11.5\n\nDetermine the output resistance of $M_{1}$ in Example 11.4.\n\n#### Solution\n\nThe reference transistor in Example 11.4 carries a current of $100 \\mu \\mathrm{~A}$, exhibiting an output resistance of $8 \\mathrm{k} \\Omega$. Since both the width and the drain current are scaled up by a factor of 10, the output resistance drops by the same factor, resulting in $800 \\Omega$."
},
{
    "text": "A frequent scenario in analog design unfolds as follows. For a specific transistor in the circuit, we select a bias current (perhaps based on a power budget) and a minimum $V_{DS}$ (perhaps determined by the voltage headroom, i.e., the constraints imposed by the supply voltage and required swings). ${ }^{3}$ Our goal is to determine the dimensions and transconductance of the device, acknowledging that the square-law equations are imprecise. While transistor models allow us to simulate the device and obtain these values, we aim for a more systematic and less tedious approach. Our method involves three steps. Let's consider $I_{D}=0.5 \\mathrm{~mA}$ and $V_{DS, \\min }=200 \\mathrm{mV}$ as an example.\n\nStep 1 Choose a \"reference\" transistor with a width $W_{REF}$ and a length equal to the minimum allowable value, $L_{\\min }$ (e.g., $L_{\\min }=40 \\mathrm{~nm}$). For instance, let's pick $W_{REF}=5 \\mu \\mathrm{~m}$.\n\nStep 2 Utilize the actual device models and a circuit simulator to plot the $I_{D}-V_{DS}$ characteristics of the reference transistor for various values of $V_{GS}-V_{TH}$. In typical analog circuits, $V_{GS}-V_{TH}$ ranges from approximately 50 mV to 600 mV. We can thus construct the characteristics with the overdrive voltage.\n\nimage_name:Figure 11.10\ndescription:Figure 11.10 depicts the drain current ($I_D$) versus the drain-source voltage ($V_{DS}$) for a reference transistor. The graph comprises $I_D$-$V_{DS}$ characteristics for different overdrive voltages, $V_{GS} - V_{TH}$, incremented in 50 mV steps, ranging from 50 mV to 350 mV.\n\n1. **Graph Type and Function:**\n- This is an $I_D$-$V_{DS}$ characteristics plot, commonly used in transistor analysis to illustrate how the drain current varies with the drain-source voltage for different gate-source overdrive voltages.\n\n2. **Axes Labels and Units:**\n- The x-axis represents $V_{DS}$ (drain-source voltage) in volts (V), ranging from 0 to 1 V.\n- The y-axis represents $I_D$ (drain current) in milliamperes (mA), ranging from 0 to 1.2 mA.\n- Both axes use a linear scale.\n\n3. **Overall Behavior and Trends:**\n- The curves exhibit typical transistor behavior, with the drain current increasing as $V_{DS}$ and $V_{GS} - V_{TH}$ increase.\n- For lower $V_{DS}$ values, the curves show a linear increase in current, indicating operation in the ohmic region.\n- As $V_{DS}$ increases further, the curves flatten, indicating the saturation region where the current becomes relatively constant.\n\n4. **Key Features and Technical Details:**\n- Each curve corresponds to a specific $V_{GS} - V_{TH}$ value, starting from 50 mV and increasing in 50 mV steps up to 350 mV.\n- The saturation current increases with higher $V_{GS} - V_{TH}$ values.\n- A vertical line is drawn at $V_{DS} = 0.2$ V, intersecting the curves, indicating a reference point, possibly related to a specific operating condition.\n\n5. **Annotations and Specific Data Points:**\n- The vertical line at $V_{DS} = 0.2$ V intersects the curves around $I_D = 0.5$ mA, highlighting a specific operating point or condition of interest.\n\nFigure 11.10 Drain current for $V_{GS}-V_{TH}=50 \\mathrm{mV} \\cdots 350 \\mathrm{mV}$ in 50 mV steps for a reference device.\nincrementing in 50 mV steps. ${ }^{4}$ Figure 11.10 shows the results for $W_{REF} / L_{\\min }=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$. (Here, $V_{GS}-V_{TH}$ increments from 50 mV to 350 mV for clarity.)\n\nStep 3 Considering our example specifies $I_{D}=0.5 \\mathrm{~mA}$ and $V_{DS, \\min }=200 \\mathrm{mV}$, we draw a vertical line at $V_{DS}=200 \\mathrm{mV}$ (Fig. 11.10) and find its intersection with the plots. Which plot should we choose? If the device followed the square law, we would select the plot for $V_{GS}-V_{TH}=V_{DS, \\text { min }}=200 \\mathrm{mV}$. However, the short-channel device remains in saturation even for $V_{GS}-V_{TH}=350 \\mathrm{mV}$ at $V_{DS}=200 \\mathrm{mV}$. The situation is thus more complex, but let's proceed with $V_{GS}-V_{TH}=200 \\mathrm{mV}$ for now.\n\nStep 4 The previous steps have provided, for the reference transistor, one operating point that meets the $V_{DS}$ requirement. The drain current, $I_{D, REF}$, however, may not be close to the required value, 0.5 mA in our example. What should we do? We must now scale the width of the transistor and, consequently, its drain current. Since in Fig. 11.10, $I_{D, REF} \\approx 100 \\mu \\mathrm{~A}$, we choose a transistor width of $(500 \\mu \\mathrm{~A} / 100 \\mu \\mathrm{~A}) \\times W_{REF}=5 W_{REF}=25 \\mu \\mathrm{~m}$.\n\nWhat is the transconductance of the initial reference transistor? From the plots in Fig. 11.10, we observe that as $V_{GS}-V_{TH}$ increases from 200 mV to 250 mV, $I_{D}$ changes by about 100 µA. Thus, $g_{m} \\approx 100 \\mu \\mathrm{~A} / 50 \\mathrm{mV}=2 \\mathrm{mS}$. Since the change in the overdrive is not significantly less than the initial value of 200 mV, we may seek a more precise value for $g_{m}$. To this end, let's return to the reference transistor and, using simulations, plot its transconductance as a function of $V_{GS}-V_{TH}$ with $V_{DS}=200 \\mathrm{mV}$. For a square-law device, this plot would be a straight line, $g_{m}=\\mu_{n} C_{ox}\\left(W_{REF} / L_{\\min }\\right)\\left(V_{GS}-V_{TH}\\right)$, but with short-channel effects, $g_{m}$ eventually saturates. As shown in Fig. 11.11, the result predicts $g_{m}=1.5 \\mathrm{mS}$ for $V_{GS}-V_{TH}=200 \\mathrm{mV}$. Now, if both the width and the drain current are scaled up by a factor of 5, then $g_{m}$ also increases by the same factor (Example 11.2), reaching 7.5 mS. As indicated in Table 11.1, if this transconductance is insufficient, $W / L$ must be increased further.\n\nWith the $I_{D}$ and $g_{m}$ plots obtained for the reference device, we can easily perform scaling to determine the width and transconductance of other transistors in the circuit. The key point here is that the $I_{D}$ and $g_{m}$ simulations are conducted only once (for a given channel length) but serve most of our design work.\n\nimage_name:Figure 11.11\ndescription:Figure 11.11 is a plot of transconductance ($g_{m}$) versus overdrive voltage ($V_{GS} - V_{TH}$) for a specific transistor configuration. The x-axis represents the overdrive voltage, $V_{GS} - V_{TH}$, in volts (V), ranging from 0 to 0.6 V. The y-axis represents the transconductance, $g_{m}$, in millisiemens (mS), ranging from 0 to 6 mS.\n\nThe graph shows a curve that starts near the origin and rises steeply, indicating that as the overdrive voltage increases, the transconductance also increases. The curve initially has a steep slope, showing a rapid increase in transconductance for small increases in overdrive voltage. This behavior continues up to around 0.4 V, where the curve begins to level off, indicating a saturation region where further increases in overdrive voltage result in smaller increases in transconductance.\n\nKey features of the graph include:\n- A steep initial increase in $g_{m}$ as $V_{GS} - V_{TH}$ increases from 0 to about 0.3 V.\n- A transition region from about 0.3 V to 0.4 V where the rate of increase in $g_{m}$ begins to slow.\n- A saturation region beyond 0.4 V where $g_{m}$ approaches a maximum value of just over 5 mS.\n\nThe graph is significant for understanding how changes in overdrive voltage affect the transconductance of a transistor, which is crucial for designing circuits that require specific transconductance values.\n\nFigure 11.11 Dependence of $g_{m}$ on overdrive for $W / L=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ and $V_{DS}=200 \\mathrm{mV}$.\nCan we choose a higher overdrive voltage in Fig. 11.10? Suppose we select $V_{GS}-V_{TH}=250 \\mathrm{mV}$, obtaining $I_{D}=200 \\mu \\mathrm{~A}$ for the reference transistor and a transconductance of about 2.3 mS from Fig. 11.11. If scaled up to $12.5 \\mu \\mathrm{~m}$ to carry $500 \\mu \\mathrm{~A}$, the transistor exhibits a transconductance of $2.5 \\times 2.3 \\mathrm{mS}=5.75 \\mathrm{mS}$, a value less than that observed in the previous case (7.5 mS). This occurs because $g_{m}=2 I_{D} /\\left(V_{GS}-V_{TH}\\right)$ in saturation. To achieve a high transconductance, we typically choose $V_{GS}-V_{TH} \\approx V_{DS, \\text { min }}$ even though it results in a wider transistor.\n\n#### Example 11.4\n\nThe circuit shown in Fig. 11.12 must be designed for a power budget of 1 mW and a peak-to-peak output voltage swing of 0.8 V. Assuming $L=40 \\mathrm{~nm}$ for $M_{1}$, compute its required width. Can the transistor provide a transconductance of $1 /(50 \\Omega)$?\nimage_name:Figure 11.12\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: VDD, type: VoltageSource, value: 1V, ports: {Np: VDD, Nn: GND}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with a drain resistor RD. The NMOS transistor M1 is used for amplification, and the circuit is powered by a 1V supply. The output voltage swing is between 0.2V and 1V.\nimage_name:Figure 11.12\ndescription:This graph illustrates the output voltage, \\( V_{out} \\), of a transistor circuit over time. The waveform is sinusoidal with a peak-to-peak voltage swing of 0.8 V, oscillating between 1 V and 0.2 V. The horizontal axis represents time, typically in seconds or a submultiple thereof, while the vertical axis represents the output voltage in volts.\n\nType of Graph and Function\n- **Graph Type:** Time-domain waveform\n- **Function Type:** Sinusoidal signal\n\nAxes Labels and Units\n- **Horizontal Axis:** Time (units not specified, but generally in seconds)\n- **Vertical Axis:** Voltage (in volts)\n- **Voltage Range:** 0.2 V to 1 V\n\nOverall Behavior and Trends\n- The waveform displays sinusoidal behavior, indicating periodic oscillations in the output voltage.\n- The amplitude of the waveform is consistent, suggesting stable operation within the specified voltage range.\n\nKey Features and Technical Details\n- **Peak Voltage:** 1 V\n- **Minimum Voltage:** 0.2 V\n- **Peak-to-Peak Voltage Swing:** 0.8 V\n- The waveform remains within the saturation region of the transistor, as indicated by the context, ensuring \\( M_1 \\) remains in saturation.\n\nAnnotations and Specific Data Points\n- The waveform is annotated with horizontal dashed lines at 1 V and 0.2 V, marking the peak and minimum voltage levels, respectively.\n\nThis graph is crucial for analyzing the performance of the transistor \\( M_1 \\) in maintaining the required output voltage swing while staying within the power budget and saturation region.\n\n#### Solution\n\nThe power budget, along with $V_{DD}=1 \\mathrm{~V}$, translates to a drain bias current of 1 mA. For the circuit to accommodate an output swing of $0.8 \\mathrm{~V}$, $M_{1}$ must remain in saturation as $V_{DS}$ falls to 0.2 V. We refer back to the $I_{D}-V_{DS}$ characteristics of Fig. 11.10 and note that $I_{D, REF} \\approx 100 \\mu \\mathrm{~A}$ for $V_{DS}=V_{GS}-V_{TH}=200 \\mathrm{mV}$. We must therefore scale $W_{REF}$ up by a factor of $1 \\mathrm{~mA} / 0.1 \\mathrm{~mA}$, obtaining $W / L=50 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$. The transconductance is also multiplied by this factor, reaching $15 \\mathrm{mS}=1 /(67 \\Omega)$. Note that these results are independent of the value of $R_{D}$.\n\nWe conclude that, if the transistor is designed merely to meet this example's $I_{D}$ and $V_{DS}$ specifications, it does not necessarily achieve a transconductance of $1 /(50 \\Omega)$.\n\nIn addition to $I_{D}, V_{GS}-V_{TH}$, and $g_{m}$, the output impedance of the transistors also becomes important in many analog circuits. As explained in Chapter 17, $r_{O}$ cannot be expressed as $1 /\\left(\\lambda I_{D}\\right)$ for short-channel devices. The value of $r_{O}$ can be estimated from the slope of the $I_{D}$ characteristics in Fig. 11.2, but for convenience and accuracy, we use simulations to plot $r_{O}$ for the reference transistor as a function of $I_{D}$ (Fig. 11.13).\nimage_name:Figure 11.13\ndescription:Figure 11.13 is a graph showing the output resistance \\( r_O \\) of a 5-\\( \\mu \\)m / 40-nm NMOS device as a function of the drain current \\( I_D \\). The x-axis is labeled \\( I_D \\) (mA), representing the drain current in milliamperes, ranging from 0 to 0.5 mA. The y-axis is labeled \\( r_O \\) (k\\( \\Omega \\)), indicating the output resistance in kilo-ohms, ranging from 0 to 14 k\\( \\Omega \\).\n\nThe graph displays a downward-sloping curve, showing that as the drain current \\( I_D \\) increases, the output resistance \\( r_O \\) decreases. The curve starts at an output resistance of approximately 12 k\\( \\Omega \\) when the drain current is near 0 mA and decreases to about 3 k\\( \\Omega \\) as the drain current approaches 0.5 mA.\n\nThe graph is smooth and continuous, with no sharp transitions or discontinuities, indicating a consistent relationship between the drain current and output resistance over the range of values plotted. The trend shows a steep decrease in resistance at lower drain currents, gradually leveling off as the current increases.\n\nFigure 11.13 Output resistance of a $5-\\mu \\mathrm{m} / 40-\\mathrm{nm}$ NMOS device as a function of drain current.\n\n#### Example 11.5\n\nDetermine the output resistance of $M_{1}$ in Example 11.4.\n\n#### Solution\n\nThe reference transistor in Example 11.4 carries a current of $100 \\mu \\mathrm{~A}$, exhibiting an output resistance of $8 \\mathrm{k} \\Omega$. Since both the width and the drain current are scaled up by a factor of 10, the output resistance drops by the same factor, resulting in $800 \\Omega$."
},
{
    "text": "A typical scenario in analog design unfolds as follows. For a specific transistor in the circuit, we select a bias current (possibly based on a power budget) and a minimum $V_{DS}$ (perhaps dictated by the voltage headroom, i.e., constraints imposed by the supply voltage and required signal swings). ${ }^{3}$ Our goal is to determine the dimensions and transconductance of the device, acknowledging that square-law equations are imprecise. While transistor models allow us to simulate and obtain these values, we seek a more systematic and less tedious approach. Our method involves three steps. Consider $I_{D}=0.5 \\mathrm{~mA}$ and $V_{DS, \\min }=200 \\mathrm{mV}$ as an example.\n\nStep 1: Choose a \"reference\" transistor with a width $W_{REF}$ and a length equal to the smallest allowable value, $L_{\\min }$ (e.g., $L_{\\min }=40 \\mathrm{~nm}$). Let's take $W_{REF}=5 \\mu \\mathrm{~m}$ as an example.\n\nStep 2: Utilize actual device models and a circuit simulator to plot the $I_{D}-V_{DS}$ characteristics of the reference transistor for various $V_{GS}-V_{TH}$ values. In typical analog circuits, $V_{GS}-V_{TH}$ ranges from about 50 mV to 600 mV. We can thus construct the characteristics with the overdrive voltage incremented in steps of $50 \\mathrm{mV}$.^{4} Figure 11.10 displays the results for $W_{REF} / L_{\\min }=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$, with $V_{GS}-V_{TH}$ ranging from 50 mV to 350 mV for clarity.\n\nStep 3: Given our example specifies $I_{D}=0.5 \\mathrm{~mA}$ and $V_{DS, \\min }=200 \\mathrm{mV}$, we draw a vertical line at $V_{DS}=200 \\mathrm{mV}$ (Fig. 11.10) and locate its intersection with the plots. Which plot should we choose? If the device followed the square law, we would pick the plot for $V_{GS}-V_{TH}=V_{DS, \\min }=200 \\mathrm{mV}$. However, the short-channel device remains in saturation even for $V_{GS}-V_{TH}=350 \\mathrm{mV}$ at $V_{DS}=200 \\mathrm{mV}$. The situation is thus more complex, but let's proceed with $V_{GS}-V_{TH}=200 \\mathrm{mV}$ for now.\n\nStep 4: The previous steps have provided, for the reference transistor, one operating point that meets the $V_{DS}$ requirement. The drain current, $I_{D, REF}$, however, may not be close to the desired value, 0.5 mA in our case. What should we do? We must now scale the transistor's width and hence its drain current. Since in Fig. 11.10, $I_{D, REF} \\approx 100 \\mu \\mathrm{~A}$, we select a transistor width of $(500 \\mu \\mathrm{~A} / 100 \\mu \\mathrm{~A}) \\times W_{REF}=5 W_{REF}=25 \\mu \\mathrm{~m}$.\n\nWhat is the transconductance of the initial reference transistor? From the plots in Fig. 11.10, we observe that as $V_{GS}-V_{TH}$ increases from 200 mV to 250 mV, $I_{D}$ changes by about 100 µA. Thus, $g_{m} \\approx 100 \\mu \\mathrm{~A} / 50 \\mathrm{mV}=2 \\mathrm{mS}$. Since the change in overdrive is not significantly less than the initial 200 mV, we may seek a more precise value for $g_{m}$. To this end, we return to the reference transistor and, using simulations, plot its transconductance as a function of $V_{GS}-V_{TH}$ with $V_{DS}=200 \\mathrm{mV}$. For a square-law device, this plot would be a straight line, $g_{m}=\\mu_{n} C_{ox}\\left(W_{REF} / L_{\\min }\\right)\\left(V_{GS}-V_{TH}\\right)$, but with short-channel effects, $g_{m}$ eventually saturates. As shown in Fig. 11.11, the result predicts $g_{m}=1.5 \\mathrm{mS}$ for $V_{GS}-V_{TH}=200 \\mathrm{mV}$. Now, if both the width and the drain current are scaled up by a factor of 5, then $g_{m}$ also increases by the same factor (Example 11.2), reaching 7.5 mS. As indicated in Table 11.1, if this transconductance is insufficient, $W / L$ must be further increased.\n\nWith the $I_{D}$ and $g_{m}$ plots for the reference device, we can easily perform scaling to determine the width and transconductance of other transistors in the circuit. The key point here is that the $I_{D}$ and $g_{m}$ simulations are conducted only once (for a given channel length) but serve most of our design needs.\n\nFigure 11.11 shows the transconductance ($g_{m}$) versus overdrive voltage ($V_{GS}-V_{TH}$) for a specific transistor configuration. The x-axis represents the overdrive voltage, $V_{GS}-V_{TH}$, in volts (V), ranging from 0 to 0.6 V. The y-axis represents the transconductance, $g_{m}$, in millisiemens (mS), ranging from 0 to 6 mS.\n\nThe graph depicts a curve starting near the origin and rising steeply, indicating that as the overdrive voltage increases, the transconductance also increases. The curve initially has a steep slope, showing a rapid increase in transconductance for small increases in overdrive voltage. This behavior continues up to around 0.4 V, where the curve begins to level off, indicating a saturation region where further increases in overdrive voltage result in smaller increases in transconductance.\n\nKey features of the graph include:\n- A steep initial increase in $g_{m}$ as $V_{GS}-V_{TH}$ increases from 0 to about 0.3 V.\n- A transition region from about 0.3 V to 0.4 V where the rate of increase in $g_{m}$ begins to slow.\n- A saturation region beyond 0.4 V where $g_{m}$ approaches a maximum value of just over 5 mS.\n\nThis graph is significant for understanding how changes in overdrive voltage affect the transconductance of a transistor, which is crucial for designing circuits that require specific transconductance values.\n\nFigure 11.11 Dependence of $g_{m}$ on overdrive for $W / L=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ and $V_{DS}=200 \\mathrm{mV}$.\n\nCan we choose a higher overdrive voltage in Fig. 11.10? Suppose we select $V_{GS}-V_{TH}=250 \\mathrm{mV}$, obtaining $I_{D}=200 \\mu \\mathrm{~A}$ for the reference transistor and a transconductance of about 2.3 mS from Fig. 11.11. If scaled up to $12.5 \\mu \\mathrm{~m}$ to carry $500 \\mu \\mathrm{~A}$, the transistor exhibits a transconductance of $2.5 \\times 2.3 \\mathrm{mS}=5.75 \\mathrm{mS}$, a value less than that observed in the previous case (7.5 mS). This occurs because $g_{m}=2 I_{D} /\\left(V_{GS}-V_{TH}\\right)$ in saturation. To achieve a high transconductance, we typically choose $V_{GS}-V_{TH} \\approx V_{DS, \\min }$ even though it results in a wider transistor.\n\n#### Example 11.4\n\nThe circuit in Fig. 11.12 must be designed for a power budget of 1 mW and a peak-to-peak output voltage swing of 0.8 V. Assuming $L=40 \\mathrm{~nm}$ for $M_{1}$, compute its required width. Can the transistor provide a transconductance of $1 /(50 \\Omega)$?\n\nFigure 11.12 depicts a common-source NMOS amplifier with a drain resistor $R_{D}$. The NMOS transistor $M_{1}$ is used for amplification, and the circuit is powered by a 1V supply. The output voltage swing is between 0.2V and 1V.\n\nFigure 11.12 also shows a time-domain waveform illustrating the output voltage, $V_{out}$, of a transistor circuit over time. The waveform is a sinusoidal signal with a peak-to-peak voltage swing of 0.8 V, oscillating between 1 V and 0.2 V. The horizontal axis represents time, typically in seconds or a submultiple thereof, while the vertical axis represents the output voltage in volts.\n\nKey features of the graph include:\n- **Graph Type:** Time-domain waveform\n- **Function Type:** Sinusoidal signal\n- **Horizontal Axis:** Time (units not specified, but generally in seconds)\n- **Vertical Axis:** Voltage (in volts)\n- **Voltage Range:** 0.2 V to 1 V\n- **Peak Voltage:** 1 V\n- **Minimum Voltage:** 0.2 V\n- **Peak-to-Peak Voltage Swing:** 0.8 V\n- The waveform displays a sinusoidal behavior, indicating periodic oscillations in the output voltage.\n- The amplitude of the waveform is consistent, suggesting stable operation within the specified voltage range.\n- The waveform remains within the saturation region of the transistor, as indicated by the context, ensuring $M_{1}$ remains in saturation.\n\n#### Solution\n\nThe power budget, along with $V_{DD}=1 \\mathrm{~V}$, translates to a drain bias current of 1 mA. For the circuit to accommodate an output swing of 0.8 V, $M_{1}$ must remain in saturation as $V_{DS}$ falls to 0.2 V. Returning to the $I_{D}-V_{DS}$ characteristics of Fig. 11.10, we recall that $I_{D, REF} \\approx 100 \\mu \\mathrm{~A}$ for $V_{DS}=V_{GS}-V_{TH}=200 \\mathrm{mV}$. We must therefore scale $W_{REF}$ up by a factor of $1 \\mathrm{~mA} / 0.1 \\mathrm{~mA}$, obtaining $W / L=50 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$. The transconductance is also multiplied by this factor, reaching $15 \\mathrm{mS}=1 /(67 \\Omega)$. Note that these results are independent of the value of $R_{D}$.\n\nWe conclude that, if the transistor is designed merely to meet this example's $I_{D}$ and $V_{DS}$ specifications, it does not necessarily achieve a transconductance of $1 /(50 \\Omega)$.\n\nIn addition to $I_{D}$, $V_{GS}-V_{TH}$, and $g_{m}$, the output impedance of the transistors also becomes important in many analog circuits. As explained in Chapter 17, $r_{O}$ cannot be expressed as $1 /\\left(\\lambda I_{D}\\right)$ for short-channel devices. The value of $r_{O}$ can be estimated from the slope of the $I_{D}$ characteristics in Fig. 11.2, but for convenience and accuracy, we use simulations to plot $r_{O}$ for the reference transistor as a function of $I_{D}$ (Fig. 11.13).\n\nFigure 11.13 illustrates the output resistance, $r_{O}$, of a 5-$\\mu$m / 40-nm NMOS device as a function of the drain current, $I_{D}$. The graph is a two-dimensional plot with the x-axis labeled $I_{D}$ (mA) representing the drain current in milliamperes, ranging from 0 to 0.5 mA. The y-axis is labeled $r_{O}$ (k$\\Omega$), indicating the output resistance in kilo-ohms, ranging from 0 to 14 k$\\Omega$.\n\nThe graph shows a downward-sloping curve, indicating that as the drain current $I_{D}$ increases, the output resistance $r_{O}$ decreases. The curve starts at an output resistance of approximately 12 k$\\Omega$ when the drain current is near 0 mA and decreases to about 3 k$\\Omega$ as the drain current approaches 0.5 mA.\n\nThe graph has a smooth, continuous curve with no sharp transitions or discontinuities, suggesting a consistent relationship between the drain current and output resistance over the range of values plotted. The trend is characterized by a steep decrease in resistance at lower drain currents, gradually leveling off as the current increases.\n\nFigure 11.13 Output resistance of a $5-\\mu \\mathrm{m} / 40-\\mathrm{nm}$ NMOS device as a function of drain current.\n\n#### Example 11.5\n\nDetermine the output resistance of $M_{1}$ in Example 11.4.\n\n#### Solution\n\nThe reference transistor in Example 11.4 carries a current of $100 \\mu \\mathrm{~A}$, exhibiting an output resistance of $8 \\mathrm{k} \\Omega$. Since both the width and the drain current are scaled up by a factor of 10, the output resistance drops by the same factor, resulting in $800 \\Omega$."
},
{
    "text": "A typical scenario in analog design unfolds as follows. For a specific transistor within the circuit, we select a bias current (often based on a power budget) and a minimum $V_{D S}$ (determined by voltage headroom, i.e., constraints imposed by the supply voltage and required voltage swings). ${ }^{3}$ Our goal is to ascertain the dimensions and transconductance of the device, acknowledging that square-law equations are imprecise. While transistor models enable us to simulate the device and obtain these values, we seek a more systematic and less tedious approach. Our methodology involves three steps. Consider $I_{D}=0.5 \\mathrm{~mA}$ and $V_{D S, \\min }=200 \\mathrm{mV}$ as a case study.\n\nStep 1 Choose a \"reference\" transistor with a width $W_{R E F}$ and a length equal to the smallest allowable value, $L_{\\min }$ (e.g., $L_{\\min }=40 \\mathrm{~nm}$). Let's take $W_{R E F}=5 \\mu \\mathrm{~m}$ as an example.\n\nStep 2 Utilize actual device models and a circuit simulator to plot the $I_{D}-V_{D S}$ characteristics of the reference transistor for various $V_{G S}-V_{T H}$ values. In typical analog circuits, $V_{G S}-V_{T H}$ ranges from approximately 50 mV to 600 mV. Consequently, we can construct the characteristics with the overdrive voltage incremented in steps of 50 mV.\n\nimage_name:Figure 11.10\ndescription:Figure 11.10 depicts the relationship between the drain current ($I_D$) and the drain-source voltage ($V_{DS}$) for a reference transistor. The graph comprises $I_D$-$V_{DS}$ characteristics for different overdrive voltages, $V_{GS} - V_{TH}$, incremented in 50 mV steps, ranging from 50 mV to 350 mV.\n\n1. **Graph Type and Function:**\n- This is an $I_D$-$V_{DS}$ characteristics plot, commonly used in transistor analysis to illustrate how the drain current varies with the drain-source voltage for different gate-source overdrive voltages.\n\n2. **Axes Labels and Units:**\n- The x-axis represents $V_{DS}$ (drain-source voltage) in volts (V), ranging from 0 to 1 V.\n- The y-axis represents $I_D$ (drain current) in milliamperes (mA), ranging from 0 to 1.2 mA.\n- Both axes use a linear scale.\n\n3. **General Behavior and Trends:**\n- The curves exhibit typical transistor behavior, where the drain current increases with both $V_{DS}$ and $V_{GS} - V_{TH}$.\n- For lower $V_{DS}$ values, the curves show a linear increase in current, indicating operation in the ohmic region.\n- As $V_{DS}$ increases, the curves flatten, indicating the saturation region where the current stabilizes.\n\n4. **Key Features and Technical Details:**\n- Each curve corresponds to a specific $V_{GS} - V_{TH}$ value, starting from 50 mV and increasing in 50 mV steps up to 350 mV.\n- The saturation current rises with higher $V_{GS} - V_{TH}$ values.\n- A vertical line at $V_{DS} = 0.2$ V intersects the curves, marking a reference point, likely related to a specific operating condition.\n\n5. **Annotations and Specific Data Points:**\n- The vertical line at $V_{DS} = 0.2$ V intersects the curves around $I_D = 0.5$ mA, highlighting a specific operating point or condition of interest.\n\nFigure 11.10 Drain current for $V_{G S}-V_{T H}=50 \\mathrm{mV} \\cdots 350 \\mathrm{mV}$ in 50 mV increments for a reference device.\nincrementing in steps of $50 \\mathrm{mV} .^{4}$ Figure 11.10 illustrates the results for $W_{R E F} / L_{\\text {min }}=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$. (Here, $V_{G S}-V_{T H}$ ranges from 50 mV to 350 mV for clarity.)\n\nStep 3 Considering our example specifies $I_{D}=0.5 \\mathrm{~mA}$ and $V_{D S, \\min }=200 \\mathrm{mV}$, we draw a vertical line at $V_{D S}=200 \\mathrm{mV}$ (Fig. 11.10) and identify its intersection with the plots. Which plot should we select? If the device adhered to the square law, we would choose the plot for $V_{G S}-V_{T H}=V_{D S, \\text { min }}=200 \\mathrm{mV}$. However, the short-channel device remains in saturation even for $V_{G S}-V_{T H}=350 \\mathrm{mV}$ at $V_{D S}=200 \\mathrm{mV}$. The situation is more intricate, but let's proceed with $V_{G S}-V_{T H}=200 \\mathrm{mV}$ for now.\n\nStep 4 The preceding steps have yielded, for the reference transistor, one operating point that meets the $V_{D S}$ requirement. However, the drain current, $I_{D, R E F}$, may not be close to the required value, 0.5 mA in our example. What should we do? We must now scale the transistor's width and, consequently, its drain current. Since in Fig. 11.10, $I_{D, R E F} \\approx 100 \\mu \\mathrm{~A}$, we select a transistor width of $(500 \\mu \\mathrm{~A} / 100 \\mu \\mathrm{~A}) \\times W_{R E F}=5 W_{R E F}=25 \\mu \\mathrm{~m}$.\n\nWhat is the transconductance of the initial reference transistor? From the plots in Fig. 11.10, we observe that as $V_{G S}-V_{T H}$ increases from 200 mV to 250 mV, $I_{D}$ changes by about $100 \\mu \\mathrm{~A}$. Thus, $g_{m} \\approx 100 \\mu \\mathrm{~A} / 50 \\mathrm{mV}=2 \\mathrm{mS}$. Since the change in overdrive is not significantly less than the initial 200 mV, we may seek a more precise value for $g_{m}$. To this end, we return to the reference transistor and, using simulations, plot its transconductance as a function of $V_{G S}-V_{T H}$ with $V_{D S}=200 \\mathrm{mV}$. For a square-law device, this plot would be a straight line, $g_{m}=\\mu_{n} C_{o x}\\left(W_{R E F} / L_{\\text {min }}\\right)\\left(V_{G S}-V_{T H}\\right)$, but with short-channel effects, $g_{m}$ eventually saturates. As shown in Fig. 11.11, the result predicts $g_{m}=1.5 \\mathrm{mS}$ for $V_{G S}-V_{T H}=200 \\mathrm{mV}$. Now, if both the width and the drain current are scaled up by a factor of 5, then $g_{m}$ also increases by the same factor (Example 11.2), reaching 7.5 mS. As indicated in Table 11.1, if this transconductance is insufficient, $W / L$ must be further increased.\n\nWith the $I_{D}$ and $g_{m}$ plots for the reference device, we can easily perform scaling to determine the width and transconductance of other transistors in the circuit. The key point here is that the $I_{D}$ and $g_{m}$ simulations are conducted only once (for a given channel length) but serve most of our design needs.\n\nimage_name:Figure 11.11\ndescription:Figure 11.11 displays a graph of transconductance ($g_{m}$) versus overdrive voltage ($V_{GS} - V_{TH}$) for a specific transistor configuration. The x-axis represents the overdrive voltage, $V_{GS} - V_{TH}$, in volts (V), ranging from 0 to 0.6 V. The y-axis represents the transconductance, $g_{m}$, in millisiemens (mS), ranging from 0 to 6 mS.\n\nThe graph shows a curve that starts near the origin and rises steeply, indicating that as the overdrive voltage increases, the transconductance also increases. The curve begins with a steep slope, showing a rapid increase in transconductance for small increases in overdrive voltage. This trend continues up to around 0.4 V, where the curve starts to level off, indicating a saturation region where further increases in overdrive voltage result in smaller increases in transconductance.\n\nKey features of the graph include:\n- A steep initial increase in $g_{m}$ as $V_{GS} - V_{TH}$ increases from 0 to about 0.3 V.\n- A transition region from about 0.3 V to 0.4 V where the rate of increase in $g_{m}$ begins to slow.\n- A saturation region beyond 0.4 V where $g_{m}$ approaches a maximum value of just over 5 mS.\n\nThe graph is significant for understanding how changes in overdrive voltage affect the transconductance of a transistor, which is crucial for designing circuits that require specific transconductance values.\n\nFigure 11.11 Dependence of $g_{m}$ on overdrive for $W / L=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ and $V_{D S}=200 \\mathrm{mV}$.\nCan we choose a higher overdrive voltage in Fig. 11.10? Suppose we select $V_{G S}-V_{T H}=250 \\mathrm{mV}$, obtaining $I_{D}=200 \\mu \\mathrm{~A}$ for the reference transistor and a transconductance of about 2.3 mS from Fig. 11.11. If scaled up to $12.5 \\mu \\mathrm{~m}$ to carry $500 \\mu \\mathrm{~A}$, the transistor exhibits a transconductance of $2.5 \\times 2.3 \\mathrm{mS}=5.75 \\mathrm{mS}$, a value lower than that observed in the previous case $(7.5 \\mathrm{mS})$. This occurs because $g_{m}=2 I_{D} /\\left(V_{G S}-V_{T H}\\right)$ in saturation. To achieve a higher transconductance, we typically choose $V_{G S}-V_{T H} \\approx V_{D S, \\text { min }}$ even though it results in a wider transistor.\n\n#### Example 11.4\n\nThe circuit depicted in Fig. 11.12 must be designed to meet a power budget of 1 mW and a peak-to-peak output voltage swing of 0.8 V. Assuming $L=40 \\mathrm{~nm}$ for $M_{1}$, determine its required width. Can the transistor provide a transconductance of $1 /(50 \\Omega)$?\n\nimage_name:Figure 11.12\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: VDD, type: VoltageSource, value: 1V, ports: {Np: VDD, Nn: GND}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with a drain resistor RD. The NMOS transistor M1 is used for amplification, and the circuit is powered by a 1V supply. The output voltage swing is between 0.2V and 1V.\n\nimage_name:Figure 11.12\ndescription:This graph presents a time-domain waveform of the output voltage, \\( V_{out} \\), of a transistor circuit over time. The waveform is sinusoidal with a peak-to-peak voltage swing of 0.8 V, oscillating between 1 V and 0.2 V. The horizontal axis represents time, typically in seconds or a submultiple thereof, while the vertical axis represents the output voltage in volts.\n\nType of Graph and Function\n- **Graph Type:** Time-domain waveform\n- **Function Type:** Sinusoidal signal\n\nAxes Labels and Units\n- **Horizontal Axis:** Time (units not specified, but generally in seconds)\n- **Vertical Axis:** Voltage (in volts)\n- **Voltage Range:** 0.2 V to 1 V\n\nOverall Behavior and Trends\n- The waveform exhibits sinusoidal behavior, indicating periodic oscillations in the output voltage.\n- The amplitude of the waveform is consistent, suggesting stable operation within the specified voltage range.\n\nKey Features and Technical Details\n- **Peak Voltage:** 1 V\n- **Minimum Voltage:** 0.2 V\n- **Peak-to-Peak Voltage Swing:** 0.8 V\n- The waveform remains within the saturation region of the transistor, as indicated by the context, ensuring \\( M_1 \\) remains in saturation.\n\nAnnotations and Specific Data Points\n- The waveform is annotated with horizontal dashed lines at 1 V and 0.2 V, marking the peak and minimum voltage levels, respectively.\n\nThis graph is essential for analyzing the performance of the transistor \\( M_1 \\) in maintaining the required output voltage swing while staying within the power budget and saturation region.\n\n#### Solution\n\nThe power budget, combined with $V_{D D}=1 \\mathrm{~V}$, dictates a drain bias current of 1 mA. For the circuit to accommodate an output swing of $0.8 \\mathrm{~V}, M_{1}$ must remain in saturation as $V_{D S}$ drops to 0.2 V. We refer to the $I_{D}-V_{D S}$ characteristics of Fig. 11.10 and note that $I_{D, R E F} \\approx 100 \\mu \\mathrm{~A}$ for $V_{D S}=V_{G S}-V_{T H}=200 \\mathrm{mV}$. We must therefore scale $W_{R E F}$ up by a factor of $1 \\mathrm{~mA} / 0.1 \\mathrm{~mA}$, resulting in $W / L=50 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$. The transconductance also scales by this factor, reaching $15 \\mathrm{mS}=1 /(67 \\Omega)$. Note that these results are independent of the value of $R_{D}$.\n\nWe conclude that, if the transistor is designed solely to meet the $I_{D}$ and $V_{D S}$ specifications of this example, it does not necessarily achieve a transconductance of $1 /(50 \\Omega)$.\n\nIn addition to $I_{D}, V_{G S}-V_{T H}$, and $g_{m}$, the output impedance of the transistors also becomes important in many analog circuits. As explained in Chapter 17, $r_{O}$ cannot be expressed as $1 /\\left(\\lambda I_{D}\\right)$ for short-channel devices. The value of $r_{O}$ can be estimated from the slope of the $I_{D}$ characteristics in Fig. 11.2, but for convenience and accuracy, we use simulations to plot $r_{O}$ for the reference transistor as a function of $I_{D}$ (Fig. 11.13).\n\nimage_name:Figure 11.13\ndescription:Figure 11.13 illustrates the output resistance \\( r_O \\) of a 5-\\( \\mu \\)m / 40-nm NMOS device as a function of the drain current \\( I_D \\). The graph is a two-dimensional plot with the x-axis labeled \\( I_D \\) (mA) representing the drain current in milliamperes, ranging from 0 to 0.5 mA. The y-axis is labeled \\( r_O \\) (k\\( \\Omega \\)), indicating the output resistance in kilo-ohms, ranging from 0 to 14 k\\( \\Omega \\).\n\nThe graph shows a downward-sloping curve, indicating that as the drain current \\( I_D \\) increases, the output resistance \\( r_O \\) decreases. The curve starts at an output resistance of approximately 12 k\\( \\Omega \\) when the drain current is near 0 mA and decreases to about 3 k\\( \\Omega \\) as the drain current approaches 0.5 mA.\n\nThe graph has a smooth, continuous curve with no sharp transitions or discontinuities, suggesting a consistent relationship between the drain current and output resistance over the range of values plotted. The trend is characterized by a steep decrease in resistance at lower drain currents, gradually leveling off as the current increases.\n\nFigure 11.13 Output resistance of a $5-\\mu \\mathrm{m} / 40-\\mathrm{nm}$ NMOS device as a function of drain current.\n\n#### Example 11.5\n\nDetermine the output resistance of $M_{1}$ in Example 11.4.\n\n#### Solution\n\nThe reference transistor in Example 11.4 carries a current of $100 \\mu \\mathrm{~A}$, exhibiting an output resistance of $8 \\mathrm{k} \\Omega$. Since both the width and the drain current are scaled up by a factor of 10, the output resistance decreases by the same factor, resulting in $800 \\Omega$."
},
{
    "text": "A frequent scenario in analog design unfolds as follows. For a specific transistor within the circuit, we select a bias current (perhaps based on a power budget) and a minimum $V_{DS}$ (perhaps determined by the voltage headroom, i.e., constraints imposed by the supply voltage and required signal swings). ${ }^{3}$ Our goal is to ascertain the dimensions and transconductance of the device, acknowledging that square-law equations are imprecise. While transistor models allow us to simulate the device and obtain these values, we seek a more systematic and less labor-intensive approach. Our method involves three steps. Let's consider $I_{D}=0.5 \\mathrm{~mA}$ and $V_{DS, \\min }=200 \\mathrm{mV}$ as an example.\n\nStep 1 Choose a \"reference\" transistor with a width $W_{REF}$ and a length equal to the minimum permissible value, $L_{\\min}$ (e.g., $L_{\\min }=40 \\mathrm{~nm}$). For instance, let's pick $W_{REF}=5 \\mu \\mathrm{~m}$.\n\nStep 2 Utilize actual device models and a circuit simulator to plot the $I_{D}-V_{DS}$ characteristics of the reference transistor for various $V_{GS}-V_{TH}$ values. In typical analog circuits, $V_{GS}-V_{TH}$ ranges from about 50 mV to about 600 mV. We can thus construct the characteristics with the overdrive voltage incremented in steps of $50 \\mathrm{mV}$.^{4} Figure 11.10 illustrates the results for $W_{REF} / L_{\\min }=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$, with $V_{GS}-V_{TH}$ ranging from 50 mV to 350 mV for clarity.\n\nStep 3 Considering our example specifies $I_{D}=0.5 \\mathrm{~mA}$ and $V_{DS, \\min }=200 \\mathrm{mV}$, we draw a vertical line at $V_{DS}=200 \\mathrm{mV}$ (Fig. 11.10) and locate its intersection with the plots. Which plot should we choose? If the device followed the square law, we would select the plot for $V_{GS}-V_{TH}=V_{DS, \\min }=200 \\mathrm{mV}$. However, the short-channel device remains in saturation even for $V_{GS}-V_{TH}=350 \\mathrm{mV}$ at $V_{DS}=200 \\mathrm{mV}$. The situation is thus more intricate, but let's proceed with $V_{GS}-V_{TH}=200 \\mathrm{mV}$ for now.\n\nStep 4 The preceding steps have yielded, for the reference transistor, one operating point that meets the $V_{DS}$ requirement. The drain current, $I_{D, REF}$, however, may not be close to the desired value, 0.5 mA in our example. What should we do? We must now scale the transistor's width and thereby its drain current. Since in Fig. 11.10, $I_{D, REF} \\approx 100 \\mu \\mathrm{~A}$, we choose a transistor width of $(500 \\mu \\mathrm{~A} / 100 \\mu \\mathrm{~A}) \\times W_{REF}=5 W_{REF}=25 \\mu \\mathrm{~m}$.\n\nWhat is the transconductance of the initial reference transistor? From the plots in Fig. 11.10, we observe that as $V_{GS}-V_{TH}$ increases from 200 mV to 250 mV, $I_{D}$ changes by about $100 \\mu \\mathrm{~A}$. Thus, $g_{m} \\approx 100 \\mu \\mathrm{~A} / 50 \\mathrm{mV}=2 \\mathrm{mS}$. Since the change in overdrive is not significantly less than the initial 200 mV, we may seek a more precise value for $g_{m}$. To this end, let's revisit the reference transistor and, using simulations, plot its transconductance as a function of $V_{GS}-V_{TH}$ with $V_{DS}=200 \\mathrm{mV}$. For a square-law device, this plot would be a straight line, $g_{m}=\\mu_{n} C_{ox}\\left(W_{REF} / L_{\\min }\\right)\\left(V_{GS}-V_{TH}\\right)$, but with short-channel effects, $g_{m}$ eventually saturates. As shown in Fig. 11.11, the result predicts $g_{m}=1.5 \\mathrm{mS}$ for $V_{GS}-V_{TH}=200 \\mathrm{mV}$. Now, if both the width and the drain current are scaled up by a factor of 5, then $g_{m}$ also increases by the same factor (Example 11.2), reaching 7.5 mS. As indicated in Table 11.1, if this transconductance is insufficient, $W / L$ must be further increased.\n\nWith the $I_{D}$ and $g_{m}$ plots for the reference device, we can easily perform scaling to determine the width and transconductance of other transistors in the circuit. The key point is that the $I_{D}$ and $g_{m}$ simulations are conducted only once (for a given channel length) but serve most of our design needs.\n\nFigure 11.11 plots transconductance ($g_{m}$) versus overdrive voltage ($V_{GS}-V_{TH}$) for a specific transistor configuration. The x-axis represents the overdrive voltage, $V_{GS}-V_{TH}$, in volts (V), ranging from 0 to 0.6 V. The y-axis represents the transconductance, $g_{m}$, in millisiemens (mS), ranging from 0 to 6 mS.\n\nThe graph shows a curve starting near the origin and rising steeply, indicating that as the overdrive voltage increases, the transconductance also increases. The curve initially has a steep slope, showing a rapid increase in transconductance for small increases in overdrive voltage. This continues up to around 0.4 V, where the curve begins to level off, indicating a saturation region where further increases in overdrive voltage result in smaller increases in transconductance.\n\nKey features include:\n- A steep initial increase in $g_{m}$ as $V_{GS}-V_{TH}$ increases from 0 to about 0.3 V.\n- A transition region from about 0.3 V to 0.4 V where the rate of increase in $g_{m}$ slows.\n- A saturation region beyond 0.4 V where $g_{m}$ approaches a maximum value of just over 5 mS.\n\nThis graph is significant for understanding how changes in overdrive voltage affect the transconductance of a transistor, crucial for designing circuits requiring specific transconductance values.\n\nFigure 11.11 shows the dependence of $g_{m}$ on overdrive for $W / L=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ and $V_{DS}=200 \\mathrm{mV}$. Can we choose a higher overdrive voltage in Fig. 11.10? Suppose we select $V_{GS}-V_{TH}=250 \\mathrm{mV}$, obtaining $I_{D}=200 \\mu \\mathrm{~A}$ for the reference transistor and a transconductance of about 2.3 mS from Fig. 11.11. If scaled up to $12.5 \\mu \\mathrm{~m}$ to carry $500 \\mu \\mathrm{~A}$, the transistor exhibits a transconductance of $2.5 \\times 2.3 \\mathrm{mS}=5.75 \\mathrm{mS}$, a value less than the previous case $(7.5 \\mathrm{mS})$. This occurs because $g_{m}=2 I_{D} /\\left(V_{GS}-V_{TH}\\right)$ in saturation. To achieve high transconductance, we typically choose $V_{GS}-V_{TH} \\approx V_{DS, \\min }$ even though it results in a wider transistor.\n\n#### Example 11.4\n\nThe circuit in Fig. 11.12 must be designed for a power budget of 1 mW and a peak-to-peak output voltage swing of 0.8 V. Assuming $L=40 \\mathrm{~nm}$ for $M_{1}$, compute its required width. Can the transistor provide a transconductance of $1 /(50 \\Omega)$?\n\nFigure 11.12 depicts a common-source NMOS amplifier with a drain resistor $R_{D}$. The NMOS transistor $M_{1}$ is used for amplification, and the circuit is powered by a 1V supply. The output voltage swing is between 0.2V and 1V.\n\nThe graph in Fig. 11.12 is a time-domain waveform of the output voltage, $V_{out}$, of a transistor circuit over time. The waveform is a sinusoidal signal with a peak-to-peak voltage swing of 0.8 V, oscillating between 1 V and 0.2 V. The horizontal axis represents time, typically in seconds or a submultiple thereof, while the vertical axis represents the output voltage in volts.\n\nKey features include:\n- **Graph Type:** Time-domain waveform\n- **Function Type:** Sinusoidal signal\n- **Horizontal Axis:** Time (units not specified, but generally in seconds)\n- **Vertical Axis:** Voltage (in volts)\n- **Voltage Range:** 0.2 V to 1 V\n- The waveform displays sinusoidal behavior, indicating periodic oscillations in the output voltage.\n- The amplitude is consistent, suggesting stable operation within the specified voltage range.\n- **Peak Voltage:** 1 V\n- **Minimum Voltage:** 0.2 V\n- **Peak-to-Peak Voltage Swing:** 0.8 V\n- The waveform remains within the saturation region of the transistor, as indicated by the context, ensuring $M_{1}$ remains in saturation.\n\n#### Solution\n\nThe power budget along with $V_{DD}=1 \\mathrm{~V}$ translates to a drain bias current of 1 mA. For the circuit to accommodate an output swing of $0.8 \\mathrm{~V}$, $M_{1}$ must remain in saturation as $V_{DS}$ falls to 0.2 V. Returning to the $I_{D}-V_{DS}$ characteristics of Fig. 11.10, we recall that $I_{D, REF} \\approx 100 \\mu \\mathrm{~A}$ for $V_{DS}=V_{GS}-V_{TH}=200 \\mathrm{mV}$. We must therefore scale $W_{REF}$ up by a factor of $1 \\mathrm{~mA} / 0.1 \\mathrm{~mA}$, obtaining $W / L=50 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$. The transconductance also scales by this factor, reaching $15 \\mathrm{mS}=1 /(67 \\Omega)$. Note that these results are independent of $R_{D}$.\n\nWe conclude that, if the transistor is designed simply to meet this example's $I_{D}$ and $V_{DS}$ specifications, it does not necessarily achieve a transconductance of $1 /(50 \\Omega)$.\n\nIn addition to $I_{D}$, $V_{GS}-V_{TH}$, and $g_{m}$, the output impedance of the transistors also becomes important in many analog circuits. As explained in Chapter 17, $r_{O}$ cannot be expressed as $1 /\\left(\\lambda I_{D}\\right)$ for short-channel devices. The value of $r_{O}$ can be estimated from the slope of the $I_{D}$ characteristics in Fig. 11.2, but for convenience and accuracy, we use simulations to plot $r_{O}$ for the reference transistor as a function of $I_{D}$ (Fig. 11.13).\n\nFigure 11.13 illustrates the output resistance, $r_{O}$, of a 5-$\\mu$m / 40-nm NMOS device as a function of the drain current, $I_{D}$. The x-axis represents the drain current in milliamperes (mA), ranging from 0 to 0.5 mA, while the y-axis represents the output resistance in kilo-ohms (k$\\Omega$), ranging from 0 to 14 k$\\Omega$.\n\nThe graph shows a downward-sloping curve, indicating that as the drain current increases, the output resistance decreases. The curve starts at approximately 12 k$\\Omega$ when the drain current is near 0 mA and decreases to about 3 k$\\Omega$ as the drain current approaches 0.5 mA.\n\nThe curve is smooth and continuous, suggesting a consistent relationship between the drain current and output resistance over the plotted range. The trend shows a steep decrease in resistance at lower drain currents, gradually leveling off as the current increases.\n\n#### Example 11.5\n\nDetermine the output resistance of $M_{1}$ in Example 11.4.\n\n#### Solution\n\nIn Example 11.4, the reference transistor carries a current of $100 \\mu \\mathrm{~A}$, exhibiting an output resistance of $8 \\mathrm{k} \\Omega$. Since both the width and the drain current are scaled up by a factor of 10, the output resistance drops by the same factor, resulting in $800 \\Omega$."
},
{
    "text": "A typical scenario in analog design unfolds as follows. For a specific transistor within the circuit, we select a bias current (often based on a power budget) and a minimum $V_{DS}$ (usually determined by voltage headroom constraints, i.e., limitations imposed by the supply voltage and required signal swings). ${ }^{3}$ Our goal is then to determine the dimensions and transconductance of this device, acknowledging that square-law equations are imprecise. While we can use available transistor models and simulations to obtain these values, we aim for a more systematic and less labor-intensive approach. Our method involves three steps. Consider $I_{D}=0.5 \\mathrm{~mA}$ and $V_{DS, \\min }=200 \\mathrm{mV}$ as an illustrative example.\n\nStep 1: Choose a \"reference\" transistor with a width $W_{REF}$ and a length equal to the smallest allowable value, $L_{\\min}$ (e.g., $L_{\\min }=40 \\mathrm{~nm}$). Let's take $W_{REF}=5 \\mu \\mathrm{~m}$ as an example.\n\nStep 2: Utilize actual device models and a circuit simulator to plot the $I_{D}-V_{DS}$ characteristics of the reference transistor for various $V_{GS}-V_{TH}$ values. In typical analog circuits, $V_{GS}-V_{TH}$ ranges from approximately 50 mV to 600 mV. We can thus construct the characteristics with the overdrive voltage.\n\nimage_name:Figure 11.10\ndescription:Figure 11.10 depicts the drain current ($I_D$) versus the drain-source voltage ($V_{DS}$) for a reference transistor. The graph presents a series of $I_D$-$V_{DS}$ characteristics for different overdrive voltages, $V_{GS} - V_{TH}$, incremented in 50 mV steps, ranging from 50 mV to 350 mV.\n\n1. **Graph Type and Function:**\n- This is an $I_D$-$V_{DS}$ characteristics plot, commonly used in transistor analysis to illustrate how the drain current varies with the drain-source voltage for different gate-source overdrive voltages.\n\n2. **Axes Labels and Units:**\n- The x-axis represents $V_{DS}$ (drain-source voltage) in volts (V), ranging from 0 to 1 V.\n- The y-axis represents $I_D$ (drain current) in milliamperes (mA), ranging from 0 to 1.2 mA.\n- Both axes use a linear scale.\n\n3. **Overall Behavior and Trends:**\n- The curves exhibit typical transistor behavior, with the drain current increasing as $V_{DS}$ and $V_{GS} - V_{TH}$ increase.\n- For lower $V_{DS}$ values, the curves show a linear increase in current, indicating operation in the ohmic region.\n- As $V_{DS}$ increases, the curves flatten, indicating the saturation region where the current becomes relatively constant.\n\n4. **Key Features and Technical Details:**\n- Each curve corresponds to a specific $V_{GS} - V_{TH}$ value, starting from 50 mV and increasing in 50 mV steps up to 350 mV.\n- The saturation current increases with higher $V_{GS} - V_{TH}$ values.\n- A vertical line at $V_{DS} = 0.2$ V intersects the curves, indicating a reference point, possibly related to a specific operating condition.\n\n5. **Annotations and Specific Data Points:**\n- The vertical line at $V_{DS} = 0.2$ V intersects the curves around $I_D = 0.5$ mA, highlighting a specific operating point or condition of interest.\n\nFigure 11.10 Drain current for $V_{GS}-V_{TH}=50 \\mathrm{mV} \\cdots 350 \\mathrm{mV}$ in 50 mV increments for a reference device.\nincrementing in 50 mV steps.^{4} Figure 11.10 shows the results for $W_{REF} / L_{\\min }=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$. (Here, $V_{GS}-V_{TH}$ ranges from 50 mV to 350 mV for clarity.)\n\nStep 3: Considering our example specifies $I_{D}=0.5 \\mathrm{~mA}$ and $V_{DS, \\min }=200 \\mathrm{mV}$, we draw a vertical line at $V_{DS}=200 \\mathrm{mV}$ (Fig. 11.10) and find its intersection with the plots. Which plot should we select? If the device followed the square law, we would choose the plot for $V_{GS}-V_{TH}=V_{DS, \\text { min }}=200 \\mathrm{mV}$. However, the short-channel device remains in saturation even for $V_{GS}-V_{TH}=350 \\mathrm{mV}$ at $V_{DS}=200 \\mathrm{mV}$. The situation is thus more complex, but let's proceed with $V_{GS}-V_{TH}=200 \\mathrm{mV}$ for now.\n\nStep 4: The previous steps have yielded, for the reference transistor, one operating point that meets the $V_{DS}$ requirement. The drain current, $I_{D, REF}$, however, may not be close to the desired value, 0.5 mA in our example. What should we do? We must now scale the width of the transistor and hence its drain current. Since in Fig. 11.10, $I_{D, REF} \\approx 100 \\mu \\mathrm{~A}$, we choose a transistor width of $(500 \\mu \\mathrm{~A} / 100 \\mu \\mathrm{~A}) \\times W_{REF}=5 W_{REF}=25 \\mu \\mathrm{~m}$.\n\nWhat is the transconductance of the initial reference transistor? From the plots in Fig. 11.10, we observe that as $V_{GS}-V_{TH}$ increases from 200 mV to 250 mV, $I_{D}$ changes by about 100 µA. Thus, $g_{m} \\approx 100 \\mu \\mathrm{~A} / 50 \\mathrm{mV}=2 \\mathrm{mS}$. Since the change in overdrive is not significantly less than the initial 200 mV, we may seek a more precise value for $g_{m}$. To this end, let's return to the reference transistor and, using simulations, plot its transconductance as a function of $V_{GS}-V_{TH}$ with $V_{DS}=200 \\mathrm{mV}$. For a square-law device, this plot would be a straight line, $g_{m}=\\mu_{n} C_{ox}\\left(W_{REF} / L_{\\min }\\right)\\left(V_{GS}-V_{TH}\\right)$, but with short-channel effects, $g_{m}$ eventually saturates. As shown in Fig. 11.11, the result predicts $g_{m}=1.5 \\mathrm{mS}$ for $V_{GS}-V_{TH}=200 \\mathrm{mV}$. Now, if both the width and the drain current are scaled up by a factor of 5, then $g_{m}$ also increases by the same factor (Example 11.2), reaching 7.5 mS. As indicated in Table 11.1, if this transconductance is insufficient, $W / L$ must be further increased.\n\nWith the $I_{D}$ and $g_{m}$ plots for the reference device, we can easily perform scaling to determine the width and transconductance of other transistors in the circuit. The key point here is that the $I_{D}$ and $g_{m}$ simulations are done only once (for a given channel length) but serve most of our design needs.\n\nimage_name:Figure 11.11\ndescription:The graph in Figure 11.11 plots transconductance ($g_{m}$) against overdrive voltage ($V_{GS} - V_{TH}$) for a specific transistor configuration. The x-axis represents the overdrive voltage, $V_{GS} - V_{TH}$, in volts (V), ranging from 0 to 0.6 V. The y-axis represents the transconductance, $g_{m}$, in millisiemens (mS), ranging from 0 to 6 mS.\n\nThe graph shows a curve starting near the origin and rising steeply, indicating that as the overdrive voltage increases, the transconductance also increases. The curve initially has a steep slope, showing a rapid increase in transconductance for small increases in overdrive voltage. This behavior continues up to around 0.4 V, where the curve begins to level off, indicating a saturation region where further increases in overdrive voltage result in smaller increases in transconductance.\n\nKey features of the graph include:\n- A steep initial increase in $g_{m}$ as $V_{GS} - V_{TH}$ increases from 0 to about 0.3 V.\n- A transition region from about 0.3 V to 0.4 V where the rate of increase in $g_{m}$ slows down.\n- A saturation region beyond 0.4 V where $g_{m}$ approaches a maximum value of just over 5 mS.\n\nThe graph is significant for understanding how changes in overdrive voltage affect the transconductance of a transistor, which is crucial for designing circuits requiring specific transconductance values.\n\nFigure 11.11 Dependence of $g_{m}$ on overdrive for $W / L=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ and $V_{DS}=200 \\mathrm{mV}$.\nCan we choose a higher overdrive voltage in Fig. 11.10? Suppose we select $V_{GS}-V_{TH}=250 \\mathrm{mV}$, obtaining $I_{D}=200 \\mu \\mathrm{~A}$ for the reference transistor and a transconductance of about 2.3 mS from Fig. 11.11. If scaled up to $12.5 \\mu \\mathrm{~m}$ to carry $500 \\mu \\mathrm{~A}$, the transistor exhibits a transconductance of $2.5 \\times 2.3 \\mathrm{mS}=5.75 \\mathrm{mS}$, a value lower than that observed in the previous case (7.5 mS). This occurs because $g_{m}=2 I_{D} /\\left(V_{GS}-V_{TH}\\right)$ in saturation. To achieve a higher transconductance, we typically choose $V_{GS}-V_{TH} \\approx V_{DS, \\text { min }}$ even though it results in a wider transistor.\n\n#### Example 11.4\n\nThe circuit shown in Fig. 11.12 must be designed for a power budget of 1 mW and a peak-to-peak output voltage swing of 0.8 V. Assuming $L=40 \\mathrm{~nm}$ for $M_{1}$, compute its required width. Can the transistor provide a transconductance of $1 /(50 \\Omega)$?\nimage_name:Figure 11.12\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: VDD, type: VoltageSource, value: 1V, ports: {Np: VDD, Nn: GND}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with a drain resistor RD. The NMOS transistor M1 is used for amplification, and the circuit is powered by a 1V supply. The output voltage swing is between 0.2V and 1V.\nimage_name:Figure 11.12\ndescription:The graph illustrates the output voltage, \\( V_{out} \\), of a transistor circuit over time, depicting a sinusoidal signal with a peak-to-peak voltage swing of 0.8 V, oscillating between 1 V and 0.2 V. The horizontal axis represents time, typically in seconds or a submultiple thereof, while the vertical axis represents the output voltage in volts.\n\nType of Graph and Function\n- **Graph Type:** Time-domain waveform\n- **Function Type:** Sinusoidal signal\n\nAxes Labels and Units\n- **Horizontal Axis:** Time (units not specified, but generally in seconds)\n- **Vertical Axis:** Voltage (in volts)\n- **Voltage Range:** 0.2 V to 1 V\n\nOverall Behavior and Trends\n- The waveform displays sinusoidal behavior, indicating periodic oscillations in the output voltage.\n- The amplitude of the waveform is consistent, suggesting stable operation within the specified voltage range.\n\nKey Features and Technical Details\n- **Peak Voltage:** 1 V\n- **Minimum Voltage:** 0.2 V\n- **Peak-to-Peak Voltage Swing:** 0.8 V\n- The waveform remains within the saturation region of the transistor, as indicated by the context, ensuring \\( M_1 \\) remains in saturation.\n\nAnnotations and Specific Data Points\n- The waveform is annotated with horizontal dashed lines at 1 V and 0.2 V, marking the peak and minimum voltage levels, respectively.\n\nThis graph is crucial for analyzing the performance of the transistor \\( M_1 \\) in maintaining the required output voltage swing while staying within the power budget and saturation region.\n\n#### Solution\n\nThe power budget, combined with $V_{DD}=1 \\mathrm{~V}$, translates to a drain bias current of 1 mA. For the circuit to accommodate an output swing of $0.8 \\mathrm{~V}$, $M_{1}$ must remain in saturation as $V_{DS}$ drops to 0.2 V. We refer to the $I_{D}-V_{DS}$ characteristics of Fig. 11.10 and note that $I_{D, REF} \\approx 100 \\mu \\mathrm{~A}$ for $V_{DS}=V_{GS}-V_{TH}=200 \\mathrm{mV}$. We must therefore scale $W_{REF}$ up by a factor of $1 \\mathrm{~mA} / 0.1 \\mathrm{~mA}$, obtaining $W / L=50 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$. The transconductance is also multiplied by this factor, reaching $15 \\mathrm{mS}=1 /(67 \\Omega)$. Note that these results are independent of the value of $R_{D}$.\n\nWe conclude that, if the transistor is designed merely to meet this example's $I_{D}$ and $V_{DS}$ specifications, it does not necessarily achieve a transconductance of $1 /(50 \\Omega)$.\n\nIn addition to $I_{D}, V_{GS}-V_{TH}$, and $g_{m}$, the output impedance of the transistors also becomes important in many analog circuits. As explained in Chapter 17, $r_{O}$ cannot be expressed as $1 /\\left(\\lambda I_{D}\\right)$ for short-channel devices. The value of $r_{O}$ can be estimated from the slope of the $I_{D}$ characteristics in Fig. 11.2, but for convenience and accuracy, we use simulations to plot $r_{O}$ for the reference transistor as a function of $I_{D}$ (Fig. 11.13).\nimage_name:Figure 11.13\ndescription:Figure 11.13 is a graph showing the output resistance \\( r_O \\) of a 5-\\( \\mu \\)m / 40-nm NMOS device as a function of the drain current \\( I_D \\). The x-axis represents the drain current in milliamperes (mA), ranging from 0 to 0.5 mA. The y-axis represents the output resistance in kilo-ohms (k\\( \\Omega \\)), ranging from 0 to 14 k\\( \\Omega \\).\n\nThe graph shows a downward-sloping curve, indicating that as the drain current \\( I_D \\) increases, the output resistance \\( r_O \\) decreases. The curve starts at an output resistance of approximately 12 k\\( \\Omega \\) when the drain current is near 0 mA and decreases to about 3 k\\( \\Omega \\) as the drain current approaches 0.5 mA.\n\nThe graph has a smooth, continuous curve with no sharp transitions or discontinuities, suggesting a consistent relationship between the drain current and output resistance over the range of values plotted. The trend is characterized by a steep decrease in resistance at lower drain currents, gradually leveling off as the current increases.\n\nFigure 11.13 Output resistance of a $5-\\mu \\mathrm{m} / 40-\\mathrm{nm}$ NMOS device as a function of drain current.\n\n#### Example 11.5\n\nDetermine the output resistance of $M_{1}$ in Example 11.4.\n\n#### Solution\n\nThe reference transistor in Example 11.4 carries a current of $100 \\mu \\mathrm{~A}$, exhibiting an output resistance of $8 \\mathrm{k} \\Omega$. Since both the width and the drain current are scaled up by a factor of 10, the output resistance drops by the same factor, resulting in $800 \\Omega$."
},
{
    "text": "A frequent scenario in analog design unfolds as follows. For a specific transistor within the circuit, we've selected a bias current ( possibly based on a power budget) and a minimum $V_{D S}$ ( perhaps determined by the voltage headroom, i.e., the constraints imposed by the supply voltage and required voltage swings). ${ }^{3}$ Our goal is to ascertain the dimensions and transconductance of the device, acknowledging that the square-law equations are imprecise. While we can simulate the device using available transistor models to obtain these values, we aim for a more systematic and less tedious approach. Our method involves three steps. Let's consider $I_{D}=0.5 \\mathrm{~mA}$ and $V_{D S, \\min }=200 \\mathrm{mV}$ as an example.\n\nStep 1 Choose a \"reference\" transistor with a width $W_{R E F}$ and a length equal to the minimum allowable value, $L_{\\min }$ (e.g., $L_{\\min }=40 \\mathrm{~nm}$). For instance, let's select $W_{R E F}=5 \\mu \\mathrm{~m}$.\n\nStep 2 Utilize the actual device models and a circuit simulator to plot the $I_{D}-V_{D S}$ characteristics of the reference transistor for various $V_{G S}-V_{T H}$ values. In typical analog circuits, $V_{G S}-V_{T H}$ ranges from approximately 50 mV to 600 mV. We can thus construct the characteristics with the overdrive voltage incremented in steps of $50 \\mathrm{mV}$.^{4} Figure 11.10 illustrates the results for $W_{R E F} / L_{\\min }=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$, with $V_{G S}-V_{T H}$ ranging from 50 mV to 350 mV for clarity.\n\nStep 3 Considering our example specifies $I_{D}=0.5 \\mathrm{~mA}$ and $V_{D S, \\min }=200 \\mathrm{mV}$, we draw a vertical line at $V_{D S}=200 \\mathrm{mV}$ (Fig. 11.10) and locate its intersection with the plots. Which plot should we choose? If the device followed the square law, we would select the plot for $V_{G S}-V_{T H}=V_{D S, \\text { min }}=200 \\mathrm{mV}$. However, the short-channel device remains in saturation even for $V_{G S}-V_{T H}=350 \\mathrm{mV}$ at $V_{D S}=200 \\mathrm{mV}$. The situation is thus more complex, but let's proceed with $V_{G S}-V_{T H}=200 \\mathrm{mV}$ for now.\n\nStep 4 The previous steps have provided, for the reference transistor, one operating point that meets the $V_{D S}$ requirement. The drain current, $I_{D, R E F}$, however, might not be close to the required value, 0.5 mA in our example. What should we do? We must now scale the transistor's width and, consequently, its drain current. Since in Fig. 11.10, $I_{D, R E F} \\approx 100 \\mu \\mathrm{~A}$, we choose a transistor width of $(500 \\mu \\mathrm{~A} / 100 \\mu \\mathrm{~A}) \\times W_{R E F}=5 W_{R E F}=25 \\mu \\mathrm{~m}$.\n\nWhat is the transconductance of the initial reference transistor? From the plots in Fig. 11.10, we observe that as $V_{G S}-V_{T H}$ increases from 200 mV to 250 mV, $I_{D}$ changes by about 100 µA. Thus, $g_{m} \\approx 100 \\mu \\mathrm{~A} / 50 \\mathrm{mV}=2 \\mathrm{mS}$. Since the change in overdrive is not significantly less than the initial 200 mV, we may seek a more precise value for $g_{m}$. To this end, let's revisit the reference transistor and, using simulations, plot its transconductance as a function of $V_{G S}-V_{T H}$ with $V_{D S}=200 \\mathrm{mV}$. For a square-law device, this plot would be a straight line, $g_{m}=\\mu_{n} C_{o x}\\left(W_{R E F} / L_{\\min }\\right)\\left(V_{G S}-V_{T H}\\right)$, but with short-channel effects, $g_{m}$ eventually saturates. As shown in Fig. 11.11, the result predicts $g_{m}=1.5 \\mathrm{mS}$ for $V_{G S}-V_{T H}=200 \\mathrm{mV}$. Now, if both the width and the drain current are scaled up by a factor of 5, then $g_{m}$ also increases by the same factor (Example 11.2), reaching 7.5 mS. As indicated in Table 11.1, if this transconductance is inadequate, $W / L$ must be further increased.\n\nWith the $I_{D}$ and $g_{m}$ plots obtained for the reference device, we can easily perform scaling to determine the width and transconductance of other transistors in the circuit. The key point here is that the $I_{D}$ and $g_{m}$ simulations are conducted only once (for a given channel length) but serve most of our design needs.\n\nFigure 11.11 shows the transconductance ($g_{m}$) versus overdrive voltage ($V_{GS} - V_{TH}$) for a specific transistor configuration. The x-axis represents the overdrive voltage, $V_{GS} - V_{TH}$, in volts (V), ranging from 0 to 0.6 V. The y-axis represents the transconductance, $g_{m}$, in millisiemens (mS), ranging from 0 to 6 mS.\n\nThe graph displays a curve starting near the origin and rising steeply, indicating that as the overdrive voltage increases, the transconductance also increases. The curve initially has a steep slope, showing a rapid increase in transconductance for small increases in overdrive voltage. This trend continues up to around 0.4 V, where the curve begins to level off, indicating a saturation region where further increases in overdrive voltage result in smaller increases in transconductance.\n\nKey features of the graph include:\n- A steep initial increase in $g_{m}$ as $V_{GS} - V_{TH}$ increases from 0 to about 0.3 V.\n- A transition region from about 0.3 V to 0.4 V where the rate of increase in $g_{m}$ begins to slow.\n- A saturation region beyond 0.4 V where $g_{m}$ approaches a maximum value of just over 5 mS.\n\nThis graph is essential for understanding how changes in overdrive voltage affect the transconductance of a transistor, which is critical for designing circuits requiring specific transconductance values.\n\nFigure 11.11 Dependence of $g_{m}$ on overdrive for $W / L=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ and $V_{D S}=200 \\mathrm{mV}$.\nCan we choose a higher overdrive voltage in Fig. 11.10? Suppose we select $V_{G S}-V_{T H}=250 \\mathrm{mV}$, obtaining $I_{D}=200 \\mu \\mathrm{~A}$ for the reference transistor and a transconductance of about 2.3 mS from Fig. 11.11. If scaled up to $12.5 \\mu \\mathrm{~m}$ to carry $500 \\mu \\mathrm{~A}$, the transistor exhibits a transconductance of $2.5 \\times 2.3 \\mathrm{mS}=5.75 \\mathrm{mS}$, a value lower than that observed in the previous case (7.5 mS). This occurs because $g_{m}=2 I_{D} /\\left(V_{G S}-V_{T H}\\right)$ in saturation. To achieve a high transconductance, we typically choose $V_{G S}-V_{T H} \\approx V_{D S, \\text { min }}$ even though it results in a wider transistor.\n\n#### Example 11.4\n\nThe circuit in Fig. 11.12 must be designed for a power budget of 1 mW and a peak-to-peak output voltage swing of 0.8 V. Assuming $L=40 \\mathrm{~nm}$ for $M_{1}$, calculate its required width. Can the transistor provide a transconductance of $1 /(50 \\Omega)$?\n\nFigure 11.12 depicts a common-source NMOS amplifier with a drain resistor RD. The NMOS transistor M1 is used for amplification, and the circuit is powered by a 1V supply. The output voltage swing is between 0.2V and 1V.\n\nThe graph in Figure 11.12 is a time-domain waveform showing the output voltage, $V_{out}$, of a transistor circuit over time. The waveform is a sinusoidal signal with a peak-to-peak voltage swing of 0.8 V, oscillating between 1 V and 0.2 V. The horizontal axis represents time, typically in seconds or a submultiple thereof, while the vertical axis represents the output voltage in volts.\n\nKey aspects of the graph include:\n- **Graph Type:** Time-domain waveform\n- **Function Type:** Sinusoidal signal\n\nAxes Labels and Units\n- **Horizontal Axis:** Time (units not specified, but generally in seconds)\n- **Vertical Axis:** Voltage (in volts)\n- **Voltage Range:** 0.2 V to 1 V\n\nOverall Behavior and Trends\n- The waveform exhibits sinusoidal behavior, indicating periodic oscillations in the output voltage.\n- The amplitude of the waveform is consistent, suggesting stable operation within the specified voltage range.\n\nKey Features and Technical Details\n- **Peak Voltage:** 1 V\n- **Minimum Voltage:** 0.2 V\n- **Peak-to-Peak Voltage Swing:** 0.8 V\n- The waveform remains within the saturation region of the transistor, as indicated by the context, ensuring $M_1$ remains in saturation.\n\nAnnotations and Specific Data Points\n- The waveform is annotated with horizontal dashed lines at 1 V and 0.2 V, marking the peak and minimum voltage levels, respectively.\n\nThis graph is crucial for analyzing the performance of the transistor $M_1$ in maintaining the required output voltage swing while staying within the power budget and saturation region.\n\n#### Solution\n\nThe power budget, along with $V_{D D}=1 \\mathrm{~V}$, translates to a drain bias current of 1 mA. For the circuit to accommodate an output swing of 0.8 V, $M_{1}$ must remain in saturation as $V_{D S}$ drops to 0.2 V. We refer to the $I_{D}-V_{D S}$ characteristics of Fig. 11.10 and note that $I_{D, R E F} \\approx 100 \\mu \\mathrm{~A}$ for $V_{D S}=V_{G S}-V_{T H}=200 \\mathrm{mV}$. We must therefore scale $W_{R E F}$ up by a factor of $1 \\mathrm{~mA} / 0.1 \\mathrm{~mA}$, obtaining $W / L=50 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$. The transconductance is also multiplied by this factor, reaching $15 \\mathrm{mS}=1 /(67 \\Omega)$. Note that these results are independent of the value of $R_{D}$.\n\nWe conclude that, if the transistor is designed solely to meet this example's $I_{D}$ and $V_{D S}$ specifications, it does not necessarily achieve a transconductance of $1 /(50 \\Omega)$.\n\nIn addition to $I_{D}$, $V_{G S}-V_{T H}$, and $g_{m}$, the output impedance of the transistors also becomes important in many analog circuits. As explained in Chapter 17, $r_{O}$ cannot be expressed as $1 /\\left(\\lambda I_{D}\\right)$ for short-channel devices. The value of $r_{O}$ can be estimated from the slope of the $I_{D}$ characteristics in Fig. 11.2, but for convenience and accuracy, we use simulations to plot $r_{O}$ for the reference transistor as a function of $I_{D}$ (Fig. 11.13).\n\nFigure 11.13 illustrates the output resistance, $r_O$, of a 5-$\\mu$m / 40-nm NMOS device as a function of the drain current, $I_D$. The graph is a two-dimensional plot with the x-axis labeled $I_D$ (mA) representing the drain current in milliamperes, ranging from 0 to 0.5 mA. The y-axis is labeled $r_O$ (k$\\Omega$), indicating the output resistance in kilo-ohms, ranging from 0 to 14 k$\\Omega$.\n\nThe graph shows a downward-sloping curve, indicating that as the drain current $I_D$ increases, the output resistance $r_O$ decreases. The curve starts at an output resistance of approximately 12 k$\\Omega$ when the drain current is near 0 mA and decreases to about 3 k$\\Omega$ as the drain current approaches 0.5 mA.\n\nThe graph features a smooth, continuous curve with no sharp transitions or discontinuities, suggesting a consistent relationship between the drain current and output resistance over the range of values plotted. The trend is characterized by a steep decrease in resistance at lower drain currents, gradually leveling off as the current increases.\n\nFigure 11.13 Output resistance of a $5-\\mu \\mathrm{m} / 40-\\mathrm{nm}$ NMOS device as a function of drain current.\n\n#### Example 11.5\n\nDetermine the output resistance of $M_{1}$ in Example 11.4.\n\n#### Solution\n\nThe reference transistor in Example 11.4 carries a current of $100 \\mu \\mathrm{~A}$, exhibiting an output resistance of $8 \\mathrm{k} \\Omega$. Since both the width and the drain current are scaled up by a factor of 10, the output resistance drops by the same factor, resulting in $800 \\Omega$."
},
{
    "text": "A frequent scenario in analog design involves the following. For a specific transistor in the circuit, we select a bias current ( possibly based on a power budget) and a minimum $V_{D S}$ ( possibly based on the voltage headroom, i.e., constraints imposed by the supply voltage and required swings). ${ }^{3}$ Our goal is to determine the dimensions and transconductance of the device, acknowledging that the square-law equations are imprecise. While we can simulate the device using available transistor models to obtain these values, we aim for a more systematic and less tedious approach. Our method involves three steps. Let's consider $I_{D}=0.5 \\mathrm{~mA}$ and $V_{D S, \\min }=200 \\mathrm{mV}$ as an example.\n\nStep 1 Choose a \"reference\" transistor with a width $W_{R E F}$ and a length equal to the minimum allowable value, $L_{\\min }$ (e.g., $L_{\\min }=40 \\mathrm{~nm}$ ). For instance, let's pick $W_{R E F}=5 \\mu \\mathrm{~m}$.\n\nStep 2 Utilize actual device models and a circuit simulator to plot the $I_{D}-V_{D S}$ characteristics of the reference transistor for various $V_{G S}-V_{T H}$ values. In typical analog circuits, $V_{G S}-V_{T H}$ ranges from about 50 mV to about 600 mV. We can thus construct the characteristics with the overdrive voltage incremented in steps of $50 \\mathrm{mV}$.^{4} Figure 11.10 illustrates the results for $W_{R E F} / L_{\\text {min }}=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$, with $V_{G S}-V_{T H}$ ranging from 50 mV to 350 mV for clarity.\n\nStep 3 Considering our example specifies $I_{D}=0.5 \\mathrm{~mA}$ and $V_{D S, \\min }=200 \\mathrm{mV}$, we draw a vertical line at $V_{D S}=200 \\mathrm{mV}$ (Fig. 11.10) and locate its intersection with the plots. Which plot should we choose? If the device followed the square law, we would select the plot for $V_{G S}-V_{T H}=V_{D S, \\text { min }}=200 \\mathrm{mV}$. However, the short-channel device remains in saturation even for $V_{G S}-V_{T H}=350 \\mathrm{mV}$ at $V_{D S}=200 \\mathrm{mV}$. The situation is thus more complex, but let's proceed with $V_{G S}-V_{T H}=200 \\mathrm{mV}$ for now.\n\nStep 4 The previous steps have provided, for the reference transistor, one operating point that meets the $V_{D S}$ requirement. The drain current, $I_{D, R E F}$, however, may not be close to the required value, 0.5 mA in our case. What should we do? We must now scale the transistor's width and thereby its drain current. Since in Fig. 11.10, $I_{D, R E F} \\approx 100 \\mu \\mathrm{~A}$, we choose a transistor width of $(500 \\mu \\mathrm{~A} / 100 \\mu \\mathrm{~A}) \\times W_{R E F}=5 W_{R E F}=25 \\mu \\mathrm{~m}$.\n\nWhat is the transconductance of the initial reference transistor? From the plots in Fig. 11.10, we observe that as $V_{G S}-V_{T H}$ increases from 200 mV to $250 \\mathrm{mV}$, $I_{D}$ changes by about $100 \\mu \\mathrm{~A}$. Thus, $g_{m} \\approx 100 \\mu \\mathrm{~A} / 50 \\mathrm{mV}=2 \\mathrm{mS}$. Since the change in overdrive is not significantly less than the initial 200 mV, we might seek a more precise value for $g_{m}$. To this end, let's revisit the reference transistor and, using simulations, plot its transconductance as a function of $V_{G S}-V_{T H}$ with $V_{D S}=200 \\mathrm{mV}$. For a square-law device, this plot would be a straight line, $g_{m}=\\mu_{n} C_{o x}\\left(W_{R E F} / L_{\\text {min }}\\right)\\left(V_{G S}-V_{T H}\\right)$, but with short-channel effects, $g_{m}$ eventually saturates. As shown in Fig. 11.11, the result predicts $g_{m}=1.5 \\mathrm{mS}$ for $V_{G S}-V_{T H}=200 \\mathrm{mV}$. Now, if both the width and the drain current are scaled up by a factor of 5, then $g_{m}$ also increases by the same factor (Example 11.2), reaching 7.5 mS. As indicated in Table 11.1, if this transconductance is insufficient, $W / L$ must be increased further.\n\nWith the $I_{D}$ and $g_{m}$ plots for the reference device, we can easily perform scaling to determine the width and transconductance of other transistors in the circuit. The key point here is that the $I_{D}$ and $g_{m}$ simulations are conducted only once (for a given channel length) but are sufficient for most of our design work.\n\nFigure 11.11 shows the transconductance ($g_{m}$) versus overdrive voltage ($V_{GS} - V_{TH}$) for a specific transistor configuration. The x-axis represents the overdrive voltage, $V_{GS} - V_{TH}$, in volts (V), ranging from 0 to 0.6 V. The y-axis represents the transconductance, $g_{m}$, in millisiemens (mS), ranging from 0 to 6 mS.\n\nThe graph displays a curve that starts near the origin and rises steeply, indicating that as the overdrive voltage increases, the transconductance also increases. The curve initially has a steep slope, showing a rapid increase in transconductance for small increases in overdrive voltage. This trend continues up to around 0.4 V, where the curve begins to flatten, indicating a saturation region where further increases in overdrive voltage result in smaller increases in transconductance.\n\nKey features of the graph include:\n- A steep initial increase in $g_{m}$ as $V_{GS} - V_{TH}$ increases from 0 to about 0.3 V.\n- A transition region from about 0.3 V to 0.4 V where the rate of increase in $g_{m}$ slows down.\n- A saturation region beyond 0.4 V where $g_{m}$ approaches a maximum value of just over 5 mS.\n\nThis graph is essential for understanding how changes in overdrive voltage affect the transconductance of a transistor, which is critical for designing circuits that require specific transconductance values.\n\nFigure 11.11 Dependence of $g_{m}$ on overdrive for $W / L=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ and $V_{D S}=200 \\mathrm{mV}$.\nCan we choose a higher overdrive voltage in Fig. 11.10? Suppose we select $V_{G S}-V_{T H}=250 \\mathrm{mV}$, obtaining $I_{D}=200 \\mu \\mathrm{~A}$ for the reference transistor and a transconductance of about 2.3 mS from Fig. 11.11. If scaled up to $12.5 \\mu \\mathrm{~m}$ to carry $500 \\mu \\mathrm{~A}$, the transistor exhibits a transconductance of $2.5 \\times 2.3 \\mathrm{mS}=5.75 \\mathrm{mS}$, a value lower than that observed in the previous case (7.5 mS). This occurs because $g_{m}=2 I_{D} /\\left(V_{G S}-V_{T H}\\right)$ in saturation. To achieve a high transconductance, we typically choose $V_{G S}-V_{T H} \\approx V_{D S, \\text { min }}$ even though it results in a wider transistor.\n\n#### Example 11.4\n\nThe circuit in Fig. 11.12 must be designed for a power budget of 1 mW and a peak-to-peak output voltage swing of 0.8 V. Assuming $L=40 \\mathrm{~nm}$ for $M_{1}$, calculate its required width. Can the transistor provide a transconductance of $1 /(50 \\Omega)$?\n\nFigure 11.12 depicts a common-source NMOS amplifier with a drain resistor RD. The NMOS transistor M1 is used for amplification, and the circuit is powered by a 1V supply. The output voltage swing is between 0.2V and 1V.\n\nThe graph in Figure 11.12 illustrates the output voltage, \\( V_{out} \\), of a transistor circuit over time. The waveform is sinusoidal with a peak-to-peak voltage swing of 0.8 V, oscillating between 1 V and 0.2 V. The horizontal axis represents time, typically in seconds or a submultiple thereof, while the vertical axis represents the output voltage in volts.\n\nKey features of the graph include:\n- **Graph Type:** Time-domain waveform\n- **Function Type:** Sinusoidal signal\n- **Horizontal Axis:** Time (units not specified, but generally in seconds)\n- **Vertical Axis:** Voltage (in volts)\n- **Voltage Range:** 0.2 V to 1 V\n- **Overall Behavior:** The waveform displays sinusoidal behavior, indicating periodic oscillations in the output voltage.\n- **Amplitude:** The amplitude is consistent, suggesting stable operation within the specified voltage range.\n- **Key Features:** \n  - **Peak Voltage:** 1 V\n  - **Minimum Voltage:** 0.2 V\n  - **Peak-to-Peak Voltage Swing:** 0.8 V\n  - The waveform remains within the saturation region of the transistor, as indicated by the context, ensuring \\( M_1 \\) remains in saturation.\n\nThis graph is crucial for analyzing the performance of the transistor \\( M_1 \\) in maintaining the required output voltage swing while staying within the power budget and saturation region.\n\n#### Solution\n\nThe power budget along with $V_{D D}=1 \\mathrm{~V}$ translates to a drain bias current of 1 mA. For the circuit to accommodate an output swing of $0.8 \\mathrm{~V}$, $M_{1}$ must remain in saturation as $V_{D S}$ drops to 0.2 V. Returning to the $I_{D}-V_{D S}$ characteristics of Fig. 11.10, we recall that $I_{D, R E F} \\approx 100 \\mu \\mathrm{~A}$ for $V_{D S}=V_{G S}-V_{T H}=200 \\mathrm{mV}$. We must therefore scale $W_{R E F}$ up by a factor of $1 \\mathrm{~mA} / 0.1 \\mathrm{~mA}$, obtaining $W / L=50 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$. The transconductance is also multiplied by this factor, reaching $15 \\mathrm{mS}=1 /(67 \\Omega)$. Note that these results are independent of the value of $R_{D}$.\n\nWe conclude that, if the transistor is designed merely to meet the $I_{D}$ and $V_{D S}$ specifications of this example, it does not necessarily achieve a transconductance of $1 /(50 \\Omega)$.\n\nIn addition to $I_{D}$, $V_{G S}-V_{T H}$, and $g_{m}$, the output impedance of the transistors also becomes important in many analog circuits. As explained in Chapter 17, $r_{O}$ cannot be expressed as $1 /\\left(\\lambda I_{D}\\right)$ for short-channel devices. The value of $r_{O}$ can be estimated from the slope of the $I_{D}$ characteristics in Fig. 11.2, but for convenience and accuracy, we use simulations to plot $r_{O}$ for the reference transistor as a function of $I_{D}$ (Fig. 11.13).\n\nFigure 11.13 illustrates the output resistance \\( r_O \\) of a 5-\\( \\mu \\)m / 40-nm NMOS device as a function of the drain current \\( I_D \\). The x-axis represents the drain current in milliamperes (mA), ranging from 0 to 0.5 mA, while the y-axis represents the output resistance in kilo-ohms (k\\( \\Omega \\)), ranging from 0 to 14 k\\( \\Omega \\).\n\nThe graph shows a downward-sloping curve, indicating that as the drain current \\( I_D \\) increases, the output resistance \\( r_O \\) decreases. The curve starts at an output resistance of approximately 12 k\\( \\Omega \\) when the drain current is near 0 mA and decreases to about 3 k\\( \\Omega \\) as the drain current approaches 0.5 mA.\n\nThe graph has a smooth, continuous curve with no sharp transitions or discontinuities, suggesting a consistent relationship between the drain current and output resistance over the range of values plotted. The trend is characterized by a steep decrease in resistance at lower drain currents, gradually leveling off as the current increases.\n\nFigure 11.13 Output resistance of a $5-\\mu \\mathrm{m} / 40-\\mathrm{nm}$ NMOS device as a function of drain current.\n\n#### Example 11.5\n\nDetermine the output resistance of $M_{1}$ in Example 11.4.\n\n#### Solution\n\nThe reference transistor in Example 11.4 carries a current of $100 \\mu \\mathrm{~A}$, exhibiting an output resistance of $8 \\mathrm{k} \\Omega$. Since both the width and the drain current are scaled up by a factor of 10, the output resistance drops by the same factor, resulting in $800 \\Omega$."
},
{
    "text": "A frequent scenario in analog design unfolds as follows. For a specific transistor within the circuit, we select a bias current (perhaps based on a power budget) and a minimum $V_{D S}$ (determined by voltage headroom, i.e., constraints from the supply voltage and required voltage swings). Our objective is to ascertain the dimensions and transconductance of the device, acknowledging the inaccuracies of square-law equations. While transistor models allow us to simulate and obtain these values, we aim for a more systematic and less labor-intensive approach. Our method involves three steps. Consider $I_{D}=0.5 \\mathrm{~mA}$ and $V_{D S, \\min }=200 \\mathrm{mV}$ as an illustrative example.\n\n**Step 1:** Choose a \"reference\" transistor with a width $W_{R E F}$ and a length equal to the minimum permissible value, $L_{\\min }$ (e.g., $L_{\\min }=40 \\mathrm{~nm}$). Let's take $W_{R E F}=5 \\mu \\mathrm{~m}$ as an example.\n\n**Step 2:** Utilize actual device models and a circuit simulator to plot the $I_{D}-V_{D S}$ characteristics of the reference transistor for various $V_{G S}-V_{T H}$ values. In typical analog circuits, $V_{G S}-V_{T H}$ ranges from approximately 50 mV to 600 mV. Consequently, we construct the characteristics with the overdrive voltage incremented in steps of 50 mV.\n\n**Figure 11.10 Description:** This figure depicts the drain current ($I_D$) versus the drain-source voltage ($V_{DS}$) for a reference transistor. The graph comprises $I_D$-$V_{DS}$ characteristics for different overdrive voltages, $V_{GS} - V_{TH}$, incremented in 50 mV steps from 50 mV to 350 mV.\n\n1. **Graph Type and Function:** This is an $I_D$-$V_{DS}$ characteristics plot, commonly used in transistor analysis to illustrate how drain current varies with drain-source voltage for different gate-source overdrive voltages.\n\n2. **Axes Labels and Units:** The x-axis represents $V_{DS}$ (drain-source voltage) in volts (V), ranging from 0 to 1 V. The y-axis represents $I_D$ (drain current) in milliamperes (mA), ranging from 0 to 1.2 mA. Both axes use a linear scale.\n\n3. **Overall Behavior and Trends:** The curves exhibit typical transistor behavior, with drain current increasing with $V_{DS}$ and $V_{GS} - V_{TH}$. For lower $V_{DS}$ values, the curves show a linear current increase, indicating the ohmic region. As $V_{DS}$ increases, the curves flatten, indicating the saturation region where current becomes relatively constant.\n\n4. **Key Features and Technical Details:** Each curve corresponds to a specific $V_{GS} - V_{TH}$ value, starting from 50 mV and increasing in 50 mV steps up to 350 mV. The saturation current rises with higher $V_{GS} - V_{TH}$ values. A vertical line at $V_{DS} = 0.2$ V intersects the curves, indicating a reference point, possibly related to a specific operating condition.\n\n5. **Annotations and Specific Data Points:** The vertical line at $V_{DS} = 0.2$ V intersects the curves around $I_D = 0.5$ mA, highlighting a specific operating point or condition of interest.\n\n**Figure 11.10:** Drain current for $V_{G S}-V_{T H}=50 \\mathrm{mV} \\cdots 350 \\mathrm{mV}$ in 50 mV steps for a reference device.\n\n**Step 3:** Given our example's $I_{D}=0.5 \\mathrm{~mA}$ and $V_{D S, \\min }=200 \\mathrm{mV}$, draw a vertical line at $V_{D S}=200 \\mathrm{mV}$ (Fig. 11.10) and find its intersection with the plots. Which plot should we choose? If the device followed the square law, we would select the plot for $V_{G S}-V_{T H}=200 \\mathrm{mV}$. However, the short-channel device remains in saturation even for $V_{G S}-V_{T H}=350 \\mathrm{mV}$ at $V_{D S}=200 \\mathrm{mV}$. The situation is more complex, but let's proceed with $V_{G S}-V_{T H}=200 \\mathrm{mV}$ for now.\n\n**Step 4:** The previous steps have provided, for the reference transistor, one operating point that meets the $V_{D S}$ requirement. However, the drain current, $I_{D, R E F}$, may not be close to the desired 0.5 mA. What next? We must scale the transistor width and, consequently, its drain current. Since in Fig. 11.10, $I_{D, R E F} \\approx 100 \\mu \\mathrm{~A}$, we choose a transistor width of $(500 \\mu \\mathrm{~A} / 100 \\mu \\mathrm{~A}) \\times W_{R E F}=5 W_{R E F}=25 \\mu \\mathrm{~m}$.\n\nWhat is the transconductance of the initial reference transistor? From Fig. 11.10, we observe that as $V_{G S}-V_{T H}$ increases from 200 mV to 250 mV, $I_{D}$ changes by about 100 µA. Thus, $g_{m} \\approx 100 \\mu \\mathrm{~A} / 50 \\mathrm{mV}=2 \\mathrm{mS}$. Since the overdrive change is not much less than the initial 200 mV, a more accurate $g_{m}$ value may be sought. To this end, return to the reference transistor and, using simulations, plot its transconductance as a function of $V_{G S}-V_{T H}$ with $V_{D S}=200 \\mathrm{mV}$. For a square-law device, this plot would be a straight line, $g_{m}=\\mu_{n} C_{o x}\\left(W_{R E F} / L_{\\text {min }}\\right)\\left(V_{G S}-V_{T H}\\right)$, but with short-channel effects, $g_{m}$ eventually saturates. As shown in Fig. 11.11, the result predicts $g_{m}=1.5 \\mathrm{mS}$ for $V_{G S}-V_{T H}=200 \\mathrm{mV}$. If both width and drain current are scaled up by a factor of 5, $g_{m}$ also increases by the same factor (Example 11.2), reaching 7.5 mS. As indicated in Table 11.1, if this transconductance is insufficient, $W / L$ must be further increased.\n\nWith the $I_{D}$ and $g_{m}$ plots for the reference device, we can easily perform scaling to determine the width and transconductance of other transistors in the circuit. The key point is that $I_{D}$ and $g_{m}$ simulations are done only once (for a given channel length) but serve most of our design work.\n\n**Figure 11.11 Description:** This graph plots transconductance ($g_{m}$) versus overdrive voltage ($V_{GS} - V_{TH}$) for a specific transistor configuration. The x-axis represents the overdrive voltage, $V_{GS} - V_{TH}$, in volts (V), ranging from 0 to 0.6 V. The y-axis represents the transconductance, $g_{m}$, in millisiemens (mS), ranging from 0 to 6 mS.\n\nThe graph shows a curve starting near the origin and rising steeply, indicating that as the overdrive voltage increases, the transconductance also increases. The curve steeply rises up to around 0.4 V, then begins to level off, indicating a saturation region where further increases in overdrive voltage result in smaller increases in transconductance.\n\nKey features include:\n- A steep initial increase in $g_{m}$ for $V_{GS} - V_{TH}$ from 0 to about 0.3 V.\n- A transition region from about 0.3 V to 0.4 V where the rate of increase in $g_{m}$ slows.\n- A saturation region beyond 0.4 V where $g_{m}$ approaches a maximum value of just over 5 mS.\n\nThis graph is crucial for understanding how changes in overdrive voltage affect transistor transconductance, essential for designing circuits requiring specific transconductance values.\n\n**Figure 11.11:** Dependence of $g_{m}$ on overdrive for $W / L=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ and $V_{D S}=200 \\mathrm{mV}$.\n\nCan we choose a higher overdrive voltage in Fig. 11.10? Suppose we select $V_{G S}-V_{T H}=250 \\mathrm{mV}$, obtaining $I_{D}=200 \\mu \\mathrm{~A}$ for the reference transistor and a transconductance of about 2.3 mS from Fig. 11.11. If scaled up to $12.5 \\mu \\mathrm{~m}$ to carry $500 \\mu \\mathrm{~A}$, the transistor exhibits a transconductance of $2.5 \\times 2.3 \\mathrm{mS}=5.75 \\mathrm{mS}$, less than the previous case's 7.5 mS. This occurs because $g_{m}=2 I_{D} /\\left(V_{G S}-V_{T H}\\right)$ in saturation. To achieve high transconductance, we typically choose $V_{G S}-V_{T H} \\approx V_{D S, \\text { min }}$, even though it results in a wider transistor.\n\n#### Example 11.4\n\nThe circuit in Fig. 11.12 must be designed for a 1 mW power budget and a 0.8 V peak-to-peak output voltage swing. Assuming $L=40 \\mathrm{~nm}$ for $M_{1}$, compute its required width. Can the transistor provide a transconductance of $1 /(50 \\Omega)$?\n\n**Figure 11.12 Description:** The circuit is a common-source NMOS amplifier with a drain resistor RD. The NMOS transistor M1 is used for amplification, powered by a 1V supply. The output voltage swing is between 0.2V and 1V.\n\n**Figure 11.12 Description:** This graph shows a time-domain waveform of the output voltage, \\( V_{out} \\), of a transistor circuit over time. The waveform is sinusoidal with a 0.8 V peak-to-peak voltage swing, oscillating between 1 V and 0.2 V. The horizontal axis represents time, typically in seconds or a submultiple thereof, while the vertical axis represents the output voltage in volts.\n\n- **Graph Type:** Time-domain waveform\n- **Function Type:** Sinusoidal signal\n\n- **Axes Labels and Units:**\n  - Horizontal Axis: Time (units not specified, but generally in seconds)\n  - Vertical Axis: Voltage (in volts)\n  - Voltage Range: 0.2 V to 1 V\n\n- **Overall Behavior and Trends:** The waveform displays sinusoidal behavior, indicating periodic oscillations in the output voltage. The amplitude is consistent, suggesting stable operation within the specified voltage range.\n\n- **Key Features and Technical Details:**\n  - Peak Voltage: 1 V\n  - Minimum Voltage: 0.2 V\n  - Peak-to-Peak Voltage Swing: 0.8 V\n  - The waveform remains within the saturation region of the transistor, as indicated by the context, ensuring \\( M_1 \\) remains in saturation.\n\n- **Annotations and Specific Data Points:** The waveform is annotated with horizontal dashed lines at 1 V and 0.2 V, marking the peak and minimum voltage levels, respectively.\n\nThis graph is crucial for analyzing the performance of transistor \\( M_1 \\) in maintaining the required output voltage swing while staying within the power budget and saturation region.\n\n#### Solution\n\nThe 1 mW power budget and $V_{D D}=1 \\mathrm{~V}$ translate to a drain bias current of 1 mA. For the circuit to accommodate a 0.8 V output swing, $M_{1}$ must remain in saturation as $V_{D S}$ falls to 0.2 V. Referring to the $I_{D}-V_{D S}$ characteristics of Fig. 11.10, we recall that $I_{D, R E F} \\approx 100 \\mu \\mathrm{~A}$ for $V_{D S}=V_{G S}-V_{T H}=200 \\mathrm{mV}$. We must therefore scale $W_{R E F}$ up by a factor of $1 \\mathrm{~mA} / 0.1 \\mathrm{~mA}$, obtaining $W / L=50 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$. The transconductance also scales by this factor, reaching $15 \\mathrm{mS}=1 /(67 \\Omega)$. Note that these results are independent of $R_{D}$.\n\nWe conclude that, if the transistor is designed merely to meet this example's $I_{D}$ and $V_{D S}$ specifications, it does not necessarily achieve a transconductance of $1 /(50 \\Omega)$.\n\nIn addition to $I_{D}, V_{G S}-V_{T H}$, and $g_{m}$, the output impedance of transistors is also crucial in many analog circuits. As explained in Chapter 17, $r_{O}$ cannot be expressed as $1 /\\left(\\lambda I_{D}\\right)$ for short-channel devices. The value of $r_{O}$ can be estimated from the slope of the $I_{D}$ characteristics in Fig. 11.2, but for convenience and accuracy, we use simulations to plot $r_{O}$ for the reference transistor as a function of $I_{D}$ (Fig. 11.13).\n\n**Figure 11.13 Description:** This graph illustrates the output resistance \\( r_O \\) of a 5-\\( \\mu \\)m / 40-nm NMOS device as a function of the drain current \\( I_D \\). The x-axis represents \\( I_D \\) (mA), ranging from 0 to 0.5 mA. The y-axis represents \\( r_O \\) (k\\( \\Omega \\)), ranging from 0 to 14 k\\( \\Omega \\).\n\nThe graph shows a downward-sloping curve, indicating that as \\( I_D \\) increases, \\( r_O \\) decreases. The curve starts at approximately 12 k\\( \\Omega \\) when \\( I_D \\) is near 0 mA and decreases to about 3 k\\( \\Omega \\) as \\( I_D \\) approaches 0.5 mA.\n\nThe curve is smooth and continuous, with no sharp transitions or discontinuities, suggesting a consistent relationship between \\( I_D \\) and \\( r_O \\) over the plotted range. The trend shows a steep decrease in resistance at lower drain currents, gradually leveling off as the current increases.\n\n**Figure 11.13:** Output resistance of a $5-\\mu \\mathrm{m} / 40-\\mathrm{nm}$ NMOS device as a function of drain current.\n\n#### Example 11.5\n\nDetermine the output resistance of $M_{1}$ in Example 11.4.\n\n#### Solution\n\nIn Example 11.4, the reference transistor carries a current of $100 \\mu \\mathrm{~A}$, exhibiting an output resistance of $8 \\mathrm{k} \\Omega$. Since both the width and the drain current are scaled up by a factor of 10, the output resistance decreases by the same factor, resulting in $800 \\Omega$."
},
{
    "text": "A frequent scenario in analog design unfolds as follows. For a specific transistor within the circuit, we have determined a bias current (perhaps based on a power budget) and a minimum $V_{DS}$ (perhaps according to the voltage headroom, i.e., the limitations imposed by the supply voltage and required swings). ${ }^{3}$ Our objective is to ascertain the dimensions and transconductance of the device, acknowledging that square-law equations are imprecise. While transistor models enable us to simulate the device and obtain these values, we aim for a more systematic and less labor-intensive approach. Our methodology involves three steps. Consider $I_{D}=0.5 \\mathrm{~mA}$ and $V_{DS, \\min }=200 \\mathrm{mV}$ as an illustrative example.\n\nStep 1 Choose a \"reference\" transistor with a width $W_{REF}$ and a length equal to the minimum allowable value, $L_{\\min }$ (e.g., $L_{\\min }=40 \\mathrm{~nm}$). Let's select $W_{REF}=5 \\mu \\mathrm{~m}$ for this example.\n\nStep 2 Utilize actual device models and a circuit simulator to plot the $I_{D}-V_{DS}$ characteristics of the reference transistor for various $V_{GS}-V_{TH}$ values. In typical analog circuits, $V_{GS}-V_{TH}$ ranges from approximately 50 mV to 600 mV. Consequently, we can construct the characteristics with the overdrive voltage.\n\nimage_name:Figure 11.10\ndescription:Figure 11.10 depicts the drain current ($I_D$) versus the drain-source voltage ($V_{DS}$) for a reference transistor. The graph comprises $I_D$-$V_{DS}$ characteristics for different overdrive voltage values, $V_{GS} - V_{TH}$, incremented in 50 mV steps, ranging from 50 mV to 350 mV.\n\n1. **Type of Graph and Function:**\n- This is an $I_D$-$V_{DS}$ characteristics plot, commonly used in transistor analysis to illustrate how the drain current varies with the drain-source voltage for different gate-source overdrive voltages.\n\n2. **Axes Labels and Units:**\n- The x-axis represents $V_{DS}$ (drain-source voltage) in volts (V), ranging from 0 to 1 V.\n- The y-axis represents $I_D$ (drain current) in milliamperes (mA), ranging from 0 to 1.2 mA.\n- Both axes use a linear scale.\n\n3. **Overall Behavior and Trends:**\n- The curves exhibit typical transistor behavior, with the drain current increasing as $V_{DS}$ and $V_{GS} - V_{TH}$ increase.\n- For lower $V_{DS}$ values, the curves show a linear increase in current, indicating operation in the ohmic region.\n- As $V_{DS}$ increases further, the curves flatten, indicating the saturation region where the current becomes relatively constant.\n\n4. **Key Features and Technical Details:**\n- Each curve corresponds to a specific $V_{GS} - V_{TH}$ value, starting from 50 mV and increasing in 50 mV steps up to 350 mV.\n- The saturation current increases with higher $V_{GS} - V_{TH}$ values.\n- A vertical line is drawn at $V_{DS} = 0.2$ V, intersecting the curves, indicating a reference point, possibly related to a specific operating condition.\n\n5. **Annotations and Specific Data Points:**\n- The vertical line at $V_{DS} = 0.2$ V intersects the curves around $I_D = 0.5$ mA, highlighting a specific operating point or condition of interest.\n\nFigure 11.10 Drain current for $V_{GS}-V_{TH}=50 \\mathrm{mV} \\cdots 350 \\mathrm{mV}$ in 50 mV steps for a reference device.\nincrementing in 50 mV steps.^{4} Figure 11.10 shows the results for $W_{REF} / L_{\\min }=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$. (Here, $V_{GS}-V_{TH}$ increments from 50 mV to 350 mV for clarity.)\n\nStep 3 Considering our example specifies $I_{D}=0.5 \\mathrm{~mA}$ and $V_{DS, \\min }=200 \\mathrm{mV}$, we draw a vertical line at $V_{DS}=200 \\mathrm{mV}$ (Fig. 11.10) and find its intersection with the plots. Which plot should we select? If the device adhered to the square law, we would choose the plot for $V_{GS}-V_{TH}=V_{DS, \\text { min }}=200 \\mathrm{mV}$. However, the short-channel device remains in saturation even for $V_{GS}-V_{TH}=350 \\mathrm{mV}$ at $V_{DS}=200 \\mathrm{mV}$. The situation is thus more complex, but let's proceed with $V_{GS}-V_{TH}=200 \\mathrm{mV}$ for now.\n\nStep 4 The preceding procedure has yielded, for the reference transistor, one operating point that meets the $V_{DS}$ requirement. However, the drain current, $I_{D, REF}$, may not be close to the required value, 0.5 mA in our example. What should we do? We must now scale the width of the transistor and thereby its drain current. Since in Fig. 11.10, $I_{D, REF} \\approx 100 \\mu \\mathrm{~A}$, we choose a transistor width of $(500 \\mu \\mathrm{~A} / 100 \\mu \\mathrm{~A}) \\times W_{REF}=5 W_{REF}=25 \\mu \\mathrm{~m}$.\n\nWhat is the transconductance of the earlier reference transistor? From the plots in Fig. 11.10, we observe that as $V_{GS}-V_{TH}$ increases from 200 mV to 250 mV, $I_{D}$ changes by about 100 µA. Thus, $g_{m} \\approx 100 \\mu \\mathrm{~A} / 50 \\mathrm{mV}=2 \\mathrm{mS}$. Since the change in overdrive is not significantly less than the initial 200 mV, we may seek a more accurate $g_{m}$ value. To this end, let's return to the reference transistor and, using simulations, plot its transconductance as a function of $V_{GS}-V_{TH}$ with $V_{DS}=200 \\mathrm{mV}$. For a square-law device, this plot would be a straight line, $g_{m}=\\mu_{n} C_{ox}\\left(W_{REF} / L_{\\min }\\right)\\left(V_{GS}-V_{TH}\\right)$, but with short-channel effects, $g_{m}$ eventually saturates. As shown in Fig. 11.11, the result predicts $g_{m}=1.5 \\mathrm{mS}$ for $V_{GS}-V_{TH}=200 \\mathrm{mV}$. Now, if both the width and the drain current are scaled up by a factor of 5, then $g_{m}$ also increases by the same factor (Example 11.2), reaching 7.5 mS. As indicated in Table 11.1, if this transconductance is insufficient, $W / L$ must be increased further.\n\nWith the $I_{D}$ and $g_{m}$ plots obtained for the reference device, we can easily perform scaling to determine the width and transconductance of other transistors in the circuit. The key point here is that the $I_{D}$ and $g_{m}$ simulations are conducted only once (for a given channel length) but serve most of our design work.\n\nimage_name:Figure 11.11\ndescription:Figure 11.11 is a graph plotting transconductance ($g_{m}$) versus overdrive voltage ($V_{GS} - V_{TH}$) for a specific transistor configuration. The x-axis represents the overdrive voltage, $V_{GS} - V_{TH}$, in volts (V), ranging from 0 to 0.6 V. The y-axis represents the transconductance, $g_{m}$, in millisiemens (mS), ranging from 0 to 6 mS.\n\nThe graph displays a curve starting near the origin and rising steeply, indicating that as the overdrive voltage increases, the transconductance also increases. The curve initially shows a rapid increase in $g_{m}$ for small increases in overdrive voltage, up to around 0.4 V, where it begins to level off, indicating a saturation region where further increases in overdrive voltage result in smaller increases in transconductance.\n\nKey features of the graph include:\n- A steep initial increase in $g_{m}$ as $V_{GS} - V_{TH}$ increases from 0 to about 0.3 V.\n- A transition region from about 0.3 V to 0.4 V where the rate of increase in $g_{m}$ slows.\n- A saturation region beyond 0.4 V where $g_{m}$ approaches a maximum value of just over 5 mS.\n\nThis graph is essential for understanding how changes in overdrive voltage affect the transconductance of a transistor, which is crucial for designing circuits requiring specific transconductance values.\n\nFigure 11.11 Dependence of $g_{m}$ on overdrive for $W / L=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ and $V_{DS}=200 \\mathrm{mV}$.\nCan we choose a higher overdrive voltage in Fig. 11.10? Suppose we select $V_{GS}-V_{TH}=250 \\mathrm{mV}$, obtaining $I_{D}=200 \\mu \\mathrm{~A}$ for the reference transistor and a transconductance of about 2.3 mS from Fig. 11.11. If scaled up to $12.5 \\mu \\mathrm{~m}$ to carry $500 \\mu \\mathrm{~A}$, the transistor exhibits a transconductance of $2.5 \\times 2.3 \\mathrm{mS}=5.75 \\mathrm{mS}$, a value lower than that observed in the previous case (7.5 mS). This occurs because $g_{m}=2 I_{D} /\\left(V_{GS}-V_{TH}\\right)$ in saturation. To achieve a high transconductance, we typically choose $V_{GS}-V_{TH} \\approx V_{DS, \\text { min }}$ even though it results in a wider transistor.\n\n#### Example 11.4\n\nThe circuit shown in Fig. 11.12 must be designed for a power budget of 1 mW and a peak-to-peak output voltage swing of 0.8 V. Assuming $L=40 \\mathrm{~nm}$ for $M_{1}$, compute its required width. Can the transistor provide a transconductance of $1 /(50 \\Omega)$?\nimage_name:Figure 11.12\ndescription:\n[\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: VDD, type: VoltageSource, value: 1V, ports: {Np: VDD, Nn: GND}\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\n]\nextrainfo:The circuit is a common-source NMOS amplifier with a drain resistor RD. The NMOS transistor M1 is used for amplification, and the circuit is powered by a 1V supply. The output voltage swing is between 0.2V and 1V.\nimage_name:Figure 11.12\ndescription:This graph illustrates the output voltage, \\( V_{out} \\), of a transistor circuit over time, depicted as a time-domain waveform. The waveform is sinusoidal with a peak-to-peak voltage swing of 0.8 V, oscillating between 1 V and 0.2 V. The horizontal axis represents time, typically in seconds or a submultiple thereof, while the vertical axis represents the output voltage in volts.\n\nType of Graph and Function\n- **Graph Type:** Time-domain waveform\n- **Function Type:** Sinusoidal signal\n\nAxes Labels and Units\n- **Horizontal Axis:** Time (units not specified, but generally in seconds)\n- **Vertical Axis:** Voltage (in volts)\n- **Voltage Range:** 0.2 V to 1 V\n\nOverall Behavior and Trends\n- The waveform displays sinusoidal behavior, indicating periodic oscillations in the output voltage.\n- The amplitude of the waveform is consistent, suggesting stable operation within the specified voltage range.\n\nKey Features and Technical Details\n- **Peak Voltage:** 1 V\n- **Minimum Voltage:** 0.2 V\n- **Peak-to-Peak Voltage Swing:** 0.8 V\n- The waveform remains within the saturation region of the transistor, as indicated by the context, ensuring \\( M_1 \\) remains in saturation.\n\nAnnotations and Specific Data Points\n- The waveform is annotated with horizontal dashed lines at 1 V and 0.2 V, marking the peak and minimum voltage levels, respectively.\n\nThis graph is crucial for analyzing the performance of the transistor \\( M_1 \\) in maintaining the required output voltage swing while staying within the power budget and saturation region.\n\n#### Solution\n\nThe power budget, combined with $V_{DD}=1 \\mathrm{~V}$, translates to a drain bias current of 1 mA. For the circuit to accommodate an output swing of 0.8 V, $M_{1}$ must remain in saturation as $V_{DS}$ drops to 0.2 V. We refer back to the $I_{D}-V_{DS}$ characteristics of Fig. 11.10 and note that $I_{D, REF} \\approx 100 \\mu \\mathrm{~A}$ for $V_{DS}=V_{GS}-V_{TH}=200 \\mathrm{mV}$. We must therefore scale $W_{REF}$ up by a factor of $1 \\mathrm{~mA} / 0.1 \\mathrm{~mA}$, resulting in $W / L=50 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$. The transconductance is also multiplied by this factor, reaching $15 \\mathrm{mS}=1 /(67 \\Omega)$. Note that these results are independent of the value of $R_{D}$.\n\nWe conclude that, if the transistor is designed merely to meet this example's $I_{D}$ and $V_{DS}$ specifications, it does not necessarily achieve a transconductance of $1 /(50 \\Omega)$.\n\nIn addition to $I_{D}, V_{GS}-V_{TH}$, and $g_{m}$, the output impedance of the transistors also becomes important in many analog circuits. As explained in Chapter 17, $r_{O}$ cannot be expressed as $1 /\\left(\\lambda I_{D}\\right)$ for short-channel devices. The value of $r_{O}$ can be estimated from the slope of the $I_{D}$ characteristics in Fig. 11.2, but for convenience and accuracy, we use simulations to plot $r_{O}$ for the reference transistor as a function of $I_{D}$ (Fig. 11.13).\nimage_name:Figure 11.13\ndescription:Figure 11.13 is a graph showing the output resistance \\( r_O \\) of a 5-\\( \\mu \\)m / 40-nm NMOS device as a function of the drain current \\( I_D \\). The x-axis is labeled \\( I_D \\) (mA) and represents the drain current in milliamperes, ranging from 0 to 0.5 mA. The y-axis is labeled \\( r_O \\) (k\\( \\Omega \\)) and indicates the output resistance in kilo-ohms, ranging from 0 to 14 k\\( \\Omega \\).\n\nThe graph displays a downward-sloping curve, indicating that as the drain current \\( I_D \\) increases, the output resistance \\( r_O \\) decreases. The curve starts at an output resistance of approximately 12 k\\( \\Omega \\) when the drain current is near 0 mA and decreases to about 3 k\\( \\Omega \\) as the drain current approaches 0.5 mA.\n\nThe graph is smooth and continuous, with no sharp transitions or discontinuities, suggesting a consistent relationship between the drain current and output resistance over the range of values plotted. The trend shows a steep decrease in resistance at lower drain currents, gradually leveling off as the current increases.\n\nFigure 11.13 Output resistance of a $5-\\mu \\mathrm{m} / 40-\\mathrm{nm}$ NMOS device as a function of drain current.\n\n#### Example 11.5\n\nDetermine the output resistance of $M_{1}$ in Example 11.4.\n\n#### Solution\n\nThe reference transistor in Example 11.4 carries a current of $100 \\mu \\mathrm{~A}$, exhibiting an output resistance of $8 \\mathrm{k} \\Omega$. Since both the width and the drain current are scaled up by a factor of 10, the output resistance decreases by the same factor, resulting in $800 \\Omega$."
},
{
    "text": "A frequent scenario in analog design is as follows. For a specific transistor in the circuit, we select a bias current (possibly based on a power budget) and a minimum $V_{D S}$ (perhaps according to the voltage headroom, i.e., constraints imposed by the supply voltage and required swings). ${ }^{3}$ We then aim to determine the dimensions and transconductance of the device, acknowledging that square-law equations are imprecise. While we can simulate the device using available transistor models to obtain these values, we seek a more systematic and less tedious approach. Our method involves three steps. Let's consider $I_{D}=0.5 \\mathrm{~mA}$ and $V_{D S, \\min }=200 \\mathrm{mV}$ as an example.\n\nStep 1 Choose a \"reference\" transistor with a width $W_{R E F}$ and a length equal to the minimum allowable value, $L_{\\min }$ (e.g., $L_{\\min }=40 \\mathrm{~nm}$). For instance, let $W_{R E F}=5 \\mu \\mathrm{~m}$.\n\nStep 2 Utilize actual device models and a circuit simulator to plot the $I_{D}-V_{D S}$ characteristics of the reference transistor for various $V_{G S}-V_{T H}$ values. In typical analog circuits, $V_{G S}-V_{T H}$ ranges from about 50 mV to about 600 mV. We can thus construct the characteristics with the overdrive voltage incremented in steps of $50 \\mathrm{mV}$.^{4} Figure 11.10 illustrates the results for $W_{R E F} / L_{\\text {min }}=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$, with $V_{G S}-V_{T H}$ ranging from 50 mV to 350 mV for clarity.\n\nStep 3 Considering our example specifies $I_{D}=0.5 \\mathrm{~mA}$ and $V_{D S, \\min }=200 \\mathrm{mV}$, we draw a vertical line at $V_{D S}=200 \\mathrm{mV}$ (Fig. 11.10) and identify its intersection with the plots. Which plot should we choose? If the device followed the square law, we would select the plot for $V_{G S}-V_{T H}=V_{D S, \\text { min }}=200 \\mathrm{mV}$. However, the short-channel device remains in saturation even for $V_{G S}-V_{T H}=350 \\mathrm{mV}$ at $V_{D S}=200 \\mathrm{mV}$. The situation is thus more complex, but let's proceed with $V_{G S}-V_{T H}=200 \\mathrm{mV}$ for now.\n\nStep 4 The previous steps have provided, for the reference transistor, one operating point that meets the $V_{D S}$ requirement. The drain current, $I_{D, R E F}$, however, may not be close to the required value, 0.5 mA in our example. What should we do? We must now scale the transistor's width and thereby its drain current. Since in Fig. 11.10, $I_{D, R E F} \\approx 100 \\mu \\mathrm{~A}$, we choose a transistor width of $(500 \\mu \\mathrm{~A} / 100 \\mu \\mathrm{~A}) \\times W_{R E F}=5 W_{R E F}=25 \\mu \\mathrm{~m}$.\n\nWhat is the transconductance of the initial reference transistor? From the plots in Fig. 11.10, we observe that as $V_{G S}-V_{T H}$ increases from 200 mV to $250 \\mathrm{mV}$, $I_{D}$ changes by about $100 \\mu \\mathrm{~A}$. Thus, $g_{m} \\approx 100 \\mu \\mathrm{~A} / 50 \\mathrm{mV}=2 \\mathrm{mS}$. Since the change in overdrive is not significantly less than the initial 200 mV, we may seek a more precise value for $g_{m}$. To this end, let's return to the reference transistor and, using simulations, plot its transconductance as a function of $V_{G S}-V_{T H}$ with $V_{D S}=200 \\mathrm{mV}$. For a square-law device, this plot would be a straight line, $g_{m}=\\mu_{n} C_{o x}\\left(W_{R E F} / L_{\\text {min }}\\right)\\left(V_{G S}-V_{T H}\\right)$, but with short-channel effects, $g_{m}$ eventually saturates. As shown in Fig. 11.11, the result predicts $g_{m}=1.5 \\mathrm{mS}$ for $V_{G S}-V_{T H}=200 \\mathrm{mV}$. Now, if both the width and the drain current are scaled up by a factor of 5, then $g_{m}$ also increases by the same factor (Example 11.2), reaching 7.5 mS. As indicated in Table 11.1, if this transconductance is inadequate, $W / L$ must be further increased.\n\nWith the $I_{D}$ and $g_{m}$ plots for the reference device, we can easily perform scaling to determine the width and transconductance of other transistors in the circuit. The key point here is that the $I_{D}$ and $g_{m}$ simulations are conducted only once (for a given channel length) but are sufficient for most of our design work.\n\nFigure 11.11 shows the transconductance ($g_{m}$) versus overdrive voltage ($V_{GS} - V_{TH}$) for a specific transistor configuration. The x-axis represents the overdrive voltage, $V_{GS} - V_{TH}$, in volts (V), ranging from 0 to 0.6 V. The y-axis represents the transconductance, $g_{m}$, in millisiemens (mS), ranging from 0 to 6 mS.\n\nThe graph depicts a curve starting near the origin and rising steeply, indicating that as the overdrive voltage increases, the transconductance also increases. The curve initially has a steep slope, showing a rapid increase in transconductance for small increases in overdrive voltage. This trend continues up to around 0.4 V, where the curve begins to level off, indicating a saturation region where further increases in overdrive voltage result in smaller increases in transconductance.\n\nKey features of the graph include:\n- A steep initial increase in $g_{m}$ as $V_{GS} - V_{TH}$ increases from 0 to about 0.3 V.\n- A transition region from about 0.3 V to 0.4 V where the rate of increase in $g_{m}$ slows.\n- A saturation region beyond 0.4 V where $g_{m}$ approaches a maximum value of just over 5 mS.\n\nThis graph is essential for understanding how changes in overdrive voltage affect the transconductance of a transistor, which is critical for designing circuits requiring specific transconductance values.\n\nFigure 11.11 Dependence of $g_{m}$ on overdrive for $W / L=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ and $V_{D S}=200 \\mathrm{mV}$.\n\nCan we select a higher overdrive voltage in Fig. 11.10? Suppose we choose $V_{G S}-V_{T H}=250 \\mathrm{mV}$, obtaining $I_{D}=200 \\mu \\mathrm{~A}$ for the reference transistor and a transconductance of about 2.3 mS from Fig. 11.11. If scaled up to $12.5 \\mu \\mathrm{~m}$ to carry $500 \\mu \\mathrm{~A}$, the transistor exhibits a transconductance of $2.5 \\times 2.3 \\mathrm{mS}=5.75 \\mathrm{mS}$, a value lower than that observed in the previous case (7.5 mS). This occurs because $g_{m}=2 I_{D} /\\left(V_{G S}-V_{T H}\\right)$ in saturation. To achieve a high transconductance, we typically choose $V_{G S}-V_{T H} \\approx V_{D S, \\text { min }}$ even though it results in a wider transistor.\n\n#### Example 11.4\n\nThe circuit in Fig. 11.12 must be designed for a power budget of 1 mW and a peak-to-peak output voltage swing of 0.8 V. Assuming $L=40 \\mathrm{~nm}$ for $M_{1}$, compute its required width. Can the transistor provide a transconductance of $1 /(50 \\Omega)$?\n\nFigure 11.12 depicts a common-source NMOS amplifier with a drain resistor RD. The NMOS transistor M1 is used for amplification, and the circuit is powered by a 1V supply. The output voltage swing ranges between 0.2V and 1V.\n\nFigure 11.12 also shows a time-domain waveform of the output voltage, \\( V_{out} \\), of a transistor circuit over time. The waveform is a sinusoidal signal with a peak-to-peak voltage swing of 0.8 V, oscillating between 1 V and 0.2 V. The horizontal axis represents time, typically in seconds or a submultiple thereof, while the vertical axis represents the output voltage in volts.\n\nKey features of the graph include:\n- **Graph Type:** Time-domain waveform\n- **Function Type:** Sinusoidal signal\n- **Horizontal Axis:** Time (units not specified, but generally in seconds)\n- **Vertical Axis:** Voltage (in volts)\n- **Voltage Range:** 0.2 V to 1 V\n- **Overall Behavior and Trends:** The waveform displays sinusoidal behavior, indicating periodic oscillations in the output voltage. The amplitude is consistent, suggesting stable operation within the specified voltage range.\n- **Key Features and Technical Details:** \n  - **Peak Voltage:** 1 V\n  - **Minimum Voltage:** 0.2 V\n  - **Peak-to-Peak Voltage Swing:** 0.8 V\n  - The waveform remains within the saturation region of the transistor, as indicated by the context, ensuring \\( M_1 \\) remains in saturation.\n\n#### Solution\n\nThe power budget of 1 mW, combined with $V_{D D}=1 \\mathrm{~V}$, results in a drain bias current of 1 mA. For the circuit to accommodate an output swing of $0.8 \\mathrm{~V}$, $M_{1}$ must remain in saturation as $V_{D S}$ drops to 0.2 V. Referring to the $I_{D}-V_{D S}$ characteristics in Fig. 11.10, we recall that $I_{D, R E F} \\approx 100 \\mu \\mathrm{~A}$ for $V_{D S}=V_{G S}-V_{T H}=200 \\mathrm{mV}$. We must therefore scale $W_{R E F}$ up by a factor of $1 \\mathrm{~mA} / 0.1 \\mathrm{~mA}$, obtaining $W / L=50 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$. The transconductance also increases by this factor, reaching $15 \\mathrm{mS}=1 /(67 \\Omega)$. Note that these results are independent of the value of $R_{D}$.\n\nWe conclude that, if the transistor is designed merely to meet the $I_{D}$ and $V_{D S}$ specifications of this example, it does not necessarily achieve a transconductance of $1 /(50 \\Omega)$.\n\nIn addition to $I_{D}$, $V_{G S}-V_{T H}$, and $g_{m}$, the output impedance of the transistors also becomes important in many analog circuits. As explained in Chapter 17, $r_{O}$ cannot be expressed as $1 /\\left(\\lambda I_{D}\\right)$ for short-channel devices. The value of $r_{O}$ can be estimated from the slope of the $I_{D}$ characteristics in Fig. 11.2, but for convenience and accuracy, we use simulations to plot $r_{O}$ for the reference transistor as a function of $I_{D}$ (Fig. 11.13).\n\nFigure 11.13 illustrates the output resistance \\( r_O \\) of a 5-\\( \\mu \\)m / 40-nm NMOS device as a function of the drain current \\( I_D \\). The x-axis represents the drain current in milliamperes (mA), ranging from 0 to 0.5 mA, while the y-axis represents the output resistance in kilo-ohms (k\\( \\Omega \\)), ranging from 0 to 14 k\\( \\Omega \\).\n\nThe graph shows a downward-sloping curve, indicating that as the drain current increases, the output resistance decreases. The curve starts at an output resistance of approximately 12 k\\( \\Omega \\) when the drain current is near 0 mA and decreases to about 3 k\\( \\Omega \\) as the drain current approaches 0.5 mA.\n\nThe graph is smooth and continuous, with no sharp transitions or discontinuities, suggesting a consistent relationship between the drain current and output resistance over the plotted range. The trend is characterized by a steep decrease in resistance at lower drain currents, gradually leveling off as the current increases.\n\nFigure 11.13 Output resistance of a $5-\\mu \\mathrm{m} / 40-\\mathrm{nm}$ NMOS device as a function of drain current.\n\n#### Example 11.5\n\nDetermine the output resistance of $M_{1}$ in Example 11.4.\n\n#### Solution\n\nIn Example 11.4, the reference transistor carries a current of $100 \\mu \\mathrm{~A}$, exhibiting an output resistance of $8 \\mathrm{k} \\Omega$. Since both the width and the drain current are scaled up by a factor of 10, the output resistance decreases by the same factor, resulting in $800 \\Omega$."
},
{
    "text": "A typical scenario in analog design unfolds as follows. For a specific transistor within the circuit, we select a bias current (often based on a power budget) and a minimum $V_{D S}$ (determined by voltage headroom, i.e., the constraints imposed by the supply voltage and required voltage swings). ${ }^{3}$ Our goal is to determine the transistor's dimensions and transconductance, acknowledging that square-law equations are imprecise. While transistor models can simulate these values, we seek a more systematic and less laborious approach. Our method involves three steps. Let's consider $I_{D}=0.5 \\mathrm{~mA}$ and $V_{D S, \\min }=200 \\mathrm{mV}$ as an example.\n\nStep 1: Choose a \"reference\" transistor with a width $W_{R E F}$ and a length equal to the smallest permissible value, $L_{\\min }$ (e.g., $L_{\\min }=40 \\mathrm{~nm}$). For instance, let $W_{R E F}=5 \\mu \\mathrm{~m}$.\n\nStep 2: Utilize actual device models and a circuit simulator to plot the $I_{D}-V_{D S}$ characteristics of the reference transistor for various $V_{G S}-V_{T H}$ values. In typical analog circuits, $V_{G S}-V_{T H}$ ranges from about 50 mV to 600 mV. We can thus construct the characteristics with the overdrive voltage incremented in steps of $50 \\mathrm{mV}$.^{4} Figure 11.10 illustrates the results for $W_{R E F} / L_{\\text {min }}=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$, with $V_{G S}-V_{T H}$ ranging from 50 mV to 350 mV for clarity.\n\nStep 3: Given our example specifies $I_{D}=0.5 \\mathrm{~mA}$ and $V_{D S, \\min }=200 \\mathrm{mV}$, we draw a vertical line at $V_{D S}=200 \\mathrm{mV}$ (Fig. 11.10) and identify its intersection with the plots. Which plot should we choose? If the device followed the square law, we would select the plot for $V_{G S}-V_{T H}=V_{D S, \\text { min }}=200 \\mathrm{mV}$. However, the short-channel device remains in saturation even for $V_{G S}-V_{T H}=350 \\mathrm{mV}$ at $V_{D S}=200 \\mathrm{mV}$. The situation is more complex, but let's proceed with $V_{G S}-V_{T H}=200 \\mathrm{mV}$ for now.\n\nStep 4: The previous steps have provided, for the reference transistor, one operating point that meets the $V_{D S}$ requirement. The drain current, $I_{D, R E F}$, however, may not be close to the required 0.5 mA in our example. What next? We must scale the transistor's width and, consequently, its drain current. Since in Fig. 11.10, $I_{D, R E F} \\approx 100 \\mu \\mathrm{~A}$, we choose a transistor width of $(500 \\mu \\mathrm{~A} / 100 \\mu \\mathrm{~A}) \\times W_{R E F}=5 W_{R E F}=25 \\mu \\mathrm{~m}$.\n\nWhat is the transconductance of the initial reference transistor? From the plots in Fig. 11.10, we observe that as $V_{G S}-V_{T H}$ increases from 200 mV to 250 mV, $I_{D}$ changes by about 100 µA. Thus, $g_{m} \\approx 100 \\mu \\mathrm{~A} / 50 \\mathrm{mV}=2 \\mathrm{mS}$. Since the change in overdrive is not significantly less than the initial 200 mV, we may seek a more precise $g_{m}$ value. To achieve this, we return to the reference transistor and, using simulations, plot its transconductance as a function of $V_{G S}-V_{T H}$ with $V_{D S}=200 \\mathrm{mV}$. For a square-law device, this plot would be a straight line, $g_{m}=\\mu_{n} C_{o x}\\left(W_{R E F} / L_{\\text {min }}\\right)\\left(V_{G S}-V_{T H}\\right)$, but with short-channel effects, $g_{m}$ eventually saturates. As shown in Fig. 11.11, the result predicts $g_{m}=1.5 \\mathrm{mS}$ for $V_{G S}-V_{T H}=200 \\mathrm{mV}$. If both the width and the drain current are scaled up by a factor of 5, then $g_{m}$ also increases by the same factor (Example 11.2), reaching 7.5 mS. As indicated in Table 11.1, if this transconductance is insufficient, $W / L$ must be further increased.\n\nWith the $I_{D}$ and $g_{m}$ plots for the reference device, we can easily perform scaling to determine the width and transconductance of other transistors in the circuit. The key point is that the $I_{D}$ and $g_{m}$ simulations are conducted only once (for a given channel length) but are applicable to most of our design work.\n\nFigure 11.11 plots transconductance ($g_{m}$) versus overdrive voltage ($V_{GS} - V_{TH}$) for a specific transistor configuration. The x-axis represents the overdrive voltage, $V_{GS} - V_{TH}$, in volts (V), ranging from 0 to 0.6 V. The y-axis represents the transconductance, $g_{m}$, in millisiemens (mS), ranging from 0 to 6 mS.\n\nThe graph shows a curve starting near the origin and rising steeply, indicating that as the overdrive voltage increases, the transconductance also increases. The curve initially has a steep slope, showing a rapid increase in transconductance for small increases in overdrive voltage. This trend continues up to around 0.4 V, where the curve begins to level off, indicating a saturation region where further increases in overdrive voltage result in smaller increases in transconductance.\n\nKey features include:\n- A steep initial increase in $g_{m}$ as $V_{GS} - V_{TH}$ increases from 0 to about 0.3 V.\n- A transition region from about 0.3 V to 0.4 V where the rate of increase in $g_{m}$ slows.\n- A saturation region beyond 0.4 V where $g_{m}$ approaches a maximum value of just over 5 mS.\n\nThis graph is essential for understanding how changes in overdrive voltage affect the transconductance of a transistor, crucial for designing circuits requiring specific transconductance values.\n\nFigure 11.11 shows the dependence of $g_{m}$ on overdrive for $W / L=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ and $V_{D S}=200 \\mathrm{mV}$. Can we choose a higher overdrive voltage in Fig. 11.10? Suppose we select $V_{G S}-V_{T H}=250 \\mathrm{mV}$, obtaining $I_{D}=200 \\mu \\mathrm{~A}$ for the reference transistor and a transconductance of about 2.3 mS from Fig. 11.11. If scaled up to $12.5 \\mu \\mathrm{~m}$ to carry $500 \\mu \\mathrm{~A}$, the transistor exhibits a transconductance of $2.5 \\times 2.3 \\mathrm{mS}=5.75 \\mathrm{mS}$, less than the previous case's 7.5 mS. This occurs because $g_{m}=2 I_{D} /\\left(V_{G S}-V_{T H}\\right)$ in saturation. To achieve high transconductance, we typically choose $V_{G S}-V_{T H} \\approx V_{D S, \\text { min }}$ even though it results in a wider transistor.\n\n#### Example 11.4\n\nThe circuit in Fig. 11.12 must be designed for a power budget of 1 mW and a peak-to-peak output voltage swing of 0.8 V. Assuming $L=40 \\mathrm{~nm}$ for $M_{1}$, compute its required width. Can the transistor provide a transconductance of $1 /(50 \\Omega)$?\n\nFigure 11.12 depicts a common-source NMOS amplifier with a drain resistor RD. The NMOS transistor M1 is used for amplification, and the circuit is powered by a 1V supply. The output voltage swing is between 0.2V and 1V.\n\nFigure 11.12 also shows a time-domain waveform of the output voltage, $V_{out}$, of a transistor circuit over time. The waveform is a sinusoidal signal with a peak-to-peak voltage swing of 0.8 V, oscillating between 1 V and 0.2 V. The horizontal axis represents time, typically in seconds or a submultiple thereof, while the vertical axis represents the output voltage in volts.\n\nKey features include:\n- **Graph Type:** Time-domain waveform\n- **Function Type:** Sinusoidal signal\n- **Horizontal Axis:** Time (units not specified, but generally in seconds)\n- **Vertical Axis:** Voltage (in volts)\n- **Voltage Range:** 0.2 V to 1 V\n- **Overall Behavior and Trends:** The waveform displays sinusoidal behavior, indicating periodic oscillations in the output voltage. The amplitude is consistent, suggesting stable operation within the specified voltage range.\n- **Key Features and Technical Details:** \n  - **Peak Voltage:** 1 V\n  - **Minimum Voltage:** 0.2 V\n  - **Peak-to-Peak Voltage Swing:** 0.8 V\n  - The waveform remains within the saturation region of the transistor, as indicated by the context, ensuring $M_1$ remains in saturation.\n- **Annotations:** Horizontal dashed lines at 1 V and 0.2 V mark the peak and minimum voltage levels, respectively.\n\nThis graph is crucial for analyzing the performance of transistor $M_1$ in maintaining the required output voltage swing while staying within the power budget and saturation region.\n\n#### Solution\n\nThe power budget of 1 mW, combined with $V_{D D}=1 \\mathrm{~V}$, translates to a drain bias current of 1 mA. For the circuit to accommodate an output swing of 0.8 V, $M_{1}$ must remain in saturation as $V_{D S}$ drops to 0.2 V. Referring to the $I_{D}-V_{D S}$ characteristics in Fig. 11.10, we recall that $I_{D, R E F} \\approx 100 \\mu \\mathrm{~A}$ for $V_{D S}=V_{G S}-V_{T H}=200 \\mathrm{mV}$. We must therefore scale $W_{R E F}$ up by a factor of $1 \\mathrm{~mA} / 0.1 \\mathrm{~mA}$, obtaining $W / L=50 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$. The transconductance also scales by this factor, reaching $15 \\mathrm{mS}=1 /(67 \\Omega)$. Note that these results are independent of $R_{D}$.\n\nWe conclude that, if the transistor is designed merely to meet the example's $I_{D}$ and $V_{D S}$ specifications, it does not necessarily achieve a transconductance of $1 /(50 \\Omega)$.\n\nIn addition to $I_{D}, V_{G S}-V_{T H}$, and $g_{m}$, the output impedance of the transistors also becomes important in many analog circuits. As explained in Chapter 17, $r_{O}$ cannot be expressed as $1 /\\left(\\lambda I_{D}\\right)$ for short-channel devices. The value of $r_{O}$ can be estimated from the slope of the $I_{D}$ characteristics in Fig. 11.2, but for convenience and accuracy, we use simulations to plot $r_{O}$ for the reference transistor as a function of $I_{D}$ (Fig. 11.13).\n\nFigure 11.13 illustrates the output resistance, $r_O$, of a 5-\\( \\mu \\)m / 40-nm NMOS device as a function of the drain current, $I_D$. The x-axis represents the drain current in milliamperes (mA), ranging from 0 to 0.5 mA. The y-axis represents the output resistance in kilo-ohms (k\\( \\Omega \\)), ranging from 0 to 14 k\\( \\Omega \\).\n\nThe graph shows a downward-sloping curve, indicating that as the drain current increases, the output resistance decreases. The curve starts at approximately 12 k\\( \\Omega \\) when the drain current is near 0 mA and decreases to about 3 k\\( \\Omega \\) as the drain current approaches 0.5 mA.\n\nThe curve is smooth and continuous, suggesting a consistent relationship between the drain current and output resistance over the plotted range. The trend shows a steep decrease in resistance at lower drain currents, gradually leveling off as the current increases.\n\n#### Example 11.5\n\nDetermine the output resistance of $M_{1}$ in Example 11.4.\n\n#### Solution\n\nIn Example 11.4, the reference transistor carries a current of $100 \\mu \\mathrm{~A}$, exhibiting an output resistance of $8 \\mathrm{k} \\Omega$. Since both the width and the drain current are scaled up by a factor of 10, the output resistance decreases by the same factor, resulting in $800 \\Omega$."
},
{
    "text": "A typical scenario in analog design involves the following. For a specific transistor in the circuit, we select a bias current (perhaps based on a power budget) and a minimum $V_{D S}$ (perhaps determined by the voltage headroom, i.e., the limitations imposed by the supply voltage and required swings). ${ }^{3}$ Our goal is to determine the dimensions and transconductance of the device, acknowledging that the square-law equations are imprecise. While we can use available transistor models and a circuit simulator to obtain these values, we aim for a more systematic and less labor-intensive approach. Our method involves three steps. Consider $I_{D}=0.5 \\mathrm{~mA}$ and $V_{D S, \\min }=200 \\mathrm{mV}$ as an example.\n\nStep 1: Choose a \"reference\" transistor with a width $W_{R E F}$ and a length equal to the minimum allowable value, $L_{\\min }$ (e.g., $L_{\\min }=40 \\mathrm{~nm}$). Let's take $W_{R E F}=5 \\mu \\mathrm{~m}$ as an example.\n\nStep 2: Utilize actual device models and a circuit simulator to plot the $I_{D}-V_{D S}$ characteristics of the reference transistor for various $V_{G S}-V_{T H}$ values. In typical analog circuits, $V_{G S}-V_{T H}$ ranges from approximately 50 mV to 600 mV. We can thus construct the characteristics with the overdrive voltage incremented in steps of $50 \\mathrm{mV}$.^{4} Figure 11.10 illustrates the results for $W_{R E F} / L_{\\min }=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$, with $V_{G S}-V_{T H}$ ranging from 50 mV to 350 mV for clarity.\n\nStep 3: Considering our example specifies $I_{D}=0.5 \\mathrm{~mA}$ and $V_{D S, \\min }=200 \\mathrm{mV}$, we draw a vertical line at $V_{D S}=200 \\mathrm{mV}$ (Fig. 11.10) and identify its intersection with the plots. Which plot should we choose? If the device followed the square law, we would select the plot for $V_{G S}-V_{T H}=V_{D S, \\min }=200 \\mathrm{mV}$. However, the short-channel device remains in saturation even for $V_{G S}-V_{T H}=350 \\mathrm{mV}$ at $V_{D S}=200 \\mathrm{mV}$. The situation is thus more complex, but let's proceed with $V_{G S}-V_{T H}=200 \\mathrm{mV}$ for now.\n\nStep 4: The previous steps have provided, for the reference transistor, one operating point that meets the $V_{D S}$ requirement. The drain current, $I_{D, R E F}$, however, may not be close to the desired value, 0.5 mA in our example. What should we do? We must now scale the transistor's width and hence its drain current. Since in Fig. 11.10, $I_{D, R E F} \\approx 100 \\mu \\mathrm{~A}$, we choose a transistor width of $(500 \\mu \\mathrm{~A} / 100 \\mu \\mathrm{~A}) \\times W_{R E F}=5 W_{R E F}=25 \\mu \\mathrm{~m}$.\n\nWhat is the transconductance of the initial reference transistor? From the plots in Fig. 11.10, we observe that as $V_{G S}-V_{T H}$ increases from 200 mV to 250 mV, $I_{D}$ changes by about 100 µA. Thus, $g_{m} \\approx 100 \\mu \\mathrm{~A} / 50 \\mathrm{mV}=2 \\mathrm{mS}$. Since the change in overdrive is not significantly less than the initial 200 mV, we may seek a more precise value for $g_{m}$. To this end, let's revisit the reference transistor and, using simulations, plot its transconductance as a function of $V_{G S}-V_{T H}$ with $V_{D S}=200 \\mathrm{mV}$. For a square-law device, this plot would be a straight line, $g_{m}=\\mu_{n} C_{o x}\\left(W_{R E F} / L_{\\min }\\right)\\left(V_{G S}-V_{T H}\\right)$, but with short-channel effects, $g_{m}$ eventually saturates. As shown in Fig. 11.11, the result predicts $g_{m}=1.5 \\mathrm{mS}$ for $V_{G S}-V_{T H}=200 \\mathrm{mV}$. Now, if both the width and the drain current are scaled up by a factor of 5, then $g_{m}$ also increases by the same factor (Example 11.2), reaching 7.5 mS. As indicated in Table 11.1, if this transconductance is insufficient, $W / L$ must be further increased.\n\nWith the $I_{D}$ and $g_{m}$ plots for the reference device, we can easily perform scaling to determine the width and transconductance of other transistors in the circuit. The key point is that the $I_{D}$ and $g_{m}$ simulations are done only once (for a given channel length) but serve most of our design needs.\n\nFigure 11.11 shows the transconductance ($g_{m}$) versus overdrive voltage ($V_{G S}-V_{T H}$) for a specific transistor configuration. The x-axis represents the overdrive voltage, $V_{G S}-V_{T H}$, in volts (V), ranging from 0 to 0.6 V. The y-axis represents the transconductance, $g_{m}$, in millisiemens (mS), ranging from 0 to 6 mS.\n\nThe graph displays a curve starting near the origin and rising steeply, indicating that as the overdrive voltage increases, the transconductance also increases. The curve initially has a steep slope, showing a rapid increase in transconductance for small increases in overdrive voltage. This behavior continues up to around 0.4 V, where the curve begins to level off, indicating a saturation region where further increases in overdrive voltage result in smaller increases in transconductance.\n\nKey features of the graph include:\n- A steep initial increase in $g_{m}$ as $V_{G S}-V_{T H}$ increases from 0 to about 0.3 V.\n- A transition region from about 0.3 V to 0.4 V where the rate of increase in $g_{m}$ slows.\n- A saturation region beyond 0.4 V where $g_{m}$ approaches a maximum value of just over 5 mS.\n\nThis graph is essential for understanding how changes in overdrive voltage affect the transconductance of a transistor, which is critical for designing circuits requiring specific transconductance values.\n\nFigure 11.11 Dependence of $g_{m}$ on overdrive for $W / L=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ and $V_{D S}=200 \\mathrm{mV}$.\n\nCan we choose a higher overdrive voltage in Fig. 11.10? Suppose we select $V_{G S}-V_{T H}=250 \\mathrm{mV}$, obtaining $I_{D}=200 \\mu \\mathrm{~A}$ for the reference transistor and a transconductance of about 2.3 mS from Fig. 11.11. If scaled up to $12.5 \\mu \\mathrm{~m}$ to carry $500 \\mu \\mathrm{~A}$, the transistor exhibits a transconductance of $2.5 \\times 2.3 \\mathrm{mS}=5.75 \\mathrm{mS}$, a value lower than that observed in the previous case (7.5 mS). This occurs because $g_{m}=2 I_{D} /\\left(V_{G S}-V_{T H}\\right)$ in saturation. To achieve a high transconductance, we typically choose $V_{G S}-V_{T H} \\approx V_{D S, \\min }$ even though it results in a wider transistor.\n\n#### Example 11.4\n\nThe circuit in Fig. 11.12 must be designed for a power budget of 1 mW and a peak-to-peak output voltage swing of 0.8 V. Assuming $L=40 \\mathrm{~nm}$ for $M_{1}$, calculate its required width. Can the transistor provide a transconductance of $1 /(50 \\Omega)$?\n\nFigure 11.12 depicts a common-source NMOS amplifier with a drain resistor $R_{D}$. The NMOS transistor $M_{1}$ is used for amplification, and the circuit is powered by a 1V supply. The output voltage swing ranges between 0.2V and 1V.\n\nThe graph in Figure 11.12 is a time-domain waveform showing the output voltage, $V_{out}$, of a transistor circuit over time. The waveform is sinusoidal with a peak-to-peak voltage swing of 0.8 V, oscillating between 1 V and 0.2 V. The horizontal axis represents time, typically in seconds or a submultiple thereof, while the vertical axis represents the output voltage in volts.\n\n- **Graph Type:** Time-domain waveform\n- **Function Type:** Sinusoidal signal\n\nAxes Labels and Units:\n- **Horizontal Axis:** Time (units not specified, but generally in seconds)\n- **Vertical Axis:** Voltage (in volts)\n- **Voltage Range:** 0.2 V to 1 V\n\nOverall Behavior and Trends:\n- The waveform exhibits sinusoidal behavior, indicating periodic oscillations in the output voltage.\n- The amplitude of the waveform is consistent, suggesting stable operation within the specified voltage range.\n\nKey Features and Technical Details:\n- **Peak Voltage:** 1 V\n- **Minimum Voltage:** 0.2 V\n- **Peak-to-Peak Voltage Swing:** 0.8 V\n- The waveform remains within the saturation region of the transistor, as indicated by the context, ensuring $M_{1}$ remains in saturation.\n\nAnnotations and Specific Data Points:\n- The waveform is annotated with horizontal dashed lines at 1 V and 0.2 V, marking the peak and minimum voltage levels, respectively.\n\nThis graph is crucial for analyzing the performance of transistor $M_{1}$ in maintaining the required output voltage swing while staying within the power budget and saturation region.\n\n#### Solution\n\nThe power budget of 1 mW, combined with $V_{D D}=1 \\mathrm{~V}$, results in a drain bias current of 1 mA. For the circuit to accommodate an output swing of 0.8 V, $M_{1}$ must remain in saturation as $V_{D S}$ drops to 0.2 V. Returning to the $I_{D}-V_{D S}$ characteristics of Fig. 11.10, we recall that $I_{D, R E F} \\approx 100 \\mu \\mathrm{~A}$ for $V_{D S}=V_{G S}-V_{T H}=200 \\mathrm{mV}$. We must therefore scale $W_{R E F}$ up by a factor of $1 \\mathrm{~mA} / 0.1 \\mathrm{~mA}$, obtaining $W / L=50 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$. The transconductance is also multiplied by this factor, reaching $15 \\mathrm{mS}=1 /(67 \\Omega)$. Note that these results are independent of $R_{D}$.\n\nWe conclude that, if the transistor is designed merely to meet this example's $I_{D}$ and $V_{D S}$ specifications, it does not necessarily achieve a transconductance of $1 /(50 \\Omega)$.\n\nIn addition to $I_{D}$, $V_{G S}-V_{T H}$, and $g_{m}$, the output impedance of the transistors also becomes important in many analog circuits. As explained in Chapter 17, $r_{O}$ cannot be expressed as $1 /\\left(\\lambda I_{D}\\right)$ for short-channel devices. The value of $r_{O}$ can be estimated from the slope of the $I_{D}$ characteristics in Fig. 11.2, but for convenience and accuracy, we use simulations to plot $r_{O}$ for the reference transistor as a function of $I_{D}$ (Fig. 11.13).\n\nFigure 11.13 illustrates the output resistance, $r_{O}$, of a 5-\\( \\mu \\)m / 40-nm NMOS device as a function of the drain current, $I_{D}$. The x-axis represents the drain current in milliamperes (mA), ranging from 0 to 0.5 mA, while the y-axis represents the output resistance in kilo-ohms (k\\( \\Omega \\)), ranging from 0 to 14 k\\( \\Omega \\).\n\nThe graph shows a downward-sloping curve, indicating that as the drain current increases, the output resistance decreases. The curve starts at an output resistance of approximately 12 k\\( \\Omega \\) when the drain current is near 0 mA and decreases to about 3 k\\( \\Omega \\) as the drain current approaches 0.5 mA.\n\nThe graph features a smooth, continuous curve with no sharp transitions or discontinuities, suggesting a consistent relationship between the drain current and output resistance over the range of values plotted. The trend is characterized by a steep decrease in resistance at lower drain currents, gradually leveling off as the current increases.\n\nFigure 11.13 Output resistance of a $5-\\mu \\mathrm{m} / 40-\\mathrm{nm}$ NMOS device as a function of drain current.\n\n#### Example 11.5\n\nDetermine the output resistance of $M_{1}$ in Example 11.4.\n\n#### Solution\n\nIn Example 11.4, the reference transistor carries a current of $100 \\mu \\mathrm{~A}$, exhibiting an output resistance of $8 \\mathrm{k} \\Omega$. Since both the width and the drain current are scaled up by a factor of 10, the output resistance decreases by the same factor, resulting in $800 \\Omega$."
},
{
    "text": "A frequent scenario in analog design unfolds as follows. For a specific transistor within the circuit, we select a bias current (often based on a power budget) and a minimum $V_{DS}$ (usually determined by the voltage headroom, i.e., the constraints imposed by the supply voltage and required signal swings). ${ }^{3}$ Our objective is then to ascertain the dimensions and transconductance of the device, acknowledging that the square-law equations are imprecise. While transistor models can be used to simulate the device and obtain these values, we aim for a more systematic and less tedious approach. Our method involves three steps. Consider $I_{D}=0.5 \\mathrm{~mA}$ and $V_{DS, \\min }=200 \\mathrm{mV}$ as an illustrative example.\n\nStep 1 Choose a \"reference\" transistor with a width $W_{REF}$ and a length equal to the smallest permissible value, $L_{\\min }$ (e.g., $L_{\\min }=40 \\mathrm{~nm}$). Let's take $W_{REF}=5 \\mu \\mathrm{~m}$ as an example.\n\nStep 2 Utilize actual device models and a circuit simulator to plot the $I_{D}-V_{DS}$ characteristics of the reference transistor for various $V_{GS}-V_{TH}$ values. In typical analog circuits, $V_{GS}-V_{TH}$ ranges from approximately 50 mV to 600 mV. Consequently, we can construct the characteristics with the overdrive voltage incremented in steps of $50 \\mathrm{mV}$.^{4} Figure 11.10 displays the results for $W_{REF} / L_{\\min }=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$, with $V_{GS}-V_{TH}$ ranging from 50 mV to 350 mV for clarity.\n\nStep 3 Considering our example specifies $I_{D}=0.5 \\mathrm{~mA}$ and $V_{DS, \\min }=200 \\mathrm{mV}$, we draw a vertical line at $V_{DS}=200 \\mathrm{mV}$ (Fig. 11.10) and locate its intersection with the plots. Which plot should we choose? If the device adhered to the square law, we would select the plot for $V_{GS}-V_{TH}=V_{DS, \\text { min }}=200 \\mathrm{mV}$. However, the short-channel device remains in saturation even for $V_{GS}-V_{TH}=350 \\mathrm{mV}$ at $V_{DS}=200 \\mathrm{mV}$. The situation is thus more intricate, but let's proceed with $V_{GS}-V_{TH}=200 \\mathrm{mV}$ for now.\n\nStep 4 The preceding steps have identified, for the reference transistor, one operating point that meets the $V_{DS}$ requirement. The drain current, $I_{D, REF}$, however, may not be close to the desired value, 0.5 mA in our case. What should we do? We must now scale the transistor's width and, consequently, its drain current. Since in Fig. 11.10, $I_{D, REF} \\approx 100 \\mu \\mathrm{~A}$, we select a transistor width of $(500 \\mu \\mathrm{~A} / 100 \\mu \\mathrm{~A}) \\times W_{REF}=5 W_{REF}=25 \\mu \\mathrm{~m}$.\n\nWhat is the transconductance of the initial reference transistor? From the plots in Fig. 11.10, we observe that as $V_{GS}-V_{TH}$ increases from 200 mV to 250 mV, $I_{D}$ changes by roughly $100 \\mu \\mathrm{~A}$. Thus, $g_{m} \\approx 100 \\mu \\mathrm{~A} / 50 \\mathrm{mV}=2 \\mathrm{mS}$. Since the change in overdrive is not significantly less than the initial 200 mV, we might seek a more precise value for $g_{m}$. To this end, let's revisit the reference transistor and, using simulations, plot its transconductance as a function of $V_{GS}-V_{TH}$ with $V_{DS}=200 \\mathrm{mV}$. For a square-law device, this plot would be a straight line, $g_{m}=\\mu_{n} C_{ox}\\left(W_{REF} / L_{\\min }\\right)\\left(V_{GS}-V_{TH}\\right)$, but with short-channel effects, $g_{m}$ eventually saturates. As shown in Fig. 11.11, the result predicts $g_{m}=1.5 \\mathrm{mS}$ for $V_{GS}-V_{TH}=200 \\mathrm{mV}$. Now, if both the width and the drain current are scaled up by a factor of 5, then $g_{m}$ also increases by the same factor (Example 11.2), reaching 7.5 mS. As indicated in Table 11.1, if this transconductance is inadequate, $W / L$ must be further increased.\n\nWith the $I_{D}$ and $g_{m}$ plots for the reference device, we can easily perform scaling to determine the width and transconductance of other transistors in the circuit. The crucial point here is that the $I_{D}$ and $g_{m}$ simulations are conducted only once (for a given channel length) but are applicable to most of our design work.\n\nFigure 11.11 illustrates the transconductance ($g_{m}$) versus overdrive voltage ($V_{GS}-V_{TH}$) for a specific transistor configuration. The x-axis represents the overdrive voltage, $V_{GS}-V_{TH}$, in volts (V), ranging from 0 to 0.6 V. The y-axis represents the transconductance, $g_{m}$, in millisiemens (mS), ranging from 0 to 6 mS.\n\nThe graph reveals a curve that starts near the origin and rises steeply, indicating that as the overdrive voltage increases, the transconductance also increases. The curve initially has a steep slope, showing a rapid increase in transconductance for small increases in overdrive voltage. This trend continues until around 0.4 V, where the curve begins to flatten, indicating a saturation region where further increases in overdrive voltage result in smaller increases in transconductance.\n\nKey features of the graph include:\n- A steep initial increase in $g_{m}$ as $V_{GS}-V_{TH}$ increases from 0 to about 0.3 V.\n- A transition region from about 0.3 V to 0.4 V where the rate of increase in $g_{m}$ begins to slow.\n- A saturation region beyond 0.4 V where $g_{m}$ approaches a maximum value of just over 5 mS.\n\nThis graph is significant for understanding how changes in overdrive voltage affect the transconductance of a transistor, which is crucial for designing circuits requiring specific transconductance values.\n\nFigure 11.11 shows the dependence of $g_{m}$ on overdrive for $W / L=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ and $V_{DS}=200 \\mathrm{mV}$.\nCan we choose a higher overdrive voltage in Fig. 11.10? Suppose we select $V_{GS}-V_{TH}=250 \\mathrm{mV}$, obtaining $I_{D}=200 \\mu \\mathrm{~A}$ for the reference transistor and a transconductance of about 2.3 mS from Fig. 11.11. If scaled up to $12.5 \\mu \\mathrm{~m}$ to carry $500 \\mu \\mathrm{~A}$, the transistor exhibits a transconductance of $2.5 \\times 2.3 \\mathrm{mS}=5.75 \\mathrm{mS}$, a value lower than that observed in the previous case (7.5 mS). This occurs because $g_{m}=2 I_{D} /\\left(V_{GS}-V_{TH}\\right)$ in saturation. To achieve a high transconductance, we typically choose $V_{GS}-V_{TH} \\approx V_{DS, \\text { min }}$ even though it results in a wider transistor.\n\n#### Example 11.4\n\nThe circuit shown in Fig. 11.12 must be designed for a power budget of 1 mW and a peak-to-peak output voltage swing of 0.8 V. Assuming $L=40 \\mathrm{~nm}$ for $M_{1}$, compute its required width. Can the transistor provide a transconductance of $1 /(50 \\Omega)$?\n\nFigure 11.12 depicts a common-source NMOS amplifier with a drain resistor $R_{D}$. The NMOS transistor $M_{1}$ is used for amplification, and the circuit is powered by a 1V supply. The output voltage swing ranges from 0.2V to 1V.\n\nThe graph in Figure 11.12 is a time-domain waveform showing the output voltage, $V_{out}$, of a transistor circuit over time. The waveform is sinusoidal with a peak-to-peak voltage swing of 0.8 V, oscillating between 1 V and 0.2 V. The horizontal axis represents time, typically in seconds or a submultiple thereof, while the vertical axis represents the output voltage in volts.\n\nKey features of the graph include:\n- **Graph Type:** Time-domain waveform\n- **Function Type:** Sinusoidal signal\n- **Horizontal Axis:** Time (units not specified, but generally in seconds)\n- **Vertical Axis:** Voltage (in volts)\n- **Voltage Range:** 0.2 V to 1 V\n- **Overall Behavior and Trends:** The waveform exhibits sinusoidal behavior, indicating periodic oscillations in the output voltage. The amplitude is consistent, suggesting stable operation within the specified voltage range.\n- **Key Features and Technical Details:** \n  - **Peak Voltage:** 1 V\n  - **Minimum Voltage:** 0.2 V\n  - **Peak-to-Peak Voltage Swing:** 0.8 V\n  - The waveform remains within the saturation region of the transistor, as indicated by the context, ensuring $M_{1}$ remains in saturation.\n- **Annotations and Specific Data Points:** The waveform is annotated with horizontal dashed lines at 1 V and 0.2 V, marking the peak and minimum voltage levels, respectively.\n\nThis graph is crucial for analyzing the performance of the transistor $M_{1}$ in maintaining the required output voltage swing while staying within the power budget and saturation region.\n\n#### Solution\n\nThe power budget, combined with $V_{DD}=1 \\mathrm{~V}$, results in a drain bias current of 1 mA. For the circuit to accommodate an output swing of $0.8 \\mathrm{~V}$, $M_{1}$ must remain in saturation as $V_{DS}$ drops to 0.2 V. Referring to the $I_{D}-V_{DS}$ characteristics of Fig. 11.10, we recall that $I_{D, REF} \\approx 100 \\mu \\mathrm{~A}$ for $V_{DS}=V_{GS}-V_{TH}=200 \\mathrm{mV}$. We must therefore scale $W_{REF}$ up by a factor of $1 \\mathrm{~mA} / 0.1 \\mathrm{~mA}$, obtaining $W / L=50 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$. The transconductance is also multiplied by this factor, reaching $15 \\mathrm{mS}=1 /(67 \\Omega)$. Note that these results are independent of the value of $R_{D}$.\n\nWe conclude that, if the transistor is designed merely to meet the $I_{D}$ and $V_{DS}$ specifications of this example, it does not necessarily achieve a transconductance of $1 /(50 \\Omega)$.\n\nIn addition to $I_{D}$, $V_{GS}-V_{TH}$, and $g_{m}$, the output impedance of the transistors also becomes important in many analog circuits. As explained in Chapter 17, $r_{O}$ cannot be expressed as $1 /\\left(\\lambda I_{D}\\right)$ for short-channel devices. The value of $r_{O}$ can be estimated from the slope of the $I_{D}$ characteristics in Fig. 11.2, but for convenience and accuracy, we use simulations to plot $r_{O}$ for the reference transistor as a function of $I_{D}$ (Fig. 11.13).\n\nFigure 11.13 is a graph showing the output resistance $r_{O}$ of a $5-\\mu \\mathrm{m} / 40-\\mathrm{nm}$ NMOS device as a function of the drain current $I_{D}$. The x-axis represents the drain current in milliamperes (mA), ranging from 0 to 0.5 mA. The y-axis represents the output resistance in kilo-ohms (k$\\Omega$), ranging from 0 to 14 k$\\Omega$.\n\nThe graph displays a downward-sloping curve, indicating that as the drain current $I_{D}$ increases, the output resistance $r_{O}$ decreases. The curve starts at an output resistance of approximately 12 k$\\Omega$ when the drain current is near 0 mA and decreases to about 3 k$\\Omega$ as the drain current approaches 0.5 mA.\n\nThe graph features a smooth, continuous curve with no sharp transitions or discontinuities, suggesting a consistent relationship between the drain current and output resistance over the range of values plotted. The trend is characterized by a steep decrease in resistance at lower drain currents, gradually leveling off as the current increases.\n\nFigure 11.13 Output resistance of a $5-\\mu \\mathrm{m} / 40-\\mathrm{nm}$ NMOS device as a function of drain current.\n\n#### Example 11.5\n\nDetermine the output resistance of $M_{1}$ in Example 11.4.\n\n#### Solution\n\nThe reference transistor in Example 11.4 carries a current of $100 \\mu \\mathrm{~A}$, exhibiting an output resistance of $8 \\mathrm{k} \\Omega$. Since both the width and the drain current are scaled up by a factor of 10, the output resistance drops by the same factor, resulting in $800 \\Omega$."
},
{
    "text": "In numerous analog circuits, a specific transistor must deliver adequate transconductance while consuming minimal power. We start with a defined transconductance, $g_{m 1}$, and a maximum limit for the drain bias current, $I_{D 1}$, and seek the corresponding values of $W / L$ and $V_{G S}-V_{T H}$. In this section, we assume $g_{m 1}=10 \\mathrm{mS}$ and $I_{D 1}=1 \\mathrm{~mA}$. Initially, we must determine if $g_{m 1}$ can be achieved with $I_{D} \\leq I_{D 1}$. The highest $g_{m}$ occurs in the subthreshold region (if $W / L$ is large) and is given by $I_{D} /\\left(\\xi V_{T}\\right)$, where $\\xi \\approx 1.5$ (Chapter 2). For instance, if $I_{D}=1 \\mathrm{~mA}$, then $g_{m}$ cannot exceed 26 mS at room temperature.\n\nSince in our example, $g_{m 1}<I_{D 1} /\\left(\\xi V_{T}\\right)$, we can proceed with the transistor design. Readers are advised to first review Example 11.3 thoroughly.\n\nStep 1: Using simulations, we plot $g_{m}$ as a function of $I_{D}$ for a reference transistor, e.g., with $W_{R E F} / L_{\\text {min }}=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ (Fig. 11.14).\nStep 2: We locate the point $\\left(I_{D 1}, g_{m 1}\\right)$ on the $g_{m}-I_{D}$ plane and draw a line through the origin and this point, obtaining the intersection at $\\left(I_{D, R E F}, g_{m, R E F}\\right)=(240 \\mu \\mathrm{~A}, 2.4 \\mathrm{mS})$ and a corresponding overdrive.\n\nStep 3: We multiply $W_{R E F}$ by $g_{m 1} / g_{m, R E F}=4.2$ to move along the straight line to point $\\left(I_{D 1}, g_{m 1}\\right)$ while maintaining the same overdrive (Example 11.3). This finalizes the transistor design.\n\nThis process raises two questions. First, does the line passing through the origin and $\\left(I_{D 1}, g_{m 1}\\right)$ always intersect the $g_{m}-I_{D}$ plot? For a square-law device in strong inversion, $g_{m}=\\sqrt{2 \\mu_{n} C_{o x}(W / L) I_{D}}$ has an infinite slope at the origin, ensuring an intersection point. In the subthreshold region, however, $g_{m} \\propto I_{D}$ (Fig. 11.15), meaning the $\\left(I_{D}, g_{m}\\right)$ combinations in the gray region are unattainable.\n\nThe second question is, what if $\\left(V_{G S}-V_{T H}\\right)_{R E F}$ is too large? As per Table 11.1, we must then increase $W$ further, but by what factor? Suppose, as depicted in Fig. 11.16, a lower overdrive of $\\left(V_{G S}-V_{T H}\\right)_{2}<\\left(V_{G S}-V_{T H}\\right)_{R E F}$ is desired. We then determine the corresponding current, $I_{D 2}$, and transconductance, $g_{m 2}$, on the $g_{m}-I_{D}$ plane. Next, we draw a line through the origin and the point ($I_{D 2}$, $g_{m 2}$) and extend it to $I_{D}=I_{D 1}$, i.e., we multiply $W_{R E F}$ by $I_{D 1} / I_{D 2}$. This new width ensures an overdrive of $\\left(V_{G S}-V_{T H}\\right)_{2}$ at a drain current of $I_{D 1}$ and provides a transconductance of at least $g_{m 1}$. The new transconductance, $g_{m 1}^{\\prime}$, will inevitably be higher because the width has been increased beyond $g_{m 1} / g_{m, R E F}\\left(=I_{D 1} / I_{D, R E F}\\right)$."
},
{
    "text": "In numerous analog circuits, a specific transistor must deliver adequate transconductance while consuming minimal power. We start with a defined transconductance, $g_{m 1}$, and an upper limit for the drain bias current, $I_{D 1}$, to find the corresponding values of $W / L$ and $V_{G S}-V_{T H}$. In this section, we assume $g_{m 1}=10 \\mathrm{mS}$ and $I_{D 1}=1 \\mathrm{~mA}$. Initially, we must determine if $g_{m 1}$ can be achieved with $I_{D} \\leq I_{D 1}$. The maximum $g_{m}$ occurs in the subthreshold region (if $W / L$ is large) and is expressed as $I_{D} /\\left(\\xi V_{T}\\right)$, where $\\xi \\approx 1.5$ (Chapter 2). For instance, if $I_{D}=1 \\mathrm{~mA}$, then $g_{m}$ cannot exceed 26 mS at room temperature.\n\nSince $g_{m 1}<I_{D 1} /\\left(\\xi V_{T}\\right)$ in our example, we can proceed with the transistor design. Readers are advised to first review Example 11.3 thoroughly.\n\nStep 1: Using simulations, we plot $g_{m}$ against $I_{D}$ for a reference transistor, e.g., with $W_{R E F} / L_{\\text {min }}=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ (Fig. 11.14).\nStep 2: We locate the point $\\left(I_{D 1}, g_{m 1}\\right)$ on the $g_{m}-I_{D}$ plane and draw a line from the origin through this point, intersecting at $\\left(I_{D, R E F}, g_{m, R E F}\\right)=(240 \\mu \\mathrm{~A}, 2.4 \\mathrm{mS})$ with a corresponding overdrive.\n\nStep 3: We multiply $W_{R E F}$ by $g_{m 1} / g_{m, R E F}=4.2$ to move along the straight line to point $\\left(I_{D 1}, g_{m 1}\\right)$ while maintaining the same overdrive (Example 11.3). This finalizes the transistor design.\n\nThis process raises two questions. First, does the line through the origin and $\\left(I_{D 1}, g_{m 1}\\right)$ always intersect the $g_{m}-I_{D}$ plot? For a square-law device in strong inversion, $g_{m}=\\sqrt{2 \\mu_{n} C_{o x}(W / L) I_{D}}$ has an infinite slope at the origin, ensuring an intersection. In the subthreshold region, however, $g_{m} \\propto I_{D}$ (Fig. 11.15), meaning the $\\left(I_{D}, g_{m}\\right)$ combinations in the gray region are unattainable.\n\nThe second question is, what if $\\left(V_{G S}-V_{T H}\\right)_{R E F}$ is too large? As per Table 11.1, we must then further increase $W$, but by what factor? Suppose, as depicted in Fig. 11.16, a lower overdrive of $\\left(V_{G S}-V_{T H}\\right)_{2}<\\left(V_{G S}-V_{T H}\\right)_{R E F}$ is desired. We then determine the corresponding $I_{D 2}$ and $g_{m 2}$ on the $g_{m}-I_{D}$ plane. Next, we draw a line from the origin to the point $\\left(I_{D 2}, g_{m 2}\\right)$ and extend it to $I_{D}=I_{D 1}$, effectively multiplying $W_{R E F}$ by $I_{D 1} / I_{D 2}$. This new width ensures an overdrive of $\\left(V_{G S}-V_{T H}\\right)_{2}$ at $I_{D 1}$ and provides a transconductance of at least $g_{m 1}$. The new transconductance, $g_{m 1}^{\\prime}$, will inevitably be higher due to the increased width beyond $g_{m 1} / g_{m, R E F}\\left(=I_{D 1} / I_{D, R E F}\\right)$."
},
{
    "text": "In numerous analog circuits, a specific transistor must deliver adequate transconductance while consuming minimal power. We start by defining a target transconductance, $g_{m 1}$, and an upper limit for the drain bias current, $I_{D 1}$, and then seek the corresponding values of $W / L$ and $V_{G S}-V_{T H}$. In this section, we assume $g_{m 1}=10 \\mathrm{mS}$ and $I_{D 1}=1 \\mathrm{~mA}$. Initially, we must ascertain whether $g_{m 1}$ can be achieved with $I_{D} \\leq I_{D 1}$. The maximum $g_{m}$ occurs in the subthreshold region (if $W / L$ is large) and is given by $I_{D} /\\left(\\xi V_{T}\\right)$, where $\\xi \\approx 1.5$ (Chapter 2). For instance, if $I_{D}=1 \\mathrm{~mA}$, then $g_{m}$ cannot exceed 26 mS at room temperature.\n\nSince $g_{m 1}<I_{D 1} /\\left(\\xi V_{T}\\right)$ in our example, we can proceed with the transistor design. Readers are advised to first review Example 11.3 thoroughly.\n\nStep 1: Using simulations, we plot $g_{m}$ versus $I_{D}$ for a reference transistor, e.g., with $W_{R E F} / L_{\\text {min }}=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ (Fig. 11.14).\nStep 2: We locate the point $\\left(I_{D 1}, g_{m 1}\\right)$ on the $g_{m}-I_{D}$ plane and draw a line from the origin through this point, intersecting at $\\left(I_{D, R E F}, g_{m, R E F}\\right)=(240 \\mu \\mathrm{~A}, 2.4 \\mathrm{mS})$ and determining the corresponding overdrive.\n\nStep 3: We multiply $W_{R E F}$ by $g_{m 1} / g_{m, R E F}=4.2$ to move along the straight line to point $\\left(I_{D 1}, g_{m 1}\\right)$ while maintaining the same overdrive (Example 11.3). This finalizes the transistor design.\n\nThis process raises two questions. First, does the line from the origin through $\\left(I_{D 1}, g_{m 1}\\right)$ always intersect the $g_{m}-I_{D}$ plot? For a square-law device in strong inversion, $g_{m}=\\sqrt{2 \\mu_{n} C_{o x}(W / L) I_{D}}$ has an infinite slope at the origin, ensuring an intersection. In the subthreshold region, however, $g_{m} \\propto I_{D}$ (Fig. 11.15), meaning the $\\left(I_{D}, g_{m}\\right)$ combinations in the gray region are unattainable.\n\nThe second question is, what if $\\left(V_{G S}-V_{T H}\\right)_{R E F}$ is too large? As per Table 11.1, we must then further increase $W$, but by how much? Suppose, as depicted in Fig. 11.16, a lower overdrive of $\\left(V_{G S}-V_{T H}\\right)_{2}<\\left(V_{G S}-V_{T H}\\right)_{R E F}$ is desired. We then determine the corresponding $I_{D 2}$ and $g_{m 2}$ on the $g_{m}-I_{D}$ plane. Next, we draw a line from the origin through the point ($I_{D 2}$, $g_{m 2}$) and extend it to $I_{D}=I_{D 1}$, effectively multiplying $W_{R E F}$ by $I_{D 1} / I_{D 2}$. This new width ensures an overdrive of $\\left(V_{G S}-V_{T H}\\right)_{2}$ at $I_{D 1}$ and provides a transconductance of at least $g_{m 1}$. The new transconductance, $g_{m 1}^{\\prime}$, will inevitably be higher due to the increased width beyond $g_{m 1} / g_{m, R E F}\\left(=I_{D 1} / I_{D, R E F}\\right)$."
},
{
    "text": "In numerous analog circuits, a specific transistor must deliver adequate transconductance while consuming minimal power. We start with a defined transconductance, $g_{m 1}$, and a maximum limit for the drain bias current, $I_{D 1}$, and seek the corresponding values of $W / L$ and $V_{G S}-V_{T H}$. In this section, we assume $g_{m 1}=10 \\mathrm{mS}$ and $I_{D 1}=1 \\mathrm{~mA}$. Initially, we must determine if $g_{m 1}$ can be achieved at all with $I_{D} \\leq I_{D 1}$. The highest $g_{m}$ occurs in the subthreshold region (if $W / L$ is large) and is given by $I_{D} /\\left(\\xi V_{T}\\right)$, where $\\xi \\approx 1.5$ (Chapter 2). For instance, if $I_{D}=1 \\mathrm{~mA}$, then $g_{m}$ cannot exceed 26 mS at room temperature.\n\nSince in our example, $g_{m 1}<I_{D 1} /\\left(\\xi V_{T}\\right)$, we can proceed with designing the transistor. Readers are advised to first review Example 11.3 thoroughly.\n\nStep 1 Using simulations, we plot $g_{m}$ as a function of $I_{D}$ for a reference transistor, e.g., with $W_{R E F} / L_{\\text {min }}=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ (Fig. 11.14).\nStep 2 We locate the point $\\left(I_{D 1}, g_{m 1}\\right)$ on the $g_{m}-I_{D}$ plane and draw a line through the origin and this point, obtaining the intersection at $\\left(I_{D, R E F}, g_{m, R E F}\\right)=(240 \\mu \\mathrm{~A}, 2.4 \\mathrm{mS})$ and a corresponding overdrive.\n\nStep 3 We multiply $W_{R E F}$ by $g_{m 1} / g_{m, R E F}=4.2$ to move along the straight line to point $\\left(I_{D 1}, g_{m 1}\\right)$ while maintaining the same overdrive (Example 11.3). This finalizes the transistor design.\n\nThis process raises two questions. First, does the straight line passing through the origin and $\\left(I_{D 1}, g_{m 1}\\right)$ always intersect the $g_{m}-I_{D}$ plot? If we consider a square-law device in strong inversion, then $g_{m}=\\sqrt{2 \\mu_{n} C_{o x}(W / L) I_{D}}$ has an infinite slope at the origin, ensuring an intersection point. In the\nimage_name:Figure 11.14 Transconductance as a function of $I_{D}$ for $W / L=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$.\ndescription:The graph titled 'Figure 11.14 Transconductance as a function of I_D' illustrates the relationship between the transconductance \\( g_m \\) and the drain current \\( I_D \\) for a MOSFET device.\n\n**Type of Graph and Function:**\nThis is a linear plot showing a characteristic curve of a MOSFET device.\n\n**Axes Labels and Units:**\n- The horizontal axis represents the drain current \\( I_D \\), measured in milliamperes (mA), ranging from 0 to 0.5 mA.\n- The vertical axis represents the transconductance \\( g_m \\), measured in millisiemens (mS), ranging from 0 to 4 mS.\n\n**Overall Behavior and Trends:**\nThe graph displays a curve starting at the origin (0,0) and rising with increasing \\( I_D \\). Initially, the curve climbs steeply, indicating a rapid increase in \\( g_m \\) with small increments in \\( I_D \\). As \\( I_D \\) increases further, the curve's slope decreases, indicating a trend towards saturation.\n\n**Key Features and Technical Details:**\n- At low \\( I_D \\) values, the curve is steep, showing high sensitivity of \\( g_m \\) to changes in \\( I_D \\).\n- As \\( I_D \\) nears 0.3 mA, the curve starts to flatten, suggesting the onset of saturation.\n- The graph includes a straight line intersecting the curve, representing a specific design point or operating condition.\n\n**Annotations and Specific Data Points:**\n- A notable intersection point is around \\( I_D = 0.3 \\) mA and \\( g_m = 2.5 \\) mS, which may represent a typical operating condition.\n- The graph features dashed grid lines for easy reading of specific values.\n\nimage_name:Figure 11.15 Unachievable g_m region\ndescription:Figure 11.15 shows a plot of transconductance \\( g_m \\) versus drain current \\( I_D \\). The axes are labeled with \\( g_m \\) on the vertical axis and \\( I_D \\) on the horizontal axis. The plot is divided into two main regions: weak inversion and strong inversion, typical transistor operating conditions.\n\n**Axes Labels and Units:**\n- The vertical axis represents transconductance \\( g_m \\), likely in millisiemens (mS), though the unit is not specified.\n- The horizontal axis represents drain current \\( I_D \\), likely in milliamperes (mA), though the unit is not specified.\n\n**Overall Behavior and Trends:**\n- The graph shows a curve starting at the origin and increasing with \\( I_D \\).\n- In the weak inversion region, the curve has a steep slope, indicating a proportional relationship between \\( g_m \\) and \\( I_D \\).\n- As the curve moves into the strong inversion region, the slope decreases, suggesting a less direct relationship.\n\n**Key Features and Technical Details:**\n- A dashed line extends from the origin upwards, marking the boundary between weak and strong inversion regions.\n- The curve intersects this dashed line at a point labeled \\( I_{D1} \\), indicating the transition from weak to strong inversion.\n- A shaded gray region above the curve in the weak inversion area denotes an unachievable \\( g_m \\) region.\n\n**Annotations and Specific Data Points:**\n- The graph is labeled with weak and strong inversion regions.\n- The intersection point at \\( I_{D1} \\) is marked, highlighting the transition.\n- A horizontal dashed line labeled \\( g_{m1} \\) intersects the curve in the strong inversion region, representing a specific transconductance value.\n\nThis graph effectively depicts the relationship between \\( g_m \\) and \\( I_D \\) across different operating regions of a transistor, emphasizing the transition from weak to strong inversion and the unachievable \\( g_m \\) values in the gray region.\n\nsubthreshold region, however, $g_{m} \\propto I_{D}$ (Fig. 11.15), meaning that the $\\left(I_{D}, g_{m}\\right)$ combinations in the gray region are unattainable.\n\nThe second question is, what if $\\left(V_{G S}-V_{T H}\\right)_{R E F}$ is too large? As indicated in Table 11.1, we must then further increase $W$, but by what factor? Suppose, as shown in Fig. 11.16, a smaller overdrive of $\\left(V_{G S}-V_{T H}\\right)_{2}<\\left(V_{G S}-V_{T H}\\right)_{R E F}$ is desired. We then determine the corresponding current, $I_{D 2}$, and transconductance, $g_{m 2}$, on the $g_{m}-I_{D}$ plane. Next, we draw a line through the origin and the point ( $I_{D 2}$, $g_{m 2}$ ) and extend it to $I_{D}=I_{D 1}$, i.e., we multiply $W_{R E F}$ by $I_{D 1} / I_{D 2}$. This new width ensures an overdrive of $\\left(V_{G S}-V_{T H}\\right)_{2}$ at a drain current of $I_{D 1}$ and provides a transconductance of at least $g_{m 1}$. The resulting transconductance, $g_{m 1}^{\\prime}$, is necessarily higher because the width has been increased beyond $g_{m 1} / g_{m, R E F}\\left(=I_{D 1} / I_{D, R E F}\\right)$."
},
{
    "text": "In numerous analog circuits, a specific transistor must deliver adequate transconductance while consuming minimal power. We start with a predefined transconductance, $g_{m 1}$, and an upper limit for the drain bias current, $I_{D 1}$, aiming to find the corresponding values of $W / L$ and $V_{G S}-V_{T H}$. In this section, we assume $g_{m 1}=10 \\mathrm{mS}$ and $I_{D 1}=1 \\mathrm{~mA}$. Initially, we must determine if $g_{m 1}$ can be achieved with $I_{D} \\leq I_{D 1}$. The maximum $g_{m}$ occurs in the subthreshold region (if $W / L$ is large) and is expressed as $I_{D} /\\left(\\xi V_{T}\\right)$, where $\\xi \\approx 1.5$ (Chapter 2). For instance, if $I_{D}=1 \\mathrm{~mA}$, $g_{m}$ cannot exceed 26 mS at room temperature.\n\nSince in our example, $g_{m 1}<I_{D 1} /\\left(\\xi V_{T}\\right)$, we can proceed with the transistor design. Readers are advised to first review Example 11.3 thoroughly.\n\nStep 1: Using simulations, we plot $g_{m}$ versus $I_{D}$ for a reference transistor, e.g., with $W_{R E F} / L_{\\text {min }}=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ (Fig. 11.14).\nStep 2: We locate the point $\\left(I_{D 1}, g_{m 1}\\right)$ on the $g_{m}-I_{D}$ plane and draw a line through the origin and this point, finding the intersection at $\\left(I_{D, R E F}, g_{m, R E F}\\right)=(240 \\mu \\mathrm{~A}, 2.4 \\mathrm{mS})$ and the corresponding overdrive.\n\nStep 3: We multiply $W_{R E F}$ by $g_{m 1} / g_{m, R E F}=4.2$ to move along the straight line to point $\\left(I_{D 1}, g_{m 1}\\right)$ while maintaining the same overdrive (Example 11.3). This finalizes the transistor design.\n\nThis process raises two questions. First, does the line passing through the origin and $\\left(I_{D 1}, g_{m 1}\\right)$ always intersect the $g_{m}-I_{D}$ plot? For a square-law device in strong inversion, $g_{m}=\\sqrt{2 \\mu_{n} C_{o x}(W / L) I_{D}}$ has an infinite slope at the origin, ensuring an intersection point. In the\nimage_name:Figure 11.14 Transconductance as a function of $I_{D}$ for $W / L=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$.\ndescription:The graph titled 'Figure 11.14 Transconductance as a function of I_D' illustrates the relationship between transconductance \\( g_m \\) and drain current \\( I_D \\) for a MOSFET device.\n\n**Type of Graph and Function:**\nThis is a linear plot showing the characteristic curve of a MOSFET device.\n\n**Axes Labels and Units:**\n- The horizontal axis represents the drain current \\( I_D \\), measured in milliamperes (mA), ranging from 0 to 0.5 mA.\n- The vertical axis represents the transconductance \\( g_m \\), measured in millisiemens (mS), ranging from 0 to 4 mS.\n\n**Overall Behavior and Trends:**\nThe curve starts at the origin (0,0) and rises with increasing \\( I_D \\). Initially, the curve steeply climbs, indicating a rapid increase in \\( g_m \\) with small increases in \\( I_D \\). As \\( I_D \\) increases further, the curve's slope decreases, indicating a trend towards saturation.\n\n**Key Features and Technical Details:**\n- At low \\( I_D \\) values, the curve is steep, showing high sensitivity of \\( g_m \\) to \\( I_D \\) changes.\n- Near \\( I_D = 0.3 \\) mA, the curve begins to flatten, indicating the start of saturation.\n- The graph includes a straight line intersecting the curve, representing a specific design or operating point.\n\n**Annotations and Specific Data Points:**\n- A notable intersection point is around \\( I_D = 0.3 \\) mA and \\( g_m = 2.5 \\) mS, marking a typical operating condition.\n- The graph features dashed grid lines for easy reading of specific axis values.\n\nimage_name:Figure 11.15 Unachievable g_m region\ndescription:Figure 11.15 depicts the transconductance \\( g_m \\) as a function of drain current \\( I_D \\). The axes are labeled with \\( g_m \\) on the vertical axis and \\( I_D \\) on the horizontal axis. The plot is divided into weak inversion and strong inversion regions, typical transistor operating conditions.\n\n**Axes Labels and Units:**\n- The vertical axis represents transconductance \\( g_m \\), likely in millisiemens (mS), though units are not specified.\n- The horizontal axis represents drain current \\( I_D \\), likely in milliamperes (mA), though units are not specified.\n\n**Overall Behavior and Trends:**\n- The curve starts at the origin and increases with \\( I_D \\).\n- In the weak inversion region, the curve initially has a steep slope, indicating a direct relationship between \\( g_m \\) and \\( I_D \\).\n- As the curve moves into the strong inversion region, the slope decreases, suggesting a less direct relationship.\n\n**Key Features and Technical Details:**\n- A dashed line extends from the origin upwards, marking the boundary between weak and strong inversion regions.\n- The curve intersects this dashed line at \\( I_{D1} \\), indicating the transition from weak to strong inversion.\n- A shaded gray region above the curve in the weak inversion area represents unachievable \\( g_m \\) values.\n\n**Annotations and Specific Data Points:**\n- Labels for weak and strong inversion regions are provided.\n- The intersection point at \\( I_{D1} \\) is marked, highlighting the transition.\n- A horizontal dashed line labeled \\( g_{m1} \\) intersects the curve in the strong inversion region, representing a specific transconductance value.\n\nThis graph effectively shows the relationship between \\( g_m \\) and \\( I_D \\) across different operating regions, emphasizing the transition from weak to strong inversion and the unachievable \\( g_m \\) values in the gray region.\n\nsubthreshold region, $g_{m} \\propto I_{D}$ (Fig. 11.15), meaning that $\\left(I_{D}, g_{m}\\right)$ combinations in the gray region are unattainable.\n\nThe second question is, what if $\\left(V_{G S}-V_{T H}\\right)_{R E F}$ is too large? As per Table 11.1, we must then further increase $W$, but by how much? Suppose, as shown in Fig. 11.16, a smaller overdrive of $\\left(V_{G S}-V_{T H}\\right)_{2}<\\left(V_{G S}-V_{T H}\\right)_{R E F}$ is desired. We then determine the corresponding current, $I_{D 2}$, and transconductance, $g_{m 2}$, on the $g_{m}-I_{D}$ plane. Next, we draw a line through the origin and the point ($I_{D 2}$, $g_{m 2}$) and extend it to $I_{D}=I_{D 1}$, i.e., we multiply $W_{R E F}$ by $I_{D 1} / I_{D 2}$. This new width ensures an overdrive of $\\left(V_{G S}-V_{T H}\\right)_{2}$ at a drain current of $I_{D 1}$ and provides a transconductance of at least $g_{m 1}$. The resulting transconductance, $g_{m 1}^{\\prime}$, will inevitably be higher due to the increased width beyond $g_{m 1} / g_{m, R E F}\\left(=I_{D 1} / I_{D, R E F}\\right)$."
},
{
    "text": "In numerous analog circuits, a transistor must deliver adequate transconductance while consuming minimal power. We start with a defined transconductance, $g_{m 1}$, and a maximum limit for the drain bias current, $I_{D 1}$, aiming to find the corresponding values of $W / L$ and $V_{G S}-V_{T H}$. For this section, we assume $g_{m 1}=10 \\mathrm{mS}$ and $I_{D 1}=1 \\mathrm{~mA}$. Initially, we must ascertain whether $g_{m 1}$ can be achieved with $I_{D} \\leq I_{D 1}$. The highest $g_{m}$ occurs in the subthreshold region (if $W / L$ is large) and is expressed as $I_{D} /\\left(\\xi V_{T}\\right)$, where $\\xi \\approx 1.5$ (Chapter 2). For instance, if $I_{D}=1 \\mathrm{~mA}$, then $g_{m}$ cannot surpass 26 mS at room temperature.\n\nGiven that in our example, $g_{m 1}<I_{D 1} /\\left(\\xi V_{T}\\right)$, we can proceed with the transistor design. Readers are advised to first review Example 11.3 thoroughly.\n\nStep 1: Using simulations, we plot $g_{m}$ against $I_{D}$ for a reference transistor, such as one with $W_{R E F} / L_{\\text {min }}=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ (Fig. 11.14).\nStep 2: We locate the point $\\left(I_{D 1}, g_{m 1}\\right)$ on the $g_{m}-I_{D}$ plane and draw a line from the origin through this point, finding the intersection at $\\left(I_{D, R E F}, g_{m, R E F}\\right)=(240 \\mu \\mathrm{~A}, 2.4 \\mathrm{mS})$ and the corresponding overdrive.\n\nStep 3: We multiply $W_{R E F}$ by $g_{m 1} / g_{m, R E F}=4.2$ to move along the straight line to point $\\left(I_{D 1}, g_{m 1}\\right)$ while preserving the same overdrive (Example 11.3). This finalizes the transistor design.\n\nThis method raises two questions. First, does the line passing through the origin and $\\left(I_{D 1}, g_{m 1}\\right)$ always intersect the $g_{m}-I_{D}$ plot? For a square-law device in strong inversion, $g_{m}=\\sqrt{2 \\mu_{n} C_{o x}(W / L) I_{D}}$ has an infinite slope at the origin, ensuring an intersection point. In the subthreshold region, however, $g_{m} \\propto I_{D}$ (Fig. 11.15), meaning the $\\left(I_{D}, g_{m}\\right)$ combinations in the gray region are unattainable.\n\nThe second question is, what if $\\left(V_{G S}-V_{T H}\\right)_{R E F}$ is too high? As per Table 11.1, we must then further increase $W$, but by what factor? Suppose, as depicted in Fig. 11.16, a lower overdrive of $\\left(V_{G S}-V_{T H}\\right)_{2}<\\left(V_{G S}-V_{T H}\\right)_{R E F}$ is desired. We then determine the corresponding current, $I_{D 2}$, and transconductance, $g_{m 2}$, on the $g_{m}-I_{D}$ plane. Next, we draw a line through the origin and the point ($I_{D 2}$, $g_{m 2}$) and extend it to $I_{D}=I_{D 1}$, effectively multiplying $W_{R E F}$ by $I_{D 1} / I_{D 2}$. This new width ensures an overdrive of $\\left(V_{G S}-V_{T H}\\right)_{2}$ at a drain current of $I_{D 1}$ and provides a transconductance of at least $g_{m 1}$. The resulting transconductance, $g_{m 1}^{\\prime}$, will inevitably be higher due to the increased width beyond $g_{m 1} / g_{m, R E F}\\left(=I_{D 1} / I_{D, R E F}\\right)$."
},
{
    "text": "In numerous analog circuits, a specific transistor must deliver adequate transconductance while consuming minimal power. We start with a predefined transconductance, $g_{m 1}$, and a maximum limit for the drain bias current, $I_{D 1}$, and seek the corresponding values of $W / L$ and $V_{G S}-V_{T H}$. In this section, we assume $g_{m 1}=10 \\mathrm{mS}$ and $I_{D 1}=1 \\mathrm{~mA}$. Initially, we must determine if $g_{m 1}$ can be achieved with $I_{D} \\leq I_{D 1}$. The highest $g_{m}$ occurs in the subthreshold region (if $W / L$ is large) and is given by $I_{D} /\\left(\\xi V_{T}\\right)$, where $\\xi \\approx 1.5$ (Chapter 2). For instance, if $I_{D}=1 \\mathrm{~mA}$, then $g_{m}$ cannot exceed 26 mS at room temperature.\n\nSince in our example, $g_{m 1}<I_{D 1} /\\left(\\xi V_{T}\\right)$, we can proceed with the transistor design. Readers are advised to first review Example 11.3 thoroughly.\n\nStep 1 Using simulations, we plot $g_{m}$ as a function of $I_{D}$ for a reference transistor, e.g., with $W_{R E F} / L_{\\text {min }}=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ (Fig. 11.14).\nStep 2 We locate the point $\\left(I_{D 1}, g_{m 1}\\right)$ on the $g_{m}-I_{D}$ plane and draw a line through the origin and this point, obtaining the intersection at $\\left(I_{D, R E F}, g_{m, R E F}\\right)=(240 \\mu \\mathrm{~A}, 2.4 \\mathrm{mS})$ and a corresponding overdrive.\n\nStep 3 We multiply $W_{R E F}$ by $g_{m 1} / g_{m, R E F}=4.2$ to move along the straight line to point $\\left(I_{D 1}, g_{m 1}\\right)$ while maintaining the same overdrive (Example 11.3). This finalizes the transistor design.\n\nThis process raises two questions. First, does the line passing through the origin and $\\left(I_{D 1}, g_{m 1}\\right)$ always intersect the $g_{m}-I_{D}$ plot? For a square-law device in strong inversion, $g_{m}=\\sqrt{2 \\mu_{n} C_{o x}(W / L) I_{D}}$ has an infinite slope at the origin, ensuring an intersection point. In the\nimage_name:Figure 11.14 Transconductance as a function of $I_{D}$ for $W / L=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$.\ndescription:The graph titled 'Figure 11.14 Transconductance as a function of I_D' illustrates the relationship between the transconductance \\( g_m \\) and the drain current \\( I_D \\) for a MOSFET device.\n\n**Type of Graph and Function:**\nThis is a linear plot showing the characteristic curve of a MOSFET device.\n\n**Axes Labels and Units:**\n- The horizontal axis represents the drain current \\( I_D \\), measured in milliamperes (mA), ranging from 0 to 0.5 mA.\n- The vertical axis represents the transconductance \\( g_m \\), measured in millisiemens (mS), ranging from 0 to 4 mS.\n\n**Overall Behavior and Trends:**\nThe curve starts at the origin (0,0) and rises with increasing \\( I_D \\). Initially, the curve increases steeply, indicating a significant rise in \\( g_m \\) with small increases in \\( I_D \\). As \\( I_D \\) increases further, the slope decreases, indicating a trend towards saturation.\n\n**Key Features and Technical Details:**\n- At low \\( I_D \\) values, the curve is steep, showing high sensitivity of \\( g_m \\) to changes in \\( I_D \\).\n- As \\( I_D \\) approaches 0.3 mA, the curve flattens, suggesting the onset of saturation.\n- A straight line intersects the curve, representing a specific design point or operating condition.\n\n**Annotations and Specific Data Points:**\n- A notable intersection point is around \\( I_D = 0.3 \\) mA and \\( g_m = 2.5 \\) mS, which may represent a typical operating condition.\n- The graph includes dashed grid lines for easy reading of specific values.\n\nimage_name:Figure 11.15 Unachievable g_m region\ndescription:Figure 11.15 depicts the transconductance \\( g_m \\) as a function of drain current \\( I_D \\). The axes are labeled with \\( g_m \\) on the vertical axis and \\( I_D \\) on the horizontal axis. The plot is divided into two main regions: weak inversion and strong inversion, typical transistor operating conditions.\n\n**Axes Labels and Units:**\n- The vertical axis represents transconductance \\( g_m \\), likely in millisiemens (mS), though the unit is not specified.\n- The horizontal axis represents drain current \\( I_D \\), likely in milliamperes (mA), though the unit is not specified.\n\n**Overall Behavior and Trends:**\n- The curve starts at the origin and increases with \\( I_D \\).\n- In the weak inversion region, the curve has a steep slope, indicating a direct relationship between \\( g_m \\) and \\( I_D \\).\n- In the strong inversion region, the slope decreases, suggesting a less direct relationship.\n\n**Key Features and Technical Details:**\n- A dashed line extends from the origin upwards, marking the boundary between weak and strong inversion regions.\n- The curve intersects this line at \\( I_{D1} \\), indicating the transition from weak to strong inversion.\n- A shaded gray region above the curve in the weak inversion area represents unachievable \\( g_m \\) values.\n\n**Annotations and Specific Data Points:**\n- Labels for weak and strong inversion regions are provided.\n- The intersection point at \\( I_{D1} \\) is marked, highlighting the transition.\n- A horizontal dashed line labeled \\( g_{m1} \\) intersects the curve in the strong inversion region.\n\nThis graph effectively shows the relationship between \\( g_m \\) and \\( I_D \\) across different operating regions, emphasizing the transition from weak to strong inversion and the unachievable \\( g_m \\) values in the gray region.\n\nsubthreshold region, however, $g_{m} \\propto I_{D}$ (Fig. 11.15), meaning that the $\\left(I_{D}, g_{m}\\right)$ combinations in the gray region are unattainable.\n\nThe second question is, what if $\\left(V_{G S}-V_{T H}\\right)_{R E F}$ is too large? As per Table 11.1, we must then increase $W$ further, but by how much? Suppose, as shown in Fig. 11.16, a lower overdrive of $\\left(V_{G S}-V_{T H}\\right)_{2}<\\left(V_{G S}-V_{T H}\\right)_{R E F}$ is desired. We then determine the corresponding current, $I_{D 2}$, and transconductance, $g_{m 2}$, on the $g_{m}-I_{D}$ plane. Next, we draw a line through the origin and the point ( $I_{D 2}$, $g_{m 2}$ ) and extend it to $I_{D}=I_{D 1}$, i.e., we multiply $W_{R E F}$ by $I_{D 1} / I_{D 2}$. This new width ensures an overdrive of $\\left(V_{G S}-V_{T H}\\right)_{2}$ at a drain current of $I_{D 1}$ and provides a transconductance of at least $g_{m 1}$. The new transconductance, $g_{m 1}^{\\prime}$, will inevitably be higher because the width has been increased beyond $g_{m 1} / g_{m, R E F}\\left(=I_{D 1} / I_{D, R E F}\\right)$."
},
{
    "text": "In numerous analog circuits, a specific transistor must deliver adequate transconductance while consuming minimal power. We start with a defined transconductance, $g_{m 1}$, and an upper limit for the drain bias current, $I_{D 1}$, to determine the corresponding values of $W / L$ and $V_{G S}-V_{T H}$. In this section, we assume $g_{m 1}=10 \\mathrm{mS}$ and $I_{D 1}=1 \\mathrm{~mA}$. Initially, we must ascertain if $g_{m 1}$ can be achieved with $I_{D} \\leq I_{D 1}$. The maximum $g_{m}$ occurs in the subthreshold region (if $W / L$ is large) and is expressed as $I_{D} /\\left(\\xi V_{T}\\right)$, where $\\xi \\approx 1.5$ (Chapter 2). For instance, if $I_{D}=1 \\mathrm{~mA}$, $g_{m}$ cannot exceed 26 mS at room temperature.\n\nSince $g_{m 1}<I_{D 1} /\\left(\\xi V_{T}\\right)$ in our example, we can proceed with the transistor design. Readers are advised to first review Example 11.3 thoroughly.\n\nStep 1: Using simulations, we plot $g_{m}$ versus $I_{D}$ for a reference transistor, e.g., with $W_{R E F} / L_{\\text {min }}=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ (Fig. 11.14).\nStep 2: We locate the point $\\left(I_{D 1}, g_{m 1}\\right)$ on the $g_{m}-I_{D}$ plane and draw a line through the origin and this point, finding the intersection at $\\left(I_{D, R E F}, g_{m, R E F}\\right)=(240 \\mu \\mathrm{~A}, 2.4 \\mathrm{mS})$ and the corresponding overdrive.\n\nStep 3: We multiply $W_{R E F}$ by $g_{m 1} / g_{m, R E F}=4.2$ to move along the straight line to point $\\left(I_{D 1}, g_{m 1}\\right)$ while maintaining the same overdrive (Example 11.3). This finalizes the transistor design.\n\nThis procedure raises two questions. First, does the line through the origin and $\\left(I_{D 1}, g_{m 1}\\right)$ always intersect the $g_{m}-I_{D}$ plot? For a square-law device in strong inversion, $g_{m}=\\sqrt{2 \\mu_{n} C_{o x}(W / L) I_{D}}$ has an infinite slope at the origin, ensuring an intersection. In the\nimage_name: Figure 11.14 Transconductance as a function of $I_{D}$ for $W / L=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$.\ndescription: The graph titled 'Figure 11.14 Transconductance as a function of I_D' illustrates the relationship between transconductance \\( g_m \\) and drain current \\( I_D \\) for a MOSFET device.\n\n**Graph Type and Function:**\nThis is a linear plot showing a characteristic curve of a MOSFET device.\n\n**Axes Labels and Units:**\n- The horizontal axis represents the drain current \\( I_D \\), measured in milliamperes (mA), ranging from 0 to 0.5 mA.\n- The vertical axis represents the transconductance \\( g_m \\), measured in millisiemens (mS), ranging from 0 to 4 mS.\n\n**Behavior and Trends:**\nThe curve starts at the origin (0,0) and rises with increasing \\( I_D \\). Initially, the curve rises steeply, indicating a significant increase in \\( g_m \\) with small \\( I_D \\) increases. As \\( I_D \\) increases further, the curve's slope decreases, indicating a trend towards saturation.\n\n**Key Features and Technical Details:**\n- At low \\( I_D \\) values, the curve is steep, showing high \\( g_m \\) sensitivity to \\( I_D \\) changes.\n- Near \\( I_D = 0.3 \\) mA, the curve flattens, suggesting saturation onset.\n- A straight line intersects the curve, representing a specific design or operating point.\n\n**Annotations and Data Points:**\n- A notable intersection point is around \\( I_D = 0.3 \\) mA and \\( g_m = 2.5 \\) mS, possibly a typical operating condition.\n- The graph includes dashed grid lines for easy value reading.\n\nimage_name: Figure 11.15 Unachievable g_m region\ndescription: Figure 11.15 plots transconductance \\( g_m \\) against drain current \\( I_D \\). The axes are labeled with \\( g_m \\) on the vertical axis and \\( I_D \\) on the horizontal axis, divided into weak and strong inversion regions.\n\n**Axes Labels and Units:**\n- The vertical axis represents transconductance \\( g_m \\), likely in millisiemens (mS), though units are not specified.\n- The horizontal axis represents drain current \\( I_D \\), likely in milliamperes (mA), though units are not specified.\n\n**Behavior and Trends:**\n- The curve starts at the origin and increases with \\( I_D \\).\n- In the weak inversion region, the curve has a steep slope, indicating a proportional relationship between \\( g_m \\) and \\( I_D \\).\n- In the strong inversion region, the slope decreases, suggesting a less direct relationship.\n\n**Key Features and Technical Details:**\n- A dashed line from the origin upwards marks the boundary between weak and strong inversion regions.\n- The curve intersects this line at \\( I_{D1} \\), indicating the transition point.\n- A shaded gray area above the curve in the weak inversion region indicates unachievable \\( g_m \\) values.\n\n**Annotations and Data Points:**\n- Labels for weak and strong inversion regions are provided.\n- The intersection at \\( I_{D1} \\) is marked, highlighting the transition.\n- A horizontal dashed line labeled \\( g_{m1} \\) intersects the curve in the strong inversion region.\n\nThis graph effectively shows the \\( g_m \\) and \\( I_D \\) relationship across different operating regions, emphasizing the transition from weak to strong inversion and the unachievable \\( g_m \\) values in the gray region.\n\nsubthreshold region, however, $g_{m} \\propto I_{D}$ (Fig. 11.15), meaning the $\\left(I_{D}, g_{m}\\right)$ combinations in the gray region are unattainable.\n\nThe second question is, what if $\\left(V_{G S}-V_{T H}\\right)_{R E F}$ is excessively large? As per Table 11.1, we must then further increase $W$, but by how much? Suppose, as depicted in Fig. 11.16, a lower overdrive of $\\left(V_{G S}-V_{T H}\\right)_{2}<\\left(V_{G S}-V_{T H}\\right)_{R E F}$ is desired. We then determine the corresponding current, $I_{D 2}$, and transconductance, $g_{m 2}$, on the $g_{m}-I_{D}$ plane. Next, we draw a line through the origin and the point ($I_{D 2}$, $g_{m 2}$) and extend it to $I_{D}=I_{D 1}$, i.e., we multiply $W_{R E F}$ by $I_{D 1} / I_{D 2}$. This new width ensures an overdrive of $\\left(V_{G S}-V_{T H}\\right)_{2}$ at a drain current of $I_{D 1}$ and provides a transconductance of at least $g_{m 1}$. The new transconductance, $g_{m 1}^{\\prime}$, will inevitably be higher due to the increased width beyond $g_{m 1} / g_{m, R E F}\\left(=I_{D 1} / I_{D, R E F}\\right)$."
},
{
    "text": "In certain designs, the transconductance is determined by specific performance criteria (such as voltage gain and noise), while the minimum $V_{D S}$ is set by the voltage headroom, without explicitly defining $I_{D}$. Naturally, every circuit eventually encounters a power budget, imposing an upper limit on its bias current(s).\n\nThe process for achieving a transconductance of $g_{m 1}$ at $V_{D S, \\min }$ is outlined as follows.\nStep 1: We employ simulations to chart $g_{m}$ as a function of $V_{G S}-V_{T H}$ for the reference transistor (Fig. 11.17). Next, we choose $\\left(V_{G S}-V_{T H}\\right)_{1}=V_{D S, \\min }$ and determine the corresponding transconductance, $g_{m, R E F}$. It is beneficial to also plot $I_{D}$ on the same graph and identify $I_{D, R E F}$ at $\\left(V_{G S}-V_{T H}\\right)_{1}$.\nimage_name:Figure 11.16 Modification of transistor design for a lower overdrive.\ndescription:Figure 11.16 depicts a graph illustrating the relationship between transconductance \\( g_m \\) and overdrive voltage \\( V_{GS} - V_{TH} \\) for a reference transistor. This two-dimensional plot features the following characteristics:\n\n1. **Axes Labels and Units:**\n- The horizontal axis denotes the overdrive voltage \\( V_{GS} - V_{TH} \\).\n- The vertical axis represents the transconductance \\( g_m \\).\n- Both axes are marked with reference points, but specific units are not provided.\n\n2. **Overall Behavior and Trends:**\n- The graph displays a curve that initially rises with increasing \\( V_{GS} - V_{TH} \\), indicating a rise in \\( g_m \\).\n- The curve exhibits a gentle slope, suggesting a non-linear relationship.\n- A peak point is observed on the curve, beyond which \\( g_m \\) decreases with further increases in \\( V_{GS} - V_{TH} \\).\n\n3. **Key Features and Technical Details:**\n- Several significant points are marked: \\((V_{GS} - V_{TH})_{REF}\\) and \\((V_{GS} - V_{TH})_2\\), corresponding to specific overdrive voltages.\n- Corresponding transconductance values \\( g_{m,REF} \\), \\( g_{m1} \\), \\( g_{m2} \\), and \\( g'_{m1} \\) are indicated by horizontal dashed lines.\n- Current values \\( I_{D,REF} \\), \\( I_{D1} \\), and \\( I_{D2} \\) are noted on the horizontal axis, aligned with their respective transconductance values.\n\n4. **Annotations and Specific Data Points:**\n- The point \\((I_{D1}, g_{m1})\\) is highlighted, signifying a specific operating condition.\n- Dotted lines connect these critical points to the axes, visually depicting the relationships between \\( V_{GS} - V_{TH} \\), \\( g_m \\), and \\( I_D \\).\n- The graph aids in determining the necessary transistor width scaling to achieve a desired \\( g_{m1} \\) from a reference \\( g_{m,REF} \\).\n\nimage_name:Figure 11.17 Calculation of $g_{m, R E F}$ for a given overdrive.\ndescription:Figure 11.17 is a graph used to demonstrate the modification of transistor design for attaining a lower overdrive voltage. This two-dimensional plot features the x-axis representing \\( V_{GS} - V_{TH} \\) and the y-axis depicting both transconductance \\( g_m \\) and drain current \\( I_D \\).\n\nAxes and Units:\n- **X-axis**: Labeled as \\( V_{GS} - V_{TH} \\), indicating the overdrive voltage, extending linearly to the right.\n- **Y-axis**: Represents two parameters:\n- **Upper part**: \\( g_m \\), with a reference level \\( g_{m,REF} \\) marked by a dotted horizontal line.\n- **Lower part**: \\( I_D \\), with a reference level \\( I_{D,REF} \\) also marked by a dotted horizontal line.\n\nOverall Behavior and Trends:\n- The graph presents two distinct curves:\n- **Transconductance Curve (Upper)**: Starts from the origin and increases linearly, showing \\( g_m \\) rising with \\( V_{GS} - V_{TH} \\).\n- **Drain Current Curve (Lower)**: Begins at the origin and decreases, indicating \\( I_D \\) declines as \\( V_{GS} - V_{TH} \\) increases.\n\nKey Features and Technical Details:\n- **Dotted Lines**: Horizontal dotted lines mark the reference values \\( g_{m,REF} \\) and \\( I_{D,REF} \\), crucial for understanding the scaling needed for the desired \\( g_{m1} \\).\n- **Intersection Points**: These lines intersect the y-axis, highlighting reference values for \\( g_m \\) and \\( I_D \\).\n- **Critical Point**: The graph emphasizes a specific point \\((V_{GS} - V_{TH})_1\\) on the x-axis, connected by vertical dotted lines to the curves, indicating the operating condition for the desired \\( g_{m1} \\).\n\nAnnotations and Specific Data Points:\n- The graph serves as a visual aid for scaling the transistor width to achieve a desired \\( g_{m1} \\) from a reference \\( g_{m,REF} \\), understanding that \\( I_D \\) will scale similarly. This is vital for designing transistors with specific electrical properties.\n\nStep 2: To attain the required transconductance, $g_{m 1}$, we scale the transistor width by a factor of $g_{m 1} / g_{m, R E F}$. Note that $I_{D}$ also scales by this factor.\n\nThese steps finalize the design. However, if the resulting $I_{D}$ is excessively high, we can revert to Case II in Sec. 11.4.2 and redesign for a specified $g_{m}$ and $I_{D}$. The device then becomes wider with a reduced transconductance.\n\nAs demonstrated in this section, we have highlighted the overdrive voltage (or $V_{D, s a t}$) as a critical parameter in our device design. This is due to the heightened challenge of headroom posed by today's low supply voltages."
},
{
    "text": "In certain designs, the transconductance is determined by specific performance criteria (such as voltage gain and noise) and the minimum $V_{D S}$ by the available voltage headroom, without explicitly defining $I_{D}$. Naturally, every circuit eventually encounters a power constraint, imposing an upper limit on its bias current(s).\n\nThe process for achieving a transconductance of $g_{m 1}$ at $V_{D S, \\min }$ involves the following steps:\nStep 1: We employ simulations to chart the $g_{m}$ as a function of $V_{G S}-V_{T H}$ for the reference transistor (refer to Fig. 11.17). Next, we choose $\\left(V_{G S}-V_{T H}\\right)_{1}=V_{D S, \\min }$ and determine the corresponding transconductance, $g_{m, R E F}$. It is beneficial to also plot $I_{D}$ on the same graph and identify $I_{D, R E F}$ at $\\left(V_{G S}-V_{T H}\\right)_{1}$.\nimage_name:Figure 11.16 Modification of transistor design for a lower overdrive.\ndescription:Figure 11.16 presents a graph depicting the relationship between transconductance \\( g_m \\) and overdrive voltage \\( V_{GS} - V_{TH} \\) for a reference transistor. This two-dimensional plot includes:\n\n1. **Axes Labels and Units:**\n- The horizontal axis depicts the overdrive voltage \\( V_{GS} - V_{TH} \\).\n- The vertical axis shows the transconductance \\( g_m \\).\n- Both axes are marked with reference points, though specific units are not provided.\n\n2. **Overall Behavior and Trends:**\n- The graph illustrates a curve that initially rises with increasing \\( V_{GS} - V_{TH} \\), indicating a rise in \\( g_m \\).\n- The curve has a gentle slope, suggesting a non-linear relationship.\n- A peak point is observed on the curve, after which \\( g_m \\) decreases with further increases in \\( V_{GS} - V_{TH} \\).\n\n3. **Key Features and Technical Details:**\n- Several significant points are marked: \\((V_{GS} - V_{TH})_{REF}\\) and \\((V_{GS} - V_{TH})_2\\), corresponding to specific overdrive voltages.\n- Corresponding \\( g_{m,REF} \\), \\( g_{m1} \\), \\( g_{m2} \\), and \\( g'_{m1} \\) values are indicated by horizontal dashed lines.\n- Current values \\( I_{D,REF} \\), \\( I_{D1} \\), and \\( I_{D2} \\) are noted on the horizontal axis, aligning with respective transconductance values.\n\n4. **Annotations and Specific Data Points:**\n- The point \\((I_{D1}, g_{m1})\\) is highlighted, signifying a specific operating condition.\n- Dotted lines link these critical points to the axes, visually guiding the relationships between \\( V_{GS} - V_{TH} \\), \\( g_m \\), and \\( I_D \\).\n- The graph aids in determining the necessary transistor width scaling to achieve a desired \\( g_{m1} \\) from a reference \\( g_{m,REF} \\).\n\nimage_name:Figure 11.17 Calculation of $g_{m, R E F}$ for a given overdrive.\ndescription:Figure 11.16 is utilized to demonstrate the modification of transistor design for a lower overdrive voltage. This two-dimensional graph features:\n- **X-axis**: Labeled as \\( V_{GS} - V_{TH} \\), representing the overdrive voltage, extending linearly to the right.\n- **Y-axis**: Displays two parameters:\n- **Upper part**: \\( g_m \\), the transconductance, with a reference level \\( g_{m,REF} \\) marked by a dotted horizontal line.\n- **Lower part**: \\( I_D \\), the drain current, with a reference level \\( I_{D,REF} \\) also indicated by a dotted horizontal line.\n\nOverall Behavior and Trends:\n- The graph includes two distinct curves:\n- **Transconductance Curve (Upper)**: Starts from the origin and rises linearly, indicating \\( g_m \\) increases with \\( V_{GS} - V_{TH} \\).\n- **Drain Current Curve (Lower)**: Begins at the origin and decreases, suggesting \\( I_D \\) reduces as \\( V_{GS} - V_{TH} \\) increases.\n\nKey Features and Technical Details:\n- **Dotted Lines**: Horizontal dotted lines denote reference values \\( g_{m,REF} \\) and \\( I_{D,REF} \\), crucial for understanding scaling requirements.\n- **Intersection Points**: Dotted lines intersect the y-axis, marking reference values for \\( g_m \\) and \\( I_D \\).\n- **Critical Point**: The graph highlights a specific point \\((V_{GS} - V_{TH})_1\\) on the x-axis, connected by vertical dotted lines to the curves, indicating the operating condition for the desired \\( g_{m1} \\).\n\nAnnotations and Specific Data Points:\n- The graph serves as a visual aid for scaling transistor width to achieve a desired \\( g_{m1} \\) from a reference \\( g_{m,REF} \\), with \\( I_D \\) scaling similarly. This is essential for designing transistors with specific electrical characteristics.\n\nStep 2: To attain the required transconductance, $g_{m 1}$, we scale the transistor width by a factor of $g_{m 1} / g_{m, R E F}$. Note that $I_{D}$ also scales by this factor.\n\nThese steps finalize the design. However, if the resulting $I_{D}$ is excessively high, we can revert to Case II in Sec. 11.4.2 and redesign for a specified $g_{m}$ and $I_{D}$. The device will then be wider but have a lower transconductance.\n\nAs demonstrated in this section, we have emphasized the overdrive voltage (or $V_{D, s a t}$) as a critical parameter in device design. This is due to the heightened challenge of headroom posed by today's low supply voltages."
},
{
    "text": "In certain designs, the transconductance is determined by specific performance criteria (such as voltage gain and noise) and the minimum $V_{D S}$ by the available voltage headroom, without explicitly specifying $I_{D}$. Naturally, each circuit must adhere to a power budget, which imposes an upper limit on its bias current(s).\n\nThe process for achieving a transconductance of $g_{m 1}$ at $V_{D S, \\min }$ is outlined below.\nStep 1: We employ simulations to chart the $g_{m}$ as a function of $V_{G S}-V_{T H}$ for the reference transistor (Fig. 11.17). Next, we choose $\\left(V_{G S}-V_{T H}\\right)_{1}=V_{D S, \\min }$ and determine the corresponding transconductance, $g_{m, R E F}$. It is beneficial to also plot $I_{D}$ on the same graph and identify $I_{D, R E F}$ at $\\left(V_{G S}-V_{T H}\\right)_{1}$.\nimage_name:Figure 11.16 Modification of transistor design for a lower overdrive.\ndescription:Figure 11.16 depicts a graph illustrating the relationship between the transconductance \\( g_m \\) and the overdrive voltage \\( V_{GS} - V_{TH} \\) for a reference transistor. This two-dimensional plot has the following characteristics:\n\n1. **Axes Labels and Units:**\n- The horizontal axis denotes the overdrive voltage \\( V_{GS} - V_{TH} \\).\n- The vertical axis represents the transconductance \\( g_m \\).\n- Both axes are marked with reference points and values, but specific units are not provided.\n\n2. **Overall Behavior and Trends:**\n- The graph displays a curve that initially rises with increasing \\( V_{GS} - V_{TH} \\), indicating a rise in transconductance \\( g_m \\).\n- The curve has a gentle slope, suggesting a non-linear relationship between \\( V_{GS} - V_{TH} \\) and \\( g_m \\).\n- A peak or maximum point is evident on the curve, after which the transconductance decreases with further increases in \\( V_{GS} - V_{TH} \\).\n\n3. **Key Features and Technical Details:**\n- Several significant points are marked on the graph: \\((V_{GS} - V_{TH})_{REF}\\) and \\((V_{GS} - V_{TH})_2\\), corresponding to specific overdrive voltages.\n- Corresponding transconductance values \\( g_{m,REF} \\), \\( g_{m1} \\), \\( g_{m2} \\), and \\( g'_{m1} \\) are indicated by horizontal dashed lines.\n- Current values \\( I_{D,REF} \\), \\( I_{D1} \\), and \\( I_{D2} \\) are marked on the horizontal axis, corresponding to the respective transconductance values.\n\n4. **Annotations and Specific Data Points:**\n- The point \\((I_{D1}, g_{m1})\\) is highlighted, indicating a specific operating condition on the curve.\n- Dotted lines connect these critical points to the axes, providing a visual guide to the relationships between \\( V_{GS} - V_{TH} \\), \\( g_m \\), and \\( I_D \\).\n- The graph aids in determining the necessary transistor width scaling to achieve a desired transconductance \\( g_{m1} \\) from a reference \\( g_{m,REF} \\).\n\nimage_name:Figure 11.17 Calculation of $g_{m, R E F}$ for a given overdrive.\ndescription:Figure 11.16 is used to demonstrate the modification of transistor design for achieving a lower overdrive voltage. This two-dimensional graph features the x-axis representing \\( V_{GS} - V_{TH} \\) (gate-source voltage minus threshold voltage) and the y-axis representing both transconductance \\( g_m \\) and drain current \\( I_D \\).\n\nAxes and Units:\n- **X-axis**: Labeled as \\( V_{GS} - V_{TH} \\), indicating the overdrive voltage. This axis is linear and extends to the right.\n- **Y-axis**: Represents two parameters:\n- **Upper part**: \\( g_m \\), the transconductance, with a reference level \\( g_{m,REF} \\) marked by a dotted horizontal line.\n- **Lower part**: \\( I_D \\), the drain current, with a reference level \\( I_{D,REF} \\) also marked by a dotted horizontal line.\n\nOverall Behavior and Trends:\n- The graph presents two distinct curves:\n- **Transconductance Curve (Upper)**: Starting from the origin, this curve rises linearly, indicating that the transconductance \\( g_m \\) increases with \\( V_{GS} - V_{TH} \\).\n- **Drain Current Curve (Lower)**: This curve starts from the origin and decreases, suggesting that the drain current \\( I_D \\) decreases as \\( V_{GS} - V_{TH} \\) increases.\n\nKey Features and Technical Details:\n- **Dotted Lines**: Horizontal dotted lines indicate the reference values \\( g_{m,REF} \\) and \\( I_{D,REF} \\), essential for understanding the scaling required to achieve the desired transconductance \\( g_{m1} \\).\n- **Intersection Points**: The dotted lines intersect the y-axis, marking the reference values for \\( g_m \\) and \\( I_D \\).\n- **Critical Point**: The graph highlights a specific point \\((V_{GS} - V_{TH})_1\\) on the x-axis, connected by vertical dotted lines to the curves, indicating the specific operating condition for the desired transconductance \\( g_{m1} \\).\n\nAnnotations and Specific Data Points:\n- The graph serves as a visual guide for scaling the transistor width to achieve a desired transconductance \\( g_{m1} \\) from a reference \\( g_{m,REF} \\), with the understanding that \\( I_D \\) will scale by the same factor. This is crucial for designing transistors with specific electrical characteristics.\n\nStep 2: To achieve the required transconductance, $g_{m 1}$, we scale the transistor width by a factor of $g_{m 1} / g_{m, R E F}$. Note that $I_{D}$ also scales by this same factor.\n\nThese two steps finalize the design. However, if the resulting $I_{D}$ is excessively high, we can revert to Case II in Sec. 11.4.2 and redesign for a specified $g_{m}$ and $I_{D}$. The device will then be wider but have a lower transconductance.\n\nAs demonstrated in our procedures in this section, we have emphasized the overdrive voltage (or $V_{D, s a t}$) as a critical parameter in our device design. This is due to the fact that today's low supply voltages have exacerbated the issue of headroom more than ever before."
},
{
    "text": "In certain designs, the transconductance is determined by specific performance criteria (such as voltage gain and noise) and the minimum $V_{D S}$ by the available voltage headroom, without explicitly defining $I_{D}$. Naturally, every circuit must adhere to a power budget, which imposes an upper limit on its bias current(s).\n\nThe process for achieving a transconductance of $g_{m 1}$ at $V_{D S, \\min }$ is outlined as follows.\nStep 1: We employ simulations to graph $g_{m}$ as a function of $V_{G S}-V_{T H}$ for the reference transistor (Fig. 11.17). Next, we choose $\\left(V_{G S}-V_{T H}\\right)_{1}=V_{D S, \\min }$ and determine the corresponding transconductance, $g_{m, R E F}$. It is beneficial to also plot $I_{D}$ on the same graph and identify $I_{D, R E F}$ at $\\left(V_{G S}-V_{T H}\\right)_{1}$.\nimage_name:Figure 11.16 Modification of transistor design for a lower overdrive.\ndescription:Figure 11.16 presents a graph depicting the relationship between transconductance \\( g_m \\) and overdrive voltage \\( V_{GS} - V_{TH} \\) for a reference transistor. This two-dimensional plot has the following characteristics:\n\n1. **Axes Labels and Units:**\n- The horizontal axis denotes the overdrive voltage \\( V_{GS} - V_{TH} \\).\n- The vertical axis indicates the transconductance \\( g_m \\).\n- Both axes are marked with reference points and values, though specific units are not provided.\n\n2. **Overall Behavior and Trends:**\n- The graph illustrates a curve that initially rises with increasing \\( V_{GS} - V_{TH} \\), signifying an increase in \\( g_m \\).\n- The curve exhibits a gentle slope, indicating a non-linear relationship between \\( V_{GS} - V_{TH} \\) and \\( g_m \\).\n- A peak or maximum point is observed on the curve, beyond which \\( g_m \\) decreases with further increases in \\( V_{GS} - V_{TH} \\).\n\n3. **Key Features and Technical Details:**\n- Several significant points are marked on the graph: \\((V_{GS} - V_{TH})_{REF}\\) and \\((V_{GS} - V_{TH})_2\\), corresponding to specific overdrive voltages.\n- Corresponding transconductance values \\( g_{m,REF} \\), \\( g_{m1} \\), \\( g_{m2} \\), and \\( g'_{m1} \\) are indicated by horizontal dashed lines.\n- Current values \\( I_{D,REF} \\), \\( I_{D1} \\), and \\( I_{D2} \\) are marked on the horizontal axis, corresponding to the respective transconductance values.\n\n4. **Annotations and Specific Data Points:**\n- The point \\((I_{D1}, g_{m1})\\) is highlighted, representing a specific operating condition on the curve.\n- Dotted lines connect these critical points to the axes, visually illustrating the relationships between \\( V_{GS} - V_{TH} \\), \\( g_m \\), and \\( I_D \\).\n- The graph aids in determining the necessary transistor width scaling to achieve a desired transconductance \\( g_{m1} \\) from a reference \\( g_{m,REF} \\).\n\nimage_name:Figure 11.17 Calculation of $g_{m, R E F}$ for a given overdrive.\ndescription:Figure 11.16 is utilized to demonstrate the modification of transistor design for attaining a lower overdrive voltage. This two-dimensional graph features the x-axis representing \\( V_{GS} - V_{TH} \\) (gate-source voltage minus threshold voltage) and the y-axis representing both transconductance \\( g_m \\) and drain current \\( I_D \\).\n\nAxes and Units:\n- **X-axis**: Labeled as \\( V_{GS} - V_{TH} \\), indicating the overdrive voltage. This axis is linear and extends to the right.\n- **Y-axis**: Represents two parameters:\n- **Upper part**: \\( g_m \\), the transconductance, with a reference level \\( g_{m,REF} \\) marked by a dotted horizontal line.\n- **Lower part**: \\( I_D \\), the drain current, with a reference level \\( I_{D,REF} \\) also marked by a dotted horizontal line.\n\nOverall Behavior and Trends:\n- The graph displays two distinct curves:\n- **Transconductance Curve (Upper)**: This curve originates from the origin and rises linearly, showing that \\( g_m \\) increases with \\( V_{GS} - V_{TH} \\).\n- **Drain Current Curve (Lower)**: This curve starts from the origin and decreases, indicating that \\( I_D \\) decreases as \\( V_{GS} - V_{TH} \\) increases.\n\nKey Features and Technical Details:\n- **Dotted Lines**: Horizontal dotted lines mark the reference values \\( g_{m,REF} \\) and \\( I_{D,REF} \\), crucial for understanding the scaling needed to achieve the desired \\( g_{m1} \\).\n- **Intersection Points**: The dotted lines intersect the y-axis, marking the reference values for \\( g_m \\) and \\( I_D \\).\n- **Critical Point**: The graph highlights a specific point \\((V_{GS} - V_{TH})_1\\) on the x-axis, connected by vertical dotted lines to the curves, indicating the specific operating condition for the desired \\( g_{m1} \\).\n\nAnnotations and Specific Data Points:\n- The graph serves as a visual aid for scaling the transistor width to achieve a desired \\( g_{m1} \\) from a reference \\( g_{m,REF} \\), with the understanding that \\( I_D \\) will scale proportionally. This is essential for designing transistors with specific electrical characteristics.\n\nStep 2: To attain the required transconductance, $g_{m 1}$, we scale the transistor width by a factor of $g_{m 1} / g_{m, R E F}$. Note that $I_{D}$ also scales by this same factor.\n\nThese two steps finalize the design. However, if the resulting $I_{D}$ is excessively high, we can revert to Case II in Sec. 11.4.2 and redesign for a specified $g_{m}$ and $I_{D}$. The device will then be wider and have a reduced transconductance.\n\nAs demonstrated in our procedures in this section, we have emphasized the overdrive voltage (or $V_{D, s a t}$) as a crucial parameter in our device design. This is due to the fact that today's low supply voltages have exacerbated the issue of headroom more than ever before."
},
{
    "text": "In certain designs, the transconductance is determined by specific performance criteria (such as voltage gain and noise) and the minimum $V_{D S}$ by the available voltage headroom, without explicitly defining $I_{D}$. Naturally, every circuit eventually encounters a power constraint, thereby imposing an upper limit on its bias current(s).\n\nThe procedure for achieving a transconductance of $g_{m 1}$ at $V_{D S, \\min }$ is outlined as follows.\nStep 1 We employ simulations to chart the $g_{m}$ as a function of $V_{G S}-V_{T H}$ for the reference transistor (Fig. 11.17). Next, we choose $\\left(V_{G S}-V_{T H}\\right)_{1}=V_{D S, \\min }$ and determine the corresponding transconductance, $g_{m, R E F}$. It is beneficial to also plot $I_{D}$ on the same graph and identify $I_{D, R E F}$ at $\\left(V_{G S}-V_{T H}\\right)_{1}$.\nimage_name:Figure 11.16 Modification of transistor design for a lower overdrive.\ndescription:The graph in Figure 11.16 depicts the relationship between the transconductance \\( g_m \\) and the overdrive voltage \\( V_{GS} - V_{TH} \\) for a reference transistor. This two-dimensional plot has the following characteristics:\n\n1. **Axes Labels and Units:**\n- The horizontal axis denotes the overdrive voltage \\( V_{GS} - V_{TH} \\).\n- The vertical axis represents the transconductance \\( g_m \\).\n- Both axes are marked with reference points and values, though specific units are not provided.\n\n2. **Overall Behavior and Trends:**\n- The graph illustrates a curve that initially rises with increasing \\( V_{GS} - V_{TH} \\), indicating a rise in transconductance \\( g_m \\).\n- The curve exhibits a gentle slope, suggesting a non-linear relationship between \\( V_{GS} - V_{TH} \\) and \\( g_m \\).\n- A peak or maximum point is observed on the curve, after which the transconductance decreases with further increases in \\( V_{GS} - V_{TH} \\).\n\n3. **Key Features and Technical Details:**\n- Several significant points are marked on the graph: \\((V_{GS} - V_{TH})_{REF}\\) and \\((V_{GS} - V_{TH})_2\\), corresponding to specific overdrive voltages.\n- Corresponding transconductance values \\( g_{m,REF} \\), \\( g_{m1} \\), \\( g_{m2} \\), and \\( g'_{m1} \\) are indicated by horizontal dashed lines.\n- Current values \\( I_{D,REF} \\), \\( I_{D1} \\), and \\( I_{D2} \\) are marked on the horizontal axis, corresponding to the respective transconductance values.\n\n4. **Annotations and Specific Data Points:**\n- The point \\((I_{D1}, g_{m1})\\) is highlighted, indicating a specific operating condition on the curve.\n- Dotted lines connect these critical points to the axes, providing a visual guide to the relationships between \\( V_{GS} - V_{TH} \\), \\( g_m \\), and \\( I_D \\).\n- The graph serves as a tool for determining the necessary transistor width scaling to achieve a desired transconductance \\( g_{m1} \\) from a reference \\( g_{m,REF} \\).\n\nimage_name:Figure 11.17 Calculation of $g_{m, R E F}$ for a given overdrive.\ndescription:The graph in Figure 11.16 is used to illustrate the modification of transistor design for achieving a lower overdrive voltage. This two-dimensional graph features the x-axis representing \\( V_{GS} - V_{TH} \\), the gate-source voltage minus the threshold voltage, and the y-axis representing both transconductance \\( g_m \\) and drain current \\( I_D \\).\n\nAxes and Units:\n- **X-axis**: Labeled as \\( V_{GS} - V_{TH} \\), representing the overdrive voltage. This axis is linear and extends to the right.\n- **Y-axis**: Represents two parameters:\n- **Upper part**: \\( g_m \\), the transconductance, with a reference level \\( g_{m,REF} \\) marked by a dotted horizontal line.\n- **Lower part**: \\( I_D \\), the drain current, with a reference level \\( I_{D,REF} \\) also marked by a dotted horizontal line.\n\nOverall Behavior and Trends:\n- The graph displays two distinct curves:\n- **Transconductance Curve (Upper)**: This curve originates from the origin and rises linearly, indicating that the transconductance \\( g_m \\) increases with increasing \\( V_{GS} - V_{TH} \\).\n- **Drain Current Curve (Lower)**: This curve starts from the origin and decreases, suggesting that the drain current \\( I_D \\) reduces as \\( V_{GS} - V_{TH} \\) increases.\n\nKey Features and Technical Details:\n- **Dotted Lines**: Horizontal dotted lines indicate the reference values \\( g_{m,REF} \\) and \\( I_{D,REF} \\), essential for understanding the scaling required to achieve the desired transconductance \\( g_{m1} \\).\n- **Intersection Points**: The dotted lines intersect the y-axis, marking the reference values for \\( g_m \\) and \\( I_D \\).\n- **Critical Point**: The graph highlights a specific point \\((V_{GS} - V_{TH})_1\\) on the x-axis, connected by vertical dotted lines to the curves, indicating the specific operating condition for the desired transconductance \\( g_{m1} \\).\n\nAnnotations and Specific Data Points:\n- The graph serves as a visual guide for scaling the transistor width to achieve a desired transconductance \\( g_{m1} \\) from a reference \\( g_{m,REF} \\), with the understanding that \\( I_D \\) will scale by the same factor. This is crucial for designing transistors with specific electrical characteristics.\n\nStep 2 To attain the required transconductance, $g_{m 1}$, we scale the transistor width by a factor of $g_{m 1} / g_{m, R E F}$. Note that $I_{D}$ also scales by this same factor.\n\nThese two steps finalize the design, but what if the resulting $I_{D}$ is excessively high? We can revert to Case II in Sec. 11.4.2 and redesign for a specified $g_{m}$ and $I_{D}$. The device will then be wider and possess a smaller transconductance.\n\nAs demonstrated in our procedures in this section, we have emphasized the overdrive voltage (or $V_{D, s a t}$) as a critical parameter in our device design. This is due to the fact that today's low supply voltages have exacerbated the issue of headroom more than ever before."
},
{
    "text": "In certain designs, the transconductance is determined by specific performance criteria (such as voltage gain and noise) and the minimum $V_{D S}$ by the available voltage headroom, without explicitly specifying $I_{D}$. Naturally, every circuit eventually encounters a power budget, imposing an upper limit on its bias current(s).\n\nThe process for achieving a transconductance of $g_{m 1}$ at $V_{D S, \\min }$ is outlined below.\nStep 1: We employ simulations to plot $g_{m}$ as a function of $V_{G S}-V_{T H}$ for the reference transistor (Fig. 11.17). Next, we choose $\\left(V_{G S}-V_{T H}\\right)_{1}=V_{D S, \\min }$ and determine the corresponding transconductance, $g_{m, R E F}$. It is beneficial to also plot $I_{D}$ on the same graph and identify $I_{D, R E F}$ at $\\left(V_{G S}-V_{T H}\\right)_{1}$.\nimage_name:Figure 11.16 Modification of transistor design for a lower overdrive.\ndescription:Figure 11.16 depicts a graph illustrating the relationship between transconductance \\( g_m \\) and overdrive voltage \\( V_{GS} - V_{TH} \\) for a reference transistor. This two-dimensional plot features:\n\n1. **Axes Labels and Units:**\n- The horizontal axis denotes the overdrive voltage \\( V_{GS} - V_{TH} \\).\n- The vertical axis represents the transconductance \\( g_m \\).\n- Both axes are marked with reference points, but specific units are not provided.\n\n2. **Overall Behavior and Trends:**\n- The graph displays a curve that initially increases with \\( V_{GS} - V_{TH} \\), indicating rising transconductance \\( g_m \\).\n- The curve has a gentle slope, signifying a non-linear relationship.\n- A peak point is observed, after which \\( g_m \\) decreases with further increases in \\( V_{GS} - V_{TH} \\).\n\n3. **Key Features and Technical Details:**\n- Several significant points are marked: \\((V_{GS} - V_{TH})_{REF}\\) and \\((V_{GS} - V_{TH})_2\\), corresponding to specific overdrive voltages.\n- Corresponding transconductance values \\( g_{m,REF} \\), \\( g_{m1} \\), \\( g_{m2} \\), and \\( g'_{m1} \\) are indicated by horizontal dashed lines.\n- Current values \\( I_{D,REF} \\), \\( I_{D1} \\), and \\( I_{D2} \\) are marked on the horizontal axis, aligning with respective transconductance values.\n\n4. **Annotations and Specific Data Points:**\n- The point \\((I_{D1}, g_{m1})\\) is highlighted, denoting a specific operating condition.\n- Dotted lines connect these critical points to the axes, visually guiding the relationships between \\( V_{GS} - V_{TH} \\), \\( g_m \\), and \\( I_D \\).\n- The graph aids in determining the necessary transistor width scaling to achieve a desired transconductance \\( g_{m1} \\) from a reference \\( g_{m,REF} \\).\n\nimage_name:Figure 11.17 Calculation of $g_{m, R E F}$ for a given overdrive.\ndescription:Figure 11.16 is used to demonstrate the modification of transistor design for attaining a lower overdrive voltage. This two-dimensional graph features:\n- **X-axis**: Labeled as \\( V_{GS} - V_{TH} \\), representing the overdrive voltage, extending linearly to the right.\n- **Y-axis**: Represents two parameters:\n- **Upper part**: \\( g_m \\), the transconductance, with a reference level \\( g_{m,REF} \\) indicated by a dotted horizontal line.\n- **Lower part**: \\( I_D \\), the drain current, with a reference level \\( I_{D,REF} \\) also marked by a dotted horizontal line.\n\nOverall Behavior and Trends:\n- The graph displays two distinct curves:\n- **Transconductance Curve (Upper)**: Starts from the origin and increases linearly, showing \\( g_m \\) rising with \\( V_{GS} - V_{TH} \\).\n- **Drain Current Curve (Lower)**: Starts from the origin and decreases, indicating \\( I_D \\) reduces as \\( V_{GS} - V_{TH} \\) increases.\n\nKey Features and Technical Details:\n- **Dotted Lines**: Horizontal dotted lines mark the reference values \\( g_{m,REF} \\) and \\( I_{D,REF} \\), crucial for understanding the scaling needed for the desired transconductance \\( g_{m1} \\).\n- **Intersection Points**: Dotted lines intersect the y-axis, marking reference values for \\( g_m \\) and \\( I_D \\).\n- **Critical Point**: A specific point \\((V_{GS} - V_{TH})_1\\) on the x-axis is highlighted, connected by vertical dotted lines to the curves, indicating the specific operating condition for \\( g_{m1} \\).\n\nAnnotations and Specific Data Points:\n- The graph serves as a visual aid for scaling the transistor width to achieve \\( g_{m1} \\) from \\( g_{m,REF} \\), with the understanding that \\( I_D \\) will scale similarly. This is essential for designing transistors with specific electrical characteristics.\n\nStep 2: To attain the required transconductance, $g_{m 1}$, we scale the transistor width by a factor of $g_{m 1} / g_{m, R E F}$. Note that $I_{D}$ also scales by this factor.\n\nThese steps finalize the design. However, if the resulting $I_{D}$ is excessively high, we can revert to Case II in Sec. 11.4.2 and redesign for a specified $g_{m}$ and $I_{D}$. The device will then be wider but have a lower transconductance.\n\nAs demonstrated in this section, we have highlighted the overdrive voltage (or $V_{D, s a t}$) as a crucial parameter in our device design. This is due to the increased severity of the headroom problem caused by today's low supply voltages."
},
{
    "text": "In certain designs, the transconductance is determined by specific performance criteria (such as voltage gain and noise) and the minimum $V_{D S}$ by the available voltage headroom, without explicitly defining $I_{D}$. Naturally, every circuit eventually encounters a power budget, imposing an upper limit on its bias current(s).\n\nThe procedure for achieving a transconductance of $g_{m 1}$ at $V_{D S, \\min }$ is outlined as follows.\nStep 1: We employ simulations to chart the $g_{m}$ as a function of $V_{G S}-V_{T H}$ for the reference transistor (Fig. 11.17). Next, we choose $\\left(V_{G S}-V_{T H}\\right)_{1}=V_{D S, \\min }$ and determine the corresponding transconductance, $g_{m, R E F}$. It is beneficial to plot $I_{D}$ on the same graph and identify $I_{D, R E F}$ at $\\left(V_{G S}-V_{T H}\\right)_{1}$.\nimage_name:Figure 11.16 Modification of transistor design for a lower overdrive.\ndescription:Figure 11.16 depicts a graph illustrating the relationship between the transconductance \\( g_m \\) and the overdrive voltage \\( V_{GS} - V_{TH} \\) for a reference transistor. This two-dimensional plot features the following characteristics:\n\n1. **Axes Labels and Units:**\n- The horizontal axis denotes the overdrive voltage \\( V_{GS} - V_{TH} \\).\n- The vertical axis represents the transconductance \\( g_m \\).\n- Both axes are marked with reference points and values, though specific units are not provided.\n\n2. **Overall Behavior and Trends:**\n- The graph displays a curve that initially rises with increasing \\( V_{GS} - V_{TH} \\), indicating a rise in transconductance \\( g_m \\).\n- The curve exhibits a gentle slope, suggesting a non-linear relationship between \\( V_{GS} - V_{TH} \\) and \\( g_m \\).\n- A peak or maximum point is evident on the curve, beyond which the transconductance declines with further increases in \\( V_{GS} - V_{TH} \\).\n\n3. **Key Features and Technical Details:**\n- Several significant points are marked on the graph: \\((V_{GS} - V_{TH})_{REF}\\) and \\((V_{GS} - V_{TH})_2\\), corresponding to specific overdrive voltages.\n- Corresponding transconductance values \\( g_{m,REF} \\), \\( g_{m1} \\), \\( g_{m2} \\), and \\( g'_{m1} \\) are indicated by horizontal dashed lines.\n- Current values \\( I_{D,REF} \\), \\( I_{D1} \\), and \\( I_{D2} \\) are marked on the horizontal axis, corresponding to the respective transconductance values.\n\n4. **Annotations and Specific Data Points:**\n- The point \\((I_{D1}, g_{m1})\\) is highlighted, signifying a specific operating condition on the curve.\n- Dotted lines connect these critical points to the axes, providing a visual guide to the relationships between \\( V_{GS} - V_{TH} \\), \\( g_m \\), and \\( I_D \\).\n- The graph aids in determining the necessary transistor width scaling to achieve a desired transconductance \\( g_{m1} \\) from a reference \\( g_{m,REF} \\).\n\nimage_name:Figure 11.17 Calculation of $g_{m, R E F}$ for a given overdrive.\ndescription:Figure 11.16 is utilized to demonstrate the modification of transistor design for achieving a lower overdrive voltage. This two-dimensional graph has the x-axis representing \\( V_{GS} - V_{TH} \\), which is the gate-source voltage minus the threshold voltage, and the y-axis representing both transconductance \\( g_m \\) and drain current \\( I_D \\).\n\nAxes and Units:\n- **X-axis**: Labeled as \\( V_{GS} - V_{TH} \\), indicating the overdrive voltage. This axis is linear and extends to the right.\n- **Y-axis**: Represents two parameters:\n- **Upper part**: \\( g_m \\), the transconductance, with a reference level \\( g_{m,REF} \\) marked by a dotted horizontal line.\n- **Lower part**: \\( I_D \\), the drain current, with a reference level \\( I_{D,REF} \\) also marked by a dotted horizontal line.\n\nOverall Behavior and Trends:\n- The graph presents two distinct curves:\n- **Transconductance Curve (Upper)**: This curve originates from the origin and rises linearly, indicating that the transconductance \\( g_m \\) increases with \\( V_{GS} - V_{TH} \\).\n- **Drain Current Curve (Lower)**: This curve starts from the origin and decreases, suggesting that the drain current \\( I_D \\) decreases as \\( V_{GS} - V_{TH} \\) increases.\n\nKey Features and Technical Details:\n- **Dotted Lines**: Horizontal dotted lines indicate the reference values \\( g_{m,REF} \\) and \\( I_{D,REF} \\), essential for understanding the scaling needed to achieve the desired transconductance \\( g_{m1} \\).\n- **Intersection Points**: The dotted lines intersect the y-axis, marking the reference values for \\( g_m \\) and \\( I_D \\).\n- **Critical Point**: The graph highlights a specific point \\((V_{GS} - V_{TH})_1\\) on the x-axis, connected by vertical dotted lines to the curves, indicating the specific operating condition for the desired transconductance \\( g_{m1} \\).\n\nAnnotations and Specific Data Points:\n- The graph serves as a visual aid for scaling the transistor width to achieve a desired transconductance \\( g_{m1} \\) from a reference \\( g_{m,REF} \\), understanding that \\( I_D \\) will scale by the same factor. This is vital for designing transistors with specific electrical characteristics.\n\nStep 2: To attain the required transconductance, $g_{m 1}$, we scale the transistor width by a factor of $g_{m 1} / g_{m, R E F}$. Note that $I_{D}$ also scales by this factor.\n\nThese two steps finalize the design. However, if the resulting $I_{D}$ is excessively high, we can revert to Case II in Sec. 11.4.2 and redesign for a specified $g_{m}$ and $I_{D}$. The device will then be wider but have a lower transconductance.\n\nAs demonstrated in our procedures in this section, we have emphasized the overdrive voltage (or $V_{D, s a t}$) as a crucial parameter in our device design. This is due to the heightened challenge of headroom posed by today's low supply voltages."
},
{
    "text": "In certain designs, the transconductance is determined by specific performance criteria (such as voltage gain and noise) and the minimum $V_{D S}$ by the available voltage headroom, without explicitly defining $I_{D}$. Naturally, every circuit must adhere to a power budget, which imposes an upper limit on its bias current(s).\n\nThe procedure for achieving a transconductance of $g_{m 1}$ at $V_{D S, \\min }$ is outlined below.\nStep 1: We utilize simulations to chart $g_{m}$ as a function of $V_{G S}-V_{T H}$ for the reference transistor (Fig. 11.17). Next, we choose $\\left(V_{G S}-V_{T H}\\right)_{1}=V_{D S, \\min }$ and determine the corresponding transconductance, $g_{m, R E F}$. It is beneficial to also plot $I_{D}$ on the same graph and identify $I_{D, R E F}$ at $\\left(V_{G S}-V_{T H}\\right)_{1}$.\nimage_name:Figure 11.16 Modification of transistor design for a lower overdrive.\ndescription:Figure 11.16 depicts a graph illustrating the relationship between transconductance \\( g_m \\) and overdrive voltage \\( V_{GS} - V_{TH} \\) for a reference transistor. This two-dimensional plot has the following characteristics:\n\n1. **Axes Labels and Units:**\n- The horizontal axis denotes the overdrive voltage \\( V_{GS} - V_{TH} \\).\n- The vertical axis represents the transconductance \\( g_m \\).\n- Both axes are marked with reference points, but specific units are not provided.\n\n2. **Overall Behavior and Trends:**\n- The graph displays a curve that initially rises with increasing \\( V_{GS} - V_{TH} \\), indicating a rise in \\( g_m \\).\n- The curve has a gentle slope, suggesting a non-linear relationship between \\( V_{GS} - V_{TH} \\) and \\( g_m \\).\n- A peak is observed on the curve, after which \\( g_m \\) decreases with further increases in \\( V_{GS} - V_{TH} \\).\n\n3. **Key Features and Technical Details:**\n- Several significant points are marked: \\((V_{GS} - V_{TH})_{REF}\\) and \\((V_{GS} - V_{TH})_2\\), corresponding to specific overdrive voltages.\n- Horizontal dashed lines indicate transconductance values \\( g_{m,REF} \\), \\( g_{m1} \\), \\( g_{m2} \\), and \\( g'_{m1} \\).\n- Current values \\( I_{D,REF} \\), \\( I_{D1} \\), and \\( I_{D2} \\) are marked on the horizontal axis, corresponding to respective transconductance values.\n\n4. **Annotations and Specific Data Points:**\n- The point \\((I_{D1}, g_{m1})\\) is highlighted, representing a specific operating condition.\n- Dotted lines connect these critical points to the axes, visually guiding the relationships between \\( V_{GS} - V_{TH} \\), \\( g_m \\), and \\( I_D \\).\n- The graph aids in determining the necessary transistor width scaling to achieve a desired \\( g_{m1} \\) from a reference \\( g_{m,REF} \\).\n\nimage_name:Figure 11.17 Calculation of $g_{m, R E F}$ for a given overdrive.\ndescription:Figure 11.17 illustrates the modification of transistor design to achieve a lower overdrive voltage. This two-dimensional graph features an x-axis representing \\( V_{GS} - V_{TH} \\) and a y-axis representing both \\( g_m \\) and \\( I_D \\).\n\nAxes and Units:\n- **X-axis**: Labeled \\( V_{GS} - V_{TH} \\), indicating the overdrive voltage, extending linearly to the right.\n- **Y-axis**: Represents two parameters:\n- **Upper part**: \\( g_m \\), with a reference level \\( g_{m,REF} \\) marked by a dotted horizontal line.\n- **Lower part**: \\( I_D \\), with a reference level \\( I_{D,REF} \\) also marked by a dotted horizontal line.\n\nOverall Behavior and Trends:\n- The graph includes two distinct curves:\n- **Transconductance Curve (Upper)**: Starting from the origin, it rises linearly, showing \\( g_m \\) increases with \\( V_{GS} - V_{TH} \\).\n- **Drain Current Curve (Lower)**: Starting from the origin, it decreases, indicating \\( I_D \\) reduces as \\( V_{GS} - V_{TH} \\) increases.\n\nKey Features and Technical Details:\n- **Dotted Lines**: Horizontal dotted lines mark the reference values \\( g_{m,REF} \\) and \\( I_{D,REF} \\), essential for understanding the scaling needed for the desired \\( g_{m1} \\).\n- **Intersection Points**: These lines intersect the y-axis, marking reference values for \\( g_m \\) and \\( I_D \\).\n- **Critical Point**: The graph highlights \\((V_{GS} - V_{TH})_1\\) on the x-axis, connected by vertical dotted lines to the curves, indicating the specific operating condition for \\( g_{m1} \\).\n\nAnnotations and Specific Data Points:\n- The graph serves as a visual aid for scaling the transistor width to achieve \\( g_{m1} \\) from \\( g_{m,REF} \\), with \\( I_D \\) scaling by the same factor, crucial for designing transistors with specific electrical characteristics.\n\nStep 2: To attain the required transconductance, $g_{m 1}$, we scale the transistor width by a factor of $g_{m 1} / g_{m, R E F}$. Note that $I_{D}$ also scales by this factor.\n\nThese steps finalize the design. However, if the resulting $I_{D}$ is excessively high, we can revert to Case II in Sec. 11.4.2 and redesign for a specified $g_{m}$ and $I_{D}$. The device will then be wider with a lower transconductance.\n\nAs demonstrated in this section, we have emphasized the overdrive voltage (or $V_{D, s a t}$) as a crucial parameter in our device design. This is due to the heightened severity of the headroom problem caused by today's low supply voltages."
},
{
    "text": "Our method assumes that the drain current and overdrive voltage are given, with other device parameters needing determination. Given the critical nature of power consumption and voltage headroom in modern analog design, this assumption is generally valid. However, if a design problem specifies only the transconductance and we need to calculate the remaining parameters, how do we determine the transistor's drain current, overdrive voltage, and dimensions?\n\nTwo scenarios must be considered. (1) We choose a specific $W / L$ and increase $I_{D}$ until the desired transconductance, $g_{m 1}$, is achieved. In this scenario, the required $I_{D}$, and thus the power consumption, might be excessively high. More importantly, the overdrive voltage could become unacceptably large, leaving minimal voltage swing headroom. (2) We select a reasonable $I_{D}$ (perhaps based on a power budget) and increase $W / L$ to attain $g_{m 1}$. Here, we might not achieve $g_{m 1}$; increasing $W / L$ (and thereby decreasing $V_{G S}$) can push the device into the subthreshold region, where $g_{m}$ cannot exceed $I_{D} /\\left(\\xi V_{T}\\right)$. This implies the chosen current is insufficient, necessitating a check to ensure the upper limit of $I_{D} /\\left(\\xi V_{T}\\right)$ is met within the current budget.\n\nThese scenarios highlight the need for a systematic approach to selecting device parameters when only $g_{m 1}$ is known. To address this, we revert to the concept of a reference device and, using simulations, create two plots for it. As depicted in Fig. 11.18, these plots show $g_{m}$ and $V_{G S}-V_{T H}$ as functions of $I_{D}$.^{5} We start by choosing a reasonable $V_{G S}-V_{T H}$, such as 200 mV, which corresponds to $I_{D, R E F}$ and $g_{m, R E F}$. Next, we scale the width and drain current by the factor $g_{m 1} / g_{m, R E F}$.\nimage_name: Figure 11.18 Translation of overdrive to $g_{m, R E F}$.\ndescription: Figure 11.18 presents a dual plot illustrating the relationship between transconductance ($g_m$) and overdrive voltage ($V_{GS} - V_{TH}$) as functions of drain current ($I_D$). This parametric plot displays $g_m$ and $V_{GS} - V_{TH}$ against $I_D$ on a shared axis.\n\n1. **Graph Type and Function:**\n- The graph is a parametric plot depicting $g_m$ and $V_{GS} - V_{TH}$ versus $I_D$.\n\n2. **Axes Labels and Units:**\n- The horizontal axis is labeled $I_D$, representing the drain current.\n- The vertical axis features two parameters:\n  - $g_m$, the transconductance.\n  - $V_{GS} - V_{TH}$, the overdrive voltage, marked at 200 mV.\n\n3. **General Behavior and Trends:**\n- The plot features two curves originating from a common point on the $I_D$ axis.\n- The $g_m$ curve rises with increasing $I_D$, indicating a direct relationship.\n- The $V_{GS} - V_{TH}$ curve declines as $I_D$ increases, showing an inverse relationship.\n\n4. **Key Features and Technical Aspects:**\n- The reference point $(I_{D, REF}, g_{m, REF})$ is indicated, denoting a specific operating condition.\n- The device width is shown as $W = W_{REF}$, suggesting a constant width for this reference condition.\n\n5. **Annotations and Specific Data Points:**\n- A specific overdrive voltage of 200 mV is noted on the $V_{GS} - V_{TH}$ curve.\n- The reference transconductance $g_{m, REF}$ is marked on the $g_m$ curve.\n- The intersection of these parameters at $I_{D, REF}$ is highlighted, signifying a balanced operating point for the reference device.\n\nIf the above method results in an unacceptably high $I_{D}$, we can opt for a smaller overdrive, such as 150 mV, and repeat the previous steps."
},
{
    "text": "Our methodology presumes that the drain current and overdrive voltage are given, necessitating the determination of other device parameters. Given the critical nature of power consumption and voltage headroom in contemporary analog design, this presumption is generally valid. However, if a design problem only specifies the transconductance and we need to calculate the remaining parameters, how do we determine the transistor's drain current, overdrive voltage, and dimensions?\n\nTwo scenarios must be considered. (1) We choose a specific $W / L$ and increase $I_{D}$ until the desired transconductance, $g_{m 1}$, is achieved. In this scenario, the required $I_{D}$, and thus the power consumption, might be excessively high. More significantly, the overdrive voltage could become unacceptably large, leaving minimal headroom for voltage swings. (2) We select a reasonable $I_{D}$ (possibly based on a power budget) and enhance $W / L$ to attain $g_{m 1}$. However, in this case, reaching $g_{m 1}$ might be impossible; increasing $W / L$ (and thereby decreasing $V_{G S}$) can eventually push the device into the subthreshold region, where $g_{m}$ cannot surpass $I_{D} /\\left(\\xi V_{T}\\right)$. This implies that the chosen current is inadequate, necessitating a check to ensure the upper limit defined by $I_{D} /\\left(\\xi V_{T}\\right)$ is achievable within the current budget.\n\nThese scenarios underscore the need for a systematic method to select device parameters when only $g_{m 1}$ is known. To address this, we revert to the concept of the reference device and, using simulations, create two plots for it. As depicted in Fig. 11.18, these plots illustrate $g_{m}$ and $V_{G S}-V_{T H}$ as functions of $I_{D}$. We start by choosing a reasonable value for $V_{G S}-V_{T H}$, such as 200 mV, which corresponds to $I_{D, R E F}$ and $g_{m, R E F}$. Subsequently, we scale the width and the drain current by the factor $g_{m 1} / g_{m, R E F}$.\n\n**Figure 11.18: Translation of Overdrive to $g_{m, R E F}$**\n- **Type of Graph and Function:** The graph is a parametric plot depicting $g_m$ and $V_{GS} - V_{TH}$ versus $I_D$.\n- **Axes Labels and Units:** The horizontal axis represents the drain current ($I_D$). The vertical axis includes two parameters: $g_m$ (transconductance) and $V_{GS} - V_{TH}$ (overdrive voltage), with a marked point at 200 mV.\n- **Overall Behavior and Trends:** The plot features two curves originating from a common point on the $I_D$ axis. The $g_m$ curve rises with increasing $I_D$, signifying a direct relationship, while the $V_{GS} - V_{TH}$ curve declines, indicating an inverse relationship.\n- **Key Features and Technical Details:** The reference point $(I_{D, REF}, g_{m, REF})$ is highlighted, denoting a specific operating condition. The device width is shown as $W = W_{REF}$, indicating constancy for this reference condition.\n- **Annotations and Specific Data Points:** A specific overdrive voltage of 200 mV is noted on the $V_{GS} - V_{TH}$ curve. The reference transconductance $g_{m, REF}$ is marked on the $g_m$ curve. The intersection of these parameters at $I_{D, REF}$ is emphasized, signifying a balanced operating point for the reference device.\n\nIf the aforementioned method results in an excessively high $I_{D}$, we can opt for a lower overdrive, such as 150 mV, and repeat the previous steps."
},
{
    "text": "Our methodology assumes that the drain current and overdrive voltage are predefined, necessitating the determination of other device parameters. Given the criticality of power consumption and voltage headroom in contemporary analog design, this assumption is generally valid. However, if a design problem only specifies the transconductance and we need to calculate the remaining parameters, how do we determine the transistor's drain current, overdrive voltage, and dimensions?\n\nTwo possible scenarios must be considered. (1) We choose a specific $W / L$ and increase $I_{D}$ until the desired transconductance, $g_{m 1}$, is achieved. In this scenario, the required $I_{D}$, and consequently the power consumption, might be excessively high. More critically, the overdrive voltage could become unacceptably large, leaving minimal headroom for voltage swings. (2) We select a reasonable $I_{D}$ (perhaps based on a power budget) and enhance $W / L$ to attain $g_{m 1}$. Here, we might fail to reach $g_{m 1}$; increasing $W / L$ (thus decreasing $V_{G S}$) can push the device into the subthreshold region, where $g_{m}$ cannot surpass $I_{D} / (\\xi V_{T})$. This implies that the chosen current is inadequate, necessitating a quick check to ensure the upper limit defined by $I_{D} / (\\xi V_{T})$ is achievable with the current budget.\n\nThese scenarios underscore the need for a systematic approach to parameter selection when only $g_{m 1}$ is known. To address this, we revert to the concept of a reference device and, using simulations, create two plots for it. As depicted in Fig. 11.18, these plots illustrate $g_{m}$ and $V_{G S} - V_{T H}$ as functions of $I_{D}$. We start by choosing a reasonable $V_{G S} - V_{T H}$, say 200 mV, which corresponds to $I_{D, R E F}$ and $g_{m, R E F}$. Then, we scale the width and drain current by the factor $g_{m 1} / g_{m, R E F}$.\n\n**Figure 11.18 Description:**\nThe graph in Figure 11.18 is a dual plot depicting the relationship between transconductance ($g_m$) and overdrive voltage ($V_{GS} - V_{TH}$) as functions of the drain current ($I_D$). It is a parametric plot where both $g_m$ and $V_{GS} - V_{TH}$ are plotted against $I_D$ on a shared axis.\n\n1. **Graph Type and Function:**\n- The graph is a parametric plot showing $g_m$ and $V_{GS} - V_{TH}$ versus $I_D$.\n\n2. **Axes Labels and Units:**\n- The horizontal axis is labeled $I_D$, representing the drain current.\n- The vertical axis features two parameters:\n  - $g_m$, the transconductance.\n  - $V_{GS} - V_{TH}$, the overdrive voltage, marked at 200 mV.\n\n3. **Behavior and Trends:**\n- The plot displays two curves originating from a common point on the $I_D$ axis.\n- The $g_m$ curve rises with increasing $I_D$, indicating a direct relationship.\n- The $V_{GS} - V_{TH}$ curve declines as $I_D$ increases, showing an inverse relationship.\n\n4. **Key Features and Technical Details:**\n- The reference point $(I_{D, REF}, g_{m, REF})$ is marked, signifying a specific operating condition.\n- The device width is indicated as $W = W_{REF}$, suggesting a constant width for this reference condition.\n\n5. **Annotations and Data Points:**\n- A specific overdrive voltage of 200 mV is noted on the $V_{GS} - V_{TH}$ curve.\n- The reference transconductance $g_{m, REF}$ is marked on the $g_m$ curve.\n- The intersection of these parameters at $I_{D, REF}$ is highlighted, indicating a balanced operating point for the reference device.\n\nIf the above method results in an unacceptably high $I_{D}$, we can opt for a lower overdrive, such as 150 mV, and repeat the previous steps."
},
{
    "text": "Our methodology presumes that the drain current and overdrive voltage are given, necessitating the determination of other device parameters. Given the critical nature of power consumption and voltage headroom in modern analog design, this presumption is generally valid. However, if a design problem only specifies the transconductance and we need to calculate the remaining parameters, how do we choose the transistor's drain current, overdrive voltage, and dimensions?\n\nTwo situations must be considered. (1) We choose a specific $W / L$ and increase $I_{D}$ until the desired transconductance, $g_{m 1}$, is achieved. In this scenario, the required $I_{D}$, and thus the power consumption, might be excessively high. More crucially, the overdrive voltage could become unacceptably large, leaving minimal headroom for voltage swings. (2) We select a reasonable $I_{D}$ (perhaps based on a power budget) and enhance $W / L$ to attain $g_{m 1}$. Here, however, we might fail to reach $g_{m 1}$; increasing $W / L$ (and thereby reducing $V_{G S}$) eventually pushes the device into the subthreshold region, where $g_{m}$ cannot exceed $I_{D} /\\left(\\xi V_{T}\\right)$. This implies that the chosen current is inadequate, necessitating a quick check to ensure the upper limit defined by $I_{D} /\\left(\\xi V_{T}\\right)$ is achievable within the current budget.\n\nThese scenarios underscore the need for a systematic method to select device parameters when only $g_{m 1}$ is known. To address this, we revert to the concept of the reference device and, using simulations, create two plots for it. As depicted in Fig. 11.18, these plots illustrate $g_{m}$ and $V_{G S}-V_{T H}$ as functions of $I_{D}$. We start by choosing a reasonable value for $V_{G S}-V_{T H}$, such as 200 mV, which corresponds to $I_{D, R E F}$ and $g_{m, R E F}$. Subsequently, we scale the width and the drain current by the factor $g_{m 1} / g_{m, R E F}$.\nimage_name:Figure 11.18 Translation of overdrive to $g_{m, R E F}$.\ndescription:The graph in Figure 11.18 is a dual plot depicting the relationship between transconductance ($g_m$) and overdrive voltage ($V_{GS} - V_{TH}$) as a function of drain current ($I_D$). It is a parametric plot where both $g_m$ and $V_{GS} - V_{TH}$ are plotted against $I_D$ on a shared axis.\n\n1. **Type of Graph and Function:**\n- The graph is a parametric plot showing $g_m$ and $V_{GS} - V_{TH}$ versus $I_D$.\n\n2. **Axes Labels and Units:**\n- The horizontal axis is labeled $I_D$, representing the drain current.\n- The vertical axis features two parameters:\n- $g_m$, the transconductance.\n- $V_{GS} - V_{TH}$, the overdrive voltage, marked at 200 mV.\n\n3. **Overall Behavior and Trends:**\n- The plot displays two curves originating from a common point on the $I_D$ axis.\n- The $g_m$ curve rises with increasing $I_D$, indicating a direct relationship.\n- The $V_{GS} - V_{TH}$ curve declines as $I_D$ increases, showing an inverse relationship.\n\n4. **Key Features and Technical Details:**\n- The reference point $(I_{D, REF}, g_{m, REF})$ is indicated, representing a specific operating condition.\n- The device width is noted as $W = W_{REF}$, suggesting a constant width for this reference condition.\n\n5. **Annotations and Specific Data Points:**\n- A specific overdrive voltage of 200 mV is marked on the $V_{GS} - V_{TH}$ curve.\n- The reference transconductance $g_{m, REF}$ is highlighted on the $g_m$ curve.\n- The intersection of these parameters at $I_{D, REF}$ is emphasized, signifying a balanced operating point for the reference device.\n\nIf the aforementioned method results in an unacceptably high $I_{D}$, we can opt for a lower overdrive, such as 150 mV, and repeat the previous steps."
},
{
    "text": "Our method presupposes that the drain current and overdrive voltage are given, necessitating the determination of other device parameters. Given the critical nature of power consumption and voltage headroom in modern analog design, this premise is generally valid. However, if a design problem only specifies the transconductance and we need to calculate the remaining parameters, how do we determine the transistor's drain current, overdrive voltage, and dimensions?\n\nTwo possible scenarios must be considered. (1) We choose a specific $W / L$ and increase $I_{D}$ until the desired transconductance, $g_{m 1}$, is achieved. In this scenario, the required $I_{D}$, and thus the power consumption, might be excessively high. More critically, the overdrive voltage could become unacceptably large, leaving minimal headroom for voltage swings. (2) We select a reasonable $I_{D}$ (perhaps based on a power budget) and enhance $W / L$ to reach $g_{m 1}$. Here, we might fail to attain $g_{m 1}$; increasing $W / L$ (and thereby decreasing $V_{G S}$) could push the device into the subthreshold region, where $g_{m}$ cannot surpass $I_{D} /\\left(\\xi V_{T}\\right)$. This implies that the chosen current is inadequate, necessitating a quick check to ensure the upper limit of $I_{D} /\\left(\\xi V_{T}\\right)$ is feasible within the current budget.\n\nThese scenarios underscore the need for a structured approach to parameter selection when only $g_{m 1}$ is known. To address this, we revert to the concept of a reference device and, using simulations, create two plots for it. As depicted in Fig. 11.18, these plots illustrate $g_{m}$ and $V_{G S}-V_{T H}$ as functions of $I_{D}$. We start by choosing a reasonable $V_{G S}-V_{T H}$, such as 200 mV, which corresponds to $I_{D, R E F}$ and $g_{m, R E F}$. Next, we scale the width and drain current by the factor $g_{m 1} / g_{m, R E F}$.\nimage_name:Figure 11.18 Translation of overdrive to $g_{m, R E F}$.\ndescription:The graph in Figure 11.18 is a dual plot depicting the relationship between transconductance ($g_m$) and overdrive voltage ($V_{GS} - V_{TH}$) as functions of the drain current ($I_D$). It is a parametric plot where both $g_m$ and $V_{GS} - V_{TH}$ are plotted against $I_D$ on a shared axis.\n\n1. **Type of Graph and Function:**\n- The graph is a parametric plot showing $g_m$ and $V_{GS} - V_{TH}$ versus $I_D$.\n\n2. **Axes Labels and Units:**\n- The horizontal axis is labeled as $I_D$, representing the drain current.\n- The vertical axis features two parameters:\n- $g_m$, the transconductance.\n- $V_{GS} - V_{TH}$, the overdrive voltage, marked at 200 mV.\n\n3. **Overall Behavior and Trends:**\n- The plot displays two curves originating from a common point on the $I_D$ axis.\n- The $g_m$ curve rises with increasing $I_D$, indicating a direct correlation.\n- The $V_{GS} - V_{TH}$ curve declines as $I_D$ increases, showing an inverse relationship.\n\n4. **Key Features and Technical Details:**\n- The reference point $(I_{D, REF}, g_{m, REF})$ is indicated, representing a specific operating condition.\n- The device width is shown as $W = W_{REF}$, suggesting a constant width for this reference condition.\n\n5. **Annotations and Specific Data Points:**\n- A specific overdrive voltage of 200 mV is noted on the $V_{GS} - V_{TH}$ curve.\n- The reference transconductance $g_{m, REF}$ is marked on the $g_m$ curve.\n- The intersection of these parameters at $I_{D, REF}$ is highlighted, denoting a balanced operating point for the reference device.\n\nIf the above method results in an excessively high $I_{D}$, we can opt for a lower overdrive, such as 150 mV, and repeat the previous steps."
},
{
    "text": "Our methodology assumes that the drain current and overdrive voltage are given, with other device parameters needing determination. Given the critical nature of power consumption and voltage headroom in modern analog design, this assumption is generally valid. However, if a design problem only specifies the transconductance and we need to calculate the remaining parameters, how do we determine the transistor's drain current, overdrive voltage, and dimensions?\n\nTwo scenarios must be considered. (1) We choose a specific $W / L$ and increase $I_{D}$ until the desired transconductance, $g_{m 1}$, is achieved. In this scenario, the required $I_{D}$, and thus the power consumption, might be excessively high. More critically, the overdrive voltage could become unacceptably large, leaving minimal headroom for voltage swings. (2) We select a reasonable $I_{D}$ (perhaps based on a power budget) and increase $W / L$ to attain $g_{m 1}$. Here, we might not achieve $g_{m 1}$; increasing $W / L$ (and thereby decreasing $V_{G S}$) can push the device into the subthreshold region, where $g_{m}$ cannot exceed $I_{D} /\\left(\\xi V_{T}\\right)$. This implies that the chosen current is inadequate, necessitating a check to see if the upper limit of $I_{D} /\\left(\\xi V_{T}\\right)$ is feasible within the current budget.\n\nThese scenarios underscore the need for a systematic approach to selecting device parameters when only $g_{m 1}$ is known. To address this, we revert to the concept of a reference device and, using simulations, create two plots for it. As depicted in Fig. 11.18, these plots show $g_{m}$ and $V_{G S}-V_{T H}$ as functions of $I_{D}$. We start by choosing a reasonable $V_{G S}-V_{T H}$, such as 200 mV, which corresponds to $I_{D, R E F}$ and $g_{m, R E F}$. Next, we scale the width and drain current by the factor $g_{m 1} / g_{m, R E F}$.\nimage_name:Figure 11.18 Translation of overdrive to $g_{m, R E F}$.\ndescription:Figure 11.18 features a dual plot illustrating the relationship between transconductance ($g_m$) and overdrive voltage ($V_{GS} - V_{TH}$) as a function of drain current ($I_D$). This parametric plot displays $g_m$ and $V_{GS} - V_{TH}$ against $I_D$ on a shared axis.\n\n1. **Graph Type and Function:**\n- The graph is a parametric plot depicting $g_m$ and $V_{GS} - V_{TH}$ versus $I_D$.\n\n2. **Axes Labels and Units:**\n- The horizontal axis is labeled $I_D$, indicating the drain current.\n- The vertical axis includes two parameters:\n- $g_m$, representing transconductance.\n- $V_{GS} - V_{TH}$, denoting the overdrive voltage, marked at 200 mV.\n\n3. **General Behavior and Trends:**\n- The plot exhibits two curves originating from a common point on the $I_D$ axis.\n- The $g_m$ curve rises with increasing $I_D$, signifying a direct correlation.\n- The $V_{GS} - V_{TH}$ curve declines as $I_D$ increases, indicating an inverse relationship.\n\n4. **Key Features and Technical Aspects:**\n- The reference point $(I_{D, REF}, g_{m, REF})$ is designated, representing a specific operating condition.\n- The device width is noted as $W = W_{REF}$, indicating constancy for this reference condition.\n\n5. **Annotations and Specific Data Points:**\n- A specific overdrive voltage of 200 mV is marked on the $V_{GS} - V_{TH}$ curve.\n- The reference transconductance $g_{m, REF}$ is indicated on the $g_m$ curve.\n- The intersection of these parameters at $I_{D, REF}$ is highlighted, signifying a balanced operating point for the reference device.\n\nIf the aforementioned method results in an unacceptably high $I_{D}$, we can opt for a lower overdrive, such as 150 mV, and repeat the previous steps."
},
{
    "text": "Our methodology presumes that the drain current and overdrive voltage are given, necessitating the determination of other device parameters. Given the criticality of power consumption and voltage headroom in contemporary analog design, this presumption is generally valid. However, if a design problem only specifies the transconductance and we need to calculate the remaining parameters, how do we determine the transistor's drain current, overdrive voltage, and dimensions?\n\nTwo scenarios must be considered. (1) We choose a specific $W / L$ and increase $I_{D}$ until the desired transconductance, $g_{m 1}$, is achieved. In this scenario, the required $I_{D}$, and thus the power consumption, might be excessively high. More critically, the overdrive voltage could become unacceptably large, leaving minimal voltage swing headroom. (2) We select a reasonable $I_{D}$ (possibly based on a power budget) and enhance $W / L$ to attain $g_{m 1}$. Here, we might fail to reach $g_{m 1}$; increasing $W / L$ (and thereby decreasing $V_{G S}$) can push the device into the subthreshold region, where $g_{m}$ cannot surpass $I_{D} / (\\xi V_{T})$. This implies that the chosen current is inadequate, necessitating a quick check to ensure the upper limit of $I_{D} / (\\xi V_{T})$ is achievable within the current budget.\n\nThese scenarios underscore the need for a systematic approach to parameter selection when only $g_{m 1}$ is known. To address this, we revisit the concept of the reference device and, through simulations, create two plots for it. As depicted in Fig. 11.18, these plots illustrate $g_{m}$ and $V_{G S} - V_{T H}$ as functions of $I_{D}$. We start by choosing a reasonable $V_{G S} - V_{T H}$, say 200 mV, which corresponds to $I_{D, R E F}$ and $g_{m, R E F}$. Next, we scale the width and drain current by the factor $g_{m 1} / g_{m, R E F}$.\n\n**Figure 11.18 Description:**\nThe graph in Figure 11.18 is a dual plot depicting the relationship between transconductance ($g_m$) and overdrive voltage ($V_{GS} - V_{TH}$) as functions of drain current ($I_D$). It is a parametric plot where both $g_m$ and $V_{GS} - V_{TH}$ are plotted against $I_D$ on a shared axis.\n\n1. **Graph Type and Function:**\n- The graph is a parametric plot showing $g_m$ and $V_{GS} - V_{TH}$ versus $I_D$.\n\n2. **Axes Labels and Units:**\n- The horizontal axis is labeled $I_D$, representing the drain current.\n- The vertical axis includes two parameters:\n  - $g_m$, the transconductance.\n  - $V_{GS} - V_{TH}$, the overdrive voltage, marked at 200 mV.\n\n3. **Behavior and Trends:**\n- The plot features two curves originating from a common point on the $I_D$ axis.\n- The $g_m$ curve rises with increasing $I_D$, indicating a direct relationship.\n- The $V_{GS} - V_{TH}$ curve declines as $I_D$ increases, showing an inverse relationship.\n\n4. **Key Features and Technical Details:**\n- The reference point $(I_{D, REF}, g_{m, REF})$ is marked, denoting a specific operating condition.\n- The device width is indicated as $W = W_{REF}$, suggesting constancy for this reference condition.\n\n5. **Annotations and Specific Data Points:**\n- A specific overdrive voltage of 200 mV is noted on the $V_{GS} - V_{TH}$ curve.\n- The reference transconductance $g_{m, REF}$ is highlighted on the $g_m$ curve.\n- The intersection of these parameters at $I_{D, REF}$ is emphasized, indicating a balanced operating point for the reference device.\n\nIf the above method results in an excessively high $I_{D}$, we can opt for a smaller overdrive, such as 150 mV, and repeat the previous steps."
},
{
    "text": "Our method assumes that the drain current and overdrive voltage are given, with other device parameters to be determined. Given the critical nature of power consumption and voltage headroom in modern analog design, this assumption is generally valid. However, if a design problem specifies only the transconductance and we need to calculate the remaining parameters, how do we determine the transistor's drain current, overdrive voltage, and dimensions?\n\nTwo scenarios must be considered. (1) We choose a specific $W / L$ and increase $I_{D}$ until the desired transconductance, $g_{m 1}$, is achieved. In this case, the required $I_{D}$, and thus the power consumption, might be excessively high. More importantly, the overdrive voltage could become unacceptably large, leaving minimal headroom for voltage swings. (2) We select a reasonable $I_{D}$ (perhaps based on a power budget) and increase $W / L$ to attain $g_{m 1}$. However, we might not achieve $g_{m 1}$; increasing $W / L$ (and thereby decreasing $V_{G S}$) can push the device into the subthreshold region, where $g_{m}$ cannot exceed $I_{D} / (\\xi V_{T})$. This implies that the chosen current is inadequate, necessitating a check to see if the upper limit of $I_{D} / (\\xi V_{T})$ can be met with the current budget.\n\nThese scenarios underscore the need for a systematic approach to selecting device parameters when only $g_{m 1}$ is known. To address this, we revisit the concept of the reference device and, using simulations, create two plots for it. As depicted in Fig. 11.18, these plots show $g_{m}$ and $V_{G S} - V_{T H}$ as functions of $I_{D}$. We start by choosing a reasonable $V_{G S} - V_{T H}$, such as 200 mV, which corresponds to $I_{D, R E F}$ and $g_{m, R E F}$. Next, we scale the width and drain current by the factor $g_{m 1} / g_{m, R E F}$.\n\n**Figure 11.18 Description:**\nThe graph in Figure 11.18 is a dual plot illustrating the relationship between transconductance ($g_m$) and overdrive voltage ($V_{GS} - V_{TH}$) as functions of drain current ($I_D$). It is a parametric plot where both $g_m$ and $V_{GS} - V_{TH}$ are plotted against $I_D$ on a shared axis.\n\n1. **Graph Type and Function:**\n- The graph is a parametric plot showing $g_m$ and $V_{GS} - V_{TH}$ versus $I_D$.\n\n2. **Axes Labels and Units:**\n- The horizontal axis is labeled $I_D$, representing the drain current.\n- The vertical axis includes two parameters:\n  - $g_m$, the transconductance.\n  - $V_{GS} - V_{TH}$, the overdrive voltage, marked at 200 mV.\n\n3. **Behavior and Trends:**\n- The plot features two curves originating from a common point on the $I_D$ axis.\n- The $g_m$ curve rises with increasing $I_D$, indicating a direct relationship.\n- The $V_{GS} - V_{TH}$ curve declines as $I_D$ increases, showing an inverse relationship.\n\n4. **Key Features and Technical Details:**\n- The reference point $(I_{D, REF}, g_{m, REF})$ is indicated, representing a specific operating condition.\n- The device width is shown as $W = W_{REF}$, suggesting a constant width for this reference condition.\n\n5. **Annotations and Data Points:**\n- A specific overdrive voltage of 200 mV is noted on the $V_{GS} - V_{TH}$ curve.\n- The reference transconductance $g_{m, REF}$ is marked on the $g_m$ curve.\n- The intersection of these parameters at $I_{D, REF}$ is highlighted, denoting a balanced operating point for the reference device.\n\nIf the above method results in an unacceptably high $I_{D}$, we can opt for a smaller overdrive, such as 150 mV, and repeat the previous steps."
},
{
    "text": "In this section, we aim to replicate the operational amplifier design examples from Chapter 9, but in a 40-nm technology. Our focus is on achieving the following standard specifications:\n\n- Differential Output Voltage Swing $=1 \\mathrm{~V}_{p p}$\n- Power Consumption $=2 \\mathrm{~mW}$\n- Voltage Gain $=500$\n- Supply Voltage $=1 \\mathrm{~V}$\n\n[^81]Given that the single-ended output swing of $0.5 \\mathrm{~V}_{\\mathrm{pp}}$ is sufficiently low, telescopic or folded-cascode op amps emerge as viable options. Consequently, we investigate these configurations before determining if a two-stage op amp is required.\n\nSome remarks on our transistor sizing approach are in order. We intend to start with the smallest permissible width and length, unless specific needs related to current, transconductance, $V_{D, s a t}$, output resistance, or other factors dictate otherwise. Notably, in the designs explored in this chapter, all transistor widths exceed the minimum threshold. Additionally, for the sake of simplicity, we might uniformly scale the drawn $W$ and $L$, even though this does not maintain the effective $W / L$ ratio precisely."
},
{
    "text": "In this section, we aim to replicate the operational amplifier design examples from Chapter 9, but using 40-nm technology. Our focus is on achieving the following standard specifications:\n\n- Differential Output Voltage Swing $=1 \\mathrm{~V}_{p p}$\n- Power Consumption $=2 \\mathrm{~mW}$\n- Voltage Gain $=500$\n- Supply Voltage $=1 \\mathrm{~V}$\n\n[^81]Given that the single-ended output swing of $0.5 \\mathrm{~V}_{\\mathrm{pp}}$ is sufficiently low, telescopic or folded-cascode op amps emerge as viable options. Consequently, we will investigate these configurations before determining if a two-stage op amp is required.\n\nSome remarks on our approach to transistor sizing are in order. Our intention is to start with the smallest permissible width and length, unless specific needs related to current, transconductance, $V_{D, s a t}$, output resistance, or other factors dictate otherwise. Notably, in the designs explored in this chapter, all transistor widths exceed the minimum threshold. Additionally, for the sake of simplicity, we might uniformly scale the drawn $W$ and $L$, despite the fact that the effective $W / L$ ratio does not remain precisely constant."
},
{
    "text": "In this section, we aim to replicate the operational amplifier design examples from Chapter 9, but using 40-nm technology. Our focus is on achieving the following standard specifications:\n\n- Differential Output Voltage Swing: $1 \\mathrm{~V}_{p p}$\n- Power Consumption: $2 \\mathrm{~mW}$\n- Voltage Gain: $500$\n- Supply Voltage: $1 \\mathrm{~V}$\n\n[^81]Given that the single-ended output swing of $0.5 \\mathrm{~V}_{\\mathrm{pp}}$ is sufficiently low, telescopic or folded-cascode op amps emerge as viable options. Consequently, we investigate these configurations before determining if a two-stage op amp is required.\n\nSome remarks on our approach to transistor sizing are in order. Our intention is to start with the smallest permissible width and length, unless specific constraints related to current, transconductance, $V_{D, s a t}$, output resistance, or other factors dictate otherwise. Notably, in the designs explored in this chapter, all transistor widths exceed the minimum threshold. Additionally, for the sake of simplicity, we might uniformly scale the drawn $W$ and $L$, even though this does not ensure that the effective $W / L$ ratio remains precisely constant."
},
{
    "text": "In this segment, we aim to replicate the operational amplifier design examples from Chapter 9, but using 40-nm technology. Our focus is on meeting the following standard specifications:\n\n- Differential Output Voltage Swing: $1 \\mathrm{~V}_{p p}$\n- Power Consumption: $2 \\mathrm{~mW}$\n- Voltage Gain: $500$\n- Supply Voltage: $1 \\mathrm{~V}$\n\n[^81]Given that the single-ended output swing of $0.5 \\mathrm{~V}_{\\mathrm{pp}}$ is sufficiently low, telescopic or folded-cascode op amps emerge as viable options. Consequently, we investigate these configurations before determining if a two-stage op amp is required.\n\nSome comments on our approach to transistor sizing are in order. Our intention is to start with the smallest permissible width and length, unless specific needs related to current, transconductance, $V_{D, s a t}$, output resistance, or other factors dictate otherwise. Notably, in the designs explored in this chapter, all transistor widths exceed the minimum threshold. Additionally, for the sake of simplicity, we might uniformly scale the drawn $W$ and $L$ by the same factor, despite the fact that the effective $W / L$ ratio does not remain precisely constant."
},
{
    "text": "In this section, we aim to revisit the operational amplifier design examples from Chapter 9, now implemented in 40-nm technology. Our focus is on meeting the following standard specifications:\n\n- Differential Output Voltage Swing $=1 \\mathrm{~V}_{p p}$\n- Power Consumption $=2 \\mathrm{~mW}$\n- Voltage Gain $=500$\n- Supply Voltage $=1 \\mathrm{~V}$\n\n[^81]Given that the single-ended output swing of $0.5 \\mathrm{~V}_{\\mathrm{pp}}$ is sufficiently low, telescopic or folded-cascode op amps emerge as viable options. Consequently, we investigate these configurations before determining if a two-stage op amp is required.\n\nSome remarks on our approach to transistor sizing are in order. We intend to start with the smallest permissible width and length, unless specific needs related to current, transconductance, $V_{D, s a t}$, output resistance, or other factors dictate otherwise. Notably, in the designs explored in this chapter, all transistor widths exceed the minimum threshold. Additionally, for the sake of simplicity, we might uniformly scale the drawn $W$ and $L$, even though this does not maintain the effective $W / L$ ratio precisely."
},
{
    "text": "In this segment, we aim to replicate the operational amplifier design examples from Chapter 9, but using 40-nm technology. Our focus is on meeting the following standard specifications:\n\n- Differential Output Voltage Swing: $1 \\mathrm{~V}_{p p}$\n- Power Consumption: $2 \\mathrm{~mW}$\n- Voltage Gain: $500$\n- Supply Voltage: $1 \\mathrm{~V}$\n\n[^81]Given that the single-ended output swing of $0.5 \\mathrm{~V}_{\\mathrm{pp}}$ is sufficiently low, telescopic or folded-cascode op amps emerge as viable options. Consequently, we investigate these configurations before determining if a two-stage op amp is required.\n\nSome remarks on our approach to transistor sizing are in order. Our intention is to start with the smallest permissible width and length, unless specific conditions related to current, transconductance, $V_{D, s a t}$, output resistance, or other factors necessitate otherwise. Notably, in the designs explored in this chapter, all transistor widths exceed the minimum threshold. Additionally, for the sake of simplicity, we might uniformly scale the drawn $W$ and $L$, despite the fact that the effective $W / L$ ratio does not remain precisely constant."
},
{
    "text": "In this section, our aim is to replicate the operational amplifier design examples from Chapter 9, but using 40-nm technology. We are focusing on the following standard specifications:\n\n- Differential Output Voltage Swing $=1 \\mathrm{~V}_{p p}$\n- Power Consumption $=2 \\mathrm{~mW}$\n- Voltage Gain $=500$\n- Supply Voltage $=1 \\mathrm{~V}$\n\n[^81]Given that the single-ended output swing of $0.5 \\mathrm{~V}_{\\mathrm{pp}}$ is sufficiently low, telescopic or folded-cascode op amps emerge as viable options. Consequently, we will investigate these configurations before determining if a two-stage op amp is required.\n\nSome remarks on our approach to transistor sizing are in order. Our intention is to start with the smallest permissible width and length, unless specific needs related to current, transconductance, $V_{D, s a t}$, output resistance, or other factors dictate otherwise. Notably, in the designs explored in this chapter, all transistor widths exceed the minimum threshold. Additionally, for the sake of simplicity, we might uniformly scale the drawn $W$ and $L$ by the same factor, despite the fact that the effective $W / L$ ratio does not remain precisely constant."
},
{
    "text": "In this section, we aim to revisit the operational amplifier design examples from Chapter 9, but this time using 40-nm technology. Our focus is on achieving the following standard specifications:\n\n- Differential Output Voltage Swing: $1 \\mathrm{~V}_{p p}$\n- Power Consumption: $2 \\mathrm{~mW}$\n- Voltage Gain: $500$\n- Supply Voltage: $1 \\mathrm{~V}$\n\n[^81]Given that the single-ended output swing of $0.5 \\mathrm{~V}_{\\mathrm{pp}}$ is sufficiently low, telescopic or folded-cascode op amps emerge as viable options. Consequently, we will investigate these configurations before determining if a two-stage op amp is required.\n\nIt is important to highlight some aspects of our transistor sizing approach. Our intention is to start with the smallest permissible width and length, unless specific needs related to current, transconductance, $V_{D, s a t}$, output resistance, or other factors dictate otherwise. Notably, in the designs explored in this chapter, all transistor widths exceed the minimum threshold. Additionally, for the sake of simplicity, we might uniformly scale the drawn $W$ and $L$, even though this does not ensure that the effective $W / L$ ratio remains precisely constant."
},
{
    "text": "Can a telescopic-cascode operational amplifier topology fulfill the specified requirements? In this section, we investigate this possibility. It might not, but we will gain significant insights. Consider the circuit depicted in Fig. 11.19. From the total supply current of 2 mA, we allocate $50 \\mu \\mathrm{A}$ for $I_{R E F 1}$, $50 \\mu \\mathrm{A}$ for $I_{R E F 2}$, and 0.95 mA for each branch of the differential pair. We must now distribute the transistor drain-source voltages to accommodate a single-ended peak-to-peak output swing of 0.5 V; specifically, we need to allocate the remaining 0.5 V across $M_{9}$, $M_{1,2}$, $M_{3,4}$, $M_{5,6}$, and $M_{7,8}$. Let's assign a $V_{D S}$ of 100 mV to each, despite the lower mobility of the PMOS devices. With the bias currents and overdrives known, we can determine the $W / L$ ratios by examining the transistor I/V characteristics.\n\n**Figure Description:**\n- **Figure 11.19:** Telescopic-cascode op amp\n  - **Components:**\n    - Mb2: PMOS, S: VDD, D: Y, G: Y\n    - M7: PMOS, S: VDD, D: ssd7, G: X\n    - M8: PMOS, S: VDD, D: sbd8, G: X\n    - M5: PMOS, S: ssd7, D: Voutp, G: Vb2\n    - M6: PMOS, S: sbd8, D: Voutn, G: Vb2\n    - M1: NMOS, S: GND, D: diss3, G: Vinp\n    - M2: NMOS, S: GND, D: d2s4, G: Vinn\n    - M3: NMOS, S: diss3, D: Voutp, G: Vb1\n    - M4: NMOS, S: d2s4, D: Voutn, G: Vb1\n    - M9: NMOS, S: GND, D: P, G: X\n    - Mb1: NMOS, S: GND, D: X, G: X\n  - **Additional Info:** The circuit is a telescopic-cascode operational amplifier featuring a differential input pair (M1 and M2), cascode transistors (M3 and M4), and current mirror loads (M5 and M6). PMOS transistors (M7 and M8) serve as cascode current sources, with biasing provided by Mb1 and Mb2. The design aims for high gain with a single-ended output swing of 0.5 V.\n\nBefore diving into the details, we should assess the feasibility of the design, particularly regarding the required voltage gain. We make three observations: (1) for $L=40 \\mathrm{~nm}$, the intrinsic gain, $g_{m} r_{O}$, of NMOS devices is approximately 7 to 10, while for PMOS devices it is around 5 to 7, (2) achieving $g_{m} r_{O}$ beyond 10 for PFETs is challenging with reasonable device dimensions (unless we opt for longer lengths, compromising speed), and (3) approximating $g_{m}$ as $2 I_{D} /\\left(V_{G S}-V_{T H}\\right) = 2 \\times 0.95 \\mathrm{~mA} / 100 \\mathrm{mV} = 19 \\mathrm{mS}$, we estimate $r_{O} \\approx 530 \\Omega$ from $g_{m} r_{O} \\approx 10$.\n\nApplying these values to the telescopic topology in Fig. 11.19, if $g_{m 1,2} \\approx 19 \\mathrm{mS}$, then for the gain, $G_{m} R_{\\text {out }}$, to reach 500, the op amp's output impedance must exceed $26 \\mathrm{k} \\Omega$, equivalent to $\\left(g_{m 5,6} r_{O 5,6}\\right) r_{O 7,8}$, highlighting a significant limitation. However, with $g_{m 3,4} r_{O 3,4} \\approx 10$ and $r_{O 7,8} \\approx 530 \\Omega$ (from the third observation), we get $\\left(g_{m 3,4} r_{O 3,4}\\right) r_{O 1,2} \\approx 5.3 \\mathrm{k} \\Omega$, resulting in a voltage gain of only about 100, even if the PMOS devices have $\\lambda=0$. This fivefold shortfall renders the telescopic configuration impractical for a gain of 500.\n\nCuriosity drives us to proceed with the design to see what performance can be achieved. We use simulations to construct the I/V characteristics of NMOS and PMOS devices with $L=40 \\mathrm{~nm}$ and 80 nm, predicting that the minimum length results in an unacceptably low $r_{O}$ and $g_{m} r_{O}$. The simulation parameters must ensure that the devices remain in saturation for $\\left|V_{D S}\\right| \\geq 100 \\mathrm{mV}$. Given the ambiguity in defining threshold and overdrive in nanometer technologies, we adjust $V_{G S}$ in simulations to ensure saturation.\n\nThe results are plotted in Fig. 11.20(a) for $(W / L)_{N}=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ and $10 \\mu \\mathrm{~m} / 80 \\mathrm{~nm}$ with $V_{G S}=300 \\mathrm{mV}$, and in Fig. 11.20(b) for $(W / L)_{P}=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ and $5 \\mu \\mathrm{~m} / 80 \\mathrm{~nm}$ with $V_{G S}=-400 \\mathrm{mV}$. Some remarks are in order. First, distinguishing between triode and saturation regions is difficult, especially for PFETs. In fact, the $40-\\mathrm{nm}$ PMOS device behaves almost like a resistor, showing a decreasing output impedance as $\\left|V_{D S}\\right|$ approaches $400 \\mathrm{mV}$. For the other three characteristics, a \"knee\" point can be roughly identified beyond which the slope decreases significantly. The gate-source voltages are chosen to place this point below $\\left|V_{D S}\\right|=100 \\mathrm{mV}$.\n\nSecond, at $V_{D S}=100 \\mathrm{mV}$, the $10-\\mu \\mathrm{m} / 80-\\mathrm{nm}$ NMOS transistor provides an output resistance of $22.8 \\mathrm{k} \\Omega$ and a drain current of $16 \\mu \\mathrm{~A}$. If scaled up to carry $950 \\mu \\mathrm{~A}$ with the same terminal voltages, the device exhibits an $r_{O}$ of $385 \\Omega$. Similarly, the $5-\\mu \\mathrm{m} / 80-\\mathrm{nm}$ PMOS transistor has an $r_{O}$ of $18.45 \\mathrm{k} \\Omega$ at $V_{D S}=-100 \\mathrm{mV}$ with $I_{D}=15 \\mu \\mathrm{~A}$, offering $r_{O}=290 \\Omega$ if scaled up to carry $950 \\mu \\mathrm{~A}$. These low $r_{O}$ values are discouraging, but we continue exploring.\n\nWe now scale the NMOS and PMOS device widths to support a drain current of $950 \\mu \\mathrm{~A}$ with $V_{G S, N}=300 \\mathrm{mV}$, $V_{G S, P}=-400 \\mathrm{mV}$, and $\\left|V_{D S}\\right|=100 \\mathrm{mV}$. The resulting design is shown in Fig. 11.21. As a general principle, we prefer using minimum-length devices in the signal path to maximize speed (or at least minimize capacitance for a given $g_{m}$). It is surprising to see such large widths in 40-nm technology for a drain current of $950 \\mu \\mathrm{~A}$, an unavoidable outcome of confining $\\left|V_{D S}\\right|$ to 100 mV.\n\n**Figure Description:**\n- **Figure 11.21:** First design of telescopic-cascode op amp\n  - **Components:**\n    - M1: NMOS, S: P, D: A, G: Vip\n    - M2: NMOS, S: P, D: B, G: Vin\n    - M3: NMOS, S: A, D: X, G: Vb1\n    - M4: NMOS, S: B, D: Y, G: Vb1\n    - M5: PMOS, S: VDD, D: X, G: Vb2\n    - M6: PMOS, S: VDD, D: Y, G: Vb2\n    - M7: PMOS, S: VDD, D: C, G: Vb3\n    - M8: PMOS, S: VDD, D: D, G: Vb3\n    - Iss: CurrentSource, value: 1.9 mA, ports: {Np: VDD, Nn: P}\n  - **Additional Info:** This design uses minimum-length devices to maximize speed and minimize capacitance for a given $g_{m}$. The bias voltages are chosen to optimize performance. The NMOS transistors (M1 and M2) form the input differential pair, while the PMOS transistors (M7 and M8) act as the load. The current source Iss provides a tail current of 1.9 mA.\n\n**Figure 11.21:** First design of telescopic-cascode op amp.\n\nThe bias voltages are initially set as follows: (a) the input common-mode level, $V_{C M, i n}$, is 100 mV plus $V_{G S 1,2}$ (300 mV), (b) $V_{b 1}$ is $V_{D 1,2}$ (200 mV) plus $V_{G S 3,4}$ (300 mV), (c) $V_{b 2}$ is $V_{D D}-\\left|V_{D S 7,8}\\right|-\\left|V_{G S 5,6}\\right|$, and (d) $V_{b 3}$ is $V_{D D}-\\left|V_{G S 7,8}\\right|$. Simulating the circuit with these values may result in a very low or high output common-mode level due to the lack of common-mode feedback, causing $\\left|I_{D 7,8}\\right|$ to deviate from $1.9 \\mathrm{~mA} / 2$. We address this by slightly adjusting $V_{b 3}$ for now.\n\nWe perform a dc sweep simulation of the differential input voltage, $V_{i n}$, and examine the voltages at various nodes in Fig. 11.21 to ensure the transistors are operating correctly. As shown in Fig. 11.22, the drain voltages of $M_{1}$ and $M_{2}$ are around 220 mV in the middle of the range, and the drain voltages of $M_{7}$ and $M_{8}$ are close to the targeted value."
},
{
    "text": "Is a telescopic-cascode operational amplifier topology capable of meeting the specified requirements? This section investigates this possibility. While it may not fulfill the criteria, we will gain significant insights. Consider the circuit depicted in Fig. 11.19. From the total supply current of 2 mA, we allocate 50 µA for \\(I_{R E F 1}\\), 50 µA for \\(I_{R E F 2}\\), and 0.95 mA for each branch of the differential pair. We must now distribute the transistor drain-source voltages to accommodate a single-ended peak-to-peak output swing of 0.5 V; specifically, we need to allocate the remaining 0.5 V across \\(M_{9}\\), \\(M_{1,2}\\), \\(M_{3,4}\\), \\(M_{5,6}\\), and \\(M_{7,8}\\). Let's assign a \\(V_{D S}\\) of 100 mV to each, despite the lower mobility of the PMOS devices. With the bias currents and overdrives known, we can determine the \\(W / L\\) ratios by examining the transistor I/V characteristics.\n\n**Figure Description:**\nFigure 11.19 illustrates a telescopic-cascode operational amplifier. It includes a differential input pair \\(M1\\) and \\(M2\\), cascode transistors \\(M3\\) and \\(M4\\), and current mirror loads \\(M5\\) and \\(M6\\). The PMOS transistors \\(M7\\) and \\(M8\\) serve as cascode current sources, with biasing provided by \\(Mb1\\) and \\(Mb2\\). The amplifier is designed for high gain with a single-ended output swing of 0.5 V.\n\nBefore delving into specifics, we should assess the design's feasibility, particularly regarding the required voltage gain. We make three observations: (1) for \\(L=40 \\mathrm{~nm}\\), the intrinsic gain \\(g_{m} r_{O}\\) of NMOS devices is around 7 to 10, while for PMOS devices, it is around 5 to 7; (2) achieving \\(g_{m} r_{O}\\) beyond 10 for PFETs is challenging with reasonable device dimensions (unless we opt for longer lengths, compromising speed); and (3) approximating \\(g_{m}\\) as \\(2 I_{D} /\\left(V_{G S}-V_{T H}\\right) = 2 \\times 0.95 \\mathrm{~mA} / 100 \\mathrm{mV} = 19 \\mathrm{mS}\\), we estimate \\(r_{O} \\approx 530 \\Omega\\) from \\(g_{m} r_{O} \\approx 10\\).\n\nApplying these values to the telescopic topology in Fig. 11.19, if \\(g_{m 1,2} \\approx 19 \\mathrm{mS}\\), then for the gain \\(G_{m} R_{\\text {out }}\\) to reach 500, the op amp's output impedance must exceed 26 kΩ, equivalent to \\(\\left(g_{m 5,6} r_{O 5,6}\\right) r_{O 7,8}\\), highlighting a significant limitation. However, with \\(g_{m 3,4} r_{O 3,4} \\approx 10\\) and \\(r_{O 7,8} \\approx 530 \\Omega\\) (from the third observation), we get \\(\\left(g_{m 3,4} r_{O 3,4}\\right) r_{O 1,2} \\approx 5.3 \\mathrm{k} \\Omega\\), resulting in a voltage gain of only about 100, even if the PMOS devices have \\(\\lambda=0\\)! This fivefold shortfall makes the telescopic configuration impractical for a gain of 500.\n\nCuriosity drives us to continue with the design and assess its achievable performance. We use simulations to construct the I/V characteristics of NMOS and PMOS devices with \\(L=40 \\mathrm{~nm}\\) and 80 nm, predicting that the minimum length results in an unacceptably low \\(r_{O}\\) and \\(g_{m} r_{O}\\). The simulation parameters must ensure that the devices remain in saturation for \\(\\left|V_{D S}\\right| \\geq 100 \\mathrm{mV}\\). Given the ambiguity in defining threshold and overdrive in nanometer technologies, we adjust \\(V_{G S}\\) in simulations to ensure saturation.\n\nThe results are depicted in Fig. 11.20(a) for \\((W / L)_{N}=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}\\) and \\(10 \\mu \\mathrm{~m} / 80 \\mathrm{~nm}\\) with \\(V_{G S}=300 \\mathrm{mV}\\), and in Fig. 11.20(b) for \\((W / L)_{P}=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}\\) and \\(5 \\mu \\mathrm{~m} / 80 \\mathrm{~nm}\\) with \\(V_{G S}=-400 \\mathrm{mV}\\). Some observations are in order. First, distinguishing between triode and saturation regions is difficult, especially for PFETs. The 40-nm PMOS device behaves almost like a resistor, showing a decreasing output impedance as \\(\\left|V_{D S}\\right|\\) approaches 400 mV. For the other three characteristics, a \"knee\" point beyond which the slope drops significantly can be identified. The gate-source voltages are chosen to place this point below \\(\\left|V_{D S}\\right|=100 \\mathrm{mV}\\).\n\nSecond, at \\(V_{D S}=100 \\mathrm{mV}\\), the \\(10-\\mu \\mathrm{m} / 80-\\mathrm{nm}\\) NMOS transistor offers an output resistance of 22.8 kΩ and a drain current of 16 µA. If scaled to carry 950 µA with the same terminal voltages, the device exhibits an \\(r_{O}\\) of 385 Ω! Similarly, the \\(5-\\mu \\mathrm{m} / 80-\\mathrm{nm}\\) PMOS transistor has an \\(r_{O}\\) of 18.45 kΩ at \\(V_{D S}=-100 \\mathrm{mV}\\) with \\(I_{D}=15 \\mu \\mathrm{~A}\\), resulting in \\(r_{O}=290 \\Omega\\) when scaled to 950 µA. These low \\(r_{O}\\) values are discouraging, yet we persist.\n\nWe now scale the NMOS and PMOS device widths to handle a drain current of 950 µA with \\(V_{G S, N}=300 \\mathrm{mV}\\), \\(V_{G S, P}=-400 \\mathrm{mV}\\), and \\(\\left|V_{D S}\\right|=100 \\mathrm{mV}\\). The resulting design is shown in Fig. 11.21. As a general rule, we prefer minimum-length devices in the signal path to maximize speed (or at least minimize capacitance for a given \\(g_{m}\\)). It is surprising to see such large widths in 40-nm technology for a drain current of 950 µA, an inevitable consequence of limiting \\(\\left|V_{D S}\\right|\\) to 100 mV.\n\n**Figure Description:**\nFigure 11.21 presents the first design of a telescopic-cascode op amp. The circuit employs minimum-length devices to maximize speed and minimize capacitance for a given transconductance (gm). The bias voltages are chosen to optimize performance. The NMOS transistors \\(M1\\) and \\(M2\\) form the input differential pair, while the PMOS transistors \\(M7\\) and \\(M8\\) act as the load. The current source Iss provides a tail current of 1.9 mA.\n\nThe bias voltages are initially set as follows: (a) the input common-mode level \\(V_{C M, i n}\\) is 100 mV plus \\(V_{G S 1,2}\\) (300 mV), (b) \\(V_{b 1}\\) equals \\(V_{D 1,2}\\) (200 mV) plus \\(V_{G S 3,4}\\) (300 mV), (c) \\(V_{b 2}\\) equals \\(V_{D D}-\\left|V_{D S 7,8}\\right|-\\left|V_{G S 5,6}\\right|\\), and (d) \\(V_{b 3}\\) equals \\(V_{D D}-\\left|V_{G S 7,8}\\right|\\). Simulating the circuit with these values may result in an unusually low or high output common-mode level due to the lack of common-mode feedback, causing \\(\\left|I_{D 7,8}\\right|\\) to deviate from \\(1.9 \\mathrm{~mA} / 2\\). This issue is temporarily resolved by adjusting \\(V_{b 3}\\).\n\nWe conduct a DC sweep simulation of the differential input voltage \\(V_{i n}\\) and examine the voltages at various nodes in Fig. 11.21 to ensure the transistors operate correctly. As shown in Fig. 11.22, the drain voltages of \\(M1\\) and \\(M2\\) are around 220 mV in the mid-range, and similarly, the drain voltages of \\(M7\\) and \\(M8\\) are near the targeted value."
},
{
    "text": "Is a telescopic-cascode operational amplifier topology capable of meeting the specified requirements? In this section, we investigate this possibility. It might not be feasible, but we will gain significant insights. Consider the circuit depicted in Fig. 11.19. From the total supply current of 2 mA, we allocate $50 \\mu \\mathrm{A}$ for $I_{R E F 1}$, $50 \\mu \\mathrm{A}$ for $I_{R E F 2}$, and 0.95 mA for each branch of the differential pair. We must now distribute the transistor drain-source voltages to accommodate a single-ended peak-to-peak output swing of 0.5 V; specifically, we need to allocate the remaining 0.5 V across $M_{9}$, $M_{1,2}$, $M_{3,4}$, $M_{5,6}$, and $M_{7,8}$. Let's assign a $V_{D S}$ of 100 mV to each, despite the lower mobility of the PMOS devices. With the bias currents and overdrives known, we can determine the $W / L$ ratios by analyzing the transistor I/V characteristics.\n\n**Figure Description:**\n- **Figure 11.19**: This figure illustrates a telescopic-cascode operational amplifier. It includes a differential input pair (M1 and M2), cascode transistors (M3 and M4), and current mirror loads (M5 and M6). The PMOS transistors (M7 and M8) function as cascode current sources. Biasing is provided by Mb1 and Mb2. The amplifier is designed to achieve high gain with a single-ended output swing of 0.5 V.\n\nBefore delving into the specifics, we should assess the design's feasibility, particularly regarding the required voltage gain. We make three observations: (1) for $L=40 \\mathrm{~nm}$, the intrinsic gain ($g_{m} r_{O}$) of NMOS devices is approximately 7 to 10, while for PMOS devices, it is around 5 to 7, (2) for reasonable device dimensions, increasing $g_{m} r_{O}$ beyond 10 for PFETs is challenging (unless we opt for longer lengths, which would reduce speed), and (3) if we approximate $g_{m}$ as $2 I_{D} /\\left(V_{G S}-V_{T H}\\right) = 2 \\times 0.95 \\mathrm{~mA} / 100 \\mathrm{mV} = 19 \\mathrm{mS}$, we estimate $r_{O} \\approx 530 \\Omega$ from $g_{m} r_{O} \\approx 10$.\n\nLet's apply these values to the telescopic topology in Fig. 11.19. If $g_{m 1,2} \\approx 19 \\mathrm{mS}$, then for the gain ($G_{m} R_{\\text {out }}$) to reach 500, the op amp's output impedance must exceed $26 \\mathrm{k} \\Omega$, equivalent to $\\left(g_{m 5,6} r_{O 5,6}\\right) r_{O 7,8}$, highlighting a significant limitation. However, with $g_{m 3,4} r_{O 3,4} \\approx 10$ and $r_{O 7,8} \\approx 530 \\Omega$ (from the third observation), we get $\\left(g_{m 3,4} r_{O 3,4}\\right) r_{O 1,2} \\approx 5.3 \\mathrm{k} \\Omega$, resulting in a voltage gain of only about 100, even if the PMOS devices have $\\lambda=0$. This fivefold shortfall makes the telescopic configuration impractical for a gain of 500.\n\nCuriosity drives us to continue with the design and assess its achievable performance. We use simulations to construct the I/V characteristics of NMOS and PMOS devices with $L=40 \\mathrm{~nm}$ and 80 nm, predicting that the minimum length results in an unacceptably low $r_{O}$ and $g_{m} r_{O}$. The simulation parameters must ensure that the devices remain in saturation for $\\left|V_{D S}\\right| \\geq 100 \\mathrm{mV}$. Given the ambiguity in defining threshold and overdrive in nanometer technologies, we adjust $V_{G S}$ in simulations to ensure saturation.\n\nThe results are plotted in Fig. 11.20(a) for $(W / L)_{N}=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ and $10 \\mu \\mathrm{~m} / 80 \\mathrm{~nm}$ with $V_{G S}=300 \\mathrm{mV}$, and in Fig. 11.20(b) for $(W / L)_{P}=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ and $5 \\mu \\mathrm{~m} / 80 \\mathrm{~nm}$ with $V_{G S}=-400 \\mathrm{mV}$. Some observations are in order. First, distinguishing between triode and saturation regions is difficult, especially for PFETs. In fact, the $40-\\mathrm{nm}$ PMOS device behaves almost like a resistor, showing a decreasing output impedance as $\\left|V_{D S}\\right|$ approaches $400 \\mathrm{mV}$. For the other three characteristics, we can roughly identify a \"knee\" point beyond which the slope decreases significantly. The gate-source voltages are chosen to place this point below $\\left|V_{D S}\\right|=100 \\mathrm{mV}$.\n\nSecond, at $V_{D S}=100 \\mathrm{mV}$, the $10-\\mu \\mathrm{m} / 80-\\mathrm{nm}$ NMOS transistor provides an output resistance of $22.8 \\mathrm{k} \\Omega$ and a drain current of $16 \\mu \\mathrm{~A}$. If scaled to carry $950 \\mu \\mathrm{~A}$ with the same terminal voltages, the device exhibits an $r_{O}$ of $385 \\Omega$. Similarly, the $5-\\mu \\mathrm{m} / 80-\\mathrm{nm}$ PMOS transistor has an $r_{O}$ of $18.45 \\mathrm{k} \\Omega$ at $V_{D S}=-100 \\mathrm{mV}$ with $I_{D}=15 \\mu \\mathrm{~A}$, resulting in $r_{O}=290 \\Omega$ when scaled to carry $950 \\mu \\mathrm{~A}$. These low $r_{O}$ values are discouraging, but we proceed with the exploration.\n\nWe now scale the NMOS and PMOS device widths to support a drain current of $950 \\mu \\mathrm{~A}$ with $V_{G S, N}=300 \\mathrm{mV}$, $V_{G S, P}=-400 \\mathrm{mV}$, and $\\left|V_{D S}\\right|=100 \\mathrm{mV}$. The resulting design is shown in Fig. 11.21. As a general principle, we prefer minimum-length devices in the signal path to maximize speed (or at least minimize capacitances for a given $g_{m}$). It is surprising to see such large widths in 40-nm technology for a drain current of $950 \\mu \\mathrm{~A}$, an unavoidable outcome of limiting $\\left|V_{D S}\\right|$ to 100 mV.\n\n**Figure Description:**\n- **Figure 11.21**: This figure presents the first design of a telescopic-cascode operational amplifier. The circuit employs minimum-length devices to maximize speed and minimize capacitance for a given transconductance (gm). The bias voltages are chosen to optimize performance. The NMOS transistors M1 and M2 form the input differential pair, while the PMOS transistors M7 and M8 serve as the load. The current source Iss provides a tail current of 1.9 mA.\n\n**Figure 11.21** First design of telescopic-cascode op amp.\n\nThe bias voltages are initially set as follows: (a) the input common-mode level, $V_{C M, i n}$, is 100 mV plus $V_{G S 1,2}$ (300 mV), (b) $V_{b 1}$ is $V_{D 1,2}$ (200 mV) plus $V_{G S 3,4}$ (300 mV), (c) $V_{b 2}$ is $V_{D D}-\\left|V_{D S 7,8}\\right|-\\left|V_{G S 5,6}\\right|$, and (d) $V_{b 3}$ is $V_{D D}-\\left|V_{G S 7,8}\\right|$. Simulating the circuit with these values may result in an unusually low or high output common-mode level. This effect stems from the lack of common-mode feedback, causing $\\left|I_{D 7,8}\\right|$ to deviate from $1.9 \\mathrm{~mA} / 2$. We address this by slightly adjusting $V_{b 3}$ for now.\n\nWe perform a DC sweep simulation of the differential input voltage, $V_{i n}$, and examine the voltages at various nodes in Fig. 11.21 to ensure the transistors operate correctly. As shown in Fig. 11.22, the drain voltages of M1 and M2 are around 220 mV in the mid-range. Similarly, the drain voltages of M7 and M8 are close to the targeted values."
},
{
    "text": "Is a telescopic-cascode operational amplifier topology capable of meeting the specified requirements? In this section, we investigate this possibility. It might not be feasible, but we will gain significant insights. Consider the circuit depicted in Fig. 11.19. From the total supply current of 2 mA, we allocate $50 \\mu \\mathrm{A}$ for $I_{R E F 1}$, $50 \\mu \\mathrm{A}$ for $I_{R E F 2}$, and 0.95 mA for each branch of the differential pair. We must now distribute the transistor drain-source voltages to accommodate a single-ended peak-to-peak output swing of 0.5 V; specifically, we need to allocate the remaining 0.5 V across $M_{9}$, $M_{1,2}$, $M_{3,4}$, $M_{5,6}$, and $M_{7,8}$. Let's assign a $V_{D S}$ of 100 mV to each, despite the lower mobility of the PMOS devices. With the bias currents and overdrives known, we can determine the $W / L$ ratios by analyzing the transistor I/V characteristics.\n\n**Figure Description:**\n- **Figure 11.19**: Telescopic-cascode op amp\n  - **Components**:\n    - **Mb2**: PMOS, S: VDD, D: Y, G: Y\n    - **M7**: PMOS, S: VDD, D: ssd7, G: X\n    - **M8**: PMOS, S: VDD, D: sbd8, G: X\n    - **M5**: PMOS, S: ssd7, D: Voutp, G: Vb2\n    - **M6**: PMOS, S: sbd8, D: Voutn, G: Vb2\n    - **M1**: NMOS, S: GND, D: diss3, G: Vinp\n    - **M2**: NMOS, S: GND, D: d2s4, G: Vinn\n    - **M3**: NMOS, S: diss3, D: Voutp, G: Vb1\n    - **M4**: NMOS, S: d2s4, D: Voutn, G: Vb1\n    - **M9**: NMOS, S: GND, D: P, G: X\n    - **Mb1**: NMOS, S: GND, D: X, G: X\n  - **Extra Info**: The circuit is a telescopic-cascode operational amplifier with a differential input pair (M1, M2), cascode transistors (M3, M4), and current mirror loads (M5, M6). PMOS transistors (M7, M8) serve as cascode current sources, and biasing is provided by Mb1 and Mb2. The amplifier aims for high gain with a single-ended output swing of 0.5 V.\n\nBefore diving into the details, we should assess the feasibility of the design, particularly regarding the required voltage gain. We make three observations: (1) for $L=40 \\mathrm{~nm}$, the intrinsic gain, $g_{m} r_{O}$, of NMOS devices is approximately 7 to 10, while for PMOS devices, it is around 5 to 7; (2) achieving $g_{m} r_{O}$ beyond 10 for PFETs is challenging with reasonable device dimensions (unless we opt for longer lengths, compromising speed); (3) if we approximate $g_{m}$ as $2 I_{D} /\\left(V_{G S}-V_{T H}\\right) = 2 \\times 0.95 \\mathrm{~mA} / 100 \\mathrm{mV} = 19 \\mathrm{mS}$, we estimate $r_{O} \\approx 530 \\Omega$ from $g_{m} r_{O} \\approx 10$.\n\nApplying these values to the telescopic topology in Fig. 11.19, if $g_{m 1,2} \\approx 19 \\mathrm{mS}$, then for the gain, $G_{m} R_{\\text {out }}$, to reach 500, the op amp's output impedance must exceed $26 \\mathrm{k} \\Omega$, equivalent to $\\left(g_{m 5,6} r_{O 5,6}\\right) r_{O 7,8}$, highlighting a significant limitation. However, with $g_{m 3,4} r_{O 3,4} \\approx 10$ and $r_{O 7,8} \\approx 530 \\Omega$ (from the third observation), we get $\\left(g_{m 3,4} r_{O 3,4}\\right) r_{O 1,2} \\approx 5.3 \\mathrm{k} \\Omega$, resulting in a voltage gain of only about 100, even if the PMOS devices have $\\lambda=0$. This fivefold shortfall makes the telescopic configuration impractical for a gain of 500.\n\nCuriosity drives us to continue with the design and explore achievable performance. We use simulations to construct the I/V characteristics of NMOS and PMOS devices with $L=40 \\mathrm{~nm}$ and 80 nm, predicting that the minimum length results in an unacceptably low $r_{O}$ and $g_{m} r_{O}$. Simulation parameters must ensure device saturation for $\\left|V_{D S}\\right| \\geq 100 \\mathrm{mV}$. Given the ambiguity in defining threshold and overdrive in nanometer technologies, $V_{G S}$ adjustments in simulations are necessary to ensure saturation.\n\nThe results are plotted in Fig. 11.20(a) for $(W / L)_{N}=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ and $10 \\mu \\mathrm{~m} / 80 \\mathrm{~nm}$ with $V_{G S}=300 \\mathrm{mV}$, and in Fig. 11.20(b) for $(W / L)_{P}=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ and $5 \\mu \\mathrm{~m} / 80 \\mathrm{~nm}$ with $V_{G S}=-400 \\mathrm{mV}$. Some observations are in order. First, distinguishing between triode and saturation regions is difficult, especially for PFETs. The $40-\\mathrm{nm}$ PMOS device behaves almost like a resistor, showing a decreasing output impedance as $\\left|V_{D S}\\right|$ approaches $400 \\mathrm{mV}$. For the other three characteristics, a \"knee\" point beyond which the slope decreases significantly can be identified. The gate-source voltages are chosen to place this point below $\\left|V_{D S}\\right|=100 \\mathrm{mV}$.\n\nSecond, at $V_{D S}=100 \\mathrm{mV}$, the $10-\\mu \\mathrm{m} / 80-\\mathrm{nm}$ NMOS transistor offers an output resistance of $22.8 \\mathrm{k} \\Omega$ and a drain current of $16 \\mu \\mathrm{~A}$. If scaled to carry $950 \\mu \\mathrm{~A}$ with the same terminal voltages, the device exhibits an $r_{O}$ of $385 \\Omega$. Similarly, the $5-\\mu \\mathrm{m} / 80-\\mathrm{nm}$ PMOS transistor has an $r_{O}$ of $18.45 \\mathrm{k} \\Omega$ at $V_{D S}=-100 \\mathrm{mV}$ with $I_{D}=15 \\mu \\mathrm{~A}$, resulting in $r_{O}=290 \\Omega$ when scaled to carry $950 \\mu \\mathrm{~A}$. These low $r_{O}$ values are discouraging, but we proceed with the exploration.\n\nWe now scale the NMOS and PMOS device widths to support a drain current of $950 \\mu \\mathrm{~A}$ with $V_{G S, N}=300 \\mathrm{mV}$, $V_{G S, P}=-400 \\mathrm{mV}$, and $\\left|V_{D S}\\right|=100 \\mathrm{mV}$. The resulting design is shown in Fig. 11.21. As a general principle, we prefer minimum-length devices in the signal path to maximize speed (or at least minimize capacitance for a given $g_{m}$). It is surprising to see such large widths in 40-nm technology for a drain current of $950 \\mu \\mathrm{~A}$, an unavoidable outcome of limiting $\\left|V_{D S}\\right|$ to 100 mV.\n\n**Figure Description:**\n- **Figure 11.21**: First design of telescopic-cascode op amp\n  - **Components**:\n    - **M1**: NMOS, S: P, D: A, G: Vip\n    - **M2**: NMOS, S: P, D: B, G: Vin\n    - **M3**: NMOS, S: A, D: X, G: Vb1\n    - **M4**: NMOS, S: B, D: Y, G: Vb1\n    - **M5**: PMOS, S: VDD, D: X, G: Vb2\n    - **M6**: PMOS, S: VDD, D: Y, G: Vb2\n    - **M7**: PMOS, S: VDD, D: C, G: Vb3\n    - **M8**: PMOS, S: VDD, D: D, G: Vb3\n    - **Iss**: CurrentSource, value: 1.9 mA, ports: {Np: VDD, Nn: P}\n  - **Extra Info**: This design uses minimum-length devices to maximize speed and minimize capacitance for a given $g_{m}$. Bias voltages are optimized for performance. The input differential pair is formed by M1 and M2, while M7 and M8 act as the load. The current source Iss provides a tail current of 1.9 mA.\n\n**Figure 11.21**: First design of telescopic-cascode op amp.\n\nThe bias voltages are tentatively set as follows: (a) the input common-mode level, $V_{C M, i n}$, is 100 mV plus $V_{G S 1,2}$ (300 mV); (b) $V_{b 1}$ is $V_{D 1,2}$ (200 mV) plus $V_{G S 3,4}$ (300 mV); (c) $V_{b 2}$ is $V_{D D}-\\left|V_{D S 7,8}\\right|-\\left|V_{G S 5,6}\\right|$; and (d) $V_{b 3}$ is $V_{D D}-\\left|V_{G S 7,8}\\right|$. Simulating the circuit with these values may result in an unusually low or high output common-mode level due to the lack of common-mode feedback, causing $\\left|I_{D 7,8}\\right|$ to deviate from $1.9 \\mathrm{~mA} / 2$. This issue is temporarily resolved by adjusting $V_{b 3}$.\n\nWe perform a dc sweep simulation of the differential input voltage, $V_{i n}$, and analyze node voltages in Fig. 11.21 to ensure transistor functionality. As shown in Fig. 11.22, the drain voltages of M1 and M2 are around 220 mV mid-range, while those of M7 and M8 are near the target value."
},
{
    "text": "Can a telescopic-cascode operational amplifier topology fulfill the specified requirements? In this section, we investigate this possibility. It might not, but we will gain significant insights. Consider the circuit depicted in Fig. 11.19. From the total supply current of 2 mA, we allocate $50 \\mu \\mathrm{A}$ for $I_{R E F 1}$, $50 \\mu \\mathrm{A}$ for $I_{R E F 2}$, and 0.95 mA for each branch of the differential pair. We must now distribute the transistor drain-source voltages to accommodate a single-ended peak-to-peak output swing of 0.5 V; specifically, we need to allocate the remaining 0.5 V across $M_{9}$, $M_{1,2}$, $M_{3,4}$, $M_{5,6}$, and $M_{7,8}$. Let's assign a $V_{D S}$ of 100 mV to each, even though PMOS devices have lower mobility. With the bias currents and overdrives known, we can determine the $W / L$ ratios by examining the transistor I/V characteristics.\n\n**Figure Description:**\n- **Figure 11.19:** Telescopic-cascode op amp\n  - **Components:**\n    - Mb2: PMOS, S: VDD, D: Y, G: Y\n    - M7: PMOS, S: VDD, D: ssd7, G: X\n    - M8: PMOS, S: VDD, D: sbd8, G: X\n    - M5: PMOS, S: ssd7, D: Voutp, G: Vb2\n    - M6: PMOS, S: sbd8, D: Voutn, G: Vb2\n    - M1: NMOS, S: GND, D: diss3, G: Vinp\n    - M2: NMOS, S: GND, D: d2s4, G: Vinn\n    - M3: NMOS, S: diss3, D: Voutp, G: Vb1\n    - M4: NMOS, S: d2s4, D: Voutn, G: Vb1\n    - M9: NMOS, S: GND, D: P, G: X\n    - Mb1: NMOS, S: GND, D: X, G: X\n  - **Additional Info:** The circuit is a telescopic-cascode operational amplifier featuring a differential input pair (M1, M2), cascode transistors (M3, M4), and current mirror loads (M5, M6). PMOS transistors (M7, M8) serve as cascode current sources, with biasing provided by Mb1 and Mb2. The amplifier aims for high gain with a single-ended output swing of 0.5 V.\n\nBefore diving into the details, we should assess the feasibility of the design, particularly regarding the required voltage gain. We make three observations: (1) for $L=40 \\mathrm{~nm}$, the intrinsic gain, $g_{m} r_{O}$, of NMOS devices is around 7 to 10, while for PMOS devices, it is around 5 to 7; (2) achieving $g_{m} r_{O}$ beyond 10 for PFETs is challenging with reasonable device dimensions (unless we opt for longer lengths, compromising speed); (3) approximating $g_{m}$ as $2 I_{D} / (V_{G S} - V_{T H}) = 2 \\times 0.95 \\mathrm{~mA} / 100 \\mathrm{mV} = 19 \\mathrm{mS}$, we estimate $r_{O} \\approx 530 \\Omega$ from $g_{m} r_{O} \\approx 10$.\n\nApplying these values to the telescopic topology in Fig. 11.19, if $g_{m 1,2} \\approx 19 \\mathrm{mS}$, then for the gain, $G_{m} R_{\\text {out }}$, to reach 500, the op amp's output impedance must exceed $26 \\mathrm{k} \\Omega$, equivalent to $(g_{m 5,6} r_{O 5,6}) r_{O 7,8}$, highlighting a significant limitation. However, with $g_{m 3,4} r_{O 3,4} \\approx 10$ and $r_{O 7,8} \\approx 530 \\Omega$ (from the third observation), we get $(g_{m 3,4} r_{O 3,4}) r_{O 1,2} \\approx 5.3 \\mathrm{k} \\Omega$, resulting in a voltage gain of only about 100, even if the PMOS devices have $\\lambda=0$. This fivefold shortfall renders the telescopic configuration impractical for a gain of 500.\n\nCuriosity drives us to continue with the design and explore achievable performance. We use simulations to construct the I/V characteristics of NMOS and PMOS devices with $L=40 \\mathrm{~nm}$ and 80 nm, predicting that the minimum length results in an unacceptably low $r_{O}$ and $g_{m} r_{O}$. The simulation parameters must ensure device saturation for $\\left|V_{D S}\\right| \\geq 100 \\mathrm{mV}$. Given the ambiguity in threshold and overdrive definitions in nanometer technologies, we adjust $V_{G S}$ in simulations to ensure saturation.\n\nThe results are plotted in Fig. 11.20(a) for $(W / L)_{N}=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ and $10 \\mu \\mathrm{~m} / 80 \\mathrm{~nm}$ with $V_{G S}=300 \\mathrm{mV}$, and in Fig. 11.20(b) for $(W / L)_{P}=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ and $5 \\mu \\mathrm{~m} / 80 \\mathrm{~nm}$ with $V_{G S}=-400 \\mathrm{mV}$. Some observations are in order. First, distinguishing between triode and saturation regions is difficult, especially for PFETs. The $40-\\mathrm{nm}$ PMOS device behaves almost like a resistor, displaying a decreasing output impedance as $\\left|V_{D S}\\right|$ approaches $400 \\mathrm{mV}$. For the other three characteristics, a \"knee\" point beyond which the slope decreases significantly can be identified. The gate-source voltages are chosen to place this point below $\\left|V_{D S}\\right|=100 \\mathrm{mV}$.\n\nSecond, at $V_{D S}=100 \\mathrm{mV}$, the $10-\\mu \\mathrm{m} / 80-\\mathrm{nm}$ NMOS transistor offers an output resistance of $22.8 \\mathrm{k} \\Omega$ and a drain current of $16 \\mu \\mathrm{~A}$. If scaled to carry $950 \\mu \\mathrm{~A}$ with the same terminal voltages, the device shows an $r_{O}$ of $385 \\Omega$. Similarly, the $5-\\mu \\mathrm{m} / 80-\\mathrm{nm}$ PMOS transistor has an $r_{O}$ of $18.45 \\mathrm{k} \\Omega$ at $V_{D S}=-100 \\mathrm{mV}$ with $I_{D}=15 \\mu \\mathrm{~A}$, resulting in $r_{O}=290 \\Omega$ when scaled to $950 \\mu \\mathrm{~A}$. These low $r_{O}$ values are discouraging, but we proceed with the exploration.\n\nWe now scale the NMOS and PMOS device widths to support a drain current of $950 \\mu \\mathrm{~A}$ with $V_{G S, N}=300 \\mathrm{mV}$, $V_{G S, P}=-400 \\mathrm{mV}$, and $\\left|V_{D S}\\right|=100 \\mathrm{mV}$. The resulting design is shown in Fig. 11.21. As a general principle, we prefer minimum-length devices in the signal path to maximize speed (or at least minimize capacitance for a given $g_{m}$). It is surprising to see such large widths in 40-nm technology for a drain current of $950 \\mu \\mathrm{~A}$, an unavoidable outcome of limiting $\\left|V_{D S}\\right|$ to 100 mV.\n\n**Figure Description:**\n- **Figure 11.21:** First design of telescopic-cascode op amp\n  - **Components:**\n    - M1: NMOS, S: P, D: A, G: Vip\n    - M2: NMOS, S: P, D: B, G: Vin\n    - M3: NMOS, S: A, D: X, G: Vb1\n    - M4: NMOS, S: B, D: Y, G: Vb1\n    - M5: PMOS, S: VDD, D: X, G: Vb2\n    - M6: PMOS, S: VDD, D: Y, G: Vb2\n    - M7: PMOS, S: VDD, D: C, G: Vb3\n    - M8: PMOS, S: VDD, D: D, G: Vb3\n    - Iss: CurrentSource, value: 1.9 mA, ports: {Np: VDD, Nn: P}\n  - **Additional Info:** This design uses minimum-length devices to maximize speed and minimize capacitance for a given transconductance (gm). The bias voltages are chosen to optimize amplifier performance. The NMOS transistors (M1, M2) form the input differential pair, while the PMOS transistors (M7, M8) act as the load. The current source Iss provides a tail current of 1.9 mA.\n\n**Bias Voltage Selection:**\n- $V_{C M, i n}$: 100 mV (tail current source) + $V_{G S 1,2}$ (300 mV)\n- $V_{b 1}$: $V_{D 1,2}$ (200 mV) + $V_{G S 3,4}$ (300 mV)\n- $V_{b 2}$: $V_{D D}$ - $\\left|V_{D S 7,8}\\right|$ - $\\left|V_{G S 5,6}\\right|$\n- $V_{b 3}$: $V_{D D}$ - $\\left|V_{G S 7,8}\\right|$\n\nSimulating the circuit with these values may result in an unusually low or high output common-mode level due to the lack of common-mode feedback, causing $\\left|I_{D 7,8}\\right|$ to deviate from $1.9 \\mathrm{~mA} / 2$. This issue is temporarily resolved by adjusting $V_{b 3}$.\n\nWe perform a dc sweep simulation of the differential input voltage, $V_{i n}$, and examine the node voltages in Fig. 11.21 to ensure transistor health. Fig. 11.22 shows that the drain voltages of $M_{1}$ and $M_{2}$ are around 220 mV mid-range. Similarly, the drain voltages of $M_{7}$ and $M_{8}$ are near the target value."
},
{
    "text": "Is a telescopic-cascode operational amplifier topology capable of meeting the specified requirements? In this section, we investigate this possibility. It might not be feasible, but we will gain valuable insights. Consider the circuit depicted in Fig. 11.19. From the total supply current of 2 mA, we allocate $50 \\mu \\mathrm{A}$ for $I_{R E F 1}$, $50 \\mu \\mathrm{A}$ for $I_{R E F 2}$, and 0.95 mA for each branch of the differential pair. We must now distribute the transistor drain-source voltages to accommodate a single-ended peak-to-peak output swing of 0.5 V; specifically, we need to allocate the remaining 0.5 V across $M_{9}$, $M_{1,2}$, $M_{3,4}$, $M_{5,6}$, and $M_{7,8}$. Let's assign a $V_{D S}$ of 100 mV to each, despite the lower mobility of the PMOS devices. With the bias currents and overdrives known, we can determine the $W / L$ ratios by analyzing the transistor I/V characteristics.\n\n**Figure Description:**\n- **Figure 11.19**: This figure illustrates a telescopic-cascode operational amplifier. It includes a differential input pair (M1 and M2), cascode transistors (M3 and M4), and current mirror loads (M5 and M6). PMOS transistors M7 and M8 function as cascode current sources. Biasing is provided by Mb1 and Mb2. The amplifier is designed for high gain with a single-ended output swing of 0.5 V.\n\nBefore diving into the details, we should consider the design's feasibility, particularly regarding the required voltage gain. We make three observations: (1) for $L=40 \\mathrm{~nm}$, the intrinsic gain ($g_{m} r_{O}$) of NMOS devices is around 7 to 10, while PMOS devices are around 5 to 7, (2) for reasonable device dimensions, increasing $g_{m} r_{O}$ beyond 10 for PFETs is challenging (unless longer lengths are used, which reduces speed), and (3) if we approximate $g_{m}$ as $2 I_{D} /\\left(V_{G S}-V_{T H}\\right) = 2 \\times 0.95 \\mathrm{~mA} / 100 \\mathrm{mV} = 19 \\mathrm{mS}$, we estimate $r_{O} \\approx 530 \\Omega$ from $g_{m} r_{O} \\approx 10$.\n\nApplying these values to the telescopic topology in Fig. 11.19, if $g_{m 1,2} \\approx 19 \\mathrm{mS}$, then for the gain ($G_{m} R_{\\text {out }}$) to reach 500, the op amp's output impedance must exceed $26 \\mathrm{k} \\Omega$, equivalent to $\\left(g_{m 5,6} r_{O 5,6}\\right) r_{O 7,8}$, highlighting a significant limitation. However, with $g_{m 3,4} r_{O 3,4} \\approx 10$ and $r_{O 7,8} \\approx 530 \\Omega$ (from the third observation), we get $\\left(g_{m 3,4} r_{O 3,4}\\right) r_{O 1,2} \\approx 5.3 \\mathrm{k} \\Omega$, resulting in a voltage gain of only about 100, even if the PMOS devices have $\\lambda=0$. This fivefold shortfall makes the telescopic configuration impractical for a gain of 500.\n\nCuriously, we proceed with the design to assess its performance. We use simulations to construct the I/V characteristics of NMOS and PMOS devices with $L=40 \\mathrm{~nm}$ and 80 nm, predicting that the minimum length results in an unacceptably low $r_{O}$ and $g_{m} r_{O}$. The simulation parameters must ensure the devices remain in saturation for $\\left|V_{D S}\\right| \\geq 100 \\mathrm{mV}$. Given the unclear definition of threshold and overdrive in nanometer technologies, we adjust $V_{G S}$ in simulations to ensure saturation.\n\nThe results are plotted in Fig. 11.20(a) for $(W / L)_{N}=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ and $10 \\mu \\mathrm{~m} / 80 \\mathrm{~nm}$ with $V_{G S}=300 \\mathrm{mV}$, and in Fig. 11.20(b) for $(W / L)_{P}=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ and $5 \\mu \\mathrm{~m} / 80 \\mathrm{~nm}$ with $V_{G S}=-400 \\mathrm{mV}$. Some remarks are in order. First, distinguishing between triode and saturation regions is difficult, especially for PFETs. In fact, the $40-\\mathrm{nm}$ PMOS device behaves almost like a resistor, showing a decreasing output impedance as $\\left|V_{D S}\\right|$ approaches $400 \\mathrm{mV}$. For the other three characteristics, we can roughly identify a \"knee\" point beyond which the slope decreases significantly. The gate-source voltages are chosen to place this point below $\\left|V_{D S}\\right|=100 \\mathrm{mV}$.\n\nSecond, at $V_{D S}=100 \\mathrm{mV}$, the $10-\\mu \\mathrm{m} / 80-\\mathrm{nm}$ NMOS transistor provides an output resistance of $22.8 \\mathrm{k} \\Omega$ and a drain current of $16 \\mu \\mathrm{~A}$. If scaled to carry $950 \\mu \\mathrm{~A}$ with the same terminal voltages, the device exhibits an $r_{O}$ of $385 \\Omega$. Similarly, the $5-\\mu \\mathrm{m} / 80-\\mathrm{nm}$ PMOS transistor has an $r_{O}$ of $18.45 \\mathrm{k} \\Omega$ at $V_{D S}=-100 \\mathrm{mV}$ with $I_{D}=15 \\mu \\mathrm{~A}$, offering $r_{O}=290 \\Omega$ if scaled to carry $950 \\mu \\mathrm{~A}$. These low $r_{O}$ values are discouraging, but we continue exploring.\n\nWe now scale the NMOS and PMOS device widths to support a drain current of $950 \\mu \\mathrm{~A}$ with $V_{G S, N}=300 \\mathrm{mV}$, $V_{G S, P}=-400 \\mathrm{mV}$, and $\\left|V_{D S}\\right|=100 \\mathrm{mV}$. The resulting design is shown in Fig. 11.21. As a general principle, we prefer minimum-length devices in the signal path to maximize speed (or at least minimize capacitances for a given $g_{m}$). It is surprising to see such large widths in 40-nm technology for a drain current of $950 \\mu \\mathrm{~A}$, an outcome of confining $\\left|V_{D S}\\right|$ to 100 mV.\n\n**Figure Description:**\n- **Figure 11.21**: This figure presents a telescopic cascode operational amplifier design using minimum-length devices for maximum speed and minimal capacitance. The bias voltages are chosen to optimize performance. NMOS transistors M1 and M2 form the input differential pair, while PMOS transistors M7 and M8 serve as the load. The current source Iss provides a tail current of 1.9 mA.\n\n**Figure 11.21**: First design of telescopic-cascode op amp.\n\nThe bias voltages are initially set as follows: (a) the input common-mode level, $V_{C M, i n}$, is 100 mV plus $V_{G S 1,2}$ (300 mV), (b) $V_{b 1}$ is $V_{D 1,2}$ (200 mV) plus $V_{G S 3,4}$ (300 mV), (c) $V_{b 2}$ is $V_{D D}-\\left|V_{D S 7,8}\\right|-\\left|V_{G S 5,6}\\right|$, and (d) $V_{b 3}$ is $V_{D D}-\\left|V_{G S 7,8}\\right|$. Simulating the circuit with these values may result in a very low or high output common-mode level due to the lack of common-mode feedback, causing $\\left|I_{D 7,8}\\right|$ to deviate from $1.9 \\mathrm{~mA} / 2$. We address this by slightly adjusting $V_{b 3}$ for now.\n\nWe perform a DC sweep simulation of the differential input voltage, $V_{i n}$, and examine the voltages at various nodes in Fig. 11.21 to ensure the transistors operate correctly. As shown in Fig. 11.22, the drain voltages of M1 and M2 are around 220 mV in the middle of the range. Similarly, the drain voltages of M7 and M8 are close to the targeted value."
},
{
    "text": "Is a telescopic-cascode operational amplifier topology capable of meeting the specified requirements? In this section, we investigate this possibility. While it might not fulfill the criteria, we will gain significant insights. Consider the circuit depicted in Fig. 11.19. From the total supply current of 2 mA, we allocate $50 \\mu \\mathrm{A}$ for $I_{R E F 1}$, $50 \\mu \\mathrm{A}$ for $I_{R E F 2}$, and 0.95 mA for each branch of the differential pair. We must now distribute the transistor drain-source voltages to accommodate a single-ended peak-to-peak output swing of 0.5 V; specifically, we need to allocate the remaining 0.5 V across $M_{9}$, $M_{1,2}$, $M_{3,4}$, $M_{5,6}$, and $M_{7,8}$. Let's assign a $V_{D S}$ of 100 mV to each, despite the lower mobility of the PMOS devices. With the bias currents and overdrives known, we can determine the $W / L$ ratios by examining the transistor I/V characteristics.\n\n**Figure Description:**\n- **Figure 11.19:** Telescopic-cascode op amp\n  - **Components:**\n    - Mb2: PMOS, S: VDD, D: Y, G: Y\n    - M7: PMOS, S: VDD, D: ssd7, G: X\n    - M8: PMOS, S: VDD, D: sbd8, G: X\n    - M5: PMOS, S: ssd7, D: Voutp, G: Vb2\n    - M6: PMOS, S: sbd8, D: Voutn, G: Vb2\n    - M1: NMOS, S: GND, D: diss3, G: Vinp\n    - M2: NMOS, S: GND, D: d2s4, G: Vinn\n    - M3: NMOS, S: diss3, D: Voutp, G: Vb1\n    - M4: NMOS, S: d2s4, D: Voutn, G: Vb1\n    - M9: NMOS, S: GND, D: P, G: X\n    - Mb1: NMOS, S: GND, D: X, G: X\n  - **Additional Info:** The circuit is a telescopic-cascode operational amplifier with a differential input pair (M1, M2), cascode transistors (M3, M4), and current mirror loads (M5, M6). PMOS transistors (M7, M8) serve as cascode current sources, and biasing is provided by Mb1 and Mb2. The design aims for high gain with a single-ended output swing of 0.5 V.\n\nBefore diving into the details, we should assess the feasibility of the design, particularly regarding the required voltage gain. We make three observations: (1) for $L=40 \\mathrm{~nm}$, the intrinsic gain, $g_{m} r_{O}$, of NMOS devices is around 7 to 10, while PMOS devices are around 5 to 7; (2) for reasonable device dimensions, increasing $g_{m} r_{O}$ beyond 10 for PFETs is challenging (unless longer lengths, which reduce speed, are used); and (3) approximating $g_{m}$ as $2 I_{D} /\\left(V_{G S}-V_{T H}\\right) = 2 \\times 0.95 \\mathrm{~mA} / 100 \\mathrm{mV} = 19 \\mathrm{mS}$, we estimate $r_{O} \\approx 530 \\Omega$ from $g_{m} r_{O} \\approx 10$.\n\nApplying these values to the telescopic topology in Fig. 11.19, if $g_{m 1,2} \\approx 19 \\mathrm{mS}$, then for the gain, $G_{m} R_{\\text {out }}$, to reach 500, the op amp's output impedance must exceed $26 \\mathrm{k} \\Omega$, equivalent to $\\left(g_{m 5,6} r_{O 5,6}\\right) r_{O 7,8}$, indicating a significant limitation. However, with $g_{m 3,4} r_{O 3,4} \\approx 10$ and $r_{O 7,8} \\approx 530 \\Omega$, we get $\\left(g_{m 3,4} r_{O 3,4}\\right) r_{O 1,2} \\approx 5.3 \\mathrm{k} \\Omega$, resulting in a voltage gain of only about 100, even if the PMOS devices have $\\lambda=0$. This fivefold shortfall makes the telescopic configuration impractical for a gain of 500.\n\nCuriously, we proceed with the design to see what performance can be achieved. We use simulations to construct the I/V characteristics of NMOS and PMOS devices with $L=40 \\mathrm{~nm}$ and 80 nm, predicting that the minimum length results in an unacceptably low $r_{O}$ and $g_{m} r_{O}$. The simulation parameters must ensure the devices remain in saturation for $\\left|V_{D S}\\right| \\geq 100 \\mathrm{mV}$. Given the ambiguous definition of threshold and overdrive in nanometer technologies, we adjust $V_{G S}$ in simulations to ensure saturation.\n\nThe results are plotted in Fig. 11.20(a) for $(W / L)_{N}=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ and $10 \\mu \\mathrm{~m} / 80 \\mathrm{~nm}$ with $V_{G S}=300 \\mathrm{mV}$, and in Fig. 11.20(b) for $(W / L)_{P}=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ and $5 \\mu \\mathrm{~m} / 80 \\mathrm{~nm}$ with $V_{G S}=-400 \\mathrm{mV}$. Some observations are in order. First, distinguishing between triode and saturation regions is difficult, especially for PFETs. The $40-\\mathrm{nm}$ PMOS device behaves almost like a resistor, showing a decreasing output impedance as $\\left|V_{D S}\\right|$ approaches $400 \\mathrm{mV}$. For the other three characteristics, a \"knee\" point beyond which the slope decreases significantly can be identified. The gate-source voltages are chosen to place this point below $\\left|V_{D S}\\right|=100 \\mathrm{mV}$.\n\nSecond, at $V_{D S}=100 \\mathrm{mV}$, the $10-\\mu \\mathrm{m} / 80-\\mathrm{nm}$ NMOS transistor provides an output resistance of $22.8 \\mathrm{k} \\Omega$ and a drain current of $16 \\mu \\mathrm{~A}$. If scaled to carry $950 \\mu \\mathrm{~A}$ with the same terminal voltages, the device exhibits an $r_{O}$ of $385 \\Omega$. Similarly, the $5-\\mu \\mathrm{m} / 80-\\mathrm{nm}$ PMOS transistor has an $r_{O}$ of $18.45 \\mathrm{k} \\Omega$ at $V_{D S}=-100 \\mathrm{mV}$ with $I_{D}=15 \\mu \\mathrm{~A}$, offering $r_{O}=290 \\Omega$ when scaled to carry $950 \\mu \\mathrm{~A}$. These low $r_{O}$ values are discouraging, but we continue exploring.\n\nWe now scale the NMOS and PMOS device widths to support a drain current of $950 \\mu \\mathrm{~A}$ with $V_{G S, N}=300 \\mathrm{mV}$, $V_{G S, P}=-400 \\mathrm{mV}$, and $\\left|V_{D S}\\right|=100 \\mathrm{mV}$. The resulting design is shown in Fig. 11.21. As a general principle, we prefer minimum-length devices in the signal path to maximize speed (or at least minimize capacitance for a given $g_{m}$). It is surprising to see such large widths in 40-nm technology for a drain current of $950 \\mu \\mathrm{~A}$, an outcome of confining $\\left|V_{D S}\\right|$ to 100 mV.\n\n**Figure Description:**\n- **Figure 11.21:** First design of telescopic-cascode op amp\n  - **Components:**\n    - M1: NMOS, S: P, D: A, G: Vip\n    - M2: NMOS, S: P, D: B, G: Vin\n    - M3: NMOS, S: A, D: X, G: Vb1\n    - M4: NMOS, S: B, D: Y, G: Vb1\n    - M5: PMOS, S: VDD, D: X, G: Vb2\n    - M6: PMOS, S: VDD, D: Y, G: Vb2\n    - M7: PMOS, S: VDD, D: C, G: Vb3\n    - M8: PMOS, S: VDD, D: D, G: Vb3\n    - Iss: CurrentSource, value: 1.9 mA, ports: {Np: VDD, Nn: P}\n  - **Additional Info:** This design uses minimum-length devices for speed and minimal capacitance. Bias voltages are chosen to optimize performance. The input differential pair is formed by M1 and M2, while M7 and M8 act as the load. The current source Iss provides a tail current of 1.9 mA.\n\n**Figure 11.21:** First design of telescopic-cascode op amp.\n\nThe bias voltages are tentatively set as follows: (a) the input common-mode level, $V_{C M, i n}$, is 100 mV plus $V_{G S 1,2}$ (300 mV); (b) $V_{b 1}$ is $V_{D 1,2}$ (200 mV) plus $V_{G S 3,4}$ (300 mV); (c) $V_{b 2}$ is $V_{D D}-\\left|V_{D S 7,8}\\right|-\\left|V_{G S 5,6}\\right|$; and (d) $V_{b 3}$ is $V_{D D}-\\left|V_{G S 7,8}\\right|$. Simulating the circuit with these values may result in a very low or high output common-mode level due to the lack of common-mode feedback, causing $\\left|I_{D 7,8}\\right|$ to deviate from $1.9 \\mathrm{~mA} / 2$. We initially address this by slightly adjusting $V_{b 3}$.\n\nWe perform a dc sweep simulation of the differential input voltage, $V_{i n}$, and examine the node voltages in Fig. 11.21 to ensure the transistors operate correctly. As shown in Fig. 11.22, the drain voltages of M1 and M2 are around 220 mV in the middle of the range, and those of M7 and M8 are near the target value."
},
{
    "text": "Is a telescopic-cascode operational amplifier topology capable of meeting the specified requirements? This section investigates this possibility. While it might not, we stand to gain significant insights. Consider the circuit depicted in Fig. 11.19. From the total supply current of 2 mA, we allocate $50 \\mu \\mathrm{A}$ for $I_{R E F 1}$, $50 \\mu \\mathrm{A}$ for $I_{R E F 2}$, and 0.95 mA for each branch of the differential pair. We must now distribute the transistor drain-source voltages to accommodate a single-ended peak-to-peak output swing of 0.5 V; specifically, we need to allocate the remaining 0.5 V across $M_{9}$, $M_{1,2}$, $M_{3,4}$, $M_{5,6}$, and $M_{7,8}$. Let's assign a $V_{D S}$ of 100 mV to each, despite the lower mobility of the PMOS devices. With the bias currents and overdrives known, we can determine the $W / L$ ratios by analyzing the transistor I/V characteristics.\n\n**Figure Description:**\n- **Figure 11.19**: Telescopic-cascode op amp\n  - **Components**:\n    - Mb2: PMOS, S: VDD, D: Y, G: Y\n    - M7: PMOS, S: VDD, D: ssd7, G: X\n    - M8: PMOS, S: VDD, D: sbd8, G: X\n    - M5: PMOS, S: ssd7, D: Voutp, G: Vb2\n    - M6: PMOS, S: sbd8, D: Voutn, G: Vb2\n    - M1: NMOS, S: GND, D: diss3, G: Vinp\n    - M2: NMOS, S: GND, D: d2s4, G: Vinn\n    - M3: NMOS, S: diss3, D: Voutp, G: Vb1\n    - M4: NMOS, S: d2s4, D: Voutn, G: Vb1\n    - M9: NMOS, S: GND, D: P, G: X\n    - Mb1: NMOS, S: GND, D: X, G: X\n  - **Extra Info**: The circuit is a telescopic-cascode operational amplifier featuring a differential input pair (M1, M2), cascode transistors (M3, M4), and current mirror loads (M5, M6). PMOS transistors (M7, M8) serve as cascode current sources, with biasing provided by Mb1 and Mb2. The design aims for high gain with a single-ended output swing of 0.5 V.\n\nBefore delving into specifics, we should assess the design's feasibility, particularly regarding the required voltage gain. We make three observations: (1) for $L=40 \\mathrm{~nm}$, the intrinsic gain, $g_{m} r_{O}$, of NMOS devices is approximately 7 to 10, while PMOS devices are around 5 to 7; (2) achieving $g_{m} r_{O}$ beyond 10 for PFETs is challenging with reasonable device dimensions (unless we opt for longer lengths, compromising speed); (3) approximating $g_{m}$ as $2 I_{D} /\\left(V_{G S}-V_{T H}\\right) = 2 \\times 0.95 \\mathrm{~mA} / 100 \\mathrm{mV} = 19 \\mathrm{mS}$, we estimate $r_{O} \\approx 530 \\Omega$ from $g_{m} r_{O} \\approx 10$.\n\nApplying these values to the telescopic topology in Fig. 11.19, if $g_{m 1,2} \\approx 19 \\mathrm{mS}$, achieving a gain, $G_{m} R_{\\text {out }}$, of 500 requires the op amp's output impedance to exceed $26 \\mathrm{k} \\Omega$, equivalent to $\\left(g_{m 5,6} r_{O 5,6}\\right) r_{O 7,8}$, highlighting a significant limitation. However, with $g_{m 3,4} r_{O 3,4} \\approx 10$ and $r_{O 7,8} \\approx 530 \\Omega$ (from the third observation), we get $\\left(g_{m 3,4} r_{O 3,4}\\right) r_{O 1,2} \\approx 5.3 \\mathrm{k} \\Omega$, resulting in a voltage gain of only about 100, even if the PMOS devices have $\\lambda=0$. This fivefold shortfall renders the telescopic configuration impractical for a gain of 500.\n\nCuriosity drives us to proceed with the design and assess achievable performance. Using simulations, we construct the I/V characteristics of NMOS and PMOS devices with $L=40 \\mathrm{~nm}$ and 80 nm, predicting that the minimum length results in an unacceptably low $r_{O}$ and $g_{m} r_{O}$. Simulation parameters must ensure device saturation for $\\left|V_{D S}\\right| \\geq 100 \\mathrm{mV}$. Given the ambiguity in defining threshold and overdrive in nanometer technologies, $V_{G S}$ must be adjusted in simulations to ensure saturation.\n\nThe results are depicted in Fig. 11.20(a) for $(W / L)_{N}=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ and $10 \\mu \\mathrm{~m} / 80 \\mathrm{~nm}$ with $V_{G S}=300 \\mathrm{mV}$, and in Fig. 11.20(b) for $(W / L)_{P}=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ and $5 \\mu \\mathrm{~m} / 80 \\mathrm{~nm}$ with $V_{G S}=-400 \\mathrm{mV}$. Several remarks are in order. First, distinguishing between triode and saturation regions is difficult, especially for PFETs. The $40-\\mathrm{nm}$ PMOS device behaves almost like a resistor, exhibiting a decreasing output impedance as $\\left|V_{D S}\\right|$ approaches $400 \\mathrm{mV}$. For the other three characteristics, a \"knee\" point beyond which the slope decreases significantly can be identified. The gate-source voltages are chosen to place this point below $\\left|V_{D S}\\right|=100 \\mathrm{mV}$.\n\nSecond, at $V_{D S}=100 \\mathrm{mV}$, the $10-\\mu \\mathrm{m} / 80-\\mathrm{nm}$ NMOS transistor offers an output resistance of $22.8 \\mathrm{k} \\Omega$ and a drain current of $16 \\mu \\mathrm{~A}$. If scaled to carry $950 \\mu \\mathrm{~A}$ with the same terminal voltages, the device exhibits an $r_{O}$ of $385 \\Omega$. Similarly, the $5-\\mu \\mathrm{m} / 80-\\mathrm{nm}$ PMOS transistor has an $r_{O}$ of $18.45 \\mathrm{k} \\Omega$ at $V_{D S}=-100 \\mathrm{mV}$ with $I_{D}=15 \\mu \\mathrm{~A}$, resulting in $r_{O}=290 \\Omega$ when scaled to carry $950 \\mu \\mathrm{~A}$. These low $r_{O}$ values are discouraging, yet we persist.\n\nWe now scale the NMOS and PMOS device widths to support a drain current of $950 \\mu \\mathrm{~A}$ with $V_{G S, N}=300 \\mathrm{mV}$, $V_{G S, P}=-400 \\mathrm{mV}$, and $\\left|V_{D S}\\right|=100 \\mathrm{mV}$. The resulting design is shown in Fig. 11.21. As a general principle, we favor minimum-length devices in the signal path to maximize speed (or at least minimize capacitance for a given $g_{m}$). It is surprising to see such large widths in 40-nm technology for a drain current of $950 \\mu \\mathrm{~A}$, an unavoidable consequence of limiting $\\left|V_{D S}\\right|$ to 100 mV.\n\n**Figure Description:**\n- **Figure 11.21**: First design of telescopic-cascode op amp\n  - **Components**:\n    - M1: NMOS, S: P, D: A, G: Vip\n    - M2: NMOS, S: P, D: B, G: Vin\n    - M3: NMOS, S: A, D: X, G: Vb1\n    - M4: NMOS, S: B, D: Y, G: Vb1\n    - M5: PMOS, S: VDD, D: X, G: Vb2\n    - M6: PMOS, S: VDD, D: Y, G: Vb2\n    - M7: PMOS, S: VDD, D: C, G: Vb3\n    - M8: PMOS, S: VDD, D: D, G: Vb3\n    - Iss: CurrentSource, value: 1.9 mA, ports: {Np: VDD, Nn: P}\n  - **Extra Info**: This design employs minimum-length devices to enhance speed and reduce capacitance for a given transconductance (gm). Bias voltages are optimized for amplifier performance. The NMOS transistors (M1, M2) form the input differential pair, while the PMOS transistors (M7, M8) act as the load. The current source Iss provides a tail current of 1.9 mA.\n\n**Bias Voltages**:\n- $V_{C M, i n}$: 100 mV (tail current source) + $V_{G S 1,2}$ (300 mV)\n- $V_{b 1}$: $V_{D 1,2}$ (200 mV) + $V_{G S 3,4}$ (300 mV)\n- $V_{b 2}$: $V_{D D}-\\left|V_{D S 7,8}\\right|-\\left|V_{G S 5,6}\\right|$\n- $V_{b 3}$: $V_{D D}-\\left|V_{G S 7,8}\\right|$\n\nSimulating the circuit with these values may reveal a very low or high output common-mode level due to the lack of common-mode feedback, causing $\\left|I_{D 7,8}\\right|$ to deviate from $1.9 \\mathrm{~mA} / 2$. This issue can be temporarily resolved by adjusting $V_{b 3}$.\n\nWe perform a dc sweep simulation of the differential input voltage, $V_{i n}$, and analyze node voltages in Fig. 11.21 to ensure transistor \"health.\" As shown in Fig. 11.22, the drain voltages of $M_{1}$ and $M_{2}$ are around 220 mV mid-range. Similarly, the drain voltages of $M_{7}$ and $M_{8}$ are near the target value."
},
{
    "text": "We proceed by examining the output characteristics, as illustrated in Fig. 11.22, which depict the voltages $V_X$ and $V_Y$. The gradient of each single-ended output around $V_{in}=0$ is roughly 15, resulting in a differential gain of 30, significantly short of our goal. It is uncertain whether this design can achieve a single-ended peak-to-peak swing of 0.5 V. It is observed that the characteristics become highly nonlinear as the outputs approach 0.7 V. At this output level, the slope yields a differential gain of approximately 6.4.\n\nThe provided images are described as graphs showing the relationship between input voltage ($V_{in}$) and various output voltages at different nodes. The x-axis represents the input voltage in millivolts (mV), ranging from -20 mV to 20 mV. The y-axis represents the voltages at different nodes:\n- Top subplot: $V_A$ and $V_B$ in millivolts (mV), ranging from 160 mV to 240 mV.\n- Middle subplot: $V_X$ and $V_Y$ in millivolts (mV), ranging from 200 mV to 800 mV.\n- Bottom subplot: $V_C$ and $V_D$ in millivolts (mV), ranging from 885 mV to 910 mV.\n\nThe overall behavior and trends observed in the subplots are as follows:\n- **Top Subplot ($V_A$, $V_B$):** $V_A$ decreases with increasing $V_{in}$, while $V_B$ increases symmetrically. They intersect at $V_{in} = 0$ mV, where both $V_A$ and $V_B$ are approximately 210 mV.\n- **Middle Subplot ($V_X$, $V_Y$):** $V_X$ decreases and $V_Y$ increases with increasing $V_{in}$. They intersect at $V_{in} = 0$ mV, where both $V_X$ and $V_Y$ are approximately 500 mV.\n- **Bottom Subplot ($V_C$, $V_D$):** $V_C$ decreases and $V_D$ increases as $V_{in}$ increases. They intersect at $V_{in} = 0$ mV, where both $V_C$ and $V_D$ are approximately 900 mV.\n\nKey features and technical details include:\n- Each subplot shows a linear relationship between the input voltage and the respective output voltages, with a clear crossing point at $V_{in} = 0$ mV.\n- The slopes of the lines indicate the differential gain at these nodes, which is crucial for analyzing the circuit's performance.\n- The graphs are annotated with gridlines and dashed lines to indicate significant intervals, aiding in precise reading of voltage values.\n- The symmetry around $V_{in} = 0$ mV is notable, indicating balanced behavior in the circuit's response to the input voltage."
},
{
    "text": "We next analyze the output characteristics illustrated in Fig. 11.22, which presents $V_{X}$ and $V_{Y}$. The slope of each single-ended output near $V_{in}=0$ is roughly 15, resulting in a differential gain of 30, significantly lower than our objective. The question arises whether this design can achieve a single-ended peak-to-peak swing of 0.5 V. It is observed that the characteristics become highly nonlinear as the outputs approach 0.7 V. At this output level, the slope indicates a differential gain of approximately 6.4.\n\nThe graph in question is a collection of three plots depicting the behavior of voltages at various nodes in relation to the input voltage $V_{in}$. Each plot is a voltage transfer characteristic, illustrating how the output voltages $V_{A}, V_{B}$, $V_{X}, V_{Y}$, and $V_{C}, V_{D}$ change with $V_{in}$.\n\n1. **Type of Graph and Function:**\n   The graphs represent voltage transfer characteristics, commonly used to depict the relationship between input and output voltages in electronic circuits.\n\n2. **Axes Labels and Units:**\n   - The x-axis for all plots is labeled $V_{in}$ (mV), representing the input voltage, ranging from -20 mV to 20 mV.\n   - The y-axis of the first plot is labeled $V_{A}, V_{B}$ (mV), ranging from 160 mV to 240 mV.\n   - The y-axis of the second plot is labeled $V_{X}, V_{Y}$ (mV), ranging from 200 mV to 800 mV.\n   - The y-axis of the third plot is labeled $V_{C}, V_{D}$ (mV), ranging from 885 mV to 910 mV.\n\n3. **Overall Behavior and Trends:**\n   - In each plot, two curves are shown, one increasing and the other decreasing, signifying complementary changes in the voltages as $V_{in}$ varies.\n   - In the first plot, as $V_{in}$ increases from -20 mV to 20 mV, $V_{A}$ decreases while $V_{B}$ increases.\n   - In the second plot, $V_{X}$ decreases and $V_{Y}$ increases as $V_{in}$ increases.\n   - In the third plot, $V_{C}$ decreases and $V_{D}$ increases with increasing $V_{in}$.\n\n4. **Key Features and Technical Details:**\n   - All plots exhibit a smooth transition without abrupt changes, suggesting linear or near-linear behavior within the given range.\n   - The slopes of these curves indicate the differential gain at each stage of the circuit.\n   - The middle plot, representing $V_{X}$ and $V_{Y}$, is particularly significant as it shows the output nodes with a more substantial voltage swing compared to the other plots.\n\n5. **Annotations and Specific Data Points:**\n   - No specific annotations or markers are present in the plots. However, the symmetry around $V_{in} = 0$ is notable, indicating balanced operation.\n   - The crossover points, where the increasing and decreasing curves meet, occur at $V_{in} = 0$ for each plot, highlighting the point of symmetry.\n\nThis graph illustrates the voltage behavior at the drains of PMOS current sources in response to varying input voltages, showcasing the symmetry and nonlinear characteristics of the system.\n\nFigure 11.22 depicts the behavior of the voltages at the drains of input transistors $\\left(V_{A}, V_{B}\\right)$, the output nodes $\\left(V_{X}, V_{Y}\\right)$, and the drains of PMOS current sources $\\left(V_{C}, V_{D}\\right)$.\n\n#### Example 11.6\n\nThe slope of the characteristics in Fig. 11.22 predicts a differential gain of 3 from the input to nodes $A$ and $B$. Explain the reason for such a high gain at the cascode nodes.\n\n#### Solution\n\nRecall from Chapter 3 that the impedance seen at the source of a cascode device is roughly equal to the impedance seen at its drain divided by its $g_{m} r_{O}$. Due to the low $g_{m} r_{O}$, the impedance seen at $A$ and $B$ is quite a lot higher than $1 / g_{m 3,4}$, leading to a large gain.\n\nLet us raise the gain by increasing $(W / L)_{3,4}$ to $600 \\mu \\mathrm{~m} / 80 \\mathrm{~nm}$. Plotted in Fig. 11.23, the characteristics exhibit a gain of about 54 but still a limited output swing.\nBias Circuit The op amp of Fig. 11.21 relies on the proper choice of $I_{S S}, V_{b 1}, V_{b 2}$, and $V_{b 3}$. We must therefore design a circuit to generate these bias quantities. We recognize that $I_{S S}$ and $V_{b 3}$ must be established by current mirror action (why?) and $V_{b 2}$ by low-voltage cascode biasing. The bias voltage $V_{b 1}$ requires a different approach.\n\nWe begin with $I_{S S}=1.9 \\mathrm{~mA}$, choosing a channel length of 40 nm and, scaling from Fig. 11.20, a width of $600 \\mu \\mathrm{~m}$ for $V_{D S}=100 \\mathrm{mV}$. Utilizing a reference budget current of $25 \\mu \\mathrm{~A}$, we arrive at the arrangement shown in Fig. 11.24(a), where $W_{12}$ is scaled down from $W_{11}$ by a factor of $1.9 \\mathrm{~mA} / 25 \\mu \\mathrm{~A}$. Since $M_{11}$ operates with a $V_{D S}$ of 100 mV , we insert $R_{1}$ in series with the drain of $M_{12}$ and select its value such that $V_{D S 12}=V_{G S 12}-V_{R 1}=100 \\mathrm{mV}$.\n\nThe above bias design is still sensitive to the CM level sensed by $M_{1}$ and $M_{2}$ because $V_{D S 11}=$ $V_{C M, \\text { in }}-V_{G S 1,2}$, whereas $V_{D S 12}=V_{G S 1,2}-V_{R 1}$. In other words, we must ensure that the drain voltage of $M_{12}$ tracks $V_{C M, i n}$. This can be accomplished as shown in Fig. 11.24(b), where $R_{1}$ is replaced by a differential pair driven by $V_{i n 1}$ and $V_{i n 2}$. With proper scaling of the widths, we now have $V_{G S 13,14}=V_{G S 1,2}$, and hence $V_{D S 12}=V_{D S 11}$.\n\nNext, we deal with the generation of $V_{b 1}$ in Fig. 11.21. This voltage must be equal to $V_{G S 3,4}+$ $V_{D S 1,2}+V_{P}$, where $V_{D S 1,2}=100 \\mathrm{mV}$. Since $V_{b 1}$ is higher than $V_{P}$ by $V_{G S 3,4}+V_{D S 1,2}$, we surmise that a diode-connected device in series with a drain-source voltage added to $V_{P}$ can produce $V_{b 1}$. Illustrated in Fig. 11.25, the idea is to match $V_{G S 15}$ to $V_{G S 3,4}$ and $V_{D S 16}$ to $V_{D S 1,2}$. The bias current $I_{b}$ must be much less than $I_{S S}$ so as to negligibly affect the power budget. We select $I_{b}=15 \\mu \\mathrm{~A}$, and hence $(W / L)_{15,16}=10 \\mu \\mathrm{~m} / 80 \\mathrm{~nm} .{ }^{9}$ It is important to observe how $V_{b 1}$ tracks $V_{C M, \\text { in }}:$ if $V_{C M, \\text { in }}$ goes up, so do $V_{P}$ and, consequently, $V_{b 1}$, thus keeping $V_{D S 1,2}$ constant. That is, $M_{15}$ and $M_{16}$ operate as level shifters. If $V_{b 1}$ were constant, a rise in $V_{C M, i n}$ would inevitably reduce $V_{D S 1,2}$ and the gain.\n\nIn order to generate $V_{b 3}$ and $V_{b 2}$, we construct a low-voltage cascode bias network as shown in Fig. 11.26. Here, transistors $M_{17}$ and $M_{18}$ are scaled down from $M_{7,8}$ and $M_{5,6}$, respectively, ensuring that $V_{D S 17}=V_{D S 7,8}$. To create $V_{b 2}=V_{D D}-\\left|V_{D S 7,8}\\right|-\\left|V_{G S 5,6}\\right|$, we again employ a diode-connected device, $M_{20}$, in series with a $V_{D S}$ (produced by $M_{19}$ ).\n\nWe should emphasize that the very narrow voltage margins dictated by the low supply make this design sensitive to mismatches between the bias branches and the core of the circuit. For example, a mismatch between $V_{G S 18}$ and $V_{G S 5,6}$ can leave less $\\left|V_{D S}\\right|$ for $M_{7,8}$, pushing these two current sources below the knee point. Also, note that we still have a few ideal current sources, which would be copied from a bandgap reference (Chapter 12).\n\nCommon-Mode Feedback With various mismatches present in the above op amp design, the PMOS currents in Fig. 11.21 are not exactly equal to $I_{S S} / 2$, forcing the output CM level toward $V_{D D}$ or ground\n\nThe graph in Figure 11.28 is a voltage versus input differential voltage plot, specifically displaying the behavior of a cascode operational amplifier. The x-axis represents the input differential voltage, $V_{in}$, in millivolts (mV), ranging from -20 mV to 20 mV. The y-axis represents the voltage in millivolts (mV), ranging from 0 mV to 800 mV.\n\nThree curves are depicted in the graph:\n\n1. **$V_X$ and $V_Y$ Curves:** These are shown with lighter lines, representing the output voltages $V_X$ and $V_Y$. As $V_{in}$ increases from -20 mV to 20 mV, $V_X$ decreases from approximately 700 mV to 300 mV, while $V_Y$ increases from approximately 300 mV to 700 mV. This indicates an inverse relationship between $V_X$ and $V_Y$ as $V_{in}$ changes.\n\n2. **Actual CM Level Curve:** Labeled as $(V_X + V_Y)/2$, this curve represents the actual common-mode level of the outputs. It is shown with a dashed line, starting at around 500 mV at $V_{in} = 0$ mV and remaining relatively constant across the range of $V_{in}$.\n\n3. **Reconstructed CM Level Curve ($V_{tot}$):** This curve is shown with a solid line, closely following the actual CM level. It starts at around 500 mV when $V_{in} = 0$ mV and maintains a similar level across the input range, indicating that $V_{tot}$ effectively reconstructs the common-mode level.\n\n**Overall Behavior and Trends:**\n- The graph illustrates the differential behavior of the cascode op amp, with $V_X$ and $V_Y$ diverging as $V_{in}$ moves from negative to positive values.\n- The common-mode levels, both actual and reconstructed, remain stable, demonstrating the effectiveness of the common-mode feedback mechanism in maintaining a constant CM level despite changes in $V_{in}$.\n\nFigure 11.28 depicts the actual CM level, $\\left(V_{X}+V_{Y}\\right) / 2$, and reconstructed CM level, $V_{t o t}$, of the cascode op amp as a function of input differential voltage."
},
{
    "text": "We proceed to examine the output characteristics illustrated in Fig. 11.22, focusing on the voltages $V_X$ and $V_Y$. The gradient of each single-ended output is roughly 15 in the region around $V_{in}=0$, which results in a differential gain of 30—a value significantly lower than our objective. It is questionable whether this design can achieve a single-ended peak-to-peak swing of 0.5 V. It is observed that the characteristics become highly nonlinear as the outputs approach 0.7 V. At this output level, the slope indicates a differential gain of approximately 6.4.\n\nThe accompanying graph presents a collection of three subplots, each illustrating the voltage behavior at various nodes (V_A, V_B), (V_X, V_Y), and (V_C, V_D) in relation to the input voltage V_in.\n\n**Graph Types and Functions:**\n- The graphs are linear plots that depict the correlation between the input voltage (V_in) and the respective output voltages.\n\n**Axes Labels and Units:**\n- **X-Axis:** Represents the input voltage (V_in) measured in millivolts (mV), spanning from -20 mV to 20 mV.\n- **Y-Axis:** Represents the voltages at the different nodes:\n  - Top subplot: V_A and V_B, measured in millivolts (mV), ranging from 160 mV to 240 mV.\n  - Middle subplot: V_X and V_Y, measured in millivolts (mV), ranging from 200 mV to 800 mV.\n  - Bottom subplot: V_C and V_D, measured in millivolts (mV), ranging from 885 mV to 910 mV.\n\n**Overall Behavior and Trends:**\n- **Top Subplot (V_A, V_B):**\n  - V_A diminishes with increasing V_in, whereas V_B increases correspondingly.\n  - The point of intersection occurs at V_in = 0 mV, with both V_A and V_B hovering around 210 mV.\n\n- **Middle Subplot (V_X, V_Y):**\n  - V_X diminishes and V_Y increases in tandem with V_in.\n  - The intersection is at V_in = 0 mV, where both V_X and V_Y are approximately 500 mV.\n\n- **Bottom Subplot (V_C, V_D):**\n  - V_C diminishes and V_D increases with the rise in V_in.\n  - The intersection at V_in = 0 mV reveals both V_C and V_D at approximately 900 mV.\n\n**Key Features and Technical Details:**\n- Each subplot exhibits a linear relationship between the input voltage and the respective output voltages, with a distinct intersection at V_in = 0 mV.\n- The slopes of these lines represent the differential gain at these nodes, which is pivotal in assessing the circuit's performance.\n\n**Annotations and Specific Data Points:**\n- The graphs are annotated with gridlines and dashed lines to denote significant intervals, facilitating the precise reading of voltage values.\n- The symmetry around V_in = 0 mV is a noteworthy feature, signifying balanced behavior in the circuit's response to the input voltage."
},
{
    "text": "In Fig. 11.22, we examine the output characteristics represented by $V_X$ and $V_Y$. The slope of the individual output curves is roughly 15 near $V_{in}=0$, resulting in a differential gain of 30, which is significantly lower than our goal. It's questionable whether this design can achieve a single-ended peak-to-peak swing of 0.5 V. We observe that the characteristics become highly nonlinear as the outputs approach 0.7 V. At this output level, the slope yields a differential gain of about 6.4.\n\nThe graphical representation consists of three subplots, each illustrating the voltage behavior at various nodes—(V_A, V_B), (V_X, V_Y), and (V_C, V_D)—in relation to the input voltage $V_{in}$.\n\n1. **Graph Type and Function:**\n   The graphs are linear plots that depict the relationship between the input voltage ($V_{in}$) and various output voltages.\n\n2. **Axes Labels and Units:**\n   - **X-Axis:** Represents the input voltage ($V_{in}$) in millivolts (mV), spanning from -20 mV to 20 mV.\n   - **Y-Axis:** Represents the voltages at different nodes:\n     - Top subplot: V_A and V_B in millivolts (mV), ranging from 160 mV to 240 mV.\n     - Middle subplot: V_X and V_Y in millivolts (mV), ranging from 200 mV to 800 mV.\n     - Bottom subplot: V_C and V_D in millivolts (mV), ranging from 885 mV to 910 mV.\n\n3. **Overall Behavior and Trends:**\n   - **Top Subplot (V_A, V_B):**\n     V_A decreases with increasing $V_{in}$, while V_B increases correspondingly. They intersect at $V_{in} = 0$ mV, where both are around 210 mV.\n   - **Middle Subplot (V_X, V_Y):**\n     V_X decreases and V_Y increases with $V_{in}$. The intersection at $V_{in} = 0$ mV has both around 500 mV.\n   - **Bottom Subplot (V_C, V_D):**\n     V_C decreases and V_D increases as $V_{in}$ increases. The intersection at $V_{in} = 0$ mV has both around 900 mV.\n\n4. **Key Features and Technical Details:**\n   Each subplot demonstrates a linear relationship between the input voltage and the respective output voltages, with a clear intersection at $V_{in} = 0$ mV. The slopes of the lines represent the differential gain at these nodes, which is crucial for assessing the circuit's performance.\n\n5. **Annotations and Specific Data Points:**\n   The graphs feature gridlines and dashed lines to mark significant intervals, facilitating the precise reading of voltage values. The symmetry around $V_{in} = 0$ mV is notable, indicating balanced behavior in the circuit's response to the input voltage."
},
{
    "text": "We proceed to analyze the output characteristics illustrated in Fig. 11.22, represented by $V_{X}$ and $V_{Y}$. It is observed that the slope of each single-ended output near $V_{in}=0$ is roughly 15, which results in a differential gain of 30—a value significantly lower than our objective. The question arises whether this design can achieve a single-ended peak-to-peak swing of 0.5 V. It is worth noting that the characteristics exhibit considerable nonlinearity as the outputs approach 0.7 V. At this output level, the slope indicates a differential gain of approximately 6.4.\n\nThe provided graphs consist of three subplots, each detailing the behavior of voltages at different nodes (V_A, V_B), (V_X, V_Y), and (V_C, V_D) relative to the input voltage V_in.\n\nType of Graph and Function:\n- The graphs are linear plots depicting the relationship between input voltage (V_in) and various output voltages.\n\nAxes Labels and Units:\n- **X-Axis:** Represents the input voltage (V_in) in millivolts (mV), spanning from -20 mV to 20 mV.\n- **Y-Axis:** Represents the voltages at different nodes:\n- Top subplot: V_A and V_B in millivolts (mV), ranging from 160 mV to 240 mV.\n- Middle subplot: V_X and V_Y in millivolts (mV), ranging from 200 mV to 800 mV.\n- Bottom subplot: V_C and V_D in millivolts (mV), ranging from 885 mV to 910 mV.\n\nOverall Behavior and Trends:\n- **Top Subplot (V_A, V_B):**\n- V_A decreases as V_in increases, while V_B increases symmetrically.\n- The intersection point occurs at V_in = 0 mV, where both V_A and V_B are approximately 210 mV.\n\n- **Middle Subplot (V_X, V_Y):**\n- V_X decreases and V_Y increases with increasing V_in.\n- The intersection occurs at V_in = 0 mV, where both V_X and V_Y are approximately 500 mV.\n\n- **Bottom Subplot (V_C, V_D):**\n- V_C decreases and V_D increases as V_in increases.\n- The intersection at V_in = 0 mV shows both V_C and V_D at approximately 900 mV.\n\nKey Features and Technical Details:\n- Each subplot displays a linear relationship between the input voltage and the respective output voltages, with a distinct crossing point at V_in = 0 mV.\n- The slopes of the lines signify the differential gain at these nodes, which is crucial for assessing the circuit's performance.\n\nAnnotations and Specific Data Points:\n- The graphs are annotated with gridlines and dashed lines to denote significant intervals, facilitating precise voltage value readings.\n- The symmetry around V_in = 0 mV is notable, reflecting balanced behavior in the circuit's response to the input voltage."
},
{
    "text": "In Figure 11.22, we examine the output characteristics depicted by $V_{X}$ and $V_{Y}$. Each single-ended output exhibits a slope near 15 in close proximity to $V_{in}=0$, resulting in a differential gain of 30, which falls short of our goal. We question whether this design can achieve a single-ended peak-to-peak swing of 0.5 V. It is observed that the characteristic becomes highly nonlinear as each output approaches 0.7 V. Indeed, around this output level, the slope yields a differential gain of approximately 6.4.\n\nThe accompanying graph consists of three subplots, each illustrating the behavior of voltages at different nodes (V_A, V_B), (V_X, V_Y), and (V_C, V_D) relative to the input voltage V_in.\n\nThe graphs are linear plots that depict the relationship between the input voltage (V_in) and various output voltages. The x-axis represents the input voltage (V_in) in millivolts (mV), ranging from -20 mV to 20 mV. The y-axis represents the voltages at different nodes:\n\n- Top subplot: V_A and V_B in millivolts (mV), ranging from 160 mV to 240 mV.\n- Middle subplot: V_X and V_Y in millivolts (mV), ranging from 200 mV to 800 mV.\n- Bottom subplot: V_C and V_D in millivolts (mV), ranging from 885 mV to 910 mV.\n\n- **Top Subplot (V_A, V_B):**\n  - V_A decreases as V_in increases, while V_B increases symmetrically.\n  - The intersection occurs at V_in = 0 mV, where both V_A and V_B are approximately 210 mV.\n\n- **Middle Subplot (V_X, V_Y):**\n  - V_X decreases and V_Y increases with increasing V_in.\n  - The intersection occurs at V_in = 0 mV, where both V_X and V_Y are approximately 500 mV.\n\n- **Bottom Subplot (V_C, V_D):**\n  - V_C decreases and V_D increases as V_in increases.\n  - The intersection at V_in = 0 mV shows both V_C and V_D at approximately 900 mV.\n\nEach subplot displays a linear relationship between the input voltage and the respective output voltages, with a clear crossing point at V_in = 0 mV. The slopes of the lines indicate the differential gain at these nodes, which is crucial for analyzing the circuit's performance.\n\nThe graphs are marked with gridlines and dashed lines to indicate significant intervals, aiding in precise reading of voltage values. The symmetry around V_in = 0 mV is a notable feature, indicating balanced behavior in the circuit's response to the input voltage."
},
{
    "text": "We then proceed to analyze the output characteristics illustrated in Fig. 11.22, which portray $V_{X}$ and $V_{Y}$. It is observed that near $V_{in}=0$, the slope of each single-ended output is roughly 15, leading to a differential gain of 30. This value falls short of our goal. It is questionable whether this design can achieve a single-ended peak-to-peak swing of 0.5 V. As the outputs approach 0.7 V, the characteristics exhibit significant nonlinearity. At this output level, the slope indicates a differential gain of approximately 6.4.\n\nThe graph in question features three subplots, each illustrating the behavior of voltages at distinct nodes—$V_A$, $V_B$, $V_X$, $V_Y$, $V_C$, and $V_D$—in relation to the input voltage $V_{in}$.\n\nGraph Types and Functions:\nThe graphs are linear plots that depict the relationship between the input voltage ($V_{in}$) and various output voltages.\n\nAxes Labels and Units:\n- **X-Axis:** Represents the input voltage ($V_{in}$) in millivolts (mV), ranging from -20 mV to 20 mV.\n- **Y-Axis:** Represents the voltages at different nodes:\n  - Top subplot: $V_A$ and $V_B$ in millivolts (mV), ranging from 160 mV to 240 mV.\n  - Middle subplot: $V_X$ and $V_Y$ in millivolts (mV), ranging from 200 mV to 800 mV.\n  - Bottom subplot: $V_C$ and $V_D$ in millivolts (mV), ranging from 885 mV to 910 mV.\n\nOverall Behavior and Trends:\n- **Top Subplot ($V_A$, $V_B$):**\n  - $V_A$ decreases with increasing $V_{in}$, while $V_B$ increases correspondingly.\n  - The intersection point occurs at $V_{in} = 0$ mV, where both $V_A$ and $V_B$ are approximately 210 mV.\n\n- **Middle Subplot ($V_X$, $V_Y$):**\n  - $V_X$ decreases and $V_Y$ increases with increasing $V_{in}$.\n  - The intersection occurs at $V_{in} = 0$ mV, where both $V_X$ and $V_Y$ are approximately 500 mV.\n\n- **Bottom Subplot ($V_C$, $V_D$):**\n  - $V_C$ decreases and $V_D$ increases as $V_{in}$ increases.\n  - The intersection at $V_{in} = 0$ mV shows both $V_C$ and $V_D$ at approximately 900 mV.\n\nKey Features and Technical Details:\n- Each subplot exhibits\nWeicts a linear relationship between the input voltage and the respective output voltages, with a clear crossing point at $V_{in} = 0$ mV.\n- The slopes of the lines indicate the differential gain at these nodes, which is a critical factor in analyzing the circuit's performance.\n\nAnnotations and Specific Data Points:\n- The graphs are marked with gridlines and dashed lines to indicate significant intervals, aiding in precise reading of voltage values.\n- The symmetry around $V_{in} = 0$ mV is a notable feature, indicating balanced behavior in the circuit's response to the input voltage."
},
{
    "text": "We proceed to analyze the output behavior as illustrated in Fig. 11.22 by the voltages $V_{X}$ and $V_{Y}$. It is observed that near $V_{in}=0$, the slope of each single-ended output is roughly 15, resulting in a differential gain of 30, which falls short of our target. The question arises whether this design can achieve a single-ended peak-to-peak swing of 0.5 V. It is important to note that the characteristic becomes highly nonlinear as each output approaches 0.7 V. In fact, around this output level, the slope yields a differential gain of approximately 6.4.\n\nThe graph consists of three subplots, each depicting the behavior of voltages at different nodes (V_A, V_B), (V_X, V_Y), and (V_C, V_D) with respect to the input voltage V_in.\n\nType of Graph and Function:\n- The graphs are linear plots showing the relationship between input voltage (V_in) and various output voltages.\n\nAxes Labels and Units:\n- **X-Axis:** Represents the input voltage (V_in) in millivolts (mV), ranging from -20 mV to 20 mV.\n- **Y-Axis:** Represents the voltages at different nodes:\n- Top subplot: V_A and V_B in millivolts (mV), ranging from 160 mV to 240 mV.\n- Middle subplot: V_X and V_Y in millivolts (mV), ranging from 200 mV to 800 mV.\n- Bottom subplot: V_C and V_D in millivolts (mV), ranging from 885 mV to 910 mV.\n\nOverall Behavior and Trends:\n- **Top Subplot (V_A, V_B):**\n- V_A decreases as V_in increases, while V_B increases symmetrically.\n- The intersection point occurs at V_in = 0 mV, where both V_A and V_B are approximately 210 mV.\n\n- **Middle Subplot (V_X, V_Y):**\n- V_X decreases and V_Y increases with increasing V_in.\n- The intersection occurs at V_in = 0 mV, where both V_X and V_Y are approximately 500 mV.\n\n- **Bottom Subplot (V_C, V_D):**\n- V_C decreases and V_D increases as V_in increases.\n- The intersection at V_in = 0 mV shows both V_C and V_D at approximately 900 mV.\n\nKey Features and Technical Details:\n- Each subplot shows a linear relationship between the input voltage and the respective output voltages, with a clear crossing point at V_in = 0 mV.\n- The slopes of the lines indicate the differential gain at these nodes, which is a critical factor in analyzing the circuit's performance.\n\nAnnotations and Specific Data Points:\n- The graphs are marked with gridlines and dashed lines to indicate significant intervals, aiding in precise reading of voltage values.\n- The symmetry around V_in = 0 mV is a notable feature, indicating balanced behavior in the circuit's response to the input voltage."
},
{
    "text": "In the upcoming assessment, we will engage in the CM feedback loop closure: we'll match $V_{t o t}$ against a reference, magnify the discrepancy, and route the outcome back to manage $I_{S S}$. For this purpose, we engineer the error amplifier as a five-transistor OTA with $W / L=5 \\mu \\mathrm{~m} / 80 \\mathrm{~nm}$ across all transistors, a tail current of $20 \\mu \\mathrm{~A}$, and a voltage amplification factor of 10. This amplifier's output manipulates a segment of the primary tail current, $I_{1}$ (refer to Fig. 11.29). For instance, assuming a $20 \\%$ discrepancy between the PMOS current sources in the op amp and the tail current source, we select $I_{1} \\approx 0.2 I_{S S}$. Fig. 11.29 illustrates the outcome, with the OTA's input and output connections arranged to establish negative feedback within the loop.\n\n#### Example 11.7\n\nElucidate why the OTA in Fig. 11.29 opts for PMOS (over NMOS) input devices.\n\n#### Solution\n\nTwo factors dictate this choice. Firstly, these transistors need to detect the CM level without compromising the $V_{D S}$ necessary for their tail current source. Given $V_{t o t} \\approx V_{D D} / 2$ here, there's no inherent bias towards NMOS or PMOS devices. Secondly, the OTA's output should align with the dc value required by $M_{T}$.\n\nGiven that $V_{H}=V_{G}$ (assuming no mismatches), and since $V_{G}$ equates to the gate-source voltage of a diode-connected NMOS transistor, it's anticipated that $M_{T}$ will, nominally, mirror the bias current of $M_{G}$ (with a multiplication factor).\n\nFig. 11.30 showcases the closed-loop dc sweep findings with $V_{\\text {ref }}=0.5 \\mathrm{~V}$.\nimage_name:Figure 11.30\ndescription:Figure 11.30 features a graph depicting the closed-loop characteristics of two variables pertinent to a cascode operational amplifier, plotted against the input differential voltage ($V_{in}$). The graph is set on a Cartesian plane, where the horizontal axis represents the input differential voltage ($V_{in}$) in millivolts, spanning from -20 mV to 20 mV, and the vertical axis represents voltage levels in millivolts, ranging from 500 mV to 508 mV.\n\nTwo curves grace this graph:\n\n1. **Reconstructed Common-Mode Level ($V_{tot}$):**\n- This curve is traced in black and presents a pronounced, symmetrical bell-shaped trend, peaking at roughly 507 mV as $V_{in}$ hovers around 0 mV. It begins at about 503 mV at $V_{in} = -20$ mV, ascends to its peak, then symmetrically dips back to about 503 mV at $V_{in} = 20$ mV. This behavior indicates that the reconstructed common-mode level is highly responsive to the input differential voltage, displaying a peak at zero input.\n\n2. **Actual Common-Mode Level (($V_{X} + V_{Y})/2$):**\n- This curve is shown in gray and exhibits a relatively flat trajectory compared to $V_{tot}$. It starts slightly above 501 mV at $V_{in} = -20$ mV, gradually climbs to just under 503 mV near $V_{in} = 0$ mV, and then slightly descends towards 501 mV at $V_{in} = 20$ mV. This suggests that the actual common-mode level remains relatively stable irrespective of input differential voltage changes.\n\n**Overall Behavior and Trends:**\n- The graph illustrates how the feedback in the cascode op amp design aids in stabilizing the actual common-mode level, while the reconstructed common-mode level undergoes more pronounced variations with input voltage changes. The feedback mechanism seems to dampen fluctuations in the actual common-mode level, keeping it within a narrow band.\n\n**Key Features:**\n- The peak of $V_{tot}$ at $V_{in} = 0$ mV signifies the maximum deviation due to the input differential voltage.\n- The consistent behavior of (($V_{X} + V_{Y})/2$) across the input spectrum points to effective common-mode feedback control.\n\nFigure 11.30 Closed-loop behavior of actual CM level, $\\left(V_{X}+V_{Y}\\right) / 2$, and reconstructed CM level, $V_{\\text {tot }}$, of cascode op amp as a function of input differential voltage.\n\nThanks to feedback, the CM fluctuation is markedly diminished as $V_{X}$ and $V_{Y}$ attain high or low values. Next, we induce a $10 \\%$ mismatch between the PMOS current sources ( $M_{7}$ and $M_{8}$ in Fig. 11.21) and $I_{S S} / 2=950 \\mu \\mathrm{~A}$, then replicate the dc sweep. Fig. 11.31 portrays the fluctuations, demonstrating that CMFB mitigates the mismatch by adjusting $I_{1}$.\nimage_name:Figure 11.31\ndescription:Figure 11.31 contains a graph illustrating the behavior of a cascode op amp's common-mode (CM) levels in response to the input differential voltage, \\( V_{in} \\). The x-axis represents the input differential voltage \\( V_{in} \\) in millivolts (mV), ranging from -20 mV to 20 mV. The y-axis displays the voltage level in millivolts (mV), ranging from 475 mV to 495 mV.\n\nTwo curves populate this graph:\n\n1. **\\((V_X + V_Y)/2\\) Curve (Gray Line):** This curve signifies the actual common-mode level, \\((V_X + V_Y)/2\\). It exhibits a broad, subtle peak centered around the middle of the \\( V_{in} \\) range. The curve initiates at approximately 490 mV at \\( V_{in} = -20 \\) mV, gently rises to around 492 mV near \\( V_{in} = 0 \\) mV, and then recedes back to around 490 mV at \\( V_{in} = 20 \\) mV.\n\n2. **\\(V_{tot}\\) Curve (Black Line):** This curve symbolizes the reconstructed common-mode level, \\( V_{tot} \\). It displays a more accentuated peak in contrast to the gray line, with a maximum slightly above 485 mV. The curve commences at 475 mV at \\( V_{in} = -20 \\) mV, reaches a peak between \\( V_{in} = -10 \\) mV and \\( V_{in} = 10 \\) mV, and then subsides to around 475 mV at \\( V_{in} = 20 \\) mV.\n\n**Overall Behavior and Trends:**\n- The gray line manifests a relatively stable CM level with minor fluctuations, signifying effective suppression of mismatch effects.\n- The black line underscores a more responsive adjustment, reflecting the CMFB's role in fine-tuning \\( I_1 \\) to counteract mismatch.\n\n**Key Features:**\n- The peak of the \\( V_{tot} \\) curve denotes the point of maximum feedback intervention.\n- Both curves exemplify the feedback system's proficiency in regulating CM levels amidst input fluctuations, with the \\( V_{tot} \\) curve indicating more substantial adjustments.\n\nFigure 11.31 Closed-loop behavior of actual CM level, $\\left(V_{X}+V_{Y}\\right) / 2$, and reconstructed CM level, $V_{\\text {tot }}$, of cascode op amp in the presence of mismatch between tail and PMOS current sources.\n\nTo ensure CMFB stability, we must scrutinize the stability of the CM loop. This is achieved by situating the op amp within its intended feedback architecture, administering differential pulses at the input, and scrutinizing the differential and common-mode behavior of the output. Fig. 11.32(a) showcases a feedback topology for a nominal closed-loop gain of 2, and Fig. 11.32(b) provides a more detailed illustration highlighting the CM feedback loop.\nimage_name:(a)\ndescription:Figure 11.32(a) represents a closed-loop amplifier setup configured for transient analysis with a nominal closed-loop gain of 2. It integrates NMOS and PMOS transistors to form a differential pair and current mirrors. The CMFB loop is instrumental for common-mode stability, necessitating compensation due to poles at various nodes within the circuit.\nimage_name:(b)\ndescription:Figure 11.32(b) offers a detailed view focusing on the CMFB loop of the amplifier. It incorporates NMOS and PMOS transistors, resistors for gain adjustment, and an op-amp for feedback regulation.\n\nFigure 11.32 (a) Closed-loop amplifier for transient analysis, and (b) detailed view showing the CMFB loop.\nThe graphs in Fig. 11.33 present the output waveforms reacting to an input step, revealing common-mode instability. As indicated in Fig. 11.32(b), the CM loop harbors poles at the input of the error amplifier, at node $H$, at node $P$, at the sources of the NMOS cascode devices, and at the primary outputs. Consequently, the loop demands compensation.\nimage_name:Figure 11.33\ndescription:Figure 11.33 showcases a time-domain waveform depicting the transient response of an op-amp circuit, emphasizing common-mode instability. The x-axis measures time in nanoseconds (ns), ranging from 0 to 40 ns, while the y-axis represents voltage in millivolts (mV), ranging from 300 mV to 700 mV. The graph exhibits two waveforms, likely signifying distinct nodes or outputs, rendered in varying shades for clarity.\n\nThese waveforms indicate an initial reaction to a step input, followed by oscillatory patterns indicative of instability. Commencing around 500 mV, both waveforms initially surge and plummet, with one peaking just above 600 mV and the other dipping below 400 mV. Thereafter, both waveforms transition into a phase of damped oscillations, with diminishing amplitude until approximately 15 ns. Post this interval, the oscillations amplify in amplitude, signaling instability within the system.\n\nKey features include the initial peak and trough within the first 10 ns, succeeded by a sequence of oscillations. The waveforms depict a discern intens in oscillation amplitude post 20 ns, hinting at a positive feedback or resonance effect that intensifies the instability. The recurrence of multiple oscillation cycles and their intensifying amplitude underscore the necessity for compensation within the common-mode feedback loop to stabilize the system. The graph lacks annotations or specific markers, but the oscillatory behavior is pivotal for diagnosing instability issues in the circuit.\n\nFigure 11.33 Transient response revealing CM loop instability.\n\n#### Example 11.8\n\nWe aim to analyze the CM loop frequency response and ascertain the phase margin. Is the differential feedback required when the CM loop is severed? More specifically, which of the two topologies in Fig. 11.34(a) should be adopted to determine the CM loop transmission?\nimage_name:(a)\ndescription:Figure 11.34(a) presents two potential configurations for analyzing the CM loop transmission when the differential feedback is either active or inactive. The CMFB system incorporates NMOS transistors, operational amplifiers, and a CM Extraction block to process the common-mode signal. The system is powered by a VDD source, and the op-amp labeled 'H' is engaged for differential feedback.\nimage_name:(b)\ndescription:Figure 11.34(b) displays a CMFB configuration that includes differential inputs. It features NMOS transistors M1 and M2, current sources d1 and d2, and a CM extraction block. The op-amp H stabilizes the common-mode voltage.\nimage_name:(c)\ndescription:Figure 11.34(c) depicts a CMFB setup designed for analysis with differential feedback intact. It encompasses NMOS transistors M1 and M2, a capacitor C1, and a common-mode extraction block. The CMFB loop is examined with differential feedback to ensure stability, and the circuit incorporates voltage sources Vt and VF for reference and feedback purposes.\n\nFigure 11.34\n\n#### Solution\n\nThe CM feedback must function effectively with differential feedback active. This is due to the fact that the CMFB must remain stable within an environment that inherently includes differential feedback. For instance, examine the straightforward op amp in Fig. 11.34(b). For CM analysis, the two sides can be amalgamated into one, yielding the two potential scenarios depicted in Fig. 11.34(c) if the differential feedback is non-existent or active. The CM loop transmissions derived from these scenarios, represented as $-V_{F} / V_{t}$, may not be identical. For example, considering the capacitance at the drain, $C_{1}$, the associated pole assumes distinct values in the two configurations. Therefore, differential feedback must be preserved when assessing CM stability.\n\nLet's disrupt the CM loop in Fig. 11.32(b) at node $H$, as shown in Fig. 11.35. Here, the error amplifier drives a dummy device, $M_{d}$, which mirrors $M_{T}$ to gauge the loading impact of the latter. The resultant waveform is plotted in\nimage_name:Figure 11.35\ndescription:Figure 11.35 represents a CMFB loop equipped with an error amplifier and a dummy device Md to replicate the loading effect of MT. It integrates multiple PMOS and NMOS transistors for differential feedback and stability. The error amplifier receives inputs from Vtot and Vref, with the output driving node H.\n\nFigure 11.35 Measurement of CMFB loop transmission.\n\nFig. 11.36(a) displays the magnitude and phase of $-V_{F} / V_{t}$ as a function of frequency, disclosing a phase of $-190^{\\circ}$ at the unity-gain frequency. We seek a suitable node for compensation. Unfortunately, the error amplifier in Fig. 11.29 lacks signal inversion from $V_{t o t}$ to $H$, precluding the use of Miller compensation.\nimage_name:Figure 11.36(a)\ndescription:Figure 11.36(a) features a Bode plot detailing the magnitude and phase response of the CMFB loop transmission prior to compensation. The graph is split into two subplots:\n\n1. **Magnitude Plot**:\n- **X-Axis**: Frequency ranges from 10^6 Hz (1 MHz) to 10^9 Hz (1 GHz) on a logarithmic scale.\n- **Y-Axis**: Magnitude is expressed in decibels (dB), ranging from -20 dB to 40 dB.\n- **Behavior**: The magnitude commences at around 40 dB and progressively declines with increasing frequency, crossing 0 dB slightly above 10^8 Hz.\n\n2. **Phase Plot**:\n- **X-Axis**: Frequency matches that of the magnitude plot.\n- **Y-Axis**: Phase is measured in degrees, spanning from -300° to 0°.\n- **Behavior**: The phase starts near 0° and decreases to about -190° at the unity-gain frequency (where the magnitude crosses 0 dB), continuing its descent towards -300° as the frequency increases further.\n\n**Key Features**:\n- The unity-gain frequency is a pivotal point where the magnitude crosses 0 dB, and the phase is approximately -190°, flagging stability concerns.\n- The plot reveals a decreasing trend in both magnitude and phase with frequency, characteristic of an uncompensated feedback loop.\n- The negative phase margin at the unity-gain frequency hints at potential instability without compensation.\nimage_name:Figure 11.36(b)\ndescription:Figure 11.36(b) presents a Bode plot composed of two graphs depicting the frequency response of a system following compensation. The top graph illustrates the magnitude response, while the bottom graph depicts the phase response.\n\n1. **Magnitude Plot**:\n- **Axes**: The x-axis represents frequency in hertz (Hz) on a logarithmic scale ranging from \\(10^6\\) to \\(10^9\\) Hz. The y-axis represents magnitude in decibels (dB), ranging from -100 dB to 50 dB.\n- **Behavior**: The magnitude starts at around 40 dB and gradually diminishes with increasing frequency, displaying a consistent decline throughout the frequency range.\n- **Key Features**: The plot omits any peaks or resonances, indicating a smooth reduction in gain.\n\n2. **Phase Plot**:\n- **Axes**: The x-axis again represents frequency in hertz (Hz) on a logarithmic scale from \\(10^6\\) to \\(10^9\\) Hz. The y-axis represents phase in degrees, ranging from -300° to 0°.\n- **Behavior**: The phase starts near 0° and decreases with increasing frequency. It crosses -100° and continues its descent, reaching approximately -300° at the highest frequencies.\n- **Key Features**: The phase response suggests an enhanced phase margin compared to the uncompensated system, with a smoother progression and the absence of abrupt changes.\n\nOverall, the compensated system in Figure 11.36(b) exhibits a stable frequency response with a gradual decline in magnitude and phase, indicating effective compensation with a phase margin of about 50°.\n\nFigure 11.36 CMFB loop transmission (a) before and (b) after compensation.\nIs it feasible to compensate the CM loop by appending capacitance from high-impedance nodes $X$ and $Y$ to ground? Yes, but this also impacts the differential response. Alternatively, we connect a 3-pF capacitor from the error amplifier output to ground, achieving the response depicted in Fig. 11.36(b) and a phase margin of about $50^{\\circ}$. The closed-loop pulse response shown in Fig. 11.37(a) suggests that the CM feedback loop is now adequately compensated, resulting in minimal ringing of the CM level.\n\n#### Example 11.9\n\nDiscuss the necessary design alterations if the op amp powers a substantial load capacitance, $C_{L}$.\n\n#### Solution\n\nThe load capacitance diminishes the magnitude of the pole at $X$ (and $Y$ ), enhancing the differential signal path phase margin (refer to Chapter 10) while diminishing the CM loop phase margin. Consequently, the capacitance linked to the error amplifier output must be augmented, or the pole at $X$ and $Y$ must emerge as the predominant pole for the CM loop as well.\n\n#### Design Summary\n\nIn this section, we endeavored to design a telescopic-cascode op amp targeting a voltage gain of 500 and a differential output swing of $1 \\mathrm{~V}_{\\mathrm{pp}}$. Achieving these specifications with a 1-V supply proved unfeasible; however, we've outlined the essential steps toward a final design. Specifically, we addressed the following principles:\n\n1. Distribution of $V_{D S}$ and $I_{D}$ among transistors based"
},
{
    "text": "In our subsequent trial, we will engage the CM feedback loop: we will measure $V_{t o t}$ against a reference value, amplify the discrepancy, and use the outcome to govern $I_{S S}$. For this purpose, we construct the error amplifier as a five-transistor OTA with $W / L=5 \\mu \\mathrm{~m} / 80 \\mathrm{~nm}$ for all transistors, a tail current of $20 \\mu \\mathrm{~A}$, and a voltage gain of 10 . The output from this amplifier manipulates a segment of the primary tail current, $I_{1}$ (Fig. 11.29). For instance, anticipating a $20 \\%$ discrepancy between the PMOS current sources in the op amp and the tail current source, we set $I_{1} \\approx 0.2 I_{S S}$. Figure 11.29 illustrates the outcome, where the OTA's input and output connections are arranged to establish negative feedback around the loop.\n\nThe OTA in Fig. 11.29 uses PMOS (instead of NMOS) input devices due to two primary reasons. First, these transistors must sense the CM level while ensuring adequate $V_{D S}$ for their tail current source. Given $V_{t o t} \\approx V_{D D} / 2$ in this scenario, there is no inherent preference for NMOS or PMOS devices. Second, the output of the OTA should have a nominal dc value compatible with that required by $M_{T}$.\n\nSince $V_{H}=V_{G}$ (assuming no mismatches), and since $V_{G}$ is equal to the gate-source voltage of a diode-connected NMOS transistor, we expect that $M_{T}$ nominally replicates the bias current of $M_{G}$ (with a multiplication factor).\n\nFigure 11.30 displays the closed-loop dc sweep results with $V_{\\text {ref }}=0.5 \\mathrm{~V}$.\n\nThe graph in Figure 11.30 illustrates the closed-loop behavior of two variables associated with a cascode operational amplifier as a function of input differential voltage ($V_{in}$). The graph is plotted on a Cartesian plane with the horizontal axis representing the input differential voltage ($V_{in}$) in millivolts, ranging from -20 mV to 20 mV, and the vertical axis representing voltage levels in millivolts, ranging from 500 mV to 508 mV.\n\nThere are two curves plotted on this graph:\n\n1. **Reconstructed Common-Mode Level ($V_{tot}$):**\n   - This curve is shown in black and exhibits a clear, symmetric bell-shaped profile, peaking at approximately 507 mV when $V_{in}$ is around 0 mV. The curve starts at about 503 mV at $V_{in} = -20$ mV, increases to a peak value, and then symmetrically decreases back to about 503 mV at $V_{in} = 20$ mV. This indicates that the reconstructed common-mode level is sensitive to the input differential voltage, showing a peak at zero input.\n\n2. **Actual Common-Mode Level (($V_{X} + V_{Y})/2$):**\n   - This curve is depicted in gray and demonstrates a much flatter profile compared to $V_{tot}$. It starts at slightly above 501 mV at $V_{in} = -20$ mV, rises gently to just below 503 mV near $V_{in} = 0$ mV, and then descends slightly back towards 501 mV at $V_{in} = 20$ mV. This suggests that the actual common-mode level remains relatively stable despite changes in the input differential voltage.\n\n**Overall Behavior and Trends:**\n   - The graph illustrates how feedback in the cascode op amp design helps stabilize the actual common-mode level, while the reconstructed common-mode level varies more significantly with changes in input voltage. The feedback mechanism appears to minimize variations in the actual common-mode level, maintaining it within a narrow range.\n\n**Key Features:**\n   - The peak of $V_{tot}$ at $V_{in} = 0$ mV highlights the maximum deviation due to the input differential voltage.\n   - The relatively constant behavior of (($V_{X} + V_{Y})/2$) across the input range suggests effective common-mode feedback control.\n\nFigure 11.30 Closed-loop behavior of actual CM level, $\\left(V_{X}+V_{Y}\\right) / 2$, and reconstructed CM level, $V_{\\text {tot }}$, of cascode op amp as a function of input differential voltage.\n\nBy virtue of feedback, the CM variation is greatly reduced as $V_{X}$ and $V_{Y}$ reach high or low values. Next, we create a $10 \\%$ mismatch between the PMOS current sources ( $M_{7}$ and $M_{8}$ in Fig. 11.21) and $I_{S S} / 2=950 \\mu \\mathrm{~A}$ and repeat the dc sweep. Figure 11.31 depicts the variations, indicating that CMFB suppresses the mismatch by adjusting $I_{1}$.\n\nThe graph in Figure 11.31 illustrates the behavior of a cascode op amp's common-mode (CM) levels as a function of the input differential voltage, \\( V_{in} \\). The x-axis represents the input differential voltage \\( V_{in} \\) in millivolts (mV), ranging from -20 mV to 20 mV. The y-axis shows the voltage level in millivolts (mV), ranging from 475 mV to 495 mV.\n\nThere are two curves on the graph:\n\n1. **\\((V_X + V_Y)/2\\) Curve (Gray Line):** This curve represents the actual common-mode level, \\((V_X + V_Y)/2\\). It displays a broad, gentle peak around the center of the \\( V_{in} \\) range. The curve starts at approximately 490 mV at \\( V_{in} = -20 \\) mV, rises slightly to around 492 mV near \\( V_{in} = 0 \\) mV, and then descends back to around 490 mV at \\( V_{in} = 20 \\) mV.\n\n2. **\\(V_{tot}\\) Curve (Black Line):** This curve represents the reconstructed common-mode level, \\( V_{tot} \\). It exhibits a more pronounced peak compared to the gray line, with a maximum value slightly above 485 mV. The curve starts at 475 mV at \\( V_{in} = -20 \\) mV, peaks between \\( V_{in} = -10 \\) mV and \\( V_{in} = 10 \\) mV, and then decreases to around 475 mV at \\( V_{in} = 20 \\) mV.\n\n**Overall Behavior and Trends:**\n   - The gray line shows a relatively stable CM level with minor variations, indicating effective suppression of mismatch effects.\n   - The black line demonstrates a more dynamic response, reflecting the CMFB's action in adjusting \\( I_1 \\) to compensate for mismatch.\n\n**Key Features:**\n   - The peak of the \\( V_{tot} \\) curve suggests the point of maximum feedback adjustment.\n   - Both curves illustrate the feedback system's ability to manage CM levels despite input variations, with the \\( V_{tot} \\) curve showing more significant adjustments.\n\nFigure 11.31 Closed-loop behavior of actual CM level, $\\left(V_{X}+V_{Y}\\right) / 2$, and reconstructed CM level, $V_{\\text {tot }}$, of cascode op amp in the presence of mismatch between tail and PMOS current sources.\n\nCMFB Stability We must examine the stability of the CM loop. This is achieved by placing the overall op amp in its intended feedback system, applying differential pulses at the input, and observing the differential and common-mode behavior of the output. Figure 11.32(a) shows a feedback topology for a nominal closed-loop gain of 2, and Fig. 11.32(b) depicts a more detailed diagram highlighting the CM feedback loop.\n\nFigure 11.33 displays the output waveforms in response to an input step, revealing common-mode instability. As evident from Fig. 11.32(b), the CM loop contains a pole at the input of the error amplifier, one at node $H$, one at node $P$, one at the sources of the NMOS cascode devices, and one at the main outputs. The loop therefore demands compensation.\n\n#### Example 11.8\n\nWe aim to investigate the CM loop frequency response and determine the phase margin. Should the differential feedback be present when the CM loop is broken? In other words, which of the two topologies in Fig. 11.34(a) should be used to ascertain the CM loop transmission?\n\nCommon-mode feedback must ultimately function properly with differential feedback present. This is because the actual environment in which CMFB must be stable incorporates differential feedback. As an example, consider the simple op amp shown in Fig. 11.34(b). For CM analysis, the two sides can be merged into one, yielding the two possible scenarios depicted in Fig. 11.34(c) if the differential feedback is absent or present. Obtained as $-V_{F} / V_{t}$, the CM loop transmissions derived for these two cases are not necessarily the same. For instance, if the capacitance at the drain, $C_{1}$, is considered, the pole associated with this node assumes different values in the two topologies. Thus, we must maintain differential feedback while studying CM stability.\n\nLet us break the CM loop in Fig. 11.32(b) at node $H$ as shown in Fig. 11.35. Here, the error amplifier drives a dummy device, $M_{d}$, identical to $M_{T}$ so as to observe the loading effect of the latter. Plotted in\nFig. 11.36(a) are the magnitude and phase of $-V_{F} / V_{t}$ as a function of frequency, revealing a phase of $-190^{\\circ}$ at the unity-gain frequency. We seek a convenient node for compensation. Unfortunately, the error amplifier in Fig. 11.29 does not provide signal inversion from $V_{t o t}$ to $H$ and hence cannot employ Miller compensation.\n\nCan we compensate the CM loop by adding capacitance from high-impedance nodes $X$ and $Y$ to ground? Yes, but this also affects the differential response. Instead, we tie a 3-pF capacitor from the error amplifier output to ground, obtaining the response shown in Fig. 11.36(b) and a phase margin of about $50^{\\circ}$. The closed-loop pulse response depicted in Fig. 11.37(a) implies that the common-mode feedback loop is now properly compensated and the CM level incurs little ringing.\n\nDifferential Compensation Why do $V_{X}$ and $V_{Y}$ in Fig. 11.37(a) exhibit differential ringing? This is because the pole formed by the large resistors in the feedback network of Fig. 11.32(a) and the input\ncapacitance of the op amp is located at a low frequency, degrading the phase margin (of differential feedback). To compensate the differential signal path, we connect two 7-fF capacitors from the outputs of the op amp to its inputs (in parallel with the feedback resistors) so as to create Miller multiplication. Shown in Fig. 11.37(b), the resulting response is now well behaved. This pole-zero cancellation technique is studied in Problem 11.14.\n\n#### Example 11.9\n\nExplain what design modifications are necessary if the op amp drives a significant load capacitance, $C_{L}$.\n\nThe load capacitance lowers the magnitude of the pole at $X$ (and $Y$ ), increasing the differential signal path phase margin (Chapter 10) while decreasing the CM loop phase margin. For this reason, the capacitance tied to the error\namplifier output must be increased, or the pole at $X$ and $Y$ must become the dominant pole for the CM loop as well.\n\nDesign Summary In this section, we have attempted to design a telescopic-cascode op amp for a voltage gain of 500 and a differential output swing of $1 \\mathrm{~V}_{\\mathrm{pp}}$. Neither specification could be met with a 1-V supply, but we have established the steps that one must complete in order to arrive at the final design. Specifically, we have dealt with the following general principles:\n\n1. Allocation of $V_{D S}$ and $I_{D}$ to transistors according to required swings and power dissipation, respectively\n2. Characterization and scaling of MOSFETs for allowable $V_{D S}$ and desired current level\n3. Quick estimate of the achievable voltage gain\n4. Use of dc sweep to study bias conditions and nonlinearity\n5. Design of bias circuitry using current mirrors and low-voltage cascodes\n6. Common-mode feedback design and compensation\n7. Use of closed-loop transient analysis to study CM and differential stability\n\nAs seen in subsequent sections, these principles provide a systematic approach to the design of op amps.\nThe next natural candidate for our op amp design is the folded cascade. However, our gain calculations for the telescopic cascode roughly apply here as well, predicting that it is extremely difficult to achieve a gain of 500 . For this reason, we do not pursue the folded-cascode topology for these specifications."
},
{
    "text": "For the subsequent test, we will engage the CM feedback loop: we will match $V_{t o t}$ to a reference, amplify the discrepancy, and use the outcome to govern $I_{S S}$. To fulfill this, we have constructed the error amplifier as a five-transistor OTA with $W / L=5 \\mu \\mathrm{~m} / 80 \\mathrm{~nm}$ for all transistors, a tail current of $20 \\mu \\mathrm{~A}$, and a voltage gain of 10 . The output of this amplifier governs a portion of the main tail current, $I_{1}$ (Fig. 11.29). For instance, anticipating a $20 \\%$ mismatch between the PMOS current sources in the op amp and the tail current source, we opt for $I_{1} \\approx 0.2 I_{S S}$. Figure 11.29 illustrates the outcome, where the OTA's input and output connections are arranged to establish negative feedback around the loop.\n\nThe circuit in Figure 11.29 represents a CMFB loop surrounding a telescopic op-amp. It utilizes PMOS transistors in the input stage to detect the common-mode level and preserve adequate $V_{D S}$ for the tail current source. The op-amp core is configured to set up negative feedback around the loop.\n\n#### Example 11.7\n\nDiscuss the rationale behind the OTA in Figure 11.29 using PMOS (instead of NMOS) input devices.\n\n#### Solution\n\nThe selection is influenced by two factors. Firstly, these transistors must detect the CM level while ensuring sufficient $V_{D S}$ for their tail current source. Given $V_{t o t} \\approx V_{D D} / 2$ in this scenario, there is no inherent preference for NMOS or PMOS devices. Secondly, the OTA's output should have a standard dc value that aligns with the requirement of $M_{T}$.\n\nConsidering $V_{H}=V_{G}$ (in the absence of mismatches), and since $V_{G}$ equals the gate-source voltage of a diode-connected NMOS transistor, we anticipate that $M_{T}$ nominally replicates the bias current of $M_{G}$ (with a multiplication factor).\n\nFigure 11.30 displays the closed-loop dc sweep results with $V_{\\text {ref }}=0.5 \\mathrm{~V}$.\n\nThe graph in Figure 11.30 illustrates the closed-loop behavior of two variables associated with a cascode operational amplifier as a function of the input differential voltage ($V_{in}$). The graph is plotted on a Cartesian plane with the horizontal axis representing the input differential voltage ($V_{in}$) in millivolts, ranging from -20 mV to 20 mV, and the vertical axis representing voltage levels in millivolts, ranging from 500 mV to 508 mV.\n\nThere are two curves plotted on this graph:\n\n1. **Reconstructed Common-Mode Level ($V_{tot}$):**\n- This curve is shown in black and exhibits a distinct, symmetrical bell-shaped profile, peaking at approximately 507 mV when $V_{in}$ is around 0 mV. The curve starts at about 503 mV at $V_{in} = -20$ mV, increases to a peak value, and then symmetrically decreases back to about 503 mV at $V_{in} = 20$ mV. This indicates that the reconstructed common-mode level is sensitive to the input differential voltage, showing a peak at zero input.\n\n2. **Actual Common-Mode Level (($V_{X} + V_{Y})/2$):**\n- This curve is depicted in gray and demonstrates a much flatter profile compared to $V_{tot}$. It starts at slightly above 501 mV at $V_{in} = -20$ mV, rises gently to just below 503 mV near $V_{in} = 0$ mV, and then descends slightly back towards 501 mV at $V_{in} = 20$ mV. This suggests that the actual common-mode level remains relatively stable despite changes in the input differential voltage.\n\n**Overall Behavior and Trends:**\n- The graph illustrates how feedback in the cascode op amp design aids in stabilizing the actual common-mode level, while the reconstructed common-mode level varies more significantly with changes in input voltage. The feedback mechanism seems to minimize variations in the actual common-mode level, maintaining it within a narrow range.\n\n**Key Features:**\n- The peak of $V_{tot}$ at $V_{in} = 0$ mV highlights the maximum deviation due to the input differential voltage.\n- The relatively consistent behavior of (($V_{X} + V_{Y})/2$) across the input range suggests effective common-mode feedback control.\n\nFigure 11.30 Closed-loop behavior of actual CM level, $\\left(V_{X}+V_{Y}\\right) / 2$, and reconstructed CM level, $V_{\\text {tot }}$, of cascode op amp as a function of input differential voltage.\n\nThrough feedback, the CM fluctuation is significantly diminished as $V_{X}$ and $V_{Y}$ reach high or low values. Next, we introduce a $10 \\%$ mismatch between the PMOS current sources ( $M_{7}$ and $M_{8}$ in Fig. 11.21) and $I_{S S} / 2=950 \\mu \\mathrm{~A}$ and repeat the dc sweep. Figure 11.31 illustrates the fluctuations, indicating that CMFB mitigates the mismatch by adjusting $I_{1}$.\n\nThe graph in Figure 11.31 illustrates the behavior of a cascode op amp's common-mode (CM) levels as a function of the input differential voltage, \\( V_{in} \\). The x-axis represents the input differential voltage \\( V_{in} \\) in millivolts (mV), ranging from -20 mV to 20 mV. The y-axis shows the voltage level in millivolts (mV), ranging from 475 mV to 495 mV.\n\nThere are two curves on the graph:\n\n1. **\\((V_X + V_Y)/2\\) Curve (Gray Line):** This curve represents the actual common-mode level, \\((V_X + V_Y)/2\\). It displays a broad, gentle peak around the center of the \\( V_{in} \\) range. The curve starts at approximately 490 mV at \\( V_{in} = -20 \\) mV, rises slightly to around 492 mV near \\( V_{in} = 0 \\) mV, and then descends back to around 490 mV at \\( V_{in} = 20 \\) mV.\n\n2. **\\(V_{tot}\\) Curve (Black Line):** This curve represents the reconstructed common-mode level, \\( V_{tot} \\). It exhibits a more pronounced peak compared to the gray line, with a maximum value slightly above 485 mV. The curve starts at 475 mV at \\( V_{in} = -20 \\) mV, peaks between \\( V_{in} = -10 \\) mV and \\( V_{in} = 10 \\) mV, and then decreases to around 475 mV at \\( V_{in} = 20 \\) mV.\n\n**Overall Behavior and Trends:**\n- The gray line shows a relatively stable CM level with minor variations, indicating effective suppression of mismatch effects.\n- The black line demonstrates a more dynamic response, reflecting the CMFB's action in adjusting \\( I_1 \\) to compensate for mismatch.\n\n**Key Features:**\n- The peak of the \\( V_{tot} \\) curve suggests the point of maximum feedback adjustment.\n- Both curves illustrate the feedback system's ability to manage CM levels despite input variations, with the \\( V_{tot} \\) curve showing more significant adjustments.\n\nFigure 11.31 Closed-loop behavior of actual CM level, $\\left(V_{X}+V_{Y}\\right) / 2$, and reconstructed CM level, $V_{\\text {tot }}$, of cascode op amp in the presence of mismatch between tail and PMOS current sources.\n\nCMFB Stability We must examine the stability of the CM loop. This is achieved by positioning the overall op amp within its intended feedback system, applying differential pulses at the input, and scrutinizing\nthe differential and common-mode behavior of the output. Figure 11.32(a) depicts a feedback topology for a nominal closed-loop gain of 2, and Fig. 11.32(b) portrays a more detailed diagram highlighting the CM feedback loop.\n\nFigure 11.32 (a) Closed-loop amplifier for transient analysis, and (b) detailed view showcasing the CMFB loop.\n\nFigure 11.33 illustrates the output waveforms in response to an input step, revealing common-mode instability. As evident from Fig. 11.32(b), the CM loop contains a pole at the input of the error amplifier, one at node $H$, one at node $P$, one at the sources of the NMOS cascode devices, and one at the main outputs. The loop therefore necessitates compensation.\n\nFigure 11.33 Transient response manifesting CM loop instability.\n\n#### Example 11.8\n\nWe aim to analyze the CM loop frequency response and ascertain the phase margin. Should the differential feedback be active when the CM loop is disrupted? In other words, which of the two topologies in Figure 11.34(a) should be employed to determine the CM loop transmission?\n\nFigure 11.34\n\n#### Solution\n\nCommon-mode feedback must ultimately perform effectively with differential feedback active. This is because the actual environment in which CMFB must remain stable incorporates differential feedback. As an example, consider the simple op amp depicted in Figure 11.34(b). For CM analysis, the two sides can be merged into one, yielding the two possible scenarios depicted in Figure 11.34(c) if the differential feedback is absent or present. The CM loop transmissions derived for these two cases are not necessarily equivalent. For instance, if the capacitance at the drain, $C_{1}$, is considered, the pole associated with this node assumes different values in the two topologies. Therefore, we must maintain differential feedback while examining CM stability.\n\nLet us disrupt the CM loop in Figure 11.32(b) at node $H$ as shown in Figure 11.35. Here, the error amplifier drives a dummy device, $M_{d}$, identical to $M_{T}$ so as to observe the loading effect of the latter. Plotted in\n\nFigure 11.35 Measurement of CMFB loop transmission.\n\nFigure 11.36(a) are the magnitude and phase of $-V_{F} / V_{t}$ as a function of frequency, revealing a phase of $-190^{\\circ}$ at the unity-gain frequency. We seek a convenient node for compensation. Unfortunately, the error amplifier in Figure 11.29 does not provide signal inversion from $V_{t o t}$ to $H$ and hence cannot employ Miller compensation.\n\nFigure 11.36(a) CMFB loop transmission before compensation.\n\nFigure 11.36(b) presents a Bode plot, which consists of two graphs depicting the frequency response of a system after compensation. The top graph portrays the magnitude response, and the bottom graph illustrates the phase response.\n\n1. **Magnitude Plot**:\n- **Axes**: The x-axis represents frequency in hertz (Hz) on a logarithmic scale ranging from \\(10^6\\) to \\(10^9\\) Hz. The y-axis represents magnitude in decibels (dB), ranging from -100 dB to 50 dB.\n- **Behavior**: The magnitude starts at around 40 dB and gradually decreases as frequency increases, showing a steady decline throughout the frequency range.\n- **Key Features**: The plot does not indicate any peaks or resonances, suggesting a smooth roll-off in gain.\n\n2. **Phase Plot**:\n- **Axes**: The x-axis again represents frequency in hertz (Hz) on a logarithmic scale from \\(10^6\\) to \\(10^9\\) Hz. The y-axis represents phase in degrees, ranging from -300° to 0°.\n- **Behavior**: The phase starts near 0° and decreases with increasing frequency. It crosses -100° and continues to decline, reaching approximately -300° at the highest frequencies.\n- **Key Features**: The phase response indicates a phase margin improvement compared to the uncompensated system, with a smoother transition and no abrupt changes.\n\nOverall, the compensated system in Figure 11.36(b) exhibits a stable frequency response with a gradual decrease in magnitude and phase, suggesting effective compensation with a phase margin of about 50°.\n\nFigure 11.36 CMFB loop transmission (a) before and (b) after compensation.\n\nCan we compensate the CM loop by adding capacitance from high-impedance nodes $X$ and $Y$ to ground? Yes, but this also impacts the differential response. Instead, we connect a 3-pF capacitor from the error amplifier output to ground, obtaining the response shown in Figure 11.36(b) and a phase margin of about $50^{\\circ}$. The closed-loop pulse response depicted in Figure 11.37(a) implies that the common-mode feedback loop is now properly compensated and the CM level incurs minimal ringing.\n\nDifferential Compensation Why do $V_{X}$ and $V_{Y}$ in Figure 11.37(a) exhibit differential ringing? This is because the pole formed by the large resistors in the feedback network of Figure 11.32(a) and the input\n\nThe graph in Figure 11.37(a) illustrates the transient response of voltages $V_X$ and $V_Y$ over time with common-mode feedback (CMFB) loop compensation. The x-axis represents time in nanoseconds (ns), ranging from 0 to 40 ns, while the y-axis represents voltage in millivolts (mV), ranging from 350 mV to 650 mV.\n\n**Overall Behavior and Trends:**\nThe graph shows two distinct waveforms, likely representing the differential outputs $V_X$ (in black) and $V_Y$ (in gray). Initially, both waveforms start at approximately 500 mV. The waveform for $V_X$ exhibits a peak reaching just above 600 mV around 5 ns, followed by a dip below 550 mV at approximately 10 ns, indicating ringing behavior. Similarly, $V_Y$ dips below 400 mV before rising sharply, also showing ringing. Both waveforms stabilize around 500 mV after 20 ns, indicating that the system eventually settles.\n\n**Key Features and Technical Details:**\n- **Ringing:** Both waveforms exhibit differential ringing, with $V_X$ peaking above 600 mV and $V_Y$ dipping below 400 mV.\n- **Settling:** After the initial oscillations, both waveforms stabilize at around 500 mV, indicating the effectiveness of the CMFB loop compensation in reducing ringing over time.\n- **Annotations:** There are no specific annotations or markers, but the gridlines suggest a focus on the transient behavior between 0 and 20 ns.\n\nThe graph effectively demonstrates the behavior of the system with CMFB loop compensation, highlighting the initial differential ringing and eventual stabilization of the voltages.\n\nFigure 11.37(a) Transient response with CMFB loop compensation.\n\nThe graph in Figure 11.37(b) is a time-domain waveform illustrating the transient response of a system with additional differential compensation. The x-axis is labeled \"Time (ns)\" and spans from 0 to 40 nanoseconds, while the y-axis is labeled \"V_X, V_Y (mV)\" and ranges from 350 to 650 millivolts.\n\nThe graph displays two curves, one in black and one in gray, representing the voltages V_X and V_Y, respectively. Initially, both voltages start at approximately 500 mV. The black curve (V_X) shows a rapid increase, peaking at around 600 mV within the first few nanoseconds, indicating a quick response to an input change. Following the peak, the voltage drops sharply to below 500 mV and then gradually stabilizes back to approximately 500 mV without significant overshoot or ringing.\n\nThe gray curve (V_Y) initially decreases to around 400 mV, also within the first few nanoseconds, before rising sharply back to approximately 500 mV, where it stabilizes. This behavior suggests a well-compensated differential response with minimal oscillation compared to the initial transient behavior.\n\nOverall, the graph demonstrates effective differential compensation, as indicated by the smooth stabilization of both voltages with minimal ringing, contrasting with the more oscillatory response seen in Figure 11.37(a).\n\nFigure 11.37(b) Transient response with additional differential compensation.\n\ncapacitance of the op amp is situated at a low frequency, degrading the phase margin (of differential feedback). To compensate the differential signal path, we connect two 7-fF capacitors from the outputs of the op amp to its inputs (in parallel with the feedback resistors) so as to create Miller multiplication. Shown in Figure 11.37(b), the resulting response is now well-behaved. This pole-zero cancellation technique is studied in Problem 11.14.\n\n#### Example 11.9\n\nExplain what design alterations are necessary if the op amp drives a significant load capacitance, $C_{L}$.\n\n#### Solution\n\nThe load capacitance reduces the magnitude of the pole at $X$ (and $Y$ ), enhancing the differential signal path phase margin (Chapter 10) while decreasing the CM loop phase margin. For this reason, the capacitance tied to the error\namplifier output must be augmented, or the pole at $X$ and $Y$ must become the dominant pole for the CM loop as well.\n\nDesign Summary In this section, we have endeavored to design a telescopic-cascode op amp for a voltage gain of 500 and a differential output swing of $1 \\mathrm{~V}_{\\mathrm{pp}}$. Neither specification could be achieved with a 1-V supply, but we have established the steps that one must follow in order to arrive at the final design. Specifically, we have dealt with the following general principles:\n\n1. Allocation of $V_{D S}$ and $I_{D}$ to transistors according to required swings and power dissipation, respectively\n2. Characterization and scaling of MOSFETs for allowable $V_{D S}$ and desired current level\n3. Quick estimate of the achievable voltage gain\n4. Use of dc sweep to study bias conditions and nonlinearity\n5. Design of bias circuitry using current mirrors and low-voltage cascodes\n6. Common-mode feedback design and compensation\n7. Use of closed-loop transient analysis to study CM and differential stability\n\nAs seen in subsequent sections, these principles provide a systematic approach to the design of op amps.\nThe next natural candidate for our op amp design is the folded cascade. However, our gain calculations for the telescopic cascode roughly apply here as well, predicting that it is extremely challenging to achieve a gain of 500 . For this reason, we do not pursue the folded-cascode topology for these specifications."
},
{
    "text": "For the subsequent experiment, we will activate the CM feedback loop: we will match $V_{t o t}$ with a reference voltage, amplify the discrepancy, and use the outcome to regulate $I_{S S}$. To achieve this, we have crafted an error amplifier utilizing a five-transistor OTA with a $W / L=5 \\mu \\mathrm{~m} / 80 \\mathrm{~nm}$ ratio for all transistors, a tail current of $20 \\mu \\mathrm{~A}$, and a voltage gain of 10. The amplifier's output governs a segment of the primary tail current, $I_{1}$ (Fig. 11.29). For instance, anticipating a $20 \\%$ discrepancy between the PMOS current sources in the op amp and the tail current source, we set $I_{1} \\approx 0.2 I_{S S}$. Figure 11.29 illustrates the outcome, where the OTA's input and output connections are configured to establish negative feedback around the loop.\n\nIn Figure 11.29, the circuit represents a CMFB loop enveloping a telescopic op-amp. It utilizes PMOS transistors in the input stage to detect the common-mode level and preserve adequate $V_{D S}$ for the tail current source. The op-amp core is structured to establish negative feedback around the loop.\n\n#### Example 11.7\n\nElucidate why the OTA in Figure 11.29 utilizes PMOS (instead of NMOS) input devices.\n\n#### Solution\n\nThe selection is guided by two factors. Initially, these transistors must detect the CM level while preserving sufficient $V_{D S}$ for their tail current source. Given $V_{t o t} \\approx V_{D D} / 2$ in this scenario, there is no specific preference for NMOS or PMOS devices. Secondly, the OTA's output should possess a nominal dc value compatible with the requirement of $M_{T}$.\n\nSince $V_{H}=V_{G}$ (in the absence of mismatches), and $V_{G}$ is equivalent to the gate-source voltage of a diode-connected NMOS transistor, we anticipate that $M_{T}$ nominally replicates the bias current of $M_{G}$ (with a multiplication factor).\n\nFigure 11.30 exhibits the closed-loop dc sweep outcomes with $V_{\\text {ref }}=0.5 \\mathrm{~V}$.\n\nIn Figure 11.30, the graph portrays the closed-loop behavior of two variables linked to a cascode operational amplifier as a function of input differential voltage ($V_{in}$). The graph is charted on a Cartesian plane with the horizontal axis signifying the input differential voltage ($V_{in}$) in millivolts, spanning from -20 mV to 20 mV, and the vertical axis representing voltage levels in millivolts, ranging from 500 mV to 508 mV.\n\nThe graph features two curves:\n\n1. **Reconstructed Common-Mode Level ($V_{tot}$):**\n- This curve is presented in black and demonstrates a distinct, symmetrical bell-shaped contour, peaking at roughly 507 mV when $V_{in}$ is around 0 mV. The curve initiates at about 503 mV at $V_{in} = -20$ mV, ascends to a peak value, and then symmetrically declines back to about 503 mV at $V_{in} = 20$ mV. This signifies that the reconstructed common-mode level is sensitive to the input differential voltage, displaying a peak at zero input.\n\n2. **Actual Common-Mode Level (($V_{X} + V_{Y})/2$):**\n- This curve is depicted in gray and exhibits a much flatter profile compared to $V_{tot}$. It commences at slightly above 501 mV at $V_{in} = -20$ mV, gently rises to just below 503 mV near $V_{in} = 0$ mV, and then slightly descends back towards 501 mV at $V_{in} = 20$ mV. This indicates that the actual common-mode level remains relatively stable despite variations in the input differential voltage.\n\n**Overall Behavior and Trends:**\n- The graph illustrates how feedback in the cascode op amp design aids in stabilizing the actual common-mode level, while the reconstructed common-mode level exhibits more significant variations with changes in input voltage. The feedback mechanism appears to minimize fluctuations in the actual common-mode level, keeping it within a narrow range.\n\n**Key Features:**\n- The peak of $V_{tot}$ at $V_{in} = 0$ mV underscores the maximum deviation due to the input differential voltage.\n- The relatively consistent behavior of (($V_{X} + V_{Y})/2$) across the input range suggests effective common-mode feedback control.\n\nFigure 11.30 Closed-loop behavior of actual CM level, $\\left(V_{X}+V_{Y}\\right) / 2$, and reconstructed CM level, $V_{\\text {tot }}$, of cascode op amp as a function of input differential voltage.\n\nThrough feedback, the CM fluctuation is considerably mitigated as $V_{X}$ and $V_{Y}$ attain high or low values. Subsequently, we introduce a $10 \\%$ mismatch between the PMOS current sources ( $M_{7}$ and $M_{8}$ in Fig. 11.21) and $I_{S S} / 2=950 \\mu \\mathrm{~A}$ and replicate the dc sweep. Figure 11.31 illustrates the fluctuations, indicating that CMFB suppresses the mismatch by adjusting $I_{1}$.\n\nIn Figure 11.31, the graph portrays the behavior of a cascode op amp's common-mode (CM) levels as a function of the input differential voltage, \\( V_{in} \\). The x-axis represents the input differential voltage \\( V_{in} \\) in millivolts (mV), ranging from -20 mV to 20 mV. The y-axis exhibits the voltage level in millivolts (mV), ranging from 475 mV to 495 mV.\n\nThe graph contains two curves:\n\n1. **\\((V_X + V_Y)/2\\) Curve (Gray Line):** This curve signifies the actual common-mode level, \\((V_X + V_Y)/2\\). It displays a broad, gentle peak around the center of the \\( V_{in} \\) range. The curve starts at approximately 490 mV at \\( V_{in} = -20 \\) mV, slightly ascends to around 492 mV near \\( V_{in} = 0 \\) mV, and then descends back to around 490 mV at \\( V_{in} = 20 \\) mV.\n\n2. **\\(V_{tot}\\) Curve (Black Line):** This curve signifies the reconstructed common-mode level, \\( V_{tot} \\). It exhibits a more pronounced peak compared to the gray line, with a maximum value slightly above 485 mV. The curve starts at 475 mV at \\( V_{in} = -20 \\) mV, peaks between \\( V_{in} = -10 \\) mV and \\( V_{in} = 10 \\) mV, and then decreases to around 475 mV at \\( V_{in} = 20 \\) mV.\n\n**Overall Behavior and Trends:**\n- The gray line reveals a relatively stable CM level with minor fluctuations, indicating effective suppression of mismatch effects.\n- The black line demonstrates a more dynamic response, reflecting the CMFB's action in adjusting \\( I_1 \\) to compensate for mismatch.\n\n**Key Features:**\n- The peak of the \\( V_{tot} \\) curve signifies the point of maximum feedback adjustment.\n- Both curves illustrate the feedback system's capability to manage CM levels irrespective of input variations, with the \\( V_{tot} \\) curve depicting more significant adjustments.\n\nFigure 11.31 Closed-loop behavior of actual CM level, $\\left(V_{X}+V_{Y}\\right) / 2$, and reconstructed CM level, $V_{\\text {tot }}$, of cascode op amp in the presence of mismatch between tail and PMOS current sources.\n\nCMFB Stability We must scrutinize the stability of the CM loop. This is executed by positioning the overall op amp within its intended feedback system, administering differential pulses at the input, and inspecting\nthe differential and common-mode behavior of the output. Figure 11.32(a) displays a feedback topology for a nominal closed-loop gain of 2, and Fig. 11.32(b) portrays a more detailed diagram highlighting the CM feedback loop. ${ }^{12}$\nIn Figure 11.32 (a), the circuit is a closed-loop amplifier with a CMFB loop. It incorporates NMOS and PMOS transistors forming a differential pair and current mirrors. The CMFB loop is employed for common-mode stability, and compensation is mandatory due to poles at various nodes. The circuit is structured to analyze transient response with a nominal closed-loop gain of 2.\n\nIn Figure 11.32 (b), the circuit is a common-mode feedback (CMFB) loop with compensation required due to poles at various nodes. It includes NMOS and PMOS transistors, resistors for setting gains, and an op-amp for feedback control.\n\nFigure 11.32 (a) Closed-loop amplifier for transient analysis, and (b) detailed view showcasing the CMFB loop.\nIn Figure 11.33, the output waveforms in response to an input step are depicted, revealing common-mode instability. As evident from Figure 11.32(b), the CM loop encompasses a pole at the input of the error amplifier, one at node $H$, one at node $P$, one at the sources of the NMOS cascode devices, and one at the main outputs. The loop, therefore, necessitates compensation.\nIn Figure 11.33, the time-domain waveform depicts the transient response of an op-amp circuit, specifically illustrating common-mode instability. The x-axis represents time in nanoseconds (ns), ranging from 0 to 40 ns. The y-axis represents voltage in millivolts (mV), with values ranging from 300 mV to 700 mV. The graph comprises two waveforms, likely representing different nodes or outputs, depicted in different shades for distinction.\n\nThe overall behavior of the waveforms portrays an initial response to a step input, followed by oscillations indicative of instability. Starting at around 500 mV, both waveforms initially exhibit a rapid increase and decrease, with one waveform peaking slightly above 600 mV and the other dipping below 400 mV. Subsequently, both waveforms enter a phase of damped oscillations, with decreasing amplitude until around 15 ns. After this period, the oscillations grow in amplitude, indicating a lack of stability in the system.\n\nKey features include the initial peak and trough within the first 10 ns, followed by a series of oscillations. The waveforms demonstrate a clear increase in oscillation amplitude after 20 ns, suggesting a positive feedback or resonance effect that exacerbates the instability. The presence of multiple oscillation cycles and their increasing amplitude highlight the need for compensation in the common-mode feedback loop to stabilize the system. The graph lacks any annotations or specific markers, but the oscillatory behavior is a critical point of analysis for identifying the instability issues in the circuit.\n\nFigure 11.33 Transient response revealing CM loop instability.\n\n#### Example 11.8\n\nWe aim to examine the CM loop frequency response and acquire the phase margin. Should the differential feedback be present when the CM loop is disrupted? In other words, which of the two topologies in Figure 11.34(a) should be utilized to determine the CM loop transmission?\n\n[^87]In Figure 11.34 (a), the diagram represents a common-mode feedback (CMFB) system with NMOS transistors and operational amplifiers. The CM Extraction block processes the common-mode signal, and the system is powered by a VDD source. The op-amp labeled 'H' is used for differential feedback.\n\nIn Figure 11.34 (b), the circuit is a common-mode feedback configuration with differential inputs. It includes NMOS transistors M1 and M2, current sources d1 and d2, and a CM extraction block. The op-amp H stabilizes the common-mode voltage.\n\nIn Figure 11.34 (c), the circuit diagram is designed for common-mode feedback (CMFB) analysis with differential feedback present. It includes NMOS transistors M1 and M2, a capacitor C1, and a common-mode extraction block. The CMFB loop is analyzed with the presence of differential feedback to ensure stability. The circuit also incorporates voltage sources Vt and VF for reference and feedback purposes.\n\nFigure 11.34\n\n#### Solution\n\nCommon-mode feedback must ultimately function correctly with differential feedback present. This is because the actual environment in which CMFB must stabilize incorporates differential feedback. As an example, consider the simple op amp depicted in Figure 11.34(b). For CM analysis, the two sides can be merged into one, yielding the two potential scenarios illustrated in Figure 11.34(c) if the differential feedback is absent or present. Derived as $-V_{F} / V_{t}$, the CM loop transmissions calculated for these two cases are not necessarily the same. For instance, if the capacitance at the drain, $C_{1}$, is considered, the pole associated with this node assumes different values in the two topologies. Hence, we must preserve differential feedback while examining CM stability.\n\nLet us sever the CM loop in Figure 11.32(b) at node $H$ as shown in Figure 11.35. Here, the error amplifier drives a dummy device, $M_{d}$, identical to $M_{T}$ to observe the loading effect of the latter. Illustrated in\nIn Figure 11.35, the circuit is a common-mode feedback loop with an error amplifier and dummy device Md to replicate the loading effect of MT. It incorporates multiple PMOS and NMOS transistors for differential feedback and stability. The error amplifier receives inputs from Vtot and Vref, with the output driving node H.\n\nFigure 11.35 Measurement of CMFB loop transmission.\n\nFigure 11.36(a) are the magnitude and phase of $-V_{F} / V_{t}$ as a function of frequency, revealing a phase of $-190^{\\circ}$ at the unity-gain frequency. We seek a convenient node for compensation. Unfortunately, the error amplifier in Figure 11.29 does not provide signal inversion from $V_{t o t}$ to $H$ and hence cannot employ Miller compensation.\nIn Figure 11.36(a), the Bode plot illustrates the magnitude and phase response of the common-mode feedback (CMFB) loop transmission prior to compensation. The graph consists of two subplots:\n\n1. **Magnitude Plot**:\n- **X-Axis**: Frequency, ranging from 10^6 Hz (1 MHz) to 10^9 Hz (1 GHz) on a logarithmic scale.\n- **Y-Axis**: Magnitude in decibels (dB), ranging from -20 dB to 40 dB.\n- **Behavior**: The magnitude starts at around 40 dB and decreases steadily as frequency increases, crossing 0 dB slightly above 10^8 Hz.\n\n2. **Phase Plot**:\n- **X-Axis**: Frequency, identical to the magnitude plot.\n- **Y-Axis**: Phase in degrees, ranging from -300° to 0°.\n- **Behavior**: The phase starts near 0° and decreases to about -190° at the unity-gain frequency (where the magnitude crosses 0 dB), continuing to drop towards -300° as the frequency increases further.\n\n**Key Features**:\n- The unity-gain frequency is a critical point where the magnitude crosses 0 dB, and the phase is approximately -190°, indicating a stability concern.\n- The plot reveals a decreasing trend in both magnitude and phase as frequency increases, typical of a feedback loop before compensation.\n- The phase margin at the unity-gain frequency is negative, suggesting potential instability without compensation.\nIn Figure 11.36(b), the Bode plot, which consists of two graphs, presents the frequency response of a system after compensation. The top graph depicts the magnitude response, and the bottom graph displays the phase response.\n\n1. **Magnitude Plot**:\n- **Axes**: The x-axis represents frequency in hertz (Hz) on a logarithmic scale ranging from \\(10^6\\) to \\(10^9\\) Hz. The y-axis represents magnitude in decibels (dB), ranging from -100 dB to 50 dB.\n- **Behavior**: The magnitude starts at around 40 dB and gradually decreases as frequency increases, showing a steady decline throughout the frequency range.\n- **Key Features**: The plot does not indicate any peaks or resonances, suggesting a smooth roll-off in gain.\n\n2. **Phase Plot**:\n- **Axes**: The x-axis again represents frequency in hertz (Hz) on a logarithmic scale from \\(10^6\\) to \\(10^9\\) Hz. The y-axis represents phase in degrees, ranging from -300° to 0°.\n- **Behavior**: The phase starts near 0° and decreases with increasing frequency. It crosses -100° and continues to decline, reaching approximately -300° at the highest frequencies.\n- **Key Features**: The phase response indicates a phase margin improvement compared to the uncompensated system, with a smoother transition and no abrupt changes.\n\nOverall, the compensated system in Figure 11.36(b) exhibits a stable frequency response with a gradual decrease in magnitude and phase, suggesting effective compensation with a phase margin of about 50°.\n\nFigure 11.36 CMFB loop transmission (a) before and (b) after compensation.\nCan we compensate the CM loop by adding capacitance from high-impedance nodes $X$ and $Y$ to ground? Yes, but this also impacts the differential response. Instead, we connect a 3-pF capacitor from the error amplifier output to ground, obtaining the response shown in Figure 11.36(b) and a phase margin of about $50^{\\circ}$. The closed-loop pulse response depicted in Figure 11.37(a) implies that the common-mode feedback loop is now properly compensated and the CM level incurs minimal ringing.\n\nDifferential Compensation Why do $V_{X}$ and $V_{Y}$ in Figure 11.37(a) exhibit differential ringing? This is because the pole generated by the large resistors in the feedback network of Figure 11.32(a) and the input"
},
{
    "text": "For the subsequent trial, we will engage in the CM feedback loop: we will match $V_{t o t}$ with a reference value, enhance the discrepancy, and utilize the outcome to govern $I_{S S}$. To realize this, we configure the error amplifier as a five-transistor OTA with $W / L=5 \\mu \\mathrm{~m} / 80 \\mathrm{~nm}$ for all transistors, a tail current of $20 \\mu \\mathrm{~A}$, and a voltage gain of 10 . The amplifier's output governs a segment of the primary tail current, $I_{1}$ (Fig. 11.29). For instance, assuming a $20 \\%$ discrepancy between the PMOS current sources in the op amp and the tail current source, we set $I_{1} \\approx 0.2 I_{S S}$. Figure 11.29 presents the outcome, where the OTA's input and output connections are arranged to establish negative feedback around the loop.\nFigure 11.29 illustrates the CMFB loop around a telescopic op-amp. It utilizes PMOS transistors in the input stage to detect the common-mode level and sustain ample $V_{D S}$ for the tail current source. The op-amp core is structured to establish negative feedback around the loop.\n\nExplain why the OTA in Fig. 11.29 employs PMOS (rather than NMOS) input devices.\n\nThe selection is driven by two factors. Firstly, these transistors must detect the CM level while preserving adequate $V_{D S}$ for their tail current source. With $V_{t o t} \\approx V_{D D} / 2$ in this scenario, there is no distinct preference for NMOS or PMOS devices. Secondly, the OTA's output should have a nominal dc value compatible with that required by $M_{T}$.\n\nSince $V_{H}=V_{G}$ (in the absence of mismatches), and since $V_{G}$ is equivalent to the gate-source voltage of a diode-connected NMOS transistor, we anticipate that $M_{T}$ nominally replicates the bias current of $M_{G}$ (with a multiplication factor).\n\nFigure 11.30 displays the closed-loop dc sweep outcomes with $V_{\\text {ref }}=0.5 \\mathrm{~V}$.\nThe graph in Figure 11.30 portrays the closed-loop behavior of two variables pertinent to a cascode operational amplifier as a function of input differential voltage ($V_{in}$). The graph is plotted on a Cartesian plane with the horizontal axis denoting the input differential voltage ($V_{in}$) in millivolts, ranging from -20 mV to 20 mV, and the vertical axis denoting voltage levels in millivolts, ranging from 500 mV to 508 mV.\n\nThere are two curves plotted on this graph:\n\n1. **Reconstructed Common-Mode Level ($V_{tot}$):**\n- This curve is depicted in black and exhibits a distinct, symmetrical bell-shaped profile, peaking at approximately 507 mV when $V_{in}$ is around 0 mV. The curve initiates at about 503 mV at $V_{in} = -20$ mV, ascends to a peak value, and then symmetrically descends back to about 503 mV at $V_{in} = 20$ mV. This signifies that the reconstructed common-mode level is sensitive to the input differential voltage, displaying a peak at zero input.\n\n2. **Actual Common-Mode Level (($V_{X} + V_{Y})/2$):**\n- This curve is portrayed in gray and demonstrates a much flatter profile compared to $V_{tot}$. It commences at slightly above 501 mV at $V_{in} = -20$ mV, gently rises to just below 503 mV near $V_{in} = 0$ mV, and then slightly descends back towards 501 mV at $V_{in} = 20$ mV. This suggests that the actual common-mode level remains relatively stable despite variations in the input differential voltage.\n\n**Overall Behavior and Trends:**\n- The graph elucidates how feedback in the cascode op amp design aids in stabilizing the actual common-mode level, while the reconstructed common-mode level exhibits more significant variation with changes in input voltage. The feedback mechanism seems to minimize fluctuations in the actual common-mode level, keeping it within a narrow range.\n\n**Key Features:**\n- The peak of $V_{tot}$ at $V_{in} = 0$ mV signifies the maximum deviation due to the input differential voltage.\n- The relatively consistent behavior of (($V_{X} + V_{Y})/2$) across the input range indicates effective common-mode feedback control.\n\nFigure 11.30 portrays the closed-loop behavior of the actual CM level, $\\left(V_{X}+V_{Y}\\right) / 2$, and the reconstructed CM level, $V_{\\text {tot }}$, of the cascode op amp as a function of input differential voltage.\n\nOwing to feedback, the CM fluctuation is substantially mitigated as $V_{X}$ and $V_{Y}$ reach high or low values. Subsequently, we introduce a $10 \\%$ discrepancy between the PMOS current sources ( $M_{7}$ and $M_{8}$ in Fig. 11.21) and $I_{S S} / 2=950 \\mu \\mathrm{~A}$ and replicate the dc sweep. Figure 11.31 illustrates the variations, indicating that CMFB suppresses the discrepancy by adjusting $I_{1}$.\nThe graph in Figure 11.31 portrays the behavior of a cascode op amp's common-mode (CM) levels as a function of the input differential voltage, \\( V_{in} \\). The x-axis represents the input differential voltage \\( V_{in} \\) in millivolts (mV), ranging from -20 mV to 20 mV. The y-axis depicts the voltage level in millivolts (mV), ranging from 475 mV to 495 mV.\n\nThere are two curves on the graph:\n\n1. **\\((V_X + V_Y)/2\\) Curve (Gray Line):** This curve signifies the actual common-mode level, \\((V_X + V_Y)/2\\). It exhibits a broad, gentle peak around the center of the \\( V_{in} \\) range. The curve comm at approximately 490 mV at \\( V_{in} = -20 \\) mV, slightly rises\nFor the next\nFor the subsequent trial, we will engage in the CM feedback loop: we will match $V_{t o t}$ with a reference value, enhance the discrepancy, and utilize the outcome to govern $I_{S S}$. To realize this, we configure the error amplifier as a five-transistor OTA with $W / L=5 \\mu \\mathrm{~m} / 80 \\mathrm{~nm}$ for all transistors, a tail current of $20 \\mu \\mathrm{~A}$, and a voltage gain of 10 . The amplifier's output governs a segment of the primary tail current, $I_{1}$ (Fig. 11.29). For instance, assuming a $20 \\%$ discrepancy between the PMOS current sources in the op amp and the tail current source, we set $I_{1} \\approx 0.2 I_{S S}$. Figure 11.29 presents the outcome, where the OTA's input and output connections are arranged to establish negative feedback around the loop.\n\nFigure 11.29 illustrates the CMFB loop around a telescopic op-amp. It utilizes PMOS transistors in the input stage to detect the common-mode level and sustain ample $V_{D S}$ for the tail current source. The op-amp core is structured to establish negative feedback around the loop.\n\nExplain why the OTA in Fig. 11.29 employs PMOS (rather than NMOS) input devices.\n\nThe selection is driven by two factors. Firstly, these transistors must detect the CM level while preserving adequate $V_{D S}$ for their tail current source. With $V_{t o t} \\approx V_{D D} / 2$ in this scenario, there is no distinct preference for NMOS or PMOS devices. Secondly, the OTA's output should have a nominal dc value compatible with that required by $M_{T}$.\n\nSince $V_{H}=V_{G}$ (in the absence of mismatches), and since $V_{G}$ is equivalent to the gate-source voltage of a diode-connected NMOS transistor, we anticipate that $M_{T}$ nominally replicates the bias current of $M_{G}$ (with a multiplication factor).\n\nFigure 11.30 displays the closed-loop dc sweep outcomes with $V_{\\text {ref }}=0.5 \\mathrm{~V}$.\nThe graph in Figure 11.30 portrays the closed-loop behavior of two variables pertinent to a cascode operational amplifier as a function of input differential voltage ($V_{in}$). The graph is plotted on a Cartesian plane with the horizontal axis denoting the input differential voltage ($V_{in}$) in millivolts, ranging from -20 mV to 20 mV, and the vertical axis denoting voltage levels in millivolts, ranging from 500 mV to 508 mV.\n\nThere are two curves plotted on this graph:\n\n1. **Reconstructed Common-Mode Level ($V_{tot}$):**\n- This curve is depicted in black and exhibits a distinct, symmetrical bell-shaped profile, peaking at approximately 507 mV when $V_{in}$ is around 0 mV. The curve initiates at about 503 mV at $V_{in} = -20$ mV, ascends to a peak value, and then symmetrically descends back to about 503 mV at $V_{in} = 20$ mV. This signifies that the reconstructed common-mode level is sensitive to the input differential voltage, displaying a peak at zero input.\n\n2. **Actual Common-Mode Level (($V_{X} + V_{Y})/2$):**\n- This curve is portrayed in gray and demonstrates a much flatter profile compared to $V_{tot}$. It commences at slightly above 501 mV at $V_{in} = -20$ mV, gently rises to just below 503 mV near $V_{in} = 0$ mV, and then slightly descends back towards 501 mV at $V_{in} = 20$ mV. This suggests that the actual common-mode level remains relatively stable despite variations in the input differential voltage.\n\n**Overall Behavior and Trends:**\n- The graph elucidates how feedback in the cascode op amp design aids in stabilizing the actual common-mode level, while the reconstructed common-mode level exhibits more significant variation with changes in input voltage. The feedback mechanism seems to minimize fluctuations in the actual common-mode level, keeping it within a narrow range.\n\n**Key Features:**\n- The peak of $V_{tot}$ at $V_{in} = 0$ mV signifies the maximum deviation due to the input differential voltage.\n- The relatively consistent behavior of (($V_{X} + V_{Y})/2$) across the input range indicates effective common-mode feedback control.\n\nFigure 11.30 portrays the closed-loop behavior of the actual CM level, $\\left(V_{X}+V_{Y}\\right) / 2$, and the reconstructed CM level, $V_{\\text {tot }}$, of the cascode op amp as a function of input differential voltage.\n\nOwing to feedback, the CM fluctuation is substantially mitigated as $V_{X}$ and $V_{Y}$ reach high or low values. Subsequently, we introduce a $10 \\%$ discrepancy between the PMOS current sources ( $M_{7}$ and $M_{8}$ in Fig. 11.21) and $I_{S S} / 2=950 \\mu \\mathrm{~A}$ and replicate the dc sweep. Figure 11.31 illustrates the variations, indicating that CMFB suppresses the discrepancy by adjusting $I_{1}$.\nThe graph in Figure 11.31 portrays the behavior of a cascode op amp's common-mode (CM) levels as a function of the input differential voltage, \\( V_{in} \\). The x-axis represents the input differential voltage \\( V_{in} \\) in millivolts (mV), ranging from -20 mV to 20 mV. The y-axis depicts the voltage level in millivolts (mV), ranging from 475 mV to 495 mV.\n\nThere are two curves on the graph:\n\n1. **\\((V_X + V_Y)/2\\) Curve (Gray Line):** This curve signifies the actual common-mode level, \\((V_X + V_Y)/2\\). It exhibits a broad, gentle peak around the center of the \\( V_{in} \\) range. The curve starts at approximately 490 mV at \\( V_{in} = -20 \\) mV, slightly"
},
{
    "text": "For the upcoming test, we'll activate the CM feedback loop, where we'll match the total voltage, \\( V_{tot} \\), against a reference, amplify the discrepancy, and feed the outcome back to manage the standing current, \\( I_{SS} \\). We'll fashion the error amplifier using a five-transistor operational transconductance amplifier (OTA) with a \\( W/L = 5 \\mu m / 80 \\text{nm} \\) for each transistor, a tail current of \\( 20 \\mu A \\), and a voltage amplification factor of 10. The amplifier's output governs a proportion of the primary tail current, \\( I_1 \\) (see Fig. 11.29). Assuming an anticipated \\( 20\\% \\) inconsistency between the PMOS current sources in the op amp and the tail current source, we set \\( I_1 \\approx 0.2 I_{SS} \\). Figure 11.29 illustrates the outcome, with the OTA's input and output connections arranged to establish negative feedback around the loop.\n\nIn Figure 11.29, the circuit presents a CMFB loop enveloping a telescopic op-amp. It employs PMOS transistors in the input stage to detect the common-mode level and preserve ample \\( V_{DS} \\) for the tail current source. The op-amp core is configured to set up negative feedback around the loop.\n\nIn Example 11.7, we discuss why the OTA in Figure 11.29 uses PMOS transistors instead of NMOS for the input devices. The rationale is twofold: these transistors must sense the CM level without depleting the necessary \\( V_{DS} \\) for their tail current source, and the OTA's output should align with the nominal DC value required by \\( M_T \\).\n\nFigure 11.30 presents the closed-loop DC sweep results with \\( V_{ref} = 0.5 \\text{V} \\). The graph plots the closed-loop behavior of two variables pertinent to a cascode operational amplifier relative to the input differential voltage (\\( V_{in} \\)). There are two curves plotted: the reconstructed common-mode level (\\( V_{tot} \\)) and the actual common-mode level ((\\( V_X + V_Y \\)/2)). The graph shows how the feedback in the cascode op-amp design aids in stabilizing the actual common-mode level while the reconstructed common-mode level exhibits more pronounced fluctuations with input voltage changes.\n\nFigure 11.31 illustrates the closed-loop behavior of the actual CM level and reconstructed CM level of the cascode op-amp in the presence of mismatch between the tail and PMOS current sources. The feedback mechanism effectively suppresses the mismatch by adjusting \\( I_1 \\).\n\nFor the CMFB loop's stability, we place the op-amp within its intended feedback system, apply differential pulses at the input, and scrutinize the differential and common-mode conduct of the output. Figures 11.32(a) and (b) show the feedback topology for a nominal closed-loop gain of 2 and a detailed view highlighting the CM feedback loop, respectively.\n\nFigure 11.33 displays the output waveforms in response to an input step, showcasing common-mode instability. The loop necessitates compensation due to poles at various nodes.\n\nExample 11.8 delves into studying the CM loop frequency response and acquiring the phase margin, addressing whether differential feedback should be present when the CM loop is disrupted.\n\nFigure 11.35 measures the CMFB loop transmission by breaking the CM loop at node \\( H \\) and using a dummy device to replicate the loading effect of \\( M_T \\).\n\nFigure 11.36(a) exhibits the magnitude and phase of the CMFB loop transmission as a function of frequency before compensation, revealing a phase of \\( -190^\\circ \\) at the unity-gain frequency. Compensation is applied by connecting a \\( 3\\text{pF} \\) capacitor from the error amplifier output to ground, resulting in a phase margin of about \\( 50^\\circ \\) as shown in Figure 11.36(b).\n\nFigure 11.37(a) displays the transient response with CMFB loop compensation, indicating minimal ringing. However, Figure 11.37(b) shows that differential compensation is required to mitigate differential ringing caused by the pole formed by the large resistors in the feedback network and the input capacitance of the op-amp.\n\nExample 11.9 examines the design alterations needed if the op-amp drives a significant load capacitance, \\( C_L \\). The design summary recaps the principles covered in designing the telescopic-cascode op-amp, including transistor allocation, MOSFET characterization, voltage gain estimation, DC sweep studies, bias circuit design, CM feedback design and compensation, and closed-loop transient analysis for CM and differential stability. The folded cascade topology is considered but not pursued due to the difficulty in achieving the required gain of 500."
},
{
    "text": "In the subsequent experiment, we will implement the CM feedback loop: we will match $V_{t o t}$ with a reference, amplify the discrepancy, and use the outcome to govern $I_{S S}$. To facilitate this, we have crafted an error amplifier, a five-transistor OTA with a $W / L=5 \\mu \\mathrm{~m} / 80 \\mathrm{~nm}$ ratio for all transistors, a tail current of $20 \\mu \\mathrm{~A}$, and a voltage amplification factor of 10. The amplifier's output modulates a portion of the primary tail current, $I_{1}$ (Fig. 11.29). For instance, anticipating a $20 \\%$ discrepancy between the PMOS current sources in the op amp and the tail current source, we opt for $I_{1} \\approx 0.2 I_{S S}$. Figure 11.29 illustrates the outcome, where the OTA's input and output connections are arranged to establish negative feedback around the loop.\n\nThe circuit in Figure 11.29 CMFB loop around telescopic op amp.\n\n#### Example 11.7\n\nDiscuss the rationale for the OTA in Figure 11.29 using PMOS (as opposed to NMOS) input devices.\n\n#### Solution\n\nThe decision is influenced by two factors. Primarily, these transistors need to sense the CM level while preserving adequate $V_{D S}$ for their tail current source. Given that $V_{t o t} \\approx V_{D D} / 2$ in this scenario, there is no inherent preference for NMOS or PMOS devices. Secondly, the OTA's output should have a nominal dc value compatible with that required by $M_{T}$.\n\nSince $V_{H}=V_{G}$ (assuming no mismatches), and since $V_{G}$ equals the gate-source voltage of a diode-connected NMOS transistor, we anticipate that $M_{T}$ will nominally replicate the bias current of $M_{G}$ (with a multiplication factor).\n\nFigure 11.30 presents the closed-loop dc sweep results with $V_{\\text {ref }}=0.5 \\mathrm{~V}$.\n\nThe graph in Figure 11.30 displays the closed-loop behavior of two variables pertinent to a cascode operational amplifier as a function of input differential voltage ($V_{in}$). The graph is plotted on a Cartesian plane with the horizontal axis denoting the input differential voltage ($V_{in}$) in millivolts, spanning from -20 mV to 20 mV, and the vertical axis denoting voltage levels in millivolts, ranging from 500 mV to 508 mV.\n\nThere are two curves plotted on this graph:\n\n1. **Reconstructed Common-Mode Level ($V_{tot}$):**\n- This curve, shown in black, exhibits a distinct, symmetrical bell-shaped profile, peaking at approximately 507 mV when $V_{in}$ is around 0 mV. The curve starts at about 503 mV at $V_{in} = -20$ mV, rises to a peak, and then symmetrically decreases back to about 503 mV at $V_{in} = 20$ mV. This indicates that the reconstructed common-mode level is sensitive to the input differential voltage, showing a peak at zero input.\n\n2. **Actual Common-Mode Level (($V_{X} + V_{Y})/2$):**\n- This curve, depicted in gray, demonstrates a much flatter profile compared to $V_{tot}$. It starts at slightly above 501 mV at $V_{in} = -20$ mV, rises gently to just below 503 mV near $V_{in} = 0$ mV, and then descends slightly back towards 501 mV at $V_{in} = 20$ mV. This suggests that the actual common-mode level remains relatively stable despite changes in the input differential voltage.\n\n**Overall Behavior and Trends:**\n- The graph illustrates how feedback in the cascode op amp design helps stabilize the actual common-mode level, while the reconstructed common-mode level varies more significantly with changes in input voltage. The feedback mechanism appears to minimize variations in the actual common-mode level, maintaining it within a narrow range.\n\n**Key Features:**\n- The peak of $V_{tot}$ at $V_{in} = 0$ mV highlights the maximum deviation due to the input differential voltage.\n- The relatively constant behavior of (($V_{X} + V_{Y})/2$) across the input range suggests effective common-mode feedback control.\n\nFigure 11.30 Closed-loop behavior of actual CM level, $\\left(V_{X}+V_{Y}\\right) / 2$, and reconstructed CM level, $V_{\\text {tot }}$, of cascode op amp as a function of input differential voltage.\n\nThrough feedback, the CM variation is significantly mitigated as $V_{X}$ and $V_{Y}$ reach high or low values. Subsequently, we induce a $10 \\%$ mismatch between the PMOS current sources ( $M_{7}$ and $M_{8}$ in Fig. 11.21) and $I_{S S} / 2=950 \\mu \\mathrm{~A}$ and repeat the dc sweep. Figure 11.31 illustrates the variations, indicating that CMFB suppresses the mismatch by adjusting $I_{1}$.\n\nThe graph in Figure 11.31 is a plot depicting the behavior of a cascode op amp's common-mode (CM) levels as a function of the input differential voltage, \\( V_{in} \\). The x-axis represents the input differential voltage \\( V_{in} \\) in millivolts (mV), ranging from -20 mV to 20 mV. The y-axis shows the voltage level in millivolts (mV), ranging from 475 mV to 495 mV.\n\nThere are two curves on the graph:\n\n1. **\\((V_X + V_Y)/2\\) Curve (Gray Line):** This curve represents the actual common-mode level, \\((V_X + V_Y)/2\\). It displays a broad, gentle peak around the center of the \\( V_{in} \\) range. The curve starts at approximately 490 mV at \\( V_{in} = -20 \\) mV, rises slightly to around 492 mV near \\( V_{in} = 0 \\) mV, and then descends back to around 490 mV at \\( V_{in} = 20 \\) mV.\n\n2. **\\(V_{tot}\\) Curve (Black Line):** This curve represents the reconstructed common-mode level, \\( V_{tot} \\). It exhibits a more pronounced peak compared to the gray line, with a maximum value slightly above 485 mV. The curve starts at 475 mV at \\( V_{in} = -20 \\) mV, peaks between \\( V_{in} = -10 \\) mV and \\( V_{in} = 10 \\) mV, and then decreases to around 475 mV at \\( V_{in} = 20 \\) mV.\n\n**Overall Behavior and Trends:**\n- The gray line shows a relatively stable CM level with minor variations, indicating effective suppression of mismatch effects.\n- The black line demonstrates a more dynamic response, reflecting the CMFB's action in adjusting \\( I_1 \\) to compensate for mismatch.\n\n**Key Features:**\n- The peak of the \\( V_{tot} \\) curve suggests the point of maximum feedback adjustment.\n- Both curves illustrate the feedback system's ability to manage CM levels despite input variations, with the \\( V_{tot} \\) curve showing more significant adjustments.\n\nFigure 11.31 Closed-loop behavior of actual CM level, $\\left(V_{X}+V_{Y}\\right) / 2$, and reconstructed CM level, $V_{\\text {tot }}$, of cascode op amp in the presence of mismatch between tail and PMOS current sources.\n\nCMFB Stability We must investigate the stability of the CM loop. This is achieved by placing the overall op amp in its intended feedback system, applying differential pulses at the input, and examining\nthe differential and common-mode behavior of the output. Figure 11.32(a) shows a feedback topology for a nominal closed-loop gain of 2, and Fig. 11.32(b) depicts a more detailed diagram highlighting the CM feedback loop. ${ }^{12}$\nimage_name:(a)\ndescription:\n[\nname: R1, type: Resistor, value: 50kΩ, ports: {N1: Vin, N2: X}\nname: R2, type: Resistor, value: 100kΩ, ports: {N1: X, N2: Vout}\nname: M1, type: NMOS, ports: {S: g1, D: dis3, G: Vb2}\nname: M2, type: NMOS, ports: {S: g2, D: d2s4, G: Vb1}\nname: M3, type: NMOS, ports: {S: dis3, D: X, G: Vb3}\nname: M4, type: NMOS, ports: {S: d2s4, D: X, G: Y}\nname: M5, type: PMOS, ports: {S: VDD, D: ssd1, G: Vbx}\nname: M6, type: PMOS, ports: {S: VDD, D: Y, G: sbd8}\nname: M7, type: PMOS, ports: {S: VDD, D: ssd1, G: Vbx}\nname: M8, type: PMOS, ports: {S: VDD, D: Y, G: sbd8}\nname: MT, type: NMOS, ports: {S: GND, D: H, G: Vb1}\nname: Mg, type: NMOS, ports: {S: GND, D: H, G: Vb1}\n]\nextrainfo:The circuit is a closed-loop amplifier with a CMFB loop. It includes NMOS and PMOS transistors forming a differential pair and current mirrors. The CMFB loop is used for common-mode stability, and compensation is required due to poles at various nodes. The circuit is designed to analyze transient response with a nominal closed-loop gain of 2.\nimage_name:(b)\ndescription:\n[\nname: R1, type: Resistor, value: 50kΩ, ports: {N1: Vin, N2: X}\nname: R2, type: Resistor, value: 100kΩ, ports: {N1: X, N2: GND}\nname: M1, type: NMOS, ports: {S: g1, D: d1s3, G: Vb2}\nname: M2, type: NMOS, ports: {S: g2, D: d2s4, G: Vb1}\nname: M3, type: NMOS, ports: {S: d1s3, D: X, G: Vb3}\nname: M4, type: NMOS, ports: {S: d2s4, D: P, G: X}\nname: M5, type: PMOS, ports: {S: VDD, D: ssd1, G: Vb4}\nname: M6, type: PMOS, ports: {S: sbd8, D: Y, G: X}\nname: M7, type: PMOS, ports: {S: VDD, D: ssd1, G: Vb4}\nname: M8, type: PMOS, ports: {S: sbd8, D: Y, G: X}\nname: MT, type: NMOS, ports: {S: GND, D: H, G: Vb1}\nname: Mg, type: NMOS, ports: {S: GND, D: H, G: Vb1}\nname: OpAmp, type: OpAmp, ports: {InP: H, InN: Vref, OutP: Vtot, OutN: CM Extraction}\nname: Vref, type: VoltageSource, ports: {Np: Vref, Nn: GND}\nname: CM Extraction, type: Other, ports: {N1: CM Extraction, N2: Y}\n]\nextrainfo:The circuit is a common-mode feedback (CMFB) loop with compensation needed due to poles at various nodes. It includes NMOS and PMOS transistors, resistors for setting gains, and an op-amp for feedback control.\n\nFigure 11.32 (a) Closed-loop amplifier for transient analysis, and (b) detailed view showing the CMFB loop.\nPlotted in Fig. 11.33 are the output waveforms in response to an input step, revealing common-mode instability. As evident from Fig. 11.32(b), the CM loop contains a pole at the input of the error amplifier, one at node $H$, one at node $P$, one at the sources of the NMOS cascode devices, and one at the main outputs. The loop therefore demands compensation.\nimage_name:Figure 11.33\ndescription:The graph in Figure 11.33 is a time-domain waveform depicting the transient response of an op-amp circuit, specifically illustrating common-mode instability. The x-axis represents time in nanoseconds (ns), ranging from 0 to 40 ns. The y-axis represents voltage in millivolts (mV), with values ranging from 300 mV to 700 mV. The graph features two waveforms, likely representing different nodes or outputs, depicted in different shades for distinction.\n\nThe overall behavior of the waveforms shows an initial response to a step input, followed by oscillations indicative of instability. Starting at around 500 mV, both waveforms initially exhibit a rapid increase and decrease, with one waveform peaking slightly above 600 mV and the other dipping below 400 mV. Subsequently, both waveforms enter a phase of damped oscillations, with decreasing amplitude until around 15 ns. After this period, the oscillations grow in amplitude, indicating a lack of stability in the system.\n\nKey features include the initial peak and trough within the first 10 ns, followed by a series of oscillations. The waveforms show a clear increase in oscillation amplitude after 20 ns, suggesting a positive feedback or resonance effect that exacerbates the instability. The presence of multiple oscillation cycles and their increasing amplitude highlight the need for compensation in the common-mode feedback loop to stabilize the system. The graph does not feature any annotations or specific markers, but the oscillatory behavior is a critical point of analysis for identifying the instability issues in the circuit.\n\nFigure 11.33 Transient response revealing CM loop instability.\n\n#### Example 11.8\n\nWe wish to study the CM loop frequency response and obtain the phase margin. Should the differential feedback be present when the CM loop is broken? In other words, which of the two topologies in Fig. 11.34(a) should be used to determine the CM loop transmission?\n\n[^87]image_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vin, G: Vip}\nname: M2, type: NMOS, ports: {S: Vin, D: GND, G: Vin}\nname: MT, type: NMOS, ports: {S: GND, D: Vref, G: H}\nname: R1, type: Resistor, value: R1, ports: {N1: GND, N2: Vip}\nname: R2, type: Resistor, value: R2, ports: {N1: Vip, N2: Vin}\nname: C1, type: Capacitor, value: C1, ports: {Np: VDD, Nn: Vin}\nname: H, type: OpAmp, value: H, ports: {InP: Vin, InN: Vref, OutP: H, OutN: GND}\nname: Vtot, type: VoltageSource, value: Vtot, ports: {Np: Vtot, Nn: GND}\nname: Vref, type: VoltageSource, value: Vref, ports: {Np: Vref, Nn: GND}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\nname: d1, type: CurrentSource, value: d1, ports: {Np: VDD, Nn: Vip}\nname: d2, type: CurrentSource, value: d2, ports: {Np: VDD, Nn: Vin}\nname: Vt, type: VoltageSource, value: Vt, ports: {Np: Vt, Nn: GND}\nname: VF, type: VoltageSource, value: VF, ports: {Np: VF, Nn: GND}\n]\nextrainfo:The diagram represents a common-mode feedback (CMFB) system with NMOS transistors and operational amplifiers. The CM Extraction block processes the common-mode signal, and the system is powered by a VDD source. The op-amp labeled 'H' is used for differential feedback.\nimage_name:(b)\ndescription:\n[\nname: MT, type: NMOS, ports: {S: GND, D: Vref, G: Vtot}\nname: H, type: OpAmp, ports: {InP: Vtot, InN: GND, Out: Vref}\nname: R1, type: Resistor, value: R1, ports: {N1: GND, N2: Vin}\nname: R2, type: Resistor, value: R2, ports: {N1: Vin, N2: CM Extraction}\nname: M1, type: NMOS, ports: {S: d1, D: d1s1, G: Vip}\nname: M2, type: NMOS, ports: {S: d2, D: d2s1, G: Vin}\nname: d1, type: CurrentSource, ports: {Np: VDD, Nn: d1}\nname: d2, type: CurrentSource, ports: {Np: VDD, Nn: d2}\nname: C1, type: Capacitor, value: C1, ports: {Np: VDD, Nn: CM Extraction}\nname: Vt, type: VoltageSource, ports: {Np: Vt, Nn: GND}\nname: VF, type: VoltageSource, value: VF, ports: {Np: VF, Nn: GND}\n]\nextrainfo:The circuit in (b) is a common-mode feedback configuration with differential inputs. It includes NMOS transistors M1 and M2, current sources d1 and d2, and a CM extraction block. The op-amp H stabilizes the common-mode"
},
{
    "text": "For our subsequent evaluation, we will implement a closed-loop feedback mechanism for the CM: we will contrast $V_{t o t}$ with a reference voltage, amplify the discrepancy, and feed the amplified signal back to modulate $I_{S S}$. To facilitate this, we have crafted an error amplifier utilizing a five-transistor OTA configuration, each transistor having a $W / L$ ratio of $5 \\mu \\mathrm{~m} / 80 \\mathrm{~nm}$, a tail current of $20 \\mu \\mathrm{~A}$, and a a voltage ampl of 10. The output from this amplifier governs a portion\nIn\nCertainly the upcoming assessment, we will activate the CM feedback loop by contrasting $V_{t o t}$ with a reference value\nIn the subsequent test, we will activate the CM feedback loop by comparing $V_{t o t}$ with a reference voltage,"
},
{
    "text": "In our subsequent examination, we will seal the CM feedback loop: we will match $V_{t o t}$ against a benchmark, magnify the discrepancy, and revert the outcome to govern $I_{S S}$. For this purpose, we have crafted the error amplifier as a five-transistor OTA with $W / L=5 \\mu \\mathrm{~m} / 80 \\mathrm{~nm}$ for all transistors, a tail current of $20 \\mu \\mathrm{~A}$, and a voltage gain of 10. The output of this amplifier governs a fraction of the main tail current, $I_{1}$ (Fig. 11.29). For instance, anticipating a $20 \\%$ mismatch between the PMOS current sources in the op amp and the tail current source, we select $I_{1} \\approx 0.2 I_{S S}$. Figure 11.29 portrays the outcome, where the OTA's input and output connections are arranged to establish negative feedback around the loop.\n\nThe circuit in Figure 11.29 represents a CMFB loop around a telescopic op-amp. It utilizes PMOS transistors in the input stage to detect the common-mode level and preserve adequate $V_{D S}$ for the tail current source. The op-amp core is configured to set up negative feedback around the loop.\n\n#### Example 11.7\n\nElucidate why the OTA in Figure 11.29 utilizes PMOS (instead of NMOS) input devices.\n\n#### Solution\n\nThe selection is driven by two factors. Primarily, these transistors must detect the CM level while preserving sufficient $V_{D S}$ for their tail current source. Given $V_{t o t} \\approx V_{D D} / 2$ in this scenario, there is no specific preference for NMOS or PMOS devices. Secondly, the output of the OTA should have a nominal dc value compatible with that required by $M_{T}$.\n\nSince $V_{H}=V_{G}$ (in the absence of mismatches), and since $V_{G}$ is equivalent to the gate-source voltage of a diode-connected NMOS transistor, we anticipate that $M_{T}$ nominally duplicates the bias current of $M_{G}$ (with a multiplication factor).\n\nFigure 11.30 presents the closed-loop dc sweep outcomes with $V_{\\text {ref }}=0.5 \\mathrm{~V}$.\n\nThe graph in Figure 11.30 illustrates the closed-loop behavior of two variables pertinent to a cascode operational amplifier as a function of input differential voltage ($V_{in}$). The graph is charted on a Cartesian plane with the horizontal axis signifying the input differential voltage ($V_{in}$) in millivolts, ranging from -20 mV to 20 mV, and the vertical axis representing voltage levels in millivolts, ranging from 500 mV to 508 mV.\n\nTwo curves are charted on this graph:\n\n1. **Reconstructed Common-Mode Level ($V_{tot}$):**\n- This curve is represented in black and exhibits a distinct, symmetrical bell-shaped contour, peaking at approximately 507 mV when $V_{in}$ is around 0 mV. The curve initiates at about 503 mV at $V_{in} = -20$ mV, ascends to a peak value, and then symmetrically descends back to about 503 mV at $V_{in} = 20$ mV. This indicates that the reconstructed common-mode level is sensitive to the input differential voltage, displaying a peak at zero input.\n\n2. **Actual Common-Mode Level (($V_{X} + V_{Y})/2$):**\n- This curve is depicted in gray and demonstrates a much flatter contour compared to $V_{tot}$. It starts at slightly above 501 mV at $V_{in} = -20$ mV, rises gently to just below 503 mV near $V_{in} = 0$ mV, and then descends slightly back towards 501 mV at $V_{in} = 20$ mV. This suggests that the actual common-mode level remains relatively stable despite changes in the input differential voltage.\n\n**Overall Behavior and Trends:**\n- The graph elucidates how feedback in the cascode op amp design aids in stabilizing the actual common-mode level, while the reconstructed common-mode level fluctuates more significantly with changes in input voltage. The feedback mechanism seems to minimize variations in the actual common-mode level, maintaining it within a narrow range.\n\n**Key Features:**\n- The peak of $V_{tot}$ at $V_{in} = 0$ mV highlights the maximum deviation due to the input differential voltage.\n- The relatively constant behavior of (($V_{X} + V_{Y})/2$) across the input range suggests effective common-mode feedback control.\n\nFigure 11.30 Closed-loop behavior of actual CM level, $\\left(V_{X}+V_{Y}\\right) / 2$, and reconstructed CM level, $V_{\\text {tot }}$, of cascode op amp as a function of input differential voltage.\n\nThrough feedback, the CM fluctuation is greatly mitigated as $V_{X}$ and $V_{Y}$ reach high or low values. Subsequently, we generate a $10 \\%$ mismatch between the PMOS current sources ( $M_{7}$ and $M_{8}$ in Fig. 11.21) and $I_{S S} / 2=950 \\mu \\mathrm{~A}$ and replicate the dc sweep. Figure 11.31 illustrates the fluctuations, indicating that CMFB suppresses the mismatch by adjusting $I_{1}$.\n\nThe graph in Figure 11.31 illustrates the behavior of a cascode op amp's common-mode (CM) levels as a function of the input differential voltage, \\( V_{in} \\). The x-axis represents the input differential voltage \\( V_{in} \\) in millivolts (mV), ranging from -20 mV to 20 mV. The y-axis exhibits the voltage level in millivolts (mV), ranging from 475 mV to 495 mV.\n\nTwo curves are present on the graph:\n\n1. **\\((V_X + V_Y)/2\\) Curve (Gray Line):** This curve signifies the actual common-mode level, \\((V_X + V_Y)/2\\). It displays a broad, gentle peak around the center of the \\( V_{in} \\) range. The curve starts at approximately 490 mV at \\( V_{in} = -20 \\) mV, rises slightly to around 492 mV near \\( V_{in} = 0 \\) mV, and then descends back to around 490 mV at \\( V_{in} = 20 \\) mV.\n\n2. **\\(V_{tot}\\) Curve (Black Line):** This curve signifies the reconstructed common-mode level, \\( V_{tot} \\). It exhibits a more pronounced peak compared to the gray line, with a maximum value slightly above 485 mV. The curve starts at 475 mV at \\( V_{in} = -20 \\) mV, peaks between \\( V_{in} = -10 \\) mV and \\( V_{in} = 10 \\) mV, and then decreases to around 475 mV at \\( V_{in} = 20 \\) mV.\n\n**Overall Behavior and Trends:**\n- The gray line shows a relatively stable CM level with minor fluctuations, indicating effective suppression of mismatch effects.\n- The black line demonstrates a more dynamic response, reflecting the CMFB's action in adjusting \\( I_1 \\) to compensate for mismatch.\n\n**Key Features:**\n- The peak of the \\( V_{tot} \\) curve suggests the point of maximum feedback adjustment.\n- Both curves illustrate the feedback system's ability to manage CM levels despite input variations, with the \\( V_{tot} \\) curve showing more significant adjustments.\n\nFigure 11.31 Closed-loop behavior of actual CM level, $\\left(V_{X}+V_{Y}\\right) / 2$, and reconstructed CM level, $V_{\\text {tot }}$, of cascode op amp in the presence of mismatch between tail and PMOS current sources.\n\nCMFB Stability We must scrutinize the stability of the CM loop. This is achieved by positioning the overall op amp within its intended feedback system, administering differential pulses at the input, and scrutinizing the differential and common-mode behavior of the output. Figure 11.32(a) portrays a feedback topology for a nominal closed-loop gain of 2, and Fig. 11.32(b) delineates a more detailed diagram emphasizing the CM feedback loop.\n\nThe circuit in Figure 11.32 (a) is a closed-loop amplifier designed for transient analysis, and (b) provides a detailed view showcasing the CMFB loop.\n\nPlotted in Figure 11.33 are the output waveforms in response to an input step, revealing common-mode instability. As evident from Figure 11.32(b), the CM loop encompasses a pole at the input of the error amplifier, one at node $H$, one at node $P$, one at the sources of the NMOS cascode devices, and one at the main outputs. The loop consequently necessitates compensation.\n\nThe graph in Figure 11.33 illustrates the transient response of an op-amp circuit, specifically depicting common-mode instability. The x-axis represents time in nanoseconds (ns), ranging from 0 to 40 ns. The y-axis represents voltage in millivolts (mV), with values ranging from 300 mV to 700 mV. The graph features two waveforms, likely representing different nodes or outputs, depicted in different shades for distinction.\n\nThe overall behavior of the waveforms exhibits an initial response to a step input, followed by oscillations indicative of instability. Starting at around 500 mV, both waveforms initially display a rapid increase and decrease, with one waveform peaking slightly above 600 mV and the other dipping below 400 mV. Subsequently, both waveforms enter a phase of damped oscillations, with decreasing amplitude until around 15 ns. After this period, the oscillations grow in amplitude, indicating a lack of stability in the system.\n\nKey features include the initial peak and trough within the first 10 ns, followed by a series of oscillations. The waveforms show a clear increase in oscillation amplitude after 20 ns, suggesting a positive feedback or resonance effect that exacerbates the instability. The presence of multiple oscillation cycles and their increasing amplitude highlight the need for compensation in the common-mode feedback loop to stabilize the system. The graph lacks any annotations or specific markers, but the oscillatory behavior is a critical point of analysis for identifying the instability issues in the circuit.\n\nFigure 11.33 Transient response revealing CM loop instability.\n\n#### Example 11.8\n\nWe aim to investigate the CM loop frequency response and procure the phase margin. Should the differential feedback be present when the CM loop is severed? In other words, which of the two topologies in Figure 11.34(a) should be utilized to determine the CM loop transmission?\n\n[^87]image_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vin, G: Vip}\nname: M2, type: NMOS, ports: {S: Vin, D: GND, G: Vin}\nname: MT, type: NMOS, ports: {S: GND, D: Vref, G: H}\nname: R1, type: Resistor, value: R1, ports: {N1: GND, N2: Vip}\nname: R2, type: Resistor, value: R2, ports: {N1: Vip, N2: Vin}\nname: C1, type: Capacitor, value: C1, ports: {Np: VDD, Nn: Vin}\nname: H, type: OpAmp, value: H, ports: {InP: Vin, InN: Vref, OutP: H, OutN: GND}\nname: Vtot, type: VoltageSource, value: Vtot, ports: {Np: Vtot, Nn: GND}\nname: Vref, type: VoltageSource, value: Vref, ports: {Np: Vref, Nn: GND}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\nname: d1, type: CurrentSource, value: d1, ports: {Np: VDD, Nn: Vip}\nname: d2, type: CurrentSource, value: d2, ports: {Np: VDD, Nn: Vin}\nname: Vt, type: VoltageSource, value: Vt, ports: {Np: Vt, Nn: GND}\nname: VF, type: VoltageSource, value: VF, ports: {Np: VF, Nn: GND}\n]\nextrainfo:The diagram represents a common-mode feedback (CMFB) system with NMOS transistors and operational amplifiers. The CM Extraction block processes the common-mode signal, and the system is powered by a VDD source. The op-amp labeled 'H' is used for differential feedback.\nimage_name:(b)\ndescription:\n[\nname: MT, type: NMOS, ports: {S: GND, D: Vref, G: Vtot}\nname: H, type: OpAmp, ports: {InP: Vtot, InN: GND, Out: Vref}\nname: R1, type: Resistor, value: R1, ports: {N1: GND, N2: Vin}\nname: R2, type: Resistor, value: R2, ports: {N1: Vin, N2: CM Extraction}\nname: M1, type: NMOS, ports: {S: d1, D: d1s1, G: Vip}\nname: M2, type: NMOS, ports: {S: d2, D: d2s1, G: Vin}\nname: d1, type: CurrentSource, ports: {Np: VDD, Nn: d1}\nname: d2, type: CurrentSource, ports: {Np: VDD, Nn: d2}\nname: C1, type: Capacitor, value: C1, ports: {Np: VDD, Nn: CM Extraction}\nname: Vt, type: VoltageSource, ports: {Np: Vt, Nn: GND}\nname: VF, type: VoltageSource, value: VF, ports: {Np: VF, Nn: GND}\n]\nextrainfo:The circuit in (b) is a common-mode feedback configuration with differential inputs. It includes NMOS transistors M1 and M2, current sources d1 and d2, and a CM extraction block. The op-amp H stabilizes the common-mode voltage.\nimage_name:(c)\ndescription:\n[\nname: MT, type: NMOS, ports: {S: GND, D: Vref, G: Vtot}\nname: H, type: OpAmp, value: H, ports: {InP: Vref, InN: Vtot, OutP: Vtot, OutN: Vref}\nname: R1, type: Resistor, value: R1, ports: {N1: GND, N2: Vtot}\nname: R2, type: Resistor, value: R2, ports: {N1: Vtot, N2: VDD}\nname: M1, type: NMOS, ports: {S: GND, D: P, G: Vtot}\nname: M2, type: NMOS, ports: {S: GND, D: P, G: Vtot}\nname: C1, type: Capacitor, value: C1, ports: {Np: P, Nn: VDD}\nname: Vt, type: VoltageSource, value: Vt, ports: {Np: Vref, Nn: GND}\nname: VF, type: VoltageSource, value: VF, ports: {Np: VF, Nn: GND}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\nname: d1, type: CurrentSource, value: d1, ports: {Np: VDD, Nn: P}\nname: d2, type: CurrentSource, value: d2, ports: {Np: VDD, Nn: P}\n]\nextrainfo:The circuit diagram (c) is designed for common-mode feedback (CMFB) analysis with differential feedback present. It includes NMOS transistors M1 and M2, a capacitor C1, and a common-mode extraction block. The CMFB loop is analyzed with the presence of differential feedback to ensure stability. The circuit also includes voltage sources Vt and VF for reference and feedback purposes.\n\nFigure 11.34\n\n#### Solution\n\nCommon-mode feedback must ultimately function well with differential feedback present. This is because the actual environment in which CMFB must remain stable incorporates differential feedback. For instance, consider the simple op amp depicted in Figure 11.34(b). For CM analysis, the two sides can be merged into one, yielding the two potential scenarios depicted in Figure 11.34(c) if the differential feedback is absent or present. Derived as $-V_{F} / V_{t}$, the CM loop transmissions computed for these two cases are not necessarily the same. For example, if the capacitance at the drain, $C_{1}$, is considered, the pole associated with this node assumes different values in the two topologies. Thus, we must preserve differential feedback while examining CM stability.\n\nLet us sever the CM loop in Figure 11.32(b) at node $H$ as depicted in Figure 11.35. Here, the error amplifier drives a dummy device, $M_{d}$, identical to $M_{T}$ so as to observe the loading effect of the latter. Plotted in\nimage_name:Figure 11.35\ndescription:\n[\nname: M1, type: NMOS, ports: {S: P, D: X, G: Vin}\nname: M2, type: NMOS, ports: {S: P, D: Y, G: Vin}\nname: M3, type: PMOS, ports: {S: X, D: P, G: VDD}\nname: M4, type: PMOS, ports: {S: Y, D: P, G: VDD}\nname: M5, type: PMOS, ports: {S: VDD, D: X, G: X}\nname: M6, type: PMOS, ports: {S: VDD, D: Y, G: Y}\nname: M7, type: PMOS, ports: {S: VDD, D: X, G: X}\nname: M8, type: PM"
},
{
    "text": "In our subsequent trial, we will engage in closing the CM feedback loop: we will contrast $V_{t o t}$ with a reference value, amplify the discrepancy, and use the outcome to manage $I_{S S}$. To facilitate this, we have crafted the error amplifier as a five-transistor OTA featuring $W / L=5 \\mu \\mathrm{~m} / 80 \\mathrm{~nm}$ for all transistors, a tail current of $20 \\mu \\mathrm{~A}$, and a voltage gain of 10. This amplifier's output governs a portion of the primary tail current, $I_{1}$ (Fig. 11.29). For instance, anticipating a $20 \\%$ discrepancy between the PMOS current sources in the op amp and the tail current source, we select $I_{1} \\approx 0.2 I_{S S}$. Figure 11.29 illustrates the outcome, with the OTA's input and output connections strategically selected to instigate negative feedback within the loop."
}
]