[

{
    "text": "Amplification serves as a crucial function in the majority of analog and numerous digital circuits. We enhance analog or digital signals to ensure they are sufficiently powerful to drive loads, surpass the noise in subsequent stages, or deliver appropriate logical levels to digital circuits. Additionally, amplification is pivotal in feedback systems, as discussed in Chapter 8.\n\nThis chapter delves into the low-frequency performance of single-stage CMOS amplifiers. By examining both large-signal and small-signal attributes of each circuit, we cultivate intuitive methods and models that are instrumental in comprehending more intricate systems. A key aspect of a designer's role involves employing suitable approximations to form a simplified mental image of a complex circuit. This intuitive understanding enables the rapid assessment of most circuits' behavior through inspection, rather than exhaustive calculations.\n\nAfter a concise review of fundamental concepts, this chapter outlines four amplifier types: common-source and common-gate configurations, source followers, and cascode setups. For each type, we start with a basic model and progressively incorporate secondary effects like channel-length modulation and body effect."
},
{
    "text": "Amplification serves as a fundamental function in the majority of analog and numerous digital circuits. We enhance analog or digital signals to ensure they are sufficiently powerful to drive a load, surmount the noise of subsequent stages, or deliver appropriate logical levels to a digital circuit. Additionally, amplification is pivotal in feedback systems, as discussed in Chapter 8.\n\nThis chapter delves into the low-frequency performance of single-stage CMOS amplifiers. By examining both large-signal and small-signal traits of each circuit, we cultivate intuitive methods and models that are instrumental in comprehending more intricate systems. A crucial aspect of a designer's role involves employing suitable approximations to construct a simplified mental image of a complex circuit. This intuitive insight enables the swift assessment of most circuits' behavior through observation rather than extensive computations.\n\nAfter a concise review of fundamental concepts, this chapter outlines four amplifier types: common-source and common-gate configurations, source followers, and cascode setups. For each type, we initiate with a basic model and progressively incorporate secondary effects like channel-length modulation and body effect."
},
{
    "text": "Amplification serves as a crucial function in the majority of analog (and numerous digital) circuits. We enhance analog or digital signals when they are too weak to drive a load, surmount the noise of a following stage, or deliver appropriate logical levels to a digital circuit. Additionally, amplification is vital in feedback systems (discussed in Chapter 8).\n\nThis chapter delves into the low-frequency performance of single-stage CMOS amplifiers. By examining both the large-signal and small-signal traits of each circuit, we cultivate intuitive methods and models that are instrumental in comprehending more intricate systems. A key aspect of a designer's role is to employ suitable approximations to form a simplified mental image of a complex circuit. This intuitive understanding enables the behavior of most circuits to be deduced through inspection rather than extensive calculations.\n\nAfter a concise review of fundamental concepts, this chapter outlines four amplifier types: common-source and common-gate configurations, source followers, and cascode setups. For each type, we start with a basic model and progressively incorporate secondary effects like channel-length modulation and body effect."
},
{
    "text": "Amplification serves as a crucial function in the majority of analog and numerous digital circuits. We enhance analog or digital signals to ensure they are sufficiently powerful to drive a load, surmount the noise in subsequent stages, or deliver appropriate logical levels to a digital circuit. Additionally, amplification is pivotal in feedback systems, as discussed in Chapter 8.\n\nThis chapter delves into the low-frequency performance of single-stage CMOS amplifiers. By examining both large-signal and small-signal attributes of each circuit, we cultivate intuitive methods and models that are invaluable for comprehending more intricate systems. A key aspect of a designer's role involves employing suitable approximations to construct a simplified mental representation of a complex circuit. This intuitive grasp facilitates the ability to deduce the behavior of most circuits through inspection, rather than extensive calculations.\n\nAfter a concise review of fundamental concepts, this chapter outlines four amplifier types: common-source and common-gate configurations, source followers, and cascode setups. For each type, we initiate with a basic model and progressively incorporate secondary effects such as channel-length modulation and body effect."
},
{
    "text": "Amplification is a crucial function in the majority of analog (and numerous digital) circuits. We enhance analog or digital signals because they might be too weak to drive a load, surpass the noise of a following stage, or deliver the necessary logical levels to a digital circuit. Amplification also holds a pivotal position in feedback systems (Chapter 8).\n\nWithin this chapter, we examine the low-frequency performance of single-stage CMOS amplifiers. By analyzing both large-signal and small-signal traits of each circuit, we establish intuitive methods and models that are invaluable for comprehending more intricate systems. A key aspect of a designer's role is to employ appropriate approximations to construct a simplified mental image of a complex circuit. The resulting intuition enables the behavior of most circuits to be deduced through inspection rather than extensive calculations.\n\nAfter a concise review of fundamental concepts, this chapter outlines four amplifier types: common-source and common-gate arrangements, source followers, and cascode setups. For each type, we start with a basic model and progressively incorporate secondary effects such as channel-length modulation and body effect."
},
{
    "text": "Amplification serves as a crucial function in the majority of analog (and numerous digital) circuits. We enhance analog or digital signals because they might be too weak to power a load, surpass the noise of a following stage, or deliver the necessary logical levels to a digital circuit. Additionally, amplification is vital in feedback systems (discussed in Chapter 8).\n\nThis chapter focuses on the low-frequency performance of single-stage CMOS amplifiers. By examining both the large-signal and small-signal traits of each circuit, we introduce intuitive methods and models that are invaluable for grasping more intricate systems. A key aspect of a designer's role is to employ appropriate approximations to construct a simplified mental image of a complex circuit. This intuition enables the behavior of most circuits to be understood through inspection rather than extensive calculations.\n\nAfter a concise review of fundamental concepts, this chapter outlines four amplifier types: common-source and common-gate arrangements, source followers, and cascode setups. For each type, we start with a basic model and progressively incorporate second-order effects like channel-length modulation and body effect."
},
{
    "text": "Amplification serves as a crucial function in the majority of analog (and numerous digital) circuits. We enhance analog or digital signals when they are too weak to drive a load, surmount the noise of a following stage, or deliver appropriate logical levels to a digital circuit. Additionally, amplification is vital in feedback systems (discussed in Chapter 8).\n\nIn this chapter, we delve into the low-frequency performance of single-stage CMOS amplifiers. By examining both large-signal and small-signal traits of each circuit, we establish intuitive methods and models that are instrumental in comprehending more intricate systems. A key aspect of a designer's role is to employ suitable approximations to form a simplified mental image of a complex circuit. This intuition enables the behavior of most circuits to be deduced through inspection rather than extensive computations.\n\nAfter a concise review of fundamental concepts, this chapter outlines four amplifier types: common-source and common-gate configurations, source followers, and cascode setups. For each type, we start with a basic model and progressively incorporate second-order effects like channel-length modulation and body effect."
},
{
    "text": "Amplification is a crucial function in the majority of analog (and numerous digital) circuits. We enhance analog or digital signals because they might be too weak to drive a load, surpass the noise of a following stage, or deliver the necessary logical levels to a digital circuit. Additionally, amplification is pivotal in feedback systems (covered in Chapter 8).\n\nIn this chapter, we delve into the low-frequency performance of single-stage CMOS amplifiers. By examining both the large-signal and small-signal traits of each circuit, we establish intuitive methods and models that are invaluable for grasping more intricate systems. A key aspect of a designer's role is to employ appropriate approximations to form a simplified mental image of a complex circuit. This intuitive understanding enables the prediction of most circuit behaviors through inspection, rather than extensive calculations.\n\nAfter a concise overview of fundamental concepts, this chapter outlines four amplifier types: common-source and common-gate configurations, source followers, and cascode setups. For each type, we start with a basic model and progressively incorporate secondary effects like channel-length modulation and body effect."
},
{
    "text": "An optimal amplifier produces an output, \\( y(t) \\), that is a linear replica of the input, \\( x(t) \\):\n\n$$\n\\begin{equation*}\ny(t)=\\alpha_{1} x(t) \\tag{3.1}\n\\end{equation*}\n$$\n\nimage_name:Desired Signal\ndescription:The graph labeled \"Desired Signal\" is a frequency-domain representation showing two distinct signals. The x-axis represents frequency, denoted as \\( f \\), while the y-axis, though unlabeled, typically signifies signal amplitude or power.\n\n1. **Graph Type and Function:**\n- This is a frequency spectrum graph, commonly used to display the presence of signals at various frequencies.\n\n2. **Axes Labels and Units:**\n- The x-axis is marked \\( f \\) for frequency. The y-axis is unlabeled but generally represents amplitude or power.\n- The scale is linear, typical for such diagrams.\n\n3. **Overall Behavior and Trends:**\n- The graph exhibits two distinct peaks. The first peak, labeled \"Desired Signal,\" is shorter and appears at a lower frequency. The second peak, labeled \"Interferer,\" is taller and occurs at a higher frequency.\n- The desired signal is narrower, indicating a specific frequency range, whereas the interferer is broader, suggesting it spans a wider frequency band.\n\n4. **Key Features and Technical Details:**\n- The desired signal is the target frequency the system aims to receive or process.\n- The interferer represents unwanted noise or signals that can disrupt the desired signal.\n- The graph visually highlights the distinction between the desired signal and potential interference, crucial for designing filters or amplifiers to isolate the desired signal.\n\n5. **Annotations and Specific Data Points:**\n- The graph is annotated with \"Desired Signal\" and \"Interferer\" to differentiate between the two signals.\n- No specific numerical values or markers are provided for frequencies or amplitudes, but the visual representation clearly distinguishes the two signal types.\nimage_name:Figure 3.1 General RF transceiver\ndescription:The diagram labeled \"Figure 3.1 General RF transceiver\" illustrates the primary components of a radio frequency (RF) transceiver system, encompassing both receiving and transmitting sections.\n\n1. **Main Components:**\n- **Antenna:** Captures incoming RF signals and transmits outgoing signals.\n- **Receiver Section:**\n- **LNA (Low Noise Amplifier):** Amplifies weak incoming signals from the antenna while adding minimal noise, preserving signal quality.\n- **Downconverter:** Converts the amplified high-frequency signal to a lower intermediate frequency (IF) for easier processing.\n- **Amplifying Stages:** Further amplify the downconverted signal to suitable levels for demodulation and processing.\n- **Transmitter Section:**\n- **PA (Power Amplifier):** Amplifies the signal to be transmitted to a higher power level suitable for over-the-air transmission.\n- **Upconverter:** Converts the signal from a lower frequency to the desired RF frequency for transmission.\n- **Microphone (Mike):** Captures audio input for processing and transmission.\n\n2. **Information and Control Flow:**\n- In the receiver section, the signal flow starts at the antenna, which captures RF signals. These signals are then amplified by the LNA and proceed to the downconverter, which shifts them to a lower frequency before passing through additional amplifying stages.\n- In the transmitter section, the audio signal from the microphone is processed and upconverted to a higher frequency. The upconverted signal is then amplified by the PA before being transmitted via the antenna.\n\n3. **Labels, Annotations, and Key Indicators:**\n- The diagram includes labels like \"Desired Signal\" and \"Interferer,\" indicating the frequency spectrum of interest and potential noise or interference.\n- Key components such as LNA, PA, downconverter, and upconverter are clearly marked, providing a clear understanding of their roles.\n\n4. **System Function Overview:**\n- The primary function of this RF transceiver is to receive, process, and transmit RF signals. The receiver section ensures that incoming signals are amplified and converted to a manageable frequency, while the transmitter section prepares and amplifies outgoing signals. This setup optimizes signal quality and power levels at each stage for efficient communication.\n\nFigure 3.1 General RF transceiver.\nwhere \\( \\alpha_{1} \\) represents the gain. Since the output signal is superimposed on a bias (dc operating) point, \\( \\alpha_{0} \\), the overall output can be expressed as \\( y(t)=\\alpha_{0}+\\alpha_{1} x(t) \\). In this scenario, the input-output (large-signal) characteristic of the circuit is a straight line [Fig. 3.2(a)]. However, as signal excursions become larger and the transistor bias point is significantly disturbed, the gain (the slope of the characteristic) begins to vary [Fig. 3.2(b)]. We approximate this nonlinear characteristic with a polynomial:\n\n$$\n\\begin{equation*}\ny(t)=\\alpha_{0}+\\alpha_{1} x(t)+\\alpha_{2} x^{2}(t)+\\cdots+\\alpha_{n} x^{n}(t) \\tag{3.2}\n\\end{equation*}\n$$\n\nA nonlinear amplifier distorts the signal of interest or creates unwanted interactions among multiple signals present at the input. We address the issue of nonlinearity in Chapter 14.\nimage_name:(a)\ndescription:The graph labeled \"(a)\" depicts the linear input-output characteristic of a system, likely representing a linear amplifier. This is a simple line plot on a two-dimensional Cartesian coordinate system.\n\n1. **Graph Type and Function:**\n- The graph is a linear plot showing the input-output relationship, typical for linear systems.\n\n2. **Axes Labels and Units:**\n- The horizontal axis (x-axis) represents the input variable, denoted as \\( x \\).\n- The vertical axis (y-axis) represents the output variable, denoted as \\( y \\).\n- No specific units are provided, indicating a general input-output behavior representation.\n\n3. **Overall Behavior and Trends:**\n- The graph displays a straight line with a positive slope, indicating direct proportionality between input and output.\n- The line starts from the point \\( \\alpha_0 \\) on the y-axis, representing the y-intercept.\n- The slope of the line, denoted as \\( \\alpha_1 \\), is constant, indicating consistent gain across the input range.\n\n4. **Key Features and Technical Details:**\n- The slope \\( \\alpha_1 \\) represents the amplifier's gain.\n- The intercept \\( \\alpha_0 \\) indicates the output when the input is zero, often representing a bias or offset.\n- This linearity suggests ideal, undistorted amplification without saturation or clipping.\n\n5. **Annotations and Specific Data Points:**\n- A dashed line indicates the slope \\( \\alpha_1 \\), emphasizing the gain characteristic.\n- No specific numerical values are given, maintaining a general depiction of linear behavior.\nimage_name:(b)\ndescription:The graph labeled \"(b)\" shows the input-output characteristic of a nonlinear system, typical of a nonlinear amplifier's behavior when an input signal is applied.\n\n1. **Graph Type and Function:**\n- The graph plots the output signal \\( y \\) versus the input signal \\( x \\), illustrating their nonlinear relationship.\n\n2. **Axes Labels and Units:**\n- The horizontal axis (\\( x \\)) represents the input signal.\n- The vertical axis (\\( y \\)) represents the output signal.\n- No specific units or scales are provided, but a linear scale is assumed.\n\n3. **Overall Behavior and Trends:**\n- The graph shows a curve that starts with a gentle slope, increases more sharply in the middle, and then flattens as \\( x \\) increases, indicating saturation where the output no longer significantly increases with input.\n- The nonlinear behavior is characterized by a bending curve, suggesting variable gain with input level.\n\n4. **Key Features and Technical Details:**\n- The curve initially rises slowly, indicating lower gain at lower input levels.\n- As the input increases to a certain range, the slope steepens, showing higher gain.\n- Beyond a certain point (around \\( x_2 \\)), the curve flattens, indicating saturation.\n\n5. **Annotations and Specific Data Points:**\n- Two vertical dashed lines at \\( x_1 \\) and \\( x_2 \\) mark important transition points or thresholds in the input signal.\n- No numerical values or specific data points are provided, but these lines suggest regions of significant behavior change.\n\nFigure 3.2 Input-output characteristic of a (a) linear and (b) nonlinear system.\nWhat are the critical performance aspects of an amplifier? Besides gain and speed, parameters like power dissipation, supply voltage, linearity, noise, and maximum voltage swings are crucial. Additionally, the input and output impedances affect how the circuit interacts with preceding and subsequent stages. In practice, these parameters often trade off against each other, making amplifier design a multidimensional optimization problem. Illustrated in the \"analog design octagon\" of Fig. 3.3, these trade-offs present significant challenges in designing high-performance amplifiers, requiring intuition and experience to achieve an acceptable compromise.\n\nTable 3.1 previews the amplifier topologies covered in this chapter, highlighting the prevalent use of the common-source (CS) stage compared to other configurations. For these amplifiers, we must (1) establish proper bias conditions to ensure each transistor provides the necessary transconductance and output resistance with specific quiescent currents and voltages, and (2) analyze the circuit's behavior as input and output signals cause small or large deviations from the bias point (small-signal and large-signal analyses, respectively). We address the latter task here and defer the former to Chapter 5.\nimage_name:Figure 3.3 Analog design octagon\ndescription:The diagram titled \"Figure 3.3 Analog design octagon\" provides a conceptual framework for understanding the trade-offs in analog design. It is structured as an octagon, with each vertex representing a critical aspect of analog circuit performance. The components and their inter relationships are as follows:\n\n1. **Noise**: Located at the top left, noise represents unwanted signal variations. It is directly linked to linearity, indicating a trade-off between signal purity and distortion reduction.\n\n2. **Linearity**: Positioned opposite noise, linearity ensures the output signal is a linear function of the input, crucial for minimizing distortion in amplifiers and other analog circuits.\n\n3. **Gain**: Found at the top right, gain refers to the circuit's amplification factor. It is related to supply voltage, suggesting that changes in supply voltage can affect gain.\n\n4. **Supply Voltage**: Next to gain, supply voltage is a critical factor influencing the circuit's power and performance.\n\n5. **Voltage Swings**: At the bottom right, voltage swings represent the output voltage range the circuit can handle without distortion.\n\n6. **Speed**: Located at the bottom, speed refers to the circuit's ability to handle high-frequency signals. It is connected to voltage swings, indicating that larger swings can impact speed.\n\n7. **Input/Output Impedance**: At the bottom left, this factor affects the circuit's interface with other components. It is linked to speed, suggesting a balance between impedance and speed.\n\n8. **Power Dissipation**: Positioned above input/output impedance, power dissipation is crucial for managing thermal aspects. It is connected to noise, indicating that power efficiency can influence noise levels.\n\nThe dashed lines within the octagon illustrate the complex interdependencies between these factors, highlighting the design compromises required. For instance, improving speed might negatively affect power dissipation or noise.\n\nOverall, the octagon serves as a visual aid for designers to understand and navigate the trade-offs in analog circuit design, ensuring the final product meets desired specifications and performance criteria.\n\nFigure 3.3 Analog design octagon.\n\nTable 3.1 Amplifier categories.\n\n| Common-Source Stage | Source Follower | Common-Gate Stage | Cascode |\n| :---: | :---: | :---: | :---: |\n| With Resistive Load | With Resistive Bias | With Resistive Load | Telescopic |\n| With Diode-Connected Load | With Current-Source Bias | With Current-Source Load | Folded |\n| With Current-Source Load |  |  |  |\n| With Active Load |  |  |  |\n| With Source Degeneration |  |  |  |"
},
{
    "text": "An optimal amplifier produces an output, $y(t)$, that is a linear replica of the input, $x(t)$:\n\n$$\n\\begin{equation*}\ny(t)=\\alpha_{1} x(t) \\tag{3.1}\n\\end{equation*}\n$$\n\nimage_name:Desired Signal\ndescription:The graph labeled \"Desired Signal\" is a frequency-domain representation showing two distinct signals. The x-axis represents frequency, denoted as \\( f \\), while the y-axis, though unlabeled, typically indicates signal amplitude or power.\n\n1. **Type of Graph and Function:**\n- This is a frequency spectrum graph, commonly used to display the presence of signals at various frequencies.\n\n2. **Axes Labels and Units:**\n- The x-axis is labeled \\( f \\) for frequency. The y-axis is unlabeled but generally represents amplitude or power.\n- The scale is linear, typical for such diagrams.\n\n3. **Overall Behavior and Trends:**\n- The graph features two distinct peaks. The first peak, labeled \"Desired Signal,\" is shorter and appears at a lower frequency. The second peak, labeled \"Interferer,\" is taller and occurs at a higher frequency.\n- The desired signal is narrower, indicating a specific frequency range, whereas the interferer is broader, suggesting it spans a wider frequency band.\n\n4. **Key Features and Technical Details:**\n- The desired signal represents the target frequency the system aims to receive or process.\n- The interferer signifies unwanted noise or signals that can disrupt the desired signal.\n- The graph visually distinguishes between the desired signal and potential interference, crucial for designing filters or amplifiers to isolate the desired signal.\n\n5. **Annotations and Specific Data Points:**\n- The graph is annotated with \"Desired Signal\" and \"Interferer\" to differentiate the two signals.\n- No specific numerical values or markers are provided for frequencies or amplitudes, but the visual representation clearly区分es the two signal types.\nimage_name:Figure 3.1 General RF transceiver\ndescription:The diagram labeled \"Figure 3.1 General RF transceiver\" illustrates the main components of a radio frequency (RF) transceiver system, encompassing both receiving and transmitting sections.\n\n1. **Main Components:**\n- **Antenna:** Captures incoming RF signals and transmits outgoing signals.\n- **Receiver Section:**\n- **LNA (Low Noise Amplifier):** Amplifies weak incoming signals from the antenna with minimal added noise, preserving signal quality.\n- **Downconverter:** Converts the amplified high-frequency signal to a lower intermediate frequency (IF) for easier processing.\n- **Amplifying Stages:** Further amplify the downconverted signal to suitable levels for demodulation and processing.\n- **Transmitter Section:**\n- **PA (Power Amplifier):** Amplifies the signal to be transmitted to a higher power level suitable for over-the-air transmission.\n- **Upconverter:** Converts the signal from a lower frequency to the desired RF frequency for transmission.\n- **Microphone (Mike):** Captures audio input for processing and transmission.\n\n2. **Flow of Information or Control:**\n- In the receiver section, the signal flow starts at the antenna, which captures RF signals. These signals are then amplified by the LNA and proceed to the downconverter, which shifts them to a lower frequency before additional amplification stages.\n- In the transmitter section, the audio signal from the microphone is processed, upconverted to a higher frequency, and then amplified by the PA before being transmitted via the antenna.\n\n3. **Labels, Annotations, and Key Indicators:**\n- The diagram includes labels like \"Desired Signal\" and \"Interferer,\" indicating the frequency spectrum of interest and potential noise or interference.\n- Key components such as LNA, PA, downconverter, and upconverter are clearly labeled, elucidating their roles in the system.\n\n4. **Overall System Function:**\n- The primary function of this RF transceiver is to receive, process, and transmit RF signals. The receiver section ensures incoming signals are amplified and converted to a manageable frequency for further processing, while the transmitter section prepares and amplifies outgoing signals for transmission. This setup optimizes signal quality and power levels at each stage, facilitating efficient communication.\n\nFigure 3.1 General RF transceiver.\nwhere $\\alpha_{1}$ represents the gain. Since the output signal is superimposed on a bias (dc operating) point, $\\alpha_{0}$, the overall output can be expressed as $y(t)=\\alpha_{0}+\\alpha_{1} x(t)$. In this scenario, the input-output (large-signal) characteristic of the circuit is a straight line [Fig. 3.2(a)]. However, as signal excursions become larger and the transistor bias point is significantly disturbed, the gain (the slope of the characteristic) begins to vary [Fig. 3.2(b)]. We approximate this nonlinear characteristic using a polynomial:\n\n$$\n\\begin{equation*}\ny(t)=\\alpha_{0}+\\alpha_{1} x(t)+\\alpha_{2} x^{2}(t)+\\cdots+\\alpha_{n} x^{n}(t) \\tag{3.2}\n\\end{equation*}\n$$\n\nA nonlinear amplifier distorts the signal of interest or creates unwanted interactions among multiple input signals. We address the issue of nonlinearity in Chapter 14.\nimage_name:(a)\ndescription:The graph labeled \"(a)\" depicts the linear input-output characteristic of a system, likely representing a linear amplifier. This graph is a simple line plot on a two-dimensional Cartesian coordinate system.\n\n1. **Type of Graph and Function:**\n- The graph is a linear plot illustrating the relationship between input and output, typically used for linear systems.\n\n2. **Axes Labels and Units:**\n- The horizontal axis (x-axis) represents the input variable, denoted as \\(x\\).\n- The vertical axis (y-axis) represents the output variable, denoted as \\(y\\).\n- No specific units are provided for either axis, indicating a general input-output behavior representation.\n\n3. **Overall Behavior and Trends:**\n- The graph shows a straight line with a positive slope, indicating direct proportionality between input and output.\n- The line starts from the point \\(\\alpha_0\\) on the y-axis, representing the y-intercept.\n- The slope of the line, denoted as \\(\\alpha_1\\), is constant, indicating consistent gain across the input range.\n\n4. **Key Features and Technical Details:**\n- The slope \\(\\alpha_1\\) represents the amplifier's gain.\n- The intercept \\(\\alpha_0\\) indicates the output when the input is zero, often representing a bias or offset.\n- This linearity suggests ideal, undistorted amplification without saturation or clipping.\n\n5. **Annotations and Specific Data Points:**\n- A dashed line indicates the slope \\(\\alpha_1\\), emphasizing the gain characteristic.\n- No specific numerical values are given, maintaining a general depiction of linear behavior.\nimage_name:(b)\ndescription:The graph labeled (b) shows the input-output characteristic of a nonlinear system, typical of a nonlinear amplifier's behavior when subjected to an input signal.\n\n1. **Type of Graph and Function:**\n- The graph plots the output signal \\( y \\) against the input signal \\( x \\), illustrating their nonlinear relationship.\n\n2. **Axes Labels and Units:**\n- The horizontal axis (\\( x \\)) represents the input signal.\n- The vertical axis (\\( y \\)) represents the output signal.\n- No specific units or scales are provided, assumed to be linear based on typical practice.\n\n3. **Overall Behavior and Trends:**\n- The graph displays a curve that starts with a gentle slope, increases more sharply in the middle, and then flattens out as \\( x \\) increases, indicating saturation where the output no longer significantly increases with input.\n- The nonlinear behavior is characterized by a bending curve, suggesting variable gain with input level.\n\n4. **Key Features and Technical Details:**\n- The curve initially rises slowly, indicating lower gain at lower input levels.\n- As the input increases to a certain range, the slope steepens, showing higher gain.\n- Beyond a certain point (around \\( x_2 \\)), the curve flattens, indicating saturation.\n\n5. **Annotations and Specific Data Points:**\n- Two vertical dashed lines are marked at \\( x_1 \\) and \\( x_2 \\), possibly indicating significant transition points or thresholds in the input signal.\n- No numerical values or specific data points are provided, but these lines suggest regions of interest in system performance analysis.\n\nFigure 3.2 Input-output characteristic of a (a) linear and (b) nonlinear system.\nWhat aspects of amplifier performance are crucial? Besides gain and speed, parameters such as power dissipation, supply voltage, linearity, noise, or maximum voltage swings may be vital. Additionally, the input and output impedances determine how the circuit interacts with preceding and subsequent stages. In practice, most of these parameters involve trade-offs, making the design a multidimensional optimization problem. Illustrated in the \"analog design octagon\" of Fig. 3.3, these trade-offs present significant challenges in designing high-performance amplifiers, requiring intuition and experience to achieve an acceptable compromise.\n\nTable 3.1 previews the amplifier topologies covered in this chapter, highlighting the prevalent use of the common-source (CS) stage over other configurations. For these amplifiers, we must (1) establish proper bias conditions to ensure each transistor provides the necessary transconductance and output resistance with specific quiescent currents and voltages, and (2) analyze the circuit's behavior as input and output signals cause small or large deviations from the bias point (small-signal and large-signal analyses, respectively). We address the latter task here and defer the former to Chapter 5.\nimage_name:Figure 3.3 Analog design octagon\ndescription:The diagram titled \"Figure 3.3 Analog design octagon\" presents a conceptual framework for understanding the trade-offs in analog design. Structured as an octagon, each vertex represents a critical aspect of analog circuit performance. The components and their inter relationships are as follows:\n\n1. **Noise**: Positioned at the top left, noise represents unwanted signal variations. It is directly linked to linearity, indicating a trade-off between signal purity and distortion reduction.\n\n2. **Linearity**: Located opposite noise, linearity ensures the output signal is a linear function of the input, crucial for minimizing distortion in amplifiers and other analog circuits.\n\n3. **Gain**: Found at the top right, gain refers to the circuit's amplification factor. It is related to supply voltage, suggesting that changes in supply voltage can affect gain.\n\n4. **Supply Voltage**: Positioned next to gain, supply voltage is a critical factor influencing circuit power and performance.\n\n5. **Voltage Swings**: Located at the bottom right, voltage swings represent the output voltage range the circuit can handle without distortion.\n\n6. **Speed**: Found at the bottom, speed refers to the circuit's ability to handle high-frequency signals. It is connected to voltage swings, indicating a balance between swing size and speed.\n\n7. **Input/Output Impedance**: Positioned at the bottom left, this factor affects circuit interfacing with other components. It is linked to speed, suggesting a balance between impedance and speed.\n\n8. **Power Dissipation**: Located above input/output impedance, power dissipation is crucial for managing thermal aspects. It is connected to noise, indicating that power efficiency can influence noise levels.\n\nThe dashed lines within the octagon represent the complex interdependencies between these factors, highlighting the design compromises required. For instance, improving speed might negatively impact power dissipation or noise.\n\nOverall, the octagon serves as a visual tool for designers to navigate the trade-offs in analog circuit design, ensuring the final product meets desired specifications and performance criteria.\n\nFigure 3.3 Analog design octagon.\n\nTable 3.1 Amplifier categories.\n\n| Common-Source Stage | Source Follower | Common-Gate Stage | Cascode |\n| :---: | :---: | :---: | :---: |\n| With Resistive Load | With Resistive Bias | With Resistive Load | Telescopic |\n| With Diode-Connected Load | With Current-Source Bias | With Current-Source Load | Folded |\n| With Current-Source Load |  |  |  |\n| With Active Load |  |  |  |\n| With Source Degeneration |  |  |  |"
},
{
    "text": "An ideal amplifier produces an output, $y(t)$, that is a direct linear copy of the input, $x(t)$:\n\n$$\n\\begin{equation*}\ny(t)=\\alpha_{1} x(t) \\tag{3.1}\n\\end{equation*}\n$$\n\nimage_name:Desired Signal\ndescription:The graph labeled \"Desired Signal\" is a frequency-domain representation showing two distinct signals. The x-axis is marked as \\( f \\) for frequency, while the y-axis, though unlabeled, typically indicates signal amplitude or power.\n\n1. **Graph Type and Function:**\n- This is a frequency spectrum graph, commonly used to display the presence of signals at various frequencies.\n\n2. **Axes Labels and Units:**\n- The x-axis is labeled \\( f \\) for frequency. The y-axis is unlabeled but generally represents amplitude or power.\n- The scale is linear, typical for such diagrams.\n\n3. **Overall Behavior and Trends:**\n- The graph features two peaks. The first, labeled \"Desired Signal,\" is shorter and appears at a lower frequency. The second, labeled \"Interferer,\" is taller and located at a higher frequency.\n- The desired signal is narrower, indicating a specific frequency range, whereas the interferer is broader, suggesting it spans a wider frequency band.\n\n4. **Key Features and Technical Details:**\n- The desired signal represents the target frequency the system aims to receive or process.\n- The interferer signifies unwanted noise or signals that can disrupt the desired signal.\n- The graph highlights the distinction between the desired signal and potential interference, crucial for designing filters or amplifiers to isolate the desired signal.\n\n5. **Annotations and Specific Data Points:**\n- The graph is annotated with \"Desired Signal\" and \"Interferer\" to differentiate the two signals.\n- No specific numerical values or markers are provided for frequencies or amplitudes, but the visual distinction between the two signal types is clear.\n\nimage_name:Figure 3.1 General RF transceiver\ndescription:The diagram titled \"Figure 3.1 General RF transceiver\" illustrates the primary components of a radio frequency (RF) transceiver system, encompassing both receiving and transmitting sections.\n\n1. **Main Components:**\n- **Antenna:** Captures incoming RF signals and transmits outgoing signals.\n- **Receiver Section:**\n- **LNA (Low Noise Amplifier):** Amplifies weak incoming signals from the antenna with minimal added noise, preserving signal quality.\n- **Downconverter:** Transforms the amplified high-frequency signal to a lower intermediate frequency (IF) for easier processing.\n- **Amplifying Stages:** Further amplify the downconverted signal to levels suitable for demodulation and processing.\n- **Transmitter Section:**\n- **PA (Power Amplifier):** Boosts the signal to be transmitted to a higher power level appropriate for air transmission.\n- **Upconverter:** Converts the signal from a lower frequency to the desired RF frequency for transmission.\n- **Microphone (Mike):** Captures audio input for processing and transmission.\n\n2. **Information and Control Flow:**\n- In the receiver section, the signal flow starts at the antenna, which captures RF signals. These signals are then amplified by the LNA, downconverted to a lower frequency, and further amplified through additional stages.\n- In the transmitter section, the audio signal from the microphone is processed, upconverted to a higher frequency, and amplified by the PA before being transmitted via the antenna.\n\n3. **Labels, Annotations, and Key Indicators:**\n- The diagram includes labels like \"Desired Signal\" and \"Interferer,\" indicating the frequency spectrum of interest and potential noise or interference.\n- Key components such as LNA, PA, downconverter, and upconverter are clearly marked, elucidating their roles in the system.\n\n4. **Overall System Function:**\n- The primary role of this RF transceiver is to receive, process, and transmit RF signals. The receiver section ensures incoming signals are amplified and converted to a manageable frequency for further processing, while the transmitter section prepares and amplifies outgoing signals for transmission. This setup optimizes signal quality and power levels at each stage, facilitating efficient communication.\n\nFigure 3.1 General RF transceiver.\nwhere $\\alpha_{1}$ represents the gain. Since the output signal is superimposed on a bias (dc operating) point, $\\alpha_{0}$, the overall output can be expressed as $y(t)=\\alpha_{0}+\\alpha_{1} x(t)$. In this scenario, the input-output (large-signal) characteristic of the circuit is a straight line [Fig. 3.2(a)]. However, as signal excursions increase and the transistor bias point is significantly disturbed, the gain (the slope of the characteristic) begins to vary [Fig. 3.2(b)]. We approximate this nonlinear characteristic using a polynomial:\n\n$$\n\\begin{equation*}\ny(t)=\\alpha_{0}+\\alpha_{1} x(t)+\\alpha_{2} x^{2}(t)+\\cdots+\\alpha_{n} x^{n}(t) \\tag{3.2}\n\\end{equation*}\n$$\n\nA nonlinear amplifier distorts the signal of interest or creates unwanted interactions among multiple input signals. We address the issue of nonlinearity in Chapter 14.\n\nimage_name:(a)\ndescription:The graph labeled \"(a)\" depicts the linear input-output characteristic of a system, likely representing a linear amplifier. This is a simple line plot on a two-dimensional Cartesian coordinate system.\n\n1. **Graph Type and Function:**\n- The graph is a linear plot showing the input-output relationship, typical for linear systems.\n\n2. **Axes Labels and Units:**\n- The horizontal axis (x-axis) represents the input variable, \\(x\\).\n- The vertical axis (y-axis) represents the output variable, \\(y\\).\n- No specific units are provided for either axis, indicating a general input-output behavior.\n\n3. **Overall Behavior and Trends:**\n- The graph displays a straight line with a positive slope, indicating direct proportionality between input and output.\n- The line originates from the point \\(\\alpha_0\\) on the y-axis, representing the y-intercept.\n- The slope of the line, denoted as \\(\\alpha_1\\), is constant, indicating consistent gain across the input range.\n\n4. **Key Features and Technical Details:**\n- The slope \\(\\alpha_1\\) represents the amplifier's gain.\n- The intercept \\(\\alpha_0\\) indicates the output when the input is zero, often a bias or offset.\n- This linearity suggests ideal, undistorted amplification without saturation or clipping.\n\n5. **Annotations and Specific Data Points:**\n- A dashed line indicates the slope \\(\\alpha_1\\), emphasizing the gain characteristic of the linear system.\n- No specific numerical values are provided, maintaining a general depiction of linear behavior.\n\nimage_name:(b)\ndescription:The graph labeled \"(b)\" shows the input-output characteristic of a nonlinear system, typical of a nonlinear amplifier's behavior when an input signal is applied.\n\n1. **Graph Type and Function:**\n- The graph plots the output signal \\( y \\) against the input signal \\( x \\), illustrating their nonlinear relationship.\n\n2. **Axes Labels and Units:**\n- The horizontal axis (\\( x \\)) represents the input signal.\n- The vertical axis (\\( y \\)) represents the output signal.\n- No specific units or scales are provided, assumed to be linear based on typical practice.\n\n3. **Overall Behavior and Trends:**\n- The graph displays a curve that starts with a gentle slope, becomes steeper in the middle, and then flattens as \\( x \\) increases, indicating saturation where the output increases minimally despite rising input.\n- The nonlinear behavior is evident from the curve's bending, suggesting variable gain with input level.\n\n4. **Key Features and Technical Details:**\n- The curve initially rises slowly, indicating lower gain at lower input levels.\n- In the middle range, the slope steepens, showing higher gain.\n- Beyond a certain point (around \\( x_2 \\)), the curve flattens, indicating saturation.\n\n5. **Annotations and Specific Data Points:**\n- Vertical dashed lines at \\( x_1 \\) and \\( x_2 \\) mark significant transition points or thresholds in the input signal.\n- No numerical values or specific data points are provided, but these lines highlight regions of interest in system performance analysis.\n\nFigure 3.2 Input-output characteristic of a (a) linear and (b) nonlinear system.\nWhat are the critical performance aspects of an amplifier? Besides gain and speed, parameters like power dissipation, supply voltage, linearity, noise, and maximum voltage swings are crucial. Additionally, the input and output impedances affect how the circuit interacts with preceding and subsequent stages. In practice, these parameters often trade off against each other, making amplifier design a multidimensional optimization problem. Illustrated in the \"analog design octagon\" of Fig. 3.3, these trade-offs present significant challenges in designing high-performance amplifiers, requiring intuition and experience to achieve a satisfactory balance.\n\nTable 3.1 previews the amplifier topologies discussed in this chapter, highlighting the prevalent use of the common-source (CS) stage compared to other configurations. For these amplifiers, we must (1) establish proper bias conditions to ensure each transistor provides the necessary transconductance and output resistance with specific quiescent currents and voltages, and (2) analyze the circuit's behavior as input and output signals cause small or large deviations from the bias point (small-signal and large-signal analyses, respectively). We address the latter task here and defer the former to Chapter 5.\n\nimage_name:Figure 3.3 Analog design octagon\ndescription:The diagram titled \"Figure 3.3 Analog design octagon\" presents a conceptual framework for understanding the trade-offs in analog design. It is structured as an octagon, with each vertex representing a critical aspect of analog circuit performance. The components and their inter relationships are as follows:\n\n1. **Noise**: Located at the top left, noise represents unwanted signal variations. It is directly linked to linearity, indicating a trade-off between signal purity and distortion reduction.\n\n2. **Linearity**: Positioned opposite noise, linearity ensures the output signal is a linear function of the input, crucial for minimizing distortion in amplifiers and other analog circuits.\n\n3. **Gain**: At the top right, gain refers to the circuit's amplification factor. It is related to supply voltage, suggesting that changes in supply voltage can impact gain.\n\n4. **Supply Voltage**: Next to gain, supply voltage is a key factor influencing the circuit's power and performance.\n\n5. **Voltage Swings**: At the bottom right, voltage swings represent the output voltage range the circuit can handle without distortion.\n\n6. **Speed**: Located at the bottom, speed refers to the circuit's ability to handle high-frequency signals. It is connected to voltage swings, indicating that larger swings can affect speed.\n\n7. **Input/Output Impedance**: At the bottom left, this factor influences the circuit's interaction with other components. It is linked to speed, suggesting a balance between impedance and speed.\n\n8. **Power Dissipation**: Above input/output impedance, power dissipation is crucial for managing thermal aspects. It is connected to noise, indicating that power efficiency can affect noise levels.\n\nThe dashed lines within the octagon represent the complex interdependencies between these factors, highlighting the design compromises. For instance, improving speed might negatively impact power dissipation or noise.\n\nOverall, the octagon serves as a visual aid for designers to navigate the trade-offs in analog circuit design, ensuring the final product meets desired specifications and performance criteria.\n\nFigure 3.3 Analog design octagon.\n\nTable 3.1 Amplifier categories.\n\n| Common-Source Stage | Source Follower | Common-Gate Stage | Cascode |\n| :---: | :---: | :---: | :---: |\n| With Resistive Load | With Resistive Bias | With Resistive Load | Telescopic |\n| With Diode-Connected Load | With Current-Source Bias | With Current-Source Load | Folded |\n| With Current-Source Load |  |  |  |\n| With Active Load |  |  |  |\n| With Source Degeneration |  |  |  |"
},
{
    "text": "An optimal amplifier produces an output, \\( y(t) \\), that is a linear replica of the input, \\( x(t) \\):\n\n$$\n\\begin{equation*}\ny(t) = \\alpha_{1} x(t) \\tag{3.1}\n\\end{equation*}\n$$\n\nimage_name:Desired Signal\ndescription:The graph labeled \"Desired Signal\" is a frequency-domain representation showing two distinct signals. The x-axis represents frequency, denoted as \\( f \\), while the y-axis, though not explicitly labeled, typically indicates signal amplitude or power.\n\n1. **Graph Type and Function:**\n- This is a frequency spectrum graph, commonly used to display the presence of signals at various frequencies.\n\n2. **Axes Labels and Units:**\n- The x-axis is labeled \\( f \\) for frequency. The y-axis is unlabeled but generally represents amplitude or power.\n- The scale is linear, typical for such diagrams.\n\n3. **Overall Behavior and Trends:**\n- The graph features two distinct peaks. The first peak, labeled \"Desired Signal,\" is shorter and appears at a lower frequency. The second peak, labeled \"Interferer,\" is taller and occurs at a higher frequency.\n- The desired signal is narrower, indicating a specific frequency range, whereas the interferer is broader, suggesting it spans a wider frequency band.\n\n4. **Key Features and Technical Details:**\n- The desired signal represents the target frequency the system aims to receive or process.\n- The interferer signifies unwanted noise or signals that can disrupt or interfere with the desired signal.\n- The graph visually highlights the distinction between the desired signal and potential interference, crucial for designing filters or amplifiers to isolate the desired signal.\n\n5. **Annotations and Specific Data Points:**\n- The graph is annotated with \"Desired Signal\" and \"Interferer\" to differentiate between the two signals.\n- No specific numerical values or markers are provided for frequencies or amplitudes, but the visual representation clearly distinguishes the two signal types.\n\nimage_name:Figure 3.1 General RF transceiver\ndescription:The diagram labeled \"Figure 3.1 General RF transceiver\" illustrates the primary components of a radio frequency (RF) transceiver system, encompassing both receiving and transmitting sections.\n\n1. **Main Components:**\n- **Antenna:** Captures incoming RF signals and transmits outgoing signals.\n- **Receiver Section:**\n  - **LNA (Low Noise Amplifier):** Amplifies weak incoming signals from the antenna while adding minimal noise, preserving signal quality.\n  - **Downconverter:** Converts the amplified high-frequency signal to a lower intermediate frequency (IF) for easier processing.\n  - **Amplifying Stages:** Further amplify the downconverted signal to suitable levels for demodulation and processing.\n- **Transmitter Section:**\n  - **PA (Power Amplifier):** Amplifies the signal to be transmitted to a higher power level suitable for over-the-air transmission.\n  - **Upconverter:** Converts the signal from a lower frequency to the desired RF frequency for transmission.\n  - **Microphone (Mike):** Captures audio input for processing and transmission.\n\n2. **Information and Control Flow:**\n- In the receiver section, the signal flow starts at the antenna, which captures RF signals. These signals are then amplified by the LNA, followed by downconversion to a lower frequency, and further amplification through additional stages.\n- In the transmitter section, the audio signal from the microphone is processed, upconverted to a higher frequency, and then amplified by the PA before being transmitted via the antenna.\n\n3. **Labels, Annotations, and Key Indicators:**\n- The diagram includes labels like \"Desired Signal\" and \"Interferer,\" indicating the frequency spectrum of interest and potential noise or interference.\n- Key components such as LNA, PA, downconverter, and upconverter are clearly marked, providing a clear understanding of their roles.\n\n4. **Overall System Function:**\n- The primary function of this RF transceiver is to receive, process, and transmit RF signals. The receiver section ensures incoming signals are amplified and converted to a manageable frequency for further processing, while the transmitter section prepares and amplifies outgoing signals for transmission. This setup optimizes signal quality and power levels at each stage, facilitating efficient communication.\n\nFigure 3.1 General RF transceiver.\nwhere \\( \\alpha_{1} \\) represents the gain. Since the output signal is superimposed on a bias (dc operating) point, \\( \\alpha_{0} \\), the overall output can be expressed as \\( y(t) = \\alpha_{0} + \\alpha_{1} x(t) \\). In this scenario, the input-output (large-signal) characteristic of the circuit is a straight line [Fig. 3.2(a)]. However, as signal excursions become larger and the transistor bias point is significantly disturbed, the gain (the slope of the characteristic) begins to vary [Fig. 3.2(b)]. We approximate this nonlinear characteristic using a polynomial:\n\n$$\n\\begin{equation*}\ny(t) = \\alpha_{0} + \\alpha_{1} x(t) + \\alpha_{2} x^{2}(t) + \\cdots + \\alpha_{n} x^{n}(t) \\tag{3.2}\n\\end{equation*}\n$$\n\nA nonlinear amplifier distorts the signal of interest or creates unwanted interactions among multiple signals present at the input. We address the issue of nonlinearity in Chapter 14.\n\nimage_name:(a)\ndescription:The graph labeled \"(a)\" depicts the linear input-output characteristic of a system, likely representing a linear amplifier. This graph is a simple line plot on a two-dimensional Cartesian coordinate system.\n\n1. **Graph Type and Function:**\n- The graph is a linear plot illustrating the relationship between input and output, commonly used to represent linear systems.\n\n2. **Axes Labels and Units:**\n- The horizontal axis (x-axis) represents the input variable, denoted as \\( x \\).\n- The vertical axis (y-axis) represents the output variable, denoted as \\( y \\).\n- No specific units are provided for either axis, indicating a general representation of input-output behavior.\n\n3. **Overall Behavior and Trends:**\n- The graph shows a straight line with a positive slope, indicating direct proportionality between input and output.\n- The line starts from the point \\( \\alpha_0 \\) on the y-axis, representing the y-intercept.\n- The slope of the line, denoted as \\( \\alpha_1 \\), is constant, indicating consistent gain across the input range.\n\n4. **Key Features and Technical Details:**\n- The slope \\( \\alpha_1 \\) represents the amplifier's gain.\n- The intercept \\( \\alpha_0 \\) indicates the output when the input is zero, often representing a bias or offset.\n- This linearity suggests ideal, undistorted amplification without saturation or clipping.\n\n5. **Annotations and Specific Data Points:**\n- A dashed line indicates the slope \\( \\alpha_1 \\), emphasizing the gain characteristic of the linear system.\n- No specific numerical values are given, maintaining a general depiction of linear behavior.\n\nimage_name:(b)\ndescription:The graph labeled \"(b)\" shows the input-output characteristic of a nonlinear system, typical of a nonlinear amplifier's behavior when an input signal is applied.\n\n1. **Graph Type and Function:**\n- The graph plots the output signal \\( y \\) versus the input signal \\( x \\), illustrating the nonlinear relationship between them.\n\n2. **Axes Labels and Units:**\n- The horizontal axis (\\( x \\)) represents the input signal.\n- The vertical axis (\\( y \\)) represents the output signal.\n- No specific units or scales are provided, but a linear scale is assumed based on typical practice.\n\n3. **Overall Behavior and Trends:**\n- The graph displays a curve that starts with a gentle slope, becomes steeper in the middle, and then flattens out as \\( x \\) increases, indicating saturation where the output no longer significantly increases despite input increases.\n- The nonlinear behavior is characterized by a bending curve, suggesting variable gain with input level.\n\n4. **Key Features and Technical Details:**\n- The curve initially rises slowly, indicating lower gain at lower input levels.\n- As the input increases to a certain range, the slope steepens, indicating higher gain.\n- Beyond a certain point (around \\( x_2 \\)), the curve flattens, indicating saturation.\n\n5. **Annotations and Specific Data Points:**\n- Two vertical dashed lines are marked at \\( x_1 \\) and \\( x_2 \\), possibly indicating significant transition points or thresholds in the input signal.\n- No numerical values or specific data points are provided, but these lines suggest regions of interest in system performance analysis.\n\nFigure 3.2 Input-output characteristic of a (a) linear and (b) nonlinear system.\nWhat are the important aspects of an amplifier's performance? Besides gain and speed, parameters such as power dissipation, supply voltage, linearity, noise, and maximum voltage swings may be crucial. Additionally, the input and output impedances determine how the circuit interacts with preceding and subsequent stages. In practice, these parameters often trade off against each other, making amplifier design a multidimensional optimization problem. Illustrated in the \"analog design octagon\" of Fig. 3.3, these trade-offs present significant challenges in designing high-performance amplifiers, requiring intuition and experience to achieve an acceptable compromise.\n\nTable 3.1 provides a preview of the amplifier topologies covered in this chapter, highlighting the widespread use of the common-source (CS) stage compared to other configurations. For these amplifiers, we must (1) establish proper bias conditions to ensure each transistor provides the necessary transconductance and output resistance with specific quiescent currents and voltages, and (2) analyze the circuit's behavior as input and output signals cause small or large deviations from the bias point (small-signal and large-signal analyses, respectively). We address the latter task here and defer the former to Chapter 5.\n\nimage_name:Figure 3.3 Analog design octagon\ndescription:The diagram titled \"Figure 3.3 Analog design octagon\" presents a conceptual framework for understanding the trade-offs in analog design. It is structured as an octagon, with each vertex representing a critical aspect of analog circuit performance. The components and their inter relationships are as follows:\n\n1. **Noise**: Located at the top left, noise represents unwanted signal variations. It is directly linked to linearity, indicating a trade-off between signal purity and distortion reduction.\n\n2. **Linearity**: Positioned opposite noise, linearity is essential for ensuring the output signal is a linear function of the input, crucial for minimizing distortion in amplifiers and other analog circuits.\n\n3. **Gain**: Found at the top right, gain refers to the circuit's amplification factor. It is related to supply voltage, suggesting that changes in supply voltage can affect gain.\n\n4. **Supply Voltage**: Located next to gain, supply voltage is a critical factor influencing the circuit's power and performance.\n\n5. **Voltage Swings**: At the bottom right, voltage swings represent the range of output voltage the circuit can handle without distortion.\n\n6. **Speed**: Positioned at the bottom, speed refers to the circuit's ability to handle high-frequency signals. It is connected to voltage swings, indicating that larger swings can impact speed.\n\n7. **Input/Output Impedance**: At the bottom left, this factor affects the circuit's interface with other components. It is linked to speed, suggesting a balance between impedance and speed.\n\n8. **Power Dissipation**: Located above input/output impedance, power dissipation is crucial for managing the circuit's thermal aspects. It is connected to noise, indicating that power efficiency can influence noise levels.\n\nThe dashed lines within the octagon represent the complex interdependencies between these factors, highlighting the compromises designers must make. For instance, improving speed might negatively affect power dissipation or noise.\n\nOverall, the octagon serves as a visual tool for designers to navigate the trade-offs in analog circuit design, ensuring the final product meets desired specifications and performance criteria.\n\nFigure 3.3 Analog design octagon.\n\nTable 3.1 Amplifier categories.\n\n| Common-Source Stage | Source Follower | Common-Gate Stage | Cascode |\n| :---: | :---: | :---: | :---: |\n| With Resistive Load | With Resistive Bias | With Resistive Load | Telescopic |\n| With Diode-Connected Load | With Current-Source Bias | With Current-Source Load | Folded |\n| With Current-Source Load |  |  |  |\n| With Active Load |  |  |  |\n| With Source Degeneration |  |  |  |"
},
{
    "text": "An optimal amplifier produces an output, \\( y(t) \\), that is a linear replication of the input, \\( x(t) \\):\n\n$$\n\\begin{equation*}\ny(t)=\\alpha_{1} x(t) \\tag{3.1}\n\\end{equation*}\n$$\n\nimage_name:Desired Signal\ndescription:The graph labeled \"Desired Signal\" is a frequency-domain representation showing two distinct signals. The x-axis represents frequency, denoted as \\( f \\), while the y-axis, though not explicitly labeled, typically signifies signal amplitude or power.\n\n1. **Type of Graph and Function:**\n- This is a frequency spectrum graph, commonly used to display the presence of signals at various frequencies.\n\n2. **Axes Labels and Units:**\n- The x-axis is marked \\( f \\) for frequency. The y-axis is unlabeled but generally represents amplitude or power.\n- The scale is linear, typical for such diagrams.\n\n3. **Overall Behavior and Trends:**\n- The graph exhibits two distinct peaks. The first peak, labeled \"Desired Signal,\" is shorter and appears at a lower frequency. The second peak, labeled \"Interferer,\" is taller and occurs at a higher frequency.\n- The desired signal is narrower, indicating a specific frequency range, whereas the interferer is broader, suggesting it spans a wider frequency band.\n\n4. **Key Features and Technical Details:**\n- The desired signal represents the target frequency the system aims to receive or process.\n- The interferer signifies unwanted noise or signals that can disrupt or interfere with the desired signal.\n- The graph visually highlights the distinction between the desired signal and potential interference, crucial for designing filters or amplifiers to isolate the desired signal.\n\n5. **Annotations and Specific Data Points:**\n- The graph is annotated with \"Desired Signal\" and \"Interferer\" to differentiate between the two signals.\n- No specific numerical values or markers are provided for frequencies or amplitudes, but the visual representation clearly distinguishes the two signal types.\nimage_name:Figure 3.1 General RF transceiver\ndescription:The diagram labeled \"Figure 3.1 General RF transceiver\" illustrates the primary components of a radio frequency (RF) transceiver system, encompassing both receiving and transmitting sections.\n\n1. **Main Components:**\n- **Antenna:** Captures incoming RF signals and transmits outgoing signals.\n- **Receiver Section:**\n- **LNA (Low Noise Amplifier):** Amplifies weak incoming signals from the antenna while introducing minimal noise, preserving signal quality.\n- **Downconverter:** Transforms the amplified high-frequency signal to a lower intermediate frequency (IF) for easier processing.\n- **Amplifying Stages:** Further amplify the downconverted signal to appropriate levels for demodulation and processing.\n- **Transmitter Section:**\n- **PA (Power Amplifier):** Amplifies the signal to be transmitted to a higher power level suitable for air transmission.\n- **Upconverter:** Converts the signal from a lower frequency to the desired RF frequency for transmission.\n- **Microphone (Mike):** Captures audio input for processing and transmission.\n\n2. **Flow of Information or Control:**\n- In the receiver section, the signal flow starts at the antenna, which captures RF signals. These signals are then amplified by the LNA. The amplified signals are sent to the downconverter, which shifts them to a lower frequency before passing through additional amplifying stages.\n- In the transmitter section, the audio signal from the microphone is processed and upconverted to a higher frequency. The upconverted signal is then amplified by the PA before being transmitted via the antenna.\n\n3. **Labels, Annotations, and Key Indicators:**\n- The diagram includes labels such as \"Desired Signal\" and \"Interferer,\" indicating the frequency spectrum of interest and potential noise or interference.\n- Key components like LNA, PA, downconverter, and upconverter are clearly marked, providing a clear understanding of their roles.\n\n4. **Overall System Function:**\n- The primary function of this RF transceiver is to receive, process, and transmit RF signals. The receiver section ensures incoming signals are amplified and converted to a manageable frequency for further processing, while the transmitter section prepares and amplifies outgoing signals for transmission. This setup optimizes signal quality and power levels at each stage, facilitating efficient communication.\n\nFigure 3.1 General RF transceiver.\nwhere \\( \\alpha_{1} \\) denotes the gain. Since the output signal is superimposed on a bias (dc operating) point, \\( \\alpha_{0} \\), the overall output can be expressed as \\( y(t)=\\alpha_{0}+\\alpha_{1} x(t) \\). In this scenario, the input-output (large-signal) characteristic of the circuit is a straight line [Fig. 3.2(a)]. However, as signal excursions become larger and the transistor bias point is significantly disturbed, the gain (the slope of the characteristic) begins to vary [Fig. 3.2(b)]. We approximate this nonlinear characteristic using a polynomial:\n\n$$\n\\begin{equation*}\ny(t)=\\alpha_{0}+\\alpha_{1} x(t)+\\alpha_{2} x^{2}(t)+\\cdots+\\alpha_{n} x^{n}(t) \\tag{3.2}\n\\end{equation*}\n$$\n\nA nonlinear amplifier distorts the signal of interest or creates unwanted interactions among multiple signals present at the input. We address the issue of nonlinearity in Chapter 14.\nimage_name:(a)\ndescription:The graph labeled \"(a)\" depicts a linear input-output characteristic of a system, likely representing a linear amplifier. This graph is a simple line plot on a two-dimensional Cartesian coordinate system.\n\n1. **Type of Graph and Function:**\n- The graph is a linear plot showing the relationship between input and output, typically used to represent linear systems.\n\n2. **Axes Labels and Units:**\n- The horizontal axis (x-axis) represents the input variable, denoted as \\( x \\).\n- The vertical axis (y-axis) represents the output variable, denoted as \\( y \\).\n- No specific units are provided for either axis, indicating a general representation of input-output behavior.\n\n3. **Overall Behavior and Trends:**\n- The graph displays a straight line with a positive slope, indicating direct proportionality between input and output.\n- The line starts from the point \\( \\alpha_0 \\) on the y-axis, representing the y-intercept.\n- The slope of the line, denoted as \\( \\alpha_1 \\), is constant, indicating consistent gain across the input range.\n\n4. **Key Features and Technical Details:**\n- The slope \\( \\alpha_1 \\) represents the amplifier's gain.\n- The intercept \\( \\alpha_0 \\) indicates the output when the input is zero, often representing a bias or offset.\n- This linearity suggests ideal, undistorted amplification without saturation or clipping.\n\n5. **Annotations and Specific Data Points:**\n- A dashed line indicates the slope \\( \\alpha_1 \\), emphasizing the gain characteristic.\n- No specific numerical values are given, maintaining a general depiction of linear behavior.\nimage_name:(b)\ndescription:The graph labeled \"(b)\" illustrates the input-output characteristic of a nonlinear system, typically representing a nonlinear amplifier's behavior when an input signal is applied.\n\n1. **Type of Graph and Function:**\n- The graph plots the output signal \\( y \\) versus the input signal \\( x \\), showing the nonlinear relationship between them.\n\n2. **Axes Labels and Units:**\n- The horizontal axis (\\( x \\)) represents the input signal.\n- The vertical axis (\\( y \\)) represents the output signal.\n- No specific units or scales are provided, but a linear scale is assumed based on typical practice.\n\n3. **Overall Behavior and Trends:**\n- The graph shows a curve that starts with a gentle slope, becomes steeper in the middle, and then flattens out as \\( x \\) increases, indicating saturation where the output no longer increases significantly despite increased input.\n- The nonlinear behavior is characterized by a bending curve, suggesting variable gain with input level.\n\n4. **Key Features and Technical Details:**\n- The curve initially rises slowly, indicating lower gain at lower input levels.\n- As the input increases to a certain range, the slope steepens, showing higher gain.\n- Beyond a certain point (around \\( x_2 \\)), the curve flattens, indicating saturation.\n\n5. **Annotations and Specific Data Points:**\n- Two vertical dashed lines are marked at \\( x_1 \\) and \\( x_2 \\), possibly indicating significant transition points or thresholds in the input signal.\n- No numerical values or specific data points are provided, but these lines suggest regions of interest in system performance analysis.\n\nFigure 3.2 Input-output characteristic of a (a) linear and (b) nonlinear system.\nWhat aspects of amplifier performance are crucial? Besides gain and speed, parameters such as power dissipation, supply voltage, linearity, noise, or maximum voltage swings may be significant. Additionally, the input and output impedances affect how the circuit interacts with preceding and subsequent stages. In practice, these parameters often trade off against each other, making the design a multidimensional optimization problem. Illustrated in the \"analog design octagon\" of Fig. 3.3, such trade-offs present numerous challenges in designing high-performance amplifiers, requiring intuition and experience to achieve an acceptable compromise.\n\nTable 3.1 provides a preview of the amplifier topologies covered in this chapter, highlighting the prevalent use of the common-source (CS) stage compared to other configurations. For these amplifiers, we must (1) establish proper bias conditions to ensure each transistor provides the necessary transconductance and output resistance with specific quiescent currents and voltages, and (2) analyze the circuit's behavior as input and output signals cause small or large deviations from the bias point (small-signal and large-signal analyses, respectively). We address the latter task here and defer the former to Chapter 5.\nimage_name:Figure 3.3 Analog design octagon\ndescription:The diagram titled \"Figure 3.3 Analog design octagon\" presents a conceptual framework for understanding the trade-offs in analog design. It is structured as an octagon, with each vertex representing a critical aspect of analog circuit performance. The components and their inter relationships are as follows:\n\n1. **Noise**: Located at the top left, noise represents unwanted signal variations. It is directly linked to linearity, indicating a trade-off between signal purity and distortion reduction.\n\n2. **Linearity**: Positioned opposite noise, linearity ensures the output signal is a linear function of the input, crucial for minimizing distortion in amplifiers and other analog circuits.\n\n3. **Gain**: Found at the top right, gain refers to the circuit's amplification factor. It is related to supply voltage, suggesting that changes in supply voltage can impact gain.\n\n4. **Supply Voltage**: Located next to gain, supply voltage is a critical factor influencing circuit power and performance.\n\n5. **Voltage Swings**: At the bottom right, voltage swings represent the output voltage range the circuit can handle without distortion.\n\n6. **Speed**: Positioned at the bottom, speed refers to the circuit's ability to handle high-frequency signals. It is connected to voltage swings, indicating that larger swings can affect speed.\n\n7. **Input/Output Impedance**: At the bottom left, this factor influences the circuit's interaction with other components. It is linked to speed, suggesting a balance between impedance and speed.\n\n8. **Power Dissipation**: Located above input/output impedance, power dissipation is crucial for managing thermal aspects. It is connected to noise, indicating that power efficiency can affect noise levels.\n\nThe dashed lines within the octagon illustrate the complex interdependencies between these factors, highlighting the design compromises. For instance, improving speed might negatively impact power dissipation or noise.\n\nOverall, the octagon serves as a visual aid for designers to navigate the trade-offs in analog circuit design, ensuring the final product meets desired specifications and performance criteria.\n\nFigure 3.3 Analog design octagon.\n\nTable 3.1 Amplifier categories.\n\n| Common-Source Stage | Source Follower | Common-Gate Stage | Cascode |\n| :---: | :---: | :---: | :---: |\n| With Resistive Load | With Resistive Bias | With Resistive Load | Telescopic |\n| With Diode-Connected Load | With Current-Source Bias | With Current-Source Load | Folded |\n| With Current-Source Load |  |  |  |\n| With Active Load |  |  |  |\n| With Source Degeneration |  |  |  |"
},
{
    "text": "An optimal amplifier produces an output, $y(t)$, that is a direct linear replication of the input, $x(t)$:\n\n$$\n\\begin{equation*}\ny(t)=\\alpha_{1} x(t) \\tag{3.1}\n\\end{equation*}\n$$\n\nimage_name:Desired Signal\ndescription:The graph labeled \"Desired Signal\" presents a frequency-domain illustration of two distinct signals. The x-axis is designated as frequency, represented by \\( f \\), while the y-axis, though unlabeled, generally signifies signal amplitude or power.\n\n1. **Graph Type and Function:**\n- This is a frequency spectrum graph, commonly utilized to depict the presence of signals across various frequencies.\n\n2. **Axes Labels and Units:**\n- The x-axis is marked \\( f \\) for frequency. The y-axis remains unlabeled but typically signifies amplitude or power.\n- The scale employed is linear, consistent with such diagrams.\n\n3. **General Behavior and Trends:**\n- The graph reveals two distinct peaks. The first, labeled \"Desired Signal,\" is shorter and situated at a lower frequency. The second, labeled \"Interferer,\" is taller and located at a higher frequency.\n- The desired signal is narrower, indicating a specific frequency range, whereas the interferer is broader, suggesting it spans a wider frequency band.\n\n4. **Key Features and Technical Aspects:**\n- The desired signal represents the target frequency the system aims to receive or process.\n- The interferer denotes unwanted noise or signals that can disrupt or interfere with the desired signal.\n- The graph visually accentuates the distinction between the desired signal and potential interference, crucial for designing filters or amplifiers to isolate the desired signal.\n\n5. **Annotations and Specific Data Points:**\n- The graph is annotated with \"Desired Signal\" and \"Interferer\" to differentiate between the two signals.\n- No specific numerical values or markers are provided for frequencies or amplitudes, but the visual representation clearly distinguishes the two signal types.\nimage_name:Figure 3.1 General RF transceiver\ndescription:The diagram titled \"Figure 3.1 General RF transceiver\" outlines the primary components of a radio frequency (RF) transceiver system, encompassing both receiving and transmitting sections.\n\n1. **Primary Components:**\n- **Antenna:** Captures incoming RF signals and transmits outgoing signals.\n- **Receiver Section:**\n- **LNA (Low Noise Amplifier):** Amplifies weak incoming signals from the antenna while introducing minimal noise, preserving signal quality.\n- **Downconverter:** Transforms the amplified high-frequency signal to a lower intermediate frequency (IF) for easier processing.\n- **Amplifying Stages:** Further amplify the downconverted signal to appropriate levels for demodulation and processing.\n- **Transmitter Section:**\n- **PA (Power Amplifier):** Amplifies the signal for transmission to a higher power level suitable for airborne transmission.\n- **Upconverter:** Converts the signal from a lower frequency to the desired RF frequency for transmission.\n- **Microphone (Mike):** Captures audio input for processing and transmission.\n\n2. **Information and Control Flow:**\n- In the receiver section, the signal flow starts at the antenna, capturing RF signals. These signals are then amplified by the LNA. The amplified signals are subsequently downconverted to a lower frequency before passing through additional amplifying stages.\n- In the transmitter section, the audio signal from the microphone is processed and upconverted to a higher frequency. The upconverted signal is then amplified by the PA before being transmitted via the antenna.\n\n3. **Labels, Annotations, and Key Indicators:**\n- The diagram includes labels like \"Desired Signal\" and \"Interferer,\" indicating the frequency spectrum of interest and potential noise or interference.\n- Key components such as LNA, PA, downconverter, and upconverter are clearly marked, providing a clear understanding of their roles.\n\n4. **Overall System Function:**\n- The main function of this RF transceiver is to receive, process, and transmit RF signals. The receiver section ensures incoming signals are amplified and converted to a manageable frequency for further processing, while the transmitter section prepares and amplifies outgoing signals for transmission. This setup facilitates efficient communication by optimizing signal quality and power levels at each stage.\n\nFigure 3.1 General RF transceiver.\nwhere $\\alpha_{1}$ represents the gain. Since the output signal is superimposed on a bias (dc operating) point, $\\alpha_{0}$, the overall output can be expressed as $y(t)=\\alpha_{0}+\\alpha_{1} x(t)$. In this scenario, the input-output (large-signal) characteristic of the circuit is a straight line [Fig. 3.2(a)]. However, as signal excursions become larger and the transistor bias point is significantly disturbed, the gain (the slope of the characteristic) begins to vary [Fig. 3.2(b)]. We approximate this nonlinear characteristic using a polynomial:\n\n$$\n\\begin{equation*}\ny(t)=\\alpha_{0}+\\alpha_{1} x(t)+\\alpha_{2} x^{2}(t)+\\cdots+\\alpha_{n} x^{n}(t) \\tag{3.2}\n\\end{equation*}\n$$\n\nA nonlinear amplifier distorts the signal of interest or generates unwanted interactions among multiple signals present at the input. We address the issue of nonlinearity in Chapter 14.\nimage_name:(a)\ndescription:The graph labeled \"(a)\" depicts a linear input-output characteristic of a system, likely representing a linear amplifier. This graph is a simple line plot on a two-dimensional Cartesian coordinate system.\n\n1. **Graph Type and Function:**\n- The graph is a linear plot showing the relationship between input and output, typically used to represent linear systems.\n\n2. **Axes Labels and Units:**\n- The horizontal axis (x-axis) represents the input variable, denoted as \\(x\\).\n- The vertical axis (y-axis) represents the output variable, denoted as \\(y\\).\n- No specific units are provided for either axis, indicating a general representation of input-output behavior.\n\n3. **General Behavior and Trends:**\n- The graph displays a straight line with a positive slope, indicating direct proportionality between input and output.\n- The line originates from the point \\(\\alpha_0\\) on the y-axis, representing the y-intercept.\n- The slope of the line, denoted as \\(\\alpha_1\\), is constant, indicating consistent gain across the input range.\n\n4. **Key Features and Technical Details:**\n- The slope \\(\\alpha_1\\) represents the amplifier's gain.\n- The intercept \\(\\alpha_0\\) indicates the output when the input is zero, often representing a bias or offset.\n- This linearity suggests ideal, undistorted amplification without saturation or clipping.\n\n5. **Annotations and Specific Data Points:**\n- A dashed line indicates the slope \\(\\alpha_1\\), emphasizing the gain characteristic.\n- No specific numerical values are provided, maintaining a general depiction of linear behavior.\nimage_name:(b)\ndescription:The graph labeled (b) illustrates the input-output characteristic of a nonlinear system, typically representing a nonlinear amplifier's behavior when subjected to an input signal.\n\n1. **Graph Type and Function:**\n- The graph plots the output signal \\( y \\) against the input signal \\( x \\), demonstrating the nonlinear relationship between them.\n\n2. **Axes Labels and Units:**\n- The horizontal axis (\\( x \\)) represents the input signal.\n- The vertical axis (\\( y \\)) represents the output signal.\n- No specific units or scales are provided, but it is assumed to be linear based on typical practice.\n\n3. **General Behavior and Trends:**\n- The graph shows a curve that starts with a gentle slope, steepens in the middle, and then flattens as \\( x \\) increases, indicating saturation where the output increases minimally despite rising input.\n- The nonlinear behavior is characterized by a curved line, suggesting variable gain with input level.\n\n4. **Key Features and Technical Details:**\n- The curve initially rises slowly, indicating lower gain at lower input levels.\n- The slope steepens in the middle range, indicating higher gain.\n- Beyond a certain point (around \\( x_2 \\)), the curve flattens, indicating saturation.\n\n5. **Annotations and Specific Data Points:**\n- Two vertical dashed lines are marked at \\( x_1 \\) and \\( x_2 \\), possibly indicating significant transition points or thresholds in the input signal.\n- No numerical values or specific data points are provided, but these lines suggest regions of interest in system performance analysis.\n\nFigure 3.2 Input-output characteristic of a (a) linear and (b) nonlinear system.\nWhat are the critical performance aspects of an amplifier? Besides gain and speed, parameters such as power dissipation, supply voltage, linearity, noise, and maximum voltage swings may be crucial. Additionally, the input and output impedances influence how the circuit interacts with preceding and subsequent stages. In practice, these parameters often trade off against each other, making the design a complex multidimensional optimization problem. Illustrated in the \"analog design octagon\" of Fig. 3.3, these trade-offs present significant challenges in designing high-performance amplifiers, requiring intuition and experience to achieve an acceptable balance.\n\nTable 3.1 previews the amplifier topologies discussed in this chapter, highlighting the prevalent use of the common-source (CS) stage compared to other configurations. For these amplifiers, we must (1) establish proper bias conditions to ensure each transistor provides the necessary transconductance and output resistance with specific quiescent currents and voltages, and (2) analyze the circuit's behavior as input and output signals cause small or large deviations from the bias point (small-signal and large-signal analyses, respectively). We address the latter task here and defer the former to Chapter 5.\nimage_name:Figure 3.3 Analog design octagon\ndescription:The diagram titled \"Figure 3.3 Analog design octagon\" presents a conceptual framework for understanding the trade-offs in analog design. It is structured as an octagon, with each vertex representing a critical aspect of analog circuit performance. The components and their inter relationships are as follows:\n\n1. **Noise**: Located at the top left, noise signifies unwanted signal variations. It is directly linked to linearity, indicating a trade-off between signal purity and distortion reduction.\n\n2. **Linearity**: Positioned opposite noise, linearity is essential for ensuring the output signal is a linear function of the input, crucial for minimizing distortion in amplifiers and other analog circuits.\n\n3. **Gain**: Situated at the top right, gain refers to the circuit's amplification factor. It is related to supply voltage, suggesting that changes in supply voltage can affect gain.\n\n4. **Supply Voltage**: Located next to gain, supply voltage is a key factor influencing the circuit's power and performance.\n\n5. **Voltage Swings**: Found at the bottom right, voltage swings represent the output voltage range the circuit can handle without distortion.\n\n6. **Speed**: Positioned at the bottom, speed refers to the circuit's ability to handle high-frequency signals. It is connected to voltage swings, indicating that larger swings can impact speed.\n\n7. **Input/Output Impedance**: Located at the bottom left, this factor affects the circuit's interface with other components. It is linked to speed, suggesting a balance between impedance and speed.\n\n8. **Power Dissipation**: Positioned above input/output impedance, power dissipation is vital for managing the circuit's thermal aspects. It is connected to noise, indicating that power efficiency can influence noise levels.\n\nThe dashed lines within the octagon represent the complex interdependencies between these factors, highlighting the design compromises. For instance, enhancing speed might negatively affect power dissipation or noise.\n\nOverall, the octagon serves as a visual aid for designers to understand and navigate the trade-offs in analog circuit design, ensuring the final product meets desired specifications and performance criteria.\n\nFigure 3.3 Analog design octagon.\n\nTable 3.1 Amplifier categories.\n\n| Common-Source Stage | Source Follower | Common-Gate Stage | Cascode |\n| :---: | :---: | :---: | :---: |\n| With Resistive Load | With Resistive Bias | With Resistive Load | Telescopic |\n| With Diode-Connected Load | With Current-Source Bias | With Current-Source Load | Folded |\n| With Current-Source Load |  |  |  |\n| With Active Load |  |  |  |\n| With Source Degeneration |  |  |  |"
},
{
    "text": "An optimal amplifier produces an output, $y(t)$, that is a direct linear replica of the input, $x(t)$:\n\n$$\n\\begin{equation*}\ny(t)=\\alpha_{1} x(t) \\tag{3.1}\n\\end{equation*}\n$$\n\nimage_name:Desired Signal\ndescription:The graph labeled \"Desired Signal\" illustrates a frequency-domain representation with two distinct signals. The x-axis, marked as \\( f \\), represents frequency, while the y-axis, though unlabeled, typically signifies signal amplitude or power.\n\n1. **Graph Type and Function:**\n- This is a frequency spectrum graph, commonly used to display signal presence across various frequencies.\n\n2. **Axes Labels and Units:**\n- The x-axis is designated \\( f \\) for frequency. The y-axis remains unlabeled but generally represents amplitude or power.\n- The scale employed is linear, typical for such diagrams.\n\n3. **General Behavior and Trends:**\n- The graph features two prominent peaks. The first, labeled \"Desired Signal,\" is shorter and situated at a lower frequency. The second, labeled \"Interferer,\" is taller and located at a higher frequency.\n- The desired signal is narrower, indicating a specific frequency range, whereas the interferer is broader, suggesting it spans a wider frequency band.\n\n4. **Key Features and Technical Aspects:**\n- The desired signal represents the target frequency the system aims to capture or process.\n- The interferer signifies unwanted noise or signals that can disrupt the desired signal.\n- The graph visually highlights the distinction between the desired signal and potential interference, crucial for designing filters or amplifiers to isolate the desired signal.\n\n5. **Annotations and Specific Data Points:**\n- The graph is marked with labels \"Desired Signal\" and \"Interferer\" to differentiate the two signals.\n- No specific numerical values or markers are provided for frequencies or amplitudes, but the visual distinction between the two signal types is clear.\n\nimage_name:Figure 3.1 General RF transceiver\ndescription:The diagram titled \"Figure 3.1 General RF transceiver\" outlines the primary components of a radio frequency (RF) transceiver system, encompassing both receiving and transmitting sections.\n\n1. **Primary Components:**\n- **Antenna:** Captures incoming RF signals and transmits outgoing signals.\n- **Receiver Section:**\n  - **LNA (Low Noise Amplifier):** Amplifies weak incoming signals from the antenna with minimal added noise, preserving signal quality.\n  - **Downconverter:** Transforms the amplified high-frequency signal to a lower intermediate frequency (IF) for easier processing.\n  - **Amplifying Stages:** Further amplify the downconverted signal to appropriate levels for demodulation and processing.\n- **Transmitter Section:**\n  - **PA (Power Amplifier):** Boosts the signal to a higher power level suitable for air transmission.\n  - **Upconverter:** Converts the signal from a lower frequency to the desired RF frequency for transmission.\n  - **Microphone (Mike):** Captures audio input for processing and transmission.\n\n2. **Information and Control Flow:**\n- In the receiver section, the signal flow starts at the antenna, which captures RF signals. These signals are then amplified by the LNA and proceed to the downconverter, which shifts them to a lower frequency before further amplification stages.\n- In the transmitter section, the audio signal from the microphone is processed, upconverted to a higher frequency, and then amplified by the PA before transmission via the antenna.\n\n3. **Labels, Annotations, and Key Indicators:**\n- The diagram includes labels like \"Desired Signal\" and \"Interferer,\" indicating the frequency spectrum of interest and potential noise or interference.\n- Key components such as LNA, PA, downconverter, and upconverter are clearly marked, elucidating their roles in the system.\n\n4. **Overall System Function:**\n- The main function of this RF transceiver is to receive, process, and transmit RF signals. The receiver section ensures incoming signals are amplified and converted to a manageable frequency for processing, while the transmitter section prepares and amplifies outgoing signals for transmission. This setup optimizes signal quality and power levels at each stage, facilitating efficient communication.\n\nFigure 3.1 General RF transceiver.\nwhere $\\alpha_{1}$ represents the gain. Since the output signal is superimposed on a bias (dc operating) point, $\\alpha_{0}$, the overall output can be expressed as $y(t)=\\alpha_{0}+\\alpha_{1} x(t)$. In this scenario, the input-output (large-signal) characteristic of the circuit is a straight line [Fig. 3.2(a)]. However, as signal excursions become larger and the transistor bias point is significantly disturbed, the gain (the slope of the characteristic) begins to vary [Fig. 3.2(b)]. We approximate this nonlinear characteristic using a polynomial:\n\n$$\n\\begin{equation*}\ny(t)=\\alpha_{0}+\\alpha_{1} x(t)+\\alpha_{2} x^{2}(t)+\\cdots+\\alpha_{n} x^{n}(t) \\tag{3.2}\n\\end{equation*}\n$$\n\nA nonlinear amplifier distorts the signal of interest or creates unwanted interactions among multiple coexisting input signals. We address the issue of nonlinearity in Chapter 14.\n\nimage_name:(a)\ndescription:The graph labeled \"(a)\" depicts a linear input-output characteristic of a system, likely representing a linear amplifier. This is a simple line plot on a two-dimensional Cartesian coordinate system.\n\n1. **Graph Type and Function:**\n- The graph is a linear plot illustrating the relationship between input and output, typically used for linear systems.\n\n2. **Axes Labels and Units:**\n- The horizontal axis (x-axis) represents the input variable, denoted as \\(x\\).\n- The vertical axis (y-axis) represents the output variable, denoted as \\(y\\).\n- No specific units are provided for either axis, indicating a general input-output behavior representation.\n\n3. **General Behavior and Trends:**\n- The graph displays a straight line with a positive slope, indicating direct proportionality between input and output.\n- The line originates from the point \\(\\alpha_0\\) on the y-axis, representing the y-intercept.\n- The line's constant slope, denoted as \\(\\alpha_1\\), indicates consistent gain across the input range.\n\n4. **Key Features and Technical Details:**\n- The slope \\(\\alpha_1\\) is crucial as it represents the amplifier's gain.\n- The intercept \\(\\alpha_0\\) indicates the output when the input is zero, often representing a bias or offset.\n- This linearity suggests ideal, undistorted amplification without saturation or clipping.\n\n5. **Annotations and Specific Data Points:**\n- A dashed line indicates the slope \\(\\alpha_1\\), emphasizing the gain characteristic of the linear system.\n- No specific numerical values are provided, maintaining a general depiction of linear behavior.\n\nimage_name:(b)\ndescription:The graph labeled \"(b)\" shows the input-output characteristic of a nonlinear system, typical of a nonlinear amplifier's behavior when subjected to an input signal.\n\n1. **Graph Type and Function:**\n- The graph plots the output signal \\( y \\) against the input signal \\( x \\), illustrating their nonlinear relationship.\n\n2. **Axes Labels and Units:**\n- The horizontal axis (\\( x \\)) represents the input signal.\n- The vertical axis (\\( y \\)) represents the output signal.\n- No specific units or scales are provided, but a linear assumption is typical for such diagrams.\n\n3. **General Behavior and Trends:**\n- The graph displays a curve that starts with a gentle slope, steepens in the middle, and then flattens as \\( x \\) increases, indicating saturation where output increases minimally despite input increases.\n- The nonlinear behavior is characterized by a bending curve, suggesting variable gain with input level.\n\n4. **Key Features and Technical Details:**\n- The curve initially rises slowly, indicating lower gain at lower input levels.\n- The slope steepens in a certain input range, indicating higher gain.\n- Beyond a point (around \\( x_2 \\)), the curve flattens, indicating saturation.\n\n5. **Annotations and Specific Data Points:**\n- Two vertical dashed lines at \\( x_1 \\) and \\( x_2 \\) mark significant transition points or thresholds in the input signal.\n- No numerical values or specific data points are provided, but these lines highlight regions of interest in system performance analysis.\n\nFigure 3.2 Input-output characteristic of a (a) linear and (b) nonlinear system.\nWhat are the critical performance aspects of an amplifier? Besides gain and speed, parameters like power dissipation, supply voltage, linearity, noise, and maximum voltage swings are vital. Additionally, the input and output impedances affect how the circuit interacts with preceding and subsequent stages. In practice, these parameters often trade off against each other, making amplifier design a multidimensional optimization problem. Illustrated in the \"analog design octagon\" of Fig. 3.3, these trade-offs present significant challenges in designing high-performance amplifiers, requiring intuition and experience to achieve an acceptable balance.\n\nTable 3.1 provides an overview of the amplifier topologies discussed in this chapter, highlighting the predominant use of the common-source (CS) stage compared to other configurations. For these amplifiers, we must (1) establish proper bias conditions to ensure each transistor provides the necessary transconductance and output resistance with specific quiescent currents and voltages, and (2) analyze the circuit's behavior as input and output signals cause small or large deviations from the bias point (small-signal and large-signal analyses, respectively). We address the latter task here and defer the former to Chapter 5.\n\nimage_name:Figure 3.3 Analog design octagon\ndescription:The diagram titled \"Figure 3.3 Analog design octagon\" presents a conceptual framework for understanding the trade-offs in analog design. It is structured as an octagon, with each vertex representing a critical aspect of analog circuit performance. The components and their inter relationships are as follows:\n\n1. **Noise**: Positioned at the top left, noise signifies unwanted signal variations. It is directly linked to linearity, indicating a trade-off between signal purity and distortion reduction.\n\n2. **Linearity**: Located opposite noise, linearity is essential for ensuring the output signal is a linear function of the input, crucial for minimizing distortion in amplifiers and other analog circuits.\n\n3. **Gain**: Found at the top right, gain refers to the circuit's amplification factor. It is related to supply voltage, suggesting that changes in supply voltage can impact gain characteristics.\n\n4. **Supply Voltage**: Positioned next to gain, supply voltage is a critical factor affecting the circuit's power and performance.\n\n5. **Voltage Swings**: Located at the bottom right, voltage swings represent the output voltage range the circuit can handle without distortion.\n\n6. **Speed**: Found at the bottom, speed refers to the circuit's ability to handle high-frequency signals. It is connected to voltage swings, indicating that larger swings can affect speed.\n\n7. **Input/Output Impedance**: Positioned at the bottom left, this factor influences the circuit's interface with other components. It is linked to speed, suggesting a balance between impedance and speed.\n\n8. **Power Dissipation**: Located above input/output impedance, power dissipation is crucial for managing the circuit's thermal aspects. It is connected to noise, indicating that power efficiency can affect noise levels.\n\nThe dashed lines within the octagon represent the complex interdependencies between these factors, highlighting the design compromises required. For instance, improving speed might negatively impact power dissipation or noise.\n\nOverall, the octagon serves as a visual aid for designers to understand and navigate the trade-offs in analog circuit design, ensuring the final product meets desired specifications and performance criteria.\n\nFigure 3.3 Analog design octagon.\n\nTable 3.1 Amplifier categories.\n\n| Common-Source Stage | Source Follower | Common-Gate Stage | Cascode |\n| :---: | :---: | :---: | :---: |\n| With Resistive Load | With Resistive Bias | With Resistive Load | Telescopic |\n| With Diode-Connected Load | With Current-Source Bias | With Current-Source Load | Folded |\n| With Current-Source Load |  |  |  |\n| With Active Load |  |  |  |\n| With Source Degeneration |  |  |  |"
},
{
    "text": "An optimal amplifier produces an output, \\( y(t) \\), that is a linear replica of the input, \\( x(t) \\):\n\n$$\n\\begin{equation*}\ny(t)=\\alpha_{1} x(t) \\tag{3.1}\n\\end{equation*}\n$$\n\nimage_name:Desired Signal\ndescription:The graph labeled \"Desired Signal\" is a frequency-domain representation showing two distinct signals. The x-axis represents frequency, denoted as \\( f \\), while the y-axis, though unlabeled, typically signifies signal amplitude or power.\n\n1. **Type of Graph and Function:**\n- This is a frequency spectrum graph, commonly used to display the presence of signals at various frequencies.\n\n2. **Axes Labels and Units:**\n- The x-axis is labeled \\( f \\) for frequency. The y-axis is unlabeled but generally represents amplitude or power.\n- The scale is linear, typical for such diagrams.\n\n3. **Overall Behavior and Trends:**\n- The graph exhibits two distinct peaks. The first peak, labeled \"Desired Signal,\" is shorter and appears at a lower frequency. The second peak, labeled \"Interferer,\" is taller and occurs at a higher frequency.\n- The desired signal is narrower, indicating a specific frequency range, whereas the interferer is broader, suggesting it spans a wider frequency band.\n\n4. **Key Features and Technical Details:**\n- The desired signal represents the target frequency the system aims to receive or process.\n- The interferer denotes unwanted noise or signals that can disrupt or interfere with the desired signal.\n- The graph visually highlights the distinction between the desired signal and potential interference, crucial for designing filters or amplifiers to isolate the desired signal.\n\n5. **Annotations and Specific Data Points:**\n- The graph is annotated with \"Desired Signal\" and \"Interferer\" to differentiate between the two signals.\n- No specific numerical values or markers are provided for frequencies or amplitudes, but the visual representation clearly distinguishes the two signal types.\nimage_name:Figure 3.1 General RF transceiver\ndescription:The diagram labeled \"Figure 3.1 General RF transceiver\" illustrates the primary components of a radio frequency (RF) transceiver system, encompassing both receiving and transmitting sections.\n\n1. **Main Components:**\n- **Antenna:** Captures incoming RF signals and transmits outgoing signals.\n- **Receiver Section:**\n- **LNA (Low Noise Amplifier):** Amplifies weak incoming signals from the antenna while introducing minimal noise, preserving signal quality.\n- **Downconverter:** Transforms the amplified high-frequency signal to a lower intermediate frequency (IF) for easier processing.\n- **Amplifying Stages:** Further amplify the downconverted signal to appropriate levels for demodulation and processing.\n- **Transmitter Section:**\n- **PA (Power Amplifier):** Amplifies the signal to be transmitted to a higher power level suitable for air transmission.\n- **Upconverter:** Converts the signal from a lower frequency to the desired RF frequency for transmission.\n- **Microphone (Mike):** Captures audio input for processing and transmission.\n\n2. **Flow of Information or Control:**\n- In the receiver section, the signal flow starts at the antenna, which captures RF signals. These signals are then amplified by the LNA and proceed to the downconverter, which shifts them to a lower frequency before passing through additional amplifying stages.\n- In the transmitter section, the audio signal from the microphone is processed and upconverted to a higher frequency. The upconverted signal is then amplified by the PA before being transmitted via the antenna.\n\n3. **Labels, Annotations, and Key Indicators:**\n- The diagram includes labels like \"Desired Signal\" and \"Interferer,\" indicating the frequency spectrum of interest and potential noise or interference.\n- Key components such as LNA, PA, downconverter, and upconverter are clearly labeled, providing a clear understanding of their roles.\n\n4. **Overall System Function:**\n- The primary function of this RF transceiver is to receive, process, and transmit RF signals. The receiver section ensures incoming signals are amplified and converted to a manageable frequency, while the transmitter section prepares and amplifies outgoing signals. This setup facilitates efficient communication by optimizing signal quality and power levels at each stage.\n\nFigure 3.1 General RF transceiver.\nwhere \\(\\alpha_{1}\\) represents the gain. Since the output signal is superimposed on a bias (dc operating) point, \\(\\alpha_{0}\\), the overall output can be expressed as \\(y(t)=\\alpha_{0}+\\alpha_{1} x(t)\\). In this scenario, the input-output (large-signal) characteristic of the circuit is a straight line [Fig. 3.2(a)]. However, as signal excursions become larger and the transistor bias point is significantly disturbed, the gain (the slope of the characteristic) begins to vary [Fig. 3.2(b)]. We approximate this nonlinear characteristic using a polynomial:\n\n$$\n\\begin{equation*}\ny(t)=\\alpha_{0}+\\alpha_{1} x(t)+\\alpha_{2} x^{2}(t)+\\cdots+\\alpha_{n} x^{n}(t) \\tag{3.2}\n\\end{equation*}\n$$\n\nA nonlinear amplifier distorts the signal of interest or creates unwanted interactions among multiple signals present at the input. We address the issue of nonlinearity in Chapter 14.\nimage_name:(a)\ndescription:The graph labeled \"(a)\" depicts a linear input-output characteristic of a system, likely representing a linear amplifier. This graph is a simple line plot on a two-dimensional Cartesian coordinate system.\n\n1. **Type of Graph and Function:**\n- The graph is a linear plot illustrating the relationship between input and output, commonly used to represent linear systems.\n\n2. **Axes Labels and Units:**\n- The horizontal axis (x-axis) represents the input variable, denoted as \\(x\\).\n- The vertical axis (y-axis) represents the output variable, denoted as \\(y\\).\n- No specific units are provided for either axis, indicating a general representation of input-output behavior.\n\n3. **Overall Behavior and Trends:**\n- The graph shows a straight line with a positive slope, indicating direct proportionality between input and output.\n- The line starts from the point \\(\\alpha_0\\) on the y-axis, representing the y-intercept.\n- The slope of the line, denoted as \\(\\alpha_1\\), is constant, indicating consistent gain across the input range.\n\n4. **Key Features and Technical Details:**\n- The slope \\(\\alpha_1\\) represents the amplifier's gain.\n- The intercept \\(\\alpha_0\\) indicates the output when the input is zero, often representing a bias or offset.\n- This linearity suggests ideal, undistorted amplification without saturation or clipping.\n\n5. **Annotations and Specific Data Points:**\n- A dashed line indicates the slope \\(\\alpha_1\\), emphasizing the gain characteristic.\n- No specific numerical values are given, maintaining a general depiction of linear behavior.\nimage_name:(b)\ndescription:The graph labeled \"(b)\" shows the input-output characteristic of a nonlinear system, typically representing a nonlinear amplifier's behavior when an input signal is applied.\n\n1. **Type of Graph and Function:**\n- The graph plots the output signal \\( y \\) versus the input signal \\( x \\), illustrating the nonlinear relationship between them.\n\n2. **Axes Labels and Units:**\n- The horizontal axis (\\( x \\)) represents the input signal.\n- The vertical axis (\\( y \\)) represents the output signal.\n- No specific units or scales are provided, but it is assumed to be linear based on typical practice.\n\n3. **Overall Behavior and Trends:**\n- The graph displays a curve that starts with a gentle slope, becomes steeper in the middle, and then flattens out as \\( x \\) increases, indicating saturation where the output no longer significantly increases despite higher input.\n- The nonlinear behavior is characterized by a bending curve, suggesting variable gain with input level.\n\n4. **Key Features and Technical Details:**\n- The curve initially rises slowly, indicating lower gain at lower input levels.\n- As the input increases to a certain range, the slope steepens, showing higher gain.\n- Beyond a certain point (around \\( x_2 \\)), the curve flattens, indicating saturation.\n\n5. **Annotations and Specific Data Points:**\n- Two vertical dashed lines are marked at \\( x_1 \\) and \\( x_2 \\), possibly indicating significant transition points or thresholds in the input signal.\n- No numerical values or specific data points are provided, but these lines suggest regions of interest in the system's performance analysis.\n\nFigure 3.2 Input-output characteristic of a (a) linear and (b) nonlinear system.\nWhat aspects of amplifier performance are crucial? Besides gain and speed, parameters such as power dissipation, supply voltage, linearity, noise, and maximum voltage swings may be significant. Additionally, the input and output impedances determine how the circuit interacts with preceding and subsequent stages. In practice, most of these parameters involve trade-offs, making the design a multidimensional optimization problem. Illustrated in the \"analog design octagon\" of Fig. 3.3, these trade-offs present numerous challenges in designing high-performance amplifiers, requiring intuition and experience to achieve an acceptable compromise.\n\nTable 3.1 provides a preview of the amplifier topologies covered in this chapter, highlighting the prevalent use of the common-source (CS) stage over other configurations. For these amplifiers, we must (1) establish proper bias conditions to ensure each transistor provides the necessary transconductance and output resistance with specific quiescent currents and voltages, and (2) analyze the circuit's behavior as input and output signals cause small or large deviations from the bias point (small-signal and large-signal analyses, respectively). We address the latter task here and defer the former to Chapter 5.\nimage_name:Figure 3.3 Analog design octagon\ndescription:The diagram titled \"Figure 3.3 Analog design octagon\" presents a conceptual framework for understanding the trade-offs in analog design. It is structured as an octagon, with each vertex representing a critical aspect of analog circuit performance. The components and their relationships are as follows:\n\n1. **Noise**: Positioned at the top left, noise signifies unwanted signal variations. It is directly linked to linearity, indicating a trade-off between signal purity and distortion reduction.\n\n2. **Linearity**: Located opposite noise, linearity is essential for ensuring the output signal is a linear function of the input, crucial for minimizing distortion.\n\n3. **Gain**: Found at the top right, gain refers to the circuit's amplification factor. It is related to supply voltage, suggesting that changes in supply voltage can affect gain.\n\n4. **Supply Voltage**: Positioned next to gain, supply voltage is a critical factor influencing the circuit's power and performance.\n\n5. **Voltage Swings**: Located at the bottom right, voltage swings represent the output voltage range the circuit can handle without distortion.\n\n6. **Speed**: Found at the bottom, speed refers to the circuit's ability to handle high-frequency signals. It is connected to voltage swings, indicating that larger swings can impact speed.\n\n7. **Input/Output Impedance**: Positioned at the bottom left, this factor affects the circuit's interaction with other components. It is linked to speed, suggesting a balance between impedance and speed.\n\n8. **Power Dissipation**: Located above input/output impedance, power dissipation is crucial for managing thermal aspects. It is connected to noise, indicating that power efficiency can influence noise levels.\n\nThe dashed lines within the octagon represent the interdependencies between these factors, highlighting the design compromises. For instance, improving speed might negatively affect power dissipation or noise.\n\nOverall, the octagon serves as a visual tool for designers to navigate the trade-offs in analog circuit design, ensuring the final product meets desired specifications and performance criteria.\n\nFigure 3.3 Analog design octagon.\n\nTable 3.1 Amplifier categories.\n\n| Common-Source Stage | Source Follower | Common-Gate Stage | Cascode |\n| :---: | :---: | :---: | :---: |\n| With Resistive Load | With Resistive Bias | With Resistive Load | Telescopic |\n| With Diode-Connected Load | With Current-Source Bias | With Current-Source Load | Folded |\n| With Current-Source Load |  |  |  |\n| With Active Load |  |  |  |\n| With Source Degeneration |  |  |  |"
},
{
    "text": "The MOSFET's transconductance enables it to transform variations in the gate-source voltage into a proportional small-signal drain current, which, upon flowing through a resistor, produces an output voltage. As depicted in Fig. 3.4(a), this operation is performed by the common-source stage. We examine both the large-signal and small-signal behaviors of this circuit, observing that its input impedance is particularly high at low frequencies.\n\nWhen the input voltage rises from zero, transistor $M_{1}$ is off, and the output voltage $V_{\\text{out}}$ equals $V_{D D}$, as shown in Fig. 3.4(b). As $V_{\\text{in}}$ nears $V_{T H}$, $M_{1}$ starts to turn on, sourcing current from $R_{D}$ and decreasing $V_{\\text{out}}$. $M_{1}$ turns on in saturation irrespective of $V_{D D}$ and $R_{D}$ values, leading to the equation:\n\n$$\nV_{\\text{out}} = V_{D D} - R_{D} \\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L} (V_{\\text{in}} - V_{T H})^2\n$$\n\nHere, channel-length modulation is ignored. As $V_{i n}$ continues to rise, $V_{o u t}$ further decreases, with the transistor remaining in saturation until $V_{\\text{in}}$ surpasses $V_{\\text{out}}$ by $V_{T H}$, as indicated by point $A$ in Fig. 3.4(b). At this juncture, the equation is:\n\n$$\nV_{i n 1} - V_{T H} = V_{D D} - R_{D} \\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L} (V_{i n 1} - V_{T H})^2\n$$\n\nFrom this, $V_{i n 1} - V_{T H}$ and thus $V_{\\text{out}}$ can be determined. For $V_{i n} > V_{i n 1}$, $M_{1}$ is in the triode region, governed by:\n\n$$\nV_{\\text{out}} = V_{D D} - R_{D} \\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L} [2(V_{\\text{in}} - V_{T H}) V_{\\text{out}} - V_{\\text{out}}^2]\n$$\n\nThe circuit schematic images described are of a common-source amplifier with an NMOS transistor $M1$, resistor $RD$, and voltage source $VDD$. The output voltage $Vout$ is taken from the drain of $M1$, and the input voltage $Vin$ is applied to the gate.\n\nIn the context of nanometer technologies, the CS stage's behavior is explored with a simulated input-output characteristic. For $W/L = 2 \\mu m / 40 nm$, $R_D = 2 k\\Omega$, and $V_D D = 1 V$, the circuit exhibits a gain of approximately 3 within an input range of 0.4 V to 0.6 V. The output swing is restricted to about 0.3 V to 0.8 V to prevent significant gain reduction.\n\nTo maximize the voltage gain of a common-source stage, we can manipulate the parameters according to the derived equations. The gain is affected by the device size, the voltage drop across $R_D$, and the drain current $I_D$. However, increasing the device size increases capacitance, and a higher $V_R D$ limits voltage swings. These trade-offs are crucial in analog design, where gain, bandwidth, and voltage swings are interrelated.\n\nThe small-signal model, as shown in Fig. 3.7, includes the transistor output resistance and confirms the derived gain equation. This model simplifies the analysis of the circuit's gain.\n\nIn a circuit with a current source load, as depicted in Fig. 3.8, the gain is limited by the transistor's output resistance, leading to the \"intrinsic gain\" equation:\n\n$$\nA_v = -g_m r_O\n$$\n\nThis represents the maximum voltage gain achievable with a single device.\n\nIn a circuit with the bulk of the MOSFET controlling the channel, as shown in Fig. 3.9, the voltage gain is determined by the bulk transconductance and the load resistor, resulting in:\n\n$$\nA_v = -g_{m b} R_D\n$$\n\nThese examples and equations illustrate the complex interplay of parameters in designing and analyzing common-source amplifier stages, particularly in the context of nanometer technologies."
},
{
    "text": "A MOSFET's transconductance translates variations in gate-source voltage into small-signal drain current, which, when passing through a resistor, generates an output voltage. As depicted in Fig. 3.4(a), the common-source stage performs this operation. We analyze both the large-signal and the small-signal behavior of the circuit, observing that the input impedance is particularly high at low frequencies.\n\nWhen the input voltage rises from zero, $M_{1}$ is off, resulting in $V_{\\text{out}}=V_{D D}$ [Fig. 3.4(b)]. As $V_{\\text{in}}$ nears $V_{T H}$, $M_{1}$ starts to activate, sourcing current from $R_{D}$ and reducing $V_{\\text{out}}$. Regardless of the $V_{D D}$ and $R_{D}$ values, $M_{1}$ turns on in saturation, leading to:\n\n$$\nV_{\\text{out}}=V_{D D}-R_{D} \\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}(V_{\\text{in}}-V_{T H})^{2}\n$$\n\nThis equation neglects channel-length modulation. With a further increase in $V_{i n}$, $V_{o u t}$ decreases more, with the transistor remaining in saturation until $V_{\\text{in}}$ surpasses $V_{\\text{out}}$ by $V_{T H}$ [point $A$ in Fig. 3.4(b)]. At this juncture,\n\n$$\nV_{i n 1}-V_{T H}=V_{D D}-R_{D} \\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}(V_{i n 1}-V_{T H})^{2}\n$$\n\nFrom this, $V_{i n 1}-V_{T H}$ and thus $V_{\\text{out}}$ can be determined. For $V_{i n}>V_{i n 1}$, $M_{1}$ is in the triode region:\n\n$$\nV_{\\text{out}}=V_{D D}-R_{D} \\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}[2(V_{\\text{in}}-V_{T H}) V_{\\text{out}}-V_{\\text{out}}^{2}]\n$$\n\nThe circuit depicted in the image is a common-source amplifier featuring an NMOS transistor $M_1$. The resistor $R_D$ connects between $V_D D$ and the drain of $M_1$, while the input voltage $V_{i n}$ is applied to the gate of $M_1$. The output voltage $V_{o u t}$ is obtained from the drain of $M_1$.\n\nFigure 3.4(b) illustrates an input-output characteristic graph for a common-source amplifier stage with a MOSFET. This graph typically depicts the relationship between the input voltage ($V_{i n}$) and the output voltage ($V_{o u t}$) of the circuit.\n\nIn summary, the MOSFET's operation in the common-source stage is influenced by its transconductance, and the circuit's behavior is analyzed for both large and small signals. The input impedance is high at low frequencies, and the output voltage is a function of the input voltage and the transistor's operating region, whether in saturation or the triode region. The circuit's design affects the gain and other performance parameters, and trade-offs must be considered in optimizing the amplifier's characteristics."
},
{
    "text": "The MOSFET's transconductance transforms variations in the gate-source voltage into a small-signal drain current, which, passing through a resistor, produces an output voltage. As depicted in Fig. 3.4(a), this is the function of the common-source stage, which we analyze for both large-signal and small-signal behavior. It's worth noting that the circuit exhibits a high input impedance at low frequencies.\n\nWhen the input voltage rises from zero, transistor $M_{1}$ is off, resulting in $V_{\\text{out}} = V_{D D}$, as shown in Fig. 3.4(b). As $V_{\\text{in}}$ nears $V_{T H}$, $M_{1}$ starts to turn on, sourcing current from $R_{D}$ and decreasing $V_{\\text{out}}$. $M_{1}$ activates in saturation regardless of $V_{D D}$ and $R_{D}$ values, leading to the equation:\n\n$$\nV_{\\text{out}} = V_{D D} - R_{D} \\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L} (V_{\\text{in}} - V_{T H})^2\n$$\n\nwhere channel-length modulation is disregarded. As $V_{i n}$ continues to rise, $V_{o u t}$ falls further, with the transistor remaining in saturation until $V_{\\text{in}}$ surpasses $V_{\\text{out}}$ by $V_{T H}$, as indicated by point $A$ in Fig. 3.4(b). At this juncture, the equation is:\n\n$$\nV_{i n 1} - V_{T H} = V_{D D} - R_{D} \\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L} (V_{i n 1} - V_{T H})^2\n$$\n\nfrom which $V_{i n 1} - V_{T H}$ and thus $V_{\\text{out}}$ can be determined. For $V_{i n} > V_{i n 1}$, $M_{1}$ is in the triode region, described by:\n\n$$\nV_{\\text{out}} = V_{D D} - R_{D} \\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L} [2(V_{\\text{in}} - V_{T H}) V_{\\text{out}} - V_{\\text{out}}^2]\n$$\n\nThe circuit schematic for the common-source amplifier includes an NMOS transistor M1, resistor RD connected between VDD and the drain of M1, with the input voltage Vin applied to the gate of M1. The output voltage Vout is derived from the drain of M1.\n\nThe graph labeled as (b) in Fig. 3.4(b) represents the input-output characteristic curve for a common-source amplifier stage with a MOSFET. This curve illustrates the relationship between the input voltage (Vin) and the output voltage (Vout) of the circuit, showing the active region, threshold voltage, gain, and saturation regions of the MOSFET operation.\n\nIn the deep triode region, if $V_{\\text{in}}$ is sufficient to push $M_{1}$ into this region, $V_{o u t} \\ll 2(V_{i n} - V_{T H})$, and from the equivalent circuit in Fig. 3.4(c), the output voltage is given by:\n\n$$\nV_{\\text{out}} = V_{D D} \\frac{R_{\\text{on}}}{R_{o n} + R_{D}}\n$$\n\nor\n\n$$\nV_{\\text{out}} = \\frac{V_{D D}}{1 + \\mu_{n} C_{o x} \\frac{W}{L} R_{D} (V_{i n} - V_{T H})}\n$$\n\nConsidering that the transconductance diminishes in the triode region, it's typically ensured that $V_{\\text{out}} > V_{\\text{in}} - V_{T H}$, with the operation occurring to the left of point $A$ in Fig. 3.4(b). Using the input-output characteristic from Eq. (3.3) and interpreting its slope as the small-signal gain, we have:\n\n$$\nA_{v} = \\frac{\\partial V_{\\text{out}}}{\\partial V_{\\text{in}}} = -R_{D} \\mu_{n} C_{o x} \\frac{W}{L} (V_{i n} - V_{T H}) = -g_{m} R_{D}\n$$\n\nThis conclusion can be directly inferred from the observation that $M_{1}$ converts an input voltage change $\\Delta V_{\\text{in}}$ into a drain current change $g_{m} \\Delta V_{i n}$, and consequently, an output voltage change $-g_{m} R_{D} \\Delta V_{i n}$. The small-signal model in Fig. 3.4(d) arrives at the same outcome: $V_{\\text{out}} = -g_{m} V_{1} R_{D} = -g_{m} V_{i n} R_{D}$. It's important to note that, as discussed in Chapter 2, $V_{\\text{in}}$, $V_{1}$, and $V_{\\text{out}}$ in this figure denote small-signal quantities.\n\nEven though derived for small-signal operation, the equation $A_{v} = -g_{m} R_{D}$ anticipates certain effects if the circuit experiences a large signal swing. Since $g_{m}$ varies with the input signal according to\n\n$$\ng_{m} = \\mu_{n} C_{o x} (W / L) (V_{G S} - V_{T H})\n$$\n\nthe gain of the circuit undergoes substantial changes if the signal is large. In other words, if the gain of the circuit varies considerably with the signal swing, the circuit operates in the large-signal mode. The gain's dependence on the signal level results in nonlinearity (Chapter 14), usually an unwanted effect.\n\nA crucial point here is that to minimize nonlinearity, the gain equation must be a weak function of signal-dependent parameters like $g_{m}$. Several examples of this principle are presented in this chapter and in Chapter 14."
},
{
    "text": "The operation of a MOSFET relies on its transconductance, which translates variations in the gate-source voltage into corresponding alterations in the small-signal drain current. This current can traverse a resistor to produce an output voltage. The common-source stage, as depicted in Fig. 3.4(a), executes this function. We examine the circuit's behavior under both large-signal and small-signal conditions. Notably, the circuit exhibits a high input impedance at low frequencies.\n\nWhen the input voltage rises from zero, the MOSFET $M_1$ is off, and the output voltage $V_{\\text{out}}$ equals $V_{\\text{DD}}$, as shown in Fig. 3.4(b). As $V_{\\text{in}}$ nears $V_{\\text{TH}}$, $M_1$ commences to turn on, sourcing current from $R_D$ and diminishing $V_{\\text{out}}$. $M_1$ operates in saturation irrespective of $V_{\\text{DD}}$ and $R_D$ values, leading to the following equation:\n\n$$\nV_{\\text{out}} = V_{\\text{DD}} - R_D \\frac{1}{2} \\mu_n C_{ox} \\frac{W}{L}(V_{\\text{in}} - V_{\\text{TH}})^2\n$$\n\nwhere channel-length modulation is disregarded. As $V_{\\text{in}}$ continues to climb, $V_{\\text{out}}$ further decreases, with the transistor remaining in saturation until $V_{\\text{in}}$ surpasses $V_{\\text{out}}$ by $V_{\\text{TH}}$ (point $A$ in Fig. 3.4(b)). At this juncture, the equation is:\n\n$$\nV_{\\text{in}1} - V_{\\text{TH}} = V_{\\text{DD}} - R_D \\frac{1}{2} \\mu_n C_{ox} \\frac{W}{L}(V_{\\text{in}1} - V_{\\text{TH}})^2\n$$\n\nfrom which $V_{\\text{in}1} - V_{\\text{TH}}$ and, consequently, $V_{\\text{out}}$ can be ascertained. For $V_{\\text{in}} > V_{\\text{in}1}$, $M_1$ resides in the triode region, and the equation becomes:\n\n$$\nV_{\\text{out}} = V_{\\text{DD}} - R_D \\frac{1}{2} \\mu_n C_{ox} \\frac{W}{L}[2(V_{\\text{in}} - V_{\\text{TH}}) V_{\\text{out}} - V_{\\text{out}}^2]\n$$\n\nThe accompanying figures depict various stages and characteristics of the MOSFET circuit, including a common-source amplifier with an NMOS transistor, input-output characteristics, equivalent circuits in different regions, and small-signal models.\n\nFurther analysis explores the effects of deep triode region operation, small-signal gain calculations, and the implications of channel-length modulation. The small-signal model of the CS stage, including the transistor output resistance, is also presented.\n\nThe examples provided illustrate the behavior of the drain current and transconductance as functions of the input voltage, as well as the time-domain waveforms of input voltage, output voltage, and transconductance under sinusoidal input conditions.\n\nFinally, the text delves into maximizing the voltage gain of a common-source stage, considering the trade-offs between gain, bandwidth, and voltage swings, and the impact of channel-length modulation on the gain equation. The examples demonstrate calculations for voltage gain under different biasing conditions and with varying circuit configurations."
},
{
    "text": "By leveraging its transconductance, a MOSFET transforms variations in the gate-source voltage into a small-signal drain current. This current can then flow through a resistor to produce an output voltage. The common-source stage, depicted in Fig. 3.4(a), carries out this operation. We examine both the large-signal and small-signal behaviors of the circuit, noting that the input impedance is very high at low frequencies.\n\nWhen the input voltage rises from zero, transistor $M_1$ is off, and the output voltage $V_{\\text{out}}$ equals the supply voltage $V_{\\text{DD}}$, as shown in Fig. 3.4(b). As $V_{\\text{in}}$ nears the threshold voltage $V_{\\text{TH}}$, $M_1$ starts to turn on, sourcing current from $R_D$ and reducing $V_{\\text{out}}$. $M_1$ operates in saturation regardless of $V_{\\text{DD}}$ and $R_D$ values, leading to the equation:\n\n$$\nV_{\\text{out}} = V_{\\text{DD}} - R_D \\frac{1}{2} \\mu_n C_{ox} \\frac{W}{L} (V_{\\text{in}} - V_{\\text{TH}})^2\n$$\n\nwhere channel-length modulation is disregarded. As $V_{\\text{in}}$ increases further, $V_{\\text{out}}$ decreases more, and the transistor remains in saturation until $V_{\\text{in}}$ exceeds $V_{\\text{out}}$ by $V_{\\text{TH}}$ (point A in Fig. 3.4(b)). At this point, the equation is:\n\n$$\nV_{\\text{in}} - V_{\\text{TH}} = V_{\\text{DD}} - R_D \\frac{1}{2} \\mu_n C_{ox} \\frac{W}{L} (V_{\\text{in}} - V_{\\text{TH}})^2\n$$\n\nfrom which $V_{\\text{in}} - V_{\\text{TH}}$ and hence $V_{\\text{out}}$ can be determined. For $V_{\\text{in}} > V_{\\text{in}1}$, $M_1$ is in the triode region, described by:\n\n$$\nV_{\\text{out}} = V_{\\text{DD}} - R_D \\frac{1}{2} \\mu_n C_{ox} \\frac{W}{L} [2(V_{\\text{in}} - V_{\\text{TH}})V_{\\text{out}} - V_{\\text{out}}^2]\n$$\n\nThe provided images and descriptions detail the common-source amplifier circuit with an NMOS transistor and resistor configurations, including the input-output characteristic graph and small-signal models for different operating regions.\n\nThe text continues with a discussion of the amplifier's behavior in the triode region, the calculation of the small-signal voltage gain, and the impact of channel-length modulation on the gain. It also touches upon the use of the bulk (back gate) of a MOSFET as a controlling terminal and the calculation of the voltage gain under certain conditions. The examples provided involve sketching the drain current and transconductance as functions of input voltage and analyzing the voltage gain of a common-source stage with a current source load."
},
{
    "text": "A MOSFET's transconductance allows it to transform variations in the gate-source voltage into a proportional small-signal drain current, which, when passing through a resistor, produces an output voltage. This process is exemplified by the common-source stage depicted in Fig. 3.4(a). We examine both the large-signal and small-signal behaviors of this circuit, observing that at low frequencies, the input impedance is notably high.\n\nAs the input voltage rises from zero, transistor $M_1$ is off, and the output voltage $V_{\\text{out}}$ equals $V_{\\text{DD}}$ [Fig. 3.4(b)]. As $V_{\\text{in}}$ nears $V_{\\text{TH}}$, $M_1$ starts to turn on, sourcing current from $R_D$ and diminishing $V_{\\text{out}}$. $M_1$ activates in saturation irrespective of $V_{\\text{DD}}$ and $R_D$ values (why?), leading to the equation:\n\n$$\nV_{\\text{out}} = V_{\\text{DD}} - R_D \\frac{1}{2} \\mu_n C_{ox} \\frac{W}{L}(V_{\\text{in}} - V_{\\text{TH}})^2 \\tag{3.3}\n$$\n\nwhere channel-length modulation is ignored. With a further rise in $V_{\\text{in}}$, $V_{\\text{out}}$ decreases further, with the transistor remaining in saturation until $V_{\\text{in}}$ surpasses $V_{\\text{out}}$ by $V_{\\text{TH}}$ [point $A$ in Fig. 3.4(b)]. At this juncture,\n\n$$\nV_{\\text{in}1} - V_{\\text{TH}} = V_{\\text{DD}} - R_D \\frac{1}{2} \\mu_n C_{ox} \\frac{W}{L}(V_{\\text{in}1} - V_{\\text{TH}})^2 \\tag{3.4}\n$$\n\nfrom which $V_{\\text{in}1} - V_{\\text{TH}}$ and thus $V_{\\text{out}}$ can be derived. For $V_{\\text{in}} > V_{\\text{in}1}$, $M_1$ resides in the triode region:\n\n$$\nV_{\\text{out}} = V_{\\text{DD}} - R_D \\frac{1}{2} \\mu_n C_{ox} \\frac{W}{L}[2(V_{\\text{in}} - V_{\\text{TH}}) V_{\\text{out}} - V_{\\text{out}}^2] \\tag{3.5}\n$$\n\nThe circuit depicted is a common-source amplifier featuring an NMOS transistor $M_1$. The resistor $R_D$ is linked between $V_{\\text{DD}}$ and the drain of $M_1$, with the input voltage $V_{\\text{in}}$ applied to the gate of $M_1$. The output voltage $V_{\\text{out}}$ is derived from the drain of $M_1$.\n\nThe graph labeled (b) illustrates the input-output characteristics of a common-source amplifier stage with a MOSFET, as shown in the circuit diagram. Such graphs typically depict the relationship between the input voltage ($V_{\\text{in}}$) and the output voltage ($V_{\\text{out}}$) of the circuit.\n\n1. **Graph Type and Function:**\n   - It represents the input-output characteristics of a MOSFET amplifier, specifically a common-source amplifier stage.\n\n2. **Axes Labels and Units:**\n   - The x-axis represents the input voltage ($V_{\\text{in}}$), usually in volts.\n   - The y-axis represents the output voltage ($V_{\\text{out}}$), also in volts.\n   - Both axes are likely to use a linear scale, though specific units are not visible in the provided image.\n\n3. **Overall Behavior and Trends:**\n   - The graph likely shows a region where the output voltage changes linearly with the input voltage, signifying the active region of the MOSFET operation.\n   - Beyond certain threshold voltages, the MOSFET may enter saturation or cutoff, causing the output voltage to level off or change more drastically.\n\n4. **Key Features and Technical Details:**\n   - The graph would typically exhibit a threshold point where the MOSFET begins to conduct significantly, corresponding to the threshold voltage ($V_{\\text{TH}}$).\n   - The slope of the linear region would indicate the gain of the amplifier.\n   - Important points such as maximum output voltage and saturation regions would be marked if visible.\n\n5. **Annotations and Specific Data Points:**\n   - The graph may include annotations like $V_{\\text{TH}}$, maximum output voltage, or saturation region, though specific markers are not visible in the image provided.\n   - Numerical values for key data points like gain or threshold voltage are essential for detailed analysis but are not visible here.\n\nThe circuit represented is a common-source amplifier with an NMOS transistor $M_1$. The input voltage $V_{\\text{in}}$ governs the output voltage $V_{\\text{out}}$ by modulating the current through the transistor. The resistor $R_D$ serves as the load, and $V_{\\text{DD}}$ is the supply voltage.\n\nThis circuit is a small-signal model for the saturation region of a common-source amplifier. The voltage source $V_{\\text{in}}$ provides the input signal, while $V_1$ is an additional voltage source influencing the current source $g_{mV1}$. The resistor $R_D$ is connected to the output node $V_{\\text{out}}$, which is the output of the amplifier.\n\nFigure 3.4 (a) depicts the common-source stage, (b) shows the input-output characteristic, (c) presents the equivalent circuit in the deep triode region, and (d) represents the small-signal model for the saturation region.\n\nIf $V_{\\text{in}}$ is sufficient to push $M_1$ into the deep triode region, where $V_{\\text{out}} \\ll 2(V_{\\text{in}} - V_{\\text{TH}})$, and referring to the equivalent circuit of Fig. 3.4(c),\n\n$$\nV_{\\text{out}} = V_{\\text{DD}} \\frac{R_{\\text{on}}}{R_{\\text{on}} + R_D} \\tag{3.6}\n$$\n\n$$\nV_{\\text{out}} = \\frac{V_{\\text{DD}}}{1 + \\mu_n C_{ox} \\frac{W}{L} R_D (V_{\\text{in}} - V_{\\text{TH}})} \\tag{3.7}\n$$\n\nGiven that the transconductance diminishes in the triode region, we generally ensure that $V_{\\text{out}} > V_{\\text{in}} - V_{\\text{TH}}$, and thus the current operates to the left of point $A$ in Fig. 3.4(b). Utilizing (3.3) as the input-output characteristic and considering its slope as the small-signal gain, we obtain:\n\n$$\nA_v = \\frac{\\partial V_{\\text{out}}}{\\partial V_{\\text{in}}} \\tag{3.8}\n$$\n\n$$\nA_v = -R_D \\mu_n C_{ox} \\frac{W}{L} (V_{\\text{in}} - V_{\\text{TH}}) \\tag{3.9}\n$$\n\n$$\nA_v = -g_m R_D \\tag{3.10}\n$$\n\nThis result can be directly inferred from the observation that $M_1$ converts an input voltage change $\\Delta V_{\\text{in}}$ into a drain current change $g_m \\Delta V_{\\text{in}}$, and hence an output voltage change $-g_m R_D \\Delta V_{\\text{in}}$. The small-signal model of Fig. 3.4(d) yields the same outcome: $V_{\\text{out}} = -g_m V_1 R_D = -g_m V_{\\text{in}} R_D$. Note that, as mentioned in Chapter 2, $V_{\\text{in}}$, $V_1$, and $V_{\\text{out}}$ in this figure represent small-signal quantities.\n\nEven though derived for small-signal operation, the equation $A_v = -g_m R_D$ predicts certain effects if the circuit experiences a large signal swing. Since $g_m$ itself varies with the input signal according to\n\n$$\ng_m = \\mu_n C_{ox} \\frac{W}{L} (V_{\\text{GS}} - V_{\\text{TH}})\n$$\n\nthe gain of the circuit changes substantially if the signal is large. In other words, if the gain of the circuit varies significantly with the signal swing, then the circuit operates in the large-signal mode. The dependence of the gain upon the signal level leads to nonlinearity (Chapter 14), usually an undesirable effect.\n\nA key result here is that to minimize the nonlinearity, the gain equation must be a weak function of signal-dependent parameters such as $g_m$. We present several examples of this concept in this chapter and in Chapter 14.\n\n#### Example 3.1\n\nSketch the drain current and transconductance of $M_1$ in Fig. 3.4(a) as a function of the input voltage.\n\n#### Solution\n\nThe drain current becomes significant for $V_{\\text{in}} > V_{\\text{TH}}$, eventually approaching $V_{\\text{DD}} / R_D$ if $R_{\\text{on}1} \\ll R_D$ [Fig. 3.5(a)]. Since in saturation, $g_m = \\mu_n C_{ox} \\frac{W}{L} (V_{\\text{in}} - V_{\\text{TH}})$, the transconductance begins to rise for $V_{\\text{in}} > V_{\\text{TH}}$. In the triode region, $g_m = \\mu_n C_{ox} \\frac{W}{L} V_{\\text{DS}}$, falling as $V_{\\text{in}}$ exceeds $V_{\\text{in}1}$ [Fig. 3.5(b)]. Starting with Eq. (3.5), the reader can show that\n\n$$\nA_v = \\frac{\\partial V_{\\text{out}}}{\\partial V_{\\text{in}}} = \\frac{-\\mu_n C_{ox} \\frac{W}{L} R_D V_{\\text{out}}}{1 + \\mu_n C_{ox} \\frac{W}{L} R_D (V_{\\text{in}} - V_{\\text{TH}} - V_{\\text{out}})} \\tag{3.11}\n$$\n\nwhich reaches a maximum if $V_{\\text{out}} = V_{\\text{in}} - V_{\\text{TH}}$ (point $A$).\nimage_name:(a)\ndescription:1. **Type of Graph and Function:**\nThe graph is a plot of the drain current ($I_D$) versus the input voltage ($V_{in}$) for a MOSFET transistor, typically used to illustrate the transfer characteristics in the saturation region.\n\n2. **Axes Labels and Units:**\n- The x-axis represents the input voltage ($V_{in}$) in volts.\n- The y-axis represents the drain current ($I_D$) in amperes.\n- A horizontal dashed line marks the level $\\frac{V_{DD}}{R_D}$, indicating the maximum possible current through the drain resistor.\n\n3. **Overall Behavior and Trends:**\n- The graph shows a threshold behavior typical of MOSFETs. Initially, as $V_{in}$ increases from zero, $I_D$ remains near zero until $V_{in}$ reaches the threshold voltage ($V_{TH}$).\n- Beyond $V_{TH}$, $I_D$ increases rapidly, indicating the transistor entering saturation.\n- The curve then flattens as $V_{in}$ increases further, approaching the maximum current level determined by $\\frac{V_{DD}}{R_D}$, indicating the transistor is fully on.\n\n4. **Key Features and Technical Details:**\n- The threshold voltage ($V_{TH}$) is a critical point where the drain current begins to increase significantly.\n- The saturation region is characterized by the steep increase in $I_D$.\n- The flat region represents the current limiting by $R_D$ and $V_{DD}$, showing the maximum current capability of the circuit.\n\n5. **Annotations and Specific Data Points:**\n- The threshold voltage ($V_{TH}$) is marked on the x-axis as the point where the curve begins to rise.\n- The dashed line at $\\frac{V_{DD}}{R_D}$ on the y-axis indicates the maximum current level achievable in this configuration.\n\nimage_name:(b)\ndescription:The graph labeled \"(a)\" is a plot representing the transconductance ($g_m$) of a device as a function of the input voltage ($V_{in}$). The x-axis is labeled as $V_{in}$, indicating the input voltage, and the y-axis is labeled as $g_m$, representing the transconductance. Both axes are likely in linear scale, although specific units are not provided.\n\nThe graph starts at the threshold voltage ($V_{TH}$), where the transconductance begins to rise from zero. This point marks the onset of conduction in the device. As the input voltage increases beyond $V_{TH}$, the transconductance $g_m$ increases sharply, reaching a peak at a point marked as $V_{in1}$. This peak is labeled as point 'A' on the graph, indicating the maximum transconductance the device can achieve.\n\nBeyond $V_{in1}$, the transconductance begins to decrease, suggesting a region of reduced efficiency or saturation in the device's operation. The curve exhibits a bell-shaped trend, highlighting a peak transconductance at a specific input voltage, surrounded by regions of lower transconductance on either side.\n\nAnnotations include the marking of $V_{TH}$ on the x-axis, indicating the threshold voltage, and a dashed vertical line at $V_{in1}$, marking the input voltage at which the maximum transconductance occurs. This graph is typical for analyzing the performance characteristics of semiconductor devices, particularly in the context of their amplification capabilities.\n\n#### Nanometer Design Notes\n\nHow does the CS stage behave in nanometer technologies? The figure plots the simulated input-output characteristic for $W / L = 2 \\mu \\text{m} / 40 \\text{nm}$, $R_D = 2 \\text{k} \\Omega$, and $V_{\\text{DD}} = 1 \\text{V}$. We observe that the circuit provides a gain of about 3 in the input range of 0.4 V to 0.6 V. The output swing is limited to about 0.3 V to 0.8 V for the gain not to drop significantly.\nimage_name:Figure 3.5\ndescription:The graph in Figure 3.5 is a plot of the input-output characteristic of a common-source (CS) stage in nanometer technology. The x-axis represents the input voltage, \\( V_{in} \\), in volts (V), ranging from 0 to 1 V. The y-axis represents the output voltage, \\( V_{out} \\), also in volts (V), ranging from 0 to 1 V.\n\nThe graph shows a nonlinear relationship between \\( V_{in} \\) and \\( V_{out} \\). At low input voltages (below approximately 0.4 V), the output voltage remains high, close to the supply voltage of 1 V. As the input voltage increases from 0.4 V to 0.6 V, the output voltage decreases sharply, indicating a region of high gain where the CS stage amplifies the input signal significantly. Beyond 0.6 V, the output voltage levels off, approaching a minimum value around 0.3 V as the input voltage reaches 1 V.\n\nThis behavior reflects the operating regions of the transistor in the CS stage: saturation at low \\( V_{in} \\), a transition region of high gain, and eventually triode operation as \\( V_{in} \\) increases. The gain is noted to be about 3 in the input range of 0.4 V to 0.6 V, and the output swing is limited to about 0.3 V to 0.8 V to maintain significant gain.\n\n#### Example 3.2\n\nA CS stage is driven by a sinusoid, $V_{in} = V_1 \\cos \\omega_1 t + V_0$, where $V_0$ is the bias value and $V_1$ is large enough to drive the transistor into the off and triode regions. Sketch the $g_m$ of the transistor as a function of time.\n\n#### Solution\n\nLet us first sketch the output voltage (Fig. 3.6), noting that when $V_{\\text{in}} = V_1 + V_0$, $V_{\\text{out}}$ is low, $M_1$ is in the triode region, and $g_m$ assumes a small value. As $V_{\\text{in}}$ falls and $V_{\\text{out}}$ and $g_m$ rise, $M_1$ enters saturation at $t = t_1$ (when $V_{\\text{in}} - V_{\\text{out}} = V_{\\text{TH}}$) and $g_m$ reaches its maximum (why?). As $V_{\\text{in}}$ falls further, so do $I_D$ and $g_m$. At $t = t_2$, $g_m$ reaches zero.\n\nWe observe that (a) since the voltage gain is approximately equal to $-g_m R_D$, it experiences the same variation as $g_m$, and (b) $g_m$ varies periodically.\n\nimage_name:Figure 3.6\ndescription:The graph in Figure 3.6 illustrates three separate time-domain waveforms associated with a common-source amplifier circuit. Each waveform is plotted against the same horizontal time axis (t), which is linear.\n\n1. **Top Graph (Vin):**\n   - **Type**: Time-domain waveform.\n   - **Axes Labels**: The vertical axis represents the input voltage \\(V_{in}\\), with significant levels marked as \\(V_1 + V_0\\) and \\(V_0\\).\n   - **Behavior and Trends**: The waveform shows a sinusoidal pattern, oscillating between \\(V_1 + V_0\\) and below \\(V_0\\). This indicates a periodic input voltage with a peak-to-peak variation.\n\n2. **Middle Graph ("
},
{
    "text": "A MOSFET's transconductance enables it to transform variations in the gate-source voltage into a proportional small-signal drain current, which, when passing through a resistor, produces an output voltage. As depicted in Fig. 3.4(a), this is the function of the common-source stage. We examine both the large-signal and small-signal behaviors of this circuit. It's worth noting that the input impedance is particularly high at low frequencies.\n\nWhen the input voltage starts from zero, transistor $M_1$ is off, and the output voltage $V_{\\text{out}}$ equals the supply voltage $V_{\\text{DD}}$ (see Fig. 3.4(b)). As the input voltage $V_{\\text{in}}$ nears the threshold voltage $V_{\\text{TH}}$, $M_1$ starts to conduct, sourcing current from $R_D$ and decreasing $V_{\\text{out}}$. $M_1$ operates in saturation regardless of the $V_{\\text{DD}}$ and $R_D$ values, leading to the following equation:\n\n$$\nV_{\\text{out}} = V_{\\text{DD}} - R_D \\frac{1}{2} \\mu_n C_{ox} \\frac{W}{L}(V_{\\text{in}} - V_{\\text{TH}})^2\n$$\n\nHere, channel-length modulation is ignored. As $V_{\\text{in}}$ increases further, $V_{\\text{out}}$ continues to drop, with the transistor remaining in saturation until $V_{\\text{in}}$ surpasses $V_{\\text{out}}$ by $V_{\\text{TH}}$ (point A in Fig. 3.4(b)). At this juncture, the following equation applies:\n\n$$\nV_{\\text{in1}} - V_{\\text{TH}} = V_{\\text{DD}} - R_D \\frac{1}{2} \\mu_n C_{ox} \\frac{W}{L}(V_{\\text{in1}} - V_{\\text{TH}})^2\n$$\n\nFrom this, $V_{\\text{in1}} - V_{\\text{TH}}$ and thus $V_{\\text{out}}$ can be determined. When $V_{\\text{in}} > V_{\\text{in1}}$, $M_1$ operates in the triode region, governed by:\n\n$$\nV_{\\text{out}} = V_{\\text{DD}} - R_D \\frac{1}{2} \\mu_n C_{ox} \\frac{W}{L}[2(V_{\\text{in}} - V_{\\text{TH}}) V_{\\text{out}} - V_{\\text{out}}^2]\n$$\n\nThe circuit described in the context features an NMOS transistor $M_1$ and a resistor $R_D$ connected between the supply voltage $V_{\\text{DD}}$ and the drain of $M_1$. The input voltage $V_{\\text{in}}$ is applied to the gate of $M_1$, with the output voltage $V_{\\text{out}}$ taken from the drain.\n\nThe graph in Fig. 3.4(b) represents the input-output characteristics of a common-source amplifier stage with a MOSFET. It illustrates the relationship between the input voltage ($V_{\\text{in}}$) and the output voltage ($V_{\\text{out}}$) of the circuit.\n\nFor an input voltage high enough to push $M_1$ into the deep triode region where $V_{\\text{out}} \\ll 2(V_{\\text{in}} - V_{\\text{TH}})$, the equivalent circuit in Fig. 3.4(c) yields:\n\n$$\nV_{\\text{out}} = V_{\\text{DD}} \\frac{R_{\\text{on}}}{R_{\\text{on}} + R_D} = \\frac{V_{\\text{DD}}}{1 + \\mu_n C_{ox} \\frac{W}{L} R_D (V_{\\text{in}} - V_{\\text{TH}})}\n$$\n\nIn the triode region, the transconductance decreases, so we usually ensure that $V_{\\text{out}} > V_{\\text{in}} - V_{\\text{TH}}$, keeping the operation to the left of point A in Fig. 3.4(b). The small-signal gain, derived from the slope of the input-output characteristic, is given by:\n\n$$\nA_v = \\frac{\\partial V_{\\text{out}}}{\\partial V_{\\text{in}}} = -R_D \\mu_n C_{ox} \\frac{W}{L} (V_{\\text{in}} - V_{\\text{TH}}) = -g_m R_D\n$$\n\nThis result can be directly obtained by observing that $M_1$ converts an input voltage change $\\Delta V_{\\text{in}}$ into a drain current change $g_m \\Delta V_{\\text{in}}$, and consequently, an output voltage change $-g_m R_D \\Delta V_{\\text{in}}$. The small-signal model in Fig. 3.4(d) arrives at the same conclusion: $V_{\\text{out}} = -g_m V_1 R_D = -g_m V_{\\text{in}} R_D$. It is important to note that, as mentioned in Chapter 2, $V_{\\text{in}}$, $V_1$, and $V_{\\text{out}}$ in this context represent small-signal quantities.\n\nEven though the equation $A_v = -g_m R_D$ is derived for small-signal operation, it implies certain effects for large signal swings. Since $g_m$ varies with the input signal according to $g_m = \\mu_n C_{ox} \\frac{W}{L} (V_{\\text{GS}} - V_{\\text{TH}})$, the circuit's gain changes substantially with the signal level. In essence, if the gain varies significantly with the signal swing, the circuit operates in the large-signal mode, leading to nonlinearity, typically an undesirable effect.\n\nA crucial insight is that to minimize nonlinearity, the gain equation must be weakly dependent on signal-dependent parameters like $g_m$. This concept is further explored in this chapter and Chapter 14.\n\nIn nanometer technologies, the behavior of the CS stage is affected by device dimensions. For instance, a simulated input-output characteristic for a device with $W/L = 2 \\mu \\text{m} / 40 \\text{nm}$, $R_D = 2 \\text{k}\\Omega$, and $V_{\\text{DD}} = 1 \\text{V}$ shows that the circuit provides a gain of about 3 within the 0.4 V to 0.6 V input range, with the output swing limited to about 0.3 V to 0.8 V to maintain significant gain.\n\nTo maximize the voltage gain of a common-source stage, the gain equation can be rewritten to show that increasing $W/L$, $V_{R_D}$, or decreasing $I_D$ can enhance the gain, given constant other parameters. However, there are trade-offs to consider, such as increased device capacitance with larger size and limited voltage swings with higher $V_{R_D}$.\n\nFor large $R_D$ values, the impact of channel-length modulation in $M_1$ becomes significant. By modifying the equation to include this effect, we find that the voltage gain is affected by both the transconductance and the output resistance of the transistor.\n\nIn a circuit with a current source load, which introduces an infinite impedance, the gain is limited by the transistor's output resistance, leading to the intrinsic gain of the transistor, which is the maximum voltage gain achievable with a single device.\n\nIn certain configurations, such as using the bulk of a MOSFET as the controlling terminal, the voltage gain can be determined by the transconductance of the bulk and the load resistor."
},
{
    "text": "A MOSFET's transconductance facilitates the transformation of gate-source voltage variations into small-signal drain current, which, upon flowing through a resistor, produces an output voltage. As depicted in Fig. 3.4(a), the common-source stage executes this process. We examine the circuit's behavior under both large-signal and small-signal conditions, noting its high input impedance at low frequencies.\n\nWhen the input voltage rises from zero, transistor \\( M_1 \\) is off, resulting in \\( V_{\\text{out}} = V_{\\text{DD}} \\) [Fig. 3.4(b)]. As \\( V_{\\text{in}} \\) nears \\( V_{\\text{TH}} \\), \\( M_1 \\) starts to activate, sourcing current from \\( R_{\\text{D}} \\) and diminishing \\( V_{\\text{out}} \\). \\( M_1 \\) operates in saturation irrespective of \\( V_{\\text{DD}} \\) and \\( R_{\\text{D}} \\) values, leading to:\n\n$$\nV_{\\text{out}} = V_{\\text{DD}} - R_{\\text{D}} \\frac{1}{2} \\mu_{n} C_{\\text{ox}} \\frac{W}{L} (V_{\\text{in}} - V_{\\text{TH}})^2 \\tag{3.3}\n$$\n\nChannel-length modulation is disregarded here. With a further increment in \\( V_{\\text{in}} \\), \\( V_{\\text{out}} \\) continues to decline, and the transistor remains in saturation until \\( V_{\\text{in}} \\) surpasses \\( V_{\\text{out}} \\) by \\( V_{\\text{TH}} \\) [point A in Fig. 3.4(b)]. At this juncture:\n\n$$\nV_{\\text{in}1} - V_{\\text{TH}} = V_{\\text{DD}} - R_{\\text{D}} \\frac{1}{2} \\mu_{n} C_{\\text{ox}} \\frac{W}{L} (V_{\\text{in}1} - V_{\\text{TH}})^2 \\tag{3.4}\n$$\n\nFrom this, \\( V_{\\text{in}1} - V_{\\text{TH}} \\) and, consequently, \\( V_{\\text{out}} \\) can be ascertained. For \\( V_{\\text{in}} > V_{\\text{in}1} \\), \\( M_1 \\) is in the triode region:\n\n$$\nV_{\\text{out}} = V_{\\text{DD}} - R_{\\text{D}} \\frac{1}{2} \\mu_{n} C_{\\text{ox}} \\frac{W}{L} [2(V_{\\text{in}} - V_{\\text{TH}}) V_{\\text{out}} - V_{\\text{out}}^2] \\tag{3.5}\n$$\n\n---[End of Rephrased Text]---"
},
{
    "text": "In certain CMOS technologies, it is challenging to create resistors with precise values or a compact physical size (refer to Chapter 19). As a result, there is a preference for substituting $R_{D}$ in Fig. 3.4(a) with a MOS transistor.\n\nA MOSFET can function as a small-signal resistor when its gate and drain are connected [as seen in Fig. 3.10(a)]. This setup, known as a \"diode-connected\" device, mirrors the behavior of its bipolar counterpart and exhibits small-signal characteristics akin to a two-terminal resistor. It's important to note that the transistor is always in saturation because the drain and gate share the same potential. Utilizing the small-signal equivalent from Fig. 3.10(b) to determine the device's impedance, we derive $V_{1}=V_{X}$ and $I_{X}=V_{X} / r_{O}+g_{m} V_{X}$. This indicates that the impedance of the diode is simply $V_{X} / I_{X}=\\left(1 / g_{m}\\right) \\| r_{O} \\approx 1 / g_{m}$. In the presence of body effect, we can employ the circuit depicted in Fig. 3.11 to write $V_{1}=-V_{X}, V_{b s}=-V_{X}$, and\n\n$$\n\\begin{equation*}\n\\left(g_{m}+g_{m b}\\right) V_{X}+\\frac{V_{X}}{r_{O}}=I_{X} \\tag{3.21}\n\\end{equation*}\n$$\n\nThe provided descriptions of the figures have been transformed into textual descriptions as requested. The descriptions are detailed and provide the necessary information to understand the circuits depicted in the figures."
},
{
    "text": "In certain CMOS processes, the creation of resistors with precise values or a moderate physical size is problematic (refer to Chapter 19). Thus, substituting $R_{D}$ in Figure 3.4(a) with a MOS transistor is advantageous.\n\nA MOSFET can act as a low-noise resistor when its gate and drain are internally shorted [as depicted in Figure 3.10(a)]. Known as a \"diode-connected\" component, akin to its bipolars, this arrangement presents small-signal characteristics akin to a two-terminal resistor. Note that the transistor remains in saturation due to the matching potential of the drain and gate. Utilizing the small-signal equivalent circuit in Figure 3.10(b), we derive the device's impedance, where $V_{1}=V_{X}$ and $I_{X}=V_{X} / r_{O}+g_{m} V_{X}$. This implies that the diode's impedance is merely $V_{X} / I_{X}=1 / (g_{m} r_{O}) \\approx 1 / g_{m}$. If body effect is present, we can apply the circuit shown in Figure 3.11, which yields $V_{1}=-V_{X}, V_{b s}=-V_{X}$, and\n\n$$\n\\begin{equation*}\n\\left(g_{m}+g_{m b}\\right) V_{X}+\\frac{V_{X}}{r_{O}}=I_{X} \\tag{3.21}\n\\end{equation*}\n$$\n\n[Image Description]\n- Figure 3.10(a): Illustrates diode-connected NMOS and PMOS devices, with M1 and M2 both having their gate and drain connected.\n- Figure 3.10(b): Represents the small-signal equivalent circuit of a diode-connected device, incorporating a voltage-controlled current source, a resistor, and two voltage sources.\n- Figure 3.11(a)(b): Portrays the small-signal equivalent circuit of a diode-connected device for analyzing its equivalent resistance, with details provided in the extra information.\n\nIt follows that\n\n$$\n\\begin{align*}\n\\frac{V_{X}}{I_{X}} & =\\frac{1}{g_{m}+g_{m b}+r_{O}^{-1}}  \\tag{3.22}\\\\\n& =\\frac{1}{g_{m}+g_{m b}} \\| r_{O}  \\tag{3.23}\\\\\n& \\approx \\frac{1}{g_{m}+g_{m b}} \\tag{3.24}\n\\end{align*}\n$$\n\nIn general, the impedance at the source of $M_{1}$ is diminished when body effect is accounted for. A more intuitive understanding of this phenomenon can be derived through exercise.\n\nFrom a large-signal perspective, a diode-connected device acts like a \"square-root\" function when the current is considered the input and its $V_{G S}$ or $V_{G S}-V_{T H}$ the output. This aspect will be revisited later.\n\n[Example 3.5]\nIn Figure 3.12(a), consider the circuit. In some scenarios, we are interested in the impedance observed at the source, $R_{X}$. Determine $R_{X}$ under the condition $\\lambda=0$.\n\n[Image Description]\n- Figure 3.12(a): Depicts a common-source amplifier using an NMOS transistor M1, with an inductor ZL and resistor Rx.\n- Figure 3.12(b): Provides a small-signal model to calculate the impedance seen at the source with lambda=0, incorporating voltage sources and current sources.\n\n#### Solution\nTo find $R_{X}$, we deactivate all independent sources, construct the small-signal model as shown in Figure 3.12(b), and apply a test voltage source. Given $V_{1}=-V_{X}$ and $V_{b s}=-V_{X}$, we get\n\n$$\n\\begin{equation*}\n\\left(g_{m}+g_{m b}\\right) V_{X}=I_{X} \\tag{3.25}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\frac{V_{X}}{I_{X}}=\\frac{1}{g_{m}+g_{m b}} \\tag{3.26}\n\\end{equation*}\n\nThis outcome is not unexpected: the configurations in Figures 3.12(a) and 3.11(a) are comparable, except that the drain of $M_{1}$ in Figure 3.12(b) is not grounded for ac signals. This distinction does not surface when $\\lambda=0$. We sometimes express, \"When observing the source of a MOSFET, we encounter $1 / g_{m}$,\" implicitly assuming that $\\lambda=\\gamma=0$.\n\nWe proceed to study a common-source stage equipped with a diode-connected load (Figure 3.13). Assuming negligible channel-length modulation, Equation (3.24) can be utilized in Equation (3.10) for the load impedance, resulting in\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1} \\frac{1}{g_{m 2}+g_{m b 2}}  \\tag{3.27}\\\\\n& =-\\frac{g_{m 1}}{g_{m 2}} \\frac{1}{1+\\eta} \\tag{3.28}\n\\end{align*}\n$$\n\nwhere $\\eta=g_{m b 2} / g_{m 2}$. Expressing $g_{m 1}$ and $g_{m 2}$ in terms of device dimensions and bias currents, we obtain\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{1} I_{D 1}}}{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{2} I_{D 2}}} \\frac{1}{1+\\eta} \\tag{3.29}\n\\end{equation*}\n$$\n\nand, since $I_{D 1}=I_{D 2}$,\n\n$$\n\\begin{equation*}\nA_{v}=-\\sqrt{\\frac{(W / L)_{1}}{(W / L)_{2}}} \\frac{1}{1+\\eta} \\tag{3.30}\n\\end{equation*}\n\nThis equation reveals an intriguing property: if the variation of $\\eta$ with the output voltage is disregarded, the gain is insensitive to the bias currents and voltages (providing $M_{1}$ remains in saturation). Essentially, as the input and output signal levels fluctuate, the gain stays fairly consistent, suggesting a relatively linear input-output characteristic.\n\n[Image Description]\n- Figure 3.13 CS stage with diode-connected load: Illustrates a common-source stage with a diode-connected NMOS load, where M2 acts as a diode load for M1.\n\nThe linear behavior of the circuit can also be validated through large-signal analysis. Ignoring channel-length modulation for simplicity, we have in Figure 3.13\n\n$$\n\\begin{equation*}\n\\frac{1}{2} \\mu_{n} C_{o x}\\left(\\frac{W}{L}\\right)_{1}\\left(V_{i n}-V_{T H 1}\\right)^{2}=\\frac{1}{2} \\mu_{n} C_{o x}\\left(\\frac{W}{L}\\right)_{2}\\left(V_{D D}-V_{o u t}-V_{T H 2}\\right)^{2} \\tag{3.31}\n\\end{equation*}\n$$\n\nand thus\n\n$$\n\\begin{equation*}\n\\sqrt{\\left(\\frac{W}{L}\\right)_{1}}\\left(V_{i n}-V_{T H 1}\\right)=\\sqrt{\\left(\\frac{W}{L}\\right)_{2}}\\left(V_{D D}-V_{\\text {out }}-V_{T H 2}\\right) \\tag{3.32}\n\\end{equation*}\n$$\n\nIf the variation of $V_{T H 2}$ with $V_{\\text {out }}$ is slight, the circuit demonstrates a linear input-output characteristic. Essentially, the squaring function executed by $M_{1}$ (from the input voltage to its drain current) and the square root function carried out by $M_{2}$ (from its drain current to its overdrive) act as $f^{-1}(f(x))=x$.\n\nThe small-signal gain can also be computed by differentiating both sides concerning $V_{i n}$ :\n\n$$\n\\begin{equation*}\n\\sqrt{\\left(\\frac{W}{L}\\right)_{1}}=\\sqrt{\\left(\\frac{W}{L}\\right)_{2}}\\left(-\\frac{\\partial V_{\\text {out }}}{\\partial V_{\\text {in }}}-\\frac{\\partial V_{T H 2}}{\\partial V_{i n}}\\right) \\tag{3.33}\n\\end{equation*}\n$$\n\nwhich, upon application of the chain rule $\\partial V_{T H 2} / \\partial V_{\\text {in }}=\\left(\\partial V_{T H 2} / \\partial V_{\\text {out }}\\right)\\left(\\partial V_{\\text {out }} / \\partial V_{\\text {in }}\\right)=\\eta\\left(\\partial V_{\\text {out }} / \\partial V_{\\text {in }}\\right)$, simplifies to\n\n$$\n\\begin{equation*}\n\\frac{\\partial V_{\\text {out }}}{\\partial V_{\\text {in }}}=-\\sqrt{\\frac{(W / L)_{1}}{(W / L)_{2}}} \\frac{1}{1+\\eta} \\tag{3.34}\n\\end{equation*}\n$$\n\nIt is instructive to examine the overall large-signal characteristic of the circuit as well. However, let us initially ponder the circuit shown in Figure 3.14(a). What is the final value of $V_{\\text {out }}$ if $I_{1}$ diminishes to zero? As $I_{1}$ diminishes, so does the overdrive of $M_{2}$. Consequently, for small $I_{1}$, $V_{G S 2} \\approx V_{T H 2}$ and $V_{\\text {out }} \\approx V_{D D}-V_{T H 2}$. In reality, the subthreshold conduction in $M_{2}$ ultimately brings $V_{\\text {out }}$ to $V_{D D}$ if $I_{D}$ approaches zero, but at very low current levels, the finite capacitance at the output node slows down the transition from $V_{D D}-V_{T H 2}$ to $V_{D D}$. This is depicted in the time-domain waveforms of Figure 3.14(b). For this reason, in circuits that frequently switch, we assume that $V_{\\text {out }}$ remains near $V_{D D}-V_{T H 2}$ when $I_{1}$ is minimal.\n\n[Image Description]\n- Figure 3.14(a): Displays a diode-connected device with stepped bias current, with an NMOS M2 in a diode configuration biased by a current source I1 and featuring a capacitive load Cp.\n- Figure 3.14(b): Illustrates the behavior of a diode-connected NMOS transistor circuit with a stepped bias current, showing time-domain waveforms for bias current $I_1$ and output voltage $V_{out}$.\n\nNow, let us revisit the circuit of Figure 3.13. The output voltage is $V_{D D}-V_{T H 2}$ if $V_{i n}<V_{T H 1}$. For $V_{i n}>V_{T H 1}$, Equation (3.32) applies, and $V_{\\text {out }}$ follows a nearly linear trajectory. When $V_{\\text {in }}$ exceeds $V_{\\text {out }}+V_{T H 1}$ (beyond point A), $M_{1}$ transitions into the triode region, causing nonlinearity.\n\n[Image Description]\n- Figure 3.15 Input-output characteristic of a CS stage with diode-connected load: Depicts the input-output characteristic of a common-source (CS) stage with a diode-connected load, representing the voltage transfer characteristic.\n\nThe diode-connected load in Figure 3.13 can be implemented using a PMOS device as well. As depicted in Figure 3.16, the circuit is devoid of body effect, providing a small-signal voltage gain of\n\n$$\n\\begin{equation*}\nA_{v}=-\\sqrt{\\frac{\\mu_{n}(W / L)_{1}}{\\mu_{p}(W / L)_{2}}} \\tag{3.35}\n\\end{equation*}\n\nassuming channel-length modulation is ignored.\n\n[Image Description]\n- Figure 3.16 CS stage with diode-connected PMOS device: Shows a common-source (CS) stage with a diode-connected PMOS load, where M2 is diode-connected to serve as a load for M1.\n\nEquations (3.30) and (3.35) indicate that the gain of a common-source stage with a diode-connected load is a weak function of the device dimensions. For instance, to achieve a gain of 5, $\\mu_{n}(W / L)_{1} /\\left[\\mu_{p}(W / L)_{2}\\right]=25$, suggesting that, with $\\mu_{n} \\approx 2 \\mu_{p}$, we must have $(W / L)_{1} \\approx 12.5(W / L)_{2}$. In essence, a high gain necessitates a \"strong\" input device and a \"weak\" load device. Furthermore, a high gain translates to another significant limitation: reduced allowable voltage swings. Specifically, in Figure 3.16, $I_{D 1}=\\left|I_{D 2}\\right|$,\n\n$$\n\\begin{equation*}\n\\mu_{n}\\left(\\frac{W}{L}\\right)_{1}\\left(V_{G S 1}-V_{T H 1}\\right)^{2}=\\mu_{p}\\left(\\frac{W}{L}\\right)_{2}\\left(V_{G S 2}-V_{T H 2}\\right)^{2} \\tag{3.36}\n\\end{equation*}\n$$\n\nif $\\lambda=0$, revealing that\n\n#### Nanometer Design Notes\nLet us design and simulate a CS stage with a diode-connected PMOS load in a $40-\\mathrm{nm}$ technology. We choose $W / L=$ $5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ for the NMOS device and $1 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ for the PMOS device. The large-signal I-V characteristic is shown in the figure. We observe that the circuit provides a small-signal gain of approximately 1.5 for an input range of roughly 0.4 V to 0.5 V. (In this dc sweep, $V_{\\text {out }}$ can reach $V_{D D}$ when the input transistor is off.)\n\n[Image Description]\n- large-signal I-V characteristic: Illustrates the large-signal I-V characteristic plot, used to depict the relationship between input and output voltages in a transistor circuit.\n\nIn the above example, the overdrive voltage of $M_{2}$ must be 5 times that of $M_{1}$. For example, with $V_{G S 1}-V_{T H 1}=100 \\mathrm{mV}$ and $\\left|V_{T H 2}\\right|=0.3 \\mathrm{~V}$, we have $\\left|V_{G S 2}\\right|=0.8 \\mathrm{~V}$, severely limiting the output swing. This exemplifies the trade-offs proposed by the analog design octagon. Note that, with diode-connected loads, the swing is constrained by both the required overdrive voltage and the threshold voltage. Thus, even with a small overdrive, the output level cannot exceed $V_{D D}-\\left|V_{T H}\\right|$.\n\nAn intriguing paradox arises here if we write $g_{m}=\\mu C_{o x}(W / L)$ $V_{G S}-V_{T H} \\mid$. The voltage gain of the circuit is then given by\n\n$$\n\\begin{align*}\n\\left|A_{v}\\right| & =\\frac{g_{m 1}}{g_{m 2}}  \\tag{3.38}\\\\\n& =\\frac{\\mu_{n} C_{o x}(W / L)_{1}\\left(V_{G S 1}-V_{T H 1}\\right)}{\\mu_{p} C_{o x}(W / L)_{2}\\left|V_{G S 2}-V_{T H 2}\\right|} \\tag{3.39}\n\\end{align*}\n$$\n\nEquation (3.39) suggests that $A_{v}$ is inversely proportional to $\\left|V_{G S 2}-V_{T H 2}\\right|$. It remains for the reader to resolve the seemingly contradictory trends suggested by (3.37) and (3.39).\n\n#### Example 3.6\nIn the circuit of Figure 3.17, $M_{1}$ is biased in saturation with a drain current equal to $I_{1}$. The current source $I_{S}=0.75 I_{1}$ is added to the circuit. How is (3.37) modified for this case? Assume $\\lambda=0$.\n\n[Image Description]\n- Figure 3.17: Shows a typical cascode amplifier with NMOS M1 and PMOS M2, with a current source IS and another current source I1.\n\n#### Solution\nSince $\\left|I_{D 2}\\right|=I_{1} / 4$, we have\n\n$$\n\\begin{align*}\nA_{v} & =-\\frac{g_{m 1}}{g_{m 2}}  \\tag{3.40}\\\\\n& =-\\sqrt{\\frac{4 \\mu_{n}(W / L)_{1}}{\\mu_{p}(W / L)_{2}}} \\tag{3.41}\n\\end{align*}\n\nMoreover,\n\n$$\n\\begin{equation*}\n\\mu_{n}\\left(\\frac{W}{L}\\right"
},
{
    "text": "In certain CMOS designs, creating resistors with precise resistances or practical dimensions can be challenging (refer to Chapter 19). Therefore, it is preferable to substitute $R_{D}$ from Figure 3.4(a) with a MOSFET.\n\nA MOSFET can function as a small-signal resistor when its gate and drain are short-circuited [refer to Figure 3.10(a)]. This configuration, akin to its bipolar cousin, behaves similarly to a two-terminal resistor in terms of small-signal characteristics. Note that the transistor remains in saturation due to equal potential at the drain and gate. Using the small-signal equivalent circuit depicted in Figure 3.10(b), we find the device's impedance by writing $V_{1}=V_{X}$ and $I_{X}=V_{X} / r_{O}+g_{m} V_{X}$. This implies the diode's impedance is simply $V_{X} / I_{X}=1 / g_{m} r_{O} \\approx 1 / g_{m}$. If the body effect is present, we can utilize the circuit in Figure 3.11 to write $V_{1}=-V_{X}, V_{b s}=-V_{X}$, and\n\n$$\n\\begin{equation*}\n\\left(g_{m}+g_{m b}\\right) V_{X}+\\frac{V_{X}}{r_{O}}=I_{X} \\tag{3.21}\n\\end{equation*}\n$$\n\n[Image description: Figure 3.10 (a)] The image depicts diode-connected NMOS and PMOS devices, with M1 and M2 connected such that their gates and drains are shorted together.\n\n[Image description: Figure 3.10 (b)] This image shows a small-signal equivalent circuit of a diode-connected device, including a voltage-controlled current source, a resistor, and two voltage sources.\n\n[Image description: Figure 3.11 (a)(b)] The image illustrates a small-signal equivalent circuit for analyzing the equivalent resistance of a diode-connected MOSFET, featuring a voltage-controlled current source, a resistor, and two voltage sources.\n\n[Image description: Figure 3.11 (a)] This is the arrangement for measuring the equivalent resistance of a diode-connected MOSFET.\n\n[Image description: Figure 3.11 (b)] This represents the small-signal equivalent circuit of a diode-connected MOSFET.\n\nIt follows that\n\n$$\n\\begin{align*}\n\\frac{V_{X}}{I_{X}} & =\\frac{1}{g_{m}+g_{m b}+r_{O}^{-1}}  \\tag{3.22}\\\\\n& =\\frac{1}{g_{m}+g_{m b}} \\| r_{O}  \\tag{3.23}\\\\\n& \\approx \\frac{1}{g_{m}+g_{m b}} \\tag{3.24}\n\\end{align*}\n$$\n\nIn general, $V_{X} / I_{X}=\\left(1 / g_{m}\\right)\\left\\|r_{O}\\right\\|\\left(1 / g_{m b}\\right)$. Curiously, the impedance observed at the source of $M_{1}$ decreases when the body effect is considered. An intuitive explanation of this phenomenon is an exercise for the reader.\n\nFrom a large-signal perspective, a diode-connected device acts as a \"square-root\" operator if the input is its current and the output is its $V_{G S}$ or $V_{G S}-V_{T H}$ (exploration to follow). We will return to this concept later.\n\n#### Example 3.5\n\nExamine the circuit in Figure 3.12(a). In some scenarios, we are interested in the impedance observed at the source, $R_{X}$. Determine $R_{X}$ if $\\lambda=0$.\n\n[Image description: Figure 3.12(a)] This circuit is a common-source amplifier with an NMOS transistor M1, featuring an inductor ZL between VDD and the output node Vout and a resistor Rx from Vout to ground.\n\n[Image description: Figure 3.12(b)] The image shows a small-signal model of the circuit to determine the impedance seen at the source with lambda=0, including voltage sources V1 and Vx, current sources gmV1 and gmbVbs, and a resistor ZL.\n\n#### Solution\n\nTo determine $R_{X}$, we set all independent sources to zero, create the small-signal model, and apply a voltage source as depicted in Figure 3.12(b). Since $V_{1}=-V_{X}$ and $V_{b s}=-V_{X}$, we obtain\n\n$$\n\\begin{equation*}\n\\left(g_{m}+g_{m b}\\right) V_{X}=I_{X} \\tag{3.25}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\frac{V_{X}}{I_{X}}=\\frac{1}{g_{m}+g_{m b}} \\tag{3.26}\n\\end{equation*}\n$$\n\nThis outcome is not surprising: the configurations in Figure 3.12(a) and Figure 3.11(a) are comparable, except that the drain of $M_{1}$ in Figure 3.12(b) is not at AC ground. This distinction does not impact the result if $\\lambda=0$. We sometimes say, \"when observing the source of a MOSFET, we see $1 / g_{m}$,\" assuming $\\lambda=\\gamma=0$ implicitly.\n\nWe now examine a common-source stage with a diode-connected load (Figure 3.13). Neglecting channel-length modulation, (3.24) can replace (3.10) for the load impedance, leading to\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1} \\frac{1}{g_{m 2}+g_{m b 2}}  \\tag{3.27}\\\\\n& =-\\frac{g_{m 1}}{g_{m 2}} \\frac{1}{1+\\eta} \\tag{3.28}\n\\end{align*}\n$$\n\nwhere $\\eta=g_{m b 2} / g_{m 2}$. Expressing $g_{m 1}$ and $g_{m 2}$ in terms of device dimensions and bias currents, we have\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{1} I_{D 1}}}{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{2} I_{D 2}}} \\frac{1}{1+\\eta} \\tag{3.29}\n\\end{equation*}\n$$\n\nand, since $I_{D 1}=I_{D 2}$,\n\n$$\n\\begin{equation*}\nA_{v}=-\\sqrt{\\frac{(W / L)_{1}}{(W / L)_{2}}} \\frac{1}{1+\\eta} \\tag{3.30}\n\\end{equation*}\n$$\n\nThis equation reveals an intriguing property: if the variation of $\\eta$ with the output voltage is disregarded, the gain is independent of bias currents and voltages (assuming $M_{1}$ remains in saturation). In other words, as input and output signal levels change, the gain remains relatively stable, suggesting a relatively linear input-output characteristic.\n[Image description: Figure 3.13 CS stage with diode-connected load] This image represents a common-source (CS) stage with a diode-connected NMOS load (M2). The input is applied to the gate of M1, and the output is taken from the drain of M1. M2 is configured as a diode, acting as a load for M1."
},
{
    "text": "In certain CMOS processes, it's challenging to produce resistors with precise values and compact physical dimensions (refer to Chapter 19). As a result, it's preferable to substitute $R_{D}$ in Fig. 3.4(a) with a MOSFET.\n\nWhen a MOSFET's gate and drain are connected, it functions as a small-signal resistor [refer to Fig. 3.10(a)]. This configuration, reminiscent of its bipolar equivalent, is termed \"diode-connected\" and exhibits small-signal characteristics akin to a two-terminal resistor. The transistor is always in saturation due to the equal potential at the drain and gate. Utilizing the small-signal equivalent circuit depicted in Fig. 3.10(b), the device's impedance is determined by setting $V_{1}=V_{X}$ and $I_{X}=V_{X} / r_{O}+g_{m} V_{X}$. Hence, the diode's impedance is simply $V_{X} / I_{X}=\\left(1 / g_{m}\\right) \\| r_{O} \\approx 1 / g_{m}$. In the presence of body effect, the circuit in Fig. 3.11 allows us to write $V_{1}=-V_{X}, V_{b s}=-V_{X}$, and the equation:\n\n$$\n\\begin{equation*}\n\\left(g_{m}+g_{m b}\\right) V_{X}+\\frac{V_{X}}{r_{O}}=I_{X} \\tag{3.21}\n\\end{equation*}\n$$\n\nFigure 3.10(a) depicts diode-connected NMOS and PMOS devices, with M1 and M2 having their gates and drains connected. Figure 3.10(b) represents the small-signal equivalent of a diode-connected device, featuring a voltage-controlled current source, a resistor, and two voltage sources.\n\nFigure 3.11(a) and (b) show a circuit used to analyze the equivalent resistance of a diode-connected MOSFET, including a voltage-controlled current source, a resistor, and two voltage sources. The analysis leads to the equations:\n\n$$\n\\begin{align*}\n\\frac{V_{X}}{I_{X}} & =\\frac{1}{g_{m}+g_{m b}+r_{O}^{-1}}  \\tag{3.22}\\\\\n& =\\frac{1}{g_{m}+g_{m b}} \\| r_{O}  \\tag{3.23}\\\\\n& \\approx \\frac{1}{g_{m}+g_{m b}} \\tag{3.24}\n\\end{align*}\n$$\n\nThe general case yields $V_{X} / I_{X}=\\left(1 / g_{m}\\right)\\left\\|r_{O}\\right\\|\\left(1 / g_{m b}\\right)$, with the impedance at the source of $M_{1}$ decreasing when body effect is considered. An intuitive explanation for this phenomenon is left for the reader to explore.\n\nFrom a large-signal perspective, a diode-connected device acts as a \"square-root\" operator if its current is the input and $V_{G S}$ or $V_{G S}-V_{T H}$ is the output. This concept will be revisited later.\n\n#### Example 3.5\n\nReferring to Fig. 3.12(a), we are interested in determining the impedance $R_{X}$ seen looking into the source when $\\lambda=0$.\n\nFigure 3.12(b) illustrates the small-signal model with a voltage source applied as described. With $V_{1}=-V_{X}$ and $V_{b s}=-V_{X}$, we derive:\n\n$$\n\\begin{equation*}\n\\left(g_{m}+g_{m b}\\right) V_{X}=I_{X} \\tag{3.25}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\frac{V_{X}}{I_{X}}=\\frac{1}{g_{m}+g_{m b}} \\tag{3.26}\n\\end{equation*}\n$$\n\nThis outcome is expected, as the topologies in Fig. 3.12(a) and Fig. 3.11(a) are similar, except for the drain of $M_{1}$ not being at ac ground in Fig. 3.12(b). This distinction is irrelevant when $\\lambda=0$. It is often stated that \"looking into the source of a MOSFET, we see $1 / g_{m}$,\" implicitly assuming $\\lambda=\\gamma=0$.\n\nA common-source stage with a diode-connected load is examined next (Fig. 3.13). Neglecting channel-length modulation, equation (3.24) can be used in (3.10) for the load impedance, resulting in:\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1} \\frac{1}{g_{m 2}+g_{m b 2}}  \\tag{3.27}\\\\\n& =-\\frac{g_{m 1}}{g_{m 2}} \\frac{1}{1+\\eta} \\tag{3.28}\n\\end{align*}\n$$\n\nwhere $\\eta=g_{m b 2} / g_{m 2}$. Expressing $g_{m 1}$ and $g_{m 2}$ in terms of device dimensions and bias currents, we obtain:\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{1} I_{D 1}}}{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{2} I_{D 2}}} \\frac{1}{1+\\eta} \\tag{3.29}\n\\end{equation*}\n$$\n\nSince $I_{D 1}=I_{D 2}$,\n\n$$\n\\begin{equation*}\nA_{v}=-\\sqrt{\\frac{(W / L)_{1}}{(W / L)_{2}}} \\frac{1}{1+\\eta} \\tag{3.30}\n\\end{equation*}\n$$\n\nThis equation reveals that the gain is independent of bias currents and voltages, provided $M_{1}$ remains in saturation. Thus, the gain remains relatively constant as input and output signal levels vary, indicating a linear input-output characteristic.\n\nThe linear behavior of the circuit can also be confirmed through large-signal analysis. Neglecting channel-length modulation, the equation in Fig. 3.13 is:\n\n$$\n\\begin{equation*}\n\\frac{1}{2} \\mu_{n} C_{o x}\\left(\\frac{W}{L}\\right)_{1}\\left(V_{i n}-V_{T H 1}\\right)^{2}=\\frac{1}{2} \\mu_{n} C_{o x}\\left(\\frac{W}{L}\\right)_{2}\\left(V_{D D}-V_{o u t}-V_{T H 2}\\right)^{2} \\tag{3.31}\n\\end{equation*}\n$$\n\nwhich simplifies to:\n\n$$\n\\begin{equation*}\n\\sqrt{\\left(\\frac{W}{L}\\right)_{1}}\\left(V_{i n}-V_{T H 1}\\right)=\\sqrt{\\left(\\frac{W}{L}\\right)_{2}}\\left(V_{D D}-V_{\\text {out }}-V_{T H 2}\\right) \\tag{3.32}\n\\end{equation*}\n$$\n\nThus, if the variation of $V_{T H 2}$ with $V_{\\text {out }}$ is small, the circuit exhibits a linear input-output characteristic. The squaring function of $M_{1}$ and the square root function of $M_{2}$ effectively cancel each other out.\n\nThe small-signal gain can be calculated by differentiating both sides with respect to $V_{i n}$:\n\n$$\n\\begin{equation*}\n\\sqrt{\\left(\\frac{W}{L}\\right)_{1}}=\\sqrt{\\left(\\frac{W}{L}\\right)_{2}}\\left(-\\frac{\\partial V_{\\text {out }}}{\\partial V_{\\text {in }}}-\\frac{\\partial V_{T H 2}}{\\partial V_{i n}}\\right) \\tag{3.33}\n\\end{equation*}\n$$\n\nApplying the chain rule, this reduces to:\n\n$$\n\\begin{equation*}\n\\frac{\\partial V_{\\text {out }}}{\\partial V_{\\text {in }}}=-\\sqrt{\\frac{(W / L)_{1}}{(W / L)_{2}}} \\frac{1}{1+\\eta} \\tag{3.34}\n\\end{equation*}\n$$\n\nThe overall large-signal characteristic of the circuit is also worth studying. Consider the circuit in Fig. 3.14(a). What is the final value of $V_{\\text {out }}$ if $I_{1}$ drops to zero? As $I_{1}$ decreases, so does the overdrive of $M_{2}$. Thus, for small $I_{1}, V_{G S 2} \\approx V_{T H 2}$ and $V_{\\text {out }} \\approx V_{D D}-V_{T H 2}$. In reality, subthreshold conduction in $M_{2}$ eventually raises $V_{\\text {out }}$ to $V_{D D}$ if $I_{D}$ approaches zero, but at very low current levels, the finite capacitance at the output node slows down the change from $V_{D D}-V_{T H 2}$ to $V_{D D}$. This is illustrated in the time-domain waveforms of Fig. 3.14(b). For this reason, in circuits with frequent switching activity, we assume that $V_{\\text {out }}$ remains around $V_{D D}-V_{T H 2}$ when $I_{1}$ falls to small values.\n\nReturning to the circuit of Fig. 3.13, the input-output characteristic plotted in Fig. 3.15 versus $V_{i n}$ shows that the output voltage equals $V_{D D}-V_{T H 2}$ if $V_{i n}<V_{T H 1}$. For $V_{i n}>V_{T H 1}$, equation (3.32) holds, and $V_{\\text {out }}$ follows an approximately straight line. Beyond point A, where $V_{i n}$ exceeds $V_{\\text {out }}+V_{T H 1}$, $M_{1}$ enters the triode region, and the characteristic becomes nonlinear.\n\nThe diode-connected load in Fig. 3.13 can also be implemented with a PMOS device, as shown in Fig. 3.16. This circuit is free from body effect and provides a small-signal voltage gain of:\n\n$$\n\\begin{equation*}\nA_{v}=-\\sqrt{\\frac{\\mu_{n}(W / L)_{1}}{\\mu_{p}(W / L)_{2}}} \\tag{3.35}\n\\end{equation*}\n$$\n\nNeglecting channel-length modulation.\n\nEquations (3.30) and (3.35) suggest that the gain of a common-source stage with a diode-connected load is relatively insensitive to device dimensions. For instance, achieving a gain of 5 requires $\\mu_{n}(W / L)_{1} /\\left[\\mu_{p}(W / L)_{2}\\right]=25$, implying $(W / L)_{1} \\approx 12.5(W / L)_{2}$ with $\\mu_{n} \\approx 2 \\mu_{p}$. High gain necessitates a \"strong\" input device and a \"weak\" load device. High gain also constrains allowable voltage swings. Specifically, since in Fig. 3.16, $I_{D 1}=\\left|I_{D 2}\\right|$, the equation:\n\n$$\n\\begin{equation*}\n\\mu_{n}\\left(\\frac{W}{L}\\right)_{1}\\left(V_{G S 1}-V_{T H 1}\\right)^{2}=\\mu_{p}\\left(\\frac{W}{L}\\right)_{2}\\left(V_{G S 2}-V_{T H 2}\\right)^{2} \\tag{3.36}\n\\end{equation*}\n$$\n\nif $\\lambda=0$, reveals that:\n\n$$\n\\begin{equation*}\n\\frac{\\left|V_{G S 2}-V_{T H 2}\\right|}{V_{G S 1}-V_{T H 1}}=A_{v} \\tag{3.37}\n\\end{equation*}\n$$\n\nIn the example provided, the overdrive voltage of $M_{2}$ must be 5 times that of $M_{1}$. For example, with $V_{G S 1}-V_{T H 1}=100 \\mathrm{mV}$ and $\\left|V_{T H 2}\\right|=0.3 \\mathrm{~V}$, we have $\\left|V_{G S 2}\\right|=0.8 \\mathrm{~V}$, severely limiting the output swing. This trade-off is another example of the analog design octagon. With diode-connected loads, the swing is limited by both the required overdrive voltage and the threshold voltage. Even with a small overdrive, the output level cannot exceed $V_{D D}-\\left|V_{T H}\\right|$.\n\nAn interesting paradox arises when considering $g_{m}=\\mu C_{o x}(W / L)$ $V_{G S}-V_{T H} \\mid$. The voltage gain of the circuit is then given by:\n\n$$\n\\begin{align*}\n\\left|A_{v}\\right| & =\\frac{g_{m 1}}{g_{m 2}}  \\tag{3.38}\\\\\n& =\\frac{\\mu_{n} C_{o x}(W / L)_{1}\\left(V_{G S 1}-V_{T H 1}\\right)}{\\mu_{p} C_{o x}(W / L)_{2}\\left|V_{G S 2}-V_{T H 2}\\right|} \\tag{3.39}\n\\end{align*}\n$$\n\nEquation (3.39) implies that $A_{v}$ is inversely proportional to $\\left|V_{G S 2}-V_{T H 2}\\right|$. The seemingly contradictory trends suggested by (3.37) and (3.39) are left for the reader to resolve.\n\n#### Example 3.6\n\nIn the circuit of Fig. 3.17, $M_{1}$ is biased in saturation with a drain current equal to $I_{1}$. The current source $I_{S}=0.75 I_{1}$ is added to the circuit. How does (3.37) change in this case? Assume $\\lambda=0$.\n\nThe solution is derived as follows:\n\nSince $\\left|I_{D 2}\\right|=I_{1} / 4$, we have:\n\n$$\n\\begin{align*}\nA_{v} & =-\\frac{g_{m 1}}{g_{m 2}}  \\tag{3.40}\\\\\n& =-\\sqrt{\\frac{4 \\mu_{n}(W / L)_{1}}{\\mu_{p}(W / L)_{2}}} \\tag{3.41}\n\\end{align*}\n$$\n\nMoreover,\n\n$$\n\\begin{equation*}\n\\mu_{n}\\left(\\frac{W}{L}\\right)_{1}\\left(V_{G S 1}-V_{T H 1}\\right)^{2}=4 \\mu_{p}\\left(\\frac{W}{L}\\right)_{2}\\left(V_{G S 2}-V_{T H 2}\\right)^{2} \\tag{3.42}\n\\end{equation*}\n$$\n\nyielding:\n\n$$\n\\begin{equation*}\n\\frac{\\left|V_{G S 2}-V_{T H 2}\\right|}{V_{G S 1}-V_{T H 1}}=\\frac{A_{v}}{4} \\tag{3.43}\n\\end{equation*}\n$$\n\nThus, for a gain of 5, the overdrive of $M_{2}$ need only be 1.25 times that of $M_{1}$. Alternatively, for a given overdrive voltage, this circuit achieves a gain four times that of the stage in Fig. 3.16. Intuitively, this is because for a given $\\left|V_{G S 2}-V_{T H 2}\\right|$, if the current decreases by a factor of 4, then $(W / L)_{2}$ must decrease proportionally, and $g_{m 2}=\\sqrt{2 \\mu_{p} C_{o x}(W / L)_{2} I_{D 2}}$ is lowered by the same factor.\n\n#### Example 3.7\n\nA student attempts to calculate the voltage gain in the previous example by differentiating both sides of (3.42). Does this approach yield a correct result? Why?\n\nThe solution is as follows:\n\nSince $V_{G S 2}=V_{\\text {out }}-V_{D D}$, differentiation and multiplication by $C_{o x}$ yield:\n\n$$\n\\begin{equation*}\n\\mu_{n} C_{o x}\\left(\\frac{W}{L}\\right)_{1}\\left(V_{\\text {in }}-V_{T H 1}\\right)^{2}=4 \\mu_{p} C_{o x}\\left(\\frac{W}{L}\\right)_{2}\\left(V_{\\text {out }}-V_{D D}-V_{T H 2}\\right) \\frac{\\partial V_{\\text {out }}}{\\partial V_{\\text {in }}} \\tag{3.44}\n\\end{equation*}\n$$\n\nThis leads to $\\partial V_{\\text {out }} / \\partial V_{\\text {in }}=-g_{m 1} /\\left(4 g_{m 2}\\right)$. This incorrect result occurs because (3.42) is valid for only one value of $V_{i n}$. As $V_{i n}$ is perturbed by the signal, $I_{1}$ departs from $4\\left|I_{D 2}\\right|$"
},
{
    "text": "In certain CMOS processes, creating resistors with precise values and compact physical dimensions is challenging (refer to Chapter 19). As a result, substituting $R_{D}$ in Figure 3.4(a) with a MOS transistor is advantageous.\n\nA MOSFET can function as a small-signal resistor when its gate and drain are short-circuited (Figure 3.10(a)). This setup, analogous to its bipolar equivalent, is termed \"diode-connected\" and exhibits small-signal characteristics similar to a two-terminal resistor. It's important to note that the transistor operates in saturation since the drain and gate share the same potential. Utilizing the small-signal equivalent circuit depicted in Figure 3.10(b) to determine the device's impedance, we derive $V_{1}=V_{X}$ and $I_{X}=V_{X} / r_{O}+g_{m} V_{X}$. Hence, the diode's impedance is simply $V_{X} / I_{X}=\\left(1 / g_{m}\\right) \\| r_{O} \\approx 1 / g_{m}$. If body effect is present, we can refer to the circuit in Figure 3.11 and write $V_{1}=-V_{X}$, $V_{b s}=-V_{X}$, and\n\n$$\n\\begin{equation*}\n\\left(g_{m}+g_{m b}\\right) V_{X}+\\frac{V_{X}}{r_{O}}=I_{X} \\tag{3.21}\n\\end{equation*}\n$$\n\nThe diagrams in Figure 3.10 (a) illustrate diode-connected NMOS and PMOS devices, with each transistor's gate and drain connected. Figure 3.10 (b) represents a small-signal equivalent of a diode-connected device, including a voltage-controlled current source, a resistor, and two voltage sources. Figure 3.11 (a)(b) shows a small-signal equivalent circuit for analyzing the equivalent resistance of a diode-connected MOSFET.\n\nThe subsequent equations demonstrate that the impedance observed at the source of $M_{1}$ decreases when body effect is considered. The large-signal behavior of a diode-connected device can be likened to a \"square-root\" operator, with current as input and $V_{G S}$ or $V_{G S}-V_{T H}$ as output.\n\nExample 3.5 involves determining the impedance looking into the source, $R_{X}$, for a circuit with $\\lambda=0$. Figure 3.12(a) presents the circuit, and Figure 3.12(b) shows the small-signal model with a test voltage source applied.\n\nThe solution reveals that the impedance is $\\frac{1}{g_{m}+g_{m b}}$, which is consistent with the topology of the circuits in Figures 3.12(a) and 3.11(a). The analysis assumes $\\lambda=\\gamma=0$.\n\nFigure 3.13 depicts a common-source stage with a diode-connected load. The gain derived from the small-signal model is independent of bias currents and voltages, indicating a relatively linear input-output characteristic.\n\nLarge-signal analysis confirms the linear behavior, with the equation showing that the circuit acts as the inverse function of itself. The small-signal gain can also be derived by differentiating the large-signal equation with respect to $V_{i n}$.\n\nFigure 3.14(a) presents a circuit with a diode-connected NMOS and a stepped bias current. The output voltage's behavior is illustrated in Figure 3.14(b), showing the capacitive load's effect on the output response.\n\nFigure 3.15 plots the input-output characteristic of the CS stage with a diode-connected load, highlighting the linear region and the transition to nonlinearity as $V_{i n}$ exceeds $V_{\\text {out }}+V_{T H 1}$.\n\nFigure 3.16 shows a CS stage with a diode-connected PMOS load, which is free from body effect and provides a small-signal voltage gain.\n\nThe gain derived from the circuit in Figure 3.16 is a function of the device dimensions, and the equation indicates that a high gain requires a \"strong\" input device and a \"weak\" load device.\n\nExample 3.6 involves a circuit with an additional current source $I_{S}$, and the modified equation for the voltage gain is derived. The result shows that for a gain of 5, the overdrive of $M_{2}$ is only 1.25 times that of $M_{1}$.\n\nExample 3.7 discusses the incorrect approach of differentiating both sides of the large-signal equation to calculate the voltage gain. The error arises because the equation is only valid for one specific value of $V_{i n}$.\n\nFinally, considering channel-length modulation and the deviation from the square law in modern CMOS technology, the gain of the stage in Figure 3.13 must be expressed with the transconductances and output resistances as described in Chapter 17."
},
{
    "text": "In select CMOS technologies, the challenge lies in crafting resistors with precise values and compact physical dimensions (refer to Chapter 19). Therefore, substituting $R_{D}$ in Fig. 3.4(a) with a MOS transistor is a preferable approach.\n\nWhen a MOSFET's gate and drain are interconnected, as depicted in Fig. 3.10(a), it functions as a small-signal resistor. This setup, akin to its bipolar counterpart, is termed a \"diode-connected\" device and mimics the behavior of a two-terminal resistor. It's important to note that the transistor operates in saturation due to the drain and gate sharing the same potential. Utilizing the small-signal equivalent circuit in Fig. 3.10(b) to derive the device's impedance, we set $V_{1}=V_{X}$ and $I_{X}=V_{X} / r_{O}+g_{m} V_{X}$. Hence, the impedance of the diode is simply $V_{X} / I_{X}=\\left(1 / g_{m}\\right) \\| r_{O} \\approx 1 / g_{m}$. In the presence of body effect, the circuit in Fig. 3.11 allows us to write $V_{1}=-V_{X}, V_{b s}=-V_{X}$, and\n\n$$\n\\begin{equation*}\n\\left(g_{m}+g_{m b}\\right) V_{X}+\\frac{V_{X}}{r_{O}}=I_{X} \\tag{3.21}\n\\end{equation*}\n$$\n\nFor a comprehensive understanding, please refer to the figures mentioned, which illustrate the circuits and components described.\n\nIn a broader perspective, a diode-connected device behaves as a \"square-root\" operator when its current is the input and its $V_{G S}$ or $V_{G S}-V_{T H}$ is the output. We will revisit this concept later.\n\nMoving on to Example 3.5, consider the circuit depicted in Fig. 3.12(a). We are interested in calculating the impedance seen from the source, $R_{X}$, under the condition where $\\lambda=0$. To find $R_{X}$, we nullify all independent sources, establish the small-signal model, and apply a voltage source as shown in Fig. 3.12(b). Given that $V_{1}=-V_{X}$ and $V_{b s}=-V_{X}$, we obtain\n\n$$\n\\begin{equation*}\n\\left(g_{m}+g_{m b}\\right) V_{X}=I_{X} \\tag{3.25}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\frac{V_{X}}{I_{X}}=\\frac{1}{g_{m}+g_{m b}} \\tag{3.26}\n\\end{equation*}\n$$\n\nThis outcome is anticipated, as the topologies in Fig. 3.12(a) and Fig. 3.11(a) are analogous, save for the drain of $M_{1}$ in Fig. 3.12(b) not being at ac ground, a distinction that disappears when $\\lambda=0$. It is often stated that \"looking into the source of a MOSFET, we see $1 / g_{m}$,\" with the underlying assumption that $\\lambda=\\gamma=0$.\n\nWe then examine a common-source stage equipped with a diode-connected load, as presented in Fig. 3.13. Assuming negligible channel-length modulation, equation (3.24) can be substituted into (3.10) for the load impedance, resulting in\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1} \\frac{1}{g_{m 2}+g_{m b 2}}  \\tag{3.27}\\\\\n& =-\\frac{g_{m 1}}{g_{m 2}} \\frac{1}{1+\\eta} \\tag{3.28}\n\\end{align*}\n$$\n\nwhere $\\eta=g_{m b 2} / g_{m 2}$. Expressing $g_{m 1}$ and $g_{m 2}$ in terms of device dimensions and bias currents, we get\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{1} I_{D 1}}}{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{2} I_{D 2}}} \\frac{1}{1+\\eta} \\tag{3.29}\n\\end{equation*}\n$$\n\nand, since $I_{D 1}=I_{D 2}$,\n\n$$\n\\begin{equation*}\nA_{v}=-\\sqrt{\\frac{(W / L)_{1}}{(W / L)_{2}}} \\frac{1}{1+\\eta} \\tag{3.30}\n\\end{equation*}\n$$\n\nThis equation reveals an intriguing property: disregarding the variation of $\\eta$ with the output voltage, the gain remains unaffected by bias currents and voltages (provided $M_{1}$ remains in saturation). This implies that as input and output signal levels fluctuate, the gain stays relatively constant, suggesting a relatively linear input-output characteristic.\n\nFor a more detailed analysis, including large-signal behavior and additional examples, please refer to the original text and corresponding figures."
},
{
    "text": "In various CMOS technologies, it is a challenge to produce resistors with precise values or a reasonable physical size, as discussed in Chapter 19. Therefore, it is beneficial to substitute $R_{D}$ in Fig. 3.4(a) with a MOS transistor.\n\nA MOSFET can function as a small-signal resistor when its gate and drain are shorted together [Fig. 3.10(a)]. This setup, known as a \"diode-connected\" device, mirrors the behavior of a two-terminal resistor. It is important to note that the transistor is always in saturation due to the equal potential at the drain and the gate. Using the small-signal equivalent circuit shown in Fig. 3.10(b), we can determine the device's impedance by writing $V_{1}=V_{X}$ and $I_{X}=V_{X} / r_{O}+g_{m} V_{X}$. Thus, the impedance of the diode is simply $V_{X} / I_{X}=\\left(1 / g_{m}\\right) \\| r_{O} \\approx 1 / g_{m}$. If body effect is present, we can use the circuit in Fig. 3.11 to write $V_{1}=-V_{X}, V_{b s}=-V_{X}$, and\n\n$$\n\\begin{equation*}\n\\left(g_{m}+g_{m b}\\right) V_{X}+\\frac{V_{X}}{r_{O}}=I_{X} \\tag{3.21}\n\\end{equation*}\n$$\n\nThe diagrams show diode-connected NMOS and PMOS devices. M1 is connected with its gate and drain tied together, while M2 is similarly connected with its gate and drain tied together.\n\nThe circuit represents a small-signal equivalent of a diode-connected device, including a voltage-controlled current source, a resistor, and two voltage sources.\n\nThe circuit represents a small-signal equivalent of a diode-connected device, including a voltage-controlled current source, a resistor, and two voltage sources. It is used to analyze the equivalent resistance of a diode-connected MOSFET.\n\nFigure 3.11 (a) Arrangement for measuring the equivalent resistance of a diode-connected MOSFET; (b) small-signal equivalent circuit.\n\nIt follows that\n\n$$\n\\begin{align*}\n\\frac{V_{X}}{I_{X}} & =\\frac{1}{g_{m}+g_{m b}+r_{O}^{-1}}  \\tag{3.22}\\\\\n& =\\frac{1}{g_{m}+g_{m b}} \\| r_{O}  \\tag{3.23}\\\\\n& \\approx \\frac{1}{g_{m}+g_{m b}} \\tag{3.24}\n\\end{align*}\n$$\n\nIn the general case, $V_{X} / I_{X}=\\left(1 / g_{m}\\right)\\left\\|r_{O}\\right\\|\\left(1 / g_{m b}\\right)$. Interestingly, the impedance seen at the source of $M_{1}$ is lower when body effect is included. An intuitive explanation of this effect is left as an exercise for the reader.\n\nFrom a large-signal perspective, a diode-connected device acts as a \"square-root\" operator if its current is considered the input and its $V_{G S}$ or $V_{G S}-V_{T H}$ the output (why?). We will revisit this point later.\n\n#### Example 3.5\n\nConsider the circuit shown in Fig. 3.12(a). In some cases, we are interested in the impedance seen looking into the source, $R_{X}$. Determine $R_{X}$ if $\\lambda=0$.\nThe circuit is a common-source amplifier with an NMOS transistor M1. The inductor ZL is connected between VDD and the output node Vout. The resistor Rx is connected from the output node Vout to ground. The input voltage is applied to the gate of the NMOS, and the output is taken at Vout.\n\nThe circuit is a small-signal model used to determine the impedance seen at the source with lambda=0. It includes voltage sources V1 and Vx, and current sources gmV1 and gmbVbs, along with a resistor ZL. The circuit is analyzed by setting all independent sources to zero and applying a test voltage source.\n\nFigure 3.12 Impedance seen at the source with $\\lambda=0$.\n\n#### Solution\n\nTo determine $R_{X}$, we set all independent sources to zero, draw the small-signal model, and apply a voltage source as shown in Fig. 3.12(b). Since $V_{1}=-V_{X}$ and $V_{b s}=-V_{X}$, we have\n\n$$\n\\begin{equation*}\n\\left(g_{m}+g_{m b}\\right) V_{X}=I_{X} \\tag{3.25}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\frac{V_{X}}{I_{X}}=\\frac{1}{g_{m}+g_{m b}} \\tag{3.26}\n\\end{equation*}\n$$\n\nThis result should not be surprising: the topologies in Fig. 3.12(a) and Fig. 3.11(a) are similar except that the drain of $M_{1}$ in Fig. 3.12(b) is not at ac ground. This difference does not manifest itself if $\\lambda=0$. We sometimes say, \"looking into the source of a MOSFET, we see $1 / g_{m}$,\" assuming implicitly that $\\lambda=\\gamma=0$.\n\nWe now study a common-source stage with a diode-connected load (Fig. 3.13). With negligible channel-length modulation, (3.24) can be substituted in (3.10) for the load impedance, yielding\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1} \\frac{1}{g_{m 2}+g_{m b 2}}  \\tag{3.27}\\\\\n& =-\\frac{g_{m 1}}{g_{m 2}} \\frac{1}{1+\\eta} \\tag{3.28}\n\\end{align*}\n$$\n\nwhere $\\eta=g_{m b 2} / g_{m 2}$. Expressing $g_{m 1}$ and $g_{m 2}$ in terms of device dimensions and bias currents, we have\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{1} I_{D 1}}}{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{2} I_{D 2}}} \\frac{1}{1+\\eta} \\tag{3.29}\n\\end{equation*}\n$$\n\nand, since $I_{D 1}=I_{D 2}$,\n\n$$\n\\begin{equation*}\nA_{v}=-\\sqrt{\\frac{(W / L)_{1}}{(W / L)_{2}}} \\frac{1}{1+\\eta} \\tag{3.30}\n\\end{equation*}\n$$\n\nThis equation reveals an interesting property: if the variation of $\\eta$ with the output voltage is neglected, the gain is independent of the bias currents and voltages (so long as $M_{1}$ stays in saturation). In other words, as the input and output signal levels vary, the gain remains relatively constant, indicating that the input-output characteristic is relatively linear.\n\nThe circuit is a common-source (CS) stage with a diode-connected NMOS load (M2). The input voltage is applied to the gate of M1, and the output is taken from the drain of M1. M2 is connected in a diode configuration, providing a load for M1.\n\nThe linear behavior of the circuit can also be confirmed by large-signal analysis. Neglecting channellength modulation for simplicity, we have in Fig. 3.13\n\n$$\n\\begin{equation*}\n\\frac{1}{2} \\mu_{n} C_{o x}\\left(\\frac{W}{L}\\right)_{1}\\left(V_{i n}-V_{T H 1}\\right)^{2}=\\frac{1}{2} \\mu_{n} C_{o x}\\left(\\frac{W}{L}\\right)_{2}\\left(V_{D D}-V_{o u t}-V_{T H 2}\\right)^{2} \\tag{3.31}\n\\end{equation*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\n\\sqrt{\\left(\\frac{W}{L}\\right)_{1}}\\left(V_{i n}-V_{T H 1}\\right)=\\sqrt{\\left(\\frac{W}{L}\\right)_{2}}\\left(V_{D D}-V_{o u t}-V_{T H 2}\\right) \\tag{3.32}\n\\end{equation*}\n$$\n\nThus, if the variation of $V_{T H 2}$ with $V_{\\text {out }}$ is small, the circuit exhibits a linear input-output characteristic. In essence, the squaring function performed by $M_{1}$ (from the input voltage to its drain current) and the square root function performed by $M_{2}$ (from its drain current to its overdrive) act as $f^{-1}(f(x))=x$.\n\nThe small-signal gain can also be computed by differentiating both sides with respect to $V_{i n}$ :\n\n$$\n\\begin{equation*}\n\\sqrt{\\left(\\frac{W}{L}\\right)_{1}}=\\sqrt{\\left(\\frac{W}{L}\\right)_{2}}\\left(-\\frac{\\partial V_{\\text {out }}}{\\partial V_{\\text {in }}}-\\frac{\\partial V_{T H 2}}{\\partial V_{i n}}\\right) \\tag{3.33}\n\\end{equation*}\n$$\n\nwhich, upon application of the chain rule $\\partial V_{T H 2} / \\partial V_{\\text {in }}=\\left(\\partial V_{T H 2} / \\partial V_{\\text {out }}\\right)\\left(\\partial V_{\\text {out }} / \\partial V_{\\text {in }}\\right)=\\eta\\left(\\partial V_{\\text {out }} / \\partial V_{\\text {in }}\\right)$, reduces to\n\n$$\n\\begin{equation*}\n\\frac{\\partial V_{\\text {out }}}{\\partial V_{\\text {in }}}=-\\sqrt{\\frac{(W / L)_{1}}{(W / L)_{2}}} \\frac{1}{1+\\eta} \\tag{3.34}\n\\end{equation*}\n$$\n\nIt is instructive to study the overall large-signal characteristic of the circuit as well. But let us first consider the circuit shown in Fig. 3.14(a). What is the final value of $V_{\\text {out }}$ if $I_{1}$ drops to zero? As $I_{1}$ decreases, so does the overdrive of $M_{2}$. Thus, for small $I_{1}, V_{G S 2} \\approx V_{T H 2}$ and $V_{\\text {out }} \\approx V_{D D}-V_{T H 2}$. In reality, the subthreshold conduction in $M_{2}$ eventually brings $V_{\\text {out }}$ to $V_{D D}$ if $I_{D}$ approaches zero, but at very low current levels, the finite capacitance at the output node slows down the change from $V_{D D}-V_{T H 2}$ to $V_{D D}$. This is illustrated in the time-domain waveforms of Fig. 3.14(b). For this reason, in circuits that have frequent switching activity, we assume that $V_{\\text {out }}$ remains around $V_{D D}-V_{T H 2}$ when $I_{1}$ falls to small values.\n\nThe circuit is a simple configuration with an NMOS transistor M2 connected in a diode configuration with its gate and drain tied together. It is biased by a current source I1 and has a capacitive load Cp at the output node Vout. The circuit is powered by VDD.\n\nThe graph in Figure 3.14 (b) consists of two plots stacked vertically, representing the behavior of a diode-connected NMOS transistor circuit with a stepped bias current.\n\nNow we return to the circuit of Fig. 3.13. Plotted in Fig. 3.15 versus $V_{i n}$, the output voltage equals $V_{D D}-V_{T H 2}$ if $V_{i n}<V_{T H 1}$. For $V_{i n}>V_{T H 1}$, Eq. (3.32) holds and $V_{\\text {out }}$ follows an approximately straight line. As $V_{\\text {in }}$ exceeds $V_{\\text {out }}+V_{T H 1}$ (beyond point $A$ ), $M_{1}$ enters the triode region, and the characteristic becomes nonlinear.\n\nThe graph in Figure 3.15 is a plot of the input-output characteristic of a common-source (CS) stage with a diode-connected load. This is a voltage transfer characteristic graph.\n\nThe diode-connected load of Fig. 3.13 can be implemented with a PMOS device as well. Shown in Fig. 3.16, the circuit is free from body effect, providing a small-signal voltage gain equal to\n\n$$\n\\begin{equation*}\nA_{v}=-\\sqrt{\\frac{\\mu_{n}(W / L)_{1}}{\\mu_{p}(W / L)_{2}}} \\tag{3.35}\n\\end{equation*}\n$$\n\nwhere channel-length modulation is neglected.\n\nThe circuit is a common-source (CS) stage with a diode-connected PMOS load. The PMOS transistor M2 is diode-connected, meaning its gate and drain are connected together. This configuration provides a load for the NMOS transistor M1. The input voltage Vin is applied to the gate of M1, and the output voltage Vout is taken from the drain of M1, which is also the drain of M2.\n\nFigure 3.16 CS stage with diodeconnected PMOS device.\n\nEquations (3.30) and (3.35) indicate that the gain of a common-source stage with diode-connected load is a relatively weak function of the device dimensions. For example, to achieve a gain of 5 , $\\mu_{n}(W / L)_{1} /\\left[\\mu_{p}(W / L)_{2}\\right]=25$, implying that, with $\\mu_{n} \\approx 2 \\mu_{p}$, we must have $(W / L)_{1} \\approx 12.5(W / L)_{2}$. In a sense, a high gain requires a \"strong\" input device and a \"weak\" load device. In addition to disproportionately wide or long transistors (and hence a large input or load capacitance), a high gain translates to another important limitation: reduction in allowable voltage swings. Specifically, since in Fig. 3.16, $I_{D 1}=\\left|I_{D 2}\\right|$,\n\n$$\n\\begin{equation*}\n\\mu_{n}\\left(\\frac{W}{L}\\right)_{1}\\left(V_{G S 1}-V_{T H 1}\\right)^{2}=\\mu_{p}\\left(\\frac{W}{L}\\right)_{2}\\left(V_{G S 2}-V_{T H 2}\\right)^{2} \\tag{3.36}\n\\end{equation*}\n$$\n\nif $\\lambda=0$, revealing that\n\nLet us design and simulate a CS stage with a diode-connected PMOS load in $40-\\mathrm{nm}$ technology. We select $W / L=$ $5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ for the NMOS device and $1 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ for the PMOS device. The large-signal I-V characteristic is shown in the figure. We observe that the circuit provides a small-signal gain of about 1.5 for an input range of roughly 0.4 V to 0.5 V . (In this dc sweep, $V_{\\text {out }}$ can reach $V_{D D}$ when the input transistor is off.)\n\nThe graph is a large-signal I-V characteristic plot, typically used to illustrate the relationship between input and output voltages in a transistor circuit. The x-axis represents the input voltage ($V_{in}$) in volts, ranging from 0 to 1 V. The y-axis represents the output voltage ($V_{out}$) in volts, also ranging from 0 to 1 V. Both axes use a linear scale.\n\nIt follows that\n\n$$\n\\begin{equation*}\n\\frac{\\left|V_{G S 2}-V_{T H 2}\\right|}{V_{G S 1}-V_{T H 1}}=A_{v} \\tag{3.37}\n\\end{equation*}\n$$\n\nIn the above example, the overdrive voltage of $M_{2}$ must be 5 times that of $M_{1}$. For example, with $V_{G S 1}-V_{T H 1}=100 \\mathrm{mV}$ and $\\left|V_{T H 2}\\right|=0.3 \\mathrm{~V}$, we have $\\left|V_{G S 2}\\right|=0.8 \\mathrm{~V}$, severely limiting the output swing. This is another example of the trade-offs suggested by the analog design octagon. Note that, with diode-connected loads, the swing is constrained by both the required overdrive voltage and the threshold voltage. That is, even with a small overdrive, the output level cannot exceed $V_{D D}-\\left|V_{T H}\\right|$.\n\nAn interesting paradox arises here if we write $g_{m}=\\mu C_{o x}(W / L)$ $V_{G S}-V_{T H} \\mid$. The voltage gain of the circuit is then given by\n\n$$\n\\begin{align*}\n\\left|A_{v}\\right| & =\\frac{g_{m 1}}{g_{m 2}}  \\tag{3.38}\\\\\n"
},
{
    "text": "In certain CMOS technologies, it is challenging to produce resistors with precise values or a practical physical size (refer to Chapter 19). As a result, it is preferable to substitute the resistor $R_{D}$ in Fig. 3.4(a) with a MOS transistor.\n\nA MOSFET can function as a small-signal resistor when its gate and drain are connected [Fig. 3.10(a)]. This setup, known as a \"diode-connected\" device, reminiscent of its bipolar equivalent, demonstrates small-signal behavior akin to a two-terminal resistor. It is important to note that the transistor is always in saturation because the drain and gate share the same potential. By utilizing the small-signal equivalent circuit shown in Fig. 3.10(b) to determine the device's impedance, we establish that $V_{1}=V_{X}$ and $I_{X}=V_{X} / r_{O}+g_{m} V_{X}$. This indicates that the impedance of the diode is simply $V_{X} / I_{X}=\\left(1 / g_{m}\\right) \\| r_{O} \\approx 1 / g_{m}$. In the presence of body effect, we can employ the circuit in Fig. 3.11 to express $V_{1}=-V_{X}, V_{b s}=-V_{X}$, and\n\n$$\n\\begin{equation*}\n\\left(g_{m}+g_{m b}\\right) V_{X}+\\frac{V_{X}}{r_{O}}=I_{X} \\tag{3.21}\n\\end{equation*}\n$$\n\nThe provided images and their descriptions depict various configurations of MOSFETs and associated circuits used to analyze the impedance and behavior of diode-connected devices. These configurations include small-signal models and large-signal characteristics, highlighting the linear and nonlinear behavior of the circuits.\n\nThe text continues with examples and solutions that explore the calculation of impedance and voltage gain in circuits with diode-connected loads, considering factors such as channel-length modulation and body effect. It also discusses the design considerations and limitations in analog circuits, particularly in the context of nanometer-scale technologies."
},
{
    "text": "In certain CMOS technologies, fabricating resistors with precise values or a compact physical size is challenging (refer to Chapter 19). As a result, it is preferable to substitute $R_{D}$ in Fig. 3.4(a) with a MOS transistor.\n\nA MOSFET can function as a small-signal resistor when its gate and drain are short-circuited [Fig. 3.10(a)]. Referred to as a \"diode-connected\" device, similar to its bipolar equivalent, this setup exhibits small-signal behavior akin to a two-terminal resistor. It's important to note that the transistor is always in saturation because the drain and gate share the same potential. By utilizing the small-signal equivalent circuit shown in Fig. 3.10(b) to determine the device's impedance, we set $V_{1}=V_{X}$ and $I_{X}=V_{X} / r_{O}+g_{m} V_{X}$. Thus, the impedance of the diode is simply $V_{X} / I_{X}=\\left(1 / g_{m}\\right) \\| r_{O} \\approx 1 / g_{m}$. In the presence of body effect, we can employ the circuit in Fig. 3.11 to write $V_{1}=-V_{X}, V_{b s}=-V_{X}$, and\n\n$$\n\\begin{equation*}\n\\left(g_{m}+g_{m b}\\right) V_{X}+\\frac{V_{X}}{r_{O}}=I_{X} \\tag{3.21}\n\\end{equation*}\n$$\n\nThe diagram in Figure 3.10 (a) illustrates diode-connected NMOS and PMOS devices. M1 is connected with its gate and drain shorted together. M2 is similarly connected with its gate and drain shorted together.\n\nThe circuit depicted in Figure 3.10 (b) represents a small-signal equivalent of a diode-connected device, incorporating a voltage-controlled current source, a resistor, and two voltage sources.\n\nThe circuit depicted in Figure 3.11 (a)(b) represents a small-signal equivalent of a diode-connected device, including a voltage-controlled current source, a resistor, and two voltage sources. It is employed to analyze the equivalent resistance of a diode-connected MOSFET.\n\nFigure 3.11 (a) illustrates the arrangement for measuring the equivalent resistance of a diode-connected MOSFET; (b) shows the small-signal equivalent circuit.\n\nFrom this, we deduce that\n\n$$\n\\begin{align*}\n\\frac{V_{X}}{I_{X}} & =\\frac{1}{g_{m}+g_{m b}+r_{O}^{-1}}  \\tag{3.22}\\\\\n& =\\frac{1}{g_{m}+g_{m b}} \\| r_{O}  \\tag{3.23}\\\\\n& \\approx \\frac{1}{g_{m}+g_{m b}} \\tag{3.24}\n\\end{align*}\n$$\n\nIn general, $V_{X} / I_{X}=\\left(1 / g_{m}\\right)\\left\\|r_{O}\\right\\|\\left(1 / g_{m b}\\right)$. Interestingly, the impedance observed at the source of $M_{1}$ is lower when body effect is considered. An intuitive explanation of this effect is provided as an exercise for the reader.\n\nFrom a large-signal perspective, a diode-connected device acts as a \"square-root\" operator if its current is regarded as the input and its $V_{G S}$ or $V_{G S}-V_{T H}$ as the output (why?). We will revisit this point later.\n\n#### Example 3.5\n\nConsider the circuit depicted in Fig. 3.12(a). In some scenarios, we are interested in the impedance observed looking into the source, $R_{X}$. Determine $R_{X}$ if $\\lambda=0$.\nThe circuit in Figure 3.12(a) is a common-source amplifier with an NMOS transistor M1. The inductor ZL is connected between VDD and the output node Vout. The resistor Rx is connected from the output node Vout to ground. The input voltage is applied to the gate of the NMOS, and the output is taken at Vout.\n\nThe circuit depicted in Figure 3.12(b) is a small-signal model used to determine the impedance seen at the source with lambda=0. It includes voltage sources V1 and Vx, and current sources gmV1 and gmbVbs, along with a resistor ZL. The circuit is analyzed by setting all independent sources to zero and applying a test voltage source.\n\nFigure 3.12 illustrates the impedance seen at the source with $\\lambda=0$.\n\n#### Solution\n\nTo determine $R_{X}$, we set all independent sources to zero, draw the small-signal model, and apply a voltage source as shown in Fig. 3.12(b). Since $V_{1}=-V_{X}$ and $V_{b s}=-V_{X}$, we have\n\n$$\n\\begin{equation*}\n\\left(g_{m}+g_{m b}\\right) V_{X}=I_{X} \\tag{3.25}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\frac{V_{X}}{I_{X}}=\\frac{1}{g_{m}+g_{m b}} \\tag{3.26}\n\\end{equation*}\n$$\n\nThis result should not be surprising: the topologies in Fig. 3.12(a) and Fig. 3.11(a) are similar except that the drain of $M_{1}$ in Fig. 3.12(b) is not at ac ground. This difference does not manifest itself if $\\lambda=0$. We sometimes say, \"looking into the source of a MOSFET, we see $1 / g_{m}$,\" assuming implicitly that $\\lambda=\\gamma=0$.\n\nWe now examine a common-source stage with a diode-connected load (Fig. 3.13). With negligible channel-length modulation, (3.24) can be substituted in (3.10) for the load impedance, resulting in\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1} \\frac{1}{g_{m 2}+g_{m b 2}}  \\tag{3.27}\\\\\n& =-\\frac{g_{m 1}}{g_{m 2}} \\frac{1}{1+\\eta} \\tag{3.28}\n\\end{align*}\n$$\n\nwhere $\\eta=g_{m b 2} / g_{m 2}$. Expressing $g_{m 1}$ and $g_{m 2}$ in terms of device dimensions and bias currents, we have\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{1} I_{D 1}}}{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{2} I_{D 2}}} \\frac{1}{1+\\eta} \\tag{3.29}\n\\end{equation*}\n$$\n\nand, since $I_{D 1}=I_{D 2}$,\n\n$$\n\\begin{equation*}\nA_{v}=-\\sqrt{\\frac{(W / L)_{1}}{(W / L)_{2}}} \\frac{1}{1+\\eta} \\tag{3.30}\n\\end{equation*}\n$$\n\nThis equation reveals an interesting property: if the variation of $\\eta$ with the output voltage is neglected, the gain remains independent of the bias currents and voltages (as long as $M_{1}$ stays in saturation). In other words, as the input and output signal levels change, the gain remains relatively constant, indicating that the input-output characteristic is relatively linear.\nThe circuit in Figure 3.13 is a common-source (CS) stage with a diode-connected NMOS load (M2). The input voltage is applied to the gate of M1, and the output is taken from the drain of M1. M2 is connected in a diode configuration, providing a load for M1.\n\nThe linear behavior of the circuit can also be confirmed by large-signal analysis. Neglecting channellength modulation for simplicity, we have in Fig. 3.13\n\n$$\n\\begin{equation*}\n\\frac{1}{2} \\mu_{n} C_{o x}\\left(\\frac{W}{L}\\right)_{1}\\left(V_{i n}-V_{T H 1}\\right)^{2}=\\frac{1}{2} \\mu_{n} C_{o x}\\left(\\frac{W}{L}\\right)_{2}\\left(V_{D D}-V_{o u t}-V_{T H 2}\\right)^{2} \\tag{3.31}\n\\end{equation*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\n\\sqrt{\\left(\\frac{W}{L}\\right)_{1}}\\left(V_{i n}-V_{T H 1}\\right)=\\sqrt{\\left(\\frac{W}{L}\\right)_{2}}\\left(V_{D D}-V_{\\text {out }}-V_{T H 2}\\right) \\tag{3.32}\n\\end{equation*}\n$$\n\nThus, if the variation of $V_{T H 2}$ with $V_{\\text {out }}$ is small, the circuit exhibits a linear input-output characteristic. In essence, the squaring function performed by $M_{1}$ (from the input voltage to its drain current) and the square root function performed by $M_{2}$ (from its drain current to its overdrive) act as $f^{-1}(f(x))=x$.\n\nThe small-signal gain can also be computed by differentiating both sides with respect to $V_{i n}$ :\n\n$$\n\\begin{equation*}\n\\sqrt{\\left(\\frac{W}{L}\\right)_{1}}=\\sqrt{\\left(\\frac{W}{L}\\right)_{2}}\\left(-\\frac{\\partial V_{\\text {out }}}{\\partial V_{\\text {in }}}-\\frac{\\partial V_{T H 2}}{\\partial V_{i n}}\\right) \\tag{3.33}\n\\end{equation*}\n$$\n\nwhich, upon application of the chain rule $\\partial V_{T H 2} / \\partial V_{\\text {in }}=\\left(\\partial V_{T H 2} / \\partial V_{\\text {out }}\\right)\\left(\\partial V_{\\text {out }} / \\partial V_{\\text {in }}\\right)=\\eta\\left(\\partial V_{\\text {out }} / \\partial V_{\\text {in }}\\right)$, reduces to\n\n$$\n\\begin{equation*}\n\\frac{\\partial V_{\\text {out }}}{\\partial V_{\\text {in }}}=-\\sqrt{\\frac{(W / L)_{1}}{(W / L)_{2}}} \\frac{1}{1+\\eta} \\tag{3.34}\n\\end{equation*}\n$$\n\nIt is instructive to study the overall large-signal characteristic of the circuit as well. But let us first consider the circuit shown in Fig. 3.14(a). What is the final value of $V_{\\text {out }}$ if $I_{1}$ drops to zero? As $I_{1}$ decreases, so does the overdrive of $M_{2}$. Thus, for small $I_{1}, V_{G S 2} \\approx V_{T H 2}$ and $V_{\\text {out }} \\approx V_{D D}-V_{T H 2}$. In reality, the subthreshold conduction in $M_{2}$ eventually brings $V_{\\text {out }}$ to $V_{D D}$ if $I_{D}$ approaches zero, but at very low current levels, the finite capacitance at the output node slows down the change from $V_{D D}-V_{T H 2}$ to $V_{D D}$. This is illustrated in the time-domain waveforms of Fig. 3.14(b). For this reason, in circuits that have frequent switching activity, we assume that $V_{\\text {out }}$ remains around $V_{D D}-V_{T H 2}$ when $I_{1}$ falls to small values.\nThe circuit in Figure 3.14(a) is a simple configuration with an NMOS transistor M2 connected in a diode configuration with its gate and drain tied together. It is biased by a current source I1 and has a capacitive load Cp at the output node Vout. The circuit is powered by VDD.\n\nThe graph in Figure 3.14 (b) consists of two plots stacked vertically, representing the behavior of a diode-connected NMOS transistor circuit with a stepped bias current.\n\n1. **Type of Graph and Function:**\n- The top plot is a time-domain waveform representing the bias current $I_1$ as a function of time $t$.\n- The bottom plot shows the output voltage $V_{out}$ as a function of time $t$.\n\n2. **Axes Labels and Units:**\n- Both plots have the horizontal axis labeled as time $t$, with no specific units provided, suggesting a qualitative analysis.\n- The vertical axis of the top plot is labeled as $I_1$, representing the current.\n- The vertical axis of the bottom plot is labeled as $V_{out}$, with reference lines for $V_{DD}$ and $V_{DD} - V_{TH2}$, indicating voltage levels.\n\n3. **Overall Behavior and Trends:**\n- The top plot shows a step function for the current $I_1$. Initially, the current is zero, then it steps up to a constant value, and later returns to zero.\n- In the bottom plot, $V_{out}$ starts at a lower level, rises sharply after the current step, and asymptotically approaches $V_{DD}$.\n\n4. **Key Features and Technical Details:**\n- The step in the current $I_1$ causes a corresponding change in $V_{out}$. Initially, $V_{out}$ is at $V_{DD} - V_{TH2}$, indicating the diode-connected NMOS is in saturation.\n- As $I_1$ steps up, $V_{out}$ rises rapidly and then levels off near $V_{DD}$, showing the charging behavior of the capacitive load $C_p$.\n\n5. **Annotations and Specific Data Points:**\n- Reference lines for $V_{DD}$ and $V_{DD} - V_{TH2}$ are marked on the voltage plot, illustrating key voltage levels.\n- The sharp transition in $V_{out}$ corresponds to the step change in $I_1$, highlighting the circuit's response to the stepped bias current.\n\nFigure 3.14 (a) Diode-connected device with stepped bias current; (b) variation of source voltage versus time.\nNow we return to the circuit of Fig. 3.13. Plotted in Fig. 3.15 versus $V_{i n}$, the output voltage equals $V_{D D}-V_{T H 2}$ if $V_{i n}<V_{T H 1}$. For $V_{i n}>V_{T H 1}$, Eq. (3.32) holds and $V_{\\text {out }}$ follows an approximately straight line. As $V_{\\text {in }}$ exceeds $V_{\\text {out }}+V_{T H 1}$ (beyond point $A$ ), $M_{1}$ enters the triode region, and the characteristic becomes nonlinear.\n\nThe graph in Figure 3.15 is a plot of the input-output characteristic of a common-source (CS) stage with a diode-connected load. This is a voltage transfer characteristic graph.\n\n1. **Type of Graph and Function:**\n- This is a voltage transfer characteristic graph, showing the relationship between input voltage ($V_{in}$) and output voltage ($V_{out}$).\n\n2. **Axes Labels and Units:**\n- The x-axis represents the input voltage ($V_{in}$) and the y-axis represents the output voltage ($V_{out}$). Both axes are typically in volts.\n- The graph uses a linear scale.\n\n3. **Overall Behavior and Trends:**\n- For input voltages less than $V_{TH1}$, the output voltage remains constant at $V_{DD} - V_{TH2}$.\n- As $V_{in}$ surpasses $V_{TH1}$, the output voltage begins to decrease linearly.\n- Beyond point A, where $V_{in}$ exceeds $V_{out} + V_{TH1}$, the behavior becomes nonlinear due to $M_1$ entering the triode region.\n\n4. **Key Features and Technical Details:**\n- The graph shows a distinct change in behavior at $V_{TH1}$.\n- Point A marks the transition where nonlinearity begins to occur.\n- The initial flat region indicates the saturation region of the MOSFET, followed by a linear region, and then a nonlinear region.\n\n5. **Annotations and Specific Data Points:**\n- The graph is annotated with $V_{TH1}$ and $V_{DD} - V_{TH2}$, indicating the threshold voltage and the initial output voltage level, respectively.\n- Point A is labeled to indicate the beginning of the nonlinear region.\n\nThe diode-connected load of Fig. 3.13 can be implemented with a PMOS device as well. Shown in Fig. 3.16, the circuit is free from body effect, providing a small-signal voltage gain equal to\n\n$$\n\\begin{equation*}\nA_{v}=-\\sqrt{\\frac{\\mu_{n}(W / L)_{1}}{\\mu_{p}(W / L)_{2}}} \\tag{3.35}\n\\end{equation*}\n$$\n\nwhere channel-length modulation is neglected.\nThe circuit in Figure 3.16 is a common-source (CS) stage with a diode-connected PMOS load. The PMOS transistor M2 is diode-connected, meaning its gate and drain are connected together. This configuration provides a load for the NMOS transistor M1. The input voltage Vin is applied to the gate of M1, and the output voltage Vout is taken from the drain of M1, which is also the drain of M2.\n\nFigure 3.16 CS stage with diodeconnected PMOS device.\n\nEquations (3.30) and (3.35) indicate that the gain of a common-source stage with diode-connected load is a relatively weak function of the device dimensions. For example, to achieve a gain of 5"
},
{
    "text": "In certain CMOS technologies, the fabrication of resistors with precise values or reasonable physical dimensions is challenging (refer to Chapter 19). As a result, it is preferable to substitute $R_{D}$ in Figure 3.4(a) with a MOS transistor.\n\nA MOSFET can function as a small-signal resistor when its gate and drain are short-circuited (Figure 3.10(a)]. This configuration, known as a \"diode-connected\" device, mim to its bipolar counterpart, exhibits small-signal behavior akin to a two-terminal resistor. It is important to note that the transistor is always in saturation because to the equal potential at the drain and the\nI certain CMOS technologies, it fabrication of resistors with precise values or reasonable physical dimensions is challenging (refer to Chapter 19). As a result, it is preferable to substitute $R_{D}$ in Figure 3.4(a) with a MOS transistor.\n\nA MOSFET can function as a small-signal resistor when its gate and drain are short-circuited [Figure 3.10(a)]. This configuration, known as a \"diode-connected\" device, similar to its bipolar counterpart, exhibits small-signal behavior akin to a two-terminal resistor. It is important to note that the transistor is always in saturation due to the equal potential at the drain and the gate. Utilizing the small-signal equivalent shown in Figure 3.10(b) to determine the impedance of the device, we can write $V_{1}=V_{X}$ and $I_{X}=V_{X} / r_{O}+g_{m} V_{X}$. Thus, the impedance of the diode is simply $V_{X} / I_{X}=\\left(1 / g_{m}\\right) \\| r_{O} \\approx 1 / g_{m}$. In the presence of body effect, we can use the circuit in Figure 3.11 to write $V_{1}=-V_{X}, V_{b s}=-V_{X}$, and\n\n$$\n\\begin{equation*}\n\\left(g_{m}+g_{m b}\\right) V_{X}+\\frac{V_{X}}{r_{O}}=I_{X} \\tag{3.21}\n\\end{equation*}\n$$\n\n[Image descriptions and extra information have been omitted for brevity]\n\nIt follows that\n\n$$\n\\begin{align*}\n\\frac{V_{X}}{I_{X}} & =\\frac{1}{g_{m}+g_{m b}+r_{O}^{-1}}  \\tag{3.22}\\\\\n& =\\frac{1}{g_{m}+g_{m b}} \\| r_{O}  \\tag{3.23}\\\\\n& \\approx \\frac{1}{g_{m}+g_{m b}} \\tag{3.24}\n\\end{align*}\n$$\n\nIn the general case, $V_{X} / I_{X}=\\left(1 / g_{m}\\right)\\left\\|r_{O}\\right\\|\\left(1 / g_{m b}\\right)$. Interestingly, the impedance seen at the source of $M_{1}$ is lower when body effect is included. An intuitive explanation of this effect is left as an exercise for the reader.\n\nFrom a large-signal perspective, a diode-connected device acts as a \"square-root\" operator if its current is considered the input and its $V_{G S}$ or $V_{G S}-V_{T H}$ the output (why?). We will revisit this point later.\n\n#### Example 3.5\n\nConsider the circuit shown in Figure 3.12(a). In some cases, we are interested in the impedance seen looking into the source, $R_{X}$. Determine $R_{X}$ if $\\lambda=0$.\n\n[Image descriptions and extra information have been omitted for brevity]\n\nFigure 3.12 Impedance seen at the source with $\\lambda=0$.\n\n#### Solution\n\nTo determine $R_{X}$, we set all independent sources to zero, draw the small-signal model, and apply a voltage source as shown in Figure 3.12(b). Since $V_{1}=-V_{X}$ and $V_{b s}=-V_{X}$, we have\n\n$$\n\\begin{equation*}\n\\left(g_{m}+g_{m b}\\right) V_{X}=I_{X} \\tag{3.25}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\frac{V_{X}}{I_{X}}=\\frac{1}{g_{m}+g_{m b}} \\tag{3.26}\n\\end{equation*}\n$$\n\nThis result should not be surprising: the topologies in Figure 3.12(a) and Figure 3.11(a) are similar except that the drain of $M_{1}$ in Figure 3.12(b) is not at ac ground. This difference does not manifest itself if $\\lambda=0$. We sometimes say, \"looking into the source of a MOSFET, we see $1 / g_{m}$,\" assuming implicitly that $\\lambda=\\gamma=0$.\n\nWe now study a common-source stage with a diode-connected load (Figure 3.13). With negligible channel-length modulation, (3.24) can be substituted in (3.10) for the load impedance, yielding\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1} \\frac{1}{g_{m 2}+g_{m b 2}}  \\tag{3.27}\\\\\n& =-\\frac{g_{m 1}}{g_{m 2}} \\frac{1}{1+\\eta} \\tag{3.28}\n\\end{align*}\n$$\n\nwhere $\\eta=g_{m b 2} / g_{m 2}$. Expressing $g_{m 1}$ and $g_{m 2}$ in terms of device dimensions and bias currents, we have\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{1} I_{D 1}}}{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{2} I_{D 2}}} \\frac{1}{1+\\eta} \\tag{3.29}\n\\end{equation*}\n$$\n\nand, since $I_{D 1}=I_{D 2}$,\n\n$$\n\\begin{equation*}\nA_{v}=-\\sqrt{\\frac{(W / L)_{1}}{(W / L)_{2}}} \\frac{1}{1+\\eta} \\tag{3.30}\n\\end{equation*}\n$$\n\nThis equation reveals an interesting property: if the variation of $\\eta$ with the output voltage is neglected, the gain is independent of the bias currents and voltages (so long as $M_{1}$ stays in saturation). In other words, as the input and output signal levels vary, the gain remains relatively constant, indicating that the input-output characteristic is relatively linear.\n\n[Image descriptions and extra information have been omitted for brevity]\n\nThe linear behavior of the circuit can also be confirmed by large-signal analysis. Neglecting channel-length modulation for simplicity, we have in Figure 3.13\n\n$$\n\\begin{equation*}\n\\frac{1}{2} \\mu_{n} C_{o x}\\left(\\frac{W}{L}\\right)_{1}\\left(V_{i n}-V_{T H 1}\\right)^{2}=\\frac{1}{2} \\mu_{n} C_{o x}\\left(\\frac{W}{L}\\right)_{2}\\left(V_{D D}-V_{o u t}-V_{T H 2}\\right)^{2} \\tag{3.31}\n\\end{equation*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\n\\sqrt{\\left(\\frac{W}{L}\\right)_{1}}\\left(V_{i n}-V_{T H 1}\\right)=\\sqrt{\\left(\\frac{W}{L}\\right)_{2}}\\left(V_{D D}-V_{\\text {out }}-V_{T H 2}\\right) \\tag{3.32}\n\\end{equation*}\n$$\n\nThus, if the variation of $V_{T H 2}$ with $V_{\\text {out }}$ is small, the circuit exhibits a linear input-output characteristic. In essence, the squaring function performed by $M_{1}$ (from the input voltage to its drain current) and the square root function performed by $M_{2}$ (from its drain current to its overdrive) act as $f^{-1}(f(x))=x$.\n\nThe small-signal gain can also be computed by differentiating both sides with respect to $V_{i n}$ :\n\n$$\n\\begin{equation*}\n\\sqrt{\\left(\\frac{W}{L}\\right)_{1}}=\\sqrt{\\left(\\frac{W}{L}\\right)_{2}}\\left(-\\frac{\\partial V_{\\text {out }}}{\\partial V_{\\text {in }}}-\\frac{\\partial V_{T H 2}}{\\partial V_{i n}}\\right) \\tag{3.33}\n\\end{equation*}\n$$\n\nwhich, upon application of the chain rule $\\partial V_{T H 2} / \\partial V_{\\text {in }}=\\left(\\partial V_{T H 2} / \\partial V_{\\text {out }}\\right)\\left(\\partial V_{\\text {out }} / \\partial V_{\\text {in }}\\right)=\\eta\\left(\\partial V_{\\text {out }} / \\partial V_{\\text {in }}\\right)$, reduces to\n\n$$\n\\begin{equation*}\n\\frac{\\partial V_{\\text {out }}}{\\partial V_{\\text {in }}}=-\\sqrt{\\frac{(W / L)_{1}}{(W / L)_{2}}} \\frac{1}{1+\\eta} \\tag{3.34}\n\\end{equation*}\n$$\n\nIt is instructive to study the overall large-signal characteristic of the circuit as well. But let us first consider the circuit shown in Figure 3.14(a). What is the final value of $V_{\\text {out }}$ if $I_{1}$ drops to zero? As $I_{1}$ decreases, so does the overdrive of $M_{2}$. Thus, for small $I_{1}, V_{G S 2} \\approx V_{T H 2}$ and $V_{\\text {out }} \\approx V_{D D}-V_{T H 2}$. In reality, the subthreshold conduction in $M_{2}$ eventually brings $V_{\\text {out }}$ to $V_{D D}$ if $I_{D}$ approaches zero, but at very low current levels, the finite capacitance at the output node slows down the change from $V_{D D}-V_{T H 2}$ to $V_{D D}$. This is illustrated in the time-domain waveforms of Figure 3.14(b). For this reason, in circuits that have frequent switching activity, we assume that $V_{\\text {out }}$ remains around $V_{D D}-V_{T H 2}$ when $I_{1}$ falls to small values.\n\n[Image descriptions and extra information have been omitted for brevity]\n\nFigure 3.14 (a) Diode-connected device with stepped bias current; (b) variation of source voltage versus time.\n\nNow we return to the circuit of Figure 3.13. Plotted in Figure 3.15 versus $V_{i n}$, the output voltage equals $V_{D D}-V_{T H 2}$ if $V_{i n}<V_{T H 1}$. For $V_{i n}>V_{T H 1}$, Equation (3.32) holds and $V_{\\text {out }}$ follows an approximately straight line. As $V_{\\text {in }}$ exceeds $V_{\\text {out }}+V_{T H 1}$ (beyond point $A$ ), $M_{1}$ enters the triode region, and the characteristic becomes nonlinear.\n\n[Image descriptions and extra information have been omitted for brevity]\n\nFigure 3.15 Input-output characteristic of a CS stage with diode-connected load.\n\nThe diode-connected load of Figure 3.13 can be implemented with a PMOS device as well. Shown in Figure 3.16, the circuit is free from body effect, providing a small-signal voltage gain equal to\n\n$$\n\\begin{equation*}\nA_{v}=-\\sqrt{\\frac{\\mu_{n}(W / L)_{1}}{\\mu_{p}(W / L)_{2}}} \\tag{3.35}\n\\end{equation*}\n$$\n\nwhere channel-length modulation is neglected.\n\n[Image descriptions and extra information have been omitted for brevity]\n\nFigure 3.16 CS stage with diodeconnected PMOS device.\n\nEquations (3.30) and (3.35) indicate that the gain of a common-source stage with diode-connected load is a relatively weak function of the device dimensions. For example, to achieve a gain of 5, $\\mu_{n}(W / L)_{1} /\\left[\\mu_{p}(W / L)_{2}\\right]=25$, implying that, with $\\mu_{n} \\approx 2 \\mu_{p}$, we must have $(W / L)_{1} \\approx 12.5(W / L)_{2}$. In a sense, a high gain requires a \"strong\" input device and a \"weak\" load device. In addition to disproportionately wide or long transistors (and hence a large input or load capacitance), a high gain translates to another important limitation: reduction in allowable voltage swings. Specifically, since in Figure 3.16, $I_{D 1}=\\left|I_{D 2}\\right|$,\n\n$$\n\\begin{equation*}\n\\mu_{n}\\left(\\frac{W}{L}\\right)_{1}\\left(V_{G S 1}-V_{T H 1}\\right)^{2}=\\mu_{p}\\left(\\frac{W}{L}\\right)_{2}\\left(V_{G S 2}-V_{T H 2}\\right)^{2} \\tag{3.36}\n\\end{equation*}\n$$\n\nif $\\lambda=0$, revealing that\n\n[Image descriptions and extra information have been omitted for brevity]\n\n#### Nanometer Design Notes\n\nLet us design and simulate a CS stage with a diode-connected PMOS load in $40-\\mathrm{nm}$ technology. We select $W / L=$ $5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ for the NMOS device and $1 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ for the PMOS device. The large-signal I-V characteristic is shown in the figure. We observe that the circuit provides a small-signal gain of about 1.5 for an input range of roughly 0.4 V to 0.5 V . (In this dc sweep, $V_{\\text {out }}$ can reach $V_{D D}$ when the input transistor is off.)\n\n[Image descriptions and extra information have been omitted for brevity]\n\n$$\n\\begin{equation*}\n\\frac{\\left|V_{G S 2}-V_{T H 2}\\right|}{V_{G S 1}-V_{T H 1}}=A_{v} \\tag{3.37}\n\\end{equation*}\n$$\n\nIn the above example, the overdrive voltage of $M_{2}$ must be 5 times that of $M_{1}$. For example, with $V_{G S 1}-V_{T H 1}=100 \\mathrm{mV}$ and $\\left|V_{T H 2}\\right|=0.3 \\mathrm{~V}$, we have $\\left|V_{G S 2}\\right|=0.8 \\mathrm{~V}$, severely limiting the output swing. This is another example of the trade-offs suggested by the analog design octagon. Note that, with diode-connected loads, the swing is constrained by both the required overdrive voltage and the threshold voltage. That is, even with a small overdrive, the output level cannot exceed $V_{D D}-\\left|V_{T H}\\right|$.\n\nAn interesting paradox arises here if we write $g_{m}=\\mu C_{o x}(W / L)$ $V_{G S}-V_{T H} \\mid$. The voltage gain of the circuit is then given by\n\n$$\n\\begin{align*}\n\\left|A_{v}\\right| & =\\frac{g_{m 1}}{g_{m 2}}  \\tag{3.38}\\\\\n& =\\frac{\\mu_{n} C_{o x}(W / L)_{1}\\left(V_{G S 1}-V_{T H 1}\\right)}{\\mu_{p} C_{o x}(W / L)_{2}\\left|V_{G S 2}-V_{T H 2}\\right|} \\tag{3.39}\n\\end{align*}\n$$\n\nEquation (3.39) implies that $A_{v}$ is inversely proportional to $\\left|V_{G S 2}-V_{T H 2}\\right|$. It is left for the reader to resolve the seemingly opposite trends suggested by (3.37) and (3.39).\n\n#### Example 3.6\n\nIn the circuit of Figure 3.17, $M_{1}$ is biased in saturation with a drain current equal to $I_{1}$. The current source $I_{S}=0.75 I_{1}$ is added to the circuit. How is (3.37) modified for this case? Assume $\\lambda=0$.\n\n[Image descriptions and extra information have been omitted for brevity]\n\nFigure 3.17\n\n#### Solution\n\nSince $\\left|I_{D 2}\\right|=I_{1} / 4$, we have\n\n$$\n\\begin{align*}\nA_{v} & =-\\frac{g_{m 1}}{g_{m 2}}  \\tag{3.40}\\\\\n& =-\\sqrt{\\frac{4 \\mu_{n}(W / L)_{1}}{\\mu_{p}(W / L)_{2}}} \\tag{3.41}\n\\end{align*}\n$$\n\nMoreover,\n\n$$"
},
{
    "text": "In certain CMOS technologies, producing resistors with precise values or a compact physical size can be challenging (refer to Chapter 19). Therefore, it is preferable to substitute $R_{D}$ in Fig. 3.4(a) with a MOS transistor.\n\nA MOSFET can function as a small-signal resistor when its gate and drain are short-circuited [Fig. 3.10(a)]. This setup, akin as a \"diode-connected\" device, parallels its bipolar equivalent and exhibits small-signal behavior akin to a two-terminal resistor. It is important to note that the transistor is\nIn certain CMOS technologies, producing resistors with precise values or a compact physical size can be challenging (refer to Chapter 19). Therefore, it is preferable to substitute $R_{D}$ in Fig. 3.4(a) with a MOS transistor.\n\nA MOSFET can function as a small-signal resistor when its gate and drain are short-circuited [Fig. 3.10(a)]. This setup, known as a \"diode-connected\" device, parallels its bipolar equivalent and exhibits small-signal behavior akin to a two-terminal resistor. It's important to note that the transistor is always in saturation due to the drain and gate sharing the same potential. Using the small-signal equivalent circuit shown in Fig. 3.10(b) to determine the device's impedance, we obtain $V_{1}=V_{X}$ and $I_{X}=V_{X} / r_{O}+g_{m} V_{X}$. This implies that the impedance of the diode is simply $V_{X} / I_{X}=\\left(1 / g_{m}\\right) \\| r_{O} \\approx 1 / g_{m}$. If body effect is present, we can use the circuit in Fig. 3.11 to write $V_{1}=-V_{X}$, $V_{b s}=-V_{X}$, and\n\n$$\n\\begin{equation*}\n\\left(g_{m}+g_{m b}\\right) V_{X}+\\frac{V_{X}}{r_{O}}=I_{X} \\tag{3.21}\n\\end{equation*}\n$$\n\nThe diagrams show diode-connected NMOS and PMOS devices. M1 is an NMOS transistor with its gate and drain connected, and M2 is a PMOS transistor similarly connected with its gate and drain tied together.\n\nThe circuit represents a small-signal equivalent of a diode-connected device, including a voltage-controlled current source, a resistor, and two voltage sources.\n\nThe circuit represents a small-signal equivalent of a diode-connected device, including a voltage-controlled current source, a resistor, and two voltage sources. It is used to analyze the equivalent resistance of a diode-connected MOSFET.\n\nFigure 3.11 (a) shows the arrangement for measuring the equivalent resistance of a diode-connected MOSFET, and (b) shows the small-signal equivalent circuit.\n\nIt follows that\n\n$$\n\\begin{align*}\n\\frac{V_{X}}{I_{X}} & =\\frac{1}{g_{m}+g_{m b}+r_{O}^{-1}}  \\tag{3.22}\\\\\n& =\\frac{1}{g_{m}+g_{m b}} \\| r_{O}  \\tag{3.23}\\\\\n& \\approx \\frac{1}{g_{m}+g_{m b}} \\tag{3.24}\n\\end{align*}\n$$\n\nIn general, $V_{X} / I_{X}=\\left(1 / g_{m}\\right)\\left\\|r_{O}\\right\\|\\left(1 / g_{m b}\\right)$. Interestingly, the impedance seen at the source of $M_{1}$ is lower when body effect is included. An intuitive explanation of this effect is left as an exercise for the reader.\n\nFrom a large-signal perspective, a diode-connected device acts as a \"square-root\" operator if its current is considered the input and its $V_{G S}$ or $V_{G S}-V_{T H}$ the output (why?). We will return to this point later.\n\n#### Example 3.5\n\nConsider the circuit shown in Fig. 3.12(a). In some cases, we are interested in the impedance seen looking into the source, $R_{X}$. Determine $R_{X}$ if $\\lambda=0$.\n\nThe circuit is a common-source amplifier with an NMOS transistor M1. The inductor ZL is connected between VDD and the output node Vout. The resistor Rx is connected from the output node Vout to ground. The input voltage is applied to the gate of the NMOS, and the output is taken at Vout.\n\nThe circuit is a small-signal model used to determine the impedance seen at the source with lambda=0. It includes voltage sources V1 and Vx, and current sources gmV1 and gmbVbs, along with a resistor ZL. The circuit is analyzed by setting all independent sources to zero and applying a test voltage source.\n\nFigure 3.12 shows the impedance seen at the source with $\\lambda=0$.\n\n#### Solution\n\nTo determine $R_{X}$, we set all independent sources to zero, draw the small-signal model, and apply a voltage source as shown in Fig. 3.12(b). Since $V_{1}=-V_{X}$ and $V_{b s}=-V_{X}$, we have\n\n$$\n\\begin{equation*}\n\\left(g_{m}+g_{m b}\\right) V_{X}=I_{X} \\tag{3.25}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\frac{V_{X}}{I_{X}}=\\frac{1}{g_{m}+g_{m b}} \\tag{3.26}\n\\end{equation*}\n$$\n\nThis result should not be surprising: the topologies in Fig. 3.12(a) and Fig. 3.11(a) are similar except that the drain of $M_{1}$ in Fig. 3.12(b) is not at ac ground. This difference does not manifest itself if $\\lambda=0$. We sometimes say, \"looking into the source of a MOSFET, we see $1 / g_{m}$,\" assuming implicitly that $\\lambda=\\gamma=0$.\n\nWe now study a common-source stage with a diode-connected load (Fig. 3.13). With negligible channel-length modulation, (3.24) can be substituted in (3.10) for the load impedance, yielding\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1} \\frac{1}{g_{m 2}+g_{m b 2}}  \\tag{3.27}\\\\\n& =-\\frac{g_{m 1}}{g_{m 2}} \\frac{1}{1+\\eta} \\tag{3.28}\n\\end{align*}\n$$\n\nwhere $\\eta=g_{m b 2} / g_{m 2}$. Expressing $g_{m 1}$ and $g_{m 2}$ in terms of device dimensions and bias currents, we have\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{1} I_{D 1}}}{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{2} I_{D 2}}} \\frac{1}{1+\\eta} \\tag{3.29}\n\\end{equation*}\n$$\n\nand, since $I_{D 1}=I_{D 2}$,\n\n$$\n\\begin{equation*}\nA_{v}=-\\sqrt{\\frac{(W / L)_{1}}{(W / L)_{2}}} \\frac{1}{1+\\eta} \\tag{3.30}\n\\end{equation*}\n$$\n\nThis equation reveals an interesting property: if the variation of $\\eta$ with the output voltage is neglected, the gain is independent of the bias currents and voltages (so long as $M_{1}$ stays in saturation). In other words, as the input and output signal levels vary, the gain remains relatively constant, indicating that the input-output characteristic is relatively linear.\n\nThe circuit is a common-source (CS) stage with a diode-connected NMOS load (M2). The input voltage is applied to the gate of M1, and the output is taken from the drain of M1. M2 is connected in a diode configuration, providing a load for M1.\n\nThe linear behavior of the circuit can also be confirmed by large-signal analysis. Neglecting channellength modulation for simplicity, we have in Fig. 3.13\n\n$$\n\\begin{equation*}\n\\frac{1}{2} \\mu_{n} C_{o x}\\left(\\frac{W}{L}\\right)_{1}\\left(V_{i n}-V_{T H 1}\\right)^{2}=\\frac{1}{2} \\mu_{n} C_{o x}\\left(\\frac{W}{L}\\right)_{2}\\left(V_{D D}-V_{o u t}-V_{T H 2}\\right)^{2} \\tag{3.31}\n\\end{equation*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\n\\sqrt{\\left(\\frac{W}{L}\\right)_{1}}\\left(V_{i n}-V_{T H 1}\\right)=\\sqrt{\\left(\\frac{W}{L}\\right)_{2}}\\left(V_{D D}-V_{o u t}-V_{T H 2}\\right) \\tag{3.32}\n\\end{equation*}\n$$\n\nThus, if the variation of $V_{T H 2}$ with $V_{\\text {out }}$ is small, the circuit exhibits a linear input-output characteristic. In essence, the squaring function performed by $M_{1}$ (from the input voltage to its drain current) and the square root function performed by $M_{2}$ (from its drain current to its overdrive) act as $f^{-1}(f(x))=x$.\n\nThe small-signal gain can also be computed by differentiating both sides with respect to $V_{i n}$ :\n\n$$\n\\begin{equation*}\n\\sqrt{\\left(\\frac{W}{L}\\right)_{1}}=\\sqrt{\\left(\\frac{W}{L}\\right)_{2}}\\left(-\\frac{\\partial V_{\\text {out }}}{\\partial V_{\\text {in }}}-\\frac{\\partial V_{T H 2}}{\\partial V_{i n}}\\right) \\tag{3.33}\n\\end{equation*}\n$$\n\nwhich, upon application of the chain rule $\\partial V_{T H 2} / \\partial V_{\\text {in }}=\\left(\\partial V_{T H 2} / \\partial V_{\\text {out }}\\right)\\left(\\partial V_{\\text {out }} / \\partial V_{\\text {in }}\\right)=\\eta\\left(\\partial V_{\\text {out }} / \\partial V_{\\text {in }}\\right)$, reduces to\n\n$$\n\\begin{equation*}\n\\frac{\\partial V_{\\text {out }}}{\\partial V_{\\text {in }}}=-\\sqrt{\\frac{(W / L)_{1}}{(W / L)_{2}}} \\frac{1}{1+\\eta} \\tag{3.34}\n\\end{equation*}\n$$\n\nIt is instructive to study the overall large-signal characteristic of the circuit as well. But let us first consider the circuit shown in Fig. 3.14(a). What is the final value of $V_{\\text {out }}$ if $I_{1}$ drops to zero? As $I_{1}$ decreases, so does the overdrive of $M_{2}$. Thus, for small $I_{1}, V_{G S 2} \\approx V_{T H 2}$ and $V_{\\text {out }} \\approx V_{D D}-V_{T H 2}$. In reality, the subthreshold conduction in $M_{2}$ eventually brings $V_{\\text {out }}$ to $V_{D D}$ if $I_{D}$ approaches zero, but at very low current levels, the finite capacitance at the output node slows down the change from $V_{D D}-V_{T H 2}$ to $V_{D D}$. This is illustrated in the time-domain waveforms of Fig. 3.14(b). For this reason, in circuits that have frequent switching activity, we assume that $V_{\\text {out }}$ remains around $V_{D D}-V_{T H 2}$ when $I_{1}$ falls to small values.\n\nThe circuit is a simple configuration with an NMOS transistor M2 connected in a diode configuration with its gate and drain tied together. It is biased by a current source I1 and has a capacitive load Cp at the output node Vout. The circuit is powered by VDD.\n\nFigure 3.14 (b) shows the variation of source voltage versus time.\n\nNow we return to the circuit of Fig. 3.13. Plotted in Fig. 3.15 versus $V_{i n}$, the output voltage equals $V_{D D}-V_{T H 2}$ if $V_{i n}<V_{T H 1}$. For $V_{i n}>V_{T H 1}$, Eq. (3.32) holds and $V_{\\text {out }}$ follows an approximately straight line. As $V_{\\text {in }}$ exceeds $V_{\\text {out }}+V_{T H 1}$ (beyond point $A$ ), $M_{1}$ enters the triode region, and the characteristic becomes nonlinear.\n\nFigure 3.15 shows the input-output characteristic of a CS stage with diode-connected load.\n\nThe diode-connected load of Fig. 3.13 can be implemented with a PMOS device as well. Shown in Fig. 3.16, the circuit is free from body effect, providing a small-signal voltage gain equal to\n\n$$\n\\begin{equation*}\nA_{v}=-\\sqrt{\\frac{\\mu_{n}(W / L)_{1}}{\\mu_{p}(W / L)_{2}}} \\tag{3.35}\n\\end{equation*}\n$$\n\nwhere channel-length modulation is neglected.\n\nFigure 3.16 shows a CS stage with a diode-connected PMOS device.\n\nEquations (3.30) and (3.35) indicate that the gain of a common-source stage with diode-connected load is a relatively weak function of the device dimensions. For example, to achieve a gain of 5, $\\mu_{n}(W / L)_{1} /\\left[\\mu_{p}(W / L)_{2}\\right]=25$, implying that, with $\\mu_{n} \\approx 2 \\mu_{p}$, we must have $(W / L)_{1} \\approx 12.5(W / L)_{2}$. In a sense, a high gain requires a \"strong\" input device and a \"weak\" load device. In addition to disproportionately wide or long transistors (and hence a large input or load capacitance), a high gain translates to another important limitation: reduction in allowable voltage swings. Specifically, since in Fig. 3.16, $I_{D 1}=\\left|I_{D 2}\\right|$,\n\n$$\n\\begin{equation*}\n\\mu_{n}\\left(\\frac{W}{L}\\right)_{1}\\left(V_{G S 1}-V_{T H 1}\\right)^{2}=\\mu_{p}\\left(\\frac{W}{L}\\right)_{2}\\left(V_{G S 2}-V_{T H 2}\\right)^{2} \\tag{3.36}\n\\end{equation*}\n$$\n\nif $\\lambda=0$, revealing that\n\n#### Nanometer Design Notes\n\nLet us design and simulate a CS stage with a diode-connected PMOS load in $40-\\mathrm{nm}$ technology. We select $W / L=$ $5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ for the NMOS device and $1 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ for the PMOS device. The large-signal I-V characteristic is shown in the figure. We observe that the circuit provides a small-signal gain of about 1.5 for an input range of roughly 0.4 V to 0.5 V . (In this dc sweep, $V_{\\text {out }}$ can reach $V_{D D}$ when the input transistor is off.)\n\nThe graph is a large-signal I-V characteristic plot, typically used to illustrate the relationship between input and output voltages in a transistor circuit. The x-axis represents the input voltage ($V_{in}$) in volts, ranging from 0 to 1 V. The y-axis represents the output voltage ($V_{out}$) in volts, also ranging from 0 to 1 V. Both axes use a linear scale.\n\nThe graph displays a curve that starts at the top-left corner, indicating a high output voltage when the input voltage is near 0 V. As the input voltage increases, the output voltage decreases sharply. This behavior is indicative of a diode-connected PMOS load, where the output voltage drops as the input voltage increases, typical in a common-source amplifier configuration.\n\nKey features of the graph include:\n- A steep decline in $V_{out}$ as $V_{in}$ approaches 0.4 V, suggesting a strong inversion region.\n- A more gradual slope between 0.4 V and 0.5 V, which corresponds to the small-signal gain region mentioned in the context, where the gain is about 1.5.\n- Beyond 0.5 V, the output voltage continues to decrease but at a slower rate, indicating the saturation of the transistor.\n\nThe graph does not have specific annotations, but the critical region of interest is around the input voltage range of 0.4 V to 0.5 V, where the circuit provides the specified gain. The output voltage can reach close to 1 V when the input transistor is off, aligning with $V_{DD}$ as mentioned in the context.\n\n$$\n\\begin{equation*}\n\\frac{\\left|V_{G S 2}-V_{T H 2}\\right|}{V_{G S 1}-V_{T H 1}}=A_{v} \\tag{3.37}\n\\end{equation*}\n$$\n\nIn the above"
},
{
    "text": "In certain CMOS technologies, it is challenging to create resistors with precise values or a practical physical size (refer to Chapter 19). As a result, it is advantageous to substitute $R_{D}$ in Fig. 3.4(a) with a MOS transistor.\n\nA MOSFET can function as a small-signal resistor if its gate and drain are connected [Fig. 3.10(a)]. Referred to as a \"diode-connected\" device, similar to its bipolar equivalent, this setup exhibits small-signal behavior akin to that of a two-terminal resistor. It is important to note that the transistor is always in saturation because the drain and the gate share the same potential. Utilizing the small-signal equivalent depicted in Fig. 3.10(b) to determine the impedance of the device, we express $V_{1}=V_{X}$ and $I_{X}=V_{X} / r_{O}+g_{m} V_{X}$. This implies that the impedance of the diode is simply $V_{X} / I_{X}=\\left(1 / g_{m}\\right) \\| r_{O} \\approx 1 / g_{m}$. In the presence of body effect, we can employ the circuit in Fig. 3.11 to write $V_{1}=-V_{X}, V_{b s}=-V_{X}$, and\n\n$$\n\\begin{equation*}\n\\left(g_{m}+g_{m b}\\right) V_{X}+\\frac{V_{X}}{r_{O}}=I_{X} \\tag{3.21}\n\\end{equation*}\n$$\n\nFor the provided images, the descriptions have been transformed into text, and the text has been rephrased while maintaining the original meaning and length. The figures and their descriptions are as follows:\n\n- **Figure 3.10 (a)**: Illustrates diode-connected NMOS and PMOS devices. M1 has its gate and drain connected, and M2 is similarly connected with its gate and drain tied together.\n- **Figure 3.10 (b)**: Represents a small-signal equivalent of a diode-connected device, incorporating a voltage-controlled current source, a resistor, and two voltage sources.\n- **Figure 3.11 (a)(b)**: Depicts a small-signal equivalent of a diode-connected device, including a voltage-controlled current source, a resistor, and two voltage sources, used to analyze the equivalent resistance of a diode-connected MOSFET.\n- **Figure 3.12 (a)**: Shows a common-source amplifier with an NMOS transistor M1. An inductor ZL is connected between VDD and the output node Vout. The resistor Rx is connected from the output node Vout to ground. The input voltage is applied to the gate of the NMOS, and the output is taken at Vout.\n- **Figure 3.12 (b)**: Displays a small-signal model used to determine the impedance seen at the source with lambda=0. It includes voltage sources V1 and Vx, and current sources gmV1 and gmbVbs, along with a resistor ZL. The circuit is analyzed by setting all independent sources to zero and applying a test voltage source.\n- **Figure 3.13**: Represents a common-source (CS) stage with a diode-connected NMOS load (M2). The input voltage is applied to the gate of M1, and the output is taken from the drain of M1. M2 is connected in a diode configuration, providing a load for M1.\n- **Figure 3.14 (a)**: Illustrates a simple configuration with an NMOS transistor M2 connected in a diode configuration with its gate and drain tied together. It is biased by a current source I1 and has a capacitive load Cp at the output node Vout. The circuit is powered by VDD.\n- **Figure 3.14 (b)**: Consists of two plots stacked vertically, representing the behavior of a diode-connected NMOS transistor circuit with a stepped bias current.\n- **Figure 3.15**: Is a plot of the input-output characteristic of a common-source (CS) stage with a diode-connected load.\n- **Figure 3.16**: Depicts a common-source (CS) stage with a diode-connected PMOS load. The PMOS transistor M2 is diode-connected, meaning its gate and drain are connected together. This configuration provides a load for the NMOS transistor M1. The input voltage Vin is applied to the gate of M1, and the output voltage Vout is taken from the drain of M1, which is also the drain of M2.\n- **Figure 3.17**: Shows a typical cascode amplifier with NMOS M1 and PMOS M2. The current source IS is connected between VDD and Vout, and another current source I1 is connected between Vout and ground. The input is applied at Vin and the output is taken from Vout.\n\nThe large-signal I-V characteristic graph illustrates the relationship between input and output voltages in a transistor circuit. The x-axis represents the input voltage ($V_{in}$) ranging from 0 to 1 V, and the y-axis represents the output voltage ($V_{out}$) also ranging from 0 to 1 V. The graph displays a curve that starts at the top-left corner, indicating a high output voltage when the input voltage is near 0 V. As the input voltage increases, the output voltage decreases sharply. This behavior is indicative of a diode-connected PMOS load, where the output voltage drops as the input voltage increases, typical in a common-source amplifier configuration.\n\nThe key features of the graph include a steep decline in $V_{out}$ as $V_{in}$ approaches 0.4 V, suggesting a strong inversion region, a more gradual slope between 0.4 V and 0.5 V, which corresponds to the small-signal gain region mentioned in the context, where the gain is about 1.5, and beyond 0.5 V, the output voltage continues to decrease but at a slower rate, indicating the saturation of the transistor.\n\nThe graph does not have specific annotations, but the critical region of interest is around the input voltage range of 0.4 V to 0.5 V, where the circuit provides the specified gain. The output voltage can reach close to 1 V when the input transistor is off, aligning with $V_{DD}$ as mentioned in the context."
},
{
    "text": "In certain CMOS technologies, it is challenging to produce resistors with precise values or a compact physical size (refer to Chapter 19). As a result, it is preferable to substitute $R_{D}$ in Fig. 3.4(a) with a MOS transistor.\n\nA MOSFET can function as a small-signal resistor when its gate and drain are shorted [Fig. 3.10(a)]. This configuration, known as a \"diode-connected\" device, exhibits small-signal behavior akin to a two-terminal resistor, similar to its bipolar counterpart. It is important to note that the transistor is always in saturation since the drain and gate share the same potential. Using the small-signal equivalent circuit shown in Fig. 3.10(b) to determine the device's impedance, we have $V_{1}=V_{X}$ and $I_{X}=V_{X} / r_{O}+g_{m} V_{X}$. This means the impedance of the diode is simply $V_{X} / I_{X}=\\left(1 / g_{m}\\right) \\| r_{O} \\approx 1 / g_{m}$. In the presence of body effect, the circuit in Fig. 3.11 allows us to write $V_{1}=-V_{X}, V_{b s}=-V_{X}$, and\n\n$$\n\\begin{equation*}\n\\left(g_{m}+g_{m b}\\right) V_{X}+\\frac{V_{X}}{r_{O}}=I_{X} \\tag{3.21}\n\\end{equation*}\n$$\n\n[Image descriptions and extra information have been omitted for brevity]\n\nIt follows that\n\n$$\n\\begin{align*}\n\\frac{V_{X}}{I_{X}} & =\\frac{1}{g_{m}+g_{m b}+r_{O}^{-1}}  \\tag{3.22}\\\\\n& =\\frac{1}{g_{m}+g_{m b}} \\| r_{O}  \\tag{3.23}\\\\\n& \\approx \\frac{1}{g_{m}+g_{m b}} \\tag{3.24}\n\\end{align*}\n$$\n\nIn general, $V_{X} / I_{X}=\\left(1 / g_{m}\\right)\\left\\|r_{O}\\right\\|\\left(1 / g_{m b}\\right)$. Interestingly, the impedance observed at the source of $M_{1}$ is lower when body effect is considered. The intuitive explanation for this effect is left as an exercise for the reader.\n\nFrom a large-signal perspective, a diode-connected device acts as a \"square-root\" operator if its current is considered the input and its $V_{G S}$ or $V_{G S}-V_{T H}$ the output (why?). We will revisit this point later.\n\n#### Example 3.5\n\nConsider the circuit shown in Fig. 3.12(a). In some cases, we are interested in the impedance seen looking into the source, $R_{X}$. Determine $R_{X}$ if $\\lambda=0$.\n\n[Image descriptions and extra information have been omitted for brevity]\n\nFigure 3.12 Impedance seen at the source with $\\lambda=0$.\n\n#### Solution\n\nTo determine $R_{X}$, we set all independent sources to zero, draw the small-signal model, and apply a voltage source as shown in Fig. 3.12(b). Since $V_{1}=-V_{X}$ and $V_{b s}=-V_{X}$, we have\n\n$$\n\\begin{equation*}\n\\left(g_{m}+g_{m b}\\right) V_{X}=I_{X} \\tag{3.25}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\frac{V_{X}}{I_{X}}=\\frac{1}{g_{m}+g_{m b}} \\tag{3.26}\n\\end{equation*}\n$$\n\nThis result should not be surprising: the topologies in Fig. 3.12(a) and Fig. 3.11(a) are similar except that the drain of $M_{1}$ in Fig. 3.12(b) is not at ac ground. This difference does not manifest itself if $\\lambda=0$. We sometimes say, \"looking into the source of a MOSFET, we see $1 / g_{m}$,\" assuming implicitly that $\\lambda=\\gamma=0$.\n\nWe now study a common-source stage with a diode-connected load (Fig. 3.13). With negligible channel-length modulation, (3.24) can be substituted in (3.10) for the load impedance, yielding\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1} \\frac{1}{g_{m 2}+g_{m b 2}}  \\tag{3.27}\\\\\n& =-\\frac{g_{m 1}}{g_{m 2}} \\frac{1}{1+\\eta} \\tag{3.28}\n\\end{align*}\n$$\n\nwhere $\\eta=g_{m b 2} / g_{m 2}$. Expressing $g_{m 1}$ and $g_{m 2}$ in terms of device dimensions and bias currents, we have\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{1} I_{D 1}}}{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{2} I_{D 2}}} \\frac{1}{1+\\eta} \\tag{3.29}\n\\end{equation*}\n$$\n\nand, since $I_{D 1}=I_{D 2}$,\n\n$$\n\\begin{equation*}\nA_{v}=-\\sqrt{\\frac{(W / L)_{1}}{(W / L)_{2}}} \\frac{1}{1+\\eta} \\tag{3.30}\n\\end{equation*}\n$$\n\nThis equation reveals an interesting property: if the variation of $\\eta$ with the output voltage is neglected, the gain is independent of the bias currents and voltages (so long as $M_{1}$ stays in saturation). In other words, as the input and output signal levels vary, the gain remains relatively constant, indicating that the input-output characteristic is relatively linear.\n\n[Image descriptions and extra information have been omitted for brevity]\n\nThe linear behavior of the circuit can also be confirmed by large-signal analysis. Neglecting channel-length modulation for simplicity, we have in Fig. 3.13\n\n$$\n\\begin{equation*}\n\\frac{1}{2} \\mu_{n} C_{o x}\\left(\\frac{W}{L}\\right)_{1}\\left(V_{i n}-V_{T H 1}\\right)^{2}=\\frac{1}{2} \\mu_{n} C_{o x}\\left(\\frac{W}{L}\\right)_{2}\\left(V_{D D}-V_{o u t}-V_{T H 2}\\right)^{2} \\tag{3.31}\n\\end{equation*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\n\\sqrt{\\left(\\frac{W}{L}\\right)_{1}}\\left(V_{i n}-V_{T H 1}\\right)=\\sqrt{\\left(\\frac{W}{L}\\right)_{2}}\\left(V_{D D}-V_{\\text {out }}-V_{T H 2}\\right) \\tag{3.32}\n\\end{equation*}\n$$\n\nThus, if the variation of $V_{T H 2}$ with $V_{\\text {out }}$ is small, the circuit exhibits a linear input-output characteristic. In essence, the squaring function performed by $M_{1}$ (from the input voltage to its drain current) and the square root function performed by $M_{2}$ (from its drain current to its overdrive) act as $f^{-1}(f(x))=x$.\n\nThe small-signal gain can also be computed by differentiating both sides with respect to $V_{i n}$ :\n\n$$\n\\begin{equation*}\n\\sqrt{\\left(\\frac{W}{L}\\right)_{1}}=\\sqrt{\\left(\\frac{W}{L}\\right)_{2}}\\left(-\\frac{\\partial V_{\\text {out }}}{\\partial V_{\\text {in }}}-\\frac{\\partial V_{T H 2}}{\\partial V_{i n}}\\right) \\tag{3.33}\n\\end{equation*}\n$$\n\nwhich, upon application of the chain rule $\\partial V_{T H 2} / \\partial V_{\\text {in }}=\\left(\\partial V_{T H 2} / \\partial V_{\\text {out }}\\right)\\left(\\partial V_{\\text {out }} / \\partial V_{\\text {in }}\\right)=\\eta\\left(\\partial V_{\\text {out }} / \\partial V_{\\text {in }}\\right)$, reduces to\n\n$$\n\\begin{equation*}\n\\frac{\\partial V_{\\text {out }}}{\\partial V_{\\text {in }}}=-\\sqrt{\\frac{(W / L)_{1}}{(W / L)_{2}}} \\frac{1}{1+\\eta} \\tag{3.34}\n\\end{equation*}\n$$\n\nIt is instructive to study the overall large-signal characteristic of the circuit as well. But let us first consider the circuit shown in Fig. 3.14(a). What is the final value of $V_{\\text {out }}$ if $I_{1}$ drops to zero? As $I_{1}$ decreases, so does the overdrive of $M_{2}$. Thus, for small $I_{1}, V_{G S 2} \\approx V_{T H 2}$ and $V_{\\text {out }} \\approx V_{D D}-V_{T H 2}$. In reality, the subthreshold conduction in $M_{2}$ eventually brings $V_{\\text {out }}$ to $V_{D D}$ if $I_{D}$ approaches zero, but at very low current levels, the finite capacitance at the output node slows down the change from $V_{D D}-V_{T H 2}$ to $V_{D D}$. This is illustrated in the time-domain waveforms of Fig. 3.14(b). For this reason, in circuits that have frequent switching activity, we assume that $V_{\\text {out }}$ remains around $V_{D D}-V_{T H 2}$ when $I_{1}$ falls to small values.\n\n[Image descriptions and extra information have been omitted for brevity]\n\nNow we return to the circuit of Fig. 3.13. Plotted in Fig. 3.15 versus $V_{i n}$, the output voltage equals $V_{D D}-V_{T H 2}$ if $V_{i n}<V_{T H 1}$. For $V_{i n}>V_{T H 1}$, Eq. (3.32) holds and $V_{\\text {out }}$ follows an approximately straight line. As $V_{\\text {in }}$ exceeds $V_{\\text {out }}+V_{T H 1}$ (beyond point $A$ ), $M_{1}$ enters the triode region, and the characteristic becomes nonlinear.\n\n[Image descriptions and extra information have been omitted for brevity]\n\nThe diode-connected load of Fig. 3.13 can be implemented with a PMOS device as well. Shown in Fig. 3.16, the circuit is free from body effect, providing a small-signal voltage gain equal to\n\n$$\n\\begin{equation*}\nA_{v}=-\\sqrt{\\frac{\\mu_{n}(W / L)_{1}}{\\mu_{p}(W / L)_{2}}} \\tag{3.35}\n\\end{equation*}\n$$\n\nwhere channel-length modulation is neglected.\n\n[Image descriptions and extra information have been omitted for brevity]\n\nEquations (3.30) and (3.35) indicate that the gain of a common-source stage with diode-connected load is a relatively weak function of the device dimensions. For example, to achieve a gain of 5 , $\\mu_{n}(W / L)_{1} /\\left[\\mu_{p}(W / L)_{2}\\right]=25$, implying that, with $\\mu_{n} \\approx 2 \\mu_{p}$, we must have $(W / L)_{1} \\approx 12.5(W / L)_{2}$. In a sense, a high gain requires a \"strong\" input device and a \"weak\" load device. In addition to disproportionately wide or long transistors (and hence a large input or load capacitance), a high gain translates to another important limitation: reduction in allowable voltage swings. Specifically, since in Fig. 3.16, $I_{D 1}=\\left|I_{D 2}\\right|$,\n\n$$\n\\begin{equation*}\n\\mu_{n}\\left(\\frac{W}{L}\\right)_{1}\\left(V_{G S 1}-V_{T H 1}\\right)^{2}=\\mu_{p}\\left(\\frac{W}{L}\\right)_{2}\\left(V_{G S 2}-V_{T H 2}\\right)^{2} \\tag{3.36}\n\\end{equation*}\n$$\n\nif $\\lambda=0$, revealing that\n\n#### Nanometer Design Notes\n\nLet us design and simulate a CS stage with a diode-connected PMOS load in $40-\\mathrm{nm}$ technology. We select $W / L=$ $5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ for the NMOS device and $1 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ for the PMOS device. The large-signal I-V characteristic is shown in the figure. We observe that the circuit provides a small-signal gain of about 1.5 for an input range of roughly 0.4 V to 0.5 V . (In this dc sweep, $V_{\\text {out }}$ can reach $V_{D D}$ when the input transistor is off.)\n\n[Image descriptions and extra information have been omitted for brevity]\n\n$$\n\\begin{equation*}\n\\frac{\\left|V_{G S 2}-V_{T H 2}\\right|}{V_{G S 1}-V_{T H 1}}=A_{v} \\tag{3.37}\n\\end{equation*}\n$$\n\nIn the above example, the overdrive voltage of $M_{2}$ must be 5 times that of $M_{1}$. For example, with $V_{G S 1}-V_{T H 1}=100 \\mathrm{mV}$ and $\\left|V_{T H 2}\\right|=0.3 \\mathrm{~V}$, we have $\\left|V_{G S 2}\\right|=0.8 \\mathrm{~V}$, severely limiting the output swing. This is another example of the trade-offs suggested by the analog design octagon. Note that, with diode-connected loads, the swing is constrained by both the required overdrive voltage and the threshold voltage. That is, even with a small overdrive, the output level cannot exceed $V_{D D}-\\left|V_{T H}\\right|$.\n\nAn interesting paradox arises here if we write $g_{m}=\\mu C_{o x}(W / L)$ $V_{G S}-V_{T H} \\mid$. The voltage gain of the circuit is then given by\n\n$$\n\\begin{align*}\n\\left|A_{v}\\right| & =\\frac{g_{m 1}}{g_{m 2}}  \\tag{3.38}\\\\\n& =\\frac{\\mu_{n} C_{o x}(W / L)_{1}\\left(V_{G S 1}-V_{T H 1}\\right)}{\\mu_{p} C_{o x}(W / L)_{2}\\left|V_{G S 2}-V_{T H 2}\\right|} \\tag{3.39}\n\\end{align*}\n$$\n\nEquation (3.39) implies that $A_{v}$ is inversely proportional to $\\left|V_{G S 2}-V_{T H 2}\\right|$. It is left for the reader to resolve the seemingly opposite trends suggested by (3.37) and (3.39).\n\n#### Example 3.6\n\nIn the circuit of Fig. 3.17, $M_{1}$ is biased in saturation with a drain current equal to $I_{1}$. The current source $I_{S}=0.75 I_{1}$ is added to the circuit. How is (3.37) modified for this case? Assume $\\lambda=0$.\n\n[Image descriptions and extra information have been omitted for brevity]\n\n#### Solution\n\nSince $\\left|I_{D 2}\\right|=I_{1} / 4$, we have\n\n$$\n\\begin{align*}\nA_{v} & =-\\frac{g_{m 1}}{g_{m 2}}  \\tag{3.40}\\\\\n& =-\\sqrt{\\frac{4 \\mu_{n}(W / L)_{1}}{\\mu_{p}(W / L)_{2}}} \\tag{3.41}\n\\end{align*}\n$$\n\nMoreover,\n\n$$\n\\begin{equation*}\n\\mu_{n}\\left(\\frac{W}{L}\\right)_{1}\\left(V_{G S 1}-V_{T H 1}\\right)^{2}=4 \\mu_{p}\\left(\\frac{W}{L}\\right)_{2}\\left(V_{G S 2}-V_{T H 2}\\right)^{2} \\tag{3.42}\n\\end{equation*}\n$$\n\nyielding\n\n$$\n\\begin{equation*}\n\\frac{\\left|V_{G S 2}-V_{T H 2}\\right|}{V_{G S 1}-V_{T H 1}}=\\frac{A_{v}}{4} \\tag{3.43}\n\\end{equation*}\n$$\n\nThus, for a gain of 5, the overdrive of $M_{2}$ need be only 1.25 times that of $M_{1}"
},
{
    "text": "In certain CMOS technologies, it is challenging to produce resistors with precise values or a compact physical size (refer to Chapter 19). Therefore, it is preferable to substitute $R_{D}$ in Figure 3.4(a) with a MOS transistor.\n\nA MOSFET can function as a small-signal resistor if its gate and drain are short-circuited (see Figure 3.10(a)). This configuration, known as a \"diode-connected\" device, parallels its bipolar counterpart and exhibits small-signal behavior akin to a two-terminal resistor. It is important to note that the transistor is always in saturation due to the identical potential at the drain and gate. By using the small-signal equivalent circuit shown in Figure 3.10(b) to determine the device's impedance, we can write $V_{1}=V_{X}$ and $I_{X}=V_{X} / r_{O}+g_{m} V_{X}$. This implies that the impedance of the diode is simply $V_{X} / I_{X}=\\left(1 / g_{m}\\right) \\| r_{O} \\approx 1 / g_{m}$. If body effect is present, we can use the circuit in Figure 3.11 to write $V_{1}=-V_{X}, V_{b s}=-V_{X}$, and\n\n$$\n\\begin{equation*}\n\\left(g_{m}+g_{m b}\\right) V_{X}+\\frac{V_{X}}{r_{O}}=I_{X} \\tag{3.21}\n\\end{equation*}\n$$\n\nRefer to the descriptions of Figures 3.10 (a), 3.10 (b), and 3.11 (a)(b) for further details on the configurations and circuits involved.\n\nIt can be deduced that\n\n$$\n\\begin{align*}\n\\frac{V_{X}}{I_{X}} & =\\frac{1}{g_{m}+g_{m b}+r_{O}^{-1}}  \\tag{3.22}\\\\\n& =\\frac{1}{g_{m}+g_{m b}} \\| r_{O}  \\tag{3.23}\\\\\n& \\approx \\frac{1}{g_{m}+g_{m b}} \\tag{3.24}\n\\end{align*}\n$$\n\nIn general, $V_{X} / I_{X}=\\left(1 / g_{m}\\right)\\left\\|r_{O}\\right\\|\\left(1 / g_{m b}\\right)$. Interestingly, the impedance observed at the source of $M_{1}$ is lower when body effect is considered. An intuitive explanation of this effect is left as an exercise for the reader.\n\nFrom a large-signal perspective, a diode-connected device acts as a \"square-root\" operator if its current is considered the input and its $V_{G S}$ or $V_{G S}-V_{T H}$ the output (why?). We will revisit this point later.\n\n#### Example 3.5\n\nConsider the circuit shown in Figure 3.12(a). In some cases, we are interested in the impedance seen looking into the source, $R_{X}$. Determine $R_{X}$ if $\\lambda=0$.\nRefer to the descriptions of Figures 3.12(a) and 3.12(b) for further details on the circuit and small-signal model.\n\nFigure 3.12 Impedance seen at the source with $\\lambda=0$.\n\n#### Solution\n\nTo determine $R_{X}$, we set all independent sources to zero, draw the small-signal model, and apply a voltage source as shown in Figure 3.12(b). Since $V_{1}=-V_{X}$ and $V_{b s}=-V_{X}$, we have\n\n$$\n\\begin{equation*}\n\\left(g_{m}+g_{m b}\\right) V_{X}=I_{X} \\tag{3.25}\n\\end{equation*}\n$$\n\nand\n\n$$\n\\begin{equation*}\n\\frac{V_{X}}{I_{X}}=\\frac{1}{g_{m}+g_{m b}} \\tag{3.26}\n\\end{equation*}\n$$\n\nThis result should not be surprising: the topologies in Figure 3.12(a) and Figure 3.11(a) are similar except that the drain of $M_{1}$ in Figure 3.12(b) is not at ac ground. This difference does not manifest itself if $\\lambda=0$. We sometimes say, \"looking into the source of a MOSFET, we see $1 / g_{m}$,\" assuming implicitly that $\\lambda=\\gamma=0$.\n\nWe now study a common-source stage with a diode-connected load (Figure 3.13). With negligible channel-length modulation, (3.24) can be substituted in (3.10) for the load impedance, yielding\n\n$$\n\\begin{align*}\nA_{v} & =-g_{m 1} \\frac{1}{g_{m 2}+g_{m b 2}}  \\tag{3.27}\\\\\n& =-\\frac{g_{m 1}}{g_{m 2}} \\frac{1}{1+\\eta} \\tag{3.28}\n\\end{align*}\n$$\n\nwhere $\\eta=g_{m b 2} / g_{m 2}$. Expressing $g_{m 1}$ and $g_{m 2}$ in terms of device dimensions and bias currents, we have\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{1} I_{D 1}}}{\\sqrt{2 \\mu_{n} C_{o x}(W / L)_{2} I_{D 2}}} \\frac{1}{1+\\eta} \\tag{3.29}\n\\end{equation*}\n$$\n\nand, since $I_{D 1}=I_{D 2}$,\n\n$$\n\\begin{equation*}\nA_{v}=-\\sqrt{\\frac{(W / L)_{1}}{(W / L)_{2}}} \\frac{1}{1+\\eta} \\tag{3.30}\n\\end{equation*}\n$$\n\nThis equation reveals an interesting property: if the variation of $\\eta$ with the output voltage is neglected, the gain is independent of the bias currents and voltages (so long as $M_{1}$ stays in saturation). In other words, as the input and output signal levels vary, the gain remains relatively constant, indicating that the input-output characteristic is relatively linear.\nRefer to the description of Figure 3.13 for further details on the CS stage with diode-connected load.\n\nThe linear behavior of the circuit can also be confirmed by large-signal analysis. Neglecting channellength modulation for simplicity, we have in Figure 3.13\n\n$$\n\\begin{equation*}\n\\frac{1}{2} \\mu_{n} C_{o x}\\left(\\frac{W}{L}\\right)_{1}\\left(V_{i n}-V_{T H 1}\\right)^{2}=\\frac{1}{2} \\mu_{n} C_{o x}\\left(\\frac{W}{L}\\right)_{2}\\left(V_{D D}-V_{o u t}-V_{T H 2}\\right)^{2} \\tag{3.31}\n\\end{equation*}\n$$\n\nand hence\n\n$$\n\\begin{equation*}\n\\sqrt{\\left(\\frac{W}{L}\\right)_{1}}\\left(V_{i n}-V_{T H 1}\\right)=\\sqrt{\\left(\\frac{W}{L}\\right)_{2}}\\left(V_{D D}-V_{\\text {out }}-V_{T H 2}\\right) \\tag{3.32}\n\\end{equation*}\n$$\n\nThus, if the variation of $V_{T H 2}$ with $V_{\\text {out }}$ is small, the circuit exhibits a linear input-output characteristic. In essence, the squaring function performed by $M_{1}$ (from the input voltage to its drain current) and the square root function performed by $M_{2}$ (from its drain current to its overdrive) act as $f^{-1}(f(x))=x$.\n\nThe small-signal gain can also be computed by differentiating both sides with respect to $V_{i n}$ :\n\n$$\n\\begin{equation*}\n\\sqrt{\\left(\\frac{W}{L}\\right)_{1}}=\\sqrt{\\left(\\frac{W}{L}\\right)_{2}}\\left(-\\frac{\\partial V_{\\text {out }}}{\\partial V_{\\text {in }}}-\\frac{\\partial V_{T H 2}}{\\partial V_{i n}}\\right) \\tag{3.33}\n\\end{equation*}\n$$\n\nwhich, upon application of the chain rule $\\partial V_{T H 2} / \\partial V_{\\text {in }}=\\left(\\partial V_{T H 2} / \\partial V_{\\text {out }}\\right)\\left(\\partial V_{\\text {out }} / \\partial V_{\\text {in }}\\right)=\\eta\\left(\\partial V_{\\text {out }} / \\partial V_{\\text {in }}\\right)$, reduces to\n\n$$\n\\begin{equation*}\n\\frac{\\partial V_{\\text {out }}}{\\partial V_{\\text {in }}}=-\\sqrt{\\frac{(W / L)_{1}}{(W / L)_{2}}} \\frac{1}{1+\\eta} \\tag{3.34}\n\\end{equation*}\n$$\n\nIt is instructive to study the overall large-signal characteristic of the circuit as well. But let us first consider the circuit shown in Figure 3.14(a). What is the final value of $V_{\\text {out }}$ if $I_{1}$ drops to zero? As $I_{1}$ decreases, so does the overdrive of $M_{2}$. Thus, for small $I_{1}, V_{G S 2} \\approx V_{T H 2}$ and $V_{\\text {out }} \\approx V_{D D}-V_{T H 2}$. In reality, the subthreshold conduction in $M_{2}$ eventually brings $V_{\\text {out }}$ to $V_{D D}$ if $I_{D}$ approaches zero, but at very low current levels, the finite capacitance at the output node slows down the change from $V_{D D}-V_{T H 2}$ to $V_{D D}$. This is illustrated in the time-domain waveforms of Figure 3.14(b). For this reason, in circuits that have frequent switching activity, we assume that $V_{\\text {out }}$ remains around $V_{D D}-V_{T H 2}$ when $I_{1}$ falls to small values.\nRefer to the descriptions of Figures 3.14(a) and 3.14(b) for further details on the diode-connected device with stepped bias current and the variation of source voltage versus time.\n\nNow we return to the circuit of Figure 3.13. Plotted in Figure 3.15 versus $V_{i n}$, the output voltage equals $V_{D D}-V_{T H 2}$ if $V_{i n}<V_{T H 1}$. For $V_{i n}>V_{T H 1}$, Eq. (3.32) holds and $V_{\\text {out }}$ follows an approximately straight line. As $V_{\\text {in }}$ exceeds $V_{\\text {out }}+V_{T H 1}$ (beyond point $A$ ), $M_{1}$ enters the triode region, and the characteristic becomes nonlinear.\nRefer to the description of Figure 3.15 for further details on the input-output characteristic of a CS stage with diode-connected load.\n\nThe diode-connected load of Figure 3.13 can be implemented with a PMOS device as well. Shown in Figure 3.16, the circuit is free from body effect, providing a small-signal voltage gain equal to\n\n$$\n\\begin{equation*}\nA_{v}=-\\sqrt{\\frac{\\mu_{n}(W / L)_{1}}{\\mu_{p}(W / L)_{2}}} \\tag{3.35}\n\\end{equation*}\n$$\n\nwhere channel-length modulation is neglected.\nRefer to the description of Figure 3.16 for further details on the CS stage with diodeconnected PMOS device.\n\nEquations (3.30) and (3.35) indicate that the gain of a common-source stage with diode-connected load is a relatively weak function of the device dimensions. For example, to achieve a gain of 5, $\\mu_{n}(W / L)_{1} /\\left[\\mu_{p}(W / L)_{2}\\right]=25$, implying that, with $\\mu_{n} \\approx 2 \\mu_{p}$, we must have $(W / L)_{1} \\approx 12.5(W / L)_{2}$. In a sense, a high gain requires a \"strong\" input device and a \"weak\" load device. In addition to disproportionately wide or long transistors (and hence a large input or load capacitance), a high gain translates to another important limitation: reduction in allowable voltage swings. Specifically, since in Figure 3.16, $I_{D 1}=\\left|I_{D 2}\\right|$,\n\n$$\n\\begin{equation*}\n\\mu_{n}\\left(\\frac{W}{L}\\right)_{1}\\left(V_{G S 1}-V_{T H 1}\\right)^{2}=\\mu_{p}\\left(\\frac{W}{L}\\right)_{2}\\left(V_{G S 2}-V_{T H 2}\\right)^{2} \\tag{3.36}\n\\end{equation*}\n$$\n\nif $\\lambda=0$, revealing that\n\n#### Nanometer Design Notes\n\nLet us design and simulate a CS stage with a diode-connected PMOS load in $40-\\mathrm{nm}$ technology. We select $W / L=$ $5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ for the NMOS device and $1 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ for the PMOS device. The large-signal I-V characteristic is shown in the figure. We observe that the circuit provides a small-signal gain of about 1.5 for an input range of roughly 0.4 V to 0.5 V . (In this dc sweep, $V_{\\text {out }}$ can reach $V_{D D}$ when the input transistor is off.)\nRefer to the description of the large-signal I-V characteristic for further details on the plot and its features.\n\n$$\n\\begin{equation*}\n\\frac{\\left|V_{G S 2}-V_{T H 2}\\right|}{V_{G S 1}-V_{T H 1}}=A_{v} \\tag{3.37}\n\\end{equation*}\n$$\n\nIn the above example, the overdrive voltage of $M_{2}$ must be 5 times that of $M_{1}$. For example, with $V_{G S 1}-V_{T H 1}=100 \\mathrm{mV}$ and $\\left|V_{T H 2}\\right|=0.3 \\mathrm{~V}$, we have $\\left|V_{G S 2}\\right|=0.8 \\mathrm{~V}$, severely limiting the output swing. This is another example of the trade-offs suggested by the analog design octagon. Note that, with diode-connected loads, the swing is constrained by both the required overdrive voltage and the threshold voltage. That is, even with a small overdrive, the output level cannot exceed $V_{D D}-\\left|V_{T H}\\right|$.\n\nAn interesting paradox arises here if we write $g_{m}=\\mu C_{o x}(W / L)$ $V_{G S}-V_{T H} \\mid$. The voltage gain of the circuit is then given by\n\n$$\n\\begin{align*}\n\\left|A_{v}\\right| & =\\frac{g_{m 1}}{g_{m 2}}  \\tag{3.38}\\\\\n& =\\frac{\\mu_{n} C_{o x}(W / L)_{1}\\left(V_{G S 1}-V_{T H 1}\\right)}{\\mu_{p} C_{o x}(W / L)_{2}\\left|V_{G S 2}-V_{T H 2}\\right|} \\tag{3.39}\n\\end{align*}\n$$\n\nEquation (3.39) implies that $A_{v}$ is inversely proportional to $\\left|V_{G S 2}-V_{T H 2}\\right|$. It is left for the reader to resolve the seemingly opposite trends suggested by (3.37) and (3.39).\n\n#### Example 3.6\n\nIn the circuit of Figure 3.17, $M_{1}$ is biased in saturation with a drain current equal to $I_{1}$. The current source $I_{S}=0.75 I_{1}$ is added to the circuit. How is (3.37) modified for this case? Assume $\\lambda=0$.\nRefer to the description of Figure 3.17 for further details on the cascode amplifier circuit.\n\n#### Solution\n\nSince $\\left|I_{D 2}\\right|=I_{1} / 4$, we have\n\n$$\n\\begin{align*}\nA_{v} & =-\\frac{g_{m 1}}{g_{m 2}}  \\tag{3.40}\\\\\n& =-\\sqrt{\\frac{4 \\mu_{n}(W / L)_{1}}{\\mu_{p}(W / L)_{2}}} \\tag{3.41}\n\\end{align*}\n$$\n\nMoreover,\n\n$$\n\\begin{equation*}\n\\mu_{n}\\left(\\frac{W}{L}\\right)_{1}\\left(V_{G S 1}-V_{T H 1}\\right)^{2}=4 \\mu_{p}\\left(\\frac{W}{L}\\right)_{2}\\left(V_{G S 2}-V_{T H 2}\\right)^{2} \\tag{3.42}\n\\end{equation*}\n"
},
{
    "text": "In scenarios necessitating a substantial voltage gain within a single stage, the equation $A_{v}=-g_{m} R_{D}$ indicates that we should elevate the load impedance of the CS stage. However, with a resistor or diode-connected load, boosting the load resistance results in a significant dc voltage drop across the load, thereby constraining the output voltage swing.\n\nA more viable solution is to substitute the load with a component that does not adhere to Ohm's law, such as a current source. Briefly outlined in Example 3.3, the resultant circuit is depicted in Fig. 3.18, where both transistors function in saturation. Given that the total impedance at the output node equals $r_{O 1} \\| r_{O 2}$, the gain is expressed as\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 1}\\left(r_{O 1} \\| r_{O 2}\\right) \\tag{3.46}\n\\end{equation*}\n$$\n\nThe critical aspect here is that the output impedance and the minimum required $\\left|V_{D S}\\right|$ of $M_{2}$ are less tightly linked than the value and voltage drop of a resistor; the former does not need to comply with Ohm's law, whereas the latter must. The voltage $\\left|V_{D S 2, \\text { min }}\\right|=\\left|V_{G S 2}-V_{T H 2}\\right|$ can be diminished to below a hundred millivolts by simply enlarging the width of $M_{2}$. If $r_{O 2}$ is insufficiently high, the length and width of $M_{2}$ can be augmented to achieve a smaller $\\lambda$ while preserving the same overdrive voltage. The trade-off is the increased capacitance introduced by $M_{2}$ at the output node.\nimage_name:Figure 3.18 CS stage with current-source load\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\n]\nextrainfo:The circuit is a common-source (CS) stage with a current-source load. The PMOS M2 serves as a load for the NMOS M1, providing high output impedance. The bias voltage Vb sets the operating point of M2. The voltage-controlled current source g_m2V2 and resistor r_o2 model the output characteristics of M2.\nIt should be noted that the output bias voltage of the circuit in Fig. 3.18 is not well-defined. Therefore, the stage is reliably biased only when a feedback loop drives $V_{\\text {out }}$ to a known value (Chapter 8). The large-signal analysis of the circuit is left as an exercise for the reader.\n\nAs detailed in Chapter 2, the output impedance of MOSFETs at a given drain current can be adjusted by altering the channel length, i.e., to the first order, $\\lambda \\propto 1 / L$, and hence $r_{O} \\propto L / I_{D}$. Since the gain of the stage shown in Fig. 3.18 is proportional to $r_{O 1} \\| r_{O 2}$, it can be inferred that longer transistors result in higher voltage gain.\n\nLet's examine $M_{1}$ and $M_{2}$ individually. If $L_{1}$ is increased by a factor of $\\alpha(>1)$, then $W_{1}$ may also need to be proportionally scaled. This is because, for a given drain current, $V_{G S 1}-V_{T H 1} \\propto 1 / \\sqrt{(W / L)_{1}}$, meaning that if $W_{1}$ is not scaled, the overdrive voltage rises, limiting the output voltage swing. Additionally, since $g_{m 1} \\propto \\sqrt{(W / L)_{1}}$, increasing only $L_{1}$ reduces $g_{m 1}$.\n\nIn applications where these factors are insignificant, $W_{1}$ can remain unchanged while $L_{1}$ increases. Thus, the intrinsic gain of $M_{1}$ can be expressed as\n\n$$\n\\begin{equation*}\ng_{m 1} r_{O 1}=\\sqrt{2\\left(\\frac{W}{L}\\right)_{1} \\mu_{n} C_{o x} I_{D}} \\frac{1}{\\lambda I_{D}} \\tag{3.47}\n\\end{equation*}\n$$\n\nThis indicates that the gain rises with $L$ because $\\lambda$ is more strongly influenced by $L$ than $g_{m}$. Also, note that $g_{m} r_{O}$ decreases as $I_{D}$ increases.\n\nIncreasing $L_{2}$ while maintaining $W_{2}$ constant raises $r_{O 2}$ and thereby the voltage gain, but at the expense of a higher $\\left|V_{D S 2, \\min }\\right|$, which is necessary to keep $M_{2}$ in saturation.\n\n#### Example 3.8\n\nCompare the maximum output voltage swings of CS stages with resistive and current-source loads.\n\n#### Solution\n\nFor the stage with a resistive load [Fig. 3.19(a)], the maximum output voltage approaches $V_{D D}$ (when $V_{i n}$ drops to around $\\left.V_{T H 1}\\right)$). The minimum is the value that positions $M_{1}$ at the brink of the triode region, $V_{i n}-V_{T H 1}$.\nimage_name:Figure 3.19(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\n]\nextrainfo:The circuit diagram (a) illustrates a common-source (CS) stage with a resistive load. The NMOS transistor M1 amplifies the input signal Vin, and the resistor RD provides a load for the output. The maximum output voltage swing is near VDD, and the minimum is determined by the threshold voltage VTH1. The output voltage is labeled as Vout.\nimage_name:Figure 3.19(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\n]\nextrainfo:The circuit diagram (b) shows a CS stage with a current-source load. M1 is an NMOS transistor with its source connected to ground, the drain to the output node Vout, and the gate to the input node Vin. M2 is a PMOS transistor with its source connected to VDD, the drain to Vout, and the gate to a bias voltage Vb. The resistor RD is connected between VDD and Vout. This setup allows for a maximum output voltage swing determined by VDD and the threshold voltages of the transistors.\n\nFigure 3.19 Output swing in CS stage with (a) resistive load and (b) current-source load.\nFor the stage with a current-source load [Fig. 3.19(b)], the maximum output voltage is the one that places $M_{2}$ at the edge of the triode region, $V_{D D}-\\left|V_{G S 2}-V_{T H 2}\\right|$. Consequently, the latter offers smaller swings than the former but can consistently achieve higher gain if $L_{1}$ and $L_{2}$ are increased."
},
{
    "text": "In scenarios necessitating a substantial voltage gain within a single stage, the relationship $A_{v}=-g_{m} R_{D}$ indicates that the load impedance of the CS stage should be augmented. However, with a resistor or diode-connected load, boosting the load resistance results in a significant dc voltage drop across the load, thereby constraining the output voltage swing.\n\nA more viable solution is to substitute the load with a device that does not conform to Ohm's law, such as a current source. Briefly outlined in Example 3.3, the resultant circuit is depicted in Fig. 3.18, where both transistors function in saturation. Given that the total impedance at the output node equals $r_{O 1} \\| r_{O 2}$, the gain is expressed as\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 1}\\left(r_{O 1} \\| r_{O 2}\\right) \\tag{3.46}\n\\end{equation*}\n$$\n\nThe crucial aspect here is that the output impedance and the minimum required $\\left|V_{D S}\\right|$ of $M_{2}$ are less tightly linked than the resistance value and voltage drop of a resistor; the former is not bound by Ohm's law, whereas the latter is. The voltage $\\left|V_{D S 2, \\text { min }}\\right|=\\left|V_{G S 2}-V_{T H 2}\\right|$ can be minimized to below a hundred millivolts by merely expanding the width of $M_{2}$. If $r_{O 2}$ is insufficiently high, the length and width of $M_{2}$ can be enlarged to attain a smaller $\\lambda$ while preserving the same overdrive voltage. The trade-off is the increased capacitance introduced by $M_{2}$ at the output node.\nimage_name:Figure 3.18 CS stage with current-source load\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\n]\nextrainfo:The circuit is a common-source (CS) stage with a current-source load. The PMOS M2 serves as a load for the NMOS M1, providing high output impedance. The bias voltage Vb sets the operating point of M2. The voltage-controlled current source g_m2V2 and resistor r_o2 model the output characteristics of M2.\nIt should be noted that the output bias voltage of the circuit in Fig. 3.18 is not well-defined. Therefore, the stage is reliably biased only when a feedback loop drives $V_{\\text {out }}$ to a known value (Chapter 8). The large-signal analysis of the circuit is an exercise left for the reader.\n\nAs detailed in Chapter 2, the output impedance of MOSFETs at a given drain current can be adjusted by altering the channel length, i.e., to a first approximation, $\\lambda \\propto 1 / L$, and thus $r_{O} \\propto L / I_{D}$. Since the gain of the stage in Fig. 3.18 is proportional to $r_{O 1} \\| r_{O 2}$, it can be inferred that longer transistors result in higher voltage gain.\n\nLet's examine $M_{1}$ and $M_{2}$ individually. If $L_{1}$ is increased by a factor of $\\alpha(>1)$, then $W_{1}$ may also need to be proportionally scaled. This is because, for a given drain current, $V_{G S 1}-V_{T H 1} \\propto 1 / \\sqrt{(W / L)_{1}}$, meaning if $W_{1}$ is not scaled, the overdrive voltage rises, limiting the output voltage swing. Additionally, since $g_{m 1} \\propto \\sqrt{(W / L)_{1}}$, increasing only $L_{1}$ reduces $g_{m 1}$.\n\nIn cases where these factors are negligible, $W_{1}$ can remain unchanged while $L_{1}$ increases. Thus, the intrinsic gain of $M_{1}$ can be expressed as\n\n$$\n\\begin{equation*}\ng_{m 1} r_{O 1}=\\sqrt{2\\left(\\frac{W}{L}\\right)_{1} \\mu_{n} C_{o x} I_{D}} \\frac{1}{\\lambda I_{D}} \\tag{3.47}\n\\end{equation*}\n$$\n\nindicating that the gain rises with $L$ because $\\lambda$ is more strongly influenced by $L$ than $g_{m}$. Also, note that $g_{m} r_{O}$ decreases as $I_{D}$ increases.\n\nEnhancing $L_{2}$ while keeping $W_{2}$ constant raises $r_{O 2}$ and thus the voltage gain, but this comes at the expense of a higher $\\left|V_{D S 2, \\min }\\right|$, which is necessary to keep $M_{2}$ in saturation.\n\n#### Example 3.8\n\nCompare the maximum output voltage swings of CS stages with resistive and current-source loads.\n\n#### Solution\n\nFor the stage with a resistive load [Fig. 3.19(a)], the maximum output voltage approaches $V_{D D}$ (when $V_{i n}$ drops to around $\\left.V_{T H 1}\\right)$). The minimum is the value that positions $M_{1}$ at the brink of the triode region, $V_{i n}-V_{T H 1}$.\nimage_name:Figure 3.19(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\n]\nextrainfo:The circuit diagram (a) illustrates a common-source (CS) stage with a resistive load. The NMOS transistor M1 amplifies the input signal Vin, and the resistor RD acts as the load for the output. The maximum output voltage swing is near VDD, and the minimum is dictated by the threshold voltage VTH1. The output voltage is denoted as Vout.\nimage_name:Figure 3.19(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\n]\nextrainfo:The circuit diagram (b) shows a CS stage with a current-source load. M1 is an NMOS transistor with its source connected to ground, the drain to the output node Vout, and the gate to the input node Vin. M2 is a PMOS transistor with its source connected to VDD, the drain to Vout, and the gate to a bias voltage Vb. The resistor RD is connected between VDD and Vout. This setup allows for a maximum output voltage swing influenced by VDD and the threshold voltages of the transistors.\n\nFigure 3.19 Output swing in CS stage with (a) resistive load and (b) current-source load.\nFor the stage with a current-source load [Fig. 3.19(b)], the maximum output voltage is the one that places $M_{2}$ at the edge of the triode region, $V_{D D}-\\left|V_{G S 2}-V_{T H 2}\\right|$. Consequently, the latter offers smaller swings than the former but can consistently achieve higher gain if $L_{1}$ and $L_{2}$ are increased."
},
{
    "text": "In scenarios necessitating a substantial voltage gain within a single stage, the equation $A_{v}=-g_{m} R_{D}$ indicates that we should elevate the load impedance of the CS stage. However, with a resistor or diode-connected load, boosting the load resistance results in a significant dc drop across the load, thereby constraining the output voltage swing.\n\nA more viable solution is to substitute the load with a device that does not conform to Ohm's law, such as a current source. Briefly outlined in Example 3.3, the resultant circuit is depicted in Fig. 3.18, where both transistors function in saturation. Given that the total impedance at the output node equals $r_{O 1} \\| r_{O 2}$, the gain is expressed as\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 1}\\left(r_{O 1} \\| r_{O 2}\\right) \\tag{3.46}\n\\end{equation*}\n$$\n\nThe crucial aspect here is that the output impedance and the minimal required $\\left|V_{D S}\\right|$ of $M_{2}$ are less tightly linked than the value and voltage drop of a resistor; the former is not bound by Ohm's law, whereas the latter is. The voltage $\\left|V_{D S 2, \\text { min }}\\right|=\\left|V_{G S 2}-V_{T H 2}\\right|$ can be decreased to below a hundred millivolts by simply widening $M_{2}$. If $r_{O 2}$ is insufficiently high, both the length and width of $M_{2}$ can be increased to achieve a lower $\\lambda$ while retaining the same overdrive voltage. The drawback is the increased capacitance introduced by $M_{2}$ at the output node.\nimage_name:Figure 3.18 CS stage with current-source load\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\n]\nextrainfo:The circuit is a common-source (CS) stage with a current-source load. The PMOS M2 acts as a load for the NMOS M1, providing a high output impedance. The bias voltage Vb is used to set the operating point of M2. The voltage-controlled current source g_m2V2 and resistor r_o2 model the output characteristics of M2.\nIt should be noted that the output bias voltage of the circuit in Fig. 3.18 is not well-defined. Therefore, the stage is reliably biased only if a feedback loop drives $V_{\\text {out }}$ to a known value (Chapter 8). The large-signal analysis of the circuit is left as an exercise for the reader.\n\nAs discussed in Chapter 2, the output impedance of MOSFETs at a given drain current can be adjusted by altering the channel length, i.e., to the first order, $\\lambda \\propto 1 / L$, and thus $r_{O} \\propto L / I_{D}$. Since the gain of the stage shown in Fig. 3.18 is proportional to $r_{O 1} \\| r_{O 2}$, we can infer that longer transistors result in higher voltage gain.\n\nLet's examine $M_{1}$ and $M_{2}$ individually. If $L_{1}$ is increased by a factor of $\\alpha(>1)$, then $W_{1}$ may also need to be proportionally increased. This is because, for a given drain current, $V_{G S 1}-V_{T H 1} \\propto 1 / \\sqrt{(W / L)_{1}}$, meaning if $W_{1}$ is not scaled, the overdrive voltage rises, limiting the output voltage swing. Additionally, since $g_{m 1} \\propto \\sqrt{(W / L)_{1}}$, increasing only $L_{1}$ reduces $g_{m 1}$.\n\nIn applications where these factors are insignificant, $W_{1}$ can remain unchanged while $L_{1}$ increases. Consequently, the intrinsic gain of $M_{1}$ can be expressed as\n\n$$\n\\begin{equation*}\ng_{m 1} r_{O 1}=\\sqrt{2\\left(\\frac{W}{L}\\right)_{1} \\mu_{n} C_{o x} I_{D}} \\frac{1}{\\lambda I_{D}} \\tag{3.47}\n\\end{equation*}\n$$\n\nThis indicates that the gain rises with $L$ because $\\lambda$ is more strongly influenced by $L$ than $g_{m}$. Furthermore, note that $g_{m} r_{O}$ decreases as $I_{D}$ increases.\n\nBoosting $L_{2}$ while keeping $W_{2}$ constant raises $r_{O 2}$ and thus the voltage gain, but at the expense of a higher $\\left|V_{D S 2, \\min }\\right|$, which is necessary to keep $M_{2}$ in saturation.\n\n#### Example 3.8\n\nCompare the maximum output voltage swings of CS stages with resistive and current-source loads.\n\n#### Solution\n\nFor the stage with a resistive load [Fig. 3.19(a)], the maximum output voltage is near $V_{D D}$ (when $V_{i n}$ drops to around $\\left.V_{T H 1}\\right)$). The minimum is the value that positions $M_{1}$ at the edge of the triode region, $V_{i n}-V_{T H 1}$.\nimage_name:Figure 3.19(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\n]\nextrainfo:The circuit diagram (a) shows a common-source (CS) stage with a resistive load. The NMOS transistor M1 is used to amplify the input signal Vin, and the resistor RD provides a load for the output. The maximum output voltage swing is near VDD, and the minimum is determined by the threshold voltage VTH1. The output voltage is labeled as Vout.\nimage_name:Figure 3.19(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\n]\nextrainfo:The circuit diagram (b) shows a CS stage with a current-source load. M1 is an NMOS transistor with its source connected to ground, the drain connected to the output node Vout, and the gate connected to the input node Vin. M2 is a PMOS transistor with its source connected to VDD, the drain connected to Vout, and the gate connected to a bias voltage Vb. The resistor RD is connected between VDD and Vout. This configuration allows for a maximum output voltage swing determined by VDD and the threshold voltages of the transistors.\n\nFigure 3.19 Output swing in CS stage with (a) resistive load and (b) current-source load.\nFor the stage with a current-source load [Fig. 3.19(b)], the maximum output voltage is that which places $M_{2}$ at the edge of the triode region, $V_{D D}-\\left|V_{G S 2}-V_{T H 2}\\right|$. Thus, the latter actually provides smaller swings than the former, but can always achieve a higher gain if $L_{1}$ and $L_{2}$ are increased."
},
{
    "text": "In scenarios necessitating substantial voltage gain within a single stage, the relationship $A_{v}=-g_{m} R_{D}$ indicates that the load impedance of the CS stage should be augmented. However, with resistive or diode-connected loads, boosting the load resistance results in a significant dc drop across the load, thereby constraining the output voltage swing.\n\nA more viable solution is to substitute the load with a device that does not conform to Ohm's law, such as a current source. Briefly outlined in Example 3.3, the resultant circuit is depicted in Fig. 3.18, where both transistors operate in saturation. Given that the total impedance at the output node equals $r_{O 1} \\| r_{O 2}$, the gain is expressed as\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 1}\\left(r_{O 1} \\| r_{O 2}\\right) \\tag{3.46}\n\\end{equation*}\n$$\n\nThe crux of the matter is that the output impedance and the minimum required $\\left|V_{D S}\\right|$ of $M_{2}$ are less tightly linked than the value and voltage drop of a resistor; the former does not need to adhere to Ohm's law, whereas the latter must. The voltage $\\left|V_{D S 2, \\text { min }}\\right|=\\left|V_{G S 2}-V_{T H 2}\\right|$ can be minimized to below a hundred millivolts by simply enlarging the width of $M_{2}$. If $r_{O 2}$ is insufficiently high, both the length and width of $M_{2}$ can be increased to attain a smaller $\\lambda$ while preserving the same overdrive voltage. The trade-off is the increased capacitance introduced by $M_{2}$ at the output node.\nimage_name:Figure 3.18 CS stage with current-source load\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\n]\nextrainfo:The circuit is a common-source (CS) stage with a current-source load. The PMOS M2 acts as a load for the NMOS M1, providing high output impedance. The bias voltage Vb sets the operating point of M2. The voltage-controlled current source g_m2V2 and resistor r_o2 model the output characteristics of M2.\nIt should be noted that the output bias voltage of the circuit in Fig. 3.18 is not well-defined. Consequently, the stage is reliably biased only when a feedback loop drives $V_{\\text {out }}$ to a known value (Chapter 8). The large-signal analysis of the circuit is left as an exercise for the reader.\n\nAs detailed in Chapter 2, the output impedance of MOSFETs at a given drain current can be adjusted by altering the channel length, i.e., to a first approximation, $\\lambda \\propto 1 / L$, and thus $r_{O} \\propto L / I_{D}$. Since the gain of the stage shown in Fig. 3.18 is proportional to $r_{O 1} \\| r_{O 2}$, it can be inferred that longer transistors yield higher voltage gain.\n\nConsider $M_{1}$ and $M_{2}$ individually. If $L_{1}$ is increased by a factor of $\\alpha(>1)$, then $W_{1}$ may also need to be proportionally scaled. This is because, for a given drain current, $V_{G S 1}-V_{T H 1} \\propto 1 / \\sqrt{(W / L)_{1}}$, meaning if $W_{1}$ is not scaled, the overdrive voltage rises, limiting the output voltage swing. Additionally, since $g_{m 1} \\propto \\sqrt{(W / L)_{1}}$, increasing only $L_{1}$ reduces $g_{m 1}$.\n\nIn cases where these factors are negligible, $W_{1}$ can remain constant while $L_{1}$ increases. Thus, the intrinsic gain of $M_{1}$ can be expressed as\n\n$$\n\\begin{equation*}\ng_{m 1} r_{O 1}=\\sqrt{2\\left(\\frac{W}{L}\\right)_{1} \\mu_{n} C_{o x} I_{D}} \\frac{1}{\\lambda I_{D}} \\tag{3.47}\n\\end{equation*}\n$$\n\nThis indicates that the gain rises with $L$ because $\\lambda$ is more strongly influenced by $L$ than $g_{m}$. Additionally, note that $g_{m} r_{O}$ decreases as $I_{D}$ increases.\n\nBoosting $L_{2}$ while keeping $W_{2}$ constant raises $r_{O 2}$ and thereby the voltage gain, but this comes at the expense of a higher $\\left|V_{D S 2, \\min }\\right|$, which is necessary to keep $M_{2}$ in saturation.\n\n#### Example 3.8\n\nCompare the maximum output voltage swings of CS stages with resistive and current-source loads.\n\n#### Solution\n\nFor the stage with a resistive load [Fig. 3.19(a)], the maximum output voltage is near $V_{D D}$ (when $V_{i n}$ drops to around $\\left.V_{T H 1}\\right)$. The minimum is the value that positions $M_{1}$ at the edge of the triode region, $V_{i n}-V_{T H 1}$.\nimage_name:Figure 3.19(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\n]\nextrainfo:The circuit diagram (a) illustrates a common-source (CS) stage with a resistive load. The NMOS transistor M1 amplifies the input signal Vin, and the resistor RD serves as the load for the output. The maximum output voltage swing is close to VDD, and the minimum is determined by the threshold voltage VTH1. The output voltage is designated as Vout.\nimage_name:Figure 3.19(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\n]\nextrainfo:The circuit diagram (b) shows a CS stage with a current-source load. M1 is an NMOS transistor with its source connected to ground, the drain to the output node Vout, and the gate to the input node Vin. M2 is a PMOS transistor with its source connected to VDD, the drain to Vout, and the gate to a bias voltage Vb. The resistor RD connects VDD to Vout. This setup allows for a maximum output voltage swing influenced by VDD and the threshold voltages of the transistors.\n\nFigure 3.19 Output swing in CS stage with (a) resistive load and (b) current-source load.\nFor the stage with a current-source load [Fig. 3.19(b)], the maximum output voltage is the one that places $M_{2}$ at the edge of the triode region, $V_{D D}-\\left|V_{G S 2}-V_{T H 2}\\right|$. Hence, the latter actually provides smaller swings than the former, but can always achieve a higher gain if $L_{1}$ and $L_{2}$ are increased."
},
{
    "text": "In scenarios necessitating a substantial voltage gain within a single stage, the equation $A_{v}=-g_{m} R_{D}$ indicates that enhancing the load impedance of the CS stage is beneficial. However, with a resistor or diode-connected load, boosting the load resistance results in a significant dc voltage drop across the load, thereby constraining the output voltage swing.\n\nA more viable solution is to substitute the load with a component that does not adhere to Ohm's law, such as a current source. Briefly outlined in Example 3.3, the resultant circuit is depicted in Fig. 3.18, where both transistors function in saturation. Given that the total impedance at the output node equals $r_{O 1} \\| r_{O 2}$, the gain is expressed as\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 1}\\left(r_{O 1} \\| r_{O 2}\\right) \\tag{3.46}\n\\end{equation*}\n$$\n\nThe crucial aspect here is that the output impedance and the minimal required $\\left|V_{D S}\\right|$ of $M_{2}$ are less tightly linked than the value and voltage drop of a resistor; the former is not bound by Ohm's law, whereas the latter is. The voltage $\\left|V_{D S 2, \\text { min }}\\right|=\\left|V_{G S 2}-V_{T H 2}\\right|$ can be diminished to below a hundred millivolts by merely expanding the width of $M_{2}$. If $r_{O 2}$ is insufficiently high, the length and width of $M_{2}$ can be augmented to attain a lower $\\lambda$ while preserving the same overdrive voltage. The drawback is the increased capacitance introduced by $M_{2}$ at the output node.\nimage_name:Figure 3.18 CS stage with current-source load\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\n]\nextrainfo:The circuit is a common-source (CS) stage with a current-source load. The PMOS M2 serves as a load for the NMOS M1, offering high output impedance. The bias voltage Vb is utilized to set the operating point of M2. The voltage-controlled current source g_m2V2 and resistor r_o2 model the output characteristics of M2.\nIt is noteworthy that the output bias voltage of the circuit in Fig. 3.18 is not well-defined. Consequently, the stage is reliably biased only if a feedback loop drives $V_{\\text {out }}$ to a known value (Chapter 8). The large-signal analysis of the circuit is an exercise left for the reader.\n\nAs detailed in Chapter 2, the output impedance of MOSFETs at a given drain current can be adjusted by altering the channel length, i.e., to the first order, $\\lambda \\propto 1 / L$, and thus $r_{O} \\propto L / I_{D}$. Since the gain of the stage shown in Fig. 3.18 is proportional to $r_{O 1} \\| r_{O 2}$, it can be inferred that longer transistors result in higher voltage gain.\n\nLet us examine $M_{1}$ and $M_{2}$ individually. If $L_{1}$ is increased by a factor of $\\alpha(>1)$, then $W_{1}$ may also need to be proportionally scaled. This is because, for a given drain current, $V_{G S 1}-V_{T H 1} \\propto 1 / \\sqrt{(W / L)_{1}}$, i.e., if $W_{1}$ is not scaled, the overdrive voltage rises, limiting the output voltage swing. Additionally, since $g_{m 1} \\propto \\sqrt{(W / L)_{1}}$, increasing only $L_{1}$ reduces $g_{m 1}$.\n\nIn cases where these factors are insignificant, $W_{1}$ can remain unchanged while $L_{1}$ increases. Therefore, the intrinsic gain of $M_{1}$ can be expressed as\n\n$$\n\\begin{equation*}\ng_{m 1} r_{O 1}=\\sqrt{2\\left(\\frac{W}{L}\\right)_{1} \\mu_{n} C_{o x} I_{D}} \\frac{1}{\\lambda I_{D}} \\tag{3.47}\n\\end{equation*}\n$$\n\nindicating that the gain rises with $L$ because $\\lambda$ is more strongly influenced by $L$ than $g_{m}$. Furthermore, note that $g_{m} r_{O}$ decreases as $I_{D}$ increases.\n\nEnhancing $L_{2}$ while maintaining $W_{2}$ constant raises $r_{O 2}$ and thus the voltage gain, but this comes at the expense of a higher $\\left|V_{D S 2, \\min }\\right|$, which is necessary to keep $M_{2}$ in saturation.\n\n#### Example 3.8\n\nCompare the maximum output voltage swings of CS stages with resistive and current-source loads.\n\n#### Solution\n\nFor the stage with a resistive load [Fig. 3.19(a)], the maximum output voltage is close to $V_{D D}$ (when $V_{i n}$ drops to around $\\left.V_{T H 1}\\right)$). The minimum is the value that positions $M_{1}$ at the brink of the triode region, $V_{i n}-V_{T H 1}$.\nimage_name:Figure 3.19(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\n]\nextrainfo:The circuit diagram (a) illustrates a common-source (CS) stage with a resistive load. The NMOS transistor M1 amplifies the input signal Vin, and the resistor RD provides a load for the output. The maximum output voltage swing is near VDD, and the minimum is determined by the threshold voltage VTH1. The output voltage is designated as Vout.\nimage_name:Figure 3.19(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\n]\nextrainfo:The circuit diagram (b) presents a CS stage with a current-source load. M1 is an NMOS transistor with its source connected to ground, the drain to the output node Vout, and the gate to the input node Vin. M2 is a PMOS transistor with its source connected to VDD, the drain to Vout, and the gate to a bias voltage Vb. The resistor RD is linked between VDD and Vout. This setup allows for a maximum output voltage swing governed by VDD and the threshold voltages of the transistors.\n\nFigure 3.19 Output swing in CS stage with (a) resistive load and (b) current-source load.\nFor the stage with a current-source load [Fig. 3.19(b)], the maximum output voltage is the one that places $M_{2}$ at the edge of the triode region, $V_{D D}-\\left|V_{G S 2}-V_{T H 2}\\right|$. Hence, the latter actually provides smaller swings than the former, but can consistently achieve a higher gain if $L_{1}$ and $L_{2}$ are increased."
},
{
    "text": "In scenarios necessitating substantial voltage gain within a single stage, the relationship $A_{v}=-g_{m} R_{D}$ indicates that the load impedance of the CS stage should be elevated. However, with resistive or diode-connected loads, boosting the load resistance results in a significant dc voltage drop across the load, thereby constraining the output voltage swing.\n\nA more viable solution is to substitute the load with a component that does not conform to Ohm's law, such as a current source. Briefly outlined in Example 3.3, the resultant circuit is depicted in Fig. 3.18, where both transistors operate in saturation. Given that the total impedance at the output node equals $r_{O 1} \\| r_{O 2}$, the gain is expressed as\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 1}\\left(r_{O 1} \\| r_{O 2}\\right) \\tag{3.46}\n\\end{equation*}\n$$\n\nThe crucial aspect here is that the output impedance and the minimal required $\\left|V_{D S}\\right|$ of $M_{2}$ are less tightly linked than the value and voltage drop of a resistor; the former is not bound by Ohm's law, whereas the latter is. The voltage $\\left|V_{D S 2, \\text { min }}\\right|=\\left|V_{G S 2}-V_{T H 2}\\right|$ can be decreased to below a hundred millivolts by simply widening $M_{2}$. If $r_{O 2}$ is insufficiently high, both the length and width of $M_{2}$ can be increased to achieve a smaller $\\lambda$ while maintaining the same overdrive voltage, albeit at the cost of increased capacitance at the output node due to $M_{2}$.\nimage_name:Figure 3.18 CS stage with current-source load\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\n]\nextrainfo:The circuit is a common-source (CS) stage with a current-source load. The PMOS M2 serves as a load for the NMOS M1, providing high output impedance. The bias voltage Vb sets the operating point of M2. The voltage-controlled current source g_m2V2 and resistor r_o2 model M2's output characteristics.\nIt should be noted that the output bias voltage in Fig. 3.18 is not well-defined. Therefore, reliable biasing of the stage necessitates a feedback loop to fix $V_{\\text {out }}$ at a known value (discussed in Chapter 8). The large-signal analysis of this circuit is left as an exercise for the reader.\n\nAs detailed in Chapter 2, the output impedance of MOSFETs at a given drain current can be adjusted by altering the channel length, i.e., to a first approximation, $\\lambda \\propto 1 / L$, and thus $r_{O} \\propto L / I_{D}$. Since the gain of the stage in Fig. 3.18 is proportional to $r_{O 1} \\| r_{O 2}$, it follows that longer transistors can enhance voltage gain.\n\nLet's examine $M_{1}$ and $M_{2}$ individually. If $L_{1}$ is increased by a factor of $\\alpha(>1)$, $W_{1}$ may also need proportional scaling. This is because, for a given drain current, $V_{G S 1}-V_{T H 1} \\propto 1 / \\sqrt{(W / L)_{1}}$, meaning that if $W_{1}$ is not scaled, the overdrive voltage rises, limiting the output voltage swing. Additionally, since $g_{m 1} \\propto \\sqrt{(W / L)_{1}}$, increasing only $L_{1}$ reduces $g_{m 1}$.\n\nIn situations where these factors are insignificant, $W_{1}$ can remain unchanged while $L_{1}$ increases. Thus, the intrinsic gain of $M_{1}$ can be expressed as\n\n$$\n\\begin{equation*}\ng_{m 1} r_{O 1}=\\sqrt{2\\left(\\frac{W}{L}\\right)_{1} \\mu_{n} C_{o x} I_{D}} \\frac{1}{\\lambda I_{D}} \\tag{3.47}\n\\end{equation*}\n$$\n\nThis indicates that the gain rises with $L$ because $\\lambda$ is more strongly influenced by $L$ than $g_{m}$. Also, note that $g_{m} r_{O}$ decreases as $I_{D}$ increases.\n\nIncreasing $L_{2}$ while keeping $W_{2}$ constant raises $r_{O 2}$ and thus the voltage gain, but this comes with the drawback of a higher $\\left|V_{D S 2, \\min }\\right|$, necessary to keep $M_{2}$ in saturation.\n\n#### Example 3.8\n\nCompare the maximum output voltage swings of CS stages with resistive and current-source loads.\n\n#### Solution\n\nFor the stage with a resistive load [Fig. 3.19(a)], the maximum output voltage approaches $V_{D D}$ (when $V_{i n}$ drops to around $\\left.V_{T H 1}\\right)$). The minimum output voltage is the value that puts $M_{1}$ at the verge of the triode region, $V_{i n}-V_{T H 1}$.\nimage_name:Figure 3.19(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\n]\nextrainfo:The circuit diagram (a) illustrates a common-source (CS) stage with a resistive load. The NMOS transistor M1 amplifies the input signal Vin, and the resistor RD serves as the load for the output. The maximum output voltage swing is near VDD, and the minimum is determined by the threshold voltage VTH1. The output voltage is designated as Vout.\nimage_name:Figure 3.19(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\n]\nextrainfo:The circuit diagram (b) shows a CS stage with a current-source load. M1 is an NMOS transistor with its source connected to ground, the drain to the output node Vout, and the gate to the input node Vin. M2 is a PMOS transistor with its source connected to VDD, the drain to Vout, and the gate to a bias voltage Vb. The resistor RD is connected between VDD and Vout. This setup allows for a maximum output voltage swing influenced by VDD and the threshold voltages of the transistors.\n\nFigure 3.19 Output swing in CS stage with (a) resistive load and (b) current-source load.\nFor the stage with a current-source load [Fig. 3.19(b)], the maximum output voltage is the one that places $M_{2}$ at the brink of the triode region, $V_{D D}-\\left|V_{G S 2}-V_{T H 2}\\right|$. Consequently, this configuration offers smaller swings compared to the resistive load, but can always achieve higher gain if $L_{1}$ and $L_{2}$ are increased."
},
{
    "text": "In scenarios necessitating a substantial voltage gain within a single stage, the equation $A_{v}=-g_{m} R_{D}$ indicates that enhancing the load impedance of the CS stage is advisable. However, with resistive or diode-connected loads, boosting the load resistance results in a significant dc voltage drop across the load, thereby constraining the output voltage swing.\n\nA more viable solution involves substituting the load with a device that does not conform to Ohm's law, such as a current source. Briefly outlined in Example 3.3, the resultant circuit is depicted in Fig. 3.18, where both transistors function in saturation. Given that the total impedance at the output node equals $r_{O 1} \\| r_{O 2}$, the gain is expressed as\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 1}\\left(r_{O 1} \\| r_{O 2}\\right) \\tag{3.46}\n\\end{equation*}\n$$\n\nThe crux of the matter is that the output impedance and the minimal required $\\left|V_{D S}\\right|$ of $M_{2}$ are less tightly linked than the value and voltage drop of a resistor; the former is not bound by Ohm's law, whereas the latter is. The voltage $\\left|V_{D S 2, \\text { min }}\\right|=\\left|V_{G S 2}-V_{T H 2}\\right|$ can be diminished to below a hundred millivolts by merely expanding the width of $M_{2}$. If $r_{O 2}$ is insufficiently high, the length and width of $M_{2}$ can be augmented to attain a lower $\\lambda$ while preserving the same overdrive voltage. The drawback is the increased capacitance introduced by $M_{2}$ at the output node.\nimage_name:Figure 3.18 CS stage with current-source load\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\n]\nextrainfo:The circuit is a common-source (CS) stage with a current-source load. The PMOS M2 serves as a load for the NMOS M1, providing high output impedance. The bias voltage Vb sets the operating point of M2. The voltage-controlled current source g_m2V2 and resistor r_o2 model M2's output characteristics.\nIt should be noted that the output bias voltage in Fig. 3.18's circuit is not well-defined. Therefore, stable biasing is achieved only if a feedback loop fixes $V_{\\text {out }}$ to a known value (Chapter 8). The large-signal analysis of this circuit is left as an exercise for the reader.\n\nAs detailed in Chapter 2, the output impedance of MOSFETs at a specific drain current can be adjusted by altering the channel length, i.e., to a first approximation, $\\lambda \\propto 1 / L$, and thus $r_{O} \\propto L / I_{D}$. Since the gain of the stage in Fig. 3.18 is proportional to $r_{O 1} \\| r_{O 2}$, it can be inferred that longer transistors result in higher voltage gain.\n\nConsider $M_{1}$ and $M_{2}$ individually. If $L_{1}$ is increased by a factor of $\\alpha(>1)$, $W_{1}$ may also need proportional scaling. This is because, for a given drain current, $V_{G S 1}-V_{T H 1} \\propto 1 / \\sqrt{(W / L)_{1}}$, meaning if $W_{1}$ is not scaled, the overdrive voltage rises, limiting the output voltage swing. Additionally, since $g_{m 1} \\propto \\sqrt{(W / L)_{1}}$, increasing only $L_{1}$ reduces $g_{m 1}$.\n\nIn cases where these factors are insignificant, $W_{1}$ can remain unchanged while $L_{1}$ increases. Thus, the intrinsic gain of $M_{1}$ can be expressed as\n\n$$\n\\begin{equation*}\ng_{m 1} r_{O 1}=\\sqrt{2\\left(\\frac{W}{L}\\right)_{1} \\mu_{n} C_{o x} I_{D}} \\frac{1}{\\lambda I_{D}} \\tag{3.47}\n\\end{equation*}\n$$\n\nThis shows that the gain rises with $L$ because $\\lambda$ is more sensitive to $L$ than $g_{m}$. Note also that $g_{m} r_{O}$ decreases as $I_{D}$ increases.\n\nEnhancing $L_{2}$ while keeping $W_{2}$ constant raises $r_{O 2}$ and thus the voltage gain, but this comes at the expense of a higher $\\left|V_{D S 2, \\min }\\right|$, necessary to keep $M_{2}$ in saturation.\n\n#### Example 3.8\n\nCompare the maximum output voltage swings of CS stages with resistive and current-source loads.\n\n#### Solution\n\nFor the resistively-loaded stage [Fig. 3.19(a)], the maximum output voltage approaches $V_{D D}$ (when $V_{i n}$ drops to around $\\left.V_{T H 1}\\right)$. The minimum is the value that positions $M_{1}$ at the edge of the triode region, $V_{i n}-V_{T H 1}$.\nimage_name:Figure 3.19(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\n]\nextrainfo:The circuit diagram (a) illustrates a common-source (CS) stage with a resistive load. The NMOS transistor M1 amplifies the input signal Vin, and the resistor RD provides the load for the output. The maximum output voltage swing is near VDD, and the minimum is determined by the threshold voltage VTH1. The output voltage is denoted as Vout.\nimage_name:Figure 3.19(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\n]\nextrainfo:The circuit diagram (b) shows a CS stage with a current-source load. M1 is an NMOS transistor with its source connected to ground, the drain to the output node Vout, and the gate to the input node Vin. M2 is a PMOS transistor with its source connected to VDD, the drain to Vout, and the gate to a bias voltage Vb. The resistor RD is connected between VDD and Vout. This setup allows for a maximum output voltage swing determined by VDD and the threshold voltages of the transistors.\n\nFigure 3.19 Output swing in CS stage with (a) resistive load and (b) current-source load.\nFor the stage with a current-source load [Fig. 3.19(b)], the maximum output voltage is the one that places $M_{2}$ at the edge of the triode region, $V_{D D}-\\left|V_{G S 2}-V_{T H 2}\\right|$. Thus, the latter actually offers smaller swings than the former, but can always achieve a higher gain if $L_{1}$ and $L_{2}$ are increased."
},
{
    "text": "In scenarios necessitating substantial voltage gain within a single stage, the equation $A_{v}=-g_{m} R_{D}$ indicates that enhancing the load impedance of the CS stage is beneficial. However, with resistive or diode-connected loads, boosting the load resistance results in a significant dc voltage drop across the load, thereby constraining the output voltage swing.\n\nA more viable solution involves substituting the load with a component that does not adhere to Ohm's law, such as a current source. This approach, briefly outlined in Example 3.3, is illustrated in Fig. 3.18, where both transistors function in saturation. Given that the total impedance at the output node equals $r_{O 1} \\| r_{O 2}$, the gain is expressed as\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 1}\\left(r_{O 1} \\| r_{O 2}\\right) \\tag{3.46}\n\\end{equation*}\n$$\n\nThe crucial aspect here is that the output impedance and the minimum required $\\left|V_{D S}\\right|$ of $M_{2}$ are less tightly linked than the values and voltage drop of a resistor; the former is not bound by Ohm's law, whereas the latter is. The voltage $\\left|V_{D S 2, \\text { min }}\\right|=\\left|V_{G S 2}-V_{T H 2}\\right|$ can be minimized to below a hundred millivolts by simply widening $M_{2}$. If $r_{O 2}$ is insufficiently high, adjusting the length and width of $M_{2}$ can reduce $\\lambda$ while maintaining the same overdrive voltage, albeit at the cost of increased capacitance at the output node due to $M_{2}$.\nimage_name:Figure 3.18 CS stage with current-source load\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\n]\nextrainfo:The circuit is a common-source (CS) stage with a current-source load. The PMOS M2 serves as a load for the NMOS M1, providing high output impedance. The bias voltage Vb sets the operating point of M2. The voltage-controlled current source g_m2V2 and resistor r_o2 model the output characteristics of M2.\nIt's important to note that the output bias voltage in Fig. 3.18 is not well-defined. Therefore, stable biasing of the stage relies on a feedback loop that fixes $V_{\\text {out }}$ to a known value (discussed in Chapter 8). The large-signal analysis of this circuit is left as an exercise for the reader.\n\nAs detailed in Chapter 2, the output impedance of MOSFETs at a specific drain current can be altered by modifying the channel length, i.e., to a first approximation, $\\lambda \\propto 1 / L$, and thus $r_{O} \\propto L / I_{D}$. Since the gain of the stage in Fig. 3.18 is proportional to $r_{O 1} \\| r_{O 2}$, it follows that longer transistors can enhance voltage gain.\n\nConsider $M_{1}$ and $M_{2}$ individually. If $L_{1}$ is increased by a factor of $\\alpha(>1)$, $W_{1}$ may also need proportional scaling. This is because, for a given drain current, $V_{G S 1}-V_{T H 1} \\propto 1 / \\sqrt{(W / L)_{1}}$, meaning that if $W_{1}$ is not scaled, the overdrive voltage rises, limiting the output voltage swing. Additionally, since $g_{m 1} \\propto \\sqrt{(W / L)_{1}}$, increasing only $L_{1}$ reduces $g_{m 1}$.\n\nIn cases where these factors are insignificant, $W_{1}$ can remain unchanged while $L_{1}$ increases. Consequently, the intrinsic gain of $M_{1}$ can be expressed as\n\n$$\n\\begin{equation*}\ng_{m 1} r_{O 1}=\\sqrt{2\\left(\\frac{W}{L}\\right)_{1} \\mu_{n} C_{o x} I_{D}} \\frac{1}{\\lambda I_{D}} \\tag{3.47}\n\\end{equation*}\n$$\n\nThis indicates that the gain rises with $L$ because $\\lambda$ is more sensitive to $L$ than $g_{m}$. It's also worth noting that $g_{m} r_{O}$ decreases as $I_{D}$ increases.\n\nEnhancing $L_{2}$ while keeping $W_{2}$ constant boosts $r_{O 2}$ and thus the voltage gain, but this comes with the drawback of a higher $\\left|V_{D S 2, \\min }\\right|$, necessary to keep $M_{2}$ in saturation.\n\n#### Example 3.8\n\nCompare the maximum output voltage swings of CS stages with resistive and current-source loads.\n\n#### Solution\n\nFor the stage with a resistive load [Fig. 3.19(a)], the maximum output voltage approaches $V_{D D}$ (when $V_{i n}$ drops to around $\\left.V_{T H 1}\\right)$). The minimum output voltage is the value that positions $M_{1}$ at the brink of the triode region, $V_{i n}-V_{T H 1}$.\nimage_name:Figure 3.19(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\n]\nextrainfo:The circuit diagram (a) depicts a common-source (CS) stage with a resistive load. The NMOS transistor M1 amplifies the input signal Vin, and the resistor RD provides the load for the output. The maximum output voltage swing is near VDD, and the minimum is dictated by the threshold voltage VTH1. The output voltage is designated as Vout.\nimage_name:Figure 3.19(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\n]\nextrainfo:The circuit diagram (b) shows a CS stage with a current-source load. M1 is an NMOS transistor with its source connected to ground, the drain to the output node Vout, and the gate to the input node Vin. M2 is a PMOS transistor with its source connected to VDD, the drain to Vout, and the gate to a bias voltage Vb. The resistor RD connects VDD to Vout. This setup allows for a maximum output voltage swing influenced by VDD and the threshold voltages of the transistors.\n\nFigure 3.19 Output swing in CS stage with (a) resistive load and (b) current-source load.\nFor the stage with a current-source load [Fig. 3.19(b)], the maximum output voltage is the level that positions $M_{2}$ at the edge of the triode region, $V_{D D}-\\left|V_{G S 2}-V_{T H 2}\\right|$. Thus, this configuration offers smaller swings compared to the resistive load, but can still achieve higher gain if $L_{1}$ and $L_{2}$ are augmented."
},
{
    "text": "In scenarios necessitating a substantial voltage gain within a single stage, the equation $A_{v}=-g_{m} R_{D}$ indicates that enhancing the load impedance of the CS stage is beneficial. However, with resistive or diode-connected loads, boosting the load resistance results in a significant dc voltage drop across the load, thereby constraining the output voltage swing.\n\nA more viable solution involves substituting the load with a component that does not adhere to Ohm's law, such as a current source. Briefly outlined in Example 3.3, the resultant circuit is depicted in Fig. 3.18, where both transistors function in saturation. Given that the total impedance at the output node equals $r_{O 1} \\| r_{O 2}$, the gain is expressed as\n\n$$\n\\begin{equation*}\nA_{v}=-g_{m 1}\\left(r_{O 1} \\| r_{O 2}\\right) \\tag{3.46}\n\\end{equation*}\n$$\n\nThe crucial aspect here is that the output impedance and the minimum required $\\left|V_{D S}\\right|$ of $M_{2}$ are less tightly linked than the resistance value and voltage drop of a resistor; the former does not need to comply with Ohm's law, whereas the latter must. The voltage $\\left|V_{D S 2, \\text { min }}\\right|=\\left|V_{G S 2}-V_{T H 2}\\right|$ can be minimized to less than a hundred millivolts by simply widening $M_{2}$. If $r_{O 2}$ is insufficiently high, both the length and width of $M_{2}$ can be increased to achieve a smaller $\\lambda$ while maintaining the same overdrive voltage, albeit with the trade-off of increased capacitance at the output node due to $M_{2}$.\nimage_name:Figure 3.18 CS stage with current-source load\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\n]\nextrainfo:The circuit is a common-source (CS) stage featuring a current-source load. The PMOS M2 serves as a load for the NMOS M1, providing high output impedance. The bias voltage Vb is utilized to set the operating point of M2. The voltage-controlled current source g_m2V2 and resistor r_o2 model the output characteristics of M2.\nIt is important to note that the output bias voltage of the circuit in Fig. 3.18 is not well-defined. Consequently, stable biasing is achieved only when a feedback loop drives $V_{\\text {out }}$ to a known value (Chapter 8). The large-signal analysis of this circuit is left as an exercise for the reader.\n\nAs detailed in Chapter 2, the output impedance of MOSFETs at a given drain current can be adjusted by altering the channel length, i.e., to a first approximation, $\\lambda \\propto 1 / L$, and thus $r_{O} \\propto L / I_{D}$. Since the gain of the stage in Fig. 3.18 is proportional to $r_{O 1} \\| r_{O 2}$, it can be inferred that longer transistors result in higher voltage gain.\n\nConsider $M_{1}$ and $M_{2}$ individually. If $L_{1}$ is increased by a factor of $\\alpha(>1)$, $W_{1}$ may also need to be proportionally scaled. This is because, for a given drain current, $V_{G S 1}-V_{T H 1} \\propto 1 / \\sqrt{(W / L)_{1}}$, meaning that if $W_{1}$ is not scaled, the overdrive voltage rises, limiting the output voltage swing. Additionally, since $g_{m 1} \\propto \\sqrt{(W / L)_{1}}$, increasing only $L_{1}$ reduces $g_{m 1}$.\n\nIn cases where these factors are insignificant, $W_{1}$ can remain unchanged while $L_{1}$ increases. Therefore, the intrinsic gain of $M_{1}$ can be expressed as\n\n$$\n\\begin{equation*}\ng_{m 1} r_{O 1}=\\sqrt{2\\left(\\frac{W}{L}\\right)_{1} \\mu_{n} C_{o x} I_{D}} \\frac{1}{\\lambda I_{D}} \\tag{3.47}\n\\end{equation*}\n$$\n\nThis indicates that the gain rises with $L$ because $\\lambda$ is more strongly influenced by $L$ than $g_{m}$. It is also noteworthy that $g_{m} r_{O}$ decreases as $I_{D}$ increases.\n\nEnhancing $L_{2}$ while keeping $W_{2}$ constant raises $r_{O 2}$ and thus the voltage gain, but this comes at the expense of a higher $\\left|V_{D S 2, \\min }\\right|$, which is necessary to keep $M_{2}$ in saturation.\n\n#### Example 3.8\n\nCompare the maximum output voltage swings of CS stages with resistive and current-source loads.\n\n#### Solution\n\nFor the stage with a resistive load [Fig. 3.19(a)], the maximum output voltage approaches $V_{D D}$ (when $V_{i n}$ drops to around $\\left.V_{T H 1}\\right)$). The minimum output voltage is the value that positions $M_{1}$ at the brink of the triode region, $V_{i n}-V_{T H 1}$.\nimage_name:Figure 3.19(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\n]\nextrainfo:The circuit diagram (a) illustrates a common-source (CS) stage with a resistive load. The NMOS transistor M1 amplifies the input signal Vin, and the resistor RD acts as the load for the output. The maximum output voltage swing is close to VDD, and the minimum is determined by the threshold voltage VTH1. The output voltage is designated as Vout.\nimage_name:Figure 3.19(b)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\n]\nextrainfo:The circuit diagram (b) shows a CS stage with a current-source load. M1 is an NMOS transistor with its source connected to ground, the drain to the output node Vout, and the gate to the input node Vin. M2 is a PMOS transistor with its source connected to VDD, the drain to Vout, and the gate to a bias voltage Vb. The resistor RD is connected between VDD and Vout. This setup allows for a maximum output voltage swing influenced by VDD and the threshold voltages of the transistors.\n\nFigure 3.19 Output swing in CS stage with (a) resistive load and (b) current-source load.\nFor the stage with a current-source load [Fig. 3.19(b)], the maximum output voltage is the one that positions $M_{2}$ at the edge of the triode region, $V_{D D}-\\left|V_{G S 2}-V_{T H 2}\\right|$. Consequently, this configuration offers smaller swings compared to the resistive load, but can still achieve higher gain if $L_{1}$ and $L_{2}$ are augmented."
},
{
    "text": "In the amplifier configuration shown in Fig. 3.19(b), the PMOS device acts as a constant current source. Can $M_{2}$ function as an amplifying component? Indeed, by applying the input signal to the gate of $M_{2}$, as depicted in Fig. 3.20(a), it transforms into an \"active\" load. This configuration is recognizable as a CMOS inverter. Assuming both transistors are in saturation and $V_{in}$ increases by $\\Delta V_{0}$, two changes occur: (a) $I_{D 1}$ rises, pulling $V_{\\text{out}}$ down, and (b) $M_{2}$ injects less current into the output node, allowing $V_{\\text{out}}$ to decrease. These changes reinforce each other, resulting in higher voltage gain. As illustrated in Fig. 3.20(b), the two transistors operate in parallel and merge into one, as shown in Fig. 3.20(c). Consequently, $-\\left(g_{m 1}+g_{m 2}\\right) V_{in}\\left(r_{O 1} \\| r_{O 2}\\right)=V_{\\text{out}}$, leading to\n\n$$\n\\begin{equation*}\nA_{v}=-\\left(g_{m 1}+g_{m 2}\\right)\\left(r_{O 1} \\| r_{O 2}\\right) \\tag{3.48}\n\\end{equation*}\n$$\n\nCompared to the amplifier in Fig. 3.19(b), this circuit has the same output resistance, $r_{O 1} \\| r_{O 2}$, but higher transconductance. This topology is also known as a \"complementary CS stage.\"\n\nThe amplifier in Fig. 3.20(a) faces two critical issues. First, the bias current of the transistors is highly dependent on PVT. Specifically, since $V_{G S 1}+\\left|V_{G S 2}\\right|=V_{D D}$, variations in $V_{D D}$ or threshold voltages directly affect the drain currents. Second, the circuit amplifies supply voltage variations (\"supply noise\"). To understand this, consider the setup in Fig. 3.21, where $V_{B}$ biases $M_{1}$ and $M_{2}$ into saturation. In Problem 3.31, we demonstrate that the small-signal gain from $V_{D D}$ to $V_{\\text{out}}$ is\n\n#### Nanometer Design Notes\n\nWith minimal channel lengths, the CS stage with a current-source load offers low gain. For instance, if $(W / L)$ NMOS $=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ and $(W / L)$ PMOS $=10 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$, the input-output characteristic shown in the figure yields a maximum gain of around 2.5. The useful output voltage range is approximately 0.7 V with $V_{D D}=1 \\mathrm{~V}$, beyond which the gain significantly decreases.\nimage_name:input-output characteristic\ndescription:The graph illustrates the input-output voltage relationship for a common-source (CS) stage with a current-source load.\n\n1. **Graph Type and Function:**\n- It is a voltage transfer characteristic graph.\n\n2. **Axes Labels and Units:**\n- The x-axis represents the input voltage \\( V_{in} \\) in volts (V), ranging from 0 to 1 V.\n- The y-axis represents the output voltage \\( V_{out} \\) in volts (V), also ranging from 0 to 1 V.\n- Both axes use a linear scale.\n\n3. **Behavior and Trends:**\n- The graph shows a non-linear relationship between \\( V_{in} \\) and \\( V_{out} \\).\n- \\( V_{out} \\) remains near its maximum value as \\( V_{in} \\) increases from 0 to about 0.3 V.\n- Between 0.3 V and 0.6 V of \\( V_{in} \\), \\( V_{out} \\) decreases sharply, indicating maximum gain.\n- Beyond 0.6 V of \\( V_{in} \\), \\( V_{out} \\) stabilizes near 0 V.\n\n4. **Key Features and Technical Details:**\n- Maximum gain occurs around \\( V_{in} = 0.3 \\) to 0.6 V.\n- The useful output voltage range is about 0.7 V.\n- Gain drops significantly outside this range.\n\n5. **Annotations and Data Points:**\n- The graph lacks specific annotations, but the context indicates a maximum gain of about 2.5 within the useful range.\n- The transition region is between 0.3 V and 0.6 V of \\( V_{in} \\).\n\nimage_name:A_v vs V_in\ndescription:1. **Graph Type and Function:**\n- The graph plots voltage gain \\( A_v \\) against input voltage \\( V_{in} \\), appearing linear.\n\n2. **Axes Labels and Units:**\n- The x-axis represents \\( V_{in} \\) in volts (V), ranging from 0 to 1 V.\n- The y-axis represents \\( A_v \\), ranging from 0 to -3.\n- Both axes use a linear scale.\n\n3. **Behavior and Trends:**\n- Gain decreases as \\( V_{in} \\) increases from 0 to about 0.4 V, reaching a minimum of -3 at around 0.5 V.\n- Beyond this, gain increases as \\( V_{in} \\) rises, returning to 0 at \\( V_{in} = 1 \\) V.\n- The curve resembles a parabolic dip centered at \\( V_{in} = 0.5 \\) V.\n\n4. **Key Features and Technical Details:**\n- Minimum gain occurs near \\( V_{in} = 0.5 \\) V.\n- Gain is highest at \\( V_{in} = 0 \\) V and \\( V_{in} = 1 \\) V.\n- The transition region is between 0.3 V and 0.6 V of \\( V_{in} \\).\n\n5. **Annotations and Data Points:**\n- No specific annotations, but the critical region for gain variation is between 0.3 V and 0.6 V of \\( V_{in} \\).\n- Maximum gain within the useful range is about 2.5.\n\n$$\n\\begin{align*}\n\\frac{V_{\\text{out}}}{V_{D D}} & =\\frac{g_{m 2} r_{O 2}+1}{r_{O 2}+r_{O 1}} r_{O 1}  \\tag{3.49}\\\\\n& =\\left(g_{m 2}+\\frac{1}{r_{O 2}}\\right)\\left(r_{O 1} \\| r_{O 2}\\right) \\tag{3.50}\n\\end{align*}\n$$\n\napproximately half of the $A_{v}$ value derived earlier. These issues are discussed further in Chapter 5.\nimage_name:Figure 3.21 Arrangement for studying supply sensitivity of CS stage with active load\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: VB}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: VB}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a common-source amplifier with an active load. M1 is the NMOS transistor and M2 is the PMOS transistor. Both transistors' gates are connected to a bias voltage VB. The output is taken from the drain of M1 and M2, labeled as Vout. The circuit is powered by a voltage source VDD."
},
{
    "text": "In the amplifier configuration depicted in Fig. 3.19(b), the PMOS device functions as a constant current source. Can $M_{2}$ also act as an amplifying component? Indeed; by applying the input signal to the gate of $M_{2}$, as shown in Fig. 3.20(a), it transforms into an \"active\" load. This configuration is recognizable as a CMOS inverter. Assuming both transistors are in saturation and $V_{in}$ increases by $\\Delta V_{0}$, two effects occur: (a) $I_{D 1}$ rises, pulling $V_{\\text{out}}$ down, and (b) $M_{2}$ injects less current into the output node, allowing $V_{\\text{out}}$ to decrease. These effects reinforce each other, resulting in a higher voltage gain. As illustrated in Fig. 3.20(b), the two transistors operate in parallel and can be represented as a single entity, as shown in Fig. 3.20(c). Consequently, $-\\left(g_{m 1}+g_{m 2}\\right) V_{in}\\left(r_{O 1} \\| r_{O 2}\\right)=V_{\\text{out}}$, leading to\n\n$$\n\\begin{equation*}\nA_{v}=-\\left(g_{m 1}+g_{m 2}\\right)\\left(r_{O 1} \\| r_{O 2}\\right) \\tag{3.48}\n\\end{equation*}\n$$\n\nCompared to the amplifier in Fig. 3.19(b), this circuit has the same output resistance, $r_{O 1} \\| r_{O 2}$, but a higher transconductance. This topology is also known as a \"complementary CS stage.\"\n\nThe amplifier in Fig. 3.20(a) faces two significant challenges. First, the bias current of the transistors is highly dependent on PVT. Specifically, since $V_{G S 1}+\\left|V_{G S 2}\\right|=V_{D D}$, variations in $V_{D D}$ or threshold voltages directly impact the drain currents. Second, the circuit amplifies supply voltage variations (\"supply noise\"). To illustrate this, consider the setup in Fig. 3.21, where $V_{B}$ is a bias voltage to keep $M_{1}$ and $M_{2}$ in saturation. In Problem 3.31, we demonstrate that the small-signal gain from $V_{D D}$ to $V_{\\text{out}}$ is given by\n\n#### Nanometer Design Notes\n\nWith minimal channel lengths, the CS stage with a current-source load yields a low gain. For instance, if $(W / L)$ NMOS $=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ and $(W / L)$ PMOS $=10 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$, the input-output characteristic shown in the figure reveals a maximum gain of approximately 2.5. Plotting the slope also indicates a useful output voltage range of about 0.7 V with $V_{D D}=1 \\mathrm{~V}$. Beyond this range, the gain decreases significantly.\nimage_name:input-output characteristic\ndescription:The graph illustrates the input-output characteristics of a common-source (CS) stage with a current-source load.\n\n1. **Type of Graph and Function:**\n- This is a voltage transfer characteristic graph.\n\n2. **Axes Labels and Units:**\n- The x-axis represents the input voltage \\( V_{in} \\) in volts (V), ranging from 0 to 1 V.\n- The y-axis represents the output voltage \\( V_{out} \\) in volts (V), also ranging from 0 to 1 V.\n- Both axes use a linear scale.\n\n3. **Overall Behavior and Trends:**\n- The graph shows a non-linear relationship between \\( V_{in} \\) and \\( V_{out} \\).\n- \\( V_{out} \\) remains relatively constant near its maximum value close to 1 V as \\( V_{in} \\) increases from 0 to about 0.3 V.\n- Between approximately 0.3 V and 0.6 V of \\( V_{in} \\), \\( V_{out} \\) decreases sharply, indicating the region of maximum gain.\n- Beyond 0.6 V of \\( V_{in} \\), \\( V_{out} \\) levels off and approaches a minimum value close to 0 V.\n\n4. **Key Features and Technical Details:**\n- The maximum gain occurs around \\( V_{in} = 0.3 \\) to 0.6 V, where the slope is steepest.\n- The useful output voltage range is about 0.7 V, corresponding to the linear region of the graph.\n- Outside this range, the gain drops considerably, as seen in the flattening of the curve.\n\n5. **Annotations and Specific Data Points:**\n- The graph lacks specific numerical annotations, but the context indicates a maximum gain of about 2.5 within the useful range.\n- Important data points include the transition region between 0.3 V and 0.6 V of \\( V_{in} \\), where \\( V_{out} \\) changes most rapidly.\n\nimage_name:A_v vs V_in\ndescription:1. **Type of Graph and Function:**\n- The graph plots voltage gain \\( A_v \\) against input voltage \\( V_{in} \\), appearing as a linear plot.\n\n2. **Axes Labels and Units:**\n- The x-axis represents the input voltage \\( V_{in} \\) in volts (V), ranging from 0 to 1 V.\n- The y-axis represents the voltage gain \\( A_v \\), with values ranging from 0 to -3.\n- Both axes use a linear scale.\n\n3. **Overall Behavior and Trends:**\n- The graph shows a downward trend in gain as \\( V_{in} \\) increases from 0 to about 0.4 V, reaching a minimum gain of approximately -3 at around 0.5 V.\n- Beyond this point, the gain increases as \\( V_{in} \\) continues to rise, returning to around 0 at \\( V_{in} = 1 \\) V.\n- The curve resembles a parabolic dip centered around \\( V_{in} = 0.5 \\) V.\n\n4. **Key Features and Technical Details:**\n- The minimum gain occurs near \\( V_{in} = 0.5 \\) V, where \\( A_v \\) is approximately -3.\n- The gain is highest at the extremes of the \\( V_{in} \\) range, being close to 0 at \\( V_{in} = 0 \\) V and \\( V_{in} = 1 \\) V.\n- The transition region, where the gain changes most rapidly, is between 0.3 V and 0.6 V of \\( V_{in} \\).\n\n5. **Annotations and Specific Data Points:**\n- The graph lacks specific numerical annotations, but the context suggests a critical region for gain variation between 0.3 V and 0.6 V of \\( V_{in} \\).\n- The maximum gain within the useful range is about 2.5, though not directly visible on the graph.\n\n$$\n\\begin{align*}\n\\frac{V_{\\text{out}}}{V_{D D}} & =\\frac{g_{m 2} r_{O 2}+1}{r_{O 2}+r_{O 1}} r_{O 1}  \\tag{3.49}\\\\\n& =\\left(g_{m 2}+\\frac{1}{r_{O 2}}\\right)\\left(r_{O 1} \\| r_{O 2}\\right) \\tag{3.50}\n\\end{align*}\n$$\n\napproximately half of the $A_{v}$ calculated earlier. These issues are discussed in detail in Chapter 5.\nimage_name:Figure 3.21 Arrangement for studying supply sensitivity of CS stage with active load\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: VB}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: VB}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a common-source amplifier with an active load. M1 is the NMOS transistor and M2 is the PMOS transistor. Both transistors' gates are connected to a bias voltage VB. The output is taken from the drain of M1 and M2, labeled as Vout. The circuit is powered by a voltage source VDD."
},
{
    "text": "In the amplifier configuration depicted in Fig. 3.19(b), the PMOS device acts as a steady current source. Can $M_{2}$ function as an amplifying component? Indeed; by applying the input signal to the gate of $M_{2}$, as shown in Fig. 3.20(a), it transforms into an \"active\" load. This configuration is recognizable as a CMOS inverter. Assuming both transistors are in saturation and $V_{i n}$ increases by $\\Delta V_{0}$, two effects occur: (a) $I_{D 1}$ rises, pulling $V_{\\text {out }}$ down, and (b) $M_{2}$ injects less current into the output node, allowing $V_{\\text {out }}$ to decrease. These effects reinforce each other, resulting in a higher voltage gain. As illustrated in Fig. 3.20(b), the two transistors operate in parallel and can be simplified as shown in Fig. 3.20(c). Consequently, $-\\left(g_{m 1}+g_{m 2}\\right) V_{i n}\\left(r_{O 1} \\| r_{O 2}\\right)=V_{\\text {out }}$, leading to\n\n$$\n\\begin{equation*}\nA_{v}=-\\left(g_{m 1}+g_{m 2}\\right)\\left(r_{O 1} \\| r_{O 2}\\right) \\tag{3.48}\n\\end{equation*}\n$$\n\nCompared to the amplifier in Fig. 3.19(b), this circuit has the same output resistance, $r_{O 1} \\| r_{O 2}$, but a higher transconductance. This layout is also known as a \"complementary CS stage.\"\n\nThe amplifier in Fig. 3.20(a) faces two significant challenges. First, the bias current of the transistors is highly dependent on PVT. Specifically, since $V_{G S 1}+\\left|V_{G S 2}\\right|=V_{D D}$, variations in $V_{D D}$ or threshold voltages directly affect the drain currents. Second, the circuit amplifies supply voltage fluctuations (\"supply noise\"). To illustrate this, consider the setup in Fig. 3.21, where $V_{B}$ is a bias voltage for placing $M_{1}$ and $M_{2}$ in saturation. In Problem 3.31, we demonstrate that the small-signal gain from $V_{D D}$ to $V_{\\text {out }}$ is\n\n#### Nanometer Design Notes\n\nWith minimal channel lengths, the CS stage with a current-source load yields a low gain. For instance, if $(W / L)$ NMOS $=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ and $(W / L)$ PMOS $=10 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$, the input-output characteristic shown in the figure yields a maximum gain of around 2.5. Plotting the slope reveals a useful output voltage range of about 0.7 V with $V_{D D}=1 \\mathrm{~V}$. Beyond this range, the gain drops significantly.\nimage_name:input-output characteristic\ndescription:The graph illustrates the input-output characteristic, showing the relationship between the input voltage \\( V_{in} \\) and the output voltage \\( V_{out} \\) of a common-source (CS) stage with a current-source load.\n\n1. **Type of Graph and Function:**\n- This is a voltage transfer characteristic graph.\n\n2. **Axes Labels and Units:**\n- The x-axis represents the input voltage \\( V_{in} \\) in volts (V), ranging from 0 to 1 V.\n- The y-axis represents the output voltage \\( V_{out} \\) in volts (V), also ranging from 0 to 1 V.\n- Both axes use a linear scale.\n\n3. **Overall Behavior and Trends:**\n- The graph displays a non-linear relationship between \\( V_{in} \\) and \\( V_{out} \\).\n- As \\( V_{in} \\) increases from 0 to about 0.3 V, \\( V_{out} \\) remains near its maximum value close to 1 V.\n- Between 0.3 V and 0.6 V of \\( V_{in} \\), \\( V_{out} \\) decreases sharply, indicating the region of maximum gain.\n- Beyond 0.6 V of \\( V_{in} \\), \\( V_{out} \\) levels off near 0 V.\n\n4. **Key Features and Technical Details:**\n- The maximum gain occurs around \\( V_{in} = 0.3 \\) to 0.6 V, where the slope is steepest.\n- The useful output voltage range is about 0.7 V, corresponding to the linear region of the graph.\n- Outside this range, the gain decreases significantly, as seen in the flattening of the curve.\n\n5. **Annotations and Specific Data Points:**\n- The graph lacks specific numerical annotations, but the context indicates a maximum gain of about 2.5 within the useful range.\n- Important data points include the transition region between 0.3 V and 0.6 V of \\( V_{in} \\), where \\( V_{out} \\) changes rapidly.\n\nimage_name:A_v vs V_in\ndescription:1. **Type of Graph and Function:**\n- The graph plots voltage gain \\( A_v \\) versus input voltage \\( V_{in} \\) and appears linear.\n\n2. **Axes Labels and Units:**\n- The x-axis represents the input voltage \\( V_{in} \\) in volts (V), ranging from 0 to 1 V.\n- The y-axis represents the voltage gain \\( A_v \\), with values from 0 to -3.\n- Both axes use a linear scale.\n\n3. **Overall Behavior and Trends:**\n- The graph shows a downward trend in gain as \\( V_{in} \\) increases from 0 to about 0.4 V, reaching a minimum of approximately -3 at around 0.5 V.\n- Beyond this point, the gain increases as \\( V_{in} \\) rises, returning to around 0 at \\( V_{in} = 1 \\) V.\n- The curve resembles a parabolic dip centered at \\( V_{in} = 0.5 \\) V.\n\n4. **Key Features and Technical Details:**\n- The minimum gain occurs near \\( V_{in} = 0.5 \\) V, where \\( A_v \\) is about -3.\n- The gain is highest at the ends of the \\( V_{in} \\) range, close to 0 at \\( V_{in} = 0 \\) V and \\( V_{in} = 1 \\) V.\n- The transition region, where the gain changes most rapidly, is between 0.3 V and 0.6 V of \\( V_{in} \\).\n\n5. **Annotations and Specific Data Points:**\n- The graph lacks specific numerical annotations, but the context suggests a critical gain variation region between 0.3 V and 0.6 V of \\( V_{in} \\).\n- The maximum gain within the useful range is about 2.5, though not directly visible on the graph.\n\n$$\n\\begin{align*}\n\\frac{V_{\\text {out }}}{V_{D D}} & =\\frac{g_{m 2} r_{O 2}+1}{r_{O 2}+r_{O 1}} r_{O 1}  \\tag{3.49}\\\\\n& =\\left(g_{m 2}+\\frac{1}{r_{O 2}}\\right)\\left(r_{O 1} \\| r_{O 2}\\right) \\tag{3.50}\n\\end{align*}\n$$\n\napproximately half of the $A_{v}$ value derived earlier. These issues are discussed in Chapter 5.\nimage_name:Figure 3.21 Arrangement for studying supply sensitivity of CS stage with active load\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: VB}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: VB}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a common-source amplifier with an active load. M1 is the NMOS transistor and M2 is the PMOS transistor. Both transistors' gates are connected to a bias voltage VB. The output is taken from the drain of M1 and M2, labeled as Vout. The circuit is powered by a voltage source VDD."
},
{
    "text": "In the amplifier configuration depicted in Fig. 3.19(b), the PMOS device functions as a steady current source. Can $M_{2}$ act as an amplifying component? Indeed; by applying the input signal to the gate of $M_{2}$, as shown in Fig. 3.20(a), it transforms into an \"active\" load. This configuration is recognizable as a CMOS inverter. Assume both transistors are in saturation and $V_{in}$ increases by $\\Delta V_{0}$. Two effects ensue: (a) $I_{D 1}$ rises, pulling $V_{\\text {out }}$ down, and (b) $M_{2}$ injects less current into the output node, allowing $V_{\\text {out }}$ to decrease. These effects reinforce each other, resulting in a higher voltage gain. As depicted in Fig. 3.20(b), the two transistors operate in parallel and merge into one, as illustrated in Fig. 3.20(c). Consequently, $-\\left(g_{m 1}+g_{m 2}\\right) V_{in}\\left(r_{O 1} \\| r_{O 2}\\right)=V_{\\text {out }}$, leading to\n\n$$\n\\begin{equation*}\nA_{v}=-\\left(g_{m 1}+g_{m 2}\\right)\\left(r_{O 1} \\| r_{O 2}\\right) \\tag{3.48}\n\\end{equation*}\n$$\n\nCompared to the amplifier in Fig. 3.19(b), this circuit has the same output resistance, $r_{O 1} \\| r_{O 2}$, but a greater transconductance. This topology is also known as a \"complementary CS stage.\"\n\nThe amplifier shown in Fig. 3.20(a) faces two significant challenges. First, the bias current of the transistors is highly dependent on PVT. Specifically, since $V_{G S 1}+\\left|V_{G S 2}\\right|=V_{D D}$, variations in $V_{D D}$ or threshold voltages directly impact the drain currents. Second, the circuit amplifies supply voltage variations (\"supply noise\"). To comprehend this, consider the setup in Fig. 3.21, where $V_{B}$ is a bias voltage to keep $M_{1}$ and $M_{2}$ in saturation. In Problem 3.31, we demonstrate that the small-signal gain from $V_{D D}$ to $V_{\\text {out }}$ is\n\n#### Nanometer Design Notes\n\nWith minimal channel lengths, the CS stage with a current-source load yields low gain. For instance, if $(W / L)$ NMOS $=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ and $(W / L)$ PMOS $=10 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$, the input-output characteristic, as shown in the figure, reveals a maximum gain of around 2.5. Plotting the slope also indicates a useful output voltage range of about 0.7 V with $V_{D D}=1 \\mathrm{~V}$. Beyond this range, the gain diminishes significantly.\nimage_name:input-output characteristic\ndescription:The graph illustrates the input-output characteristic, depicting the relationship between the input voltage \\( V_{in} \\) and the output voltage \\( V_{out} \\) of a common-source (CS) stage with a current-source load.\n\n1. **Type of Graph and Function:**\n- This is a voltage transfer characteristic graph.\n\n2. **Axes Labels and Units:**\n- The x-axis represents the input voltage \\( V_{in} \\) in volts (V), ranging from 0 to 1 V.\n- The y-axis represents the output voltage \\( V_{out} \\) in volts (V), also ranging from 0 to 1 V.\n- Both axes use a linear scale.\n\n3. **Overall Behavior and Trends:**\n- The graph shows a non-linear relationship between \\( V_{in} \\) and \\( V_{out} \\).\n- \\( V_{out} \\) remains relatively constant near its maximum value close to 1 V as \\( V_{in} \\) increases from 0 to about 0.3 V.\n- Between approximately 0.3 V and 0.6 V of \\( V_{in} \\), \\( V_{out} \\) decreases sharply, indicating the region of maximum gain.\n- Beyond 0.6 V of \\( V_{in} \\), \\( V_{out} \\) levels off and approaches a minimum value close to 0 V.\n\n4. **Key Features and Technical Details:**\n- The maximum gain occurs around \\( V_{in} = 0.3 \\) to 0.6 V, where the slope is steepest.\n- The useful output voltage range is about 0.7 V, corresponding to the linear region of the graph.\n- Outside this range, the gain drops considerably, as shown by the flattening curve at low and high \\( V_{in} \\) values.\n\n5. **Annotations and Specific Data Points:**\n- The graph lacks specific numerical annotations, but the context indicates a maximum gain of about 2.5 within the useful range.\n- Important data points include the transition region between 0.3 V and 0.6 V of \\( V_{in} \\), where \\( V_{out} \\) changes most rapidly.\n\nimage_name:A_v vs V_in\ndescription:1. **Type of Graph and Function:**\n- The graph plots voltage gain \\( A_v \\) versus input voltage \\( V_{in} \\), appearing as a linear plot.\n\n2. **Axes Labels and Units:**\n- The x-axis represents the input voltage \\( V_{in} \\) in volts (V), ranging from 0 to 1 V.\n- The y-axis represents the voltage gain \\( A_v \\), with values ranging from 0 to -3.\n- Both axes use a linear scale.\n\n3. **Overall Behavior and Trends:**\n- The graph shows a downward trend in gain as \\( V_{in} \\) increases from 0 to about 0.4 V, reaching a minimum gain of approximately -3 at around 0.5 V.\n- Beyond this point, the gain increases as \\( V_{in} \\) continues to rise, returning to around 0 at \\( V_{in} = 1 \\) V.\n- The curve resembles a parabolic dip centered around \\( V_{in} = 0.5 \\) V.\n\n4. **Key Features and Technical Details:**\n- The minimum gain occurs near \\( V_{in} = 0.5 \\) V, where \\( A_v \\) is approximately -3.\n- The gain is highest at the extremes of the \\( V_{in} \\) range, being close to 0 at \\( V_{in} = 0 \\) V and \\( V_{in} = 1 \\) V.\n- The transition region, where the gain changes most rapidly, is between 0.3 V and 0.6 V of \\( V_{in} \\).\n\n5. **Annotations and Specific Data Points:**\n- The graph lacks specific numerical annotations, but the context suggests a critical region for gain variation between 0.3 V and 0.6 V of \\( V_{in} \\).\n- The maximum gain within the useful range is about 2.5, though not directly visible on the graph.\n\n$$\n\\begin{align*}\n\\frac{V_{\\text {out }}}{V_{D D}} & =\\frac{g_{m 2} r_{O 2}+1}{r_{O 2}+r_{O 1}} r_{O 1}  \\tag{3.49}\\\\\n& =\\left(g_{m 2}+\\frac{1}{r_{O 2}}\\right)\\left(r_{O 1} \\| r_{O 2}\\right) \\tag{3.50}\n\\end{align*}\n$$\n\napproximately half of the $A_{v}$ value derived earlier. These issues are discussed in Chapter 5.\nimage_name:Figure 3.21 Arrangement for studying supply sensitivity of CS stage with active load\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: VB}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: VB}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a common-source amplifier with an active load. M1 is the NMOS transistor and M2 is the PMOS transistor. Both transistors' gates are connected to a bias voltage VB. The output is taken from the drain of M1 and M2, labeled as Vout. The circuit is powered by a voltage source VDD."
},
{
    "text": "In the amplifier configuration depicted in Fig. 3.19(b), the PMOS device functions as a constant current source. Can $M_{2}$ act as an amplifying component? Indeed, by applying the input signal to the gate of $M_{2}$, as shown in Fig. 3.20(a), it transforms into an \"active\" load, recognizable as a CMOS inverter topology. Assuming both transistors are in saturation and $V_{in}$ increases by $\\Delta V_{0}$, two changes occur: (a) $I_{D1}$ rises, pulling $V_{\\text{out}}$ down, and (b) $M_{2}$ injects less current into the output node, allowing $V_{\\text{out}}$ to decrease. These changes reinforce each other, resulting in higher voltage gain. As illustrated in Fig. 3.20(b), the two transistors operate in parallel and can be represented as a single entity, as shown in Fig. 3.20(c). This leads to the equation $-\\left(g_{m1}+g_{m2}\\right) V_{in}\\left(r_{O1} \\| r_{O2}\\right)=V_{\\text{out}}$, and thus\n\n$$\n\\begin{equation*}\nA_{v}=-\\left(g_{m1}+g_{m2}\\right)\\left(r_{O1} \\| r_{O2}\\right) \\tag{3.48}\n\\end{equation*}\n$$\n\nCompared to the amplifier in Fig. 3.19(b), this circuit has the same output resistance, $r_{O1} \\| r_{O2}$, but higher transconductance. This configuration is also known as a \"complementary CS stage.\"\n\nThe amplifier shown in Fig. 3.20(a) faces two critical challenges. First, the bias current of the transistors is highly dependent on PVT. Specifically, since $V_{GS1}+\\left|V_{GS2}\\right|=V_{DD}$, variations in $V_{DD}$ or threshold voltages directly affect the drain currents. Second, the circuit amplifies supply voltage variations (\"supply noise\"). To understand this, consider the setup in Fig. 3.21, where $V_{B}$ biases $M_{1}$ and $M_{2}$ into saturation. In Problem 3.31, we demonstrate that the small-signal gain from $V_{DD}$ to $V_{\\text{out}}$ is\n\n#### Nanometer Design Notes\n\nWith minimal channel lengths, the CS stage with a current-source load yields low gain. For instance, if $(W / L)$ NMOS $=5 \\mu \\mathrm{m} / 40 \\mathrm{nm}$ and $(W / L)$ PMOS $=10 \\mu \\mathrm{m} / 40 \\mathrm{nm}$, the input-output characteristic shown in the figure reveals a maximum gain of around 2.5. The useful output voltage range is approximately 0.7 V for $V_{DD}=1 \\mathrm{V}$. Beyond this range, the gain significantly decreases.\nimage_name:input-output characteristic\ndescription:The graph illustrates the input-output relationship of a CS stage with a current-source load, depicting the voltage transfer characteristics.\n\n1. **Type of Graph and Function:**\n- It is a voltage transfer characteristic graph.\n\n2. **Axes Labels and Units:**\n- The x-axis is the input voltage \\( V_{in} \\) in volts (V), ranging from 0 to 1 V.\n- The y-axis is the output voltage \\( V_{out} \\) in volts (V), also ranging from 0 to 1 V.\n- Both axes use a linear scale.\n\n3. **Overall Behavior and Trends:**\n- The graph shows a non-linear relationship between \\( V_{in} \\) and \\( V_{out} \\).\n- \\( V_{out} \\) remains near its maximum value as \\( V_{in} \\) increases from 0 to about 0.3 V.\n- Between 0.3 V and 0.6 V of \\( V_{in} \\), \\( V_{out} \\) decreases sharply, indicating maximum gain.\n- Beyond 0.6 V of \\( V_{in} \\), \\( V_{out} \\) flattens and approaches a minimum value.\n\n4. **Key Features and Technical Details:**\n- Maximum gain occurs between \\( V_{in} = 0.3 \\) V and 0.6 V.\n- The useful output voltage range is about 0.7 V.\n- Outside this range, the gain drops markedly.\n\n5. **Annotations and Specific Data Points:**\n- The graph lacks specific numerical annotations, but the context indicates a maximum gain of about 2.5 within the useful range.\n- The transition region is between 0.3 V and 0.6 V of \\( V_{in} \\).\n\nimage_name:A_v vs V_in\ndescription:1. **Type of Graph and Function:**\n- The graph plots voltage gain \\( A_v \\) versus input voltage \\( V_{in} \\).\n\n2. **Axes Labels and Units:**\n- The x-axis is \\( V_{in} \\) in volts (V), ranging from 0 to 1 V.\n- The y-axis is \\( A_v \\), ranging from 0 to -3.\n- Both axes use a linear scale.\n\n3. **Overall Behavior and Trends:**\n- The gain decreases as \\( V_{in} \\) increases from 0 to about 0.4 V, reaching a minimum of approximately -3 at 0.5 V.\n- Beyond this point, the gain increases, returning to around 0 at \\( V_{in} = 1 \\) V.\n- The curve resembles a parabolic dip centered at \\( V_{in} = 0.5 \\) V.\n\n4. **Key Features and Technical Details:**\n- Minimum gain occurs near \\( V_{in} = 0.5 \\) V.\n- Gain is highest at the ends of the \\( V_{in} \\) range.\n- The transition region is between 0.3 V and 0.6 V of \\( V_{in} \\).\n\n5. **Annotations and Specific Data Points:**\n- No specific numerical annotations, but the critical region for gain variation is between 0.3 V and 0.6 V of \\( V_{in} \\).\n\n$$\n\\begin{align*}\n\\frac{V_{\\text{out}}}{V_{DD}} & =\\frac{g_{m2} r_{O2}+1}{r_{O2}+r_{O1}} r_{O1}  \\tag{3.49}\\\\\n& =\\left(g_{m2}+\\frac{1}{r_{O2}}\\right)\\left(r_{O1} \\| r_{O2}\\right) \\tag{3.50}\n\\end{align*}\n$$\n\napproximately half of the $A_{v}$ value derived earlier. These issues are discussed in Chapter 5.\nimage_name:Figure 3.21 Arrangement for studying supply sensitivity of CS stage with active load\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: VB}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: VB}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a common-source amplifier with an active load. M1 is an NMOS transistor and M2 is a PMOS transistor. Both gates are connected to a bias voltage VB. The output is taken from the drain of M1 and M2, labeled as Vout. The circuit is powered by a voltage source VDD."
},
{
    "text": "In the amplifier configuration depicted in Fig. 3.19(b), the PMOS device functions as a steady current source. Can $M_{2}$ act as an amplifying component? Indeed; by applying the input signal to the gate of $M_{2}$, as shown in Fig. 3.20(a), it transforms into an \"active\" load. This configuration may be recognized as a CMOS inverter. Assuming both transistors are in saturation and $V_{in}$ increases by $\\Delta V_{0}$, two effects occur: (a) $I_{D 1}$ rises, pulling $V_{\\text{out}}$ down, and (b) $M_{2}$ injects less current into the output node, allowing $V_{\\text{out}}$ to decrease. These effects reinforce each other, resulting in a higher voltage gain. As illustrated in Fig. 3.20(b), the two transistors operate in parallel and can be represented as a single entity, as shown in Fig. 3.20(c). Consequently, $-\\left(g_{m 1}+g_{m 2}\\right) V_{in}\\left(r_{O 1} \\| r_{O 2}\\right)=V_{\\text{out}}$, leading to\n\n$$\n\\begin{equation*}\nA_{v}=-\\left(g_{m 1}+g_{m 2}\\right)\\left(r_{O 1} \\| r_{O 2}\\right) \\tag{3.48}\n\\end{equation*}\n$$\n\nCompared to the amplifier in Fig. 3.19(b), this circuit has the same output resistance, $r_{O 1} \\| r_{O 2}$, but a greater transconductance. This setup is also known as a \"complementary CS stage.\"\n\nThe amplifier in Fig. 3.20(a) faces two significant challenges. First, the bias current of the transistors is highly dependent on PVT. Specifically, since $V_{G S 1}+\\left|V_{G S 2}\\right|=V_{D D}$, variations in $V_{D D}$ or threshold voltages directly impact the drain currents. Second, the circuit amplifies supply voltage variations (\"supply noise\"). To comprehend this, consider the setup in Fig. 3.21, where $V_{B}$ is a bias voltage to keep $M_{1}$ and $M_{2}$ in saturation. In Problem 3.31, we demonstrate that the small-signal gain from $V_{D D}$ to $V_{\\text{out}}$ is\n\n#### Nanometer Design Notes\n\nWith minimal channel lengths, the CS stage with a current-source load yields a low gain. For instance, if $(W / L)$ NMOS $=5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ and $(W / L)$ PMOS $=10 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$, the input-output characteristic, as shown in the figure, reveals a maximum gain of about 2.5. The useful output voltage range is approximately 0.7 V when $V_{D D}=1 \\mathrm{~V}$. Beyond this range, the gain decreases substantially.\nimage_name:input-output characteristic\ndescription:The graph illustrates the input-output relationship of a common-source (CS) stage with a current-source load.\n\n1. **Type of Graph and Function:**\n- This is a voltage transfer characteristic graph.\n\n2. **Axes Labels and Units:**\n- The x-axis represents the input voltage \\( V_{in} \\) in volts (V), ranging from 0 to 1 V.\n- The y-axis represents the output voltage \\( V_{out} \\) in volts (V), also ranging from 0 to 1 V.\n- Both axes use a linear scale.\n\n3. **Overall Behavior and Trends:**\n- The graph displays a non-linear relationship between \\( V_{in} \\) and \\( V_{out} \\).\n- As \\( V_{in} \\) increases from 0 to about 0.3 V, \\( V_{out} \\) remains near its maximum value, close to 1 V.\n- Between approximately 0.3 V and 0.6 V of \\( V_{in} \\), \\( V_{out} \\) decreases sharply, indicating the region of maximum gain.\n- Beyond 0.6 V of \\( V_{in} \\), \\( V_{out} \\) levels off and approaches a minimum value near 0 V.\n\n4. **Key Features and Technical Details:**\n- The maximum gain occurs in the steepest part of the curve, around \\( V_{in} = 0.3 \\) to 0.6 V.\n- The useful output voltage range is about 0.7 V, corresponding to the linear region of the graph.\n- Outside this range, the gain significantly drops, as indicated by the flattening curve.\n\n5. **Annotations and Specific Data Points:**\n- The graph lacks specific numerical annotations, but the context mentions a maximum gain of about 2.5 within the useful range.\n- Important data points include the transition region between 0.3 V and 0.6 V of \\( V_{in} \\), where \\( V_{out} \\) changes most rapidly.\n\nimage_name:A_v vs V_in\ndescription:1. **Type of Graph and Function:**\n- The graph plots voltage gain \\( A_v \\) against input voltage \\( V_{in} \\), appearing linear.\n\n2. **Axes Labels and Units:**\n- The x-axis represents the input voltage \\( V_{in} \\) in volts (V), ranging from 0 to 1 V.\n- The y-axis represents the voltage gain \\( A_v \\), ranging from 0 to -3.\n- Both axes use a linear scale.\n\n3. **Overall Behavior and Trends:**\n- The graph shows a downward trend in gain as \\( V_{in} \\) increases from 0 to about 0.4 V, reaching a minimum of approximately -3 at around 0.5 V.\n- Beyond this point, the gain increases as \\( V_{in} \\) continues to rise, returning to around 0 at \\( V_{in} = 1 \\) V.\n- The curve resembles a parabolic dip centered around \\( V_{in} = 0.5 \\) V.\n\n4. **Key Features and Technical Details:**\n- The minimum gain occurs near \\( V_{in} = 0.5 \\) V, where \\( A_v \\) is approximately -3.\n- The gain is highest at the extremes of \\( V_{in} \\), being close to 0 at \\( V_{in} = 0 \\) V and \\( V_{in} = 1 \\) V.\n- The transition region, where gain changes most rapidly, is between 0.3 V and 0.6 V of \\( V_{in} \\).\n\n5. **Annotations and Specific Data Points:**\n- No specific numerical annotations are present, but the context indicates a critical region for gain variation between 0.3 V and 0.6 V of \\( V_{in} \\).\n- The maximum gain within the useful range is about 2.5, though not directly visible on the graph.\n\n$$\n\\begin{align*}\n\\frac{V_{\\text{out}}}{V_{D D}} & =\\frac{g_{m 2} r_{O 2}+1}{r_{O 2}+r_{O 1}} r_{O 1}  \\tag{3.49}\\\\\n& =\\left(g_{m 2}+\\frac{1}{r_{O 2}}\\right)\\left(r_{O 1} \\| r_{O 2}\\right) \\tag{3.50}\n\\end{align*}\n$$\n\napproximately half of the $A_{v}$ calculated earlier. These issues are discussed in Chapter 5.\nimage_name:Figure 3.21 Arrangement for studying supply sensitivity of CS stage with active load\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: VB}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: VB}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a common-source amplifier with an active load. M1 is an NMOS transistor and M2 is a PMOS transistor. Both transistors' gates are connected to a bias voltage VB. The output is taken from the drain of M1 and M2, labeled as Vout. The circuit is powered by a voltage source VDD."
},
{
    "text": "In the amplifier configuration shown in Fig. 3.19(b), the PMOS device acts as a steady current source. Can $M_{2}$ function as an amplifying component? Indeed; by applying the input signal to the gate of $M_{2}$, as illustrated in Fig. 3.20(a), it transforms into an \"active\" load. This configuration may be recognized as a CMOS inverter. Assuming both transistors are in saturation and $V_{i n}$ increases by $\\Delta V_{0}$, two effects ensue: (a) $I_{D 1}$ rises, causing $V_{\\text {out }}$ to decrease, and (b) $M_{2}$ injects less current into the output node, allowing $V_{\\text {out }}$ to fall. These effects reinforce each other, resulting in a higher voltage gain. As depicted in Fig. 3.20(b), the two transistors operate in parallel and merge into one, as shown in Fig. 3.20(c). Consequently, $-\\left(g_{m 1}+g_{m 2}\\right) V_{i n}\\left(r_{O 1} \\| r_{O 2}\\right)=V_{\\text {out }}$, leading to\n\n$$\n\\begin{equation*}\nA_{v}=-\\left(g_{m 1}+g_{m 2}\\right)\\left(r_{O 1} \\| r_{O 2}\\right) \\tag{3.48}\n\\end{equation*}\n$$\n\nCompared to the amplifier in Fig. 3.19(b), this circuit maintains the same output resistance, $r_{O 1} \\| r_{O 2}$, but offers a higher transconductance. This setup is also known as a \"complementary CS stage.\"\n\nThe amplifier in Fig. 3.20(a) faces two significant challenges. Firstly, the bias current of the transistors is highly dependent on PVT. Specifically, since $V_{G S 1}+\\left|V_{G S 2}\\right|=V_{D D}$, fluctuations in $V_{D D}$ or threshold voltages directly impact the drain currents. Secondly, the circuit amplifies supply voltage variations (\"supply noise\"). To comprehend this, consider the setup in Fig. 3.21, where $V_{B}$ is a bias voltage to keep $M_{1}$ and $M_{2}$ in saturation. In Problem 3.31, we demonstrate that the small-signal gain from $V_{D D}$ to $V_{\\text {out }}$ is given by\n\n#### Nanometer Design Notes\n\nWith minimal channel lengths, the CS stage with a current-source load yields a low gain. For instance, if $(W / L)$ for NMOS is $5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ and $(W / L)$ for PMOS is $10 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$, the input-output characteristic depicted in the figure shows a maximum gain of around 2.5. Plotting the slope reveals a useful output voltage range of about 0.7 V when $V_{D D}=1 \\mathrm{~V}$. Beyond this range, the gain decreases significantly.\nimage_name:input-output characteristic\ndescription:The graph illustrates the input-output relationship of a common-source (CS) stage with a current-source load.\n\n1. **Graph Type and Function:**\n- This is a voltage transfer characteristic graph.\n\n2. **Axes Labels and Units:**\n- The x-axis represents the input voltage \\( V_{in} \\) in volts (V), ranging from 0 to 1 V.\n- The y-axis represents the output voltage \\( V_{out} \\) in volts (V), also ranging from 0 to 1 V.\n- Both axes use a linear scale.\n\n3. **Overall Behavior and Trends:**\n- The graph shows a non-linear relationship between \\( V_{in} \\) and \\( V_{out} \\).\n- For \\( V_{in} \\) values from 0 to about 0.3 V, \\( V_{out} \\) remains near its maximum value close to 1 V.\n- Between approximately 0.3 V and 0.6 V of \\( V_{in} \\), \\( V_{out} \\) decreases sharply, indicating the region of maximum gain.\n- Beyond 0.6 V of \\( V_{in} \\), \\( V_{out} \\) stabilizes near 0 V.\n\n4. **Key Features and Technical Details:**\n- The maximum gain occurs between \\( V_{in} = 0.3 \\) V and 0.6 V, where the slope is steepest.\n- The useful output voltage range is about 0.7 V, corresponding to the linear region of the graph.\n- Outside this range, the gain drops considerably, as seen in the flattening curve.\n\n5. **Annotations and Specific Data Points:**\n- The graph lacks specific numerical annotations, but the context indicates a maximum gain of about 2.5 within the useful range.\n- Important transition occurs between 0.3 V and 0.6 V of \\( V_{in} \\).\n\nimage_name:A_v vs V_in\ndescription:1. **Graph Type and Function:**\n- The graph plots voltage gain \\( A_v \\) against input voltage \\( V_{in} \\), appearing linear.\n\n2. **Axes Labels and Units:**\n- The x-axis represents the input voltage \\( V_{in} \\) in volts (V), ranging from 0 to 1 V.\n- The y-axis shows the voltage gain \\( A_v \\), ranging from 0 to -3.\n- Both axes use a linear scale.\n\n3. **Overall Behavior and Trends:**\n- The graph exhibits a downward trend in gain as \\( V_{in} \\) increases from 0 to about 0.4 V, reaching a minimum of approximately -3 at around 0.5 V.\n- Beyond this point, the gain rises as \\( V_{in} \\) continues to increase, returning to around 0 at \\( V_{in} = 1 \\) V.\n- The curve forms a parabolic dip centered around \\( V_{in} = 0.5 \\) V.\n\n4. **Key Features and Technical Details:**\n- The minimum gain occurs near \\( V_{in} = 0.5 \\) V, where \\( A_v \\) is about -3.\n- The gain is highest at the extremes of \\( V_{in} \\), close to 0 at \\( V_{in} = 0 \\) V and \\( V_{in} = 1 \\) V.\n- The critical transition region is between 0.3 V and 0.6 V of \\( V_{in} \\).\n\n5. **Annotations and Specific Data Points:**\n- No specific numerical annotations are present, but the context suggests a critical gain variation region between 0.3 V and 0.6 V of \\( V_{in} \\).\n- The maximum gain within the useful range is about 2.5, though not directly visible on the graph.\n\n$$\n\\begin{align*}\n\\frac{V_{\\text {out }}}{V_{D D}} & =\\frac{g_{m 2} r_{O 2}+1}{r_{O 2}+r_{O 1}} r_{O 1}  \\tag{3.49}\\\\\n& =\\left(g_{m 2}+\\frac{1}{r_{O 2}}\\right)\\left(r_{O 1} \\| r_{O 2}\\right) \\tag{3.50}\n\\end{align*}\n$$\n\napproximately half of the $A_{v}$ calculated earlier. These concerns are addressed in Chapter 5.\nimage_name:Figure 3.21 Arrangement for studying supply sensitivity of CS stage with active load\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: VB}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: VB}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a common-source amplifier with an active load. M1 is an NMOS transistor and M2 is a PMOS transistor. Both transistors' gates are connected to a bias voltage VB. The output is taken from the drain of M1 and M2, labeled as Vout. The circuit is powered by a voltage source VDD."
},
{
    "text": "In the amplifier configuration depicted in Fig. 3.19(b), the PMOS device functions as a steady current source. Can $M_{2}$ also act as an amplifying component? Indeed; by applying the input signal to the gate of $M_{2}$, as shown in Fig. 3.20(a), it transforms into an \"active\" load. This configuration is recognizable as a CMOS inverter. Assuming both transistors are in saturation and $V_{in}$ increases by $\\Delta V_{0}$, two effects occur: (a) $I_{D 1}$ rises, pulling $V_{\\text{out}}$ down, and (b) $M_{2}$ injects less current into the output node, allowing $V_{\\text{out}}$ to decrease. These effects reinforce each other, resulting in a higher voltage gain. As illustrated in Fig. 3.20(b), the two transistors operate in parallel and can be simplified as shown in Fig. 3.20(c). Consequently, $-\\left(g_{m 1}+g_{m 2}\\right) V_{in}\\left(r_{O 1} \\| r_{O 2}\\right)=V_{\\text{out}}$, leading to\n\n$$\n\\begin{equation*}\nA_{v}=-\\left(g_{m 1}+g_{m 2}\\right)\\left(r_{O 1} \\| r_{O 2}\\right) \\tag{3.48}\n\\end{equation*}\n$$\n\nCompared to the amplifier in Fig. 3.19(b), this circuit maintains the same output resistance, $r_{O 1} \\| r_{O 2}$, but achieves a higher transconductance. This layout is also known as a \"complementary CS stage.\"\n\nThe amplifier shown in Fig. 3.20(a) faces two significant challenges. First, the bias current of the transistors is highly dependent on PVT. Specifically, since $V_{G S 1}+\\left|V_{G S 2}\\right|=V_{D D}$, variations in $V_{D D}$ or threshold voltages directly impact the drain currents. Second, the circuit is sensitive to supply voltage fluctuations (\"supply noise\"). To illustrate this, consider the setup in Fig. 3.21, where $V_{B}$ is a bias voltage that places $M_{1}$ and $M_{2}$ in saturation. In Problem 3.31, we demonstrate that the small-signal gain from $V_{D D}$ to $V_{\\text{out}}$ is given by\n\n#### Nanometer Design Notes\n\nWith minimal channel lengths, the CS stage with a current-source load yields a low gain. For instance, if $(W / L)$ for NMOS is $5 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$ and $(W / L)$ for PMOS is $10 \\mu \\mathrm{~m} / 40 \\mathrm{~nm}$, the resulting input-output characteristic, as shown in the figure, reveals a maximum gain of approximately 2.5. Plotting the slope also indicates a useful output voltage range of about 0.7 V with $V_{D D}=1 \\mathrm{~V}$. Beyond this range, the gain significantly decreases.\nimage_name:input-output characteristic\ndescription:The graph illustrates the input-output voltage relationship of a common-source (CS) stage with a current-source load.\n\n1. **Graph Type and Function:**\n- This is a voltage transfer characteristic graph.\n\n2. **Axes Labels and Units:**\n- The x-axis represents the input voltage \\( V_{in} \\) in volts (V), ranging from 0 to 1 V.\n- The y-axis represents the output voltage \\( V_{out} \\) in volts (V), also ranging from 0 to 1 V.\n- Both axes use a linear scale.\n\n3. **Overall Behavior and Trends:**\n- The graph shows a non-linear relationship between \\( V_{in} \\) and \\( V_{out} \\).\n- As \\( V_{in} \\) increases from 0 to about 0.3 V, \\( V_{out} \\) remains near its maximum value, close to 1 V.\n- Between approximately 0.3 V and 0.6 V of \\( V_{in} \\), \\( V_{out} \\) decreases sharply, indicating the region of maximum gain.\n- Beyond 0.6 V of \\( V_{in} \\), \\( V_{out} \\) levels off and approaches a minimum value near 0 V.\n\n4. **Key Features and Technical Details:**\n- The maximum gain occurs in the steepest part of the curve, around \\( V_{in} = 0.3 \\) to 0.6 V.\n- The useful output voltage range is about 0.7 V, corresponding to the linear region of the graph.\n- Outside this range, the gain drops significantly, as shown by the flattening curve at low and high \\( V_{in} \\) values.\n\n5. **Annotations and Specific Data Points:**\n- The graph lacks specific numerical annotations, but the context indicates a maximum gain of about 2.5 within the useful range.\n- Important data points include the transition region between 0.3 V and 0.6 V of \\( V_{in} \\), where \\( V_{out} \\) changes rapidly.\n\nimage_name:A_v vs V_in\ndescription:1. **Graph Type and Function:**\n- The graph plots voltage gain \\( A_v \\) against input voltage \\( V_{in} \\), appearing as a linear plot.\n\n2. **Axes Labels and Units:**\n- The x-axis represents the input voltage \\( V_{in} \\) in volts (V), ranging from 0 to 1 V.\n- The y-axis represents the voltage gain \\( A_v \\), with values ranging from 0 to -3.\n- Both axes use a linear scale.\n\n3. **Overall Behavior and Trends:**\n- The graph shows a downward trend in gain as \\( V_{in} \\) increases from 0 to about 0.4 V, reaching a minimum of approximately -3 at around 0.5 V.\n- Beyond this point, the gain increases as \\( V_{in} \\) continues to rise, returning to around 0 at \\( V_{in} = 1 \\) V.\n- The curve resembles a parabolic dip centered around \\( V_{in} = 0.5 \\) V.\n\n4. **Key Features and Technical Details:**\n- The minimum gain occurs near \\( V_{in} = 0.5 \\) V, where \\( A_v \\) is about -3.\n- The gain is highest at the extremes of the \\( V_{in} \\) range, close to 0 at \\( V_{in} = 0 \\) V and \\( V_{in} = 1 \\) V.\n- The transition region, where the gain changes most rapidly, is between 0.3 V and 0.6 V of \\( V_{in} \\).\n\n5. **Annotations and Specific Data Points:**\n- The graph lacks specific numerical annotations, but the critical region for gain variation is between 0.3 V and 0.6 V of \\( V_{in} \\).\n- The maximum gain within the useful range is about 2.5, though not directly visible on the graph.\n\n$$\n\\begin{align*}\n\\frac{V_{\\text{out}}}{V_{D D}} & =\\frac{g_{m 2} r_{O 2}+1}{r_{O 2}+r_{O 1}} r_{O 1}  \\tag{3.49}\\\\\n& =\\left(g_{m 2}+\\frac{1}{r_{O 2}}\\right)\\left(r_{O 1} \\| r_{O 2}\\right) \\tag{3.50}\n\\end{align*}\n$$\n\napproximately half of the $A_{v}$ value previously determined. These issues are discussed further in Chapter 5.\nimage_name:Figure 3.21 Arrangement for studying supply sensitivity of CS stage with active load\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: VB}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: VB}\nname: VDD, type: VoltageSource, value: VDD, ports: {Np: VDD, Nn: GND}\n]\nextrainfo:The circuit is a common-source amplifier with an active load. M1 is the NMOS transistor and M2 is the PMOS transistor. Both transistors' gates are connected to a bias voltage VB. The output is taken from the drain of M1 and M2, labeled as Vout. The circuit is powered by a voltage source VDD."
},
{
    "text": "A MOS device operating in the deep triode region functions as a resistor, making it suitable as the load in a CS stage. As depicted in Fig. 3.22, this circuit sets the gate of $M_{2}$ at a low enough level to ensure the load remains in the deep triode region across all output voltage swings. Given\n\n$$\n\\begin{equation*}\nR_{o n 2}=\\frac{1}{\\mu_{p} C_{o x}(W / L)_{2}\\left(V_{D D}-V_{b}-\\left|V_{T H P}\\right|\\right)} \\tag{3.51}\n\\end{equation*}\n$$\n\nthe voltage gain can be easily determined.\nThe main disadvantage of this circuit is the dependency of $R_{o n 2}$ on $\\mu_{p} C_{o x}$, $V_{b}$, and $V_{T H P}$. Since $\\mu_{p} C_{o x}$ and $V_{T H P}$ fluctuate with process and temperature variations, and achieving a precise $V_{b}$ necessitates additional complexity, this circuit is challenging to implement. However, triode loads require less voltage headroom compared to diode-connected devices. In Fig. 3.22, $V_{\\text {out }, \\max }=V_{D D}$, whereas in Fig. 3.16, $V_{\\text {out }, \\max } \\approx V_{D D}-\\left|V_{T H P}\\right|$.\nimage_name:Figure 3.22 CS stage with triode load\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\nname: Ron2, type: Resistor, value: Ron2, ports: {N1: VDD, N2: Vout}\n]\nextrainfo:The circuit diagram illustrates a CS stage with a triode load, featuring an NMOS transistor M1 and a PMOS transistor M2. M2 is set up as a triode load, and the circuit includes a resistor Ron2 linking VDD and Vout. This setup allows the maximum output voltage to approach VDD.\n\nAmong the five CS variants discussed earlier, those using resistive, current-source, or active loads are more commonly employed than the other two.\nimage_name:Figure 3.23 CS stage with source degeneration.(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: M1, type: NMOS, ports: {S: s1, D: Vout, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\n]\nextrainfo:The circuit diagram (a) presents a common-source (CS) stage with source degeneration, utilizing an NMOS transistor M1. The source degeneration is achieved through resistor RS, which aids in linearizing the circuit by decreasing the gain. M1 is connected to a load resistor RD, with the output derived from M1's drain. The circuit is powered by VDD, and the input voltage is Vin.\nimage_name:Figure 3.23 CS stage with source degeneration.(b)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: ID}\n]\nextrainfo:The circuit represents a common-source (CS) stage with source degeneration, incorporating an NMOS transistor M1. The source degeneration is facilitated by resistor RS. The voltage-controlled current source gmV1 models the transconductance of the NMOS. The input voltage Vin is applied to M1's gate, and the output is taken from the drain (Vout)."
},
{
    "text": "A MOS device operating in the deep triode region functions as a resistor, making it suitable as the load in a CS stage. As depicted in Fig. 3.22, this circuit sets the gate of $M_{2}$ at a low enough level to ensure the load remains in the deep triode region across all output voltage swings. Given\n\n$$\n\\begin{equation*}\nR_{o n 2}=\\frac{1}{\\mu_{p} C_{o x}(W / L)_{2}\\left(V_{D D}-V_{b}-\\left|V_{T H P}\\right|\\right)} \\tag{3.51}\n\\end{equation*}\n$$\n\nthe voltage gain can be easily determined.\nThe main disadvantage of this circuit is the dependency of $R_{o n 2}$ on $\\mu_{p} C_{o x}$, $V_{b}$, and $V_{T H P}$. Since $\\mu_{p} C_{o x}$ and $V_{T H P}$ vary with process and temperature, and creating an accurate $V_{b}$ involves extra complexity, this circuit is challenging to implement. However, triode loads require less voltage headroom than diode-connected devices because in Fig. 3.22, $V_{\\text {out }, \\max }=V_{D D}$, whereas in Fig. 3.16, $V_{\\text {out }, \\max } \\approx V_{D D}-\\left|V_{T H P}\\right|$.\nimage_name:Figure 3.22 CS stage with triode load\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\nname: Ron2, type: Resistor, value: Ron2, ports: {N1: VDD, N2: Vout}\n]\nextrainfo:The circuit diagram illustrates a CS stage with a triode load, featuring an NMOS transistor M1 and a PMOS transistor M2. M2 is set up as a triode load, and the circuit includes a resistor Ron2 connected between VDD and Vout. This setup allows the maximum output voltage to approach VDD.\n\nAmong the five CS variants discussed earlier, those using resistive, current-source, or active loads are more commonly used than the other two.\nimage_name:Figure 3.23 CS stage with source degeneration.(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: M1, type: NMOS, ports: {S: s1, D: Vout, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\n]\nextrainfo:The circuit diagram (a) presents a common-source (CS) stage with source degeneration, utilizing an NMOS transistor M1. The source degeneration is achieved through resistor RS, which helps linearize the circuit by reducing gain. M1 is connected to a load resistor RD, and the output is derived from M1's drain. The circuit is powered by VDD, with the input voltage being Vin.\nimage_name:Figure 3.23 CS stage with source degeneration.(b)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: ID}\n]\nextrainfo:The circuit represents a common-source (CS) stage with source degeneration, incorporating an NMOS transistor M1. The source degeneration is provided by resistor RS. The voltage-controlled current source gmV1 models the transconductance of the NMOS. The input voltage Vin is applied to the gate of M1, and the output is taken from the drain (Vout)."
},
{
    "text": "A MOS device operating in the deep triode region functions as a resistor, making it suitable as the load in a CS stage. As depicted in Fig. 3.22, this circuit biases the gate of $M_{2}$ at a low enough level to ensure the load remains in the deep triode region across all output voltage swings. Given\n\n$$\n\\begin{equation*}\nR_{o n 2}=\\frac{1}{\\mu_{p} C_{o x}(W / L)_{2}\\left(V_{D D}-V_{b}-\\left|V_{T H P}\\right|\\right)} \\tag{3.51}\n\\end{equation*}\n$$\n\nthe voltage gain can be easily determined.\nThe main disadvantage of this circuit is the dependency of $R_{o n 2}$ on $\\mu_{p} C_{o x}$, $V_{b}$, and $V_{T H P}$. Since $\\mu_{p} C_{o x}$ and $V_{T H P}$ vary with process and temperature, and achieving a precise $V_{b}$ requires additional complexity, this circuit is challenging to implement. However, triode loads require less voltage headroom than diode-connected devices because in Fig. 3.22, $V_{\\text {out }, \\max }=V_{D D}$, whereas in Fig. 3.16, $V_{\\text {out }, \\max } \\approx V_{D D}-\\left|V_{T H P}\\right|$.\nimage_name:Figure 3.22 CS stage with triode load\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\nname: Ron2, type: Resistor, value: Ron2, ports: {N1: VDD, N2: Vout}\n]\nextrainfo:The circuit diagram illustrates a CS stage with a triode load, featuring an NMOS transistor M1 and a PMOS transistor M2. M2 is set up as a triode load, and the circuit includes a resistor Ron2 linking VDD to Vout. This setup allows the maximum output voltage to approach VDD.\n\nAmong the five CS variants discussed earlier, those using resistive, current-source, or active loads are more commonly used than the other two.\nimage_name:Figure 3.23 CS stage with source degeneration.(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: M1, type: NMOS, ports: {S: s1, D: Vout, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\n]\nextrainfo:The circuit diagram (a) presents a common-source (CS) stage with source degeneration, employing an NMOS transistor M1. The source degeneration is achieved through resistor RS, which helps linearize the circuit by lowering the gain. M1 is connected to a load resistor RD, with the output taken from M1's drain. The circuit is powered by VDD, and the input voltage is Vin.\nimage_name:Figure 3.23 CS stage with source degeneration.(b)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: ID}\n]\nextrainfo:The circuit is a common-source (CS) stage with source degeneration, utilizing an NMOS transistor M1. The source degeneration is provided by resistor RS. The voltage-controlled current source gmV1 represents the transconductance of the NMOS. The input voltage Vin is applied to M1's gate, and the output is obtained from the drain (Vout)."
},
{
    "text": "A MOS device operating in the deep triode region functions as a resistor, making it suitable as the load in a CS stage. As depicted in Fig. 3.22, this circuit biases the gate of $M_{2}$ at a sufficiently low level, ensuring the load remains in the deep triode region across all output voltage swings. Given\n\n$$\n\\begin{equation*}\nR_{o n 2}=\\frac{1}{\\mu_{p} C_{o x}(W / L)_{2}\\left(V_{D D}-V_{b}-\\left|V_{T H P}\\right|\\right)} \\tag{3.51}\n\\end{equation*}\n$$\n\nthe voltage gain can be easily determined.\nThe main disadvantage of this circuit is the dependence of $R_{o n 2}$ on $\\mu_{p} C_{o x}$, $V_{b}$, and $V_{T H P}$. Since $\\mu_{p} C_{o x}$ and $V_{T H P}$ vary with process and temperature, and creating an accurate $V_{b}$ requires additional complexity, this circuit is challenging to implement. However, triode loads require less voltage headroom than diode-connected devices because in Fig. 3.22, $V_{\\text {out }, \\max }=V_{D D}$, whereas in Fig. 3.16, $V_{\\text {out }, \\max } \\approx V_{D D}-\\left|V_{T H P}\\right|$.\nimage_name:Figure 3.22 CS stage with triode load\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\nname: Ron2, type: Resistor, value: Ron2, ports: {N1: VDD, N2: Vout}\n]\nextrainfo:The circuit diagram illustrates a CS stage with a triode load, featuring an NMOS transistor M1 and a PMOS transistor M2 configured as a triode load. It also includes a resistor Ron2 connected between VDD and Vout, allowing for a maximum output voltage close to VDD.\n\nAmong the five CS variants discussed, those using resistive, current-source, or active loads are more commonly used than the other two.\nimage_name:Figure 3.23 CS stage with source degeneration.(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: M1, type: NMOS, ports: {S: s1, D: Vout, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\n]\nextrainfo:The circuit diagram (a) shows a common-source (CS) stage with source degeneration, utilizing an NMOS transistor M1. The source degeneration is achieved through resistor RS, which helps linearize the circuit by reducing the gain. M1 is connected to a load resistor RD, with the output taken from the drain of M1. The circuit is powered by VDD, and the input voltage is Vin.\nimage_name:Figure 3.23 CS stage with source degeneration.(b)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: ID}\n]\nextrainfo:The circuit represents a common-source (CS) stage with source degeneration, using an NMOS transistor M1. The source degeneration is provided by resistor RS. The voltage-controlled current source gmV1 models the transconductance of the NMOS. The input voltage Vin is applied to the gate of M1, and the output is taken from the drain (Vout)."
},
{
    "text": "A MOS device operating in the deep triode region functions as a resistor, making it suitable as the load in a CS stage. As depicted in Fig. 3.22, this circuit biases the gate of $M_{2}$ at a sufficiently low level, ensuring the load remains in the deep triode region across all output voltage swings. Given\n\n$$\n\\begin{equation*}\nR_{o n 2}=\\frac{1}{\\mu_{p} C_{o x}(W / L)_{2}\\left(V_{D D}-V_{b}-\\left|V_{T H P}\\right|\\right)} \\tag{3.51}\n\\end{equation*}\n$$\n\nthe voltage gain can be easily determined.\nThe main drawback of this circuit is the dependence of $R_{o n 2}$ on $\\mu_{p} C_{o x}$, $V_{b}$, and $V_{T H P}$. Since $\\mu_{p} C_{o x}$ and $V_{T H P}$ vary with process and temperature, and generating a precise $V_{b}$ requires additional complexity, this circuit is challenging to use. However, triode loads consume less voltage headroom than diode-connected devices because in Fig. 3.22, $V_{\\text {out }, \\max }=V_{D D}$, whereas in Fig. 3.16, $V_{\\text {out }, \\max } \\approx V_{D D}-\\left|V_{T H P}\\right|$.\nimage_name:Figure 3.22 CS stage with triode load\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\nname: Ron2, type: Resistor, value: Ron2, ports: {N1: VDD, N2: Vout}\n]\nextrainfo:The circuit diagram illustrates a CS stage with a triode load, featuring an NMOS transistor M1 and a PMOS transistor M2 configured as a triode load. The circuit includes a resistor Ron2 connected between VDD and Vout, allowing for a maximum output voltage close to VDD.\n\nAmong the five CS variants discussed, those using resistive, current-source, or active loads are more widely used than the other two.\nimage_name:Figure 3.23 CS stage with source degeneration.(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: M1, type: NMOS, ports: {S: s1, D: Vout, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\n]\nextrainfo:The circuit diagram (a) shows a common-source (CS) stage with source degeneration, utilizing an NMOS transistor M1. The source degeneration is achieved through resistor RS, which helps linearize the circuit by reducing gain. M1 is connected to a load resistor RD, and the output is taken from M1's drain. The circuit is powered by VDD, with the input voltage being Vin.\nimage_name:Figure 3.23 CS stage with source degeneration.(b)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: ID}\n]\nextrainfo:This circuit is a common-source (CS) stage with source degeneration, using an NMOS transistor M1. The source degeneration is provided by resistor RS. The voltage-controlled current source gmV1 represents the transconductance of the NMOS. The input voltage Vin is applied to the gate of M1, with the output taken from the drain (Vout)."
},
{
    "text": "A MOS device operating in the deep triode region functions as a resistor, making it suitable as the load in a CS stage. As depicted in Fig. 3.22, this circuit sets the gate of $M_{2}$ at a low enough level to ensure the load remains in the deep triode region across all output voltage swings. Given\n\n$$\n\\begin{equation*}\nR_{o n 2}=\\frac{1}{\\mu_{p} C_{o x}(W / L)_{2}\\left(V_{D D}-V_{b}-\\left|V_{T H P}\\right|\\right)} \\tag{3.51}\n\\end{equation*}\n$$\n\nthe voltage gain can be easily determined.\nThe main disadvantage of this circuit is the dependency of $R_{o n 2}$ on $\\mu_{p} C_{o x}$, $V_{b}$, and $V_{T H P}$. Since $\\mu_{p} C_{o x}$ and $V_{T H P}$ fluctuate with process and temperature variations, and achieving a precise $V_{b}$ necessitates additional complexity, this circuit is challenging to implement. However, triode loads require less voltage headroom compared to diode-connected devices. In Fig. 3.22, $V_{\\text {out }, \\max }=V_{D D}$, whereas in Fig. 3.16, $V_{\\text {out }, \\max } \\approx V_{D D}-\\left|V_{T H P}\\right|$.\nimage_name:Figure 3.22 CS stage with triode load\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\nname: Ron2, type: Resistor, value: Ron2, ports: {N1: VDD, N2: Vout}\n]\nextrainfo:The circuit diagram illustrates a CS stage with a triode load, featuring an NMOS transistor M1 and a PMOS transistor M2. M2 is set up as a triode load, and the circuit includes a resistor Ron2 linking VDD and Vout. This setup allows the maximum output voltage to approach VDD.\n\nAmong the five CS variants discussed earlier, those using resistive, current-source, or active loads are more commonly employed than the other two.\nimage_name:Figure 3.23 CS stage with source degeneration.(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: M1, type: NMOS, ports: {S: s1, D: Vout, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\n]\nextrainfo:The circuit diagram (a) presents a common-source (CS) stage with source degeneration, utilizing an NMOS transistor M1. The source degeneration is achieved through resistor RS, which aids in linearizing the circuit by lowering the gain. M1 is connected to a load resistor RD, with the output derived from M1's drain. The circuit is powered by VDD, and the input voltage is Vin.\nimage_name:Figure 3.23 CS stage with source degeneration.(b)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: ID}\n]\nextrainfo:The circuit represents a common-source (CS) stage with source degeneration, incorporating an NMOS transistor M1. The source degeneration is facilitated by resistor RS. The voltage-controlled current source gmV1 models the transconductance of the NMOS. The input voltage Vin is applied to M1's gate, and the output is taken from the drain (Vout)."
},
{
    "text": "A MOS device operating in the deep triode region functions as a resistor, making it suitable as the load in a CS stage. As depicted in Fig. 3.22, this circuit biases the gate of $M_{2}$ at a low enough level to ensure the load remains in the deep triode region across all output voltage swings. Given the equation\n\n$$\n\\begin{equation*}\nR_{o n 2}=\\frac{1}{\\mu_{p} C_{o x}(W / L)_{2}\\left(V_{D D}-V_{b}-\\left|V_{T H P}\\right|\\right)} \\tag{3.51}\n\\end{equation*}\n$$\n\nthe voltage gain can be easily determined.\nThe main disadvantage of this circuit is the dependency of $R_{o n 2}$ on $\\mu_{p} C_{o x}$, $V_{b}$, and $V_{T H P}$. Since $\\mu_{p} C_{o x}$ and $V_{T H P}$ vary with process and temperature, and achieving a precise $V_{b}$ requires additional complexity, this circuit is challenging to implement. However, triode loads use less voltage headroom than diode-connected devices because in Fig. 3.22, $V_{\\text {out }, \\max }=V_{D D}$, whereas in Fig. 3.16, $V_{\\text {out }, \\max } \\approx V_{D D}-\\left|V_{T H P}\\right|$.\nimage_name:Figure 3.22 CS stage with triode load\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\nname: Ron2, type: Resistor, value: Ron2, ports: {N1: VDD, N2: Vout}\n]\nextrainfo:The circuit diagram illustrates a CS stage with a triode load, featuring an NMOS transistor M1 and a PMOS transistor M2. M2 is set up as a triode load, and the circuit includes a resistor Ron2 linking VDD to Vout. This setup allows the maximum output voltage to approach VDD.\n\nAmong the five CS variants examined, those using resistive, current-source, or active loads are more commonly used than the other two.\nimage_name:Figure 3.23 CS stage with source degeneration.(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: M1, type: NMOS, ports: {S: s1, D: Vout, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\n]\nextrainfo:The circuit diagram (a) presents a common-source (CS) stage with source degeneration, utilizing an NMOS transistor M1. The source degeneration is achieved through resistor RS, which aids in linearizing the circuit by lowering the gain. The NMOS transistor M1 is connected to a load resistor RD, with the output derived from M1's drain. The circuit is powered by VDD, and the input voltage is Vin.\nimage_name:Figure 3.23 CS stage with source degeneration.(b)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: ID}\n]\nextrainfo:The circuit represents a common-source (CS) stage with source degeneration, incorporating an NMOS transistor M1. The source degeneration is provided by resistor RS. The voltage-controlled current source gmV1 models the transconductance of the NMOS. The input voltage Vin is applied to M1's gate, and the output is taken from the drain (Vout)."
},
{
    "text": "A MOS device operating in the deep triode region functions as a resistor, making it suitable as the load in a CS stage. As depicted in Fig. 3.22, this circuit biases the gate of $M_{2}$ at a low enough level to ensure the load remains in the deep triode region across all output voltage swings. Given\n\n$$\n\\begin{equation*}\nR_{o n 2}=\\frac{1}{\\mu_{p} C_{o x}(W / L)_{2}\\left(V_{D D}-V_{b}-\\left|V_{T H P}\\right|\\right)} \\tag{3.51}\n\\end{equation*}\n$$\n\nthe voltage gain can be easily determined.\nThe main disadvantage of this circuit is the dependency of $R_{o n 2}$ on $\\mu_{p} C_{o x}$, $V_{b}$, and $V_{T H P}$. Since $\\mu_{p} C_{o x}$ and $V_{T H P}$ vary with process and temperature, and achieving a precise $V_{b}$ requires additional complexity, this circuit is challenging to implement. However, triode loads require less voltage headroom than diode-connected devices because, in Fig. 3.22, $V_{\\text {out }, \\max }=V_{D D}$, whereas in Fig. 3.16, $V_{\\text {out }, \\max } \\approx V_{D D}-\\left|V_{T H P}\\right|$.\nimage_name:Figure 3.22 CS stage with triode load\ndescription:\n[\nname: M1, type: NMOS, ports: {S: GND, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: VDD, D: Vout, G: Vb}\nname: Ron2, type: Resistor, value: Ron2, ports: {N1: VDD, N2: Vout}\n]\nextrainfo:The circuit diagram illustrates a CS stage with a triode load, featuring an NMOS transistor M1 and a PMOS transistor M2. M2 is set up as a triode load, and the circuit includes a resistor Ron2 connected between VDD and Vout. This setup allows the maximum output voltage to approach VDD.\n\nAmong the five CS variants discussed, those using resistive, current-source, or active loads are more commonly used than the other two.\nimage_name:Figure 3.23 CS stage with source degeneration.(a)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: M1, type: NMOS, ports: {S: s1, D: Vout, G: Vin}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\n]\nextrainfo:The circuit diagram (a) presents a common-source (CS) stage with source degeneration, employing an NMOS transistor M1. The source degeneration is achieved through resistor RS, which helps linearize the circuit by lowering the gain. M1 is connected to a load resistor RD, with the output taken from M1's drain. The circuit is powered by VDD, and the input voltage is Vin.\nimage_name:Figure 3.23 CS stage with source degeneration.(b)\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: RS, type: Resistor, value: RS, ports: {N1: s1, N2: GND}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: ID}\n]\nextrainfo:The circuit is a common-source (CS) stage with source degeneration, utilizing an NMOS transistor M1. The source degeneration is provided by resistor RS. The voltage-controlled current source gmV1 represents the transconductance of the NMOS. The input voltage Vin is applied to the gate of M1, and the output is derived from the drain (Vout)."
},
{
    "text": "In certain applications, the drain current's nonlinear relationship with the overdrive voltage can lead to excessive nonlinearity, making it beneficial to adjust the device characteristics to be more linear. As discussed in Sec. 3.3.2, we observed the linear behavior of a CS stage with a diode-connected load, which enables postcorrection of nonlinearity. Another approach, as shown in Fig. 3.23(a), involves placing a degeneration resistor in series with the source terminal to enhance the input device's linearity. Let's assume that channel-length modulation and body effect are negligible. As $V_{i n}$ increases, both $I_{D}$ and the voltage drop across $R_{S}$ also increase. This means that a portion of the change in $V_{i n}$ is distributed across the resistor instead of contributing to the gate-source overdrive, resulting in a smoother variation of $I_{D}$. From another perspective, we aim to make the gain equation less dependent on $g_{m}$. Since $V_{\\text {out }}=V_{D D}-I_{D} R_{D}$, the circuit's nonlinearity stems from the nonlinear relationship between $I_{D}$ and $V_{i n}$. We observe that $\\partial V_{\\text {out }} / \\partial V_{i n}=-\\left(\\partial I_{D} / \\partial V_{i n}\\right) R_{D}$, and define the equivalent transconductance of the circuit as $G_{m}=\\partial I_{D} / \\partial V_{i n}$. Assuming $I_{D}=f\\left(V_{G S}\\right)$, we can write:\n\n$$\n\\begin{align*}\nG_{m} & =\\frac{\\partial I_{D}}{\\partial V_{i n}}  \\tag{3.52}\\\\\n& =\\frac{\\partial f}{\\partial V_{G S}} \\frac{\\partial V_{G S}}{\\partial V_{i n}} \\tag{3.53}\n\\end{align*}\n$$\n\n[^12]Since $V_{G S}=V_{i n}-I_{D} R_{S}$, we have $\\partial V_{G S} / \\partial V_{i n}=1-R_{S} \\partial I_{D} / \\partial V_{i n}$, leading in:\n\n$$\n\\begin{equation*}\nG_{m}=\\left(1-R_{S} \\frac{\\partial I_{D}}{\\partial V_{i n}}\\right) \\frac{\\partial f}{\\partial V_{G S}} \\tag{3.54}\n\\end{equation*}\n$$\n\nHere, $\\partial f / \\partial V_{G S}$ is the transconductance of $M_{1}$, and:\n\n$$\n\\begin{equation*}\nG_{m}=\\frac{g_{m}}{1+g_{m} R_{S}} \\tag{3.55}\n\\end{equation*}\n$$\n\nThe small-signal voltage gain is thus equal to\n\n$$\n\\begin{align*}\nA_{v} & =-G_{m} R_{D}  \\tag{3.56}\\\\\n& =\\frac{-g_{m} R_{D}}{1+g_{m} R_{S}} \\tag{3.57}\n\\end{align*}\n$$\n\nThe same result can be derived using the small-signal model of Fig. 3.23(b) by writing a KVL, $V_{i n}=$ $V_{1}+I_{D} R_{S}$, and noting that $I_{D}=g_{m} V_{1}$. Equation (3.55) implies that as $R_{S}$ increases, $G_{m}$ becomes less dependent on $g_{m}$ and, consequently, the drain current. In fact, for $R_{S} \\gg 1 / g_{m}$, we have $G_{m} \\approx 1 / R_{S}$, i $\\Delta I_{D} \\approx \\Delta V_{i n} / R_{S}$, and\nIn drain text provided\nIn certain applications, the drain current's nonlinear dependence on the overdrive voltage can cause in significant nonlinearity, prompting a need to \"softper\" the device characteristics. As 3.3.2 highlighted the linear behavior of a CS stage with a diode-connected load, which facilitates the \"postcorrection\" of nonlinearity. Alternatively, as illustrated in Fig. 3.23(a), this can be achieved by inserting a \"degeneration\" resistor in series with the source terminal to enhance the input device's linearity. Let simplicity sake of simplicity, let's disregard channel-length modulation and body effect. As $V_{i n}$ rises, both $I_{D}$ and the voltage drop across $R_{S}$ increase as well. This implies that a portion of the change in $V_{i n}$ is diverted across the resistor instead of contributing to the gate-source overdrive, thereby causing $ more\nIn certain applications, the drain current's nonlinear dependence with the overdrive voltage can lead to excessive nonlinearity, making it beneficial to adjust the device characteristics to be more linear. As discussed in Sec. 3.3.2, we observed the linear behavior of a CS stage with a diode-connected load, which enables postcorrection of nonlinearity. Another approach, as shown in Fig. 3.23(a), involves placing a degeneration resistor in series with the source terminal to enhance the input device's linearity. Let's assume that channel-length modulation and body effect are negligible. As $V_{i n}$ increases, both $I_{D}$ and the voltage drop across $R_{S}$ also increase. This means that a portion of the change in $V_{i n}$ is distributed across the resistor instead of contributing to the gate-source overdrive, resulting in a smoother variation of $I_{D}$. From another perspective, we aim to make the gain equation less dependent on $g_{m}$. Since $V_{\\text {out }}=V_{D D}-I_{D} R_{D}$, the circuit's nonlinearity stems from the nonlinear relationship between $I_{D}$ and $V_{i n}$. We observe that $\\partial V_{\\text {out }} / \\partial V_{i n}=-\\left(\\partial I_{D} / \\partial V_{i n}\\right) R_{D}$, and define the equivalent transconductance of the circuit as $G_{m}=\\partial I_{D} / \\partial V_{i n}$. Assuming $I_{D}=f\\left(V_{G S}\\right)$, we can write:\n\n$$\n\\begin{align*}\nG_{m} & =\\frac{\\partial I_{D}}{\\partial V_{i n}}  \\tag{3.52}\\\\\n& =\\frac{\\partial f}{\\partial V_{G S}} \\frac{\\partial V_{G S}}{\\partial V_{i n}} \\tag{3.53}\n\\end{align*}\n$$\n\n[^12]Since $V_{G S}=V_{i n}-I_{D} R_{S}$, we have $\\partial V_{G S} / \\partial V_{i n}=1-R_{S} \\partial I_{D} / \\partial V_{i n}$, resulting in:\n\n$$\n\\begin{equation*}\nG_{m}=\\left(1-R_{S} \\frac{\\partial I_{D}}{\\partial V_{i n}}\\right) \\frac{\\partial f}{\\partial V_{G S}} \\tag{3.54}\n\\end{equation*}\n$$\n\nBut, $\\partial f / \\partial V_{G S}$ is the transconductance of $M_{1}$, and\n\n$$\n\\begin{equation*}\nG_{m}=\\frac{g_{m}}{1+g_{m} R_{S}} \\tag{3.55}\n\\end{equation*}\n$$\n\nThe small-signal voltage gain is thus equal to\n\n$$\n\\begin{align*}\nA_{v} & =-G_{m} R_{D}  \\tag{3.56}\\\\\n& =\\frac{-g_{m} R_{D}}{1+g_{m} R_{S}} \\tag{3.57}\n\\end{align*}\n$$\n\nThe same result can be derived using the small-signal model of Fig. 3.23(b) by writing a KVL, $V_{i n}=$ $V_{1}+I_{D} R_{S}$, and noting that $I_{D}=g_{m} V_{1}$. Equation (3.55) implies that as $R_{S}$ increases, $G_{m}$ becomes less dependent on $g_{m}$ and, consequently, the drain current. In fact, for $R_{S} \\gg 1 / g_{m}$, we have $G_{m} \\approx 1 / R_{S}$, meaning $\\Delta I_{D} \\approx \\Delta V_{i n} / R_{S}$,"
},
{
    "text": "In certain applications, the drain current's nonlinear dependence on the overdrive voltage leads to excessive nonlinearity, prompting a need to \"soften\" the device characteristics. As discussed in Sec. 3.3.2, the linear behavior of a CS stage with a diode-connected load enables \"postcorrection\" of nonlinearity. Another approach, as illustrated in Fig. 3.23(a), involves placing a \"degeneration\" resistor in series with the source terminal to enhance the input device's linearity. For simplicity, we will disregard channel-length modulation and body effect. As $V_{i n}$ increases, both $I_{D}$ and the voltage drop across $R_{S}$ also increase. This means that a portion of the change in $V_{i n}$ manifests across the resistor rather than as the gate-source overdrive, resulting in a smoother variation of $I_{D}$. From a different perspective, we aim to make the gain equation less dependent on $g_{m}$. Since $V_{\\text {out }}=V_{D D}-I_{D} R_{D}$, the circuit's nonlinearity stems from the nonlinear dependence of $I_{D}$ on $V_{i n}$. We observe that $\\partial V_{\\text {out }} / \\partial V_{i n}=-\\left(\\partial I_{D} / \\partial V_{i n}\\right) R_{D}$, and define the equivalent transconductance of the circuit as $G_{m}=\\partial I_{D} / \\partial V_{i n} .{ }^{3}$ Now, assuming that $I_{D}=f\\left(V_{G S}\\right)$, we write:\n\n$$\n\\begin{align*}\nG_{m} & =\\frac{\\partial I_{D}}{\\partial V_{i n}}  \\tag{3.52}\\\\\n& =\\frac{\\partial f}{\\partial V_{G S}} \\frac{\\partial V_{G S}}{\\partial V_{i n}} \\tag{3.53}\n\\end{align*}\n$$\n\n[^12]Since $V_{G S}=V_{i n}-I_{D} R_{S}$, we have $\\partial V_{G S} / \\partial V_{i n}=1-R_{S} \\partial I_{D} / \\partial V_{i n}$, obtaining:\n\n$$\n\\begin{equation*}\nG_{m}=\\left(1-R_{S} \\frac{\\partial I_{D}}{\\partial V_{i n}}\\right) \\frac{\\partial f}{\\partial V_{G S}} \\tag{3.54}\n\\end{equation*}\n$$\n\nBut, $\\partial f / \\partial V_{G S}$ is the transconductance of $M_{1}$, and:\n\n$$\n\\begin{equation*}\nG_{m}=\\frac{g_{m}}{1+g_{m} R_{S}} \\tag{3.55}\n\\end{equation*}\n$$\n\nThe small-signal voltage gain is thus equal to:\n\n$$\n\\begin{align*}\nA_{v} & =-G_{m} R_{D}  \\tag{3.56}\\\\\n& =\\frac{-g_{m} R_{D}}{1+g_{m} R_{S}} \\tag{3.57}\n\\end{align*}\n$$\n\nThe same result can be derived using the small-signal model of Fig. 3.23(b) by writing a KVL, $V_{i n}=$ $V_{1}+I_{D} R_{S}$, and noting that $I_{D}=g_{m} V_{1}$. Equation (3.55) implies that as $R_{S}$ increases, $G_{m}$ becomes less dependent on $g_{m}$ and, consequently, the drain current. In fact, for $R_{S} \\gg 1 / g_{m}$, we have $G_{m} \\approx 1 / R_{S}$, i.e., $\\Delta I_{D} \\approx \\Delta V_{i n} / R_{S}$, indicating that most of the change in $V_{i n}$ appears across $R_{S}$. We can say that the drain current is a \"linearized\" function of the input voltage. In Problem 3.30, we explore this effect from a different perspective. The linearization is achieved at the expense of lower gain [and higher noise (Chapter 7)].\n\nFor our subsequent calculations, it is beneficial to determine $G_{m}$ in the presence of body effect and channel-length modulation. Using the equivalent circuit shown in Fig. 3.24, we recognize that the current through $R_{S}$ equals $I_{\\text {out }}$ and, therefore, $V_{\\text {in }}=V_{1}+I_{\\text {out }} R_{S}$. Summing the currents at node $X$, we have:\n\n$$\n\\begin{align*}\nI_{\\text {out }} & =g_{m} V_{1}-g_{m b} V_{X}-\\frac{I_{\\text {out }} R_{S}}{r_{O}}  \\tag{3.58}\\\\\n& =g_{m}\\left(V_{\\text {in }}-I_{\\text {out }} R_{S}\\right)+g_{m b}\\left(-I_{\\text {out }} R_{S}\\right)-\\frac{I_{\\text {out }} R_{S}}{r_{O}} \\tag{3.59}\n\\end{align*}\n$$\n\nIt follows that:\n\n$$\n\\begin{align*}\nG_{m} & =\\frac{I_{\\text {out }}}{V_{\\text {in }}}  \\tag{3.60}\\\\\n& =\\frac{g_{m} r_{O}}{R_{S}+\\left[1+\\left(g_{m}+g_{m b}\\right) R_{S}\\right] r_{O}} \\tag{3.61}\n\\end{align*}\n$$\n\nFigure 3.24 depicts the small-signal equivalent circuit of a degenerated CS stage, which includes a voltage source Vin, a resistor Rs, and two voltage-controlled current sources representing transconductance gm and body effect gmb.\n\nNow, let's examine the large-signal behavior of the CS stage with $R_{S}=0$ and $R_{S} \\neq 0$. For $R_{S}=0$, our derivations in Chapter 2 suggest that $I_{D}$ and $g_{m}$ vary as shown in Fig. 3.25(a). For $R_{S} \\neq 0$, the turn-on behavior is similar to that in Fig. 3.25(a) because, at low current levels, $1 / g_{m} \\gg R_{S}$, and hence $G_{m} \\approx g_{m}$ [Fig. 3.25(b)]. As the overdrive and, consequently, $g_{m}$ increase, the effect of degeneration, $1+g_{m} R_{S}$ in (3.55), becomes more pronounced. For large values of $V_{i n}$ (if $M_{1}$ is still saturated), $I_{D}$ is approximately a linear function of $V_{i n}$ and $G_{m}$ approaches $1 / R_{S}$.\n"
},
{
    "text": "In certain applications, the drain current's nonlinear dependence on the overdrive voltage leads to significant nonlinearity, making it beneficial to \"soften\" the device characteristics. In Sec. 3.3.2, we discussed the linear behavior of a CS stage using a diode-connected load, which allows \"postcorrection\" of the nonlinearity. Alternatively, as shown in Fig. 3.23(a), this can be achieved by placing a \"degeneration\" resistor in series with the source terminal to make the input device more linear. Let's ignore channel-length modulation and body effect. Here, as $V_{i n}$ increases, $I_{D}$ and the voltage drop across $R_{S}$ also increase. That is, a fraction of the change in $V_{i n}$ appears across the resistor instead of as the gate-source overdrive, leading to a smoother variation of $I_{D}$. From another perspective, we aim to make the gain equation a weaker function of $g_{m}$. Since $V_{\\text {out }}=V_{D D}-I_{D} R_{D}$, the nonlinearity of the circuit arises from the nonlinear dependence of $I_{D}$ upon $V_{i n}$. We note that $\\partial V_{\\text {out }} / \\partial V_{i n}=-\\left(\\partial I_{D} / \\partial V_{i n}\\right) R_{D}$, and define the equivalent transconductance of the circuit as $G_{m}=\\partial I_{D} / \\partial V_{i n} .{ }^{3}$ Now, assuming that $I_{D}=f\\left(V_{G S}\\right)$, we write\n\n$$\n\\begin{align*}\nG_{m} & =\\frac{\\partial I_{D}}{\\partial V_{i n}}  \\tag{3.52}\\\\\n& =\\frac{\\partial f}{\\partial V_{G S}} \\frac{\\partial V_{G S}}{\\partial V_{i n}} \\tag{3.53}\n\\end{align*}\n$$\n\n[^12]Since $V_{G S}=V_{i n}-I_{D} R_{S}$, we have $\\partial V_{G S} / \\partial V_{i n}=1-R_{S} \\partial I_{D} / \\partial V_{i n}$, obtaining\n\n$$\n\\begin{equation*}\nG_{m}=\\left(1-R_{S} \\frac{\\partial I_{D}}{\\partial V_{i n}}\\right) \\frac{\\partial f}{\\partial V_{G S}} \\tag{3.54}\n\\end{equation*}\n$$\n\nBut, $\\partial f / \\partial V_{G S}$ is the transconductance of $M_{1}$, and\n\n$$\n\\begin{equation*}\nG_{m}=\\frac{g_{m}}{1+g_{m} R_{S}} \\tag{3.55}\n\\end{equation*}\n$$\n\nThe small-signal voltage gain is thus equal to\n\n$$\n\\begin{align*}\nA_{v} & =-G_{m} R_{D}  \\tag{3.56}\\\\\n& =\\frac{-g_{m} R_{D}}{1+g_{m} R_{S}} \\tag{3.57}\n\\end{align*}\n$$\n\nThe same result can be derived using the small-signal model of Fig. 3.23(b) by writing a KVL, $V_{i n}=$ $V_{1}+I_{D} R_{S}$, and noting that $I_{D}=g_{m} V_{1}$. Equation (3.55) implies that as $R_{S}$ increases, $G_{m}$ becomes a weaker function of $g_{m}$ and hence the drain current. In fact, for $R_{S} \\gg 1 / g_{m}$, we have $G_{m} \\approx 1 / R_{S}$, i.e., $\\Delta I_{D} \\approx \\Delta V_{i n} / R_{S}$, concluding that most of the change in $V_{i n}$ appears across $R_{S}$. We say that the drain current is a \"linearized\" function of the input voltage. In Problem 3.30, we examine this effect from a different perspective. The linearization is obtained at the cost of lower gain [and higher noise (Chapter 7)].\n\nFor our subsequent calculations, it is useful to determine $G_{m}$ in the presence of body effect and channel-length modulation. With the aid of the equivalent circuit shown in Fig. 3.24, we recognize that the current through $R_{S}$ equals $I_{\\text {out }}$ and, therefore, $V_{\\text {in }}=V_{1}+I_{\\text {out }} R_{S}$. Summing the currents at node $X$, we have\n\n$$\n\\begin{align*}\nI_{\\text {out }} & =g_{m} V_{1}-g_{m b} V_{X}-\\frac{I_{\\text {out }} R_{S}}{r_{O}}  \\tag{3.58}\\\\\n& =g_{m}\\left(V_{\\text {in }}-I_{\\text {out }} R_{S}\\right)+g_{m b}\\left(-I_{\\text {out }} R_{S}\\right)-\\frac{I_{\\text {out }} R_{S}}{r_{O}} \\tag{3.59}\n\\end{align*}\n$$\n\nIt follows that\n\n$$\n\\begin{align*}\nG_{m} & =\\frac{I_{\\text {out }}}{V_{\\text {in }}}  \\tag{3.60}\\\\\n& =\\frac{g_{m} r_{O}}{R_{S}+\\left[1+\\left(g_{m}+g_{m b}\\right) R_{S}\\right] r_{O}} \\tag{3.61}\n\\end{align*}\n$$\n\nimage_name:Figure 3.24 Small-signal equivalent circuit of a degenerated CS stage\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: V1, type: VoltageSource, value: V1, ports: {Np: V1, Nn: X}\nname: Rs, type: Resistor, value: Rs, ports: {N1: X, N2: GND}\nname: gmV1, type: VoltageControlledCurrentSource, value: gmV1, ports: {Np: GND, Nn: X}\nname: ro, type: Resistor, value: ro, ports: {N1: X, N2: X}\nname: gmbVbs, type: VoltageControlledCurrentSource, value: gmbVbs, ports: {Np: GND, Nn: X}\n]\nextrainfo:The circuit is a small-signal equivalent of a degenerated common-source stage. It includes a voltage source Vin, a resistor Rs, and two voltage-controlled current sources representing transconductance gm and body effect gmb.\n\nFigure 3.24 Small-signal equivalent circuit of a degenerated CS stage.\n\nLet us now examine the large-signal behavior of the CS stage with $R_{S}=0$ and $R_{S} \\neq 0$. For $R_{S}=0$, our derivations in Chapter 2 indicate that $I_{D}$ and $g_{m}$ vary as shown in Fig. 3.25(a). For $R_{S} \\neq 0$, the turn-on behavior is similar to that in Fig. 3.25(a) because, at low current levels, $1 / g_{m} \\gg R_{S}$, and hence $G_{m} \\approx g_{m}\\left[\\right.$ Fig. 3.25(b)]. As the overdrive and therefore $g_{m}$ increase, the effect of degeneration, $1+g_{m} R_{S}$ in (3.55), becomes more significant. For large values of $V_{i n}$ (if $M_{1}$ is still saturated), $I_{D}$ is approximately a linear function of $V_{i n}$ and $G_{m}$ approaches $1 / R_{S}$.\nimage_name:(a)\ndescription:The graph in Fig. 3.25(a) consists of two separate plots, each illustrating a different relationship involving the input voltage, \\( V_{in} \\), for a common-source (CS) device without source degeneration.\n\n1. **Left Plot - Drain Current \\( I_D \\) vs. Input Voltage \\( V_{in} \\):**\n- **Type of Graph:** This is a current-voltage characteristic curve.\n- **Axes Labels and Units:** The x-axis represents the input voltage \\( V_{in} \\) and the y-axis represents the drain current \\( I_D \\). Units are not specified but are typically in volts for \\( V_{in} \\) and amperes for \\( I_D \\).\n- **Overall Behavior and Trends:** The graph shows a threshold-like behavior starting at a voltage \\( V_{TH} \\). Below \\( V_{TH} \\), the drain current \\( I_D \\) is negligible. As \\( V_{in} \\) exceeds \\( V_{TH} \\), \\( I_D \\) begins to increase, initially in a nonlinear fashion, indicating the device is turning on. Beyond this, the current increases more linearly with \\( V_{in} \\).\n- **Key Features and Technical Details:** The threshold voltage \\( V_{TH} \\) marks the point where the device begins to conduct significantly.\n\n2. **Right Plot - Transconductance \\( g_m \\) vs. Input Voltage \\( V_{in} \\):**\n- **Type of Graph:** This is a transconductance-voltage characteristic curve.\n- **Axes Labels and Units:** The x-axis represents the input voltage \\( V_{in} \\), and the y-axis represents the transconductance \\( g_m \\). Units for \\( g_m \\) are typically siemens.\n- **Overall Behavior and Trends:** The plot shows \\( g_m \\) starting from zero at \\( V_{TH} \\) and increasing linearly with \\( V_{in} \\) as the input voltage increases beyond \\( V_{TH} \\).\n- **Key Features and Technical Details:** The linear increase in \\( g_m \\) indicates that the device's ability to conduct increases steadily with increasing \\( V_{in} \\) past the threshold voltage.\n\nThese graphs illustrate the basic turn-on characteristics of a CS device without source degeneration, showing how both the drain current and transconductance respond to changes in input voltage.\n\nimage_name:(b)\ndescription:The graph labeled (b) consists of two plots, each demonstrating the effect of source degeneration on a common-source (CS) device. The left plot shows the drain current ($I_D$) as a function of the input voltage ($V_{in}$), while the right plot displays the transconductance ($G_m$) versus the same input voltage.\n\nLeft Plot: Drain Current ($I_D$ vs. $V_{in}$)\n- **Axes Labels and Units:**\n- The horizontal axis represents the input voltage ($V_{in}$).\n- The vertical axis represents the drain current ($I_D$).\n- **Overall Behavior and Trends:**\n- The plot begins at the threshold voltage ($V_{TH}$), which is marked on the horizontal axis.\n- Initially, the curve rises slowly, indicating a sub-threshold region.\n- Beyond $V_{TH}$, the curve becomes linear, showing a direct proportionality between $I_D$ and $V_{in}$.\n- **Key Features and Technical Details:**\n- The slope of the linear region is indicated as $1/R_S$, highlighting the impact of source degeneration resistance on the drain current.\n\nRight Plot: Transconductance ($G_m$ vs. $V_{in}$)\n- **Axes Labels and Units:**\n- The horizontal axis represents the input voltage ($V_{in}$).\n- The vertical axis represents the transconductance ($G_m$).\n- **Overall Behavior and Trends:**\n- The transconductance is initially flat near zero for $V_{in}$ values below $V_{TH}$, indicating minimal transconductance.\n- As $V_{in}$ increases beyond $V_{TH}$, $G_m$ rises steeply and then levels off, approaching a maximum value.\n- **Key Features and Technical Details:**\n- The maximum transconductance value is marked as $1/R_S$, showing the limiting effect of source degeneration on $G_m$.\n\nAnnotations and Specific Data Points:\n- Both plots mark the threshold voltage ($V_{TH}$) as a critical point where the behavior of the device changes.\n- The slope in the linear region of the $I_D$ plot and the maximum value of $G_m$ are both related to the source degeneration resistance ($R_S$), emphasizing its role in the device's performance.\n\nFigure 3.25 Drain current and transconductance of a CS device (a) without and (b) with source degeneration.\n\n#### Example 3.9\n\nPlot the small-signal voltage gain of the circuit in Fig. 3.23 as a function of the input bias voltage, $V_{i n}$.\n\n#### Solution\n\nUsing the results derived above for the equivalent transconductance of $M_{1}$ and $R_{S}$, we arrive at the plot shown in Fig. 3.26. For $V_{i n}$ slightly greater than $V_{T H}, 1 / g_{m} \\gg R_{S}$ and $A_{v} \\approx-g_{m} R_{D}$. As $V_{i n}$ increases, degeneration becomes more significant and $A_{v}=-g_{m} R_{D} /\\left(1+g_{m} R_{S}\\right)$. For large values of $V_{i n}, G_{m} \\approx 1 / R_{S}$ and $A_{v}=-R_{D} / R_{S}$. However, if $V_{\\text {in }}>V_{\\text {out }}+V_{T H}$, that is, if $R_{D} I_{D}>V_{T H}+V_{D D}-V_{i n}, M_{1}$ enters the triode region and $A_{v}$ drops.\nimage_name:Figure 3.26\ndescription:The graph in Figure 3.26 is a plot depicting the voltage gain \\( |A_v| \\) as a function of the input voltage \\( V_{in} \\). The x-axis represents the input voltage \\( V_{in} \\), while the y-axis represents the magnitude of the voltage gain \\( |A_v| \\). The graph is plotted on a linear scale for both axes.\n\n**Overall Behavior and Trends:**\n- The graph starts at a low gain level when \\( V_{in} \\) is slightly greater than the threshold voltage \\( V_{TH} \\).\n- Initially, as \\( V_{in} \\) increases, the gain \\( |A_v| \\) rises sharply, indicating a region where the gain is approximately \\( g_m R_D \\), reflecting the transconductance \\( g_m \\) and the drain resistance \\( R_D \\).\n- As \\( V_{in} \\) continues to increase, the rate of increase in gain diminishes, transitioning into a more gradual slope.\n- Eventually, the gain approaches a maximum value of \\( R_D / R_S \\), where \\( R_S \\) is the source resistance. This indicates that the system is entering a region dominated by source degeneration.\n\n**Key Features and Technical Details:**\n- The graph shows a clear transition from a region with a steep gain increase to a saturation region where the gain levels off.\n- The point \\( V_{TH} \\) marks the threshold voltage beyond which the gain begins to rise.\n- The maximum gain \\( R_D / R_S \\) is shown as a dashed line parallel to the x-axis, indicating the asymptotic behavior of the gain as \\( V_{in} \\) becomes large.\n\n**Annotations and Specific Data Points:**\n- The threshold voltage \\( V_{TH} \\) is a critical point on the x-axis where the gain starts to increase.\n- The annotation \\( g_m R_D \\) marks the initial gain slope region, showing the dependence on transconductance and drain resistance.\n- The dashed line at \\( R_D / R_S \\) serves as a reference for the maximum achievable gain in this configuration.\n\nEquation (3.57) can be rewritten as\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{R_{D}}{\\frac{1}{g_{m}}+R_{S}} \\tag{3.62}\n\\end{equation*}\n$$\n\nThis result allows formulating the gain by inspection. First, let us examine the denominator of (3.62). The expression is equal to the series combination of the inverse transconductance of the device and the explicit resistance seen from the source to ground. We call the denominator \"the resistance seen in the source path\" because if, as shown in Fig. 3.27, we disconnect the bottom terminal of $R_{S}$ from ground and calculate the resistance seen \"looking up\" (while setting the input to zero), we obtain $R_{S}+1 / g_{m}$.\n\nimage_name:Figure 3.27 Resistance seen in the source path\ndescription:\n[\nname: M, type: NMOS, ports: {S: S1, D: LOAD, G: Vin}\nname: Rs, type: Resistor, value: Rs, ports: {N1: S1, N2: GND}\n]\nextrainfo:The circuit is a simple NMOS amplifier with a resistor Rs connected to the source. The resistance seen in the source path is Rs + 1/gm, where gm is the transconductance of the NMOS transistor. The load is connected to the drain of the NMOS transistor.\n\nNoting that the numerator of (3.62) is the resistance seen at the drain, we view the magnitude of the gain as the resistance seen at the drain node divided by the total resistance in the source path. This method greatly simplifies the analysis of more complex circuits.\n\n#### Example 3.10\n\nAssuming $\\lambda=\\gamma=0$, calculate the small-signal gain of the circuit shown in Fig. 3.28(a).\nimage_name:Figure 3.28(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1s2, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: s1s2, D: GND, G: s1s2}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\n]\nextrainfo:The circuit is a"
},
{
    "text": "In certain applications, the drain current's nonlinear dependence on the overdrive voltage results in excessive nonlinearity, necessitating the \"softening\" of device characteristics. As discussed in Sec. 3.3.2, a CS stage using a diode-connected load exhibits linear behavior, allowing for \"postcorrection\" of nonlinearity. Alternatively, as shown in Fig. 3.23(a), this can be achieved by placing a \"degeneration\" resistor in series with the source terminal, enhancing the input device's linearity. Ignoring channel-length modulation and body effect, as $V_{i n}$ increases, $I_{D}$ and the voltage drop across $R_{S}$ also increase. Consequently, a portion of the $V_{i n}$ change appears across the resistor rather than as the gate-source overdrive, resulting in a smoother variation of $I_{D}$. From another perspective, we aim to make the gain equation less dependent on $g_{m}$. Since $V_{\\text {out }}=V_{D D}-I_{D} R_{D}$, the circuit's nonlinearity stems from the nonlinear dependence of $I_{D}$ on $V_{i n}$. We observe that $\\partial V_{\\text {out }} / \\partial V_{i n}=-\\left(\\partial I_{D} / \\partial V_{i n}\\right) R_{D}$, and define the equivalent transconductance of the circuit as $G_{m}=\\partial I_{D} / \\partial V_{i n} .{ }^{3}$ Now, assuming that $I_{D}=f\\left(V_{G S}\\right)$, we write:\n\n$$\n\\begin{align*}\nG_{m} & =\\frac{\\partial I_{D}}{\\partial V_{i n}}  \\tag{3.52}\\\\\n& =\\frac{\\partial f}{\\partial V_{G S}} \\frac{\\partial V_{G S}}{\\partial V_{i n}} \\tag{3.53}\n\\end{align*}\n$$\n\n[^12]Since $V_{G S}=V_{i n}-I_{D} R_{S}$, we have $\\partial V_{G S} / \\partial V_{i n}=1-R_{S} \\partial I_{D} / \\partial V_{i n}$, obtaining:\n\n$$\n\\begin{equation*}\nG_{m}=\\left(1-R_{S} \\frac{\\partial I_{D}}{\\partial V_{i n}}\\right) \\frac{\\partial f}{\\partial V_{G S}} \\tag{3.54}\n\\end{equation*}\n$$\n\nBut, $\\partial f / \\partial V_{G S}$ is the transconductance of $M_{1}$, and:\n\n$$\n\\begin{equation*}\nG_{m}=\\frac{g_{m}}{1+g_{m} R_{S}} \\tag{3.55}\n\\end{equation*}\n$$\n\nThe small-signal voltage gain is thus equal to:\n\n$$\n\\begin{align*}\nA_{v} & =-G_{m} R_{D}  \\tag{3.56}\\\\\n& =\\frac{-g_{m} R_{D}}{1+g_{m} R_{S}} \\tag{3.57}\n\\end{align*}\n$$\n\nThe same result can be derived using the small-signal model of Fig. 3.23(b) by writing a KVL, $V_{i n}=$ $V_{1}+I_{D} R_{S}$, and noting that $I_{D}=g_{m} V_{1}$. Equation (3.55) implies that as $R_{S}$ increases, $G_{m}$ becomes less dependent on $g_{m}$ and hence the drain current. In fact, for $R_{S} \\gg 1 / g_{m}$, we have $G_{m} \\approx 1 / R_{S}$, i.e., $\\Delta I_{D} \\approx \\Delta V_{i n} / R_{S}$, concluding that most of the change in $V_{i n}$ appears across $R_{S}$. We say that the drain current is a \"linearized\" function of the input voltage. In Problem 3.30, we examine this effect from a different perspective. The linearization is obtained at the cost of lower gain [and higher noise (Chapter 7)].\n\nFor our subsequent calculations, it is useful to determine $G_{m}$ in the presence of body effect and channel-length modulation. With the aid of the equivalent circuit shown in Fig. 3.24, we recognize that the current through $R_{S}$ equals $I_{\\text {out }}$ and, therefore, $V_{\\text {in }}=V_{1}+I_{\\text {out }} R_{S}$. Summing the currents at node $X$, we have:\n\n$$\n\\begin{align*}\nI_{\\text {out }} & =g_{m} V_{1}-g_{m b} V_{X}-\\frac{I_{\\text {out }} R_{S}}{r_{O}}  \\tag{3.58}\\\\\n& =g_{m}\\left(V_{\\text {in }}-I_{\\text {out }} R_{S}\\right)+g_{m b}\\left(-I_{\\text {out }} R_{S}\\right)-\\frac{I_{\\text {out }} R_{S}}{r_{O}} \\tag{3.59}\n\\end{align*}\n$$\n\nIt follows that:\n\n$$\n\\begin{align*}\nG_{m} & =\\frac{I_{\\text {out }}}{V_{\\text {in }}}  \\tag{3.60}\\\\\n& =\\frac{g_{m} r_{O}}{R_{S}+\\left[1+\\left(g_{m}+g_{m b}\\right) R_{S}\\right] r_{O}} \\tag{3.61}\n\\end{align*}\n$$\n\nFigure 3.24 Small-signal equivalent circuit of a degenerated CS stage.\n\nLet us now examine the large-signal behavior of the CS stage with $R_{S}=0$ and $R_{S} \\neq 0$. For $R_{S}=0$, our derivations in Chapter 2 indicate that $I_{D}$ and $g_{m}$ vary as shown in Fig. 3.25(a). For $R_{S} \\neq 0$, the turn-on behavior is similar to that in Fig. 3.25(a) because, at low current levels, $1 / g_{m} \\gg R_{S}$, and hence $G_{m} \\approx g_{m}\\left[\\right.$ Fig. 3.25(b)]. As the overdrive and therefore $g_{m}$ increase, the effect of degeneration, $1+g_{m} R_{S}$ in (3.55), becomes more significant. For large values of $V_{i n}$ (if $M_{1}$ is still saturated), $I_{D}$ is approximately a linear function of $V_{i n}$ and $G_{m}$ approaches $1 / R_{S}$.\nFigure 3.25 Drain current and transconductance of a CS device (a) without and (b) with source degeneration.\n\n#### Example 3.9\n\nPlot the small-signal voltage gain of the circuit in Fig. 3.23 as a function of the input bias voltage, $V_{i n}$.\n\n#### Solution\n\nUsing the results derived above for the equivalent transconductance of $M_{1}$ and $R_{S}$, we arrive at the plot shown in Fig. 3.26. For $V_{i n}$ slightly greater than $V_{T H}, 1 / g_{m} \\gg R_{S}$ and $A_{v} \\approx-g_{m} R_{D}$. As $V_{i n}$ increases, degeneration becomes more significant and $A_{v}=-g_{m} R_{D} /\\left(1+g_{m} R_{S}\\right)$. For large values of $V_{i n}, G_{m} \\approx 1 / R_{S}$ and $A_{v}=-R_{D} / R_{S}$. However, if $V_{\\text {in }}>V_{\\text {out }}+V_{T H}$, that is, if $R_{D} I_{D}>V_{T H}+V_{D D}-V_{i n}, M_{1}$ enters the triode region and $A_{v}$ drops.\nFigure 3.26\n\nEquation (3.57) can be rewritten as:\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{R_{D}}{\\frac{1}{g_{m}}+R_{S}} \\tag{3.62}\n\\end{equation*}\n$$\n\nThis result allows formulating the gain by inspection. First, let us examine the denominator of (3.62). The expression is equal to the series combination of the inverse transconductance of the device and the explicit resistance seen from the source to ground. We call the denominator \"the resistance seen in the source path\" because if, as shown in Fig. 3.27, we disconnect the bottom terminal of $R_{S}$ from ground and calculate the resistance seen \"looking up\" (while setting the input to zero), we obtain $R_{S}+1 / g_{m}$.\n\nFigure 3.27 Resistance seen in the source path.\n\nNoting that the numerator of (3.62) is the resistance seen at the drain, we view the magnitude of the gain as the resistance seen at the drain node divided by the total resistance in the source path. This method greatly simplifies the analysis of more complex circuits.\n\n#### Example 3.10\n\nAssuming $\\lambda=\\gamma=0$, calculate the small-signal gain of the circuit shown in Fig. 3.28(a).\nFigure 3.28(a)\n\n#### Solution\n\nNoting that $M_{2}$ is a diode-connected device and simplifying the circuit to that shown in Fig. 3.28(b), we use the above rule to write:\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{R_{D}}{\\frac{1}{g_{m 1}}+\\frac{1}{g_{m 2}}} \\tag{3.63}\n\\end{equation*}\n$$\n\nOutput Resistance Another important consequence of source degeneration is the increase in the output resistance of the stage. We calculate the output resistance first with the aid of the equivalent circuit shown in Fig. 3.29, where the load resistor, $R_{D}$, is excluded for now. Note that body effect is also included to arrive at a general result. Since the current through $R_{S}$ is equal to $I_{X}, V_{1}=-I_{X} R_{S}$, and the current flowing through $r_{O}$ is given by $I_{X}-\\left(g_{m}+g_{m b}\\right) V_{1}=I_{X}+\\left(g_{m}+g_{m b}\\right) R_{S} I_{X}$. Adding the voltage drops across $r_{O}$ and $R_{S}$, we obtain:\n\n$$\n\\begin{equation*}\nr_{O}\\left[I_{X}+\\left(g_{m}+g_{m b}\\right) R_{S} I_{X}\\right]+I_{X} R_{S}=V_{X} \\tag{3.64}\n\\end{equation*}\n$$\n\nIt follows that:\n\n$$\n\\begin{align*}\nR_{\\text {out }} & =\\left[1+\\left(g_{m}+g_{m b}\\right) R_{S}\\right] r_{O}+R_{S}  \\tag{3.65}\\\\\n& =\\left[1+\\left(g_{m}+g_{m b}\\right) r_{O}\\right] R_{S}+r_{O} \\tag{3.66}\n\\end{align*}\n$$\n\nEquation (3.65) indicates that $r_{O}$ is \"boosted\" by a factor of $1+\\left(g_{m}+g_{m b}\\right) R_{S}$ and then added to $R_{S}$. As an alternative perspective, Eq. (3.66) suggests that $R_{S}$ is boosted by a factor of $1+\\left(g_{m}+g_{m b}\\right) r_{O}$ (a value close to the transistor's intrinsic gain) and then added to $r_{O}$. Both views prove useful in analyzing circuits. Note that the overall output resistance is equal to the parallel combination of $R_{\\text {out }}$ and $R_{D}$. If $\\left(g_{m}+g_{m b}\\right) r_{O} \\gg 1$, we have:\n\n$$\n\\begin{align*}\nR_{\\text {out }} & \\approx\\left(g_{m}+g_{m b}\\right) r_{O} R_{S}+r_{O}  \\tag{3.67}\\\\\n& =\\left[1+\\left(g_{m}+g_{m b}\\right) R_{S}\\right] r_{O} \\tag{3.68}\n\\end{align*}\n$$\n\nTo gain more insight, let us consider the circuit of Fig. 3.29 with $R_{S}=0$ and $R_{S}>0$. If $R_{S}=0$, then $g_{m} V_{1}=g_{m b} V_{b s}=0$ and $I_{X}=V_{X} / r_{O}$. On the other hand, if $R_{S}>0$, we have $I_{X} R_{S}>0$ and $V_{1}<0$, obtaining negative $g_{m} V_{1}$ and $g_{m b} V_{b s}$. Thus, the current supplied by $V_{X}$ is less than $V_{X} / r_{O}$, and hence the output impedance is greater than $r_{O}$.\n\nThe relationship in (3.65) can also be derived by inspection. As shown in Fig. 3.30(a), we apply a voltage to the output node, change its value by $\\Delta V$, and measure the resulting change, $\\Delta I$, in the output current. Since the current through $R_{S}$ must change by $\\Delta I$ (why?), we first compute the voltage change across $R_{S}$. To this end, we draw the circuit as shown in Fig. 3.30(b) and note that the resistance seen looking into the source of $M_{1}$ is equal to $1 /\\left(g_{m}+g_{m b}\\right)$ [Eq. (3.24)], thus arriving at the equivalent circuit in Fig. 3.30(c). The voltage change across $R_{S}$ is therefore equal to:\n\n$$\n\\begin{equation*}\n\\Delta V_{R S}=\\Delta V \\frac{\\frac{1}{g_{m}+g_{m b}} \\| R_{S}}{\\frac{1}{g_{m}+g_{m b}} \\| R_{S}+r_{O}} \\tag{3.69}\n\\end{equation*}\n$$\n\nFigure 3.30 (a) Change in drain current in response to change in applied voltage to drain; (b) equivalent of (a); (c) small-signal model.\n\nThe change in the current is:\n\n$$\n\\begin{align*}\n\\Delta I & =\\frac{\\Delta V_{R S}}{R_{S}}  \\tag{3.70}\\\\\n& =\\Delta V \\frac{1}{\\left[1+\\left(g_{m}+g_{m b}\\right)\\right] R_{S} r_{O}+R_{S}} \\tag{3.71}\n\\end{align*}\n$$\n\nthat is,\n\n$$\n\\begin{equation*}\n\\frac{\\Delta V}{\\Delta I}=\\left[1+\\left(g_{m}+g_{m b}\\right) R_{S}\\right] r_{O}+R_{S} \\tag{3.72}\n\\end{equation*}\n$$\n\nWith the foregoing developments, we can now compute the gain of a degenerated CS stage in the general case, taking into account both body effect and channel-length modulation. In the equivalent circuit depicted in Fig. 3.31, the current through $R_{S}$ must equal that through $R_{D}$, i.e., $-V_{\\text {out }} / R_{D}$. Thus, the source voltage with respect to ground (and the bulk) is equal to $-V_{\\text {out }} R_{S} / R_{D}$, yielding $V_{1}=V_{\\text {in }}+V_{\\text {out }} R_{S} / R_{D}$. The current flowing through $r_{O}$ from top to bottom can therefore be written as:\n\n$$\n\\begin{align*}\nI_{r o} & =-\\frac{V_{\\text {out }}}{R_{D}}-\\left(g_{m} V_{1}+g_{m b} V_{\\text{bs }}\\right)  \\tag{3.73}\\\\\n& =-\\frac{V_{\\text {out }}}{R_{D}}-\\left[g_{m}\\left(V_{\\text {in }}+V_{\\text {out }} \\frac{R_{S}}{R_{D}}\\right)+g_{m b} V_{\\text {out }} \\frac{R_{S}}{R_{D}}\\right] \\tag{3.74}\n\\end{align*}\n$$\n\nFigure 3.31 Small-signal model of degenerated CS stage with finite output resistance.\n\nSince the voltage drops across $r_{O}$ and $R_{S}$ must add up to $V_{\\text {out }}$, we have:\n\n$$\n\\begin{align*}\nV_{\\text {out }} & =I_{\\text {ro }} r_{O}-\\frac{V_{\\text {out }}}{R_{D}} R_{S}  \\tag{3.75}\\\\\n& =-\\frac{V_{\\text {out }}}{R_{D}} r_{O}-\\left[g_{m}\\left(V_{\\text {in }}+V_{\\text {out }} \\frac{R_{S}}{R_{D}}\\right)+g_{m b} V_{\\text"
},
{
    "text": "In certain applications, the drain current's nonlinear relationship with the overdrive voltage can lead to significant nonlinearity, necessitating the \"softening\" of device characteristics. As discussed in Sec. 3.3.2, the linear behavior of a CS stage with a diode-connected load allows for \"postcorrection\" of nonlinearity. Alternatively, as illustrated in Fig. 3.23(a), this can be achieved by placing a \"degeneration\" resistor in series with the source terminal to enhance the input device's linearity. Let's disregard channel-length modulation and body effect. As $V_{i n}$ increases, both $I_{D}$ and the voltage drop across $R_{S}$ also increase. This means that a portion of the change in $V_{i n}$ is manifested across the resistor instead of as the gate-source overdrive, resulting in a smoother variation of $I_{D}$. From another perspective, we aim to make the gain equation less dependent on $g_{m}$. Since $V_{\\text {out }}=V_{D D}-I_{D} R_{D}$, the circuit's nonlinearity stems from the nonlinear dependence of $I_{D}$ on $V_{i n}$. We observe that $\\partial V_{\\text {out }} / \\partial V_{i n}=-\\left(\\partial I_{D} / \\partial V_{i n}\\right) R_{D}$, and define the equivalent transconductance of the circuit as $G_{m}=\\partial I_{D} / \\partial V_{i n} .{ }^{3}$ Now, assuming that $I_{D}=f\\left(V_{G S}\\right)$, we write\n\n$$\n\\begin{align*}\nG_{m} & =\\frac{\\partial I_{D}}{\\partial V_{i n}}  \\tag{3.52}\\\\\n& =\\frac{\\partial f}{\\partial V_{G S}} \\frac{\\partial V_{G S}}{\\partial V_{i n}} \\tag{3.53}\n\\end{align*}\n$$\n\n[^12]Since $V_{G S}=V_{i n}-I_{D} R_{S}$, we have $\\partial V_{G S} / \\partial V_{i n}=1-R_{S} \\partial I_{D} / \\partial V_{i n}$, obtaining\n\n$$\n\\begin{equation*}\nG_{m}=\\left(1-R_{S} \\frac{\\partial I_{D}}{\\partial V_{i n}}\\right) \\frac{\\partial f}{\\partial V_{G S}} \\tag{3.54}\n\\end{equation*}\n$$\n\nBut, $\\partial f / \\partial V_{G S}$ is the transconductance of $M_{1}$, and\n\n$$\n\\begin{equation*}\nG_{m}=\\frac{g_{m}}{1+g_{m} R_{S}} \\tag{3.55}\n\\end{equation*}\n$$\n\nThe small-signal voltage gain is thus equal to\n\n$$\n\\begin{align*}\nA_{v} & =-G_{m} R_{D}  \\tag{3.56}\\\\\n& =\\frac{-g_{m} R_{D}}{1+g_{m} R_{S}} \\tag{3.57}\n\\end{align*}\n$$\n\nThe same result can be derived using the small-signal model of Fig. 3.23(b) by writing a KVL, $V_{i n}=$ $V_{1}+I_{D} R_{S}$, and noting that $I_{D}=g_{m} V_{1}$. Equation (3.55) implies that as $R_{S}$ increases, $G_{m}$ becomes a weaker function of $g_{m}$ and hence the drain current. In fact, for $R_{S} \\gg 1 / g_{m}$, we have $G_{m} \\approx 1 / R_{S}$, i.e., $\\Delta I_{D} \\approx \\Delta V_{i n} / R_{S}$, concluding that most of the change in $V_{i n}$ appears across $R_{S}$. We say that the drain current is a \"linearized\" function of the input voltage. In Problem 3.30, we examine this effect from a different perspective. The linearization is obtained at the cost of lower gain [and higher noise (Chapter 7)].\n\nFor our subsequent calculations, it is useful to determine $G_{m}$ in the presence of body effect and channel-length modulation. With the aid of the equivalent circuit shown in Fig. 3.24, we recognize that the current through $R_{S}$ equals $I_{\\text {out }}$ and, therefore, $V_{\\text {in }}=V_{1}+I_{\\text {out }} R_{S}$. Summing the currents at node $X$, we have\n\n$$\n\\begin{align*}\nI_{\\text {out }} & =g_{m} V_{1}-g_{m b} V_{X}-\\frac{I_{\\text {out }} R_{S}}{r_{O}}  \\tag{3.58}\\\\\n& =g_{m}\\left(V_{\\text {in }}-I_{\\text {out }} R_{S}\\right)+g_{m b}\\left(-I_{\\text {out }} R_{S}\\right)-\\frac{I_{\\text {out }} R_{S}}{r_{O}} \\tag{3.59}\n\\end{align*}\n$$\n\nIt follows that\n\n$$\n\\begin{align*}\nG_{m} & =\\frac{I_{\\text {out }}}{V_{\\text {in }}}  \\tag{3.60}\\\\\n& =\\frac{g_{m} r_{O}}{R_{S}+\\left[1+\\left(g_{m}+g_{m b}\\right) R_{S}\\right] r_{O}} \\tag{3.61}\n\\end{align*}\n$$\n\nimage_name:Figure 3.24 Small-signal equivalent circuit of a degenerated CS stage\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: V1, type: VoltageSource, value: V1, ports: {Np: V1, Nn: X}\nname: Rs, type: Resistor, value: Rs, ports: {N1: X, N2: GND}\nname: gmV1, type: VoltageControlledCurrentSource, value: gmV1, ports: {Np: GND, Nn: X}\nname: ro, type: Resistor, value: ro, ports: {N1: X, N2: X}\nname: gmbVbs, type: VoltageControlledCurrentSource, value: gmbVbs, ports: {Np: GND, Nn: X}\n]\nextrainfo:The circuit is a small-signal equivalent of a degenerated common-source stage. It includes a voltage source Vin, a resistor Rs, and two voltage-controlled current sources representing transconductance gm and body effect gmb.\n\nFigure 3.24 Small-signal equivalent circuit of a degenerated CS stage.\n\nLet us now examine the large-signal behavior of the CS stage with $R_{S}=0$ and $R_{S} \\neq 0$. For $R_{S}=0$, our derivations in Chapter 2 indicate that $I_{D}$ and $g_{m}$ vary as shown in Fig. 3.25(a). For $R_{S} \\neq 0$, the turn-on behavior is similar to that in Fig. 3.25(a) because, at low current levels, $1 / g_{m} \\gg R_{S}$, and hence $G_{m} \\approx g_{m}\\left[\\right.$ Fig. 3.25(b)]. As the overdrive and therefore $g_{m}$ increase, the effect of degeneration, $1+g_{m} R_{S}$ in (3.55), becomes more significant. For large values of $V_{i n}$ (if $M_{1}$ is still saturated), $I_{D}$ is approximately a linear function of $V_{i n}$ and $G_{m}$ approaches $1 / R_{S}$.\nimage_name:(a)\ndescription:The graph in Fig. 3.25(a) consists of two separate plots, each illustrating a different relationship involving the input voltage, \\( V_{in} \\), for a common-source (CS) device without source degeneration.\n\n1. **Left Plot - Drain Current \\( I_D \\) vs. Input Voltage \\( V_{in} \\):**\n- **Type of Graph:** This is a current-voltage characteristic curve.\n- **Axes Labels and Units:** The x-axis represents the input voltage \\( V_{in} \\) and the y-axis represents the drain current \\( I_D \\). Units are not specified but are typically in volts for \\( V_{in} \\) and amperes for \\( I_D \\).\n- **Overall Behavior and Trends:** The graph shows a threshold-like behavior starting at a voltage \\( V_{TH} \\). Below \\( V_{TH} \\), the drain current \\( I_D \\) is negligible. As \\( V_{in} \\) exceeds \\( V_{TH} \\), \\( I_D \\) begins to increase, initially in a nonlinear fashion, indicating the device is turning on. Beyond this, the current increases more linearly with \\( V_{in} \\).\n- **Key Features and Technical Details:** The threshold voltage \\( V_{TH} \\) marks the point where the device begins to conduct significantly.\n\n2. **Right Plot - Transconductance \\( g_m \\) vs. Input Voltage \\( V_{in} \\):**\n- **Type of Graph:** This is a transconductance-voltage characteristic curve.\n- **Axes Labels and Units:** The x-axis represents the input voltage \\( V_{in} \\), and the y-axis represents the transconductance \\( g_m \\). Units for \\( g_m \\) are typically siemens.\n- **Overall Behavior and Trends:** The plot shows \\( g_m \\) starting from zero at \\( V_{TH} \\) and increasing linearly with \\( V_{in} \\) as the input voltage increases beyond \\( V_{TH} \\).\n- **Key Features and Technical Details:** The linear increase in \\( g_m \\) indicates that the device's ability to conduct increases steadily with increasing \\( V_{in} \\) past the threshold voltage.\n\nThese graphs illustrate the basic turn-on characteristics of a CS device without source degeneration, showing how both the drain current and transconductance respond to changes in input voltage.\n\nimage_name:(b)\ndescription:The graph labeled (b) consists of two plots, each demonstrating the effect of source degeneration on a common-source (CS) device. The left plot shows the drain current ($I_D$) as a function of the input voltage ($V_{in}$), while the right plot displays the transconductance ($G_m$) versus the same input voltage.\n\nLeft Plot: Drain Current ($I_D$ vs. $V_{in}$)\n- **Axes Labels and Units:**\n- The horizontal axis represents the input voltage ($V_{in}$).\n- The vertical axis represents the drain current ($I_D$).\n- **Overall Behavior and Trends:**\n- The plot begins at the threshold voltage ($V_{TH}$), which is marked on the horizontal axis.\n- Initially, the curve rises slowly, indicating a sub-threshold region.\n- Beyond $V_{TH}$, the curve becomes linear, showing a direct proportionality between $I_D$ and $V_{in}$.\n- **Key Features and Technical Details:**\n- The slope of the linear region is indicated as $1/R_S$, highlighting the impact of source degeneration resistance on the drain current.\n\nRight Plot: Transconductance ($G_m$ vs. $V_{in}$)\n- **Axes Labels and Units:**\n- The horizontal axis represents the input voltage ($V_{in}$).\n- The vertical axis represents the transconductance ($G_m$).\n- **Overall Behavior and Trends:**\n- The transconductance is initially flat near zero for $V_{in}$ values below $V_{TH}$, indicating minimal transconductance.\n- As $V_{in}$ increases beyond $V_{TH}$, $G_m$ rises steeply and then levels off, approaching a maximum value.\n- **Key Features and Technical Details:**\n- The maximum transconductance value is marked as $1/R_S$, showing the limiting effect of source degeneration on $G_m$.\n\nAnnotations and Specific Data Points:\n- Both plots mark the threshold voltage ($V_{TH}$) as a critical point where the behavior of the device changes.\n- The slope in the linear region of the $I_D$ plot and the maximum value of $G_m$ are both related to the source degeneration resistance ($R_S$), emphasizing its role in the device's performance.\n\nFigure 3.25 Drain current and transconductance of a CS device (a) without and (b) with source degeneration.\n\n#### Example 3.9\n\nPlot the small-signal voltage gain of the circuit in Fig. 3.23 as a function of the input bias voltage, $V_{i n}$.\n\n#### Solution\n\nUsing the results derived above for the equivalent transconductance of $M_{1}$ and $R_{S}$, we arrive at the plot shown in Fig. 3.26. For $V_{i n}$ slightly greater than $V_{T H}, 1 / g_{m} \\gg R_{S}$ and $A_{v} \\approx-g_{m} R_{D}$. As $V_{i n}$ increases, degeneration becomes more significant and $A_{v}=-g_{m} R_{D} /\\left(1+g_{m} R_{S}\\right)$. For large values of $V_{i n}, G_{m} \\approx 1 / R_{S}$ and $A_{v}=-R_{D} / R_{S}$. However, if $V_{\\text {in }}>V_{\\text {out }}+V_{T H}$, that is, if $R_{D} I_{D}>V_{T H}+V_{D D}-V_{i n}, M_{1}$ enters the triode region and $A_{v}$ drops.\nimage_name:Figure 3.26\ndescription:The graph in Figure 3.26 is a plot depicting the voltage gain \\( |A_v| \\) as a function of the input voltage \\( V_{in} \\). The x-axis represents the input voltage \\( V_{in} \\), while the y-axis represents the magnitude of the voltage gain \\( |A_v| \\). The graph is plotted on a linear scale for both axes.\n\n**Overall Behavior and Trends:**\n- The graph starts at a low gain level when \\( V_{in} \\) is slightly greater than the threshold voltage \\( V_{TH} \\).\n- Initially, as \\( V_{in} \\) increases, the gain \\( |A_v| \\) rises sharply, indicating a region where the gain is approximately \\( g_m R_D \\), reflecting the transconductance \\( g_m \\) and the drain resistance \\( R_D \\).\n- As \\( V_{in} \\) continues to increase, the rate of increase in gain diminishes, transitioning into a more gradual slope.\n- Eventually, the gain approaches a maximum value of \\( R_D / R_S \\), where \\( R_S \\) is the source resistance. This indicates that the system is entering a region dominated by source degeneration.\n\n**Key Features and Technical Details:**\n- The graph shows a clear transition from a region with a steep gain increase to a saturation region where the gain levels off.\n- The point \\( V_{TH} \\) marks the threshold voltage beyond which the gain begins to rise.\n- The maximum gain \\( R_D / R_S \\) is shown as a dashed line parallel to the x-axis, indicating the asymptotic behavior of the gain as \\( V_{in} \\) becomes large.\n\n**Annotations and Specific Data Points:**\n- The threshold voltage \\( V_{TH} \\) is a critical point on the x-axis where the gain starts to increase.\n- The annotation \\( g_m R_D \\) marks the initial gain slope region, showing the dependence on transconductance and drain resistance.\n- The dashed line at \\( R_D / R_S \\) serves as a reference for the maximum achievable gain in this configuration.\n\nEquation (3.57) can be rewritten as\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{R_{D}}{\\frac{1}{g_{m}}+R_{S}} \\tag{3.62}\n\\end{equation*}\n$$\n\nThis result allows formulating the gain by inspection. First, let us examine the denominator of (3.62). The expression is equal to the series combination of the inverse transconductance of the device and the explicit resistance seen from the source to ground. We call the denominator \"the resistance seen in the source path\" because if, as shown in Fig. 3.27, we disconnect the bottom terminal of $R_{S}$ from ground and calculate the resistance seen \"looking up\" (while setting the input to zero), we obtain $R_{S}+1 / g_{m}$.\n\nimage_name:Figure 3.27 Resistance seen in the source path\ndescription:\n[\nname: M, type: NMOS, ports: {S: S1, D: LOAD, G: Vin}\nname: Rs, type: Resistor, value: Rs, ports: {N1: S1, N2: GND}\n]\nextrainfo:The circuit is a simple NMOS amplifier with a resistor Rs connected to the source. The resistance seen in the source path is Rs + 1/gm, where gm is the transconductance of the NMOS transistor. The load is connected to the drain of the NMOS transistor.\n\nNoting that the numerator of (3.62) is the resistance seen at the drain, we view the magnitude of the gain as the resistance seen at the drain node divided by the total resistance in the source path. This method greatly simplifies the analysis of more complex circuits.\n\n#### Example 3.10\n\nAssuming $\\lambda=\\gamma=0$, calculate the small-signal gain of the circuit shown in Fig. 3.28(a).\nimage_name:Figure 3.28(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: s1s2, D: Vout, G: Vin}\nname: M2, type: PMOS, ports: {S: s1s2, D: GND, G: s1s2}\nname: RD, type: Resistor, value: RD, ports: {N1: VDD, N2: Vout}\n]\nextrainfo:The circuit is a common-source amplifier"
},
{
    "text": "In certain applications, the drain current's nonlinear dependence on the overdrive voltage can lead to excessive nonlinearity, necessitating the \"softening\" of the device characteristics. As discussed in Sec. 3.3.2, the linear behavior of a CS stage with a diode-connected load allows for \"postcorrection\" of this nonlinearity. Alternatively, as shown in Fig. 3.23(a), this can be achieved by placing a \"degeneration\" resistor in series with the source terminal, thereby enhancing the input device's linearity. For simplicity, we will disregard channel-length modulation and body effect. As $V_{i n}$ increases, both $I_{D}$ and the voltage drop across $R_{S}$ also increase. This means that a portion of the change in $V_{i n}$ manifests across the resistor instead of as the gate-source overdrive, resulting in a smoother variation of $I_{D}$. From another perspective, our goal is to make the gain equation less dependent on $g_{m}$. Since $V_{\\text {out }}=V_{D D}-I_{D} R_{D}$, the circuit's nonlinearity stems from the nonlinear dependence of $I_{D}$ on $V_{i n}$. We observe that $\\partial V_{\\text {out }} / \\partial V_{i n}=-\\left(\\partial I_{D} / \\partial V_{i n}\\right) R_{D}$, and define the circuit's equivalent transconductance as $G_{m}=\\partial I_{D} / \\partial V_{i n} .{ }^{3}$ Assuming $I_{D}=f\\left(V_{G S}\\right)$, we can write\n\n$$\n\\begin{align*}\nG_{m} & =\\frac{\\partial I_{D}}{\\partial V_{i n}}  \\tag{3.52}\\\\\n& =\\frac{\\partial f}{\\partial V_{G S}} \\frac{\\partial V_{G S}}{\\partial V_{i n}} \\tag{3.53}\n\\end{align*}\n$$\n\n[^12]Given that $V_{G S}=V_{i n}-I_{D} R_{S}$, we have $\\partial V_{G S} / \\partial V_{i n}=1-R_{S} \\partial I_{D} / \\partial V_{i n}$, leading to\n\n$$\n\\begin{equation*}\nG_{m}=\\left(1-R_{S} \\frac{\\partial I_{D}}{\\partial V_{i n}}\\right) \\frac{\\partial f}{\\partial V_{G S}} \\tag{3.54}\n\\end{equation*}\n$$\n\nSince $\\partial f / \\partial V_{G S}$ represents the transconductance of $M_{1}$, we have\n\n$$\n\\begin{equation*}\nG_{m}=\\frac{g_{m}}{1+g_{m} R_{S}} \\tag{3.55}\n\\end{equation*}\n$$\n\nThe small-signal voltage gain is thus given by\n\n$$\n\\begin{align*}\nA_{v} & =-G_{m} R_{D}  \\tag{3.56}\\\\\n& =\\frac{-g_{m} R_{D}}{1+g_{m} R_{S}} \\tag{3.57}\n\\end{align*}\n$$\n\nThis result can also be derived using the small-signal model of Fig. 3.23(b) by applying KVL, $V_{i n}=$ $V_{1}+I_{D} R_{S}$, and noting that $I_{D}=g_{m} V_{1}$. Equation (3.55) implies that as $R_{S}$ increases, $G_{m}$ becomes less dependent on $g_{m}$ and, consequently, the drain current. In fact, for $R_{S} \\gg 1 / g_{m}$, we have $G_{m} \\approx 1 / R_{S}$, i.e., $\\Delta I_{D} \\approx \\Delta V_{i n} / R_{S}$, indicating that most of the change in $V_{i n}$ appears across $R_{S}$. We refer to the drain current as a \"linearized\" function of the input voltage. In Problem 3.30, we explore this effect from a different perspective. This linearization is achieved at the expense of reduced gain [and increased noise (Chapter 7)].\n\nFor our subsequent calculations, it is beneficial to determine $G_{m}$ in the presence of body effect and channel-length modulation. Utilizing the equivalent circuit shown in Fig. 3.24, we recognize that the current through $R_{S}$ equals $I_{\\text {out }}$ and, therefore, $V_{\\text {in }}=V_{1}+I_{\\text {out }} R_{S}$. Summing the currents at node $X$, we have\n\n$$\n\\begin{align*}\nI_{\\text {out }} & =g_{m} V_{1}-g_{m b} V_{X}-\\frac{I_{\\text {out }} R_{S}}{r_{O}}  \\tag{3.58}\\\\\n& =g_{m}\\left(V_{\\text {in }}-I_{\\text {out }} R_{S}\\right)+g_{m b}\\left(-I_{\\text {out }} R_{S}\\right)-\\frac{I_{\\text {out }} R_{S}}{r_{O}} \\tag{3.59}\n\\end{align*}\n$$\n\nIt follows that\n\n$$\n\\begin{align*}\nG_{m} & =\\frac{I_{\\text {out }}}{V_{\\text {in }}}  \\tag{3.60}\\\\\n& =\\frac{g_{m} r_{O}}{R_{S}+\\left[1+\\left(g_{m}+g_{m b}\\right) R_{S}\\right] r_{O}} \\tag{3.61}\n\\end{align*}\n$$\n\nWe will now examine the large-signal behavior of the CS stage with $R_{S}=0$ and $R_{S} \\neq 0$. For $R_{S}=0$, our derivations in Chapter 2 indicate that $I_{D}$ and $g_{m}$ vary as shown in Fig. 3.25(a). For $R_{S} \\neq 0$, the turn-on behavior is similar to that in Fig. 3.25(a) because, at low current levels, $1 / g_{m} \\gg R_{S}$, and hence $G_{m} \\approx g_{m}\\left[\\right.$ Fig. 3.25(b)]. As the overdrive and therefore $g_{m}$ increase, the effect of degeneration, $1+g_{m} R_{S}$ in (3.55), becomes more pronounced. For large values of $V_{i n}$ (if $M_{1}$ is still saturated), $I_{D}$ is approximately a linear function of $V_{i n}$ and $G_{m}$ approaches $1 / R_{S}$.\n\nLet us now analyze the small-signal voltage gain of the circuit in Fig. 3.23 as a function of the input bias voltage, $V_{i n}$.\n\nUsing the results derived above for the equivalent transconductance of $M_{1}$ and $R_{S}$, we arrive at the plot shown in Fig. 3.26. For $V_{i n}$ slightly greater than $V_{T H}, 1 / g_{m} \\gg R_{S}$ and $A_{v} \\approx-g_{m} R_{D}$. As $V_{i n}$ increases, degeneration becomes more significant and $A_{v}=-g_{m} R_{D} /\\left(1+g_{m} R_{S}\\right)$. For large values of $V_{i n}, G_{m} \\approx 1 / R_{S}$ and $A_{v}=-R_{D} / R_{S}$. However, if $V_{\\text {in }}>V_{\\text {out }}+V_{T H}$, that is, if $R_{D} I_{D}>V_{T H}+V_{D D}-V_{i n}, M_{1}$ enters the triode region and $A_{v}$ drops.\n\nEquation (3.57) can be rewritten as\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{R_{D}}{\\frac{1}{g_{m}}+R_{S}} \\tag{3.62}\n\\end{equation*}\n$$\n\nThis result allows for a simplified analysis of the gain. First, let us examine the denominator of (3.62). The expression is equal to the series combination of the inverse transconductance of the device and the explicit resistance seen from the source to ground. We refer to the denominator as \"the resistance seen in the source path\" because if, as shown in Fig. 3.27, we disconnect the bottom terminal of $R_{S}$ from ground and calculate the resistance seen \"looking up\" (while setting the input to zero), we obtain $R_{S}+1 / g_{m}$.\n\nNoting that the numerator of (3.62) is the resistance seen at the drain, we view the magnitude of the gain as the resistance seen at the drain node divided by the total resistance in the source path. This method greatly simplifies the analysis of more complex circuits.\n\nAssuming $\\lambda=\\gamma=0$, calculate the small-signal gain of the circuit shown in Fig. 3.28(a).\n\nNoting that $M_{2}$ is a diode-connected device and simplifying the circuit to that shown in Fig. 3.28(b), we use the above rule to write\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{R_{D}}{\\frac{1}{g_{m 1}}+\\frac{1}{g_{m 2}}} \\tag{3.63}\n\\end{equation*}\n$$\n\nAnother important consequence of source degeneration is the increase in the output resistance of the stage. We calculate the output resistance first with the aid of the equivalent circuit shown in Fig. 3.29, where the load resistor, $R_{D}$, is excluded for now. Note that body effect is also included to arrive at a general result. Since the current through $R_{S}$ is equal to $I_{X}, V_{1}=-I_{X} R_{S}$, and the current flowing through $r_{O}$ is given by $I_{X}-\\left(g_{m}+g_{m b}\\right) V_{1}=I_{X}+\\left(g_{m}+g_{m b}\\right) R_{S} I_{X}$. Adding the voltage drops across $r_{O}$ and $R_{S}$, we obtain\n\n$$\n\\begin{equation*}\nr_{O}\\left[I_{X}+\\left(g_{m}+g_{m b}\\right) R_{S} I_{X}\\right]+I_{X} R_{S}=V_{X} \\tag{3.64}\n\\end{equation*}\n$$\n\nIt follows that\n\n$$\n\\begin{align*}\nR_{\\text {out }} & =\\left[1+\\left(g_{m}+g_{m b}\\right) R_{S}\\right] r_{O}+R_{S}  \\tag{3.65}\\\\\n& =\\left[1+\\left(g_{m}+g_{m b}\\right) r_{O}\\right] R_{S}+r_{O} \\tag{3.66}\n\\end{align*}\n$$\n\nEquation (3.65) indicates that $r_{O}$ is \"boosted\" by a factor of $1+\\left(g_{m}+g_{m b}\\right) R_{S}$ and then added to $R_{S}$. As an alternative perspective, Eq. (3.66) suggests that $R_{S}$ is boosted by a factor of $1+\\left(g_{m}+g_{m b}\\right) r_{O}$ (a value close to the transistor's intrinsic gain) and then added to $r_{O}$. Both views prove useful in analyzing circuits. Note that the overall output resistance is equal to the parallel combination of $R_{\\text {out }}$ and $R_{D}$. If $\\left(g_{m}+g_{m b}\\right) r_{O} \\gg 1$, we have\n\n$$\n\\begin{align*}\nR_{\\text {out }} & \\approx\\left(g_{m}+g_{m b}\\right) r_{O} R_{S}+r_{O}  \\tag{3.67}\\\\\n& =\\left[1+\\left(g_{m}+g_{m b}\\right) R_{S}\\right] r_{O} \\tag{3.68}\n\\end{align*}\n$$\n\nTo gain more insight, let us consider the circuit of Fig. 3.29 with $R_{S}=0$ and $R_{S}>0$. If $R_{S}=0$, then $g_{m} V_{1}=g_{m b} V_{b s}=0$ and $I_{X}=V_{X} / r_{O}$. On the other hand, if $R_{S}>0$, we have $I_{X} R_{S}>0$ and $V_{1}<0$, obtaining negative $g_{m} V_{1}$ and $g_{m b} V_{b s}$. Thus, the current supplied by $V_{X}$ is less than $V_{X} / r_{O}$, and hence the output impedance is greater than $r_{O}$.\n\nThe relationship in (3.65) can also be derived by inspection. As shown in Fig. 3.30(a), we apply a voltage to the output node, change its value by $\\Delta V$, and measure the resulting change, $\\Delta I$, in the output current. Since the current through $R_{S}$ must change by $\\Delta I$ (why?), we first compute the voltage change across $R_{S}$. To this end, we draw the circuit as shown in Fig. 3.30(b) and note that the resistance seen looking into the source of $M_{1}$ is equal to $1 /\\left(g_{m}+g_{m b}\\right)$ [Eq. (3.24)], thus arriving at the equivalent circuit in Fig. 3.30(c). The voltage change across $R_{S}$ is therefore equal to\n\n$$\n\\begin{equation*}\n\\Delta V_{R S}=\\Delta V \\frac{\\frac{1}{g_{m}+g_{m b}} \\| R_{S}}{\\frac{1}{g_{m}+g_{m b}} \\| R_{S}+r_{O}} \\tag{3.69}\n\\end{equation*}\n$$\n\nThe change in the current is\n\n$$\n\\begin{align*}\n\\Delta I & =\\frac{\\Delta V_{R S}}{R_{S}}  \\tag{3.70}\\\\\n& =\\Delta V \\frac{1}{\\left[1+\\left(g_{m}+g_{m b}\\right)\\right] R_{S} r_{O}+R_{S}} \\tag{3.71}\n\\end{align*}\n$$\n\nthat is,\n\n$$\n\\begin{equation*}\n\\frac{\\Delta V}{\\Delta I}=\\left[1+\\left(g_{m}+g_{m b}\\right) R_{S}\\right] r_{O}+R_{S} \\tag{3.72}\n\\end{equation*}\n$$\n\nWith the foregoing developments, we can now compute the gain of a degenerated CS stage in the general case, taking into account both body effect and channel-length modulation. In the equivalent circuit depicted in Fig. 3.31, the current through $R_{S}$ must equal that through $R_{D}$, i.e., $-V_{\\text {out }} / R_{D}$. Thus, the source voltage with respect to ground (and the bulk) is equal to $-V_{\\text {out }} R_{S} / R_{D}$, yielding $V_{1}=V_{\\text {in }}+V_{\\text {out }} R_{S} / R_{D}$. The current flowing through $r_{O}$ from top to bottom can therefore be written as\n\n$$\n\\begin{align*}\nI_{r o} & =-\\frac{V_{\\text {out }}}{R_{D}}-\\left(g_{m} V_{1}+g_{m b} V_{\\text {bs }}\\right)  \\tag{3.73}\\\\\n& =-\\frac{V_{\\text {out }}}{R_{D}}-\\left[g_{m}\\left(V_{\\text {in }}+V_{\\text {out }} \\frac{R_{S}}{R_{D}}\\right)+g_{m b} V_{\\text {out }} \\frac{R_{S}}{R_{D}}\\right] \\tag{3.74}\n\\end{align*}\n$$\n\nSince the voltage drops across $r_{O}$ and $R_{S}$ must add up to $V_{\\text {out }}$, we have\n\n$$\n\\begin{align*}\nV_{\\text {out }} & =I_{\\text {ro }} r_{O}-\\frac{V_{\\text {out }}}{R_{D}} R_{S}  \\tag{3.75}\\\\\n& =-\\frac{V_{\\text {out }}}{R_{D}} r_{O}-\\left[g_{m}\\left(V_{\\text {in }}+V_{\\text {out }} \\frac{R_{S}}{R_{D}}\\right)+g_{m b} V_{\\text {out }} \\frac{R_{S}}{R_{D}}\\right] r_{O}-V_{\\text {out }} \\frac{R_{S}}{R_{D}} \\tag{3.76}\n\\end{align*}\n$$\n\nIt follows that\n\n$$\n\\begin{equation*}\n\\frac{V_{\\text {out }}}{V_{\\text {in }}}=\\frac{-g_{m} r_{O} R_{D}}{R_{D}+R_{S}+r_{O}+\\left(g_{m}+g_{m b}\\right) R_{"
},
{
    "text": "In certain applications, the drain current's nonlinear relationship with the overdrive voltage can result in significant nonlinearity, necessitating the \"softening\" of the device characteristics. As discussed in Sec. 3.3.2, the linear behavior of a CS stage using a diode-connected load allows for the \"postcorrection\" of nonlinearity. Alternatively, as shown in Fig. 3.23(a), this can be achieved by placing a \"degeneration\" resistor in series with the source terminal to enhance the input device's linearity. For simplicity, let's disregard channel-length modulation and body effect. As $V_{i n}$ increases, both $I_{D}$ and the voltage drop across $R_{S}$ also increase. This means that a portion of the change in $V_{i n}$ is across the resistor instead of the gate-source overdrive, resulting in a smoother variation of $I_{D}$. From another perspective, we aim to weaken the gain equation's dependence on $g_{m}$. Since $V_{\\text {out }}=V_{D D}-I_{D} R_{D}$, the circuit's nonlinearity stems from the nonlinear relationship between $I_{D}$ and $V_{i n}$. We observe that $\\partial V_{\\text {out }} / \\partial V_{i n}=-\\left(\\partial I_{D} / \\partial V_{i n}\\right) R_{D}$, and define the equivalent transconductance of the circuit as $G_{m}=\\partial I_{D} / \\partial V_{i n} .{ }^{3}$ Assuming $I_{D}=f\\left(V_{G S}\\right)$, we write\n\n$$\n\\begin{align*}\nG_{m} & =\\frac{\\partial I_{D}}{\\partial V_{i n}}  \\tag{3.52}\\\\\n& =\\frac{\\partial f}{\\partial V_{G S}} \\frac{\\partial V_{G S}}{\\partial V_{i n}} \\tag{3.53}\n\\end{align*}\n$$\n\n[^12]Since $V_{G S}=V_{i n}-I_{D} R_{S}$, we have $\\partial V_{G S} / \\partial V_{i n}=1-R_{S} \\partial I_{D} / \\partial V_{i n}$, resulting in\n\n$$\n\\begin{equation*}\nG_{m}=\\left(1-R_{S} \\frac{\\partial I_{D}}{\\partial V_{i n}}\\right) \\frac{\\partial f}{\\partial V_{G S}} \\tag{3.54}\n\\end{equation*}\n$$\n\nHowever, $\\partial f / \\partial V_{G S}$ is the transconductance of $M_{1}$, and\n\n$$\n\\begin{equation*}\nG_{m}=\\frac{g_{m}}{1+g_{m} R_{S}} \\tag{3.55}\n\\end{equation*}\n$$\n\nThe small-signal voltage gain is thus equal to\n\n$$\n\\begin{align*}\nA_{v} & =-G_{m} R_{D}  \\tag{3.56}\\\\\n& =\\frac{-g_{m} R_{D}}{1+g_{m} R_{S}} \\tag{3.57}\n\\end{align*}\n$$\n\nThe same result can be obtained using the small-signal model of Fig. 3.23(b) by writing a KVL, $V_{i n}=$ $V_{1}+I_{D} R_{S}$, and noting that $I_{D}=g_{m} V_{1}$. Equation (3.55) implies that as $R_{S}$ increases, $G_{m}$ becomes a weaker function of $g_{m}$ and hence the drain current. In fact, for $R_{S} \\gg 1 / g_{m}$, we have $G_{m} \\approx 1 / R_{S}$, i.e., $\\Delta I_{D} \\approx \\Delta V_{i n} / R_{S}$, concluding that most of the change in $V_{i n}$ appears across $R_{S}$. We say that the drain current is a \"linearized\" function of the input voltage. In Problem 3.30, we examine this effect from a different perspective. The linearization is obtained at the cost of lower gain [and higher noise (Chapter 7)].\n\nFor our subsequent calculations, it is useful to determine $G_{m}$ in the presence of body effect and channel-length modulation. With the aid of the equivalent circuit shown in Fig. 3.24, we recognize that the current through $R_{S}$ equals $I_{\\text {out }}$ and, therefore, $V_{\\text {in }}=V_{1}+I_{\\text {out }} R_{S}$. Summing the currents at node $X$, we have\n\n$$\n\\begin{align*}\nI_{\\text {out }} & =g_{m} V_{1}-g_{m b} V_{X}-\\frac{I_{\\text {out }} R_{S}}{r_{O}}  \\tag{3.58}\\\\\n& =g_{m}\\left(V_{\\text {in }}-I_{\\text {out }} R_{S}\\right)+g_{m b}\\left(-I_{\\text {out }} R_{S}\\right)-\\frac{I_{\\text {out }} R_{S}}{r_{O}} \\tag{3.59}\n\\end{align*}\n$$\n\nIt follows that\n\n$$\n\\begin{align*}\nG_{m} & =\\frac{I_{\\text {out }}}{V_{\\text {in }}}  \\tag{3.60}\\\\\n& =\\frac{g_{m} r_{O}}{R_{S}+\\left[1+\\left(g_{m}+g_{m b}\\right) R_{S}\\right] r_{O}} \\tag{3.61}\n\\end{align*}\n$$\n\nThe circuit in Figure 3.24 is a small-signal equivalent of a degenerated common-source stage. It includes a voltage source Vin, a resistor Rs, and two voltage-controlled current sources representing transconductance gm and body effect gmb.\n\nFigure 3.24 Small-signal equivalent circuit of a degenerated CS stage.\n\nLet us now examine the large-signal behavior of the CS stage with $R_{S}=0$ and $R_{S} \\neq 0$. For $R_{S}=0$, our derivations in Chapter 2 indicate that $I_{D}$ and $g_{m}$ vary as shown in Fig. 3.25(a). For $R_{S} \\neq 0$, the turn-on behavior is similar to that in Fig. 3.25(a) because, at low current levels, $1 / g_{m} \\gg R_{S}$, and hence $G_{m} \\approx g_{m}\\left[\\right.$ Fig. 3.25(b)]. As the overdrive and therefore $g_{m}$ increase, the effect of degeneration, $1+g_{m} R_{S}$ in (3.55), becomes more significant. For large values of $V_{i n}$ (if $M_{1}$ is still saturated), $I_{D}$ is approximately a linear function of $V_{i n}$ and $G_{m}$ approaches $1 / R_{S}$.\n"
},
{
    "text": "The rephrased text is as follows:\n\nIn certain applications, the drain current's nonlinear relationship with the overdrive voltage leads to excessive nonlinearity, prompting a need to \"soften\" the device characteristics. As discussed in Sec. 3.3.2, a CS stage with a diode-connected load exhibits linear behavior, enabling \"postcorrection\" of nonlinearity. Alternatively, as shown in Fig. 3.23(a), this can be achieved by inserting a \"degeneration\" resistor in series with the source terminal, enhancing the input device's linearity. Let's disregard channel-length modulation and body effect. As $V_{i n}$ increases, both $I_{D}$ and the voltage drop across $R_{S}$ increase. In other words, a portion of the change in $V_{i n}$ manifests across the resistor rather than as the gate-source overdrive, resulting in a smoother variation of $I_{D}$. From another viewpoint, we aim to make the gain equation less dependent on $g_{m}$. Since $V_{\\text {out }}=V_{D D}-I_{D} R_{D}$, the circuit's nonlinearity stems from the nonlinear relationship between $I_{D}$ and $V_{i n}$. We observe that $\\partial V_{\\text {out }} / \\partial V_{i n}=-\\left(\\partial I_{D} / \\partial V_{i n}\\right) R_{D}$, and define the equivalent transconductance of the circuit as $G_{m}=\\partial I_{D} / \\partial V_{i n} .{ }^{3}$ Now, assuming that $I_{D}=f\\left(V_{G S}\\right)$, we write\n\n$$\n\\begin{align*}\nG_{m} & =\\frac{\\partial I_{D}}{\\partial V_{i n}}  \\tag{3.52}\\\\\n& =\\frac{\\partial f}{\\partial V_{G S}} \\frac{\\partial V_{G S}}{\\partial V_{i n}} \\tag{3.53}\n\\end{align*}\n$$\n\n[^12]Since $V_{G S}=V_{i n}-I_{D} R_{S}$, we have $\\partial V_{G S} / \\partial V_{i n}=1-R_{S} \\partial I_{D} / \\partial V_{i n}$, yielding\n\n$$\n\\begin{equation*}\nG_{m}=\\left(1-R_{S} \\frac{\\partial I_{D}}{\\partial V_{i n}}\\right) \\frac{\\partial f}{\\partial V_{G S}} \\tag{3.54}\n\\end{equation*}\n$$\n\nHowever, $\\partial f / \\partial V_{G S}$ is the transconductance of $M_{1}$, and\n\n$$\n\\begin{equation*}\nG_{m}=\\frac{g_{m}}{1+g_{m} R_{S}} \\tag{3.55}\n\\end{equation*}\n$$\n\nThe small-signal voltage gain is thus equal to\n\n$$\n\\begin{align*}\nA_{v} & =-G_{m} R_{D}  \\tag{3.56}\\\\\n& =\\frac{-g_{m} R_{D}}{1+g_{m} R_{S}} \\tag{3.57}\n\\end{align*}\n$$\n\nThe same result can be derived using the small-signal model of Fig. 3.23(b) by writing a KVL, $V_{i n}=$ $V_{1}+I_{D} R_{S}$, and noting that $I_{D}=g_{m} V_{1}$. Equation (3.55) implies that as $R_{S}$ increases, $G_{m}$ becomes less dependent on $g_{m}$ and, consequently, the drain current. In fact, for $R_{S} \\gg 1 / g_{m}$, we have $G_{m} \\approx 1 / R_{S}$, i.e., $\\Delta I_{D} \\approx \\Delta V_{i n} / R_{S}$, indicating that most of the change in $V_{i n}$ appears across $R_{S}$. We describe the drain current as a \"linearized\" function of the input voltage. In Problem 3.30, we examine this effect from a different perspective. This linearization is achieved at the expense of lower gain [and higher noise (Chapter 7)].\n\nFor our subsequent calculations, it is helpful to determine $G_{m}$ in the presence of body effect and channel-length modulation. Utilizing the equivalent circuit shown in Fig. 3.24, we recognize that the current through $R_{S}$ equals $I_{\\text {out }}$ and, therefore, $V_{\\text {in }}=V_{1}+I_{\\text {out }} R_{S}$. Summing the currents at node $X$, we have\n\n$$\n\\begin{align*}\nI_{\\text {out }} & =g_{m} V_{1}-g_{m b} V_{X}-\\frac{I_{\\text {out }} R_{S}}{r_{O}}  \\tag{3.58}\\\\\n& =g_{m}\\left(V_{\\text {in }}-I_{\\text {out }} R_{S}\\right)+g_{m b}\\left(-I_{\\text {out }} R_{S}\\right)-\\frac{I_{\\text {out }} R_{S}}{r_{O}} \\tag{3.59}\n\\end{align*}\n$$\n\nIt follows that\n\n$$\n\\begin{align*}\nG_{m} & =\\frac{I_{\\text {out }}}{V_{\\text {in }}}  \\tag{3.60}\\\\\n& =\\frac{g_{m} r_{O}}{R_{S}+\\left[1+\\left(g_{m}+g_{m b}\\right) R_{S}\\right] r_{O}} \\tag{3.61}\n\\end{align*}\n$$\n\nFigure 3.24 depicts the small-signal equivalent circuit of a degenerated CS stage.\n\nLet's now analyze the large-signal behavior of the CS stage with $R_{S}=0$ and $R_{S} \\neq 0$. For $R_{S}=0$, our derivations in Chapter 2 indicate that $I_{D}$ and $g_{m}$ vary as shown in Fig. 3.25(a). For $R_{S} \\neq 0$, the turn-on behavior is similar to that in Fig. 3.25(a) because, at low current levels, $1 / g_{m} \\gg R_{S}$, and hence $G_{m} \\approx g_{m}\\left[\\right.$ Fig. 3.25(b)]. As the overdrive and therefore $g_{m}$ increase, the effect of degeneration, $1+g_{m} R_{S}$ in (3.55), becomes more significant. For large values of $V_{i n}$ (if $M_{1}$ is still saturated), $I_{D}$ is approximately a linear function of $V_{i n}$ and $G_{m}$ approaches $1 / R_{S}$.\n\nFigure 3.25 illustrates the drain current and transconductance of a CS device (a) without and (b) with source degeneration.\n\n#### Example 3.9\n\nPlot the small-signal voltage gain of the circuit in Fig. 3.23 as a function of the input bias voltage, $V_{i n}$.\n\n#### Solution\n\nUsing the results derived above for the equivalent transconductance of $M_{1}$ and $R_{S}$, we arrive at the plot shown in Fig. 3.26. For $V_{i n}$ slightly greater than $V_{T H}, 1 / g_{m} \\gg R_{S}$ and $A_{v} \\approx-g_{m} R_{D}$. As $V_{i n}$ increases, degeneration becomes more significant and $A_{v}=-g_{m} R_{D} /\\left(1+g_{m} R_{S}\\right)$. For large values of $V_{i n}, G_{m} \\approx 1 / R_{S}$ and $A_{v}=-R_{D} / R_{S}$. However, if $V_{\\text {in }}>V_{\\text {out }}+V_{T H}$, that is, if $R_{D} I_{D}>V_{T H}+V_{D D}-V_{i n}, M_{1}$ enters the triode region and $A_{v}$ drops.\n\nFigure 3.26 is a plot depicting the voltage gain \\( |A_v| \\) as a function of the input voltage \\( V_{in} \\).\n\nEquation (3.57) can be rewritten as\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{R_{D}}{\\frac{1}{g_{m}}+R_{S}} \\tag{3.62}\n\\end{equation*}\n$$\n\nThis result allows formulating the gain by inspection. First, let us examine the denominator of (3.62). The expression is equal to the series combination of the inverse transconductance of the device and the explicit resistance seen from the source to ground. We call the denominator \"the resistance seen in the source path\" because if, as shown in Fig. 3.27, we disconnect the bottom terminal of $R_{S}$ from ground and calculate the resistance seen \"looking up\" (while setting the input to zero), we obtain $R_{S}+1 / g_{m}$.\n\nNoting that the numerator of (3.62) is the resistance seen at the drain, we view the magnitude of the gain as the resistance seen at the drain node divided by the total resistance in the source path. This method greatly simplifies the analysis of more complex circuits.\n\n#### Example 3.10\n\nAssuming $\\lambda=\\gamma=0$, calculate the small-signal gain of the circuit shown in Fig. 3.28(a).\n\n#### Solution\n\nNoting that $M_{2}$ is a diode-connected device and simplifying the circuit to that shown in Fig. 3.28(b), we use the above rule to write\n\n$$\n\\begin{equation*}\nA_{v}=-\\frac{R_{D}}{\\frac{1}{g_{m 1}}+\\frac{1}{g_{m 2}}} \\tag{3.63}\n\\end{equation*}\n$$\n\nOutput Resistance Another important consequence of source degeneration is the increase in the output resistance of the stage. We calculate the output resistance first with the aid of the equivalent circuit shown in Fig. 3.29, where the load resistor, $R_{D}$, is excluded for now. Note that body effect is also included to arrive at a general result. Since the current through $R_{S}$ is equal to $I_{X}, V_{1}=-I_{X} R_{S}$, and the current flowing through $r_{O}$ is given by $I_{X}-\\left(g_{m}+g_{m b}\\right) V_{1}=I_{X}+\\left(g_{m}+g_{m b}\\right) R_{S} I_{X}$. Adding the voltage drops across $r_{O}$ and $R_{S}$, we obtain\n\n$$\n\\begin{equation*}\nr_{O}\\left[I_{X}+\\left(g_{m}+g_{m b}\\right) R_{S} I_{X}\\right]+I_{X} R_{S}=V_{X} \\tag{3.64}\n\\end{equation*}\n$$\n\nIt follows that\n\n$$\n\\begin{align*}\nR_{\\text {out }} & =\\left[1+\\left(g_{m}+g_{m b}\\right) R_{S}\\right] r_{O}+R_{S}  \\tag{3.65}\\\\\n& =\\left[1+\\left(g_{m}+g_{m b}\\right) r_{O}\\right] R_{S}+r_{O} \\tag{3.66}\n\\end{align*}\n$$\n\nEquation (3.65) indicates that $r_{O}$ is \"boosted\" by a factor of $1+\\left(g_{m}+g_{m b}\\right) R_{S}$ and then added to $R_{S}$. As an alternative perspective, Eq. (3.66) suggests that $R_{S}$ is boosted by a factor of $1+\\left(g_{m}+g_{m b}\\right) r_{O}$ (a value close to the transistor's intrinsic gain) and then added to $r_{O}$. Both views prove useful in analyzing circuits. Note that the overall output resistance is equal to the parallel combination of $R_{\\text {out }}$ and $R_{D}$. If $\\left(g_{m}+g_{m b}\\right) r_{O} \\gg 1$, we have\n\n$$\n\\begin{align*}\nR_{\\text {out }} & \\approx\\left(g_{m}+g_{m b}\\right) r_{O} R_{S}+r_{O}  \\tag{3.67}\\\\\n& =\\left[1+\\left(g_{m}+g_{m b}\\right) R_{S}\\right] r_{O} \\tag{3.68}\n\\end{align*}\n$$\n\nTo gain more insight, let us consider the circuit of Fig. 3.29 with $R_{S}=0$ and $R_{S}>0$. If $R_{S}=0$, then $g_{m} V_{1}=g_{m b} V_{b s}=0$ and $I_{X}=V_{X} / r_{O}$. On the other hand, if $R_{S}>0$, we have $I_{X} R_{S}>0$ and $V_{1}<0$, obtaining negative $g_{m} V_{1}$ and $g_{m b} V_{b s}$. Thus, the current supplied by $V_{X}$ is less than $V_{X} / r_{O}$, and hence the output impedance is greater than $r_{O}$.\n\nThe relationship in (3.65) can also be derived by inspection. As shown in Fig. 3.30(a), we apply a voltage to the output node, change its value by $\\Delta V$, and measure the resulting change, $\\Delta I$, in the output current. Since the current through $R_{S}$ must change by $\\Delta I$ (why?), we first compute the voltage change across $R_{S}$. To this end, we draw the circuit as shown in Fig. 3.30(b) and note that the resistance seen looking into the source of $M_{1}$ is equal to $1 /\\left(g_{m}+g_{m b}\\right)$ [Eq. (3.24)], thus arriving at the equivalent circuit in Fig. 3.30(c). The voltage change across $R_{S}$ is therefore equal to\n\n$$\n\\begin{equation*}\n\\Delta V_{R S}=\\Delta V \\frac{\\frac{1}{g_{m}+g_{m b}} \\| R_{S}}{\\frac{1}{g_{m}+g_{m b}} \\| R_{S}+r_{O}} \\tag{3.69}\n\\end{equation*}\n$$\n\nThe change in the current is\n\n$$\n\\begin{align*}\n\\Delta I & =\\frac{\\Delta V_{R S}}{R_{S}}  \\tag{3.70}\\\\\n& =\\Delta V \\frac{1}{\\left[1+\\left(g_{m}+g_{m b}\\right)\\right] R_{S} r_{O}+R_{S}} \\tag{3.71}\n\\end{align*}\n$$\n\nthat is,\n\n$$\n\\begin{equation*}\n\\frac{\\Delta V}{\\Delta I}=\\left[1+\\left(g_{m}+g_{m b}\\right) R_{S}\\right] r_{O}+R_{S} \\tag{3.72}\n\\end{equation*}\n$$\n\nWith the foregoing developments, we can now compute the gain of a degenerated CS stage in the general case, taking into account both body effect and channel-length modulation. In the equivalent circuit depicted in Fig. 3.31, the current through $R_{S}$ must equal that through $R_{D}$, i.e., $-V_{\\text {out }} / R_{D}$. Thus, the source voltage with respect to ground (and the bulk) is equal to $-V_{\\text {out }} R_{S} / R_{D}$, yielding $V_{1}=V_{\\text {in }}+V_{\\text {out }} R_{S} / R_{D}$. The current flowing through $r_{O}$ from top to bottom can therefore be written as\n\n$$\n\\begin{align*}\nI_{r o} & =-\\frac{V_{\\text {out }}}{R_{D}}-\\left(g_{m} V_{1}+g_{m b} V_{\\text {bs }}\\right)  \\tag{3.73}\\\\\n& =-\\frac{V_{\\text {out }}}{R_{D}}-\\left[g_{m}\\left(V_{\\text {in }}+V_{\\text {out }} \\frac{R_{S}}{R_{D}}\\right)+g_{m b} V_{\\text {out }} \\frac{R_{S}}{R_{D}}\\right] \\tag{3.74}\n\\end{align*}\n$$\n\nSince the voltage drops across $r_{O}$ and $R_{S}$ must add up to $V_{\\text {out }}$, we have\n\n$$\n\\begin{align*}\nV_{\\text {out }} & =I_{\\text {ro }} r_{O}-\\frac{V_{\\text {out }}}{R_{D}} R_{S}  \\tag{3.75}\\\\\n& =-\\frac{V_{\\text {out }}}{R_{D}} r_{O}-\\left[g_{m}\\left(V_{\\text {in }}+V_{\\text {out }} \\frac{R_{S}}{R_{D}}\\right)+g_{m b} V_{\\text {out }} \\frac{R_{S}}{R_{D}}\\right] r_{O}-V_{\\text {out }} \\frac{"
},
{
    "text": "To obtain a high voltage gain with a restricted supply voltage in the common-source stage, it is essential to maximize the load impedance. In cases where this stage must drive a load with low impedance, a buffer should be added after the amplifier to drive the load without significantly compromising the gain. The source follower, also known as the \"common-drain\" stage, can function effectively as a voltage buffer.\n\nFigure 3.34(a) depicts a source follower circuit that employs an NMOS transistor, M1, to buffer the input voltage, Vin, to the output, Vout. The resistor RS is connected between Vout and ground, facilitating the flow of output current. This circuit operates as a voltage buffer, presenting a high input impedance at the gate of M1 and driving the load at the source.\n\nFigure 3.34(b) illustrates a gain stage followed by a buffer. M1 serves as the gain stage, while M2 acts as the buffer to drive low-resistance loads without diminishing the voltage gain. The source follower configuration enables the output voltage to closely track the input voltage.\n\nFigure 3.34(c) presents a graph that plots the input-output characteristics of a source follower circuit, specifically illustrating the relationship between the output voltage \\( V_{out} \\) and the input voltage \\( V_{in} \\). The graph is a linear plot, with the x-axis representing \\( V_{in} \\) and the y-axis representing \\( V_{out} \\), both likely measured in volts (V). The graph demonstrates a linear region where \\( V_{out} \\) closely follows \\( V_{in} \\) but is offset by a threshold voltage \\( V_{TH} \\). Initially, as \\( V_{in} \\) increases from zero, \\( V_{out} \\) remains at zero until \\( V_{in} \\) reaches \\( V_{TH} \\). Beyond \\( V_{TH} \\), \\( V_{out} \\) increases linearly with \\( V_{in} \\), maintaining a constant voltage difference \\( V_{GS} \\) between the two.\n\nThe threshold voltage \\( V_{TH} \\) is a pivotal point on the x-axis where the output starts to track the input. The linear region indicates the operational range of the source follower where it acts as a buffer, providing near-unity gain (\\( V_{out} = V_{in} - V_{GS} \\)). A dashed line represents the ideal case where \\( V_{out} = V_{in} \\), indicating the deviation due to \\( V_{GS} \\).\n\nThe graph includes annotations for \\( V_{TH} \\) and \\( V_{GS} \\), denoting the threshold voltage and gate-source voltage, respectively. The slope of the linear portion of the graph is slightly less than 1, illustrating the voltage drop across the device. This graph effectively illustrates the behavior of the source follower as a voltage buffer, highlighting its ability to drive loads while maintaining input-output linearity above a certain threshold voltage.\n\nFigure 3.34(a) Source follower, (b) example of its role as a buffer, and (c) its input-output characteristic.\n\nFigure 3.35 represents a small-signal equivalent circuit of a source follower. It includes a voltage source Vin, a resistor RS connected to ground, and two voltage-controlled current sources, gmV1 and gmbVbs, both connected to Vout and ground.\n\nFigure 3.35 Small-signal equivalent circuit of source follower.\n\nFigure 3.36 depicts the voltage gain \\( A_v \\) of a source follower versus the input voltage \\( V_{in} \\). It is a typical linear plot with \\( A_v \\) on the vertical axis and \\( V_{in} \\) on the horizontal axis. The voltage gain \\( A_v \\) is dimensionless, while the input voltage \\( V_{in} \\) is measured in volts, although specific units are not marked on the axes.\n\nThe graph shows a curve that starts at the threshold voltage \\( V_{TH} \\) on the \\( V_{in} \\) axis. At this point, the voltage gain \\( A_v \\) begins from zero. As \\( V_{in} \\) increases, the voltage gain \\( A_v \\) rises monotonically. The curve approaches an asymptotic value given by the expression \\( \\frac{1}{1+\\eta} \\), where \\( \\eta \\) is a parameter that decreases slowly with increasing \\( V_{out} \\).\n\nKey features and technical details include the curve starting at \\( V_{TH} \\) on the horizontal axis, indicating the threshold voltage where the gain begins to increase. The gain \\( A_v \\) approaches a maximum value of \\( \\frac{1}{1+\\eta} \\) as \\( V_{in} \\) increases, but does not reach unity due to the presence of \\( \\eta \\). The graph suggests that for typical source-bulk voltages, \\( \\eta \\) remains greater than approximately 0.2, preventing \\( A_v \\) from reaching 1. A dotted line is shown at \\( A_v = 1.0 \\) to indicate the unity gain level, which is not achieved.\n\nFigure 3.36 Voltage gain of source follower versus input voltage.\n\nAn important result is that even if \\( R_{S}=\\infty \\), the voltage gain of a source follower is not equal to one (unless body effect is removed as explained later). We return to this point later. Note that \\( M_{1} \\) in Fig. 3.34(a) remains in saturation if \\( V_{i n} \\) does not exceed \\( V_{D D}+V_{T H} \\).\n\nIn the source follower of Fig. 3.34(a), the drain current of \\( M_{1} \\) heavily depends on the input dc level. For example, if \\( V_{i n} \\) changes from 0.7 V to 1 V, \\( I_{D} \\) may increase by a factor of 2, and hence \\( V_{G S}-V_{T H} \\) by \\( \\sqrt{2} \\). Even if \\( V_{T H} \\) is relatively constant, the increase in \\( V_{G S} \\) means that \\( V_{\\text {out }}\\left(=V_{i n}-V_{G S}\\right) \\) does not follow \\( V_{i n} \\) faithfully, thereby incurring nonlinearity. To alleviate this issue, the resistor can be replaced by a constant current source as shown in Fig. 3.37(a). The current source itself is implemented as an NMOS transistor operating in the saturation region [Fig. 3.37(b)].\n\nFigure 3.37 Source follower using (a) an ideal current source, and (b) an NMOS transistor as a current source.\n\nExample 3.12\nSuppose that in the source follower of Fig. 3.37(a), \\( (W / L)_{1}=20 / 0.5, I_{1}=200 \\mu \\mathrm{~A}, V_{T H 0}=0.6 \\mathrm{~V}, 2 \\Phi_{F}=0.7 \\mathrm{~V} \\), \\( V_{D D}=1.2 \\mathrm{~V}, \\mu_{n} C_{o x}=50 \\mu \\mathrm{~A} / \\mathrm{V}^{2} \\), and \\( \\gamma=0.4 \\mathrm{~V}^{1 / 2} \\).\n(a) Calculate \\( V_{\\text {out }} \\) for \\( V_{\\text {in }}=1.2 \\mathrm{~V} \\).\n(b) If \\( I_{1} \\) is implemented as \\( M_{2} \\) in Fig. 3.37 (b), find the minimum value of \\( (W / L)_{2} \\) for which \\( M_{2} \\) remains saturated when \\( V_{i n}=1.2 \\mathrm{~V} \\).\n\n#### Solution\n\n(a) Since the threshold voltage of \\( M_{1} \\) depends on \\( V_{\\text {out }} \\), we perform a simple iteration. Noting that\n\n$$\n\\begin{equation*}\n\\left(V_{\\text {in }}-V_{T H}-V_{\\text {out }}\\right)^{2}=\\frac{2 I_{D}}{\\mu_{n} C_{o x}\\left(\\frac{W}{L}\\right)_{1}} \\tag{3.87}\n\\end{equation*}\n$$\n\nwe first assume that \\( V_{T H} \\approx 0.6 \\mathrm{~V} \\), obtaining \\( V_{\\text {out }}=0.153 \\mathrm{~V} \\). Now we calculate a new \\( V_{T H} \\) as\n\n$$\n\\begin{align*}\nV_{T H} & =V_{T H 0}+\\gamma\\left(\\sqrt{2 \\Phi_{F}+V_{S B}}-\\sqrt{2 \\Phi_{F}}\\right)  \\tag{3.88}\\\\\n& =0.635 \\mathrm{~V} \\tag{3.89}\n\\end{align*}\n$$\n\nThis indicates that \\( V_{\\text {out }} \\) is approximately 35 mV less than that calculated above, i.e., \\( V_{\\text {out }} \\approx 0.118 \\mathrm{~V} \\).\n(b) Since the drain-source voltage of \\( M_{2} \\) is equal to 0.118 V, the device is saturated only if \\( \\left(V_{G S}-V_{T H}\\right)_{2} \\leq 0.118 \\mathrm{~V} \\). With \\( I_{D}=200 \\mu \\mathrm{~A} \\), this gives \\( (W / L)_{2} \\geq 287 / 0.5 \\). Note the substantial drain junction and overlap capacitance contributed by \\( M_{2} \\) to the output node.\n\n#### Example 3.13\n\nExplain intuitively why the gain of the source follower in Fig. 3.37(a) is equal to unity if \\( I_{1} \\) is ideal and \\( \\lambda=\\gamma=0 \\).\n\n#### Solution\n\nIn this case, the drain current of \\( M_{1} \\) remains exactly constant, and so does \\( V_{G S 1} \\). Since \\( V_{\\text {out }}=V_{\\text {in }}-V_{G S 1} \\), we observe that a change in \\( V_{\\text {in }} \\) must equally appear in \\( V_{\\text {out }} \\). Alternatively, as shown in Fig. 3.38, we can say that the small-signal drain current cannot flow through any path and must be zero, yielding \\( V_{1}=0 \\) and \\( V_{\\text {out }}=V_{\\text {in }} \\).\nimage_name:Fig. 3.38\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: Vout}\n]\nextrainfo:The circuit is a basic voltage follower with a voltage-controlled current source gmV1 connected between Vout and ground. Vin is the input voltage source connected to Vout.\n\nTo gain a better understanding of source followers, let us calculate the small-signal output resistance of the circuit in Fig. 3.39(a). Using the equivalent circuit of Fig. 3.39(b) and noting that \\( V_{X}=-V_{b s} \\), we write\n\n$$\n\\begin{equation*}\nI_{X}-g_{m} V_{X}-g_{m b} V_{X}=0 \\tag{3.90}\n\\end{equation*}\n$$\n\nIt follows that\n\n$$\n\\begin{equation*}\nR_{o u t}=\\frac{1}{g_{m}+g_{m b}} \\tag{3.91}\n\\end{equation*}\n$$\n\nimage_name:(a)\ndescription:\n[\nname: M1, type: NMOS, ports: {S: S1, D: VDD, G: ac(GND)}\nname: I1, type: CurrentSource, value: I1, ports: {Np: S1, Nn: GND}\n]\nextrainfo:The circuit is a source follower configuration with NMOS M1, where the output is taken across Rout. The input is an AC signal connected to the gate of M1. The current source I1 is connected to the source of M1, providing biasing.\nimage_name:(b)\ndescription:The circuit represents a small-signal model for calculating the output impedance of a source follower. The NMOS transistor M1 is connected with its source at Vx, drain at GND, and gate at V1. The current source Ix and voltage source Vx are used for small-signal analysis.\nimage_name:(c)\ndescription:The circuit is a source follower with an NMOS transistor M1. The output resistance is calculated considering the body effect, which decreases the output resistance.\nFigure 3.39 Calculation of the output impedance of a source follower.\n\nThis result should not come as a surprise: the circuit in Fig. 3.39(b) is similar to that in Fig. 3.11(b). Interestingly, body effect decreases the output resistance of source followers. To understand why, suppose that in Fig. 3.39(c), \\( V_{X} \\) decreases by \\( \\Delta V \\) so that the drain current increases. With no body effect, only the gate-source voltage of \\( M_{1} \\) would increase by \\( \\Delta V \\). With body effect, on the other hand, the threshold voltage of the device decreases as well. Thus, in \\( \\left(V_{G S}-V_{T H}\\right)^{2} \\), the first term increases and the second decreases, resulting in a greater change in the drain current and hence a lower output impedance.\n\nThe above phenomenon can also be studied with the aid of the small-signal model shown in Fig. 3.40(a). It is important to note that the magnitude of the current source \\( g_{m b} V_{b s}=g_{m b} V_{X} \\) is linearly proportional to the voltage across it (because the current source and the voltage source are in parallel). Such a behavior is that of a simple resistor equal to \\( 1 / g_{m b} \\), yielding the small-signal model shown in Fig. 3.40(b). The equivalent resistor simply appears in parallel with the output, thereby lowering the overall output resistance. Since without \\( 1 / g_{m b} \\), the output resistance equals \\( 1 / g_{m} \\), we conclude that\n\n$$\n\\begin{align*}\nR_{\\text {out }} & =\\frac{1}{g_{m}} \\| \\frac{1}{g_{m b}}  \\tag{3.92}\\\\\n& =\\frac{1}{g_{m}+g_{m b}} \\tag{3.93}\n\\end{align*}\n$$\n\nModeling the effect of \\( g_{m b} \\) by a resistor—which is valid only for source followers-also helps explain the less-than-unity voltage gain implied by (3.86) for \\( R_{S}=\\infty \\). As shown in the Thevenin equivalent\nimage_name:Figure 3.40(a)\ndescription:\n[\nname: Vx, type: VoltageSource, value: Vx, ports: {Np: Vx, Nn: GND}\nname: gmV1, type: VoltageControlledCurrentSource, value: gmV1, ports: {Np: GND, Nn: Vx}\nname: gmbVx, type: VoltageControlledCurrentSource, value: gmbVx, ports: {Np: Vx, Nn: GND}\n]\nextrainfo:The circuit in Figure 3.40 illustrates a source follower including the body effect. It shows the use of voltage-controlled current sources to model the transconductance and body effect, and a resistor representing the reciprocal of the body transconductance. The voltage sources V1 and Vx, along with the current source Ix, provide the necessary biasing and input signals.\nimage_name:Figure 3.49(b)\ndescription:\n[\nname: Vx, type: VoltageSource, value: Vx, ports: {Np: GND, Nn: Vx}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: Vx}\nname: 1/gmb, type: Resistor, value: 1/gmb, ports: {N1: Vx, N2: GND}\n]\nextrainfo:The circuit in Figure 3.41 represents a source follower including the body effect, modeled using a Thevenin equivalent. It includes a voltage source V1, a voltage source Vx, two voltage-controlled current sources gmV1 and gmbVx, a current source Ix, and a resistor with value 1/gmb. The circuit demonstrates the effects of body effect on the source follower's voltage gain.\nFigure 3.40 Source follower including body effect.\n\nimage_name:Figure 3.41\ndescription:\n[\nname: Vin, type: VoltageSource, value: Vin, ports: {Np: Vin, Nn: GND}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: Vout}\nname: 1/gmb, type: Resistor, value: 1/gmb, ports: {N1: Vout, N2: GND}\n]\nextrainfo:The circuit in Figure 3.40 represents a source follower including the body effect, modeled using a Thevenin equivalent. It includes a voltage source Vin, a voltage source V1, a voltage-controlled current source gmV1, and resistors with values 1/gm and 1/gmb. The circuit demonstrates the effects of body effect on the source follower's voltage gain.\nFigure 3.41 Representation of intrinsic source follower by a Thevenin equivalent.\nof Fig. 3.41,\n\n$$\n\\begin{align*}\nA_{v} & =\\frac{\\frac{1}{g_{m b}}}{\\frac{1}{g_{m}}+\\frac{1}{g_{m b}}}  \\tag{3.94}\\\\\n& =\\frac{g_{m}}{g_{m}+g_{m b}} \\tag{3.95}\n\\end{align*}\n$$\n\nFor completeness, we also study a source follower with a finite load resistance and channel-length modulation [Fig. 3.42(a)]. Noting that \\( 1 / g_{m b}, r_{O 1}, r_{O 2} \\), and \\( R_{L} \\) are in"
},
{
    "text": "Our analysis shows that to maximize voltage gain with a limited supply voltage in a common-source stage, the load impedance should be maximized. When driving a low-impedance load, a \"buffer\" must be added after the amplifier to drive the load without significantly reducing the gain. The source follower, also known as the \"common-drain\" stage, can serve as a voltage buffer.\n\nFigure 3.34(a) depicts a source follower circuit using an NMOS transistor M1 to buffer the input voltage Vin to the output Vout. The resistor RS, connected between Vout and ground, provides a path for the output current. This circuit acts as a voltage buffer, presenting high input impedance at the gate of M1 and driving the load at the source.\n\nFigure 3.34(b) shows a gain stage followed by a buffer. M1 acts as the gain stage, while M2 serves as the buffer to drive low resistance loads without degrading the voltage gain. The source follower configuration allows the output voltage to closely follow the input voltage.\n\nFigure 3.34(c) is a plot depicting the input-output characteristic of a source follower circuit, specifically showing how the output voltage \\( V_{out} \\) relates to the input voltage \\( V_{in} \\).\n\nThis graph effectively illustrates the behavior of the source follower as a voltage buffer, highlighting its ability to drive loads while maintaining input-output linearity above a certain threshold voltage.\n\nFigure 3.35 represents a small-signal equivalent circuit of a source follower. It includes a voltage source Vin, a resistor RS connected to ground, and two voltage-controlled current sources, gmV1 and gmbVbs, both connected to Vout and ground.\n\nFigure 3.36 shows the voltage gain of a source follower versus the input voltage. The graph starts at the threshold voltage \\( V_{TH} \\) on the \\( V_{in} \\) axis. At this point, the voltage gain \\( A_v \\) begins from zero. As \\( V_{in} \\) increases, the voltage gain \\( A_v \\) rises monotonically. The curve approaches an asymptotic value given by the expression \\( \\frac{1}{1+\\eta} \\), where \\( \\eta \\) is a parameter that decreases slowly with increasing \\( V_{out} \\).\n\nFigure 3.37 illustrates a source follower using (a) an ideal current source, and (b) an NMOS transistor as a current source.\n\nFigure 3.38 represents a basic voltage follower with a voltage-controlled current source gmV1 connected between Vout and ground. Vin is the input voltage source connected to Vout.\n\nFigure 3.39 depicts the calculation of the output impedance of a source follower.\n\nFigure 3.40 illustrates a source follower including the body effect. It shows the use of voltage-controlled current sources to model the transconductance and body effect, and a resistor representing the reciprocal of the body transconductance. The voltage sources V1 and Vx, along with the current source Ix, provide the necessary biasing and input signals.\n\nFigure 3.41 represents a source follower including the body effect, modeled using a Thevenin equivalent. It includes a voltage source Vin, a voltage source V1, a voltage-controlled current source gmV1, and resistors with values 1/gm and 1/gmb. The circuit demonstrates the effects of body effect on the source follower's voltage gain.\n\nFigure 3.42 (a) shows a source follower driving a load resistance, (b) a small-signal equivalent circuit, and (c) a simplified model.\n\nFigure 3.43 is a source follower configuration with an NMOS transistor M1 and a PMOS transistor M2. M1 is driven by the input voltage Vin, and M2 is diode-connected, providing feedback to stabilize the output voltage Vout. The circuit provides high input impedance and moderate output impedance.\n\nFigure 3.44 (a) shows a PMOS source follower designed to eliminate the body effect by using separate n-wells for M1 and M2. The layout in (b) shows the n-well contacts and connections for Vb, Vin, Vout, and GND.\n\nFigure 3.45 is a cascade of a source follower and a common-source stage. It involves three NMOS transistors and a current source. The node X is an intermediate node connecting the source of M2 and the drain of M1. The output is taken from the drain of M2 and the drain of M3, labeled as Vout. The circuit is powered by VDD.\n\nFigure 3.46 (a) shows a source follower configuration used to drive a load resistor RL. It includes an NMOS transistor M1, a load resistor RL, and a current source I1. The output voltage Vout is taken across the load resistor RL. (b) shows a common-source stage with an NMOS transistor (M1) driving a load resistor (RL). The input is applied to the gate of M1, and the output is taken from the drain of M1. The source of M1 is grounded.\n\nFigure 3.47 (a) is a basic amplifier configuration with an NMOS transistor (M1) and a PMOS transistor (M2). The input voltage (Vin) is applied to the gate of M1, and the output voltage (Vout) is taken from the drain of M1. The PMOS transistor M2 acts as a load for the NMOS transistor M1. The current source I1 provides biasing for the NMOS transistor. Capacitor C1 is used for AC coupling, ensuring that the AC signal is transferred without affecting the DC biasing. (b) is a modified version to accommodate an input DC level close to VDD. It includes NMOS transistors M1 and M3, PMOS transistor M2, current sources I1 and I2, and a capacitor C1. The configuration ensures M1 remains in saturation by controlling the gate-source voltages of M2 and M3."
},
{
    "text": "To achieve a high voltage gain with limited supply voltage, our analysis of the common-source stage suggests that the load impedance should be maximized. However, if this stage needs to drive a low-impedance load, a \"buffer\" must be added after the amplifier to drive the load without significantly reducing the gain. The source follower, also known as the \"common-drain\" stage, can serve as a voltage buffer.\n\nThe source follower circuit depicted in Figure 3.34(a) employs an NMOS transistor M1 to buffer the input voltage Vin to the output Vout. The resistor RS is connected between Vout and ground, offering a path for the output current. This circuit acts as a voltage buffer, presenting high input impedance at the gate of M1 and driving the load at the source.\n\nFigure 3.34(b) illustrates a gain stage followed by a buffer. M1 functions as the gain stage, while M2 acts as the buffer to drive low resistance loads without degrading the voltage gain. The source follower configuration allows the output voltage to closely track the input voltage.\n\nFigure 3.34(c) presents a graph depicting the input-output characteristic of a source follower circuit, specifically showing how the output voltage \\( V_{out} \\) relates to the input voltage \\( V_{in} \\). This linear plot demonstrates the relationship between input and output voltages in a source follower circuit, with the x-axis representing \\( V_{in} \\) and the y-axis representing \\( V_{out} \\). Both axes are likely measured in volts (V). The graph exhibits a linear region where \\( V_{out} \\) closely follows \\( V_{in} \\) but is offset by a threshold voltage \\( V_{TH} \\). Initially, as \\( V_{in} \\) increases from zero, \\( V_{out} \\) remains at zero until \\( V_{in} \\) reaches \\( V_{TH} \\). Beyond \\( V_{TH} \\), \\( V_{out} \\) increases linearly with \\( V_{in} \\), maintaining a constant voltage difference \\( V_{GS} \\) between the two.\n\nThe threshold voltage \\( V_{TH} \\) marks the critical point on the x-axis where the output begins to follow the input. The linear region indicates the operational range of the source follower where it acts as a buffer, providing near-unity gain (\\( V_{out} = V_{in} - V_{GS} \\)). The dashed line represents the ideal case where \\( V_{out} = V_{in} \\), showing the deviation due to \\( V_{GS} \\). The graph includes annotations for \\( V_{TH} \\) and \\( V_{GS} \\), indicating the threshold voltage and gate-source voltage, respectively. The slope of the linear portion of the graph is slightly less than 1, illustrating the voltage drop across the device.\n\nThis graph effectively illustrates the behavior of the source follower as a voltage buffer, highlighting its ability to drive loads while maintaining input-output linearity above a certain threshold voltage.\n\nFigure 3.34 (a) Source follower, (b) example of its role as a buffer, and (c) its input-output characteristic.\n\nIllustrated in Fig. 3.34(a), the source follower senses the signal at the gate while presenting a high input impedance and drives the load at the source, allowing the source potential to \"follow\" the gate voltage. Figure 3.34(b) depicts how the circuit can be used to drive a low resistance without degrading the voltage gain of a CS stage. Beginning with the large-signal behavior of the source follower, we note that for \\( V_{\\text {in }}<V_{T H} \\), M1 is off and \\( V_{\\text {out }}=0 \\). As \\( V_{\\text {in }} \\) exceeds \\( V_{T H} \\), M1 turns on in saturation and \\( I_{D 1} \\) flows through \\( R_{S} \\) [Fig. 3.34(c)]. As \\( V_{i n} \\) increases further, \\( V_{o u t} \\) follows the input with a difference (level shift) equal to \\( V_{G S} \\). We can express the input-output characteristic as:\n\n$$\n\\begin{equation*}\n\\frac{1}{2} \\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{\\text {in }}-V_{T H}-V_{\\text {out }}\\right)^{2} R_{S}=V_{\\text {out }} \\tag{3.82}\n\\end{equation*}\n$$\n\nwhere channel-length modulation is neglected. Let us calculate the small-signal gain of the circuit by differentiating both sides of (3.82) with respect to \\( V_{i n} \\):\n\n$$\n\\begin{equation*}\n\\frac{1}{2} \\mu_{n} C_{\\text {ox }} \\frac{W}{L} 2\\left(V_{\\text {in }}-V_{T H}-V_{\\text {out }}\\right)\\left(1-\\frac{\\partial V_{T H}}{\\partial V_{\\text {in }}}-\\frac{\\partial V_{\\text {out }}}{\\partial V_{\\text {in }}}\\right) R_{S}=\\frac{\\partial V_{\\text {out }}}{\\partial V_{\\text {in }}} \\tag{3.83}\n\\end{equation*}\n$$\n\nSince \\( \\partial V_{T H} / \\partial V_{\\text {in }}=\\left(\\partial V_{T H} / \\partial V_{S B}\\right)\\left(\\partial V_{S B} / \\partial V_{\\text {in }}\\right)=\\eta \\partial V_{\\text {out }} / \\partial V_{\\text {in }} \\),\n\n$$\n\\begin{equation*}\n\\frac{\\partial V_{\\text {out }}}{\\partial V_{\\text {in }}}=\\frac{\\mu_{n} C_{\\text {ox }} \\frac{W}{L}\\left(V_{\\text {in }}-V_{T H}-V_{\\text {out }}\\right) R_{S}}{1+\\mu_{n} C_{\\text {ox }} \\frac{W}{L}\\left(V_{\\text {in }}-V_{T H}-V_{\\text {out }}\\right) R_{S}(1+\\eta)} \\tag{3.84}\n\\end{equation*}\n$$\n\nAlso, note that\n\n$$\n\\begin{equation*}\ng_{m}=\\mu_{n} C_{o x} \\frac{W}{L}\\left(V_{\\text {in }}-V_{T H}-V_{\\text {out }}\\right) \\tag{3.85}\n\\end{equation*}\n$$\n\nConsequently,\n\n$$\n\\begin{equation*}\nA_{v}=\\frac{g_{m} R_{S}}{1+\\left(g_{m}+g_{m b}\\right) R_{S}} \\tag{3.86}\n\\end{equation*}\n$$\n\nThe same result is more easily obtained with the aid of a small-signal equivalent circuit. From Fig. 3.35, we have \\( V_{\\text {in }}-V_{1}=V_{\\text {out }} \\), \\( V_{\\text {bs }}=-V_{\\text {out }} \\), and \\( g_{m} V_{1}-g_{m b} V_{\\text {out }}=V_{\\text {out }} / R_{S} \\). Thus, \\( V_{\\text {out }} / V_{\\text {in }}=g_{m} R_{S} /[1+$ $\\left.\\left(g_{m}+g_{m b}\\right) R_{S}\\right]$.\n\nFigure 3.35 Small-signal equivalent circuit of source follower.\n\nSketched in Fig. 3.36 vs. \\( V_{i n} \\), the voltage gain begins from zero for \\( V_{i n} \\approx V_{T H} \\) (that is, \\( g_{m} \\approx 0 \\)) and monotonically increases. As the drain current and \\( g_{m} \\) increase, \\( A_{v} \\) approaches \\( g_{m} /\\left(g_{m}+g_{m b}\\right)=1 /(1+\\eta) \\). Since \\( \\eta \\) itself slowly decreases with \\( V_{\\text {out }} \\), \\( A_{v} \\) would eventually become equal to unity, but for typical allowable source-bulk voltages, \\( \\eta \\) remains greater than roughly 0.2.\n\nFigure 3.36 Voltage gain of source follower versus input voltage.\n\nAn important result of (3.86) is that even if \\( R_{S}=\\infty \\), the voltage gain of a source follower is not equal to one (unless body effect is removed as explained later). We return to this point later. Note that \\( M_{1} \\) in Fig. 3.34(a) remains in saturation if \\( V_{i n} \\) does not exceed \\( V_{D D}+V_{T H} \\).\n\nIn the source follower of Fig. 3.34(a), the drain current of \\( M_{1} \\) heavily depends on the input dc level. For example, if \\( V_{i n} \\) changes from 0.7 V to \\( 1 \\mathrm{~V} \\), \\( I_{D} \\) may increase by a factor of 2, and hence \\( V_{G S}-V_{T H} \\) by \\( \\sqrt{2} \\). Even if \\( V_{T H} \\) is relatively constant, the increase in \\( V_{G S} \\) means that \\( V_{\\text {out }}\\left(=V_{i n}-V_{G S}\\right) \\) does not follow \\( V_{i n} \\) faithfully, thereby incurring nonlinearity. To alleviate this issue, the resistor can be replaced by a constant current source as shown in Fig. 3.37(a). The current source itself is implemented as an NMOS transistor operating in the saturation region [Fig. 3.37(b)].\n\nFigure 3.37 Source follower using (a) an ideal current source, and (b) an NMOS transistor as a current source.\n\nExample 3.12\nSuppose that in the source follower of Fig. 3.37(a), \\( (W / L)_{1}=20 / 0.5 \\), \\( I_{1}=200 \\mu \\mathrm{~A} \\), \\( V_{T H 0}=0.6 \\mathrm{~V} \\), \\( 2 \\Phi_{F}=0.7 \\mathrm{~V} \\), \\( V_{D D}=1.2 \\mathrm{~V} \\), \\( \\mu_{n} C_{o x}=50 \\mu \\mathrm{~A} / \\mathrm{V}^{2} \\), and \\( \\gamma=0.4 \\mathrm{~V}^{1 / 2} \\).\n(a) Calculate \\( V_{\\text {out }} \\) for \\( V_{\\text {in }}=1.2 \\mathrm{~V} \\).\n(b) If \\( I_{1} \\) is implemented as \\( M_{2} \\) in Fig. 3.37 (b), find the minimum value of \\( (W / L)_{2} \\) for which \\( M_{2} \\) remains saturated when \\( V_{i n}=1.2 \\mathrm{~V} \\).\n\n#### Solution\n\n(a) Since the threshold voltage of \\( M_{1} \\) depends on \\( V_{\\text {out }} \\), we perform a simple iteration. Noting that\n\n$$\n\\begin{equation*}\n\\left(V_{\\text {in }}-V_{T H}-V_{\\text {out }}\\right)^{2}=\\frac{2 I_{D}}{\\mu_{n} C_{o x}\\left(\\frac{W}{L}\\right)_{1}} \\tag{3.87}\n\\end{equation*}\n$$\n\nwe first assume that \\( V_{T H} \\approx 0.6 \\mathrm{~V} \\), obtaining \\( V_{\\text {out }}=0.153 \\mathrm{~V} \\). Now we calculate a new \\( V_{T H} \\) as\n\n$$\n\\begin{align*}\nV_{T H} & =V_{T H 0}+\\gamma\\left(\\sqrt{2 \\Phi_{F}+V_{S B}}-\\sqrt{2 \\Phi_{F}}\\right)  \\tag{3.88}\\\\\n& =0.635 \\mathrm{~V} \\tag{3.89}\n\\end{align*}\n$$\n\nThis indicates that \\( V_{\\text {out }} \\) is approximately 35 mV less than that calculated above, i.e., \\( V_{\\text {out }} \\approx 0.118 \\mathrm{~V} \\).\n(b) Since the drain-source voltage of \\( M_{2} \\) is equal to 0.118 V, the device is saturated only if \\( \\left(V_{G S}-V_{T H}\\right)_{2} \\leq 0.118 \\mathrm{~V} \\). With \\( I_{D}=200 \\mu \\mathrm{~A} \\), this gives \\( (W / L)_{2} \\geq 287 / 0.5 \\). Note the substantial drain junction and overlap capacitance contributed by \\( M_{2} \\) to the output node.\n\n#### Example 3.13\n\nExplain intuitively why the gain of the source follower in Fig. 3.37(a) is equal to unity if \\( I_{1} \\) is ideal and \\( \\lambda=\\gamma=0 \\).\n\n#### Solution\n\nIn this case, the drain current of \\( M_{1} \\) remains exactly constant, and so does \\( V_{G S 1} \\). Since \\( V_{\\text {out }}=V_{\\text {in }}-V_{G S 1} \\), we observe that a change in \\( V_{\\text {in }} \\) must equally appear in \\( V_{\\text {out }} \\). Alternatively, as shown in Fig. 3.38, we can say that the small-signal drain current cannot flow through any path and must be zero, yielding \\( V_{1}=0 \\) and \\( V_{\\text {out }}=V_{\\text {in }} \\).\n\nTo gain a better understanding of source followers, let us calculate the small-signal output resistance of the circuit in Fig. 3.39(a). Using the equivalent circuit of Fig. 3.39(b) and noting that \\( V_{X}=-V_{b s} \\), we write\n\n$$\n\\begin{equation*}\nI_{X}-g_{m} V_{X}-g_{m b} V_{X}=0 \\tag{3.90}\n\\end{equation*}\n$$\n\nIt follows that\n\n$$\n\\begin{equation*}\nR_{o u t}=\\frac{1}{g_{m}+g_{m b}} \\tag{3.91}\n\\end{equation*}\n$$\n\nThis result should not come as a surprise: the circuit in Fig. 3.39(b) is similar to that in Fig. 3.11(b). Interestingly, body effect decreases the output resistance of source followers. To understand why, suppose that in Fig. 3.39(c), \\( V_{X} \\) decreases by \\( \\Delta V \\) so that the drain current increases. With no body effect, only the gate-source voltage of \\( M_{1} \\) would increase by \\( \\Delta V \\). With body effect, on the other hand, the threshold voltage of the device decreases as well. Thus, in \\( \\left(V_{G S}-V_{T H}\\right)^{2} \\), the first term increases and the second decreases, resulting in a greater change in the drain current and hence a lower output impedance.\n\nThe above phenomenon can also be studied with the aid of the small-signal model shown in Fig. 3.40(a). It is important to note that the magnitude of the current source \\( g_{m b} V_{b s}=g_{m b} V_{X} \\) is linearly proportional to the voltage across it (because the current source and the voltage source are in parallel). Such a behavior is that of a simple resistor equal to \\( 1 / g_{m b} \\), yielding the small-signal model shown in Fig. 3.40(b). The equivalent resistor simply appears in parallel with the output, thereby lowering the overall output resistance. Since without \\( 1 / g_{m b} \\), the output resistance equals \\( 1 / g_{m} \\), we conclude that\n\n$$\n\\begin{align*}\nR_{\\text {out }} & =\\frac{1}{g_{m}} \\| \\frac{1}{g_{m b}}  \\tag{3.92}\\\\\n& =\\frac{1}{g_{m}+g_{m b}} \\tag{3.93}\n\\end{align*}\n$$\n\nModeling the effect of \\( g_{m b} \\) by a resistor—which is valid only for source followers—also helps explain the less-than-unity voltage gain implied by (3.86) for \\( R_{S}=\\infty \\). As shown in the Thevenin equivalent\nimage_name:Figure 3.40(a)\ndescription:\n[\nname: Vx, type: VoltageSource, value: Vx, ports: {Np: Vx, Nn: GND}\nname: gmV1, type: VoltageControlledCurrentSource, value: gmV1, ports: {Np: GND, Nn: Vx}\nname: gmbVx, type: VoltageControlledCurrentSource, value: gmbVx, ports: {Np: Vx, Nn: GND}\n]\nextrainfo:The circuit in Figure 3.40 illustrates a source follower including the body effect. It shows the use of voltage-controlled current sources to model the transconductance and body effect, and a resistor representing the reciprocal of the body transconductance. The voltage sources V1 and Vx, along with the current source Ix, provide the necessary biasing and input signals.\nimage_name:Figure 3.49(b)\ndescription:\n[\nname: Vx, type: VoltageSource, value: Vx, ports: {Np: GND, Nn: Vx}\nname: gmV1, type: VoltageControlledCurrentSource, ports: {Np: GND, Nn: Vx}\nname: 1/gmb, type: Resistor, value: 1/gmb, ports: {N1"
},
{
    "text": "To maximize voltage gain with a restricted power supply, the common-source stage requires a high load impedance. Should this stage need to drive a low-impedance load, a buffer stage is essential to ensure minimal gain loss. The source follower circuit, also known as the common-drain stage, serves effectively as this buffer.\n\nThe source follower circuit (Figure 3.34(a)) uses an NMOS transistor (M1) to transfer the input voltage (Vin) to the output (Vout). The resistor (RS) provides a path for the output current and ensures the circuit behaves as a voltage buffer, maintaining high input impedance at the gate of M1 and driving the load at the source.\n\nFigure 3.34(b) presents a circuit with a gain stage followed by a buffer. M1 functions as the gain stage, while M2 acts as the buffer, enabling the circuit to drive low-impedance loads without compromising voltage gain. The source follower configuration ensures the output voltage closely tracks the input voltage.\n\nThe graph in Figure 3.34(c) shows the input-output characteristics of a source follower circuit, illustrating the relationship between the output voltage (Vout) and the input voltage (Vin). This linear plot highlights the circuit's behavior as a voltage buffer, indicating that the output voltage closely follows the input voltage above a certain threshold voltage (VTH).\n\nThe equations provided in the text describe the behavior of the source follower circuit in terms of its small-signal gain and output resistance. They also explain how the body effect and channel-length modulation affect these parameters. The graphs and figures further illustrate the concepts discussed in the text, such as the voltage gain versus input voltage and the small-signal equivalent circuit of a source follower.\n\nThe examples and calculations demonstrate how to analyze and design source follower circuits, taking into account factors such as biasing, transistor characteristics, and load conditions. They also emphasize the trade-offs associated with using source followers, such as nonlinearity and voltage headroom limitations.\n\nIn summary, the source follower circuit is a versatile configuration used in amplifiers and other electronic circuits. While it offers advantages like high input impedance and voltage buffering, it also presents challenges that must be considered in circuit design."
},
{
    "text": "Our investigation into the common-source stage suggests that maximizing the load impedance is essential for achieving high voltage gain within the constraints of a limited supply voltage. In cases where this stage must drive a low-impedance load, a buffer is necessary after the amplifier to ensure the load is driven with minimal impact on gain. The source follower, also known as the \"common-drain\" stage, serves as an effective voltage buffer.\n\nFigure 3.34(a) illustrates a source follower circuit utilizing an NMOS transistor M1 to transfer the input voltage Vin to the output Vout. A resistor RS is placed between Vout and ground, establishing a path for the output current. This circuit acts as a voltage buffer, presenting a high input impedance at the gate of M1 while driving the load at the source.\n\nFigure 3.34(b) depicts a circuit where a gain stage is followed by a buffer. M1 functions as the gain stage, while M2 acts as the buffer to drive low resistance loads without compromising the voltage gain. The source follower configuration allows the output voltage to closely track the input voltage.\n\nFigure 3.34(c) presents a graph illustrating the input-output characteristics of a source follower circuit, specifically demonstrating the relationship between the output voltage \\( V_{out} \\) and the input voltage \\( V_{in} \\). The graph reveals a linear region where \\( V_{out} \\) closely follows \\( V_{in} \\), offset by a threshold voltage \\( V_{TH} \\). As \\( V_{in} \\) increases from zero, \\( V_{out} \\) remains at zero until \\( V_{in} \\) reaches \\( V_{TH} \\). Beyond \\( V_{TH} \\), \\( V_{out} \\) increases linearly with \\( V_{in} \\), maintaining a constant voltage difference \\( V_{GS} \\).\n\nThe graph effectively portrays the behavior of the source follower as a voltage buffer, emphasizing its ability to drive loads while preserving input-output linearity above a certain threshold voltage. Figure 3.35 shows a small-signal equivalent circuit of a source follower, and Figure 3.36 illustrates the voltage gain of a source follower versus the input voltage.\n\nIn summary, source followers provide high input impedance and moderate output impedance, but they suffer from nonlinearity and voltage headroom limitations. These issues are discussed in detail, along with examples and calculations demonstrating the voltage gain and behavior of source followers in various circuit configurations."
},
{
    "text": "Our analysis of the common-source stage shows that for high voltage gain with limited supply voltage, the load impedance should be as large as possible. If the stage needs to drive a low-impedance load, a \"buffer\" must be added after the amplifier to drive the load without significantly reducing the gain. The source follower (also known as the \"common-drain\" stage) can serve as a voltage buffer.\n\nFigure 3.34(a) shows a source follower circuit using an NMOS transistor M1 to buffer the input voltage Vin to the output Vout. The resistor RS is connected between Vout and ground, providing a path for the output current. The circuit acts as a voltage buffer, presenting high input impedance at the gate of M1 and driving the load at the source.\n\nFigure 3.34(b) shows a gain stage followed by a buffer. M1 acts as the gain stage, while M2 serves as the buffer to drive low resistance loads without degrading the voltage gain. The source follower configuration allows the output voltage to closely follow the input voltage.\n\nFigure 3.34(c) is a plot depicting the input-output characteristic of a source follower circuit, specifically showing how the output voltage \\( V_{out} \\) relates to the input voltage \\( V_{in} \\).\n\nThe graph is a linear plot showing the relationship between input and output voltages in a source follower circuit. The x-axis represents the input voltage \\( V_{in} \\), while the y-axis represents the output voltage \\( V_{out} \\). Both axes are likely measured in volts (V), although specific units are not marked on the graph.\n\nThe graph shows a linear region where \\( V_{out} \\) closely follows \\( V_{in} \\) but is offset by a threshold voltage \\( V_{TH} \\). Initially, as \\( V_{in} \\) increases from zero, \\( V_{out} \\) remains at zero until \\( V_{in} \\) reaches the threshold voltage \\( V_{TH} \\). Beyond \\( V_{TH} \\), \\( V_{out} \\) increases linearly with \\( V_{in} \\), maintaining a constant voltage difference \\( V_{GS} \\) between the two.\n\nThe threshold voltage \\( V_{TH} \\) is a critical point on the x-axis where the output begins to follow the input. The linear region indicates the operational range of the source follower where it acts as a buffer, providing a near-unity gain (\\( V_{out} = V_{in} - V_{GS} \\)). The dashed line represents the ideal case where \\( V_{out} = V_{in} \\), showing the deviation due to \\( V_{GS} \\).\n\nThe graph includes annotations for \\( V_{TH} \\) and \\( V_{GS} \\), indicating the threshold voltage and gate-source voltage, respectively. The slope of the linear portion of the graph is slightly less than 1, illustrating the voltage drop across the device.\n\nThis graph effectively illustrates the behavior of the source follower as a voltage buffer, highlighting its ability to drive loads while maintaining input-output linearity above a certain threshold voltage."
}
]